<html>
<head>
<title>Why I Migrated From JavaScript to TypeScript Again</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我再次从JavaScript迁移到TypeScript</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-i-migrated-from-javascript-to-typescript-again-69819a55daab?source=collection_archive---------9-----------------------#2022-03-16">https://betterprogramming.pub/why-i-migrated-from-javascript-to-typescript-again-69819a55daab?source=collection_archive---------9-----------------------#2022-03-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9df7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">TypeScript的好处以及何时应该迁移到它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/253df3788604fc9e82c062a2c11644c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2k9D4lnbw-DyBKbr"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@cgbriggs19?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯·布里格斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="1dc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们说，JavaScript运行网络。然而，根据2021年堆栈溢出调查<a class="ae ky" href="https://insights.stackoverflow.com/survey/2021#section-most-loved-dreaded-and-wanted-programming-scripting-and-markup-languages" rel="noopener ugc nofollow" target="_blank">显示，39%的JavaScript开发人员讨厌它，只有61%的人真正想使用它。</a></p><p id="b0ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2012年，当JavaScript仍然是web开发之王时，微软发布了他们的新编程语言TypeScript。它的设计是为了弥补JavaScript在大型复杂系统中的不足，因为它更灵活的表亲会让开发人员感到不安。</p><p id="2504" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调查还显示，相当一部分JavaScript开发人员希望使用TypeScript，甚至转而使用TypeScript。数据显示，后者目前是第三大最受欢迎的编程语言，75%的开发者希望在2022年使用它。</p><h1 id="2bd1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">复杂系统中的JavaScript</h1><p id="33e8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">不久前，我开始开发一个关系数据库管理系统，我想从头开始实现它。尽管我从来都不是JavaScript的粉丝，但我仍然决定用Node.js编写这个系统，因为我想了解更多关于这项技术的知识。</p><p id="28ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初，我对JavaScript的动态类型系统和极其灵活的结构有点满意。我可以比用Java或C++这样的语言更快地编写代码，这是我在这个项目中的第一选择。</p><p id="e951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，随着代码库变得越来越大，越来越复杂，我开始经常遇到打字问题。我相信大多数人都知道收到“<em class="ms">无法读取未定义/null </em>的属性”错误消息的沮丧，但是您不知道它可能来自哪里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/3c461ba9ef7056b016ae420c4a627734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QTKQ4jds2lOcCFdK4oXeTg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">JavaScript中的空类型错误。</p></figure><p id="1b14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript的另一个难题是处理对象。我总是不得不回到我创建这些对象的地方，因为没有办法定义一个所有实例都必须遵守的严格模板。更糟糕的是，IDE不能帮助捕捉输入错误，最重要的是，它不能给出任何关于一个对象有什么方法和属性的提示。毕竟，<code class="fe mu mv mw mx b">any</code>类型没有为您和ide提供太多的信息。</p><p id="cb74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然JavaScript在几个文件中只有几百行代码的代码库中做得很好，但您肯定会迷失在分布在几十个深度嵌套的文件和文件夹中的几千行代码中，更不用说过一段时间后重新工作的困难了，那时您可能已经忘记了存储在<code class="fe mu mv mw mx b">sqlToken</code>变量中的对象看起来是什么样子了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="33d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，查看您代码的其他开发人员可能会发疯，试图弄清楚某个结构是由什么组成的，或者它应该如何使用，更不用说调试与边缘情况相关的问题了。</p><h1 id="d054" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么要迁移到TypeScript？</h1><p id="4c77" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">虽然将您的代码库迁移到另一种技术看起来很可怕，特别是当您不熟悉它，并且大多数人都倾向于远离它时，但有时这是必要的。就我而言，我不得不切换到TypeScript两次。</p><p id="80b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不得不迁移的第一个项目是数据库管理系统，重写它绝对是一件痛苦的事情。首先，我必须学习这门语言以及如何设置开发环境。然后我检查了整个代码库，发现了几十个我想都没想过的愚蠢的打字错误和糟糕的做法。事实上，当您不需要在有意识地设计将要使用的数据结构上投入太多精力时，您在编写代码时往往会注意力不集中。</p><p id="12e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我必须迁移的第二个项目是预订系统的React前端。幸运的是，前端代码通常不包含太多逻辑，所以用TypeScript重写相对容易。然而，应用程序正确处理后端和前端之间的数据交换是至关重要的。特别是，最棘手的部分是商定一个公共结构，通常是JSON，来表示请求中的数据。</p><p id="2d49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在定义这样的结构时，对类型尽可能严格和精确是一个好主意，定义什么是允许的，什么是不允许的，以避免潜在的危险情况。这就是静态类型语言(如TypeScript)派上用场的地方，因为它们不允许您执行可能导致类型错误的操作——至少是直接执行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/fda0e6253ba4c9a1d8068a0d03a7aa83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O9cstti1wbDOEtKTO0caiA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TypeScript捕捉一个愚蠢的错误。</p></figure><h1 id="c450" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">迁移过程</h1><p id="d6de" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在，要将代码库语言从JavaScript更改为TypeScript，您必须经历一个两步过程。首先，你需要设置好开发环境。这包括安装所需的依赖项和创建一个<code class="fe mu mv mw mx b">tsconfig.json</code>来定义编译器设置。</p><p id="50d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在根目录中，运行以下命令将TypeScript添加到项目中。注意，你必须在你的系统上安装<code class="fe mu mv mw mx b">npm</code>。</p><p id="0ff1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mu mv mw mx b">npm install typescript — save-dev<br/>npx tsc --init</code></p><p id="683e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你必须根据你的需要编辑新创建的<code class="fe mu mv mw mx b">tsconfig.json</code>文件。为了让文章更简洁，我不会把重点放在如何做上，但是你可以遵循<a class="ae ky" href="https://www.typescriptlang.org/docs/handbook/migrating-from-javascript.html" rel="noopener ugc nofollow" target="_blank">这个简单的指南</a>。不管怎样，下面是一个Node.js项目的<code class="fe mu mv mw mx b">tsconfig.json</code>的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个Node.js <a class="ae ky" href="https://github.com/nic-obert/nodedb" rel="noopener ugc nofollow" target="_blank">项目</a>的tsconfig.json。</p></figure><p id="66e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二步是调整您的JavaScript代码，添加静态类型并修复最终会暴露出来的明显错误。然而，要做到这一点，您首先必须了解一些类型脚本。幸运的是，入门并不难，而且有无数关于它的好的在线教程。</p><p id="5fe7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个先在JavaScript中，然后在TypeScript中显示的Redux存储片段的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Redux存储片的JavaScript代码。</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Redux存储切片的类型脚本代码。</p></figure><p id="cdaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你！您已经不费吹灰之力就让您的代码库变得更加健壮和可靠。</p><h1 id="9f19" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">JavaScript与TypeScript:何时使用</h1><p id="ff53" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">尽管我个人不喜欢JavaScript，但我必须承认它在软件开发领域有一席之地。事实上，它灵活的语法非常适合快速简单地处理web请求和各种事件。此外，由于它的高抽象级别，它是一个很好的入门工具，并允许您轻松地用代码实现您的想法。</p><p id="0aeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，JavaScript并不总是最好的答案。虽然它在前端层的开发中仍然占据着主导地位，但不幸的是，由于我之前提到的所有原因，它缺乏复杂逻辑和大规模系统所需的可靠性和健壮性。</p><p id="a52b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本质上，如果您没有预见到您的代码库会增长到超过几百行代码，那么坚持使用JavaScript可能会更好，因为TypeScript可能有些矫枉过正。另一方面，如果您计划实现许多功能或处理大量数据，那么您应该直接从TypeScript开始。</p><p id="590f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不确定，您可以开始用JavaScript构建，并最终使您的代码库适应这种情况。至少以我的经验来看，在你的代码变得太大太复杂而无法移植到一个结构更好的技术栈之前，你的代码会变得太难管理。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/423900698549c7bd9199bf193e5dea6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAZFjERV01ZI7ZnPh7nBvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TypeScript与JavaScript用例图。</p></figure><h1 id="0804" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="efaf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">总而言之，JavaScript对于简单的小型系统已经足够好了，比如应用程序前端或最小的API后端。然而，对于更复杂的软件，比如订票系统后端或数据库管理系统，你最好使用结构更好的编程语言，比如TypeScript或任何其他具有静态类型的语言。</p><p id="8fef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管这很好，但是JavaScript并不能解决所有问题。这就是为什么许多不同的编程语言和技术首先存在的原因:它们被设计来完成一个特定的任务。而且，尽管你确实可以为你构建的每个系统使用一个技术栈，但这并不意味着你应该这样做。毕竟，你不能用锤子敲螺丝:螺丝刀能做得更好。</p><blockquote class="nc"><p id="d473" class="nd ne it bd nf ng nh ni nj nk nl lu dk translated">生活中没有放之四海而皆准的方法。归根结底，就是使用正确的工具完成正确的工作。</p></blockquote><p id="8995" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我希望你喜欢这篇文章。如果你有任何补充或问题，请在评论中分享你的想法。</p><p id="10d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>