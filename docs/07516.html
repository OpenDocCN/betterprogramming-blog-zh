<html>
<head>
<title>Stop Using Magic Numbers and Variables in Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止在你的代码中使用幻数和变量</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/stop-using-magic-numbers-and-variables-in-your-code-4e86f008b84c?source=collection_archive---------5-----------------------#2021-01-22">https://betterprogramming.pub/stop-using-magic-numbers-and-variables-in-your-code-4e86f008b84c?source=collection_archive---------5-----------------------#2021-01-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5abe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">没有人会理解你的程序。即使是你</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bc083d91b0d0e326458356b910896a36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v0bKKlZj_jk5NoJ1570fIg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">伊莎贝尔·玛利亚·古纳-维拉斯科于<a class="ae ky" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="8401" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有没有因为阅读不是自己写的代码而挠头的经历？</p><p id="59e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你当然有。</p><p id="0d0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不是一个看不懂代码的糟糕程序员。也许写代码的程序员是个魔术师——不是那种魔术师。</p><p id="0a68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在编码的时候，请记住这句话。</p><blockquote class="lv"><p id="b043" class="lw lx it bd ly lz ma mb mc md me lu dk translated">“编写代码的时候，要把最终维护你代码的人想象成一个知道你住哪儿的暴力精神病患者。”—约翰·伍德</p></blockquote><p id="1337" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">许多程序都苦于这样一个事实，即它们在编写时没有考虑到另一个读者。如果在编写代码时，你的后脑勺没有暴力的精神病患者，那么很可能会有一些糟糕的代码溜进来。</p><p id="93d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过一段时间后，你可能也很难读懂你自己的代码，除非你写的代码每个人都能永远理解。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="e5fb" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">什么是魔法？</h1><p id="d1ea" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">请不要把我们今天说的魔术和魔术方法(邓德方法)混为一谈。</p><p id="ebb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你很可能使用了<code class="fe no np nq nr b">__init__</code>作为你的类的初始化器。你试过用<code class="fe no np nq nr b">__str__</code>来控制打印对象时发生的事情吗？</p><p id="d081" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不喜欢的魔术是魔术变量和魔术数字。</p><h2 id="c0ad" class="ns ms it bd mt nt nu dn mx nv nw dp nb li nx ny nd lm nz oa nf lq ob oc nh od bi translated">神奇的变量</h2><p id="131d" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">神奇变量的变量名并不反映它所代表的内容。这个名字完全是胡言乱语，对读者来说毫无意义。</p><p id="b6d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下代码声明了一个神奇的变量:</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="b0d0" class="ns ms it nr b gy oi oj l ok ol">a = [i for i in range(1,7)]</span></pre><p id="e70a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">a</code>可以是任何东西。当然，这是一个从1到6的列表，但是我们将如何使用它呢？成绩，房间里的门，冰箱里的剩菜？</p><p id="d61d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不可能知道这段代码应该做什么。</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="d4c7" class="ns ms it nr b gy oi oj l ok ol">dice_alternatives = [die for die in range(1,7)]</span></pre><p id="80bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码都是关于骰子的，代码根据骰子的面的数量创建了一个列表。现在说得通了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/9967b0aacaa8b0c9404cf46961a76e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q8eCcjAHdJ0gyyAWlIugNA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">伊恩·冈萨雷斯在<a class="ae ky" href="https://unsplash.com/s/photos/dice?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d7ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你能找到改进上面代码的方法吗？</p><p id="f9e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它仅限于标准模具。因为我们习惯了有六个面的骰子，所以我们对这个代码没问题。然而，在骰子的世界里，你有一系列的选择。</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="8637" class="ns ms it nr b gy oi oj l ok ol">die_faces = 6<br/>dice_alternatives = [die for die in range(1,(die_faces+1))] <br/>//+1 cause range does not include the last number.</span></pre><p id="c4f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我打赌你见过这样的矩阵:</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="4ca3" class="ns ms it nr b gy oi oj l ok ol">for i in range(3):<br/>    for j in range(3):<br/>        print('*', end='')<br/>    print()</span></pre><p id="b45f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe no np nq nr b">i</code>变成<code class="fe no np nq nr b">row</code>以及将<code class="fe no np nq nr b">j</code>变成<code class="fe no np nq nr b">column</code>的微小调整会大有帮助。</p><h2 id="16d7" class="ns ms it bd mt nt nu dn mx nv nw dp nb li nx ny nd lm nz oa nf lq ob oc nh od bi translated">神奇的数字</h2><p id="14bc" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">考虑以下代码:</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="fb62" class="ns ms it nr b gy oi oj l ok ol">x = 13<br/>y = 21</span><span id="0adf" class="ns ms it nr b gy on oj l ok ol">if x&gt;=y:<br/>    print('old enough to drink')</span></pre><p id="169e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个准则是有意义的，因为你知道它是关于饮酒年龄的。代码读起来不好，因为<code class="fe no np nq nr b">x</code>应该是<code class="fe no np nq nr b">age</code>而<code class="fe no np nq nr b">y</code>应该是<code class="fe no np nq nr b">legal_age</code>。</p><p id="4115" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它可能看起来像这样:</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="c7fd" class="ns ms it nr b gy oi oj l ok ol">age = int(input('What is your age? (whole number)'))<br/>legal_age = 21<br/>can_drink = False</span><span id="08e6" class="ns ms it nr b gy on oj l ok ol">if age&gt;=legal_age:<br/>    print('old enough to drink')<br/>    can_drink = True</span></pre><p id="748e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如我所说，这并不是幻数的最大罪犯。如果你在表达式中间使用一个数字，就变得难以理解。</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="f621" class="ns ms it nr b gy oi oj l ok ol">distance = orig_distance * 0.393701</span></pre><p id="2001" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有训练有素的眼睛才能捕捉到英寸的转换。尤其是如果这仅涉及一小部分代码，而其余部分使用公制数字。没有任何注释或适当的变量名，这对于许多程序员来说将是难以理解的。</p><h2 id="16f9" class="ns ms it bd mt nt nu dn mx nv nw dp nb li nx ny nd lm nz oa nf lq ob oc nh od bi translated">那里有一个图书馆</h2><p id="456b" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">在某些情况下，您可以使用库。</p><p id="2400" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们都知道圆周率大致是3.14。因为我们在日常讲话中把圆周率说成3.14，所以在我们的代码中使用这个值是很诱人的。</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="9e82" class="ns ms it nr b gy oi oj l ok ol">circle_radius = 12.6<br/>area_circle = 3.14*circle_radius**2<br/>print(str(area_circle))</span></pre><p id="1056" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码返回<code class="fe no np nq nr b">498.5064</code>。</p><p id="507c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码和结果看起来很好，因为我们可以假设每个人都知道pi是3.14，但是在您的情况下可能不够好。</p><p id="ebde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们使用数学库的代码所要表达的意思，没有混淆，而且更准确。</p><pre class="kj kk kl km gt oe nr of og aw oh bi"><span id="d27e" class="ns ms it nr b gy oi oj l ok ol">import math</span><span id="1505" class="ns ms it nr b gy on oj l ok ol">circle_radius = 12.6<br/>area_circle = math.pi*circle_radius**2<br/>print(str(area_circle))</span></pre><p id="d1d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码返回<code class="fe no np nq nr b">498.7592496839155</code>。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="3f7c" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">为什么我们会有不良的编码习惯？</h1><p id="c6a3" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">老实说，这不全是你的错。</p><p id="519a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你见过多少次这样的课程:用<code class="fe no np nq nr b">j</code>和<code class="fe no np nq nr b">k</code>做嵌套循环，用<code class="fe no np nq nr b">i</code>做循环，函数中的参数<code class="fe no np nq nr b">n</code>，以及像<code class="fe no np nq nr b">a</code>、<code class="fe no np nq nr b">b</code>或<code class="fe no np nq nr b">c</code>这样的变量名？</p><p id="a12e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不仅仅发生在YouTube上。这在大学和其他学习编程的地方经常发生。</p><p id="56c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我看过的大多数编码教程都会在某个时候，在课程中使用神奇的变量和神奇的数字。这样做的主要原因是你不想浪费时间看别人编好的变量名。</p><p id="df22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实时解释更宽容。一个很差的变量名不伤那一刻的教学。然而，代码通常是作为额外的材料提供的，这使得以后理解代码本身变得更加困难。</p><p id="da2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你想给某人看一个快速的例子时，很容易使变量名毫无意义，以后也无法阅读。</p><p id="2938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过了一段时间，你开始将这些融入到你真正的代码中，并且你已经开始将你的坏习惯应用到你的日常工作中。一面大红旗应该在那一点上飘扬。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="de82" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">最后的想法</h1><p id="9661" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我们做个交易吧。</p><p id="2c09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你和你的同事讨论一段代码时，使用糟糕的变量名是可以的。当你测试你的代码时，这样做是可以的。希望你以后有时间重构它。(我们知道你永远没有时间重构。我们不要自欺欺人了。)</p><p id="2581" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你写别人会用的代码或者你一年后要维护的代码时，请不要让魔法出现。</p><p id="69d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，如果你的代码很神奇，那就太好了。如果它充满了神奇的变数，那它就不是。</p><p id="d5c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们消灭错误的魔法，让代码中正确的魔法继续前进。</p><p id="9d84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢了。</p></div></div>    
</body>
</html>