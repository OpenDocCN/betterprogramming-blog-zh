<html>
<head>
<title>Golang Basics: Speed Up Your Program With Goroutines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Golang基础:用Goroutines加速你的程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/golang-basics-speed-up-your-program-with-goroutines-4ce84945aba8?source=collection_archive---------9-----------------------#2021-04-05">https://betterprogramming.pub/golang-basics-speed-up-your-program-with-goroutines-4ce84945aba8?source=collection_archive---------9-----------------------#2021-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="258f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过同时运行多个任务来提升你的Golang程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0423076bd75a5a89dc4492108f412a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fo_5wN7GBbTtUG3WI4QzBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Adi Goldstein 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的原始照片。</p></figure><p id="d6f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顺序程序一次只运行一个任务。并发程序可以同时运行多个任务，从而提高程序速度。</p><p id="83b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Golang中，并发是通过Goroutines实现的。</p><p id="9b82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Goroutines允许您将顺序程序转换为并发程序，而不必担心线程问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e500" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是Goroutines？</h1><p id="18e4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在Golang中，Goroutines用于实现并发。它们是由Go运行时管理的轻量级线程。</p><p id="cc4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Goroutines使得创建比常规顺序程序更快执行任务的并发程序成为可能。</p><p id="2c89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个Goroutine的成本非常小。一个Go应用程序通常会同时运行数千个Goroutines。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="178e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何创建Goroutine</h1><p id="b9da" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们从创建一个不利用并发的程序开始，然后把它变成一个并发程序。</p><p id="330b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，您创建了一个<code class="fe mz na nb nc b">count</code>函数，它将数字计数到一个值。让我们想象一下，这个过程消耗了大量的资源，每个数字需要一秒钟来计算。这可以通过使用具有<code class="fe mz na nb nc b">Sleep</code>功能的<code class="fe mz na nb nc b">time</code>模块来模拟。</p><p id="7657" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导入<code class="fe mz na nb nc b">time</code>模块使用<code class="fe mz na nb nc b">Sleep</code>功能延迟程序:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0e61" class="nh md it nc b gy ni nj l nk nl"><strong class="nc iu">import</strong> (<br/>    "fmt"<br/>    "time"<br/>)</span></pre><p id="04f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后创建一个<code class="fe mz na nb nc b">count</code>函数，用一秒钟来计算每个数字:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="9b28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，调用这个函数:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="b9bb" class="nh md it nc b gy ni nj l nk nl"><strong class="nc iu">func</strong> main() {<br/>    count(5)<br/>    count(5)<br/>}</span></pre><p id="b774" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果，从<code class="fe mz na nb nc b">1</code>到<code class="fe mz na nb nc b">5</code>的数字被打印到控制台两次，正如预期的那样。</p><p id="33cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行该程序总共需要2 x 5 = 10秒才能完成。</p><p id="e40f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们通过让计数同时运行来加快速度。</p><p id="a296" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要做的就是为第一个调用创建一个Goroutine，使它与第二个调用同时运行。幸运的是，这非常简单。只需使用<code class="fe mz na nb nc b">go</code>关键字:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="602f" class="nh md it nc b gy ni nj l nk nl"><strong class="nc iu">func</strong> main() {<br/>    <strong class="nc iu">go</strong> count(5)<br/>    count(5)<br/>}</span></pre><p id="a530" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您现在运行这个程序，您可以看到这些数字是同时计数的，执行时间是没有Goroutines时的一半。</p><p id="048d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请随意使用Goroutines。例如，如果您想同时从<code class="fe mz na nb nc b">1</code>到<code class="fe mz na nb nc b">5</code>计数五次，您可以使用Goroutine在五秒钟内完成:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="348d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Golang的Goroutines基础到此为止。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="64ac" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="3fad" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在一些程序中，可以利用并发性同时执行多个任务。这可以大大加快程序的速度。</p><p id="4b64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Golang中，并发是通过使用关键字<code class="fe mz na nb nc b"><strong class="lb iu">go</strong></code>来实现的。Goroutine很容易让你把一个常规的顺序程序变成一个并发程序。</p><p id="22c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，此程序同时从1到5计数三次:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="1bd4" class="nh md it nc b gy ni nj l nk nl"><strong class="nc iu">func</strong> main() {<br/>    <strong class="nc iu">go</strong> count(5)<br/>    <strong class="nc iu">go</strong> count(5)<br/>    count(5)<br/>}</span></pre><p id="7201" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！我希望你喜欢这篇文章。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="67e6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><div class="no np gp gr nq nr"><a href="https://golang.org/doc/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">证明文件</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">Go编程语言是一个开源项目，旨在提高程序员的工作效率。围棋富有表现力，简洁…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">golang.org</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><h1 id="a631" class="mc md it bd me mf og mh mi mj oh ml mm jz oi ka mo kc oj kd mq kf ok kg ms mt bi translated">你可能会感兴趣</h1><div class="no np gp gr nq nr"><a href="https://medium.com/codex/go-in-one-go-39a28333cd5" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">一气呵成</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">快速浏览Google Go编程语言的基础知识。</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="ol l oc od oe oa of ks nr"/></div></div></a></div></div></div>    
</body>
</html>