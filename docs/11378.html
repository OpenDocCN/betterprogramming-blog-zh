<html>
<head>
<title>Generic Text Field in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的通用文本字段</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/generic-text-field-in-swiftui-aca764ac93d4?source=collection_archive---------14-----------------------#2022-03-14">https://betterprogramming.pub/generic-text-field-in-swiftui-aca764ac93d4?source=collection_archive---------14-----------------------#2022-03-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a00d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">创建带有绑定而不是字符串的文本字段。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7cf361e270bde2f689fa4b0381995b0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jY6N695Qfifu__1owpW1EA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@karishea?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Kari Shea </a>在<a class="ae kv" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e958" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SwiftUI提供了大量工具来创建复杂的应用程序。然而，一些人们可能认为是基本的工具目前却不见了。一个这样的工具是一个可编辑的文本字段，它接受一个对象而不是一个字符串的绑定，比如一个Int、Float甚至一个自定义对象。</p><p id="54bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，Swift为我们提供了创建通用文本字段的工具，该字段可以绑定到任何类型的对象。在我们检查代码之前(完整的代码在底部)，我们必须首先确定使用通用文本字段必须满足的两个先决条件。</p><p id="ebf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个先决条件是能够将自定义对象与字符串相互转换。为了将它转换成字符串，您的自定义对象必须符合<code class="fe ls lt lu lv b">CustomStringConvertible</code>。为了将它从字符串转换，您必须提供一个函数。</p><p id="206e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个函数应该接受一个字符串作为参数，并返回一个可选的类型值。对于许多内置类型来说，这很简单，比如对于float: <code class="fe ls lt lu lv b">return Float(inputString)</code>。对于自定义类型，您必须修改自己的转换函数。</p><p id="9a87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自定义对象的转换函数示例如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="0526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二个先决条件是当文本字段中的文本无效时显示一个视图。您可以提供带有错误消息的简单文本视图，也可以提供更复杂的视图。每当文本字段转换返回nil时，就会出现此视图。</p><p id="83a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，没有使用视图堆叠，所以如果<code class="fe ls lt lu lv b">GenericTextField</code>在<code class="fe ls lt lu lv b">VStack</code>中，它将垂直显示，或者在<code class="fe ls lt lu lv b">HStack</code>中，它将水平显示。</p><p id="29f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦这两个先决条件都满足，您就可以使用下面的<code class="fe ls lt lu lv b">GenericTextField</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="ffc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在VStack中使用此代码会导致以下结果:</p><div class="kg kh ki kj gt ab cb"><figure class="ly kk lz ma mb mc md paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/adf9d6ddfea5da51592f91a7340f27f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*7Ep2DYq20bALbrxtA_ZANw.png"/></div></figure><figure class="ly kk me ma mb mc md paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/500374988bcf2f59a9352d86f4137d00.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*S1y51Klsk0htEExqXa05Ig.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk mf di mg mh translated">GenericTextField在运行。顶部文本显示存储在<code class="fe ls lt lu lv b">carInformation</code>中的当前对象。左边是有效转换，右边是无效转换。</p></figure></div><p id="aa67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">GenericTextField</code>的完整代码可以在下面找到。对<code class="fe ls lt lu lv b">TextField </code>的任何样式更改都必须在<code class="fe ls lt lu lv b">GenericTextField</code>类内部完成。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="e364" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望本教程和代码对您有所帮助。请在您的任何代码中随意使用<code class="fe ls lt lu lv b">GenericTextField</code>!</p></div></div>    
</body>
</html>