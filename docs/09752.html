<html>
<head>
<title>The New Features of Python 3.10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.10的新特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-best-features-of-python-3-10-fa0048bc0e53?source=collection_archive---------3-----------------------#2021-10-06">https://betterprogramming.pub/the-best-features-of-python-3-10-fa0048bc0e53?source=collection_archive---------3-----------------------#2021-10-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="628a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更新到最新Python版本的4个理由</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/100e9a871c77b507973e612065ca7d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jphEB9O_Ir3Cpqh6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@ardievans?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ardi Evans </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在已经发布了Python 3.10。这个新版本没有增加新的模块，但是引入了很多新的有用的特性。新版本的安装可以从<a class="ae ky" href="https://www.python.org/downloads/release/python-3100a7/" rel="noopener ugc nofollow" target="_blank">官方python站点</a>完成。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a4e0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.有用的语法错误</h1><p id="9016" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">添加了一些新功能，在调试代码时可能会有所帮助，除了提供“语法错误”之外，还提供了更多指出错误语法的信息。</p><p id="22bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于刚开始使用Python的人来说，Python 3.10在解决错误时会派上用场，而不是使用StackOverflow。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="06ad" class="ne md it na b gy nf ng l nh ni">if rocket.position &gt; event_horizon</span><span id="dd74" class="ne md it na b gy nj ng l nh ni">File "&lt;stdin&gt;", line 1</span><span id="fe56" class="ne md it na b gy nj ng l nh ni">if rocket.position &gt; event_horizon</span><span id="0e8b" class="ne md it na b gy nj ng l nh ni">^</span><span id="7b17" class="ne md it na b gy nj ng l nh ni">SyntaxError: expected ':</span></pre><p id="a73f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个很有意义的例子是:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1e47" class="ne md it na b gy nf ng l nh ni">{x,y for x,y in zip(‘abcd’, ‘1234’)}</span><span id="47d3" class="ne md it na b gy nj ng l nh ni">File “&lt;stdin&gt;”, line 1</span><span id="7c18" class="ne md it na b gy nj ng l nh ni">{x,y for x,y in zip(‘abcd’, ‘1234’)}</span><span id="71b0" class="ne md it na b gy nj ng l nh ni">^^^</span><span id="6646" class="ne md it na b gy nj ng l nh ni">SyntaxError: did you forget parentheses around the comprehension target?</span></pre><h1 id="cb67" class="mc md it bd me mf nk mh mi mj nl ml mm jz nm ka mo kc nn kd mq kf no kg ms mt bi translated"><strong class="ak"> 2。结构模式匹配</strong></h1><p id="0c74" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">顾名思义，结构化模式匹配以match语句和case语句的形式使用。模式可以是序列、映射、原始数据类型和类实例。最后，Python有一个比switch语句更强大的switch语句。</p><p id="3688" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个简单的例子:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f2c1" class="ne md it na b gy nf ng l nh ni">numbers = [1,2,3,4]<br/>for n in numbers:<br/>    match n:<br/>        case 1:<br/>            print("Number is 1")<br/>        case 2:<br/>            print("Number is 2")<br/>        case 3:<br/>            print("Number is 3")<br/>        case _:<br/>            print("Number is not 1,2 or 3")</span></pre><p id="0a95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关键字<code class="fe np nq nr na b">match</code>后面是变量名。如果有匹配，将执行case块中的语句。<br/>如果不匹配，则执行<code class="fe np nq nr na b">case _</code>中的语句。</p><p id="30f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果看起来像这样:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2326" class="ne md it na b gy nf ng l nh ni">Number is 1<br/>Number is 2<br/>Number is 3<br/>Number is not 1,2 or 3</span></pre><p id="590f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">新的结构模式匹配不仅有基本的语法，还可以处理复杂的模式。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="50f8" class="ne md it na b gy nf ng l nh ni">def human_age(person):  # person = (name, age, gender)<br/>    match person:<br/>        case (name, _, "male"):<br/>            print(f"{name} is man.")<br/>        case (name, _, "female"):<br/>            print(f"{name} is woman.")<br/>        case (name, age, gender):<br/>            print(f"{name} is {age} old.")</span></pre><p id="b27b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果看起来像这样:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="0147" class="ne md it na b gy nf ng l nh ni">human_age(("Carol", 25, "female"))<br/>Carol is woman.</span></pre><p id="47a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">python的官方<a class="ae ky" href="https://www.python.org/dev/peps/pep-0636/#matching-specific-values" rel="noopener ugc nofollow" target="_blank">文档</a>中也有关于结构模式匹配的教程。</p><h1 id="e0bf" class="mc md it bd me mf nk mh mi mj nl ml mm jz nm ka mo kc nn kd mq kf no kg ms mt bi translated"><strong class="ak"> 3。新型联合运算符</strong></h1><p id="f36f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一种新的类型union操作符以<code class="fe np nq nr na b">X|Y</code>的形式引入，而不是使用类型化。工会。这为表达X型或y型提供了一种清晰的形式。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e670" class="ne md it na b gy nf ng l nh ni">def square(number: int|float):<br/>    return number ** 2</span></pre><p id="c033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="0cfc" class="ne md it na b gy nf ng l nh ni">square(2.5)<br/>6.25</span></pre><p id="a742" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">新运算符也可以作为第二个参数应用于<code class="fe np nq nr na b">isinstance()</code>和<code class="fe np nq nr na b">issubclass()</code>。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b271" class="ne md it na b gy nf ng l nh ni">isinstance("3",int|str)<br/>True</span><span id="5cbb" class="ne md it na b gy nj ng l nh ni">isinstance("GoodBye",int|str)<br/>True</span></pre><h1 id="4248" class="mc md it bd me mf nk mh mi mj nl ml mm jz nm ka mo kc nn kd mq kf no kg ms mt bi translated"><strong class="ak"> 4。改进模块</strong></h1><h2 id="2501" class="ne md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated"><strong class="ak"> 1。pprint() </strong></h2><p id="a44a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe np nq nr na b">pprint()</code>增加了新的关键字参数:<code class="fe np nq nr na b">underscore_numbers</code>。<code class="fe np nq nr na b">_</code>是为长数字添加的。大整数用<code class="fe np nq nr na b">_</code>字符分隔，以使<code class="fe np nq nr na b">pprint.pformat()</code>可读性更好。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b928" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt; pprint.pformat(int(1e9),underscore_numbers=True)<br/>'1_000_000_000'</span></pre><h2 id="961c" class="ne md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated"><strong class="ak"> 2。人口统计</strong></h2><p id="3262" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以使用人口计数或<code class="fe np nq nr na b">int.bit_count()</code>来计算整数的二进制表示中的位数。</p><p id="32b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显示执行人口统计的示例:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e0fd" class="ne md it na b gy nf ng l nh ni">value = 50</span><span id="326d" class="ne md it na b gy nj ng l nh ni">print(bin(value))<br/>0b101010</span><span id="0bb3" class="ne md it na b gy nj ng l nh ni">print(value.bit_count())<br/>3</span></pre><h2 id="47c5" class="ne md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated"><strong class="ak"> 3。统计数据</strong></h2><p id="620d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe np nq nr na b">statistics</code>模块增加了新的功能。</p><p id="5def" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像<code class="fe np nq nr na b">statistics.covariance()</code>返回两个输入的联合可变性:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="a77b" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt; import statistics<br/>&gt;&gt;&gt; x = [1, 2, 3, 4, 5, 6, 7, 8, 9]<br/>&gt;&gt;&gt; y = [1, 2, 3, 1, 2, 3, 1, 2, 3]<br/>&gt;&gt;&gt; statistics.covariance(x,y)<br/>0.75</span></pre><p id="7189" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果两个输入的长度不同，则<code class="fe np nq nr na b">StatisticsError</code>升高:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="56e7" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt; x = [1, 2, 3, 4, 5, 6, 7, 8, 9]<br/>&gt;&gt;&gt; y = [1, 2, 3, 1, 2, 3, 1, 2]<br/>&gt;&gt;&gt; statistics.covariance(x,y)<br/>statistics.StatisticsError: covariance requires that both inputs have same number of data points</span></pre><p id="879b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe np nq nr na b">statistics.correlation()</code>是该模块的另一个新功能。</p><p id="3996" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">皮尔逊相关系数r衡量线性关系的强度和方向。它取-1到+1之间的值:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="a973" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt;<strong class="na iu"> </strong>x = [1, 2, 3, 4, 5, 6, 7, 8, 9]<br/>&gt;&gt;&gt;<strong class="na iu"> </strong>y = [9, 8, 7, 6, 5, 4, 3, 2, 1]<br/>&gt;&gt;&gt;<strong class="na iu"> </strong>correlation(x, x)<br/>1.0</span></pre><p id="74e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入必须具有相同的长度，并且不能是常数。</p><p id="965a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe np nq nr na b">statistics.linear_regression()</code>:线性回归描述了自变量x和因变量y之间的关系，用线性函数表示:-</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4958" class="ne md it na b gy nf ng l nh ni">y = slope * x + intercept + noise</span></pre><p id="b7c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<code class="fe np nq nr na b">slope</code>和<code class="fe np nq nr na b">intercept</code>是估计的回归参数，<code class="fe np nq nr na b">noise</code>代表数据的可变性。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="5925" class="ne md it na b gy nf ng l nh ni">&gt;&gt;&gt; years = [2001,2005,2010]<br/>&gt;&gt;&gt; houses_built = [5,8,14]<br/>&gt;&gt;&gt; slope, intercept = statistics.linear_regression(years, houses_built)</span><span id="c6ca" class="ne md it na b gy nj ng l nh ni">&gt;&gt;&gt; round(slope * 2017 + intercept)<br/>21</span></pre><p id="f6cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果自变量<code class="fe np nq nr na b">x</code>为常数，将导致<code class="fe np nq nr na b">StatisticsError</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5ed7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="b79c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我发现的最强大的特性是新版本Python中的结构模式匹配。结构模式匹配可用于匹配模式或过滤数据。</p><p id="1d8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在早期使用的模块中有很多改进。</p><h1 id="07b7" class="mc md it bd me mf nk mh mi mj nl ml mm jz nm ka mo kc nn kd mq kf no kg ms mt bi translated">资源</h1><ol class=""><li id="5b7f" class="od oe it lb b lc mu lf mv li of lm og lq oh lu oi oj ok ol bi translated"><a class="ae ky" href="https://docs.python.org/3.10/whatsnew/3.10.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3.10/whatsnew/3.10.html</a></li><li id="af21" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated"><a class="ae ky" href="https://towardsdatascience.com/whats-new-in-python-3-10-a757c6c69342" rel="noopener" target="_blank">https://towards data science . com/whats-new-in-python-3-10-a 757 c6c 69342</a></li></ol></div></div>    
</body>
</html>