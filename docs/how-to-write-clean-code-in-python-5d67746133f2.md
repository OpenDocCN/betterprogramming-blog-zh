# 如何用 Python 写干净的代码

> 原文：<https://betterprogramming.pub/how-to-write-clean-code-in-python-5d67746133f2>

## 使用 Python 示例编写干净代码的 3 个技巧

![](img/5c022b220a157f871a1b21d7758713aa.png)

莎拉·多维勒在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片。

“干净代码”到底是什么？虽然有许多定义，但大多数人都同意的最流行的定义是“干净的代码是易于理解、易于更改或维护的代码。”

由于代码读得比写得多，不断提醒自己练习写干净的代码在我们的职业生涯中是至关重要的。

在这篇文章中，我将与你分享我多年来收集的一些知识，同时也给出一些 Python 的例子。也就是说，这些原则应该普遍适用于大多数编程语言。

## TL；速度三角形定位法(dead reckoning)

*   给事物命名时要保持一致
*   给事物命名时，消除混淆的空间
*   避免双重否定
*   编写不言自明的代码
*   不要滥用评论

# 1.恰当地命名事物

## **消除任何混淆的空间**

尽管这是书中最古老的技巧，但却是我们经常忘记的最简单的规则。在给一个文件夹、函数或变量命名之前，一定要问自己这样一个问题:“如果我这样命名，它会不会有别的意思或者让其他人感到困惑？”

这里的总体思想是在命名任何事物时，总是消除任何混淆的空间。

之所以说`expired`是一个不太理想的名字，是因为`expired`本身就有歧义。从事该项目的新开发人员不知道`expired`是日期还是布尔值。

## 与命名保持一致

在团队中工作时，在整个项目中保持一致性对于避免混乱和怀疑是非常重要的。这适用于变量名、文件名、函数名，甚至目录结构。

任何东西都不应该仅仅根据你的个人喜好来命名。在修改任何东西之前，一定要检查别人已经写了什么，并进行讨论。

## 选择名字时的额外提示

1.  变量是名词(即`product_name`)。
2.  做某事的功能是动词(即`def compute_user_score()`)。
3.  布尔变量或返回布尔的函数是疑问句(即`def is_valid()`)。
4.  名称应该是描述性的，但不要过于冗长(即`def compute_fibonacci()`而不是`def compute_fibonacci_with_dynamic_programming()`)。

# 2.避免双重否定

"你能确保一会儿别忘了关灯吗？"

呃。那么，我到底该不该关灯？等等，让我再读一遍。

让我们承认双重否定只是让人困惑。

如果你不得不多看一遍才能确定，那就臭了。

# 3.编写自我解释的代码

在过去，我记得曾被含糊地告知，工程师应该到处散布注释以“提高代码质量”。

那些日子早已过去。相反，工程师需要编写对人们有意义的自我解释的代码。例如，我们应该尝试在一个描述性的自读变量中捕获一个复杂的逻辑。

## 不要滥用评论

像代码本身一样，注释也会过时。

当代码被重构时，人们经常忘记更新注释。当这种情况发生时，评论本身会间接地成为混乱的根源。

每当你觉得有必要写一个注释的时候，你应该总是重新评估你刚刚写的代码，看看如何使它变得更清晰。

对于这一节，我真的很喜欢阅读下面的文章，它很好地解释了为什么我们在编写代码时不应该滥用注释:

[](https://medium.com/swlh/stop-adding-comments-to-your-code-80a3575519ad) [## 停止向代码中添加注释

### 我当时正在教一门计算机编程的入门课程，与我的同事就如何…

medium.com](https://medium.com/swlh/stop-adding-comments-to-your-code-80a3575519ad) 

## 何时写评论的例子

我会考虑使用注释的场景之一是当我必须使用切片时。这通常会引发类似“我们为什么要这样做？为什么不是其他指数？”诸如此类。

另一个例子:

假设您是一名新开发人员，第一次看上面的代码。

我首先想到的是“为什么我们对每个请求都要随机等待两秒钟？”

原来编写代码的最初开发人员只是希望我们限制发送给第三方 API 的请求数量。

总是站在别人的角度考虑问题(例如，“别人会如何理解我的代码？”).如果你从一个列表中切分或使用一个特定的索引(即`array[3]`)，没有人会知道你这样做的确切原因。

# 我如何应用这些知识？

没有人能够从第一天就写出干净的代码。事实上，每个人都是从编写“糟糕”或“丑陋”的代码开始的。

像生活中的大多数事情一样，要想擅长某件事，你只需要一遍又一遍地练习。你必须投入时间。

除了练习，以下是对我有用的事情:

*   不断问自己类似“有没有更好的写法？这是不是让别人看了很迷惑？”
*   参与代码评审。
*   探索其他编写良好的代码库。如果你想要一些写得好的、干净的 Python 代码的例子，可以去看看 Python [requests](https://github.com/psf/requests) 库。
*   与人交谈，讨论或交换意见，你会学得更快。

# 最后的想法

对于许多非技术人员来说，编写干净的代码很难解释，因为对他们来说，它对公司的业务影响几乎没有直接价值。

编写干净的代码还会占用大量额外的时间和注意力，这两个因素间接转化为企业的成本。

然而，经过一段时间后，代码库中有干净代码的效果对工程师来说是至关重要的。有了更干净的代码库，工程师将能够更快地交付代码和部署应用程序，以满足业务目标。

最重要的是，拥有干净的代码是至关重要的，这样新的合作者或贡献者可以在开始新项目时更快地进入状态。

## [最初发表于 jerrynsh.com](https://jerrynsh.com/how-to-write-clean-code-in-python/)

[](/3-useful-python-f-string-tricks-you-probably-dont-know-f908f7ed6cf5) [## 你可能不知道的 3 个有用的 Python f-string 技巧

### 关于 Python 的格式化字符串(f-string)你需要知道的事情

better 编程. pub](/3-useful-python-f-string-tricks-you-probably-dont-know-f908f7ed6cf5) [](/stop-using-exceptions-like-this-in-python-2bd8ba7d8841) [## 在 Python 中停止使用这样的异常

### Python 中要避免的四个常见错误处理错误

better 编程. pub](/stop-using-exceptions-like-this-in-python-2bd8ba7d8841)