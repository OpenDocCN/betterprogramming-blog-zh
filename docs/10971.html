<html>
<head>
<title>3 Ways to Optimize Your React Bundle With Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Webpack优化React捆绑包的3种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-ways-to-optimize-your-react-bundle-with-webpack-5e2711effd54?source=collection_archive---------5-----------------------#2022-02-08">https://betterprogramming.pub/3-ways-to-optimize-your-react-bundle-with-webpack-5e2711effd54?source=collection_archive---------5-----------------------#2022-02-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="56e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Webpack捆绑包分析器、代码分割等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7648270647bc578f37825768c6644d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xoALI6ut8lRdJd1jWN8L7Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Webpack资产集合</p></figure><p id="3032" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">React应用程序包含许多第三方库。Webpack是一个很好的工具，可以将您编写的所有代码和其他人编写的代码捆绑成一个优化的包。</p><p id="9f44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Webpack的配置功能非常丰富，很容易忽略它提供的一些最有效的优化工具。</p><p id="3d10" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我想分享我遇到的进一步优化我的项目包的3个最好的技术。</p><p id="54ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lu">本文假设您对Webpack有基本的工作知识。</em></p><h1 id="350d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.Webpack捆绑包分析器</h1><p id="4bde" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><a class="ae ms" href="https://www.npmjs.com/package/webpack-bundle-analyzer" rel="noopener ugc nofollow" target="_blank"> Webpack Bundle Analyzer </a>是一个用于可视化您的应用程序正在使用的包的工具。它不会直接减少您的包的大小，但它可以向您显示每个包占用了多少空间。能够看到每个包占用了多少空间可以更好地告知您将优化工作放在哪里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/45578a1012432ae4ce2a4f83f45ab3b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKqiQH7tbwCdhqtYKcnxtQ.png"/></div></div></figure><p id="d566" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要设置Bundle Analyzer，首先要导入包。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="4c74" class="mz lw it mv b gy na nb l nc nd">npm install webpack-bundle-analyzer --save-dev</span><span id="838e" class="mz lw it mv b gy ne nb l nc nd">or</span><span id="b64c" class="mz lw it mv b gy ne nb l nc nd">yarn add webpack-bundle-analyzer -D</span></pre><p id="31f2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后将包导入到webpack.config.js中</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="2187" class="mz lw it mv b gy na nb l nc nd">const BundleAnalyzerPlugin = require("webpack-bundle-analyzer").BundleAnalyzerPlugin</span></pre><p id="f479" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导入包后，将其添加到插件中:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="1988" class="mz lw it mv b gy na nb l nc nd">plugins: [<br/>  new BundleAnalyzerPlugin()<br/>]</span></pre><p id="e99f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下次运行webpack时，将会打开一个新的浏览器窗口，显示您的包的明细。</p><h1 id="538d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.代码分割</h1><p id="1577" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><em class="lu">代码拆分是将代码拆分成不同的包或组件，然后按需或并行加载。</em></p><p id="ee6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">代码分割不会减少包的总大小。它根据所提供的配置将单个输出文件分割成许多较小的文件。每个文件只有在被请求时才会被加载。</p><p id="ae40" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">文件越小意味着页面加载速度越快。我发现这对于未经认证的页面特别有用，比如登录、注册和密码重置。</p><p id="8b25" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了让代码分割工作，您需要延迟加载想要分离的组件或页面。我更喜欢按路线来划分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="58d1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个惰性加载的路由将被拆分到它自己的文件中，并按需加载。</p><p id="ad56" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想阅读关于代码分解的更深入的指南，你可以在这里找到一个<a class="ae ms" href="https://javascript.plainenglish.io/improve-your-react-application-with-code-splitting-4fc1597940fc" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="5f92" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.压缩</h1><p id="934b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><em class="lu">压缩是通过对文件数据进行重新编码，使用比原始文件更少的存储位数来减小文件大小的过程。</em></p><p id="8ed6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">压缩是我见过的最有效的减小文件大小的方法。在我自己的项目中，我已经能够将我的项目包的总大小减少75%。</p><p id="cc6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要启用压缩，请安装<a class="ae ms" href="https://www.npmjs.com/package/compression-webpack-plugin" rel="noopener ugc nofollow" target="_blank">压缩-web pack-插件</a></p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="d33b" class="mz lw it mv b gy na nb l nc nd">yarn add compression-webpack-plugin -D</span><span id="38b2" class="mz lw it mv b gy ne nb l nc nd">or</span><span id="d589" class="mz lw it mv b gy ne nb l nc nd">npm install compression-webpack-plugin --save-dev</span></pre><p id="3be1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后向插件列表中添加新的配置</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="db3e" class="mz lw it mv b gy na nb l nc nd">const CompressionPlugin = require("compression-webpack-plugin")</span><span id="e636" class="mz lw it mv b gy ne nb l nc nd">plugins: <br/>  [  <br/>    ...other plugins,<em class="lu">  <br/>    new</em> CompressionPlugin({    <br/>      test: /\.js(\?.*)?$/i,    <br/>      filename: "[path][query]",    <br/>      algorithm: "gzip",    <br/>      deleteOriginalAssets: false,  <br/>    }),<br/>  ],</span></pre><p id="46bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Webpack的压缩插件默认使用Gzip，但它支持其他算法。如果您使用Brotli，那么您可以看到您的包的大小减少了更多。</p><p id="ed3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想阅读更深入的压缩指南，你可以在这里找到一个<a class="ae ms" href="https://javascript.plainenglish.io/reduce-your-react-applications-bundle-size-by-75-with-compression-e0103abe9b69" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="22b7" class="mz lw it bd lx nh ni dn mb nj nk dp mf lh nl nm mh ll nn no mj lp np nq ml nr bi translated"><strong class="ak">收尾</strong></h2><p id="9d05" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我希望这个列表对那些希望从Webpack配置中获得更多好处的人有所帮助。</p><p id="695f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我错过了什么，请告诉我。</p></div></div>    
</body>
</html>