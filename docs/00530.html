<html>
<head>
<title>Web Scraping in Python: Extract Embedded Videos Like a Boss</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的Web抓取:像老板一样提取嵌入的视频</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/extracting-embedded-videos-8fc391906530?source=collection_archive---------2-----------------------#2019-06-06">https://betterprogramming.pub/extracting-embedded-videos-8fc391906530?source=collection_archive---------2-----------------------#2019-06-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8199" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解我如何从雅虎中提取一个嵌入的视频，并将其放入代码中。我们挖吧！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0348d1a89ed1b6da5076802a1b416fed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KC3-E8MB0RXBjzU_FX16GA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://news.yahoo.co.jp" rel="noopener ugc nofollow" target="_blank">https://news.yahoo.co.jp</a></p></figure><p id="2c63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的任务似乎很简单:增加对雅虎的支持。日本新闻文章到流行的嵌入式视频下载器，<a class="ae kv" href="https://ytdl-org.github.io/youtube-dl/index.html" rel="noopener ugc nofollow" target="_blank"> youtube-dl </a>。我会找到视频源(网址)，编辑一些样板代码，制作一个公关，然后就搞定了。</p><p id="9a5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是没有。雅虎不打算让它变得简单。</p><p id="1dd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面，我将向您展示我是如何提取嵌入式视频源的，以及一个用<a class="ae kv" href="https://www.python.org" rel="noopener ugc nofollow" target="_blank"> Python </a>编写的代码示例。好吧，选一篇雅虎文章，让我们来挖掘一下！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="23f3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">超文本标记语言</h1><p id="dcdd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">正如许多嵌入式视频提取教程<a class="ae kv" href="https://www.hanselman.com/blog/HowToDownloadEmbeddedVideosWithF12ToolsInYourBrowser.aspx" rel="noopener ugc nofollow" target="_blank">指出的那样，通过浏览器的网页检查器找到嵌入式视频源相对容易。然而，为了建立一个有效的提取器，涵盖所有雅虎！日本新闻的文章，我们需要一个清晰的，可复制的路径从原来的网址到视频源。</a></p><p id="9d27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，显而易见的是:我访问一篇文章，在源代码中搜索与视频相关的扩展名，如“<code class="fe mw mx my mz b">mp4</code>”和“<code class="fe mw mx my mz b">m3u8</code>”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/f72d72879d267ebb9864a64d89f194e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5Ta_D6FZU3P5Zh3L"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">文章源代码</p></figure><p id="b834" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有。“玩家”<em class="nb"> </em>这个词经常与视频联系在一起，所以让我们看看这是否可行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/d3de0c5ea3ea18843e6079e6fc3776c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jNJ-YVdnB7C7tvPa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">文章源代码</p></figure><p id="7f56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">啊哈！一个外部Javascript脚本，<code class="fe mw mx my mz b"><em class="nb">embed.js</em></code>。注意发送到<code class="fe mw mx my mz b"><em class="nb">embed.js</em></code>的参数中的<code class="fe mw mx my mz b"><em class="nb">contentid</em></code>和<code class="fe mw mx my mz b"><em class="nb">spaceid</em> </code>值。它们看起来很有用。现在，让我们看看里面有什么。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/a4845776006cd19e7f98056ecb5c8e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HOo8hCDAREV6a0Fa"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">embed.js</p></figure><p id="8a28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该代码似乎引用了另一个脚本，<code class="fe mw mx my mz b">player.js </code>,并包含一个参数，即当前的UNIX时间戳转换为小时。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="40df" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">网络检查</h1><p id="209c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们用<a class="ae kv" href="https://developers.google.com/web/tools/chrome-devtools/javascript/" rel="noopener ugc nofollow" target="_blank">谷歌Chrome DevTools </a>来看看<code class="fe mw mx my mz b">player.js</code>内部。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/6608c611ccff4c87512b4684ef619fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_ByqnJpjCbhlnJXN"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">player.js</p></figure><p id="a6e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">player.js</code>很大，看起来很吓人，也不包含任何有用的<code class="fe mw mx my mz b">mp4</code>或<code class="fe mw mx my mz b"><a class="ae kv" href="https://www.lifewire.com/m3u8-file-2621956" rel="noopener ugc nofollow" target="_blank">m3u8</a> </code>网址。</p><p id="c4bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的，让我们反向工作，在加载页面时发出的请求中搜索<code class="fe mw mx my mz b">mp4</code>(您可能想要重新加载页面)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/fbd02c72f22c0ce464f1945616bbfee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ABThmPyBiv4Me1i"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc"> JSON回应来自</em><a class="ae kv" href="https://feapi-yvpub.yahooapis.jp/v1/content/" rel="noopener ugc nofollow" target="_blank"><em class="nc">https://feapi-yvpub.yahooapis.jp/v1/content/</em></a></p></figure><p id="c9b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答对了。我们的<code class="fe mw mx my mz b">m3u8 </code>和<code class="fe mw mx my mz b">mp4 </code>消息来源的<code class="fe mw mx my mz b">JSON </code>回应。这个响应是由我们向<a class="ae kv" href="https://feapi-yvpub.yahooapis.jp/v1/content/" rel="noopener ugc nofollow" target="_blank"><em class="nb">https://feapi-yvpub.yahooapis.jp/v1/content/</em></a>发出的请求生成的，带有以下参数:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/7d99406b47fa8f827881a7d84c02840c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IO4TfEK9oZx6px1Y"/></div></div></figure><p id="3189" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么是<code class="fe mw mx my mz b">1602163 in …/v1/content/1602163</code>？这就是我们之前提到的<code class="fe mw mx my mz b">contentid</code>的值。而这里的<code class="fe mw mx my mz b">space_id </code>与我们的<code class="fe mw mx my mz b">spaceid</code>相匹配。很好。那<code class="fe mw mx my mz b">appid</code>呢？让我们看看它的价值是否在任何其他回应中被提及。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/68472d5266e57a078c5a545a04071ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DMKOZ4tiqzq68koA"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc">播放器. script.js </em></p></figure><p id="be84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是它，硬编码在<code class="fe mw mx my mz b">player.script.js</code>里！快速浏览一下其他新闻文章，可以确认这个值用于所有嵌入式视频请求。向下三个值。现在，让我们搜索<code class="fe mw mx my mz b">ak</code>的值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/18acc52e87ba9f8edc7f624c4487078f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U3JB1Fct05gJlkDV"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc"> JSON回应来自</em><a class="ae kv" href="https://feapi-yvpub.yahooapis.jp/v1/content/" rel="noopener ugc nofollow" target="_blank"><em class="nc">https://feapi-yvpub.yahooapis.jp/v1/content/</em></a></p></figure><p id="8742" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，<code class="fe mw mx my mz b">ak</code>值除了在这个<code class="fe mw mx my mz b">JSON</code>查询中找不到。<code class="fe mw mx my mz b">ak</code>从哪里来？</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f22d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">断点</h1><p id="6936" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我有预感<code class="fe mw mx my mz b">ak</code>可能是一个Javascript对象名。我们来搜索一下“<code class="fe mw mx my mz b">ak:</code>”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/a5c6be5fc081f85fae5704c644e2c8b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*diJXIHuEZ2_wAfu_"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><code class="fe mw mx my mz b"><em class="nc">player.js</em></code></p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/db1bd3bc1e106cb2a102a33335f9a780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xAhqMFlyj9w4rTr9"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc">播放器. script.js </em></p></figure><p id="a356" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">啊哈！看起来<code class="fe mw mx my mz b">ak</code>是由“_”和两个字符串在<code class="fe mw mx my mz b">player.js</code>和<code class="fe mw mx my mz b">player.script.js</code>中串联而成。我们也在传递给函数<code class="fe mw mx my mz b">k.md5()</code>的<code class="fe mw mx my mz b">player.js</code>中看到它。</p><p id="5b17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我猜这个连接起来的字符串值被转换成一个<a class="ae kv" href="https://www.lifewire.com/what-is-md5-2625937" rel="noopener ugc nofollow" target="_blank"> md5哈希值</a>。但是首先我们必须弄清楚连接到“_”的值。</p><p id="2c40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们在Sources选项卡中打开<code class="fe mw mx my mz b">player.js</code>(在响应体中右键单击并在Sources面板中选择open)并在定义了<code class="fe mw mx my mz b">ak</code>之后添加一个断点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/2cf2a243567d2063772e51547d07cb91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hywbHlzYvbqaVwc1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc"> player.js </em></p></figure><p id="b373" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，让我们关闭<em class="nb"> Sources </em>下打开的文件标签并重新加载页面。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/ae4cc85f4035ffac673b577606627f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k1qFUW8e9mKq5Qb0"/></div></div></figure><p id="ca51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">奇怪。似乎没有达到那条线。让我们在<code class="fe mw mx my mz b">player.script.js.</code>尝试同样的事情</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/1e24973557036c78a2dd9e46e2b73c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8IY0kWiVGlf67HZJ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc">播放器. script.js </em></p></figure><p id="a0db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(重新加载页面后，请务必点击左下方的<em class="nb">漂亮打印</em>括号。)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/6bd0358bfa655cc255b12a0ad9af42fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KlgRigy1tXM_QbR1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nc">播放器. script.js </em></p></figure><p id="7b89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答对了。<code class="fe mw mx my mz b">i</code> <em class="nb"> </em>似乎与我们之前提到的<code class="fe mw mx my mz b">spaceid</code>的值相同，而<code class="fe mw mx my mz b">r</code>是我们的主机名“<code class="fe mw mx my mz b">headlines.yahoo.co.jp</code>，因此我们现在有了字符串值“<code class="fe mw mx my mz b">2078710353_headlines.yahoo.co.jp</code>”。</p><p id="2535" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它看起来一点也不像请求查询中的长而神秘的<code class="fe mw mx my mz b">ak</code>值，但是还记得<code class="fe mw mx my mz b">player.js</code>中的<code class="fe mw mx my mz b">k.md5</code>函数调用吗？让我们检查一下它的<code class="fe mw mx my mz b">md5</code>哈希值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/e67bd020d3ba0702e6546f02fce50cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i--F-RDSbGrhWmFd"/></div></div></figure><p id="f4d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你看看那个！它与<code class="fe mw mx my mz b">JSON</code>请求查询中的<code class="fe mw mx my mz b">ak</code>值相同。搞定了。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2198" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">概述</h1><p id="938d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">回想一下<code class="fe mw mx my mz b">JSON</code>请求包括以下参数，减去<em class="nb"> thumb </em>值。</p><blockquote class="ne nf ng"><p id="1f9d" class="kw kx nb ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><strong class="ky ir"><em class="iq">appid:</em></strong><em class="iq"> dj0zaiZpPVZMTV…jcmV0Jng9YjU</em></code>—</p><p id="6c41" class="kw kx nb ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><strong class="ky ir"><em class="iq">output:</em></strong><em class="iq"> json</em></code></p><p id="d259" class="kw kx nb ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><strong class="ky ir"><em class="iq">space_id:</em></strong><em class="iq"> 2078710353</em></code></p><p id="6cd7" class="kw kx nb ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><strong class="ky ir"><em class="iq">domain:</em></strong><em class="iq"> headlines.yahoo.co.jp</em></code></p><p id="93d3" class="kw kx nb ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><strong class="ky ir"><em class="iq">ak:</em></strong><em class="iq"> 40e90ec7a4ffb34260fcbb9497778731</em></code></p><p id="625a" class="kw kx nb ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><strong class="ky ir"><em class="iq">device_type:</em></strong><em class="iq"> 1100</em></code></p></blockquote><p id="5490" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在有了所有的唯一值——更重要的是，它们的来源——在我们的代码中以编程方式为任何文章发出一个<code class="fe mw mx my mz b">JSON</code>请求所需要的。关于参数最后一件事:<code class="fe mw mx my mz b">device_type</code> <em class="nb"> </em>有必要吗？让我们提出一个没有它的请求。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/bfd5397ab824bb65709c3c471381a96f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IY3iBayLnuKcRn2y"/></div></div></figure><p id="bc6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有视频数据。显然是，所以我们会保留它。</p><p id="2b40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快速回顾一下我们是如何获得视频数据的。</p><ul class=""><li id="b6e9" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">文章网址<em class="nb">(提取的主机名)</em></li><li id="a5b9" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">文章HTML源代码<em class="nb">(摘录</em> <code class="fe mw mx my mz b">contentid</code>和<code class="fe mw mx my mz b">spaceid</code>)</li><li id="94ef" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated"><code class="fe mw mx my mz b">md5</code>哈希生成器(在<code class="fe mw mx my mz b">spaceid</code> + "_" +主机上运行以获取<code class="fe mw mx my mz b">pk</code>的值)</li><li id="869e" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated"><code class="fe mw mx my mz b">player.script.js</code>(提取的appid)</li><li id="4fb3" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">用我们的<code class="fe mw mx my mz b">contentid</code>、<code class="fe mw mx my mz b">appid</code>、<code class="fe mw mx my mz b">spaceid</code>和<code class="fe mw mx my mz b">pk</code>值请求<a class="ae kv" href="https://feapi-yvpub.yahooapis.jp/v1/content/{contentid}" rel="noopener ugc nofollow" target="_blank">https://feapi-yvpub.yahooapis.jp/v1/content/{contentid}</a>。</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="02f1" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">密码</h1><p id="65a7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这个提取过程在代码中会是什么样子？下面是Python中的一个粗略示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雅虎的例子！日本新闻文章嵌入视频提取。</p></figure><p id="9d62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，在<code class="fe mw mx my mz b">yahoojnews_extract()</code>中，我在请求中包含了与页面请求中的实际值相匹配的头值，以避免被怀疑。一旦我有了<code class="fe mw mx my mz b">JSON</code>数据，我就把它传递给<code class="fe mw mx my mz b">_parse_formats</code>来提取视频数据(URL、fps等)。)并连同其他信息(如标题)一起返回。</p><p id="8477" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击或<a class="ae kv" href="https://ytdl-org.github.io/youtube-dl/download.html" rel="noopener ugc nofollow" target="_blank">下载</a>查看我为youtube-dl <a class="ae kv" href="https://github.com/ytdl-org/youtube-dl/blob/90634acfcf9b106c9f5ac12bae5d92307cd577b0/youtube_dl/extractor/yahoo.py#L565" rel="noopener ugc nofollow" target="_blank">编写的提取代码，并观看它的运行:</a></p><p id="8b96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">$ pip install youtube-dl &amp;&amp; youtube-dl https://news.yahoo.co.jp</code></p><p id="0779" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读，刮刮快乐！</p><p id="a47e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nb">鸣谢:感谢</em> <a class="ae kv" href="https://www.candyjapan.com/" rel="noopener ugc nofollow" target="_blank"> <em class="nb">糖果日本</em> </a> <em class="nb">的</em><em class="nb">Bemmu</em><em class="nb">帮忙提取视频数据。</em></p></div></div>    
</body>
</html>