<html>
<head>
<title>Replicating the Dynamic Island Animation in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中复制动态岛动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/dynamic-island-animation-5869fbce41e6?source=collection_archive---------3-----------------------#2022-09-11">https://betterprogramming.pub/dynamic-island-animation-5869fbce41e6?source=collection_archive---------3-----------------------#2022-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cc6b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这里有一个有趣的很酷的演示！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8a7141b191a78e20c22d93b0f3546ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IrCDNVPLh7xTGdMPqOUqRw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:苹果</p></figure><p id="b2fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在最近结束的苹果活动上宣布，动态岛随着iPhone 14 Pro进入我们的生活。它提供了显示新通知的可能性。</p><p id="cab4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我有机会用Xcode 14 release候选版体验了一下这个，想和大家分享一下。您将看到我们在SwiftUI中复制它是多么容易。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/335883f7cd13ad36a214b9a6090e2522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*uqSKC8etgr0W_wCG6yGMgQ.gif"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="edd0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们按下一个按钮，我们将开始动态岛动画。我们要放一段时间，然后再放回去。</p><p id="a28e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们创建我们的内容视图，并在其中放置一个按钮。按钮动作发布通知。</p><p id="f082" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在此之前，我们需要创建一个通知模型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="1a5c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了显示视图(在？)动态岛，我们需要忽略安全区。</p><p id="0b26" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们称这个视图为<code class="fe mb mc md me b">NotificationView</code>并把它放在<code class="fe mb mc md me b">GeometryReader</code>中，因为这个视图将有一个灵活的大小。那我们就忽略安全区吧。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="0c4f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">动态岛具有11像素的顶部填充。它的宽度是126，高度是37.33。</p><p id="02b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以我们要在缺口后面放一个视图。我们会用动画把它放大。</p><p id="da9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为这是一个演示，我们将通过在这个视图中保持一个状态来改变视图的大小。收到通知后，我们将激活视图并设置通知。</p><p id="1cb6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，我们将设置<code class="fe mb mc md me b">isExpanded</code>等于真。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="853e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们按下按钮时，我们可以看到我们为动态岛制作的动画。</p><p id="24f5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们可以画出我们想要的视图了。</p><p id="aca1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以随时触发和发送通知。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/c8c422abeddf33c2592b474c1d422f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*V1mT4d9R2qmqReSLN3sbbg.gif"/></div></figure><p id="7f5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想确定设备是否有动态岛，我们需要给自己写一个扩展。</p><p id="98cb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">苹果尚未发布这样的扩展。我估计iOS 16.1会这么做。</p><p id="846d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们可以提供对设备名称的控制:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lz ma l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="be31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">动画一个动态岛似乎和普通的视图动画没什么区别。我们都准备好了。</p><p id="c699" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以发展我们想要的尺寸和外观。此外，我们在动态岛上所做的事情在最终用户的应用程序中看起来很美观。</p></div></div>    
</body>
</html>