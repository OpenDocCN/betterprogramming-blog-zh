<html>
<head>
<title>5 Useful Tips With Python Dictionaries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python字典的5个有用技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-useful-tips-with-python-dictionaries-74747a4fd172?source=collection_archive---------5-----------------------#2020-12-17">https://betterprogramming.pub/5-useful-tips-with-python-dictionaries-74747a4fd172?source=collection_archive---------5-----------------------#2020-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2c58" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用Python中最强大的数据类型之一</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/31467654f89390bd1650c5874147044b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o_nFWyxIKwCyIdXx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@kazuend?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> kazuend </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="fc1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管每种数据类型都有自己的优缺点，但在常见的数据容器(例如列表和集合)中，字典是我最喜欢的。要成为一名有经验的Python开发人员，您需要了解这种通用的数据类型。</p><p id="4706" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，我想在本文中分享一些超越字典最基本用例的技巧。我希望它们会对你有所帮助。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1f4f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.用指定的键创建词典</h1><p id="ee3d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">编写Python脚本时，可能需要定义一些全局变量。然而，当你以后在函数中更新这些变量时，你必须明确这些变量是全局的。下面是一个简单的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">全局变量</p></figure><p id="d7d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不太喜欢这种使用<code class="fe nb nc nd ne b">global</code>关键字的编码模式。当您在多个函数中使用多个全局关键字时，这是一项繁琐的工作。相反，您可以使用dictionary对象来捕获所有相关变量。在这种情况下，您可以直接更新字典，因为它将由您的解释器全局定位。下面是修改后的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">参数字典</p></figure><p id="9bfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在代码片段中注意到的，我使用了<code class="fe nb nc nd ne b">fromkeys</code>类方法来实例化一个<code class="fe nb nc nd ne b">dict</code>对象。使用这种实例化方法有几个优点:</p><ul class=""><li id="fcc5" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">您的代码可读性更好，因为读者很清楚您在这个脚本中使用了什么参数。在这种情况下，我们只有<code class="fe nb nc nd ne b">param0</code>和<code class="fe nb nc nd ne b">param1</code>。</li><li id="428e" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">当您使用方括号获取字典中这些键的值时，您不会得到<code class="fe nb nc nd ne b">KeyError</code>异常，因为我们指定的所有键都将<code class="fe nb nc nd ne b">None</code>作为初始值，如下所示:</li></ul><pre class="kj kk kl km gt nt ne nu nv aw nw bi"><span id="d248" class="nx md it ne b gy ny nz l oa ob">&gt;&gt;&gt; params = dict.fromkeys(["param0", "param1"])<br/>&gt;&gt;&gt; print(params)<br/>{'param0': None, 'param1': None}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="06a5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.列表和词典之间的转换</h1><p id="ff3d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">除了字典，列表是我们在项目中经常使用的另一种数据容器类型。列表和字典之间的转换构成了双向通信。让我们先来看看列表是如何转换成字典的。</p><p id="8700" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的列表由包含两个条目的条目组成，您可以直接实例化一个dictionary对象。每个条目都将成为创建的dictionary对象中相应的键值对，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列表中的字典</p></figure><ul class=""><li id="7bf7" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">这段代码展示了几个从列表对象创建字典的例子。注意，列表中的项目可以是列表或元组，只要每个项目只有两个项目。</li><li id="e465" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">更广泛地说，字典可以从iterables(列表是一种iterable)创建，要求iterable的每一项都有两个对象。在代码中，我们注意到我们从<code class="fe nb nc nd ne b">zip</code>和<code class="fe nb nc nd ne b">tuple</code>对象创建了字典。</li></ul><p id="2284" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您有字典时，有几种可能的情况说明如何从现有的字典创建列表。看看下面的代码片段，了解常见的用例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">词典到列表</p></figure><ul class=""><li id="213e" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">第一个用例是创建一个包含现有字典的键的对象列表。我们可以简单地将字典传递给list构造函数，这是传递字典的key view对象(即调用<code class="fe nb nc nd ne b">keys()</code>方法返回的对象)的捷径。</li><li id="738b" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">我们还可以通过使用<code class="fe nb nc nd ne b">values()</code>和<code class="fe nb nc nd ne b">items()</code>方法创建值列表或键-值对，每个方法都从字典中创建值或键-值字典视图对象。</li></ul><p id="05f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了使用list构造函数，我们还可以使用内置的<code class="fe nb nc nd ne b">sorted()</code>方法，创建一个排序的list对象。使用dictionary对象，我们可以创建排序的键、值或键值对:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ade2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.字典迭代</h1><p id="4926" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以在一个<code class="fe nb nc nd ne b">for</code>循环中直接使用字典，因为它们是一种可迭代的。默认情况下，迭代使用键。如前所述，您可以将迭代概念化，就像您已经在dictionary对象上调用了<code class="fe nb nc nd ne b">keys()</code>方法一样。以类似的方式，您还可以通过访问值和项的字典视图对象来迭代值和项。下面是一些相关的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基本迭代</p></figure><p id="1d3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了这些基本迭代，您还可以利用一些内置函数，包括<code class="fe nb nc nd ne b">sorted()</code>和<code class="fe nb nc nd ne b">reversed()</code>。</p><ul class=""><li id="83b3" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">方法将创建一个有序的对象列表。根据您指定的内容，您可以拥有排序的键、值或键值对。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对字典使用sorted()</p></figure><ul class=""><li id="895f" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><code class="fe nb nc nd ne b">reversed()</code>方法将创建一个反转的对象，该对象翻转字典对象的顺序。在Python的最新版本中，字典保留了插入顺序，因此可以使用通常用于序列数据类型的<code class="fe nb nc nd ne b">reversed()</code>方法。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对字典使用reversed()</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="70e5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.词典理解</h1><p id="a77f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您可能听说过list comprehension，这是一种用Python从现有的iterables创建list对象的简洁方法。你知道还有字典理解吗？它的语法类似于list comprehension，通过迭代现有的iterable，比如list和tuple。以下代码片段向您展示了一些常见的用例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><ul class=""><li id="03f2" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">词典理解的基本形式如下:<code class="fe nb nc nd ne b">{key_expr: value_expr for item in iterable}</code>。第4行向您展示了用法。</li><li id="9f11" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">像列表理解一样，我们也可以对理解应用一些过滤条件。如第8行所示，我们通过使用模运算只为奇数创建正方形。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1eda" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.pop()和popitem()方法</h1><p id="c4dd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在许多情况下，我们不需要从dictionary对象中删除条目。一旦它被使用，Python将负责从<code class="fe nb nc nd ne b">dict</code>对象取回内存。但是，在其他一些情况下，您可以在使用移除的项(或值)时动态移除这些项。您可能知道列表对象有一个<code class="fe nb nc nd ne b">pop()</code>方法，但是您知道我们也可以用<code class="fe nb nc nd ne b">dict</code>对象弹出项目/值吗？先来看看<code class="fe nb nc nd ne b">pop()</code>的用法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">字典对象的Pop()</p></figure><ul class=""><li id="0e4a" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">上面的用例向您展示了我们有一个字典来跟踪餐馆的小费。</li><li id="500b" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">一天结束的时候，服务员排队拿自己的那份。我们不希望服务员意外得到超过他们份额的东西。在这个场景中，我们希望在获取小费时销毁字典中的条目。</li><li id="ce71" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">如您所见，<code class="fe nb nc nd ne b">pop()</code>方法返回键值，同时从字典中删除整个键值对。</li><li id="fb0e" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">然而，应该注意的是，当键不在<code class="fe nb nc nd ne b">dict</code>对象中时，<code class="fe nb nc nd ne b">pop()</code>方法可以选择一个默认参数，该参数成为返回值，如下所示。注意，当我们没有指定默认值并且<code class="fe nb nc nd ne b">dict</code>没有指定的键时，就会引发<code class="fe nb nc nd ne b">KeyError</code>。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="d275" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了<code class="fe nb nc nd ne b">pop()</code>方法，我们还可以使用<code class="fe nb nc nd ne b">popitem()</code>方法破坏性地迭代一个字典。假设我们有与上面讨论的相同的用例。服务员不会得到小费，经理会叫他们的名字来分发小费。相关代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">字典的popitem()</p></figure><ul class=""><li id="c782" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><code class="fe nb nc nd ne b">popitem()</code>返回的不是键值对，而是键值对。每次函数调用后，该对被删除。</li><li id="c702" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">如果您检查打印输出，您会发现弹出的顺序遵循LIFO(后进先出)原则。</li><li id="0530" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">请注意，这个方法会在字典为空时引发一个<code class="fe nb nc nd ne b">KeyError</code>，如下所示。因此，在调用这个方法之前，使用一个<code class="fe nb nc nd ne b">while</code>循环来确保字典不为空是很重要的。</li></ul><pre class="kj kk kl km gt nt ne nu nv aw nw bi"><span id="1bef" class="nx md it ne b gy ny nz l oa ob">&gt;&gt;&gt; tips_all_dispensed = {}<br/>&gt;&gt;&gt; tips_all_dispensed.popitem()<br/>Traceback (most recent call last):<br/>  File "&lt;input&gt;", line 1, in &lt;module&gt;<br/>KeyError: 'popitem(): dictionary is empty'</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0dd1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="5896" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们回顾了在Python中使用字典的五个有用的技巧。如你所见，这些提示并不复杂。然而，掌握它们将使Python字典成为您项目中更强大的工具。</p><p id="6d90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>