# 你应该尝试的 5 种晦涩的 Python 语法

> 原文：<https://betterprogramming.pub/obscure-python-syntax-you-should-try-831dbc96777e>

## 完成常见任务的有趣方法

![](img/9de33dceaae8f0696783e4a1d31faa24.png)

Godfrey Nyangechi 在 [Unsplash](https://unsplash.com/s/photos/code?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

Python 编程语言的语法简单明了，并且相对容易上手。

虽然像 [PEP 8](https://pep8.org/) 这样的样式指南对于批准什么语法可能相当严格，只留下少数选项，但是如果你深入一点，有大量不同的方法可以解决常见的问题。

在我的 Python 工作中，我学到了该语言允许的一些有趣的语法选项。其中一些风格没有被广泛使用，甚至被认为没有更传统的风格那么“Pythonic 化”。我会让你来判断，并在适当的时候使用它们。

让我们来看看。

# 1.带元组的三元算子

通常，在 Python 中执行三元赋值，如下所示:

```
my_variable = 1 if <condition> else 2
```

很简单。如果`<condition>`为真，你就给`1`赋值，否则就给`2`赋值。但是让我们来看一个稍微不同的方法:

```
my_variable = (2, 1)[condition]
```

在这个例子中，我们通过使用这个简洁的元组语法进一步缩短了语句。如果条件为真，则返回第二个元素`1`。如果条件为假，则返回第一个元素`2`。

虽然这是执行三元赋值的一种不太清晰的方式，但是它非常简洁。如果您正在处理一些密集的、元组密集的代码区域，这可能会派上用场。只要记住明确变量命名，不应该有任何混淆。

# 2.带括号的多行字符串

有许多打印字符串、连接字符串、操作字符串的技术。你说吧。Python 可以与其中的佼佼者切块切块。

我总是发现有一件事是需要的，那就是将长字符串语句拆分成多行。一种方法是通过转义换行符来欺骗解释器，使其认为所有内容都是一大行:

```
print(
    "this is a " + \
    "really long " + \
    "string"
)
```

但是那看起来很恶心，不是吗？到处都有一堆转义会污染你的代码，并且不是最有趣的事情。

相反，试着用括号把事情分开。你可以这样写同样的语句:

```
print((
    "this is a "
    "really long "
    "string"
))
```

干净多了。这种使用圆括号构造字符串的方法经常被忽视，并被像转义连接或连接字符串列表这样的方法所取代。

就我个人而言，我认为这种方法更容易阅读，虽然它看起来类似于标准元组，但我认为当与字符串或打印语句一起使用时，区别是足够明显的，以避免混淆。

# 3.与运算符库的显式比较

我们都知道标准运算符，如`+`、`-`、`>`、`<`等。但是 Python 有更多的方法来执行比较和使用操作符。Python 中包含了`operator`库。该库允许您像这样使用命名运算符函数:

```
import operatoroperator.eq(1, 1)
```

这和写`==`一模一样。运算符库还有许多其他有趣的功能，例如:

```
operator.contains('string', 'ing')
True
```

它允许您测试一个字符串是否包含在另一个字符串中。这和写作是一样的:

```
if 'ing' in 'string'
```

在这个库中有很多不同的方法来使用操作符。查看[文档](https://docs.python.org/3/library/operator.html)获取完整列表。

# 4.用 f 字符串自动引用字符串

你曾经需要用引号将现有的字符串括起来吗？你有没有试过对一个复杂的插值字符串这样做，然后发现自己变得很沮丧没有一个简单的方法来处理这个问题？

确实有，但是不太明显:

```
my_var = 'hello'
print(f'{my_var!r}')
```

如果您执行此代码，它将打印:

```
'hello'
```

这就是用引号将字符串括起来所要做的一切。您也可以使用如下语句将它赋给一个变量:

```
my_var = f'{"hello"!r}'
```

现在下一次你需要包装什么东西的时候，你只需要记住两个(虽然晦涩)字符:`!r`。

# 5.列表切片

从列表中获取其他所有项目怎么样？很简单。下面是如何使用扩展列表切片实现这一点:

```
my_list = [1,2,3,4,5,6,7,8]my_list[::2]>>> [1, 3, 5, 7]
```

简洁，有效，虽然它不是最清晰的发生了什么，但它工作得很好。此方法对于快速反转列表也很有用:

```
my_list = [1,2,3,4,5,6,7,8]my_list[::-1]>>> [8, 7, 6, 5, 4, 3, 2, 1]
```

下一次您需要从遵循确定性模式的列表中提取数据时，您知道该使用什么。

感谢您的阅读！查看我的其他 Python 文章，了解更多编程知识:

*   [*如何在 Python 中抽象 SSH 命令*](/how-to-run-ssh-commands-with-python-8111ee8ab405)
*   [*如何高效计时线程化 Python 循环*](/how-to-time-threaded-python-loops-efficiently-93435b6f350f)