# 初学者可能会混淆的 4 个 Python 概念

> 原文：<https://betterprogramming.pub/4-python-concepts-that-beginners-may-be-confused-about-ea1fec769f7b>

## 虚拟环境、字符串插值、惰性评估和理解

![](img/e44f8a0fc5253ca3f4791b4449cc09da.png)

罗伯特·雷耶斯在 Unsplash[拍摄的照片。](https://unsplash.com?utm_source=medium&utm_medium=referral)

学习一门新的编程语言并不容易，尤其是如果你以前没有任何编程经验的话。然而，学习 Python 可以说比学习其他几种语言更简单，因为它支持初学者的 REPL (Read-Eval-Print-Loop)学习方法。简单来说，学习 Python，我们可以只使用一个命令控制台。您编写您的 Python 代码(例如`print(“Hello, World!”)`)，控制台将评估代码并在适用时打印输出。这种 REPL 方法提供了关于 Python 中各种主题的实时反馈，这使得 Python 学习变得简单明了。

尽管有这种方便的学习方法，但有些概念可能会让 Python 初学者感到困惑。在这篇文章中，我想着重阐明四个概念。

# 1.虚拟环境

初学者不会发现虚拟环境的概念是相关的，直到他们开始从事一些真实的项目。以下面的场景为例:在一个项目中，您使用依赖于包 x 的 1.0 版本的特定包(A)。然而，在另一个项目中，您使用依赖于包 x 的 1.5 版本的包 B。

这就是你遇到的困境:如果你安装了 X v1.0 版，你的第二个项目就无法运行。但是，如果你安装了 X v1.5，你的第一个项目就无法运行了。这些项目我们必须使用两台不同的电脑吗？当然，这种昂贵的方法是可行的，但是如果你有多个项目呢？不同的项目用不同的电脑肯定不切实际。

为了解决不同项目之间可能的冲突，有一个聪明的解决方案，以前的 Python 程序员已经为我们开发了——虚拟环境。总的想法是，我们为我们的每个项目创建隔离的工作环境，这样一个项目中的包版本就不会与其他项目中相同包的其他不兼容版本发生冲突。

有几种管理虚拟环境的方法，如 [venv](https://docs.python.org/3/library/venv.html) 和 [conda](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html) 。为了向您提供一个概念证明，下面的代码向您展示了使用 venv 模块对虚拟环境的常见操作，venv 模块是标准 Python 库的一部分。

*   导航到所需的目录后，要创建虚拟环境，请在命令行工具中运行以下命令(例如，用于 Mac 的终端):`python3 -m venv medium-env`。请注意，`medium-env`指定了您正在创建的环境。它还假设您已经在计算机上安装了 Python 3。
*   一旦创建了虚拟环境，您可以通过在 Mac 上运行以下代码来激活该环境(注意，Windows 使用了[一个不同的命令](https://docs.python.org/3/tutorial/venv.html) ): `source medium-env/bin/activate`。
*   从现在开始，您将看到您的终端提示符有一个前缀`(medium-env)`，这表明您正在虚拟环境中工作，正如您应该做的那样。你可以做任何你需要做的事情，比如安装新的软件包。
*   一旦你完成了你的工作，你只需运行`deactivate`就可以离开虚拟环境。

如果您是虚拟环境的新手，那么通过安装 Anaconda 可以更容易地设置虚拟环境，它将负责您的 Python 解释器、包管理和虚拟环境。更多详情请访问 [Anaconda 的网站](https://www.anaconda.com/)。

# 2.字符串插值(F 字符串)

需要以适用的格式准备字符串以便我们可以呈现它们是一项常见的任务。通常，有几种方法来格式化字符串——一种使用`format`函数，另一种使用基于 C 风格的格式化。下面是一些简单的例子:

常规字符串格式

如上面的代码片段所示，这两种方法将字符串文本与所需的格式分开。例如，如果我们想要格式化如下所示的三个数字，我们将使用`format`函数做下面的事情。您可能已经注意到，我们必须将每个变量映射到每种格式，如果我们遗漏了一个数字或变量，这可能会令人困惑。

数字格式

相比之下，Python 3.6 中引入的字符串插值或文字字符串插值使得字符串格式化更加容易，更重要的是可读性更好。要格式化代码片段中显示的数字，我们可以使用字符串插值技术做同样的事情。

f 弦

*   我们用字母`f`来表示我们正在创建 f 弦。
*   类似于`format`函数，f 字符串使用花括号来表示要插值的变量。
*   与`format`函数不同，每个插值都有变量和所需的格式，这消除了它们之间的物理距离，使字符串更具可读性。

# 3.懒惰评估

惰性求值是计算机编程术语，指的是直到被请求时才被获取/准备的数据(例如变量)。例如，在 Swift 中，我们可以使用`lazy`关键字来表示一个变量，这样在我们调用它之前不会计算它。虽然 Python 没有`lazy`作为关键字，但是同样的懒评价在 Python 中还是有的。

举个例子，我们可以为我们的自定义类实例设置惰性属性。下面的代码向您展示了我们如何使用`property`装饰器来实现这一功能(请随意探索`functools`模块中的`@cached_property`装饰器以获得类似的效果):

使用属性的惰性属性

*   在初始化方法(即`__init__`)中，我们将受保护的属性(`_profile_data`)设置为`None`，它只是作为一个占位符。在许多情况下，我们并不真正需要概要文件数据。
*   然而，如果我们确实需要获得概要数据，我们可以用一个`property`装饰器包装它。它将检查`_profile_data`是否是`None`，只有当我们没有`_profile_data`属性的数据时，它才会运行昂贵的 web 请求。

再举一个例子，Python 中的生成器也利用了惰性求值技术。如您所知，生成器是一种特殊的迭代器，它在元素被请求时呈现元素。与从列表和字典中创建的一些常见迭代器不同，生成器并没有将所有元素都加载到内存中，因此它们非常节省内存。这都是因为它们保存迭代的状态，并“懒洋洋地”呈现下一个适用的项目。以下代码显示了生成器的相关用法:

生成器的记忆效率

*   我们使用所谓的生成器表达式来创建一个呈现正方形的简单生成器。
*   与对应的列表相比，生成器的大小只有列表的很小一部分(96 字节对 9000 字节)。然而，两者达到相同的效果——两者的总和相等。

# 4.（听力或阅读）理解测试

Python 的一个很酷的特性是理解技术。即使对初学者来说，列表理解也可能是他们听说过的高级技巧之一。使用 list comprehension 的目的是以非常简洁的方式使用 iterable 创建一个 list 对象。事实上，我使用了上一节中的列表理解来创建这个方块列表:

列表理解

*   list comprehension 的语法如下:`[expression for x in iterable]`。在上面的例子中，我们使用了`range`对象。
*   如果我们不使用列表理解，我们可以使用一个`for`循环来迭代`range`对象，并将正方形附加到列表对象上。最后，两个列表都有相同的项目。然而，列表理解显然是创建列表对象的一种更简洁的方式，如果我们从 iterable 开始，它应该是创建列表对象的首选方式。

除了列表理解，Python 还有创建字典和集合的理解技术。下面的代码片段向您展示了用法:

字典和集合理解

*   字典理解有以下语法:`{key_expr: valu_expr for x in iterable}`。
*   集合理解的语法如下:`{expr for x in iterable}`。

# 结论

在本文中，我们回顾了初学者可能会混淆的四个概念。以下是这些概念的概述:

*   虚拟环境是我们为项目创建独立工作空间的一种方式，这样它们就可以有不同的 Python 版本和不同的依赖需求。
*   字符串插值在 Python 中被称为 f-string，这是一种可读性更好的创建格式化字符串的方法，方法是将相关变量/表达式放在适用的格式设置旁边。
*   惰性求值是一种编程技术，它允许我们的程序尽可能地延迟昂贵的操作(例如，一个 web 请求，一个计算量很大的计算)。
*   理解是一种允许我们以更简洁的方式创建列表、字典和集合的技术，这消除了使用`for`循环的需要。