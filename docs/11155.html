<html>
<head>
<title>Auto-summarize Lectures Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python自动总结讲座</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/auto-summarize-lectures-using-python-dc3a497e0841?source=collection_archive---------10-----------------------#2022-02-22">https://betterprogramming.pub/auto-summarize-lectures-using-python-dc3a497e0841?source=collection_archive---------10-----------------------#2022-02-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="172a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用人工智能提升你的笔记游戏</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6725d8c8c616efe7e3d58f86c81895f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KBrmciGRhK6WBaZ_f8U5ag.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">瓦迪姆·博日科在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="255b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将向你展示如何将讲座视频/音频记录转换成总结的书面转录。我们将编写一个程序，在录音上运行语音识别模型，然后将转录分成章节。嗯，这还没完。它从那些章节中理解要点并为我们总结。</p><p id="da3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望我在大学的时候就知道该怎么做。:)</p><p id="537c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是语音识别学科的新手，请查看以下文章:<a class="ae ky" href="https://towardsdatascience.com/building-a-speech-recognizer-in-python-2dad733949b4" rel="noopener" target="_blank">如何构建简单的语音识别器</a>和<a class="ae ky" href="https://towardsdatascience.com/speech-recognition-in-real-time-using-python-fbbd62e6ff9d" rel="noopener" target="_blank">如何构建实时语音识别器</a>。今天，我们将做一些稍微复杂但更有趣和令人兴奋的事情。</p><p id="f8c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><h2 id="999c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">目录</h2><ul class=""><li id="b954" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated"><em class="mz">入门</em></li><li id="ce2a" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤1 —库</em></li><li id="d13b" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤2 —讲座音频数据</em></li><li id="ec12" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤3 —语音转文本，自动摘要</em></li><li id="82f2" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">最后一步——检查结果</em></li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="8616" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">入门指南</h1><p id="c15c" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">因为我们的主题是语音识别，所以让我们来谈谈我们将在这个项目中使用的语音识别API。有许多不同的云服务和API可用，每种都有特定的好处。</p><p id="691a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在今天的教程中，我们将使用AssemblyAI的<a class="ae ky" href="https://www.assemblyai.com/" rel="noopener ugc nofollow" target="_blank">语音转文本</a> API。它是一个训练有素的人工智能API。免费使用。创建帐户后，您将获得一个唯一的API密钥。我们将使用该API密钥来使用服务和功能。</p><p id="f385" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在决定了API之后，是时候选择我们的编码环境了。最佳路线通常是你最熟悉的路线——所以我会用<a class="ae ky" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter </a>笔记本；这是我最喜欢的数据科学项目。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="96b7" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤1 —库</h1><p id="c4b4" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">首先，python包，换句话说，python库。Python有优秀的库；有些是在编程语言内部构建的，有些是第三方库。</p><p id="d75f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们的项目，我们将需要三个基本库。它们是内置的依赖项，所以我们不需要安装任何额外的东西。我们需要做的就是将它们导入到我们的笔记本中。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2a30" class="lv lw it ob b gy of og l oh oi">import sys<br/>import time<br/>import requests</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="6a06" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤2 —讲座音频数据</h1><p id="7047" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这一步，我们将找到一个讲座录音，并使用其音频数据。如果你想保持简单，可以随意使用你谈论一个随机话题或阅读一本书等的简短录音。</p><p id="bd86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的音频数据将来自我最喜欢的一个讲座:哈佛的CS50。</p><p id="8369" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://cs50.harvard.edu/x/2020/weeks/0/" rel="noopener ugc nofollow" target="_blank">这里</a>是讲座视频的链接。在讲座视频下面，你会看到可供下载的音频版本。是不是很神奇？</p><p id="e935" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个长达一小时的录音。我会在开始的10分钟内完成。</p><p id="c8b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们继续将录音导入程序。在代码下面，还可以看到我的项目文件夹截图。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="f3e2" class="lv lw it ob b gy of og l oh oi">audio_data = lecture0.mp3</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/ccadc1e28ef674e2a40de51170f1946a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XgWwYTHLH0IFQaN-5wDWUg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图。</p></figure><p id="9946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们写一个函数来读取这段录音。顺便说一下，文件格式应该是音频格式，以便我们的阅读功能正常工作。CS50的讲座音频版本是mp3格式，效果非常好。</p><p id="ff96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是朗读音频功能:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="1a65" class="lv lw it ob b gy of og l oh oi">def read_audio(audio_data, chunk_size=5242880):<br/>    with open(audio_data, 'rb') as _file:<br/>        while True:<br/>            data = _file.read(chunk_size)<br/>            if not data:<br/>                break<br/>            yield data</span></pre><p id="64a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们使用API键将音频数据请求发送到云中。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="9f3b" class="lv lw it ob b gy of og l oh oi">headers = {<br/>    "authorization": "Your API key goes here"<br/> }</span><span id="4e4e" class="lv lw it ob b gy ok og l oh oi">response = requests.post('<a class="ae ky" href="https://api.assemblyai.com/v2/upload'" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/upload'</a>, headers=headers, data=read_audio(audio_data))</span><span id="99a8" class="lv lw it ob b gy ok og l oh oi">print(response.json())</span></pre><p id="741d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完美！运行这个代码块后，我们将收到来自API的响应。且响应消息将包括上传音频数据的URL地址。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/8b038698caa98552db56cf56a399b904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_y-VPncsgd3whS_esfAUGw.png"/></div></div></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="93b1" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤3 —语音转文本，带自动摘要</h1><p id="f7a5" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">这一步就是奇迹发生的地方。这将比其他步骤稍长，但没有什么复杂的事情发生。我们将看到使用API而不是重新发明轮子的好处。我们的音频文件已经在AssemblyAI的云存储里了；现在，是时候运行训练有素的机器学习模型了。</p><p id="c392" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://docs.assemblyai.com/audio-intelligence#auto-chapters-summarization" rel="noopener ugc nofollow" target="_blank">这里的</a>是自动汇总功能的官方文档。</p><p id="5259" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会分享下面的代码块，然后解释每个变量。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ad5c" class="lv lw it ob b gy of og l oh oi">speech_to_text_api = "<a class="ae ky" href="https://api.assemblyai.com/v2/transcript" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/transcript</a>"</span><span id="89db" class="lv lw it ob b gy ok og l oh oi">data = {<br/>    "audio_url": "the upload url address goes here",<br/>    "auto_chapters": "TRUE",<br/>}</span><span id="dbb3" class="lv lw it ob b gy ok og l oh oi">headers = {<br/>    "authorization": "Your API key goes here",<br/>    "content-type": "application/json"<br/>}</span><span id="9cf9" class="lv lw it ob b gy ok og l oh oi">response = requests.post(speech_to_text_api, json=data, headers=headers)</span></pre><ul class=""><li id="65ae" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated">第一个变量定义了我们计划使用的API模型。</li><li id="357e" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">第二个变量是字典。它包含两个键值:audio_url和auto_chapters。要在获取语音转文本结果时打开自动摘要功能，我们必须添加值为TRUE的auto_chaptersboolean键。</li><li id="0260" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">第三个变量也是一个字典。它包含我们的API键和内容类型。</li><li id="5a77" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">最后，我们有一个post请求，将所有变量合并到其中，并发送给API。响应将保留在响应变量中。</li></ul><p id="65f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们继续打印出答案。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="9d19" class="lv lw it ob b gy of og l oh oi">print(response.json())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/fe2a2b05f3180c3d4bfb9334516f608a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t3kL4RD05C-00IRPaNYxzg.png"/></div></div></figure><p id="fa4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在进入最后一步之前，让我们从这个响应中复制ID值。这个id值是我们刚刚提交的请求的请求ID。我们需要检查请求的状态并提取结果。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="da89" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">最后一步—检查结果</h1><p id="731b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">快到了！</p><p id="009b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最后一步中，我们将回调我们的请求，然后分析结果。我将分享下面的代码块，并解释每一行。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="d0c6" class="lv lw it ob b gy of og l oh oi">request_url = "<a class="ae ky" href="https://api.assemblyai.com/v2/transcript/ok8tfaqsxb-b5be-4fe5-a6d9-16f72c00faa3" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/transcript/ok8tfaqsxb-b5be-4fe5-a6d9-16f72c00faa3</a>"</span><span id="d333" class="lv lw it ob b gy ok og l oh oi">headers = {<br/>    "authorization": "Your API key goes here"<br/>}</span><span id="2137" class="lv lw it ob b gy ok og l oh oi">response = requests.get(request_url, headers=headers)</span><span id="88a5" class="lv lw it ob b gy ok og l oh oi">auto_summary_report = response.json()['chapters']</span><span id="7d84" class="lv lw it ob b gy ok og l oh oi">auto_summary_report</span></pre><ul class=""><li id="a161" class="mo mp it lb b lc ld lf lg li om lm on lq oo lu mv mw mx my bi translated">首先，我们定义请求URL变量。它是API URL，后跟请求id。</li><li id="e5b9" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">其次，我们只是定义API键。</li><li id="ee36" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">第三，我们调用get函数将结果接收到本地机器中。</li><li id="b01a" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">响应变量包含许多属性；这就是我们过滤掉章节部分的原因。</li><li id="215d" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated">最后，我们调用变量来查看自动汇总报告。</li></ul><p id="c462" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">以下是报告截图:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/6c7c60ef3bde34db53969664ad41a7ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prffGILRSoefCtSAm8JzuA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图。</p></figure><p id="cda7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你。如你所见，我们得到了不同章节的自动生成摘要。没有预定义任何东西，人工智能模型听了讲座，然后猜测章节。我们也可以将开始和结束时间视为毫秒。这样我们就能知道讲的是哪一部分了。你对此有什么想法？</p><p id="744a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢在这个项目上工作；很高兴看到机器学习和人工智能在现实世界中的应用——希望你喜欢阅读它，并在今天学到一些新东西。</p></div></div>    
</body>
</html>