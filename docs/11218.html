<html>
<head>
<title>Common Mistakes to Avoid While Switching to NextJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">切换到NextJS时要避免的常见错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/common-mistakes-to-avoid-while-switching-to-nextjs-c06a45abd3bc?source=collection_archive---------5-----------------------#2022-02-28">https://betterprogramming.pub/common-mistakes-to-avoid-while-switching-to-nextjs-c06a45abd3bc?source=collection_archive---------5-----------------------#2022-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7346" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您从React迁移到NextJS，应该注意的错误</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3017bc065981339d46dfda43c244e561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*szwGJvwpCIyQuyRJHb1kxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@twinsfisch?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">伊莎贝拉和Zsa Fischer </a>在<a class="ae ky" href="https://unsplash.com/s/photos/switch?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="cc7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是2022年，NextJS不再是一个可以取代react并提供一些重要功能的花哨框架，比如用React很难实现的SEO友好性。NextJS现在被认为是React非常可行的替代品，甚至像网飞和Deliveroo这样的公司也在他们的应用程序中使用它</p><p id="1aa2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一名React开发人员，现在是时候为你的下一个项目选择NextJS，或者了解它相对React的优势，以成功说服你的公司或客户在正确的项目中使用它。话虽如此，即使你正在使用Angular或Vue等其他框架，你仍然可以轻松快速地使用NextJS并开始在其中创建应用程序。在本文中，我们将讨论开发人员第一次迁移到NextJS时可能遇到的一些最常见的问题或错误。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8575" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.窗口对象</h1><p id="90bf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如上所述，我们都知道react是客户端应用，next是服务器端渲染，所以很明显在NextJS中默认情况下window对象是不可访问的。这是人们在试图在NextJS代码中使用窗口对象属性时最容易忽略的错误之一。例如，根据最大宽度分配一些动态CSS类，我们将使用窗口对象，但当您尝试运行应用程序时，它可能不会正确执行。</p><p id="4eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了克服这一点，我们必须添加一些检查，以确保在我们试图访问它的属性之前，窗口对象已加载到客户端。我们可以这样做，在<code class="fe mz na nb nc b">useEffect</code> hook中添加使用窗口对象的代码部分，就像这样。</p><p id="c66e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意——如果你在多个组件中重用这段代码，考虑让它成为一个钩子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用window对象定义屏幕是否小的示例代码。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d40a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.编写媒体查询</h1><p id="287b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">众所周知，Media query是开发人员最常用的基于不同屏幕动态应用CSS类的工具。但是对于像这样的媒体查询来说，网页的头部应该包含一个viewport的meta标签，它是由react这样的客户端应用程序自动设置的。在大多数情况下，人们用NextJS编写媒体查询，并注意到它们不起作用。这是因为，对于像Next这样的SSR应用程序，默认情况下不会添加相同的内容。要解决这个问题，只需在下一个/head的<em class="nf">内的<code class="fe mz na nb nc b">_app.js</code>中添加meta标签。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在_app.js中为视口添加meta标记。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7666" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.SEO标签</h1><p id="6dd3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">就像viewport一样，SEO在抓取您的网页时通常会使用许多其他标签。并且在react中设置这些标签，人们习惯于通过修改文档对象属性或使用像<a class="ae ky" href="https://github.com/nfl/react-helmet" rel="noopener ugc nofollow" target="_blank"> React头盔</a>这样的外部库来为页面设置这些标签。NextJS是一个SEO友好的框架，允许我们用内置的<code class="fe mz na nb nc b">next/head</code>来设置这些标签。您可以直接在NextPage中设置属性，使用常量或事件中的公共值编写一个功能组件，该组件将导出所有带有动态值的标签。你可以看到下面的例子-</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1929" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.链接</h1><p id="e56c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在下一个JS中，路由之间的客户端转换可以通过由<code class="fe mz na nb nc b">next/link</code>导出的<code class="fe mz na nb nc b">Link</code>组件来实现。我们可以在Link中写一个<code class="fe mz na nb nc b">&lt;a&gt;</code>并给它们添加样式，因为我们不能直接给链接添加类。但是所有的链接在默认情况下都会有一个下划线，为了移除它们，我们可以通过CSS添加<code class="fe mz na nb nc b">textDecoration</code>属性。这可以通过CSS类(这是最佳实践)或内联CSS来实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b7dd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.在组件中使用CSS</h1><p id="49c5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是一个愚蠢但棘手的部分。在React应用程序中，我们可以编写基于模块的CSS并将其导入到组件中，或者简单地导入特定的CSS文件并在className属性中使用它们。许多人使用后一种方法，因为它允许直接使用没有样式对象的类，用连字符大小写的CSS类更容易编写。通常，人们用一个索引文件和一个CSS文件为组件创建文件夹，并像这样使用索引文件中的样式，</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4774" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是你不能在NextJS中遵循同样的模式。所以如果你习惯了上面的方法，你必须注意一些事情</p><ul class=""><li id="f6e4" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">创建一个<filename> .module.css或Scss文件，用于编写基于组件的CSS。</filename></li><li id="3984" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">将组件中的CSS作为样式对象导入。</li><li id="170d" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">使用<code class="fe mz na nb nc b">className ={styles.className}</code>应用CSS。</li><li id="d325" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">除非您想使用括号符号，否则请使用大小写混合的类名。</li><li id="cda1" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">尝试对一个元素使用单个类名，除非你想对styles对象使用字符串插值(不是很干净)</li></ul><p id="ab5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例代码:-</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ce3f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6.使用下一张/图像</h1><p id="172f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">每个人都习惯于在网页上显示图片的HTML <code class="fe mz na nb nc b">&lt;img&gt;</code>。但是您会注意到，如果您尝试使用这个传统的HTML标记，NextJS将抛出一个错误，要求您使用内置的next/image。虽然<strong class="lb iu"> next/image </strong>提供了更好的性能和自动图像优化，但是设置图像样式有点棘手。</p><p id="818c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，要设置宽度和高度，你必须使用附带的强制属性，而不是CSS类，就像我们习惯的那样。如果我们想调整图像的高度和宽度，使其具有响应性，我们必须为它们的高度和宽度属性定义变量，并动态地改变它们。这是推荐的方法。但是如果你想用老方法做事情，另一种方法是添加一个包装元素(div ),像往常一样在该元素上应用所需的CSS，并为图像应用<code class="fe mz na nb nc b"> layout=fill</code>。但是请注意，这有一个缺点，包装div应该有<code class="fe mz na nb nc b">position: relative</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf01" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">7.静态资产</h1><p id="0b0c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你是react开发人员，你可能习惯于将字体文件存储在“src”文件夹中。Create React App使用<code class="fe mz na nb nc b">public</code>目录来存储<a class="ae ky" href="https://create-react-app.dev/docs/using-the-public-folder" rel="noopener ugc nofollow" target="_blank">条目HTML文件</a>，Next.js使用它来存储静态资产。因此，你的字体和其他图像应该存储在public文件夹中，以便在NextJS应用程序中正确加载。例如，要在next中使用自宿主字体，</p><p id="1049" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.将字体文件添加到<code class="fe mz na nb nc b">/public/assets/fonts</code></p><p id="91ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.在你的<code class="fe mz na nb nc b">global.css</code>中声明字体</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9aff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.确保global.css被导入到您的<code class="fe mz na nb nc b">_app.js</code>中。</p><p id="9348" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，您必须将任何图像、字体或其他静态资产移动到<code class="fe mz na nb nc b">public</code>文件夹，以便在应用程序中使用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="dd01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些只是我在尝试将项目从React迁移到NextJS时遇到的一些问题。感谢阅读。</p></div></div>    
</body>
</html>