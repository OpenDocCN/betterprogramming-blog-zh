<html>
<head>
<title>Wheel Picker View in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的滚轮选择器视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/wheel-picker-view-in-swiftui-6de7077b4791?source=collection_archive---------3-----------------------#2022-03-23">https://betterprogramming.pub/wheel-picker-view-in-swiftui-6de7077b4791?source=collection_archive---------3-----------------------#2022-03-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="573c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何创建一个滚轮菜单，并获取用户的滑动方向</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/09817d7ce26edb1da8d2b0384f39e764.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3LIFimirww5aXMsaHnGo_A.jpeg"/></div></div></figure><p id="1902" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从您想要在滚轮中显示的数据开始。</p><p id="75ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您想将色轮用作色轮，您可以存储颜色值。</p><p id="6c5d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您想将它用作一个在滚轮中间带有图像的菜单，那么您可以添加一个图像变量。</p><p id="2464" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本教程中，我将沿着轮子的侧面显示数字，供用户选择。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="ef7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用户需要向左或向右滑动才能移动滚轮。为您希望用户拥有的可能移动创建一个枚举。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="6340" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建一个视图，并在其中添加以下变量。</p><ul class=""><li id="83e4" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated"><code class="fe mb mc md me b">radius</code>:车轮的半径。在从我们的父视图中取出轮子的框架尺寸之后，这个值在外观内部被改变。</li><li id="be4d" class="ls lt it kw b kx mf la mg ld mh lh mi ll mj lp lx ly lz ma bi translated"><code class="fe mb mc md me b">direction</code>:保持用户滑动的方向。</li><li id="b0d5" class="ls lt it kw b kx mf la mg ld mh lh mi ll mj lp lx ly lz ma bi translated"><code class="fe mb mc md me b">choosenIndex</code>:存储用户从滚轮上选择的数值。</li><li id="8529" class="ls lt it kw b kx mf la mg ld mh lh mi ll mj lp lx ly lz ma bi translated"><code class="fe mb mc md me b">degree</code>:滚轮的旋转角度及其内部视图。</li><li id="1633" class="ls lt it kw b kx mf la mg ld mh lh mi ll mj lp lx ly lz ma bi translated"><code class="fe mb mc md me b">array</code>:这是一个<code class="fe mb mc md me b">myVal</code>的数组；我们上面创建的结构。该阵列用于构建我们车轮内部的内部视图。</li><li id="3a4f" class="ls lt it kw b kx mf la mg ld mh lh mi ll mj lp lx ly lz ma bi translated">圆的尺寸:我们的圆的宽度和高度的值。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="9196" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建一个函数，在用户滑动的方向上将滚轮移动到我们的滚轮内的下一个值。</p><p id="61a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过将360除以数组中的值的数量来计算新的度数值。跟踪用户选择的索引。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="4458" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也从一些变量开始。首先，我们需要知道数组中每个值之间的间距/角度。接下来，用<code class="fe mb mc md me b">onEnded()</code>修改器创建一个拖拽手势。</p><p id="d3c9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mb mc md me b">onEnded</code>内，取滑动的x起始位置，并与滑动的结束位置进行比较。如果起始值大于结束值，用户向左滑动，反之亦然。在<code class="fe mb mc md me b">onEnded()</code>的底部，调用moveWheel函数来移动滚轮。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="2c5d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了创建轮子，嵌入一个带有<code class="fe mb mc md me b">Circle()</code>的ZStack。然后循环遍历我们的值数组以添加到轮子中。</p><p id="77f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，计算数组中每个值的角度、x偏移量和y偏移量。</p><p id="dde5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我选择让<code class="fe mb mc md me b">Text()</code>的值从0到10。</p><p id="d3e6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对我来说，在您选择的视图中，添加<code class="fe mb mc md me b">.rotationEffect()</code>和我们绑定到父视图的程度。内部视图的移动方向与轮子本身的方向相反。</p><p id="fffe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用x偏移和y偏移来偏移循环内视图的x和y值。</p><p id="ccb9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，突出显示轮子内的选定值。下面，我为选择的索引使用了不同的字体。</p><p id="6650" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">向轮子的ZStack添加<code class="fe mb mc md me b">rotationEffect()</code>和我们绑定到父视图的程度。</p><p id="c143" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe mb mc md me b">.gesture()</code>修改器将拖动手势添加到堆栈中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="4b54" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">车轮视野</h1><p id="b786" class="pw-post-body-paragraph ku kv it kw b kx nj ju kz la nk jx lc ld nl lf lg lh nm lj lk ll nn ln lo lp im bi translated">如需完整代码，请查看以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="1a2d" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">父视图</h1><p id="517d" class="pw-post-body-paragraph ku kv it kw b kx nj ju kz la nk jx lc ld nl lf lg lh nm lj lk ll nn ln lo lp im bi translated">在父视图中，添加我们上面创建的<code class="fe mb mc md me b">WheelView</code>。将度数、轮子值数组和圆的大小传递给轮子。我使用偏移修改器将滚轮定位在屏幕的顶部。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/daa3fa82dd3637a111559fcaa019cf4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*bpowCmieDX-z64FSVoESlQ.gif"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="c6a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读！</p></div></div>    
</body>
</html>