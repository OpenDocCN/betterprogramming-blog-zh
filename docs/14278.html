<html>
<head>
<title>Build an End-to-End NFT Project Using Truffle Suite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Truffle套件构建一个端到端的NFT项目</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-an-end-to-end-nft-project-using-truffle-suite-d1814ee290f9?source=collection_archive---------13-----------------------#2022-11-23">https://betterprogramming.pub/build-an-end-to-end-nft-project-using-truffle-suite-d1814ee290f9?source=collection_archive---------13-----------------------#2022-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d42c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解Truffle套件以及它们如何适应web3开发生命周期。然后，我们将创建一个端到端的NFT项目。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/53b7f77c92ce14b98b296211c6c9b042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAB-fXY9SBA5a6IjTaLUdw.jpeg"/></div></div></figure><p id="18f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不可替代令牌(NFT)是Web3迄今为止最大的(也是最受欢迎的)创新之一。虽然他们的能力仍在探索中，但艺术行业和游戏世界都从这项技术中受益。这是因为NFTs创建了一个无可争议的数字所有权记录。</p><p id="1907" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">构建NFTs并不像您想象的那么复杂，尤其是使用工具套件，如<a class="ae ln" href="https://trufflesuite.com/" rel="noopener ugc nofollow" target="_blank"> Truffle套件</a>本文将向您介绍Truffle工具套件，并教您如何使用它们来构建端到端的NFT项目，包括以下内容:</p><ul class=""><li id="5722" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">项目设置和安装使用松露NFT盒。</li><li id="a2c4" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">块菌VS代码扩展简介。</li><li id="fe33" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">如何使用Truffle仪表板构建和部署NFT智能合约。</li><li id="1cba" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">使用松露NFT盒子从内置React客户端铸造NFT的说明。</li><li id="c86d" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">在block explorer和OpenSea / Rarible上验证。</li></ul><h1 id="9d8b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">松露套房介绍</h1><p id="a8e1" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">为了让以太坊开发者的生活更轻松，Truffle提供了开发环境、测试框架和资产管道。</p><p id="0c8a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它有几个特性吸引了有经验的和刚接触Web3的开发人员，它使开发人员能够为许多用例构建和部署dapps。Truffle工具套件有几个组件，包括:</p><ul class=""><li id="58dd" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">用于构建控制台和web应用程序的可编程构建管道。</li><li id="01ed" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">开发过程中的即时资产重建(<code class="fe mz na nb nc b">truffle watch</code>)</li><li id="5eac" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">一个控制台，使使用你编译的契约变得简单(<code class="fe mz na nb nc b">truffle console</code>)。</li><li id="4496" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">合同编译和部署，内置对JavaScript、CoffeeScript、ES6和JSX的支持，使用您选择的RPC客户端。</li></ul><h2 id="d549" class="nd md iq bd me ne nf dn mi ng nh dp mm la ni nj mo le nk nl mq li nm nn ms no bi translated">松露套房</h2><p id="08fc" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">Truffle包含帮助任何人快速构建和部署Web3项目的基本工具。堆栈中的工具包括:</p><ul class=""><li id="c3a4" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><a class="ae ln" href="https://trufflesuite.com/" rel="noopener ugc nofollow" target="_blank">松露</a> —开发环境和测试框架。</li><li id="d6ed" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://trufflesuite.com/ganache/" rel="noopener ugc nofollow" target="_blank"> Ganache </a> —以太坊开发的个人区块链。</li><li id="7c24" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">用于VS代码扩展的Truffle<a class="ae ln" href="https://github.com/trufflesuite/vscode-ext?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank">——一个使创建和管理Truffle项目更加容易的扩展。</a></li><li id="2459" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://trufflesuite.com/docs/truffle/how-to/use-the-truffle-dashboard/" rel="noopener ugc nofollow" target="_blank"> Truffle Dashboard </a> —使用现有元掩码钱包进行部署和其他需要从命令行上下文发送的事务的简单方法。</li><li id="490a" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://trufflesuite.com/boxes/?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank">松露盒子</a> —样板项目快速启动并运行。</li></ul><p id="657c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然不是Truffle工具套件的一部分，但以下工具与堆栈很好地结合在一起，使开发和部署更加简化:</p><ul class=""><li id="76c5" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><a class="ae ln" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a> —一家Web3后端和基础设施即服务(IaaS)提供商，为区块链开发者提供各种服务和工具。</li><li id="ad5f" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"> MetaMask </a> —一个加密钱包和区块链应用的网关。</li></ul><h1 id="b711" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">如何使用Truffle堆栈启动端到端NFT项目</h1><p id="4d3d" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">现在您已经对所涉及的工具有了一个概念，让我们将它们放在一起创建一个NFT项目。</p><h1 id="b08e" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">先决条件</h1><p id="4895" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在开始之前，我们需要以下先决条件:</p><ul class=""><li id="5d5f" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">Node.js 和它的包管理器NPM。</li><li id="4a53" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">使用以下终端命令验证我们是否安装了Node.js:</li></ul><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="e883" class="nt md iq nc b be nu nv l nw nx">node -v &amp;&amp; npm -v</span></pre><ul class=""><li id="e774" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><a class="ae ln" href="https://docs.infura.io/infura/getting-started" rel="noopener ugc nofollow" target="_blank">一个不真实的账户</a></li><li id="21c1" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><a class="ae ln" href="https://trufflesuite.com/blog/build-on-web3-with-truffle-vs-code-extension/" rel="noopener ugc nofollow" target="_blank">块菌VS代码扩展</a></li><li id="2e4b" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">对JavaScript和Solidity有基本的了解</li></ul><h1 id="6a4f" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">创建一个Infura帐户来访问网络</h1><p id="e475" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">访问Infura网站<a class="ae ln" href="https://infura.io/register" rel="noopener ugc nofollow" target="_blank">注册一个新账户</a>或<a class="ae ln" href="https://infura.io/login" rel="noopener ugc nofollow" target="_blank">登录</a>如果您已经有一个账户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/93a8e1df337d4ed76d85f37ab09e6658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i3YULmatGDktdcTaIM0faA.jpeg"/></div></div></figure><p id="ea91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">成功注册后，该页面重定向到我们的仪表板，在这里我们可以创建一个新的密钥，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/790f0e908d1b1c0c40c316976593132f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fkju8nfEUHu7we3Tdwtq3Q.jpeg"/></div></div></figure><p id="4ec2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击<strong class="kt ir">新建密钥</strong>按钮，填写所需信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/981d03b4f5f2b8ac30c2bf02c59b2f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJTP2ULvgEYNhrDBPT1oJQ.jpeg"/></div></div></figure><p id="8af1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建您的密钥后，您的项目ID将出现在仪表板上的<strong class="kt ir"> API密钥</strong>部分，如下所示。复制并保存在某个地方；在本教程的后面，您将需要它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/33285335962134ac8dd884d8d031084f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mNpGHwVMtRVXfGlHMNdLkQ.png"/></div></div></figure><h1 id="2b5f" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">使用Infura RPC设置元掩码</h1><p id="b395" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">我们将需要使用Infura RPC端点在MetaMask上配置和设置Goerli测试网络，因为您将通过Truffle Dashboard构建和部署您的应用程序。</p><p id="5059" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">前往<a class="ae ln" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"> metamask.io </a>下载你的浏览器扩展。使用MetaMask这样的加密钱包时，了解钱包的安全性是必不可少的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/66c434f47dc68ffad673b17a6a1383c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IGl4Wo6BJn0AVwx_B6FwjQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/ad3bdbc726bbd0233028b1c323fb1876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWLaS7QE8dm3pW7PVU58MQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/0ce588e254794ee8e65df97be13f0a9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PzPVR38viDx9kEFDqNvVlA.png"/></div></div></figure><p id="c1ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击<strong class="kt ir">手动添加网络</strong>，如上图所示，然后输入以下信息:</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="bb5b" class="nt md iq nc b be nu nv l nw nx">Network Name: Goerli Testnet - Infura<br/>New RPC URL: https://goerli.infura.io/v3/&lt;Paste-your-project-id-here&gt;<br/>Chain ID: 5<br/>Currency Symbol: ETH<br/>Block Explorer URL: https://goerli.etherscan.io/</span></pre><p id="5b5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">恭喜您，您已经成功地用Infura RPC配置了Goerli Testnet。</p><h1 id="3056" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">使用Truffle NFT盒和Truffle for VS代码扩展的端到端NFT项目设置</h1><p id="3717" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在本节中，您将使用Truffle NFT盒和Truffle for VS代码扩展来建立一个NFT项目。从你想处理的文件夹中打开VS代码，导航到扩展标签，搜索“Truffle for VS Code”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/61b6ced1d215e4574bcfc4e301a4621c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-a4SKQ4x37vvH8CTsZ3Pw.png"/></div></div></figure><p id="ce73" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装了扩展后，您可以轻松地从Truffle Box创建一个新的Truffle项目。按ctrl+shift+P打开命令对话框，键入“truffle”这将显示可用的Truffle命令列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/a424bece6c3aa6d2cf26ef8b2cdf0fc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*GcSMEqpsTftXCeUjTIq8uQ.png"/></div></figure><p id="face" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">选择<strong class="kt ir">新建实体项目</strong>，然后<strong class="kt ir">从块菌盒</strong>创建项目。接下来，将显示可用松露盒的列表。选择<strong class="kt ir"> nft-box </strong>创建项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/767fdf5eb041658c35c03656b3bff257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*96hwArKl5iohV1WZk5DecQ.png"/></div></figure><p id="44ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者，如果您没有使用VS代码作为您的主要编辑器，您仍然可以跟随。使用以下命令从您选择的任何目录中的块菌盒创建一个NFT项目:</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="52c4" class="nt md iq nc b be nu nv l nw nx">mkdir nft-project-demo &amp;&amp; cd nft-project-demo<br/>npx truffle unbox nft-box</span></pre><p id="8731" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者你可以全局安装Truffle并运行<code class="fe mz na nb nc b">unbox</code>命令。</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="6ada" class="nt md iq nc b be nu nv l nw nx">npm install -g truffle<br/>truffle unbox nft-box</span></pre><p id="f867" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个命令应该下载和拆箱松露NFT盒。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/5927b7b95d6d0ec5d713bedd3939787d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KIstq3pJhTY9UQvqL0YFgA.png"/></div></div></figure><p id="5b39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，<code class="fe mz na nb nc b">cd</code>进入新目录，并通过运行<code class="fe mz na nb nc b">npm install</code>下载所有项目依赖项。</p><p id="8fd8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，在您喜欢的代码编辑器中打开项目。不管您是如何创建项目的，您都应该有一个类似于下面所示的项目结构。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/747879d5ae62214ca13996622138cb88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*8w2poZM-gRLJVNrrgMvx7g.png"/></div></figure><h1 id="62a4" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">在IPFS上传NFT元数据</h1><p id="3a67" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">我们的NFT图像和元数据将使用IPFS存储。打开你的Infura仪表板，创建另一个项目，这次选择IPFS，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/df06e7441fcadc3df1486a9875e38f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CjOav7ovbSBqFs3S1aAhcQ.png"/></div></div></figure><p id="54d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，点击<strong class="kt ir">管理密钥</strong>查看项目详情。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/a26ea63b286121dece66697e5c05ffc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K05f244iNa_BlQe_n9UK3g.png"/></div></div></figure><p id="5996" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您将需要<strong class="kt ir">项目ID </strong>、<strong class="kt ir">项目秘密</strong>和<strong class="kt ir">端点URL </strong>来完成以下任务。</p><p id="b333" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用下面的命令，让我们上传图像到IPFS。要上传图像，请将cd放入保存图像的文件夹中。</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="147a" class="nt md iq nc b be nu nv l nw nx">curl -X POST -F file=@yourfile -u "PROJECT_ID:PROJECT_SECRET" <br/>"https://ipfs.infura.io:5001/api/v0/add"</span></pre><ul class=""><li id="8617" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><em class="oh">将</em> <code class="fe mz na nb nc b"><em class="oh">@yourfile</em></code> <em class="oh">替换为当前文件夹中图像文件的名称，如</em> <code class="fe mz na nb nc b"><em class="oh">image-name.jpeg</em></code> <em class="oh">。</em></li><li id="bf13" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><em class="oh">依次用您的项目id和密码替换</em> <code class="fe mz na nb nc b"><em class="oh">“PROJECT_ID:PROJECT_SECRET”</em></code> <em class="oh">。</em></li></ul><p id="f7a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令的输出应该类似于下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/39e2f632cf3d739627c98571641e0536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ws7nmDyDDlS-lVlFVgz2qA.png"/></div></div></figure><p id="270a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过将哈希粘贴到以下URL来验证图片是否上传成功:https://ipfs.io/ipfs/YOUR_HASH_HERE.</p><p id="4dcc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="oh">注意</em> </strong> <em class="oh">:首次尝试通过URL访问图像时，可能需要几分钟的加载时间。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/552ccfd0dc2acd2a553c44dd543f9ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ziQ0fJrY-l76P1wY5-64cw.png"/></div></div></figure><p id="f3fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然图像已经存在，让我们将元数据存储在IPFS上。为了符合<a class="ae ln" href="https://docs.opensea.io/docs/metadata-standards" rel="noopener ugc nofollow" target="_blank"> OpenSea要求</a>，您将需要您的元数据采用以下JSON格式:</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="ef74" class="nt md iq nc b be nu nv l nw nx">{ <br/>  "name": "My Nature NFT",     <br/>  "description": "Amazing nature NFT deployed to the Goerli Network using Infura RPC",<br/>  "image": "ipfs://YOUR_HASH_HERE" <br/>}</span></pre><p id="13e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您将使用类似于前面步骤中使用的命令来上传图像。</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="06ff" class="nt md iq nc b be nu nv l nw nx">curl -X POST -F file=@yourjsonfile -u "PROJECT_ID:PROJECT_SECRET" <br/>"https://ipfs.infura.io:5001/api/v0/add"</span></pre><ul class=""><li id="b8ba" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><em class="oh">将</em> <code class="fe mz na nb nc b"><em class="oh">@yourjsonfile</em></code> <em class="oh">替换为当前文件夹中json文件的名称，如</em> <code class="fe mz na nb nc b"><em class="oh">nft-metadata.json</em></code> <em class="oh">。</em></li><li id="75b0" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><em class="oh">依次用你的项目id和秘密替换</em> <code class="fe mz na nb nc b"><em class="oh">“PROJECT_ID:PROJECT_SECRET”</em></code> <em class="oh">。</em></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/ce5aeff5eee6166c99d13a6303fe7af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oqKK7MSLtLO8pOw2nanRtg.png"/></div></div></figure><p id="e3a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过将散列粘贴到以下URL来验证JSON文件是否成功上传:https://ipfs.io/ipfs/YOUR_HASH_HERE</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/e0081deb7cf5609c45eb9d93ce03883d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfbWI29AbPFD5EY-jUshpg.png"/></div></div></figure><p id="0607" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您已经完全设置了我们使用Truffle Dashboard构建和部署智能合同所需的所有工具。让我们在下面的步骤中这样做。</p><h1 id="5b6d" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">使用Truffle仪表盘构建和部署智能合同</h1><p id="b316" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">带着我们之前安装的松露NFT盒子前往NFT项目；在本节中，您将构建和部署智能合约。</p><p id="c782" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在migrations文件夹的<code class="fe mz na nb nc b">1_deploy_contracts.js</code>文件中，用下面的代码片段更新它。</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="3ba9" class="nt md iq nc b be nu nv l nw nx">var NFTCollection = artifacts.require("./NFTCollection.sol");<br/><br/>module.exports = function (deployer) {<br/>  deployer.deploy(<br/>    NFTCollection,<br/>    "https://ipfs.io/ipfs/YOUR_IPFS_HASH_HERE",<br/>    "NFT DEMO",<br/>    "NFTD"<br/>  );<br/>};</span></pre><p id="2d91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码片段中，我们添加了IPFS上托管的JSON文件的URL、令牌名称和符号作为<code class="fe mz na nb nc b">deployer.deploy()</code>函数的参数。</p><p id="706c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，您将使用Truffle Dashboard进行构建和编译，它消除了在整个开发生命周期中与您的钱包的助记短语或私钥进行手动交互的需要。</p><p id="6217" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在单独的终端窗口中，键入以下命令:</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="0416" class="nt md iq nc b be nu nv l nw nx">truffle dashboard</span></pre><p id="892e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令将自动启动位于<a class="ae ln" href="http://localhost:24012" rel="noopener ugc nofollow" target="_blank"> http://localhost:24012 </a>的Truffle Dashboard，并在您现有的浏览器会话中打开一个新选项卡。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/9cbb2e744f178b5ff249ce1e23b350b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WS20EGStmgGzcaKyPbBwrg.png"/></div></div></figure><p id="4741" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">连接钱包后，确保切换到我们之前使用Infura RPC设置和配置的Goerli testnet。成功连接后，您应该会看到如下所示的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/7d219644ffc2f5e44235e13b4563885c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ah_4S_E3ZivdHhTf52vn9w.png"/></div></div></figure><p id="bbbf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，使用以下命令编译和部署智能合约:</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="995e" class="nt md iq nc b be nu nv l nw nx">truffle migrate --network dashboard</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/fa3e1c82585df70f4fccb04df861a839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUFuE7-2vFihHd8M0YYu6g.png"/></div></div></figure><p id="4e66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据终端上的提示，通过浏览器上的Truffle仪表板批准交易。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/df0be9f2c44fa6ea448dd775f2dea29c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K17DazpN5FUve8sJ1FyfVw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/8dbf2ee5c955d4bb3da294bf151a729a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0RyMy47dI5I9nBItYsfhw.png"/></div></div></figure><p id="cc67" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">成功部署后，您应该在终端上看到类似下面所示的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/788ab4a43b711d5377aeb57c43b1d35a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NiQaCocFzDABVAvV5_hxww.png"/></div></div></figure><h1 id="91c5" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">在Goerli Testnet块资源管理器上验证合同创建</h1><p id="fa94" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在本节中，通过粘贴合同地址或从MetaMask确认，在Goerli Testnet块资源管理器上通过<a class="ae ln" href="https://goerli.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> testnet URL </a>验证合同创建，这将重定向到Goerli Testnet块资源管理器，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/269149699633e8520a053a47cb00cbd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bjv-WeM5u5VagwOSQ04HJQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/9ae806a60bd14f824f0926577a0ee2f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8XjiAz9U51Hzu8pvHuMDw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/162a045e13b4c2ca428541b2f4651ab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LCQN228_lEBH19IEWWey2Q.png"/></div></div></figure><h1 id="d22b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">配置前端客户端并创建一个NFT</h1><p id="d167" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">打开一个单独的终端，运行以下命令来配置前端客户端。这将允许我们从我们刚刚部署的智能合同中创造NFT。</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="ac46" class="nt md iq nc b be nu nv l nw nx">cd client<br/>npm install<br/>npm start</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/e923509773bc9ed071d0b2865238504b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sie-BDSXXLkuqM3vtWPPaQ.png"/></div></div></figure><p id="885b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您遇到类似上面显示的错误，在客户端文件夹中创建一个<code class="fe mz na nb nc b">.env</code>文件，添加<code class="fe mz na nb nc b"> SKIP_PREFLIGHT_CHECK=true</code>，然后运行下面的命令。</p><pre class="kg kh ki kj gt np nc nq bn nr ns bi"><span id="89dc" class="nt md iq nc b be nu nv l nw nx">npm start</span></pre><p id="a205" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React服务器将在<a class="ae ln" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>的浏览器上自动启动，显示类似下图的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/7ef1baa62ac37d3f5c3ab8ee7f2fca6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JtCfy4oqiesHf5LaZA2Kxw.png"/></div></div></figure><h1 id="6b18" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">测试端到端NFT项目</h1><p id="21c9" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在本节中，让我们测试一下应用程序，看看您是否可以通过点击<strong class="kt ir">铸造NFT </strong>按钮来成功铸造NFT。</p><p id="a523" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按下按钮后，您将看到一个类似于下图所示的MetaMask弹出窗口。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/8dbf2ee5c955d4bb3da294bf151a729a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0RyMy47dI5I9nBItYsfhw.png"/></div></div></figure><p id="1e17" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过点击下面的交易，您可以确认MetaMask上的铸造是否成功。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/ac2e52d44979d8b35f254def3b0ef74f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*at5R7p6lxUXhxJ53Ym-X6A.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/9ae806a60bd14f824f0926577a0ee2f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8XjiAz9U51Hzu8pvHuMDw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/1321ef3378bacf8bb33daed193b046ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KDzQ53UrwDEGgSw_dNBMbg.png"/></div></div></figure><h1 id="bc23" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">在OpenSea &amp; Rarible上验证铸造的NFT</h1><p id="17be" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在前面的步骤中，我们使用Truffle堆栈成功构建并部署了一个端到端的NFT项目。在本节中，让我们在OpenSea和Rarible上验证我们的铸造NFT。</p><p id="4708" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如下所示复制合同地址。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/04ecd033d85685a055227ae864cdedb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJ7P5K3cd0VUKNVq8QkJqA.png"/></div></div></figure><p id="2d36" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将您的合同地址粘贴到搜索栏中，在opensea上查看您的新NFT。如果元数据输入正确，您的NFT应该会正确显示。</p><p id="35f8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong> OpenSea有时显示您的NFT元数据和图像会很慢。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/cf74e2b5056be51f8dfbc82c8947ad6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCqw24tyMY5Gi6QKQtu3bA.png"/></div></div></figure><p id="f56a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以粘贴你的合同地址并在<a class="ae ln" href="https://testnet.rarible.com/" rel="noopener ugc nofollow" target="_blank">https://testnet.rarible.com/</a>上查看，因为他们检索NFT元数据的速度比OpenSea快，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/b0b5ce221174fe89d4aeab5e75041136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ES8uEoXd-9fRXQlxpu7RbA.png"/></div></div></figure><p id="f4f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如您所看到的，我们的NFT在OpenSea和Rarible testnet平台上都正常显示，从而验证了成功的部署。</p><p id="dfd8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样！你可以在这个<a class="ae ln" href="https://github.com/Olanetsoft/nft-project-with-truffle-stack" rel="noopener ugc nofollow" target="_blank"> GitHub </a>库上找到完整的代码。</p><h1 id="45ce" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">结论</h1><p id="5ffc" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">本文向您介绍了Truffle工具套件，以及如何将它们与Infura和MetaMask结合使用来创建一个端到端的NFT项目。您还了解了块菌盒是快速构建项目的简单方法。</p><p id="1dfe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Web3的开发并不一定很难，尤其是在开发过程的每一步都有工具可用的时候。要了解更多关于松露栈的信息或继续建造，<a class="ae ln" href="https://trufflesuite.com/docs/" rel="noopener ugc nofollow" target="_blank">查看他们的文档</a>。</p><p id="f2dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>