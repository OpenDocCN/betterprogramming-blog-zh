# 学习类型脚本—接口

> 原文：<https://betterprogramming.pub/learning-typescript-interfaces-d36ca8b83758>

## 描述我们物体的形状

![](img/d43edb48fd0dc107416a002635384aa4.png)

Patrick Fore 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片。

这是学习型脚本系列的第 2 部分。在第 1 部分中，我们研究了什么是 TypeScript，如何安装它，以及它的基本类型。在本文中，我们将探索它的接口。

# 什么是接口？

简单地说，界面是描述对象形状的一种方式。在 TypeScript 中，我们只关心检查对象中的属性是否具有声明的类型，而不关心它是否专门来自同一个对象实例。

为了强调 TypeScript 如何只检查对象的形状，我们让`thisObj`和`thatObj`具有相同的属性`name`。尽管是两个不同的对象，但是当`printName()`将它们作为参数时，这两个对象都通过了类型检查。

# 可选属性

有时，我们会遇到这样的情况，并非所有的属性在任何时候都是必需的——只是在特定的条件下。我们将用可选属性对这些情况进行类型检查。

另一方面，`defineMammal({ name: ‘chicken’, legs: 2, wings: 2, color: ‘white’ })`没有通过类型检查，因为`color`没有列为接口中定义的属性之一。它也不是哺乳动物，所以抛出这个错误的原因不止一个。

# 只读属性

如果我们想要创建定义后看起来不可变的对象，我们将使用`readonly`属性。

除了对象，数组可以定义为只读的，也可以用`ReadonlyArray<T>`形式的泛型来定义。使用这种类型，您可以定义一个删除了所有变异方法的元组。

注意`readonly`仅对编译步骤有效。一旦编译成 JavaScript，这个属性就消失了。

# 超额财产检查

要允许接口接受尚未定义的属性，可以这样定义:

在上面的代码片段中，变量`chicken`具有属性`color`，TypeScript 接受该属性，因为它允许使用类型为`any`的多余属性。然而，如果`legs`的类型是`string`而不是`number`，编译器将抛出一个错误，因为`legs`被定义为具有类型`number`。

您也可以在接口中使用`[propName: string]: any`，首先初始化变量，然后将它赋给执行类型检查的变量。

这样做的原因是，只有对象文字受到比赋给变量的对象更严格的类型检查。只要该对象中至少包含一个属性，该解决方法就可以工作。

# 功能类型

为了描述函数类型，接口被赋予一个调用签名，它类似于一个函数声明，只给出参数列表和返回类型。

不需要定义`myPrintNums`的函数参数和返回值的类型，因为 TypeScript 会将它们推断为类型`printNums`。

# 可索引类型

这些是我们可以“索引”的类型，比如`a[1]`或`a['hi']`。

您可以定义数字和字符串可索引类型，但是数字索引必须始终是字符串索引的子类型。

您可以使用索引签名来描述字典模式，但是请注意，它们强制所有属性都必须与其返回类型相匹配。

`legs`属性抛出了一个错误，因为字典被设置为所有类型为`string`的`indexes`都将返回类型`string`而不是数字。您可以通过在`index`的类型中包含`number`来解决这个问题。

您还可以创建索引签名`readonly`来防止任何类型的突变。

# 类别类型

对于类来说，要强制一个类型，你必须有一个接口。

一个类有两种类型的接口:

*   发生在类外的静态方。
*   描述类中类型(不是实现)的实例端。

只有实例端使用接口进行检查，而构造函数在初始化新对象时使用静态端进行检查。

# 扩展接口

就像一个类可以从另一个类扩展一样，接口也可以从另一个接口扩展。这允许您将成员从一个接口复制到另一个接口，并在其上展开。

显而易见，接口`mammal`是`Animal`的扩展，以便对`dog`进行正确的类型检查。

# 混合类型

在极少数情况下，你必须同时描述一个对象和一个函数。幸运的是，TypeScript 支持这些混合类型。

# 接口扩展类

接口也可以从类扩展。它们通过复制所有成员及其类型来实现这一点。如果类有私有或受保护的变量，那些接口类型只能由类本身(私有和受保护的)或它的子类(仅受保护的)实现。

请记住，私有成员只能由基类本身访问，而受保护的成员可以由基类及其子类访问。这只适用于 TypeScript。一旦编译成 JavaScript，所有成员都是公共的，可以从任何地方通过引用实例来访问。

# 结论

概括地说，我们知道接口描述了对象的形状，包括对象文字、函数和类。

我们可以选择是否包含带有可选属性的某些属性，并在这些属性前面添加`?`。

只读属性可以通过在属性前添加`readonly`来定义。要描述只读数组，使用通用的`ReadonlyArray<T>`。

对于您想要描述的对象中任何多余的属性，您可以在接口中使用类似`[propName: string]: any;`的东西。

您还可以使用两种可索引类型来描述对象(甚至是数组):数字和字符串。

对于类，您可以使用两种类型的`implement`接口:`static`和`instance`。

最后，接口可以由其他接口或类扩展，并可用于描述既可以是函数又可以是对象的混合类型。