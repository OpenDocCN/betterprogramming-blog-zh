<html>
<head>
<title>How To Build a Video Player in Vanilla JavaScript and HTML5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用普通的JavaScript和HTML5构建视频播放器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-video-player-in-vanilla-javascript-and-html5-61ecc1552b8e?source=collection_archive---------7-----------------------#2022-10-18">https://betterprogramming.pub/how-to-build-a-video-player-in-vanilla-javascript-and-html5-61ecc1552b8e?source=collection_archive---------7-----------------------#2022-10-18</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="bfab" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">一个深入的使用简单方法的JavaScript视频播放器教程</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4fade73041c8ba5cd12c046502daa2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cgZk_lLU3wdsFteV.jpg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://www.freepik.com/free-vector/media-player-concept-illustration_9936448.htm#query=video%20player&amp;position=6&amp;from_view=search" rel="noopener ugc nofollow" target="_blank">图片由Freepik上的故事集</a>提供</p></figure><p id="af76" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">十年前，如果没有Flash或Silverlight等第三方服务，在浏览器中播放视频或音频几乎是不可能的。你必须安装一个插件，并且只在使用它的时候播放你的媒体。它非常不舒服，速度慢，延误时间长。</p><p id="e91e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，我们有了HTML5的JavaScript，有了这些新技术和工具，我们可以更快、更容易、没有任何延迟地传输视频。要做到这一点，你只需要在HTML5中添加一个简单的<code class="fe lw lx ly lz b">&lt;video&gt;</code>标签，并提供一个链接到你电脑上存储的视频。然后，通过使用一个名为<code class="fe lw lx ly lz b">controls</code>的简单属性，您将拥有一个内置在浏览器中的默认视频播放器。</p><p id="63d6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">它很基础，没有太多功能，所以如果你想用你的个人视频播放器在你的网站上更专业地播放视频，你需要使用JavaScript。我们将在这篇文章中教你如何去做！</p><p id="96f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本指南结束时，您将拥有类似的东西。所以，如果你感到兴奋，继续阅读，并按照这个教程一步一步来！</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ma mb l"/></div></figure><h1 id="1519" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">设置项目</h1><p id="3337" class="pw-post-body-paragraph la lb iu lc b ld mu jv lf lg mv jy li lj mw ll lm ln mx lp lq lr my lt lu lv in bi translated">假设您正在使用UNIX系统(或者在Windows上使用Git BASH ),您可以使用以下命令创建用JavaScript构建视频播放器所需的所有三个文件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz mb l"/></div></figure><p id="5e6c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要在我们的应用程序中添加一个简单的视频播放器，我们必须在我们的<code class="fe lw lx ly lz b">index.html</code>中添加以下代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz mb l"/></div></figure><p id="fab8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的代码中，<code class="fe lw lx ly lz b">&lt;video&gt;</code>元素使用了来自我的FTP的远程视频。你可以使用我的默认视频，也可以通过调整<code class="fe lw lx ly lz b">src</code>属性从你的本地计算机添加任何视频。HTML5规范支持三种不同的视频格式，片段使用了多个<code class="fe lw lx ly lz b">&lt;source&gt;</code>标签来使视频在MP4和WebM中可用。此外，<code class="fe lw lx ly lz b">&lt;p&gt;</code>标签向不支持<code class="fe lw lx ly lz b">video</code>元素的用户代理显示预定义的内容。</p><p id="c65c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">HTML5 <code class="fe lw lx ly lz b">&lt;video&gt;</code>标签接受几个本地属性。例如，<code class="fe lw lx ly lz b">controls</code>属性在添加或设置为true时显示标准播放器控件。你可以在这里找到更多关于<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#attr-controls" rel="noopener ugc nofollow" target="_blank">所有视频属性</a>。</p><p id="4285" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在继续之前，您应该应用本教程中需要的所有样式，方法是用此代码笔中的所有样式<a class="ae kz" href="https://codepen.io/paulknulst/pen/qBYNxxa" rel="noopener ugc nofollow" target="_blank">填充您的<code class="fe lw lx ly lz b">style.css</code>。保存并打开您的<code class="fe lw lx ly lz b">index.html</code>,将其加载到浏览器中，查看嵌入式视频播放器，如下所示:</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj na"><img src="../Images/f69cc1b0b02962b090e637c8c1c980df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4edPQTlXHSeC2Txy.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">HTML 5视频播放器用户界面的屏幕截图</p></figure><h1 id="aa6e" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">用JavaScript定制视频播放器</h1><p id="c66a" class="pw-post-body-paragraph la lb iu lc b ld mu jv lf lg mv jy li lj mw ll lm ln mx lp lq lr my lt lu lv in bi translated">要定制视频播放器，首先必须删除显示<code class="fe lw lx ly lz b">Play</code>、<code class="fe lw lx ly lz b">Pause</code>、<code class="fe lw lx ly lz b">Volume</code>等的<code class="fe lw lx ly lz b">controls</code>属性。，因为您将在本教程中实现自己的自定义控件。现在，检查你的浏览器。您将意识到控件已不存在，并且无法再播放视频。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nb"><img src="../Images/8d92ed8741c649dc047fb3b7173f1083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DQg0AUbOsA_C4vvy.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">不带控件属性的HTML5视频播放器用户界面的屏幕截图</p></figure><h1 id="4263" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">添加播放和暂停</h1><p id="daec" class="pw-post-body-paragraph la lb iu lc b ld mu jv lf lg mv jy li lj mw ll lm ln mx lp lq lr my lt lu lv in bi translated">要启用播放和暂停视频的功能，您必须向<code class="fe lw lx ly lz b">index.html</code>添加一个新按钮。看起来是这样的:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz mb l"/></div></figure><p id="9b9d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">之后，打开您的<code class="fe lw lx ly lz b">script.js</code>，通过添加以下代码来启用功能:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz mb l"/></div></figure><p id="dcc0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这段JavaScript代码中，首先选择<code class="fe lw lx ly lz b">video-container</code>元素和<code class="fe lw lx ly lz b">playPauseBtn</code>(第1行和第2行)。之后，将定义两个函数:<code class="fe lw lx ly lz b">togglePlay()</code>和<code class="fe lw lx ly lz b">updatePlayBtn()</code>。<code class="fe lw lx ly lz b">togglePlay()</code>用于根据实际状态停止和启动视频。<code class="fe lw lx ly lz b">updatePlayBtn</code>用于在视频播放器内显示的图标之间切换。</p><p id="d232" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在代码片段的最后一部分，click事件监听器被添加到<code class="fe lw lx ly lz b">playPauseBtn</code>中，它执行<code class="fe lw lx ly lz b">togglePlay()</code>函数。接下来，三个点击事件监听器被添加到<code class="fe lw lx ly lz b">videoContainer</code>。它们在鼠标点击时执行<code class="fe lw lx ly lz b">togglePlay()</code>,根据视频的状态执行<code class="fe lw lx ly lz b">updatePlayBtn</code>。</p><p id="bab9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在您可以重新加载您的<code class="fe lw lx ly lz b">index.html</code>，并且应该能够通过点击视频或按钮来播放和暂停视频:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nc"><img src="../Images/fdf30fd8fcbe8602539aeb5f682a3840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d-AHkczPdZXtmwNc.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">HTML5视频播放器播放和暂停的动画演示</p></figure><h1 id="088b" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">添加进度条</h1><p id="400f" class="pw-post-body-paragraph la lb iu lc b ld mu jv lf lg mv jy li lj mw ll lm ln mx lp lq lr my lt lu lv in bi translated">接下来，将实现一个进度条来显示视频播放时的当前时间戳。首先，给<code class="fe lw lx ly lz b">index.html</code>添加一个<code class="fe lw lx ly lz b">&lt;div&gt;</code>标签，作为进度条:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz mb l"/></div></figure><p id="f6b7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后打开<code class="fe lw lx ly lz b">script.js</code>并添加以下代码片段:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz mb l"/></div></figure><p id="2aec" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这个代码片段中，将选择<code class="fe lw lx ly lz b">progress</code>容器和<code class="fe lw lx ly lz b">progress__filled</code>元素，并添加两个函数:<code class="fe lw lx ly lz b">handleProgress()</code>和<code class="fe lw lx ly lz b">jump(e)</code>。<code class="fe lw lx ly lz b">handleProgress()</code>将负责更新进度条。<code class="fe lw lx ly lz b">jump(e)</code>功能可以点击进度条跳转到视频中的位置。</p><p id="3515" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后一部分包含进度条所需的所有事件侦听器。每个<code class="fe lw lx ly lz b">timeupdate</code>事件都会调用<code class="fe lw lx ly lz b">handleProgress()</code>。还有，点击进度条上的任意位置都会调用<code class="fe lw lx ly lz b">jump(e)</code>方法，视频会跳转到该位置。此外，<code class="fe lw lx ly lz b">mousedown</code>、<code class="fe lw lx ly lz b">mousemove</code>和<code class="fe lw lx ly lz b">mouseup</code>将用于在进度条上按住鼠标按钮的同时在视频中滑动。</p><h1 id="6169" class="mc md iu bd me mf mg mh mi mj mk ml mm ka mn kb mo kd mp ke mq kg mr kh ms mt bi translated">结束语</h1><p id="fbb0" class="pw-post-body-paragraph la lb iu lc b ld mu jv lf lg mv jy li lj mw ll lm ln mx lp lq lr my lt lu lv in bi translated">恭喜你！如果您遵循了教程，您就学会了如何使用JavaScript实现自己的视频播放器和添加自定义控件。现在，您可以使用<a class="ae kz" href="https://codepen.io/paulknulst/pen/qBYNxxa" rel="noopener ugc nofollow" target="_blank"> my CodePen </a>并开始实现更多控件，如音量控件、键盘快捷键或跳过控件，以构建您自己的定制视频播放器。</p><p id="0f76" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">目前，我正在编写后续教程，在该教程中，我将扩展这段代码以添加键盘控件和附加功能。它将在媒体上和我的博客上发表。</p><p id="070f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有什么问题吗？没问题，在评论区问就行了。我会回答一切。</p><pre class="kk kl km kn gu nd lz ne nf aw ng bi"><span id="0387" class="nh md iu lz b gz ni nj l nk nl"><strong class="lz iv">Want to Connect?</strong></span><span id="be1a" class="nh md iu lz b gz nm nj l nk nl">Feel free to connect with me on <a class="ae kz" href="https://www.paulsblog.dev" rel="noopener ugc nofollow" target="_blank">my blog</a>, <a class="ae kz" href="https://www.linkedin.com/in/paulknulst/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>, and <a class="ae kz" href="https://twitter.com/paulknulst" rel="noopener ugc nofollow" target="_blank">Twitter</a>.</span></pre></div><div class="ab cl nn no hy np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="in io ip iq ir"><p id="239e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="nu">这篇文章也在这两个地方发表:</em></p><ul class=""><li id="65d3" class="nv nw iu lc b ld le lg lh lj nx ln ny lr nz lv oa ob oc od bi translated"><em class="nu">在我的博客上:</em><a class="ae kz" href="https://www.paulsblog.dev/how-to-build-a-video-player-in-vanilla-javascript-and-html5/" rel="noopener ugc nofollow" target="_blank"><em class="nu">https://www . paulsblog . dev/how-to-build-a-video-player-in-vanilla-JavaScript-and-html 5/</em></a></li><li id="da4d" class="nv nw iu lc b ld oe lg of lj og ln oh lr oi lv oa ob oc od bi translated"><em class="nu">在我的Img.ly博客上:</em><a class="ae kz" href="https://img.ly/blog/how-to-build-video-player-in-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="nu">https://img . ly/blog/how-to-build-video-player-in-JavaScript/</em></a></li></ul></div></div>    
</body>
</html>