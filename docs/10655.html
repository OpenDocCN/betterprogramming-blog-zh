<html>
<head>
<title>Colorizing Xcode Logs to Improve Log Tracing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Xcode日志着色以改进日志跟踪</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/colorizing-xcode-logs-to-improve-log-tracing-e67fbc727fd6?source=collection_archive---------7-----------------------#2022-01-20">https://betterprogramming.pub/colorizing-xcode-logs-to-improve-log-tracing-e67fbc727fd6?source=collection_archive---------7-----------------------#2022-01-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ef87" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我制作了有史以来最丰富多彩的Xcode日志工具</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f2faab74ec601b5ba2e60dc52148b5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-QMmLhxYcZH9ot6WQqF5Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从MacOS终端Logify使用截图。</p></figure><p id="fca1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如之前在很多开发者论坛上讨论的，Xcode从Xcode 8开始就不支持控制台着色了。因为苹果已经从Xcode中移除了插件——原因是苹果非常在意的安全性——并引入了Xcode扩展。Xcode扩展没有提供任何给终端着色的解决方案。简而言之，目前没有内置的支持来实现这一点。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="24fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我的职业生涯中，我有一个Android开发人员的经历，我使用了很多Android Studio，并且仍然钦佩IntelliJ为开发人员所做的事情。当我作为一名iOS开发人员在日常生活中跟踪日志时，我确实怀念IntelliJ的一些伟大特性。其中之一就是高级日志记录。</p><p id="39ea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">幸运的是，苹果在Swift中支持Unicode字符。所以你可以用几个与日志类型相关的表情符号来区分你的日志。我是按照这种方式，但解决方案不是可读性最好的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ly"><img src="../Images/99b9bf59640c0922825a6cf7df63262e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ad1YM3pU7lTpw71SDOU1JA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae lz" href="https://github.com/robbiehanson/XcodeColors/issues/88" rel="noopener ugc nofollow" target="_blank">https://github.com/robbiehanson/XcodeColors/issues/88</a></p></figure><p id="eb47" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，我想建立一个解决方案，读取系统日志，过滤相关的应用程序，并立即显示它们。</p><h1 id="f34e" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">满足逻辑化</h1><p id="3717" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">Logify 是一个易于使用和实现的CLI工具。最重要的是，如果您使用<code class="fe mx my mz na b">print(_:)</code>方法收集日志，Logify不起作用。你必须用苹果提供的<code class="fe mx my mz na b">OSLog</code>框架登录。</p><p id="fbe4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有两种类型的日志记录。如果你的应用支持下面的iOS 14并且很可能支持，你应该使用<code class="fe mx my mz na b">os_log</code></p><h2 id="ba49" class="nb mb iq bd mc nc nd dn mg ne nf dp mk le ng nh mm li ni nj mo lm nk nl mq nm bi translated">使用导入os.log或OSLog</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="fbb1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你在包标识符方面遵循最佳实践，你的标识符就像那个<code class="fe mx my mz na b">com.company.product</code>或<code class="fe mx my mz na b">com.company.subdomain.product</code>。</p><p id="cde4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我的例子<em class="np"> : </em> <code class="fe mx my mz na b">com.github.furkankaplan.bispy</code> <em class="np">。</em>您可以将它分为两部分，因为子系统和类别如上所示。只需用您的包标识符替换它。</p><h2 id="aa8c" class="nb mb iq bd mc nc nd dn mg ne nf dp mk le ng nh mm li ni nj mo lm nk nl mq nm bi translated">使用记录器API</h2><p id="989b" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">如果你的最低SDK是iOS 14及以上，有一个更现代的方式有利于苹果在OSLog上的API改进，<code class="fe mx my mz na b">Logger</code> <em class="np">。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="31da" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可能想知道为什么在两个例子中使用了<code class="fe mx my mz na b">encode</code>扩展？现在，可能希望在日志中看到请求和响应JSON输出，以便进行错误跟踪。例如，您的日志可能有换行符。系统日志不是逐行读取的。有时，几个日志消息被组合在一行中读取。所以解析算法应该知道这个问题的答案:</p><blockquote class="nq nr ns"><p id="919f" class="kv kw np kx b ky kz jr la lb lc ju ld nt lf lg lh nu lj lk ll nv ln lo lp lq ij bi translated">是日志消息中出现了“\n”字符还是拆分了几条日志消息？</p></blockquote><p id="8cb2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是为什么您必须为这两个解决方案添加下面的扩展。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="c136" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">共有4种类型的消息:<code class="fe mx my mz na b">.default</code> <em class="np">、</em> <code class="fe mx my mz na b">.info</code> <em class="np">、</em> <code class="fe mx my mz na b">.error</code>和<code class="fe mx my mz na b">.fault</code>。您可以通过分叉存储库来更改每种类型消息的颜色。</p><p id="3c66" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些都不是改变字体颜色内置解决方案。</p><p id="bf06" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里是给Xcode日志着色的<a class="ae lz" href="https://github.com/furkankaplan/Logify" rel="noopener ugc nofollow" target="_blank"> Logify Github库</a> <strong class="kx ir"> </strong>。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="a90e" class="ma mb iq bd mc md nw mf mg mh nx mj mk jw ny jx mm jz nz ka mo kc oa kd mq mr bi translated">如何使用Logify cli？</h1><p id="1181" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">设置好应用后，打开终端app。运行以下命令:</p><pre class="kg kh ki kj gt ob na oc od aw oe bi"><span id="8d87" class="nb mb iq na b gy of og l oh oi">curl -L <a class="ae lz" href="https://raw.githubusercontent.com/furkankaplan/Logify/main/Logify" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/furkankaplan/Logify/main/Logify</a> --output Logify</span></pre><p id="4ded" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下载完成后，运行以下命令:</p><pre class="kg kh ki kj gt ob na oc od aw oe bi"><span id="ccce" class="nb mb iq na b gy of og l oh oi">chmod +x Logify</span></pre><p id="f4d1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为最后一步，将文件移动到<code class="fe mx my mz na b">/usr/local/bin</code></p><pre class="kg kh ki kj gt ob na oc od aw oe bi"><span id="9291" class="nb mb iq na b gy of og l oh oi">mv Logify /usr/local/bin</span></pre><p id="37aa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">开始了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/9b2052168c0b3482116c70e6706ccafa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3NP1IrEbZUqdoyGAJvlH0g.png"/></div></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="9965" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您也可以使用<code class="fe mx my mz na b">log stream</code> shell命令来查看即时日志，但是Logify是为了给Xcode日志着色和提高可读性而创建的。</p><p id="2f4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读。</p><pre class="kg kh ki kj gt ob na oc od aw oe bi"><span id="c76b" class="nb mb iq na b gy of og l oh oi"><strong class="na ir">Want to Connect?</strong></span><span id="8807" class="nb mb iq na b gy ok og l oh oi">Feel free to contact with me at Twitter <a class="ae lz" href="https://twitter.com/kaplan_dev" rel="noopener ugc nofollow" target="_blank">@kaplan_dev</a>.</span></pre></div></div>    
</body>
</html>