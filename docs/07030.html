<html>
<head>
<title>Why Shared Databases Are a Thing of the Past</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么共享数据库已经成为过去</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/shared-databases-are-a-thing-of-the-past-a9b186c0271e?source=collection_archive---------9-----------------------#2020-11-30">https://betterprogramming.pub/shared-databases-are-a-thing-of-the-past-a9b186c0271e?source=collection_archive---------9-----------------------#2020-11-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9216" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">有了Spawn，不再需要共享开发数据库</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/582a3b88ecb7d5727b34854f3bfa8a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O11MkoPKHNPRsIOY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">达里奥·维罗内西在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="0dc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">共享数据库范例是一种常见的开发工作流，其中团队中的所有开发人员共享对一个数据库的访问，他们都使用该数据库来支持应用程序开发。这种工作流程通常被采用，因为它很简单。不需要为每个工程师配置基础架构，因此设置成本最低。但这给工程师们带来了痛苦和瓶颈，他们总是面临着做出破坏彼此工作的改变的风险。</p><p id="c48d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="http://spawn.cc" rel="noopener ugc nofollow" target="_blank"> Spawn </a>让我们能够轻松地为开发提供数据库，让每个工程师都拥有自己的专用数据库环境，而无需提供任何额外的基础设施。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="086a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">共享数据库</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/52b4a3dc652fff060a7b7ab371782203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQYsAaNFrgz8X7pQRRg0Gg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">开发人员使用共享数据库。作者照片。</p></figure><p id="043f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">共享一个数据库通常涉及到生产数据库的一个副本(适当地屏蔽掉敏感数据，并可能子集化以减小其大小)，该副本由团队中的所有开发人员共享。共享数据库的好处在于需要管理的基础设施更少，开发人员只需将连接字符串插入共享数据库，就可以快速启动并运行。</p><p id="7a3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，虽然这种设置可能适用于非常小的团队或者数据库更改非常少的团队，但是这种方法很快会遇到几个问题:</p><ul class=""><li id="694d" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">踩着对方的脚趾:开发人员可能会尝试对共享数据库进行冲突性的更改，冒着相互抹杀工作的风险。</li><li id="7b1f" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">不能安全地应用迁移:更改一个特性的数据库模式可能会破坏其他代码。</li><li id="c923" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">未知状态:当数据库的状态可能在单个开发人员的控制之外从一个时刻改变到下一个时刻时，错误再现和应用程序测试变得更加困难。</li></ul><p id="e9e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着容器化使得数据库供应比以往更加容易，消除了基础设施供应的开销，共享数据库范式越来越过时。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0898" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">每个开发人员一个数据库</h1><p id="6eb4" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">在这种模式下，团队中的每个开发人员都有他们自己的(屏蔽的)生产数据库副本来工作。这允许开发人员独立地对他们的数据库副本进行更改，消除了因争用共享数据库而产生的问题。</p><p id="af31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这在传统上更加困难，因为我们必须为每个开发人员提供类似生产的应用程序数据库的副本。然而，通过使用<a class="ae kv" href="http://spawn.cc" rel="noopener ugc nofollow" target="_blank"> Spawn </a>，我们可以从命令行提供临时数据库实例，而不需要设置或托管任何额外的基础设施:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/5e8ab017ce7df02a42967bec20f76ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ATdvMSv_1QBzZ-ih_ChNg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">开发人员使用Spawn来提供专用数据库。作者照片。</p></figure><p id="e9d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用Spawn，我们可以每天从生产中创建一个<a class="ae kv" href="https://spawn.cc/docs/concepts-data-image" rel="noopener ugc nofollow" target="_blank">数据映像</a>(作为预定构建管道的一部分)，并使这个映像对开发人员和CI系统都可用——所有这些都使用<a class="ae kv" href="http://spawn.cc/docs" rel="noopener ugc nofollow" target="_blank"> Spawn CLI </a>。可以从备份文件或脚本创建映像。然后，每个开发人员都可以基于这个映像提供他们自己的数据库，而不需要离开命令行，就像运行<code class="fe nl nm nn no b">spawnctl create data-container &lt;prod-image&gt;</code> <em class="np">一样简单。</em></p><p id="1bcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在幕后，Spawn在Kubernetes集群中创建和托管一个容器化的数据库实例，将开发团队从管理他们自己的数据库基础设施的负担中解放出来，并获得开发专用数据库的所有好处。</p><p id="4404" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用Spawn对数据库供应有几个好处:</p><ul class=""><li id="dc70" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">快速配置任意大的数据库:Spawn使用块级文件系统快照来恢复和写入数据库。这意味着即使是最大的映像也可以在几秒钟内完成资源调配，并且写入速度保持不变。</li><li id="c6d6" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">快照和恢复:可以使用Spawn CLI <code class="fe nl nm nn no b">spawnctl save</code>命令随时为数据库拍摄快照。用<code class="fe nl nm nn no b">spawnctl reset</code>回复到任何以前的状态。可以放心地更改数据库，因为返回总是很容易。</li><li id="1a86" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">没有基础设施:Spawn负责数据库供应和托管，允许开发人员专注于代码。</li><li id="8e21" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">同一个映像的多个副本:一个映像可用于提供所需数量的数据库—所有数据库都有自己的连接字符串，彼此独立且隔离。</li><li id="03cb" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">多数据库支持:Spawn支持SQL Server、Postgres、MySQL、Redis和Mongo。</li></ul><p id="f543" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解更多关于Spawn的信息，请查看<a class="ae kv" href="http://spawn.cc" rel="noopener ugc nofollow" target="_blank">的网站</a>和文档<a class="ae kv" href="http://spawn.cc/docs" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>