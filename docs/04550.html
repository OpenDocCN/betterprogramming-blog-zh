<html>
<head>
<title>Build and Publish NPM Packages in a Few Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在几分钟内构建并发布NPM包</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-and-publish-npm-packages-in-a-few-minutes-17494a30a51f?source=collection_archive---------28-----------------------#2020-04-20">https://betterprogramming.pub/build-and-publish-npm-packages-in-a-few-minutes-17494a30a51f?source=collection_archive---------28-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ea5e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">专注于npm软件包的功能，而不必费力进行设置或配置</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/df7d951d4cd3352510ebd3c90948336d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kprguM9-TaVmVO2zDGQkMA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由来自<a class="ae ky" href="https://www.pexels.com/photo/white-generator-set-near-industrial-machines-1468390/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae ky" href="https://www.pexels.com/@doozydoom?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Markus Bürkle </a>拍摄。</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="1908" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">快速开始的需要</h1><p id="1d29" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">当你突然有了一个灵感来建立一个项目，或者你需要为工作建立一个项目时，通常会有一些摩擦来启动事情。您可以多花几分钟到一个小时来设置开发环境，查找一些教程，然后根据您的需要进行调整。接下来你知道，你遇到了一个问题，失去了灵感，直到你意识到你不再想继续下去。</p><p id="b2f8" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">最重要的是，即使在开发了功能之后，将项目交付给用户也需要一些重复性的工作。</p><p id="1289" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这一点都不理想。你不想被困在样板代码的重复工作中。您希望通过致力于功能来专注于解决实际问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/9dfc9c444d215d7f3c52dec5e97eebe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*5smo8LCkpmvT5X-U_KU1Tg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">停留在入门阶段。</p></figure><p id="3315" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果有方法可以让你快速开始并部署你的项目，那么你可以测试更多你的想法。谁知道呢？你的一个想法可能会成为一个有影响力的开源项目或改变生活的产品。</p><p id="143e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这将是理想的情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/e1c1f9701b6ce8d5b5b962e0be539c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*xOo9AR6G0P5vJmFA8JizVw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尽早完成端到端流程。处理功能，部署，然后重复。</p></figure><p id="b11f" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">拥有一个可以解决“入门”和“部署或发布”阶段的现成的cookiecutter模板可以帮助您走向成功。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="717f" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">逐步指南</h1><p id="3c1f" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在本文中，我想分享一个我用来构建和发布npm包的cookiecutter模板。</p><p id="de57" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">打开IDE和终端。我们开始吧！</p><h2 id="a0fb" class="nb lh it bd li nc nd dn lm ne nf dp lq mh ng nh ls ml ni nj lu mp nk nl lw nm bi translated">规范</h2><ul class=""><li id="7345" class="nn no it ma b mb mc me mf mh np ml nq mp nr mt ns nt nu nv bi translated">我已经在npm 6.13.4和Node v10.19.0上测试过了。</li><li id="0a72" class="nn no it ma b mb nw me nx mh ny ml nz mp oa mt ns nt nu nv bi translated">起始代码在TypeScript中。</li></ul><h2 id="798d" class="nb lh it bd li nc nd dn lm ne nf dp lq mh ng nh ls ml ni nj lu mp nk nl lw nm bi translated">开始— Cookiecutter</h2><p id="938b" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated"><a class="ae ky" href="https://cookiecutter.readthedocs.io/en/1.7.0/README.html" rel="noopener ugc nofollow" target="_blank"> Cookiecutter </a>是一个用于创建项目模板的Python命令行工具。它支持配置，允许您设置在项目中使用的值和其他方便的功能，如钩子。</p><p id="c25d" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><em class="ob">先决条件:Python已经安装并设置好。如果还没有，参考</em> <a class="ae ky" href="https://cookiecutter.readthedocs.io/en/1.7.0/installation.html" rel="noopener ugc nofollow" target="_blank"> <em class="ob">本指南</em> </a> <em class="ob">。</em></p><p id="9352" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">要安装它，只需运行:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="ecd5" class="nb lh it od b gy oh oi l oj ok">pip install cookiecutter</span></pre><p id="7f9d" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">“Cookie-cut”NPM包模板:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="c876" class="nb lh it od b gy oh oi l oj ok">cookiecutter <a class="ae ky" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:ardydedase/cookiecutter-npm-package.git</span></pre><p id="5beb" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">系统将提示您输入以下值:</p><ul class=""><li id="b6c5" class="nn no it ma b mb mu me mv mh ol ml om mp on mt ns nt nu nv bi translated"><code class="fe oo op oq od b">github_username</code> : GitHub用户名或您想要创建存储库的组织。</li><li id="1ba1" class="nn no it ma b mb nw me nx mh ny ml nz mp oa mt ns nt nu nv bi translated"><code class="fe oo op oq od b">project_name</code>:你想怎么称呼你的项目。<code class="fe oo op oq od b">project_slug</code>的默认值将基于此。</li><li id="f384" class="nn no it ma b mb nw me nx mh ny ml nz mp oa mt ns nt nu nv bi translated"><code class="fe oo op oq od b">project_slug</code>:默认为虚线框<code class="fe oo op oq od b">project_name</code>。这将被用作包名，所以请确保您选择的包名还没有被使用。你可以在<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">npmjs.com</a>上查看。</li><li id="7cf6" class="nn no it ma b mb nw me nx mh ny ml nz mp oa mt ns nt nu nv bi translated"><code class="fe oo op oq od b">project_short_description</code> : <em class="ob"> </em>默认情况下将在生成的项目自述文件中使用的简短描述。</li><li id="c27a" class="nn no it ma b mb nw me nx mh ny ml nz mp oa mt ns nt nu nv bi translated"><code class="fe oo op oq od b">version</code>:NPM包的版本号。</li></ul><p id="b26b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这些都有默认值，您可以在<code class="fe oo op oq od b"><a class="ae ky" href="https://github.com/ardydedase/cookiecutter-npm-package/blob/master/cookiecutter.json" rel="noopener ugc nofollow" target="_blank">cookiecutter.json</a></code> <a class="ae ky" href="https://github.com/ardydedase/cookiecutter-npm-package/blob/master/cookiecutter.json" rel="noopener ugc nofollow" target="_blank">文件</a>中找到，这使得测试和<a class="ae ky" href="https://github.com/ardydedase/cookiecutter-npm-package/blob/master/.github/workflows/main.yml#L39" rel="noopener ugc nofollow" target="_blank"> CI构建</a>非常方便。它将在命令行中这样提示，其中<code class="fe oo op oq od b">github_username</code> <em class="ob"> </em>的默认值将是<code class="fe oo op oq od b">ardydedase</code>，您需要用自己的值替换它:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="4cf1" class="nb lh it od b gy oh oi l oj ok">github_username [ardydedase]:</span></pre><p id="d2df" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在cookie-cut之后，它将生成一个以<code class="fe oo op oq od b">project_slug</code> <em class="ob"> </em>值命名的文件夹。将当前工作目录更改为生成的文件夹。</p><p id="9fad" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我们的cookiecutter生成了一个样例参考包，你可以参考GitHub 上的<a class="ae ky" href="https://github.com/ardydedase/reference-package" rel="noopener ugc nofollow" target="_blank">。我使用这个</a><a class="ae ky" href="https://itnext.io/step-by-step-building-and-publishing-an-npm-typescript-package-44fe7164964c" rel="noopener ugc nofollow" target="_blank">一步一步的指南</a>来构建这个包，并根据我自己的喜好做了一些调整。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="b842" class="nb lh it od b gy oh oi l oj ok">cd <em class="ob">&lt;replace with your project_slug&gt;</em></span></pre><p id="e85c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">现在我们有了npm包的起始代码，让我们开始开发吧。</p><h2 id="7136" class="nb lh it bd li nc nd dn lm ne nf dp lq mh ng nh ls ml ni nj lu mp nk nl lw nm bi translated">开发—国家预防机制包</h2><p id="55f9" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这将涵盖我们需要运行的命令，以启动并运行我们的项目。如果您以前做过一些Node.js开发，这一部分应该很容易。</p><p id="6712" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">安装npm依赖项:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="af78" class="nb lh it od b gy oh oi l oj ok">npm install</span></pre><p id="0f4c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">运行我们的构建。这将在<code class="fe oo op oq od b">dist</code>文件夹中生成带有类型定义的编译代码:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="05fd" class="nb lh it od b gy oh oi l oj ok">npm run build</span></pre><p id="113b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">格式和林挺:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="9e54" class="nb lh it od b gy oh oi l oj ok">npm run lint<br/>npm run format</span></pre><p id="2123" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">运行测试:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="5a80" class="nb lh it od b gy oh oi l oj ok">npm test</span></pre><p id="a29c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在这个阶段，您可以在<code class="fe oo op oq od b">src</code>文件夹中的starter示例之上开始构建您的域功能，这是一个返回GitHub repos列表的简单函数。或者，您可以将软件包的初始版本发布到npmjs.com。</p><h2 id="971b" class="nb lh it bd li nc nd dn lm ne nf dp lq mh ng nh ls ml ni nj lu mp nk nl lw nm bi translated">发布您的npm包</h2><p id="a43e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如果您没有npm帐户，<a class="ae ky" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank">创建一个</a>或运行命令<code class="fe oo op oq od b">npm adduser</code>。</p><p id="5ad0" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果您已经有一个帐户，请通过运行以下命令登录，并输入您的登录详细信息:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="59aa" class="nb lh it od b gy oh oi l oj ok">npm login</span></pre><p id="6c44" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">成功登录后，发布包:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="485b" class="nb lh it od b gy oh oi l oj ok">npm publish</span></pre><p id="1866" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">你现在应该可以<code class="fe oo op oq od b">npm install</code>你发布的包了。有一个名为<a class="ae ky" href="https://www.npmjs.com/package/reference-package" rel="noopener ugc nofollow" target="_blank">的npm包引用包</a>就是从这个cookiecutter生成的。<a class="ae ky" href="https://github.com/ardydedase/cookiecutter-npm-package/blob/master/example/index.js" rel="noopener ugc nofollow" target="_blank"> example/index.js </a>上有一个使用示例。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="aec9" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">下一步是什么</h1><p id="3c9e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">你可以在GitHub 上了解更多关于这个cookiecutter模板<a class="ae ky" href="https://github.com/ardydedase/cookiecutter-npm-package" rel="noopener ugc nofollow" target="_blank">的信息。</a></p></div></div>    
</body>
</html>