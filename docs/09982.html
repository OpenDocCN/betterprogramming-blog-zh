<html>
<head>
<title>Everyone Hates systemd</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">每个人都讨厌systemd</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-most-linux-users-hate-systemd-c591eef3d034?source=collection_archive---------1-----------------------#2021-11-10">https://betterprogramming.pub/why-most-linux-users-hate-systemd-c591eef3d034?source=collection_archive---------1-----------------------#2021-11-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="82e9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">探索Linux最激烈的圣战之一</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a6c36dd991164fe130fcb4612d94121d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rNX1Ns0BtYJ1j-yP5BIfqg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安德烈·亨特在<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="0b8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有一件事是技术人员喜欢参与的，那就是圣战。</p><p id="38d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有什么能比得上那种自以为是的感觉，把工作日的一半时间花在告诉各种网络陌生人他们是白痴上。</p><p id="920c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论是嘲讽最新的Vim用户仍然停留在他们的终端；与你的Windows好友分享关于恶意软件的最新信息；或者丁池·马科斯是穷人的免费赠品，同时嘲笑苹果粉丝为它支付了过高的价格。</p><p id="45e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个技术领域都有一场圣战。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/090c2ed2865e3c48a7fd618b8fedec41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*UvLzdKXcBJ5YVzaR.jpg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图像由作者创建，但灵感来自众所周知的模因</p></figure><p id="f232" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，有一场圣战你可能没听说过。从2010年开始，这已经不是什么新鲜事了。但就争夺而言，它的排名接近榜首。</p><p id="fdf2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是<code class="fe lw lx ly lz b"><a class="ae ky" href="https://systemd.io/" rel="noopener ugc nofollow" target="_blank">systemd</a></code>。</p><p id="9ae6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一个狂热的Linux用户，那么你已经很了解<code class="fe lw lx ly lz b">systemd</code>的知识了。在这种情况下，你可以跳过这篇文章，直接去评论你的观点。我知道你想。</p><p id="36f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果你是一个像我一样对Linux只有肤浅了解的软件工程师，那么你可能不熟悉<code class="fe lw lx ly lz b">systemd</code>肮脏的过去。</p><p id="a6ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直到几年前，当我和一些工作中的系统管理员一起喝酒时，我才意识到这出戏。</p><p id="2689" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“人类，螺丝<code class="fe lw lx ly lz b">systemd</code>。这是Linux遭遇的最糟糕的事情，”其中一个人滔滔不绝地说道。他无数的空瓶子给了他向唱诗班布道的勇气，因为大多数其他人都点头同意。</p><p id="5b6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我也点头附和，尽管我不知道他在说什么。那天晚上回到家，我在谷歌上快速搜索了一下，了解了一下大致情况。哦，天啊，它把我带进了兔子洞。或者粪坑，看你怎么看了。</p><p id="f98a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然关于这件事已经写了很多，但我还是忍不住发表了自己的意见。这篇文章将讲述Linux init系统的历史，<code class="fe lw lx ly lz b">systemd</code>的崛起，以及为什么它在各个Linux社区变得如此声名狼藉。</p><p id="c0ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不想挑起任何旧仇。这篇文章的目标是让技术领域的不同人士了解Linux生态系统的核心组件。</p><p id="5ae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将尽可能不偏不倚地陈述事实，同时仍然使其相对简短和有趣。我确实对那件事有一些想法，但是我将把那些留到最后。</p><p id="b579" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:虽然我对这个话题做了很多研究，但我不是专家。如果你发现明显的错误或不准确，请让我知道，我会更新它。</p><h1 id="7073" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">systemd之前Linux init系统的历史</h1><p id="ef21" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">要了解<code class="fe lw lx ly lz b">systemd</code>的现在，我们必须了解它的过去，以及最初为什么要创造它。为了做到这一点，我们需要了解init系统。</p><p id="c121" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你打开电脑时，会发生很多事情。其中之一是创建第一个进程，也称为PID1。之所以称为PID1，是因为它是ID为1的进程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/5ef64567ae1fa63dec3d94fb9bfb2757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*lE4T8mrURSSXwQ_f8h3f_g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0368" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PID1对于操作系统来说非常重要。它是整个系统的父进程。一般来说，当你在电脑上工作时，你会使用很多进程。</p><p id="5b43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你在一个终端中运行<code class="fe lw lx ly lz b">ps aux</code>时，你可以看到它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/b95c6b84acf6af899ab06693bab35353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bn6UH6CWhj5DK1lvWW1ffw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“ps aux”命令的输出示例—作者提供的图像</p></figure><p id="c25b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有不是PID1的进程都是它的直接或间接派生。</p><p id="1046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去，PID1扮演着简单而重要的角色。它是一个后台运行的守护进程，执行一系列启动脚本来引导系统中的其余服务。</p><p id="4d94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然简单，但也需要稳定。因为PID1是所有其他进程的父进程，所以如果它崩溃或退出，它将带走系统的其余部分。在Linux历史的大部分时间里，各种发行版都使用基于Unix的System V的init系统，称为<code class="fe lw lx ly lz b"><a class="ae ky" href="https://wiki.archlinux.org/title/SysVinit" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">sysvinit</strong></a></code>。</p><p id="f24a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">sysvinit</code>非常适合20世纪80年代至21世纪初的计算机，因为它意味着在静态环境中运行。它以预定义的顺序同步发布启动脚本。在当前脚本完成之前，它不会执行下一个脚本。这种方法效率低，速度慢，但当时还不错。</p><p id="7af8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，随着时间的推移，硬件变得更加动态，Linux内核变得更加异步。设备会在不可预知的时间启动，导致发行版开发者不得不<a class="ae ky" href="https://www.reddit.com/r/archlinux/comments/4lzxs3/why_did_archlinux_embrace_systemd/" rel="noopener ugc nofollow" target="_blank">创建黑客和解决方案</a>。此外，用户希望能够在机器启动后插入外部驱动器。<code class="fe lw lx ly lz b">sysvinit</code>不是为处理这个而设计的。</p><p id="b223" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，<code class="fe lw lx ly lz b">sysvinit</code>不是一个功能齐全的服务经理。它不能完全跟踪进程，导致孤立的进程。它也没有很好地处理依赖性需求。</p><p id="bfba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于各种Linux发行版的维护者来说，很明显<code class="fe lw lx ly lz b">sysvinit</code>已经过时，需要被替换。</p><h1 id="de01" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">systemd的兴起</h1><p id="ffe6" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">由于<code class="fe lw lx ly lz b">sysvinit</code>的缺点，人们开始寻找精神上的接班人。创建了几个项目来继承这个衣钵。这些项目中最引人注目的是新贵<a class="ae ky" href="http://upstart.ubuntu.com/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a>。</p><p id="f699" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Upstart是对<code class="fe lw lx ly lz b">sysvinit</code>的一大改进。它使用了一个事件模型，能够根据系统中的事件启动和停止流程。这使得它能够利用现代硬件的异步特性，而不需要复杂的变通方法。</p><p id="c485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在其巅峰时期，Upstart被整合到各种Linux发行版中，如Ubuntu、Fedora、RHEL和openSUSE。但是它也有缺点。Upstart没有利用并行性，使得启动过程比需要的要慢。它也有一些值得注意的错误。</p><p id="9879" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">市场上仍有竞争的空间。输入<code class="fe lw lx ly lz b">systemd</code>。</p><p id="2cc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Lennart Poettering和Kay Sievers创造了<code class="fe lw lx ly lz b">systemd</code> 2010，并大量模仿苹果的<a class="ae ky" href="https://en.wikipedia.org/wiki/Launchd" rel="noopener ugc nofollow" target="_blank">发布会</a>。它旨在改进init进程——很像Upstart。然而，与新贵不同的是，<code class="fe lw lx ly lz b">systemd</code>以一种完全不同的方式去做这件事。</p><p id="86dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Lennart Poettering的帖子<a class="ae ky" href="http://0pointer.de/blog/projects/systemd.html" rel="noopener ugc nofollow" target="_blank">反思PID1 </a>中，他指出:</p><blockquote class="na nb nc"><p id="c7c9" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">对于快速有效的启动，两件事至关重要:</p><p id="032f" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">-少启动<strong class="lb iu">多启动</strong>。</p><p id="5ec2" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">-并启动<strong class="lb iu">多</strong>在<em class="it">并联</em>。</p></blockquote><p id="618c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">systemd</code>如何工作是一个令人困惑的问题。它有时被称为系统引导的依赖或基于事件的模型。虽然使用<code class="fe lw lx ly lz b">systemd</code>的发行版可能会以这种方式使用它，但是<code class="fe lw lx ly lz b">systemd</code>是围绕<a class="ae ky" href="https://0pointer.de/blog/projects/socket-activation.html" rel="noopener ugc nofollow" target="_blank">套接字激活</a>设计的。</p><p id="c21b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然深入研究套接字激活超出了本文的范围，但我可以给出一个简短的概要。</p><p id="156b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当计算机启动时，它会产生各种服务和进程。这些进程相互连接，并通过一个<a class="ae ky" href="https://www.geeksforgeeks.org/socket-in-computer-network/" rel="noopener ugc nofollow" target="_blank">套接字</a>相互对话，这个套接字本质上是一个用于通信的缓冲通道。如果一个服务试图与另一个尚未激活的服务连接或通信，它将失败。然而，<code class="fe lw lx ly lz b">systemd</code>所做的是同时激活所有的服务套接字。</p><p id="902c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果一个服务试图与一个不活动的服务通信，消息将在套接字中缓冲，直到服务准备好。这允许<code class="fe lw lx ly lz b">systemd</code>并行启动所有不同的服务和进程，从而加快启动速度。</p><p id="6e09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如<a class="ae ky" href="https://0pointer.net/blog/projects/systemd.html" rel="noopener ugc nofollow" target="_blank">反思PID 1 </a>中所述:</p><blockquote class="na nb nc"><p id="9d5e" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">更多地并行启动意味着，如果我们必须运行某个程序，我们不应该序列化它的启动(就像sysvinit所做的那样)，而是同时运行它，以便可用的CPU和磁盘IO带宽达到最大限度，从而使总体启动时间最小化。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/c1e8d85da7a2928f45af3f34e39205ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hIT3WgO8WjtLcotYeBMcFQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">各种init系统对比—图片由作者提供— <a class="ae ky" href="https://0pointer.de/blog/projects/socket-activation.html" rel="noopener ugc nofollow" target="_blank">受</a>启发</p></figure><p id="91c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些使得<code class="fe lw lx ly lz b">systemd</code>成为一个高效的初始化进程。然而，<code class="fe lw lx ly lz b">systemd</code>并没有就此止步。</p><p id="049b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Poettering认为，PID1有一个特殊的作用，具有独特的特权，这是利用不足。除了高效启动系统，他还设想将<code class="fe lw lx ly lz b">systemd</code>作为构建操作系统的基础和平台。</p><p id="673f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">受诗人眼光的影响，<code class="fe lw lx ly lz b">systemd</code>的范围逐年扩大。它已经从一个init系统扩展到一个包含69个独立二进制文件的完整软件套件。从它自己的网站:</p><blockquote class="na nb nc"><p id="6c5d" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">systemd是Linux系统的一套基本构建块。它提供了一个系统和服务管理器，作为PID 1运行，并启动系统的其余部分。</p><p id="a5d5" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">[systemd包括]一个日志守护程序，用于控制基本系统配置(如主机名、日期、区域设置)的实用程序，维护已登录用户和正在运行的容器和虚拟机的列表，系统帐户、运行时目录和设置，以及用于管理简单网络配置、网络时间同步、日志转发和名称解析的守护程序。</p></blockquote><p id="fe29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然<code class="fe lw lx ly lz b">systemd</code>的功能集自2010年以来有所增加，但它的受欢迎程度和影响力也在增加。</p><p id="ac65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于Poettering与红帽的关系，Fedora在2011年创立后不久就采用了<code class="fe lw lx ly lz b">systemd</code>。Arch和openSUSE在2012年迅速跟进。Debian坚持了一段时间，但最终，它和Ubuntu在2015年跟进。</p><p id="9997" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在撰写本文时，<a class="ae ky" href="https://en.wikipedia.org/wiki/Systemd#Adoption" rel="noopener ugc nofollow" target="_blank"> 13个Linux发行版默认运行</a><code class="fe lw lx ly lz b"><a class="ae ky" href="https://en.wikipedia.org/wiki/Systemd#Adoption" rel="noopener ugc nofollow" target="_blank">systemd</a></code><a class="ae ky" href="https://en.wikipedia.org/wiki/Systemd#Adoption" rel="noopener ugc nofollow" target="_blank"/>。虽然我找不到确切的百分比，但可以肯定地说，绝大多数Linux用户都在使用<code class="fe lw lx ly lz b">systemd</code>。</p><p id="b1a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">毫无疑问是有影响力的，但是这种受欢迎是有代价的。</p><h1 id="498e" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">围绕systemd的戏剧</h1><p id="6eac" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">说<em class="ma">大家</em>都讨厌<code class="fe lw lx ly lz b">systemd</code>显然言过其实。大多数Linux用户要么喜欢它，要么不关心它。</p><p id="dae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，它的通过充满了戏剧性和混乱。少数敢于直言的人开始诅咒自己的名字。他们创建了<a class="ae ky" href="https://ihatesystemd.com/" rel="noopener ugc nofollow" target="_blank">多个</a> <a class="ae ky" href="https://web.archive.org/web/20140424123646/http://boycottsystemd.org/" rel="noopener ugc nofollow" target="_blank">网站</a> <a class="ae ky" href="https://nosystemd.org/" rel="noopener ugc nofollow" target="_blank">指出其各种缺陷</a>和<a class="ae ky" href="https://en.wikipedia.org/wiki/Devuan" rel="noopener ugc nofollow" target="_blank"> systemd-free Linux forks </a>。有些人甚至亲自侮辱它的创造者。甚至已经到了死亡威胁介入的地步。</p><p id="2a87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不仅仅是软件上的分歧。值得一问的是，为什么会这样，怎么会这样。</p><p id="fb0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过我的研究，我发现了许多对<code class="fe lw lx ly lz b">systemd</code>的批评，但它们似乎都分为三个不同的类别。</p><h1 id="bb90" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创造者</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/07de759d59233f1599c71cf308ffe258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDBxPTz3FbIinrZ_or0JfQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lennart poeting—图片来源:<a class="ae ky" href="https://en.wikipedia.org/wiki/Lennart_Poettering#/media/File:Lennart_poettering.jpg" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></figure><p id="fc40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创造者和围绕<code class="fe lw lx ly lz b">systemd</code>的社区是愤怒的共同来源。Linux的创造者Linus Torvalds在Linux邮件列表上的一次激烈的交流中，著名地称Kay Sievers为“该死的首席女演员”<a class="ae ky" href="http://lkml.iu.edu//hypermail/linux/kernel/1404.0/01488.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="4ec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然凯·西弗斯是<code class="fe lw lx ly lz b">systemd</code>的联合创作者之一，但伦纳特·诗化是它的代言人。因此，他受到了强烈的反对。Poettering面对自由/开源软件群体中许多人的愤怒的主要原因之一是他的公众形象。</p><p id="6775" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为<code class="fe lw lx ly lz b">systemd</code>的首席开发者，伦纳特·庞特是一个公众人物。他有自己的<a class="ae ky" href="https://en.wikipedia.org/wiki/Lennart_Poettering" rel="noopener ugc nofollow" target="_blank">维基百科页面</a>，关注的<a class="ae ky" href="https://twitter.com/pid_eins" rel="noopener ugc nofollow" target="_blank">适度推特，以及</a><a class="ae ky" href="https://0pointer.net/blog/" rel="noopener ugc nofollow" target="_blank">分享自己想法的博客</a>。</p><p id="ead2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我读过他的一些帖子。它们构造得非常好，经过深思熟虑。如果你对他的唯一接触是来自那些作品，你可能会想所有的仇恨从何而来。</p><p id="3689" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在谈到<a class="ae ky" href="https://github.com/systemd/systemd/issues/6237" rel="noopener ugc nofollow" target="_blank"> GitHub问题</a>、<a class="ae ky" href="https://news.ycombinator.com/item?id=19024912" rel="noopener ugc nofollow" target="_blank">黑客新闻评论线程</a>和社交媒体时，Lennart也非常直言不讳。而且是在那些他更倾向于不加过滤的场地。</p><p id="3d7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Lennart经常因为他对bug的态度和不愿接受指责而受到批评。以至于他在2017年获得了最差供应商回应奖。</p><p id="2363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是有一段话比这更重要。当你在谷歌上搜索诗人的名字时，首先出现的是<a class="ae ky" href="https://web.archive.org/web/20141007181442/https://plus.google.com/app/basic/stream/z13rdjryqyn1xlt3522sxpugoz3gujbhh04" rel="noopener ugc nofollow" target="_blank">2014年他上传到Google+的一篇文章</a>。在这篇文章中，他讨论了整个Linux社区是一个非常有害的环境。以至于他不断收到仇恨信息，甚至死亡威胁。</p><p id="352e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他给新来者的建议是“脸皮厚一点，或者逃跑”。</p><p id="1e6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这在各种Linux和开源社区中引起了不小的轰动。虽然许多人同意他的观点，但其他人指责伦纳特的行为方式与托沃兹相似。</p><p id="d4d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创作者的古怪行为和个人生活是否应该影响公众对其作品的看法，这是有争议的。毕竟，虽然Torvalds过去与systemd开发人员有过争执，但他仍然喜欢这个软件。</p><p id="3f48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在接受Slashdot 采访时，托瓦尔兹表示:</p><blockquote class="na nb nc"><p id="3536" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">不得不说，我真的没有得到systemd的仇恨。我认为它在init[的状态上改进了很多。]</p><p id="3f8f" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">是的，我和一些维护者有一些性格问题，但那是关于你如何处理错误报告和当事情出错时接受责备(或不接受责备)。如果人们认为这意味着我不喜欢systemd，我会让你们失望的。</p></blockquote><p id="777d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，对于systemd的批评者来说，Poettering的争议性声明使一个已经两极分化的项目更加分裂。</p><h1 id="917c" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">复杂性和设计</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/e658958745c4fb30ed31ff2231aa87ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fcSaLHvvxP2MAKUK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">蒂莫·沃尔茨在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="7942" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">systemd</code>经常被它的愤世嫉俗者称为<em class="ma">膨胀器</em>。很容易看出为什么。它的代码库有超过100万行代码。对于大多数其他项目来说，这不是问题。但是<code class="fe lw lx ly lz b">systemd</code>是个特例。</p><p id="0184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我前面说过的，PID1有一个重要但不稳定的角色。因为它是所有其他进程的父进程，所以如果它崩溃，整个系统都会崩溃。</p><p id="93c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过去，<code class="fe lw lx ly lz b">sysvinit</code>和Upstart解决这个问题的方式是在范围上保持简单。它们的简单性有助于增加它们的稳定性。这就是问题所在。</p><p id="dce7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">systemd</code>是最不简单的事情。这是一个包含69个二进制文件的完整软件套件。它的作用范围已经从仅仅是一个init系统发展到接管操作系统的许多其他部分。人们认为不需要修理的部分。</p><p id="e3b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是故意的。Poettering在多个场合表达了他对一个更加统一和集成的Linux生态系统的渴望。从用户体验的角度来看，这是有意义的。从个人经验来说，能够登录任何集成了<code class="fe lw lx ly lz b">systemd</code>的操作系统，并了解如何启动和停止服务是一个很棒的特性。但这也带来了权衡。</p><p id="7062" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去,<code class="fe lw lx ly lz b">systemd</code>的复杂性和它在Linux生态系统中的大规模采用被证明是一对可怕的组合。它所做的任何改变，尤其是如果它不是向后兼容的，会影响几乎所有运行Linux机器的人。</p><p id="15fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些显著的例子是:</p><ul class=""><li id="1fdf" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><code class="fe lw lx ly lz b"><a class="ae ky" href="https://lwn.net/Articles/490413/" rel="noopener ugc nofollow" target="_blank">systemd</a></code> <a class="ae ky" href="https://lwn.net/Articles/490413/" rel="noopener ugc nofollow" target="_blank">吸收udev </a>。</li><li id="d1c6" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><a class="ae ky" href="https://news.ycombinator.com/item?id=11782364" rel="noopener ugc nofollow" target="_blank">引入一个变化</a>，当用户默认退出时，它会终止后台进程。</li><li id="20d2" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">GNOME使<code class="fe lw lx ly lz b"><a class="ae ky" href="https://lwn.net/Articles/520892/" rel="noopener ugc nofollow" target="_blank">systemd</a></code> <a class="ae ky" href="https://lwn.net/Articles/520892/" rel="noopener ugc nofollow" target="_blank">成为硬依赖</a>并阻止任何非<code class="fe lw lx ly lz b">systemd</code>系统使用它。(没有<code class="fe lw lx ly lz b">systemd</code>也可以运行GNOME，因为需要<a class="ae ky" href="https://github.com/dantrell/gentoo-project-gnome-without-systemd" rel="noopener ugc nofollow" target="_blank">很多变通办法</a>。)</li></ul><p id="af7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，Linux社区中的许多人认为<code class="fe lw lx ly lz b">systemd</code>的复杂性是必要的。根据一位ArchLinux开发者的说法:</p><blockquote class="na nb nc"><p id="8e1b" class="kz la ma lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">大多数systemd批评家认为的“膨胀”，我认为是解决一个复杂问题的必要的复杂性。</p></blockquote><h1 id="2890" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">打破常规</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/f7d434155cac5f5b0f8a3a20013414b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WeC4MkmWdeQTcX1f"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·劳顿在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="9d6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我看到的对<code class="fe lw lx ly lz b">systemd</code>抱怨的最后一个，也可能是最大的一个原因是，它是对其前身的重大改变。无论是实施还是理念。</p><p id="f856" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些最大的抱怨<a class="ae ky" href="https://www.reddit.com/r/sysadmin/comments/9tinha/why_there_is_so_much_hate_toward_systemd/" rel="noopener ugc nofollow" target="_blank">来自系统管理员。</a></p><p id="fa7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">系统管理员花费大量时间摆弄和配置操作系统。他们这样做是为了工作和生计。当你扰乱他们的生活时，他们往往会对此形成强烈的意见。</p><p id="7fac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，他们讨厌二进制日志。</p><p id="fdcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个让许多人竭力反对的变化是与UNIX哲学的决裂。</p><p id="8a0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">UNIX哲学认为一切工具应该<a class="ae ky" href="https://en.wikipedia.org/wiki/Unix_philosophy#Do_One_Thing_and_Do_It_Well" rel="noopener ugc nofollow" target="_blank"> <em class="ma">做一件事，并且做得很好</em> </a>。虽然poeting很快指出<code class="fe lw lx ly lz b"><a class="ae ky" href="https://0pointer.de/blog/projects/the-biggest-myths.html" rel="noopener ugc nofollow" target="_blank">systemd</a></code> <a class="ae ky" href="https://0pointer.de/blog/projects/the-biggest-myths.html" rel="noopener ugc nofollow" target="_blank">是二进制文件</a>的集合，但是许多二进制文件<em class="ma">相互依赖</em>，并没有像宣传的那样使其解耦和模块化。</p><p id="123c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，<code class="fe lw lx ly lz b">systemd</code>不遵守POSIX标准——毫无疑问受到Lennart的<a class="ae ky" href="https://en.wikipedia.org/wiki/Lennart_Poettering#Controversies" rel="noopener ugc nofollow" target="_blank">个人对POSIX </a>的看法的影响。这将<code class="fe lw lx ly lz b">systemd</code>与Linux生态系统联系在一起，疏远了它的BSD兄弟。</p><p id="e1d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对许多人来说，这是压垮骆驼的最后一根稻草。虽然他们可以原谅我列出的其他问题，但是背离UNIX和POSIX标准太过分了。他们把它视为圣杯，而不管它给系统带来多少好处或改进。</p><p id="563c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要乱用UNIX。</p><h1 id="87fe" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">我个人的想法</h1><p id="2541" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">在阅读了大量的博客文章、邮件列表和论坛帖子之后，我已经形成了自己对这个问题的一些想法。</p><p id="1d55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个日常只使用Linux的surface特性的软件工程师<code class="fe lw lx ly lz b">systemd</code>再合适不过了。它是为我的用例而设计的。</p><p id="e166" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也就是说，我很同情那些认为<code class="fe lw lx ly lz b">systemd</code>有重大问题的人。似乎有最大问题的群体是具有复杂用例的超级用户，例如大型系统的系统管理员。对他们来说，这不仅仅是一种爱好。这是他们的生计。</p><p id="d98c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你花了几年，甚至几十年的时间为一个系统开发脚本、工具和知识时，当所有这些东西在一个版本中被弃用时，你会感到震惊。为了升级到新版本，需要花费时间和精力来重写和移植这些工具。</p><p id="6589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管Python第3版已经发布了13年，但仍有如此多的系统运行Python第2版，这是有原因的。</p><p id="5da9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">systemd</code>在过去10年里一直是一个有争议的话题，原因之一是它的采用不是一个奇点，而是一系列不幸的事件。</p><p id="18fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于自由/开源软件的性质，每个Linux发行版在不同的时间分别采用了它。每一次收养都引发了一次又一次同样的争论。强化每个人的观点和决心。</p><p id="6206" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从工程和架构的角度来看，<code class="fe lw lx ly lz b">systemd</code>已经做出了许多明智的决定。与此同时，整合Linux生态系统的大片区域也有其自身的缺点。</p><p id="479a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如软件中的一切一样，没有完美的解决方案，只有折衷。</p><h1 id="1602" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">最后</h1><p id="da19" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">对我来说，<code class="fe lw lx ly lz b">systemd</code>的历史代表了科技行业最好和最坏的一面。从积极的一面来看，有许多经过深思熟虑的<a class="ae ky" href="https://www.youtube.com/watch?v=o_AIw9bGogo" rel="noopener ugc nofollow" target="_blank">演讲</a>、<a class="ae ky" href="https://blog.darknedgy.net/technology/2020/05/02/0/index.html#rise" rel="noopener ugc nofollow" target="_blank">文章</a>和<a class="ae ky" href="https://lwn.net/Articles/698822/" rel="noopener ugc nofollow" target="_blank">讨论</a>，它们教会了我很多关于Linux和init系统的知识。比我在日常工作中学到的还要多。</p><p id="31dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是消极的一面是对<code class="fe lw lx ly lz b">systemd</code>创作者的在线骚扰和死亡威胁——不管是不是玩笑。</p><p id="618b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">科技专业人士可以从围绕<code class="fe lw lx ly lz b">systemd</code>的戏剧中学到很多东西。</p><p id="1640" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，<code class="fe lw lx ly lz b">systemd</code>最大的失败是它的沟通。我确信<code class="fe lw lx ly lz b">systemd</code>的创造者们是出于好意。但是，如果有相当多的人称你为“傲慢者”,包括Linux的创造者，那么还有增长的空间。</p><p id="efb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，<code class="fe lw lx ly lz b">systemd</code>知道它的受众。它提供了一个免费的、可维护的服务，比它的前身更好、更现代。这使得许多Linux发行版进行转换变得很容易。</p><p id="d5da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，一个软件在不到十年的时间里占据了Linux生态系统99%的份额是相当了不起的。不管你对诗歌有什么看法，我渴望有一个项目哪怕只有1/10的成功。</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="d68a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/subscribe/@SunnyB" rel="noopener">订阅我的时事通讯</a>当我写了一篇新文章时，你会得到更新。</p></div></div>    
</body>
</html>