<html>
<head>
<title>Introduction to Node.js — Create Your First Web App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js简介—创建您的第一个Web应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introduction-to-node-js-create-your-first-web-app-96b705c28023?source=collection_archive---------2-----------------------#2019-12-10">https://betterprogramming.pub/introduction-to-node-js-create-your-first-web-app-96b705c28023?source=collection_archive---------2-----------------------#2019-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="506d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你好世界</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/799bd9626fe83aff55b1f9e3f3c03ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zv5lNO5o-Uv1Mb1V"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼古拉斯·皮卡德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e78c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>是一个用JavaScript运行服务器端应用的运行时平台。它采用V8浏览器引擎来解释服务器上的JavaScript代码。它在标准库中自带一组内置模块，用于运行服务器端应用程序，并允许直接与硬件交互。</p><p id="6feb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它可以让我们在电脑上操作文件和做许多事情。它不同于浏览器中的JavaScript，因为它做完全不同的事情。Node.js可以做的事情之一是运行web服务器来提供静态和动态内容。</p><p id="535d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将通过安装Node.js运行时平台来熟悉Node.js，并使用它构建简单的web应用程序。我们从下载Node.js运行时开始。</p><p id="13bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在Windows上做到这一点，我们转到<a class="ae ky" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en/</a>并单击LTS链接下载Node.js运行时，然后双击下载的可执行文件并按照说明进行操作。在Linux中，我们可以使用包管理器来下载Node.js。</p><p id="e560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个发行版都有不同的方式来下载Node.js运行时。例如，在Ubuntu中，我们运行以下命令来下载Node.js:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7fbe" class="ma mb it lw b gy mc md l me mf">$ sudo apt-get install curl<br/>$ curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -<br/>$ sudo apt-get install nodejs</span></pre><p id="ab2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行上面的命令时，我们下载Node.js LTS版本并安装它。然后，我们可以运行:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4ce0" class="ma mb it lw b gy mc md l me mf">$ node -v</span></pre><p id="a92d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查安装的Node.js版本。</p><p id="4e8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装Node.js运行时后，我们必须学习如何使用终端。</p><p id="21b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Windows上，我们将使用Node.js命令提示符，它是在按照上面的说明安装Node.js时安装的。特殊的命令提示符已经为我们设置了Node.js环境，而普通的命令提示符则没有。</p><p id="ee0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们需要Node.js命令提示符来运行Node.js应用程序。Windows 10也有针对Linux的Windows子系统，它为我们提供了不同风格的Linux作为命令提示程序，让我们在Windows中完成许多可以在Linux上完成的事情。</p><p id="cbd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装它，我们必须进入开始菜单并搜索<em class="mg">打开和关闭Windows功能</em>，然后选择<em class="mg">Linux的Windows子系统</em>并单击<em class="mg">确定</em>。之后，重启电脑。</p><p id="d729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，重新启动后，去Windows应用商店搜索你想要的Linux版本。最常见的是Ubuntu，所以我们可以搜索并点击<em class="mg">安装</em>。</p><p id="3bc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，打开已经安装好的Ubuntu命令提示符程序，让它运行，然后它会提示你通过设置登录命令提示符的用户名和密码来创建一个帐户。</p><p id="6f7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了用于Linux的Windows子系统，磁盘存储与Windows共享，因此我们不必担心移动文件。</p><p id="249d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，Linux的Windows子系统版本1的磁盘操作很慢。版本2更快，将随着Windows 10的最新更新而推出。</p><p id="6665" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于macOS和Linux用户，他们有终端程序，让我们在命令提示符下运行命令。运行Node.js应用程序不需要特殊的命令提示符程序。它们都可以运行POSIX兼容的程序。</p><p id="f94b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于所有用户来说，另一种方法是使用虚拟机在您选择的操作系统上运行Node.js。</p><p id="acc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个流行的选择是使用<a class="ae ky" href="https://www.virtualbox.org/" rel="noopener ugc nofollow" target="_blank"> VirtualBox </a>，它支持许多常见的操作系统，如Windows和许多版本的Linux。它是免费的，并且得到了一个大社区的支持。</p><p id="aa0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在VirtualBox虚拟机上安装新的操作系统很容易，并且有现成的虚拟机可供下载。比如https://www.osboxes.org/<a class="ae ky" href="https://www.osboxes.org/" rel="noopener ugc nofollow" target="_blank">有很多为VirtualBox做的Linux虚拟机。</a></p><p id="260e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虚拟机使用自己的存储并与主机共享内存，因此虚拟机将占用您在设置虚拟机时留出的大量内存。</p><p id="2458" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不喜欢虚拟机与你自己的键盘交互的方式，你可以通过使用PuTTY这样的终端程序来连接它，从而改善体验。</p><p id="d8fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，在这样做之前，您必须启用您的虚拟机。例如，要启用从<a class="ae ky" href="https://www.chiark.greenend.org.uk/~sgtatham/putty/" rel="noopener ugc nofollow" target="_blank"> PuTTY </a>到VirtualBox虚拟机的登录，我们必须执行以下步骤:</p><ul class=""><li id="b08c" class="mh mi it lb b lc ld lf lg li mj lm mk lq ml lu mm mn mo mp bi translated">运行<code class="fe mq mr ms lw b">sudo apt install ssh</code>来安装SSH程序。</li><li id="3138" class="mh mi it lb b lc mt lf mu li mv lm mw lq mx lu mm mn mo mp bi translated">关闭虚拟机。</li><li id="aabc" class="mh mi it lb b lc mt lf mu li mv lm mw lq mx lu mm mn mo mp bi translated">在VirtualBox中，进入<em class="mg">设置</em>菜单，<em class="mg">网络</em>部分。在<em class="mg">适配器1 </em>上选择<em class="mg">主机专用适配器</em>，然后点击<em class="mg">确定</em>。</li><li id="1c5b" class="mh mi it lb b lc mt lf mu li mv lm mw lq mx lu mm mn mo mp bi translated">启动VirtualBox虚拟机，登录并运行<code class="fe mq mr ms lw b">ifconfig</code>来获取虚拟机的IP地址。</li><li id="19a8" class="mh mi it lb b lc mt lf mu li mv lm mw lq mx lu mm mn mo mp bi translated">然后，您可以使用它登录到您选择的终端程序，比如PuTTY。</li></ul><p id="ba91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你的虚拟机或者电脑上设置好Node.js之后，我们就可以开始编写Node.js程序了。首先，我们必须使用文本编辑器来编写程序，因为我们需要一个只保存纯文本的程序，这就是代码。</p><p id="3043" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如在Windows中，<a class="ae ky" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>是编写JavaScript代码的绝佳选择。它有代码和模块的自动补全功能，您可以尝试键入代码来引用它们。</p><p id="1150" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，它速度快，重量轻。它只需要250MB的磁盘空间，需要1GB的内存和1.6 GHz的处理器。</p><p id="bda8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些需求与其他功能丰富的文本编辑器相当。它还具有缩放设置，分割单个文件的视图，识别不同类型的文件，以便它们可以被正确地高亮显示以便于阅读，并且它有许多插件来扩展其功能。</p><p id="3c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还与计算机操作系统的命令提示符或外壳相集成，因此您可以直接在其中运行命令。</p><p id="2ceb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript支持是内置的，所以我们可以自动为JavaScript代码突出显示语法、自动完成和捕捉语法错误。这对于提高用JavaScript编程的生产率非常有帮助，因为它有助于更快地读写代码。它也是用JavaScript构建的。</p><p id="ec26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了制作有用的程序，我们必须使用其他库来帮助我们实现这一点，因为我们不能自己编写所有的东西。Node.js有一个标准库，可以让我们做很多事情，比如运行web服务器和操作存储在计算机上的文件。</p><p id="c4e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要做标准库中没有的事情，我们可以安装Node.js包，并在您的应用程序代码中导入或要求它们。库存储在包存储库中，可以由包管理器下载。</p><p id="f1ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Node.js生态系统，最流行的包存储库是节点包管理器或<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>。Npm是Node.js包的存储库，我们可以用<code class="fe mq mr ms lw b">npm</code>程序下载它们。</p><p id="33d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">npm程序有许多命令可以让我们轻松下载Node.js包。您安装的软件包的详细信息存储在您所在的项目文件夹的<code class="fe mq mr ms lw b">package.json</code>中。</p><p id="b987" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mq mr ms lw b">package.json</code>也可以在<code class="fe mq mr ms lw b">package.json</code>的<code class="fe mq mr ms lw b">scripts</code>部分存储脚本命令。</p><p id="7009" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，为了防止包版本的改变和导致问题，创建了一个<code class="fe mq mr ms lw b">package-lock.json</code>，指示当你安装一个包时安装的版本。如果您使用版本控制，您将签入这两个文件，以便在您再次设置应用程序时安装正确的包。</p><p id="cb12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Npm有许多命令来处理节点包。最常见的如下。</p><h2 id="e082" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">npm安装</h2><p id="07e5" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><code class="fe mq mr ms lw b">npm install</code>，简称<code class="fe mq mr ms lw b">npm i</code>，用于安装包。</p><p id="22cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有在<code class="fe mq mr ms lw b">install</code>后面加上一个包名，如果依赖项还没有安装或者安装的版本已经过期，它会下载<code class="fe mq mr ms lw b">package.json</code>中列出的所有包。</p><p id="293e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在<code class="fe mq mr ms lw b">npm install</code>后面放一个包名，只要找到这个包，它就会用这个名字安装这个包。在安装过程中，<code class="fe mq mr ms lw b">npm</code>会运行<code class="fe mq mr ms lw b">npm run link</code>和<code class="fe mq mr ms lw b">npm run build</code>来编译软件包。</p><p id="101e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行<code class="fe mq mr ms lw b">npm install -g packageName</code>可以全局安装包。</p><h2 id="816d" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated"><code class="fe mq mr ms lw b">npm prune</code></h2><p id="d455" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><code class="fe mq mr ms lw b">npm prune</code>移除未使用的包装。<code class="fe mq mr ms lw b">npm run --production</code>用于从<code class="fe mq mr ms lw b">devDependencies</code>部分删除包。<code class="fe mq mr ms lw b">--dry-run</code>选项用于在实际运行前检查哪些包将被删除。</p><p id="9959" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mq mr ms lw b">--json</code>选项可用于在JSON中显示结果。启用包锁定后，修剪是自动进行的。</p><h2 id="dbd9" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated"><code class="fe mq mr ms lw b">npm run</code></h2><p id="fa3c" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><code class="fe mq mr ms lw b">npm run-script</code>让您运行自己编写的自定义脚本。<code class="fe mq mr ms lw b">npm run</code>是该命令的别名。</p><h2 id="1558" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated"><code class="fe mq mr ms lw b">npm start</code></h2><p id="0857" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><code class="fe mq mr ms lw b">npm start</code>通过运行您定义的命令启动软件包。</p><h2 id="45b0" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated"><code class="fe mq mr ms lw b">npm update</code></h2><p id="cbdb" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><code class="fe mq mr ms lw b">npm update</code>更新项目中的包。<code class="fe mq mr ms lw b">npm update packageName</code>只更新名为<code class="fe mq mr ms lw b">packageName</code>的包。它会将最新版本记录到<code class="fe mq mr ms lw b">package-lock.json</code>。</p><p id="0f26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装npm或将npm升级到最新版本，请运行<code class="fe mq mr ms lw b">npm install -g npm</code>。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="2bb6" class="ob mb it bd my oc od oe nb of og oh ne jz oi ka nh kc oj kd nk kf ok kg nn ol bi translated">创建Web服务器</h1><p id="804d" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">现在我们已经拥有了编写基本web服务器所需的一切。它所做的只是通过监听给定的端口来服务于“Hello World”响应。我们可以通过使用给定的端口访问本地主机来查看消息。</p><p id="7ee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">web服务器所做的是，当给定您放入浏览器或HTTP客户端的URL时，它获取您发出的请求，包括URL、标题、cookies和请求正文，然后服务器将根据接受的请求做一些事情。</p><p id="624e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">web服务器将获得请求数据，如URL、请求方法(get、POST、PATCH、PUT、DELETE)、头、cookies和请求体，并根据请求中的数据做出响应。</p><p id="dd3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们转到http://localhost:9999/helloworld，那么监听端口9999的web服务器将获得请求URL，然后如果URL是<code class="fe mq mr ms lw b">helloworld</code>，在本例中就是这样，它将返回纯文本响应“Hello world”。</p><p id="b09b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">响应可以有自己的头，如文件类型和正文数据。它可以是不同的格式，如纯文本或JSON，这是一种格式类似于JavaScript文字的纯文本。</p><p id="a987" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，响应将有一个响应代码。响应代码的范围从100到500。常见的包括200表示一般的成功响应，201表示创建的新数据，204表示没有内容的响应。</p><p id="7c93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">300系列响应用于重定向响应。301代表永久移动。302意味着找到了资源。400系列错误是针对客户端的错误。</p><p id="41a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，400是向服务器提交错误数据时的一般错误请求响应。401表示当用户无法使用正确的凭据登录时的未授权响应。</p><p id="e596" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，当试图访问不允许用户访问的资源时，会返回403。404是资源未找到响应。</p><p id="8bc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">405表示使用未经授权的HTTP方法发出请求。422是另一个因发送错误数据而返回的响应，不能被服务器处理。</p><p id="bdb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">500系列错误是服务器端错误。500表示一般服务器错误。502表示坏网关，503表示服务不可用，504表示网关超时。</p><p id="c88e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以用Node.js编写我们的web服务器了。</p><p id="53b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将用两种方法来做这件事。我们将使用Node.js内置的<code class="fe mq mr ms lw b">http</code>模块和非常流行的<a class="ae ky" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a> web框架来构建我们的web服务器应用程序。</p><p id="6b25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe mq mr ms lw b">http</code>模块构建的看起来如下:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f72d" class="ma mb it lw b gy mc md l me mf">const http = require("http");<br/>http<br/>  .createServer((request, response) =&gt; {<br/>    response.writeHead(200, { "Content-Type": "text/plain" });<br/>    response.write("Hello, World!");<br/>    response.end();<br/>  })<br/>  .listen(8888);<br/>console.log("Server listening on port 8888");</span></pre><p id="cd68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们首先用<code class="fe mq mr ms lw b">const http = require(“http”);</code>行导入<code class="fe mq mr ms lw b">http</code>模块。然后，我们使用<code class="fe mq mr ms lw b">createServer</code>函数创建HTTP服务器。</p><p id="46ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们传入一个回调函数，它带有一个<code class="fe mq mr ms lw b">request</code>和<code class="fe mq mr ms lw b">response</code>参数。如果请求被服务器接受，这对于处理数据是很方便的。对于这个简单的“Hello World”示例，我们只返回响应。</p><p id="d261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用在<code class="fe mq mr ms lw b">response</code>对象中可用的<code class="fe mq mr ms lw b">writeHead</code>函数设置头，并设置响应代码(对于成功的响应为200)和<code class="fe mq mr ms lw b">Content-Type</code>响应头，响应头被设置为<code class="fe mq mr ms lw b">text/plain</code>，因为我们想要返回纯文本。</p><p id="ea0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们运行带有<code class="fe mq mr ms lw b">“Hello, World!”</code>字符串的<code class="fe mq mr ms lw b">response.write</code>函数，在您选择的HTTP客户端的浏览器中显示“Hello world”。调用<code class="fe mq mr ms lw b">response.end()</code>会将响应返回给HTTP客户端的浏览器。</p><p id="4200" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过将上面的代码保存在你选择的目录下的一个名为<code class="fe mq mr ms lw b">app.js</code>的文件中，然后在进入你保存文件的目录后运行<code class="fe mq mr ms lw b">node app.js</code>来运行这个应用程序。之后，我们应该看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/93455aba17a8996ef2d753804e36de9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AivwYChudobLOGzXlfN97w.png"/></div></div></figure><p id="e1fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码适用于非常简单的应用程序，如Hello World应用程序。然而，当一个应用程序有更多的功能时，使用<code class="fe mq mr ms lw b">http</code>模块编写它们将是一件痛苦的事情。</p><p id="c3b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须检查侦听器中的请求和响应，然后我们检查我们希望用户访问的URL，然后根据传入<code class="fe mq mr ms lw b">request</code>对象的内容操纵响应并返回它。</p><p id="538a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将使创建复杂的应用程序变得困难，因为在这些应用程序中，你需要用请求中不同的标题和正文来检查大量的URL。</p><p id="a56d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们可以使用一个框架来简化这一点。Express框架非常简单易用，让我们可以简化Hello World应用程序。</p><p id="a48d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用Express构建我们的应用程序，我们可以创建一个文件夹，然后进入该文件夹并运行<code class="fe mq mr ms lw b">npm init -y</code>。</p><p id="be94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创建一个空的<code class="fe mq mr ms lw b">package.json</code>文件，将该文件夹指定为Node.js项目文件夹。运行<code class="fe mq mr ms lw b">npm i express</code>安装快速框架。在同一个文件夹中创建<code class="fe mq mr ms lw b">app.js</code>并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1d72" class="ma mb it lw b gy mc md l me mf">const express = require("express");<br/>const app = express();<br/>const port = 9999;</span><span id="fa6d" class="ma mb it lw b gy on md l me mf">app.get("/", (req, res) =&gt; {<br/>  res.send("Hello, World!");<br/>});</span><span id="fb74" class="ma mb it lw b gy on md l me mf">app.listen(port, function() {<br/>  console.log(`Server listening on port ${port}`);<br/>});</span></pre><p id="33cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过在您创建的文件夹中运行<code class="fe mq mr ms lw b">node app.js</code>并转到<a class="ae ky" href="http://localhost:9999," rel="noopener ugc nofollow" target="_blank"> http://localhost:9999，</a>来运行它，在那里您会看到与上面相同的内容。</p><p id="2139" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它只在你去http://localhost:9999的时候显示“Hello World”。像http://localhost:9999/abc这样的其他URL不起作用，因为我们只指定了根URL(用<code class="fe mq mr ms lw b">“/”</code>表示)将返回“Hello World！”</p><p id="ff55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们在使用<code class="fe mq mr ms lw b">http</code>模块的web服务器中所没有的。</p><p id="b531" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Node.js是一个运行时平台，有一个很好的生态系统。它采用V8浏览器引擎来解释服务器上的JavaScript代码。</p><p id="002b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它在标准库中自带一组内置模块，用于运行服务器端应用程序，并允许直接与硬件交互。</p><p id="de18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它让我们在电脑上操作文件和做许多事情。它不同于浏览器中的JavaScript，因为它做完全不同的事情。</p><p id="70ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个简单的web服务器可以简单地通过内置于Node.js标准库中的<code class="fe mq mr ms lw b">http</code>模块来完成，或者我们可以使用Express框架来获得更高级的功能。</p></div></div>    
</body>
</html>