<html>
<head>
<title>Automated DeFi Exchange Using Puppeteer and MetaMask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用操纵器和MetaMask的自动DeFi交换</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/automated-defi-exchange-using-puppeteer-metamask-8663d9e90484?source=collection_archive---------1-----------------------#2022-02-04">https://betterprogramming.pub/automated-defi-exchange-using-puppeteer-metamask-8663d9e90484?source=collection_archive---------1-----------------------#2022-02-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2a12" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用木偶师自动化加密货币兑换</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9cd1c218a2ffb103a5bbe6dbc143fe22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LbGTw3cXm_7S3Gj1"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@dynamite_luke?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢克·怀特</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="3bdf" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">为什么要实现交易自动化？</strong></h1><p id="2f30" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如您所知，DeFi平台允许人们快速轻松地兑换加密货币，而无需创建账户和完成身份验证流程。</p><p id="110c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">最近，我一直在研究通过滥用币安和比特币基地等交易所之间的价差来定义交易所来获利的选择。我计划在我的后续出版物中披露这项研究。</p><p id="5787" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">无论如何，如果你正在经营一家企业，接受加密货币作为支付方式，并希望在预定的工作中将其兑换为另一枚硬币，这个机器人可能会很有用。</p><h1 id="e417" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">为什么是木偶师？</strong></h1><p id="a6ba" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我通常在puppeteer中编写机器人，这对我来说似乎是一个更好的选择，但是当然，你也可以使用剧作家，因为它们都只是CDP协议的包装器。</p><p id="69f1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">CDP协议允许我们获得完全受控浏览器的优势，因此这是一个显而易见的选择。</p><p id="5e2b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">将它与MetaMask扩展混合使用，您就可以以完全自动化的方式进行货币兑换。</p><h1 id="8189" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">我们如何开始？</strong></h1><p id="7920" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">为了让我们的生活变得更加简单，我们将使用一个名为<code class="fe mp mq mr ms b">dappeteer</code>的包，这是一个由<code class="fe mp mq mr ms b">chainsafe</code>维护并发布在GitHub上的活动分叉。</p><p id="bcfd" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们从创建一个新目录、初始化项目和安装依赖项开始。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="3e8f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在使用Visual Studio代码或文本编辑器打开<code class="fe mp mq mr ms b">index.js</code>。</p><p id="65f9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">导入我们之前安装的包</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="60b7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">创建一个睡眠功能，这样我们就可以在网站还没有准备好的时候推迟我们的行动(有时即使你使用了waitFor功能也是需要的):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="c146" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在主函数中，让我们启动一个木偶浏览器并添加Metamask扩展</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="fd4b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">别忘了把“已经废话出生废话既然废话保持废话裙子废话任何废话”改成你的钱包种子。</p><p id="201a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">由于本指南将自动执行traderjoexyz.com上的交换，因此让我们将雪崩网络添加到Metamask:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="83d7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">去traderjoexyz.com寻找一枚硬币:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="ee1e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这种情况下，我们使用网站中的搜索功能来搜索BNB，并在他们的CSS类中单击包含BNB地址的元素。</p><p id="2e7a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在让我们选择用BNB换USDC:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="2ed4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">由于这一次，搜索功能只返回一个硬币，我们可以点击他们的CSS中唯一有“token-item-”的元素，而不用提到确切的地址。</p><p id="2738" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">选择要兑换的金额(1 BNB):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f10e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">最后一步，将Metamask连接到Traderjoexyz并批准交易:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="fa80" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">就是这样！</p><p id="3891" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">完整代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="76d4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">总结</h1><p id="de1d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">只需一小段代码，就可以轻松实现一切自动化，尤其是在加密货币方面。</p><p id="43e7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">您可以将这段代码作为一个例子，说明一个基本的交易机器人如何在没有汇率限制、不需要登录和不符合KYC的情况下交换两个硬币。想象一下，如果你改变这个机器人来交易一种基于深度学习模型的货币，或者简单地找到两个Defi交易所之间的价格差距，那么你就可以在这里买，在那里卖，这将是多么强大。</p><p id="a7e2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正如我之前所写的，在未来，我将发布关于从Defi交易所赚取利润的全面研究，当然，还有一个用于概念验证的自动化工作机器人。</p></div></div>    
</body>
</html>