<html>
<head>
<title>Building A CLI To Help Manage GitHub Accounts, React Projects, And More…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个CLI来帮助管理GitHub帐户、React项目等等…</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-a-cli-to-help-manage-github-accounts-react-projects-and-more-2755259be493?source=collection_archive---------8-----------------------#2019-06-17">https://betterprogramming.pub/building-a-cli-to-help-manage-github-accounts-react-projects-and-more-2755259be493?source=collection_archive---------8-----------------------#2019-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c37d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">介绍贾维斯，我的新的改进的小助手</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ce11e7b99c0a778c1a01b634e245b008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HahghLYwQKe7IatG-K1ZSQ.png"/></div></div></figure><p id="5e67" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">介绍贾维斯，我的新的和改进的小助手。很长一段时间以来，我一直想创建一个CLI来帮助我处理工作流程和日常任务。这就是我创建git-cli的原因，我在上一篇文章中曾提到过。git-cli对于GitHub帐户的简单管理非常有效，但我希望它能做更多。所以我舒服了些，放了些音乐，思考下一步该做什么。</p><p id="f2ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我的结论是，在git-cli上扩展并不能解决问题，我将从头开始创建一个新的cli。我决定这样做有几个原因。首先，我觉得我以一种很难扩展的方式编写和组织了它——比它需要的更难。其次，我知道我是以一种不提倡代码重用的方式编写的。最后，我觉得我可以做得更好。</p><p id="74d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我已经决定从头开始创建一个新的CLI，我必须考虑我到底想要它做什么以及如何做。我主要开发部署在谷歌应用引擎上的React应用程序，使用Firebase函数和Firestore作为后端，并将静态文件存储在AWS S3上。我还经常需要在多个GitHub账户、谷歌云平台账户和AWS账户之间切换。根据这些信息，我提出了以下要求:</p><ul class=""><li id="3750" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">能够轻松地创建、存储、更新、删除GitHub、GCP和S3配置，并在它们之间切换。</li><li id="09a2" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">能够用一个命令将更改推送到Github。</li><li id="8c61" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">能够克隆repos，并通过一个简单的命令从GitHub中提取更改。</li><li id="d0ef" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">能够部署到谷歌应用引擎，推到GitHub，并上传静态文件到S3所有与一个命令。</li><li id="e620" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">能够初始化一个完整的样板反应模板，初始化一个git目录，安装NPM软件包，并建立和运行一个开发服务器所有与一个命令。</li><li id="679c" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">能够用简单的命令创建React组件。</li></ul><p id="86df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我还决定我想要一种从命令行打开和搜索诸如Google、NPM、GitHub和StackOverflow等网站的方法。我不确定这个命令是否值得，但是它比我想象的要快，我现在一直在使用它。</p><p id="d5e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我已经有了一个需求列表和一个如何让一切工作的粗略计划，除了构建CLI之外，剩下唯一要做的事情就是为它想一个名字。这是最容易的部分，因为作为漫威的超级粉丝，只有一个真正的选择:贾维斯。</p><h1 id="8daa" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">入门指南</h1><p id="6f64" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我决定首先处理CLI的配置管理部分，因为大多数其他功能都依赖于此。我希望能够为我使用的所有不同类型的配置创建新配置、更新和删除特定配置，以及切换配置。</p><h2 id="0113" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">Git配置</h2><p id="d4e2" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我管理git配置的主要目标是能够创建SSH密钥，更新SSH配置，并以尽可能少的手工工作将公钥上传到GitHub。我知道我可以使用ssh-keygen命令创建SSH密钥，传递所有必要的信息，比如文件名。我还知道我可以使用节点的fs模块更新SSH配置文件。我不确定的是我是否能把公钥上传到GitHub，所以我做了一些研究。原来GitHub有一个方便的API，允许添加新的密钥，也可以删除当前的密钥。现在我知道我可以让这一切工作起来——唯一需要手动完成的事情(在命令行之外)就是创建一个个人访问密钥。</p><p id="494c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在如果你跑:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="410f" class="my mc iq nl b gy np nq l nr ns">jarvis config-new git</span></pre><p id="5eff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Jarvis将首先停用当前活动的git配置。然后它会提示您输入一个配置id，您的GitHub用户名和电子邮件，以及您创建的个人访问令牌。贾维斯会帮你完成剩下的工作。它在本地存储配置以确保id是惟一的，创建SSH密钥，更新SSH配置，将公共SSH密钥上传到GitHub，并激活配置以便立即使用。</p><p id="7332" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">说到激活配置，这是下一步。使用Jarvis在git配置之间切换非常简单:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="1e19" class="my mc iq nl b gy np nq l nr ns">jarvis config-switch git</span></pre><p id="780b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当这个命令运行时，Jarvis显示一个存储的配置列表以供选择。您所需要做的就是输入您想要切换到的配置的id，并告诉Jarvis您当前正在进行的回购。一旦完成了这些，Jarvis将设置正确的本地和全局git配置，并设置正确的远程URL。</p><p id="bd73" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，如果，例如，你改变你的用户名呢？别担心，我已经使更新存储的配置变得很好很容易。您可能已经猜到了这个命令是什么:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="e01f" class="my mc iq nl b gy np nq l nr ns">jarvis config-update git</span></pre><p id="3762" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就像切换配置一样，Jarvis会询问您想要更新哪个配置。一旦您告诉Jarvis要更新哪个配置，它将要求所有可以更改的属性的新值。如果您不想更改特定的属性，请按enter键，它将使用当前的属性值。</p><p id="22a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我原以为update命令会像这样简单，但是我很快意识到有几个问题。首先，如果您的用户名已经更改，远程URL、本地和全局git配置将会是错误的。这不是一个大问题，因为我可以用更新后的属性激活配置，一切都会更新。第二个问题是，如果您的用户名已经更改，那么SSH密钥和配置将与新用户名不匹配，这将导致任何git请求失败。我决定通过完全删除本地和GitHub中的SSH密钥，并创建新的密钥来解决这个问题。</p><p id="90f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可能想知道为什么我选择删除一切，而不是仅仅更新密钥和配置。我这样做是因为我认为这可能是一个方便的功能。例如，假设您怀疑您的一个密钥已经泄露，有人正在使用它来访问您的GitHub帐户——要阻止此人，您只需运行update命令，按几次enter键，泄露的密钥将不再存在于本地或GitHub上，并且会创建新的密钥。</p><p id="12fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我需要一种删除不再使用的配置的方法。这与其他config命令的工作方式类似:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="9f45" class="my mc iq nl b gy np nq l nr ns">jarvis config-delete git</span></pre><p id="8591" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当您运行这个命令时，Jarvis会询问您想要删除哪个配置，然后删除它。这很简单，只需在本地删除配置，从GitHub中删除公共SSH密钥，然后在本地删除SSH密钥和配置。如果被删除的配置是激活的配置，那么Jarvis也会要求您激活一个新的配置。</p><h2 id="c781" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">GCP配置</h2><p id="d35c" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">GCP配置命令的工作方式与git命令基本相同。它们之间唯一真正的区别是Jarvis创建、更新和删除gcloud配置，而不是创建、更新和删除SSH密钥。我知道这不会太难实现，因为作为gcloud CLI的长期用户，我知道我可以使用<code class="fe nt nu nv nl b">gcloud config configurations create/delete/activate</code>和<code class="fe nt nu nv nl b">gcloud config set</code>命令完成以上所有工作。</p><p id="0198" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我必须克服的唯一问题是删除命令——你不能删除一个活动的gcloud配置。我通过创建一个名为jarvis-dummy的gcloud配置来解决这个问题，jarvis可以在删除配置之前激活这个配置。这样，即使您使用Jarvis删除您已经创建的每个GCP配置，它总是会完成。</p><h2 id="8585" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">S3配置</h2><p id="b19b" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">S3配置管理是三个中最简单的。这是因为我不必在任何外部平台上与任何东西通信或管理任何东西。S3配置只需要存储在本地，因为与S3的所有交互都将通过aws-sdk包完成，所以我需要的只是能够从存储的配置中读取值。</p><p id="75d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">至此，Jarvis的配置管理部分就完成了……嗯，算是完成了。我还认为有一种快速查看所有存储配置的方法会很有用。这就像读取存储的配置并在运行以下命令时将它们打印出来一样简单:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="a2bb" class="my mc iq nl b gy np nq l nr ns">jarvis config-view git|gcp|s3|all</span></pre><h1 id="7133" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">使用Git</h1><p id="079e" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">git配置管理是我构建的三个组件中的最后一个，所以我决定继续运行git，并构建git的其余功能。根据我的需求，我知道我需要四个命令:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="1204" class="my mc iq nl b gy np nq l nr ns">jarvis git-push &lt;version&gt;<br/>jarvis git-pull<br/>jarvis git-clone &lt;repoName&gt;<br/>jarvis git-init</span></pre><p id="7ebb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从<code class="fe nt nu nv nl b">git-init.</code>开始，我想让这个命令简化git目录的初始化。它需要做的第一件事是运行<code class="fe nt nu nv nl b">git init</code>，还需要运行<code class="fe nt nu nv nl b">git remote add origin</code>来添加远程原点。我认为让这个命令激活一个git配置也是一个好主意，这样运行一个命令就可以让您完全准备好开始使用其他git命令。</p><p id="00b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nt nu nv nl b">git-clone &lt;repoName&gt;</code>和<code class="fe nt nu nv nl b">git-pull</code>都是命令，完全按照你的想法去做。我想把它们添加到Jarvis中，主要是因为输入完整的git命令很痛苦。例如，代替:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="9c19" class="my mc iq nl b gy np nq l nr ns">git pull git@github.com-username:username/repoName.git</span></pre><p id="8796" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您应该键入:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="9bbd" class="my mc iq nl b gy np nq l nr ns">jarvis git-clone repoName</span></pre><p id="87ea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它们通过读取活动存储的git配置并使用其中的数据来格式化git命令。他们做的唯一额外的事情是在执行git命令之前检查活动git配置是否正确。</p><p id="cb97" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后一个<code class="fe nt nu nv nl b">git-push &lt;version&gt;</code>，这个命令是以类似拉和克隆的方式诞生的。当你可以输入一个命令时，为什么要输入三个命令呢？例如:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="ec80" class="my mc iq nl b gy np nq l nr ns">jarvis git-push 1.0.0</span></pre><p id="1386" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而不是:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="f6b0" class="my mc iq nl b gy np nq l nr ns">git add -A<br/>git commit -m "1.0.0"<br/>git push -u origin master</span></pre><p id="a917" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就像拉和克隆一样，推也在执行任何操作之前检查活动git配置是否正确。当运行<code class="fe nt nu nv nl b">git add</code>命令时，Jarvis将默认添加所有有变化的文件。您也可以传入想要添加的文件，例如:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="ff98" class="my mc iq nl b gy np nq l nr ns">jarvis git-push 1.0.0 file.js<br/>jarvis git-push 1.0.0 file1.js file2.js</span></pre><h1 id="288e" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">反应</h1><p id="dfea" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">到目前为止，React命令为我节省了大量时间。我们先来看看:</p><h2 id="62dc" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">初始化反应</h2><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="6091" class="my mc iq nl b gy np nq l nr ns">jarvis react-init &lt;projectName&gt;</span></pre><p id="df89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用这个命令，您可以在几分钟内完成一个基本的react项目，而不是花半个小时来完成所有设置。Init从使用Jarvis内置的git init命令初始化git目录开始。git初始化后，它开始创建以下结构的所有文件和文件夹:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="0bec" class="my mc iq nl b gy np nq l nr ns">build/<br/>src/<br/>    components/<br/>        Container/<br/>            Container.js<br/>            container.less<br/>            Container.test.js<br/>            index.js<br/>        Head/<br/>            Head.js<br/>            index.js<br/>        views/<br/>            Home/<br/>                Home.js<br/>                home.less<br/>                Home.test.js<br/>                index.js<br/>            PageNotFound/<br/>                index.js<br/>                PageNotFound.js<br/>                pagenotfound.less<br/>                PageNotFound.test.js<br/>    utils/<br/>        Environment.js<br/>    enzyme.js<br/>    index.js<br/>    index.less<br/>    variables.less<br/>.babelrc<br/>.eslintrc<br/>.gcloudignore<br/>.gitignore<br/>app.yaml<br/>CHANGELOG.md<br/>index.html<br/>jest.config.js<br/>package.json<br/>README.md<br/>webpack.config.js<br/>webpack.dev.config.js<br/>webpack.prod.config.js</span></pre><p id="8911" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我试图创建尽可能基本和标准的结构，因此它对尽可能多的开发人员有用——但是当然，每个人对项目结构都有自己的偏好。我想根据你的意见不断改进这个结构，让它变得更有用。所有的文件都填充了样板文件内容，允许测试运行，webpack工作，以及一个包含主页和404页面的基本网站。</p><p id="2b11" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是它并没有就此停止，一旦所有的文件和文件夹都被创建，Jarvis将运行npm install并等待所有的包完成安装。然后它会问你是否想运行<code class="fe nt nu nv nl b">npm run test</code>，如果你让它运行，它就会运行它们。我将它添加到命令中，以便您可以确保所有文件都已正确创建——如果它们都已创建，测试将会通过。测试运行完成后，Jarvis将询问您是否想要构建并运行项目，如果您回答是，那么它将运行<code class="fe nt nu nv nl b">npm run build</code>，webpack将构建文件并提供服务。</p><p id="c995" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">总之，<code class="fe nt nu nv nl b">react-init</code>允许你在几分钟内完成一个基本的react项目，然后直接开始构建很酷的东西。</p><h2 id="37c8" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">反应创建</h2><p id="f2d2" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated"><code class="fe nt nu nv nl b">react-create</code>命令和<code class="fe nt nu nv nl b">git-push</code>命令存在的原因是一样的——当你可以键入一个命令时，为什么要键入一大堆命令呢？在这种情况下是:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="ae5a" class="my mc iq nl b gy np nq l nr ns">jarvis react-create ComponentName</span></pre><p id="b939" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而不是:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="090b" class="my mc iq nl b gy np nq l nr ns">mdkir ComponentName<br/>cd ComponentName<br/>touch ComponentName.js<br/>touch ComponentName.test.js<br/>touch componentname.less<br/>touch index.js</span></pre><p id="5609" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个命令还有一个额外的好处，就是用样板文件填充文件，让组件开箱即用。</p><h2 id="d88d" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">反应部署</h2><p id="06f1" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我在需求中提到，我想要一个命令，将react应用程序部署到Google App Engine，将更改推送到GitHub，并将静态文件上传到S3，所有这些都在一个命令中，<code class="fe nt nu nv nl b">react-deploy &lt;version&gt;</code>就是这样做的命令。</p><p id="b150" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令首先运行测试，以确保一切正常。如果测试失败，命令也将失败。如果测试通过，那么它继续前进，使用webpack进行生产构建。这创建了几个文件，主要是<code class="fe nt nu nv nl b">index.css.gz</code>和<code class="fe nt nu nv nl b">index.js.gz</code>。就像测试一样，如果webpack无法构建应用程序，命令也会失败。接下来，我们使用Jarvis的<code class="fe nt nu nv nl b">git-push</code>命令将更改推送到GitHub。</p><p id="3c3e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦新版本被推送到GitHub，Jarvis就开始将应用程序部署到Google App Engine。gcloud CLI通过使用<code class="fe nt nu nv nl b">gcloud app deploy</code>命令使这一点变得非常简单。目前，这个命令只部署到GAE，因为99%的时间我都必须部署到那里。我确实有计划在将来给这个命令添加更多的平台，但是这在优先级列表中是很低的，所以我在这个版本中没有提到它。</p><p id="e2fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，Jarvis使用aws-sdk包将webpack创建的css和js文件上传到S3。一旦这些文件被上传，应用程序现在就已经部署好了，可以在万维网上使用了。在执行每一步之前，Jarvis检查活动配置是否正确，以确保一切都在需要的地方结束。</p><h1 id="f4b5" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">打开和搜索网站</h1><p id="ce19" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我添加的最后一个功能是快速打开和搜索网站的能力。如果你像我一样在开发时总是打开命令行，你可能会发现这个特性和我一样有用。这个特性唯一的缺点是它是macOS特有的。它通过使用带有浏览器名称和URL作为参数的<code class="fe nt nu nv nl b">open</code>命令来工作。因此，不用离开命令行，打开浏览器，键入URL，然后按enter键，您现在可以:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="5489" class="my mc iq nl b gy np nq l nr ns">jarvis site-open &lt;site&gt;</span></pre><p id="2b36" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">贾维斯会为你做好一切。站点参数可以是两个不同的东西，它可以是网站的完整URL，或者您可以键入Jarvis预定义的简化站点标识符之一。目前，以下id可用于<code class="fe nt nu nv nl b">site-open</code>:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="3c02" class="my mc iq nl b gy np nq l nr ns">jarvis site-open so (Stack Overflow)<br/>jarvis site-open npm (NPM)<br/>jarvis site-open cocoa (CocoaPods)<br/>jarvis site-open g (Google)<br/>jarvis site-open awe (Awesome)<br/>jarvis site-open gh (GitHub)</span></pre><p id="a8f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想直接在网站上搜索某样东西，你可以使用<code class="fe nt nu nv nl b">site-search</code>命令。当这个命令运行时，Jarvis会在执行命令之前询问您想要搜索什么。使用这个命令，您不能只传入任何URL，您必须使用预定义的简写。可用的速记员有:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="a7bc" class="my mc iq nl b gy np nq l nr ns">jarvis site-search so (Stack Overflow)<br/>jarvis site-search npm (NPM)<br/>jarvis site-search g (Google)<br/>jarvis site-search gh (GitHub)</span></pre><p id="269c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦你输入了你想要搜索的内容，Jarvis将会打开一个Chrome标签，显示搜索结果。这个命令加速了我的工作流程，比我想象的要快，我现在一直在使用它。</p><h1 id="3634" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">下一步是什么？</h1><p id="97ef" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">贾维斯是我会继续努力的，我对未来有一些大的计划，其中一些我已经在这篇文章中提到了。我还将贾维斯上传到了GitHub和NPM，这样任何人都可以使用他并贡献他的能力。我和Jarvis的目标之一是建立一个强大的社区，每个人都可以分享他们的想法和需求，这样Jarvis就可以在日常工作中帮助尽可能多的人。</p><h1 id="468d" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">安装Jarvis</h1><p id="b01d" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">如果您想安装Jarvis，您可以从GitHub克隆它:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="fab6" class="my mc iq nl b gy np nq l nr ns">git clone https://github.com/willptswan/jarvis.git<br/>cd jarvis<br/>npm link</span></pre><p id="dc47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者使用NPM安装它:</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="4f00" class="my mc iq nl b gy np nq l nr ns">npm install -g @willptswan/jarvis</span></pre><p id="9a96" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过运行以下命令来检查Jarvis是否已经正确安装</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="219f" class="my mc iq nl b gy np nq l nr ns">jarvis version</span></pre><p id="1ca9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="da0c" class="my mc iq nl b gy np nq l nr ns">jarvis help</span></pre><h1 id="bf72" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">结论</h1><p id="9cf1" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我希望你喜欢阅读贾维斯为什么以及如何存在，就像我喜欢建造他和写这个故事一样。我期待着贾维斯的未来，并看到一个社区在他周围成长。</p><p id="a81b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">GitHub:<a class="ae nw" href="https://github.com/willptswan/jarvis" rel="noopener ugc nofollow" target="_blank">https://github.com/willptswan/jarvis</a></p><p id="be23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">https://www.npmjs.com/package/@willptswan/jarvis:<a class="ae nw" href="https://www.npmjs.com/package/@willptswan/jarvis" rel="noopener ugc nofollow" target="_blank">NPM</a></p></div></div>    
</body>
</html>