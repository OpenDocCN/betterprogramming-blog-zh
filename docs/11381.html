<html>
<head>
<title>How Microsoft Wants To Change JavaScript and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微软如何改变JavaScript和TypeScript</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-microsoft-wants-to-destroy-typescript-1f1a53b18de6?source=collection_archive---------0-----------------------#2022-03-15">https://betterprogramming.pub/how-microsoft-wants-to-destroy-typescript-1f1a53b18de6?source=collection_archive---------0-----------------------#2022-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="55aa" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">JavaScript新闻</h2><div class=""/><div class=""><h2 id="6e09" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">这个提议可能会改变JavaScript和TypeScript</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/c77f800213c64cbbbad480931333d301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Fj1eIIYd0bXaCYc3"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">马修·曼努埃尔在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="779f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上周三，2022年3月9日，微软<a class="ae lh" href="https://devblogs.microsoft.com/typescript/a-proposal-for-type-syntax-in-javascript/" rel="noopener ugc nofollow" target="_blank">宣布</a>他们支持一项关于JavaScript和TypeScript进一步发展的卓越提案。</p><p id="5024" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">到目前为止，这只是一个建议，作为所谓的<a class="ae lh" href="https://github.com/tc39/proposals/blob/main/stage-0-proposals.md" rel="noopener ugc nofollow" target="_blank">阶段0提案</a>，但微软已经宣布，他们希望按时向<a class="ae lh" href="https://tc39.es/" rel="noopener ugc nofollow" target="_blank"> TC39 </a>(技术委员会39)提交该提案。如果这个提议被采纳并被实施，那么这将是JavaScript有史以来最大的变革。</p><h1 id="cd25" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">JavaScript的历史</h1><p id="d94c" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">如果我们回顾过去20年，并比较当时和现在的web开发，我们会注意到，尽管JavaScript作为一种编程语言已经有了很大的发展，但围绕JavaScript的生态系统已经取得了更大的进步。</p><p id="467b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这两点是相互需要的，因为一方面，JavaScript社区在过去二十年里变得更加专业，另一方面，互联网的一个基本问题变得越来越重要。作为开发人员，您无法控制用户将使用什么浏览器。</p><p id="8a36" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这意味着如果用户定期更新浏览器，你只能使用JavaScript的现代特性。对于个人来说，这可能是现在的情况，因为现在许多浏览器在没有被要求的情况下更新自己或指示更新，但在公司中不是这样。</p><p id="839c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对软件和软件更新有严格的规定。许多公司使用过时的软件工作，或者使用过时的浏览器上网。这是一个基本问题，也影响HTML和CSS，以及必须由各自的浏览器解释的编程语言，因此严重依赖。</p><h2 id="97d1" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">Transpiler和Bundler</h2><p id="bd86" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">作为一名web开发人员，您面临着必须在两种意识形态之间做出选择的问题:要么依赖现代的JavaScript、CSS或HTML特性来简化编程或带来更好的可用性等结果，要么不使用这些现代特性，因为由于过时的浏览器，它们并不适用于所有人。升级可能会给一定数量的用户带来问题。</p><p id="4d56" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，除此之外，几十年来还没有一个像样的JavaScript模块系统。Node.js通过CommonJS获得了自己的标准，但这仅限于服务器。</p><p id="752e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">浏览器很长一段时间都没有反应，这就是bundler和transpiler一起出现的原因。尽管你正在使用一种可以正常执行的<a class="ae lh" href="https://en.wikipedia.org/wiki/Just-in-time_compilation" rel="noopener ugc nofollow" target="_blank"> JIT </a> (Just-in-time)编译的编程语言，但你总是不得不处理一个有点复杂的构建过程，将源代码转换成实际代码，然后在浏览器中执行和解释。</p><p id="ea1a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">那是大约十年前的情况。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/030c07da4f8c74405491d72eee271ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PA4WqSZm2Fme8230"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@nateggrant?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">内特·格兰特</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="b01d" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">打字稿的兴起</h1><p id="b032" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">此时，正好十年前，微软发明了TypeScript。微软认为，如果你在部署之前需要一个transpiler来转换JavaScript代码，那么在这个构建过程中增加一个步骤也没什么大不了的。</p><p id="16b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">作为回报，您会得到一个很好的transpiler，它可以将现代JavaScript转换成普通JavaScript。此外，TypeScript是一个静态类型系统，它使JavaScript更具可伸缩性，提供了新的概念，并为在团队中高效开发JavaScript做出了重大贡献。</p><p id="59da" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">难怪TypeScript很快就确立了自己的地位，并成为当今企业JavaScript开发的标准。</p><p id="6ffe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，在过去的十年里，世界也发生了变化。不更新、不自我更新的浏览器仍然没有灭绝，但它们在今天扮演的角色比过去小得多。</p><p id="4311" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这意味着，如果你只处理<a class="ae lh" href="https://www.techopedia.com/definition/31094/evergreen-browser" rel="noopener ugc nofollow" target="_blank"> Evergreen浏览器</a>，现在没有transpiler也很有可能工作，并且有了ESM (ECMAScript模块)，现在也有了一个基于本地JavaScript的模块系统，可以在服务器端和客户端工作。</p><p id="2d0a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这意味着不再需要捆绑器，至少从技术角度来看是如此。bundler只是优化HTTP请求的另一个步骤，这样就可以从服务器上加载更少的单个小文件，只有几个大文件。这是简单的，在一天结束时可以更有效地完成。</p><h2 id="0048" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">打字稿，一个障碍？</h2><p id="642b" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">这意味着构建过程将逐渐变得更简单或更不相关。微软现在预计未来唯一剩下的必要工具是TypeScript编译器，因为web浏览器和其他JavaScript运行时环境不理解TypeScript。</p><p id="f93c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这意味着微软或者TypeScript突然从一个极其实用的工具变成了一个相当讨厌的东西。按照微软的说法，他们不想成为障碍，相反，他们想激励开发者。</p><p id="b7ee" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">把它分解成微软担心的结果，JavaScript开发迟早会像20年前一样快速、直接和高效，因为如果不使用TypeScript，迟早将不再需要transpilers等。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nn"><img src="../Images/9f5956bd9fea317d61b8233fbe782e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pc_OMTTFg9s0n_S2dqxudg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://devblogs.microsoft.com/typescript/a-proposal-for-type-syntax-in-javascript/" rel="noopener ugc nofollow" target="_blank">微软</a></p></figure><h2 id="bfb9" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">浏览器的类型脚本</h2><p id="2628" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">现在，一个显而易见的方法是要求集成TypeScript，作为web浏览器和其他运行时环境中JavaScript的替代编程语言。理论上，这并不牵强。<a class="ae lh" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank"> Deno </a>已经在尝试以某种方式做到这一点。</p><p id="e654" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Node.js有一个npm包叫做<a class="ae lh" href="https://www.npmjs.com/package/ts-node" rel="noopener ugc nofollow" target="_blank"> ts-node </a>，它采用了与Deno类似的方法。在构建/加载应用程序时编译到内存中，这样可能会感觉TypeScript立即运行，但实际上并不是这样。</p><p id="c0cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，TypeScript现在也已经成为一种更复杂的编程语言，对于微软来说，将TypeScript编译器的所有功能直接集成到普通的web浏览器中并不是很理想。这将是一个非常复杂的任务，需要苹果、谷歌、Mozilla等公司的合作来整合一个新的大标准。</p><p id="b464" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">微软回避所有这些努力，不管这样做对不对，这是一个公开的问题，但声明是，这根本不是他们想做的。</p><h2 id="66c0" class="nb mf it bd mg nc nd dn mk ne nf dp mo lr ng nh mq lv ni nj ms lz nk nl mu iz bi translated">JSDoc作为(以前的)中间道路</h2><p id="18eb" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">相反，现在已经考虑了一种不同的方法，这使我们最终想到了微软上周提出的建议。熟悉TypeScript的每个人都知道，在(a)编写普通JavaScript的方法和(b)完全转向TypeScript的方法之间有一条中间道路。</p><p id="28c9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">TypeScript允许您分析JavaScript上的代码，您甚至可以在那里存储类型，而不必通过简单地编写适当的<a class="ae lh" href="https://jsdoc.app/" rel="noopener ugc nofollow" target="_blank"> JSDoc </a>注释来编写TypeScript。对于一些公司来说，这是从TypeScript编译器获得类型支持的方法，而不必将项目完全迁移到TypeScript。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="no np l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">JSDoc示例</p></figure><p id="14ed" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最大的好处是，一方面，由于代码仍然是纯经典的JavaScript，所以不必编译，并且通过简单地删除所有JSDoc注释，随时可以非常容易地脱离TypeScript。我自己也使用过JSDoc，但是我不得不说它更像是TypeScript的廉价替代品。</p><p id="b8b5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你必须写更多的代码，一切都有点麻烦，更复杂的输入变得几乎不可能，但总比没有类型好。</p><h1 id="1387" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">建议:作为注释的类型</h1><p id="1656" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">因此，微软支持的提议是将TypeScript注释视为注释，因为这样你就不必再编译Typescript了。</p><p id="69f0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">类型注释和关键字(如“public”或“private”)将被视为注释，在JavaScript执行过程中会被忽略。这意味着您可以编写类型脚本，而无需将类型脚本编译成JavaScript代码。</p><p id="f9b3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，您仍然可以使用TypeScript编译器来触发类型检查，但是您不必编译代码来执行它。所谓的“d.ts”文件将不再需要，因为这些类型将在JavaScript代码中可用。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nq"><img src="../Images/c20422dfbfa41fc3d04975e119ad4da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AC6-0sbwG1WRfyuwxuBbIA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://devblogs.microsoft.com/typescript/a-proposal-for-type-syntax-in-javascript/" rel="noopener ugc nofollow" target="_blank">微软</a></p></figure><p id="a109" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，TypeScript编译器将只是一个可选的插件，就像ESLint这样的linter，所有类型注释在执行的代码中都是不可见的。</p><p id="e578" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这也是该提案被称为“<a class="ae lh" href="https://devblogs.microsoft.com/typescript/a-proposal-for-type-syntax-in-javascript/" rel="noopener ugc nofollow" target="_blank">类型评论</a>的原因。</p><h1 id="c4df" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">类型作为注释的缺点</h1><p id="d737" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">当我第一次读到这个的时候，<strong class="lk jd">我喜欢这个想法</strong>，那是我希望发生的事情<strong class="lk jd">。但是现在我想了一下，一遍又一遍地阅读了这个提议，我不得不承认我对此表示怀疑。理论上听起来很棒，但我看到了一些缺点。</strong></p><p id="f942" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们不应该忘记，TypeScript不仅仅由函数参数的基本类型组成，我们正在谈论接口、联合类型、类型关键字、非常复杂和嵌套的类型、“as”关键字、公共/私有/受保护的关键字、泛型类型等等。</p><p id="5ce8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">除了我们已经编写的实际注释之外，所有这些都必须被认为是JavaScript将来的注释。而且我也不想说这是不可能的，但是不是有两种类型的评论(单行和块评论)，你有很多不同的新类型的评论来一次性表达关键词。</p><p id="98fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以我不得不问自己这是不是一个好方法，因为实际上，我喜欢当前的解决方案，即使它并不完美，即使它需要先编译。</p><p id="4862" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，似乎<strong class="lk jd">我们将不得不在没有</strong>枚举的情况下编码，因为它们是值和类型的混合。这还包括命名空间、TypeScript的JSX支持、参数属性等等。所以要用枚举就要编译，不用枚举就不用编译。</p><p id="f8ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于这个建议，我看不出JavaScript和TypeScript之间有真正的区别。我怀疑这是否是未来。</p><p id="ec2b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我看来，这将导致混乱和一个新的TypeScript开发人员的双层社会。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/0bf7c9cecffc1dbe3e917b6f64222c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UvtS04TU8rDsawUG"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">韦斯·希克斯在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="8aff" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">最后的想法</h1><p id="641f" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在我看来，TypeScript要么应该保持完全独立，即使你必须编译它，要么JavaScript得到一个可选的静态类型系统，就像TypeScript那样。</p><p id="b5cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这意味着<strong class="lk jd"> TypeScript应该成为新的JavaScript </strong>，但是微软已经排除了这种可能性。因此，我的结论是，TypeScript不应该以这种方式进行根本性的改变，尤其是不应该以微软目前提出和支持的方式进行改变。</p><p id="f109" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">无论如何，我很好奇在接下来的几个月或几年里这将如何发展。</p><p id="e7d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">干杯！</p><h1 id="2dfb" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">来源</h1><ul class=""><li id="4502" class="ns nt it lk b ll mw lo mx lr nu lv nv lz nw md nx ny nz oa bi translated">JavaScript中类型语法的建议</li><li id="79af" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">ECMAScript提议:作为注释的类型 (Github存储库)</li></ul></div></div>    
</body>
</html>