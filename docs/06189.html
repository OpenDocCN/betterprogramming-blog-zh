<html>
<head>
<title>How to Make a Simple Game Loop Using Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用普通JavaScript制作一个简单的游戏循环</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-a-simple-game-loop-using-vanilla-javascript-f7f6360f68a2?source=collection_archive---------11-----------------------#2020-09-08">https://betterprogramming.pub/how-to-make-a-simple-game-loop-using-vanilla-javascript-f7f6360f68a2?source=collection_archive---------11-----------------------#2020-09-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9535" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">今天就创建你的第一个游戏</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/223b88021d517a10367e175aa41bc25e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7CwIiXUArsTZKsyfA0R2jg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><p id="1d5e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">嘿大家好！今天我想谈谈如何只用普通的JavaScript创建一个简单的游戏循环。最近，我和我的朋友决定做一个小游戏项目来提高我们的JS技能，我们不得不重新启动几次，直到我们可以正常运行游戏。所以我决定为所有开始有点困难的初学游戏程序员写一个快速教程。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="6e02" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">搭建你的画布</h1><p id="363d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">为了遵循本教程，您将需要设置三个文件。第一个是<code class="fe mv mw mx my b">index.html</code>文件，第二个是<code class="fe mv mw mx my b">script.js</code>文件，最后你需要一个<code class="fe mv mw mx my b">style.css</code>文件。</p><p id="6951" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">重要的事情先来。如果我们在做一个游戏，我们不可避免地会想在页面上画一些东西。最好的方法是在HTML中使用一种叫做<code class="fe mv mw mx my b">canvas</code>标签的东西。</p><p id="ccc4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mv mw mx my b">&lt;canvas&gt; id="canvas"&gt;&lt;/canvas&gt;</code></p><p id="afd0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mv mw mx my b">canvas</code>标签只是使用JavaScript和HTML在屏幕上绘制图形的一种方式。为了在我们的新游戏中使用它，我们将把它添加到我们的HTML文件中，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/5f678ef19efa97be445921b7432ad68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fHqOrkgwu977elpZXk_UYQ.png"/></div></div></figure><p id="d8fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">既然我们已经处理好了HTML，我们将使用JavaScript来访问我们的<code class="fe mv mw mx my b">canvas</code>标签，并修改它。为此，我们将这样做:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/e8e81114c6d2970ef4af67b93b7e377e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A6v6Rmgnu5VyhqMHIdWG0Q.png"/></div></div></figure><p id="1a0b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们在这里做的是将我们的<code class="fe mv mw mx my b">canvas</code>标签存储到一个名为“canvas”的变量中，然后我们将它的上下文设置为2D，因为我们将在屏幕上绘制2D图形。之后，我们设置画布的高度和宽度等于窗口的高度和宽度。</p><p id="51d8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们继续之前，让我们跳到我们的CSS，并快速样式化我们的画布:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/1a387d4ce65e0fe6f6924837fa0e6482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VWtON_TBxb0syi3hlcQHcw.png"/></div></div></figure><p id="8aa4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好了，快好了。希望我还没有失去你。我们要做的最后一件事是设置一个事件监听器，这样如果我们的用户最终调整了我们的屏幕，我们也可以调整我们的画布。我们会这样做:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/c437665cbdb0f0f66726ab8d049a93c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DSDTB_KNJrTKa3N0G5I6FQ.png"/></div></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="994b" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">让游戏循环</h1><p id="6a61" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">为了进行游戏循环，我们需要清空画布，并在游戏的每一帧重新绘制。这是因为为了让物体连续移动，我们必须在每一帧的新位置绘制它们，我们不希望之前绘制的精灵或形状停留在周围。所以我们将创建一个<code class="fe mv mw mx my b">animate</code>函数，它将清空我们每一帧的画布，就像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/2cd1547da792b83eeb7e00378cd13750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2e4xT_EM0WKvhcXYGc2jOA.png"/></div></div></figure><p id="f6dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那我们在这里做什么？首先，我们创建一个名为<code class="fe mv mw mx my b">animate</code>的函数来清空我们的画布。这基本上是我们的游戏循环，在这里你将结束绘制你的精灵到屏幕上。然后我们使用<code class="fe mv mw mx my b">clearRect</code>函数来完全擦除我们的画布。然后，当我们的窗口加载时，我们希望开始运行我们的游戏循环。</p><p id="99c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，我们调用<code class="fe mv mw mx my b">setInterval</code>函数，它接受两个参数。第一个是回调函数，这将是您希望它执行的函数。第二个是你希望它发射的时间间隔。时间间隔是以毫秒为单位的，所以我用1000/30，这样我们的函数每秒运行30次。如果你以前玩过视频游戏，你可能听说过术语<em class="ne">每秒30帧</em>。这正是我们在这里所做的！</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="af55" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">结论</h1><p id="36e1" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">仅此而已。你现在是一个真正的游戏开发者。恭喜你！现在你有一个简单的游戏循环，你可以在其中创建精灵，形状，平台和各种各样的酷东西。祝你好运，编程愉快。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="902f" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">来源</h1><div class="nf ng gp gr nh ni"><a href="https://www.w3schools.com/tags/tag_canvas.asp" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">HTML标签</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">组织良好，易于理解的网站建设教程，有很多如何使用HTML，CSS，JavaScript的例子…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">www.w3schools.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div></div>    
</body>
</html>