<html>
<head>
<title>Add Video to Your React Native App Using react-native-video</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用react-native-video将视频添加到React本机应用程序中</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-video-to-your-react-native-app-using-react-native-video-f020e90059de?source=collection_archive---------0-----------------------#2021-01-08">https://betterprogramming.pub/add-video-to-your-react-native-app-using-react-native-video-f020e90059de?source=collection_archive---------0-----------------------#2021-01-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0700" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React原生应用中使用本地和基于URL的视频</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8480feafcfcb4b9add3b73a483c1c765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FBFDUJR18QyMjwf8"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@donofunk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">多诺万·席尔瓦</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="b671" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">开始</h1><p id="5b71" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">您需要做的第一件事是在系统上的任意位置创建一个文件夹。我喜欢使用下载或桌面文件夹。创建一个名为<code class="fe mr ms mt mu b">rnvideoproject</code>的文件夹。</p><p id="1495" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">完成后，打开终端/命令提示符，导航到刚刚创建的文件夹。一旦你完成了这些，输入命令<code class="fe mr ms mt mu b">react-native init rnvideoproject</code>。</p><p id="ef64" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">这将开始创建React本地项目和所有必要的文件/文件夹。完成后(可能需要几分钟),在您喜欢的代码编辑器中打开文件夹。我一直用<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>。完成此操作后，在Visual Studio代码中打开终端，并确保您位于文件夹的根位置。一旦你确定你是，输入下面的命令。</p><pre class="kg kh ki kj gt na mu nb nc aw nd bi"><span id="5e2d" class="ne le iq mu b gy nf ng l nh ni">react native run ios </span></pre><p id="602b" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">这将打开一个模拟iOS手机，展示我们的React原生项目。</p><p id="b34b" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">接下来要做的就是安装react-native-video这个包。</p><pre class="kg kh ki kj gt na mu nb nc aw nd bi"><span id="8cb0" class="ne le iq mu b gy nf ng l nh ni">npm install --save react-native-video</span></pre><p id="aa8f" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">react-native-video基本上是一个允许在React Native中显示/使用视频组件的包。它提供了各种功能，例如能够静音视频，只播放音频而不播放视频，以及当通知在屏幕前面时暂停或播放视频。</p><div class="nj nk gp gr nl nm"><a href="https://www.npmjs.com/package/react-native-video" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">反应-原生-视频</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">react-native的一个组件，参见react-native-login！版本5.x建议Android的react-native &gt; = 0 . 60 . 0…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">www.npmjs.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kp nm"/></div></div></a></div><p id="cde3" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">下一步是在代码编辑器终端中运行下面的命令。</p><pre class="kg kh ki kj gt na mu nb nc aw nd bi"><span id="f4dc" class="ne le iq mu b gy nf ng l nh ni">cd ios &amp;&amp; pod install</span></pre><p id="8bb9" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">这将为react-native-video包安装必要的pod依赖项。</p><p id="672a" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">下一步，请打开文件<code class="fe mr ms mt mu b">App.js</code>，用以下内容替换<code class="fe mr ms mt mu b">const</code>或<code class="fe mr ms mt mu b">class</code> app。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="69ab" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">现在你的应用应该看起来像你下面看到的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/02e586c11dc26df1e77bcba0df6f69c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*1II4Crfu1h7ywfMC_8loAA.png"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="decf" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><strong class="ak">远程视频网址</strong></h1><p id="5273" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">下一步是从react-native-video包中导入视频组件。为此，输入下面的代码，在这里导入<code class="fe mr ms mt mu b">App.js</code>文件中的其余组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/89740a8e20c719932b3f85c33eb48b76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ry_WmCZ-Ty5Mt3i-hgFCXQ.png"/></div></div></figure><pre class="kg kh ki kj gt na mu nb nc aw nd bi"><span id="9c24" class="ne le iq mu b gy nf ng l nh ni">import Video from ‘react-native-video’</span></pre><p id="2935" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">对于视频组件，有一些很重要的属性。下面是一个在React本机模拟器上正确显示的视频组件的示例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="4178" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">所以我们将<code class="fe mr ms mt mu b">source</code>属性设置为来自一个网站的样本mp4文件(一只非常可爱的动画兔子，如果我可以这么说的话)。</p><p id="9039" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">我们已经将视频组件的宽度和高度设置为300。</p><p id="9212" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">controls</code>属性是<code class="fe mr ms mt mu b">true</code>，这意味着用户可以看到视频的控件，比如暂停和全屏。默认情况下这是<code class="fe mr ms mt mu b">true</code>。如果我们将属性设置为<code class="fe mr ms mt mu b">false</code>，那么控件将不会显示给用户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/cb3bec9feb83e0fa26871597d2015c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*q0PcFu5bu99HZMRJ1sAGsg.png"/></div></figure><p id="ac62" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">还有一个名为<code class="fe mr ms mt mu b">audioOnly</code>的属性，当设置为<code class="fe mr ms mt mu b">true</code>时，将只播放音频轨道而不播放视频轨道。但是，为了实现这一点，还必须设置视频组件的<code class="fe mr ms mt mu b">poster</code>属性。<code class="fe mr ms mt mu b">poster</code>属性是一个字符串，它指示当音频正在播放而视频没有播放时应该显示的图像。如果没有设置<code class="fe mr ms mt mu b">poster</code>属性，那么<code class="fe mr ms mt mu b">audioOnly</code>将不工作。</p><p id="d0db" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">下面是一个我如何使用<code class="fe mr ms mt mu b">audioOnly</code>属性的例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="9209" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">我已经将<code class="fe mr ms mt mu b">audioOnly</code>设置为<code class="fe mr ms mt mu b">true</code>，并将<code class="fe mr ms mt mu b">poster</code>属性设置为一张可卡犬的图片。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/13178f8a3599fdf71a05b3efc61114a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*wgsSkuN5PyzMf2o_VlHwDQ.png"/></div></figure><p id="0525" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">还有其他一些很酷的属性，比如<code class="fe mr ms mt mu b">paused</code>和<code class="fe mr ms mt mu b">muted</code>，它们设置为<code class="fe mr ms mt mu b">true</code>可以暂停或静音视频。</p><p id="8c35" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">一个重要的属性是<code class="fe mr ms mt mu b">ref</code>属性，它基本上存储了一个视频组件的引用，因此您可以在没有道具/状态的情况下对视频组件进行更改。</p><p id="ca75" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">你可以使用下面的代码作为参考。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="aec6" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">onBuffer</code>是视频缓冲时运行的属性。您可以将该属性设置为一个函数，以便在视频缓冲时向用户显示某些内容。例如，您可能希望在远程URL上显示一个大型视频，这可能需要一段时间来缓冲。您可以将这个值传递给state，如果<code class="fe mr ms mt mu b">onBuffer</code>值是<code class="fe mr ms mt mu b">true</code>，那么将向用户显示一个加载图标。在这种情况下，这可能很方便。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="41dc" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">上面是一个如何使用<code class="fe mr ms mt mu b">onBuffer</code>的例子。您只需要传入函数名，参数将包含从<code class="fe mr ms mt mu b">onBuffer</code>返回的对象，该对象包含一个<code class="fe mr ms mt mu b">isBuffering</code>和一个<code class="fe mr ms mt mu b">target</code>属性。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="4111" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><strong class="ak">本地视频文件</strong></h1><p id="f935" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">下面我将向你展示如何使用react-native-video添加一个本地视频文件来显示在你的React Native应用上。我们将在以下URL使用mp4文件。</p><p id="3728" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><a class="ae kv" href="https://file-examples-com.github.io/uploads/2017/04/file_example_MP4_480_1_5MG.mp4" rel="noopener ugc nofollow" target="_blank">https://file-examples-com . github . io/uploads/2017/04/file _ example _ MP4 _ 480 _ 1 _ 5mg . MP4</a></p><p id="ec69" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">打开上面的网址后，点击视频右边的三个点，然后点击下载。</p><p id="7ea5" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">下载文件后，将视频复制到项目文件夹的根目录下。现在，您需要在<code class="fe mr ms mt mu b">render</code>方法中创建一个变量，该变量是mp4文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="a071" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">从上面可以看出，我们需要名为<code class="fe mr ms mt mu b">earth.mp4</code>的文件，并且已经将视频组件的源设置为等于变量<code class="fe mr ms mt mu b">earthVideo</code>。现在视频看起来如下，而不是显示动画兔子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/4ae9e75e1f6e73d2ba081024c17e7265.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*0NdmRmHvRTIzGLw-5jR7RA.png"/></div></figure><p id="0d1d" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">这就是本教程的全部内容。我为这篇文章的简短道歉，但是我只是想回顾一下如何使用视频组件的基础知识和一些最重要的属性。然而，仍然有大量的其他属性/事件非常有用，我将在下面记录下来供您考虑。</p><p id="e087" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">pictureInPicture</code> ( <code class="fe mr ms mt mu b">true</code> / <code class="fe mr ms mt mu b">false</code> ) —决定视频是否画中画播放。(从文档来看，这只适用于iOS。)</p><p id="0087" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">playWhenInactive</code> ( <code class="fe mr ms mt mu b">true</code> / <code class="fe mr ms mt mu b">false</code> )—这决定当通知中心位于视频前面时，是否播放视频。(从文档来看，这只适用于iOS。)</p><p id="da68" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">rate</code>—(0.0–1.0)视频播放的速度。(0.0暂停视频，1.0以常规速度播放视频)。所有平台。</p><p id="4fed" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">source </code> —播放媒体的来源。这可能来自本地文件、远程URL或SD卡中的文件。所有平台。</p><p id="f0cd" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">onLoad</code> —当媒体可以播放时运行的事件属性/回调函数。</p><p id="6af5" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated"><code class="fe mr ms mt mu b">onEnd</code> —媒体播放结束时运行的回调函数。</p><p id="b8f3" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">react-native-video是一个非常棒的包，它有大量的属性、回调函数和回调函数中的属性，如果你想在React Native应用程序中使用视频，它绝对是一个值得检验和使用(和支持)的包。</p><p id="6f67" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">我希望你能从这篇文章中学到一些东西。</p><p id="4ee7" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">谢谢大家！</p><p id="7d29" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">也可以随意看看我的博客(我希望那里有其他类型的文章)-<a class="ae kv" href="https://simplyreact.uk/" rel="noopener ugc nofollow" target="_blank">https://simplyreact.uk/</a></p><p id="dd13" class="pw-post-body-paragraph lv lw iq lx b ly mv jr ma mb mw ju md me mx mg mh mi my mk ml mm mz mo mp mq ij bi translated">亚历克斯</p></div></div>    
</body>
</html>