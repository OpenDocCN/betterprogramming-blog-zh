# 用 Python 定义初始化方法的 6 个最佳实践

> 原文：<https://betterprogramming.pub/6-best-practices-for-defining-the-initialization-method-in-python-9173808bfb8f>

## 编写可读和可维护的 Python 代码

![](img/0a01065f3444b329cf2c16edb5684ad1.png)

由 [Fab Lentz](https://unsplash.com/@fossy?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

Python 作为面向对象编程语言的重要基石是相关类的定义，用于管理和处理程序中的数据。当我们创建类时，我们定义的第一个方法是初始化方法:`__init__`。将最佳实践应用于该方法将确保读者很容易理解该类的实例对象。在本文中，我想回顾一下定义`__init__`方法的最佳实践。

# 1.把它放在顶部

对我们大多数人来说，这听起来是显而易见的，但我见过有人将它和其他属性一起“隐藏”在类的主体深处。重要的是把它放在类的顶部，在任何其他方法之前。这就是读者应该寻找`__init__`方法的地方。

如果您有类属性，您应该将`__init__`方法放在这些类属性之后。您必须在您为项目定义的所有类中保持一致，这样读者才不会感到困惑。

# 2.将第一个参数命名为 Self

首先你要明白第一个参数是什么意思。第一个参数是指调用`__init__`方法的实例对象。您可能听说过实例化这个术语，但是`__init__`方法本身并不等同于实例化。顾名思义，`__init__`就是初始化，指的是设置新创建的实例对象的初始状态的过程。

按照惯例，将第一个参数命名为 self 很重要，尽管并不要求这样做。顺便提一下，`self`在 Python 中不是一个关键字，不像许多其他语言可能使用`this`、`self`或`it`作为保留关键字来引用当前调用的实例对象。

# 3.设置所有实例属性

Python 不限制在类中定义实例属性的位置。但是，这并不意味着您可以将实例属性分散到类中的任何地方。考虑下面的例子:

定义实例属性

如上所示，我们可以通过初始化它们的名称来创建一个`Student`实例。稍后，我们可以调用`verify_registration`来获取注册状态，调用`get_guardian_name`来获取学生的监护人信息。然而，这种实现模式并不可取，因为当您将实例属性分散到各处时，代码的读者将无法确定一个实例具有什么属性。相反，最佳实践是将所有实例属性放在`__init__`中，这样读者就可以确定地知道实例具有哪些属性。以下实现采用了所需的模式:

实例属性的单一位置

# 4.避免使用**kwargs

在 Python 中，`**kwargs`用于表示函数定义中不同数量的关键字参数。因此，在`__init__`方法中包含`**kwargs`在语法上是正确的。尽管在某些情况下使用`__init__`中的`**kwargs`是有效的，但是在大多数情况下，您并不希望使用它，因为它屏蔽了实例初始化所需的参数。

我猜一些人使用`**kwargs`的一个主要理由是让`__init__`方法看起来“干净”然而，我相信明确的总是比含蓄的好。虽然在`__init__`方法头中列出所有参数看起来很麻烦，但是我们很清楚用户在创建实例对象时需要指定哪些参数。

# 5.设置适当的默认值

如果您知道应该为某些属性设置什么初始值，您可以在`__init__`头中指定它们，这样用户在创建实例时就不需要设置这些参数。或者，如果某些值适用于大多数实例化场景，您也可以设置这些参数。下面是一个可能的例子:

```
class Student:
    def __init__(self, name, bus_rider=True):
        self.name = name
        self.bus_rider = bus_rider
```

然而，应该注意的是，当参数是可变数据结构时，您将做一些不同的事情。以下是错误的:

```
class Student:
    def __init__(self, name, subjects=["maths", "physics"]):
        self.name = name
        self.subjects = subjects
```

问题是，当您将`[“maths”, “physics”]`设置为默认值时，*这个列表对象是在函数定义*中创建的，并将由所有实例共享**。以下代码显示了问题所在:**

```
>>> student0 = Student("John")
>>> student0.subjects.append("music")
>>> student0.subjects
['maths', 'physics', 'music']
>>> student1 = Student("Ashley")
>>> student1.subjects
['maths', 'physics', 'music']
```

# 6.文档字符串

就像其他公共方法一样，您应该为`__init__`方法准备适当的文档字符串。尽管有些人喜欢在类级别记录构造信息(例如，将初始化相关的信息放在类头下面)，但通常建议您将 docstrings 放在`__init__`方法的正下方。

对于每个参数，您需要指定参数的类型——是`str`还是`int`。在这些信息之后，您需要提供这个参数是什么或者它有什么作用的简要描述。如果有默认值，也请用任何适用的理由/解释加以说明。

# 结论

这是我在为 Python 中的类定义`__init__`方法时遵循的最佳实践列表。我个人认为它们有助于保持代码的可读性。如果你有什么要补充的，请随时留下评论。

感谢阅读。