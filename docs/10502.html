<html>
<head>
<title>Convert Videos to ASCII Movies Art With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python将视频转换为ASCII电影艺术</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/convert-videos-to-ascii-movies-art-36073b0af5a6?source=collection_archive---------9-----------------------#2022-01-11">https://betterprogramming.pub/convert-videos-to-ascii-movies-art-36073b0af5a6?source=collection_archive---------9-----------------------#2022-01-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a074" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何从视频中生成ASCII动画</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aa165e6cdf045bf377696c87ca1d7f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eXr1vntnh4fasVTk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jakobowens1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">雅各布·欧文斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="852b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多种艺术，从绘画到音乐。<a class="ae ky" href="https://en.wikipedia.org/wiki/ASCII_art" rel="noopener ugc nofollow" target="_blank"> ASCII艺术</a>也不例外。它由仅使用可打印的ASCII字符<a class="ae ky" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank">来表示概念和图片组成，这些字符是你可以在键盘上找到的，只是为了清楚起见。ASCII艺术最简单的形式是表情符号，如<code class="fe lv lw lx ly b">:-)</code>或<code class="fe lv lw lx ly b">/:-(</code>。它们还可以扩展到更复杂的图像，比如由</a><a class="ae ky" href="https://www.codegrepper.com/profile/crazy-copperhead-pf2ju2na4oh3" rel="noopener ugc nofollow" target="_blank">疯狂铜斑蛇</a>制作的这棵树:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2b58" class="md me it ly b gy mf mg l mh mi">           _ ._  _ , _ ._<br/>         (_ ' ( `  )_  .__)<br/>       ( (  (    )   `)  ) _)<br/>      (__ (_   (_ . _) _) ,__)<br/>          `~~`\ ' . /`~~`<br/>               ;   ;<br/>               /   \<br/> _____________/_ __ \_____________</span></pre><p id="7fc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">甚至是像这样的真实生活照片:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/102d888eea412e87f074974628919798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cPsOjWqxjX82AHAl.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">原始图像的ASCII版本由<a class="ae ky" href="https://unsplash.com/@freestocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> freestocks </a>在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上生成</p></figure><p id="051f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你感兴趣，我不久前写了一篇关于将图像转换成ASCII艺术的文章。我建议你在继续之前检查一下，因为它可能会使我将要谈论的内容更加清晰。</p><div class="mk ml gp gr mm mn"><a href="https://towardsdatascience.com/convert-pictures-to-ascii-art-ece89582d65b" rel="noopener follow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">将图片转换为ASCII图片</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">关于图像如何工作以及如何将像素表示为ASCII字符的简要指南——包括代码示例。</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb ks mn"/></div></div></a></div><p id="6835" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是创建一个完整的ASCII视频，这将在本文中讨论。</p><h1 id="b9b5" class="nc me it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">视频文件和帧</h1><p id="a803" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">您可能已经知道，不考虑音频，视频文件由两个主要部分组成:</p><ul class=""><li id="cfa8" class="ny nz it lb b lc ld lf lg li oa lm ob lq oc lu od oe of og bi translated">头，包含元数据，如<a class="ae ky" href="https://en.wikipedia.org/wiki/File_format#:~:text=container)%20file%20formats.-,Magic%20number,-%5Bedit%5D" rel="noopener ugc nofollow" target="_blank">文件格式签名</a>或帧速率。</li><li id="f1b3" class="ny nz it lb b lc oh lf oi li oj lm ok lq ol lu od oe of og bi translated">数据部分，包含有关其帧和像素的信息。</li></ul><p id="6296" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每一帧实际上是一个像素矩阵(二维数组)，每个像素表示为一组<a class="ae ky" href="https://en.wikipedia.org/wiki/Channel_(digital_image)" rel="noopener ugc nofollow" target="_blank">通道</a>，用于指示像素的颜色和不透明度。常见的通道配置是RGB(红绿蓝)和RGBA(红绿蓝Alpha)。</p><h1 id="924c" class="nc me it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">ASCII转换算法</h1><p id="8efb" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">对于这个代码示例，为了简单起见，我将使用Python，这样任何人都可以理解。</p><p id="95ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，你必须加载视频文件，将其转换为ASCII艺术。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="2eaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦访问了它的内容，就必须读取它的头，以便获得一些有用的元数据，比如宽度、高度、帧速率(fps)和帧数。这些信息对下一步至关重要。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="1ccb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个新文件来存储转换后的视频。为了清楚起见，我将把这样的文件称为<code class="fe lv lw lx ly b">.ascii</code>文件，但是您可以给它指定您喜欢的任何扩展名。然后，您必须将之前收集的元数据作为它的头。为了以后能够读取和播放ASCII视频文件，这一步至关重要。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="2c29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，一个一个地获取视频帧。对于每一帧，将其每个像素转换为相应的ASCII字符。我们将在后面详细讨论这个过程。然后，将新转换的帧存储在<code class="fe lv lw lx ly b">.ascii</code>文件中。你也可以把每一帧都保存在RAM中，但是这需要大量的千兆字节的内存。解决方案是将帧存储在一个文件中，并在播放视频时根据需要加载它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="d981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，视频播放器将不得不加载<code class="fe lv lw lx ly b">.ascii</code>文件并读取其文件头以获取视频的元数据，这些元数据将用于读取单个帧并以正确的帧速率显示它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="fbdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，从文件中读取帧并将它们逐个打印到控制台，同时考虑帧速率。稍后我将讨论这个自定义打印功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><h1 id="3468" class="nc me it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">将帧转换为ASCII</h1><p id="576d" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">现在，让我们更深入地研究如何将帧表示为ASCII艺术。为了进行解释，我将用C扩展Python来编写更多资源密集型函数，因为Python太慢了，无法在合理的时间内执行它们。我省略了用C函数扩展Python的具体步骤，因为这超出了本文的范围，但我将在最后链接GitHub repo和完整代码。</p><p id="eb73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经知道，帧是一组像素。每个像素由三个值的数组表示:红色、绿色和蓝色的颜色通道。帧中的每个像素都必须被翻译成ASCII字符才能打印到控制台。</p><p id="4457" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应该使用哪个ASCII字符取决于像素的“强度”。强度被定义为像素激活的百分比:因此RGB值越高，强度越高。例如，RGB值为<code class="fe lv lw lx ly b">255, 255, 255</code>的像素的强度为100%，而<code class="fe lv lw lx ly b">0, 0, 0</code>为0%。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="4774" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您必须根据像素强度选择一个ASCII字符。字符从占据较小空间的字符到最大的字符排序。比如，“”肯定比“@”更纤细，因此也没有那么强烈。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="ed40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到这一点，您必须迭代帧中的每一行，并计算每个像素的亮度和相应的ASCII字符。因为大多数终端不允许你减少行与行之间的间距，框架会被拉长，所以有必要在每个字符后加一个空格来固定纵横比。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><h1 id="61fe" class="nc me it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">播放视频和帧速率</h1><p id="0b65" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">每个视频都有一个固定的帧速率，使帧的流动感觉自然。当将视频转换为ASCII艺术时，您必须将其保存在<code class="fe lv lw lx ly b">.ascii</code>文件头中。当显示视频时，它将被用来改变每一帧的持续时间。</p><p id="bb04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于在将帧转换为ASCII时我们已经包含了换行符(<code class="fe lv lw lx ly b">\n</code>)，所以我们不必介意长宽比或帧大小:您可以清除屏幕并将整个ASCII字符串帧打印到控制台。</p><p id="bab0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">棘手的部分是计算在移动到下一帧之前，该帧应该在屏幕上持续多久。出于这个原因，你必须测量绘制图像所用的时间，并从默认的帧持续时间中减去它，默认的帧持续时间是通过将1秒除以FPS，然后将结果乘以<code class="fe lv lw lx ly b">1e9</code>以纳秒为单位来表示的。</p><p id="5262" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在帧持续时间的剩余时间内休眠，如果有的话。如果打印帧的时间比默认的帧持续时间长，视频会以较慢的速度播放。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="7699" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个用这个工具生成的ASCII电影艺术的例子。<a class="ae ky" href="https://www.youtube.com/watch?v=My2puqWOVqw" rel="noopener ugc nofollow" target="_blank">在这里</a>你可以找到原始视频。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo on l"/></div></figure><p id="759d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，要使影片适合您的终端，您可能需要减小字体。另外，我建议你使用方形的ASCII字体。我推荐的字体包含在GitHub库中。</p><h1 id="895a" class="nc me it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">结论</h1><p id="bc42" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">总结一下，这是一个将视频文件转换为ASCII艺术电影的算法解释，并附有代码示例。如果您对完整的、经过彻底注释的代码感兴趣，请查看GitHub上的项目。</p><p id="d799" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这篇文章。感谢阅读！</p></div></div>    
</body>
</html>