<html>
<head>
<title>Build Charts in Angular Without Using a Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不使用库在Angular中构建图表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/charting-with-angular-without-using-any-library-709f5451f34a?source=collection_archive---------10-----------------------#2020-01-09">https://betterprogramming.pub/charting-with-angular-without-using-any-library-709f5451f34a?source=collection_archive---------10-----------------------#2020-01-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8eb1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">没有依赖关系的图表</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/bd49fc0c7f213e5c696e244bfb4afdfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*7AaV8P00kNQBotGK1Bp7mA.png"/></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="46fe" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">我们要创造什么？</h1><p id="95fd" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我们将使用Angular和<a class="ae ml" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" rel="noopener ugc nofollow" target="_blank">画布API </a>创建一个图表。我们不打算使用外部图表库。</p><p id="b3ef" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">上面的图表包含了几个世纪以来得分最多的印度板球运动员的信息。我们在上面使用/显示的数据仅仅是为了教程的目的，我们的板球运动员可能在你读这篇文章的时候得分更多。</p><p id="382f" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">让我们开始吧。</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="c9c1" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">导入项目</h1><div class="mr ms gp gr mt mu"><a href="https://github.com/Ravitejavv/columnChart" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">ravite javv/柱形图</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">此项目是使用Angular CLI版本7.3.8生成的。为开发服务器运行ng serve。导航到…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">github.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni ko mu"/></div></div></a></div></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="f89f" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated"><strong class="ak">实施计划</strong></h1><p id="53a9" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我们将使用两个组件来完成此应用程序:</p><ol class=""><li id="fe65" class="nj nk it lr b ls mm lv mn ly nl mc nm mg nn mk no np nq nr bi translated">App组件。</li><li id="1e56" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">图表组件。</li></ol><p id="f8ec" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">app组件主要用于创建图表数据和图表元数据。</p><p id="85ce" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">元数据包含有关图表标题、颜色、字体、背景等信息。与图表样式和所需的其他元信息相关。</p><p id="1d98" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">图表组件包含使用应用程序组件提供的数据绘制图表的逻辑，并使用元数据设置图表的样式。</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="3e99" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">决赛成绩</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/bd49fc0c7f213e5c696e244bfb4afdfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*7AaV8P00kNQBotGK1Bp7mA.png"/></div></figure><p id="9648" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">为了得到上面的图表，我们将执行以下步骤。</p><ol class=""><li id="544b" class="nj nk it lr b ls mm lv mn ly nl mc nm mg nn mk no np nq nr bi translated">我们需要一个宽度为50px，高度为每个板球运动员的世纪计数的栏。</li><li id="50c2" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">列栏应该有颜色。</li><li id="57c3" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">每个栏之间应该有空白。</li><li id="06d1" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">每一栏的底部都应该有板球运动员的名字。</li><li id="479c" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">每一栏应该在栏的顶部显示板球运动员的世纪计数。</li><li id="fe4f" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">图表的标题。</li><li id="a87d" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">图表的页脚文本。</li><li id="23f3" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk no np nq nr bi translated">背景中的水平线代表风格。</li></ol><p id="1dd6" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">在实施这些步骤之前，我们应该了解canvas…</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="91c7" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">什么是画布？</h1><p id="5a0e" class="pw-post-body-paragraph lp lq it lr b ls lt ju lu lv lw jx lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">Canvas是一个HTML元素。使用画布和JavaScript，我们能够绘制形状和创建动画。</p><p id="a801" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">画布API包含CanvasRenderingContext2D接口。该接口为绘制形状、文本和图像提供了2D渲染上下文。</p><p id="2e1a" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">CanvasRenderingContext2D包含用于绘制矩形、文本、路径和图像的属性和方法。CanvasRenderingContext2D可以进行线条样式、文本样式、填充、渐变和图案等样式设置。</p><pre class="kj kk kl km gt nx ny nz oa aw ob bi"><span id="d2e3" class="oc ky it ny b gy od oe l of og">&lt;canvas id=”barchart” width=”500" height=”500"&gt; &lt;/canvas&gt;</span></pre><p id="c7c2" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">上面的代码定义了canvas元素，赋予它500px的宽度和500px的高度。如果未指定宽度或高度，则使用默认宽度300像素和默认高度150像素。</p><pre class="kj kk kl km gt nx ny nz oa aw ob bi"><span id="b0af" class="oc ky it ny b gy od oe l of og">const canvas = &lt;HTMLCanvasElement&gt;document.getElementById('barchart');</span><span id="0381" class="oc ky it ny b gy oh oe l of og">const context = canvas.getContext('2d');</span></pre><p id="f8ae" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">为了在画布上绘制一些东西，我们需要访问渲染上下文<br/> (CanvasRenderingContext2D)。<code class="fe oi oj ok ny b">&lt;canvas&gt;</code>元素有一个名为<code class="fe oi oj ok ny b">getContext()</code>的方法。</p><p id="627e" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated"><code class="fe oi oj ok ny b">getContext()</code>将上下文的类型作为参数。对于2D图形，我们通过“<code class="fe oi oj ok ny b">2d</code>”。</p><p id="7973" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">使用上下文及其绘图方法、属性返回渲染上下文，我们可以用它们来创建形状和动画，具有更好的样式。</p><p id="ecfe" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">请看下面呈现上下文的属性和方法的用法。</p><pre class="kj kk kl km gt nx ny nz oa aw ob bi"><span id="542f" class="oc ky it ny b gy od oe l of og">context.fillStyle='#262a33';<br/>context.fillRect(0,0,500,500);</span></pre><p id="23c8" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated"><code class="fe oi oj ok ny b">CanvasRenderingContext2D.fillStyle</code>是画布2D API的属性。使用<code class="fe oi oj ok ny b">fillStyle</code>，我们可以给形状添加/填充颜色。</p><p id="6eb3" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated"><code class="fe oi oj ok ny b">fillRect()</code>方法绘制一个颜色填充的矩形，其起点在(0，0)，大小由宽度和高度指定。形状内部填充的颜色由当前的<code class="fe oi oj ok ny b">fillStyle</code>属性决定。</p><p id="4673" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated"><code class="fe oi oj ok ny b">fillRect</code>方法有四个参数，x位置、y位置、宽度和高度。默认情况下，画布坐标系从左上角开始。(X: 0，Y: 0)</p><ul class=""><li id="6ea6" class="nj nk it lr b ls mm lv mn ly nl mc nm mg nn mk ol np nq nr bi translated">向右移动增加X位置。</li><li id="0bf2" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk ol np nq nr bi translated">向下移动增加Y位置。</li><li id="e252" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk ol np nq nr bi translated">向左移动减少X位置。</li><li id="cc09" class="nj nk it lr b ls ns lv nt ly nu mc nv mg nw mk ol np nq nr bi translated">向上移动会减少Y位置。</li></ul><p id="07b8" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">以上<code class="fe oi oj ok ny b">fillRect</code>方法取x位置= 0，Y位置= 0，<br/>宽度= 500px，高度= 500px。</p><p id="e6a0" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">因此，矩形形状从左上角(0，0)开始，绘制宽500px、高500px的矩形形状，用颜色#262a33填充。</p><p id="3d7f" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">当我们对画布及其绘图环境有了一些基本的了解后，我们就可以开始开发我们的应用程序来实现最终的结果了。</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="5744" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">准备数据和元数据</h1><h2 id="407e" class="oc ky it bd kz om on dn ld oo op dp lh ly oq or lj mc os ot ll mg ou ov ln ow bi translated">应用程序组件</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure><h2 id="8827" class="oc ky it bd kz om on dn ld oo op dp lh ly oq or lj mc os ot ll mg ou ov ln ow bi translated">将数据和元数据传递给子组件</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure><h2 id="37af" class="oc ky it bd kz om on dn ld oo op dp lh ly oq or lj mc os ot ll mg ou ov ln ow bi translated">图表组件(读取数据和设置绘图上下文)</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure><p id="5289" class="pw-post-body-paragraph lp lq it lr b ls mm ju lu lv mn jx lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">当我们完成了数据、元数据和绘图上下文后，我们可以开始实施步骤以获得最终的图表。</p></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="6900" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">步骤1–5:绘制条形图方法</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi oz"><img src="../Images/514484f7b18c3bc50cdeeeeae1a345dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AiMMq9I-v1b8DOjVYODcVA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi oz"><img src="../Images/bc29fb442353446b804534b1e83069b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fDsZuzBl9KCk8wglHBgpGg.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="4e18" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">第六步:图表应该有一个标题</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi oz"><img src="../Images/52506d8cc99b5877d8ed00deeb7476bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aBGwyeHbdM8pHalq4NK7TQ.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="f3b5" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">步骤7:向图表添加页脚文本</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi pe"><img src="../Images/e0c876632f1b8b4b7ab85568456b1568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hVCQ77k1ubqTCutbcg8tlQ.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="5a50" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">第八步:在背景中添加水平线作为样式</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="pa pb di pc bf pd"><div class="gh gi oz"><img src="../Images/f0a243e34862812f9352cb589439032f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EAMQ96jcIx8Y0xutsIni6w.png"/></div></div></figure></div><div class="ab cl kq kr hx ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="im in io ip iq"><h1 id="542e" class="kx ky it bd kz la lb lc ld le lf lg lh jz li ka lj kc lk kd ll kf lm kg ln lo bi translated">决赛成绩</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/bd49fc0c7f213e5c696e244bfb4afdfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*7AaV8P00kNQBotGK1Bp7mA.png"/></div></figure></div></div>    
</body>
</html>