# JSON 的秘密力量。纤细的

> 原文：<https://betterprogramming.pub/the-secret-power-of-json-stringify-f5aad9370ad>

## 这比看起来要复杂得多

![](img/a2456a428eb320d27139675d7c1762c0.png)

JavaScript 中有许多函数可以完成它们的工作。我们每天都在使用它们，但我们不知道它们的额外功能。有一天，我们看着文档，意识到它有比我们想象的更多的特性。

同样的事情也发生在我和`JSON.stringify`身上。在这个简短的教程中，我将向你展示我所学到的东西。

# 基础

`JSON.stringify`方法接受一个变量，并将其转换成 JSON 表示。

当有一个元素不能序列化为 JSON 时，问题就来了。

# 第二个论点

`JSON.stringify`有第二个参数——称为 replacer 参数。

您可以传递一个字符串数组，作为要包含的对象属性的白名单。

我们可以过滤掉不想显示的值。这些值可能是太大的项目(比如一个错误对象)或者没有可读的 JSON 表示。

replacer 参数也可以是一个函数。该函数接收`JSON.stringify`方法正在迭代的实际键和值。您可以用函数的返回值改变值的表示。如果你没有从这个函数返回任何东西或者返回`undefined`，那么这个条目将不会出现在结果中。

通过在函数中返回`undefined`，我们可以从结果中移除那些项目。

# 第三个论点

第三个参数控制最后一个字符串的间距。如果参数是一个数字，则 stringification 中的每一级都将缩进这个数量的空格字符。

如果第三个参数是一个字符串，它将被用来代替空格字符。

# 托克森方法

如果我们字符串化的对象有属性`toJSON`，它将定制字符串化过程。

您可以从方法返回一个新值，而不是序列化该对象，该值将被序列化，而不是原始对象。

# 演示时间

这里有一个 [CodePen](https://codepen.io/twhite96/pen/WNNRvKX) ，我在其中包含了上面的例子，你可以修改它。

# 最后的想法

有时看一下我们日常使用的那些函数的文档会有所收获。他们可能会给我们惊喜，我们可能会学到一些东西。保持对知识的渴望，阅读文档。