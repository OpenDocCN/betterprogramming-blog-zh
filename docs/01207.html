<html>
<head>
<title>Build Custom Transition Animations for iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为iOS构建自定义过渡动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/custom-transition-animation-ios-f1bb57686293?source=collection_archive---------5-----------------------#2019-08-22">https://betterprogramming.pub/custom-transition-animation-ios-f1bb57686293?source=collection_archive---------5-----------------------#2019-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ed0ae469f52b85806bc903661a432b12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-Z4ItOBPzGC7IafnX-YSg.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@helloimnik" rel="noopener ugc nofollow" target="_blank">你好我是Nik </a>在<a class="ae kf" href="https://unsplash.com/photos/MAgPyHRO0AA" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="da7f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们都想给我们的视图控制器转换添加一些swwoooosshhhh，对吗？内置的过渡动画工作，但他们看起来很无聊。我妈妈总是告诉我，如果我用心去做，我可以做任何事情，所以现在我告诉你:你可以更好地完成这个转变。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="90b8" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">入门指南</h1><p id="5cec" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">点击下载启动项目<a class="ae kf" href="https://www.dropbox.com/s/4n0fbogr1pf0cpw/Custom%20Transition.zip?dl=0" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="de58" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你建造并运行。你会看到一个应用程序，它被创建来反映默认过渡动画的简单优雅。继续点击几次“按压”和“弹出”按钮。我们将通过重新创建默认的push和pop <code class="fe mo mp mq mr b">UINavigationController</code>动画来做得更好。您可以据此创建自己的精彩过渡动画。</p><p id="6114" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我给你介绍一下主要玩家…</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="5b88" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">UIViewControllerTransitioningDelegate</h1><p id="c964" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">在iOS中，您可以通过实现自定义的<code class="fe mo mp mq mr b">UIViewControllerTransitioningDelegate</code>来编写视图控制器之间的自定义过渡。首先，我们必须创建一个将实现<code class="fe mo mp mq mr b">UIViewControllerTransitioningDelegate</code>协议的新对象。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a5cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">既然提到的协议符合<code class="fe mo mp mq mr b">NSObjectProtocol</code>，我们的animator对象也必须符合它。实现这一点最简单的方法就是简单地从<code class="fe mo mp mq mr b">NSObject</code>那里继承。<code class="fe mo mp mq mr b">UIViewControllerTransitioningDelegate </code>需要两种方法，你可以在上面看到:</p><ol class=""><li id="3dae" class="my mz it ki b kj kk kn ko kr na kv nb kz nc ld nd ne nf ng bi translated"><code class="fe mo mp mq mr b">animationController(forPresented presented: …) </code>:该方法负责演示动画。</li><li id="dea3" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated"><code class="fe mo mp mq mr b">animationController(forDismissed dismissed: …)</code>:这个方法负责辞退动画。</li></ol><p id="b831" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是这些函数只是负责转场，而不是动画本身。为此，我们必须实现负责这个自定义动画的自定义类。该课程将让我们定义我们想要的动画(效果)。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7d30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是动画中的幻灯片。我将解释每个步骤:</p><ol class=""><li id="39ef" class="my mz it ki b kj kk kn ko kr na kv nb kz nc ld nd ne nf ng bi translated">我们正在设定过渡期的持续时间。</li><li id="61d8" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">这就是奇迹发生的地方——这就是我们将编写自定义动画的地方。</li><li id="f59f" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">我们去拿控制器。我们要去(<code class="fe mo mp mq mr b">toViewController</code>)，而<code class="fe mo mp mq mr b">fromViewController</code>是我们要去的控制器。</li><li id="9ec3" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">获取屏幕的边界。</li><li id="96a8" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">将<code class="fe mo mp mq mr b">toViewController</code>视图添加到上下文<code class="fe mo mp mq mr b">containerView</code>中。</li><li id="5099" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">从上下文中获取过渡的持续时间，这样我们就可以用它来设置动画的持续时间。</li><li id="3386" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">通过将<code class="fe mo mp mq mr b">fromViewController</code>推到窗口的左侧来表演幻灯片动画魔术。</li><li id="8b66" class="my mz it ki b kj nh kn ni kr nj kv nk kz nl ld nd ne nf ng bi translated">完成过渡。</li></ol><p id="398f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在更新<code class="fe mo mp mq mr b">animationController(forPresented presented:…) </code>返回<strong class="ki iu"> </strong> <code class="fe mo mp mq mr b">SlidePushAnimation()</code>。</p><p id="deef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们需要对此进行测试，因此将<code class="fe mo mp mq mr b">FirstViewController</code>中的代码改为以下代码:</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2d3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在构建并运行应用程序。</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/7e440d34d4fc01fb31035ff67ed769ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/1*qxPIm2WpOKjPbnV2qgtjpw.gif"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">干杯！🍻🍺</p></figure><p id="cb78" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，现在我们需要制作<code class="fe mo mp mq mr b">POP</code>动画。我们需要为这个动画创建另一个自定义的<code class="fe mo mp mq mr b">UIViewControllerAnimatedTransitioning</code>类。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4c1b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在更新<code class="fe mo mp mq mr b">animationController(forDismissed dismissed:…) </code>返回<strong class="ki iu"> </strong> <code class="fe mo mp mq mr b">PopAnimation()</code>。</p><p id="1bcf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mo mp mq mr b">PopAnimation</code>类与<code class="fe mo mp mq mr b">SlidePushAnimation</code>非常相似。唯一的区别是变换动画不同。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="3a7b" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">结论</h1><p id="53e5" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">没那么复杂吧？用一种非常简单的方式，我们创建了一个自定义的“推-放”过渡动画。您可以轻松地调整这一点，并编写更好的自定义过渡动画。</p><p id="ab27" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Apple参考文档:<a class="ae kf" href="https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/CustomizingtheTransitionAnimations.html" rel="noopener ugc nofollow" target="_blank">https://developer . apple . com/library/archive/features ticles/ViewControllerPGforiPhoneOS/customizingthetransitionanimations . html</a></p></div></div>    
</body>
</html>