<html>
<head>
<title>Use These 5 Python Code Conventions to Make Your Codebase Better</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这5个Python代码约定来使你的代码库更好</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-these-5-python-code-conventions-to-make-your-codebase-better-c9bc5f30dc74?source=collection_archive---------8-----------------------#2022-05-11">https://betterprogramming.pub/use-these-5-python-code-conventions-to-make-your-codebase-better-c9bc5f30dc74?source=collection_archive---------8-----------------------#2022-05-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a1c4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写简洁干净的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/946692d21bd18200e7fdbdeda3cf1ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6aanMnH7wghn6hLnz1nXyg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者Nik Piepenbreier提供。</p></figure><p id="87f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Python中有一些编码约定，不仅使你的代码突出为入门级，而且效率更低！在这篇文章中，你将学习其中的5个习惯，以及如何改正它们，让你的代码更整洁，让你看起来像一个更高级的程序员。</p><p id="ac8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些编码习惯使您的代码更简单，并且通常更容易调试。所以，这些不仅仅是要打破的虚荣心习惯，而是真正要改变你用Python编码的方式。</p><p id="d0d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们开始吧！</p><h1 id="43ed" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">习惯1:优化你的任务</h1><p id="c963" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">你知道那些时候你写一个<code class="fe mm mn mo mp b">if-else</code>块只是为了给一个新变量赋值吗？让我们看看这个是什么样子的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="72ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码中，您对一个表达式求值以检查它是否为真。如果是，变量<code class="fe mm mn mo mp b">a</code>被赋值<code class="fe mm mn mo mp b">10</code>。否则，该变量被赋予<code class="fe mm mn mo mp b">20</code>。</p><p id="93d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然这种方法可行，但它也有四行长！虽然我不鼓励为了简洁而简洁，但是让我们来看看一个三元赋值，它将上面的代码简化为一行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="2eed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我喜欢上面这种方法的原因是代码更具表现力。代码清楚地表明我们希望给变量<code class="fe mm mn mo mp b">a</code>赋值。我们不知道代码希望完成什么！</p><h1 id="9b8d" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">习惯2:使用all()和any()代替For循环</h1><p id="e435" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在许多情况下，您可能会发现自己在遍历一个列表或元组，以检查某些或所有值是否匹配某个条件。例如，您可能希望检查列表中的所有值是否都大于或等于10。让我们看看如何使用for循环来实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9b59" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码中，我们检查是否所有的值都大于或等于10。让我们来分解一下我们做了什么:</p><ol class=""><li id="9474" class="mx my it la b lb lc le lf lh mz ll na lp nb lt nc nd ne nf bi translated">第2行实例化了一个值列表</li><li id="83e4" class="mx my it la b lb ng le nh lh ni ll nj lp nk lt nc nd ne nf bi translated">第4行将一个条件变量设置为<code class="fe mm mn mo mp b">True</code></li><li id="c110" class="mx my it la b lb ng le nh lh ni ll nj lp nk lt nc nd ne nf bi translated">第7行到第10行循环遍历每个项目，检查值是否≤10。如果是，条件被设置为<code class="fe mm mn mo mp b">False</code>并且循环被中断。</li></ol><p id="6516" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过使用令人难以置信的<code class="fe mm mn mo mp b">all()</code>函数，我们可以让这变得非常非常简单！该函数采用一个布尔的iterable，如果所有值都是<code class="fe mm mn mo mp b">True.</code>，将返回<code class="fe mm mn mo mp b">True</code></p><p id="679a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看如何重构我们的代码来使用<code class="fe mm mn mo mp b">all()</code>函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="09d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码中，我们遍历列表，评估每个值是否≤10。这将返回一个布尔值，<code class="fe mm mn mo mp b">all()</code>函数可以处理！</p><p id="35b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">专业提示:如果您只想检查任何值是否满足条件，您可以使用<code class="fe mm mn mo mp b">any()</code>函数！</p><h1 id="e008" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">习惯3:使用enumerate()代替复杂的循环</h1><p id="4596" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">这无疑是本文中我最喜欢的技巧！当您开始使用Python时，您会发现自己经常迭代一个列表。在某些情况下，您可能希望访问该项以及该项的索引位置。</p><p id="31af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看你会怎么做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="2589" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的代码中，我们使用<code class="fe mm mn mo mp b">range()</code>函数访问列表的索引，然后打印出索引和相应的条目。</p><p id="baac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，这种方法是可行的——但是它与Pythonic相差甚远。如果需要从iterable中访问索引和条目，可以使用<code class="fe mm mn mo mp b">enumerate()</code>函数更好地完成。</p><p id="a7a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">enumerate函数返回一个生成器对象，包含索引和项目的元组。让我们深入了解如何重构我们的代码！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="d6ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更好的是，我们可以设置一个可选参数，从不同的计数器开始。在我们的例子中，我们从“步骤0”开始，因为Python使用基于0的索引。然而，它并不完全可读！</p><p id="5d8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">专业提示:尝试在函数中设置<code class="fe mm mn mo mp b">start=1</code>参数，看看你的结果如何变化！</p><h1 id="e4a8" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">习惯4:使用in检查成员资格</h1><p id="e0f5" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在许多情况下，您将编写<code class="fe mm mn mo mp b">if-else</code>块来检查字典中项的成员资格。在这些情况下，您感兴趣的是一个键是否存在。</p><p id="560c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看您通常会遇到什么样的代码，它显式地检查字典的键:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="0cb7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然这种方法工作得很好，但是您实际上并不需要显式地检查<code class="fe mm mn mo mp b">.keys()</code>方法！主要的好处是这使得你的代码更加清晰。</p><p id="7a58" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看如何重新格式化我们的方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="bdb4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在下一节中，您将学习如何应用它！</p><h1 id="044e" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">习惯5:用计数器让计数变得容易</h1><p id="1a30" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">清点物品是你经常会遇到的任务。假设您有一个姓名列表，并且想要创建一个包含列表中所有条目的字典。虽然使用for循环很容易做到这一点，但是您很快就会发现这并不是最有效的方法。</p><p id="42d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们来看看如何使用for循环来实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="df75" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来分解一下上面的代码在做什么:</p><ol class=""><li id="530a" class="mx my it la b lb lc le lf lh mz ll na lp nb lt nc nd ne nf bi translated">第2行实例化了一个名称列表</li><li id="f23f" class="mx my it la b lb ng le nh lh ni ll nj lp nk lt nc nd ne nf bi translated">第4行创建了一个空字典</li><li id="5010" class="mx my it la b lb ng le nh lh ni ll nj lp nk lt nc nd ne nf bi translated">第5行到第9行遍历列表中的每个名字。如果该名称存在，则该名称的键值将增加1。如果没有，则创建的键的值为1。</li></ol><p id="0ae0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">编写干净代码的一个重要部分是确保你的代码的意图对你的读者来说是清楚的。如果没有for循环的注释，就很难理解你为什么要写这些代码。</p><p id="c3bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正因为如此，内置collections模块中的<code class="fe mm mn mo mp b">Counter</code>类可以派上用场了！该类接受一个iterable，比如一个list，并返回一个类似字典的对象，自动添加每一项的计数。</p><p id="3177" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看如何使用<code class="fe mm mn mo mp b">Counter</code>类来计数对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="6c19" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="0353" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">唷！您已经完成了这篇文章的结尾部分！但是，你将何去何从？继续培养您的Python技能！找到更多的方法让你的代码更加整洁！Python是一种优雅的语言，允许你以多种不同的方式编写代码。</p><p id="2bc4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">努力获得干净、可读的代码是很重要的。这段代码不仅通常写起来更快，而且更有目的性。这使得你的代码的未来读者(可能包括你！)来更好地理解你的代码在做什么。</p></div></div>    
</body>
</html>