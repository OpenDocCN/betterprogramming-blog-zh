<html>
<head>
<title>Explore Android Bottom Sheets in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Jetpack Compose中的Android底部表单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/explore-android-bottom-sheets-in-jetpack-compose-50eff0257231?source=collection_archive---------3-----------------------#2021-06-22">https://betterprogramming.pub/explore-android-bottom-sheets-in-jetpack-compose-50eff0257231?source=collection_archive---------3-----------------------#2021-06-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3e98" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki"> BottomSheetScaffold和ModalBottomSheetLayout </em></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/b700ab61974f2be09f437f5605ad98c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JAcd9GZziiP6tYsU"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@blakeconnally?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布莱克·康纳利</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="e198" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">这篇文章的要点</h1><p id="4f77" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在这篇文章中，我们将学习如何在<a class="ae kz" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank"> Jetpack Compose </a>中使用底部表单。我们将涵盖持久底层和模态底层。在本文的最后，您会找到GitHub项目链接，因此可以随意探索代码。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="721d" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">介绍</h1><p id="092b" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">Jetpack Compose是谷歌最近试图让Android开发者轻松构建UI的尝试之一。</p><blockquote class="na nb nc"><p id="822f" class="ls lt nd lu b lv ne ju lx ly nf jx ma ng nh md me ni nj mh mi nk nl ml mm mn im bi translated"><em class="it">“Jetpack Compose是一款用于构建原生Android UI的现代工具包。Jetpack Compose以更少的代码、强大的工具和直观的Kotlin APIs简化并加速了Android上的UI开发。”— </em> <a class="ae kz" href="https://developer.android.com/jetpack/compose/tutorial" rel="noopener ugc nofollow" target="_blank"> <em class="it">安卓开发者</em> </a></p></blockquote><p id="bc26" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">Jetpack Compose最近进行了测试。这意味着API结构将不再有任何剧烈的变化，因此这将是学习如何使用这个下一代UI套件进行Android开发的大好时机。</p><p id="6e03" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">您需要安装Android Studio Canary，北极狐(2020.3.1) <strong class="lu iu"> </strong>版本才能使用Jetpack Compose beta。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="553d" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">先决条件</h1><p id="4955" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在进一步学习之前，您必须具备如何使用Jetpack Compose的基本知识。如果你是作曲新手，我强烈推荐阅读以下文章:</p><ul class=""><li id="af7b" class="nm nn it lu b lv ne ly nf mb no mf np mj nq mn nr ns nt nu bi translated">"<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/jetpack-compose-components-part-1-a80717dbfb59">喷气背包构成组件(第一部分)</a>"</li><li id="e3b7" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated">"<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/build-android-layouts-in-jetpack-compose-bda2e0837f5e">在JetPack Compose中构建Android布局</a>"</li><li id="0c08" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated">"<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/theming-in-jetpack-compose-for-android-667d42b8279c">Android版Jetpack Compose中的主题化</a>"</li><li id="a571" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated">"<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/navigation-with-jetpack-compose-in-android-ab84d0984ade">在Android中使用Jetpack Compose导航</a>"</li></ul></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="4bd3" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">底层是什么？</h1><p id="b917" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">Android中的底层是材质设计用户界面组件。基本上，它是一个从屏幕底部进入界面的视图，带有流畅的动画。使用底板有两个主要优点:</p><ul class=""><li id="337a" class="nm nn it lu b lv ne ly nf mb no mf np mj nq mn nr ns nt nu bi translated">它们是可滑动的——这为用户创造了一个比点击按钮更具交互性的UX界面。</li><li id="b8ce" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated">快速访问—由于它们锚定在底部，用户可以轻松访问内容。</li></ul></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="9eb5" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">底板的类型</h1><h2 id="78e1" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">永久底板</h2><p id="a9c3" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">标题很明显:它一直在屏幕底部。用户可以上下滑动来展开和折叠工作表。我们可以调整峰值高度，即折叠底板的默认高度。</p><h2 id="27cc" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">莫代尔底板</h2><p id="b974" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">模态底层类似于对话框。唯一的区别是，模态底层具有平滑的动画，用户可以像滑动持久底层一样滑动它。与持久底部表单不同，这里用户不能访问底部表单范围之外的内容。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="8717" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">喷气背包中的底部纸张构成</h1><p id="d73a" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">开箱即用的Jetpack Compose支持持久化和模态底层表单。其他任何可拖动的底片也有自己的脚手架:<code class="fe om on oo op b">BottomSheetScaffold</code>和<code class="fe om on oo op b">ModalBottomSheetLayout</code>。</p><p id="d008" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">不要再拖延了，让我们开始吧</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="af33" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated"><code class="fe om on oo op b">BottomSheetScaffold</code></h1><p id="bed9" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated"><code class="fe om on oo op b">BottomSheetScaffold</code>是一个简单的可组合函数，用于显示持久的底部表单。看看这个可组合的:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><code class="fe om on oo op b">BottomSheetScaffold</code></p></figure><p id="b55a" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">不要被参数的数量搞得不知所措。因为它是一个脚手架，本质上将有两个视图需要管理，底层的表和它后面的内容。在这里，我将只解释我们构建持久底层所需的参数:</p><ul class=""><li id="1621" class="nm nn it lu b lv ne ly nf mb no mf np mj nq mn nr ns nt nu bi translated"><code class="fe om on oo op b">sheetContent </code> —这是一个简单的可组合函数，表示表单的用户界面。</li><li id="3b53" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated"><code class="fe om on oo op b">scaffoldState </code> —用于管理底部表单的状态:展开、折叠、半展开。</li><li id="be42" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated"><code class="fe om on oo op b">topBar </code> —这是一个简单的可组合函数，代表了屏幕顶栏的设计。</li><li id="a0e8" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated"><code class="fe om on oo op b">content </code> —这是一个可组合的函数，用于设计底部工作表后面的屏幕内容。</li></ul><h2 id="01cf" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">BottomSheetState</h2><p id="6ad4" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这是一个预定义的可组合函数，通过它我们可以管理底部工作表的状态。它有方便的暂停功能，如扩展和折叠，以执行流畅的动画。看一看:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="c23d" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">组件已经足够了，是时候开始实现了。首先，我们设计底部工作表后面的视图。没有什么复杂的，只是一个简单的单一按钮的看法。单击按钮时，我们需要更新状态。为了更新状态，我们需要<code class="fe om on oo op b">BottomSheetScaffoldState</code>，我们将它和<code class="fe om on oo op b">CoroutineScope</code>一起作为参数。看一看:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">持久底部表单的主屏幕视图</p></figure><p id="ee6d" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">现在是设计底层的时候了。这里我们将使用<code class="fe om on oo op b">rememberBottomSheetScaffoldState</code>和<code class="fe om on oo op b">rememberCoroutineScope</code>可组合函数来管理整个重组的状态。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">持久的底层实现</p></figure><p id="d50a" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">您可以将底部工作表内容的设计部分移出，以简化编码部分。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="e413" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">ModalBottomSheetLayout</h1><p id="3d16" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated"><code class="fe om on oo op b">ModalBottomSheetLayout</code>是一个简单的可组合函数，类似于<code class="fe om on oo op b">BottomSheetScaffold</code>，用于显示模态底部表单。看看这个可组合的:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="124f" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">像往常一样，我们只考虑构建模态底层所需的参数。</p><ul class=""><li id="cd8d" class="nm nn it lu b lv ne ly nf mb no mf np mj nq mn nr ns nt nu bi translated"><code class="fe om on oo op b">sheetContent </code> —这是一个简单的可组合函数，表示表单的用户界面。</li><li id="6cc2" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated"><code class="fe om on oo op b">scaffoldState </code>—用于管理底层表单的状态:展开、折叠、半展开。</li><li id="d306" class="nm nn it lu b lv nv ly nw mb nx mf ny mj nz mn nr ns nt nu bi translated"><code class="fe om on oo op b">content </code> —这是一个可组合的函数，用于设计底部工作表后面的屏幕内容。</li></ul><h2 id="8b50" class="oa lb it bd lc ob oc dn lg od oe dp lk mb of og lm mf oh oi lo mj oj ok lq ol bi translated">ModalBottomSheetState</h2><p id="86e7" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated"><code class="fe om on oo op b">ModalBottomSheetState</code>是一个Kotlin类，用于管理底层工作表的状态。它有方便的暂停功能，如展开、折叠、半展开、隐藏等，以执行流畅的动画。</p><p id="b106" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">首先，我们需要创建主屏幕视图，就像我们在上一节中所做的那样。唯一不同的是，我们将用<code class="fe om on oo op b">ModalBottomSheetState</code>替换<code class="fe om on oo op b">BottomSheetScaffoldState</code>参数。看一看:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">莫代尔底板的主屏幕视图</p></figure><p id="e1bb" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">现在是设计底层的时候了。这里我们将使用<code class="fe om on oo op b">rememberModalBottomSheetState</code>和<code class="fe om on oo op b">rememberCoroutineScope</code>可组合函数来管理整个重组的状态。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">模态底层实现</p></figure><p id="850b" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">仅此而已。我们已经完成了实现。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="d0ae" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">显示底部工作表</h1><p id="5e3f" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">既然我们已经完成了核心实现，剩下的唯一事情就是从活动中调用<code class="fe om on oo op b">ModelBottomSheet</code>和<code class="fe om on oo op b">BottomSheetSample</code>组件。看一看:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oq or l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">触发底部工作表的主要活动</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="d439" class="la lb it bd lc ld mv lf lg lh mw lj lk jz mx ka lm kc my kd lo kf mz kg lq lr bi translated">奖金</h1><p id="11ab" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">下面是GitHub repo链接，它实现了持久化和模式化的底层表单。随意探索。</p><div class="os ot gp gr ou ov"><a href="https://github.com/SG-K/Jetpack-Compose-Bottom-Sheets" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">SG-K/Jetpack-撰写-底部-工作表</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">在GitHub上创建一个帐户，为SG-K/Jetpack-Compose-Bottom-Sheets的开发做出贡献。</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">github.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj kt ov"/></div></div></a></div><p id="4477" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">我最近看到了Satya Pavan Kantamani发表的这篇关于Kotlin DSLs的优秀文章。强烈建议:</p><div class="os ot gp gr ou ov"><a href="https://proandroiddev.com/migrate-from-groovy-to-kotlin-dsl-951266f3c072" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">从Groovy迁移到Kotlin DSL</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">将您的Android构建脚本更改为Kotlin DSL以获得更好的灵活性</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">proandroiddev.com</p></div></div><div class="pe l"><div class="pk l pg ph pi pe pj kt ov"/></div></div></a></div><p id="1a34" class="pw-post-body-paragraph ls lt it lu b lv ne ju lx ly nf jx ma mb nh md me mf nj mh mi mj nl ml mm mn im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>