<html>
<head>
<title>What’s New in SwiftUI Lists for iOS 14?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 14的SwiftUI列表有什么新功能？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/whats-new-in-swiftui-lists-for-ios-14-e6aed43ca134?source=collection_archive---------3-----------------------#2020-06-25">https://betterprogramming.pub/whats-new-in-swiftui-lists-for-ios-14-e6aed43ca134?source=collection_archive---------3-----------------------#2020-06-25</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="52e9" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">嵌套或可扩展的列表和一个全新的视图修改器</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/9e266ddbaee8b2deb8328b0e71218b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Dra_J6ifNtfIIoNR"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@cathrynlavery?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Cathryn Lavery </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="20ae" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">列表是每个应用程序的重要组成部分，SwiftUI List只是简化了我们填充数据的方式，通常符合<code class="fe lw lx ly lz b">Identifiable</code>协议——该协议确保每一行对于动态项目都是唯一的。</p><p id="33b3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">WWDC 2020为iOS 14中SwiftUI列表的一些有趣更新铺平了道路。让我们看看他们。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="fbe0" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">SwiftUI使用'新建嵌套列表。儿童关键路径</h1><p id="e7b4" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">到目前为止，在SwiftUI中创建嵌套或可扩展列表需要在彼此之间嵌套<code class="fe lw lx ly lz b">ForEach</code>循环。</p><p id="6baa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">SwiftUI的最新版本通过在其初始化器中引入一个<code class="fe lw lx ly lz b">.children</code>键路径参数，使得构建嵌套列表变得更加容易。这样做，它允许我们创建递归的SwiftUI列表，以系统标准的样式显示在iOS、iPadOS和macOS上。</p><p id="b2a6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们为新的SwiftUI概要列表建立一个数据结构。</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="fdfb" class="ni mi iu lz b gz nj nk l nl nm">struct DataModel: Identifiable{<br/>    <br/>    var id = UUID()<br/>    var name: String<br/>    var icon: String<br/>    var children : [DataModel]?<br/>}</span></pre><p id="6477" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，您可以使用JSON或任何资产文件填充数据，但是为了简单起见，我们将设置一些伪字符串和SF符号。让我们通过使我们的类符合<code class="fe lw lx ly lz b">ObservableObject</code>来做到这一点，T3是一种通过发布者宣布变化的对象。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><p id="628d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">既然我们的数据源已经准备好了，让我们把它插入到SwiftUI的<code class="fe lw lx ly lz b">View</code>中。</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="6539" class="ni mi iu lz b gz nj nk l nl nm">struct ContentView: View {<br/>    <br/>    @ObservedObject var fetcher = DataFetcher()<br/>    <br/>    var body: some View {<br/>        <br/>        List(fetcher.dataModel, children: \.children){<br/>            item in<br/>                HStack{<br/>                    Image(systemName: item.icon)<br/>                    Text(item.name)<br/>                }<br/>        }<br/>    }<br/>}</span></pre><p id="58bf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">子键路径确保列表以递归方式构建其内容(假设数据模型有效)。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/b827fea6bfcc5c681d325553b87bc7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*X1SC9JEq8gISH8MO8rVuow.gif"/></div></div></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="305c" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">新的“listStyle”修饰符</h1><p id="e150" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">SwiftUI List提供了一个<code class="fe lw lx ly lz b">listStyle()</code>来定制外观和感觉。</p><p id="0197" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">可以通过<code class="fe lw lx ly lz b">GroupedListStyle()</code>获得类似iOS 12的分组，或者通过<code class="fe lw lx ly lz b">InsetGroupedListStyle()</code>获得iOS 13及以上的圆角外观。</p><p id="f46b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过上面的SwiftUI列表，我们可以看到后者的样子:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/072be42cab4143df6fc5bd0ffbe58ccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ylEXzk3MCh7rtbkVCH1dgQ.png"/></div></div></figure><p id="cde2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">还有一个<code class="fe lw lx ly lz b">SidebarListStyle()</code>在iPadOS和macOS中很有用，特别是对于利用侧边栏的基于文档的应用程序。</p><h1 id="9676" class="mh mi iu bd mj mk nr mm mn mo ns mq mr ka nt kb mt kd nu ke mv kg nv kh mx my bi translated">带导航链接的SwiftUI大纲列表</h1><p id="64f2" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">当使用<code class="fe lw lx ly lz b">SidebarListStyle</code>并将列表嵌入到<code class="fe lw lx ly lz b">NavigationView</code>中时，对于NavigationLink的目标视图，只有没有子行的行是可导航的。SwiftUI在iPadOS和macOS上自动完成这项工作，如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/77d4f420bad470ce81703bd2591775a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PihhYFY4Z4Z6jVrJdXGd3g.gif"/></div></div></figure><p id="7c8b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是在iOS设备上运行相同的程序，就有点问题了(在撰写本文时)。或者，它不打算这样使用:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nx"><img src="../Images/3c98cfdec0842787fe16517d15a60bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wTvn6oG9ed6nCmthVPPmTg.gif"/></div></div></figure><p id="934d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如你所见，在iOS设备上，它显示了双重披露。尽管有子列表，<code class="fe lw lx ly lz b">NavigationLink</code>仍然在工作，这在理想情况下是不应该的。希望这个bug很快得到修复。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="dac4" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="b22b" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">我们看到了SwiftUI第二次迭代的两个很酷的新更新，它可以在iOS 14和Xcode 12及更高版本上工作。</p><p id="5ec6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。感谢阅读。</p></div></div>    
</body>
</html>