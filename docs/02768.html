<html>
<head>
<title>Stop Using Square Bracket Notation to Get a Dictionary’s Value in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中，停止使用方括号符号来获取字典的值</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/stop-using-square-bracket-notation-to-get-a-dictionarys-value-in-python-c617f6ea15a3?source=collection_archive---------0-----------------------#2019-12-29">https://betterprogramming.pub/stop-using-square-bracket-notation-to-get-a-dictionarys-value-in-python-c617f6ea15a3?source=collection_archive---------0-----------------------#2019-12-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5a77" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">超越传统方法，保护您的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b8ec65c120637900ec54a08a373b9b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GRghp94F1x2iUQhBGXH8kQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/photo/book-book-pages-bookcase-browse-415071/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>在<a class="ae ky" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄</p></figure><p id="c809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字典是一组无序的术语和定义。这意味着:</p><ul class=""><li id="06c1" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">每个数据点都有一个标识符(术语)和一个值(定义)。</li><li id="f8f6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">这些术语必须是该词典独有的，不能重复。</li><li id="eb6b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">与列表不同，术语没有明确的顺序。</li></ul><p id="cde5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要定义字典，请使用花括号并用逗号分隔每个术语/定义对。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="ee4e" class="mo mp it mk b gy mq mr l ms mt">author = {<br/>   "first_name": "Jonathan",<br/>   "last_name": "Hsu",<br/>   "username": "jhsu98"<br/>}</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="e95f" class="nb mp it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">访问字典值的传统(不好的)方法</h1><p id="acb3" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">访问字典中的值的传统方法是使用方括号符号。该语法将术语的名称嵌套在方括号中，如下所示。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="9e89" class="mo mp it mk b gy mq mr l ms mt">author = {<br/>   "first_name": "Jonathan",<br/>   "last_name": "Hsu",<br/>   "username": "jhsu98"<br/>}</span><span id="5168" class="mo mp it mk b gy nx mr l ms mt">print(author['username']) # jhsu98<br/>print(author['middle_initial']) # KeyError: 'middle_initial'</span></pre><p id="cb65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意尝试引用一个不存在的术语是如何导致<code class="fe ny nz oa mk b">KeyError</code>的。这可能会造成很大的麻烦，尤其是在处理不可预测的业务数据时。</p><p id="70f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然我们可以用一个<code class="fe ny nz oa mk b">try/except</code>或<code class="fe ny nz oa mk b">if</code>语句来包装我们的语句，但是对字典术语的这种关注会很快堆积起来。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="949d" class="mo mp it mk b gy mq mr l ms mt">author = {}</span><span id="367f" class="mo mp it mk b gy nx mr l ms mt">try:<br/>   print(author['username'])<br/>except KeyError as e:<br/>   print(e) # 'username'</span><span id="3b2b" class="mo mp it mk b gy nx mr l ms mt">if 'username' in author:<br/>   print(author['username'])</span></pre><p id="f6ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您来自JavaScript背景，您可能会尝试引用带有点符号的字典值。这在Python中不起作用。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="52d8" class="mo mp it mk b gy mq mr l ms mt">author = {<br/>   "first_name": "Jonathan",<br/>   "last_name": "Hsu",<br/>   "username": "jhsu98"<br/>}</span><span id="0db9" class="mo mp it mk b gy nx mr l ms mt">print(author.username)<br/># AttributeError: 'dict' object has no attribute 'username'</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="3eda" class="nb mp it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">使用。get()方法</h1><p id="32f1" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">当您想要访问一个字典的值时，最安全的方法是使用<code class="fe ny nz oa mk b">.get()</code>方法。该方法有两个参数:</p><ul class=""><li id="c6b9" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">First(必选):要检索的术语的名称。这可以是一个字符串或变量，允许动态检索。</li><li id="2dbd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Second(可选):术语不存在时用作默认值的值。</li></ul><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="f7bf" class="mo mp it mk b gy mq mr l ms mt">author = {<br/>   "first_name": "Jonathan",<br/>   "last_name": "Hsu",<br/>   "username": "jhsu98"<br/>}</span><span id="8200" class="mo mp it mk b gy nx mr l ms mt">print(author.get('username')) # jhsu98<br/>print(author.get('middle_initial', None)) # None</span></pre><p id="67d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当这个术语先前被声明时，<code class="fe ny nz oa mk b">.get()</code>与传统的方括号引用没有什么不同。如果没有定义这个术语，就会返回一个默认值，这样您就不必处理异常了。</p><p id="9678" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个默认值可以是你想要的任何值，但是记住它是可选的。当不包含默认值时，使用<code class="fe ny nz oa mk b">None</code>—Python中null的等价形式。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="866d" class="nb mp it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">使用。setdefault()方法</h1><p id="c8fd" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">有时，您不仅希望避免字典中未定义的术语，还希望代码能够自我纠正其数据结构。<code class="fe ny nz oa mk b">.setdefault()</code>的结构与<code class="fe ny nz oa mk b">.get()</code>相同。然而，当术语未定义时，除了返回默认值之外，字典的术语也将被设置为该值。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="bdfc" class="mo mp it mk b gy mq mr l ms mt">author = {<br/>   "first_name": "Jonathan",<br/>   "last_name": "Hsu",<br/>   "username": "jhsu98"<br/>}</span><span id="a39a" class="mo mp it mk b gy nx mr l ms mt">print(author.setdefault('username')) # jhsu98<br/>print(author.setdefault('middle_initial', None)) # None</span></pre><p id="a4ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们看到当术语存在时，<code class="fe ny nz oa mk b">.setdefault()</code>与方括号符号或<code class="fe ny nz oa mk b">.get()</code>完全相同。此外，当术语不存在时，它的行为与<code class="fe ny nz oa mk b">.get()</code>相同，返回传递的默认值。</p><p id="7938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe ny nz oa mk b">.get()</code>的不同之处在于，术语和定义现在是字典的一部分，如下所示。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="1d25" class="mo mp it mk b gy mq mr l ms mt">author = {<br/>   "first_name": "Jonathan",<br/>   "last_name": "Hsu",<br/>   "username": "jhsu98"<br/>}</span><span id="a01f" class="mo mp it mk b gy nx mr l ms mt">print(author.setdefault('middle_initial',None)) # None<br/>print(author)<br/>"""<br/>{<br/>  'first_name': 'Jonathan',<br/>  'last_name': 'Hsu',<br/>  'username': 'jhsu98',<br/>  'middle_initial': None<br/>}<br/>"""</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="44e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在引用字典值时，<code class="fe ny nz oa mk b">.get()</code>和<code class="fe ny nz oa mk b">.setdefault()</code>都是很好的技巧……只是打破旧习惯并采用这种做法可能需要一些时间。</p><p id="7307" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你不想改变原始数据时，<code class="fe ny nz oa mk b">.get()</code>就是你的赢家。</p><p id="b513" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您想要更改原始数据时，使用<code class="fe ny nz oa mk b">.setdefault()</code>并收工。</p></div></div>    
</body>
</html>