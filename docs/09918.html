<html>
<head>
<title>4 Ways to Embed Code in Svelte</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Svelte中嵌入代码的4种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-ways-to-embed-code-in-svelte-5f40b5fa50ba?source=collection_archive---------0-----------------------#2021-10-31">https://betterprogramming.pub/4-ways-to-embed-code-in-svelte-5f40b5fa50ba?source=collection_archive---------0-----------------------#2021-10-31</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="7712" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">任何人都可以使用</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/0537c4f90b9e58515df76e9212d4b057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1RzRncJuXqNlGBM-"/></div></div><p class="lb lc gk gi gj ld le bd b be z dk translated">Joshua Woroniecki 在Unsplash 上拍摄的照片</p></figure><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj lg"><img src="../Images/92375780bca5c616168309ed5a6d9aad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8nsHdZjDA3L8nrpKSV_ow.jpeg"/></div></div></figure><p id="ed16" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">迟早，我将不得不完全重写我博客的代码。两年前，我从WordPress转到Jekyll——这是一个不错的选择。但是我越是深入研究苗条身材，就越是好奇我能做些什么。我迷上的最后一件事是如何显示苗条的代码片段。令我惊讶的是，这似乎不是一个非常深入的话题，但我认为我已经找到了四种对我有用的方法。</p><h1 id="c6a7" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">棱镜和苗条</h1><p id="798a" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">第一种方法是直接在减价页面上使用<a class="ae lf" href="https://prismjs.com/" rel="noopener ugc nofollow" target="_blank"> Prismjs </a>。作为一个例子，我使用我的<a class="ae lf" href="https://github.com/el3um4s/memento-sveltekit-and-github-pages" rel="noopener ugc nofollow" target="_blank">MEMENTO—SvelteKit&amp;GitHub Pages</a>。在这个项目中，博客页面是<code class="fe mk ml mm mn b">md</code> (markdown)文件。文件夹中的每一页都是来自一个假想博客的帖子。代码是用所谓的<code class="fe mk ml mm mn b">code fencing</code>显示的:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="09e0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我希望代码看起来像这样:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="26cf" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">怎么做？首先，我使用以下代码将Prism导入到我的模板中:</p><pre class="kq kr ks kt gu mq mn mr ms aw mt bi"><span id="effb" class="mu li iu mn b gz mv mw l mx my">npm i -D prismjs</span></pre><p id="0adc" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我可以直接在一个细长的文件中使用，但最好只在<code class="fe mk ml mm mn b">__layout__</code>文件中插入一次。这样，每段代码都会以相同的方式出现在博客的每篇文章中。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/a96646da99f6b46e326ad240b7423982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dKv1xl3j8s1jCD7f.jpg"/></div></div></figure><p id="8da0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">基于博客主题，我可以改变用来显示代码的主题。我也可以使用自定义主题，也许是<code class="fe mk ml mm mn b">Dracula</code>。为了使用它，我用命令导入<a class="ae lf" href="https://www.npmjs.com/package/prism-themes" rel="noopener ugc nofollow" target="_blank"> prism-themes </a>:</p><pre class="kq kr ks kt gu mq mn mr ms aw mt bi"><span id="e406" class="mu li iu mn b gz mv mw l mx my">npm i -D prism-themes</span></pre><p id="2bac" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后我在文件中导入主题:</p><pre class="kq kr ks kt gu mq mn mr ms aw mt bi"><span id="26b6" class="mu li iu mn b gz mv mw l mx my">import "prism-themes/themes/prism-dracula.css";</span></pre><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/0ee62a7c41b179f68bf24b42b65e02fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xtvNaO_UG5wOoP2g.jpg"/></div></div></figure><h1 id="0bfe" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">细长棱镜</h1><p id="f285" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">第二种方法是使用一个细长的组件:<a class="ae lf" href="https://github.com/jakobrosenberg/svelte-prism" rel="noopener ugc nofollow" target="_blank">细长棱镜</a>。这个由<a class="ae lf" href="https://github.com/jakobrosenberg" rel="noopener ugc nofollow" target="_blank"> Jakob Rosenberg </a>开发的组件非常方便，如果你在扩展名为<code class="fe mk ml mm mn b">.svelte</code>的文件中工作的话。为什么？因为在这种情况下，我不能使用三个反勾号序列。</p><p id="8fcf" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我安装组件，如下所示:</p><pre class="kq kr ks kt gu mq mn mr ms aw mt bi"><span id="d25e" class="mu li iu mn b gz mv mw l mx my">npm i -D svelte-prism</span></pre><p id="256f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后我导入<code class="fe mk ml mm mn b">svelte-prims</code></p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="c900" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">最终结果与第一个示例几乎相同:</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/ecf465d56150c4fd7e3f9eacb9c34e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YEk4_w1QLf3BVK1T.jpg"/></div></div></figure><h1 id="3009" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated"><strong class="ak">使用</strong> easy-gist-async将GitHub Gist嵌入到Svelte中</h1><p id="fda2" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">第三种方法是使用<a class="ae lf" href="https://gist.github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub Gist </a>来显示各种代码片段。优点是能够展示更美丽的东西。主要的缺点是要显示的代码位于post之外，这使得编辑起来有点复杂。</p><p id="c55b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">通常，创建一个要点，然后用右上角的按钮复制导入代码就足够了:</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/cde11effe84dbd76793fcc56ce34826b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GQ8j21MB546c_WCA.jpg"/></div></div></figure><p id="a143" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">问题是要使用的代码是这样的格式:</p><pre class="kq kr ks kt gu mq mn mr ms aw mt bi"><span id="5e1d" class="mu li iu mn b gz mv mw l mx my">&lt;script src="https://gist.github.com/el3um4s/b2ce146321ba67d7420f2a14f1a38544.js"&gt;&lt;/script&gt;</span></pre><p id="df08" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">这涉及到向一个苗条的页面添加另一个js脚本。但是Svelte只接受每个组件一个脚本元素。因此，我将创建一个新组件。</p><p id="078f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我发现有两种方法可以做到这一点。第一种是使用npm <a class="ae lf" href="https://www.npmjs.com/package/easy-gist-async" rel="noopener ugc nofollow" target="_blank"> easy-gist-async </a>包，它可以用下面的命令安装:</p><pre class="kq kr ks kt gu mq mn mr ms aw mt bi"><span id="0b15" class="mu li iu mn b gz mv mw l mx my">npm i -D easy-gist-async</span></pre><p id="ab93" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">然后我创建一个<code class="fe mk ml mm mn b">AsyncGist.svelte</code>组件，如下所示:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="816c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我在页面上使用新组件，如下所示:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/0952199ac76b785187cf55a92abd03ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z2444N7rLn3guT5Z.jpg"/></div></div></figure><p id="5cc3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">结果取决于组件导入到的页面的样式。定制外观可能是一件好事，但对于我所需要的来说，这是一个问题。</p><h1 id="ba9a" class="lh li iu bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">Gist.svelte</h1><p id="c833" class="pw-post-body-paragraph jr js iu jt b ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko in bi translated">最后一种方式是我对这个<a class="ae lf" href="https://svelte.dev/repl/2d4d41df9f404b2d896bb81c55cb75c0?version=3.44.0" rel="noopener ugc nofollow" target="_blank">svelte.dev/repl</a>的改造。想法是在导入的脚本周围创建一个HTML框架:通过这种方式，原始的样式得以保持。与原始代码相比，我添加了一种机制来根据内容改变框架的大小。我觉得更方便，更有用。</p><p id="b0cb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我使用下面的代码创建了<code class="fe mk ml mm mn b">Gist.svelte</code>组件:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="5235" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我在我的页面上使用它，如下所示:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="0a98" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我得到的结果如下:</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/cfde40fef3119cf33949c4517594ac9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9I3y2ifl6n0Ms1-1.jpg"/></div></div></figure><p id="317b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">最后，我可以将所有这些技术一个接一个地放在一起，得到这样的结果:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj mz"><img src="../Images/6c68a5282c101e8e4e7f3638d0d65bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QIXMrRIMfyhDRsuf.jpg"/></div></div></figure><p id="3256" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl na nb hy nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="in io ip iq ir"><p id="9ef0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><strong class="jt iv"> <em class="nh">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae lf" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="jt iv"> <em class="nh">中邮件列表</em> </strong> </a></p><div class="ni nj gq gs nk nl"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="nm ab fp"><div class="nn ab no cl cj np"><h2 class="bd iv gz z fq nq fs ft nr fv fx it bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="ns l"><h3 class="bd b gz z fq nq fs ft nr fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="nt l"><p class="bd b dl z fq nq fs ft nr fv fx dk translated">el3um4s.medium.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kz nl"/></div></div></a></div></div><div class="ab cl na nb hy nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="in io ip iq ir"><p id="73f2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="nh">原载于2021年11月1日https://blog.stranianelli.com</em><em class="nh">T21</em><a class="ae lf" href="https://blog.stranianelli.com/how-to-embed-code-in-svelte-english/" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>