<html>
<head>
<title>How to Use the Cloudinary API to Manage Photos Online</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Cloudinary API在线管理照片</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-upload-and-manage-pictures-on-your-website-54a5dd838b5f?source=collection_archive---------18-----------------------#2020-05-25">https://betterprogramming.pub/how-to-upload-and-manage-pictures-on-your-website-54a5dd838b5f?source=collection_archive---------18-----------------------#2020-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5fc6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">立即支持在您的应用中上传和显示照片</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0d556880d10f14742a89b5bbfda3b4ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_u5_QeaXDpxZ64IhP4stg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="ae66" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有没有想过做一个支持上传和管理图片的网站或web app，但是不知道怎么做？我当然有，谢天谢地，有一个简单的方法可以做到这一点。虽然为了从本教程中受益，您应该知道一些事情，包括服务器端(后端)编程的基础知识和HTTP请求是如何工作的。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="627b" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">设置前端</h1><p id="0d97" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">为了这个快速教程的目的，UI将只是一个简单的UI，只有一个功能:上传图片。我用React构建了它，尽管普通的JS、HTML和CSS也能很好地工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/c6c7b8494109dc937e9ce399716d15f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7UEES1brh9SDaG5-.png"/></div></div></figure><p id="a294" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，创建这个初始UI实际上只需要两个HTML元素。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ca80" class="ne mc it na b gy nf ng l nh ni">&lt;input name="image" type="file" /&gt;<br/>&lt;button&gt;&lt;span&gt;Upload&lt;/span&gt;&lt;/button&gt;</span></pre><p id="a41b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用于记录目的的附加<code class="fe nj nk nl na b">p</code>元素(例如“图像正在上传”、“图像已成功上传”、“错误:无法添加图像”)对任何用户都是有帮助的和信息丰富的。</p><p id="71b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">前端的其余设计是任意的，最终取决于您的web应用程序的性质。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8658" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">设置后端和Cloudinary API</h1><p id="9fc8" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">去注册<a class="ae nm" href="https://cloudinary.com/users/register/free" rel="noopener ugc nofollow" target="_blank">账户</a>。完全免费。接下来，设置后端。我将使用Node.js (Express)和MongoDB(带Mongoose)作为数据库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="53a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们为一个图像对象创建一个Mongoose模型，并将其导出到<code class="fe nj nk nl na b">server.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="4a1d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，导入多部分中间件。这个中间件基本上允许你从<code class="fe nj nk nl na b">req.file</code>访问上传的文件:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ba3a" class="ne mc it na b gy nf ng l nh ni">const multipart = require('connect-multiparty');<br/>const multipartMiddleware = multipart();</span></pre><p id="833b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，使用您在Cloudinary仪表板上找到的凭据设置Cloudinary:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4cfb" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">构建API路由</h1><h2 id="a103" class="ne mc it bd md np nq dn mh nr ns dp ml lh nt nu mn ll nv nw mp lp nx ny mr nz bi translated">张贴路线以创建图像</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="0967" class="ne mc it bd md np nq dn mh nr ns dp ml lh nt nu mn ll nv nw mp lp nx ny mr nz bi translated">获取路线以获取所有图像</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="5fc3" class="ne mc it bd md np nq dn mh nr ns dp ml lh nt nu mn ll nv nw mp lp nx ny mr nz bi translated">GET route通过图像的数据库id获取图像</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="d34e" class="ne mc it bd md np nq dn mh nr ns dp ml lh nt nu mn ll nv nw mp lp nx ny mr nz bi translated">删除路径以通过图像的云二进制id删除图像</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="434b" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">包扎</h1><p id="8e2f" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">最后，我们通过设置静态目录、默认路由和服务器监听的位置来结束<code class="fe nj nk nl na b">server.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="16c0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们准备通过来自前端的<code class="fe nj nk nl na b">POST</code>、<code class="fe nj nk nl na b">GET</code>和<code class="fe nj nk nl na b">DELETE</code>请求发送HTTP请求来创建、获取和删除图像！</p><p id="a9c0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，要创建一个图像，我们可以发送如下请求:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3496" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于那些已经走到这一步的人，恭喜他们！尤其是对你们中的新手来说。以前去过，第一次把握肯定不容易。</p></div></div>    
</body>
</html>