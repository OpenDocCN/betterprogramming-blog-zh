<html>
<head>
<title>The Secrets of JSON.stringify()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JSON.stringify()的秘密</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-secrets-of-json-stringify-cf592f53b0f0?source=collection_archive---------7-----------------------#2022-02-23">https://betterprogramming.pub/the-secrets-of-json-stringify-cf592f53b0f0?source=collection_archive---------7-----------------------#2022-02-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5810" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">知道何时使用第二个和第三个参数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5b197ac327d034c2d323351ce26b436f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AvsCbkYp9YHKGL8Pk_y9dg.png"/></div></div></figure><p id="d69c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你是一个Javascript开发者，你可能每天都在使用<code class="fe lq lr ls lt b">JSON.stringify()</code>。通常，您会将一个对象作为第一个参数放入<code class="fe lq lr ls lt b">JSON.stringify()</code>中，瞧，您得到了想要的JSON字符串。但是生活并不总是那么容易。有时你需要转换一个对象，这就是这个函数的下一个参数派上用场的地方。</p><p id="c361" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，你将得到你需要知道的关于如何以及何时应该使用<code class="fe lq lr ls lt b">JSON.stringify()</code>的第二个和第三个论点的一切，这样你可以在某些情况下让你的生活变得更容易。</p><h1 id="13ca" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">基本用法</h1><p id="3f25" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated"><code class="fe lq lr ls lt b">JSON.stringify()</code>用于将Javascript对象转换为JSON字符串。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="8747" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是，有时有些属性不容易解析为JSON字符串。我们说的主要是<code class="fe lq lr ls lt b">Map</code>、<code class="fe lq lr ls lt b">WeakMap</code>、<code class="fe lq lr ls lt b">Set</code>、<code class="fe lq lr ls lt b">WeakSet</code>、<code class="fe lq lr ls lt b">Error</code>。看看这个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="8ea2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的集合在JSON中产生一个空对象！</p><p id="67d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另一件事是，有时您可能想省略对象的一些属性，或者在转换成JSON之前转换它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="627a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是第二个论点发挥作用的地方。</p><h1 id="a3d8" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">第二个参数</h1><p id="9a77" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated"><code class="fe lq lr ls lt b">JSON.stingify()</code>的第二个参数叫做replacer。它用于省略一些属性或转换它们(替换)。你可以在那里提供一个<strong class="kw iu">数组</strong>或者一个<strong class="kw iu">函数</strong>。</p><h2 id="8b9b" class="mt lv it bd lw mu mv dn ma mw mx dp me ld my mz mg lh na nb mi ll nc nd mk ne bi translated">排列</h2><p id="0a8b" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">当您只想将属性子集转换成JSON时，数组是您最好的朋友。用法非常简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="e6b0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在JSON中，您将只看到数组中列出的属性(<code class="fe lq lr ls lt b">name </code>和<code class="fe lq lr ls lt b">age</code>)。其他的就省略了(<code class="fe lq lr ls lt b">password</code>)。</p><h2 id="09a6" class="mt lv it bd lw mu mv dn ma mw mx dp me ld my mz mg lh na nb mi ll nc nd mk ne bi translated">功能</h2><p id="37af" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">当您想要将特定转换应用到对象属性或根据自定义规则对其进行过滤时，function参数非常有用。最好在例子上解释一下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="a4bb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在给定的transformer函数中，我们做了两件事:</p><ol class=""><li id="0059" class="nf ng it kw b kx ky la lb ld nh lh ni ll nj lp nk nl nm nn bi translated">将<code class="fe lq lr ls lt b">Set</code>转换为一个值数组，因此<code class="fe lq lr ls lt b">uniqueSnacksEatenToday</code>在结果JSON中不再为空。</li><li id="f28d" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">根据if语句中的规则，用文本替换<code class="fe lq lr ls lt b">age</code>。</li></ol><blockquote class="nt nu nv"><p id="022e" class="ku kv nw kw b kx ky ju kz la lb jx lc nx le lf lg ny li lj lk nz lm ln lo lp im bi translated">为什么使用第二个参数来转换对象，当你可以用转换创建一个新的对象，然后把它发送给<code class="fe lq lr ls lt b">JSON.stringify()</code>？<br/>答案很简单——这完全是出于表演的原因。使用transformer函数时，您不需要创建一个新对象，也不需要多次迭代旧对象。处理哪些小对象并不重要，但是当对象很大时，性能提升可能是值得的。</p></blockquote><h1 id="360a" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">第三个论点</h1><p id="73a7" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">第三个参数用于定义JSON内部的间距。参数可以是一个<strong class="kw iu">数字</strong>或一个<strong class="kw iu">字符串</strong>。</p><blockquote class="nt nu nv"><p id="f8c8" class="ku kv nw kw b kx ky ju kz la lb jx lc nx le lf lg ny li lj lk nz lm ln lo lp im bi translated">我没有看到它的很多用例，但是你永远不知道在你的生活中你需要解决什么问题，也许这些信息会拯救你！或者你可以在书呆子聚会上炫耀。</p></blockquote><h2 id="47d5" class="mt lv it bd lw mu mv dn ma mw mx dp me ld my mz mg lh na nb mi ll nc nd mk ne bi translated">数字</h2><p id="9b25" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">如果第三个参数是数字，则结果字符串的空格数将等于所提供的数字:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="470c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当显示带有<code class="fe lq lr ls lt b">console.log()</code>的对象时，这很有用，因为间距增加了可读性。</p><p id="0721" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">注意:</strong>最高债券是10英镑，高于10英镑的债券将被削减至10英镑。</p><h2 id="f0a8" class="mt lv it bd lw mu mv dn ma mw mx dp me ld my mz mg lh na nb mi ll nc nd mk ne bi translated">线</h2><p id="384a" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">String作为第三个参数用于将空格转换为自定义字符。您提供的字符串将用作JSON中的空格:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="d03d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么会有人需要这个？不知道。</p><h1 id="d2c7" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">最终注释</h1><p id="f886" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">知道一些你可以用像<code class="fe lq lr ls lt b">Json.stringify()</code>这样众所周知的函数做的小把戏是很有用的。这是让你成为更有知识的Javascript开发者的一小步。你拥有的工具越多，解决问题的独特方法就越多。但就我个人而言，我只是喜欢探索JS世界的无限可能。</p></div></div>    
</body>
</html>