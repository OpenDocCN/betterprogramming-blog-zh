<html>
<head>
<title>Popup Menu Customization in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter中的弹出菜单定制</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/popup-menu-customization-in-flutter-aa8827f6ce39?source=collection_archive---------0-----------------------#2022-02-08">https://betterprogramming.pub/popup-menu-customization-in-flutter-aa8827f6ce39?source=collection_archive---------0-----------------------#2022-02-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f868" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">不仅仅是下拉菜单</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4478c9ff2dfcd84ca9488cf497338255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rLAcZIAbA3iSrjhv"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">克拉克·蒂布斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="deac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天，我们将看看任何应用程序中最常用的部件之一，即弹出菜单。</p><p id="be40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在阅读结束时，我们将创建如下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/731dcca794bd1790a6bc481e1f44e1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*XxI7V3_VyBZKWSbUKrTJoA.png"/></div></figure><p id="4fee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想在这里检查代码<a class="ae kv" href="https://github.com/gajendrapandeya/PoupMenuCustomizationFlutter" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="713e" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">目录</h2><ol class=""><li id="d69d" class="mm mn iq ky b kz mo lc mp lf mq lj mr ln ms lr mt mu mv mw bi translated">介绍</li><li id="74a3" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">弹出菜单按钮构造函数</li><li id="47ec" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">创建普通弹出菜单</li><li id="9b71" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">根据我们的需要定制菜单按钮</li></ol><h1 id="7ac0" class="nc lu iq bd lv nd ne nf ly ng nh ni mb jw nj jx me jz nk ka mh kc nl kd mk nm bi translated"><strong class="ak">简介</strong></h1><p id="56fd" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">弹出菜单是最常用的小工具之一，当按下时显示菜单，当菜单因为一个项目被选中而被取消时调用<code class="fe nq nr ns nt b">onselected</code> <em class="nu"> </em>。想象一下，当你右击鼠标时，你会看到一个菜单项列表，如查看、排序、刷新和…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/ee744b56557ab41f04b53540d68f0509.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*xEhy2MIoeNa2uo2jUjTHOw.png"/></div></figure><p id="1b6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们知道什么是弹出菜单了。让我们深入研究一下构造函数，看看它的属性。</p><h1 id="2cb2" class="nc lu iq bd lv nd ne nf ly ng nh ni mb jw nj jx me jz nk ka mh kc nl kd mk nm bi translated"><strong class="ak">弹出菜单构造器</strong></h1><pre class="kg kh ki kj gt nw nt nx ny aw nz bi"><span id="714b" class="lt lu iq nt b gy oa ob l oc od"><a class="ae kv" href="https://api.flutter.dev/flutter/material/PopupMenuButton/PopupMenuButton.html" rel="noopener ugc nofollow" target="_blank">PopupMenuButton</a>({<a class="ae kv" href="https://api.flutter.dev/flutter/foundation/Key-class.html" rel="noopener ugc nofollow" target="_blank">Key</a>? key, required <a class="ae kv" href="https://api.flutter.dev/flutter/material/PopupMenuItemBuilder.html" rel="noopener ugc nofollow" target="_blank">PopupMenuItemBuilder</a>&lt;T&gt; itemBuilder, T? initialValue, <a class="ae kv" href="https://api.flutter.dev/flutter/material/PopupMenuItemSelected.html" rel="noopener ugc nofollow" target="_blank">PopupMenuItemSelected</a>&lt;T&gt;? onSelected, <a class="ae kv" href="https://api.flutter.dev/flutter/material/PopupMenuCanceled.html" rel="noopener ugc nofollow" target="_blank">PopupMenuCanceled</a>? onCanceled, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-core/String-class.html" rel="noopener ugc nofollow" target="_blank">String</a>? tooltip, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-core/double-class.html" rel="noopener ugc nofollow" target="_blank">double</a>? elevation, <a class="ae kv" href="https://api.flutter.dev/flutter/painting/EdgeInsetsGeometry-class.html" rel="noopener ugc nofollow" target="_blank">EdgeInsetsGeometry</a> padding = const EdgeInsets.all(8.0), <a class="ae kv" href="https://api.flutter.dev/flutter/widgets/Widget-class.html" rel="noopener ugc nofollow" target="_blank">Widget</a>? child, <a class="ae kv" href="https://api.flutter.dev/flutter/widgets/Widget-class.html" rel="noopener ugc nofollow" target="_blank">Widget</a>? icon, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-core/double-class.html" rel="noopener ugc nofollow" target="_blank">double</a>? iconSize, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-ui/Offset-class.html" rel="noopener ugc nofollow" target="_blank">Offset</a> offset = Offset.zero, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-core/bool-class.html" rel="noopener ugc nofollow" target="_blank">bool</a> enabled = true, <a class="ae kv" href="https://api.flutter.dev/flutter/painting/ShapeBorder-class.html" rel="noopener ugc nofollow" target="_blank">ShapeBorder</a>? shape, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-ui/Color-class.html" rel="noopener ugc nofollow" target="_blank">Color</a>? color, <a class="ae kv" href="https://api.flutter.dev/flutter/dart-core/bool-class.html" rel="noopener ugc nofollow" target="_blank">bool</a>? enableFeedback})</span></pre><p id="2045" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们深入研究一下构造函数的每个参数。</p><p id="f4d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">key</code>:唯一标识集合中的特定小部件。很少在弹出菜单构造函数中使用。</p><p id="65bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">itemBuilder</code>:创建菜单中显示的项目。</p><p id="d6a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">initialValue</code>:确保打开菜单时该项目高亮显示。确保在菜单项中也提供它。</p><p id="1299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">onSelected</code>:当用户从弹出菜单按钮中选择值时调用。</p><p id="b115" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">onCanceled</code>:当用户没有选择项目就关闭弹出菜单时调用。</p><p id="c554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">tooltip</code>:描述长按菜单项时将发生的动作的文本。</p><p id="7127" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">elevation</code>:控制菜单后面阴影的大小。</p><p id="137f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">padding</code>:设置菜单项的填充。能够将填充设置为零非常有用。</p><p id="014c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">child</code>:如果提供的话，child是用于这个按钮的部件，按钮将利用一个墨水瓶来点击。</p><p id="5079" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">offset</code>:想要在特定位置显示菜单时的有用属性。后面会讨论。</p><p id="ebb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">color</code>:为弹出菜单提供背景颜色。</p><p id="5ba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">shape</code>:用于为我们的弹出菜单提供特定的形状。</p><h1 id="a9d2" class="nc lu iq bd lv nd ne nf ly ng nh ni mb jw nj jx me jz nk ka mh kc nl kd mk nm bi translated"><strong class="ak">创建普通弹出菜单</strong></h1><p id="4eed" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">在大多数情况下，我们将在<code class="fe nq nr ns nt b">appbar</code>中使用一个弹出菜单作为尾随部件。我们也将这样做，但可以在任何地方使用，方法将保持不变。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="1cf9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了代码的可重用性，我创建了一个名为<code class="fe nq nr ns nt b">_buildAppBar()</code>的方法，它构造了一个基本的<code class="fe nq nr ns nt b">appbar</code>，动作作为一个<code class="fe nq nr ns nt b">PopupMenuButton</code>，动作由<code class="fe nq nr ns nt b">itembuilder</code>属性组成，属性定义了如何构建一个菜单项，这个菜单项在下面的<code class="fe nq nr ns nt b">_buildPopupMenuItem()</code>方法中定义。目前的实施结果如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d902b526ac57943c40edfd262407b6f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*VQcJBUOEPGQVjrWJEHV00g.png"/></div></figure><p id="4daf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nq nr ns nt b">PopupMenuItem</code>中的子属性可以是任何小部件。假设我们想要一个图标和文本小部件作为菜单项，那么我们做以下事情:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="5140" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当前实施的结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/96717ad18adcf5689606291dc01188f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*Z7khZye8D9KGTBEhaagg0w.png"/></div></figure><p id="515f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过添加一个名为color的属性来改变<code class="fe nq nr ns nt b">PopupMenuButton</code>的背景颜色，也可以像上面讨论的那样做很多其他定制。</p><p id="3cfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想在点击特定的<code class="fe nq nr ns nt b">MenuItem</code>时执行特定的动作，我们必须在<code class="fe nq nr ns nt b">PopupMenuItem</code>中提供一个名为value的额外参数，并根据我们的需要进行调整。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="89d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们所做的是，我们在执行方法<code class="fe nq nr ns nt b">_onMenuItemSelected()</code>的<code class="fe nq nr ns nt b">PopumenuButton</code>中添加了一个属性名<code class="fe nq nr ns nt b">onSelected</code>，在该方法中，我们更改了名为<code class="fe nq nr ns nt b">_changeColorAccordingToMenuItem</code>的变量的值。另外，不要忘记将值参数传递给<code class="fe nq nr ns nt b">_buildPopupMenuItem()</code>方法。</p><p id="d3a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当前的实施导致点击“上传”选项:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/d9a876dee65320adada66eaa6401be54.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*6NueQoC88FYN8NINBQBFlw.png"/></div></figure><p id="c063" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以根据需要执行各种其他操作，如在按下菜单项时导航到其他页面。</p><h1 id="9677" class="nc lu iq bd lv nd ne nf ly ng nh ni mb jw nj jx me jz nk ka mh kc nl kd mk nm bi translated">根据我们的需要定制菜单按钮</h1><p id="ce2f" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">现在我们需要把<code class="fe nq nr ns nt b">PopupMenu</code>放在应用栏下面，它应该有一些圆角形状。为了实现这一点，我们将在期望x和y坐标的<code class="fe nq nr ns nt b">PopupMenuButton</code>中提供名为<code class="fe nq nr ns nt b">offset</code>的属性。</p><p id="1e9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们的y坐标，我们将计算appbar的高度并作为第二个参数传递给<code class="fe nq nr ns nt b">Offset()</code>构造函数，因为我们希望我们的菜单位于appbar下面。</p><p id="df25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，为了制作圆角形状，我们将为我们的<code class="fe nq nr ns nt b">PopupMenuButton</code>提供形状属性。</p><p id="ff31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终的代码如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="c536" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给定代码的结果如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/731dcca794bd1790a6bc481e1f44e1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*XxI7V3_VyBZKWSbUKrTJoA.png"/></div></figure><p id="d299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你理解弹出菜单有所帮助。你可以根据自己的需要定制它。感谢阅读。</p></div></div>    
</body>
</html>