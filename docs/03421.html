<html>
<head>
<title>How to Add a Copyright or Watermark to Photos Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python为照片添加版权或水印</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-copyright-or-watermark-to-photos-using-python-a3773c71d431?source=collection_archive---------5-----------------------#2020-02-09">https://betterprogramming.pub/add-copyright-or-watermark-to-photos-using-python-a3773c71d431?source=collection_archive---------5-----------------------#2020-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8b6b" class="pw-subtitle-paragraph jo ip iq bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">保护你的形象，帮助传播你的名字</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/cc4612c88a1275c9eb5b46171c5f0a36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eMcZwuxg9Bh3dRYFfuW5Fw.jpeg"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">雅各布·欧文斯在<a class="ae kw" href="https://unsplash.com/s/photos/photos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="9cac" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你的照片应该有水印，这样你可以保护你的作品，或者你必须应用其他人的水印，以便使用他们的作品。本教程向您展示了如何自动化这个过程，并能够使用Python处理任意数量的照片(在合理的范围内)。</p><p id="5e33" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">本文假设你对Python有基本的了解。更具体地说，你知道如何安装一个</em> <a class="ae kw" href="https://packaging.python.org/tutorials/installing-packages/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> <em class="lt">库</em> </strong> </a> <em class="lt">，并且能够复制和粘贴代码示例。代码的完整版本可以在文章的底部找到。</em></p><p id="a05c" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">假设你已经拍摄了一些照片，比如最近去巴巴多斯岛旅行时拍的这张:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi lu"><img src="../Images/d7c9ada6e6cf7284bf45691aa714f359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R6sFciHniohbn4D66KPumA.jpeg"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">巴巴多斯的芭丝谢芭。罗伯特·布鲁沃斯</p></figure><p id="4245" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你要确保你的努力不会被忽视。尽管未经所有者许可复制和重复使用图片是不允许的，但人们这样做还是有风险的。这就是为什么你可以在照片上添加你的名字、网站或其他任何东西，以确保你被认出是主人。</p><p id="f22a" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">我们如何确保我们的版权声明在照片上，而不是作为文字添加在照片的下方或上方？</em></p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi lu"><img src="../Images/a5266dc986350dd8efe4ddb274871834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C0VKil6Q6-0kjrCNWWlTjg.jpeg"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">不再需要手动输入版权声明！</p></figure><p id="aff8" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Python允许我们以自动化的方式做到这一点。也就是说，无论我们是想获得一张还是一千张照片的版权，努力是一样的。</p><p id="472d" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但是在深入研究一些代码之前，让我们再看一下上面的照片，讨论一下我们具体想要实现什么。</p><h2 id="53d0" class="lv lw iq bd lx ly lz dn ma mb mc dp md lg me mf mg lk mh mi mj lo mk ml mm mn bi translated">要求:我们实际上在做什么？</h2><p id="53a4" class="pw-post-body-paragraph kx ky iq kz b la mo js lc ld mp jv lf lg mq li lj lk mr lm ln lo ms lq lr ls ij bi translated">在给照片添加水印或商标时，我们必须决定几件事情:</p><ul class=""><li id="d80e" class="mt mu iq kz b la lb ld le lg mv lk mw lo mx ls my mz na nb bi translated"><strong class="kz ir"><em class="lt"/></strong><em class="lt"/>它应该说什么？</li><li id="8563" class="mt mu iq kz b la nc ld nd lg ne lk nf lo ng ls my mz na nb bi translated"><strong class="kz ir"><em class="lt"/></strong><em class="lt"/>我们要把它放在哪里？</li><li id="3dc3" class="mt mu iq kz b la nc ld nd lg ne lk nf lo ng ls my mz na nb bi translated"><strong class="kz ir"><em class="lt"/></strong><em class="lt"/>应该是什么样子？</li></ul><p id="7926" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在我的例子中。我已经决定把水印放在照片的右下方，略高于底部。</p><p id="781f" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">什么— </strong>我保持了商标的简洁，决定使用一个“”标志和我的名字，并在照片的右边缘留出几个空格。</p><p id="5aa4" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">如何— </strong>商标在略显饱和的黑框上有一个白色的文字。此外，方框会移到照片的边缘，而文字不会。这种设计将确保无论照片颜色如何，商标都清晰可见。</p><p id="3d0b" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">此外，我们想考虑一下，如果我们指定一张需要申请商标的照片，我们将如何使用这个Python程序？我们应该能够选择一组照片吗？</p><p id="fc5d" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">牢记这些需求将有助于我们编写正确的代码。</p><p id="3cdb" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在本教程中，我将向您展示如何读取图像文件夹，但是您可以在以后修改代码以做最适合您的事情。</p><h1 id="acd6" class="nh lw iq bd lx ni nj nk ma nl nm nn md jx no jy mg ka np kb mj kd nq ke mm nr bi translated">准备</h1><p id="8c2d" class="pw-post-body-paragraph kx ky iq kz b la mo js lc ld mp jv lf lg mq li lj lk mr lm ln lo ms lq lr ls ij bi translated">如果你还没有，<a class="ae kw" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">安装Python </a>。我运行的是3.7版:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="247c" class="lv lw iq nt b gy nx ny l nz oa">Robberts-MacBook-Air:~ robbert$ python<br/>Python 3.7.2 (v3.7.2:9a3ffc0492, Dec 24 2018, 02:44:43)<br/>[Clang 6.0 (clang-600.0.57)] on darwin<br/>Type "help", "copyright", "credits" or "license" for more information.<br/>&gt;&gt;&gt;</span></pre><p id="8655" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们将使用一个名为<code class="fe ob oc od nt b"><a class="ae kw" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">Pillow</a></code>的方便的Python库。在您的终端中使用以下命令安装它(<em class="lt">不知道如何做？</em> <a class="ae kw" href="https://packaging.python.org/tutorials/installing-packages/" rel="noopener ugc nofollow" target="_blank"> <em class="lt">先看这个</em> </a> <em class="lt"> ) </em>:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="8694" class="lv lw iq nt b gy nx ny l nz oa">$ pip install pillow</span></pre><p id="f75f" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一切就绪！让我们编辑一些照片。</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="c3d5" class="nh lw iq bd lx ni ol nk ma nl om nn md jx on jy mg ka oo kb mj kd op ke mm nr bi translated">开始有趣的事情吧！</h1><p id="1a4b" class="pw-post-body-paragraph kx ky iq kz b la mo js lc ld mp jv lf lg mq li lj lk mr lm ln lo ms lq lr ls ij bi translated">我们将编写一些代码来让一切正常工作。如果愿意，您可以在mac终端、windows命令提示符或IDE中编写代码，但这不是必需的。</p><p id="2415" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们的第一步是从PIL库中导入几个模块。当涉及到处理照片时，PIL (Python图像库)为我们做了实际的艰苦工作。然后，我们可以利用这些模块为我们的照片添加水印。</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="28c5" class="lv lw iq nt b gy nx ny l nz oa">from PIL import Image<br/>from PIL import ImageDraw<br/>from PIL import ImageFont</span></pre><p id="a6dc" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">之后，我们使用第一个模块映像打开一个映像。打开图像可以对其执行操作。</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="da97" class="lv lw iq nt b gy nx ny l nz oa">photo = Image.open(‘yourimage/filename.jpg’)<br/> <br/>#Store image width and height<br/>w, h = photo.size<br/>print(w,h)</span></pre><p id="3d6f" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们刚刚打开了一张照片，保存了它的宽度和高度并打印出来。在我的案例中，它导致了:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="f8a3" class="lv lw iq nt b gy nx ny l nz oa">4032 3024</span></pre><p id="9ef2" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来，我们使图像可绘制，并为我们的版权文本设置字体:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="6935" class="lv lw iq nt b gy nx ny l nz oa"># make the image editable<br/>drawing = ImageDraw.Draw(photo)<br/>font = ImageFont.truetype(“RobotoBlack.ttf”, 68)</span></pre><p id="6d1a" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">注意:我的本地字体有些问题，所以我做的是从google fonts ( </em> <a class="ae kw" href="https://fonts.google.com/specimen/Roboto?selection.family=Roboto" rel="noopener ugc nofollow" target="_blank"> <em class="lt">此处</em> </a> <em class="lt">)下载Roboto字体，并将字体文件保存在保存Python脚本的同一个目录中。</em></p><p id="877a" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">太好了，我们已经使图像可绘制，并将字体设置为Roboto，大小设置为68px。</p><p id="b41a" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来是设置版权文本，同时存储该文本的宽度和高度(我们将需要文本和图像的宽度和高度来计算水印的正确位置):</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="946b" class="lv lw iq nt b gy nx ny l nz oa">#get text width and height<br/> <br/> text = “© Robbert Brouwers   “<br/> text_w, text_h = drawing.textsize(text, font)</span></pre><p id="5f31" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">知道了图像的宽度和高度以及文本的宽度和高度，我就可以计算版权文本将被放置在哪里，并将其存储在一个名为<code class="fe ob oc od nt b">pos</code>的变量中:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="7f05" class="lv lw iq nt b gy nx ny l nz oa">pos = w — text_w, (h — text_h) — 50</span></pre><p id="a469" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这将文本放置在图像的右侧(因为它的起始位置正好是文本的宽度)，距离底部50个像素(因此为-50)。稍后尝试这些设置，看看不同的位置看起来如何。</p><p id="29ec" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我最初的计划是给文本一个背景颜色，并使其有点透明。但是，我知道在PIL不可能对文本对象进行这些修改。我的解决方法是创建一个具有版权文本大小的新图像，并赋予其背景颜色和不透明度，然后将文本放在该图像中，并将完整的图像放在原始照片的顶部。</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="a618" class="lv lw iq nt b gy nx ny l nz oa">c_text = Image.new('RGB', (text_w, (text_h)), color = '#000000')<br/>drawing = ImageDraw.Draw(c_text)</span><span id="3753" class="lv lw iq nt b gy oq ny l nz oa">drawing.text((0,0), text, fill="#ffffff", font=font)<br/>c_text.putalpha(100)</span></pre><p id="d8c9" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们上面所做的是用版权文本的宽度和高度以及黑色(#000000)创建一个新图像，然后通过调用<code class="fe ob oc od nt b">ImageDraw.Draw</code>使这个新图像可绘制。</p><p id="1156" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，从我们新创建的图像的位置0，0开始，我们放置版权文本，使其为白色(#ffffff)，并分配前面定义的字体。</p><p id="be82" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为了完成版权图像，我们用<code class="fe ob oc od nt b">putalpha()</code>函数应用一个alpha，使它稍微透明。同样，使用输入值100来测试不同的透明度设置。</p><p id="5a55" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">快到了。我们现在有了我们的照片和一个版权图像，我们想把它放在我们定义为<code class="fe ob oc od nt b">pos</code>的位置上。</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="de16" class="lv lw iq nt b gy nx ny l nz oa">photo.paste(c_text, pos, c_text)<br/>photo.save('yourimage/filename_out.jpg')</span></pre><p id="b30e" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">粘贴函数有三个参数:要粘贴到照片上的图像、位置(坐标)和遮罩。蒙版确保我们应用来自我们图像的阿尔法(在<a class="ae kw" href="http://effbot.org/imagingbook/image.htm#tag-Image.Image.paste" rel="noopener ugc nofollow" target="_blank">文档</a>中有更多相关内容)。</p><p id="60b7" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最后一步是将我们的图像保存到计算机上的一个理想位置。</p><p id="967c" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">太棒了。我们有自己的脚本来决定<strong class="kz ir">版权应该说什么</strong>，<strong class="kz ir">它应该看起来怎么样</strong>，以及<strong class="kz ir">它应该在哪里应用</strong>。我们的最后一步是允许我们读入一个照片目录，并输出每一张带有水印的照片。</p><p id="2ba4" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但首先，这是目前为止完整的脚本:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="5a61" class="lv lw iq nt b gy nx ny l nz oa"><strong class="nt ir">from</strong> <strong class="nt ir">PIL</strong> <strong class="nt ir">import</strong> Image<br/><strong class="nt ir">from</strong> <strong class="nt ir">PIL</strong> <strong class="nt ir">import</strong> ImageDraw<br/><strong class="nt ir">from</strong> <strong class="nt ir">PIL</strong> <strong class="nt ir">import</strong> ImageFont<br/><strong class="nt ir">def</strong> copyright_apply(input_image_path,<br/>                   output_image_path,<br/>                   text):<br/>    photo = Image.open(input_image_path)<br/>    <br/>    <em class="lt">#Store image width and height</em><br/>    w, h = photo.size<br/>    <br/><br/>    <em class="lt"># make the image editable</em><br/>    drawing = ImageDraw.Draw(photo)<br/>    font = ImageFont.truetype("RobotoBlack.ttf", 68)<br/>    <br/>    <em class="lt">#get text width and height</em><br/>    text = "© " + text + "   "<br/>    text_w, text_h = drawing.textsize(text, font)<br/>    <br/>    pos = w - text_w, (h - text_h) - 50<br/>    <br/>    c_text = Image.new('RGB', (text_w, (text_h)), color = '#000000')<br/>    drawing = ImageDraw.Draw(c_text)<br/>    <br/>    drawing.text((0,0), text, fill="#ffffff", font=font)<br/>    c_text.putalpha(100)<br/>   <br/>    photo.paste(c_text, pos, c_text)<br/>    photo.save(output_image_path)</span></pre><p id="7007" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我做了一些改动，让它更容易用于完整的照片目录。</p><p id="1de4" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">首先，我把所有东西都打包到一个名为<code class="fe ob oc od nt b">copyright_apply()</code>的函数中。这样做的想法是，我们可以为每张照片调用这个函数，并以这种方式遍历照片列表。</p><p id="171d" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">其次，我改变了输入路径、输出路径和版权文本的硬编码变量。这样我们可以输入文件名，并自动输出到另一个文件夹，这样我们就不会覆盖原始图像。文本将接受任何字符串输入，然后在它前面加上' '符号，后面加上几个空格。</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="d637" class="nh lw iq bd lx ni ol nk ma nl om nn md jx on jy mg ka oo kb mj kd op ke mm nr bi translated">将您的照片列表放入Python</h1><p id="05c4" class="pw-post-body-paragraph kx ky iq kz b la mo js lc ld mp jv lf lg mq li lj lk mr lm ln lo ms lq lr ls ij bi translated">我已经创建了一个名为<code class="fe ob oc od nt b">python_images</code>的文件夹，在这个文件夹中我又创建了两个文件夹:<code class="fe ob oc od nt b">in</code>和<code class="fe ob oc od nt b">out</code>。在<code class="fe ob oc od nt b">in</code>文件夹中，我放了两张我想应用水印的照片。</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="f26f" class="lv lw iq nt b gy nx ny l nz oa"><strong class="nt ir">import</strong> <strong class="nt ir">glob</strong><br/>list = glob.glob("python_images/in/*.*")<br/>print(list)</span><span id="b3ee" class="lv lw iq nt b gy oq ny l nz oa">&gt;&gt;&gt;&gt;['python_images/in/9C9595ED-BED3-4856-A74A-046DA4F54427.jpg', 'python_images/in/91F94C10-E1C4-471C-B89C-3E7FE78C2032.jpg']</span></pre><p id="1786" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><code class="fe ob oc od nt b">glob</code>是另一个方便的库，允许我们在一个特定的文件夹中获取所有文件名。太好了！这意味着我们可以一张一张地处理这些照片，并将它们传递给我们上面创建的函数:</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="7f4a" class="lv lw iq nt b gy nx ny l nz oa">for photo in list:</span><span id="9665" class="lv lw iq nt b gy oq ny l nz oa"> #create output path based off input path<br/> out = photo.replace(‘in’,’out’)<br/> copyright_apply(photo,<br/> out,<br/> ‘Image editing is awesome!’)</span></pre><h2 id="3545" class="lv lw iq bd lx ly lz dn ma mb mc dp md lg me mf mg lk mh mi mj lo mk ml mm mn bi translated"><strong class="ak">就是这样！</strong></h2><p id="9da0" class="pw-post-body-paragraph kx ky iq kz b la mo js lc ld mp jv lf lg mq li lj lk mr lm ln lo ms lq lr ls ij bi translated">我已经将其保存为<code class="fe ob oc od nt b">copyright.py</code>，每当我想要应用水印时，我都会确保在脚本中分配了正确的文件夹并运行(在mac终端、windows命令提示符或IDE/Jupyter笔记本中):</p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="62d5" class="lv lw iq nt b gy nx ny l nz oa">python copyright.py</span></pre><p id="8d9e" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这样就可以把带水印的照片整齐的输出到out文件夹里了！</p><p id="c981" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">完整代码(如果您使用不同的文件夹/名称，记得调整任何文件路径:</em></p><pre class="kh ki kj kk gt ns nt nu nv aw nw bi"><span id="707f" class="lv lw iq nt b gy nx ny l nz oa">#!/usr/bin/env python<br/># coding: utf-8</span><span id="d586" class="lv lw iq nt b gy oq ny l nz oa"># In[29]:</span><span id="d54c" class="lv lw iq nt b gy oq ny l nz oa">from PIL import Image<br/>from PIL import ImageDraw<br/>from PIL import ImageFont<br/>import glob<br/>def copyright_apply(input_image_path,<br/> output_image_path,<br/> text):<br/> photo = Image.open(input_image_path)<br/> <br/> #Store image width and heigth<br/> w, h = photo.size<br/> #print(w, h )</span><span id="b402" class="lv lw iq nt b gy oq ny l nz oa"># make the image editable<br/> drawing = ImageDraw.Draw(photo)<br/> black = (3, 8, 12)<br/> font = ImageFont.truetype(“RobotoBlack.ttf”, 68)<br/> <br/> #get text width and heigth<br/> <br/> text = “© “ + text + “ “<br/> text_w, text_h = drawing.textsize(text, font)<br/> <br/> pos = w — text_w, (h — text_h) — 50<br/> <br/> c_text = Image.new(‘RGB’, (text_w, (text_h)), color = ‘#000000’)<br/> drawing = ImageDraw.Draw(c_text)<br/> <br/> drawing.text((0,0), text, fill=”#ffffff”, font=font)<br/> c_text.putalpha(100)<br/> <br/> <br/> photo.paste(c_text, pos, c_text)<br/> photo.save(output_image_path)</span><span id="8f39" class="lv lw iq nt b gy oq ny l nz oa">list = glob.glob(“python_images/in/*.*”)</span><span id="76d1" class="lv lw iq nt b gy oq ny l nz oa">for photo in list:<br/> <br/> out = photo.replace(‘in’,’out’)<br/> copyright_apply(photo,<br/> out,<br/> ‘Image editing is awesome!’)</span></pre></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="6ae0" class="nh lw iq bd lx ni ol nk ma nl om nn md jx on jy mg ka oo kb mj kd op ke mm nr bi translated">接下来呢？</h1><p id="8771" class="pw-post-body-paragraph kx ky iq kz b la mo js lc ld mp jv lf lg mq li lj lk mr lm ln lo ms lq lr ls ij bi translated">从这里开始，您可以做一些事情来改进脚本:</p><ul class=""><li id="1117" class="mt mu iq kz b la lb ld le lg mv lk mw lo mx ls my mz na nb bi translated">根据图像大小设置动态字体大小。</li><li id="874d" class="mt mu iq kz b la nc ld nd lg ne lk nf lo ng ls my mz na nb bi translated">要求用户输入文件夹和版权文本。</li><li id="a217" class="mt mu iq kz b la nc ld nd lg ne lk nf lo ng ls my mz na nb bi translated">创建一个用户可以放入图像的界面，脚本将输出带水印的图像。</li></ul><p id="df33" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">看看我的第二张照片，现在有版权了:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi lu"><img src="../Images/07f0f5ae7308cd7f10034ef1e8b821e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFGO6PmemF9Wx8vF3KZk-A.jpeg"/></div></div></figure><p id="e832" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">让我知道你和PIL图书馆或者其他图书馆一起创造的任何酷的东西。</p></div></div>    
</body>
</html>