<html>
<head>
<title>React Hooks: Redux Basics Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应钩子:Redux基础版</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-hooks-redux-basics-edition-6f95411a7754?source=collection_archive---------10-----------------------#2020-11-09">https://betterprogramming.pub/react-hooks-redux-basics-edition-6f95411a7754?source=collection_archive---------10-----------------------#2020-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8b4e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习与React挂钩一起使用的Redux的基础知识</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/485599493574ef24c1f5ac18dfcc7dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tmVAXV27OQmu5npr.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Redux:状态管理系统</p></figure><p id="3062" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">React挂钩是在2019年2月的v16.8版本中引入的。在发布之前，有一些特性是类组件独有的。通过钩子，功能组件现在允许在其中使用状态和其他React特性。钩子的引入也是为了能够重用组件之间的有状态逻辑，简化难以理解的复杂组件，以及扩展功能组件中的特性，因为类会使人和机器感到困惑。2019年6月，React Redux v7.1发布，目的是为了加入钩子。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="7ffa" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">设置Redux</h1><p id="fc49" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">无论你是否使用钩子，Redux的设置都是一样的。对于本文中的示例，我们将制作一个简单的计数器应用程序(这对Redux没有太大意义，但我们只是出于示例目的使用它)。首先，你需要几个包:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="96c6" class="na lz iq mw b gy nb nc l nd ne">npm install redux<br/>npm install react-redux</span></pre><p id="2e86" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">前两个步骤是设置存储、缩减器和操作，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/3f8aa6a9998ce444d8ae1e742be4c3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqGkWHSsTjVj0oUwFnP0Fg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">index.js文件</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/64c01b0557a5121878d774f16aad7134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADqDWxdZc4VoV4L1MxV3dg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">反作用. js文件</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/80031f8df589ec1b69c02c7bbc81625d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eg_44JsGjmCPU0DhwCu8tw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">counterReducer.js文件</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="65d0" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">无挂钩Redux</h1><p id="80f0" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">为了在没有钩子的情况下使用redux，从<a class="ae nl" href="https://github.com/reduxjs/react-redux" rel="noopener ugc nofollow" target="_blank"> react-redux </a>导入的<code class="fe ni nj nk mw b">connect()</code>函数将把react组件与Redux存储连接起来，Redux存储提供了对状态的访问以及改变状态的调度函数。为了获得对它们的访问，<code class="fe ni nj nk mw b">mapStateToProps</code>和<code class="fe ni nj nk mw b">mapDispatchToProps</code>的参数通过函数传递，该函数提供状态和导入的分派函数作为组件内的道具。顺序很重要，因为<code class="fe ni nj nk mw b">mapStateToProps</code>总是需要放在第一位，而<code class="fe ni nj nk mw b">mapDispatchToProps</code>需要放在第二位。这两者都将被设置为变量，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/17171403a3ffa7eb046ae353ba41b52a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GlwILwajmjFfH4n-lXX1-Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">App.js —使用Redux w/o挂钩的计数器应用程序</p></figure><p id="5486" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想使用钩子来获得与上面的应用程序相同的功能，我们将不再需要使用<code class="fe ni nj nk mw b">connect()</code>函数，也不需要为<code class="fe ni nj nk mw b">mapStateToProps</code>和<code class="fe ni nj nk mw b">mapDispatchToProps</code>设置变量。相反，我们可以使用react-redux、<code class="fe ni nj nk mw b">useSelector()</code>和<code class="fe ni nj nk mw b">useDispatch()</code>中可用的钩子。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="ac29" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">使用选择器()</h1><p id="f77d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated"><code class="fe ni nj nk mw b">useSelector()</code>相当于<code class="fe ni nj nk mw b">mapStateToProps</code>，因为它提供了对商店的访问。这个函数通常应该是一个纯函数，因为它可能会被多次调用。整个存储将是参数，因此可以操作从中提取的内容，因为存储是一个完整的对象。当功能被分配给功能组件中的变量时，状态将通过变量而不是通过props来访问。在计数器应用程序中，状态仅由变化的计数器组成，可按如下方式设置:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/ca26fe895d5f3a64b768041cb5a41d1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6xxCCE56Equ4zJqrt-tVqA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">app . js-use selector()设置</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="a4b7" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">使用Dispatch()</h1><p id="771d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">要访问调度功能，我们将能够使用<code class="fe ni nj nk mw b">useDispatch()</code>功能。这个钩子使用对分派函数的引用，以便根据需要使用分派函数。这也是通过将函数设置为一个变量来实现的，让它能够被用作回调，这是我们的计数器应用程序所需要的。然后，调度函数将作为参数传递，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/ac984f8aed16b7b14a5bdef0ca0a88c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gyCnEUryzX3Ay6jAB79njA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">App.js —使用Redux w/o挂钩的计数器应用程序</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="a56d" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">结论</h1><p id="968e" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">我确实发现React Hooks是一个更简洁的代码，所以我更喜欢在未来的代码中使用React Redux Hooks。对于这个计数器应用程序来说，这不是最有意义的，但是在一个更大的应用程序中会有用得多。关于这些挂钩的更多信息，因为我只研究了简单的领域来制作一个简单的功能应用程序，所以请参见下面的参考资料。继续钩住！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2d7e09ec712a2b0dd3cfcc771d926194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*E1rKyGsaCxDgn7jI-ML0dQ.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">柜台申请</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="6b64" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">资源:</h1><ol class=""><li id="6f49" class="np nq iq kx b ky mq lb mr le nr li ns lm nt lq nu nv nw nx bi translated">“React”，脸书开源，2020年11月7日访问，<a class="ae nl" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/</a></li></ol><p id="5fab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.《Redux》，丹·阿布拉莫夫，2020年11月7日，<a class="ae nl" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank">https://redux.js.org/</a></p><p id="0ea7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.“反应-还原”，丹·阿布拉莫夫，2020年11月7日，<a class="ae nl" href="https://react-redux.js.org/" rel="noopener ugc nofollow" target="_blank">https://react-redux.js.org/</a></p></div></div>    
</body>
</html>