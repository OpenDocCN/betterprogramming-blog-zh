<html>
<head>
<title>Boost Your Productivity With the Redux Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Redux工具包提高您的工作效率</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/boost-your-productivity-with-the-redux-toolkit-7a14657351c3?source=collection_archive---------10-----------------------#2020-09-16">https://betterprogramming.pub/boost-your-productivity-with-the-redux-toolkit-7a14657351c3?source=collection_archive---------10-----------------------#2020-09-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b800" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Redux Toolkit是官方的、固执己见的、包含电池的工具集，用于高效的Redux开发</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0eb64bf021a6a60f88b0e087188c53c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQDgmX43zdfbpl94X8yKAw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">官方的、固执己见的、包含电池的高效Redux开发工具集。来源:<a class="ae ky" href="https://redux-toolkit.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux工具包</a></p></figure><p id="ff67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Redux是管理应用程序全局状态的优秀工具。React非常适合前端库，如React、Vue或Angular。</p><p id="dd32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，Redux是有代价的——设置起来很繁琐，而且有相当一部分样板代码。</p><p id="870f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/reduxjs/redux-toolkit" rel="noopener ugc nofollow" target="_blank"> redux toolkit </a>包解决了redux库的一些痛点——比如编写过多的样板代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/54b233caa776447567b633302ce15b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FPswWc8OTuznQDpvp2SjWQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://github.com/reduxjs/redux-toolkit" rel="noopener ugc nofollow" target="_blank"> redux-toolkit </a></p></figure><p id="d06e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Redux工具包旨在成为编写Redux逻辑的标准方法。最初创建它是为了帮助解决Redux的三个常见问题。</p><ul class=""><li id="7d1b" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">配置Redux存储太复杂了。</li><li id="100c" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">我必须添加很多包才能让Redux做任何有用的事情。</li><li id="dc1d" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">Redux需要太多样板代码。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/a654d20aa0b80baa1212fbfdc0914e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4kpfzUtJjvFjvCxnQbNRtw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://redux-toolkit.js.org/" rel="noopener ugc nofollow" target="_blank"> redux-toolkit </a></p></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="1411" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">入门指南</h1><p id="161b" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">使用React和Redux Toolkit启动新应用的推荐方式是使用<a class="ae ky" href="https://github.com/reduxjs/cra-template-redux" rel="noopener ugc nofollow" target="_blank">官方Redux+JS模板</a>用于<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">创建React应用</a>，该模板利用了React Redux与React组件的集成。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="c8df" class="nu mt it nq b gy nv nw l nx ny">npx create-react-app my-react-redux-app --template redux</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/9e64f795e944b762b6670b03a9bdf472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bPa2btoYzYMPPa0EYZBa7w.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Redux应用程序运行在<a class="ae ky" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a></p></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="d8cf" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">标准商店设置</h1><p id="82ce" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">以下示例来自<a class="ae ky" href="https://redux.js.org/recipes/configuring-your-store" rel="noopener ugc nofollow" target="_blank">配置您的商店</a>页面。Redux文档显示了一个典型的商店设置过程。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">设置Redux存储是冗长的</p></figure><p id="90e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的例子很冗长，而且并不总是简单明了。Redux <code class="fe oc od oe nq b">createStore</code>函数接受位置参数:<code class="fe oc od oe nq b">(rootReducer, preloadedState, enhancer)</code> —很容易忘记哪个参数是哪个。</p><p id="2cb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">设置中间件和增强器的过程可能会令人困惑，尤其是当您试图添加几个配置时。</p><p id="12de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Redux DevTools扩展文档最初建议使用一些手工编写的代码来检查全局名称空间以查看扩展是否可用。这样做的问题是许多开发人员复制并粘贴这些代码片段——这使得安装代码整体上更难阅读。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="15e3" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">使用redux-kit简化商店设置</h1><p id="e0d9" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">让我们使用redux-kit库中的版本，而不是编写我们自己的存储。下面是一个如何导入和使用<code class="fe oc od oe nq b">configureStore</code>功能的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="fcd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe oc od oe nq b">configureStore</code>最简单的方法是将根缩减器函数作为名为<code class="fe oc od oe nq b">reducer</code>的参数传递。</p><p id="2792" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，<code class="fe oc od oe nq b">configureStore</code>默认添加了一些中间件，每个都有特定的目标:</p><ul class=""><li id="ed94" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated"><code class="fe oc od oe nq b"><a class="ae ky" href="https://github.com/reduxjs/redux-thunk" rel="noopener ugc nofollow" target="_blank">redux-thunk</a></code>是最常用的中间件，用于处理组件之外的同步和异步逻辑</li><li id="a0a2" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">在开发中，检查常见错误的中间件，如改变状态或使用不可序列化的值。</li></ul><h2 id="67bb" class="nu mt it bd mu of og dn my oh oi dp nc li oj ok ne lm ol om ng lq on oo ni op bi translated"><code class="fe oc od oe nq b">configureStore</code>有助于</h2><ul class=""><li id="b39f" class="lw lx it lb b lc nk lf nl li oq lm or lq os lu mb mc md me bi translated">让options对象带有“命名的”参数，这样更容易阅读。</li><li id="6b04" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">允许您提供想要添加到商店中的中间件和增强器的阵列。</li><li id="c664" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">为你呼叫<code class="fe oc od oe nq b">applyMiddleware</code>和<code class="fe oc od oe nq b">compose</code>。</li><li id="42cf" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">启用现成的Redux DevTools扩展。</li></ul><p id="0902" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">商店设置代码本身要短得多，也更容易阅读。它还为您提供了开箱即用的强大功能。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="6ffe" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">自定义商店设置</h1><p id="320d" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">如果您需要自定义商店设置，您可以传递附加选项。</p><p id="ecde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是使用Redux Toolkit的热重装示例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="18ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您提供了<code class="fe oc od oe nq b">middleware</code>参数，<code class="fe oc od oe nq b">configureStore</code>将只使用您列出的任何中间件。</p><p id="de0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想将一些定制的中间件和默认值捆绑在一起，您可以调用<code class="fe oc od oe nq b"><a class="ae ky" href="https://redux-toolkit.js.org/api/getDefaultMiddleware" rel="noopener ugc nofollow" target="_blank">getDefaultMiddleware</a></code>并将结果包含在您提供的<code class="fe oc od oe nq b">middleware</code>数组中。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="f3c0" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">用<code class="fe oc od oe nq b">createReducer</code>简化减速器</h1><p id="b23a" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">Redux Toolkit包括一个<code class="fe oc od oe nq b">createReducer</code>功能，类似于Redux文档中显示的功能。然而，我们的<code class="fe oc od oe nq b">createReducer</code>实用程序有一些特殊的“魔力”,让它变得更好。</p><p id="f165" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它在内部使用了<a class="ae ky" href="https://github.com/mweststrate/immer" rel="noopener ugc nofollow" target="_blank"> Immer </a>库，这允许你编写代码来“改变”一些数据，但是实际上是不变地应用更新。这使得在一个缩减器中意外地改变状态实际上是不可能的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="d6d0" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">使用<code class="fe oc od oe nq b">createReducer Function</code>的注意事项</h1><p id="de8e" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">虽然Redux Toolkit <code class="fe oc od oe nq b">createReducer</code>函数很有帮助，但请记住:</p><ul class=""><li id="2efb" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">“变异”代码只能在我们的<code class="fe oc od oe nq b">createReducer</code>函数中正常工作。</li><li id="a375" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">Immer不会让你混合“改变”草稿状态和返回一个新的状态值。</li></ul><p id="0fda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">详见<code class="fe oc od oe nq b"><a class="ae ky" href="https://redux-toolkit.js.org/api/createReducer" rel="noopener ugc nofollow" target="_blank">createReducer</a></code> <a class="ae ky" href="https://redux-toolkit.js.org/api/createReducer" rel="noopener ugc nofollow" target="_blank"> API参考</a>。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="8b5b" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">用<code class="fe oc od oe nq b">createAction</code>定义动作创建者</h1><p id="1c67" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">手动编写动作创建器会变得单调乏味，并且会引入大量样板代码。</p><p id="4b09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Redux Toolkit提供了一个名为<code class="fe oc od oe nq b"><a class="ae ky" href="https://redux-toolkit.js.org/usage/usage-guide#defining-action-creators-with-createaction" rel="noopener ugc nofollow" target="_blank">createAction</a></code>的函数，它简单地生成一个动作创建器，该创建器使用给定的动作类型，并将其参数转换为<code class="fe oc od oe nq b">payload</code>字段。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="1226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oc od oe nq b">createAction</code>还接受一个“准备回调”参数，这允许您定制生成的<code class="fe oc od oe nq b">payload</code>字段，并可选地添加一个<code class="fe oc od oe nq b">meta</code>字段。</p><p id="d851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请参阅<code class="fe oc od oe nq b"><a class="ae ky" href="https://redux-toolkit.js.org/api/createAction#using-prepare-callbacks-to-customize-action-contents" rel="noopener ugc nofollow" target="_blank">createAction</a></code> <a class="ae ky" href="https://redux-toolkit.js.org/api/createAction#using-prepare-callbacks-to-customize-action-contents" rel="noopener ugc nofollow" target="_blank"> API参考</a>了解有关使用准备回调定义动作创建者的详细信息。</p><p id="c667" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你感到好奇，查看官方文档<a class="ae ky" href="https://redux-toolkit.js.org/usage/usage-guide" rel="noopener ugc nofollow" target="_blank">进行深入探究。</a></p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="5aee" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="2962" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">感谢您的阅读——希望您能发现新的方法。编码快乐！</p></div></div>    
</body>
</html>