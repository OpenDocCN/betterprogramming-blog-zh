<html>
<head>
<title>Build a Personal Journal With Django and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Django和Python创建个人日志</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-personal-journal-with-django-and-python-f4835d27368c?source=collection_archive---------4-----------------------#2021-10-25">https://betterprogramming.pub/build-a-personal-journal-with-django-and-python-f4835d27368c?source=collection_archive---------4-----------------------#2021-10-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4118" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建Django web应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1e88a147e19e0fa1b9daad46075517e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aoO5BQA9f11QagkZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sincerelymedia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">真诚媒体</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3709" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将设计并构建一个简单的个人日志，用户可以在其中执行以下操作:</p><ul class=""><li id="84bd" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">添加新的日记条目</li><li id="ed3a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">查看所有日记条目</li><li id="8e18" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">编辑和删除特定的日记条目</li></ul><p id="f8a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">用户界面和UX </strong></p><p id="770b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在构建任何应用程序之前，您应该考虑UI(用户界面)和UX(用户体验)。想想用户将如何浏览应用程序，以及它应该是什么样子。用户界面不必很复杂；一个简单的草图可以给你一个你想要实现的想法，使建筑过程更快更容易。对于我们的个人日志应用程序，我们应该有这样的东西:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/19e801530678b912c7877132e21aecfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QD7QedlgVtdrbRZE0h-IEA.png"/></div></div></figure><p id="7a2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当用户第一次打开应用程序时，他们会在主页上看到他们所有的日志条目，就像你在上面看到的一样。他们还可以选择点击按钮添加新的日志。</p><h1 id="28ea" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">先决条件</h1><p id="53cf" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">你应该对Python和Django有一个基本的了解。您还应该熟悉命令行工具。</p><h1 id="f69d" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated"><strong class="ak">与Django一起创建个人日志</strong></h1><p id="c7eb" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我们将从创建一个虚拟环境开始。虚拟环境用于安装项目依赖项。如果您不熟悉虚拟环境，请参阅python <a class="ae ky" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwiAtqe5-djzAhWoDWMBHdV0AC0QFnoECBwQAQ&amp;url=https%3A%2F%2Fdocs.python.org%2F3%2Ftutorial%2Fvenv.html&amp;usg=AOvVaw0UAep4lL9Ei_BmqDlZ7DMd" rel="noopener ugc nofollow" target="_blank">文档</a>以获得更详细的解释。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="3e2c" class="nm ml it ni b gy nn no l np nq">mkdir JOURNAL</span><span id="9cf3" class="nm ml it ni b gy nr no l np nq">cd journal/</span><span id="2a5b" class="nm ml it ni b gy nr no l np nq">python3 -m venv myenv</span></pre><p id="39c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">激活虚拟环境:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="959a" class="nm ml it ni b gy nn no l np nq">source myenv/bin/activate</span></pre><p id="2f1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建Django项目:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="42f4" class="nm ml it ni b gy nn no l np nq">django-admin startproject journalapp</span></pre><p id="6ed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装Django:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="c969" class="nm ml it ni b gy nn no l np nq">python3 -m pip install Django</span></pre><h2 id="9f16" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated"><strong class="ak">数据库</strong></h2><p id="c9f7" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">Django附带了一个轻量级的SQLite数据库，非常适合简单的项目。如果您打开<code class="fe od oe of ni b">settings.py</code>文件，您应该会看到sqlite的数据库配置。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="df86" class="nm ml it ni b gy nn no l np nq">DATABASES = {</span><span id="9b0f" class="nm ml it ni b gy nr no l np nq">    'default': {</span><span id="fe0a" class="nm ml it ni b gy nr no l np nq">        'ENGINE': 'django.db.backends.sqlite3',</span><span id="3a75" class="nm ml it ni b gy nr no l np nq">        'NAME': BASE_DIR / 'db.sqlite3',</span><span id="e03a" class="nm ml it ni b gy nr no l np nq">    }<br/>}</span></pre><h2 id="fce3" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">创建超级用户</h2><p id="1089" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">cd到<code class="fe od oe of ni b">journalapp </code>并创建一个超级用户。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="d13d" class="nm ml it ni b gy nn no l np nq">cd journalapp<br/>python3 manage.py createsuperuser</span></pre><p id="7ba3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行服务器</p><p id="e010" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查看您的应用程序启动并运行，请运行开发服务器。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="2be4" class="nm ml it ni b gy nn no l np nq">python3 manage.py runserver</span></pre><p id="df2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到<a class="ae ky" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank"> localhost:8000 </a>，您应该看到应用程序正在运行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/12aeda5b40ec2c90950035ccb74ba926.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lGJRnwAZEquj5XssKCZsvQ.png"/></div></div></figure><p id="439e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要以管理员身份登录，请导航到localhost: admin并使用超级用户凭据登录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/afcb5c620786d64f06ebea31c5f5b8ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mKSSkyZOjIkgORl1q9GBsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Django管理</p></figure><p id="b737" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">创建日志应用</strong></p><p id="eb63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Django中，应用程序用于区分应用程序的不同组件。随着应用程序的增长，通过为每个组件创建一个应用程序来区分应用程序的各个部分至关重要。例如，如果你正在建立一个医院管理系统，你会有一个医生、病人等等的应用程序。在这个项目中，我们将只创建一个名为journal的应用程序。</p><p id="098b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在终端中，通过按ctrl+C关闭服务器，并使用以下命令创建一个日志应用程序。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="e575" class="nm ml it ni b gy nn no l np nq">python3 manage.py startapp journal</span></pre><p id="3dc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述命令将创建一个名为journal的文件夹，其中包含以下文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/bed948fd81aec105c9cce991e2aa709f.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*wS73ujlIKiZ38dpg0cwOPw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">日志应用程序</p></figure><p id="1cbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe od oe of ni b">settings.py</code>，在<code class="fe od oe of ni b">INSTALLED_APPS</code>的列表下添加日志app，如下图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="38b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这让Django意识到了app的存在。正如你在上面看到的，Django已经有了一些内置的应用程序，比如:</p><ul class=""><li id="29b2" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">作家（author的简写）</li><li id="3de8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">管理</li><li id="1a9e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">内容类型</li><li id="d30f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">会话，欧洲电信委员会</li></ul><p id="b416" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">创建模型</strong></p><p id="3758" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Django使用模型来表示Django应用程序中的对象。对象指的是我们希望存储在我们的应用程序中的东西，即书籍、电影、人物、e.t.c .模型，反过来也有属性；例如，一个人可以有一个名字，年龄等等。</p><p id="7493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的日志应用程序中，由于我们知道日志必须有标题、描述和日期，因此我们将创建一个名为<code class="fe od oe of ni b">Journal</code>的<code class="fe od oe of ni b">Model</code>,具有以下属性:</p><ul class=""><li id="fc7f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">标题</li><li id="1c85" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">描述</li><li id="c528" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">日期_创建时间</li></ul><p id="5cbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe od oe of ni b">journal/models.py</code>并添加日志模型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">models.py</p></figure><h2 id="4a73" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">迁移—进行迁移</h2><p id="6066" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我们已经有一个数据库，但我们还没有让它知道我们的模型。这是通过迁移完成的。迁移用于实现对模型的更改。每当您对模型进行更改时，您都必须运行迁移。让我们通过运行迁移来实现这一点。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="285e" class="nm ml it ni b gy nn no l np nq">python3 manage.py makemigrations</span></pre><p id="7ce2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到下面的结果。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="eb16" class="nm ml it ni b gy nn no l np nq">Migrations for ‘journal’:</span><span id="7419" class="nm ml it ni b gy nr no l np nq">journal/migrations/0001_initial.py</span></pre><p id="af87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of ni b">makemigrations</code>命令创建一个迁移文件，其中包含如何创建数据库模式的指令。下一步是在我们的数据库中创建实际的表；我们使用migrate命令来实现这一点。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="97e1" class="nm ml it ni b gy nn no l np nq">python3 manage.py migrate</span></pre><p id="5861" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该在终端中看到以下内容。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h1 id="fab8" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated"><strong class="ak">实施CRUD功能</strong></h1><p id="73b2" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">现在我们已经完成了数据库的设置和模型的定义，是时候实现日志条目的创建、读取、更新和删除了。</p><h2 id="fa95" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">登记日记帐模型</h2><p id="c419" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">向数据库添加日志条目最简单的方法是向django <code class="fe od oe of ni b">admin</code>注册<code class="fe od oe of ni b">Journal</code>模型。为此，打开<code class="fe od oe of ni b">journal/admin.py</code>文件添加以下代码。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="e020" class="nm ml it ni b gy nn no l np nq">from django.contrib import admin</span><span id="4c08" class="nm ml it ni b gy nr no l np nq">from .models import Journal</span><span id="e637" class="nm ml it ni b gy nr no l np nq"># Register your models here.</span><span id="453d" class="nm ml it ni b gy nr no l np nq">admin.site.register(Journal)</span></pre><p id="fadb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行开发服务器并导航到localhost:8000/admin，添加一些日志条目，这样您就可以处理一些数据了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/c32d154eb3aafe15d8bb338365fcf00e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UuTpjBk077STwi2dLwQ7aQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加新的日记条目</p></figure><h2 id="f23d" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated"><strong class="ak">基于类的通用视图</strong></h2><p id="8b77" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">在设计大多数web应用程序时，不得不一次又一次地重复某些模式是很单调的。Django提供了抽象这些模式的通用视图来减轻这种痛苦，允许开发人员快速编写通用视图。</p><p id="1a50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通用的基于类的视图允许开发人员快速实现创建、检索、更新和删除操作。</p><p id="4dc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Django中的视图用于向浏览器呈现模板。在许多项目中，最常用的视图是:</p><ul class=""><li id="1489" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">列表视图</li><li id="1939" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">详细视图</li><li id="d061" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">创建视图</li><li id="d47a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">更新视图</li><li id="c74e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">删除视图</li></ul><p id="b122" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从显示日记账表中所有日记账条目的列表开始。打开<code class="fe od oe of ni b">journal/views.py</code>，从<code class="fe od oe of ni b">model.py</code>文件导入<code class="fe od oe of ni b">Journal</code>模型，从文件顶部的<code class="fe od oe of ni b">django.views.generic</code>导入<code class="fe od oe of ni b">ListView</code>。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="d9c4" class="nm ml it ni b gy nn no l np nq"># views.py</span><span id="99a3" class="nm ml it ni b gy nr no l np nq">from .models import Journal</span><span id="7b37" class="nm ml it ni b gy nr no l np nq">from django.views.generic import ListView</span></pre><p id="ba92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建<code class="fe od oe of ni b">JournalListView</code>，它将获取数据库中的所有日志条目，并将信息传递给模板进行显示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">journal/view . py</p></figure><p id="a68f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们在<code class="fe od oe of ni b">Journal</code>模型上定义了一个<code class="fe od oe of ni b">JournalListView </code>，并明确地告诉视图使用哪个模板。如果没有在视图中定义模板，Django将从对象的名称中推断出一个模板。</p><p id="02e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建模板<code class="fe od oe of ni b">templates/journal/journal_list.html.</code> Django会自动在模板目录中寻找模板。您的模板目录结构应该如下所示:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="d92b" class="nm ml it ni b gy nn no l np nq">journal</span><span id="2229" class="nm ml it ni b gy nr no l np nq">  templates</span><span id="d653" class="nm ml it ni b gy nr no l np nq">      journal</span><span id="4616" class="nm ml it ni b gy nr no l np nq">        journal_list.html</span></pre><p id="57dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe od oe of ni b">templates/journal/journal_list.html</code>并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">journal_list.html</p></figure><p id="e9a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们根据一个包含变量<code class="fe od oe of ni b">journal_list</code>的上下文进行渲染，这个变量包含所有的<code class="fe od oe of ni b">Journal</code>对象。Django使用模型类名的小写版本自动填充上下文。为了让其他人更容易理解您的代码，您还可以在定义视图时设置上下文变量的名称。按如下方式更新<code class="fe od oe of ni b">JournalListView</code>类。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="5af5" class="nm ml it ni b gy nn no l np nq">class JournalListView(ListView):</span><span id="29b0" class="nm ml it ni b gy nr no l np nq">    model = Journal</span><span id="22c8" class="nm ml it ni b gy nr no l np nq">    template_name = "journal/journal_list.html"</span><span id="5660" class="nm ml it ni b gy nr no l np nq">    context_object_name = "journal_list"</span></pre><p id="16cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将视图与您的URL挂钩。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">urls.py</p></figure><p id="5208" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除非您将以上URL连接到个人日志项目的<code class="fe od oe of ni b">urlpatterns</code>上，否则它们将不起作用。打开<code class="fe od oe of ni b">journalapp/urls.py</code>并将它们包含在<code class="fe od oe of ni b">urlpatterns</code>列表中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">journalapp/urls.py</p></figure><p id="f641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到<a class="ae ky" href="http://127.0.0.1:8000/journal/list" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/journal/list</a>，您现在可以看到页面已经被您拥有的几个条目填充。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/f3dc8e39202f2a307f21da9f00978596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*ORdygUFIH_rOTiBwmEi7Ig.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">所有日志</p></figure><h2 id="81d5" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">姜戈.贡献.人性化</h2><p id="3c7a" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">是一组Django模板过滤器，用于为数据添加“人情味”。例如，上面的第一个日志条目将显示7个月3周前，而不是2021年3月1日上午10:16。首先，将<code class="fe od oe of ni b">django.contrib.humanize </code>添加到您的<code class="fe od oe of ni b">INSTALLED_APPS</code>设置中以激活这些过滤器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">settings.py</p></figure><p id="78a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成之后，在journal_list模板中使用<code class="fe od oe of ni b">{% load humanize %}</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">journal_list.html</p></figure><h2 id="955a" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">创建基础模板</h2><p id="0953" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">Django允许您拥有一个包含站点所有公共元素的基础模板，并定义子模板可以覆盖的块。</p><p id="d215" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们定义模板。创建一个模板<code class="fe od oe of ni b">/templates/journal /base.html</code>，并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">base.html</p></figure><p id="930a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，日志列表页面将填充基本模板中定义的内容块。</p><p id="b045" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如下图所示更新<code class="fe od oe of ni b">templates/journal/journal_list.html</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><code class="fe od oe of ni b">journal_list.html</code></p></figure><p id="c649" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">刷新日志列表页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/19e801530678b912c7877132e21aecfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QD7QedlgVtdrbRZE0h-IEA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">日记列表页面</p></figure><p id="7ba5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所看到的，页面看起来更漂亮了，因为我们使用了bootstrap进行样式设计，并且日期是人类可读的格式。</p><h1 id="b68a" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated"><strong class="ak">创建新的日志条目</strong></h1><p id="571c" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">创建新日记条目的语法与显示日记条目几乎相似，只是有几个关键区别。这里我们使用了<code class="fe od oe of ni b">CreateView</code>类，并提供了一个fields属性。</p><p id="6cce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从顶部的<code class="fe od oe of ni b">django.views.generic.edit</code>导入<code class="fe od oe of ni b">CreateView</code>开始。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="856d" class="nm ml it ni b gy nn no l np nq">from django.views.generic import ListView,CreateView</span></pre><p id="aa89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，创建类视图并追加必要的属性，它们是:</p><ul class=""><li id="0281" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">模型</li><li id="b116" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">模板名称</li><li id="c0f1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">田地（复数）；场；域；字段</li></ul><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="8f08" class="nm ml it ni b gy nn no l np nq">class JournalCreateView(CreateView):</span><span id="a995" class="nm ml it ni b gy nr no l np nq">    model = Journal<br/>    template_name = 'journal/create_journal_form.html'<br/>    fields = ['title', 'description']<br/>    success_url = reverse_lazy('journallist')</span></pre><p id="3d73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建模板<code class="fe od oe of ni b">journal/create_journal_form.html</code>并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">create _ journal _表单. html</p></figure><p id="6331" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe od oe of ni b">journal/urls.py</code>并更新创建新日志条目的路径。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="cd9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看创建新日志的表单是否有效；导航到<a class="ae ky" href="http://127.0.0.1:8000/journal/journalcreate" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/journal/journal create</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/144a5b3a8e9ded9fc14b5d7806792ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*KyA9zOtcYvq77F1pMx5Nng.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新日志</p></figure><p id="1128" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一个新的日志条目并点击提交按钮；你应该被重定向到记者页面。由于我们在视图中定义的<code class="fe od oe of ni b">success_url</code>,重定向是可能的。</p><p id="705a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">更新和删除日记帐分录</strong></p><p id="a18b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要更新或删除日志条目，我们将分别使用<code class="fe od oe of ni b">UpdateView</code>和<code class="fe od oe of ni b">DeleteView</code>。打开<code class="fe od oe of ni b">journal/views.py</code>和必要的功能及其属性。<code class="fe od oe of ni b">journal/views.py</code>文件现在应该是这样的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">views.py</p></figure><h2 id="23e2" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">更新URL</h2><p id="7b21" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">如果我们想要删除或更新上面代码中的一个实例，一个主键将被附加到路径上。</p><p id="3886" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的URL文件中，我们将路径写成如下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">urls.py</p></figure><p id="0821" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Django将寻找主键并呈现特定的日志条目。</p><h1 id="3e4b" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">创建更新和删除日记帐模板。</h1><h2 id="32de" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">update_journal_form.html</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">update_journal_form.html</p></figure><h2 id="c4cc" class="nm ml it bd mm ns nt dn mq nu nv dp mu li nw nx mw lm ny nz my lq oa ob na oc bi translated">删除_日志_表单. html</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">删除_日志_表单. html</p></figure><p id="f0dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在上面看到的，object变量用于访问特定的日志细节。</p><p id="346c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您单击特定的日志条目时，您将被重定向到更新页面。您可以编辑或删除所有条目。页面现在看起来像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/922fb2a4be39b3c326bd69a4441ecd4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f0WWte_C4c9I5b6nppVQOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更新日志</p></figure><p id="295f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您选择删除条目，您将被定向到下面的页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/135d13db556368265c7517938ccd7040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f9-9LPQNVXY4HmJg3zGydA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者输出</p></figure></div><div class="ab cl oq or hx os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="im in io ip iq"><h1 id="50ec" class="mk ml it bd mm mn ox mp mq mr oy mt mu jz oz ka mw kc pa kd my kf pb kg na nb bi translated"><strong class="ak">结论</strong></h1><p id="4dd7" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">本教程涵盖了您需要了解的关于Django中CRUD功能的所有内容。希望你喜欢。Django在功能方面提供了很多。你还可以在这篇<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/design-your-own-login-and-registration-system-in-django-b34a2fa8334d">文章</a>中学习如何实现登录和注册功能。</p></div></div>    
</body>
</html>