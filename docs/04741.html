<html>
<head>
<title>An Opinionated Way to Structure React Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种自以为是的构建React应用的方式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-opinionated-way-to-structure-react-apps-10f87bf29952?source=collection_archive---------4-----------------------#2020-05-05">https://betterprogramming.pub/an-opinionated-way-to-structure-react-apps-10f87bf29952?source=collection_archive---------4-----------------------#2020-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6ac7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">根据我建造几个大项目的经验</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/82ee8a6a6c5491d0ee377e38a0019b6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*maZNyBAhbf1Ol2Uj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dtopkin1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">戴恩·托普金</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄。</p></figure><p id="154b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们第一次开发React应用程序时，我们可以将每个组件放在一个文件夹中，它就可以工作了。但是当涉及到更大的项目时，如果我们继续这样使用React，可能很难在文件之间找到我们的方法。</p><p id="7067" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我们如何处理一个更大的项目呢？<a class="ae ky" href="https://react-file-structure.surge.sh/" rel="noopener ugc nofollow" target="_blank">丹阿布拉莫夫有办法</a>。你不觉得这很有帮助吗？事实上，它是。这是找到满足您需求的完美架构的最佳方式，但代价是文件夹创建和删除的多次迭代。</p><p id="c4e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，我将介绍我的许多举措的结果，为寻求提高自身能力的人们建立一个基础结构。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c6e7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">初步考虑</h1><p id="8e43" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们开始之前，我想指出的是，我提出了一种自以为是的构建应用程序的方法。在一些项目中，我不得不做不同的事情，因为应用的核心概念太不一样了。对你来说也是如此。</p><p id="a95f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，我想介绍几个想法，这样你会更好地理解为什么。</p><p id="dc8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先我用<a class="ae ky" href="https://atomicdesign.bradfrost.com/" rel="noopener ugc nofollow" target="_blank">原子设计</a>。有些组件只是可视的。基本上，它涉及到我的<a class="ae ky" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>中的每一个组成部分。我把它们叫做ui <em class="mz"> </em>组件。原子设计也带来了模板组件。</p><p id="8487" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他一些组件被赋予了表单域的特定行为，例如增强的表单域为浏览器默认表单域提供了验证模式。他们是原子设计中的有机体。</p><p id="6309" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我正在使用React上下文API而不是redux，正如我在之前的一篇文章中解释的那样。我创建顶级组件，我称之为提供者。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="511d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">根文件夹入门</h1><p id="b639" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用<a class="ae ky" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>，我的应用程序的根文件夹是<code class="fe na nb nc nd b">src</code>文件夹，我在其中放置了几个文件夹:</p><ul class=""><li id="d600" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">App</code> —放置主组件的文件夹，包含全局提供者和主路由。</li><li id="a247" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">components</code> —应用程序的每个React组件所属的位置。</li><li id="1232" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">在其中我可以找到我可以在应用程序中提出的GraphQL请求的每一部分。</li><li id="35d0" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">libs</code> —这个有点乱，但是包含了其他的一切。它通常由不到十个文件组成，所以我从来没有更好地分割它们。</li></ul><p id="5dc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我在基础结构的简单性和代码分割之间找到的更好的比例。由于React是一个组件框架，你很容易想象到<code class="fe na nb nc nd b">components</code>文件夹会更复杂一点。</p><p id="89c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他三个文件夹我就不详细解释了。您可以查看本文底部的示例树，以了解更多关于放在那里的文件类型的信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cc07" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">组件文件夹</h1><p id="0152" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们到了:应用程序的主要部分。这个文件夹由更多的子文件夹组成。记住，如果你复制了这个结构，如果它在你的项目中没有意义，你不需要完全使用它们。例如，<code class="fe na nb nc nd b">ui</code>文件夹在<a class="ae ky" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank"> Material-UI </a>应用程序中没有意义。</p><ul class=""><li id="970e" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">hooks </code>——我在应用程序中放置了大量的挂钩。我有很多这样的文件来体现可重用性，所以我还创建了子文件夹来说明它们所属的工作。例如，我经常有一个<code class="fe na nb nc nd b">useInterval</code>钩子来处理循环作业。我还在那里放置了一个<code class="fe na nb nc nd b">useUser</code>钩子，它给了我当前连接的用户信息。</li><li id="6e1c" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">这重新组合了我项目中的每一个模态。我曾经把它们放在别的地方，但是我实际上发现我在应用中经常会多次使用它们，而且数量相当多。有了他们自己的文件夹，我在上面工作变得更简单了。</li><li id="4de9" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">organisms</code> —我放置之前提到的功能组件的文件夹。如果有太多的子文件夹，可以将它拆分成子文件夹，这种情况经常发生。</li><li id="19a3" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">providers</code>-包含全局数据或特征逻辑的组件。为了更多地了解提供者是什么样子的，我邀请您看一看以前的一篇文章<a class="ae ky" href="https://medium.com/better-programming/how-i-dropped-redux-for-the-context-api-7338d481e179" rel="noopener">,在这篇文章中我用它们替换了redux。</a></li><li id="4fb1" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">svg</code> —自从create-react-app <a class="ae ky" href="https://create-react-app.dev/docs/adding-images-fonts-and-files/#adding-svgs" rel="noopener ugc nofollow" target="_blank">以来，应用程序中使用的每个图标的主页可以本地包含它们</a>。你可能有设计师，但万一你没有，我真的很喜欢<a class="ae ky" href="https://materialdesignicons.com/" rel="noopener ugc nofollow" target="_blank">材料设计图标集</a>，在那里我总能为我的应用找到完美的图标。</li><li id="1d9d" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">templates</code>——其中有我的原子设计应用程序的页面布局。它不是应用程序中最丰富的文件夹，但考虑到布局的用途，它们最好被隔离。</li><li id="5aed" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">ui</code> —我的应用程序的原子和分子在哪里。这是应用程序中最重的文件夹之一，所以它被域子文件夹分开。</li><li id="dd71" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">pages</code> —这对应于我的应用程序中定义的页面。这是最复杂的文件夹，因为它是递归的。我们将在这一章之后的特定章节中讨论它。</li></ul><p id="d48f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是很多文件夹，对吧？我的完美文件夹结构中最困难的部分是保持简单(<a class="ae ky" href="https://en.wikipedia.org/wiki/KISS_principle" rel="noopener ugc nofollow" target="_blank">亲亲！</a>)，但没有把苹果和橘子混在一起。这就是为什么我把原子设计的原子和分子放在同一个文件夹中，但我也经常有域子文件夹。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="44de" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Pages子文件夹</h1><p id="24c7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在谈到文件夹结构之前，我们先来谈谈URL。我发现，将应用程序中的每个URL分为两部分(域名和页面)是构建页面路径更简单、更可靠的方法。</p><p id="136e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我也可能有额外的参数来显示特定的详细页面。这些数量不限。</p><p id="1091" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我有这样几页:</p><ul class=""><li id="cbcc" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">/user/login</code></li><li id="6943" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">/user/account</code></li><li id="03c3" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">/todo/list</code></li><li id="6dae" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">/todo/details/123</code></li><li id="a7bc" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi">…</li></ul><p id="9593" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我没有这些:</p><ul class=""><li id="0447" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">例如<code class="fe na nb nc nd b">/user</code>会重定向到<code class="fe na nb nc nd b">/user/dashboard</code>。</li><li id="0ecc" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe na nb nc nd b">/</code>可能也会重定向到<code class="fe na nb nc nd b">/user/dashboard</code>。</li></ul><p id="c18d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些URL给你一个关于文件夹结构的提示。毫无疑问，我们有第一个文件夹是域，第二个文件夹是页面。</p><p id="d540" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我前面提到的，页面文件夹也是递归的。为什么？原因很简单，有时内容对应用程序来说不是全局的。一个<code class="fe na nb nc nd b">useTodoList</code>钩子只在<code class="fe na nb nc nd b">/todo/list</code>页面和<code class="fe na nb nc nd b">TodoItem</code>组件中使用。</p><p id="c670" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在页面文件夹中，您还可以找到一个<code class="fe na nb nc nd b">components</code>文件夹，其中包含除了<code class="fe na nb nc nd b">pages</code>之外的所有先前定义的文件夹。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e23d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">把所有的放在一起</h1><p id="007d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是一个很大的词来定义整体结构。但是一个例子往往比文字更好，所以这里是:</p><pre class="kj kk kl km gt ns nd nt nu aw nv bi"><span id="904a" class="nw md it nd b gy nx ny l nz oa">src<br/> |- App<br/> |   |- App.jsx<br/> |- components<br/> |   |- hooks<br/> |   |   |- useInterval.jsx<br/> |   |- modals<br/> |   |   |- AddTodoModal.jsx<br/> |   |- organisms<br/> |   |   |- PrivateRoute.jsx<br/> |   |   |- forms<br/> |   |   |   |- TextInput.jsx<br/> |   |- pages<br/> |   |   |- todo<br/> |   |   |   |- list<br/> |   |   |   |   |- TodoList.jsx<br/> |   |   |   |   |- components<br/> |   |   |   |   |   |- hooks<br/> |   |   |   |   |   |   |- useTodoList.jsx<br/> |   |   |   |   |   |- organisms<br/> |   |   |   |   |   |   |- TodoItem.jsx<br/> |   |   |- user<br/> |   |   |   |- login<br/> |   |   |   |   |- UserLogin.jsx<br/> |   |- providers<br/> |   |   |- UserProvider.jsx<br/> |   |   |- TodoProvider.jsx<br/> |   |- svg<br/> |   |   |- check.svg<br/> |   |- templates<br/> |   |   |- LoggedPage.jsx<br/> |   |   |- LoginPage.jsx<br/> |   |- ui<br/> |   |   |- alert<br/> |   |   |   |- Alert.jsx<br/> |   |   |   |- Alert.module.css<br/> |   |   |   |- Alert.stories.jsx<br/> |   |   |   |- Alert.test.js<br/> |   |   |- button<br/> |   |   |   |- Button.jsx<br/> |   |   |   |- Button.module.css<br/> |   |   |   |- Button.stories.jsx<br/> |   |   |   |- Button.test.jsx<br/> |- gql<br/> |   |- todo<br/> |   |   |- TodoCreate.gql<br/> |   |   |- TodoDelete.gql<br/> |- libs<br/>     |- preload.js</span></pre><p id="4cb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使这个例子非常简单，它也包含了说明前面解释的所有内容。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="db91" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="af4c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">即使React的这个文件夹结构是多年来关于如何组织项目的工作，它也可能不适合所有的需求。然而，到今天为止，它满足了我所有项目的需求，让我在工作中特别有效率。</p><p id="3c50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你自己遇到了一些问题，我将很高兴听到你关于这个提议是如何给你带来麻烦的。但是记住，正确的文件夹结构不一定是我的，而是适合你的项目的。毕竟:</p><blockquote class="ob"><p id="983d" class="oc od it bd oe of og oh oi oj ok lu dk translated">"移动文件直到感觉合适为止."— <a class="ae ky" href="https://react-file-structure.surge.sh/" rel="noopener ugc nofollow" target="_blank">丹·阿布拉莫夫</a></p></blockquote></div></div>    
</body>
</html>