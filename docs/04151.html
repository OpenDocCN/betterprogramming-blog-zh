<html>
<head>
<title>How to Work With JSON Files in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中使用JSON文件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-work-with-json-files-in-python-bedb5b37cbc9?source=collection_archive---------1-----------------------#2020-03-26">https://betterprogramming.pub/how-to-work-with-json-files-in-python-bedb5b37cbc9?source=collection_archive---------1-----------------------#2020-03-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="30e0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python读写JSON文件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7e69034a37929c658f310f29bf5d867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-XMVPxrt6HvKx_ib"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·里德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9b71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数时候，我们在一个文件中找到JSON对象，这就是为什么今天，我将告诉你如何只使用Python来读写JSON文件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="572b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">文章图</h1><p id="f61c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了让你对这篇文章有一个大概的了解，我写了这个小地图，它将向你展示我们将在本教程中做什么。</p><ol class=""><li id="36a2" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">JSON模块概述。</li><li id="01b4" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">JSON文件的示例。</li><li id="d42c" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">JSON文件结构。</li><li id="b3c1" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">使用<code class="fe nn no np nq b">json</code>模块读取JSON。</li><li id="fc68" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在JSON文件中编写JSON对象。</li><li id="f61e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">JSON文件和对象的主要用法。</li><li id="d6bf" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">JSON文件的另一种用法。</li></ol><p id="7388" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经更具体地了解了我们将在教程中做什么，您已经准备好开始使用Python处理JSON了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="93cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Python的JSON模块</h1><p id="1593" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要使用JSON(包含JSON对象的字符串或文件)，可以使用Python的<code class="fe nn no np nq b">json</code>模块。您需要先导入该模块，然后才能使用它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b0a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有<a class="ae ky" href="https://docs.python.org/3/library/json.html" rel="noopener ugc nofollow" target="_blank">官方JSON文档</a>，但是在进入下一步之前，我想向您展示一下<code class="fe nn no np nq b">json</code>模块的两个我们最常用的功能:</p><ul class=""><li id="9da7" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated"><code class="fe nn no np nq b">json.load()</code></li><li id="f541" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated"><code class="fe nn no np nq b">json.dump()</code></li></ul><p id="9a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经猜到了，我们将使用<code class="fe nn no np nq b">load()</code> <strong class="lb iu"> </strong>函数读取JSON文件，使用<code class="fe nn no np nq b">dump()</code>函数写入JSON文件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b861" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">JSON文件的示例</h1><p id="42e2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了让您理解JSON是如何工作的，这里有一个简单的JSON文件示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="445a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">JSON的结构</h1><p id="5d9e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">JSON语法源自JavaScript的对象符号语法:</p><ul class=""><li id="1bbb" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">数据是名称/值对。</li><li id="1025" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">数据用逗号分隔。</li><li id="992e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">花括号表示对象。</li><li id="1e39" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">方括号包含数组。</li></ul><p id="46e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JSON中，值必须是以下数据类型之一:</p><ul class=""><li id="d03c" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">一根绳子</li><li id="0d7a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">一个数字</li><li id="4821" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">一个对象(JSON对象)</li><li id="402f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">阵列</li><li id="0a11" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">布尔型</li><li id="003e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">空</li></ul><p id="5435" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript <strong class="lb iu">，</strong>值可以是上述所有值，加上任何其他有效的JavaScript表达式，包括:</p><ul class=""><li id="3c68" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">一项功能</li><li id="c58b" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">约会</li><li id="6996" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">不明确的</li></ul><p id="61f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JSON的语法如下。</p><ul class=""><li id="512d" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">对象用大括号(<code class="fe nn no np nq b">{}</code>)括起来，它们的名称-值对用逗号(<code class="fe nn no np nq b">,</code>)分隔，一对中的名称和值用冒号(<code class="fe nn no np nq b">:</code>)分隔。对象中的名称是字符串，而值可以是七种值类型中的任何一种，包括另一个对象或数组。</li><li id="b062" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">数组用括号(<code class="fe nn no np nq b">[]</code>)括起来，它们的值用逗号(<code class="fe nn no np nq b">,</code>)隔开。数组中的每个值可以是不同的类型，包括另一个数组或对象。</li><li id="89d3" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">当对象和数组包含其他对象或数组时，数据具有树状结构</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9dd9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">读取JSON文件</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/16e72b800a2e5aea98dbcd299b6a4bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*evy8w1gSh92PknOy"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@fabspotato?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法比奥拉·佩尼亚巴</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="52cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们已经看到的，为了读取JSON文件，我们将使用<code class="fe nn no np nq b">json.load()</code>函数。但是在我们从一个文件加载一些JSON对象之前，我们必须使用Python的<code class="fe nn no np nq b">open()</code>内置函数读取它。</p><p id="3baa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想使用<code class="fe nn no np nq b">read_json.py</code>脚本读取<code class="fe nn no np nq b">test.json</code>文件，我们:</p><ol class=""><li id="b461" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">导入<code class="fe nn no np nq b">json</code>模块。</li><li id="cb31" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">使用<code class="fe nn no np nq b">open()</code>内置功能打开<code class="fe nn no np nq b">test.json</code>。</li><li id="b788" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">使用<code class="fe nn no np nq b">json.load()</code>函数加载<code class="fe nn no np nq b">test.json</code>文件中的JSON对象。</li><li id="66d2" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">打印出<code class="fe nn no np nq b">test.json</code>文件中JSON对象的值。</li></ol><p id="5b46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在编写脚本之前，我们需要创建<code class="fe nn no np nq b">test.json</code>文件，并将以下代码粘贴到其中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d4e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该文件包含一个JSON对象，该对象有三个值的名称和三个值，每个值名称对应一个值:</p><ul class=""><li id="4701" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated"><code class="fe nn no np nq b">"Macbook Air"</code>值对应于<code class="fe nn no np nq b">"product"</code>值的名称。</li><li id="9e53" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated"><code class="fe nn no np nq b">"5.0" </code>值对应于<code class="fe nn no np nq b">"overall"</code>值的名称。</li><li id="5579" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated"><code class="fe nn no np nq b">"I really love this computer"</code>值对应于“文本”值的名称。</li></ul><p id="fcf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也就是说，我们可以开始构建我们的<code class="fe nn no np nq b">read_json.py</code>脚本了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><ul class=""><li id="32a2" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">第1行:导入的<code class="fe nn no np nq b">json</code>模块。</li><li id="a11f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第4行:使用<code class="fe nn no np nq b">open()</code>功能打开<code class="fe nn no np nq b">test.json</code>文件。</li><li id="2d2c" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第5行:使用<code class="fe nn no np nq b">json.load()</code>函数加载JSON对象。</li><li id="d2d3" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第6行:关闭<code class="fe nn no np nq b">test.json</code>文件。</li><li id="6d31" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第8-10行:通过使用value-name获取JSON对象的值。</li><li id="a2a8" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第12-14行:打印JSON对象的值。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b22b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">编写JSON文件</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/b0f138ab27dcee6b0d23afb6baf5200d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ch7qd2S89eDzNwFl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">帕特里克·福尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d1c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在学会读取JSON文件之后，我们学习如何编写JSON文件。</p><p id="d104" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，要编写一个内部包含JSON对象的JSON文件，我们将使用<code class="fe nn no np nq b">json.dump()</code>函数。</p><p id="6c2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始构建我们的<code class="fe nn no np nq b">write_json.py </code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><ul class=""><li id="7452" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">第一行:进口<code class="fe nn no np nq b">json</code>模块。</li><li id="46c6" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第4-8行:定义我们的JSON数据。</li><li id="134f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第10行:以写模式(<code class="fe nn no np nq b">"writed_json.json", “w”</code>)打开<code class="fe nn no np nq b">writed_json.py</code>文件，这意味着如果文件已经存在，脚本将只把JSON数据写入文件，否则，如果文件不存在，脚本将创建它，然后把JSON数据写入其中。</li><li id="f094" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第11行:使用<code class="fe nn no np nq b">json.dump()</code>函数在<code class="fe nn no np nq b">"writed_json.json"</code>文件中写入我们之前定义的<code class="fe nn no np nq b">json_data</code>。</li><li id="2275" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">第12行:关闭文件。</li></ul><p id="3c6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，打开您的<code class="fe nn no np nq b">writed_json.json</code>文件，您应该看到以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="cf70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这正是我们在<code class="fe nn no np nq b">write_json.py</code>脚本中定义的JSON对象。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0cbb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">JSON的主要用途</h1><p id="aafb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">JSON格式通常用于通过网络连接序列化和传输结构化数据。它主要用于在服务器和web应用程序之间传输数据，作为XML的替代。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="99a9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">JSON的替代用法</h1><p id="b1fd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">虽然这不是它的主要用途，但我发现JSON文件对于以更有序的方式管理项目的设置非常有用。</p><p id="7e97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，由于它的结构，JSON很容易阅读和编写(正如我们在本教程中看到的)，所以我发现它们是管理设置的好资源。</p><p id="f006" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，JSONs还有很多其他的用法，你可以找到自己喜欢的用法！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0f9c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="25b1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">学习如何管理JSON是web开发人员的基本资源。但是它甚至对软件工程师或数据科学家也很有用，正如我们在第<em class="nw">段的<em class="nw">JSON的替代用法中看到的。</em></em></p><p id="4065" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，学习新事物总是好的，尤其是如果它只需要几分钟。</p></div></div>    
</body>
</html>