<html>
<head>
<title>A Beginners’ Cheat Sheet for Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">码头工人初学者备忘单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-beginners-cheat-sheet-for-docker-f5024fd6c17f?source=collection_archive---------10-----------------------#2022-04-13">https://betterprogramming.pub/a-beginners-cheat-sheet-for-docker-f5024fd6c17f?source=collection_archive---------10-----------------------#2022-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ff85" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解什么是docker以及如何使用它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/831862e2d2330d665037f33d25da3044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BV0WQbPmA5sK2r3sL_eWIQ.jpeg"/></div></div></figure><h1 id="feb1" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">Docker是什么？</h1><p id="b4b8" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">Docker的流行有多种原因，其中之一是创建了快速且易于部署的便携容器。正如他们的<a class="ae mi" href="https://www.docker.com/resources/what-container/" rel="noopener ugc nofollow" target="_blank">网站</a>上提到的，一个容器将你的代码和任何其他依赖项打包在一起，这样它就可以可靠地跨多个平台部署。这些容器可以在你的Windows，Mac &amp; Linux上本地运行。其次，像AWS或Azure这样的主要云系统确实支持开箱即用。最后，它可以在任何可以安装和运行它的托管空间上使用。</p><p id="56ca" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">容器是docker的组成部分。在这篇博客中，我们将浏览帮助我们操作和创建容器的各种命令。当我们浏览每个命令时，你会对docker的工作原理有更好的理解。所以让我们坚持到底。</p><h1 id="59aa" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">先决条件</h1><ul class=""><li id="82aa" class="mo mp it lo b lp lq ls lt lv mq lz mr md ms mh mt mu mv mw bi translated">您的系统应该预装了docker。你可以在这里找到下载链接:<a class="ae mi" href="https://docs.docker.com/desktop/windows/install/" rel="noopener ugc nofollow" target="_blank"> Windows </a>或者<a class="ae mi" href="https://docs.docker.com/desktop/mac/install/" rel="noopener ugc nofollow" target="_blank"> Mac </a>。</li></ul><h1 id="12fd" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">入门指南</h1><p id="6cdb" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">执行以下命令来验证docker安装:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="468e" class="nc kv it my b gy nd ne l nf ng">docker --version</span></pre><p id="e2c4" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">它将打印已安装的版本。现在，我们将创建一个非常基本的Node.js应用程序来进行容器化。</p><p id="2550" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">创建一个名为yay-docker的文件夹。其次，创建两个名为server.js和package.json的文件，如下所示:</p><p id="41bb" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><code class="fe nh ni nj my b">package.json</code>:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="5596" class="nc kv it my b gy nd ne l nf ng">{<br/> "name": "yay-docker",<br/> "dependencies": {<br/>  "express": "^4.17.1"<br/> }<br/>}</span></pre><p id="c4cc" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><code class="fe nh ni nj my b">server.js</code>:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="94df" class="nc kv it my b gy nd ne l nf ng">const server = require("express")();<br/>server.listen(8080, async () =&gt; { });<br/>server.get("/yay-docker", async (_, response) =&gt; { <br/>  console.log('Request Received for yay-docker');<br/>  response.json({ "yay": "docker" });<br/>});</span></pre><p id="b9c6" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">为了创建容器，我们首先需要创建如下所示的“Dockerfile ”:</p><p id="f1c7" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><code class="fe nh ni nj my b">Dockerfile</code>:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="2467" class="nc kv it my b gy nd ne l nf ng"># Download the slim version of node<br/>FROM node:17-slim</span><span id="3ee0" class="nc kv it my b gy nk ne l nf ng"># Set the work directory to app folder. <br/># We will be copying our code here<br/>WORKDIR /app</span><span id="572e" class="nc kv it my b gy nk ne l nf ng">#Copy the contents of our project in the app folder inside container<br/>COPY . .</span><span id="8a64" class="nc kv it my b gy nk ne l nf ng"># Install the dependencies in the container<br/>RUN npm install</span><span id="7782" class="nc kv it my b gy nk ne l nf ng"># Run the node server with server.js file<br/>CMD ["node", "server.js"]</span><span id="ebd8" class="nc kv it my b gy nk ne l nf ng"># Expose the service over PORT 3000<br/>EXPOSE 3000</span></pre><p id="8284" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">这是我们的基本设置，我们将从中创建一个图像，并将其作为一个容器运行。</p><h1 id="6cc4" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">基本Docker命令</h1><p id="1142" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">我们将会看到docker的以下功能。为此，从终端或命令提示符导航到您的项目目录。</p><ul class=""><li id="6e5f" class="mo mp it lo b lp mj ls mk lv nl lz nm md nn mh mt mu mv mw bi translated"><a class="ae mi" href="https://arjavdave.com/2022/04/12/docker-introduction-and-cheat-sheet/#create-an-image" rel="noopener ugc nofollow" target="_blank">创建图像</a></li><li id="f311" class="mo mp it lo b lp no ls np lv nq lz nr md ns mh mt mu mv mw bi translated"><a class="ae mi" href="https://arjavdave.com/2022/04/12/docker-introduction-and-cheat-sheet/#run-image-as-container" rel="noopener ugc nofollow" target="_blank">将图像作为容器运行</a></li><li id="edcd" class="mo mp it lo b lp no ls np lv nq lz nr md ns mh mt mu mv mw bi translated"><a class="ae mi" href="https://arjavdave.com/2022/04/12/docker-introduction-and-cheat-sheet/#list-containers" rel="noopener ugc nofollow" target="_blank">列出容器</a></li><li id="dd91" class="mo mp it lo b lp no ls np lv nq lz nr md ns mh mt mu mv mw bi translated"><a class="ae mi" href="https://arjavdave.com/2022/04/12/docker-introduction-and-cheat-sheet/#container-logs" rel="noopener ugc nofollow" target="_blank">集装箱日志</a></li><li id="db99" class="mo mp it lo b lp no ls np lv nq lz nr md ns mh mt mu mv mw bi translated"><a class="ae mi" href="https://arjavdave.com/2022/04/12/docker-introduction-and-cheat-sheet/#entering-the-container" rel="noopener ugc nofollow" target="_blank">进入集装箱</a></li><li id="f7f0" class="mo mp it lo b lp no ls np lv nq lz nr md ns mh mt mu mv mw bi translated"><a class="ae mi" href="https://arjavdave.com/2022/04/12/docker-introduction-and-cheat-sheet/#bonus-commands" rel="noopener ugc nofollow" target="_blank">奖励命令</a></li></ul><h1 id="9e2d" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">创建一个图像</h1><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="bf8c" class="nc kv it my b gy nd ne l nf ng">docker build -t yay-docker .</span></pre><p id="59b5" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">运行上面的命令开始创建项目的图像。这里，<em class="nt"> yay-docker </em>是您想要创建的图像的名称。它将启动多层下载<a class="ae mi" href="https://hub.docker.com/_/node" rel="noopener ugc nofollow" target="_blank"> <em class="nt">节点:17-slim </em> </a>图像。一旦完成，它将运行<code class="fe nh ni nj my b">npm install</code>从你的<code class="fe nh ni nj my b">package.json</code>文件中安装依赖项，如<em class="nt"> express </em>。下面是成功运行该命令后的屏幕截图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/40c1c0a955e23f3fe33e4af60566d227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AMfbxjNry44QNi7h"/></div></div></figure><p id="6055" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">该图像也可以在Docker桌面软件中看到，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/cfc8756ce6271202b5370ff306dbd27a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KdfPiAlI0d9_1sJs"/></div></div></figure><h1 id="4d0d" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">将图像作为容器运行</h1><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="d8ca" class="nc kv it my b gy nd ne l nf ng">docker run -p 3000:8080 -d yay-docker</span></pre><p id="60f7" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">上面的命令将简单地运行名为<em class="nt"> yay-docker </em>的映像。3000是集装箱的端口号。而8080是在我们的容器中运行的节点应用程序的端口号。您可以在docker桌面应用程序中查看容器列表，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/556b9db1110085ed0c3649a1aa06aee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Ph22rKX8-mh4DDH"/></div></div></figure><p id="54a1" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">为了测试你的容器是否运行成功，在你的浏览器上打开<code class="fe nh ni nj my b"><a class="ae mi" href="http://localhost:3000/yay-docker" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/yay-docker</a></code>。将显示一个漂亮的JSON文本<code class="fe nh ni nj my b">{“yay”:”docker”}</code>。恭喜你！您已经成功运行了您的第一个容器。</p><h1 id="ee4a" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">列出容器</h1><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="fc27" class="nc kv it my b gy nd ne l nf ng">docker ps -a</span></pre><p id="41ab" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">如果在本地运行，Docker Desktop会显示容器列表。但是如果需要通过命令行查看，您可以使用上面的命令。它将列出所有容器以及容器id、正常运行时间和状态。容器id用于操作容器，我们将在下面看到</p><h1 id="effc" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">集装箱日志</h1><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="4e15" class="nc kv it my b gy nd ne l nf ng">docker logs &lt;container-id&gt;</span></pre><p id="da7e" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">如果您想在控制台中看到您的应用程序正在打印什么呢？上面的命令正是这样做的。它打印你的容器的日志。</p><p id="b1ff" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">在上面的命令中，用容器列表中的id替换<code class="fe nh ni nj my b">&lt;container-id&gt;</code>。你可以在日志中看到一行写着<em class="nt">“yay-docker”</em>的请求已收到。这通常有助于在云上调试任何错误或检查控制台日志。</p><h1 id="efc8" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">进入集装箱</h1><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="af6d" class="nc kv it my b gy nd ne l nf ng">docker exec -it &lt;container-id&gt; /bin/sh</span></pre><p id="4ffb" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">有时你想进入集装箱收集信息。例如查看日志文件。使用上面的命令可以很容易地做到这一点。您可以键入<code class="fe nh ni nj my b">ls</code> <em class="nt"> </em>命令来查看容器的<code class="fe nh ni nj my b">/app</code>目录中的列表文件，并根据需要操作容器。</p><p id="d693" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">输入<code class="fe nh ni nj my b">exit</code> <em class="nt"> </em>命令退出容器。</p><h1 id="07d4" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">奖励命令</h1><p id="6a52" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><strong class="lo iu">启动容器</strong></p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="2304" class="nc kv it my b gy nd ne l nf ng">docker start &lt;container-id&gt;</span></pre><p id="ef7e" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><strong class="lo iu">停止容器</strong></p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="18c2" class="nc kv it my b gy nd ne l nf ng">docker stop &lt;container-id&gt;</span></pre><p id="9b9c" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><strong class="lo iu">取出容器</strong></p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="ba67" class="nc kv it my b gy nd ne l nf ng">docker rm &lt;container-id&gt;</span></pre><h1 id="50b2" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">从这里去哪里</h1><p id="a67a" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">希望您已经很好地理解了Docker是什么，以及如何将您的应用程序容器化以获得更好的稳定性。当第2部分正在编写时，你可以访问<a class="ae mi" href="https://docs.docker.com/engine/reference/commandline/docker/" rel="noopener ugc nofollow" target="_blank">官方文档</a>来了解更高级的特性集。</p><p id="7bd2" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">你可以把整个项目放在我的Github账户上:<a class="ae mi" href="https://github.com/shenanigan/yay-docker" rel="noopener ugc nofollow" target="_blank">https://github.com/shenanigan/yay-docker</a></p></div></div>    
</body>
</html>