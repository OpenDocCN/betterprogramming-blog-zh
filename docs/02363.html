<html>
<head>
<title>How To Build a Hacker News App in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Flutter中搭建一个黑客新闻App</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-hacker-news-in-flutter-a03a716dce2f?source=collection_archive---------19-----------------------#2019-11-25">https://betterprogramming.pub/building-hacker-news-in-flutter-a03a716dce2f?source=collection_archive---------19-----------------------#2019-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2614" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在任何设备上获取并显示当天的头条新闻</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9ef0659405d820cb96f513e0043a1640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZIbglj4Y_SWtSW8QJVQkw.png"/></div></div></figure><p id="eb69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在过去的几个月里，我一直在努力学习我的关于<a class="ae ln" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>的新中级视频课程，该课程将在Udemy冬末或早春推出。</p><p id="906d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，我将讲述如何制作一个应用程序来显示来自<a class="ae ln" href="https://news.ycombinator.com/" rel="noopener ugc nofollow" target="_blank">黑客新闻</a>的故事，以及评论。</p><p id="c5ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Hacker News提供了一个优秀的、文档完善的JSON API，可以公开获得。你可以在GitHub 上查看API <a class="ae ln" href="https://github.com/HackerNews/API" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="f5fb" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">获取头条新闻</h1><p id="cd03" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">第一步是实现一个web服务来获取头条新闻。有几个软件包可以在Flutter中执行网络任务。</p><p id="810a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了简单起见，我们将使用<a class="ae ln" href="https://pub.dev/packages/http" rel="noopener ugc nofollow" target="_blank"> http </a>包。通过在<code class="fe ms mt mu mv b">pubspec.yaml</code>文件中添加http包来安装包，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="525e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<a class="ae ln" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>中，一旦保存了<code class="fe ms mt mu mv b">pubspec.yaml</code>文件，就会自动下载包。如果您想手动安装软件包，只需运行:</p><pre class="kg kh ki kj gt my mv mz na aw nb bi"><span id="e9d9" class="nc lw iq mv b gy nd ne l nf ng">flutter pub get</span></pre><p id="185b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将在一个<code class="fe ms mt mu mv b">Webservice.dart</code>文件中实现我们的<code class="fe ms mt mu mv b">getTopStories</code>方法。实现如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0656" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们使用http包来调用以下URL:</p><p id="9ac0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty" rel="noopener ugc nofollow" target="_blank">https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty </a></p><p id="da84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您查看来自上述URL的响应，您将意识到它返回了一个故事id数组。我们使用这些id来检索实际的故事，并利用<code class="fe ms mt mu mv b">Future.wait</code> <strong class="kt ir"> </strong>来等待所有的响应。</p><p id="aa00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦评估了所有响应，就向调用者返回一个<code class="fe ms mt mu mv b">Future&lt;List&lt;Response&gt;&gt;</code>。</p><div class="nh ni gp gr nj nk"><a href="https://www.udemy.com/course/flutter-dart-mvvm-design-pattern/?referralCode=3E32698D188E47553501" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">终极手摇&amp; MVVM -建造真实的项目</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">Google Flutter框架风靡全球。Flutter允许开发人员编写一个单一的代码库…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">www.udemy.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="da27" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">显示热门故事</h1><p id="6500" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated"><code class="fe ms mt mu mv b">TopArticleList</code>小部件负责向用户显示顶级黑客新闻。我们在<code class="fe ms mt mu mv b">initState</code>方法内部调用<code class="fe ms mt mu mv b">_populateTopStories</code>，如下面的实现所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4f73" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">构建功能负责为应用程序创建用户界面。实现如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="d66f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的截图显示了结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/b9761253ed20ffb50ec759d6ecc2927d.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*R7CiSjaCTYNWupRRNEd9DQ.png"/></div><p class="oa ob gj gh gi oc od bd b be z dk translated">黑客新闻应用头条页面</p></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="c63b" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">显示文章的评论</h1><p id="1893" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">目前，一个故事不显示与该故事相关的评论数量。下面的JSON端点返回一个特定的故事，以及评论的id，由JSON响应中的子属性表示。</p><p id="ae9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">【https://hacker-news.firebaseio.com/v0/item/8863.json? T2】打印=漂亮</p><p id="def2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了满足这一需求，我们更新了<code class="fe ms mt mu mv b">Story</code>模型，将<code class="fe ms mt mu mv b">commentIds</code>包括在内，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="9cc0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">进行更改后，运行应用程序，您将看到更新后的结果，如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/6eed1afee48b2eb034659931a176efdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*sGn_D0WbEGfAkXIuIjx-QA.png"/></div><p class="oa ob gj gh gi oc od bd b be z dk translated">附有评论的故事</p></figure><p id="c8c3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后一部分是查看与每个故事相关的评论。完整的代码可以在<a class="ae ln" href="https://github.com/azamsharp/hacker_news_flutter" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p><div class="nh ni gp gr nj nk"><a href="https://www.udemy.com/course/flutter-dart-mvvm-design-pattern/?referralCode=3E32698D188E47553501" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">终极手摇&amp; MVVM -建造真实的项目</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">Google Flutter框架风靡全球。Flutter允许开发人员编写一个单一的代码库…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">www.udemy.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div></div></div>    
</body>
</html>