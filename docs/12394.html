<html>
<head>
<title>How to Get Wallet Address Using WalletConnect On Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Android上使用WalletConnect获取钱包地址</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-get-wallet-address-using-walletconnect-on-android-cdffda84cda1?source=collection_archive---------6-----------------------#2022-06-02">https://betterprogramming.pub/how-to-get-wallet-address-using-walletconnect-on-android-cdffda84cda1?source=collection_archive---------6-----------------------#2022-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="daba" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用WalletConnect SDK从Android应用程序获取加密钱包地址</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c041440c39c8dbdbf1e407310db60228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RJRzeK83X9aIz3A1k7vQcw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@tezos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">泰佐斯</a>在<a class="ae kv" href="https://unsplash.com/s/photos/crypto-wallet?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6b4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">区块链技术的发展如此迅速，以至于即使那些没有听说过加密货币或不知道其工作的人也在寻求投资和探索这一领域。根据《独立报》的一项研究，11%的受访英国人表示，如果他们对加密货币或区块链技术更加熟悉，他们会对其感兴趣。随着加密货币的热潮继续在全球蔓延，越来越多的初创公司每天都在开发使用区块链技术的新方法，难怪越来越多的人对投资这个领域感兴趣。</p><p id="0c9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇短文中，我们将学习如何使用Jetpack Compose和WalletConnect将加密钱包连接到我们的Android应用程序。</p><h1 id="155b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">目录</strong></h1><ul class=""><li id="5df0" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">什么是加密钱包？</li><li id="8611" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">什么是WalletConnect？</li><li id="28e8" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">什么是Jetpack Compose？</li><li id="e82f" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">将钱包连接到Android应用程序</li></ul><h2 id="521e" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">什么是加密钱包？</strong></h2><p id="ad4e" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">当我们谈到加密货币时，有一个最重要的东西叫做加密钱包。CrypoWallets旨在存储数字资产和验证交易。钱包使用用于签署交易的私钥来保存秘密信息。加密钱包是存储和管理硬币和代币的安全方式，但市场上有几种不同类型的钱包:</p><ol class=""><li id="f37a" class="mk ml iq ky b kz la lc ld lf np lj nq ln nr lr ns ms mt mu bi translated">热门钱包<br/> —桌面钱包<br/> —网络钱包<br/> —手机钱包</li><li id="d242" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr ns ms mt mu bi translated">冷钱包<br/> —五金钱包<br/> —纸质钱包</li></ol><h2 id="86ab" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">什么是WalletConnect？</strong></h2><p id="83d6" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated"><a class="ae kv" href="https://docs.walletconnect.com/" rel="noopener ugc nofollow" target="_blank"> WalletConnect </a>是一个开放的协议，用于在钱包和dapp(web 3应用)之间进行安全通信。该协议使用桥接服务器来中继有效载荷，从而在两个应用和/或设备之间建立远程连接。这些有效载荷通过两个对等体之间的共享密钥对称加密。</p><p id="cbbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">连接由一个显示QR码或具有标准WalletConnect URI的深度链接的对等方发起，并在对方批准该连接请求时建立。它还包括一个可选的推送服务器，允许本机应用程序通知用户已建立连接的传入有效负载。</p><h2 id="543e" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">什么是Jetpack Compose？</strong></h2><p id="b7aa" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">Jetpack Compose是一个Android现代工具，用于创建由Google开发人员开发的原生ui。Jetpack Compose被比作iOS应用程序开发中使用的SwiftUI。这种类比基于更简单的设计、更少的代码和更多的业务逻辑。</p><p id="f82a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jetpack Compose简化了Android应用程序中的UI开发，并实现了更快的应用程序开发。Jetpack Compose的座右铭是更少的代码、强大的工具、直观的Kotlin APIs和快速的应用程序开发。</p><h2 id="d8dd" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">将钱包连接到安卓应用</strong></h2><p id="0670" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">在本节中，我们将把Wallet连接到我们的Android应用程序，并使用<a class="ae kv" href="https://docs.walletconnect.com/quick-start/wallets/kotlin" rel="noopener ugc nofollow" target="_blank"> Wallet Connect SDK </a>获取用户地址。</p><h2 id="dcf3" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">设置依赖关系</strong></h2><p id="af3e" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">在<code class="fe nt nu nv nw b">build.gradle</code>(模块)文件中，你需要添加下面的实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="f0df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这之后添加<code class="fe nt nu nv nw b">kapt</code>和刀柄插件到<code class="fe nt nu nv nw b">build.gradle</code>文件的顶部。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="11aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将类路径添加到<code class="fe nt nu nv nw b">build.gradle</code>(项目)文件</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="b342" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并且不要忘记将下面一行添加到你的<code class="fe nt nu nv nw b">build.gradle</code>文件中。如果你正在使用Android Studio Canary，你需要将这一行添加到你的<code class="fe nt nu nv nw b">settings.gradle</code>文件中。然后单击“立即同步”按钮。</p><pre class="kg kh ki kj gt nz nw oa ob aw oc bi"><span id="8f29" class="na lt iq nw b gy od oe l of og">maven <strong class="nw ir">{ </strong>url 'https://jitpack.io' <strong class="nw ir">}</strong></span></pre><h2 id="8dd9" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">设置刀柄模块</strong></h2><p id="e1e4" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">为了连接<code class="fe nt nu nv nw b">WalletConnect</code>，我们需要一个文件和几个网络对象。为了创建这些对象，我们将使用依赖注入。下面的代码是我们的钱包连接模块。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="34e3" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">设置BirdgeServer </strong></h2><p id="601a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">要将我们的应用程序连接到Wallet，我们需要一个套接字服务器。下面是如何生成这个服务器的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="3946" class="na lt iq bd lu nb nc dn ly nd ne dp mc lf nf ng me lj nh ni mg ln nj nk mi nl bi translated"><strong class="ak">创建钱包连接实例</strong></h2><p id="9474" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">创建<code class="fe nt nu nv nw b">WalletConnectViewModel</code>并注入Moshi、OkHttpClient和WCSessionStore。我们需要几个项目<code class="fe nt nu nv nw b">BridgeServer</code>、<code class="fe nt nu nv nw b">Session.Callback</code>、会话、<code class="fe nt nu nv nw b">SessionConfig</code>。生成对象并编写所需函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="28ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！当用户点击任意按钮时，调用<code class="fe nt nu nv nw b">connectWallet</code>函数。如果连接成功，将调用<code class="fe nt nu nv nw b">sessionApproved</code>函数并更新用户界面。</p><h1 id="6a5b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">结论</strong></h1><p id="735d" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">在本文中，我们研究了如何从Android应用程序获取加密钱包地址。为此，我们使用了WalletConnect SDK。欲了解更多信息，请参见<a class="ae kv" href="https://github.com/WalletConnect/kotlin-walletconnect-lib/tree/master/sample/app" rel="noopener ugc nofollow" target="_blank">官方样品应用</a>和<a class="ae kv" href="https://github.com/Enes-Kayiklik/Wallet-Connect-Example" rel="noopener ugc nofollow" target="_blank">样品代码</a>。</p><p id="cb20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">有用的链接</strong></p><ul class=""><li id="534b" class="mk ml iq ky b kz la lc ld lf np lj nq ln nr lr mr ms mt mu bi translated"><a class="ae kv" href="https://docs.walletconnect.com/" rel="noopener ugc nofollow" target="_blank">钱包连接</a></li><li id="25d7" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://docs.walletconnect.com/2.0/quick-start/wallets/kotlin" rel="noopener ugc nofollow" target="_blank">钱包连接示例代码</a></li><li id="bcca" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://101blockchains.com/types-of-crypto-wallets/" rel="noopener ugc nofollow" target="_blank">钱包的种类</a></li><li id="e257" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://medium.com/stably-blog/what-is-a-crypto-wallet-7363d3118ce5" rel="noopener">什么是加密钱包</a></li><li id="3be7" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank">喷气背包撰写</a></li><li id="de64" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated"><a class="ae kv" href="https://halilozel1903.medium.com/jetpack-compose-nedir-b369fb79b957" rel="noopener">Halil zel制作的喷气背包是什么</a></li></ul></div></div>    
</body>
</html>