<html>
<head>
<title>Create Custom Word Clouds in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中创建自定义单词云</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-custom-word-clouds-in-python-841563933e73?source=collection_archive---------3-----------------------#2020-03-19">https://betterprogramming.pub/create-custom-word-clouds-in-python-841563933e73?source=collection_archive---------3-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4d7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一种创造性的方式来可视化您的数据并向每个人发送正确的信息</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/4550c70da274cb83771ff5e4667482d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsushK-1kjqsSxPWbbkvPA.png"/></div></div></figure><p id="1529" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过阅读本文，您将学会用Python创建自己的单词云。我们将使用一个叫做<code class="fe la lb lc ld b">wordcloud</code>的简单易用的模块。根据官方文档，该模块具有以下优点:</p><ul class=""><li id="305b" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated">填满所有可用空间</li><li id="462b" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">能够使用任意的遮罩</li><li id="5052" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">具有简单而有效的算法，可以容易地修改</li><li id="6beb" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">使用Python</li></ul><p id="a75e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇文章分为五个部分:</p><ol class=""><li id="09d7" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn ls lk ll lm bi translated">设置</li><li id="d72c" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated">基本用法</li><li id="4bde" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated">例子</li><li id="c891" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated">命令行</li><li id="1019" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated">结论</li></ol><p id="49d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们开始吧。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="61eb" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">1.设置</h1><p id="1786" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">您可以通过<code class="fe la lb lc ld b">pip install</code>轻松安装模块。强烈建议您在运行安装之前创建一个虚拟环境。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="4b95" class="nh mb it ld b gy ni nj l nk nl">pip install wordcloud</span></pre><p id="76f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于Anaconda用户，你可以直接从<code class="fe la lb lc ld b">conda-forge</code>安装。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="ea9d" class="nh mb it ld b gy ni nj l nk nl">conda install -c conda-forge wordcloud</span></pre><p id="52cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您还需要以下依赖项。请检查您是否安装了它们。</p><ul class=""><li id="dc90" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated">NumPy</li><li id="e7ec" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">枕头</li><li id="46b9" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated">Matplotlib</li></ul><p id="a0ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们进入下一部分，启动您的项目。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="a86e" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">2.基本用法</h1><p id="448c" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">首先，让我们导入必要的模块。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="65e7" class="nh mb it ld b gy ni nj l nk nl">from wordcloud import WordCloud, ImageColorGenerator<br/>import matplotlib.pyplot as plt<br/>from PIL import Image<br/>import numpy as np</span></pre><ul class=""><li id="5e7b" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">WordCloud</code> —生成单词云图像的基类</li><li id="3247" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">ImageColorGenerator </code> —对单词云图像中的单词重新着色的基类</li></ul><p id="6f30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们需要几个句子的文本作为单词cloud的输入。在本教程中，我将使用下面的文本作为示例输入，但是您可以随意使用您喜欢的任何文本。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="abb0" class="nh mb it ld b gy ni nj l nk nl">The Harry Potter series, written by J.K. Rowling, is perhaps the most popular set of novels of the modern era. With seven books and many blockbuster films to its name, the series has amassed about 15 billion dollars in sales. How did this phenomenon become what it is? For those scratching their heads, the reason can be broken down into several areas: Rowling garnered a generous initial contract for her book, separate book covers were created for both teens and adults, midnight releases/promotions/pre-orders made the public more fanatic about the series, and fan blogs were rampant. In fact, these are just a few of the main reasons why the Harry Potter took off the way it did.\n\nThe first book in the series, “Harry Potter and the Philosopher’s Stone,” was rejected 12 times before it was picked up by Bloomsbury—a small publisher in England. At the time, Rowling was living on benefits as a single mother, so receiving this contract was her first step to success. However, getting a book contract does not ensure the success of a book. The story was adored by children and adults alike, and this had much to do with the popularity of the initial book and the series as a whole (Rappaport, Sarah).\n\nIn light of this, her publisher made separate covers for young readers and adults. According to BusinessInsider.com, “Adults love reading the Harry Potter books, but few want to be seen toting around a child’s book. To make it easier for adults, Bloomsbury Publishing, the British publishing house that first bought the rights to Rowling’s books, published a second version of the books with “adult” (i.e., less colorful and more boring) book covers” (Aquino, Judith). This made it easier for a full range of ages to enjoy the series. This is not an easy feat for young adult fiction.\n\nAnother factor that worked like a charm was that when the Harry Potter series became an obvious success, the publisher, and Rowling herself through her own website for the books, conducted midnight releases, special promotions, and pre-ordering to engage readers even more. According to BusinessInsider.com, “Starting with the fourth book, Harry Potter and the Goblet of Fire, crowds of people wearing black robes, ties and round-frame glasses began showing up at bookstores for midnight release parties in 2000. Customers who feared their local bookstore would run out of copies responded by pre-ordering over 700,000 copies prior to the July 8, 2000 release date, according to Gunelius. The seventh and final book in the Harry Potter series became the fastest-selling book in history, reports The New York Times, with more than 11 million copies sold during the first 24 hours in three markets alone” (Aquino, Judith). The fandom around the books created more lucrative opportunities for the series.\n\nAlso, based on fans, blogs were created that were dedicated to the story, details, plot, characters, and much more about the series. In the beginning, Rowling did not have too much in the way of advertising, and the fans did a lot of work for her. According to HubSpot, “The fans took over and created many viral campaigns on her behalf talking about the excitement they had over upcoming releases. Harry Potter is often a trending topic on Twitter, Facebook events and page are abundant and thousands of bloggers create posts on their behalf. These promotions are more genuine because they come from the source, the fans, instead of the person who makes a profit” (Leist, Rachel). This organic advertising propelled the Harry Potter novel series into being the most successful one ever.\n\nNow that Rowling has sold millions of copies of her Harry Potter books and has seen each one adapted into films, merchandise, fan art, and more, we can safely say that this series is a global phenomenon. Through an initial contract, advertising for both teens and adults, special releases and parties, and organic advertising from fans via the internet, Harry Potter and his universe took over as the most successful bestselling book of all time. \n</span></pre><p id="0ca8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将其保存在文本文件中。在这种情况下，我将其命名为<code class="fe la lb lc ld b">example.txt</code>。编写下面的代码来读取文本并将其存储到一个变量中。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="dbbd" class="nh mb it ld b gy ni nj l nk nl">text = ""<br/>with open('example.txt', encoding='utf-8') as f:<br/>    text = ''.join(f.readlines())</span></pre><p id="ad42" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将创建并初始化一个<code class="fe la lb lc ld b">WordCloud</code>对象</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="1cbf" class="nh mb it ld b gy ni nj l nk nl">wc = WordCloud()</span></pre><p id="de64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它接受相当多的参数，但最常用的如下:</p><ul class=""><li id="8896" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">font_path</code> —将要使用的字体的字体路径(OTF或TTF)。默认为Linux机器上的<code class="fe la lb lc ld b">DroidSansMono</code>路径。如果你在另一个操作系统上或者没有这个字体，你需要调整这个路径。</li><li id="fc0a" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">width</code> —画布的宽度。默认值为<code class="fe la lb lc ld b">400</code>。</li><li id="e733" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">height</code> —画布的高度。默认值为<code class="fe la lb lc ld b">200</code>。</li><li id="a131" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">max_words</code> —允许的最大字数。默认为<code class="fe la lb lc ld b">200</code>。</li><li id="b740" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">background_color</code> —文字云图像的背景色。默认为<code class="fe la lb lc ld b">black</code>。</li><li id="5c06" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">mask</code> —输入要用作蒙版的图像</li></ul><p id="618a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦创建了一个<code class="fe la lb lc ld b">WordCloud</code>对象，就可以调用内置的<code class="fe la lb lc ld b">generate</code>函数来生成单词云。我们将传入文本变量作为函数的输入。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="8f0c" class="nh mb it ld b gy ni nj l nk nl">wc.generate(text)</span></pre><p id="58a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以选择将其保存在图像文件中。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="491f" class="nh mb it ld b gy ni nj l nk nl">wc.to_file('output.png')</span></pre><p id="d009" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">也可以通过Matplotlib中的函数在Jupyter Notebook中显示。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="6756" class="nh mb it ld b gy ni nj l nk nl">plt.imshow(wc, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="5d07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该会看到下图:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/4e31fba58de9f2cde4f7c3a669a17398.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*GRK15jG2HXfNhF_iWC_Mbw.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure><p id="e4be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们将<code class="fe la lb lc ld b">max_font_size</code>设置为不同的值。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="2fb0" class="nh mb it ld b gy ni nj l nk nl">wc = WordCloud(max_font_size=40).generate(text)</span><span id="f54a" class="nh mb it ld b gy nr nj l nk nl">plt.imshow(wc, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="7a90" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">结果如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/2f9c76feaa64dac059c34d27c3fafced.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*D32LUaBS9OEEZjCoCcOqoA.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure><p id="2d9d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注意:</strong>文本的排列不是固定的，每次运行时会略有不同。这就是你需要编写代码来创建自己的自定义单词云的全部内容。请继续下一部分，查看一些使用案例示例。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="5863" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">3.例子</h1><p id="4079" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">在这一部分，我们将深入探索可用的功能和其他用例。</p><h2 id="c817" class="nh mb it bd mc ns nt dn mg nu nv dp mk kb nw nx mo kf ny nz ms kj oa ob mw oc bi translated">掩蔽词云</h2><p id="fee2" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">您可以将带有白色背景的黑色矢量图像作为蒙版传递给<code class="fe la lb lc ld b">WordCloud</code>对象。它将用于屏蔽和限制黑色边界内的文本。我将使用下面的图片。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi od"><img src="../Images/3e9ae10aa890f30e6bbf03b5f7a9ac70.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*ttIhDGrv3YXoyz1NGjpnKA.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure><p id="0c6e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用Pillow模块打开图像并将其转换为NumPy数组。记得将背景颜色设置为白色，这样可以更好地可视化。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="d852" class="nh mb it ld b gy ni nj l nk nl">custom_mask = np.array(Image.open("krabby.png"))<br/>wc = WordCloud(background_color="white", mask=custom_mask)<br/>wc.generate(text)</span><span id="e752" class="nh mb it ld b gy nr nj l nk nl">plt.imshow(wc, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="c062" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下结果将输出到控制台。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/f97d9a9831755ac5dfc1798799653058.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*peik19RTzvOOXZ-itJd6UQ.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure><p id="0cb0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以添加轮廓作为单词云的笔画或边框。修改第二行以包含以下参数:</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="3bb3" class="nh mb it ld b gy ni nj l nk nl">wc = WordCloud(background_color="white", mask=custom_mask, contour_width=3, contour_color='steelblue')</span></pre><ul class=""><li id="1bc5" class="le lf it js b jt ju jx jy kb lg kf lh kj li kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">contour_width </code> —如果<code class="fe la lb lc ld b">mask</code>不是<code class="fe la lb lc ld b">None</code>且<code class="fe la lb lc ld b">contour_width</code> &gt;为0，则绘制掩膜轮廓</li><li id="55ae" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn lj lk ll lm bi translated"><code class="fe la lb lc ld b">contour_color</code> — <code class="fe la lb lc ld b">mask</code>轮廓颜色</li></ul><p id="ea39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">运行代码后，您应该会看到下面的输出。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/f38889608b95cc0ffdfc187c6021f355.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*ZBoflSHSnR6dOBP-chFyoA.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure><h2 id="ff05" class="nh mb it bd mc ns nt dn mg nu nv dp mk kb nw nx mo kf ny nz ms kj oa ob mw oc bi translated">图像彩色单词云</h2><p id="34b1" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">如果您想使用蒙版图像的颜色来突出显示文本，您可以通过重新着色功能来实现。让我们用下图来测试一下。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi of"><img src="../Images/dd90b6945b69c5aaeb1596792504dfd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*3T_c0ef8470aV5VGZ2GP9A.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">图片取自<a class="ae og" href="https://pokemondb.net/pokedex/krabby" rel="noopener ugc nofollow" target="_blank">链接</a></p></figure><p id="443e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以重用前面的代码，再添加两行代码。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="adde" class="nh mb it ld b gy ni nj l nk nl">custom_mask = np.array(Image.open("colored_krabby.png"))<br/>wc = WordCloud(background_color="white", mask=custom_mask)<br/>wc.generate(text)</span><span id="e9e7" class="nh mb it ld b gy nr nj l nk nl">image_colors = ImageColorGenerator(custom_mask)<br/>wc.recolor(color_func=image_colors)</span><span id="d177" class="nh mb it ld b gy nr nj l nk nl">plt.imshow(wc, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="8baa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最终结果如下。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/905528ca38511510102affcbf501e81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*xJyMYKwdLu3Jc8QekhUfWg.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure><h2 id="42da" class="nh mb it bd mc ns nt dn mg nu nv dp mk kb nw nx mo kf ny nz ms kj oa ob mw oc bi translated">基于频率的词云</h2><p id="638e" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">如果数据集是字典的形式，而不是一大块文本，建议调用<code class="fe la lb lc ld b">generate_from_frequencies</code>函数。</p><p id="8a37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，与最初的<code class="fe la lb lc ld b">generate</code>函数不同，停止词不会从最终结果中消除。因此，在将字典作为输入参数传递之前，您应该自己手动删除它们。</p><p id="7549" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最初的教程基于一个<code class="fe la lb lc ld b">multidict</code>模块，但是我将只使用现成的<code class="fe la lb lc ld b">Counter</code>模块来创建频率字典。</p><p id="9df3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">导入以下模块:</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="abce" class="nh mb it ld b gy ni nj l nk nl">import re<br/>from collections import Counter</span></pre><p id="b22a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们再次阅读文本，并将结果转换为一个<code class="fe la lb lc ld b">Counter</code>对象。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="3889" class="nh mb it ld b gy ni nj l nk nl">words = re.findall(r'\w+', open('example.txt', encoding='utf-8').read().lower())<br/>words_counter = Counter(words)</span></pre><p id="fa41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建一个<code class="fe la lb lc ld b">WordCloud</code>对象，并调用g <code class="fe la lb lc ld b">enerate_from_frequencies</code>函数。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="2ca7" class="nh mb it ld b gy ni nj l nk nl">wc = WordCloud(background_color="white", mask=custom_mask)<br/>wc.generate_from_frequencies(words_counter)</span><span id="8f18" class="nh mb it ld b gy nr nj l nk nl">plt.imshow(wc, interpolation="bilinear")<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="0e74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该会看到以下输出。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/fb79e661d3b4e31f4200618aafc8ee29.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*BLFh4_WRRAov3adS2hs3Gg.png"/></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="2864" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">4.命令行</h1><p id="7787" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">该模块还附带了命令行选项，您可以执行这些选项来创建自己的单词云。只需在命令行中调用<code class="fe la lb lc ld b">wordcloud_cli</code>。用法非常简单。以下示例从<code class="fe la lb lc ld b">example.txt</code>读取文本，并将结果输出到<code class="fe la lb lc ld b">output.png</code>。</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="c031" class="nh mb it ld b gy ni nj l nk nl">wordcloud_cli --text example.txt --imagefile output.png</span></pre><p id="6208" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过下面的代码查看完整的列表和解释:</p><pre class="kp kq kr ks gt nd ld ne nf aw ng bi"><span id="6e1d" class="nh mb it ld b gy ni nj l nk nl">wordcloud_cli --help </span></pre><p id="a0e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">控制台将显示以下输出:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oh"><img src="../Images/9f2857c0e3761a880601d8ddcf73ffd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_qQdbCwbL9oyeEWYOkAKYQ.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="f6a9" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">5.结论</h1><p id="177f" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">让我们回顾一下今天所学的内容。我们从通过<code class="fe la lb lc ld b">pip install</code>简单安装<code class="fe la lb lc ld b">wordcloud</code>模块开始。</p><p id="4270" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我们继续学习创建我们自己的单词云所需的基本代码。我们编写了读取文本文件的代码，创建了一个<code class="fe la lb lc ld b">WordCloud</code>对象，并使用Matplotlib显示结果。</p><p id="2083" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">之后，我们进一步探索了一些不同的用例及例子。这包括创建屏蔽词云、彩色图像词云以及基于频率的词云。</p><p id="3468" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们检查了该模块的附加特性，即命令行选项。这允许我们通过命令行运行单词云生成。</p><p id="9e84" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读，我希望你喜欢这篇文章。下篇再见！</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="06d8" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">参考</h1><ol class=""><li id="ed4b" class="le lf it js b jt my jx mz kb oi kf oj kj ok kn ls lk ll lm bi translated"><a class="ae og" href="https://amueller.github.io/word_cloud/" rel="noopener ugc nofollow" target="_blank"> WordCloud的文档</a></li><li id="81f2" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated"><a class="ae og" href="https://github.com/amueller/word_cloud" rel="noopener ugc nofollow" target="_blank"> WordCloud的GitHub </a></li><li id="9d67" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated"><a class="ae og" href="https://neptune.ai/blog/exploratory-data-analysis-natural-language-processing-tools" rel="noopener ugc nofollow" target="_blank"> Neptune AI —自然语言处理的探索性数据分析</a></li><li id="a1d7" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated"><a class="ae og" href="https://academichelp.net/samples/academics/essays/cause-effect/harry-potter-series-became-popular.html" rel="noopener ugc nofollow" target="_blank">示例文本</a></li><li id="e854" class="le lf it js b jt ln jx lo kb lp kf lq kj lr kn ls lk ll lm bi translated"><a class="ae og" href="http://www.onlinewebfonts.com" rel="noopener ugc nofollow" target="_blank">心形矢量遮罩</a></li></ol></div></div>    
</body>
</html>