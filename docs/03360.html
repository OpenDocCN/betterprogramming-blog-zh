<html>
<head>
<title>Why Most Code Sucks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么大多数代码都很糟糕</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-most-code-sucks-ebc73b1a8882?source=collection_archive---------2-----------------------#2020-02-05">https://betterprogramming.pub/why-most-code-sucks-ebc73b1a8882?source=collection_archive---------2-----------------------#2020-02-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f722" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你能做些什么来改善你的生活</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a2bc6866c4ef8597ad4c385b45f62cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U6LNQHWlsHidCAnQvg8b7w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.linkedin.com/in/albertinaveenstra/" rel="noopener ugc nofollow" target="_blank">阿尔贝蒂娜</a>拍摄</p></figure><p id="65c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">抱歉，我不是故意这么粗鲁的。听起来有点刺耳，不是吗？但事实是，这里面有一点事实。你可能已经查看了一些代码库，认为它们完全是一团糟。</p><p id="bb1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有一个开发者是完美的。他们所有人，无论你认为他们有多好，都犯过错误，或大或小。</p><p id="76f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">糟糕的命名，太大的函数，糟糕的架构决策，重复的代码。在相当长的一段时间内，我还可以继续增加这个列表，但是你可能已经看到了所有这些错误。</p><p id="bbfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要么是你自己做的，有人对你指指点点，要么是你有幸看到了来自其他开发者的拉请求。</p><p id="6827" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将讨论如何减少代码库中的混乱，让它变得更好。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a265" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">大多数代码糟糕的原因是</h1><p id="3ffa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">好的代码符合一定的标准。它首先应该是可读的。大多数代码糟糕的原因之一是难以阅读。</p><p id="2978" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码的可读性是如此重要的一个因素，因为您可能不是项目中唯一的开发人员。即使你是，一年后你还记得整个代码库吗？</p><p id="e69e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了提高代码的可读性，你可以做很多事情。其中之一是给你的变量、方法和类起一个有意义的名字。是的，<code class="fe mz na nb nc b">elapsedTime</code>是个像样的变量名，但是<code class="fe mz na nb nc b">elapsedTimeInSeconds</code>怎么样？那就更有意义了。</p><p id="06fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用容易发音的名字来表达他们的意图，避免错误的信息。知道如何给出有意义的名字可以使理解一段代码变得容易得多，因此也更容易维护。</p><p id="ccd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽量让你的函数简短，这样它们就能保持可读性。这也会让你的功能更容易理解。做三件不同事情的一百行函数不是你想要的。为了保持简短，您的函数应该做一件事。只有一件事。</p><p id="05bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保持代码可读性的另一个好方法是限制缩进的数量。当缩进过多时，代码会变得更加难以阅读。</p><p id="9fc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要使用各种嵌套的<code class="fe mz na nb nc b">if else</code> <em class="nd"> </em>结构，你可以使用保护子句。这将有助于您限制所需的缩进数量。</p><p id="ee21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，避免使用单线奇迹。可读性非常重要，你不应该牺牲可读性来获得更少的代码。</p><p id="d8b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，代码被阅读的次数要比被编写的次数多得多。罗伯特·c·马丁对可读性说了如下的话:</p><blockquote class="ne"><p id="f9bd" class="nf ng it bd nh ni nj nk nl nm nn lu dk translated">“我们不断地阅读旧代码，作为编写新代码的一部分。因此，让它易于阅读会让它更易于书写。”罗伯特·马丁</p><p id="a1a6" class="nf ng it bd nh ni nj nk nl nm nn lu dk translated">“你需要编写代码，尽量减少其他人理解代码所需的时间，即使那个人就是你。”——达斯汀·博斯韦尔和特雷弗·福彻</p></blockquote><p id="5603" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">代码可以是可读的，但仍然不容易理解。以古怪的单线奇观为例。有时代码可能读起来很好，但它仍然会误导人。</p><p id="55b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使它更容易理解，你可以添加注释。尽管写得好的代码可能不需要注释来解释你在做什么，你仍然可以选择添加注释来解释为什么。</p><p id="1e48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦您的项目进入维护阶段，解释原因的注释可能会非常有用。这就引出了大多数代码糟糕的下一个原因。它<em class="nd">不</em>可维护。</p><p id="b885" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了及时将项目交付生产，你可能已经竭尽全力了。为了在截止日期前完成，你可能做出了一些牺牲。虽然不可取，但可以理解。</p><p id="7424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为你所做牺牲的结果，你引入了一个新的重大问题。一个花费你很多时间的问题。一个已经改变的需求，通常只需要几行代码就可以修复，现在却要花上几个小时，因为你必须重写一部分代码。</p><p id="9c3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你牺牲了可维护性。</p><p id="8a47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于可维护性的有趣的事情是，它的不存在更容易被识别。粗略地说，可维护性与开发人员进行更改所花费的时间以及更改会破坏某些东西的风险成反比。</p><p id="4831" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码出错的原因之一是因为重复。由于某些(不好的)原因，重复代码有时会偷偷进入代码库。大多数情况下，这将与潜入代码库的新错误密切相关。</p><p id="a842" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一种危险是，一段代码发生了变化，而它的副本却被遗忘了。这导致了新的错误被引入。这种情况经常发生。如果你想让你的代码更好，你应该避免重复的代码。不惜一切代价。</p><p id="c345" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数情况下，通过将代码移动到其自己的函数或类中，可以修复重复的代码。然后从最初使用该函数或类的所有地方调用它。这是一个非常简单的修复方法，从长远来看可以节省你很多时间。</p><p id="dc91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数代码糟糕的最后一个原因是它不可测试。对此有一个很简单的解释。大多数程序员根本不喜欢测试。</p><p id="6e2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，太多的程序员缺乏编写适当测试的技能。或者根本不知道如何编写测试。这两件事结合在一起就不好了。</p><p id="4501" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看到他们是如何让对方活着的了吗？如果你不知道如何为你的代码编写测试，你可能也不知道如何编写可测试的代码。众所周知，不测试你的代码是幼稚的。</p><p id="cd12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如何让你的代码可测试呢？</p><p id="c029" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可测试代码是以可独立验证的方式编写的代码。可测试的代码接收依赖项作为输入参数，这样就可以在测试过程中注入假的依赖项。</p><p id="fc8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在一个方法中保持少量的代码路径是一个很好的实践，这样它们很容易测试。如果你计划编写单元测试，每一个代码路径都应该被触及。这意味着每个代码路径可能都有自己的单元测试。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="188f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="cbdb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">写得好的代码满足一定的标准:可读、可理解、可维护、可测试。如果代码不满足这些标准，那么它很可能是糟糕的。</p><p id="75e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有许多方法可以提高代码的质量。其中一个比其他的更容易实现。例如，使您的代码可测试比删除重复代码要多得多。</p><p id="7306" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要知道每个开发人员都会犯错误，改正错误永远不会太晚！</p><blockquote class="ne"><p id="3f3a" class="nf ng it bd nh ni nj nk nl nm nn lu dk translated">“编写代码的时候，要把最终维护你代码的人想象成一个知道你住哪儿的暴力精神病患者。”—约翰·伍兹</p></blockquote></div></div>    
</body>
</html>