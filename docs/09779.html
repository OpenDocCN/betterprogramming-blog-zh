<html>
<head>
<title>What Are Content Hugging and Compression Resistance in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的内容拥抱和抗压是什么</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-are-content-hugging-and-compression-resistance-in-swift-60275f6dc69e?source=collection_archive---------1-----------------------#2021-10-11">https://betterprogramming.pub/what-are-content-hugging-and-compression-resistance-in-swift-60275f6dc69e?source=collection_archive---------1-----------------------#2021-10-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a9d5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使您的自动布局更具适应性和效率</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e9909ced2d6f519c13a5c063def86305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M_q3_vbJP6DDlu_I"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mralidoost?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">穆罕默德·礼萨·阿里杜斯特</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a202" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将学习如何利用Auto Layout提供的内容拥抱和抗压缩属性，使我们的UI布局更具适应性。简而言之，在本教程结束时，您将会学到以下内容:</p><ul class=""><li id="d7ff" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">如何以编程方式创建自适应布局。</li><li id="3611" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何利用内容拥抱来帮助自动布局决定要扩展的视图。</li><li id="a396" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">抗压性如何使视图更容易缩小到超出其固有大小。</li></ul><p id="0106" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例项目的源代码可以在本文的底部找到。</p><h1 id="906e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">我们开始吧</h1><p id="2d1a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们从一个几乎为空的<code class="fe ng nh ni nj b">UITableViewController</code>子类开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="55bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ng nh ni nj b">TableViewCell</code>有两个标签相邻放置，使用以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ol class=""><li id="6bcb" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nm mb mc md bi translated">一旦设置了<code class="fe ng nh ni nj b">title</code>属性，我们就更新<code class="fe ng nh ni nj b">titleLabel</code>。</li><li id="1224" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nm mb mc md bi translated">类似地，当我们设置<code class="fe ng nh ni nj b">subtitle</code>属性时，<code class="fe ng nh ni nj b">subtitleLabel</code>显示一个新值。</li><li id="b594" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu nm mb mc md bi translated">在<code class="fe ng nh ni nj b">setupUI()</code>方法中，我们将<code class="fe ng nh ni nj b">titleLabel</code>放在左边，将<code class="fe ng nh ni nj b">subtitleLabel</code>放在右边。由于我们计划有一个自调整<code class="fe ng nh ni nj b">UITableViewCell</code>，我们在<code class="fe ng nh ni nj b">subtitleLabel</code>上设置了顶部和底部约束。注意，当我们定义<code class="fe ng nh ni nj b">titleLabel</code>时，我们将它的<code class="fe ng nh ni nj b">numberOfLines</code>属性设置为1。另一方面，<code class="fe ng nh ni nj b">subtitleLabel</code>将包含未知数量的行，所以我们将属性值赋为0。</li></ol><p id="0d9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在项目已经准备好了，我们可以开始探索内容拥抱和抗压如何帮助我们创建一个自适应的布局。</p><h1 id="8514" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">满足拥抱</h1><p id="480a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">解释这个属性如何工作的最好方法是定义我们要实现的布局，然后看看哪里出错了。我们的目标是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/ba4c8575f3e80be102d34a7ba1bab08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8qHBd3azV5WyqW2zteNvbA.png"/></div></div></figure><p id="673a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，<code class="fe ng nh ni nj b">titleLabel</code>填充了完全显示文本所需的最小空间，而<code class="fe ng nh ni nj b">subtitleLabel</code>扩展以填充剩余空间。</p><p id="79fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们设置<code class="fe ng nh ni nj b">title</code>和<code class="fe ng nh ni nj b">subtitle</code>属性，然后构建并运行应用程序，我们将看到它根据需要显示UI。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/b95758f37604b4fd0c086e983db64023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*5J3k-PJBxW0QJ7Y0n6c7Vg.png"/></div></figure><p id="ef68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，通过点击<code class="fe ng nh ni nj b">Debug View Hierarchy</code>，我们可以看到自动布局显示的一些奇怪问题，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/1bf56995e7f7188a96c7d5503a17e094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AGcMx1d5rm78oYazNzwmmw.png"/></div></div></figure><p id="77ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题是Auto Layout不清楚要拉伸什么标签，所以它试图自己解决这个问题。我们可以避免依赖不那么可预测的自动布局决策，并帮助它决定要延伸的<em class="nq">确切的</em>视图。这就是内容拥抱帮助我们的地方。</p><p id="2d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按如下方式设置<code class="fe ng nh ni nj b">titleLabel</code>的内容拥抱优先级:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="7a5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，<code class="fe ng nh ni nj b">titleLabel</code>和<code class="fe ng nh ni nj b">subtitleLabel</code>的内容拥抱优先级都是250。这就是为什么Auto Layout不知道影响哪个标签的原因。通过将<code class="fe ng nh ni nj b">titleLabel</code>的优先级设置为251，我们告诉自动布局拉伸<code class="fe ng nh ni nj b">subtitleLabel</code>并保持<code class="fe ng nh ni nj b">titleLabel</code>不变。</p><p id="4721" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以现在，如果我们运行应用程序并检查<code class="fe ng nh ni nj b">Debug View Hierarchy</code>，我们将不会看到任何警告，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/e063a0ce4c1717a878ac334042e12bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqq77JXITMwVM6yOvB33WA.png"/></div></div></figure><p id="583f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！现在让我们看看当<code class="fe ng nh ni nj b">subtitleLabel</code>的文本超过它所能容纳的时候会发生什么。下面的代码将突出这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9faa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们运行应用程序，我们会发现用户界面不再好看:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/9795fbfa5312066b7d1f1f0a4cb1c1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5zjJ9_GlxnG2gNnxVh74Aw.png"/></div></div></figure><p id="8f42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，<code class="fe ng nh ni nj b">Debug View Hierarchy</code>再次显示问题，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/1d53a3e18ff78a9dd48a429425a9b18a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kYpdbJ_G_qbrYpRwXBO0EQ.png"/></div></div></figure><p id="1940" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是抗压能力发挥作用的地方。</p><h1 id="b638" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">耐压力</h1><p id="f193" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们希望我们的<code class="fe ng nh ni nj b">titleLabel</code>完全显示，而<code class="fe ng nh ni nj b">subtitleLabel</code>占据剩余的空间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/37d389d65daccd2e83e427014547a3d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*U0Xk56cYPu61poyjUTEEGg.png"/></div></figure><p id="dfcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之前，我们在<code class="fe ng nh ni nj b">titleLabel</code>上设置了较低的内容拥抱，告诉自动布局应该拉伸<code class="fe ng nh ni nj b">subtitleLabel</code>。当副标题的内容比标签的尺寸小的时候，这是有效的。现在我们有一个不同的情况。我们的任务是告诉Auto Layout: " <em class="nq">缩小<code class="fe ng nh ni nj b">subtitleLabel</code>的</em>，这样我们就可以完全看到<code class="fe ng nh ni nj b">titleLabel</code>"下面是帮助我们做到这一点的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="111b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，<code class="fe ng nh ni nj b">titleLabel</code>和<code class="fe ng nh ni nj b">subtitleLabel</code>的抗压强度均为750。通过将<code class="fe ng nh ni nj b">titleLabel</code>的属性设置为751，我们告诉自动布局缩小<code class="fe ng nh ni nj b">subtitleLabel</code>。</p><p id="6e7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们构建并运行应用程序来看看结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/c521b7bcb39ead13f73ee97c2bdbe468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Spe16Hp9L9BzxupcZzB9A.png"/></div></div></figure><p id="6a1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了实现UI目标，我们也没有出现<code class="fe ng nh ni nj b">Debug View Hierarchy</code>中显示的问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/e062a63592ed1dd5e175e41d6601f864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HVtdI1_vCrI-gyJNC4sMmA.png"/></div></div></figure><h1 id="7786" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">总结</h1><p id="8afe" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">当内容尺寸<em class="nq">比视图尺寸</em>小时，无论哪个视图具有最低的内容拥抱集，都将<em class="nq">扩展</em>。类似地，当内容尺寸比视图尺寸大时，无论哪个视图具有最低的压缩阻力设置，都将收缩。</p><p id="4911" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用界面构建器中的属性来更容易地展示效果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/a227a6f088f5489e69c871c99916b15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/1*Hh-TyYtt_jxVEQyI7xBNtg.gif"/></div></figure><p id="f863" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，当<code class="fe ng nh ni nj b">titleLabel</code>和<code class="fe ng nh ni nj b">subtitleLabel</code>的水平内容拥抱都是251时，自动布局是混乱的，并且将约束高亮显示为红色。当我们将<code class="fe ng nh ni nj b">titleLabel</code>的优先级设置为250时，标题标签扩大了。类似的，当我们把它设置为252时，<code class="fe ng nh ni nj b">subtitleLabel</code>就展开了。</p><p id="c3a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们玩抗压，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/70b23720f2787584254aef1e1f18a882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/1*Fm-SNPhST2dANKSGPBUOLg.gif"/></div></figure><p id="09a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe ng nh ni nj b">titleLabel</code>和<code class="fe ng nh ni nj b">subtitleLabel</code>的值都是750时，自动布局不确定收缩哪个标签。通过将<code class="fe ng nh ni nj b">titleLabel</code>的优先级设置为749，<code class="fe ng nh ni nj b">titleLabel</code>被缩小了。然而，我们希望<code class="fe ng nh ni nj b">subtitleLabel</code>收缩，这就是为什么我们将<code class="fe ng nh ni nj b">titleLabel</code>的抗压强度设置为751，它可以根据需要工作。</p><p id="ce8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过设置内容拥抱和压缩阻力，我们可以在内容大小小于和大于视图大小时保护这两种情况。这有助于我们构建更具适应性的用户界面。</p><h1 id="75c5" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">资源</h1><p id="bffc" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我希望你觉得这个教程有用。感谢阅读！示例项目可在<a class="ae ky" href="https://github.com/zafarivaev/content-hugging-compression-resistance" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p></div></div>    
</body>
</html>