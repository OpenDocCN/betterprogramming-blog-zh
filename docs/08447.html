<html>
<head>
<title>Docker With Rails: Benefits and Top Use Cases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker With Rails:优势和主要用例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/docker-with-rails-benefits-and-top-use-cases-a0d1b9f7a1b4?source=collection_archive---------5-----------------------#2021-04-30">https://betterprogramming.pub/docker-with-rails-benefits-and-top-use-cases-a0d1b9f7a1b4?source=collection_archive---------5-----------------------#2021-04-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de9c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">立即开始使用Docker和Rails</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f60e664426f7f68a56dbda39b47b4332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7iSPlSkjBRunWocqSoiAQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><p id="b4f2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Docker和Rails都是web开发领域中众所周知的技术，它们都有独特而强大的优势。如果将这些工具结合到同一个应用程序中，它们的优势将会更加明显。Dockerizing一个Ruby on Rails应用程序支持交付和运行软件的新的、创新的方法。</p><p id="f652" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">唯一的缺点是它更难安装——所以这值得吗？</p><p id="774e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天，我们将探讨每种工具的优势以及它们如何协同工作，以帮助您决定它们是否适合您的下一个项目。</p><p id="683d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">下面是我们今天要讲的内容:</strong></p><ul class=""><li id="3961" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">Docker是什么？</li><li id="1123" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">什么是Rails？</li><li id="55af" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">为什么要将Docker与Rails一起使用？</li><li id="0bad" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">你应该知道的基本概念和术语</li><li id="491e" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">Docker和Rails入门</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/f0cb59346d50b83467e418a476a9d265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1UO0tCvE9AjhtrYd.png"/></div></div></figure></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="a834" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">Docker是什么？</h1><p id="dd7e" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">Docker是一组用于打包和运行沙盒环境的工具，称为“容器”。像虚拟机一样，这些容器是自包含的，并且与程序的其余部分相隔离。它们也更轻便。本质上，Docker允许您将一个应用程序及其所有依赖项打包到一个标准单元中。</p><p id="fb5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Docker的五个主要功能是:</p><ul class=""><li id="093c" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">打包</strong>:将软件打包成一种可重用、可共享的格式，称为镜像。</li><li id="22f4" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">分发</strong>:轻松与其他人共享打包软件(映像)并将其部署到不同机器上的能力。</li><li id="20fa" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">运行时</strong>:可靠地运行、暂停、重启或停止打包软件的能力。</li><li id="5c6c" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">基础设施创建</strong>:创建准备运行Docker容器的虚拟机。</li><li id="db07" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">编排和扩展</strong>:管理软件向单个Docker节点或整个集群的发布。</li></ul><p id="d374" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Docker容器的主要好处是能够以易于分发的形式打包程序运行所需的所有依赖项和资源。</p><p id="bd2c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每个容器都有自己的环境。这允许您在自己的机器上模拟多节点生产场景。这些Docker容器是轻量级的，在某些情况下比VM更高效。</p><p id="0c2e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Docker也很可靠，可以自我纠错。每当一个实例死亡，Docker会自动生成你的应用程序的新副本，以避免产量下降。</p><p id="03ff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">Docker的自我纠正特性在跨多个实例分配工作负载的扩展解决方案中最有用。</em></p><p id="e1a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Docker使用预打包的、易于加载的其他技术版本很好地与Rails接口，这些技术通常用于Rails，如Redis、MySQL、Postgres或Node。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/93eb58a1a774608f580aead506b0476a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yC5kINxLwzy8wy_t.png"/></div></div></figure></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="2651" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">什么是Rails？</h1><p id="bb6d" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">Ruby on Rails是一个服务器端的MVC模型应用程序框架，用于开发web应用程序的结构。Rails通过创新的省时功能优先考虑快速应用程序开发，比如无缝的表创建、表迁移和视图搭建。</p><p id="a9b3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Rails不同于其他框架，因为它是使用配置约定(CoC)范式设计的。Rails通过非常固执己见的语法实现了这一点，这意味着有一套构建Rails应用程序的“正确方法”。Rails的CoC结构有助于减少开发人员需要做出的决策数量，从而加速整个web应用程序的开发过程。</p><p id="17c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Rails的主要特点是:</p><ul class=""><li id="9807" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated"><strong class="kx ir">自动化测试</strong> : Rails提供了内置测试，所以测试用例更容易编写和执行。</li><li id="6830" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">搭建</strong>:这允许您轻松地创建管理数据的模型、支持用户数据交互的视图以及管理模型-视图通信的控制器。</li><li id="dd9b" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">活动记录</strong> : Rails的运行基于这样一个假设，即您应该确保数据访问逻辑作为对象的一部分，以教育用户如何读写数据库。对象携带持久数据和对该数据进行操作的行为。</li><li id="153f" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">Rails社区:Rails有一个非常活跃的社区，开发者会定期发布产品补丁和更新。</li><li id="c948" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir">约定优于配置</strong> : Rails为构建适合大多数用例的应用程序设定了一个正确的方法，这比为每件事都做配置选项更重要。该框架为您做出提高生产力的决策。</li></ul></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="fa59" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">为什么要将Docker与Rails一起使用？</h1><p id="667b" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">通过在Docker容器中运行Rails应用程序，可以结合Docker和Rails的优点。</p><p id="8653" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Rails中，您保留了CoC固执己见的环境和所有用于快速构建应用程序的创新工具。在Docker中，您可以使用Docker的沙盒容器来应用自校正缩放和分发的便利性。</p><p id="8d52" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当你用Docker打包Rails时，你会得到一个可移植的、确定的Rails开发环境，你可以随时随地构建它。</p><p id="2bdb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">看看我们如何无缝地将Rails和Docker结合起来。</p><p id="8ca2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们创建一个docker文件来定义我们的Ruby应用程序:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="0588" class="nq mp iq nm b gy nr ns l nt nu">FROM ruby:2.7 <br/>RUN apt-get update -yqq <br/>RUN apt-get install -yqq --no-install-recommends nodejs <br/>COPY myapp /usr/src/app/ <br/>WORKDIR /usr/src/app <br/>RUN bundle install</span></pre><p id="ec0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们使用终端从任何定制图像构建我们的容器，比如<code class="fe nv nw nx nm b">railsapp</code>。最后，我们有了一个完全沙盒化的rails应用程序实例，可以分发:</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="bb1a" class="nq mp iq nm b gy nr ns l nt nu">docker build -t railsapp .</span><span id="1f66" class="nq mp iq nm b gy ny ns l nt nu">$ docker run -p 3000:3000 railsapp \ <br/>bin/rails s -b 0.0.0.0</span></pre></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="6c33" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">带导轨的Docker的使用案例</h1><p id="5a4f" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">如果你对Rails很熟悉，享受它提供的速度，但也希望你的应用程序被大量用户使用，你应该使用Docker和Rails。Docker带来了巨大的可伸缩性优势，以及它的动态容器启动，这意味着您的应用程序可以实时增加或减少实例的数量。</p><p id="b177" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您甚至可以使用带有虚拟机的容器来提高使用微服务架构的应用程序的密度。例如，您可以在单个虚拟机的三个容器中运行三个服务，而不是在三个独立的虚拟机上运行三个服务。更少的虚拟机意味着维护基础架构的成本不会那么高。</p><p id="c57b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这对团队来说也是一个很好的工具组合。如果没有Docker，标准化每一个开发者的操作系统和每一个工具的版本将会是一项繁重的工作。使用Docker，您的应用程序环境就在容器中，自动确保每个开发人员都有一个标准化的环境。</p><p id="f3db" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，Docker是具有大量依赖项和其他必需技术的Rails应用程序的理想选择。在Rails上，连接到PostgreSQL或MS SQL等外部技术可能会很麻烦。Docker通过允许您在单个文件中设置依赖关系和连接，并打包成一个文件来加载，从而解决了这个问题。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="ac81" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">需要了解的基本概念和术语</h1><ul class=""><li id="5439" class="ls lt iq kx b ky ng lb nh le nz li oa lm ob lq lx ly lz ma bi translated"><strong class="kx ir"> Docker Image </strong>:一个包含蓝图的文件，用来构建一个在Docker中运行的容器。本质上，它是该类型的任何容器应该包含的内容的列表。</li><li id="6859" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> Docker容器</strong>:图像的运行时实例。每个容器由一个Docker映像、一个执行环境和一组标准指令组成。</li><li id="fe48" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> Dockerfile </strong>:一个包含所有命令的文件，用于构建一个您可以手动执行的映像。这允许Docker自动创建图像。</li><li id="ce5b" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> Docker Compose </strong>:一个内置的Docker工具，用来定义和运行更复杂的Docker应用。它的主要好处是能够在一个文件中定义多容器应用程序，可以用一个命令启动。</li><li id="8682" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> Dockerize/Dockerized </strong>:使用Docker打包应用程序的行为。它通常用于描述应用程序与Docker集成后的结果。</li><li id="21bf" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> Ruby脚本</strong>:Ruby编程语言中用于使应用组件动态化的命令。</li><li id="7337" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated"><strong class="kx ir"> Rails服务器</strong>:在<code class="fe nv nw nx nm b">http://localhost:3000</code>时，您的浏览器上可用的本地web服务器。用于测试没有专用服务器的应用程序。</li><li id="7ea5" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">Rails Gemfile 用于描述Ruby程序中文件依赖关系的文件。您可以将这些文件添加到容器中，以便轻松地将依赖项添加到您的应用程序中。</li></ul></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="dd71" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">Docker和Rails入门</h1><p id="84e6" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">现在，您对这些工具之间的关系有了更好的理解，是时候动手了。看到这些工具的好处的最好方法是在您自己的项目中一起使用它们。</p><p id="ffaa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来要探讨的一些主题是:</p><ul class=""><li id="4fed" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">映像构建缓存</li><li id="4dfc" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">使用Docker Compose装入卷</li><li id="9a66" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">向Rails应用程序添加Redis</li><li id="1080" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">使用Rail进行云部署</li></ul><p id="abff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">快乐学习！</em></p></div></div>    
</body>
</html>