<html>
<head>
<title>A Deep Dive Into SwiftUI Previews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入了解SwiftUI预览</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-deep-dive-into-swiftui-previews-66d53469ee43?source=collection_archive---------4-----------------------#2021-02-01">https://betterprogramming.pub/a-deep-dive-into-swiftui-previews-66d53469ee43?source=collection_archive---------4-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="da44" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用强大的预览功能，更快地开发您的SwiftUI视图</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/84928316b10100ab78b89a425bc314a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*73B3PFU4oVtxREmc"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@davidgrdm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">大卫·格兰穆金</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="beb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着SwiftUI的发布，苹果不仅为我们提供了一个新的漂亮和轻量级的API来创建用户界面，还引入了Xcode预览。</p><p id="44c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以将视图代码和它的可视化表示并排放在一起。两端都是同步的，任何一端的更改都会导致另一端的更新。</p><p id="7b9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显然，Xcode预览的最大好处是我们不必每次都重新构建我们的项目。在引入预览之前，我们必须一遍又一遍地启动模拟器，即使是最小的变化。</p><p id="da34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说，一个典型的场景如下:</p><ol class=""><li id="af95" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">我创建了一个带有<code class="fe mb mc md me b">UIStackView</code>的用户界面。</li><li id="31be" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我在模拟器上运行应用程序。</li><li id="cbfc" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我等了20秒直到应用程序启动。</li><li id="4d4e" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我浏览整个应用程序来访问包含我的<code class="fe mb mc md me b">UIStackView</code>的<code class="fe mb mc md me b">UIViewController</code>。</li><li id="cce9" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">看起来糟透了。我意识到我没有将分布设置为<code class="fe mb mc md me b">fillEqually</code>。</li><li id="c341" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我回到代码或界面构建器，并相应地设置属性。</li><li id="c700" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我再次在模拟器上运行应用程序。</li><li id="35f4" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我等了20秒直到应用程序启动。</li><li id="9886" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">我浏览整个应用程序，访问包含我的<code class="fe mb mc md me b">UIStackView</code>的<code class="fe mb mc md me b">UIViewController</code>。</li><li id="1bc1" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">现在一切正常。</li></ol><p id="6dfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到这是一个繁琐的过程，导致了大量的等待和浏览应用程序。</p><p id="ca3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用SwiftUI预览，您可以省略上面的大多数任务。您只需启动预览并进行更改，同时在代码编辑器旁边立即看到它们的影响。</p><p id="5302" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文将涵盖SwiftUI或Xcode预览，从基础开始，然后慢慢进入更高级的主题，如显示<code class="fe mb mc md me b">UIViewControllers</code>或本地化您的预览。</p><p id="aacf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将构建一个小项目，您稍后可以将其用作参考。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="66ed" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">为本文设置项目</h1><p id="b21d" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">在我们预览任何东西之前，我们需要一个项目。打开Xcode，在“欢迎使用Xcode”屏幕上，选择“创建新的Xcode项目”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/37dbc54e43c4eb1eff7e12e0c4113b37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vyp0vtwBwEkchBS3OyKwIg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="0f21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在接下来的屏幕上，选择平台iOS的默认应用模板。然后点击“下一步”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/3fa86f1442db9aac47a99faefbd15b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xMhJu32WSrnb9B4pK8OhOg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="87dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于标题，你可以随便选——我准备用<code class="fe mb mc md me b">BudgetPreview</code>。在您再次单击“下一步”之前，请确保您已经将界面设置为“SwiftUI”并将生命周期设置为“SwiftUI App”取消选择“使用核心数据”和“包括测试”这篇文章不需要它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/339c0db11ffa5b888aa469a0c3de4c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8sR8843cVRv-y3GGWN-GQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="25e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，单击“下一步”，并选择项目在文件系统中的存储位置。然后点击“创建”按钮。</p><p id="9b8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您以前没有，现在您已经成功地设置了您的第一个SwiftUI项目，名为<code class="fe mb mc md me b">ContentView</code>的SwiftUI视图应该是打开的。</p><p id="239d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们深入了解一下预览功能。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="78b3" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">一般如何使用SwiftUI预览</h1><p id="0922" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">如果文件<code class="fe mb mc md me b">ContentView.swift</code>是打开的，你应该会看到下面的屏幕。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/837220ec3c22d1e0bedae3a39cfe85e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQuZ7QPiEJA0TKAsueAf-Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="c72d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">左边是您从UIKit项目中了解到的代码编辑器。右边是本文有趣的部分:预览部分。</p><p id="fb4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您没有看到右边的画布，或者您只是需要更多的空间在代码中工作，您可以使用这个简洁的快捷方式来显示和隐藏预览。</p><pre class="kg kh ki kj gt ns me nt nu aw nv bi"><span id="f8bf" class="nw ms iq me b gy nx ny l nz oa">Option + Command + return (⌥ + ⌘ + ↩)</span></pre><p id="d4c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，您可能不会在右侧看到预览。那是因为你需要启动/恢复预览功能。如果您编写了导致预览崩溃的完全无效的代码，这也是必需的。</p><p id="e983" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以按下“暂停自动预览更新”旁边的“继续”按钮来继续</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/1b35706f1ccbf5cc2c8380f914a15cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IRlHouU37MfvGOww6bbH3w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="60b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，因为这种情况每小时都会发生几次，我强烈建议你学习这方面的捷径。</p><p id="a102" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要恢复预览，只需使用:</p><pre class="kg kh ki kj gt ns me nt nu aw nv bi"><span id="d9cd" class="nw ms iq me b gy nx ny l nz oa">Option + Command + P (⌥ + ⌘ + P)</span></pre><div class="oc od gp gr oe of"><a href="https://medium.com/better-programming/xcode-8-swiftui-keyboard-shortcuts-that-will-make-you-even-faster-bc3967b75224" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">Xcode: 8 SwiftUI键盘快捷键，让你更快</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">掌握Xcode并更快地构建应用程序</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot kp of"/></div></div></a></div><p id="4cae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的预览看起来应该和这个差不多:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/729b8f58d908a5095705e53e367adb16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MZU1nKQxkP7QOJ-gYBzBXw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="5080" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们真正开始预览我们构建的真实视图之前，我还想向您展示一个特性。您可以开始实时预览。这将需要多一点时间来建立，可悲的是没有捷径。相反，您必须在预览中单击运行图标。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/18dde41da4879e994e4321785a603db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zekEnTrx51dpDNJYqg4-MQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="1b1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与常规预览相比，实时预览有一个好处。您还可以与UI进行交互，例如，单击一个按钮，您的点击处理代码将被触发。如果你想知道你的按钮点击处理是否有效，这是一件很酷的事情。</p><p id="71a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在99%的情况下，你要么使用常规预览来查看你的用户界面，要么在模拟器中运行应用程序来测试按钮点击。尽管如此，知道这一点还是很好的。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="d2c1" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">用数据填充SwiftUI预览</h1><p id="f046" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">现在，右边是活动的预览，左边是我们的代码，让我们做一些更改，看看预览是如何工作的。</p><p id="3834" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对您的<code class="fe mb mc md me b">ContentView</code>类进行如下修改。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="47de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们添加了一个可以从外部传递到视图中的绑定。我们在<code class="fe mb mc md me b">Text</code>视图中显示绑定的值，并使用格式说明符将其显示为美元值。</p><p id="f6ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了用数据填充预览，我们必须在符合<code class="fe mb mc md me b">PreviewProvider</code>协议的结构<code class="fe mb mc md me b">ContentView_Previews</code>中提供绑定。</p><p id="51d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在computed property <code class="fe mb mc md me b">previews</code>中，我们提供了所有想要显示的预览。</p><p id="6c71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于本教程的考虑，我们简单地传递了一个常量值作为绑定，这在使用预览时很常见。</p><p id="7fa6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这些更改之后，您会注意到预览无法恢复。原因是我们已经在文件中正确地设置了一切，但是在项目的其他地方有一个编译错误。</p><p id="27e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，一定要将新参数<code class="fe mb mc md me b">moneyLeft</code>添加到<code class="fe mb mc md me b">BudgetPreviewApp.swift</code>文件中。您可以简单地复制并粘贴我们用于预览的<code class="fe mb mc md me b">ContentView</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="efce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，导航回你的<code class="fe mb mc md me b">ContentView</code>并继续预览。现在，您应该在屏幕中间看到一个格式良好的美元值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/c0dd10e1e5f89979466a4e35127fd124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NaZEGOVJfEZ-jDa9L8BqBg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="b1be" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">如何并排显示多个SwiftUI预览</h1><p id="ec91" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">虽然在一个屏幕尺寸上预览视图有助于开发，但它也欺骗了我们，让我们认为我们的视图无论如何看起来都很棒。用户可以通过动态字体大小使用另一种设备或非常大的字体，这会破坏我们的布局。</p><p id="fbd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要担心，SwiftUI预览功能已经覆盖了您。您可以同时在画布中显示多个预览。这可以通过<code class="fe mb mc md me b">ContentView_Previews</code>结构的计算属性<code class="fe mb mc md me b">previews</code>来实现。然而，仅仅在这里添加另一个预览是不够的。</p><p id="6998" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个SwiftUI视图需要有一个根元素。属性也有一个不透明的返回类型<code class="fe mb mc md me b">View</code>。这就是为什么我们需要返回一个包含多个预览的视图。为此，我们可以使用<code class="fe mb mc md me b">Group</code>视图。</p><p id="4027" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的<code class="fe mb mc md me b">ContentView_Previews</code>结构现在应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="e199" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您的预览应该包含两个显示相同视图的设备。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/9edf149cd06248daab69a8ca953d69ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFm3X8kxoTB9xNddmqj5Rw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="e948" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">不同设备或框架上的SwiftUI预览</h1><p id="ef99" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">如果我们使用不同的输入参数(例如，非常短和非常长的文本)来提供预览，那么在相同的设备类型上查看我们的视图两次是有帮助的。</p><p id="a289" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是我们甚至可以在不同的设备上预览我们的视图。让我们通过添加修改器<code class="fe mb mc md me b">previewDevice</code>将第二个预览变成iPad Pro。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="5c15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将导致以下表示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/d107844325389652a2a249e5a72531cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPB7nSbts2VMzHkOTPBgqA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="831c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过在画布本身进行更改来获得相同的结果。只需在右侧的属性检查器中选择您想要更改的预览，然后更改设备。这将生成与我们编写的代码相同的代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/c8b9683770314b66cd3aa4706a162c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6TqMkIWtxQ2W7i9PqSqxyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="b376" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>你可以通过代码或者直接在属性检查器中完成我在本教程中描述的大部分事情。在这两种情况下，它会同时改变预览和代码。然而，我更喜欢通过代码进行更改，并将在本文中始终坚持这一点。</p><p id="2194" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然在不同的设备上显示视图对于全屏视图来说是一个很好的特性，但是我不喜欢子视图只占据部分屏幕。在这些情况下，我通常将预览设置为特定的帧尺寸。</p><p id="3643" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，用<code class="fe mb mc md me b">previewLayout</code>和<code class="fe mb mc md me b">sizeThatFits</code>值替换<code class="fe mb mc md me b">previewDevice</code>修改器。这将使视图只占用它需要的空间。之后，您可以提供特定的帧大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="2a71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个预览的大小始终为100x100，而第二个预览使用的空间正好适合其内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/d3afe977a549e8be27c32e532edfb059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZ3u8Fpm11vPlPi-IN3h2Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="e46e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这也让我们能够更好地了解不同的预览。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="34cb" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">为您的SwiftUI预览提供动态字体大小</h1><p id="5d6a" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">在iOS中，用户可以更改内容的大小。这是一个有用的功能，特别是对于我们的长辈，他们不再有最好的眼睛。</p><p id="ac95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为开发者，我们经常忘记我们的应用程序的可访问性。通过SwiftUI预览，您可以轻松地看到调整文本大小时视图的行为。</p><p id="f9b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们将动态大小类型设置为<code class="fe mb mc md me b">extraExtraExtraLarge</code>。这可以通过<code class="fe mb mc md me b">environment</code>修改器和<code class="fe mb mc md me b">sizeCategory</code>关键路径来实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="5b70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以立即看到，使用这种动态类型，第一个预览看起来不再很好。我们稍后会解决这个问题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/ffcadd5aa57c4c2cf04820605fce3ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gt0woDcb21tnmB6EzaigwQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="37ec" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">如何用黑暗模式预览你的视图</h1><p id="8022" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">在iOS 13引入深色模式后，现在大多数应用程序都有望支持浅色和深色两种配色方案。</p><p id="caf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是为什么你应该总是确保在两种设置下测试你的视图。Xcode预览版允许您通过简单地添加修饰符<code class="fe mb mc md me b">preferredColorScheme</code>来实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="a19b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将导致第二个预览显示其黑暗模式的表现。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/315590b5243dd9be8abc14384c2cf735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDMKQpELEauhWb9THpwa7g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="08a7" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">使用不同的语言环境进行预览</h1><p id="a8a2" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">现在你应该知道如何设置预览的基本知识。这就是为什么我们可以更深入地探讨更高级的主题。</p><p id="851e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想给全世界的用户提供最好的用户体验，本地化是非常重要的。</p><p id="a6ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了本地化我们的UI，我们需要采取三个步骤。</p><ol class=""><li id="9562" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">将带有本地化字符串(<code class="fe mb mc md me b">Localizable.strings</code>)的文件添加到项目中。</li><li id="ac3f" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">本地化文件本身。</li><li id="b3dc" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">在我们的Xcode项目中设置本地化。</li></ol><p id="17e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，使用以下快捷方式在项目中创建一个新文件:</p><pre class="kg kh ki kj gt ns me nt nu aw nv bi"><span id="ec05" class="nw ms iq me b gy nx ny l nz oa">Command + N (⌘ + N)</span></pre><p id="8693" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用模板“字符串文件”，并将其命名为<code class="fe mb mc md me b">Localizable.strings</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/5f81717e93bbfef367141e83df5f1f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8oGk1Vg3q0zCoSZ6mC6xQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="45d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在只需插入下面的键-值对，但不要忘记分号。</p><pre class="kg kh ki kj gt ns me nt nu aw nv bi"><span id="5f8c" class="nw ms iq me b gy nx ny l nz oa">"Remaining" = "Remaining";</span></pre><p id="9ff0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后选择文件，在文件检查器中，点击“本地化…”按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/0312898d5aa9006cf5cb88c3aa61e7b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*hUEV2Qev30WzaZFY-RmK_w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="62f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将创建一个只有一种语言(英语)的本地化版本的文件。结果应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/c8a2a242ce63ff9b14d8c7e77acb83cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*EOh4MXQzOhz9jiv6lTY_Ng.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="352c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们需要将本地化添加到我们的项目中。在项目导航器中，点击项目，然后在弹出的视图中再次选择项目。“信息”选项卡中有一个名为“本地化”的部分</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/c31528adced121bd066b82bd360cc24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ooVr6WRskMBnl3vBwu-cEw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="e7d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击加号按钮添加一种语言(我使用的是德语，但也可以随意选择其他语言)。</p><p id="0915" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Xcode会询问您想要本地化哪些文件。选择<code class="fe mb mc md me b">Localizable.strings</code>，点击“完成”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/9dfdb5c2647e24aeba8fe347feef846d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCcZhsV4hD0NNjUVdeTyEQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="aa18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一切正常，您应该会在文件旁边看到一个小三角形。当你点击它时，它会展开，你会看到文件的两种语言版本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/abb3189d831390ef707deadccc8d178c.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*pjUtadQSn_chGSms_AhI1A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="c518" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，点击德语版。并用单词<code class="fe mb mc md me b">Noch verfügbar</code>替换键值对的值。</p><pre class="kg kh ki kj gt ns me nt nu aw nv bi"><span id="471d" class="nw ms iq me b gy nx ny l nz oa">"Remaining" = "Noch verfügbar";</span></pre><p id="fb1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了一个本地化的文本，让我们在视图中使用它。导航回<code class="fe mb mc md me b">ContentView.swift</code>，并将我们的<code class="fe mb mc md me b">Text</code>视图包装在<code class="fe mb mc md me b">VStack</code>中。在它上面添加另一个<code class="fe mb mc md me b">Text</code>视图。</p><p id="de2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个新的<code class="fe mb mc md me b">Text</code>视图应该使用新创建的本地化标识符。幸运的是，<code class="fe mb mc md me b">Text</code>有另一个初始化器，可以处理本地化的字符串键。您的<code class="fe mb mc md me b">ContentView</code>现在应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="81c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的预览不会因为单独这样做而改变语言。让我们再次使用<code class="fe mb mc md me b">environment</code>修饰符在第二个预览中注入区域设置。此外，让我们增加第一个视图的框架大小，以便它能够适应内容。</p><p id="0315" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的预览代码应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="9fec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">画布中的结果将包含两种不同语言的预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/0b2eb6c10703d46af00b3638c11a5d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gdv1VLnFt94Uq6OIyvGlyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="eab2" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">使用SwiftUI预览预览UIViews和UIViewControllers</h1><p id="c6bf" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">虽然SwiftUI已经有了很大的发展，并且已经支持了许多我们从UIKit中了解到的特性。它仍然没有赶上我们以前能够做的所有事情。</p><p id="5869" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有时也有遗留代码或框架没有转换成SwiftUI。</p><p id="30ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这些情况下，我们可以轻松地在SwiftUI和UIKit视图之间切换，这很好。我们可以从SwiftUI打开<code class="fe mb mc md me b">UIViewControllers</code>，从<code class="fe mb mc md me b">UIViewControllers</code>打开SwiftUI视图。</p><p id="69da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还没完呢！我们甚至可以为我们的UIKit视图和视图控制器使用预览功能。</p><p id="2e61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了看到实际效果，在项目中添加一个<code class="fe mb mc md me b">UIViewController</code>。再次使用快捷方式创建新文件。</p><pre class="kg kh ki kj gt ns me nt nu aw nv bi"><span id="fc14" class="nw ms iq me b gy nx ny l nz oa">Command + N (⌘ + N)</span></pre><p id="1f72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一次，选择“Cocoa Touch Class”模板。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/91b9222a49a864b8425904603d57a7d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ImUUFQAo9poAjZL9eoWRzg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="0169" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下面的对话框中，输入名称<code class="fe mb mc md me b">PreviewViewController</code>，并确保将子类设置为<code class="fe mb mc md me b">UIViewController</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/a8f949121732a615cfafd80ab64eb137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MEBTEVq9ypWWru06Rg5TGg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="3982" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用以下代码替换样板代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="fbf9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在屏幕中间添加一个标签。</p><p id="1f93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在创建另一个文件，但是这次使用“Swift File”模板，并将其命名为<code class="fe mb mc md me b">PreviewView</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/4c85ba67dadb220bb6b0061478c58435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0VeA0WgyYOVlydHJq-0cg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="5e7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个文件中，确保导入SwiftUI。创建一个struct，<code class="fe mb mc md me b">PreviewView</code>，它符合协议<code class="fe mb mc md me b">UIViewControllerRepresentable</code>(对于<code class="fe mb mc md me b">UIViews</code>你需要符合<code class="fe mb mc md me b">UIViewRepresentable</code>)，这是Apple添加的，用来在<code class="fe mb mc md me b">UIViewControllers</code>和SwiftUI视图之间建立一座桥梁。</p><p id="7458" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还需要实现该协议的两个方法来创建和更新视图控制器。</p><p id="b4e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，您需要添加一个<code class="fe mb mc md me b">PreviewProvider</code>来使您的预览工作。</p><p id="0c25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="f9a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mb mc md me b">makeUIViewController(:)</code>方法将创建我们需要的<code class="fe mb mc md me b">PreviewViewController</code>。update方法故意留空，因为我们不需要任何更新逻辑。</p><p id="3fd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您继续预览，画布应该包含一个显示视图控制器的设备，标签在中间。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/ab3715e911eb95a1860d294cbeacd884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XHGgg-LfyAUYZYjGlGbLdw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者创作的照片</p></figure><p id="48b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>只有当你的应用支持旧的操作系统(iOS 12及以下)时，才需要这两个<code class="fe mb mc md me b">@available(iOS 13, *)</code>属性。如果您从事SwiftUI项目，那么这是不太可能的，您可以忽略它们。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="6fc8" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">从这里去哪里</h1><p id="628c" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">SwiftUI正在快速发展，你必须跟上这种为苹果生态系统编写用户界面的新方式的发展。</p><p id="5a4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想在预览方面走得更远，并基于您新获得的知识，我可以热情地向您推荐两篇文章。</p><p id="235f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大约一年前，Antoine van der Lee写了一篇关于SwiftUI预览的文章。我特别喜欢他关于编写一个通用预览视图的想法，您可以围绕自己的预览。这样，你就不必一遍又一遍地创建黑暗模式版本或不同的相关尺寸类型。</p><p id="2433" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">John Sundell一直对Swift和iOS开发有很好的想法。他甚至用Swift创建了一个静态网站生成器来构建自己的网站。<a class="ae kv" href="https://www.swiftbysundell.com/articles/getting-the-most-out-of-xcode-previews/" rel="noopener ugc nofollow" target="_blank">在他关于Xcode预览的文章</a>中，他展示了许多你可以在自己的项目中使用的优秀扩展。</p><p id="1d9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">精通预览是值得的，因为它将提高我们构建优秀用户界面的速度。因此，我希望这篇文章为您提供了关于这个主题的坚实基础。</p><p id="eb52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我祝你好运，并祝你在SwiftUI、Xcode预览和总体编程方面获得更多乐趣。</p><p id="da27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢谢你的时间。</p></div></div>    
</body>
</html>