<html>
<head>
<title>Simple Login Flow in Flutter, then Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中的简单登录流程，然后是Firebase</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-firebase-login-flow-in-flutter-6f44c2b5c58a?source=collection_archive---------0-----------------------#2019-05-31">https://betterprogramming.pub/simple-firebase-login-flow-in-flutter-6f44c2b5c58a?source=collection_archive---------0-----------------------#2019-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="63b0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第一部分:实现不带Firebase的登录流，为不使用Firebase的人构建一个基线应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3324d2fc3e74900f3a5b71ee791fb3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iLQxiASselw3lHnBrym4SA.png"/></div></div></figure><p id="b24f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们将使用以下组件创建一个简单的应用程序:</p><ul class=""><li id="36f0" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">默认主应用入口点</li><li id="e539" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">使用<a class="ae me" href="https://api.flutter.dev/flutter/widgets/FutureBuilder-class.html" rel="noopener ugc nofollow" target="_blank"> FutureBuilder小部件</a>在呈现UI之前等待数据，这个概念在整个应用程序中使用</li><li id="f69a" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">登录页面</li><li id="1767" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">主页</li><li id="6194" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">认证服务</li><li id="ad59" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">演示在Flutter文档<a class="ae me" href="https://flutter.dev/docs/development/data-and-backend/state-mgmt/simple#accessing-the-state" rel="noopener ugc nofollow" target="_blank">简单应用状态管理</a>中讨论的提供者的使用</li></ul><p id="736a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">网上有很多关于为Flutter设置Firebase的例子，所以我将直接跳到代码中，而不是从基础开始。</p><blockquote class="mf mg mh"><p id="c32e" class="ku kv mi kw b kx ky ju kz la lb jx lc mj le lf lg mk li lj lk ml lm ln lo lp im bi translated">参见<a class="ae me" href="https://codelabs.developers.google.com/codelabs/flutter-firebase/index.html?index=..%2F..index#5" rel="noopener ugc nofollow" target="_blank">Google CodeLabs Flutter for Firebase</a>获取在iOS或Android上设置项目的分步说明</p></blockquote></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="15de" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">在Firebase中创建一个测试用户</h1><p id="d6ad" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">因为我们只是构建应用程序，现在还没有创建用户的功能，所以登录到Firebase控制台，向您的项目添加一个用户。在Firebase控制台中更新项目时，一定要启用电子邮件身份验证。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="d2d5" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">清理默认的颤振项目</h1><p id="1609" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">首先，让我们创建项目:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="71f5" class="nv mu it nr b gy nw nx l ny nz">flutter create simple_firebase_auth</span></pre><p id="1538" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在让我们做一些项目清理，打开项目并从文件<code class="fe oa ob oc nr b">main.dart</code>中删除现有的<code class="fe oa ob oc nr b">HomePage</code>和<code class="fe oa ob oc nr b">HomePageState</code>小部件。</p><p id="b291" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更改<code class="fe oa ob oc nr b">MaterialApp</code>小部件的<code class="fe oa ob oc nr b">home</code>属性，指向我们将在下一节创建的<code class="fe oa ob oc nr b">LoginPage</code>小部件。</p><p id="0e6d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完成后，该文件应类似于以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="c486" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">创建登录页面小部件</h1><p id="3cac" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">让我们浏览一下应用程序的<code class="fe oa ob oc nr b">LoginPage</code>的创建过程。我们需要捕获一个<code class="fe oa ob oc nr b">email</code>和一个<code class="fe oa ob oc nr b">password</code>来传递给<code class="fe oa ob oc nr b">AuthService</code>以调用登录函数。</p><p id="aa1a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将创建一个简单的页面，其中包含所需的<code class="fe oa ob oc nr b">TextFormField</code>小部件和一个<code class="fe oa ob oc nr b">RaisedButton</code>小部件，单击后用户可以登录。</p><ol class=""><li id="d5d6" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp of lw lx ly bi translated">打开编辑器，在<code class="fe oa ob oc nr b">lib</code>目录下创建一个名为<code class="fe oa ob oc nr b">login_page.dart</code>的新文件</li><li id="4d69" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp of lw lx ly bi translated">将以下内容粘贴到文件<code class="fe oa ob oc nr b">login_page.dart</code></li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="658c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您应该能够运行代码来查看屏幕现在的样子。当我们在UI中工作时，请确保将<code class="fe oa ob oc nr b">main.dart</code>小部件中的默认路线或<code class="fe oa ob oc nr b">home</code>属性更改为<code class="fe oa ob oc nr b">LoginPage</code>，这样您就可以看到实时更新的更改。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="8c86" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">样式和添加文本字段</h1><p id="056e" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">让我们将页面主体设为居中的<code class="fe oa ob oc nr b">Column</code>，列的子列主要是<code class="fe oa ob oc nr b">TextFormField</code>和<code class="fe oa ob oc nr b">RaisedButton</code>。</p><p id="4bab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">放置表单域和按钮的居中容器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="b803" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，添加实际的表单域小部件和按钮作为<code class="fe oa ob oc nr b">Column</code>小部件的子部件。我们将对表单字段进行一些基本的样式设计，使其看起来更像样。有关<a class="ae me" href="https://api.flutter.dev/flutter/material/TextFormField-class.html" rel="noopener ugc nofollow" target="_blank">文本表单域</a>的更多信息，请参见Flutter文档。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="effd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们在列中的字段之间增加一些间距，这样更好看。我们将使用<code class="fe oa ob oc nr b">SizedBox</code>小部件并设置<code class="fe oa ob oc nr b">height</code>属性以在应用程序中获得一些间距。替换<code class="fe oa ob oc nr b">Column</code>小部件的<code class="fe oa ob oc nr b">children</code>属性以获得所需的间距。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="0ebf" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">从表单域获取文本值</h1><p id="22e9" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">我们将使用一个<code class="fe oa ob oc nr b">Form</code>小部件和一个<code class="fe oa ob oc nr b">GlobalKey</code>，关于这些概念的更多信息可以在flutter cookbook章节<a class="ae me" href="https://flutter.dev/docs/cookbook/forms/validation" rel="noopener ugc nofollow" target="_blank">构建一个带验证的表单</a>中找到。</p><p id="c68d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe oa ob oc nr b">LoginPage</code>小部件中添加formKey:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9d66" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后添加两个新字段来保存我们需要发送到Firebase进行身份验证的电子邮件地址和密码值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="94ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，将属性<code class="fe oa ob oc nr b">onSaved</code>添加到我们拥有的用于电子邮件和密码的<code class="fe oa ob oc nr b">TextFormFields</code>中。当在表单上调用<code class="fe oa ob oc nr b">save</code>方法时，保存方法上的所有小部件都将被调用来更新局部变量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="2a3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用一个新的<code class="fe oa ob oc nr b">Form</code>小部件包装<code class="fe oa ob oc nr b">Column</code>小部件，代码应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="3fcf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然已经设置了字段并且更新了<code class="fe oa ob oc nr b">TextFormField</code>，我们不仅可以使用<code class="fe oa ob oc nr b">_formKey</code>来验证提供的字段，还可以通过调用<code class="fe oa ob oc nr b">save</code>方法在本地检索值。</p><p id="bba5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将<code class="fe oa ob oc nr b">RaisedButton</code> <code class="fe oa ob oc nr b">onPressed</code>方法中的代码替换为以下代码，您将看到我们正在获取在out小部件中设置的电子邮件和密码的值。我们现在可以将这些值传递给包装了Firebase登录功能的<code class="fe oa ob oc nr b">AuthService</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="ebe9" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">创建主页小部件</h1><p id="c466" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">现在，我们将保持主页简单，因为我们的目标是演示流程是如何工作的。忽略注释掉的<code class="fe oa ob oc nr b">LogoutButton</code>小部件，我们将在本教程的后面部分讨论。</p><ol class=""><li id="c71e" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp of lw lx ly bi translated">打开编辑器，在<code class="fe oa ob oc nr b">lib</code>目录下创建一个名为<code class="fe oa ob oc nr b">home_page.dart</code>的新文件</li><li id="7cea" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp of lw lx ly bi translated">将以下内容粘贴到文件<code class="fe oa ob oc nr b">home_page.dart</code></li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="81b3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.打开<code class="fe oa ob oc nr b">main.dart</code>并添加以下导入语句</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="6857" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">4.要验证页面是否正常工作，请更改下面的<code class="fe oa ob oc nr b">home</code>属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="e6d2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对此:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="e50a" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">为认证服务创建模板</h1><p id="b096" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">在这里，我们将构建独立于Firebase的身份验证服务，验证一切正常，然后集成Firebase。</p><p id="97bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个服务中，我们使用了一个名为<code class="fe oa ob oc nr b">ChangeNotifier</code>的mixin和一个方法<code class="fe oa ob oc nr b">notifyListeners</code>，它允许使用这个服务的小部件在方法被调用时被更新。当我们更新<code class="fe oa ob oc nr b">currentUser</code>属性时，我们调用<code class="fe oa ob oc nr b">notifyListeners</code>,因为这意味着用户已经登录或注销，我们希望应用程序根据用户的状态进行更新。</p><blockquote class="mf mg mh"><p id="a532" class="ku kv mi kw b kx ky ju kz la lb jx lc mj le lf lg mk li lj lk ml lm ln lo lp im bi translated">关于<code class="fe oa ob oc nr b">Provider</code>和状态管理的更多信息可以在<a class="ae me" href="%5Bhttps://flutter.dev/docs/development/data-and-backend/state-mgmt/simple%5D(https://flutter.dev/docs/development/data-and-backend/state-mgmt/simple)" rel="noopener ugc nofollow" target="_blank">颤振文档</a>中找到</p></blockquote><p id="bc22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们需要的基线如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="bd63" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将在服务调用<code class="fe oa ob oc nr b">currentUser</code>中保留一个本地属性，它是当用户调用<code class="fe oa ob oc nr b">login</code>方法时存储用户的对象，如果密码匹配，我们将设置<code class="fe oa ob oc nr b">currentUser</code>，用户将登录。这将在调用<code class="fe oa ob oc nr b">getUser</code>方法时向用户提供。为了注销用户，我们将把<code class="fe oa ob oc nr b">currentUser </code>属性设置为null，表示我们不再登录系统。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="ddec" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">应用程序启动时确定用户状态</h1><p id="453f" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">使用应用程序的第一个挑战是确定应用程序启动时打开哪个页面。这里我们想做的是确定我们是否有一个用户。我们将使用上面创建的<code class="fe oa ob oc nr b">AuthService</code>并结合Flutter的<code class="fe oa ob oc nr b">FutureBuilder</code>小部件来呈现<code class="fe oa ob oc nr b">HomePage</code>或<code class="fe oa ob oc nr b">LoginPage</code>的正确首页。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="448c" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">使用提供程序</h1><p id="e2a6" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">在<code class="fe oa ob oc nr b">main.dart</code>中，我们需要更新默认的<code class="fe oa ob oc nr b">main</code>方法，如下所示；我们用<code class="fe oa ob oc nr b">ChangeNotifierProvider</code>包装整个应用程序，以获得扫描小部件树并找到类型为<code class="fe oa ob oc nr b">AuthService</code>的对象的能力。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="14ae" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">修改MyApp小部件</h1><p id="7525" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">进入<code class="fe oa ob oc nr b">main.dart</code>并进行以下更改，这将允许<code class="fe oa ob oc nr b">MyApp</code>小部件设置路线。这个小部件将决定应用程序启动时是应该导航到<code class="fe oa ob oc nr b">HomePage</code>小部件还是<code class="fe oa ob oc nr b">LoginPage</code>小部件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="4ee8" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">修改登录页面小部件</h1><p id="3642" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">现在可以使用Provider访问<code class="fe oa ob oc nr b">AuthService</code>,我们可以在used单击按钮时调用login函数。打开文件<code class="fe oa ob oc nr b">login_page.dart</code>，找到登录按钮的<code class="fe oa ob oc nr b">onPressed</code>方法，进行如下修改</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="e446" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用<code class="fe oa ob oc nr b">Provider.of</code>方法来查找小部件树并得到我们的<code class="fe oa ob oc nr b">AuthService</code>，然后我们可以访问所有的方法，特别是<code class="fe oa ob oc nr b">loginUser</code>方法。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="7106" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">结论</h1><p id="1221" class="pw-post-body-paragraph ku kv it kw b kx nl ju kz la nm jx lc ld nn lf lg lh no lj lk ll np ln lo lp im bi translated">此时，您应该有一个具有基本登录流的正常工作的应用程序，如果您提供password123作为密码，用户将成功登录。</p><p id="37bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我添加了一点额外的功能，如果出现某种错误，就在对话框中显示错误消息。</p><blockquote class="mf mg mh"><p id="affd" class="ku kv mi kw b kx ky ju kz la lb jx lc mj le lf lg mk li lj lk ml lm ln lo lp im bi translated"><a class="ae me" href="https://medium.com/better-programming/simple-firebase-login-flow-in-flutter-now-firebase-79ecfe283dcf" rel="noopener"> <strong class="kw iu">见本故事第二部分</strong> </a></p></blockquote></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="ce4e" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">资源</h1><blockquote class="mf mg mh"><p id="59f0" class="ku kv mi kw b kx ky ju kz la lb jx lc mj le lf lg mk li lj lk ml lm ln lo lp im bi translated">这里有源代码:[确保你在第一部分的分支上]<a class="ae me" href="https://github.com/aaronksaunders/simple_firebase_auth/tree/completed-part-one" rel="noopener ugc nofollow" target="_blank">https://github . com/aaronksaunders/simple _ firebase _ auth/tree/completed-part-one</a></p></blockquote></div></div>    
</body>
</html>