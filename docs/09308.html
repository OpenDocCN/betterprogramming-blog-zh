<html>
<head>
<title>How To Implement a Single Page Application Using React-Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React-Router实现单页面应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-implement-a-single-page-application-using-react-router-cc6b9e5c3aec?source=collection_archive---------1-----------------------#2021-08-10">https://betterprogramming.pub/how-to-implement-a-single-page-application-using-react-router-cc6b9e5c3aec?source=collection_archive---------1-----------------------#2021-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ad75" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用React路由器开发SPA网站</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/44ccdefcbf6c3d4c7128c1ffde33331a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JavMxcmtHQYqtBvF"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@brandomakesbranding?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Brando在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上制作品牌</a></p></figure><h1 id="be78" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是SPA？</h1><p id="504a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">SPA代表单页应用程序。这是目前非常常见的网站编程方式。这个想法是网站在你第一次访问的时候加载所有的HTML/JS。当您随后导航时，浏览器只会重新呈现内容，而不会刷新网站。</p><p id="2cd2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是用来让用户体验感觉流畅很多的。当经常在菜单之间导航时，你可以分辨出它是SPA还是多页应用程序，因为多页应用程序会重新加载，使整个UI根据内容快速闪烁。这是因为它刷新了网站。取而代之的是，SPA在交易中会感觉很流畅，因为它只是显示其他内容而没有刷新。</p><p id="69ee" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将看看如何使用React-Router来构建一个。</p><h1 id="380a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">发展水疗中心</h1><p id="0642" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，使用<a class="ae ky" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>创建应用程序模板。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="13ff" class="mx la it mt b gy my mz l na nb">create-react-app app</span></pre><p id="bcfd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">进入新创建的app文件夹，安装React路由器，我们将使用它来创建SPA。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="28ed" class="mx la it mt b gy my mz l na nb">npm i react-router-dom --save</span></pre><p id="1ca9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将从修改创建的应用程序开始，打开<code class="fe nc nd ne mt b">src/App.js</code>并用以下内容替换其中的所有内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.js删除原始闪屏</p></figure><p id="7236" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意，我们正在返回<code class="fe nc nd ne mt b">Main</code>组件。让我们创建它，这样应用程序就不会崩溃。创建一个名为layouts的文件夹和一个名为<code class="fe nc nd ne mt b">layouts/main.js</code>的文件。这个文件将保存应用程序的基本布局。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2d86" class="mx la it mt b gy my mz l na nb">mkdir layouts<br/>touch layouts/main.js</span></pre><p id="69eb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<code class="fe nc nd ne mt b">main.js</code>中，我们将创建一个看起来非常糟糕的导航条，但我们是来学习React Router而不是CSS的。这将有一个关于页面和联系页面的导航链接。在navbar下面，我们将有一个内容div，用于呈现所选的链接。这是一个非常常见的SPA设置，其中有一个带有导航的静态布局和一个可以改变内容的卡片。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Main.js应用程序的默认布局</p></figure><p id="729c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们创建导航栏，然后访问页面。在src中创建一个名为components的文件夹，它将保存应用程序的组件。然后创造<code class="fe nc nd ne mt b">components/navbar/navbar.js</code>。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="0473" class="mx la it mt b gy my mz l na nb">mkdir -p components/navbar/<br/>touch components/navbar/navbar.js</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Navbar.js —一个简单的链接列表</p></figure><p id="9598" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后，打开<code class="fe nc nd ne mt b">src/index.css</code>，粘贴以下CSS代码片段，将导航条呈现为一个水平列表:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">index.css —添加水平导航栏</p></figure><p id="bb48" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">启动应用程序并访问<a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> localhost:3000 </a>以查看生成的应用程序。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="6b52" class="mx la it mt b gy my mz l na nb">npm start</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/5fb9b20243744ca59e8def02e635bc86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*CG8zxiexGDgija4HOmbTNA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是当前不工作的导航栏</p></figure><p id="2627" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在我们开始实现路由器之前，我们需要创建三个组件，这都非常简单，因为它们只是打印它们的名称。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="16bd" class="mx la it mt b gy my mz l na nb">mkdir components/about<br/>mkdir components/contact<br/>mkdir components/home</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">About.js —打印名称</p></figure><p id="666a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">复制并粘贴以上所有三个组件的代码，并将名称改为正确的名称。所以你应该有<code class="fe nc nd ne mt b">components/about/About.js</code>、<code class="fe nc nd ne mt b">components/contact/Contact.js</code>和<code class="fe nc nd ne mt b">components/home/Home.js</code>，它们看起来都像《约法三章》的主旨，只是名字变了。</p><h1 id="1848" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">学习使用React路由器</h1><p id="60ac" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您已经创建了所有这三个组件，那么最后是时候学习如何使用React路由器了。我们将使每个链接将显示的内容更改为正确的组件。</p><p id="ee29" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们需要修改两个文件来完成这项工作:必须更新<code class="fe nc nd ne mt b">layouts/main.js</code>来包含路由器，然后<code class="fe nc nd ne mt b">components/navbar/navbar.js</code>需要用React路由器中的一个名为<code class="fe nc nd ne mt b">Link</code>的组件替换所有的<code class="fe nc nd ne mt b">&lt;a&gt; </code>标签。我们将一步一步地介绍它，这样我们可以检查每个组件是什么。</p><p id="2cfe" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先将下面的导入添加到<code class="fe nc nd ne mt b">main.js</code> <strong class="lt iu"> : </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从react-router-dom导入所需的组件</p></figure><p id="44ba" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在继续之前，我们将了解每个组件是什么。这很重要，我已经看到许多人学习模式而不是组件做什么。我坚信理解这些组件的作用会使使用它们变得更容易。</p><ul class=""><li id="96e7" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated"><a class="ae ky" href="https://reactrouter.com/core/api/Router" rel="noopener ugc nofollow" target="_blank">路由器</a> —路由器是一个接口，需要完成它才能充当路由器。有几种不同的默认路由器可用。我们将开始使用HashRouter，但也有常用的BrowserRouter。这里有一个很棒的<a class="ae ky" href="https://stackoverflow.com/questions/51974369/what-is-the-difference-between-hashrouter-and-browserrouter-in-react" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>关于它们之间区别的讨论。</li><li id="3164" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://reactrouter.com/web/api/HashRouter" rel="noopener ugc nofollow" target="_blank">哈希路由器</a> —哈希路由器在URL中使用#来同步UI。一个例子就是<a class="ae ky" href="http://localhost:3000/#/about" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/#/关于</a>。我们将开始使用它，然后学习如何切换它。</li><li id="b4a7" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://reactrouter.com/web/api/BrowserRouter" rel="noopener ugc nofollow" target="_blank"> BrowserRouter </a> —使用HTML5历史API的路由器。这是我们将使用的路由器。</li><li id="3111" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://reactrouter.com/web/api/Switch" rel="noopener ugc nofollow" target="_blank"> Switch </a> —一个让我们控制如何渲染不同路线的组件。它将只呈现第一个匹配的子路由。非常适合避免同时渲染多条路线。</li><li id="02f7" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://reactrouter.com/web/api/Route" rel="noopener ugc nofollow" target="_blank"> Route </a> —每当URL匹配指定的模式时就会呈现的组件。这意味着我们可以同时渲染多条路线，这也是开关如此重要的原因。</li><li id="1600" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated"><a class="ae ky" href="https://reactrouter.com/web/api/NavLink" rel="noopener ugc nofollow" target="_blank"> NavLink/Link </a> — Links是允许路由器在您的应用程序中更改导航的组件。NavLink只是Link的一个扩展，允许进行样式化。我倾向于使用NavLink，因为它增加了。激活导航栏中当前选定链接的类。这使我们可以很容易地显示当前选择的链接。</li></ul><p id="b23a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将在<code class="fe nc nd ne mt b">main.js</code>中的所有内容周围添加HashRouter。这是为了确保正确使用内部的组件。如果路由组件在HashRouter之外，它将不起作用。所以我们必须让HashRouter成为父对象。这就是为什么经常在App.js里发现路由器的原因。</p><p id="d291" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">提示:我们将删除HashRouter，稍后使用BrowserRouter。</p><p id="b5a6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nc nd ne mt b">Switch</code>将被放置在内容div中，因为我们希望在内容div中呈现所选页面。请记住，每当一个<code class="fe nc nd ne mt b">Route</code>匹配的网址，它将渲染，开关将确保只有第一个匹配渲染。</p><p id="1db3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为我们一次只想渲染一个组件，所以所有的路径都将进入交换机内部。请注意，情况并非总是如此。相同的设置并不少见，但有几条路由位于交换机之外。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Main.js —我们根据URL路由到正确组件的完整示例</p></figure><p id="57f3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们需要更改Navbar.js来使用特殊的NavLink组件，而不是<code class="fe nc nd ne mt b">&lt;a&gt;</code>。这是因为只有当我们使用链路组件时，路由器才会工作。</p><p id="3ac6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意“/”路径中是如何包含精确的关键字的？这是因为默认情况下，“/”URL将匹配所有路径，因为它们都包含“/”。还记得交换机会选择什么链路吗？第一个匹配，所以我们需要说，如果它是一个精确的匹配，只选择“/”。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Navbar.js完整的导航条，带有导航链接而不是标签</p></figure><p id="029e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您可以选择修改。在<code class="fe nc nd ne mt b">index.css</code>中激活CSS以高亮显示选中的链接。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">index.css —突出显示选择导航链接</p></figure><p id="3885" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">访问<a class="ae ky" href="http://localhost:3000/#/" rel="noopener ugc nofollow" target="_blank"> localhost:3000 </a>查看结果并尝试导航。当内容被切换时，你应该看到顶部的导航条还在。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/090294454224a5247f3711ed6a17057f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*ykGOIbIwPc_xkEJ0MaQ7gQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://localhost:3000/#/about" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/#/</a>—注意hashrouter在URL中使用的#。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/f20a403e8a4c7150ceb73e77bdf5f120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*GeCJtHAmPKlKEEfqjVDzHw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://localhost:3000/#/about" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/#/关于</a> —当选择另一个导航链接和内容时，URL发生变化</p></figure><h1 id="aa0d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">向链接传递数据(UseParams和UseLocation)</h1><p id="13d5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">链接的一个关键特性是我们可以将数据传递到组件中。这在设置用户简档等时可能很重要。</p><p id="59a4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将研究使用当前路由器传递数据的两种方式。</p><p id="107d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第一种方法是使用react-router的<code class="fe nc nd ne mt b"><a class="ae ky" href="https://reactrouter.com/web/api/Hooks/useparams" rel="noopener ugc nofollow" target="_blank">useParams</a></code>钩子。这是一个钩子，允许您在URL中传递键值对。让我们添加用户配置文件并打印一个用户名来展示。</p><p id="71eb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，创建一个名为user的新文件夹和一个名为<code class="fe nc nd ne mt b">components/user/profile.js</code>的文件。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c311" class="mx la it mt b gy my mz l na nb">mkdir components/user<br/>touch components/user/profile.js</span></pre><p id="8b18" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在profile.js中，我们需要导入<code class="fe nc nd ne mt b">useParams</code>钩子。然后，我们将使用这个钩子分配用户名的值。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">profile.js — useParams用于从URL中提取用户名</p></figure><p id="e83d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nc nd ne mt b">useParams</code>怎么知道要提取什么值？在路由声明中使用命名参数。所以我们需要改变在<code class="fe nc nd ne mt b">main.js</code>的路线，将它包含在URL中。通过在路线上添加<code class="fe nc nd ne mt b">:parameter</code>来命名参数。所以我们想加上<code class="fe nc nd ne mt b">:username</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">main.js添加了带有:username参数的配置文件路径</p></figure><p id="066d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们需要更改的最后一件事是显示配置文件页面的导航栏，并在链接中插入一个值。这将是硬编码的，但是在真实的场景中，你的导航条会从某个地方获取用户名。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Navbar.js —添加了指向profile/percybolmer的链接，其中percybolmer是用户名值</p></figure><p id="a382" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">再次访问<a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">网站</a>，查看结果。注意URL如何显示用户名的值。尝试在浏览器中更改URL以查看更改是否生效。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/9f41867356a6c7f434adc7df80a45d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*eon8gnXjb_BCwacffIS2-Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://localhost:3000/#/profile/percybolmer" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/#/profile/percybolmer</a>—个人资料页面的url</p></figure><h1 id="0bfa" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">通过反应路由器传递数据(使用位置)</h1><p id="f146" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您可能已经发现，使用URL参数不允许我们轻松地添加许多参数。它只允许传递字符串，您可能希望传递更多的数据。</p><p id="65a6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">幸运的是这也是可能的，在链接中使用<code class="fe nc nd ne mt b"><strong class="lt iu">state</strong></code> <strong class="lt iu"> </strong>。每个链接都可以有一个<code class="fe nc nd ne mt b"><strong class="lt iu">to</strong></code>参数来接受对象，并且可以使用state来传递。该状态可以通过使用<code class="fe nc nd ne mt b"><a class="ae ky" href="https://reactrouter.com/web/api/Hooks/uselocation" rel="noopener ugc nofollow" target="_blank">useLocation</a></code>钩子来传递。</p><p id="4480" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对象的<a class="ae ky" href="https://reactrouter.com/core/api/Redirect/to-object" rel="noopener ugc nofollow" target="_blank">应该设置了状态和路径名变量，路径名是要使用的URL端点。</a></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="0cd1" class="mx la it mt b gy my mz l na nb">{<br/>"pathname": "url",<br/>"state": {<br/>    "yourstatevar": "value"<br/>  }<br/>}</span></pre><p id="6d72" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在你在想，“太好了，该用它了。”然而，堆栈溢出和其他论坛上有一些非常常见的问题，这些问题都是由于我们将经历的以下事情而发生的。</p><p id="585f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="nz">“是的，我故意犯这些错误，以确保我们能够解决它们。”</em></p><p id="f310" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="nz"> —邪恶的编程老师</em></p><p id="b8a9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这些是问题:</p><ol class=""><li id="4bd0" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm oa no np nq bi translated">HashRouter不支持<code class="fe nc nd ne mt b">useLocation</code>钩子。</li><li id="73ec" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm oa no np nq bi translated">不允许路由器与将路由器放在树上的组件在同一个组件中。你可以在这里阅读一篇关于它的博客文章。</li></ol><p id="b61f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，HashRouter不支持useLocation钩子。了解这一点很重要，文档中也强调了这一点。所以我们将从HashRouter切换到BrowserRouter。我们需要做的唯一更改是更改使用的名称，并确保导入它。</p><p id="1f30" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当我们更改名称时，我们需要解决第二个问题。我们将简单地把路由器移到<code class="fe nc nd ne mt b">index.js</code>文件中。这将使路由器组件包装应用程序，从而使它不是同一个组件的一部分。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Index.js —在我们的应用程序周围使用浏览器路由器</p></figure><p id="1d7e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们将从<code class="fe nc nd ne mt b">main.js</code>中移除路由器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Main.js —不再有路由器</p></figure><p id="c001" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后我们需要更新<code class="fe nc nd ne mt b">navbar.js</code>来确保to对象传递更多的数据。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导航栏—链接中有一个“收件人”对象</p></figure><p id="d15b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后，我们需要使用<code class="fe nc nd ne mt b">useLocation</code>钩子。在这个例子中，我将向您展示如何分配状态变量和路径名。用法同<code class="fe nc nd ne mt b">useParams</code>挂钩。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Profile.js —使用useLocation挂钩两次。</p></figure><p id="85bb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">访问<a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> localhost:3000 </a>查看结果。不要忘记注意，自从我们移除了HashRouter之后，URL已经发生了变化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/71fe2241e3eb4afc4946ec251cbb880a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9EVEuHkI8CwV_xrI0xlPQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://localhost:3000/profile/percybolmer" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/profile/percybolmer</a>—显示来自useLocation hook的数据</p></figure><h1 id="f37f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">使用useHistory以编程方式路由</h1><p id="0c02" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">有时，您可能希望基于某种事件以编程方式重新路由用户。这可以通过使用<code class="fe nc nd ne mt b"><a class="ae ky" href="https://reactrouter.com/core/api/Hooks/usehistory" rel="noopener ugc nofollow" target="_blank">useHistory</a></code>钩子来完成，它将返回一个历史对象，我们可以用它来重定向浏览器。使用它很简单。当您使用历史对象并使用<code class="fe nc nd ne mt b">push(route)</code>时，它将重新激活浏览器。</p><p id="ddbb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们把导航栏中的<code class="fe nc nd ne mt b">H1</code>标签做成一个点击后重定向到主页的按钮。</p><p id="58e0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将使用和以前一样的方法，通过钩子给变量赋值。我们将添加一个使用该变量的函数，并推送路线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">navbar.js —使用历史示例重定向浏览器</p></figure><p id="4494" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">尝试再次访问<a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> localhost:3000 </a>。导航到/页面以外的页面，然后按按钮。瞧，它应该已经导航你回来了！</p></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><h1 id="a3d6" class="kz la it bd lb lc oj le lf lg ok li lj jz ol ka ll kc om kd ln kf on kg lp lq bi translated">结论</h1><p id="7275" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您已到达这篇文章的结尾。希望你已经发现它是有用的。<br/>你可以在<a class="ae ky" href="https://github.com/percybolmer/react-router" rel="noopener ugc nofollow" target="_blank"> GitHub </a>找到文章中使用的完整代码。</p><p id="16b6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">今天，我们讨论了以下主题:</p><ul class=""><li id="58d7" class="ni nj it lt b lu mn lx mo ma nk me nl mi nm mm nn no np nq bi translated">如何设置和使用React路由器</li><li id="cf79" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">路由器的定位</li><li id="abe1" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">使用交换机在多个链路之间路由</li><li id="515e" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">链接到子组件中的子页</li><li id="149b" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">使用<code class="fe nc nd ne mt b">useParams</code>和<code class="fe nc nd ne mt b">useLocation</code>钩子传递数据</li><li id="bbac" class="ni nj it lt b lu nr lx ns ma nt me nu mi nv mm nn no np nq bi translated">使用<code class="fe nc nd ne mt b">useHistory</code>挂钩编程重新布线</li></ul><p id="05fd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">感谢阅读。现在走出去，环游世界。</p></div></div>    
</body>
</html>