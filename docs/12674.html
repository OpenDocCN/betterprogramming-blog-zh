<html>
<head>
<title>Travel in and Out of 3D Objects Using React-Three-Fiber</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React-Three-Fiber进出3D对象</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/travel-in-and-out-of-3d-objects-using-react-three-fiber-36fa514ab6b5?source=collection_archive---------7-----------------------#2022-06-21">https://betterprogramming.pub/travel-in-and-out-of-3d-objects-using-react-three-fiber-36fa514ab6b5?source=collection_archive---------7-----------------------#2022-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b3f4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">探索3D对象外部和内部的纹理</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/852859b5338b5878eda43a1dbb6737fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*8XXmP2XAMBhbpnNXCXhe5A.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片作者—纹理来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Equirectangular_projection_SW.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:equi rectangle _ projection _ SW . jpg</a></p></figure><p id="2042" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们已经写过<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/working-with-three-js-the-popular-3d-javascript-library-bd2e9b03c95a"> three.js基础</a>、<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/working-with-3d-model-in-three-js-e228621141af"> 3D建模</a>、<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/working-with-texture-in-three-js-40ce5e8b96c4">颜色纹理</a>和<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/10-javascript-code-techniques-to-manipulate-textures-in-three-js-f73131f8321b">通过反射和折射的环境纹理</a>。</p><p id="35d9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在这篇文章中，我们将在3D物体的外部和内部应用纹理，并探索进出3D物体的例子。</p><p id="71d8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们重用了上一篇文章中的<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/working-with-texture-in-three-js-40ce5e8b96c4">Create React App工作环境，安装了以下包:</a></p><ul class=""><li id="1ec6" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ku" href="https://github.com/mrdoob/three.js/" rel="noopener ugc nofollow" target="_blank"> three.js </a> ( <code class="fe ma mb mc md b">three</code>):是一个在网页上渲染3D内容的3D JavaScript库。它旨在创建一个易于使用、轻量级、跨浏览器、通用的3D库。</li><li id="8d0d" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="https://github.com/pmndrs/react-three-fiber" rel="noopener ugc nofollow" target="_blank"> react-three-fiber </a> ( <code class="fe ma mb mc md b">@react-three/fiber</code>):是three.js的react渲染器，它允许我们使用JSX编写three.js，更具声明性。React包装器还在幕后处理很多事情，比如调整画布大小和处理卸载的对象。</li><li id="05fd" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><code class="fe ma mb mc md b"><a class="ae ku" href="https://github.com/pmndrs/drei" rel="noopener ugc nofollow" target="_blank">@react-three/drei</a></code>:这是一个渲染react-three-fiber的有用助手集合。它使得使用多种类型的对象变得更加容易，例如相机、控件、图像、形状、3D模型、环境等。</li></ul><p id="6c6a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">通过以下示例，我们一步一步地进出3D对象:</p><ul class=""><li id="81af" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ku" href="#7b24" rel="noopener ugc nofollow">从外面看立方体</a></li><li id="59b9" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="#220c" rel="noopener ugc nofollow">从里面看立方体</a></li><li id="d314" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="#bac4" rel="noopener ugc nofollow">进出立方体</a></li><li id="93ed" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="#94a8" rel="noopener ugc nofollow">从外面看球体</a></li><li id="f6c8" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="#e654" rel="noopener ugc nofollow">从内部观察球体</a></li><li id="6bae" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="#8a07" rel="noopener ugc nofollow">进出球体</a></li><li id="89c7" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><a class="ae ku" href="#dee1" rel="noopener ugc nofollow">两面纹理不同的球体</a></li></ul><h1 id="7b24" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">从外面看这个立方体</h1><p id="ea84" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">在three.js中，纹理是通过将图像应用到表面，或者作为反射或折射贴图来创建的。一个立方体需要六个图像来构建六个面的纹理。这些图像按以下顺序指定:<code class="fe ma mb mc md b">pos-x</code>、<code class="fe ma mb mc md b">neg-x</code>、<code class="fe ma mb mc md b">pos-y</code>、<code class="fe ma mb mc md b">neg-y</code>、<code class="fe ma mb mc md b">pos-z</code>和<code class="fe ma mb mc md b">neg-z</code>。</p><p id="6580" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们用芥菜田的图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/de6c67392035e3dfa8e28eef01b595a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q7uPaNlkEwDUtc9r.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="789a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">将其拆分成四个文件，分别命名为<code class="fe ma mb mc md b">mustard1.jpg</code>、<code class="fe ma mb mc md b">mustard2.jpg</code>、<code class="fe ma mb mc md b">mustard3.jpg</code>、<code class="fe ma mb mc md b">mustard4.jpg</code>。将它们放在<code class="fe ma mb mc md b">public/textures</code>文件夹下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/413adfaffbfd515b89049c2ea13d0cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S7dL4bHoH7_c2jb3.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="ea95" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">public/sky.jpg</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2fb1ac910642b1768b3fba5aaea19168.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*q5xCDxowRQH2ehtk570Ieg.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="9339" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">public/grass.jpg</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/be44681c02d8911b722bfc5c9ec7f0d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*gHUyBSysPP90Sx5OsHnPMQ.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="7514" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这些DIY图像并不完美，但足以证明这个概念。</p><p id="7438" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">类似于纹理文章中的例子，我们使用下面的<code class="fe ma mb mc md b">src/App.js</code>从外部观察立方体:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2efc" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们已经<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/working-with-three-js-the-popular-3d-javascript-library-bd2e9b03c95a">详细解释了</a>什么是three.js以及它在React中是如何工作的。网格是一种基于三角形多边形网格的对象。骨骼构成了三维物体的外形。它由几何体(形状)、材质(表面)和场景(位置)定义。</p><ul class=""><li id="1c08" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在上面的代码中，纹理图像在第7–14行被加载。每个纹理被设置为<code class="fe ma mb mc md b">meshBasicMaterial</code>的<code class="fe ma mb mc md b">map</code>道具(第31行)。</li><li id="bcf1" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><code class="fe ma mb mc md b">Box</code>组件(第6–37行)调用<code class="fe ma mb mc md b">useFrame</code>执行旋转(第16–22行)。它定义了一个<code class="fe ma mb mc md b">mesh</code>(第25–35行)，其中包括一个盒子/立方体(第26行)，带有定义为<code class="fe ma mb mc md b">[3, 3, 3]</code>的<code class="fe ma mb mc md b">width</code>、<code class="fe ma mb mc md b">height</code>和<code class="fe ma mb mc md b">depth</code>。</li><li id="0dc9" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">材质(第27–34行)配置有<code class="fe ma mb mc md b">meshBasicMaterial</code>，一种用于绘制不受灯光影响的几何图形的材质。在第32行，材料<code class="fe ma mb mc md b">side</code>被设置为<code class="fe ma mb mc md b">THREE.FrontSide</code>。</li><li id="ffbf" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><code class="fe ma mb mc md b">Box</code>显示在<code class="fe ma mb mc md b">Canvas</code>(第41-48行)上，呈现三的组件。<code class="fe ma mb mc md b">Canvas</code>将<code class="fe ma mb mc md b">camera</code>的道具设置为<code class="fe ma mb mc md b">{ fov: 70, near: 0.01, far: 100, position: [0, 0, 6] }</code>(第42行)，以天蓝色背景占据整个视口(第43行)。</li><li id="c919" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们在盒子外面的<code class="fe ma mb mc md b">[0, 0, 6]</code>位置观看。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/10756a4e49a30bd8183daa3c86cf1f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*moP8_zIa0k6kyz1QHQpHwg.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="220c" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">从里面看立方体</h1><p id="6534" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">进入立方体很容易——只需将相机位置移动到盒子内部。</p><p id="a615" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ul class=""><li id="6c3b" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在第32行，物料<code class="fe ma mb mc md b">side</code>被设置为<code class="fe ma mb mc md b">THREE.BackSide</code>。</li><li id="1914" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">在第42行，摄像机位于<code class="fe ma mb mc md b">[0, 0, 1]</code>。</li><li id="0514" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们在盒子内部的<code class="fe ma mb mc md b">[0, 0, 1]</code>位置观察摄像机。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/255c4b920a4b0833931bed82d19cb20d.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*T2sbXeA6OY2XNh1vph8M8w.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="bac4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">进出立方体</h1><p id="a693" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">我们可以从外面和里面看立方体。它允许我们进出立方体。实现这一目标需要两件事:</p><ul class=""><li id="8b09" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">将相机移进移出立方体。</li><li id="d20e" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">将材料做成两面的。</li></ul><p id="88ef" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ul class=""><li id="adc1" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在<code class="fe ma mb mc md b">useFrame</code>(第17–34行)中，摄像机在每次调用时移动。它从立方体的内部移动到外部。如果它太靠后(<code class="fe ma mb mc md b">z</code>在第23行超过8)，它向前移动并在立方体中行进。如果它太近(<code class="fe ma mb mc md b">z</code>在第25行达到1)，它将向后移动并移出立方体。这个动作重复进行。</li><li id="5259" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">在第44行，材料<code class="fe ma mb mc md b">side</code>被设置为<code class="fe ma mb mc md b">THREE.DoubleSide</code>。</li><li id="7690" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们进出立方体。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/1648857a4b609c2560fc6bc8dfb64c63.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*bmWp9X-FLtR-63jI-YXzwA.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h1 id="94a8" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">从外面看这个球体</h1><p id="6e95" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">我们已经在一个球体表面投射了一张反射/折射贴图。这里，我们将图像直接应用到球体表面。</p><p id="d9e1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">因为球体表面不是平的，所以需要一个等矩形的贴图。等矩形地图是一种2D图像，它将球体的曲面投影到平面上。</p><p id="d8af" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下面这张等矩形图是从维基百科下载的，放在<code class="fe ma mb mc md b">public/textures</code>文件夹下，名为<code class="fe ma mb mc md b">map.jpeg</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/bc870bb52c80d7d3133cd61c65c51a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rD_86UjjW4r20ANbFxCsUg.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Equirectangular_projection_SW.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:equi rectangle _ projection _ SW . jpg</a></p></figure><p id="fed0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ul class=""><li id="934e" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在第6行，为纹理加载等矩形贴图，设置为<code class="fe ma mb mc md b">meshBasicMaterial</code>的<code class="fe ma mb mc md b">map</code>道具(第20行)。</li><li id="ea70" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><code class="fe ma mb mc md b">Sphere</code>组件(第5–23行)调用<code class="fe ma mb mc md b">useFrame</code>执行旋转(第9–15行)。它定义了一个<code class="fe ma mb mc md b">mesh</code>(第18–21行)，其中包括一个球体(第19行)，其<code class="fe ma mb mc md b">radius</code>、<code class="fe ma mb mc md b">widthSegments</code>和<code class="fe ma mb mc md b">heightSegments</code>被定义为<code class="fe ma mb mc md b">[3, 64, 32]</code>。</li><li id="3a58" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">物料(第20行)配置有<code class="fe ma mb mc md b">meshBasicMaterial</code>，其中<code class="fe ma mb mc md b">side</code>设置为<code class="fe ma mb mc md b">THREE.FrontSide</code>。</li><li id="fe4e" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated"><code class="fe ma mb mc md b">Sphere</code>显示在<code class="fe ma mb mc md b">Canvas</code>(第27-34行)上，呈现三的组件。<code class="fe ma mb mc md b">Canvas</code>将<code class="fe ma mb mc md b">camera</code>的道具设置为<code class="fe ma mb mc md b">{ fov: 70, near: 0.01, far: 100, position: [0, 0, 6] }</code>(第28行)，并以淡天蓝色的背景占据整个视口(第29行)。</li><li id="6bf0" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们观察球体外面<code class="fe ma mb mc md b">[0, 0, 6]</code>的摄像机位置。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/4eaa57438292fe785b62a0b53e7b6430.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*iqOG2MjXOlTgv7eICWxFTg.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片作者—纹理来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Equirectangular_projection_SW.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:equi rectangle _ projection _ SW . jpg</a></p></figure><h1 id="e654" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">从内部观察球体</h1><p id="e6f4" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">通过移动相机位置在球体内部移动。</p><p id="cc0e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ul class=""><li id="dbb7" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在第20行，材料<code class="fe ma mb mc md b">side</code>被设置为<code class="fe ma mb mc md b">THREE.BackSide</code>。</li><li id="4fb8" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">在第28行，摄像机位于<code class="fe ma mb mc md b">[0, 0, 1]</code>。</li><li id="8318" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们观察球体内部<code class="fe ma mb mc md b">[0, 0, 1]</code>处的摄像机位置。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/9a499e1c5a4d62fa8017d79bad7d4918.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*RmYyXccglh4kbizXTn2uCQ.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片作者—纹理来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Equirectangular_projection_SW.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:equi rectangle _ projection _ SW . jpg</a></p></figure><h1 id="8a07" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">在球体内外旅行</h1><p id="2a0a" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">类似于立方体，我们可以进出球体。我们所需要做的就是移动相机，使材料两面都有。</p><p id="ee67" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里是<code class="fe ma mb mc md b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ul class=""><li id="a56e" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在<code class="fe ma mb mc md b">useFrame</code>(第9–26行)中，相机在每次调用时移动。它从球体内部移动到外部。如果它太靠后(<code class="fe ma mb mc md b">z</code>在第23行超过了8)，它就会向前移动并在球体中运行。如果距离太近(<code class="fe ma mb mc md b">z</code>在第25行达到1)，则向后移动并移出球体。这个动作重复进行。</li><li id="276e" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">在第44行，材料<code class="fe ma mb mc md b">side</code>被设置为<code class="fe ma mb mc md b">THREE.DoubleSide</code>。</li><li id="6722" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们在球体内外旅行。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/ad9d4546b772b7fa652592862206736a.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*DdKVmDB7ezquU8PFYnuhnQ.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片作者—纹理来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Equirectangular_projection_SW.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:equi rectangle _ projection _ SW . jpg</a></p></figure><h1 id="dee1" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">两面有不同纹理的球体</h1><p id="abe7" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">我们把彩色地图放在正面、背面和两面。我们怎样才能在正面和背面显示不同的纹理？</p><p id="c07e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为此，我们需要创建两个对象——一个显示正面，另一个显示背面。</p><p id="f5eb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们用球体来说明它是如何实现的。首先下载另一面的等矩形图片，放在<code class="fe ma mb mc md b">public/textures</code>文件夹下，命名为<code class="fe ma mb mc md b">map2.png</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi np"><img src="../Images/62a1661a574ca28e5e233248159d05f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yB9EJKiMYnSdSMS-g3vnzw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Blue_Marble_2002.png" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/File:Blue_Marble_2002.png</a></p></figure><p id="74e5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下面是<code class="fe ma mb mc md b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ul class=""><li id="edc9" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在第5–34行，<code class="fe ma mb mc md b">Sphere</code>组件接受两个道具<code class="fe ma mb mc md b">mapName</code>和<code class="fe ma mb mc md b">side</code>。</li><li id="7a9d" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">在第43行，第一个<code class="fe ma mb mc md b">Sphere</code>放置在<code class="fe ma mb mc md b">Canvas</code>中，其中<code class="fe ma mb mc md b">textures/map2.png</code>位于前侧。</li><li id="72f5" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">在第44行，第二个<code class="fe ma mb mc md b">Sphere</code>放置在<code class="fe ma mb mc md b">Canvas</code>中，背面为<code class="fe ma mb mc md b">textures/map.jpeg</code>。</li><li id="b760" class="lr ls it kx b ky me lb mf le mg li mh lm mi lq lw lx ly lz bi translated">执行<code class="fe ma mb mc md b">npm start</code>。我们带着两面不同的纹理进出球体。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/9d212d43c93a05a6166d254460ae6b3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*4NIYT1dgAd1EvIrTlRQtNg.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片作者—外部纹理来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Blue_Marble_2002.png" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/File:Blue_Marble_2002.png</a>，内部纹理来自<a class="ae ku" href="https://en.wikipedia.org/wiki/File:Equirectangular_projection_SW.jpg" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/File:equi rectangle _ projection _ SW . jpg</a></p></figure><h1 id="ff26" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="d43f" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">我们已经展示了代码示例来查看3D对象内部和外部的纹理。也可以对外部和内部3D对象应用不同的纹理。通过移动相机，我们可以进出三维物体。</p><p id="264c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以看看<a class="ae ku" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒体文章</a>。</p></div></div>    
</body>
</html>