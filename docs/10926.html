<html>
<head>
<title>How to Write a Blockchain Smart Contract in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在5分钟内写好一份区块链智能合约</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-write-a-blockchain-smart-contract-in-5-minutes-a6bda5e9c1b1?source=collection_archive---------2-----------------------#2022-02-04">https://betterprogramming.pub/how-to-write-a-blockchain-smart-contract-in-5-minutes-a6bda5e9c1b1?source=collection_archive---------2-----------------------#2022-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2b22" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">撰写智能合同变得更加容易</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/70242cca682f028bd56981b73522baff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BNnnqD-rhRrKl61fM5OZsw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">智能契约握手(<a class="ae ky" href="https://developer.algorand.org/tutorials/writing-simple-smart-contract/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></figure><p id="2d78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将解释如何使用<a class="ae ky" href="https://elrond.com/" rel="noopener ugc nofollow" target="_blank">埃尔隆德</a>区块链在5分钟内编写、部署和测试一个简单的智能合同。</p><h1 id="7e89" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是智能合同？</h1><p id="be95" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">智能合同是存储在<a class="ae ky" href="https://www.investopedia.com/terms/b/blockchain.asp" rel="noopener ugc nofollow" target="_blank">区块链</a>上的一段代码，在满足特定条件时执行。</p><p id="3108" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">智能合同的应用包括:</p><ul class=""><li id="e6c7" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">转移资金</li><li id="4875" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><a class="ae ky" href="https://deloitte.wsj.com/articles/blockchain-and-smart-contracts-could-transform-property-transactions-1514955733" rel="noopener ugc nofollow" target="_blank">记载财产所有权</a></li><li id="8584" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><a class="ae ky" href="https://www.investopedia.com/news/how-blockchain-technology-can-prevent-voter-fraud/" rel="noopener ugc nofollow" target="_blank">投票</a></li><li id="2acf" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">仓库盘点</li></ul><p id="4fb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与传统数据库相比，使用区块链的优势在于区块链是无权限的，并且不需要中央可信机构来验证交易。</p><p id="871e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，合同可以在两个人之间直接签订，不需要中间人。</p><p id="9824" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以将区块链想象成一个点对点的分类账，将智能合约想象成一组可以应用于分类账状态的规则。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="58cb" class="lv lw it bd lx ly nn ma mb mc no me mf jz np ka mh kc nq kd mj kf nr kg ml mm bi translated">准备</h1><p id="4814" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在编写智能合同之前，我们将在埃尔隆德区块链上创建一个帐户。这一步不是绝对必要的，但是没有它，我们将无法测试我们的代码。</p><p id="999e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建钱包，请访问<a class="ae ky" href="https://devnet-wallet.elrond.com/" rel="noopener ugc nofollow" target="_blank">devnet-wallet.elrond.com</a>并选择“创建钱包”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/3dcdaa1cc5b808690d027a7d8b54fbd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DN1p0Lbe_tuOOLAxSEOvMw.png"/></div></div></figure><p id="7206" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后你会看到一个秘密短语，你需要记录下来。最后，您需要设置一个密码并下载一个密钥库文件。</p><blockquote class="nt nu nv"><p id="74e9" class="kz la nw lb b lc ld ju le lf lg jx lh nx lj lk ll ny ln lo lp nz lr ls lt lu im bi translated">请注意，这是在devnet上，你不需要转移任何资金。相反，假的测试基金可以通过一个水龙头获得。</p></blockquote></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="8e12" class="lv lw it bd lx ly nn ma mb mc no me mf jz np ka mh kc nq kd mj kf nr kg ml mm bi translated">创建智能合同</h1><p id="f1ba" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">接下来，我们需要使用新创建的帐户登录埃尔隆德游乐场。</p><p id="85b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，请访问<a class="ae ky" href="https://play.elrond.com/unlock" rel="noopener ugc nofollow" target="_blank">play.elrond.com/unlock</a>，拖动上一步中的密钥库文件，并输入您的密码。</p><p id="4bc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦成功认证，你将被引导到埃尔隆德游乐场，在那里你可以选择一个模板。选择“加法器”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/949a2769c9e4040a33fcb7ede3d34b44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEONfB5aABczB5aIqfV3TA.png"/></div></div></figure><p id="1cb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这为用<a class="ae ky" href="https://www.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> Rust </a>编写的智能契约创建了一个模板。完整代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="52ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该合同有三种方法:</p><ul class=""><li id="927e" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><code class="fe od oe of og b">init()</code>初始化加法器的存储值</li><li id="313f" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><code class="fe od oe of og b">getSum()</code>返回加法器的当前值</li><li id="8fd2" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><code class="fe od oe of og b">add()</code>将提供的整数加到当前值上</li></ul><p id="413d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当契约第一次部署在区块链上并设置初始状态时，调用<code class="fe od oe of og b">init()</code>方法。<code class="fe od oe of og b">getSum()</code>和<code class="fe od oe of og b">add()</code>将通过与合同本身的交易来调用。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="5d4d" class="lv lw it bd lx ly nn ma mb mc no me mf jz np ka mh kc nq kd mj kf nr kg ml mm bi translated">编译和部署</h1><p id="a80b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">接下来，我们将部署和测试智能合约。</p><p id="ee44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要编译，只需单击UI中绿色的“编译”按钮，然后单击“部署”。系统将提示您输入加法器的初始值。现在再次点击“部署”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/107ef9e0025501192245759a9ea52a05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EuPvo6ioDokBIgfZaOlp3w.png"/></div></div></figure><p id="1d34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">祝贺您，您现在已经在埃尔隆德发展网区块链上部署了智能合同！</p><p id="ea00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要确认这一点，你可以在埃尔隆德连锁浏览器中查看合同。要做到这一点，点击“部署”在操场侧面板，并点击放大镜旁边的“地址”字段。</p><p id="1dff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将显示如下所示的合同细节。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/eeb41502e296864d4a023a52169a47ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGGWWQxWnyR7dzf_JeZFaA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">埃尔隆德智能合同详细信息</p></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="356e" class="lv lw it bd lx ly nn ma mb mc no me mf jz np ka mh kc nq kd mj kf nr kg ml mm bi translated">测试</h1><p id="f8c5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了测试智能合约，我们需要在我们的埃尔隆德钱包中添加一些假的EGLD令牌。为此，请再次访问<a class="ae ky" href="https://devnet-wallet.elrond.com/" rel="noopener ugc nofollow" target="_blank">devnet-wallet.elrond.com</a>，登录并从左侧面板中选择“水龙头”。</p><p id="cadd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">填写验证码，然后选择“请求令牌”。这会在你的钱包里放10 xEGLD。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/b368bcfac94f1cc39d1793f091ac7563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*grdnplD1brLZCAcFvVua8Q.png"/></div></div></figure><p id="5f8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，返回到<a class="ae ky" href="https://play.elrond.com/" rel="noopener ugc nofollow" target="_blank">play.elrond.com</a>并选择右侧面板中的“部署”选项卡，然后单击“交互”字段旁边的三角形。这将打开交互面板。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/3b85831dc452be7d1deda8468a011da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7OQkJvDDUv8Tu9JyS-bLBw.png"/></div></div></figure><p id="499e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们看到了<code class="fe od oe of og b">getSum()</code>方法的当前结果，以及一个执行<code class="fe od oe of og b">add()</code>方法的三角形。点击这个将允许我们设置一个值添加到我们的加法器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/9b00c1796f2feeb3e655990b350c2c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2nDSalBhDimcO3doRNDbw.png"/></div></div></figure><p id="c344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在点击“发送”。这将向区块链上的智能合约发送一个事务，触发使用提供的值调用<code class="fe od oe of og b">add()</code>方法。</p><p id="4360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为<code class="fe od oe of og b">add()</code>修改了合同的状态，并且不仅仅是只读的，我们将被提示从我们的埃尔隆德开发者钱包中支付费用。</p><p id="f0c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦事务被执行，我们可以重新访问“交互”面板，看到契约的状态已经被更新，并且<code class="fe od oe of og b">getSum()</code>返回加法器的新值。</p><p id="b4fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以在区块链上通过重新访问“部署”面板并单击“地址”字段旁边的放大镜来确认这些交易。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/57ffedaeb99e9a23f254a7f436a66f4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rk-IJTJEeM4iswt2-WlRRw.png"/></div></div></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="20a2" class="lv lw it bd lx ly nn ma mb mc no me mf jz np ka mh kc nq kd mj kf nr kg ml mm bi translated">结论</h1><p id="0a00" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">埃尔隆德游乐场使创建、修改、部署和测试智能合同变得容易。我们在这里探索的简单加法器只是一个起点。作为下一步，鼓励读者探索一些其他的示例操场。</p><p id="0498" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于埃尔隆德平台的完整文档可以在这里找到:<a class="ae ky" href="https://docs.elrond.com/" rel="noopener ugc nofollow" target="_blank">https://docs.elrond.com/</a></p></div></div>    
</body>
</html>