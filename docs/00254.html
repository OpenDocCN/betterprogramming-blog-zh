<html>
<head>
<title>How CSS display:none Affects Images on Page Load</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSS如何显示:无影响页面加载时的图像</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/css-how-css-display-none-affects-images-on-page-load-dbdf1aaea820?source=collection_archive---------0-----------------------#2019-01-02">https://betterprogramming.pub/css-how-css-display-none-affects-images-on-page-load-dbdf1aaea820?source=collection_archive---------0-----------------------#2019-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6d9e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们应该隐藏图片来加快页面加载时间吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/74d024f966fecf53d0177b99ce85f86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*arZlPPIio7m02nCV.jpg"/></div></div></figure><p id="2317" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们一直在寻找方法来改善我们的客户如何管理他们的形象，我们已经把这作为我们的使命和文化的一部分。</p><p id="789d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在与我们的一个客户合作时，我们注意到他们在手机上的图片流量是类似网站的三倍。当我们开始调查时，我们意识到他们通过使用媒体查询将属性<code class="fe ln lo lp lq b">display</code>设置为<code class="fe ln lo lp lq b">none</code>来隐藏大量图像。</p><p id="27b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然隐藏图像的目标已经实现，但浏览器对隐藏图像的请求仍在发送，这对站点负载性能有直接的负面影响。</p><p id="3ee2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将<code class="fe ln lo lp lq b">display:none</code>设置为图像或图像容器不会阻止浏览器请求图像。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="6237" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">“显示:无”如何适用于图像</h1><p id="b3bc" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">如您所料，当您将属性<code class="fe ln lo lp lq b">display</code>设置为<code class="fe ln lo lp lq b">none</code>时，图像的行为类似于任何其他元素，图像不会显示，也不会占用DOM上的任何空间。</p><p id="5dd9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">问题是，由于脚本动态改变DOM元素的可能性，浏览器将加载DOM中存在的每个元素，如果图像是隐藏的，但在DOM中，那么它们将发送对该图像的网络请求。</p><p id="e1fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这意味着，在图像的情况下，在大多数情况下，当您不打算使用它时，它无论如何都会被请求。</p><p id="b2d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们来看一个例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/96e73dec7f57cff091e9470fc3d22d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/0*hpKJ4HHbYlP3Pq3W"/></div></figure><p id="acac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码中，我们将<code class="fe ln lo lp lq b">display:none</code>设置为包含四张图片的<code class="fe ln lo lp lq b">div</code>，以便在DOM中隐藏它们。</p><p id="711c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们在加载这个HTML时查看一下网络，结果如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/82213baeff20adb29215b8a641cae46d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MnWyrh5S2JzV-iAm"/></div></div></figure><p id="aed5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图像没有显示，但是请求被发出(如果我们对每个图像应用<code class="fe ln lo lp lq b">display:none</code>，结果将是相同的)。</p><p id="389d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这不会影响浏览器对DOM的呈现，但会影响站点内容的加载。</p><p id="542f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你要切换图像的可见性，那么这不是一个大问题，如果它已经加载了，甚至可能会更好。</p><p id="3080" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，如果您不打算显示这些图像，或者显示这些图像的可能性非常低，那么这种情况实际上是一个问题。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="5f58" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">解决方法</h1><ol class=""><li id="dbc1" class="mx my iq kt b ku mq kx mr la mz le na li nb lm nc nd ne nf bi translated">您可以防止包含图像的HTML被加载到DOM中，而不是使用<code class="fe ln lo lp lq b">display:none</code>，如果需要的话，以后再添加它。如果你使用Angular或React这样的框架，这是非常容易实现的。例如，您只需避免使用<code class="fe ln lo lp lq b">if</code>语句来呈现HTML。如果您使用普通的JavaScript，这也非常简单。</li><li id="2b49" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm nc nd ne nf bi translated">使用你的图片，或者至少是你想要隐藏的图片，作为背景图片。如果元素被隐藏，背景图像不会被加载。</li></ol></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="1cc4" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">结论</h1><p id="1563" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">即使图像的<code class="fe ln lo lp lq b">display</code>属性设置为<code class="fe ln lo lp lq b">none</code>，浏览器也会请求图像。</p><p id="939b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了防止这种情况，您可以实现我之前提到的解决方案，但是如果您要过多地切换图像的可见性，那么在HTML中添加和删除图像可能是不必要的性能开销，您可以通过使用<code class="fe ln lo lp lq b">display:none</code>属性来避免这种开销。</p><p id="e5b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用解决方案2要好得多，因为您可以只使用CSS而不必操作DOM。</p><p id="f635" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望这篇文章能帮助你理解当你想隐藏图片并避免请求它们时如何管理它们。</p><p id="81fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>