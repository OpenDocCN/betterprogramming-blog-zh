<html>
<head>
<title>How To Check if a File or Directory Exists in R, Python, and Bash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在R、Python和Bash中检查文件或目录是否存在</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-check-if-a-file-or-directory-exists-in-r-python-and-bash-841688b52e96?source=collection_archive---------11-----------------------#2021-04-26">https://betterprogramming.pub/how-to-check-if-a-file-or-directory-exists-in-r-python-and-bash-841688b52e96?source=collection_archive---------11-----------------------#2021-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8af0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">检查文件和目录是否存在的实践示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9a6b373d1d300d941816ee41f4a46f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8pSbjTj9jj_Hoy1L.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Maksym Kaharlytskyi 在<a class="ae ky" href="https://unsplash.com/s/photos/files?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><div class="kz la gp gr lb lc"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="1e8c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在构建数据工作流和机器学习管道时，我们经常会检查特定文件和目录(文件夹)的存在。在本文中，我们将提供一些实际例子，说明如何在R、Python和Bash中检查文件或目录。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="c190" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">检查R中的文件或目录是否存在</h1><p id="6fcb" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">对于这个例子，我们已经创建了一个名为<code class="fe nr ns nt nu b">myfile.txt</code>的文件和一个名为<code class="fe nr ns nt nu b">my_test_folder</code>的目录。</p><h2 id="4052" class="nv mv it bd mw nw nx dn na ny nz dp ne ma oa ob ng me oc od ni mi oe of nk og bi translated">如何检查文件是否存在</h2><p id="fb1a" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">我们可以通过基础包中的<code class="fe nr ns nt nu b">file.exists()</code>命令轻松检查文件是否存在。让我们看看下面的例子:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="c54d" class="nv mv it nu b gy ol om l on oo">if (file.exists("myfile.txt")) {<br/>  <br/>  print("The file exists")<br/>} else {<br/>  <br/>  print("The file does not exist")<br/>}</span></pre><p id="e3d7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到了:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="9122" class="nv mv it nu b gy ol om l on oo">[1] "The file exists"</span></pre><p id="95b8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在让我们用一个不存在的文件试试:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="8912" class="nv mv it nu b gy ol om l on oo">if (file.exists("nofile.txt")) {<br/>  <br/>  print("The file exists")<br/>} else {<br/>  <br/>  print("The file does not exist")<br/>}</span></pre><p id="ec13" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到了:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="898c" class="nv mv it nu b gy ol om l on oo">[1] "The file does not exist"</span></pre><p id="8e67" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">注意，通过在<code class="fe nr ns nt nu b">if</code>语句中添加<code class="fe nr ns nt nu b">!</code>，表达式<code class="fe nr ns nt nu b">if not file exists</code>可以写成如下形式:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="d4b8" class="nv mv it nu b gy ol om l on oo">if (!file.exists("myfile.txt"))</span></pre><p id="5f85" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，如果您想创建一个空文件，您可以运行以下命令:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="7dcd" class="nv mv it nu b gy ol om l on oo">file.create("mynewfile.txt")</span></pre><h2 id="941d" class="nv mv it bd mw nw nx dn na ny nz dp ne ma oa ob ng me oc od ni mi oe of nk og bi translated">如何检查目录是否存在</h2><p id="f032" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">类似地，使用<code class="fe nr ns nt nu b">file.exists()</code>，我们可以使用<code class="fe nr ns nt nu b">dir.exists()</code>命令来处理目录。例如:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="968c" class="nv mv it nu b gy ol om l on oo">if (dir.exists("my_test_folder")) {<br/>  <br/>  print("The direcoty exists")<br/>} else {<br/>  <br/>  print("The file does not exist")<br/>}</span></pre><p id="7f6c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="933a" class="nv mv it nu b gy ol om l on oo">[1] "The direcoty exists"</span></pre><p id="24e0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，让我们做下面的练习。我们将检查目录是否存在。如果没有，我们将创建一个新的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="5ffb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">而<code class="fe nr ns nt nu b">my_new_folder</code>文件夹是在我们的工作目录下创建的<strong class="lt iu"> </strong>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="82d2" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">检查Python中的文件或目录是否存在</h1><p id="df63" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">对于这个例子，我们已经创建了一个名为<code class="fe nr ns nt nu b">myfile.txt</code>的文件和一个名为<code class="fe nr ns nt nu b">my_test_folder</code>的目录。</p><h2 id="c208" class="nv mv it bd mw nw nx dn na ny nz dp ne ma oa ob ng me oc od ni mi oe of nk og bi translated">如何检查文件是否存在</h2><p id="22e5" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">我们可以按如下方式使用<code class="fe nr ns nt nu b">os</code>模块:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="faa0" class="nv mv it nu b gy ol om l on oo">import os.path</span><span id="0d4e" class="nv mv it nu b gy or om l on oo">if os.path.isfile('myfile.txt'):<br/>    print("The file exists")<br/>else:<br/>    print("The file does not exist")</span></pre><p id="6613" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们也可以使用<code class="fe nr ns nt nu b">pathlib</code>模块，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="3607" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">注意，在Python中，可以用命令<code class="fe nr ns nt nu b">with open(filename.txt, 'w')</code>创建一个空文件。例如:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="702e" class="nv mv it nu b gy ol om l on oo">import os</span><span id="7b3d" class="nv mv it nu b gy or om l on oo">if not os.path.isfile('myfile.txt'):<br/>    with open('myfile.txt', 'w'): pass</span></pre><p id="b7e2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">或者:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="e02e" class="nv mv it nu b gy ol om l on oo">if not os.path.isfile('myfile.txt'):<br/>    file_name = 'myfile2.txt'<br/>    f = open(file_name, 'w')<br/>    f.close()</span></pre><p id="340d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">打开文件时，请记住以下模式:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="35fe" class="nv mv it nu b gy ol om l on oo">w  write mode<br/>r  read mode<br/>a  append mode<br/>w+  create file if it doesn't exist and open it in (over)write mode<br/>    [it overwrites the file if it already exists]<br/>r+  open an existing file in read+write mode<br/>a+  create file if it doesn't exist and open it in append mode</span></pre><h2 id="b9d7" class="nv mv it bd mw nw nx dn na ny nz dp ne ma oa ob ng me oc od ni mi oe of nk og bi translated">如何检查一个目录是否存在</h2><p id="6364" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">类似地，我们可以检查目录是否存在，如下所示:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="7ba7" class="nv mv it nu b gy ol om l on oo">import os.path</span><span id="715c" class="nv mv it nu b gy or om l on oo">if os.path.isdir('my_test_folder'):<br/>    print("The directory exists")<br/>else:<br/>    print("The directory does not exist")</span></pre><p id="c6e7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到了:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="b1ee" class="nv mv it nu b gy ol om l on oo">The directory exists</span></pre><p id="b32c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">请注意，您可以创建一个目录，如下所示:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="b5ef" class="nv mv it nu b gy ol om l on oo">import os<br/>if not os.path.isdir('my_folder'):<br/>    os.makedirs('my_folder')</span></pre><p id="d920" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，要检查一个<code class="fe nr ns nt nu b">Path</code>对象是否独立存在，或者它是一个文件还是一个目录，使用<code class="fe nr ns nt nu b">exists()</code>:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="520e" class="nv mv it nu b gy ol om l on oo">from pathlib import Path</span><span id="4b7a" class="nv mv it nu b gy or om l on oo">my_file = Path("/path/to/file")<br/>if my_file.exists():<br/>    # path exists</span></pre><p id="8075" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">或者用<code class="fe nr ns nt nu b">os</code>模块:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="8e3d" class="nv mv it nu b gy ol om l on oo">import os.path</span><span id="dbf1" class="nv mv it nu b gy or om l on oo">path.exists("myfile.txt")</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="cadd" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">检查Bash中是否存在文件或目录</h1><h2 id="2f2a" class="nv mv it bd mw nw nx dn na ny nz dp ne ma oa ob ng me oc od ni mi oe of nk og bi translated">如何检查文件是否存在</h2><p id="728e" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">对于这个例子，我们已经创建了一个名为<code class="fe nr ns nt nu b">myfile.txt</code>的文件和一个名为<code class="fe nr ns nt nu b">my_test_folder</code>的目录。我们可以使用<code class="fe nr ns nt nu b">-f</code>标志，它检查常规文件的存在——而不是目录。</p><p id="6ba4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设<code class="fe nr ns nt nu b">mycheck.sh</code>脚本如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/142ff9858429f4783ec6406ccd958684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GpWi1xcHnXYNjrme.png"/></div></div></figure><p id="e55e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">文件如预期的那样存在。现在，如果我们想创建一个空脚本，我们可以运行以下命令:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="98c9" class="nv mv it nu b gy ol om l on oo">touch filename.txt</span></pre><h2 id="2c1a" class="nv mv it bd mw nw nx dn na ny nz dp ne ma oa ob ng me oc od ni mi oe of nk og bi translated">如何检查目录是否存在</h2><p id="612c" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">类似地，我们可以通过将<code class="fe nr ns nt nu b">-f</code>标志改为<code class="fe nr ns nt nu b">-d</code>来检查目录，这将检查目录是否存在。假设<code class="fe nr ns nt nu b">dircheck.sh</code>如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6c7bae1ac1869cbe0555b2eaa9ec6449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E-FccwNEPSzPKhqQ.png"/></div></div></figure><p id="c468" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">不出所料，我们收到了目录存在的消息。</p><p id="a784" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">请注意，如果您想要创建一个目录，可以运行以下命令:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="44f0" class="nv mv it nu b gy ol om l on oo">mkdir yourdirectory</span></pre><p id="5ad9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，注意表达式<code class="fe nr ns nt nu b">if not</code>带有一个<code class="fe nr ns nt nu b">!</code>，如下所示:</p><pre class="kj kk kl km gt oh nu oi oj aw ok bi"><span id="8f56" class="nv mv it nu b gy ol om l on oo">if [ ! -d my_test_folder ]</span></pre><p id="af78" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，我们为bash中的文件和目录检查提供了必要的标志:</p><ul class=""><li id="bafc" class="os ot it lt b lu lv lx ly ma ou me ov mi ow mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-b filename</code> —阻止特殊文件。</li><li id="7197" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-c filename</code> —特殊字符文件。</li><li id="f3ab" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-d directoryname</code> —检查目录是否存在。</li><li id="a6c4" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-e filename</code> —检查文件是否存在，无论文件类型(节点、目录、套接字等)如何。).</li><li id="4384" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-f filename</code> —检查常规文件是否存在—不是目录。</li><li id="c826" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-G filename</code> —检查文件是否存在并由有效的组ID拥有。</li><li id="ec30" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-G filename set-group-id</code> — <code class="fe nr ns nt nu b">True</code>如果文件存在并且是<code class="fe nr ns nt nu b">set-group-id</code>。</li><li id="2529" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-k filename</code> —粘粘的钻头。</li><li id="2d2f" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-L filename</code> —符号链接。</li><li id="acb9" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-O filename</code> — <code class="fe nr ns nt nu b">True</code>文件是否存在，是否为有效用户id所有。</li><li id="1e40" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-r filename</code> —检查文件是否可读。</li><li id="aef7" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-S filename</code> —检查文件是否是套接字。</li><li id="24f2" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-s filename</code> —检查文件是否为非零大小。</li><li id="3a60" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-u filename</code> —检查文件<code class="fe nr ns nt nu b">set-user-id</code>位是否置位。</li><li id="9170" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-w filename</code> —检查文件是否可写。</li><li id="eb43" class="os ot it lt b lu pb lx pc ma pd me pe mi pf mm ox oy oz pa bi translated"><code class="fe nr ns nt nu b">-x filename</code> —检查文件是否可执行。</li></ul></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="3522" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><em class="pg">最初发表于</em><a class="ae ky" href="https://predictivehacks.com/how-to-check-if-a-file-or-a-directory-exists-in-r-python-and-bash/" rel="noopener ugc nofollow" target="_blank">T5【https://predictivehacks.com】</a><em class="pg">。</em></p></div></div>    
</body>
</html>