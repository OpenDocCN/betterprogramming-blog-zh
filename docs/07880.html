<html>
<head>
<title>How To Use Alert With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中使用Alert</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-alert-with-swiftui-f48a937fefcf?source=collection_archive---------12-----------------------#2021-03-01">https://betterprogramming.pub/how-to-use-alert-with-swiftui-f48a937fefcf?source=collection_archive---------12-----------------------#2021-03-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4449" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建直观的iOS应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9c76fc55e3523f47a195eb0cb2ef46c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iphZ657rnOW0n8Ay"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Evan Krause 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="aff0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提醒是iOS应用程序最重要的组成部分之一。如果某些事情需要更多时间，比如下载文件或确保一切正常，我们可以使用它们来通知用户出现错误。警报的另一个用例是当我们的应用程序用户想要删除一些东西或进行电汇时要求确认。</p><p id="0347" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SwiftUI有用于此的<code class="fe lv lw lx ly b">Alert</code>组件，有几种方法可以使用它。我们去看看。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f46a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">警报</h1><p id="64f3" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">用SwiftUI显示警报的最简单方法之一是使用一个本地状态变量来指示警报是否可见。之后，我们需要添加需要返回<code class="fe lv lw lx ly b">Alert</code>视图的<code class="fe lv lw lx ly b">.alert</code>视图修饰符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4bce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我们看到<code class="fe lv lw lx ly b">showAlert</code>状态变量保持一个<code class="fe lv lw lx ly b">bool</code>值。起初，警报是不可见的，是<code class="fe lv lw lx ly b">false</code>。当我们按下按钮时，我们需要将状态变量更改为<code class="fe lv lw lx ly b">true</code>，这将触发警报在屏幕上可见。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/22a0e035bb700722202a83ec47e37826.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/0*8qGrvy1o7zaK4cLh.png"/></div></figure><p id="16c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，默认情况下，警报有一个“OK”按钮来消除它。我们将在本文后面尝试添加更多的按钮。</p><p id="d1d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<code class="fe lv lw lx ly b">Alert</code>视图，我们不仅可以提供一个<code class="fe lv lw lx ly b">title</code>，还可以提供一个<code class="fe lv lw lx ly b">message</code>字段，一个接一个。</p><pre class="kj kk kl km gt ng ly nh ni aw nj bi"><span id="f5b1" class="nk mh it ly b gy nl nm l nn no">Alert(title: Text("Title"),<br/>      message: Text("Message"))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/2717668ab29a0f320fe39059040be96e.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/0*TJGSwjxUqrT4UnT2.png"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b153" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">带有可识别项目的警报</h1><p id="de26" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在SwiftUI中呈现警报的另一种方式是使用可识别的视图状态变量。使用这种方法，SwiftUI的布局系统传递该状态变量的值，我们可以使用其内容填充警报标题、消息或事件按钮。好处是，一旦这个项目发生变化，SwiftUI布局系统将使用新值更新警报，这是一个非常简洁的功能，我们可以免费获得。</p><p id="14f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何用代码实现它。首先，我们需要建立一个实现<code class="fe lv lw lx ly b">Identifiable</code>协议的对象。让我们创建一个用户结构。我们需要创建一个<code class="fe lv lw lx ly b">id</code>常量，我们可以使用<code class="fe lv lw lx ly b">UUID</code>结构来表示一个全局唯一的值，该值可以标识它们之间的值。</p><pre class="kj kk kl km gt ng ly nh ni aw nj bi"><span id="7f5f" class="nk mh it ly b gy nl nm l nn no">struct User: Identifiable {<br/>  let id: UUID<br/>  let name: String<br/>}</span></pre><p id="24b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们转到SwiftUI部分并创建我们的视图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="2e2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值得注意的是，视图状态变量是可选的，因为SwiftUI决定了警报是否应该在屏幕上可见。</p><p id="a9bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用<code class="fe lv lw lx ly b">.alert</code>视图修饰符时，我们有一个带有输入变量的闭包，它是状态变量的当前值。例如，通过这种方式，我们可以填充警报标题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f9592642095d432a9af05a967d859526.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/0*oFroh4bcUkSXutUd.png"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="3cbd" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">警报按钮</h1><p id="5b49" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在我们知道了如何通过两种不同的方法使用SwiftUI在屏幕上显示警报。但是我们如何显示多个按钮并自定义它们呢？</p><p id="89c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了给警告添加按钮，我们可以使用指定解除按钮的<code class="fe lv lw lx ly b">Alert</code>初始化器，或者通过提供主要和次要按钮来初始化<code class="fe lv lw lx ly b">Alert</code>。</p><p id="7214" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个确认提醒，询问用户是否要从列表中删除某些内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ecdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们解开密码。为了显示警报，我们使用第一种方法，使用视图状态变量来指示何时在屏幕上显示警报。</p><p id="03f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们构建<code class="fe lv lw lx ly b">Alert</code>表示的<code class="fe lv lw lx ly b">.alert</code>视图修改器中，我们看到我们使用了不同的初始化器来提供关于警告按钮的信息。那是一个特定的<a class="ae ky" href="https://developer.apple.com/documentation/swiftui/alert/button" rel="noopener ugc nofollow" target="_blank">按钮</a>，代表一个警报的操作。我们可以在SwiftUI中使用四种不同风格的按钮:</p><ul class=""><li id="99d3" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">default</code></li><li id="2d1d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">cancel</code> —用系统提供的标签表示取消。</li><li id="6f26" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">cancel(_:action:)</code> —与上面类似，但带有自定义标签。</li><li id="ab95" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">destructive</code> —表示破坏性动作，例如删除。</li></ul><p id="4e51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在确认提示中使用了<code class="fe lv lw lx ly b">cancel</code>和<code class="fe lv lw lx ly b">destructive</code>按钮样式，因为我们的用户可以从列表中取消或删除项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f218cbc74cd9c4ba4886d354b499c185.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/0*ZRPpz1IhDYw1hS5G.png"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="7657" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">显示多个提醒</h1><p id="657c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">要在一个视图上显示多个警报，有两种方法。</p><h2 id="5c56" class="nk mh it bd mi od oe dn mm of og dp mq li oh oi ms lm oj ok mu lq ol om mw on bi translated">使用状态变量</h2><p id="2b8e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">第一种方法是为每个警报保留一个视图状态变量。但是我们需要添加<code class="fe lv lw lx ly b">.alert</code>修改器——不是为了全视图。例如，我们可以为调用警报的按钮添加它。如果我们一个接一个地添加两个<code class="fe lv lw lx ly b">.alert</code>修饰符，SwiftUI布局引擎将只显示第一个:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="56fc" class="nk mh it bd mi od oe dn mm of og dp mq li oh oi ms lm oj ok mu lq ol om mw on bi translated">使用可识别的状态变量</h2><p id="cd2d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我更喜欢第二种方法，因为它更加类型安全。首先，我们需要建立一个表示符合<code class="fe lv lw lx ly b">Identifiable</code>协议的警报的结构。在这个结构中，我们有一个本地枚举类型，表示我们希望显示的所有警报类型，并返回特定的警报视图。理想情况下应该是分开的，但是为了演示，我把它保持成这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="d5f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们想要创建SwiftUI视图并使用它。当调用和构造警报时，我们的视图将拥有带有新的<code class="fe lv lw lx ly b">AlertIdentifier</code>类型的本地状态变量。我们可以使用它和之前在<code class="fe lv lw lx ly b">ActiveAlert</code>枚举中构建的计算出的<code class="fe lv lw lx ly b">alertView</code>属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c30e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有很多东西需要解释，但主要的一点是，在同一个视图上显示多个警报是安全的，不需要为每个警报添加状态变量。使用这种方法，我们不需要担心我们的警告是否会显示给用户，因为我们没有分散在视图本身周围的多个<code class="fe lv lw lx ly b">.alert</code>视图修改器。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="cf9a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="00ce" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">显示警告来通知我们的应用程序用户或要求确认对于用户界面来说是必不可少的。我们可以用两种方式显示SwiftUI的警报。第一种方法是使用一个状态变量来指示警报是否可见。第二个使用可识别的状态变量，该变量可用于填充警报标题、消息和按钮。</p><p id="bfaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以为警报设置多种类型的按钮。如果我们想要显示两个以上，我们需要使用SwiftUI表。</p><p id="e0c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在同一个视图中显示多个警报，我们可以使用多个视图状态变量或者使用一个负责创建警报本身的可识别结构来实现。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4a3b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">资源</h1><ul class=""><li id="aa9d" class="np nq it lb b lc my lf mz li oo lm op lq oq lu nu nv nw nx bi translated"><a class="ae ky" href="https://github.com/fassko/swiftui-alert" rel="noopener ugc nofollow" target="_blank">样本代码</a></li><li id="ac3f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://developer.apple.com/documentation/swiftui/alert" rel="noopener ugc nofollow" target="_blank">预警正式文件</a></li><li id="12a7" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://developer.apple.com/documentation/swiftui/alert/button" rel="noopener ugc nofollow" target="_blank">报警按钮官方文档</a></li><li id="066d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-show-an-alert" rel="noopener ugc nofollow" target="_blank">如何显示警报</a></li><li id="8c97" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.hackingwithswift.com/books/ios-swiftui/working-with-identifiable-items-in-swiftui" rel="noopener ugc nofollow" target="_blank">在SwiftUI中处理可识别项目</a></li><li id="d609" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="http://www.thomashanning.com/swiftui-alert/" rel="noopener ugc nofollow" target="_blank"> SwiftUI: Alert </a></li></ul></div></div>    
</body>
</html>