<html>
<head>
<title>How to Safely Internationalize Your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何安全地国际化您的React应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/safely-internationalizing-react-ba5ea92ec42d?source=collection_archive---------14-----------------------#2020-06-17">https://betterprogramming.pub/safely-internationalizing-react-ba5ea92ec42d?source=collection_archive---------14-----------------------#2020-06-17</a></blockquote><div><div class="fc hw hx hy hz ia"/><div class="ib ic id ie if"><div class=""/><div class=""><h2 id="3c41" class="pw-subtitle-paragraph jf ih ii bd b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw dk translated">不再有遗漏的翻译</h2></div><figure class="jy jz ka kb gg kc fu fv paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fu fv jx"><img src="../Images/a55bbd8ce8580f6da3d213b8a70259c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JVNMKj4l2mSX7EMP"/></div></div><p class="kj kk fw fu fv kl km bd b be z dk translated">照片由<a class="ae kn" href="https://unsplash.com/@lemonvlad" rel="noopener ugc nofollow" target="_blank">弗拉季斯拉夫·克拉平</a>在<a class="ae kn" href="https://unsplash.com/photos/YeO44yVTl20" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="e9f3" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">为了达到尽可能多的<code class="fe lk ll lm ln b">en.users</code>，应用程序应该国际化。</p></div><div class="ab cl lo lp hm lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ib ic id ie if"><h1 id="8638" class="lv lw ii bd lx ly lz ma mb mc md me mf jo mg jp mh jr mi js mj ju mk jv ml mm bi translated">国际化库</h1><p id="29d0" class="pw-post-body-paragraph ko kp ii kq b kr mn jj kt ku mo jm kw kx mp kz la lb mq ld le lf mr lh li lj ib bi translated">有大量的国际化库可以帮助我们完成支持多种语言的繁琐任务。其中之一就是<a class="ae kn" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>库。它提供了很多特性，非常适合React和React Native(<a class="ae kn" href="https://github.com/i18next/react-i18next" rel="noopener ugc nofollow" target="_blank">React-18 next</a>)。</p><p id="30e7" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">在库的<a class="ae kn" href="https://github.com/i18next/react-i18next/tree/master/example" rel="noopener ugc nofollow" target="_blank">官方示例</a>中，翻译存储在<code class="fe lk ll lm ln b">.json</code>文件中:</p><figure class="jy jz ka kb gg kc"><div class="bz ms l di"><div class="mt mu l"/></div><p class="kj kk fw fu fv kl km bd b be z dk translated">JSON中的翻译</p></figure><p id="e1ee" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">有了这样定义的翻译，我们只需要在代码中使用它们。一个调用示例如下:<code class="fe lk ll lm ln b">t('hello')</code>。对于选择的语言，显示相应的值(例如<code class="fe lk ll lm ln b">Hello world</code>或<code class="fe lk ll lm ln b">Witaj świecie</code>)。</p><p id="07a0" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">然而，上面的例子有一个问题。</p></div><div class="ab cl lo lp hm lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ib ic id ie if"><h1 id="1989" class="lv lw ii bd lx ly lz ma mb mc md me mf jo mg jp mh jr mi js mj ju mk jv ml mm bi translated">缺少值</h1><p id="0086" class="pw-post-body-paragraph ko kp ii kq b kr mn jj kt ku mo jm kw kx mp kz la lb mq ld le lf mr lh li lj ib bi translated">假设我们给<code class="fe lk ll lm ln b">en-translation.json</code> — <code class="fe lk ll lm ln b">"dog": "dog"</code>增加了一个新的翻译。由于我们的大多数用户使用应用程序的英语版本，暂时没有人检查波兰语版本。</p><p id="34dd" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">然后，有一天，有个杆子想用app。不幸的是，由于缺少<code class="fe lk ll lm ln b">dog</code>的翻译，他们不能完全享受这个应用程序！</p><figure class="jy jz ka kb gg kc fu fv paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fu fv jx"><img src="../Images/9f24c40b3acb59cb5c7a8bff96b43057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yIaLYimbNKo81Tiw"/></div></div><p class="kj kk fw fu fv kl km bd b be z dk translated">失踪的pl-翻译“狗”:“馅饼”(照片由<a class="ae kn" href="https://unsplash.com/@charlesdeluvio" rel="noopener ugc nofollow" target="_blank"> Charles Deluvio </a>在<a class="ae kn" href="https://unsplash.com/photos/_p-DIj5LJKc" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</p></figure><p id="81e7" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">根据i18next的配置，将显示一些其他值(例如，缺少值的键或来自后备语言的值)。在这两种情况下，用户体验将远远低于预期。</p></div><div class="ab cl lo lp hm lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ib ic id ie if"><h1 id="ec04" class="lv lw ii bd lx ly lz ma mb mc md me mf jo mg jp mh jr mi js mj ju mk jv ml mm bi translated">拯救打字稿</h1><p id="982f" class="pw-post-body-paragraph ko kp ii kq b kr mn jj kt ku mo jm kw kx mp kz la lb mq ld le lf mr lh li lj ib bi translated">多亏了TypeScript，才可能避免如此糟糕的体验。</p><figure class="jy jz ka kb gg kc fu fv paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fu fv jx"><img src="../Images/408c975ee4ec06df6d96d96ff820500d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HL-1LbtjF_hpP3nw"/></div></div><p class="kj kk fw fu fv kl km bd b be z dk translated">打字稿里的S代表超人？(图片由<a class="ae kn" href="https://unsplash.com/@eli_j" rel="noopener ugc nofollow" target="_blank"> Elias Castillo </a>在<a class="ae kn" href="https://unsplash.com/photos/7-ToFEHzMNw" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</p></figure><p id="3e13" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">首先，翻译文件必须保存为<code class="fe lk ll lm ln b">.ts</code> —而不是<code class="fe lk ll lm ln b">.json</code>。</p><p id="64af" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">然后我们可以用所有需要的键定义一个接口。但是，我觉得是多余的。</p><p id="ac54" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">假设英语是我们的默认语言选项，我们可以简单地定义所有的英语翻译，然后提取一种类型的<code class="fe lk ll lm ln b">en</code> -translation对象。</p><p id="1ad9" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">最后，我们可以使用提取的类型作为<code class="fe lk ll lm ln b">pl</code> -translation对象的类型，让TypeScript编译器处理任何缺失的翻译！</p><figure class="jy jz ka kb gg kc"><div class="bz ms l di"><div class="mt mu l"/></div><p class="kj kk fw fu fv kl km bd b be z dk translated">打字稿中的翻译</p></figure><p id="3747" class="pw-post-body-paragraph ko kp ii kq b kr ks jj kt ku kv jm kw kx ky kz la lb lc ld le lf lg lh li lj ib bi translated">感谢阅读！</p></div></div>    
</body>
</html>