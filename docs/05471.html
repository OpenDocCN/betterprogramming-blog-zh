<html>
<head>
<title>React MobX Stores With Private Fields</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用私有字段反应MobX存储</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-mobx-stores-with-private-fields-f2e9f9f31aac?source=collection_archive---------14-----------------------#2020-07-10">https://betterprogramming.pub/react-mobx-stores-with-private-fields-f2e9f9f31aac?source=collection_archive---------14-----------------------#2020-07-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c5d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您不想显示您商店的所有字段，该怎么办？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/311c37efa0cf41d6f9cd1e8153fe8987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6Z-pxFY2ZO7EXdiH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">何塞·丰塔诺在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e07a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MobX存储是观察React变化的强大工具。能够对任何字段做出反应并设置任何字段，而无需使用setter方法的样板文件，这是轻而易举的事情。</p><p id="1004" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果您不想暴露您的商店的所有字段，该怎么办呢？只需做一些更改，我们就可以成功隐藏您商店的一些字段。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0a9a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">非预期用例</h1><p id="342f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">考虑下面的例子(文章底部的runnable CodeSandbox示例！):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5c82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个代码代表一个可以递增和递减的计数器。看起来棒极了！但是有一个问题可能会潜入您团队的代码库。如果有人直接访问并更改<code class="fe nb nc nd ne b">count</code>怎么办？事实上，没有什么可以阻止你做以下事情:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="95b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于商店允许修改所有字段，我们现在允许您的团队直接修改我们计数器的计数，尽管这是我们不允许的用例。</p><p id="4a4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这个例子很简单，但是很容易看出，在某些情况下，您希望隐藏存储的内部结构，只允许通过特定的功能进行访问和操作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="abaa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">分离公共和私人领域</h1><p id="aed5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要分隔私有和公共存储字段，请使用以下模式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="787e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你的<code class="fe nb nc nd ne b">useCounterStore</code>钩子中，你维护一个拥有你所有私有字段的私有商店和一个实际上从你的<code class="fe nb nc nd ne b">useCounterStore</code>钩子返回的“面向公众”的商店。公共存储可以自由地访问和操作私有存储的字段，但是由于<code class="fe nb nc nd ne b">count</code>是公共存储中的一个getter函数，您将无法成功地执行<code class="fe nb nc nd ne b">count = 7</code>等。</p><p id="2dec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经成功地为您的商店<em class="nf">设置了一个健壮且易于使用的API，而</em>的私有字段不会被意外修改！🎉</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1647" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可运行的CodeSandbox示例</h1><p id="b129" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">以上所有要点都可以作为下面的可运行CodeSandbox示例获得。</p><h2 id="5d15" class="ng md it bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">基本计数器存储</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns na l"/></div></figure><h2 id="929b" class="ng md it bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">使用非预期用例的柜台商店</h2><p id="43d4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nb nc nd ne b">Set directly</code>按钮在我们不想让它工作的时候工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns na l"/></div></figure><h2 id="ec8d" class="ng md it bd me nh ni dn mi nj nk dp mm li nl nm mo lm nn no mq lq np nq ms nr bi translated">带私有字段的柜台商店</h2><p id="24ec" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nb nc nd ne b">Set directly</code>按钮不起作用！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns na l"/></div></figure></div></div>    
</body>
</html>