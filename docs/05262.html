<html>
<head>
<title>Build a Blog With GitHub and MkDocs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用GitHub和MkDocs建立一个博客</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-blog-with-github-and-mkdocs-cf47914affa7?source=collection_archive---------6-----------------------#2020-06-24">https://betterprogramming.pub/build-a-blog-with-github-and-mkdocs-cf47914affa7?source=collection_archive---------6-----------------------#2020-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4662" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在GitHub页面上免费发布你的Markdown博客</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fda2eedab0eb937f8fc3c013f793629f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vRAgmq_oGgzhJPdx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@beloriostudio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Belo Rio工作室</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="8091" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">建立和托管个人博客有很多选择。可以使用一个知名的博客平台，比如<a class="ae ky" href="https://makeawebsitehub.com/choose-right-blogging-platform/#wordpressorg" rel="noopener ugc nofollow" target="_blank"> WordPress </a>、<a class="ae ky" href="https://makeawebsitehub.com/choose-right-blogging-platform/#blogger" rel="noopener ugc nofollow" target="_blank"> Blogger </a>和<a class="ae ky" href="https://makeawebsitehub.com/choose-right-blogging-platform/#tumblr" rel="noopener ugc nofollow" target="_blank"> Tumblr </a>来托管你的博客。有了这个选项，你不需要担心维护博客的基础设施和博客平台。</p><p id="e0cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，你可以在一个云提供商上托管自己的博客。下面是一篇资料丰富的文章，描述了如何使用Ghost和DigitalOcean来完成这项任务:</p><div class="lv lw gp gr lx ly"><a href="https://myedes.io/ghost-on-docker/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">我如何在Docker上用Nginx和MariaDB运行我的Ghost博客</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">在这篇博文中，我将描述我是如何建立我的博客的:我一直想开一个我的个人博客…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">myedes.io</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="8b66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面提到的所有选项都有一些缺点:</p><ul class=""><li id="9086" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">你必须维护基础设施。</li><li id="3e2b" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">它不是免费的。</li><li id="04dc" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">编辑博客文章并不舒服(至少对我来说)。</li></ul><p id="593d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建博客主机的另一个选择是使用<a class="ae ky" href="https://pages.github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>。GitHub的这项服务提供了一种为单个项目存储库或GitHub组织/帐户构建静态网页的方法。在本文中，我们将一步一步地解释如何使用GitHub页面来托管个性化博客。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="fdbc" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak"> GitHub存储库设置</strong></h1><p id="5fec" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">使用GitHub托管您的个性化博客的第一步是在GitHub上创建和配置一个专用的存储库来托管博客文件。存储库名称应该采用以下模式:<code class="fe of og oh oi b">${account}.github.io</code>。</p><p id="16ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个存储库的主分支将被用作GitHub页面的静态文件的源。一旦实施了新的更改，这些文件将自动生成。因此，我们需要在存储库上创建另一个分支来存储博文文件的源。下图显示了如何在存储库中创建分支:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/04508c00bd7b51c567be7ecad5d006f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ngCUVOfpQt2T4Tb-hdAqlA.png"/></div></div></figure></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="df42" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak">管理博客内容</strong></h1><p id="801a" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">GitHub Pages旨在托管和服务组织存储库主分支上的静态页面。这意味着如果您将一个名为<code class="fe of og oh oi b">index.html</code>的HTML文件提交到存储库的主分支，它将被自动部署并显示到您的GitHub Pages地址。然而，我们的目标不是用HTML写博文(那样一点也不方便)。我们可以使用一个静态站点生成器来生成HTML文件，而不是等待HTML页面。</p><p id="daae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几个工具可以用来生成静态HTML文件，比如<a class="ae ky" href="https://vuepress.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> VuePress </a>、<a class="ae ky" href="https://jekyllrb.com/" rel="noopener ugc nofollow" target="_blank"> Jekyll </a>和<a class="ae ky" href="https://www.mkdocs.org/" rel="noopener ugc nofollow" target="_blank"> MkDocs </a>。这些工具允许我们将Markdown文件转换成HTML文件。在本文中，我将演示如何使用MkDocs来生成HTML静态文件。但是，也可以使用其他工具来执行相同的任务。下面是建立新的MkDocs项目所需的步骤。</p><ul class=""><li id="bb1f" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">在本地克隆存储库并签出源分支:</li></ul><pre class="kj kk kl km gt ok oi ol om aw on bi"><span id="109d" class="oo nj it oi b gy op oq l or os">$&gt; git clone ${repo_url}<br/>$&gt; cd ${repo_path}<br/>$&gt; git checkout -b source<br/></span></pre><ul class=""><li id="a023" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">创建新项目。可以使用<code class="fe of og oh oi b">mkdocs</code>命令行创建一个新项目，如下面的代码片段所示:</li></ul><pre class="kj kk kl km gt ok oi ol om aw on bi"><span id="6253" class="oo nj it oi b gy op oq l or os">$&gt; mkdocs new blog</span></pre><p id="5d02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的命令将创建如下文件，如下图所示(如果不想安装<code class="fe of og oh oi b">mkdocs</code>命令，可以手动创建这些文件):</p><p id="4b73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">→ <code class="fe of og oh oi b">mkdocs.yml</code>:项目配置文件</p><p id="e83f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">→ <code class="fe of og oh oi b">docs</code>:存储所有降价文件的文件夹</p><p id="3c96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">→ <code class="fe of og oh oi b">index.md</code>:包含<code class="fe of og oh oi b">index.html</code>文件内容的Markdown</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/6865245948b7dd80b9db617f0bcdc266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*8o6zO_ZmMSzP9cmyw_EqpQ.png"/></div></figure><p id="d4fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认配置文件只包括站点名称配置。但是，还有其他几种配置可以添加到该文件中，例如:</p><ul class=""><li id="1a60" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">站点全局配置，如名称、描述和作者</li><li id="fbae" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">用于生成静态文件的主题</li><li id="7e0a" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">额外资产，如CSS文件或JavaScript文件</li><li id="6b58" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">插件和降价扩展</li><li id="8302" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">站点树或导航栏</li></ul><p id="4989" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是配置文件的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="3589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在本地提供和显示静态文件，您可以执行下面的命令，并且您将能够在本地主机的端口8080上查看站点:</p><pre class="kj kk kl km gt ok oi ol om aw on bi"><span id="ebdf" class="oo nj it oi b gy op oq l or os">$&gt; mkdocs serve</span></pre></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="3dbe" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak">将解决方案归档</strong></h1><p id="3ec6" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">因为我不想在本地安装<code class="fe of og oh oi b">mkdocs</code>,并且我计划在博客上自动生成和部署新的变更，所以我决定实现以下操作:</p><ul class=""><li id="82d1" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">使用Docker生成静态文件:通过引入包含<code class="fe of og oh oi b">mkdocs</code>命令行的Docker映像并使用Docker卷来获得生成文件的副本，就可以简单地完成这个任务。下面的Docker文件可用于构建Docker映像。这个映像基本上是一个alpine Docker映像，它包含了<code class="fe of og oh oi b">mkdocs</code>所需的所有库(在requirements.txt中定义):</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="defd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用下面的Docker命令，我们可以构建Docker映像并在<code class="fe of og oh oi b">site</code>文件夹中生成静态文件:</p><pre class="kj kk kl km gt ok oi ol om aw on bi"><span id="43bc" class="oo nj it oi b gy op oq l or os">$&gt; docker build -t mkdocs-image .<br/>$&gt; docker run --rm -v $(CURDIR):/mkdocs mkdocs-image  sh -c "mkdocs build &amp;&amp; chown -R $(shell id -u):$(shell id -g) ./site"</span></pre><ul class=""><li id="4fae" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">在部署之前验证和lint Markdown:为了完成这个任务，我们可以使用<a class="ae ky" href="https://github.com/DavidAnson/markdownlint" rel="noopener ugc nofollow" target="_blank"> markdownlint </a>静态分析器。下面的shell脚本可用于检查和验证<code class="fe of og oh oi b">docs</code>文件夹下的所有降价文件:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="f39d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为限制过程也需要使用Docker容器来完成，所以我们需要使用一个定制的Docker映像，它包括<a class="ae ky" href="https://github.com/DavidAnson/markdownlint" rel="noopener ugc nofollow" target="_blank"> markdownlint </a>命令行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="574f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用下面的命令，我们可以触发林挺脚本:</p><pre class="kj kk kl km gt ok oi ol om aw on bi"><span id="49dd" class="oo nj it oi b gy op oq l or os">$&gt; docker build -t linting-image .<br/>$&gt; docker run --rm -v $(CURDIR):/app linting-image /lint.sh</span></pre><p id="d15b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使命令的执行更容易、更舒适，我们可以使用下面的Makefile，它包含了前面提到的所有命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="d3ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用上面的Makefile，可以使用下面的命令来生成和验证静态文件:</p><pre class="kj kk kl km gt ok oi ol om aw on bi"><span id="12ea" class="oo nj it oi b gy op oq l or os">$&gt; make docs</span></pre></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="e431" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak">自动化博客的部署</strong></h1><p id="36bb" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">最后一项任务是自动部署到GitHub页面，而不是手动生成静态文件并将其推送到主分支。这个任务在GitHub Actions的帮助下可以轻松完成。在部署期间，需要执行以下操作:</p><ul class=""><li id="4934" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">执行<code class="fe of og oh oi b">make docs</code>生成静态文件的最新副本。</li><li id="7683" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">将生成的文件推送到GitHub存储库的主分支。</li></ul><p id="30f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的GitHub流程在每次<code class="fe of og oh oi b">source</code>分支自动更新时触发这些动作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="b145" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak">使用自定义域名</strong></h1><p id="c384" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">我不想使用GitHub域名，而是想在我的个人域名上使用一个子域。可以使用以下操作来完成此任务:</p><ul class=""><li id="f341" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">在GitHub存储库上设置一个自定义域，如下图所示:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/dfa60def8069319f6f58e9a23148ae18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Q7ev2zEtL6bzh34qdX4UA.png"/></div></div></figure><ul class=""><li id="8ce4" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">添加CNAME DNS记录，将流量从自定义域重定向到GitHub域，如下图所示:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/c99ce680ec01f39da5e90847f27906ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekNS2s-ir9tt5OnboDFTrQ.png"/></div></div></figure></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="bc73" class="ni nj it bd nk nl nm nn no np nq nr ns jz nt ka nu kc nv kd nw kf nx kg ny nz bi translated"><strong class="ak">结论</strong></h1><p id="e5a7" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li oc lk ll lm od lo lp lq oe ls lt lu im bi translated">有几个选择来托管和建立个人博客。本文强调了其中一个选项。它依赖于GitHub页面和一个静态站点生成器(<code class="fe of og oh oi b">mkdocs</code>)。</p><p id="4fbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢这种方法，原因如下:</p><ul class=""><li id="8c94" class="mn mo it lb b lc ld lf lg li mp lm mq lq mr lu ms mt mu mv bi translated">博客文章使用Markdown格式编写，编辑和修改非常容易。</li><li id="3c02" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">博客文章被持久化并存储在版本控制和Git中。</li><li id="88f5" class="mn mo it lb b lc mw lf mx li my lm mz lq na lu ms mt mu mv bi translated">博客的部署是自动完成的。</li></ul><p id="838b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我博客的完整实现可以在GitHub 上找到<a class="ae ky" href="https://github.com/wshihadeh/wshihadeh.github.io" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>