<html>
<head>
<title>Unit and Measurement in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的单位和度量</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/unit-and-measurement-in-swift-7c6be4a25586?source=collection_archive---------8-----------------------#2020-03-15">https://betterprogramming.pub/unit-and-measurement-in-swift-7c6be4a25586?source=collection_archive---------8-----------------------#2020-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ade" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何以类型安全的方式使用和转换单位</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b2bddf8a4b640dc269afb39fb4b06124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Ge4cDjyewYJJD5nyQCVQw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://unsplash.com/photos/WahfNoqbYnM" rel="noopener ugc nofollow" target="_blank"> unsplash </a>的<a class="ae ky" href="https://unsplash.com/@wwarby" rel="noopener ugc nofollow" target="_blank"> William Warby </a>。</p></figure><p id="a72b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当我们在应用程序中处理测量数据，需要将一个单位转换成另一个单位时(例如，英制单位如英寸转换成公制单位如米)，我们可以自己编写转换程序。然而，这可能变得非常复杂并且容易出错。</p><p id="e8a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，Apple通过提供一个名为<code class="fe lv lw lx ly b">Measurement</code>的结构，提供了一种处理单位、度量及其转换的便捷方式。度量包含一个值和一个单位，并且可以转换为相同维度的其他单位。</p><p id="8368" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探讨Swift的<code class="fe lv lw lx ly b">Dimension</code>、<code class="fe lv lw lx ly b">Unit</code>和<code class="fe lv lw lx ly b">Measurement.</code>，为此，我们将首先了解它们是什么以及它们如何协同工作。接下来，我们将看看如何使用它们来表示和转换测量值。最后，我们将探索如何创建我们自己的定制单位和尺寸。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b12c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">概观</h1><p id="d9c9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">让我们先来看看<code class="fe lv lw lx ly b">Unit</code>、<code class="fe lv lw lx ly b">Dimension</code>和<code class="fe lv lw lx ly b">Measurement</code>是如何协同工作的。</p><h2 id="8770" class="nd mh it bd mi ne nf dn mm ng nh dp mq li ni nj ms lm nk nl mu lq nm nn mw no bi translated">单位</h2><ul class=""><li id="5833" class="np nq it lb b lc my lf mz li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">Unit</code>类表示一个单元，它有一个称为<code class="fe lv lw lx ly b">symbol</code>的字符串来描述它。</li><li id="dba3" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">是<code class="fe lv lw lx ly b">Dimension</code>的基类。</li></ul><h2 id="1bb5" class="nd mh it bd mi ne nf dn mm ng nh dp mq li ni nj ms lm nk nl mu lq nm nn mw no bi translated">尺寸</h2><ul class=""><li id="c03f" class="np nq it lb b lc my lf mz li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">Dimension</code>类继承自<code class="fe lv lw lx ly b">Unit</code>。</li><li id="5b8f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">它有多个子类，每个子类代表一个不同的维度(例如<code class="fe lv lw lx ly b">UnitAcceleration</code>、<code class="fe lv lw lx ly b">UnitDuration</code>和<code class="fe lv lw lx ly b">UnitLength</code>)。</li><li id="e2ab" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">这些子类中的每一个都定义了一个基本单位和多个附加单位，它们可以通过使用<code class="fe lv lw lx ly b">UnitConverter</code>转换成相同尺寸的其他单位。</li><li id="f078" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">UnitConverter</code>类有一个子类<code class="fe lv lw lx ly b">UnitConverterLinear</code>，它包含一个系数和一个常数，用于将维度单位转换为其基本单位。</li><li id="840b" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">例如，<code class="fe lv lw lx ly b">UnitLength</code>有符号为<em class="od"> m </em>的基本单位<code class="fe lv lw lx ly b">.meters</code>，也有符号为<em class="od"> km </em>的单位<code class="fe lv lw lx ly b">.kilometers</code>。<code class="fe lv lw lx ly b">UnitConverterLinear</code>的系数为1000，常数为0，因为1000米等于1公里。</li><li id="e919" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">所有dimension子类的列表可以在<a class="ae ky" href="https://developer.apple.com/documentation/foundation/dimension" rel="noopener ugc nofollow" target="_blank">苹果的文档</a>中找到。</li></ul><h2 id="3922" class="nd mh it bd mi ne nf dn mm ng nh dp mq li ni nj ms lm nk nl mu lq nm nn mw no bi translated">尺寸</h2><ul class=""><li id="5cbe" class="np nq it lb b lc my lf mz li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">Measurement</code>结构将一个双精度值和一个单元包装在一起。</li><li id="0a2f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">支持<code class="fe lv lw lx ly b">!=</code>、<code class="fe lv lw lx ly b">==</code>、<code class="fe lv lw lx ly b">&lt;</code>、<code class="fe lv lw lx ly b">&lt;=</code>、<code class="fe lv lw lx ly b">&gt;</code>、<code class="fe lv lw lx ly b">&gt;=</code>同一个单元的两个测量值之间的比较。</li><li id="8455" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">您可以使用<code class="fe lv lw lx ly b">...</code>和<code class="fe lv lw lx ly b">..&lt;</code>运算符构建范围。</li><li id="092f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">使用<code class="fe lv lw lx ly b">+</code>和<code class="fe lv lw lx ly b">-</code>可以增加或减少同一装置的两个测量值。</li><li id="81de" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">使用<code class="fe lv lw lx ly b">*</code>和<code class="fe lv lw lx ly b">/</code>可以将测量值乘以或除以一个双数值。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9bd8" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用</h1><p id="68f1" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在我们知道了我们可以使用的工具，让我们看看如何在实践中使用它们。这里有两个简单的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><ul class=""><li id="935c" class="np nq it lb b lc ld lf lg li og lm oh lq oi lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 1</code> —我们可以通过调用它的初始化器并传入一个值和一个单位来创建一个新的度量。在这里，我们创建了一个代表一升的度量单位。</li><li id="d15c" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 2</code> —将该测量值转换为尺寸相同但单位不同的测量值就像调用<code class="fe lv lw lx ly b">converted(to:)</code>一样简单。在本例中，我们将之前的升测量值转换为毫升。</li><li id="390a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 3</code> —每个维度都一样。这是另一个例子，我们首先创建一个度数，然后将其转换为弧度。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6ef6" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">创建自定义单位</h1><p id="64d5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">但是我们可以更进一步。有些情况下，我们可能需要一个不属于标准尺寸的单元。在这些情况下，我们可以创建一个新的定制单元。Apple推荐两种创建自定义单元的方法。</p><h2 id="b84b" class="nd mh it bd mi ne nf dn mm ng nh dp mq li ni nj ms lm nk nl mu lq nm nn mw no bi translated">1.创建新单位作为现有维度的实例</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><ul class=""><li id="1f35" class="np nq it lb b lc ld lf lg li og lm oh lq oi lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 1</code> —我们可以通过使用我们想要添加新单元的维度的初始化器来创建现有维度的新实例。我们需要为新单位提供一个符号，并提供一个转换器将其转换为基本单位。在这个例子中，我们调用<code class="fe lv lw lx ly b">UnitLength(symbol:converter:)</code>来创建维度长度的新实例，我们称之为<code class="fe lv lw lx ly b">customLenghtUnit</code>。我们传入一些字符串作为它的符号，并通过创建一个新的系数为2.0的<code class="fe lv lw lx ly b">UnitConverterLinear</code>来定义转换。这意味着无论何时该单位的测量值被转换为基本单位，在尺寸长度的情况下是<code class="fe lv lw lx ly b">.meters</code>，它将被乘以2。</li><li id="7b69" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 2</code> —我们可以使用该单位创建新的测量。</li><li id="c6f7" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 3</code> —这种测量可以像使用标准装置一样使用。</li></ul><h2 id="64e7" class="nd mh it bd mi ne nf dn mm ng nh dp mq li ni nj ms lm nk nl mu lq nm nn mw no bi translated">2.扩展现有维度</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><ul class=""><li id="fdfc" class="np nq it lb b lc ld lf lg li og lm oh lq oi lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 1</code> —添加单元的另一种方式是扩展现有的尺寸。在这里，我们添加了一个扩展维度<code class="fe lv lw lx ly b">UnitIlluminance</code>来表示照射在特定区域的光量。</li><li id="e4b6" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 2</code> —这个维度只容纳单位<code class="fe lv lw lx ly b">lux</code>，但还有一个单位叫<code class="fe lv lw lx ly b">foot-candle</code> —没错，这个<a class="ae ky" href="https://en.wikipedia.org/wiki/Foot-candle" rel="noopener ugc nofollow" target="_blank">真的存在</a>。当然，我们的应用程序中需要这个单元！我们可以通过声明一个静态变量将它添加到维度中，就像前面一样，传入一个符号和一个转换器。一个<code class="fe lv lw lx ly b">foot-candle</code>等于10.76个<code class="fe lv lw lx ly b">lux</code>。因此，转换器使用该系数。</li><li id="dc9d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 3</code> —同样，这个新单位可用于创建和转换测量值。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a057" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">创建自定义维度</h1><p id="a1a9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">也可以通过创建一个新的子类来创建一个全新的维度。这里有一个苹果文档中使用的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><ul class=""><li id="e1b6" class="np nq it lb b lc ld lf lg li og lm oh lq oi lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 1</code> —放射性没有标准维度，但是我们可以通过创建<code class="fe lv lw lx ly b">Dimension</code>的新子类来添加一个维度。</li><li id="83dc" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 2</code> —接下来，我们需要定义这个维度的单位。这里，我们添加了<code class="fe lv lw lx ly b">becquerel</code>(将用作基本单位，因此转换器的系数为1.0)和<code class="fe lv lw lx ly b">curie</code>单位。</li><li id="24d5" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">// 3</code> —最后，我们需要通过为<code class="fe lv lw lx ly b">baseUnit</code>属性提供一个值来定义这个新维度的基本单位。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="08e5" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="8c9f" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">正如我们在本文中看到的，Swift提供了一种简单易用且功能强大的方法，以类型安全的方式定义、使用和转换度量。</p><p id="b6ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于目前有21个内置维度，总共约有200个单元，这对大多数应用程序来说已经足够了。但是正如我们已经看到的，也有可能定义和添加特殊的单位，甚至全新的维度。</p><p id="5f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="96ef" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">资源</h1><div class="oj ok gp gr ol om"><a href="https://developer.apple.com/documentation/foundation/units_and_measurement" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">单位和测量</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">用物理尺寸标注数字量，以允许区域设置格式和相关…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">developer.apple.com</p></div></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://developer.apple.com/documentation/foundation/dimension#1965627" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">尺寸</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">基础框架为许多最常见的物理单元类型提供了具体的子类。每个…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">developer.apple.com</p></div></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://www.hackingwithswift.com/example-code/system/how-to-convert-units-using-unit-and-measurement" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">如何使用单位和度量来转换单位</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">Swift版本:5.1 Paul Hudson @twostraws iOS 10引入了一个新的计算距离、长度、面积的系统…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">www.hackingwithswift.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://en.wikipedia.org/wiki/Foot-candle" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">英尺－烛光</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">英尺烛光(有时英尺烛光；缩写为fc，，有时也叫ft-c)是照度或光的非国际单位制单位…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">en.wikipedia.org</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>