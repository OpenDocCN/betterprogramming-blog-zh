<html>
<head>
<title>Run a Free VPN Server on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS上运行免费的VPN服务器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/run-a-free-vpn-server-on-aws-e8a6c1c153a?source=collection_archive---------2-----------------------#2022-11-15">https://betterprogramming.pub/run-a-free-vpn-server-on-aws-e8a6c1c153a?source=collection_archive---------2-----------------------#2022-11-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="31e2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">设置运行OpenVPN服务器的EC2实例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/de1dd143ebbdc34918c62e4b6f2f4996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Za8EYitoDbYjaIaT.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="https://unsplash.com/@privecstasy" rel="noopener ugc nofollow" target="_blank">prive visuals</a>on<a class="ae ky" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a></p></figure><p id="9dd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS在其核心服务中内置了一个令人敬畏的防火墙，可以很容易地用来确保只有某些端口对外界开放。我们可以采取的一个额外步骤是运行一个VPN服务器，作为我们受保护的AWS资源(如EC2、RDS等)的网关。</p><p id="4574" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以通过撤销通过VPN服务器的访问来关闭对AWS资源的直接访问。如果您需要撤销前雇员的访问权限，这非常有用。</p><p id="6ac0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS现在提供了一个<a class="ae ky" href="https://aws.amazon.com/vpn/" rel="noopener ugc nofollow" target="_blank">托管VPN服务</a>，但是这项服务每月至少要花费72美元，当你的VPN服务大量流量的时候甚至会更贵。许多较小的组织不需要托管服务的所有功能，只需花费EC2实例的成本就可以运行他们自己的VPN服务器。您甚至可以使用免费层，这样第一年就不必为EC2实例支付任何费用。</p><h1 id="7da3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第一步。创建VPN安全组</h1><p id="0e6b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">概述:安全组允许您的服务器在私有云中相互通信，同时向外界公开特定端口。我们将创建一个安全组来允许VPN访问我们的VPN服务器。我们将假设您的所有其他AWS资源都是默认安全组的成员，并且默认安全组不允许来自外界的访问。</p><p id="df52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ms mt mu mv b"><a class="ae ky" href="https://aws.amazon.com" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com</a></code>登录，在搜索框中输入EC2，点击目标进入EC2仪表盘。</p><p id="c4ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从EC2仪表板中，单击安全组:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/37d50d0822f0636afe8c9d415658195c.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/0*m8T7ROjtvGOAJa2A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="b757" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击创建安全组:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/ec671fadae9895b2e33090e800e5cb60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o4P47rvUoDnCv63c.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="e34c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入VPN的名称和描述，并在端口<code class="fe ms mt mu mv b">22</code>、<code class="fe ms mt mu mv b">443</code>、<code class="fe ms mt mu mv b">943</code>和<code class="fe ms mt mu mv b">1194</code>上指定以下入站规则。</p><p id="0863" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>:端口<code class="fe ms mt mu mv b">1194</code>的协议是UDP。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/ec6a738dac5a34e8abc942fe5e9c3ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Cor7U0ocX4OTW1cJ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="8913" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>:如果您的团队使用的IP地址是静态的，您可以通过在您的规则源中指定一个IP地址范围来增加另一层安全性。但是，如果您希望您的团队能够从任何IP进行连接，您会希望让源代码在任何地方都是开放的，因为他们可能在酒店、家里、咖啡馆等地方工作。</p><h1 id="50f5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第二步。创建EC2实例</h1><p id="9ed7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">返回EC2仪表板，然后单击启动实例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/f68e948ddec9bd844febf52c3fc872f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pgGA0NZ9wImAwN7r.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="9624" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择Ubuntu(当然，你可以选择几乎任何其他运行OpenVPN的操作系统，但本教程是为Ubuntu量身定制的)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/31e0e5f47a441d6ef365b1ef0c5a87c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Lgf6aBmsbzzCo6Uq.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="15a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择t2.micro:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/bf9c10f5aee832ca30e8789126e3a537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mNqOknCiDbn2MJHX.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="9047" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>:您可以使用nano实例代替micro实例，但是nano实例不符合自由层的条件。</p><p id="2317" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在网络设置部分，选择您的默认VPC并禁用自动分配公共IP选项。然后，选择您的默认安全组和您在上面为VPN创建的安全组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/ec3128f0ab1cb292d8d21dd4109d4f25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SDlHU4TDZqRTFMnR.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="2acf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击启动实例</p><h1 id="f9aa" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第三步。禁用源/目标检查</h1><p id="d2fc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">从实例列表中，选择VPN实例，然后从下拉菜单中选择操作-&gt;网络-&gt;更改源/目标检查。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/ffc88ba602349091e88a99acda315bc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9hVX-QxjXkrZwjNu.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="e2c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择停止，然后单击保存。这是必要的，否则，您的VPN服务器将无法连接到您的其他AWS资源。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/ed7e9017bdf7a090b2655b13606ea8ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3lstY8Fw_pMLTav0.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><h1 id="6995" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第四步。创建一个弹性IP地址</h1><p id="1e72" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">概述:当EC2实例停止并重新启动时，公共IP地址会发生变化。我们希望VPN服务器的IP地址保持静态，所以我们将使用弹性IP地址。</p><p id="dfbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从E2C控制面板中，选择弹性IPs:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/b82d84eb3a0163e0ee76511147849dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/0*JxI02OsM0bSDVxfg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="a804" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击分配弹性IP地址:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/ffaf6c5c77877132b3f7a08854328c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z5dBp-kSnNlATUk1.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="b5b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记下您的新弹性IP地址，因为这将是您的VPN服务器的公共IP地址。我们稍后将这个地址称为<code class="fe ms mt mu mv b">PUBLIC-IP-OF-VPN-SERVER</code>。</p><p id="c13a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择您刚刚创建的IP地址，然后单击关联弹性IP地址:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/5136f00dd2878f0b70df4a5b20f29945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PxVdiaBe1o5n4JvD.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="e5ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，选择弹性IP，并从下拉菜单中单击关联地址。</p><p id="41da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择您在上面创建的EC2实例，然后单击“关联”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/c3d8ec68ed59d42129c7165ba93bb2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3lBz-_p_Ym5U0ac4.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><h1 id="94a5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第五步。安装和配置OpenVPN服务器</h1><p id="8f8d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">SSH到您的VPN服务器:</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="50b3" class="nn lw it mv b be no np l nq nr">$ ssh ubuntu@PUBLIC-IP-OF-VPN-SERVER</span></pre><p id="151e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载我们的助手脚本并设置默认配置:</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="cd73" class="nn lw it mv b be no np l nq nr">$ git clone https://github.com/redgeoff/openvpn-server-vagrant<br/>$ cd openvpn-server-vagrant<br/>$ cp config-default.sh config.sh</span></pre><p id="57fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编辑<code class="fe ms mt mu mv b">config.sh</code>并输入您的配置。注意:<code class="fe ms mt mu mv b">PUBLIC_IP</code>应该等于您在上面创建的弹性IP地址。</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="c87c" class="nn lw it mv b be no np l nq nr">$ nano config.sh</span></pre><p id="ddda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">切换到根目录:</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="edcf" class="nn lw it mv b be no np l nq nr">$ sudo su -</span></pre><p id="0989" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你现在要更新Ubuntu了。</p><p id="e4b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注:系统会提示您几次，当您提示时，请按<code class="fe ms mt mu mv b">Enter</code>键。</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="757c" class="nn lw it mv b be no np l nq nr">$ /home/ubuntu/openvpn-server-vagrant/ubuntu.sh</span></pre><p id="4b8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，安装OpenVPN。</p><p id="0344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:你会被提示几次，当你这样做时，按<code class="fe ms mt mu mv b">Enter</code>键。</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="d277" class="nn lw it mv b be no np l nq nr">$ /home/ubuntu/openvpn-server-vagrant/openvpn.sh</span></pre><p id="89a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，OpenVPN服务器正在运行。</p><h1 id="a241" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第六步。添加路线</h1><p id="74af" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">必须将路由添加到服务器，以便您小组的客户端知道将哪些流量路由到VPN服务器。</p><p id="ddbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过返回到EC2实例列表，单击一个目标实例，并识别私有IP来确定正确的子网。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/7207ece31b0369cf4a1191b28b3f5f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*psOPbDkVKltevOR9.png"/></div></div></figure><p id="bae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的网络将是私有IP的前两部分，并附加零，例如<code class="fe ms mt mu mv b">172.31.0.0</code>。</p><p id="f723" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在VPN服务器上，编辑<code class="fe ms mt mu mv b">/etc/openvpn/server/server.conf</code>并添加如下内容:</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="6819" class="nn lw it mv b be no np l nq nr">push "route 172.31.0.0 255.255.0.0"</span></pre><p id="7c65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，使用以下命令重新启动VPN服务器:</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="d9ea" class="nn lw it mv b be no np l nq nr">$ systemctl restart openvpn-server@server.service</span></pre><h1 id="3f13" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第七步。授予访问您的VPN的权限</h1><p id="393b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">注意:我们假设您仍然通过SSH登录到VPN，并以root用户身份登录。</p><p id="4a6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行以下命令，并确保将下面的<code class="fe ms mt mu mv b">client</code>替换为您的用户/客户端的唯一名称。</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="435b" class="nn lw it mv b be no np l nq nr">$ /home/ubuntu/openvpn-server-vagrant/add-client.sh client</span></pre><p id="d18f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您将在以下位置找到配置文件</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="175f" class="nn lw it mv b be no np l nq nr">~/client-configs/files/client-name.ovpn</span></pre><p id="bc89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要将此文件提供给团队中连接到VPN的个人。SCP下载这个很方便。来自vpn服务器的ovpn文件。</p><p id="ca24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的团队可以使用各种VPN客户端，比如<a class="ae ky" href="https://tunnelblick.net/" rel="noopener ugc nofollow" target="_blank"> Tunnelblick </a> (OS X)和<a class="ae ky" href="https://openvpn.net/community-downloads/" rel="noopener ugc nofollow" target="_blank"> OpenVPN </a> (Linux、iOS、Android和Windows)。安装其中一个客户端后，他们应该能够通过双击。ovpn文件。</p><p id="4bfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:一旦连接到VPN，您的用户将希望使用您的AWS资源的私有IP。您可能希望使用nslookup从AWS提供的AWS自定义域名中查找IP地址。您可能希望使用Route 53来创建路由到私有IP的子域记录。</p><h1 id="e068" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">第八步。撤销对您的VPN的访问</h1><p id="b263" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">注意:我们假设您仍然通过SSH登录到VPN，并以root用户身份登录。</p><p id="64b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行以下命令，并确保用您的用户/客户端的唯一名称替换下面的<code class="fe ms mt mu mv b">client</code>。</p><pre class="kj kk kl km gt nj mv nk bn nl nm bi"><span id="3ea4" class="nn lw it mv b be no np l nq nr">$ /home/ubuntu/openvpn-server-vagrant/revoke-full.sh client</span></pre><h1 id="7b94" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">解决纷争</h1><p id="e1bc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果您的VPN客户端报告TLS握手失败错误，那么这很可能是因为您的VPN安全组(步骤1)不正确。确保您指定了正确的端口和协议——一个常见的问题是没有为端口<code class="fe ms mt mu mv b">1194</code>指定UDP。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="5687" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oa">原载于2022年11月15日https://redgeoff.com</em><em class="oa"/><a class="ae ky" href="https://redgeoff.com/posts/free-vpn-aws-2022/" rel="noopener ugc nofollow" target="_blank"><em class="oa">。</em></a></p></div></div>    
</body>
</html>