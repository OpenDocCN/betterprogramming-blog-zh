<html>
<head>
<title>6 Ways to Set a Value for a Variable in SwiftUI 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI 2中设置变量值的6种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/6-ways-to-set-a-value-for-a-variable-in-swiftui-2-5296f7648d3f?source=collection_archive---------0-----------------------#2020-10-09">https://betterprogramming.pub/6-ways-to-set-a-value-for-a-variable-in-swiftui-2-5296f7648d3f?source=collection_archive---------0-----------------------#2020-10-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="19df" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在SwiftUI 2中设置方法中的值</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/195e191602d05d2838a293fb909d3aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MM1ku4B_DGH5mcoJ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@popnzebra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Pop &amp;斑马</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="1787" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你需要向一个外星人解释一个应用程序是什么，你可以简单地说它是一个控制语句的集合，它改变了变量中的一组值。当然，事情远不止如此。还是有？在最底层的编码(也称为汇编程序)，它只是:一个控制语句体管理一个变量块。</p><p id="18e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着编程语言几十年来的发展，我们已经有了一个字典，用不同的方法来组织我们的代码，包括控件、构造和元数据。编码中的构造，如包、类、结构、函数、方法和变量的元数据，如类型、范围和访问权限。</p><p id="034a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用Swift中的经典“Hello world”应用程序来完成一些示例。我们有什么选择？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="7b64" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">选项1</h1><p id="db3d" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">这里的变量是字符串<code class="fe nb nc nd ne b">Hello World</code>。当然，它还不是一个变量。但我们可以做到这一点，并在这个过程中变得有条理。在SwiftUI中，您可以设置到变量的绑定，然后在调用包含链接的结构时将其命名为参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选项1</p></figure><p id="a720" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是可行的，但是扩展性不好。试着给你的代码添加一打参数，它会很快变得不可读。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="4799" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">选项2</h1><p id="5ffc" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我如何用更多的值做到这一点，并保持它的可读性？一个可能的解决方案是将我们的字符串转换成一个结构。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选项2</p></figure><p id="874c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很好，因为对方法的调用仍然简短易读。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="d813" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">选项3</h1><p id="f55f" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">另一种选择是使用Combine框架。看起来像这样。我们仍然有一个参数，但是我们把它从调用中分离出来，使代码更易读。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选项3</p></figure><p id="918f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，虽然我们回到这里设置一个单独的字符串，但是没有什么可以阻止它成为一个结构。它会以同样的方式工作。你只需要多个发布者或者发布者本身是一个结构。该解决方案如下所示:</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="1db5" class="nj mf it ne b gy nk nl l nm nn">struct message {<br/>  var code: Int<br/>  var message: String<br/>}</span><span id="ccdf" class="nj mf it ne b gy no nl l nm nn">var setGreet = PassthroughSubject&lt;message,Never&gt;()</span></pre></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="6fca" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">选项4</h1><p id="4e13" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">你可以通过像<code class="fe nb nc nd ne b">@appdefaults</code>这样的外部来源阅读你的问候，现在在SwiftUI 2.0中它被称为。或者你甚至可以使用iCloud，尽管你需要考虑到它会更慢的事实。在我们的情况下，它不会工作得很好。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选项4</p></figure><p id="50a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这看起来简单，好，干净。但是等等，这不是全局变量(编码的大坏狼)吗？小心使用。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="0675" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated"><strong class="ak">选项5 </strong></h1><p id="cc52" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">你可以用一个被观察的物体。这是一个不断被监控的状态变量，可以保存在一个singleton中。这是一个很好的解决方案，因为它看起来确实是自文档化的。同样，没有什么可以阻止你向这个结构中添加更多的变量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选项5</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="9269" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">选项6</h1><p id="5853" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">最后，SwiftUI 2.0的新功能是使用<code class="fe nb nc nd ne b">onChange</code> viewModifier。现在，我知道我们又用一个参数兜了一圈，但是这个解决方案的美妙之处在于，所有的文本都包含在视图中，并通过代码引用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选项6</p></figure><p id="9d47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我可以想象一个场景，代码属于应用程序中的错误，调用这个方法将它们转换成更有意义的消息。</p><p id="eb9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，您可以将其中一些组合成一个混合解决方案(比如选项5和选项6)。我没有这样做——我会把它作为家庭作业。这就把我带到了文章的结尾。希望你觉得有用。</p><p id="6427" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>