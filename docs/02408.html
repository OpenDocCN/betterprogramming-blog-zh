<html>
<head>
<title>How To Check for an Undefined/Null/Empty String</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何检查未定义/Null/空字符串</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-check-for-an-undefined-null-empty-string-2b67f627d888?source=collection_archive---------5-----------------------#2019-11-28">https://betterprogramming.pub/how-to-check-for-an-undefined-null-empty-string-2b67f627d888?source=collection_archive---------5-----------------------#2019-11-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="68b9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">确定什么是有效的，并使用duck-typing来检查所有三个</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d6b1b9a7e084b54af9f6b5a0545f22af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4jo80eJB-e9UEY6pVWHdw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aaronburden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">亚伦·伯顿</a>在<a class="ae ky" href="https://unsplash.com/s/photos/three?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ed4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">验证数据时的一个常见任务是确保一个应该是字符串的变量具有有效值。在填写表单的上下文中，这通常意味着用户输入了一个值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="621f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">每种类型之间的差异</h1><p id="463b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们首先澄清这样一个事实:未定义的字符串、空字符串和空字符串是相似的，但最终是不同的。</p><h2 id="42c9" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">未定义</strong></h2><p id="c0c2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">解释这种状态最简单的方法是将变量视为不存在或未声明。</p><p id="827c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您试图打印尚未声明的变量<code class="fe nl nm nn no b">a</code>，您将收到错误<code class="fe nl nm nn no b">ReferenceError: a is not defined</code>。类似地，初始化变量的数据类型是“未定义的”。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="94fd" class="mz md it no b gy nt nu l nv nw">console.log(a); // <!-- -->ReferenceError: a is not defined</span><span id="23bb" class="mz md it no b gy nx nu l nv nw">let b;<br/>console.log(b); // undefined</span><span id="3e68" class="mz md it no b gy nx nu l nv nw">console.log(typeof a); // "undefined"<br/>console.log(typeof b); // "undefined"</span></pre><h2 id="d5e7" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">空值</strong></h2><p id="f2b2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">与undefined不同，标识符确实存在；然而，它没有任何价值。</p><p id="1795" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道，这很奇怪，因为这个值实际上是<code class="fe nl nm nn no b">null</code>。两者颇为相似，但说到底，做一个严格的比较，就能看出两者的不同。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="5f7b" class="mz md it no b gy nt nu l nv nw">let a;<br/>console.log(a); // undefined<br/>console.log(a == null); // true<br/>console.log(a === null); // false</span></pre><h2 id="5630" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">空字符串</strong></h2><p id="1759" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一个数据类型为<code class="fe nl nm nn no b">“string”</code>但内部没有任何字符数据的变量。</p><p id="dd0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">空字符串是有效的字符串；然而，从功能上来说，如果它是空的，那么它做不了什么，而且当需要字符数据时，它经常会引起问题。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="cf7a" class="mz md it no b gy nt nu l nv nw">let a = "";</span><span id="cade" class="mz md it no b gy nx nu l nv nw">console.log(typeof a); // "string"</span><span id="61fb" class="mz md it no b gy nx nu l nv nw">// trying to capitalize the first letter<br/>a = a[0].toUpperCase() + a.slice(1);<br/>// "TypeError: Cannot read property 'toUpperCase' of undefined</span></pre><p id="103e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，当我们比较所有三个变量时，每个变量状态都是不同的。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="f119" class="mz md it no b gy nt nu l nv nw">let a;<br/>let b = null;<br/>let c = "";</span><span id="c5b4" class="mz md it no b gy nx nu l nv nw">console.log(a == b);  // true<br/>console.log(a == c);  // false<br/>console.log(b == c);  // false</span><span id="2870" class="mz md it no b gy nx nu l nv nw">console.log(a === b); // false<br/>console.log(a === c); // false<br/>console.log(b === c); // false</span></pre><p id="a521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经阐明了每个状态，我们需要问这样一个问题:“空字符串是无效值吗？”根据答案有两种解决方案。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="004c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">空字符串无效</h1><p id="a34d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在空字符串无效的情况下——意味着我们不想接受它，或者我们必须优雅地处理它——那么我们能够利用鸭式输入将这三种状态视为等价。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="e7df" class="mz md it no b gy nt nu l nv nw">let a;<br/>let b = null;<br/>let c = "";</span><span id="8ab5" class="mz md it no b gy nx nu l nv nw">if(a) { console.log("Valid"); } // does not print<br/>if(b) { console.log("Valid"); } // does not print<br/>if(c) { console.log("Valid"); } // does not print</span></pre><p id="bf7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道什么是鸭式打字，这个术语暗指短语:</p><p id="ddcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果它像鸭子一样走路，像鸭子一样游泳，像鸭子一样嘎嘎叫，那么它很可能就是一只鸭子。</p><p id="8c87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本质上，duck typing优先考虑对象的属性和方法，而不是它的实际类型。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="263e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">空字符串有效</h1><p id="9fab" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当一个空字符串是一个有效条目时，我们需要添加到我们的duck-type表达式中，或者选择更显式的比较。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="d9a0" class="mz md it no b gy nt nu l nv nw">let a;</span><span id="7beb" class="mz md it no b gy nx nu l nv nw">// the following two expressions evaluate true and would print<br/>if(a || typeof a == "string") {<br/>   console.log("Valid");<br/>}</span><span id="f163" class="mz md it no b gy nx nu l nv nw">if(typeof a != "undefined" &amp;&amp; a != null) {<br/>   console.log("Valid");<br/>}</span></pre><p id="73f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于第二个例子，表达式的顺序很关键。</p><p id="544d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为在未定义的变量上检查null会导致错误，所以我们需要首先验证undefined。</p><p id="334a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nl nm nn no b">a</code>未定义的情况下，表达式将短路，跳过空值比较并避免错误。</p></div></div>    
</body>
</html>