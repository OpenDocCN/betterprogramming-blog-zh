<html>
<head>
<title>How To Install Docker Without Docker Desktop On Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Windows上不用Docker桌面安装Docker</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-install-docker-without-docker-desktop-on-windows-a2bbb65638a1?source=collection_archive---------0-----------------------#2022-04-27">https://betterprogramming.pub/how-to-install-docker-without-docker-desktop-on-windows-a2bbb65638a1?source=collection_archive---------0-----------------------#2022-04-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="eb27" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">此外，学习如何使用Portainer作为替代Docker GUI</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/8cc307793f5323096f5f5a50191eafed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkEwHfHVAmMOz_CekjhliA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@alesiaskaz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿莱西娅·卡赞特切娃</a>在<a class="ae kz" href="https://unsplash.com/s/photos/developer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="9539" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">作为一个因为很多原因从Linux转到Windows的开发人员，我已经使用Docker桌面几个月了，因为它会自动更新我的Docker环境。</p><p id="62f2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不幸的是，这是不可能的了，我不得不删除Docker桌面。</p><p id="42bb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，除了更新Docker引擎之外，我没有使用Docker Desktop执行任何命令或功能，因此这一变化不会影响我的工作流程。</p><h1 id="5cbc" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">没有Docker桌面为什么要安装Docker？</h1><p id="07d7" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">Docker更新了其<a class="ae kz" href="https://docs.docker.com/subscription/#docker-desktop-license-agreement" rel="noopener ugc nofollow" target="_blank"> Docker桌面许可协议</a>，允许在大型组织中专业使用Docker桌面，而无需订阅Docker。这意味着，如果你的公司有250多名员工或超过1000万美元的年收入，你将无法使用Docker桌面没有付费订阅。对于小公司、私人使用、开源项目和教育目的，它仍然是免费的。</p><p id="e652" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此许可证更新仅与Docker桌面相关，与Docker或Docker引擎无关。这使得您仍然可以将Docker用于开发和所有类型的环境，包括生产环境。通常，如果使用Docker，此许可证更新不会影响您公司的业务。</p><h1 id="1512" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">先决条件</h1><p id="b0d9" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">要遵循此操作方法，您需要有一个兼容WSL2的工作站，如Windows 10 version 2004或更高版本。要检查安装的版本，请按<code class="fe mt mu mv mw b">Windows logo key + R</code>并按Enter显示您的系统设置。如果您不符合要求，请更新您的窗口。</p><p id="5fe8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果安装了Docker Desktop，您必须卸载它</p><p id="66e4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在Windows中，必须启用Linux子系统。这可以通过按下<strong class="lc iv"> Windows日志键</strong>，键入“打开和关闭Windows功能”并打开它来完成。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mx"><img src="../Images/a123985d3120b65bd07ad5cf0ec45bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*GsDgQx9Lw4qG5p5A7-DloA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者拍摄的Windows开始菜单截图</p></figure><p id="0a93" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">滚动到底部，如果该功能被禁用，则将其激活。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj my"><img src="../Images/681d8ecba6295658bfaf15df4eabc631.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*J3Os0oxeFJy-_ZDHwJoBIA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者拍摄的Windows功能菜单截图</p></figure><p id="86b6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">激活后，按“确定”并重启计算机。</p></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><p id="0bbf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您还可以使用PowerShell命令安装Linux子系统:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="8adb" class="nk lx iu mw b gz nl nm l nn no">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</span></pre><h1 id="180e" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">在WSL2上安装Ubuntu</h1><p id="b165" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">设置好先决条件后，您必须使用管理权限打开PowerShell，并使用以下命令在WSL2中安装Ubuntu:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="7b5f" class="nk lx iu mw b gz nl nm l nn no">wsl --set-default-version 2<br/>wsl --install -d Ubuntu</span></pre><p id="0716" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="np">您也可以在此步骤中安装不同的Linux子模块。</em></p><p id="5473" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">安装完成后，你应该检查Ubuntu是否安装在正确的版本中:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="887d" class="nk lx iu mw b gz nl nm l nn no">wsl -l -v</span></pre><p id="192a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果一切正常，你应该看到你安装的Ubuntu和相应的WSL版本。如果版本不正确，您可以使用以下命令进行更改:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="10ec" class="nk lx iu mw b gz nl nm l nn no">wsl --set-version Ubuntu-YY.MM 2</span></pre><p id="9728" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">YY。MM是你最近安装的Ubuntu版本的版本。</p><h1 id="9b44" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">安装Docker</h1><p id="60a3" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">要在Windows上的Ubuntu子模块中安装Docker，您可以按照官方步骤在Ubuntu上安装Docker:</p><ul class=""><li id="8dc2" class="nq nr iu lc b ld le lg lh lj ns ln nt lr nu lv nv nw nx ny bi translated"><a class="ae kz" href="https://docs.docker.com/engine/install/ubuntu/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/install/ubuntu/</a></li></ul><p id="9c8a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">另一种方法是创建一个新文件，并将下面的脚本复制到其中。这些命令只是从官方教程复制到一个文件中，以便与其他开发人员共享</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><p id="a51f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">切换到PowerShell中的Ubuntu子模块，执行文件来安装Docker和所需的依赖项。</p></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><p id="d4fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，您可以使用以下命令启动并检查一切是否正常运行:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="b8b1" class="nk lx iu mw b gz nl nm l nn no">sudo service docker start   # start the engine<br/>sudo service docker status  # print some nice status information<br/>docker run hello-world      # run a test docker container</span></pre><p id="9df3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后一个命令完成后，您应该会看到运行Docker的图像输出:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><h1 id="98f1" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">Ubuntu WSL2发行版的常见问题</h1><p id="b5f1" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">如果你安装Ubuntu作为你的WSL2发行版，并且使用至少一个基于Ubuntu Hirsute Hippo (21.04)的发行版，你的docker守护进程可能无法正确启动。</p><p id="0d67" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当试图运行<code class="fe mt mu mv mw b">dockerd</code>时，会产生以下错误日志:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="0a01" class="nk lx iu mw b gz nl nm l nn no">...<br/>INFO[2021-09-25T15:06:20.839195000+08:00] Loading containers: start.<br/>INFO[2021-09-25T15:06:20.885624800+08:00] stopping event stream following graceful shutdown  error="&lt;nil&gt;" module=libcontainerd namespace=moby<br/>INFO[2021-09-25T15:06:20.885865900+08:00] stopping healthcheck following graceful shutdown  module=libcontainerd<br/>INFO[2021-09-25T15:06:20.886012400+08:00] stopping event stream following graceful shutdown  error="context canceled" module=libcontainerd namespace=plugins.moby<br/>failed to start daemon: Error initializing network controller: error obtaining controller instance: unable to add return rule in DOCKER-ISOLATION-STAGE-1 chain:  (iptables failed: iptables --wait -A DOCKER-ISOLATION-STAGE-1 -j RETURN: iptables v1.8.7 (nf_tables):  RULE_APPEND failed (No such file or directory): rule in chain DOCKER-ISOLATION-STAGE-1<br/> (exit status 4))</span></pre><p id="19ea" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我注意到docker正在使用的<code class="fe mt mu mv mw b">iptables</code>是一个<code class="fe mt mu mv mw b">nftables</code>版本。这导致了一个错误，因为从20.10版本开始，Ubuntu将防火墙系统切换到了<code class="fe mt mu mv mw b">nftables</code>(你可以<a class="ae kz" href="https://net2.com/ubuntu-20-10-comes-with-nftables-as-firewall/" rel="noopener ugc nofollow" target="_blank">在这个网站</a>上读到它)。不幸的是，使用<code class="fe mt mu mv mw b">nftables</code>本身需要Linux内核5.8，但是WSL的最新内核版本是5.4。</p><p id="d088" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，Ubuntu仍然有可能使用传统版本的<code class="fe mt mu mv mw b">iptables</code>，只需执行:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="d324" class="nk lx iu mw b gz nl nm l nn no">$ sudo update-alternatives --config iptables</span><span id="7f0a" class="nk lx iu mw b gz ob nm l nn no">There are 2 choices for the alternative iptables (providing /usr/sbin/iptables).</span><span id="ef6d" class="nk lx iu mw b gz ob nm l nn no">Selection    Path                       Priority   Status<br/>------------------------------------------------------------<br/>* 0            /usr/sbin/iptables-nft      20        auto mode<br/>  1            /usr/sbin/iptables-legacy   10        manual mode<br/>  2            /usr/sbin/iptables-nft      20        manual mode</span><span id="3ec6" class="nk lx iu mw b gz ob nm l nn no">Press &lt;enter&gt; to keep the current choice[*], or type selection number: 1<br/>update-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in manual mode</span></pre><p id="0d84" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">更新完<code class="fe mt mu mv mw b">iptables</code>后，只需重启Docker守护进程，你会注意到Docker开始正常工作。</p><h1 id="092a" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">安装Docker撰写</h1><p id="461c" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">安装Docker Compose可以在Ubuntu子模块中完成。打开PowerShell窗口，切换到Ubuntu子模块。然后从GitHub下载最新版本:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="6599" class="nk lx iu mw b gz nl nm l nn no">$ sudo curl -L https://github.com/docker/compose/releases/download/2.4.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span></pre><p id="1eeb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，授予docker-compose命令执行权限:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="f053" class="nk lx iu mw b gz nl nm l nn no">sudo chmod +x /usr/local/bin/docker-compose</span></pre><p id="7fc5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">之后，您可以通过在Ubuntu子模块中执行<code class="fe mt mu mv mw b">docker-compose -version</code>或者从任何PowerShell窗口中执行<code class="fe mt mu mv mw b">wsl docker-compose -version</code>来测试功能。</p><h1 id="3e5a" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">如何将Docker和Docker Compose集成到您的PowerShell中</h1><p id="73b8" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">如果您遵循教程，您应该:</p><ol class=""><li id="85db" class="nq nr iu lc b ld le lg lh lj ns ln nt lr nu lv oc nw nx ny bi translated">安装了WSL2 Linux子系统</li><li id="0af7" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">在Ubuntu上安装和配置Docker</li><li id="bff2" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">已安装的Docker合成</li></ol><p id="f4e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以在Ubuntu子模块和PowerShell中使用所有Docker命令，方法是在命令前加上<code class="fe mt mu mv mw b">wsl</code>:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="6024" class="nk lx iu mw b gz nl nm l nn no">wsl docker ps<br/>wsl docker-compose -version</span></pre><p id="3498" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了方便起见，您应该能够使用任何Docker命令，而不用在它前面添加<code class="fe mt mu mv mw b">wsl</code>。为此，您可以为PowerShell创建一个别名。<a class="ae kz" href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.2" rel="noopener ugc nofollow" target="_blank">阅读这里</a>并设置好一切。</p><p id="4666" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后找到您的PowerShell配置文件</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="0db2" class="nk lx iu mw b gz nl nm l nn no">echo $PROFILE</span></pre><p id="c887" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">并在编辑器中打开该文件，然后粘贴以下内容:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="1090" class="nk lx iu mw b gz nl nm l nn no">Function Start-WslDocker {<br/>    wsl docker $args<br/>}<br/>Function Start-WslDockerCompose {<br/>    wsl docker $args<br/>}</span><span id="9273" class="nk lx iu mw b gz ob nm l nn no">Set-Alias -Name docker -Value Start-WslDocker<br/>Set-Alias -Name docker-compose -Value Start-WslDockerCompose</span></pre><p id="03cf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过键入以下命令，保存文件并重新启动PowerShell终端以测试别名是否正常工作:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="6363" class="nk lx iu mw b gz nl nm l nn no">docker ps<br/>docker-compose -version</span></pre><p id="098d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你没有得到一个错误，它会像预期的那样工作。</p><h1 id="eb4b" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">安装集装箱</h1><p id="7f5a" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">为了更好地取代Docker桌面，贵由应该在你的本地环境中安装Portainer。</p><blockquote class="oi oj ok"><p id="be2e" class="la lb np lc b ld le jv lf lg lh jy li ol lk ll lm om lo lp lq on ls lt lu lv in bi translated"><em class="iu"> Portainer是一个强大的、基于GUI的容器即服务解决方案，帮助组织轻松安全地管理和部署云原生应用。</em></p></blockquote><p id="dff8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">使用Portainer，您可以:</strong></p><ol class=""><li id="486d" class="nq nr iu lc b ld le lg lh lj ns ln nt lr nu lv oc nw nx ny bi translated">使用已定义的应用程序模板部署应用程序(单击进行部署)</li><li id="e531" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">从合成文件部署和管理堆栈，包括直接从git部署</li><li id="61ae" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">部署和管理容器，包括编辑正在运行的容器的能力</li><li id="3732" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">拉/推/构建图像</li><li id="e470" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">创建网络</li><li id="9d25" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">创建/删除卷</li><li id="55de" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">查看Docker事件的日志</li><li id="2218" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">查看docker引擎(主机)信息，并根据需要应用安全控制</li></ol></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><p id="84dd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个Docker合成文件可用于将Portainer CE安装为Docker服务，如果它没有运行，将自动重新启动。</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="5356" class="nk lx iu mw b gz nl nm l nn no"># docker-compose.yml <br/>version: '3'<br/><br/>services:<br/>  portainer:<br/>    image: portainer/portainer-ce:latest<br/>    container_name: portainer<br/>    restart: unless-stopped<br/>    security_opt:<br/>      - no-new-privileges:true<br/>    volumes:<br/>      - /etc/localtime:/etc/localtime:ro<br/>      - /var/run/docker.sock:/var/run/docker.sock:ro<br/>      - ./portainer-data:/data<br/>    ports:<br/>      - 9000:9000</span></pre><p id="0c45" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将其保存到任何文件夹，并在PowerShell中运行:</p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="5e0a" class="nk lx iu mw b gz nl nm l nn no">docker-compose up -d</span></pre><p id="d7eb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">切换到你的浏览器，打开<a class="ae kz" href="http://localhost:9000" rel="noopener ugc nofollow" target="_blank"> http://localhost:9000 </a>。</p><p id="7967" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">计时注意:</strong>确保在Portainer准备好之后立即登录并创建您的凭证，否则出于安全考虑，它会自动关闭。如果您没有及时创建凭据，它会自动关闭，您必须重新启动服务。</p><h1 id="bdd9" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">该解决方案的优点/缺点</h1><h2 id="75af" class="nk lx iu bd ly oo op dn mc oq or dp mg lj os ot mi ln ou ov mk lr ow ox mm oy bi translated">赞成的意见</h2><p id="49b1" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">与Docker桌面版相比，有多项优势:</p><ol class=""><li id="b21f" class="nq nr iu lc b ld le lg lh lj ns ln nt lr nu lv oc nw nx ny bi translated">Docker引擎是免费的。所以许可证更新对您的开发和生产环境来说不会是一个问题。</li><li id="dc75" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">Portainer是一个用于管理Docker环境的生产就绪软件，也经常用于服务器集群环境。</li><li id="cc51" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">您将更快地学习Docker基础知识，并获得更多DevOps能力。</li><li id="d930" class="nq nr iu lc b ld od lg oe lj of ln og lr oh lv oc nw nx ny bi translated">生产环境通常在Linux中运行，因此您的开发环境接近生产环境。</li></ol><h2 id="dfd7" class="nk lx iu bd ly oo op dn mc oq or dp mg lj os ot mi ln ou ov mk lr ow ox mm oy bi translated">骗局</h2><p id="2880" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">对我来说，唯一的缺点是，如果有新版本，你必须自己手动更新，而不是按“确定”按钮。</p><h1 id="39bb" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">结束语</h1><p id="bec1" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">感谢阅读这篇文章！</p><p id="7d6b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望你喜欢阅读它，并且现在能够在你的Windows主机上的Ubuntu子模块中安装Docker环境。另外，我希望你现在可以在Windows上使用和安装Portainer和Docker Compose。如果这对你有用，我很乐意在评论区得到你的反馈。另外，如果你有任何问题，请写在下面。如果可能，我会回答他们。</p><p id="b0f3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这篇文章发表在我的博客上<a class="ae kz" href="https://www.paulsblog.dev/how-to-install-docker-without-docker-desktop-on-windows/" rel="noopener ugc nofollow" target="_blank">https://www . paulsblog . dev/how-to-install-docker-without-docker-desktop-on-windows/</a></p><pre class="kk kl km kn gu ng mw nh ni aw nj bi"><span id="2ea3" class="nk lx iu mw b gz nl nm l nn no"><strong class="mw iv">Want to Connect?</strong></span><span id="2413" class="nk lx iu mw b gz ob nm l nn no">If interested feel free to connect with me on <a class="ae kz" href="https://www.paulsblog.dev" rel="noopener ugc nofollow" target="_blank">my personal website</a>, <a class="ae kz" href="https://www.twitter.com/paulknulst" rel="noopener ugc nofollow" target="_blank">Twitter</a>, <a class="ae kz" href="https://www.linkedin.com/in/paulknulst/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>, and <a class="ae kz" href="https://github.com/paulknulst" rel="noopener ugc nofollow" target="_blank">GitHub</a>!</span></pre></div></div>    
</body>
</html>