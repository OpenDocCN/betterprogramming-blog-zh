<html>
<head>
<title>An Introduction to Elasticsearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">弹性研究导论</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-introduction-to-elasticsearch-4999b2a752e9?source=collection_archive---------14-----------------------#2020-04-01">https://betterprogramming.pub/an-introduction-to-elasticsearch-4999b2a752e9?source=collection_archive---------14-----------------------#2020-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a50e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">深入流行的开源搜索引擎</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3e6d5b9fcead9969ff00b7b4c56774b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYzWXRMv8Y0OGuqOV8amFA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Elasticsearch徽标</p></figure><p id="e71f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如今，<em class="lu">搜索</em>已经成为所有网站和应用的重要功能之一。任何网站超过50%的流量都使用<em class="lu">搜索</em>功能。所以，每个人都在努力让自己的搜索更快更好地提升用户体验。</p><p id="dda9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，今天，我们要谈论一个流行的搜索和分析引擎，叫做<a class="ae lv" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>。本文的范围是让读者熟悉弹性搜索和基本术语。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4ce1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">什么是Elasticsearch？</h1><p id="5958" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">根据官网上的定义:</p><blockquote class="na"><p id="d23f" class="nb nc it bd nd ne nf ng nh ni nj lt dk translated">“Elasticsearch是一个分布式、开源的搜索和分析引擎，适用于所有类型的数据，包括文本、数字、地理空间、结构化和非结构化数据。Elasticsearch是建立在Apache Lucene之上的。”</p></blockquote><p id="bc8e" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">你可以把Elasticsearch看作是一个NoSQL数据库，具有高性能搜索的额外功能。高性能搜索是因为<a class="ae lv" href="https://lucene.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Lucene </a>，一个全功能的文本搜索引擎库。</p><p id="5d3c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Elasticsearch用于搜索电子商务平台中的商品，食品订购应用程序中的餐厅，在线预订网站中的航班等。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3e0b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">为什么我们需要Elasticsearch？</h1><p id="3b64" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">我们用一个例子来理解这个。假设您有一个食品订购应用程序，您需要添加按餐馆名称进行关键字搜索的功能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/e9d2fe536d6884c60eae307149577aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*5tFlaz0Ww8DoWb0vzZrQEQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nq">图1 </strong>:餐厅表</p></figure><p id="a0a8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，对于这个功能，需要一个搜索引擎，它将根据用户的输入查询返回餐馆。如果有1000万家餐馆，即表中有1000万行，那么通过部分匹配关键字进行搜索将会非常慢。</p><p id="81f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个问题随着生产量的增加而扩大。一个受欢迎的网站每秒收到数千个搜索请求。因此，现有的SQL数据库不能用于这种类型的用例。</p><p id="4b07" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，我们需要一些更快的关键字搜索，是一个分布式系统，处理非常高的吞吐量和弹性搜索满足所有这些标准。</p><p id="845f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们深入研究一下Elasticsearch，了解数据在其中的结构。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0c5e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">弹性搜索文档</h1><p id="bffb" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">您可以将Elasticsearch文档视为MySQL表中的一行。数据存储在文档中，采用JSON格式。</p><p id="0589" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个文档都包含一组键及其对应的值。该值可以是字符串、整数、浮点、布尔、数组或其他类型的数据。</p><p id="9be1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面给出了一个餐馆文档的例子。每个字段都可以被索引和搜索，不管它是字符串(<code class="fe nr ns nt nu b">“name”</code> <em class="lu"> ) </em>还是数组(<code class="fe nr ns nt nu b">“dishes”</code>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/3e8ccba9ac318e250e2b67f95e221e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8vKylmgeMFVNqMbsSqz1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nq">图2 </strong>:餐厅对象的文档</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="366e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">绘图</h1><p id="faac" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">Elasticsearch中的映射类似于MySQL数据库中的表。该映射包含存储在索引中的文档的轮廓。</p><p id="05d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它定义了文档中出现的字段的数据类型，如字符串、整数和格式。例如，如果我们想在一个字段中存储日期，那么类型将是<code class="fe nr ns nt nu b">“date”</code>，格式将类似于<code class="fe nr ns nt nu b">“yyyy-mm-dd”</code>。</p><p id="90d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您索引(添加)文档时，Elasticsearch会自动尝试确定属性类型。你可以把它想象成在MySQL中插入一个JSON，然后由MySQL决定列数和列类型。</p><p id="f10f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Elasticsearch中，数组没有专用的数据类型。数组的第一个值决定了它的类型。例如，对于我们的餐馆文档，菜肴被认为是字符串类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2741e745492f0675742eca2670a50a0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HiMEvXBY-YRAq4b2C6oA2A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3:餐馆文档的映射</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="fe49" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">弹性搜索指数</h1><p id="2bb9" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">Elasticsearch index类似于MySQL数据库。它是彼此相似的文档的集合。</p><p id="3803" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，所有的餐馆文档都可以放在一个索引下。每个索引都由一个名称唯一标识。该名称用于搜索、更新和删除文档。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1217" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="c3af" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">Elasticsearch是一个分布式分析搜索引擎，具有近实时返回结果的能力。</p><p id="66ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Elasticsearch还可以与<a class="ae lv" href="https://www.elastic.co/kibana" rel="noopener ugc nofollow" target="_blank"> Kibana </a>集成，用于实时可视化数据。</p><p id="21ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Elasticsearch的集成更快更简单，因为Elasticsearch客户端是用Java、PHP、Ruby、Python、Go等多种语言编写的。</p></div></div>    
</body>
</html>