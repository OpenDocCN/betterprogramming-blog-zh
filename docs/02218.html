<html>
<head>
<title>Turn Your Docker Image Into an Auto-Scaling Kubernetes Deployment Using Amazon EKS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用亚马逊EKS将您的Docker映像转变为自动扩展的Kubernetes部署</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/turn-your-own-docker-image-into-an-auto-scaling-kubernetes-deployment-using-amazon-eks-bd2ab8ef56cc?source=collection_archive---------2-----------------------#2019-11-14">https://betterprogramming.pub/turn-your-own-docker-image-into-an-auto-scaling-kubernetes-deployment-using-amazon-eks-bd2ab8ef56cc?source=collection_archive---------2-----------------------#2019-11-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="21ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让你的k8更上一层楼</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1723b3ec019f508bd928db3399e86654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySUS6PGMRaEkcQcU4jZd0w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">托拜厄斯·菲舍尔在<a class="ae ky" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="ae80" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">目录</h1><p id="18d6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="#016e" rel="noopener ugc nofollow"> <strong class="lt iu">简介</strong> </a> <br/> <a class="ae ky" href="#3307" rel="noopener ugc nofollow"> <strong class="lt iu">要求</strong> </a> <br/> <a class="ae ky" href="#604c" rel="noopener ugc nofollow"> <strong class="lt iu">安装先决条件</strong> </a> <br/> <a class="ae ky" href="#824b" rel="noopener ugc nofollow">安装eksctl </a> <br/> <a class="ae ky" href="#3730" rel="noopener ugc nofollow">安装kubectl </a> <br/> <a class="ae ky" href="#1956" rel="noopener ugc nofollow"> <strong class="lt iu">设置EKS集群</strong> </a> <br/> <a class="ae ky" href="#a629" rel="noopener ugc nofollow">创建EKS集群</a> <br/> <a class="ae ky" href="#f24f" rel="noopener ugc nofollow"> <strong class="lt iu">设置Kubernetes环境<a class="ae ky" href="#f24f" rel="noopener ugc nofollow"> </a></strong> </a> <br/> <a class="ae ky" href="#c4fc" rel="noopener ugc nofollow">创建Docker映像</a> <br/> <a class="ae ky" href="#e14b" rel="noopener ugc nofollow">将您的映像上传到ECR </a> <br/> <a class="ae ky" href="#890b" rel="noopener ugc nofollow">使用上传的映像创建Kubernetes部署</a> <br/> <a class="ae ky" href="#e702" rel="noopener ugc nofollow">测试部署</a> <br/> <a class="ae ky" href="#ff9f" rel="noopener ugc nofollow"> <strong class="lt iu">自动缩放部署</strong> </a> <br/> <a class="ae ky" href="#009e" rel="noopener ugc nofollow"> <strong class="lt iu">公开端点</strong> </a></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="016e" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">介绍</h1><p id="bf73" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">作为一个成长中的组织，我们必须管理越来越多的客户，每个客户都希望在完全隔离的云环境中运行，并且有自己独特的需求。最重要的是，我们有一个不断增长的产品测试环境，由多个组件、微服务和第三方集成组成。</p><p id="2148" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">在寻找处理所有这些需求的解决方案时，集装箱化是第一个想到的想法，Kubernetes是管理它的自然选择。</p><p id="05de" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">使用EKS是您的云环境及其所有计算能力、存储和安全特性与您的基于Kubernetes的容器化环境及其微服务和自动伸缩能力之间的联系。</p><p id="1869" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">然而，从我的经验来看，让事情正常工作并按正确的顺序进行并不是微不足道的，我希望我能帮助让事情变得更清楚。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="3307" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">要求</h1><p id="4a79" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本文假设您将AWS作为云提供商，并且您可以访问EKS和ECR管理控制台，以及AWS CLI。</p><p id="945e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">我试图对以前的知识做最少的假设，并尽我所能解释，但我确实假设对Kubernetes和Docker的概念有些熟悉。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="604c" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">安装先决条件</h1><p id="428d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们需要做的第一件事是安装两个命令行实用程序，我们将在本指南中使用它们:<strong class="lt iu"> eksctl </strong>(管理您的EKS集群)和<strong class="lt iu"> kubectl </strong>(管理您的Kubernetes部署)。</p><h2 id="824b" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">安装eksctl</h2><p id="1bdf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">eksctl是用于创建和管理EKS集群的CLI工具。</p><p id="bc31" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">要使用Homebrew在Mac OSX上安装它，请键入以下内容:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="edb9" class="ne la it nr b gy nv nw l nx ny">brew tap weaveworks/tap<br/>brew install weaveworks/tap/eksctl</span></pre><p id="fae0" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">其他操作系统的详细信息和安装说明可以在这里找到:【https://eksctl.io/introduction/installation/ T4】</p><h2 id="3730" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">安装kubectl</h2><p id="202a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">kubectl是一个管理Kubernetes部署的CLI工具，不管您是否使用EKS，所以很有可能您已经安装了它。</p><p id="fbf5" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">要使用Homebrew在Mac OSX上安装它，请键入以下内容:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="bee3" class="ne la it nr b gy nv nw l nx ny">brew install kubernetes-cli</span></pre><p id="c39a" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">其他操作系统的详细信息和安装说明可在此处找到:</p><p id="0f08" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated"><a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank">https://kubernetes.io/docs/tasks/tools/install-kubectl/</a></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="1956" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">设置EKS集群</h1><p id="2a31" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一旦我们具备了所有的先决条件，我们就可以开始安装和配置我们的EKS集群了。</p><h2 id="a629" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">创建EKS集群</h2><p id="f4cf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了创建EKS集群，我们将使用eksctl <em class="nz"> create cluster </em>命令。该命令可以按原样执行(在这种情况下，它将使用一组默认选项)，但是也可以使用命令行参数或配置文件来执行，以便定义集群区域、其大小、实例类型等等。</p><p id="3a04" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">以下页面涵盖了所有可用的命令行参数:<a class="ae ky" href="https://github.com/weaveworks/eksctl/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">https://github.com/weaveworks/eksctl/blob/master/README.md</a></p><p id="3e5e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">默认情况下，集群将在您的AWS部署中创建一个完全隔离的环境，包括它自己的VPC、子网和网络配置。可以将群集配置为使用现有环境(现有的VPC、子网等)。)使用命令行参数或配置文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/7cff4677c23f0906b8003da17e70b992.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qmTg596yX9-1qxhM"/></div></div></figure><p id="f273" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">以下代码片段是一个配置文件，可用于在现有VPC中设置EKS集群:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="98b0" class="ne la it nr b gy nv nw l nx ny">apiVersion: eksctl.io/v1alpha5<br/>kind: ClusterConfig</span><span id="1c1b" class="ne la it nr b gy ob nw l nx ny">metadata:<br/>  name: my-test-eks<br/>  region: us-east-1</span><span id="b995" class="ne la it nr b gy ob nw l nx ny">vpc:<br/>  subnets:<br/>    private:<br/>      us-east-1a:<br/>        id: “YOUR_SUBNET_1_ID”</span><span id="027b" class="ne la it nr b gy ob nw l nx ny">      us-east-1b:<br/>        id: “YOUR_SUBNET_2_ID”</span><span id="fa9b" class="ne la it nr b gy ob nw l nx ny">nodeGroups:<br/>  - name: ng-1<br/>    instanceType: m5.xlarge<br/>    desiredCapacity: 3<br/>    privateNetworking: true</span></pre><p id="f67d" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">为了使用配置文件创建新的群集，请运行以下命令:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="476b" class="ne la it nr b gy nv nw l nx ny">eksctl create cluster -f FILE_NAME</span></pre><p id="56f5" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">你可以在这里找到额外的示例配置文件:<a class="ae ky" href="https://github.com/weaveworks/eksctl/tree/master/examples" rel="noopener ugc nofollow" target="_blank">https://github.com/weaveworks/eksctl/tree/master/examples</a></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f24f" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">设置Kubernetes环境</h1><p id="6468" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一旦我们启动并运行了EKS集群，我们需要安装几个组件来设置Kubernetes环境:仪表板、包管理器和度量服务器。</p><p id="abef" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">注意，作为<em class="nz"> create cluster </em>命令的一部分，eksctl将在默认路径(通常是<code class="fe oc od oe nr b">~/.kube/config</code>)或由<code class="fe oc od oe nr b">--kubeconfig</code>参数指定的路径中创建一个Kubernetes配置文件(包含kubectl连接到您的集群所需的信息)。</p><p id="9a23" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">我们将假设您从现在开始使用这个默认配置，但是您可以在任何kubectl命令中添加<code class="fe oc od oe nr b">--kubeconfig</code>参数来指定不同的配置文件路径。</p><h2 id="ea90" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">安装Kubernetes度量服务器</h2><p id="37dd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes metrics服务器收集集群和部署的资源使用信息。例如，这些资源包括CPU使用情况，这些资源可用于为您的部署定义自动扩展行为。</p><p id="f02e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">以下指南将指导您在EKS集群上安装Kubernetes metrics server:</p><p id="2033" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/metrics-server.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/eks/latest/user guide/metrics-server . html</a></p><p id="5a0e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">稍等片刻，然后通过运行以下命令确认您的metrics server安装:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="2573" class="ne la it nr b gy nv nw l nx ny">kubectl get deployment metrics-server -n kube-system</span></pre><p id="88f2" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">确保在返回的状态行中看到READY 1/1。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/b10b5b2c521f6835029f4fa08f46402b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L3yQQClTL9PLojkp"/></div></div></figure><p id="c934" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">如果您没有看到1/1，请检查metrics服务器日志以查看问题。</p><p id="df77" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">运行以下命令以查找您的metrics server pod的名称:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="b0ab" class="ne la it nr b gy nv nw l nx ny">kubectl get --all-namespaces pods</span></pre><p id="a1f1" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">获得度量服务器pod名称后，在以下命令中键入并运行:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="0fba" class="ne la it nr b gy nv nw l nx ny">kubectl logs metrics-server-xxxxxxxxx-yyyy -n kube-system</span></pre><p id="014d" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">您将获得最新的度量服务器日志，并了解它不启动的原因。</p><p id="b73f" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">EKS上一个常见的度量服务器问题与DNS解析有关。默认情况下，度量服务器将尝试使用它们的DNS名称连接到您的节点。但是，您的DNS名称可能无法解析，例如，如果您使用内部VPC。在这种情况下，您将在metrics服务器日志中看到与此类似的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/530e1d864bc25d097229175e73786430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VTQqDjOBAJSgq7cC"/></div></div></figure><p id="45c6" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">为了解决这个问题，我们需要更新metrics server部署配置，以便更喜欢使用IP地址而不是DNS连接到节点。</p><p id="9a2d" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">为此，转到您下载的metrics server文件夹，并导航到<code class="fe oc od oe nr b">deploy/1.8+/</code> <em class="nz"> </em>文件夹。编辑<code class="fe oc od oe nr b">metrics-server-deploymet.yaml</code>文件，并在最底部添加以下几行:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="6645" class="ne la it nr b gy nv nw l nx ny">command:<br/>- /metrics-server<br/>- --kubelet-preferred-address-types=InternalIP\<br/>- --kubelet-insecure-tls</span></pre><p id="bebd" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">文件的结尾应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/39f0428187e1ab7e0aa54b23e78aa3a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N6-lhsL_rDmMJ3Ij"/></div></div></figure><p id="90a0" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">然后，再次运行<em class="nz"> kubectl apply </em>命令，用配置更改更新集群，然后再次检查部署状态:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="2d8e" class="ne la it nr b gy nv nw l nx ny">kubectl apply -f metrics-server-x.x.x/deploy/1.8+/<br/>kubectl get deployment metrics-server -n kube-system</span></pre><h2 id="40d2" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">安装Kubernetes仪表板</h2><p id="d01f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes dashboard是主要的Kubernetes UI，它提供对节点、部署、服务等的详细信息和配置管理的访问。</p><p id="e86b" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">以下指南将引导您在EKS集群中部署Kubernetes仪表板:</p><p id="2bf7" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/eks/latest/user guide/dashboard-tutorial . html</a></p><p id="318b" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">请注意，第一步是安装度量服务器(我们刚刚完成了)，因此您可以跳过它。</p><p id="ef71" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">一旦完成，您应该能够使用<em class="nz"> kubectl proxy </em>命令访问您的仪表板UI。运行以下命令启动代理:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="788b" class="ne la it nr b gy nv nw l nx ny">kubectl proxy</span></pre><p id="68c7" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">然后，在你的浏览器中打开以下网址:<br/><a class="ae ky" href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#!/login" rel="noopener ugc nofollow" target="_blank">http://localhost:8001/API/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#！/登录</a>。</p><p id="9363" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">您将看到以下登录屏幕:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/06ce3402b08765c19253a8b1d13c1185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u2qQmBSIvH-YC4ql"/></div></div></figure><p id="4b0c" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">选择令牌选项，并运行以下命令获取令牌:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="9718" class="ne la it nr b gy nv nw l nx ny">kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep eks-admin | awk ‘{print $1}’)</span></pre><p id="0dd4" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated"><em class="nz"> kubectl describe secret </em>命令用于显示存储在您的Kubernetes集群上的敏感信息。在这种情况下，我们希望显示eks-admin服务帐户的身份验证令牌，该帐户是在仪表板安装期间为仪表板访问而创建的。</p><p id="e803" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">从输出中复制令牌部分，将其粘贴到登录屏幕中，然后单击SIGN IN。</p><h2 id="da3b" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">安装舵组件管理器</h2><p id="0fd6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Helm是Kubernetes包管理器，可用于在您的Kubernetes集群上安装应用程序。</p><p id="7ead" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">这对于我们的用例并不重要，因为我们将使用一个定制的Docker映像，而不是一个应用程序包。但是，它是一个常用的组件，在许多Kubernetes集群中都很有用。可以按照以下说明进行安装:</p><p id="301f" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/eks/latest/userguide/helm.html" rel="noopener ugc nofollow" target="_blank">https://docs.aws.amazon.com/eks/latest/userguide/helm.html</a></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="5884" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">创建部署</h1><p id="4ea2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">既然我们的EKS集群已经具备了所有的先决条件，我们就可以创建我们的Kubernetes部署了，在我们的例子中是从Docker映像创建的。</p><p id="59ac" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">你可以一直使用预建的Docker图像，比如来自<a class="ae ky" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>的官方图像。一个简单的例子是<a class="ae ky" href="https://hub.docker.com/_/httpd" rel="noopener ugc nofollow" target="_blank"> Apache HTTP服务器</a>，它可以用简单的图像URL httpd进行全局寻址。</p><p id="f5a5" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">如果您想使用自己的图像，请遵循以下步骤。</p><h2 id="c4fc" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">创建Docker图像</h2><p id="3eea" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设您有一个Docker容器源，转到<code class="fe oc od oe nr b">Dockerfile</code> <em class="nz"> </em>所在的文件夹，运行以下命令创建一个映像:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="1286" class="ne la it nr b gy nv nw l nx ny">docker build -t “YOUR_IMAGE_NAME”</span></pre><p id="1c91" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">完成后，运行以下命令查看您的映像:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="f7e7" class="ne la it nr b gy nv nw l nx ny">docker images</span></pre><p id="b476" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">如果您在输出中看到您的图像名称，就可以了。</p><h2 id="e14b" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">将您的图像上传到ECR</h2><p id="686a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Amazon ECR是一个私有的容器注册表，可以存储我们的Docker图像，并为它们提供一个URL，以便在Kubernetes部署中使用。</p><p id="700f" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">首先，我们需要创建一个存储库来存储我们的图像。</p><p id="4131" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">打开AWS管理控制台，从服务菜单中选择ECR。</p><p id="eab6" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">单击<em class="nz">创建存储库</em>按钮，在下一个屏幕中为您的存储库键入一个名称，然后单击<em class="nz">创建存储库</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/00e42062f03c8dc2753f2be2815d4c92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3ulB2jDR0UZJZlOQ"/></div></div></figure><p id="d991" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">一旦创建了您的存储库，我们需要了解如何将我们的映像添加到其中。</p><p id="0491" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">在存储库列表中选择您的存储库，并点击顶部菜单的<em class="nz">查看推送命令</em>按钮。您将获得一个将映像上传到存储库所需执行的步骤列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/732fd4fa99b03fa0990d28b448fbbc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aDpCN6_7h9cMLgJv"/></div></div></figure><p id="46e1" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">按照说明从AWS CLI应用程序登录ECR，标记您的映像，并将标记的映像推送到存储库。请注意，我们已经执行了实际创建图像本身的第二步。</p><h2 id="890b" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">使用上传的映像创建Kubernetes部署</h2><p id="3aa2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">上传完成后，您的图像将出现在您的AWS环境中，并可在EKS使用。</p><p id="e673" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">您的图像URL将是您的ECR存储库URL和Docker标签的组合，应该是这样的:<br/> <code class="fe oc od oe nr b">YOUR_AWS_ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com/my-container:latest</code></p><p id="efb8" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">(这实际上是我们在上面的<em class="nz"> docker push </em>命令中使用的确切URL)。</p><p id="cae1" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">一旦有了图像URL，就可以通过运行以下命令来创建Kubernetes部署:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="330c" class="ne la it nr b gy nv nw l nx ny">kubectl run YOUR_DEPLOYMENT_NAME --image=YOUR_IMAGE_URL --requests=cpu=500m --expose --port=YOUR_SERVICE_PORT</span></pre><p id="c5a1" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">请注意，该命令有几个与部署服务相关的额外参数:</p><ul class=""><li id="7bb8" class="oh oi it lt b lu mz lx na ma oj me ok mi ol mm om on oo op bi translated"><code class="fe oc od oe nr b"><em class="nz">--</em>requests=cpu=500m</code> <em class="nz"> </em>参数说明了执行时您的部署单元需要多少个CPU单元。在这种情况下，每个pod请求使用500个毫CPU(所以0.5个CPU)。度量服务器稍后将使用它来自动缩放您的部署。</li><li id="274d" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><code class="fe oc od oe nr b">--expose</code>参数声明部署应该对外部调用公开。</li><li id="0e3c" class="oh oi it lt b lu oq lx or ma os me ot mi ou mm om on oo op bi translated"><code class="fe oc od oe nr b">--port</code>参数声明部署应该打开该端口，并期待通过该端口的请求。</li></ul><p id="97cc" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">命令完成后，您可以运行以下命令来获取部署列表:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="5297" class="ne la it nr b gy nv nw l nx ny">kubectl get deployments</span></pre><p id="ff55" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">如果您在部署名称附近看到以下输出，这意味着它已成功部署:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/c4496e30f239f8073c263b4044ea4cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4gCyspsdWnQWvAHV"/></div></div></figure><h2 id="e702" class="ne la it bd lb nf ng dn lf nh ni dp lj ma nj nk ll me nl nm ln mi nn no lp np bi translated">测试部署</h2><p id="f361" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了测试部署，您可以使用<em class="nz"> kubectl proxy </em>命令来访问您的服务，而无需公开它。</p><p id="6bc3" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">运行以下命令启动代理:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="69e7" class="ne la it nr b gy nv nw l nx ny">kubectl proxy</span></pre><p id="524f" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">然后，在浏览器中打开以下URL:</p><p id="772e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated"><a class="ae ky" href="http://localhost:8001/api/v1/namespaces/default/services/YOUR_DEPLOYMENT_NAME:YOUR_SERVICE_PORT/proxy/" rel="noopener ugc nofollow" target="_blank">http://localhost:8001/API/v1/namespaces/default/services/YOUR _ DEPLOYMENT _ NAME:YOUR _ SERVICE _ PORT/proxy/</a></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="ff9f" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">自动扩展部署</h1><p id="03ea" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">既然我们已经启动并运行了部署，我们就可以将其配置为自动伸缩了。</p><p id="9b04" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">在上一步中，我们将部署服务配置为每次调用请求500个毫CPU。这意味着每个pod在执行时需要500毫个CPU核心(或0.5个CPU核心)。</p><p id="ca7e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">该CPU使用信息由指标服务器收集，可由自动扩展功能用来确定何时需要扩展/缩减部署。</p><p id="3174" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">在您的终端中，运行以下命令:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="d7b3" class="ne la it nr b gy nv nw l nx ny">kubectl autoscale deployment YOUR_DEPLOYMENT_NAME --cpu-percent=50 --min=1 --max=10</span></pre><p id="1a13" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">运行该命令后，您的部署将在1到10个pod之间自动扩展(根据度量服务器收集的数据)。</p><p id="fe0a" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">该命令规定，当当前部署单元的平均CPU使用率达到50%时(每个单元需要0.5个CPU核心，因此50%的平均CPU使用率将是0.25个CPU核心的平均使用率)，您的部署应该向上扩展到最多10个单元，当当前部署单元的平均CPU使用率低于50%时，部署应该向下扩展(但是将始终至少有一个活动单元)。</p><p id="7aa9" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">为了测试自动缩放，请运行以下命令:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="8678" class="ne la it nr b gy nv nw l nx ny">kubectl get hpa -w</span></pre><p id="7600" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">一旦您向部署中添加了一些负载，您将会注意到部署会向上扩展，而一旦负载清除，您将会注意到它会向下扩展。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/55713fce0df713defa42b04d7964343d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/0*Kue1fraxW-j-LhtC"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="009e" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">公开端点</h1><p id="3d12" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们的最后一步是公开我们的Kubernetes部署，这样它就有了一个外部端点，无需kubectl代理就可以访问。</p><p id="0395" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">请注意，外部端点将只在其配置的环境中公开服务，而不会在已经为您的环境配置的访问点之上创建任何外部访问点。如果您的节点在VPC内部运行，并且不接受来自互联网的传入流量，则只能在VPC内部访问外部端点。</p><p id="f33e" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">在您的终端中，运行以下命令:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="a081" class="ne la it nr b gy nv nw l nx ny">kubectl expose deployment YOUR_DEPLOYMENT_NAME --type=LoadBalancer --name=YOUR_EXTERNAL_ENDPOINT_NAME</span></pre><p id="0f5f" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">稍等片刻，然后运行以下命令来检查公开的端点服务状态:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="c663" class="ne la it nr b gy nv nw l nx ny">kubectl get services YOUR_EXTERNAL_ENDPOINT_NAME</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/8d3b50bfdcf0d8a58f2de9f7ecc8b84c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Dl1SkVZ-eBNNyfpg"/></div></div></figure><p id="2d39" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">检查EXTERNAL-IP列，并确保它显示服务外部端点的DNS名称或IP地址。</p><p id="f10f" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">如果您看到另一种状态，如<em class="nz">&lt;&gt;</em>，请运行以下命令，以获取有关您的服务的详细信息并解决问题:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="c56d" class="ne la it nr b gy nv nw l nx ny">kubectl describe services YOUR_EXTERNAL_ENDPOINT_NAME</span></pre><p id="7330" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">检查此输出末尾的事件日志，以解决问题。</p><p id="61a4" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">您可能面临的最常见问题是，如果您的所有节点都位于VPC内部的专用子网中，您将在服务事件日志中看到以下错误消息:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="f146" class="ne la it nr b gy nv nw l nx ny">Error creating load balancer (will retry): failed to ensure load balancer for service YOUR_EXTERNAL_ENDPOINT_NAME: could not find any suitable subnets for creating the ELB</span></pre><p id="0e17" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">要解决该问题，请运行以下命令:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="8360" class="ne la it nr b gy nv nw l nx ny">kubectl annotate services YOUR_EXTERNAL_ENDPOINT_NAME service.beta.kubernetes.io/aws-load-balancer-internal=”0.0.0.0/0"</span></pre><p id="9f00" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">您将得到一个带有<em class="nz">服务注释的</em>响应，如果您稍等片刻并再次检查您公开的端点服务的状态，您将注意到它已经被分配了一个用于外部访问的DNS名称。</p><p id="56ba" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">尝试通过您暴露端口访问DNS，您应该看到您的服务响应。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="ca5e" class="kz la it bd lb lc mu le lf lg mv li lj jz mw ka ll kc mx kd ln kf my kg lp lq bi translated">摘要</h1><p id="03e0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">管理一个集装箱化的环境，尤其是在考虑安全性和资源的有效利用时，可能是一项不可能完成的任务。使用Kubernetes可以帮助实现这一任务，使用由云提供商管理的Kubernetes环境可以使与所有云提供商服务的集成更加容易。</p><p id="1754" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">这篇文章介绍了如何建立这样一个由亚马逊EKS管理的环境，并创建一个基于定制Docker映像的自动扩展部署。</p><p id="40bf" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">这个基本用例展示了这种环境的功能。我相信这是创建完全托管的基于云的容器化环境的伟大的第一步，与基于机器和服务的标准部署的环境相比，这种环境将更加强大且更易于维护。</p><p id="f09d" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">要了解更多关于EKS及其功能的信息，请访问https://docs.aws.amazon.com/eks/index.html的EKS AWS文档<a class="ae ky" href="https://docs.aws.amazon.com/eks/index.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a643" class="pw-post-body-paragraph lr ls it lt b lu mz ju lw lx na jx lz ma nb mc md me nc mg mh mi nd mk ml mm im bi translated">你还应该参考亚马逊提供的这个EKS在线研讨会，它也可以帮助你入门，并向你介绍https://eksworkshop.com/的所有EKS功能<a class="ae ky" href="https://eksworkshop.com/" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>