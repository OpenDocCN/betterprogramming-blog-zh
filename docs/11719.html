<html>
<head>
<title>How To Login Users With a Backend– Using Flutter, Node.js, and MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用后端登录用户——使用Flutter、Node.js和MongoDB</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-login-users-with-a-backend-using-flutter-node-js-and-mongodb-1c27e018e3a9?source=collection_archive---------0-----------------------#2022-04-12">https://betterprogramming.pub/how-to-login-users-with-a-backend-using-flutter-node-js-and-mongodb-1c27e018e3a9?source=collection_archive---------0-----------------------#2022-04-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e140" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于当Flutter遇到Node.js时所发生的魔法的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/70673bd1e42b1a9169f0e873d25cac48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gD5l0uEtQu_XSyg5zstg8g.jpeg"/></div></div></figure><p id="abc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建应用程序时，您可能需要创建登录功能。在这篇文章中，我们将学习如何准确地创建它！我们将使用Flutter作为应用程序，Node.js作为后端，至少使用MongoDB来存储用户信息。这是我们建筑的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/9f6a6919e0ad6e3671cf86e859008903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekRq1efCINMVqqk3aIoM6w.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">我们登录应用的架构。</p></figure><p id="e8ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是数据通过我们的应用传递的方式。因此，假设用户1正在登录，这意味着数据将转到Node.js，如果一切正确，它将从MongoDB获取数据。完成后，Node.js将向我们的用户发回一条消息。所以让我们开始创建我们的应用程序。</p><h1 id="d461" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">节点. js</h1><p id="f29b" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">让我们从创建一个新项目开始。以及一个命令，该命令将完全创建一个新项目并为您安装所有的包。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="e603" class="mx lw it mt b gy my mz l na nb">mkdir server &amp;&amp; cd server &amp;&amp; npm init &amp;&amp; npm install express &amp;&amp; npm install ws &amp;&amp; npm install mongoose &amp;&amp; npm install crypto &amp;&amp; touch index.js</span></pre><p id="d411" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还创建了一个名为<code class="fe nc nd ne mt b"><strong class="kw iu">index.js</strong></code>的新文件。让我们在您最喜欢的IDE中打开该文件。首先，让我们像这样定义我们已经安装的所有包。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="1ff0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也在使用Mongoose，为了充分利用它，我们需要创建另一个文件。姑且称之为<code class="fe nc nd ne mt b">user.js</code>。我们将在那里创建一个新的<code class="fe nc nd ne mt b">Schema</code>。请以此为例。您可以在以后自己更改所有内容，但现在，我们将把它用于学习目的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="e7ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们已经创建了一个新的<code class="fe nc nd ne mt b">Schema</code>，我们希望连接到我们的数据库，并创建更多的后端。让我们像下面这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="abe2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请确保将您的连接目标更改为MongoDB不然就不行了。如果你有任何问题，请随时联系我。</p><p id="fbe1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然我们已经创建了一个基本的后端，我们想开始注册用户。我们还将检查用户名和电子邮件是否已经存在，并散列用户的密码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="9f1c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这可能看起来很多，但是代码非常容易理解。让我来解释一下这里发生了什么。</p><p id="65dc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，它将检查命令是否等于<code class="fe nc nd ne mt b">signup</code>。如果这是真的，它会在我们的数据库中寻找一封电子邮件。当它找不到选择的邮件时，就会返回<code class="fe nc nd ne mt b">null</code>。用户名也是如此。然后我们将散列用户的密码，之后，我们将在我们的数据库中插入一个新用户。</p><p id="33cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们已经创建了一个注册函数，让我们也创建一个用户登录的方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b8de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是我们完全完成后端所需的最后一点代码。所以现在这已经完成了，我们可以开始使用我们的Flutter应用程序了。</p><h1 id="4dbe" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">摆动</h1><p id="2614" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">为了创建一个新项目，我们将使用这个命令来确保所有的东西都将被立即安装，这样我们就不会浪费你的时间。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="ffcb" class="mx lw it mt b gy my mz l na nb">flutter create login_app &amp;&amp; cd login_app &amp;&amp; flutter pub add shared_preferences &amp;&amp; flutter pub add web_socket_channel</span></pre><p id="51f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，如果已经创建了一个新项目，让我们打开<code class="fe nc nd ne mt b">lib/main.dart</code>，请删除该文件中的所有内容。我们将在<code class="fe nc nd ne mt b">main.dart</code>中创建一个自动登录功能，让用户自动登录。<code class="fe nc nd ne mt b">Main.dart</code>会是这个样子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="0dba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在你把这个粘贴到<code class="fe nc nd ne mt b">main.dart</code>之后，你可能会遇到一些问题。这是因为我们还没有创造出<code class="fe nc nd ne mt b">LoginOrSignup()</code>和<code class="fe nc nd ne mt b">MyHomePage()</code>。所以，让我们从创建<code class="fe nc nd ne mt b">LoginOrSignup()</code>开始。我们还想创建一个名为<code class="fe nc nd ne mt b">login_or_signup.dart</code>的新文件。<code class="fe nc nd ne mt b">LoginOrSignup</code>会看起来很基础。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="ef86" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当将它粘贴到您的项目中时，您可能会遇到更多的问题。这一切都很好；我们会一步一步来。所以，让我们进入下一步，<code class="fe nc nd ne mt b">MyHomePage()</code>。我们想创建另一个名为<code class="fe nc nd ne mt b">homepage.dart</code>的文件。<code class="fe nc nd ne mt b">Homepage.dart</code>将是可以看到我们已经登录的地方。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="070c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，让我们创建一个可以注册的地方。我们还将检查电子邮件是否有效，并让用户填写两个密码以确保相同。之后，我们会将数据发送到服务器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7eab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将创建一个名为<code class="fe nc nd ne mt b"> login.dart</code>的新文件。这是我们将要登录的地方。这是为完成我们的应用程序而创建的最后一个文件。<code class="fe nc nd ne mt b">Login.dart</code>看起来会有点像<code class="fe nc nd ne mt b">signup.dart</code>。它看起来会像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="eff4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，如果您正确地遵循了本教程，一切都会很好。如果你有任何问题，请随时提问。还有，一定要跟着我，千万不要错过什么。</p></div></div>    
</body>
</html>