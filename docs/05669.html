<html>
<head>
<title>Take a Look at iOS 14’s New UIPageControl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">看看iOS 14的新UIPageControl</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/take-a-look-at-ios-14s-new-uipagecontrol-3207a10212b9?source=collection_archive---------3-----------------------#2020-07-27">https://betterprogramming.pub/take-a-look-at-ios-14s-new-uipagecontrol-3207a10212b9?source=collection_archive---------3-----------------------#2020-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0c5b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在WWDC 20上，苹果宣布了一些新的令人兴奋的API，用于老而无聊的UIPageControl</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d9fcd80d9f57c46fcae9af90d597ee49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o4d0sm7qe3oxghbc"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@davidgrdm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> David Grandmougin </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="b74f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将讨论iOS 14中对<code class="fe lv lw lx ly b">UIPageControl</code>的以下新变化:</p><ul class=""><li id="1e0c" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">背景样式</li><li id="5826" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">自定义指示器图像</li><li id="e9e3" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">特定索引处的自定义指示器图像</li><li id="25f4" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">无限页面(新的擦除行为)</li></ul></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="1833" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">背景样式</h1><p id="8974" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我们的<code class="fe lv lw lx ly b">UIPageControl</code>有了一个新的造型选项，叫做<code class="fe lv lw lx ly b">BackgroundStyle</code>。这是一个具有三个值的枚举:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="d244" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法很简单。默认为<code class="fe lv lw lx ly b">minimal</code>:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="9465" class="nx mv it ly b gy ny nz l oa ob">pageControl.backgroundStyle = .prominent</span></pre><p id="8daa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oc">注意:当交互状态为</em> <code class="fe lv lw lx ly b"><em class="oc">continuous</em></code> <em class="oc">时，如果将</em> <code class="fe lv lw lx ly b"><em class="oc">backgroundStyle</em></code> <em class="oc">设置为</em> <code class="fe lv lw lx ly b"><em class="oc">automatic</em></code> <em class="oc">，背景样式会自动改变。我将在本文后面讨论交互API。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/641cee8cf0e99af1c2e43de42b0739d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*wgpnj-jBCp08VQGiB5v3yw.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/eb6912bde1216a4b479573c4104de27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*cGCBdpmAefFoxPjCfDyjfA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">顶部:突出风格(新)与底部:简约风格(旧)</p></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="e996" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">自定义指示器图像</h1><p id="fff2" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">苹果引入了一个新的API来为我们的<code class="fe lv lw lx ly b">UIPageControl</code>设置自定义图标或图像，而不是旧的圆形图标。</p><p id="74b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我记得通过编写一个定制的<code class="fe lv lw lx ly b">UIPageControl</code>类来实现这一点付出了很多努力。属性名称如下:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="ad81" class="nx mv it ly b gy ny nz l oa ob">/// The preferred image for indicators. Symbol images are recommended. Default is nil.<br/> @available(iOS 14.0, *)<br/> open var preferredIndicatorImage: UIImage?</span></pre><p id="5ccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法很简单。我在这个演示中使用了SF符号:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="fc70" class="nx mv it ly b gy ny nz l oa ob">pageControl.preferredIndicatorImage = UIImage.init(systemName: “heart.fill”)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/5cd076ad6f2e6dff72122dd8a8bcd984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*zWhzSaBEI6qqKANVCypzMQ.png"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="2c6b" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">特定索引处的自定义指示器图像</h1><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="52e3" class="nx mv it ly b gy ny nz l oa ob">/**<br/> * @abstract Returns the override indicator image for the specific page, nil if no override image was set.<br/> * @param page Must be in the range of 0..numberOfPages<br/> */<br/> @available(iOS 14.0, *)<br/> open func indicatorImage(forPage page: Int) -&gt; UIImage?</span></pre><p id="8c3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你还记得你的iPhone预装的雅虎天气<strong class="lb iu"> </strong>应用吗？其下方有<code class="fe lv lw lx ly b">UIPageControl</code>，其中第一个图标是位置图标，表示当前位置。有趣的是他们从一开始就有这种控制。我过去总是考虑实现这一目标所需的实现和努力。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d147db6f10d1565ee694906a8392ed62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*4I3oHTy1LC4DQp9aRwhuyA@2x.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">雅虎天气应用UIPageControl截图</p></figure><p id="ce5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在这是小菜一碟，因为iOS 14给了我们一个新的API，你可以用它为你的<code class="fe lv lw lx ly b">UIPageControl</code>的每个索引设置一个自定义图标。</p><p id="c2c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这个演示中使用了SF符号:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="093a" class="nx mv it ly b gy ny nz l oa ob">pageControl.setIndicatorImage(UIImage.init(systemName: “location.fill”),<br/> forPage: 0)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/75c6326ed18c963e2384a6090b1d0d11.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*wXgL3iIyIzv2YgrQhfrWCA.png"/></div></figure><p id="79c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，你可以用设置每个图标的能力进行定制，你可以给我们的用户提供用户体验。</p><p id="9bb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个根据不同的下雨天气条件将自定义图标设置为页面控件的示例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/0fae9f247844de6e3aec7966c2379930.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*px3JM5wmB6mPgy8Pfe4JWA.png"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="ed44" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">无限页面(新的擦除行为)</h1><p id="7b19" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">使用新的<code class="fe lv lw lx ly b">UIPageControl</code>，您可以设置无限数量的页面。好吧，不要无限创造…但那有多酷？</p><p id="6982" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用法很简单。在本演示中，我将它设置为<code class="fe lv lw lx ly b">400</code>:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="2a3d" class="nx mv it ly b gy ny nz l oa ob">pageControl.numberOfPages = 400</span></pre><p id="426d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在iOS 14之前，我们可以设置任意数量的页面。那么苹果今年做了什么来改善这样的场景呢？</p><p id="462c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它引入了新的API和全新的UX来处理这个问题。</p><p id="fb46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">苹果在iOS14中为我们的新<code class="fe lv lw lx ly b">UIPageControl</code>提供了一个名为<code class="fe lv lw lx ly b">InteractionState</code>的自定义交互。它是一个具有两种交互类型的枚举:</p><ul class=""><li id="557a" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">分离的</li><li id="0738" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">连续的</li></ul><p id="1395" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在iOS 14中，<code class="fe lv lw lx ly b">UIPageControl</code>的交互默认值为<code class="fe lv lw lx ly b">continuous</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8c7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过将下面的属性设置为<code class="fe lv lw lx ly b">false</code>，可以将交互状态更改为<code class="fe lv lw lx ly b">discrete</code>:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="9300" class="nx mv it ly b gy ny nz l oa ob">/// Returns YES if the continuous interaction is enabled, NO otherwise. Default is YES.<br/> @available(iOS 14.0, *)<br/> open var allowsContinuousInteraction: Bool</span></pre><p id="e56a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以添加一个观察者来更改<code class="fe lv lw lx ly b">interactionState</code>属性的值，并使用下面的属性检查当前的交互状态:</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="2648" class="nx mv it ly b gy ny nz l oa ob">/// The current interaction state for when the current page changes. Default is UIPageControlInteractionStateNone<br/> @available(iOS 14.0, *)<br/> open var interactionState: UIPageControl.InteractionState { get }</span></pre><p id="4097" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，我分享了这两类互动的gif。你可以看到持续的交互帮助我们通过拖拽行为到达<code class="fe lv lw lx ly b">UIPageControl</code>的任何索引。对于离散交互，我们点击它，然后一个接一个地移动到下一个索引。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9a036ac6fb9e62cc1085c1c8a8133b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/1*5PrlqKhV_YcdtNCXXDmkJA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">离散相互作用</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/b3ff68f6d25cde17f6e7cde7c0f71541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/1*JABMoQ_nIa8K77leFpuunA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">持续互动</p></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="441d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">结论</h1><p id="1e52" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">感谢您的阅读。希望这篇文章能帮助你在app中自定义<code class="fe lv lw lx ly b">UIPageControl</code>，给你的老控带来一些生机。</p></div></div>    
</body>
</html>