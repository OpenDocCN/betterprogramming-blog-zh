<html>
<head>
<title>5 Tips To Quickly Tackle Errors in Your Production Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速处理产品代码中的错误的5个技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-tips-to-quickly-tackle-errors-in-your-production-code-be4633bf8ed0?source=collection_archive---------10-----------------------#2021-01-26">https://betterprogramming.pub/5-tips-to-quickly-tackle-errors-in-your-production-code-be4633bf8ed0?source=collection_archive---------10-----------------------#2021-01-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d306" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建健壮软件的简单方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5c4f283add681ad6743ee115bfaa3187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JBUchEJfJtq7ND4X"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="3040" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开发人员经常在编写代码的同时编写测试用例。除此之外，他们甚至在工作流程中增加了一些<a class="ae ky" href="https://www.guru99.com/exploratory-testing.html" rel="noopener ugc nofollow" target="_blank">探索性测试</a>。然而，有时，有一些错误逃过了他们深思熟虑的测试过程，并最终出现在生产中。</p><p id="8d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多这样的错误都是最终用户经历和发现的——他们中的一些人可能会报告问题，一些人可能稍后会尝试，或者一些人可能会因为错误而直接拒绝产品。</p><p id="8e51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，能够对生产中出现的错误做出快速反应是非常重要的。在本地开发环境中工作时，很容易调试和修复错误，因为一切都在开发人员的控制之下。相比之下，在生产环境下运行的代码中查找错误完全是一项不同的任务。发现前端应用程序中的错误更加困难，因为代码运行在客户端的设备上。</p><p id="bf0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将看看一些简单的解决方案，它们可以用来发现生产中的错误，以及如何尽快做出反应。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3157" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.使用错误报告服务</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/4caef75681133c4a5ccd98362bca9d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2-r1768lndVAbXSa.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://sentry.io/welcome/" rel="noopener ugc nofollow" target="_blank"> Sentry.io错误报告</a></p></figure><p id="6c29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些服务可用于捕捉应用程序中发生但未被处理的异常。这些服务会报告错误以及堆栈跟踪和发生错误的实际代码。除此之外，还可以定制它们来报告任何其他数据和错误。这是最简单的解决方案，可以用来检测破坏软件和破坏用户体验的实际错误。</p><h2 id="cc44" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">可从这些服务获得信息的例子</h2><ul class=""><li id="208f" class="nh ni it lb b lc nj lf nk li nl lm nm lq nn lu no np nq nr bi translated">发生的实际错误</li><li id="c46e" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">发生错误的行号</li><li id="8afb" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">错误发生时的堆栈跟踪</li><li id="a922" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">特定错误发生的次数和时间</li><li id="75c2" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">在前端应用程序中，我们可以获得当前的URL，甚至是用户到达那里的一系列步骤</li></ul><p id="c29e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">集成错误报告服务非常容易。事实上，你甚至可以使用<a class="ae ky" href="https://developers.google.com/analytics/devguides/collection/analyticsjs/exceptions" rel="noopener ugc nofollow" target="_blank">谷歌分析</a>来捕捉错误。然而，有更强大的工具。这些工具大部分是免费的，有一些受限的特性。不过这些免费功能对于一个小规模的应用来说已经足够了。然而，为高级功能付费并不总是花费很多。例如，<a class="ae ky" href="https://rollbar.com/pricing/" rel="noopener ugc nofollow" target="_blank">滚动条</a>是一项错误报告服务，起价低至每月1美元。</p><p id="fa2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他一些受欢迎的服务有<a class="ae ky" href="https://sentry.io/" rel="noopener ugc nofollow" target="_blank">哨兵</a>、<a class="ae ky" href="https://cloud.google.com/products/operations" rel="noopener ugc nofollow" target="_blank">谷歌云的操作套件</a>、<a class="ae ky" href="https://instabug.com/" rel="noopener ugc nofollow" target="_blank"> Instabug </a>(主要针对移动应用)，以及<a class="ae ky" href="https://www.bugsnag.com/" rel="noopener ugc nofollow" target="_blank"> Bugsnag </a>。这些工具可以在几分钟内设置好，因此尝试这些选项并找出哪一个最适合您的应用程序应该不会太难。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="817a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.性能监控服务</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/37cce2d71fa03a241204c44d1ca52749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OIiw12pfQ7l_KF63.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://cloud.google.com/products/operations" rel="noopener ugc nofollow" target="_blank"> Google Cloud的操作套件对单个请求的分解</a></p></figure><p id="bc13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向应用程序添加错误报告只是开始。还有一些服务可以监控应用程序的性能。这些工具提供了一些有价值的信息，尽管它们可能不如<a class="ae ky" href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)" rel="noopener ugc nofollow" target="_blank">剖析工具</a>强大。</p><h2 id="2de8" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">可从这些服务获得信息的例子</h2><ul class=""><li id="4be9" class="nh ni it lb b lc nj lf nk li nl lm nm lq nn lu no np nq nr bi translated">处理请求所需的时间</li><li id="6ba1" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">一个请求的概述被分解成更小的部分，如HTTP请求、数据库查找等。</li><li id="d4a9" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">在前端进行第一次绘制所花费的时间</li><li id="7a87" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">前端接收对请求的回复所花费的时间</li></ul><h2 id="c93b" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">示例使用案例</h2><ul class=""><li id="7492" class="nh ni it lb b lc nj lf nk li nl lm nm lq nn lu no np nq nr bi translated">将应用程序的一部分的当前性能与过去的性能进行比较</li><li id="3049" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">找出数据库查询或实际代码中是否存在性能瓶颈</li><li id="50d2" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">当应用程序的某些关键部分的性能下降时设置警报</li></ul><p id="af9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这些服务需要注意的一点是，与前端相比，它们的后端功能更强大。</p><p id="ae22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些错误报告服务也可以兼作优秀的性能监控工具。哨兵、谷歌云的操作套件、<a class="ae ky" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank">普罗米修斯</a>、<a class="ae ky" href="https://logrocket.com/" rel="noopener ugc nofollow" target="_blank"> LogRocket </a>都是一些性能监控工具。正如错误监控服务一样，研究哪种服务最适合您的应用程序非常重要。然而，与错误监控服务不同，这些工具中的一些可能需要时间来设置，尤其是在后端。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8ccd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.记录</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/d1478d13ca63aff5136ac5e94de4c9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p_Y9t5T_QS7i-uNn.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://docs.logrocket.com/docs/data-collected" rel="noopener ugc nofollow" target="_blank">log rocket</a>中Redux的前端日志</p></figure><p id="725a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">日志记录是最重要的事情之一，可以实现它来帮助在发现错误或bug后采取行动。我数不清有多少次日志记录让我很容易理解错误，而手动理解这些错误可能需要花费大量时间。</p><h2 id="1211" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">示例使用案例</h2><ul class=""><li id="ad8f" class="nh ni it lb b lc nj lf nk li nl lm nm lq nn lu no np nq nr bi translated">当检测到错误或缺陷时，查看当时的日志有助于找出原因。</li><li id="9ed5" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">如果数据不幸意外丢失，日志在某种程度上甚至是有用的。如果有足够多的日志，即使不能确定丢失了什么数据，至少也能更容易地确定丢失数据的性质。</li></ul><p id="9dc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传统日志记录的一个缺点是搜索日志通常会很慢，因为有很多日志。在无法建立自己的日志捕获服务的情况下，可以集成许多日志服务。</p><p id="d35f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些日志服务有LogRocket、<a class="ae ky" href="https://logdna.com/" rel="noopener ugc nofollow" target="_blank"> LogDNA </a>、<a class="ae ky" href="https://www.loggly.com/" rel="noopener ugc nofollow" target="_blank"> Loggly </a>、<a class="ae ky" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html" rel="noopener ugc nofollow" target="_blank">亚马逊CloudWatch </a>和Google Cloud的操作套件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a55d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.警报和通知</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2ab00a0e51de564a7c6946f15c0a8910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*NbLXbb1COnf2xUvTa3ybQQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">警报示例(使用松弛块套件创建)</p></figure><p id="67c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">集成错误报告和性能监控工具是一回事；实际上及时对关键问题做出反应是另一回事。当问题出现时，设置警报和通知是非常重要的。很多服务和工具会在检测到问题时自动发送电子邮件。</p><p id="1fb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在团队使用的任何通信平台上设置通知是一个好主意。一些服务有Slack等流行平台的插件和机器人。然而，他们中的大多数都提供了<a class="ae ky" href="https://en.wikipedia.org/wiki/Webhook" rel="noopener ugc nofollow" target="_blank"> webhooks </a>，所以为团队使用的平台建立一个定制的警报服务并不困难。</p><p id="77e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">设置警报时要做的一件重要事情是确定哪种警报是关键的。例如，后端抛出的导致整个应用程序崩溃的异常可能被认为是关键的。类似地，在提供对企业核心服务的访问的URL中发生的任何错误都可能被认为是严重的。这些特定的错误可以被设置为高优先级，以便其他错误不会在团队不工作时打扰他们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b28c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.用户的联系点</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/002fc07e70d5b93abdee28eac39e3095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/0*3qFebYwq-X9rRInw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://commons.wikimedia.org/wiki/File:Article-Feedback-Form-V5-Option2-10-20.png" rel="noopener ugc nofollow" target="_blank">反馈表示例</a></p></figure><p id="3412" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个更多的是用户体验解决方案，而不是技术解决方案。此外，这一方法一直沿用至今。在应用程序中有一个清晰可见和易于使用的“联系我们”或“给我们反馈”按钮可以鼓励用户报告他们在应用程序中遇到的问题。此外，它向用户表明，公司实际上关心他们和他们的意见。许多公司追随的一个新趋势是在他们的网站上集成一个<a class="ae ky" href="https://developers.facebook.com/docs/messenger-platform/discovery/facebook-chat-plugin/" rel="noopener ugc nofollow" target="_blank">脸书信使插件</a>或其他机器人。</p><p id="e22e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一件事可以让事情变得更简单，那就是将反馈直接发送到团队使用的沟通平台，而不是只发送电子邮件或在管理面板中显示。</p><p id="3cc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果客户主动报告问题，那么集成像<a class="ae ky" href="https://www.zendesk.com/" rel="noopener ugc nofollow" target="_blank"> Zendesk </a>或<a class="ae ky" href="https://www.intercom.com/" rel="noopener ugc nofollow" target="_blank"> Intercom </a>这样的东西来管理支持票也是一个好主意。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2f45" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">额外收获:关于选择报告工具的一些提示</h1><ul class=""><li id="281e" class="nh ni it lb b lc nj lf nk li nl lm nm lq nn lu no np nq nr bi translated">在选择付费版本之前，考虑一下免费版本，看看是否已经满足了你的需求。</li><li id="bb4e" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">确保服务提供商支持您使用的语言和平台。</li><li id="e9e8" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">研究服务提供商是否有机器人或与您使用的通信平台的集成。如果没有，检查他们是否有webhooks，以及开发与您的通信平台的定制集成有多困难。</li><li id="08d9" class="nh ni it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">检查它们是否支持添加到报告中的自定义数据(如果您有此需要)。</li></ul></div></div>    
</body>
</html>