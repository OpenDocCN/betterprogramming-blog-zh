<html>
<head>
<title>Using Sidebar in SwiftUI Without a NavigationView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在没有NavigationView的SwiftUI中使用侧栏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-sidebar-in-swiftui-without-a-navigationview-94f4181c09b?source=collection_archive---------3-----------------------#2020-11-09">https://betterprogramming.pub/using-sidebar-in-swiftui-without-a-navigationview-94f4181c09b?source=collection_archive---------3-----------------------#2020-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ea4d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解SwiftUI的新侧边栏</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cce388ac63ee93e3d7c2425babc1f5d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3zMmBZ1F4lCGYPhZhy44w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">苹果展示其音乐应用的侧边栏</p></figure><p id="0851" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SwiftUI真的很容易和快速的原型UI。许多开发者用不同的措辞表达了这种观点。</p><p id="5fb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是SwiftUI如何应对现实项目的复杂需求呢？目前，它的生产时间只有一年多一点，我们在App Store中找不到很多SwiftUI应用。</p><p id="fc69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果有任何构建和发布SwiftUI应用的好时机，那就是现在。</p><p id="eef9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">声明:你的应用的最低目标需要是iOS 13。</p><p id="5077" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管SwiftUI的大部分产品特性只在iOS 14中提供，但你可以为iOS 13构建一个不错的应用，当用户更新时，它会变得非常出色。</p><p id="357b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以许多应用程序中集合视图的常见需求为例。你可以在iOS 14中使用新的惰性网格，并下降到<code class="fe ls lt lu lv b">VStack</code>和<code class="fe ls lt lu lv b">HStack</code>的组合，正如Paul在本文<a class="ae kv" href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-position-views-in-a-grid-using-lazyvgrid-and-lazyhgrid" rel="noopener ugc nofollow" target="_blank">中为iOS 13</a>所解释的。此外，如果你的要求可以使用列表来满足，那么在iOS 13中使用它。</p><p id="38ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果您的需求很复杂，或者您想稍微调整一下默认行为，您可能会发现这很困难。今天我们将处理一个这样的场景，我希望对默认行为进行一些调整。在接下来的几周里，我们会看到更多。</p><p id="7b26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">SidebarListStyle</code>是今年推出的，让你很容易在应用中获得默认的侧边栏行为。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="126f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就这几行，你就可以在一个漂亮的主细节布局中得到侧边栏的默认行为。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ly"><img src="../Images/8b923e7071f41a52e7c2f4d3bc98f789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbkj032-yh6tOe7kbnxGCw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有默认行为的边栏</p></figure><p id="ec05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你得到了很多现成的东西:一个带有间隔列表项的侧边栏，没有分隔符，一个很好的选择指示，以及一个切换侧边栏可见性的按钮。如果您为列表项使用新的<code class="fe ls lt lu lv b">Label</code>，图像将出现在<code class="fe ls lt lu lv b">accentColor</code>中。太酷了，只用了几行代码！现在我的要求是有侧边栏和细节视图，但我不希望它们在一个<code class="fe ls lt lu lv b">NavigationView</code>内。听起来很简单，对吧？让我们试试。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">对SplitView使用HStack</p></figure><p id="2af0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出是…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lz"><img src="../Images/007fda86f575a119abe91a063f9bbc75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eF7MTxXNyyQAZWWn_RXHsA.png"/></div></div></figure><p id="b618" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不是我期望从上面的代码中看到的。但是SwiftUI视图对环境做出反应；你可以说SwiftUI视图依赖于环境。我们得到了没有分隔符的间隔列表项，但没有选择，因此点击时没有高亮显示，我们需要以所需的大小框住视图。</p><p id="10df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不知道为什么移除<code class="fe ls lt lu lv b">NavigationLink</code>会停止<code class="fe ls lt lu lv b">List</code>选择的工作。你可以通过给<code class="fe ls lt lu lv b">Text</code>增加一个<code class="fe ls lt lu lv b">onTapGesture</code>来让它工作。列表中的<code class="fe ls lt lu lv b">selection</code>参数不再需要。您可以使用<code class="fe ls lt lu lv b">frame</code>修改器来固定侧边栏的宽度。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c646" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这次让我们碰碰运气。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ma"><img src="../Images/079c015431a50b09d8857b160fe939b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*47plevq39Y6ULU2_Ib_uWQ.png"/></div></div></figure><p id="2990" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，这不是我所期望的，但是SwiftUI完美地完成了它的工作。我们可以通过在<code class="fe ls lt lu lv b">detailView</code>前后添加一个<code class="fe ls lt lu lv b">Spacer()</code>来轻松解决这个问题。</p><p id="c93b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该功能工作正常，因此您可以轻按任何项目来选择它。但是没有哪个项目当前被选择的视觉指示。为了突出显示选择，添加一个带有<code class="fe ls lt lu lv b">accentColor</code>的<code class="fe ls lt lu lv b">background</code>。</p><p id="20c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是最终的输出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mb"><img src="../Images/a8ec8c34f17d1770c46d7ee9493e154a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dK1oUJHuxat8G67px8NtqQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">期望的结果</p></figure><p id="1ec6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是获得该输出的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="bb45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用了一个<code class="fe ls lt lu lv b">HStack</code>和一个<code class="fe ls lt lu lv b">contentShape</code>修饰符，这样点击列表项的任何地方都可以进行选择。</p><p id="f19b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不是完美的解决方案，但这是可行的。我花了一些心理准备来公开分享可行的解决方案，而不是一直等待完美的解决方案。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><p id="8e6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码快乐！</p></div></div>    
</body>
</html>