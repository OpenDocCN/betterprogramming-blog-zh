<html>
<head>
<title>5 Built-In Ways To Edit a File In Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Linux中编辑文件的5种内置方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-built-in-ways-to-edit-a-file-in-linux-c39b2f0b99b2?source=collection_archive---------15-----------------------#2022-06-16">https://betterprogramming.pub/5-built-in-ways-to-edit-a-file-in-linux-c39b2f0b99b2?source=collection_archive---------15-----------------------#2022-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a9bf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">和几十年前一样管用的经典作品</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/802d1f9079a9a1d7606e8c38da4092bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnsVp3DXVT1TrRlh6StA4w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">彼得·冈博斯在<a class="ae ky" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="687d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包管理器和第三方插件可以是生产力的惊人奇迹。它们节省时间，并提供简单的方法来扩展应用程序和操作系统的功能。但是当这些工具不可用时会发生什么呢？当你必须完全依赖你的操作系统的时候？当你的网络连接消失时。</p><p id="63ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Linux世界中，许多发行版都预装了各种奇妙的程序和实用程序。如果您在紧要关头使用离线机器工作或者受到严重限制(空间、政策等)。)可以安装什么软件，那么使用标准工具可能是唯一的选择。</p><p id="16aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探索一些缺省的Linux工具，供您处理文本文件。其中一些工具将是真正的文本编辑器，而其他的则是具有广泛特性的通用程序和语言。学习这些永恒的工具将帮助你在有限的系统上工作时更加灵活。</p><h2 id="15ca" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">1.六(男)</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/2d37df9e430592d686a82391be8cffe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/0*O5ZRw95lGHTARlHd.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Vim徽标。<a class="ae ky" href="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Vimlogo.svg/128px-Vimlogo.svg.png" rel="noopener ugc nofollow" target="_blank">来源</a>。</p></figure><p id="a9cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个经典的、永远有用的编辑器，已经存在超过45年了。vi编辑器提供了一个快速、灵活的可视文本编辑器，您可以用许多不同的方式来扩展和定制它。最棒的是，这个编辑器在几乎所有的Linux发行版中都是默认可用的。</p><p id="7d2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一开始使用vi可能会令人望而生畏，但是一旦你熟悉了基本的命令集，你很快就能在文件中穿梭自如。下面是一些基本的vi命令，可以帮助您入门:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/0f535c9f8a32ce94f0a8edeebc025c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obYmm5-KiQ1vjR5B_AC7WA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基本vi命令。</p></figure><p id="f6f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管大多数用户都熟悉vim，但默认情况下这并不总是可用的。有时vim必须通过包管理器单独安装。出于这个原因，熟悉基本的vi用法是有益的，不管怎样，大多数VI用法都可以直接转化为vim。</p><p id="5d05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">vi的官方手册页是<a class="ae ky" href="https://linux.die.net/man/1/vi" rel="noopener ugc nofollow" target="_blank">,可以在这里找到</a>。</p><h2 id="abc6" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">2.一项Linux指令</h2><p id="9f5b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">sed(或“流编辑器”)工具甚至比vi还要老(<a class="ae ky" href="https://en.wikipedia.org/wiki/Sed" rel="noopener ugc nofollow" target="_blank"> 1974 </a>)。这个巧妙的高级程序能够以许多不同的有趣的方式处理文本。尽管sed的学习难度很高，但是一旦掌握了定制语法，可能性几乎是无穷无尽的。</p><p id="4dbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了处理一个文件，sed循环遍历每一行，并根据用户期望的条件应用不同的操作。sed中甚至包含了一点编程语言，用于提供复杂的替换和其他精确的选择器。</p><p id="97de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您有一个包含以下文本的文件:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="2bfe" class="lv lw it mw b gy na nb l nc nd"># file.txt<br/>foo<br/>bar<br/>baz<br/>foo<br/>bar<br/>baz</span></pre><p id="470e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要更改某些行并用新文本替换它们，该怎么办？借助sed，您可以轻松做到这一点。使用就地编辑功能sed将只替换匹配<code class="fe ne nf ng mw b">foo</code>的行:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="5a83" class="lv lw it mw b gy na nb l nc nd">sed -i 's/foo/FOO/' file.txt</span></pre><p id="a00a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过管道在命令行上进行更改，直接调用sed进行就地编辑(使用<code class="fe ne nf ng mw b">-i</code>)或者将sed构建到另一个程序中以利用其文本处理能力。有很多方法可以使用这个非常方便的工具。</p><p id="cd9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">官方sed手册是<a class="ae ky" href="https://www.gnu.org/software/sed/manual/sed.html" rel="noopener ugc nofollow" target="_blank">这里有</a>。</p><h2 id="9c64" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">3.毫微；纤（10的负九次方）</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/ffd60526c915b4c163e482427a65ea48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wtjAEK70hrMkuJn7lbYiDQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">GNU纳米标志。<a class="ae ky" href="https://www.nano-editor.org/" rel="noopener ugc nofollow" target="_blank">来源</a>。</p></figure><p id="cb6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然不如其功能更丰富的版本vi受欢迎，但nano editor非常简单，易于上手。这个编辑器很简单，甚至在主窗口的底部包含了基本的使用信息，以防你需要提醒。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/e6e31b1df3ee71aa051f50af60a5d555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4_GrtcTOSQl-kyTo_kPs4A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">主窗口中的基本nano帮助信息。</p></figure><p id="240b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启动并运行nano只需要很少的记忆。对于那些只想快速修改文件然后继续前进的初学者来说，这是非常好的。Nano最适合快速编辑，但由于其有限的功能，不太适合成熟的开发。</p><p id="ce55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看官方的nano文档<a class="ae ky" href="https://www.nano-editor.org/docs.php" rel="noopener ugc nofollow" target="_blank">，这里有</a>。</p><h2 id="3e10" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">4.回声</h2><p id="3789" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">接下来，我们有几乎在任何地方都可以得到的可靠的<code class="fe ne nf ng mw b">echo</code>实用程序。这不是一个编辑器，但它是一种覆盖或追加文本到文件的快捷方式。如果你想以编程方式向一个文件中添加条目，或者你很着急，你可以<code class="fe ne nf ng mw b">echo</code>将它们放入。</p><p id="2de1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要用新文本覆盖文件的所有内容，您可以执行如下命令:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="a908" class="lv lw it mw b gy na nb l nc nd">echo "my cool text" &gt; file.txt</span></pre><p id="c93c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您只想追加到文件中，您可以运行:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="260e" class="lv lw it mw b gy na nb l nc nd">echo "some more text" &gt;&gt; file.txt</span></pre><p id="960f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在命令行上处理其他程序的输出，并希望将它保存到一个文件中，并添加一些内容，您也可以这样做:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="e193" class="lv lw it mw b gy na nb l nc nd">echo "the current date is: $(date)" &gt; file.txt</span></pre><p id="9ca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然您没有真正的文本编辑器或解析语言的全部灵活性，但是您确实能够毫不费力地将文本保存到文件中。</p><p id="fc01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">echo的非常简洁的手册页是<a class="ae ky" href="https://linux.die.net/man/1/echo" rel="noopener ugc nofollow" target="_blank">，可以在这里找到</a>。</p><h2 id="2932" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">5.AWK</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9ca6b5f8bfd0f2f16772edb2ea3fbb8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*OVD_XB2KT5z5zOK9.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/The-AWK-Programming-Language.svg/320px-The-AWK-Programming-Language.svg.png" rel="noopener ugc nofollow" target="_blank">来源</a>。</p></figure><p id="bac1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">《AWK》绝对经典(<a class="ae ky" href="https://en.wikipedia.org/wiki/AWK" rel="noopener ugc nofollow" target="_blank"> 1977 </a>)，也是另一个有自己专用语言的节目。与sed类似，AWK允许您处理文本文件并操纵其内容。AWK语言比sed语言更健壮，允许更高级的数据提取技术。有了AWK，你可以很容易地开发一套广泛的规则来精确定位文件中极其特殊的模式。</p><p id="b57c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看前面的同一个文本文件:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="0cc8" class="lv lw it mw b gy na nb l nc nd"># file.txt<br/>foo<br/>bar<br/>baz<br/>foo<br/>bar<br/>baz</span></pre><p id="9554" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们只想获取包含<code class="fe ne nf ng mw b">foo</code>的行。有了AWK，我们只需传递一个正则表达式就可以做到这一点:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="fd0e" class="lv lw it mw b gy na nb l nc nd">awk '/foo/' file.txt</span></pre><p id="e984" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将输出:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="eac7" class="lv lw it mw b gy na nb l nc nd">foo<br/>foo</span></pre><p id="a8b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单，对吧？AWK的优势在于表格数据。假设您有一个包含多列的文件，如下所示:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="9620" class="lv lw it mw b gy na nb l nc nd"># file2.txt<br/>foo    foo2<br/>bar    bar2<br/>baz    baz2<br/>foo    foo2<br/>bar    bar2<br/>baz    baz2</span></pre><p id="0811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你只想得到第二列，你可以这样做:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="5d41" class="lv lw it mw b gy na nb l nc nd">awk '{ print $2 }' file2.txt</span></pre><p id="b7e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将输出:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="7263" class="lv lw it mw b gy na nb l nc nd">foo2<br/>bar2<br/>baz2<br/>foo2<br/>bar2<br/>baz2</span></pre><p id="def7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然AWK没有像sed一样提供默认的就地编辑文件的方法，但是可以非常容易地将输出通过管道传输到一个新文件。要操作现有文件的内容并保存新文件，您可以使用以下代码片段:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="6bfe" class="lv lw it mw b gy na nb l nc nd">awk '{ print $2 }' file2.txt &gt; results.txt</span></pre><p id="9475" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在在<code class="fe ne nf ng mw b">results.txt</code>文件中，你将只能看到AWK的输出。</p><p id="1c85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看GNU Awk用户指南<a class="ae ky" href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="noopener ugc nofollow" target="_blank">获取大量关于构建表达式和开始使用Awk的文档。</a></p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="1fa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！如果你喜欢这篇文章，请看看下面我写的其他几篇Linux文章:</p><ul class=""><li id="6f3a" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/linux-commands-you-should-memorize-if-you-manage-servers-1b7d371237ac"> <em class="oa">管理服务器应该记住的5条Linux命令</em> </a></li><li id="e399" class="nr ns it lb b lc ob lf oc li od lm oe lq of lu nw nx ny nz bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/become-a-better-apt-user-with-these-commands-ecd7b13fd502"> <em class="oa">使用这些命令</em> </a>成为更好的“apt”用户</li><li id="7d84" class="nr ns it lb b lc ob lf oc li od lm oe lq of lu nw nx ny nz bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/build-a-useful-linux-login-banner-on-aws-with-ansible-4c000aba1258"> <em class="oa">用Ansible </em> </a>在AWS上搭建一个有用的Linux登录Banner</li></ul></div></div>    
</body>
</html>