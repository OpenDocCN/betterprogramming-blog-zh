<html>
<head>
<title>How to Create the Matrix Text Effect With JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript创建矩阵文本效果</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-the-matrix-text-effect-with-javascript-325c6bb7d96e?source=collection_archive---------6-----------------------#2022-01-04">https://betterprogramming.pub/how-to-create-the-matrix-text-effect-with-javascript-325c6bb7d96e?source=collection_archive---------6-----------------------#2022-01-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0780" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">绿色雨滴文字效果很容易用JavaScript和HTML画布实现，看起来仍然很棒</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/366bcb903b5962812d640c230969c7f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tjHTmF_1SUY6_pykU6_VpQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">JavaScript中的矩阵文本效果。图片作者。</p></figure><p id="6cfd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">矩阵文本效果是2000年代早期最显著的效果之一。受《黑客帝国复活》(我还没去看)上映的启发，我重新看了旧的三部曲，这让我想自己实现这个效果。事实证明，它非常容易实现，当你全屏看到它时，你(和其他碰巧路过的人)会认为你是有史以来最伟大的黑客。那么我们来看看如何用JavaScript创建矩阵文本效果。</p><h1 id="8877" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">履行</h1><p id="5d47" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">像互联网上的大多数动画内容一样，我们从HTML canvas元素开始。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="e7f1" class="mx lw it mt b gy my mz l na nb">&lt;canvas id=”canvas” width=”1280" height=”720" style=”display:block; margin:0 auto;”&gt;&lt;/canvas&gt;</span></pre><p id="59b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在JavaScript端的<code class="fe nc nd ne mt b">init()</code>函数中，我们首先保存对canvas元素及其2D上下文的引用。然后我们可以初始化矩阵效果，开始主循环。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4541" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了初始化矩阵效果，我们必须首先定义一些全局变量，比如tile size，它定义了网格单元和文本的大小。然后，我们将画布的总高度除以平铺尺寸，以计算每列平铺的最大数量。</p><p id="664b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还将画布的宽度分成几列，这样我们就可以跟踪每一列的文本。对于每一列，我们存储它的x位置，然后根据最大堆栈高度创建一个随机高度。最后，每一列都需要一个计数器变量，以便在效果的每一帧中进行计数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="ec98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">主循环非常简单，我们只调用draw函数，等待50毫秒，然后重复。等待50毫秒会产生每秒20帧的效果，这对于这种类型的效果来说已经足够了，但是您可以随意试验时间来创建更慢或更快的下雨文本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="520a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">draw函数稍微复杂一点，但也不过分复杂。我们首先在整个画布上绘制一个半透明的黑色矩形。这慢慢地模糊了我们在之前的帧中画的字符，并给下雨的文本一个褪色的痕迹。</p><p id="f731" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后我们遍历所有的列，选择一个随机的字符，它被画在每一列的底部。最后，我们增加堆栈计数器变量(跟踪每个堆栈的底部)，如果它大于该堆栈的最大高度，我们将计数器重置为0，并为该列创建一个新的随机堆栈高度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="c038" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">活生生的例子</h1><p id="2a0a" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">因为这个效果比我想象的要容易创建，所以我花了更多的时间添加了平铺尺寸和淡入度的选项，所以你可以尝试不同的值，看看它们看起来怎么样。我还添加了一个按钮，让效果全屏，所以当你离开你的电脑，你可以让矩阵效果全屏，当有人走过，他们会认为你是有史以来最伟大的黑客。</p><p id="ce46" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://pingpoli.de/matrix.html" rel="noopener ugc nofollow" target="_blank">实例</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/1783ab867d9eb515d19f5cfe7b1a9341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vWph4y3DhuEfTlEfOFzKhA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">JavaScript中的矩阵文本效果。图片作者。</p></figure><h1 id="4261" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">完全码</h1><p id="31b0" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">以下是JavaScript中矩阵效果的完整源代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="5a51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://gist.github.com/pingpoli/499f3aac8737039a40527263833a2453" rel="noopener ugc nofollow" target="_blank">这里也是带有额外选项和全屏的实时示例的完整代码。</a></p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="9522" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">矩阵文本效果是21世纪初最具标志性的效果之一，它与黑客和广泛的计算机知识相关联。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2923" class="mx lw it mt b gy my mz l na nb">Fun fact</span><span id="ba2a" class="mx lw it mt b gy np mz l na nb">I sent the link to my sister and she replied “Did you give me a computer virus with this?” (mostly joking though, she has decent computer knowledge). However, many people believe that the Matrix effect indicates hacking and is very complicated, but as you can see it’s actually very easy to create with modern JavaScript.</span></pre></div></div>    
</body>
</html>