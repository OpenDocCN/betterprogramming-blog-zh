<html>
<head>
<title>Build a Horizontal Filter View in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中构建水平过滤器视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-basics-horizontal-filter-view-fb031fbe7e40?source=collection_archive---------7-----------------------#2022-09-29">https://betterprogramming.pub/swiftui-basics-horizontal-filter-view-fb031fbe7e40?source=collection_archive---------7-----------------------#2022-09-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6807" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">scroll view+h stack+enum</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f7c937d055173a16edc9808622c3bc46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FpZahQ5NM9kZHJAW9ismMA.gif"/></div></div></figure><p id="ede8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">许多应用程序需要一个水平过滤器来显示不同类别的内容。UIKit包含了大量构建这些视图的方法，从自己构建解决方案到导入完整的第三方SDK来处理它。</p><p id="a868" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，SwiftUI仍然相对较新(尽管已经是第三年)。毫不奇怪，在生产环境中，您可能很难以简单、可伸缩和可定制的方式复制这种行为。</p><p id="ae72" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文旨在向您展示一种快速且易于理解的方法，您可以在SwiftUI中完全复制水平过滤器视图。</p><p id="b16c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们开始吧！</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="49bc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重要的事情先来！我们需要几样东西:</p><ol class=""><li id="1d8d" class="lu lv iq kt b ku kv kx ky la lw le lx li ly lm lz ma mb mc bi translated">表示我们要显示的项目的枚举</li><li id="0ae4" class="lu lv iq kt b ku md kx me la mf le mg li mh lm lz ma mb mc bi translated">表示我们的水平过滤器容器的视图。</li><li id="6dc7" class="lu lv iq kt b ku md kx me la mf le mg li mh lm lz ma mb mc bi translated">一个<code class="fe mi mj mk ml b">Binding</code>变量，用于跟踪所选的过滤器</li><li id="70cf" class="lu lv iq kt b ku md kx me la mf le mg li mh lm lz ma mb mc bi translated">我们希望在容器中显示的项目数组</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="a704" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的代码将产生一些可以编译的东西，还没有显示任何东西，但是确实给了我们一个很好的基础。</p><p id="7d5e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加了一个<code class="fe mi mj mk ml b">ScrollView</code>作为第一个视图元素，因为我们希望所有的过滤器项目都可以在其范围内滚动，接下来是用于创建过滤器水平列表的<code class="fe mi mj mk ml b">HStack</code>。</p><p id="d64c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可能会注意到我们的枚举符合<code class="fe mi mj mk ml b">CaseIterable</code>这允许我们使用<code class="fe mi mj mk ml b">allCases</code>变量来返回枚举的所有情况，按照它们作为数组声明的顺序。</p><p id="ead0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们继续讨论遍历我们的<code class="fe mi mj mk ml b">FilterCategory</code>枚举并填充我们的<code class="fe mi mj mk ml b">HStack</code>的逻辑。</p><p id="791c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们刚刚创建的<code class="fe mi mj mk ml b">HStack</code>中添加下面的代码，这将迭代数组中的每一项，并创建一个<code class="fe mi mj mk ml b">Text</code>视图，其内容是当前enum的<code class="fe mi mj mk ml b">rawValue</code>(“推荐”、“特性”等)。).您还可以看到添加了一个修饰符<code class="fe mi mj mk ml b">onTapGesture</code>来改变当前的<code class="fe mi mj mk ml b">selectedItem</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="3196" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您现在运行这段代码，您应该会看到以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/b50802a39e048c01646654c0d1b31b99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PQCXvUKTgV3u-nDGBjvVNQ.gif"/></div></div></figure><p id="33a6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们有一个可滚动的水平列表。</p><p id="4a7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然我们还没有完成，我们有一些视觉上的东西可以与你互动，但它看起来不太好，当然也不能清楚地表明你选择了哪个项目。让我们现在就解决这个问题！</p><p id="7932" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是时候创建一个新视图来表示我们的单个过滤器项目了。我们想要的东西，显示标题(枚举字符串值)的黑色，如果被选中，灰色，如果没有提供一些视觉对比，以及一个漂亮的明亮的下划线，真正显示哪个是当前的过滤器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="fdd6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有一点需要解释，让我们来分解一下:</p><ul class=""><li id="561a" class="lu lv iq kt b ku kv kx ky la lw le lx li ly lm mp ma mb mc bi translated">我们已经创建了一个新的<code class="fe mi mj mk ml b">View</code>来包含我们对水平过滤器项目的逻辑和定制。// 1</li><li id="81ee" class="lu lv iq kt b ku md kx me la mf le mg li mh lm mp ma mb mc bi translated">我们有一个常数用于存储过滤器类别// 2</li><li id="cfb7" class="lu lv iq kt b ku md kx me la mf le mg li mh lm mp ma mb mc bi translated">所选过滤器的绑定变量// 3</li><li id="89c7" class="lu lv iq kt b ku md kx me la mf le mg li mh lm mp ma mb mc bi translated">用于垂直排列<code class="fe mi mj mk ml b">Text</code>元素的<code class="fe mi mj mk ml b">VStack</code>和下划线// 4的<code class="fe mi mj mk ml b">Rectangle</code></li><li id="693d" class="lu lv iq kt b ku md kx me la mf le mg li mh lm mp ma mb mc bi translated">一个<code class="fe mi mj mk ml b">Text</code>元素，显示过滤项的rawValue，带有一些基本的字体定制，但带有一些嵌入的逻辑，根据常量是否匹配选定的过滤器来改变文本的颜色。// 5</li><li id="2cc7" class="lu lv iq kt b ku md kx me la mf le mg li mh lm mp ma mb mc bi translated">一个<code class="fe mi mj mk ml b">if</code>语句，使用我们刚刚实现的改变<code class="fe mi mj mk ml b">Text</code>颜色的相同逻辑来显示/隐藏<code class="fe mi mj mk ml b">Rectangle</code>。</li><li id="0c40" class="lu lv iq kt b ku md kx me la mf le mg li mh lm mp ma mb mc bi translated">最后，我们创建了一个高度固定的<code class="fe mi mj mk ml b">Rectangle</code>，它的颜色设置为明亮的<code class="fe mi mj mk ml b">.orange</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/63e0b8757a663024b8d11f389f137f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*ZMnE5A7KkD12nwOwE9-HcA.png"/></div></figure><p id="df62" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这看起来更好！但是，还不完全是这样，在设置了<code class="fe mi mj mk ml b">Text</code>元素的字体之后，添加以下内容。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/67a157c560937560b52809abd2e757b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPzkBa4cXHrfxhN6f_0mMQ.png"/></div></div></figure><p id="3416" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好多了！</p><p id="c647" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这基本上涵盖了它的实现，允许您选择不同的元素并更新所选的过滤器，但您可能会问，这在什么情况下有用？与独立视图相比，它如何在应用程序中实现？</p><p id="b215" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是一个简单的示例，使用我们构建的内容来展示如何基于所选的过滤器切换内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="766e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">水平过滤器视图的SwiftUI实施到此结束，最终演示如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/304702abbea7a294596a12aa456bf52f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*jbWCLHhdLU9Sr33JBogkag.gif"/></div></figure><p id="12a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:要在生产中使用这个实现，为水平视图和视图项创建视图模型是值得的。</p></div></div>    
</body>
</html>