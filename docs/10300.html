<html>
<head>
<title>Building REST API With ASP.NET Core</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ASP.NET核心构建REST API</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-rest-api-with-asp-net-core-3cd144d222d8?source=collection_archive---------2-----------------------#2021-12-23">https://betterprogramming.pub/building-rest-api-with-asp-net-core-3cd144d222d8?source=collection_archive---------2-----------------------#2021-12-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="16d3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过模型-视图-控制器获取和发布端点</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/29e38ebb9ed3867db261ccc102fba581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhR0GNM_wrfEawQ4HfU2ZQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">在<a class="ae ky" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的克莱门特·赫拉尔多</a></p></figure><p id="6b19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经介绍了很多关于基于Python编程语言构建RESTful APIs和微服务的教程。在本文中，让我们深入探讨如何使用C#创建自己的最小web API。</p><p id="d1c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">C#编程语言的一个主要优势是它可以很好地与使用模型-视图-控制器架构的ASP.NET核心一起工作。该框架提供了构建快速、安全、跨平台和基于云的应用程序的能力。</p><p id="7d64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保你有。NET SDK安装在您的机器上。转至以下链接，根据您的操作系统下载安装程序:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="498c" class="ma mb it lw b gy mc md l me mf"><a class="ae ky" href="https://dotnet.microsoft.com/en-us/download" rel="noopener ugc nofollow" target="_blank">https://dotnet.microsoft.com/en-us/download</a></span></pre><p id="ab8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，在您的终端上运行以下命令，验证您已经成功安装了它:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ebd3" class="ma mb it lw b gy mc md l me mf">dotnet --version</span></pre><p id="e1c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程基于以下内容。网络版:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5aa9" class="ma mb it lw b gy mc md l me mf">6.0.100</span></pre><p id="7237" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，它与web API包一起提供。验证如下:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3395" class="ma mb it lw b gy mc md l me mf">dotnet new --list</span></pre><p id="cf62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会在命令提示符下看到以下输出:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c7c3" class="ma mb it lw b gy mc md l me mf">...<br/>ASP.NET Core Empty                            web                  [C#],F#     Web/Empty<br/>ASP.NET Core gRPC Service                     grpc                 [C#]        Web/gRPC<br/>ASP.NET Core Web API                          webapi               [C#],F#     Web/WebAPI<br/>ASP.NET Core Web App                          webapp,razor         [C#]        Web/MVC/Razor Pages<br/>ASP.NET Core Web App (Model-View-Controller)  mvc                  [C#],F#     Web/MVC<br/>ASP.NET Core with Angular                     angular              [C#]        Web/MVC/SPA<br/>...</span></pre><p id="2694" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以通过<code class="fe mg mh mi lw b">add package</code>命令安装额外的依赖项:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="35b0" class="ma mb it lw b gy mc md l me mf">dotnet add package &lt;package_name&gt;</span></pre><p id="2402" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，运行以下命令删除现有包:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="12b2" class="ma mb it lw b gy mc md l me mf">dotnet remove package &lt;package_name&gt;</span></pre><p id="ee37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的工作目录中运行以下命令:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b1ab" class="ma mb it lw b gy mc md l me mf">dotnet new webapi -o TestWebApi</span></pre><p id="366b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将搭建一个名为<code class="fe mg mh mi lw b">TestWebApi</code>的新web API项目:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="53e1" class="ma mb it lw b gy mc md l me mf">The template "ASP.NET Core Web API" was created successfully.</span><span id="a30b" class="ma mb it lw b gy mj md l me mf">Processing post-creation actions...<br/>Running 'dotnet restore' on C:\Users\user\Documents\TestWebApi\TestWebApi.csproj...<br/>  Determining projects to restore...<br/>  Restored C:\Users\user\Documents\TestWebApi\TestWebApi.csproj (in 387 ms).<br/>Restore succeeded.</span></pre><p id="f874" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行时，将生成以下文件夹和文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/41009e76c40cb15a9672528208c2c2d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*ImlontaI2rNrfH-vp8tHvg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="22b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是你项目的基本支柱。让我们通过将当前工作目录更改为<code class="fe mg mh mi lw b">TestWebApi</code>文件夹来测试一下:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2708" class="ma mb it lw b gy mc md l me mf">cd TestWebApi</span></pre><p id="65b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，按如下方式运行它:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b665" class="ma mb it lw b gy mc md l me mf">dotnet run</span></pre><p id="f8fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到以下输出:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="cbb9" class="ma mb it lw b gy mc md l me mf">Building...<br/>info: Microsoft.Hosting.Lifetime[14]<br/>      Now listening on: <a class="ae ky" href="https://localhost:7218" rel="noopener ugc nofollow" target="_blank">https://localhost:7218</a><br/>info: Microsoft.Hosting.Lifetime[14]<br/>      Now listening on: <a class="ae ky" href="http://localhost:5273" rel="noopener ugc nofollow" target="_blank">http://localhost:5273</a><br/>info: Microsoft.Hosting.Lifetime[0]<br/>      Application started. Press Ctrl+C to shut down.<br/>info: Microsoft.Hosting.Lifetime[0]<br/>      Hosting environment: Development<br/>info: Microsoft.Hosting.Lifetime[0]<br/>      Content root path: C:\Users\user\Documents\TestWebApi\</span></pre><p id="debd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将在以下目录中构建可执行文件:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e94c" class="ma mb it lw b gy mc md l me mf">TestWebApi\bin\Debug\net6.0\</span></pre><p id="8212" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到您的浏览器，运行以下URL:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9911" class="ma mb it lw b gy mc md l me mf">https://localhost:7218/WeatherForecast</span></pre><p id="e4f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接受风险，因为应用程序是在没有签名证书的情况下提供的。您应该获得以下原始数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="181f" class="ma mb it lw b gy mc md l me mf">[{"date":"2021-12-23T16:04:04.8265229+08:00","temperatureC":11,"temperatureF":51,"summary":"Mild"},{"date":"2021-12-24T16:04:04.8265289+08:00","temperatureC":14,"temperatureF":57,"summary":"Mild"},{"date":"2021-12-25T16:04:04.8265294+08:00","temperatureC":42,"temperatureF":107,"summary":"Balmy"},{"date":"2021-12-26T16:04:04.8265299+08:00","temperatureC":43,"temperatureF":109,"summary":"Warm"},{"date":"2021-12-27T16:04:04.8265302+08:00","temperatureC":21,"temperatureF":69,"summary":"Freezing"}]</span></pre><p id="a352" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的终端上执行Ctrl-C来停止服务，并使用<code class="fe mg mh mi lw b">watch</code>选项再次运行该命令:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b947" class="ma mb it lw b gy mc md l me mf">dotnet watch run</span></pre><p id="7603" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它会自动在您的浏览器上打开Swagger UI:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/3140285d94744f393978f1fc8fd6e92a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A79QunnM-1U1vWO9XD_a9w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6412" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Swagger UI非常有用，因为它允许您直接使用交互文档测试API:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/5b7f0bf3bae5ba7e5e8cc8fa45da8be9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nv04YTQ65eRZYuWyOqqFRg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e61b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">停止服务，继续下一节，了解如何向应用程序添加新控制器的更多信息。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="5275" class="mu mb it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">EchoBot API</h1><p id="7cf8" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">为了保持简洁，我们将使用以下端点构建一个echo bot:</p><ul class=""><li id="ebdf" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated">接受字符串的GET API返回相同的字符串</li><li id="6e26" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">接受JSON输入并返回JSON输出的POST API</li></ul><p id="6001" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在您的工作目录中创建一个名为<code class="fe mg mh mi lw b">Chatbot.cs</code>的新文件，并在其中添加以下代码:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c7fc" class="ma mb it lw b gy mc md l me mf">namespace TestWebApi;<br/><br/>public class ResponseModel<br/>{<br/>    public string? UserId { get; set; }<br/>    public string? Question { get; set; }<br/>    public string? Answer { get; set; }<br/>}</span><span id="d9b3" class="ma mb it lw b gy mj md l me mf">public class RequestModel<br/>{<br/>    public string Message { get; set; } = null!;<br/>}<br/><br/>public static class Utils<br/>{<br/>    public static string generateID()<br/>    {<br/>        return Guid.NewGuid().ToString("N");<br/>    }<br/>}</span></pre><p id="4e1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它包含以下类别:</p><ul class=""><li id="3ff9" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><code class="fe mg mh mi lw b">ResponseModel</code>—JSON输出的模式</li><li id="313a" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe mg mh mi lw b">RequestModel</code>—JSON输入的模式</li><li id="7814" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe mg mh mi lw b">Utils</code> —用于生成唯一ID的实用程序类</li></ul><p id="ae24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，打开<code class="fe mg mh mi lw b">Controllers</code>文件夹，创建一个名为<code class="fe mg mh mi lw b">ChatbotController.cs</code>的新文件。每个控制器代表一个单独的路由(包括GET、POST等)。)供你申请。在内部实现以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="da47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过修改以下代码，您可以轻松设置自己的自定义路由名称:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fdb2" class="ma mb it lw b gy mc md l me mf">[ApiController]<br/>[Route("[controller]")]<br/>...</span></pre><p id="fbbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mg mh mi lw b">[controller]</code>根据文件名减去控制器来表示控制器的名称。在这种情况下，它会将路线显示为<code class="fe mg mh mi lw b">Chatbot</code>，可通过以下方式访问:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="98e7" class="ma mb it lw b gy mc md l me mf">https://localhost:7218/Chatbot</span></pre><p id="7e2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您更喜欢将其公开为:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b686" class="ma mb it lw b gy mc md l me mf">https://localhost:7218/api</span></pre><p id="6e5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需修改代码，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d180" class="ma mb it lw b gy mc md l me mf">[ApiController]<br/>[Route("api")]<br/>...</span></pre><h2 id="2f71" class="ma mb it bd mv og oh dn mz oi oj dp nd li ok ol nf lm om on nh lq oo op nj oq bi translated">获取API</h2><p id="bca7" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">对于GET API实现，只需创建一个新函数并用<code class="fe mg mh mi lw b">[HttpGet]</code>标记它。您通过<code class="fe mg mh mi lw b">[FromQuery]</code>将其设置为接受查询参数，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d6e7" class="ma mb it lw b gy mc md l me mf">[HttpGet]<br/>public string Get([FromQuery] string Message)<br/>{<br/>    return Message;<br/>}</span></pre><p id="b2ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们正在构建echobot端点，所以只需将返回类型设置为<code class="fe mg mh mi lw b">string</code>并直接返回<code class="fe mg mh mi lw b">Message</code>变量。</p><h2 id="03e2" class="ma mb it bd mv og oh dn mz oi oj dp nd li ok ol nf lm om on nh lq oo op nj oq bi translated">发布API</h2><p id="33d3" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">另一方面，您应该使用<code class="fe mg mh mi lw b">[FromBody]</code>来从请求体获取数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b753" class="ma mb it lw b gy mc md l me mf">[HttpPost]<br/>public ResponseModel Post([FromBody] RequestModel item)</span></pre><p id="d769" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于JSON输入和输出，您需要将它们预定义为类。看看我们之前在<code class="fe mg mh mi lw b">Chatbot.cs</code>中定义的以下类。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a4e4" class="ma mb it lw b gy mc md l me mf">public class ResponseModel<br/>{<br/>    public string? UserId { get; set; }<br/>    public string? Question { get; set; }<br/>    public string? Answer { get; set; }<br/>}<br/><br/>public class RequestModel<br/>{<br/>    public string Message { get; set; } = null!;<br/>}</span></pre><p id="c1b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随后，如下实现您的后echobot端点:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d3f3" class="ma mb it lw b gy mc md l me mf">[HttpPost]<br/>public ResponseModel Post([FromBody] RequestModel item)<br/>{<br/>    return new ResponseModel { UserId=Utils.generateID(), Question = item.Message, Answer = item.Message };<br/>}</span></pre><p id="1ea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它利用<code class="fe mg mh mi lw b">generateID</code>函数并实例化一个新的<code class="fe mg mh mi lw b">ResponseModel</code>对象，然后将其作为JSON输出返回给用户。</p><p id="9b50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保存文件并运行以下命令来启动您的应用程序:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2ed3" class="ma mb it lw b gy mc md l me mf">dotnet watch run</span></pre><p id="32db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到以下Swagger用户界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/344b7930e3fe20a0012dd38829232fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*71W-awfJRJ5WOe_vnSN3Og.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="23fb" class="mu mb it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">试验</h1><p id="7745" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">打开<code class="fe mg mh mi lw b">GET /Chatbot</code>手风琴并点击<code class="fe mg mh mi lw b">Try it out</code>按钮。然后，在<code class="fe mg mh mi lw b">Message</code>输入框中输入您的文本。完成后，点击<code class="fe mg mh mi lw b">Execute</code>按钮测试您的GET API。输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/162e0a33cab066d4ef7285bba0e74c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*SviJG9tLT3WvVjdjMQHpvw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ef09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，对接收JSON输入的POST /Chatbot重复相同的步骤:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7de9" class="ma mb it lw b gy mc md l me mf">{<br/>  "message": "Hello"<br/>}</span></pre><p id="10f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到以下用户界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/37c6ada11f0b2b2ce404ff3808c0427e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*IrjMnC5PR8UtBBy-GRJKBA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="e7d3" class="mu mb it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">部署</h1><p id="67ec" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">注意，每次运行时，您的应用程序都是在<code class="fe mg mh mi lw b">Debug</code>文件夹中构建的。您可以通过以下命令执行发布构建:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="aaad" class="ma mb it lw b gy mc md l me mf">dotnet build -c release</span></pre><p id="709f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将在<code class="fe mg mh mi lw b">Release</code>文件夹中生成相同的可执行文件和文件，而不包括任何不必要的调试文件。您可以直接运行<code class="fe mg mh mi lw b">TestWebApi.exe</code>来启动服务。</p><p id="3102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以通过命令行调用<code class="fe mg mh mi lw b">TestWebApi.dll</code>。以这种方式运行服务还有额外的好处，因为您可以指定额外的选项。例如，您可以在端口8000运行服务，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="96b5" class="ma mb it lw b gy mc md l me mf">dotnet TestWebApi.dll --urls <a class="ae ky" href="http://0.0.0.0:80" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:80</a>00</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="b238" class="mu mb it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">结论</h1><p id="feed" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">让我们回顾一下你今天所学的内容。</p><ul class=""><li id="ba82" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated">本文首先简要解释了。NET核心WebApi及其安装过程。</li><li id="5db2" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">然后，它介绍了搭建一个初始项目，以及将它作为web服务运行的命令。</li><li id="bc0b" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">随后，它强调了如何向现有项目添加自定义端点。它提供了用作echobot的GET和POST端点的示例。</li><li id="7647" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">最后，它解释了如何通过可执行文件或dll来执行发布版本并直接运行它。</li></ul><p id="cdc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你阅读这篇文章。祝你有美好的一天！</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="92f1" class="mu mb it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">参考</h1><ol class=""><li id="4018" class="nq nr it lb b lc nl lf nm li ou lm ov lq ow lu ox nw nx ny bi translated"><a class="ae ky" href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-6.0&amp;tabs=visual-studio-code" rel="noopener ugc nofollow" target="_blank">教程:用ASP.NET核心创建一个web API</a></li></ol></div></div>    
</body>
</html>