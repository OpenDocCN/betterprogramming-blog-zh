<html>
<head>
<title>npm ci vs. npm install — Which Should You Use in Your Node.js Projects?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">npm ci与npm install —您应该在Node.js项目中使用哪一个？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/npm-ci-vs-npm-install-which-should-you-use-in-your-node-js-projects-51e07cb71e26?source=collection_archive---------0-----------------------#2019-07-02">https://betterprogramming.pub/npm-ci-vs-npm-install-which-should-you-use-in-your-node-js-projects-51e07cb71e26?source=collection_archive---------0-----------------------#2019-07-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6b02" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">到底有什么不同？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6492923f211abba77e4cc3c8de0bbf8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0sn6Tmv1vMYCwXqUOvRBw.png"/></div></div></figure><p id="730e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">npm 是<a class="ae lq" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>项目的默认包管理器。</p><p id="b929" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用npm可以轻松安装和更新依赖项。在<a class="ae lq" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npmjs </a>中列出的一个依赖项，例如<a class="ae lq" href="https://www.npmjs.com/package/vue" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>框架，甚至显示了可以复制并粘贴到终端中的安装命令。</p><p id="64de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您使用npm已经有一段时间了，您会使用<code class="fe lr ls lt lu b">npm install</code>(或者更短的<code class="fe lr ls lt lu b">npm i</code>)来安装或更新依赖项。</p><p id="ebc4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">虽然这仍然有效，但在npm v6中引入了一个新命令- <code class="fe lr ls lt lu b">npm ci</code>。</p><p id="d689" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我想强调两者之间的区别，以及使用这些命令的不同用例。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b980" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">npm安装(简称:npm i)</h1><p id="76c3" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated"><code class="fe lr ls lt lu b"><a class="ae lq" href="https://docs.npmjs.com/cli/install" rel="noopener ugc nofollow" target="_blank">npm install</a></code>或<code class="fe lr ls lt lu b"><a class="ae lq" href="https://docs.npmjs.com/cli/install" rel="noopener ugc nofollow" target="_blank">npm i</a></code>，用于安装依赖项:</p><ul class=""><li id="940b" class="mz na it kw b kx ky la lb ld nb lh nc ll nd lp ne nf ng nh bi translated">它将安装所有的依赖项。</li><li id="99ed" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated">如果在指定依赖项的版本时使用<code class="fe lr ls lt lu b"><strong class="kw iu"><em class="nn">^</em></strong></code>或<code class="fe lr ls lt lu b"><strong class="kw iu"><em class="nn">~</em></strong></code>，npm可能不会安装您指定的确切版本。</li><li id="6b0b" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated"><code class="fe lr ls lt lu b">npm install</code>可以在有变化时更新您的<code class="fe lr ls lt lu b"><a class="ae lq" href="https://docs.npmjs.com/files/package-lock.json" rel="noopener ugc nofollow" target="_blank">package-lock.json</a></code>，例如当您安装一个新的依赖项时。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="18b6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">npm ci</h1><p id="5151" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated"><code class="fe lr ls lt lu b"><a class="ae lq" href="https://docs.npmjs.com/cli/ci.html" rel="noopener ugc nofollow" target="_blank">npm ci</a></code>会做以下事情:</p><ol class=""><li id="3b14" class="mz na it kw b kx ky la lb ld nb lh nc ll nd lp no nf ng nh bi translated">它将删除您的<code class="fe lr ls lt lu b">node_modules</code>文件夹，以确保一个干净的状态。</li><li id="b3ed" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp no nf ng nh bi translated">它将在您的<code class="fe lr ls lt lu b">package-lock.json</code> <strong class="kw iu"> </strong>中查找安装所有依赖项的确切版本。</li><li id="cb8a" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp no nf ng nh bi translated">不像<code class="fe lr ls lt lu b">npm install</code>，<code class="fe lr ls lt lu b">npm ci</code>永远不会修改你的<code class="fe lr ls lt lu b">package-lock.json</code>。然而，它确实希望您的项目中有一个<code class="fe lr ls lt lu b">package-lock.json</code>文件——如果您没有这个文件，<code class="fe lr ls lt lu b">npm ci</code>将无法工作，您必须使用<code class="fe lr ls lt lu b">npm install</code>来代替。</li></ol><p id="3330" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你使用<code class="fe lr ls lt lu b">npm ci</code>，你会得到可靠的构建。当你在一个持续集成工具中运行时，如<a class="ae lq" href="https://jenkins.io/" rel="noopener ugc nofollow" target="_blank"> Jenkins </a>或<a class="ae lq" href="https://about.gitlab.com/product/continuous-integration/" rel="noopener ugc nofollow" target="_blank"> GitLab CI </a>，这是很有用的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="460f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">npm ci与npm安装—使用哪个？</h1><p id="88ec" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated"><strong class="kw iu">如果您使用的是npm v6或更高版本:</strong></p><ul class=""><li id="2e32" class="mz na it kw b kx ky la lb ld nb lh nc ll nd lp ne nf ng nh bi translated">使用<code class="fe lr ls lt lu b">npm install</code>安装新的依赖项，或者更新现有的依赖项(例如，从版本1升级到版本2)。</li><li id="7805" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated">当在持续集成中运行时，或者如果您想在不修改<code class="fe lr ls lt lu b">package-lock.json</code>的情况下安装依赖项，请使用<code class="fe lr ls lt lu b">npm ci</code>。</li></ul><p id="25c8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">如果你是NPM v5或更低版本:</strong></p><ul class=""><li id="0812" class="mz na it kw b kx ky la lb ld nb lh nc ll nd lp ne nf ng nh bi translated">您只能使用<code class="fe lr ls lt lu b">npm install</code>来安装或更新依赖项。</li><li id="d5b8" class="mz na it kw b kx ni la nj ld nk lh nl ll nm lp ne nf ng nh bi translated">尝试升级到最新的npm版本。除了<code class="fe lr ls lt lu b">npm ci</code>之外，它还具有<code class="fe lr ls lt lu b">npm audit</code>命令，该命令可以更容易地识别和修复依赖关系的安全漏洞。此外，使用npm v6安装依赖项应该会更快。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ec12" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="7a7f" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated">感谢阅读这篇文章。如您所见，这两个命令都有其有效的用例。如果可能的话，我推荐使用<code class="fe lr ls lt lu b">npm ci</code>，因为它可以可靠地完成工作，而使用<code class="fe lr ls lt lu b">npm install</code>来安装新的依赖项或更新现有的依赖项。</p></div></div>    
</body>
</html>