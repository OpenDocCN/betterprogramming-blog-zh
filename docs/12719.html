<html>
<head>
<title>Deploying Infrastructure From Minecraft</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从《我的世界》部署基础设施</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/deploying-infrastructure-from-minecraft-97b3f8321cce?source=collection_archive---------4-----------------------#2022-06-25">https://betterprogramming.pub/deploying-infrastructure-from-minecraft-97b3f8321cce?source=collection_archive---------4-----------------------#2022-06-25</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="eb89" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">使用Terraform部署基础设施的有趣方式</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/0aad3afe44a335f823599b11535b20d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d08Au2lcx1Qtw9ZeMnN18A.png"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated">作者图片| AWS和Terraform徽标</p></figure><p id="c58e" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">在一个周日下午玩《我的世界》的时候，一个随机的想法出现在我的脑海里:“我可以使用《我的世界》的Terraform吗？”当时，我正在学习Terraform，我对它的痴迷让我创建了这个周末项目。现在你可能想知道为什么我会尝试这样做，原因如下:</p><ul class=""><li id="55bd" class="ls lt ir ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">很好玩！</li><li id="8d06" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">这是学习Docker、docker-compose和Terraform的一种很酷的方式！</li></ul><p id="fb46" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">如果你确信这足够酷😎，在深入实际项目之前，让我简单介绍一下我们将使用的工具。</p><h1 id="9227" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="5849" class="pw-post-body-paragraph kw kx ir ky b kz my js lb lc mz jv le lf na lh li lj nb ll lm ln nc lp lq lr ik bi translated">这是为不耐烦的读者准备的回购:<a class="ae nd" href="https://github.com/lollococce/terracraft" rel="noopener ugc nofollow" target="_blank">https://github.com/lollococce/terracraft</a>。按照README.md中的说明开始使用《我的世界》世界的Terraform！</p></div><div class="ab cl ne nf hv ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ik il im in io"><h1 id="9bfb" class="mg mh ir bd mi mj nl ml mm mn nm mp mq jx nn jy ms ka no kb mu kd np ke mw mx bi translated">工具和要求</h1><ul class=""><li id="c373" class="ls lt ir ky b kz my lc mz lf nq lj nr ln ns lr lx ly lz ma bi translated"><a class="ae nd" href="https://www.minecraft.net/en-us" rel="noopener ugc nofollow" target="_blank"><strong class="ky is"/></a><strong class="ky is"/><em class="nt">必选！Java版:<a class="ae nd" href="https://www.minecraft.net/en-us/store/minecraft-java-bedrock-edition-pc" rel="noopener ugc nofollow" target="_blank"> Here </a> ]:《我的世界》是一款非常受欢迎的视频游戏，由Mojang Studios开发，允许你在一个由立方体积木组成的虚拟世界中进行创作、生活和实验。我们将在这个项目中使用Java PC版，但是你应该(在理论上)能够在基础版中复制它。</em></li><li id="fd49" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae nd" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ky is">Docker</strong></a><em class="nt">必选！</em> Docker桌面:<a class="ae nd" href="https://www.docker.com/get-started/" rel="noopener ugc nofollow" target="_blank">此处</a>】:Docker是一个开发、发布和运行应用程序的开放平台。Docker让您将应用程序从基础设施中分离出来，从而快速交付软件[1]。在你的电脑上下载并安装Docker桌面应用程序。</li><li id="6576" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae nd" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"><strong class="ky is">docker-compose</strong></a><em class="nt">必选！</em>安装指南:<a class="ae nd" href="https://docs.docker.com/compose/install/" rel="noopener ugc nofollow" target="_blank">此处</a>】:docker-compose是一个定义和运行多容器Docker应用的工具。使用Compose，您可以使用YAML文件来配置应用程序的服务。然后，只需一个命令，您就可以从您的配置中创建并启动所有服务[2]。按照安装指南从您的终端本地安装它。</li><li id="88c6" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae nd" href="https://www.spigotmc.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ky is">Spigot</strong></a>【Am使用v 1.19】:Spigot是一款针对性能进行了优化的《我的世界》服务器，具有额外的特性，比如定制插件。我们将用它在本地主机上托管一个修改过的《我的世界》版本，通过一个自定义插件与Terraform交互。</li><li id="08f6" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae nd" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky is">terra form</strong></a>:terra form是一个HashiCorp工具，用于将基础设施配置为代码(IaC)。它允许您部署服务器、数据库等。，通过将您的代码转换成对云服务的API调用。</li><li id="a0d5" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae nd" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky is"> AWS </strong> </a>:我们将在这个具体的例子中使用AWS，但是您可以随意使用您选择的任何云服务。</li></ul><h1 id="a76b" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">步骤1:安装和设置</h1><p id="bb7d" class="pw-post-body-paragraph kw kx ir ky b kz my js lb lc mz jv le lf na lh li lj nb ll lm ln nc lp lq lr ik bi translated">一旦您安装了Docker和docker-compose，您应该能够在您的终端上检查它们是否可用:</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="06c7" class="nz mh ir nv b gz oa ob l oc od">$ docker-compose --version<br/>docker-compose version 1.29.2, build 5becea4c</span><span id="fda2" class="nz mh ir nv b gz oe ob l oc od">$ docker --version<br/>Docker version 20.10.12, build e91ed57</span></pre><p id="afa9" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">如果出现一些错误，检查你的Docker引擎正在运行；你可以通过打开Docker桌面应用程序来实现。这将自动启动docker服务。您可以再次尝试上面的bash命令来确认一切正常。</p><p id="419b" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">如果Docker和docker-compose设置正确，可以从我的repo下载源代码，正式开始项目。</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="79f7" class="nz mh ir nv b gz oa ob l oc od">$ git clone <a class="ae nd" href="https://github.com/lollococce/terracraft" rel="noopener ugc nofollow" target="_blank">https://github.com/lollococce/terracraft</a></span><span id="aec5" class="nz mh ir nv b gz oe ob l oc od">$ cd ./terracraft</span></pre><p id="837d" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">在repo里面，你会发现一个Dockefile，一个docker-compose.yml和一个带有插件和服务器设置的数据文件夹。</p><p id="8af6" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">作为Docker文件的Docker图像，我们使用了一个众所周知的图像:<a class="ae nd" href="https://github.com/itzg/docker-minecraft-server" rel="noopener ugc nofollow" target="_blank">https://github.com/itzg/docker-minecraft-server</a>[3】(这使我们可以轻松地启动一个Spigot服务器)。使用它作为基础映像，我们可以扩展它，在服务器上安装g it和Terraform。</p><p id="7da4" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">下面是我们的<a class="ae nd" href="https://github.com/lollococce/terracraft/blob/master/Dockerfile" rel="noopener ugc nofollow" target="_blank"> Dockerfile </a>如何扩展<a class="ae nd" href="https://github.com/itzg/docker-minecraft-server" rel="noopener ugc nofollow" target="_blank"> itzg </a>的图像:</p><pre class="kh ki kj kk gu nu nv of bn og oh bi"><span id="9b83" class="oi mh ir nv b be oj ok l oc od">#<br/># Extended from itzg/minecraft-server:latest<br/>#<br/># Copyright on itzg/minecraft-server:latest<br/># of itzg (https://github.com/itzg)<br/>#<br/>FROM itzg/minecraft-server:latest<br/># Install Git<br/>RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends git wget unzip gnupg software-properties-common<br/># Install Terraform<br/>RUN wget --quiet https://releases.hashicorp.com/terraform/1.2.1/terraform_1.2.1_linux_amd64.zip \  &amp;&amp; unzip terraform_1.2.1_linux_amd64.zip \  &amp;&amp; mv terraform /usr/bin \  &amp;&amp; rm terraform_1.2.1_linux_amd64.zip<br/># Check if working<br/>RUN terraform -help</span></pre><p id="ae65" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">现在，让我们来看看<a class="ae nd" href="https://github.com/lollococce/terracraft/blob/master/docker-compose.yml" rel="noopener ugc nofollow" target="_blank"> docker-compose.yml </a>文件！我们将repo中的数据文件夹安装为容器的卷:</p><pre class="kh ki kj kk gu nu nv of bn og oh bi"><span id="3b86" class="oi mh ir nv b be oj ok l ol od">version: "3.8"<br/>services:<br/>  minecraft:<br/>    # Using . to use the local ./Dockerfile<br/>    build: "."<br/>    ports:<br/>      - "25565:25565"<br/>      - "4711:4711"<br/>      - "8123:8123"<br/>    environment:<br/>      # + + + + + [START] WORLD SETTINGS + + + + +<br/>      # - - - World Type - - - <br/>      # Custom World (Use a custom Seed or a world from a ZIP)<br/>      #WORLD: "https://download1460.mediafire.com/5epwuydu5fmg/35a7iustexizbrc/World+of+worlds+3.9.zip"<br/>      #SEED: "-1785852800490497919"<br/>      #GUI: FALSE<br/>      # - - - World Settings - - -<br/>      MAX_PLAYERS: 50<br/>      MAX_WORLD_SIZE: 10000<br/>      ALLOW_NETHER: "TRUE"      <br/>      ENABLE_COMMAND_BLOCK: "TRUE"      <br/>      HARDCORE: "FALSE"      <br/>      SNOOPER_ENABLED: "FALSE"      <br/>      SPAWN_ANIMALS: "TRUE"      <br/>      SPAWN_MONSTERS: "TRUE"      <br/>      SPAWN_NPCS: "TRUE"      <br/>      SPAWN_PROTECTION: 0      <br/>      VIEW_DISTANCE: 10      <br/>      GENERATE_STRUCTURES: "TRUE"      <br/>      FORCE_GAMEMODE: "FALSE"      <br/>      DIFFICULTY: "peaceful"      <br/>      MODE: "survival"      <br/>      LEVEL_TYPE: "DEFAULT"      <br/>      # + + + + + [END] WORLD SETTINGS + + + + +    <br/><br/>      # + + + + + [START] SERVER SETTINGS + + + + +      <br/>      # - - - Server Type - - -      <br/>      # Use SPIGOT server type + install Plugins<br/>      TYPE: SPIGOT      <br/>      SPIGET_RESOURCES: 22724,34315,51944      <br/>      # Server Title      <br/>      MOTD: "A §l§cSpigot§r §nserver with Terraform"      <br/>      # Custom Server Icon      <br/>      #OVERRIDE_ICON: "TRUE"      <br/>      #ICON: ""<br/>      <br/>      # - - - Settings - - -      <br/>      # THIS HAS TO BE TRUE!      <br/>      EULA: "TRUE"      <br/>      ENABLE_ROLLING_LOGS: "TRUE"      <br/>      TZ: "Europe/Rome"      <br/>      # + + + + + [END] SERVER SETTINGS + + + + +             <br/><br/>      # + + + + + [START] CLOUD CREDS + + + + +      <br/>      # (Credentials for Could)      <br/>      # AWS Creds and config      <br/>      AWS_ACCESS_KEY_ID: "INSERT_HERE_YOUR_KEY"      <br/>      AWS_SECRET_ACCESS_KEY: "INSER_HERE_YOUR_SECRET"      <br/>      AWS_DEFAULT_REGION: "YOUR REGION (ex us-east-1)"      <br/>      # + + + + + [END] CLOUD CREDS + + + + +<br/>    <br/>    volumes:<br/>      - ./data:/data<br/>volumes:<br/>  data: {}</span></pre><p id="2c62" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">正如你在上面看到的，我们可以用环境变量改变世界设置，并从种子或Zip文件上传一个自定义的《我的世界》世界。Terraform将使用云凭据变量连接到您选择的云服务。因为我为这个项目选择了AWS，所以我将AWS默认环境变量传递给Terraform在部署时将寻找的容器(记住创建一个具有适当权限的I am用户)。</p><p id="eb4e" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">为了从《我的世界》运行Terraform，我们使用了<a class="ae nd" href="https://www.spigotmc.org/resources/bashful.51944/" rel="noopener ugc nofollow" target="_blank">basish</a>，一个允许我们运行bash命令并从《我的世界》的chat控制服务器终端的插件。</p><h1 id="1427" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">步骤2:运行容器</h1><p id="738d" class="pw-post-body-paragraph kw kx ir ky b kz my js lb lc mz jv le lf na lh li lj nb ll lm ln nc lp lq lr ik bi translated">好吧！一切都准备好了。我们现在可以运行以下内容:</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="2e94" class="nz mh ir nv b gz oa ob l oc od">$ cd ./terracraft<br/>$ docker-compose up</span></pre><p id="bb2f" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">您应该会在终端上看到类似这样的提示:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj om"><img src="../Images/9beca71a1c22855f53591149dee76da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-DeShjSAVokgi_qyhTqMrw.png"/></div></div></figure><p id="1daf" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">要在后台运行容器，您可以决定改为运行:</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="db39" class="nz mh ir nv b gz oa ob l oc od">$ docker-compose up -d</span></pre><p id="8da0" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">等待几分钟，让容器安装资源并完全运行。</p><p id="24ca" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">要仔细检查容器是否在本地运行，可以打开Docker桌面应用程序。它应该将您的《我的世界》容器显示为“正在运行”，如下所示:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj on"><img src="../Images/272ddb860ba5630ada03b07d05e6fc0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hjdfr2PvkYwJFYB7uOLgGw.png"/></div></div></figure><h1 id="428f" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">步骤3:访问《我的世界》服务器</h1><p id="09a1" class="pw-post-body-paragraph kw kx ir ky b kz my js lb lc mz jv le lf na lh li lj nb ll lm ln nc lp lq lr ik bi translated">最后，您可以从您的《我的世界》应用程序连接到服务器！在你的笔记本电脑上启动Java《我的世界》版，选择“多人游戏”</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/76c5a2de950314b00dc3b5f5e5302dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwTRUYleKLYMIhkXMHR9-g.png"/></div></div></figure><p id="c364" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">您应该会看到一个“添加服务器”按钮。点击它！</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/2848fb4689338025126e0bd67bc297d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8GwDN-UWuSj-CYA1LxQBRg.png"/></div></div></figure><p id="c2e9" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">使用“localhost”作为服务器地址，并输入您喜欢的任何名称作为服务器名称。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/39d37749e0cf1937a782e3d413329458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DWhPWWqgot6ICkVB6G_FLQ.png"/></div></div></figure><p id="402d" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">如果您正确设置并运行了《我的世界》容器，您应该会在服务器列表中看到一个服务器。点击图片加入吧！</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/3a20e59e6b7738086e61f21228a4cb4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*updvk5E6jVAHVcA4NPS3Jg.png"/></div></div></figure><p id="2131" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">恭喜你。最后，您将作为Docker容器运行在本地主机上的《我的世界》服务器中。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/0410dd5902f933b44ba558d43f415525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_TN-oqoCJG4hCMN7wEOnQ.png"/></div></div></figure><h1 id="590f" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">步骤4:运行Terraform</h1><p id="be33" class="pw-post-body-paragraph kw kx ir ky b kz my js lb lc mz jv le lf na lh li lj nb ll lm ln nc lp lq lr ik bi translated">要开始运行Terraform，我们首先需要检查我们安装的插件(basish)是否功能齐全。为了测试它，我们必须给我们的《我的世界》播放器分配一个特殊类型的用户访问，称为<code class="fe oo op oq nv b">op</code>。因为默认情况下，加入服务器的用户不属于这个用户组，所以我们必须在终端上运行下面的命令。</p><p id="9caa" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">记住使用你的容器ID作为<your_container_id>(你可以使用<code class="fe oo op oq nv b">docker ps</code>命令来获取)，你的《我的世界》玩家的名字作为&lt;你的玩家名字&gt;。</your_container_id></p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="0d9b" class="nz mh ir nv b gz oa ob l oc od">$ docker ps<br/>CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES<br/>&lt;CONTAINER_ID (e.g. 2cbc269c566f)&gt; minecraft_minecraft  "/start" 2 minutes ago Up 2 minutes (healthy)   0.0.0.0:4711-&gt;4711/tcp, 0.0.0.0:8123-&gt;8123/tcp, 0.0.0.0:25565-&gt;25565/tcp, 25575/tcp   minecraft_minecraft_1</span><span id="ea3d" class="nz mh ir nv b gz oe ob l oc od">$ docker exec &lt;YOUR_CONTAINER_ID&gt; mc-send-to-console op &lt;YOUR_PLAYER_NAME&gt;</span></pre><p id="2a41" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">这在容器的终端上执行一个《我的世界》命令，升级游戏中用户的权限。在bash执行之后，游戏日志中会立即提示一条消息“Server:make<your_player_name>a Server operator”。</your_player_name></p><p id="4c3d" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">现在，让我们用《我的世界》运行我们的第一个bash命令(多酷啊！！).按下<code class="fe oo op oq nv b">t</code>激活《我的世界》的聊天并输入以下内容:</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="18a2" class="nz mh ir nv b gz oa ob l oc od">/bashful echo hello world</span></pre><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/2a309d70f18a8d9470b4681ab240c679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*af_ELmSFbyXkDI8-WWq1CA.png"/></div></div></figure><p id="0e45" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">在您的聊天中，您应该会看到带有命令输出的黄色日志！</p><p id="1c31" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">用Terraform试试吧！</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="7dc4" class="nz mh ir nv b gz oa ob l oc od">/bashful terraform --help</span></pre><p id="af15" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">屏幕上应该会出现以下输出:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/72c7f357c55f960d785478dd64573f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBJaNTj8XM2iXzOsKAnDjg.png"/></div></div></figure><p id="963d" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">如果您在docker-compose.yml文件中设置了AWS凭证，那么您可以使用repo中包含的示例在AWS上部署EC2实例。</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="956a" class="nz mh ir nv b gz oa ob l oc od"># First Initialize TF:<br/>/bashful terraform -chdir=home/terraform/ec2 init</span><span id="4cba" class="nz mh ir nv b gz oe ob l oc od"># Wait until you can read in green "Execution finished successfully"</span><span id="6aab" class="nz mh ir nv b gz oe ob l oc od"># Verify that you have a functioning connection with your cloud service and what you are planning to deploy:<br/>/bashful terraform -chdir=home/terraform/ec2 plan -out=tfplan</span><span id="1e3e" class="nz mh ir nv b gz oe ob l oc od"># Apply and deploy the Ec2 instance:<br/>/bashful terraform -chdir=home/terraform/ec2 apply -auto-approve</span><span id="2f9e" class="nz mh ir nv b gz oe ob l oc od"># wait creation of cloud resources</span></pre><p id="25c0" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">最后，检查您的AWS帐户，查看EC2实例是否正在运行！</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj or"><img src="../Images/bf472dd33cf0ef58c7bdd03a23da749e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LoV0T3qiDHQMZzIL7CD2WA.png"/></div></div></figure><p id="c052" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">恭喜你。🍾</p><p id="ad3d" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">您刚刚在《我的世界》发布了EC2服务器！(那多爽啊！？)</p><p id="78d8" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">要破坏您的基础设施，您可以运行以下命令:</p><pre class="kh ki kj kk gu nu nv nw nx aw ny bi"><span id="5d36" class="nz mh ir nv b gz oa ob l oc od"># To Destroy the Infrastructure created<br/>/bashful terraform -chdir=home/terraform/ec2 destroy -auto-approve</span></pre><h1 id="764e" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">结论</h1><p id="744f" class="pw-post-body-paragraph kw kx ir ky b kz my js lb lc mz jv le lf na lh li lj nb ll lm ln nc lp lq lr ik bi translated">在《我的世界》，你可以随意使用命令块，让这个项目变得更加有趣。如果被《我的世界》事件触发，这些块可以执行上面的命令，例如激活一个杠杆，按下一个按钮，或者与一些红色石头组件交互。让你的想象力自由驰骋。</p><p id="d3a0" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">记住，这是玩的工具。Bash日志很乱，很难阅读，就生产率和安全性而言，在为真正的Terraform基础设施创建CI/CD服务器时有一些最佳实践，但是谁知道呢？</p><p id="167b" class="pw-post-body-paragraph kw kx ir ky b kz la js lb lc ld jv le lf lg lh li lj lk ll lm ln lo lp lq lr ik bi translated">也许我们应该重新思考如何在元宇宙世界中至少可视化部分DevOps工具。</p><blockquote class="os ot ou"><p id="80d9" class="kw kx nt ky b kz la js lb lc ld jv le ov lg lh li ow lk ll lm ox lo lp lq lr ik bi translated">感谢阅读！玩得开心！</p><p id="4d77" class="kw kx nt ky b kz la js lb lc ld jv le ov lg lh li ow lk ll lm ox lo lp lq lr ik bi translated">洛伦佐</p></blockquote><h1 id="c957" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">更多想法</h1><ul class=""><li id="1690" class="ls lt ir ky b kz my lc mz lf nq lj nr ln ns lr lx ly lz ma bi translated">当按下《我的世界》按钮时，使用命令块启动服务器</li><li id="1717" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">使用basish插件通过一个《我的世界》按钮向Slack发送消息</li><li id="4cb8" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">为Terraform创建一个自定义插件，而不是使用basish</li><li id="f3a0" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">创建一个插件，将云基础设施表示为《我的世界》结构/块(使用。tfstate)</li></ul><h1 id="7ca9" class="mg mh ir bd mi mj mk ml mm mn mo mp mq jx mr jy ms ka mt kb mu kd mv ke mw mx bi translated">参考</h1><ol class=""><li id="ddc6" class="ls lt ir ky b kz my lc mz lf nq lj nr ln ns lr oy ly lz ma bi translated">https://docs.docker.com/get-started/overview/<a class="ae nd" href="https://docs.docker.com/get-started/overview/" rel="noopener ugc nofollow" target="_blank"/></li><li id="9f20" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr oy ly lz ma bi translated">【https://docs.docker.com/compose/ T4】</li><li id="409e" class="ls lt ir ky b kz mb lc mc lf md lj me ln mf lr oy ly lz ma bi translated"><a class="ae nd" href="https://github.com/itzg/docker-minecraft-server" rel="noopener ugc nofollow" target="_blank">https://github.com/itzg/docker-minecraft-server</a></li></ol></div></div>    
</body>
</html>