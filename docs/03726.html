<html>
<head>
<title>How to Build Better Password Entry in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中构建更好的密码输入</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/providing-a-convenient-way-to-enter-a-password-in-swiftui-2cf29adf042c?source=collection_archive---------4-----------------------#2020-03-01">https://betterprogramming.pub/providing-a-convenient-way-to-enter-a-password-in-swiftui-2cf29adf042c?source=collection_archive---------4-----------------------#2020-03-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7374" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在您的密码文本字段中添加显示/隐藏密码按钮</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/271f807309caaa35f80143c17ba2987e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WVvMtc4gFAKpfcLEyo1HsQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">谢恩·艾弗里在<a class="ae ky" href="https://unsplash.com/s/photos/password?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="57b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多大型应用程序——如YouTube、Twitter和Amazon——允许用户在需要输入密码时在安全文本字段和普通文本字段之间切换。这是一个很好的用户体验，因为你的用户需要多次尝试登录，仅仅因为他们有一个复杂的密码和一个拼写错误，这将是非常令人沮丧的。</p><p id="02dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将探索如何在SwiftUI中重新创建这个功能。首先，我们将看到如何使用<code class="fe lv lw lx ly b">SecureField</code>来模糊输入的文本。接下来，我们将添加一个按钮，在这种文本字段和普通的将内容显示为纯文本的<code class="fe lv lw lx ly b">TextField</code>之间切换。</p><p id="a436" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的两张图片显示了本教程的最终结果:在左边的图片中，密码被遮住了，所以看不到，但是在右边的图片中，用户可以看到输入了什么。当密码不可读时，用于切换可见性的按钮将显示一个闭着的眼睛图标，当密码可读时，将显示一个睁开的眼睛图标。</p><div class="kj kk kl km gt ab cb"><figure class="lz kn ma mb mc md me paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f6ca918668081f202b6e8114513f339b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*0PLC7jWo0myBISLQuLTvkw.png"/></div></figure><figure class="lz kn ma mb mc md me paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/e3bf4f04db12cd7a0fec284a9bcc09c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*gYc5Kf7LSYI5cW0oApFuKQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk mf di mg mh translated">添加一个按钮来显示和隐藏文本字段中的密码。左:密码隐藏。右:显示密码。来自<a class="ae ky" href="http://www.flaticon.com/" rel="noopener ugc nofollow" target="_blank">www.flaticon.com</a>的<a class="ae ky" href="https://www.flaticon.com/authors/freepik" rel="noopener ugc nofollow" target="_blank"> Freepik </a>制作的图标。</p></figure></div></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="a759" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">履行</h1><p id="037a" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">首先，让我们从添加一个新的SwiftUI视图开始。您可以通过文件→新建→文件…或按Cmd+N来添加新文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/a93ed0bcbba96d7e3335338cbc8c0aa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1heFtJpjh8aTbuVBVL0iGg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的SwiftUI视图—添加新文件</p></figure><p id="a299" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您需要选择SwiftUI视图模板。您可以在名为“用户界面”的部分中找到它，或者使用过滤器文本字段找到它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/b7ce9158122a1dd7a48ee13e4b947488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7NMFgKjuyQ6e1uX0c5pbzQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的SwiftUI视图—选择SwiftUI视图模板</p></figure><p id="ddce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创建一个新的视图，它将显示一个简单的“Hello，World！”在一个标签里。从这个模板开始，我们可以开始设计和实现我们的UI。首先，用以下内容替换默认结构的内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="b657" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 1</code> —我们将使用两个代表州的属性。第一个是名为<code class="fe lv lw lx ly b">password</code>的属性，它将保存输入的文本。下一个是<code class="fe lv lw lx ly b">secured</code>，它会跟踪文本是否可读。</p><p id="3d8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 2</code> —通过使用一个<code class="fe lv lw lx ly b">HStack</code>，文本字段和按钮将被放置在一起。稍后，这两个元素都将在这个堆栈中定义。如果你愿意，你也可以使用<code class="fe lv lw lx ly b">VStack</code>将它们放在一个垂直的堆栈中，或者使用<code class="fe lv lw lx ly b">ZStack</code>将一个放在另一个的上面。</p><p id="3026" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是添加我们正在使用的两个文本字段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c933" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 1</code> —在SwiftUI中，您可以简单地使用<code class="fe lv lw lx ly b">if</code>根据条件显示不同的视图。<code class="fe lv lw lx ly b">secured</code>的值将决定我们是使用模糊密码的<code class="fe lv lw lx ly b">SecureField</code>还是普通的<code class="fe lv lw lx ly b">TextField</code>。</p><p id="41c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 2</code> —显示一个<code class="fe lv lw lx ly b">SecureField</code>就像调用初始化器并传入一个占位符文本(本例中为<code class="fe lv lw lx ly b">Password</code>)和一个绑定一样简单。这里，我们将文本字段绑定到我们的属性<code class="fe lv lw lx ly b">password</code>，这样输入的文本将被存储为该属性的值。我们还添加了填充和边框，使它看起来很漂亮。</p><p id="74be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 3</code> —在<code class="fe lv lw lx ly b">else</code>分支中，我们处理<code class="fe lv lw lx ly b">secured</code>为假的情况。在这种情况下，我们可以使用一个简单的<code class="fe lv lw lx ly b">TextField</code>，其设置方式与之前的<code class="fe lv lw lx ly b">SecureField</code>相同。</p><p id="2ffd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经添加了文本字段，让我们添加按钮在它们之间切换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="ca42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 1</code> —按钮将采取一个动作并关闭定义视图。每当按钮被按下时，我们将通过调用<code class="fe lv lw lx ly b">.toggle()</code>来翻转<code class="fe lv lw lx ly b">secured</code>的值。</p><p id="0942" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 2</code> —在这个例子中，我们可以将按钮的实际视图的定义移动到一个单独的SwiftUI视图中，使其可重用。因此，我们只需要检查<code class="fe lv lw lx ly b">secured</code>的值，并用两个眼睛图像之一创建一个<code class="fe lv lw lx ly b">EyeImage</code>。下一步我们会看到<code class="fe lv lw lx ly b">EyeImage</code>的定义。</p><p id="9b2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们看看如何为<code class="fe lv lw lx ly b">EyeImage</code>使用专用的SwiftUI视图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="59b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 1</code>—<code class="fe lv lw lx ly b">EyeImage</code>的一个实例可以通过将一个图像的名称传递给初始化器来构造。该名称将存储在属性<code class="fe lv lw lx ly b">imageName</code>中。</p><p id="0c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">// 2</code> —我们将在<code class="fe lv lw lx ly b">body</code>中使用这张图片。这是协议<code class="fe lv lw lx ly b">View</code>要求的计算属性。这里我们创建一个新的<code class="fe lv lw lx ly b">Image</code>，并通过设置它的颜色和大小来配置它。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="db8a" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">结论</h1><p id="5148" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">这就是让用户看到文本字段中输入的内容所需要做的一切。虽然与普通登录相比，这只是一个小小的改进，但这将防止他们感到沮丧——而且可能会让你的用户更高兴。这不就是一个app的真正目标吗？</p><p id="6495" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能看起来像很多代码，但是，实际上，加在一起只有大约45行。SwiftUI的简洁和表现力真的让人惊叹。你可以在这里找到<a class="ae ky" href="https://gist.github.com/DavidPiper94/ae4cc6048470faa8437223c61cb5bf44" rel="noopener ugc nofollow" target="_blank">的全部文件</a>。如果您不喜欢眼睛图标，您也可以使用任何其他图像，甚至使用简单的按钮在两个文本字段之间切换。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="2eb5" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">资源</h1><p id="5b36" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">这是我在这个例子中使用的两个眼睛图标。由www.flaticon.com<a class="ae ky" href="http://www.flaticon.com/" rel="noopener ugc nofollow" target="_blank">的</a><a class="ae ky" href="https://www.flaticon.com/authors/freepik" rel="noopener ugc nofollow" target="_blank"> Freepik </a>制造，可以在<a class="ae ky" href="https://file000.flaticon.com/downloads/license/license.pdf" rel="noopener ugc nofollow" target="_blank">flat icon</a>的许可下使用。</p><div class="nq nr gp gr ns nt"><a href="https://www.flaticon.com/de/kostenloses-icon/leeres-auge_14777" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">leers auge kosten lose Vektor-Icons entworfen von free pik</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">在SVG-、PSD-、PNG-、EPS-格式或als网络字体中加载这些kostenlose图标。Flaticon，die gréte daten bank…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">www.flaticon.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ks nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a href="https://www.flaticon.com/de/kostenloses-icon/geschlossenes-auge_13523" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">自由女神像</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">在SVG-、PSD-、PNG-、EPS-格式或als网络字体中加载这些kostenlose图标。Flaticon，die gréte daten bank…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">www.flaticon.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh ks nt"/></div></div></a></div></div></div>    
</body>
</html>