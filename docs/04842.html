<html>
<head>
<title>Build a Serverless Webform With Server-Side Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用服务器端Swift构建无服务器网络表单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-serverless-webform-with-server-side-swift-8acaeedde216?source=collection_archive---------9-----------------------#2020-05-14">https://betterprogramming.pub/build-a-serverless-webform-with-server-side-swift-8acaeedde216?source=collection_archive---------9-----------------------#2020-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae7f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何用API Gateway、Lambda、DynamoDB和Swift-Sprinter实现一个web服务器，而不用一行JavaScript代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/216c07e106368ba5c149945316a178d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fp5exO05xPbK5crL6EGoLA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="be69" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不使用JavaScript在Swift中实现网站可能吗？是的，它是。</p><p id="a3a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个技巧非常古老，它包括在服务器上生成HTML页面。这个想法是为了避免在客户端使用JavaScript，用CSS样式化HTML，用AWS Lambda生成页面，用API Gateway提供内容。持久层将使用DynamoDB实现。我们将使用<a class="ae lu" href="https://serverless.com" rel="noopener ugc nofollow" target="_blank">无服务器</a>框架在AWS上部署我们的项目。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d239" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">无服务器项目设置</h1><p id="e0be" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我们假设您已经按照<a class="ae lu" href="https://github.com/swift-sprinter/aws-serverless-swift-sprinter-web-template#requirements" rel="noopener ugc nofollow" target="_blank">自述文件</a>设置了所有要求:</p><ul class=""><li id="d3e7" class="mz na it la b lb lc le lf lh nb ll nc lp nd lt ne nf ng nh bi translated">使用您的AWS帐户配置的AWS cli</li><li id="12f1" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated">码头工人</li><li id="8414" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated">无服务器</li><li id="b52b" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated">制造</li></ul><p id="9809" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">克隆模板项目:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="f083" class="ns md it no b gy nt nu l nv nw">git clone <a class="ae lu" href="https://github.com/Andrea-Scuderi/aws-serverless-swift-sprinter-template.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Andrea-Scuderi/aws-serverless-swift-sprinter-template.git</a></span><span id="ba0b" class="ns md it no b gy nx nu l nv nw">cd <a class="ae lu" href="https://github.com/Andrea-Scuderi/aws-serverless-swift-sprinter-template.git" rel="noopener ugc nofollow" target="_blank">aws-serverless-swift-sprinter-template</a></span></pre><p id="3c95" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后构建项目:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="f1e1" class="ns md it no b gy nt nu l nv nw">./build.sh</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/a6128f95659893922306bc4fe704c43e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tz-SC_vQnu4EEQIht4TPfg.png"/></div></div></figure><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="4a01" class="ns md it no b gy nt nu l nv nw">./deploy.sh</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/610130c6f034894c50dda09f6d2d5cb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8QG8kFcd-TQi3d4RBSrBQg.png"/></div></div></figure><p id="4afe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦项目部署到您的AWS帐户上，端点就创建好了。</p><p id="f7de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用web浏览器浏览生成的URL。webform已经启动并运行了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/ac3bb2e4d0f9e81750d87def906ee7ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kiXqhDeBNiCXJv11ISISw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fb68" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">它是如何工作的？</h1><p id="1924" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">Lambda在AWS无服务器堆栈中提供了一个计算模块，并与DynamoDB交互以检索存储的数据:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/3dea0d0bd0fa87693c7da27ce28f60e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUuKWAGp6jXPQAuCZtSUgA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">无服务器云架构</p></figure><p id="382d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">HTML post内容跟踪从浏览器发送的动作，并由Lambda翻译成DynamoDB的<code class="fe oc od oe no b">CRUD</code>(创建、读取、更新、删除)命令。</p><p id="7c25" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更新DB后，内容将显示在响应web页面中。</p><p id="abae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">API网关充当代理，将Lambda内容发布为web服务器。</p><p id="9767" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">无服务器框架将栈部署到AWS。</p><h2 id="6100" class="ns md it bd me of og dn mi oh oi dp mm lh oj ok mo ll ol om mq lp on oo ms op bi translated">雨燕中的λ</h2><p id="10b9" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">Lambda在Swift中使用以下框架进行编码:</p><ul class=""><li id="4d55" class="mz na it la b lb lc le lf lh nb ll nc lp nd lt ne nf ng nh bi translated"><a class="ae lu" href="https://github.com/swift-sprinter/aws-lambda-swift-sprinter-nio-plugin" rel="noopener ugc nofollow" target="_blank">aws-lambda-Swift-sprinter-NIO-plugin</a>:使用Swift NIO实现AWS定制运行时。</li><li id="38bb" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated"><a class="ae lu" href="https://github.com/swift-aws/aws-sdk-swift" rel="noopener ugc nofollow" target="_blank"> aws-sdk-swift </a>:与DynamoDB交互。</li><li id="ae61" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated"><a class="ae lu" href="https://github.com/JohnSundell/Plot" rel="noopener ugc nofollow" target="_blank"> Plot </a>:渲染HTML。</li><li id="9741" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated"><a class="ae lu" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank">Bootstrap</a>:HTML页面的CSS(JavaScript禁用)。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/7c7cfecd3dfa8fd2b65c8e5a86d79105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KOkkxkH0bAVZDD1jRroFIA.png"/></div></div></figure><p id="73de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Lambda解码API网关代理事件并运行WebController。</p><p id="cd7f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">WebController用收到的信息更新DynamoDB，并呈现下一个HTML页面。</p><p id="c1bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">HTML页面作为对web客户端的响应返回。</p><h2 id="a444" class="ns md it bd me of og dn mi oh oi dp mm lh oj ok mo ll ol om mq lp on oo ms op bi translated">使用Plot呈现HTML</h2><p id="aa9a" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">WebController呈现HTML，将记录列表传递给presenter，presenter负责呈现正确的web页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/838e368a8cbd8cc74f7a900733417f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fDFIAQqBSxm9hHkLhjzP7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">hello/Sources/web controller/presenter . swift</p></figure><p id="0bd3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe oc od oe no b">present</code>函数用生成的内容呈现主页面，并评估HTML客户机发布的无状态动作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/38b90df9308cf0760bebdbcea9ec7291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PqHvmXJVFJNouJqlzV_XRQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/14587738c9c9564e051de4496efe4aa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PCMOdBD_1DPQNMEw1nGqPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">hello/Sources/web controller/Plot+card . swift</p></figure><p id="9ec7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">HTML是通过编写一个用绘图框架实现的小函数创建的。上图是一张卡片的例子。</p><h2 id="7a16" class="ns md it bd me of og dn mi oh oi dp mm lh oj ok mo ll ol om mq lp on oo ms op bi translated">将aws-sdk-swift用于DynamoDB</h2><p id="3ae0" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">aws-sdk-swift是用于aws的swift客户端，包含用于DynamoDB的客户端。以下是一些代码片段:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/4db606fdea85265b9c158221a0a2c808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yszX1aq8zP1REdIK6Kg_gg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">hello/Sources/product service/product service . swift</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="16c1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="5fab" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">我希望对服务器端的Swift和Swift-Sprinter 产生一些好奇。</p><p id="a7dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">查看<a class="ae lu" href="https://github.com/swift-sprinter/aws-serverless-swift-sprinter-web-template" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>并自由体验。我期待看到好的东西！</p><p id="2faa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。</p></div></div>    
</body>
</html>