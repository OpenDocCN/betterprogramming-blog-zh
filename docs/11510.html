<html>
<head>
<title>React App Internationalization With LinguiJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用LinguiJS实现应用国际化</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-app-internationalization-with-linguijs-9486ccd80e07?source=collection_archive---------2-----------------------#2022-03-26">https://betterprogramming.pub/react-app-internationalization-with-linguijs-9486ccd80e07?source=collection_archive---------2-----------------------#2022-03-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e30f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">LinguiJS库的分步指南，它是React的强大国际化框架</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f1803737003f83e4a5022ef43fb985a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0HSOV5tBl39zJxzF.jpeg"/></div></div></figure><h1 id="0b7b" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">将涵盖哪些内容</h1><ul class=""><li id="0a69" class="lm ln it lo b lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated"><a class="ae me" href="#b1a7" rel="noopener ugc nofollow">先决条件</a>；</li><li id="ff4e" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#0b33" rel="noopener ugc nofollow">安装</a>；</li><li id="38ea" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#104f" rel="noopener ugc nofollow">配置</a>；</li><li id="c488" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#ce55" rel="noopener ugc nofollow">优化</a>；</li><li id="f8ce" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#6ba9" rel="noopener ugc nofollow"> JSX宏</a>；</li><li id="692e" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#53ec" rel="noopener ugc nofollow"> JS宏</a>；</li><li id="8b99" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#bc8b" rel="noopener ugc nofollow">复数</a>；</li><li id="c31d" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><a class="ae me" href="#54ea" rel="noopener ugc nofollow">现场检测</a>；</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="b1a7" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">先决条件</h1><p id="0b1c" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">我们将使用一个简单的TypeScript CRA应用程序，没有任何额外的依赖和自定义配置:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="ef96" class="no kv it nk b gy np nq l nr ns">yarn create react-app my-app --template typescript</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/a4de3d7605d25be456223ea9ff6a1ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2ZIlVo7b2B7Cf4KRbxOAw.jpeg"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="0b33" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">装置</h1><p id="880c" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">向您的项目添加<code class="fe nu nv nw nk b"><a class="ae me" href="https://www.npmjs.com/package/@lingui/cli" rel="noopener ugc nofollow" target="_blank">@lingui/cli</a></code>、<code class="fe nu nv nw nk b"><a class="ae me" href="https://www.npmjs.com/package/@lingui/macro" rel="noopener ugc nofollow" target="_blank">@lingui/macro</a></code>和<code class="fe nu nv nw nk b"><a class="ae me" href="https://www.npmjs.com/package/@lingui/react" rel="noopener ugc nofollow" target="_blank">@lingui/react</a></code>包:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="d55e" class="no kv it nk b gy np nq l nr ns">yarn add @lingui/cli @lingui/macro -D<br/>yarn add @lingui/react</span></pre><p id="de8b" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">此时，我将在我的<code class="fe nu nv nw nk b">package.json</code>文件中有这些版本:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="b177" class="no kv it nk b gy np nq l nr ns">"dependencies": <em class="oc">{<br/>    </em>"@lingui/react": "^3.13.2",<br/>    ...<br/><em class="oc">}</em>,<br/>"devDependencies": <em class="oc">{<br/>    </em>"@lingui/cli": "^3.13.2",<br/>    "@lingui/macro": "^3.13.2",<br/>}</span></pre><p id="6826" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated"><code class="fe nu nv nw nk b">yarn.lock</code>文件依赖关系:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="89df" class="no kv it nk b gy np nq l nr ns">"@lingui/react@^3.13.2":<br/>  version "3.13.2"<br/>  ...</span><span id="c409" class="no kv it nk b gy od nq l nr ns">"@lingui/cli@^3.13.2":<br/>  version "3.13.2"<br/>  ...</span><span id="5e36" class="no kv it nk b gy od nq l nr ns">"@lingui/macro@^3.13.2":<br/>  version "3.13.2"</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="104f" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">配置</h1><h2 id="b172" class="no kv it bd kw oe of dn la og oh dp le lt oi oj lg lv ok ol li lx om on lk oo bi translated">第一步。Lingui配置文件</h2><p id="dd72" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">创建包含以下内容的<code class="fe nu nv nw nk b">lingui.config.js</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="8ac3" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated"><strong class="lo iu"> ⚠️注</strong>:每个区域设置都应该是一个有效的<a class="ae me" href="http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lo iu"> BCP-47 </strong> </a>代码，就像英语的<a class="ae me" href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html#en" rel="noopener ugc nofollow" target="_blank"> <strong class="lo iu"> en </strong> </a>和法语的<a class="ae me" href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html#fr" rel="noopener ugc nofollow" target="_blank"> <strong class="lo iu"> fr </strong> </a>一样。</p><p id="ae2d" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">从3个不同的来源读取配置(首先找到的获胜):</p><ul class=""><li id="e142" class="lm ln it lo b lp nx lr ny lt or lv os lx ot lz ma mb mc md bi translated">来自<code class="fe nu nv nw nk b">package.json</code>中的<code class="fe nu nv nw nk b">lingui</code>部分</li><li id="bc29" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">来自<code class="fe nu nv nw nk b">.linguirc</code></li><li id="dc97" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">来自<code class="fe nu nv nw nk b">lingui.config.js</code></li><li id="ad5f" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">从<code class="fe nu nv nw nk b"><strong class="lo iu">lingui.config.ts</strong></code> _(从3.4.0开始)</li></ul><p id="7d01" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">在基于TypeScript的配置中，您可以使用ESM格式并导出<code class="fe nu nv nw nk b">default</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="24fe" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">您可以通过此链接查看有关配置的更多信息:</p><div class="ou ov gp gr ow ox"><a href="https://lingui.js.org/ref/conf.html" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">Lingui配置- LinguiJS文档</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">从3个不同的来源读取配置(首先找到的获胜):您也可以定义环境变量…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">lingui.js.org</p></div></div></div></a></div><p id="344c" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">该配置将从<code class="fe nu nv nw nk b">src</code>目录下的源文件中提取消息，并将其写入<code class="fe nu nv nw nk b">src/locales</code>中的消息目录中(例如，<em class="oc">英文</em>目录将位于<code class="fe nu nv nw nk b">src/locales/en/messages.po</code>)。最后推荐PO格式。其他可用格式见<code class="fe nu nv nw nk b"><a class="ae me" href="https://lingui.js.org/ref/conf.html#std-config-format" rel="noopener ugc nofollow" target="_blank">format</a></code>文档。</p><h2 id="72a3" class="no kv it bd kw oe of dn la og oh dp le lt oi oj lg lv ok ol li lx om on lk oo bi translated">步骤2:提取并编译</h2><p id="ac9c" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">将提取和编译脚本添加到您的<code class="fe nu nv nw nk b">package.json</code>文件:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="efaa" class="no kv it nk b gy np nq l nr ns">"scripts": <em class="oc">{<br/>    </em>"extract": "lingui extract",<br/>    "compile": "lingui compile"<br/><em class="oc">}</em>,</span></pre><p id="668c" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">注意:<code class="fe nu nv nw nk b">extract</code>将解析应用程序中的消息并创建/更新<code class="fe nu nv nw nk b">.po</code>文件，而<code class="fe nu nv nw nk b">compile</code>将PO消息转换为JS对象:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/0dfd90cd718744b4c748c6a37efaec4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O3KHym8jlaUdW4nXO-FKiQ.jpeg"/></div></div></figure><p id="e975" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">我们将在后面详细介绍。</p><p id="2f0e" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">您可以通过以下方式查看有关提取和编译脚本的更多信息:</p><div class="ou ov gp gr ow ox"><a href="https://lingui.js.org/ref/cli.html?highlight=extract#global-options" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">API参考— CLI (@lingui/cli) — LinguiJS文档</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">lingui提取[文件…] [ —清除] [ —覆盖] [ —格式] [ —区域设置] [ —转换自] [ —详细] [ —观察…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">lingui.js.org</p></div></div></div></a></div></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="f333" class="no kv it bd kw oe of dn la og oh dp le lt oi oj lg lv ok ol li lx om on lk oo bi translated">步骤3:代码更新</h2><p id="ae7b" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">让我们添加一个上下文，它将从<code class="fe nu nv nw nk b"><a class="ae me" href="https://www.npmjs.com/package/@lingui/react" rel="noopener ugc nofollow" target="_blank">@lingui/react</a></code>包中添加<code class="fe nu nv nw nk b">I18nProvider</code>，并将处理我们的应用程序中的区域设置状态更改:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/900e8929c69dddb313912b159b8d22d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Lv9P-9Aicg0w4mCgIrZlhQ.jpeg"/></div></figure><p id="b6db" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="4ece" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">注意:我们也添加了复数，我们将在<a class="ae me" href="#bc8b" rel="noopener ugc nofollow">复数</a>部分介绍。</p><p id="612a" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">之后，用我们创建的<code class="fe nu nv nw nk b">&lt;I18nProvider/&gt;</code>包装<code class="fe nu nv nw nk b">index.tsx</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="2ca9" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">用<code class="fe nu nv nw nk b">&lt;Trans/&gt;</code>组件、<code class="fe nu nv nw nk b">useI18nContext</code>挂钩和<code class="fe nu nv nw nk b">&lt;select&gt;</code>标签更新<code class="fe nu nv nw nk b">App.tsx</code>文件，这将帮助我们更改语言环境:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/071cef15ad375663d73b0fbe2575fd6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_xB4NQOT0gPMfYxE3Okpw.jpeg"/></div></div></figure><p id="55a9" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">更新的<code class="fe nu nv nw nk b">src/App.tsx</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="70ad" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">🟢运行“摘录”:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="44a9" class="no kv it nk b gy np nq l nr ns">yarn extract</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/e7e38b2878e6d4d0028eaa16d199a811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmyHuoYbWW5-EcxkkgTVHg.jpeg"/></div></div></figure><p id="1be5" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">“提取”脚本和那些PO文件内容的结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="6c31" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">更新法语<code class="fe nu nv nw nk b">/locales/fr/messages.po</code>文件翻译:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="e784" class="no kv it nk b gy np nq l nr ns">msgid "Edit &lt;0&gt;src/App.tsx&lt;/0&gt; and save to reload."<br/>msgstr "<strong class="nk iu">Modifiez &lt;0&gt;src/App.tsx&lt;/0&gt; et enregistrez pour recharger.</strong>"<br/><br/>msgid "Learn React"<br/>msgstr "<strong class="nk iu">Apprendre React</strong>"</span></pre><p id="aab2" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">更新<code class="fe nu nv nw nk b">package.json</code>文件，现在该命令每次启动时编译你的翻译:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="d05d" class="no kv it nk b gy np nq l nr ns">"scripts": <em class="oc">{<br/>    </em>"start": "<strong class="nk iu">yarn compile &amp;&amp;</strong> react-scripts start",<br/>    "extract": "lingui extract",<br/>    "compile": "lingui compile"<br/><em class="oc">}</em>,</span></pre><p id="7390" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">🟢让我们测试我们的更新:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="642c" class="no kv it nk b gy np nq l nr ns">yarn start</span></pre><p id="0cf9" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">结果</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/1b7ca919dcb41e310b9c75c5edf54b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Sch3qa1jNFOfauJTNCx3w.jpeg"/></div></div></figure><p id="dd03" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">打开浏览器并检查结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/1a025d526c61cbb001538c421761111f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3b9DnwKnE_DaBe6nAQ38Zw.gif"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="ce55" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">最佳化</h1><p id="b81f" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">那么，如果我们有一个巨大的文本组件，会是什么情况呢？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="c915" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">运行提取和编译:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="8f1d" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated"><code class="fe nu nv nw nk b">message.js</code>编译后:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="bc9e" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">如您所见，LoremIpsum文本的对象键非常大(复制全文内容)。为了避免这种情况，您可以将一个<code class="fe nu nv nw nk b">id</code>值传递给<code class="fe nu nv nw nk b">&lt;Trans/&gt;</code>组件:</p><p id="d59c" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">添加<code class="fe nu nv nw nk b">lorem-ipsum</code>值的<code class="fe nu nv nw nk b">id</code>道具:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="292b" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">运行“提取”:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="b4c3" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">如您所见，旧值仍然存在，我们可以通过向“提取”脚本添加<code class="fe nu nv nw nk b"><a class="ae me" href="https://lingui.js.org/ref/cli.html?highlight=extract#cmdoption-extract-clean" rel="noopener ugc nofollow" target="_blank"><strong class="lo iu">--clean</strong></a></code>标志来修复它，该标志将:</p><blockquote class="pl pm pn"><p id="0c6f" class="mw mx oc lo b lp nx ju my lr ny jx mz po nz nb nc pp oa ne nf pq ob nh ni lz im bi translated">从目录中删除过时的邮件。当消息在源代码中丢失时，它就过时了。</p></blockquote><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="fcab" class="no kv it nk b gy np nq l nr ns">"scripts": {<em class="oc"><br/></em><br/>    "extract": "lingui extract <strong class="nk iu">--clean</strong>",<br/>    ...<br/><em class="oc">}</em>,</span></pre><p id="b800" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">🟢再次运行“摘录”脚本:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="a062" class="no kv it nk b gy np nq l nr ns">yarn extract</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="0724" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">太好了，现在我们谈好了。现在我们的JS对象键值在<code class="fe nu nv nw nk b">yarn compile</code>命令后会变小并且可读。</p><p id="c92f" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">注意:<a class="ae me" href="https://github.com/lingui/js-lingui" rel="noopener ugc nofollow" target="_blank">如果你不提供翻译，LinguiJS </a>将使用msgid值，所以要小心使用<code class="fe nu nv nw nk b">--clean</code>标志。我们将在下一节介绍如何管理它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/c9ab0f7d487bd06c51f3ea7108642c38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfDI9zdJEArZ8QSP6tFefA.jpeg"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="6ba9" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">JSX宏</h1><p id="d460" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">让我们深入了解一下宏的世界。</p><p id="dece" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">使用宏的优点是:</p><ul class=""><li id="9135" class="lm ln it lo b lp nx lr ny lt or lv os lx ot lz ma mb mc md bi translated">不需要学习<a class="ae me" href="https://lingui.js.org/ref/message-format.html?highlight=icu%20messageformat" rel="noopener ugc nofollow" target="_blank"> ICU MessageFormat </a>语法。你总是使用熟悉的JS和JSX代码；</li><li id="353c" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">对组件和功能进行类型检查；</li><li id="8012" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">在转换期间执行多个规则的附加验证；</li><li id="e7ad" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">从生产版本中删除非必要数据(如注释和默认消息)以节省几个字节；</li></ul><p id="1855" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">👉这里是其他<code class="fe nu nv nw nk b">&lt;Trans/&gt;</code>道具及其有用的特性，而不是已经提到的<code class="fe nu nv nw nk b">id</code>:</p><ul class=""><li id="74b4" class="lm ln it lo b lp nx lr ny lt or lv os lx ot lz ma mb mc md bi translated"><code class="fe nu nv nw nk b"><strong class="lo iu">comment</strong></code>:对译者非常有用，提供意义或文本上下文；</li><li id="cecd" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b"><strong class="lo iu">render</strong></code>:使用<a class="ae me" href="https://artem-diashkin.medium.com/hoc-higher-order-components-component-wrapping-render-props-with-examples-dc1433a61be9#fb58" rel="noopener">渲染道具</a>模式，用它你可以为你的翻译添加一个包装器——对于添加额外的逻辑或分析事件非常有用；</li><li id="c61d" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b"><strong class="lo iu">component</strong></code>:与渲染道具相同，但不会通过<code class="fe nu nv nw nk b">id</code>、<code class="fe nu nv nw nk b">message</code>或<code class="fe nu nv nw nk b">transation</code>道具(<code class="fe nu nv nw nk b">@lingui/react</code>库中的<code class="fe nu nv nw nk b">TransRenderProps</code>类型)；</li></ul><p id="4afb" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">我们来看上面的一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="b7a4" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated"><code class="fe nu nv nw nk b">.po</code>文件结果:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="174f" class="no kv it nk b gy np nq l nr ns">#. This message in an example without any context<br/>#: src/components/TransPropsExample.tsx:35<br/>msgid "no-sense-message"<br/>msgstr "A message that makes no sense. Value: {priceForProduct}"</span></pre><p id="023b" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">更新<code class="fe nu nv nw nk b">App.tsx</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="ae60" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">🟢运行提取脚本并重启应用程序:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="0a5b" class="no kv it nk b gy np nq l nr ns">yarn extract &amp;&amp; yarn start</span></pre><p id="ea21" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">结果(英语区域设置):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/6440eebe923291b8ff3a719b2081a116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-6e8gArbpCnrCcAaufLIg.jpeg"/></div></div></figure><p id="fa56" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">结果(法语区域设置):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/6eb3d5a4cbc4d592bd6376b3b3ba56ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WGa9LW14CWo47CD8KpXuMQ.jpeg"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="fa1a" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated"><strong class="lo iu"> ⚠️注意</strong>:尽量不要在Trans中使用匿名值:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="327f" class="no kv it nk b gy np nq l nr ns"><em class="oc">&lt;Trans&gt;<br/></em>A message that makes no sense. Value: <em class="oc">{</em>getSomeValue<em class="oc">()}<br/>&lt;/</em>Trans&gt;</span><span id="7d81" class="no kv it nk b gy od nq l nr ns"><strong class="nk iu">// .po file result</strong><br/>msgid "A message that makes no sense. Value: {0}"</span></pre><p id="ac67" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">尝试声明一个具有翻译人员能够理解的含义的变量:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="e4b4" class="no kv it nk b gy np nq l nr ns">const <strong class="nk iu"><em class="oc">priceForProduct</em></strong> = getSomeValue<em class="oc">()</em>;</span><span id="e3c8" class="no kv it nk b gy od nq l nr ns"><em class="oc">&lt;Trans&gt;<br/></em>A message that makes no sense. Value: <em class="oc">{</em>priceForProduct<em class="oc">}<br/>&lt;/</em>Trans&gt;</span><span id="6517" class="no kv it nk b gy od nq l nr ns"><strong class="nk iu">// .po file result</strong><br/>msgid "A message that makes no sense. Value: {<strong class="nk iu"><em class="oc">priceForProduct</em></strong>}"</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="53ec" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">JS宏</h1><p id="f3b4" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">这些宏可以在任何环境下使用(如JSX以外)。所有JS宏都被转换成一个包装在<code class="fe nu nv nw nk b">i18n._</code>调用中的<em class="oc">消息描述符</em>。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="b46e" class="no kv it nk b gy np nq l nr ns"><strong class="nk iu">import</strong> { <strong class="nk iu">t</strong> } from "@lingui/macro"<br/><strong class="nk iu">const</strong> message = <strong class="nk iu">t</strong>({<br/>   id: 'msg.hello',<br/>   commen<strong class="nk iu">t</strong>: 'Gree<strong class="nk iu">t</strong>ings at the homepage',<br/>   message: `Hello <em class="oc">${</em>name<em class="oc">}</em>`<br/>})<br/><br/><em class="oc">// ↓ ↓ ↓ ↓ ↓ ↓</em><br/><br/><strong class="nk iu">import</strong> { i18n } from "@lingui/core"<br/><strong class="nk iu">const</strong> message = i18n._(<em class="oc">/*i18n*/</em>{<br/>   id: 'msg.hello',<br/>   commen<strong class="nk iu">t</strong>: 'Gree<strong class="nk iu">t</strong>ings at the homepage',<br/>   message: 'Hello {name}',<br/>   values: { name }<br/>})</span></pre><p id="a733" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="145e" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">这将导致与之前完全相同的结果，但是没有包装器、检查器和额外的JSX特性，但是JS宏对于像字符串数组这样的简单情况非常有用。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="bc8b" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">复数</h1><p id="ffbd" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">在处理国际化时，复数是必不可少的。<a class="ae me" href="https://github.com/lingui/js-lingui" rel="noopener ugc nofollow" target="_blank"> LinguiJS </a>使用<a class="ae me" href="http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html" rel="noopener ugc nofollow" target="_blank"> CLDR复数规则</a>。一般来说，有6种复数形式(摘自<a class="ae me" href="http://cldr.unicode.org/index/cldr-spec/plural-rules" rel="noopener ugc nofollow" target="_blank"> CLDR复数</a>页):</p><ul class=""><li id="62e9" class="lm ln it lo b lp nx lr ny lt or lv os lx ot lz ma mb mc md bi translated">零；</li><li id="1890" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">一(单数)；</li><li id="4996" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">二(双)；</li><li id="2c2a" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">很少(pau cal)；</li><li id="7709" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">many(如果它们有单独的类，也用于分数)；</li><li id="5908" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated">其他(必需—一般<strong class="lo iu">复数</strong>形式—如果语言只有一种形式，也可以使用)。</li></ul><p id="7a7e" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">只有最后一个，即<em class="oc"> other </em>，是必需的，因为它是所有语言中唯一通用的<strong class="lo iu">复数形式。</strong></p><p id="2382" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">JSX的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="68b7" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">运行提取并运行应用程序。不同地区的结果:</p><div class="kj kk kl km gt ab cb"><figure class="pu kn pv pw px py pz paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/efb69f8de92dd91513b0ff2ca9851044.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*Oqj_rfmI_T5uV4Mt9uxAyA.jpeg"/></div></figure><figure class="pu kn qa pw px py pz paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/839e8ebd075f0df747fe0f65358cbf76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*YRhHdOuSKsMTMLcuuTeNKg.jpeg"/></div></figure></div></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="270b" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">注意:大多数情况下<code class="fe nu nv nw nk b">one</code>和<code class="fe nu nv nw nk b">other</code>的值就足够了，但是要小心，您需要检查您的语言环境使用了什么样的<a class="ae me" href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html" rel="noopener ugc nofollow" target="_blank">语言复数规则</a>(在我们的例子中是<a class="ae me" href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html#en" rel="noopener ugc nofollow" target="_blank"> <strong class="lo iu"> en </strong> </a>和<a class="ae me" href="https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html#fr" rel="noopener ugc nofollow" target="_blank"> <strong class="lo iu"> fr </strong> </a>，所以我们可以很容易地将<code class="fe nu nv nw nk b">zero</code>和<code class="fe nu nv nw nk b">few</code>从我们的例子中排除，因为它们是多余的)。</p><div class="kj kk kl km gt ab cb"><figure class="pu kn qb pw px py pz paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/4e7cdc47bf01fc17ffd1a6add6b82ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*zKu2U793lD-C0njclq-slw.jpeg"/></div></figure><figure class="pu kn qc pw px py pz paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/9ca342c17ec9db2e1dc7f3e53e15987a.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*dbSBPG4DY5gGg6c9wk-lsg.jpeg"/></div></figure></div><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="7b5e" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">具有相同结果的JS宏示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="54ea" class="ku kv it bd kw kx mr kz la lb ms ld le jz mt ka lg kc mu kd li kf mv kg lk ll bi translated">现场检测</h1><p id="4e9d" class="pw-post-body-paragraph mw mx it lo b lp lq ju my lr ls jx mz lt na nb nc lv nd ne nf lx ng nh ni lz im bi translated">我们将使用带有一些帮助函数的<code class="fe nu nv nw nk b"><a class="ae me" href="https://www.npmjs.com/package/@lingui/detect-locale" rel="noopener ugc nofollow" target="_blank">@lingui/detect-locale</a></code>包，帮助您检测用户的语言环境:</p><ul class=""><li id="e4aa" class="lm ln it lo b lp nx lr ny lt or lv os lx ot lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromCookie(key: string)</code> -接受一个关键字，因为param将从navigator cookies中恢复该值</li><li id="4cf2" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromHtmlTag(tag: string)</code> -将在HtmlDocument中找到参数中传递的属性(通常使用lang或xml:lang)</li><li id="c94e" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromNavigator()</code> -恢复导航语言，也兼容IE11等老浏览器</li><li id="0583" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromPath(localePathIndex: number)</code> -在一个数组中分割<strong class="lo iu"> location.pathname </strong>,因此你必须指定数组的索引，其中设置了的区域设置</li><li id="2231" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromStorage(key: string, { useSessionStorage: boolean }</code> -默认情况下将在本地存储上搜索具有该键的项目，如果**useSessionStorage**通过，将在SessionStorage上搜索</li><li id="fb9c" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromSubdomain(localeSubdomainIndex: number)</code> -像fromPath一样，分割段上的<code class="fe nu nv nw nk b">location.href</code>，您必须指定该段的索引</li><li id="c699" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">fromUrl(parameter: string)</code> -使用查询字符串解析器来恢复正确的参数</li></ul><p id="e524" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated"><code class="fe nu nv nw nk b">@lingui/detect-locale</code>导出方法:</p><ul class=""><li id="488a" class="lm ln it lo b lp nx lr ny lt or lv os lx ot lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">detect</code> -将返回第一次出现的探测器；</li><li id="284b" class="lm ln it lo b lp mf lr mg lt mh lv mi lx mj lz ma mb mc md bi translated"><code class="fe nu nv nw nk b">multipleDetect</code> -将返回每个检测器检测到的所有区域的数组</li></ul><p id="412f" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">🟢添加包:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="5768" class="no kv it nk b gy np nq l nr ns">yarn add @lingui/detect-locale</span></pre><p id="4972" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">我们将用<code class="fe nu nv nw nk b">detect</code>函数更新我们的<code class="fe nu nv nw nk b">&lt;I18nProvider/&gt;</code>组件。这样我们会得到一个有意义的结果:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="02d1" class="no kv it nk b gy np nq l nr ns">const result = <em class="oc">{<br/>    </em>url,<br/>    storage,<em class="oc"><br/>    </em>navigator,<br/>    cookie,<br/>    tag,<br/>    fromPath,<br/>    fromSubdomain,<br/><em class="oc">}</em></span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="e405" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">另外，我们将简单的<code class="fe nu nv nw nk b">setLocale</code>更改为<code class="fe nu nv nw nk b">handleChangeLocale</code> →现在区域设置将在区域设置更改时保存到localStorage和cookies中，并将在应用程序刷新时检索。</p><p id="5f18" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">结果:<code class="fe nu nv nw nk b"><a class="ae me" href="http://localhost:3000/fr/?lang=jp" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/fr/?lang=jp</a></code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qd"><img src="../Images/96aebf3d2d65fbe96118dba304d9a257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UA7uF_3KwN2pq40KOX_gtw.jpeg"/></div></div></figure><p id="8203" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">快乐的编码！不要犹豫问问题！</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="108d" class="pw-post-body-paragraph mw mx it lo b lp nx ju my lr ny jx mz lt nz nb nc lv oa ne nf lx ob nh ni lz im bi translated">GitHub资源库的链接:</p><div class="ou ov gp gr ow ox"><a href="https://github.com/nemrosim/react-i18n-lingui-examples" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">GitHub-nemrosim/react-i18n-Lingui-示例</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">github.com</p></div></div><div class="qe l"><div class="qf l qg qh qi qe qj ks ox"/></div></div></a></div></div></div>    
</body>
</html>