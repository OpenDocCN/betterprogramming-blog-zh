<html>
<head>
<title>Arduino and Visual Studio Code: Getting Started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Arduino和Visual Studio代码:入门</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/arduino-and-visual-studio-code-getting-started-1362539ea9d3?source=collection_archive---------11-----------------------#2022-05-16">https://betterprogramming.pub/arduino-and-visual-studio-code-getting-started-1362539ea9d3?source=collection_archive---------11-----------------------#2022-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5077" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用PlatformIO进行Arduino开发</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/71bdd25e6e1776eada88d6db4e7b007c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-ptd-UE71mOdrRMExV69A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@spen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯潘塞</a>在<a class="ae ky" href="https://unsplash.com/s/photos/arduino?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="84ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在使用标准Arduino IDE完成了几个Arduino项目之后，您可能想知道如何脱离初学者IDE，找到一种不同的方法，在. ino文件中使用<code class="fe lv lw lx ly b">setup()</code>和<code class="fe lv lw lx ly b">loop()</code>函数来设置您的文件。</p><p id="82d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很可能你的第一个项目在。ino文件:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9f39" class="md me it ly b gy mf mg l mh mi">setup() {</span><span id="af95" class="md me it ly b gy mj mg l mh mi">}</span><span id="5140" class="md me it ly b gy mj mg l mh mi">loop() {</span><span id="1138" class="md me it ly b gy mj mg l mh mi">}</span></pre><p id="de8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了摆脱这种情况，我想开始使用一个我几乎用于所有其他事情的编辑器:Visual Studio代码。</p><p id="7cbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在VS代码中使用一些不同的扩展来开发Arduino，但是我选择了PlatformIO。PlatformIO的扩展允许VS代码成为许多不同嵌入式系统(包括Arduino)的成熟IDE！</p><p id="82a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦安装了Visual Studio代码，就可以使用<code class="fe lv lw lx ly b">control + shift + p</code>打开快捷菜单。打开后，键入install，然后找到显示“扩展:安装扩展”的选项</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/1403eeb312c8a1c41444f0d462d85805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYInpflVSTuQXzzGSp-aMw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安装扩展提示</p></figure><p id="0d32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦选择了“扩展:安装扩展”提示符，您就可以通过键入“平台”来搜索PlatformIO一旦PlatformIO IDE选项出现在左侧栏上，我们就可以选择它，然后单击“安装”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/2d8e783584bb73aba99323722b9a6e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SsYxDuyjRmGJDK8e4Rap-g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PlatformIO扩展安装</p></figure><p id="e3b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，VS代码的左侧栏会有一个外星人图标，是针对PlatformIO IDE扩展的。选择它以打开PlatformIO IDE GUI。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/e2b359ca5c840389d9c7ca6f6192da84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbgI2qtpGHfSYJbAQnF2Ag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">平台界面</p></figure><p id="18b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦PlatformIO <em class="ml"> </em>的GUI打开，您就可以选择“新建项目”提示，在Arduino的初学者ide之外开始您的第一个Arduino项目！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/b26b4cfc6d8bdeb4af13f88a16263b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JUilk35IHpjyG0okWNqpqg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PlatformIO开放项目对话</p></figure><p id="545b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如我用的是嵌入式系统版的Hello，World它使一个LED闪烁。因此，我把这个项目命名为“blinky”在“板”选择字段中，确保选择您拥有的板；否则，以后构建和闪烁序列可能无法成功完成。</p><p id="310c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">命名项目并选择正确的Arduino板后，对话框将打开项目目录和主源代码文件。<code class="fe lv lw lx ly b">main.ino</code>文件已不存在！这个目录结构现在更有条理了，主要的源代码文件位于<code class="fe lv lw lx ly b">main.cpp</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/3439d69e8316343fafb81387d67c31d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I9fLM3U5hbvnyInQ6kxPnA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">VS代码中的主源代码文件</p></figure><p id="9eb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，您真正需要担心的唯一文件是<code class="fe lv lw lx ly b">main.cpp</code>。随着我开始更多地在其他系统上进行嵌入式开发，我注意到Arduino通过使用<code class="fe lv lw lx ly b">setup()</code>和<code class="fe lv lw lx ly b">loop()</code>在主函数中抽象出了大量的初始化。我不是这个的超级粉丝，所以我删除了<code class="fe lv lw lx ly b">main.cpp</code>的内容，用<code class="fe lv lw lx ly b">main()</code>代替:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2dd9" class="md me it ly b gy mf mg l mh mi">#include &lt;Arduino.h&gt;</span><span id="c0f6" class="md me it ly b gy mj mg l mh mi">int main(int argc, char **argv) {</span><span id="2b0b" class="md me it ly b gy mj mg l mh mi">init();</span><span id="5fd0" class="md me it ly b gy mj mg l mh mi">for(;;) {</span><span id="9d0a" class="md me it ly b gy mj mg l mh mi">}</span><span id="26b0" class="md me it ly b gy mj mg l mh mi">}</span></pre><p id="ddbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe lv lw lx ly b">setup()</code>和<code class="fe lv lw lx ly b">loop()</code>功能替换为main后，您会注意到还有一个<code class="fe lv lw lx ly b">init()</code>功能。此函数用于初始化Arduino板，以便与它后面的代码一起使用。如果没有<code class="fe lv lw lx ly b">init()</code>函数，您的代码很可能无法按预期运行。</p><p id="40d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会注意到文件开头的<code class="fe lv lw lx ly b">#include</code>语句，我们仍然拥有Arduino的所有输入、输出、管脚等功能。</p><p id="f6d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要启用输出引脚，使用<code class="fe lv lw lx ly b">pinMode()</code>功能:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="4cf5" class="md me it ly b gy mf mg l mh mi">const <em class="ml">int</em> ledPin = 12;</span><span id="2977" class="md me it ly b gy mj mg l mh mi">pinMode(ledPin, OUTPUT);</span></pre><p id="02f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用我的Arduino上的12号引脚来控制试验板上的一个LED。</p><p id="c5e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要在操作之间有一秒钟的延迟来循环打开和关闭LED。下面的代码允许我们让灯闪烁一次:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="b7ce" class="md me it ly b gy mf mg l mh mi">digitalWrite(ledPin, HIGH);</span><span id="934d" class="md me it ly b gy mj mg l mh mi">delay(1000);</span><span id="3957" class="md me it ly b gy mj mg l mh mi">digitalWrite(ledPin, LOW);</span><span id="8cf8" class="md me it ly b gy mj mg l mh mi">delay(1000);</span></pre><p id="bd0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码应该放在<code class="fe lv lw lx ly b">for(;;)</code>循环中，使其持续闪烁。</p><p id="1e8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们最终的<code class="fe lv lw lx ly b">main.cpp</code>文件看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/c3415fb944073360de7707ed6a3d5de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DzFVlCRGviX4-wzzjWIifw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最终main.cpp文件</p></figure><p id="b8a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦所有的代码都写好了，就该构建项目并刷新它了。要构建项目，使用<code class="fe lv lw lx ly b">control + shift + p</code>调出快捷菜单。进入菜单后，键入“build”应该有一个“PlatformIO: Build”的条目。该选项允许PlatformIO为之前创建项目时指定的特定Arduino板编译和构建Arduino项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/1161c73da39db4cd4aec5d78e6be9ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wTPqxoGxhK2RaP7Bnq8JrQ.png"/></div></div></figure><p id="9b4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦选中，您会注意到一个小终端出现在VS代码窗口的下半部分。一旦代码成功编译和构建，就可以进行刷新了！一个成功的构建将在终端中输出如下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/d185072ff560565486ae02de01e26c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*reXwD1WjBEnEomQMAyHn_Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">成功的Arduino平台构建</p></figure><p id="0e78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在项目成功构建之后，是时候将构建上传(刷新)到Arduino板上了。再次使用<code class="fe lv lw lx ly b">control + shift + p</code>并输入“上传”应该会有一个提示说“PlatformIO: Upload”选择此提示将您成功构建的项目上传到Arduino板上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/cdd8dcde5f318a3ae9ec5f397a8e13ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xV_X65s45OMvty5lbi7j8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">平台视频上传对话</p></figure><p id="9d02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成功将项目上传到板上后，Arduino应该会在每次操作之间让LED闪烁一秒钟！</p><p id="8d7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在VS Code的终端中，一次成功的上传将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/71e63ee26edfd5c7438dab532ec97b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*INykD2R3n6aIQWTRzRL0rw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">成功上传到Arduino</p></figure><p id="9d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你在Arduino初学者ide之外编写了第一个Arduino项目！您现在使用的是独立于Arduino IDE的嵌入式系统。PlatformIO也可以用于STM32板，甚至可以在互联网上找到更便宜的克隆板。:)</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="060d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">https://platformio.org/</p><p id="1baa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你在初学者Arduino IDE之外编写了你的第一个Arduino项目！您现在使用的是Arduino IDE之外的嵌入式系统。PlatformIO也可以用于STM32板，甚至可以在互联网上找到更便宜的克隆板。:)</p><p id="3dee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">https://platformio.org/<a class="ae ky" href="https://platformio.org/" rel="noopener ugc nofollow" target="_blank"/></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/71e63ee26edfd5c7438dab532ec97b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*INykD2R3n6aIQWTRzRL0rw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">成功上传到Arduino</p></figure><p id="d34c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你在初学者Arduino IDE之外编写了你的第一个Arduino项目！您现在使用的是Arduino IDE之外的嵌入式系统。PlatformIO也可以用于STM32板，甚至可以在互联网上找到更便宜的克隆板。:)</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="ceb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">https://platformio.org/<a class="ae ky" href="https://platformio.org/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>