<html>
<head>
<title>5 JavaScript WTFs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5个JavaScript WTFs</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-javascript-wtfs-62b6742ff3dd?source=collection_archive---------0-----------------------#2021-05-07">https://betterprogramming.pub/5-javascript-wtfs-62b6742ff3dd?source=collection_archive---------0-----------------------#2021-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="353f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">JavaScript的古怪之处会让开发人员紧张地大笑</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/635db975817741faa69e148b55d90a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMBcPr7kAMpdiwd7ygbADg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="f62d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们都爱JavaScript。这是一门伟大的语言。让它更受欢迎的是，它也有自己“有趣”的一面。今天，我将向您展示JavaScript中的五个wtf，并解释其中的内容。</p><p id="de54" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不，这些不是虫子。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="968f" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">1.香蕉</h1><p id="5b34" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">你会怎么写香蕉？在JavaScript中，这将完成:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="69a4" class="nd mc it mz b gy ne nf l ng nh">'b' + 'a' + + 'a' + 'a' // -&gt; baNaNa</span></pre><h2 id="9422" class="nd mc it bd md ni nj dn mh nk nl dp ml lh nm nn mn ll no np mp lp nq nr mr ns bi translated">它是如何工作的？</h2><p id="2276" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><code class="fe nt nu nv mz b">'b' +'a' + + 'a' + 'a'</code>导致<code class="fe nt nu nv mz b">baNaNa</code>，因为<code class="fe nt nu nv mz b">'b' + 'a' + + 'a' + 'a'</code>读取<code class="fe nt nu nv mz b">'b' + 'a' + (+'a') + 'a'</code>，而<code class="fe nt nu nv mz b">(+'a')</code>被转换为<em class="nw">而不是数字</em>、<code class="fe nt nu nv mz b">NaN</code>。这反过来会发生，因为在JavaScript中，二进制加法运算符<code class="fe nt nu nv mz b">+</code>试图将操作数转换为数字，但<code class="fe nt nu nv mz b">'a'</code>是<em class="nw">而不是数字</em>。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8569" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">2.布尔数学</h1><p id="3711" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">如果你在整天与数字打交道后感到沮丧，就换成布尔型吧。在JavaScript中，你真的可以用布尔来做数学运算。例如:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="4c77" class="nd mc it mz b gy ne nf l ng nh"><strong class="mz iu">true</strong> + <strong class="mz iu">true</strong>; // -&gt; 2</span><span id="930f" class="nd mc it mz b gy nx nf l ng nh">(<strong class="mz iu">true</strong> + <strong class="mz iu">true</strong>) * (<strong class="mz iu">true</strong> + <strong class="mz iu">true </strong>+ <strong class="mz iu">true</strong>) // -&gt; 6</span></pre><h2 id="dce1" class="nd mc it bd md ni nj dn mh nk nl dp ml lh nm nn mn ll no np mp lp nq nr mr ns bi translated">它是如何工作的？</h2><p id="75c8" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在JavaScript中，您可以使用<code class="fe nt nu nv mz b">Number</code>构造函数将<em class="nw">的值强制转换为数字。这将<code class="fe nt nu nv mz b">true</code>转换为<code class="fe nt nu nv mz b">1</code>并将<code class="fe nt nu nv mz b">false</code>转换为<code class="fe nt nu nv mz b">0</code>:</em></p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="891e" class="nd mc it mz b gy ne nf l ng nh">Number(true);  // -&gt; 1<br/>Number(false); // -&gt; 0</span></pre><p id="fb1c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">类似地，一元运算符<code class="fe nt nu nv mz b">+</code>试图将任何操作数转换为数字。对于<code class="fe nt nu nv mz b">true</code>和<code class="fe nt nu nv mz b">false</code>也是如此。这意味着使用一元运算符<code class="fe nt nu nv mz b">+</code>将<code class="fe nt nu nv mz b">true</code>强制为<code class="fe nt nu nv mz b">1</code>并将<code class="fe nt nu nv mz b">false</code>强制为<code class="fe nt nu nv mz b">0</code>:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="c703" class="nd mc it mz b gy ne nf l ng nh">+true;  // -&gt; 1<br/>+false; // -&gt; 0</span></pre><p id="7a87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，当你做加法或乘法时，<code class="fe nt nu nv mz b">ToNumber</code>方法也会被调用。根据<a class="ae ny" href="https://www.ecma-international.org/publications-and-standards/standards/ecma-262/#sec-tonumber" rel="noopener ugc nofollow" target="_blank">规格</a>:</p><blockquote class="nz"><p id="6f27" class="oa ob it bd oc od oe of og oh oi lt dk translated">“如果<code class="fe nt nu nv mz b">argument</code>是<code class="fe nt nu nv mz b">true</code>，则返回<code class="fe nt nu nv mz b">1</code>。如果<code class="fe nt nu nv mz b">argument</code>是<code class="fe nt nu nv mz b">false</code>，则返回<code class="fe nt nu nv mz b">+0</code>。</p></blockquote><p id="9e33" class="pw-post-body-paragraph ky kz it la b lb oj ju ld le ok jx lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">JavaScript中的布尔数学现在变得有意义了，不是吗？</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="2dcd" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">3.NaN实际上是一个数字</h1><p id="e2bf" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">让我们问问JavaScript什么是<em class="nw">而不是数字</em>、<code class="fe nt nu nv mz b">NaN</code>的意思:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="42e4" class="nd mc it mz b gy ne nf l ng nh">typeof NaN; // -&gt; 'number'</span></pre><p id="943b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">真的吗？</p><h2 id="c68e" class="nd mc it bd md ni nj dn mh nk nl dp ml lh nm nn mn ll no np mp lp nq nr mr ns bi translated">它是如何工作的？</h2><p id="ce49" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><code class="fe nt nu nv mz b">NaN</code> <em class="nw">听起来很神秘，实际上是一个数值类型。</em> <code class="fe nt nu nv mz b">NaN</code>只是在数值型的限制内无法表示某个特定值时使用。从字面上看，它就像一个数字，而不是一个设计好的数字。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e326" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">4.使用数组访问属性</h1><p id="6a19" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我确信你已经用一个数字或一个字符串通过<code class="fe nt nu nv mz b">[]</code>操作符访问过属性。但是你知道你也可以传入一个数组吗？例如:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="cd7a" class="nd mc it mz b gy ne nf l ng nh">var data = { number: 1 };<br/>var array = ["number"];</span><span id="905b" class="nd mc it mz b gy nx nf l ng nh">data[array]; // -&gt; 1</span></pre><h2 id="2bcd" class="nd mc it bd md ni nj dn mh nk nl dp ml lh nm nn mn ll no np mp lp nq nr mr ns bi translated">它是如何工作的？</h2><p id="fa9f" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">这是因为，在幕后，<code class="fe nt nu nv mz b">[]</code>操作符对其参数运行<code class="fe nt nu nv mz b">toString</code>方法。在JavaScript中，将一个<em class="nw">单元素数组</em>转换成string会产生一个字符串形式的单个元素。</p><p id="2cce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="0333" class="nd mc it mz b gy ne nf l ng nh">["test"].toString() // -&gt; test</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4bcf" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">5.整理</h1><p id="e0d6" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">这个任务应该很简单:让我们使用<code class="fe nt nu nv mz b">sort()</code>方法对一组数字进行排序:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="3c90" class="nd mc it mz b gy ne nf l ng nh">[1, 5, 2, 10, 30].sort()</span></pre><p id="6990" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="b261" class="nd mc it mz b gy ne nf l ng nh">[1, 10, 2, 30, 5]</span></pre><p id="fd61" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是等一下JavaScript认为这些数字现在已经排序了吗？拿着我的啤酒。</p><h2 id="c49b" class="nd mc it bd md ni nj dn mh nk nl dp ml lh nm nn mn ll no np mp lp nq nr mr ns bi translated">它是如何工作的？</h2><p id="b42e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">这不是bug。使用默认的<code class="fe nt nu nv mz b">sort()</code>方法实际上将数组的元素转换成<em class="nw">字符串</em>，然后比较它们的<em class="nw"> UTF-16值</em>来对列表进行排序。因此，如果你真的想排序除字符串以外的任何东西，传递一个<em class="nw">比较函数</em>到<code class="fe nt nu nv mz b">sort</code>方法中。</p><p id="71ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，要按升序对数字进行排序:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="3e84" class="nd mc it mz b gy ne nf l ng nh">[1,5,2,10,30].sort((a, b) =&gt; a - b); // -&gt; [1, 2, 5, 10, 30]</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="1060" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">结论</h1><p id="7993" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">感谢阅读。我希望你已经有了一些惊人的WTF时刻，也许也学到了一些东西！</p><p id="1ac9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我很想加入你的LinkedIn网络。随意连接<a class="ae ny" href="https://www.linkedin.com/in/artturi-jalli-29619413a" rel="noopener ugc nofollow" target="_blank"> Artturi Jalli </a>。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="be62" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">资源</h1><div class="oo op gp gr oq or"><a href="https://github.com/denysdovhan/wtfjs" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">丹尼斯多夫汉/wtfjs</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">🤪有趣而棘手的JavaScript示例列表。通过创建帐户为denysdovhan/wtfjs的发展做出贡献…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">github.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://stackoverflow.com/questions/2801601/why-does-typeof-nan-return-number" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">为什么typeof NaN返回' number '？</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">对NaN来说，一个更好的名字，更准确地描述它的意思，更少混淆，将是一个数字上的例外。它…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">stackoverflow.com</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf ks or"/></div></div></a></div></div></div>    
</body>
</html>