<html>
<head>
<title>How to Use React in a Ruby on Rails App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Ruby on Rails应用中使用React</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-with-rails-2022-bd28e1fcd355?source=collection_archive---------0-----------------------#2022-06-07">https://betterprogramming.pub/react-with-rails-2022-bd28e1fcd355?source=collection_archive---------0-----------------------#2022-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4aa0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在铁轨上反应！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f494b4108ee90a258f7705f68b02bb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E7mRmBTZ4rHATs3SD0wKLg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Nicolas Postiglioni的照片:<a class="ae kv" href="https://www.pexels.com/photo/architectural-photography-of-building-421129/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/architectural-photography-of-building-421129/</a></p></figure><p id="1d50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5年前，我开始与React合作。由于团队中的rails经验，Rails被设置为后端和前端。在对Angular、React和Vue.js进行了简短的评测后，React在当时最让我们信服。</p><p id="44b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那时Rails中还没有官方的<code class="fe ls lt lu lv b">webpack</code>集成，<code class="fe ls lt lu lv b">webpacker</code>和其他开箱即用的可能性也不存在。最佳解决方案是来自<a class="ae kv" href="https://github.com/shakacode/react_on_rails" rel="noopener ugc nofollow" target="_blank"> Shakacode </a>的React on Rails。</p><p id="4784" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，React on rails仍然是将React和rails结合在一起的最重要的工具链，特别是因为据我所知，它仍然是与Rails相关的服务器端呈现的唯一方式。</p><p id="356d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Rails 7发布前不久，发生了很多事情，webpacker甚至退休了。创建新的rails应用程序时，rails命令现在提供了以下选项:<code class="fe ls lt lu lv b">importmap</code>(默认)、<code class="fe ls lt lu lv b">webpack</code>、<code class="fe ls lt lu lv b">esbuild</code>、<code class="fe ls lt lu lv b">rollup</code>。</p><p id="9a18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了这个帖子，我看了一下<code class="fe ls lt lu lv b">importmap</code>、<code class="fe ls lt lu lv b">webpack</code>、<code class="fe ls lt lu lv b">esbuild</code>，在rails上反应。</p><h1 id="ecf5" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">导入地图</h1><blockquote class="mo mp mq"><p id="4e4a" class="kw kx mr ky b kz la jr lb lc ld ju le ms lg lh li mt lk ll lm mu lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/WICG/import-maps" rel="noopener ugc nofollow" target="_blank"> <em class="iq">导入映射</em> </a> <em class="iq">允许您使用映射到版本/摘要文件的逻辑名称导入JavaScript模块——直接从浏览器导入。所以你可以</em> <a class="ae kv" href="https://world.hey.com/dhh/modern-web-apps-without-javascript-bundling-or-transpiling-a20f2755" rel="noopener ugc nofollow" target="_blank"> <em class="iq">使用为es模块(ESM)制作的JavaScript库构建现代的JavaScript应用程序，而不需要传输或捆绑</em> </a> <em class="iq">。</em></p><p id="5ac6" class="kw kx mr ky b kz la jr lb lc ld ju le ms lg lh li mt lk ll lm mu lo lp lq lr ij bi translated">这让你不再需要Webpack、Yarn、npm或JavaScript工具链的任何其他部分。您所需要的只是Rails   <em class="iq">中已经包含的</em> <a class="ae kv" href="https://github.com/rails/importmap-rails" rel="noopener ugc nofollow" target="_blank"> <em class="iq">资产管道。</em></a></p></blockquote><p id="01a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有编译、没有构建、没有复杂设置的JavaScript，听起来像一个梦！在我看来，难怪Rails 7背后的团队决定支持<code class="fe ls lt lu lv b">importmap</code>，并将其定义为Rails应用的标准。</p><h2 id="b809" class="mv lx iq bd ly mw mx dn mc my mz dp mg lf na nb mi lj nc nd mk ln ne nf mm ng bi translated">装置</h2><ol class=""><li id="f2ab" class="nh ni iq ky b kz nj lc nk lf nl lj nm ln nn lr no np nq nr bi translated">使用<code class="fe ls lt lu lv b">gem 'importmap-rails'</code>将<code class="fe ls lt lu lv b">importmap-rails</code>添加到您的gem文件中</li><li id="e33d" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">跑<code class="fe ls lt lu lv b">./bin/bundle install</code></li><li id="a73a" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">运行<code class="fe ls lt lu lv b">./bin/rails importmap:install</code></li></ol><p id="20e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要添加javascript库，只需运行以下命令:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="5b19" class="mv lx iq lv b gy ob oc l od oe">./bin/importmap pin react@17.0.1</span></pre><p id="b9d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说，下面的<code class="fe ls lt lu lv b">config/importmap.rb</code>内容被证明是最适合使用react的，包括用于开发和生产环境的不同React库版本，以支持React的所有开发模式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="03f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本上，它工作得很好，你甚至不需要本地node.js安装！只要你不想使用像<code class="fe ls lt lu lv b">eslint</code>这样的基于Node.js的开发工具来lint你的JavaScript文件，jest to test等等。从我的角度来看，这在当今React应用程序的开发中实际上是必不可少的。</p><p id="3d4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最大的问题是没有编译步骤，你不能使用JSX，因为JSX需要被编译成javascript。没有浏览器支持JSX开箱即用，可能永远也不会。</p><p id="3f95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">DHH <a class="ae kv" href="https://www.youtube.com/watch?v=k73LKxim6tw" rel="noopener ugc nofollow" target="_blank">推荐</a>图书馆<code class="fe ls lt lu lv b"><a class="ae kv" href="https://github.com/developit/htm" rel="noopener ugc nofollow" target="_blank">htm</a></code>，稍微改善了一下情况。</p><p id="b4d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使问题和不同的可能性更容易理解，React组件的一些例子一次有JSX，没有JSX，一次有<code class="fe ls lt lu lv b">htm</code>:</p><p id="f2e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使组分与JSX反应:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="f05c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不含JSX的反应组分:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="0a28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">htm</code>对组件做出反应:</p><p id="3775" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://gist.github.com/uebelack/ce6a0487df2278ecdd7bcdeea1449686" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/uebe lack/ce 6a 0487 df 2278 ecdd 7 bcdeea 1449686</a></p><p id="f707" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">importmap</code>的完整示例、一个使用<code class="fe ls lt lu lv b">createElement</code>的示例和一个使用<code class="fe ls lt lu lv b">htm</code>的示例如下:</p><div class="oh oi gp gr oj ok"><a href="https://github.com/uebelack/rails-todo-playground/tree/react-importmap" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">GitHub-uebe lack/rails-todo-playground at react-import map</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">我的小rails playground rails-todo-playground只是一个小游戏场，我用它来测试新的rails版本、功能…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">github.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy kp ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://github.com/uebelack/rails-todo-playground/tree/react-importmap-htm" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">GitHub-uebe lack/rails-todo-playground at react-import map-htm</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">我的小rails playground rails-todo-playground只是一个小游戏场，我用它来测试新的rails版本、功能…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">github.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy kp ok"/></div></div></a></div><p id="2933" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再给你一个提示，当然这一切都不适合IE:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/28affd812bdca0bfb8a43ddf5d8b48ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6wzUowWEnACWeZEwzH0GLg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://caniuse.com/es6-module" rel="noopener ugc nofollow" target="_blank">https://caniuse.com/es6-module</a></p></figure><h1 id="ad0a" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">网络包</h1><blockquote class="mo mp mq"><p id="ee86" class="kw kx mr ky b kz la jr lb lc ld ju le ms lg lh li mt lk ll lm mu lo lp lq lr ij bi translated">webpack的核心是现代JavaScript应用程序的静态模块捆绑器。当webpack处理您的应用程序时，它从一个或多个入口点内部构建一个 <a class="ae kv" href="https://webpack.js.org/concepts/dependency-graph/" rel="noopener ugc nofollow" target="_blank"> <em class="iq">依赖图</em> </a> <em class="iq">，然后将您的项目需要的每个模块组合成一个或多个包，这些包是静态资产，为您的内容</em><a class="ae kv" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"><em class="iq"/></a><em class="iq">提供服务。</em></p></blockquote><p id="4ec5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Webpack仍然是最广泛使用的捆绑javascript应用程序的工具。加载器和插件可以用来处理，传输，最小化等。各种资源。</p><p id="d816" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以通过<code class="fe ls lt lu lv b"><a class="ae kv" href="https://github.com/rails/jsbundling-rails" rel="noopener ugc nofollow" target="_blank">jsbundling-rails</a></code>集成到Rails应用程序的构建管道中。</p><h2 id="e034" class="mv lx iq bd ly mw mx dn mc my mz dp mg lf na nb mi lj nc nd mk ln ne nf mm ng bi translated">装置</h2><p id="ebf1" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf pb lh li lj pc ll lm ln pd lp lq lr ij bi translated">如果您创建了一个新的rails应用程序，您可以使用以下命令创建该应用程序:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="b6a1" class="mv lx iq lv b gy ob oc l od oe">rails new -j webpack my_new_rails_app</span></pre><p id="9f6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要将其添加到现有的rails应用程序中:</p><ol class=""><li id="1874" class="nh ni iq ky b kz la lc ld lf pe lj pf ln pg lr no np nq nr bi translated">用<code class="fe ls lt lu lv b">gem 'jsbundling-rails'</code>将<code class="fe ls lt lu lv b">jsbundling-rails</code>添加到你的gem文件中</li><li id="fbab" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">运行<code class="fe ls lt lu lv b">./bin/bundle install</code></li><li id="ca70" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">跑<code class="fe ls lt lu lv b">./bin/rails javascript:install:webpack</code></li><li id="3d4f" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">安装所需的节点依赖项</li></ol><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="ca16" class="mv lx iq lv b gy ob oc l od oe">yarn add react react-dom<br/>yarn add @babel/core @babel/preset-env @babel/preset-react babel-loader --dev</span></pre><p id="839a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在项目的根文件夹中创建一个<code class="fe ls lt lu lv b">babel.config.js</code> <strong class="ky ir"> </strong>，包含:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="9019" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更新<code class="fe ls lt lu lv b">webpack.config.js</code> <strong class="ky ir"> </strong>以包含<code class="fe ls lt lu lv b">babel</code>加载器:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="707e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成一个控制器和视图来服务您的新react应用程序:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="4f34" class="mv lx iq lv b gy ob oc l od oe">rails g controller Root index</span></pre><p id="a0cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用以下内容覆盖<code class="fe ls lt lu lv b">app/views/root/index.html.erb</code>的内容:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="1d6b" class="mv lx iq lv b gy ob oc l od oe">&lt;div id="root"&gt;</span></pre><p id="512a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe ls lt lu lv b">config/routes.rb</code> <strong class="ky ir"> </strong>中的根更改为您的新视图:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="7dc1" class="mv lx iq lv b gy ob oc l od oe">Rails.application.routes.draw do<br/>  root 'root#index'<br/>end</span></pre><p id="a68a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将您的React应用程序添加到<code class="fe ls lt lu lv b">app/javascript/application.js</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="90d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，从以下内容开始您的应用程序:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="ef16" class="mv lx iq lv b gy ob oc l od oe">./bin/dev</span></pre><p id="2ccb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在此找到使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://github.com/hackercowboy/rails-todo-playground/tree/react-webpack" rel="noopener ugc nofollow" target="_blank">webpack</a></code>的完整工作示例</p><h1 id="8643" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">Esbuild</h1><blockquote class="mo mp mq"><p id="b286" class="kw kx mr ky b kz la jr lb lc ld ju le ms lg lh li mt lk ll lm mu lo lp lq lr ij bi translated">我们当前的web构建工具比它们应该慢10-100倍。esbuild bundler项目的主要目标是开创一个构建工具性能的新时代，并在此过程中创建一个易于使用的现代bundler。<br/><a class="ae kv" href="https://esbuild.github.io/" rel="noopener ugc nofollow" target="_blank">https://esbuild.github.io/</a></p></blockquote><p id="8823" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript世界中构建工具天空中的新星是<code class="fe ls lt lu lv b">esbuild</code>，据说比其他任何东西都要快得多…我们会看到…</p><p id="3d31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以通过<code class="fe ls lt lu lv b">jsbundling-rails</code>(<a class="ae kv" href="https://github.com/rails/jsbundling-rails" rel="noopener ugc nofollow" target="_blank">https://github.com/rails/jsbundling-rails</a>)集成到Rails应用程序的构建管道中。</p><h2 id="fd2b" class="mv lx iq bd ly mw mx dn mc my mz dp mg lf na nb mi lj nc nd mk ln ne nf mm ng bi translated">装置</h2><p id="f457" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf pb lh li lj pc ll lm ln pd lp lq lr ij bi translated">如果您创建了一个新的rails应用程序，您可以使用以下命令创建该应用程序:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="74f3" class="mv lx iq lv b gy ob oc l od oe">rails new -j esbuild my_new_rails_app</span></pre><p id="0eaa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要将其添加到现有的rails应用程序中:</p><ol class=""><li id="f966" class="nh ni iq ky b kz la lc ld lf pe lj pf ln pg lr no np nq nr bi translated">用<code class="fe ls lt lu lv b">gem 'jsbundling-rails'</code>将<code class="fe ls lt lu lv b">jsbundling-rails</code>添加到你的gem文件中</li><li id="7710" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">运行<code class="fe ls lt lu lv b">./bin/bundle install</code></li><li id="7129" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">跑<code class="fe ls lt lu lv b">./bin/rails javascript:install:esbuild</code></li><li id="e383" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">安装所需的节点依赖项</li></ol><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="8568" class="mv lx iq lv b gy ob oc l od oe">yarn add react react-dom<br/>yarn add esbuild esbuild-loader --dev</span></pre><p id="b297" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成一个控制器和视图来服务您的新react应用程序:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="9751" class="mv lx iq lv b gy ob oc l od oe">rails g controller Root index</span></pre><p id="0e45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用以下内容覆盖<code class="fe ls lt lu lv b">app/views/root/index.html.erb</code>的内容:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="a4ee" class="mv lx iq lv b gy ob oc l od oe">&lt;div id="root"&gt;</span></pre><p id="3152" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe ls lt lu lv b">config/routes.rb</code> <strong class="ky ir"> </strong>中的根更改为您的新视图:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="aeb6" class="mv lx iq lv b gy ob oc l od oe">Rails.application.routes.draw do<br/>  root 'root#index'<br/>end</span></pre><p id="7e0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将您的react应用程序添加到<code class="fe ls lt lu lv b">app/javascript/application.js</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="147e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe ls lt lu lv b">--loader:.js=jsx</code> <strong class="ky ir"> </strong>添加到您的<code class="fe ls lt lu lv b">package.json</code>中的构建脚本:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="3f38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，从以下内容开始您的应用程序:</p><pre class="kg kh ki kj gt nx lv ny nz aw oa bi"><span id="bd45" class="mv lx iq lv b gy ob oc l od oe">./bin/dev</span></pre><p id="44c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">esbuild</code>的完整工作示例您可以在这里找到<a class="ae kv" href="https://github.com/uebelack/rails-todo-playground/tree/react-esbuild" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="c89f" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">在轨道上反应</h1><p id="d9e9" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf pb lh li lj pc ll lm ln pd lp lq lr ij bi translated">React on Rails集成了Rails和脸书的React前端框架</p><p id="1399" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">反应在铁轨上的是<a class="ae kv" href="https://www.shakacode.com/react-on-rails/docs/getting-started/" rel="noopener ugc nofollow" target="_blank">电流</a>。</p><p id="599f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，React on rails是React与Ruby和rails最全面的集成。相对于其他解决方案的主要优势:服务器端渲染和热代码替换。</p><h2 id="2705" class="mv lx iq bd ly mw mx dn mc my mz dp mg lf na nb mi lj nc nd mk ln ne nf mm ng bi translated">装置</h2><p id="1204" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf pb lh li lj pc ll lm ln pd lp lq lr ij bi translated">参见<a class="ae kv" href="https://www.shakacode.com/react-on-rails/docs/getting-started/" rel="noopener ugc nofollow" target="_blank">https://www . shaka code . com/react-on-rails/docs/getting-started/</a></p><p id="d5ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之:</p><ol class=""><li id="1871" class="nh ni iq ky b kz la lc ld lf pe lj pf ln pg lr no np nq nr bi translated">将<code class="fe ls lt lu lv b">react_on_rails</code>、<code class="fe ls lt lu lv b">shakapacker</code>和<code class="fe ls lt lu lv b">foreman</code>添加到您的gem文件中，并运行<code class="fe ls lt lu lv b">bundle install</code></li><li id="2d9a" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">运行<code class="fe ls lt lu lv b">./bin/rails webpacker:install</code></li><li id="88c8" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">运行<code class="fe ls lt lu lv b">rails generate react_on_rails:install --ignore-warnings</code></li><li id="1129" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">使用<code class="fe ls lt lu lv b">bundle exec foreman start -f Procfile.dev</code>启动您的应用程序</li><li id="35e1" class="nh ni iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">在<a class="ae kv" href="http://localhost:3000/hello_world" rel="noopener ugc nofollow" target="_blank">打开浏览器http://localhost:3000/hello _ world</a></li></ol><p id="d71d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在rails上使用react的完整示例可以在这里找到<a class="ae kv" href="https://github.com/uebelack/rails-todo-playground/tree/react-on-rails" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="e050" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="4621" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf pb lh li lj pc ll lm ln pd lp lq lr ij bi translated">如果你不是一个JavaScript爱好者，并且作为一个rails狂热者，不想在你的开发机器上安装node，只想用react实现一个简单的小前端，而不需要测试或编码林挺——那么通过<code class="fe ls lt lu lv b">importmaps</code>集成是正确的选择。</p><p id="da37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想拥有最快的现代构建管道，并且没有任何特殊要求，你应该尝试<code class="fe ls lt lu lv b">esbuild</code>。</p><p id="28f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有可以用<code class="fe ls lt lu lv b">webpack</code>插件实现的特殊需求，这在<code class="fe ls lt lu lv b">esbuild</code>中还没有解决方案，如果你在开发过程中不需要服务器端渲染或热代码替换，那么保持简单，使用<code class="fe ls lt lu lv b">webpack</code>的集成rails解决方案。</p><p id="4f9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，如果您需要服务器端呈现，您别无选择，只能在Rails上使用React。</p></div></div>    
</body>
</html>