<html>
<head>
<title>How to Hide Data Within an Image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在图像中隐藏数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/hide-data-within-an-image-507f571aab89?source=collection_archive---------2-----------------------#2020-03-15">https://betterprogramming.pub/hide-data-within-an-image-507f571aab89?source=collection_archive---------2-----------------------#2020-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0baf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">有时候，分享敏感信息的最佳方式是藏在显眼的地方</h2></div><p id="8d0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是隐写术的目的。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/d1c257e34f3863ed17677989bb627692.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*5G_I1E6KeZ6XnC16"/></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">我的GitHub个人资料图片，里面隐藏了加密数据</p></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="35cb" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">什么是隐写术？</h1><p id="330d" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated"><em class="mu">隐写术</em>是一种将信息嵌入和隐藏在媒体中的艺术和科学。它与密码学相关，也一样古老。例如，<a class="ae mv" href="https://www.jstor.org/stable/3101474?seq=1" rel="noopener ugc nofollow" target="_blank">古希腊人用它来隐藏关于军队调动的信息</a>，将信息纹在某人的头上，然后让此人长出头发。</p><p id="51b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">隐写术一词来自新拉丁语<em class="mu"> steganographia </em>，它结合了希腊语<em class="mu"> steganós、</em>意为“覆盖或隐藏”，以及<em class="mu"> -graphia </em>意为“书写”</p><p id="fb98" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在计算机科学的上下文中，介质是普通的文件，通常是图像。秘密数据随后可以在目的地提取。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="7f70" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">为什么要隐写？</h1><p id="1e0e" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">与传统加密不同，在传统加密中，信息被隐藏是显而易见的，隐写术的目的是将信息隐藏在众目睽睽之下，没有人会注意到。</p><p id="b243" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">隐写术的用途和通信本身的用途一样多种多样。在发送加密信息可能会引起怀疑的情况下，例如在言论自由受到压制的国家，这种方法会很有用。当图像或音频文件被盗时，它也经常被用作数字水印。还有，为了好玩。</p><p id="cc64" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">既然你的电脑上可能有大量的图像，为什么不用它们来隐藏数据而不影响图像和引起怀疑呢？</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4b55" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">隐写术是如何实现的？</h1><p id="ae73" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">隐写术只需要一个<em class="mu"> covertext </em>，它是隐藏数据的媒介，一个由数据组成的<em class="mu">消息</em>，一个决定如何隐藏和检索数据的<em class="mu">算法</em>，以及一个可选的<em class="mu">密钥</em>，它将用于随机化数据的放置，甚至可能对数据进行加密。</p><p id="2597" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有几种不同的技术可以隐藏普通文件中的数据。最常讨论的隐写术是嵌入图像。这也是研究最多的一种形式。虽然算法有很多种，但最常见的三种是<a class="ae mv" href="https://ieeexplore.ieee.org/abstract/document/4221886?section=abstract" rel="noopener ugc nofollow" target="_blank"> LSB </a>、<a class="ae mv" href="https://en.wikipedia.org/wiki/Discrete_cosine_transform" rel="noopener ugc nofollow" target="_blank"> DCT </a>和<a class="ae mv" href="https://ieeexplore.ieee.org/document/8280584" rel="noopener ugc nofollow" target="_blank">追加类型</a>。</p><p id="ca68" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">LSB代表<em class="mu">最低有效位，</em>使用最广泛。这种技术改变一个字节中的最后几个比特来编码一个消息，这在像图像这样的东西中特别有用，其中每个像素的红色、绿色和蓝色值由八个比特(一个字节)表示，范围从十进制的0到255或二进制的00000000到1111111。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/50d545fb89b9185a5edd874ae8670201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JTnkzopCLv2cRLuY.jpg"/></div></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">8位数字中突出显示的LSB示例。致谢:<a class="ae mv" href="https://en.wikipedia.org/wiki/Bit_numbering#mediaviewer/File:Least_significant_bit.svg" rel="noopener ugc nofollow" target="_blank">维基共享资源</a>。</p></figure><p id="7b82" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将完全红色像素中的后两位从111111111更改为11111101只会将红色值从255更改为253，这对肉眼来说，会产生几乎察觉不到的颜色变化，但仍允许我们对图片内部的数据进行编码。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nb"><img src="../Images/5228e5a7f2e5142ca8ad7ede79077662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XWlQVMlAQra2KHSB.jpg"/></div></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">该图以彩色和二进制值显示了两个四像素图像。每个二进制块代表相应像素的值。学分:<a class="ae mv" href="https://technical-foundation.blogspot.com/2017/11/steganography-hide-data-in-images-with.html" rel="noopener ugc nofollow" target="_blank">技术基础</a></p></figure><p id="0a4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">LSB技术适用于媒体文件，稍微改变字节值只会产生细微的不可察觉的变化，但像ASCII文本这样的东西就不太好了，其中一个不合适的位就会完全改变字符。</p><p id="0537" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，因为它对颜色的数量有影响，即使非常小，用隐藏数据中的一个位替换这个位对图片的影响也是最小的。替换的位越多，可用的位<em class="mu">深度</em>就越多，图像越大，照片中可以存储的数据就越多。然而，被替换的位越多，统计检查<a class="ae mv" href="https://books.google.com.br/books?id=j4ujDgAAQBAJ&amp;lpg=PA230&amp;ots=aK84tNwEsn&amp;dq=statistical%20inspection%20and%20a%20visual%20inspection%2Bsteganography%20LSB%20discover&amp;pg=PA230#v=onepage&amp;q&amp;f=false" rel="noopener ugc nofollow" target="_blank">和目视检查</a>出现的变化就越明显。</p><p id="19c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">出于这个原因，有许多其他隐写术技术，每一种都有自己的优点和缺点。</p><p id="18a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种不太容易检测到的技术叫做<a class="ae mv" href="https://users.cs.cf.ac.uk/Dave.Marshall/Multimedia/node231.html" rel="noopener ugc nofollow" target="_blank">离散余弦变换(DCT)系数技术</a>，它稍微改变了用于重建JPEG图像的余弦波的权重(系数)。它的工作原理是计算图像的频率，然后替换其中的一部分。DCT算法处理照片的方式更加微妙，因此更难被发现。请注意，更大的转换(由于更多的嵌入数据)将使操作更加明显。</p><p id="9890" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些算法中最糟糕的是<a class="ae mv" href="https://www.researchgate.net/project/File-Encryption-and-Hiding-using-AES-and-Append-Insertion-Steganography" rel="noopener ugc nofollow" target="_blank">追加算法</a>。它不是通过处理图片来隐藏照片中的数据，而是将数据作为填充附加到文件的末尾。以这种方式，数据是隐藏的，决不会被任何照片显示程序读取。这些算法的唯一优点是算法编程简单，并且它们不受图片视觉检查的影响。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="3b0a" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">有效使用隐写术</h1><p id="c5a4" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">默认情况下，隐写术是一种隐蔽的安全措施，因为它只隐藏数据，而不加密。在嵌入数据之前对其进行加密增加了一层额外的安全性。</p><p id="3c43" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是<a class="ae mv" href="https://github.com/computationalcore/cryptosteganography" rel="noopener ugc nofollow" target="_blank">隐写术</a>的主要目标，这是一个Python隐写术模块，用于在图像中存储消息——或其他受加密保护的文件。</p><p id="1eb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该模块通过数据加密增强了隐写术的安全性。隐藏的数据使用<a class="ae mv" href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" rel="noopener ugc nofollow" target="_blank"> AES </a> -256加密进行加密，这是一种用于对称密钥加密的流行算法。AES已被美国政府采用，现在在全球范围内使用。</p><p id="2ead" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">AES-256的密钥长度为256位，其暴力破解需要比128位密钥多2128倍的计算能力。50台每秒能检查10亿(10^18) AES密钥的超级计算机(如果能制造出这样的设备的话)理论上需要3×1051年才能用完256位密钥空间。</p><p id="4ac8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下表显示了可能的键组合随着键的大小呈指数增长。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nc"><img src="../Images/1a2b06aa4b9c986f405a58154eef33dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*de6gFM-H-tGecpUlvUOvWA.png"/></div></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">通过强力攻击破解的密钥大小和相应的可能组合。来源:<a class="ae mv" href="https://www.eetimes.com/document.asp?doc_id=1279619#" rel="noopener ugc nofollow" target="_blank"> EE次</a>。</p></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="845c" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">在图像中嵌入隐藏数据</h1><p id="594b" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">使用<a class="ae mv" href="https://github.com/computationalcore/cryptosteganography" rel="noopener ugc nofollow" target="_blank">隐写术</a>非常容易。该模块可以用作Python程序中的库，也可以用作shell命令行程序。</p><p id="d295" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您需要安装<a class="ae mv" href="https://pip.pypa.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> pip </a>，Python包安装程序，这可以按照这些<a class="ae mv" href="https://www.makeuseof.com/tag/install-pip-for-python/" rel="noopener ugc nofollow" target="_blank">指令</a>来完成。请注意，在大多数现代Linux系统上，Python和pip是默认随操作系统一起安装的。</p><p id="a84d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">之后，运行下面的命令从终端安装<a class="ae mv" href="https://github.com/computationalcore/cryptosteganography" rel="noopener ugc nofollow" target="_blank">隐写术</a>:</p><pre class="lf lg lh li gt nd ne nf ng aw nh bi"><span id="d5ee" class="ni ly it ne b gy nj nk l nl nm">pip3 install cryptosteganography</span></pre><p id="229a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦安装完毕，您可以通过传递<code class="fe nn no np ne b">-h</code>或<code class="fe nn no np ne b">— help</code>参数来检查如何使用它。</p><pre class="lf lg lh li gt nd ne nf ng aw nh bi"><span id="da63" class="ni ly it ne b gy nj nk l nl nm">$ cryptosteganography -h<br/>usage: cryptosteganography [-h] {save,retrieve} ...<br/><br/>A python steganography script that save/retrieve a text/file (AES 256<br/>encrypted) inside an image.<br/><br/>positional arguments:<br/>  {save,retrieve}  sub-command help<br/>    save           save help<br/>    retrieve       retrieve help<br/><br/>optional arguments:<br/>  -h, --help       show this help message and exitThe arguments are broken down as follows:</span></pre><p id="d91a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，为了在图像中嵌入数据，请键入以下命令。</p><pre class="lf lg lh li gt nd ne nf ng aw nh bi"><span id="78fb" class="ni ly it ne b gy nj nk l nl nm">$ cryptosteganography save -i vin-and-orion.png -m "My secret message..." -o output.png<br/>Enter the key password:</span></pre><p id="e13a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输入用于生成加密密钥的密码后，就会生成隐写图像。</p><p id="4b1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要从隐写图像中检索隐藏数据，您可以运行…</p><pre class="lf lg lh li gt nd ne nf ng aw nh bi"><span id="1e6c" class="ni ly it ne b gy nj nk l nl nm">$ cryptosteganography retrieve -i output.png<br/>Enter the key password:<br/>My secret message...</span></pre><p id="ace5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">…并输入相同的密码。</p><p id="1f67" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该库还允许您在图像中存储其他文件，但文件大小必须小于原始图像。您可以查看更多CLI选项，以及如何在另一个Python程序<a class="ae mv" href="https://github.com/computationalcore/cryptosteganography" rel="noopener ugc nofollow" target="_blank">中将其用作库。</a></p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nq"><img src="../Images/cc2ec50e40c97c2fe982043c89d572ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rljQGBe5b_XTgMjJYltEvA.png"/></div></div><p class="lm ln gj gh gi lo lp bd b be z dk translated">原始图像和隐写图像的并排比较</p></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="2b2d" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">好奇的口气</h1><p id="1982" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">几年前，当我发布这个Python库时，我向我的同事和研究小组提出了一个小难题。最初的线索分散在<a class="ae mv" href="https://github.com/computationalcore/cryptosteganography/blob/master/README.rst" rel="noopener ugc nofollow" target="_blank">库的源代码库中、</a>我在GitHub上的简介的<a class="ae mv" href="https://avatars3.githubusercontent.com/u/4824157" rel="noopener ugc nofollow" target="_blank">图片中、</a>以及<a class="ae mv" href="https://computationalcore.github.io/vinbusquet/" rel="noopener ugc nofollow" target="_blank">我的个人网站</a>上。</p><p id="adcf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个谜仍未解开。</p><p id="49d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注</strong>:GitHub等服务通常会在用户上传后对原始图像进行压缩和/或转码，这可能会使隐藏信息被破坏且不可恢复。在这个特别的例子中，我发现如果你上传一张图片，并且图片的大小和编码标准与GitHub对原始图片使用的完全相同(图片没有任何URL查询参数，如<code class="fe nn no np ne b">s</code>、<code class="fe nn no np ne b">u</code>和<code class="fe nn no np ne b">v</code>)，系统会保存图片，不做任何修改。这就是为什么拼图中的图像仍然有加密的信息。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="d789" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">参考</h1><ul class=""><li id="6337" class="nr ns it kk b kl mp ko mq kr nt kv nu kz nv ld nw nx ny nz bi translated"><a class="ae mv" href="https://pypi.org/project/cryptosteganography/" rel="noopener ugc nofollow" target="_blank">模块URL </a></li><li id="0433" class="nr ns it kk b kl oa ko ob kr oc kv od kz oe ld nw nx ny nz bi translated"><a class="ae mv" href="https://github.com/computationalcore/cryptosteganography" rel="noopener ugc nofollow" target="_blank">源代码</a></li></ul></div></div>    
</body>
</html>