<html>
<head>
<title>Did You Know Float(“NaN”) and Float(“inf”) Exist in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你知道Python中存在Float(“NaN”)和Float(“INF”)吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/did-you-know-float-nan-and-float-inf-exist-in-python-5a3b1054f4ce?source=collection_archive---------10-----------------------#2022-01-28">https://betterprogramming.pub/did-you-know-float-nan-and-float-inf-exist-in-python-5a3b1054f4ce?source=collection_archive---------10-----------------------#2022-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bfd7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">南！=南。虽然inf == inf。但是为什么呢？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/240850586a2382b00e6821e046efc8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bhc6LwuvYl-Mu31q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@theshubhamdhage?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Shubham Dhage </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="1a3a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">NaN和Inf是什么？</h2><p id="398a" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">对于不熟悉<code class="fe mo mp mq mr b">inf</code>和<code class="fe mo mp mq mr b">NaN</code>符号的人来说，它们分别代表<code class="fe mo mp mq mr b">infinity</code>和<code class="fe mo mp mq mr b">Not-a-Number</code>。</p><p id="1129" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">尽管无穷大可以被认为是一个非常非常大的数，但它没有尽头。在Python中我们可以将负无穷大定义为<code class="fe mo mp mq mr b">-inf</code>，正无穷大定义为<code class="fe mo mp mq mr b">inf</code>。</p><p id="bfac" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">数学上，实数中的<code class="fe mo mp mq mr b">sqrt(-1)</code>或<code class="fe mo mp mq mr b">0/0</code>(零过零)给出一个未定义的数，可以定义为<code class="fe mo mp mq mr b">Nan</code>。在数据科学中，<code class="fe mo mp mq mr b">Nan</code>用于表示数据集中缺失的值。所以<code class="fe mo mp mq mr b">Nan</code>基本上是一个占位符，用来表示未定义或缺失的值。</p><p id="8d43" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">您可以使用<code class="fe mo mp mq mr b">float</code>类型创建<code class="fe mo mp mq mr b">Nan</code>值。因为它不是Python中定义的关键字，所以必须以字符串格式(在引号内)将其传递给<code class="fe mo mp mq mr b">float</code>。</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="c0f9" class="kz la it mr b gy nb nc l nd ne">float("Nan")</span></pre><p id="1ceb" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">这里值得一提的是<code class="fe mo mp mq mr b">"Nan"</code>不区分大小写。因此您可以使用下面的任何格式来创建一个<code class="fe mo mp mq mr b">"Nan"</code>值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7416" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">都有效。如果您将它们中的任何一个赋值给一个变量并打印该值，您将在控制台上看到相同的内容:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="1590" class="kz la it mr b gy nb nc l nd ne">nan</span></pre><p id="9283" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">现在来说说<code class="fe mo mp mq mr b">inf</code>。您可以像定义<code class="fe mo mp mq mr b">Nan</code>值一样定义<code class="fe mo mp mq mr b">inf</code>值。<code class="fe mo mp mq mr b">Inf</code>也不区分大小写。您可以选择其中任何一个来创建<code class="fe mo mp mq mr b">inf</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="3a37" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">但是它们会在控制台上打印相同的值:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="5ecb" class="kz la it mr b gy nb nc l nd ne">inf</span></pre><p id="8fcb" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated"><strong class="lx iu">注意:</strong> <code class="fe mo mp mq mr b">inf</code>和<code class="fe mo mp mq mr b">Nan</code>只能由<code class="fe mo mp mq mr b">float</code>类型定义。没有<code class="fe mo mp mq mr b">float</code>您无法创建它们或将它们转换成另一种类型。</p><p id="af4a" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated"><strong class="lx iu">例如:</strong></p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="ad9c" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; int("inf")</span></pre><p id="6b95" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated"><strong class="lx iu">输出:</strong></p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="8697" class="kz la it mr b gy nb nc l nd ne">Traceback (most recent call last):<br/>  File "&lt;input&gt;", line 1, in &lt;module&gt;<br/>ValueError: invalid literal for int() with base 10: 'inf'</span></pre><p id="4eb6" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated"><strong class="lx iu">例2: </strong></p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="7080" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; int(float("nan"))</span></pre><p id="141f" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated"><strong class="lx iu">输出:</strong></p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="1c92" class="kz la it mr b gy nb nc l nd ne">Traceback (most recent call last):<br/>  File "&lt;input&gt;", line 1, in &lt;module&gt;<br/>ValueError: cannot convert float NaN to integer</span></pre><p id="6c88" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">现在，让我们来看几个使用<code class="fe mo mp mq mr b">Nan</code>和<code class="fe mo mp mq mr b">inf</code>的例子。</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="586a" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; inf = float("inf")</span><span id="f473" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; 1 + inf<br/>inf</span><span id="bc71" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; inf * 2<br/>inf</span><span id="b957" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; 0 - inf<br/>-inf</span><span id="b1cf" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; inf * inf<br/>inf</span><span id="7e57" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; inf + inf<br/>nan</span><span id="ae83" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; inf - inf<br/>nan</span><span id="a66b" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; inf / inf<br/>nan</span></pre><p id="7f23" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">第一个给出了无穷大，这是有意义的，因为无穷大超出了想象，但得到结果背后的想法并不太困难。最后几个是<code class="fe mo mp mq mr b">nan</code>。嗯…在这篇文章中解释它们并不容易。如果你有好的解释，请与我们分享并评论它们！我推荐你在维基百科上阅读。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h2 id="7bba" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">Inf比较</strong></h2><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="d148" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; float("inf") == float("inf")<br/>True</span></pre><p id="9fc0" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">当我们提到<code class="fe mo mp mq mr b">inf</code>时，我们知道我们在谈论一个非常非常大的数，这个数是无穷无尽的，所以我们接受它在Python中的唯一性。否则，你声称有许多无限。</p><p id="768d" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">如果有很多，那你可以对比一下。这意味着它们中至少有一个有终点，所以它是有限的。正如你所猜测的，这是一个矛盾。正因如此，自然界和Python中都只存在负无限和正无限。</p><p id="9a7e" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">你可以将<code class="fe mo mp mq mr b">inf</code>与任何数字相比较。举个例子，</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="7a1c" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; import sys</span><span id="e2e2" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; sys.float_info.max &lt; float("inf")<br/>True</span><span id="1950" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; float("inf") &gt; float("-inf")<br/>True</span></pre></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h2 id="1853" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">NaN的比较</h2><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="2ef8" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; float("nan") == float("nan")<br/>False</span></pre><p id="4871" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">顾名思义,<code class="fe mo mp mq mr b">Nan</code>是<strong class="lx iu">而不是数字</strong>,所以把它和其他任何东西或者它本身进行比较是没有意义的。你不能说一个未定义的数大于一个未定义的数。</p><p id="6aae" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">或者说，一个未定义的数等于一个未定义的数。这毫无意义。你不能说<code class="fe mo mp mq mr b">sqrt(-1)</code>等于<code class="fe mo mp mq mr b">0/0</code>(两者都是<code class="fe mo mp mq mr b">Nan</code>)。</p><p id="c8c6" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">当我们提到<code class="fe mo mp mq mr b">Nan</code>时，我们不知道我们在谈论哪个<code class="fe mo mp mq mr b">Nan</code>。有太多的<code class="fe mo mp mq mr b">Nan</code>值，所以它们没有唯一的值。可以是<code class="fe mo mp mq mr b">sqrt(-2)</code>或<code class="fe mo mp mq mr b">sqrt(-3)</code>甚至是<code class="fe mo mp mq mr b">inf/inf</code>。</p><p id="3a44" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">请记住，每次我们写<code class="fe mo mp mq mr b">float("nan")</code>时，它都会立即改变它的值。永远不会等于另一个<code class="fe mo mp mq mr b">float("nan")</code>。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h2 id="be63" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">如何检查一个数是inf还是NaN？</strong></h2><p id="43a0" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">如果你想检查一个变量是<code class="fe mo mp mq mr b">Nan</code>还是<code class="fe mo mp mq mr b">inf</code>，在标准的<a class="ae ky" href="https://docs.python.org/3/library/math.html" rel="noopener ugc nofollow" target="_blank">数学模块</a>中有两个函数正好达到这个目的。</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="fe7e" class="kz la it mr b gy nb nc l nd ne">math.isnan()</span></pre><p id="79ce" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">和</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="9e77" class="kz la it mr b gy nb nc l nd ne">math.isinf()</span></pre><p id="522c" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">就这些吗？当然不是。也可以使用<a class="ae ky" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>或<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> pandas </a>库进行检查。</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="f1aa" class="kz la it mr b gy nb nc l nd ne">&gt;&gt;&gt; nan = float("nan")<br/>&gt;&gt;&gt; inf = float("inf")</span><span id="2141" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; math.isnan(nan)<br/>True<br/>&gt;&gt;&gt; math.isinf(inf)<br/>True</span><span id="37c6" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; import numpy as np<br/>&gt;&gt;&gt; np.isnan(nan)<br/>True<br/>&gt;&gt;&gt; np.isinf(inf)<br/>True</span><span id="326e" class="kz la it mr b gy nh nc l nd ne">&gt;&gt;&gt; import pandas as pd<br/>&gt;&gt;&gt; pd.isna(nan)<br/>True</span></pre></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="eec7" class="np la it bd lb nq nr ns le nt nu nv lh jz nw ka ll kc nx kd lp kf ny kg lt nz bi translated">结论</h1><p id="20f4" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">我们不能用常规的比较操作符(<code class="fe mo mp mq mr b">==</code>或<code class="fe mo mp mq mr b">!=</code>)进行比较来检查<code class="fe mo mp mq mr b">Nan</code>。事实上，<code class="fe mo mp mq mr b">Nan</code>不等于Python中存在的任何东西。它甚至不等于它本身！尽管如此，你可以使用我们刚刚学过的方法来检查一个数字是<code class="fe mo mp mq mr b">inf</code>还是<code class="fe mo mp mq mr b">Nan</code>。</p><p id="1018" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">我希望你从这篇文章中学到了新的东西。谢谢你阅读它。如果你喜欢你所读到的，看看下面这个故事:</p><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-using-or-to-check-multiple-conditions-in-python-404d31f2b569"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">在Python中停止使用“或”来检查多个条件</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">还有更精密的解决方案！</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>