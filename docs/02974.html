<html>
<head>
<title>10 Fun Facts About Create React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于创建React应用程序的10个有趣事实</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10-fun-facts-about-create-react-app-eb7124aa3785?source=collection_archive---------3-----------------------#2020-01-13">https://betterprogramming.pub/10-fun-facts-about-create-react-app-eb7124aa3785?source=collection_archive---------3-----------------------#2020-01-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="76d8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">有些事情你知道，有些事情你可能不知道</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/86c5b45b905ba5259da3548b9ae42ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r22wjzFjfcKXvC_Ey_xLeQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lucistan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Luca Upper </a>在<a class="ae ky" href="https://unsplash.com/s/photos/fun-facts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f53c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/facebook/react" rel="noopener ugc nofollow" target="_blank"> React </a>是一个用于构建用户界面的JavaScript库。它是构建单页面应用程序最流行的库之一。<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">创建React应用</a>是搭建React项目的快捷方式。这样，你就专注于代码，而不是构建工具。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a334" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实#1:你可以用一个命令创建一个成熟的项目</h1><p id="f127" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">可以通过以下三种方式之一调用这个神奇的命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f890" class="ne md it na b gy nf ng l nh ni">npx create-react-app my-app<br/>npm init react-app my-app<br/>yarn create react-app my-app</span></pre><p id="4b28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">脸书承诺它的所有基础部分——Webpack、Babel、ESLint、Jest等——可以无缝协作。</p><p id="7560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开箱即用，设置了以下脚本:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="081d" class="ne md it na b gy nf ng l nh ni"><strong class="na iu">npm start</strong>: Runs the app in development mode, and open <a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a> to view it in the browser.</span><span id="1510" class="ne md it na b gy nj ng l nh ni"><strong class="na iu">npm run build</strong>: Builds the app for production to the build folder.<br/>The build is minified and ready to be deployed.</span><span id="368d" class="ne md it na b gy nj ng l nh ni"><strong class="na iu">npm test</strong>: Runs the test watcher in an interactive mode. It runs tests related to files changed since the last commit.</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f554" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实2: React项目可以从一个特定的模板开始</h1><p id="e041" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">可以使用特定的模板自定义前面的命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="19fe" class="ne md it na b gy nf ng l nh ni">npx create-react-app my-app --template [template-name]<br/>npm init react-app my-app --template [template-name]<br/>yarn create react-app my-app --template [template-name]</span></pre><p id="4c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想用TypeScript启动React项目，只需使用模板<code class="fe nk nl nm na b">cra-template-typescript</code>。默认模板是<code class="fe nk nl nm na b">cra-template</code>。</p><p id="1c89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想利用社区资源，试试这个网站。目前有170个模板可用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/603c01902119f5a6fbb43f70bc84221a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jsh_r4K6UQqlROH7M1c1XQ.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f737" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实#3:一个依赖是Create React App的首要理念，这个构建依赖不在devDependencies部分</h1><p id="f3a6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><em class="no">一个依赖</em>是三个Create React App理念中的第一个。你能在下面的<code class="fe nk nl nm na b">package.json</code>中找到这个构建依赖吗？</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6300" class="ne md it na b gy nf ng l nh ni">{<br/>  "name": "my-react-app",<br/>  "dependencies": {<br/>    "react": "^16.12.0",<br/>    "react-dom": "^16.12.0",<br/>    "react-scripts": "3.2.0"<br/>  },<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },</span></pre><p id="09c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nk nl nm na b">package.json</code>中，我们看到三个<code class="fe nk nl nm na b">dependencies</code>，没有<code class="fe nk nl nm na b">devDependencies</code>。这<em class="no">一依赖</em>在哪里？</p><p id="fa43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是<code class="fe nk nl nm na b">react-scripts</code>！</p><p id="90e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据<a class="ae ky" href="https://medium.com/@jenniferfubook/package-jsons-dependencies-in-depth-a1f0637a3129" rel="noopener"> NPM依赖项定义</a>，构建依赖项<code class="fe nk nl nm na b">react-scripts</code>应该是<code class="fe nk nl nm na b">devDependency</code>。但是，它与<code class="fe nk nl nm na b">react</code>和<code class="fe nk nl nm na b">react-dom</code>一起位于依赖项部分。</p><p id="71f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，<code class="fe nk nl nm na b">react-scripts</code>是一个<code class="fe nk nl nm na b">devDependency</code>。出于某些实际原因，脸书从react-scripts 1.0.8开始就把它变成了一个依赖项。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8862" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实#4:不需要配置是Create React App的第二个理念——但它不是零配置</h1><p id="8e62" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Create React App已经为开发和生产构建设置了相当好的配置。开发人员可以专注于编写代码。有可能什么都不配置。</p><p id="3e6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是开箱即用的源代码树。我们实际上找到了一个配置文件，<code class="fe nk nl nm na b">.gitignore</code>，用于github的源代码版本控制。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c311" class="ne md it na b gy nf ng l nh ni">my-react-app/<br/>  node_modules/<br/>  public/<br/>    favicon.ico<br/>    index.html <br/>    logo192.png<br/>    logo512.png<br/>    manifest.json<br/>    robots.txt<br/>  src/<br/>    App.css<br/>    App.js<br/>    App.test.js<br/>    index.css<br/>    index.js<br/>    logo.svg<br/>    serviceWorker.js<br/>  .gitignore<br/>  package-lock.json<br/>  package.json<br/>  README.md</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2d4e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实#5:不锁定是Create React App的第三个理念——你不必退出一个项目来定制一个设置</h1><p id="89b6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><em class="no">无锁定</em>与<em class="no">有依赖</em>相反。它允许您弹出预配置的设置进行自定义。运行一个命令<code class="fe nk nl nm na b">react-scripts eject</code>，所有的配置和构建依赖项将被直接转移到项目中。这个项目不再是<em class="no">一个人的依赖</em>。现在，你只能靠自己了。</p><p id="c58b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">听起来可怕吗？</p><p id="ae12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嗯，<code class="fe nk nl nm na b">react-app-rewired</code>来救援。可以重新连接项目以进行自定义，而无需将其推出。</p><p id="fdec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以通过三个步骤实现:</p><ol class=""><li id="7ec3" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">将<code class="fe nk nl nm na b">react-app-rewired</code>安装为<code class="fe nk nl nm na b">devDependency</code> : <code class="fe nk nl nm na b">npm install react-app-rewired <em class="no">--</em>save-dev</code>:</li></ol><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c912" class="ne md it na b gy nf ng l nh ni">"devDependencies": {<br/>  "react-app-rewired": "^2.1.5"<br/>}</span></pre><p id="2747" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.在根目录下创建一个<code class="fe nk nl nm na b">config-overrides.js</code>文件:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c85b" class="ne md it na b gy nf ng l nh ni">module.exports = (config, env) =&gt; {<br/> //do stuff with the webpack config…<br/> return config;<br/>}</span></pre><p id="1bdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.将<code class="fe nk nl nm na b">package.json</code>中已有的调用从<code class="fe nk nl nm na b">react-scripts</code>翻转到<code class="fe nk nl nm na b">react-app-rewired</code>(除了<code class="fe nk nl nm na b">eject</code>):</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="60a5" class="ne md it na b gy nf ng l nh ni">{<br/>  "scripts": {<br/>    "start": "<strong class="na iu"><em class="no">react-app-rewired</em></strong> start",<br/>    "build": "<strong class="na iu"><em class="no">react-app-rewired</em></strong> build",<br/>    "test": "<strong class="na iu"><em class="no">react-app-rewired</em></strong> test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>}</span></pre><p id="f853" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你可以自由地为Webpack、Babel、ESLint、Jest等配置设置。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="80a7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实6:“React-App-Rewired”通过配置“Config-overrides.js”增加了更多功能</h1><p id="3cd8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们的React项目开发过程中，我们充分利用了<code class="fe nk nl nm na b">react-app-rewired</code>配置功能。</p><p id="26e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是一些如何使用<code class="fe nk nl nm na b">config-overrides.js</code>的例子:</p><p id="9c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例1 </strong>:解决我的另一篇文章中提到的，在同一个应用程序中有多个React副本的问题。</p><p id="d985" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用monorepo lerna来构建微前端的多包库。我们的应用程序最终拥有自己的React依赖项，以及依赖项的React <code class="fe nk nl nm na b">devDependency</code>。通常，当有多个包副本时，应用程序仍然可以工作。然而，当包含两次时，即使版本相同，React也会中断。下面的例子使用了一个别名来解析应用程序自身副本的所有React链接。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1885" class="ne md it na b gy nf ng l nh ni">const path = require('path');<br/>module.exports = {<br/>  webpack: (config, env) =&gt; {<br/>    if (env === 'development') {<br/>      config.resolve.alias = {<br/>        react: path.resolve('node_modules/react'),<br/>        'react-dom': path.resolve('node_modules/react-dom'),<br/>      };<br/>    }<br/>    return config;<br/>  },<br/>};</span></pre><p id="fae5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例2 </strong>:解决“如何使用webpack加载库源码图？”问题，在<a class="ae ky" href="https://stackoverflow.com/a/58964565/1773256" rel="noopener ugc nofollow" target="_blank">中提到的解决方案之一</a>。</p><p id="2e93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在类似的monorepo微前端环境中，会生成一个库源映射，但它不会在开发调试器会话期间加载。使用附加包<a class="ae ky" href="https://github.com/webpack-contrib/source-map-loader" rel="noopener ugc nofollow" target="_blank"> source-map-loader </a>，下面的代码通过将<code class="fe nk nl nm na b">sourceMaps</code>选项设置为<code class="fe nk nl nm na b">true</code>解决了这个问题。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="553a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">示例3 </strong>:通过避免对应用程序进行代码拆分来解决动态加载问题。</p><p id="36bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<code class="fe nk nl nm na b">react-scripts 2.0.0</code>开始，默认启用代码拆分。应用程序不再被编译成单个文件。相反，它被分成几个可以独立加载到页面上的块。这种加载优化导致安装和卸载微前端的问题。<a class="ae ky" href="https://github.com/camjackson/react-app-rewire-micro-frontends/blob/master/config-overrides.js" rel="noopener ugc nofollow" target="_blank">react-app-rewire-micro-frontends</a>提供了以下方法来禁用代码拆分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="da9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nk nl nm na b">react-app-rewired</code>之外，还有许多react-scripts重新连线器:<a class="ae ky" href="https://github.com/arackaf/customize-cra" rel="noopener ugc nofollow" target="_blank"> customize-cra </a>、<a class="ae ky" href="https://github.com/rescripts/rescripts" rel="noopener ugc nofollow" target="_blank"> rescripts </a>、<a class="ae ky" href="https://github.com/marcopeg/create-react-app/blob/master/packages/react-scripts/README.md" rel="noopener ugc nofollow" target="_blank"> react-scripts-rewired </a>和<a class="ae ky" href="https://github.com/sharegate/craco" rel="noopener ugc nofollow" target="_blank"> craco </a>(创建React App配置覆盖)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7299" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实7: Jest可以使用绝对路径</h1><p id="3956" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Jest 是Create React应用程序的默认测试运行程序。默认情况下，Jest运行<code class="fe nk nl nm na b">.js files in __tests__ folders</code>、<code class="fe nk nl nm na b">.test.js files</code>或<code class="fe nk nl nm na b">.spec.js files</code>中的所有测试用例。</p><p id="3735" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是Create React App的<code class="fe nk nl nm na b">App.test.js</code>。这个测试用例使用了一个相对路径:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="4a92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您将<code class="fe nk nl nm na b">App</code>改为使用绝对路径，如下所示，这个测试用例将会中断:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="8c14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过添加<code class="fe nk nl nm na b">modulePaths</code>选项来修复它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="4f47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果使用<code class="fe nk nl nm na b">react-app-rewired</code>，也可以通过配置<code class="fe nk nl nm na b">config-overrides.js</code>来修复:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f110" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实8:创建React应用程序可以处理CORS(跨源资源共享)错误</h1><p id="85ac" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你遇到过以下错误吗？：</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="00fb" class="ne md it na b gy nf ng l nh ni">Fetch API cannot load http://myhost.com:4000/api/todos. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://localhost:3000' is therefore not allowed access. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</span></pre><p id="52f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当API使用不同于web服务器的主机或端口时，此错误将阻止您的应用程序工作。</p><p id="311a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://create-react-app.dev/docs/proxying-api-requests-in-development" rel="noopener ugc nofollow" target="_blank"> Create React App通过在<code class="fe nk nl nm na b">package.json</code>中添加一个代理条目提供了一种解决此问题的方法</a>:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="5bcf" class="ne md it na b gy nf ng l nh ni">{<br/>  “proxy”: “http://myhost.com:4000",<br/>}</span></pre><p id="bf82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此代理选项支持HTTP、HTTPS和WebSocket连接。</p><p id="b3eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有不止一个API服务器呢？</p><p id="f802" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替代方案需要安装<code class="fe nk nl nm na b">http-proxy-middleware</code>:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b8ee" class="ne md it na b gy nf ng l nh ni">npm install --save http-proxy-middleware</span></pre><p id="ed68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，在根目录下创建并配置<code class="fe nk nl nm na b">src/setProxy.js</code>。下面是一个<code class="fe nk nl nm na b">src/setProxy.js</code>的例子。打给<code class="fe nk nl nm na b">/api1/x</code>的电话将被转接到<code class="fe nk nl nm na b">http://myhost1:4000/api1/x</code>，打给<code class="fe nk nl nm na b">/api2/y</code>的电话将被转接到<code class="fe nk nl nm na b"><a class="ae ky" href="http://myhost2:5000/api1/y." rel="noopener ugc nofollow" target="_blank">http://myhost2:5000/api1/y</a></code> <a class="ae ky" href="http://myhost2:5000/api1/y." rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a702" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实9:创建React应用程序可以配置支持哪些浏览器</h1><p id="00c8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">开箱后可以在<code class="fe nk nl nm na b">package.json</code>中看到下面的<code class="fe nk nl nm na b">browserslist</code>。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9094" class="ne md it na b gy nf ng l nh ni">"browserslist": {<br/>    "production": [<br/>      "&gt;0.2%",<br/>      "not dead",<br/>      "not op_mini all"<br/>    ],<br/>    "development": [<br/>      "last 1 chrome version",<br/>      "last 1 firefox version",<br/>      "last 1 safari version"<br/>    ]<br/>  }</span></pre><p id="50d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种配置控制着Babel如何将JavaScript转换成与特定的浏览器兼容，用于生产和开发。查看<a class="ae ky" href="https://browserl.ist" rel="noopener ugc nofollow" target="_blank"> https://browserl.ist </a>了解如何配置<code class="fe nk nl nm na b">browserslist</code>。</p><p id="a6bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Create React应用程序的默认<code class="fe nk nl nm na b">browserslist</code>配置，生产代码针对92%的浏览器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/b7e8c3aec66504d51c66a6d212989bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMXJ5ynedNqSoBfF3_2qyw.png"/></div></div></figure><p id="e017" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Create React App的默认<code class="fe nk nl nm na b">browserslist</code>配置，生产代码针对26%的浏览器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/de5a6ee4a280f772f6f1f6d2871e438b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EJWlhuAaOz-5frXRqKNoVA.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5dfa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">事实#10:生成的包可以被分析</h1><p id="b71c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">创建React App <em class="no"> </em>隐藏了很多细节和复杂情况。在生成最终包之后，您有兴趣分析它的空间使用情况吗？</p><p id="9c9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nk nl nm na b"><a class="ae ky" href="https://github.com/danvk/source-map-explorer" rel="noopener ugc nofollow" target="_blank">source-map-explorer</a></code>让您能够通过源地图分析和调试空间使用情况。安装<code class="fe nk nl nm na b">source-map-explorer</code>:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="501a" class="ne md it na b gy nf ng l nh ni">npm install --save source-map-explorer</span></pre><p id="9a9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加分析脚本:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3244" class="ne md it na b gy nf ng l nh ni">{<br/>  "scripts": {<br/>    <strong class="na iu"><em class="no">"analyze": "source-map-explorer 'build/static/js/*.js'",</em></strong><br/>    "start": "react-scripts start",<br/>    "build": "react-scriptsd build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>}</span></pre><p id="e635" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建并运行分析命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4144" class="ne md it na b gy nf ng l nh ni">npm run build<br/>npm run analyze</span></pre><p id="e869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，该包的用法将显示在您的默认浏览器上:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/25dd3e1efafd71d918c56c7637eff42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8Er_erzfmGdARdQEuPybw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="f928" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用Create React App玩得开心吗？参见詹妮弗·傅的其他媒体出版物<a class="ae ky" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">此处</a>。</p></div></div>    
</body>
</html>