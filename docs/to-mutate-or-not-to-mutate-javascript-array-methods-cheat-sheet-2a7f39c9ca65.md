# 变异还是不变异？JavaScript 数组方法备忘单

> 原文：<https://betterprogramming.pub/to-mutate-or-not-to-mutate-javascript-array-methods-cheat-sheet-2a7f39c9ca65>

## 记住九种使数组变异的方法的技巧

![](img/80341a147dc5adab1cac42eb36b2cc69.png)

由[米莲娜·特里福诺娃](https://unsplash.com/@milenatrifonova?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片。

当你开始学习不同的方法来操作一个数组时，你的世界被照亮了。可以添加和删除元素！你可以逆转他们！然后，您会意识到并非所有内置数组方法都按照您希望的方式运行。在这个过程中的某个地方，您会弄不清哪个方法改变了原始数组，哪个没有。

如果有一个工具能告诉你一个特定的数组方法是否改变了原始数组，那不是很好吗？

是的，我知道。我们可以随时查看 MDN 的文档。更好的是，有一个很棒的网站(希望)列出了所有常用的数组方法，并将它们标识为“变异”或“不变异”

我做了一个快速统计，发现网站上列出的 31 种方法中只有 9 种会改变数组。

这里有一个想法:为什么不仅仅记住九个破坏性的数组方法？这样，在处理数组时，我们不需要停顿太久。如果我们调用这九个方法中的任何一个，原始数组肯定会被修改。

好吧，让我们来探索这九种方法，看看变异者是如何变异的！

# 1.。推送()

`.push()`方法接受一个将被添加到数组末尾的数组元素。

这里，我们有一个名为`happy`的数组，由三个笑脸表情组成。在我们推了一个便便脸之后，`happy`数组现在有一个快乐的便便脸附加在末尾:

```
let happy = ['🙂', '😀', '😊'];happy.push('💩');happy
// => [ '🙂', '😀', '😊', '💩']
```

# 2.。流行()

这个方法类似于`.push()`方法，因为两者都涉及到改变数组的最后一项。

与`.push()`方法不同，`.pop()`将移除数组的最后一项。如下图所示，我们只需将`.pop()`的便便从`happy`数组中取出！

```
happy
// => [ '🙂', '😀', '😊', '💩']happy.pop();happy
// => [ '🙂', '😀', '😊']
```

提示:便便表情符号不是随机选择的。正是在这里帮助我们记住 `*.push()*` *和* `*.pop()*` *都是通过添加(****p****ushing)或移除(****p****opping)最后一项(****p****OOP)来对数组进行变异。*

# 3.。未移位()

`.unshift()`方法的工作方式与`.push()`相似，除了它在数组的开头添加了一个新项目。

回到我们干净，没有便便的笑脸的例子。在我们将一个幽灵表情符号传递到`.unshift()`方法之后，`happy`数组现在由一个幽灵领导！

```
let happy = [ '🙂', '😀', '😊']happy.unshift('👻');happy
// => [ '👻', '🙂', '😀', '😊']
```

现在，如果我们想删除第一项呢？

# 4.。shift()

`.pop()`删除最后一项，`.shift()`只是删除数组中的第一项，如下所示:

```
happy
// => [ '👻', '🙂', '😀', '😊']happy.shift();happy
// => ['🙂', '😀', '😊']
```

*提示:您可能已经注意到了，* `*.unshift()*` *和* `*.shift()*` *是镜像方法，用于添加/移除数组中的第一项。同理，你可以把* `*.push()*` *和* `*.pop()*` *看成是另一组添加/移除数组最后一项的方法。*

# 5.。反向()

这是一个显而易见的。顾名思义，`.reverse()`方法颠倒数组中元素的顺序。在这里，由于使用了`.reverse()`方法，我们可以看到一个盈亏月亮的效果。

```
let moon = ['🌒', '🌓', '🌔', '🌕'];moon.reverse();moon
// => [ '🌕', '🌔', '🌓', '🌒']
```

# 6.。拼接()

`.splice()`方法非常强大，因为它可以接受任意多的参数，并通过添加和/或替换数组中的项目来改变数组。

在下面的三只聪明猴子数组示例中，我们通过传入三种类型的参数来实现`.splice()`方法:

1.  变化开始的索引(索引 1)
2.  要移除的项目数量(一个项目:无恶不作的猴子)
3.  要添加到数组中的项目(三个邪恶面)

```
let monkeys = ['🙈', '🙉', '🙊'];monkeys.splice(1, 1, '😈', '😈', '😈');
```

现在，听不见邪恶的猴子不见了，取而代之的是三张邪恶的脸:

```
monkeys
// => [ '🙈', '😈', '😈', '😈', '🙊']
```

您也可以选择仅将项目添加到数组内的特定位置。在这里，我们在索引 2 处插入了邪恶的面孔，但保留了所有三只猴子(作为第二个参数传入`0`):

```
let monkeys = ['🙈', '🙉', '🙊'];monkeys.splice(2, 0, '😈');monkeys
// => [ '🙈', '🙉', '😈', '🙊']
```

*提示:注意* `[*.slice()*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)` [*方法*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice) *。表面上看起来像是* `*.splice()*` *，但是* `*.slice()*` *方法产生了一个新的数组，因此不会改变原来的数组。*

# 7.。排序()

这个太棒了。默认情况下,`.sort()`方法确实对数组中的项目进行了降序排序，但是它不一定按照我们普通人所期望的方式运行。

假设我们有一组数字。如果我们应用`.sort()`方法会发生什么？

```
let numbers = [3, 25, 99];numbers.sort();numbers
// => [ 25, 3, 99 ]
```

很奇怪，对吧？

事实证明，`.sort()`方法将每一项转换成一个字符串，并根据它们的 Unicode 码位进行比较。

我们可以通过调用`[.codePointAt()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt)` [方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt)来检查字符串第一个值的 Unicode 码位。

将这些数字强制转换成字符串后，我们看到了为什么`.sort()`认为`25`小于`3`:

别忘了表情符号也是作为字符串传入的！

最重要的是:

如果您真的想按照人类理解的顺序对数字进行排序，您可以在`.sort()`方法中传递一个比较函数作为参数:

如果你的脑袋还没有爆炸，看看这篇深入研究`.sort()`方法的惊人文章。

# 8.。copyWithin()

顾名思义，该方法复制数组的一部分，并将其放在同一数组的另一部分上。

它接受三个参数:

1.  放置复制项的索引
2.  (可选)开始复制项目的索引(包含)
3.  (可选)结束复制项目的索引(不含)

举例来说，下面是我们如何利用`.copyWithin()`方法:

这里有另一个例子来帮助阐明每个论点的目的:

请注意最后一项(“🙏”)被替换后，我们复制了两个项目(“👌", "✋").

虽然我还没有机会在我的程序中使用`.copywithin()`，但这个方法的功能似乎与`.splice()`相似。基于两种方法接受的参数类型，后者提供了更多的灵活性，因为我们可以插入新的项，而不是从内部复制。所以选你的毒药吧。

# 9.。填充()

最后，`.fill()`方法将数组中的部分或全部项改变为传入的值。

它还接受 3 个参数:

1.  用于填充数组的值
2.  (可选)起始索引(含)
3.  (可选)结束索引(不含)

例如，你可以修复一颗破碎的心:

```
let spreadTheLove = ["<3", "💔", "love", "heart"];spreadTheLove.fill("❤️", 1, 2);spreadTheLove
// => [ '<3', '❤️', 'love', 'heart']
```

或者只是用爱填满它们:

```
spreadTheLove = ["<3", "💔", "love", "heart"];spreadTheLove.fill("❤️");spreadTheLove
// => [ '❤️', '❤️', '❤️', '❤️' ]
```

`.fill()`方法的一个显著特征是它只接受一个静态值。如果你想在一个数组中插入多个值，去别处看看。

# 概述

同样，下面是改变原始数组的九个基本数组方法:

*   `.push()` —添加一个新项作为数组的最后一项。
*   `.pop()` —删除数组的最后一项。
*   `.unshift()` —添加一个新项目作为数组的第一个项目。
*   `.shift()` —删除数组的第一项。
*   `.reverse()` —反转数组的顺序。
*   `.splice()` —删除/替换数组中的项目。
*   `.sort()` —根据 Unicode 码位对数组中的项目重新排序。
*   `.copyWithin()` —复制数组的一部分，并将其放在同一数组的另一部分上。
*   `.fill()` —将数组中的部分或全部项目更改为传入的值。

通过记住这九个方法，我能够加快我的编码过程。这也减轻了我对意外复制或改变数组的担心。希望你也觉得有用！