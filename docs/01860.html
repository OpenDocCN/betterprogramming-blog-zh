<html>
<head>
<title>Battery, Network, Disk Space: Three Undervalued Factors in Mobile Application Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电池、网络、磁盘空间:移动应用开发中三个被低估的因素</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/battery-network-disk-space-three-undervalued-factors-in-mobile-application-development-92988bc1d6a4?source=collection_archive---------17-----------------------#2019-10-17">https://betterprogramming.pub/battery-network-disk-space-three-undervalued-factors-in-mobile-application-development-92988bc1d6a4?source=collection_archive---------17-----------------------#2019-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1341" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如果我们想达到最高的质量，这些是强制性的标准</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b18287fce86e859a6de7378a5d612440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEUdsjF8a0sOTkjIqFGVDQ.png"/></div></div></figure><p id="e108" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我刚刚结束了与开发和业务团队的头脑风暴会议。我们与一位敏捷方法学家合作，在sprint审查之后，我们讨论了将在我们的应用程序的即将到来的版本中引入的一些新功能。</p><p id="904c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">回想那次会议，不考虑我们交付的最后一个项目，我注意到在移动应用程序的开发中，我们经常不考虑硬件设备的三个重要层。</p><p id="2523" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我指的是电池、网络和磁盘空间。</p><p id="09ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在Android和iOS上看到许多应用程序，它们不关心电池电量、网络质量以及设备上有多少磁盘空间。</p><p id="bb99" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关键是:如果我们想让我们的应用程序达到最高质量，我们必须将这些视为强制性标准。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="4f1a" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">电池</h1><p id="a26c" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">你是否曾经在一个移动应用程序的漫长过程结束时，看到手机由于低电量而关机？也许我们正在打电话，或者我们正在填写购买或注册表格。这真是令人沮丧…</p><p id="5b8a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，在这种情况下，应用程序本身必须包括一个图形界面，当电池的状态真的很低，在10%或5%之间时，它会通知用户。</p><p id="448d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">发出警告后，我们必须让用户能够保存或快速完成正在进行的操作，而不会丢失任何数据。此外，我们可以使用后台任务自动更新和保存流程和数据。</p><p id="9d98" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如今，像Messenger、Skype或Whatsapp这样的应用程序都启用了这一功能，如果你在电池电量低的情况下打电话，你可以找到证据，也可以从我们呼叫的用户发出的低电量信号中找到证据。</p><p id="7bce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，像Android和iOS这样的移动操作系统会像下面的截图一样给用户一个一般性的警告</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/1ac28064e99f5d0a33b19bd759ff24c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ae42wT8htAA0uvJYkk3pMw.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">iOS和Android会发出电池电量低的警告和通知</p></figure><p id="401f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是很多应用程序对后台保存过程、状态和记录没有反应，或者只是在应用程序标题中放一点通知。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="bf07" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">网络</h1><p id="8123" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">根据网络状态更新用户界面非常重要！一些用户可能使用Wi-Fi，一些用户使用4G-LTE，但最有可能的是，许多用户将处于类似3G或EDGE网络的条件下，这可能比Wi-Fi或4G慢得多。</p><p id="29de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有时连接会断断续续或不可用。你的应用架构需要考虑最坏的网络情况。</p><p id="df7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">记住app架构设计需要“牢记缓存”，研究数据访问机制和状态管理。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="6f51" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">使用不同的网络调试和测试您的应用</h1><p id="cbee" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在带有Xcode 11的iOS平台<strong class="kt ir"> </strong>上，我们可以<a class="ae mw" href="https://www.agnosticdev.com/content/how-test-network-link-conditioner-xcode-11" rel="noopener ugc nofollow" target="_blank">使用网络链路调节器</a>来模拟设备状况。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/af907bb78386a5a155476b1ba0b0c513.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*fbwrrJtxN9koVYWzcCWmoQ.png"/></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">Xcode 11上的网络链接调节器设置</p></figure><p id="3fd5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要应用链接调节器，导航到<em class="my">Xcode</em>-&gt;-<em class="my">窗口</em>-&gt;-<em class="my">设备</em>和<em class="my">模拟器</em>。</p><p id="9085" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在左侧，单击连接的设备，在已安装的应用程序下方，您应该会看到设备条件菜单。在这里，您可以模拟热状态或网络链接。</p><p id="7dca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Android上，我们可以<a class="ae mw" href="https://developer.android.com/studio/run/managing-avds" rel="noopener ugc nofollow" target="_blank">设置一个Android虚拟设备(AVD) </a>。这是一个配置，它定义了您想要在<a class="ae mw" href="https://developer.android.com/studio/run/emulator.html" rel="noopener ugc nofollow" target="_blank"> Android模拟器</a>中模拟的Android手机、平板电脑、Wear OS、Android TV或汽车OS设备的特征。</p><p id="0721" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">AVD管理器是一个可以从Android Studio启动的界面，可以帮助您创建和管理AVD。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/a4643e6f01d658006ff3d755fc901a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:388/format:webp/1*chtAkhlPorp1Of3QiqYlpA.png"/></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">在<a class="ae mw" href="https://developer.android.com/studio/run/managing-avds" rel="noopener ugc nofollow" target="_blank"> <strong class="bd na"> </strong> Android虚拟设备</a>中，可以设置网络进行调试</p></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="bdb0" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">磁盘空间</h1><p id="4580" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">尤其是当我们使用多媒体数据，如照片、视频或文档时，我们必须<em class="my">在进行任何操作之前</em>检查我们设备上的磁盘空间。</p><p id="f7eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">始终检查可用磁盘空间和在设备上保存raw文件所需的字节。如果无法继续，我们可以通过警报或通知告知磁盘空间不足。</p><p id="b2f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还可以为用户提供在云上保存数据的选项。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="a130" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">如何才能做出质量更好的app？</h1><h2 id="7b39" class="nb lv iq bd lw nc nd dn ma ne nf dp me la ng nh mg le ni nj mi li nk nl mk nm bi translated"><strong class="ak">使用应用内通知</strong>(非模态提醒！)</h2><p id="dd4b" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">使用应用内通知(不是模式提醒)来提醒用户电池电量不足。</p><p id="fe4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，您可以找到一些有用的文章链接:</p><ul class=""><li id="b66c" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated"><a class="ae mw" href="https://medium.muz.li/designing-notifications-for-applications-3cad56fecf96" rel="noopener ugc nofollow" target="_blank">为应用程序设计通知</a></li><li id="8e00" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://www.mobileappdaily.com/2018/11/15/designing-app-notifications" rel="noopener ugc nofollow" target="_blank">设计应用程序通知应遵循的指南</a></li></ul><h2 id="198c" class="nb lv iq bd lw nc nd dn ma ne nf dp me la ng nh mg le ni nj mi li nk nl mk nm bi translated"><strong class="ak">阅读并聆听应用程序中电池、网络和磁盘空间的所有值</strong></h2><p id="13c4" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">iOS和Android都为我们提供了对这些参数的“只读”API访问。</p><p id="079b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以主动使用它在我们的应用程序中执行一些操作和交互。</p><p id="cd6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请查看下面的API:</p><ul class=""><li id="e91f" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.apple.com/documentation/uikit/uidevice/1620042-batterylevel" rel="noopener ugc nofollow" target="_blank">电池电量iOS API </a></li><li id="bc7b" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.apple.com/documentation/systemconfiguration/scnetworkreachability-g7d" rel="noopener ugc nofollow" target="_blank">网络类型iOS API </a></li><li id="406e" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.apple.com/documentation/foundation/urlresourcekey/1412898-volumeavailablecapacitykey" rel="noopener ugc nofollow" target="_blank">磁盘空间iOS API </a></li><li id="41e9" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.android.com/reference/android/os/BatteryManager.html" rel="noopener ugc nofollow" target="_blank">电池电量安卓API </a></li><li id="d669" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.android.com/reference/android/net/ConnectivityManager.html" rel="noopener ugc nofollow" target="_blank">网络型Android API </a></li><li id="7bf0" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.android.com/reference/android/os/StatFs" rel="noopener ugc nofollow" target="_blank">磁盘空间Android API </a></li></ul><h2 id="024c" class="nb lv iq bd lw nc nd dn ma ne nf dp me la ng nh mg le ni nj mi li nk nl mk nm bi translated"><strong class="ak">使用系统缓存和云</strong></h2><p id="8623" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">我们需要为图像、JSON文件和视频数据等内容正确使用缓存。这改善了网络的访问和使用，节省了电池寿命！</p><p id="8883" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于iOS，请阅读这篇由John Sundell撰写的关于Swift中的<a class="ae mw" href="https://www.swiftbysundell.com/articles/caching-in-swift/" rel="noopener ugc nofollow" target="_blank"> <em class="my">缓存的伟大文章。对于Android，<a class="ae mw" href="https://medium.com/@appmattus/caching-made-simple-on-android-d6e024e3726b" rel="noopener"> <em class="my">缓存在Android上变得简单</em> </a>作者马修·多兰</em></a></p><h2 id="56bf" class="nb lv iq bd lw nc nd dn ma ne nf dp me la ng nh mg le ni nj mi li nk nl mk nm bi translated">在云端保存数据</h2><p id="65f9" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">如果我们的本地设备上没有空间，我们可以使用一个程序在云系统上保存数据，比如<a class="ae mw" href="https://www.icloud.com" rel="noopener ugc nofollow" target="_blank"> iCloud </a>、<a class="ae mw" href="http://www.dropbox.com/" rel="noopener ugc nofollow" target="_blank"> Dropbox </a>、<a class="ae mw" href="https://www.google.com/drive" rel="noopener ugc nofollow" target="_blank"> Google Drive </a>等等。</p><p id="0fc1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是一些改善你的磁盘空间控制流程的链接。</p><ul class=""><li id="e6f3" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.apple.com/icloud/documentation/data-storage/index.html" rel="noopener ugc nofollow" target="_blank"> iOS数据存储指南</a></li><li id="666d" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.android.com/guide/topics/data/data-storage" rel="noopener ugc nofollow" target="_blank">安卓数据存储指南</a></li></ul><h2 id="1ef5" class="nb lv iq bd lw nc nd dn ma ne nf dp me la ng nh mg le ni nj mi li nk nl mk nm bi translated"><strong class="ak">根据网络运行时间设计不同的UI/UX体验</strong></h2><p id="4c70" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">请记住，如果网络操作类型需要大量时间来完成，我们使用<em class="my">进度加载</em>，如果最终响应时间可以在0到5秒之间完成，我们使用<em class="my">不确定加载</em>。<br/> <br/>这篇好文章，<a class="ae mw" href="https://medium.com/flawless-app-stories/everything-you-need-to-know-about-loading-animations-10db7f9b61e" rel="noopener"> <em class="my">你需要知道的关于加载动画的一切</em> </a> <em class="my">，</em>来自Lisa Dziuba可以帮助我们改进我们的UI/UX。</p><h2 id="759c" class="nb lv iq bd lw nc nd dn ma ne nf dp me la ng nh mg le ni nj mi li nk nl mk nm bi translated"><strong class="ak">在临界条件前写日志</strong></h2><p id="5227" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">这在开发人员的生活中非常有帮助，可以了解我们的应用程序在何时何地因为电池电量低、磁盘空间不足而崩溃，或者因为网络连接而出现问题。</p><ul class=""><li id="db58" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.apple.com/documentation/os/logging" rel="noopener ugc nofollow" target="_blank">登录iOS </a></li><li id="4892" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae mw" href="https://developer.android.com/reference/android/util/Log" rel="noopener ugc nofollow" target="_blank">登录Android </a></li></ul><p id="8642" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之后，我们可以决定对我们的代码进行一些修复，或者改善用户体验以及与应用程序的交互。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="aa4d" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">我最后的建议</strong></h1><p id="bfe4" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在应用上述所有或部分要点之前和之后，记录应用的评论和评级。我很确定你会因此而积极向上！</p></div></div>    
</body>
</html>