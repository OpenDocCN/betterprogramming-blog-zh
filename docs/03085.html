<html>
<head>
<title>Introducing the JavaScript Window Object</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript窗口对象简介</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introducing-the-javascript-window-object-url-and-activeelement-db4008a13682?source=collection_archive---------13-----------------------#2020-01-19">https://betterprogramming.pub/introducing-the-javascript-window-object-url-and-activeelement-db4008a13682?source=collection_archive---------13-----------------------#2020-01-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c99f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">浏览URL、activeElement和fullscreenElement属性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4e736a3624865ffc120adba6dbfb9fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WetIXOKmbwHXp5Lv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马修·T·雷德在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="eebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">window</code>对象是一个全局对象，它具有与当前DOM文档相关的属性，这些属性是浏览器选项卡中的内容。</p><p id="83fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为<code class="fe lv lw lx ly b">window</code>对象是全局的，所以它在应用程序的每个部分都是可用的。</p><p id="c3a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一部分中，我们将探索<code class="fe lv lw lx ly b">URL</code>、<code class="fe lv lw lx ly b">activeElement</code>和<code class="fe lv lw lx ly b">fullscreenElement</code>属性。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="fbe6" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">window.document.URL</h1><p id="03ea" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">URL</code>属性以字符串形式获取当前加载页面的URL。这是一个只读属性。例如，我们可以写:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="28d2" class="nh mh it ly b gy ni nj l nk nl">console.log(window.document.URL);</span></pre><p id="9d43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我们应该得到类似https://fiddle.jshell.net/_display/的东西。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="77af" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">windows . document . active element</h1><p id="f9e6" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">activeElement</code>属性是一个只读属性，它返回处于焦点的<code class="fe lv lw lx ly b">Element</code>对象。如果当时有文本选择，<code class="fe lv lw lx ly b">activeElement</code>通常会返回一个<code class="fe lv lw lx ly b">input</code>或一个<code class="fe lv lw lx ly b">textarea</code>对象。</p><p id="b032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果是这种情况，我们可以通过<code class="fe lv lw lx ly b">selectionStart</code>和<code class="fe lv lw lx ly b">selectionEnd</code>属性获得更多细节。聚焦元素也可以是类型为<code class="fe lv lw lx ly b">button</code>、<code class="fe lv lw lx ly b">checkbox</code>或<code class="fe lv lw lx ly b">radio</code>的<code class="fe lv lw lx ly b">select</code>元素或<code class="fe lv lw lx ly b">input</code>元素。</p><p id="b329" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户可以按tab键将焦点移动到不同于他们当前聚焦的元素。空格键可以激活输入元素，如果它涉及到选择，如复选框或单选按钮。</p><p id="e327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于macOS系统，默认情况下，不是输入的元素是不可聚焦的。例如，如果我们有以下HTML标记:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="31c9" class="nh mh it ly b gy ni nj l nk nl">&lt;form&gt;<br/>  &lt;textarea name="textarea-1" id="textarea-1" rows="7" cols="40"&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi interdum justo vel nulla laoreet mollis. Curabitur eget turpis id mi venenatis efficitur vestibulum sit amet libero. Fusce non varius tellus. Vestibulum a nisi venenatis, accumsan diam eget, aliquet ex. Sed tristique purus at est pulvinar, eu tincidunt justo vestibulum. Mauris fringilla interdum ipsum sed blandit. Suspendisse sollicitudin ut mi eget tincidunt. Sed et dolor diam. Praesent venenatis ipsum a libero interdum, in sagittis tellus elementum. Pellentesque in est vitae dui efficitur lacinia eget porta diam.</span><span id="2438" class="nh mh it ly b gy nm nj l nk nl">  &lt;/textarea&gt;</span><span id="7709" class="nh mh it ly b gy nm nj l nk nl">  &lt;textarea name="textarea-2" id="textarea-2" rows="7" cols="40"&gt;Duis urna dolor, fringilla quis dui quis, bibendum ornare ligula. Fusce ut nisi eu orci elementum rhoncus. Morbi ut tortor mauris. Morbi pretium tempus erat vitae dignissim. Duis et dolor vel metus tempor laoreet nec eget est. Curabitur tincidunt ullamcorper ante, sit amet iaculis arcu condimentum vitae. Donec tincidunt convallis maximus. Mauris pulvinar sem velit, congue volutpat nisl commodo sit amet. Duis ac est eu orci venenatis lacinia.</span><span id="32d4" class="nh mh it ly b gy nm nj l nk nl">  &lt;/textarea&gt;<br/>&lt;/form&gt;</span></pre><p id="afe8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和下面的JavaScript代码:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="7055" class="nh mh it ly b gy ni nj l nk nl">const textarea1 = document.getElementById('textarea-1');<br/>const textarea2 = document.getElementById('textarea-2');<br/>const onMouseUp = () =&gt; {<br/>  console.log(document.activeElement);<br/>}<br/>textarea1.addEventListener('mouseup', onMouseUp, false);<br/>textarea2.addEventListener('mouseup', onMouseUp, false);</span></pre><p id="0b38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们单击两个<code class="fe lv lw lx ly b">textarea</code>元素中的任何一个时，我们会看到<code class="fe lv lw lx ly b">activeElement</code>是当前处于焦点的<code class="fe lv lw lx ly b">textarea</code>元素。这是光标被单击后当前所在的位置。由于<code class="fe lv lw lx ly b">activeElement</code>是一个<code class="fe lv lw lx ly b">Element</code>对象，我们可以记录它的属性。我们可以将代码改为如下，以获得当前聚焦的<code class="fe lv lw lx ly b">textarea</code>元素的<code class="fe lv lw lx ly b">id</code>和<code class="fe lv lw lx ly b">value</code>:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="2e0b" class="nh mh it ly b gy ni nj l nk nl">const textarea1 = document.getElementById('textarea-1');<br/>const textarea2 = document.getElementById('textarea-2');<br/>const onMouseUp = () =&gt; {<br/>  const {<br/>    id,<br/>    value<br/>  } = document.activeElement<br/>  console.log(id);<br/>  console.log(value);<br/>}<br/>textarea1.addEventListener('mouseup', onMouseUp, false);<br/>textarea2.addEventListener('mouseup', onMouseUp, false);</span></pre><p id="49f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们点击第一个<code class="fe lv lw lx ly b">textarea</code>时，我们会看到:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="354b" class="nh mh it ly b gy ni nj l nk nl">textarea-1</span><span id="da89" class="nh mh it ly b gy nm nj l nk nl">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi interdum justo vel nulla laoreet mollis. Curabitur eget turpis id mi venenatis efficitur vestibulum sit amet libero. Fusce non varius tellus. Vestibulum a nisi venenatis, accumsan diam eget, aliquet ex. Sed tristique purus at est pulvinar, eu tincidunt justo vestibulum. Mauris fringilla interdum ipsum sed blandit. Suspendisse sollicitudin ut mi eget tincidunt. Sed et dolor diam. Praesent venenatis ipsum a libero interdum, in sagittis tellus elementum. Pellentesque in est vitae dui efficitur lacinia eget porta diam.</span></pre><p id="90d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们点击第二个<code class="fe lv lw lx ly b">textarea</code>，我们得到这个:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="24b7" class="nh mh it ly b gy ni nj l nk nl">textarea-2</span><span id="7d6b" class="nh mh it ly b gy nm nj l nk nl">Duis urna dolor, fringilla quis dui quis, bibendum ornare ligula. Fusce ut nisi eu orci elementum rhoncus. Morbi ut tortor mauris. Morbi pretium tempus erat vitae dignissim. Duis et dolor vel metus tempor laoreet nec eget est. Curabitur tincidunt ullamcorper ante, sit amet iaculis arcu condimentum vitae. Donec tincidunt convallis maximus. Mauris pulvinar sem velit, congue volutpat nisl commodo sit amet. Duis ac est eu orci venenatis lacinia.</span></pre><p id="d7ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，我们可以用单选按钮来做这件事。如果我们有下面的HTML代码:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="49eb" class="nh mh it ly b gy ni nj l nk nl">&lt;form&gt;<br/>  &lt;input type='radio' id='choice1' name='choice'&gt; Choice 1<br/>  &lt;input type='radio' id='choice2' name='choice'&gt; Choice 2<br/>&lt;/form&gt;</span></pre><p id="5e56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们稍微修改一下JavaScript代码，如下所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="5ba3" class="nh mh it ly b gy ni nj l nk nl">const choice1 = document.getElementById('choice1');<br/>const choice2 = document.getElementById('choice2');<br/>const onMouseUp = () =&gt; {<br/>  const {<br/>    id,<br/>    value<br/>  } = document.activeElement<br/>  console.log(id);<br/>  console.log(value);<br/>}<br/>choice1.addEventListener('mouseup', onMouseUp, false);<br/>choice2.addEventListener('mouseup', onMouseUp, false);</span></pre><p id="ebeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到被点击的单选按钮的ID和被选择的单选按钮的值——应该总是为<code class="fe lv lw lx ly b">'on'</code>,因为它是被选择的单选按钮。对于复选框，我们可以编写以下HTML代码:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="9e7e" class="nh mh it ly b gy ni nj l nk nl">&lt;form&gt;<br/>  &lt;input type='checkbox' id='choice1' name='choice'&gt; Choice 1<br/>  &lt;input type='checkbox' id='choice2' name='choice'&gt; Choice 2<br/>&lt;/form&gt;</span></pre><p id="1cf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们编写以下JavaScript:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="083a" class="nh mh it ly b gy ni nj l nk nl">const choice1 = document.getElementById('choice1');<br/>const choice2 = document.getElementById('choice2');<br/>const onClick = () =&gt; {<br/>  const {<br/>    id,<br/>    checked<br/>  } = document.activeElement<br/>  console.log(id);<br/>  console.log(checked);<br/>}<br/>choice1.addEventListener('click', onClick, false);<br/>choice2.addEventListener('click', onClick, false);</span></pre><p id="0a72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们切换到监听<code class="fe lv lw lx ly b">click</code>事件，以获得当前焦点<code class="fe lv lw lx ly b">activeElement</code>的正确<code class="fe lv lw lx ly b">checked</code>值。我们从获取<code class="fe lv lw lx ly b">value</code>属性切换到获取<code class="fe lv lw lx ly b">checked</code>属性，以便为复选框获取正确的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/51d5b75a1ffa961c0ead34ac96bc4519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5CnTg4lg6I-HCYMs"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@firmbee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">威廉·艾文</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="dc6c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">window . document . fullscreenelement</h1><p id="5a75" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">fullscreenElement</code>是一个只读属性，它返回当前文档中当前全屏显示的<code class="fe lv lw lx ly b">Element</code>对象，或者如果当前没有使用全屏模式，则返回<code class="fe lv lw lx ly b">null</code>。</p><p id="7c75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它可以用来获取对其进行了某些操作的元素，以使浏览器全屏显示。例如，如果我们有以下HTML:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="602f" class="nh mh it ly b gy ni nj l nk nl">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Full Screen&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;img<br/>      src="<a class="ae ky" href="https://images.unsplash.com/photo-1537498425277-c283d32ef9db?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=757&amp;q=80" rel="noopener ugc nofollow" target="_blank">https://images.unsplash.com/photo-1537498425277-c283d32ef9db?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=757&amp;q=80</a>"<br/>      id="img"<br/>    /&gt;<br/>    &lt;script src="main.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3af0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后将以下JavaScript代码添加到<code class="fe lv lw lx ly b">main.js</code>:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="109a" class="nh mh it ly b gy ni nj l nk nl">const img = document.getElementById("img");<br/>img.addEventListener("click", async () =&gt; {<br/>  await img.requestFullscreen();<br/>  console.log(window.document.fullscreenElement);<br/>});</span></pre><p id="f576" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们单击HTML页面中的<code class="fe lv lw lx ly b">img</code>元素时，将触发<code class="fe lv lw lx ly b">click</code>事件，该事件将运行我们作为第二个参数传递给<code class="fe lv lw lx ly b">img.addEventListener</code>方法的<code class="fe lv lw lx ly b">click</code>处理程序。</p><p id="b754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在<code class="fe lv lw lx ly b">img</code>对象上调用的<code class="fe lv lw lx ly b">requestFullScreen</code>——HTML中的<code class="fe lv lw lx ly b">img</code>元素的DOM对象，将使浏览器选项卡全屏显示。</p><p id="7f6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将解析承诺，然后<code class="fe lv lw lx ly b">console.log</code>将记录<code class="fe lv lw lx ly b">window.document.fullscreenElement</code>。它应该记录<code class="fe lv lw lx ly b">img</code>元素，我们单击该元素使浏览器全屏显示，因为现在<code class="fe lv lw lx ly b">img</code>元素在被单击后以全屏模式显示。</p><p id="0e5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不能保证全屏模式操作会成功。</p><p id="92b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果全屏的许可被拒绝，那么由<code class="fe lv lw lx ly b">requestFullScreen</code>方法返回的承诺将被拒绝，一个<code class="fe lv lw lx ly b">fullscreenerror</code>事件将被触发。</p><p id="7672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">URL</code>、<code class="fe lv lw lx ly b">activeElement</code>和<code class="fe lv lw lx ly b">fullscreenElement</code>属性非常有用。属性让我们以字符串的形式获取当前加载页面的URL。</p><p id="34cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得当前聚焦的元素，我们可以使用<code class="fe lv lw lx ly b">activeElement</code>属性。我们得到当前处于焦点的<code class="fe lv lw lx ly b">input</code>、<code class="fe lv lw lx ly b">textarea</code>或<code class="fe lv lw lx ly b">select</code>元素。使用<code class="fe lv lw lx ly b">fullscreenElement</code>我们可以获得以全屏模式显示的DOM元素。</p><p id="7b7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是当浏览器处于全屏模式时显示的UI元素。</p><p id="0f47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们单击一个图像使浏览器全屏显示，那么<code class="fe lv lw lx ly b">fullscreenElement</code>就是我们单击的图像，因为它现在以全屏模式显示。</p></div></div>    
</body>
</html>