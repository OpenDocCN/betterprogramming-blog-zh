# 将微服务视为一揽子解决方案的缺陷

> 原文：<https://betterprogramming.pub/the-pitfalls-of-treating-microservices-as-a-blanket-solution-3a18150b0d5a>

## 决定微服务方法时要考虑的因素

![](img/19b85adf0200fea3181cfd122ca717ec.png)

DALL E 2022–12–20 16 . 19 . 20——一名男子坐在由电脑零件制成的椅子上

2016 年，我是我的雇主的微服务战略小组的一员。我们的任务？当客户问“微服务如何革新我们的业务”时，准备好回答

2022 年，我在纽约举行的人工智能峰会上发表演讲，来自美国邮政和联合利华的演讲者自豪地宣布，他们已经分别将服务数量减少到 900 和 1300，现在的目标是更低。

这六年发生了什么？

在本文中，我们将探讨在软件开发中使用微服务的利与弊，并考虑在决定这种方法是否适合您的团队时需要考虑的一些因素。

# 微服务的优势

微服务的想法很有吸引力:一个可部署的应用程序，只有一个职责，比如缩短文本中的 URL 或者发送电子邮件。通过抽象您的逻辑并构建几十(或几百)个这样的小服务，您可以通过简单地将它们缝合在一起来创建新的功能。

然而，意识到这种方法的缺点是很重要的。微服务通过增加移动部件和分布式组件之间的通信需求，给系统带来了复杂性和开销。此外，微服务可能导致代码重复，因为每个服务可能包含相似或相同的功能。由于系统的分布式性质，测试、调试和部署也更具挑战性。

最后，微服务可能会更加消耗资源，这可能会导致更高的资源利用率和成本。在最近纽约市人工智能峰会上的一次谈话中，USPS 和联合利华分别报告将他们的服务数量减少到 900 和 1300，并打算进一步减少。

# 将微服务视为一揽子解决方案的缺陷

微服务的最大问题之一是，它们通常被视为一揽子解决方案，没有考虑给定项目的特定需求和约束。不管添加到系统中的服务的规模有多大，更多的服务意味着更多的复杂性，这意味着管理这种复杂性。

资源有限的小型团队应该有一个更大的服务来处理所有的电子邮件格式化和发送，而不是将此功能分散到多个微服务中。这可以带来更好的代码重用、新工程师更容易入职，以及管理部署和编排运行的应用程序所需的更少开发工作。

一般来说，以人为本而不是技术为中心的思维方式将服务设计作为软件架构的一部分是很重要的。软件开发的策略应该足够灵活，以服务于业务需求，而不是受技术意识形态的支配。

# 决定微服务方法时要考虑的因素

当决定是否为新功能或重构使用微服务时，重要的是要仔细研究和规划，记住以下约束:

*   团队结构:谁将管理新服务的代码库？了解其工作原理的工程师是否会有足够的冗余？对于新的服务，您是否需要定期让工程师加入或离开？了解整个系统的人越少，你就越需要一个更简单的系统。例如，如果您有一个开发利用 50 个微服务的新颖应用程序的工程师，他们没有留下任何文档就离开了，那么将很难有人进来并跟上进度。然而，如果您有一个工程师使用一组标准的库来构建一个包含的、可部署的“宏服务”，那么入职或接管将会容易得多。
*   部署和编排体验:如果您的架构中有大量的服务，那么监控、部署、回滚、扩展等日常任务将与部署单个整体服务所涉及的任务非常不同。要管理大量的服务并有效地监控它们，您需要一个经验丰富的团队。
*   业务环境:当决定是否使用微服务开发新特性或重构时，考虑项目的业务环境是很重要的。这包括项目的规模和复杂性、可用资源(包括团队规模和专业知识)以及投资/成本的预期回报等因素。

六年前，我们对将一切重构为微服务兴奋不已。现在，我们中的许多人正在偿还比预期更高的技术债务。这是一个很好的教训，如果不是反复出现的话:新技术和哲学令人兴奋，但需要具体实施，并具有商业价值，而不是仅仅出于兴奋。