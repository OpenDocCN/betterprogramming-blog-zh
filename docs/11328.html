<html>
<head>
<title>Leave Aside Git Checkout. Consider Git Switch for a Change</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抛开Git Checkout不谈。改变一下，考虑Git开关</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/leave-aside-git-checkout-consider-git-switch-for-a-change-7849df8714b0?source=collection_archive---------3-----------------------#2022-03-09">https://betterprogramming.pub/leave-aside-git-checkout-consider-git-switch-for-a-change-7849df8714b0?source=collection_archive---------3-----------------------#2022-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a5b3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在不签出的情况下在分支之间切换</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1f2054e3c80fcd11cf9e40b37c1b9132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ye4kcynKFGPVzkYm"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">罗斯·芬登在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="26c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不用看得更远，你能直接说出<code class="fe lv lw lx ly b">git checkout</code>命令是干什么的吗？我问过我的团队和我自己。包括我在内，没有人能给出一个完整的答案。</p><p id="a7f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，想到的是在现有分支之间切换。运行命令<code class="fe lv lw lx ly b">git checkout main</code>将从电流切换到分支<em class="lz">主</em>。这是一个正确的答案，但还不完整。</p><p id="816f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该命令可以做的另一件事是切换到历史日志中的某个提交。运行命令<code class="fe lv lw lx ly b">git checkout 21f25fe0</code>将使用SHA散列<code class="fe lv lw lx ly b">21f25fe0</code>带来commit中所做更改的状态。</p><p id="29b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，还是缺少了一些东西。Git checkout命令可以做更多的事情。可以重置文件中未暂存的更改。运行<code class="fe lv lw lx ly b">git checkout README.md</code>将删除任何没有添加到索引中的更改。</p><p id="b725" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，知道了所有这些，感觉这是正确的工程解决方案吗？相反。这给人一种我们正在处理的巨大遗产的印象。这个命令根据参数做三件事。我们可以用什么来代替？</p><h1 id="c44b" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">在分支之间切换</h1><p id="f6ee" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">当我们需要在分支之间导航时，我们习惯了命令<code class="fe lv lw lx ly b">git checkout</code>。Git有一个专用的命令。通过运行<code class="fe lv lw lx ly b">git switch main</code>,我们能够在分支之间导航。这看起来很合理，不是吗？</p><p id="ff43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">checkout命令也可以接受参数<code class="fe lv lw lx ly b">-b</code>。当我们想要创建一个新的分支并立即切换到它时，我们使用它。命令<code class="fe lv lw lx ly b">git checkout -b new_branch</code>将创建一个新的分支，然后切换到它。这是一个方便的操作，一次做两个动作。好消息是命令<em class="lz">开关</em>也有这个选项。参数是<code class="fe lv lw lx ly b">-c</code>，命令<code class="fe lv lw lx ly b">git switch -c new_branch</code>将完全一样。</p><h1 id="56a2" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">跳转到提交</h1><p id="f018" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">当你需要回到过去进行某个提交时，我们也使用checkout命令。我们指定一个我们想要检查的修订，文件将接收到提交的状态。如果我们想知道什么时候东西坏了，这是运行bug调查的一个方便的选项。</p><p id="2fd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此类功能已被另一个命令覆盖。当我们运行<code class="fe lv lw lx ly b">git reset 21f25fe0</code>时，文件将从版本<code class="fe lv lw lx ly b">21f25fe0</code>接收状态。这些命令将在指定提交时恢复文件的状态。并且在该提交之后所做的改变将被表示在工作目录中。</p><p id="ee68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">reset命令与checkout命令的作用相同。但是，最后的结果看起来不一样。运行reset命令后，我们保持在同一分支中，同时运行checkout命令后，我们结束于<em class="lz">分离</em>状态。可以检查代码并进行修改，但是没有专门的分支可以继续工作。说实话，我没发现超脱状态有什么实际用途。当git的整个概念都是有状态的时，为什么还需要这个呢？</p><h1 id="53bf" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">重置更改</h1><p id="dca7" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">最后，checkout命令能够在文件级恢复工作目录中的更改。这是一个有趣的时刻。它只恢复工作目录中的文件。将文件添加到索引后，它不会对它们做任何事情。你为什么需要这样的行为？有什么选择呢？</p><p id="7e87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们需要重置更改，显而易见的答案是使用reset命令。如果我们运行命令<code class="fe lv lw lx ly b">git reset</code>,所有暂存的变更都将从索引中删除。如果要清理工作目录，需要添加一个参数<code class="fe lv lw lx ly b">--hard</code>。命令<code class="fe lv lw lx ly b">git reset --hard</code>将从工作目录和索引中删除所有更改。</p><p id="5a7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是硬复位有一个问题。不可能在单个文件或特定目录下运行它。它只在当前目录下执行。为什么这样做是另一个好问题。好消息是有一个解决方案。</p><p id="3c60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">命令<code class="fe lv lw lx ly b">git restore</code>能够在文件级重置已分级和未分级的更改。例如，命令<code class="fe lv lw lx ly b">git restore README.md</code>删除对工作目录中文件<code class="fe lv lw lx ly b">README.md</code>的所有修改。添加参数<code class="fe lv lw lx ly b">--staged</code>将删除从舞台上删除的文件。</p><p id="b839" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">restore命令已经处于试验状态有一段时间了。然而，这意味着它在未来可能会改变。但最有可能的是，随着需求的增加，它会趋于稳定。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="76a0" class="ma mb it bd mc md ne mf mg mh nf mj mk jz ng ka mm kc nh kd mo kf ni kg mq mr bi translated">结束语</h1><p id="1290" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">checkout命令是一种传统。软件工程师出于习惯一直使用它。但是当他们必须向Git新手解释时，就会产生很多困惑。显然，checkout命令有很多替代方法。那为什么不开始使用它们呢？</p></div></div>    
</body>
</html>