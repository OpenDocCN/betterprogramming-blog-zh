<html>
<head>
<title>An Animated Pie Chart in SwiftUI 2 Using the Combine Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 2中使用Combine框架的动画饼图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-animated-pie-chart-in-swiftui-2-using-the-combine-framework-f3c277f3118e?source=collection_archive---------8-----------------------#2020-11-09">https://betterprogramming.pub/an-animated-pie-chart-in-swiftui-2-using-the-combine-framework-f3c277f3118e?source=collection_archive---------8-----------------------#2020-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8782" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我的图表系列的第5部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/07b359ae0ef77a7dbbf578afc450f67f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nmVkxdCA4B6PxUJxzDtmgA.gif"/></div></div></figure><p id="cce9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">好的，我希望你是从第一部分来到这里的。如果你错过了，那么你可以回到这里:</p><div class="lq lr gp gr ls lt"><a href="https://medium.com/better-programming/an-animated-self-sorting-pie-chart-in-swiftui-2-0-24db465f9413" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">SwiftUI 2.0中的一个动画的、自动排序的饼图</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">在这篇文章中，我想建立一个动画自动着色饼图，其中有一个可视化排序。换句话说，我…</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ks lt"/></div></div></a></div><p id="8361" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么我们在这里得到了什么？嗯，我从版本1退了一步，非常仔细地思考了一下。也许这是一个很好的例子，说明你不应该使用一个可观察的物体，或者至少用不同的方式使用它。在此基础上，我回到了绘图板:我认为我可以做得更好。</p><p id="5484" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">问题是，在尝试重画饼图之前，我们需要更新结构中的几个变量。使用一个被观察的对象，只要我们为第一个切片设置了新值，它就开始更新视图——不，我们需要再思考一下。</p><p id="e273" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我还想绘制切片，并制作动画；我不喜欢我们最后得到的颤抖的图表。让我们后退一步，重新审视这个问题。我们需要跳出框框思考。最终我想要一个馅饼，一整个馅饼。里面有不同切片的馅饼。但是我不想用bam动画画切片；我希望他们成长为图片，就像条形图比赛。</p><p id="585c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我已经提到过，使用一个<code class="fe mi mj mk ml b">observedObject</code>结构是行不通的。这个结构本身是可以的，但是我需要稍微松散地将它链接到饼图。只有在重新计算所有需要调整大小的切片时，我才需要更新饼图本身。</p><p id="0601" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">24小时后，我设法把这些放在一起。很好看，比上一部好多了。这是对神经过敏的一个很大的改进，尽管我承认我没有整理它——那会弄乱配色方案。显然，我只是在这里自动生成了标签和值。</p><p id="a934" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为此，我完全重写了主循环来显示图表，并在这个过程中引入了一个新的结构。我修复了rejig中的一个bug，并将struct本身移到了principle SwiftUI 2.0文件中。(好吧，这并不理想。)这里是新的代码库，一个单独的文件。你真的需要重构它，让它变得更加结构化。排序例程也在那里；你可以尝试一下额外的学分。</p><p id="39d9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">注意:</strong>如果您复制、粘贴并运行这段代码，请注意它会在大约18次迭代后崩溃，因为rejig函数将无法完成循环。这是代码的一个限制。可以通过限制您尝试添加的分段数量或修复rejig来避免崩溃，这样您最终总是得到一个一直延伸到360度的切片。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="5497" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这让我想到了这篇文章的结尾。</p><p id="b2c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>