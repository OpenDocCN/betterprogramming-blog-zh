<html>
<head>
<title>TableViews in SwiftUI With LazyVStack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带LazyVStack的SwiftUI中的表视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tableviews-in-swiftui-with-lazyvstack-8de9d8bc17ee?source=collection_archive---------10-----------------------#2020-07-24">https://betterprogramming.pub/tableviews-in-swiftui-with-lazyvstack-8de9d8bc17ee?source=collection_archive---------10-----------------------#2020-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="01c2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解LazyVStacks以及它们与常规VStacks的不同之处</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/196bc88c99b790e5b80bc893c91698fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TdfsO-nesErtjJ94"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jdubs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">王占山</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="0c7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在WWDC 2020上，苹果推出了<code class="fe lv lw lx ly b">LazyVStack</code>。在我看来，由于在性能上的优势，它是<code class="fe lv lw lx ly b">VStack</code>的改进版。</p><p id="8185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">LazyVStack</code>的行为与<code class="fe lv lw lx ly b">VStack</code>相似，除了懒惰。在许多情况下，“懒惰”意味着如果你在屏幕上看不到它，它就没有被加载。这反过来又提高了性能。另一方面，<code class="fe lv lw lx ly b">VStack</code>装载一切。</p><p id="feb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请这样想:如果您有大量数据，理想的方法是只加载您看到的内容。这就是<code class="fe lv lw lx ly b">LazyVStack</code>的作用。当你滚动时，你将加载数据。</p><p id="2ed8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，如果您有大量数据，请使用<code class="fe lv lw lx ly b">LazyVStack</code>,如果您有相对少量的数据，请使用<code class="fe lv lw lx ly b">VStack</code>。</p><blockquote class="lz"><p id="dd1c" class="ma mb it bd mc md me mf mg mh mi lu dk translated"><em class="mj">“将子视图排列成垂直增长的行的视图，仅在需要时创建项目。”— </em> <a class="ae ky" href="https://developer.apple.com/documentation/swiftui/lazyvstack" rel="noopener ugc nofollow" target="_blank"> <em class="mj">苹果开发者</em> </a></p></blockquote></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="6eb3" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">先决条件</h1><p id="bd4e" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">要学习本教程，您需要了解以下方面的一些基本知识:</p><ul class=""><li id="22f8" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">迅速发生的</li><li id="73ca" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">至少Xcode 12+</li></ul><p id="0f07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oc">注意:这只支持iOS 14+。</em></p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="9eaa" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">LazyVStack入门</h1><p id="3ab2" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">用法类似于<code class="fe lv lw lx ly b">VStack</code>的，我把这个做得更进一步，在玩<code class="fe lv lw lx ly b">LazyVStack</code>的时候让它变得更有趣。</p><p id="4f3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">场景是这样的:现在是2024年，你最近被一家公司雇佣来建立一个员工数据库。每台iPhone设备的最低iOS至少是iOS16+,对此的要求是它不应该落后。你瞬间想到<code class="fe lv lw lx ly b">LazyVStack</code>。请记住，最低iOS要求是iOS14+。</p><p id="b2ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经准备好动手编写代码了。为了让它看起来真实，我写了一个代码，随机生成一些ID:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/e891f753a947b0f5e057725061cddc4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wmZdJu69vkzykjPRaCZyQ.png"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="5847" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">滚动LazyVStack</h1><p id="c75a" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">快好了！唯一的问题是它不能滚动。这应该很容易解决。包在里面<code class="fe lv lw lx ly b">ScrollView</code>:</p><pre class="kj kk kl km gt og ly oh oi aw oj bi"><span id="9562" class="ok ms it ly b gy ol om l on oo">ScrollView {<br/>...<br/>...<br/>}</span></pre><p id="a276" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们来看看滚动效果。这难道不会让你想起<code class="fe lv lw lx ly b">UITableView</code>？唯一的区别是代码更短，不需要使用委托和数据源。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/384f2f47884a2342d00dcbdd797033f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/1*km3-fifIb3j1_K2mEpM21w.gif"/></div></figure><p id="c9fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只花了五分钟。因为你是按小时计酬的，所以你想通过更多的定制让它看起来更好。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="f4da" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">LazyVStack定制</h1><p id="b82e" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">加个表头怎么样？现在看起来应该更像一辆<code class="fe lv lw lx ly b">UITableView</code>。</p><p id="ea8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一个名为<code class="fe lv lw lx ly b">pinnedViews</code>的额外参数，并通过将<code class="fe lv lw lx ly b">.sectionHeaders</code>作为参数值来表明您想要一个标题。您甚至可以添加带有<code class="fe lv lw lx ly b">.sectionFooters</code>的页脚:</p><pre class="kj kk kl km gt og ly oh oi aw oj bi"><span id="2576" class="ok ms it ly b gy ol om l on oo">LazyVStack(alignment: .leading, pinnedViews: [.sectionHeaders]) {<br/>...</span></pre><p id="75cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，我们现在必须把所有的东西都包在<code class="fe lv lw lx ly b">Section</code>里面:</p><pre class="kj kk kl km gt og ly oh oi aw oj bi"><span id="3a04" class="ok ms it ly b gy ol om l on oo">LazyVStack(alignment: .leading, pinnedViews: [.sectionHeaders]) {<br/>    Section(header: Text("Company XYZ").padding()) {<br/>        ForEach(1...100, id: \.self) { value in<br/>        ...<br/>        ...</span></pre><p id="ebd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一的问题是背景颜色是<code class="fe lv lw lx ly b">.clear</code>，这里有很大的定制灵活性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/e5093717fa595c6bb7c1d2958152dd46.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/1*voctVZeNqReblz6O_xz4_w.gif"/></div></figure><p id="09ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方法是创建您的视图并定制视图中的所有内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="5b4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在使用新创建的<code class="fe lv lw lx ly b">HeaderView</code>作为标题:</p><pre class="kj kk kl km gt og ly oh oi aw oj bi"><span id="5fa2" class="ok ms it ly b gy ol om l on oo">Section(header: HeaderView()) {<br/>...</span></pre><p id="5a85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与之前的标题相比，您现在应该会看到一个更吸引人的标题:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/a4018991ab912bf3151c1335bae792fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/1*ZeHuUcVR2tV1sDE8C79FHQ.gif"/></div></figure><p id="9e9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干得好。我相信贵公司会对这个结果非常满意。</p></div></div>    
</body>
</html>