<html>
<head>
<title>How to Build an API in 10 Minutes?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在10分钟内搭建一个API？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-an-api-in-10-minutes-e4cb0401c465?source=collection_archive---------7-----------------------#2021-11-16">https://betterprogramming.pub/how-to-build-an-api-in-10-minutes-e4cb0401c465?source=collection_archive---------7-----------------------#2021-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="79c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高工程效率的有前途的服务</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3761bdc7bcb0fc0c7adcb72267be54a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ybu9fEJ8EG4SY9JGpycwmA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thisisengineering?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">在</a><a class="ae ky" href="https://unsplash.com/s/photos/software-engineer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="d72f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名热衷于移动平台的程序员，我不断努力构建我的解决方案的后端部分。即使是简单的，也需要安装框架，了解基本原理。我知道Flask和Ruby on Rails很简单。他们使用流行的编程语言Python和Ruby。它们旨在快速开发和快速交付解决方案。</p><p id="590b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，作为一名工程师，你必须花时间去熟悉它。模型-视图-控制器架构在web应用程序中是如何工作的？如何将响应发送回客户端？如何添加授权以及如何使用会话？我们会找到所有的答案，但这需要一些时间。在10分钟内剥离一个新的端点不是很好吗？</p><h1 id="f0c8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何</h1><p id="dec0" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">多个云提供商有专门的服务来以无服务器的方式构建端点。您需要定义它返回的响应格式，这就是它。基本功能变成活动的。让我们来探索一下使用AWS的服务<a class="ae ky" href="https://aws.amazon.com/api-gateway/" rel="noopener ugc nofollow" target="_blank"> API Gateway </a>可以实现什么。</p><blockquote class="ms mt mu"><p id="17e6" class="kz la mv lb b lc ld ju le lf lg jx lh mw lj lk ll mx ln lo lp my lr ls lt lu im bi translated">Amazon API Gateway是一个完全托管的服务，使开发人员可以轻松地创建、发布、维护、监控和保护任何规模的API。</p></blockquote><p id="bb97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们创建新的API端点时，我们可以选择我们想要的API类型:HTTP、REST或WebSocket。因为REST API要求最高，并且满足大多数web应用程序，所以我们出于学习目的选择了它。</p><p id="85fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要为它们创建资源和必要的方法。这些是REST API的主要支柱。我们创建一个资源<code class="fe mz na nb nc b">/products</code>并添加一个方法<code class="fe mz na nb nc b">GET</code>。因此，有了这个端点，我们就能够检索产品列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/6e2d63387d3e0bdf2210083929ec1ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9iCATZdwRCsnWgFMQKsdwQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">API网关资源仪表板</p></figure><p id="3d2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在为一个资源创建了一个方法之后，我们得到了一个完整的流程概览，就像上面的例子一样。它由四个部分组成:</p><ol class=""><li id="d2c5" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><strong class="lb iu">方法要求。</strong>在该块中，将执行与请求相关的所有步骤。授权、请求头、API键、查询参数、请求体和其他部分都是可用。我们可以在这里设置必要的验证，并确保只处理满足要求的请求。这部分看起来像入口。</li><li id="1acb" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><strong class="lb iu">整合请求。</strong>这一步定义了端点的业务逻辑。我们在这里定义需要做什么。可以将请求转发到另一个HTTP端点，调用Lambda函数，或者调用内部AWS服务。这是我们API的引擎部分。我们还可以选择模拟类型。这意味着我们什么也不做，直接进入响应部分。</li><li id="7828" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><strong class="lb iu">整合响应。</strong>在这里我们必须定义映射到响应格式的数据。在与Lambda函数或外部HTTP端点集成的情况下，我们需要转换接收到的数据。在模拟响应的情况下，我们以JSON格式硬编码响应。</li><li id="9362" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><strong class="lb iu">方法响应。</strong>在这里，我们将来自集成响应的数据与响应状态和标题放在一起。这是流动的出口。客户端从该端点接收的信息在这一步定义。</li></ol><p id="2ed5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们单击按钮TEST，我们将检查端点是如何工作的，并将获得以下日志。</p><pre class="kj kk kl km gt ns nc nt nu aw nv bi"><span id="1dc4" class="nw lw it nc b gy nx ny l nz oa">Nov 14, 2021 11:59:03 : HTTP Method: GET, Resource Path: /products<br/>Nov 14, 2021 11:59:03 : Method request headers: {}<br/>Nov 14, 2021 11:59:03 : Method response body after transformations: {<br/>  "products" : [<br/>  {<br/>    "id" : 1,<br/>    "name" : "White Shirt"<br/>  }<br/>]<br/>}<br/>Nov 14, 2021 11:59:03 : Method response headers: {Content-Type=application/json}<br/>Nov 14, 2021 11:59:03 : Successfully completed execution<br/>Nov 14, 2021 11:59:03 : Method completed with status: 200</span></pre><p id="70e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到端点<code class="fe mz na nb nc b">GET /products</code>工作并返回一个伪JSON响应。我们几乎准备好了。我们需要做的最后一步是让我们的API活起来。</p><h1 id="84f8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">让它活起来</h1><p id="4e46" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">API Gateway有一个<em class="mv">阶段</em>的概念。我们可以定义多个阶段:开发、筹备、生产，应有尽有。这些是API所在的独立环境。为了将API部署到stage，我们导航到资源，并从Actions按钮选择项目deploy API。很快，您的API将会投入使用。因此，我们当前对端点所做的所有更改，在我们进行部署之前都是不可见的。</p><p id="2f81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每一级可以具有不同且独立的配置。我们可以设置节流、防火墙、高级日志记录等等。例如，我们的测试环境将使用简化的设置，而生产阶段必须具有增强的安全性。</p><h1 id="57ef" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="2da9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">事实上，AWS的API Gateway是一个强大的服务。仅用了10分钟，我们就能制作一个实时端点。由于这项服务是无服务器的，我们只为我们使用的东西付费。如果没有流量，我们不需要像永久运行的服务器那样支付任何费用。</p><p id="f208" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">API Gateway具有丰富的特性。我们没有在这里一一介绍。有很好的官方文档和教程可用。但是值得强调其中的几个。可以建立自定义授权流、定义响应模型模式、启用CORS和防火墙、创建和导出API文档。此外，通过使用AWS SDK，我们可以将API网关端点集成到现有的应用程序中。</p><p id="1c89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您知道如何快速启动并构建您的API。不要犹豫去尝试它。编码快乐！</p></div></div>    
</body>
</html>