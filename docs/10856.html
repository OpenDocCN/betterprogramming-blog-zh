<html>
<head>
<title>Scheduling Cron Tasks in Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Linux中调度Cron任务</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-schedule-cron-tasks-in-linux-fc605bf4911e?source=collection_archive---------14-----------------------#2022-01-31">https://betterprogramming.pub/how-to-schedule-cron-tasks-in-linux-fc605bf4911e?source=collection_archive---------14-----------------------#2022-01-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="26af" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">编辑、列出所有任务和删除</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fef31c18f208291dc1bf1edc6a52053d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioYKKmyqmihJ-Z0M0z12FQ.png"/></div></div></figure><p id="032c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在你不能一个人做所有的事情，如果你想从你的一天中得到更多，自动化你每天做的事情，这样你就不用做了。</p><p id="d355" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重要数据、系统日志、运行特定脚本的备份。</p><p id="7b93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以使用crontab在<a class="ae ln" href="https://blog.devgenius.io/6-essential-commands-to-get-better-at-linux-system-you-should-know-d1a85b175fde" rel="noopener ugc nofollow" target="_blank"> <em class="lo"> Linux </em> </a>中调度作业，crontab是每个类UNIX操作系统中都有的软件实用程序，用于在特定时间调度任务。</p><p id="7712" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Cron以希腊单词“Chronos”命名，意思是时间。它是按照特定计划执行任务的命令列表。</p><p id="b2a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">crontab是您想要调度的任务列表的编辑器。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="3b33" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated"><strong class="ak">crontab的语法</strong></h1><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="d269" class="mt lx iq mp b gy mu mv l mw mx">* * * * * command</span><span id="441c" class="mt lx iq mp b gy my mv l mw mx">* * * * * /path/to/script.sh</span></pre><p id="c124" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里星号(* * * * *)用于匹配<em class="lo">分钟</em>、<em class="lo">小时</em>、<em class="lo">一月中的日子</em>、<em class="lo">一年中的月份</em>、<em class="lo">一周中的日子</em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/fe117c2389680b03a0a2aafd8646e9aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*-LMw5HpJyGgAixbgXxvg6Q.png"/></div></figure><p id="a18d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令可以是您希望在特定时间执行的脚本。</p><p id="3048" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看在crontab中编辑、列出和删除作业的命令。</p><h1 id="c66b" class="lw lx iq bd ly lz na mb mc md nb mf mg jw nc jx mi jz nd ka mk kc ne kd mm mn bi translated">在crontab中编辑</h1><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="30ff" class="mt lx iq mp b gy mu mv l mw mx">crontab -u &lt;your_username&gt; -e</span></pre><p id="dc24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4cd5" class="mt lx iq mp b gy mu mv l mw mx">crontab -e</span></pre><p id="c33c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一次，它会要求你选择一个编辑器，你可以选择nano，它非常容易使用，每个Linux系统都有。</p><p id="2367" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">示例1 : </strong>我想发送一个Linux通知，提醒我在大部分时间里用笔记本电脑工作时眨眼——科学表明，你在屏幕上工作时经常忘记眨眼——这是真的。</p><p id="edb1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设我想每25分钟发送一次通知。</p><p id="44c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">命令将是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/cbd6de6ce5c4bdd5b6357a35c21f8315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iriOqzIQeeqs45-OeOD7aw.png"/></div></div></figure><p id="cbb5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是对Linux的通知，与crontab无关。<br/> <code class="fe ng nh ni mp b">Notify-send</code>将期待两个论点:</p><ol class=""><li id="865b" class="nj nk iq kt b ku kv kx ky la nl le nm li nn lm no np nq nr bi translated">通知的标题</li><li id="5a11" class="nj nk iq kt b ku ns kx nt la nu le nv li nw lm no np nq nr bi translated">2.通知正文</li></ol><p id="1a42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以”👀眼睛健康”是<code class="fe ng nh ni mp b">Title</code>和“记得眨眼！！!"是<code class="fe ng nh ni mp b">Body</code></p><p id="a5d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ng nh ni mp b">XDG_RUNTIME_DIR=/run/user/$(id -u)</code> —这里的<code class="fe ng nh ni mp b">XDG_RUNTIME_DIR</code>是一个环境变量，在你登录时自动设置。当你从crontab运行<code class="fe ng nh ni mp b">notify-send</code>命令时，你必须指定这个变量——因为它允许程序在用户目录中存储临时文件。但是当你给出任何不需要与显示器交互的脚本或命令时，你不需要指定它。</p><p id="419c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ng nh ni mp b">* * * * *</code> —这将在每分钟、每小时、每天、每月、每年执行。</p><p id="f47e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是您希望每25分钟执行一次该命令。所以你可以用25分钟匹配来计算。它将是:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="6bb2" class="mt lx iq mp b gy mu mv l mw mx">*/25 * * * *</span><span id="983c" class="mt lx iq mp b gy my mv l mw mx">/ →for step value<br/>- → for range vaule<br/>, → for seprating value</span></pre><p id="7a10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想对这种搭配有更深的了解，可以看看下面的网站。</p><p id="2484" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以从这里找到(* * * * *)的值【https://crontab.tech/ T2】</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/9b14e43239f1ac15a0b3a3153444bf5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XjPS3k7kuGTQNJx3AAP0Ow.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">来源:https://crontab.tech/<a class="ae ln" href="https://crontab.tech/" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="f87a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以这将每25分钟发送一次通知。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/626b9c49d045aa1f92bc08768e3e6eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*lm9jXqjyDCjzK8qTxWUBPA.png"/></div></figure><p id="512a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">例2: </strong>可以将crontab的输出或任何运行时错误保存在txt文件中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/5a7383a58806faf930da98415f3b635f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*Agzpm6fKy-aCR1AbUmGlfw.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">在crontab文件中，注意:# is注释将被忽略</p></figure><p id="b2e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以crontab将在每天12:45运行，并在<code class="fe ng nh ni mp b">crontab_log.txt</code>文件中发送echo命令输出</p><p id="8e7b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">记住:<br/> &gt; → single表示如果不存在将创建一个新文件并覆盖输出。(overwrite)<br/>&gt;&gt;→double表示如果不存在将创建一个新文件并追加输出。(附加)</p><h1 id="caa8" class="lw lx iq bd ly lz na mb mc md nb mf mg jw nc jx mi jz nd ka mk kc ne kd mm mn bi translated">在crontab中列出所有任务</h1><p id="0f06" class="pw-post-body-paragraph kr ks iq kt b ku oe jr kw kx of ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">这将列出crontab中为该特定用户写入的所有作业，如果没有指定，它将为活动的登录用户运行。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="c55b" class="mt lx iq mp b gy mu mv l mw mx">crontab -u &lt;your_username&gt; -l</span></pre><p id="a28c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="062c" class="mt lx iq mp b gy mu mv l mw mx">crontab -l</span></pre><h1 id="0e08" class="lw lx iq bd ly lz na mb mc md nb mf mg jw nc jx mi jz nd ka mk kc ne kd mm mn bi translated">删除crontab作业</h1><p id="38b1" class="pw-post-body-paragraph kr ks iq kt b ku oe jr kw kx of ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">这将删除整个任务列表。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4496" class="mt lx iq mp b gy mu mv l mw mx">crontab -r</span></pre><h2 id="1fe2" class="mt lx iq bd ly oj ok dn mc ol om dp mg la on oo mi le op oq mk li or os mm ot bi translated">crontab中有一些内置的字符串。</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="f219" class="mt lx iq mp b gy mu mv l mw mx">@hourly → command →will run command every hour ( 0 * * * * )<br/>@midnight → ( 0 0 * * *)<br/>@daily → ( 0 0 * * *) same as midnight<br/>@weekly → ( 0 0 * * 0)<br/>@monthly →( 0 0 1 * *)<br/>@yearly →(0 0 1 1 *)<br/>@reboot →run cron job at every reboot</span></pre></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="f46d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">示例3: </strong>使用crontab运行python脚本</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/b7dd0a890273a690bc17b0dd00c345fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*VaLDUsHqKcsJFYUVL4U4bQ.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">在crontab文件中，crontab使用24小时制，因此下午2:45意味着14:45</p></figure><p id="bb4c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将在每天上午10:45运行<code class="fe ng nh ni mp b">backup.py</code> python文件</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="9e8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">示例4: </strong>使用crontab运行bash脚本</p><p id="34b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看如何在Linux中自动更改mac地址</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/6b1b387dc1684525a12915dc4844e3e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*wjd1UyjdUcRTRXBKfr4MyA.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">在crontab文件中</p></figure><p id="06e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我配置了change-mac命令来运行我的更改mac地址bash脚本。</p><p id="654c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在遵循这一系列命令</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/d6e50e215e460968335386f9f64836d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*63uZFgFNzdHru1HcIeBLBQ.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">现在，这些命令将从命令行运行</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/f5e5046b9dcc3f52985e2c642b755ae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*YPQDi57w4ddmnW_fO9ty8w.png"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">在Linux中改变mac地址的bash脚本</p></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="c9aa" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated"><strong class="ak">总结</strong></h1><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4866" class="mt lx iq mp b gy mu mv l mw mx">→ cron is used to schedule jobs in Linux OS<br/>→ crontab is used to edit , list , remove crontab in Linux for cron.<br/>→ crontab -e → for edit<br/>→ crontab -l → for listing jobs<br/>→ crontab -r → fro removing crontab<br/>→ Some predefined strings like @daily ( 0 0 * * * )</span></pre></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="569b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">资源</h1><ol class=""><li id="0f9b" class="nj nk iq kt b ku oe kx of la oy le oz li pa lm no np nq nr bi translated">更改mac地址的Shell脚本代码:<a class="ae ln" href="https://github.com/techdobz/scripts" rel="noopener ugc nofollow" target="_blank">https://github.com/techdobz/scripts</a></li></ol><p id="dfbe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.查找值(* * * *) Crontab语法:<a class="ae ln" href="https://crontab.tech/" rel="noopener ugc nofollow" target="_blank">https://crontab.tech/</a></p></div></div>    
</body>
</html>