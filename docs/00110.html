<html>
<head>
<title>Connect From Your Local Machine to a PostgreSQL Database in Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从本地机器连接到Docker中的PostgreSQL数据库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/connect-from-local-machine-to-postgresql-docker-container-f785f00461a7?source=collection_archive---------1-----------------------#2018-03-19">https://betterprogramming.pub/connect-from-local-machine-to-postgresql-docker-container-f785f00461a7?source=collection_archive---------1-----------------------#2018-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3e5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单的方法让你开始使用Docker</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/58504b0b92ae1d2692289d9ef490f09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a9qoq1sVtPYgCrT0KSIk9w.png"/></div></div></figure><p id="944c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Docker使得构建PostgreSQL数据库管理系统变得非常容易。使用以下命令，可以在服务器或本地计算机上启动PostgreSQL Docker容器:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="a691" class="lv lw it lr b gy lx ly l lz ma">$ docker run -d -p 5432:5432 --name my-postgres -e POSTGRES_PASSWORD=mysecretpassword postgres</span></pre><p id="8fc9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该命令将启动一个PostgreSQL数据库，并使用以下模式映射端口:<code class="fe mb mc md lr b">-p &lt;host_port&gt;:&lt;container_port&gt;</code>。<br/>我们容器的端口5432将被映射到我们主机或服务器的端口5432上。</p><p id="38ee" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">访问主机或服务器上的容器。我们将在PostgreSQL容器中创建一个数据库。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="ad5d" class="lv lw it lr b gy lx ly l lz ma">$ docker exec -it my-postgres bash</span></pre><p id="5ff4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在你在你的容器里面。我们可以访问postgres并创建数据库。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="f05f" class="lv lw it lr b gy lx ly l lz ma">root@cb9222b1f718:/# psql -U postgres<br/>psql (10.3 (Debian 10.3-1.pgdg90+1))<br/>Type "help" for help.</span><span id="e9f1" class="lv lw it lr b gy me ly l lz ma">postgres=# CREATE DATABASE mytestdb;<br/>CREATE DATABASE<br/>postgres=#\q</span></pre><p id="7444" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们完了。您可以退出您的容器(<code class="fe mb mc md lr b">\q</code>)并转到您的本地机器。这里您需要安装一些PostgreSQL客户端工具:</p><ul class=""><li id="df8e" class="mf mg it kw b kx ky la lb ld mh lh mi ll mj lp mk ml mm mn bi translated">PSQL (CLI)</li><li id="6043" class="mf mg it kw b kx mo la mp ld mq lh mr ll ms lp mk ml mm mn bi translated">PgAdmin</li><li id="cbc0" class="mf mg it kw b kx mo la mp ld mq lh mr ll ms lp mk ml mm mn bi">…</li></ul><p id="2858" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我的PostgreSQL容器在我的本地机器上运行，这解释了为什么我要连接本地主机。如果它运行在特定的服务器上，请使用您的服务器IP。(对于Windows docker-machine，您可能需要使用192.168.99.100)。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="026b" class="lv lw it lr b gy lx ly l lz ma">$ psql -h localhost -p 5432 -U postgres -W                       Password for user postgres:                       <br/>psql (9.5.5, server 10.3 (Debian 10.3-1.pgdg90+1))                       WARNING: psql major version 9.5, server major version 10.                                Some psql features might not work.                       <br/>Type "help" for help.                                               postgres=# \l<br/>                                 List of databases<br/>   Name    |  Owner   | Encoding |  Collate   |   Ctype    |  <br/>-----------+----------+----------+------------+------------+<br/> mytestdb  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |<br/> postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |<br/> template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 |<br/>           |          |          |            |            |<br/> template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | <br/>           |          |          |            |            | <br/>(4 rows)</span></pre><p id="9be7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过身份验证后，您将看到mytestdb在可用数据库列表中。现在你可以使用<code class="fe mb mc md lr b">\c</code>连接你的数据库。</p><p id="0217" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于像PgAdmin这样的工具，您可以定义您的连接。此外，如果您的容器在其他地方运行，您必须用您的服务器IP替换localhost。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/364ab931a92fae54a5c7878f3a6f1c8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zx-acdwe5JNJqH39wVLIXg.png"/></div></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">创建服务器连接</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/74412446a2a9e49b5442871e4e2d053b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XvZ1nFvRB-ZPvLT3GgRXCg.png"/></div></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">定义您的联系</p></figure><p id="2637" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">保存连接，就可以连接到运行在PostgreSQL Docker容器中的数据库了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/f360b31bbb756f90c457e0cbe776c655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jKKXgV2-ElByylgMKwuxw.png"/></div></div></figure><p id="2cf9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个帖子是基于一个流行的<a class="ae na" href="https://stackoverflow.com/questions/37694987/connecting-to-postgresql-in-a-docker-container-from-outside/37704532#37704532" rel="noopener ugc nofollow" target="_blank">所以我给的答案</a>。希望有帮助！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.buymeacoffee.com/dZb8fLN"><div class="gh gi nb"><img src="../Images/83dc7212ef8502659c81086ad58b8d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*bk_C8Um34KavCkO2yzMCZg.png"/></div></a><p class="mu mv gj gh gi mw mx bd b be z dk translated">如果真的对你有帮助…:)</p></figure></div></div>    
</body>
</html>