<html>
<head>
<title>3 Crucial Things to Know About NavigationLink in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于SwiftUI中的NavigationLink需要了解的3件重要事情</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-crucial-things-to-know-about-navigationlink-in-swiftui-cb15d791a55?source=collection_archive---------3-----------------------#2020-12-09">https://betterprogramming.pub/3-crucial-things-to-know-about-navigationlink-in-swiftui-cb15d791a55?source=collection_archive---------3-----------------------#2020-12-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7470" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">构建强大的iOS应用</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/f34e84e5e1df62ccff9cf50a88f5b978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e2SVzihhqcLo6ai_"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@dannayyyboi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹钟</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="31c8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">导航是任何应用程序的重要组成部分，在SwiftUI中，苹果引入了<code class="fe lw lx ly lz b">NavigationLink</code>和<code class="fe lw lx ly lz b">NavigationView</code>来让我们轻松创建路由器。</p><p id="5766" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，SwiftUI的第一次迭代出现了一些小问题。具体来说，导航链接中的目的地视图被立即加载。但是现在在iOS 14中，我们有了懒人视图——也就是<code class="fe lw lx ly lz b">LazyHStack</code>和<code class="fe lw lx ly lz b">LazyVStack</code>——让我们的生活更轻松。</p><p id="4af0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">除了使用<code class="fe lw lx ly lz b">NavigationLink</code>来推送和弹出视图，你还可以做更多的定制。在接下来的部分中，我们将探索一些用例。让我们开始吧。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="dcaa" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">以编程方式消除视图</h1><p id="bedf" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">以下是如何在SwiftUI <code class="fe lw lx ly lz b">NavigationLinks</code>中添加目的地视图:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="5fb9" class="ni mi iu lz b gz nj nk l nl nm">NavigationLink(destination: DetailView()){...}</span></pre><p id="5ba4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">值得注意的是，为了让一个<code class="fe lw lx ly lz b">NavigationLink</code>工作，我们需要将它包装在一个<code class="fe lw lx ly lz b">NavigationView</code>中。</p><p id="ba2f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下面的代码片段中，我们已经做到了这一点，并展示了如何以编程方式消除<code class="fe lw lx ly lz b">DetailView</code>:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nn"><img src="../Images/fdbcf8eba7362c97a93a8b3998eb446b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*q69WBVuIEl2UakNMW9PcXA.gif"/></div></div></figure><p id="a86e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">presentationMode</code>是存在于<code class="fe lw lx ly lz b">Environment</code>属性包装器中的属性。它让我们读取诸如<code class="fe lw lx ly lz b">isPresented</code>和<code class="fe lw lx ly lz b">dismiss()</code>之类的值，并相应地执行导航操作。</p><p id="f613" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在请注意，默认情况下，详细视图在顶部显示了一个back bar按钮。如果你想添加一个自定义的后退按钮或者防止返回到上一个屏幕，你可以删除它。为此，只需在其上设置视图修改器<code class="fe lw lx ly lz b">.navigationBarHidden(true)</code>。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="a5df" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">以编程方式弹出到根SwiftUI视图</h1><p id="e60e" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">当有大量导航屏幕时，在每个屏幕上滑动或点击后退按钮并不能真正提供最佳的用户体验。幸运的是，我们可以通过利用<code class="fe lw lx ly lz b">SwiftUI</code>中<code class="fe lw lx ly lz b">NavigationLink</code>的<code class="fe lw lx ly lz b">isActive</code>属性来避免这种情况。</p><p id="9800" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">目标很简单:对于像<code class="fe lw lx ly lz b">ContentView -&gt; View1 -&gt; View2 -&gt; View3</code>这样的导航栈，我们需要从<code class="fe lw lx ly lz b">View3</code>返回到<code class="fe lw lx ly lz b">ContentView</code>。</p><p id="e64a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">正如在这个<a class="ae kz" href="https://stackoverflow.com/questions/57334455/swiftui-how-to-pop-to-root-view?noredirect=1&amp;lq=1" rel="noopener ugc nofollow" target="_blank">栈溢出帖子</a>中解释的，为了弹出到根SwiftUI视图，我们需要在每个<code class="fe lw lx ly lz b">NavigationLink</code>上设置一个<code class="fe lw lx ly lz b">isDetailLink(false)</code>修饰符。这样做，我们确保细节视图不会作为包含<code class="fe lw lx ly lz b">NavigationView</code>的一个单独的“细节”组件出现。</p><p id="36fb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面是如何以编程方式弹出到根视图:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj no"><img src="../Images/0388be4bfc8332891f073e6bd4dc206b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Dg0riFmQGBx05tvuqOLLNQ.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/anupamchugh/f3e0c1355dffe19ca97bffc21c1aab4b" rel="noopener ugc nofollow" target="_blank">源代码</a></p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="5b76" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">在上下文菜单和工具栏中使用导航链接</h1><p id="d510" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">默认情况下，<code class="fe lw lx ly lz b">ContextMenu</code>、<code class="fe lw lx ly lz b">Toolbar</code>或其他类型的视图显示中不能包含<code class="fe lw lx ly lz b">NavigationLink</code>。</p><p id="9b12" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://fivestars.blog/swiftui/programmatic-navigation.html" rel="noopener ugc nofollow" target="_blank">这是因为</a> a <code class="fe lw lx ly lz b">NavigationLink</code>符合<code class="fe lw lx ly lz b">Hashable</code>协议，不像其他SwiftUI视图类型符合<code class="fe lw lx ly lz b">Identifiable</code>。</p><p id="a9a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不过，我们可以通过以下方式让上下文菜单或工具栏项按下来打开目标视图:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/9d319a8d5d402489aeb0c000783c760d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_vmFdlGM66FYb4qgLh0h4Q.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/anupamchugh/0af73574cadfdca41de5387ed966d230" rel="noopener ugc nofollow" target="_blank">源代码</a></p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="25fa" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="b487" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">在本文中，我们看到了SwiftUI中<code class="fe lw lx ly lz b">NavigationLink</code>的以下用例:</p><ul class=""><li id="ac5c" class="nq nr iu lc b ld le lg lh lj ns ln nt lr nu lv nv nw nx ny bi translated">以编程方式消除视图。</li><li id="b59d" class="nq nr iu lc b ld nz lg oa lj ob ln oc lr od lv nv nw nx ny bi translated">删除默认导航后退按钮。</li><li id="16fd" class="nq nr iu lc b ld nz lg oa lj ob ln oc lr od lv nv nw nx ny bi translated">使用其他视图类型的<code class="fe lw lx ly lz b">NavigationLink</code>。</li></ul><p id="100d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。感谢阅读。</p></div></div>    
</body>
</html>