<html>
<head>
<title>Using the MLB Stats API to Get Daily Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用MLB统计API获取每日数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-the-mlb-stats-api-to-get-daily-data-88f48266656c?source=collection_archive---------7-----------------------#2019-09-19">https://betterprogramming.pub/using-the-mlb-stats-api-to-get-daily-data-88f48266656c?source=collection_archive---------7-----------------------#2019-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="df72" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何不用太费力就把日常数据带进来</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/a2c19316ef10ebb231bdad90b14db441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/0*ZBI9qq_ezIvsIkxL.gif"/></div></figure><p id="bed7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">一段时间以来，我一直在寻找一个API来获得MLB比赛的每日数据和最新的赛季统计数据。我已经厌倦了为琐碎的任务搜集棒球参考资料，并一直希望构建一个无需太多努力就能带来日常数据的脚本。自从我尝试使用<a class="ae lm" href="https://appac.github.io/mlb-data-api-docs/" rel="noopener ugc nofollow" target="_blank"> MLB API </a>已经有一段时间了。原因是，由于糟糕和/或不可用的文档，它从来没有对用户友好过。但今天我想再试一次。在这篇短文中，我将给出几个片段来帮助您开始使用这个API。从那以后，你可能需要自己做一些调查，以获得你正在寻找的具体数据。</p></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><h1 id="bb25" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">入门指南</h1><p id="a79f" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated"><code class="fe mr ms mt mu b">pip install MLB-StatsAPI</code></p><p id="0f63" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这个API包装器是由Todd Roberts构建的；你可以在这里找到他的GitHub文档<a class="ae lm" href="https://github.com/toddrob99/MLB-StatsAPI" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0870" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我使用一个<a class="ae lm" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>，在我看来，这是摆弄API和进行初步探索性数据分析的最简单方法。Jupyter Notebook也有一个内置的命令来查看函数参数，这在我学习使用这个API的时候拯救了我的理智。</p><p id="c9f0" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">接下来，干脆<code class="fe mr ms mt mu b">import statsapi</code> <em class="mv">。</em></p><p id="2290" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在我们准备引入一些数据。但是在我开始之前，我要警告读者:这方面的文档很难在网上找到；我花了相当多的时间试图找到使用MLB API的登录凭证，但多次失败。我能够查看这个API的文档的唯一方法是使用Jupyter Notebook。</p><p id="dd09" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">键入<code class="fe mr ms mt mu b">statsapi</code>后，<em class="mv"> </em>将光标置于其中，并使用<code class="fe mr ms mt mu b">Shift+Tab</code>。这将为您提供可用功能的列表。选择一个功能后，将光标放在该功能内，再次执行<code class="fe mr ms mt mu b">Shift+Tab</code>。这将为您提供各个功能的文档。从那里，你可以解码所有的参数(是的，这可能是相当多的工作，以适应它)。</p></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><h1 id="3eb2" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">寻找2019年的新秀本垒打领袖</h1><p id="3b4a" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">为了开始我们的第一个查询，让我们看看2019年排名前五的强力新秀。为此，我们调用<code class="fe mr ms mt mu b">statsapi</code>并使用<code class="fe mr ms mt mu b">league_leaders</code>函数。所有可用的功能都可以在Todd的GitHub上看到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/066d0a3f378ba248fbf9a8963601b72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EPYjaP0GPPvwJR_ui3RATQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/bbbbc0c33a91595b494e6ed925699e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*mboo3cXxUIjcoLI9.JPG"/></div><p class="nc nd gj gh gi ne nf bd b be z dk translated">皮特·阿朗索目前在MLB全垒打中领先</p></figure><p id="b214" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如您所见，<code class="fe mr ms mt mu b">league_leaders</code>函数可以接受许多参数。对于这个查询，我决定查看<code class="fe mr ms mt mu b">HR</code>,但是您可以通过许多不同的统计信息进行过滤。你也可以改变赛季以及严格过滤新秀，合格的击球手，或联盟中的每一个人。输出是一个混乱的字符串，所以我在<code class="fe mr ms mt mu b">\n</code>上分开来稍微整理一下以便查看。这个查询非常简单。让我们再深入一点。</p><h2 id="365f" class="ng lv it bd lw nh ni dn ma nj nk dp me kz nl nm mg ld nn no mi lh np nq mk nr bi translated">查找特定部门排名的函数</h2><p id="9f51" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">现在让我们使用API来了解纽约扬基队的表现(显然，他们在美联东区领先)。这可以通过使用<code class="fe mr ms mt mu b">statsapi.standings_data( )</code> <em class="mv">来完成。对于这个函数，你必须钻研文档来理解什么参数可以传递给这个函数。见下文:</em></p><p id="5421" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu">联赛</strong></p><ul class=""><li id="2279" class="ns nt it ks b kt ku kw kx kz nu ld nv lh nw ll nx ny nz oa bi translated">103 =美国联赛</li><li id="9dd2" class="ns nt it ks b kt ob kw oc kz od ld oe lh of ll nx ny nz oa bi translated">104 =国家联盟</li></ul><p id="93ea" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu">部门</strong></p><ul class=""><li id="8c08" class="ns nt it ks b kt ku kw kx kz nu ld nv lh nw ll nx ny nz oa bi translated">200 =阿尔韦斯特</li><li id="42ba" class="ns nt it ks b kt ob kw oc kz od ld oe lh of ll nx ny nz oa bi translated">201 = AL East</li><li id="d6ed" class="ns nt it ks b kt ob kw oc kz od ld oe lh of ll nx ny nz oa bi translated">202 =铝中心</li><li id="02fa" class="ns nt it ks b kt ob kw oc kz od ld oe lh of ll nx ny nz oa bi translated">203 =荷兰西部</li><li id="69b8" class="ns nt it ks b kt ob kw oc kz od ld oe lh of ll nx ny nz oa bi translated">204 =荷兰东部</li><li id="fc09" class="ns nt it ks b kt ob kw oc kz od ld oe lh of ll nx ny nz oa bi translated">205 =荷兰中部</li></ul><p id="9778" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">弄清楚这个模式后，我构建了一个函数来调用API并返回我查询的分区排名的数据框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi og"><img src="../Images/acae7e9b0b14d58534addeaeed9b9531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RHyuOkdcB4B_Rv7N-L9Mfg.png"/></div></div></figure><p id="d517" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这个简单的函数可重复使用来查找任何部门的最新排名。所需要做的就是遍历从<code class="fe mr ms mt mu b">standings_data</code>函数输出的字典，并重新排列列，使其更加易读。</p><p id="0f9e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如上图，当我调用我的<code class="fe mr ms mt mu b">get_division_standings( )</code>函数时，传入了<code class="fe mr ms mt mu b">103</code>(美联)和<code class="fe mr ms mt mu b">201</code>(美联东)。就这样，我们得到了一个方便的数据框架。</p></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><h1 id="a70e" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="1c36" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">我对我今天的发现很满意，因为我可以通过一些努力来弄清楚如何使用这个API。现在真正的工作可能开始了。感谢你阅读这篇文章，我希望你能学到一些新的东西！现在我要去布朗克斯看扬基队赢得2019年的第100场比赛。</p></div></div>    
</body>
</html>