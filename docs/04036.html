<html>
<head>
<title>Importance of the Return Keyword in Recursive JavaScript Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Return关键字在递归JavaScript函数中的重要性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/importance-of-the-return-keyword-in-recursive-javascript-functions-d12203c30d1a?source=collection_archive---------12-----------------------#2020-03-19">https://betterprogramming.pub/importance-of-the-return-keyword-in-recursive-javascript-functions-d12203c30d1a?source=collection_archive---------12-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9e04" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">分析为什么只有函数调用是不够的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bf673e27c5611cb4b3c520b96f1df94f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_RBhSux8XRdV-8QI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sapegin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Artem Sapegin </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="db29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近不断遇到几个围绕递归的算法问题，在其中一些问题中，我遇到了一个奇怪的问题:我的递归特性似乎有效，但我的最终结果一直显示为<code class="fe lv lw lx ly b">undefined</code>。</p><p id="54cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个将十进制数转换成二进制数的函数。它查看数字除以2的商及其余数，根据结果将<code class="fe lv lw lx ly b">0</code>或<code class="fe lv lw lx ly b">1</code>添加到数组中。</p><p id="2642" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:这个函数适用于特定阈值以下的数字，因为特定长度的二进制数字会被JavaScript错误地舍入。也就是说，它的功效与本文中包含的逻辑或示例没有任何关系。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="a41f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单，对吧？它做了它需要做的事情，然而当我把一个数字放进去并调用这个函数时，我得到的只是<code class="fe lv lw lx ly b">undefined</code>。将我的结果记录到控制台显示了我所期望的，但是为什么这个值实际上没有被返回呢？</p><p id="1524" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">答案是这个函数的递归调用前面没有<code class="fe lv lw lx ly b">return</code>关键字。这样，仍然会再次运行该函数，但是不会对该函数的结果做任何处理。</p><p id="1a0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我把数字<code class="fe lv lw lx ly b">20</code>作为这个函数的参数。二进制的20是10100。我们的第一个递归调用使用<code class="fe lv lw lx ly b">10</code>作为参数(20除以2等于10，因此我们将10设置为变量<code class="fe lv lw lx ly b">newNum</code>的值，并在递归调用中使用它)。然后，我们重复这个过程，直到数字参数除以2等于<code class="fe lv lw lx ly b">0</code>(或者向下舍入到<code class="fe lv lw lx ly b">0</code>)。</p><p id="b604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，我们得到了数字10100。但是，那个数字只在<code class="fe lv lw lx ly b">convertToBinary(1)</code>的函数调用中返回。函数调用<code class="fe lv lw lx ly b">convertToBinary(2)</code>识别出<code class="fe lv lw lx ly b">convertToBinary(1)</code>已经完成运行，但是因为在<code class="fe lv lw lx ly b">convertToBinary(1)</code>调用之前没有<code class="fe lv lw lx ly b">return</code>关键字，所以对计算的10100不做任何事情。本质上，这个数字只是坐在那里。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="5634" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，<code class="fe lv lw lx ly b">convertToBinary(5)</code>意识到<code class="fe lv lw lx ly b">convertToBinary(2)</code>完成了(并且没有返回任何东西)并且完成了它自己。同样的事情也发生在<code class="fe lv lw lx ly b">convertToBinary(10)</code>身上。最后，<code class="fe lv lw lx ly b">convertToBinary(20)</code>——我们最初的呼叫——解决了。但是<code class="fe lv lw lx ly b">convertToBinary(10)</code>没有返回任何东西，因为它的前辈没有返回任何东西。</p><p id="7b5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，如果您在递归函数调用之前不使用<code class="fe lv lw lx ly b">return</code>，您仍然会调用该函数，但是您不会从中获得任何东西。</p><p id="0e1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里恰当地使用<code class="fe lv lw lx ly b">return</code>意味着<code class="fe lv lw lx ly b">convertToBinary(2)</code>给出的返回值是10100(是<code class="fe lv lw lx ly b">convertToBinary(1)</code>的结果)。<code class="fe lv lw lx ly b">convertToBinary(5)</code>的返回值是<code class="fe lv lw lx ly b">convertToBinary(2)</code>的结果。这种逻辑推断，意味着<code class="fe lv lw lx ly b">convertToBinary(20)</code>本质上依赖于其后每个连续调用的返回值。通过使用<code class="fe lv lw lx ly b">return</code>，在每个连续的函数调用中都会返回10100，最终冒泡到<code class="fe lv lw lx ly b">return convertToBinary(10)</code>。</p><p id="503f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">递归函数可能有点令人困惑，所以要了解<code class="fe lv lw lx ly b">convertToBinary(20)</code>如何依赖于它后面的调用，请参考下图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/bb0762d5c67336a6ca1789e2680fd298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2akSGX4qMsz368zZO-Bpw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的初始调用需要任何后续调用的返回值，以便它可以正确地返回值本身。</p></figure><p id="ca79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望本文已经解释了为什么<code class="fe lv lw lx ly b">return</code>关键字对于递归操作是必要的，以及为什么简单地调用没有它的函数是不够的。</p><p id="a8f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至此，祝您编码愉快！</p></div></div>    
</body>
</html>