<html>
<head>
<title>Reusable EC2 Instances Using Terraform Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Terraform模块的可重用EC2实例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/reusable-ec2-instances-using-terraform-modules-59aac51f1fb?source=collection_archive---------2-----------------------#2022-07-05">https://betterprogramming.pub/reusable-ec2-instances-using-terraform-modules-59aac51f1fb?source=collection_archive---------2-----------------------#2022-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fc7c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">掌握EC2重组的指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/a3ad39c4096a1bace470891d30c561aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*vo-BcMuvDFxOGC2vNMeWWA.png"/></div></figure><p id="d081" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在这个项目中，我们将对GitHub派生的EC2实例模板进行简单的重组。我们将使用模块重新创建代码，使其更具可重用性，更适合开发或生产环境。我们还将介绍如何在Terraform Cloud中远程存储我们的Terraform状态文件，以确保状态数据可以在团队的所有成员之间共享。</p><p id="bce9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我将使用Visual Studio代码作为我的IDE，但也可以随意使用Cloud9或您选择的其他IDE。如果您选择使用不同的IDE，本教程中的步骤会略有不同。</p><h1 id="8bed" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated"><strong class="ak">先决条件</strong></h1><ul class=""><li id="dcad" class="me mf it ks b kt mg kw mh kz mi ld mj lh mk ll ml mm mn mo bi translated">AWS帐户</li><li id="1795" class="me mf it ks b kt mp kw mq kz mr ld ms lh mt ll ml mm mn mo bi translated">您的用户的适当权限</li><li id="ab7f" class="me mf it ks b kt mp kw mq kz mr ld ms lh mt ll ml mm mn mo bi translated">GitHub帐户</li><li id="0547" class="me mf it ks b kt mp kw mq kz mr ld ms lh mt ll ml mm mn mo bi translated">GitHub个人访问令牌</li><li id="a5ad" class="me mf it ks b kt mp kw mq kz mr ld ms lh mt ll ml mm mn mo bi translated">安装在您的IDE上的Terraform</li><li id="4d28" class="me mf it ks b kt mp kw mq kz mr ld ms lh mt ll ml mm mn mo bi translated">在您的IDE上安装和配置了AWS CLI</li><li id="9870" class="me mf it ks b kt mp kw mq kz mr ld ms lh mt ll ml mm mn mo bi translated">Terraform云帐户</li></ul><h1 id="6d8e" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">建立</h1><p id="93df" class="pw-post-body-paragraph kq kr it ks b kt mg ju kv kw mh jx ky kz mu lb lc ld mv lf lg lh mw lj lk ll im bi translated">如果你想从下面的链接获得回购，现在是时候了。如果没有，只需复制<code class="fe mx my mz na b">main.tf</code>文件并将其粘贴到您的IDE中，并跳过接下来的几个步骤:</p><p id="e071" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">【https://github.com/Michael-Cassidy-88/terraformec2 T4】</p><p id="efb7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">接下来，回到您的IDE，您将需要克隆repo。对于VS代码，只需点击源代码控制图标，并选择“克隆存储库”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/1721f8f6d8fe40317b8cec293ba9e0ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K6PyrBBgEsUPnf21U056gA.png"/></div></div></figure><p id="235a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如下所示，从GitHub复制repo URL，然后将其粘贴到VS代码中以克隆存储库。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nh"><img src="../Images/8adb0640c2c94430ee45cbeed0d3eafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YbGxiQAeJLHVXXafXKVodw.png"/></div></div></figure><p id="404c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我建议在继续之前创建一个新的分支。通过点击VS代码左下角的小签出分支图标，然后创建一个新的分支:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/406a58d8cba7dbed4f2eff06eed9edbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*jGWvJ70ffQF9fADLDJgz6w.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/5e4b0058b07b509812e6f7ea8259acd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*BgpKzsr_v_BAtbbKGwW-bQ.png"/></div></figure><p id="ab39" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们检查一下代码！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="d01f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如你所见，我们在使用这些代码时受到限制。我们只能在一个区域中创建一个EC2实例，使用一个AMI和一个实例类型。我们将使用这个文件的片段来创建一个新的文件系统。首先，让我们创建一些新的文件夹和文件。</p><p id="7576" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在当前工作目录中，创建两个文件夹。一个叫模块，另一个叫地形。</p><p id="52ef" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">terraform文件夹将保存我们的根配置。在terraform文件夹中，我们将添加以下文件夹。这些文件夹将作为我们将在代码中实现的特定值。这样做是为了让不同的团队可以在不同的项目上工作，都使用相同的代码。只需根据您的需要重命名文件夹:</p><p id="3886" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><code class="fe mx my mz na b">terraform\dev\us-east-1\t2.micro\0-ec2-deployment</code></p><p id="aebe" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">乍看起来可能很复杂，但是您很快就会看到，文件夹显示我们将处于一个开发环境(dev ),在us-east-1地区，并且使用t2.micro实例类型。最终文件夹将是所有根文件所在的文件夹。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="1595" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在模块文件夹中，我们将使它不那么复杂。只需再添加一个文件夹，它是<code class="fe mx my mz na b">0-ec2-deployment</code>文件夹的副本。完成文件夹布局后，它应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c60ca281aba9016eecc84f3d1f5c3bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*50FRYVJoiQVkUeYL3cRmEg.png"/></div></figure><p id="9a5c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在AWS实例目录中创建一个. gitignore文件。这样，当我们将代码推回GitHub时，我们不需要或不想共享的额外文件将不会被发送。</p><p id="e67f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">接下来，我们将在terraform部署目录中创建以下文件:<code class="fe mx my mz na b">main.tf</code>和<code class="fe mx my mz na b">backends.tf</code>。</p><p id="3dc2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在模块部署目录中，创建名为<code class="fe mx my mz na b">main.tf</code>和<code class="fe mx my mz na b">variables.tf</code>的文件。最终的文件系统将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/93ff44bc7d38cb9fd38341d4559ee174.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*1GyrL4K7LTWexReBU-4pVg.png"/></div></figure><h1 id="f6e9" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">Terraform云登录</h1><p id="b90b" class="pw-post-body-paragraph kq kr it ks b kt mg ju kv kw mh jx ky kz mu lb lc ld mv lf lg lh mw lj lk ll im bi translated">为了连接到Terraform Cloud，以便我们能够远程存储我们的Terraform状态文件，我们将创建一个新的工作区，然后从我们的IDE登录。为此，请前往您的Terraform云组织。如果没有组织，请创建一个。在您的组织中，创建如下所示的新工作区:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nv"><img src="../Images/a107648585aae5b9c8cc4cfc0987b932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7C3n6DTX9jqB-RsWMwSt9w.png"/></div></div></figure><p id="02eb" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们将选择一个CLI驱动的工作流，这样我们就可以从我们的IDE中执行我们的Terraform命令。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nw"><img src="../Images/4c2c3fe522635633ab98ea600e5798b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iC33v8DEAXkkM2cUcTcvw.png"/></div></div></figure><p id="6544" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">命名您的工作空间，并创建它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nx"><img src="../Images/1a1a6d85f7d4d0e453691fe28dba8809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zn91zjcn_4INq6cyrq6Gpg.png"/></div></div></figure><p id="80a8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在下一页，我们将复制示例代码中提供给我们的信息，并将其粘贴到IDE中的<code class="fe mx my mz na b">backends.tf</code>文件中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi ny"><img src="../Images/6a51360eb7de9ccceb4158cca5651e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wMDsp7z30XCyb9bTDbJZlA.png"/></div></div></figure><p id="b345" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在我们忘记之前，让我们在终端中输入<code class="fe mx my mz na b">terraform login</code>。如果还没有，请将目录切换到terraform根部署文件夹。终端将提示您确认是否要继续。</p><p id="145d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">输入yes后，您将进入“创建API令牌”屏幕，在此您将创建一个API令牌，并接收从您的IDE登录Terraform Cloud所需的凭据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/b34f03ec3d82f4e28919a0e7cb372bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*r9oOWFMj9sgzlldbTHdc9w.png"/></div></figure><p id="ea99" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">确保将令牌保存在安全的地方。</p><p id="771e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">将令牌粘贴到IDE终端后，应该会看到以下显示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/4ebe86caf8a75b6f5c53b486c505a0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*CIYa5mJbtrz2BtxAFkltZQ.png"/></div></figure><h1 id="5189" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">地形文件配置</h1><p id="600e" class="pw-post-body-paragraph kq kr it ks b kt mg ju kv kw mh jx ky kz mu lb lc ld mv lf lg lh mw lj lk ll im bi translated">让我们来看看代码。我们已经准备好了<code class="fe mx my mz na b">backends.tf</code>文件。让我们进入terraform根部署目录中的<code class="fe mx my mz na b">main.tf</code>文件。输入以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="883e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">provider块将让Terraform知道我们正在使用AWS。locals块将设置我们当前的工作目录，下面的值将根据相应文件夹的名称来分配。</p><p id="d24b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">因为我们在<code class="fe mx my mz na b">0-ec2-deployment</code>文件夹(<code class="fe mx my mz na b">index 0</code>)中，如果我们后退一个文件夹(<code class="fe mx my mz na b">index 1</code>，那么我们到达实例类型(<code class="fe mx my mz na b">t2.micro</code>)。您可以看到，当我们退回到文件夹中时，我们访问了在locals块中定义的信息。</p><p id="c348" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在这个配置中，我们唯一可以改变的变量是我们想要启动的实例的数量。我已经把我的调成了<code class="fe mx my mz na b">2</code>。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="2303" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">既然根配置已经完成，让我们转到模块。先说<code class="fe mx my mz na b">variables.tf</code>。在<code class="fe mx my mz na b">variables.tf</code>内，输入以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2ee5" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这里我们定义了一些变量，我们将把这些变量从<code class="fe mx my mz na b">main.tf</code>根文件传递给<code class="fe mx my mz na b">main.tf</code>模块文件。</p><p id="55ce" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">接下来，在模块<code class="fe mx my mz na b">main.tf</code>文件中，输入以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="6d32" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在这里，我们将找到AWS实例资源。数据块利用AWS系统管理器参数存储来查找最新的Amazon Linux 2 AMI。AMI IDs会发生变化，我们希望能够保持Terraform代码的可重用性。</p><p id="09a8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们可以标记EC2实例，以便当我们稍后在AWS控制台中观察它们时，它们显示count index加1。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="3189" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们最后运行我们的Terraform命令，看看会发生什么。运行<code class="fe mx my mz na b">terraform init</code>命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi ob"><img src="../Images/51cdb18ea8af7942d4be3dc0c89830be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rhblicNoO_9SMCMavur4BA.png"/></div></div></figure><p id="4e10" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">接下来，<code class="fe mx my mz na b">terraform plan</code>，然后是<code class="fe mx my mz na b">terraform apply</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oc"><img src="../Images/b4f5a86361679eee4d2d673e7a8ce7b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-avR2IdbyZoALE46gFT1KA.png"/></div></div></figure><p id="4803" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们来看看Terraform云。如果进入您创建的工作区，您应该在overview部分看到两个实例和AMI:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi od"><img src="../Images/d7d43b752626552151f7e064e6432c70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gOCGlnnowz0IZYJ2Do3YkQ.png"/></div></div></figure><p id="17fa" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果你进入“状态”，你会发现我们远程存储的地形状态文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oe"><img src="../Images/11096946456a8145c5ac956dfe400550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PnjsL-4O_zUktutHrfaAtg.png"/></div></div></figure><p id="3027" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">您将不会在本地文件系统中看到状态文件。</p><p id="e08c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在AWS控制台中，检查正在运行的EC2实例。您应该会看到我们为每个实例定义的标签，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi of"><img src="../Images/c365f589765aa15444a3dda56b290caf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dpj-rC-QnfMfK3RthhyuEQ.png"/></div></div></figure><p id="4307" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在，让我们来<code class="fe mx my mz na b">terraform destroy</code>一下，这样我们就不会因为正在运行的实例而被收费。请注意，terraform状态文件保存在Terraform云中。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="f6a3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">一旦销毁完成，我们就可以把代码推回GitHub。</p><p id="3f77" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这是。git忽略我们之前创建的文件的内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="ed5c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在VS代码中点击左侧的源代码控制图标，准备变更，并输入一条消息让GitHub repo知道您正在进行变更:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/11db0e9d9eb9690efccacc985bee7f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*nR-KmbLIa-Ic9wWYt8Q8kg.png"/></div></figure><p id="bc1c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在按<code class="fe mx my mz na b">Ctrl Enter</code>提交您的更改。最后，在VS代码终端中，输入以下命令:</p><pre class="kj kk kl km gt oh na oi oj aw ok bi"><span id="37dd" class="ol ln it na b gy om on l oo op">git push --set-upstream origin &lt;CURRENT_BRANCH&gt;</span></pre><p id="2e87" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我创建的分支是<code class="fe mx my mz na b">Terraform_Branch</code>，所以我将在命令中使用它。您可能需要输入您的GitHub用户名和个人访问令牌来进行推送。您将需要一个个人访问令牌，该令牌可以在您的配置文件设置下的开发人员设置中创建</p><p id="39d4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">您应该在GitHub repo上看到一个比较和拉回请求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi oq"><img src="../Images/f1f8ed522ee43554b41099874b002a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ljry1OPmBt1yJ4L9z63XSw.png"/></div></div></figure><p id="05ed" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">将拉请求合并到您的主分支机构，您应该会看到在您的回购中所做的更改:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi or"><img src="../Images/05cb7b99b962799c817b27928a089053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ylhxmEMLeDdB4DpeV5hiUg.png"/></div></div></figure><p id="9e41" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">恭喜你。我们在逻辑文件系统中创建了可重用的Terraform代码来启动简单的EC2实例，同时将Terraform状态文件远程存储在Terraform云中。</p><p id="4611" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>