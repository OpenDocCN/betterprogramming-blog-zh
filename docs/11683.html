<html>
<head>
<title>Swift 5.7’s Optional Unwrapping Syntax</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5.7的可选解包语法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-5-7-unwrapping-optionals-gets-improvement-be81c578e9fa?source=collection_archive---------0-----------------------#2022-04-08">https://betterprogramming.pub/swift-5-7-unwrapping-optionals-gets-improvement-be81c578e9fa?source=collection_archive---------0-----------------------#2022-04-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a66b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Swift 5.7中，解包选项越来越短</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/35a0e15687804ef40b872a536d3a3201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sya5LZymEEgDIU7uipaWXA.jpeg"/></div></div></figure><h1 id="4316" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">介绍</h1><p id="884f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在Swift中解开可选变量是iOS开发人员每小时执行的最常见的开发任务之一。</p><p id="a889" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这很常见，以至于拆开包装是面试中最受欢迎的问题之一。</p><p id="62ef" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在展开的背景下，我将展示Swift 5.7中的一个小“语法糖”。</p><p id="fdb7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这是变化本身并不重要的一个例子——但是围绕它的讨论要多得多。</p><p id="9998" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">为了理解为什么我们首先需要讨论阴影。</p><h1 id="6bec" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">跟踪——不好吗？</h1><p id="d6a2" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们都经历过。</p><p id="1428" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们有一个可选的，我们想打开它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="78aa" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">当我们展开可选的x时，我们创建了一个新的常数，也叫x，它包含相同的值，现在我们用这个常数代替可选的变量。</p><p id="df25" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这个动作被称为<strong class="ll ir">遮蔽</strong>——因为新的常量就像我们想要解开的原始可选的阴影。</p><p id="7db9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">做跟班好吗？</p><p id="a3a9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">很明显，隐藏一个可选变量会给我们带来一些问题。</p><p id="e801" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">首先，上面的例子并不代表现实。</p><p id="f77b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">变量名更长，有时长得多。</p><p id="9053" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">例如:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="68f8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">好吧，也许太长了:)，但你明白了。长名称的可选变量创建了没有理由的扩展展开代码。它只是看起来…嗯..奇怪。</p><p id="929a" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">那么，我们该怎么办？哦，我知道了，让我们缩短名字吧！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="1de0" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">好的，所以我们把名字缩短为“日期”，现在，不清楚“日期”是什么意思。我们知道命名在编写可读代码中起着重要的作用，我们对命名可选变量进行了深入的思考。</p><p id="c54d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">因此，如果我们回到隐藏(我的意思是，保持原来的名称)，我们会遇到一个新问题——我们现在有两个同名的变量。当然，我们知道如何处理(我们都是专业人员)，但这仍然不是最佳实践，不是吗？</p><p id="cf48" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们看到阴影(我们都使用！)也没那么无辜。</p><p id="a231" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">因此，Swift 5.7采用了一种有趣的新方法来处理这种情况。</p><p id="8c1f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">但是，这种方法可能会引发新的问题。大家说说吧。</p><h1 id="4963" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">缩短阴影</h1><p id="aa66" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">解决办法很简单。</p><p id="b739" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">而不是:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="ae57" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们可以做到以下几点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="c75c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">当变量很长时，这种解决方案非常有用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="5bf2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在，当然，这个解决方案也与另一个阴影展开相关:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="2bc1" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">但是，它完美吗？</p><p id="6ec4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">有人说，缩短Swift 5.7允许的方式也有缺点。</p><p id="a45b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">例如，在执行以下操作时:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="0152" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们好像一直在丢失x的上下文，感觉x是一个没有值的新变量。“= x”给了我们上下文，反映出我们使用了一个现有的变量。</p><p id="2431" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第二个原因可能更加深刻。</p><p id="1f88" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们说过隐藏可能不是一个好方法。原因之一是创建重复的变量。</p><p id="22db" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">但是这个解决方案并不能阻止我们跟踪——甚至更糟！它鼓励我们跟踪可选变量，并由此把洞挖得更深。</p><h1 id="d45a" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">思想</h1><p id="c938" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">作为一个“老”开发人员，我很难缩短我的解包时间，所以我可能不是一个完美的例子。</p><p id="580c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">但我认为Swift 5.7的这个新特性可以教会我们很多关于命名、重复变量和可读代码的知识。</p><p id="aa6e" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">你怎么想呢?你喜欢吗？</p></div></div>    
</body>
</html>