<html>
<head>
<title>JavaScript Developers Are Using Shiny Rusty Tools. Here’s Why.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript开发人员正在使用闪亮生锈的工具。原因如下。</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-devs-are-using-shiny-rusty-tools-heres-why-a9421ead5ec7?source=collection_archive---------8-----------------------#2022-11-24">https://betterprogramming.pub/javascript-devs-are-using-shiny-rusty-tools-heres-why-a9421ead5ec7?source=collection_archive---------8-----------------------#2022-11-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5393" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Next.js 12的基准测试结果令人信服。但这值得改变吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a7d31d20610fcfba9c857373036a7870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2jKd5S8gC0Yt0Zhq"/></div></div></figure><p id="69b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们最近的团队建设活动中，我做了一个关于为什么JavaScript开发人员将他们的工具转移到Rust的演讲。这是一个相当受欢迎的演讲，我们认为与世界分享它会很酷。这就是了。这是这篇演讲的编辑版本，为阅读而写，在我们的Youtube频道上还有一个<a class="ae ln" href="https://youtu.be/9xggZA76wJ4" rel="noopener ugc nofollow" target="_blank">截屏。所以让我们直入主题吧。</a></p><h1 id="a9ce" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">背景</h1><p id="0ce8" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">软件的一个共同趋势是用我们用来构建应用程序的相同语言来编写我们作为开发人员用来构建应用程序的工具。比如pip用Python写，Composer用PHP写，Maven用Java写等等。这是有意义的，因为大多数时候创建工具的人也是使用它们的人。所以用他们选择的语言工作更容易。</p><p id="36b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">JavaScript也不例外。从Gulp和Bower到babel和Webpack，我们都是用JavaScript编写的。这对我们来说效果很好，但也有一些问题。</p><h1 id="2735" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">JavaScript的问题是</h1><p id="506f" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">要了解这个问题，我们必须看看JavaScript的属性。JavaScript是一种轻量级的网页脚本语言。当然，我们现在在任何地方都使用它，从后端到数据库，但它最初是为了让页面首先闪亮，然后其他一切，这是显而易见的。</p><p id="47e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它是一种解释语言，可以实时编译，并且是单线程的。是的，是的，我知道如何运行多个实例并与web工作人员交流……但在我看来，这不是多线程，这是一个奇怪的巫术解决方法，试图转移我们对事实的注意力<strong class="kt ir">我们没有本地多线程</strong>。</p><p id="935a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个更大的问题是，与其他语言相比，它在控制台上相当慢。</p><p id="d896" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然JavaScript在页面上很棒，但在控制台上却有点糟糕。</p><p id="a244" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一天，一群JavaScript开发人员聚在一个黑暗的房间里，喝多了酒后，有人说:</p><p id="bc42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="ml">“嘿，伙计们，如果……听我说……如果我们不用JavaScript来编写构建我们的JavaScript的工具会怎么样？”</em> </strong></p><p id="7dff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有一个集体喘息，扔椅子，打架爆发，尘埃落定后，每个人都同意尝试一下。</p><p id="7566" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好吧，我可能是瞎编的，但结果还是一样，我们现在用JavaScript之外的语言制作JavaScript构建工具。</p><h1 id="20e6" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">但是为什么会生锈呢？</h1><p id="539a" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">一句话…速度和缓冲区溢出😉。</p><p id="68fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Rust是一种多范例、通用编程语言，旨在提高性能和安全性。这就像是C++，但是是针对千禧一代和zoomers的。它是一种加强内存安全并具有“安全”并发性的系统语言。它在语法上类似于C++，更重要的是，它几乎和C++一样快。</p><h2 id="c1a2" class="mm lp iq bd lq mn mo dn lu mp mq dp ly la mr ms ma le mt mu mc li mv mw me mx bi translated">有希望的索赔</h2><p id="1381" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">现在有很多项目试图用基于Rust的工具来取代JavaScript工具。一些例子是ParcelJS，Deno，ESBuild和Speedy Web编译器(SWC)。他们都声称比他们试图取代的任何东西都要快，如果你想笑，可以看看<a class="ae ln" href="https://esbuild.github.io/" rel="noopener ugc nofollow" target="_blank"> esbuild比较</a>。</p><p id="6a7f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，我不会一一列举，但我会通过Next.js来近距离观察SWC</p><h2 id="323b" class="mm lp iq bd lq mn mo dn lu mp mq dp ly la mr ms ma le mt mu mc li mv mw me mx bi translated">快速网络编译器(SWC)</h2><p id="4d15" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">SWC是一个可扩展的基于Rust的平台，用于下一代快速开发工具。这意味着，这是一个框架，以建立建设者。您可以使用SWC进行编译和绑定。它将使用现代JavaScript特性获取JavaScript / TypeScript文件，并生成所有主流浏览器都支持的有效代码。</p><h2 id="7b0a" class="mm lp iq bd lq mn mo dn lu mp mq dp ly la mr ms ma le mt mu mc li mv mw me mx bi translated">最新Next.js生锈的工具</h2><p id="c477" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Next.js在版本12中引入了基于SWC的Rust编译器。在Next.js网站上，他们声称本地更新速度提高了约3倍，生产构建速度提高了约5倍。</p><p id="12c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对我来说，这听起来像是一个可检验的主张。所以我测试了一下。</p><p id="f452" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在版本11和12中创建了完全相同的项目，并添加了相同的400个生成组件。为此我使用了<a class="ae ln" href="https://github.com/multiprocessio/react-benchmark-generator" rel="noopener ugc nofollow" target="_blank"> React基准生成器</a>。这两个项目之间唯一的区别是Next.js的版本，其他的都是一样的。</p><p id="b9d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果相当令人信服。这是给Next.js 11的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/a8290389e4c752afc149318f3ce292a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tg-XID6M87dLooix"/></div></div></figure><p id="e4f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于Next.js 12，您可以这样做:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/15f5e663a9c950c89e64a51f150bb1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SVkvys4Hs811ubYU"/></div></div></figure><p id="5cad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Next.js 12，花了12秒做了next . js 11 1分40秒做的事。这大约快了8倍。所以他们显然没有夸大其词。</p><p id="5df4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我也没想到Next.js 12用了12秒。我想这是个幸福的巧合。</p><h1 id="6583" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">值得炒作吗？</h1><p id="c340" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">现在显而易见的问题是:这值得吗？</p><p id="dda3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们最终构建的应用程序是一样的，对吗？这不会改变最终用户的体验，只会改变开发者的体验，所以为什么要这么麻烦呢？为什么要修复已经运行良好的东西？</p><p id="f602" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为它不太好用。正如我之前所说，JavaScript在页面上很棒，但在控制台上很糟糕。开发者机器是强大的野兽，不利用这种力量是一种可怕的浪费。这也是一种昂贵的浪费。</p><p id="4912" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设您在一个由20名开发人员组成的团队中，从事一个在基于云的CI上部署和测试的大型项目。每天你团队的每个成员都会推出多个补丁和特性，下面是可能发生的事情。</p><p id="8694" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您的CI提供无限的并发构建，但按构建分钟或按处理器时间秒收费，那么Next.js的成本将是Next.js 12的8倍。</p><p id="d2ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，如果它给出了一个固定的价格和一个固定的并发构建数，那么如果您的构建队列增长，您将需要等待一段时间，或者您将不得不付费来增加您可以运行的并发构建数。</p><p id="ea83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">无论哪种方式，缓慢的构建花费你更多的时间和金钱，或者两者都有。</p><h1 id="319a" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">结论</h1><p id="cd41" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">JavaScript是一种令人惊叹的语言，没有它，互联网就不会有今天。但是我们不一定要用它来构建我们的工具，因为有更难、更好、更快、更强的语言，比如Rust，这没关系。它并没有剥夺JavaScript，放弃基于JavaScript的构建工具，转而使用更快的基于Rust的工具，也不是背叛。让我们面对现实吧，我不会为了得到巫毒多线程而忍受多个JavaScript实例。</p></div></div>    
</body>
</html>