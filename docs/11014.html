<html>
<head>
<title>Visual Web Testing With Robot Framework, Selenium and WatchUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Robot Framework、Selenium和WatchUI进行可视化Web测试</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/visual-web-testing-with-robot-framework-selenium-and-watchui-417408a6784d?source=collection_archive---------5-----------------------#2022-02-10">https://betterprogramming.pub/visual-web-testing-with-robot-framework-selenium-and-watchui-417408a6784d?source=collection_archive---------5-----------------------#2022-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f375" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">可视化测试有助于节省大量验证web应用程序的时间和精力</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2fe0f59a8a34133229a637121deb2287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nIEmG5I4CTMMpW3b.jpg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="kv">图片来源:盖蒂图片社</em></p></figure><p id="91ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将使用<code class="fe ls lt lu lv b">robotframework</code>和WatchUI库解释可视化测试的理论和实践。</p><h1 id="6d79" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">什么是视觉测试？</h1><p id="5181" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">顾名思义，可视化测试就是用可视化工具测试我们的GUI应用程序。</p><p id="1cc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在自动化领域，这意味着我们正在使用计算机视觉技术测试我们的GUI应用程序。</p><p id="0510" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">视觉测试的常见主题是在测试执行之前拍摄应用程序的快照，该快照将作为基准，然后在每次测试执行时，使用图像差异计算将GUI与该基准进行比较。</p><p id="38e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这通常涉及光学字符识别(OCR)和图像分割等技术。</p><h1 id="a819" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">为什么我应该执行视觉测试？</h1><p id="dff5" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">仅用文本比较测试HTML文档可能是乏味且耗时的。如果你的应用程序中的页面有许多文本元素，这意味着相应的测试用例应该有许多文本断言语句。这种维护可能会让人不知所措，测试代码的可读性也会受到影响。</p><p id="086e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文本断言并不总是足够的，例如，如果您的网站中的文本内容是正确的，但元素没有对齐，您的测试用例将成功运行，结果为“通过”，但“谁”页面是一团乱麻，对用户体验有非常不利的影响。</p><p id="e46b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过截图并与计算机视觉进行比较，您可以用一个断言匹配所有可能的变化。</p><p id="96b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这并不意味着基于文本的诽谤将被完全抛弃，但这些可以大大减少。</p><h1 id="03ff" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">记得金字塔吗</h1><p id="649f" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">永远记住GUI测试在测试金字塔的顶端，它应该排在单元测试、集成测试和api测试之后。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/b4fea39685e9100fd43ed7b5101a62c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/0*r1NHEl4JQrDYBWpI.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">测试金字塔:信用，马丁·福勒</p></figure><p id="f318" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">视觉测试是GUI测试的一部分，GUI测试的目标是确保数据正确呈现给用户。<br/>大多数验证将在API级别进行，而不是在UI上。</p><h1 id="a891" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">机器人框架简介</h1><p id="19b3" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">我在<a class="ae mu" href="https://eldadu1985.medium.com/extend-robotframework-using-the-robotframework-python-lib-core-bf73e09160d3" rel="noopener">之前的一篇文章</a>里讲过<code class="fe ls lt lu lv b">robotframework</code>。<code class="fe ls lt lu lv b">Robotframework</code>是一个基于python的开源软件验收测试框架。</p><p id="1a30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">凭借其关键字驱动的方法和表格语法，它可以用于快速生成验收测试，并在测试代码和最终报告上提供了很好的可读性。</p><p id="84d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它提供了一个reach生态系统，其中包含许多可轻松用于多种测试目标的工具，从web测试到API测试，再到数据库、移动设备或物联网。</p><h1 id="a7c4" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">WatchUI简介</h1><p id="acb7" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated"><a class="ae mu" href="https://pypi.org/project/WatchUI/" rel="noopener ugc nofollow" target="_blank"> WatchUI </a>是由<a class="ae mu" href="https://www.tesena.com/en" rel="noopener ugc nofollow" target="_blank"> Tesena </a>开发的机器人框架视觉测试库。<br/>由<a class="ae mu" href="https://github.com/tesseract-ocr/tesseract" rel="noopener ugc nofollow" target="_blank"> Tesseract-ocr </a>提供支持，其关键字允许自动化开发人员截取应用程序的屏幕截图，然后根据图像对其进行区分，断言为可接受的差异设定了最低阈值。</p><p id="c140" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它可以很容易地与您现有的运行selenium或剧作家的<code class="fe ls lt lu lv b">robotframework</code>脚本集成，并且您可以仅用两行代码将这些测试升级为可视化测试:)</p><p id="aace" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于浏览器测试工具的更多信息，请阅读我的文章<a class="ae mu" href="https://eldadu1985.medium.com/robotframework-browser-automation-tools-a-review-for-2021-29a0835f437d" rel="noopener">这里</a>。</p><h1 id="5a51" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">亲自动手</h1><p id="f362" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated"><strong class="ky ir">首先</strong>，让我们从pip安装我们所有的依赖项:</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="5acc" class="mz lx iq lv b gy na nb l nc nd">pip install <br/>robotframework==4.1.3<br/>selenium==4.1.0<br/>robotframework-seleniumlibrary==6.0.0<br/>WatchUI==1.0.12</span></pre><p id="2c1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装完依赖项后，现在我们需要在操作系统上安装<code class="fe ls lt lu lv b">install tesseract</code>。<br/>你可以在这里阅读手表ui官方文档<a class="ae mu" href="https://tesena-smart-testing.github.io/WatchUI/start.html#install-tesseract" rel="noopener ugc nofollow" target="_blank">关于安装宇宙魔方的内容。</a></p><p id="5695" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们<strong class="ky ir"> </strong>从用selenium编写一个基本的web测试用例开始，并将其存储为<code class="fe ls lt lu lv b">test.robot</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="9f94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了演示视觉测试如何帮助我们，我选择了<a class="ae mu" href="https://www.epochconverter.com/" rel="noopener ugc nofollow" target="_blank"> epoch converter </a>网站(原因你会看到:)。</p><p id="d4cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该测试使用selenium将浏览器导航到epoch converter主页，它一直等到3个元素就绪:</p><ul class=""><li id="9343" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nl nm nn no bi translated">一个div容器。</li><li id="85b5" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated">纪元时间文本框</li><li id="fa25" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated">纪元到人类时间转换按钮。</li></ul><p id="c29b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">启用这三个选项后，按钮的内部文本被收集，然后我们断言该文本等于“时间戳到人类日期”。</p><p id="a7cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意——所有的xpaths都是使用<a class="ae mu" href="https://selectorshub.com/" rel="noopener ugc nofollow" target="_blank"> SelectorHub </a>从网站上轻松提取的，去看看吧！</p><p id="1a4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来运行一下:</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="852a" class="mz lx iq lv b gy na nb l nc nd">robot -d results test.robot</span></pre><p id="ff46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">且看<code class="fe ls lt lu lv b">robotframework</code>报告</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/c0ce32db7c91a2bd43882ceb34f59601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_J8sfGI83SV7joi18CwRkA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">机器人框架的测试报告</p></figure><p id="5606" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很好，测试通过了。</p><h1 id="f507" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">通过是不够的</h1><p id="017e" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">让我们来看看纪元转换器主页:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/dc4f431f84d481dea442a4a540a50443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vybb93_YmjTKKIvmRSHIUA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纪元转换器主页</p></figure><p id="ed45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，有许多控制器和部件，大约20种不同的控制器，所有这些都可以测试。</p><p id="3706" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为每个控制器编写显式断言将非常耗时，难以维护，并且会在测试代码中造成许多混乱。</p><p id="a110" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以<strong class="ky ir"> </strong>我们已经到了可以使用<code class="fe ls lt lu lv b">tesseract-ocr</code>和观察UI将测试升级为可视化测试的地步:)</p><h1 id="2343" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">视觉测试推广</h1><p id="4c68" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">正如所承诺的，我们可以通过增加2行代码将这个测试提升为可视化测试:)</p><p id="8ce0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要为我们的网站拍摄一张基线图像。<br/>我拍摄了一张照片，并以<code class="fe ls lt lu lv b">epoch.png</code>的名字存储在<code class="fe ls lt lu lv b">images</code>文件夹中</p><p id="e526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我们</strong>需要在<code class="fe ls lt lu lv b">***Settings***</code>部分导入<code class="fe ls lt lu lv b">WatchUI</code>库，这需要一个<code class="fe ls lt lu lv b">tesseract-ocr</code>可执行文件的完整路径。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="4e70" class="mz lx iq lv b gy na nb l nc nd"><em class="nw">Library           WatchUI</em>    <em class="nw">tesseract_path</em>=C:/Program Files/Tesseract-OCR/tesseract.exe</span></pre><p id="7f0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们从WatchUI库中添加<code class="fe ls lt lu lv b">Compare Screen</code>关键字来区分屏幕和基线图像。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="6c83" class="mz lx iq lv b gy na nb l nc nd">Compare Screen   ./images/epoch.png    <em class="nw">save_folder</em>=${EXECDIR}/outputs   <em class="nw">ssim</em>=0.99</span></pre><p id="a23c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们正在比较图像，允许差异不超过1%(或者，我们希望至少99%的相似性)。</p><p id="9752" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是最终的脚本:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="0231" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们运行<strong class="ky ir"> </strong>这个测试:</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="94cf" class="mz lx iq lv b gy na nb l nc nd">robot -d results test.robot</span></pre><p id="6711" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看这份报告:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/370cec0a6f958b6b6b015337f3de4de0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDsre_5SUSB2ztowr9XDBg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">机器人框架的测试报告</p></figure><p id="20ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试通过，让我们看看<code class="fe ls lt lu lv b">Compare Screen</code>关键字的输出<strong class="ky ir"> </strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/c5870139f24737e1ed1778eb9f7d0139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYnYDzCmUZfEihQb0VDxkg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">比较robotframework报告中的屏幕关键字输出</p></figure><p id="e69c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，OCR机制检测到了基线图像和当前屏幕之间的所有差异。</p><p id="62fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于差异低于1%(或相似度高于99%)，此测试通过。</p><p id="e970" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们再运行一次这个测试，但是这一次要断言100%的相似性。<br/>这很容易通过改变<code class="fe ls lt lu lv b">Compare Screen</code>关键字中的<code class="fe ls lt lu lv b">ssim</code>选项来实现:</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="7379" class="mz lx iq lv b gy na nb l nc nd">Compare Screen   ./images/epoch.png    <em class="nw">save_folder</em>=${EXECDIR}/outputs   <em class="nw">ssim</em>=1.0</span></pre><p id="d215" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行:</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="5621" class="mz lx iq lv b gy na nb l nc nd">robot -d results tests.robot</span></pre><p id="02c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看这份报告</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/f9f0343634143648277b37e78cc9a804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mj7qP0qebwSkIAwzdLL2xg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">机器人框架报告中的视觉差异</p></figure><p id="55d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们可以看到测试失败了，差异产生了大约99.4%的相似性或大约0.6的差异。</p><h1 id="df49" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">视觉测试限制</h1><p id="90c0" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">第一个限制是计时，如果在页面加载时过早进行比较，测试可能会失败。</p><p id="db9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它可以通过隐式等待，有时甚至是固定延迟来克服，但固定延迟通常被视为<a class="ae mu" href="https://testsmells.org/pages/testsmells.html#SleepyTest" rel="noopener ugc nofollow" target="_blank">测试气味</a>。</p><p id="fa73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个限制是图像必须在相同的尺寸下才能被比较。</p><p id="b7d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">阈值设置并不总是直观的，尤其是当像日期这样的字段发生变化时。阈值设置得太高可能会导致剥落，而太低则会导致伪测试用例。</p><p id="e29a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可滚动的页面也会有问题，因为它会在基线和当前屏幕之间产生进一步的人为差异。</p><p id="25f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着测试用例数量的激增，存储可能是另一个问题。<br/>在git存储库中存储图像(和任何其他二进制文件)是一种不好的做法，因为git被优化来分析文本文件，并且所有git操作如merge、rebase、cherrypick等都是基于文本分析的。</p><h1 id="ef68" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="e0f3" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">视觉测试对于增加GUI测试的健壮性是非常棒的。<br/>请记住，GUI测试应该被认为是优先级最低的，视觉测试也是其中的一部分。</p><p id="c315" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于视觉测试的一些限制，应该谨慎评估哪些测试适合视觉区分。</p></div></div>    
</body>
</html>