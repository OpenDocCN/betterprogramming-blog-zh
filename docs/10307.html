<html>
<head>
<title>Create Particle Effects Using Pure SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Pure SwiftUI创建粒子效果</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-particle-effects-using-pure-swiftui-dc55edb6b26a?source=collection_archive---------4-----------------------#2021-12-24">https://betterprogramming.pub/a-particle-effects-using-pure-swiftui-dc55edb6b26a?source=collection_archive---------4-----------------------#2021-12-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="63a8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">触手可及的强大动画</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a88879438d21ca0d08b372d76d8472bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kTa0xOT4fwrOrD-_GphbFQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">里卡多·戈麦斯·安吉尔在<a class="ae ky" href="https://unsplash.com/s/photos/particles?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经写了几十年的代码，真的——老实说，我比以往任何时候都更喜欢这样做。我特别喜欢用SwiftUI编码，因为它很有趣——因为你可以在仅仅几个小时之内，甚至更短的时间内完成一些原型。</p><p id="67bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和我一起在这篇文章中享受SwiftUI的乐趣，为今年(2021年圣诞节)构建一个合适的粒子效果，仅仅使用SwiftUI中强大的动画引擎。</p><p id="8ce9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我认为这里的关键成分是颜色混合模式和动画，我前几个月写了一篇关于后者的论文——你可以在这里阅读所有关于<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/canvas-colour-and-blending-in-swiftui-with-ios-15-cbb2bf6bddc5">的内容</a>。</p><h1 id="04b9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">案情摘要</h1><p id="a138" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">总之，概要——我想创造一个爆炸，一个粒子效果——但我不想用SpriteKit。我想用SwiftUI。建造这个的目标是—</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/5c8975bc9d547f66efbc7ff304ebc249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-RGiKP9h-mJVB7Il7LUaag.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">爆炸的SwiftUI粒子演示</p></figure><p id="39b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你看到的是什么——嗯，它是一个看起来像这样的粒子——更准确地说，是大约256个，使用屏幕模式颜色混合，在ZStack中一个接一个地装载。图标的颜色是红色的，但当它与自身重叠时会变成白色。随着位置、不透明度、比例和旋转在仅持续4秒的动画中被修改，各种白色阴影以不同方式混合。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/4f0c5db89cbbf5513ec93541a5519d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*EOWvAoHlTLekD-RYkJjrSg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自NounProject.com的Alexander Skowalsky的火花</p></figure><p id="8480" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从<a class="ae ky" href="https://thenounproject.com/icon/spark-756346/" rel="noopener ugc nofollow" target="_blank">名词项目</a>下载的，这是一个获取黑白图标的优秀网站。主驱动代码是这样的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="c520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我得到了一个结构体，在这个结构体中我存储了这个动画的所有值，位置，不透明度，角度，比例和旋转。对于我创建的每个粒子，我都用一个值来代替它们。起始值和结束值。</p><p id="2951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我运行第二个视图，它创建了256个粒子，然后SwiftUI在4秒钟内将我刚才提到的所有属性动画化。它使用一些基本的数学方法，通过正弦和余弦，将它们制成动画，并沿着一个圆内的一个角度移动每个粒子。</p><p id="4973" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你在这里看到的爆炸的最终结果是使用我在这里给<a class="ae ky" href="https://bitbucket.org/wizard1066/fun/commits/65da6e68c1f807f1ebd654021f169d62e4a47514" rel="noopener ugc nofollow" target="_blank">的</a>的bitbucket链接下载整个项目，并对它进行处理。您应该能够用这段代码创建各种不同的效果，只需通过更改各种参数——<code class="fe mw mx my mz b">Range</code>参数将产生最大的差异——例如，将<code class="fe mw mx my mz b">AngleRange</code>更改为150，您将获得一半的爆炸。添加这段代码，在你的粒子上随意变换各种颜色，得到一个微妙不同的效果。尝试找到一个新的形状。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="0f32" class="ne lw it mz b gy nf ng l nh ni">let colors = [Color.red, .blue, .purple, .green, .orange, .yellow, .indigo, .pink]</span><span id="ab95" class="ne lw it mz b gy nj ng l nh ni">property.color = colors.shuffled().first!</span></pre><p id="0183" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你应该能够产生任何你可以用SpriteKit得到的效果，只需要在这里或那里做一点调整。这是另一个例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/3bd4a3bd708710266553215904a3c36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PLkw5Cwp8RmeUnFRu7xoBA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我把开始的位置改成了一个随机的数字，并且添加了更多的颜色</p></figure><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="11a9" class="ne lw it mz b gy nf ng l nh ni">var startPosition: CGPoint = CGPoint(x: Double.random(in: 0...UIScreen.screenWidth), y: Double.random(in: 0...UIScreen.screenHeight))</span></pre><p id="de4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个后面的形状看起来像这样—</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/02dd9140e0e1648797793cdb2a2f66c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*z2go8lABntA7VBnx24bTig.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自NounProject.com的贾斯汀·布雷克带来的《迷离档案》</p></figure><p id="6d45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都把我带到了这篇短文的结尾——像我一样玩得开心。</p></div></div>    
</body>
</html>