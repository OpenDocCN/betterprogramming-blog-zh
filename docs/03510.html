<html>
<head>
<title>How to Play Chrome’s Dinosaur Game With Your Face</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用脸玩Chrome的恐龙游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-play-chromes-dinosaur-game-with-your-face-2b8f757e15c7?source=collection_archive---------21-----------------------#2020-02-13">https://betterprogramming.pub/how-to-play-chromes-dinosaur-game-with-your-face-2b8f757e15c7?source=collection_archive---------21-----------------------#2020-02-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="95f3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">享受Face API和ML5js带来的乐趣</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c181ae6c1fa450d9e3dbf62bebc4d9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*psbUlUY9zGoJzk5D"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@callas1900?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">田中亮</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="911e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用Chrome，你可能看过恐龙游戏。</p><p id="9289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的游戏，恐龙跳跃以避免障碍，这是我学习如何用我的脸操纵它的完美目标。</p><p id="1cf2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是原版游戏，如果你没玩过的话。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h1 id="49c4" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">该过程</h1><p id="4e5a" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">在观看了几个来自编码培训的youtube视频后，我了解到让预测模型工作的简化步骤是:</p><ol class=""><li id="f06a" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">收集数据。</li><li id="c4b8" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">训练数据。</li><li id="0bb9" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">部署模型。</li></ol><p id="647b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不想自己编写代码，可以在本文底部随意克隆我的存储库。我已经把文件夹分成了<code class="fe ni nj nk nl b">/collect /train /deploy</code></p><p id="66a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根级别的其他文件是游戏本身的代码。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="2cba" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">收集数据</h1><h2 id="7597" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">1.用ML5js初始化神经网络</h2><pre class="kj kk kl km gt ok nl ol om aw on bi"><span id="af62" class="ny ly it nl b gy oo op l oq or">let options = {    <br/>  inputs: 74,<br/>  outputs: 2,<br/>  task: "classification"  <br/>};<br/>const brain = ml5.neuralNetwork(options);</span></pre><p id="b762" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ni nj nk nl b">inputs</code>设置为74是因为我在存储<code class="fe ni nj nk nl b">mouth</code>和<code class="fe ni nj nk nl b">jawOutline</code>的面部特征。</p><p id="3197" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<code class="fe ni nj nk nl b">mouth</code>和<code class="fe ni nj nk nl b">jawOutline</code>有37个点，每个点包含一个用于<code class="fe ni nj nk nl b">x</code>的数字和一个用于<code class="fe ni nj nk nl b">y</code>的数字，所以我们将37乘以2。</p><h2 id="8d05" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">2.设置界面API</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os lw l"/></div></figure><h2 id="cb47" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">3.开始收集数据</h2><p id="10ee" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">在<code class="fe ni nj nk nl b">gotResults</code>功能中，通过用神经网络<code class="fe ni nj nk nl b">brain</code>调用<code class="fe ni nj nk nl b">.addData()</code>来捕获数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os lw l"/></div></figure><h2 id="f621" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">4.将数据保存为JSON</h2><p id="9c49" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">添加一个触发以下事件的按钮，它会将一个JSON文件保存到您的下载文件夹中。</p><pre class="kj kk kl km gt ok nl ol om aw on bi"><span id="97d4" class="ny ly it nl b gy oo op l oq or">brain.saveData();</span></pre></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="1540" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">训练数据</h1><p id="7938" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">使用上面生成的JSON文件，训练神经网络，并保存模型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os lw l"/></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="cd96" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">部署数据</h1><p id="66ce" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">这是您测试您的模型是否实际工作的地方。</p><p id="ce63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正确地做了上面的所有事情，你的下载文件夹中应该有三个文件:<code class="fe ni nj nk nl b">model.json</code>、<code class="fe ni nj nk nl b">model.weights.bin</code>和<code class="fe ni nj nk nl b">model_meta.json</code>。</p><p id="535b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">加载您的自定义模型，同时保留Face API模型，这样您的自定义模型就可以对Face API的结果进行预测。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os lw l"/></div></figure><p id="e903" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的模型有效，那就只需要用回调函数把所有东西包装起来。</p><p id="c88d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在回调中，每当事件为<code class="fe ni nj nk nl b">jump</code>时，我触发T-Rex跳跃。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="26b0" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">实验</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/7e21ac2266cce9b0ac05ac37b01b1212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3cFtsIcSZ9yg37QBmu49jg.png"/></div></div></figure><p id="d845" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢<a class="ae ky" href="https://github.com/ml5js/ml5-library" rel="noopener ugc nofollow" target="_blank"> ML5js </a>。它已经包含了检测面部特征的Face-API。</p><h2 id="c35c" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">尝试#1</h2><p id="d5ef" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">最初，我想用我的眉毛来控制游戏。然而，我的“扬起的眉毛”的脸和我休息时的脸太接近了，所以模特无法区分它们。</p><h2 id="9146" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">尝试#2</h2><p id="c893" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">我决定用张开和闭上的嘴，因为这样更明显。</p><p id="d533" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上图所示，当我准备好收集数据时，我点击了“收集”按钮。</p><p id="5c66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">收集的第一组数据只包含一个标签或一个类别。当我尝试训练时，它给出了一个关于热编码的错误。</p><h2 id="2a8f" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">尝试#3</h2><p id="a92b" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">然后我决定收集两个标签:</p><ol class=""><li id="b92a" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">张开嘴</li><li id="4f48" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">正常(闭着嘴)</li></ol><p id="a0f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ni nj nk nl b">Open</code>按钮实际上是一个开关。当它是<code class="fe ni nj nk nl b">Open</code>时，收集的数据被标记为<code class="fe ni nj nk nl b">open</code>。</p><p id="f918" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我点击<code class="fe ni nj nk nl b">Open</code>时，它切换到<code class="fe ni nj nk nl b">Normal</code>——如果我收集数据，该数据被标记为正常。</p><p id="e589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我点击<code class="fe ni nj nk nl b">Save</code>按钮保存数据的JSON文件。</p><p id="889b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，当我用1000个纪元(1000次迭代的训练)进行训练时，损失并没有下降到接近于零。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/57569e9e95db212cca2b51b1650a48ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxjHBonfdvIONbwe_CYjOw.png"/></div></div></figure><h2 id="7c51" class="ny ly it bd lz nz oa dn md ob oc dp mh li od oe mj lm of og ml lq oh oi mn oj bi translated">尝试#4</h2><p id="e87e" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">我收集了更多的数据——尤其是更多的<code class="fe ni nj nk nl b">Normal</code>面部数据。</p><p id="a6f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它成功地预测了我的嘴是否张开。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="c3fa" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">结果呢</h1><ul class=""><li id="b63e" class="mu mv it lb b lc mp lf mq li ov lm ow lq ox lu oy na nb nc bi translated">它触发跳跃有点滞后。我怀疑这是因为我正在渲染两个画布，同时运行多个模型。</li><li id="f608" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu oy na nb nc bi translated">它只使用我的面部数据进行训练。它可能对其他人不起作用。</li><li id="bae9" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu oy na nb nc bi translated">真的有用！</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/d08e1e34fbadcd47baf1eec2d3399897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UH87U4Z-tz7_sVaV3MXkrw.gif"/></div></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="da8b" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">代码</h1><div class="pa pb gp gr pc pd"><a href="https://github.com/davidyu37/face-game" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">davidyu 37/打脸游戏</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">在GitHub上创建一个帐户，为davidyu37/face-game开发做贡献。</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">github.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr ks pd"/></div></div></a></div></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="b90e" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">游戏</h1><div class="pa pb gp gr pc pd"><a href="https://davidyu37.github.io/face-game/" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">霸王龙游戏</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">霸王龙恐龙游戏按“空格键”开始游戏，张开嘴跳</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">davidyu37.github.io</p></div></div></div></a></div><p id="ad84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我是一名学习机器学习的全栈开发人员。感谢阅读！</p></div></div>    
</body>
</html>