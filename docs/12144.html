<html>
<head>
<title>React v18: A First Look at useTransition hook — Wait, but Why?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React v18:先看一下use transition hook——等等，但是为什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-v18-usetransition-hook-why-f5d8880dc64d?source=collection_archive---------6-----------------------#2022-05-15">https://betterprogramming.pub/react-v18-usetransition-hook-why-f5d8880dc64d?source=collection_archive---------6-----------------------#2022-05-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f27c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这个挂钩不是我们在日常工作中需要用到的东西，但对于用户端性能调优来说，它是一种受欢迎的方法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/90779c94de55b47c29aea22365a9dac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8zZFtGAFC0WR6sL6VGgaw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在react中使用转换挂钩</p></figure><p id="47b2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">React v18引入了<code class="fe lr ls lt lu b">useTransition</code>钩子，它看起来就像是另一个钩子，但是让我们看看它的用途以及它为未来打下的基础。</p><p id="f2bf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很久以前，React暗示了并发模式的概念，其实现本身就是一个谜。然而，我们的目标是在复杂应用程序中缓慢的密集型操作和急需的更快的UI交互之间划一条线。</p><p id="9bbf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为一名新生，我遇到的一个实际问题是在构建一个搜索组件时，该组件用于在每次按键时从后端获取推荐。我用去抖机制重构了它，以避免过多地触及后端。</p><p id="b7d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">简而言之，去抖意味着，你只在固定的时间间隔内执行某个动作。在我的例子中，按键2秒钟后点击API，如果当时注册了另一个按键，则取消正在进行的API调用。</p><p id="c8a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们反思，那么我们可以理解，解决方案是将繁重的API操作从搜索框的主要输入流程中移出。如果它是连续的，在输入框中输入会感觉很慢。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="ff48" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从概念上讲，react用这个钩子做了同样的事情。它允许您将繁重的逻辑从主流程转移到独立于输入流程的<code class="fe lr ls lt lu b">startTransition</code>方法中。这导致将工作分成高优先级和低优先级队列。</p><p id="8f5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是一种“明显”的性能提升，不应该与react端的应用程序自动优化相混淆。加速是为了终端用户的体验，而反应完成的工作量是一样的。</p><p id="9727" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，它没有跳过中间的任何操作，也就是说，在渲染时根据输入的状态计算UI，它只是改变了渲染倍数表和输入过程的优先级。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="1431" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们来看看它的运行情况。在我们的演示应用程序中，我们将打印输入数字的100，000倍。这个计算是一个相当繁重的操作，会降低我们的应用程序的速度。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi me"><img src="../Images/a45c2d9b9285f19c5d90c1bdd074eb95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LRk_DEvcdS_598vjgnb_Yg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输入体验滞后。</p></figure></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="9475" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将<code class="fe lr ls lt lu b">useTransition</code>挂钩用于生成倍数。</p><p id="baa3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它提供了一个布尔标志来知道流程是否完成，并提供了一个<code class="fe lr ls lt lu b">startTranistion</code>函数来包装密集的流程。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi me"><img src="../Images/76019cf5db0add9d6b0ff916900adf69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C-SVBh9N_dyJ-xVn4NGrXg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">setTransition挂钩版本</p></figure><p id="f7a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要注意的关键点是输入和倍数表之间呈现的分离。</p><h1 id="7aaf" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">结论</h1><p id="3ae1" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">我举的这个例子可能对演示这个钩子的用法有点夸张，但是请分享一下你觉得哪个地方更合适。这个挂钩不是我们在日常工作中需要用到的东西，但对于用户端性能调优来说，它是一种受欢迎的方法。</p><p id="12fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完全有可能在不使用这个钩子的情况下复制这种行为，但是在React中看到任务优先级表明并发性的良好进展，并且可以帮助开发人员构建更精细的UX。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><pre class="kg kh ki kj gt nc lu nd ne aw nf bi"><span id="1175" class="ng mg iq lu b gy nh ni l nj nk"><strong class="lu ir">Want to Connect?</strong></span><span id="413b" class="ng mg iq lu b gy nl ni l nj nk">🏭 LinkedIn: <a class="ae nm" href="https://www.linkedin.com/in/sameerkumar1612/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/sameerkumar1612</a></span></pre></div></div>    
</body>
</html>