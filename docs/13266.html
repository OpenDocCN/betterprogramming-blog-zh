<html>
<head>
<title>How To Read a JSON File and Return Its Content in a Spring Boot API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Spring Boot API中读取JSON文件并返回其内容</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-read-a-json-file-and-return-its-content-in-a-spring-boot-api-1f69e552f7af?source=collection_archive---------0-----------------------#2022-08-12">https://betterprogramming.pub/how-to-read-a-json-file-and-return-its-content-in-a-spring-boot-api-1f69e552f7af?source=collection_archive---------0-----------------------#2022-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="55c1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用Java和Kotlin中的静态JSON文件模仿API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/26353318aba30efd63ece8d89f2b2a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i_DX5GfFGR0rlcdy"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@douglasamarelo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">道格拉斯·洛佩斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="0503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近不得不开发一个API，它应该返回非常复杂和嵌套的数据。构建这个API需要数百个查询，我的团队非常着急。这就是为什么我们决定用一个包含预期数据的JSON文件来模拟这个API，这个文件是由数据科学家手工编写的。</p><p id="8602" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我可以直接从API返回JSON文件，但这不是我们的想法。相反，API应该从项目的文件夹中读取JSON文件，将它转换成Java对象，并将其序列化为JSON，就像任何Spring Boot API通常会做的那样。所有这些都以最快的方式和最简单的逻辑实现。</p><p id="6f30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们学习如何在Spring Boot中构建一个API，它读取一个静态JSON文件并通过Jackson返回它在JSON中的内容。</p><h1 id="d442" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么API可能需要返回JSON文件的内容</h1><p id="724e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">读取静态JSON文件的内容并通过API返回它是有用的，至少有两个原因。让我们深入研究一下。</p><ol class=""><li id="a7fa" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">您的API响应永远不会改变:在这种情况下，响应可以只产生一次，并且可以缓存在一个静态JSON文件中。这在API响应复杂或涉及嵌套结构时尤其有用。</li><li id="a76e" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">模拟API响应:使用一个静态JSON文件作为API响应的数据源是模拟API的一种好的快速方法。</li></ol><h1 id="72e1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">从JSON文件到Spring Boot的API响应</h1><p id="1674" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在让我们看看如何用Java和Kotlin构建一个API来读取JSON文件并返回其Spring Boot内容。</p><h2 id="e276" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated"><strong class="ak">先决条件</strong></h2><p id="0cd8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，您必须将<code class="fe ns nt nu nv b"><a class="ae ky" href="https://mvnrepository.com/artifact/commons-io/commons-io" rel="noopener ugc nofollow" target="_blank">commons-io.ommons-io</a></code>和<code class="fe ns nt nu nv b"><a class="ae ky" href="https://mvnrepository.com/artifact/org.json/json/20220320" rel="noopener ugc nofollow" target="_blank">org.json</a></code>添加到项目的依赖项中。</p><p id="0a75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是Maven用户，请将以下依赖项添加到项目的POM文件中:</p><pre class="kj kk kl km gt nw nv nx ny aw nz bi"><span id="5123" class="ng lw it nv b gy oa ob l oc od">&lt;dependency&gt;<br/>    &lt;groupId&gt;commons-io&lt;/groupId&gt;<br/>    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;<br/>    &lt;version&gt;2.11.0&lt;/version&gt;<br/>&lt;/dependency&gt;</span><span id="f009" class="ng lw it nv b gy oe ob l oc od">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.json&lt;/groupId&gt;<br/>    &lt;artifactId&gt;json&lt;/artifactId&gt;<br/>    &lt;version&gt;20220320&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="850a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，如果您是Gradle用户，请将此依赖项添加到项目的构建文件中:</p><pre class="kj kk kl km gt nw nv nx ny aw nz bi"><span id="b05a" class="ng lw it nv b gy oa ob l oc od">implementation group: 'commons-io', name: 'commons-io', version: '2.11.0'</span><span id="e939" class="ng lw it nv b gy oe ob l oc od">implementation group: 'org.json', name: 'json', version: '20220320'</span></pre><p id="a171" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经具备了实现教程目标所需的一切。</p><h2 id="6d91" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">构建读取静态JSON文件的API</h2><p id="950c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，让我们看一下静态JSON文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="b3fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，这只是一个简单的例子。您的静态JSON文件可能要复杂得多。</p><p id="df66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，将<code class="fe ns nt nu nv b">static-data.json</code>文件放在Spring Boot的<code class="fe ns nt nu nv b">resources</code>文件夹中，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/b27d556adc8a9e3a900d3c03391a7a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*RXDVRLO4-8ypEB58tef4XA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">注意“resources”文件夹中的“static-data.json”文件</p></figure><p id="71ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经准备好读取JSON文件并返回其内容。让我们看看如何在Java和Kotlin中实现这一点。</p><h2 id="6deb" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated"><strong class="ak"> Java </strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><h2 id="9d9b" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated"><strong class="ak">科特林</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="aa2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，<code class="fe ns nt nu nv b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ClassPathResource.html" rel="noopener ugc nofollow" target="_blank">ClassPathResource</a></code>用于将<code class="fe ns nt nu nv b">static-data.json</code>加载到<code class="fe ns nt nu nv b">staticDataResource</code>变量中。如果你不熟悉<code class="fe ns nt nu nv b">ClassPathResource</code>，这是一个Spring Boot类，用于加载放置在<code class="fe ns nt nu nv b">resouces</code>文件夹中的资源。</p><p id="eb8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，<code class="fe ns nt nu nv b">staticDataResource</code>的<code class="fe ns nt nu nv b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html" rel="noopener ugc nofollow" target="_blank">InputStream</a></code>表示被传递给<code class="fe ns nt nu nv b">IOUtils.toString()</code>函数。这个<code class="fe ns nt nu nv b">commons-io</code>实用函数将把它转换成一个<code class="fe ns nt nu nv b">String</code>变量。</p><p id="8913" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe ns nt nu nv b">staticDataString</code>变量用于初始化一个<code class="fe ns nt nu nv b"><a class="ae ky" href="https://stleary.github.io/JSON-java/org/json/JSONObject.html" rel="noopener ugc nofollow" target="_blank">JSONObject</a></code>实例，用<code class="fe ns nt nu nv b"><a class="ae ky" href="https://stleary.github.io/JSON-java/org/json/JSONObject.html#toMap--" rel="noopener ugc nofollow" target="_blank">toMap()</a></code>方法获得的<code class="fe ns nt nu nv b">Map&lt;String, Objcet&gt;</code>表示作为API响应返回。</p><p id="cc53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">带有<code class="fe ns nt nu nv b">.toMap()</code>的<code class="fe ns nt nu nv b">Map&lt;String, Objcet&gt;</code>对象将被Jackson转换成如下200 HTTP <code class="fe ns nt nu nv b">content-type: application/json</code>响应:</p><pre class="kj kk kl km gt nw nv nx ny aw nz bi"><span id="a215" class="ng lw it nv b gy oa ob l oc od">{<br/>  "name": "Maria",<br/>  "surname": "Williams",<br/>  "age": 35<br/>}</span></pre><p id="3680" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这与<code class="fe ns nt nu nv b">static-data.json</code>文件的内容完全匹配。</p><p id="70e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊！您刚刚实现了一个API，它读取一个静态JSON文件并在Spring Boot中返回其内容。</p><h1 id="a8cf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="d63c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在本文中，您了解了如何在Spring Boot Java或Kotlin应用程序中使用静态JSON文件。具体来说，您看到了如何实现API来读取静态JSON文件并以<code class="fe ns nt nu nv b">content-type: application/json</code>格式返回其内容。这对于用几行代码模仿API或者实现响应从不改变的API特别有用。</p><p id="0111" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！我希望这篇文章对你有所帮助。请随意留下任何问题、评论或建议。</p></div></div>    
</body>
</html>