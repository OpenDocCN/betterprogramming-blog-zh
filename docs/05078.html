<html>
<head>
<title>Lessons and Tips We Learned From Building an App Using React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们从使用React Native构建应用程序中学到的经验和技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lessons-and-tips-we-learnt-from-building-react-native-app-48acb744e76c?source=collection_archive---------4-----------------------#2020-06-05">https://betterprogramming.pub/lessons-and-tips-we-learnt-from-building-react-native-app-48acb744e76c?source=collection_archive---------4-----------------------#2020-06-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="675d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">结构至关重要</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e42396624594d2e1a768749a023ff192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nnc4iHqUnB-QQTh0"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰夫·谢尔登在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="6f13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我在Reddit 上创建的一个帖子，我决定写一篇更详细的文章，介绍我和我的团队从我们为客户开发React原生应用的经验中学到的一些技巧和教训。希望这能对其他注册护士派上用场！</p><p id="8ece" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于我:我已经在摩洛哥的一家软件公司工作了几年。我们帮助初创公司在网络和移动平台上推广他们的早期技术产品。我们开始采用React Native作为我们移动开发服务的主要技术，从那时起，在由3-4名React开发人员组成的团队的帮助下，我们已经能够向商店发布4款基于RN的应用程序。</p><p id="cb6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将只关注与React本机相关的内容——React或JavaScript建议可以在许多其他文章中找到。例如，我不会谈论IDEs、beautiier/ESLint、Redux或React生命周期相关的最佳实践。</p><p id="9a38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说了这么多，开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6760" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">包维护和管理</h1><p id="1291" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为发布而设计的应用程序可能有很长的寿命。</p><p id="e92c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">新版本、修复漏洞和维护可能需要数月甚至数年时间。在此期间，您正在使用的一个或多个包发生了重大变化，或者您的一个依赖项变得过时或不再维护，这是很常见的。</p><p id="29fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，无论是在开发阶段还是在发布到商店之后，为了让您的应用程序不仅保持活力，而且在性能和稳定性方面更好，让您的<code class="fe mz na nb nc b">package.json</code>保持最新是至关重要的:</p><ul class=""><li id="39a5" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">花点时间(每个月左右)去<strong class="lb iu">探索你的依赖项的不同GitHub repos，</strong>读changelogs，检测这些包是否有性能上的优化或者大的改进。还有，注意版本冲突。</li><li id="caff" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">一个没有活动库的库(没有最近的拉请求或变更)，不是一个好的迹象，特别是在RN中。<strong class="lb iu">总是检测旧的库，</strong>并且寻找一个替代库，除非这个库做简单的事情并且不需要维护。</li><li id="876b" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><strong class="lb iu">不要同时更新或安装多个软件包。</strong>只安装一个，测试一下，确保一切正常，然后等一会儿。喝一杯咖啡，再次测试——一些野生虫子在第一次测试中没有出现。</li></ul><p id="3a0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>如果你使用GitHub，你可以集成<a class="ae ky" href="https://dependabot.com/" rel="noopener ugc nofollow" target="_blank">dependent bot</a>来自动化你每个月的依赖更新。例如，它为每个包更新创建一个有文档记录的pull请求。</p><ul class=""><li id="1852" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><strong class="lb iu">不要长时间卡在一个老RN版本里。你无法想象我们的一个应用程序仅仅从RN 59切换到RN 62就改进了多少。</strong></li></ul><p id="adc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>当你的React原生版本高于60时更新相当容易(<a class="ae ky" href="https://react-native-community.github.io/upgrade-helper/" rel="noopener ugc nofollow" target="_blank"> React原生升级助手</a>可能有用)，但是从5x到60+，我建议用你想要的RN版本创建一个新项目。</p><p id="7adb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装您的<code class="fe mz na nb nc b">package.json</code>的所有包和所有本地配置，启动“Hello，World！”app上模拟器，然后复制粘贴你的JS源文件夹。现在，你只需要处理JS问题。是的，这看起来有点牵强，而且需要时间，但是这是我们发现的没有本地问题的最安全的更新方式。</p><ul class=""><li id="1c2c" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">像RN版本一样，<strong class="lb iu">导航和路由必须保持相对最新。导航包由于其贡献者而不断改进，为什么不从中受益呢？例如，我们已经用React Navigation 5解决了许多手势问题。</strong></li><li id="467f" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><strong class="lb iu">随时了解RN版本的演变，</strong>并始终计划更新(有时你必须与负责业务方面的任何人争论和讨论，以确定这些更新任务的优先顺序)。升级一个RN版本对于一个普通的项目来说可能需要整整两天的时间，而且必须由一个人来完成。</li><li id="1d2a" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><strong class="lb iu">不要安装一个巨大的UI库</strong>只是为了使用其中的checkbox元素。试着花些时间开发你自己的复选框，或者使用专门的复选框包。我并不是说不要使用UI库——你可以使用它们来加速一个快速项目的开发，或者如果你确定要使用其中的许多元素。但是在某种程度上，当应用程序具有独特用户界面设计时，这些库在定制方面非常有限。您花在定制上的时间可以用来创建适合您项目的自己的项目，并且您的项目将是可重用的。此外，它们还附带了许多依赖项。没有它你的应用会更轻。</li><li id="7457" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">不要犹豫使用一些expo包，即使是在一个非expo项目中(比如苹果认证，脸书登录等等)。).世博会项目是由大公司精心记录和维护的大型项目。</li></ul><p id="6dbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>对于一个nonexpo项目，你必须安装react-native-unimodules。</p><ul class=""><li id="45c7" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">而且，是的，<strong class="lb iu">纱不错。</strong></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="17c6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">图像管理</h1><p id="41b5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你的应用程序包含或操作几个图像，比如一个社交网络的feed或一个图片列表，使用一个简单的<code class="fe mz na nb nc b">&lt;Image/&gt;</code>标签可能并不总是表现良好。图像的第一次显现需要很长时间——有时，它们永远不会出现或者会被延迟。为了避免这种情况，您必须:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/0e496a7f8d71a76bb3ecb2e47271f5a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H0z4XERww2bkNCey"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">雅各布·欧文斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><ul class=""><li id="25fe" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><strong class="lb iu">使用带有图像操作的内容分发网络(CDN)，</strong>例如调整大小、压缩或强制某些扩展，因此您可以编写一个通用函数，将所有图像的URL格式化到您的CDN服务，例如:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用通用函数格式化CDN URLs</p></figure><p id="1c49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具有图像操作的CDN具有许多优点。首先，它将从地理上最近的服务器提供图像。它还可以根据需要调整图像的质量和尺寸，而无需重新加载图像，并且您还可以强制图像扩展(例如，使用WebP格式可以优化加载时间)。</p><p id="b22b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多提供CDN和图像处理的付费服务，但是大部分都提出了低流量的免费方案(Cloudinary，imgix，亚马逊CloudFront <a class="ae ky" href="https://aws.amazon.com/blogs/networking-and-content-delivery/resizing-images-with-amazon-cloudfront-lambdaedge-aws-cdn-blog/" rel="noopener ugc nofollow" target="_blank"> with Lambda和S3 </a>等。).</p><ul class=""><li id="8816" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><strong class="lb iu">根据图片容器调整图片尺寸。</strong>例如，一幅尺寸为200x200的图像完全适合<code class="fe mz na nb nc b">&lt;Image style={{height :200 , width : 200}}/&gt;</code></li><li id="3f22" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">您的资产文件夹中不需要大图片，请务必花时间检查是否有大尺寸的资产。许多在线工具可以在互联网上找到<strong class="lb iu">在不影响质量的情况下缩小图像的尺寸</strong>。</li><li id="3396" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">还尝试<strong class="lb iu">提供</strong><code class="fe mz na nb nc b"><strong class="lb iu">@1x</strong></code><strong class="lb iu"/><code class="fe mz na nb nc b"><strong class="lb iu">@2x</strong></code><strong class="lb iu"/><code class="fe mz na nb nc b"><strong class="lb iu">@3x</strong></code><strong class="lb iu">尺寸</strong>来处理不同的屏幕密度</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c80a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">各种注册护士建议</h1><ul class=""><li id="021a" class="nd ne it lb b lc mu lf mv li nu lm nv lq nw lu ni nj nk nl bi translated"><strong class="lb iu">使用问题和错误跟踪</strong>对于检测和修复错误和意外崩溃非常有帮助。在测试阶段和部署到商店之后，它都非常有用。(一些好的错误跟踪器:Crashlytics、Sentry或App Center。)</li><li id="6df5" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><strong class="lb iu">尽快在</strong>(或通过Google Play的内部测试)<strong class="lb iu"/>上发布你的应用，即使你的应用还没有完成。这将有助于你尽早管理发布过程，防止你在最后一刻<strong class="lb iu"> </strong>(那时你肯定会有其他事情要处理)处理它。</li><li id="d25d" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">如果你在iOS上开发(反之亦然),一定要花时间检查你的Android版本，以确保在两个操作系统上一切正常</li><li id="677e" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">构建和组织你的组件和项目依赖于你的项目(例如，是否使用Redux)，但是文件结构没有标准，也没有更好的方法可以让你的应用程序比其他的更好。但是拥有一个干净的项目更酷也更容易维护——对于我们的项目，我们有时使用一个文件夹来重新组织所有的屏幕文件(导航屏幕)和一个文件夹来存放它们的组件和元素。可以总结如下:</li></ul><pre class="kj kk kl km gt nx nc ny nz aw oa bi"><span id="6b3b" class="ob md it nc b gy oc od l oe of"><br/>├── src<br/>│ ├── assets<br/>│ │ ├── fonts<br/>│ │ ├── images<br/>│ ├── components<br/>│ │ ├── feedModule<br/>│ │ │ ├── FeedElement1.js<br/>│ │ │ ├── FeedElement2.js<br/>│ │ ├── chatModule<br/>│ │ │ ├── ChatElement1.js<br/>│ │ │ ├── ChatElement2.js<br/>│ │ ├── genericComponents<br/>│ │ │ ├── C.js<br/>│ │ │ ├── C2.js<br/>│ ├── screens<br/>│ │ ├── feedScreen.js<br/>│ │ ├── chatScreen.js<br/>│ ├── utils<br/>…</span></pre><p id="1d46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时我们按模块重组(将屏幕和它的元素放在同一个文件夹中)。你也可以在这里查看详细的原子方法。</p><ul class=""><li id="7214" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><strong class="lb iu">使用flex，并尝试在屏幕上定位你的UI元素。</strong>当你第一次在iPad上打开应用程序时，你会大吃一惊，因为你的风格，它能很好地适应屏幕。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f2ad" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="3980" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">就是这样。你可能已经注意到这篇文章更关注于RN项目的结构部分。我认为当你想要构建一个应该被发布的应用程序时，这是一个不可忽视的重要方面。</p><p id="6b37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有其他重要的部分(优化<code class="fe mz na nb nc b">FlatList</code>、测试、发布、自动化构建、RN repo管理等)。)的文章，但紧凑的文章读起来更舒服。也许我会再写一篇。</p></div></div>    
</body>
</html>