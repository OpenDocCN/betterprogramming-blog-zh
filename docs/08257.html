<html>
<head>
<title>10 More Tips and Tricks for Data Scientists (Vol. 5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学家的10个更多提示和技巧(第5卷)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10-tips-and-tricks-for-data-scientists-vol-5-ef86aea08b6c?source=collection_archive---------0-----------------------#2021-04-10">https://betterprogramming.pub/10-tips-and-tricks-for-data-scientists-vol-5-ef86aea08b6c?source=collection_archive---------0-----------------------#2021-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f3ba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对日常任务有用的代码片段</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6b09d78311e595d3e02d6519dabd78e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M9kFO5cbzkll0v28"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@darias_big_world?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">达莉亚·沃尔科娃</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="ec67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经开始为数据科学家撰写一系列关于技巧和诀窍的文章(主要用Python和R语言)。如果您错过了前几期:</p><p id="3623" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一卷:</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/10tips-and-tricks-for-data-scientists-vol-1-a870455325da"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">数据科学家的10个技巧和诀窍</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">R和Python中有用的代码片段</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">better编程. pub</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="1ffd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二卷:</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/10-tips-and-tricks-for-data-scientists-vol-2-5640ccd1aa5e"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">数据科学家的10个惊人技巧和诀窍</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">一些更有用的R和Python代码片段</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">better编程. pub</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm ks ly"/></div></div></a></div><p id="a1fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三卷:</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/10-tips-and-tricks-for-data-scientists-part-3-52ffbddcba26"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">数据科学家会喜欢的10个真实世界的提示和技巧</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">Python、R等语言中一些更有用的代码片段</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">better编程. pub</p></div></div><div class="mh l"><div class="mo l mj mk ml mh mm ks ly"/></div></div></a></div><p id="f0f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第4卷:</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/10-tips-and-tricks-for-data-scientists-vol-4-76b0b732a94f"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">数据科学家的10个Python和R技巧</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">在Pandas中输入缺失值，用mode替换分类变量，等等</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">better编程. pub</p></div></div><div class="mh l"><div class="mp l mj mk ml mh mm ks ly"/></div></div></a></div></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="d70a" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">计算机编程语言</h1><h2 id="f387" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">1.熊猫是如何结合的</h2><p id="9ce0" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">此函数返回两列之间的第一个非<code class="fe og oh oi oj b">null</code>值:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="2257" class="np my it oj b gy oo op l oq or">import pandas as pd<br/>import numpy as np<br/> <br/> <br/>df=pd.DataFrame({"A":[1,2,np.nan,4,np.nan],"B":['A',"B","C","D","E"]})<br/> <br/>df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/7d3a7d4113e7084e0cda64e1d0363da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:208/format:webp/0*GiR02FnCpNf9FQD4.png"/></div></figure><p id="937f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，它将返回A列的值，如果它们是<code class="fe og oh oi oj b">null</code>，它将返回B列的相应值:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="82ef" class="np my it oj b gy oo op l oq or">df['combined'] = df['A'].combine_first(df['B']) <br/>df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/60d9a16e2915dd22559ab57fbef225f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/0*eUy8HB_1nKLzc-pz.png"/></div></figure><h2 id="297c" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">2.如何在Python中禁用所有警告</h2><p id="c580" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">通过运行以下代码块，可以禁用所有Python警告:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="b97d" class="np my it oj b gy oo op l oq or">import sys<br/>if not sys.warnoptions:<br/>    import warnings<br/>    warnings.simplefilter("ignore")</span></pre><h2 id="2e3d" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">3.如何将熊猫数据帧转换成XML</h2><p id="bda3" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">没有pandas函数将一个<code class="fe og oh oi oj b">DataFrame</code>转换成XML，但是我们将向您展示如何用一个简单的自定义函数来完成。这非常有用——尤其是在使用Flask并且希望API输出XML文件时。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="7f2b" class="np my it oj b gy oo op l oq or">#lets create a dataframe df=pd.DataFrame({'A':[1,2,3,4,5],'B':['a','b','c','d','e']}) df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/c7fe45a09f39c6f2052f94bf059ef164.png" data-original-src="https://miro.medium.com/v2/resize:fit:178/format:webp/0*Wo4V9rLTyQyIRZvM.png"/></div></figure><p id="60b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们构建<code class="fe og oh oi oj b">to_xml</code>函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/873833cd638d329845ffd863de636e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/format:webp/0*2KoIy3TYL9ZvPR1G.png"/></div></figure><p id="a350" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果您想将其保存为XML:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="9f7d" class="np my it oj b gy oo op l oq or">with open('df.XML', 'w') as f: f.write(to_xml(df))</span></pre><h2 id="a1a3" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">4.用另一个字符串列表替换一个字符串列表</h2><p id="fb40" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">如果不应用<code class="fe og oh oi oj b">for</code>循环或多个正则表达式调用，没有任何通用的方法可以在文本中用另一个字符串列表替换一个字符串列表。有了这个快速简单的方法，我们可以使用pandas <code class="fe og oh oi oj b">DataFrames</code>在一行代码中完成:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="5712" class="np my it oj b gy oo op l oq or">import pandas as pd</span><span id="43d4" class="np my it oj b gy oy op l oq or">df = pd.DataFrame({'text': ['Billy is going to visit Rome in November', 'I was born in 10/10/2010', 'I will be there at 20:00']})</span><span id="db55" class="np my it oj b gy oy op l oq or">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/802d7b2626ca9ad5b7f4dff3b0818db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/0*3mdUAkPKz6E6iuxK.png"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/b6ff64a5f25ecf1db8d94b3a91333095.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/0*f14OuyuRPrsKj2qc.png"/></div></figure><p id="1558" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，文本上的替换是按照它们在列表中出现的顺序进行的。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="bdc3" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">稀有</h1><h2 id="76a1" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">5.在Tidyverse中使用<code class="fe og oh oi oj b">select_if</code> / <code class="fe og oh oi oj b">rename_if</code></h2><p id="0179" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated"><code class="fe og oh oi oj b">select_if</code>函数属于<code class="fe og oh oi oj b">dplyr</code>，当我们想根据一些条件选择一些列时非常有用。我们还可以添加一个适用于列名的函数。</p><p id="cae4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我只想选择数字变量，并在它们的列名前添加前缀<code class="fe og oh oi oj b">numeric_</code>:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="7e11" class="np my it oj b gy oo op l oq or">library(tidyverse) </span><span id="ec5c" class="np my it oj b gy oy op l oq or">iris%&gt;%select_if(is.numeric, list(~ paste0("numeric_", .)))%&gt;%head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/bc17eefcebceb3a683cb6af3fc3f086b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*H8OZqC6vf2iFIMAT.png"/></div></div></figure><p id="3e9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们也可以用同样的方式使用<code class="fe og oh oi oj b">rename_if</code>。一个重要的注意事项是<code class="fe og oh oi oj b">rename_if()</code>、<code class="fe og oh oi oj b">rename_at()</code>和<code class="fe og oh oi oj b">rename_all()</code>已经被<code class="fe og oh oi oj b">rename_with()</code>取代。匹配的<code class="fe og oh oi oj b">select</code>语句已经被<code class="fe og oh oi oj b">select()</code> + <code class="fe og oh oi oj b">rename_with()</code>的组合所取代。</p><p id="d840" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些功能被取代是因为<code class="fe og oh oi oj b">mutate_if()</code>和好友被<code class="fe og oh oi oj b">across()</code>取代。<code class="fe og oh oi oj b">select_if()</code>和<code class="fe og oh oi oj b">rename_if()</code>已经使用整齐选择，所以不能用<code class="fe og oh oi oj b">across()</code>替换。相反，我们需要一个新的功能。</p><h2 id="ade3" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">6.在Tidyverse中使用<code class="fe og oh oi oj b">where</code></h2><p id="935b" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">我们可以通过选择函数返回<code class="fe og oh oi oj b">true</code>的变量，使用<code class="fe og oh oi oj b">where</code>来<code class="fe og oh oi oj b">select</code>或<code class="fe og oh oi oj b">rename</code>列。</p><p id="905d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用与上面相同的例子。假设我只想选择数字变量，并在它们的列名中添加前缀<code class="fe og oh oi oj b">numeric_</code>:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="91b0" class="np my it oj b gy oo op l oq or">library(tidyverse) </span><span id="7fb5" class="np my it oj b gy oy op l oq or">iris%&gt;%rename_with(~ paste0("numeric_", .), where(is.numeric))%&gt;% select(where(is.numeric))%&gt;%head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/7eae6afa616e665b560960350c3076b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WIf9sIZ4gYk61kns.png"/></div></div></figure><h2 id="a34d" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">7.在Tidyverse中使用<code class="fe og oh oi oj b">everything</code></h2><p id="448f" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">在许多数据科学项目中，我们希望一个特定的列(通常是因变量<em class="pc"> y </em>)出现在数据集中的第一个或最后一个。我们可以使用<code class="fe og oh oi oj b">dplyr</code>包中的<code class="fe og oh oi oj b">everything()</code>来实现这一点。</p><p id="b854" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我希望列<code class="fe og oh oi oj b">Species</code>在我的数据集中首先出现<strong class="lb iu"> </strong>。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="0197" class="np my it oj b gy oo op l oq or">library(tidyverse) </span><span id="08b7" class="np my it oj b gy oy op l oq or">mydataset&lt;-iris%&gt;%select(Species, everything()) mydataset%&gt;%head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/41884a098f86852cc9b22bfceed9247a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Zf-UNCqoil5Qsb1J.png"/></div></div></figure><h2 id="7ec6" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">8.在Tidyverse中使用<code class="fe og oh oi oj b">relocate</code></h2><p id="4d37" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated"><code class="fe og oh oi oj b">relocate()</code>是dplyr 1.0.0中新增的。您可以使用<strong class="lb iu"> </strong> <code class="fe og oh oi oj b">.before</code>或<code class="fe og oh oi oj b">.after</code>来指定列的确切位置。</p><p id="890f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我希望<code class="fe og oh oi oj b">Petal.Width</code>列出现在<code class="fe og oh oi oj b">Sepal.Width</code>的旁边:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="239d" class="np my it oj b gy oo op l oq or">library(tidyverse) </span><span id="202b" class="np my it oj b gy oy op l oq or">iris%&gt;%relocate(Petal.Width, .after=Sepal.Width)%&gt;%head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/841933372bc728c4493ae09a4c520f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HTybEwxCs4Z2gVJC.png"/></div></div></figure><p id="4d89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我们也可以将其设置为出现在最后一列之后。</p><p id="05a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我想让<code class="fe og oh oi oj b">Petal.Width</code>成为最后一列:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="5f41" class="np my it oj b gy oo op l oq or">iris%&gt;%relocate(Petal.Width, .after=last_col())%&gt;%head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/5232d0ebaa80520141b41980e50e8a5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GcMYCmO4QnutlH_k.png"/></div></div></figure></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="339f" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">Linux操作系统</h1><h2 id="6eca" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">9.如何在Linux中调度cron作业</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/2958e526b7ce5a1dd87f91a1ead4babb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bynfBrq_RczRpSQC.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://ai-summary.com/summary-how-to-schedule-a-cron-job-in-linux/" rel="noopener ugc nofollow" target="_blank"> AI总结</a>。</p></figure><p id="33bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多时候，我们需要定期在服务器上运行脚本。我们可以使用cron来安排我们的工作。我们需要做的第一件事是进入终端<strong class="lb iu"> </strong>并通过键入以下命令打开crontab:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="b97e" class="np my it oj b gy oo op l oq or">crontab -e</span></pre><p id="34b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一次，它会让你选择你的编辑器，可以是<strong class="lb iu"> nano，vim，</strong>等。个人比较喜欢nano，最简单的一种。打开编辑器后，我们就可以安排cron作业了。</p><p id="2d2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从星期日=0开始，有五个占位符，分别称为<code class="fe og oh oi oj b">minute</code>(0-59)<code class="fe og oh oi oj b">hour</code><strong class="lb iu"/>(0-23)<code class="fe og oh oi oj b">day of month</code>(1-31)<code class="fe og oh oi oj b">month</code>(1-12)<code class="fe og oh oi oj b">day of week</code>(0-6)。</p><p id="5605" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我有一个名为<code class="fe og oh oi oj b">mytest.py</code>的Python脚本，我想每分钟都运行它。然后，我们必须在crontab中编写:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="41ee" class="np my it oj b gy oo op l oq or">* * * * * python /path/to/mytest.py</span></pre><p id="77a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我想每十分钟运行一次<strong class="lb iu"> </strong>。注意，我们可以使用<code class="fe og oh oi oj b">/</code>来定义步骤:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="fad1" class="np my it oj b gy oo op l oq or"># it runs the script every 10 minutes<br/>*/10 * * * * python /path/to/mytest.py</span></pre><p id="2175" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们再举一些其他的例子。看评论:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="15c9" class="np my it oj b gy oo op l oq or"># it runs the script every Friday at 3am<br/>0 3 * * 5 python /path/to/mytest.py<br/> <br/># it runs the script every week<br/>0 0 */7 * * python /path/to/mytest.py<br/> <br/># it runs the script every 1st and 15th of the month<br/>0 0 1,15 * * python /path/to/mytest.py</span></pre><p id="2892" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用以下命令查看已经调度了哪些cron作业:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="1cce" class="np my it oj b gy oo op l oq or">crontab -l</span></pre><p id="00a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以打开文本编辑器并删除相应cron作业的特定行，也可以在不打开编辑器的情况下删除所有cron作业，方法是运行:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="77b3" class="np my it oj b gy oo op l oq or">crontab -r</span></pre><p id="8a9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你感到困惑，不确定你安排了什么，有一个很好的<a class="ae ky" href="https://crontab-generator.org/" rel="noopener ugc nofollow" target="_blank"> crontab-generator </a>可以为你编写crontab的命令！然后你只需要在输入<code class="fe og oh oi oj b">crontab -e</code>后在crontab复制粘贴即可。</p><h2 id="7232" class="np my it bd mz nq nr dn nd ns nt dp nh li nu nv nj lm nw nx nl lq ny nz nn oa bi translated">10.如何选择列</h2><p id="ef10" class="pw-post-body-paragraph kz la it lb b lc ob ju le lf oc jx lh li od lk ll lm oe lo lp lq of ls lt lu im bi translated">假设我们正在处理以下名为<code class="fe og oh oi oj b">eg1.csv</code>的CSV文件:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="0867" class="np my it oj b gy oo op l oq or">ID,Name,Dept,Gender<br/>1,George,DS,M<br/>2,Billy,DS,M<br/>3,Nick,IT,M<br/>4,George,IT,M<br/>5,Nikki,HR,F<br/>6,Claudia,HR,F<br/>7,Maria,Sales,F<br/>8,Jimmy,Sales,M<br/>9,Jane,Marketing,F<br/>10,George,DS,M</span></pre><p id="9292" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果要选择列，可以使用<code class="fe og oh oi oj b">cut</code>命令。它有几个选项(使用<code class="fe og oh oi oj b">man cut</code>来探索它们)，但最常见的是这样的:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="5908" class="np my it oj b gy oo op l oq or">cut -f 1-2,4 -d , eg1.csv</span></pre><p id="02ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着“选择第1至2列和第4列，使用逗号作为分隔符。”<code class="fe og oh oi oj b">cut</code>使用<code class="fe og oh oi oj b">-f</code>(意为“字段”)指定列，使用<code class="fe og oh oi oj b">-d</code> <strong class="lb iu"> </strong>(意为“分隔符”)指定分隔符。上面的命令返回:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="d25d" class="np my it oj b gy oo op l oq or">ID,Name,Gender<br/>1,George,M<br/>2,Billy,M<br/>3,Nick,M<br/>4,George,M<br/>5,Nikki,F<br/>6,Claudia,F<br/>7,Maria,F<br/>8,Jimmy,M<br/>9,Jane,F<br/>10,George,M</span></pre><p id="4967" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了排除<strong class="lb iu"> </strong>一列或多列，我们做与选择列相反的事情，添加<code class="fe og oh oi oj b">-complement</code>。例如，假设我们想要排除第二列:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="de8b" class="np my it oj b gy oo op l oq or">cut --complement -f 2 -d , eg1.csv</span></pre></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="277b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pc">最初发表于</em><a class="ae ky" href="https://predictivehacks.com/10-tips-and-tricks-for-data-scientists-vol-5/" rel="noopener ugc nofollow" target="_blank"><em class="pc">【https://predictivehacks.com】</em></a><em class="pc">。</em></p></div></div>    
</body>
</html>