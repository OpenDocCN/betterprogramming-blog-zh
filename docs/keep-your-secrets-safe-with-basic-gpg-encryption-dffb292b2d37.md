# 基本 GPG 使文件加密变得简单

> 原文：<https://betterprogramming.pub/keep-your-secrets-safe-with-basic-gpg-encryption-dffb292b2d37>

## 多功能、安全，最重要的是:免费

![](img/018f97277df8b939dcb93dfd778f7b22.png)

由[迈克尔·泽兹奇](https://unsplash.com/@lazycreekimages?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/secret?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

你有什么要隐瞒的吗？

你在保守秘密吗？

或许有点轻微的商业间谍活动？

好吧，也许没有那么极端，但在某一点上，我们都遇到过需要加密一些商业秘密的情况。这可能是一个密码，一把钥匙或一些绝密的产品计划。最好也是所有合法的。

无论您是将它们签入源代码控制(即使它们是加密的，您可能也不应该这样做)还是通过公共互联网发送它们，对强加密的需求都是至关重要的。有大量的付费产品在兜售各种各样的功能和花哨的实用程序，但如果你需要的只是加密一两个文件并继续你的生活，那么把钱花在一整套你永远不会使用的东西上是没有意义的。

在本文中，我们将探索如何使用最好的加密工具之一，它也直接内置于 Linux 中: [GnuPG](https://gnupg.org/) (GPG)。使用这个工具，您可以执行各种加密任务。直截了当，简单，你甚至不必安装任何东西或花费一毛钱。

# 用密码加密文件(对称)

如果你有一个小文件，里面有一些敏感信息，你想做的就是用密码保护它，GPG 可以很容易地做到这一点。执行以下命令，使用密码加密文件:

```
gpg -c <raw_file>
```

系统将提示您输入该文件的密码。确认密码并保存后，文件将被加密为新的`.gpg`文件。

现在，当您想要解密文件时，只需执行:

```
gpg -d <encrypted_file>
```

系统将再次提示您输入密码，然后文件内容将被打印到`stdout`。您还可以通过传递以下参数将输出重定向到新文件:

```
gpg -d <encrypted_file> -o <unencrypted_file>
```

默认情况下，GPG 将使用 [AES256](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard) 规范加密文件，这是非常安全的。然而，由于这是对称加密，这意味着相同的密码加密和解密文件。如果您选择一个弱密码或在多方之间广泛共享它，您可能会很快危及文件的安全性。

确保为加密选择非常可靠的密码，并限制共享它们。

# 用密钥加密文件(非对称)

现在，假设您有一个相同的文件，您想使用一个密钥对对它进行加密。你可以很容易地在 GPG 身上做到这一点。如果您已经有了想要使用的 GPG 密钥对，只需执行以下命令来加密文件:

```
gpg -e --recipient <user_id> <raw_file>
```

该命令将使用您指定的用户 ID 中的公钥加密输入文件。一开始这可能会有点混乱，但是一旦你明白了是怎么回事，它实际上是非常简单的。

让我们深入研究一下`--recipient`参数。GPG 假设您正在用来自用户 ID 对(使用`--recipient`指定)的*公共*密钥加密这个文件。这样你就可以把加密的文件发送给接收者，他们可以用他们的*私钥*来解密它。

如果您没有任何 GPG 键，可以使用下面的命令创建它们:

```
gpg --gen-key
```

这将提示您一些类似于生成证书或 SSH 密钥的基本信息。输入密钥的用户 ID 后，它将自动添加到您的本地 GPG 数据库中。然后，当您想要为收件人加密文件时，可以引用该用户 ID。

请记住，您正在使用该用户的公钥进行加密，并且假设他们已经拥有能够解密消息的私钥。有许多方法可以获得你的远程接收者的公钥，但是最简单的方法是让他们在公共互联网上把它发送给你。它是一个公钥，除非攻击者有私钥，否则他们不能用它做什么。这就是为什么它被称为*公钥*的原因。

如果要从另一个用户的 GPG 系统中导出公钥，可以发出以下命令:

```
gpg --export --armor <user_id> > <filename>.asc
```

这将把密钥输出到一个`.asc`文件中，然后可以导入到您的 GPG 数据库中用于加密。要导入密钥，请执行:

```
gpg --import <filename>.asc
```

这整个过程是利用公钥和私钥的不对称加密的一个例子。这是一种更可靠的加密方法，允许您将加密的数据发送给持有私钥的第三方进行解密。所有这些都不需要告诉他们任何敏感信息。您只需要公钥来执行加密。

感谢您的阅读！如果你喜欢这篇文章，看看下面更多的文章:

*   [*阅读这些书，你会写出更好的代码*](https://tateg.medium.com/read-these-books-and-youll-write-better-code-e5bff4b0ee8f)
*   [*你可能忽略的牛逼 AWS EC2 特性*](/awesome-aws-ec2-features-you-may-have-overlooked-7bb8d8c55af3)