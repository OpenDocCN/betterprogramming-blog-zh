<html>
<head>
<title>Redirect, Refresh, and Access the URL of the Current Page in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中重定向、刷新和访问当前页面的URL</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/redirect-refresh-and-access-the-url-of-the-current-page-in-javascript-3d9160e8317e?source=collection_archive---------1-----------------------#2019-12-11">https://betterprogramming.pub/redirect-refresh-and-access-the-url-of-the-current-page-in-javascript-3d9160e8317e?source=collection_archive---------1-----------------------#2019-12-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc10" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">JavaScript的位置对象</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8a93d0d90a649293f8ac75802e3488b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZdQlHlgeeu0oE8-Sj-MlhA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">位置备忘单。</p></figure><p id="b823" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以使用<code class="fe lu lv lw lx b">window.location</code>属性来访问当前页面的URL。</p><p id="5b6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想去一个新的页面，你可以改变<code class="fe lu lv lw lx b">history</code>对象的<code class="fe lu lv lw lx b">href</code>属性，或者用新的url作为参数调用<code class="fe lu lv lw lx b">assign</code>方法。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="06e3" class="mc md it lx b gy me mf l mg mh">location.href = "new url";</span><span id="6eca" class="mc md it lx b gy mi mf l mg mh">// or we can use </span><span id="a7b1" class="mc md it lx b gy mi mf l mg mh">location.assign("new url");</span></pre><p id="0c7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于不存储在历史记录中的重定向:</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="c5e9" class="mc md it lx b gy me mf l mg mh">location.replace("new url"); </span></pre><p id="8014" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要重新加载页面:</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="80d5" class="mc md it lx b gy me mf l mg mh">window.location.reload()</span></pre><h2 id="4c95" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">强制刷新</h2><p id="1472" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">我们可以通过<code class="fe lu lv lw lx b">true</code>来强制重载的页面来自服务器(而不是缓存)。或者，我们可以使用<code class="fe lu lv lw lx b">false</code>从缓存中重新加载页面。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="17ea" class="mc md it lx b gy me mf l mg mh">//from cache<br/>window.location.reload(); <br/>window.location.reload(false);</span><span id="3f62" class="mc md it lx b gy mi mf l mg mh">// from server<br/>window.location.reload(true);</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="71b2" class="nm md it bd mj nn no np mm nq nr ns mp jz nt ka ms kc nu kd mv kf nv kg my nw bi translated">位置对象的属性</h1><h2 id="f6d5" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">1.Href</h2><p id="763e" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">包含页面的完整URL。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="1168" class="mc md it lx b gy me mf l mg mh">location.href; // current page url addresss</span></pre><p id="36dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们给属性分配一个新值时，它会将<code class="fe lu lv lw lx b">url</code>值集重定向到属性。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="0b5e" class="mc md it lx b gy me mf l mg mh">location.href = "<a class="ae nx" href="https://google.com" rel="noopener ugc nofollow" target="_blank">https://google.com</a>"; </span></pre><p id="0bb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">务必添加<em class="ny"> http/https </em>。否则，它会在同一页面上发出请求。</p><h2 id="a8a4" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">2.草案</h2><p id="ca8b" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">包含页面的协议(<code class="fe lu lv lw lx b">http,https,...</code>)。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="7c81" class="mc md it lx b gy me mf l mg mh">location.protocol; // https:</span></pre><h2 id="727d" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated"><strong class="ak"> 3。主持人</strong></h2><p id="c154" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">带有端口号的网站主机名。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="6e9d" class="mc md it lx b gy me mf l mg mh">location.host; // medium.com </span><span id="216c" class="mc md it lx b gy mi mf l mg mh">// with port number </span><span id="9709" class="mc md it lx b gy mi mf l mg mh">var anchor = document.createElement("a");<br/>anchor.href = "https://medium.com:4097<br/>anchor.host // "medium:4097"</span></pre><h2 id="1879" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">4.主机名</h2><p id="fca2" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">网站主机名。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="56dd" class="mc md it lx b gy me mf l mg mh">location.host; // medium.com</span></pre><h2 id="0df8" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">5.港口</h2><p id="3852" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">包含端口号。如果URL不包含显式端口号，它将被设置为<code class="fe lu lv lw lx b">''</code>。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="5dfa" class="mc md it lx b gy me mf l mg mh">var anchor = document.createElement("a");<br/>anchor.href = "https://medium.com:4097<br/>anchor.port // "4097"</span></pre><h2 id="58e4" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">6.路径名</h2><p id="b193" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">包含主机名后的路径。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="f8a8" class="mc md it lx b gy me mf l mg mh">location.href; //<a class="ae nx" href="https://medium.com/@jagathishsaravanan" rel="noopener">https://medium.com/@jagathishsaravanan</a></span><span id="5a14" class="mc md it lx b gy mi mf l mg mh">location.pathname; // "/@jagathishsaravanan"</span></pre><h2 id="024b" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">7.搜索</h2><p id="fbd1" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">返回URL的搜索部分。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="db4b" class="mc md it lx b gy me mf l mg mh">I am on page <a class="ae nx" href="https://medium.com/search?q=javascriptjeep" rel="noopener">https://medium.com/search?q=javascriptjeep</a>;</span><span id="6a6e" class="mc md it lx b gy mi mf l mg mh">location.search; // ?q=javascriptjeep</span></pre><h2 id="2b43" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">8.混杂</h2><p id="3ada" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">包含字符串<code class="fe lu lv lw lx b">'#'</code>，后跟URL的片段标识符。这将是有用的，当我们在同一个页面内的链接。</p><p id="4e30" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">MDN Web文档示例:</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="276f" class="mc md it lx b gy me mf l mg mh">&lt;a id="myAnchor" href="/en-US/docs/HTMLHyperlinkElementUtils.href#Examples"&gt;Examples&lt;/a&gt;</span><span id="a742" class="mc md it lx b gy mi mf l mg mh"><br/>&lt;script&gt;<br/>  var anchor = document.getElementById("myAnchor");<br/>  console.log(anchor.hash); // Returns '#Examples'<br/>&lt;/script&gt;</span></pre><h2 id="cca6" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">9.起源</h2><p id="5418" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">特定位置的原点。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="ea64" class="mc md it lx b gy me mf l mg mh">consider we are at page : <a class="ae nx" href="https://medium.com/search?q=javascriptjeep" rel="noopener">https://medium.com/search?q=javascriptjeep</a></span><span id="abf3" class="mc md it lx b gy mi mf l mg mh">location.origin; // <a class="ae nx" href="https://medium.com" rel="noopener">https://medium.com</a></span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="60d6" class="nm md it bd mj nn no np mm nq nr ns mp jz nt ka ms kc nu kd mv kf nv kg my nw bi translated">方法</h1><h2 id="04e8" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">1.分配</h2><p id="4b08" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">加载参数中提供的URL处的资源。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="689a" class="mc md it lx b gy me mf l mg mh">location.assign("<a class="ae nx" href="https://medium.com" rel="noopener">https://medium.com</a>");</span></pre><p id="86b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将重定向到<code class="fe lu lv lw lx b">medium.com</code>。</p><h2 id="ff77" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">2.再装</h2><p id="8132" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated"><code class="fe lu lv lw lx b"><strong class="la iu">Location.reload()</strong></code>方法重新加载当前URL，就像<em class="ny">刷新</em>按钮一样。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="577a" class="mc md it lx b gy me mf l mg mh"><strong class="lx iu">location.reload();</strong></span></pre><p id="9e7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它有一个可选参数<code class="fe lu lv lw lx b">forceReload</code> <strong class="la iu">，</strong>，当<code class="fe lu lv lw lx b">forceReload</code>为<code class="fe lu lv lw lx b">true</code>时默认为<code class="fe lu lv lw lx b">false</code>。然后，它从服务器加载页面，而不是从浏览器缓存加载。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="1f16" class="mc md it lx b gy me mf l mg mh">location.reload(true);</span></pre><h2 id="9083" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">3.替换</h2><p id="6c0d" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">用提供的URL处的资源替换当前资源。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="46f4" class="mc md it lx b gy me mf l mg mh">// consider we are google.com</span><span id="1a05" class="mc md it lx b gy mi mf l mg mh">// when we run this line </span><span id="c84e" class="mc md it lx b gy mi mf l mg mh">location.replace("htts://medium.com")</span><span id="adad" class="mc md it lx b gy mi mf l mg mh">// it will replace the current page and redirect to medium page</span></pre><p id="3250" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与<code class="fe lu lv lw lx b">assign()</code>方法不同的是，使用<code class="fe lu lv lw lx b">replace()</code>后，当前页面将不会保存在会话<code class="fe lu lv lw lx b">History</code>中，这意味着用户将无法使用<em class="ny">后退</em>按钮导航到当前页面。</p><h2 id="6a22" class="mc md it bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">4.toString</h2><p id="bbd1" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">以字符串形式返回整个URL。</p><pre class="kj kk kl km gt ly lx lz ma aw mb bi"><span id="c542" class="mc md it lx b gy me mf l mg mh">location.toString();</span><span id="e54b" class="mc md it lx b gy mi mf l mg mh">// <a class="ae nx" href="https://medium.com/search?q=javascriptjeep" rel="noopener">https://medium.com/search?q=javascriptjeep</a></span></pre><p id="e01f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">参考:<a class="ae nx" href="https://developer.mozilla.org/en-US/docs/Web/API/Location" rel="noopener ugc nofollow" target="_blank"> MDN Web Docs </a>。</p><p id="6735" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">跟随<a class="nz oa ep" href="https://medium.com/u/f9ffc26e7e69?source=post_page-----3d9160e8317e--------------------------------" rel="noopener" target="_blank"> Javascript吉普🚙💨</a></p><div class="ob oc gp gr od oe"><a href="https://sitepoint.tapfiliate.com/p/payout-methods/new/" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">登录|站点点</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">不支持的浏览器虽然我们的跟踪技术支持旧的浏览器，不幸的是我们的网站不支持…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">sitepoint.tapfiliate.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div></div></div>    
</body>
</html>