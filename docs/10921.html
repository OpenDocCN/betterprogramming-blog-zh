<html>
<head>
<title>Adding D3 Data Visualizations to Your React App Has Never Been Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将D3数据可视化添加到React应用程序从未如此简单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/adding-d3-data-visualizations-to-your-react-app-has-never-been-easier-2e80c9f2c712?source=collection_archive---------12-----------------------#2022-02-03">https://betterprogramming.pub/adding-d3-data-visualizations-to-your-react-app-has-never-been-easier-2e80c9f2c712?source=collection_archive---------12-----------------------#2022-02-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e631" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">D3Reactor库初探</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4ad783e8d9cc41e6ad08b22433526bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AOSg3G1qt4hImqmCCx0X1Q.png"/></div></div></figure><p id="c4a9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在过去的三个月里，一个由五名工程师组成的小组:<a class="ae ln" href="https://www.linkedin.com/in/dmitri-leroy/" rel="noopener ugc nofollow" target="_blank">德米特里·伊尔绍夫</a>、<a class="ae ln" href="https://www.linkedin.com/in/eceiozalp/" rel="noopener ugc nofollow" target="_blank">欧查普</a>、<a class="ae ln" href="https://www.linkedin.com/in/irbopia/" rel="noopener ugc nofollow" target="_blank">特拉维斯·洛科特</a>、<a class="ae ln" href="https://www.linkedin.com/in/eric-mulhern/" rel="noopener ugc nofollow" target="_blank">埃里克·马尔赫恩</a>和<a class="ae ln" href="https://www.linkedin.com/in/robertcrocker/" rel="noopener ugc nofollow" target="_blank"> I </a>一直在努力开发一个新的开源数据可视化库，名为<a class="ae ln" href="https://www.d3reactor.com/" rel="noopener ugc nofollow" target="_blank"> d3reactor </a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/d279fd18fcc8015ee888a02dda8484c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HUoPpkGZPJhBe0iX0snDNA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated"><a class="ae ln" href="https://www.d3reactor.com/" rel="noopener ugc nofollow" target="_blank">D3反应堆现场</a></p></figure><p id="061d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个新的React + D3库的灵感来自之前的<a class="ae ln" href="https://opensourcelabs.io/" rel="noopener ugc nofollow" target="_blank"> OS Labs </a>项目<a class="ae ln" href="https://react-d3-library.github.io/" rel="noopener ugc nofollow" target="_blank"> React D3库</a>。虽然受到之前工作的启发，但这是一个全新的尝试！今天我们很高兴与你分享🚀</p><blockquote class="lt lu lv"><p id="0b07" class="kr ks lw kt b ku kv jr kw kx ky ju kz lx lb lc ld ly lf lg lh lz lj lk ll lm ij bi translated">d3reactor采用了React和D3 (v6+)的最新特性，使得所有开发人员(不仅仅是数据可视化专家)都可以更容易地访问现代的、视觉上吸引人的和高性能的图表。</p></blockquote><h1 id="006a" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">这一次有什么不同？</h1><h2 id="a799" class="ms mb iq bd mc mt mu dn mg mv mw dp mk la mx my mm le mz na mo li nb nc mq nd bi translated">看不到类组件</h2><p id="e315" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">Hooks是在3年多前于2018年10月的React Conf上推出的。此时，他们已经完全被React团队和社区所接受。</p><p id="2eaf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然之前的项目仅仅依赖于类组件，但是采用功能组件的需求是显而易见的，因为钩子的<a class="ae ln" href="https://reactjs.org/docs/hooks-rules.html" rel="noopener ugc nofollow" target="_blank">规则之一是它们只能在功能组件中使用。</a></p><p id="a1a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过完全包含功能组件，核心团队和贡献者可以利用钩子，将更多的周期花在保持同步的内容上，而不是如何保持同步。</p><p id="e870" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">钩子还帮助我们创建一个更容易理解的代码库，与类组件相比样板文件要少得多。再次，为我们的贡献者改善开发者体验。</p><p id="3ab7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，钩子允许我们将相关的代码组织在一起，并将每个组件中的关注点分开。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="c58e" class="ms mb iq bd mc mt mu dn mg mv mw dp mk la mx my mm le mz na mo li nb nc mq nd bi translated">发挥每个图书馆的优势</h2><p id="0301" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">因为D3和React都可以有效地生成、更新和删除节点，所以库的解耦是一个挑战。但是如果React是您的堆栈的一部分，您可能不希望其他库控制DOM。</p><p id="c34f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然D3通过它的enter、update和exit方法在更新DOM方面做得很好，但是<a class="ae ln" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>却因为能够让开发人员在应用程序状态改变时高效地更新和呈现正确的组件而声名大噪。</p><p id="6291" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么如果React在管理DOM，D3负责什么呢？</p><p id="f6f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> D3 </a>可以说是最流行的web数据可视化库。虽然我们目前只使用了D3提供的一小部分，但我们充分利用了D3的缩放功能。这些函数使得将抽象数据映射到像素位置甚至十六进制代码变得简单。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/dde76d65fa2b63fce4e15eda6e1de111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0_Ij8ZWvCFSGHHsfOdHlg.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">受Fullstack D3和数据可视化的启发— Amelia Wattenberger</p></figure><p id="eef8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还继续利用D3的<a class="ae ln" href="https://github.com/d3/d3-shape" rel="noopener ugc nofollow" target="_blank">生成器</a>和<a class="ae ln" href="https://github.com/d3/d3-array" rel="noopener ugc nofollow" target="_blank">数组</a>方法来从结构上转换数据，并将数据翻译成SVG元素的定义。</p><p id="684e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要不要负责写下图中返回“d”属性的函数？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/a4f5b1d3b27176d7142c8952b9428a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XcJsRLrKqwN-N0XRNfiJBw.png"/></div></div></figure><p id="9719" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">谢天谢地，D3优雅地处理了这个操作，对此我们永远心存感激🙏</p><h1 id="a7bb" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">有什么好激动的？</h1><h2 id="a8b8" class="ms mb iq bd mc mt mu dn mg mv mw dp mk la mx my mm le mz na mo li nb nc mq nd bi translated">一开始就有10张图表</h2><p id="e919" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">我们的发布有一个强大的功能丰富的图表核心，如:</p><ul class=""><li id="e362" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated"><a class="ae ln" href="https://www.docs.d3reactor.com/docs/Charts/bar-chart" rel="noopener ugc nofollow" target="_blank">酒吧</a></li><li id="8c01" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">堆积条形图</li><li id="1a1e" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae ln" href="https://www.docs.d3reactor.com/docs/Charts/line-chart" rel="noopener ugc nofollow" target="_blank">线</a></li><li id="d82c" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">多线</li><li id="05a7" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae ln" href="https://www.docs.d3reactor.com/docs/Charts/area-chart" rel="noopener ugc nofollow" target="_blank">区域</a></li><li id="9d65" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">堆叠区域</li><li id="c741" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae ln" href="https://www.docs.d3reactor.com/docs/Charts/scatter-plot" rel="noopener ugc nofollow" target="_blank">散点图</a></li><li id="6086" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">多散点图</li><li id="7963" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae ln" href="https://www.docs.d3reactor.com/docs/Charts/pie-chart" rel="noopener ugc nofollow" target="_blank">馅饼</a></li><li id="1a9d" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">油炸圈饼</li></ul><h2 id="9542" class="ms mb iq bd mc mt mu dn mg mv mw dp mk la mx my mm le mz na mo li nb nc mq nd bi translated">声明性组件</h2><p id="d961" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">在React风格中，我们的图表完全是声明性的。你把道具传进去，剩下的就交给图书馆了。</p><p id="937d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建带轴和工具提示的条形图所需的所有代码是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/c3da7eddd719f6a179511c9e30475df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GykqT2fG6AiGQIMnDJKcLA.png"/></div></div></figure><p id="d107" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而要从条形图变成面积图，你要做的就是把“条形图”改成“面积”。</p><p id="7a6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">其他数据可视化库要么让您编写D3代码复制并粘贴到React组件中，要么要求您从它们各自的子组件中合成图表。</p><p id="fbd9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过将D3代码复制并粘贴到React应用程序中，您很可能会遇到哪个库控制DOM的冲突。这比通读文档来学习子组件是如何组成的要严重得多，但是我们希望全面改善体验。</p><p id="fa61" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在你用d3reactor创建了一些图表之后，你可能甚至不需要<a class="ae ln" href="https://www.docs.d3reactor.com/docs/intro" rel="noopener ugc nofollow" target="_blank">文档</a>，这要感谢我们组件的声明性和直观的道具。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/87ff2e1d6302de3ed9dce77f72c88dfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZ616fzROa6twra6eqU2uA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated"><a class="ae ln" href="https://www.docs.d3reactor.com/docs/intro" rel="noopener ugc nofollow" target="_blank"> d3reactor docs网站</a></p></figure><h2 id="420f" class="ms mb iq bd mc mt mu dn mg mv mw dp mk la mx my mm le mz na mo li nb nc mq nd bi translated">完全用打字稿写的</h2><p id="4ce6" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">现在很清楚，我们是考虑到开发人员社区才创建这个库的。</p><p id="3ab5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在React with D3中使用<a class="ae ln" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>的少数人知道这个堆栈会造成多大的压力，但是我们认为这对这个开源项目的寿命是最好的。</p><p id="2663" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过从一开始就完全采用TypeScript，我们被迫仔细考虑传递给图表组件的数据的类型和结构。另外，您可以获得开箱即用的类型注释的全部好处。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/29d877f0cdf84afbbef9cf5d9f20e113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KKeDnIR8Y2KHSxLDj2FLoQ.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">条形图类型注释</p></figure><h2 id="308d" class="ms mb iq bd mc mt mu dn mg mv mw dp mk la mx my mm le mz na mo li nb nc mq nd bi translated">更多</h2><p id="176c" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">我们的图表不仅简单明了，类型齐全，而且:</p><ul class=""><li id="e788" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated">应答的</li><li id="73cf" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">表演的</li><li id="6169" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">SSR友好，支持在基于React的框架中使用，如Gatsby和Next.js</li><li id="e833" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">自带工具提示和图例</li><li id="5c2d" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">15种颜色可供选择</li><li id="e021" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">Jest和Cypress测试已经就绪</li><li id="bcc2" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">为黑暗做主题🔦和灯光模式😎</li></ul><h1 id="dcae" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">接下来会发生什么？</h1><p id="5181" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">d3reactor团队将维护这个库，并夯实最初的基础。虽然毫无疑问有代码需要清理，但基本内容还是不错的。</p><p id="4787" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将:</p><ul class=""><li id="a98b" class="nn no iq kt b ku kv kx ky la np le nq li nr lm ns nt nu nv bi translated">通过渲染到画布提高大型数据集的性能</li><li id="9628" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">提高图表对更动态UI的响应能力</li><li id="4b3c" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">添加附加图表</li><li id="098d" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">允许用户添加自定义配色方案</li><li id="478e" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">使用样式化组件进行表面主题化</li><li id="57a7" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">添加动画。交互式样式和渐变</li><li id="27cc" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated">…以及更多</li></ul><p id="6230" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">把这看作是对你的邀请，让你贡献、尝试、提供反馈、公开问题，并帮助指导这个新的React + D3库的未来开发；<code class="fe od oe of og b">d3reactor</code>。</p><p id="996f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>