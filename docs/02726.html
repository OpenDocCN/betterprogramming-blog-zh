<html>
<head>
<title>Why is Tiller Missing in Helm 3?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么头盔3中的蒂勒不见了？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-is-tiller-missing-in-helm-3-2347c446714?source=collection_archive---------5-----------------------#2019-12-20">https://betterprogramming.pub/why-is-tiller-missing-in-helm-3-2347c446714?source=collection_archive---------5-----------------------#2019-12-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cdb3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">没有它他们是如何管理的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e6c1718bc3b420f3fd3148dcbefc4fc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lvoV_CZ5eijEM1fGImWpnQ.jpeg"/></div></div></figure><p id="ee23" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Helm最近宣布了期待已久的版本3，而Helm 2中添加的服务器组件Tiller却不见了。因此，现在我们有了一个无服务器的掌舵人。Helm高度依赖tiller来管理Kubernetes中的图表生命周期。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8afd" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">为什么分蘖被去除了？</h1><p id="92cb" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">舵柄是Helm用来部署几乎所有Kubernetes资源的工具。为此，默认情况下Helm拥有在Kubernetes中进行更改的最大权限。因此，任何可以与Tiller对话的人都可以部署或修改Kubernetes集群上的任何资源，就像系统管理员一样。如果没有按照特定的安全措施正确部署Helm，这可能会在集群中导致安全问题，而且这也增加了对Helm的依赖性。此外，默认情况下，tiller中不启用身份验证，因此，如果任何一个pod受到威胁并有权与Tiller对话，那么Tiller运行的整个集群就会受到威胁。欲了解更多关于安全问题以及如何在头盔2中处理这些问题的信息，请阅读Bitnami的博客。</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="2a8c" class="na ly it mw b gy nb nc l nd ne">$ helm init<br/>$HELM_HOME has been configured at /home/andres/.helm.<br/><br/>Tiller (the Helm server-side component) has been installed in your Kubernetes cluster.<br/><br/><strong class="mw iu">Please note: by default, Tiller is deployed with an insecure 'allow unauthenticated users' policy.</strong><br/>To prevent this, run `helm init` with the --tiller-tls-verify flag.<br/>For more information on securing your installation, see: https://docs.helm.sh/using_helm/#securing-your-helm-installation<br/>Happy Helming!</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4240" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">为什么需要蒂勒？</h1><p id="05bf" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">舵柄被舵手用作群内操纵器，以保持舵手释放的状态。它还用于保存tiller完成的所有发布的发布信息——它使用config-map将发布信息保存在部署Tiller的同一个名称空间中。当helm更新或任何版本中有状态更改时，helm需要此版本信息。</p><p id="00f3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，每当使用helm update命令时，Tiller都会将新的清单与发布的旧清单进行比较，并做出相应的更改。因此赫尔姆依靠舵柄来提供先前的释放状态。</p><h1 id="633d" class="lx ly it bd lz ma nf mc md me ng mg mh jz nh ka mj kc ni kd ml kf nj kg mn mo bi translated">无舵舵舵是如何工作的？</h1><p id="2a08" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">Tiller的主要需求是存储发布信息，为此helm现在使用secrets并将其保存在与发布相同的名称空间中。每当Helm需要版本信息时，它都会从版本的名称空间中获取。要进行更改，现在只需从Kubernetes API服务器获取信息，在客户端进行更改，并将安装记录存储在Kubernetes中。无tiller Helm的好处是，由于Helm现在从客户端对集群进行更改，因此它只能在客户端被授予权限的情况下进行这些更改。</p><h1 id="5f24" class="lx ly it bd lz ma nf mc md me ng mg mh jz nh ka mj kc ni kd ml kf nj kg mn mo bi translated">结论</h1><p id="31bb" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">舵把在头盔2中是一个很好的补充，但要在生产中运行它，它应该被妥善保护，这将为德沃普斯和SRE增加额外的学习步骤。Helm 3减少了学习步骤，安全管理由Kubernetes负责维护。赫尔姆现在可以专注于包管理。</p><p id="486c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">快乐驾驶！</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="f89c" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">资源</h1><div class="nk nl gp gr nm nn"><a href="https://engineering.bitnami.com/articles/running-helm-in-production.html" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">在生产中掌舵:安全最佳实践</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">Helm已经成为Kubernetes最受欢迎的软件包管理器之一。Helm的目标是帮助您管理Kubernetes…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">engineering.bitnami.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob ks nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a href="https://v3.helm.sh/docs/" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">文档主页</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">你需要知道的关于文档如何组织的一切。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">v3.helm.sh</p></div></div><div class="nw l"><div class="oc l ny nz oa nw ob ks nn"/></div></div></a></div></div></div>    
</body>
</html>