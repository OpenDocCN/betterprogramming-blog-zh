<html>
<head>
<title>What is a UIBezierPath in Swift?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的UIBezierPath是什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-a-uibezierpath-in-swift-3e024af92e3d?source=collection_archive---------7-----------------------#2020-07-13">https://betterprogramming.pub/what-is-a-uibezierpath-in-swift-3e024af92e3d?source=collection_archive---------7-----------------------#2020-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0f79" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及如何创建自己的饼图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e8cda3c34a43b8dd47ffa56150f6a1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*do2Cq6hQgwwbcwHmv5w9Uw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/StockSnap-894430/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=925900" rel="noopener ugc nofollow" target="_blank"> StockSnap </a>从<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=925900" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>获取</p></figure><p id="65ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将使用<code class="fe lv lw lx ly b">UIBezierPath</code>类创建一个饼图，帮助我们创建定制的几何图形。</p><p id="de4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在短短100行代码中，我们将创建我们自己的UI元素，您可以在未来的应用程序中重用它。</p><p id="0563" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该项目的源代码可以在文章的底部找到。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e4a9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">我们开始吧</h1><p id="8237" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">首先，让我们创建一个名为<code class="fe lv lw lx ly b">PieChartView</code>的<code class="fe lv lw lx ly b">UIView</code>子类:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="7b14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将它标记为<code class="fe lv lw lx ly b">@IBDesignable</code>,以便能够轻松地调试它，而不需要构建和运行项目。如果您不熟悉该声明，可以在我的文章“<a class="ae ky" href="https://medium.com/better-programming/what-are-ibdesignable-and-ibinspectable-in-swift-1e3440797d9" rel="noopener">中快速熟悉，Swift中的@IBDesignable和@ IBInspectable是什么？</a></p><p id="288e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的饼图将会有彩色段，所以我们需要创建一个属性来管理它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="dd34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们有符合<code class="fe lv lw lx ly b">Comparable</code>的<code class="fe lv lw lx ly b">Segment</code>结构。(我们稍后会想弄清楚哪个段占用了更高百分比的可用空间。)我们还将<code class="fe lv lw lx ly b">segments</code>属性定义为具有一个<code class="fe lv lw lx ly b">didSet</code>属性观察器，以便在属性发生变化时触发更新。</p><p id="5574" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们直接进入本教程的核心:绘制饼图的几何图形:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="76e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里做两件事:</p><ul class=""><li id="ec6a" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">创建<code class="fe lv lw lx ly b">drawSegments(_ segments:)</code>方法，计算所有线段的开始和结束角度，并按顺序绘制每个线段</li><li id="87f0" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">覆盖<code class="fe lv lw lx ly b">draw(_ rect:)</code>方法并调用<code class="fe lv lw lx ly b">drawSegments(_ segments:)</code>方法</li></ul><p id="7fa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们仔细看看<code class="fe lv lw lx ly b">drawSegments(_ segments:)</code>方法的实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="cb6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要画一个线段，我们需要以下东西:</p><ul class=""><li id="a481" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">饼图的中心</li><li id="b7e1" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">饼图的半径</li><li id="833a" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">线段的起始角度(以弧度为单位)</li><li id="45d8" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">线段的结束角度(以弧度为单位)</li></ul><p id="9f94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，我们如何容易地获得中心和半径。然而，开始和结束的角度更加棘手。</p><p id="089b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们寻找每段角度的逻辑:</p><ol class=""><li id="1168" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nt nl nm nn bi translated">从3 *开始。π/2角。这将是第一部分的开始。</li><li id="5874" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">迭代线段。</li><li id="e016" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">考虑线段的比率，计算每条线段的结束角度。</li><li id="58fe" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">使用获得的属性绘制当前线段。</li><li id="a37b" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">将<code class="fe lv lw lx ly b">startAngle</code>属性设置为最后绘制的线段的<code class="fe lv lw lx ly b">endAngle</code>。</li><li id="4f07" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">从步骤3开始重复，直到绘制完所有线段。</li></ol><p id="72a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候创建一个方法来创建一个<code class="fe lv lw lx ly b">UIBezierPath</code>并绘制一个特定的线段了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><ul class=""><li id="f7b4" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">为我们的部分创建一条路径。</li><li id="39f1" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">用一条线结束线段。</li><li id="f5b8" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">准备好提供的<code class="fe lv lw lx ly b">color</code>来填充我们的部分。</li><li id="c39a" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">用<code class="fe lv lw lx ly b">color</code>填充线段。</li></ul><p id="3aa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成步骤是将该方法包含在<code class="fe lv lw lx ly b">drawSegments(_ segments:)</code>方法中。现在，最终的实现如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="7669" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">饼状图做好了！我们现在可以使用一个<code class="fe lv lw lx ly b">.xib</code>文件轻松调试它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/8c56596cf32d5490c676bdc63eb61a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wa9ymlKiX8NqDBXWuXNzaQ.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="5fa4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">资源</h1><p id="79ea" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在GitHub 上下载<a class="ae ky" href="https://github.com/zafarivaev/PieChart-UIBezierPath" rel="noopener ugc nofollow" target="_blank">完成的项目。</a></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="6d84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>