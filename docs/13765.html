<html>
<head>
<title>Want Cleaner Code? Use the Rule of Six</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">想要更干净的代码？使用六的规则</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/want-cleaner-code-use-the-rule-of-six-c21635ee2185?source=collection_archive---------1-----------------------#2022-09-26">https://betterprogramming.pub/want-cleaner-code-use-the-rule-of-six-c21635ee2185?source=collection_archive---------1-----------------------#2022-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e43" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单而强大的框架，用于消除混乱的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b26146dabf7232c67d7f30ef4d52ccb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ztIYm8h7YM_2U-s05p0GJQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由Canva作者提供</p></figure><p id="4efe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个人都想写干净的代码。有整本书都是关于它的！</p><p id="dc55" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是你现在不需要去读一本书来写更干净的代码。有一个“窍门”，每个程序员都可以学会，让他们的代码不那么混乱。</p><p id="55a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关键是这个:</p><h1 id="301c" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">每一行只做一件事</h1><p id="24e0" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">一条线，一个任务。</p><p id="2f05" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是不要为之疯狂。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/414180eb794439c2f0ada498f78a09c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9OTG1SOGwLqL6gnO.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">不要这样。(图片由Canva作者提供)</p></figure><p id="96df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">主要思想是:短代码比长代码需要更少的脑力去阅读。易读的代码更容易推理。理论上，代码行越短的程序越容易维护。</p><p id="dcdb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是紧凑代码可能是神秘的。(看过<a class="ae ms" href="https://en.wikipedia.org/wiki/APL_(programming_language)" rel="noopener ugc nofollow" target="_blank"> APL </a>？)而且你能分割线不代表你就应该分割线。</p><p id="27c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在某些语言中，可以在一行中将两个值赋给两个变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="ff51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以把两个任务放在各自的行上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="673b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，来吧。你真的<em class="mv">需要</em>来吗？如何判断一行是否应该被拆分？</p><h1 id="0f01" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">这不全是关于线的长度</h1><p id="fab5" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">费莉恩·赫曼斯打开她的书，<a class="ae ms" href="https://www.manning.com/books/the-programmers-brain" rel="noopener ugc nofollow" target="_blank"> <em class="mv">程序员的大脑</em> </a> <em class="mv">，</em>带着一个不可否认的真理:“困惑是编程的一部分。”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/cfe32d72ce1a471403ce44fa211f4e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y2FtWkH3sdkZYlAj.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">大概意思是该休息一下了。(图片由Canva作者提供)</p></figure><p id="2cda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">赫尔曼斯的书(我强烈推荐)解释了你大脑的三种记忆功能如何协同工作来理解代码:</p><ul class=""><li id="975c" class="mw mx it la b lb lc le lf lh my ll mz lp na lt nb nc nd ne bi translated">长期记忆(LTM):储存用于长期检索的信息，如关键词、句法、常用习语和模式。</li><li id="177a" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">短时记忆(STM):储存新信息用于短时提取(少于30秒！)，比如变量名和特殊值。</li><li id="b5ed" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">工作记忆(WM):处理来自LTM和短时记忆的信息，以得出结论并获得新知识。</li></ul><p id="58aa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">STM和WM都很小。两者一次只能存储<a class="ae ms" href="https://en.m.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two" rel="noopener ugc nofollow" target="_blank">大约4到6个东西</a>！让它们超载，你就有了一个混乱的配方。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/10d70d01c044c581c29babeba59c6845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UlYsOmznIhAzvSfp.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">你的大脑如何处理信息。(图片由Canva作者提供)</p></figure><p id="a59c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这给了我们一个判断一行代码是否太复杂的规则:</p><p id="179a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一行包含6条以上信息的代码应该被简化。</p><p id="81cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我称之为“六法则”</p><p id="7592" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是Python中的一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="2ed3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这对你来说很难读吗？我也是。有一个很好的理由。</p><p id="cffe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你得知道什么是<code class="fe nk nl nm nn b">map</code>、<code class="fe nk nl nm nn b">lambda</code>、<code class="fe nk nl nm nn b">.split()</code>。变量<code class="fe nk nl nm nn b">x</code>和<code class="fe nk nl nm nn b">s</code>，字符串<code class="fe nk nl nm nn b">'='</code>、<code class="fe nk nl nm nn b">'?'</code>和<code class="fe nk nl nm nn b">'&amp;'</code>，索引<code class="fe nk nl nm nn b">[1]</code>，切片<code class="fe nk nl nm nn b">[-3:]</code>都占用STM和WM中的空间。</p><p id="1c87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">总共十件事！你的大脑跟不上。</p><p id="5380" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者你的可以。</p><p id="0733" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果是这样，你已经有了一些好的经验。</p><p id="8d8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你的大脑像<code class="fe nk nl nm nn b">s.split('?')[1]</code>一样把语法“组块”成“问号右边的那部分字符串”您可以使用存储在您的LTM中的信息来重建代码。但是你仍然只能一次处理几块。</p><p id="8974" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以…我们可以识别一行代码何时过于复杂。现在怎么办？</p><h1 id="e132" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">如果代码令人困惑，打破它</h1><p id="8621" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">把它分成小块，也就是说！</p><p id="1231" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我使用两种策略来分解代码。我称之为简单和MORF。</p><p id="a245" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">简单的策略是增加代码行来减少认知负荷。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/530dcf69b7755cba51a985f14ec82bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aEr8wpkL3w0M_KAT.png"/></div></div></figure><p id="da12" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们将SIMPLE应用到我们之前看到的讨厌的一行程序中。从<code class="fe nk nl nm nn b">map()</code>中删除第二个参数，并将其放在自己的行上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="d7c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可能还是很难读懂。在第一行中有七件事需要记录:</p><ul class=""><li id="5347" class="mw mx it la b lb lc le lf lh my ll mz lp na lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">query_params</code></li><li id="8afd" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">s</code></li><li id="71cb" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">.split()</code></li><li id="9eff" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">'?'</code></li><li id="415d" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">[1]</code></li><li id="ce6e" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">'&amp;'</code></li><li id="57e4" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><code class="fe nk nl nm nn b">[-3:]</code></li></ul><p id="dbcb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是每一行要跟踪的东西比以前少了。你的大脑可以更容易地处理它们。</p><p id="0f15" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">再次应用SIMPLE并将<code class="fe nk nl nm nn b">s.split('?')[1]</code>移动到新的一行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="30b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将它与原始的一行程序进行比较。哪个更容易加工？</p><p id="be6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">MORF策略采用了一种不同的方法，将代码分组到函数中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/51502ffbf665ad81f0707491ca6a74b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_Fa3Qh1lP7DwyBAV.png"/></div></div></figure><p id="c4d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是MORF应用于我们的一行程序的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="638b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你甚至可以把MORF和SIMPLE结合起来:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="80d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你不必理解代码就能感受到效果。每一行都更容易让你的大脑处理。</p><p id="5783" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有额外的福利！</p><p id="d109" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你知道你的WM和STM没有超载，你就知道任何遗留的混乱都是由于你的LTM中缺少信息造成的。</p><p id="599e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">换句话说，SIMPLE和MORF不只是帮助你写出更干净的代码。他们帮助你发现知识差距，你可以通过实践来提高！</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="3f12" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">想知道更多关于你编码时大脑是如何工作的吗？</p><p id="a8dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看费莉恩·赫曼的《程序员的大脑》<a class="ae ms" href="https://www.manning.com/books/the-programmers-brain" rel="noopener ugc nofollow" target="_blank">, T21。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/9eb0ac117b4505bd18300a7989dac0a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XtqJyX-ShK3qmFX3.png"/></div></div></figure><h1 id="24c2" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">锻炼</h1><p id="2b1b" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">看看我们最后使用的简单代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b80b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一行中仍然有六个以上的“想法”,根据六的法则，应该将它们分开:</p><ul class=""><li id="9952" class="mw mx it la b lb lc le lf lh my ll mz lp na lt nb nc nd ne bi translated">哪条线？</li><li id="1464" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">有哪些“想法？”</li><li id="3358" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">你会怎么分？</li><li id="8f2c" class="mw mx it la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">把它分开会有很大的不同吗？</li></ul><p id="74bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用你的答案留下评论吧！</p><pre class="kj kk kl km gt nv nn nw nx aw ny bi"><span id="3ce0" class="nz lv it nn b gy oa ob l oc od"><strong class="nn iu">Want to Connect?</strong></span><span id="82ba" class="nz lv it nn b gy oe ob l oc od">Become a better coder in 5 minutes.</span><span id="7145" class="nz lv it nn b gy oe ob l oc od">One email, every Saturday, with one actionable tip.<br/>Always less than five minutes of your time.</span><span id="476c" class="nz lv it nn b gy oe ob l oc od"><a class="ae ms" href="https://davidamos.dev/curious-about-code-newsletter/" rel="noopener ugc nofollow" target="_blank">Subscribe here</a></span></pre></div></div>    
</body>
</html>