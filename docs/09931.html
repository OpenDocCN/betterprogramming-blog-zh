<html>
<head>
<title>Add a Leaderboard to Your iOS Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向您的iOS应用程序添加排行榜</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-a-leaderboard-to-your-ios-app-d457697f4616?source=collection_archive---------4-----------------------#2021-11-02">https://betterprogramming.pub/add-a-leaderboard-to-your-ios-app-d457697f4616?source=collection_archive---------4-----------------------#2021-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b385" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将Game Center排行榜集成到iOS应用程序的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8b89291b1828638e1ccb66cea2c6a8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bufBCrfiurYghBMcSATcoQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@element5digital?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Element5数码</a>在<a class="ae ky" href="https://unsplash.com/s/photos/scoreboard?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="95ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">排行榜通常在在线游戏中用来表示玩家在全球级别上的排名。这鼓励了友好的竞争，同时为玩家提供了提高和参与游戏的动机。</p><p id="59d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，苹果游戏中心可以轻松创建排行榜，并将这一功能直接集成到iOS应用程序中。苹果游戏中心是苹果的社交游戏网络平台，允许玩家访问全球排行榜、多人游戏功能并展示他们的成就。</p><p id="bcc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是创建排行榜并将其完全集成到使用Swift 5构建的iOS应用程序中的分步指南。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="662c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> 1。创建排行榜</strong></h1><p id="2416" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">虽然没有有效的Apple开发人员帐户也可以完成大多数iOS开发功能，但创建和访问游戏中心功能却可以。必须首先在<a class="ae ky" href="https://developer.apple.com/support/app-account/" rel="noopener ugc nofollow" target="_blank">https://developer.apple.com/support/app-account/</a>创建一个开发者账户。创建开发者账户后，进入<a class="ae ky" href="https://appstoreconnect.apple.com/apps" rel="noopener ugc nofollow" target="_blank"> Apple Connect主页</a>并创建一个新的应用程序，该应用程序将连接到当前正在开发的应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/49def05627ad260adfe7bc37e7cbd70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ZG7GcGAevRAKoso-mc7Rw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新应用程序</p></figure><p id="2b99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">设置应用程序时，请确定出现在“通用信息”下的“捆绑包ID”与Xcode中应用程序项目的ID相匹配。</p><p id="eb9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Game Center排行榜设置现在可以在新创建的应用主页中进行设置。在应用程序主页中，选择水平选项卡“服务”<strong class="lb iu"> </strong>和垂直选项卡“游戏中心”<strong class="lb iu"> </strong>以访问游戏中心设置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/72fb90dc81bdd34589f4a26f2a266ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rK78eq-JhSdVnBqC1r1gTA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">游戏中心设置</p></figure><p id="af91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在“排行榜”下，点击<code class="fe nb nc nd ne b">+</code>创建新的排行榜。选择一个“经典”<strong class="lb iu"/>或“循环”<strong class="lb iu"> </strong>排行榜，并填写其余提示。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="688f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.用户认证</h1><p id="12c6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">应用程序初始化后，用户需要通过身份验证才能访问Game Center排行榜及其个人资料。在本例中，在应用程序启动时显示的第一个ViewController上验证身份验证。<code class="fe nb nc nd ne b"><a class="ae ky" href="https://developer.apple.com/documentation/gamekit/gklocalplayer/1515399-authenticatehandler" rel="noopener ugc nofollow" target="_blank">GKLocalPlayer::authenticateHandler</a></code>负责认证本地玩家并确定默认排行榜ID。此排行榜ID将在更新和查看默认排行榜时使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">验证用户</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="64d7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.更新排行榜</h1><p id="3144" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">游戏中可能会有一些逻辑需要更新排行榜。也许这发生在玩家赢得一场游戏，收集更多的硬币，或者解锁一个成就的时候。排行榜可以通过调用<code class="fe nb nc nd ne b"><a class="ae ky" href="https://developer.apple.com/documentation/gamekit/gkleaderboard/3577544-submitscore" rel="noopener ugc nofollow" target="_blank">GKLeaderboard::submitScore(_:context:player:completionHandler:)</a></code>来更新。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更新排行榜</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9b6c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.展示排行榜仪表盘</h1><p id="61f7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用户将需要一种方法来访问应用程序内的排行榜仪表板。实现这一点的一种方法是在主屏幕上创建一个按钮，显示Game Center排行榜仪表板。Swift为游戏中心仪表盘提供的视图控制器叫做<code class="fe nb nc nd ne b"><a class="ae ky" href="https://developer.apple.com/documentation/gamekit/gkgamecenterviewcontroller" rel="noopener ugc nofollow" target="_blank">GKGameCenterViewController</a></code>。</p><p id="4d34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个类提供了自定义玩家登陆的主面板的选项。在我们的例子中，我们只想显示默认排行榜的历史全球排名。以下示例包含连接到“排行榜”按钮的回拨代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">展示GameCenter视图控制器</p></figure><p id="fcb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们将<code class="fe nb nc nd ne b">gameCenterDelegate</code>设置为当前视图控制器的情况下，主视图控制器类也需要从<a class="ae ky" href="https://developer.apple.com/documentation/gamekit/gkgamecentercontrollerdelegate" rel="noopener ugc nofollow" target="_blank">GKGameCenterControllerDelegate</a>继承。添加这个类还需要完成<code class="fe nb nc nd ne b">gameCenterViewCOntrollerDidFinish</code>存根。这个存根需要包含关闭仪表板的逻辑。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从GKGameCenterControllerDelegate继承主类</p></figure><p id="7dfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从应用程序查看排行榜仪表板将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/a1cf30fb899ddc6f5a4b72c715d7b959.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*IMzXBIr0G6O2-H6DTsn7kQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">排行榜仪表板</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5622" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="c93e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用Apple Game Center库和功能，可以轻松地为您的iOS应用程序设置全球排行榜。本教程分解了在iOS应用程序中更新和查看排行榜所需的最少步骤。</p><p id="c086" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然它利用内置的视图控制器来显示排行榜，但就Swift的外观而言，几乎任何事情都是可能的。</p><p id="929f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">排行榜仪表板可能需要进一步定制，以保持与您的应用程序的外观和感觉一致。这将在以后的文章中讨论！</p></div></div>    
</body>
</html>