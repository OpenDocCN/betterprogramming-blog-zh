<html>
<head>
<title>Sign in with Apple using Firebase Auth SDK and SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase Auth SDK和SwiftUI登录Apple</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sign-in-with-apple-firebase-auth-swiftui2-0-5e007f1e5a53?source=collection_archive---------1-----------------------#2020-12-18">https://betterprogramming.pub/sign-in-with-apple-firebase-auth-swiftui2-0-5e007f1e5a53?source=collection_archive---------1-----------------------#2020-12-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ed76" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们检查一下</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fd5eaa961244e62c9fe0464a2ba12e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zztiMcnaauL7lAnwz5qjoA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">查尔斯·德鲁维奥在<a class="ae ky" href="https://unsplash.com/s/photos/mobile-app?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="31e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">难度:初级|轻松| </em> <strong class="lb iu"> <em class="lv">普通</em> </strong> <em class="lv"> |挑战</em></p><p id="2350" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">环境:</em><a class="ae ky" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank"><em class="lv">Xcode 12</em></a><em class="lv">，iOS 14，</em><a class="ae ky" href="https://firebase.google.com/support/release-notes/ios" rel="noopener ugc nofollow" target="_blank"><em class="lv">Firebase 7 . 1 . 0</em></a><em class="lv">，以及</em> <a class="ae ky" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank"> <em class="lv"> SwiftUI </em> </a></p><p id="8cb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">先决条件:阅读</em><a class="ae ky" href="https://firebase.google.com/docs/auth/ios/apple" rel="noopener ugc nofollow" target="_blank"><em class="lv">Firebase Auth SDK for iOS文档</em> </a> <em class="lv">。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5804" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">开始一个新项目</h1><p id="87ca" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">打开Xcode &gt;开始一个新项目&gt;选择App模板&gt;选择SwiftUI界面，调用你的项目<em class="lv">sign apple。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/9e8fe1d42484160dea11539f240b559a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qe7-quEtRtkJyKnbqXCEA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7b18" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">建立火力基地</h1><p id="740e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我将快速浏览一下Firebase集成。如果您还没有集成Firebase SDK，请先阅读我的文章:</p><div class="nb nc gp gr nd ne"><a href="https://medium.com/ios-design-code/integrate-firebase-with-an-ios-project-xcode-12-28512f202bb0" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">将Firebase与iOS项目集成| Xcode 12</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">了解如何将Firebase SDK与现有的iOS项目集成。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">medium.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ks ne"/></div></div></a></div><p id="07de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Xcode 12中，<em class="lv"> </em>的SwiftUI生命周期<em class="lv">没有<code class="fe nt nu nv nw b">Scene Delegate</code>。</em>为了集成Firebase SDK，您需要进入<code class="fe nt nu nv nw b">SignInAppleApp.Swift</code>文件，导入Firebase，并像这样启动Firebase:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SignInAppleApp。迅速发生的</p></figure><p id="f2ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从那里，你应该能够运行你的应用程序。在调试控制台中，您将看到一些来自Firebase的报告。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e1a5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">设置Firebase身份验证</h1><p id="16ef" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">前往Firebase控制台&gt;鉴定&gt;登录方法&gt;启用Apple登录&gt;注册:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/e1bf51a48718c6d79bfa6113c832678a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fT8nG-NVKFOiLTxlV8RCUw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自Firebase的截图</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="aed4" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">使用Apple设置登录</h1><p id="24e9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">导航到主目标&gt;签名和功能&gt; "+功能" &gt;使用Apple登录:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/8b4836f3aeb47816ba5b7210ca8bc6cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QYQzZcxg4__ruF6ysZiWaA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Xcode截图</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8c83" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">我们来编码吧！</h1><p id="d97a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><em class="lv">注:代码灵感来源于</em> <a class="ae ky" href="https://firebase.google.com/docs/auth/ios/apple" rel="noopener ugc nofollow" target="_blank"> <em class="lv">通过Firebase在iOS上使用Apple</em></a><em class="lv">进行认证。</em></p><p id="8af2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到您的<code class="fe nt nu nv nw b">ContentView.Swift</code>文件(项目附带的文件),在顶部导入以下框架:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="e4f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将以下代码粘贴到文件的<code class="fe nt nu nv nw b">struct</code>开始图<em class="lv"> </em>之后，变量<code class="fe nt nu nv nw b">body</code>之前:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="702b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将以下代码复制粘贴到您刚刚实现的代码上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="4b28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，添加带有拖放功能的原生SwiftUI Apple登录按钮:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/a488f2d24a736f134913526812e61acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6YJjPdRdn7ATZjvS6ZJxqw.gif"/></div></div></figure><p id="96c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧！现在我们有了按钮和随机数生成器，我们准备好给按钮一个动作并注册我们的用户。</p><p id="d80e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将下面的代码粘贴到<code class="fe nt nu nv nw b">onRequest</code> <em class="lv"> </em>方法内部:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="86c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并将下面的代码粘贴到<code class="fe nt nu nv nw b">onCompletion</code> <em class="lv"> </em>方法中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="0c23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，不要忘记在右括号后面给苹果按钮加一个框架。否则，按钮将占据整个屏幕:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b55d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">运行您的应用</h1><p id="f72f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><em class="lv">注意:通常情况下，模拟器在完成与Apple的登录后不工作。我建议在真实设备上运行您的应用程序。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/fdfc9cc1af48e4ffbf453802eaa4454f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vJVqjVITZoum2_oY-t_yKg.png"/></div></div></figure><p id="4737" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切运行顺利，您应该能够看到调试控制台中的标识符与Firebase Console &gt; Authentication中的标识符相匹配。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6b5e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><blockquote class="od oe of"><p id="5987" class="kz la lv lb b lc ld ju le lf lg jx lh og lj lk ll oh ln lo lp oi lr ls lt lu im bi translated"><strong class="lb iu">感谢阅读！如果你有任何问题，请给我留言。我总是很乐意在</strong><a class="ae ky" href="mailto:hello@sullivandecarli.com" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">hello@sullivandecarli.com</strong></a><strong class="lb iu">聊天合作。考虑订阅，通过我的推荐链接</strong> 无限制访问我的文章和所有媒体 <a class="ae ky" href="https://sullivan-decarli.medium.com/membership" rel="noopener"> <strong class="lb iu"/></a></p></blockquote></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="cce0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div></div>    
</body>
</html>