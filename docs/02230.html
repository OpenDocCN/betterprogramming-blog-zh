<html>
<head>
<title>Context and Your Own React Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">上下文和您自己的React挂钩</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/context-and-your-own-react-hook-a73e32435880?source=collection_archive---------14-----------------------#2019-11-14">https://betterprogramming.pub/context-and-your-own-react-hook-a73e32435880?source=collection_archive---------14-----------------------#2019-11-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d22c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写简单身份验证React挂钩的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0f4b923a7efe2535d46c0d14be393cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s8ziCA7EkKDDKLnF"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Artem Sapegin 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5b86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">真的，很简单。起初，这看起来很复杂。但这真的很简单。首先，你需要弄清楚你想钩住什么。如果你不理解新的上下文API，在你阅读之前做一点复习可能是好的。</p><p id="ee92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个简短的教程中，我们将创建一个小的认证挂钩。完成本教程后，您可以将它插入到您的API中，也可以按照自己的意愿构建它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dd99" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设置您的上下文</h1><p id="0754" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这并不太难。如果您使用的是React的最新版本，那么您应该在React核心中有上下文。</p><p id="9ed2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我创建了一个<code class="fe mz na nb nc b">auth.js</code>文件，并为上下文添加了以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="16da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，我们已经从React库导入了上下文。我们有一些暂时不需要的额外导入，但是这段代码应该是可以运行的。</p><p id="9231" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将注意到的第一件事是我们已经创建了一个<code class="fe mz na nb nc b">Provider</code>组件。这个组件将被添加到我们的<code class="fe mz na nb nc b">app.js</code>文件中。你在这里看到的下一个函数实际上将是上下文消费者。这个消费者就是我们的钩子。这可能看起来很奇怪，因为它目前根本不做任何事情。但是您可以现在导入它，并尝试执行钩子提供的测试函数。</p><p id="474b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个你的<code class="fe mz na nb nc b">app.js file</code>可能看起来像什么的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="1ac6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们开始编写一个简单的auth Hook。</p><p id="a0c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将添加一个名为<code class="fe mz na nb nc b">useProvideAuth()</code>的功能组件。这个函数将包含我们钩子的所有肉。</p><p id="9c7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是它的样子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="50ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大部分代码只是您的身份验证过程的存根。我们有一个登录和退出的方法。在这些函数中，你可以把你的API调用签入或签出。</p><p id="7847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还加了一个方便的方法叫做<code class="fe mz na nb nc b">getCurrentUser()</code>。您可以使用这个方法调用后端来填充当前用户。这样做的真正原因是为了展示你可以在这个方法中使用<code class="fe mz na nb nc b">useEffect()</code>钩子来实现你所需要的。</p><p id="64a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果我们看看如何实现它，我们可以做到以下几点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="21a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你可以看到我们已经实现了刚刚创建的<code class="fe mz na nb nc b">useAuth</code>钩子。它不太破旧，也不太难。</p><p id="6cb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个例子并不是如何创建身份验证组件的完整例子。相反，它的意思是解释一下如何使用上下文来创建React挂钩。</p><p id="6bb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这给了你一个很好的介绍。</p></div></div>    
</body>
</html>