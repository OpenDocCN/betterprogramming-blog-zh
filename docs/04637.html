<html>
<head>
<title>How to Distribute iOS Libraries With Swift Package Manager</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Swift软件包管理器分发iOS库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/distributing-ios-swift-libraries-with-swift-package-manager-3c9630149bb3?source=collection_archive---------4-----------------------#2020-04-27">https://betterprogramming.pub/distributing-ios-swift-libraries-with-swift-package-manager-3c9630149bb3?source=collection_archive---------4-----------------------#2020-04-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c5fe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">向椰子说再见</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dd60ff5c4af148724445c25531e972e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yub2xnNdyAhaRRCTNtSmdw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">矢量图形来源于<a class="ae ky" href="https://www.vecteezy.com" rel="noopener ugc nofollow" target="_blank">https://www.vecteezy.com</a></p></figure><p id="d1e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向集成商分发Swift库有几种方式，<a class="ae ky" href="https://medium.com/onfido-tech/distributing-swift-frameworks-via-cocoapods-152002b41783" rel="noopener"> CocoaPods </a>是最受欢迎的方式之一。直到最近，使用的工具都是由开源社区创建和维护的。在Swift 3 Apple中，Swift社区引入了Swift Package Manager。</p><p id="f1ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将介绍为什么您应该支持Swift Package Manager。然后，我们将介绍如何在iOS应用上使用Swift包管理器分发和使用静态库的步骤。</p><p id="ed48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我假设读者已经熟悉Swift、Swift静态库和Xcode。我还假设读者熟悉<a class="ae ky" href="https://git-scm.com" rel="noopener ugc nofollow" target="_blank"> Git </a>版本控制系统和<a class="ae ky" href="https://github.com" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</p><p id="c32b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">我在本文中使用了Swift 5.2和Xcode 11.4.1。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ee7f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">为什么您应该以Swift包的形式发布您的库</h1><p id="9b3c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">开源社区已经支持了依赖/包管理器，那么我们为什么还需要另外一个呢？</p><p id="50bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，现有的工具必须单独下载、维护和安装。Swift软件包管理器包含在Swift和Xcode中。这意味着不需要额外安装。</p><p id="3617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二，和流行的第三方工具一样，Swift Package Manager是<a class="ae ky" href="https://github.com/apple/swift-package-manager" rel="noopener ugc nofollow" target="_blank">开源的</a>。然而，大多数第三方工具使用的语言并不快捷。Swift包管理器是用Swift写的。用Swift编写使得Swift开发人员更容易阅读、理解，甚至为项目做出贡献。</p><p id="38a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三，Xcode用户界面支持Swift Package Manager。这意味着我们可以在不离开Xcode的情况下完成大多数操作。其他工具没有本机Xcode UI集成。</p><p id="1006" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，Swift包管理器得到了苹果的支持。过去，Xcode的新版本偶尔会破坏第三方工具集成。这意味着要么你不能升级到最新的Xcode，要么你不得不放弃不再兼容的第三方工具。由于Swift Package Manager由Apple维护，该工具与Xcode的新版本发生冲突的风险较小。</p><p id="44ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，Swift包管理器:</p><ul class=""><li id="106b" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">不需要额外下载、安装和维护第三方工具</li><li id="a168" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">使参与项目变得容易</li><li id="f9f4" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">允许您在不离开Xcode的情况下运行工具</li><li id="6cfd" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">由苹果公司维护</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a838" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">如何向Swift包管理器发布静态库</h1><p id="1b96" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本节中，我们将发布一个现有的iOS静态库作为Swift包。需要一个<a class="ae ky" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>帐户来发布此部分的包。</p><p id="03b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本节中，我们将:</p><ol class=""><li id="a9b0" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu no ng nh ni bi translated">检索起始项目</li><li id="466a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu no ng nh ni bi translated">创建包声明</li><li id="1169" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu no ng nh ni bi translated">创建本地Git存储库</li><li id="ba11" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu no ng nh ni bi translated">设置GitHub帐户</li><li id="9c84" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu no ng nh ni bi translated">发布到GitHub</li></ol><h2 id="c5f4" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">1.检索起始项目</h2><p id="ff89" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，让我们下载启动项目。打开终端并执行以下命令:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="5210" class="np me it oc b gy og oh l oi oj">cd $HOME<br/>curl <a class="ae ky" href="https://github.com/anuragajwani/distributing_swift_lib_spm/archive/starter.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/anuragajwani/distributing_swift_lib_spm/archive/starter.zip</a> -o swift_lib.zip -L -s<br/>unzip -q swift_lib.zip<br/>cd distributing_swift_lib_spm-starter/MyStaticLib</span></pre><p id="5a45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">starter项目包含一个Swift静态库，其中只有一个文件和函数。库的功能对于本文并不重要。</p><h2 id="fed5" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">2.创建包声明</h2><p id="5d82" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">接下来，让我们把我们的库做成一个Swift包。Xcode有一个方便的选项，可以轻松创建新的包。然而，Xcode没有一个方便的选项来将现有的库打包。我们将从头开始创建我们的包声明。</p><p id="2628" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要创建一个名为<code class="fe ok ol om oc b">Package.swift</code>的文件。回到终端并执行以下命令:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="ae63" class="np me it oc b gy og oh l oi oj">touch Package.swift</span></pre><p id="19d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将创建包规范。执行以下命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="df16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ok ol om oc b">Package.swift</code>文件的第一行(<code class="fe ok ol om oc b">EOF</code>之间的内容)声明了使用该包所需的Swift工具链的最低版本。在撰写本文时，我正在使用Xcode 11.4.1，其中包括Swift toolchain版本<code class="fe ok ol om oc b">5.2.2</code>。您可以通过运行以下命令来查找工具链版本:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="1a59" class="np me it oc b gy og oh l oi oj">swift --version</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/463fd596eff96e19a3f83f86364f1b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*8xkhFozNkVZUYXL25-T5ww.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获得swift版本</p></figure><p id="dd90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二行，<code class="fe ok ol om oc b">import PackageDescription</code>，声明了<code class="fe ok ol om oc b"><a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/package" rel="noopener ugc nofollow" target="_blank">Package </a></code> <a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/package" rel="noopener ugc nofollow" target="_blank">框架</a>的使用。这已经与Xcode和Swift捆绑在一起。</p><p id="ff4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是包声明本身。</p><p id="944a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先是包本身的名字。接下来，让我们覆盖目标。目标包含一组要构建的源文件。我们可以精确地指定<a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/target/2880339-sources" rel="noopener ugc nofollow" target="_blank">包括哪些源</a>或<a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/target/2880334-exclude" rel="noopener ugc nofollow" target="_blank">排除</a>，或者如果没有指定，则指定一个路径下所有符合条件的文件。在这种情况下，我们将编译<code class="fe ok ol om oc b">MyStaticLib</code>目录下的所有源文件。</p><p id="1ec7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后说一下产品。我们宣布该包将构建的<a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/product" rel="noopener ugc nofollow" target="_blank">产品</a>。目前，产品既可以是库，也可以是可执行文件。对于本文，我们将只关注一个库。请注意，我们已经指定了<code class="fe ok ol om oc b">MyStaticLib</code>产品将构建<code class="fe ok ol om oc b">MyStaticLib</code>目标。您可以构建一个包含多个目标的产品，但是在这种情况下，我们只有一个目标。</p><p id="a729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于可执行文件的一个快速提示:如果您想构建一个命令行工具，请使用它。</p><p id="510e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是申报包裹所需要的一切。</p><h2 id="1ae2" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">3.创建本地Git存储库</h2><p id="1775" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">接下来，我们将创建一个本地Git库<code class="fe ok ol om oc b">MyStaticLib</code>。我们需要这作为在GitHub托管的远程存储库中发布我们的包的一个步骤。</p><p id="49e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这一步，我们将通过终端创建本地Git存储库。打开终端并执行以下命令:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="4f6d" class="np me it oc b gy og oh l oi oj">cd $HOME/distributing_swift_lib_spm-starter/MyStaticLib<br/>git init<br/>git add --all<br/>git commit --message "Initial commit"</span></pre><h2 id="2845" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">4.设置GitHub帐户</h2><p id="f2da" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">继续之前，请确保您有一个GitHub帐户。此外，我们需要将GitHub帐户添加到Xcode帐户中。若要将GitHub帐户链接到Xcode，请打开Xcode并从菜单中选择Xcode &gt;偏好设置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/3edbd5d1fb67e92c192a352089fd487a.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*WteyBhDwSKFky4Bw1t9Cow.png"/></div></figure><p id="7bdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击账户选项卡。接下来，点击加号图标“<strong class="lb iu"> + </strong>”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/f708b173fcdfbc4eac59893ac8e6c249.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*leFQBeYgwKH-8Mm5ossKtg.png"/></div></figure><p id="7f5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“选择您想要添加的帐户类型”时，选择GitHub并点按“继续”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/99edb8fa05aaa32951005497b92ae4fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*it5z4pQfh_6-_5OEtzlFog.png"/></div></figure><p id="8117" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您需要一个GitHub帐户的个人访问令牌。要创建一个，请遵循<a class="ae ky" href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line" rel="noopener ugc nofollow" target="_blank">这些步骤</a>。创建个人访问令牌时，请确保检查“repo”范围。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/1a1a1444c1113477289405af46f0b95e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhhajJamCRY_8u_xWOjSOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的个人访问令牌</p></figure><p id="a75d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在“登录您的GitHub帐户”提示中输入您的帐户名称和个人令牌访问。接下来点击登录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/889cff2b1483df6b070e62ccddcdfe33.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*AFpNtKBVDwvVVGjufBk_QQ.png"/></div></figure><p id="2ac6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您现在可以关闭偏好设置窗口了。</p><h2 id="3d00" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">5.发布到GitHub</h2><p id="3192" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">接下来我们把<code class="fe ok ol om oc b">MyStaticLib</code>发布到GitHub上。我们将通过Xcode来实现这一点。</p><p id="d4b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们用Xcode打开我们的Swift包。打开终端并执行以下命令:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="2d3b" class="np me it oc b gy og oh l oi oj">open ~/distributing_swift_lib_spm-starter/MyStaticLib/Package.swift</span></pre><p id="9614" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们在GitHub中创建Git存储库。从菜单中，选择“视图”&gt;“导航器”&gt;“显示源代码管理导航器”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/f25e32fd57488f5821d90f9ad40ee8c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*J2wOJkhyGpAjjqCXdyPIpA.png"/></div></figure><p id="65d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在导航区域中，右键单击“MyStaticLib master ”,然后单击“创建MyStaticLib”Remote。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/3d5ba23143e5f99be07ccf7642689a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*pd-pOMhKIVQUrX5VXjv7Jw.png"/></div></figure><p id="6a4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“创建‘MyStaticLib’remote”时，您可以选择将该存储库保持为私有还是公共。本文我选择Private，因为我们仅展示如何发布和消费Swift软件包。然后单击创建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/f4023ea4cc8dbd73fb3eab26ca67a5a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*DyegOHeKIlNLt3t0Fr9C2g.png"/></div></figure><p id="390e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Swift包使用Git标签来获取所需版本的Swift包。Swift包版本控制遵循<a class="ae ky" href="https://semver.org" rel="noopener ugc nofollow" target="_blank">语义版本控制</a>标准。此时不需要语义版本化的知识，因为我们将只发布一个版本。</p><p id="25d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们为我们的第一个版本创建一个Git标签。在导航区域再次右键单击“MyStaticLib master”，然后单击“标记‘master’”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/c3cb67157da8bebc44c6a0e25aa43e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*Sehdf4yrPaq3ApuUjuvuyg.png"/></div></figure><p id="163f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“从版本创建新标签”时，将<code class="fe ok ol om oc b">1.0.0</code>输入标签字段。接下来，单击创建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/e038a7a49a6e0cf4529c6d8923271c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*t1WbwxGA2LFsABh7ZJsPlw.png"/></div></figure><p id="09bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">标记现在在本地创建。让我们将这个标签推送到GitHub中的远程Git存储库。从菜单中选择源代码管理&gt;推送。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/4d07aade1e9456e0e8fb65e59bb11c02.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*BDVbOxoB3HnRIlIwRJ-new.png"/></div></figure><p id="eed7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“将本地更改推送到”时，选中“包括标签”复选框。然后点击推送。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/8bb8c9f393c5ddbc77f29397e653ccd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*e8BTGrCuH6eZZGsmUEpOFw.png"/></div></figure><p id="8293" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在这个标签可以在我们的GitHub库中找到了。<code class="fe ok ol om oc b">MyStaticLib</code> Swift套餐现已推出！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2f5d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">如何使用已发布的静态库</h1><p id="7f04" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本节中，我们将学习如何使用我们在上一节中创建的Swift产品包。</p><p id="ee56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本节中，我们将:</p><ol class=""><li id="8afb" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu no ng nh ni bi translated">创建一个iOS应用程序来消费<code class="fe ok ol om oc b">MyStaticLib</code></li><li id="d434" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu no ng nh ni bi translated">将<code class="fe ok ol om oc b">MyStaticLib</code> Swift包添加到应用程序中</li><li id="d0a0" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu no ng nh ni bi translated">消费<code class="fe ok ol om oc b">MyStaticLib</code></li></ol><p id="bf01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个使用我们的Swift产品包的应用程序。打开Xcode，从菜单中选择“文件”&gt;“新建”&gt;“项目”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/7b1c7a2f48f426c20ee55c25b9fc1ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*umdW0UU32-Ua3sedyUpEuA.png"/></div></figure><p id="517b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“为新项目选择模板”时，选择单视图应用程序，然后点按“下一步”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/84618d441e5149598f1bada34247e3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XE8Jkw1oFSaEAgyw1QMiuQ.png"/></div></figure><p id="c30e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“为您的新项目选择选项”时，在产品名称字段中命名您的产品<code class="fe ok ol om oc b">SwiftPackageDemo</code>。所有其他选项都可以保持原样。单击下一步。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/13dc7837cca1f9049fba957431a9f14a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EUteUwaygObXDdHP6RVUiA.png"/></div></div></figure><p id="f154" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">把它保存在你认为合适的地方。单击创建。</p><p id="2935" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，从菜单中选择文件&gt; Swift软件包&gt;添加软件包相关性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/cb24b992db5d8e8e18efa326b0a1ad71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*rW7p7zP0qNobQHGMC82s7A.png"/></div></figure><p id="005b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“选择包存储库”时，搜索并选择您拥有的<code class="fe ok ol om oc b">MyStaticLib</code>。单击下一步。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/ee2b4bf64fbf93d4acd05cd2b603f9e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5gu-wHn2p5Arw32qmL0iQ.png"/></div></div></figure><p id="34ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“选择软件包选项”时，Xcode已经为您选择了版本<code class="fe ok ol om oc b">1.0.0</code>。单击下一步。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/8b4ca58b4fd874d4ee1bebfa5535238c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HtO1T83HbaHb2TZGqXkhyg.png"/></div></div></figure><p id="3644" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当提示“将包添加到SwiftPackageDemo”时，确保为<code class="fe ok ol om oc b">SwiftPackageDemo</code>应用程序选中了<code class="fe ok ol om oc b">MyStaticLib</code>。单击完成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/55332e46fb3b00fefffc1e23c07219d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H2hvQJfUqB7GGcQsIL8lSQ.png"/></div></div></figure><p id="c735" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ok ol om oc b">MyStaticLib</code>现已添加为<code class="fe ok ol om oc b">SwiftPackageDemo</code>应用的依赖项。</p><p id="f9ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您将在我们的应用程序中使用<code class="fe ok ol om oc b">MyStaticLib</code>代码。打开<code class="fe ok ol om oc b">AppDelegate.swift</code>，在<code class="fe ok ol om oc b">import UIKit</code>后，添加以下一行:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="6d79" class="np me it oc b gy og oh l oi oj">import MyStaticLib</span></pre><p id="e807" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，将下面一行添加到函数<code class="fe ok ol om oc b">application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool</code>中，在<code class="fe ok ol om oc b">return true</code>之前:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="5d70" class="np me it oc b gy og oh l oi oj">functionA()</span></pre><p id="c09d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在模拟器中运行应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/eaa30846623a699e7f47d27893770315.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*_Trp85qiwhqRDquWhIw_tg.png"/></div></figure><p id="231e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您应该看到静态库中的函数将一条消息打印到控制台。仅此而已！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="343c" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">摘要</h1><p id="b541" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本文中，您已经了解到:</p><ul class=""><li id="ae1e" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">为什么您应该以Swift包的形式发布您的库</li><li id="12f9" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">如何发布Swift包</li><li id="180d" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">如何消费Swift套餐</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="015d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">最终注释</h1><p id="b4f6" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">你可以在GitHub上找到本文的<a class="ae ky" href="https://github.com/anuragajwani/distributing_swift_lib_spm" rel="noopener ugc nofollow" target="_blank">完整源代码。</a></p><p id="869a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们已经讨论了以Swift包的形式发布静态库。然而，Swift动态框架呢？通过查看<a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/product/2878196-library" rel="noopener ugc nofollow" target="_blank">文档</a>，我们能够将Swift包作为动态库发布。我们可以通过改变<a class="ae ky" href="https://developer.apple.com/documentation/swift_packages/product/library/librarytype" rel="noopener ugc nofollow" target="_blank">库类型</a>来做到这一点。不过，这个我自己没试过。</p><p id="f26b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于Swift Package Manager的另一个值得注意的限制是，我们不能发布动态框架。有什么含义？简而言之，我们不能捆绑图像、xib或故事板文件等资源。</p><p id="1fa8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用Swift Package Manager分发编译过的静态库或者编译过的动态框架怎么样？我们也还不能这么做。然而，<a class="ae ky" href="https://github.com/apple/swift-evolution/blob/master/proposals/0272-swiftpm-binary-dependencies.md" rel="noopener ugc nofollow" target="_blank">该功能正在</a>上工作。</p><p id="6b95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，Swift Package Manager不能:</p><ul class=""><li id="da74" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">分配资源</li><li id="82f2" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">构建动态框架</li><li id="0c12" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">分发编译的库</li></ul></div></div>    
</body>
</html>