<html>
<head>
<title>Build a To-Do App in SwiftUI Using the New iOS 15 Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用iOS 15新功能在SwiftUI中构建待办事项应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-to-do-app-in-swiftui-using-the-new-ios-15-features-afe5650a24a9?source=collection_archive---------5-----------------------#2021-07-20">https://betterprogramming.pub/build-a-to-do-app-in-swiftui-using-the-new-ios-15-features-afe5650a24a9?source=collection_archive---------5-----------------------#2021-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8fb8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">实践中的9项新SwiftUI 3功能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/265aa0939f60a5bf3e085e44f33d7c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IsgsG7VOukpWztm9gp7eQQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供。</p></figure><p id="2819" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最近的WWDC会议标志着苹果推出SwiftUI两年了，和往常一样，框架背后的团队实现了大量新的特性和功能。</p><p id="89c4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于学习新工具的最佳方式之一是用它们来构建一些东西，所以我创建并外包了一个完全用SwiftUI 3编写的简单的待办事项应用程序，使用了许多新功能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5000" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">先决条件</strong></h1><p id="f21e" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">为了启动项目，需要采取以下步骤:</p><ul class=""><li id="fe41" class="mz na it la b lb lc le lf lh nb ll nc lp nd lt ne nf ng nh bi translated">下载Xcode 13+(目前<a class="ae lu" href="https://developer.apple.com/download/" rel="noopener ugc nofollow" target="_blank">为beta </a>)。</li><li id="4ae0" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated">创建一个新的SwiftUI项目(我们将使用CoreData进行持久性管理)。</li><li id="786c" class="mz na it la b lb ni le nj lh nk ll nl lp nm lt ne nf ng nh bi translated">在项目设置中选择iOS部署目标15.0。</li></ul><h2 id="7375" class="nn md it bd me no np dn mi nq nr dp mm lh ns nt mo ll nu nv mq lp nw nx ms ny bi translated">GitHub知识库</h2><p id="b3a2" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">或者，您也可以从GitHub 下载完成的项目<a class="ae lu" href="https://github.com/roman-luzgin/TodoAppSwiftUI3" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf45" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">很酷的新功能</h1><h2 id="21c9" class="nn md it bd me no np dn mi nq nr dp mm lh ns nt mo ll nu nv mq lp nw nx ms ny bi translated">新的列表功能—本机搜索、可定制的分隔符、拉至刷新</h2><p id="cded" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">SwiftUI 3最大的改进之一是新的原生<code class="fe nz oa ob oc b">List</code>功能。</p><p id="7c53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们要做的第一件事是删除列表行之间的分隔符。为此，我们首先用一个<code class="fe nz oa ob oc b">HStack</code>样式化一个待办事项行，然后在这个<code class="fe nz oa ob oc b">HStack</code>上使用<code class="fe nz oa ob oc b">.listRowSeparator(.hidden)</code> <em class="od"> </em>修饰符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/736f55ef41db96ec3328b4c3ed6d457c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OAgJPsOgf3WZMY4fT2Q2Xw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用。listRowSeparator(。隐藏)</p></figure><p id="450d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能已经注意到我们在<code class="fe nz oa ob oc b">ForEach</code>语句中使用了<code class="fe nz oa ob oc b">searchResults</code>。这是我们为我们的列表引入本地搜索栏的地方。</p><p id="ff51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实现<code class="fe nz oa ob oc b">.searchable()</code>修饰符需要两个元素:用简单的<code class="fe nz oa ob oc b">@State</code>变量实现的实际查询和结果逻辑。构建搜索逻辑最简单的方法是只过滤包含搜索查询(用户输入)的结果。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="44a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，您还可以通过使用<code class="fe nz oa ob oc b">.refreshable()</code>修饰符来启用刷新列表的pull。只要内部代码完成运行，iOS <a class="ae lu" href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-enable-pull-to-refresh" rel="noopener ugc nofollow" target="_blank">将</a>自动显示活动指示器。要了解更多关于使用<code class="fe nz oa ob oc b">.refreshable()</code>的信息，我建议直接去查看关于SwiftUI <code class="fe nz oa ob oc b">List</code>的<a class="ae lu" href="https://developer.apple.com/documentation/swiftui/list/" rel="noopener ugc nofollow" target="_blank">苹果文档</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="18e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/5b405a79208d9717c6a4e69ecb3790c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*QDkAHEUlYTbDQkDKzFaCYg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用。可刷新{ action }</p></figure><h2 id="a5bd" class="nn md it bd me no np dn mi nq nr dp mm lh ns nt mo ll nu nv mq lp nw nx ms ny bi translated">新的切换样式</h2><p id="670a" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">接下来我们将使用新的<code class="fe nz oa ob oc b">Toggle</code>样式。最有趣的一个是<code class="fe nz oa ob oc b">.toggleStyle(.button)</code> <em class="od"> </em>修改器，它创建了一个类似按钮的开关来改变状态。在我们的例子中，我们可以使用切换来过滤列表，只显示尚未完成的项目。在上一节中，您可以找到实现这一点的实际搜索查询。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/f75737484021dd32ba4604517586bb57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*l-mEpHvwHVsY7NsSa8V5Rg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用。toggleStyle(。按钮)</p></figure><h2 id="e6ed" class="nn md it bd me no np dn mi nq nr dp mm lh ns nt mo ll nu nv mq lp nw nx ms ny bi translated">材料(背景模糊)和新颜色</h2><p id="40d8" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">对于主屏幕，我们将使用新的材质效果在卡片和菜单上创建背景模糊。以前，创建材质效果的唯一方法是使用自定义UIKit解决方案，这有点混乱。在iOS 15中，只需几行代码就可以实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="ffe7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为顶上的小樱桃，我们现在可以使用几个新的原生色，包括<code class="fe nz oa ob oc b">.indigo</code>、<code class="fe nz oa ob oc b">.mint</code>和<code class="fe nz oa ob oc b">.teal</code>。不可否认，它们与新的材质效果结合起来看起来特别有趣。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/b7561d19a48b8b509a6ec67dc6c67a6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*AvDd8yivloLGPQ__HzVX4Q.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用材料(背景模糊)</p></figure><h2 id="3df8" class="nn md it bd me no np dn mi nq nr dp mm lh ns nt mo ll nu nv mq lp nw nx ms ny bi translated">一个新的简单的方法来关闭一个表单/全屏封面——@ focus state和submitLabel on TextField</h2><p id="e5b2" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">有几种不同的方法来消除原生表或全屏封面，在iOS 15中，我们又有了一种方法。您现在可以使用一个简单的<code class="fe nz oa ob oc b">dismiss()</code>动作和一个<code class="fe nz oa ob oc b">@Environment</code> <code class="fe nz oa ob oc b">dismiss</code>变量。该方法与表单上的<code class="fe nz oa ob oc b">.onSubmit</code>修饰符配合使用效果很好，这意味着您现在只需在完成键入后按“Done”<em class="od"/>即可关闭表单。</p><p id="d5cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，我们还使用了一个新的<code class="fe nz oa ob oc b">@FocusState</code>来确保键盘在我们按下“完成”后自动消失我们还可以在任何其他动作上切换<code class="fe nz oa ob oc b">@FocusState</code>为文本字段，比如按下屏幕上的另一个按钮或点击背景(你可以使用<code class="fe nz oa ob oc b">onTapGesture{}</code>来实现)。不幸的是，在文本编辑器中仍然没有简单的本地方法来做到这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/5a9eeeb4cc52c2ae1ba435da531152b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*dnP-HIMltpqDyaExvUJQ-Q.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用解散和@FocusState</p></figure><h2 id="d628" class="nn md it bd me no np dn mi nq nr dp mm lh ns nt mo ll nu nv mq lp nw nx ms ny bi translated">可定制的按钮</h2><p id="39ac" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">最后，还有一种新的本机方式来设计按钮。对于我们的应用程序，我们选择了带有靛蓝色彩的<code class="fe nz oa ob oc b">.roundedRectangle</code>形状，增加了突出度和大控件尺寸。注意，通过这种方式，我们不需要指定确切的框架大小，这意味着按钮将自动适应屏幕大小和动态类型(对于更大的可访问性大小)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/1c2ec6c54c12b2e282a6b16a7a41c0f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nOx7hXlGGqlN9uPqnaJtNw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4739" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="2062" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">总的来说，SwiftUI每年都在继续改进，在2021年，它获得了许多急需的原生功能。请注意，通过这个应用程序，我们只使用了WWDC 2021上展示的一小部分新功能，但它仍然产生了巨大的影响。</p><p id="f719" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是最终结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/0171432162b5d3986200a52891b650cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*AdKpEDeK0wMcu_pbRyWTQw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">决赛成绩</p></figure><p id="1626" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p></div></div>    
</body>
</html>