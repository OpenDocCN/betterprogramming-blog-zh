<html>
<head>
<title>Build a Fastlane Plugin for Flutter Version Management From Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从头开始为Flutter版本管理构建一个浪子插件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-fastlane-plugin-for-flutter-version-management-from-scratch-5df82bce391f?source=collection_archive---------24-----------------------#2020-03-10">https://betterprogramming.pub/build-a-fastlane-plugin-for-flutter-version-management-from-scratch-5df82bce391f?source=collection_archive---------24-----------------------#2020-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6a42" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">告别“哦不，我忘了撞版本”</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2c8ce04a5bb20a1ca073ca79ea1e5c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JPmlfiU7y3bqjErj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@steve_j?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯蒂夫·约翰森</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="fe61" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">浪子自动化移动应用部署</h1><p id="857f" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">传统上，发布一个应用程序需要大量的移动应用程序开发工作。</p><p id="3636" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">随着NoOps和跨平台框架(加倍努力发布)在2020年开始流行，开发者倾向于尽可能自动化应用部署。</p><p id="6517" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><a class="ae ky" href="https://fastlane.tools/" rel="noopener ugc nofollow" target="_blank">浪子</a>是一个自动将iOS和Android部署到市场的实用程序。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="6af9" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">浪子不支持颤振版本</h1><p id="ea65" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">版本管理对于自动化变更日志和上传截图到市场是必不可少的。</p><p id="1936" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">由于Flutter是新的，目前还不支持它的版本自动化。因此，每当有版本升级时，开发人员必须手动将更改同步到浪子的配置中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="5d37" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">浪子是可定制的，足以DIY Flutter版本支持</h1><p id="42d3" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">浪子对于任何任意的Ruby实现都是高度可配置的。</p><p id="4a1f" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">由于浪子的可定制结构，我们可以自己构建一个版本管理自动化插件。</p><p id="4d15" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">让我们一步一步为浪子构建一个Flutter版本管理插件。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="c786" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">步骤1:初始化浪子插件</h1><p id="11af" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">所有的浪子插件都以<code class="fe nb nc nd ne b">fastlane new_plugin flutter_version</code>开头，这是一个初始化插件所需的一切的便利工具。</p><p id="fa4e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在这种情况下，<code class="fe nb nc nd ne b">fastlane new_plugin flutter_version</code>初始化一个名为<code class="fe nb nc nd ne b">flutter_version</code>的插件，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="bcbf" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">步骤2:添加元数据</h1><p id="210e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">下一步是将联系信息添加到插件元数据中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="cefa" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">步骤3:读取颤振配置文件</h1><p id="ee14" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">第一步是读取和解析包含所有关于Flutter项目的元数据的配置文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="3490" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">步骤4:检索并返回Flutter版本代码</h1><p id="cabe" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">解析完Flutter项目的元数据后，我们现在可以检索版本代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="2358" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">步骤5:发布插件</h1><p id="f454" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">以下命令将把我们的插件发布到<a class="ae ky" href="https://rubygems.org/" rel="noopener ugc nofollow" target="_blank"> RubyGems </a>中，以便其他开发者可以使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="de30" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">步骤6:在一个Flutter项目中使用插件</h1><p id="ab3a" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">插件公开后，通过在<code class="fe nb nc nd ne b">Fastfile</code>中添加以下代码，可以在一个Flutter项目中使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="1da1" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如下面的浪子执行所示，<code class="fe nb nc nd ne b">flutter_version()</code>被求值为<em class="nf"> 8 </em>，这是<code class="fe nb nc nd ne b">pubspec.yaml</code>中定义的版本代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/3b1e61ac8fedc78f3e49915116f4ef64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r_l9BZALn1UxpBDkwkTpoQ.png"/></div></div></figure><p id="4e79" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">万岁！释放是自动的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/25ef87444c6af2a6489eb9fde59882d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_qTQIh959WaCw4l5LfZIvA.png"/></div></div></figure><p id="eea9" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">随着<code class="fe nb nc nd ne b">pubspec.yaml</code>版本的进展，变更日志会自动更新。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="39cb" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">资源</h1><p id="625f" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">对于有兴趣为Flutter项目添加开箱即用版本支持的人，请使用我构建的插件:</p><div class="ni nj gp gr nk nl"><a href="https://rubygems.org/gems/fastlane-plugin-flutter_version" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">RubyGems.org |你的社区宝石主机</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">RubyGems.org是通过与大Ruby社区的合作而成为可能的。快速提供带宽和CDN…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">rubygems.org</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz ks nl"/></div></div></a></div><p id="a1ba" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">对于有兴趣了解完整实现的人，请查看存储库:</p><div class="ni nj gp gr nk nl"><a href="https://github.com/tianhaoz95/fastlane-plugin-flutter_version" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">天昊95/快车道-外挂-颤振_版本</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">flutter_version是一个浪子插件，用于从flutter项目中检索版本代码，可以用来发布…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">github.com</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz ks nl"/></div></div></a></div><p id="1865" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">对于那些对如何在一个Flutter项目中使用该插件感兴趣的人，请查看示例库，<a class="ae ky" href="https://medium.com/minidonkey101" rel="noopener">迷你驴</a>(一个用于加密隐写术的应用):</p><div class="ni nj gp gr nk nl"><a href="https://github.com/tianhaoz95/photochat" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">天昊95/照片</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">迷你驴携带加密(AES)和隐写术(的技术)安全和秘密的私人信息</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">github.com</p></div></div><div class="nu l"><div class="ob l nw nx ny nu nz ks nl"/></div></div></a></div></div></div>    
</body>
</html>