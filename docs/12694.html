<html>
<head>
<title>How to Create a Loading Screen for Client-side Fetching in NextJs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在NextJs中为客户端抓取创建加载屏幕</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-a-loading-screen-for-client-side-fetching-in-nextjs-eaede11c0921?source=collection_archive---------2-----------------------#2022-06-23">https://betterprogramming.pub/how-to-create-a-loading-screen-for-client-side-fetching-in-nextjs-eaede11c0921?source=collection_archive---------2-----------------------#2022-06-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0889" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们继续，假设您熟悉NextJs或ReactJS和CSS动画</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/161366fb16266ff79d2de089a2b5fa12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oa7LWKuVFaIhmoYMFizgpQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">文章横幅</p></figure><p id="5ac6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">NextJs提供了几种从后端获取数据的方法，客户端获取是其中之一。</p><p id="52c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为NextJs使用服务器端呈现，所以所有组件都在服务器端呈现，数据也在服务器端缓存。有些情况下，我们可能需要从客户端检索数据，这可能包括</p><ol class=""><li id="2cb0" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">当我们需要从客户端访问<em class="ma">会话</em>或<em class="ma">本地存储</em>时。</li><li id="a1cb" class="lr ls iq kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">当网页内容需要频繁更新时。</li><li id="6dfd" class="lr ls iq kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">当我们不需要预先渲染数据时。</li><li id="31ab" class="lr ls iq kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">当页面不需要SEO索引时(提取敏感数据)</li></ol><p id="9dbe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与其关注NextJs如何在客户端获取数据，不如让我们讨论如何创建加载屏幕。</p><p id="b556" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们继续，<em class="ma">假设</em>你熟悉NextJs或ReactJS和CSS动画。</p><p id="80e6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">NextJs支持两种获取客户端数据的方法:<code class="fe mg mh mi mj b">useEffect</code> Hook或<code class="fe mg mh mi mj b">SWR</code> library。在这两种情况下，我们都必须显示一个<strong class="kx ir"> <em class="ma">预加载器</em> </strong>，直到我们的组件被渲染并且数据在客户端被获取。</p><p id="416f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是来自<a class="ae mk" href="https://nextjs.org/docs/basic-features/data-fetching/client-side" rel="noopener ugc nofollow" target="_blank"><em class="ma">NextJs’docs</em></a>的一个示例，其中显示了客户端数据获取，预加载器在<code class="fe mg mh mi mj b">&lt;p&gt;</code>标签内显示<strong class="kx ir"> <em class="ma">“正在加载…</em></strong>”。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="dac9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们要做的是，我们将创建一个新的react功能组件，其名称和扩展名为<code class="fe mg mh mi mj b">LoadingScreen.jsx</code>，并编写以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">加载屏幕反应组件</p></figure><p id="6b7b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的LoadingScreen组件的容器分部包含五个子分部。我们将使用CSS动画制作这五个部门的动画。</p><p id="74c9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们将使用容器div的类名<code class="fe mg mh mi mj b">loading-screen</code>来设计加载屏幕的背景。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="eefc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">是时候使用类名<code class="fe mg mh mi mj b">dot</code>来设计所有的点了，如下所示，</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="912c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们将为每个点设计出伪元素。在CSS动画的帮助下，每个伪元素将缩放实际点的2.5倍。如果你对理解下面定义的CSS有困难，你可以参考MDn关于<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Using_CSS_animations" rel="noopener ugc nofollow" target="_blank"> CSS动画</a>的文章。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="2ca0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到目前为止，动画是工作的，但没有指定任何点的颜色，因此我们甚至看不到任何点。</p><p id="971c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们在<code class="fe mg mh mi mj b">n-th child()</code>选择器的帮助下给所有的点填充颜色</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="3352" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在将颜色应用到所有的点之后，您可以看到如下图1所示的东西。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/c582a1ac369ea72cb3e25db079887a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NM8Gu9fBMA4UzY1KEKjahg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图一。正在加载动画gif</p></figure><p id="b4c4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">看起来很酷，对吧？但所有的点都在同一时间动画，这看起来很生硬。让我们给每个点添加动画延迟，并使它们同步。</p><p id="6312" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们添加动画延迟为</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="a1d5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">还有tada！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/0d7756ad6bc3082b702a7894cd866500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Gvgic29bgoiGVLmI6AVbUg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终点加载动画</p></figure><p id="fe39" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您可以在任何您想使用的地方导入和使用加载屏幕组件，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="c74a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ma">注意:-导入make时，给出正确的源路径和条件渲染。</em></p><p id="f202" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，这篇文章相对简单，我希望将来会有很多人开始使用它。它足够灵活，可以与任何类型的前端框架一起工作，因为所有的工作都是由CSS完成的。</p></div></div>    
</body>
</html>