<html>
<head>
<title>JavaScript Scope and Closure — A Look at Lexical Scope</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript作用域和闭包——看看词法作用域</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/scope-closure-lexical-scope-9a18d0579d66?source=collection_archive---------13-----------------------#2022-01-13">https://betterprogramming.pub/scope-closure-lexical-scope-9a18d0579d66?source=collection_archive---------13-----------------------#2022-01-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bab2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">理解JavaScript基础知识</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b636584d5575b3efd1f32dfad3e81e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dsQwPuxb8mUIUGZLecpmVQ.jpeg"/></div></div></figure><p id="a693" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以回顾这篇博客来深入研究Javascript   中的<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/a-look-at-javascript-scopes-acb0f5e9cd77"> <strong class="kt ir"> <em class="lo">作用域。你也可以阅读<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/a-look-at-javascript-closures-6de9b9ac4f8b"><strong class="kt ir"><em class="lo">‘看看Javascript闭包’</em></strong></a>博客来回顾闭包。</em></strong></a></p><p id="44e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">变量定义是编程中最重要的基础之一。使用任何编程语言的程序员在定义变量时都不会考虑背后的机制是如何工作的。</p><p id="3bdd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">了解这种机制的工作原理有助于开发人员改进和开发bug更少的程序。</p><p id="da44" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了更详细地学习如何在JavaScript中定义变量，第一步是掌握作用域和闭包这两个主题。让我们先看看这篇博客中的主题，然后再深入探讨作用域和闭包。</p><h1 id="5459" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated"><strong class="ak">内嵌主题</strong></h1><ul class=""><li id="f6e8" class="mh mi iq kt b ku mj kx mk la ml le mm li mn lm mo mp mq mr bi translated">什么是词法范围？</li><li id="3d23" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">块范围</li><li id="1861" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">功能范围</li><li id="cbfb" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">什么是吊装？</li><li id="73a3" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">吊装是如何工作的？</li><li id="5487" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">遮蔽</li></ul><h1 id="cdc6" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">词汇范围</h1><p id="6cc2" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la mx lc ld le my lg lh li mz lk ll lm ij bi translated">作用域如何工作取决于何时编译。因此，为了更好地理解作用域，有必要很好地了解编译器过程。根据计算机科学中的描述，编译过程基本上分为三个不同的部分。</p><ol class=""><li id="646e" class="mh mi iq kt b ku kv kx ky la na le nb li nc lm nd mp mq mr bi translated">标记化|词法</li><li id="66dc" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm nd mp mq mr bi translated">从语法上分析</li><li id="a5a7" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm nd mp mq mr bi translated">代码生成</li></ol><p id="367a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想更深入地了解编译器进程检查:<a class="ae ln" href="http://www.cs.man.ac.uk/~pjj/farrell/comp3.html" rel="noopener ugc nofollow" target="_blank">剖析一个编译器</a>。</p><p id="c317" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">词法范围是在编译时决定范围创建的范围类型。它的名字来源于Lexing，这是上面提到的编译过程的第一步。</p><p id="0342" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以词法作用域的目的是定义变量或在哪里放置块，并管理它们之间的关系。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">词法范围示例</p></figure><p id="1622" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在第一个<code class="fe nk nl nm nn b">changeValue</code>方法中，我们在if块中声明了变量值。</p><p id="4899" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在正常情况下，开发人员的预期行为是不能在第二行的<code class="fe nk nl nm nn b">if</code>块之外访问这个变量。</p><p id="d500" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是在编译时，它采用在词法作用域<code class="fe nk nl nm nn b">if</code>块中看到的用<code class="fe nk nl nm nn b">var</code>关键字定义的值变量，并在函数的顶部定义一个值变量，也就是在第2行。</p><p id="40cf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，在<code class="fe nk nl nm nn b">changeValue</code>函数的块级的每一行中，变量值变得可访问。在这里，移动到词法范围所做的函数的顶部被称为提升。用<code class="fe nk nl nm nn b">var</code>变量创建的作用域也称为函数作用域。</p><p id="7d5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">被定义为第二个函数的<code class="fe nk nl nm nn b">changeValue2</code>函数的唯一区别是，值变量是用<code class="fe nk nl nm nn b">let</code>关键字定义的，而不是用<code class="fe nk nl nm nn b">var</code>关键字定义的。用let定义值时出现的作用域称为<strong class="kt ir">块作用域。</strong></p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="b8b0" class="lp lq iq bd lr ls nv lu lv lw nw ly lz jw nx jx mb jz ny ka md kc nz kd mf mg bi translated">遮蔽</h1><p id="8f49" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la mx lc ld le my lg lh li mz lk ll lm ij bi translated">一个作用域不能包含两个或更多具有相同变量名的值，一个变量只能包含一个值。但是同一个变量名在不同的范围内可以保存不同的值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="c37e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">变量隐藏是指创建一个与不同范围内的变量同名的变量。和上面的例子一样，第一行中定义的<code class="fe nk nl nm nn b">name</code>变量在<code class="fe nk nl nm nn b">sayMyName</code>函数中被重新定义，以同样的方式，一个名为<code class="fe nk nl nm nn b">name</code>的变量。让我们看看词法范围的行为，以便更深入地理解这个问题。</p><ol class=""><li id="34ee" class="mh mi iq kt b ku kv kx ky la na le nb li nc lm nd mp mq mr bi translated">将写在第一行的<code class="fe nk nl nm nn b">name</code>变量赋给范围A</li><li id="bacc" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm nd mp mq mr bi translated">将第3行函数参数中的变量名赋给范围B</li><li id="c830" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm nd mp mq mr bi translated">第4行和第5行的命名操作是在作用域b中执行的。</li></ol><p id="8648" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从上面的操作可以看出，作用域A包括作用域B，按照JavaScript的术语，作用域A是外作用域，作用域B是内作用域。</p><p id="d975" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第8行调用函数时，写入控制台的名字是<code class="fe nk nl nm nn b">Caner Karaman</code>。控制台日志写在第9行的返回值是<code class="fe nk nl nm nn b">Hasan</code>。那叫遮蔽，是词法作用域的行为。如果内部作用域中有操作，它不会在该作用域中执行该操作，而是将它移到外部作用域中。</p></div></div>    
</body>
</html>