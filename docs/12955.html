<html>
<head>
<title>Implementing Image and Text Slider With React.js And Optimizations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React.js和优化实现图像和文本滑块</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-image-and-text-slider-with-react-js-and-optimizations-7a16af998548?source=collection_archive---------3-----------------------#2022-07-14">https://betterprogramming.pub/implementing-image-and-text-slider-with-react-js-and-optimizations-7a16af998548?source=collection_archive---------3-----------------------#2022-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c6b3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从头到尾设计它</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/75f8d6f34ccb9ea6a2d80304704b4083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*095nJUPNO-S22umjtH5Hwg.png"/></div></div></figure><p id="2f30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，我想讨论你在前端职位面试中可能遇到的问题——实现图像滑块。</p><p id="2fac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">过去5个月里，我参加了15次现场面试，收到了来自谷歌、Roku、微软和其他公司的邀请。</p><p id="27fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你应该用大约45-50分钟实现这个小部件，并告诉优化。我将在这里介绍这些信息。主要目标不是实现具有大量功能的图像滑块，目标是解释如何实现和优化。</p><h1 id="c533" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">要求</h1><p id="d044" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">让我们从小部件的需求开始。</p><ul class=""><li id="df87" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">显示API中有猫的图片，有一定的大小限制</li><li id="55be" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">显示每个图像的描述或标题</li><li id="f890" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">可以用箭头在图像间导航</li><li id="9207" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">在移动设备上通过触摸改变幻灯片的可能性</li><li id="8837" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">可以跳到任何幻灯片</li><li id="8768" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">滑块自动播放</li><li id="a07c" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">自定义滑块的宽度和高度的可能性</li><li id="d019" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">滑块应该有反应</li><li id="afea" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">滑块图像应该高效地下载并尽可能快地显示</li></ul><h2 id="ae91" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">实体模型</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/7d628f39a5fc2816659ad1025fc50750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uV-bwdGEXbKpKpmacQhpA.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">滑块模型</p></figure><h2 id="d7d4" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated"><strong class="ak">浏览器中的渲染</strong></h2><p id="6762" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">对于第一个简单的实现，我们在浏览器中呈现所有幻灯片，并在视口或slider元素中仅显示部分内容(当我们设置宽度或高度时)。这些解决方案下载所有幻灯片的所有图像，并有N个DOM元素，其中N —幻灯片的数量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/d77755e975c927b02818a7b812016ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rged1XIRcIKE5Yk4qkHw9Q.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">在浏览器中渲染</p></figure><h2 id="a620" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">组件架构</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/51464a57f9e7b228ae9447a15b1c0fd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y3eETQb29SPIJ4JoJhHR-g.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">滑块的组件架构</p></figure><h2 id="c037" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">组件实现</h2><p id="2247" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">先说我们滑块组件的道具。有了这些道具，我们就可以配置滑块了。</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="91eb" class="my lo iq ns b gy nw nx l ny nz">{</span><span id="23c0" class="my lo iq ns b gy oa nx l ny nz">   autoPlay: boolean,</span><span id="7d61" class="my lo iq ns b gy oa nx l ny nz">   autoPlayTime: number,</span><span id="3ac2" class="my lo iq ns b gy oa nx l ny nz">   width: '%' | 'px',</span><span id="f9b7" class="my lo iq ns b gy oa nx l ny nz">   height:  '%' | 'px',</span><span id="0029" class="my lo iq ns b gy oa nx l ny nz">}</span></pre><p id="5f60" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在滑块组件中，我们需要实现以下内容:</p><ul class=""><li id="c706" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">加载图像</li><li id="b143" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">实现通过箭头导航的方法</li><li id="ad38" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">实现一种通过点进行导航的方法</li><li id="3b18" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">实现触摸导航</li><li id="2d41" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">自动播放功能</li><li id="780d" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">渲染幻灯片、箭头和圆点</li></ul><p id="94ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将在组件的本地状态中保存当前幻灯片编号和下载的图像。为了避免道具和训练的计数，建议使用上下文来提供变化的幻灯片方法和当前的幻灯片信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">滑块组件</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">滑块组件样式</p></figure><p id="f082" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你在组件架构滑块上看到的，组件包含3个组件:滑块列表、箭头和点。</p><p id="1518" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在左边和右边有两个箭头。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">箭头组件</p></figure><p id="b9c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了在两边显示箭头，我们可以用CSS样式化它</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">箭头组件样式</p></figure><p id="3d40" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们知道幻灯片的数量，并且可以渲染正确的点数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">Dots组件</p></figure><p id="b0d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个点看起来都在跟随</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">点分量</p></figure><p id="6b5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了在SlideList中显示幻灯片，我们可以从上下文中获取项目，并使用关于幻灯片的键和数据来呈现幻灯片组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">SlideList组件</p></figure><p id="149b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要实现这样的动画，需要在样式中使用transform和translateX。我们按照数组中的幻灯片编号将内容移动到下一张幻灯片。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/39a41edd3448f3152713d02a8d24c154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8h1jP1yaIMl_Y3drI6OieA.gif"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">translateX动画</p></figure><p id="a9a2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Slide组件包含2个组件:SlideImage和SlideTitle。这种体系结构允许将来为每张幻灯片添加新功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">滑动组件</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">幻灯片图像组件</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">幻灯片标题组件</p></figure><h2 id="6751" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">如何优化解决方案？</h2><p id="ab7e" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">假设滑块中有很多图片，你需要优化它。优化取决于幻灯片动画的变化...是的，动画。</p><p id="3d54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在这里看到了两种优化方法。</p><ol class=""><li id="ab52" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm oe mq mr ms bi translated">一次显示3张幻灯片</li><li id="4b93" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm oe mq mr ms bi translated">一次只显示一张幻灯片</li></ol><p id="1e3b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看他们。</p><h2 id="76e8" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">一次优化3个载玻片</h2><p id="21fb" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果你想使用变换来改变幻灯片，你可以使用下面的优化。</p><p id="a503" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们一次只展示3张幻灯片。我们的活动幻灯片在中间，上一页和下一页幻灯片，因为用户可以更频繁地点击上一页或下一页箭头，或者在自动播放的情况下，我们每次都向前移动。</p><p id="5e05" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们移到上一张或下一张幻灯片时，我们计算新的3张幻灯片并渲染它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/759498394620ada131933231f553e7bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Vqor2pQWcf1Nk1oLnAZVA.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">一次渲染3张幻灯片</p></figure><h2 id="3713" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">一张幻灯片优化</h2><p id="381f" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果你想在CSS中使用动画，你可以使用一张幻灯片，每次显示一张幻灯片的信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/4fd4acaab01c977b4d70dac265ef4aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ipCH3MVNKDgS66kBNbehA.jpeg"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">一次呈现一张幻灯片</p></figure><p id="b727" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可以应用的动画效果示例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/12ea8b754f577fc65fb7b57cc7fdc286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TgQoqITNbAs1VIx6xD_aiw.gif"/></div></div><p class="nl nm gj gh gi nn no bd b be z dk translated">不透明动画</p></figure><p id="5cce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为此，需要对我们的解决方案进行一些更改。</p><p id="c31c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在没有必要使用SlidesList组件，我们应该只呈现一个Slide组件(第99行)。</p><p id="6a30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我们应该控制动画效果，并且只在改变幻灯片内容时应用它(第41行)。</p><p id="608f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后一个变化是，为了更好的用户体验，我们应该预加载当前幻灯片的上一张和下一张图片(第25行)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">用于单个幻灯片优化的滑块组件</p></figure><p id="0221" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在幻灯片中，我们只需要一个变化。当幻灯片切换被触发时，它应用动画类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">用于一个幻灯片优化的幻灯片组件</p></figure><p id="c04e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">风格中淡入动画的实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div><p class="nl nm gj gh gi nn no bd b be z dk translated">单幻灯片优化的滑块组件样式</p></figure><h2 id="a2cd" class="my lo iq bd lp mz na dn lt nb nc dp lx la nd ne lz le nf ng mb li nh ni md nj bi translated">另一个优化点</h2><ol class=""><li id="5577" class="mk ml iq kt b ku mf kx mg la oh le oi li oj lm oe mq mr ms bi translated"><strong class="kt ir">校正图像尺寸</strong> —如果您的滑块尺寸有限，则无需使用全高清分辨率。</li><li id="59fc" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm oe mq mr ms bi translated"><strong class="kt ir">使用WebP格式的图像</strong>—<strong class="kt ir">T5】允许缩小图像尺寸。它的压缩率比jpg和png至少高20–30%。</strong></li><li id="a93e" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm oe mq mr ms bi translated"><strong class="kt ir">不要使用100%质量的图像</strong> —没有必要使用100%质量的图像。根据我的经验，70-85%的质量看起来和100%一样，但是图像的尺寸要小一些。</li><li id="bfdf" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm oe mq mr ms bi translated"><strong class="kt ir">缩小JavaScript和样式。</strong></li><li id="dd54" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm oe mq mr ms bi translated"><strong class="kt ir">使用CDN存储图片。</strong></li><li id="eef0" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm oe mq mr ms bi translated"><strong class="kt ir">使用Brotli进行压缩。</strong></li></ol><p id="3a2c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">14–21%的数据的最终大小小于gzip</p><h1 id="e0dd" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="8e33" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">实现自己的图像滑块没有什么特别的知识。你需要在没有谷歌的情况下，在有限的时间内练习这样做。</p><p id="78c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你能在GitHub上看到的所有代码。</p><p id="2b70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在接下来的文章中，我将介绍树形视图小部件、星形小部件、Google doc和Google sheet系统设计。</p><p id="ee50" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以阅读的其他文章:</p><ul class=""><li id="aba8" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated"><a class="ae ok" rel="noopener ugc nofollow" target="_blank" href="/how-to-implement-star-rating-widget-with-react-js-and-optimize-it-e3625f3104f">如何用React.js实现星级Widget并优化</a></li></ul><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="fa3b" class="my lo iq ns b gy nw nx l ny nz"><strong class="ns ir">Want to Read More About Front-End Interviews?<br/></strong><a class="ae ok" href="https://t.me/front_end_interview" rel="noopener ugc nofollow" target="_blank">My blog</a></span></pre><p id="9fb4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝你面试好运！</p></div></div>    
</body>
</html>