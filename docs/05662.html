<html>
<head>
<title>Publish Your First Node Library Using npm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用npm发布您的第一个节点库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/publish-your-first-node-library-using-npm-ee6bb7052187?source=collection_archive---------16-----------------------#2020-07-24">https://betterprogramming.pub/publish-your-first-node-library-using-npm-ee6bb7052187?source=collection_archive---------16-----------------------#2020-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b90" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用npm托管您的库，以便其他开发人员可以使用它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c18a30156d58e7b2c113d287e8f02968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YylMuT1DC_xY8GKxz9ed3w.jpeg"/></div></div></figure><p id="476b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你是Node.js开发人员，使用npm包对你来说不会是一个新概念。从复杂的npm包(如express)到简单的包，npm托管了大量的Node.js库，这些库简化了节点开发人员的工作量。但是，您有没有想过发布自己的节点库来帮助其他开发人员呢？在今天的教程中，我们将介绍使用npm发布自己的Node.js库时必须遵循的步骤。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="0865" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">在我们开始之前…</h1><p id="8c95" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">在我们开始之前，您应该设置好以下内容。</p><ul class=""><li id="29f5" class="mu mv it kw b kx ky la lb ld mw lh mx ll my lp mz na nb nc bi translated">一个<a class="ae nd" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub账户</a></li><li id="a01c" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp mz na nb nc bi translated">Node.js和npm已安装(<a class="ae nd" href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" rel="noopener ugc nofollow" target="_blank">安装步骤</a></li><li id="c085" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp mz na nb nc bi translated">一个<a class="ae nd" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">国家预防机制账户</a></li></ul><p id="9be3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您已经完成了以上所有的设置，让我们开始发布库。</p><p id="6995" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本教程中，我们将创建一个简单的库，将一个句子转换为标题格(其中每个单词的第一个字母都是大写的)。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="ecce" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">选择包名</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/e44ebf6c5e7156b6128182dcaf7dc3b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N4BcJ3bVHudsNp7p.jpg"/></div></figure><p id="5e32" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当选择npm包的名字时，你必须检查这个名字是否在官方的<a class="ae nd" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm网站</a>上。如果您将它发布为未分类(公共)包，那么您的包名应该是唯一的。</p><p id="b746" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是，如果包是作用域包或私有包，则包名不必是唯一的，其格式为@username/package-name。你可以在这里找到更多关于作用域包<a class="ae nd" href="https://docs.npmjs.com/using-npm/scope.html#:~:text=Scoped%20packages%20can%20be%20published,registries%20at%20the%20same%20time." rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="fe04" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将要创建的包的名称是“标题-案例-转换器”。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="17a4" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">创建GitHub存储库</h1><p id="c95a" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">在GitHub中创建一个名为“标题-案例-转换器”的新存储库。确保使用自述文件初始化存储库。选择一个合适的许可证，比如麻省理工学院的许可证。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="5202" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">设置作者并登录npm</h1><p id="4ee5" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">将您的姓名、电子邮件和网站(如果有)保存到npm。这些细节将在创建时添加到项目的package.json文件中。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="c7b4" class="np ly it nl b gy nq nr l ns nt">npm set init.author.name "&lt;your-name&gt;"<br/>npm set init.author.email "&lt;your-email-address"&gt;<br/>npm set init.author.url "&lt;your-website-url&gt;"</span></pre><p id="b199" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，使用npm login命令登录npm。系统将提示您输入用于创建npm帐户的凭据。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="5602" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">初始化项目</h1><p id="995b" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">为项目创建一个新目录，并使用<code class="fe nu nv nw nl b">npm init</code>命令初始化它。确保填写<strong class="kw iu">包名</strong>、<strong class="kw iu">版本</strong>、<strong class="kw iu">描述</strong>、<strong class="kw iu"> git库</strong>、<strong class="kw iu">关键字</strong>和<strong class="kw iu">许可证</strong>字段，将这些细节添加到<code class="fe nu nv nw nl b">package.json</code>文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="524f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">(如果您已经登录，并且像我们上面所做的那样在初始文档中设置了作者，则可能不会询问作者填写)。</p><p id="beef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建的package.json文件包含这些细节。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="f161" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，您可以向<code class="fe nu nv nw nl b">package.json</code>文件添加另一个名为<strong class="kw iu"> engines </strong>的字段，以指定您的项目兼容的Node.js的最低版本。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="e7ee" class="np ly it nl b gy nq nr l ns nt">"engines": {<br/>    "node": "&gt;= 8.0.0"<br/> },</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="2545" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">关于版本的一点点</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/1f9e3870ba9e407ea9fec6db99986978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MiF9RTzVAliTbkcH.jpg"/></div></figure><p id="fb86" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意我们是如何将1.0.0版用于这个包的。这是我们应该用于发布到npm的包的初始版本的版本。</p><p id="541a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Npm使用一种称为语义版本化(SemVer)的版本化系统。默认的起始版本是1.0.0。在您的软件包的未来更新中，有三种类型的版本更改可以遵循SemVer标准。这三个被命名为补丁、小调和大调。</p><ol class=""><li id="fc1a" class="mu mv it kw b kx ky la lb ld mw lh mx ll my lp nz na nb nc bi translated">主要版本:当您进行不兼容的API更改时，</li><li id="84ee" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp nz na nb nc bi translated">次要版本:当您以向后兼容的方式添加功能时，并且</li><li id="0fcf" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp nz na nb nc bi translated">补丁版本:当你进行向后兼容的bug修复时。</li></ol><p id="134f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">预发布和构建元数据的附加标签可作为主标签的扩展。小调。补丁格式。</p><p id="fa1e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在这里阅读更多关于sever versioning<a class="ae nd" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">的内容。</a></p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="3932" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">创建节点模块</h1><p id="7161" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">现在我们可以实现我们的包，标题-案例-转换器。</p><p id="e4ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建一个名为<code class="fe nu nv nw nl b">app.js</code>(或者您设置为入口点的文件)的文件，并向其中添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="ae04" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它包含一个名为<code class="fe nu nv nw nl b">converter</code>的函数，该函数接受一个字符串句子，并将其中每个单词的首字母大写。上面代码最重要的部分是使用<code class="fe nu nv nw nl b">module.exports</code>导出创建的函数。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="d020" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">初始化Git</h1><p id="99cc" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">现在，我们将使用命令<code class="fe nu nv nw nl b">git init</code>为我们的项目初始化git。然后，使用以下命令转移我们更改的文件。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="8d93" class="np ly it nl b gy nq nr l ns nt">git add .</span></pre><p id="3da5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在下一步中，将代码的更改提交到本地存储库。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="2ccb" class="np ly it nl b gy nq nr l ns nt">git commit -m "initial changes"</span></pre><p id="1e35" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">之后，我们必须添加GitHub存储库作为项目的远程存储库。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="c7cd" class="np ly it nl b gy nq nr l ns nt">git remote add origin &lt;GitHub repository URL&gt;</span></pre><p id="611e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从远程存储库中提取变更，然后将本地变更推送到其中。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="3fd4" class="np ly it nl b gy nq nr l ns nt">git pull origin master<br/>git push origin master</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="e7e3" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">为软件包编写一个好的自述文件</h1><p id="ec5b" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">发布npm软件包时，包含一个好的自述文件至关重要。它向其他用户简要介绍了您的包是做什么的，以及他们如何在他们的项目中使用它。</p><p id="e67d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在这里找到一个模板来创建一个好的自述文件<a class="ae nd" href="https://gist.github.com/PurpleBooth/109311bb0361f32d87a2" rel="noopener ugc nofollow" target="_blank">。为了更好地了解自述文件的外观，您可以浏览流行的npm包和GitHub库，看看其他人是如何做到的。</a></p><p id="c2e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通常，自述文件应包含以下字段。</p><ul class=""><li id="c1a8" class="mu mv it kw b kx ky la lb ld mw lh mx ll my lp mz na nb nc bi translated">对您的包的功能的简短描述。</li><li id="3c23" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp mz na nb nc bi translated">另一个用户如何安装该包以便在他们的项目中使用它。</li><li id="466b" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp mz na nb nc bi translated">如何在项目中使用包。提供解释用法的代码示例。</li><li id="60df" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp mz na nb nc bi translated">如何为你的套餐做贡献？如果您希望其他开源开发人员也为这个项目做出贡献，那么这个字段必须添加到README文件中。</li><li id="419a" class="mu mv it kw b kx ne la nf ld ng lh nh ll ni lp mz na nb nc bi translated">包使用的许可证。对于这个包，我们使用了麻省理工学院的许可证。</li></ul><p id="3b6e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这些改变之后，不要忘记承诺和推动。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="b480" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">将包发布到npm</h1><p id="74f4" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">即使第一次听说发布库的概念时感觉工作量很大，但这一步却出奇的简单。您所要做的就是在命令行中运行下面的命令。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="ae58" class="np ly it nl b gy nq nr l ns nt">npm publish</span></pre><p id="9e5c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您选择了一个与现有npm包不冲突的包名，这一步应该会很顺利，在几秒钟内，您的第一个包就会发布到npm。</p><p id="1d53" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，您可以创建一个新的Node.js项目，并使用这个命令将您的新包作为一个依赖项进行安装。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="70f3" class="np ly it nl b gy nq nr l ns nt">npm install title-case-converter --save</span></pre><p id="1f92" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，您可以将该包导入到新项目中，并使用它将句子转换为您希望的标题格。</p><pre class="kj kk kl km gt nk nl nm nn aw no bi"><span id="2e0d" class="np ly it nl b gy nq nr l ns nt">const converter = require("title-case-converter")</span><span id="fc0d" class="np ly it nl b gy oa nr l ns nt">let convertedSentence = converter("my name is juan") //"My Name Is Juan"</span></pre><p id="1183" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就是这样！您现在是一个已发布的npm包的自豪的所有者。</p><p id="409d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以尝试创建一个更复杂的Node.js模块，然后将其发布到npm。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="08e6" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">结论</h1><p id="0ba5" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">正如您可能已经预料到的，发布NPM包是一项简单的任务，您并不总是需要按照本教程中解释的相同顺序执行相同的步骤。您可以分配作者，或者稍后通过使用npm命令或简单地编辑<code class="fe nu nv nw nl b">package.json</code>文件来修改包名或任何其他属性。</p><p id="77d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望你今天学到了新的东西，一如既往地感谢你的阅读！</p></div></div>    
</body>
</html>