<html>
<head>
<title>Create Breathe App-like Animation Using SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI创建类似Breathe应用程序的动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-breathe-apps-animation-in-swift-6c0a10cb928a?source=collection_archive---------8-----------------------#2022-11-15">https://betterprogramming.pub/create-breathe-apps-animation-in-swift-6c0a10cb928a?source=collection_archive---------8-----------------------#2022-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9af2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用<code class="fe kf kg kh ki b">offset</code>变化、<code class="fe kf kg kh ki b">rotationEffect</code>和<code class="fe kf kg kh ki b">scaleEffect</code>创建一个类似于呼吸应用的动画</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/56b7509d26551e9dc43abec4c52c0236.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*TLCAjMUnWq1foUbD3LpQ5A.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Breathe App的动画(转换成GIF dint很顺利，这就是为什么它是像素化的🥲)</p></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="bf92" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">实施分解</h1><ul class=""><li id="c0be" class="lu lv iq lw b lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">创建一组两个圆，一个具有+ve偏移，一个具有-ve偏移。<em class="mm">注意:偏置值必须等于圆的半径。<br/> </em>添加一个状态变量来切换<code class="fe kf kg kh ki b">Offset</code>、<code class="fe kf kg kh ki b">rotationEffect</code>和<code class="fe kf kg kh ki b">scaleEffect</code></li><li id="b91c" class="lu lv iq lw b lx mn lz mo mb mp md mq mf mr mh mi mj mk ml bi translated">用相同的偏移值再次创建另外两组2个圆，并添加一个度数为60的增量乘数<code class="fe kf kg kh ki b">rotationEffect</code></li><li id="29d2" class="lu lv iq lw b lx mn lz mo mb mp md mq mf mr mh mi mj mk ml bi translated">给每个圆形集合添加一个<code class="fe kf kg kh ki b">scaleEffect</code>修改器</li><li id="8790" class="lu lv iq lw b lx mn lz mo mb mp md mq mf mr mh mi mj mk ml bi translated">切换自动反转动画块中的状态变量</li></ul></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="9acc" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">创建圆集</h1><p id="bab7" class="pw-post-body-paragraph ms mt iq lw b lx ly jr mu lz ma ju mv mb mw mx my md mz na nb mf nc nd ne mh ij bi translated">我们将从主视图ZStack开始，在这个ZStack中，我们将创建两个圆，一个有+ve偏移，一个有-ve偏移。我们还将添加一个状态变量<code class="fe kf kg kh ki b">stateAnimation</code>，用于切换<code class="fe kf kg kh ki b">Offset</code>、<code class="fe kf kg kh ki b">rotationEffect</code>和<code class="fe kf kg kh ki b">scaleEffect</code>。</p><p id="c22c" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">我们将用蓝色和白色混合的线性渐变填充这个圆。相同的<code class="fe kf kg kh ki b">startPoint</code>和<code class="fe kf kg kh ki b">endPoint</code>依次为<code class="fe kf kg kh ki b">.top</code>、<code class="fe kf kg kh ki b">.bottom</code>，第一圈和第二圈依次为<code class="fe kf kg kh ki b">.bottom</code>、<code class="fe kf kg kh ki b">.top</code>。</p><p id="88a4" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">为了更好的外观和感觉，我们还将子ZStack的不透明度更改为0.5。</p><p id="457c" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">此时，代码将如下所示</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nk nl l"/></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/13f86a0057b66377d12dd9519b36bcb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*NOyAeJwhzdAcs7ViAW1z7g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">进展1</p></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="6aab" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">更多位于不同角度的圆组</h1><p id="3b90" class="pw-post-body-paragraph ms mt iq lw b lx ly jr mu lz ma ju mv mb mw mx my md mz na nb mf nc nd ne mh ij bi translated">我们将添加2个额外的圆，使交叉点看起来像一朵有6个花瓣的花。为此，我们将使用一个ForEach并迭代2次，给它一个<code class="fe kf kg kh ki b">rotationEffect</code>，它是每次迭代的乘数60。<br/>我们还将使用我们的状态变量将<code class="fe kf kg kh ki b">rotationEffect</code>从当前角度切换回其重置的0度角度，使其看起来如下所示。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/60b3e819186b58bfa8560068e5608a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*Q9MWtFFpJllush3x1yT-HA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">进展2</p></figure><p id="c497" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">此时，代码将如下所示</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e58b" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">从上面的代码中，您可以看到我们将迭代值乘以60度。所以在第一次迭代中，角度将是<code class="fe kf kg kh ki b">0 * 60 = 0</code>，第二个<code class="fe kf kg kh ki b">1*60 = 60</code>，第三个<code class="fe kf kg kh ki b">2*60 = 120</code></p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="0054" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">添加缩放效果</h1><p id="b206" class="pw-post-body-paragraph ms mt iq lw b lx ly jr mu lz ma ju mv mb mw mx my md mz na nb mf nc nd ne mh ij bi translated">为了让这个应用看起来更生动，我们将缩小它，然后用动画放大。为此，我们将简单地使用<code class="fe kf kg kh ki b">scaleEffect</code>一个修饰符，它的值将再次在状态变量的帮助下切换。我们将从尺寸0.2缩放到尺寸1(初始帧尺寸)。</p><pre class="kk kl km kn gt no ki np bn nq nr bi"><span id="acff" class="ns ld iq ki b be nt nu l nv nw">.scaleEffect(startAnimation ? 1 : 0.2)</span></pre><p id="f7d9" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">我们将使用上面的代码将<code class="fe kf kg kh ki b">scaleEffect</code>修饰符添加到我们的圆形集合堆栈中。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="f383" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">设置动画</h1><p id="534d" class="pw-post-body-paragraph ms mt iq lw b lx ly jr mu lz ma ju mv mb mw mx my md mz na nb mf nc nd ne mh ij bi translated">我们将在<code class="fe kf kg kh ki b">onAppear</code>修改器中制作整体动画。我们将添加<code class="fe kf kg kh ki b">onAppear</code>修改器，并在<code class="fe kf kg kh ki b">onAppear</code>修改器中添加带有属性的<code class="fe kf kg kh ki b">withAnimation</code>块</p><pre class="kk kl km kn gt no ki np bn nq nr bi"><span id="9a87" class="ns ld iq ki b be nt nu l nv nw">animationtype = easeInOut <br/>repeat forever <br/>autoreverse = true <br/>speed = 0.1</span></pre><p id="92f9" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">一旦设置了<code class="fe kf kg kh ki b">withAnimation</code>块，我们将添加代码来切换我们已经创建的状态变量，如下行代码所示。</p><pre class="kk kl km kn gt no ki np bn nq nr bi"><span id="3cae" class="ns ld iq ki b be nt nu l nv nw">startAnimation.toggle()</span></pre><p id="fc0e" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">现在，每一秒钟，我们都会触发<code class="fe kf kg kh ki b">startAnimation</code>。并且随着<code class="fe kf kg kh ki b">startAnimation</code>值的改变，其他修改器的值也将改变。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="96cd" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">您可以在下面找到最终代码:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="d4e6" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">最终的动画将如下所示:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/56b7509d26551e9dc43abec4c52c0236.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*TLCAjMUnWq1foUbD3LpQ5A.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终动画</p></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="8b1b" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">我希望你明白我们如何使用<code class="fe kf kg kh ki b">rotationEffect, offset and scaleEffect</code>来创建一个类似于Breathe App的动画。</p><p id="a42e" class="pw-post-body-paragraph ms mt iq lw b lx nf jr mu lz ng ju mv mb nh mx my md ni na nb mf nj nd ne mh ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>