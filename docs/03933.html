<html>
<head>
<title>Stop Returning None From Python Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止从Python函数返回None</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/please-stop-returning-none-from-python-functions-ff98e492b4b0?source=collection_archive---------2-----------------------#2020-03-13">https://betterprogramming.pub/please-stop-returning-none-from-python-functions-ff98e492b4b0?source=collection_archive---------2-----------------------#2020-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="791c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为什么？因为它容易出错，而且会让呼叫者感到困惑</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/32a4ba8023a571a87bec631985510bf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L50hqT4bvSuWKBvnrVwx0g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@5tep5?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">亚历山大·波波夫</a>在<a class="ae kv" href="https://unsplash.com/s/photos/traffic-light?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2131" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，在阅读Python代码时，您会遇到返回<code class="fe ls lt lu lv b">None</code>的实用函数。虽然在某些情况下返回<code class="fe ls lt lu lv b">None</code>看起来很自然，但是应该避免，因为它很容易出错。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="09c1" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">让我们看看为什么返回None容易出错</h1><p id="db96" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">假设你想写一个简单的库函数，将两个数相除。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d381" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当分母为0时，该函数返回<code class="fe ls lt lu lv b">None</code>。这是有意义的，因为结果是未定义的，所以发送<code class="fe ls lt lu lv b">None</code>听起来很自然。但是，该功能的用户可能会错误地使用它，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="e879" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当分子为0时，函数将返回0，这是意料之中的，但是看看在<code class="fe ls lt lu lv b">if</code>语句中发生了什么。</p><p id="a802" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它在寻找一个<code class="fe ls lt lu lv b">False</code> <strong class="ky ir"> </strong>的等价物，并且会错误地执行，告诉用户你的输入是无效的，这是<em class="nc">而不是</em>真的！<strong class="ky ir"> </strong>像这样在<code class="fe ls lt lu lv b">if</code>条件下评估响应容易出错。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="ff20" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">应该返回什么？</h1><p id="d068" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">正确的方法是在库函数中抛出一个异常，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="8874" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，函数的调用者负责通过<a class="ae kv" href="https://docs.python.org/3/tutorial/errors.html" rel="noopener ugc nofollow" target="_blank">捕捉异常</a>并采取适当的行动来处理无效用例。呼叫者没有任何猜测或假设，结果更加清晰。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="183c" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated"><strong class="ak">资源</strong></h1><ul class=""><li id="c2ee" class="nd ne iq ky b kz mv lc mw lf nf lj ng ln nh lr ni nj nk nl bi translated"><a class="ae kv" href="https://gist.github.com/i4ali/49a2b3ba56e4debe17cc094c8cb05e18" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li></ul></div></div>    
</body>
</html>