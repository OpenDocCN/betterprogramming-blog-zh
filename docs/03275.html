<html>
<head>
<title>Learn the Basics of Brownie</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习核仁巧克力饼的基本知识</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/part-1-brownie-smart-contracts-framework-for-ethereum-basics-5efc80205413?source=collection_archive---------5-----------------------#2020-01-31">https://betterprogramming.pub/part-1-brownie-smart-contracts-framework-for-ethereum-basics-5efc80205413?source=collection_archive---------5-----------------------#2020-01-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4092" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以太坊的智能合约框架</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/201213921f3cd2a2cb8d8cabc3b1d900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e0dV8J1z9irdrd6Pzrpcpw.jpeg"/></div></div></figure><p id="442a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://github.com/iamdefinitelyahuman/brownie" rel="noopener ugc nofollow" target="_blank"> Brownie </a>是一个健壮、易用的框架，用于开发以太坊智能合约。使用案例包括:</p><ul class=""><li id="ad11" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><strong class="kw iu">部署</strong>:自动将许多合同部署到区块链上，以及初始化或集成它们所需的任何事务。</li><li id="efcf" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">交互</strong>:编写脚本或使用控制台在mainnet上与您的合同进行交互，或者在本地环境中进行快速测试。</li><li id="0565" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">调试</strong>:当事务恢复时获取详细信息，帮助您快速查明问题。</li><li id="0de0" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">测试</strong>:用Python编写单元测试，基于栈跟踪分析评估测试覆盖率。我们不做任何承诺。</li></ul><p id="0df3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们在Solidity中创建一个非常简单的智能契约，只暴露两个外部函数，<code class="fe mf mg mh mi b">getValue</code>和<code class="fe mf mg mh mi b">setValue</code>。将此智能合同保存在文件中，<code class="fe mf mg mh mi b">smart_contract.sol</code>。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="d23c" class="mn mo it mi b gy mp mq l mr ms">pragma solidity ^0.5.11;</span><span id="af5a" class="mn mo it mi b gy mt mq l mr ms">contract SimpleContract {<br/>     uint value;<br/>     function setValue(uint _value) external {value = _value;}<br/>     function getValue() external view returns(uint){return value;}       <br/>}</span></pre><p id="00fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们试着用Brownie部署这个智能契约并与之交互。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="9cf7" class="nb mo it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">设置</h1><p id="24d5" class="pw-post-body-paragraph ku kv it kw b kx ns ju kz la nt jx lc ld nu lf lg lh nv lj lk ll nw ln lo lp im bi translated">我们将使用Python 3.7和virtualenv来隔离我们的环境。如果您没有安装Python 3.7，请按照以下步骤操作。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="e028" class="mn mo it mi b gy mp mq l mr ms">sudo add-apt-repository ppa:deadsnakes/ppa          <br/>sudo add-apt-repository ppa:ethereum/ethereum<br/>sudo apt-get update<br/>sudo apt install -y python3.7<br/>sudo apt-get install -y python3.7-dev python3-pip virtualenv python-dev solc</span></pre><p id="23ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将使用<a class="ae lq" href="https://www.codeooze.com/blockchain/ethereum-dev-environment-2019/" rel="noopener ugc nofollow" target="_blank"> Ganache </a>(以太坊开发的个人区块链)。你可以安装<code class="fe mf mg mh mi b">ethereum-testrpc</code>，但是这样我们就不能运行图形界面了。请按照这里提到的步骤安装Ganache。</p><p id="9002" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为你的Solidity项目创建一个虚拟环境。我把它命名为<code class="fe mf mg mh mi b">TestBrownie</code>。安装布朗尼。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="e4b0" class="mn mo it mi b gy mp mq l mr ms">pip install eth-brownie</span></pre><p id="4719" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要初始化一个空项目，首先创建一个新文件夹。在该文件夹中，键入:</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="2e0f" class="mn mo it mi b gy mp mq l mr ms">brownie init</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="db4f" class="nb mo it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">项目的结构</h1><p id="b27d" class="pw-post-body-paragraph ku kv it kw b kx ns ju kz la nt jx lc ld nu lf lg lh nv lj lk ll nw ln lo lp im bi translated">每个布朗尼项目都包括以下文件夹:</p><ul class=""><li id="056d" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">contracts/</code>:合同来源</li><li id="7afd" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">interfaces/</code>:接口来源</li><li id="7131" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">scripts/</code>:部署和交互脚本</li><li id="37e5" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">tests/</code>:测试项目的脚本</li><li id="f9b7" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">brownie-config.yaml</code>:项目配置文件</li></ul><p id="9ce3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Brownie内部也创建并使用以下文件夹来管理项目。您不应编辑或删除这些文件夹中的文件。</p><ul class=""><li id="0891" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">build/</code>:项目数据，例如编译器工件和单元测试结果</li><li id="69b5" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><code class="fe mf mg mh mi b">reports/</code>:在GUI中使用的JSON报告文件</li></ul></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="621e" class="nb mo it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated"><strong class="ak">编译</strong></h1><p id="67de" class="pw-post-body-paragraph ku kv it kw b kx ns ju kz la nt jx lc ld nu lf lg lh nv lj lk ll nw ln lo lp im bi translated">在<code class="fe mf mg mh mi b">contracts</code>目录中复制您的智能合同<code class="fe mf mg mh mi b">smart_contract.sol</code>。要编译项目的<code class="fe mf mg mh mi b">contracts/</code>子文件夹中的所有合同源:</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="1881" class="mn mo it mi b gy mp mq l mr ms">$ brownie compile</span></pre><p id="3c86" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每次编译器运行时，Brownie都会将每个合同源的散列与现有编译版本的散列进行比较。如果契约没有改变，它就不会被重新编译。如果您希望强制重新编译整个项目，请使用<code class="fe mf mg mh mi b">brownie compile --all</code>。</p><p id="e710" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想编译一个不同版本的Solidity契约，只需在你的<code class="fe mf mg mh mi b">.sol</code>文件的编译指示中提到它。如果没有，它将自动安装。这里要注意一件事:</p><p id="c4dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">编译器的设置可在<code class="fe mf mg mh mi b">brownie-config.yaml</code>中找到。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="438c" class="mn mo it mi b gy mp mq l mr ms"><strong class="mi iu">evm_version</strong>: null<br/><strong class="mi iu">minify_source</strong>: false<br/><strong class="mi iu">solc</strong>:<br/>    <strong class="mi iu">version</strong>: 0.6.0<br/>    <strong class="mi iu">optimize</strong>: true<br/>    <strong class="mi iu">runs</strong>: 200</span></pre><p id="654c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">修改任何编译器设置都将导致项目的完全重新编译。</p><p id="a368" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果在配置文件中设置了编译器版本，则项目中的所有协定都将使用该版本进行编译。版本应该以字符串的形式给出<code class="fe mf mg mh mi b">0.x.x</code>。</p><p id="71b9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果版本设置为<code class="fe mf mg mh mi b">null</code>，Brownie会查看每个契约的<a class="ae lq" href="https://solidity.readthedocs.io/en/latest/layout-of-source-files.html#version-pragma" rel="noopener ugc nofollow" target="_blank">版本杂注</a>，并使用已安装的最新匹配编译器版本。</p><p id="3e37" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">关于<code class="fe mf mg mh mi b">evm_version</code>，Brownie根据编译器设置规则集。</p><ul class=""><li id="e27d" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><strong class="kw iu">拜占庭</strong>:坚固度&lt; =0.5.4</li><li id="761b" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">彼得斯堡</strong>:坚固度&gt; =0.5.5 &lt; =0.5.12</li><li id="6e62" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">伊斯坦布尔</strong>:坚实度&gt; =0.5.13，Vyper</li></ul><p id="7ef8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您也可以手动设置EVM版本。有效选项有<code class="fe mf mg mh mi b">byzantium</code>、<code class="fe mf mg mh mi b">constantinople</code>、<code class="fe mf mg mh mi b">petersburg</code>和<code class="fe mf mg mh mi b">istanbul</code>。您也可以使用以太坊经典规则集<code class="fe mf mg mh mi b">atlantis</code>和<code class="fe mf mg mh mi b">agharta</code>，它们在被传递给编译器之前会被转换成它们的以太坊等价规则。</p><p id="efae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">注:</strong> Brownie支持Solidity版本&gt; =0.4.22和Vyper版本0.1.0-b16。</p><p id="eb7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">成功编译后，Brownie将在builds/contract文件夹中创建一个<code class="fe mf mg mh mi b">SimpleContract.json</code>文件。</p><h2 id="191c" class="mn mo it bd nc nx ny dn ng nz oa dp nk ld ob oc nm lh od oe no ll of og nq oh bi translated"><strong class="ak">展开</strong></h2><p id="da10" class="pw-post-body-paragraph ku kv it kw b kx ns ju kz la nt jx lc ld nu lf lg lh nv lj lk ll nw ln lo lp im bi translated">如果你打开<code class="fe mf mg mh mi b">brownie-config.yaml</code>，它有一个网络部分。您可以自定义现有网络，也可以在“网络”下创建新的块。我使用的是Ganache GUI，它运行在端口7545上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/6cc49a336248349b015545271a2d0195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqxVJThclQW0szqftpI69A.png"/></div></div></figure><p id="8538" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我在网络下创建了一个私有块。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="818a" class="mn mo it mi b gy mp mq l mr ms">network:<br/>    default: development # the default network that brownie connects to<br/>    settings:<br/>        gas_limit: "auto"<br/>        gas_price: "auto"<br/>        persist: true<br/>        reverting_tx_gas_limit: false  # if false, reverting tx's will raise without broadcasting<br/>    networks:<br/>        # any settings given here will replace the defaults<br/>        private:<br/>            host: <a class="ae lq" href="http://172.28.128.1:7545/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:7545/</a><br/>            gas_price: 0<br/>            persist: false</span></pre><p id="6cba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">保存此文件。现在，为了部署我们编译的智能契约，我们将使用Brownie控制台。当您希望直接与部署在非本地链上的契约进行交互，或者在开发过程中进行快速测试时，控制台非常有用。这也是熟悉Brownie功能的一个很好的起点。</p><p id="9b1c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">控制台感觉非常类似于常规的Python解释器。在项目文件夹中，通过键入以下命令来加载它:</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="cf3b" class="mn mo it mi b gy mp mq l mr ms">$ brownie console<br/>##if you want to use a specific network entioned in your config file, use<br/>$ brownie console --network private<br/>##this will connect your brownie console with your ganache private ##network.<br/>Brownie v1.5.1 - Python development framework for Ethereum</span><span id="038e" class="mn mo it mi b gy mt mq l mr ms">Project is the active project.<br/>Brownie environment is ready.</span></pre><p id="ad62" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们探索。</p><p id="5631" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以将输出中的帐户与Ganache GUI上显示的帐户进行交叉检查。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="d7d0" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; from brownie import accounts<br/>&gt;&gt;&gt; accounts<br/>[&lt;Account '0xd5373B59FDF14e9F1f5cc858eCAE0e6662FfedC1'&gt;, &lt;Account '0x533D7aa17435Ee227FdC30BA94fF8a509532D776'&gt;, &lt;Account '0x40E29Ca2269785f2F53d7E41006FC83eb3df4D0a'&gt;, &lt;Account '0x537f82751024Ed22F9f943e32A30e47B5A1Da6Df'&gt;, &lt;Account '0x28556574cfE7331738FadEE2fb6eC2630A9C142b'&gt;, &lt;Account '0xfe96534827B237951d4Ab4018Ff8c014B8918521'&gt;, &lt;Account '0xF32D5DfeCf6e1F6Fb2b29DF29Aba8fBd6bCB9D9E'&gt;, &lt;Account '0x88fdA9f0938A1fB5C5C902aeA8Bf28dE76d5467f'&gt;, &lt;Account '0xf6FAdCF3e805E61B1051A610a38365c74310ecCc'&gt;, &lt;Account '0x42904B9429E8d0599b90d6E24dF578684c0E03d3'&gt;]</span></pre><p id="9106" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每个帐户都由一个可以执行操作的<code class="fe mf mg mh mi b"><a class="ae lq" href="https://eth-brownie.readthedocs.io/en/stable/api-network.html#api-network-account" rel="noopener ugc nofollow" target="_blank">Account</a></code>对象表示，比如查询余额或发送ETH。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="a2fe" class="mn mo it mi b gy mp mq l mr ms"><strong class="mi iu">&gt;&gt;&gt; </strong>accounts[0]<br/>&lt;Account '0xd5373B59FDF14e9F1f5cc858eCAE0e6662FfedC1'&gt;<br/><strong class="mi iu">&gt;&gt;&gt; </strong>dir(accounts[0])<br/>[address, balance, deploy, estimate_gas, nonce, transfer]<br/><strong class="mi iu">&gt;&gt;&gt; </strong>accounts[1].balance()<br/>100000000000000000000<br/><strong class="mi iu">&gt;&gt;&gt; </strong>accounts[0].transfer(accounts[1], "10 ether")</span><span id="e5df" class="mn mo it mi b gy mt mq l mr ms">Transaction sent: 0xb9738009af0a8b721bca854572ce21622ebfeb2aca5d89eccfc55dfd42a5d202<br/>  Gas price: 0.0 gwei   Gas limit: 21000<br/>  Transaction confirmed - Block: 1   Gas used: 21000 (100.00%)</span><span id="c773" class="mn mo it mi b gy mt mq l mr ms">&lt;Transaction '0xb9738009af0a8b721bca854572ce21622ebfeb2aca5d89eccfc55dfd42a5d202'&gt;<br/><strong class="mi iu">&gt;&gt;&gt; </strong>accounts[1].balance()<br/>110000000000000000000</span></pre><p id="9331" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每个可部署的契约和库都有一个用于部署新契约和访问现有契约的<code class="fe mf mg mh mi b"><a class="ae lq" href="https://eth-brownie.readthedocs.io/en/stable/api-network.html#api-network-contractcontainer" rel="noopener ugc nofollow" target="_blank">ContractContainer</a></code>类。所有被编译的契约将作为同名的变量可用。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="2ddb" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; type(SimpleContract)<br/>&lt;class 'brownie.network.contract.ContractContainer'&gt;<br/>&gt;&gt;&gt; SimpleContract<br/>[]<br/>&gt;&gt;&gt; SimpleContract.abi<br/>[<br/>    {<br/>        'constant': True,<br/>        'inputs': [],<br/>        'name': "getValue",<br/>        'outputs': [<br/>            {<br/>                'internalType': "uint256",<br/>                'name': "",<br/>                'type': "uint256"<br/>            }<br/>        ],<br/>        'payable': False,<br/>        'stateMutability': "view",<br/>        'type': "function"<br/>    },<br/>    {<br/>        'constant': False,<br/>        'inputs': [<br/>            {<br/>                'internalType': "uint256",<br/>                'name': "_value",<br/>                'type': "uint256"<br/>            }<br/>        ],<br/>        'name': "setValue",<br/>        'outputs': [],<br/>        'payable': False,<br/>        'stateMutability': "nonpayable",<br/>        'type': "function"<br/>    }<br/>]<br/>&gt;&gt;&gt; accounts[0]<br/>&lt;Account '0xd5373B59FDF14e9F1f5cc858eCAE0e6662FfedC1'&gt;</span></pre><p id="6027" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用帐户<code class="fe mf mg mh mi b">0</code>部署合同:</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="fe4a" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; accounts[0].deploy(SimpleContract)<br/>Transaction sent: 0xf0681bafbeae7e36de5a944fe247b6a8e08289906b602e986a5a8ca2c39d0df3<br/>  Gas price: 0.0 gwei   Gas limit: 100127<br/>  SimpleContract.constructor confirmed - Block: 2   Gas used: 100127 (100.00%)<br/>  SimpleContract deployed at: 0x531afb27345047755741513b4dC70AD35e6F986b</span><span id="1fd9" class="mn mo it mi b gy mt mq l mr ms">&lt;SimpleContract Contract '0x531afb27345047755741513b4dC70AD35e6F986b'&gt;</span></pre><p id="2f84" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您键入<code class="fe mf mg mh mi b">SimpleContract</code>，您可以看到一个已部署的<code class="fe mf mg mh mi b">SmartContract</code>实例的列表，它是一个<code class="fe mf mg mh mi b">ContractContainer</code>对象。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="51e1" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; SimpleContract<br/>[&lt;SimpleContract Contract '0x531afb27345047755741513b4dC70AD35e6F986b'&gt;]</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="87c6" class="nb mo it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated"><strong class="ak">互动</strong></h1><p id="f726" class="pw-post-body-paragraph ku kv it kw b kx ns ju kz la nt jx lc ld nu lf lg lh nv lj lk ll nw ln lo lp im bi translated">参见本合同上的可用方法:</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="5a06" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; SimpleContract.signatures<br/>{<br/>    'getValue': "0x20965255",<br/>    'setValue': "0x55241077"<br/>}</span></pre><p id="aab9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从在智能契约中设置一个变量开始。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="ede1" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; tx = SimpleContract[0].setValue(10000)<br/>Transaction sent: 0x8efb92f53c3995294597b13b81c2b067e1cece2c29333accde7e9e7f61ee1acc<br/>  Gas price: 0.0 gwei   Gas limit: 41717<br/>  SimpleContract.setValue confirmed - Block: 4   Gas used: 41717 (100.00%)</span></pre><p id="335f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每个事务返回一个<code class="fe mf mg mh mi b"><a class="ae lq" href="https://eth-brownie.readthedocs.io/en/stable/api-network.html#api-network-tx" rel="noopener ugc nofollow" target="_blank">TransactionReceipt</a></code>对象。该对象包含关于事务的所有相关信息，以及在事务被恢复时帮助调试的各种方法。</p><p id="70bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要获得交易的可读信息，请使用<code class="fe mf mg mh mi b">TransactionReceipt.info()</code>。</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="f52b" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; tx.info()<br/>Transaction was Mined <br/>---------------------<br/>Tx Hash: 0x8efb92f53c3995294597b13b81c2b067e1cece2c29333accde7e9e7f61ee1acc<br/>From: 0xd5373B59FDF14e9F1f5cc858eCAE0e6662FfedC1<br/>To: 0x531afb27345047755741513b4dC70AD35e6F986b<br/>Value: 0<br/>Function: SimpleContract.setValue<br/>Block: 4<br/>Gas Used: 41717 / 41717 (100.0%)</span></pre><p id="18a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要进行检查，请使用:</p><pre class="kj kk kl km gt mj mi mk ml aw mm bi"><span id="1dbf" class="mn mo it mi b gy mp mq l mr ms">&gt;&gt;&gt; SimpleContract[0].getValue()<br/>10000</span></pre><p id="56ba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在下一节中，我将尝试探索Brownie中的测试。布朗尼有很多好吃的。</p><p id="be64" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我的Eth地址:0x 01445 b 7d 9d 63381d 0e 7a 6d 8556 f 62 a 24197 bea 1f</p><p id="d50a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我的比特币地址:BC 1 qhdzydl 7 kwjk 8 rez nvj 3 yd 6s 0cg 7 e 7 r 2 SAS gfxc</p></div></div>    
</body>
</html>