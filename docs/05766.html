<html>
<head>
<title>useFetch and Custom React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Fetch和自定义React挂钩</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/usefetch-and-custom-react-hooks-13efc51ef5de?source=collection_archive---------12-----------------------#2020-08-04">https://betterprogramming.pub/usefetch-and-custom-react-hooks-13efc51ef5de?source=collection_archive---------12-----------------------#2020-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2cfb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看useFetch的一些优点</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d850e9286755210052b6e03c762a7197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_l8MpCH3DUIp6G9n"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安德鲁·庞斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="450b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">重要的事情先来</h1><p id="9d45" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">React 16.8发布后，React挂钩改变了我们看待组件的方式。他们使得使用React类组件变得没有必要。然而，降低基于类的组件的重要性是有代价的。如果你正在创建基于类的组件，你不能添加生命周期事件——那么使用React首先有什么意义呢？</p><p id="9f15" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这就是React Hooks来救援的地方。胡克斯让你的机能处于类固醇状态。您可以停止依赖类，转而使用函数(如果您更喜欢类而不是函数，情况就不同了)。钩子将彻底改变React代码的编写方式。迟早，你会陷入其中。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="98ec" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">定制挂钩？</h1><p id="500e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在某些情况下，您可能已经多次对类组件(有状态的)使用了相同的逻辑。以前，我们可以通过依赖渲染道具和高阶组件来处理这种情况。但是我们可以用定制的钩子以一种更简单、更干净的方式来完成。这些是普通的JavaScript函数，可以在其中使用其他钩子，并且包含一个通用的有状态逻辑，可以在多个组件中重用。这些函数都以“使用”一词为前缀。</p><p id="d63d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">重申一下，钩子只是函数，所以避免重复代码和应用DRY模式的一个好方法(如果你不知道DRY是什么，我推荐你阅读我的关于干净代码的文章)是创建定制钩子，并导入重用它所必需的所有组件。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="7581" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">做家庭作业</h1><p id="22ba" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果你更关心生产力而不是学习，看看npm包，看看是否已经有一个定制的钩子满足你的需要。然而，我的建议是，即使有一个适合你的定制钩子，你也应该发展技能来创建自己的钩子。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ad62" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">钩子的规则</h1><p id="9c12" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">据<a class="ae ky" href="https://reactjs.org/docs/hooks-rules.html" rel="noopener ugc nofollow" target="_blank">官方React网站</a>介绍，使用React钩子需要遵循一些规则:</p><ul class=""><li id="352f" class="ne nf it lt b lu mn lx mo ma ng me nh mi ni mm nj nk nl nm bi translated">仅从React函数组件调用挂钩。不要从常规的JavaScript函数中调用钩子。(只有一个地方可以调用钩子——在你自己的定制钩子中。我们一会儿就会了解到这一点。)</li><li id="7123" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated">只调用顶层的钩子。不要在循环、条件或嵌套函数中调用钩子。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="466f" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">useFetch挂钩用途</h1><p id="8509" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">前端做HTTP请求的方法有很多，最常见的是Axios和fetch。这个自定义挂钩的目的是封装您的请求，并避免项目中的代码重复:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="8a8c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面这段代码是自定义的钩子，但是我们如何在现实中使用它呢？这很简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="11df" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">useFetch有什么优势？</h1><p id="57eb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">使用钩子，您可以从视图(您的功能组件)访问您的数据层，创建一个更可靠的结构来分离这些概念。当您需要在您的功能组件中处理多个请求时，这一点更加重要。当您只需要获取一次数据，而不需要在URL中进行分页、参数或查询参数更新时，那么<code class="fe nu nv nw nx b">useFetch</code>就不那么有用了。</p></div></div>    
</body>
</html>