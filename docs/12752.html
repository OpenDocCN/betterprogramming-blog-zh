<html>
<head>
<title>How to Create and Publish React TypeScript npm Package With Demo and Automated Build</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用演示和自动构建创建和发布React TypeScript npm包</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-and-publish-react-typescript-npm-package-with-demo-and-automated-build-80c40ec28aca?source=collection_archive---------0-----------------------#2022-06-29">https://betterprogramming.pub/how-to-create-and-publish-react-typescript-npm-package-with-demo-and-automated-build-80c40ec28aca?source=collection_archive---------0-----------------------#2022-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4072" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习从零开始创造惊人的项目</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/b47790e4f73cacc8decee80e77aae204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rI0VMLMIarstY7nICV5kgQ.png"/></div></figure><h1 id="0eae" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">介绍</h1><p id="4679" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为什么我决定再写一篇关于发布npm包的文章？当我需要自己创建这样一个包时，我发现网上的大多数说明要么已经过时，要么非常短，在生产中毫无用处。</p><p id="8792" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我将尽可能清晰地描述所有步骤，以便您可以从头开始创建自己的项目。我们开始吧！</p><p id="0c67" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我建议创建一个简单的React应用程序，它将由两个增加或减少计数器值的按钮组成。</p><p id="439c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">这是我们的应用程序的外观:</p><p id="0a63" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">演示:<a class="ae mg" href="https://gapon2401.github.io/my-react-typescript-package/" rel="noopener ugc nofollow" target="_blank">https://gapon2401.github.io/my-react-typescript-package/</a><br/>回购:<a class="ae mg" href="https://github.com/gapon2401/my-react-typescript-package" rel="noopener ugc nofollow" target="_blank">https://github.com/gapon2401/my-react-typescript-package</a></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="c1e7" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们有14个步骤来处理所有事情:</p><ol class=""><li id="2874" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma mt mu mv mw bi translated"><a class="ae mg" href="#a15d" rel="noopener ugc nofollow">准备项目</a></li><li id="85f3" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#48c1" rel="noopener ugc nofollow">创建您的react应用程序</a></li><li id="dbae" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#bf2d" rel="noopener ugc nofollow">配置git </a></li><li id="1c11" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#0e1f" rel="noopener ugc nofollow">配置ESLint </a></li><li id="493f" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#4760" rel="noopener ugc nofollow">配置更漂亮</a></li><li id="376f" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#7b1c" rel="noopener ugc nofollow">用Jest添加测试</a></li><li id="74b4" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#12f8" rel="noopener ugc nofollow">配置package.json，准备发布</a></li><li id="68cf" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#8cf2" rel="noopener ugc nofollow">提交并推送您的代码</a></li><li id="35e4" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#b9e9" rel="noopener ugc nofollow">出版到NPM </a></li><li id="ed89" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#38de" rel="noopener ugc nofollow">创建示例文件夹</a></li><li id="a233" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#b8a5" rel="noopener ugc nofollow">设置自动构建</a></li><li id="9ef9" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#a5ea" rel="noopener ugc nofollow">演示页面</a></li><li id="b040" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#8891" rel="noopener ugc nofollow"> README.md文件和shields.io </a></li><li id="fd55" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma mt mu mv mw bi translated"><a class="ae mg" href="#2a4f" rel="noopener ugc nofollow">制作发布</a></li></ol><h1 id="a15d" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">步骤一。准备项目</strong></h1><ul class=""><li id="d057" class="mo mp iq lh b li lj ll lm lo nc ls nd lw ne ma nf mu mv mw bi translated">在项目的命令行中，执行:</li></ul><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c7c6" class="nl ko iq nh b gy nm nn l no np">npm init -y</span></pre><p id="8159" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">它将使用默认值创建<code class="fe nq nr ns nh b">package.json</code>文件，稍后我们将对其进行修改。</p><ul class=""><li id="3b0c" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">创建文件夹<code class="fe nq nr ns nh b">src</code></li></ul><p id="cbdc" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在这里，我们将保存所有项目文件。</p><ul class=""><li id="8f07" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">将React和TypeScript添加到项目中(如果您不介意，我将使用<code class="fe nq nr ns nh b">yarn</code>)</li></ul><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="9ac3" class="nl ko iq nh b gy nm nn l no np">yarn add -D react react-dom typescript @types/react</span></pre><p id="f121" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在我们有了<code class="fe nq nr ns nh b">node_modules</code>文件夹和一个<code class="fe nq nr ns nh b">yarn.lock</code>——不错！</p><ul class=""><li id="cbc8" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">为了编译TypeScript，在项目根目录下创建一个包含以下内容的<code class="fe nq nr ns nh b">tsconfig.json</code>文件:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">tsconfig.json</p></figure><p id="c4fd" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">你可以在这里看看所有可能的房产:【https://www.typescriptlang.org/tsconfig T21】</p><p id="5029" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">从主要:</p><p id="1ec9" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">- <code class="fe nq nr ns nh b">rootDir</code> —源文件中的根文件夹</p><p id="425f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">-<code class="fe nq nr ns nh b">include</code>-指定要包含在TypeScript项目中的文件</p><p id="32ab" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">- <code class="fe nq nr ns nh b">exclude</code> —指定要从TypeScript项目中排除的文件。我们不想包含<code class="fe nq nr ns nh b">dist</code>文件夹和所有的<code class="fe nq nr ns nh b">node_modules</code></p><p id="63eb" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">- <code class="fe nq nr ns nh b">outDir</code> —这是编译输出的位置</p><ul class=""><li id="f4d5" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">创建空的<code class="fe nq nr ns nh b">README.md</code>和<code class="fe nq nr ns nh b">LICENSE</code>文件</li></ul><p id="8899" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">使用什么许可证由你决定。我会用麻省理工。您可以检查该文件的内容。</p><p id="3c98" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">看一看我们应该有的结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/b7cdbc4bc60625f8a2f8baf5c4e4c47b.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/1*7jzC3s7hcElCZmA5zIICvA.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">步骤1后的项目结构</p></figure><h1 id="48c1" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">第二步。创建您的React应用程序</h1><p id="0760" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">src</code>中创建文件夹<code class="fe nq nr ns nh b">components</code>。在那里，您可以保存项目的所有组件。在本文中，我们将只创建一个文件<code class="fe nq nr ns nh b">App.tsx</code>，其内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">src/components/App.tsx</p></figure><p id="d62d" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">这是我们的React应用程序。</p><p id="66f0" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，在<code class="fe nq nr ns nh b">src</code>文件夹中创建一个文件<code class="fe nq nr ns nh b">index.ts</code>。导出模块。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">src/索引. ts</p></figure><p id="04a4" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">是时候编译项目了！</p><p id="7abe" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">让我们改变我们的<code class="fe nq nr ns nh b">package.json</code>并替换<code class="fe nq nr ns nh b">scripts</code>部分:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">package.json</p></figure><p id="a606" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在终端中运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="1fce" class="nl ko iq nh b gy nm nn l no np">yarn build</span></pre><p id="a7fb" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">文件夹<code class="fe nq nr ns nh b">dist</code>应显示所有编译的代码。</p><p id="22e6" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">恭喜你！我们已经创建了应用程序，并对其进行了编译。再走几步就完事了！(不是。)</p><p id="0c86" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在步骤2之后比较您的项目结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/c4e217491ceb1dc48d7edf3651e049ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*1BS6RtOlS5cp0Rw9-qIYpw.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">步骤2后的项目结构</p></figure><h1 id="bf2d" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第三步。配置git </strong></h1><p id="7d3a" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们很快创建了项目；现在是吃git的时候了。</p><p id="4ede" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">使用以下命令初始化项目根目录中的<code class="fe nq nr ns nh b">git</code>:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="7188" class="nl ko iq nh b gy nm nn l no np">git init</span></pre><p id="39c2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在项目根目录下创建<code class="fe nq nr ns nh b">.gitignore</code>文件，内容如下:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="64c0" class="nl ko iq nh b gy nm nn l no np">node_modules<br/>.idea<br/>dist<br/>yarn-error.log</span></pre><p id="2b49" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我加了<code class="fe nq nr ns nh b">.idea</code>，因为我是借助Jetbrains IDE开发的。</p><p id="b242" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">.gitignore</code>中，我们列出了那些我们不想包含在存储库中的文件和目录。</p><p id="4b58" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在GitHub 上创建一个git repo。稍后，我们将创建一个初始提交，并将远程git与本地git连接起来。</p><h1 id="0e1f" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第四步。配置ESLint </strong></h1><p id="9528" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">ESLint静态分析你的代码，快速发现问题。我们只在发展中需要它。</p><p id="f77c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">使用以下代码添加eslint和所有必要的组件:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b794" class="nl ko iq nh b gy nm nn l no np">yarn add -D eslint eslint-plugin-react eslint-plugin-react-hooks @typescript-eslint/eslint-plugin @typescript-eslint/parser</span></pre><p id="63d3" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">你可以随意配置；有一个大用户指南:<a class="ae mg" href="https://eslint.org/docs/user-guide/configuring/" rel="noopener ugc nofollow" target="_blank">https://eslint.org/docs/user-guide/configuring/</a></p><p id="ae06" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我建议您在项目的根目录下创建一个<code class="fe nq nr ns nh b">.eslintrc</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">。eslintrc</p></figure><p id="3cdc" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">添加<code class="fe nq nr ns nh b">.eslintignore</code>:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="a3c3" class="nl ko iq nh b gy nm nn l no np">node_modules<br/>dist</span></pre><p id="e592" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们将忽略检查<code class="fe nq nr ns nh b">dist</code>文件夹中的编译文件和<code class="fe nq nr ns nh b">node_modules</code>。</p><p id="d831" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">更改<code class="fe nq nr ns nh b">package.json</code>，添加到<code class="fe nq nr ns nh b">scripts</code>部分:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="daf9" class="nl ko iq nh b gy nm nn l no np">"lint": "eslint \"{**/*,*}.{js,ts,jsx,tsx}\""</span></pre><p id="293f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">下面是我的<code class="fe nq nr ns nh b">package.json</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">package.json</p></figure><p id="aa0a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="9e84" class="nl ko iq nh b gy nm nn l no np">yarn lint</span></pre><p id="ee22" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">你不应该有任何错误。</p><p id="3fcd" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在步骤4之后比较您的项目结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/3fac5f3e8c0429ffe4263f8887b66a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*pKiGZXK4YRmOiK9UHYygNQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">步骤4后的项目结构</p></figure><h1 id="4760" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第五步。配置更漂亮</strong></h1><p id="29d8" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">漂亮是一个代码格式化程序。在团队工作时使用它很方便，这样每个人的代码都符合相同的标准。</p><p id="efd5" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在终端中，运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="ae65" class="nl ko iq nh b gy nm nn l no np">yarn add -D eslint-config-prettier eslint-plugin-prettier prettier</span></pre><p id="7880" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在项目根中，创建<code class="fe nq nr ns nh b">.prettierrc.json</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated"><code class="fe nq nr ns nh b">.prettierrc.json</code></p></figure><p id="9252" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">阅读更多关于所有选项的信息:<a class="ae mg" href="https://prettier.io/docs/en/options.html" rel="noopener ugc nofollow" target="_blank">https://prettier.io/docs/en/options.html</a>。</p><p id="e87b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">给<code class="fe nq nr ns nh b">.eslintrc</code>添加一个更漂亮的插件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">。eslintrc</p></figure><p id="9cf9" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们已经完成了更漂亮的设置；现在尝试运行<code class="fe nq nr ns nh b">yarn lint</code>来检查格式错误。如果你没有，你就没有通过人体测试😆。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi oc"><img src="../Images/4684503672a15c46e712fcb442646cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MnyzqNsfxzsY8JSRLa8EpQ.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">Eslint更漂亮的错误</p></figure><p id="b615" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">是时候修复它们了！将以下内容添加到<code class="fe nq nr ns nh b">package.json</code>中的<code class="fe nq nr ns nh b">scripts</code>:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="9073" class="nl ko iq nh b gy nm nn l no np">"prettier": "prettier --write \"{src,tests,example/src}/**/*.{js,ts,jsx,tsx}\""</span></pre><p id="e315" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">好的，运行<code class="fe nq nr ns nh b">yarn prettier</code>，你将得到类似于:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/a4efbdc5365803d3da1a17c5b7356f91.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*hOmMsj1ZTUuLGZJoMB1PrQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">纱线更漂亮</p></figure><p id="911b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，在<code class="fe nq nr ns nh b">yarn lint</code>之后，你应该不会有任何错误。检查文件<code class="fe nq nr ns nh b">src/components/App.tsx</code>和<code class="fe nq nr ns nh b">src/index.ts</code>，它们已经改变。</p><p id="df69" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated"><code class="fe nq nr ns nh b">package.json</code>中我的<code class="fe nq nr ns nh b">scripts</code>部分:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="36da" class="nl ko iq nh b gy nm nn l no np">"scripts": {<br/>  "build": "tsc",<br/>  "lint": "eslint \"{**/*,*}.{js,ts,jsx,tsx}\"",<br/>  "prettier": "prettier --write \"{src,tests,example/src}/**/*.{js,ts,jsx,tsx}\""<br/>}</span></pre><p id="d941" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在步骤5之后比较您的项目结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/5c17960606a6ef7f93055e4391fab2b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*MhQmIV5eD213F3mmQu535w.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">步骤5后的项目结构</p></figure><h1 id="7b1c" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第六步。用Jest添加测试</strong></h1><p id="d34f" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了创建测试，我使用了<a class="ae mg" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>库。这是一个非常有用和强大的测试框架。当然，测试的难度取决于你。</p><p id="cb88" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">将<code class="fe nq nr ns nh b">jest</code>添加到您的项目:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="fdee" class="nl ko iq nh b gy nm nn l no np">yarn add -D jest jest-canvas-mock jest-environment-jsdom ts-jest @types/jest @testing-library/react</span></pre><p id="423a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建项目根文件<code class="fe nq nr ns nh b">jestconfig.json</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated"><code class="fe nq nr ns nh b">jestconfig.json</code></p></figure><p id="0ef7" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建文件夹<code class="fe nq nr ns nh b">tests</code>。</p><p id="2c96" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">是时候编写我们的第一个测试了。我们将编写一个非常简单的测试，它将检查我们的渲染是否成功通过。</p><p id="c64e" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">tests</code>文件夹中，创建文件<code class="fe nq nr ns nh b">common.test.tsx</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">测试/ <code class="fe nq nr ns nh b">common.test.tsx</code></p></figure><p id="b1c4" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">更改<code class="fe nq nr ns nh b">package.json</code>中的<code class="fe nq nr ns nh b">scripts</code>部分:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="022c" class="nl ko iq nh b gy nm nn l no np">"test": "jest --config jestconfig.json"</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated"><code class="fe nq nr ns nh b">package.json</code></p></figure><p id="41a0" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">运行<code class="fe nq nr ns nh b">yarn test</code>。你应该通过测试:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/17436098015ff28a287cf826f0a0649e.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*OK2zYpAl1iSyV05Q9qvnyQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">测试通过</p></figure><p id="f96f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在步骤6之后比较您的项目结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/e6ced658b31ae5edca21c3da8b3068f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*qkmCvH3e69v9GL0FwGMs8Q.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">步骤6后的项目结构</p></figure><h1 id="12f8" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">第七步。配置package.json并准备发布</h1><p id="732b" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我建议拆分我们的<code class="fe nq nr ns nh b">build</code>。我们不仅要编译ECMAScript模块，还要编译CommonJs模块，以使我们的包尽可能易于访问。</p><p id="aa3b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">package.json</code>中，更换:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c717" class="nl ko iq nh b gy nm nn l no np">"build": "tsc",</span></pre><p id="af74" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">使用以下代码:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="9f35" class="nl ko iq nh b gy nm nn l no np">"build": "yarn build:esm &amp;&amp; yarn build:cjs",<br/>"build:esm": "tsc",<br/>"build:cjs": "tsc --module commonjs --outDir dist/cjs",</span></pre><p id="d55f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们添加了<code class="fe nq nr ns nh b">build:esm</code>和<code class="fe nq nr ns nh b">build:cjs</code>并将它们合并在一个命令中。</p><p id="ccc9" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">运行<code class="fe nq nr ns nh b">yarn build</code>你会看到，我们的<code class="fe nq nr ns nh b">dist/</code>现在也有了一个<code class="fe nq nr ns nh b">cjs</code>文件夹。</p><p id="f3c1" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">更进一步。</p><p id="bf40" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">package.json</code>中，我们可以使用神奇的脚本，这些脚本会在软件包发布时自动调用。他们将帮助我们检查我们的包中的各种错误，而不是意外地上传一个会导致成百上千个使用我们的包的项目崩溃的更新！</p><ul class=""><li id="fe2e" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated"><code class="fe nq nr ns nh b">prepare</code> —在打包和发布包之前运行。在本地npm安装上运行，不带任何参数，</li><li id="675c" class="mo mp iq lh b li mx ll my lo mz ls na lw nb ma nf mu mv mw bi translated"><code class="fe nq nr ns nh b">prepublishOnly</code> —在包准备和打包之前运行，仅在npm发布时运行。这是我们的测试。</li></ul><p id="d3cb" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">将以下内容添加到<code class="fe nq nr ns nh b">scripts</code>部分:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="4224" class="nl ko iq nh b gy nm nn l no np">"prepare": "npm run build",<br/>"prepublishOnly": "npm test &amp;&amp; npm run prettier &amp;&amp; npm run lint"</span></pre><p id="47cd" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">更换<code class="fe nq nr ns nh b">version</code>、<code class="fe nq nr ns nh b">description</code>。</p><p id="0892" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">告诉npm它可以从哪里导入我们项目的主文件，以及所有类型的位置:</p><p id="0dfb" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">替换:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="ab82" class="nl ko iq nh b gy nm nn l no np">"main": "index.js",</span></pre><p id="b127" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">使用:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="18b2" class="nl ko iq nh b gy nm nn l no np">"main": "./dist/cjs/index.js",<br/>"module": "./dist/esm/index.js",<br/>"types": "./dist/esm/index.d.ts",</span></pre><p id="cafc" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">添加关于远程git存储库的信息(在步骤3中指定您的git URL):</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c803" class="nl ko iq nh b gy nm nn l no np">"repository": {<br/>  "type": "git",<br/>  "url": "git+https://github.com/gapon2401/my-react-typescript-package.git"<br/>},</span></pre><p id="2135" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">指定将使用我们的包的项目必须具有至少&gt; =16的react版本:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="a9b7" class="nl ko iq nh b gy nm nn l no np">"peerDependencies": {<br/>  "react": "&gt;=16"<br/>},</span></pre><p id="2825" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">为了确保您的包没有任何冗余文件，请仅使用将被添加到包中的允许的文件和文件夹:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b31b" class="nl ko iq nh b gy nm nn l no np">"files": [<br/>  "dist",<br/>  "LICENSE",<br/>  "README.md"<br/>],</span></pre><p id="fae9" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">添加关键词，以便每个人都可以找到您的项目:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="4248" class="nl ko iq nh b gy nm nn l no np">"keywords": [<br/>  "react",<br/>  "typescript",<br/>  "awesome-project"<br/>],</span></pre><p id="e636" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">指定您的许可证:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="6732" class="nl ko iq nh b gy nm nn l no np">"license": "MIT",</span></pre><p id="b380" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">不要忘记更改<code class="fe nq nr ns nh b">author</code>:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="8c58" class="nl ko iq nh b gy nm nn l no np">"author": "Igor Gaponov (gapon2401)",</span></pre><p id="9e25" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我想这就够了。</p><p id="6c55" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">向您的<code class="fe nq nr ns nh b">README.md</code>文件添加描述。</p><p id="6b62" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">目前，我在那里只有一排。这是h1:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c6a7" class="nl ko iq nh b gy nm nn l no np"># my-react-typescript-package</span></pre><p id="cc90" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">看看<code class="fe nq nr ns nh b">package.json</code>的最终版本:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">package.json</p></figure><h1 id="8cf2" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">第八步。提交并推送您的代码</h1><p id="116f" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，让我们连接远程和本地存储库，并推动我们的项目。</p><p id="6da2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">运行以下代码:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="f988" class="nl ko iq nh b gy nm nn l no np">git add .<br/>git commit -m "Initial commit"<br/>git remote add origin &lt;Repository Url&gt;<br/>git push -u origin master</span></pre><p id="6d5f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">别忘了换上你的<code class="fe nq nr ns nh b">&lt;Repository Url&gt; </code>。可以是<code class="fe nq nr ns nh b">https</code>网址，也可以是<code class="fe nq nr ns nh b">ssh</code>。你可以在你的知识库中找到这个URL。</p><p id="b50f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">让我们来看一些例子。</p><ul class=""><li id="eab5" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">HTTPS存储库URL(您需要授权)</li></ul><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="d295" class="nl ko iq nh b gy nm nn l no np">git remote add origin https://github.com/gapon2401/my-react-typescript-package.git</span></pre><ul class=""><li id="3350" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">SSH存储库URL(您需要配置与ssh 连接的<a class="ae mg" href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" rel="noopener ugc nofollow" target="_blank"/></li></ul><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="f87c" class="nl ko iq nh b gy nm nn l no np">git remote add origin git@github.com:gapon2401/my-react-typescript-package.git</span></pre><p id="4622" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我使用了第二种解决方案。</p><h1 id="b9e9" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第九步。发布到NPM </strong></h1><ul class=""><li id="f625" class="mo mp iq lh b li lj ll lm lo nc ls nd lw ne ma nf mu mv mw bi translated">选择包名</li></ul><p id="001f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们必须检查我们的包的名称是否可以自由使用。进入https://www.npmjs.com/网站<a class="ae mg" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">并使用搜索工具。</a></p><p id="0b72" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">您可以在<code class="fe nq nr ns nh b">package.json</code>中找到并更改项目的默认名称:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/464706ece0136be5c30acc21b868680a.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*ArUS5eFO7TiTv6pS7Figvg.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">包名</p></figure><p id="a0e5" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我的情况是<code class="fe nq nr ns nh b">my-react-typescript-package</code>。目前还没有这样的套餐。</p><p id="2903" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我更喜欢这样检查:直接把名字插入链接，如下图:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="ba86" class="nl ko iq nh b gy nm nn l no np">https://www.npmjs.com/package/&lt;Your package name&gt;</span></pre><p id="a4ea" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">不要用<code class="fe nq nr ns nh b">&lt;Your package name&gt;</code>，用你的项目名。</p><p id="654e" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我得到以下网址:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c998" class="nl ko iq nh b gy nm nn l no np"><a class="ae mg" href="https://www.npmjs.com/package/my-react-typescript-package" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/my-react-typescript-package</a></span></pre><p id="e918" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">如果名字是免费的，你会看到一个404页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/952e9a1787e7f48a8808a647ab2c3753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*E02Cvaa37971TbP_i-rzLQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">包名是免费的</p></figure><ul class=""><li id="756b" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">注册/登录NPM</li></ul><p id="0413" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">为了发布项目，您需要在<a class="ae mg" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/</a>获得授权。</p><p id="95d0" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">如果你还没有账户，去注册<a class="ae mg" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/signup</a>或者使用命令行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="f377" class="nl ko iq nh b gy nm nn l no np">npm adduser</span></pre><p id="a9d2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">您将被要求输入<code class="fe nq nr ns nh b">username</code>、<code class="fe nq nr ns nh b">password</code>和<code class="fe nq nr ns nh b">email</code>。</p><p id="855b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">如果您已经有一个帐户，请运行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="8938" class="nl ko iq nh b gy nm nn l no np">npm login</span></pre><p id="0bc2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">并完成授权。</p><ul class=""><li id="5011" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated">出版</li></ul><p id="319b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在发布之前，我建议您检查一下，您的包中只有必要的文件，没有错误，并且所有内容的格式都正确。为此，您可以运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="378d" class="nl ko iq nh b gy nm nn l no np">npm publish --dry-run</span></pre><p id="39f8" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">包不会发布，放心。</p><p id="83bc" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">您将看到“神奇脚本”<code class="fe nq nr ns nh b">prepublishOnly</code>将被调用，测试和代码格式化将运行。</p><p id="11ed" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">然后，您将获得所有文件的列表，这些文件将包含在项目中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/b80c6d35bcf513bcffaf9fdea02f56a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*W2p_ex9oVW8CMgnMoEnnyQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">所有包文件的列表</p></figure><p id="7b3a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">Tarball Contents</code>中，我们有在<code class="fe nq nr ns nh b">package.json</code>中指定的文件和文件夹:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="3d93" class="nl ko iq nh b gy nm nn l no np">"files": [<br/>   "dist",<br/>   "LICENSE",<br/>   "README.md"<br/> ],</span></pre><p id="6df2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">一切都好；让我们发布这个包！</p><p id="f561" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="bbab" class="nl ko iq nh b gy nm nn l no np">npm publish</span></pre><p id="b43b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">当我运行这个命令时，我总是担心。</p><p id="8d03" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我附上命令调用的完整结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/6bb96d83c4e8176cdb9148efb9e798c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*GWkaNAHWok9uWy9NrNpphw.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">国家预防机制结果公布</p></figure><p id="0304" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，我可以恭喜你了！包已发布；它是公共的，任何人都可以使用它！这并不难。</p><p id="776c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">让我们看看NPM上的包裹。</p><p id="6b78" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">打开我们之前打开的链接。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="7261" class="nl ko iq nh b gy nm nn l no np">https://www.npmjs.com/package/&lt;Your package name&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi op"><img src="../Images/13faacaca07c3acac579c22ffe729440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h-VhOjLVxi9uFXbbtMzRpQ.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">包装的NPM页</p></figure><p id="c156" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">看起来棒极了！</p><h1 id="38de" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第十步。创建示例文件夹</strong></h1><p id="53df" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们继续把我们的包装做得越来越好。在这一步中，我们将创建一个示例文件夹，在其中我们将展示如何使用我们的包。在这个文件夹中，您可以快速启动服务器并使用代码。<br/>为了快速启动应用程序，我们将使用<a class="ae mg" href="https://parceljs.org/" rel="noopener ugc nofollow" target="_blank">https://parceljs.org/</a>。</p><p id="891a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建一个文件夹<code class="fe nq nr ns nh b">example</code>。</p><p id="159b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在该文件夹中，创建一个空的<code class="fe nq nr ns nh b">src</code>文件夹和文件:</p><ul class=""><li id="7268" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated"><code class="fe nq nr ns nh b">.gitignore</code>:</li></ul><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="449e" class="nl ko iq nh b gy nm nn l no np">node_modules<br/>yarn.lock<br/>.parcel-cache<br/>dist<br/>yarn-error.log</span></pre><ul class=""><li id="8895" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated"><code class="fe nq nr ns nh b">package.json</code>:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">示例/package.json</p></figure><ul class=""><li id="ce83" class="mo mp iq lh b li mb ll mc lo mq ls mr lw ms ma nf mu mv mw bi translated"><code class="fe nq nr ns nh b">README.md</code>:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">example/README.md</p></figure><p id="7e33" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，注意了！在命令行中，从项目的根目录移动到<code class="fe nq nr ns nh b">example</code>文件夹:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="a1f5" class="nl ko iq nh b gy nm nn l no np">cd example</span></pre><p id="e84f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">然后运行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="132f" class="nl ko iq nh b gy nm nn l no np">yarn add -D parcel my-react-typescript-package react react-dom @types/react-dom @types/react</span></pre><p id="43f8" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">src</code>文件夹中，创建文件<code class="fe nq nr ns nh b">index.html</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">example/src/index.html</p></figure><p id="91ff" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，我们需要导入我们的包并创建一个如何使用它的例子。</p><p id="c59c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">src</code>文件夹中，创建<code class="fe nq nr ns nh b">index.tsx</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">example/src/index.tsx</p></figure><p id="d0ed" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">该运行服务器了！使用命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="73e4" class="nl ko iq nh b gy nm nn l no np">yarn start</span></pre><p id="2f0a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">成功启动服务器后，您将收到以下消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/8b569724f805d88d0c52a1206414c339.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*eJ5Y9RyNzmzWDXW6NKXTNw.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">包裹服务器已启动</p></figure><p id="c258" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">打开链接<code class="fe nq nr ns nh b"><a class="ae mg" href="http://localhost:1234" rel="noopener ugc nofollow" target="_blank">http://localhost:1234</a></code>观看示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/1c921a3df0ecd4866eefe838e81b164c.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*bQN85v5WpnWvm_eW--1ZaQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">包装使用示例</p></figure><p id="7d45" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">比较所有安装和服务器运行后的示例文件夹结构。它应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/fd1ee5e0c62922a5bc132e2fb1a57600.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*EcBPHw6yjJI-r13ZTtIPCQ.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">示例文件夹结构</p></figure><h1 id="b8a5" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第十一步。设置自动构建</strong></h1><p id="06a6" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们进入自动化构建。当你不得不在每一个版本中向git和npm推送改变时，这是相当不方便的。我们将通过GitHub动作来自动化这个过程。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ot"><img src="../Images/4fa2ecafdf4237a1a2a6f41fb7d4b2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RI9j0OJHJ_-WTXYNPliTQg.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">Github操作</p></figure><p id="064b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在项目结构的根目录下创建文件夹<code class="fe nq nr ns nh b">.github</code>。</p><p id="e471" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在里面创建文件夹<code class="fe nq nr ns nh b">workflows</code>。</p><p id="e550" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">workflows</code>里面创建文件<code class="fe nq nr ns nh b">publish.yml</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated"><code class="fe nq nr ns nh b">.github/workflows/publish.yml</code></p></figure><p id="94f3" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">文件中的要点已被注释。</p><p id="68fc" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">当我们将它发布到GitHub时，我们的包将被自动构建并推送到NPM。</p><p id="8850" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我要你看下面一行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b9f8" class="nl ko iq nh b gy nm nn l no np"><em class="ou"># We need this to our NPM account<br/></em>NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}</span></pre><p id="56bf" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">这是我们连接GitHub和NPM的方式。</p><p id="db6b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在浏览器中，在<a class="ae mg" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/</a>上打开您的帐户，然后转到带有代币的页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi oc"><img src="../Images/a48a9c521a2441a85464967624b772de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvOLo9KJ91UmbJJlEe66xw.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">NPM接入令牌链接</p></figure><p id="22f7" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">生成新令牌:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ov"><img src="../Images/e4b69e6172b80bf6366ed400ed696c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jMpgfkR6K3GWh5O4bYGALA.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">生成新的NPM令牌</p></figure><p id="61be" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">系统将提示您输入其名称并选择类型。<code class="fe nq nr ns nh b">Automation</code>适合github-actions:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ow"><img src="../Images/c35f4d4a6f8fdcae99ea9d91f9d3a7ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eze8nE0Ymx93TINy3szYAQ.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">新访问令牌</p></figure><p id="816c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">复制您的令牌并打开github repo。</p><p id="dfd0" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">转到选项卡<code class="fe nq nr ns nh b">Settings</code>，打开<code class="fe nq nr ns nh b">Secrets — Actions</code>，并创建一个新的存储库机密变量。给它命名为<code class="fe nq nr ns nh b">NPM_TOKEN</code>,并将来自NPM的令牌值粘贴进去:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ox"><img src="../Images/14d9dffe4549836d8ee06130354d8018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zel5lYUu-58W1zt7-UaBYw.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">创建新的存储库机密变量</p></figure><p id="94f2" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">干得好！现在剩下的就是创建项目的新版本，并将其推送到GitHub。</p><p id="de0b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在提交任何更改之前，不要忘记运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="218d" class="nl ko iq nh b gy nm nn l no np">yarn prepublishOnly</span></pre><p id="b4ab" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">只是为了确保您的代码将是漂亮和干净的。</p><p id="902c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">推送项目后，转到Actions选项卡，在这里您会看到GitHub已经检测到您有工作流操作。但是它还没有推出任何东西，因为我们还没有发布。)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi oy"><img src="../Images/029b812e3dce524ac986b43ac1838550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZV7_FyrSYrmvmA9kWQA_Fg.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">Github操作工作流程</p></figure><h1 id="a5ea" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第十二步。演示页面</strong></h1><p id="6462" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们已经有了一个使用我们的包的例子的文件夹，但我们想创建一个单独的页面，以便用户可以快速地看到运行中的包，而不必克隆整个项目。让我们继续这一页吧！</p><p id="a6a6" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们将使用github-pages来创建演示。</p><p id="70c4" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建新的git分支:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="e77e" class="nl ko iq nh b gy nm nn l no np">git checkout -b gh-pages</span></pre><p id="942f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在删除项目中的所有文件！</p><p id="c787" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">不要担心，所有以前的文件将安全地保存在另一个<code class="fe nq nr ns nh b">master</code>分支中。分支<code class="fe nq nr ns nh b">gh-pages</code>将仅用于演示。所以我们需要删除所有文件。快点，删了一切！</p><p id="e0f9" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">然后在命令行中运行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="82b0" class="nl ko iq nh b gy nm nn l no np">npm init -y</span></pre><p id="9d76" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">该命令将创建文件<code class="fe nq nr ns nh b">package.json</code>。这次就不详细配置了。</p><p id="8cca" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">对于演示页面，我建议使用我们熟悉的<code class="fe nq nr ns nh b">parcel</code>(<a class="ae mg" href="#38de" rel="noopener ugc nofollow">步骤10 </a>)</p><p id="c7be" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">运行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="00bf" class="nl ko iq nh b gy nm nn l no np">yarn add -D parcel my-react-typescript-package react react-dom @types/react-dom @types/react typescript</span></pre><p id="3e9c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建文件<code class="fe nq nr ns nh b">.gitignore</code>:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="7077" class="nl ko iq nh b gy nm nn l no np">node_modules<br/>yarn.lock<br/>.parcel-cache<br/>dist<br/>yarn-error.log</span></pre><p id="6748" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建包含以下内容的文件<code class="fe nq nr ns nh b">tsconfig.json</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">tsconfig.json</p></figure><p id="9d6d" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">按照<a class="ae mg" href="#0e1f" rel="noopener ugc nofollow">步骤4 </a>配置Eslint。</p><p id="4b20" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创建空文件夹<code class="fe nq nr ns nh b">src</code>。在其中，创建包含以下内容的文件<code class="fe nq nr ns nh b">index.html</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">src/index.html</p></figure><p id="3161" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">创造<code class="fe nq nr ns nh b">index.tsx</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">src/index.tsx</p></figure><p id="833b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">添加到<code class="fe nq nr ns nh b">scripts</code>部分内的<code class="fe nq nr ns nh b">package.json</code>:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="d5a8" class="nl ko iq nh b gy nm nn l no np">"start": "parcel src/index.html",<br/>"build": "parcel build src/index.html --dist-dir docs --public-url .",</span></pre><p id="21b3" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">看看我的<code class="fe nq nr ns nh b">package.json</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">package.json</p></figure><p id="7e7c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">运行服务器以确保一切正常:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="2316" class="nl ko iq nh b gy nm nn l no np">yarn start </span></pre><p id="c4b5" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，使用以下命令运行代码来检查错误:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="5649" class="nl ko iq nh b gy nm nn l no np">yarn lint</span></pre><p id="0ffd" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">没有错误！太好了！是时候构建页面了。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="9bf1" class="nl ko iq nh b gy nm nn l no np">yarn build</span></pre><p id="d5dd" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">您应该看到文件夹<code class="fe nq nr ns nh b">docs</code>中包含了演示项目的所有文件。</p><p id="cf57" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">下面是分支<code class="fe nq nr ns nh b">gh-pages</code>的结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/f49ca54b19a119eebc11a6448cded98d.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*pOPI6e-ocPnTLMzj2RNdcg.jpeg"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">gh-pages分部的结构</p></figure><p id="cef1" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，让我们将所有的更改推送到git。运行:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="2b00" class="nl ko iq nh b gy nm nn l no np">git add .<br/>git commit -m "Initial pages commit"<br/>git push -u origin gh-pages</span></pre><p id="a844" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">打开你的GitHub库，进入<code class="fe nq nr ns nh b">Settings — Pages</code>。在<code class="fe nq nr ns nh b">source</code>中选择<code class="fe nq nr ns nh b">/docs</code>并按下<code class="fe nq nr ns nh b">Save:</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pa"><img src="../Images/ea24b0f5388c00dbe86e43227e2ee517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EnDVUWbn1b8WlNYWEQUFzw.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">Github页面</p></figure><p id="c04c" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">等待大约3-5分钟，您的网站将在指定的URL上可用，该URL显示在您的页面上:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pb"><img src="../Images/ab2bc9a2aab4f9c55754cf1a1c21dc6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eb-mr3oMCPyy50AHWGKdBA.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">链接到演示页面</p></figure><p id="cc95" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们已经完成了演示页面。如你所见，你可以随心所欲地定制它，创建任何复杂程度的网页或网站。</p><p id="9e4a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">结果如下:<a class="ae mg" href="https://gapon2401.github.io/my-react-typescript-package/" rel="noopener ugc nofollow" target="_blank">https://gapon2401.github.io/my-react-typescript-package/</a></p><h1 id="8891" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第十三步。README.md文件和shields.io </strong></h1><p id="8d3c" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们已经完成了代码，我们可以转到包的描述文件了。</p><p id="b200" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">切换到git中的<code class="fe nq nr ns nh b">master</code>分支，打开<code class="fe nq nr ns nh b">README.md</code>。</p><p id="7f97" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">用以下代码替换内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">README.md</p></figure><p id="6e05" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">对于描述文件，我们使用<a class="ae mg" href="https://github.com/adam-p/markdown-here/wiki/Markdown-Here-Cheatsheet" rel="noopener ugc nofollow" target="_blank">降价</a>。</p><p id="1cc8" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">README.md</code>中，我添加了包的简短描述、演示页面的链接和用法部分。</p><p id="f0a4" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在自述文件的开头，我有一些可爱的小图标。这是https://shields.io/。有它们很方便。我只添加了几个作为例子，你可以想用多少就用多少。</p><p id="9c44" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">将 <code class="fe nq nr ns nh b">shields.io</code>添加到您的GitHub应用程序中。</p><p id="7b5f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">看一下文件的结尾；我用图像和链接创建了变量。Markdown允许我们制作这样的变量，所以描述文件看起来更准确。不要忘记更改repo的路径和包名。</p><p id="3997" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">在<code class="fe nq nr ns nh b">package.json</code>中更改版本，提交并将文件推送到存储库。什么都自己做。我们已经在前面的步骤中做到了。</p><h1 id="2a4f" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated"><strong class="ak">第14步。发布</strong></h1><p id="6ed1" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是最后一步。它会很短。</p><p id="106a" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我们已经完成了所有计划！现在我们可以在GitHub上发布一个官方版本，并检查自动化构建是如何工作的。</p><p id="c00f" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">进入存储库主页，点击<code class="fe nq nr ns nh b">Create a new release</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pc"><img src="../Images/85b70da179ba07064bf92d859a1fc6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnSnaotGzIQ9dHh2nv2Jjw.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated"><code class="fe nq nr ns nh b">Create a new release</code></p></figure><p id="5c8d" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">将您的当前版本指定为标签。它将在发布时自动创建。打印发布标题和描述，点击<code class="fe nq nr ns nh b">Publish release</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pd"><img src="../Images/b7aa51804e3f8e08afb95029d3f18c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HAesu2BJiJ7Kn84dvwRIXQ.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">发布版本</p></figure><p id="3152" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">现在，打开标签<code class="fe nq nr ns nh b">Actions</code>，确保你的构建成功。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pe"><img src="../Images/f05e05a3d36fa76eab7064d989c8a47f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BOXYQW5XvmJJYgmP3bXbLg.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">基于github动作的自动化构建</p></figure><p id="0a94" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">让我们检查一下包是否在NPM更新了。</p><p id="9b58" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">打开包链接:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="260c" class="nl ko iq nh b gy nm nn l no np">https://www.npmjs.com/package/&lt;Your package name&gt;</span></pre><p id="e56d" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">我会打开我的:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="88ed" class="nl ko iq nh b gy nm nn l no np"><a class="ae mg" href="https://www.npmjs.com/package/my-react-typescript-package" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/my-react-typescript-package</a></span></pre><p id="7ce5" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">您应该会看到带有新描述的新版本:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi pf"><img src="../Images/7a501901a488df2cf7c97c4733b7e1b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tlch6DDEbNisynWLl2Qkgw.jpeg"/></div></div><p class="nv nw gj gh gi nx ny bd b be z dk translated">NPM更新包</p></figure><p id="304d" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">这是一次长途旅行，但我希望非常有用。我试图描述我第一次发布我的包时遇到的所有困难，并一条一条地收集这些信息。</p><p id="4f0b" class="pw-post-body-paragraph lf lg iq lh b li mb jr lk ll mc ju ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">感谢您的阅读！❤</p></div></div>    
</body>
</html>