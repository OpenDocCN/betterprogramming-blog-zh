<html>
<head>
<title>There Just Isn’t Enough Time (and Why Writing “Dirty Code” is a Good Start)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间就是不够(为什么写“脏代码”是一个好的开始)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/there-just-isnt-enough-time-f7bb069411f?source=collection_archive---------16-----------------------#2022-08-24">https://betterprogramming.pub/there-just-isnt-enough-time-f7bb069411f?source=collection_archive---------16-----------------------#2022-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="140c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">但前提是你要进行第二轮谈判，并把谈判带到一个可以接受的水平，这样其他人才会愿意合作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/23dac43a96b5fed6dd5a39ca747b1182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-G9wxh7WNBClcTn0YTsvw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@loic" rel="noopener ugc nofollow" target="_blank"> Djim Loic </a>在<a class="ae kv" href="https://unsplash.com/photos/ft0-Xu4nTvA" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="5712" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">时间是有限的资源，我们必须明智地选择它。当构建软件产品时，没有足够的空间来分析所有的可能性，并确保我们不断做出正确的决策。</p><p id="c1b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当时间有限时，我们的大脑自然倾向于使用以下策略:</p><ul class=""><li id="706f" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">要做决定，我们需要对自己的能力有信心。否则，我们不会采取行动。</li><li id="e33c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">为了保持专注，我们更喜欢眼前的事情，而不是远处的事情。</li><li id="359f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">为了避免错误，我们倾向于看起来简单的选项，而不是复杂的选项。</li></ul><p id="be91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些策略可能并不总是产生最佳的结果，但从总体上看，它们被证明对物种的生存是成功的。由于我们的环境已经从自然转变为城市生活，许多过去成功的思维模式已经变成了当今世界的障碍。</p><p id="1303" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">行为科学的科学家将这些“思维错误”归类为200多种人类偏见。例如:</p><blockquote class="mg"><p id="bac0" class="mh mi iq bd mj mk ml mm mn mo mp lr dk translated">可用性偏见——我们的判断很大程度上受到更容易想到的东西的影响</p></blockquote><p id="e453" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">当我们深入了解软件开发时，我们现在可以解释为什么没有经验的人最终会得到杂乱无章的代码。只是后来，有了足够的经验和自我反省，我才设法写出可读的代码。</p><p id="4f15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">意识到我们的局限性和偏见是软件开发中更好合作的第一步。</p><h1 id="62d4" class="mv mw iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated">步骤1:为什么编写“脏代码”是一个好的起点</h1><p id="1030" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">想象一下，在传统的工作环境中，作为软件开发团队的一员，增加一点时间压力，并混合一些底层的技术复杂性。</p><p id="bdbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请考虑函数<code class="fe ns nt nu nv b">GetComputer()</code>的以下实现。</p><p id="d5fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码很难阅读，扩展这种功能也很痛苦。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="2c08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只是记下了想到的代码。跟随我们的思路是一种典型的思维捷径，有助于我们保持专注。代码并不完美，但它是有效的，我们很高兴我们已经准备好了所有的技术细节。</p><p id="aed2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是坏软件吗？看情况。如果你必须在几个小时内演示一个概念证明才能进入下一轮融资，这段代码可能非常有价值。</p><blockquote class="mg"><p id="ae5b" class="mh mi iq bd mj mk ml mm mn mo mp lr dk translated">“让它工作，让它更好，让它更快。”—肯特·贝克</p></blockquote><p id="3d46" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">在第一次迭代中编写“脏代码”并没有什么不好。这会让你更容易专注于此时最重要的一个方面:“让它发挥作用。”</p><p id="2dfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是现在我们已经实现了这个功能，我们应该把重点放在使它更加适应未来，并把这个“肮脏”实现的风险降到最低。</p><h2 id="fb2b" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">发生了什么事</strong></h2><ul class=""><li id="37dc" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">我们记下了想到的代码</li><li id="1c0e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">我们只是跟着我们的思路走</li></ul><h2 id="541a" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">好处</strong></h2><ul class=""><li id="63bd" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">让我们更容易专注于“让它发挥作用”</li></ul><h2 id="7863" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">弊端</strong></h2><ul class=""><li id="2350" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">难以阅读</li><li id="4290" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">隐藏的陷阱，一些代码路径没有被覆盖的高风险</li><li id="690b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">其他人更改代码的动力不足</li></ul><h1 id="ccbc" class="mv mw iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated">步骤2:应用干净代码原则——关注点分离(SoC)</h1><p id="0fd9" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">把我们想到的东西写下来不会产生一个好的软件结构，而且除了作者之外，每个人都很难理解。</p><h2 id="2ab7" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">干净代码原则:关注点分离(SoC) </strong></h2><p id="9041" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">将一个计算机程序分成几个不同的部分，每个部分处理一个单独的问题。</p><blockquote class="mg"><p id="a2e4" class="mh mi iq bd mj mk ml mm mn mo mp lr dk translated">“通过一次专注于一个方面来整理你的想法，建立界限，并将系统组织成有意义的部分。”Edsger W. Dijkstra (1974)论科学思想的作用。</p></blockquote><p id="0ab4" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">将一个问题的不同方面分开，可以让我们一次解决一个问题，并简化推理过程。</p><p id="05e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">隔离方面还可以让工作推迟到以后，并允许协作发生。</p><p id="214d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">把注意力集中在某些方面并不意味着忽略其他方面，只是从这个方面来看，其他方面无关紧要。这是一个和多个轨道的思想同时存在。</p><p id="1ec8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用SoC原则的见解进行重构会导致以下结构。是否更容易阅读？添加功能会让你感觉更舒服吗？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="37b6" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">变化</strong></h2><ul class=""><li id="3169" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">分解成功能部分(改进结构)</li><li id="8618" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">守卫，搜索类型，获取计算机，返回值</li></ul><h2 id="32db" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">好处</strong></h2><ul class=""><li id="7670" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">更容易阅读</li><li id="add5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更有信心进行后续更改</li></ul><h1 id="cc3d" class="mv mw iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated">第三步:改善协作</h1><p id="90b8" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">让我们更容易理解，更容易合作。代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="ebe2" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">变更</strong></h2><ul class=""><li id="910b" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">将魔术字符串提取到枚举类型中(例如，<code class="fe ns nt nu nv b">SearchType</code>)</li><li id="0efd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">将块提取到单独的函数中(例如<code class="fe ns nt nu nv b">GetSearchType()</code>)</li><li id="a949" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">移除注释(让代码用清晰的语言表达)</li></ul><h2 id="ec93" class="ny mw iq bd mx nz oa dn nb ob oc dp nf lf od oe nh lj of og nj ln oh oi nl oj bi translated"><strong class="ak">好处</strong></h2><ul class=""><li id="4202" class="ls lt iq ky b kz nn lc no lf ok lj ol ln om lr lx ly lz ma bi translated">更简单的单元测试</li><li id="afe7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更简单的重构</li><li id="8f2b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更容易重用代码片段(复制-粘贴)</li></ul><p id="4700" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它仍然不完美，如果我们有机会研究周围的代码，我们肯定会看到进一步改进的新机会。</p><h1 id="d158" class="mv mw iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated">结论</h1><p id="281f" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">从“脏代码”开始是可以的，但前提是你要进行第二轮测试，并把它带到一个可以接受的水平，这样其他人就愿意合作了。</p><p id="5155" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">意识到我们根深蒂固的思维模式和人类偏见有助于我们接受编写软件是一个非线性的过程。使用渐进步骤更接近我们的人性。</p><p id="2e30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码快乐！</p></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><h1 id="a9c0" class="mv mw iq bd mx my ou na nb nc ov ne nf jw ow jx nh jz ox ka nj kc oy kd nl nm bi translated">参考</h1><p id="96f1" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">[1]:巴斯特·本森(2016年9月1日)。认知偏见备忘单<a class="ae kv" href="https://betterhumans.pub/cognitive-bias-cheat-sheet-55a472476b18" rel="noopener ugc nofollow" target="_blank">https://better humans . pub/cognitive-bias-cheat-sheet-35a 472476 b18</a></p><p id="d147" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]: Edsger W. Dijkstra (1974)关于计算的文章选集:个人观点<a class="ae kv" href="https://www.goodreads.com/work/quotes/2250685-selected-writings-on-computing-a-personal-perspective-texts-and-monogr" rel="noopener ugc nofollow" target="_blank">https://www . goodreads . com/work/quotes/2250685-Selected-Writings-on-Computing-A-Personal-Personal-Perspective-texts-and-monogr</a></p></div></div>    
</body>
</html>