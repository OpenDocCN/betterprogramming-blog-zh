# 深入探究 Linux 权限

> 原文：<https://betterprogramming.pub/a-deep-dive-into-linux-permissions-6e5a5a640160>

## 了解 Linux 权限模型及其对系统安全性的影响

![](img/4bfd766ad1453e666275a67437f04726.png)

丹·尼尔森在 Unsplash[拍摄的照片](https://unsplash.com?utm_source=medium&utm_medium=referral)

欢迎来到 Linux 安全系列！在本系列中，我将探讨 Linux 安全性的基础知识以及攻击者如何攻击 Linux 机器。

在我们深入研究 Linux 系统安全性之前，理解 Linux 机器的权限模型是非常重要的。理解如何管理 Linux 系统上的权限将有助于理解利用权限系统的攻击，就像大多数权限提升技术一样。让我们开始吧。

# Linux 文件权限

Linux 继承了 Unix 的文件所有权和权限模型。系统上的每个文件和文件夹都有一组*权限*，指定谁被允许对该特定文件做什么。

权限有三种:*读*、*写*、*执行*。对文件的*读取*权限允许用户读取文件的内容。*写*权限允许用户修改或删除文件。并且*执行*许可允许用户将文件作为脚本或可执行文件运行。

您可以在目录中使用`ls -l`命令查看文件或目录的权限。您应该会看到这样一行。

```
-rwxrwxrwx
drwxrwxrwx
```

第一个字符指示该项是文件还是目录。破折号表示该项是一个文件，而 *d* 表示它是一个目录。接下来的三个字符是文件所有者的权限。所有者通常是创建文件并对其拥有最大控制权的用户。 *R* 表示*读*， *w* 表示*写*， *X* 表示*执行*。破折号表示没有该权限。让我们看一个例子。在这里，所有者可以读取、写入和执行文件。

```
-rwxr--r--
```

并且在 Linux 中，用户被分类到用户组*中*，这些组经常共享文件权限。接下来的三个字符是所有者组的权限。最后三个是其他人的权限。该文件的权限表明每个人都可以读取该文件，但只有所有者可以写入或执行该文件。

您可以使用`chmod`命令设置文件权限。在该命令中，使用字符 *u* 、 *g* 和 *o* 来表示*所有者用户*、*所有者组*和*其他*。例如，要为文件的所有者组添加执行权限，可以使用以下命令:

```
chmod g+x filepath
```

要为每个人设置执行权限，您可以使用以下命令:

```
chmod +x filepath
```

另一方面，当您想要删除权限时，可以将加号替换为减号。例如，该命令将删除所有人的执行权限。

```
chmod -x filepath
```

# 特殊许可模式

对于文件的权限，您还可以做一些特殊的事情。

您可以做的第一件事是设置 setUID 或 SUID 位。当`SUID`位被置位时，文件将总是以拥有该文件的用户身份运行，而不是以启动该程序的用户身份运行。例如，如果一个可执行文件归 root 所有，那么该文件将始终以 root 用户身份运行，而不管是谁开始执行的。如果在所有者权限中有一个 *s* 字符，而不是一个 *x* 或一个破折号，您就可以知道一个文件是否有 SUID 权限。

```
-rwsrwxrwx
```

SUID 钻头有许多常见的使用案例。例如，由于`ping`命令需要以 root 权限执行，如果你想让普通用户使用`ping`，你需要为`ping`可执行文件设置 SUID 位。也可以使用`chmod`命令设置 SUID 位。此命令将设置文件的 SUID 位。

```
chmod u+s filepath
```

SetGID，或 SGID，工作类似于 SUID。当在文件上设置了 setGID 位时，所有用户都可以使用所有者组的权限执行该文件。如果在目录上设置了 SGID，则父目录的所有者组中的所有用户都可以访问在该目录中创建的所有文件。如果在所有者组的权限中有一个 *s* 字符而不是一个 *x* 或一个破折号，您就可以判断一个文件或目录是否有 SGID 权限。

```
-rwxrwsrwx
```

也可以使用`chmod`设置 SGID 位。此命令将设置文件的 SGID 位。

```
chmod g+s filepath
```

在文件权限中还有一个叫做*粘滞位*的东西。如果在常规文件上设置粘滞位，它会使程序的后续执行更快。然而，sticky 位更常用于目录。这意味着该目录中的文件或目录只能由文件或目录的所有者或超级用户移动或删除。这通常用于临时目录(`/tmp`)，用于存储个人用户创建的临时文件。您可以通过查看权限字符串的最后一个字符中是否有 *t* 字符而不是 *x* 或破折号来判断文件或目录是否设置了粘性位。

```
-rwxrwxrwt
```

您可以使用这个命令将粘性位添加到文件或目录中。

```
chmod +t filepath
```

我希望这能帮助你更清楚地理解 Linux 权限是如何管理的。下一次，我们将深入探讨一些权限提升技术，这些技术允许攻击者在没有权限的情况下访问或执行文件。下次见！