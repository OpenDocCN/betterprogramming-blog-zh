<html>
<head>
<title>A Simple Drag Dismiss on Presented ViewController Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个简单的视图控制器教程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-drag-dismiss-on-presented-view-controller-tutorial-5f2f44f86f7b?source=collection_archive---------4-----------------------#2019-08-29">https://betterprogramming.pub/simple-drag-dismiss-on-presented-view-controller-tutorial-5f2f44f86f7b?source=collection_archive---------4-----------------------#2019-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8fda" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当用户拖动手指时关闭ViewController</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/38158fa36e3f913282b2446a5c344e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0mKtI0iwFV4eoa5b9gR7qQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><p id="8b0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我目前正在开发一个健身应用程序，它要求我通过向下拖动视图控制器来关闭视图控制器。大多数在线解决方案使这项任务过于复杂。下面是我使用<strong class="kx ir"> PanGestureRecognizer </strong>、<strong class="kx ir">cgaffinitransform</strong>和<strong class="kx ir"> UIView的简单解决方案。动画</strong>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lr ls l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">解决方案的演示</p></figure><p id="7bc7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">理论上，您应该能够复制和粘贴代码，但是我还会在代码片段下面包含详细的解释。</p><p id="d6ed" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将全部发生在您想要实现该解决方案的ViewController中。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="d74e" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">1)将addGestureRecognizer添加到视图</h1><p id="535a" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">我们将首先向视图控制器的视图添加一个PanGestureRecognizer。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx ls l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在视图控制器中添加手势识别器</p></figure><p id="2cfc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">addGestureRecognizer将接受UIPanGestureRecognizer的一个参数，目标是<strong class="kx ir"> <em class="my"> self </em> </strong>和action<strong class="kx ir"><em class="my"># selector(handleDimiss)。</em>T13】</strong></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="2166" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">2)创建HandleDismiss函数</h1><p id="8b69" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">我们现在将创建<strong class="kx ir"> <em class="my"> handleDimiss </em> </strong>函数作为Objective-C函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx ls l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建一个objc handleDismiss函数</p></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="20d8" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">3)使用开关盒处理发送器</h1><p id="fec0" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">我们创建了handleDismiss函数来接受UIPanGestureRecognizer的参数。这将允许我们跟踪用户平移的Y位置。我们将使用switch语句处理用户pan的已更改和已结束状态。</p><h2 id="3ace" class="mz mb iq bd mc na nb dn mg nc nd dp mk le ne nf mm li ng nh mo lm ni nj mq nk bi translated">案例:。已更改:</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx ls l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建了变量、切换大小写和函数来处理翻译</p></figure><p id="09a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们创建了变量<strong class="kx ir"><em class="my">viewtranaltion</em></strong>，这将允许我们跟踪平移手势的当前位置。</p><p id="073d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">内<em class="my">。改变</em> </strong>的情况，我们将<strong class="kx ir"><em class="my">view translation</em></strong>设置为用户的当前平移位置。有了新的平移，我们使用UIView.animate根据平移手势y-translation(使用CGAffineTransform)动画显示视图的新位置。</p><h2 id="ef3c" class="mz mb iq bd mc na nb dn mg nc nd dp mk le ne nf mm li ng nh mo lm ni nj mq nk bi translated">案例:。结束时间:</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx ls l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">完成代码以处理pan的更改和结束状态，从而确定视图控制器的解除</p></figure><p id="10ff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当用户完成平移时，<strong class="kx ir">、<em class="my">。</em>结束了</strong>案件现在正在处理剩下的工作。在其中，条件语句确定视图是被关闭还是使用。<strong class="kx ir"> <em class="my">身份</em> </strong>。</p><p id="a447" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是<a class="ae nl" href="https://github.com/ModernProgrammer/DragDismissDemo" rel="noopener ugc nofollow" target="_blank"> GitHub演示项目</a>。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="280e" class="mz mb iq bd mc na nb dn mg nc nd dp mk le ne nf mm li ng nh mo lm ni nj mq nk bi translated">小费</h2><p id="bc2b" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">在呈现ViewController时，将modalPresentationStyle设置为overCurrentContext以禁用黑色背景。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx ls l"/></div></figure></div></div>    
</body>
</html>