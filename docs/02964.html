<html>
<head>
<title>Are Early Returns Any Good?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提前回报有好处吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/are-early-returns-any-good-eed4b4d03866?source=collection_archive---------0-----------------------#2020-01-12">https://betterprogramming.pub/are-early-returns-any-good-eed4b4d03866?source=collection_archive---------0-----------------------#2020-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6953" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们应该用逻辑包装我们的代码，然后悄悄地失败，还是经常提前返回？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1409f82999f8a172e85643692447f585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cnqo-0q6vdgrWmWpb4ybrg.png"/></div></div></figure><p id="8b00" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用或不使用提前退货。两者都有道理。</p><p id="d217" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当谈到使用早期回报时，程序员往往有强烈的个人偏好。有些人从不使用它们，有些人却对此深信不疑。但是，除了您个人的编程风格之外，还有其他原因吗？</p><p id="335e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，我们将讨论为什么你可以考虑在你的代码中使用早期返回。</p><p id="f8a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还将讨论为什么一些程序员选择<em class="lq">而不是</em>使用早期回报。对于如何编写干净的代码，每个程序员都有自己的偏好和观点。</p><p id="7d4f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是在我们开始深入探讨早期回报的话题之前…</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="9282" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">提前回报到底是什么？</h1><p id="4e70" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">提前返回背后的思想是，编写在函数结束时返回预期正结果的函数。</p><p id="8b3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">函数中的其余代码应该在与函数的目的不一致的情况下尽快触发终止。</p><p id="cc5a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">早归顾名思义。这就是早期回报的样子:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="2b58" class="na lz it mw b gy nb nc l nd ne">function someFunction(someCondition) {<br/>    if (!someCondition) {<br/>        return;<br/>    }</span><span id="8944" class="na lz it mw b gy nf nc l nd ne">    // Do something<br/>}</span></pre><p id="0044" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是通常，在编程中，有多种方法可以解决一个问题。这两种解决方案都非常好，没有好坏之分。</p><p id="3a22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">提前返回的另一种方式可能是这样的:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="1e0a" class="na lz it mw b gy nb nc l nd ne">function someFunction(someCondition) {<br/>    if (someCondition) {<br/>        // Do something<br/>    }<br/>}</span></pre></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="c6ba" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">你为什么会考虑使用提前回报？</h1><p id="0930" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">你可以考虑使用早期返回的一个原因是它可以让你的代码看起来更扁平。如果您选择使用包装if语句的替代方法，那么就不需要额外的缩进。这使得代码更具可读性。</p><p id="805f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用早期回报的另一个理由是，它让你的差价更清晰。尤其是当您所做的更改会改变缩进时。如果你不喜欢提前返回的方法，你可能会得到一个巨大的差异，而它可能只是几行。</p><p id="e389" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我要为使用早期回报提出的最后一个论点是让程序员安心。通过使用早期返回，您首先得到无效的情况(bouncer模式)，接下来在那里放一个空行，然后您可以专注于函数的“真正的”主体。</p><p id="cf67" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">除此之外，当你不使用早期回报时，你只有一个出场点。这意味着你必须一直在脑子里追踪整个代码，直到函数结束。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="446f" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">为什么不呢？</h1><p id="e7cb" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">另一方面，有一些关于为什么你不应该使用早期回报的争论。我在Stack Overflow上读到过一个关于这一点的很棒的评论，几乎涵盖了为什么你会决定不提前返回的大部分原因:</p><blockquote class="ng nh ni"><p id="10d2" class="ku kv lq kw b kx ky ju kz la lb jx lc nj le lf lg nk li lj lk nl lm ln lo lp im bi translated">“一般来说，你希望在一个函数中有尽可能少的返回点。这样做的实际原因是，它简化了您对代码的阅读，因为您可以总是假设每个函数都将接受其参数，执行其逻辑，并返回其结果。</p><p id="ec00" class="ku kv lq kw b kx ky ju kz la lb jx lc nj le lf lg nk li lj lk nl lm ln lo lp im bi translated">在各种情况下输入额外的返回往往会使逻辑变得复杂，并且增加了阅读和完全搜索代码所需的时间。</p><p id="03f3" class="ku kv lq kw b kx ky ju kz la lb jx lc nj le lf lg nk li lj lk nl lm ln lo lp im bi translated">一旦你的代码进入维护阶段，那么当新程序员试图破译逻辑时，多次返回会对他们的生产力产生巨大的影响(当注释稀少和代码不清楚时，这尤其糟糕)。</p><p id="ed69" class="ku kv lq kw b kx ky ju kz la lb jx lc nj le lf lg nk li lj lk nl lm ln lo lp im bi translated">这个问题随着函数的长度成指数增长。"</p></blockquote><p id="b5e2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此评论归功于<a class="ae nm" href="https://stackoverflow.com/users/14788/mark-kegel" rel="noopener ugc nofollow" target="_blank">马克·凯格尔</a>。尽管这是十多年前<a class="ae nm" href="https://stackoverflow.com/a/355863" rel="noopener ugc nofollow" target="_blank">发布的</a>，我仍然认为如果你决定反对提前回报，它还是有意义的。</p><p id="e6e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在某些情况下，使用早期回报有些夸张。看一下下面的例子:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="cb3a" class="na lz it mw b gy nb nc l nd ne">function setAge(age) {<br/>    if (!age) {<br/>        return;<br/>    }<br/>    <br/>    this.age = age;<br/>}</span></pre><p id="437f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这里使用提前返回似乎不太合适。这对您的代码来说可能弊大于利，因为这样做要干净得多:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="cfec" class="na lz it mw b gy nb nc l nd ne">function setAge(age) {<br/>    if (age) {<br/>        this.age = age;<br/>    }<br/>}</span></pre></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="da11" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">现在轮到你了！</h1><p id="705c" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">既然我们已经到了这篇文章的结尾，是时候分享你对早期回报的想法了。由于代码风格是主观的，当谈到早期回报时，我对你的观点很感兴趣。</p><p id="c6d2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">谈到早期回报，你站在哪一边？你是那种喜欢早期回报的程序员吗，因为它能让你的代码保持扁平？或者你更喜欢在你的函数中有一个最大的回报？</p><p id="0739" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">来聊聊提前退货吧！</p></div></div>    
</body>
</html>