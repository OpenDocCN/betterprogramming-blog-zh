<html>
<head>
<title>Run An Ethereum Node on Debian on an External SSD (late 2019)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在外部SSD上运行Debian上的以太坊节点(2019年末)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/run-an-ethereum-node-on-linux-late-2019-b37a1d35800e?source=collection_archive---------5-----------------------#2019-11-04">https://betterprogramming.pub/run-an-ethereum-node-on-linux-late-2019-b37a1d35800e?source=collection_archive---------5-----------------------#2019-11-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="aee2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">快到2020年了，你应该运行自己的以太坊节点了</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/afe64c8ce6ff6d08c612a400799f1806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rQm8jb-m6vNm_QCQo6dWnA.png"/></div></div></figure><p id="4d25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">特别感谢</em><a class="ae lo" href="https://twitter.com/gregjeanmart" rel="noopener ugc nofollow" target="_blank"><em class="ln">Gregoire jean mart</em></a><em class="ln">撰写的</em> <a class="ae lo" href="https://kauri.io/article/9695fcca217f46feb355245275835fc0" rel="noopener ugc nofollow" target="_blank"> <em class="ln">教程</em> </a> <em class="ln">让我开始运营自己的node，并激发我写这篇文章。在他的许可下，大部分关于外部固态硬盘的指南都直接取自他的教程。谢谢！</em></p><p id="b508" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">节点跑者是以太坊众多无名英雄之一。尤其是现在要求已经大大降低，成为一名节点运行者比以往任何时候都更容易。您可以在首选机器的后台运行您的节点，而不会牺牲功能。我希望这个指南能够全面地指导您如何开始运行。</p><p id="84f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您不仅可以开始运行，还可以看到如何将MetaMask连接到您的节点，以及如何在Geth上运行Swarm节点。</p><p id="36e1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文假设您至少模糊地知道以太坊是什么，或者您已经阅读了许多解释以太坊的优秀文章中的一篇。它还假设您运行在Linux上(为基于Debian的发行版编写，在其他版本的Linux中，命令和位置可能会有所不同)。</p><p id="51f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>我们指的是运行一个完整的节点(在Etherean中)，意思不是一个轻客户端，也不是一个归档节点。在整篇文章中，我们称之为“运行一个节点”。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="b600" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">内容</h1><h2 id="fabd" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">什么是以太坊节点？</h2><h2 id="d22a" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">运行Geth节点的分步指南</h2><h2 id="c5b9" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">要求</h2><h2 id="ae55" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">更新:在我们开始之前，先说几句以太坊网格</h2><h2 id="93c5" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">安装和同步</h2><ul class=""><li id="a869" class="na nb iq kt b ku nc kx nd la ne le nf li ng lm nh ni nj nk bi translated">设置外部SSD</li><li id="1250" class="na nb iq kt b ku nl kx nm la nn le no li np lm nh ni nj nk bi translated">安装和设置Go</li><li id="b170" class="na nb iq kt b ku nl kx nm la nn le no li np lm nh ni nj nk bi translated">安装Geth</li><li id="431d" class="na nb iq kt b ku nl kx nm la nn le no li np lm nh ni nj nk bi translated">与Geth同步</li></ul><h2 id="dfbc" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">连接元掩码</h2><h2 id="7b16" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">运行一个群节点</h2></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="ac85" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">什么是以太坊节点？</h1><p id="279c" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated"><em class="ln">注意，这个解释有些简化。</em></p><p id="7927" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在以太坊区块链发生的事情的记录分布在全世界。这样，任何人都可以访问以太坊的整个历史，并对照其他记录验证他们正在访问的历史事实上是真实的。维护区块链历史的这些副本之一(并且每当有新块时更新它)被称为<em class="ln">运行节点</em>。该节点是您的历史副本。</p><p id="f315" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当任何人想要进行交易时，他们将此广播到一个节点。然后，该节点将该事务广播给网络上的其他节点。由于拥有自己的节点的这一点和其他好处，严肃的dApp项目倾向于拥有自己的节点。这也是挖掘器可以看到哪些事务正在队列中等待挖掘到下一个块的方式。类似地，新挖掘的块被传输到一个节点，然后在整个系统中传播。</p><p id="9c1f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你是一个正在运行的节点，这意味着你将有一份以太坊区块链的历史副本，并将与其他节点保持联系，了解网络上发生的事情。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="4da2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">运行Geth节点的分步指南</h1></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="3e4d" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">要求</h1><p id="0d68" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">首先，我们应该看看你的计算机是否有它所需要的。</p><p id="1bf0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在网上的理解是，如果你在电脑上运行，你的CPU应该不是问题。如果你运行的是树莓Pi之类的，我建议你看一下<a class="ae lo" href="https://kauri.io/article/9695fcca217f46feb355245275835fc0" rel="noopener ugc nofollow" target="_blank">这个</a>教程。</p><p id="a86b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">硬盘是更重要的考虑因素。虽然可以使用硬盘驱动器同步到链，但建议使用SSD。建议至少500GB。随着Geth的改进，我可以证明它不需要成为内部驱动器——通过USB连接的外部SSD就可以了。就统计数据而言，我看到你应该至少有50MB/s(写/读)。如果你想知道你的硬盘能做什么，Gregoire在他的<a class="ae lo" href="https://kauri.io/article/9695fcca217f46feb355245275835fc0" rel="noopener ugc nofollow" target="_blank">教程</a>中有关于基准测试你的系统的指导。</p><p id="b7c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(您可能想知道50MB/s够用多久。虽然以太坊区块链确实随着时间的推移有了很大的增长，但是随着Eth 2.0/Serenity的推出，每个节点需要存储的数据量应该会减少。截至2019年11月，我的节点大小大致为175 GB。即使增长速度加快，Eth 2.0和分片暂时不会到来，我相信500GB应该还能坚持一段时间。当然，得一整TB也没什么不好，尤其是你还想跑Swarm的时候。)</p><p id="f967" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">至于互联网连接，我猜你需要至少10兆比特/秒，以便不妨碍使用你的电脑做其他事情。如果您在笔记本电脑上运行，并且有时会有较慢的连接，我会假设您可以在较慢的区域暂停运行您的节点，并在超过10 Mbits/s时同步备份。</p><p id="e34e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，有点耐心。即使进行了所有的加速，初始同步也很容易需要三天以上的时间。好的一面是，我们将把它变成一个后台进程，所以它不需要你太多的关注。</p><h1 id="4f40" class="lw lx iq bd ly lz nt mb mc md nu mf mg jw nv jx mi jz nw ka mk kc nx kd mm mn bi translated">更新:在我们开始之前，先说几句以太坊网格</h1><p id="86d4" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">在我发现<a class="ae lo" href="https://grid.ethereum.org" rel="noopener ugc nofollow" target="_blank">以太坊网格、</a>和官方以太坊基金会项目之前，我写完了这篇文章，以制作一个易于使用的、用于运行节点的光滑GUI，而不仅仅是Geth——看起来他们已经预装了一堆不同的客户端。这是他们的GitHub的截图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/aa5bc4b797f64a537c21c290a142ccc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jT_gnt0ENG-Dd9lDvDZZfw.png"/></div></div></figure><p id="5168" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我没有接触过Grid，我不知道它的系统需求是什么，也不知道它的运行有多流畅。我无意冒犯，但我发现在区块链和世界其他地方一样，捷径有时需要更长的时间，所以您可能仍然想按照教程，让您的节点以“艰难的方式”运行。即使你打算使用Grid，你可能会发现下面关于设置外部SSD和安装Go的说明很有用。</p><p id="89d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从命令行运行Geth的另一个原因可能是附加一个群节点。Grid承诺为插件提供一个应用商店，他们正计划提供点击启动功能，但他们还没有提供这一功能(截至2019年11月，请随时检查是否有任何变化)。可能从命令行将Swarm节点连接到Geth runnning on Grid就像将Swarm连接到“常规”Geth节点一样简单，但不幸的是，我不知道。</p><p id="f9d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管有这些劝阻，我还是想强调一下，Grid看起来非常漂亮，是以太坊基金会的项目。这可能是一个很好的起点，甚至可能比本教程更容易体验。</p><h1 id="0509" class="lw lx iq bd ly lz nt mb mc md nu mf mg jw nv jx mi jz nw ka mk kc nx kd mm mn bi translated">安装和同步</h1><h2 id="2000" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated"><strong class="ak">设置外部固态硬盘</strong></h2><p id="41d7" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated"><em class="ln">(特别鸣谢是为了</em><a class="ae lo" href="https://twitter.com/gregjeanmart" rel="noopener ugc nofollow" target="_blank"><em class="ln">Gregoire jean mart</em></a><em class="ln">——这一段很大程度上抄袭了他的优秀</em> <a class="ae lo" href="https://kauri.io/article/9695fcca217f46feb355245275835fc0" rel="noopener ugc nofollow" target="_blank"> <em class="ln">教程</em> </a> <em class="ln">用于在树莓Pi上运行一个节点。)</em></p><p id="81bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您正在运行外置SSD，下面是一些设置它的步骤。使用<code class="fe nz oa ob oc b">sudo fdisk -l</code>定位驱动器。以下是该命令的输出示例:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="4732" class="mo lx iq oc b gy oh oi l oj ok">Disk /dev/sda: 931.5 MiB, 1000204886016 bytes, 1953525168 sectors Disk model: Kingston FF01BT2<br/>Units: sectors of 1 * 512 = 512 bytes<br/>Sector size (logical/physical): 512 bytes / 4096 bytes<br/>I/O size (minimum/optimal): 4096 bytes / 4096 bytes<br/><br/>(...)<br/><br/>Disk /dev/sdb: 465.8 GiB, 500107862016 bytes, 976773168 sectors<br/>Disk model: Portable SSD T5 <br/>Units: sectors of 1 * 512 = 512 bytes<br/>Sector size (logical/physical): 512 bytes / 512 bytes<br/>I/O size (minimum/optimal): 512 bytes / 512 bytes</span></pre><p id="d4a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这种情况下，<code class="fe nz oa ob oc b">/dev/sdb</code>是您的外部固态硬盘。我们将以此为例向前推进，所以如果你的SSD在不同的位置，用你从<code class="fe nz oa ob oc b">fdisk</code>收集到的任何位置替换<code class="fe nz oa ob oc b">/dev/sdb</code>。</p><p id="a2df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果需要对驱动器进行(重新)分区，请使用以下方法。这将擦除硬盘上的所有内容。将内容备份到其他地方，然后继续:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="550b" class="mo lx iq oc b gy oh oi l oj ok">sudo mkfs.ext /dev/sdb</span></pre><p id="3f6c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">出现提示时，按“y”。</p><p id="9d66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将手动安装SSD(用冒号(:)分隔的用户名和组替换<code class="fe nz oa ob oc b">user:group</code>——如果您不知道组，请在终端中输入<code class="fe nz oa ob oc b">groups</code>并使用第一个选项):</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="8852" class="mo lx iq oc b gy oh oi l oj ok">sudo mkdir /mnt/ssd<br/>sudo chown -R <em class="ln">user</em>:<em class="ln">group</em> /mnt/ssd<br/>sudo mount /dev/sdb /mnt/ssd</span></pre><p id="7e9c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们希望固态硬盘在启动时自动挂载。键入<code class="fe nz oa ob oc b">sudo blkid</code>并获取与SSD相关联的<code class="fe nz oa ob oc b">UUID</code>(在<code class="fe nz oa ob oc b">/dev/sdb</code>或您的SSD所在位置的那个)。把它抄下来，我们马上就需要它。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="454c" class="mo lx iq oc b gy oh oi l oj ok">sudo nano /etc/fstab</span></pre><p id="56ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加以下内容(确保在粘贴UUID的位置后留出一个空格):</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="2c1c" class="mo lx iq oc b gy oh oi l oj ok">UUID=<em class="ln">**Paste UUID from blkid here**</em> /mnt/ssd ext4 defaults 0 0</span></pre><p id="9064" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不重新启动，更改不会生效，所以如果你想继续运行，你需要重新启动。完成后，您可以输入以下内容来查看计算机是否确实安装了SSD:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="e38a" class="mo lx iq oc b gy oh oi l oj ok">df -ha /dev/sdb</span></pre><p id="fe93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出应包括<code class="fe nz oa ob oc b">/dev/sdb</code>安装在<code class="fe nz oa ob oc b">/mnt/ssd</code>上。</p><h2 id="157f" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">安装和设置go</h2><p id="08e7" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">我们将运行Geth，这是一个用Go编写的以太坊客户端，所以我们需要设置Go。下面列出的Go版本是我写这篇文章时的最新版本，但是你可以去Golang的<a class="ae lo" href="https://golang.org/dl/" rel="noopener ugc nofollow" target="_blank">网站</a>看看是否有更新的版本。我们假设一个普通的64位架构。如果你遇到了麻烦，请查看网站。启动和运行可能会很痛苦，因此我们将尝试简化这一过程:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="5ab4" class="mo lx iq oc b gy oh oi l oj ok">cd ~/Downloads<br/>wget <a class="ae lo" href="https://dl.google.com/go/go1.13.4.linux-amd64.tag.gz" rel="noopener ugc nofollow" target="_blank">https://dl.google.com/go/go1.13.5.linux-amd64.tar.gz</a><br/>sudo tar -C /usr/local -xvf go1.13.4.linux-amd64.tar.gz</span></pre><p id="4bf0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注:</strong>这里假设<code class="fe nz oa ob oc b">go1.13.5</code>是Go的最新版本(截止到本次更新(2019年12月8日)就是这种情况)。你可以在这里<a class="ae lo" href="https://golang.org/dl/" rel="noopener ugc nofollow" target="_blank">查一下</a>看看是否还是这种情况。如果有更新的版本，您可以删除<code class="fe nz oa ob oc b">1.13.5</code>，用最新的稳定版本替换它。</p><p id="ac1d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要设置环境变量。有多种方法可以做到这一点，但这里有一个:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="09ca" class="mo lx iq oc b gy oh oi l oj ok">sudo nano /etc/profile</span></pre><p id="754c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将在<code class="fe nz oa ob oc b">/etc/profile</code>文件上打开纳米文本编辑器。(如果你没有Nano，<code class="fe nz oa ob oc b">sudo apt install nano</code>应该可以在类似Debian的系统上使用。如果您在不同的Linux上，请替换为友好的邻居软件包管理器。)</p><p id="2b50" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在文件的底部，添加以下内容:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="ff3a" class="mo lx iq oc b gy oh oi l oj ok">export PATH=$PATH:/usr/local/go/bin</span></pre><p id="c10f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按Ctrl+X，打Y，回车保存。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="92cd" class="mo lx iq oc b gy oh oi l oj ok">sudo source /etc/profile</span></pre><p id="7504" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这应该让它加载。如果您在终端中键入<code class="fe nz oa ob oc b">go version</code>，您应该会看到类似于<code class="fe nz oa ob oc b">go version go1.13.5 linux/arm</code>的输出。如果没有，你就进入了故障诊断的奇妙世界，祝你好运！你可能需要清除Go并重新安装，但是你可以试着在网上找到一些有用的关于你遇到的错误的信息。</p><h2 id="9744" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">安装Geth</h2><p id="9385" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">导航到您想要存储Geth源代码的文件夹。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="089e" class="mo lx iq oc b gy oh oi l oj ok">export GO111MODULE=on<br/>go get -d github.com/ethereum/go-ethereum@v1.9.9<br/>**This may take a minute, don't worry<br/>go install github.com/ethereum/go-ethereum/cmd/geth</span></pre><p id="caef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注:</strong> <code class="fe nz oa ob oc b">@1.9.9</code>告诉go下载1.9.9版本，这是截止到本次更新(2019 . 12 . 8)的最新稳定Geth版本。你一定要在这里查看<a class="ae lo" href="https://geth.ethereum.org/downloads/" rel="noopener ugc nofollow" target="_blank"/>看看最新的稳定发布版本号是多少——它会在页面顶部用大号字体显示，用最新的稳定发布版本替换<code class="fe nz oa ob oc b">1.9.9</code>。</p><p id="8145" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此时，您可能会发现Go安装中的各种问题。如果发生这种情况，请参见上文和更广泛的互联网。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="76db" class="mo lx iq oc b gy oh oi l oj ok">sudo mv $GOPATH/bin/go-ethereum/build/bin/geth /usr/local/bin</span></pre><p id="eec1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在<code class="fe nz oa ob oc b">geth version</code>应该输出关于你当前安装的信息。如果是的话，恭喜你！你安装了Geth。</p><p id="2a51" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们来做一个有权限的数据目录。(这里假设你使用的是安装在<code class="fe nz oa ob oc b">/mnt/ssd</code>上的外置硬盘，否则就用内置硬盘替换——类似于<code class="fe nz oa ob oc b">/dev/sda1</code>):</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="78e2" class="mo lx iq oc b gy oh oi l oj ok">sudo mkdir /mnt/ssd/ethereum<br/>sudo chown -R <em class="ln">user</em>:<em class="ln">group</em> /mnt/ssd/ethereum</span></pre><h2 id="5726" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">与Geth同步</h2><p id="7ff1" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">如果一切顺利，我们就可以开始运行Geth和syncing了。</p><p id="b0f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在加速与链的当前状态的初始同步方面已经有了很大的进步，甚至还有更酷的东西正在开发中。这意味着你想利用一种特殊的同步模式，这种模式可以将初始同步缩短到几天。尝试以下方法:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="d86a" class="mo lx iq oc b gy oh oi l oj ok">geth --syncmode fast --cache 1024--datadir /mnt/ssd/ethereum</span></pre><p id="6a4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(如果它占用了太多内存，请尝试调低<code class="fe nz oa ob oc b">--cache</code>标志。<code class="fe nz oa ob oc b">--cache 256</code>工作正常，但是需要几天时间来同步，而<code class="fe nz oa ob oc b">--cache 1024</code>可能只需要几天时间。在8GB内存下，我的系统在<code class="fe nz oa ob oc b">--cache 256</code>时不受影响，如果这有所帮助的话。)</p><p id="b14a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果一切顺利，应该会有一个相当稳定的输出流。这很好，但是按Ctrl+C来停止它，因为我们只是检查它是否工作。我们不希望您每次启动时都必须手动重启Geth，所以我们将把它变成一个系统进程(再次声明，经许可复制自Gregoire Jeanmart。)</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="1d6d" class="mo lx iq oc b gy oh oi l oj ok">sudo nano /etc/systemd/system/geth.service</span></pre><p id="59be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">进入Nano后，键入以下内容(和以前一样，用您的用户名和组替换<code class="fe nz oa ob oc b">user</code>和<code class="fe nz oa ob oc b">group</code>)。):</p><p id="8e05" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">格式说明:</strong>从<code class="fe nz oa ob oc b">ExecStart</code>开始的行直到<code class="fe nz oa ob oc b">/mnt/ssd/ethereum</code>之后才结束。我想不出在一行中得到它的方法，嵌入一个要点会在结尾之前切断脚本。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="56ea" class="mo lx iq oc b gy oh oi l oj ok">[Unit]<br/>Description: Geth Node<br/>After=network.target auditd.service<br/>Wants=network.target<br/>[Service]<br/>WorkingDirectory=/home/<em class="ln">user</em><br/>ExecStart=/usr/local/bin/geth --syncmode fast --cache 256 --datadir mnt/ssd/ethereum<br/>User=<em class="ln">user</em><br/>Group=<em class="ln">group<br/></em>Restart=always<br/>RestartSec=5s</span><span id="5681" class="mo lx iq oc b gy ol oi l oj ok">[Install]<br/>WantedBy=multi-user.target<br/>RequiredBy=swarm.service<br/>Alias=geth.service</span></pre><p id="7bec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(同样，上面的缓存设置为256。如果您正在运行一个专用的节点，或者有大量的RAM，您可能应该将它增加到1024甚至2048。此外，我会建议你在同步后拔掉<code class="fe nz oa ob oc b">--syncmode fast</code>标志。)</p><p id="7afd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Ctrl+X，然后Y和Enter保存更改。下面将重新加载系统守护进程，现在将包括<code class="fe nz oa ob oc b">geth.service</code>，然后启动<code class="fe nz oa ob oc b">geth</code>，然后将其标记为在启动时启动的服务:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="7936" class="mo lx iq oc b gy oh oi l oj ok">sudo systemctl daemon-reload<br/>sudo systemctl start geth<br/>sudo systemctl enable geth</span></pre><p id="92de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以检查日志以查看Geth是否正在运行:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="9869" class="mo lx iq oc b gy oh oi l oj ok">sudo tail -f /var/log/syslog</span></pre><p id="9aca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Ctrl+C退出。Gregoire在他的<a class="ae lo" href="https://kauri.io/article/9695fcca217f46feb355245275835fc0" rel="noopener ugc nofollow" target="_blank">教程</a>中有很多关于同步本质的信息(这一节叫做‘同步’)，还有另外一个完整的<a class="ae lo" href="https://kauri.io/article/5ab5c4d558e04a73accebc652ef2246b" rel="noopener ugc nofollow" target="_blank">教程</a>关于如何建立一个日志并导入到Google Sheets(或类似的)中，里面有很棒的图表。我会一字不差地把它抄出来，所以我要让你，这位了不起的新节点运行者，自己去检查一下。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="fbee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">注意:以下两个部分指的是节点完全同步时的情况，包括块和状态。(详见Gregoire的文章。)同步状态可能需要很长时间。格雷瓜尔似乎在不到四天的时间里就做到了，而我似乎经历了更艰难的时间。放心吧！你(r处理器)可以做到。接下来的几节是您可以使用完全同步的节点做的两件很酷的事情。</em></p><h1 id="fb6c" class="lw lx iq bd ly lz nt mb mc md nu mf mg jw nv jx mi jz nw ka mk kc nx kd mm mn bi translated">连接元掩码</h1><p id="6143" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">你现在有了自己的节点，所以你应该用它做一些很酷的事情。我们要做的第一件事是分散你的元掩码。(如果您还没有<a class="ae lo" href="https://metamask.io" rel="noopener ugc nofollow" target="_blank">元掩码</a>，您应该会得到它。)你看，MetaMask通过连接到Infura来开箱即用，in fura是一种巨型节点，有些人运行它以便其他人可以查询它。换句话说，你必须信任Infura，而我们太愚蠢了，在完全不需要的时候不会这么做。(无意冒犯，Infura，你很牛逼。)您的机器上已经有了一个节点，所以无论如何，去调用Infura获取信息是相当愚蠢的。</p><p id="868e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">具体怎么做取决于你的浏览器。(<a class="ae lo" href="https://ethereum.stackexchange.com/a/77032/27270" rel="noopener ugc nofollow" target="_blank">这里有一个来自StackExchange的回答</a>本节基于。)基本思想是Geth需要对来自浏览器中MetaMask扩展的跨域RPC请求开放。你需要再次打开<code class="fe nz oa ob oc b">geth.service</code>——<code class="fe nz oa ob oc b">sudo nano /etc/systemd/system/geth.service</code>，并添加到<code class="fe nz oa ob oc b">ExecStart</code>。</p><h2 id="01d0" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated"><strong class="ak"> Chrome/Brave </strong></h2><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="e768" class="mo lx iq oc b gy oh oi l oj ok">--rpc --rpccorsdomain="chrome-extension://nkbihfbeogaeaoehlefnkodbefgpgknn"</span></pre><p id="5ef2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这不起作用，你可能需要遵循我们将在Firefox和Tor中描述的类似过程。搜索如何获得Chrome扩展ID。</p><h2 id="43b8" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated"><strong class="ak">火狐/Tor </strong></h2><p id="f0dc" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">首先，确保你有元掩码，并且它没有被禁用(你可以去地址栏的<code class="fe nz oa ob oc b">about:addons</code>看看)。打开一个新标签，在URL中输入<code class="fe nz oa ob oc b">about:memory</code>。点击<strong class="kt ir">显示内存报告</strong>中的测量。向下滚动到<strong class="kt ir">其他测量</strong>，这里有一个浏览器扩展部分。(或者直接按CTRL+F搜索<code class="fe nz oa ob oc b">metamask</code>。)您应该会看到类似下面的内容，但都在一行上(又是格式问题):</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="9439" class="mo lx iq oc b gy oh oi l oj ok">Extension(<a class="ae lo" href="mailto:id=webextension@metamask.io" rel="noopener ugc nofollow" target="_blank">id=webextension@metamask.io</a>, name="MetaMask", baseURL=moz-extension://<!-- -->f3a66ea7-df4d-4731-80db-de45a4abebd6<!-- -->/</span></pre><p id="9e2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">(由</em> <a class="ae lo" href="https://stackoverflow.com/a/51283520/7913944" rel="noopener ugc nofollow" target="_blank"> <em class="ln">带给你这个</em> </a> <em class="ln">关于StackOverflow的回答。)</em></p><p id="7e25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以<code class="fe nz oa ob oc b">f3a66ea7-df4d-4731-80db-de45a4abebd6</code>为例<code class="fe nz oa ob oc b">moz-extension</code>，将以下内容添加到<code class="fe nz oa ob oc b">/etc/systemd/system/geth.service</code>中的<code class="fe nz oa ob oc b">ExecStart</code>:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="627d" class="mo lx iq oc b gy oh oi l oj ok">--rpc --rpccorsdomain="<!-- -->moz-extension://<!-- -->f3a66ea7-df4d-4731-80db-de45a4abebd6"</span></pre><p id="bcf3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您需要重新加载Geth以使更改生效:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="4373" class="mo lx iq oc b gy oh oi l oj ok">sudo restart geth</span></pre><p id="b81d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在来看MetaMask。打开MetaMask，在<strong class="kt ir">网络</strong>菜单中选择<strong class="kt ir"> Localhost 8545 </strong>。MetaMask应该连接到您的节点，并且您正在使用自己的节点浏览Web3！</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="a2dd" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">运行一个群节点</h1><p id="b5cc" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">Swarm是以太坊所属技术平台的一部分。这是一个分散存储系统，很像IPFS。一旦你和这个链同步了，你应该多做一点，配置Swarm。最终，目标是托管数据将产生利润(把它想象成出租你的硬盘空间)，但不要期望很快就能看到任何利润。话说回来，您漂亮的固态硬盘上还有额外的空间，让我们开始吧:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="7edc" class="mo lx iq oc b gy oh oi l oj ok">go get -d github.com/ethersphere/swarm@v0.5.4<br/>go install github.com/ethersphere/swarm/cmd/swarm</span></pre><p id="f754" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这假设<code class="fe nz oa ob oc b">0.5.4</code>是最新的稳定版本(并且<code class="fe nz oa ob oc b">GO111MODULE</code>被设置为<code class="fe nz oa ob oc b">on</code>，如果不是，您可以在shell中键入<code class="fe nz oa ob oc b">export GO111MODULE=on</code>)。检查<a class="ae lo" href="https://swarm-gateways.net/bzz:/swarm.eth/downloads/" rel="noopener ugc nofollow" target="_blank">这里的</a>是什么最新的稳定版本，用最新的稳定版本替换<code class="fe nz oa ob oc b">0.5.4</code>。</p><p id="6156" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们将Swarm可执行文件移到您的<code class="fe nz oa ob oc b">bin</code>中，这样您就可以从命令行调用它，而不需要整个路径，就像我们对Geth所做的那样。我不能保证你的设置和我的一样，但我是这样做的:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="29dc" class="mo lx iq oc b gy oh oi l oj ok">sudo mv $GOPATH/bin/swarm /usr/local/bin</span></pre><p id="0301" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果失败了，看看Swarm可执行文件在哪里。</p><p id="6078" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您应该能够在控制台中键入<code class="fe nz oa ob oc b">swarm version</code>并获得输出。您需要一个由您的Geth节点注册的帐户:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="b22a" class="mo lx iq oc b gy oh oi l oj ok">geth account new --datadir /mnt/ssd/ethereum</span></pre><p id="145b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">这假设您使用的是节点的位置</em> <code class="fe nz oa ob oc b"><em class="ln">/mnt/ssd/ethereum</em></code> <em class="ln">，按照上面连接外部SSD的说明。如果您正在使用不同的位置，请将它放在</em> <code class="fe nz oa ob oc b"><em class="ln">--datadir</em></code> <em class="ln">之后，如果您正在使用默认位置，请将</em> <code class="fe nz oa ob oc b"><em class="ln">--datadir</em></code> <em class="ln">标志完全关闭。</em></p><p id="0d80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">系统会提示您输入密码。记住这个密码很重要，因为一旦丢失就无法恢复。将输出复制到一个文件中，放在一个合适的位置，并使用合适的名称(不一定要使用下面的路径和文件名)，我们很快就会用到这个文件:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="9348" class="mo lx iq oc b gy oh oi l oj ok">touch <em class="ln">~/path/to/data.txt</em></span></pre><p id="3189" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(据我所知，文件不需要以<code class="fe nz oa ob oc b">txt</code>结尾。)您可能希望限制对此的权限。</p><p id="b714" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将密码复制到文件中。再说一次，我们很快就需要这个。</p><h2 id="6375" class="mo lx iq bd ly mp mq dn mc mr ms dp mg la mt mu mi le mv mw mk li mx my mm mz bi translated">关于满群和轻群节点的一句话</h2><p id="f122" class="pw-post-body-paragraph kr ks iq kt b ku nc jr kw kx nd ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">在我们开始之前，简单说一下。Swarm和以太坊一样有一个满和轻节点的概念。一个完整的节点应该几乎一直在线，这样它就可以为它存储的内容提供服务。这意味着，如果您在笔记本电脑上运行，您可能希望运行一个light node。你可以从Swarm上接收内容，但是不要指望可以提供服务。如果是这种情况，在这里将标志<code class="fe nz oa ob oc b">--lightnode</code>添加到任何以<code class="fe nz oa ob oc b">swarm</code>开始的命令。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="043e" class="mo lx iq oc b gy oh oi l oj ok">swarm --bzzaccount <em class="ln">**Paste address**</em></span></pre><p id="7db0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">系统会提示您输入密码。粘贴它，输出应该确认Swarm正在运行，但更酷的是，如果你将浏览器指向http://localhost:8500 ，你应该会看到Swarm网关。如果您不能使用，请不要担心。eth域，是因为我们还没有配置ENS。</p><p id="321f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您看到错误，不要气馁。它们不一定意味着节点不工作。我收到了以下三种类型的大量错误，我被告知可以安全地忽略它们，并且它们将在未来从最终用户日志中删除:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="54a2" class="mo lx iq oc b gy oh oi l oj ok">ERROR netstore. Get can not retrieve chunk<br/>ERROR not forwarding request, origin node is closer to chunk than this node base<br/>ERROR dropping peer with DiscSubprotocolError</span></pre><p id="7057" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(我可能是在关闭节点的时候才拿到第三个。)</p><p id="dc4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Ctrl+C out，因为我们也要把它变成一个系统进程:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="44a2" class="mo lx iq oc b gy oh oi l oj ok">sudo mv $GOPATH/bin/swarm /usr/local/bin<br/>sudo nano /etc/systemd/system/swarm.service</span></pre><p id="01d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Nano中，添加以下内容。和之前的Geth服务脚本一样，我不能把所有的<code class="fe nz oa ob oc b">ExecStart</code>都放在一行中，尽管应该这样。用您的用户名和组替换<code class="fe nz oa ob oc b">user</code>和<code class="fe nz oa ob oc b">group</code>，就像您对<code class="fe nz oa ob oc b">geth.service</code>所做的那样，并输入您在Geth中为<code class="fe nz oa ob oc b">address</code>生成的地址，以及使用<code class="fe nz oa ob oc b">--password</code>标志的带有您的密码的文件的路径。</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="82c5" class="mo lx iq oc b gy oh oi l oj ok">[Unit]<br/>Description=Swarm Node<br/>After=network.target auditd.service<br/>Wants=network.target<br/>Requires=geth.service</span><span id="08c4" class="mo lx iq oc b gy ol oi l oj ok">[Service]<br/>WorkingDirectory=/home/<em class="ln">user</em><br/>ExecStart=swarm --ens-api /mnt/ssd/ethereum/geth.ipc --bzzaccount <em class="ln">address </em>--password<em class="ln"> /path/to/password.txt</em><br/>User=<em class="ln">user</em><br/>Group=<em class="ln">group</em><br/>Restart=always<br/>RestartSec=5s<br/><br/>[Install]<br/>WantedBy=multi-user.target<br/>Alias=swarm.service</span></pre><p id="70bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">如果您限制了对密码文件的权限，请确保该服务具有访问该文件的适当权限。</em></p><p id="9804" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你会看到我们增加了ENS支持。请注意，在您的Geth节点完全同步之前，ENS支持将不起作用。我目前正在尝试验证到底需要同步什么。目前在我的系统上进行的实验似乎表明，只有块头是不够的，您可能需要下载所有存储的状态。如果您想知道您的进度，您可以使用Geth控制台(<code class="fe nz oa ob oc b">geth attach /mnt/ssd/ethereum/geth.ipc</code>，或者您的路径是什么)，并输入<code class="fe nz oa ob oc b">eth.syncing</code>。如果它返回<code class="fe nz oa ob oc b">false</code>，那么你就同步了所有的状态。否则你会得到一个有数据的对象。不过，如果您的ENS还没有解决，也不用担心。当你完全赶上时，它应该工作。</p><p id="1900" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在启动时加载、启动和启动我们的服务的几个快速命令:</p><pre class="kg kh ki kj gt od oc oe of aw og bi"><span id="da2d" class="mo lx iq oc b gy oh oi l oj ok">sudo systemctl daemon-reload<br/>sudo systemctl start swarm<br/>sudo systemctl enable swarm</span></pre><p id="9a24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝贺你——你正在你的电脑后台为一个去中心化的网络做出巨大贡献！</p></div></div>    
</body>
</html>