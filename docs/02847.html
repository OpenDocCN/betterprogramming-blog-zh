<html>
<head>
<title>Even More JavaScript Shorthands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">甚至更多的JavaScript速记</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/even-more-javascript-shorthands-3bf1f5182d05?source=collection_archive---------4-----------------------#2020-01-04">https://betterprogramming.pub/even-more-javascript-shorthands-3bf1f5182d05?source=collection_archive---------4-----------------------#2020-01-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="00a2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">句法糖，以改善你的流程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3b29cfe97f2da08719d3a4ebf614868c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xBwIx4kBvVPTBOMw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丘特尔斯纳普</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="64b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript的最新版本中，这种语言引入了更多的语法糖。在这篇文章中，我们将看看在新版本和旧版本的JavaScript中容易阅读的快捷方式。有了它们，可以节省我们的时间，让我们的代码更容易阅读。</p><p id="a1e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将研究对象属性赋值，寻找函数的索引，用对象替换switch语句，通过压缩<code class="fe lv lw lx ly b">if</code>语句合并对象，等等。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f426" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">对象属性分配</h1><p id="6f1a" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">Object.assign</code>方法将一个对象从一个新对象浅层复制到另一个对象。</p><p id="a25f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有以下对象…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="1c99" class="nh mh it ly b gy ni nj l nk nl">const foo = {<br/>  foo: 1<br/>}</span></pre><p id="9d0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…我们可以如下克隆它:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="0a80" class="nh mh it ly b gy ni nj l nk nl">const copied = Object.assign({}, foo);</span></pre><p id="8be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">克隆将复制其自身属性的结构，并将阻止对原始对象的修改。</p><p id="8fac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着修改<code class="fe lv lw lx ly b">copied</code>不会修改<code class="fe lv lw lx ly b">foo</code>。</p><p id="e7dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个浅层克隆，所以嵌套对象不会被克隆。</p><p id="8820" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将两个对象合并成一个并用<code class="fe lv lw lx ly b">Object.assign</code>返回。例如，如果我们有以下两个对象…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="90f8" class="nh mh it ly b gy ni nj l nk nl">const foo = {<br/>  foo: 1<br/>}</span><span id="741f" class="nh mh it ly b gy nm nj l nk nl">const bar = {<br/>  bar: 1<br/>}</span></pre><p id="0905" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…然后我们可以将它们合并成一个，并通过运行以下命令返回一个具有合并结构的新对象:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="6575" class="nh mh it ly b gy ni nj l nk nl">const merged = Object.assign(foo, bar);</span></pre><p id="10b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="a626" class="nh mh it ly b gy ni nj l nk nl">{foo: 1, bar: 1}</span></pre><p id="b5df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…它不引用原始对象。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ee8d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">IndexOf和findIndex</h1><p id="a3a5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">indexOf</code>方法找到数组中原始元素的位置。如果没有找到，则返回<code class="fe lv lw lx ly b">-1</code>，如果存在，则返回找到该值的第一个索引。</p><p id="c2e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有以下数组…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="bfdd" class="nh mh it ly b gy ni nj l nk nl">const arr = [1, 2, 3, 4, 1];</span></pre><p id="8395" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…那么<code class="fe lv lw lx ly b">arr.indexOf(1)</code>会让我们得到0。</p><p id="69c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于对象数组，我们可以使用<code class="fe lv lw lx ly b">findIndex</code>方法来做同样的事情。例如，给定以下数组…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="3f60" class="nh mh it ly b gy ni nj l nk nl">const people = [{<br/>    name: 'Joe',<br/>    age: 10<br/>  },<br/>  {<br/>    name: 'Joe',<br/>    age: 11<br/>  },<br/>  {<br/>    name: 'Mary',<br/>    age: 13<br/>  },<br/>]</span></pre><p id="6a25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…我们可以如下使用<code class="fe lv lw lx ly b">findIndex</code>方法:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="b55b" class="nh mh it ly b gy ni nj l nk nl">people.findIndex(p =&gt; p.name === 'Joe')</span></pre><p id="7ddc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们得到0，因为在<code class="fe lv lw lx ly b">name</code>属性中具有<code class="fe lv lw lx ly b">'Joe'</code>的第一个条目是第一个条目。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="08d9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">Object.entries()</h1><p id="7005" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">使用ES2017，我们可以通过使用<code class="fe lv lw lx ly b">Object.entries</code>方法获得对象的所有键值对。它得到自己的键值对，而不是它的原型。</p><p id="5d9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以编写以下代码:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="9c5d" class="nh mh it ly b gy ni nj l nk nl">const obj = {<br/>  a: 'foo',<br/>  b: 'bar',<br/>  c: 'baz'<br/>};<br/>const arr = Object.entries(obj);</span></pre><p id="35de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们回来了:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="c000" class="nh mh it ly b gy ni nj l nk nl">["a", "foo"]<br/>["b", "bar"]<br/>["c", "baz"]</span></pre><p id="4440" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个条目是键，第二个是值。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9980" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">Object.values()</h1><p id="4fed" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">Object.values</code>方法来获取对象的值。</p><p id="1e2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="a4f2" class="nh mh it ly b gy ni nj l nk nl">const obj = {<br/>  a: 'foo',<br/>  b: 'bar',<br/>  c: 'baz'<br/>};<br/>const arr = Object.values(obj);</span></pre><p id="65ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…然后我们回来了:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="5c99" class="nh mh it ly b gy ni nj l nk nl">["foo", "bar", "baz"]</span></pre><p id="41b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是对象属性的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/929bbd27692cc28c3ff4072b0dee7a1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v2iUvoqdjZ7YsLH1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">西蒙·伯特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ebec" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">获取字符串文字的字符</h1><p id="916f" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">charAt</code>方法或者括号符号来实现。</p><p id="6ec2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以写:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="9ca2" class="nh mh it ly b gy ni nj l nk nl">'foo'.charAt(0);</span></pre><p id="e112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="ee44" class="nh mh it ly b gy ni nj l nk nl">'foo'[0];</span></pre><p id="bb22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两个都让我们<code class="fe lv lw lx ly b">'f'</code>，这是<code class="fe lv lw lx ly b">'foo'</code>的第一个角色。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b65d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">开关的紧凑型替代产品</h1><p id="136a" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用对象作为<code class="fe lv lw lx ly b">switch</code>语句的紧凑替代。</p><p id="cce1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="283f" class="nh mh it ly b gy ni nj l nk nl">const apple = () =&gt; console.log('apple');<br/>const orange = () =&gt; console.log('orange');<br/>const grape = () =&gt; console.log('grape');<br/>const fruit = 'apple';</span><span id="3bc2" class="nh mh it ly b gy nm nj l nk nl">switch (fruit) {<br/>  case 'apple':<br/>    apple();<br/>    break;<br/>  case 'orange':<br/>    orange();<br/>    break;<br/>  case 'grape':<br/>    grape();<br/>    break;<br/>  default:<br/>    return;<br/>}</span></pre><p id="75ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…我们可以用一个简单的物体来代替<code class="fe lv lw lx ly b">switch</code>陈述:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="6caa" class="nh mh it ly b gy ni nj l nk nl">const fruit = 'apple';</span><span id="3944" class="nh mh it ly b gy nm nj l nk nl">const dict = {<br/>  apple() {<br/>    console.log('apple');<br/>  },<br/>  orange() {<br/>    console.log('orange');<br/>  },<br/>  grape() {<br/>    console.log('grape');<br/>  },<br/>}</span><span id="ebe2" class="nh mh it ly b gy nm nj l nk nl">dict[fruit]();</span></pre><h1 id="4488" class="mg mh it bd mi mj no ml mm mn np mp mq jz nq ka ms kc nr kd mu kf ns kg mw mx bi translated">用indexOf或includes替换ifs</h1><p id="ccbc" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果我们有类似…</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="3e2c" class="nh mh it ly b gy ni nj l nk nl">const foo = 1;<br/>if (foo == 1 || foo == 5 || foo == 7 || foo == 12) {<br/>  console.log(foo);<br/>}</span></pre><p id="167a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…我们可以用<code class="fe lv lw lx ly b">indexOf</code>方法替换<code class="fe lv lw lx ly b">if</code>，如下所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="c990" class="nh mh it ly b gy ni nj l nk nl">const foo = 1;<br/>if ([1, 5, 7, 12].indexOf(foo) !== -1) {<br/>  console.log(foo);<br/>}</span></pre><p id="cd9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">-1</code>表示数组中找不到该值。任何其他值表示该值所在的索引。</p><p id="10b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者我们可以使用<code class="fe lv lw lx ly b">includes</code>方法:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="b156" class="nh mh it ly b gy ni nj l nk nl">const foo = 1;<br/>if ([1, 5, 7, 12].includes(foo)) {<br/>  console.log(foo);<br/>}</span></pre><p id="f91f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">includes</code>返回一个布尔值。如果在数组中找到该值，则为<code class="fe lv lw lx ly b">true</code>，否则为<code class="fe lv lw lx ly b">false</code>。</p><p id="2901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用<code class="fe lv lw lx ly b">charAt</code>方法或括号符号来获取字符串的字符。</p><p id="64f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">switch</code>语句可以用充当字典的对象代替。</p><p id="09fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用较新版本的JavaScript，我们可以分别用<code class="fe lv lw lx ly b">Object.values</code>方法和<code class="fe lv lw lx ly b">Object.entries</code>方法获得对象的值和键值对。</p><p id="dc8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得数组元素第一次出现的索引，我们可以对原语使用<code class="fe lv lw lx ly b">indexOf</code>方法，对对象使用<code class="fe lv lw lx ly b">findIndex</code>。</p><p id="f477" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要复制和合并对象，我们可以使用<code class="fe lv lw lx ly b">Object.assign</code>方法。</p></div></div>    
</body>
</html>