<html>
<head>
<title>A Beginner’s Guide to D3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">D3.js初学者指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-beginners-guide-to-d3-js-962a3234f76?source=collection_archive---------3-----------------------#2019-05-28">https://betterprogramming.pub/a-beginners-guide-to-d3-js-962a3234f76?source=collection_archive---------3-----------------------#2019-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4986" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">D3.js是一个基于数据操作文档的JavaScript库——下面是它的使用方法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/b78e950531d12bb3bd7d725f20429f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*cuHmndYevKsJUol14LlWtA.png"/></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">D3</p></figure><h2 id="3d2f" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">D3是什么？</h2><p id="3edf" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated"><a class="ae mg" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> D3.js </a>是一个开源的Javascript库，专注于数据驱动的文档操作。"数据驱动的文档操作？"那是什么意思？</p><p id="0be5" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">这意味着D3允许你通过HTML、CSS或SVG来可视化你的数据，这意味着你可以在现代浏览器上查看你的可视化。它允许您将数据绑定到DOM(文档对象模型),并转换文档以显示您的数据。有很多很棒的设计，你可以用d3.js来定制你的文档</p><p id="fe4d" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">在本指南中，我们将了解D3的一些方面:</p><ol class=""><li id="4b15" class="mm mn iq lp b lq mh lt mi la mo le mp li mq mf mr ms mt mu bi translated">选择</li><li id="7e4f" class="mm mn iq lp b lq mv lt mw la mx le my li mz mf mr ms mt mu bi translated">数据绑定和加载</li><li id="d206" class="mm mn iq lp b lq mv lt mw la mx le my li mz mf mr ms mt mu bi translated">数据可视化</li><li id="a638" class="mm mn iq lp b lq mv lt mw la mx le my li mz mf mr ms mt mu bi translated">缩放比例</li><li id="0d82" class="mm mn iq lp b lq mv lt mw la mx le my li mz mf mr ms mt mu bi translated">轴</li></ol><h2 id="3662" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">重要的事情先来</h2><p id="5f56" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">创建一个目录，并在代码编辑器中打开它。创建3个文件:index.js，index.css和index.html</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi na"><img src="../Images/2aa2f2ba762b3f086979add0998ce834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbnnGg-kP8Dd_kx6d0tjlQ.png"/></div></div></figure><p id="0a01" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">在您的index.html中，确保您正在加载D3库以及index.js文件(并确保您正在使用<a class="ae mg" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank">库的最新链接</a>)。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="ce3d" class="kr ks iq ng b gy nk nl l nm nn">&lt;script src="https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;</span></pre><p id="8b93" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">让我们转到index.js文件并开始工作。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="a94b" class="nv ks iq bd kt nw nx ny kw nz oa ob kz jw oc jx ld jz od ka lh kc oe kd ll of bi translated">选择</h1><p id="c0f4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">D3允许你使用名字(比如p，h1)或者CSS选择器来识别DOM元素。那么，在识别它们之后，我们如何选择它们进行操作呢？D3为我们提供了两种选择方法:d3.select()和d3.selectAll()。它们接受元素的名称或CSS选择器(让我们称之为“标识符”)作为参数，并返回元素的选择。</p><p id="9c69" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">这两种选拔方式有什么区别？d3.select()返回匹配标识符的第一个元素，d3.selectAll()返回匹配标识符的所有元素。选择之后，您可以操作数据、设置数据样式并将数据绑定到DOM元素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi og"><img src="../Images/78699664e4cd116828c84d081f7b06c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y_HRhTZxWghIr3nQO6hG4w.png"/></div></div></figure><p id="4eac" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">这将返回它找到的第一个<h1>T5，并把它涂成蓝色。如果没有找到任何h1标签，它将返回一个空选择。</h1></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oh"><img src="../Images/05e263dc798ae3be99b63f58b19a6d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-AQhIlxFbKEHvSP_bk_MQ.png"/></div></div></figure><p id="9f74" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">这将返回它找到的所有<h1> </h1>。如果没有找到任何h1标签，它将返回一个空选择。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oi"><img src="../Images/2691bbf4f9b368d38e09db20d74ab47b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJpS-G6iRHXOheHZgeiwDg.png"/></div></div></figure><p id="14a8" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">与。attr()方法，可以给选中的元素添加属性。它接受两个字符串参数:属性的名称和值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oj"><img src="../Images/a9dd17845aba5ce7ee8c1799c06f705f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ArZPefLwRPZ1WipfFzt6GQ.png"/></div></div></figure><p id="5379" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">与。text()方法，可以更新所选元素的值。它接受一个字符串参数:值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ok"><img src="../Images/17809998d01f6fd805639de55fb3ef51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G72OflRIDtXFsyF8ZIrnhw.png"/></div></div></figure><p id="de0c" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">与。append()方法，可以向DOM添加一个新元素。它接受一个字符串参数:标记的名称。</p><p id="52a2" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">这是它在您的浏览器中应该显示的样子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ol"><img src="../Images/06cfaa1610bae81ece3c011a647d676c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rvSw_EQCpkQQRBZk0ZJLXQ.png"/></div></div></figure><p id="ae27" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated"><strong class="lp ir">任务</strong>:用append()方法添加更多的p标签，用text()方法将它们的值设置为你喜欢的食物；然后使用selectAll()和style()方法将它们的颜色改为橙色。请做这个任务来巩固你的知识。如果你第一次没有成功，不要担心——再看一遍选择部分，你会找到窍门的。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="419f" class="nv ks iq bd kt nw nx ny kw nz oa ob kz jw oc jx ld jz od ka lh kc oe kd ll of bi translated">数据绑定和加载</h1><p id="0afd" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">使用D3，您可以用。data()方法，它接受数据集作为参数。在的帮助下。方法，可以对传入的数据集执行类似“for each element”的操作。数据()。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oo"><img src="../Images/7a5005ea091b3895322e45b4ede94390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GG80sXL_dbA1uP13j-vzag.png"/></div></div></figure><p id="bdc1" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated"><strong class="lp ir">任务2 </strong>:将数据集修改为包含您最喜爱的菜肴，并将p标签的值修改为数据集中元素的值。</p><p id="afd3" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">提示:将第六行替换为:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="b62d" class="nv ks iq bd kt nw nx ny kw nz oa ob kz jw oc jx ld jz od ka lh kc oe kd ll of bi translated">数据可视化</h1><p id="e619" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">现在我们知道了一些基本知识，我们将创建一个简单的带有任意数据集的条形图。</p><p id="09ee" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">在HTML文件中包含svg标签:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="f059" class="kr ks iq ng b gy nk nl l nm nn">&lt;svg class="bar-chart"&gt;&lt;/svg&gt;</span></pre><p id="2abb" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">将它添加到index.js文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="601b" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">这看起来像很多代码，但不要惊慌。再检查一遍。svg标记的宽度和高度分别在svgWidth和svgHeight中指定，条形之间的间距在barSpacing中设置，totalBarWidth是条形的宽度(BarWidth)和条形间距。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi op"><img src="../Images/aba33136046cddc450c192a920faab17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eXd7GHmD-hrFlibDKY8zHw.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">一个简单的D3条形图</p></figure></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="3f01" class="nv ks iq bd kt nw nx ny kw nz oa ob kz jw oc jx ld jz od ka lh kc oe kd ll of bi translated">缩放比例</h1><p id="aec0" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">希望您能够成功地创建条形图。看起来不错吧？帮我一个忙:将数据集中的值更改为小于15的数字。你的条形图现在看起来怎么样？我想不太好——这些条现在太小了，无法阅读。这就是伸缩性发挥作用的地方。我们将重构我们的代码来解决这个问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="8be8" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">scale变量接受一个. domain()对象，该对象接受一个数组作为参数。该数组有两个元素:0和数据集中的最高值(最高值是用。max())。的。range()方法也接受一个包含两个元素的数组:0和条形应该缩放到多高。在上面的代码中，它被设置为svg高度。中的元素随意增减数字。domain()和range()参数数组。如果您正确地重构代码，您的图表应该是可伸缩的。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="944c" class="nv ks iq bd kt nw nx ny kw nz oa ob kz jw oc jx ld jz od ka lh kc oe kd ll of bi translated">轴</h1><p id="20e5" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">干得好，你已经走到这一步了。这将是我要说的最后一个方面，但最后我会给你一些有好的D3教程的链接。</p><p id="b216" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">那么，为什么我们需要一个轴呢？没有轴，你怎么能正确地读取数据呢？透过栅栏，你可以看出它们的高度不同，但这还不够精确。我们将不得不创建垂直和水平的线，用彼此等距离的数字标记它们，确保这些标签是可扩展的…天哪！这已经很多了。幸运的是，D3有一些很棒的方法，只需几行代码就能帮上忙。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="5929" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">要创建您的x轴(xAxis ),您需要使用D3提供的axisBottom()(axis将出现在底部)方法，并通过scale()方法传入您的x刻度，然后在svg元素中创建一个group标记，向该组添加一个translate转换属性，并使用call()方法调用xAxis。</p><p id="219c" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">要创建y轴(yAxis ),您需要使用D3提供的axisLeft()(axis将出现在左边)方法，并通过scale()方法传入您的y刻度，然后在svg元素中创建另一个group标记，向该组添加translate转换属性，并使用call()方法调用yAxis。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi og"><img src="../Images/b9ba9ae00742f2526e75b7c1e321d2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CB2yYJrseryXlhnvaMz0rQ.png"/></div></div><p class="kn ko gj gh gi kp kq bd b be z dk translated">你的应该是这样的</p></figure><p id="9be6" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated"><strong class="lp ir">任务三</strong>:将条形图添加到轴上。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="faa0" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">正如所承诺的，这里有一些好的资源可以帮助你完成D3.js之旅:</p><p id="c975" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">https://www.youtube.com/watch?v=C4t6qfHZ6Tw<a class="ae mg" href="https://www.youtube.com/watch?v=C4t6qfHZ6Tw" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=EYmJEsReewo</a><a class="ae mg" href="https://www.youtube.com/watch?v=dL5dWNMGy5g" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=dL5dWNMGy5g</a>T4</p><p id="d885" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">祝你好运！</p></div></div>    
</body>
</html>