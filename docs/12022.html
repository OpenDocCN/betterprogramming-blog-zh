<html>
<head>
<title>Easy Step to Unit Test Appwrite SDK on Flutter with Mockito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Mockito在Flutter上对Appwrite SDK进行单元测试的简单步骤</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-unit-test-for-appwrite-sdk-on-flutter-with-mockito-e0c3b403199e?source=collection_archive---------9-----------------------#2022-05-05">https://betterprogramming.pub/write-unit-test-for-appwrite-sdk-on-flutter-with-mockito-e0c3b403199e?source=collection_archive---------9-----------------------#2022-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7fa7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Mockito为Appwrite SDK编写单元测试的实用指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dbb8c37626404d5c4c1be80db1e97089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-qovIN6dcWiJBxJNH-5Ig.png"/></div></div></figure><p id="e4d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://appwrite.io/" rel="noopener ugc nofollow" target="_blank"> Appwrite </a>是一个开源(OSS)后端服务，旨在抽象构建现代应用程序所需的常见、复杂和重复任务的复杂性。Appwrite可以作为Firebase的替代产品，具有一系列功能，如身份验证、数据库、存储、功能和实时支持。此外，它提供了几乎所有平台的SDK，如web、Android、iOS、Flutter等。</p><p id="262a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然我们使用SDK开发一个应用程序。单元测试对于测试我们的应用程序是否很好地连接到SDK仍然很重要。因此，在本文中，我想向您展示当使用Appwrite作为后端SDK时，如何在您的Flutter项目上创建一个单元测试。</p><p id="de05" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你是术语单元测试的新手，你可以在这里阅读我之前关于<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/flutter-testing-101-understand-unit-widget-and-integration-testing-fd5d07e312e">颤振测试的文章</a>。</p><h2 id="9b85" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">步骤1 —获取Mockito插件</h2><p id="1bb3" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">因为在单元测试中，我们不执行真正的函数。因此，为了能够对像Appwrite这样的服务进行单元测试，我们需要为该服务创建一个模拟。为此，我们需要一个名为Mockito的插件</p><div class="mm mn gp gr mo mp"><a href="https://pub.dev/packages/mockito" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">莫奇托|镖包</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">受Mockito启发的Dart模拟库。Mockito 5.0.0支持Dart 2.12中Dart新的空安全语言特性…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">公共开发</p></div></div><div class="my l"><div class="mz l na nb nc my nd kp mp"/></div></div></a></div><p id="25fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们将<code class="fe ne nf ng nh b">mockito</code>添加到<code class="fe ne nf ng nh b">pubspec.yaml</code>文件的<code class="fe ne nf ng nh b">dev_dependencies</code>中。</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="6d9e" class="lo lp iq nh b gy nm nn l no np">...<br/>dev_dependencies:<br/>    flutter_test:<br/>        sdk: flutter</span><span id="ca97" class="lo lp iq nh b gy nq nn l no np">    build_runner: ^2.1.7<br/>    mockito: ^5.1.0<br/>...</span></pre><p id="812d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了<code class="fe ne nf ng nh b">mockito</code>，我们还需要<code class="fe ne nf ng nh b">build_runner</code>它，因为mockito将生成模拟文件。</p><div class="mm mn gp gr mo mp"><a href="https://pub.dev/packages/build_runner" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">build_runner | Dart包</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">使用包:build的Dart的独立生成器和观察器。build_runner包提供了一种具体的方法…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">公共开发</p></div></div><div class="my l"><div class="nr l na nb nc my nd kp mp"/></div></div></a></div><h2 id="733d" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">步骤2 —创建Appwrite模拟</h2><p id="3e4b" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">得到我们需要的插件后，下一步是生成我们服务的模拟。例如，我想创建一个用于认证的存储库。因此，我将从Appwrite SDK中为<code class="fe ne nf ng nh b">Account</code>生成一个模拟。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="a05e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了生成一个新的模拟文件，我们在测试文件上使用了<code class="fe ne nf ng nh b">@GenerateMocks()</code>注释。之后，我们需要运行<code class="fe ne nf ng nh b">build_runner</code>来开始生成模拟文件。该命令将生成一个类似<code class="fe ne nf ng nh b">auth_repository_test.mocks.dart</code>的新文件</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="94a9" class="lo lp iq nh b gy nm nn l no np">flutter packages pub run build_runner build</span></pre><h2 id="274d" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">步骤3 —编写测试</h2><p id="14b5" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">现在，我们已经准备好编写测试了。作为一个例子，我将为登录函数编写一个测试。下面是我的<code class="fe ne nf ng nh b">auth_repository_test.dart</code>测试文件的样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="71ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ne nf ng nh b">MockAccount</code>取自我们之前生成的模拟文件。在<code class="fe ne nf ng nh b">AuthRepositoryImpl</code>上，我将<code class="fe ne nf ng nh b">_mockAccount</code>作为依赖项传递。</p><h2 id="fa17" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated">步骤4 —编写实际代码</h2><p id="f3be" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">最后一步是编写实际的存储库代码。下面是我的<code class="fe ne nf ng nh b">auth_repository.dart</code>文件的样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="2443" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对了，Appwrite还提供了<code class="fe ne nf ng nh b">AppwriteException</code>类。如果你想为你的应用程序创建更丰富的错误处理，这是很有帮助的。例如，密码错误警告、电子邮件已被使用警告等。</p></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="c709" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，当你使用Appwrite作为SDK来简化你的生活，同时单独创建一个应用程序时，这是一步一步为你的Flutter项目编写单元测试。当编写单元测试时，我使用测试驱动开发方法。如果你对TDD感兴趣，你可以在这里阅读更多内容:</p><div class="mm mn gp gr mo mp"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-clean-architecture-test-driven-development-practical-guide-445f388e8604"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">通过实现干净的架构和测试驱动，增强你的颤振开发过程…</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">在Flutter代码库中建立干净架构的完整过程</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">better编程. pub</p></div></div><div class="my l"><div class="ob l na nb nc my nd kp mp"/></div></div></a></div><p id="7934" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您有任何问题，请随时开始讨论。</p><p id="00a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>