<html>
<head>
<title>How To Use Stripe in React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React.js中使用Stripe</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-stripe-in-react-js-c209d0541fb4?source=collection_archive---------3-----------------------#2022-10-26">https://betterprogramming.pub/how-to-use-stripe-in-react-js-c209d0541fb4?source=collection_archive---------3-----------------------#2022-10-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7a8b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">React.js中对Stripe支付平台如何工作的深入探讨</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4c912bc68c1f285e0a4812477a12fde7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enYdp4lgdYIfkzOT1Q2FXg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片</p></figure><p id="8469" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">构建提供服务的web应用程序，如电子商务网站和其他软件即服务(SaaS) web应用程序，需要包含一种付款方法，使您能够安全地向用户收取费用。</p><p id="aaea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe支付平台是在web应用程序上安全处理用户支付的最佳媒介之一。在本文中，我将展示为什么它被列为最佳支付平台之一，以及如何在React.js应用程序中使用它。</p><h1 id="5274" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">什么是条纹</h1><p id="d1ba" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">Stripe是一个支付处理平台，充当第三方支付处理器或支付网关平台。因此，企业主使用Stripe来处理客户的借记卡和信用卡，以便在线支付商品或服务。</p><p id="c133" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe受到超过5亿个全球组织、公司和主要品牌的信任和使用，从初创品牌到财富500强。使用Stripe支付平台的一些最受欢迎的品牌是Lyft、亚马逊和Shopify。</p><p id="6d01" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe自创建以来吸引了大量用户的原因之一是它能够处理全球135种货币。</p><p id="7960" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，Stripe是一个易于使用的工具，可以轻松集成，因为它的在线开发工具JSON具有简单的指南，令人印象深刻，并且是公开的。</p><p id="1d02" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe可在许多交易中用于将资金从客户账户转移到企业所有者的银行账户。例如，在线零售商店使用Stripe通过处理器安全地捕获客户的借记卡或信用卡详细信息，该处理器将从客户账户向临时商家账户收集交易资金。最后，这些处理后的资金将被转移到企业所有者的银行账户。</p><p id="77b9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe兼容Python、PHP、Ruby等主流后端编程语言和Node.js等流行后端框架。</p><p id="b4f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要在应用程序中使用Stripe，您需要获得一个REST API密钥。当您开立条带帐户时，可以从您的仪表板访问这些API密钥，API密钥有两种类型。其中一个键是测试键，可以在开发人员环境中用于测试，而另一个键是在您希望应用程序投入使用时使用的。</p><p id="aab3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您将银行帐户链接到您的Stripe帐户并激活您的帐户时，将向您提供生产API密钥。</p><p id="b2f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在接下来的小节中，我将向您展示如何将Stripe支持的服务器端Node.js应用程序连接到前端React.js应用程序，但是首先，让我们创建并设置我们的项目。</p><p id="7fc9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在此之前，前往<a class="ae mo" href="https://dashboard.stripe.com/register?" rel="noopener ugc nofollow" target="_blank">dashboard.stripe.com/register.</a>创建您的stripe帐户。如果你想要一个活动的API密匙，你可以激活它，但是现在，测试API密匙就可以了</p><h1 id="ce7f" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">创建并设置您的项目</h1><p id="e4e0" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">第一步是创建一个项目文件夹。在这个文件夹中，您将创建一个作为项目前端的<code class="fe mp mq mr ms b">React.js</code>应用程序。因此，在与您的项目文件夹相同的级别运行下面的命令来创建<code class="fe mp mq mr ms b">React.js</code>应用程序:</p><p id="c36c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mp mq mr ms b">npx create-react-app Stripe-payment</code></p><p id="7904" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的命令将创建一个名为<code class="fe mp mq mr ms b">Stripe-payment</code>的文件夹，在您的项目文件夹中包含启动和运行React.js应用程序所需的所有文件和文件夹。</p><p id="2bd6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这个<code class="fe mp mq mr ms b">React.js</code>文件夹中，你需要安装一些软件包。这些包对于将<code class="fe mp mq mr ms b">React.js</code>应用程序连接到Stripe API非常重要。因此，运行下面的命令来安装这些软件包:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="43e0" class="mx ls iq ms b gy my mz l na nb">npm install --save @stripe/react-stripe-js @stripe/stripe-js</span></pre><p id="cafb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还需要一个后端应用程序作为您的服务器。在这种情况下，我们将使用Node.js。因此，在与您的<code class="fe mp mq mr ms b">React.js</code>应用程序相同的级别创建一个新文件夹，并将其命名为<code class="fe mp mq mr ms b">Server</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/0e055870aad52b5fdc4b4c37d8a95324.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*xjH7Jt1uBRfQSZOrLsy_JQ.png"/></div></figure><p id="ff2d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后导航到<code class="fe mp mq mr ms b">Server </code>文件夹，用下面的命令初始化node.js应用程序:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="73ce" class="mx ls iq ms b gy my mz l na nb">npm init --yes</span></pre><p id="a4f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的命令将创建一个package.json文件，其中包含默认设置，如包名、版本和许可。您还将安装一些包，使您能够在这个应用程序中为Stripe设置一个后端服务器。</p><p id="691d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以运行下面的命令来安装这些包:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="7564" class="mx ls iq ms b gy my mz l na nb">npm install body-parser cors dotenv stripe-js express</span></pre><p id="eb40" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">至此，我们完成了项目中重要内容的设置，下一步是创建服务器应用程序的前端。</p><h1 id="e080" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">为条带设置前端应用程序</h1><p id="6027" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">第一步是创建一个文件夹并命名为<code class="fe mp mq mr ms b">Components</code>，这个文件夹将包含我们前端应用程序中的组件。我们的应用程序将有一个<code class="fe mp mq mr ms b">PaymentForm</code>组件和一个<code class="fe mp mq mr ms b">Stripe </code>组件，在<code class="fe mp mq mr ms b">Components </code>文件夹中创建一个<code class="fe mp mq mr ms b">Stripe.jsx</code>文件和一个<code class="fe mp mq mr ms b">PaymentForm.jsx </code>文件。我们将从<code class="fe mp mq mr ms b">Stripe </code>组件开始，所以在<code class="fe mp mq mr ms b"> Stripe.jsx </code>文件中，添加下面的代码来创建一个<code class="fe mp mq mr ms b">Stripe </code>组件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="674b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这个组件中，您将使用条带<code class="fe mp mq mr ms b">Elements provider</code>包装PaymentForm组件。Stripe <code class="fe mp mq mr ms b">Elements provider</code>将允许你在<code class="fe mp mq mr ms b">PaymentForm </code>组件中使用Stripe <code class="fe mp mq mr ms b">Elements components</code>。您还需要初始化一个Stripe对象，为此，您将使用loadStripe，因此用下面的代码导入<code class="fe mp mq mr ms b">loadStripe </code>和<code class="fe mp mq mr ms b">Elements</code>提供程序:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="0654" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您可以使用<code class="fe mp mq mr ms b"> loadStripe</code>初始化stripe对象，方法是创建您的可发布密钥并将其从Stripe传递到在变量中调用的<code class="fe mp mq mr ms b">loadStripe </code>函数中。此外，您可以将<code class="fe mp mq mr ms b">PaymentForm </code>组件(我们尚未创建)导入到<code class="fe mp mq mr ms b"> Stripe </code>组件中，并用<code class="fe mp mq mr ms b">Elements provider</code>包装它。因此，将下面的代码添加到您的<code class="fe mp mq mr ms b">Stripe </code>组件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="dab9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请记住使用stripe中的可发布密钥。你可以从你的仪表板上得到你的可发布密钥，去开发者那里，在API密钥下检查，然后用我们的API密钥替换上面代码中的API密钥。</p><p id="a5da" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">至此，我们完成了<code class="fe mp mq mr ms b"> Stripe </code>组件，现在我们可以转到<code class="fe mp mq mr ms b">PaymentForm </code>组件，所以进入<code class="fe mp mq mr ms b">PaymentForm.jsx </code>文件并编写下面的代码来创建一个<code class="fe mp mq mr ms b">PaymentForm </code>组件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9861" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在PaymentForm组件中，我们将使用stripe中的元素创建一个支付表单，因此添加下面的代码来导入这些元素和axios，以便向后端服务器发出post请求:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="bb53" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您必须检查事务是否成功，因此使用<code class="fe mp mq mr ms b">useState</code>钩子创建<code class="fe mp mq mr ms b"> success </code>状态，然后您必须使用从stripe-react-js导入的useStripe钩子和<code class="fe mp mq mr ms b">Elements components</code>创建一个stripe变量。</p><p id="2e5d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还需要创建<code class="fe mp mq mr ms b"> elements</code>变量，您将在您的应用程序中使用该变量来收集和处理用户的付款细节，并且您将使用从stripe-react-js导入的<code class="fe mp mq mr ms b"> useElements</code>钩子来创建该变量。</p><p id="d87e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，在PaymentForm组件中添加下面的代码来创建<code class="fe mp mq mr ms b">success </code>状态、<code class="fe mp mq mr ms b">stripe </code>变量和<code class="fe mp mq mr ms b"> elements </code>变量:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="8bad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有了这些，我们可以创建一个<code class="fe mp mq mr ms b"> handleSubmit</code>函数，当用户提交支付表单时将调用该函数，但是现在，用下面的代码设置支付表单及其收集用户卡详细信息的字段:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="5bec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从上面的代码中，您检查了交易是否成功。如果交易不成功，您将继续显示支付表单，但是如果交易成功，您将显示“支付成功”文本。</p><p id="e09c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用下面的代码创建<code class="fe mp mq mr ms b">handleSubmit</code>函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="63df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从上面的代码中，您用自己创建的<code class="fe mp mq mr ms b"> stripe</code>变量创建了一个卡类型的支付方法。然后您检查交易是否成功，没有错误。如果没有错误，那么您的应用程序将向<code class="fe mp mq mr ms b">localhost:4000/payment</code> URL发送一个post请求，其中包含产品的金额。</p><p id="ba74" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe使用美分表示美元交易金额，因此您必须以美分输入等值的美元金额。因此，由于我们的产品售价为100美元，等价金额为10，000美分。如果有错误，那么您的应用程序将显示一条错误消息。</p><p id="86fb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，在<code class="fe mp mq mr ms b">PaymentForm.jsx</code>文件中，添加下面的代码，为您的支付表单提供一些基本样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="843f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后用下面的代码在<code class="fe mp mq mr ms b">index.css</code>文件中为整个应用程序添加一个通用样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="0793" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了呈现您的表单，您现在可以在<code class="fe mp mq mr ms b">App.js</code>中导入<code class="fe mp mq mr ms b">Stripe</code>组件，然后如果客户点击购买您的产品，就有条件地呈现它。要检查客户是否点击购买了您的产品，您还需要为此创建一个状态。</p><p id="052a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以调用这个状态<code class="fe mp mq mr ms b">showForm.</code>这个状态最初会被设置为false，但是当客户点击<code class="fe mp mq mr ms b">BUY</code>按钮时，它会被设置为true，然后付款表单就会出现。</p><p id="b17d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你还需要你的产品的形象。你的顾客需要看到他们将要购买的东西。如果您已经有一个产品页面，则可以使用产品页面来实现此目的。否则，请下载您要销售的图片，然后创建一个资产文件夹，您可以在其中拖放该图片:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bc45a100a4793887445d5e7777fb893c.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*2-zho6zT_vCoWZ0jR7W_6g.png"/></div></figure><p id="2f6c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，导入<code class="fe mp mq mr ms b">useState, Stripe</code>组件，并在您的<code class="fe mp mq mr ms b">App.js</code>文件中使用下面的代码导入您想要销售的图像:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="d6bb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您可以创建<code class="fe mp mq mr ms b"> showForm</code>状态，并使用它有条件地显示带有以下代码的付款表单:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="5d19" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您现在可以保存<code class="fe mp mq mr ms b"> App.js, Stripe.jsx, and PaymentForm.jsx</code>文件，然后使用下面的命令运行您的应用程序:<br/> <code class="fe mp mq mr ms b">npm start</code></p><p id="125d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您应该会在浏览器中看到类似这样的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/034e4d828e3286a503dc054b89e09b97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRXzovIo4gKvMq87T_W1bg.png"/></div></div></figure><p id="324e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你点击“购买”按钮，你会看到付款表格，然后你会看到类似下面的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/64520ec1f6c4f395f592e54d504c6607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6XvEM-Upv4MZqhbp6imsmw.png"/></div></div></figure><p id="4b2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在构建后端服务器之前，此表单不起作用。但是我们已经完成了前端。您现在可以打开服务器文件夹并创建一个<code class="fe mp mq mr ms b">index.js</code>文件</p><h1 id="4bab" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">为条带设置后端应用程序</h1><p id="13ea" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我们将从导入之前安装在服务器文件夹中的那些库开始这一部分。我们将使用它们创建一个将在<code class="fe mp mq mr ms b">port 4000</code>上运行的服务器应用程序。因此，使用下面的代码来导入库:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e5b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好了，使用上面的代码，您在第1行导入了express库。您利用express库创建了一个服务器应用程序，然后在第2行，您导入了<code class="fe mp mq mr ms b">dotenv</code>库，您将使用它在一个环境变量文件中存储您的密钥。您还导入了<code class="fe mp mq mr ms b"> stripe</code>库，您将使用它来创建您的支付意向。最后，导入<code class="fe mp mq mr ms b">cors</code>库，这对前端应用程序和服务器应用程序之间的资源共享很重要。</p><p id="546f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mp mq mr ms b">index.js</code>文件中的下一步是用express库创建一个服务器应用程序，然后利用这个服务器应用程序中的body-parser和cors库，所以将下面的代码添加到您的<code class="fe mp mq mr ms b">index.js</code>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="bd58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在您有了一个正在运行的服务器应用程序，它使用<code class="fe mp mq mr ms b">body-parser</code>库发送JSON响应，使用<code class="fe mp mq mr ms b">cors</code>进行资源共享。另外，您的服务器应用程序正在运行<code class="fe mp mq mr ms b">port 4000</code>。因此，如果您运行命令<code class="fe mp mq mr ms b">node index.js</code>，它将触发您的<code class="fe mp mq mr ms b">index.js</code>文件，您应该在终端的控制台中看到“服务器正在运行”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9f8bb679d9173970973664f338c790b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*AsW5jEBcHkXeWc_M7JOjwA.png"/></div></figure><p id="7dac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很好。现在，您可以通过添加下面的代码来创建post端点，该端点将创建您的支付意图和客户交易的详细信息。就在那下面，您在<code class="fe mp mq mr ms b">cors </code>库中使用的代码行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="bd7c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从上面的代码中，您创建了一个支付帖子URL并向其传递了<code class="fe mp mq mr ms b"> cors</code>库和一个箭头函数。在这个箭头函数中，您创建了一个try，catch块。</p><p id="c807" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在try块下，您创建了一个支付描述，其中包含交易金额和其他有关用户交易成功的重要细节。因此，现在保存<code class="fe mp mq mr ms b">index.js</code>文件并运行下面的命令来启动您的服务器应用程序:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="6595" class="mx ls iq ms b gy my mz l na nb">node index.js</span></pre><p id="4c2c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您的服务器仍在运行，您可以取消它并运行上面的命令。转到浏览器并刷新您的<code class="fe mp mq mr ms b">React.js</code>应用程序。</p><p id="4fc7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">填写条纹测试卡号<code class="fe mp mq mr ms b">4242 4242 4242 4242</code>，作为您的卡号，并随机选择一个日期作为您的卡到期日期，然后424作为您的卡CVC号。</p><p id="7ec8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当你点击“购买”按钮，你会看到“付款成功”的文字，这意味着你的交易是成功的。</p><p id="b267" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是如果你尝试使用另一个随机数作为你的卡号，你会在控制台得到一个错误。这是因为您仍处于测试模式。默认情况下，当您创建一个Stripe帐户而没有使用您的银行帐户激活它时，您将获得一个测试帐户进行测试。</p><p id="3101" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您想要一个live帐户，您需要激活您的Stripe帐户并获得一个live API密钥。</p><p id="733a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，如果您返回到您的Stripe控制面板，并转到您的付款页面，您将看到您的用户已经完成的所有交易，包括您刚刚完成的交易:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/4eddab1ccc56437965c6c0f7094a1a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gPKl7kucCPwNwZABNosrNw.png"/></div></div></figure><p id="6d06" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您单击任何一项交易，就会看到每项交易的详细描述:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/3f0f76ab3531f5992655443131ed4208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PqX3fL70IMb0g9KEtUwtPg.png"/></div></div></figure><p id="1091" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">右上角还有一个退款按钮，如果交易出现问题，您可以用它来退还客户的资金。</p><h1 id="6d5b" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">结论</h1><p id="5aa3" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">Stripe是一个重要的支付处理平台，帮助企业主轻松地从客户那里收取在线商品和服务的费用。</p><p id="77d5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe易于使用，可以与流行的后端语言和框架一起使用，我刚刚向您展示了如何在连接到Node.js后端服务器的React.js应用程序中使用它。</p><p id="0f9f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我还讨论了Stripe以及它如何帮助企业更快发展。因此，在本文中，您学习了如何在<code class="fe mp mq mr ms b">React.js</code>中使用Stripe，以及如何在Node.js后端应用程序中设置Stripe。</p><p id="8763" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢您通读这篇文章。希望对你有帮助。如果你有任何问题或建议，请在评论区留下。</p></div></div>    
</body>
</html>