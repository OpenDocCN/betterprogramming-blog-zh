<html>
<head>
<title>6 Ways To Configure Global Styles for Storybook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为故事书配置全局样式的6种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/6-ways-to-configure-global-styles-for-storybook-faa1517aaf1a?source=collection_archive---------0-----------------------#2022-03-22">https://betterprogramming.pub/6-ways-to-configure-global-styles-for-storybook-faa1517aaf1a?source=collection_archive---------0-----------------------#2022-03-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f9d1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更好地使用故事书的详细指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f4a79643ee4c935f34dce32b74fbbc6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tkPXHeJNVFQYiP4GbSHzwg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0700" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>是一个开源工具，用于构建独立的UI组件和页面。这允许我们一次处理一个组件。它简化了UI开发、测试和文档。</p><p id="b0f7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经写了关于<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/an-in-depth-look-at-storybook-6-8c44cd6895ee">故事书</a>及其特性——零配置设置、动态组件编辑、多故事书合成和文档改进。</p><p id="df39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为故事书配置全局样式是一项常见的任务，例如背景色、颜色、字体系列和字体大小。在本文中，我们以设置背景颜色为例，用6种不同的方法来完成这项任务。为了区分解决方案，每种方法都设置了独特的背景颜色。在这个过程中，我们会看到哪种方法具有更高的优先级。</p><ul class=""><li id="4e8d" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated"><em class="me">粉色背景</em> : <a class="ae lu" href="#c26c" rel="noopener ugc nofollow">在</a> <code class="fe mf mg mh mi b"><a class="ae lu" href="#c26c" rel="noopener ugc nofollow">preview-head.html</a></code>中使用样式表。</li><li id="9329" class="lv lw it la b lb mj le mk lh ml ll mm lp mn lt ma mb mc md bi translated"><em class="me">巧克力背景</em> : <a class="ae lu" href="#f95e" rel="noopener ugc nofollow">在</a> <code class="fe mf mg mh mi b"><a class="ae lu" href="#f95e" rel="noopener ugc nofollow">main.js</a></code>中配置 <code class="fe mf mg mh mi b"><a class="ae lu" href="#f95e" rel="noopener ugc nofollow">previewHead</a></code> <a class="ae lu" href="#f95e" rel="noopener ugc nofollow">。</a></li><li id="c45c" class="lv lw it la b lb mj le mk lh ml ll mm lp mn lt ma mb mc md bi translated"><em class="me">黄色背景</em>:在 <code class="fe mf mg mh mi b"><a class="ae lu" href="#3653" rel="noopener ugc nofollow">preview.js</a></code>中<a class="ae lu" href="#3653" rel="noopener ugc nofollow">导入样式表。</a></li><li id="2668" class="lv lw it la b lb mj le mk lh ml ll mm lp mn lt ma mb mc md bi translated"><em class="me">紫色背景</em> : <a class="ae lu" href="#2ae1" rel="noopener ugc nofollow">在</a> <code class="fe mf mg mh mi b"><a class="ae lu" href="#2ae1" rel="noopener ugc nofollow">main.js</a></code>中配置 <code class="fe mf mg mh mi b"><a class="ae lu" href="#2ae1" rel="noopener ugc nofollow">previewBody</a></code> <a class="ae lu" href="#2ae1" rel="noopener ugc nofollow">。</a></li><li id="f089" class="lv lw it la b lb mj le mk lh ml ll mm lp mn lt ma mb mc md bi translated"><em class="me">米色背景</em> : <a class="ae lu" href="#d359" rel="noopener ugc nofollow">在</a> <code class="fe mf mg mh mi b"><a class="ae lu" href="#d359" rel="noopener ugc nofollow">preview-body.html</a></code>内设置样式。</li><li id="0f9c" class="lv lw it la b lb mj le mk lh ml ll mm lp mn lt ma mb mc md bi translated"><em class="me">蓝绿色背景</em> : <a class="ae lu" href="#5685" rel="noopener ugc nofollow">在</a> <code class="fe mf mg mh mi b"><a class="ae lu" href="#5685" rel="noopener ugc nofollow">preview.js</a></code>中配置装饰器。</li></ul><p id="00a6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们详细了解每种方法的工作原理。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="cd6e" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">在创建React环境中设置故事书</h1><p id="598e" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">我们使用<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2"> Create React App </a>作为探索故事书的基础。以下命令创建一个React项目:</p><pre class="kj kk kl km gt ns mi nt nu aw nv bi"><span id="edcf" class="nw mw it mi b gy nx ny l nz oa">npx create-react-app react-storybook<br/>cd react-storybook</span></pre><p id="80f5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输入命令<code class="fe mf mg mh mi b">npx sb init</code>，故事书就安装好了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/3f92cd613f209a8eecde248b8bdb8605.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/0*4qc8AnaLYxT1PbXe.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6a1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">键入命令<code class="fe mf mg mh mi b">npm run storybook</code>，示例故事书在<code class="fe mf mg mh mi b">http://localhost:6006</code>运行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/3e1ae437074965df5240cb54bdc4ae7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nIk9Hnk-3NXjPsRHTnvTmw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="653a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认情况下，背景颜色是白色。我们想把它配置成不同的颜色，而不是每个故事都设置它。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="c26c" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">粉色背景:在preview-head.html使用样式表</h1><p id="a9b0" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">在Storybook中，故事呈现在一个特定的“预览”iframe中(<code class="fe mf mg mh mi b">Canvas</code>选项卡)。Storybook web应用程序读取<code class="fe mf mg mh mi b">.storybook/preview-head.html</code>(如果它存在的话),这直接控制呈现的HTML中的<code class="fe mf mg mh mi b">&lt;head&gt;</code>元素。</p><p id="917c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如下创建<code class="fe mf mg mh mi b">.storybook/preview-head.html</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="cff7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第1行为外部资源、样式表或站点图标定义了<code class="fe mf mg mh mi b">&lt;link&gt;</code>元素。<code class="fe mf mg mh mi b">href</code>指定链接资源的URL，定义为<code class="fe mf mg mh mi b">public/style.css</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="be71" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重启故事书，我们看到背景变成了<code class="fe mf mg mh mi b">pink</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/7fcd54a8c0e9af9a988672d2fd0eb6bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jbOB-mBrg6aKkO1iZszJEA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b094" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以验证全局风格的改变已经应用到每个故事中。</p><p id="20dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，样式更改不适用于任何文档页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/92f1b4664a8be8fa55e58e11f1d9d8fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLIeOxiA06LvLZHqyjs3fw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7900" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是预期的行为。对于每个故事，选择<code class="fe mf mg mh mi b">Docs</code>选项卡，我们可以验证降价页面不受故事样式的影响。</p><p id="567b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，我们把一个故事放进<code class="fe mf mg mh mi b">src/stories/introduction.stories.dx</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="544f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">文档会自动转换为文章。然后，<code class="fe mf mg mh mi b">Canvas</code>选项卡显示粉色背景。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/8ce84ee505c67e9075e91f36079650d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JT5vygCFtIx2NMX7HJjynA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="f95e" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">巧克力背景:在main.js中配置previewHead</h1><p id="3b27" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">在<code class="fe mf mg mh mi b">.storybook</code>文件夹中，有一个名为<code class="fe mf mg mh mi b">main.js</code>的文件，它控制故事书服务器的行为。该配置文件是一个预置文件，具有控制<code class="fe mf mg mh mi b">stories</code>、<code class="fe mf mg mh mi b">addons</code>、<code class="fe mf mg mh mi b">webpackFinal</code>、<code class="fe mf mg mh mi b">babel</code>、<code class="fe mf mg mh mi b">framework</code>等的界面。</p><p id="c41f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是<code class="fe mf mg mh mi b">.storybook/main.js</code>的默认内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="c940" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也可以使用在<code class="fe mf mg mh mi b">main.js</code>文件中定义的预置以编程方式修改预览头HTML。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="b0a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">添加第16–23行是为了用<code class="fe mf mg mh mi b">chocolate</code>背景覆盖现有的<code class="fe mf mg mh mi b">previewHead</code>。</p><p id="e267" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为样式元素(第18–22行)放在现有的<code class="fe mf mg mh mi b">head</code>(第17行)之后。新样式覆盖了<code class="fe mf mg mh mi b">head</code>中的现有样式。</p><p id="35c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重启故事书，我们看到背景变成了<code class="fe mf mg mh mi b">chocolate</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/4baafa210b2b1989c25c03679e960d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrRMBPqj3wSQAf2GxQC6Nw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="3653" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">黄色背景:在preview.js中导入样式表</h1><p id="8db6" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">在<code class="fe mf mg mh mi b">.storybook</code>文件夹中，有一个名为<code class="fe mf mg mh mi b">preview.js</code>的文件，它为装饰器、参数和全局类型设置全局设置。</p><p id="76e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是<code class="fe mf mg mh mi b">.storybook/preview.js</code>的默认内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="b23b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建样式表，<code class="fe mf mg mh mi b">.storybook/style.css</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="e893" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将该样式文件导入<code class="fe mf mg mh mi b">.storybook/preview.js</code>(第1行):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="f3f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该导入优先于<code class="fe mf mg mh mi b">head</code>样式。</p><p id="6f7b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">刷新</strong>故事书，我们看到背景变成了<code class="fe mf mg mh mi b">yellow</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/260ef435f7cce9c3f0a80acbc33ab29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8WLEe3CfrBWiUy82yndh-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="2ae1" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">紫色背景:在main.js中配置previewBody</h1><p id="718d" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">与<code class="fe mf mg mh mi b">previewHead</code>类似，我们可以使用<code class="fe mf mg mh mi b">main.js</code>文件中定义的预置以编程方式修改预览体HTML。</p><p id="314e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">建议在<code class="fe mf mg mh mi b">&lt;body&gt;</code>开始之前声明CSS。因此，造型应该设置在<code class="fe mf mg mh mi b">previewHead</code>中，而不是<code class="fe mf mg mh mi b">previewBody</code>中。</p><p id="d0c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，它仍然有效。解析正文样式时，浏览器会重新呈现页面。</p><p id="fa7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是修改后的<code class="fe mf mg mh mi b">./sotrybook/main.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="feec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">添加第24–31行，用<code class="fe mf mg mh mi b">purple</code>背景覆盖现有的<code class="fe mf mg mh mi b">previewBody</code>。</p><p id="1017" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为CSS应该在<code class="fe mf mg mh mi b">&lt;body&gt;</code>开始之前声明，所以样式元素(第25–29行)放在现有的<code class="fe mf mg mh mi b">body</code>(第30行)之前。</p><p id="bcf3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重启故事书，我们看到背景变成了<code class="fe mf mg mh mi b">purple</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/6f1ee4cb5d5051b06025061ccacbe490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Tq0NuV4HFhwtmIQWKOFWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="d359" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">米色背景:preview-body.html内部设置风格</h1><p id="8c9d" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">类似于<code class="fe mf mg mh mi b">preview-head.html</code>。Storybook web应用程序读取<code class="fe mf mg mh mi b">.storybook/preview-body.html</code>(如果它存在的话),这直接控制呈现的HTML中的<code class="fe mf mg mh mi b">&lt;body&gt;</code>元素。</p><p id="a8f4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经说过，造型应该设置在头部，即<code class="fe mf mg mh mi b">preview-head.html</code>，而不是<code class="fe mf mg mh mi b">preview-body.html</code>。</p><p id="66e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，它仍然有效。</p><p id="feff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如下创建<code class="fe mf mg mh mi b">.storybook/preview-body.html</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="a46f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重启故事书，我们看到背景变成了<code class="fe mf mg mh mi b">beige</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/0f252e98b227b7bac5a17b90491e6557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Y_BUwm1d-NyH44SC7gMsA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="5685" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">海蓝宝石背景:在preview.js中配置装饰器。</h1><p id="411b" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">装饰器是一种用额外的“呈现”功能包装故事的方式。自然地，我们可以使用装饰器用额外的样式、额外的标记、上下文模仿或任何东西来包装故事。</p><p id="dc8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是改装过的<code class="fe mf mg mh mi b">./storybook/preview.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="5499" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第13–17行定义了装饰器<code class="fe mf mg mh mi b">withBackground</code>，它定义了html背景色(第14行)和正文背景色(第15行)。由于这是一个特设(<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/headless-ui-components-a-journey-with-high-order-components-render-props-and-custom-hooks-811c9677b4cf">高阶组件</a>)，有许多可能的方式来设置造型。</p><p id="8ea6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第19行用<code class="fe mf mg mh mi b">withBackground</code>配置<code class="fe mf mg mh mi b">decorators</code>。</p><p id="2c87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">刷新</strong>故事书，我们看到背景变成了<code class="fe mf mg mh mi b">aquamarine</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/05991bf29c3ee4155b6157dc74e81a92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35LhZI9ZsxDckC8XZVQyuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="9299" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">结论</h1><p id="30dd" class="pw-post-body-paragraph ky kz it la b lb nn ju ld le no jx lg lh np lj lk ll nq ln lo lp nr lr ls lt im bi translated">我们已经通过6种方式来配置Storybook的全局样式。不同的背景颜色用于显示这些解决方案的优先顺序。</p><p id="c7fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个过程中，我们看了<code class="fe mf mg mh mi b">main.js</code>、<code class="fe mf mg mh mi b">preview.js</code>、<code class="fe mf mg mh mi b">preview-head.html</code>和<code class="fe mf mg mh mi b">preview-body.html</code>。在这些文件中，最好在<code class="fe mf mg mh mi b">head</code>中设置样式，而不是在<code class="fe mf mg mh mi b">body</code>中。通过这种方式，可以在CSS呈现之前提前加载样式，以避免可能出现的空白屏幕。此外，它避免了浏览器在解析body中声明的样式时重新呈现页面。</p><p id="2902" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有不同的方式来设计故事书，导入，亵渎，链接元素和样式元素。其中，我们更喜欢进口方式。它在<code class="fe mf mg mh mi b">preview.js</code>中导入一个全局样式文件。这很简单，更改是实时加载到故事书中的(只需要刷新，而不是重启)。</p><p id="f952" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选哪条路？这取决于具体的Web应用和个人偏好。毕竟有6种方式可以选择。</p><p id="d512" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以看看<a class="ae lu" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒体文章</a>。</p><p id="e2bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意:感谢泰勒·劳巴赫和塞巴斯蒂安·凯塞尔给我分配了为Storybook配置全局样式的任务。</p></div></div>    
</body>
</html>