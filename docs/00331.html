<html>
<head>
<title>Compose React Hooks Like Composing React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像编写React组件一样编写React挂钩</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/compose-react-hooks-like-composing-react-components-892c23530432?source=collection_archive---------1-----------------------#2019-04-18">https://betterprogramming.pub/compose-react-hooks-like-composing-react-components-892c23530432?source=collection_archive---------1-----------------------#2019-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3c8c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么定制挂钩如此强大</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b709bdff5b7562de6c15cdeab98343e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zC_n4m8fnaQe255fTX3GyA.png"/></div></div></figure><p id="0a26" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇短文展示了代码示例，说明了<a class="ae lq" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> React Hooks </a>在组成方面如何类似于组件。让我们直接进入代码:</p><h1 id="8196" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">反应组分</h1><p id="2bd7" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">让我们用一个简单的例子。这里有一个组件:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="3fb3" class="mt ls it mp b gy mu mv l mw mx">const <strong class="mp iu">Person</strong> = ({ person }) =&gt; (<br/>  &lt;div&gt;<br/>    &lt;div className="personFirstName"&gt;<br/>      &lt;span&gt;First Name:&lt;span&gt;<br/>      &lt;span&gt;{person.firstName}&lt;/span&gt;<br/>    &lt;/div&gt;<br/>    &lt;div className="personLastName"&gt;<br/>      &lt;span&gt;Last Name:&lt;span&gt;<br/>      &lt;span&gt;{person.lastName}&lt;/span&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>);</span></pre><p id="1054" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个组件有点大，所以让我们把它分成几个功能，然后组合起来:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="3278" class="mt ls it mp b gy mu mv l mw mx">const <strong class="mp iu">FirstName</strong> = ({ name }) =&gt; (<br/>  &lt;div className="personFirstName"&gt;<br/>    &lt;span&gt;First Name:&lt;span&gt;<br/>    &lt;span&gt;{name}&lt;/span&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="ee54" class="mt ls it mp b gy my mv l mw mx">const <strong class="mp iu">LastName</strong> = ({ name }) =&gt; (<br/>  &lt;div className="personLastName"&gt;<br/>    &lt;span&gt;Last Name:&lt;span&gt;<br/>    &lt;span&gt;{name}&lt;/span&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="143b" class="mt ls it mp b gy my mv l mw mx">const <strong class="mp iu">Person</strong> = ({ person }) =&gt; (<br/>  &lt;div&gt;<br/>    &lt;<strong class="mp iu">FirstName</strong> name={person.<strong class="mp iu">firstName</strong>} /&gt;<br/>    &lt;<strong class="mp iu">LastName</strong> name={person.<strong class="mp iu">lastName</strong>} /&gt;<br/>  &lt;/div&gt;<br/>);</span></pre><p id="cca1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，它看起来很有条理。我们为什么要这么做？因为，现在我们可以在其他组件中使用<code class="fe mz na nb mp b">FirstName</code>组件了。简而言之，可重用性。</p><h1 id="edfc" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">反应钩</h1><p id="5efe" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">React Hooks呢？假设我们有<code class="fe mz na nb mp b">usePerson</code>钩子，它返回了<code class="fe mz na nb mp b">Person</code>对象。它是如何实现的并不重要，但是举个例子，我们可以假设它和<code class="fe mz na nb mp b">useContext</code>是一个简单的具体案例。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="39b8" class="mt ls it mp b gy mu mv l mw mx">const <strong class="mp iu">Person</strong> = () =&gt; {<br/>  const person = <strong class="mp iu">usePerson</strong>();<br/>  const firstName = person.firstName;<br/>  const lastName = person.lastName;<br/>  return &lt;div&gt;{firstName}{' '}{lastName}&lt;/div&gt;<br/>};</span></pre><p id="af89" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这过于简化了，但是让我们把它分解成几个函数，然后组合起来。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="7e7a" class="mt ls it mp b gy mu mv l mw mx">const <strong class="mp iu">useFirstName</strong> = () =&gt; {<br/>  const person = <strong class="mp iu">usePerson</strong>();<br/>  return person.firstName;<br/>};</span><span id="5882" class="mt ls it mp b gy my mv l mw mx">const <strong class="mp iu">useLastName</strong> = () =&gt; {<br/>  const person = <strong class="mp iu">usePerson</strong>();<br/>  return person.lastName;<br/>};</span><span id="7e17" class="mt ls it mp b gy my mv l mw mx">const <strong class="mp iu">Person</strong> = () =&gt; {<br/>  const firstName = <strong class="mp iu">useFirstName</strong>();<br/>  const lastName = <strong class="mp iu">useLastName</strong>();<br/>  return &lt;div&gt;{firstName}{' '}{lastName}&lt;/div&gt;;<br/>};</span></pre><p id="c81b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望你明白我的意思。现在，你可以在其他组件中重用<code class="fe mz na nb mp b">useFirstName</code>钩子。</p><h1 id="8d26" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">结论</h1><p id="c94e" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">构图很重要。一个组件可以用其他组件构建，一个钩子也可以用其他钩子构建。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="5ff0" class="lr ls it bd lt lu nj lw lx ly nk ma mb jz nl ka md kc nm kd mf kf nn kg mh mi bi translated">附录</h1><p id="96e7" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们在组件方面有<code class="fe mz na nb mp b">children</code>。钩子中的等价物是什么？我不是100%确定这一点，但它可能是钩子工厂。或者说，这只是它的一个变种。这是上面例子的代码。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="a5e8" class="mt ls it mp b gy mu mv l mw mx">const <strong class="mp iu">createPersonHooks</strong> = (<strong class="mp iu">usePerson</strong>) =&gt; {<br/>  const <strong class="mp iu">useFirstName</strong> = () =&gt; {<br/>    const person = <strong class="mp iu">usePerson</strong>();<br/>    return person.firstName;<br/>  };<br/>  const <strong class="mp iu">useLastName</strong> = () =&gt; {<br/>    const person = <strong class="mp iu">usePerson</strong>();<br/>    return person.lastName;<br/>  };<br/>  return { <strong class="mp iu">useFirstName</strong>, <strong class="mp iu">useLastName</strong> };<br/>};</span></pre><p id="88fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">再说一次，我不是很确定，只是一个想法。Constate似乎也采取了类似的方法。</p></div></div>    
</body>
</html>