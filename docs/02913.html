<html>
<head>
<title>How To Use For Loops Better in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中更好地使用For循环</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-for-loops-better-in-python-1dfbc3d9e91f?source=collection_archive---------9-----------------------#2020-01-08">https://betterprogramming.pub/how-to-use-for-loops-better-in-python-1dfbc3d9e91f?source=collection_archive---------9-----------------------#2020-01-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2058" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">几个可以改善循环逻辑的函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bd7dafd0a217859fa92e4465f831a1cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhXQthIgYeQeeMVlBgXihw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奥利弗·黑尔在<a class="ae ky" href="https://unsplash.com/s/photos/loop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="82f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们在Python中对一个序列执行一些动作时，我们大多数时候使用<code class="fe lv lw lx ly b">for</code>循环。序列是一个通用术语，可以指一个列表、一个元组、一个字典、一个集合或者一个字符串，所有这些都可以在Python中的一个<code class="fe lv lw lx ly b">for</code>循环中使用。这里有一个我们通常如何使用<code class="fe lv lw lx ly b">for</code>循环的例子。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="f229" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; students = ["John", "Mike", "Sandra", "Jennifer"]<br/>&gt;&gt;&gt; for student in students:<br/>...     print(student)<br/>... <br/>John<br/>Mike<br/>Sandra<br/>Jennifer</span></pre><p id="5260" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了这个简单的用例之外，还有几个内置函数，您可以使用<code class="fe lv lw lx ly b">for</code>循环将它们与序列的迭代一起使用。如果使用得当，这些函数可以让您的代码更加整洁。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="82a3" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">1.项目()和值()</h1><p id="327d" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">假设我们有一本像下面这样的字典。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="52cd" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; scores = {"John": 94, "Mike": 95, "Sandra": 98, "Jennifer": 95}</span></pre><p id="0273" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您迭代这个字典时，常规的<code class="fe lv lw lx ly b">for</code>循环将只检索字典的键。在这种情况下，它将只打印出每个项目的名称。它的功能与迭代列表的<code class="fe lv lw lx ly b">keys</code>相同。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="f008" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for score in scores:<br/>...     print(score)<br/>... <br/>Mike<br/>John<br/>Jennifer<br/>Sandra</span></pre><p id="cd4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，我们可以使用items()函数，这将使我们能够访问每个项目的键和值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="29b2" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for score in scores.items():<br/>...     print(score)<br/>... <br/>('Mike', 95)<br/>('John', 94)<br/>('Jennifer', 95)<br/>('Sandra', 98)</span></pre><p id="76f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以更进一步，命名元组的项，以便可以直接访问这两个项。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="dd42" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for name, score in scores.items():<br/>...     print("Student Name: " + name + ", Score: " + str(score))<br/>... <br/>Student Name: Mike, Score: 95<br/>Student Name: John, Score: 94<br/>Student Name: Jennifer, Score: 95<br/>Student Name: Sandra, Score: 98</span></pre><p id="cca9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，如果您只对字典的值感兴趣，您可以简单地使用<code class="fe lv lw lx ly b">values()</code>函数。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3468" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for score in scores.values():<br/>...     print(score)<br/>... <br/>95<br/>94<br/>95<br/>98</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="88bc" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">2.枚举()</h1><p id="f426" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">假设我们有一个如下的列表。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="26ae" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; grades = ["Freshman", "Sophomore", "Junior", "Senior"]</span></pre><p id="a7af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，我们希望访问索引和项目本身。在这种情况下，您可以使用<code class="fe lv lw lx ly b">enumerate()</code>函数，将列表作为参数传递。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9708" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for grade in enumerate(grades):<br/>...     print(grade)<br/>... <br/>(0, 'Freshman')<br/>(1, 'Sophomore')<br/>(2, 'Junior')<br/>(3, 'Senior')</span></pre><p id="c50a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似地，如果引用元组的项，可以分别访问索引和项。此外，您可以指定enumerate()函数的起始索引，这在我们的例子中非常方便。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="ee0e" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for year, name in enumerate(grades, start=1):<br/>...     print("Year " + str(year) + ": " + name)<br/>... <br/>Year 1: Freshman<br/>Year 2: Sophomore<br/>Year 3: Junior<br/>Year 4: Senior</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c488" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">3.反转()</h1><p id="8922" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">假设我们有一个如下的列表。这个列表显示了按时间顺序到达教室的学生。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="aa76" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; arrived_students = ["John", "Mike", "Sandra", "Jennifer"]</span></pre><p id="27a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后老师想检查他们的作业，从最晚到达的学生开始。所以可以这样做。我们可以简单地用列表调用<code class="fe lv lw lx ly b">reversed()</code>函数。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="0d6d" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for student in reversed(arrived_students):<br/>...     print(student)<br/>... <br/>Jennifer<br/>Sandra<br/>Mike<br/>John</span></pre><p id="b7ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的一点是，您希望区分<code class="fe lv lw lx ly b">reversed()</code>函数和<code class="fe lv lw lx ly b">reverse()</code>函数，后者反转给定列表的顺序，而不返回列表本身。换句话说，你可以调用<code class="fe lv lw lx ly b">arrived_students.reverse()</code>，但是不能通过调用<code class="fe lv lw lx ly b">for student in arrived_students.reverse()</code>直接迭代。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="6f07" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">4.已排序()</h1><p id="fa58" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">假设我们有一个如下的列表。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="0fa9" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; students = ["John", "Mike", "Sandra", "Jennifer"]</span></pre><p id="7aa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">教师希望根据学生的姓名对他们进行分类，并执行一些操作(例如，问一个问题)。这可以通过使用<code class="fe lv lw lx ly b">sorted()</code>函数来完成，方法是将学生列表作为参数传入，这将生成一个按升序排列学生姓名的列表。您可以选择为<code class="fe lv lw lx ly b">reverse</code>参数设置一个布尔值来请求升序或降序，就像这样:<code class="fe lv lw lx ly b">sorted(students, reverse=True)</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e40a" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for student in sorted(students):<br/>...     print(student)<br/>... <br/>Jennifer<br/>John<br/>Mike<br/>Sandra</span></pre><p id="37f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果列表中的项目是字典，如下所示，会怎么样？</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a91a" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; students = [{"name": "John", "id": 1}, {"name": "Mike", "id": 4}, {"name": "Sandra", "id": 2}, {"name": "Jennifer", "id": 3}]</span></pre><p id="47b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本质上，我们正在对字典列表进行排序。这可以通过使用<code class="fe lv lw lx ly b">sorted()</code>功能中的<code class="fe lv lw lx ly b">lambda</code>设置<code class="fe lv lw lx ly b">key</code>参数来完成。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3703" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for student in sorted(students, key = lambda i: i["id"], reverse=True):<br/>...     print(student)<br/>... <br/>{'name': 'Mike', 'id': 4}<br/>{'name': 'Jennifer', 'id': 3}<br/>{'name': 'Sandra', 'id': 2}<br/>{'name': 'John', 'id': 1}</span></pre><p id="9fee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们请求使用字典中的<code class="fe lv lw lx ly b">id</code>键按照<code class="fe lv lw lx ly b">reverse</code>顺序对列表进行排序，这在打印输出中可以清楚地反映出来。</p><p id="5fd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想使用多个键进行排序，您只需将key参数更改为类似于<code class="fe lv lw lx ly b">key = lambda i: (i["id"], i["name"])</code>的值。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="2141" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">5.过滤器()</h1><p id="c2fe" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">假设我们仍然使用下面的学生列表。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3c7b" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; students = [{"name": "John", "id": 1}, {"name": "Mike", "id": 4}, {"name": "Sandra", "id": 2}, {"name": "Jennifer", "id": 3}]</span></pre><p id="5aa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只想检索id号为偶数的学生的信息。这是我们可以方便地通过使用lambda使用<code class="fe lv lw lx ly b">filter()</code>函数来完成的。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="13bd" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for student in filter(lambda i: i["id"] % 2 == 0, students):<br/>...     print(student)<br/>... <br/>{'name': 'Mike', 'id': 4}<br/>{'name': 'Sandra', 'id': 2}</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3a95" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">6.zip()</h1><p id="c0db" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">假设我们有下面两个列表。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1786" class="md me it ly b gy mf mg l mh mi">names = ["John", "Mike", "Sandra", "Jennifer"]<br/>ids = [1, 3, 2, 4]</span></pre><p id="6ba8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b">zip()</code>功能，我们可以方便地使用两个列表中的信息。同样，和以前一样，如果你给元组分配了变量名，你就可以直接访问它们，就像<code class="fe lv lw lx ly b">for name, id in zip(names, ids)</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9845" class="md me it ly b gy mf mg l mh mi">&gt;&gt;&gt; for student in zip(names, ids):<br/>...     print(student)<br/>... <br/>('John', 1)<br/>('Mike', 3)<br/>('Sandra', 2)<br/>('Jennifer', 4)</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="aae2" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">结论</h1><p id="1734" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在我们的代码中,<code class="fe lv lw lx ly b">for</code>循环使用得非常频繁。通过在for循环中使用上述函数，您可以潜在地减少代码长度，使其更容易阅读，也更有趣！</p><p id="172b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PS:有一篇很有启发性的<a class="ae ky" href="https://medium.com/better-programming/how-to-replace-your-python-for-loops-with-map-filter-and-reduce-c1b5fa96f43a" rel="noopener">文章</a>是由<a class="ae ky" href="https://medium.com/@jhsu98" rel="noopener"> Jonathan Hsu </a>在Medium上写的，建议用<code class="fe lv lw lx ly b">map()</code>、<code class="fe lv lw lx ly b">filter()</code>和<code class="fe lv lw lx ly b">reduce()</code>函数替换<code class="fe lv lw lx ly b">for</code>循环。我建议你也去看看！您可以成为<code class="fe lv lw lx ly b">for</code>循环的主人:)</p></div></div>    
</body>
</html>