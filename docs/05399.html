<html>
<head>
<title>6 Combining Operators You Should Know From Swift Combine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您应该从Swift Combine了解的6个合并运算符</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/6-combining-operators-you-should-know-from-swift-combine-17ea69d9dad7?source=collection_archive---------9-----------------------#2020-07-06">https://betterprogramming.pub/6-combining-operators-you-should-know-from-swift-combine-17ea69d9dad7?source=collection_archive---------9-----------------------#2020-07-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1ef6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用这些功能在您的iOS应用中做更多事情</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1de1b8646a653e84c43686405912cfb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rdAQA4_11n6amZ6L"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@sickhews?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">韦斯·希克斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="fba3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探索Combine中六个方便的合并操作符。我们将通过在Xcode操场上快速试验每一个来做到这一点。</p><p id="f700" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码可以在文章的底部找到。</p><p id="450e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9b6a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.预先考虑</h1><p id="bb79" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这组操作符允许我们将事件、值或其他发布者添加到源发布者之前:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="0468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是按顺序打印的<code class="fe nb nc nd ne b">Hello</code>和<code class="fe nb nc nd ne b">World!</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/bbf0fdcd9cb64eee156f3d0c2bf099c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6IPyiP8MsS--BCLrGZUdag.png"/></div></div></figure><p id="d7be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们预先考虑另一个相同类型的发布者:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="dcc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果与前一个类似(注意，我们需要向主题发送一个<code class="fe nb nc nd ne b">.finished</code>事件，以便<code class="fe nb nc nd ne b">.prepend</code>操作符工作):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/638fc3c7e5da7b4648216ea6a05599cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-GeXUM2mtoLaxLNiw_Vj3w.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6f78" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.附加</h1><p id="7aea" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nb nc nd ne b">.append</code>操作符的工作方式类似于<code class="fe nb nc nd ne b">.prepend</code>，但是在这种情况下，我们向源发布者添加值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b04e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果，我们看到控制台中打印出<code class="fe nb nc nd ne b">Hello</code>和<code class="fe nb nc nd ne b">World!</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/f3836cf018a7001aec47f3d72bba92ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbxH5i88VTRFPB-4WQViuw.png"/></div></div></figure><p id="0e42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似于我们之前如何预加另一个<code class="fe nb nc nd ne b">Publisher</code>，我们也有相同的选项用于<code class="fe nb nc nd ne b">.append</code>操作符:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/f3814922e8febb87b39669b5302c06cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4hZdfraA6ptbFJo35Qbng.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="98fa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.switchToLatest</h1><p id="b33b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一个更复杂的操作符，<code class="fe nb nc nd ne b">.switchToLatest</code>允许我们将一系列发布者整合成一个事件流:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="9dd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是代码中发生的情况:</p><ul class=""><li id="9162" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">我们创建三个<code class="fe nb nc nd ne b">PassthroughSubjects</code>来发送值。</li><li id="2ff6" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">我们创建主<code class="fe nb nc nd ne b">PassthroughSubject</code>，它本身发出其他<code class="fe nb nc nd ne b">PassthroughSubjects</code>。</li><li id="04ce" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">我们将<code class="fe nb nc nd ne b">stringSubject1</code>发送到主主题。</li><li id="6815" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><code class="fe nb nc nd ne b">stringSubject1</code>接收一个<code class="fe nb nc nd ne b">A</code>值。</li><li id="9b31" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">我们将<code class="fe nb nc nd ne b">stringSubject2</code>发送到主主题，自动忽略<code class="fe nb nc nd ne b">stringSubject1</code>的事件。</li><li id="80b2" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">类似地，我们将值发送到<code class="fe nb nc nd ne b">stringSubject2</code>，连接到<code class="fe nb nc nd ne b">stringSubject3</code>，并向其发送一个完成事件。</li></ul><p id="9034" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果，我们打印出了<code class="fe nb nc nd ne b">A</code>、<code class="fe nb nc nd ne b">C</code>、<code class="fe nb nc nd ne b">D</code>和<code class="fe nb nc nd ne b">G</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/cb0e6e055a3c578efe627c2084d568e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7_DJLpYVz5w87DGBrKKD2g.png"/></div></div></figure><p id="ad11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们考虑一个现实世界的例子:您有一个搜索文本字段，用于检测一个项目是否可用。一旦用户输入了什么，我们就触发一个请求。我们的目标是，如果用户输入了新的值，则取消之前的请求:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="f247" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为简单起见，<code class="fe nb nc nd ne b">isAvailable</code>函数在延迟一段时间后返回一个随机的<code class="fe nb nc nd ne b">Bool</code>值。</p><p id="49eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢<code class="fe nb nc nd ne b">.switchToLatest</code>操作员，我们实现了我们想要的。只有一个<code class="fe nb nc nd ne b">Bool</code>值被打印出来:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/afab675d4b8764b148fdea1ed3b12b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hyQvxDuNbACXCywFB1ESKw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fcff" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.合并(与:)</h1><p id="68e7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们使用<code class="fe nb nc nd ne b">.merge(with:)</code>来组合两个<code class="fe nb nc nd ne b">Publishers</code>，就好像我们只从一个接收值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="57b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是元素的交错序列:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/4eeb28b46319ceb70df5281f42ffd53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xQZ0tpwXi9z_w7PBJ_PVwQ.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="87e3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.组合测试</h1><p id="bd32" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nb nc nd ne b">.combineLatest</code>操作符发布一个包含每个发布者的最新值的元组。</p><p id="6241" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明这一点，考虑下面的真实例子:我们有用户名和密码<code class="fe nb nc nd ne b">UITextFields</code>以及一个允许我们继续的按钮。我们希望保持按钮禁用，直到用户名至少有五个字符长，密码至少有八个字符长。我们可以通过使用<code class="fe nb nc nd ne b">.combineLatest</code>操作符轻松实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="919d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe nb nc nd ne b">usernameTextField</code>和<code class="fe nb nc nd ne b">passwordTextField</code>相应地接收到<code class="fe nb nc nd ne b">user12</code>和<code class="fe nb nc nd ne b">12345678</code>时，条件满足，按钮被激活:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/e8726bff58505951e954d55260b969ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KJaVqiQiEuLWrtxA02-Oig.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3949" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6.活力</h1><p id="f397" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nb nc nd ne b">.zip</code>操作符从每个发布者传递一对对应的值。假设我们想要检测两个发布者是否发出相同的<code class="fe nb nc nd ne b">Int</code>值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="bd96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们从<code class="fe nb nc nd ne b">intSubject1</code>和<code class="fe nb nc nd ne b">intSubject2</code>得到以下对应值:</p><ul class=""><li id="b430" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><code class="fe nb nc nd ne b">0</code>和<code class="fe nb nc nd ne b">4</code></li><li id="e758" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><code class="fe nb nc nd ne b">1</code>和<code class="fe nb nc nd ne b">1</code></li><li id="6f0d" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><code class="fe nb nc nd ne b">6</code>和<code class="fe nb nc nd ne b">7</code></li></ul><p id="2c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个<code class="fe nb nc nd ne b">9</code>值没有打印出来，因为<code class="fe nb nc nd ne b">intSubject1</code>还没有发布其相应的值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/af818f7b12c880af286f2b7f66332831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Haff7lA0P8j6LBzh6rv25g.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="40b5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><p id="97b0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">源代码可以在<a class="ae ky" href="https://gist.github.com/zafarivaev/64f48ec746996a0e76fe3b4a69a7e696" rel="noopener ugc nofollow" target="_blank">要点</a>中找到。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b513" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">包扎</h1><p id="84ff" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对其他类型的联合运算符感兴趣吗？欢迎访问我的其他相关文章:</p><div class="oc od gp gr oe of"><a href="https://medium.com/better-programming/5-transforming-combine-operators-you-should-know-4603fe112d74" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">5你应该知道的变换组合运算符</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">用清晰的例子</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div><div class="oc od gp gr oe of"><a href="https://levelup.gitconnected.com/9-filtering-combine-operators-you-should-know-9c1ef2911352" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">你应该知道的9个过滤组合运算符</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">用清晰的例子</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot ks of"/></div></div></a></div><p id="90cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>