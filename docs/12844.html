<html>
<head>
<title>Rendering Dynamic Remote Containers in a React Micro Frontend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React微前端中呈现动态远程容器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/rendering-dynamic-remote-containers-in-a-react-micro-frontend-1dd97019824f?source=collection_archive---------7-----------------------#2022-07-06">https://betterprogramming.pub/rendering-dynamic-remote-containers-in-a-react-micro-frontend-1dd97019824f?source=collection_archive---------7-----------------------#2022-07-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="516d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过模块联合安全呈现动态远程反应应用。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/979eaea58a2fe82285515c2e2891b4cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mrYf0a2juyOEBvSc"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@william07?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">威廉·威廉</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="fee6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何在React微前端应用中安全、高效、高性能地使用Webpack Module Federation的<a class="ae ky" href="https://webpack.js.org/concepts/module-federation/#dynamic-remote-containers" rel="noopener ugc nofollow" target="_blank">动态远程容器</a>？</p><p id="0e16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从我们想要的愿景开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="c1e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是一个React组件，我们可以在整个应用程序中使用它来呈现远程应用程序中的模块。它封装了:</p><ul class=""><li id="bbe8" class="mb mc it lb b lc ld lf lg li md lm me lq mf lu mg mh mi mj bi translated"><code class="fe lx ly lz ma b">ErrorBoundary</code>在不破坏我们的主机应用程序的情况下安全地呈现远程代码。</li><li id="174c" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">延迟加载可以根据需要解析远程代码，而不会阻塞应用程序的其他渲染。</li><li id="4a18" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">获取和管理动态远程容器。</li></ul><p id="b08f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是实现过程:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="79c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们懒惰地加载从<code class="fe lx ly lz ma b">loadComponent()</code>返回的<code class="fe lx ly lz ma b">Component</code>，并将其包装在<code class="fe lx ly lz ma b">ErrorBoundary</code>周围，以防止整个应用程序在出错时崩溃。在获取远程应用程序时，我们使用一个<code class="fe lx ly lz ma b">React.Suspense</code>来可选地呈现一个加载指示器。</p><p id="4481" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是一个React钩子，管理我们的远程应用程序的URL。对于这个例子来说，细节并不重要，但是您可以根据您的用例以许多不同的方式实现URL管理。关键是我们可以获得一个URL，并将其传递给管理远程容器的<code class="fe lx ly lz ma b">loadComponent</code>实用程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="dfda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只加载远程应用程序一次，即使我们在整个应用程序中重用它的组件。我们获取的容器必须匹配模块联合所期望的<code class="fe lx ly lz ma b">get/init</code>接口。如果我们的远程应用程序的Webpack配置使用模块联合插件，这种方式效果最好。</p><p id="190b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lx ly lz ma b">fetchRemote()</code>处理获取远程应用程序的<code class="fe lx ly lz ma b">remoteEntry.js</code>文件。首先，它创建一个新的脚本标记，然后将其注入DOM以获取远程javascript:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="cd68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊。我们在React微前端中有一个可靠地获取和呈现远程应用的机制。</p><p id="cee3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们来看看它的运行情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/32f7728d25ab1a81e9d2856c4638246e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5xwoSOSn9N0fht478fAtEA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在水果店微前端应用程序中的远程应用程序的不同URL之间切换</p></figure><p id="bdc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里看看一个活生生的例子:<a class="ae ky" href="https://micro-frontend-demo-main.vercel.app/" rel="noopener ugc nofollow" target="_blank">https://micro-frontend-demo-main.vercel.app/</a></p><p id="c8fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码:<a class="ae ky" href="https://github.com/rautio/micro-frontend-demo/tree/dynamic-remote-react" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="922a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于如何在React中使用模块联合的分步指南，请查看我的另一个故事:</p><div class="mq mr gp gr ms mt"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-webpack-module-federation-in-react-70455086b2b0"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">如何在React中使用Webpack模块联邦</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">轻松构建微前端架构</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">better编程. pub</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh ks mt"/></div></div></a></div></div></div>    
</body>
</html>