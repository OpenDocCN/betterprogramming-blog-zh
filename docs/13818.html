<html>
<head>
<title>How To Create a Custom Header and Footer Using UIHostingConfiguration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用UIHostingConfiguration创建自定义页眉和页脚</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-custom-header-and-footer-using-uihostingconfiguration-d48b0051ae80?source=collection_archive---------13-----------------------#2022-09-29">https://betterprogramming.pub/how-to-create-custom-header-and-footer-using-uihostingconfiguration-d48b0051ae80?source=collection_archive---------13-----------------------#2022-09-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c7ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">苹果没告诉你的…</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/45a6dc68f740a8137efefe6629dbebed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bZgD1xvsyQ2om1bZrzKJPA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="468c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当苹果在WWDC推出<code class="fe lu lv lw lx b">UIHostingConfiguration</code>时，他们主要集中在展示我们如何使用它为表格和集合视图创建自定义单元格。这让我想知道是否有可能使用<code class="fe lu lv lw lx b">UIHostingConfiguration</code>创建一个自定义的页眉和页脚。</p><p id="c51e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">经过几个小时的摸索，事实证明这是完全可行的！实现这一点的方法非常简单。事实上，数据绑定、动画和自动调整大小等特性都像是用<code class="fe lu lv lw lx b">UIHostingConfiguration</code>创建的自定义页眉和页脚的魅力。</p><p id="4622" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些是一些令人兴奋的发现，我迫不及待地想与你们分享，所以让我们开始吧！</p><h1 id="21ca" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">创建自定义页眉和页脚</h1><h2 id="6b94" class="mq lz it bd ma mr ms dn me mt mu dp mi lh mv mw mk ll mx my mm lp mz na mo nb bi translated">补充意见注册</h2><p id="2b8a" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">为了显示自定义页眉和页脚，我们必须首先将自定义页眉和页脚注册到集合视图。因此，让我们继续定义注册对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="472d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，我们使用<code class="fe lu lv lw lx b">UICollectionViewCell</code>作为辅助视图类型。这样做将使我们能够在初始化注册对象时使用<code class="fe lu lv lw lx b">UIHostingConfiguration</code>定义页眉和页脚。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d430" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lu lv lw lx b">headerRegistration</code>和<code class="fe lu lv lw lx b">footerRegistration</code>都是用相同的初始化器初始化的，只要确保传入正确的<code class="fe lu lv lw lx b">elementKind</code>就可以了。</p><h2 id="e555" class="mq lz it bd ma mr ms dn me mt mu dp mi lh mv mw mk ll mx my mm lp mz na mo nb bi translated">补充意见出列</h2><p id="87c0" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">有了这两个注册对象，我们就可以继续让定制的页眉和页脚出队了。我们将在<code class="fe lu lv lw lx b">collectionView(_:viewForSupplementaryElementOfKind:at:)</code>数据源方法中这样做。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e860" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，这里的<code class="fe lu lv lw lx b">elementKind</code>必须与我们在注册对象初始化期间传入的<code class="fe lu lv lw lx b">elementKind</code>相匹配。否则，我们将得到一个<code class="fe lu lv lw lx b">NSInternalInconsistencyException</code>,原因是:</p><pre class="kj kk kl km gt nj lx nk nl aw nm bi"><span id="7d0b" class="mq lz it lx b gy nn no l np nq"><em class="nr">The view returned from -collectionView:viewForSupplementaryElementOfKind:atIndexPath: does not match the element kind it is being used for.</em></span></pre><h2 id="f387" class="mq lz it bd ma mr ms dn me mt mu dp mi lh mv mw mk ll mx my mm lp mz na mo nb bi translated">在复合布局中启用页眉和页脚</h2><p id="976e" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">难题的最后一部分是配置集合视图的布局，以显示页眉和页脚。</p><p id="3305" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您使用的是复合列表布局，以下是操作方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d869" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于构建自定义布局的情况，您可以这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d789" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好了，这就是使用<code class="fe lu lv lw lx b">UIHostingConfiguration</code>创建自定义页眉和页脚的全部内容。这是我们刚刚创建的页眉和页脚的截图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/31dbe9683891773fa6f10ad9f830b875.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/0*HNdZC9JdQKi9SO3V"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单的页眉和页脚</p></figure><h1 id="e031" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">准备好接受挑战了吗？</h1><p id="bf5b" class="pw-post-body-paragraph ky kz it la b lb nc ju ld le nd jx lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">在这个阶段，我们基本上可以创建任何类型的布局和交互，只要它可以使用SwiftUI实现。这是一个带有自定义页眉、页脚和单元格的布局，我完全是使用<code class="fe lu lv lw lx b">UIHostingConfiguration</code>和SwiftUI构建的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3c2b92fe6fc6771b68a7560846fe2a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*nq-Z1WkoQGguzNBRTTgOxg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自定义页眉和页脚构建<code class="fe lu lv lw lx b">UIHostingConfiguration</code>和SwiftUI</p></figure><p id="fdc3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你觉得你能自己造一个吗？</p><p id="1830" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一些让你开始的提示:</p><ol class=""><li id="6eba" class="nu nv it la b lb lc le lf lh nw ll nx lp ny lt nz oa ob oc bi translated">您可以使用<a class="ae od" href="https://swiftsenpai.com/development/swiftui-custom-cell/" rel="noopener ugc nofollow" target="_blank">这篇</a>文章中介绍的概念来创建一个自定义单元格。</li><li id="6a98" class="nu nv it la b lb oe le of lh og ll oh lp oi lt nz oa ob oc bi translated">使用单元格的<code class="fe lu lv lw lx b">configurationUpdateHandler</code>用红色边框高亮显示所选单元格。点击可以了解更多<a class="ae od" href="https://swiftsenpai.com/development/uihostingconfiguration-cell-interactions/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="1065" class="nu nv it la b lb oe le of lh og ll oh lp oi lt nz oa ob oc bi translated">使用SwiftUI数据绑定技术用选定的符号名称更新页脚。更多关于那个<a class="ae od" href="https://swiftsenpai.com/development/refresh-cells-uihostingconfiguration/" rel="noopener ugc nofollow" target="_blank">这里</a>。</li><li id="7e8f" class="nu nv it la b lb oe le of lh og ll oh lp oi lt nz oa ob oc bi translated">标题高度变化动画只是一个基本的SwiftUI过渡动画，由于iOS 16中<code class="fe lu lv lw lx b">UICollectionViewCell</code>的自调整大小特性，不需要做额外的工作。</li></ol><p id="745c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你不知何故卡住了，不要担心。你可以随时在Github上的这里查阅完整的示例代码<a class="ae od" href="https://github.com/LeeKahSeng/SwiftSenpai-UICollectionView-SwiftUI" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt nj lx nk nl aw nm bi"><span id="1d3e" class="mq lz it lx b gy nn no l np nq"><strong class="lx iu">Want to Connect?</strong></span><span id="a072" class="mq lz it lx b gy oq no l np nq">I hope you enjoyed this article. If you did, feel free to follow me on <a class="ae od" href="https://twitter.com/Lee_Kah_Seng" rel="noopener ugc nofollow" target="_blank">Twitter</a> so you won’t miss any of my upcoming iOS development-related articles.</span></pre></div></div>    
</body>
</html>