<html>
<head>
<title>How To Turn Your Ionic 4 Web App Into a Chrome Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将你的Ionic 4网络应用变成Chrome扩展</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ionic-4-web-app-as-chrome-extension-14e4d474d3b0?source=collection_archive---------15-----------------------#2019-12-15">https://betterprogramming.pub/ionic-4-web-app-as-chrome-extension-14e4d474d3b0?source=collection_archive---------15-----------------------#2019-12-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2483" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将你的Ionic 4网络应用变成谷歌Chrome扩展的简单步骤</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b7967e9657cdcb070c703731aea27302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4w2NOM5XcaUYu18Z1hka3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自作者</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="5bcb" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">第一步。Manifest.json</h1><p id="0b36" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">Chrome扩展名以<code class="fe mt mu mv mw b">manifest.json</code>文件开始。一个以浏览器为平台的Ionic 4应用默认会有一个这样的清单文件，但是Chrome扩展需要一个<a class="ae mx" href="https://developer.chrome.com/extensions/manifest" rel="noopener ugc nofollow" target="_blank">不同的</a>:</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="eb26" class="nc lg it mw b gy nd ne l nf ng">{<br/> "name": "MyApp",<br/> "version": "0.9.321",<br/> "homepage_url": "<a class="ae mx" href="https://www.morphistic.com" rel="noopener ugc nofollow" target="_blank">https://www.myapp.com</a>",<br/> "description": "My Awesome App",<br/> "icons": {<br/>  "16": "assets/img/favicon-16x16.png",<br/>  "32": "assets/img/favicon-32x32.png"<br/> },<br/> "manifest_version": 2,<br/> "background": {<br/>  "scripts": [<br/>   "assets/js/background.js"<br/>  ],<br/>  "persistent": false<br/> },<br/> "browser_action": {<br/>  "default_icon": {<br/>   "16": "assets/img/favicon-16x16.png",<br/>   "32": "assets/img/favicon-32x32.png"<br/>  },<br/>  "default_title": "MyApp",<br/>  "default_popup": "index.html"<br/> },<br/> "permissions": [<br/>  "notifications",<br/>  "storage"<br/> ],<br/> "content_security_policy": "script-src 'self' 'unsafe-eval' <a class="ae mx" href="https://connect.facebook.net" rel="noopener ugc nofollow" target="_blank">https://connect.facebook.net</a> <a class="ae mx" href="https://www.googletagmanager.com" rel="noopener ugc nofollow" target="_blank">https://www.googletagmanager.com</a> <a class="ae mx" href="https://cdn.firebase.com" rel="noopener ugc nofollow" target="_blank">https://cdn.firebase.com</a> <a class="ae mx" rel="noopener ugc nofollow" target="_blank" href="/*.firebaseio.com">https://*.firebaseio.com</a>; object-src 'self'"<br/>}</span></pre><p id="f285" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">这里我们使用的图标不同于PWA <code class="fe mt mu mv mw b">manifest.json</code>中的图标。我们还有<code class="fe mt mu mv mw b">background.js</code> JavaScript文件，它将监听扩展生命周期事件并根据需要执行动作。</p><p id="7de1" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">如上所述，我们正在设计基于<code class="fe mt mu mv mw b">browser-action</code>的Chrome扩展，这意味着，安装后，该扩展将在右上角可用，并且不依赖于特定的页面动作来激活。当然，你可以尝试其他选择。</p><p id="4307" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">最后，<code class="fe mt mu mv mw b">content_security_policy</code>必须考虑你的用例(如Firebase，脸书或谷歌标签管理器)，并提供必要的例外。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="69ee" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">第二步。背景. js</h1><p id="3b5f" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">我们在Ionic的<code class="fe mt mu mv mw b"><strong class="lz iu">src\assets\js </strong></code>文件夹中创建了这个新文件，因为它在构建过程中一直存在，并且在构建完成后将在这个文件夹中可用。</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="63f5" class="nc lg it mw b gy nd ne l nf ng">chrome.runtime.onInstalled.addListener(function() {<br/>    // here we can execute chrome specific APIs<br/> });</span></pre><p id="26ec" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">我们可以在以后，在这里，或者根据需要，开始添加能够与Chrome API交互的函数和方法。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="4b36" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">第三步。用高度和宽度更新index.html:</h1><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="93e9" class="nc lg it mw b gy nd ne l nf ng">&lt;head&gt;<br/>  &lt;style type="text/css"&gt;<br/>    body {<br/>      overflow: hidden;<br/>      min-width: 320px;<br/>      max-width: auto;<br/>    }<br/>    html {<br/>      overflow: hidden;<br/>      min-width: 320px;<br/>      max-width: auto;<br/>      min-height: 568px;<br/>    }<br/>  &lt;/style&gt;<br/>&lt;/head&gt;</span></pre><p id="6e41" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">我们必须添加这些样式配置，以防止Ionic应用程序折叠成一个一英寸的盒子。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="f670" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">第四步。加载并测试你的Ionic 4 Chrome扩展</h1><p id="40e6" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">现在，您需要像平常一样为浏览器构建应用程序，然后再将其部署到web主机上。</p><pre class="kj kk kl km gt my mw mz na aw nb bi"><span id="374b" class="nc lg it mw b gy nd ne l nf ng">npm run build --prod</span></pre><p id="082f" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">完成上述步骤后，您的www输出文件夹将包含所有静态文件，包括您的manifest和assets文件夹。打开这个文件夹，检查你的<code class="fe mt mu mv mw b">manifest.json</code>，确保一切都设置好了。</p><p id="3cd8" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">现在在你的浏览器中输入<em class="nm"> chrome://extensions </em>，启用开发者模式，然后点击<em class="nm"> Load unpacked </em>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/2dc1a23ad96f069eef4a180ecba7d90a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*VHXjkqKbyMBZmpjnykESig.png"/></div></figure><p id="3f45" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">这将加载我们所有的静态文件作为解压缩的Chrome扩展。我们现在可以把它带到下一个层次，并在扩展库中发布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2665984bf02e4593725ffb438aedbbd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*zqP_cLqo5YAqjvFQ_SFEMQ.png"/></div></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="061a" class="pw-post-body-paragraph lx ly it lz b ma nh ju mc md ni jx mf mg nj mi mj mk nk mm mn mo nl mq mr ms im bi translated">简而言之，将ionic 4 / Angular应用程序作为Chrome扩展并将其作为应用程序的分发选项是相当容易的。</p></div></div>    
</body>
</html>