<html>
<head>
<title>How to Build Modern, Offline Apps With Progressive Web Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用渐进式网络应用程序构建现代化的离线应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-modern-offline-apps-with-progressive-web-apps-50dbc8d91b13?source=collection_archive---------11-----------------------#2020-07-22">https://betterprogramming.pub/how-to-build-modern-offline-apps-with-progressive-web-apps-50dbc8d91b13?source=collection_archive---------11-----------------------#2020-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="66c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">pwa、服务人员等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d14c5fe30b308db4dc4d92a701ff9bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fXpA_bS5TWkz2KO-dwuWoA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:作者</p></figure><p id="296e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">渐进式网络应用程序(PWAs)可能是现代移动应用程序开发的下一件大事。这个强大的工具结合了本地应用程序的功能和web应用程序的范围。他们使用现代API来提供可靠性和可安装性，同时通过单一代码库在任何地方、任何设备上访问任何人。PWAs在web开发中的应用越来越多，大大小小的公司都在利用这项强大的技术。今天，我想向您介绍PWAs，并让您从一个基本的应用程序开始。</p><p id="2f53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将回顾:</p><ul class=""><li id="b886" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">什么是PWA？</li><li id="60d2" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">公共福利援助的基础</li><li id="2351" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">从头开始创建PWA</li><li id="77f3" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">接下来学什么</li></ul></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="99a1" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">什么是PWA？</h1><p id="6716" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">渐进式web应用程序(PWAs)是使用现代技术来提供与本地应用程序非常相似的用户体验的web应用程序。pwa近年来变得非常流行，因为它们不仅可以提高性能和用户体验，而且在用户离线时也可以访问。</p><p id="3294" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">PWA的主要目标是使用移动应用程序开发人员可用的大多数功能，提供与本机应用程序相同的体验。PWAs将最好的移动和网络应用结合到一项技术中。你可以使用前端网络技术建立一个网站，但是它的行为、感觉和表现就像一个移动应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/6a7be47f69da12bfe7b7c0b08cc50c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B02rLa11pJbick74"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">星巴克用于离线订购的现代PWA</p></figure><p id="d911" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种现代的应用程序开发解决方案使移动应用程序开发人员可以轻松地将他们的产品推向市场，而无需经过苹果或Play stores缓慢的验证过程。一旦部署了PWA，用户就可以立即使用它。这也意味着用户不必手动更新应用程序来获得最新版本——它是自动部署的。</p><p id="9efb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">pwa的开发成本明显比本地应用便宜，因为pwa消除了对iOS和Android团队的需求。与原生应用相比，这种有价值的现代应用开发解决方案利用更大的网络生态系统来维护应用。渐进式网络应用显然有很多好处。让我们来看看他们的一些特点。</p><ul class=""><li id="56ef" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated"><strong class="la iu">渐进式:</strong>PWA必须在每台设备上工作，并逐步增强，这意味着用户设备或浏览器可用的功能都要考虑在内。</li><li id="c046" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><strong class="la iu">可发现:</strong>渐进式网络应用本质上是一个网站，因此它必须在搜索引擎上可被发现。</li><li id="c6b9" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><strong class="la iu">离线功能:</strong>PWA应该在用户离线时工作。它还应该在连接性差或低的地区工作。</li><li id="5387" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">类似应用程序:pwa的行为和外观应该像本机应用程序。</li><li id="6f49" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><strong class="la iu">可链接:</strong>pwa本质上是网站，因此它们应该使用URI来指示应用程序的状态，以便应用程序可以保留其状态。</li></ul><h2 id="790d" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">公共福利援助的例子</h2><p id="a0c8" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">渐进式网络应用已经是应用生态系统的一部分。你很可能已经用过一个了还不知道！这里有五种流行的pwa，让你了解哪些公司正在使用这种现代技术。</p><p id="86e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">优步:</strong>优步将PWA技术用于低速2G网络的拼车预订。这种PWA允许用户在与其本地应用不兼容的低端设备上访问优步的服务。</p><p id="7983" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> Pinterest: </strong> Pinterest在了解到由于移动性能不佳，只有1%的移动用户转为注册用户后，设计了一个PWA。他们使用基于PWA的技术进行了重新设计，以改善用户体验。</p><p id="f3d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> Starbucks: </strong> Starbucks为他们的web订购系统构建了一个PWA，以提供类似于他们的本地应用程序的离线订购。星巴克的PWA允许你在不上网的情况下浏览菜单和定制订单。</p><p id="8599" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> Spotify: </strong> Spotify由PWA-technology支持，克服了与苹果合作的局限性。Spotify的PWA应用程序利用自适应用户界面来改变背景。</p><p id="7afe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> Soundslice: </strong> Soundslice是一款音乐教育软件，使用PWA进行音乐学习体验。基于Soundslice PWA的播放器允许用户在另一个移动或桌面设备上阅读音乐的同时学习一段音乐。</p><h2 id="999e" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">应该构建PWA还是原生app？</h2><p id="a6bc" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">尽管使用PWA显然有很多优势，但在某些情况下，本地应用可能是更好的选择。让我们进一步分析一下。</p><p id="3b32" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">pwa适用于以下情况:</p><ul class=""><li id="2d04" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">这款应用必须尽快上市</li><li id="ae82" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">你的预算有限</li><li id="7d0b" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">直播后你有几个计划</li><li id="97f5" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">跨平台兼容性是一项要求</li></ul><p id="029f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本机应用非常适合以下情况:</p><ul class=""><li id="a618" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">关键要求是速度和响应能力</li><li id="e25c" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">您希望使用特定的硬件或功能</li><li id="b5d2" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">该应用程序必须与第三方应用程序集成</li></ul></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="7729" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">公共福利援助的基础</h1><p id="a01d" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">在我们学习如何下载和构建PWAs之前，我们需要了解这些应用程序是如何组织和构建的。在本节中，我们将向您介绍PWAs的基础知识。要成功完成这一部分，您应该对HTML、CSS和JavaScript有所了解。我们开始吧！</p><h2 id="2fcc" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">Web应用程序清单</h2><p id="6bde" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">网络清单对PWA至关重要。它提供元数据，指示浏览器如何使用<code class="fe nz oa ob oc b">JSON</code>文本文件在任何设备上呈现和显示PWA。这是重要的第一步，必须安装在主屏幕上。稍后，我们将向您展示如何从头开始创建web应用清单，但是您也可以使用清单生成器，这是PWA开发人员的常见选择。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/273aa2336b486167e3a69f61d3f1da0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/0*XQ2Yq6YTk506aZCw"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自微软的PWA文档</p></figure><h2 id="0aff" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">服务人员</h2><p id="f8bd" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">服务工作者是所有公共福利援助的重要基础。它们允许我们拦截网络请求，并为不同的调用实现缓存策略。可以把它想象成一种网络工作者，但它是一个JavaScript文件，充当我们的网络应用程序和网络之间的代理。它拦截HTTP请求，并提供来自网络或本地缓存的响应。服务人员是安全的，不能直接与DOM交互。它们通过<code class="fe nz oa ob oc b">postMessage</code>接口与页面通信，该接口可以直接与DOM交互。</p><h2 id="5d30" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">PWA文件结构</h2><p id="2c6d" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">看看这个PWA文件结构。我们将在下面讨论必需的部分，并解释哪些特性是可选的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="b2f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nz oa ob oc b"><strong class="la iu">name/short_name</strong></code></p><p id="244d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是在用户设备上安装PWA后，应用程序图标下使用的值。<code class="fe nz oa ob oc b">short_name</code>用在没有足够空间的时候。我建议保持在12个字符以内，以避免截断。</p><p id="5911" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nz oa ob oc b"><strong class="la iu">start_url</strong></code></p><p id="88c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是启动PWA时要加载的应用程序资产的路径。这将表明我们希望应用程序每次启动时都在主页上启动。</p><p id="d8c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nz oa ob oc b"><strong class="la iu">display</strong></code></p><p id="238d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将指定如何显示您的PWA应用程序。您可以根据浏览器体验指定不同的值，例如标准体验的<code class="fe nz oa ob oc b">browser</code>或独立窗口的<code class="fe nz oa ob oc b">standalone</code>。</p><p id="c11d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nz oa ob oc b"><strong class="la iu">icons</strong></code></p><p id="469f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将决定哪些图标在主屏幕或闪屏上。应该至少是144 px<em class="og">T17】分辨率。一些浏览器，如Chrome，建议使用两个不同大小的图标来帮助在不同的设备上缩放。然后我们可以使用<code class="fe nz oa ob oc b">purpose</code>属性来表示这些不同图标的用途。</em></p><p id="738a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nz oa ob oc b"><strong class="la iu">background_color</strong></code></p><p id="0c0b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">顾名思义，这将设置PWA的背景颜色。你可以决定你想要哪种颜色，在Chrome上，背景色也用于启动画面。</p><p id="df0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的PWA文件结构中的以下特征是用于添加不同功能或设计元素的可选属性。如果你想要一个全面发展的PWA，推荐使用它们，但是如果你只是想从基础开始，你只需要我们上面讨论的。</p><ul class=""><li id="b441" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated"><code class="fe nz oa ob oc b">orientation</code></li><li id="c369" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><code class="fe nz oa ob oc b">theme_color</code></li><li id="1511" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><code class="fe nz oa ob oc b">scope</code></li><li id="40bc" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><code class="fe nz oa ob oc b">description</code></li><li id="af88" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><code class="fe nz oa ob oc b">related_applications</code></li><li id="b295" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated"><code class="fe nz oa ob oc b">dir</code></li></ul></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="5fe2" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">从头开始创建PWA</h1><p id="8b78" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">现在我们已经熟悉了PWAs的基本原理，让我们从头开始学习如何制作一个。本指南将向您介绍创建PWA的基础知识。</p><h2 id="38c5" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">第一步。建立一个基本的网站</h2><p id="f116" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">要制作PWA，我们需要一个网站。您可以从头开始创建一个(只要它能在不同的屏幕、浏览器和设备上很好地伸缩),也可以下载一个模板。如果使用模板，替换<code class="fe nz oa ob oc b">index.html</code>文件中的内容，并使用CSS更改颜色或设计。一旦我们有了自己的网站，我们可以把它变成一个进步的网络应用程序。</p><h2 id="a06f" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">第二步。为你的主屏幕制作一个应用图标</h2><p id="77f5" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">正如我们在文件结构部分提到的，您的PWA需要一个应用程序图标。这将出现在主屏幕上。您可以制作自己的徽标，也可以从网上下载免费的徽标。无论哪种方式，你的logo都需要是一个正方形，分辨率至少应该是144像素。一旦你制作了图标，下载它并将HTML代码添加到<code class="fe nz oa ob oc b">index.html</code>文件的<code class="fe nz oa ob oc b">&lt;head&gt;</code>中。请务必检查该文件的路径是否正确。对于应用设备，正确显示PWA图标需要一些额外的设置。</p><h2 id="2f9c" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">第三步。创建并注册web应用程序清单</h2><p id="588d" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">正如我之前提到的，web应用程序清单是制作PWA的重要步骤。这是一个包含所有网站数据的文件。您可以从头开始创建一个，或者使用web应用程序清单生成器并填写您想要的数据。如果您刚刚开始，这是一个很好的选择，因为您可以为您不了解的功能保留默认设置。</p><p id="e29d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通常，清单文件存储在我们的web应用程序的根目录下。只要结尾有<code class="fe nz oa ob oc b">.webmanifest</code>，你想取什么名字都可以。然后，我们用媒体类型<code class="fe nz oa ob oc b">application/manifest+json</code>来服务它。然后，我们必须使用HTML文档的<code class="fe nz oa ob oc b">&lt;head&gt;</code>部分中的<code class="fe nz oa ob oc b">&lt;link&gt;</code>标签将清单与web应用程序关联起来。这里有一个示例，它向用户代理表明必须采用清单元数据。我们还需要通过添加属性<code class="fe nz oa ob oc b">crossorigin="use-credentials</code>来添加凭证。</p><pre class="kj kk kl km gt oh oc oi oj aw ok bi"><span id="73bf" class="nn mq it oc b gy ol om l on oo">&lt;head&gt;<br/>  &lt;link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"&gt;<br/>&lt;/head&gt;</span></pre><h2 id="e947" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">第四步。添加服务人员</h2><p id="72ad" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">正如我之前概述的，服务工作者充当我们的应用程序和网络的代理。这是另一个文件，我们需要添加到我们的PWA，以便它可以脱机工作。要成功创建服务人员，您需要了解一些JavaScript中的承诺知识。要创建服务人员，有四个主要步骤:</p><ol class=""><li id="60dd" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt op ma mb mc bi translated"><strong class="la iu">使用包含服务人员逻辑的JavaScript文件注册服务人员。</strong>你可以使用下面的代码。在此阶段，如果无法获取服务工作者文件，您可以生成一个<code class="fe nz oa ob oc b">error</code>。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="5898" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 2。安装您的服务人员。</strong>在这个阶段，通常会执行预取操作，以确保下载目标资产(比如静态文件)。这就是我们在JavaScript代码中使用承诺的地方。<code class="fe nz oa ob oc b">caches.open()</code>和<code class="fe nz oa ob oc b">cache.addAll()</code>都会回承诺。安装后，服务人员将延迟激活，直到较旧的服务人员不再控制客户端(如果您已经安装了客户端)。</p><pre class="kj kk kl km gt oh oc oi oj aw ok bi"><span id="1dd4" class="nn mq it oc b gy ol om l on oo">var urlsToCache = [<br/>  '/',<br/>  '/styles/styles.css',<br/>  '/script/home.js'<br/>];</span><span id="2389" class="nn mq it oc b gy oq om l on oo">self.addEventListener('install', (event) =&gt; {<br/>  event.waitUntil(<br/>    caches.open('my-cache')<br/>      .then((cache) =&gt; {<br/>        return cache.addAll(urlsToCache);<br/>      })<br/>  );<br/>});</span></pre><p id="bc86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 3。激活服务人员。旧的服务人员离开后，新的服务人员将被激活。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/8412e6803d9786d9e3dacc28bee2c9c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*puAvI_pwZ4Jy_CqF_VnMdA.png"/></div></div></figure><p id="0d6d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 4。获取和拦截请求。</strong>现在我们的服务工作者已经安装并激活，因此它可以拦截请求并与本地缓存通信。有几种方法可以实现这个阶段。现在，我将向您展示一般PWA场景的最简单方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="c5a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们了解了为PWA创建和安装服务人员的基本步骤。请记住，还有其他方法可以接近服务人员，比如使用<code class="fe nz oa ob oc b">sw-toolbox</code>或利用不同的缓存策略。</p><h2 id="c7ee" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">第五步。初始化添加到主屏幕对话框</h2><p id="cdc0" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">添加到主屏幕对话框(A2HS)是用户在他们的设备上本地安装应用程序的方式。我们还需要通过HTTPS连接服务的应用程序。为此，Chrome会要求你的PWA有一个注册的服务人员。一旦满足要求，浏览器将显示A2HS对话框，如按钮、弹出窗口或菜单选项。一旦它被添加到主屏幕，您的PWA将看起来像一个使用您提供的图标的本机应用程序。</p><h2 id="7e28" class="nn mq it bd mr no np dn mv nq nr dp mz lh ns nt nb ll nu nv nd lp nw nx nf ny bi translated">第六步。测试您的PWA和清单文件</h2><p id="29f3" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">现在您已经有了基本的PWA，您需要测试它是否工作，并确定它是否是一个好的PWA。PWA开发者的一个常用工具是<a class="ae os" href="https://developers.google.com/web/tools/lighthouse" rel="noopener ugc nofollow" target="_blank"> Google Lighthouse </a>，它会评估你的PWA，并提出如何改进的建议。你可以安装Lighthouse，打开你的网站，点击生成报告。这将打开一个包含有价值信息的选项卡。您应该关注的数据是对渐进式Web应用程序、性能、可访问性和最佳实践类别的评级。从那里，您可以确定应该进行哪些更改。</p><p id="8f86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您还需要测试清单文件。为此，您可以使用浏览器的开发工具。例如，在Chrome中，您需要打开应用程序选项卡，访问清单部分(在左侧)，并查看文件的属性。如果有错误，它将显示警告。对于这一步，您还可以使用清单验证器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/d167eae40eb3530091f759dfbe6ecbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ex4h6AX2-IzsOwnT.png"/></div></div></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="a0d9" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">接下来学什么</h1><p id="83ff" class="pw-post-body-paragraph ky kz it la b lb nh ju ld le ni jx lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">恭喜你。现在，您已经知道如何创建一个基本的PWA，并将其下载到用户的主屏幕上。显然，这个过程比传统的本地应用程序过程要快得多，也容易得多。PWAs是现代web应用程序创建和部署的强大工具。要掌握PWA开发还有很多东西要学。接下来您需要学习的东西和工具是:</p><ul class=""><li id="bf41" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">缓存策略</li><li id="7f6e" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">用于离线持久性的云Firestore</li><li id="3815" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">PWA库和工具箱</li><li id="ee68" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">如何创建带角度的PWA</li><li id="b042" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">部署和托管PWA</li></ul><p id="e49c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">掌控你的职业生涯，学习如何创建现代进步的网络应用。</p></div></div>    
</body>
</html>