<html>
<head>
<title>Build a Movie List Flutter App Using TVmaze API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TVmaze API构建电影列表Flutter应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/flutter-network-request-movie-info-app-453b494c93c6?source=collection_archive---------4-----------------------#2022-06-05">https://betterprogramming.pub/flutter-network-request-movie-info-app-453b494c93c6?source=collection_archive---------4-----------------------#2022-06-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="54f7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">颤动网络请求</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/f69b65d9bb6258c4561cf8d01721c85b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*3Fg5hwiIORF31viIDfYIwA.jpeg"/></div></figure><h1 id="d729" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">信息应用</h1><h1 id="425f" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">介绍</h1><p id="4954" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">用最少的代码构建漂亮的应用程序是使用Flutter框架的最大优势之一。在制作应用程序的时候，我们必须与来自后端或数据库的数据进行交互。我们与这些数据交互的方式之一是通过API。</p><h1 id="73c9" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">什么是API</h1><p id="20b6" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">API是应用编程接口的缩写。API允许两个软件产品之间的数据传输。它还规定了这种沟通的条款。我们使用的大多数移动应用程序通常与API通信，以提供良好的用户体验。让我们深入研究一下这个应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/584bef61e485431d0b9cc27ad7cfc5c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kkXeiY70-eT8UZdOSluntg.png"/></div></div></figure><h1 id="829e" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">先决条件</h1><p id="5a22" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了遵循本教程，您必须安装Flutter 2.10或更高版本的android studio，并设置必要的环境来运行您的Flutter应用程序。</p><p id="71ca" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">我使用VS代码作为我的IDE，因为它是轻量级的，尽管你可以使用Android Studio或IntelliJ IDE来编写你的代码。只要确保你已经安装了Dart和Flutter插件。有关如何安装的分步说明，请根据您的操作系统单击下面的链接。</p><ul class=""><li id="abb5" class="ml mm iq lh b li mg ll mh lo mn ls mo lw mp ma mq mr ms mt bi translated"><a class="ae mu" href="https://www.geeksforgeeks.org/how-to-install-flutter-on-windows/" rel="noopener ugc nofollow" target="_blank">视窗</a></li><li id="bcea" class="ml mm iq lh b li mv ll mw lo mx ls my lw mz ma mq mr ms mt bi translated"><a class="ae mu" href="https://www.geeksforgeeks.org/flutter-installation-on-macos/" rel="noopener ugc nofollow" target="_blank">苹果电脑</a></li><li id="fd2d" class="ml mm iq lh b li mv ll mw lo mx ls my lw mz ma mq mr ms mt bi translated"><a class="ae mu" href="https://www.geeksforgeeks.org/how-to-install-flutter-on-linux/" rel="noopener ugc nofollow" target="_blank"> Linux </a></li></ul><h1 id="e403" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">关于应用程序</h1><p id="a6ea" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们将建立一个显示剧集和其他有用数据的电影系列应用程序。该系列是使用tvmaze api的流行flash系列。我们使用这个API是因为它是免费和开源的，不需要任何API密匙。要了解关于这个API的更多信息，请单击下面的任何链接。</p><p id="d2bc" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated"><strong class="lh ir">注意:在构建这个应用程序的最后，我们可以更改我们的TVmaze URL端点，仍然可以获得其他电影应用程序，因为它们都是相似的</strong></p><ul class=""><li id="ee21" class="ml mm iq lh b li mg ll mh lo mn ls mo lw mp ma mq mr ms mt bi translated"><a class="ae mu" href="https://api.tvmaze.com/" rel="noopener ugc nofollow" target="_blank"> TVmaze </a></li><li id="5be6" class="ml mm iq lh b li mv ll mw lo mx ls my lw mz ma mq mr ms mt bi translated"><a class="ae mu" href="https://api.tvmaze.com/singlesearch/shows?q=flash&amp;embed=episodes" rel="noopener ugc nofollow" target="_blank"> API端点</a></li></ul><h1 id="3d0b" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">构建应用程序</h1><p id="0db9" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">作为移动应用程序开发人员，我们的主要关注点是尽可能快地使用最佳实践编写经过良好测试的应用程序。大多数时候，编写应用程序需要在google、stackoverflow和其他开发者论坛上搜索现有的解决方案。有时我们甚至使用在线工具来加快我们的应用程序开发过程。</p><h1 id="3270" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">我们开始吧</h1><p id="8e72" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我将这个应用命名为<code class="fe na nb nc nd b">flash_app</code>。在您的终端中运行代码:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="fb83" class="ni ko iq nd b gy nj nk l nl nm">flutter create flash_app</span></pre><p id="72e4" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">如果您使用Vscode作为您的IDE，您可以执行以下操作，在visual studio代码中快速打开您的文件夹。</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="e5b2" class="ni ko iq nd b gy nj nk l nl nm">C:\app\app2&gt;cd flash_app</span><span id="6060" class="ni ko iq nd b gy nn nk l nl nm">C:\app\app2\flash_app&gt;code .</span></pre><p id="366f" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">如果您想看看JSON数据是什么样子，单击这个API <a class="ae mu" href="https://api.tvmaze.com/singlesearch/shows?q=flash&amp;embed=episodes" rel="noopener ugc nofollow" target="_blank">端点</a>，它会向您显示原始的API数据。你可以复制所有的JSON数据，然后点击<a class="ae mu" href="https://jsonformatter.org/" rel="noopener ugc nofollow" target="_blank"> JSON格式化器</a>。然后粘贴JSON文件。这将帮助我们了解我们要创建的模型的类型，并获得我们数据的总体视图，并决定我们将在应用程序中使用哪些数据。</p><p id="2afd" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">为了序列化我们的JSON数据，有很多网站可以帮助我们。但是我们将使用Javier Lecuona的这个站点，因为它为我们生成了一个非常简单的dart模型。虽然我们没有使用所有返回的数据。</p><p id="b090" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated"><em class="no">注意:序列化JSON数据决定了与API数据交互的难易程度。在这个阶段简化JSON将有助于您快速工作。</em></p><p id="d0b0" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">应用我们在报价应用程序中使用的相同文件夹结构，在lib文件夹中创建模型、屏幕和服务文件夹。不需要为存储图像创建资产文件夹，因为我们将从网络请求中获取它们。在models文件夹中创建一个<code class="fe na nb nc nd b">models.dart</code>文件。复制您生成的dart并粘贴到<code class="fe na nb nc nd b">models.dart </code>文件中。然后删除必要的数据。删除所有toJson方法，因为我们只从API中获取数据，而不发布数据。格式化后，我只剩下数据:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="b8b3" class="ni ko iq nd b gy nj nk l nl nm">class Flash {<br/>  String? name;<br/>  int? runtime;</span><span id="ea10" class="ni ko iq nd b gy nn nk l nl nm">ModelImage? image;<br/>  String? summary;<br/>  Embedded? eEmbedded;</span><span id="2345" class="ni ko iq nd b gy nn nk l nl nm">Flash({<br/>    this.name,<br/>    this.runtime,<br/>    this.image,<br/>    this.summary,<br/>    this.eEmbedded,<br/>  });</span><span id="74b8" class="ni ko iq nd b gy nn nk l nl nm">Flash.fromJson(Map&lt;String, dynamic&gt; json) {<br/>    name = json['name'];<br/>    runtime = json['runtime'];<br/>    image = json['image'] != null ? ModelImage.fromJson(json['image']) : null;<br/>    summary = json['summary'];<br/>    eEmbedded =<br/>        json['_embedded'] != null ? Embedded.fromJson(json['_embedded']) : null;<br/>  }<br/>}</span><span id="1bea" class="ni ko iq nd b gy nn nk l nl nm">class ModelImage {<br/>  String? medium;<br/>  String? original;</span><span id="6a8e" class="ni ko iq nd b gy nn nk l nl nm">ModelImage({this.medium, this.original});</span><span id="82d9" class="ni ko iq nd b gy nn nk l nl nm">ModelImage.fromJson(Map&lt;String, dynamic&gt; json) {<br/>    medium = json['medium'];<br/>    original = json['original'];<br/>  }<br/>}</span><span id="1b2e" class="ni ko iq nd b gy nn nk l nl nm">class Embedded {<br/>  List&lt;Episodes&gt;? episodes;</span><span id="cb8f" class="ni ko iq nd b gy nn nk l nl nm">Embedded({this.episodes});</span><span id="1ed0" class="ni ko iq nd b gy nn nk l nl nm">Embedded.fromJson(Map&lt;String, dynamic&gt; json) {<br/>    if (json['episodes'] != null) {<br/>      episodes = &lt;Episodes&gt;[];<br/>      json['episodes'].forEach((v) {<br/>        episodes!.add(Episodes.fromJson(v));<br/>      });<br/>    }<br/>  }<br/>}</span><span id="a219" class="ni ko iq nd b gy nn nk l nl nm">class Episodes {<br/>  String? name;<br/>  int? season;<br/>  int? number;<br/>  int? runtime;<br/>  ModelImage? image;<br/>  String? summary;</span><span id="cf13" class="ni ko iq nd b gy nn nk l nl nm">Episodes({<br/>    this.name,<br/>    this.season,<br/>    this.number,<br/>    this.runtime,<br/>    this.image,<br/>    this.summary,<br/>  });</span><span id="2df4" class="ni ko iq nd b gy nn nk l nl nm">Episodes.fromJson(Map&lt;String, dynamic&gt; json) {<br/>    name = json['name'];<br/>    season = json["season"];<br/>    number = json['number'];<br/>    runtime = json['runtime'];<br/>    image = json['image'] != null ? ModelImage.fromJson(json['image']) : null;<br/>    summary = json['summary'];<br/>  }<br/>}</span></pre><p id="69ba" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">然后创建我们的<code class="fe na nb nc nd b">HomeScreen</code>并添加一个脚手架:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="0ecd" class="ni ko iq nd b gy nj nk l nl nm">import 'package:flutter/material.dart';</span><span id="abb2" class="ni ko iq nd b gy nn nk l nl nm">class HomeScreen extends StatelessWidget {<br/>  const HomeScreen({Key? key}) : super(key: key);</span><span id="6f92" class="ni ko iq nd b gy nn nk l nl nm"><a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      appBar: AppBar(),<br/>    );<br/>  }<br/>}</span></pre><p id="14ac" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">然后在我们的<code class="fe na nb nc nd b">main.dart</code>(这是我们应用程序的根)文件中导入<code class="fe na nb nc nd b">HomeScreen</code>，并在<code class="fe na nb nc nd b">MaterialApp</code>小部件的home小部件中添加<code class="fe na nb nc nd b">HomeScreen</code>。同样，将<code class="fe na nb nc nd b">debugShowCheckedModeBanner</code>设置为<code class="fe na nb nc nd b">false</code>。</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="1bda" class="ni ko iq nd b gy nj nk l nl nm">import 'package:flash_app/screens/screens.dart';<br/>import 'package:flutter/material.dart';</span><span id="f26c" class="ni ko iq nd b gy nn nk l nl nm">void main() {<br/>  runApp(const MyApp());<br/>}</span><span id="e92e" class="ni ko iq nd b gy nn nk l nl nm">class MyApp extends StatelessWidget {<br/>  const MyApp({Key? key}) : super(key: key);</span><span id="42cf" class="ni ko iq nd b gy nn nk l nl nm">// This widget is the root of your application.<br/>  <a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      debugShowCheckedModeBanner: false,<br/>      title: 'Flutter Demo',<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.blue,<br/>      ),<br/>      home: const HomeScreen(),<br/>    );<br/>  }<br/>}</span></pre><p id="6e8e" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">接下来，我们在<code class="fe na nb nc nd b">services.dart</code>中创建我们的API服务。</p><p id="f78a" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">我们创建一个带有异步函数的类，该函数返回一个<code class="fe na nb nc nd b">Flash?</code>的<code class="fe na nb nc nd b">Future</code>。回想一下，这使得我们的数据类型可以为空。</p><p id="930d" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">对于我们的API调用，我们使用HTTP包。去pub.dev搜索http。然后将最新版本复制到您的<code class="fe na nb nc nd b">pubspec.yaml</code>文件中，并运行flutter pub get。在写这篇文章的时候，^0.13.4是最新的版本。然后在<code class="fe na nb nc nd b">sevices.dart</code>文件中导入<code class="fe na nb nc nd b">http</code>包，用它从API获取数据，然后解码响应并将响应映射到您的模型文件。参见下面的代码</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="a142" class="ni ko iq nd b gy nj nk l nl nm">http: ^0.13.4</span><span id="e12c" class="ni ko iq nd b gy nn nk l nl nm">import 'dart:convert';</span><span id="5189" class="ni ko iq nd b gy nn nk l nl nm">import 'package:flash_app/models/models.dart';<br/>import 'package:http/http.dart' as http;</span><span id="0db5" class="ni ko iq nd b gy nn nk l nl nm">class ApiServices {<br/>  Future&lt;Flash?&gt; getMovies() async {<br/>    var url = Uri.parse(<br/>        "<a class="ae mu" href="https://api.tvmaze.com/singlesearch/shows?q=flash&amp;embed=episodes" rel="noopener ugc nofollow" target="_blank">https://api.tvmaze.com/singlesearch/shows?q=flash&amp;embed=episodes</a>");<br/>    var response = await http.get(url);<br/>    if (response.statusCode == 200) {<br/>      var result = response.body;<br/>      var decodedRes = jsonDecode(result);<br/>      return Flash.fromJson(decodedRes);<br/>    } else {<br/>      return null;<br/>    }<br/>  }<br/>}</span></pre><p id="d931" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">让我们在我们的主屏幕上工作。我们的主屏幕是一个有状态的小部件，我们返回一个<code class="fe na nb nc nd b">futurebuilder</code>,它获取我们在APiServices类中创建的未来。然后，我们使用switch、case和default语句来检查我们与tvMaze api的连接状态。如果连接成功，我们的数据就会显示出来。如果不是，则传递一个提升的按钮。</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="275d" class="ni ko iq nd b gy nj nk l nl nm">import 'package:flash_app/models/models.dart';<br/>import 'package:flash_app/services/services.dart';<br/>import 'package:flutter/material.dart';</span><span id="ba51" class="ni ko iq nd b gy nn nk l nl nm">class HomeScreen extends StatefulWidget {<br/>  const HomeScreen({Key? key}) : super(key: key);</span><span id="f7ff" class="ni ko iq nd b gy nn nk l nl nm"><a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  State&lt;HomeScreen&gt; createState() =&gt; _HomeScreenState();<br/>}</span><span id="0183" class="ni ko iq nd b gy nn nk l nl nm">class _HomeScreenState extends State&lt;HomeScreen&gt; {<br/>  <a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return FutureBuilder(<br/>      future: ApiServices().getMovies(),<br/>      builder: (context, snapshot) {<br/>        switch (snapshot.connectionState) {<br/>          case ConnectionState.waiting:<br/>            return const Center(<br/>              child: CircularProgressIndicator(),<br/>            );<br/>          default:<br/>            if (snapshot.hasError) {<br/>              return Center(<br/>                child: ElevatedButton(<br/>                  onPressed: () {},<br/>                  child: const Text("Oops!!! no internet connection"),<br/>                ),<br/>              );<br/>            } else {<br/>              final series = snapshot.data as Flash;<br/>              return Padding(<br/>                padding: const EdgeInsets.all(8.0),<br/>                child: Container(<br/>                    decoration: BoxDecoration(<br/>                      image: DecorationImage(<br/>                        image: NetworkImage(series.image!.original.toString()),<br/>                        fit: BoxFit.cover,<br/>                      ),<br/>                    ),<br/>                    child: SingleChildScrollView(<br/>                      child: Center(<br/>                        child: Card(<br/>                          elevation: 5,<br/>                          margin: const EdgeInsets.symmetric(<br/>                              horizontal: 10, vertical: 6),<br/>                          color: Colors.transparent,<br/>                          child: Column(<br/>                            crossAxisAlignment: CrossAxisAlignment.center,<br/>                            mainAxisAlignment: MainAxisAlignment.start,<br/>                            children: [<br/>                              const SizedBox(<br/>                                height: 70,<br/>                              ),<br/>                              Text(<br/>                                series.name.toString(),<br/>                                style: const TextStyle(<br/>                                  color: Colors.black,<br/>                                  fontSize: 30,<br/>                                  fontWeight: FontWeight.w900,<br/>                                ),<br/>                              ),<br/>                              const SizedBox(<br/>                                height: 20,<br/>                              ),<br/>                              Text(<br/>                                series.summary.toString(),<br/>                                style: const TextStyle(<br/>                                    color: Colors.white,<br/>                                    fontSize: 20,<br/>                                    fontWeight: FontWeight.w300),<br/>                              ),<br/>                              ElevatedButton(<br/>                                onPressed: () {},<br/>                                child: const Text('Episodes'),<br/>                              )<br/>                            ],<br/>                          ),<br/>                        ),<br/>                      ),<br/>                    )),<br/>              );<br/>            }<br/>        }<br/>      },<br/>    );<br/>  }<br/>}</span></pre><p id="e3d7" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">然后，我们创建下一个屏幕，即剧集屏幕。这是向我们展示Gridview格式的剧集列表。</p><p id="ebe1" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">它接受三个变量<code class="fe na nb nc nd b">episodes</code>、<code class="fe na nb nc nd b">images</code>和<code class="fe na nb nc nd b">_context</code>，如下面的代码所示。当点击任何<code class="fe na nb nc nd b">gridview.builder</code>项时，调用<code class="fe na nb nc nd b">summary()</code>函数，返回该集的<code class="fe na nb nc nd b">showdialog</code>和<code class="fe na nb nc nd b">summary</code>。</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="7368" class="ni ko iq nd b gy nj nk l nl nm">import 'package:flash_app/models/models.dart';<br/>import 'package:flutter/material.dart';</span><span id="60f9" class="ni ko iq nd b gy nn nk l nl nm">class EpisodesScreen extends StatelessWidget {<br/>  final List&lt;Episodes&gt; episodes;<br/>  final ModelImage images;<br/>  late BuildContext _context;<br/>  EpisodesScreen({<br/>    Key? key,<br/>    required this.episodes,<br/>    required this.images,<br/>  }) : super(key: key);<br/>//Dialog for displaying summary<br/>  summary(String? summary) {<br/>    showDialog(<br/>        context: _context,<br/>        builder: (context) =&gt; Center(<br/>              child: Padding(<br/>                padding: const EdgeInsets.all(12.0),<br/>                child: Card(<br/>                  color: Colors.red.withOpacity(0.8),<br/>                  child: Padding(<br/>                    padding: const EdgeInsets.all(12.0),<br/>                    child: Text(<br/>                      summary.toString(),<br/>                      style: const TextStyle(<br/>                          color: Colors.white,<br/>                          fontSize: 16,<br/>                          fontWeight: FontWeight.w600),<br/>                    ),<br/>                  ),<br/>                ),<br/>              ),<br/>            ));<br/>  }</span><span id="69f3" class="ni ko iq nd b gy nn nk l nl nm"><a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    _context = context;<br/>    return Scaffold(<br/>      extendBodyBehindAppBar: true,<br/>      appBar: AppBar(<br/>        title: const Text("Flash Episodes"),<br/>        centerTitle: true,<br/>        backgroundColor: const Color.fromARGB(158, 214, 22, 22),<br/>        elevation: 0,<br/>      ),<br/>      body: Container(<br/>        decoration: BoxDecoration(<br/>          image: DecorationImage(<br/>            image: NetworkImage(images.original.toString()),<br/>            fit: BoxFit.cover,<br/>          ),<br/>        ),<br/>        child: Padding(<br/>          padding: const EdgeInsets.all(8.0),<br/>          child: GridView.builder(<br/>              gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(<br/>                crossAxisCount: 2,<br/>                childAspectRatio: 1.0,<br/>              ),<br/>              itemCount: episodes.length,<br/>              itemBuilder: (context, index) =&gt; InkWell(<br/>                    onTap: () {<br/>                      summary(episodes[index].summary);<br/>                    },<br/>                    child: Card(<br/>                      child: Stack(<br/>                        fit: StackFit.expand,<br/>                        children: [<br/>                          Image.network(<br/>                            episodes[index].image!.original!,<br/>                            fit: BoxFit.cover,<br/>                          ),<br/>                          Padding(<br/>                            padding: const EdgeInsets.all(8.0),<br/>                            child: Column(<br/>                              mainAxisAlignment: MainAxisAlignment.end,<br/>                              children: [<br/>                                Text(<br/>                                  episodes[index].name!,<br/>                                  style: const TextStyle(<br/>                                      fontWeight: FontWeight.bold,<br/>                                      color: Colors.white,<br/>                                      fontSize: 15.0),<br/>                                )<br/>                              ],<br/>                            ),<br/>                          ),<br/>                          Positioned(<br/>                            top: 0.0,<br/>                            left: 0.0,<br/>                            child: Padding(<br/>                              padding:<br/>                                  const EdgeInsets.symmetric(horizontal: 10),<br/>                              child: Row(<br/>                                crossAxisAlignment: CrossAxisAlignment.start,<br/>                                mainAxisSize: MainAxisSize.max,<br/>                                mainAxisAlignment: MainAxisAlignment.center,<br/>                                children: [<br/>                                  Container(<br/>                                    color: Colors.black,<br/>                                    child: Text(<br/>                                      " Season ${episodes[index].season.toString()}",<br/>                                      style: const TextStyle(<br/>                                        color: Colors.white,<br/>                                        fontSize: 15,<br/>                                        fontWeight: FontWeight.bold,<br/>                                      ),<br/>                                    ),<br/>                                  ),<br/>                                  Container(<br/>                                    color: Colors.red,<br/>                                    child: Text(<br/>                                      " Episode ${episodes[index].number.toString()}",<br/>                                      style: const TextStyle(<br/>                                        color: Colors.white,<br/>                                        fontSize: 15,<br/>                                        fontWeight: FontWeight.bold,<br/>                                      ),<br/>                                    ),<br/>                                  ),<br/>                                ],<br/>                              ),<br/>                            ),<br/>                          )<br/>                        ],<br/>                      ),<br/>                    ),<br/>                  )),<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="996f" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">接下来，我们从主页添加<code class="fe na nb nc nd b">Navigation</code>到剧集页面，然后添加<code class="fe na nb nc nd b">setstate(){}</code>函数来重新加载我们的应用程序。主屏幕的最后代码是</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="e3ea" class="ni ko iq nd b gy nj nk l nl nm">import 'package:flash_app/models/models.dart';<br/>import 'package:flash_app/screens/episodes.dart';<br/>import 'package:flash_app/services/services.dart';<br/>import 'package:flutter/material.dart';</span><span id="3b47" class="ni ko iq nd b gy nn nk l nl nm">class HomeScreen extends StatefulWidget {<br/>  const HomeScreen({Key? key}) : super(key: key);</span><span id="b0a5" class="ni ko iq nd b gy nn nk l nl nm"><a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  State&lt;HomeScreen&gt; createState() =&gt; _HomeScreenState();<br/>}</span><span id="4a97" class="ni ko iq nd b gy nn nk l nl nm">class _HomeScreenState extends State&lt;HomeScreen&gt; {<br/>  <a class="ae mu" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return FutureBuilder(<br/>      future: ApiServices().getMovies(),<br/>      builder: (context, snapshot) {<br/>        switch (snapshot.connectionState) {<br/>          case ConnectionState.waiting:<br/>            return const Center(<br/>              child: CircularProgressIndicator(),<br/>            );<br/>          default:<br/>            if (snapshot.hasError) {<br/>              return Center(<br/>                child: ElevatedButton(<br/>                  onPressed: () {<br/>                    setState(() {<br/>                      snapshot.hasData;<br/>                    });<br/>                  },<br/>                  child: const Text("Oops!!! no internet connection"),<br/>                ),<br/>              );<br/>            } else {<br/>              final series = snapshot.data as Flash;<br/>              return Padding(<br/>                padding: const EdgeInsets.all(8.0),<br/>                child: Container(<br/>                    decoration: BoxDecoration(<br/>                      image: DecorationImage(<br/>                        image: NetworkImage(series.image!.original.toString()),<br/>                        fit: BoxFit.cover,<br/>                      ),<br/>                    ),<br/>                    child: SingleChildScrollView(<br/>                      child: Center(<br/>                        child: Card(<br/>                          elevation: 5,<br/>                          margin: const EdgeInsets.symmetric(<br/>                              horizontal: 10, vertical: 6),<br/>                          color: Colors.transparent,<br/>                          child: Column(<br/>                            crossAxisAlignment: CrossAxisAlignment.center,<br/>                            mainAxisAlignment: MainAxisAlignment.start,<br/>                            children: [<br/>                              const SizedBox(<br/>                                height: 70,<br/>                              ),<br/>                              Text(<br/>                                series.name.toString(),<br/>                                style: const TextStyle(<br/>                                  color: Colors.black,<br/>                                  fontSize: 30,<br/>                                  fontWeight: FontWeight.w900,<br/>                                ),<br/>                              ),<br/>                              const SizedBox(<br/>                                height: 20,<br/>                              ),<br/>                              Text(<br/>                                series.summary.toString(),<br/>                                style: const TextStyle(<br/>                                    color: Colors.white,<br/>                                    fontSize: 20,<br/>                                    fontWeight: FontWeight.w300),<br/>                              ),<br/>                              ElevatedButton(<br/>                                onPressed: () {<br/>                                  Navigator.push(<br/>                                    context,<br/>                                    MaterialPageRoute(<br/>                                      builder: ((context) =&gt; EpisodesScreen(<br/>                                            episodes:<br/>                                                series.eEmbedded!.episodes!,<br/>                                            images: series.image!,<br/>                                          )),<br/>                                    ),<br/>                                  );<br/>                                },<br/>                                child: const Text('Episodes'),<br/>                              )<br/>                            ],<br/>                          ),<br/>                        ),<br/>                      ),<br/>                    )),<br/>              );<br/>            }<br/>        }<br/>      },<br/>    );<br/>  }<br/>}</span></pre><p id="23e1" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">瞧，您可以运行您的应用程序并查看您的flash系列应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3ee64487297974bbd72eeb6d5a74ae4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/1*IKd40PYjQ64RegU5qdDojw.gif"/></div></figure><h1 id="df8b" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">摘要</h1><p id="d7c4" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本文中，我们看到了如何用<code class="fe na nb nc nd b">http.get</code>发出简单的网络请求以及其他有趣的事情。关于这个应用需要注意的一个关键点是，它也可以用于其他TVmaze系列，只需改变API电影标题即可</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="44fb" class="ni ko iq nd b gy nj nk l nl nm">“<a class="ae mu" href="https://api.tvmaze.com/singlesearch/shows?q=flash&amp;embed=episodes" rel="noopener ugc nofollow" target="_blank">https://api.tvmaze.com/singlesearch/shows?q=flash&amp;embed=episodes</a></span><span id="1649" class="ni ko iq nd b gy nn nk l nl nm">you can change flash to any other movie included in the tvmaze API and get your app which is similar to what we did.<br/>let’s try changing the url of our Apiservices() class in services.dart with any of this url and run our app</span></pre><p id="efaa" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">让我们尝试用这些URL中的任何一个来更改<code class="fe na nb nc nd b">services.dart</code>中的<code class="fe na nb nc nd b">Apiservices()</code>类的URL，并运行我们的应用程序:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="4e05" class="ni ko iq nd b gy nj nk l nl nm">https://api.tvmaze.com/singlesearch/shows?q=girls&amp;embed=episodes https://api.tvmaze.com/singlesearch/shows?q=orville&amp;embed=episodes https://api.tvmaze.com/singlesearch/shows?q=boys&amp;embed=episodes https://api.tvmaze.com/singlesearch/shows?q=24&amp;embed=episodes https://api.tvmaze.com/singlesearch/shows?q=superman&amp;embed=episodes https://api.tvmaze.com/singlesearch/shows?q=naruto&amp;embed=episodes https://api.tvmaze.com/singlesearch/shows?q=avatar&amp;embed=episodes</span></pre><p id="68b3" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">看这里的例子我改成了火影忍者动漫api端点:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="1d57" class="ni ko iq nd b gy nj nk l nl nm">class ApiServices {<br/>  Future&lt;Flash?&gt; getMovies() async {<br/>    var url = Uri.parse(<br/>        "<a class="ae mu" href="https://api.tvmaze.com/singlesearch/shows?q=naruto&amp;embed=episodes" rel="noopener ugc nofollow" target="_blank">https://api.tvmaze.com/singlesearch/shows?q=naruto&amp;embed=episodes</a>");<br/>    var response = await http.get(url);<br/>    if (response.statusCode == 200) {<br/>      var result = response.body;<br/>      var decodedRes = jsonDecode(result);<br/>      return Flash.fromJson(decodedRes);<br/>    } else {<br/>      return null;<br/>    }<br/>  }<br/>}</span></pre><h1 id="83db" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">最后一个音符</h1><p id="26e3" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因此，有了这个应用程序教程，您可以使用<code class="fe na nb nc nd b">tvmaze</code>端点创建任何系列摘要应用程序，因为它们有相似的JSON响应格式，因此也有相似的模型。</p><p id="1252" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">根据你的时间，你可以查看所有你喜欢的电视剧的电视迷宫，并为它们开发一个应用程序，你可以在代码工作上与我分享</p><p id="1398" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">在我们的下一篇文章中，您将看到当有一个API键时如何发出请求。</p><p id="6f31" class="pw-post-body-paragraph lf lg iq lh b li mg jr lk ll mh ju ln lo mi lq lr ls mj lu lv lw mk ly lz ma ij bi translated">源代码在GitHub repo中:</p><div class="nq nr gp gr ns nt"><a href="https://github.com/Obikwelu/flashapp" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">GitHub - Obikwelu/flashapp</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kl nt"/></div></div></a></div><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="a997" class="ni ko iq nd b gy nj nk l nl nm"><strong class="nd ir">Want to Connect?</strong></span><span id="4240" class="ni ko iq nd b gy nn nk l nl nm">This article is also published at <a class="ae mu" href="https://www.codenjobs.com/" rel="noopener ugc nofollow" target="_blank">codenjobs.com </a>.</span></pre></div></div>    
</body>
</html>