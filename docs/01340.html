<html>
<head>
<title>JavaScript Tips #2: Object/Array Deep Clone Implementation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript技巧#2:对象/数组深度克隆实现</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-tips-2-object-array-deep-clone-implementation-2d6a43e43d2a?source=collection_archive---------12-----------------------#2019-09-02">https://betterprogramming.pub/javascript-tips-2-object-array-deep-clone-implementation-2d6a43e43d2a?source=collection_archive---------12-----------------------#2019-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="da5e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">JavaScript中深度克隆方法的简单实现</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/5ef36dd5aff6e31659236a023ce599f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*HZSgS3mDx6InUm7uIF_-Nw.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">约翰·莫塞斯·鲍恩在<a class="ae ku" href="https://unsplash.com/photos/2zUWGeg8DTw" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="8440" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">问题是</h1><p id="7cab" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">由于数组和对象的本地方法，例如<code class="fe mj mk ml mm b">Array.prototype.slice</code> <strong class="lp iu"> </strong>和<code class="fe mj mk ml mm b">Object.assign</code>，<strong class="lp iu"> </strong>，我们能够为我们的数据创建新的引用，在新的实例中复制所有的属性/元素。但是当我们的列表包含嵌套的对象/数组时，问题就来了。由于它们以引用的形式存储在内存中，所以<code class="fe mj mk ml mm b">.slice </code>和<em class="mn"> </em> <code class="fe mj mk ml mm b">.assign</code>的实现将只是复制那个关联的地址:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/f8e6c9ad1f7fc22a552d24dd2e969920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qQ_8i8WjcSsK8eDnIrFMCw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">嗯，嵌套元素不会作为新元素复制</p></figure><p id="fd7c" class="pw-post-body-paragraph ln lo it lp b lq mt ju ls lt mu jx lv lw mv ly lz ma mw mc md me mx mg mh mi im bi translated">那么，我们如何才能创建一个深层副本来创建嵌套属性的新实例呢？</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="4028" class="kv kw it bd kx ky nf la lb lc ng le lf jz nh ka lh kc ni kd lj kf nj kg ll lm bi translated">解决方案</h1><p id="43e2" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">网上有大量的解决方案，许多像<a class="ae ku" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> Lodash </a>这样的库已经提供了一个解决方案。但我希望你会喜欢我的解决方案。首先，理解幕后发生的事情可能是有用的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nk"><img src="../Images/b246676c4274a0844aac050e9014b489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mo7Rux3uvmDy7HqIHCbVQw.png"/></div></div></figure><p id="76fe" class="pw-post-body-paragraph ln lo it lp b lq mt ju ls lt mu jx lv lw mv ly lz ma mw mc md me mx mg mh mi im bi translated">如您所见，它非常简单，易于阅读，但它做得很好。</p><p id="fdb5" class="pw-post-body-paragraph ln lo it lp b lq mt ju ls lt mu jx lv lw mv ly lz ma mw mc md me mx mg mh mi im bi translated">它接受任何类型的输入，并返回一个新的实例，复制所有属性，如果找到嵌套的对象/数组，则递归调用该函数。</p><p id="afd7" class="pw-post-body-paragraph ln lo it lp b lq mt ju ls lt mu jx lv lw mv ly lz ma mw mc md me mx mg mh mi im bi translated">请记住，有些类型不一定需要克隆，例如函数或符号，因此复制它们的引用是安全的。</p><p id="914a" class="pw-post-body-paragraph ln lo it lp b lq mt ju ls lt mu jx lv lw mv ly lz ma mw mc md me mx mg mh mi im bi translated">希望你喜欢这篇文章。谢谢你阅读它。</p></div></div>    
</body>
</html>