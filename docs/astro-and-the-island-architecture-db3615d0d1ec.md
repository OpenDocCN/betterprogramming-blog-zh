# 阿童木和岛屿建筑

> 原文：<https://betterprogramming.pub/astro-and-the-island-architecture-db3615d0d1ec>

## Astro 用你选择的前端框架创建了一个快速的交互式网站。如何实现这一点？

![](img/7d0583a5dba3bc3ad6d1f554382a3ebd.png)

卢卡斯·戴维斯在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

又到了引入新的 JavaScript 框架的时候了。今天，新的框架 [Astro](https://astro.build/) 在几周前发布了第一个完整的 1.0 版本。但是，是什么让 Astro 和它的“孤岛架构”在 JavaScript 框架的无尽世界中与它的竞争对手如此不同呢？让我们来看看。

我认为 Astro 的核心是一个静态站点生成器。您可以选择使用模板来编写代码，然后这些模板会被转换成真正优化的 HTML 页面。然而，这种描述对框架来说有点不公平，因为它可以做更多的事情。除了真正的静态页面 HTML 生成之外，Astro 还可以呈现页面的交互部分。但是如何在静态文件中显示交互元素呢？这个问题困扰了网络社区很长一段时间。

# 对互动性的追求

互联网初期，只有静态文件。您使用 URL 来访问特定的超文本**文档**。后来又引入了 CSS 和 JavaScript。现在，您可以用 CSS 样式化文档，用 JavaScript 实时操作 DOM。一个网站由多个页面组成:它是一个多页面应用程序。

多页面应用程序是在网络上做事情的传统方式。在过去，由于缓慢而复杂的执行，您希望避免在客户机上运行代码。多页面应用程序通常与后端服务器捆绑在一起。当用户访问站点时，服务器生成包含最新内容的 HTML 页面。此外，您可以从数据库中提取各种数据，并在服务器上进行用户验证。

几年过去了，现在我们已经有了客户端框架，可以从一开始就进行*状态管理*和更多事情。开发者有能力用这些强大的工具开发类似 app 的网站。单页应用程序诞生了。它只包含一个 HTML 文件，使用 JavaScript 来呈现站点的其余部分。但是，您需要向浏览器客户端发送大量的 JavaScript，以便能够以交互的方式呈现网页。大量使用 JavaScript 导致首页加载缓慢，并且没有很好的 SEO 选项。拥有许多文件的大型应用程序也非常复杂。

所以，让我们退一步。我们可以将单页面应用程序的开发者体验与多页面应用程序的灵活性结合起来。我们可以发送更小的部分作为单独的站点，而不是发送一个巨大的 JavaScript 应用程序。这是许多服务器端渲染框架的工作方式。

# 动态到静态

一种多页面应用程序的问题是前端与后端很少集成。有必要在后台运行服务器。但并不是每个网站都有大量变化的数据，动态生成才有意义。

此外，这使得网站作为一个整体更复杂的处理和编程。那么，解决办法是什么呢？我们不会在每次用户请求时都呈现网站，而是提前呈现。

现在，只有静态文件存储在服务器上。这种方法更简单，也是 JAM 栈(JavaScript、API、标记)的基础。一些数据现在是预先呈现的静态部分，一些数据是通过 API 在客户端收集的。

但是这里我们仍然没有解决必须在客户端运行大量 JavaScript 的问题。如果我们没有交互和经常变化的内容，我们可以预渲染整个页面，就像 Hugo 这样的静态站点生成器已经做了一段时间。通常两者都有。这就是阿童木的用武之地。

# 岛屿及其用途

Astro 提前渲染了网站的静态部分。JavaScript 仍然用于网站的动态部分。它们或多或少作为网站的一个独立的自我整合的部分，创造了一个**孤岛**。同时，阿童木并不固执己见。Astro 让你可以用自己选择的 JavaScript 框架来设计网站的动态部分。如果你想为你的网站使用[苗条](https://nikolas.blog/tag/svelte/)，没问题。但是你的网站的某些部分需要 React 及其庞大的图书馆生态系统吗？没问题！对这些部分使用 React 即可。

此外，这种方法解决了另一个大问题:JavaScript 太慢了。乍一看，在客户端呈现网页听起来是个好主意。现在，您可以使用客户端设备的资源。但实际上，这些还是有限的。最终，显示一个 HTML 文件总是比呈现这样的文件要快。这就是为什么 Astro 在其核心相对较快。

此外，Astro 为博客提供了一个非常有趣的功能:用 Markdown 创建页面。这允许您简单地为单个页面创建一个新的 Markdown 文件，然后在构建过程中将其转换为 HTML。

# 摘要

那么，什么是阿童木？我会把它目前的形式描述为一个静态的站点生成器，具有极好的交互性。Astro 还可以做服务器端渲染等很多功能。但核心仍然是半动态网站。这就是阿童木可以大放异彩的地方。

```
This article can also be found on my blog: [https://nikolas.blog/astro-and-the-island-architecture/](https://nikolas.blog/astro-and-the-island-architecture/)
```