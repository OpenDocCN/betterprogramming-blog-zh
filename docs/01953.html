<html>
<head>
<title>Using the Vue.js Composition API With Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Vue.js组合API与Firebase一起使用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-vue-composition-api-with-firebase-18bd9154e19?source=collection_archive---------8-----------------------#2019-10-25">https://betterprogramming.pub/using-vue-composition-api-with-firebase-18bd9154e19?source=collection_archive---------8-----------------------#2019-10-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4418" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用新的Vue.js组合API将Firebase集成分离到Vue.js应用程序中的示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a06fc4628377fff761b8e67341ceb121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYxQGgDRI_Ehgn7GeXw2WA.png"/></div></div></figure><h1 id="44e5" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">概观</h1><p id="d25a" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">我们将使用新的VueJS组合API将Firebase集成分离到一个VueJS应用程序中。我们将重点确定是否已经保存了与应用程序相关的用户信息，或者用户是否需要登录应用程序。如果用户需要登录到应用程序，我们将提供使用组合API应用程序结构登录和注销Firebase的能力。</p><h1 id="be5c" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">视频系列播放列表</h1><p id="46cf" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><a class="ae mi" href="https://www.youtube.com/playlist?list=PL2PY2-9rsgl2bgNTX9omlDisiWh1NYInz" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/playlist?list = pl2py 2-9 rsgl 2 BGN tx 9 omldisiwh 1 nyinz</a></p><p id="1811" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">我们假设对<a class="ae mi" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> VueJS </a>和<a class="ae mi" href="https://firebase.google.com/?authuser=0" rel="noopener ugc nofollow" target="_blank"> Firebase </a>有一个基本的了解。关于设置您的应用程序以使用Firebase JavasSript SDK的更多信息可以在这个<a class="ae mi" href="https://firebase.google.com/docs/web/setup?authuser=0" rel="noopener ugc nofollow" target="_blank">链接</a>中找到。</p><p id="5b95" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">其他部分:</p><ul class=""><li id="0196" class="mo mp it lo b lp mj ls mk lv mq lz mr md ms mh mt mu mv mw bi translated"><a class="ae mi" href="https://medium.com/@c_innovative/vuejs-composition-api-sample-app-w-video-eaff85c13efa" rel="noopener">带视频的VueJS组合API示例应用</a></li><li id="f48f" class="mo mp it lo b lp mx ls my lv mz lz na md nb mh mt mu mv mw bi translated"><a class="ae mi" href="https://medium.com/@c_innovative/using-vue-composition-api-with-firebase-vuex-part-iii-7870be80a0b" rel="noopener">使用带有Firebase和Vuex的Vue.js组合API:第三部分</a></li></ul></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="7425" class="ku kv it bd kw kx nj kz la lb nk ld le jz nl ka lg kc nm kd li kf nn kg lk ll bi translated">入门指南</h1><p id="a14b" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">如果你还不熟悉的话，请看看我的视频<a class="ae mi" href="https://dev.to/aaronksaunders/vuejs-composition-api-sample-app-w-video-d04" rel="noopener ugc nofollow" target="_blank"> VueJS组合API示例应用程序，带视频</a>开始了解<a class="ae mi" href="https://buff.ly/2He4rUk" rel="noopener ugc nofollow" target="_blank"> VueJS组合API </a></p><h1 id="7468" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">设置<code class="fe no np nq nr b">main.js</code></h1><p id="5e10" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">确保您为组合API安装了Vue2插件。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="f34c" class="nw kv it nr b gy nx ny l nz oa">// main.js</span><span id="fca7" class="nw kv it nr b gy ob ny l nz oa">import Vue from 'vue'<br/>import App from './App.vue'<br/>import VueCompositionApi from "@vue/composition-api";<br/><br/><br/>Vue.config.productionTip = false<br/>Vue.use(VueCompositionApi);<br/><br/><br/>new Vue({<br/>  render: h =&gt; h(App),<br/>}).$mount('#app')</span></pre><p id="e380" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">在我们的<code class="fe no np nq nr b">App.vue</code>中，我们有一个基本模板，它使用<code class="fe no np nq nr b">ThingList</code>组件显示一个事物列表，我们使用<code class="fe no np nq nr b">Login</code>组件显示一个表单。</p><p id="9f0e" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">渲染的内容由三个反应属性控制:<code class="fe no np nq nr b">loading</code>、<code class="fe no np nq nr b">error</code>和<code class="fe no np nq nr b">user</code>。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="875f" class="nw kv it nr b gy nx ny l nz oa">// App.vue</span><span id="200a" class="nw kv it nr b gy ob ny l nz oa">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div v-if="loading"&gt;LOADING...&lt;/div&gt;<br/>    &lt;div v-else-if="error"&gt;{{error}}&lt;/div&gt;<br/>    &lt;div v-else-if="user"&gt;<br/>      &lt;h2&gt;{{user.displayName}}&amp;nbsp;&amp;nbsp;{{user.email}}&lt;/h2&gt;<br/>      &lt;h4&gt;<br/>        &lt;button @click="logout()"&gt;LOGOUT&lt;/button&gt;<br/>      &lt;/h4&gt;<br/>      &lt;hr /&gt;<br/>      &lt;br /&gt;<br/>      &lt;ThingList /&gt;<br/>    &lt;/div&gt;<br/>    &lt;div v-else&gt;<br/>      &lt;LoginForm&gt;&lt;/LoginForm&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="3a04" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">这些属性来自于使用3.0中发布的新的<a class="ae mi" href="https://vue-composition-api-rfc.netlify.com/" rel="noopener ugc nofollow" target="_blank">合成AP </a> I，但是在2.0中可以通过使用<code class="fe no np nq nr b">vue-composition-api</code>插件来访问</p><p id="7c1d" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">Vue2插件可从<a class="ae mi" href="https://buff.ly/35TgSja" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="ccf1" class="ku kv it bd kw kx nj kz la lb nk ld le jz nl ka lg kc nm kd li kf nn kg lk ll bi translated">Vue合成API函数:<code class="fe no np nq nr b">useAuth</code></h1><p id="0cc4" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">该函数将执行Firebase认证检查，并在检查用户的认证状态时设置<code class="fe no np nq nr b">user</code>属性或<code class="fe no np nq nr b">error</code>属性。当Firebase进行API调用时，<code class="fe no np nq nr b">loading</code>属性也将被设置。</p><p id="9f3f" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">我们在这里所做的就是进行<code class="fe no np nq nr b">firebase</code> API调用，并根据API调用的结果更新函数中的属性。由于这些状态变量是反应性的，当它们被更新时，将导致屏幕/UI被重新呈现。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="84c0" class="nw kv it nr b gy nx ny l nz oa">// useAuth.js</span><span id="4be8" class="nw kv it nr b gy ob ny l nz oa">import { toRefs, reactive } from "@vue/composition-api";<br/>import firebase from "firebase";<br/>// Required for side-effects<br/>import "firebase/firestore";<br/><br/>// initialize firebase, this is directly from the firebase documentation<br/>// regarding getting started for the web<br/>if (firebase.apps.length === 0) {<br/>  const firebaseConfig = {<br/>    /* YOUR CONFIGURATION GOES HERE */<br/>  };<br/>  firebase.initializeApp(firebaseConfig);<br/>}<br/><br/>export default function() {<br/>  // our reactive properties...<br/>  let state = reactive({<br/>    user: null,<br/>    loading: true,<br/>    error: null<br/>  });<br/><br/>  // make the firebase call to listen for change in auth state,<br/>  // we have set initial loading status to true so nothing happens on UI <br/>  // side until loading is set to false<br/>  firebase.auth().onAuthStateChanged(_user =&gt; {<br/>    if (_user) {<br/>      state.user = _user;<br/>    } else {<br/>      state.user = null;<br/>    }<br/>    state.loading = false;<br/>  });<br/><br/>  // return all of the properties from the function<br/>  return {<br/>    ...toRefs(state)<br/>  };<br/>}</span></pre></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="bd58" class="ku kv it bd kw kx nj kz la lb nk ld le jz nl ka lg kc nm kd li kf nn kg lk ll bi translated">Vue合成API函数:<code class="fe no np nq nr b">useLogin</code></h1><p id="5405" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">这个函数将完成Firebase的登录和注销功能；这将在检查用户的认证状态时设置<code class="fe no np nq nr b">user</code>属性或<code class="fe no np nq nr b">error</code>属性。当Firebase进行API调用时,<code class="fe no np nq nr b">loading</code>属性也将被设置。</p><p id="1e4a" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">重要的是要注意，当我们进行登录调用并发生错误时(因此提示我们设置<code class="fe no np nq nr b">error</code>，我们不需要设置<code class="fe no np nq nr b">user</code>对象，因为另一个复合函数正在监听用户状态的变化。当检测到时，它将更新<code class="fe no np nq nr b">user</code>对象。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="e931" class="nw kv it nr b gy nx ny l nz oa">// useLogin.js</span><span id="7287" class="nw kv it nr b gy ob ny l nz oa">import { toRefs, reactive, computed } from "@vue/composition-api";<br/>import firebase from "firebase";<br/>// Required for side-effects<br/>import "firebase/firestore";<br/><br/>export default function() {<br/>  let state = reactive({<br/>    error: null,<br/>    username: null,<br/>    password: null,<br/>    user: null<br/>  });<br/><br/>  /**<br/>  * have this value `isValid` get updated when the dependent properties <br/>  * are changed in the composition function<br/>  */<br/>  let isValid = computed(() =&gt; {<br/>    let { username, password } = state;<br/>    return (<br/>      username !== null &amp;&amp;<br/>      username.length !== 0 &amp;&amp;<br/>      password !== null &amp;&amp;<br/>      password.length !== 0<br/>    );<br/>  });<br/><br/><br/>  const login = () =&gt; {<br/>    firebase<br/>      .auth()<br/>      .signInWithEmailAndPassword(state.username, state.password)<br/>      .then(() =&gt; {}, error =&gt; (state.error = error))<br/>      .catch(error =&gt; {<br/>        // Handle Errors here.<br/>        state.error = error;<br/>      });<br/>  };<br/><br/>  const logout = () =&gt; {<br/>    firebase<br/>      .auth()<br/>      .signOut()<br/>      .then(() =&gt; {}, error =&gt; (state.error = error))<br/>      .catch(error =&gt; {<br/>        // Handle Errors here.<br/>        state.error = error;<br/>      });<br/>  };<br/><br/>  return {<br/>    // return all of the properties from the function<br/>    ...toRefs(state),<br/><br/>    // return all of the computed value to make sure we<br/>    // get non null values for username/password from the <br/>    // function<br/>    isValid,<br/><br/>    // pass back a login and logout function to be utilized <br/>    // by the login form<br/>    login,<br/>    logout<br/>  };<br/>}</span></pre></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="43b3" class="ku kv it bd kw kx nj kz la lb nk ld le jz nl ka lg kc nm kd li kf nn kg lk ll bi translated">返回到应用程序组件</h1><p id="9eb0" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">现在我们已经有了复合函数集，我们可以看看应用程序中真正发生了什么。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="15d6" class="nw kv it nr b gy nx ny l nz oa">// App.vue</span><span id="5e44" class="nw kv it nr b gy ob ny l nz oa">&lt;script&gt;<br/>import ThingList from "./components/ThingList.vue";<br/>import LoginForm from "./components/LoginForm.vue";<br/><br/>// composition api imports<br/>import { computed } from "@vue/composition-api";<br/><br/>// our custom composition functions for firebase auth check<br/>// and for logging in and logging out of firebase<br/>import useAuth from "./use-auth";<br/>import useLogin from "./use-login";<br/><br/>export default {<br/>  name: "app",<br/>  components: {<br/>    ThingList,<br/>    LoginForm<br/>  },<br/>  setup() {<br/>    // load in the authentication properties<br/>    let { user, loading, error } = useAuth();<br/><br/>    // load in the login function<br/>    let loginState = useLogin();<br/><br/><br/>    return {<br/>      user,<br/>      loading,<br/><br/>      // here we need to ensure that we get the error from <br/>      // either the loginState or the error returned from the useAuth<br/>      // function<br/>      error : computed(() =&gt; (loginState.error  || error).value),<br/><br/>      // set the logout function from the usLogin composition function<br/>      logout: loginState.logout<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;<br/><br/>&lt;style&gt;<br/>#app {<br/>  font-family: "Avenir", Helvetica, Arial, sans-serif;<br/>  -webkit-font-smoothing: antialiased;<br/>  -moz-osx-font-smoothing: grayscale;<br/>  color: #2c3e50;<br/>  padding: 60px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="8ea6" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">当我们调用这个函数时…</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="a28f" class="nw kv it nr b gy nx ny l nz oa">let { user, loading, error } = useAuth();</span></pre><p id="80ad" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">…我们将调用Firebase来查看以前登录时是否已经有可用的用户信息。如果是，则相应地设置用户对象。否则，我们没有用户也没有错误，应用程序将呈现视图，因为值是反应性的，然后我们将显示<code class="fe no np nq nr b">LoginForm</code>。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="3594" class="nw kv it nr b gy nx ny l nz oa">(a) when firebase is checking for user we are showing loading <br/>(b1) when loading is complete do we have an error? <br/>(b2) when loading is complete do we have a user? If so then render the ThingList Component and some user information <br/>(b3) when loading is complete do not we have a user? If so render the Login Form</span></pre><p id="b049" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">来自<code class="fe no np nq nr b">App.vue</code>的实际模板代码:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="7631" class="nw kv it nr b gy nx ny l nz oa">// App.vue</span><span id="1278" class="nw kv it nr b gy ob ny l nz oa">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    (a) &lt;div v-if="loading"&gt;LOADING...&lt;/div&gt;<br/>    (b1)&lt;div v-else-if="error"&gt;{{error}}&lt;/div&gt;<br/>    (b2)&lt;div v-else-if="user"&gt;<br/>      &lt;h2&gt;{{user.displayName}}&amp;nbsp;&amp;nbsp;{{user.email}}&lt;/h2&gt;<br/>      &lt;h4&gt;<br/>        &lt;button @click="logout()"&gt;LOGOUT&lt;/button&gt;<br/>      &lt;/h4&gt;<br/>      &lt;hr /&gt;<br/>      &lt;br /&gt;<br/>      &lt;ThingList /&gt;<br/>    &lt;/div&gt;<br/>    (b3)&lt;div v-else&gt;<br/>      &lt;LoginForm&gt;&lt;/LoginForm&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="7bc7" class="ku kv it bd kw kx nj kz la lb nk ld le jz nl ka lg kc nm kd li kf nn kg lk ll bi translated">登录表单</h1><p id="927e" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">让我们回到登录表单，看看这一切是如何组合在一起的。</p><p id="4216" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">当应用程序加载这个组件时，我们可以访问<code class="fe no np nq nr b">useLogin</code>组合功能。该函数返回以下内容作为其<code class="fe no np nq nr b">state</code>对象:</p><ul class=""><li id="fc18" class="mo mp it lo b lp mj ls mk lv mq lz mr md ms mh mt mu mv mw bi translated"><code class="fe no np nq nr b">username</code></li><li id="c409" class="mo mp it lo b lp mx ls my lv mz lz na md nb mh mt mu mv mw bi translated"><code class="fe no np nq nr b">password</code></li><li id="3be7" class="mo mp it lo b lp mx ls my lv mz lz na md nb mh mt mu mv mw bi translated"><code class="fe no np nq nr b">error</code></li></ul><p id="a960" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">并返回两个函数:</p><ul class=""><li id="b4a5" class="mo mp it lo b lp mj ls mk lv mq lz mr md ms mh mt mu mv mw bi translated"><code class="fe no np nq nr b">login</code></li><li id="c379" class="mo mp it lo b lp mx ls my lv mz lz na md nb mh mt mu mv mw bi translated"><code class="fe no np nq nr b">logout</code></li></ul><p id="7fc6" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">并返回一个我们用来检查字段是否有效的计算函数:</p><ul class=""><li id="f002" class="mo mp it lo b lp mj ls mk lv mq lz mr md ms mh mt mu mv mw bi translated"><code class="fe no np nq nr b">isValid</code></li></ul><p id="5421" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">在调用了<code class="fe no np nq nr b">login</code>方法之后，我们将在模板上显示一个<code class="fe no np nq nr b">error</code>或者我们将得到一个成功的结果，这将改变<code class="fe no np nq nr b">useAuth</code>复合函数的状态。</p><p id="9ed4" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">然后它将返回一个有效的<code class="fe no np nq nr b">user</code>对象，这将导致应用程序呈现<code class="fe no np nq nr b">ThingList</code>组件并隐藏<code class="fe no np nq nr b">LoginForm</code>组件。</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="cfa5" class="nw kv it nr b gy nx ny l nz oa">// LoginForm.vue</span><span id="6836" class="nw kv it nr b gy ob ny l nz oa">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input type="text" placeholder="username" v-model="username" /&gt;<br/>    &lt;input type="password" placeholder="password" v-model="password" /&gt;<br/>    &lt;button @click="login" :disabled="!isValid"&gt;LOGIN&lt;/button&gt;<br/>    &lt;p&gt;{{error}}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>// import { reactive, toRefs } from "@vue/composition-api";<br/>import useLogin from "../use-login";<br/>export default {<br/>  setup() {<br/>    let state = useLogin();<br/>    return {<br/>        ...state<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="d871" class="ku kv it bd kw kx nj kz la lb nk ld le jz nl ka lg kc nm kd li kf nn kg lk ll bi translated">结论</h1><p id="39cb" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">Vue Composition API是对VueJS 3.0版本的一个非常有趣的补充。我认为它提供了类似于<a class="ae mi" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> react-hooks </a>的功能，所以VueJS开发者不应该觉得他们错过了什么。</p><p id="06bc" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">完整源代码:<a class="ae mi" href="https://github.com/aaronksaunders/vue-composition-firebase-app" rel="noopener ugc nofollow" target="_blank">https://github . com/aaronksaunders/vue-composition-firebase-app</a></p></div></div>    
</body>
</html>