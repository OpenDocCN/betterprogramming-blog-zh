<html>
<head>
<title>How To Share a Photo on Instagram Stories in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Swift中分享Instagram Stories上的照片</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-share-a-photo-on-instagram-stories-in-swift-75319a669596?source=collection_archive---------7-----------------------#2020-02-06">https://betterprogramming.pub/how-to-share-a-photo-on-instagram-stories-in-swift-75319a669596?source=collection_archive---------7-----------------------#2020-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6a0a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过丰富的URL方案将自定义照片或视频分享到Instagram Stories</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e9ecf301b8abda7168e83243a3763370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0TyN8Uwe3oKEHHyOYnOYmw.jpeg"/></div></div></figure><p id="3eef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Instagram为其故事实现了丰富的URL方案。关于URL方案最好的事情是我们不需要包含任何框架。如果用户安装了Instagram应用程序，它将完成所有的脏活累活。让我们深入了解更多细节！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/1f119f980fa09af66d3b9339e02b6cf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggUpi-Hy_NBpViP-eGtfyA.png"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">来自<a class="ae ls" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的第三张屏幕上的照片。</p></figure><p id="35c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如上图所示，有三个主要图层:</p><ul class=""><li id="04b1" class="lt lu iq kt b ku kv kx ky la lv le lw li lx lm ly lz ma mb bi translated">背景层，可以由照片、视频、纯色或渐变组成。</li><li id="ffe7" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ly lz ma mb bi translated">贴纸层(可选)，包含图像，可由用户编辑。</li><li id="4b19" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ly lz ma mb bi translated">属性链接(只对部分用户开放测试版)。</li></ul></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="31d4" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">编码时间到了</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4872" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们回顾一下代码。</p><ol class=""><li id="74f3" class="lt lu iq kt b ku kv kx ky la lv le lw li lx lm ni lz ma mb bi translated">基本上，这里我们用Instagram的方案创建了一个URL。我们使用可选绑定<code class="fe nj nk nl nm b">if-let</code>，因为URL init返回一个可选值。</li><li id="56e9" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ni lz ma mb bi translated">之后，我们检查了系统是否可以打开insta gram——或者说它是否在设备上。</li><li id="fb2d" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ni lz ma mb bi translated">一旦我们确定了这一点，我们就可以继续了。为了传递图像或视频，我们必须将其转换为数据。对于图片，我们可以使用<code class="fe nj nk nl nm b">.pngData()</code> <em class="nn">。</em>一旦我们将图像或视频转换成正确的格式，我们需要将其复制到系统粘贴板中，Instagram将从那里获取数据。</li><li id="588a" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ni lz ma mb bi translated">我们现在创建一个字典数组，我们需要在粘贴板中放置一些内容。我们还为粘贴板创建了选项，在本例中，我们设置了图像的到期日期。那将是五分钟。</li><li id="3643" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ni lz ma mb bi translated">这一步很重要，因为我们用选项(生命的五分钟)将项目(我们的图像数据)设置到粘贴板。</li><li id="10d1" class="lt lu iq kt b ku mc kx md la me le mf li mg lm ni lz ma mb bi translated">最后，我们打开开始时创建的URL。Instagram将打开，它将在story composer中显示我们的图像。</li></ol><p id="bc0c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们做到了！</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="8932" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">更多定制</h1><p id="b926" class="pw-post-body-paragraph kr ks iq kt b ku no jr kw kx np ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">但是使用视频、渐变或贴纸作为背景呢？</p><h2 id="983d" class="nt mp iq bd mq nu nv dn mu nw nx dp my la ny nz na le oa ob nc li oc od ne oe bi translated">背景图像/视频</h2><p id="cb4a" class="pw-post-body-paragraph kr ks iq kt b ku no jr kw kx np ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">如上所述，为了有一个背景图像或视频，我们需要为这两个键之一设置一个数据<strong class="kt ir"> </strong>对象:</p><pre class="kg kh ki kj gt of nm og oh aw oi bi"><span id="6b24" class="nt mp iq nm b gy oj ok l ol om">com.instagram.sharedSticker.backgroundImage</span><span id="8cad" class="nt mp iq nm b gy on ok l ol om">com.instagram.sharedSticker.backgroundVideo</span></pre><h2 id="8374" class="nt mp iq bd mq nu nv dn mu nw nx dp my la ny nz na le oa ob nc li oc od ne oe bi translated">贴纸</h2><p id="63e5" class="pw-post-body-paragraph kr ks iq kt b ku no jr kw kx np ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">作为图像，贴纸也接受数据。建议的大小是640x480px像素。贴纸的关键是:</p><pre class="kg kh ki kj gt of nm og oh aw oi bi"><span id="0791" class="nt mp iq nm b gy oj ok l ol om">com.instagram.sharedSticker.stickerImage</span></pre><h2 id="e890" class="nt mp iq bd mq nu nv dn mu nw nx dp my la ny nz na le oa ob nc li oc od ne oe bi translated">渐变背景</h2><p id="c717" class="pw-post-body-paragraph kr ks iq kt b ku no jr kw kx np ju kz la nq lc ld le nr lg lh li ns lk ll lm ij bi translated">对于渐变背景，我们需要传递两种颜色:一种用于顶部，一种用于底部。在这种情况下，我们必须传递一个带有颜色的十六进制值的字符串。</p><pre class="kg kh ki kj gt of nm og oh aw oi bi"><span id="f12e" class="nt mp iq nm b gy oj ok l ol om">com.instagram.sharedSticker.backgroundTopColor<br/>com.instagram.sharedSticker.backgroundBottomColor</span></pre><p id="0753" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如:</p><pre class="kg kh ki kj gt of nm og oh aw oi bi"><span id="09b8" class="nt mp iq nm b gy oj ok l ol om"><strong class="nm ir">let</strong> items = [["com.instagram.sharedSticker.backgroundTopColor": "#EA2F3F", "com.instagram.sharedSticker.backgroundBottomColor": "#8845B9"]]</span></pre><p id="ccb8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了得到一个纯色背景，我们做了和渐变一样的事情，但是两种颜色必须匹配。</p></div></div>    
</body>
</html>