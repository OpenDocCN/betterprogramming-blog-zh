<html>
<head>
<title>Building Design Systems in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振中的建筑设计系统</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-design-systems-in-flutter-d52d66004070?source=collection_archive---------1-----------------------#2022-11-30">https://betterprogramming.pub/building-design-systems-in-flutter-d52d66004070?source=collection_archive---------1-----------------------#2022-11-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bd5f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在颤振中实现可扩展和自以为是的设计系统的技巧和诀窍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b7d31fd4013a6a4f05ba67a86917ab12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T064r8AQ9zo9GWlitTR-wQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@balazsketyi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Balázs Kétyi </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="cc54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尼尔森诺曼集团(UX研究咨询公司)对设计系统的定义如下:</p><blockquote class="ls lt lu"><p id="0cf7" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">“设计系统是一套标准，通过减少冗余来管理大规模设计，同时在不同页面和渠道之间创建共享语言和视觉一致性。”</p></blockquote><p id="e707" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不像名字暗示的那样，设计系统的规则不仅仅适用于设计师。一个良好构建和实现的设计系统的真正价值是将这些规则强加给设计师和开发人员，创造一致性，让两个学科专注于更高层次的挑战，而忽略组成一个有凝聚力的应用程序的组成部分的单调乏味。</p><p id="ff38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能听说过类似于<a class="ae kv" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> Bootstrap </a>和<a class="ae kv" href="https://ant.design/" rel="noopener ugc nofollow" target="_blank"> Ant Design </a> for web的设计系统，或者可能是AirBnB的<a class="ae kv" href="https://airbnb.design/building-a-visual-language/" rel="noopener ugc nofollow" target="_blank">设计语言系统</a>。即使他们不去从屋顶上喊出来，成功的设计公司可能有一个设计系统。这使得他们可以专注于应用程序的身份和功能，而不必考虑按钮、横幅、文本等单独的部分。</p><p id="90ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名设计师，我不想在开始设计一个页面的时候就必须考虑按钮是什么，并且详尽地为开发人员创建规范。作为一名开发人员，我不想被交付一个设计，看到一个我不得不第十次从头构建的按钮。一个好的设计系统及其实现的对应物(在我们的例子中，是一个颤振库)解决了这些问题。</p><p id="8763" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将跳过讨论设计系统是如何形成的，谁制定了标准，以及它是如何被记录的。相反，我们将假设我们有一个定义良好的设计系统，并将其称为<code class="fe lz ma mb mc b">MyDesign</code>。我们的工作是在Flutter中构建<code class="fe lz ma mb mc b">MyDesign</code>的组件，并让它们准确地代表我们的设计系统定义的标准。我们将特别关注一组按钮部件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi md"><img src="../Images/7777f847a0c846fc98f7505bfa319de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SMgkw5PSiuAxNx3SaaLmPQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">过于简单的设计系统</p></figure><p id="246e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文接下来的内容是我学到的一些技巧和诀窍，这些技巧和诀窍导致了成功的、可伸缩的和可重用的设计系统实现。</p><h1 id="0242" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">命名很重要</h1><p id="b0ab" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">作为开发人员，我们知道语义对于采用和入职非常重要。但是在设计系统的情况下，这延伸到我们友好的邻居设计师。我们正在创建一种共享语言，因此应该使用这种语言来实现我们的小部件。</p><p id="4302" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在描述组件时，尽量使用与设计者相同的名字。这确保了在设计和实现之间来回工作时没有沟通错误。将这种方法也应用到小部件的配置中。如果一个按钮有一个“前导”和“尾随”图标，而不是“左”和“右”，在你的部件类的字段中使用相同的术语。在<code class="fe lz ma mb mc b">MyDesign</code>按钮的例子中，我们可以看到它们反映了填充材料(升高)和轮廓按钮，但被命名为主要和次要。我们的实现应该遵守这个命名方案。</p><p id="a1c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">设计系统的实现通常独立于它们支持的应用程序。这是一个有益的解耦，这样业务逻辑就不会渗透到设计实现中，并且您的库可以作为一个依赖项跨多个消费应用程序重用。我发现正因为如此，设计系统提供的小部件前缀也是有益的。<code class="fe lz ma mb mc b">MyButton</code>而不是<code class="fe lz ma mb mc b">Button</code>有助于区分应用程序中的哪些小部件是本地的，哪些不是，以及避免与Flutter和其他应用程序依赖项提供的许多小部件发生名称冲突。</p><h1 id="ef6b" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">独立定义设计标志</h1><p id="86d4" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">设计令牌是设计系统的“原语”——在组件和定义的标准中重复使用的常量值。像颜色、间距、文本样式和图标这样的东西通常作为“标记”包含在设计系统中，是独立于使用它们的小部件进行定义的好选择。Material design已经通过<code class="fe lz ma mb mc b">Colors</code>和<code class="fe lz ma mb mc b">Icons</code>类以及默认<code class="fe lz ma mb mc b">Theme</code>对象的<code class="fe lz ma mb mc b">textTheme</code>实现了这一点，默认<code class="fe lz ma mb mc b">Theme</code>对象包含预定义的文本处理，如正文和标题样式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">定义一组颜色标记</p></figure><h1 id="a11f" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">使用组合</h1><p id="a134" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">颤振是建立在<a class="ae kv" href="https://docs.flutter.dev/resources/inside-flutter#aggressive-composability" rel="noopener ugc nofollow" target="_blank">积极的可组合性</a>之上的，你的设计系统库也应该如此。利用Flutter丰富的材料设计目录和Cupertino小部件，并根据您的系统规格进行定制。这从所有将使用小部件的地方抽象出样式。通过创建可以组合到其他小部件中的小部件，避免在小部件之间重复代码。用<code class="fe lz ma mb mc b">MyDesign</code>按钮，我们将组成材质的按钮作为基础。在更复杂的系统中，您可能有自己的基本组件，这些组件可以组合成多个其他组件。</p><h1 id="f453" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">减少API面</h1><p id="dd29" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">试着让你的部件尽可能简单。遵循最少知识的<a class="ae kv" href="https://en.wikipedia.org/wiki/Law_of_Demeter" rel="noopener ugc nofollow" target="_blank">原则</a>——小部件应该只消耗正确显示和运行所需的输入。这也意味着您的小部件不能以意想不到的方式使用。</p><p id="2688" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您正在使用一个材质小部件并为您的设计设计样式，您可能不需要小部件允许的所有配置。材料部件应该是高度可配置的，但是您的部件可能不是。减少那些参数！</p><p id="0093" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">像<code class="fe lz ma mb mc b">ElevatedButton</code>这样的小部件在传递给孩子时非常灵活(需要任何<code class="fe lz ma mb mc b">Widget</code>)。在<code class="fe lz ma mb mc b">MyDesign</code>中，按钮只允许文本和图标作为子元素，所以我们将重新输入小部件的字段，以确保只接受有效值，并允许构建函数抽象出构建按钮内部的复杂性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">MyDesign按钮的第一个粗略实现</p></figure><h1 id="7053" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">使用枚举来强制有效输入</h1><p id="52f2" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">这个技巧是对上述建议的扩展。在许多情况下，微件的字段类型可能允许不符合设计系统规则的值。例如，<code class="fe lz ma mb mc b">MyDesign</code>的按钮只允许品牌调色板中的一部分颜色。我们不会让我们的小部件接受一个<code class="fe lz ma mb mc b">Color</code>类型参数(从而允许颜色不正确的按钮)，我们将创建一个枚举来表示和限制那些被允许的配置。</p><p id="3646" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Dart 2.17的<a class="ae kv" href="https://dart.dev/guides/language/language-tour#enumerated-types" rel="noopener ugc nofollow" target="_blank">增强枚举</a>之前，这将导致一个小麻烦，即必须使用<code class="fe lz ma mb mc b">Map</code>或switch case将这些枚举值映射回我们的构造函数或构建函数中的有效类型。但是，使用增强的枚举，我们可以定义带有final字段的枚举，将每个枚举值连接到它所表示的值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">现在我们的按钮遵循了我的设计的颜色规则</p></figure><h1 id="c4e7" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">继承风格</h1><p id="af81" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">不硬编码值总是一个好主意。我们主要是通过将设计符号分离成常量来解决这个问题。然而，在我们的代码中使用<code class="fe lz ma mb mc b">MyColors.blue</code>代替<code class="fe lz ma mb mc b">Color(0xff0000ff)</code>仍然会使我们的设计系统受到不必要的约束。如果设计系统需要更改，我们的令牌允许在一个单独的地方编辑值，如果我们需要一个全新的主题呢？这是应用程序中亮暗主题的常见做法。</p><p id="43cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">静态常量变量无法解决主题中用户的偏好。因此，像材料设计一样，通过修改属性来使用从全局<code class="fe lz ma mb mc b">Theme</code>继承的样式，它附带或通过创建<a class="ae kv" href="https://api.flutter.dev/flutter/material/ThemeExtension-class.html" rel="noopener ugc nofollow" target="_blank">主题扩展</a>。</p><h1 id="6b77" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">使用命名构造函数</h1><p id="9102" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">这可能取决于个人偏好，但是dart的<a class="ae kv" href="https://dart.dev/guides/language/language-tour#named-constructors" rel="noopener ugc nofollow" target="_blank">命名构造函数</a>可以帮助减少样板文件并增强小部件的语义。</p><p id="1f2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看我们的<code class="fe lz ma mb mc b">MyDesign</code>主按钮和次按钮，我们知道在构建内部结构时有重用的代码，但是我们仍然需要分别使用材料<code class="fe lz ma mb mc b">ElevatedButton</code>和<code class="fe lz ma mb mc b">OutlineButton</code>。我们可以创建两个独立的小部件<code class="fe lz ma mb mc b">MyPrimaryButton</code>和<code class="fe lz ma mb mc b">MySecondaryButton</code>，并提取一个小部件来构建子部件。或者，我们可以有一个带有命名构造函数<code class="fe lz ma mb mc b">MyButton.primary</code>和<code class="fe lz ma mb mc b">MyButton.secondary</code>的小部件。</p><p id="0347" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些构造函数可以设置一个私有字段，告诉我们在我们的构建方法中做什么。由于逻辑和构建方法增加了复杂性(代码共享比协调多个小部件通信更容易)，这种方法比多个小部件更有价值。出于语义目的，以这种方式“分组”小部件的变体也是有价值的。有了IDE代码完成，输入<code class="fe lz ma mb mc b">MyButton.</code>会给出可用变体的“目录”,这是多小部件方法所没有的好处。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用命名构造函数对变体小部件进行分组</p></figure><h1 id="e660" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">结论</h1><p id="fb5a" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">你可以对你的设计系统有多严格就有多严格。在许多情况下，信任开发人员遵守口头或书面规则可能就足够了。但是，构建利用与设计者共享的术语并严格执行系统规则的小部件，可以导致更快的从设计到开发的移交，并使未来的开发人员更容易入职。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><h2 id="4da1" class="nk mf iq bd mg nl nm dn mk nn no dp mo lf np nq mq lj nr ns ms ln nt nu mu nv bi translated">附加阅读</h2><p id="407f" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">设计跨设备灵活的系统是非常重要的。查看我关于颤振中<a class="ae kv" href="https://medium.com/better-programming/responsive-layout-in-flutter-4b510cedfd5a" rel="noopener">响应式布局的文章。</a></p><p id="cb42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想支持我的写作并获得完整的媒体访问权限，请考虑使用我的推荐链接加入。你订阅的一部分给我，并创造更多这样的文章！</p><div class="nw nx gp gr ny nz"><a href="https://medium.com/@calpoog/membership" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">加入我的介绍链接媒体-卡尔文古德曼</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">阅读卡尔文·古德曼(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kp nz"/></div></div></a></div></div></div>    
</body>
</html>