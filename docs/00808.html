<html>
<head>
<title>Making a Real World Application With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI制作真实世界的应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/making-a-real-world-application-with-swiftui-3b643ddfae22?source=collection_archive---------2-----------------------#2019-07-16">https://betterprogramming.pub/making-a-real-world-application-with-swiftui-3b643ddfae22?source=collection_archive---------2-----------------------#2019-07-16</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7ba5" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">第三部分:导航和演示</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/bae85e7c1f7a6c6d7700986883985982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4mhpOhj91LitiNEnb229FQ@2x.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">应用程序导航示例</p></figure><p id="7e16" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">本文是关于制作SwiftUI应用程序的系列文章的第三部分。我建议你先读第一部分和第二部分；他们将向您概述应用程序、其功能、特性和架构。</p><div class="lv lw gq gs lx ly"><a href="https://medium.com/better-programming/making-a-real-world-application-with-swiftui-cb40884c1056" rel="noopener follow" target="_blank"><div class="lz ab fp"><div class="ma ab mb cl cj mc"><h2 class="bd iv gz z fq md fs ft me fv fx it bi translated">使用SwiftUI制作真实世界的应用程序</h2><div class="mf l"><h3 class="bd b gz z fq md fs ft me fv fx dk translated">第一部分:数据流和冗余</h3></div><div class="mg l"><p class="bd b dl z fq md fs ft me fv fx dk translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm kt ly"/></div></div></a></div><div class="lv lw gq gs lx ly"><a href="https://medium.com/@dimillian/making-a-real-world-application-with-swiftui-ba9e9682889c" rel="noopener follow" target="_blank"><div class="lz ab fp"><div class="ma ab mb cl cj mc"><h2 class="bd iv gz z fq md fs ft me fv fx it bi translated">使用SwiftUI制作真实世界的应用程序</h2><div class="mf l"><h3 class="bd b gz z fq md fs ft me fv fx dk translated">第二部分:异步数据和远程映像</h3></div><div class="mg l"><p class="bd b dl z fq md fs ft me fv fx dk translated">medium.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm kt ly"/></div></div></a></div><p id="c891" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在本文中，我们将看到<strong class="lb iv">导航</strong>和<strong class="lb iv">呈现</strong>流如何在SwiftUI <strong class="lb iv">中工作。</strong>在当前UIKit模型发展了近十年之后，这已经成为一股新鲜空气，并且在概念上很难理解。最后，很简单，你只需要放弃任何UIKit命令式导航的概念。</p><p id="381e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">你需要丢掉的第一个概念是，每一个新的全功能视图都应该是模态的或者被推到堆栈上。这一点很重要，因为SwiftUI比UIKit灵活得多，只需几行代码，您就可以在当前视图的顶部(或底部)附加一个完整的视图层次结构。</p><p id="3279" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">不需要<code class="fe mo mp mq mr b">addChildViewController</code>、<code class="fe mo mp mq mr b">addSubview</code>，或者添加约束等。这就是为什么UIKit经常让在<code class="fe mo mp mq mr b">UINavigationController</code>堆栈上呈现一个模态或者推出一个新的控制器比实际尝试让它与你当前的视图层次一起工作要简单得多。我不是在说<code class="fe mo mp mq mr b">containedViewController </code>，这是一个很好的模式，也是一个组成大<code class="fe mo mp mq mr b">UIViewController.</code>的完美方式</p></div><div class="ab cl ms mt hy mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="in io ip iq ir"><h1 id="7307" class="mz na iu bd nb nc nd ne nf ng nh ni nj ka nk kb nl kd nm ke nn kg no kh np nq bi translated">导航和演示的一点介绍</h1><h2 id="e755" class="nr na iu bd nb ns nt dn nf nu nv dp nj li nw nx nl lm ny nz nn lq oa ob np oc bi translated">航行</h2><p id="ae52" class="pw-post-body-paragraph kz la iu lb b lc od jv le lf oe jy lh li of lk ll lm og lo lp lq oh ls lt lu in bi translated"><code class="fe mo mp mq mr b">NavigationView</code>相当于<code class="fe mo mp mq mr b"><strong class="lb iv">UINavigationController</strong></code>，在这个时间点上，它仍然有一个支持，但绝对不能保证几个月或几年后仍然如此。您不应该真正关心底层的实现。在SwiftUI <strong class="lb iv">，</strong>中，你需要把一切都看成一个契约。导航流程向您保证，无论它在什么平台上可用，它都能够将视图堆叠在另一个视图之上，并带有后退按钮和标题。</p><p id="3b85" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">例如在macOS和iPadOS上，一个<code class="fe mo mp mq mr b">NavigationView</code>支持两个视图作为它的根。渲染时，它会自动转换为带有主/细节图案的<code class="fe mo mp mq mr b">UI/NS/SplitViewController</code>。您可以检查视图层次结构，并从Xcode中亲自查看。</p><p id="e4b6" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这种抽象级别意味着苹果负责使SwiftUI原始组件工作，无论它们在什么平台上可用。他们可以随时交换实现，同时保持组件顶层API不变。</p><p id="c29a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">但是让我们回到我们的<code class="fe mo mp mq mr b">NavigationView</code> <strong class="lb iv">。</strong></p><div class="lv lw gq gs lx ly"><a href="https://developer.apple.com/documentation/swiftui/navigationview" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fp"><div class="ma ab mb cl cj mc"><h2 class="bd iv gz z fq md fs ft me fv fx it bi translated">导航视图</h2><div class="mf l"><h3 class="bd b gz z fq md fs ft me fv fx dk translated">一种视图，用于呈现一堆视图，这些视图表示导航层次结构中的可见路径。</h3></div><div class="mg l"><p class="bd b dl z fq md fs ft me fv fx dk translated">developer.apple.com</p></div></div></div></a></div><p id="937a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果你当前的视图——或者整个——应用程序被打包到一个<code class="fe mo mp mq mr b">NavigationView</code>中，你可以在任何你想去的地方使用<code class="fe mo mp mq mr b">NavigationLink</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi oj l"/></div></figure><p id="582a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">它需要目的地视图和主体。主体是显示在链接内容中的内容(可以是任何与视图相关的内容)，目的地是当你点击按钮时在堆栈上显示的视图。</p><p id="1bf9" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">您的<code class="fe mo mp mq mr b">NavigationLink</code>内容内部的整个视图将是交互式的。在列表的情况下，如果您将<code class="fe mo mp mq mr b">NavigationLink</code>作为一行包含在视图中，您将得到一个带有活动/悬停状态的漂亮的细节指示器。</p><div class="kk kl km kn gu ab cb"><figure class="ok ko ol om on oo op paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><img src="../Images/f4bc867dd8b59002478d53da63271682.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*XwI58QXs6iGV9hOYfqpafA.png"/></div></figure><figure class="ok ko oq om on oo op paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><img src="../Images/237b8413dd49bef0428b810f364c469a.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*zC2Zyw-dlItq9VrgcF3m0g.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk or di os ot translated">导航链接示例</p></figure></div><p id="b25f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">还有<code class="fe mo mp mq mr b"><a class="ae ou" href="https://developer.apple.com/documentation/swiftui/dynamicnavigationdestinationlink" rel="noopener ugc nofollow" target="_blank">DynamicDestinationLink</a></code>，以防您直到稍后在视图主视图中才知道哪些数据将被传递到您的详细视图。这样，您就可以动态地设置您的DetailView并随意更改绑定数据。我真的没有机会在我的应用程序中使用它，但这里有一个非常好的教程。</p><div class="lv lw gq gs lx ly"><a href="https://igorcferreira.dev/swiftui/2019/06/28/dynamicnavigationdestionationlink/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fp"><div class="ma ab mb cl cj mc"><h2 class="bd iv gz z fq md fs ft me fv fx it bi translated">使用动态导航定位链接</h2><div class="mf l"><h3 class="bd b gz z fq md fs ft me fv fx dk translated">编辑描述</h3></div><div class="mg l"><p class="bd b dl z fq md fs ft me fv fx dk translated">igorcferreira.dev</p></div></div></div></a></div><p id="9db8" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">还有一点，这里还有一个教程。如果您想以编程方式推送一个视图，您可以使用<code class="fe mo mp mq mr b">NavigationDestinationLink</code>——例如，如果您想做一个路由器，这很有用。</p><div class="lv lw gq gs lx ly"><a href="https://ryanashcraft.me/swiftui-programmatic-navigation/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fp"><div class="ma ab mb cl cj mc"><h2 class="bd iv gz z fq md fs ft me fv fx it bi translated">如何在SwiftUI中用NavigationDestinationLink | Ryan以编程方式推送和弹出视图…</h2><div class="mf l"><h3 class="bd b gz z fq md fs ft me fv fx dk translated">如果您不需要以编程方式关闭模式或导航，链接视图是很好的选择。的…</h3></div><div class="mg l"><p class="bd b dl z fq md fs ft me fv fx dk translated">ryanashcraft.me</p></div></div><div class="mh l"><div class="ov l mj mk ml mh mm kt ly"/></div></div></a></div><h2 id="df51" class="nr na iu bd nb ns nt dn nf nu nv dp nj li nw nx nl lm ny nz nn lq oa ob np oc bi translated">介绍会；展示会</h2><p id="2b5c" class="pw-post-body-paragraph kz la iu lb b lc od jv le lf oe jy lh li of lk ll lm og lo lp lq oh ls lt lu in bi translated">呈现是指所有有模式地呈现的东西，它可以是一个视图层次结构(可以与UIKit <code class="fe mo mp mq mr b">presentViewController</code>进行比较)，也可以是<code class="fe mo mp mq mr b">Alert</code>、<code class="fe mo mp mq mr b">ActionSheet</code>、<strong class="lb iv">、</strong>等等</p><p id="6317" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">与<strong class="lb iv">导航</strong>不同，由于SwiftUI是声明性的，您必须管理您所呈现视图的<strong class="lb iv">呈现</strong>状态。非常无缝；你创建一个<code class="fe mo mp mq mr b">@State var isSomethingPresented</code> <em class="ow"> : </em> <code class="fe mo mp mq mr b"> Bool</code> <em class="ow"> </em>属性，在<code class="fe mo mp mq mr b">.sheet(), .actionSheet(), etc.. </code>函数中，你可以把它作为绑定来传递。所以你可以控制你的工作表(你可以把它比作一个模态的全视图控制器)或者你的动作表是否应该被显示。</p><p id="1f25" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">然后你只需要在你喜欢的地方切换它，例如，当用户触摸应该呈现模式/表单或动作表单<strong class="lb iv">、</strong>的按钮时。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi oj l"/></div></figure><p id="d855" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在上面的代码中，您可以看到两个演示示例。一个是动作表，绑定到它的表示，另一个是全屏幕表/模态视图的表示。然后，如果你看一下<code class="fe mo mp mq mr b">onAddButton()</code>函数，它切换一个布尔值，我的动作表将被有效地呈现。您需要做完全相同的事情来呈现模态。这就是你所需要的。</p><p id="f256" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">不要忘了切换<code class="fe mo mp mq mr b">ActionSheet</code>按钮中的布尔值来关闭它。</p><p id="0b54" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在作为任何演示调用的一部分呈现的视图中，您可以访问一个环境变量来访问它的<code class="fe mo mp mq mr b">isPresented</code>状态。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi oj l"/></div></figure><p id="49f3" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">它是由SwiftUI <strong class="lb iv"> </strong>公开的——<strong class="lb iv"/>你也可以切换——在不转发任何回调的情况下关闭你的模态。</p><p id="05cc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">关于<code class="fe mo mp mq mr b">Environment</code>，我邀请你跟随这个关于使用控件的<a class="ae ou" href="https://developer.apple.com/tutorials/swiftui/working-with-ui-controls" rel="noopener ugc nofollow" target="_blank">苹果教程</a>。它将揭示一些关于编辑状态环境变量的信息，这是非常强大的。</p><p id="0eec" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">SwiftUI公开了各种各样的<code class="fe mo mp mq mr b">Environment</code>属性。你可以用他们的<code class="fe mo mp mq mr b">keypath</code>访问他们中的任何一个。目前，你可以看看这个<a class="ae ou" href="https://developer.apple.com/documentation/swiftui/environment" rel="noopener ugc nofollow" target="_blank">文档</a>；它们还没有全部被引用。最好的来源仍然是在<code class="fe mo mp mq mr b">SwiftUI</code>原型中寻找它们。</p></div><div class="ab cl ms mt hy mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="in io ip iq ir"><h1 id="69f4" class="mz na iu bd nb nc nd ne nf ng nh ni nj ka nk kb nl kd nm ke nn kg no kh np nq bi translated">其他演示和过渡方法</h1><p id="bb1b" class="pw-post-body-paragraph kz la iu lb b lc od jv le lf oe jy lh li of lk ll lm og lo lp lq oh ls lt lu in bi translated">正如我在上面所说的，您不一定需要使用导航或显示模式来切换或显示视图。</p><p id="cb16" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">为了说明我的观点，下面是我如何在电影细节屏幕中呈现我的旋转木马。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ox"><img src="../Images/5b7ec658d1ba8bf7dfd5ee8ae29ede95.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*zHTTmApZkN6KdAUSVf1jYQ.gif"/></div></figure><p id="aacf" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">只要你一触摸电影备用海报，它就会切换。</p><p id="addc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">现在我们来看看代码。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi oj l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">MovieDetail视图摘录。</p></figure><p id="f52b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">以上是我<code class="fe mo mp mq mr b">MovieDetail</code>的一部分看法。呈现效果分两部分完成，由<code class="fe mo mp mq mr b">@State var SelectedPoster</code>属性控制。一旦它被设置并且不为零，<code class="fe mo mp mq mr b">List</code>将会变得模糊。然后<code class="fe mo mp mq mr b">ImageCarouselView</code>会出现在屏幕中间。</p><p id="4fd9" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><code class="fe mo mp mq mr b">ImageCarouselView</code>是一个填充屏幕边界的ZStack，它嵌入了一个<code class="fe mo mp mq mr b">ScrollView</code>作为它的中心。仅此而已。</p><p id="8e53" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我可以把它添加到我的列表中，因为我的视图有一个ZStack作为它的根。因此您可以堆叠任意数量视图。你甚至可以使用<code class="fe mo mp mq mr b">zindex()</code>修改器来玩层次。</p><p id="ca58" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">最重要的是，在SwiftUI中，我得到了这个漂亮的淡入和淡出模糊效果，因为我已经在我的<code class="fe mo mp mq mr b">List</code>上添加了动画修改器。作为一个整体，你感觉旋转木马就像是“呈现”在屏幕上，但这只是两个简单的效果同时切换。</p><p id="d6ac" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">你可以在<code class="fe mo mp mq mr b"><a class="ae ou" href="https://github.com/Dimillian/MovieSwiftUI/blob/master/MovieSwift/MovieSwift/views/shared/images/ImagesCarouselView.swift" rel="noopener ugc nofollow" target="_blank">MovieSwiftUI</a></code> <a class="ae ou" href="https://github.com/Dimillian/MovieSwiftUI/blob/master/MovieSwift/MovieSwift/views/shared/images/ImagesCarouselView.swift" rel="noopener ugc nofollow" target="_blank">仓库这里</a>查看<code class="fe mo mp mq mr b">ImagesCarouselView</code>的代码。</p><p id="4269" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在UIKit世界中，呈现一个全屏<code class="fe mo mp mq mr b">UIViewController</code>然后实现一个自定义过渡，或者放一个<code class="fe mo mp mq mr b">UIVisualEffectView</code>作为背景视图来获得模糊效果，这本来会更简单。然后将演示上下文设置为当前上下文……嗯，你知道该怎么做。</p><p id="42ec" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">请注意，当视图出现和消失时，您也可以使用过渡修改器自定义过渡动画，但这将在另一篇文章中介绍。我主要用它来转换屏幕上和屏幕外的小视图。但是你可以跟着这个<a class="ae ou" href="https://developer.apple.com/tutorials/swiftui/animating-views-and-transitions" rel="noopener ugc nofollow" target="_blank">苹果教程</a>开始玩！</p><p id="320b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">希望这篇文章对你有用，一如既往，我在这里回答任何问题。</p><p id="6e3a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">请继续关注第四部分:动画和手势！</p></div></div>    
</body>
</html>