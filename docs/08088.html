<html>
<head>
<title>How To Navigate To Any View in iOS From Anywhere?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从任何地方导航到iOS中的任何视图？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/open-every-view-from-everywhere-c57f6ca61a74?source=collection_archive---------14-----------------------#2021-03-23">https://betterprogramming.pub/open-every-view-from-everywhere-c57f6ca61a74?source=collection_archive---------14-----------------------#2021-03-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c8c7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们使用一个视图控制器工厂来简化导航</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/32c89d77d4b03333da40bed7baf91ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jayhiNgDWAB2jVNe"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">格雷格·罗森克在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e367" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开多个视图—您是否也有同样的问题？</p><p id="8b07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你在视图A中，你需要打开视图B，但是你也需要从视图C打开视图B，也需要从视图d打开视图B，我们通常怎么做？我们复制我们的代码。直接违反了不重复自己(干)的原则。</p><p id="299d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">肯定有更优雅的方式吧？是的，有。一家<strong class="ky ir">工厂</strong>。一个<strong class="ky ir">查看控制器工厂</strong>。</p><p id="f4e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其思想是在某处注入视图所需的数据，并自动创建视图。这是一张图片:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/f9dff4015cf2ef4ca9ec8ad168a0bfdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*xPFEWCKwCRzhUSzv_UB13A.png"/></div></figure><p id="e8c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，让我们创建一个工厂。这里的工厂很一般，什么都可以用。其概念是，工厂可以注册任何类型，并使用该类型来创建和返回工厂类型的对象。代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="e71c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们的例子，我们将有一个<code class="fe lv lw lx ly b">UIViewController</code>工厂。代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="fb03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用这个<code class="fe lv lw lx ly b">ViewControllerFactory</code>作为我们项目的特定<code class="fe lv lw lx ly b">MyViewControllerFactory</code>的超类。在这个类中，我们可以注册所有需要呈现的UIViewControllers。下面是代码的样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="f908" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的，很好。现在我们有了<code class="fe lv lw lx ly b">MyViewControllerFactory</code>，我们可以给它数据，它会返回给我们正确的<code class="fe lv lw lx ly b">UIViewController.</code></p><p id="20a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><p id="c895" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lv lw lx ly b">MyViewControllerFactory().create(for: Data1(title: "Hello"))</code>会返回一个<code class="fe lv lw lx ly b">UIViewController1</code>。</p><p id="a08c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lv lw lx ly b">MyViewControllerFactory().create(for: Data2(color: .red))</code>会返回一个<code class="fe lv lw lx ly b">UIViewController2</code></p><p id="6db2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们如何添加这个功能？我们如何在任何地方使用这种功能？如下所示，协议扩展可以帮助我们:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/eb171fafeaebfd0aabee39ae0f1beca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/1*dPDnH7PjX6cQGMGHd48siQ.gif"/></div></figure><p id="5365" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此时我们唯一需要做的就是将这个协议添加到我们想要的任何<code class="fe lv lw lx ly b">ViewController</code>中。</p><p id="3877" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过使<code class="fe lv lw lx ly b">ViewController</code>与<code class="fe lv lw lx ly b">IViewControllerNavigation</code>一致，我们的<code class="fe lv lw lx ly b">ViewController</code>自动拥有了navigate( <code class="fe lv lw lx ly b">data:</code>)方法。</p><p id="2421" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只需要调用方法和正确的<code class="fe lv lw lx ly b">ViewController</code>，它是由我们的<code class="fe lv lw lx ly b">Factory</code>创建并呈现给我的<code class="fe lv lw lx ly b">UIViewController</code>。</p><p id="3a83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="45fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个解决方案——稍加修改——也适用于SwiftUI。</p><p id="f8e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一如既往，快乐编码。</p></div></div>    
</body>
</html>