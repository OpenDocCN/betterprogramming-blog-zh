<html>
<head>
<title>How To Display Badges in SwiftUI for iOS 15</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在iOS 15版SwiftUI中显示徽章</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/show-badges-in-swiftui-665c2a1db70d?source=collection_archive---------4-----------------------#2021-07-23">https://betterprogramming.pub/show-badges-in-swiftui-665c2a1db70d?source=collection_archive---------4-----------------------#2021-07-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b4fd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看SwiftUI的新特性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5cc8aaee48b7b8d00a89de4a82018c65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uk9bcPXFJWzrZ4pjEXB9PA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">迪米特里·卡拉斯泰列夫在<a class="ae ky" href="https://unsplash.com/s/photos/iphone?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="e28e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在2021年WWDC大会上，苹果宣布了SwiftUI第三版的重大新增功能和改进。有些是大的，有些是小的。然而，有一个事实是真实的:SwiftUI变得更好了！</p><p id="0303" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在该框架的所有新增功能中，有一项听起来可能并不那么重要……直到我们需要它——那就是如何在SwiftUI中显示徽章。</p><p id="5cdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">徽章不是今年出现的新概念。我们每天都知道并使用徽章。从带有未读邮件的徽章到第三方应用中的通知徽章，以及设置应用中设置旁边的徽章，徽章在iOS和macOS中已经存在多年。</p><p id="06f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，SwiftUI中没有对徽章的原生支持。在它的第三个版本之前，如果开发人员需要给应用程序添加徽章，那么他们必须想出一个自定义的实现。那是一个大麻烦。今天的文章将演示如何在SwiftUI中使用新的徽章API。</p><p id="04f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始使用徽章之前，有一些事情需要注意。首先，无论你在这篇文章中读到什么，都可以在iOS 15和更高版本以及macOS 12和更高版本(Monterey和更高版本)上找到。因此，如果你打算在以前的iOS或macOS版本中使用新的SwiftUI badges API，那么你就不走运了。</p><p id="1890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，请记住，徽章不能适用于任何地方。它们仅适用于列表中的<em class="lv">行，以及基于选项卡视图的应用程序中的<em class="lv">选项卡项目</em>。</em></p><p id="21cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说到这里，让我们继续看徽章的使用。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2a90" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">在SwiftUI列表中使用徽章</h1><p id="ea5c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们将涵盖如何在SwiftUI中使用和显示徽章的各种示例，从一个简单的示例开始。假设我们把各种编程语言的学习进度保存在一个简单的应用程序中。首先，让我们考虑下面的实现，它在一个列表中显示了几种语言:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d3e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可识别的类型保存了一种语言和它所取得的进步。在<code class="fe nc nd ne nf b">ListView</code>结构中，有一个带有<code class="fe nc nd ne nf b">LearningProgress</code>值的数组——一些语言的集合，以及每种语言的假设进度。</p><p id="b6e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当前实现的问题是，它没有在每种显示的语言旁边显示学习进度值。我们将通过出示徽章来改变这种情况。在这里，我们将用百分比来表示进度。</p><p id="5d84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了添加徽章，我们将在SwiftUI中使用一个名为<code class="fe nc nd ne nf b">badge</code>的新视图修改器。修饰符应用于列表中的每一行。在这种情况下，行内容是上面的<code class="fe nc nd ne nf b">Text</code>视图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f41d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们将进度值包含在一个<code class="fe nc nd ne nf b">String</code>中，以百分比的形式显示。只需添加这一行，无需任何进一步的努力，现在就可以在每种编程语言旁边看到进度:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/8165e0ca9b4d47117a1f0f927b95096a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XT-nj0TGpDKToicG.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bcee" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">玩徽章</h1><p id="f6be" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们刚刚看到,<code class="fe nc nd ne nf b">badge</code>视图修饰符的内容可以是一个<code class="fe nc nd ne nf b">String</code>值。然而，这不是我们能提供的唯一参数类型。也可以给出局部化的<code class="fe nc nd ne nf b">String</code>值。但是除了<code class="fe nc nd ne nf b">String</code>值，我们还可以提供一个整数值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="627e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了字符串和整数值，徽章还可以获得一个<code class="fe nc nd ne nf b">Text</code>视图作为参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="a747" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种类型的参数的真正优点是可以使用其他视图修饰符来修饰<code class="fe nc nd ne nf b">Text</code>,因此最终会有一个不同于默认标记的标记:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="168d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了通过<code class="fe nc nd ne nf b">Text</code>视图定制徽章本身，还可以对整个<code class="fe nc nd ne nf b">List</code>行进行样式化。这样做也会影响徽章:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9db2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，徽章不一定总是数字或<code class="fe nc nd ne nf b">String</code>——即使在<code class="fe nc nd ne nf b">Text</code>视图中。它也可以是作为图像提供给<code class="fe nc nd ne nf b">Text</code>视图的<code class="fe nc nd ne nf b">SFSymbol</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ee80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下代码片段收集了本部分中出现的所有内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="c04e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是带有各种徽章的结果列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/cccb67716a8f2b02acee8dcb3c73ff4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aC5lgOIYpdJRMHao"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="512f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">标签项目中的徽章</h1><p id="29e1" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当应用程序中有标签栏时，标签也可以出现在标签项目中。一般来说，我们已经讨论过的内容也适用于标签项目中的徽章。</p><p id="ab1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管看起来很明显，但有一点值得强调:徽章内容应该尽可能简短，避免与项目图标或其他项目重叠的长内容。</p><p id="66f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不仅是苹果的建议，也是一个有意义的声明。我们绝对不希望有太长的徽章——只有最少的内容，将必要的信息传递给用户。</p><p id="0052" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个标签栏应用程序，除了显示一些标签项之外，它什么也不做。对于那些应该显示徽章的项目，我们应该在每个项目后应用<code class="fe nc nd ne nf b">badge</code>视图修改器。</p><p id="6a07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码段说明了带有四个选项卡项目的<code class="fe nc nd ne nf b">TabView</code>的实现。其中三个展示了徽章，如下图所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="1e5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述实现的结果是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/6e2aac19f736d02c0c13ec42a5a6454e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LhAgWgVy8kenb8VN"/></div></div></figure><p id="97e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了这个例子，并且由于缺乏实际的视图，我使用上面的<code class="fe nc nd ne nf b">VStacks</code>来使用<code class="fe nc nd ne nf b">tabItem</code>修改器。</p><p id="35a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，每个<code class="fe nc nd ne nf b">badge</code>修改器紧跟在各自的<code class="fe nc nd ne nf b">tabItem</code>修改器之后。最重要的是，很明显，数字内容可能是在标签项目中使用徽章时最适合提供徽章的值。</p><p id="a23d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不管怎样，带有<code class="fe nc nd ne nf b">String</code>值的徽章也包括在内，但主要是为了演示。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9c55" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">摘要</h1><p id="9d8c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在SwiftUI中显示徽章现在是一项简单的任务，框架本身就支持这项任务。</p><p id="68be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，有一个缺点，那就是我们仍然要处理的向后兼容性。</p><p id="2843" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一两年后，这不会是什么大问题。但在此之前，我们将有条件地使用新的徽章API，因为它只适用于最新的操作系统。</p><p id="ca0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，我希望你喜欢这篇文章，并且觉得它足够有趣。感谢阅读！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="99a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">最初发布于2021年7月23日</em><a class="ae ky" href="https://serialcoder.dev/text-tutorials/swiftui/show-badges-in-swiftui/" rel="noopener ugc nofollow" target="_blank"><em class="lv">https://serial coder . dev</em></a><em class="lv">。</em></p></div></div>    
</body>
</html>