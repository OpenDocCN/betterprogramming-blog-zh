<html>
<head>
<title>Where Do Solar Panels Yield the Most in a Country?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个国家哪里的太阳能电池板产量最高？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/where-do-solar-panels-yield-the-most-in-a-country-7e21d56cf4e4?source=collection_archive---------14-----------------------#2022-08-09">https://betterprogramming.pub/where-do-solar-panels-yield-the-most-in-a-country-7e21d56cf4e4?source=collection_archive---------14-----------------------#2022-08-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e355" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">太阳能电池板的产量在全国并不一致。荷兰哪里的产量最高？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2cfb1a470944adc552ffbfd8a90add9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zF9qQGE-_vWAFIpK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jonathanborba?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔纳森·博尔巴</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="44ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太阳能电池板的效率在很大程度上取决于日照时间。这个数字各地不一样。但它也与一天中的什么时间和一年中的什么部分有阳光照射有关。这两个因素决定了太阳辐射的功率，从而决定了发电量。</p><p id="20ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，介绍了一个计算方法来确定荷兰最适合居住的地方。如果太阳能电池板的效率是唯一的标准。可能不是，但是做计算还是很有趣的。</p><h1 id="c6f5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">查找所有地点</h1><p id="f728" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们需要计算全国不同地点的太阳能电池板发电量。我们可以在全国范围内使用一个边界框，并生成一个位置网格。这种方法将在德国和比利时的海里增加许多位置。由于我们只对荷兰感兴趣，我将使用该国所有地方的列表，并以此作为计算的基础。</p><p id="9089" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">国家CBS(荷兰统计局)可以获得所有地方的列表。CBS提供的所有数据都可以下载。为了简化下载，可以使用一个名为<a class="ae ky" href="https://github.com/J535D165/cbsodata" rel="noopener ugc nofollow" target="_blank">CBS data</a>的Python包。搜索CBS网站(<a class="ae ky" href="https://opendata.cbs.nl/#/CBS/nl/" rel="noopener ugc nofollow" target="_blank"> statline </a>)，我们在数据集中找到ID为<code class="fe ms mt mu mv b">84992NED</code>的所有地方。</p><p id="341e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用正确的工具，很容易获得数据帧形式的表:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="f336" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第5行从CBS下载表格，并将其转换为Pandas数据帧(该方法以JSON格式返回数据)。我们只对列<code class="fe ms mt mu mv b">Woonplaatsen</code>和<code class="fe ms mt mu mv b">Naam_2</code>中的地名感兴趣，所以我们只保留这两列，并在数据帧<code class="fe ms mt mu mv b">places</code>中将它们合并成一列(第6 -7行)。</p><h2 id="b4f6" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">地理编码地点</h2><p id="3053" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们有了这个国家的所有地方，我们需要对它们进行地理编码，以确定纬度和经度。这可以通过<a class="ae ky" href="http://nominatim.openstreetmap.org" rel="noopener ugc nofollow" target="_blank"> OpenStreetMap </a>的搜索API来完成。这是一个OSM搜索引擎的调试界面。在之前的项目中，我已经有了对一个&lt;街道、城市、国家&gt;元组进行地理编码的代码，所以围绕这个函数的一个简单包装器(只需要一个城市名)就足够了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">get_lat_long_city</code>方法以两个独立的值返回该地点的纬度、经度位置。第29行使用dataframe的<code class="fe ms mt mu mv b">map</code>函数调用将<code class="fe ms mt mu mv b">name</code>列作为参数的<code class="fe ms mt mu mv b">get_lat_long_city</code>方法。使用<code class="fe ms mt mu mv b">zip</code>函数，它们被插入到两个新列中。如果同一个位置有重复的名称，重复的地理位置将被删除。</p><h2 id="151d" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">确定太阳能电池板性能</h2><p id="3777" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在我的上一篇文章<a class="ae ky" href="https://towardsdatascience.com/solar-panel-power-generation-analysis-7011cc078900" rel="noopener" target="_blank">太阳能电池板发电分析</a>中，我描述了用于太阳能电池板计算的<a class="ae ky" href="https://pvlib-python.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> pvlib </a>库的用法。对于此分析，我们将计算所有位置的1 KW太阳能电池板平躺在地面上，面向南方时产生的功率。我们在所有地点都使用这种配置，这样我们就可以比较结果。</p><p id="2c76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧使用生成的功率扩展，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="d6e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">obtain_panel_power_data</code>与上一篇文章中的相同。<code class="fe ms mt mu mv b">obtain_power_for_location</code>是一个只需要地理位置的包装器，默认为提到的太阳能电池板(平面)。第25行为每一行调用该方法，并将结果存储在新列'<code class="fe ms mt mu mv b">P</code>'中。使用一年(2020年)的发电量。</p><h2 id="eb96" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">标绘结果</h2><p id="5367" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">所以现在我们有了地理位置和一年的发电量。最后一步是将它绘制在地图上。<a class="ae ky" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">叶子</a>让用Python绘制地图变得简单。我们将用色标标出所有位置，以显示产生的能量。要将产生的能量转换为色标，我们需要将其归一化到范围[0，1](第6–7行)。这可以通过matplotlib映射到色标。为此，我们将使用黄色到红色的标度(第10-14行)。</p><p id="9a1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">计算地理位置和颜色后，可以将它们绘制到地图上(第20-24行):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="40a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将范围映射到色标会产生一个需要转换为RGB的四倍值(第13行)。因为第四个值是alpha通道，所以我们不需要它。</p><p id="8485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此代码会导致以下绘图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/78e9a85ceccaac6fd956f224011b6a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g6iYRwrsyTIVgFE7x4Fmvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">太阳能电池板效率(图片由作者提供)</p></figure><p id="81e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">效率最高的在泽兰(Zoutelande)；德伦特最低。(Aa en Hunze)。相差20%。比我想象的要多得多。</p><p id="b7ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文开头已经提到日照量是一个关键因素。这和每年日照时数的地图是一样的吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/ea8675e8f2212575e6347856192234e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*TcrcghOLsUCHu283YL-TNg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Jaarlijkse zonuren(图片来源:<a class="ae ky" href="https://www.unitedconsumers.com/energie/zonnepanelen/opbrengst-zonuren-nederland.jsp" rel="noopener ugc nofollow" target="_blank">联合消费者</a></p></figure><p id="efa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些地图上的高度大致相等，但特别是在北方，差异是显著的。日照时数比东部高，但发电量较低。</p><h1 id="a7b0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="c088" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当你搬到西南部时，你的太阳能电池板会喜欢你的。大概是海风的缘故，阳光更多的照射在海岸线周围。但这可能不会影响你搬到哪里。</p><p id="c821" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文的目标是展示一些方便的包和API(CBS odata、OSM、pvlib和follow)可以非常容易地洞察地理数据。目标是启发你做出自己的见解。</p><p id="50db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这篇文章。要获得更多灵感，请查看我的其他文章:</p><ul class=""><li id="48ee" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><a class="ae ky" href="https://towardsdatascience.com/solar-panel-power-generation-analysis-7011cc078900" rel="noopener" target="_blank">太阳能电池板发电分析</a></li><li id="c326" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><a class="ae ky" href="https://towardsdev.com/perform-a-function-on-columns-in-a-csv-file-a889ef02ca03" rel="noopener ugc nofollow" target="_blank">对CSV文件中的列执行功能</a></li><li id="1faf" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">从你的活动跟踪器的日志中创建一个热图</li><li id="67a0" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><a class="ae ky" href="https://towardsdatascience.com/parallel-web-requests-in-python-4d30cc7b8989" rel="noopener" target="_blank">使用Python实现并行web请求</a></li><li id="1812" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><a class="ae ky" href="https://towardsdatascience.com/all-public-transport-leads-to-utrecht-not-rome-bb9674600e81" rel="noopener" target="_blank">所有公共交通工具都通向乌得勒支，而不是罗马</a></li></ul><p id="a584" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oa">免责声明:本文包含的观点和看法仅归作者所有。</em></p></div></div>    
</body>
</html>