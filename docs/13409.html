<html>
<head>
<title>How To Quickly Get Started With GraphQL in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular中快速入门GraphQL</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-quickly-get-started-with-graphql-in-angular-a6fccf5f3a0c?source=collection_archive---------9-----------------------#2022-08-24">https://betterprogramming.pub/how-to-quickly-get-started-with-graphql-in-angular-a6fccf5f3a0c?source=collection_archive---------9-----------------------#2022-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6471" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让您轻松入门的简短指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d23ef253276417a62a5d4b9e102a1c22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LY2fG7cu--drN8r_xZhsPw.png"/></div></div></figure><h1 id="edf8" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">先决条件</h1><ul class=""><li id="1656" class="lj lk iq ll b lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">https://nodejs.org/en/</li><li id="2b84" class="lj lk iq ll b lm mc lo md lq me ls mf lu mg lw lx ly lz ma bi translated">角度CLI:<a class="ae mb" href="https://angular.io/cli" rel="noopener ugc nofollow" target="_blank">https://angular.io/cli</a></li></ul><h1 id="c1ac" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">1.生成新的角度项目</h1><p id="25ae" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">让我们使用<code class="fe mu mv mw mx b"><strong class="ll ir">ng new</strong></code>命令生成一个新的角度应用:</p><pre class="kg kh ki kj gt my mx mz na aw nb bi"><span id="e30a" class="nc ks iq mx b gy nd ne l nf ng">ng new angular-graphql-app</span></pre><h1 id="a032" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">2.安装带有角度示意图的apollo-angular库</h1><p id="e069" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">生成app后，我们会安装一个名为<a class="ae mb" href="https://apollo-angular.com/" rel="noopener ugc nofollow" target="_blank"> Apollo Angular </a>的库。这是一个很棒的GraphQL客户端，可以构建使用GraphQL获取数据的UI组件。</p><p id="ebae" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">该库支持<code class="fe mu mv mw mx b">ng add</code>命令。只需运行以下命令来安装它:</p><pre class="kg kh ki kj gt my mx mz na aw nb bi"><span id="8fc2" class="nc ks iq mx b gy nd ne l nf ng">ng add apollo-angular</span></pre><p id="7ece" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">您将被要求提供Graphql服务器的URL。在这个例子中，我们将使用countries API，这是一个非常棒的关于国家、大洲和语言信息的公共端点。</p><p id="194a" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">看看这里:<a class="ae mb" href="https://countries.trevorblades.com" rel="noopener ugc nofollow" target="_blank">https://countries.trevorblades.com</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/4dabab7dd4a152ee883071b25de8d71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*LmYXZqXlIoZgREzw3G1JRg.png"/></div></figure><p id="9f29" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">如上图所示，该命令将创建一个名为<code class="fe mu mv mw mx b">graphql.module.ts</code>的新模块，并用必要的配置和导入自动更新所有其他文件。</p><p id="f6e0" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated"><code class="fe mu mv mw mx b">graphql.module.ts</code>文件看起来会像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">graphql.module.ts</p></figure><h1 id="667c" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3.创建模型</h1><p id="dafa" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">现在，我们将创建两个简单的模型，一个用于<code class="fe mu mv mw mx b">Country</code>，一个用于<code class="fe mu mv mw mx b">Continent</code>。这两个对象稍后将保存来自API的数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">Country.ts</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">continental . ts</p></figure><h1 id="f7d3" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">4.创建新的国家服务</h1><p id="bbbd" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">在创建了我们的模型之后，下一步是创建一个所有应用程序类都可以用来获取国家的<code class="fe mu mv mw mx b">CountriesService</code>。稍后我们将使用Angular支持的依赖注入将其注入到<code class="fe mu mv mw mx b">CountriesComponent</code>构造函数中。</p><p id="0ccc" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">您可以通过CLI使用以下命令生成新的角度服务:</p><pre class="kg kh ki kj gt my mx mz na aw nb bi"><span id="8145" class="nc ks iq mx b gy nd ne l nf ng">ng g service countries</span></pre><p id="8beb" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">现在，打开生成的<code class="fe mu mv mw mx b">countries.service.ts</code>文件并粘贴以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="e3c9" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">实际的graphql查询位于我们在该类开始时声明的countries常量中。我们将检索名称、首都、货币、表情符号、电话和大陆的名称。然后我们将它传递给<code class="fe mu mv mw mx b">watchQuery</code>方法的<code class="fe mu mv mw mx b">query</code>参数。</p><p id="b1a5" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated"><code class="fe mu mv mw mx b">watchQuery</code>方法返回一个<code class="fe mu mv mw mx b">QueryRef</code>对象，它的<code class="fe mu mv mw mx b">valueChanges</code>属性是一个<code class="fe mu mv mw mx b">Observable</code>。这个可观测值包含了<code class="fe mu mv mw mx b">data</code>场的实际结果。</p><h1 id="a1b9" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">5.创建新的国家组件</h1><p id="44b2" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">现在，让我们使用下面的命令生成一个新组件:</p><pre class="kg kh ki kj gt my mx mz na aw nb bi"><span id="e586" class="nc ks iq mx b gy nd ne l nf ng">ng g c countries</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/a7fbf8381e88be33a266c4422da3d72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*J-G-CV-lcBIrG0_N0ARj2A.png"/></div></figure><p id="e3b0" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">不要忘记将选择器添加到<code class="fe mu mv mw mx b">app.component.html</code>文件中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/c35f06f44f1e5e10f7552890c4532c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*qzyP3vxjlMZMtOn4RjPbBg.png"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">app.component.html</p></figure><p id="1d42" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">打开<code class="fe mu mv mw mx b">countries.component.ts</code>文件并粘贴以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="5908" class="lj lk iq ll b lm nh lo ni lq nv ls nw lu nx lw lx ly lz ma bi translated"><code class="fe mu mv mw mx b">displayedColumns</code>:要在数据表中显示的列的名称。</li><li id="b643" class="lj lk iq ll b lm mc lo md lq me ls mf lu mg lw lx ly lz ma bi translated"><code class="fe mu mv mw mx b">dataSource$</code>:observable包含了我们之前从服务器获取的国家。我们从注入到组件构造函数中的<code class="fe mu mv mw mx b">countriesService</code>调用<code class="fe mu mv mw mx b">getCountries()</code>。</li></ul><h1 id="ce48" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">6.添加有角度的材料</h1><p id="41f7" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">这部分是可选的。你可以随意使用任何你想要的UI库。我们将使用<a class="ae mb" href="https://material.angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular material </a>的datatable组件来显示本例中的数据。</p><p id="3afb" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">键入以下命令将库添加到项目中:</p><pre class="kg kh ki kj gt my mx mz na aw nb bi"><span id="1072" class="nc ks iq mx b gy nd ne l nf ng">ng add @angular/material</span></pre><p id="f8ef" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">为此，我们需要导入<code class="fe mu mv mw mx b">app.module.ts</code>中的<code class="fe mu mv mw mx b">MatTableModule</code>、<code class="fe mu mv mw mx b">MatPaginatorModule</code>和<code class="fe mu mv mw mx b">MatSortModule</code>，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div><p class="np nq gj gh gi nr ns bd b be z dk translated">应用程序模块</p></figure><h1 id="3bea" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">7.显示数据表中的国家</h1><p id="7a70" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">最后一步是显示列名和从数据表中可观察到的国家提取的数据。</p><p id="a459" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">打开<code class="fe mu mv mw mx b">countries.component.ts</code>文件并粘贴以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="cda5" class="nc ks iq bd kt ny nz dn kx oa ob dp lb lq oc od ld ls oe of lf lu og oh lh oi bi translated"><strong class="ak">结果</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/a3ef3c3bf50d4b050f3b5f6b5a7f81c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXGLYeGYJJVi5vF9jxCisQ.png"/></div></div><p class="np nq gj gh gi nr ns bd b be z dk translated">本地主机:4200</p></figure><h1 id="e563" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">包扎</h1><p id="6942" class="pw-post-body-paragraph mh mi iq ll b lm ln jr mj lo lp ju mk lq ml mm mn ls mo mp mq lu mr ms mt lw ij bi translated">这个简单的教程告诉我们如何在Angular应用程序中快速设置graphql。角度示意图使安装和配置依赖关系变得容易，并且与自己动手相比节省了时间。</p><p id="5529" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated">apollo-angular库还有很多值得探索的地方，所以请随意查看这里的文档:<a class="ae mb" href="https://apollo-angular.com/" rel="noopener ugc nofollow" target="_blank">https://apollo-angular.com/</a></p><p id="3400" class="pw-post-body-paragraph mh mi iq ll b lm nh jr mj lo ni ju mk lq nj mm mn ls nk mp mq lu nl ms mt lw ij bi translated"><em class="ok">感谢阅读，下期再见</em>😉。</p></div></div>    
</body>
</html>