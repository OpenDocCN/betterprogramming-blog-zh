<html>
<head>
<title>How To Build a Bitcoin Dollar Cost Average Chart With React and Recharts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React和Recharts构建比特币美元成本平均图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-bitcoin-dca-chart-with-react-and-recharts-d29523b5427c?source=collection_archive---------20-----------------------#2020-01-03">https://betterprogramming.pub/how-to-build-a-bitcoin-dca-chart-with-react-and-recharts-d29523b5427c?source=collection_archive---------20-----------------------#2020-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3dc3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">制作图表来了解你的金融投资</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5dad508c6804ded27aa9bc613e4185e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SombTq9ozhqMDBXxnLBuCg.png"/></div></div></figure><p id="70a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">编者按:这篇文章不打算作为财务建议。这篇文章仅用于教育目的。更好的编程、它的员工和它的所有者不对你的投资决策负责。</p><p id="b8c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae lo" href="http://recharts.org/en-US" rel="noopener ugc nofollow" target="_blank"> Recharts </a>是一个图表库，它提供了一组声明性的React组件，用于使用<a class="ae lo" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> D3 </a>构建图表。十种高度可定制的图表类型与帮助器组件一起提供。</p><p id="fb43" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我们将构建几个<a class="ae lo" href="http://recharts.org/en-US/api/AreaChart" rel="noopener ugc nofollow" target="_blank">面积图</a>来显示特定历史时间段内<a class="ae lo" href="https://www.investopedia.com/terms/d/dollarcostaveraging.asp" rel="noopener ugc nofollow" target="_blank">美元成本平均化</a>比特币时的投资组合价值、累计硬币总数和投资总额。</p><p id="2d38" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">访问该项目的<a class="ae lo" href="https://github.com/codypearce/crypto-dca" rel="noopener ugc nofollow" target="_blank"> GitHub </a>了解更多信息。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="30f8" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">部分</h1><ul class=""><li id="b692" class="mo mp iq kt b ku mq kx mr la ms le mt li mu lm mv mw mx my bi translated">绘制平均美元成本图</li><li id="d761" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">入门指南</li><li id="2ff1" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">使用<a class="ae lo" href="https://www.coingecko.com/en" rel="noopener ugc nofollow" target="_blank"> CoinGecko的</a> API的历史价格</li><li id="7b2a" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">获取数据</li><li id="4fc5" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">计算总数</li><li id="250a" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">构建图表数组</li><li id="b9e6" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">再charts面积图</li><li id="9dad" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">重新charts工具提示</li><li id="576a" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">充电点</li><li id="70f2" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">重新绘制Y轴和X轴</li><li id="a062" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">多区域充电</li><li id="ab8f" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">响应充电</li><li id="db69" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">结论</li></ul></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="1282" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">绘制平均美元成本图</h1><p id="8ce7" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">美元成本平均法(DCA)是一种投资策略，在这种策略下，投资者定期购买相同金额的资产，以降低短期波动性。</p><p id="6657" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，每个月向特定股票或加密货币投资200美元，这意味着当股价低时，你将购买更多股票，当价格高时，你将购买更少股票。阅读DCA上的<a class="ae lo" href="https://www.investopedia.com/terms/d/dollarcostaveraging.asp" rel="noopener ugc nofollow" target="_blank"> Investopedia文章</a>了解更多信息。</p><p id="1868" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">绘制一个比特币DCA账户的价值随时间变化的图表需要我们计算一段时间内每个间隔的总账户价值。</p><p id="8d1a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，如果间隔是一个月，时间段是两年，那么我们需要计算24次总帐户值。要计算特定时间间隔内的总价值，我们需要用购买时的硬币价格乘以到该时间点为止累积的硬币总数。</p><p id="97a2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">到那时为止累积的硬币总数可以通过将投资金额除以在每个时间间隔购买时硬币的价格来计算。</p><p id="b58b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们用一个例子来说明这一点，假设我们计划从2016年1月到2016年5月每个月购买价值200美元的比特币。</p><p id="22d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一个月的硬币数量很容易计算，只需将投资金额(200)除以2016年1月1日的硬币价格(434.33美元)。</p><p id="5c08" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">总价值同样简单，只需将目前硬币的数量乘以当前硬币的价格，第一个月的价格应等于投入的金额(200)。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="3b29" class="nm lx iq ni b gy nn no l np nq">// amountToInvest / coinPrice<br/>200 / 434.33  ~= .46 // Amount of Coin for the first month</span><span id="e95b" class="nm lx iq ni b gy nr no l np nq">// amountOfCoin * coinPrice<br/>.46 * 434.33 ~= 200  // Total Value</span></pre><p id="9147" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">计算第二个月的硬币数量略有不同。</p><p id="446a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，与上个月类似，将投资金额除以当月硬币价格(371.04)。然后，将该值与上个月的硬币金额(. 46)相加。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="372c" class="nm lx iq ni b gy nn no l np nq">// amountToInvest / coinPrice<br/>200 / 371.04  ~= .54 // Amount of Coin bought in the second month</span><span id="395b" class="nm lx iq ni b gy nr no l np nq">// amountOfCoin for second month + amountOfCoin for first month<br/>.54 + .46 = 1 // Total Accumulated Amount of Coin so far</span></pre><p id="0601" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了计算第二个月的总值，我们将硬币的累计总量乘以当前的硬币价格。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="b269" class="nm lx iq ni b gy nn no l np nq">// Total Accumulated Amount of Coin * coinPrice<br/>1 * 371.04 = 371.04</span></pre><p id="6d0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将这一过程扩展到其余月份，会生成如下表格:</p><p id="c72a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">月币价格总投资额币总价值的数量。53860 . 48868886861</p><p id="68ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">计算这些值的代码可能如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="004e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">numOfDays</code>是时间段的总天数。在这种情况下，2016年1月到2016年5月之间有121天。</p><p id="06b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">freqInDays</code>是买入的时间间隔，本例中为30天。</p><p id="7b14" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">priceArr</code>是一个包含历史比特币价格和日期的对象数组。</p><p id="2a5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">amountToInvest</code>是每个时间段将投资的美元金额，在本例中为200。</p><p id="4db7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">coinAmount</code>是到目前为止积累的硬币总量。</p><p id="6edb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">totalInvested</code>是到目前为止投入的总金额。</p><p id="1afd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">total</code>是投资组合的美元总价值。</p><p id="8541" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这四个值，<code class="fe nu nv nw ni b">TotalInvested</code>、<code class="fe nu nv nw ni b">CoinAmount</code>、<code class="fe nu nv nw ni b">CoinPrice</code>和<code class="fe nu nv nw ni b">Total</code>是我们想要绘制的随时间变化的图表。</p><p id="c5ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">freqInDays</code>、<code class="fe nu nv nw ni b">amountToInvest</code>和<code class="fe nu nv nw ni b">numOfDays</code>将由用户提供，而历史比特币价格<code class="fe nu nv nw ni b">priceArr</code>将由CoinGecko的API提供。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="0069" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">入门指南</h1><p id="ae0e" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">初始化一个新的<a class="ae lo" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> Create React App </a>项目。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="7503" class="nm lx iq ni b gy nn no l np nq">npx create-react-app bitcoin-dca<br/>cd bitcoin-dca<br/>npm start</span></pre><p id="d69b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">转到<code class="fe nu nv nw ni b">src/App.js</code>并删除启动代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="e360" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，转到<code class="fe nu nv nw ni b">src/App.css</code>并如下更新样式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="eb0b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">coin gecko API的历史价格</h1><p id="8746" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">CoinGecko的API 提供没有API密钥的免费加密数据。<code class="fe nu nv nw ni b">/coins/{id}/market_chart/range</code>端点给出了特定硬币在特定范围内的历史市场数据，这正是我们所需要的。</p><p id="bb44" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">id</code>参数指的是硬币的ID，在本例中就是<code class="fe nu nv nw ni b">bitcoin</code>。<code class="fe nu nv nw ni b">vs_currency</code>参数决定比特币价格将以何种货币发送。</p><p id="8ee1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">from</code>和<code class="fe nu nv nw ni b">to</code>参数表示要获取的价格的时间段，必须作为UNIX时间戳提供。</p><p id="9142" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">比如<a class="ae lo" href="https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=usd&amp;from=1392577232&amp;to=1422577232" rel="noopener ugc nofollow" target="_blank">https://API . coin gecko . com/API/v3/coins/比特币/market_chart/range？vs _ currency = USD&amp;from = 1392577232&amp;to = 1422577232</a>获取<code class="fe nu nv nw ni b">02/16/2014</code>到<code class="fe nu nv nw ni b">01/30/2015</code>之间每天的比特币美元价格。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="a824" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">获取数据</h1><p id="c4ed" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">首先，我们在<code class="fe nu nv nw ni b">App.js</code>的顶部设置静态值<code class="fe nu nv nw ni b">startDate</code>、<code class="fe nu nv nw ni b">endDate</code>、<code class="fe nu nv nw ni b">freqInDays</code>、<code class="fe nu nv nw ni b">amountToInvest</code>。理想情况下，我们将构建一个表单来从用户那里获取这些值，但是现在我们将在这里静态地定义它们。</p><p id="7a8c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，构建一个传入<code class="fe nu nv nw ni b">startDate</code>和<code class="fe nu nv nw ni b">endDate</code>的基本异步函数，从CoinGecko的API获取数据，最后将数据放入state。</p><p id="25c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了保存数据和不同的状态，我们需要在组件状态中定义<code class="fe nu nv nw ni b">coinData</code>、<code class="fe nu nv nw ni b">isLoading</code>和<code class="fe nu nv nw ni b">error</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="d745" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了将<code class="fe nu nv nw ni b">startDate</code>和<code class="fe nu nv nw ni b">endDate</code>参数作为人类可读的日期传递，我们将使用<a class="ae lo" href="https://github.com/iamkun/dayjs" rel="noopener ugc nofollow" target="_blank"> Day.js </a>库将人类可读的日期转换为UNIX时间戳。导入<code class="fe nu nv nw ni b">dayjs</code>并应用其<code class="fe nu nv nw ni b">advancedformat</code>扩展。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="933f" class="nm lx iq ni b gy nn no l np nq">...<br/>import dayjs from "dayjs";<br/>import advancedFormat from "dayjs/plugin/advancedFormat";<br/>dayjs.extend(advancedFormat);<br/>...</span></pre><p id="b45a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，使用<code class="fe nu nv nw ni b">dayjs</code>的<code class="fe nu nv nw ni b">format</code>方法从<code class="fe nu nv nw ni b">getCoinData</code>函数中将日期转换成UNIX时间戳。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="84ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，如上所述构建URL，获取数据，并用<code class="fe nu nv nw ni b">setCoinData</code>更新组件的状态。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="ed19" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们可以用组件顶部提供的日期在<code class="fe nu nv nw ni b">useEffect</code>钩子中调用这个函数。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="46e0" class="nm lx iq ni b gy nn no l np nq">...<br/>useEffect(() =&gt; {<br/>  getCoinData(startDate, endDate);<br/>}, []);<br/>...</span></pre><p id="ff75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要处理四种UI状态:<code class="fe nu nv nw ni b">noData</code>、<code class="fe nu nv nw ni b">loading</code>、<code class="fe nu nv nw ni b">error</code>和<code class="fe nu nv nw ni b">data</code>。在<code class="fe nu nv nw ni b">useEffect</code>钩子下添加一些条件，如下图所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="d82a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从<code class="fe nu nv nw ni b">const data = await coinResponse.json()</code>返回的数据应该是我们提供的两个日期之间的UNIX时间戳和价格的数组。</p><p id="18b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这正是我们计算总值和创建图表所需要的。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="b923" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">计算总数</h1><p id="3d64" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">我们的目标是使用<code class="fe nu nv nw ni b">coinData.prices</code>数组计算以下值:</p><ul class=""><li id="7b7e" class="mo mp iq kt b ku kv kx ky la nx le ny li nz lm mv mw mx my bi translated">BTC硬币总量— <code class="fe nu nv nw ni b">totalCoinAmount</code></li><li id="4f2c" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">美元总值— <code class="fe nu nv nw ni b">endTotal</code></li><li id="d98c" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">美元投资总额— <code class="fe nu nv nw ni b">totalInvested</code></li><li id="726b" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">以美元计算的收入— <code class="fe nu nv nw ni b">numberGained</code></li><li id="8eb2" class="mo mp iq kt b ku mz kx na la nb le nc li nd lm mv mw mx my bi translated">收益百分比— <code class="fe nu nv nw ni b">percentGained</code></li></ul><p id="7913" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从上面的<em class="ln">图形美元成本平均</em>部分，这里的大部分逻辑应该是熟悉的。</p><p id="842f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">numberGained</code>就是以美元计算的总价值减去<code class="fe nu nv nw ni b">totalInvested</code>。<code class="fe nu nv nw ni b">percentGained</code>是<code class="fe nu nv nw ni b">totalInvested</code>增长到<code class="fe nu nv nw ni b">endTotal</code>的百分比。创建如下所示的文件<code class="fe nu nv nw ni b">src/Totals</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="dd91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了显示这些值，创建另一个带有简单样式的组件<code class="fe nu nv nw ni b">src/Totaljs</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="cdc9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你运行上面的计算，你会发现大部分的数值都有很多小数位。创建一个实用函数，<code class="fe nu nv nw ni b">./src/round.js</code>，将数字四舍五入，使它们看起来更好。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="acab" class="nm lx iq ni b gy nn no l np nq">export default function round(num, digit) {<br/>  return +(Math.round(num + "e+" + digit) + "e-" + digit);<br/>}</span></pre><p id="a938" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将<code class="fe nu nv nw ni b">round</code>和<code class="fe nu nv nw ni b">Total</code>组件导入到<code class="fe nu nv nw ni b">Totals</code>组件中。</p><p id="d7fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，创建几个<code class="fe nu nv nw ni b">Total</code>组件，同时将描述传入<code class="fe nu nv nw ni b">title</code>属性，将实际值传入<code class="fe nu nv nw ni b">value</code>属性。我们也可以使用<code class="fe nu nv nw ni b">round</code>函数格式化这些值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="10e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，将<code class="fe nu nv nw ni b">Totals</code>导入<code class="fe nu nv nw ni b">App.js</code>，用<code class="fe nu nv nw ni b">Totals</code>组件替换“数据”状态。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/0dffeda759d3e68df42a123cd74d2921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p1vnuOHFe_6re0l4.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="dea2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">构建图表数组</h1><p id="189b" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">从上面的<em class="ln">图形美元成本平均</em>部分，下面的代码应该非常熟悉，请查看该部分以了解该代码如何工作。</p><p id="179c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个不同之处是，我们希望再次使用<code class="fe nu nv nw ni b">dayjs</code>以人类可读的方式存储日期。新建一个<code class="fe nu nv nw ni b">./src/Graph.js</code>文件，如下图:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="87c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将创建一个对象数组<code class="fe nu nv nw ni b">dataArr</code>，如下所示:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="fef8" class="nm lx iq ni b gy nn no l np nq">[<br/>  {TotalInvested: 200, CoinAmount: .46, CoinPrice: 460, Total: 200, date: '1/1/2016'},<br/>  {TotalInvested: 400, CoinAmount: 1, CoinPrice: 380, Total: 200, date: '1/5/2016'},<br/>  ...<br/>]</span></pre></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="3488" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">再chart面积图</h1><p id="8950" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">我们终于准备好开始创建图表了。Recharts <code class="fe nu nv nw ni b">&lt;AreaChart&gt;</code>和<code class="fe nu nv nw ni b">&lt;Area&gt;</code>组件可以以多种方式定制，但首先，我们将创建一个非常基本的图表，并以此为基础进行构建。</p><p id="1ecf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">&lt;AreaChart&gt;</code>组件是一个包装组件，它接受<code class="fe nu nv nw ni b">data</code>属性中的图表数据，并将该数据提供给其子组件。</p><p id="d206" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的例子中，我们需要将上面创建的<code class="fe nu nv nw ni b">dataArr</code>数组传递到<code class="fe nu nv nw ni b">data</code>属性中。为了显示图表，我们还需要提供一个高度和宽度属性，在本例中，将高度设置为250，宽度设置为700。</p><p id="608a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">&lt;Area&gt;</code>组件是在图形上实际显示数据的组件。<code class="fe nu nv nw ni b">dataKey</code>道具将选择<code class="fe nu nv nw ni b">dataArr</code>对象中每个对象的关键点，作为数据显示在图形上。</p><p id="1651" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">记住从上面看，<code class="fe nu nv nw ni b">dataArr</code>中的每个对象看起来都像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="cab2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们显示<code class="fe nu nv nw ni b">Total</code>值，因此将<code class="fe nu nv nw ni b">dataKey</code>属性设置为“总计”。<code class="fe nu nv nw ni b">&lt;Area&gt;</code>组件接受许多其他的道具来定制我们想要的图形。现在，让我们来设计一下<code class="fe nu nv nw ni b">stroke</code>、<code class="fe nu nv nw ni b">fillOpacity</code>和<code class="fe nu nv nw ni b">fill</code>的样式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="840a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将<code class="fe nu nv nw ni b">Graph</code>组件添加到<code class="fe nu nv nw ni b">App.js</code>中，以查看我们在上面构建的面积图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/d9608c305b54dc6f2aa500db3ee03fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DzkqCtVIxeY0o1Q0.png"/></div></div></figure><p id="2a2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">&lt;Area&gt;</code>组件的形状也可通过<code class="fe nu nv nw ni b">type</code>支柱改变。例如，将<code class="fe nu nv nw ni b">step</code>传递给类型prop。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/14d059179b800121d16b9f911ac4d937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CJoJRbA1jmP0UfV3.png"/></div></div></figure><p id="d7f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在试着传入<code class="fe nu nv nw ni b">natural</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/028f783c48f6d32795fde2f481b6c074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*32qgcuFGnN57NZYX.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="34e6" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">重新charts工具提示</h1><p id="280d" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">上面的图表是一个好的开始，但是没有办法看到图表上的单个值。</p><p id="b2e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用Recharts' <code class="fe nu nv nw ni b">tooltip</code>在图表上显示每个区间的总值。我们也可以用<code class="fe nu nv nw ni b">contentStyle</code>和<code class="fe nu nv nw ni b">labelStyle</code>道具来修改工具提示的样式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/dc4737802699c382ca695784e7d657fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PIQt1rhJPse8tIBR.png"/></div></div></figure><p id="4490" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您会注意到的一个问题是工具提示上的总值有一串数字。我们可以使用<code class="fe nu nv nw ni b">formatter</code> prop格式化这个数字，它采用一个回调函数，以一种格式返回数据。</p><p id="0501" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">引入我们在上面构建的舍入实用函数，<code class="fe nu nv nw ni b">./src/round.js</code>，将值舍入到两位。另外，在数值前添加一个<code class="fe nu nv nw ni b">$</code>字符，表示单位为美元。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="d19e" class="nm lx iq ni b gy nn no l np nq">&lt;Tooltip<br/>  contentStyle={styles.tooltipWrapper}<br/>  labelStyle={styles.tooltip}<br/>  formatter={value =&gt; `$${round(value, 2)}`}<br/>/&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/270c7daebbaba4fdb45d8e1a952f2d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FdPlTbz7O3L2QzS_.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="14bb" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">充电点</h1><p id="0332" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated"><code class="fe nu nv nw ni b">&lt;Area&gt;</code>组件上的<code class="fe nu nv nw ni b">dot</code>支柱将在图表上的每个独立点添加点。</p><p id="6bbb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以传入<code class="fe nu nv nw ni b">true</code>以默认样式显示点，传入一个样式对象以我们想要的方式显示点，或者传入一个定制的点元素。现在，添加一个简单的样式对象。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/3f4d4390c95e395eabe7b0106bfb3b40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BdTG9b7u-R8JRbtY.png"/></div></div></figure><p id="daa4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也可以使用<code class="fe nu nv nw ni b">activeDot</code>道具编辑鼠标悬停时的点。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/13921c239ba8b912576e967483681251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EdN0FbGx0LEzH2gu.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="4b45" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">重新绘制Y轴和X轴</h1><p id="ac54" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">使用<code class="fe nu nv nw ni b">&lt;YAxis&gt;</code>和<code class="fe nu nv nw ni b">&lt;XAxis&gt;</code>组件，我们可以显示Y轴和X轴，以提供关于数值范围的更多信息。</p><p id="703b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nu nv nw ni b">&lt;XAxis&gt;</code>组件默认以升序显示点数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/f0eb18569fbb9c5d5b279d3da14f47a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SgL1bcbI-ll85Z_k.png"/></div></div></figure><p id="923b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是我们想在X轴上显示日期本身。为此，用字符串“日期”将<code class="fe nu nv nw ni b">dataKey</code>属性添加到<code class="fe nu nv nw ni b">&lt;XAxis&gt;</code>属性。</p><p id="906c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于<code class="fe nu nv nw ni b">XAxis</code>和<code class="fe nu nv nw ni b">YAxis</code>组件有大量的道具和定制，从定制标签到定制缩放、刻度和事件处理程序。然而，我们现在要保持简单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/13438745d8f56e5554ced45ad27b3571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SrY4U_JCwyTFVJ_z.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="6a76" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">多区域充电</h1><p id="6040" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">使用Recharts，我们可以在同一个图表中添加多个区域，以便在同一个时间线上显示相关数据。</p><p id="f125" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的例子中，我们希望在同一个图表中显示<code class="fe nu nv nw ni b">CoinAmount</code>、<code class="fe nu nv nw ni b">TotalInvested</code>和<code class="fe nu nv nw ni b">CoinPrice</code>以及<code class="fe nu nv nw ni b">Total</code>，以查看所有数据之间的关系。我们需要给每个新的<code class="fe nu nv nw ni b">Area</code>一个不同的颜色来区分它们，同时降低不透明度，这样我们就可以看到图表重叠。</p><p id="62b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<code class="fe nu nv nw ni b">AreaChart</code>中创建其余的<code class="fe nu nv nw ni b">Area</code>组件，使用<code class="fe nu nv nw ni b">dataKey</code>为每组数据创建一个组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/c986db0034b1c403476299727f2adbcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qs-Z4hXd4o_ZiBV2.png"/></div></div></figure><p id="f127" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个图表的一个问题是<code class="fe nu nv nw ni b">CoinAmount</code>不是用美元而是用比特币来衡量的，所以在同一个图表上显示<code class="fe nu nv nw ni b">CoinAmount</code>有些误导。</p><p id="d0e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，我们可以创建两个<code class="fe nu nv nw ni b">YAxis</code>组件，一个在右边，一个在左边，来解决这个问题。目前，我们已经在左侧有了映射到美元的<code class="fe nu nv nw ni b">YAxis</code>，所以我们需要在右侧有第二个映射到BTC的<code class="fe nu nv nw ni b">YAxis</code>。</p><p id="69a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加第二个<code class="fe nu nv nw ni b">YAxis</code>组件，其中<code class="fe nu nv nw ni b">yAxisId</code>属性设置为“右”,而“方向”属性设置为“右”。<code class="fe nu nv nw ni b">yAxisId</code>道具将允许我们将<code class="fe nu nv nw ni b">Area</code>映射到正确的<code class="fe nu nv nw ni b">YAxis</code>比例。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="cb65" class="nm lx iq ni b gy nn no l np nq">&lt;YAxis yAxisId="right" orientation="right" /&gt;</span></pre><p id="8ed2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过向<code class="fe nu nv nw ni b">&lt;Area&gt;</code>组件提供<code class="fe nu nv nw ni b">yAxisId</code>道具，更新每个<code class="fe nu nv nw ni b">&lt;Area&gt;</code>以映射到正确的<code class="fe nu nv nw ni b">yAxisId</code>值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/f42c4f380226868ef1dcd816a3cca15d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GPZN6cQp79EykKS1.png"/></div></div></figure><p id="8509" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以对充值进行更多的定制，查看<a class="ae lo" href="http://recharts.org/en-US/" rel="noopener ugc nofollow" target="_blank">充值文档</a>了解更多。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="8354" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">响应充电</h1><p id="7c0a" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">因为图表的高度和宽度是静态定义的，所以图表不会自动调整大小以适应较小的屏幕。然而，使用Recharts使图表具有响应性却出奇地容易。</p><p id="17fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将<code class="fe nu nv nw ni b">&lt;AreaChart&gt;</code>组件包在<code class="fe nu nv nw ni b">&lt;ResponsiveContainer&gt;</code>中，去掉<code class="fe nu nv nw ni b">&lt;AreaChart&gt;</code>的高度和宽度，给<code class="fe nu nv nw ni b">&lt;ResponsiveContainer&gt;</code>组件一个新的高度。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/a6d18a16936790ed54e48d5592e3b16c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JiEOEH0t4ETDaidq.gif"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="0b98" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="478a" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ne lc ld le nf lg lh li ng lk ll lm ij bi translated">我们可以做很多其他的事情来使这个项目变得更好。例如，添加用户输入，更好的加载和错误消息，易于共享的按钮，以及易于链接到特定图形的URL。</p><p id="fc6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你对如何添加这些额外的功能感兴趣，请查看GitHub对<a class="ae lo" href="https://github.com/codypearce/crypto-dca" rel="noopener ugc nofollow" target="_blank"> crypto-dca </a>的报告。</p><p id="28aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Recharts使得用React和D3创建图表变得非常容易，同时提供了大量的定制。</p><p id="7e0d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然Recharts的特性比一个项目所能涵盖的要多，但我希望这些例子能帮助你开始。</p></div></div>    
</body>
</html>