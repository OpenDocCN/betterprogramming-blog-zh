<html>
<head>
<title>Complete the Apple Calculator in SwiftUI Using MVVM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用MVVM在SwiftUI中完成苹果计算器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/complete-the-apple-calculator-in-swiftui-using-mvvm-99571a5875b4?source=collection_archive---------0-----------------------#2022-07-22">https://betterprogramming.pub/complete-the-apple-calculator-in-swiftui-using-mvvm-99571a5875b4?source=collection_archive---------0-----------------------#2022-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0cbf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第2部分—业务逻辑</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1cc4812136af2a173a7c034cd7e7ab96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L4qr-ePVda9VD9Hm84ONAg.png"/></div></div></figure><p id="a807" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在今天的教程中，我们将在Swift中使用MVVM模型构建计算器的业务逻辑，并牢记最佳实践。</p><p id="0769" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">构建视图在第1部分的<a class="ae lq" rel="noopener ugc nofollow" target="_blank" href="/build-the-apple-calculator-in-swiftui-2fad61285dc8">中介绍。</a></p><p id="021a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，如果您对构建视图不感兴趣，从这里开始也很好。继续并<a class="ae lq" href="https://github.com/ricardomongza99/Calculator/tree/part1" rel="noopener ugc nofollow" target="_blank">下载启动项目<strong class="kw iu">。</strong> </a></p><h1 id="0449" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">计算器应用编程接口</h1><p id="50cb" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们的目标是让<code class="fe mo mp mq mr b">Calculator</code>模型完全独立。</p><p id="c5cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">根据<a class="ae lq" href="https://en.wikipedia.org/wiki/Single-responsibility_principle" rel="noopener ugc nofollow" target="_blank">单一责任原则</a>，每个模块、类或函数都应该有一个单一的责任。</p><p id="d27a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">计算器执行计算；所以它应该只专注于接收输入、计算和返回结果。它不负责任何与视图相关的内容。</p><p id="fa3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这给了我们在任何事情上使用<code class="fe mo mp mq mr b">Calculator</code>的能力。我们可以在我们已经存在的<code class="fe mo mp mq mr b">CalculatorView</code>中、在单元测试中、在另一个完全不同的计算器视图中、在CLI中使用它，等等。</p><p id="8b94" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了实现这一点，我们需要声明一个API。——在之外的<em class="ms">可以访问哪些功能和属性来使用我们的计算器？</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/43add81c2a10de377b9d2cd3f8002844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggubu1rYSFl1nYuHtDufvw.png"/></div></div></figure><p id="4bd7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们想一想之外的<em class="ms">需要哪些属性和功能才能完全操作一个计算器(这些将是我们的<code class="fe mo mp mq mr b">public</code>属性和功能)。—使用真正的</em>计算器，我们能得到什么？</p><p id="999d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于属性，我们需要一种方法来读取当前显示的数字。</p><p id="5480" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于函数，我们需要为每个<code class="fe mo mp mq mr b">ButtonType</code>案例执行一个动作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/2c34c74580adac854146ff3273c8a598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wHiljhw0uZg7SR7iDYUUMA.png"/></div></div></figure><p id="6159" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们开始吧。</p><p id="bfeb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mo mp mq mr b">Models</code>中，创建一个名为<code class="fe mo mp mq mr b">Calculator</code>的新Swift文件</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/a8156deda76f475486525c952ddf4bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*rsO2YzRo7wIsrGK_rk88Dg.png"/></div></figure><p id="7968" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加以下样板代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="08e6" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">视图模型</h1><p id="4512" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">在继续进行<code class="fe mo mp mq mr b">Calculator</code>之前，让我们首先连接我们的视图，这样我们可以马上开始测试它。</p><p id="ffbf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mo mp mq mr b">CalculatorView.swift</code>下面，创建一个名为<code class="fe mo mp mq mr b">CalculatorViewModel</code>的新Swift文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/5aadb463f702817f6e0daa3bd60257f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*ZJtQebQx3j2HI4WDG4YO3A.png"/></div></figure><p id="e03b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mo mp mq mr b">CalculatorViewModel.swift</code>中，创建一个符合<code class="fe mo mp mq mr b">ObservableObject</code>协议的<code class="fe mo mp mq mr b">final class</code>名称<code class="fe mo mp mq mr b">ViewModel</code>，并且在我们的<code class="fe mo mp mq mr b">CalculatorView</code>中</p><p id="13de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的<code class="fe mo mp mq mr b">ViewModel</code>将包括<code class="fe mo mp mq mr b">buttonTypes</code>订单和<code class="fe mo mp mq mr b">Calculator</code>模型的一个实例。我们还需要添加必要的属性和功能来操作<code class="fe mo mp mq mr b">Calculator</code>。</p><p id="a294" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里是<code class="fe mo mp mq mr b">CalculatorViewModel.swift</code>的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="2f44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mo mp mq mr b">CalculatorView.swift</code>中，添加一个新的<code class="fe mo mp mq mr b">@EnvironmentObject</code>私有属性来引用我们的<code class="fe mo mp mq mr b">ViewModel</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="acc8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">确保更新<code class="fe mo mp mq mr b">displayText</code>和<code class="fe mo mp mq mr b">buttonPad</code>组件以获得<code class="fe mo mp mq mr b">viewModel.displayText</code>和<code class="fe mo mp mq mr b">viewModel.buttonTypes</code>。</p><p id="2fdc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="92fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们需要在计算器按钮被按下时通知<code class="fe mo mp mq mr b">ViewModel</code>。</p><p id="05f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mo mp mq mr b">CalculatorButton.swift</code>中，添加ViewModel作为环境对象，并为按钮的动作添加<code class="fe mo mp mq mr b">viewModel.performAction(for: buttonType)</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="f6bb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，在<code class="fe mo mp mq mr b">CalculatorApp.swift</code>中，创建一个<code class="fe mo mp mq mr b">ViewModel</code>的实例作为<code class="fe mo mp mq mr b">environmentObject</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="mx my gj gh gi mz na bd b be z dk translated"><em class="nb">环境对象使我们能够访问所有子视图中的视图模型</em></p></figure><p id="3121" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们的<code class="fe mo mp mq mr b">View</code>和我们的<code class="fe mo mp mq mr b">ViewModel</code>完全连接了！<code class="fe mo mp mq mr b">View</code>通知<code class="fe mo mp mq mr b">ViewModel</code>有按钮被按下，<code class="fe mo mp mq mr b">ViewModel</code>更新<code class="fe mo mp mq mr b">View</code>显示的显示文本。</p><h1 id="fbda" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">计算器</h1><p id="f42f" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们现在开始添加业务逻辑来使<code class="fe mo mp mq mr b">Calculator</code>工作。我们将一个接一个地添加我们的每个API函数。</p><h2 id="9aaf" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">设定数字</h2><p id="5387" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">回到<code class="fe mo mp mq mr b">Calculator.swift</code></p><p id="a288" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在开始设置数字的逻辑之前，我们将需要这些属性，所以在顶部添加它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="88cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在底部，添加以下助手函数</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="6d68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">设置数字时，我们需要:</p><ol class=""><li id="cdfc" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">检查是否可以添加数字(01应该不可能)。</li><li id="2516" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">将十进制转换成字符串</li><li id="6df4" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">将<code class="fe mo mp mq mr b">digit</code>追加到字符串末尾，将字符串转换回十进制，并将其新值赋给<code class="fe mo mp mq mr b">newNumber</code></li></ol><p id="a6a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是设置数字的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/67df777edaaef0c7176e46631ead418e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*K-h8eybwr6M_sWlOH7bGdw.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们可以按数字按钮来设置计算器中的数字</p></figure><h2 id="ab5a" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">集合运算</h2><p id="1e62" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们需要创建一个新的结构名<code class="fe mo mp mq mr b">ArithmeticExpression</code>来促进算术表达式的计算。</p><p id="6815" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将这个结构添加到您的<code class="fe mo mp mq mr b">Calculator</code>模型中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="8abc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加<code class="fe mo mp mq mr b">expression</code>和<code class="fe mo mp mq mr b">result</code>属性，并更新<code class="fe mo mp mq mr b">number</code>计算属性</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="c290" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，为了设置操作，我们需要:</p><ol class=""><li id="913c" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">检查是否有我们可以使用的数字(<code class="fe mo mp mq mr b">newNumber</code>或之前的<code class="fe mo mp mq mr b">result</code>)并将其赋给一个新变量<code class="fe mo mp mq mr b">number</code></li><li id="e973" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">检查是否已经有一个<code class="fe mo mp mq mr b">existingExpression</code>，如果有，使用<code class="fe mo mp mq mr b">number</code>对其进行评估，并将结果赋给<code class="fe mo mp mq mr b">number</code></li><li id="5609" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">将带有<code class="fe mo mp mq mr b">number</code>和<code class="fe mo mp mq mr b">operation</code>的新<code class="fe mo mp mq mr b">ArithmeticExpression</code>分配给<code class="fe mo mp mq mr b">expression</code></li><li id="2f7c" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">复位<code class="fe mo mp mq mr b">newNumber</code></li></ol><p id="78e5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="fee9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们的计算器适用于数字和运算。让我们添加更多的可视化队列来了解操作当前是否是活动的。</p><p id="779e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果用户刚刚按下操作按钮，我们将突出显示它。</p><p id="91cd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将以下辅助功能添加到<code class="fe mo mp mq mr b">Calculator.swift</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="32d9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将以下辅助功能添加到<code class="fe mo mp mq mr b">CalculatorViewModel.swift</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="b640" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，向<code class="fe mo mp mq mr b">CalculatorButton.swift</code>添加以下帮助函数</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1f3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在同一个文件中，更新<code class="fe mo mp mq mr b">CalculatorButton</code>按钮样式的<code class="fe mo mp mq mr b">foregroundColor</code>和<code class="fe mo mp mq mr b">backgroundColor</code>以从刚刚添加的助手函数中获取</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9adc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在有操作按钮高亮显示！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/5b757c25e8f5134f5c802a5f8c11a859.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*cW-USY0Y1YZ5G_nAUQqK_w.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以设置按下时高亮显示的操作</p></figure><h2 id="877e" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">评价</h2><p id="9275" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">这个很简单。</p><p id="7fb8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要进行评估，我们需要:</p><ol class=""><li id="d411" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">展开<code class="fe mo mp mq mr b">newNumber</code>和<code class="fe mo mp mq mr b">expression</code>(表达式包含前面的数字和操作)</li><li id="5d7a" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">用<code class="fe mo mp mq mr b">newNumber</code>评估<code class="fe mo mp mq mr b">expression</code>并分配给<code class="fe mo mp mq mr b">result</code></li><li id="477c" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">复位<code class="fe mo mp mq mr b">expression</code>和<code class="fe mo mp mq mr b">newNumber</code></li></ol><p id="60aa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/4222627ecafdbe323e6a7201a64cc4ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*lSw76xLHi0wyCyzM--YLxw.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以使用等于按钮来计算表达式</p></figure><h2 id="e030" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">设置百分比</h2><p id="1f7a" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">要设置百分比，我们需要:</p><ol class=""><li id="20b0" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">检查<code class="fe mo mp mq mr b">newNumber</code>或<code class="fe mo mp mq mr b">result</code>是否正在使用</li><li id="154f" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">除以100并指定新值</li></ol><p id="aec3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/51f6916bb9396b2a55475d0deb9dfc74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*2LhR1gj7Vs9NWuX9Mp2diA.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以使用百分比按钮</p></figure><h2 id="1e3e" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">切换标志</h2><p id="95ef" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated"><code class="fe mo mp mq mr b">toggleSign() </code>与<code class="fe mo mp mq mr b">setPercent()</code>非常相似，因为我们需要检查<code class="fe mo mp mq mr b">newNumber</code>或<code class="fe mo mp mq mr b">result</code>当前是否被使用，并应用一个操作(在这种情况下添加负号)。</p><p id="1f06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，有一个棘手的部分。—我们不能给0加上负号。</p><p id="4fff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">解决办法？</p><p id="fde3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以给字符串加上一个负号，特别是<code class="fe mo mp mq mr b">displayText</code>。我们只需要知道什么时候不要插入负号。</p><p id="690e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">和初等数学一样，我们要用进位(9 + 8 = 17，进位1)。</p><p id="206b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将此属性添加到顶部的<code class="fe mo mp mq mr b">private var result: Decimal?</code>下</p><pre class="kj kk kl km gt od mr oe of aw og bi"><span id="e1fd" class="nc ls it mr b gy oh oi l oj ok">private var carryingNegative: Bool = false</span></pre><p id="0a81" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，如果<code class="fe mo mp mq mr b">newNumber</code>或<code class="fe mo mp mq mr b">result</code>存在，则应用负号，否则，使<code class="fe mo mp mq mr b">carryingNegative</code>属性<strong class="kw iu">为真。</strong>(将保持为真，直到新编号被设置)</p><p id="e414" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将此代码添加到<code class="fe mo mp mq mr b">toggleSign()</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="d763" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe mo mp mq mr b">carryingNegative</code>属性用于辅助函数<code class="fe mo mp mq mr b">getNumberString()</code></p><p id="a3bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">还记得当<code class="fe mo mp mq mr b">newNumber</code>、<code class="fe mo mp mq mr b">expression.number,</code>和<code class="fe mo mp mq mr b">result</code>为零时，默认值是0吗？由于有了<code class="fe mo mp mq mr b">carryingNegative</code>属性，我们可以将负号字符串插入到0中以返回“-0”<code class="fe mo mp mq mr b">displayText</code>，就像负号处于活动状态的可视队列一样。</p><p id="d517" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用以下代码更新<code class="fe mo mp mq mr b">getNumberString()</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="f37d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，当<code class="fe mo mp mq mr b">newNumber</code>置位时，我们需要禁用负进位。</p><p id="529d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将此代码添加到<code class="fe mo mp mq mr b">newNumber</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/5fc5611465abc1ab9901e0127a9e741a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*_oJ6In0vk4DGssDPICi0Fw.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以切换负号并等待，直到一个数字被设置</p></figure><h2 id="abed" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">设置小数</h2><p id="1c59" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">设置小数可能是最棘手的部分。</p><p id="ef20" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在需要将进位逻辑添加到两件事情中。到小数点和小数点后的零。</p><h1 id="438b" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated"><strong class="ak">小数点</strong></h1><p id="d24a" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们的<code class="fe mo mp mq mr b">newNumber</code>属性属于<code class="fe mo mp mq mr b">Decimal</code>类型。所以没有所谓的<code class="fe mo mp mq mr b">5.</code>或<code class="fe mo mp mq mr b">15.</code>，那些都是整数。但是，如果用户按下decimal按钮，我们需要提供一个可视化的队列来显示正在设置的小数。我们需要更新<code class="fe mo mp mq mr b">displayText</code>，直到我们可以将<code class="fe mo mp mq mr b">newNumber</code>设置为其各自的十进制数。为此，我们将使用一个名为<code class="fe mo mp mq mr b">carryingDecimal</code>的新属性。</p><p id="9575" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们运行一个输入<code class="fe mo mp mq mr b">5.2</code>的快速示例</p><ol class=""><li id="8123" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">设定数字5 ( <code class="fe mo mp mq mr b">newNumber = 5</code>、<code class="fe mo mp mq mr b">carryingDecimal = false</code>和<code class="fe mo mp mq mr b">displayText = “5”</code>)</li><li id="049e" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">设置小数(<code class="fe mo mp mq mr b">newNumber = 5</code>、<code class="fe mo mp mq mr b">carryingDecimal = true</code>和<code class="fe mo mp mq mr b">displayText = “5.”</code>)</li><li id="5508" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">设置数字2 ( <code class="fe mo mp mq mr b">newNumber = 5.2</code>、<code class="fe mo mp mq mr b">carryingDecimal = false</code>和<code class="fe mo mp mq mr b">displayText = “5.2”</code>)</li></ol><p id="9155" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加<code class="fe mo mp mq mr b">carryingDecimal</code>属性</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1dfa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加<code class="fe mo mp mq mr b">containsDecimal</code>计算属性</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1e0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实际设置十进制函数非常简单:</p><ol class=""><li id="db37" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">检查<code class="fe mo mp mq mr b">number</code>是否已经包含小数，如果包含，返回</li><li id="10d0" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">使<code class="fe mo mp mq mr b">carryingDecimal</code>属性<code class="fe mo mp mq mr b">true</code></li></ol><p id="dd54" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="d72d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，当<code class="fe mo mp mq mr b">newNumber</code>置位时，复位<code class="fe mo mp mq mr b">carryingDecimal</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/86047dbe51eced7a60cf95a04740902c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*2vBW8eJwLi372Ob7a5HWMw.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以用十进制设置非零数字</p></figure><h1 id="3bef" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated"><strong class="ak">小数点后的零</strong></h1><p id="b4e6" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">现在，我们有一个类似的问题要解决。当在de小数点后设置0时，我们的<code class="fe mo mp mq mr b">newNumber</code>属性是<code class="fe mo mp mq mr b">Decimal</code>类型的，永远不会添加它们。至于<code class="fe mo mp mq mr b">5.40000</code>将总是被转换回<code class="fe mo mp mq mr b">5.4</code>，因为它不是<code class="fe mo mp mq mr b">String</code>。</p><p id="35c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">与我们对小数点所做的类似，我们需要创建一个名为<code class="fe mo mp mq mr b">carryingZeroCount</code>的新属性，来跟踪小数点后的零，并在设置非零数字时追加它们。同时，我们还将在<code class="fe mo mp mq mr b">displayText</code>中显示零，以提供可视化队列。</p><p id="4526" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们通过一个例子让它更清晰。我们要输入<code class="fe mo mp mq mr b">2.003</code></p><ol class=""><li id="f9ba" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">设置数字2 ( <code class="fe mo mp mq mr b">newNumber = 2</code>、<code class="fe mo mp mq mr b">carryingDecimal = false</code>、<code class="fe mo mp mq mr b">carryingZeroCount = 0</code>、<code class="fe mo mp mq mr b">displayText = “2”</code>)</li><li id="cfcf" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">设置十进制(<code class="fe mo mp mq mr b">newNumber = 2</code>、<code class="fe mo mp mq mr b">carryingDecimal = true</code>、<code class="fe mo mp mq mr b">carryingZeroCount = 0</code>、<code class="fe mo mp mq mr b">displayText = “2.”</code>)</li><li id="8962" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">设置数字0 ( <code class="fe mo mp mq mr b">newNumber = 2</code>、<code class="fe mo mp mq mr b">carryingDecimal = true</code>、<code class="fe mo mp mq mr b">carryingZeroCount = 1</code>、<code class="fe mo mp mq mr b">displayText = “2.0”</code>)</li><li id="5bb8" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">设置数字0 ( <code class="fe mo mp mq mr b">newNumber = 2</code>、<code class="fe mo mp mq mr b">carryingDecimal = true</code>、<code class="fe mo mp mq mr b">carryingZeroCount = 2</code>、<code class="fe mo mp mq mr b">displayText = “2.00”</code>)</li><li id="5700" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">设置数字3 ( <code class="fe mo mp mq mr b">newNumber = 2.003</code>、<code class="fe mo mp mq mr b">carryingDecimal = false</code>、<code class="fe mo mp mq mr b">carryingZeroCount = 0</code>、<code class="fe mo mp mq mr b">displayText = “2.003”</code>)</li></ol><p id="1497" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我知道这有点令人困惑，但是通过这样做，我们可以完全避免使用字符串操作来输入，这带来了相当多的问题和复杂性。</p><p id="bacc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加<code class="fe mo mp mq mr b">carryingZeroCount</code>属性</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="64e5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将<code class="fe mo mp mq mr b">setDigit()</code>功能更新为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">如果包含小数且数字为零，则递增零计数</p></figure><p id="20d9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，向<code class="fe mo mp mq mr b">getNumberString()</code>添加进位零</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/6661047a1fa143a187ba80c87870243f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*P_JOK-6plKzRWdiHRvOCbQ.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以用十进制设置零</p></figure><h2 id="1dda" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">全部清除</h2><p id="981f" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">清除一切很简单。我们只需要重置所有当前使用的属性</p><p id="1555" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/4639b24650dd644409f59fd0ce43a20b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*R6vJ3hE7QfvC1LqiRkcizA.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们现在可以清除所有</p></figure><h2 id="fed4" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">清楚的</h2><p id="c7c3" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">注意当使用苹果计算器时，AC(全部清除)按钮在设置一个数字或十进制后立即变为C(清除)按钮？这些按钮可能看起来做同样的事情，将显示重置为0，但实际上，它们有不同的功能。</p><p id="4b34" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">全部清除复位一切包括<code class="fe mo mp mq mr b">newNumber</code>、<code class="fe mo mp mq mr b">expression</code>、<code class="fe mo mp mq mr b">result</code>和进位。</p><p id="271f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Clear只重置最后一个条目，在我们的例子中，<code class="fe mo mp mq mr b">newNumber</code>及其进位。</p><p id="7ec4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，假设你想计算5 + 3。你输入5+2——哎呀！按清除键(5 +仍保存)，输入3，结果= 8。一切都好。</p><p id="92c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们开始吧，但是首先，添加<code class="fe mo mp mq mr b">pressedClear</code>属性，我们将需要它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="da8b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">类似于我们的<code class="fe mo mp mq mr b">allClear() </code>函数，将这段代码添加到<code class="fe mo mp mq mr b">clear()</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">我们没有重置表达式或结果</p></figure><p id="ab88" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并且更新<code class="fe mo mp mq mr b">newNumber</code>，以便当它被设置时，我们重置<code class="fe mo mp mq mr b">pressedClear</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="bbfe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了更好的用户体验，我们给<code class="fe mo mp mq mr b">number</code>加个小改进吧。</p><p id="28b8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果用户只是按了clear或decimal，让我们显示一个0，即使有一个结果或表达式是活动的。</p><p id="85f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用以下代码更新<code class="fe mo mp mq mr b">number</code>属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="a6da" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated"><strong class="ak">在我们的视图中显示AC或C按钮</strong></h1><p id="18e1" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">现在，为了知道在我们的视图中显示两个透明按钮中的哪一个，我们需要创建一个计算属性。</p><p id="edfb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加<code class="fe mo mp mq mr b">showAllClear</code>计算属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="5405" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">返回到<code class="fe mo mp mq mr b">CalculatorViewModel.swift</code>并更新<code class="fe mo mp mq mr b">buttonTypes</code>计算属性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/6160d2533d4c60075a01a77df6cf11d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*kR_HgCQlA_UDr0Ocygq21g.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">清除和全部清除按钮现在相应地切换</p></figure><h2 id="736a" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated"><strong class="ak">最终计算器</strong></h2><p id="2608" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">这是我们最后一个<code class="fe mo mp mq mr b">Calculator</code>模型的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="ae10" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated"><strong class="ak">总结</strong></h1><p id="2582" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们终于完成了苹果计算器的制作。谢谢你挺过来了。</p><p id="264b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们成功地将每个组件封装到各自的功能中。<code class="fe mo mp mq mr b">ViewModel</code>不负责进行计算，它只是通知<code class="fe mo mp mq mr b">Calculator</code>用户正在输入什么并询问结果。</p><p id="1ee5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们创建的<code class="fe mo mp mq mr b">Calculator</code>模型现在可以用于任何视图。我们甚至可以在不涉及任何其他文件的情况下创建单元测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/e32ccfb4923f98a82ab4ad5318c12d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fl8h6F8aKsSWLj_Mad15jg.gif"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">决赛成绩</p></figure><p id="cb94" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在这里找到这部分<a class="ae lq" href="https://github.com/ricardomongza99/Calculator/tree/part2" rel="noopener ugc nofollow" target="_blank">的源代码。</a></p><p id="268a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您的阅读，如果您能跟上，我将不胜感激，这样我就能继续创作更多这样的内容:)</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><h2 id="49e2" class="nc ls it bd lt nd ne dn lx nf ng dp mb ld nh ni md lh nj nk mf ll nl nm mh nn bi translated">资源:</h2><ul class=""><li id="565a" class="no np it kw b kx mj la mk ld os lh ot ll ou lp ov nu nv nw bi translated">您可以在这里找到第1部分，创建视图<a class="ae lq" rel="noopener ugc nofollow" target="_blank" href="/build-the-apple-calculator-in-swiftui-2fad61285dc8"/></li><li id="c029" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp ov nu nv nw bi translated">你可以在这里找到Github库<a class="ae lq" href="https://github.com/ricardomongza99/Calculator" rel="noopener ugc nofollow" target="_blank"/></li></ul></div></div>    
</body>
</html>