<html>
<head>
<title>5 Tricks to Write More Concise Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写更简洁Python代码的5个技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-tricks-to-write-more-concise-python-code-f075f66336b6?source=collection_archive---------4-----------------------#2020-05-26">https://betterprogramming.pub/5-tricks-to-write-more-concise-python-code-f075f66336b6?source=collection_archive---------4-----------------------#2020-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fe21" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高Python的可读性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7cb30f0b49b22b4d1e98c3322d1cb711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5AQwY5uy65lPxRJU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@srosinger3997?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的萨曼莎·加德斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="0881" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多人刚开始学编程的时候都会选择Python。Python确实是初学者友好的。当你按照它的<a class="ae ky" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">官网</a>上的下载安装说明，用不了太久，你就能写出你的“Hello World”程序了。</p><p id="8b5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你对Python了解更多的时候，你可能会被它用不同的方法实现相同功能的灵活性所吸引。然而，迟早你会发现有些解决方案比其他的更简洁。更重要的是，从长远来看，更简洁的代码更容易阅读和维护。</p><p id="5775" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，有很多方法可以用Python编写简洁的代码。在本文中，我想分享我发现在日常Python项目中特别有用的五个技巧。为了演示为什么这些技巧提供了更简洁的解决方案，我将在每一节中包括替代的、通常更长的解决方案，以便进行比较。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e74d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.列表、字典和集合理解</h1><p id="2de7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">列表理解是许多Python程序员最喜欢的特性之一。这是从iterable创建list对象的一种非常简洁的方法。基本语法是<code class="fe mz na nb nc b">[expression for x in iterable]</code>。让我们看一些例子来理解它的用法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">列表理解</p></figure><p id="6b47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，在没有使用列表理解的情况下，我们必须创建一个空列表，并通过运行一个<code class="fe mz na nb nc b">for</code>循环来添加每个数字的平方，这需要三行代码。相比之下，我们只用一行代码就可以用列表理解来构建相同的方块列表。是不是很酷？</p><p id="4aca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了列表理解，还有字典和集合理解。词典理解有以下基本句法<code class="fe mz na nb nc b">{key_expr: value_expr for x in iterable}</code>，集合理解的基本句法是<code class="fe mz na nb nc b">{expression for x in iterable}</code>。下面我们来看一些琐碎的例子。与列表理解示例类似，如果不使用理解技术，构建所需的字典和集合将需要多行代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">字典和集合理解</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="79bc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.作为数据结构的命名元组</h1><p id="ca6f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们知道元组对于存储一些相关数据很有用。然而，使用它们不是很方便，特别是在访问特定元素时，因为我们必须记住顺序并使用特定元素的正确索引。</p><p id="c379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然如果我们不想使用元组，我们可以构建一个自定义类来管理相关数据，但是<code class="fe mz na nb nc b">namedtuple</code>数据类型可以是一个非常有用的轻量级数据结构。通过集合模块，<code class="fe mz na nb nc b">namedtuple</code>数据类型采用以下基本语法:<code class="fe mz na nb nc b">namedtuple(Typename, field_names)</code>。语法不太简单，但实际上从概念上很容易理解。</p><p id="37f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一些相关的例子。理想的特性是创建一个可以存储学生信息的数据结构，包括姓名、性别和学号。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">类与命名元组</p></figure><p id="9231" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以看出，通过使用<code class="fe mz na nb nc b">namedtuple</code>，我们可以用更简洁的代码编写轻量级的数据结构。当然，应该注意的是，定制类为您提供了更多您可以操作的功能。但是，如果您的目的只是创建一个用于数据存储和检索的数据结构，您肯定可以考虑使用<code class="fe mz na nb nc b">namedtuple</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d758" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.使用enumerate()和zip()进行迭代</h1><p id="3156" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">编码的一个关键原则是DRY，代表不要重复自己。当我们处理一个数据序列时，比如一个数字列表，我们需要对列表中的每个数字进行相同的操作，这是一个常见的任务。为了避免重复相同的代码，我们可以使用一个<code class="fe mz na nb nc b">for</code>循环来运行整个列表的迭代。</p><p id="a3e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们迭代一个列表或任何序列时，有时我们也需要知道项目在序列中的位置。有几种方法可以做到这一点。让我们看看它们是什么。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">枚举迭代()</p></figure><p id="28bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以看到，通过使用内置函数<code class="fe mz na nb nc b">enumerate()</code>，我们可以很容易地访问一个序列中的索引和元素，这比第一次迭代更简洁。更重要的是，它可以为计数设置一个起始数。在上面的例子中，我们将其设置为1。</p><p id="c449" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了<code class="fe mz na nb nc b">enumerate()</code>函数之外，<code class="fe mz na nb nc b">zip()</code>函数在迭代中也很有用。该函数能够从多个可迭代对象中创建元组，而无需显式创建这些可迭代对象的复合可迭代对象。这听起来有点混乱，但我们可以通过下面的例子来了解它的用法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用zip()的迭代</p></figure><p id="7c80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，<code class="fe mz na nb nc b">zip()</code>函数所做的是从iterables中获取每个元素，在每次迭代中按顺序形成一个元组。代码比冗长的方式更简洁，可读性更好，不是吗？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="16a8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.用f字符串格式化字符串</h1><p id="1e46" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">字符串是一种非常基本的数据类型，我们几乎在任何地方都要用到它。字符串的一个重要应用是以特定的格式使用它们。有几种方法可以格式化字符串，我将介绍<em class="nf"> f-strings </em>作为一种简洁的方法。</p><p id="b9b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，F字符串是使用字母<em class="nf"> f </em>(或<em class="nf"> F </em>)作为字符串前缀的插值字符串。出于编写简洁代码的目的，我将只向您展示两个应该首选f字符串的用例。</p><ul class=""><li id="e576" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><strong class="lb iu">显示变量。</strong>最基本的用途是显示一些变量的值，用于开发过程中的调试。如果我们使用常规的<code class="fe mz na nb nc b">format()</code>方法，时间会稍微长一点。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带变量的f字符串</p></figure><ul class=""><li id="1b36" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><strong class="lb iu">连接变量/连接字符串</strong>。f字符串不使用+符号和字符串的<code class="fe mz na nb nc b">join()</code>方法，而是非常直接地用于字符串连接，并且它们具有最好的可读性。实际用途包括构造文件路径，如下例所示。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用于字符串连接的f字符串</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e2c8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.λ函数</h1><p id="75f2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Lambda函数是Python中的匿名函数，通常用在需要小操作的地方。一个lambda函数可以有一个到多个参数，有一个表达式，它有下面的语法<code class="fe mz na nb nc b">lambda parameters: expression</code>。</p><p id="c0db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将使用内置的<code class="fe mz na nb nc b">sorted()</code>函数来演示lambda函数的用法。具体来说，<code class="fe mz na nb nc b">sorted()</code>函数通过使用key函数对iterable进行排序，key函数由<code class="fe mz na nb nc b">key</code>参数指定。我将向您展示我们可以为<code class="fe mz na nb nc b">key</code>参数使用lambda函数，而不是使用<code class="fe mz na nb nc b">def</code>关键字声明常规函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用于排序的类与Lambda</p></figure><p id="9907" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，使用lambda函数允许我们编写一个更简洁的对<code class="fe mz na nb nc b">sorted()</code>函数的调用。使用常规函数，我们必须先声明函数，然后才能使用<code class="fe mz na nb nc b">sorted()</code>函数，这肯定比直接使用lambda函数更繁琐。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="24c0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="3d81" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们回顾了五个有用的技巧，它们让我们能够编写更简洁的Python代码。通过编写更少的代码，可读性和可维护性实际上得到了提高——几乎总是这样。</p><p id="3cb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，请记住，简洁的代码不应该导致任何可能的歧义或混乱。你必须在简洁和可读性之间找到一个好的平衡。如果它们冲突，我们应该首先考虑可读性，即使有时这需要更多的代码。</p><p id="20e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>