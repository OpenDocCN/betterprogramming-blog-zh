<html>
<head>
<title>How To Speed Up Angular Development and Reduce Compilation Times</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何加快角度开发并减少编译时间</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-speed-up-angular-development-and-reduce-compilation-times-a32262d478bc?source=collection_archive---------0-----------------------#2019-06-30">https://betterprogramming.pub/how-to-speed-up-angular-development-and-reduce-compilation-times-a32262d478bc?source=collection_archive---------0-----------------------#2019-06-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/bad17d3184e800cead7d07ce5e9def24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1HRu4YeZDn3PAS81QjuNg.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">法比安·格罗斯在<a class="ae kf" href="https://unsplash.com/search/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="67e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>是一个伟大的JavaScript框架，用于创建可以在许多平台上运行的应用程序。</p><p id="0cd7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，你的应用程序越长，你的编译时间可能会变得越长。这使得编写代码更加麻烦，降低了开发人员的工作效率。您不应该为了编译完成而等待两分钟，只是为了看看这一行修改后的代码是否成功。</p><p id="9ca6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，如果你的应用程序是一个待办事项应用程序的大小，你可能会对编译时间感到满意。然而，在有多个开发人员和越来越多的第三方依赖项的大型项目中，编译时间会变得相当长。</p><p id="de8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从2016年Angular 2最终版发布开始，我就一直在用Angular。从那以后，我在Angular项目中看到并使用了不同的方式来编写更好更快的代码。</p><p id="8a1b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我为加速角度发育而挑选的最佳方法:</p><ul class=""><li id="daf8" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">进行TDD风格的开发(例如用<a class="ae kf" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>)</li><li id="a49e" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">将你的代码分成可以延迟加载的功能模块</li><li id="b1f7" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">与角度生态系统保持同步</li><li id="5c54" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">使用<a class="ae kf" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>开发UI组件</li><li id="6e5a" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">将您的应用程序拆分成可以独立构建和测试的较小的应用程序和库</li></ul><p id="002e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意:这些步骤中的大部分并不直接与Angular相关，但也可以与流行的框架相关，如<a class="ae kf" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>和<a class="ae kf" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>。</p><p id="457a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将更多地关注改善开发人员使用Angular的体验，而不是改善Angular应用程序的实际性能。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="e2f4" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">带有Jest的测试驱动开发</h1><p id="bfe6" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">默认情况下，Angular项目结合使用<a class="ae kf" href="https://angular.io/guide/testing" rel="noopener ugc nofollow" target="_blank"> Jasmine </a>和<a class="ae kf" href="https://angular.io/guide/testing" rel="noopener ugc nofollow" target="_blank"> Karma </a>来运行单元测试。对于简单的项目来说，这可能就足够了，但是对于较大的项目来说，缺点就变得非常明显了。简而言之，Jest拥有强大的CLI和非常愉快的测试体验。</p><p id="4bdc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当你在编写简单的JavaScript代码(例如纯函数)或处理愚蠢的组件时，<a class="ae kf" href="https://en.wikipedia.org/wiki/Test-driven_development" rel="noopener ugc nofollow" target="_blank">测试驱动开发</a>方法非常有效。由于单元测试执行起来应该很快，所以你应该只导入你需要的东西，并模仿其他的东西(Jest可以帮助你)。<a class="ae kf" href="https://itnext.io/how-to-use-jest-in-angular-aka-make-unit-testing-great-again-e4be2d2e92d1" rel="noopener ugc nofollow" target="_blank">我写过一篇如何在角度应用中使用Jest的文章</a>。对于测试角度组件，我推荐使用<a class="ae kf" href="https://medium.com/better-programming/how-to-write-better-ui-component-tests-with-testing-library-e80bc489051c" rel="noopener">测试库</a>，它有助于编写尽可能模拟用户行为的测试。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="8d5e" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">特征模块的延迟加载</h1><p id="3d98" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">如果你把所有东西都放在一个模块中，编译时间会更长，因为Angular需要重新构建很多东西。</p><p id="d393" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过使用<a class="ae kf" href="https://angular.io/guide/lazy-loading-ngmodules" rel="noopener ugc nofollow" target="_blank">延迟加载特性模块</a>，你不仅可以提高你的应用性能(通过加载更小的JavaScript包，仅在你需要的时候)，你还可以减少编译时间。</p><p id="5f70" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你在一个懒惰加载的模块中做了一个改变，它应该只构建受影响的模块，而不是你的整个应用。将代码库分成更小的模块意味着编译器的工作量更少。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="803f" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">与时俱进</h1><p id="0a30" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated"><a class="ae kf" href="https://devblogs.microsoft.com/typescript/announcing-typescript-3-4-rc/" rel="noopener ugc nofollow" target="_blank"> TypeScript增量编译</a>是在TypeScript 3.4中引入的，从版本8开始就在Angular中得到支持。</p><p id="a338" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于它不是默认的(还没有)，您需要在您的<code class="fe nc nd ne nf b">tsconfig.json</code>中添加<code class="fe nc nd ne nf b">incremental</code>标志。一旦Angular团队有足够的信心让他们违约，Ivy 和Bazel 将会提高性能。</p><p id="ce6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更新2021: Ivy是Angular的默认渲染引擎。另一方面，对巴泽尔的支持并没有像人们预期的那样发展。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="e5cf" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">使用故事书创建哑角组件</h1><p id="ccc0" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">在Angular和React等流行框架中，使用哑组件(也称为表示组件)是一种很好的模式。</p><p id="48cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您需要做更多与UI相关的任务，TDD方法可能不够。毕竟，您可能不仅想检查组件是否正常工作，还想检查它在浏览器中的外观。</p><p id="e653" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是<a class="ae kf" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>发挥作用的地方；一个开源工具，用于为Angular、React和Vue.js独立开发UI组件。</p><p id="5d66" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个想法是，你专注于孤立地创建伟大的哑组件。由于您只需要组件(可能还有一些依赖项)，编译过程相当快，因为您不需要构建整个应用程序。</p><p id="c5a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你甚至可以结合使用Storybook和Jest来确保你的UI和组件的功能都很好。</p><p id="1809" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将在不久的将来写一篇关于在Angular项目中使用Storybook的更详细的文章。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="d7c5" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">将您的应用程序拆分成更小的应用程序和库</h1><p id="5f58" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">即使您按照上面的描述进行延迟加载，您也可能会遇到构建和测试时间缓慢的问题。毕竟，您还有一个大的应用程序。像<a class="ae kf" href="https://nx.dev/angular" rel="noopener ugc nofollow" target="_blank"> NX </a>这样的开发工具的想法是帮助你将开发从一个团队构建一个应用程序扩展到多个团队在同一个工作空间中构建多个前端和后端应用程序。NX可以帮助加强边界，创建可以独立构建和测试的库和应用程序。</p><p id="c9ae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">示例:当您只在应用程序的登录模块中做了一些更改时，您可以运行<code class="fe nc nd ne nf b">ng test nameOfTheLibrary</code>，而不是运行<code class="fe nc nd ne nf b">ng test</code>来测试您的应用程序。类似于Storybook，你也可以创建小的开发应用程序，只导入你需要的东西(例如登录页面)，从而可能允许更快的开发。不用运行<code class="fe nc nd ne nf b">ng serve</code>来运行完整的应用程序，你可以运行<code class="fe nc nd ne nf b">ng serve nameOfTheApp</code>来只运行较小的开发应用程序。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="4ceb" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">结论</h1><p id="5e1f" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">感谢阅读这篇文章。如您所见，有多种方法可以改善您在web开发项目中的开发体验！你知道在有角度的项目中提高开发时间的其他技巧吗？请在评论中告诉我。</p></div></div>    
</body>
</html>