<html>
<head>
<title>Working With 3D Models in Three.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Three.js中使用3D模型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/working-with-3d-model-in-three-js-e228621141af?source=collection_archive---------1-----------------------#2022-05-30">https://betterprogramming.pub/working-with-3d-model-in-three-js-e228621141af?source=collection_archive---------1-----------------------#2022-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="66e5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Create React App工作环境中的Exhibit three.js代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/0e1a0066dca181de44492e9be8570cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/1*NoaJzHJB1PgUDF2oCOHaxg.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片作者。桑帕伊·德苏的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)是在知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)下获得许可的。</p></figure><p id="d4d9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在上一篇文章中，我们已经解释了three.js是什么以及它在React中是如何工作的。让我们回顾一下主要概念。</p><ul class=""><li id="acc0" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ku" href="https://github.com/mrdoob/three.js/" rel="noopener ugc nofollow" target="_blank"> Three.js </a>是一个3D JavaScript库，在网页上呈现3D内容。它旨在创建一个易于使用、轻量级、跨浏览器、通用的3D库。</li><li id="6a6e" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">Three的API在Create React App工作环境中运行良好。</li><li id="efa7" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><a class="ae ku" href="https://github.com/pmndrs/react-three-fiber" rel="noopener ugc nofollow" target="_blank"> react-three-fiber </a> ( <code class="fe mf mg mh mi b">@react-three/fiber</code>)是three.js的react渲染器，它允许我们使用JSX编写three.js，更具声明性。React包装器还在幕后处理很多事情，比如调整画布大小和处理卸载的对象。</li></ul><p id="970a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们画了一个在黑色背景中旋转的动画立方体。在本文中，我们将进一步在森林背景中绘制一个旋转农场，如标题图像所示。</p><h1 id="56d6" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">glTF格式的3D模型文件</h1><p id="81d0" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">3D模型有很多文件格式，比如<code class="fe mf mg mh mi b">glTF</code>(图形语言传输格式)<code class="fe mf mg mh mi b">FBX</code>(FilmBoX)<strong class="kx iu"><em class="ng"/></strong><code class="fe mf mg mh mi b">OBJ</code>(或者。OBJ)。其中，<code class="fe mf mg mh mi b">glTF</code>是最受欢迎的一个。</p><p id="b2df" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe mf mg mh mi b">glTF</code>，通常指<code class="fe mf mg mh mi b">glTF 2.0</code>，以JSON格式存储3D模型信息。它是用于3D场景和模型的开放标准文件格式，支持3D模型几何图形、外观、场景图形层次和动画。它有两个文件扩展名，<code class="fe mf mg mh mi b">.gltf</code> (JSON/ASCII文件格式)和<code class="fe mf mg mh mi b">.glb</code>(二进制文件格式)。</p><p id="9591" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">创建一个<code class="fe mf mg mh mi b">.gltf</code>模型是另一个话题。这里，我们使用three.js来处理现有的<code class="fe mf mg mh mi b">.gltf</code>文件。</p><p id="6ed6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><a class="ae ku" href="https://sketchfab.com/3d-models" rel="noopener ugc nofollow" target="_blank">https://sketchfab.com/3d-models</a>是一家购买3D模型的商店，那里有一些免费的模型。这是<a class="ae ku" href="https://sketchfab.com/3d-models/free-farm-7162850a4f0d4bc3a49f3a03f8f87cfe#download" rel="noopener ugc nofollow" target="_blank">获得免费农场的链接</a>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nh"><img src="../Images/854f280bc6677cad5f2c7243ec16c7f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PyRNrZg5mk3pbNpziclNtg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><p id="2868" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下载完zip文件后，我们将它解压到我们从上一篇文章中<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2"> Create React App </a>工作环境的<code class="fe mf mg mh mi b">public</code>文件夹下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0930" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe mf mg mh mi b">free_farm</code>文件夹有许多资产:</p><ul class=""><li id="bc9d" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><code class="fe mf mg mh mi b">license.txt</code>:是许可文件。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><ul class=""><li id="8e00" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><code class="fe mf mg mh mi b">scene.bin</code>:包含几何图形和动画数据以及其他基于缓冲区的数据的二进制文件。</li><li id="8089" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><code class="fe mf mg mh mi b">scene.gltf</code>:包含在JSON格式的<code class="fe mf mg mh mi b">glTF</code>文件中的完整场景描述，包括节点层次、材质、相机，以及网格、动画和其他构造的描述符信息。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/b4bd9e5ee88e4f86e4f837b3fa1b77be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*xBglqui-EIBDcMQqptdDOA.png"/></div></figure><ul class=""><li id="4d87" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><code class="fe mf mg mh mi b">textures</code>:这是一个包含图像文件的文件夹，具体来说就是自由农场中的12个<code class="fe mf mg mh mi b">png</code>文件。</li></ul><h1 id="46cb" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">显示三维模型</h1><p id="bf34" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">下面是渲染3D模型的<code class="fe mf mg mh mi b">src/App.js</code>，<code class="fe mf mg mh mi b">free_farm</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="a293" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第5–8行，定义了组件<code class="fe mf mg mh mi b">FreeFarm</code>。它从<code class="fe mf mg mh mi b">@react-three/fiber</code>调用<code class="fe mf mg mh mi b">useLoader</code>钩子。<code class="fe mf mg mh mi b">public</code>文件夹中的<code class="fe mf mg mh mi b">free_farm</code>被加载到常量<code class="fe mf mg mh mi b">gltf</code>(第6行)。</p><p id="4cea" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Three的图元通常是在运行时用一堆参数生成的3D形状。在第7行，用<code class="fe mf mg mh mi b">gltf.scene</code>创建了一个<code class="fe mf mg mh mi b">primitive</code>元素。道具(<code class="fe mf mg mh mi b">args</code>)可以包括非原始值，如几何、材质、位置、比例等。</p><p id="968a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">由于加载可能需要一些时间，<code class="fe mf mg mh mi b">Suspense</code>用于显示一个空屏幕(<code class="fe mf mg mh mi b">null</code>)作为后备(第13行)。3D模型加载后，<code class="fe mf mg mh mi b">FreeFarm</code>(第14行)将显示在<code class="fe mf mg mh mi b">Canvas</code>(第12-16行)上，呈现三个组件。</p><p id="d6f0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">执行<code class="fe mf mg mh mi b">npm start</code>，我们在浏览器中看到自由农场:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/9dca620319f8a5ef0c2c8761ebcde934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jo6m67HVLf7Abqb7jYU3Ew.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)根据知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)获得许可。</p></figure><p id="7517" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">哦，这是一个基本的3D模型！</p><p id="1345" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">添加<code class="fe mf mg mh mi b">ambientLight</code>(下面代码中的第3行)，这是一个无处不在的灯光(它不照射任何特定的地方，但会覆盖整个场景)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="99fb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">借助光线，我们可以看到颜色和细节:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/77358cf6af946ba4630d6c1a6be58cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r60b4UfvDyZdKCxcsislkA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)根据知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)获得许可。</p></figure><p id="392b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">将<code class="fe mf mg mh mi b">ambientLight</code>改为<code class="fe mf mg mh mi b">pointLight</code>(下面代码中的第3行)，是特定点上的灯，类似于灯。<code class="fe mf mg mh mi b">pointLight</code>的颜色设置为<code class="fe mf mg mh mi b">yellow</code>，放置在<code class="fe mf mg mh mi b">[10, 10, 10]</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="03b6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">你看出区别了吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/1ac9e12b7142d94737301856b8bd94e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9o3N6O9Dr0BCB47p15-bQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)根据知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)获得许可。</p></figure><p id="3ef3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">是的，它显示阴影和更多的细节。</p><p id="e937" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们将自由农场移动到位置<code class="fe mf mg mh mi b">[1, 1, 1]</code>，并将其缩放到0.2(下面代码中的第4行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="907e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">较小的自由农场被移动到视点的右上角。但是，它没有面对我们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/ff7b6ba43bb48f6367ded5cb8c75a315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4uGMVx59JxLgIh8kbiwgA.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)根据知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)获得许可。</p></figure><p id="29f2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们旋转一下(下面代码中的第4行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="cc44" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">现在，自由农场面对着我们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/ad21d56ccf32239d4d96e2e737ed434c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2aUdAbbS3QcKnl5GcE3-xg.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由作者提供，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)根据知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)获得许可。</p></figure><h1 id="bd9d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">使用@react-three/drei提供的帮助</h1><p id="c252" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated"><code class="fe mf mg mh mi b"><a class="ae ku" href="https://github.com/pmndrs/drei" rel="noopener ugc nofollow" target="_blank">@react-three/drei</a></code>是渲染react-three-fiber的有用助手集合。它使得使用多种类型的对象变得更加容易，例如相机、控件、图像、形状、3D模型、环境等。</p><p id="344f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们来设置一下<code class="fe mf mg mh mi b">@react-three/drei</code>:</p><pre class="kj kk kl km gt nq mi nr ns aw nt bi"><span id="29fc" class="nu mk it mi b gy nv nw l nx ny">% npm i @react-three/drei</span></pre><p id="d3e3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe mf mg mh mi b">@react-three/drei</code>与<code class="fe mf mg mh mi b">@react-three/fiber</code>和<code class="fe mf mg mh mi b">three</code>一起成为<code class="fe mf mg mh mi b">package.json</code>中<code class="fe mf mg mh mi b"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/package-jsons-dependencies-in-depth-a1f0637a3129">dependencies</a></code>的一部分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6992" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">有了帮助，我们可以锦上添花。</p><h2 id="e6cb" class="nu mk it bd ml nz oa dn mp ob oc dp mt le od oe mv li of og mx lm oh oi mz oj bi translated">添加加载的进度状态</h2><p id="45f8" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">我们显示了一个空屏幕(<code class="fe mf mg mh mi b">null</code>)作为3D模型加载期间的备用屏幕。让用户盯着一个空屏幕看一会儿，未必是好的用户体验。</p><p id="2471" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe mf mg mh mi b">useProgress</code>是显示进度状态的挂钩。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="b32e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们在<code class="fe mf mg mh mi b">src/App.js</code>中添加了一个加载回退UI:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="4ac4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第6–9行，定义了加载UI<code class="fe mf mg mh mi b">Loader</code>。使用挂钩<code class="fe mf mg mh mi b">useProgress</code>(第7行)显示装载进度状态，定义如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="b1a6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe mf mg mh mi b">Html</code>(第8行)是<code class="fe mf mg mh mi b">@react-three/drei</code>元素，用于在场景中心显示进度文本。</p><p id="9433" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第19行，回退UI被定义为<code class="fe mf mg mh mi b">&lt;Loader /&gt;</code>。</p><p id="5c77" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在3D模型完全加载之前，进度状态会不断更新。这是其中一张快照:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/b531f7b2520cc1853f2873f155e69253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qfLNfUI7DoWxel3oDWpRTQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</p></figure><h2 id="6f24" class="nu mk it bd ml nz oa dn mp ob oc dp mt le od oe mv li of og mx lm oh oi mz oj bi translated">用鼠标控制动作</h2><p id="9e71" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">动态观察控件允许相机围绕目标动态观察。在<code class="fe mf mg mh mi b">Canvas</code>中增加一行代码(下面代码中的第5行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="106d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下面的视频显示，我们可以使用鼠标来控制自由农场的运动。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok nn l"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者提供的视频，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)是在知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)下获得许可的。</p></figure><h2 id="949c" class="nu mk it bd ml nz oa dn mp ob oc dp mt le od oe mv li of og mx lm oh oi mz oj bi translated">设置环境背景</h2><p id="8b51" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">到目前为止，我们已经将免费农场移动到白色背景。森林背景怎么样？</p><p id="eb6a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">它是<code class="fe mf mg mh mi b">Environment</code>元素的另一行代码(下面代码中的第6行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="ef64" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">轨道控制在森林背景下看起来不是更酷吗？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok nn l"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者提供的视频，其中Sampai desu的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)在知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)下获得许可。</p></figure><p id="07c5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">支持的预置类型有<code class="fe mf mg mh mi b">sunset</code>、<code class="fe mf mg mh mi b">dawn</code>、<code class="fe mf mg mh mi b">night</code>、<code class="fe mf mg mh mi b">warehouse</code>、<code class="fe mf mg mh mi b">forest</code>、<code class="fe mf mg mh mi b">apartment</code>、<code class="fe mf mg mh mi b">studio</code>、<code class="fe mf mg mh mi b">city</code>、<code class="fe mf mg mh mi b">park</code>、<code class="fe mf mg mh mi b">lobby</code>。</p><h2 id="101c" class="nu mk it bd ml nz oa dn mp ob oc dp mt le od oe mv li of og mx lm oh oi mz oj bi translated">设置带有旋转和位置的动画</h2><p id="459b" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">动态观察控件围绕目标移动相机，目标本身也可以移动。</p><p id="b71a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe mf mg mh mi b">useFrame</code>是为每一帧调用的钩子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><ul class=""><li id="3879" class="lr ls it kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">参数<code class="fe mf mg mh mi b">state</code>包含所有三者的状态信息，包括<code class="fe mf mg mh mi b">gl</code>(web GL)<code class="fe mf mg mh mi b">camera</code><code class="fe mf mg mh mi b">clock</code><code class="fe mf mg mh mi b">scene</code>等。</li><li id="c353" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">参数<code class="fe mf mg mh mi b">delta</code>是以秒为单位的时钟增量。它用于设置基于时间的动画。</li><li id="d0b9" class="lr ls it kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><code class="fe mf mg mh mi b">renderPriority</code>是完全关闭自动渲染的高级参数。</li></ul><p id="8fe1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们调用<code class="fe mf mg mh mi b">useFrame</code>来激活自由农场。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="f187" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在第12行，<code class="fe mf mg mh mi b">farmRef</code>被定义为<code class="fe mf mg mh mi b">primitive</code>元素(第21行)。<code class="fe mf mg mh mi b">useFrame</code>(第13-19行)控制自由农场的旋转(第15-16行)和重新定位(第13行)。</p><p id="eb06" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">随着变化，自由农场自己移动。另外，我们可以用鼠标移动摄像头。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok nn l"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">作者的视频，其中桑帕伊·德苏的“[免费]农场”(<a class="ae ku" href="https://skfb.ly/ouvNr" rel="noopener ugc nofollow" target="_blank">https://skfb.ly/ouvNr</a>)是在知识共享署名(<a class="ae ku" href="http://creativecommons.org/licenses/by/4.0/" rel="noopener ugc nofollow" target="_blank">http://creativecommons.org/licenses/by/4.0/</a>)下获得许可的。</p></figure><h1 id="ddb4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="a7bc" class="pw-post-body-paragraph kv kw it kx b ky nb ju la lb nc jx ld le nd lg lh li ne lk ll lm nf lo lp lq im bi translated">一步一步，我们在森林背景中展示了一个旋转农场，如标题图片所示。我们总共使用了33行代码，不包括4个空行。</p><p id="3b81" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">是不是很酷？</p><p id="6641" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以在three.js 中阅读关于<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/working-with-texture-in-three-js-40ce5e8b96c4">纹理的内容，或者查看</a><a class="ae ku" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒介文章</a>。</p></div></div>    
</body>
</html>