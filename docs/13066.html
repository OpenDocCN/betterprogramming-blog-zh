<html>
<head>
<title>Building the Rust Web App — Finishing Up</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建Rust Web应用程序—完成</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-the-rust-web-app-finishing-up-1624c9b82f80?source=collection_archive---------5-----------------------#2022-07-25">https://betterprogramming.pub/building-the-rust-web-app-finishing-up-1624c9b82f80?source=collection_archive---------5-----------------------#2022-07-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e407" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Rocket后我学到了什么</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c42bda1e9d5b35224a57db3102f6e303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PMNvyxcVcLDV1fav"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@landscapeplaces" rel="noopener ugc nofollow" target="_blank">费德里科·博托斯</a>在<a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="595b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是关于编写web应用程序的系列文章的第六部分，也是最后一部分。对于这个系列，我们将在<a class="ae kv" href="https://www.rust-lang.org/learn/get-started" rel="noopener ugc nofollow" target="_blank"> Rust </a>中编写web app，我自己来说明如何编写。</p><p id="6e17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果您不愿意自己编写代码，我在这里<a class="ae kv" href="https://github.com/garrettudstrand/rust-web-app/tree/main" rel="noopener ugc nofollow" target="_blank">创建了一个包含本系列所有代码的库。在本系列的每一部分的结尾，我都提交了一个存储库。</a><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/building-the-rust-web-app-multiple-users-and-authentication-5ca5988ddfe4">在前一部分</a>中，我们处理了我们的应用程序不能处理多个用户的事实。在这一部分中，我们清理了前五部分的代码，并讨论了您可以做些什么来改进这个应用程序，以及您可以阅读或做些什么来提高您的web开发技能。</p><h1 id="0ea8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">打扫</h1><p id="3148" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我不会为此做什么疯狂的事情，但是我们应该把代码分成多个文件。虽然我们可以为我们的代码分割做一些有趣的事情，或者我们可以使用类似<a class="ae kv" href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank"> Clean Architecture </a>的东西进行更深入的研究，但是我们的项目并没有复杂到足以保证这一点。我们现在的<code class="fe mp mq mr ms b">main.rs</code>变得太长了，很难读懂。首先，用下面的代码在<code class="fe mp mq mr ms b">src</code>中创建一个名为<code class="fe mp mq mr ms b">lib.rs</code>的文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="bf99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，用下面的代码在<code class="fe mp mq mr ms b">src</code>中制作一个名为<code class="fe mp mq mr ms b">render_routes.rs</code>的文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b628" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在<code class="fe mp mq mr ms b">src</code>中创建一个名为<code class="fe mp mq mr ms b">task_routes.rs</code>的文件，并包含以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b506" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，用下面的代码在<code class="fe mp mq mr ms b">src</code>中创建一个名为<code class="fe mp mq mr ms b">user_routes.rs</code>的文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="9ce2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，转到<code class="fe mp mq mr ms b">main.rs</code>，修改成如下图:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f8e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，如果你难以理解整个<code class="fe mp mq mr ms b">mod</code>业务，或者Rust如何将代码分割成多个文件，我建议从Rust book 中的<a class="ae kv" href="https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html" rel="noopener ugc nofollow" target="_blank">这一章。</a></p><p id="c8ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了它，我们的代码就更简洁了。我们的所有代码不是在一个大文件中，而是被分割在多个文件中，希望这些文件的名称不言自明。如果这将成为一些大型或复杂的项目，可能需要一个不同的组织，但是这里使用的组织对于我们的玩具例子来说是非常好的。</p><h1 id="d209" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关于火箭的最后思考</h1><p id="f9ec" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这是实现一个基本的<code class="fe mp mq mr ms b">todo</code>应用程序的漫长旅程。如果我坚持不使用ORM，这可能会更容易。当您有大量的表和数据时，像Sea ORM这样的东西是有用的，但是对于像这样小的东西来说就不值得了。</p><p id="dfa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我会更容易坚持使用数据库驱动程序，自己编写查询。过度设计一个解决方案通常会使解决方案更难使用，并让留下来处理您的工作的人非常恼火。</p><p id="ef92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，Rocket工作得非常好，尽管我在让ORM工作时遇到了一些困难。使用它建立一个服务器真的很简单，而且它的扩展性允许您随心所欲地使用该服务器。</p><p id="d72b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我认为令人恼火的是，他们没有一些基本的组件来使用身份验证，并迫使您写出许多其他框架通常会帮助您避免的身份验证样板文件。像<a class="ae kv" href="https://laravel.com/" rel="noopener ugc nofollow" target="_blank"> Laravel </a>这样的公司在减少认证的麻烦和痛苦方面做得更好。</p><p id="0704" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不确定转发请求守卫是否是正确的举动，如果他们没有被认证，重定向用户登录。如果防护失败，我找不到任何重定向的方法，所以我不得不一遍又一遍地重复相同的小片段，以重定向到每个必须被认证的单个路由的登录。</p><p id="76af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想这样做的好处是路由的逻辑是显式的，所以如果我愿意的话，将来我可以把它修改得更好。但是如果我能定义一些默认的重定向，如果一个请求保护失败了，并且写转发覆盖了它，那就更好了，但是我想这可能很难实现。同样，也不清楚哪种设计决策更好。</p><p id="af68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">被迫为每个路由编写重定向意味着任何给定的路由都可以有一个定制的重定向，因此定制、修改或扩展我们当前的重定向逻辑要容易得多。然而，这可以被称为违反<a class="ae kv" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank">干</a>，如果你给他们这种说法，其他人会告诉你<a class="ae kv" href="https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it" rel="noopener ugc nofollow" target="_blank"> YAGNI </a>。</p><p id="2727" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我会在实际的web应用程序中使用它吗？也许吧，但是看起来我最终得到的代码比Laravel项目要冗长得多。我觉得我可以在用Rocket实现这个基本CRUD示例的时间内，用Laravel实现十次。</p><p id="bc29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在本教程中使用Rust之后，我已经爱上了它。整理错误并写在里面是一件令人兴奋的事情，但如果你试图在合理的时间内开发一个应用程序，我不确定Rocket是否是一个好的框架选择。也许我很慢，这是一个很好的选择。我还没有完全决定。</p><h1 id="4378" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">从这里去哪里</h1><p id="9c14" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">既然您已经对web开发的所有构件有了很好的了解，那么开始开发自己的web应用程序可能是个好主意。当你遇到问题时，你可能会用谷歌搜索它们，然后你可以开始填补我留在这里的知识空白。</p><p id="7893" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想更快地学习更多关于web开发的知识，请使用另一个web框架，如<a class="ae kv" href="https://laravel.com/" rel="noopener ugc nofollow" target="_blank"> Laravel </a>或<a class="ae kv" href="https://spring.io/" rel="noopener ugc nofollow" target="_blank"> Spring </a>。看到对这些概念和其他有用特性的略微不同的解释，可以让您对web开发领域有更多的了解。</p><p id="5ed9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，也许你只是想提高你的开发技能。在这种情况下，有大量的书籍可以帮助你增强代码编写技能。我推荐<a class="ae kv" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" rel="noopener ugc nofollow" target="_blank">干净代码</a>，<a class="ae kv" href="http://hcibib.org/tcuid/tcuid.pdf" rel="noopener ugc nofollow" target="_blank">以任务为中心的用户界面设计</a>，<a class="ae kv" href="https://www.amazon.com/Code-Complete-Practical-Handbook-Construction/dp/0735619670" rel="noopener ugc nofollow" target="_blank">代码完成，第二版</a>，还有<a class="ae kv" href="https://www.amazon.com/Mythical-Man-Month-Software-Engineering-Anniversary/dp/0201835959" rel="noopener ugc nofollow" target="_blank">神话人月</a>。</p><p id="530a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，如果我没有提到<a class="ae kv" href="https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8" rel="noopener ugc nofollow" target="_blank">设计模式:可重用的面向对象软件的元素</a>，我会受到惩罚。我不确定设计模式是否真的如他们所吹嘘的那样，但是意识到它们会让你更好地与你的开发伙伴交流。你不应该教条地遵循这些书的建议，你也不需要从头到尾地阅读所有这些书，但是它们可以给你一些有用的想法，告诉你应该如何看待代码，以及“好代码”是什么样子的。它们对初学者尤其有用。</p><p id="f7f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想要提供更多具体信息来帮助你提高的书，我推荐<a class="ae kv" href="https://www.lurklurk.org/effective-rust/cover.html" rel="noopener ugc nofollow" target="_blank"> Effective Rust </a>和<a class="ae kv" href="https://www.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997" rel="noopener ugc nofollow" target="_blank"> Effective Java </a>。当然，好的代码是什么样子也不是最终的决定，但是它们给了你很多改进这两种语言代码的想法。</p><p id="7016" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有很多其他的资料，所以如果你对我在这里提供的资源不感兴趣，可以去谷歌一下，找到你自己认为有前途的技术资源。只要你致力于成为一名更好的开发人员，并真诚地采取措施来提升自己，你很快就会成为一名优秀的开发人员。</p><p id="fc58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">嗯，就这些。我希望我在这21000字的混乱中教会了你一些东西。信不信由你，web开发中还有很多概念我在这里都没有涉及到。当谈到构建web应用程序时，有大量的知识，但希望我已经给了你足够的信息，这样你至少可以开始构建自己的web应用程序。</p><p id="1779" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝你好运，感谢你的阅读！</p><h1 id="f903" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">资源</h1><ul class=""><li id="8da7" class="mv mw iq ky b kz mk lc ml lf mx lj my ln mz lr na nb nc nd bi translated">【rust-lang.org】Rust编程语言(T4)</li><li id="0925" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://github.com/garrettudstrand/rust-web-app/tree/main" rel="noopener ugc nofollow" target="_blank">本系列的GitHub库</a></li><li id="e9aa" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank">洁净建筑</a></li><li id="4be9" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html" rel="noopener ugc nofollow" target="_blank">用包、板条箱和模块管理不断增长的项目Rust编程语言(rust-lang.org)</a></li><li id="d300" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://laravel.com/" rel="noopener ugc nofollow" target="_blank">Laravel——面向Web工匠的PHP框架</a></li><li id="7e8f" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/Don't_repeat_yourself" rel="noopener ugc nofollow" target="_blank">不要重复自己——维基百科</a></li><li id="23dc" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/You_aren't_gonna_need_it" rel="noopener ugc nofollow" target="_blank">你不会需要它——维基百科</a></li><li id="5374" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://spring.io/" rel="noopener ugc nofollow" target="_blank">春|家</a></li><li id="e7af" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated">干净的代码:敏捷软件工艺手册:罗伯特·c·马丁:9780132350884:亚马逊:书籍</li><li id="cfb4" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="http://hcibib.org/tcuid/tcuid.pdf" rel="noopener ugc nofollow" target="_blank">以任务为中心的用户界面设计(hcibib.org)</a></li><li id="4bd9" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://www.amazon.com/Code-Complete-Practical-Handbook-Construction/dp/0735619670" rel="noopener ugc nofollow" target="_blank">代码完整:软件构造实用手册，第二版:麦康奈尔，史蒂夫:0790145196705:亚马逊网站:书籍</a></li><li id="0203" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://www.amazon.com/Mythical-Man-Month-Software-Engineering-Anniversary/dp/0201835959" rel="noopener ugc nofollow" target="_blank">神话人月:软件工程论文集，周年纪念版:Brooks Jr .，Frederick:8580001065793:Amazon . com:Books</a></li><li id="3e07" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated">Amazon.com:设计模式:可重用面向对象软件的元素电子书:Erich，Gamma，Helm Richard，Johnson Ralph，Vlissides John，Grady Booch: Kindle Store </li><li id="f292" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://www.lurklurk.org/effective-rust/cover.html" rel="noopener ugc nofollow" target="_blank">封面——有效防锈(lurklurk.org)</a></li><li id="1057" class="mv mw iq ky b kz ne lc nf lf ng lj nh ln ni lr na nb nc nd bi translated"><a class="ae kv" href="https://www.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997" rel="noopener ugc nofollow" target="_blank">有效的Java: Bloch，Joshua:9780134685991:Amazon . com:Books</a></li></ul></div></div>    
</body>
</html>