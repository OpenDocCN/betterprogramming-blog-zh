<html>
<head>
<title>Tutorial on Implementing a Deque in Ruby</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于在Ruby中实现Deque的教程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-a-deque-in-ruby-cf6e9bfd9c3c?source=collection_archive---------9-----------------------#2019-08-23">https://betterprogramming.pub/implementing-a-deque-in-ruby-cf6e9bfd9c3c?source=collection_archive---------9-----------------------#2019-08-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c4a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">例子和方法— <code class="fe kf kg kh ki b">pushFront</code>、<code class="fe kf kg kh ki b">popFront</code>、<code class="fe kf kg kh ki b">pushBack</code>和<code class="fe kf kg kh ki b">popBack</code></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/0dd9de8b1a621f0ccf701e4cc2978d53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XXI-kg18liPn4XcfZmoqQQ.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@cdr6934?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯里德</a>在<a class="ae kz" href="https://unsplash.com/search/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="07bd" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你正在阅读这篇文章，我猜你已经知道什么是deques，并且正在尝试用Ruby实现它，或者你正在学习deques。</p><p id="fc0a" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">简单地说，我会试着唤起你的记忆或者增加你对德克的了解。</p><p id="cc08" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">队列是一种抽象的数据结构。<em class="lw"> Deque </em>是双端队列的首字母缩写。</p><p id="4809" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为了解释它的重要性，我将假设您对大O符号以及您用来创建bug的编程语言中的一些内置数据结构的符号有所了解。</p><p id="8a52" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">考虑下面的元素数组，如果你想通过键访问0-index中的元素，你有一个常数时间操作O(1)。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lx"><img src="../Images/79d44d6ad5d53b06739eb6f78fc166a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0s886Ncd2r6NHJwdESqsQ.png"/></div></div></figure><p id="707c" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你将一个元素添加到数组的后面，这也将是一个常数时间操作O(1)。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ly"><img src="../Images/1ec1b44e0aa4a324a391ec33c90d5448.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7CygUe5XgMdQftEarWy0g.png"/></div></div></figure><p id="c513" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这与从数组后面移除一个元素是一样的。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lz"><img src="../Images/8df7c55493e109eda63ceede33e47eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6mugRM8XJmIoCpLOlBrU-A.png"/></div></div></figure><p id="f839" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">到目前为止，数组看起来很棒，是吗？</p><p id="a72b" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">但是，昂贵的手术也随之而来。想象一下，如果您想在数组的前面添加一个元素，您需要将数组中的所有元素向右移动，这样做的代价是$O(n)。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lz"><img src="../Images/7ee0121130cf88e9635c41dba4af0cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_yrLhYFbKtdMh1leE3eug.png"/></div></div></figure><p id="4daf" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">从这里我们可以看到，我们必须执行六次操作才能将一个元素添加到数组的前面。想象一下，如果数组中有100万个条目，那么很快就会变成100万次操作。</p><p id="5507" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">从数组前面移除一个元素也是一样的，只是顺序相反。</p><p id="c728" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果您正在执行一些任务，其中访问元素是次要的，并且您将更频繁地在数据结构的前端添加和删除元素…</p><p id="12d4" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这就是deque派上用场的地方。它就像一个开放式数组，允许您在O(1)时间内从数据结构的前面或后面添加和删除元素。</p><p id="feb7" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它给你一些俏皮的方法，比如<code class="fe kf kg kh ki b">pushFront</code>、<code class="fe kf kg kh ki b">popFront</code>、<code class="fe kf kg kh ki b">pushBack</code>、<code class="fe kf kg kh ki b">popBack</code>等等。</p><p id="d2a4" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">Deques的工作原理是节点和指针:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ma"><img src="../Images/e977e42f6d70031e5574a330e73d0c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zw9TzOBsLEbMXbyuDj-DYg.png"/></div></div></figure><p id="fb8e" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">每个节点至少有两个部分，节点的值和至少一个指针(它可以有两个，我们将在本教程后面看到)。指针指向其他节点，这就是队列在内存中的链接方式。</p><p id="ed57" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">让我们实现一个并看看这些方法的作用:</p><p id="ce50" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">首先，我们设置节点类，使我们能够创建节点。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><em class="md">创建一个节点类，使您能够将节点添加到您的队列中</em></p></figure><p id="76c5" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">从上面的类中，我们可以看到，节点的值存储在<code class="fe kf kg kh ki b">@value</code>中，指针是指向“前面”节点的<code class="fe kf kg kh ki b">@next_node</code>，以及指向“后面”节点的<code class="fe kf kg kh ki b">prev_node</code>。</p><p id="c966" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">接下来，我们初始化我们的deque类。有很多方法来设置队列，但这是我最喜欢的，请用你的方法来试验。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">用设置为nil的第一个元素初始化deque</p></figure><p id="cbfd" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">接下来，我们需要一个<code class="fe kf kg kh ki b">pushFront</code>方法，允许我们添加到队列的前面。这个方法将很快成为我们最好的朋友，以及它的对手<code class="fe kf kg kh ki b">popFront</code>。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">前推方法非常重要，它允许我们在队列的前面添加元素</p></figure><p id="e28f" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">接下来，我们需要声明<code class="fe kf kg kh ki b">pushBack</code>，一个将节点添加到队列后面的方法。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">pushFront向队列的前面添加新元素</p></figure><p id="1891" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">既然我们已经知道了如何在deque中放置东西，让我们试着移除。首先，从前面通过声明<code class="fe kf kg kh ki b">popFront</code>。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="627e" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在，后面，用<code class="fe kf kg kh ki b">popBack</code>。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="d1eb" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">接下来，我们可能想要检索第一个或最后一个元素，因为它们对我们来说是最重要的。我们从第一个开始，声明<code class="fe kf kg kh ki b">topFront</code>。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">topFront返回队列中的第一个元素</p></figure><p id="6a17" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然后，最后用<code class="fe kf kg kh ki b">topBack</code>。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">topBack返回队列中的最后一个元素</p></figure><p id="bacf" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们可能想问我们的deque的另一个重要问题是它是否为空:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mb mc l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">isEmpty？通过检查第一个元素是否为零来返回布尔值</p></figure><p id="64a6" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在，我将在这里停止这个实现，但是还有一些方法可以添加到deque中，让它做一些更令人惊奇的事情。</p><p id="b5f6" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你需要一些帮助，请告诉我，我会为这个教程制作一个或几个续集。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="829e" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">资源</h1><p id="e01a" class="pw-post-body-paragraph la lb iq lc b ld nd jr lf lg ne ju li lj nf ll lm ln ng lp lq lr nh lt lu lv ij bi translated">在我的<a class="ae kz" href="https://github.com/Oluwadamilareolusakin/ruby-deque" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中找到本教程的代码。</p><p id="0846" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">关于deques有用性的例子，请查看我的关于滑动最大值问题的教程。</p></div></div>    
</body>
</html>