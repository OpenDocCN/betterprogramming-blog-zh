<html>
<head>
<title>The Modern Way to Use Promise- Based HTTP Requests: axios-hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基于承诺的HTTP请求的现代方式:axios-hooks</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-modern-way-to-use-promise-based-http-requests-axios-hooks-f00791345a37?source=collection_archive---------4-----------------------#2019-11-22">https://betterprogramming.pub/the-modern-way-to-use-promise-based-http-requests-axios-hooks-f00791345a37?source=collection_archive---------4-----------------------#2019-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b6fa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">axios的React挂钩，内置对服务器端渲染的支持</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/57016f6524cbda944c096db4c7550817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mv73TpGPVFXzJqu920m5Og.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank">https://github.com/axios/axios</a></p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="40dd" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">axios-hooks是什么？</h1><p id="7894" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">您可能需要在React应用程序中向您自己的或外部的API发出请求，并且您通常需要使用Promises来获得结果，尝试在您的React组件中使用它们和<a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>库。</p><p id="e84a" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><em class="mz"> Axios-hooks </em>在这里用一个更简单的<strong class="ma iu"> </strong>语法来解决这个问题，在几行代码中使用React Hooks的全部功能。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="c3ae" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">特征</h1><p id="e3cb" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">所有你熟悉的axios牛逼，但<strong class="ma iu"> </strong>用钩子简化了。</p><ul class=""><li id="6b1d" class="na nb it ma b mb mu me mv mh nc ml nd mp ne mt nf ng nh ni bi translated">零配置，但在需要时可以配置。</li><li id="0628" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated">单行用法。</li><li id="a0f3" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated">服务器端渲染使用起来非常简单。</li></ul></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="9285" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">装置</h1><p id="5fe1" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">用<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>安装:</p><p id="1b34" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe no np nq nr b">npm install axios axios-hooks</code></p><p id="4b61" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">用<a class="ae ky" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">纱线</a>安装:</p><p id="26ee" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe no np nq nr b">yarn add axios axios-hooks</code></p><p id="86e3" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">Axios <strong class="ma iu"> </strong>是对等依赖，需要显式安装。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="80c8" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">我如何使用它？</h1><p id="2492" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">感觉很简单，就像使用<a class="ae ky" href="https://medium.com/better-programming/use-graphql-query-hooks-with-react-d440c6dcb57d?source=friends_link&amp;sk=e88407b33a8747d34fc7d931b2354843" rel="noopener"> Apollo中的<code class="fe no np nq nr b">useQuery</code>用<a class="ae ky" href="https://medium.com/better-programming/use-graphql-query-hooks-with-react-d440c6dcb57d?source=friends_link&amp;sk=e88407b33a8747d34fc7d931b2354843" rel="noopener"> GraphQL </a>查询</a>一样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="f545" class="nu lh it bd li nv nw dn lm nx ny dp lq mh nz oa ls ml ob oc lu mp od oe lw of bi translated">useAxios</h2><p id="4931" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这个钩子将返回三个简单的元素:</p><ul class=""><li id="e42f" class="na nb it ma b mb mu me mv mh nc ml nd mp ne mt nf ng nh ni bi translated"><code class="fe no np nq nr b">data</code>:包含服务器响应的对象。</li><li id="66d1" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated"><code class="fe no np nq nr b">loading</code>:如果请求待定，则为布尔值。</li><li id="06c6" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated"><code class="fe no np nq nr b">error</code>:如果响应包含错误代码和相关消息。</li></ul><p id="9487" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">您将访问<code class="fe no np nq nr b">useAxios</code> <strong class="ma iu"> </strong>钩子来完成几乎所有的操作，在某些情况下，还将访问<code class="fe no np nq nr b">configure</code>钩子来定义一个基于API的端点URL。</p><pre class="kj kk kl km gt og nr oh oi aw oj bi"><span id="8d83" class="nu lh it nr b gy ok ol l om on">import { configure } from 'axios-hooks'<br/>import LRU from 'lru-cache'<br/>import Axios from 'axios'<br/><br/>const axios = Axios.create({<br/>  baseURL: 'https://api.myjson.com/'<br/>})<br/><br/>const cache = new LRU({ max: 10 })<br/><br/>configure({ axios, cache })</span></pre></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="603a" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">CodeSandbox React axios游乐场</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo nt l"/></div></figure><ul class=""><li id="d841" class="na nb it ma b mb mu me mv mh nc ml nd mp ne mt nf ng nh ni bi translated"><a class="ae ky" href="https://codesandbox.io/s/axios-hooks-medium-tpzue" rel="noopener ugc nofollow" target="_blank">完成代码沙盒</a></li></ul></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="7476" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">如果你想了解更多关于钩子的知识</h1><p id="ee54" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">当我开始使用钩子时，我亲自阅读了《学会反应钩子》<strong class="ma iu"/>,它帮助我理解了它们如何使用工具，如<strong class="ma iu">use axios</strong>:<a class="ae ky" href="https://amzn.to/2Y8hoX9" rel="noopener ugc nofollow" target="_blank">https://amzn.to/2Y8hoX9</a></p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="9be5" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">资源和参考资料</h1><ul class=""><li id="9e72" class="na nb it ma b mb mc me mf mh op ml oq mp or mt nf ng nh ni bi translated"><a class="ae ky" href="https://github.com/simoneb/axios-hooks" rel="noopener ugc nofollow" target="_blank">https://github.com/simoneb/axios-hooks</a></li><li id="a82a" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated"><a class="ae ky" href="https://codesandbox.io/s/axios-hooks-medium-tpzue" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/axios-hooks-medium-tpzue</a></li><li id="449e" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated"><a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank">https://github.com/axios/axios</a></li><li id="b7f2" class="na nb it ma b mb nj me nk mh nl ml nm mp nn mt nf ng nh ni bi translated"><a class="ae ky" href="https://amzn.to/2CH3GQX" rel="noopener ugc nofollow" target="_blank">https://amzn.to/2CH3GQX</a></li></ul></div></div>    
</body>
</html>