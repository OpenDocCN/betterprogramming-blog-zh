<html>
<head>
<title>Make Your Flutter App and Local Back-End Server Talk to Each Other</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让你的Flutter应用和本地后端服务器互相交流</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/make-your-flutter-app-and-local-back-end-server-talk-to-each-other-579cdeba679a?source=collection_archive---------15-----------------------#2020-01-14">https://betterprogramming.pub/make-your-flutter-app-and-local-back-end-server-talk-to-each-other-579cdeba679a?source=collection_archive---------15-----------------------#2020-01-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="15dc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何修复“出现SSL错误，无法建立与服务器的安全连接”</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b1bdc4fe550e33e774c48162c8f7fd23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uvRLCts9a2k_8ptbolMgOg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash上的</a>制作者<a class="ae ky" href="https://unsplash.com/@nesabymakers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NESA拍摄</a></p></figure><p id="8fcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数移动应用程序由两部分组成:前端应用程序和后端服务器。开发人员通常在快速原型开发期间使用本地后端服务器。出于安全原因，许多工具/框架禁用不安全的HTTP连接。</p><p id="7328" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">StackOverflow上时不时会出现类似“为什么我用X构建的app只有在本地运行时才会失败？”其中X可以是React、React Native、Cordova等。</p><p id="0308" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着X的到来，我感觉到了类似的问题，所以这里有一些预先的讨论。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b6fa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">失败的例子</h1><h2 id="93eb" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">失败通常表现为失败的请求</h2><p id="c93e" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">下面是我在将请求嵌入Firebase库时遇到的一个失败的例子:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="2c1f" class="mu md it nm b gy nq nr l ns nt">An SSL error has occurred and a secure connection to the server cannot be made.<br/>NSErrorFailingURLKey=https://localhost:5001/...<br/>Error Domain=kCFErrorDomainCFNetwork<br/>Code=-1200 "(null)" <br/>[&lt;decode: missing data&gt;]</span></pre><p id="c40a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“SSL错误”表明这可能是一个凭证问题。</p><h2 id="fca0" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">iOS才是不喜欢不安全感的那个</h2><p id="0e9e" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">默认情况下，iOS不允许不安全的HTTP连接，这是上面显示的失败的根本原因。</p><h2 id="5471" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">iOS，我知道你是对的，但请破例一次</h2><p id="976f" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">您可以通过在<code class="fe nu nv nw nm b">[flutter_app_root]/ios/Runner/info.plist</code>中添加以下代码片段来将<code class="fe nu nv nw nm b">localhost</code>添加到您的HTTP白名单中:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="7d90" class="mu md it nm b gy nq nr l ns nt">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt; <br/>&lt;dict&gt;<br/>  &lt;key&gt;NSExceptionDomains&lt;/key&gt;<br/>  &lt;dict&gt;<br/>    &lt;key&gt;localhost&lt;/key&gt;<br/>    &lt;dict&gt;<br/>      &lt;key&gt;NSExceptionAllowsInsecureHTTPLoads&lt;/key&gt;<br/>      &lt;true/&gt;<br/>    &lt;/dict&gt;<br/>  &lt;/dict&gt;<br/>&lt;/dict&gt;</span></pre><p id="93a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nx">感谢，</em> <a class="ae ky" href="https://github.com/densa" rel="noopener ugc nofollow" target="_blank"> <em class="nx">大尼斯</em> </a> <em class="nx">，为妙解。</em></p><p id="0164" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们只允许本地主机(其他HTTP连接仍然被阻止)，我们的应用程序仍然是安全的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="fcb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">祝您与Flutter和您的本地服务器愉快！</p></div></div>    
</body>
</html>