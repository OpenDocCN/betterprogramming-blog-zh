<html>
<head>
<title>Explaining System Design to Grandma</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向奶奶解释系统设计</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/system-design-concepts-explained-for-grandma-313da71cae49?source=collection_archive---------7-----------------------#2022-01-21">https://betterprogramming.pub/system-design-concepts-explained-for-grandma-313da71cae49?source=collection_archive---------7-----------------------#2022-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0c64" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">赢得系统设计面试的概念</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/037646be39f973a152083b2a84ec9f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sWJr2qBm2oXm671p9oOBrw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@alexharvey" rel="noopener ugc nofollow" target="_blank">亚历克斯·哈维</a>在<a class="ae kv" href="https://unsplash.com/photos/pMhS-1SzOEc" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="b21e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那是一个随意的周日下午。奶奶像往常一样，躺在躺椅上，尽情享用她最喜欢的自制饼干。</p><p id="e3f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多年来，玛丽一直是我们友好的邻居饼干供应商。她的饼干虽然令人垂涎，但却是奶奶健康状况恶化的罪魁祸首。</p><p id="6fb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第n次了，奶奶试图和我挑起话题。一如既往，它始于，</p><p id="5613" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“那么孙子，你在电商公司做软件工程师呢？”</p><p id="eea8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“是你贴的产品吗？”</p><p id="bf2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">"你能直接了解最新的饼干促销活动吗？"</p><p id="8446" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我瞥了一眼手表，咕哝了一句</p><p id="cc29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“好吧，我今天有些时间，让我们一劳永逸地结束这个问题吧。”</p><p id="cf04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我轻轻放下正在狼吞虎咽的书，渐渐与奶奶目光相遇</p><p id="3965" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“嘿奶奶，我给你讲个故事吧。标题以…”</p><blockquote class="ls"><p id="88a8" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">简而言之，互联网。</p></blockquote><h1 id="3ea8" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">客户机-服务器模型</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1b0092caaf19926794fd36d4afa918c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7S-BPYpmrRwHRIbRqCkgVQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://www.pexels.com/photo/selective-focus-photography-of-person-using-iphone-x-1542252/" rel="noopener ugc nofollow" target="_blank">像素</a>上的<a class="ae kv" href="https://www.pexels.com/@kseverin" rel="noopener ugc nofollow" target="_blank"> Kerde Severin </a>拍摄的照片</p></figure><p id="503b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还记得你几乎每天都会浏览的网站<code class="fe mu mv mw mx b">famousamos.com</code>吗？</p><p id="9da6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你是怎么看到这些网页的？</p><p id="f08d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实际上，它们是由工程师编写的文件。您的浏览器从这些文件中读取内容，并将其呈现为吸引人的网页。</p><p id="60a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随之而来的问题是，给定无限量的网络内容，你的浏览器如何存储所有这些文件？</p><p id="4666" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将是太多或几乎不可能的。</p><p id="68cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，当你把拇指放在浏览按钮上时，你的浏览器通过互联网从远程计算机请求这些文件。</p><p id="9afe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您是客户端，远程计算机是服务器。这就是我们所说的客户机-服务器模型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0dcd409c1604d2fa30be4bb0c5242621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*Y2141zCJ_vEcvsWBagmjfw.png"/></div></figure><h1 id="7031" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">网络协议</h1><p id="bf60" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><strong class="ky ir"> HTTP </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/ab77cbc6dd05aa959982194446c11a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8v43z8VDHz93YuPf0XlbTw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Andrea Piacquadio 在<a class="ae kv" href="https://www.pexels.com/photo/cheerful-young-woman-screaming-into-megaphone-3761509/" rel="noopener ugc nofollow" target="_blank">像素上拍摄的照片</a><a class="ae kv" href="https://www.pexels.com/@olly" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="a7c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还记得之前你向玛丽提交了饼干订单吗？</p><p id="6d11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果每个人提交订单的方式都不一样怎么办？有些人给她写电子邮件，有些人给她发信息，有些人只是隔着栅栏大喊大叫。</p><p id="d237" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">会很混乱的。</p><p id="006a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，玛丽标准化了一种格式，或者你可以称之为协议。要订购cookies，您需要填写指定的表格并通过邮箱提交。</p><p id="8e7f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HTTP的工作方式类似，它是浏览器发出请求的一种协议或一组规则。</p><p id="0583" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您的浏览器发出HTTP请求时，它符合预定义的HTTP规则。它包括方法、路径、协议版本、报头和请求体。</p><p id="6d23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> IP </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/840f018aa5b86d618fad220f0ab7be21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X7us82yFHTmBviQx5syTXA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.pexels.com/@seanpatrickphotography" rel="noopener ugc nofollow" target="_blank">肖恩·帕特里克</a>在<a class="ae kv" href="https://www.pexels.com/photo/12402-mailbox-during-sunrise-1046403/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄</p></figure><p id="1641" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你填好表格，在寄出前你需要一个地址，对吗？</p><p id="d8a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，要向服务器发送请求，您的浏览器需要指定服务器的地址——IP地址<strong class="ky ir"/>。这是一个类似于这个<code class="fe mu mv mw mx b"><em class="nj">2001:db8:0:1234:0:567:8:1</em></code> <em class="nj">的<strong class="ky ir"> 128位数字</strong>。</em></p><p id="6e70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">端口号</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/44902503cba495ea643cf621e33b8c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zi9v87AHE3dCnCqpu1j-VQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.pexels.com/@castorlystock" rel="noopener ugc nofollow" target="_blank">脚轮座</a>在<a class="ae kv" href="https://www.pexels.com/photo/person-writing-on-white-paper-3951845/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄</p></figure><p id="1cad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你记得的话，玛丽住在一个大家庭里。他们每天收到大量邮件。在地址上方，你还需要注明收件人——玛丽。</p><p id="32f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">服务器只是同时运行许多应用程序的另一台计算机，如chrome、paint等。每个应用程序都有一个端口号。</p><p id="90bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在发送请求时，您必须指定服务器的IP和您要发送到的应用程序的端口号。</p><p id="537a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">域名系统</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/dbc4dda305a81c760dc57db41618fe6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2WlNI-KnvfmyqSROzWpcyg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片来自<a class="ae kv" href="https://www.thetimes.co.uk/article/yellow-pages-condemned-to-print-history-pg9k6t7g3" rel="noopener ugc nofollow" target="_blank">星期日泰晤士报</a></p></figure><blockquote class="nm nn no"><p id="e001" class="kw kx nj ky b kz la jr lb lc ld ju le np lg lh li nq lk ll lm nr lo lp lq lr ij bi translated">奶奶:“嗯，但是我这辈子都没见过IP地址。”</p></blockquote><p id="f33f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你说得对。这些看起来神秘的术语实在太难记忆了。这就是我们的生命救星— <strong class="ky ir"> DNS </strong>发挥作用的地方。</p><p id="5f1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">DNS是一个类似电话簿的服务器。它存储所有相应的网站的IP地址和端口号。</p><p id="6454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您浏览<code class="fe mu mv mw mx b">www.famousamos.com</code>时，您的浏览器从DNS获取服务器的IP地址和端口号，并在接收到它们时向给定的IP地址和端口号发送请求。</p><p id="3e55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是你的浏览器与远程服务器通信的方式！</p><p id="e6ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果你不介意的话，我能吃一块饼干吗？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/73737bb767c6e31071ae9f27f56b4fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*HQ6CvuJrXhSNOr-8dS6g-A.png"/></div></figure><h1 id="fbb8" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">垂直缩放与水平缩放</h1><p id="2e48" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><strong class="ky ir">垂直缩放</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/bec541736d98fe8cab7608b9d35c5c19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_iNRwGYYQRXbrPheBpb2kA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安德里亚·皮亚卡迪奥在<a class="ae kv" href="https://www.pexels.com/photo/cheerful-black-waitress-standing-at-counter-3801426/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄的照片</p></figure><p id="6885" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着生意的好转，玛丽接受了更多的订单。类似地，服务器每天都会收到大量的请求。</p><p id="d596" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">玛丽如何处理这些不断增加的订单？</p><p id="9104" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">她可以日以继夜地加班。</p><p id="1330" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是所谓的垂直缩放。</p><p id="6a28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一台计算机可以处理的同时请求的数量是有限制的。纵向扩展意味着向服务器添加更多的存储、RAM和CPU能力，以便它能够执行更多的工作和处理更多的请求。</p><p id="9d25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，随着业务的持续增长，这是不可持续的。玛丽可以“扩展”的范围是有限的。</p><p id="7dcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">水平缩放</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/a801edf13b5f6cb6e8bf48122ec936a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QkdHqlUJxVQXMpyGzQYMEg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.pexels.com/photo/photo-of-people-near-wooden-table-3184418/" rel="noopener ugc nofollow" target="_blank">上的<a class="ae kv" href="https://www.pexels.com/@fauxels" rel="noopener ugc nofollow" target="_blank">副</a>副</a>拍摄</p></figure><p id="6792" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，<strong class="ky ir">水平缩放</strong>来帮忙了。</p><p id="617c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">玛丽可以通过雇佣更多的工人来横向扩展，而不是自己扩展。这些工人将一起工作来处理更多的订单。</p><p id="11dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，我们可以<strong class="ky ir">使用更多的服务器</strong>来同时处理更多的传入请求，这也被称为<strong class="ky ir">水平扩展</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/8a23c7a1b4102a64058d1f6aecc597f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*ue3fcfABARtndlCl_172Tw.png"/></div></figure><h1 id="3235" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">负载平衡器</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/4c9a284fa71a6da1af7f2dbc5dcae614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bawjpp2fos6usj3oBLtyWA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://www.pexels.com/@lachlan-ross" rel="noopener ugc nofollow" target="_blank">拉克伦·罗斯</a>在<a class="ae kv" href="https://www.pexels.com/photo/people-gathering-near-counter-at-festival-6510339/" rel="noopener ugc nofollow" target="_blank">像素上拍摄的照片</a></p></figure><blockquote class="nm nn no"><p id="2f18" class="kw kx nj ky b kz la jr lb lc ld ju le np lg lh li nq lk ll lm nr lo lp lq lr ij bi translated">奶奶:“如果有更多的服务器，那我的请求去哪一个？”</p></blockquote><p id="f9d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">奇妙的问题！</p><p id="26ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最重要的问题是，当一个请求到达时，玛丽如何决定把请求交给谁，这样每个人都能得到一份公平的工作？</p><p id="71c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">她也可以</p><ul class=""><li id="ea88" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">随机分布</li><li id="ab7f" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">顺序分发(循环)</li><li id="2310" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">根据工人的能力分配(根据重量，如果他们能处理更多，就给他们更多)</li><li id="dc2c" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">根据饼干的味道分发(基于路径)</li><li id="99f2" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">基于发件人分发(用户哈希)</li></ul><p id="d943" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，Mary充当<strong class="ky ir">负载平衡器</strong>。</p><p id="7497" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，您的请求将首先到达充当负载平衡器的服务器。负载平衡器将根据算法将请求路由到服务器。</p><p id="14d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">负载平衡器在防止服务器过度浮动和利用不足方面起着至关重要的作用。它确保每个服务器<strong class="ky ir">获得正确的工作量</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/bef226bff063a5040ea364f72d6ccc4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*CnSFpXYCmK9KzkTQggMXHw.png"/></div></figure><h1 id="1f6d" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">限速</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/17177d0fb5c939d45ca6065fd3bbabbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cv1HCrddOMEccrmu9FgTxQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://www.pexels.com/photo/photo-of-a-police-gesturing-to-stop-8927188/" rel="noopener ugc nofollow" target="_blank">像素</a>上的<a class="ae kv" href="https://www.pexels.com/@rodnae-prod" rel="noopener ugc nofollow" target="_blank">罗德尼制作</a>拍摄的照片</p></figure><p id="58b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在附近住了这么久，你应该知道玛丽和帕克相处得不好。</p><blockquote class="nm nn no"><p id="0ac7" class="kw kx nj ky b kz la jr lb lc ld ju le np lg lh li nq lk ll lm nr lo lp lq lr ij bi translated">奶奶:“是的……帕克一直在计划破坏玛丽的生意”</p></blockquote><p id="fcb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是的。Parker可能做的一个攻击是发送大量带有错误味道的无效请求。虽然工作人员可以很容易地识别它们，但这仍然耗尽了它们的带宽。</p><p id="00ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">他们将忙于扫描这些请求，没有时间处理正常的请求。由于漫长的等待时间，顾客最终会离开。</p><p id="c9ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是所谓的<strong class="ky ir">拒绝服务攻击</strong>。</p><p id="6b78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">攻击者同时向服务器发送大量空的或无效的请求。服务器将被<strong class="ky ir">囤积</strong>并最终被关闭。</p><p id="fe72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">限速</strong>是解药。如果一个用户在<strong class="ky ir">短时间内发送了多个请求</strong>，Mary只是简单地将它们分散开，而不会传递给工作人员。</p><p id="6caa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">服务器可以通过检查用户是否在短时间内发送大量请求来执行速率限制。或者，这可以由负载平衡器来完成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/d993332d62a337514bfa04313017fb34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*qWA1Z3yekhGyltEB__xmaQ.png"/></div></figure><h1 id="73b9" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">微服务</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/093dd5912f60e523b36504b3a1de8d78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-tl6B_OrlPeGQ2VduMTfSA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://www.pexels.com/@sonyfeo" rel="noopener ugc nofollow" target="_blank">索尼Feo </a>在<a class="ae kv" href="https://www.pexels.com/photo/chefs-cooking-in-a-kitchen-while-wearing-face-masks-7488820/" rel="noopener ugc nofollow" target="_blank">像素上拍摄的照片</a></p></figure><p id="b346" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">万一你忘了，玛丽需要有人来烤饼干。</p><p id="4551" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，她可以把它留给工人。他们可以输入订单，冲进厨房，烤好饼干，送出去，然后冲回座位。</p><p id="093b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那是很大的工作量！还有什么？你有建议吗？</p><p id="d1ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是的，你是对的。我们可以通过为每个角色雇佣一个人来划分职责。</p><blockquote class="ls"><p id="abbd" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">他们每个人只做一件事情，而且做得很好。</p></blockquote><p id="79b9" class="pw-post-body-paragraph kw kx iq ky b kz om jr lb lc on ju le lf oo lh li lj op ll lm ln oq lp lq lr ij bi translated">那就是<strong class="ky ir">微服务</strong>是什么！</p><p id="0cf5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，一个电子商务应用程序通常包含一个为这些功能指定的服务器</p><ul class=""><li id="d376" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">处理认证</li><li id="500f" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">执行付款</li><li id="0918" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">通知交货</li></ul><p id="ec1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接受你的请求的服务器只做基本的预处理。然后，它将您的请求路由到相应的服务器，以执行特定的任务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/19d932d1761062e53b26abc53bdc3762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*-i__OCvW9zLDbd9PqaRoUA.png"/></div></figure><h1 id="6029" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">发布-订阅系统/消息队列</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/2e70389707dc3d6ad0a1280fe26f9b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tr6-5l0ehXcQCRNtS8E8nA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.pexels.com/@karolina-grabowska" rel="noopener ugc nofollow" target="_blank">卡罗琳娜·格拉博斯卡</a>在<a class="ae kv" href="https://www.pexels.com/photo/woman-in-pink-long-sleeve-shirt-sticking-post-its-on-the-wall-7680088/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄</p></figure><p id="8fb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着订单越来越多，Mary要求这些流程在订单到达时同时进行</p><ul class=""><li id="3372" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">一个人开始揉面</li><li id="ec19" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">一个人预热烤箱</li><li id="d80a" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">一个人准备包裹</li></ul><p id="d3c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着输入订单的工人必须<strong class="ky ir">通知每个人</strong>！他/她需要跑来跑去，以确保每个人都收到消息。</p><p id="23d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">雪上加霜的是，随着更多并发进程的增加，工人需要<strong class="ky ir">跟踪通知谁。</strong></p><p id="aebb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名精明的女商人，Mary添加了一块白板。</p><p id="c11c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当下订单时，工人在白板上添加便利贴。感兴趣的人，只需从白板上<strong class="ky ir">观察和检索数据</strong>。</p><p id="738a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这被称为<strong class="ky ir">发布-订阅系统</strong>又名<strong class="ky ir">消息队列</strong>。在微服务之间的交流中是必不可少的。</p><p id="d369" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，当用户结帐时，结帐服务器应该通知</p><ul class=""><li id="ba87" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">订单服务器创建新订单</li><li id="631c" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">库存服务器减少库存</li><li id="59d6" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">仓库服务器来运送物品</li></ul><p id="f8f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有这些都应该同时<strong class="ky ir">和</strong>完成。</p><p id="6b91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了发布-订阅服务器，结账服务器<strong class="ky ir">不需要</strong>通知任何人。它只是将事件添加到发布-订阅服务器，而感兴趣的各方订阅它并得到相应的通知。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/c97ebe72f4571009ccf844ad90876d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1AHEdIFDtlUbY_xha9-Vg.png"/></div></div></figure><h1 id="d34e" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">贮藏</h1><p id="ca9c" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><strong class="ky ir">数据库</strong></p><p id="551e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">坚持下去，我们一会儿就结束了！</p><p id="c370" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">奶奶，我相信你已经预定了接下来几个月的饼干。对于这些提前订单，Mary需要将它们存储在某个地方。</p><p id="62ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，她买了一些架子，把所有这些唱片有条理地存放在上面。</p><p id="7074" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些架子非常类似于<strong class="ky ir">数据库</strong> — <strong class="ky ir">持久存储</strong>，供服务器<strong class="ky ir">持久存储</strong>数据和信息。</p><p id="4237" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说到数据库，有很多技术细节。因为我们的午睡时间就要到了，我现在就跳过这个。</p><p id="25f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">缓存</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/d3fadfb10680f6efe0b85bee3da00ffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tTesB1AynBRIIuJ7hNVGkw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">劳拉·唐克雷蒂在<a class="ae kv" href="https://www.pexels.com/photo/cheerful-asian-woman-writing-in-notebook-while-having-phone-call-7065271/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄的照片</p></figure><p id="b1b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就在Mary和她的团队将所有订单记录存储在货架上以便跟踪时，一个新的瓶颈出现了。</p><p id="e4ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当订单到达时，一线工人需要</p><ul class=""><li id="2562" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">处理订单</li><li id="be30" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">在白板上添加便利贴</li><li id="436d" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">冲到书架前，把它写进记录里</li></ul><blockquote class="nm nn no"><p id="d0e0" class="kw kx nj ky b kz la jr lb lc ld ju le np lg lh li nq lk ll lm nr lo lp lq lr ij bi translated">奶奶:“很多人会跑来跑去，挤满了货架”</p></blockquote><p id="a3f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没错。跑到货架上浪费的时间可以用来处理更多的请求。此外，拥挤的货架会进一步降低速度。</p><p id="2127" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，笔记本可能会派上用场。下了订单后，记在笔记本上，只是偶尔更新一下货架<strong class="ky ir"/>。</p><p id="bed5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据库将数据存储在<strong class="ky ir">硬盘</strong>中，检索它们需要时间。一致地查询数据库也会囤积数据库服务器，降低速度。</p><p id="bd0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是缓存发挥作用的地方。它将数据存储在<strong class="ky ir">服务器的内存(RAM) </strong>中。速度更快，但也不稳定。如果服务器停机，数据将会丢失。</p><blockquote class="nm nn no"><p id="8e82" class="kw kx nj ky b kz la jr lb lc ld ju le np lg lh li nq lk ll lm nr lo lp lq lr ij bi translated">奶奶:“万一有人拿着笔记本跑了呢？”</p></blockquote><p id="1290" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个聪明的问题！是的，缓存有助于加快速度，但是它也带来了挑战，</p><ul class=""><li id="699c" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">如果服务器出现故障，数据将会丢失</li><li id="98d3" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">如果只在数据库或缓存中更新数据，数据就会变得陈旧</li><li id="a223" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">如果没有适当的缓存回收策略，缓存可能会消耗大量内存</li></ul><p id="e6cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在设计缓存时，需要考虑很多因素并付出很多努力。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/65453f75daaf8b25c261aae94fea7836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hVPvI5uITX8g5cAFveWVw.png"/></div></div></figure><h1 id="6816" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">关闭</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/2e69ae9ad0e53cc608bacbd82e4af350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W2dcni-gXCXvAvmGgtFYCQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.pexels.com/@shvets-production" rel="noopener ugc nofollow" target="_blank">在<a class="ae kv" href="https://www.pexels.com/photo/woman-with-empty-glass-jar-and-lid-7512755/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄生产</a></p></figure><p id="7baf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">行动。好像我们的饼干用完了！嗯，我想是时候收工了。</p><p id="bfeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再深入一点，我相信奶奶很快就能通过系统设计面试！</p><p id="c3f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果你不介意的话，我需要小睡一会儿，然后再做一些饼干促销活动！</p><p id="fa04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再见。</p><h1 id="1e56" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mz jx mo jz na ka mq kc nb kd ms mt bi translated">参考</h1><ul class=""><li id="cba3" class="nv nw iq ky b kz nc lc nd lf ox lj oy ln oz lr oa ob oc od bi translated"><a class="ae kv" href="https://github.com/donnemartin/system-design-primer" rel="noopener ugc nofollow" target="_blank">https://github.com/donnemartin/system-design-primer</a></li></ul></div></div>    
</body>
</html>