<html>
<head>
<title>APIs for Makers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向制造商的API</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/apis-for-makers-9670719e7f25?source=collection_archive---------12-----------------------#2020-02-26">https://betterprogramming.pub/apis-for-makers-9670719e7f25?source=collection_archive---------12-----------------------#2020-02-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="394e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用很少的代码将Slack连接到其他SaaS工具，如Typeform</h2></div><p id="5743" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">知道如何使用API不仅是软件开发人员的一项关键技能，也是一项可以帮助任何人节省时间和提高工作效率的技能。</p><p id="e74e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">API是应用程序接口的缩写，允许我们传输和操作数据，自动化工作操作，巩固通信并扩展工具和平台的功能，如<a class="ae lb" href="https://airtable.com/" rel="noopener ugc nofollow" target="_blank"> Airtable </a>、<a class="ae lb" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> Slack </a>、<a class="ae lb" href="https://www.twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio </a>等等。</p><p id="f57c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将学习所有关于API的知识，以及如何轻松连接不同的软件服务和工具。我们将创建一个Slack应用程序，每当在<a class="ae lb" href="https://typeform.com" rel="noopener ugc nofollow" target="_blank"> Typeform </a>上提交新表单时，它就会发布一条消息来提醒您的频道。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/1d7260852a2a0d3938c4acf0f468c47b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*85TeRWD-I0VVonBa.png"/></div></div></figure><p id="19ff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用<a class="ae lb" href="https://autocode.com" rel="noopener ugc nofollow" target="_blank"> Autocode </a>，一个用于将API连接在一起的在线编辑器，直接从我们的网络浏览器工作——不需要其他工具。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="582d" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">你事先需要什么</h1><ul class=""><li id="6fa7" class="mn mo iq kh b ki mp kl mq ko mr ks ms kw mt la mu mv mw mx bi translated"><a class="ae lb" href="http://slack.com" rel="noopener ugc nofollow" target="_blank">空闲账户</a></li><li id="b323" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated"><a class="ae lb" href="https://stdlib.com/" rel="noopener ugc nofollow" target="_blank">自由标准库账户</a></li><li id="c4fe" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated"><a class="ae lb" href="https://Typeform.com" rel="noopener ugc nofollow" target="_blank">自由类型账户</a></li></ul></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="84a9" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">但是首先……什么是API？</h1><p id="3ea2" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko nd kq kr ks ne ku kv kw nf ky kz la ij bi translated">应用程序编程接口是所有应用程序到应用程序通信和数据传输的基础。为了实现这种通信，必须在web上交换请求和响应。</p><p id="fddf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们与网络应用程序交互时，我们每天都会发出数百个看不见的API请求，以检索和更新数据，或者给出执行特定任务的指令，包括使用<a class="ae lb" href="https://stripe.com/" rel="noopener ugc nofollow" target="_blank"> Stripe </a>处理信用卡支付，使用<a class="ae lb" href="https://www.twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio </a>发送短信，以及登录我们的SaaS账户。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/11544bc332fd8ff510d78ed201099289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*enHz8F3oh7Ca5913PJjHzA.png"/></div></figure><p id="8d32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，每次我们“登录”到我们的<a class="ae lb" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> Slack </a>账户，我们就通过网络向<a class="ae lb" href="https://slack.com/signin" rel="noopener ugc nofollow" target="_blank"> Slack的API </a>发送一个HTTP GET请求。这个API只是控制外部应用程序如何访问Slack的服务器以从Slack的数据库中检索存储的资源的代码。</p><p id="887e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当Slack的服务器接收到我们的应用程序的请求时，它们将解释代码并以请求数据的有效载荷响应<strong class="kh ir"> </strong>。我们的应用程序获取有效载荷的数据，对其进行解释，并显示出来，以便我们访问所需的资源:workspace的频道、对话、用户等。</p><p id="c8c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当向API发出HTTP请求时，我们可以做的大部分事情都涉及到使用四个HTTP协议原则(GET、POST、PUT、DELETE)来创建、读取、更新或删除数据。</p><p id="7e7b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些功能允许开发者和制造者构建有价值的网站、自动化工具和应用程序。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="cbb3" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">第1部分:导航自动代码以发出API请求</h1><p id="721f" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko nd kq kr ks ne ku kv kw nf ky kz la ij bi translated">今天，您将学习通过利用API连接两个不同的软件服务来导航<a class="ae lb" href="https://autocode.com" rel="noopener ugc nofollow" target="_blank">自动编码</a>:<a class="ae lb" href="https://slack.com" rel="noopener ugc nofollow" target="_blank">Slack</a>和<a class="ae lb" href="https://www.typeform.com/" rel="noopener ugc nofollow" target="_blank"> Typeform </a>。</p><p id="53b9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前往标准库上的<a class="ae lb" href="https://autocode.com" rel="noopener ugc nofollow" target="_blank"> Autocode </a>，使用您的标准库凭证登录或创建一个帐户——这是免费的！</p><p id="1db4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您将在标准库上使用Slack APIs。使用<a class="ae lb" href="https://stdlib.com/search/?q=slack" rel="noopener ugc nofollow" target="_blank">Slack API</a>您可以快速构建Slack应用程序:</p><ul class=""><li id="ca12" class="mn mo iq kh b ki kj kl km ko nh ks ni kw nj la mu mv mw mx bi translated">对外部和内部事件做出反应。</li><li id="8116" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated"><a class="ae lb" href="https://stdlib.com/@slack/lib/messages/" rel="noopener ugc nofollow" target="_blank">发送、阅读、创建、存档和管理信息</a>。</li><li id="8040" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated"><a class="ae lb" href="https://stdlib.com/@slack/lib/users/" rel="noopener ugc nofollow" target="_blank">从松弛工作空间中查询信息</a>并在松弛工作空间中制定变更。</li><li id="7eab" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated">将来自外部工具和服务的数据传输到一个松散的工作空间。</li><li id="02eb" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated">通过<a class="ae lb" href="https://stdlib.com/@slack/lib/views/" rel="noopener ugc nofollow" target="_blank">模态</a>收集信息。</li><li id="36ff" class="mn mo iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated">自动化任务等。</li></ul><p id="9d4b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本演示中，您将创建一个对外部事件做出反应的Slack应用程序；每当在你的Typeform帐户上提交新表单时，你的Slack应用程序都会向频道发布一条消息。</p><p id="e445" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">登录Autocode后，选择“空白”<strong class="kh ir"> </strong>模板来“原型化新代码”</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nk"><img src="../Images/6e4f1a65a4f2140ae9f276495775e534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3I0OpycsTWFTs02HmEa21w.png"/></div></div></figure><p id="42dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您将被重定向到如下所示的编码界面:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nl"><img src="../Images/9116b701c8451c2a5a07244d084a78be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABCYq5OEuJww0cxYfghxMg.png"/></div></div></figure><p id="0ce6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您不能删除第一行代码:</p><pre class="ld le lf lg gt nm nn no np aw nq bi"><span id="d2b1" class="nr lw iq nn b gy ns nt l nu nv">const lib = require(‘lib’)({token: process.env.STDLIB_SECRET_TOKEN});</span></pre><p id="4db2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它导入了一个名为“<code class="fe nw nx ny nn b">lib</code>”的完整npm包，以允许我们与标准库之上的其他API进行通信。</p><p id="ba47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">屏幕右下角的两个较小的方形按钮允许我们轻松地搜索和导入<a class="ae lb" href="https://www.npmjs.com" rel="noopener ugc nofollow" target="_blank"> npm包</a>和标准库API。</p><p id="0789" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择右下角带有标准图书馆标志的按钮，这是一个彩色标志。您会注意到，单击该按钮会注入向标准库API发出请求所需的代码— <code class="fe nw nx ny nn b">await lib.</code></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nz"><img src="../Images/787b35ef52ffd3edee74c018c23053a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkEhaW3Uh79B4r0EYfdFfg.png"/></div></div></figure><p id="7d3d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标准库注册表上可用的API提供者列表将会弹出。你可以滚动并选择<code class="fe nw nx ny nn b">Slack</code>或者通过键入<code class="fe nw nx ny nn b">sl</code>来过滤列表，然后按tab键自动完成。</p><p id="9ebe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">滚动浏览所有可用的Slack APIs的完整列表，或者通过键入<code class="fe nw nx ny nn b">send</code>进行过滤，并选择“从你的机器人向频道发送消息”。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oa"><img src="../Images/317a299873e9e56936289593ce538f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dzji6_Sdsy2x9XOMhwNZbw.png"/></div></div></figure><p id="c22e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您将看到一个参数编辑器，向您展示当您输入参数时，自动生成的代码是如何变化的。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ob"><img src="../Images/b2cdd1a040dbe78d2e96cc0539f63679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OUyj2PXSs2Lt4PN6Kn1WnQ.png"/></div></div></figure><p id="4d81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<em class="oc">频道</em>参数框中，输入<code class="fe nw nx ny nn b"><strong class="kh ir">#</strong></code>，后跟您想要发送信息的频道名称。</p><p id="69b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<em class="oc"> text </em> <strong class="kh ir"> </strong>参数内，键入您想要发送的任何消息。点击<em class="oc">完成</em> <strong class="kh ir"> </strong>配置，代码自动添加到代码编辑器中。</p><p id="bff6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您试图在此时运行代码，您将会收到错误消息:“没有提供备用身份验证令牌”。这是因为您需要将一个<a class="ae lb" href="https://docs.stdlib.com/identity-management-sso-for-apis/what-is-an-identity-token/" rel="noopener ugc nofollow" target="_blank">标准库身份令牌</a>链接到您的Slack帐户。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="640d" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">第2部分:将标准库令牌链接到Slack</h1><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/5e54bbfde11954d1e31a3210b519af2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wLsTtZ__pSwq7aejxekfDw.png"/></div></div></figure><p id="823a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击红色按钮“需要1个账户”,这将提示您链接一个备用账户。</p><p id="0f6a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从身份管理屏幕中选择“链接资源”。</p><p id="1de8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您已经使用标准库构建了Slack应用程序，您将看到现有的Slack帐户，或者您可以单击“链接新资源”<strong class="kh ir"> </strong>来链接新的Slack应用程序<strong class="kh ir">。</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oe"><img src="../Images/0866c5182fc8b2d4c74b49d2f0622924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mx1X_TNXjrrbFO0cttU71Q.png"/></div></div></figure><p id="589f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择“安装标准资料库应用程序”</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi of"><img src="../Images/fce1a57487f2053fe192b9fa96e2d699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8pkmZ8S9B1EMKVLxV7SyJg.png"/></div></div></figure><p id="3dfa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该会看到一个OAuth弹出窗口，如下所示:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi og"><img src="../Images/ec4f17d1ee6b48977ed89bc636480341.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*_LBbRede5ZugMS21HCi4Pw.png"/></div></figure><p id="6172" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择<em class="oc">允许</em>。<strong class="kh ir"> </strong>你可以选择用名字和图片定制你的Slack应用。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oh"><img src="../Images/5ea4bc531c7df691e3caa648883ecbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNn0_GxOH4wo3b3IgajC2A.png"/></div></div></figure><p id="2e52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择<em class="oc">完成</em>。绿色复选标记确认您已正确链接您的帐户。点击<em class="oc">完成</em>的链接。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oi"><img src="../Images/1318593e4d831d68f6a55b4251fc8403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwnrIxPuUZmw16M7PhixIA.png"/></div></div></figure><p id="9b3e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">链接了Slack帐户之后，您就可以通过单击绿色的“运行代码”按钮向Slack的API发送一个测试HTTP Post请求了。就这样，您的测试消息应该发布到您的Slack通道！</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oj"><img src="../Images/90a84c6d340e421f957b71fc6df84bcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OYU9qnyWYTwZgJjwWv1l1A.png"/></div></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ok"><img src="../Images/c5311af681f5289dfb2156354c350b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WSbe-7xpJvai4-V3akG6qw.png"/></div></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="595e" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">第3部分:将时差连接到字体</h1><p id="7e5d" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko nd kq kr ks ne ku kv kw nf ky kz la ij bi translated">接下来，您需要启用Slack和Typeform帐户之间的通信，以便当在Typeform上提交表单时，该事件的数据将进入您的Slack通道。</p><p id="d909" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以通过导出你的代码作为一个webhook API来处理Typeform上的<code class="fe nw nx ny nn b">form.submitted</code> <strong class="kh ir"> </strong>事件。</p><p id="9afc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是首先，在<a class="ae lb" href="https://typeform.com" rel="noopener ugc nofollow" target="_blank">类型表单</a>上登录或创建一个帐户。创建并发布一个快速联系表单，该表单采用如下的<code class="fe nw nx ny nn b">email</code>和<code class="fe nw nx ny nn b">text</code>输入:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="5879" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成表单发布后，返回到Autocode将Typeform连接到Slack。</p><p id="f75b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<em class="oc">事件源</em> <strong class="kh ir"> </strong>和<code class="fe nw nx ny nn b">form.submitted</code> <strong class="kh ir"> </strong>中选择<code class="fe nw nx ny nn b">Typeform</code>作为事件。每次提交表单时，它都会触发您的webhook API，一个HTTP POST请求会被发送到您的Slack帐户，其中包含该事件的信息。</p><p id="4076" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦做出选择，代码就会自动生成。这段自动生成的代码导出了第14-17行中的JavaScript函数——这个函数将处理Typeform上的<code class="fe nw nx ny nn b">form.submitted</code>事件。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi on"><img src="../Images/4bf393ccd22dc26fd3c3bab0dc51d8f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S77lIeQ8whyGEMq_jhK0Xg.png"/></div></div></figure><p id="5590" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nw nx ny nn b">module.exports</code>(第8行)中的<code class="fe nw nx ny nn b">event</code>参数从Typeform上的完整事件有效负载传入信息。您可以通过点击屏幕右上角的灰色<em class="oc">编辑有效载荷</em>按钮来查看事件有效载荷的示例。</p><p id="6527" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该是这样的:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oo"><img src="../Images/14532736d246e3dab705227815c0145d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6mZJfTRr0iocPqLIyOlvlw.png"/></div></div></figure><p id="73b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以尝试从这个示例信息负载中提取数据来配置您的Slack消息。</p><p id="f7cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将我们之前编写的测试消息:<code class="fe nw nx ny nn b">Hey! This is a test Slack app!</code>替换为类似于:<code class="fe nw nx ny nn b">Hey! A new form was just submitted. \n Here is the message: ${event.form_response.answers[1].text}`</code>的内容。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi op"><img src="../Images/aa79db807efe96cf10e3c2b93abcb602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V2mOHHcp3FHVStIDVs5fRA.png"/></div></div></figure><p id="d322" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您已经准备好连接您的Typeform帐户。选择<strong class="kh ir"/>【1账号必填】红色<strong class="kh ir"> </strong>按钮。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oq"><img src="../Images/58a70b6aadce74aef08a5106c8698bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*16UUI--eAU1o_PZinGyWYg.png"/></div></div></figure><p id="2b46" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您将通过另一个身份验证流程将您的标准库令牌链接到您的Typeform帐户。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi or"><img src="../Images/51bfc0ca6389d0f68d5bf90696593006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DtXLcz9drlbBgchVFHjcxw.png"/></div></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi os"><img src="../Images/65e0a3285526be05e2487327f22c97a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vj0SxArgqFRoUU3FTu_ORQ.png"/></div></div></figure><p id="5db5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦您完成了流程并选择了示例类型表单，请单击“完成链接”。</p><p id="a1d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择橙色的【保存API端点】<strong class="kh ir"> </strong>按钮。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ot"><img src="../Images/377de575cda0510d3d20dafc0dc5794d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DRXWTBnSmrCgFsOlMcJfXg.png"/></div></div></figure><p id="2abf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了！您刚刚保存了您的第一个项目。请注意Autocode是如何自动建立一个项目支架来将您的项目保存为API端点的，但是它还没有被部署。</p><p id="bc0f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着您的端点尚未激活，无法响应HTTP请求或事件。要将您的API部署到云中，单击文件管理器左下角的<em class="oc">部署API </em>。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/0e7bf92b83c17bf602a17347c4c8609e.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*XxqWA8QhBsfkQSvcMUHl9g.png"/></div></figure><p id="2151" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">恭喜你。您已经成功地引导Autocode将您的第一个API集成发布到产品中。</p><p id="190d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以通过将表单提交到Typeform来测试您的集成。如果您已经正确设置了一切，您的Slack通道应该会收到如下消息:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/680c68fc07cd0953adbb2aa03e04d744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qZoMbL3_AcSOz-aqiN5aVA.png"/></div></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="57b6" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">日志</h1><p id="7657" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko nd kq kr ks ne ku kv kw nf ky kz la ij bi translated">Autocode附带日志来帮助我们迭代和调试我们的项目。例如，如果我们想要查看完整的事件有效负载，以从Typeform提取更多信息并将其传递给Slack，我们可以添加以下代码行:</p><pre class="ld le lf lg gt nm nn no np aw nq bi"><span id="b577" class="nr lw iq nn b gy ns nt l nu nv">console.log(JSON.stringify(event, null, 2))</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ov"><img src="../Images/afd6589995241d3ef87c8be8a4b47be9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOC4TDjzENQ_ez47NUmKVA.png"/></div></div></figure><p id="f511" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单击“保存API端点”并用“部署API”重新部署您的代码。</p><p id="db41" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在返回到Typeform并提交第二个测试表单。</p><p id="7212" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">找到并单击部署和共享按钮上方的“日志”<strong class="kh ir"> </strong>按钮。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ow"><img src="../Images/67ef86566dfabfd27e5d178c2d7a01a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2_S8ULAxRRdnQ634ep6nWw.png"/></div></div></figure><p id="8086" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的项目日志将在新屏幕中打开。您将看到完整的事件负载，如下所示:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ox"><img src="../Images/8d0910a43ee4caf6dd518605eef0fd39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dapQSpagai9gAydho6U0BA.png"/></div></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="8270" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">就是这样！</h1><p id="8948" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko nd kq kr ks ne ku kv kw nf ky kz la ij bi translated">感谢您花时间阅读和尝试这一点！</p><p id="6d6e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你觉得这篇文章有帮助，请告诉我！如果你有问题，或者你想学习连接其他API和设置webhooks，请联系我们——我很乐意帮助你。</p></div></div>    
</body>
</html>