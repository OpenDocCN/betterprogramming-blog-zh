<html>
<head>
<title>How to Set Up Reducers to Be Called by the useContext React Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置由useContext React挂钩调用的Reducers</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/setting-up-a-reducer-using-hooks-c2671ffa59b8?source=collection_archive---------1-----------------------#2020-08-09">https://betterprogramming.pub/setting-up-a-reducer-using-hooks-c2671ffa59b8?source=collection_archive---------1-----------------------#2020-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="67a1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用挂钩设置减速器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bd444bb9b0b197336890abf9c1cdba99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-G-O9G2-t5LPFFmy"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@wirhabenzeit?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张秀坤·施罗德</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="49a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上一篇文章中，我写了如何通过创建一个<code class="fe ls lt lu lv b">createDatacontext.js</code>文件来抽象<strong class="ky ir"> </strong>状态逻辑。在那篇文章的最后，我还提供了一个例子，说明如何使用这个<code class="fe ls lt lu lv b">createDataContext</code>来实际创建上下文，以便可以在任何地方调用这个状态。在本文中，我将介绍如何创建一个上下文文件，以及如何将它添加到一个组件中。</p><p id="f8ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建任何东西的第一步都是创建指定的文件—在这种情况下，它看起来像这样:</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="8955" class="ma mb iq lv b gy mc md l me mf">ExampleContext.js</span></pre><p id="0b84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该文件和createDataContext文件应该位于同一个上下文目录中。我们的下一步是从createDataContext导入上下文逻辑。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="3428" class="ma mb iq lv b gy mc md l me mf">import createDataContext from './createDataContext'</span></pre><p id="f799" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在导入我们的上下文逻辑之后，我们将为我们的例子初始化reducer。为此，我们将创建一个名为<code class="fe ls lt lu lv b">exampleReducer</code>的函数，它将接收一个动作和一个有效载荷，然后使用switch语句修改状态，默认情况下，它将返回应用程序的状态。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="a4af" class="ma mb iq lv b gy mc md l me mf">import createDataContext from './createDataContext'</span><span id="99ee" class="ma mb iq lv b gy mg md l me mf">const = exampleReducer = (action, payload)  =&gt;{<br/>  switch (action.type){<br/>   default: <br/>     return state<br/>  }<br/>}</span></pre><p id="6fc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了基本的缩减集u，p，我们现在将创建一个导出语句，它将导出两件事:上下文和提供者。它将通过传入我们的Reducer(例如reducer)、我们的actions(我们还没有创建它，所以现在我们将只添加一个空对象({}))和我们的初始状态(在本例中，是一个空数组([]))来调用<code class="fe ls lt lu lv b">createDataContext</code>。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="6044" class="ma mb iq lv b gy mc md l me mf">import createDataContext from './createDataContext'</span><span id="95fb" class="ma mb iq lv b gy mg md l me mf">const = exampleReducer = (action, payload)  =&gt;{<br/>  switch (action.type){<br/>   default: <br/>     return state<br/>  }<br/>}</span><span id="00db" class="ma mb iq lv b gy mg md l me mf">export const {Context, Provider} = createDataContex(<br/>  exampleReducer,<br/>  {},<br/>  []<br/>)</span></pre><p id="a3fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经设置了导出和缩减器，我们可以开始添加修改状态的动作了。<strong class="ky ir"> <em class="mh"> </em> </strong>但首先，我想快速说明一下。我不打算添加任何获取请求，因为这更像是一个通用模板。</p><p id="3b71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将创建的第一个动作是向state添加一个示例。为此，我们将在switch语句中添加一个<code class="fe ls lt lu lv b">add_example</code> case，它将返回添加了新示例后的先前状态。然后我们将创建一个名为<code class="fe ls lt lu lv b">addExample</code>的函数。在这种情况下，我们将用一个新的例子来调度我们的<code class="fe ls lt lu lv b">add_example</code>(这将是一个ID和一个随机数的值)。最后，我们将把我们的<code class="fe ls lt lu lv b">addExample</code>动作添加到导出中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="eab7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将添加一个删除示例的案例和操作。case <code class="fe ls lt lu lv b">delete_example</code>将通过state进行过滤，并删除匹配有效负载(在本例中是一个ID)的示例。<code class="fe ls lt lu lv b">deleteExample</code>动作将接收一个ID，然后发送<code class="fe ls lt lu lv b">delete_example</code>，将ID作为有效载荷传递。初始化<code class="fe ls lt lu lv b">deleteExample</code>动作后，我们将导出它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="d7c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将添加一个编辑操作和案例，并将其导出。该案例将被命名为<code class="fe ls lt lu lv b">edit_example</code>，它将映射整个州，找到我们正在编辑的示例，并替换它。我们的动作<code class="fe ls lt lu lv b">editExample</code>将接收一个ID和一个新值，并发送<code class="fe ls lt lu lv b">edit_example</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="7a99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，我们就创建了一个模板，用于在React应用程序中利用状态为大多数事物创建上下文。为此，我们可以输入一个组件来导入我们特定的上下文文件和<code class="fe ls lt lu lv b">useContext</code>钩子，然后初始化我们的状态和助手方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="d78f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">非常感谢您的阅读。编码快乐！</p></div></div>    
</body>
</html>