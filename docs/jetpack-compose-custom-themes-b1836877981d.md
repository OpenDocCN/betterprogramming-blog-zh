# 在 Jetpack Compose 中构建自定义主题

> 原文：<https://betterprogramming.pub/jetpack-compose-custom-themes-b1836877981d>

## 改进你的应用程序的设计系统

![](img/104767f3e741bce3cb314d566882e853.png)

Kelli Tungay 的色彩(Unsplash)

Jetpack Compose 是 Android 的新 UI 工具包，我们可以通过代码创建组件，避免创建 XML 文件，因为这种 Compose 更直观，加快了开发过程，是一种非常强大的工具，可以轻松创建复杂的设计。

开发 UI 时最重要的一件事就是创建我们的`Theme`，默认情况下 Android 使用[材质设计](https://material.io/)(最新版本是 Material You)。当我们用 [Jetpack Compose](https://developer.android.com/jetpack/compose) 创建一个 Android 项目时，我们有一个名为`ui`的文件夹，它有主题、颜色、形状和排版，在内部使用了`MaterialTheme` composable。

仅使用材质配置的默认主题

根据我自己在一个大型项目中使用*设计系统*的经验，我们采取了以下步骤来创建我们自己的`Theme` 并为定制组件提供支持。

# **1。颜色、字体和形状的定义**

## **颜色**

第一件事是创建我们的颜色，我们可以从 UI/UX 团队获得颜色，但如果我们没有一个特定的团队来定义这些颜色，我们可以在一个文件中定义我们自己的颜色。当我们准备好颜色后，我们需要创建一个类来处理我们的颜色和材质颜色，所以我们将创建类`CustomColors` *。*

我们设计系统中的颜色列表

CustomColors 类包含材质和自定义颜色

## **字体**

字体很容易配置，我们只需要创建一个`**Typography**`类，但我们可以创建额外的类来重用我们字体的主类中的代码，这总是好的。需要记住的一件非常重要的事情是，我们需要根据文本大小来定义所有的变体，例如 h1、h2、body 等；因为我们会在`**Typography**`类内部重用它。

为我们自己的排版类配置

## **形状**

这里我们没有太多要配置的，我们只需要创建我们的 **Shapes** 类，就这样。

形状类的定义

# **2。供应商创建**

这可能是创建自定义主题最重要的事情，因为我们将使用`CompositionLocal`，这是一个我们可以通过组合隐式传递数据的选项。

一般来说，所有的数据流从上到下遍历 UI 树，作为一种全局配置。在我们的例子中，隐式发送我们自己的颜色并在整个应用程序的自定义主题中使用它们是很有用的。

隐式传递颜色的本地提供程序

# **3。主题创作(亮/暗模式)**

最后但同样重要的是，我们需要组装所有代码片段，以使我们的`CustomTheme` composable 在我们所有的定制组件中工作，因此我们将为亮暗模式创建颜色，这些颜色将根据手机的配置而变化。

主题文件包含所有的配置(颜色，字体和形状)

通过上面的步骤，我们可以用一种简单的方式创建我们的自定义调色板，并最终组装我们的主题，其职责是为整个应用程序提供*颜色、字体和形状*，我们也可以避免总是使用`MaterialTheme`而使用`CustomTheme`。

这篇文章中没有提到的一些细节是，对于颜色的定义，我们(我的团队)正在使用令牌来进行更具语义的命名，这个过程是 UI/UX 团队的一部分，因此我们可以在不影响颜色名称的情况下替换令牌的值，另一点是，`debugColors`函数只是一个可组合的函数，它返回一个具有默认颜色`MaterialTheme`的`Colors`类，以提供对材料设计库中内置组件的支持。

我希望这篇文章可以帮助你定义你的主题，改善你的设计系统。