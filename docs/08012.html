<html>
<head>
<title>When To and When Not To Use Functional Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时使用，何时不使用函数式编程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/when-and-when-not-to-use-functional-programming-73dbcb5d0a85?source=collection_archive---------0-----------------------#2021-03-16">https://betterprogramming.pub/when-and-when-not-to-use-functional-programming-73dbcb5d0a85?source=collection_archive---------0-----------------------#2021-03-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="656f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">掌握用函数编写紧凑代码背后的思想</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3791cb3b54cf7b5cca5cfbd0345d93e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Csm7xy09_3jugojv96dXuQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿尔瓦罗·雷耶斯在Unsplash<a class="ae ky" href="/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">拍摄的照片。</a></p></figure><p id="7714" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数式编程并不是一个新的范例。根据维基百科的说法，这个想法在20世纪30年代开始出现。它背后的主要概念是将函数组合成一个链。</p><p id="84bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与开发人员必须存储状态的命令式编程方式不同，函数式编程是无状态的。所有的计算和数据操作都发生在函数中，而不保持数据的中间状态。你可以把它想象成一个管道:每一部分都是一个接收一些数据并返回结果的函数。该结果成为另一个函数的输入。</p><p id="d53b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数式编程概念非常强大，已经引起了许多开发人员的注意。许多现代编程语言都支持它。甚至还有像Clojure、Haskell、F#这样的纯函数式语言。</p><p id="0159" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是是什么让这个范例如此受欢迎呢？如果它只有优点，为什么它还没有取代命令式范式？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ec76" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">好的部分</h1><p id="d5d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当涉及到过滤数据和改变格式时，函数式编程得到了它的支持。如果解决方案需要过滤掉一些数据，改变顺序，或者只挑选某些数据，那么很有可能你是在正确的道路上。让我们来看看下面的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用函数式编程的例子</p></figure><p id="a562" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有一个散列，其中公司是键，城市是值。我们希望获得苹果、微软和亚马逊等科技巨头所在的城市。为此，我们过滤散列，只选择科技巨头公司，然后我们获取城市，并删除任何重复的。</p><p id="4f8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数式编程最好的部分是它使代码简单易读。所以我们只用了五行代码就得到结果(第11-15行)。使用命令式方法需要多少代码？</p><p id="e8d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要对所有项目进行循环。在这个循环中，我们必须使用一个<code class="fe nb nc nd ne b">if</code>语句来检查某个项目是否合适。除此之外，我们还会引入一些临时变量来保存中间状态。当你实现它的时候，它肯定不止五行代码。</p><p id="7a96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以函数方式编写代码可能会上瘾，因为它简化了许多事情。这一概念近年来越来越受欢迎。许多现代语言如Kotlin、Ruby和Swift广泛使用它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="086f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">不太好的部分</h1><p id="9df5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">除了像<code class="fe nb nc nd ne b">filter</code>和<code class="fe nb nc nd ne b">map</code>这样的简单功能，还有高级功能。在某些情况下，将这些链接成一个长序列会降低代码的可读性。此时，紧凑代码的好处就成了问题。</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="e31b" class="nj md it ne b gy nk nl l nm nn">total_duration<em class="no"> </em>= events.pluck(:duration).compact.sum.round</span></pre><p id="8040" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看上面的例子。将四个不同的函数链接在一起并不困难，但问题是您必须知道每个函数做什么。如果不了解这一点，调试这一行可能需要一些时间。</p><p id="de80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个例子是用Ruby编写的，它做了以下事情:它从事件集合中选取<code class="fe nb nc nd ne b">duration</code>属性。<code class="fe nb nc nd ne b">compact</code>函数删除所有可空的项目。<code class="fe nb nc nd ne b">sum</code>和<code class="fe nb nc nd ne b">round</code>函数更简单:它们计算持续时间的总和，并将最终结果四舍五入到最接近的整数。</p><p id="e0fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每种编程语言都引入了处理数据结构的特定函数。举几个例子:<code class="fe nb nc nd ne b">reduce()</code>、<code class="fe nb nc nd ne b">collect()</code>和<code class="fe nb nc nd ne b">fold()</code>。结合其他功能，这可能会导致理解上的困难。想象一下将十多个函数链接在一起，包括高级函数。我怀疑你的队友会乐意处理这些代码。</p><p id="82f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仔细选择必要的功能可以为您和您的团队节省大量时间。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a53f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">陷阱</h1><p id="8002" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在使用函数时，还有一些你必须知道的事情:函数的顺序很重要。如果您必须对数组进行过滤和映射，那么(如果可能的话)应该先进行过滤，然后再进行另一个操作，因为下一个操作将处理已经缩减的数据集。</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="2189" class="nj md it ne b gy nk nl l nm nn">scores = [2.1, 4.2, 6.4, 1.3, 5.6, 7.1, 2.3]</span><span id="1fc2" class="nj md it ne b gy np nl l nm nn"># sorting 3 elements<br/>scores.select{|score| score &gt; 5.0}.sort<br/>  <br/># sorting 7 elements<br/>scores.sort.select{|score| score &gt; 5.0}</span></pre><p id="9491" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当操作以相反的顺序进行时，它会浪费计算资源来处理稍后将被排除的数据。在第二个示例中，对七个元素执行排序操作。在第一个示例中，它只在三个元素上执行。显然，在更大的数据集上，性能的差异将是明显的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="022f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="5634" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">函数式编程不是银弹。软件工程师不能仅仅按照那个范例开始编写复杂的系统。此时，您可能会考虑纯函数式语言，如Clojure或F#。当然，这些语言本来只是用于功能性的思维方式。</p><p id="f0e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这完全取决于你的需要。如果您的应用程序应该是无状态的，那么函数式编程是一条可行之路。但是，如果您的解决方案是有状态的，并且需要状态管理，那么应用函数式方法将看起来不自然。</p><p id="a0cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，它是解决特定问题的另一个伟大的工具。选择合适的乐器来实现你的目标是一项重要的技能——功能概念就是其中之一。</p></div></div>    
</body>
</html>