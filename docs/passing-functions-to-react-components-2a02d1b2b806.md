# 将函数传递给反应组件

> 原文：<https://betterprogramming.pub/passing-functions-to-react-components-2a02d1b2b806>

## 如何将事件处理程序传递给组件？

![](img/0f5d314c5610c0efab2ff40af205bc5e.png)

Simone Hutsch 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片。

```
<MyComponent onClick={this.handleClick}>
```

在 React 中，有几种情况下，您可能希望将一个函数(如`onClick`)作为道具从容器传递到子组件——通常是为了让子组件通知父组件一些事件。

例如:

一个场景，其中有一个 CustomButton 组件需要更改其父容器组件的计数器状态。

假设您可能需要从子组件访问父组件的`state`或`props`，您将需要以某种方式将函数绑定到父组件实例。

虽然有几种方法可以做到这一点，但有些是更好的解决方案。

# 如何将一个函数绑定到一个组件实例？

根据所涉及的语法和构建步骤，有许多方法可以确保函数能够访问组件属性，比如`props`和`state`。

## 1.在构造函数中绑定

虽然这是一种广泛使用的方法，但有点奇怪，因为它使用了晦涩的单词`bind`，并且需要一行不必要的代码(我们将在后面讨论)。

在我看来，这不是最好的方法。

## 2.渲染时绑定

虽然与之前的方法**，**相比，我们用这种方法节省了一行代码，但是这种方法仍然有些不清楚，我不推荐使用它。

此外，也许更重要的是:

> *"在渲染中使用* `*.bind(this)*` *，每次组件渲染时创建一个新函数，这可能会影响性能。"—* [React 的文档](https://reactjs.org/docs/faq-functions.html)

## 3.箭头功能

箭头函数表达式的语法比函数表达式短，并且没有自己的`this`。出于这个原因，您可以将它传递给子组件，并且仍然可以访问父组件的`props`和`state`。

在我看来，这是最好的办法:

*注:根据* [*React 的文档*](https://reactjs.org/docs/faq-functions.html) *，“这个语法是实验性的，还没有标准化。”*

# 将参数传递给事件处理程序

如果您真的需要通过函数 prop 将参数传递给子对象，请仔细检查。

检查您是否有其他选择，比如将参数作为一个属性传递，或者发现您在子组件中并不真正需要该参数。

## 我为什么要说这个？

如前所述，在 render 中使用 bind 之类的语法或匿名函数(如下例所示)将导致子组件在父组件的每次呈现后重新呈现，而不管是否与其子组件相关。这意味着表现不佳。

由于子组件接收一个匿名函数作为道具，所以它不能与前面的匿名函数进行比较(因为两者都是匿名的)。然而，传递对类似于
`onClick={this.handleClick}`的方法的引用让 React 知道什么都没有改变，所以它不会不必要地重新呈现。

如果没有必要，你不应该做什么的例子:

```
<button onClick={() => this.handleClick(id)} />
```

但是，请注意，匿名函数有时是不可避免的(例如，当我们只需要在上下文中传递一个参数时)。

## 活生生的证据

查看下一个 CodeSandbox 示例。它演示了将函数作为道具传递给组件的两种方式。第一个通过引用传递函数，第二个传递匿名函数。

单击该按钮时，每个组件旁边的数字表示该组件被渲染的次数。

你能猜出哪一个会不必要地渲染更多次吗？

# 最后，确保在将函数传递给组件时没有调用它

不要这样做:

代码片段由[反应](https://reactjs.org/docs/faq-functions.html)。

相反，传递函数本身(不带括号):

[React](https://reactjs.org/docs/faq-functions.html) 的代码片段。

# 结论

我希望这篇文章能够帮助您理解如何能够——并且应该——以简单有效的方式在组件之间传递函数。

祝您愉快！感谢阅读！