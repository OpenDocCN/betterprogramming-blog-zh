<html>
<head>
<title>Colour, Hue, Saturation, and Brightness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颜色、色调、饱和度和亮度</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/colour-hue-saturation-and-brightness-24661bb809a3?source=collection_archive---------10-----------------------#2020-08-03">https://betterprogramming.pub/colour-hue-saturation-and-brightness-24661bb809a3?source=collection_archive---------10-----------------------#2020-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="702f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在SwiftUI中使用颜色</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee1d79bb82f8dd737d00f5741445bd14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5He4iy0umdnhx-8qGovAQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">paweczerwi ski</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a947" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你知道吗，1977年推出的Apple II是第一台彩色个人电脑。这是一个领先的苹果不知何故下降了一个不可思议的20年的差距之前，似乎没有人得到他们的行动在一起。微软/惠普领先于苹果的一项举措成为了我们今天大多数人使用的事实上的标准。是的，令人难以置信的是，这是一个在过去25年中几乎没有改变的标准。</p><p id="7e3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">苹果最终在这一点上走到了谈判桌前，并带回了一个新的标准，即在2016年展示P3——不只是说说而已，还要做做样子。他们推出了使用它的产品，比如iPhone 7和其他产品，包括iPad Pro和iMac。</p><p id="f9eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，今天的色彩是一个比以往任何时候都更具挑战性的问题，越来越多采用不同技术、具有截然不同特性的设备进入市场。</p><p id="6a66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，要编码，我们从哪里开始。让我们做事实上的。不出所料，您可能会从1996年开发的标准中期待sRGB不是很直观。</p><p id="cf0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要做的第一件事是理解色彩空间。你可以把色彩空间想象成一个测量单位/查找表。iOS的默认色彩空间也被称为sRGB[当然]。但是等等——这个球体中有两个RGB颜色空间，都显示在这里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/1d35d3118749a29425bb28f85bbd47c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V7PIU0Z9W-RwGU57NQIxNg.png"/></div></div></figure><p id="8d86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的是<code class="fe lw lx ly lz b">.sRGBLinear</code>，下面的是<code class="fe lw lx ly lz b">.sRGB</code>。你能看出区别吗？sRGB是一种针对人眼进行了调整的标准，而sRGBLinear则是一种更加数学化的模型。人类在较暗的阴影中比在较亮的阴影中更善于区分差异，这就是为什么当你比较sRGB和sRGBLinear时，你会在较低的线条中看到更多的蓝色。</p><p id="5e9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如已经提到的，苹果在2016年提出了一个新标准。它有比sRGB调色板更大的色域。大多少？维基百科告诉我们是25%。这是一个进步，不用说，照片在那些新手机上看起来更好的原因，但是—</p><p id="1a84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们大多数人仍然在使用sRGB，所以让我们暂时留在那里。好的，要使用sRGB色彩空间定义一种颜色，你可以用这样一条线:</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="059c" class="me mf it lz b gy mg mh l mi mj">let color = Color(.sRGB, red: 1.0, green: 0.0, blue: 0.0, opacity: 1.0)</span></pre><p id="db0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个参数是颜色空间。后面的数字是十进制数字，表示你想要多少颜色，换句话说，就是饱和度。<em class="mk">红色为红色可</em>为红色通道上的1.0。少红色是，嗯…少于1.0…低至0，当然，根本不是红色。现在，如果你想，比如说洋红色—</p><p id="4328" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是事情开始看起来有点像物理课的地方。洋红色是红色、蓝色和绿色的混合物；要获得magenta，您需要使用这样的代码行。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="fa80" class="me mf it lz b gy mg mh l mi mj">let magenta = Color(.sRGB, red: 168/255, green: 57/255, blue: 168/255, opacity: 1.0)</span></pre><p id="56fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这里使用了稍微不同的语法，只是为了说明。你可以用这样的组合得到大约1600万种颜色。</p><p id="0070" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不用说，要使用sRGB，你需要花大量的时间来查找值，以获得你想要的颜色。为了简化这个过程，我在本文的最后整理了一些代码；一会儿再说。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="e01a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是等等——如果查找RGB值听起来太困难，不要担心，iOS还有另一个锦囊妙计。使用色调、饱和度和亮度(或简称HSB)来指定颜色有一个更好的/替代的方法。它并不比新展出的P3更好——只是不同而已。不同，而且我认为，对设计界面的人来说更好，因为这更有意义。例如，要获得品红色，我们可以使用这样的线条。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="c381" class="me mf it lz b gy mg mh l mi mj">let color = Color.init(hue: 300/255, saturation: 0.66, brightness: 0.66, opacity: 1.0)</span></pre><p id="f4c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">HSB方案的美妙之处在于，你对想要的颜色的描述是由一个单一的值命名的，即色调。色调的配色方案本质上是一个颜色轮，这些颜色像彩虹一样组合在一起，以不同的程度标出。所以红色，在这种情况下，是0/360，洋红色是300/360。这与红、绿、蓝的混合相差甚远。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/ed41c34bda89d7dcfec53227c33592cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*Ivt_7AQaW4SmgV9_Or58iw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">度除以360，得到HSB值。</p></figure><p id="0724" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于HSB代码中的饱和数，看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/23661c601e774f0b4e218cbd75c09582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*5iNg0Rzk-A5bSCY8n26v-g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用于颜色中HSB饱和度的值</p></figure><p id="c335" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和HSB代码的亮度值。看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/bb33f77f92d28740205cf1db345bd75e.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*0OoLVFuSLUrifWL5mj88rg.png"/></div></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="75a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，我们有两个方案，都很好，但是你如何在它们之间选择呢？如果你把HSB值作为描述打印出来，它会给出十六进制的RGB。那就是RGB -&gt; HSB。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="1d50" class="me mf it lz b gy mg mh l mi mj"><strong class="lz iu">let</strong> colour2 = Color.init(hue: 300/360, saturation: 0.66, brightness: 0.66, opacity: 1.0)</span><span id="8ca9" class="me mf it lz b gy mv mh l mi mj">...</span><span id="2add" class="me mf it lz b gy mv mh l mi mj">.<strong class="lz iu">onAppear</strong> {<br/>   <strong class="lz iu">print</strong>("colour2 ",colour2.description)<br/>}</span></pre><p id="ed07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以使用类似这样的函数将十六进制值拆分为红色、绿色和蓝色的分量值，尽管我们确实遗漏了饱和度和亮度值。理论上，当选择RGB值时，已经考虑了这些。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="de68" class="me mf it lz b gy mg mh l mi mj"><strong class="lz iu">func</strong> returnComponents(colorToSplit: Color) -&gt; (red: Double, green: Double, blue:Double) {<br/>  <strong class="lz iu">let</strong> hexNumbers = <strong class="lz iu">Array</strong>(colorToSplit.description)<br/>  <strong class="lz iu">let</strong> redColorInHex = <strong class="lz iu">Double</strong>("0x\(hexNumbers[1])\(hexNumbers[2])")!<br/>  <strong class="lz iu">let</strong> greenColorInHex = <strong class="lz iu">Double</strong>("0x\(hexNumbers[3])\(hexNumbers[4])")!<br/>  <strong class="lz iu">let</strong> blueColorInHex = <strong class="lz iu">Double</strong>("0x\(hexNumbers[5])\(hexNumbers[6])")!<br/>  <strong class="lz iu">return</strong> ((red:redColorInHex,green: greenColorInHex,blue: blueColorInHex))<br/>}</span></pre><p id="e50c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要从HSV-&gt; RGB开始，你可以使用这个扩展，假设你已经使用上面的函数将你的RGB值分解成它的分量。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="cb8a" class="me mf it lz b gy mg mh l mi mj">extension Color {<br/>  static func hexColour(hexValue:UInt32)-&gt;Color<br/>  {<br/>    let red = Double((hexValue &amp; 0xFF0000) &gt;&gt; 16) / 255.0<br/>    let green = Double((hexValue &amp; 0xFF00) &gt;&gt; 8) / 255.0<br/>    let blue = Double(hexValue &amp; 0xFF) / 255.0<br/>    return Color(.displayP3, red:red, green:green, blue:blue)<br/>  }<br/>}</span></pre><p id="4b12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不能保证它会完美地工作。当我写这篇文章时，我不确定这是否是Xcode 12 beta的一个特性；只有时间能证明一切。左边的圆圈已经用HSB着色；中心的圆圈用RGB着色，十六进制扩展在这里给出；右边的圆圈已经使用标准RGB进行了着色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9bb150a1d729b1a8f265a022964bde2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*_AnOUtJGxpsNUv84YB5JMg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">RGB/HSB转换</p></figure><p id="bed3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你开始欣赏时，你的眼睛和大脑在这方面比你意识到的要好得多。但是等等RGB值和颜色查找表发生了什么变化？</p><p id="0c19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是——嗯，我之前展示的色轮的改进版本。你点击圆圈，它会打印出找到的RGB值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="edf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在该表扬的地方给点额外的奖励:我用这篇优秀的<a class="ae ky" href="https://medium.com/dwarves-foundation/draw-watch-face-using-swiftui-a863ad347b2c" rel="noopener">文章</a>来帮助我完成最后一点代码。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="ff2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是等等，我们还没完。那些在字里行间读到这句话的人肯定会有更多的问题，心中有一些疑惑。iOS颜色命令的色调、饱和度和亮度比标准的RGB颜色命令好吗？如何显示P3有更多的颜色，但相同的代码参数？什么是扩展的RGB色彩空间，它适合什么？</p><p id="f74b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们再深入一点。</p><p id="d0bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你看它是这样工作的。显示器P3是标准RGB颜色的超集。它在可见色域中具有与标准RGB相同的定位点，但是具有扩展的值范围；这是扩展的RGB色彩空间。下图显示了额外的25%在哪里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/694d1bdfdfba51f2fa4f88a93155ad5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*UHj0UPco7FE-opHS2RKo9w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一张取自2016年WWDC奥运会的图片，运用了色彩。</p></figure><p id="fb80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是好吧——我仍然没有回答这个问题:<em class="mk">我如何在同样的三个参数中加入更多的颜色？</em>答案很简单:当您想要标准RGB范围之外的颜色时，您不使用8位，而是使用每通道16位，并且在1.0以上和0.0以下。</p><p id="17e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不是一个容易找到或最终说明的答案，因为您的显示器需要能够支持显示器P3色域。如果是这样的话，那么这里显示的图像中的圆圈应该看起来不同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/676ad71714db4ee9c4ffc2aad854729d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jhkYiHsmkdSbZad-gqmfzA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">上面的圆圈使用标准的RGB颜色；较低的那些相同，但是在显示器P3色域中。</p></figure><p id="ab47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建这些颜色的代码是什么样的？如果上面的图片不适合您，您可以在自己的应用程序中尝试使用这些代码。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="7745" class="me mf it lz b gy mg mh l mi mj">let rgbRedColor = Color(.sRGB, red: 1.0, green: 0.0, blue: 0.0)<br/>let p3RedColor = Color(.displayP3, red: 1.22486, green: -0.0420312, blue: -0.01964301)</span><span id="36b0" class="me mf it lz b gy mv mh l mi mj">let rgbGreenColor = Color(.sRGB, red: 0.0, green: 1.0, blue: 0.0)<br/>let p3GreenColor = Color(.displayP3, red: -0.0420, green: 1.0419, blue: 0.0)</span><span id="e85d" class="me mf it lz b gy mv mh l mi mj">let rgbBlueColor = Color(.sRGB, red: 0.0, green: 0, blue: 1)<br/>let p3BlueColor = Color(.displayP3, red: -0.0197, green: -0.0786, blue: 1.0979)</span></pre><p id="0d52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从这篇优秀的<a class="ae ky" href="https://stackoverflow.com/questions/45295689/mtkview-displaying-wide-gamut-p3-colorspace/49578887#49578887" rel="noopener ugc nofollow" target="_blank"> SO </a>帖子中提取的数据详细说明了如何计算，并且这篇<a class="ae ky" href="http://endavid.com/index.php?entry=79" rel="noopener ugc nofollow" target="_blank">页面</a>也是一篇优秀的参考。这里有一个应用程序向您展示更多的显示p3颜色，<a class="ae ky" href="https://apps.apple.com/us/app/palettist/id1366574054" rel="noopener ugc nofollow" target="_blank"> palettist </a>。这是一张包含8036951种颜色的图像，几乎占RGB色域的48%。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/e41ace844c0857ed8ebffadc972db2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*-5YhvfHSUNVO6ja19isAVw.png"/></div></div></figure><p id="203d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢读这篇文章，就像我喜欢写它一样</p><p id="c82d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>