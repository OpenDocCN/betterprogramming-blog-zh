<html>
<head>
<title>Web Vitals: What Are They and How to Measure Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络生命:它们是什么，如何衡量它们</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/web-vitals-guide-b56e28798e7f?source=collection_archive---------14-----------------------#2021-07-27">https://betterprogramming.pub/web-vitals-guide-b56e28798e7f?source=collection_archive---------14-----------------------#2021-07-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><h2 id="98f3" class="is it iu bd b dl iv iw ix iy iz ja dk jb translated" aria-label="kicker paragraph"><a class="ae ep" href="https://rakiabensassi.medium.com/list/software-engineering-7a179a23ebfd" rel="noopener">网页性能</a></h2><div class=""/><div class=""><h2 id="27d1" class="pw-subtitle-paragraph ka jd iu bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">谷歌用来影响你的网络应用排名的基本性能指标指南</h2></div><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/ce0f96f502891aedaf2603cb356ab989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mj9G84liaPTTDED-p-1yqg.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">核心网站生命体征(<a class="ae li" href="https://www.youtube.com/watch?v=evrNn54UkHQ&amp;list=RDCMUCnUYZLuoy1rq1aVMwx4aTzw&amp;index=7" rel="noopener ugc nofollow" target="_blank">原始图片来源</a></p></figure><p id="44c7" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">杰克是一名年轻的软件工程师，他热爱自己的工作。一天早上，当他坐在桌子上把头放在拳头上休息时，他想到了一个绝妙的主意，一个新的web应用程序可以让他获得巨大的突破。他感到非常热情，没有浪费时间，他就开始了这个项目的工作。每天，他都长时间坐在电脑前，用手指在键盘上敲击。他实现了复杂的功能，修复了棘手的错误，并不断清理代码以提高其质量。</p><p id="88ac" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">他也知道网页性能有多重要——缓慢的网页让用户感到沮丧，让他们不太可能停留下来，尽管他们等待Gmail这样的应用程序，有时需要6秒或更长时间才能加载。但他的应用不是Gmail，因此他应该提供更好的体验，加载时间更短。</p><p id="b48f" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">他彻夜不眠，研究这个问题，并采用了如下技术:</p><ul class=""><li id="6cd1" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">推迟JavaScript的工作，</li><li id="2e87" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">懒惰装载，</li><li id="950f" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">异步脚本加载器，</li><li id="2ff2" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">客户端渲染，</li><li id="ea40" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">和动态内容。</li></ul><p id="f9df" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">几个月过去了，Jack对完成实施后上线感到非常兴奋。他启动了与FTP服务器的连接，并成功进行了部署。</p><p id="2bb4" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">部署几周后，他收到了沮丧的用户的反馈，他们对应用程序的响应不满意。当他们试图点击特定的按钮时，一些后期加载和渲染的内容按下了重要的按钮:</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj mt"><img src="../Images/ac400fc71d640aa1c6701a46f4cba5ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/0*rMeFCAiuhI50Vn86.gif"/></div><p class="le lf gk gi gj lg lh bd b be z dk translated">累积布局偏移示例</p></figure><p id="ff1f" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">谷歌也惩罚了杰克，在搜索结果页面上把他的排名降了下来。</p><p id="c4c6" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">杰克很困惑；他的应用程序有一个非常有竞争力的页面加载时间，他对此感到自豪。但是他没有注意到的是，页面加载并不能完全反映一个网站是否感觉<strong class="ll je"> <em class="mu">快</em> </strong>。更糟糕的是，他所采用的技术，如延迟加载、异步内容和动态组件，通常会改善页面加载时间，但从最终用户的角度来看，会带来更慢的体验。</p><p id="a907" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">这是一个陡峭的斜坡，可能会导致不好的结局。杰克很伤心，他的心都碎了。但他想修复他的应用程序。</p><p id="0e81" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">在接下来的部分中，我们将向他解释他所忽略的三个基本性能指标，并展示衡量和理解它们的不同技术，这样他就可以开发出健康的应用程序，而无需成为web性能专家。</p><p id="ad78" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果你想锻炼你的网络表现肌肉，你可以加入我们，和杰克一起学习。</p><pre class="kt ku kv kw gu mv mw mx my aw mz bi"><span id="d343" class="na nb iu mw b gz nc nd l ne nf"><strong class="mw je">Table of Contents</strong></span><span id="3d60" class="na nb iu mw b gz ng nd l ne nf"><a class="ae li" href="#b604" rel="noopener ugc nofollow">Why PageLoad Time Is Not Enough?</a><br/><a class="ae li" href="#5e81" rel="noopener ugc nofollow">The Core Web Vitals</a><br/>   ∘ <a class="ae li" href="#a1b7" rel="noopener ugc nofollow">Largest Contentful Paint (LCP)</a><br/>   ∘ <a class="ae li" href="#9d05" rel="noopener ugc nofollow">Cumulative Layout Shift (CLS)</a><br/>   ∘ <a class="ae li" href="#ea20" rel="noopener ugc nofollow">First Input Delay (FID)</a><br/><a class="ae li" href="#0e9e" rel="noopener ugc nofollow">How to Gather These Metrics?</a><br/>   ∘ <a class="ae li" href="#421c" rel="noopener ugc nofollow">Lab data</a><br/>   ∘ <a class="ae li" href="#d3f1" rel="noopener ugc nofollow">Field data</a><br/><a class="ae li" href="#36b7" rel="noopener ugc nofollow">Interpreting Performance Data</a><br/>   ∘ <a class="ae li" href="#35f8" rel="noopener ugc nofollow">The average</a><br/>   ∘ <a class="ae li" href="#2e2c" rel="noopener ugc nofollow">Percentiles</a><br/><a class="ae li" href="#a027" rel="noopener ugc nofollow">Case Study: Edeka</a><br/><a class="ae li" href="#264e" rel="noopener ugc nofollow">Final Thought</a></span></pre></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="b604" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">为什么页面加载时间不够？</h1><p id="9ea4" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">今天，我们不能再使用单一指标来了解性能或确保网页快速，因为它可能以不同的方式变慢:</p><ul class=""><li id="e199" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">启动缓慢</li><li id="5bf6" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">完成缓慢</li><li id="d5cb" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">反应迟钝</li><li id="a33a" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">跳来跳去</li><li id="2249" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">更多</li></ul><p id="9885" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果你打开任何网站Chrome DevTools中的Lighthouse选项卡，然后点击“生成报告”按钮，你可以在“性能”部分看到6个指标。这些指标通常被流行的性能工具所使用。</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ok"><img src="../Images/c4f907389af784942afed62b27db223e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ikar25oTTwCwxVlzP2TMLw.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">6个常见的web性能指标(图片由作者提供)</p></figure><p id="ee26" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">但为了避免迷失在DevTools、Google Analytics和其他平台提供的所有指标中，Google引入了Web Vitals，帮助开发人员专注于一些基本分数，以提供出色的用户体验。</p></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="5e81" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">核心网络活力</h1><p id="6b83" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">核心网站要素描述了缓慢的性能影响网页的不同方式。谷歌将它们作为搜索排名因素。</p><div class="kt ku kv kw gu ab cb"><figure class="ol kx om on oo op oq paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/1420faac0b7ae5a8b0f0fe8ffd7be5c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Z-u4cLuw-1uABXYQ4ibX8A.png"/></div></figure><figure class="ol kx om on oo op oq paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/9accf1c5fbaa0dc8d292ca7122c7f8b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ukqRe2hMvWAYykLkfobgIQ.png"/></div><p class="le lf gk gi gj lg lh bd b be z dk or di os ot translated">2020年，<a class="ae li" href="https://blog.chromium.org/2020/05/introducing-web-vitals-essential-metrics.html" rel="noopener ugc nofollow" target="_blank">谷歌推出了</a>一套衡量网站实际表现的指标(web vitals)。(原始图像来源)</p></figure></div><h2 id="a1b7" class="na nb iu bd np ou ov dn nt ow ox dp nx ls oy oz nz lw pa pb ob ma pc pd od ja bi translated">最大含量涂料(LCP)</h2><p id="ce0c" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">有些网页看起来加载很快，但所有有意义的内容仍在等待加载。大型内容可以是在UI中占据大量空间的任何元素(文本或图像)。</p><p id="003d" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">最大内容绘画是指浏览器需要多长时间才能将最大量的内容呈现到屏幕上，以便用户可以相信页面是有用的。</p><p id="d653" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">LCP不良的原因:</strong></p><ul class=""><li id="2bf3" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">缓慢的服务器响应时间</li><li id="93ed" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">呈现阻塞JavaScript和CSS</li><li id="3354" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">缓慢的资源加载时间</li><li id="8afb" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated"><a class="ae li" rel="noopener ugc nofollow" target="_blank" href="/programming-buzzwords-9e94a3544eed">客户端渲染</a></li></ul><blockquote class="pe"><p id="2fb2" class="pf pg iu bd ph pi pj pk pl pm pn me dk translated">您的LCP应小于<strong class="ak"> 2.5秒</strong>且不大于<strong class="ak"> 4.0秒</strong>。</p></blockquote><h2 id="9d05" class="na nb iu bd np ou po dn nt ow pp dp nx ls pq oz nz lw pr pb ob ma ps pd od ja bi translated">累积布局偏移(CLS)</h2><p id="ab58" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">你可能还记得一些网页不停地移动，画出新的内容，把你想与之互动的东西推下去。这些网页有很多布局变化。</p><p id="fb69" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">每当添加到页面的新元素移动其他元素的位置时，就会发生布局移动，例如在您想要阅读的文本或您想要点击的按钮上呈现的广告。大量的异步内容增加了布局变化的次数。</p><p id="8eb7" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">累积布局偏移(CLS)是页面上发生的影响用户体验的所有布局偏移的总和。以下布局变化不计入CLS:</p><ul class=""><li id="f207" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">布局在这些用户输入之后改变:点击和轻击、按键、调整视口大小。</li><li id="f592" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">用户输入500毫秒内发生的布局变化。</li><li id="4c73" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">折叠下方<a class="ae li" href="https://bettermarketing.pub/digital-marketing-buzzwords-2eefd685c54a" rel="noopener ugc nofollow" target="_blank">的不可见布局偏移。</a></li></ul><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj pt"><img src="../Images/2b1fdca0f6ac85f4afda57e32f8a13e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1dTKgxNNSUB9OaE8ijD0tw.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">布局偏移只有在可见时才计入CLS(原始图像source⁴)</p></figure><p id="d5fe" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">CLS差的原因:</strong></p><ul class=""><li id="efcb" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">没有尺寸的图像</li><li id="f1d2" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">无尺寸的广告、嵌入、iFrames</li><li id="da61" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">动态注入的内容</li><li id="4b50" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">导致FOIT/FOUT的网络字体</li></ul><p id="a3be" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">要提高CLS，您需要:</p><ul class=""><li id="5cb1" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">避免在用户看到内容后移动内容，并尽量减少后期呈现的内容。</li><li id="4883" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">为你的<a class="ae li" rel="noopener ugc nofollow" target="_blank" href="/angular-library-dynamic-stepper-2ba05ab40228">动态内容</a>预留足够的空间，比如广告或宣传片。</li><li id="6c58" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">在现有内容之上插入新内容，以防它是对用户交互的响应。</li></ul><blockquote class="pe"><p id="d8cb" class="pf pg iu bd ph pi pj pk pl pm pn me dk translated">你的CLS分数应该少于0.1秒，不差于0.25秒。</p></blockquote><h2 id="ea20" class="na nb iu bd np ou po dn nt ow pp dp nx ls pq oz nz lw pr pb ob ma ps pd od ja bi translated">第一输入延迟(FID)</h2><p id="aee7" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">如果你的网页加载了大量的<a class="ae li" rel="noopener ugc nofollow" target="_blank" href="/javascript-history-and-future-71b0ceb737aa"> JavaScript </a>、跟踪像素和资产依赖，你必须记住这些资产中的每一个都必须被下载、解析、编译、执行和绘制。如果当用户第一次尝试使用您的页面时，浏览器忙于完成这项工作，那么在它能够处理用户输入或触发单击事件之前，会有一个延迟。</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="pu pv l"/></div></figure><p id="6d62" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">首次输入延迟(FID)衡量这种延迟，即当用户首次尝试与页面交互时，页面忙碌的时间。这个指标不是指事件处理程序代码，而是指浏览器因为忙而延迟处理事件的时间。</p><p id="ac9d" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">开发人员通常通过显示一个微调器(加载屏幕)来解决这个问题，直到内容准备好，但是这种方法延迟了第一次输入，而不是解决加载大量内容的问题。</p><p id="01ae" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">FID不良的原因:</strong></p><ul class=""><li id="1272" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">长期任务</li><li id="e24c" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">JavaScript执行时间长</li><li id="c642" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">大型JavaScript包</li><li id="f9f0" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">呈现阻塞JavaScript</li></ul><blockquote class="pe"><p id="2b50" class="pf pg iu bd ph pi pj pk pl pm pn me dk translated">你的FID应该<strong class="ak">小于100毫秒</strong>且不差于<strong class="ak"> 300毫秒</strong>。</p></blockquote></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="0e9e" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">如何收集这些指标？</h1><p id="74b2" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">衡量web性能有不同的方法，它们返回不同的结果，解决不同的问题。但是他们使用两种主要技术:合成监控和真实用户监控。</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj pw"><img src="../Images/28b57338bf1dd2865bd92d32ddc402cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W76lODCILaFbJ7TkqeqhKA.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">实验室测量和现场测量工具</p></figure><h2 id="421c" class="na nb iu bd np ou ov dn nt ow ox dp nx ls oy oz nz lw pa pb ob ma pc pd od ja bi translated">综合监控</h2><p id="6622" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">合成监控是一种模拟真实用户从网络上的指定位置与您的网站进行交互的方法。用这种方法收集的数据被称为<strong class="ll je">实验室数据</strong>，因为它测量的是连接到网络的已知设备的<a class="ae li" rel="noopener ugc nofollow" target="_blank" href="/angular-onpush-change-detection-f629cbce0bfa">性能</a>，而不是任何用户的实际性能。这是对性能的估计。</p><p id="7ca2" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">综合监控有助于在问题影响您的最终用户之前发现并解决问题，还有助于监控复杂的交易和业务流程。</p><p id="56a4" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">可以使用以下工具进行综合测试:</p><ul class=""><li id="e49b" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">Lighthouse —在<a class="ae li" rel="noopener ugc nofollow" target="_blank" href="/build-me-an-angular-app-with-memory-leaks-please-36302184e658"> Chrome DevTools </a>上可用。</li><li id="5844" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">网页测试</li></ul><h2 id="d3f1" class="na nb iu bd np ou ov dn nt ow ox dp nx ls oy oz nz lw pa pb ob ma pc pd od ja bi translated">真实用户监控</h2><p id="2e42" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">真实用户监控(RUM)通过描述终端用户在运行的网站上体验到的实际性能，避免了猜测。它捕获并分析每个用户<em class="mu">的每个</em>交易<em class="mu">。用这种方法收集的数据称为<strong class="ll je">现场数据</strong>。</em></p><p id="c5f9" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">RUM可以很容易地确定问题出在哪里。它可以揭示如下场景:</p><ul class=""><li id="6225" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">一个用户在结帐过程进行到一半时，点击了另一个页面。</li><li id="04a3" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">否则几乎不可能提前预测和测试的意外行为。</li></ul><p id="9ea0" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">RUM工具包括:</p><ul class=""><li id="6a4c" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated"><a class="ae li" href="https://javascript.plainenglish.io/google-search-console-api-8b13128da267" rel="noopener ugc nofollow" target="_blank">谷歌搜索控制台</a></li><li id="6d3e" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">症结:Chrome用户Experience⁵</li></ul><p id="5c1a" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">您还可以使用GitHub上的<code class="fe px py pz mw b"><a class="ae li" href="https://github.com/GoogleChrome/web-vitals" rel="noopener ugc nofollow" target="_blank">web-vitals</a></code>库来测量和记录您真正的核心网络生命体征。下面是如何使用它的一个简单示例:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="qa pv l"/></div><p class="le lf gk gi gj lg lh bd b be z dk translated">使用web-vitals库监控真实用户的核心web vitals指标</p></figure></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="36b7" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">解释性能数据</h1><p id="0671" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">因为现场数据包括每个网站用户的数据，所以会生成大量数据，但并非所有数据都是相关的。为了理解这个结果，您将使用<em class="mu">统计数据。</em></p><h2 id="35f8" class="na nb iu bd np ou ov dn nt ow ox dp nx ls oy oz nz lw pa pb ob ma pc pd od ja bi translated"><strong class="ak">平均值</strong></h2><p id="37b1" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">计算平均值是理解数据集的简单方法。但是由于不寻常的性能分布，平均值可能会产生误导。例如，如果六个用户体验了99、97、95、65、63和60的性能，平均值将是<strong class="ll je"><em class="mu">【80】</em></strong>，这是一个很好的百分比，而实际上，该网站一半的用户表现很差。</p><h2 id="2e2c" class="na nb iu bd np ou ov dn nt ow ox dp nx ls oy oz nz lw pa pb ob ma pc pd od ja bi translated">百分位数</h2><p id="c5b7" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">在性能测量中，我们经常使用“<em class="mu">最多用户</em>”、“<em class="mu">典型用户</em>”和“<em class="mu">最差用户</em>”的性能指标。或者，p50、p75和p95分数:</p><ul class=""><li id="bada" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">p50是第50个百分点，因为50%的用户体验更快，得分更高。p50又称<strong class="ll je"> <em class="mu">中位数</em> </strong>。</li><li id="4ebf" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">p75是第75百分位。</li><li id="76c7" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">p90是第90百分位。</li></ul></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="a027" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">案例研究:Edeka</h1><p id="bf4b" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">下面是一个从CrUX查询德国食品供应商origin <a class="ae li" href="https://www.edeka.de/" rel="noopener ugc nofollow" target="_blank"> Edeka </a>的核心Web Vitals stats (p75)的例子。将返回从2020年1月1日开始的数据:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="qa pv l"/></div><p class="le lf gk gi gj lg lh bd b be z dk translated">使用BigQuery从CrUX返回真实用户的性能指标</p></figure><p id="12d4" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">我们可以通过使用<code class="fe px py pz mw b">device_summary</code>表而不是<code class="fe px py pz mw b">metrics_summary</code>表来进一步分析上面的结果，以便查看使用特定设备(<code class="fe px py pz mw b">desktop</code>或<code class="fe px py pz mw b">phone</code>)的用户的百分比:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="qa pv l"/></div><p class="le lf gk gi gj lg lh bd b be z dk translated">使用BigQuery从CrUX返回每个设备的真实用户性能指标拆分器</p></figure><p id="3132" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">这是结果的摘录:</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj qb"><img src="../Images/3337584c85847e34070dc5810ff51f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mG4YIp9XeFSZ1c6spqarVA.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">自2020年以来，每台设备的网络生命体征(LCP、FID、CLS)来自Edeka的CrUX(图片由作者提供)</p></figure><p id="64f7" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">你可以自己尝试使用BigQuery从Chrome UX报告中挖掘不同来源、设备和日期的深刻数据。</p><p id="f5a2" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">在下面的视频中，我展示了如何使用3种工具来衡量Edeka的Web Vitals性能指标:</p><ul class=""><li id="c478" class="mf mg iu ll b lm ln lp lq ls mh lw mi ma mj me mk ml mm mn bi translated">Chrome DevTools(灯塔和性能时间线)，</li><li id="1cfc" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">网页测试，</li><li id="3413" class="mf mg iu ll b lm mo lp mp ls mq lw mr ma ms me mk ml mm mn bi translated">和BigQuery从Chrome用户体验报告(CrUX)中获取结果。</li></ul><p id="cad2" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">使用DevTools和WebPageTest，我检查了实验室数据，但使用CrUX，我收集了真实用户的指标(现场数据):</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="pu pv l"/></div></figure></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="cf80" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">最终想法</h1><p id="03b3" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated">就像许多开发人员一样，您可能已经使用或见过许多工具来度量性能，并且发现工具和度量标准的丰富性很难跟上。核心Web Vitals旨在简化景观，并帮助您关注最重要的指标:最大内容油漆(LCP)、累积布局偏移(CLS)和首次输入延迟(FID)。</p><p id="0ddf" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">我希望通过今天的解释，您可以更轻松地了解不同的性能监控技术，并针对您的情况使用正确的解决方案。</p></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><p id="91e6" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">🧠💡我为一群聪明、好奇的人写关于工程、技术和领导力的文章。<a class="ae li" href="https://rakiabensassi.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll je">加入我的免费电子邮件简讯，独家获取</strong> </a> <strong class="ll je"> </strong>或在此注册Medium<a class="ae li" href="https://rakiabensassi.medium.com/membership" rel="noopener"/>。</p></div><div class="ab cl nh ni hy nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="in io ip iq ir"><h1 id="e674" class="no nb iu bd np nq nr ns nt nu nv nw nx kj ny kk nz km oa kn ob kp oc kq od oe bi translated">参考</h1><p id="4afa" class="pw-post-body-paragraph lj lk iu ll b lm of ke lo lp og kh lr ls oh lu lv lw oi ly lz ma oj mc md me in bi translated"><a class="ae li" href="http://youtube.com/watch?v=AQqFZ5t8uNc&amp;list=RDCMUCnUYZLuoy1rq1aVMwx4aTzw&amp;index=1" rel="noopener ugc nofollow" target="_blank">针对核心网站重要指标进行优化</a></p><p id="055d" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><a class="ae li" href="https://www.youtube.com/watch?v=WxYpdw5ELrU&amp;list=RDCMUCnUYZLuoy1rq1aVMwx4aTzw&amp;index=3" rel="noopener ugc nofollow" target="_blank">使用网络生命体征优化交互性(FID/TBT) </a></p><p id="f5e6" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><a class="ae li" href="https://requestmetrics.com/web-performance/measure-web-performance" rel="noopener ugc nofollow" target="_blank">衡量2021年的网络表现</a></p><p id="33e4" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">⁴ <a class="ae li" href="https://www.youtube.com/watch?v=IB3e8SAdBaE&amp;list=RDCMUCnUYZLuoy1rq1aVMwx4aTzw&amp;index=7" rel="noopener ugc nofollow" target="_blank">解决常见的网络问题</a></p><p id="e306" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">⁵ <a class="ae li" href="https://developers.google.com/web/tools/chrome-user-experience-report/" rel="noopener ugc nofollow" target="_blank"> Chrome用户体验报告</a></p><p id="5fd1" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">⁶ <a class="ae li" href="https://www.youtube.com/watch?v=YGcA-h4YM6w" rel="noopener ugc nofollow" target="_blank">在BigQuery上掌握Chrome UX报告</a></p></div></div>    
</body>
</html>