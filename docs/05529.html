<html>
<head>
<title>Crafting Software With Care</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">精心制作软件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/crafting-software-with-care-7fde33c85ab3?source=collection_archive---------15-----------------------#2020-07-15">https://betterprogramming.pub/crafting-software-with-care-7fde33c85ab3?source=collection_archive---------15-----------------------#2020-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a3c1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建和维护持久、干净的代码库的有用技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4cf00d6086e19927507d9e3b44b71686.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mppqhk4FLN4Z24KUxhT8A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/pottery?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@momentance?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> SwapnIl Dwivedi </a>拍摄的照片</p></figure><p id="4641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名程序员，你是否会因为编写糟糕的代码或不经测试就推送代码而感到内疚？我也是…还有我认识的所有人。</p><p id="5f1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，作为一名开发人员，我不得不同情自己，因为时间紧迫，允许未经测试的代码溜进来。其他时候，我认为我是在取悦那些认为急功近利意味着以质量为代价的更快交付的经理。</p><p id="afac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不管是什么原因，这是我们开发人员通过添加或批准难闻的、未经测试的代码来自掘坟墓。在这样的环境中，技术债务很快就会堆积起来，形成遗留代码的热意大利面条般的混乱。我想光是想想就出了一身汗。</p><p id="11fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从事开发已经足够长的时间了，我明白一流的代码质量和纪律是通向可持续发展的必经之路。所以在这里，我向你们展示我对软件<em class="lv">工匠</em>(不，不是<em class="lv">工匠——人船)的发现！</em>)。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5a28" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">关心你的手艺</h1><p id="f450" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先也是最重要的，关心你所做的事情。当你关心时，它会反映在你的工作中。如果你不关心代码的质量，其他人也不会关心。工程师是代码库的所有者。日复一日，我们所做的就是添加和删除代码。对于大多数旁观者来说，代码是一个谜。</p><p id="6ab2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个精心制作的、易于维护的、干净的代码库是每个开发人员的梦想。我开始时的许多代码库都有前辈留下的大量技术债务。有些是由自由职业者搞砸的，有些是由开发人员搞砸的，他们没有足够努力来优先处理技术债务。</p><p id="c1dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，管理人员没有理解这样一个事实，即优先考虑技术债务对于平稳、不间断的开发是至关重要的——这在未来节省了时间和精力。这是一项长期投资。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="aa98" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">善待开发者大会</h1><p id="dfc5" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我推荐一个至少有两个(或更多)开发人员的团队，总是写下wiki或概念页面中使用的标准原则和实践。当你们开始一起工作时，它可以避免很多不便和冒犯。</p><p id="d222" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有一个要点，我转换成博客加班<a class="ae ky" href="https://medium.com/@badrobot/android-developer-good-practices-kotlin-5efa6f54fb38" rel="noopener">在这里</a>。每当我与新的开发人员一起工作时，我都会从我的列表中继承一些好的模式，并接受那些对他们有意义的新模式。这提供了一个机会来谈论你的好恶，并定制标准实践来适应你的代码库的需要。</p><p id="429b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比方说，在命名测试的特定场景中，人们对需要做什么感到困惑。你可以回去在你的维基页面上查找。如果您没有发现这一点，请与团队讨论，并随意添加。</p><p id="9b28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让这份文件成为你的事实来源，这样你就可以在任何冲突中指向团队协议。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b2fc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">棘手的解决办法=滑坡</h1><p id="1abe" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">古怪的变通方法会引诱你，吞没你，让你孤立无援。就像你不会把任何有毒的东西放进你的身体，不要把任何粗糙的东西放进代码库。</p><p id="7f23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">堆栈溢出的黑客解决方案快速、闪亮且诱人。但是如果你不明白为什么它是这样，它可能是有毒的，在最坏的情况下，证明对你的代码库有害。不要走那条路——那是一条不归路。追根究底。尽可能不要查看堆栈溢出，而是从可靠的来源阅读文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/741208e2d5f33d15ecc4b6af2fb147ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8z2R3QUsObwrDDdvvYBQog.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者插图</p></figure><p id="6659" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不正规的解决方案有时会很有用，但是要根据你的需要来修改它们。绝对避免复制粘贴。</p><p id="73c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在网上遇到的大部分解决方案都是手写的，没有经过测试。不要错误地认为在网上回答问题的人是专家。花些时间去调试根本原因，你会找到解决方案的。</p><p id="bfb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这也是确定是否需要结对编程的一个很好的例子。当你遇到这种困境时，多一双眼睛会很有帮助。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6366" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">遵循严格的审查政策</h1><p id="3ad3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先要做的是:</p><p id="c068" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查您的检查流程。</p><p id="d6ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说真的，这不是为了双关语。您的同行评审过程可能是阻止您拥有一个令人敬畏的开发环境的罪魁祸首。</p><p id="d1fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从仔细检查你的代码审查过程开始。每当有人不遵守过程时就记下来，并在代码审查期间提供建设性的反馈。不要网开一面，听之任之。此外，避免仅仅因为沉没成本谬论或开发商要求你批准PR的诱惑。</p><p id="ce94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的代码需要一个严格的审查过程来检查好的编码约定。有一个PR模板来加强强制性和可选的清单项目——比如功能的截屏，发布PR前的自我审查，特殊边缘情况下的单元测试，Android Studio的代码覆盖截屏，或者向GitHub添加Codecov这样的插件。只要对你的团队有用。</p><p id="51f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保毫不犹豫地评论某些变化成为一种规范。此外，一定要欣赏好的工作或主动性。这对建立良好的团队士气大有帮助。</p><p id="388f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">团队拥有代码库，并指出错别字、错误、可能的缺陷等。是审稿人的工作。尽可能让至少两个人审查代码。走向一个干净的代码库的第一步是确保在任何给定的时间点，尽可能少或者不添加潜在的技术债务。公关流程在实现这一目标的过程中起着至关重要的作用。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="39bf" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">测试不是可选的</h1><p id="56c9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">想听听我对推送未测试代码的看法吗？</p><p id="4be4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要这样做。</p><p id="1de8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不经测试就批准一个PR让我很痛苦。根据我的经验，我也见过有十年经验的开发人员这样做。不要降低你的标准，让不好的做法悄悄进来。</p><p id="97e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，你被要求最初只写几个特性，你认为这个项目永远不会回来了，所以你交付了一个没有测试的产品。可惜有一天，项目<em class="lv">确实</em>回来了。现在，您没有文档，因为它是在匆忙中完成的(几乎总是发生)，并且不能依靠您的记忆来记住需求是什么，所以基本上您处于困境中。</p><p id="cc7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试是记录业务需求的唯一最有效的方法。</p><p id="a996" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">理想情况下，您的代码应该经过严格的测试，包括验证业务逻辑的测试、与API和持久层的集成，以及UI/验收测试。</p><p id="fb81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不能总是用测试覆盖100%的代码库，但是至少你可以确保你添加了单元测试来覆盖大部分的业务逻辑。当代码变更或测试中断时，您将知道发生了什么变化，并能够根据新的需求重写测试。</p><p id="d84f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试驱动开发是你如何确定你的代码正在做你被要求做的事情。它可以被视为代码库的官方文档。这也是你在长期保养过程中，让自己免于麻烦的方法。</p><p id="88f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的代码没有测试。让它达到一种状态，在这种状态下，您可以为重要的逻辑编写一些测试。</p><blockquote class="nb nc nd"><p id="b24e" class="kz la lv lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">"好的设计是可测试的，不可测试的设计是不好的."</p><p id="245f" class="kz la lv lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">— Michael C. Feathers，“有效地使用遗留代码”</p></blockquote></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4241" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">重构遗留代码</h1><p id="c454" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">据我所见，即使是最优秀的精英在听到<em class="lv">重构这个词时也会翻脸。</em>这是管理人员从开发人员那里听到的最可怕的话。我以前甚至因为公开代码库的状态和谈论代码库中导致开发过程缓慢的主要挫折而受到惩罚。</p><p id="2bf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些经理不想听到哪里出了问题，而是希望持续的可交付成果不受影响。这让我想起了我偶然发现的漫画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/575f18851d555c937719bfefdab8d02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWI6MoWuLB3NESk0gqwPLg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">插图作者:<a class="ae ky" href="https://vincentdnl.com/" rel="noopener ugc nofollow" target="_blank">文森特·德尼尔</a></p></figure><p id="ae6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我是一名土木工程师，我的生活可能会简单得多。这个问题很容易解释。</p><p id="52c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可悲的是，管理者不懂代码。你不能指着一段代码说，“这部分坏了，需要修复，否则我们不能构建这个特性。”当我这么做的时候，我听到一位经理说，“绕过它。”你不能在坏掉的东西周围工作。如果你这样做，只会增加更多的技术债务。</p><p id="3251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">务实地重构代码。必要时，花点时间摆脱紧迫的技术债务。处理遗留代码并不容易，但是必须要做。说服任何人优先考虑技术债务。</p><p id="eab6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我很快意识到保持沉默是没有用的。拥有发言权并对自己的技术负责对保持理智至关重要——它会让你离漂亮的代码更近一步。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1983" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">做正确的事</h1><p id="ba67" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对糟糕的编码实践最常见的反应是屈服。等待别人做某事，因为这很简单。但是简单不会让你的工作变得更简单。</p><p id="6f23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你知道有些东西不应该在那里的时候，把它扔掉。当你知道某件事需要解决时，就去做。与关心的人交流和合作，帮助你做正确的事情。有效地完成工作需要一个人能够批判性地与他人谈判。</p><p id="1532" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">做你的研究。看书。出现在社区中。与其他专业开发人员交流。不惜一切代价。拓宽你想关注的事情的知识面。分析所有大大小小的问题，想出一个可行的计划，与你当前的过程很好地结合起来。</p><p id="4170" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在一天结束时，通过令人信服、合作和沟通，你将离实现目标更近一步。因为...开发是一项只能通过协作来完成的工作。沟通是关键。</p><p id="6ae4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从“用户必须能够登录”到用户真正能够登录网站或应用程序，需要密集的协作努力。</p><p id="4b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我想说，我鼓励你做正确的事情。相信我:做正确的事是好事。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="10df" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">最后的想法</h1><p id="813c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">即使是最好的、维护良好的代码库，如果不继续精心制作，也会开始积累技术债务。发展是一个旅程，而不是目的地。</p><p id="cade" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的代码库易于阅读、理解和修改。一个开发人员有责任关心你的同伴和继任者的代码库和健康。我们都知道读坏代码有多讨厌。</p><p id="0af4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关心编写干净代码的开发人员确实是独一无二的。他们痴迷于不断学习和提高。虽然这看起来很基本，但对于工程来说，这是一个非常困难的壮举。我对这些充满爱心的灵魂致以诚挚的敬意。</p><p id="a8b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">真正关心自己技术的工程师有一些特别之处——他们只是让每个人的生活变得更好。</p></div></div>    
</body>
</html>