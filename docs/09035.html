<html>
<head>
<title>How To Structure a Massive Vuex Store for a Production App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为生产应用构建大规模Vuex商店</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-structure-a-massive-vuex-store-for-a-production-app-f4bf84018409?source=collection_archive---------4-----------------------#2021-07-09">https://betterprogramming.pub/how-to-structure-a-massive-vuex-store-for-a-production-app-f4bf84018409?source=collection_archive---------4-----------------------#2021-07-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e22a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">深入了解一家拥有1000多家酒店的商店</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/186a336f7bf6e6b3f2fdfe64dad4dc59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ebZDQ3Ad_8WgDfh-QjivRA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@carrier_lost?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">伊恩·泰勒</a>在<a class="ae ky" href="https://unsplash.com/s/photos/cargo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="508b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在看Vuex教程的时候，你可以看到大部分都很简单。</p><p id="e40a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">逻辑解释得很好，但是可伸缩性受到影响。这将如何在我的生产应用中发挥作用？</p><p id="1b75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个来自<a class="ae ky" href="https://vuex.vuejs.org/guide/#the-simplest-store" rel="noopener ugc nofollow" target="_blank"> Vuex官方文档</a>的简单商店示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单的商店</p></figure><p id="dec8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个没必要解释。我假设你在这篇文章之前已经有一些关于<a class="ae ky" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue </a>和<a class="ae ky" href="https://vuex.vuejs.org/#what-is-a-state-management-pattern" rel="noopener ugc nofollow" target="_blank"> Vuex </a>的知识。</p><p id="baa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的目标不是解释什么是存储、状态或突变。</p><p id="efc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，我想向您展示一个拥有1000多个状态属性、变异、动作和获取器的大型存储库。</p><p id="0141" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想教你如何构建存储，以获得最佳的可维护性、可读性和可重用性。</p><p id="8d0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它可以有100，000+个属性。它仍然是清楚的。</p><p id="3970" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="e586" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">会议模块</h1><p id="03d2" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">正如我们已经说过的，将所有内容保存在一个文件中会造成混乱。你不想要50，000+ LOC文件。这和把你的应用放在一个组件里是一样的。</p><p id="8295" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Vuex通过将商店分成模块来帮助我们。</p><p id="ad1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我将创建一个包含两个模块的商店。注意，对于100多个模块，以及每个模块中的100多个动作、获取器和变异，过程是相同的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更新的商店</p></figure><p id="a7e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">属性在这里非常重要。如果没有它，动作、变异和getters仍然会在全局名称空间中注册。</p><p id="e119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过将<code class="fe nb nc nd ne b">namespaced</code>属性设置为true，我们也将动作、突变和获取器划分到模块中。</p><p id="b015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有两个同名的动作，这真的很有帮助。将它们放在全局名称空间中会产生冲突。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命名空间模块</p></figure><p id="0722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，该模块现在完全是“本地”的。我们只能通过状态上的用户对象来访问它。</p><p id="84d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这正是我们大规模应用程序所需要的。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="1632" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">酷，现在我们有一个分成模块的商店了！</p><p id="48e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我不喜欢硬编码的动作字符串。肯定不可维护。让我们来解决这个问题。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="cf06" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">让你远离头痛的类型</h1><p id="10b8" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们不只是想访问每个文件中每个模块的每个属性。那句话听起来像地狱。</p><p id="1131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们想先导入它们。使用<code class="fe nb nc nd ne b">mapGetters</code>、<code class="fe nb nc nd ne b">mapActions</code>或<code class="fe nb nc nd ne b">mapMutations</code>来实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用mapActions访问操作</p></figure><p id="adff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这让您可以清楚地看到Vue文件使用的商店属性。</p><p id="1b18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但这还不够。一切都还在一个文件里。让我们看看我们能做些什么来适当地扩展它。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="b743" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">文件夹结构</h1><p id="5d78" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">理想情况下，我们希望将模块拆分到不同的文件夹中。在这些模块中，我们希望将它们的突变、动作、getters、状态属性和类型划分到不同的文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/d9c07ef8edacc3bce75d05ae81605f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*KdhHD_xs1yuaeCbC-TmT9A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">所需的文件夹结构</p></figure><p id="7287" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件夹<code class="fe nb nc nd ne b">store</code>将被创建在我们项目的根文件夹中。</p><p id="c2cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将包含两件事:</p><ol class=""><li id="3e45" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe nb nc nd ne b">index.js</code>文件</li><li id="56b6" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><code class="fe nb nc nd ne b">modules</code>文件夹</li></ol><p id="5db4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在解释<code class="fe nb nc nd ne b">index.js</code>文件之前，我们先来看看如何划分单个模块。让我们检查一下<code class="fe nb nc nd ne b">user</code>模块。</p><p id="f722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它的所有动作、变异和获取器都应该列在<code class="fe nb nc nd ne b">types.js</code>文件中。大概是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">商店/模块/用户/类型. js</p></figure><p id="5220" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当我们想要使用这些常量时，通过导入它们，我们将有一个清晰的视图。</p><p id="549a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看现在的行动。我们想把它们移到<code class="fe nb nc nd ne b">actions.js</code>文件中。</p><p id="a53f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们只需要复制模块中的<code class="fe nb nc nd ne b">actions</code>对象和<code class="fe nb nc nd ne b">export default</code>对象，同时导入类型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">商店/模块/用户/操作. js</p></figure><p id="6f6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将对突变和getters做同样的事情。状态属性将保留在<code class="fe nb nc nd ne b">index.js</code>(用户模块文件夹内):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">商店/模块/用户/索引. js</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="41ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经把所有的模块分成了多个文件。</p><p id="6b90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">剩下的一件事就是链接<code class="fe nb nc nd ne b">store</code>文件夹中<code class="fe nb nc nd ne b">index.js</code>文件中的所有模块:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">商店/索引. js</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="0fb8" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">结论</h1><p id="1ddc" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">通过使用这种架构，我们在大规模生产应用程序中的可伸缩性没有任何问题。</p><p id="dabe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一切都很容易找到。</p><p id="25a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们确切地知道所有的动作是在哪里触发的。</p><p id="0be9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该系统具有高度的可维护性。</p><p id="875d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有任何改进的建议，请告诉我。我很想听听你的意见。</p></div></div>    
</body>
</html>