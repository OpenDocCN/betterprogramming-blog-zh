<html>
<head>
<title>Create Custom Links and Prevent Transitions With React Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React路由器创建自定义链接并防止转换</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-custom-links-and-preventing-transitions-with-react-router-c64caa4693f4?source=collection_archive---------11-----------------------#2020-04-14">https://betterprogramming.pub/creating-custom-links-and-preventing-transitions-with-react-router-c64caa4693f4?source=collection_archive---------11-----------------------#2020-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="25ed" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">继续之前提示用户的自定义链接</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c7b51b01d7faa67097d51ffd6ff454a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d4WuaFFwUovDYA87"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">贾斯汀·劳伦斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a0eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React是一个用于创建前端视图的库。它有一个庞大的图书馆生态系统与之合作。此外，我们可以用它来增强现有的应用程序。</p><p id="b150" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要构建单页面应用程序，我们必须有某种方法将URL映射到React组件来显示。</p><p id="c219" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解如何使用React Router创建自定义链接并防止转换。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d5f1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建我们自己的链接</h1><p id="b5f5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以通过创建一个呈现<code class="fe mz na nb nc b">Link</code>组件的组件来创建一个链接。</p><p id="bfb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以这样写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="91e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们有<code class="fe mz na nb nc b">FancyLink</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4d99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它需要一个<code class="fe mz na nb nc b">label</code>、<code class="fe mz na nb nc b">to</code>和<code class="fe mz na nb nc b">activeOnlyWhenExact</code>道具。</p><p id="1399" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">label</code>道具用于链接标签。</p><p id="dbb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后用<code class="fe mz na nb nc b">to</code>道具设置路径。而<code class="fe mz na nb nc b">activeOnlyWhenExact</code>用于设置路径和实际URL完全匹配时匹配是否只是匹配。</p><p id="5a96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用<code class="fe mz na nb nc b">match</code>值来设置<code class="fe mz na nb nc b">div</code>的<code class="fe mz na nb nc b">className</code>。为了确定URL是否匹配我们的路由路径，我们使用了<code class="fe mz na nb nc b">useRouteMatch</code>钩子。</p><p id="7114" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它让我们无需实际呈现一个<code class="fe mz na nb nc b">Route</code>就可以访问匹配数据。</p><p id="5796" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以在<code class="fe mz na nb nc b">App</code>中使用我们的<code class="fe mz na nb nc b">FancyLink</code>组件。当<code class="fe mz na nb nc b">match</code>为<code class="fe mz na nb nc b">true</code>时，<code class="fe mz na nb nc b">&gt;</code>字符显示在<code class="fe mz na nb nc b">Link</code>之前。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="18f6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">防止过渡</h1><p id="10da" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以使用React路由器防止用户转换到另一个路由。</p><p id="9a05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要做到这一点，我们可以呈现<code class="fe mz na nb nc b">Prompt</code>组件来显示一条消息，询问用户是否想离开某条路线。</p><p id="6687" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以如下使用<code class="fe mz na nb nc b">Prompt</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="2be9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们有<code class="fe mz na nb nc b">Form</code>组件，它有一个输入元素。当输入值改变时，我们设置<code class="fe mz na nb nc b">text</code>状态。</p><p id="7251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe mz na nb nc b">text.length</code>为0时，<code class="fe mz na nb nc b">Prompt</code>组件将呈现一个<code class="fe mz na nb nc b">confirm</code>对话框，正如我们在<code class="fe mz na nb nc b">when</code>中指定的，我们点击Foo链接转到<code class="fe mz na nb nc b">/foo</code>路线。</p><p id="f0ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">Prompt</code>需要以下道具:</p><ul class=""><li id="0ed3" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><code class="fe mz na nb nc b">message</code> —当用户试图离开时显示消息的字符串，或者返回消息的函数</li><li id="e1e0" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><code class="fe mz na nb nc b">when</code> —一个布尔值，当我们传入的条件是<code class="fe mz na nb nc b">true</code>时，它有条件地呈现<code class="fe mz na nb nc b">Prompt</code>组件，以相应地阻止或允许导航</li></ul><p id="6a75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，因为不满足<code class="fe mz na nb nc b">when</code>中的条件，所以<code class="fe mz na nb nc b">confirm</code>对话框不会显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/df6184e9bd58cce05b6a4c399fcb6584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uye-gJLVYqDXUqzq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">乔恩·弗洛布兰特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e94b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="c3aa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以通过创建一个呈现<code class="fe mz na nb nc b">Link</code>的组件来创建自己的链接组件。我们可以用道具和状态来定制。</p><p id="6784" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了防止转换，我们可以使用<code class="fe mz na nb nc b">Prompt</code>组件，它接受<code class="fe mz na nb nc b">when</code>属性，该属性接受在屏幕上显示的条件。</p></div></div>    
</body>
</html>