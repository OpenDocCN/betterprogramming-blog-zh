<html>
<head>
<title>How to Effectively Create and Review Pull Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何有效地创建和审核拉式请求</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-and-review-pull-requests-8928bb682b8?source=collection_archive---------11-----------------------#2022-01-21">https://betterprogramming.pub/how-to-create-and-review-pull-requests-8928bb682b8?source=collection_archive---------11-----------------------#2022-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9a7e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于PR大小、描述、模板等的提示</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d095d8b1c73d92462391248e3af13329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6XX82QVfPMCjEGBz"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@lazizli?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拉拉·阿兹利</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">审查拉请求通常是一项被低估的技能，它会对开发人员和他们工作的团队产生巨大的影响。</p><blockquote class="ls lt lu"><p id="e518" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">声明:为了简洁起见，从现在起我将把<em class="iq">拉请求</em>称为<em class="iq"> PRs </em>。<br/>我还将为GitHub添加一些技巧细节，因为这是我更熟悉的平台，并将其称为<em class="iq"> GH </em>。</p></blockquote><p id="1088" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，主要目标应该是就如何构建PRs制定指导原则，以尽量减少干扰、缩短反馈周期并提高审核流程的质量。</p><p id="35fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们将我们的观点分成不同的部分，这将有助于我们一次专注于特定的领域。</p><h1 id="8027" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">📐PR大小</h1><p id="bfaa" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">钻杆排放系统应尽可能小。我们应该瞄准的行数没有具体的数目，相反，我们应该瞄准小任务，基本上保持范围尽可能小。例如，PRs可以包含大量的变更，因为一些类被移动到一个新的包中。对于审核者来说，这并不是一个真正有意义的变化，因此不会造成干扰，也不会真正计入PR的<em class="lv">大小</em>。</p><p id="17c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，如果我们考虑需要构建特性的场景，我们需要:</p><ul class=""><li id="9192" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">呼叫端点</li><li id="615f" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">解析响应</li><li id="2b66" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">存储一些数据</li><li id="b173" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">构建/更新用户界面</li></ul><p id="e708" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">❌如果你考虑所有的类——以及相对测试——对于整个范围，PR很容易变得很大，导致:</p><ul class=""><li id="2340" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">来自评审者的大量反馈或难以解决的大量变更请求的可能性-&gt;对评审者和PR的作者来说都相当混乱</li><li id="2c68" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">由于大量的代码和变更，可能缺乏评审人员的关注-&gt;降低代码库的质量</li></ul><p id="23af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">✅:上面例子的一个好方法是:</p><ul class=""><li id="1050" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">端点业务逻辑的一个PR(前2点)</li><li id="a737" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">一个用于数据存储</li><li id="1958" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">一个用于UI</li></ul><p id="88ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，这取决于具体情况，也许最后2点很小，因为已经有一个存储机制和一个UI，因此它们可以合并在一个PR中。</p><h1 id="b711" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">📝公关描述</h1><p id="af20" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">公关描述当然是我们交流我们做了什么，我们解决了什么问题，以及公关实现了什么。这也是给评论者一个<em class="lv">提醒</em>的好地方。例如，我们可以让他们知道，即使代码行看起来变化很大，也是由于将几个类移动到一个新的包中进行了重构。这将更真实地反映PR的大小，并帮助评审者更好地估计他们需要多少时间来评审它(并可能有助于他们的<em class="lv">情绪</em>)。</p><p id="10c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个设置期望值的例子可以是，例如，我们正在解析来自后端的一些响应，并且我们为这些响应添加了多个类(又名<em class="lv">模型</em>),我们可以提到这一点，并且评审者将立即知道，即使这些变化看起来很多，但实际上它们很容易评审。</p><p id="27cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">💡<em class="lv"> GH提示</em>:写“<em class="lv">修复</em> <code class="fe nk nl nm nn b"><em class="lv">Link to the GH issue</em></code>”将自动关闭GH问题，一旦PR合并</p><h1 id="0aaa" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">🎨设计</h1><p id="a1f7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">当打开包含全新设计(例如屏幕)或影响用户界面更改的PR时，在PR描述中包含截图或视频以展示结果并标记设计师以让他们知道总是一种好的做法。</p><p id="bc97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">他们可能不会马上给出反馈，但至少他们知道我们正在取得的进展，如果设计中有明显的错误，我们会马上知道。</p><p id="89d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">💡<em class="lv"> GH提示</em>:为了提高PR描述的可读性/格式，请记住GH有很好的<a class="ae kv" href="https://docs.github.com/en/github/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax" rel="noopener ugc nofollow" target="_blank">降价支持</a>，并且非常易于使用🙌<a class="ae kv" href="https://docs.github.com/en/github/writing-on-github/working-with-advanced-formatting/organizing-information-with-tables" rel="noopener ugc nofollow" target="_blank">表格</a>在附上多张截图时特别有用。</p><h1 id="e993" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">👀幼虫</h1><p id="a391" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">评审时:如果某些东西看起来可以改进，但实际上并不必要并且最终决定权可以交给PR的所有者，我们可以在评论中使用<code class="fe nk nl nm nn b">nit</code>前缀。例如:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="39a9" class="ns ma iq nn b gy nt nu l nv nw">fun filterBoards() {<br/>   val boardsFiltered = boards.filter { it.isOpen }<br/>   return boardsFiltered<br/>}</span></pre><p id="7889" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">公关评论:<code class="fe nk nl nm nn b">nit: this could be named filteredResult, but I am fine with the one you choose as well</code></p><h1 id="50e5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">🚀很高兴有</h1><p id="6f26" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">有时审查我们自己的PRs会更容易发现未被发现的错误。另一个<em class="lv">值得高兴的是</em>是在你认为会有问题的地方提前评论，最好的情况是你会马上给评论者提供答案，并比预期更早获得批准。</p><h1 id="0697" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">❌ 💬✅批准vs评论vs请求变更</h1><p id="16c9" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">当有明显<em class="lv">错误</em>的事情，挖掘代码库的稳定性或不真正符合商定的指导方针时，❌请求更改应该是一件很容易的事情。</p><p id="7c61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">💬每当我们有一些疑问需要回答时，就应该进行评论(没有明确地批准/请求变更),以便了解所提供的变更是否确实好。</p><p id="781b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只要PR清楚地说明了它应该做的事情，并且没有挖掘代码库质量的重大问题，就应该进行✅批准。这可能包括<code class="fe nk nl nm nn b">nit</code>评论或只是澄清评论，对这些评论的回答不会真正改变PR的结果。</p><p id="ebd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每当我没有看到任何阻碍或明显的问题时，我倾向于批准，请记住这一点，因为您的反馈会对团队的速度产生相当大的影响(从而影响产品开发的速度)。</p><h1 id="f765" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">💡GitHub - PR模板</h1><p id="db8f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">自动化建议我们提到的一些东西(公关描述、截图等)的一个好方法是使用<a class="ae kv" href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository" rel="noopener ugc nofollow" target="_blank"> GH模板</a>。</p><h1 id="2470" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">💭最后的想法</h1><p id="3b71" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">当审查PRs时，总是假设作者的意图是好的，以礼貌和建设性的方式给出反馈(例如，当变化不明显时，明确地写下<em class="lv"> why </em>),记住你们都在为同一个目标做出贡献:构建理想情况下任何开发人员都可以维护的可靠和可伸缩的代码库！</p></div></div>    
</body>
</html>