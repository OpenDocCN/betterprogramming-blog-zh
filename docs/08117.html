<html>
<head>
<title>How To Apply SOLID Principles To Clean Your Code in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中应用坚实的原则来清理代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-apply-solid-principles-to-clean-your-code-in-react-cdfd5e0a9cea?source=collection_archive---------1-----------------------#2021-03-29">https://betterprogramming.pub/how-to-apply-solid-principles-to-clean-your-code-in-react-cdfd5e0a9cea?source=collection_archive---------1-----------------------#2021-03-29</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="8eed" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">审视单一责任原则在实践中的运用</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/99fed45da1b2bc8a4a62a14d9cc9804e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ORmBjRNFTY-NOlYopqIwjg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://www.pexels.com/@mockupeditor-com-56805?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">MockupEditor.com</a>从<a class="ae kz" href="https://www.pexels.com/photo/silver-imac-near-white-ceramic-kettle-205316/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄。</p></figure><p id="90f7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://www.digitalocean.com/community/conceptual_articles/s-o-l-i-d-the-first-five-principles-of-object-oriented-design" rel="noopener ugc nofollow" target="_blank">坚实的</a>原则的主要目的是为关心他们的技术的软件专业人员提供指导。以构建经得起时间考验的设计精美的代码库为荣的人。</p><p id="5114" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">今天，我们将从一个糟糕的代码示例开始，应用SOLID的第一个原则，看看这如何帮助我们编写小而漂亮、干净且职责明确的React组件。</p><p id="a482" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们开始吧。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="12ed" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">什么是单一责任原则？</h1><p id="2523" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">单一责任原则告诉我们，每个类或组件都应该有一个存在的目的。</p><p id="cb61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">组件应该只做一件事，并且做得很好。</p><p id="c4ed" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们用这个原则重构一段糟糕但有效的代码，让它变得更干净、更好。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0340" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">让我们从一个不好的例子开始</h1><p id="7a31" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我们先来看一些违背这个原则的代码。添加注释是为了更好地理解:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">singleresponsibility violation . js</p></figure><h2 id="4878" class="nc me iu bd mf nd ne dn mj nf ng dp mn lj nh ni mp ln nj nk mr lr nl nm mt nn bi translated">这段代码做了什么</h2><p id="e52d" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这是一个功能组件，我们从远程数据源获取数据，过滤数据，然后在UI中显示它。我们还检测API调用的加载状态。</p><p id="1f4a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了更好地理解，我把这个例子写得很短。但是您几乎可以在同一个组件的任何地方找到它们！这里发生了很多事情:</p><ol class=""><li id="2387" class="no np iu lc b ld le lg lh lj nq ln nr lr ns lv nt nu nv nw bi translated">远程数据获取</li><li id="10ad" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated">数据过滤</li><li id="66e5" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated">复杂状态管理</li><li id="5f88" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated">复杂的UI功能</li></ol><p id="72cf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，让我们来探索如何改进代码的设计，使其更加紧凑。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="ab1b" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">1.将数据处理逻辑移出</h1><p id="c020" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">永远不要将HTTP调用放在组件内部。这是经验法则。有几种策略可以用来从组件中删除这些代码。</p><p id="56e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您至少应该创建一个自定义挂钩，并将您的数据获取逻辑移到那里。例如，我们可以创建一个名为<code class="fe oc od oe of b">useGetRemoteData</code>的钩子，如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">useGetRemoteData.js</p></figure><p id="b339" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，我们的主要组件将如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">FirstRefactor.js</p></figure><p id="13d0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">看看我们的组件现在如何<strong class="lc iv"> </strong>更小更容易理解！这是在错综复杂的代码库中可以做的最简单的第一件事。</p><p id="702d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我们可以做得更好。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="98dc" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">2.用于数据提取的可重用挂钩</h1><p id="c644" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">现在，当我们看到我们的<code class="fe oc od oe of b">useGetRemoteData</code>钩子时，我们看到这个钩子正在做两件事:</p><ol class=""><li id="e4b0" class="no np iu lc b ld le lg lh lj nq ln nr lr ns lv nt nu nv nw bi translated">从远程数据源获取数据</li><li id="f1c5" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated">过滤数据</li></ol><p id="dc6a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们将获取远程数据的逻辑提取到一个名为<code class="fe oc od oe of b">useHttpGetRequest</code>的独立钩子中，该钩子将URL作为一个组件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">useHttpGetrequest.js</p></figure><p id="69e8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们还将reducer逻辑移到了一个单独的文件中:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">LoadingReducer.js</p></figure><p id="9597" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以现在我们的<code class="fe oc od oe of b">useGetRemoteData</code> <strong class="lc iv"> </strong>就变成了:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><code class="fe oc od oe of b"><strong class="ak">useGetRemoteData.js</strong></code></p></figure><p id="fdc9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">干净多了，对吧？我们能做得更好吗？当然，为什么不呢？</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="cc20" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">3.分解UI组件</h1><p id="adc2" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">看看我们的组件，其中显示了用户的详细信息。为此，我们可以创建一个可重用的<code class="fe oc od oe of b">UserDetails</code> <strong class="lc iv"> </strong>组件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">用户详细信息. js</p></figure><p id="e927" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们的原始组件变成:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="na nb l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">用户. js</p></figure><p id="c8a9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将代码从60行精简到了12行！<strong class="lc iv"> </strong>我们创建了五个独立的组件，每个组件都有明确的职责。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="8b4c" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">让我们回顾一下我们刚刚做了什么</h1><p id="fa2d" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">让我们回顾一下我们的组件，看看我们是否实现了SRP:</p><ul class=""><li id="bc44" class="no np iu lc b ld le lg lh lj nq ln nr lr ns lv og nu nv nw bi translated"><code class="fe oc od oe of b">Users.js</code> —负责显示用户列表</li><li id="ba52" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv og nu nv nw bi translated"><code class="fe oc od oe of b">UserDetails.js</code> —负责显示用户的详细信息</li><li id="2dda" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv og nu nv nw bi translated"><code class="fe oc od oe of b">useGetRemoteData.js</code> —负责过滤远程数据</li><li id="cfba" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv og nu nv nw bi translated"><code class="fe oc od oe of b">useHttpGetrequest.js</code> —负责HTTP调用</li><li id="c435" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv og nu nv nw bi translated"><code class="fe oc od oe of b">LoadingReducer.js</code> <strong class="lc iv"> — </strong>复杂状态管理</li></ul><p id="abc6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当然，我们可以改进很多其他的东西，但是这应该是你的一个好的起点。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="4202" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="62fe" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这是一个简单的演示，展示了如何减少每个文件中的代码量，并利用SOLID的强大功能创建美观且可重用的组件。</p><h1 id="6470" class="md me iu bd mf mg oh mi mj mk oi mm mn ka oj kb mp kd ok ke mr kg ol kh mt mu bi translated">本系列的其他文章</h1><ol class=""><li id="50f1" class="no np iu lc b ld mv lg mw lj om ln on lr oo lv nt nu nv nw bi translated"><a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/applying-the-open-closed-principle-to-write-clean-react-components-4e4514963e40">开启关闭原理</a></li><li id="92ab" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/applying-the-liskov-substitution-principle-in-react-3a0614a42a08">利斯科夫替代原理</a></li><li id="be8b" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/how-to-apply-interface-segregation-principle-in-reactjs-fadf77113c5d">界面偏析原理</a></li><li id="1266" class="no np iu lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/apply-the-dependency-inversion-principle-in-react-c20a0afc3d64">依存倒置原则</a></li></ol><p id="04de" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">通过</strong> <a class="ae kz" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv"> LinkedIn </strong> </a> <strong class="lc iv">或我的</strong> <a class="ae kz" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">个人网站</strong> </a> <strong class="lc iv">与我取得联系。</strong></p><div class="op oq gq gs or os"><a rel="noopener  ugc nofollow" target="_blank" href="/top-7-libraries-for-blazingly-fast-reactjs-applications-c0069e87c8b7"><div class="ot ab fp"><div class="ou ab ov cl cj ow"><h2 class="bd iv gz z fq ox fs ft oy fv fx it bi translated">快速反应应用的7大库</h2><div class="oz l"><h3 class="bd b gz z fq ox fs ft oy fv fx dk translated">摇滚明星开发人员的必备工具</h3></div><div class="pa l"><p class="bd b dl z fq ox fs ft oy fv fx dk translated">better编程. pub</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg kt os"/></div></div></a></div><div class="op oq gq gs or os"><a rel="noopener  ugc nofollow" target="_blank" href="/21-best-practices-for-a-clean-react-project-df788a682fb"><div class="ot ab fp"><div class="ou ab ov cl cj ow"><h2 class="bd iv gz z fq ox fs ft oy fv fx it bi translated">清洁React项目的21个最佳实践</h2><div class="oz l"><h3 class="bd b gz z fq ox fs ft oy fv fx dk translated">提高代码质量的实用建议</h3></div><div class="pa l"><p class="bd b dl z fq ox fs ft oy fv fx dk translated">better编程. pub</p></div></div><div class="pb l"><div class="ph l pd pe pf pb pg kt os"/></div></div></a></div></div></div>    
</body>
</html>