<html>
<head>
<title>How To Burn Tokens Using the Anchor Framework on Solana</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Solana上的Anchor框架刻录令牌</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-burn-tokens-using-the-anchor-framework-on-solana-6f3c8c50f857?source=collection_archive---------10-----------------------#2022-09-06">https://betterprogramming.pub/how-to-burn-tokens-using-the-anchor-framework-on-solana-6f3c8c50f857?source=collection_archive---------10-----------------------#2022-09-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="90c3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">试用该程序的简要指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b3b0b10adce5439a51024ce9b923a3f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WCdG2XNxlV__rCDCl5QIJQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@amadorloureiro?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿玛多·洛雷罗</a>在<a class="ae kv" href="https://unsplash.com/s/photos/flame?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1d56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章是我写的上一篇文章“如何使用Anchor框架初始化Mint帐户和Mint令牌”的延续，可以在下面的<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-initialize-mint-accounts-and-mint-tokens-using-the-anchor-framework-c989d1ba4f97">链接</a>中找到。我强烈推荐阅读那篇文章，以便更好地理解本教程的背景。</p><p id="1d37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文将向您展示如何在Anchor框架中使用“派生宏”来烧录已经生成的令牌。在我们开始之前，我想告诉你什么是Anchor框架，以及它将如何帮助像我们这样的开发人员在Solana网络之上进行构建。与以太坊生态系统不同，在Solana之上开发略有不同，主要是因为它们是两种类型的区块链网络。</p><p id="f0aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您以前有过在Solana网络上开发的经验，您就会知道在Solana上开发时，序列化和反序列化是您应该始终记住的两个概念。这就是锚框架的用武之地。这个框架简化了结构的序列化/反序列化，因此开发人员不需要担心这个问题。这是通过“派生宏”完成的</p><p id="852f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据官方文档，如这里的<a class="ae kv" href="https://docs.rs/anchor-lang/latest/anchor_lang/derive.Accounts.html" rel="noopener ugc nofollow" target="_blank">和</a>所示，派生宏可以通过使用属性和指令提供进一步的功能。</p><p id="dce6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，让我们看看Anchor框架是如何让开发人员非常容易地从特定的关联令牌帐户(ATA)刻录令牌的。</p><h1 id="3fb3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第一步。先决条件</h1><ul class=""><li id="615c" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">VS代码—代码编辑器</li><li id="9e80" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">锚点版本— 0.24.2</li><li id="48c3" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">本教程的第1部分可以在<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-initialize-mint-accounts-and-mint-tokens-using-the-anchor-framework-c989d1ba4f97">这里</a>找到</li><li id="41d5" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">之前对锚框架的了解</li></ul><h1 id="03e8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第二步。批准将由ATA所有者铸造的令牌</h1><p id="bce2" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">这是Rust代码，用于将批准转移给另一方，以烧掉其他人拥有的令牌。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ce7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们深入研究这段代码，看看它是如何工作的:</p><ul class=""><li id="6fe3" class="mk ml iq ky b kz la lc ld lf nf lj ng ln nh lr mr ms mt mu bi translated">结构<code class="fe ni nj nk nl b">ApproveToken </code>是传递给函数<code class="fe ni nj nk nl b">approve_token.</code>的内容</li><li id="4d9b" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">第31行指定了我们应该批准哪个ATA的令牌。</li><li id="0aee" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">第34行指定了应该向谁授予燃烧许可。值得注意的是，该事务应该由ATA的当前所有者签名，而令牌现在就在ATA中。</li><li id="8d5d" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">第35行的<code class="fe ni nj nk nl b">signer </code>应该是第31行提到的ATA的所有者。</li></ul><p id="a3de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，这个结构将被传递给<code class="fe ni nj nk nl b">approve_token </code>函数，以及应该给予批准的令牌数，指定为<code class="fe ni nj nk nl b">amount</code>。然后，将执行跨程序调用(CPI)来批准烧毁令牌。</p><p id="ff0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们来看一下批准烧毁令牌的JS代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4b22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您在上面这段代码中看到的，函数由<code class="fe ni nj nk nl b">fromWalletB</code>签名，它目前拥有ATA和其中的令牌。由于<code class="fe ni nj nk nl b">fromWalletA </code>被指定为<code class="fe ni nj nk nl b">delegate</code>，在该交易被执行后，给定ATA中的100个代币的批准将被交给<code class="fe ni nj nk nl b">fromWalletA </code>进行销毁。</p><p id="a9d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需要注意的一件重要事情是，即使在执行了事务之后，指定数量的令牌仍然在同一个ATA中。只有其被刻录的批准被转移到<code class="fe ni nj nk nl b">fromWalletA</code>。</p><p id="9768" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一件要记住的重要事情是，如果你想烧掉你的代币，批准应该还给铸币账户的原所有者。即使您将批准转移到某个随机钱包，它们也不能被刻录并在以后从您的ATA中删除。只有代币来源的铸币账户的所有者可以烧掉它们。</p><h1 id="0d3a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第三步。从ATA刻录令牌</h1><p id="cc03" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">假设对要铸造的令牌的批准已经被转移回mint帐户的所有者，让我们看看如何编写代码来从特定的ATA中刻录令牌。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9480" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段代码类似于上一教程中用来铸造令牌的代码。因此，我不会深入这段代码来解释它是如何工作的。现在你应该很清楚了。需要注意的是，在第34行和第35行中,<code class="fe ni nj nk nl b">from </code>账户被标记为<code class="fe ni nj nk nl b">mut</code>,因为该函数会改变账户的余额。同样地，<code class="fe ni nj nk nl b">mint</code>账户也被标记为<code class="fe ni nj nk nl b">mut</code>。烧完之后，代币的总供应量会减少。</p><p id="54f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们看看如何与来自JS的Rust代码进行交互:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ee74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这也非常类似于铸造令牌的JS代码。因此，我不会浪费你的时间来解释代码。如果您有任何问题，请随时发表评论。</p><p id="90ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给你。这就是你如何使用锚框架烧令牌。您可以看到Anchor框架是如何让Solana开发人员的生活变得非常轻松的。</p><p id="ee68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我会跟进一些来自区块链世界的其他教程。</p><p id="0aed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在那之前，</p><p id="8bfe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">干杯！！</p><h1 id="dabf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">资源</h1><ol class=""><li id="574d" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr nm ms mt mu bi translated">锚郎文档—<a class="ae kv" href="https://docs.rs/anchor-lang/latest/anchor_lang/derive.Accounts.html" rel="noopener ugc nofollow" target="_blank">https://docs.rs/anchor-lang/latest/anchor_lang/derive.Accounts.html</a></li><li id="0e54" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr nm ms mt mu bi translated">教程第一部分—<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-initialize-mint-accounts-and-mint-tokens-using-the-anchor-framework-c989d1ba4f97">https://better programming . pub/how-to-initialize-mint-accounts-and-mint-tokens-using-the-anchor-framework-c 989 D1 ba 4 f 97</a></li></ol></div></div>    
</body>
</html>