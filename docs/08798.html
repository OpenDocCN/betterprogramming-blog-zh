<html>
<head>
<title>How To Implement an Autocomplete Feature in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Flutter中实现自动完成特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-implement-an-autocomplete-feature-in-flutter-bea21d6b1847?source=collection_archive---------0-----------------------#2021-06-14">https://betterprogramming.pub/how-to-implement-an-autocomplete-feature-in-flutter-bea21d6b1847?source=collection_archive---------0-----------------------#2021-06-14</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="8f71" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">轻松集成Datamuse API和Flutter</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/54ffd57c693222f3bfbae3e2c5cd266d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IycnFCKIAOA7TdP_"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@lebrvn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">罗曼五世</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="892e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">自动完成是一种方便的功能，可以预测用户希望在文本字段中输入的单词。他们只需输入前几个字符，程序就会提示可能的单词。</p><p id="66c3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本教程中，我将向您介绍<a class="ae kz" href="https://www.datamuse.com/api/" rel="noopener ugc nofollow" target="_blank"> Datamuse </a> API，一个易于使用的单词查找查询引擎。它最大的特点之一是自动完成。当搜索词的词汇量非常大时，您可以将其应用到您的网站或应用程序中。</p><p id="b3ca" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下一节中，我将向您展示如何将Datamuse API与<a class="ae kz" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>集成，这是一个用于构建优秀跨平台应用程序的现代工具包。</p><p id="8f0b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们开始吧！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="c108" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">Datamuse概述</h1><p id="b87c" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">Datamuse提供了一个简单的API来查找押韵单词、拼写相似的单词、描述性形容词等等。它的查询引擎由像<a class="ae kz" href="http://www.speech.cs.cmu.edu/cgi-bin/cmudict" rel="noopener ugc nofollow" target="_blank"> CMU发音词典</a>、<a class="ae kz" href="http://wordnet.princeton.edu/" rel="noopener ugc nofollow" target="_blank"> WordNet 3.0 </a>和<a class="ae kz" href="https://code.google.com/archive/p/word2vec/" rel="noopener ugc nofollow" target="_blank"> word2vec </a>这样的数据源提供支持。该API可以免费使用，但每天的请求数量限制在100，000个以内。有一个选择是获得更大的配额。</p><p id="0c51" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们来看几个例子。</p><h2 id="d1e7" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">找到与“吉他”押韵并且与音乐相关的单词</h2><p id="f6e6" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在你的浏览器中打开这个网址:<a class="ae kz" href="https://api.datamuse.com/words?ml=music&amp;rel_rhy=guitar&amp;max=1000" rel="noopener ugc nofollow" target="_blank">https://api.datamuse.com/words?<strong class="lc iv">ml =音乐</strong>T42】rel _<strong class="lc iv">rhy =吉他</strong>T43】max = 1000</a>。</p><p id="19c8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">结果:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="c397" class="na me iu nn b gz nr ns l nt nu">[{"word":"bar","score":6002,"numSyllables":1},{"word":"repertoire","score":1531,"numSyllables":3},{"word":"sitar","score":408,"numSyllables":2}]</span></pre><p id="12f3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，<code class="fe nv nw nx nn b">ml</code>代表<em class="ny">的意思就像</em> <strong class="lc iv"> </strong>和<strong class="lc iv"> </strong> <code class="fe nv nw nx nn b">rhy</code> <strong class="lc iv"> </strong>代表<strong class="lc iv"> </strong>代表<strong class="lc iv"> </strong> <em class="ny">押韵</em>。</p><h2 id="68ea" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">在以字母“s”开头的句子中，找出经常跟在“write”后面的单词</h2><p id="afb4" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">打开这个网址:<a class="ae kz" href="https://api.datamuse.com/words?lc=write&amp;sp=s*" rel="noopener ugc nofollow" target="_blank">https://api.datamuse.com/words?<strong class="lc iv">LC = write</strong>&amp;<strong class="lc iv">sp = s *</strong></a>。</p><p id="348e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">结果:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="a163" class="na me iu nn b gz nr ns l nt nu">[{"word":"something","score":5214},{"word":"some","score":4115},{"word":"such","score":4023},{"word":"so","score":3277},{"word":"stories","score":2260},{"word":"short","score":2100},{"word":"sentences","score":1996},{"word":"soon","score":1928}]</span></pre><p id="7883" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里，<code class="fe nv nw nx nn b">lc</code>表示<em class="ny">左上下文</em>，而<code class="fe nv nw nx nn b">sp</code>代表<em class="ny">的拼写与</em>相似。也可以使用通配符，比如<code class="fe nv nw nx nn b">*</code>符号。</p><p id="118a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以在API的<a class="ae kz" href="https://www.datamuse.com/api/" rel="noopener ugc nofollow" target="_blank">网站</a>上探索完整的例子集合。</p><p id="ad00" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本文中，我们对基于用户输入返回单词建议的<code class="fe nv nw nx nn b">/sug</code>端点感兴趣。<a class="ae kz" href="https://pub.dev/documentation/datamuse/latest/datamuse/Datamuse-class.html" rel="noopener ugc nofollow" target="_blank">文档</a>描述了幕后发生的事情:</p><blockquote class="nz"><p id="ca24" class="oa ob iu bd oc od oe of og oh oi lv dk translated">“当无法找到精确的前缀匹配时，这些建议会执行实时拼写纠正，并智能地退回到语音或语义相似的选项。”</p></blockquote><p id="6db2" class="pw-post-body-paragraph la lb iu lc b ld oj jv lf lg ok jy li lj ol ll lm ln om lp lq lr on lt lu lv in bi translated">让我们看看对<code class="fe nv nw nx nn b">flo</code>有什么建议。</p><p id="c743" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">打开这个网址:<a class="ae kz" href="https://api.datamuse.com/sug?s=flo" rel="noopener ugc nofollow" target="_blank">https://api.datamuse.com/<strong class="lc iv">sug？</strong>s = flo</a>。</p><p id="c62e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">结果:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="7748" class="na me iu nn b gz nr ns l nt nu">[{"word":"flower","score":3280},{"word":"flow","score":3075},{"word":"float","score":2159},{"word":"floor","score":1934},{"word":"flourish","score":1875},{"word":"flock","score":1687},{"word":"flood","score":1511},{"word":"flora","score":1505},{"word":"flop","score":1407},{"word":"floop","score":1322}]</span></pre><p id="23ed" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对了，我脑子里有过<em class="ny">花</em> <strong class="lc iv"> <em class="ny"> </em> </strong>这个词，而且好像得分最高。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="564e" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">Datamuse API与Flutter的集成</h1><p id="c4a9" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我们将使用外部Flutter库来简化与Datamuse API的集成过程。</p><p id="8a05" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">TypeAhead 是一个很棒的用于Flutter的自动完成部件。当用户在文本字段中键入时，您可以使用它来显示建议。该包在其GitHub <a class="ae kz" href="https://github.com/AbdulRahmanAlHamali/flutter_typeahead/tree/master/example" rel="noopener ugc nofollow" target="_blank">库</a>中有实现示例。为了本教程，我简化了其中一个例子。</p><h2 id="eacb" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">准备项目</h2><ol class=""><li id="bd97" class="oo op iu lc b ld mv lg mw lj oq ln or lr os lv ot ou ov ow bi translated">在您最喜欢的IDE中创建一个新的Flutter项目。</li><li id="ab3f" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ot ou ov ow bi translated">通过更新<code class="fe nv nw nx nn b">pubspec.yaml</code>文件中的<code class="fe nv nw nx nn b">dependencies</code>来安装必要的库:</li></ol><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="dab6" class="na me iu nn b gz nr ns l nt nu">http: ^0.13.3<br/>flutter_typeahead: ^3.1.3</span></pre><p id="c8f1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在您的终端中运行以下命令来触发更新:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="bd16" class="na me iu nn b gz nr ns l nt nu">flutter pub get</span></pre><p id="daf9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">3.用我们的替换自动生成的<code class="fe nv nw nx nn b">main.dart</code>文件的内容:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="f473" class="na me iu nn b gz nr ns l nt nu">import 'package:flutter/material.dart';<br/>import 'material_app.dart';<br/><br/>void main() =&gt; runApp(MyMaterialApp());</span></pre><p id="d720" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">4.使用以下代码创建一个名为<code class="fe nv nw nx nn b">material-app.dart</code>的新Dart文件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pc pd l"/></div></figure><p id="b158" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们已经导入了必要的库。注意，您会得到一个错误消息，说<code class="fe nv nw nx nn b">data.dart</code>文件丢失了，但是不要担心。我们将很快创建它。</p><ul class=""><li id="6003" class="oo op iu lc b ld le lg lh lj pe ln pf lr pg lv ph ou ov ow bi translated">这里要注意的主要是<code class="fe nv nw nx nn b">TypeAheadField</code>。您可以随意定制输入字段的样式。</li><li id="a974" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated"><code class="fe nv nw nx nn b">suggestionCallback</code>方法调用我们的Datamuse API后端。</li><li id="0dfc" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated"><code class="fe nv nw nx nn b">itemBuilder</code>方法在一个<code class="fe nv nw nx nn b">ListTile</code>小部件中显示结果。</li><li id="0906" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated">我将<code class="fe nv nw nx nn b">onSuggestionSelected</code>方法留空。您可以添加当用户选择一个建议时应该发生什么的实现。</li></ul><p id="f343" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">5.创建丢失的<code class="fe nv nw nx nn b">data.dart</code>文件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pc pd l"/></div></figure><ul class=""><li id="5636" class="oo op iu lc b ld le lg lh lj pe ln pf lr pg lv ph ou ov ow bi translated">我们通过一个简单的REST调用来调用Datamuse API的<code class="fe nv nw nx nn b">/sug</code>端点。</li><li id="62d1" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated">我们接收JSON数据并将其映射到一个<code class="fe nv nw nx nn b">Suggestion</code>对象。</li></ul><p id="1f05" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，使用<a class="ae kz" href="https://pub.dev/packages/retrofit" rel="noopener ugc nofollow" target="_blank">改进</a>库实现REST调用有一个更有利的方法。Hetashree Bharadwaj 写了一个关于如何使用这个库的综合教程<a class="ae kz" href="https://medium.com/mindful-engineering/retrofit-the-easiest-way-to-call-rest-apis-is-flutter-fe55d1e7c5c2" rel="noopener">。主要的好处是它支持JSON数据的自动序列化。这样，我们不需要手动映射我们的类。</a></p><h2 id="1132" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">项目演示</h2><p id="79d3" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">最后，让我们通过执行以下命令来运行项目:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="4595" class="na me iu nn b gz nr ns l nt nu">flutter run -d chrome - web</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pk"><img src="../Images/0dd7e97a57f4391d0ab565f8185542be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*7g73ycCg95D9GmjxkZflPQ.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">颤振自动完成演示</p></figure><p id="b315" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太好了！程序根据第一个字符给出建议。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="2d42" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="1618" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在本文中，您了解了Datamuse API的优点以及如何将其与Flutter集成。您还了解了如何使用TypeAhead Flutter库来轻松实现自动完成。</p><p id="006d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以在下面链接的我的GitHub资源库中找到这个项目的代码。</p><p id="0150" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">希望这篇教程对你有用。如果你喜欢颤振主题，你可能也会喜欢我的其他相关文章:</p><div class="pl pm gq gs pn po"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-simple-admin-ui-with-flutter-and-etcd-1d00c788014d"><div class="pp ab fp"><div class="pq ab pr cl cj ps"><h2 class="bd iv gz z fq pt fs ft pu fv fx it bi translated">用Flutter和etcd创建一个简单的管理用户界面</h2><div class="pv l"><h3 class="bd b gz z fq pt fs ft pu fv fx dk translated">处理来自etcd后端的数据，并在Flutter中显示数据</h3></div><div class="pw l"><p class="bd b dl z fq pt fs ft pu fv fx dk translated">better编程. pub</p></div></div><div class="px l"><div class="py l pz qa qb px qc kt po"/></div></div></a></div><div class="pl pm gq gs pn po"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-implement-a-navigation-drawer-in-flutter-8d97d3b599d4"><div class="pp ab fp"><div class="pq ab pr cl cj ps"><h2 class="bd iv gz z fq pt fs ft pu fv fx it bi translated">如何在Flutter中实现一个导航抽屉</h2><div class="pv l"><h3 class="bd b gz z fq pt fs ft pu fv fx dk translated">在Flutter中创建一个简单的抽屉，并在菜单项之间导航</h3></div><div class="pw l"><p class="bd b dl z fq pt fs ft pu fv fx dk translated">better编程. pub</p></div></div><div class="px l"><div class="qd l pz qa qb px qc kt po"/></div></div></a></div><div class="pl pm gq gs pn po"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-flutter-charts-on-android-5a75b5fc337c"><div class="pp ab fp"><div class="pq ab pr cl cj ps"><h2 class="bd iv gz z fq pt fs ft pu fv fx it bi translated">如何在Android上创建颤振图表</h2><div class="pv l"><h3 class="bd b gz z fq pt fs ft pu fv fx dk translated">在抖动图表中显示来自Android后端的数据</h3></div><div class="pw l"><p class="bd b dl z fq pt fs ft pu fv fx dk translated">better编程. pub</p></div></div><div class="px l"><div class="qe l pz qa qb px qc kt po"/></div></div></a></div><p id="65ff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢您的阅读和快乐编码！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="28a3" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">参考</h1><ul class=""><li id="69e0" class="oo op iu lc b ld mv lg mw lj oq ln or lr os lv ph ou ov ow bi translated"><a class="ae kz" href="https://github.com/kirshiyin89/flutter_autocomplete/tree/master" rel="noopener ugc nofollow" target="_blank">https://github . com/kirshiyin 89/flutter _ autocomplete/tree/master</a></li><li id="d5f5" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated"><a class="ae kz" href="https://github.com/AbdulRahmanAlHamali/flutter_typeahead" rel="noopener ugc nofollow" target="_blank">https://github.com/AbdulRahmanAlHamali/flutter_typeahead</a></li><li id="8dab" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated"><a class="ae kz" href="https://pub.dev/packages/flutter_typeahead" rel="noopener ugc nofollow" target="_blank">https://pub.dev/packages/flutter_typeahead</a></li><li id="c2ed" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated"><a class="ae kz" href="https://pub.dev/packages/http/install" rel="noopener ugc nofollow" target="_blank">https://pub.dev/packages/http/install</a></li><li id="aa50" class="oo op iu lc b ld ox lg oy lj oz ln pa lr pb lv ph ou ov ow bi translated">【https://www.datamuse.com/api/ T2】号</li></ul></div></div>    
</body>
</html>