<html>
<head>
<title>SwiftUI: VideoPlayer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI:视频播放器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-videoplayer-cddfa1ee1601?source=collection_archive---------11-----------------------#2020-10-07">https://betterprogramming.pub/swiftui-videoplayer-cddfa1ee1601?source=collection_archive---------11-----------------------#2020-10-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="07ae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在WWDC 2020上，苹果推出了一个可以播放本地视频或来自URL的视频的视图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/33e5006c27500f3fce056823e39116c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wyFT5dFzs5rG5f7B"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@thomasw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">托马斯·威廉</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="ad2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">免责声明:您将无法使用YouTube上的视频。</em></p><blockquote class="lw"><p id="17bd" class="lx ly it bd lz ma mb mc md me mf lu dk translated"><em class="mg">“显示来自播放器对象的视频内容以及系统提供的回放控件的视图。”—苹果开发者</em></p></blockquote></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="e6b4" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">先决条件</h1><p id="595b" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">要学习本教程，您需要了解以下方面的一些基本知识:</p><ul class=""><li id="1c42" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">迅速发生的</li><li id="3495" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">至少Xcode 12+</li></ul><p id="047d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意:这只支持iOS 14+。</em></p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="ca9a" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">开始使用VideoPlayer</h1><p id="d51b" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">首先，您需要导入所需的模块:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="7e14" class="oe mp it oa b gy of og l oh oi">import AVKit</span></pre><p id="4785" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了便于说明，我将从YouTube上下载<a class="ae ky" href="https://www.youtube.com/watch?v=QH2-TGUlwu4&amp;t=4s" rel="noopener ugc nofollow" target="_blank"> Nyan Cat视频</a>，其扩展名为mp4。该文件将被放置在项目中，如下所示。请确保已选择目标，否则你的应用将会崩溃:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/ce5f9348fbbf19c03bb094cc4aaa3c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*naFByI5egZRZ2rkQDEoRfA.png"/></div></div></figure><p id="38cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请仅在您的设备上测试。在模拟器上测试是行不通的。</p><p id="d748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过使用下面的代码，您现在可以在SwiftUI中创建一个<code class="fe ok ol om oa b">VideoPlayer</code>:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="fd76" class="oe mp it oa b gy of og l oh oi">VideoPlayer(player: AVPlayer(url: Bundle.main.url(forResource: "nyan", withExtension: "mp4")!))</span></pre><p id="2751" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看看这个很酷的结果，我们快进快退15秒，拖动进度指示器，全屏显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/d5eb8b3b8975cd22de6bbaec22d647d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/1*dJ6wfYWWq24Jkyfxu9Ekmw.gif"/></div></figure><p id="240f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了使用本地文件，你当然可以选择URL。请注意，YouTube链接在这里不起作用。</p><p id="ef55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以用m3u8文件。实现如下。使用强制展开时，请确保该文件确实存在。大多数时候强行解包并不是一个好的做法。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="51a8" class="oe mp it oa b gy of og l oh oi">VideoPlayer(player: AVPlayer(url: URL(string: "https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8")!))</span></pre><p id="76d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在你的视频上做的一件很酷的事情就是添加一个覆盖图！这主要是用来描绘你的标志。</p><p id="96d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您将描绘自己的徽标，它将出现在右下角:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/094545972d5f2f8c8cb5856a8ad5d030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwBLhioWFlIcD6nczDsZ9Q.png"/></div></div></figure><p id="f5d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">稍微调整一下，您可以使用<code class="fe ok ol om oa b">topLeading</code>将您的徽标移动到左上角:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="99ee" class="oe mp it oa b gy of og l oh oi">frame(maxWidth: .infinity, maxHeight: .infinity, alignment: .topLeading)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/1a51a3b14e3bfc8faf16a616caa88921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnY2aM2qiXw75Onz3BKiMQ.png"/></div></div></figure><p id="0dd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>