<html>
<head>
<title>Beginner's Guide to Entity Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实体框架初学者指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/beginners-guide-to-entity-framework-d862c9aaec4?source=collection_archive---------2-----------------------#2019-08-28">https://betterprogramming.pub/beginners-guide-to-entity-framework-d862c9aaec4?source=collection_archive---------2-----------------------#2019-08-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a295" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何将C#应用程序连接到数据库并执行基本的CRUD操作</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/588f96382c0fb5f4e5203ede034a5671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uq0sghuPjtNq98oq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@imgix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> imgix </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="bace" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了一些C#知识，你可能会想:“我如何扩展我所知道的？”</p><p id="40e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许，您有一个让您的应用程序受益于数据库的想法。<a class="ae ky" href="https://docs.microsoft.com/en-us/ef/" rel="noopener ugc nofollow" target="_blank">实体框架</a>是一个供您使用的优秀工具。您将能够通过您的应用程序执行<a class="ae ky" href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" rel="noopener ugc nofollow" target="_blank"> CRUD操作</a>。</p><p id="a499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不仅会扩展您的应用程序的功能，还会扩展您自己的功能。</p><p id="5f5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将向您介绍什么是实体框架，如何在Winforms应用程序中设置它，并为您继续学习打下坚实的基础。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="04ea" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是实体框架？</h1><p id="3a3b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://docs.microsoft.com/en-us/ef/" rel="noopener ugc nofollow" target="_blank">实体框架</a>是微软支持的开源ORM(对象关系映射器)，用于。NET应用程序。</p><p id="ef64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，这是一个工具，它可以使代码中的对象与关系数据库中的信息之间的连接变得更加容易。</p><p id="7ee2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实体框架将负责创建与数据库的连接，创建可用于操作数据库的对象，并为您提供处理数据的方法。</p><p id="a6f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将能够在代码中操作表示数据库中数据的对象，并允许您将这些更改保存到数据库中。可以把它想象成数据库的一个接口或窗口，您可以向其中添加简单的功能，供任何人通过您的应用程序使用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b31e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">代码优先，数据库优先</h1><p id="abdc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有两种不同的方法在你的应用程序中使用实体框架。这些不同的方法各有其优点，由您来决定哪种方法最适合您的需求。</p><h2 id="4492" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">代码优先</strong></h2><p id="f141" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">代码首先关注于创建一个数据库，这个数据库在你的类设计中还不存在。这样，如果您的类发生变化，您的数据库中的配置也有可能发生变化。</p><p id="a4af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一种流行的方法，因为它允许通过代码进行更多的控制，而不是受数据库的限制。</p><h2 id="3ba3" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">数据库第一</strong></h2><p id="2ae9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">数据库首先关注使用现有的数据库。首先创建数据库并设计表/关系。</p><p id="8b3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法将为您生成与您在数据库中创建的结构一致的类。这允许您手动修改数据库，然后更新自动关联的类。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9691" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">入门指南</h1><p id="1f57" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于这个例子，我将在C# Winforms中使用EF6(实体框架6 ),结合数据库优先的方法。</p><p id="18b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还将使用由<a class="ae ky" href="https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank">SSMS</a>(SQL Server Management Studio)和微软<a class="ae ky" href="https://www.dnnsoftware.com/docs/developers/setup/set-up-sql.html" rel="noopener ugc nofollow" target="_blank"> SQL Server 2017 </a>创建的数据库。</p><p id="c619" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这些话题的更多信息，你可以阅读<a class="ae ky" href="https://academy.vertabelo.com/blog/how-to-install-sql-server-2017-windows/" rel="noopener ugc nofollow" target="_blank">这本指南</a>。本视频，<a class="ae ky" href="https://www.youtube.com/watch?v=H7uGGg1BQ2Y" rel="noopener ugc nofollow" target="_blank"> <em class="nl">创建包含表和关系的数据库(MS SQL) </em> </a> <em class="nl">，</em>可以帮助您设置数据库，如果您需要复习一下的话。我不打算深究这些信息，但我想提供一下，以防万一。</p><p id="8183" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建好数据库后，进入Winforms应用程序，按照以下步骤操作:</p><ul class=""><li id="224e" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">在<em class="nl">解决方案浏览器</em>中右键单击<em class="nl">引用</em>并选择<em class="nl">管理NuGet包… </em></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/fac1dbb7395f1445459aa72bfcf463c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*xUQsxWhPxBEfTk4g2hyGLw.png"/></div></figure><ul class=""><li id="1278" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">搜索微软<em class="nl"> EntityFramework </em>，点击，点击<em class="nl">安装</em>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/741cfe468df4c4c8edb3e1de9dcc13db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ZKoqseQCDsPWu8OdLG4Mw.png"/></div></div></figure><ul class=""><li id="f0d7" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">现在，您应该已经安装了实体框架，您可以通过单击<em class="nl">引用中的下拉图标来验证它，您应该会看到列出了<em class="nl">实体框架</em>。</em></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="97ca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建实体数据模型</h1><p id="0deb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">既然您已经设置好了数据库，并且在项目中安装了EF6，那么您需要设置项目到数据库的连接，并让Entity Framework创建与数据库相关的实体数据模型(类)。</p><ul class=""><li id="7f9e" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">在<em class="nl">解决方案浏览器</em>中右键单击您的项目，并选择<em class="nl"> Add → New Item </em>。然后，你会想要找到并选择<em class="nl">ADO.NET实体数据模型。</em></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/170d4f5571deae43e04c6d5b0a0dcd9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwI6jWfMVzARW4HZEzDtxA.png"/></div></div></figure><ul class=""><li id="c0b4" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">从数据库中选择<em class="nl"> EF设计师。</em></li><li id="e872" class="nm nn it lb b lc ny lf nz li oa lm ob lq oc lu nr ns nt nu bi translated">点击<em class="nl">新建连接… </em></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/2dfc6bc3ef02429dd33e28c89595eba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*f26Bi0YaJiO65zYsekJyHg.png"/></div></figure><ul class=""><li id="d79c" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">在<em class="nl">属性</em>弹出窗口中，提供服务器名称(可以在SSMS找到)并输入您的数据库名称。按下<em class="nl">确定</em>。</li><li id="33fa" class="nm nn it lb b lc ny lf nz li oa lm ob lq oc lu nr ns nt nu bi translated">确保选中复选框<em class="nl">保存应用程序中的连接设置。Config as: </em>并给它一个合适的名字，比如<em class="nl"> MyProjectDBEntities </em>，然后按<em class="nl"> Next。</em></li><li id="bc74" class="nm nn it lb b lc ny lf nz li oa lm ob lq oc lu nr ns nt nu bi translated">现在显示的将是表、视图、存储过程和函数。选择您想要的一切，保持默认复选框选中，然后单击<em class="nl">完成。</em></li></ul><p id="f6cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您已经成功地将数据库链接到项目，并创建了与数据库相关的实体数据模型。</p><p id="65d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的解决方案资源管理器中，您将看到一个<code class="fe oe of og oh b">.edmx</code>文件。如果您单击该文件，您将打开EDM(实体数据模型)设计器。</p><p id="b992" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将显示数据库中所选表的所有实体及其关系。(注意:以下示例中的表之间没有关系。)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/4e1d81cf37d3fd4c7254bd0277cacfe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5FMn1yhS1zD42N5Q-60TQ.png"/></div></div></figure><p id="1b07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，如果您展开<code class="fe oe of og oh b">.edmx</code>文件，您会看到一个类似于<code class="fe oe of og oh b">Model.tt</code>的文件。</p><p id="a1e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">展开<code class="fe oe of og oh b">.tt</code>文件，它将显示从您导入的表中创建的类。这些类是您在操作数据库时将用作模型的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/cf6b2ac6432749256f1d3ee74c37d2f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5yNtg3u3FQPn__9PrOFnw.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8d80" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据库上下文</h1><p id="e763" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您已经为项目设置了数据库，并且创建了实体数据模型，现在是时候学习如何使用模型和实体框架了。</p><p id="de94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要执行基本的CRUD操作(创建、读取、更新和删除)，您需要使用<code class="fe oe of og oh b">DBContext</code>类。</p><p id="c571" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与您的模型相关联的<code class="fe oe of og oh b">DBContext</code>类将允许您编写和运行查询，跟踪对这些对象所做的任何更改，保存对这些对象所做的更改，并在数据库中反映这些更改，以及将对象绑定到UI控件。</p><p id="3da1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og oh b">DBContext</code>是为您生成的，可以在解决方案资源管理器的<code class="fe oe of og oh b">DBModel.Context.tt</code>下找到。您会注意到类似如下的代码:</p><pre class="kj kk kl km gt ok oh ol om aw on bi"><span id="7013" class="mz md it oh b gy oo op l oq or">public virtual DbSet&lt;Deposit&gt; Deposits { get; set; }</span><span id="eadc" class="mz md it oh b gy os op l oq or">public virtual DbSet&lt;Withdraw&gt; Withdraws { get; set; }</span></pre><p id="2d32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oe of og oh b">DBSet</code>类源自<code class="fe oe of og oh b">DBContext</code>，代表用于CRUD操作的实体集。它们作为属性添加到<code class="fe oe of og oh b">DBContext</code>中，并映射到您的数据库表。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f181" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">CRUD操作</h1><p id="be4b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，您应该对实体框架有了一个工作上的理解。</p><p id="eb44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是时候学习如何使用<code class="fe oe of og oh b">DBContext</code>和你创建的模块来执行基本的CRUD操作了。使用<code class="fe oe of og oh b">using</code>创建一个新的上下文实例是很常见的做法，如下所示。</p><p id="e537" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这确保了上下文控制的所有资源都将在块的末尾被释放。</p><p id="7ff9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的例子来自我自己的个人项目。它们绝不是完美的，仍然需要重构，但我相信展示一些真实世界的例子会很好，而不是仅仅为了这个目的而随机制作的例子。</p><h2 id="bc85" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">创建</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="8636" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是在数据库中创建新存款的简单方法。这些方法接受一个从实体数据模型创建的<code class="fe oe of og oh b">Deposit</code>对象作为参数。</p><p id="0064" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个方法中，在一个<code class="fe oe of og oh b">using</code>块中创建了一个新的<code class="fe oe of og oh b">DBContext</code>。</p><p id="de34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，调用方法<code class="fe oe of og oh b">context.Deposits.Add()</code>并将<code class="fe oe of og oh b">Deposit</code>对象传递给参数。最后，为了使更改生效，必须调用<code class="fe oe of og oh b">context.SaveChanges()</code>。</p><h2 id="5fe9" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">改为</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="b2cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此方法返回所有存款的总和。</p><p id="9b56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次，在<code class="fe oe of og oh b">using</code>块中创建新的<code class="fe oe of og oh b">DBContext</code>。在程序块内部，创建一个保存总和的变量，调用方法<code class="fe oe of og oh b">context.Deposits.Sum()</code>并保存在该变量中。</p><p id="0c75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在方法参数内部，lambda用于遍历每个<code class="fe oe of og oh b">DepositAmount</code>并将它们添加到<code class="fe oe of og oh b">sum</code>。最后，该方法为客户端返回<code class="fe oe of og oh b">sum</code>。</p><h2 id="15a5" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">更新</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="e5a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该方法接受一个已知已经存在于数据库中的<code class="fe oe of og oh b">Deposit</code>对象。</p><p id="fe6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过将<code class="fe oe of og oh b">EntityState.Modified</code>设置为<code class="fe oe of og oh b">context.Entry(deposit).State</code>，您实际上是将存款附加到上下文并将其状态设置为已修改。</p><p id="a6bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您调用<code class="fe oe of og oh b">context.SaveChanges()</code>来完成更改。</p><h2 id="29b8" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak">删除</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="7f57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该方法接受一个<code class="fe oe of og oh b">Deposit</code>对象，然后将其从数据库中删除。在<code class="fe oe of og oh b">using</code>块内部，它将提供实体跟踪细节和操作的对象条目保存到变量条目中。</p><p id="932a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，它首先检查以确保状态是附加的。如果没有，它将附加实体。然后调用<code class="fe oe of og oh b">context.Deposits.Remove()</code> <strong class="lb iu"> </strong>，同时将对象传入参数。最后，保存更改。</p><p id="e42c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想查看使用<code class="fe oe of og oh b">DBContext</code>时可用的方法列表，您可以在<a class="ae ky" href="https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.dbcontext?view=entity-framework-6.2.0" rel="noopener ugc nofollow" target="_blank">微软文档</a>中查看它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ff88" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="5e64" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，您已经准备好将实体框架整合到您的下一个项目中了。</p><p id="4760" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这是一本初学者指南，但是您现在已经知道如何安装框架、连接到本地数据库、使用基本的CRUD操作，并且已经了解了与实体框架相关的核心概念。</p><p id="98e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这个主题还有很多需要学习，但是至少，你已经熟悉了基础知识，可以投入到这个非常有用的工具中了。</p></div></div>    
</body>
</html>