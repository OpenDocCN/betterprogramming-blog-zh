<html>
<head>
<title>Publish create-react-app to GitHub Pages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将创建-反应-应用程序发布到GitHub页面</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/publish-create-react-app-to-github-pages-the-easy-way-542e864da589?source=collection_archive---------10-----------------------#2019-06-17">https://betterprogramming.pub/publish-create-react-app-to-github-pages-the-easy-way-542e864da589?source=collection_archive---------10-----------------------#2019-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ddc9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">(简单的方法)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/92f2844da38276952af96d0a8345abdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kxt-UgZdDBtV2RSEVldkNw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://unsplash.com/@amrvle" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的<a class="ae ky" href="https://unsplash.com/@amrvle" rel="noopener ugc nofollow" target="_blank"> Gustas Brazaitis </a>摄影</p></figure><p id="65f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我首先要说的是，这篇文章<strong class="lb iu">没有使用gh-page <em class="lv"> s </em>或任何额外的节点模块来发布到GitHub页面。如果你正在寻找如何做到这一点，那就继续读下去，因为那样做是在浪费你的时间。你现在注意到我了吗？很好。</strong></p><p id="d937" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近重建了我的<a class="ae ky" href="https://methodbox.github.io/fetchDNS/" rel="noopener ugc nofollow" target="_blank"> FetchDNS </a>应用程序，这是我用<a class="ae ky" href="https://developers.google.com/speed/public-dns/docs/dns-over-https" rel="noopener ugc nofollow" target="_blank">谷歌的DNS-over-HTTPS API </a>创建的。该应用最初是使用Vue构建的，但后来我将大部分开发工作转移到了React世界。我决定是时候用React重构和刷新这个应用了。</p><blockquote class="lw"><p id="a4d7" class="lx ly it bd lz ma mb mc md me mf lu dk translated">我最近使用create-react-app重建了我的FetchDNS应用程序。<br/>App:<a class="ae ky" href="https://methodbox.github.io/fetchDNS/" rel="noopener ugc nofollow" target="_blank">https://methodbox.github.io/fetchDNS/</a>T15】GH:<a class="ae ky" href="https://github.com/methodbox/fetchDNS" rel="noopener ugc nofollow" target="_blank">https://github.com/methodbox/fetchDNS</a></p></blockquote><p id="9741" class="pw-post-body-paragraph kz la it lb b lc mg ju le lf mh jx lh li mi lk ll lm mj lo lp lq mk ls lt lu im bi translated">由于最初的应用程序完全作为一个SPA(单页应用程序)在GitHub页面上运行，我认为使用create-react-app构建一个新的应用程序会很简单。然而，我在GitHub页面上实际显示页面时遇到了一些问题。当我第一次发布最初的Vue应用时，我遇到了类似的问题。但是正如我将要解释的，create-react-app的解决方案要简单得多。</p><p id="3158" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Vue，它需要重新配置Webpack，在多个位置更改多个URL，并对我的目录结构做一些改动。记住，这是几年前的事了。我不确定Vue的流程是否已经改变，因为我没有跟上它。</p><p id="4ea3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当专业开发人员不能在30秒内解决问题时，我决定像他们一样做——我谷歌了一下。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="7475" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">额外的依赖是混乱的</h1><p id="eba5" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">不幸的是，我不断发现建议在我的项目中添加另一个节点模块的帖子。我说不幸是因为我确定这是一个配置问题。我也不喜欢添加依赖——尤其是那些实际上并不属于核心应用的依赖。</p><p id="9bdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加gh-pages需要有一个单独的分支，并维护一个比实际需要更混乱的依赖关系。只是多了一个可以维持的东西，又多了一个可以打破的东西。<a class="ae ky" href="https://facebook.github.io/create-react-app/docs/deployment" rel="noopener ugc nofollow" target="_blank">甚至官方Create React App文档都建议这么做</a>，但这并不意味着你<em class="lv">必须这么做。</em></p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="caed" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">隔离问题</h1><p id="a95e" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我决定发布应用程序损坏，并在浏览器控制台中开始我的故障诊断。这是我了解GitHub端发生了什么的唯一方法。</p><p id="601f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Chrome开发工具拯救世界！我只是将发布的页面拉起来，在Chrome JavaScript控制台中查看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a2d356cefafb8de001a8c95123ebaf89.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*iOIvw7rreODhqOFG95WzZw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在Chrome中检查浏览器控制台。休斯顿，我们有一个问题。</p></figure><p id="a667" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很明显，问题出在根路径上。GitHub希望被告知我的基本URL是什么，以便使用它作为我的文件的根位置的真实来源。这是<em class="lv">发现</em>我的应用程序对文件的请求，这是<em class="lv">加载</em>我的索引页面。但是它无法确定其余文件的相对路径。</p><p id="ebfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我可以轻松解决的问题。让我们看看如何做到这一点。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="8ad4" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">设置用于发布的存储库</h1><p id="6bd2" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">让我们退一步，谈谈GitHub发布到GitHub页面需要什么:</p><p id="58da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.特定名称的分支或文件夹。他们接受gh-pages作为发布的分支名称。正如我已经提到的，我们不会这样做。我不会仅仅为了发布构建而维护一个单独的分支。或者，通常，您可以在主分支中使用一个名为“docs”的文件夹</p><p id="db97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.在存储库设置下，需要启用GitHub页面。</p><p id="8c81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你愿意，你可以在这里阅读官方GitHub文档<a class="ae ky" href="https://help.github.com/en/articles/configuring-a-publishing-source-for-github-pages" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3a506440a9533b7c7046abb3c919e0ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*VkbkpiN0qC-YG1KSbooKIQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">启用GitHub页面。</p></figure><p id="969b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！请注意，您需要创建一个名为docs的文件夹，并且<em class="lv">已经将</em>提交到您的主分支，这样才能工作。如果你不这样做，GitHub不会在下拉列表中给你选项。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="04e8" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">修复相对路径</h1><p id="844e" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">奇怪的是，即使create-react-app官方文档推荐使用gh-pages插件，他们已经有了一个简单的特性来缓解这种需求。您只需要在您的<code class="fe nr ns nt nu b">package.json</code>文件中指定<code class="fe nr ns nt nu b">homepage</code>键。这需要在运行构建之前完成<em class="lv">。</em></p><p id="a886" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需在文件顶部添加密钥。该值应该是GitHub显示您的站点发布的URL。您可以从repo设置中启用GitHub Pages的同一个位置获得此信息。这通常采用https:// <strong class="lb iu">用户名</strong> .github.io/ <strong class="lb iu"> repo-name </strong>的格式。<strong class="lb iu"> </strong>包括您的<strong class="lb iu">用户名</strong>和适用的<strong class="lb iu">回购名称，当然还有</strong>。</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="24a9" class="nz mt it nu b gy oa ob l oc od">// package.json<br/>{<br/>  "name": "test-cra",<br/>  "version": "0.1.0"<br/>  "private": true,<br/>  <strong class="nu iu">"homepage": "https://username.github.io/test-cra"</strong><br/>  "dependencies": {<br/>...<br/>}</span></pre><p id="1fa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将修复我们的相对路径问题。现在，我们需要创建一个构建，并将其移动到正确的文件夹中。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="2f25" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">创建新版本</h1><p id="c8ef" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">既然我们的修复已经就绪，您需要构建您的应用程序。为此，只需在项目的根目录下运行<code class="fe nr ns nt nu b">npm run build</code>。</p><p id="e57a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，我们需要将<code class="fe nr ns nt nu b">build</code>文件夹重命名为<code class="fe nr ns nt nu b">docs</code>，因为GitHub将使用它来发布我们的应用。</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="9a43" class="nz mt it nu b gy oa ob l oc od">npm run build</span><span id="3aba" class="nz mt it nu b gy oe ob l oc od">mv build docs</span></pre></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="4fdc" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">出版</h1><p id="3061" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">一旦你做了这些简单的调整，你就可以继续把你的应用程序推到GitHub上。提交您的更改并推送到master。你的站点在GitHub上上线需要几分钟时间，但是你现在应该可以开始了。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="73d0" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="68c4" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我希望这能帮助你在GitHub页面上简单、快速、尽可能少的麻烦和维护地发布一个创建-反应-应用构建的web应用。感谢阅读！</p></div></div>    
</body>
</html>