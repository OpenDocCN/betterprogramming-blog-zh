<html>
<head>
<title>If You Want To Scale Your Application, Learn How to Async</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如果您想扩展您的应用程序，请学习如何异步</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/if-you-want-to-scale-your-application-learn-how-to-async-9c600a8f64ba?source=collection_archive---------3-----------------------#2022-01-24">https://betterprogramming.pub/if-you-want-to-scale-your-application-learn-how-to-async-9c600a8f64ba?source=collection_archive---------3-----------------------#2022-01-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0cb8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">理解异步编程的重要性</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/12d311086fcadd94bcf32bb43e6c481f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QimnT9rDTBQGZ4V0h-_9cg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@cookiethepom?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Cookie在<a class="ae kv" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的Pom </a>拍摄</p></figure><p id="c43f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们开始创建一个web应用程序时，我们并不关心它的性能如何(老实说，我们也不应该关心)。我们的目标是完成一个基本的概念验证，看看它是否有一些观众。这种方法非常适合，直到您的用户群超过一定数量。让我们看看当你的用户群增长时会发生什么。</p><p id="4b25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的服务器每秒接收5个请求。您有一个反向代理，用于将这些请求转发到您的HTTP服务器。您已经将HTTP服务器配置为将这些请求转发给应用程序，应用程序依次处理这些请求并返回响应。如果您正在使用像Django这样的框架，该框架使用Python，而Python在运行并行进程时有局限性，那么这种方法可能会导致问题。如果您是应用程序开发人员之一，并且没有做太多工作来优化您的端点，那么请相信我，您的应用程序完全依赖于您的HTTP服务器和反向代理的惊人架构！</p><p id="2511" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当大量请求涌入您的服务时，通过减少循环次数或用内置函数替换操作来优化您的应用程序代码只能到此为止。异步编程来拯救！这是一种新的编程模式。不直观。我自己学的时候发现真的很难懂。但是很有效！</p><h1 id="309d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">像个五岁小孩一样解释？</h1><p id="0dbe" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设一个用户正在你的网站上创建一个个人资料。现在，你必须发送一封邮件到他们的邮箱，要求确认。但是当服务器试图发送邮件时，它必须与SMTP服务器通信，等待它的响应，发送邮件，等待确认。</p><p id="ea96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看服务器做了多少等待？如果它能在这段时间内执行其他任务而不是无所事事呢？</p><p id="8a2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，这将减少完成该过程所需的总时间。因此，在这样的场景中，我们打破了逐行执行代码的模式，使用异步函数来加速执行。</p><p id="2353" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">思考异步的另一种方式是理解什么是阻塞和非阻塞任务。在后端，当您从数据库请求一些数据时，运行您的程序的进程正在等待数据库的响应并处于空闲状态。在这种情况下，它阻塞了进一步代码的执行。</p><p id="70e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然某些语言(如Javascript)在默认情况下有异步的AJAX调用，但在其他语言(如Python)中，您将不得不故意使您的请求异步。</p><p id="f7f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您会考虑进行异步操作的一些场景:</p><ol class=""><li id="e55f" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">当用户希望导入CSV记录并根据其中给出的详细信息创建配置文件时。您的服务器接收文件并向用户确认您正在处理请求，而您在后台创建记录。</li><li id="3a87" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">当用户需要来自多个来源的详细信息时，您必须向每个来源发出HTTP请求。您可以为每个源创建异步操作，并并行执行获取操作。</li></ol><h1 id="7017" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">怎么做？</h1><p id="38a6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">每种语言都有自己的做法。虽然javascript有async/await关键字来做这件事，但Java有线程，Python两者都有。在您的场景或语言中，哪种方法最适合您，这是您需要探索的。例如，如果你用python编程，你不必从头开始编写异步函数。</p><ol class=""><li id="6f0b" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">如果您必须将功能执行委托给另一个进程，您可以看看<a class="ae kv" href="https://docs.celeryproject.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> Celery项目</a>。这个工具令人难以置信，每个开始大规模使用python的人都应该学习如何使用它</li><li id="9428" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">如果你必须异步发出多个请求，你可以看看<a class="ae kv" href="https://pypi.org/project/grequests/" rel="noopener ugc nofollow" target="_blank"> grequests </a></li></ol><p id="762b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想深入了解如何从头开始编写异步程序，你可以看看蒂姆科技的这个教程——<a class="ae kv" href="https://www.youtube.com/watch?v=t5Bo1Je9EmE" rel="noopener ugc nofollow" target="_blank">视频</a></p><p id="154c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我现在不打算讨论并发性和并行性。这是另一篇文章的主题。敬请期待！</p><h1 id="d846" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">当这不是个好主意的时候。</h1><p id="cf97" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果您的任务是CPU密集型的，那么异步编程就不适合，因为异步编程利用了CPU在执行I/O操作时的空闲时间。</p><p id="11ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，如果你正在使用深度学习模型来分析图像，它不会对你的应用程序的规模产生太大影响。</p><h1 id="3390" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">外卖食品</h1><p id="646a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">熟悉不是线性执行的代码。这将需要一些努力，但它也将有助于您创建可伸缩性极高的应用程序。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="6851" class="np lt iq nl b gy nq nr l ns nt"><strong class="nl ir">Want to Connect?</strong></span><span id="b6cd" class="np lt iq nl b gy nu nr l ns nt">If you enjoyed this, you can subscribe to my <a class="ae kv" href="https://softwareengineeringwk.substack.com/" rel="noopener ugc nofollow" target="_blank">Software Engineering Weekly</a> newsletter and get similar stories directly in your inbox</span></pre></div></div>    
</body>
</html>