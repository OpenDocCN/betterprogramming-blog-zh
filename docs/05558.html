<html>
<head>
<title>How to Use ESLint and Prettier in Your Next.js Application With TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在带有TypeScript的Next.js应用程序中使用ESLint和appearlier</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-eslint-and-prettier-in-your-next-js-application-with-typescript-8ffc9ac5b672?source=collection_archive---------1-----------------------#2020-07-17">https://betterprogramming.pub/how-to-use-eslint-and-prettier-in-your-next-js-application-with-typescript-8ffc9ac5b672?source=collection_archive---------1-----------------------#2020-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9717" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">以相同的风格让每个人都在同一页面上</strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aac78fd677026a96e6affd6d98ac6c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZuFW60IqTgenQd6-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@_imkiran?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">赛·基兰·阿纳加尼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="2aa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自动化lint工具可以帮助开发人员节省时间，并让每个人都在同一页面上。当团队中的每个人都遵循相同的规则时，你就不必浪费时间讨论代码风格问题。这些工具可以捕捉许多语法和类型错误。</p><p id="3c92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<a class="ae ky" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>与<a class="ae ky" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">appellister</a>结合起来是一种对代码进行自动语法扫描和重新格式化的好方法。这将确保在缩进、间距、分号等方面遵循一致的规则。</p><p id="897b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们设置这些技术，以便在使用<a class="ae ky" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">类型脚本</a>的<a class="ae ky" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>项目中使用它们。如果你正在开始一个新项目，你可以<a class="ae ky" href="https://medium.com/better-programming/how-to-set-up-next-js-with-typescript-5f912766c88" rel="noopener">阅读我的文章</a>关于如何用TypeScript设置Next.js。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ffd0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">埃斯林特</h1><p id="772a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们从添加核心的ESLint林挺库、Lint类型脚本代码的解析器、特定于类型脚本的插件和特定于React的插件开始。</p><p id="94d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在终端中，转到项目的根目录，运行以下命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7f69" class="ne md it na b gy nf ng l nh ni">yarn add -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-react</span></pre><p id="c9de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在应该在项目的根目录下创建一个<code class="fe nj nk nl na b">.eslintrc.json</code>文件。我们可以在这个文件中添加我们的林挺规则:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b387" class="ne md it na b gy nf ng l nh ni">touch .eslintrc.json</span></pre><p id="cad6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您已经可以将默认选项添加到该文件中。我们将继续添加我们的选项:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7e79" class="ne md it na b gy nf ng l nh ni">{<br/>  "parser": {},<br/>  "extends": [],<br/>  "rules": {},<br/>  "globals": {}<br/>}</span></pre><p id="6ea1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，ESLint依赖解析器来读取JavaScript代码。我们使用<a class="ae ky" href="https://github.com/typescript-eslint/typescript-eslint#readme" rel="noopener ugc nofollow" target="_blank">@ typescript-eslint/parser</a>(可以读取TypeScript的替代解析器)，所以我们需要告诉ESLint改用它。除此之外，我们使用<a class="ae ky" href="https://github.com/typescript-eslint/typescript-eslint" rel="noopener ugc nofollow" target="_blank">@ typescript-eslint/eslint-plugin</a>(可以打开或关闭的规则列表)。我们还扩展了插件<a class="ae ky" href="https://github.com/yannickcr/eslint-plugin-react" rel="noopener ugc nofollow" target="_blank"> react/recommended </a>，它包含react特定的林挺规则。</p><p id="8873" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了配置解析器和扩展插件，我们需要修改我们需要更新配置的文件，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="001e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.js不要求您将React导入每个组件，这意味着如果您在Next.js应用程序中使用这个配置，您将开始得到错误。我们可以通过将<code class="fe nj nk nl na b">React</code>添加到<code class="fe nj nk nl na b">global</code>中并关闭<code class="fe nj nk nl na b">react-in-jsx-scope</code>规则来解决这个问题。</p><p id="94c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的最终配置将如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2630" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">较美丽</h1><p id="e18a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在让我们添加更漂亮的和一些插件，使它能很好地与ESLint一起工作:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7297" class="ne md it na b gy nf ng l nh ni">yarn add -D prettier eslint-config-prettier eslint-plugin-prettier</span></pre><p id="080f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/prettier/eslint-config-prettier" rel="noopener ugc nofollow" target="_blank">eslint-config-appellister</a>将禁用任何可能干扰现有更漂亮规则的林挺规则，并且<a class="ae ky" href="https://github.com/prettier/eslint-plugin-prettier" rel="noopener ugc nofollow" target="_blank">ESLint-plugin-appellister</a>将作为ESLint的一部分运行更漂亮的分析。</p><p id="a2c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将它们添加到我们的ESLint配置中，以完成我们的ESLint配置。确保将更漂亮的放在最后，以便它可以覆盖其他配置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="c7e6" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">配置更漂亮</h2><p id="98cd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">更漂亮的是固执己见，故意限制选项的数量(<a class="ae ky" href="https://prettier.io/docs/en/why-prettier.html" rel="noopener ugc nofollow" target="_blank">读为什么</a>)。如果你愿意，你可以通过在你的项目的根目录下创建一个<code class="fe nj nk nl na b">.prettierrc</code>文件来覆盖一些漂亮的规则:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4772" class="ne md it na b gy nf ng l nh ni">touch .prettierrc</span></pre><p id="f471" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下配置是一个示例文件。我个人使用这个作为我的设置，但是你可以在官方文档中找到所有可用的配置<a class="ae ky" href="https://prettier.io/docs/en/configuration.html" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6b09" class="ne md it na b gy nf ng l nh ni">{<br/>	"semi": true,<br/>	"singleQuote": true<br/>}</span></pre><h2 id="93dd" class="ne md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">添加一个git挂钩</h2><p id="06b2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">可选地，您可以使用<a class="ae ky" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank"> husky </a>和<a class="ae ky" href="https://github.com/azz/pretty-quick" rel="noopener ugc nofollow" target="_blank"> pretty-quick </a>来添加一个git挂钩，它将始终lint并格式化您更改的文件。</p><p id="6bb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，将它们作为开发依赖项安装:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2c9d" class="ne md it na b gy nf ng l nh ni">yarn add pretty-quick husky -D</span></pre><p id="db2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在将以下<code class="fe nj nk nl na b">husky</code>和<code class="fe nj nk nl na b">lint-staged</code>配置添加到您的<code class="fe nj nk nl na b">package.json</code>中:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c760" class="ne md it na b gy nf ng l nh ni">"scripts": {<br/>  ...<br/>  "lint": "eslint --ext .ts,.tsx",<br/>},</span></pre><p id="92bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的<code class="fe nj nk nl na b">package.json</code>中添加预提交钩子:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e7fe" class="ne md it na b gy nf ng l nh ni">"husky": {<br/>  "hooks": {<br/>    "pre-commit": "pretty-quick --staged &amp;&amp; npm run lint"<br/>   }<br/>},</span></pre><p id="f338" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，每当您提交您的更改时，它都会格式化并lint您的新代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f41d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">代码编辑器扩展</h1><p id="a8a2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你还没有这样做，我推荐你为你的代码编辑器安装<a class="ae ky" href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" rel="noopener ugc nofollow" target="_blank">漂亮的</a>和<a class="ae ky" href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" rel="noopener ugc nofollow" target="_blank"> ESLint </a>扩展。如果您不想每次都手动格式化文件，也可以在保存时格式化。我强烈推荐这个。对于Visual Studio代码，您需要做的就是打开VSCode用户设置/首选项，并将<code class="fe nj nk nl na b">Format On Save</code>选项设置为<code class="fe nj nk nl na b">true</code>。</p><p id="89e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！感谢阅读。我希望它有帮助。</p></div></div>    
</body>
</html>