<html>
<head>
<title>A New Way to Write Conditional Statements in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Kotlin编写条件语句的新方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-new-way-to-write-conditional-statements-in-kotlin-a3c029e417dc?source=collection_archive---------7-----------------------#2020-07-10">https://betterprogramming.pub/a-new-way-to-write-conditional-statements-in-kotlin-a3c029e417dc?source=collection_archive---------7-----------------------#2020-07-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9adb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Kotlin中使用“when”使代码更具可读性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30cff42796af2f653d3668aa5ffa63d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3Z8ex30ryeSp0UDz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sctgrhm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="c588" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自从Kotlin诞生以来，它一直是全球Android开发者开发应用程序的首选语言之一。人们喜欢Kotlin有各种原因:扩展功能、做事方便、样板代码少、跨平台支持等等。</p><p id="16ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我们中有许多人忽视了科特林的小事情的潜力。比如我还是偶尔看到很多队友用<code class="fe lv lw lx ly b">if</code>和<code class="fe lv lw lx ly b">else if</code>嵌套语句。</p><p id="209e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了Kotlin，我们可以有一个独特而简单的解决方案，可以处理多种问题。例如，<code class="fe lv lw lx ly b">when</code>语句可以替换任何Kotlin项目中的所有条件语句，只要你足够聪明地使用它。</p><p id="9b32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不再拖延，让我们学习如何有效地使用Kotlin中的<code class="fe lv lw lx ly b">when</code>语句。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e10f" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">将If/Else替换为When</h1><p id="9931" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">If</code> / <code class="fe lv lw lx ly b">Else</code>语句自编程出现以来就一直存在。不管平台/语言如何，开发人员都倾向于将它们用于条件执行。</p><p id="39b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢科特林，我们不再需要使用旧的风格。<code class="fe lv lw lx ly b">when</code>语句处理所有类型的条件语句，包括<code class="fe lv lw lx ly b">if</code> / <code class="fe lv lw lx ly b">else</code>，它们的嵌套语句也可以用<code class="fe lv lw lx ly b">when</code>替换。</p><p id="c798" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们考虑一个简单的例子，我们基于输入字符串返回表情符号。如果你考虑按常规写作，我们可以这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">传统的if/else执行</p></figure><p id="1a53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用Kotlin中的<code class="fe lv lw lx ly b">when</code>语句重写上面的代码。它提供了比<code class="fe lv lw lx ly b">if</code> / <code class="fe lv lw lx ly b">else</code>更好的可读性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用when语句替换if/else。</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="93b3" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">将开关盒替换为When</h1><p id="3c0c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">与<code class="fe lv lw lx ly b">if</code> / <code class="fe lv lw lx ly b">else</code>语句类似，<code class="fe lv lw lx ly b">switch </code>格是古代处理附条件执行的方式之一。在Kotlin中，为了在实现条件执行时保持一致性，我们可以用类似的方式将<code class="fe lv lw lx ly b">switch</code> case和<code class="fe lv lw lx ly b">if</code> / <code class="fe lv lw lx ly b">else</code>替换为<code class="fe lv lw lx ly b">when</code>。</p><p id="f84a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们看看如何以传统方式用<code class="fe lv lw lx ly b">switch</code>实现上面的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">开关案例示例</p></figure><p id="22f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Switch</code> case可以替换为<code class="fe lv lw lx ly b">when</code>语句，类似于<code class="fe lv lw lx ly b">if</code> / <code class="fe lv lw lx ly b">else</code>。这将使代码更具可读性、一致性，并为新开发人员提供快速适应性。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="db76" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用When块返回值</h1><p id="2253" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">到目前为止，您已经看到了Kotlin中的<code class="fe lv lw lx ly b">when</code>块替换条件语句的能力。但它能做的不止这些。例如，它可以在执行必要的步骤后从条件块中返回值。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">When块返回值。</p></figure><p id="0000" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种类型的代码实现为开发人员节省了大量时间。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6644" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">When的任意条件</h1><p id="cc31" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用一个或多个检查来用<code class="fe lv lw lx ly b">when</code>操作符执行一个块:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用when执行任意语句。</p></figure><p id="008b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有一种情况必须匹配要执行的相应代码块，所以逗号充当了一个<code class="fe lv lw lx ly b">OR</code>操作符。除此之外，<code class="fe lv lw lx ly b">when</code>块执行类似range的内部条件(如上所示)。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="2bbd" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用不带参数的When</h1><p id="782d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">到目前为止，我们已经在一个论点中使用了<code class="fe lv lw lx ly b">when</code>。但是<code class="fe lv lw lx ly b">when</code>真正的潜力在于我们可以不带任何参数的使用它，这是我在使用Kotlin之前从未见过的。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">When block不带参数。</p></figure><p id="80b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它作为一个简单的<code class="fe lv lw lx ly b">if</code> / <code class="fe lv lw lx ly b">else</code>块，具有类级别的可变条件。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b1a0" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">将实例与When进行比较</h1><p id="5ded" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们还可以在运行时使用<code class="fe lv lw lx ly b">is</code>操作符检查给定的操作符是否是特定类型的实例。<code class="fe lv lw lx ly b">is</code>操作符类似于Java中的<code class="fe lv lw lx ly b">instanceof</code>操作符。我们可以在<code class="fe lv lw lx ly b">when</code>块中使用<code class="fe lv lw lx ly b">is</code>和<code class="fe lv lw lx ly b">!is</code>操作符。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">实例检查与科特林的时候。</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="18f3" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用When的优势</h1><ul class=""><li id="0280" class="nf ng it lb b lc my lf mz li nh lm ni lq nj lu nk nl nm nn bi translated">在Java中，像<code class="fe lv lw lx ly b">switch</code>这样的一些条件语句只能用原始数据类型、枚举和字符串类来操作。但是Kotlin允许将<code class="fe lv lw lx ly b">when</code>用于用户定义的类型。这使得它对开发人员更加友好。</li><li id="7336" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">与Java不同，Kotlin的<code class="fe lv lw lx ly b">when</code>可以用于动态值，比如函数的返回类型。</li><li id="946c" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">我们还可以使用充当<code class="fe lv lw lx ly b">contains</code>的<code class="fe lv lw lx ly b">in</code>操作符来检查给定的参数是否存在于集合中。</li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="5e7a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">奖金</h1><p id="d395" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">要了解更多关于Kotlin的信息，请阅读Kotlin高级编程系列的前几部分:</p><ul class=""><li id="d466" class="nf ng it lb b lc ld lf lg li nt lm nu lq nv lu nk nl nm nn bi translated"><a class="ae ky" href="https://medium.com/better-programming/advanced-android-programming-with-kotlin-5e40b1be22bb" rel="noopener">“使用Kotlin进行高级编程</a>”</li><li id="0aa0" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://medium.com/android-dev-hacks/advanced-android-programming-with-kotlin-part-2-aae2a15258b0" rel="noopener">“用Kotlin进行高级编程—第二部分</a>”</li><li id="6249" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://medium.com/better-programming/advanced-programming-in-kotlin-2e01fbc39134" rel="noopener">“用Kotlin进行高级编程—第三部分</a>”</li><li id="456a" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://medium.com/better-programming/advanced-android-programing-in-kotlin-part-4-187b88fea048" rel="noopener">“kot Lin中的高级Android编程—第四部分”</a></li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e614" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="f5e1" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。</p></div></div>    
</body>
</html>