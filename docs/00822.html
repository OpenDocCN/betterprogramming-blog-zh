<html>
<head>
<title>Comparing Mapbox GL JS and D3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较Mapbox GL JS和D3.js</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/comparison-of-mapbox-gl-js-and-d3-js-66dc4525b70b?source=collection_archive---------7-----------------------#2019-07-17">https://betterprogramming.pub/comparison-of-mapbox-gl-js-and-d3-js-66dc4525b70b?source=collection_archive---------7-----------------------#2019-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b135" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">哪个是高级映射库？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7c34349779af0ebb65b6cff34c0e60ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*phYODhdYoPmZjvv5hEAhmQ.png"/></div></div></figure><p id="9e02" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当您想要根据您的数据创建在线地图时，有大量的选项可供选择。</p><p id="ec57" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我教D3或者和人们谈论他们正在使用的工具时，经常出现的问题是，“D3和Mapbox GL JS相比如何？”</p><p id="cf7b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是我想用这个帖子回答的问题。我不仅在概念上比较这两个库，也在代码上进行比较。</p><p id="4f74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从一个更令人困惑的方面开始:</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="06fd" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">名字</h1><p id="fcf8" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">两个库的定义如下:</p><blockquote class="mu mv mw"><p id="eac5" class="ku kv mx kw b kx ky ju kz la lb jx lc my le lf lg mz li lj lk na lm ln lo lp im bi translated">Mapbox GL JS是一个JavaScript库，用于交互式、可定制的网络矢量地图。它采用符合Mapbox样式规范的地图样式，将它们应用于符合Mapbox矢量切片规范的矢量切片，并使用WebGL渲染它们。</p></blockquote><p id="80cc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Mapbox GL JS是跨平台生态系统Mapbox GL <em class="mx">、</em>的一部分，Mapbox是一家专注于位置数据的公司。Mapbox <em class="mx"> </em> GL是由Mapbox工程师创建的。所以上面才会有公司的名字。是基于fleet . JS，从现在开始我就把Mapbox GL JS简称为Mapbox，以少写。:)</p><blockquote class="mu mv mw"><p id="9be2" class="ku kv mx kw b kx ky ju kz la lb jx lc my le lf lg mz li lj lk na lm ln lo lp im bi translated">D3(或D3.js)是一个JavaScript库，用于使用web标准可视化数据。D3帮助您使用SVG、Canvas和HTML将数据变得生动。</p></blockquote><p id="3400" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">D3.js和Mapbox在概念上是很不一样的。Mapbox是一个创建所谓的<em class="mx">滑动地图</em>的库，与传单、OpenLayers和GoogleMaps有着良好的合作关系。</p><blockquote class="mu mv mw"><p id="e91a" class="ku kv mx kw b kx ky ju kz la lb jx lc my le lf lg mz li lj lk na lm ln lo lp im bi translated">一般来说，滑动地图是一个指现代网络地图的术语，它可以让你缩放和平移(当你拖动鼠标时，地图会滑动)。</p></blockquote><p id="fc3c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">OpenStreetMap的这段话很好地解释了这一点:)<br/>尽管使用这个定义，D3地图也可以是滑动地图。您可以为它们添加缩放和平移功能。</p><blockquote class="mu mv mw"><p id="b3d2" class="ku kv mx kw b kx ky ju kz la lb jx lc my le lf lg mz li lj lk na lm ln lo lp im bi translated">Slippy Maps的一个核心组成部分是图像应该作为网格上的图块提供。切片图像是浏览大量栅格和矢量地图数据的有效方法，这些数据太大而无法作为单个地图图像进行渲染。</p></blockquote><p id="dcf3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个来自行星开发者资源“滑滑地图101”的解释更具技术性，但也更切题。这些地图(用于)从服务器加载图像，并平铺它们以加快加载速度。如今，矢量图像已经取代了图像，但是它们仍然被用作加载和渲染速度更快的图像。</p><p id="5acc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们看一些代码。或者准确地说是渲染上述地图的完整代码。Mapbox地图在左边，D3地图在右边。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">代码沙箱中的<em class="nh"> mapbox </em>代码</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">沙盒中的d3代码</p></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4278" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">代码量</h1><p id="0aa0" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">您看到的第一个区别是Mapbox的代码几乎是D3代码的两倍长。这有点令人惊讶。但这是因为它的样式花费了很多精力，并且是以可读的方式格式化的。</p><p id="71dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:D3</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="7650" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">易于设置</h1><p id="9870" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">两者都相对容易设置。您要么下载他们的代码并集成它，要么像我在示例中所做的那样使用CDN。</p><h2 id="cd04" class="ni ly it bd lz nj nk dn md nl nm dp mh ld nn no mj lh np nq ml ll nr ns mn nt bi translated">地图框设置:</h2><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="7a4e" class="ni ly it nv b gy nz oa l ob oc">&lt;script src="<a class="ae od" href="https://unpkg.com/mapbox-gl@0.49.0" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/mapbox-gl@0.49.0</a>" type="text/javascript"&gt;&lt;/script&gt;<br/>&lt;link href="<a class="ae od" href="https://unpkg.com/mapbox-gl@0.49.0/dist/mapbox-gl.css" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/mapbox-gl@0.49.0/dist/mapbox-gl.css</a>" rel="stylesheet" type="text/css"&gt;</span></pre><p id="c001" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您需要包含JavaScript库代码和用于Mapbox的CSS。样式表对于确保导航元素可见很重要。此外，您需要在<a class="ae od" href="https://docs.mapbox.com/help/how-mapbox-works/access-tokens/" rel="noopener ugc nofollow" target="_blank">mapbox.com</a>注册以获得API令牌来使用他们的底图。但那是免费的；只是你的电子邮件作为付款。:)</p><h2 id="31ba" class="ni ly it bd lz nj nk dn md nl nm dp mh ld nn no mj lh np nq ml ll nr ns mn nt bi translated">D3设置:</h2><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="d59a" class="ni ly it nv b gy nz oa l ob oc">&lt;script src="https://unpkg.com/d3@5.9.7/dist/d3.min.js" type="text/javascript"&gt;&lt;/script&gt;</span></pre><p id="8acf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于D3，你只需要包含库。确保使用最新版本。</p><p id="1857" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:D3</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="a111" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">底图</h1><p id="f139" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">最明显的区别是缺少<em class="mx"> d3 </em>的底图。但这是我故意做的。<em class="mx"> d3 </em>的强大之处在于它默认不包含底图。您希望数据成为地图的中心，而不是底图。</p><p id="6e1f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是比较重要的作品之一。你根据自己的需求选择库，D3和Mapbox服务于不同的需求。当您需要更多信息而不仅仅是数据时，如街道位置、更多标注等，Mapbox和其他基于底图的库会大放异彩。</p><p id="cfc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:地图盒子</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="c8c6" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">预测</h1><p id="97d1" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">第二大区别是地图投影。Mapbox使用<a class="ae od" href="https://en.wikipedia.org/wiki/Mercator_projection" rel="noopener ugc nofollow" target="_blank">墨卡托</a>作为默认设置，并且您不能更改投影。</p><p id="aaa7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在D3里，你自己选择投影。您可以从14个不同的投影列表中选择，也可以创建自己的投影。<a class="ae od" href="https://github.com/d3/d3-geo-projection" rel="noopener ugc nofollow" target="_blank"> D3投影资源</a></p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="4727" class="ni ly it nv b gy nz oa l ob oc">var projection = d3.geoEqualEarth();</span></pre><p id="a3d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:D3</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="3468" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">式样</h1><p id="4c8e" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">地图框样式是通过<a class="ae od" href="https://docs.mapbox.com/mapbox-gl-js/style-spec/" rel="noopener ugc nofollow" target="_blank">地图框样式规范</a>完成的，而<em class="mx"> d3 </em>样式是通过普通的SVG属性和CSS完成的。</p><p id="6c25" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能已经注意到了，我们需要在Mapbox中创建两个图层来设置填充和轮廓的样式。</p><p id="7286" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是样式规范的诸多限制之一。但是您可以使用样式规范做很多事情，并且不需要过多考虑实现。</p><p id="a2da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在D3里，你可以用SVG和CSS来设计几乎任何东西。而且更方便。</p><p id="5246" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这两种情况下，您都需要学习如何设计元素的样式。</p><h2 id="b29a" class="ni ly it bd lz nj nk dn md nl nm dp mh ld nn no mj lh np nq ml ll nr ns mn nt bi translated">地图框:</h2><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="3302" class="ni ly it nv b gy nz oa l ob oc">map.addLayer({<br/>      'id': 'berlin',<br/>      'type': 'fill',<br/>      'source': 'bb',<br/>      'paint': {<br/>        'fill-color': '#088',<br/>        'fill-opacity': 0.8<br/>      }<br/>    });<br/>    map.addLayer({<br/>      'id': 'berlin-stroke',<br/>      'type': 'line',<br/>      'source': 'bb',<br/>      'paint': {<br/>        'line-width': 1,<br/>        'line-color': '#000',<br/>      }<br/>    });</span></pre><h2 id="9610" class="ni ly it bd lz nj nk dn md nl nm dp mh ld nn no mj lh np nq ml ll nr ns mn nt bi translated">D3:</h2><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="87e0" class="ni ly it nv b gy nz oa l ob oc">.attr('fill', '#088')<br/>.attr('stroke', '#000');</span></pre><p id="2dd4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:D3</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="c697" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">将地图居中</h1><p id="8222" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">虽然Mapbox依赖于您(创建者)来预先设置缩放、居中等，但是<em class="mx"> d3 </em>允许您使用您的数据来设置范围。</p><p id="d73e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以让Mapbox计算出最好的缩放和居中，但是这比较困难，我目前没有包括这个。我将来可能会延长这篇文章。</p><h2 id="17ab" class="ni ly it bd lz nj nk dn md nl nm dp mh ld nn no mj lh np nq ml ll nr ns mn nt bi translated">地图框</h2><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="850f" class="ni ly it nv b gy nz oa l ob oc">center: [13.79,53.545], <br/>zoom: 5</span></pre><h2 id="6367" class="ni ly it bd lz nj nk dn md nl nm dp mh ld nn no mj lh np nq ml ll nr ns mn nt bi translated">D3</h2><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="5b9f" class="ni ly it nv b gy nz oa l ob oc">projection.fitExtent([[20, 20], [width, height]], bb);</span></pre><p id="8c2f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:D3</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="b1b1" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">你需要学习的概念</h1><p id="f22b" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">使用<em class="mx">地图框</em>需要学习或理解的概念肯定更少。你只需要知道有层和源，调用适当的函数(看例子和文档:)，阅读Mapbox样式规范，你就可以开始了。</p><p id="a15b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有了<em class="mx"> D3 </em>，你应该知道HTML的基础，学一点SVG，知道调用哪个D3函数(看例子和文档)。</p><p id="82d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">获胜者:地图盒子</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8f39" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">结论</h1><p id="1616" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">正如我在这篇文章开始时提到的，D <em class="mx"> 3 </em>和Mapbox的用途有些不同。但它们确实有相似的特征。</p><p id="196f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么他们是如何相互竞争的呢？让我们找出答案。</p><p id="34b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">T5地图框T7】2<br/>T9】D3</strong>5</p><p id="8d6e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我宣布D <strong class="kw iu"> <em class="mx"> 3 </em>为本次比较的获胜者</strong>。但是请记住，如果您需要底图，Mapbox可能更容易设置。</p></div></div>    
</body>
</html>