# 作为一名软件工程师，以下是你应该学会热爱遗留代码的原因

> 原文：<https://betterprogramming.pub/as-a-software-engineer-heres-why-you-should-learn-to-love-legacy-code-1f93a967db9c>

## 遗留代码是健壮的代码

![](img/8a213d1b64aea7b47c075843b7ec5761.png)

塞尔日·库图佐夫在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄的照片

今天是你在科技公司工作的第一天。你非常兴奋，期待着入职流程。一旦你完成入职流程，你会非常兴奋地看到你的第一个任务。你的经理有一份票单给你。然而，当你检查这些票证时，你意识到你正在维护一个已经运行了十多年的系统。你可能在想，“没关系。这是我第一次来这家公司，他们给我最不合意的任务是有原因的。下一次冲刺，我会得到一个更激动人心的‘绿地’项目。”

随着时间的推移，您意识到您当前处理的许多团队项目都是遗留系统。你的心开始下沉。你认为这份新工作会与你以前的工作不同。你期待参与一些很酷的项目。然而，未来似乎不会有新的项目。你已经为面试问题夜以继日地学习了。然而，一旦你通过了面试，你就陷入了遗留代码的工作中。

尽管和自己有这些冲突，你还是有希望的。处理你不喜欢的事情有两种方法:改变你的环境或者改变你的心态。你会选择哪一个？

第一种选择似乎是最直接的。软件工程师的平均任期是两年左右。大多数软件工程师每 1-2 年换一次工作。因此，你可以通过寻找一家从事“绿地”项目的公司来改变你的处境。

尽管这种选择比后者更受欢迎，但您很快就会意识到所有公司都有遗留代码。你的级别越高，你在编程生涯的大部分时间里就越会以这样或那样的形式使用遗留代码。

作为一名软件工程师，我想解释为什么你应该改变避免使用遗留代码的心态，并在遗留代码中找到积极的一面。

# 你会更好地理解你团队的领域

有什么比接触遗留代码库更好的方式来理解你公司的架构和领域是如何工作的呢？处理遗留代码并不意味着你需要把它作为遗留代码。一个好的开发人员会努力让项目比原始代码库更好。

您经常会在遗留代码中发现一些有用的见解。保持业务运行的代码片段解决了业务所需的所有边缘情况。遗留系统已经经历了生产领域，它有被真正的用户压扁的真正的错误。

你会明白为什么以前的开发者使用 if-else 语句而不是某种设计模式。你会意识到你的公司向客户收取双倍的费用。

一旦你知道了这些见解，你就会成为那个系统的领域专家。您可以轻松地为产品团队的新功能请求创建快速交付。当出现生产问题时，您可以快速解决问题，并给出系统问题的详细解释。这会让你的团队成员和上层管理人员信任你，依赖你并把你分配到新的项目中。

我团队中的许多开发人员不想接触遗留代码库。有一名开发人员负责维护遗留系统。然而，当涉及到遗留流程的任何生产问题时，除了开发人员之外，没有团队知道发生了什么。随着时间的推移，其他团队的成员和上层管理人员了解他，因为他已经证明了他具有了解所有业务用例及边缘案例的专业知识。

你将成为团队中寻求变革或建议的人，因为你已经克服了对使用遗留系统的恐惧。

如果你看看版本控制系统，通常，你会意识到哪个文件修改的最多。如果十年来没有人接触过代码，那么很有可能，这些代码不需要太多的测试，因为这些代码每天都在变化，以处理另一种边缘情况。

一旦你理解了你的领域，你可以建议新的技术或实践来使系统变得更好。因此，它会产生更大的影响。

# 遗留代码是健壮的代码

它是遗产是有原因的。也许，故事是这样的——当团队开始这个项目时，团队创造了一个系统，这是一个优秀的设计，人们开始说，“好吧，也许我们可以用它来做这个，这个和这个。”

虽然，随着时间的推移，积累了技术债，但还是管用的。这些系统具有惊人的弹性——它是服务于业务的代码，并且已经为业务服务了这么多年。否则，它不可能存活下来。

当我们需要维护或修复遗留系统时，有两种选择:用胶带粘起来或者从头重写。

虽然用胶带解决小错误的方法可能在短期内有效，但迟早你未来的自己会讨厌你复制粘贴那段丑陋的代码。就像一个废弃的建筑，它可能会完好无损很长时间，但只要有一个水龙头坏了，整个厕所就崩溃了。考虑这个问题时，您可能会选择第二个选项——忘掉遗留系统，从头开始重写。

你能想象如果你忘记遗留系统并从头重写会发生什么吗？

重写经常会以失败告终，或者开发人员永远不会完成它。我们经常斜着眼睛看遗留代码，并想，“如果编写这个可怕代码的人能让它工作，那一定很容易。”

但事实并非如此。

我记得花了很多时间试图重写一个完全不可读的函数。然而，我一重写函数，其他东西就坏了。我保持了函数的原样——因为在代码中有某种魔力使系统保持运行。

你可能认为这些代码很可怕，但是这些代码经历了无数次的战斗。当你从头开始写的时候，你经常不知道战斗故事，你经常会失去一些关于领域的关键见解和观点。

接触遗留系统有助于您理解战斗背后的所有补丁和恐惧，并了解系统领域，而无需付出生产问题的代价。

# 掌握解题知识

在编写代码时，我们经常被教导各种设计模式和 SRP 或 DRY 的使用。虽然我们在网上看到的例子可能很明显，但不容易知道为什么。为什么要抽象出一系列重复的代码到它的方法里？为什么我们需要使用那个设计模式而不是创建一个新的类对象？

处理遗留代码迫使您使用这些设计模式，并面对您早期学习的设计模式。在重构和单元测试中，你会发现新的模式，学习新的技术。您将发现，在函数内部创建一个新的数据库实例而不是将其作为参数传递可能很难进行单元测试。你会发现写接口比写对象好得多。您将很快意识到某些代码结构的危险，这些代码结构使事情难以测试。

没有单元测试的安全毯，您将很快了解到哪些代码不需要测试就可以放心地重构。是的，确实有一些代码需要在没有测试的情况下进行重构，但是我将把它留到另一个讨论中。

这种技能是可以转移的。这些技能是初级工程师和中级工程师的区别。你将能够很快适应新的代码库，尤其是已经使用了几十年的代码库。这些技能组合并不是在学习一些明年就会过时的库。这项技能是解决问题的基础。

# 结论

如果你在为任何一家软件公司工作，你很可能必须处理遗留代码。遗留代码可能会引起大多数开发人员的恐惧和厌恶。然而，遗留代码是您了解系统领域的最佳方式。遗留代码在设计上也是健壮的，因为遗留代码曾经是使软件平稳运行的最佳方式。最后，你将获得解决问题和重构的技能，你可以在你的下一个软件工程师角色中使用。掌握遗留代码的挑战，你将终生拥有一份工作。

# 参考

*   学会热爱遗留代码。不久前，我为… 做了一个演示
*   学会热爱你的遗留代码。遗留代码是生存代码

*最初发表于*[T5【https://edward-huang.com】](https://edward-huang.com/career/software-development/programming/life-lesson/2021/08/05/as-a-software-engineer-this-is-why-you-should-learn-to-love-legacy-code/)*。*