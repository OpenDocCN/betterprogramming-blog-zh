<html>
<head>
<title>Implementing Sign in with Apple Using Django (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Django实现苹果登录(第1部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-sign-in-with-apple-using-django-a-recipe-part-1-of-3-fc5695e6e9db?source=collection_archive---------7-----------------------#2019-12-07">https://betterprogramming.pub/implementing-sign-in-with-apple-using-django-a-recipe-part-1-of-3-fc5695e6e9db?source=collection_archive---------7-----------------------#2019-12-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="203a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">证书和密钥</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/cc201fc3012bc450277e8e2dc7a6bb60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*dhPwRinHBrKUuR2GWbbohg.png"/></div></figure><p id="d0c3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在2019年WWDC大会上，苹果公司宣布与苹果公司签约，这是第三方登录的替代方案——一种长期由脸书、推特、谷歌和其他公司提供的机制。当时，我正在开发一个应用程序，它具有登录脸书和谷歌的功能。因为我发现在Apple上实现登录的文档非常混乱，所以我不让自己在我开发的应用程序中实现它。</p><p id="6086" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">几周前，我开发的应用程序终于可以上传到应用商店了。我测试了所有东西，并将其发送给苹果公司进行审查。可悲的是，应用程序被拒绝了，我得到了苹果的回复，说我必须在应用程序中实现与苹果的登录。</p><p id="525f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">真正的挑战才开始。我查阅了苹果公司提供的所有文档(这只会导致更多的混乱)、样本项目、视频和其他博客，最终找到了答案。</p></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><p id="41d3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在本文中，我将向您演示如何在后端使用Django的iOS应用程序中实现苹果登录。但在此之前，请注意，使用Apple登录只有从iOS 13及更高版本才可用，并且只能使用Xcode 11或更高版本实现。现在，我们开始吧。</p><p id="da15" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">基本上，整个实施过程可以分为三个部分:</p><ol class=""><li id="800e" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll lz ma mb mc bi translated"><a class="ae lm" href="https://medium.com/@sagunraj/implementing-sign-in-with-apple-using-django-a-recipe-part-1-of-3-fc5695e6e9db" rel="noopener">密钥和标识符的配置</a></li><li id="544d" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated"><a class="ae lm" href="https://medium.com/@sagunraj/implementing-sign-in-with-apple-using-django-a-recipe-part-2-of-3-12d673cf6eaf" rel="noopener">通过实现与苹果的登录来准备后端</a></li><li id="5102" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated"><a class="ae lm" href="https://medium.com/@sagunraj/implementing-sign-in-with-apple-using-django-a-recipe-part-3-of-3-12d66947d4f5" rel="noopener">在iOS应用中实现苹果登录</a></li></ol></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><h1 id="1a6e" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">1.密钥和标识符的配置</h1><p id="28b8" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">设置“用应用程序登录”的第一步是将“用苹果程序登录”功能添加到iOS应用程序的功能列表中。这一步有两种可能的情况:</p><ol class=""><li id="d3ee" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll lz ma mb mc bi translated">“自动管理签名”被选中(自动签名)</li><li id="612d" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">“自动管理签名”未选中(手动签名)</li></ol><h2 id="1e20" class="nf mj it bd mk ng nh dn mo ni nj dp ms kz nk nl mu ld nm nn mw lh no np my nq bi translated">场景1:“自动管理签名”被选中(自动签名):</h2><p id="56c2" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">如果您在签名部分选择了“自动管理签名”,那么这意味着我们要做的工作更少了。Xcode将管理其他一切。在这种情况下，我们必须:</p><ol class=""><li id="154c" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll lz ma mb mc bi translated">前往Xcode的项目导航器。</li><li id="d03f" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">选择Xcode项目。</li><li id="6f17" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">选择所需的目标。</li><li id="6d45" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">转到签名和功能选项卡。</li><li id="369a" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">单击+功能按钮。</li><li id="cf63" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">选择使用Apple登录。</li></ol><p id="c44c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">通过完成上述步骤，您将完成向应用程序添加新功能的自动签名方法。</p><p id="8314" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在自动签名方法中，Xcode会将“使用Apple登录”功能添加到授权中，将其与开发者门户同步，并自动为您生成新的预置描述文件。因此，您的键和标识符配置工作就完成了。</p><h2 id="539b" class="nf mj it bd mk ng nh dn mo ni nj dp ms kz nk nl mu ld nm nn mw lh no np my nq bi translated">场景2:“自动管理签名”未选中(手动签名)</h2><p id="bedd" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">但是，如果您未选中“自动管理签名”选项，则表示您选择了手动签名，您必须遵循以下步骤:</p><ol class=""><li id="4f67" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll lz ma mb mc bi translated">前往Xcode的项目导航器。</li><li id="da80" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">选择Xcode项目。</li><li id="3b7d" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">选择所需的目标。</li><li id="9ab0" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">转到签名和功能选项卡。</li><li id="9aaa" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">单击+功能按钮。</li><li id="1b70" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll lz ma mb mc bi translated">选择使用Apple登录。</li></ol><p id="f2f1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">完成这些步骤后，剩下的步骤是:</p><p id="9f76" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">7 .<strong class="ks iu">。将使用Apple登录添加到app ID: </strong>在此步骤中，需要完成的任务有:</p><ul class=""><li id="9f79" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">登录苹果开发者门户，选择标识符。</li><li id="1ad1" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated">选择您想要添加的应用程序使用Apple登录。</li><li id="eb92" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated">向下滚动以登录Apple，并勾选复选框。</li><li id="d259" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated">单击保存。</li></ul><p id="afa3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">默认情况下，此应用ID被启用为主要应用ID。或者，如果您使用多个应用程序或web身份验证，您可能需要将它们作为一个组分配给此应用ID。</p><p id="8fc2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu"> 8。重新生成预置描述文件:</strong>由于我们已经对应用程序ID进行了修改，现有的预置描述文件将失效。因此，我们需要按照给定的步骤重新生成它们:</p><ul class=""><li id="8ecd" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">转到个人资料。</li><li id="b0a9" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated">点击与应用程序ID相关联的每个配置文件，然后再次保存。</li><li id="aae7" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated">要么从门户手动下载，要么通过Xcode下载。</li></ul><p id="74e4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在，既然已经创建并下载了标识符，那么在我们的iOS应用程序中实现与Apple登录的一切都已经准备好了。</p><p id="3630" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">然而，由于我们希望我们的iOS应用程序在有人试图使用苹果登录时与后端服务器通信，我们必须准备好我们的后端。为了准备好我们的后端，我们首先需要一把钥匙。现在，让我们为我们的后端创建一个键:</p><ul class=""><li id="d5ca" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">登录苹果开发者门户。</li><li id="7f6a" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated">前往“密钥”，然后点按“创建密钥”</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi ns"><img src="../Images/3cdbdeb502778ba7c1195dba249388f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0i69Q3ID26x_S6Uw.png"/></div></div></figure><ul class=""><li id="765a" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">给它一个特定的名称，勾选“使用Apple登录”复选框，然后单击“配置”。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi nx"><img src="../Images/9e9e79948b19491f856d5030546e25df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwYB50wjGea63qSUX5CRmQ.png"/></div></div></figure><ul class=""><li id="7110" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">选择您的应用程序ID，然后单击保存。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi ny"><img src="../Images/99bac41d09d517da5d3598cb5bf18c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_eUwg2BSSQVPp8o_9m2gQ.png"/></div></div></figure><ul class=""><li id="376e" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">单击继续。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi nx"><img src="../Images/9e9e79948b19491f856d5030546e25df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwYB50wjGea63qSUX5CRmQ.png"/></div></div></figure><ul class=""><li id="ebfd" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">单击注册以生成密钥。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi nz"><img src="../Images/8d309fa4802f26c43b577650e734f131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjeBPO04zg3GBT6tXkvsFw.png"/></div></div></figure><ul class=""><li id="1b46" class="lu lv it ks b kt ku kw kx kz lw ld lx lh ly ll nr ma mb mc bi translated">通过单击下载来下载密钥文件，然后单击完成。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi oa"><img src="../Images/81687a2b774ab5774385fff2d21adcaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYq3jZVyET7jikRCSxfZmA.png"/></div></div></figure><p id="be63" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">您可以单击Keys部分显示的列表中的键来查看详细信息，包括键ID。我们生成的密钥ID将在后端实现中用到。</p><p id="c7a2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在，我们可以进入第二步——即<a class="ae lm" href="https://medium.com/@sagunraj/implementing-sign-in-with-apple-using-django-a-recipe-part-2-of-3-12d673cf6eaf" rel="noopener">通过实现与苹果</a>的登录来准备好后端的步骤。</p></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><h1 id="995a" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">参考文献</strong></h1><ul class=""><li id="7df2" class="lu lv it ks b kt na kw nb kz ob ld oc lh od ll nr ma mb mc bi translated"><a class="ae lm" href="https://developer.apple.com/documentation/authenticationservices" rel="noopener ugc nofollow" target="_blank">认证服务文档</a></li><li id="e527" class="lu lv it ks b kt md kw me kz mf ld mg lh mh ll nr ma mb mc bi translated"><a class="ae lm" href="https://github.com/truffls/sign-in-with-apple-using-django" rel="noopener ugc nofollow" target="_blank">GitHub上的truffls</a></li></ul></div><div class="ab cl ln lo hx lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="im in io ip iq"><p id="6a2f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果你觉得这个帖子有用，并且愿意支持我，请“<a class="ae lm" href="https://www.buymeacoffee.com/sagunraj" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a>”</p><div class="oe of gp gr og oh"><a href="https://www.buymeacoffee.com/sagunraj" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">Sagun Raj Lage正在撰写博客和书籍，并免费教授编程。</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">我是一名iOS开发人员，有从事各种领域相关项目的经验，如交通和…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ko oh"/></div></div></a></div></div></div>    
</body>
</html>