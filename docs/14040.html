<html>
<head>
<title>6 Major Features of Node.js 19</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js 19的6大特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/6-major-features-of-node-js-19-b98e28b9670c?source=collection_archive---------1-----------------------#2022-10-29">https://betterprogramming.pub/6-major-features-of-node-js-19-b98e28b9670c?source=collection_archive---------1-----------------------#2022-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3439" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Node.js 19新特性的细节，包括实验性的节点观察模式和HTTP(S)/1.1默认保持活动</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ac90a7e793e96f7f23ce5d815bb6fefb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4b5YYLknOmqqojvi"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mathew_waters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马修·沃特斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="78be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Node.js主版本每六个月推出一次。新版本变成了为期六个月的<code class="fe lv lw lx ly b">Current</code>版本，这给了库作者时间来添加对他们的支持。</p><p id="a569" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">六个月后，奇数版本(如19)变得不受支持，偶数版本(如18)转移到<code class="fe lv lw lx ly b">Active LTS</code>(长期支持)状态，并准备好供一般使用。</p><p id="cf78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">LTS</code>发布通常保证关键缺陷将在总共30个月内得到修复。生产应用程序应该只使用<code class="fe lv lw lx ly b">Active LTS</code>或<code class="fe lv lw lx ly b">Maintenance LTS</code>版本。</p><p id="3d1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://nodejs.org/en/blog/release/v19.0.0/" rel="noopener ugc nofollow" target="_blank"> Node.js 19 </a>发布于2022年10月18日。它变成了<code class="fe lv lw lx ly b">Current</code>版本。它有6个主要特点:</p><ul class=""><li id="d888" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">实验节点观察模式</li><li id="f2a1" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">默认情况下HTTP(S)/1.1 KeepAlive</li><li id="e9d9" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">稳定的网络加密</li><li id="a3d9" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">自定义ESM分辨率调整</li><li id="77d1" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">已放弃DTrace/SystemTap/ETW支持</li><li id="db8b" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">V8 JavaScript引擎已更新至V8 10.7</li></ul><p id="4d18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来探索它们是什么以及如何使用它们。</p><h1 id="5857" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">使用NVM浏览节点</h1><p id="0912" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-nvm-to-manage-node-js-19-and-npm-9-bc5656d52d5f">之前的一篇文章</a>中，我们提供了关于使用<a class="ae ky" href="https://github.com/nvm-sh/nvm" rel="noopener ugc nofollow" target="_blank"> NVM(节点版本管理器)</a>管理Node.js和NPM版本的说明。</p><p id="c713" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行命令安装节点19.0.0:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="dc49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在任何窗口上，运行命令以使用节点19:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="54c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们准备探索:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="979b" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">实验节点观察模式</h1><p id="e669" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">在<a class="ae ky" href="https://javascript.plainenglish.io/a-hands-on-guide-for-a-server-side-rendering-react-18-app-4e630aae274c" rel="noopener ugc nofollow" target="_blank">服务器端渲染React 18应用的实践指南</a>中，我们通过执行<code class="fe lv lw lx ly b">npm run build</code>构建了一个生产<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2"> Create React应用</a>。</p><p id="44a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创造了<code class="fe lv lw lx ly b">server/index.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="75e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">服务器运行的是<code class="fe lv lw lx ly b">nodemon</code>，这是一个帮助开发Node.js应用程序的工具，它可以在检测到文件更改时自动重启应用程序。命令是<code class="fe lv lw lx ly b">nodemon server</code>。</p><p id="9c8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了node.js 19，我们不再需要安装额外的工具。相反，我们可以执行<code class="fe lv lw lx ly b">node --watch</code>来在检测到文件更改时自动重启应用程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="0149" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">默认情况下HTTP(S)/1.1 KeepAlive</h1><p id="e1ca" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">Node.js 19默认设置<code class="fe lv lw lx ly b">keepAlive</code>为真。这意味着任何传出的HTTP(s)连接都将自动使用HTTP 1.1 <code class="fe lv lw lx ly b">keepAlive</code>。默认<code class="fe lv lw lx ly b">keepAlive</code>持续时间为5秒。</p><p id="110f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将上述<code class="fe lv lw lx ly b">server/index.js</code>改为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="f1c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用node.js 16执行服务器代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ul class=""><li id="4304" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">在第18行，它显示<code class="fe lv lw lx ly b">http.globalAgent</code>设置<code class="fe lv lw lx ly b">keepAlive</code>为假。</li><li id="159a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第40行，它显示<code class="fe lv lw lx ly b">https.globalAgent</code>设置<code class="fe lv lw lx ly b">keepAlive</code>为假。</li></ul><p id="7e64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用node.js 19执行服务器代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ul class=""><li id="670d" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">在第14行，它显示<code class="fe lv lw lx ly b">http.globalAgent</code>将<code class="fe lv lw lx ly b">keepAlive</code>设置为真。</li><li id="514e" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第16行，它显示默认的<code class="fe lv lw lx ly b">keepAlive</code>持续时间是5秒(5000毫秒)。</li><li id="2a81" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第42行，它显示<code class="fe lv lw lx ly b">https.globalAgent</code>将<code class="fe lv lw lx ly b">keepAlive</code>设置为真。</li><li id="8eaa" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第44行，它显示默认的<code class="fe lv lw lx ly b">keepAlive</code>持续时间是5秒(5000毫秒)。</li></ul><p id="a046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启用<code class="fe lv lw lx ly b">keepAlive</code>将提供更好的吞吐量，因为默认情况下会重用连接。</p><p id="ae5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，代理能够解析服务器可能发送的响应<code class="fe lv lw lx ly b">keepAlive</code>。这个头指示客户端保持连接的时间。</p><p id="1b9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，当调用<code class="fe lv lw lx ly b">close()</code>时，HTTP服务器将自动断开空闲客户端。通过<code class="fe lv lw lx ly b">http(s).Server.close</code>内部调用<code class="fe lv lw lx ly b">closeIdleConnections</code>来完成。</p><p id="fbed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过这些更改，HTTP(S)/1.1请求在默认情况下可能会体验到更好的吞吐量/性能。</p><h1 id="ae02" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">稳定的网络加密</h1><p id="8395" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">WebCrypto API是一个使用加密技术构建系统的接口。有了node.js 19，WebCrypto API就稳定了(除了这些算法:<code class="fe lv lw lx ly b">Ed25519</code>、<code class="fe lv lw lx ly b">Ed448</code>、<code class="fe lv lw lx ly b">X25519</code>和<code class="fe lv lw lx ly b">X448</code>)。</p><p id="86e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">globalThis.crypto</code>或<code class="fe lv lw lx ly b">require('node:crypto').webcrypto</code>来访问这个模块。下面的<code class="fe lv lw lx ly b">server/index.js</code>以<code class="fe lv lw lx ly b">subtle</code>为例，<code class="fe lv lw lx ly b">SubtleCrypto</code>接口提供了一些底层加密功能:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ul class=""><li id="ce4b" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">在第5–9行，生成了一个HMAC键。HMAC是一种特殊类型的消息认证码(MAC ),它包含加密哈希函数和秘密密钥。生成的密钥可用于同时验证消息的数据完整性和真实性。</li><li id="8989" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第13–14行，对消息<code class="fe lv lw lx ly b">I love cupcakes</code>进行编码。</li><li id="2038" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第18–20行，使用<code class="fe lv lw lx ly b">key</code>和<code class="fe lv lw lx ly b">message</code>创建一个消息摘要。消息摘要是一种加密哈希函数，包含由单向哈希公式创建的一串数字。</li></ul><p id="ab76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下控制台信息显示了<code class="fe lv lw lx ly b">key</code>、<code class="fe lv lw lx ly b">message</code>和<code class="fe lv lw lx ly b">digest</code>的值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="2581" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">自定义ESM分辨率调整</h1><p id="5358" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">Node.js已经移除了<code class="fe lv lw lx ly b">--experimental-specifier-resolution</code>标志，因为它的功能可以通过定制加载器来实现。</p><p id="951e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">克隆<a class="ae ky" href="https://github.com/nodejs/loaders-test.git" rel="noopener ugc nofollow" target="_blank">范例库</a>:</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="c495" class="nq mo it ly b gy nr ns l nt nu">git clone https://github.com/nodejs/loaders-test.git</span></pre><p id="0e2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到示例目录:</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="8d91" class="nq mo it ly b gy nr ns l nt nu">% cd loaders-test/commonjs-extension-resolution-loader</span></pre><p id="3d55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装软件包:</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="6e32" class="nq mo it ly b gy nr ns l nt nu">% yarn install</span></pre><p id="a621" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是<code class="fe lv lw lx ly b">loaders-test/commonjs-extension-resolution-loader/test/basic-fixtures/index.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ul class=""><li id="9e53" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">第1行未使用。</li><li id="a0e7" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第3行，<code class="fe lv lw lx ly b">valueInFile</code>是从<code class="fe lv lw lx ly b">'./file'</code>导入的，没有指定文件扩展名。如果没有自定义加载程序，节点的ESM说明符解析不会自动解析文件扩展名，如<code class="fe lv lw lx ly b">./file.js</code>或<code class="fe lv lw lx ly b">./file.mjs</code>。</li></ul><p id="88a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是<code class="fe lv lw lx ly b">loaders-test/commonjs-extension-resolution-loader/test/basic-fixtures/file.js</code>:</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="a548" class="nq mo it ly b gy nr ns l nt nu">export const valueInFile = 'hello from file.js';</span></pre><ul class=""><li id="be66" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">在第4行，<code class="fe lv lw lx ly b">valueInFolderIndex</code>是从<code class="fe lv lw lx ly b">'./folder'</code>导入的，没有指定索引文件名。如果没有自定义加载程序，节点的ESM说明符解析就无法导入包含索引文件的目录，如<code class="fe lv lw lx ly b">./folder/index.js</code>或<code class="fe lv lw lx ly b">./folder/index.mjs</code>。</li></ul><p id="caee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是<code class="fe lv lw lx ly b">loaders-test/commonjs-extension-resolution-loader/test/basic-fixtures/folder/index.js</code>:</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="73be" class="nq mo it ly b gy nr ns l nt nu">export const valueInFolderIndex = 'hello from folder/index.js';</span></pre><p id="d64b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">的另一篇文章</a>中提到过，有两种方法可以执行ESM代码:</p><ol class=""><li id="87cc" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu nv mf mg mh bi translated">在<code class="fe lv lw lx ly b">package.json</code>中设置<code class="fe lv lw lx ly b">"type": "module"</code>。</li><li id="3ff1" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu nv mf mg mh bi translated">将<code class="fe lv lw lx ly b">index.js</code>改为<code class="fe lv lw lx ly b">index.mjs</code>，运行<code class="fe lv lw lx ly b">node index.mjs</code>。</li></ol><p id="f3ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，以下两个命令都将失败。</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="19f8" class="nq mo it ly b gy nr ns l nt nu">% node test/basic-fixtures/index<br/>% node test/basic-fixtures/index.js</span></pre><p id="c148" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，所有这些问题都可以通过自定义加载器解决，<code class="fe lv lw lx ly b">loaders-test/commonjs-extension-resolution-loader/loader.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="8dab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用加载程序，上述失败的命令运行良好:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="6a24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于定制加载器，不需要<code class="fe lv lw lx ly b">--experimental-specifier-resolution</code>标志。</p><h1 id="21df" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">已放弃DTrace/SystemTap/ETW支持</h1><p id="d3e4" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">由于以下两个原因，Node.js放弃了对DTrace/SystemTap/ETW的支持:</p><ul class=""><li id="f6e6" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">没有明确的迹象表明有人在使用DTrace、SystemTap或ETW。</li><li id="24c6" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">维护支持这些工具的复杂性已被证明是不值得努力的。</li></ul><h1 id="be45" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">V8 JavaScript引擎已更新至V8 10.7</h1><p id="8aa7" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">Node.js 19已经将V8 JavaScript引擎更新到了V8 10.7，其中包含了一个新的函数<code class="fe lv lw lx ly b">Intl.NumberFormat</code>，用于对语言敏感的数字格式化。</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="d9e4" class="nq mo it ly b gy nr ns l nt nu">Intl.NumberFormat(locales, options)</span></pre><p id="0c6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">locales</strong></code>是一个可选参数，它是一个BCP 47语言标签，或者是这样的字符串数组。以下是BCP 47语言标签列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/c5d97ec53741f7d21f7e96a4097accf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*OnWvo40PDzP-KHKnq7xfeg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4cf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">options</strong></code>也是一个可选参数，是一个具有以下部分或全部属性的对象:<code class="fe lv lw lx ly b">compactDisplay</code>、<code class="fe lv lw lx ly b">currency</code>、<code class="fe lv lw lx ly b">currencyDisplay</code>、<code class="fe lv lw lx ly b">currencySign</code>、<code class="fe lv lw lx ly b">localeMatcher</code>、<code class="fe lv lw lx ly b">notation</code>、<code class="fe lv lw lx ly b">numberingSystem</code>、<code class="fe lv lw lx ly b">signDisplay</code>、<code class="fe lv lw lx ly b">style</code>、<code class="fe lv lw lx ly b">unit</code>、<code class="fe lv lw lx ly b">unitDisplay</code>、<code class="fe lv lw lx ly b">useGrouping</code>、<code class="fe lv lw lx ly b">roundingMode</code>、<code class="fe lv lw lx ly b">roundingPriority</code>、<code class="fe lv lw lx ly b">roundingIncrement</code>、<code class="fe lv lw lx ly b">trailingZeroDisplay</code>、<code class="fe lv lw lx ly b">minimumIntegerDigits</code>、<code class="fe lv lw lx ly b">minimumFractionDigits</code>、<code class="fe lv lw lx ly b">maximumFractionDigits</code>、<code class="fe lv lw lx ly b">minimumSignificantDigits</code>和<code class="fe lv lw lx ly b">maximumSignificantDigits</code></p><p id="71cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中，<code class="fe lv lw lx ly b">style</code>选择格式样式，支持以下值:</p><ul class=""><li id="8b1a" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">"decimal"</code>用于普通数字格式(默认)。</li><li id="ff70" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">"currency"</code>用于货币格式化。</li><li id="3953" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">"percent"</code>为百分比格式。</li><li id="dead" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">"unit"</code>为单位格式。</li></ul><p id="af83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe lv lw lx ly b">style</code>设置为<code class="fe lv lw lx ly b">'currency'</code>，则需要<code class="fe lv lw lx ly b">currency</code>属性。<code class="fe lv lw lx ly b">currency</code>采用<a class="ae ky" href="https://www.localeplanet.com/icu/currency.html" rel="noopener ugc nofollow" target="_blank">中列出的ISO 4217货币代码，该表</a>。默认情况下，<code class="fe lv lw lx ly b">minimumFractionDigits</code>和<code class="fe lv lw lx ly b">maximumFractionDigits</code>都设置为2。</p><p id="a30e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><ul class=""><li id="a8b1" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">在第3行，<code class="fe lv lw lx ly b">'de-DE'</code>是德语。<code class="fe lv lw lx ly b">'EUR'</code>代表欧元。打印值为<code class="fe lv lw lx ly b">123.456,79 €</code>，默认为2位小数。</li><li id="4d6d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第4行，<code class="fe lv lw lx ly b">'ja-JP'</code>是日语。<code class="fe lv lw lx ly b">'JPY'</code>是对日元。打印值为<code class="fe lv lw lx ly b">￥123,457</code>，因为日元不使用小单位。</li><li id="24cf" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第5行，<code class="fe lv lw lx ly b">'ar-SA'</code>是阿拉伯语。<code class="fe lv lw lx ly b">'EGP'</code>是埃及镑。打印的值是١٢٣٬٤٥٦٫٧٩ ج.م.‏，默认为两位小数。</li><li id="3e2d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">在第6行，<code class="fe lv lw lx ly b">'zh-CN'</code>是中文。<code class="fe lv lw lx ly b">'CNY'</code>是中国的人民币。打印值为<code class="fe lv lw lx ly b">¥123,456.79</code>，默认为2位小数。</li></ul><h1 id="6798" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="c195" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">Node.js 19有许多新的特性和改进，包括实验性的节点观察模式和默认的HTTP(S)/1.1 KeepAlive，以及V8 JavaScript engine 10.7特性。直到node.js 20发布之前都是<code class="fe lv lw lx ly b">Current</code>发布。</p><p id="bb84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解以前版本的特性，请阅读以下文章:</p><ul class=""><li id="169f" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc">node . js 18的5大特色</a></li><li id="6e36" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/3-major-features-of-node-js-17-4bee7135df02">node . js 17的3大特色</a></li><li id="2c5c" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/a-quick-look-at-the-node-js-16-features-d616e8b2f29">快速浏览Node.js 16特性</a></li><li id="5132" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/whats-new-in-node-js-15-fc24e87e2590">node . js 15的新功能</a></li></ul><p id="c452" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是npm功能的列表:</p><ul class=""><li id="8037" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><a class="ae ky" href="https://medium.com/p/bea4631a96d6" rel="noopener">探索npm 9中的新功能</a></li><li id="4eec" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">快速浏览npm 8特性和对npm 9的预测—近距离观察es模块(ESM) </a></li><li id="5d6a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="https://medium.com/better-programming/the-step-by-step-guide-to-understanding-and-adopting-npm-7-914504f7090f" rel="noopener">理解和采用npm 7的分步指南</a></li></ul><p id="2154" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p><pre class="kj kk kl km gt nm ly nn no aw np bi"><span id="4d42" class="nq mo it ly b gy nr ns l nt nu"><strong class="ly iu">Want to Connect?</strong></span><span id="1f2f" class="nq mo it ly b gy nx ns l nt nu">If you are interested, check out <a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">my directory of web development articles</a>.</span></pre></div></div>    
</body>
</html>