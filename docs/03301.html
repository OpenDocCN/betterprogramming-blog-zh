<html>
<head>
<title>How to Use Google Place Autocomplete With React Without a Third-Party Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在没有第三方库的情况下使用Google Place Autocomplete和React</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-best-practice-with-google-place-autocomplete-api-on-react-939211e8b4ce?source=collection_archive---------1-----------------------#2020-02-03">https://betterprogramming.pub/the-best-practice-with-google-place-autocomplete-api-on-react-939211e8b4ce?source=collection_archive---------1-----------------------#2020-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8115" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">避免依赖，直接提出你的要求</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c42604c236d48fbaabef6e719430e76d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zv_sVmtO3sPGpU2IbHTg2g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">paweczerwiński</a>在<a class="ae ky" href="https://unsplash.com/s/photos/google?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="965d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想创建一个React web应用程序来查找用户的位置。我设法用<a class="ae ky" href="https://developers.google.com/places/web-service/autocomplete" rel="noopener ugc nofollow" target="_blank">谷歌位置自动完成</a>做到了这一点。</p><p id="ec62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自动完成是<code class="fe lv lw lx ly b">Maps</code> JavaScript API中<code class="fe lv lw lx ly b">Places</code>库的一个特性。当用户开始键入地址时，自动完成功能会填充其余部分。</p><p id="a178" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我试图在React的搜索栏中实现Google Place自动完成输入，但很快意识到这比我想象的要复杂。我开始寻找其他方法去做，发现了很多方法。但是，他们都使用了libs。</p><p id="c802" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我决定写这篇短文来展示我是如何在不使用第三方库的情况下完成的。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="93ec" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">设置项目</h1><p id="7178" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">首先，我将使用<code class="fe lv lw lx ly b"><a class="ae ky" href="https://create-react-app.dev" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code>来创建快速的单页React应用程序。我们可以通过运行一个简单的命令来设置一个现代化的web应用程序:</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="c4c1" class="ni mi it ly b gy nj nk l nl nm">npx create-react-app google-place-autocomplete</span></pre><p id="2c40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，将其移动到<code class="fe lv lw lx ly b">google-place-autocomplete</code>目录，并从终端运行:</p><pre class="kj kk kl km gt ne ly nf ng aw nh bi"><span id="f525" class="ni mi it ly b gy nj nk l nl nm">cd google-place-autocomplete<br/>npm start</span></pre><p id="48e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，您需要Google Places API的API-Key。你可以在这里得到钥匙。我将Google API密匙存储在<code class="fe lv lw lx ly b">.env</code>文件中——你也应该这样做。</p><p id="a4f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的项目已经准备好开始。您的<code class="fe lv lw lx ly b">package.json</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="3356" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">制作魔法代码</h1><p id="0b70" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">让我们实现主要的<code class="fe lv lw lx ly b">SearchLocationInput</code>组件来使用Google Place自动完成API。首先，我们必须创建一个函数来加载使用Google API的脚本。让我们用<code class="fe lv lw lx ly b">loadScript</code>函数创建<code class="fe lv lw lx ly b">SearchLocationInput.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3db1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将这个脚本用于动态JavaScript，以便在我们的公共页面上快速加载页面。它动态加载JavaScript文件，并在完成时进行回调。接下来，我们必须在呈现组件时将Google Place地图分配给<code class="fe lv lw lx ly b">autoComplete</code>变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="1542" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">handleScriptLoad</code>方法中，我们从声明<code class="fe lv lw lx ly b">authComplete</code>的选项开始。我们通过<code class="fe lv lw lx ly b">setFields</code>方法指定从API获得的属性。请随意阅读<a class="ae ky" href="https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多详情。</p><p id="3cb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们附加到自动完成监听器，每当用户选择一个自动完成建议时，它都会监听。让我们创建<code class="fe lv lw lx ly b">handlePlaceSelect</code>方法来处理选择:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6ce8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该方法在事件被触发时被调用，并从API获取位置数据。然后我们就可以用数据做任何操作了。</p><p id="80d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们的<code class="fe lv lw lx ly b">SearchLocationInput.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="f2e7" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">让我们演示一下我们的自动完成功能！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/9b791b576d5da8c7001e1c23928e49f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/1*yiY5zuPhdZWRnmcBbv91jg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google Place自动完成</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/50fe47613a164368c9bc523138fcd47f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ec77-X1pHe8Dkk02_i6kKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google API结果</p></figure><p id="b011" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想检查所有代码，这里有<a class="ae ky" href="https://github.com/Gapur/google-place-autocomplete" rel="noopener ugc nofollow" target="_blank"> Github </a>的链接。</p><p id="90d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="488d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">资源</h1><ul class=""><li id="036e" class="nr ns it lb b lc mz lf na li nt lm nu lq nv lu nw nx ny nz bi translated"><a class="ae ky" href="https://medium.com/@hamzaqaisrani/using-the-google-maps-places-autocomplete-javascript-api-in-a-react-project-5742bab4abc9" rel="noopener">在React应用程序中使用Google Place自动完成JavaScript API</a></li><li id="7f80" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="https://developers.google.com/maps/documentation/javascript/places-autocomplete" rel="noopener ugc nofollow" target="_blank">自动完成地址和搜索词</a></li><li id="5d1f" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="https://www.w3docs.com/learn-javascript/places-autocomplete.html" rel="noopener ugc nofollow" target="_blank">地点自动完成</a></li><li id="6cc9" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">链接到<a class="ae ky" href="https://github.com/Gapur/google-place-autocomplete" rel="noopener ugc nofollow" target="_blank"> Github </a></li></ul></div></div>    
</body>
</html>