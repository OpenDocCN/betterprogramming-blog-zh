<html>
<head>
<title>Working With Sitemaps in Nuxt.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Nuxt.js中使用站点地图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/nuxt-js-working-with-sitemaps-518ee7d657c8?source=collection_archive---------4-----------------------#2019-11-08">https://betterprogramming.pub/nuxt-js-working-with-sitemaps-518ee7d657c8?source=collection_archive---------4-----------------------#2019-11-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1ae3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建路由、页面和动态路由的站点地图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0aa998a0f12a1329903c5f608a012ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwoYG5JlnSr1BSr4HY0L4A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Nik Shuliahin 在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嘿，读这篇文章的人！在这篇文章中，我将研究使用<a class="ae ky" href="https://github.com/nuxt-community/sitemap-module" rel="noopener ugc nofollow" target="_blank">站点地图模块</a>在<a class="ae ky" href="https://nuxtjs.org/" rel="noopener ugc nofollow" target="_blank"> Nuxt </a>中创建站点地图的不同选项。</p><p id="aa1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想创建一个包含所有路线和页面的站点地图，并添加动态路线，请求你的后端API，或者甚至你想用一个站点地图索引文件创建多个站点地图，这个模块将为你提供你想要的一切。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2420" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">内容</h1><ul class=""><li id="1592" class="mu mv it lb b lc mw lf mx li my lm mz lq na lu nb nc nd ne bi translated">站点地图模块选项。</li><li id="c0cc" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">带路线的简单单一网站地图。</li><li id="fff6" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">从API请求的站点地图。</li><li id="13c3" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">多个索引的站点地图。</li><li id="0433" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">多语言网站的网站地图。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="798c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">模块选项</h1><p id="6e67" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">以下是所有可用的选项:</p><div class="nn no gp gr np nq"><a href="https://github.com/nuxt-community/sitemap-module#sitemap-options" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">nuxt-社区/站点地图-模块</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">为Nuxt.js项目自动生成或提供动态sitemap.xml！模块基于awesome sitemap.js…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">github.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe ks nq"/></div></div></a></div><ul class=""><li id="bd86" class="mu mv it lb b lc ld lf lg li of lm og lq oh lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">route</code> (array | function) <br/>您可以在那里手动添加路线，以明确地放入站点地图，或者使用该属性从API请求路线，这样它就可以从您的DB中动态生成。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取路由的静态路由属性和函数</p></figure><ul class=""><li id="074f" class="mu mv it lb b lc ld lf lg li of lm og lq oh lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">path</code> (string) <br/>这是站点地图的路径。默认为<code class="fe oi oj ok ol b">/sitemap.xml</code>表示正常，如果使用<code class="fe oi oj ok ol b">sitemaps</code>属性则为<code class="fe oi oj ok ol b">/sitemapindex.xml</code>。</li><li id="51fb" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">hostname</code> (string) <br/>如果您定义了<code class="fe oi oj ok ol b">hostname</code>，它将被所有路由覆盖，而不管应用程序域。模块逻辑是，如果没有定义主机名，应用程序检查当前请求是否是HTTPS，并获取当前应用程序域。然后，模块在此基础上构建一个<code class="fe oi oj ok ol b">hostname</code>。如果你使用<a class="ae ky" href="https://github.com/nuxt-community/nuxt-i18n" rel="noopener ugc nofollow" target="_blank"> nuxt-i18n </a>并且你的应用有几个域，模块应该根据请求域明确定义当前应用。</li><li id="6305" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">cacheTime</code>(数字)<br/>这是你之前定义的sitemap <code class="fe oi oj ok ol b">routes</code>的缓存TTL。</li><li id="aa05" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">exclude</code> (string[]) <br/>在这里，您可以为您的Nuxt应用程序排除一些静态路由:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用通配符排除</p></figure><p id="d515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，特别是对于站点地图索引，当您不想为每个站点地图复制静态路由时，您可以这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">排除静态路由</p></figure><ul class=""><li id="0764" class="mu mv it lb b lc ld lf lg li of lm og lq oh lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">filter</code> (function) <br/>你可以通过一个函数来过滤Nuxt从你的路线中自动生成的所有选项。示例:<a class="ae ky" href="https://github.com/nuxt-community/sitemap-module#filter-optional---function" rel="noopener ugc nofollow" target="_blank">https://github . com/nuxt-community/sitemap-module # filter-optional-function</a></li><li id="b9fd" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">gzip</code>(布尔)<br/> Zip与否，由你决定。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="785a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">带路线的简单单一网站地图</h1><p id="f812" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">所以，通常如果你有自己的作品集网站或类似的网站，你会希望生成一个只有静态路线的网站地图。假设您的网站有这样的结构:</p><p id="6799" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">页数:</p><ul class=""><li id="fac3" class="mu mv it lb b lc ld lf lg li of lm og lq oh lu nb nc nd ne bi translated">博客</li><li id="3261" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">项目</li><li id="bad4" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">邮件</li><li id="db7a" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">等等。</li><li id="a898" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><code class="fe oi oj ok ol b">Index.vue</code></li></ul><p id="5303" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，你只想把它放在网站地图里。您可能会得到这样的结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单的站点地图配置</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b82c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">带有动态路线的网站地图</h1><p id="f380" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我说的动态路由是什么意思？这里有一个类似<code class="fe oi oj ok ol b">/blog/_post.vue</code>的路线，当你有一个页面的元素或者别的什么的时候。</p><p id="0a88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，在这种情况下，模块不能自己生成这些id，这时<code class="fe oi oj ok ol b">routes</code>属性就派上用场了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有动态路线的网站地图</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e23f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">几个指数</h1><p id="b590" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">现在，有了一些静态路由和动态路由，也许为它们建立单独的站点地图是有意义的。</p><p id="cb4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你有很多动态URL，并且你想把它们放在不同的站点地图中时，这就变得更加方便了。下面是我的实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">实现一个函数来创建多个站点地图</p></figure><p id="de49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在后端，基于<code class="fe oi oj ok ol b">index</code>参数，您需要更改<code class="fe oi oj ok ol b">OFFSET</code>请求元素。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7c92" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">多语言网站的网站地图</h1><p id="feb9" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这里，唯一需要担心的细节是不要设置<code class="fe oi oj ok ol b">hostname</code>，这样域将从到达Nuxt服务器的请求中获取。</p><p id="4b62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，如果你的域名托管是通过<code class="fe oi oj ok ol b">CNAME</code>或<code class="fe oi oj ok ol b">Load balancer</code>，那么到达Nuxt的请求将不是HTTPS，而是简单的HTTP。</p><p id="33c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，您需要确保您的<code class="fe oi oj ok ol b">x-forwarded-proto</code>在请求中被设置为HTTP。然后，该模块将识别出原始请求是HTTP，并将一个HTTPS链接放到站点地图上。</p><p id="f2c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://clusterjobs.de" rel="noopener ugc nofollow" target="_blank"> clusterjobs.de </a>上，我们有这个选项，当我们需要一个动态的多索引站点地图，并对每个语言域做出响应时。最后，这个模块非常方便。我一年前开始使用它，只有路线和静态路线选项，它成长了很多。</p><p id="f321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望它是有用的，它改进了您的Nuxt应用程序，或者鼓励您使用这个令人难以置信的框架！</p></div></div>    
</body>
</html>