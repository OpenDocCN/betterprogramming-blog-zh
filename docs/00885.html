<html>
<head>
<title>SOLID and the Single Responsibility Principle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">稳固和单一责任原则</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/solid-swift-by-examples-part-one-35018d53d3e6?source=collection_archive---------5-----------------------#2019-07-24">https://betterprogramming.pub/solid-swift-by-examples-part-one-35018d53d3e6?source=collection_archive---------5-----------------------#2019-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ffed" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">swift实例中的坚实原则</h2><div class=""/><div class=""><h2 id="4dca" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">坚固的雨燕</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/4608618fab57ada7f8b077596c5e563e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Au13SK-0ILqcLLQm"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">伯纳德·赫曼特在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4a67" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们所有在某种程度上沉浸在软件开发中的人都听说过、经历过、有过想法，或者有过坚实的原则。这些原则在几种编程语言中已经被描述和使用了很长时间。</p><p id="5c27" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些概念对于所有正在开发软件的人，或者那些必须从质量和功能的角度审查代码片段的人，例如审查其他编程语言代码的开发人员，仍然是有用的。不管你从事软件工作有多长时间，这些原则作为模式在开发时为好的决策提供信息。</p><p id="8f05" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们看看这些模式是什么，它们试图解决什么。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="1d46" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">糟糕的架构决策</h1><p id="94d5" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">让我们试着确定你是否已经有了坏代码。</p><p id="272b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你是否曾经试图修改某段代码，并注意到你将不得不花费大量的时间来重构或改变功能/文件/类，而不是特定的代码？</p><p id="caca" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个问题被称为<em class="ni">刚性</em>，因为它需要很多努力，比如改变项目的几个部分。</p><p id="2f40" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">除了特定的一段代码之外，您是否曾经更改过一段代码并在功能/文件/类中出现错误/崩溃/问题？</p><p id="7db0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个问题被称为<em class="ni">脆性</em>，因为一个变化可能会打破意想不到的部分。</p><p id="455d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你曾经尝试过在另一个文件/模块/项目/存储库中重用一段代码，并且不得不添加依赖关系吗？</p><p id="b121" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个问题被称为<em class="ni">不可移动性，</em>因为在另一个文件/模块/项目/存储库中重用一个组件是困难的，因为它有太多的耦合依赖。</p><p id="8bfb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我把所有这些问题总结成一条黄金法则:</p><p id="c6a6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">编写易于删除或替换的代码。</strong></p><p id="b7a8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如鲍勃大叔(罗伯特·c·马丁)所说，这些概念并不是规则、法则或完美的真理。这些是帮助你开发好软件和提高软件架构质量的指导方针。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="30be" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">固体</h1><p id="89ec" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">SOLID是首字母缩写，代表五个指导原则。在接下来的几篇文章中，我将用Swift (iOS)中的例子来解释每个原则。</p><p id="0b0d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi nj translated">单一责任原则认为一个函数、模块、类或结构应该只有一个目标、理由或任务。每当你创建/改变一个函数/模块/类/结构时，你应该问自己:它有多少职责？<em class="ni"> </em>听起来容易对吧？</p><p id="4aa5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们通常违反这一原则，因为应用这一模式在您需要为其创建的文件、类和/或协议的数量方面可能是一项艰巨的工作。</p><p id="98aa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我作为iOS开发人员的经验中，我看到了我们通常违反单一责任原则的最糟糕的元素之一——视图控制器。</p><p id="f9e5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">考虑到以下因素，我们很容易发现这个问题:</p><ul class=""><li id="2997" class="ns nt it lk b ll lm lo lp lr nu lv nv lz nw md nx ny nz oa bi translated">视图控制器可以是数据源，也可以是表视图或集合视图的委托。</li><li id="f735" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">您可以在视图控制器中发出web请求。</li><li id="86f1" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">您可以在视图控制器中使用业务逻辑。</li><li id="f384" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">您可以在视图控制器中格式化元素。</li><li id="b5dc" class="ns nt it lk b ll ob lo oc lr od lv oe lz of md nx ny nz oa bi translated">您可以在视图控制器中处理导航。</li></ul><p id="e65d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们看一个例子:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">一个基本的大视图控制器，用于列出电影</p></figure><p id="981c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">乍一看，一点也不差。然而，这个类不仅仅完成一项工作；正如你在函数名中看到的，这个类试图实现不同的目标。这是糟糕设计的标志。</p><p id="f66c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个班有多少责任？</p><p id="88f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe oi oj ok ol b">MovieListViewController</code>首先从API检索数据，然后解析API响应，然后过滤电影列表以显示即将上映的电影，最后重新加载显示单元格的表格，格式化单元格标题。此外，我们可以使用IBAction过滤列表，并在单元格被点击时显示<code class="fe oi oj ok ol b">MovieDetailViewController</code>。</p><p id="79f5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">实现这一原则的一些关键是使用协议委托、设计模式(如Presenter模式)、<strong class="lk jd"> </strong>和代码隔离或组合(将责任向下移动到小类)。</p><p id="31cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们来重构一下:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">同样的VC，现在看起来更好</p></figure><p id="8014" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，首先，我们已经隔离了视图职责，只使用协议(<code class="fe oi oj ok ol b">MovieListView)</code> <strong class="lk jd">、</strong>委托(<code class="fe oi oj ok ol b">MovieListTableViewDataSource)</code> <strong class="lk jd">、</strong>和MVP模式<strong class="lk jd"> </strong> ( <code class="fe oi oj ok ol b">MovieListPresenter)</code>)在视图中显示信息。</p><p id="a7cf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">一些隔离责任的其他类</p></figure><p id="dd1a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们已经移动了表数据源作业，创建了一个类来处理所有需要的表工作和通过委托(<code class="fe oi oj ok ol b">MovieListTableViewDataSource)</code>)进行的表视图选择。</p><p id="ec15" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">我们的演示者、API和解析器</p></figure><p id="d742" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们已经创建了一个<code class="fe oi oj ok ol b">MovieListPresenter</code>，在这里我们可以处理业务逻辑，并使用<code class="fe oi oj ok ol b">MoviesAPIClient</code>类从API获取数据。我们使用<code class="fe oi oj ok ol b">MovieParseHandler</code>解析响应。</p><p id="4a1a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们在这个示例项目中做了很多改进。这可能需要时间，因为您需要分离所有的类作业，并为其创建大量文件，但是您将获得更好的、完全可测试的代码。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="ecb9" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">结论</h1><p id="116b" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">这些原则帮助你尽可能保持课堂整洁。不要忘记，您将需要使用良好的实践和设计/架构模式作为工具来应用这些概念，并将您的代码提高到下一个级别。</p><p id="647f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">希望你喜欢这篇文章，并找到它的帮助。感谢阅读。请在下面的评论中告诉我你的反馈。</p><h1 id="4b04" class="ml mm it bd mn mo om mq mr ms on mu mv ki oo kj mx kl op km mz ko oq kp nb nc bi translated">下一章</h1><div class="or os gp gr ot ou"><a href="https://medium.com/@piero9212/solid-swift-by-examples-part-two-82ac3c457e4e" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">开闭原理</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">在第一部分，我们描述了什么是坚实的原则和他们试图解决什么，解释了第一…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi lb ou"/></div></div></a></div><h1 id="ea3d" class="ml mm it bd mn mo om mq mr ms on mu mv ki oo kj mx kl op km mz ko oq kp nb nc bi translated">参考</h1><div class="or os gp gr ot ou"><a href="https://www.scaledrone.com/blog/solid-principles-for-becoming-a-better-ios-swift-developer/" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">Scaledrone实时消息服务—博客</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">虽然SOLID可能已经过时了(至少在互联网时代是这样)，但它是那些超越…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">www.scaledrone.com</p></div></div><div class="pd l"><div class="pj l pf pg ph pd pi lb ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://clean-swift.com/single-responsibility-principle-for-class/" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">班级单一责任原则——干净利落</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">您看到了依赖性反转原则是如何成为一个好的清理的核心指导原则的，尽管它并不为人所知…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">clean-swift.com</p></div></div><div class="pd l"><div class="pk l pf pg ph pd pi lb ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://sites.google.com/site/unclebobconsultingllc/getting-a-solid-start" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">有了一个坚实的开端。—清洁编码器</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">鲍勃叔叔咨询有限责任公司。</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">sites.google.com</p></div></div><div class="pd l"><div class="pl l pf pg ph pd pi lb ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://codeburst.io/solid-design-principle-using-swift-fa67443672b8" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">使用Swift的可靠设计原则</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">坚实的原则是实现/创建有效的、可维护的、可扩展的和松散的…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">codeburst.io</p></div></div><div class="pd l"><div class="pm l pf pg ph pd pi lb ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://github.com/ochococo/OOD-Principles-In-Swift#-the-single-responsibility-principle" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">ocho coco/OOD-Swift原则</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">💎基于Bob叔叔文章的OOD (SOLID)原则。ochococo/OOD-Swift原则</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">github.com</p></div></div><div class="pd l"><div class="pn l pf pg ph pd pi lb ou"/></div></div></a></div></div></div>    
</body>
</html>