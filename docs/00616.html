<html>
<head>
<title>Android ConstraintLayout Explained Using a Complex UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用复杂的用户界面解释Android ConstraintLayout</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/android-constraintlayout-explained-using-a-complex-ui-861c92479c90?source=collection_archive---------5-----------------------#2019-06-19">https://betterprogramming.pub/android-constraintlayout-explained-using-a-complex-ui-861c92479c90?source=collection_archive---------5-----------------------#2019-06-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2989" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为你的应用程序构建一个复杂且响应迅速的用户界面</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8646245049b3186dfce10f0c898fb3d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mh2t1NLgS2-ypXrufCpkeg.png"/></div></div></figure><p id="3d5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://developer.android.com/reference/android/support/constraint/ConstraintLayout" rel="noopener ugc nofollow" target="_blank"> ConstraintLayout </a>的引入是为了给你的应用构建非常复杂且响应迅速的用户界面。我之前一直使用<a class="ae lq" href="https://developer.android.com/guide/topics/ui/layout/relative" rel="noopener ugc nofollow" target="_blank"> RelativeLayout </a>来构建复杂的UI，直到我遇到了这个复杂的UI。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/7000a5a07a936c55a28edbdf45c8ed28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9CABsclwJ4XEl1BgjMSLA.png"/></div></div></figure><p id="68fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面的截图是应用页脚中的一个片段的页脚，描述了登录过程的步骤，以及用户处于哪个步骤。</p><p id="837e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完成登录有三个步骤。</p><ul class=""><li id="a29c" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">输入手机号码</li><li id="e496" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">动态密码</li><li id="8bed" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">轮廓</li></ul><p id="19e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用户目前处于第一步，即“输入手机号码”。</p><p id="10c5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">花几分钟时间，尝试使用RelativeLayout或任何其他布局来构建上面的UI，看看效果如何。如果你能使用ConstraintLayout之外的布局来构建这个UI，请在评论中告诉我。</p><p id="83d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那些不熟悉ConstraintLayout的人，可以考虑先阅读一下<a class="ae lq" href="https://developer.android.com/training/constraint-layout/" rel="noopener ugc nofollow" target="_blank"> Android ConstraintLayout文档</a>。</p><p id="094e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们开始吧。</p><p id="8be3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先将Gradle依赖项添加到您的项目中。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="6ec4" class="ml mm it mh b gy mn mo l mp mq">dependencies {<br/>    implementation 'com.android.support.constraint:constraint-layout:1.1.2'<br/>}</span></pre><p id="4565" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">进一步解释一下，这是Android Studio的设计视图中UI的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/5ae01216e45370f5b647d1dbb7b23da9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMQcuPPj309FtABkdfmqAQ.png"/></div></div></figure><p id="00b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过使用指南，构建这个UI是可能的。</p><p id="d20c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">指导方针只不过是虚拟视图，它们本身是不可见的。可以在设计预览和蓝图中查看它们。在上图中，你可以看到我使用了两条指引线——两条可以在中间垂直和水平看到的虚线。</p><p id="550d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加了指南之后，XML看起来就是这样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="43a8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">线条<code class="fe mu mv mw mh b">app:layout_constraintGuide_percent=”0.5"</code> <strong class="kw iu"> </strong>定义了你想要的准线的确切位置。在我的例子中，我希望它在中间，所以值是0.5。</p><p id="cf00" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想水平地添加一个<code class="fe mu mv mw mh b">TextView</code>，例如，在你的屏幕的3/4宽度之后，你需要添加一个垂直的指引线。这确实是一条<em class="mx">垂直</em>指南。我们水平分割屏幕，所以我们将使用垂直基准线。</p><p id="3d31" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该指南将如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="42eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">希望这能给你一个指导方针的概述。我们现在回到最初的问题。</p><p id="88cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在添加了两条指导线——一条水平的，一条垂直的，正好在中间——之后，让我们添加第一个UI元素。</p><p id="aef5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们将把<code class="fe mu mv mw mh b">ImageView</code>加在指引的正中央。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="bc59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面的代码是将您的<code class="fe mu mv mw mh b">ImageView</code>准确地放置在水平准线的中心。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="b1bd" class="ml mm it mh b gy mn mo l mp mq">app:layout_constraintBottom_toTopOf="@+id/guideline1" <br/>app:layout_constraintTop_toTopOf="@+id/guideline1"</span></pre><p id="22d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下一个代码是将<code class="fe mu mv mw mh b">ImageView</code>精确地放置在垂直方向的中心。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="8617" class="ml mm it mh b gy mn mo l mp mq">app:layout_constraintEnd_toStartOf="@+id/guideline"<br/>app:layout_constraintStart_toStartOf="@+id/guideline"</span></pre><p id="211c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们将根据UI的要求，在这个<code class="fe mu mv mw mh b">ImageView</code>的左边和右边添加分隔线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6740" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面的几行将一个分隔线精确地放置在垂直中心，相对于<code class="fe mu mv mw mh b">ImageView</code>T3。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="7e3f" class="ml mm it mh b gy mn mo l mp mq">app:layout_constraintBottom_toBottomOf and app:layout_constraintTop_toTopOf</span></pre><p id="8d0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是我们现在UI的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/4c1ebc967dd13665fe08a6004224fc94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0hA1GwDAJmxNakuRjNf3g.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/e6a0f6b4d24b8a91fe7f824bc6ad3140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pI33b51cMko_aC_-Bzjbow.png"/></div></div></figure><p id="d9d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这些分隔线的末尾，我们将添加两个<code class="fe mu mv mw mh b">ImageViews</code>,如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="91fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是我们现在UI的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/6d5f642920ff579f54ae580e442e0a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHxK3Z3Sh_Zu-gzObf6K_Q.png"/></div></div></figure><p id="784b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们只需要在每个圆圈<code class="fe mu mv mw mh b">ImageView</code>的下方，准确地在水平中心添加三个<code class="fe mu mv mw mh b">TextView</code>。下面是添加这个的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="8213" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在上面的代码中，<code class="fe mu mv mw mh b">app:layout_constraintEnd_toEndOf</code> <strong class="kw iu"> </strong>和<strong class="kw iu"> </strong> <code class="fe mu mv mw mh b">app:layout_constraintStart_toStartOf</code> <strong class="kw iu"> </strong>会相对于<code class="fe mu mv mw mh b">ImageView</code>水平对齐文本。</p><p id="c775" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe mu mv mw mh b">app:layout_constraintTop_toBottomOf</code> <strong class="kw iu"> </strong>将文本对齐<code class="fe mu mv mw mh b">ImageView</code>下方。</p><p id="b39c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是我们最终的用户界面和XML代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/7000a5a07a936c55a28edbdf45c8ed28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9CABsclwJ4XEl1BgjMSLA.png"/></div></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="ac96" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在构建了这个UI之后，我意识到了使用ConstraintLayout的重要性。现在，我尽可能使用ConstraintLayout。</p></div></div>    
</body>
</html>