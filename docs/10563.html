<html>
<head>
<title>How to Implement Pagination in Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Rails中实现分页</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/pagination-in-rails-b3a9ba25b3c3?source=collection_archive---------1-----------------------#2022-01-15">https://betterprogramming.pub/pagination-in-rails-b3a9ba25b3c3?source=collection_archive---------1-----------------------#2022-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4d33" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用K <code class="fe kf kg kh ki b">aminari Gem</code></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/8a654059edf895bf2655e9a2335829a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*08WWrD_YO6VTWilNMeiVCg.png"/></div></div></figure><p id="9582" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个应用程序可以有很多资源。当一个模型拥有完整的CRUD功能时，它就在不断地成长。这使得浏览该资源的索引页面成为一项繁重的工作，而且对用户不太友好。为了避免无休止的滚动和清理，分页是一个好主意。</p><p id="f262" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就web应用程序而言，分页是指将一大组资源分成多个页面，并在每个页面上平均分配一定数量的资源。通常在底部会有一个导航索引，标明页数和用户当前正在查看的页面，以及一些到资源列表开头或结尾的快捷方式。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/9d94fa1d60df91ab88915da5744b0d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*MkirSE4Krohw-uCOQCNXcA.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">分页的基本示例</p></figure><p id="9677" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Rails应用程序中，分页器(如果不使用阿诺德·施瓦辛格的声音，就不可能大声说出来)使这一点变得非常容易。它与ActiveRecord一起在控制器调用中划分资源，并为每页分配指定的资源量。有许多分页宝石可供选择，如<a class="ae lw" href="https://github.com/kaminari/kaminari" rel="noopener ugc nofollow" target="_blank"> kaminari </a>、<a class="ae lw" href="https://github.com/ddnexus/pagy" rel="noopener ugc nofollow" target="_blank"> pagy </a>或<a class="ae lw" href="https://github.com/mislav/will_paginate" rel="noopener ugc nofollow" target="_blank"> will_paginate </a>。对于这篇文章，我将使用<code class="fe kf kg kh ki b">kaminari</code>来展示如何清理那些永无止境的索引页。</p><p id="d5f0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，将<code class="fe kf kg kh ki b">gem 'kaminari'</code>放在项目目录的<code class="fe kf kg kh ki b">Gemfile.rb</code>中安装gem，然后运行<code class="fe kf kg kh ki b">bundle</code>。安装gem后，您现在可以使用<code class="fe kf kg kh ki b">model.rb</code>文件中的<code class="fe kf kg kh ki b">paginates_per</code>方法指定每页显示的数量:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="0239" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的例子显示，每页将有25篇文章。接下来要做的是确保我们设置了一些用户友好的网址。在<code class="fe kf kg kh ki b">config/routes.rb</code>中，页面可以嵌套在Post的索引路径中，如下所示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="ca5f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果在帖子的第四页:<code class="fe kf kg kh ki b">/posts/page/4</code>，路线现在看起来会像这样。没有必要这样做，但是要知道，如果你不这样做，路线将会变成这样:<code class="fe kf kg kh ki b">/posts?page=4</code>。最好是一切都很好，休息，对不对？</p><p id="17fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">继续看控制器，在<code class="fe kf kg kh ki b">posts#index</code>中:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="9d7d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Kaminari不会组织资源，所以如果我们想让每个页面上的文章按字母顺序排列，我们可以在文章模型上调用<code class="fe kf kg kh ki b">order</code>方法。使用<code class="fe kf kg kh ki b">kaminari</code> gem提供的<code class="fe kf kg kh ki b">page</code>方法，将根据<code class="fe kf kg kh ki b">params[:page]</code>中包含的数字来选择帖子。</p><p id="438f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，在视图文件<code class="fe kf kg kh ki b">post.html.erb</code>中，我们可以调用同样由kaminari提供的帮助方法:</p><pre class="kk kl km kn gt lz ki ma mb aw mc bi"><span id="75dc" class="md me iq ki b gy mf mg l mh mi">&lt;%= paginate @posts %&gt;</span></pre><p id="96c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将呈现一个<code class="fe kf kg kh ki b">&lt;nav&gt;</code>标签，其中包含所有需要的页面链接。就是这样！我们的资源被分成页面，每个页面最多有25个帖子，并且它们有一些不错的RESTful路径。</p><p id="7f6c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有了像<code class="fe kf kg kh ki b">kaminari</code>这样的分页器，人们可以快速组织他们的大量资源，以获得更快的导航、更清晰的视图和更好的用户体验。</p></div></div>    
</body>
</html>