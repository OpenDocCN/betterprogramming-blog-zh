# 注释、干净的代码和 JavaScript

> 原文：<https://betterprogramming.pub/javascript-clean-code-comments-c926d5aae2cb>

## 我们看看什么时候需要评论，以及如何写评论

![](img/91ba513ed206062e4515022d861ca2fd.png)

由[布莱克·康纳利](https://unsplash.com/@blakeconnally?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/clean-code?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

注释有时用于解释用代码无法解释的思想。其他时候，它们被用来解释一些混乱的代码在做什么。

在本文中，我们将看看如何编写有用的注释，并且不弄乱代码。

# 我们需要评论吗？

大多数代码应该是不言自明的。如果不是，也许我们应该想个办法让它变成这样。可能有办法让代码足够清晰，这样就不需要注释了。

随着代码的改变，注释很快就会过时，因为当代码改变时，注释经常被忽略。它们不像代码那样频繁更新。这意味着代码将偏离它所描述的原始代码。

代码也经常移动。评论不跟。

我们可以像更新代码一样频繁地更新注释，但是最好让代码足够清晰，这样我们就不需要注释了。代码是我们首先需要处理的。注释只是为了支持代码。

不准确的注释会误导阅读代码的人。这并不好，因为它会导致对代码的错误理解，并由此产生不好的变化。

# 注释弥补不了糟糕的代码

注释可能会让一些人更愿意编写糟糕的代码，因为他们认为可以用注释来弥补混乱。

清晰的代码要比混乱的代码和大量的注释好得多。写评论的时间最好花在收拾残局上。

# 让代码自己解释

我们可以很容易地编写代码来解释它自己。例如，不要写:

```
if (employee.salary < 50000 && employee.hasChild) {
  //...
}
```

我们可以写:

第二个例子更好，因为它解释了条件的实际含义。如果我们只看第一个条件，其他阅读代码的人可能不知道这些条件是什么意思。

在第二个例子中，我们有一个`isEligibleForChildCareBenefits`函数，我们知道它检查一个`employee`是否有资格享受儿童保健福利。

# 好评

有些评论是必要的或有益的。例如，有时我们需要在代码的注释中加入法律声明。

## 法律意见

由于公司编码标准，有时需要法律注释。这可能包括版权信息、许可和其他信息。

他们不应该形成一个合同或有法律的语气。我们应该尽可能参考标准许可证或外部文档。

这方面的一个例子是:

```
// Copyright (C) 2020 by Foo Inc. All rights reserved
```

## 信息丰富的评论

有时候，除了代码之外，我们还想在注释中传达更多的信息。但在大多数情况下，它们可以在更好地命名事物后被删除。

信息性注释的示例如下:

```
// Person instance being tested
let person = new Person();
```

在这种情况下，我们可以将名称改为更有意义的名称，如:

```
let personBeingTested = new Person();
```

## 解释意图

有时候，我们想解释为什么我们要在代码中做一些事情。

## 澄清

我们也可以写注释来澄清我们不能改变的或者我们从其他库导入的不太清楚的东西。

例如，如果我们想使用 [Lodash](https://lodash.com/) 的`chunk`方法将一个数组分成一个指定块的数组，我们可能必须解释我们在做什么:

```
import * as _ from "lodash";// divide array into groups of 2
const arr = [1, 2, 3, 4, 5];
const splitArray = _.chunk(arr, 2);
```

这让人们不用看 Lodash 的手册就能知道`chunk`方法是做什么的。

## 后果警告

我们也可以使用注释让人们知道运行一些代码会导致一些后果。

例如，我们可以警告人们运行缓慢的代码，如下所示:

```
const slowCode = () => {
  // slow code
}
```

## 待办事项注释

在尚未实现的代码中留下注释也很常见。没有完成的代码，最终应该会完成，但目前做不到。

这些评论可以提醒你添加或删除一些代码，或者以某种方式清理它们。

## 强调

注释也可以用来强调某些代码的重要性。这表明代码很重要，这样人们就不会忽略它。

## JSDoc 注释

当我们编写库时，我们必须为使用它们的大众编写文档或代码。我们可以用 [JSDoc](https://jsdoc.app/) 通过在代码中写注释来做到这一点，这将从代码中生成文档。

它们通常看起来像这样:

这些评论是必要的，因为这是使用我们库的人获得如何使用它的信息的方式。

# 结论

在某些情况下，注释可能是有用的。我们可以用它来解释我们的决策，强调某些代码片段，警告人们后果，并为外部用户提供文档。

除此之外，我们可以更好地命名事物，编写更好的代码，使其更易于自我解释，而不是编写注释。