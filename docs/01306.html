<html>
<head>
<title>How To Add a Pull-to-Refresh Feature in Your UITableViewController Using Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Swift在UITableViewController中添加拉至刷新功能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-a-pull-to-refresh-feature-in-your-uitableviewcontroller-using-swift-5622fbf35664?source=collection_archive---------4-----------------------#2019-08-30">https://betterprogramming.pub/how-to-add-a-pull-to-refresh-feature-in-your-uitableviewcontroller-using-swift-5622fbf35664?source=collection_archive---------4-----------------------#2019-08-30</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="9b3e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">了解如何利用这个非常有用的隐藏功能</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/ba3b8cdec9cea3de6b2767d18a7ac5ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wz9iZwXFYNg8U12h"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">查尔斯·🇵🇭在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="171e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">开发人员偶尔会问我是否知道任何可用于管理<code class="fe lw lx ly lz b">UITableView</code>刷新的开源库。</p><p id="98bf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当我回答“为什么不用已经嵌入的苹果刷新控件？”人们常说，“已经有原生控件了？”</p><p id="6608" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">可能看起来很奇怪，但是很多开发者并不知道这个功能从iOS 6开始就有了。</p><p id="be0c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面你可以找到一个如何在不到五分钟的时间内实现它的示例项目。更多信息，你可以在这里找到苹果文档<a class="ae kz" href="https://developer.apple.com/documentation/uikit/uitableviewcontroller/1614752-refreshcontrol" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="b7ac" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated"><strong class="ak">简介</strong></h1><p id="e48d" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">首先，新建一个Xcode项目。可以从单视图app开始。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ne"><img src="../Images/61628c4dc639229989a0cbe86f3a331f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cTn1WCyFXGwEJileAw7dmA.png"/></div></div></figure><p id="8af6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本指南中，我将使用故事板，因为使用图形参考更容易解释，但所有这些都可以通过代码以编程方式完成，没有任何问题。</p><p id="23cc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在继续故事板，删除<code class="fe lw lx ly lz b">ViewController</code>，添加一个<code class="fe lw lx ly lz b">UITableViewController</code>。通过属性检查器将其设置为<code class="fe lw lx ly lz b">Initial View Controller</code>。然后选择<code class="fe lw lx ly lz b">UITableViewCell</code>，并将标识符重命名为<code class="fe lw lx ly lz b">Cell</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nf"><img src="../Images/d7fa84dfc8a69903a99a42dd7d1c8503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VE0MGC394YKkuKmKzwnGpw.png"/></div></div></figure><p id="d0f1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在创建<code class="fe lw lx ly lz b">TablewViewController</code>文件，并在<code class="fe lw lx ly lz b">TableViewController</code> Identity Inspector上将它设置为自定义类。下面您可以看到我是如何用一些元素填充表格的:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><p id="207b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您现在运行这个应用程序，您应该会看到一个包含三个元素的简单表格。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ni"><img src="../Images/40aee66457d1accc2f5b1edfee134781.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*gytzfZDMOWb8LsqJqR4kig.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">极简设计，对吧？</p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="dcf2" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">UIRefreshControl</h1><p id="d9f3" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">最后，我们可以谈谈我们的新朋友。</p><p id="12b6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">回到故事板，选择<code class="fe lw lx ly lz b">TableViewController</code>，启用属性检查器下的刷新选项。您还可以自定义字体、颜色和文本对齐方式。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nj"><img src="../Images/ed6eb70371cbf49410aa46049441fe95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2PNGZVQcA1gqxIuU5bsLw.png"/></div></div></figure><p id="13f4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后将<code class="fe lw lx ly lz b">Refresh Control</code> <em class="nk"> </em>出口链接到您的代码，并添加<code class="fe lw lx ly lz b">valueChanged event</code>。务必选择<code class="fe lw lx ly lz b">UIRefreshControl</code> <strong class="lc iv"> <em class="nk"> </em> </strong>作为发送方。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nl"><img src="../Images/01ff1803584affaf986f86f990c7d6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*UDChSzd8lS_C6H-4cu1s8g.gif"/></div></figure><p id="0124" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们差不多完成了——我们只需要给我们的新事件添加一些逻辑。例如，我们可以添加一个以最后一个数字<code class="fe lw lx ly lz b">+ 1</code>作为值的新元素。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="818a" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">最后试验</h1><p id="b237" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">现在让我们试着运行它，看看在模拟器上会发生什么。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nm"><img src="../Images/bce27d6034457515e1d3a4e42efafd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/1*KlA1mbgzPoB3iX9xZYGXsw.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">好哇</p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><figure class="kk kl km kn gu ko gi gj paragraph-image"><a href="https://www.buymeacoffee.com/nicolidomenico"><div class="gi gj nn"><img src="../Images/2a5f4681ef2bdba5652dc9b023b668a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-JJemrcn63kKj3lPBwZ5w.png"/></div></a></figure><h1 id="919d" class="mh mi iu bd mj mk no mm mn mo np mq mr ka nq kb mt kd nr ke mv kg ns kh mx my bi translated">结论</h1><p id="9202" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">我们在没有第三方库的情况下刷新了表格内容。请记住，我们也可以在我们的应用程序中使用这一点，通过网络请求获得新的内容数据，就像脸书和Instagram应用程序所做的那样，只需更改<code class="fe lw lx ly lz b">changedValue </code>事件中的代码。</p><p id="fc1a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">你可以在这里</strong>  <strong class="lc iv">找到</strong> <a class="ae kz" href="https://github.com/domeniconicoli/TableRefreshControl" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">的完整代码。</strong></a></p></div></div>    
</body>
</html>