<html>
<head>
<title>Recreate the Old Mac OS X Panther Finder Using SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI重新创建旧的Mac OS X黑豹探测器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/recreate-the-old-mac-os-x-panther-finder-using-swiftui-d08a8afb6357?source=collection_archive---------13-----------------------#2021-01-28">https://betterprogramming.pub/recreate-the-old-mac-os-x-panther-finder-using-swiftui-d08a8afb6357?source=collection_archive---------13-----------------------#2021-01-28</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="13ef" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">看起来像糖果的拉丝金属效果和浅绿色按钮又回来了</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/debd252890eb992745b29207b6987145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tU5K0YL47RuPoSZC.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者照片。</p></figure><p id="edd7" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">最初的Mac OS X(版本10.0)引入了一个名为Aqua的新用户界面。史蒂夫·乔布斯自信它看起来足够好去舔。这可能是因为按钮泡泡上的灯光让它们看起来像糖果。</p><p id="8d05" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这是一个关于重新创建上面的Finder窗口的教程，它更类似于OS X 10.2(也称为Panther)。这个版本和以前版本的主要区别是拉丝金属背景和内容后面没有细条纹。</p><p id="8def" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我用三层实现了这个效果:</p><ul class=""><li id="cbaf" class="lv lw iu lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">纯浅灰色</li><li id="a98b" class="lv lw iu lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">画水平线的路径</li><li id="b3ff" class="lv lw iu lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">提供照明的渐变</li></ul><p id="ab07" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在我们开始之前，我们应该设置一些<code class="fe mj mk ml mm b">Color</code>常量。这些是你重建整个窗户所需的唯一颜色。以这种方式创建常量是很有用的，因为接受类型为<code class="fe mj mk ml mm b">Color</code>的参数的修饰符允许您像传递现有系统颜色的<code class="fe mj mk ml mm b">.red</code>一样传递类似<code class="fe mj mk ml mm b">.aquaRed</code>的值。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">SwiftUI颜色的扩展</p></figure><p id="8593" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">首先，我们创建一个包含水平线路径的形状。</p><p id="b083" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果你仔细观察<a class="ae mp" href="https://guidebookgallery.org/pics/gui/system/managers/filemanager/macosx103-1-1.png" rel="noopener ugc nofollow" target="_blank">最初的金属拉丝效果</a>，你会发现线条并不完全笔直。我们的线是二次曲线，这意味着它们有一个控制点，使它们向上或向下弯曲。为了使效果缩放到任意大小，我决定使用一个循环，将窗口的高度分成五个点的步长。如果窗口高度为500磅，循环将绘制100条线。每条曲线的垂直位置以及弯曲它的控制点仍然是随机计算的。</p><p id="7363" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果线条不是随机绘制的，它看起来就太像条纹图案了。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">拉丝金属窗户背景</p></figure><p id="27f8" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">接下来，我们需要制作一个圆形按钮，用于窗口左上角的关闭、最小化和全屏按钮。我们从制作一个简单的<code class="fe mj mk ml mm b">View</code>开始，它创建一个带有渐变的任意形状的轮廓。这有助于在顶部添加高光，在底部添加阴影，这在OS X浅绿色设计中很常见。我们把它用于圆形按钮，也用于窗口本身的轮廓。在<code class="fe mj mk ml mm b">ZStack</code>的背面，我们有一个高光，它是一个向左偏移的非常浅的灰色圆圈。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">红色关闭、黄色最小化和绿色全屏3D浅绿色按钮</p></figure><p id="7f8b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在这之前，我们有一个没有指定<code class="fe mj mk ml mm b">foregroundColor</code>的圆，这很重要，因为这将呈现我们希望按钮呈现的颜色。圆圈的下半部分有一个亮点，这是通过模糊一个白色的圆圈并向下移动来实现的。我使用了一个<code class="fe mj mk ml mm b">GeometryReader</code>来计算应该应用多少偏移量，以及确定顶部高光的大小。最后，我们添加轮廓，然后将整个按钮剪成圆形，纵横比设置为方形。</p><p id="d707" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">现在我们将为Finder窗口创建内容。我们将从搜索字段开始，它并不复杂。背景是一个白色胶囊，前面有一个偏移轮廓。前景是一个带有放大镜图标的<code class="fe mj mk ml mm b">HStack</code>和一个普通的SwiftUI <code class="fe mj mk ml mm b">TextField</code>，它实际上没有自己的背景。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">圆形搜索区域</p></figure><p id="02b5" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在<a class="ae mp" href="https://guidebookgallery.org/pics/gui/system/managers/filemanager/macosx103-1-1.png" rel="noopener ugc nofollow" target="_blank">这个Finder </a>截图的右上角有一个按钮，是切换工具栏按钮。这在现代版本的macOS中已经不存在了，在OS X黑豹的所有应用程序的所有窗口中也不可用。它和我的<a class="ae mp" href="https://typesafely.substack.com/p/recreate-the-3d-aqua-buttons-from" rel="noopener ugc nofollow" target="_blank"> 3D Aqua buttons教程</a>中的按钮非常相似，有一些细微的变化。它不需要标题，所以我们不需要将配置传递给按钮。这与圆形按钮的主要区别在于使用了<code class="fe mj mk ml mm b">Capsule</code>形状而不是<code class="fe mj mk ml mm b">Circle</code>，允许按钮向任何方向伸展。长宽比没有锁定，所以可以更高或更宽，而不会破坏我们期望的外观。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">右上角的灰色切换工具栏3D Aqua按钮</p></figure><p id="8dbe" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">现在我们已经完成了顶行，我们可以将红色、黄色和绿色按钮与灰色工具栏按钮结合起来。窗口的标题将在两者之间居中。如你所见，按钮是由我们之前创建的<code class="fe mj mk ml mm b">Color</code>的扩展赋予颜色的。因为它们的纵横比被锁定为正方形，所以圆形按钮不需要给定宽度。切换工具栏按钮的宽度为30，而<code class="fe mj mk ml mm b">HStack</code>高度设置了所有子按钮的高度，因此它们不需要单独设置。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">标题栏包括所有四个按钮和居中的窗口标题。</p></figure><p id="e17f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">窗口顶部的最后一个接触点是控件。如果你看一下Finder 的截图，你会看到后退和前进按钮，三个查看模式选项，以及一个操作按钮。我们实际上可以从同一个控件中制作所有这些，我称之为<code class="fe mj mk ml mm b">AquaSegmentedControlView</code>。这需要一个特定的波形作为背景，所以我先做一个。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">该形状从左下方到右上方弯曲两次。</p></figure><p id="d17b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">波浪形状是用来掩盖一个非常浅的灰色，几乎是白色，揭示其背后的线性梯度。现在我们有了按钮的背景，我们可以继续创建它们了。我定义了一个名为<code class="fe mj mk ml mm b">ButtonData</code>的类型，它允许我们将所有按钮的配置作为一个数组传递。这个数组在一个<code class="fe mj mk ml mm b">ForEach</code>中使用，它显示每个按钮标题并在它们之间放置分隔线。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">一记重击</p></figure><p id="cdb2" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">像我们创建的其他按钮一样，大多数按钮的action闭包都是空的，但是显然您可以在闭包中做您想做的事情。这种情况的例外是视图模式，它实际上在左端有一个突出显示的部分。为了实现这一点，我添加了一个<code class="fe mj mk ml mm b">viewModeIndex State&lt;Int&gt;</code>属性来跟踪哪个片段被选中。点击线段会改变此属性，当前选定的线段会以蓝色突出显示。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">这结合了后退、前进、查看模式和动作按钮。</p></figure><p id="ee37" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">所以现在我们有了所有我们想要的控件和空闭包，如果我们想增加功能，可以把代码放入其中。我们需要做的最后一件事是创建显示Finder内容的scrollviews。出于本教程的目的，它将是硬编码的字符串。在下面的例子中，我对图标使用了表情符号:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Finder窗口中左侧的小面板</p></figure><p id="8b41" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果你想使用这些或添加你自己的图像，这取决于你。重要的是，这是一条竖线<code class="fe mj mk ml mm b">ScrollView</code>，在前两项之后加了一条横线。我们将对主要内容区域做一些类似的事情，除了这将使用一个<code class="fe mj mk ml mm b">VGrid</code>来代替。网格使用表情符号📁作为文件夹的图标，这是我节省时间的另一种方式，而不必复制每个图标。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">FInder窗口中文件夹图标的主网格</p></figure><p id="ac26" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">最后，我们可以将所有东西放在一起，创建一个完整的窗口。我们将<code class="fe mj mk ml mm b">AquaWindowControlsView</code>放在后面，因为它会延伸到窗口的大小，以便将自己放在顶部而不受其他任何东西的影响。顶部控件和内容在此之上的一个<code class="fe mj mk ml mm b">VStack</code>中，背景插入在<code class="fe mj mk ml mm b">ZStack</code>的后面。<code class="fe mj mk ml mm b">AquaHighAndLowlightView</code>被添加到其他所有东西的顶部。</p><p id="83e3" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">因为窗口添加了一个<code class="fe mj mk ml mm b">cornerRadius</code>修改器，所以使用了一个覆盖图。</p><p id="53bf" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这实际上是用一个圆角矩形对它进行了屏蔽，如果轮廓不在被屏蔽视图的顶部，它就有被屏蔽的风险。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mn mo l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">完整的Finder窗口代码</p></figure><p id="634e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我用了🏠在<code class="fe mj mk ml mm b">AquaWindowControlsView</code>中的单词<code class="fe mj mk ml mm b">Home</code>旁边有表情符号，但是你也可以尝试复制这个图标。</p></div></div>    
</body>
</html>