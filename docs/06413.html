<html>
<head>
<title>Overriding UserDefaults for Improved Productivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">覆盖用户默认值以提高生产率</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/overriding-userdefaults-for-improved-productivity-244969d42e3a?source=collection_archive---------13-----------------------#2020-09-29">https://betterprogramming.pub/overriding-userdefaults-for-improved-productivity-244969d42e3a?source=collection_archive---------13-----------------------#2020-09-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a650" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更好的用户默认值</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/60f2612e86cc50160691429cef4f6b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*89Ypzifp_ZN2lJEB"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@socialcut?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">S O C I A L C U T</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="244b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">UserDefaults</code>应用内用于存储与用户配置相关的数据。这是一个易于访问的数据存储，用于保存状态、统计数据和其他与应用程序相关的数据。</p><p id="d05d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启动参数在启动时传递给应用程序，可用于修改应用程序以进行调试。苹果经常使用它来允许开发者启用特定的调试模式，<a class="ae ky" href="https://www.avanderlee.com/debugging/core-data-debugging-xcode/" rel="noopener ugc nofollow" target="_blank">就像在核心数据</a>中一样。我们可以自己做同样的事情，在我们的应用程序中启用某些调试模式。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="dc86" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">一个例子:用户默认触发一个应用程序介绍</h1><p id="aa23" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">使用启动参数的一个常见用例是在开发过程中强制启用介绍屏幕。如果没有这个，我们每次都需要重新安装应用程序，这样就会出现介绍屏幕。</p><p id="0cf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例代码实现可能如下所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="eba1" class="nh mh it ly b gy ni nj l nk nl">var shouldShowIntroduction: Bool {<br/>    /// Use a launch argument to always skip the app introduction.<br/>    if ProcessInfo.processInfo.arguments.contains("-skipAppIntroduction") {<br/>        return false<br/>    }<br/><br/>    /// Use a launch argument to always show the app introduction.<br/>    if ProcessInfo.processInfo.arguments.contains("-requireAppIntroduction") {<br/>        return true<br/>    }<br/><br/>    /// No launch arguments found, read from the user defaults.<br/>    return UserDefaults.standard.bool(forKey: "hasSeenAppIntroduction") == false<br/>}</span></pre><p id="f0e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们有三种选择:</p><ul class=""><li id="e2a1" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated">使用<code class="fe lv lw lx ly b">-skipAppIntroduction</code>启动参数强制跳过介绍</li><li id="5d99" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">使用<code class="fe lv lw lx ly b">-requireAppIntroduction</code>启动参数强制启用引入</li><li id="68d5" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">从用户默认值中读取值</li></ul><p id="31d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管这种方法可行，但它很容易填满您的启动参数，并且需要额外的代码，存在潜在的错误。直接覆盖用户默认值会容易得多。如果是这样，我们可以有一个简单的代码实现，如下所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="6f02" class="nh mh it ly b gy ni nj l nk nl">import SwiftUI<br/><br/>@main<br/>struct UserDefaultsLaunchArgumentsApp: App {<br/>    var body: some Scene {<br/>        WindowGroup {<br/>            if UserDefaults.standard.bool(forKey: "hasSeenAppIntroduction") == false {<br/>                IntroductionView()<br/>            } else {<br/>                ContentView()<br/>            }<br/>        }<br/>    }<br/>}</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="857d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用启动参数覆盖用户默认值</h1><p id="f3af" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">使用启动参数覆盖用户默认值可以在scheme编辑器中完成。在这种情况下，我们希望通过覆盖<code class="fe lv lw lx ly b">hasSeenAppIntroduction</code>用户默认值来强制启用介绍屏幕。</p><p id="f5fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过以下步骤完成此操作:</p><ol class=""><li id="c7cf" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu oa ns nt nu bi translated">选择您的方案，点击<code class="fe lv lw lx ly b">Edit Scheme...</code>，或使用<code class="fe lv lw lx ly b">Product ➞ Scheme ➞ Edit Scheme...</code></li><li id="f4b6" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu oa ns nt nu bi translated">转到<code class="fe lv lw lx ly b">Run</code>，打开<code class="fe lv lw lx ly b">Arguments</code>选项卡</li><li id="9edc" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu oa ns nt nu bi translated">给<code class="fe lv lw lx ly b">Arguments Passed On Launch</code>添加一个新值</li><li id="9dd5" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu oa ns nt nu bi translated">在本例中，添加:<code class="fe lv lw lx ly b">-hasSeenAppIntroduction 0</code></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/f4d35bfc9d7d5d5e75ed2e20822771e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XISceu9I__fjio0F.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用启动参数覆盖用户默认值</p></figure><p id="765d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要使用键前面的破折号来传递启动参数。该值可以添加在键的后面。在这种情况下，我们将使用一个零，它等于布尔值<code class="fe lv lw lx ly b">false</code>。如果我们想强制禁用简介屏幕，我们可以使用值1。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b322" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="2c46" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">就是这样！我们在不接触代码的情况下，为开发启用了应用程序介绍。自定义启动参数允许我们改变用户默认值，因此总是显示简介。</p><p id="2b2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢！</p></div></div>    
</body>
</html>