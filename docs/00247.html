<html>
<head>
<title>How To Use Destructuring and Arrow Functions to Improve Your JavaScript Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用析构和箭头函数来改进您的JavaScript代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-these-javascript-features-to-make-your-code-more-readable-ec3930827226?source=collection_archive---------0-----------------------#2018-12-15">https://betterprogramming.pub/use-these-javascript-features-to-make-your-code-more-readable-ec3930827226?source=collection_archive---------0-----------------------#2018-12-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3e593f69137a09300ab796a2b5a9648d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ik6L-c0Bqaw4Xcq"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@grohsfabian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Fabian Grohs </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f5e4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有一些日常小技巧，可以让你的JavaScript代码可读性更好。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="ee5d" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">解构</h1><p id="6981" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">以这个(有意)深度嵌套的对象为例。阅读哺乳动物的<code class="fe mo mp mq mr b">age</code>会让我们看到非常长且重复的代码。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/c07f758f6e55c92b9f8ee5a7595a74a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BnXLqepcjPRYHY80YKAtA.png"/></div></div></figure><p id="8b82" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们可以通过对象析构来大幅缩短代码。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="9090" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">对象析构</h1><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/816456661c0c546df287afd4373334d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J3ZqPBjdlBZD8dZDkj-WEw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">毁灭熊和鹿</p></figure><p id="90a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好多了，没那么罗嗦。注意，我们使用常数，因为我们不想改变年龄。但是想想看；年龄不是一个常数，事实上，年龄每年都会增加一次。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/cdcef7764b867b97335c1842aeca3733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-8mobkTeMhsDJggD9-pY9Q.png"/></div></div></figure><p id="c7b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们把它声明为一个常量，然后试图改变它，我们会得到一个错误。这就是常数的意义——它是不可改变的。</p><p id="dd51" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了绕开这个(故意的)<em class="mz"> </em>限制，我们可以使用<code class="fe mo mp mq mr b">let</code>关键字(可变的)来代替。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/4cdc0b2af6efa090dae73a1258166168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iHjjJ1DUxp-5EfKUwwCnIA.png"/></div></div></figure><p id="099d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太好了，有用。让我们试着用<code class="fe mo mp mq mr b">let</code>和<code class="fe mo mp mq mr b">const</code>两个关键词来解构一下。给熊和鹿起个名字。现在，通常，一个人的名字不会改变太频繁，如果有的话，因此我们可以把它视为不可改变的。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/80687b223e65d213d5a06778fbfe5f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*99A1RDtm_Xgau5vK8zDGCg.png"/></div></div></figure><p id="0639" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以对数组应用解构，就像这样:</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="9445" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">数组解构</h1><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/ab7cff3389c58bce9c21bc85f89b8cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fz7Ub74UXdqITKkl4LrKxw.png"/></div></div></figure><p id="ca6f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很酷，但是还有更多！</p><p id="8d23" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我推荐多看一些解构的酸甜苦辣。下面你会发现一个关于析构的详细章节。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nd"><img src="../Images/095cc3fb8ee604e46d466b40269e31e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONaBn5VrAKP0d6AqKl0zog.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="http://exploringjs.com/es6/ch_destructuring.html" rel="noopener ugc nofollow" target="_blank">http://exploringjs.com/es6/ch_destructuring.html</a></p></figure></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="b598" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">箭头功能</h1><p id="9d67" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">箭头函数是缩短代码的一种很酷的方式。它们与传统功能不太一样。箭头函数是词汇范围的。我们一会儿会谈到这一点。</p><p id="fa39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以我们之前的动物为例。你将如何循环每个动物，以及<code class="fe mo mp mq mr b">console.log</code>每个动物？</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/0979e6f6e81cfeefba1759d4361b0940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEvG1xC6ezAhhz2jaTUULg.png"/></div></div></figure><p id="3c72" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没什么太特别的，传统的<code class="fe mo mp mq mr b">forEach</code>循环。对于每一只动物，我们都要登记。让我们重构我们的<code class="fe mo mp mq mr b">forEach</code>循环来使用箭头函数。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/f5052e6883882d95f5fed936d5b300fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7r8ae9p1XlNdnPVtZfxbwA.png"/></div></div></figure><p id="9a1b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">干净多了，不罗嗦了。我们需要编写的代码越少，将来需要维护的代码就越少。一个好的经验法则是少写代码，但是不要写过于复杂的代码。</p><p id="99f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有一个更复杂的例子:</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/c32307208f4b31204f0fcfec67987ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-brIR2SEU89xmKcACUVZVQ.png"/></div></div></figure><p id="a140" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种模式被称为currying。我们在函数中返回一个函数。使用currying的最著名的例子是来自<a class="ae kf" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank"> Redux </a>的<code class="fe mo mp mq mr b">connect()()</code>函数。</p><p id="b363" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，<code class="fe mo mp mq mr b">**</code>是取幂运算符，它相当于<code class="fe mo mp mq mr b">Math.pow</code>。</p><p id="b8aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mo mp mq mr b">multiplyAndAdd</code>功能说明:</p><ul class=""><li id="f9cd" class="nh ni it ki b kj kk kn ko kr nj kv nk kz nl ld nm nn no np bi translated"><code class="fe mo mp mq mr b">multiplyAndAdd</code>取一个数，将<code class="fe mo mp mq mr b">base</code>返回到<code class="fe mo mp mq mr b">exponent</code>的幂(乘法)。</li><li id="ec1f" class="nh ni it ki b kj nq kn nr kr ns kv nt kz nu ld nm nn no np bi translated">将一个数字加到指数上。</li></ul><p id="ae47" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mo mp mq mr b">multiplyAndAdd(2)(4)</code>和<code class="fe mo mp mq mr b">2x2 + 4</code>一样。</p><p id="d2c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们使用箭头函数编写相同的功能。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/4919a4626086645ec11a96d3efc417b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2mAMC4n8eD9ZjSbwi4Xfg.png"/></div></div></figure><p id="b017" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">肯定不那么罗嗦了——但是我们可以做得更多。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nw"><img src="../Images/03a40db2fff95786980313b47faff614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEdylnVPUxD50ejelpTnMQ.png"/></div></div></figure><p id="3329" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太好了，我们从六行代码减少到只有一行代码！</p><h2 id="fc0c" class="nx lm it bd ln ny nz dn lr oa ob dp lv kr oc od lz kv oe of md kz og oh mh oi bi translated"><strong class="ak">注意事项1 </strong></h2><p id="fe31" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">请注意，这里没有return语句。通常情况下，需要使用<code class="fe mo mp mq mr b">return</code>语句从函数中返回值。箭头函数隐式调用<code class="fe mo mp mq mr b">return</code>，只要没有大括号。如果我们使用带括号的箭头函数，我们必须显式地调用返回。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/1f97aa9594a619b708ad7b43c73bc477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-8lgr7ygF1ajeV6H8jGhA.png"/></div></div></figure><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ok"><img src="../Images/e71a49a17608f66863bdfb3b0046bba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WFoNym_8qHNz90TiAfDoFQ.png"/></div></div></figure><p id="098c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这对你来说是新的，看看这篇关于退货规则的文章。</p><h2 id="4db5" class="nx lm it bd ln ny nz dn lr oa ob dp lv kr oc od lz kv oe of md kz og oh mh oi bi translated"><strong class="ak">注意事项2 </strong></h2><p id="1557" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated"><code class="fe mo mp mq mr b">this</code>关键字与箭头函数的工作方式不同。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/2a7adf91030ebccfbb8fe356e79ed787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bESBf_NfVTnTO8K4Z1QDuA.png"/></div></div></figure><p id="938b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">举个例子:</p><p id="132e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有一个<code class="fe mo mp mq mr b">person</code>对象。在对象内部，我们有两个属性；人的<code class="fe mo mp mq mr b">name</code>，以及一个返回<code class="fe mo mp mq mr b">person</code>名称的函数。</p><p id="f0f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们调用<code class="fe mo mp mq mr b">sayName</code>方法，第一个<code class="fe mo mp mq mr b">this</code>指向person对象，但是第二个<code class="fe mo mp mq mr b">this</code>是<code class="fe mo mp mq mr b">undefined</code>。</p><p id="fdd4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，第二个<code class="fe mo mp mq mr b">this</code>实际上指向窗口对象，但是因为我们使用的是<a class="ae kf" href="https://quokkajs.com/docs/index.html" rel="noopener ugc nofollow" target="_blank"> Quokka </a>，所以没有窗口对象。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/a8ecbfc40a9bb366092bfbc825e76e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YeiwcrsOwO6KUbabNQzsIg.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">第二，这指向窗户</p></figure><p id="3a1f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为什么会这样？这其实也是一个很常见的面试问题。回答这个问题表明你对语言机制有很好的理解。<a class="ae kf" href="https://stackoverflow.com/a/3127440/5073961" rel="noopener ugc nofollow" target="_blank">查看这个StackOverflow答案，获得深入的答案</a>。</p><p id="ef70" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是使用常规函数解决这一问题的常见方法。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi on"><img src="../Images/c5f7f344565af708443880e80be493ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6m_QDSewyJdrPVnw5IU5yQ.png"/></div></div></figure><p id="06c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Arrow函数是词汇范围的，它在arrow函数中的值是由周围的范围决定的，因此它们不需要这种变通方法。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oo"><img src="../Images/2104df2da87ecfbbde797fe7249e9227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzA1XA20jp5c-NzaIz3VIQ.png"/></div></div></figure></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="bfbf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想让你的JavaScript更上一层楼，我建议阅读“<a class="ae kf" href="https://amzn.to/2yoybJd" rel="noopener ugc nofollow" target="_blank">雄辩的JavaScript </a>”这本书。</p><p id="1cc2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读，保持敬畏！❤</p></div></div>    
</body>
</html>