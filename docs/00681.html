<html>
<head>
<title>SwiftUI: Reusable Components/Higher-Order-Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI:可重用组件/高阶组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-reusable-components-higher-order-components-192c65375c36?source=collection_archive---------5-----------------------#2019-06-29">https://betterprogramming.pub/swiftui-reusable-components-higher-order-components-192c65375c36?source=collection_archive---------5-----------------------#2019-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3332" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用和操作HOC</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/63e10b3f662c721d2fae2ea2db429525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S_pxyiS7mEwz3ZFc-rAXdA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">泰勒·拉斯托维奇在<a class="ae kv" href="https://unsplash.com/search/photos/iphone?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a55f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">* * Safari似乎无法显示代码片段，请尝试使用Chrome** </em></p><p id="f159" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您曾经使用过React或React-Native，那么在重用组件行为和UI时，高阶组件是首选的设计模式。</p><p id="712a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种模式对iOS来说也并不陌生。查看这篇关于在iOS上创建定制组件的文章。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="f4b8" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated"><strong class="ak"> SwiftUI的HOC语法—正确的方法</strong></h1><p id="c7d2" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">让我们把<em class="ls">真的</em> <strong class="ky ir"> </strong>简单点吧。这是我们在SwiftUI中创建高阶组件所需的所有代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="8017" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">注意:在初始化器中，我特意将</em> <code class="fe mz na nb nc b"><em class="ls">_ childView</em></code> <em class="ls">设置为符合一个闭包类型，该闭包类型返回我们的泛型</em> <code class="fe mz na nb nc b"><em class="ls">View</em></code> <em class="ls">，这使得代码更具可读性。或者，也可以设置成这样… </em> <code class="fe mz na nb nc b"><em class="ls">_ childView: C</em></code> <em class="ls">，调用</em> <code class="fe mz na nb nc b"><em class="ls">ContainerView(Text("Hello!"))</em></code></p><h2 id="8213" class="nd mb iq bd mc ne nf dn mg ng nh dp mk lf ni nj mm lj nk nl mo ln nm nn mq no bi translated">代码分解</h2><ol class=""><li id="8864" class="np nq iq ky b kz ms lc mt lf nr lj ns ln nt lr nu nv nw nx bi translated"><code class="fe mz na nb nc b">ContainerView</code>为我们的<code class="fe mz na nb nc b">View</code>声明了一个<a class="ae kv" href="https://docs.swift.org/swift-book/LanguageGuide/Generics.html" rel="noopener ugc nofollow" target="_blank">通用</a>约束，也称为类型约束语法</li><li id="9523" class="np nq iq ky b kz ny lc nz lf oa lj ob ln oc lr nu nv nw nx bi translated">我们将泛型存储为名为<code class="fe mz na nb nc b">childView</code>的属性</li><li id="76d6" class="np nq iq ky b kz ny lc nz lf oa lj ob ln oc lr nu nv nw nx bi translated">在<code class="fe mz na nb nc b">body</code>内我们返回<code class="fe mz na nb nc b">childview</code></li><li id="2f91" class="np nq iq ky b kz ny lc nz lf oa lj ob ln oc lr nu nv nw nx bi translated">简单！已成功创建HOC！</li></ol></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="8933" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">实际例子</h1><p id="385a" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">让我们严肃起来，如果没有一个好的实际例子，我们就无法真正欣赏HOC，让我们开始吧！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/bb318e25a6c10e3c1a71b18da421e7b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/1*T299peElgwDolFSBo2W7AA.gif"/></div></figure><h2 id="d1c6" class="nd mb iq bd mc ne nf dn mg ng nh dp mk lf ni nj mm lj nk nl mo ln nm nn mq no bi translated">创建可拖动的特设</h2><p id="59a3" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">如果我们尝试创建一个组件，让每个孩子都有能力变得可拖动，并在释放时弹回到原来的位置，会怎么样？</p><p id="fef8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要创建一个新的视图组件，我们将其命名为<code class="fe mz na nb nc b">DraggableView</code> <strong class="ky ir"> </strong>，它采用了我们之前编写的特殊语法。</p><p id="9b15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其次，我们必须为拖动手势和弹簧动画编写业务逻辑。</p><p id="9c73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过传递子组件进行渲染来将<code class="fe mz na nb nc b">DraggableView</code>付诸实施！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="994a" class="ma mb iq bd mc md oe mf mg mh of mj mk jw og jx mm jz oh ka mo kc oi kd mq mr bi translated">最后的想法！</h1><p id="a60f" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">瞧啊。就这样，我们结束了！我没能找到任何关于为SwiftUI创建HOC的文章，但是我希望你能像我喜欢写这篇文章一样喜欢读这篇文章！</p><p id="5818" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还推荐查看这篇关于创建你自己的自定义视图修改器的文章，就像他们的名字一样，他们修改你的视图。</p><p id="95a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我知道你的想法！</p></div></div>    
</body>
</html>