<html>
<head>
<title>Complete Android Data Binding Tutorial (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完整的Android数据绑定教程(第2部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/android-data-binding-2-37737eef89d9?source=collection_archive---------3-----------------------#2020-01-04">https://betterprogramming.pub/android-data-binding-2-37737eef89d9?source=collection_archive---------3-----------------------#2020-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e91c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">没有更多的findViewById()</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/80388522681331cf9003064ac69157a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*CIJeAD3lohz9FMQNDS92-w.png"/></div></figure><p id="db2b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在本系列的第1部分中，我已经讨论了一些与Android数据绑定相关的基础知识。如果您是新手，我建议您回到第1部分，以确保您清楚Android数据绑定的概念和基础知识。</p><blockquote class="lk"><p id="8ac3" class="ll lm iq bd ln lo lp lq lr ls lt li dk translated">今天的动机</p><p id="e2cc" class="ll lm iq bd ln lo lp lq lr ls lt li dk translated">“为了记录下你的下一个梦，睡前阅读…”</p><p id="fa3c" class="ll lm iq bd ln lo lp lq lr ls lt li dk translated"><strong class="ak">——纳内特·l·埃弗里</strong></p></blockquote><p id="cbbd" class="pw-post-body-paragraph kn ko iq kp b kq lu jr ks kt lv ju kv kw lw ky kz la lx lc ld le ly lg lh li ij bi translated">在这篇文章中，我将向您展示如何通过不同的方法使用Android数据绑定来实现点击事件。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="2924" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">处理点击事件</h1><p id="1a86" class="pw-post-body-paragraph kn ko iq kp b kq my jr ks kt mz ju kv kw na ky kz la nb lc ld le nc lg lh li ij bi translated">在您的项目中，使用Android数据绑定处理不同的事件非常容易。让我向您展示如何实现点击事件。</p><p id="aacb" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我正在用一个按钮和一个将在<code class="fe nd ne nf ng b">textView</code>中显示输入文本的<code class="fe nd ne nf ng b">EditText</code>创建一个新项目。</p><p id="5ac6" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这是我的<code class="fe nd ne nf ng b">activity_main.xml</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="4a38" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了使用数据绑定使按钮起作用，有两种方法:使用内部类和不使用内部类。我向你展示了两种方式。</p><h2 id="daea" class="nj mh iq bd mi nk nl dn mm nm nn dp mq kw no np ms la nq nr mu le ns nt mw nu bi translated">没有内部阶级</h2><p id="b22c" class="pw-post-body-paragraph kn ko iq kp b kq my jr ks kt mz ju kv kw na ky kz la nb lc ld le nc lg lh li ij bi translated">为此，您需要在Java类中创建一个公共函数，并使用数据绑定将该函数与一个按钮绑定。让我告诉你怎么做。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="beb7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">下面是将用于执行任何任务的<code class="fe nd ne nf ng b">onSubmit()</code>函数。</p><p id="1798" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">棘手的部分来了。我们正在绑定一个<code class="fe nd ne nf ng b">MainActivity.java</code>中的函数，数据绑定需要一个类来将其属性与XML绑定。所以这个功能是<code class="fe nd ne nf ng b">MainAcitivity.java</code>的一个属性。我们需要用XML绑定<code class="fe nd ne nf ng b">MainAcitivity.java</code>。</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="234b" class="nj mh iq ng b gy nz oa l ob oc">&lt;data&gt;<br/>    &lt;variable<br/>        name="callback"<br/>        type="com.codixlab.androiddatabinding.MainActivity" /&gt;<br/>&lt;/data&gt;</span></pre><p id="b882" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在<code class="fe nd ne nf ng b">MainActivity.java</code>中，你需要在你的<code class="fe nd ne nf ng b">oncreate()</code>中添加<code class="fe nd ne nf ng b">this</code>:</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="b542" class="nj mh iq ng b gy nz oa l ob oc">bi.setCallback(this);</span></pre><p id="273f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">您需要添加<code class="fe nd ne nf ng b">this</code>,因为我们引用的是当前上下文——也就是<code class="fe nd ne nf ng b">MainActivity.java</code>本身。</p><p id="61f8" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在使用回调将按钮与<code class="fe nd ne nf ng b">onsubmit()</code>绑定。</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="025d" class="nj mh iq ng b gy nz oa l ob oc">&lt;Button<br/>    android:id="@+id/button"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:layout_marginStart="8dp"<br/>    android:layout_marginTop="28dp"<br/>    android:layout_marginEnd="8dp"<br/>    android:onClick='@{() -&gt; callback.onSubmit()}'<br/>    android:text="Submit"<br/>    app:layout_constraintEnd_toEndOf="parent"<br/>    app:layout_constraintHorizontal_bias="0.0"<br/>    app:layout_constraintStart_toStartOf="parent"<br/>    app:layout_constraintTop_toBottomOf="@+id/editText" /&gt;</span></pre><p id="1edb" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">让我们运行应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/f7ef59352846f88e78be81100e1ef413.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/1*7BjmwtVMp6imiskLZvb9Vg.gif"/></div></figure><h2 id="1f48" class="nj mh iq bd mi nk nl dn mm nm nn dp mq kw no np ms la nq nr mu le ns nt mw nu bi translated">有一个内部阶层</h2><p id="8717" class="pw-post-body-paragraph kn ko iq kp b kq my jr ks kt mz ju kv kw na ky kz la nb lc ld le nc lg lh li ij bi translated">您只需要在活动中创建一个内部类来处理点击事件。它与上面的方法相同，只是有一些变化。</p><p id="e23d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我正在<code class="fe nd ne nf ng b">MainActivity.java</code>中创建一个内部类来处理点击事件。你可以在你的<code class="fe nd ne nf ng b">Activity</code>中为不同的操作定义不同的点击事件，但目前我只做一个函数。</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="dd22" class="nj mh iq ng b gy nz oa l ob oc">public class MainActivityOnClick {<br/>    public void Onclick() {<br/>        if (!bi.editText.getText().toString().isEmpty()) {<br/>            String text = bi.editText.getText().toString();<br/>            bi.textView.setText(text);<br/>        }<br/>    }<br/>}</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="115e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在是时候用XML绑定这个类了。过程和之前差不多。在前面的方法中，我们在XML中添加了我们的<code class="fe nd ne nf ng b">MainActivity.java</code>,但是现在我们将引用我们的内部类。</p><pre class="kg kh ki kj gt nv ng nw nx aw ny bi"><span id="e048" class="nj mh iq ng b gy nz oa l ob oc">&lt;data&gt;<br/><br/>    &lt;variable<br/>        name="callback"<br/>        type="com.codixlab.androiddatabinding.MainActivity.MainActivityOnClick" /&gt;<br/>&lt;/data&gt;</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="aa03" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在<code class="fe nd ne nf ng b">MainActivity.java</code>中，我们需要添加一个<code class="fe nd ne nf ng b">setCallback</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3387" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">下面是如何使用内部类来附加按钮的方法。</p><p id="422f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">让我们运行应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/9f91657cc9abcea55052f5966c343ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/1*-7EYYe09Pe_CK_gZYMI29w.gif"/></div><p class="oe of gj gh gi og oh bd b be z dk translated">使用内部类</p></figure><p id="6ab0" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在下一部分中，我们将看到如何为包含布局实现数据绑定技术。</p><h2 id="f2e0" class="nj mh iq bd mi nk nl dn mm nm nn dp mq kw no np ms la nq nr mu le ns nt mw nu bi translated">查看我最常阅读的文章:</h2><ul class=""><li id="f6b6" class="oi oj iq kp b kq my kt mz kw ok la ol le om li on oo op oq bi translated"><a class="ae lj" href="https://medium.com/swlh/whats-new-in-flutter-1-12-f53473cf5130?source=friends_link&amp;sk=f8292dcc478dcec79e45847732589aec" rel="noopener">flutter 1.12有什么新特性？</a></li><li id="3d50" class="oi oj iq kp b kq or kt os kw ot la ou le ov li on oo op oq bi translated"><a class="ae lj" href="https://medium.com/swlh/how-to-make-android-apps-with-python-10a33b9e5983?source=friends_link&amp;sk=a799a45fa45ec0988a86859a10dcca7a" rel="noopener">如何用Python制作安卓应用？</a></li><li id="4246" class="oi oj iq kp b kq or kt os kw ot la ou le ov li on oo op oq bi translated"><a class="ae lj" href="https://medium.com/better-programming/gmail-like-list-67bc51adc68a?source=friends_link&amp;sk=76ff9ad846d1dddcf2b7ec3aa4a9b0a6" rel="noopener">使用RecyclerView建立多选列表</a></li><li id="da27" class="oi oj iq kp b kq or kt os kw ot la ou le ov li on oo op oq bi translated"><a class="ae lj" href="https://medium.com/better-programming/recyclerview-search-326030d4bdf1?source=friends_link&amp;sk=c307661f8e883e4500a5c110bae6b8eb" rel="noopener">使用RecyclerView构建简单的搜索功能</a></li></ul></div></div>    
</body>
</html>