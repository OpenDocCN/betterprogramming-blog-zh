<html>
<head>
<title>How To Use Redux with React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Redux与React挂钩一起使用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-redux-with-react-hooks-5422a7ceae6e?source=collection_archive---------0-----------------------#2019-06-20">https://betterprogramming.pub/how-to-use-redux-with-react-hooks-5422a7ceae6e?source=collection_archive---------0-----------------------#2019-06-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="11a3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">写更少的代码，但是更好的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/addcc7961c37037b6aa5140dba5f16f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wnP4g1GY1MgXU150sw3QXw.png"/></div></div></figure><p id="0268" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">React Redux发布了7.1.0版本的钩子。这意味着我们可以使用React的最新最佳实践。</p><p id="aaf2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">钩子让我们为同样的功能编写更少的代码。我们需要编写的代码越少，我们就能越快地让我们的应用程序开始运行。</p><p id="11fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你不确定钩子，看看我之前写的这个可爱的教程。我保证你会更好地理解胡克。</p><div class="lr ls gp gr lt lu"><a href="https://codeburst.io/demystifying-react-hooks-a0b56a6254c2" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">揭秘React挂钩</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">你可能听说过React的新概念，叫做钩子。钩子在React版本16.8中发布，它们让…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">codeburst.io</p></div></div><div class="md l"><div class="me l mf mg mh md mi ks lu"/></div></div></a></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="26c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://trevorlasn.medium.com/membership" rel="noopener">成为媒介会员直接支持我的工作</a>。你也可以在媒体上看到所有的故事。提前感谢！</p><h1 id="dc2c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">简单冗余组件</h1><p id="74d9" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">这里有一个非常基本和传统的Redux连接组件。你如何使用钩子来重构它？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="af97" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面是一个切换复选框的简单组件。为了简单起见，我们只有一个状态，即<code class="fe np nq nr ns b">toggle</code>，这是一个布尔值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/da41c9eeb4a5a22237c130e214c214b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/1*jx9Rye2lsFQMyTVfJxiT5g.gif"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">用Redux切换复选框</p></figure><p id="6f0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你对钩子略知一二，你可能知道钩子需要一个功能组件。React类不能使用钩子。</p><h2 id="3b0b" class="ny mr it bd ms nz oa dn mw ob oc dp na ld od oe nc lh of og ne ll oh oi ng oj bi translated">步骤1:将我们的类组件重构为功能组件</h2><p id="fa08" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">将我们的React组件从类转移到函数是相当简单的。我们需要做的是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="1263" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意这个已经短了多少。我们将类语法替换为更简单的函数语法。我们还从箭头函数参数中解构了<code class="fe np nq nr ns b">ui</code>和<code class="fe np nq nr ns b">toggleSwitch</code>道具。</p><p id="8dec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果这对你来说是新的，我之前也写过关于这个的文章。</p><div class="lr ls gp gr lt lu"><a href="https://medium.com/@wesharehoodies/use-these-javascript-features-to-make-your-code-more-readable-ec3930827226" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">如何使用析构和箭头函数来改进您的JavaScript代码</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">事不宜迟，这里有一些日常“窍门”可以让您的Javascript代码更具可读性。</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="ok l mf mg mh md mi ks lu"/></div></div></a></div><p id="0128" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了确保安全，开关仍然可以正常工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/da41c9eeb4a5a22237c130e214c214b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/1*jx9Rye2lsFQMyTVfJxiT5g.gif"/></div></div></figure><p id="a3d2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">钩子通常会预先固定一个关键字<code class="fe np nq nr ns b">use</code>，比如<code class="fe np nq nr ns b">useState</code>或者<code class="fe np nq nr ns b">useSelector</code>。</p><p id="9f3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们目前从存储中读取状态的方式是通过<code class="fe np nq nr ns b">mapStateToProps</code>并将我们的功能组件包装在<code class="fe np nq nr ns b">connect</code> HOC中。</p><h2 id="1001" class="ny mr it bd ms nz oa dn mw ob oc dp na ld od oe nc lh of og ne ll oh oi ng oj bi translated">第二步:使用选择器</h2><p id="55a8" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">让我们从用钩子读取状态开始。我们需要从<code class="fe np nq nr ns b">react-redux</code>包中导入<code class="fe np nq nr ns b">useSelector</code>。使用<code class="fe np nq nr ns b">useSelector</code>钩子，我们可以读取我们的状态。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3258" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意我们移除了<code class="fe np nq nr ns b">ui</code>参数，而使用了<code class="fe np nq nr ns b">useSelector</code>钩子。<code class="fe np nq nr ns b">useSelector</code>的第一个论点是商店的状态。</p><p id="a0b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是我们的Toggle组件现在的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="1b41" class="ny mr it bd ms nz oa dn mw ob oc dp na ld od oe nc lh of og ne ll oh oi ng oj bi translated">第三步:<code class="fe np nq nr ns b">useDispatch</code></h2><p id="b931" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated"><code class="fe np nq nr ns b">useDispatch</code> hook让我们开始重复动作。让我们导入<code class="fe np nq nr ns b">useDispatch</code>挂钩。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="9586" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe np nq nr ns b">useDispatch</code>相对简单——我们将钩子实例保存在一个变量下。我们可以在任何事件侦听器上调用调度函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="a94b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意这一行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="d611" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在这里做的是用类型常量<code class="fe np nq nr ns b">TOGGLE</code>调用我们的调度函数。</p><p id="053f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在Redux常量中定义了这个类型，并将其导入到组件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6a08" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想把一个有效载荷传递给调度程序，就像我们一直做的那样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="69d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的组件现在应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="e221" class="ny mr it bd ms nz oa dn mw ob oc dp na ld od oe nc lh of og ne ll oh oi ng oj bi translated">恭喜你！您使用钩子成功地从类重构到了</h2><p id="6eea" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">为了确保一切正常，让我们再测试一次开关。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/414f7cc11e26e8134b0c10280cb44d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/1*OUufJh8IbwKD35tTrfkqoA.gif"/></div></figure><p id="9ec6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">是的，像预期的那样工作。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9528" class="mq mr it bd ms mt om mv mw mx on mz na jz oo ka nc kc op kd ne kf oq kg ng nh bi translated">在这里使用源代码</h1><div class="lr ls gp gr lt lu"><a href="https://codesandbox.io/s/react-redux-hook-by-indrek-lasn-utc6h" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">Indrek Lasn的React Redux挂钩- CodeSandbox</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">为web应用程序定制的在线代码编辑器</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">codesandbox.io</p></div></div><div class="md l"><div class="or l mf mg mh md mi ks lu"/></div></div></a></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8d6b" class="mq mr it bd ms mt om mv mw mx on mz na jz oo ka nc kc op kd ne kf oq kg ng nh bi translated">从这里去哪里？</h1><p id="fbd4" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">既然您已经理解了钩子的基本知识，并在redux中使用钩子，我建议您通读文档，以便更深入地理解这些概念。</p><div class="lr ls gp gr lt lu"><a href="https://react-redux.js.org/api/hooks" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">钩子反应Redux</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">React的新“钩子”API给功能组件提供了使用本地组件状态、执行副作用和…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">react-redux.js.org</p></div></div><div class="md l"><div class="os l mf mg mh md mi ks lu"/></div></div></a></div><p id="1b2a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另外，我建议通读“<a class="ae lq" href="https://amzn.to/2T07zrK" rel="noopener ugc nofollow" target="_blank">Functional React:quick start with React Hooks，Redux和MobX </a>”一书，深入了解Redux、React和MobX。</p><p id="42b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是我以前的一些文章，你可能会喜欢:</p><div class="lr ls gp gr lt lu"><a href="https://medium.com/@wesharehoodies/how-to-fetch-data-from-an-api-with-react-hooks-9e7202b8afcd" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">如何用React钩子从API获取数据</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">React钩子让我们不用使用类语法就可以编写纯函数组件。通常，但不总是…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="ot l mf mg mh md mi ks lu"/></div></div></a></div><div class="lr ls gp gr lt lu"><a href="https://medium.com/free-code-camp/the-secret-to-being-a-top-developer-is-building-things-heres-a-list-of-fun-apps-to-build-aac61ac0736c" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">成为顶级开发人员的秘诀是构建东西！这里有一个有趣的应用程序列表！</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">只有付出努力，你才能成为伟大的开发者。想象一下——你不可能身体健康…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="ou l mf mg mh md mi ks lu"/></div></div></a></div><div class="lr ls gp gr lt lu"><a href="https://medium.com/@wesharehoodies/5-react-performance-tips-f6e65295fba5" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">这些技巧将提升React代码的性能</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">React之所以受欢迎，是因为React应用程序伸缩性好，而且使用起来很有趣。一旦您的应用扩展，您可能会…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="ov l mf mg mh md mi ks lu"/></div></div></a></div><div class="lr ls gp gr lt lu"><a href="https://medium.com/@wesharehoodies/how-to-setup-continuous-integration-ci-with-react-circleci-and-github-e0efd5040b03" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">如何使用React、CircleCI和GitHub设置持续集成(CI)</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">为了确保最高等级的代码质量，我们需要对每个提交/拉取请求进行多次检查。运行代码…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="ow l mf mg mh md mi ks lu"/></div></div></a></div><div class="lr ls gp gr lt lu"><a href="https://medium.com/@wesharehoodies/here-are-some-of-the-best-resources-to-improve-your-coding-skills-d97aa0e48fdd" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">这里有一些提高编码技能的最佳资源</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">网上有许多高质量的编码教程、书籍和全部资源。我已经收集了最好的…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="ox l mf mg mh md mi ks lu"/></div></div></a></div><div class="lr ls gp gr lt lu"><a href="https://medium.com/@wesharehoodies/how-to-setup-a-powerful-api-with-graphql-koa-and-mongodb-339cfae832a1" rel="noopener follow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">如何用GraphQL、Koa和MongoDB建立一个强大的API</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">构建一个API超级好玩！尤其是当您可以利用Koa、GraphQL和MongoDB等现代技术时。</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">medium.com</p></div></div><div class="md l"><div class="oy l mf mg mh md mi ks lu"/></div></div></a></div></div></div>    
</body>
</html>