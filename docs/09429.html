<html>
<head>
<title>The Many Faces of “If” and How Programmers Misuse It</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“如果”的多面性以及程序员如何误用它</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-many-faces-of-if-and-how-programmers-misuse-it-1d51842db7a7?source=collection_archive---------6-----------------------#2021-08-24">https://betterprogramming.pub/the-many-faces-of-if-and-how-programmers-misuse-it-1d51842db7a7?source=collection_archive---------6-----------------------#2021-08-24</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="083c" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">正确使用条件语句的8种方法</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/f7d041fb7282e9f11d7b47e77a698151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sg6t9tXyzqhg9wsYMnjXwg.jpeg"/></div></div></figure><p id="5722" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如果没有条件语句，编程会是什么样子？这可能是所有编程中最常用的逻辑检查点之一，如果没有它，我们将会迷失方向。不幸的是，尽管将这个决策点添加到您的代码中很简单，但它并不能避免误用。在我20年的程序员生涯中，我见过其他程序员犯的一些有趣的错误。排名不分先后，以下是八个基于现实生活中带有“如果”的问题的例子，以及这些问题发生的可能原因。</p><h1 id="9e30" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">1)布尔运算上的If/Else</h1><p id="cb7c" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">if语句的基本原理是当一个条件的值为真时，进入一个逻辑块。一个补充特性是布尔数据类型，它用于指示真或假。他们经常一起使用，但在这个例子中，他们不应该在一起。if/else逻辑不是必需的，布尔值本身就足够了。这里有一个例子:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="41b3" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated"><strong class="ak">出现这种情况的可能原因:</strong></h2><ul class=""><li id="fd0b" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">真或假场景中可能有附加逻辑，但后来被删除了。剩余的代码没有更新以反映这一变化。</li><li id="4750" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">他们没有注意。在编码时，分区并不罕见。</li><li id="88f0" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">从逻辑上讲，代码是有意义的。仅此一点就足以让一个程序员继续前进，而不用把它变得更好。</li></ul><h1 id="bbf7" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">2)重复的if</h1><p id="170c" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">在if语句中反复使用相同的条件应该会在你的脑海中引发一些问题。人们希望如此。这个例子是在使用*ngIf的角度模板的上下文中，这是它们的内联If语句版本。使用它们时也适用同样的规则，就像编码中的大多数事情一样，应该避免重复的逻辑。下面是一些糟糕代码的例子:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="cf51" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated">发生这种情况的可能原因:</h2><ul class=""><li id="934a" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">没有意识到一个<a class="ae nq" href="https://angular.io/api/core/ng-container" rel="noopener ugc nofollow" target="_blank"> ng容器</a>可以和一个*ngIf一起使用。</li><li id="d87a" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">对他们来说，单独考虑每个if块可能更容易。</li><li id="bfed" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">他们忘记了<a class="ae nq" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank">干</a>(不要重复自己)的编码原则。</li></ul><h1 id="95e7" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">3)冗长的如果，甚至还有速记</h1><p id="c85f" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">这些天我最喜欢的快捷方式是<a class="ae nq" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">无效合并操作符</a>？？。在ES2020中引入or运算符之前，我使用了OR运算符||，但是它的错误行为并不总是适用。下面是当options对象为空时初始化它的三个例子。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="9c7f" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated"><strong class="ak">出现这种情况的可能原因:</strong></h2><ul class=""><li id="f87a" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">有人爱用<a class="ae nq" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener ugc nofollow" target="_blank">三元运算符</a>。我尽可能经常使用它，但是对于这个场景有更好的选择。</li><li id="95a5" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">尽管OR操作符技术已经存在很多年了，但并不是每个人都乐于使用它。如果你不小心，它的虚假行为可能会出乎意料。</li><li id="08d9" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">不是每个人都知道零化合并运算符。它是在2020年推出的，所以它还是相当新的。</li></ul><h1 id="b98a" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">4)反向If/Else逻辑</h1><p id="78a6" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">有时候当你编码时，你的思维方式并不总是与你应该如何编码同步。这可能会导致一些逆向逻辑，即在处理更具体的情况之前先处理一般情况。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="1f0a" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated">发生这种情况的可能原因:</h2><ul class=""><li id="cf89" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">第一种情况很好，但是他们可能忘记了这是if/else行为的反模式。else情况应该是catch-the-rest选项，而不是相反。</li><li id="4cdb" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">这可能是他们的思维发展，但从程序上来说，有一种正确的做事方式。</li><li id="c44d" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">有些人喜欢先考虑“不平等”的情况。这可能是偏好的问题。</li></ul><h1 id="ede6" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">5)对于字符串形式的布尔值，不需要If/Else</h1><p id="9b38" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">有时候，在处理REST服务时，您可能会遇到用字符串表示的布尔值。反过来，对服务进行更新可能需要以同样的方式发送回来。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="3277" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated">发生这种情况的可能原因:</h2><ul class=""><li id="558e" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">第一种方式在视觉上更显而易见，可能更适合用来查看布尔值的字符串表示。</li><li id="aa68" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">没有意识到<a class="ae nq" href="https://www.tutorialsteacher.com/javascript/javascript-boolean" rel="noopener ugc nofollow" target="_blank"> toString </a>方法是布尔比较的可行选项。</li><li id="2506" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">同样，有些人真的很喜欢三元运算符，它被认为是简写。在这种情况下，有一个更短更好的方法。</li></ul><h1 id="74c0" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">6)长If/Else块</h1><p id="8532" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">编码中的一个常见场景是在一行中有多个条件语句。当条件不容易关联时，这很好，但是当事情开始看起来重复时，他们应该考虑使用<a class="ae nq" href="https://www.w3schools.com/js/js_switch.asp" rel="noopener ugc nofollow" target="_blank">开关语句</a>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="50c3" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated">发生这种情况的可能原因:</h2><ul class=""><li id="7dd1" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">不是每个人都喜欢switch语句。与链接if语句相比，构建它需要更多的设置。此外，需要通过添加中断语句或返回来考虑失败行为。</li><li id="77be" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">一些if块可能已经存在，添加更多的if块更容易。他们不想麻烦地转换成switch语句。</li><li id="5405" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">如果需要将其他标准添加到if条件中，第一种方法在技术上更灵活。也许他们期待着以后添加更多。</li></ul><h1 id="7d4f" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">7)嵌套if</h1><p id="7443" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">有时候，您希望在执行特定操作之前通过多个if条件。这是嵌套if可能出现的地方，但是它可能很快变得很难看。逻辑&amp;&amp;和||有助于补救过度嵌套。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="c37b" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated">发生这种情况的可能原因:</h2><ul class=""><li id="cbfb" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">他们可能不喜欢使用逻辑运算符。这将是令人惊讶的，因为他们是计算机科学的核心，但不是每个人都有计算机科学背景。</li><li id="9d42" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">这两个场景的行为是相同的，它们的阅读方式也几乎相同。然而，第二个选项更简洁，需要的代码更少。</li><li id="1409" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">有时，当if条件中有多个逻辑运算符和换行时，会变得难以阅读。第一种方式可能是自然避免这种情况。</li></ul><h1 id="ce18" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">8)布尔比较不需要If/Else</h1><p id="d126" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">当你知道你需要返回一个布尔值，而你的函数中的主要比较结果是一个布尔值，你认为会发生什么？你可能认为这是显而易见的，但是我已经看到了这个错误的发生。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><h2 id="7f65" class="mq ls iu bd lt mr ms dn lx mt mu dp mb le mv mw md li mx my mf lm mz na mh nb bi translated">发生这种情况的可能原因:</h2><ul class=""><li id="cc44" class="nc nd iu kx b ky mj lb mk le ne li nf lm ng lq nh ni nj nk bi translated">三元运算符很棒，但你知道什么更好吗？根本不用它。也许他们真的想使用三元运算符。</li><li id="77ae" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">这可能是一个复制/粘贴错误，由于存在一个三元运算符，他们认为需要将值放入其中。</li><li id="9a12" class="nc nd iu kx b ky nl lb nm le nn li no lm np lq nh ni nj nk bi translated">老实说，为这个错误想出一个好的借口太难了。</li></ul><h1 id="dde4" class="lr ls iu bd lt lu lv lw lx ly lz ma mb ka mc kb md kd me ke mf kg mg kh mh mi bi translated">结论</h1><p id="4a29" class="pw-post-body-paragraph kv kw iu kx b ky mj jv la lb mk jy ld le ml lg lh li mm lk ll lm mn lo lp lq in bi translated">尽管条件if语句非常有用，但程序员偶尔会以奇怪或非最佳的方式使用它。有些人可能会争辩说，现在计算机速度如此之快，以至于几行额外的代码不会使它们同步。我不认为这是最好的心态。关于努力使代码尽可能高效，有一些东西要说。一般来说，这是一个好的程序员习惯。</p><p id="1704" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">感谢阅读，善待那些if语句！</p></div></div>    
</body>
</html>