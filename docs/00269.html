<html>
<head>
<title>Deploying an Angular App to AWS S3 With CloudFront Serving HTTPS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Angular应用部署到S3自动气象站，CloudFront为HTTPS提供服务</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/deploying-an-angular-7-application-to-aws-s3-cloudfront-serving-https-requests-f59a806c57b2?source=collection_archive---------1-----------------------#2019-01-14">https://betterprogramming.pub/deploying-an-angular-7-application-to-aws-s3-cloudfront-serving-https-requests-f59a806c57b2?source=collection_archive---------1-----------------------#2019-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7253" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">您将Angular应用安全部署到S3和CloudFront的一站式解决方案</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/72703231efd61cd5a3dc626ce989d2bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M42d1I-uAz-qSFVoz-_59Q.png"/></div></div></figure><p id="987a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我的任务是为服务于HTTPS的<a class="ae ln" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank"> AWS S3 </a>部署一个新的前端应用。令我惊讶的是，我没有一篇完整的博客可以参考，来使用<a class="ae ln" href="https://aws.amazon.com/cloudfront/" rel="noopener ugc nofollow" target="_blank"> CloudFront </a>成功地将我的应用程序部署到S3和HTTPS。</p><p id="e998" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我不得不参考几个不同的来源来完成这项任务。因此，我想分享我在使用CloudFront为HTTPS请求部署完整的前端应用程序到S3的知识和经验。</p><p id="4f8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我假设你已经有了你的AWS账户，一个HTTPS的SSL证书，和一个在<a class="ae ln" href="https://aws.amazon.com/route53/" rel="noopener ugc nofollow" target="_blank"> Route53 </a>的域名。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="09f8" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">创建S3存储桶</h1><ul class=""><li id="b8ad" class="mn mo iq kt b ku mp kx mq la mr le ms li mt lm mu mv mw mx bi translated">登录AWS，进入<em class="my">S3&gt;T32】创建桶</em>。提供一个存储桶名称，它应该是唯一的。将<em class="my"> false </em>设置为所有权限，因为您将在以后更改它们，只需继续单击下一个的<em class="my">，您将创建一个新的bucket。</em></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/cb5ea5c55e5d612e35dfddecd678ff07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o1t_CY04q_6FeUMcoXmRdA.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">取消选中所有复选框</p></figure><ul class=""><li id="6248" class="mn mo iq kt b ku kv kx ky la ne le nf li ng lm mu mv mw mx bi translated">单击已创建的bucket，您将看到该bucket的详细信息。转到<em class="my">属性</em>选项卡，然后转到<em class="my">静态网站托管</em>并设置<em class="my">使用此桶托管网站</em>并提供您的入口点文件。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/d76610991e5ae15c75ed57840ecc83a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bMvoUPzZPNG0qZKhbkK_Q.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">提供索引文档。这个例子中的index.html。</p></figure><ul class=""><li id="6bac" class="mn mo iq kt b ku kv kx ky la ne le nf li ng lm mu mv mw mx bi translated">转到<em class="my">权限&gt; &gt;存储桶策略</em>，使用策略生成器更新权限，策略生成器将生成以下JSON和<em class="my">保存</em>。这应该可以让公众访问您的存储桶。</li></ul><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="f26d" class="nn lw iq nj b gy no np l nq nr">{<br/>    "Version": "2012-10-17",<br/>    "Statement": [<br/>        {<br/>            "Sid": "Allow Public Access to All Objects",<br/>            "Effect": "Allow",<br/>            "Principal": "*",<br/>            "Action": "s3:GetObject",<br/>            "Resource": "YOUR_BUCKET_ARN/*"<br/>        }<br/>    ]<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/d0435c577d6ca40c5ad167a66fff5b61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKjCvZ5ua4WsTJdunOHT-w.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">这使得公众可以访问您的存储桶。</p></figure><ul class=""><li id="f863" class="mn mo iq kt b ku kv kx ky la ne le nf li ng lm mu mv mw mx bi translated">将您的构建文件上传到S3，并提供给公众访问。</li></ul><p id="c123" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以从<em class="my">静态网站托管</em>中提供的端点访问您的网站。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="4736" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">为Bucket创建CloudFront发行版</h1><ol class=""><li id="a32a" class="mn mo iq kt b ku mp kx mq la mr le ms li mt lm nt mv mw mx bi translated">导航到<em class="my"> CloudFront &gt; &gt;创建发行版&gt; &gt;开始使用Web </em>。从列表中选择源域main。它应该填充所有必需的字段，您需要对默认值进行一些更改。</li><li id="4f2f" class="mn mo iq kt b ku nu kx nv la nw le nx li ny lm nt mv mw mx bi translated">将查看协议策略更改为<em class="my">将HTTP重定向到HTTPS </em>。</li><li id="95a9" class="mn mo iq kt b ku nu kx nv la nw le nx li ny lm nt mv mw mx bi translated">提供备用域名(CNAME):<a class="ae ln" href="http://www.yourwebsite.com" rel="noopener ugc nofollow" target="_blank">www.yourwebsite.com</a></li><li id="4eb6" class="mn mo iq kt b ku nu kx nv la nw le nx li ny lm nt mv mw mx bi translated">选择SSL证书或向AWS申请一个证书。</li><li id="5793" class="mn mo iq kt b ku nu kx nv la nw le nx li ny lm nt mv mw mx bi translated">提供默认的根对象:它应该是你访问网站时返回的文件，大多数情况下是<code class="fe nz oa ob nj b">index.html</code>。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/918379e30e7e90d38cd3b90766840bbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vuyW9zzzdVB-ZWPfaSAT5g.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">在突出显示的区域所做的更改。</p></figure><p id="043c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">保存并拿起一杯咖啡，它需要大约15分钟来部署发行版。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="ff56" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">为端点的别名设置Route53</h1><ol class=""><li id="edb1" class="mn mo iq kt b ku mp kx mq la mr le ms li mt lm nt mv mw mx bi translated">创建记录集:提供您想要访问网站的地址。例如:abc.com。与CNAME的云锋分布相同。</li><li id="f9fd" class="mn mo iq kt b ku nu kx nv la nw le nx li ny lm nt mv mw mx bi translated">将<em class="my">别名</em>设置为<em class="my">是</em>，选择<em class="my">云锋分发</em>下创建的分发。应该部署它。</li><li id="d770" class="mn mo iq kt b ku nu kx nv la nw le nx li ny lm nt mv mw mx bi translated">创建记录集。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/b31e09806c91c611ad2102ed921d36f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*Rpg0SlrYTYgFGnXb4M-3CQ.png"/></div><p class="na nb gj gh gi nc nd bd b be z dk translated">在别名下拉列表中的CloudFront Distribution下选择您的发行版</p></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="d763" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">结论</h1><p id="46d1" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la oe lc ld le of lg lh li og lk ll lm ij bi translated">几分钟后，您就可以访问HTTPS提供的应用程序或网站。</p><p id="3e25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可能会遇到拒绝访问错误，此时您会得到以下错误:“此XML文件似乎没有任何与之相关联的样式信息”。</p><p id="6ff9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是因为CloudFront设置中没有默认的根对象。如果你需要任何帮助，你可以在下面评论，我会回复你的。</p></div></div>    
</body>
</html>