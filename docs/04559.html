<html>
<head>
<title>How to Make a Fake Chat Bot With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React制作一个假的聊天机器人</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-a-fake-chat-bot-with-react-a0ab7f3fee7b?source=collection_archive---------8-----------------------#2020-04-21">https://betterprogramming.pub/how-to-make-a-fake-chat-bot-with-react-a0ab7f3fee7b?source=collection_archive---------8-----------------------#2020-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3f58" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">数据、设计和组件渲染的简单演练</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d834addb9085bf8b9cac09fc751f7a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2uTr2gHB0ZJSUU0J"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·科尔派在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="a32f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">制作我的个人网站，我想要比纯文本更个性化的东西。我决定拼凑一个聊天机器人，来谈谈我在自己的网站上链接过的各种项目(Figma、Medium、Github、Instagram等。).</p><p id="4e7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在下面的<a class="ae ky" href="https://zaavin.com/" rel="noopener ugc nofollow" target="_blank">我的网站</a>或<a class="ae ky" href="https://react-chatapp-nivaaz.netlify.app/" rel="noopener ugc nofollow" target="_blank">演示链接中查看我是如何使用该应用的！</a></p><h2 id="ae66" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">资源</h2><ul class=""><li id="f12c" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated"><a class="ae ky" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank">创建-反应-应用</a>:如何创建反应应用</li><li id="ed3f" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="https://react-chatapp-nivaaz.netlify.app/" rel="noopener ugc nofollow" target="_blank">网站现场演示</a></li><li id="ebd1" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="https://github.com/nivaaz/chatBot/tree/master/chatbot" rel="noopener ugc nofollow" target="_blank">聊天应用的Github repo</a></li><li id="1447" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="https://zaavin.com/" rel="noopener ugc nofollow" target="_blank">我如何在我的网站上使用它</a></li><li id="8a8a" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">Netlify : <a class="ae ky" href="https://www.netlify.com/" rel="noopener ugc nofollow" target="_blank">我部署应用的地方</a></li></ul><p id="0177" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将按照以下几个阶段讲述我是如何在几个小时内组装聊天机器人的:</p><ul class=""><li id="a252" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated">设计</li><li id="de22" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">用户流量</li><li id="5992" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">数据结构</li><li id="1030" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">反应渲染</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/ae13c473f55778afe217bc6acdccf374.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PDRvrtu0hUK3CvM-WyxfYA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序的概要</p></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="12eb" class="np lw it bd lx nq nr ns ma nt nu nv md jz nw ka mg kc nx kd mj kf ny kg mm nz bi translated">设计</h1><p id="2309" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">我们从设计开始，因为我们大多数人都熟悉某种形式的聊天。</p><h2 id="59f8" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">概述流程</h2><p id="0eec" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">有两个人在交谈——你和你与之交谈的人。所以一个典型的设计大概是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/f96fdb17a023eb00f44568f6f9933ead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*jTMasLYyppYR1o2c8oioww.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Nivaaz的聊天应用概述</p></figure><h2 id="cd00" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">让我们添加色彩。</h2><p id="93a8" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">大多数聊天应用都坚持一种颜色。</p><p id="bbe6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了确保我们有良好的用户设计，我们需要以下内容:</p><ul class=""><li id="436d" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated">一种主色</li><li id="3196" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">其余保持单色(黑色、白色或灰色)。</li><li id="99df" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">颜色和所选文本的颜色之间应该有很高的对比度。这使得文本易于阅读。</li><li id="9464" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">保持简单——谈话的内容比外表更重要！</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/5b4cdd049783289e86889ba952dae125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*Yz3SH0jFcRZZ1jIolELSjw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Nivaaz的彩色聊天应用程序概述</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/2dd083056279dc2d077e61142666a180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*w3y9XFMkxF2INGOC9Tfsjg.png"/></div></figure><h2 id="4f6a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">添加样式</h2><ul class=""><li id="3298" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated"><code class="fe og oh oi oj b">Bubble</code></li></ul><p id="9e70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于响应、问题和自定义响应，这将是相同的代码。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="83ff" class="lv lw it oj b gy oo op l oq or">border: none; to override the button default border.</span><span id="11d5" class="lv lw it oj b gy os op l oq or">border-radius: 2em. To give it round edges.</span><span id="dae4" class="lv lw it oj b gy os op l oq or">padding: 1em. To make it bubble-like.</span><span id="5b10" class="lv lw it oj b gy os op l oq or">max-width: fit-content. This makes the bubble to fit the text.</span><span id="0ee5" class="lv lw it oj b gy os op l oq or">margin: none; We’ll add margin from the parent container.</span><span id="dc20" class="lv lw it oj b gy os op l oq or">box-shadow: 0px 2px 10px rgba(162, 155, 254, 0.25); to add a glow around the bubble.</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/27b2000f1b9b874ef951fdc1327fb74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*f9P6NRdHfHIPhwsOQJze0g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">气泡式/问题气泡</p></figure><ul class=""><li id="69b8" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">questionBubble</code></li></ul><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="ba35" class="lv lw it oj b gy oo op l oq or">background: WhiteSmoke; // this is purple</span><span id="03fa" class="lv lw it oj b gy os op l oq or">color: #a29bfe;</span></pre><ul class=""><li id="4bbf" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">responseBubble</code> <strong class="lb iu"> ( </strong> <code class="fe og oh oi oj b">.s.bubble</code> <strong class="lb iu"> ) </strong></li></ul><p id="81ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当这些被渲染时，它们将属于<code class="fe og oh oi oj b">s bubble</code>类</p><p id="381e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们想让颜色与<code class="fe og oh oi oj b">questionBubble</code>相反。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="58d7" class="lv lw it oj b gy oo op l oq or">background: #a29bfe;</span><span id="37ff" class="lv lw it oj b gy os op l oq or">color: white;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/ec9021ce0553ba216a7b9fc83a93bd48.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*beuiYv_32rhuGwbb2CbPOw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">响应气泡样式</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/3593037b4ed098a30404db829955582c.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*QtFeuqKQaNtZCPYU6TCYZQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选定气泡和正常气泡</p></figure><p id="fbe5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所选气泡将添加类别<code class="fe og oh oi oj b">selected</code>。这个班级将会是<code class="fe og oh oi oj b">selected s bubble</code>。</p><p id="2c65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所选气泡的背景较暗。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="daa3" class="lv lw it oj b gy oo op l oq or">background-color: #6c5ce7;</span></pre><p id="5b77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当按钮悬停在上方时，它们会有一个框形阴影。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="94bf" class="lv lw it oj b gy oo op l oq or">box-shadow: 0px 0px 15px 0px #6c5ce7b0;</span></pre><ul class=""><li id="f827" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">Custom Response Bubble</code></li></ul><p id="87aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将与问题气泡样式相同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/91c92bde98e6b4bb93ef59e0dd1fea2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4x14326DMlhDL0LHgKwJGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自定义响应气泡</p></figure><ul class=""><li id="d627" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">questionContainer</code></li></ul><p id="2851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将使文本向容器的左边对齐，并且容器应该跨越父容器的整个宽度。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="1b68" class="lv lw it oj b gy oo op l oq or">text-align: -webkit-left;</span></pre><ul class=""><li id="1fbe" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">responseContainer</code></li></ul><p id="9e87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将使文本向容器的右边对齐，并且容器应该跨越父容器的整个宽度。</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="38ba" class="lv lw it oj b gy oo op l oq or">text-align: -webkit-right;</span></pre><ul class=""><li id="bed4" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">chatContainer</code></li></ul><p id="bfab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据可能继承到这个div中的任何样式，您可能希望在这里更改样式。我没有任何有趣的东西，所以我没有在这里添加任何样式。</p><p id="6b82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是您可能希望将宽度设置为80vw，并确保高度随内容动态变化！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/11b8b9e1c9e7bce4797b923ff2f66c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*mbUvS9-WPJ-UuHBwz2kJmA.png"/></div></figure><p id="d95e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有的风格都可以在这里看到:</p><p id="f30b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Nivaaz聊天机器人的风格</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="8235" class="np lw it bd lx nq nr ns ma nt nu nv md jz nw ka mg kc nx kd mj kf ny kg mm nz bi translated">用户流量</h1><p id="dfce" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">简单来说:</p><ul class=""><li id="e6e9" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated">我们问第一个问题。</li><li id="82ec" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">用户单击我们之前设置的一个响应。</li><li id="1847" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">我们用一个定制的响应来回复用户的选择。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/573bf24cbbbdcc7f781652b68b3732b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*ihnDK8LTS7WYo2QKE7536Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图示视图中的步骤— Nivaaz</p></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="c035" class="np lw it bd lx nq nr ns ma nt nu nv md jz nw ka mg kc nx kd mj kf ny kg mm nz bi translated">数据</h1><p id="44ef" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">我使用了一个JSON文件，但是您可以很容易地使用一个实际的数据库或后端来保存这些数据，并使用一个更复杂的算法。理想的情况是，我将来会从事这项工作。</p><p id="107f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的JSON文件有如下结构，并放在我的“数据”文件夹中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/1541c314a4691067b370848c036e3a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*asuvJ4SZ7TGHNvD_XIV8kw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Nivaaz概述数据结构</p></figure><h2 id="c655" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结构</h2><p id="e0f8" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">每个问题和回答的条目数组。每个数组条目都有:</p><ul class=""><li id="7216" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated">问题字符串。</li><li id="f1c3" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">字符串的响应数组。</li><li id="6a93" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><code class="fe og oh oi oj b">customResponse</code>弦。</li></ul><p id="12ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，因为我使用了字体很棒的图标，所以我还添加了图标名称和图标的相关链接。</p><p id="7934" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我在JSON文件中的两个回答:</p><p id="3d76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">会话数据的JSON文件。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="d5e6" class="np lw it bd lx nq nr ns ma nt nu nv md jz nw ka mg kc nx kd mj kf ny kg mm nz bi translated">密码</h1><p id="b652" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">这些是我们将要制造的组件:</p><ul class=""><li id="02e9" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated">Convo(父组件)。</li><li id="f003" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">问题(呈现问题)。</li><li id="c7a3" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">响应(呈现响应按钮)。</li><li id="eed0" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">自定义响应(呈现与按下的响应按钮相关的客户回复)。</li></ul><p id="879f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将使用<a class="ae ky" href="https://create-react-app.dev/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>来启动一个新的react应用。接下来，我将添加一个组件文件夹，每个组件的文件夹，以及一个JavaScript和CSS文件。确保为每个组件导入React:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="df79" class="lv lw it oj b gy oo op l oq or"><em class="pa">import</em> React <em class="pa">from</em> "react"</span></pre><p id="9758" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个JavaScript文件看起来都很相似。这里有一个<code class="fe og oh oi oj b">customResponse</code>组件的例子:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="201a" class="lv lw it oj b gy oo op l oq or">export const CustomResponse = (props) =&gt; {</span><span id="ab75" class="lv lw it oj b gy os op l oq or">return (&lt;p&gt; {props.customResponse} &lt;/p&gt;)<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/d9af7dbb2b224163cd911a2589e3e3cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*solNrS3tlyJoHqlN4pbgSw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序中的组件由Nivaaz制造</p></figure><h2 id="f32b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">会话</h2><p id="4ec5" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">Convo是父组件，它将映射数据并呈现组件<code class="fe og oh oi oj b">Question</code>、<code class="fe og oh oi oj b">Response</code>和<code class="fe og oh oi oj b">CustomResponse</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/fbb73ff4484b1f9c7c319f274b78130f.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*xkBFSuCuPUHXPqvoLM_UKw.png"/></div></figure><h2 id="74b9" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">进口</h2><p id="9cf9" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">首先，使用下面的代码从存储数据的地方导入JSON文件:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="95be" class="lv lw it oj b gy oo op l oq or"><em class="pa">import</em> convo <em class="pa">from</em> "../data/convo.json";</span><span id="978e" class="lv lw it oj b gy os op l oq or"><em class="pa">import</em> React <em class="pa">from</em> "react"</span><span id="4033" class="lv lw it oj b gy os op l oq or"><em class="pa">import</em> { Question } <em class="pa">from</em> "../Question/Question";</span><span id="46ec" class="lv lw it oj b gy os op l oq or"><em class="pa">import</em> { Response } <em class="pa">from</em> "../Response/Response";</span><span id="130f" class="lv lw it oj b gy os op l oq or"><em class="pa">import</em> { CustomResponse } <em class="pa">from</em> "../CustomResponse/CustomResponse";</span><span id="8c0d" class="lv lw it oj b gy os op l oq or"><em class="pa">import</em> convo <em class="pa">from</em> '../../data/convo.json';</span><span id="fec1" class="lv lw it oj b gy os op l oq or"><em class="pa">import</em> "./convo.css";</span></pre><p id="bc8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们要导入其他组件和CSS文件。</p><h2 id="a970" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使卷积成为类组件</h2><p id="cbfc" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">我们将把Convo的定义改为React组件。我们还将添加状态。国家将保持:</p><ul class=""><li id="26b2" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated"><code class="fe og oh oi oj b">currentQuestion</code>:数字</li><li id="3395" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><code class="fe og oh oi oj b">answersArray</code>:编号[]</li></ul><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="63b1" class="lv lw it oj b gy oo op l oq or"><em class="pa">export</em> <em class="pa">class</em> Convo extends React.Component {</span><span id="5c50" class="lv lw it oj b gy os op l oq or">state = {</span><span id="f5d0" class="lv lw it oj b gy os op l oq or">currentQuestion: 0,</span><span id="75c6" class="lv lw it oj b gy os op l oq or">answers: []</span><span id="0ffc" class="lv lw it oj b gy os op l oq or">};</span><span id="f659" class="lv lw it oj b gy os op l oq or">render () {</span><span id="ab7f" class="lv lw it oj b gy os op l oq or">return (&lt;p&gt; Convo Component &lt;/p&gt;)<br/>  }<br/>}</span></pre><h2 id="8364" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><code class="fe og oh oi oj b">RenderConversation</code>功能</h2><p id="3d4a" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">该函数将映射对话数据，然后呈现子组件<code class="fe og oh oi oj b">Question</code>、<code class="fe og oh oi oj b">Response</code>和<code class="fe og oh oi oj b">Custom Response</code>。每个子组件还被传递了其名称的属性。</p><p id="7a24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">renderConversation函数</p><h2 id="29a3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">问题</h2><p id="1c4b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated"><code class="fe og oh oi oj b">Question</code>需要额外道具。我们将把它们添加到Convo.js中的声明中。现在，问题将有以下属性:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="baf1" class="lv lw it oj b gy oo op l oq or">&lt;Question<br/>   question={key.question}<br/>   questionIndex={index}<br/>   currentQuestion={this.state.currentQuestion}<br/> /&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/508533416c7f7b634b319c2366516178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vyJBUln6X-h3XrPl8WcWiA.png"/></div></div></figure><p id="3980" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们添加一些代码来根据状态中的<code class="fe og oh oi oj b">currentQuestion</code>呈现问题。只有当<code class="fe og oh oi oj b">questionIndex</code>小于或等于<code class="fe og oh oi oj b">currentQuestion</code>时，问题才会呈现。</p><p id="7826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着只呈现当前问题或已回答的问题。</p><h2 id="187d" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">反应</h2><p id="c4e0" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">Response还需要额外的属性，所以我们将更新Convo.js。注意，Convo数据键被称为“responses”而不是“response”</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="cf72" class="lv lw it oj b gy oo op l oq or">&lt;Response</span><span id="c898" class="lv lw it oj b gy os op l oq or"><em class="pa">responses</em>=<em class="pa">{</em>key.responses<em class="pa">}</em></span><span id="1a48" class="lv lw it oj b gy os op l oq or"><em class="pa">currentQuestion</em>=<em class="pa">{</em>this.state.currentQuestion<em class="pa">}</em></span><span id="ec1a" class="lv lw it oj b gy os op l oq or"><em class="pa">answers</em>=<em class="pa">{</em>this.state.answers<em class="pa">}</em></span><span id="1eb7" class="lv lw it oj b gy os op l oq or"><em class="pa">questionIndex</em>=<em class="pa">{</em>index<em class="pa">}</em></span><span id="905b" class="lv lw it oj b gy os op l oq or">/&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/e9c094893bbed8e146b0ff790d3654c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pjrsoyi-tlRinV4NS09gfg.png"/></div></div></figure><h2 id="7f2b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><code class="fe og oh oi oj b">renderBubble</code></h2><p id="a91e" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">为了使代码更容易阅读，更简短，我添加了一个函数来呈现响应按钮renderBubble。这需要参数值、名称、键和selected。</p><h2 id="e752" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><code class="fe og oh oi oj b">handleResponseClick</code></h2><p id="1e4c" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">这是当按下响应时将触发的功能。这将在Convo.js文件中声明，并将更新状态中的<code class="fe og oh oi oj b">currentQuestion</code>和答案。</p><p id="31e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该功能将通过props传递给<code class="fe og oh oi oj b">Response</code>组件。</p><p id="be4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，Convo.js中的<code class="fe og oh oi oj b">Response</code>现在看起来是这样的(这将连接到<code class="fe og oh oi oj b">response</code>按钮中的<code class="fe og oh oi oj b">onClick</code>):</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="09eb" class="lv lw it oj b gy oo op l oq or">&lt;Response</span><span id="2a31" class="lv lw it oj b gy os op l oq or"><em class="pa">responses</em>=<em class="pa">{</em>key.responses<em class="pa">}</em></span><span id="2397" class="lv lw it oj b gy os op l oq or"><em class="pa">currentQuestion</em>=<em class="pa">{</em>this.state.currentQuestion<em class="pa">}</em></span><span id="03e7" class="lv lw it oj b gy os op l oq or"><em class="pa">answers</em>=<em class="pa">{</em>this.state.answers<em class="pa">}</em></span><span id="3f2f" class="lv lw it oj b gy os op l oq or"><em class="pa">questionIndex</em>=<em class="pa">{</em>index<em class="pa">}</em></span><span id="bf54" class="lv lw it oj b gy os op l oq or"><em class="pa">handleResponseClick</em>=<em class="pa">{</em>this.onClickResponse<em class="pa">}</em></span><span id="3687" class="lv lw it oj b gy os op l oq or">/&gt;</span></pre><h2 id="c358" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><code class="fe og oh oi oj b">onClickResponse</code>(在Convo.js中)</h2><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="a0a2" class="lv lw it oj b gy oo op l oq or">onClickResponse = (e) =&gt; {</span><span id="dd16" class="lv lw it oj b gy os op l oq or">const questionIndex = Number(e.target.name);</span><span id="3efd" class="lv lw it oj b gy os op l oq or">const answerResult = Number(e.target.value);</span><span id="05c6" class="lv lw it oj b gy os op l oq or">let ans = this.state.answers;</span><span id="8a06" class="lv lw it oj b gy os op l oq or">ans[questionIndex] = answerResult;</span><span id="5b89" class="lv lw it oj b gy os op l oq or">this.setState({</span><span id="62df" class="lv lw it oj b gy os op l oq or">currentQuestion: questionIndex + 1,</span><span id="6528" class="lv lw it oj b gy os op l oq or">answers: ans</span><span id="3b36" class="lv lw it oj b gy os op l oq or">},</span><span id="6a9b" class="lv lw it oj b gy os op l oq or">console.log( "state", this.state.answers, this.state.currentQuestion));</span><span id="9d22" class="lv lw it oj b gy os op l oq or">}</span></pre><h2 id="2212" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">功能</h2><p id="3377" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated"><code class="fe og oh oi oj b">responses</code>不是一个数组，所以我们要映射它。</p><p id="4bf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于何时呈现或不呈现响应，我们有三种情况:</p><ul class=""><li id="d880" class="mo mp it lb b lc ld lf lg li ne lm nf lq ng lu mv mw mx my bi translated">当<code class="fe og oh oi oj b">questionIndex</code>小于<code class="fe og oh oi oj b">currentQuestion</code>时，那么就会出现一个选中和未选中的答案。</li><li id="63fb" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">当<code class="fe og oh oi oj b">questionIndex</code>等于<code class="fe og oh oi oj b">currentIndex</code>时，两个响应都被渲染，不选择任何响应。</li><li id="8336" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">如果<code class="fe og oh oi oj b">questionIndex</code>大于<code class="fe og oh oi oj b">currentQuestion</code>，则不应显示任何内容。</li></ul><p id="ebe5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于选定的按钮，我刚刚添加了一个选定的类。所选按钮根据答案数组中的值呈现，即<code class="fe og oh oi oj b">answers[questionIndex]</code>。</p><h2 id="9d45" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><code class="fe og oh oi oj b">CustomResponse</code></h2><p id="8bd2" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">最后一个组件！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/81d5eed8c54db95f005267be01f3808e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_UHTZj-dhTxYfasJkTzaQ.png"/></div></div></figure><h2 id="2d23" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">在Convo.js中添加道具</h2><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="663c" class="lv lw it oj b gy oo op l oq or">&lt;CustomResponse</span><span id="0c15" class="lv lw it oj b gy os op l oq or"><em class="pa">questionIndex</em>=<em class="pa">{</em>index<em class="pa">}</em></span><span id="ebf8" class="lv lw it oj b gy os op l oq or"><em class="pa">currentQuestion</em>=<em class="pa">{</em>this.state.currentQuestion<em class="pa">}</em></span><span id="408e" class="lv lw it oj b gy os op l oq or"><em class="pa">answers</em>=<em class="pa">{</em>this.state.answers<em class="pa">}</em></span><span id="7f67" class="lv lw it oj b gy os op l oq or"><em class="pa">customResponse</em>=<em class="pa">{</em>key.customResponse<em class="pa">}</em></span><span id="a4fa" class="lv lw it oj b gy os op l oq or">/&gt;</span></pre><h2 id="fefa" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">功能</h2><ul class=""><li id="5fc6" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">自定义响应应该只呈现小于<code class="fe og oh oi oj b">currentQuestion</code>的questionIndexes。</li><li id="d587" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated">自定义响应将仅在所选答案为0时呈现(因为这是我编写响应按钮和自定义响应的方式。)</li></ul><p id="3ef1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以代码看起来有点像这样:</p><p id="6116" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们的代码应该工作了！你可以在这里看到聊天机器人的现场演示。GitHub库的<a class="ae ky" href="https://github.com/nivaaz/chatBot" rel="noopener ugc nofollow" target="_blank">链接也可以在这里找到。</a></p></div></div>    
</body>
</html>