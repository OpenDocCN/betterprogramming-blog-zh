<html>
<head>
<title>Automating Beautiful Screenshots Using Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Jetpack Compose自动生成漂亮的屏幕截图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/automating-beautiful-screenshots-using-jetpack-compose-44aa77c76d3f?source=collection_archive---------10-----------------------#2022-04-21">https://betterprogramming.pub/automating-beautiful-screenshots-using-jetpack-compose-44aa77c76d3f?source=collection_archive---------10-----------------------#2022-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8c9c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为您的Android应用程序创建灵活的设计</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/15e8b5f42c7f8bb9119618fb3da03c17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PahHoEzE4_UoP4_f.png"/></div></div></figure><p id="98ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">截图是用户对我们app的第一印象。因此，为了展示我们最好的一面，我们需要展示设计最好的截图。</p><p id="a183" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是图形化设计截图很费时间。在想出一个独特的设计后，你仍然需要将它应用到你的应用程序的所有变体上。这可以是电话或平板电脑、多个本地化版本等。当你的界面有更新时，你将不得不重做这个过程，或者至少对受影响的截图来说。</p><p id="362f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">自动截图已经能够解决这些问题中的大部分。有像fastlane这样的工具，可以让我们以我们想要的各种不同方式自动截取应用程序的屏幕截图，所有这些只需一个人花费的一小部分时间。</p><p id="679d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这样做的不利之处在于，自动拍摄截图会让你失去帮助你脱颖而出的独特性。</p><p id="4331" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我们将使用UI测试和Jetpack Compose来设计我们的屏幕截图，并使用fastlane自动捕获它们。</p><h1 id="3ed3" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">开始之前</h1><ul class=""><li id="35f4" class="mf mg iq kt b ku mh kx mi la mj le mk li ml lm mm mn mo mp bi translated">使用compose <a class="ae mq" href="https://developer.android.com/jetpack/compose/testing" rel="noopener ugc nofollow" target="_blank">熟悉UI测试。</a></li><li id="a97b" class="mf mg iq kt b ku mr kx ms la mt le mu li mv lm mm mn mo mp bi translated">设置<a class="ae mq" href="https://docs.fastlane.tools/getting-started/android/setup/" rel="noopener ugc nofollow" target="_blank">快车道</a>并浏览关于自动截图的<a class="ae mq" href="https://docs.fastlane.tools/getting-started/android/screenshots/" rel="noopener ugc nofollow" target="_blank">快车道文档</a>。(或者用这个<a class="ae mq" href="https://medium.com/open-knowledge/fastlane-for-android-automate-everything-part-2-bb200076a697" rel="noopener">教程</a>)</li></ul><h1 id="f0e5" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">编排截图</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/0944dfea498c32ca4135e739ef0b1119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Zvn9paVDPBisO19r.png"/></div></div></figure><p id="ef94" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是简单截图的方法。在测试本身之前，我们有一些设置fastlane截图工具的代码。但是最重要的部分在<code class="fe mz na nb nc b">composeTestRule.setContent</code>里面。在这里，当设计一个普通的应用程序时，我们可以使用任何可用的可组合组件。例如，我们可以为整个应用程序添加一些填充和阴影。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="326d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">//卡片截图</p><p id="fd71" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从这里开始，你只受限于你的想象力(或者你的设计师的；).你可以添加一个解释截图的标题，添加一个背景，突出一个特征，等等。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/f1f12b5bd173c68c19be4882018caf0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vJmpK16xm9rAnD2S.png"/></div></div></figure><p id="866c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个例子中，我在应用程序上方添加了一些文本，并将其向下偏移。我还用两个盒子添加了一个简单的背景。您还可以实例化应用程序的两个版本，以显示应用程序的多个版本。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/e0ccc853e9a9796dc2a0334e964daa14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1cVOj4XCE-9ty_IR.png"/></div></div></figure><p id="3525" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们有一个黑暗和光明版本的应用程序并排。因为<code class="fe mz na nb nc b">App</code>只是一个可组合的，我们可以很容易地创建它的两个并排版本。当在单个屏幕截图中显示应用程序的不同状态时，这很有用。</p><h1 id="499c" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">浪子</h1><p id="e4cc" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">对于这个示例，我使用fastlane来自动运行UI测试，并获取和管理屏幕截图。如果您的应用程序已本地化，它可以用多种语言截图，并自动上传到play store。对于这个例子，我只是有一个简单的车道，使一个干净的建设，并采取截图。</p><pre class="kg kh ki kj gt ng nc nh ni aw nj bi"><span id="e216" class="nk lo iq nc b gy nl nm l nn no">lane :screenshots do  <br/>  gradle(task: "clean assembleDebug assembleAndroidTest")  <br/>  screengrab  <br/>end</span></pre><p id="98a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我还有一个文件，它定义了apk在哪里，以及我想要截屏的语言。</p><pre class="kg kh ki kj gt ng nc nh ni aw nj bi"><span id="30af" class="nk lo iq nc b gy nl nm l nn no">locales ['en-US', 'de-DE']  <br/>clear_previous_screenshots true  <br/>tests_apk_path 'app/build/outputs/apk/androidTest/debug/app-debug-androidTest.apk'  <br/>app_apk_path 'app/build/outputs/apk/debug/app-debug.apk'  <br/>test_instrumentation_runner 'androidx.test.runner.AndroidJUnitRunner'</span></pre><p id="1c30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以，我也可以自动生成相同设计和代码的德语截图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/278185bb98f7cc8815e7e9ad6e9b6224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SzPfoeRRDQdfSzAT.png"/></div></div></figure><p id="94bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如何设置自动化取决于您和您的工作流程。但是本文的要点是展示Jetpack Compose如何使我们能够灵活地设计我们的截图。我希望有了这个，你能够创造出令人敬畏的截图。示例项目的源代码是这里的<a class="ae mq" href="https://github.com/sinasamaki/Screenshots" rel="noopener ugc nofollow" target="_blank">和</a>。</p><p id="a456" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读，祝你好运！</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="01b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nw">最初发表于</em><a class="ae mq" href="https://sinasamaki.com/post/2022-04-20-auto-screenshots/" rel="noopener ugc nofollow" target="_blank">T5【https://sinasamaki.com】</a><em class="nw">。</em></p></div></div>    
</body>
</html>