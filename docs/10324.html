<html>
<head>
<title>A Quick Look at the Node.js 16 Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速浏览Node.js 16特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-quick-look-at-the-node-js-16-features-d616e8b2f29?source=collection_archive---------1-----------------------#2021-12-28">https://betterprogramming.pub/a-quick-look-at-the-node-js-16-features-d616e8b2f29?source=collection_archive---------1-----------------------#2021-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6b0c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Node.js 16新特性的细节，包括稳定的定时器承诺API，以及V8 JavaScript engine 9.0特性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9e11bad4308822e3d4fe95d93ef58638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VSUUCv8QBMewMLpl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@nadineshaabana?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">纳丁·沙巴纳</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f8a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Node.js主版本每六个月更新一次。新版本变成了为期六个月的<code class="fe lv lw lx ly b">Current</code>版本，这给了库作者时间来添加对他们的支持。六个月之后，奇数版本，比如15，变得不受支持，偶数版本，比如16，移动到<code class="fe lv lw lx ly b">Active LTS</code>(长期支持)状态，并准备好供一般使用。<code class="fe lv lw lx ly b">LTS</code>发布通常保证关键缺陷将在总共30个月内得到修复。生产应用程序应该只使用<code class="fe lv lw lx ly b">Active LTS</code>或<code class="fe lv lw lx ly b">Maintenance LTS</code>版本。</p><p id="be3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://nodejs.org/en/blog/release/v16.0.0/" rel="noopener ugc nofollow" target="_blank"> Node.js 16 </a>发布于2021年4月20日。其当前状态为<code class="fe lv lw lx ly b">Active LTS</code>。它有许多主要特性:</p><ul class=""><li id="4705" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">稳定的计时器承诺API</li><li id="ccc6" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">V8 JavaScript引擎更新至V8 9.0</li><li id="e403" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">工具链和编译器升级</li></ul><p id="fadb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来探索它们是什么以及如何使用它们。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="69a9" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">使用NVM浏览节点</h1><p id="2ea4" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-nvm-to-manage-node-js-17-and-npm-8-2da8bf3ca5e9">之前的一篇文章</a>中，我们提供了关于使用<a class="ae ky" href="https://github.com/nvm-sh/nvm" rel="noopener ugc nofollow" target="_blank"> NVM(节点版本管理器)</a>管理Node.js和NPM版本的说明。</p><p id="e187" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行命令安装节点16.0.0:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="f16c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在任何窗口上，运行命令以使用节点16:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8a79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们准备探索:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="87ef" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">稳定的计时器承诺API</h1><p id="4b83" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">timers promises API提供了一组返回promise对象的计时器函数。这些功能是在Node.js 15中作为实验性特性添加的，它们在这个版本中成为稳定的特性。</p><p id="57f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">定时器承诺API包括三个API:<code class="fe lv lw lx ly b">setTimeout</code>、<code class="fe lv lw lx ly b">setImmediate</code>和<code class="fe lv lw lx ly b">setInterval</code>。</p><h2 id="9990" class="nt mv it bd mw nu nv dn na nw nx dp ne li ny nz ng lm oa ob ni lq oc od nk oe bi translated">设置超时</h2><p id="d2eb" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">setTimeout</code>(第3行)在履行承诺前延迟若干毫秒。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="aab2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">我们已经解释过ES模块使用</a> <code class="fe lv lw lx ly b"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">.mjs</a></code> <a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">扩展</a>。执行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="5a4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然承诺本身会立即执行，但承诺会在2秒后如期实现。</p><h2 id="363b" class="nt mv it bd mw nu nv dn na nw nx dp ne li ny nz ng lm oa ob ni lq oc od nk oe bi translated"><code class="fe lv lw lx ly b">setImmediate</code></h2><p id="bd3c" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">setImmediate</code>(第三行)立即履行诺言。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="2f92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6e7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很明显，承诺马上兑现。</p><h2 id="9f24" class="nt mv it bd mw nu nv dn na nw nx dp ne li ny nz ng lm oa ob ni lq oc od nk oe bi translated">设置间隔</h2><p id="7865" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">setInterval</code>(第6行)返回一个异步迭代器，它以延迟的毫秒为间隔生成值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b87b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="f05d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">for</code>循环执行了10次。每次包括第一次都延迟<code class="fe lv lw lx ly b">100ms</code>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="41f9" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">V8 JavaScript引擎更新至V8 9.0</h1><p id="5427" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在Node.js 16中，V8 JavaScript引擎从Node.js 15中的8.6版本更新为<a class="ae ky" href="https://v8.dev/blog/v8-release-90" rel="noopener ugc nofollow" target="_blank"> V8 9.0 </a>。以下是主要特征:</p><ul class=""><li id="0066" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">正则表达式匹配索引</li><li id="a122" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">更快的超级属性访问</li><li id="501d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">for (async of</code>禁止</li></ul><h2 id="9699" class="nt mv it bd mw nu nv dn na nw nx dp ne li ny nz ng lm oa ob ni lq oc od nk oe bi translated">正则表达式匹配索引</h2><p id="78e0" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">正则表达式匹配索引是ES2022中的新特性。它提供正则表达式的捕获字符串的开始和结束索引。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="387c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正则表达式使用<code class="fe lv lw lx ly b">d</code>作为标志来生成子串匹配的索引(第1行)。</p><p id="b5e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它打印出如下生成的索引:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="4865" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">[0, 8]</code>是匹配，<code class="fe lv lw lx ly b">[0, 4]</code>是第一捕获组，<code class="fe lv lw lx ly b">[4, 8]</code>是第二捕获组。</p><h2 id="e4a9" class="nt mv it bd mw nu nv dn na nw nx dp ne li ny nz ng lm oa ob ni lq oc od nk oe bi translated">更快的超级属性访问</h2><p id="eff1" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">访问<code class="fe lv lw lx ly b">super</code>属性，例如<code class="fe lv lw lx ly b">super.something</code>，已经通过使用内嵌缓存系统和优化的代码生成在涡扇中进行了优化。随着这些变化，<code class="fe lv lw lx ly b">super</code>属性访问现在更接近于常规属性访问。</p><h2 id="d20b" class="nt mv it bd mw nu nv dn na nw nx dp ne li ny nz ng lm oa ob ni lq oc od nk oe bi translated"><code class="fe lv lw lx ly b">`</code> for(不允许<code class="fe lv lw lx ly b">`</code>的异步</h2><p id="2488" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">令牌序列<code class="fe lv lw lx ly b">for (async of</code>不明确。它可以是<code class="fe lv lw lx ly b">for (async of =&gt; {};;)</code>或<code class="fe lv lw lx ly b">for (async of foo)</code>的前缀。因此，这是不允许的。</p><p id="1864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同时，<code class="fe lv lw lx ly b">for await (async of</code>仍然是允许的，因为没有<code class="fe lv lw lx ly b">for (await (;;)</code>，因此没有歧义。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="a7ff" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">工具链和编译器升级</h1><p id="dd3b" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Node.js通常为许多不同的平台提供预构建的二进制文件。Node.js 16增加了一些内容:</p><ul class=""><li id="1ab8" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">苹果芯片的预构建二进制文件。</li><li id="0ef7" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">macOS安装程序(<code class="fe lv lw lx ly b">.pkg</code>)以“fat”(多架构)二进制文件的形式提供。</li><li id="d213" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">为英特尔(<code class="fe lv lw lx ly b">darwin-x64</code>)和ARM ( <code class="fe lv lw lx ly b">darwin-arm64</code>)架构提供单独的tarballs。</li></ul></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="0dc9" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">结论</h1><p id="37a7" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Node.js 16有许多新特性和改进。它目前的状态是活跃的LTS。</p><p id="8133" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解其他版本的特性，请阅读以下文章:</p><ul class=""><li id="9412" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/6-major-features-of-node-js-19-b98e28b9670c">node . js19的6大特色</a></li><li id="7ec0" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc">node . js 18的5大特色</a></li><li id="4e5a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/3-major-features-of-node-js-17-4bee7135df02">node . js 17的3大特色</a></li><li id="783a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/whats-new-in-node-js-15-fc24e87e2590">node . js 15的新功能</a></li></ul><p id="800a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以看看<a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒体文章</a>。</p></div></div>    
</body>
</html>