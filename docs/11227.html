<html>
<head>
<title>Interactive View Corners in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的交互式视角</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/interactive-view-corners-in-swiftui-4e5de8339289?source=collection_archive---------14-----------------------#2022-02-28">https://betterprogramming.pub/interactive-view-corners-in-swiftui-4e5de8339289?source=collection_archive---------14-----------------------#2022-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="425a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用用户的拖动手势移动视图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3f285132632944eca04f1226ff65e8cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBHbHN3A-tOUNtcK-u0C7Q.jpeg"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ku"><img src="../Images/c8d359a4cada73b05420fba6e6f21c67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*AUF_0KzHs1eURBp8laokaQ.gif"/></div></div></figure><h1 id="175f" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">视角</h1><p id="235c" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">从您想要互动的视图开始。在这里，您可以随意定制。</p><p id="a84b" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">下面，当用户与视图交互时，我添加了<code class="fe mo mp mq mr b">hueRotation()</code>来改变视图的颜色。在本文中，我们将这种观点称为<code class="fe mo mp mq mr b">MyView</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="08c6" class="kv kw it bd kx ky nb la lb lc nc le lf jz nd ka lh kc ne kd lj kf nf kg ll lm bi translated">交互式视图</h1><p id="8e84" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">为了使我的视图具有交互性，将其嵌入到<code class="fe mo mp mq mr b">GeometryReader</code>中，以帮助我们获得局部框架的x和y中点。在<code class="fe mo mp mq mr b">GeometryReader</code>中，创建一个<code class="fe mo mp mq mr b">DragGesture</code>变量。用户拖动时，使用<code class="fe mo mp mq mr b">onChange()</code>移动<code class="fe mo mp mq mr b">MyView</code>，使用<code class="fe mo mp mq mr b">.onEnded()</code>将视图重置为正常的开始位置。</p><p id="7ade" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">在<code class="fe mo mp mq mr b">.onChange()</code>中，我们需要检查所有的四个角。与其检查角落里最远的点，不如把我们的视野分成四部分；左上、右上、左下和右下。</p><p id="6d49" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">我们想将<code class="fe mo mp mq mr b">MyView</code>向用户拖动运动的方向倾斜。获取用户拖动的位置，并将其与几何阅读器本地框架内的位置进行比较。</p><p id="8258" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">对<code class="fe mo mp mq mr b">MyView</code>增加<code class="fe mo mp mq mr b">.rotation3DEffect()</code>并传递x、y轴的状态变量和旋转角度。现在，为所有三个值添加<code class="fe mo mp mq mr b">MyView</code>动画。</p><p id="f32b" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">返回<code class="fe mo mp mq mr b">.onChange()</code>，根据拐角将<code class="fe mo mp mq mr b">x</code>和<code class="fe mo mp mq mr b">y</code>轴的值在1和-1之间改变。检查下面的代码，查看每个角落的正确x和y值。从0度开始，当用户开始拖动<code class="fe mo mp mq mr b">MyView</code>时，将其更改为20度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="97a9" class="kv kw it bd kx ky nb la lb lc nc le lf jz nd ka lh kc ne kd lj kf nf kg ll lm bi translated">ContentView</h1><p id="0dab" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">最后，将<code class="fe mo mp mq mr b">InteractiveView()</code>添加到您的父视图中并运行应用程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="b834" class="kv kw it bd kx ky nb la lb lc nc le lf jz nd ka lh kc ne kd lj kf nf kg ll lm bi translated">视图修改器调整</h1><p id="e22a" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">如果你想有多个交互视图，最好把<code class="fe mo mp mq mr b">InteractiveView()</code>做成一个视图修改器。</p><p id="2414" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">将您的结构类型从<code class="fe mo mp mq mr b">View</code>更改为<code class="fe mo mp mq mr b">ViewModifier</code>。在身体功能中添加身体。将<code class="fe mo mp mq mr b">MyView</code>替换为内容，并如下移除<code class="fe mo mp mq mr b">.frame()</code>修饰符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a0cf" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">在您的父视图中，添加<code class="fe mo mp mq mr b">modifier()</code>并将其传递给我们的<code class="fe mo mp mq mr b">InteractiveView()</code>。最后，将<code class="fe mo mp mq mr b">frame()</code>修饰词添加到<code class="fe mo mp mq mr b">MyView</code>中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ku"><img src="../Images/7f4a46433933a862f18e481993167b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*GaP1qy772Kn6nm0wHXrNmw.gif"/></div></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="89d2" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">谢谢你的阅读！</p></div></div>    
</body>
</html>