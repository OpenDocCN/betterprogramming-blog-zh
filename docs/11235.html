<html>
<head>
<title>Guide to Lombok With Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring Boot龙目岛旅游指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/guide-to-lombok-with-spring-boot-164f9970c9fa?source=collection_archive---------3-----------------------#2022-03-01">https://betterprogramming.pub/guide-to-lombok-with-spring-boot-164f9970c9fa?source=collection_archive---------3-----------------------#2022-03-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a212" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最常用的5个注释和隐藏问题</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ef2ec77476b1038e08be49e0a6d78aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRODrxxwwUQL5b9tKlMk5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由Yasas Sandeepa(作者)设计的图像</p></figure><p id="b6de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">想象一下，你在一个新创建的应用程序中看到一堆样板代码，你需要清理它们。如果你知道龙目岛，你一定会尝试一下。但是要小心！你可能不知道用那个会有什么后果！</p><p id="4787" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以今天，我打算给你带来Lombok中最重要和最广泛使用的注释以及它们的局限性。这将使您清楚地了解如何在您的项目中使用Lombok。</p><p id="1790" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于那些不熟悉project Lombok的人，我将简单介绍一下。</p><h1 id="5890" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">什么是龙目岛？</h1><p id="7198" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">根据官方文档，“Project Lombok是一个java库，可以自动插入到你的编辑器和构建工具中，为你的Java增添趣味。”它基本上是一个注释处理器，在编译时向类中添加代码。</p><h1 id="96b4" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">为什么是龙目岛？</h1><p id="df84" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">Lombok的主要优势是它最小化/删除了样板代码，节省了开发人员在开发过程中的宝贵时间。在最好的情况下，它可以将数百行代码替换为仅五行。</p><p id="dfdc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它增加了源代码的可读性(干净的编码)，并通过减少代码行来节省空间。此外，它还可以消除应用程序中误导性的日志问题。</p><h1 id="b823" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">如何安装</h1><p id="843a" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">Lombok支持所有主要的ide，比如IntelliJ、Eclipse、Netbeans，甚至在VS代码中。这里我使用IntelliJ，因为它是最广泛使用的Java IDE。如果你想知道如何设置一个不同的IDE，请阅读官方文档<a class="ae mr" href="https://projectlombok.org/setup/overview" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="462b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从IntelliJ版本<a class="ae mr" href="https://www.jetbrains.com/idea/whatsnew/2020-3/#other" rel="noopener ugc nofollow" target="_blank"> 2020.3 </a>开始，你不再需要配置IDE来使用Lombok。但是对于旧版本<strong class="la iu">，</strong>你需要有IntelliJ Lombok插件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/916832ef18ad6a8acf62259c451880b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yKRAmkfvSD41fJjhPJmxGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">IntelliJ中的Lombok插件(图片来自作者)</p></figure><p id="33c3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您还需要启用注释处理。在IntelliJ中，转到文件-&gt;设置-&gt;构建、执行、部署-&gt;编译器-&gt;注释处理器。选择“启用注释处理”复选框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/969e833e487afa22ca42f9c423a1c7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*givkCIQxEss_cFhDdlmIIw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">启用注释处理(按作者分类的图像)</p></figure><p id="e47c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您在spring boot项目中使用它，您还需要将这个maven依赖项添加到项目的pom文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="b777" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好吧！我们来看看Lombok中使用最多的注释有哪些。</p><h1 id="b7e4" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">1.@Getter和@Setter</h1><p id="0942" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">当你需要一个封装时，你显然会选择getters和setters。但是您知道每个字段需要多少样板代码。</p><p id="5b62" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Lombok解决了这个问题。如果想生成getters和setters，只需用<code class="fe mw mx my mz b">@Getter</code>和<code class="fe mw mx my mz b">@Setter</code>注释对类进行注释。</p><p id="42eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不带Lombok(普通Java):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="1775" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="6a26" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看Lombok如何减少样板代码。此外，您可以根据自己的意愿将getters和setters逐个添加到每个变量中。</p><p id="d8d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Lombok还引入了一个惰性getter，可以用来缓存一次数据，并允许通过getter进行访问。它将检索一次数据，然后缓存数据以允许在应用程序中进行内存读取。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="4939" class="ne lv it mz b gy nf ng l nh ni">@Getter(lazy = true)<br/>private final Map&lt;String, Long&gt; transactions = getTransactions();</span></pre><p id="c7b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是在生成getters和setters时，Lombok中有一个已知的问题。Lombok为变量/属性生成了错误的getters和setters，它们被命名为第一个char小写和下一个char大写。</p><p id="f1e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设你的类中有一个实例变量<code class="fe mw mx my mz b">pCodeNo</code>。因此，如果我们手动生成getters和setters，它们将如下所示。</p><p id="bb41" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nj">注意:这是正确的做法！</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="b46a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是对于Lombok，它也会大写第一个字母。它生成如下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="64c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然这是正常的行为，但这是不正确的，当您使用Spring Boot定义API时，可能会出现问题。</p><p id="fcf9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，在具有业务逻辑的类中使用带注释的getters和setters没有任何好处。所以根据你的要求，明智地使用Lombok。</p><h1 id="2324" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">2.@NoArgsConstructor和<strong class="ak"> @AllArgsConstructor </strong></h1><p id="6b20" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">构造函数是一种用于初始化对象的特殊方法。Lombok提供了三个注释来创建构造函数，但其中两个是常用的。</p><ul class=""><li id="8608" class="nk nl it la b lb lc le lf lh nm ll nn lp no lt np nq nr ns bi translated"><code class="fe mw mx my mz b">@NoArgsConstructor</code>生成一个没有参数的默认构造函数。</li><li id="5983" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe mw mx my mz b">@AllArgsConstructor</code>生成一个构造函数，它要求注释类中的每个字段都有一个参数。</li></ul><p id="c603" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是如果需要自定义的参数化构造函数，就需要显式编写。</p><p id="a738" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，Lombok提供了一个<code class="fe mw mx my mz b">@RequiredArgsConstructor</code>来生成一个带有必需参数的构造函数。必需的参数是最终字段和带有约束(如not null)的字段。</p><p id="4f07" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不带龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="c227" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="1a80" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，<strong class="la iu"> </strong>如你所见，我们可以用更少的代码用Lombok写同样的类。此外，您不需要为新创建的字段生成新的getters和setters。</p><p id="8264" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但缺点是:它不提供任何代码违规错误。</p><p id="97d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为优秀的开发人员，我们总是需要确保代码是标准格式的。您可以使用分析工具，如<a class="ae mr" href="https://checkstyle.sourceforge.io/" rel="noopener ugc nofollow" target="_blank"> Checkstyle </a>、<a class="ae mr" href="https://docs.sonarqube.org/latest/" rel="noopener ugc nofollow" target="_blank"> Sonar </a>等。，检查Java源代码是否符合指定的编码规则，并持续检查代码质量。</p><p id="6f2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">参见下面的<code class="fe mw mx my mz b">Employee</code>类作为例子。Checkstyle工具给出分析，并显示错误和警告。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/4071f3957bba2e9e613f3a9bd4d440c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jEZg4tw6XWobuwBiFjeYqA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">普通Java类中的Checkstyle错误(图片由作者提供)</p></figure><p id="4d30" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是Lombok注释隐藏了这些错误和警告。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/db9e694d8241e321859dc5e489aad4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tvjOtC5LMcWfZHvVnIh8-g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lombok注释类中的Checkstyle错误(图片由作者提供)</p></figure><p id="d7fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以在添加Lombok之前，你需要确保你的代码是符合标准的。不要隐藏Checkstyle或Sonar违例，而要修复它们。这就是为什么在实现任何东西之前，不应该在类中添加Lombok注释。</p><h1 id="cf58" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak"> 3。@ToString </strong></h1><p id="2018" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">方法用来返回一个对象的字符串表示。</p><p id="f510" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认情况下，它返回一个字符串，该字符串由类名、后跟<code class="fe mw mx my mz b">@ </code>符号以及对象散列码的无符号十六进制表示组成。所以，我们需要覆盖<code class="fe mw mx my mz b">toString()</code>方法来打印对象的实际值。</p><p id="a94a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不带Lombok(IntelliJ生成的Vanilla <code class="fe mw mx my mz b">toString()</code>方法):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="9f81" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/1c4a84333df99a05499363ef1e9cc300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sfBT6ZdvAqia0QAxNf_Tvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">@ToString方法有无Lombok(图片由作者提供)</p></figure><p id="0acc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">两者都提供相似的输出，但是Lombok减少了样板代码。代码更少，复杂性更低！但是在某些情况下使用这个注释有一个问题。我会在下面的<code class="fe mw mx my mz b">Data</code>注释之后再解释。</p><h1 id="6c32" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">4.@数据</h1><p id="0b0e" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">该注释是一个一体化的特殊注释，它将<code class="fe mw mx my mz b">@RequiredArgsConstructor</code>、<code class="fe mw mx my mz b">@Getter</code>、<code class="fe mw mx my mz b">@Setter</code>、<code class="fe mw mx my mz b">@ToString</code>和<code class="fe mw mx my mz b">@EqualsAndHashCode</code>注释的功能捆绑在一个注释中。</p><p id="efcf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它为所有字段生成<code class="fe mw mx my mz b">getters</code>，为所有非最终字段生成<code class="fe mw mx my mz b">setters</code>，一个初始化所有最终字段的构造函数，以及适当的<code class="fe mw mx my mz b">toString</code>、<code class="fe mw mx my mz b">equals</code>和<code class="fe mw mx my mz b">hashCode</code>方法。</p><p id="5a11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不带龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="6ead" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="af4b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看减少了多少行代码！</p><p id="52b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一个缺点就是有时候我们真的不会用这些方法。例如，我们可能不需要equals和hashcode实现。</p><p id="eb2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一个最佳实践，我们的代码库不应该有任何我们不使用的东西。无论我们写什么代码都必须有存在的理由。如果没有，我们应该删除它们。因此，如果您没有使用大多数方法，就不要盲目地添加这个注释。您可以通过分解<code class="fe mw mx my mz b">@Data</code>注释来单独使用注释。</p><p id="b23e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，当您将Lombok与JPA一起使用时，它可能会引入一些危险的陷阱。误用Lombok会影响JPA应用程序的性能，甚至使它们崩溃。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/b129fa4ff7230bda1b407e966f76d296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ZKb1SnVksqb2-Srn9a0rg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">IntelliJ JPA Buddy插件向开发者发出警告(图片由作者提供)</p></figure><p id="1cbb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个警告来自于<code class="fe mw mx my mz b">hashCode()</code>实现，因为没有我们可以依赖的字段来计算hashCode。</p><p id="11fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在懒惰的<code class="fe mw mx my mz b">@OneToMany</code>上调用<code class="fe mw mx my mz b">hashCode()</code>可能会获取它包含的所有实体。这很容易影响应用程序的性能。</p><p id="d639" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这也适用于前面提到的<code class="fe mw mx my mz b">@ToString</code>注解。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/682087ee32d730d0b5fe33b1e7ebce5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SK4AEh-fxJEMSyaN4dbvcQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">IntelliJ JPA好友插件警报(图片由作者提供)</p></figure><p id="1a7e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过排除所有惰性字段，<code class="fe mw mx my mz b">@ToString</code>注释仍然可以使用。但是我建议您避免在JPA实体中使用<code class="fe mw mx my mz b">@Data</code>、<code class="fe mw mx my mz b">@EqualsAndHashCode</code>和<code class="fe mw mx my mz b">@ToString</code>注释，因为您不需要意外地影响应用程序的性能。</p><h1 id="21a4" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">5.用sl4j记录— @sl4j</h1><p id="c2bc" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">日志记录是开发的一个重要部分，它记录系统在任何给定时间点执行的事件。您需要正确地写日志，以便识别问题并查看是否一切都按预期运行。</p><p id="0d23" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是设置日志记录非常麻烦，因为我们每次都需要在类中定义日志记录器来访问日志记录器。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="ae8e" class="ne lv it mz b gy nf ng l nh ni">Logger log = <!-- -->LoggerFactory.<!-- -->getLogger(Example.class)</span></pre><p id="2640" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在大多数情况下，开发人员会将代码从一个类复制并粘贴到另一个类。但是有时他们会忘记更改类名，从而导致错误的日志。</p><p id="87d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Lombok提供了一个更好的解决方案。您可以使用<code class="fe mw mx my mz b">@Sl4j</code>注释来删除样板代码。此外，Lombok还支持其他日志框架，如<code class="fe mw mx my mz b">Log</code>、<code class="fe mw mx my mz b">Log4j</code>、<code class="fe mw mx my mz b">@JBossLog</code>、<code class="fe mw mx my mz b">@Flogger</code>等。</p><p id="d76e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">希望大家注意到最近曝光的<code class="fe mw mx my mz b">log4j</code>零日漏洞问题。所以你应该更加小心地使用这些记录器。</p><p id="fc11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不带龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="04e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与龙目岛:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="2336" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看这有多简单。您只需要添加注释。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/398d555de704dd25e64aac047a519ba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9Ebx1ncG6SQ-Zu_wZfM1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Sl4j注释(图片由作者提供)</p></figure><p id="89d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在实现构建器模式时，会用到更多类似于<code class="fe mw mx my mz b">@Builder</code>的注释。但我个人会建议不要用，因为重构非常困难。</p><p id="06f7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另外，小心使用<code class="fe mw mx my mz b">@UtilityClass</code>注释，因为它对静态导入无效。因为静态导入是在注释处理器运行之前解析的。</p><p id="61d1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以随时对代码进行解耦，以检查注释是否给出了预期的结果。运行应用程序后，检查目标文件夹中由Lombok生成的代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/6c6600da17b454ae4ea8afb7fca8c545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XgAJj6HwEHFUGYjQx4WFSw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">目标文件夹中解除锁定的代码(图片由作者提供)</p></figure><h1 id="2dee" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">资源</h1><ul class=""><li id="5e5d" class="nk nl it la b lb mm le mn lh of ll og lp oh lt np nq nr ns bi translated">龙目岛官方文件— <a class="ae mr" href="https://projectlombok.org/" rel="noopener ugc nofollow" target="_blank">龙目岛项目</a>。</li><li id="69b0" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">GitHub 上的<a class="ae mr" href="https://github.com/Yasas4D/LombokGuide" rel="noopener ugc nofollow" target="_blank">提供了示例的源代码。</a></li></ul><h1 id="d9c0" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="fcc8" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">Lombok是一个由大型社区支持的非凡项目，在减少现有实现的样板代码方面做得很好。但是这种权力伴随着巨大的责任。在添加注释之前，您必须先学习它。</p><p id="d1fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以我的建议是先写普通的Java代码。它会让你对大局有一个清晰的认识。然后检查声纳或任何其他工具的任何违规行为。如果一切顺利，您可以添加Lombok来减少样板代码。</p><p id="be76" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不要一味的加，要聪明的用。让世界变得更美好的更好的编程！</p><p id="fb96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。我希望这有所帮助。如果您有问题或反馈，请随时回复。</p><p id="d4d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">编码快乐！👨‍💻❤️</p></div></div>    
</body>
</html>