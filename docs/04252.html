<html>
<head>
<title>How to Set Up a CI/CD Pipeline for AWS Lambda With GitHub Actions and Serverless</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用GitHub操作和无服务器设置AWS Lambda的CI/CD管道</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/set-up-a-ci-cd-pipeline-for-aws-lambda-with-github-actions-and-serverless-in-under-5-minutes-fd070da9d143?source=collection_archive---------5-----------------------#2020-04-01">https://betterprogramming.pub/set-up-a-ci-cd-pipeline-for-aws-lambda-with-github-actions-and-serverless-in-under-5-minutes-fd070da9d143?source=collection_archive---------5-----------------------#2020-04-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4673" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在不到五分钟的时间内自动部署Python函数及其依赖项</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/91ab261e2703d69a09992a8f7ab406d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1xA9QGVXxkza7GVf-xBmdQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@timswaanphotography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">蒂姆·斯万</a>在<a class="ae kv" href="https://unsplash.com/s/photos/bridge?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="beeb" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="24fb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">作为开发人员，为您的项目提供CI/CD管道功能是非常有价值的。谢天谢地，用Github Actions建立这样一个管道并不难。</p><p id="6bb7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在我之前的文章<a class="ae kv" href="https://medium.com/@schmidphilipp1995/set-up-a-ci-cd-pipeline-for-your-webapp-on-aws-with-github-actions-within-5-minutes-810b10749833" rel="noopener">5分钟内使用Github Actions在AWS上为您的Webapp设置CI/CD管道</a>中，我演示了如何为您的前端应用程序设置CI/CD管道。这一次，我将把重点放在后端。</p><p id="f97b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我将向您提供一个快速简单的分步教程，介绍如何使用Github操作为AWS Lambda设置CI/CD管道。对于我的AWS Lambda，我选择Python作为运行时。我还将介绍如何包含Python包，如<code class="fe mp mq mr ms b">scikit-learn</code>或<code class="fe mp mq mr ms b">pandas</code>。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="197d" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="b018" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你不想阅读完整的帖子，只需从这个Github库中复制动作和<code class="fe mp mq mr ms b">Serverless</code>配置<a class="ae kv" href="https://github.com/philschmid/blog-github-actions-aws-lambda-python" rel="noopener ugc nofollow" target="_blank">，并将Github秘密添加到你的库中。如果你失败了，回来看看这篇文章！</a></p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="48b9" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">要求</h1><p id="4cb0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这篇文章假设你已经安装了用于部署AWS Lambda功能的<a class="ae kv" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器框架</a>,并且已经安装了Github账户和Docker。无服务器框架帮助我们开发和部署AWS Lambda功能。它是一个CLI，开箱即可提供结构、自动化和最佳实践。它还允许您专注于构建复杂的、事件驱动的、无服务器的架构，由函数和事件组成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c2982e09f4f324e8e20d0c3583279edc.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*5mZek7onZSssaoCsZIuVDg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器框架徽标</p></figure><p id="f3de" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你不熟悉或者还没有设置无服务器框架，看看这个<a class="ae kv" href="https://serverless.com/framework/docs/providers/aws/guide/quick-start/" rel="noopener ugc nofollow" target="_blank">无服务器框架快速入门</a>。</p><p id="4266" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在让我们开始学习教程。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="6cfa" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">创建AWS Lambda函数</h1><p id="2581" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，使用无服务器CLI和<code class="fe mp mq mr ms b">aws-python3</code>模板创建我们的AWS Lambda函数:</p><pre class="kg kh ki kj gt ng ms nh ni aw nj bi"><span id="de62" class="nk kx iq ms b gy nl nm l nn no">serverless create --template aws-python3 --path &lt;your-path&gt;</span></pre><p id="56e5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这个CLI命令将创建一个新目录，其中包含一个<code class="fe mp mq mr ms b">[handler.py](&lt;http://handler.py&gt;)</code>、<code class="fe mp mq mr ms b">.gitignore</code>和<code class="fe mp mq mr ms b">serverless.yaml</code>文件。<code class="fe mp mq mr ms b">handler.py</code>包含一些基本的样板代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="a96a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><code class="fe mp mq mr ms b">serverless.yaml</code>包含部署该功能的配置。如果你有兴趣知道<code class="fe mp mq mr ms b">serverless.yaml</code>可以配置什么，看看这里的<a class="ae kv" href="https://serverless.com/framework/docs/providers/aws/guide/serverless.yml/" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="1033" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">添加Python需求</h1><p id="cba1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">接下来，我们需要将Python需求添加到AWS Lambda函数中。为此，我们使用无服务器插件<code class="fe mp mq mr ms b">serverless-python-requirements</code>。它自动捆绑来自<code class="fe mp mq mr ms b">requirements.txt</code>的需求，并使它们在我们的<code class="fe mp mq mr ms b">PYTHONPATH</code>中可用。<code class="fe mp mq mr ms b">serverless-python-requirements</code>插件甚至可以让你捆绑非纯Python模块。如果你有兴趣，看看这里。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="24b2" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">安装插件</h1><p id="22c1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">要安装插件，请运行以下命令:</p><pre class="kg kh ki kj gt ng ms nh ni aw nj bi"><span id="6749" class="nk kx iq ms b gy nl nm l nn no">serverless plugin install -n serverless-python-requirements</span></pre><p id="a79a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这将插件自动添加到您的项目的<code class="fe mp mq mr ms b">package.json</code>和<code class="fe mp mq mr ms b">serverless.yml</code>中的插件部分。</p><p id="f71f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">下一步是调整<code class="fe mp mq mr ms b">serverless.yaml</code>并包含<code class="fe mp mq mr ms b">custom</code> Python需求配置。我们需要这个额外的配置，因为我们的Github Actions运行时是Node，通过这个配置，我们可以将python需求捆绑到docker容器中。</p><p id="f157" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我也:</p><ul class=""><li id="0300" class="nr ns iq lq b lr mk lu ml lx nt mb nu mf nv mj nw nx ny nz bi translated">删除了所有评论。</li><li id="32a8" class="nr ns iq lq b lr oa lu ob lx oc mb od mf oe mj nw nx ny nz bi translated">增加了<code class="fe mp mq mr ms b">HTTP-Event</code>。</li><li id="5dec" class="nr ns iq lq b lr oa lu ob lx oc mb od mf oe mj nw nx ny nz bi translated">增加了<code class="fe mp mq mr ms b">package</code>部分，将<code class="fe mp mq mr ms b">node_modulues</code>排除在展开之外。</li><li id="69d9" class="nr ns iq lq b lr oa lu ob lx oc mb od mf oe mj nw nx ny nz bi translated">将地区更改为<code class="fe mp mq mr ms b">eu-central-1</code>。</li></ul><pre class="kg kh ki kj gt ng ms nh ni aw nj bi"><span id="47a8" class="nk kx iq ms b gy nl nm l nn no">service: &lt;name-of-your-function&gt;</span><span id="8435" class="nk kx iq ms b gy of nm l nn no">provider:<br/>  name: aws<br/>  runtime: python3.7<br/>  region: eu-central-1</span><span id="e8de" class="nk kx iq ms b gy of nm l nn no">custom:<br/>  pythonRequirements:<br/>    dockerizePip: true</span><span id="ec32" class="nk kx iq ms b gy of nm l nn no">package:<br/>  individually: false<br/>  exclude:<br/>    - package.json<br/>    - package-log.json<br/>    - node_modules/**</span><span id="dece" class="nk kx iq ms b gy of nm l nn no">functions:<br/>  get_joke:<br/>    handler: handler.get_joke<br/>    events:<br/>      - http:<br/>          path: joke<br/>          method: get</span><span id="8c57" class="nk kx iq ms b gy of nm l nn no">plugins:<br/>  - serverless-python-requirements</span></pre></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="d13a" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">创建部署脚本</h1><p id="5c9b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">除了我们在<code class="fe mp mq mr ms b">serverless.yaml</code>中的配置，我们还需要编辑<code class="fe mp mq mr ms b">package.json</code>并将<code class="fe mp mq mr ms b">serverless</code>包含为<code class="fe mp mq mr ms b">devDependencies</code>。此外，我们添加了一个<code class="fe mp mq mr ms b">deploy</code>脚本来稍后部署该功能。我们稍后将在Github操作中使用这个部署脚本:</p><pre class="kg kh ki kj gt ng ms nh ni aw nj bi"><span id="10e6" class="nk kx iq ms b gy nl nm l nn no">{<br/>  "name": "blog-github-actions-aws-lambda-python",<br/>  "description": "",<br/>  "version": "0.1.0",<br/>  "dependencies": {},<br/>  "scripts": {<br/>    "deploy": "serverless deploy"<br/>  },<br/>  "devDependencies": {<br/>    "serverless": "^1.67.0",<br/>    "serverless-python-requirements": "^5.1.0"<br/>  }<br/>}</span></pre></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="4125" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">对<code class="fe mp mq mr ms b">requirements.txt</code>增加要求</h1><p id="9e6e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们必须在根级别创建一个<code class="fe mp mq mr ms b">requirements.txt</code>文件，包含所有需要的Python包。但是要小心——解压缩后的部署包大小不能超过250 MB。你可以在这里找到所有AWS Lambda限制的列表。</p><p id="4704" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">另一个提示:<code class="fe mp mq mr ms b">boto3</code>包是预装的——你不必把它包含在<code class="fe mp mq mr ms b">requirements.txt</code>中。</p><p id="7ed9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">出于演示的目的，我选择了<code class="fe mp mq mr ms b">pyjokes</code>包，并让函数用一个笑话来响应所有请求。我在<code class="fe mp mq mr ms b">requirements.txt</code>中加入了<code class="fe mp mq mr ms b">pyjokes</code>。</p><p id="d519" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">之后，我将<code class="fe mp mq mr ms b">pyjokes</code>添加到<code class="fe mp mq mr ms b">handler.py</code>中的函数，它返回一个随机笑话:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="6c02" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">手动部署功能</h1><p id="8318" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在使用Github Actions之前，我们使用下面的命令<em class="og">手动部署该功能(注意:Docker必须启动并运行)</em>:</p><pre class="kg kh ki kj gt ng ms nh ni aw nj bi"><span id="de33" class="nk kx iq ms b gy nl nm l nn no">npm run-script deploy</span></pre><p id="e9e1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在您的CLI中，您应该会看到如下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/0080865a286e6d03bac45d6706108c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvoFzcLt0SQd0AqAPRKw3A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">成功部署的CLI输出</p></figure><p id="24e0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以通过点击<code class="fe mp mq mr ms b">endpoints</code>部分提供的URL来测试我们的功能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/bc4d86083d02cced555e611206b7da9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ecLxHa47Y5W1FaFLkwU65Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自AWS Lambda端点的成功响应</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="181e" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">创建GitHub操作</h1><h2 id="56dd" class="nk kx iq bd ky oj ok dn lc ol om dp lg lx on oo li mb op oq lk mf or os lm ot bi translated">创建文件夹和文件</h2><p id="397b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">对于我们的操作，我们要做的第一件事是在您的项目根级别上创建文件夹<code class="fe mp mq mr ms b">.github</code>和文件夹<code class="fe mp mq mr ms b">workflows</code>。之后，在其中创建<code class="fe mp mq mr ms b">deploy-aws-lambda.yaml</code>文件。</p><h2 id="8f17" class="nk kx iq bd ky oj ok dn lc ol om dp lg lx on oo li mb op oq lk mf or os lm ot bi translated">添加Github操作</h2><p id="401d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">将这段代码片段复制到<code class="fe mp mq mr ms b">deploy-aws-lambda.yaml</code>文件中:</p><pre class="kg kh ki kj gt ng ms nh ni aw nj bi"><span id="de5b" class="nk kx iq ms b gy nl nm l nn no">name: deploy-aws-lambda</span><span id="f924" class="nk kx iq ms b gy of nm l nn no">on:<br/>  push:<br/>    branches:<br/>      - master<br/>jobs:<br/>  deploy:<br/>    runs-on: ubuntu-latest<br/>    strategy:<br/>      matrix:<br/>        node-version: [10.x]<br/>    steps:<br/>      - uses: actions/checkout@master<br/>      - name: Use Node.js ${{ matrix.node-version }}<br/>        uses: actions/setup-node@v1<br/>        with:<br/>          node-version: ${{ matrix.node-version }}<br/>      - name: Install Dependencies<br/>        run: npm install<br/>      - name: Configure AWS Credentials<br/>        uses: aws-actions/configure-aws-credentials@v1<br/>        with:<br/>          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}<br/>          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}<br/>          aws-region: eu-central-1<br/>      - name: Serverless Deploy<br/>        run: npm run-script deploy</span></pre><p id="7c8c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这段代码描述了该操作。Github动作将在<code class="fe mp mq mr ms b">master</code>分支上的<code class="fe mp mq mr ms b">push</code>之后被触发。您可以通过调整代码片段中的<code class="fe mp mq mr ms b">on</code>部分来改变这一点。如果你想为你的行动找一个不同的触发器，看这里的<a class="ae kv" href="https://help.github.com/en/actions/reference/events-that-trigger-workflows" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="620e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">将机密添加到您的存储库中</h1><p id="91bb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">第三步也是最后一步是将秘密添加到Github存储库中。对于这个Github动作，我们需要来自IAM用户的访问密钥ID和秘密访问密钥，作为名为<code class="fe mp mq mr ms b">AWS_ACCESS_KEY_ID</code>和<code class="fe mp mq mr ms b">AWS_SECRET_ACCESS_KEY</code>的秘密。</p><p id="ddee" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果您不确定如何为访问密钥ID和秘密访问密钥创建IAM用户，请阅读此。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="bea7" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">添加秘密</h1><p id="3f8a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">要添加秘密，你必须转到你的存储库的“设置”标签。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/b822075b45a5032dfd18d0e789c50bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ng8SsMzdEirKbkTxp5F1jA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Github存储库选项卡-导航</p></figure><p id="777d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然后转到左侧导航面板中的“秘密”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/297d36fd094d71731b01b77526b760bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5TpxkUeOMEqO04I_Kb7JhQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Github存储库设置页面</p></figure><p id="26d6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在秘密页面上，您可以添加您的两个秘密，<code class="fe mp mq mr ms b">AWS_ACCESS_KEY_ID</code>和<code class="fe mp mq mr ms b">AWS_SECRET_ACCESS_KEY</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/d9d3080ddfe7dfa5fd74a42e56523635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCT0YJTyO6p1r9-eyrrenQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Github存储库添加秘密</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="da62" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">拿一杯咖啡，享受它</h1><p id="b9ca" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们快完成了。最后一步是测试它。因此，编辑<code class="fe mp mq mr ms b">handler.py</code>，并将其推送到您的存储库的主分支。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="46f5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">推送之后，我们可以看到部署AWS Lambda函数的操作:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/410c2fc9d8ae623b5ea35c36cbb47832.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*geEt5Kb24g51nZbadKiJrg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Github操作概述</p></figure><p id="e076" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在成功运行Github操作后，我们可以再次请求我们的函数，看看它是否有效:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/6454f3d71d0128059893b3ee8f4eeb12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dq8f0dIO5ujawL5LqqJ2kw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自AWS Lambda端点的成功响应</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="51f8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我创建了一个带有完整示例的演示库，你可以在这里找到<a class="ae kv" href="https://github.com/philschmid/blog-github-actions-aws-lambda-python" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2766" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果有不清楚的地方，请告诉我，我会修改的。</p><p id="1297" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>