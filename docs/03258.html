<html>
<head>
<title>Why You Should Never Use Methods Inside Templates in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么不应该在Angular中使用模板内部的方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-you-should-never-use-methods-inside-templates-in-angular-497e0e11f948?source=collection_archive---------3-----------------------#2020-01-30">https://betterprogramming.pub/why-you-should-never-use-methods-inside-templates-in-angular-497e0e11f948?source=collection_archive---------3-----------------------#2020-01-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="52be" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及取而代之做什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/5b9ae126e806a06b95cbff4bbabe5568.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*YQa7h43uWps6fHUV6u-DVA.png"/></div></figure><p id="3672" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Angular是一个很好的框架，它为开发人员提供了很好的工具来轻松构建web应用程序。它的核心特性之一是HTML被写入模板，这些模板是没有任何DOCTYPE声明的HTML文件。它们可以以你想要的任何HTML标签开始，因为它们；将被附加到<code class="fe lm ln lo lp b">index.html</code>文件，该文件包含DOCTYPE、元数据、脚本和样式的链接等元素。</p><p id="a6f9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">模板最酷的地方不是它们不需要文档类型或元数据。最酷的是它们可以包含一些普通HTML文件不能包含的东西。其中之一是，你可以在任何地方打开双括号，并在其中包含一些类型脚本。(就是那样)突如其来</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lq"><img src="../Images/5edcac6bae16df04d87933d6b75036c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMgYE6grzEFUUCPP_89WWg.png"/></div></div></figure><p id="1a36" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这里有用户对象，我们将它的<code class="fe lm ln lo lp b">image</code>的路径分配给<code class="fe lm ln lo lp b">img</code>标签的<code class="fe lm ln lo lp b">src</code>属性。这是一个非常有用的特性。就像<code class="fe lm ln lo lp b">user</code>变量一样，你也可以在双括号内使用方法。</p><p id="ca52" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">一个例子是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lv"><img src="../Images/fc020f754e6b9f803aa7df7a1fb57e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6wrPwwB21WM-0RM1LHOJLg.png"/></div></div></figure><p id="c6ca" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这里，我们使用一个名为<code class="fe lm ln lo lp b">getAddress()</code>的助手方法，以一种有代表性的方式从用户对象获取地址。这个方法很基本:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lw"><img src="../Images/e5a8b781b51b4eeb971c189e07baa531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tb1Dyiui0Kn3GUczDLtgRQ.png"/></div></div></figure><p id="87c0" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">不会出事的，对吧？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/0c53a64a327b8febf1bf74c86fa02ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*RHoBYQYFFbs8WY2eBJpwhg.png"/></div></figure><p id="4ea8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">看起来我们已经得到了我们需要的。地址就在那里。</p><p id="d122" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">你想知道它有什么问题吗？让我们在方法的开始放置一个日志。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ly"><img src="../Images/c29c486c9044bf0a0bf2b0d3a6fd4fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pfrZwubagQ75lt4MfyvhQ.png"/></div></div></figure><p id="db4d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这样，我们可以知道这个方法何时被触发。我们现在期待的是只看一次这个主机，但是会发生吗？</p><p id="a4db" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">当我刷新页面并打开控制台时，我看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lz"><img src="../Images/bb794c7a6b45deff60e1d0ed7cffc2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBu4j5zxOpPUCOxnaXYfLw.png"/></div></div></figure><p id="dc90" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">页面刷新后，<code class="fe lm ln lo lp b">getAddress()</code>方法被触发了四次。而且每次我点击页面，将鼠标悬停在文本区域上，或者点击它，我都会得到越来越多的控制台。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lz"><img src="../Images/71cbff2a04c3e3e840d493c824a3fda4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jMm_-N_a6W7gqEaI8EOfhQ.png"/></div></div></figure><p id="1b81" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这是因为角度变化检测。我可以向你保证，Angular的变化检测没有问题，问题出在我们这边。我们在双括号内的模板中使用了一个方法。那不是很聪明。我们应该做的是将这个地址表示赋给一个变量，并确保只调用这个方法一次。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/6de4d603932eebb75272b8841ab9f501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*wD-3dJbjcnKz63YJX03dig.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lq"><img src="../Images/245948cea8e70ec470b73860541a9e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZVk-tuLQ_8Y4izx4X5fuWQ.png"/></div></div></figure><p id="7e5d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这样，<code class="fe lm ln lo lp b">getAddress()</code>方法将只被调用一次，用户地址的字符串表示将被赋给<code class="fe lm ln lo lp b">address</code>变量。</p><p id="0ba6" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们可以通过查看控制台来确定这个方法只被调用了一次。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lz"><img src="../Images/c265b1c4fecfea59b0f7e058f852def3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfFcrMpPhTncbJKD4DdFsQ.png"/></div></div></figure><p id="a66a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">通过在每次点击或悬停在文本区域时触发<code class="fe lm ln lo lp b">getAddress</code>，我们只是减慢了应用程序的速度。</p><p id="9601" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">对于如此简单的情况，这可能不明显。但是想象一下，使用这样的方法有一个填充了值的大型表单。该应用程序的性能将受到更大的影响。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="0a52" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">结论</strong></h1><p id="0a6d" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">有了Angular这样的框架，我们得到了很多普通HTML所没有的很酷的特性。</p><p id="555b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">但是如果这些特性的力量被不加思考地使用，那么我们开始听到我们的团队谈论缓慢的框架，有棱角有多糟糕，等等。事实上，在大多数情况下，问题出在我们的代码内部——我们只是没有注意到而已。</p><p id="5b20" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">感谢阅读！</p></div></div>    
</body>
</html>