<html>
<head>
<title>Adding Shapes and Background in the Omnitrix SwiftUI watchOS App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Omnitrix SwiftUI watchOS应用程序中添加形状和背景</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-an-omnitrix-app-for-your-apple-watch-using-swiftui-part-2-474a3745b713?source=collection_archive---------6-----------------------#2022-01-07">https://betterprogramming.pub/create-an-omnitrix-app-for-your-apple-watch-using-swiftui-part-2-474a3745b713?source=collection_archive---------6-----------------------#2022-01-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4d03" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们用形状来掩盖我们的表盘</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/de0c4f7141d84c5a63a04addc44939a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O4XpNJsmm4JVCplqtT7rWQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://undraw.co/" rel="noopener ugc nofollow" target="_blank"> undraw </a></p></figure><p id="5d8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">欢迎回到Omnitrix项目的第二部分。在这一部分，我们将添加开幕和闭幕动画的应用程序。</p><p id="c2fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，这部分从我们之前停止<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/create-an-omnitrix-app-for-your-apple-watch-using-swiftui-d694a9c5fb80">的地方继续向前</a>。</p><p id="18ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，您可以<a class="ae kv" href="https://github.com/Rockindash/Omnitrix-Part1" rel="noopener ugc nofollow" target="_blank">下载</a>上一部分的模板并从那里继续。那么，我们开始吧。</p><h1 id="2fda" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">修改</h1><p id="05c2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在这一部分中，我们将在手表表面上添加另一层，以掩盖打开和关闭动画。为了适应这种情况，需要对前一部分的某些元素进行更改。让我们从头开始。</p><p id="3f77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，通过以下方式更新<code class="fe mp mq mr ms b">enum</code>以添加新屏幕。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f062" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么<code class="fe mp mq mr ms b"><a class="ae kv" href="https://developer.apple.com/documentation/swiftui/view/digitalcrownrotation(_:)" rel="noopener ugc nofollow" target="_blank">digitalCrownRotation</a></code>修饰符的范围需要从0更新到10，以适应新的屏幕。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="5a6c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">添加形状</h1><p id="0ccf" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">上表面由2个<code class="fe mp mq mr ms b">rhombi</code>组成，它们将左右平移以模仿打开和关闭的动画。</p><p id="8736" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除此之外，底部还会有另一个<code class="fe mp mq mr ms b">rhombus</code>，它将作为一个底座，为外星人图像提供更好的对比度。</p><p id="e7c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，总共有3个<code class="fe mp mq mr ms b">rhombi</code>我们需要为这个部分添加。先说动画的吧。</p><p id="3229" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用下面的修改器在外星人图像下面添加一个<code class="fe mp mq mr ms b">Rectangle</code>形状。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="85e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们来了解一下刚刚发生了什么！！这里我们取了一个正方形，因此具有相同的高度和宽度值。</p><p id="ba59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将其旋转45度，然后沿y轴拉伸，以获得菱形形状。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/81cc6b889806cbea1c77e4e65ad6d0b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E0sWsUD9WnQxkj7q3fOIfw.png"/></div></div></figure><p id="25c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于<code class="fe mp mq mr ms b">foregroundColor</code>,逻辑确保当看到外星人时填充是透明的。如果您运行预览，它必须看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/516f11918dfaf25efe7a9d59b8ea573f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*774_fPvsbUMF9zLYa97eyg.png"/></div></div></figure><p id="8862" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我们需要它们的两个副本，所以再次复制并粘贴整个<code class="fe mp mq mr ms b">Rectangle</code>代码。</p><p id="2bfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，为了让它工作，我们需要抵消和掩盖他们。</p><p id="bffd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，分别向它们添加以下偏移逻辑，以便它们基于<code class="fe mp mq mr ms b">scrollOffset</code>移入和移出帧。</p><pre class="kg kh ki kj gt mx ms my mz aw na bi"><span id="4e6e" class="nb lt iq ms b gy nc nd l ne nf">//Rhombus 1<br/>.offset(x: scrollAmount==0 ? 90 : 30)</span><span id="b82b" class="nb lt iq ms b gy ng nd l ne nf">//Rhombus 2<br/>.offset(x: scrollAmount==0 ? 90 : 30)</span></pre><p id="14ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于动画来说，剩下的就是将它们遮罩成一个<code class="fe mp mq mr ms b">Circle</code>形状。为此，可以在两个矩形上添加一个遮罩修改器。</p><pre class="kg kh ki kj gt mx ms my mz aw na bi"><span id="b295" class="nb lt iq ms b gy nc nd l ne nf">.mask(Circle())</span></pre><p id="43cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">至此，<code class="fe mp mq mr ms b">Rectangle</code>的代码必须如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="dce3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在模拟器或实际设备上运行项目来检查进度:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/6e1b0065917ef364ca503f4efe2a68ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qGABKyKIEC4vo2ZCf0JeeQ.gif"/></div></div></figure><h1 id="4e9d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">添加背景</h1><p id="8d90" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">最后一步，我们需要添加背景基础，并在看到外星人时显示出来。</p><p id="2a0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要实现在表盘正下方添加另一个矩形:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="5cd3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它遵循同样的菱形逻辑。唯一不同的是，当<code class="fe mp mq mr ms b">scrollOffset</code>为0时，我们想要隐藏它。</p><p id="bd3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此在<code class="fe mp mq mr ms b">foregroundColor</code>修改器下的不透明度是合理的。</p><p id="0da9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，你的苹果手表Omnitrix应用程序完成了。您可以在实际设备上运行它，也可以在社交媒体上展示它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/2dca26d508d67acff7903331e348c4e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VVDJizUAArcnA96e17X2Ig.gif"/></div></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="2f99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该项目的完整代码可在<a class="ae kv" href="https://github.com/Rockindash/Omnitrix-Part2" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。</p><p id="4f76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何进一步的疑问或者在教程的任何一点上卡住了，你也可以通过推特<a class="ae kv" href="https://twitter.com/amolkmr05" rel="noopener ugc nofollow" target="_blank">联系我。</a></p></div></div>    
</body>
</html>