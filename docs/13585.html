<html>
<head>
<title>Build an Alexa- or Siri-Equivalent Bot in Python Using OpenAI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenAI用Python构建一个相当于Alexa或Siri的机器人</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-an-alexa-or-siri-equivalent-bot-in-python-ea07ed001445?source=collection_archive---------1-----------------------#2022-09-09">https://betterprogramming.pub/building-an-alexa-or-siri-equivalent-bot-in-python-ea07ed001445?source=collection_archive---------1-----------------------#2022-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="980f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建人工智能助手的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f613663681172181af44209ba0a4c53d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_hH_4Zl6sncEI0yC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/mbq0qL3ynMs" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="f0e1" class="le lf it la b gy lg lh l li lj"><strong class="la iu">Table of Contents</strong></span><span id="86c0" class="le lf it la b gy lk lh l li lj">Introduction<br/><a class="ae ky" href="#23d0" rel="noopener ugc nofollow">APIs and Design</a> <br/><a class="ae ky" href="#fd1e" rel="noopener ugc nofollow">Code Breakdown</a><br/><a class="ae ky" href="#e7f6" rel="noopener ugc nofollow">Conclusion</a></span></pre><h1 id="39c9" class="ll lf it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">介绍</h1><p id="7a9f" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk ml mm mn mo mp mq mr ms mt mu mv mw mx im bi translated">构建一个听语音、回答问题的AI程序并没有你想象的那么难。通过利用一些python包和API，我们可以在一个下午创造奇迹。</p><p id="e618" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">以下是我和机器人之间的一些问答:</p><p id="5d05" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">我:巴西的人口是多少？</p><p id="0f16" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">Bot:巴西的人口估计超过2.09亿</p><p id="3332" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">我:冰淇淋是什么味道？</p><p id="0212" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">机器人:大多数冰淇淋尝起来都是甜的，像奶油一样</p><p id="b230" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">我:我怎么用筷子？</p><p id="1f93" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">机器人:要用筷子，你必须一手拿一只。将筷子放在你惯用手的拇指和食指之间，用中指固定住。将筷子放在你非惯用手的拇指和食指之间，用无名指和小指夹住。拿起食物时，用惯用手的筷子夹住食物，然后使用筷子</p><p id="0d6c" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated"><em class="nd">诚然，这些不是最有启发性的答案。还有最后那个筷子的有点奇怪，lol。然而，这个应用程序可以翻译语音和回答问题的事实，无论看起来多么有限，在我看来都是惊人的。与主流的人工智能辅助机器人不同，我们可以看到引擎盖下的东西，并与之玩耍。</em></p><h1 id="a9f3" class="ll lf it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">这个程序做什么</h1><ul class=""><li id="1e66" class="ne nf it me b mf mg mi mj ml ng mp nh mt ni mx nj nk nl nm bi translated">当用户准备好提问时，通过命令提示符运行文件</li><li id="9a0a" class="ne nf it me b mf nn mi no ml np mp nq mt nr mx nj nk nl nm bi translated">Pyaudio使电脑麦克风能够拾取语音数据</li><li id="ad07" class="ne nf it me b mf nn mi no ml np mp nq mt nr mx nj nk nl nm bi translated">音频数据存储在一个名为“stream”的变量中，然后被编码并转换成JSON数据</li><li id="1012" class="ne nf it me b mf nn mi no ml np mp nq mt nr mx nj nk nl nm bi translated">JSON数据被发送到AssemblyAI API转换成文本。然后文本数据被发送回来</li><li id="e7e1" class="ne nf it me b mf nn mi no ml np mp nq mt nr mx nj nk nl nm bi translated">文本数据被发送到OpenAI API，以便导入text-davinci-002引擎进行处理</li><li id="2e72" class="ne nf it me b mf nn mi no ml np mp nq mt nr mx nj nk nl nm bi translated">问题的答案将被检索并显示在您的问题下方的控制台上</li></ul><h1 id="23d0" class="ll lf it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">API和高级设计</h1><h2 id="0637" class="le lf it bd lm ns nt dn lq nu nv dp lu ml nw nx lw mp ny nz ly mt oa ob ma oc bi translated">本教程使用了两个核心API:</h2><ul class=""><li id="8a9a" class="ne nf it me b mf mg mi mj ml ng mp nh mt ni mx nj nk nl nm bi translated">将音频转录成文本。</li><li id="7524" class="ne nf it me b mf nn mi no ml np mp nq mt nr mx nj nk nl nm bi translated"><a class="ae ky" href="https://openai.com/api/" rel="noopener ugc nofollow" target="_blank"> OpenAI </a>解读问题并返回答案。<em class="nd">我还注意到，你也可以利用OpenAI的Whisper API来执行转录功能。</em></li></ul><h2 id="31a8" class="le lf it bd lm ns nt dn lq nu nv dp lu ml nw nx lw mp ny nz ly mt oa ob ma oc bi translated">设计(高级)</h2><p id="a22c" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk ml mm mn mo mp mq mr ms mt mu mv mw mx im bi translated">这个项目分为两个文件:<code class="fe od oe of la b">main</code>和<code class="fe od oe of la b">openai_helper</code>。</p><p id="cc22" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">“main”脚本用于语音到文本API连接。它包括设置一个WebSockets服务器，填充pyaudio所需的所有参数，并创建在我们的应用程序和AssemblyAi的服务器之间并发发送和接收语音数据所需的异步函数。</p><p id="8262" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated"><code class="fe od oe of la b">openai_helper</code>文件很短，仅用于连接开放的ai“text-da Vinci-002”引擎。此连接用于接收我们问题的答案。</p><h1 id="fd1e" class="ll lf it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">代码分解</h1><h2 id="8229" class="le lf it bd lm ns nt dn lq nu nv dp lu ml nw nx lw mp ny nz ly mt oa ob ma oc bi translated"><code class="fe od oe of la b">main.</code> py</h2><p id="8a19" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk ml mm mn mo mp mq mr ms mt mu mv mw mx im bi translated">首先，我们导入应用程序将使用的所有库。其中一些可能需要安装Pip，这取决于您是否使用过它们。请参见下面的上下文注释:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="19db" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">然后我们设置我们的pyaudio参数。这些输入是默认设置，可以在网上的不同地方找到。如果需要的话，可以随意试验，但是默认设置对我来说很好。我们将流变量设置为音频数据的初始容器，然后将默认的输入设备参数打印为字典。字典的键反映了PortAudio结构的数据字段。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="9975" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">接下来，我们将为发送和接收创建多个异步函数，以便将我们的口头问题转换成文本。这些函数同时运行，这使得语音数据能够转换为base64格式，转换为JSON，通过API发送到服务器，然后以可读格式接收回来。WebSockets服务器也是下面脚本的一个重要部分，因为这使得直接流尽可能无缝。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="d75d" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated">最后，我们有到openai的简单API连接。如果你看一下上面要点的第44行(<code class="fe od oe of la b">main3.py</code>)，你可以看到我们正在从另一个文件中提取函数<code class="fe od oe of la b">ask_computer</code>，并使用输出作为我们问题的答案。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><h1 id="e7f6" class="ll lf it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">结论</h1><p id="5ee4" class="pw-post-body-paragraph mc md it me b mf mg ju mh mi mj jx mk ml mm mn mo mp mq mr ms mt mu mv mw mx im bi translated">对于任何有兴趣尝试Siri或Alexa功能的技术的人来说，这是一个不错的项目。不需要太多的编码经验，因为我们利用API来完成我们的处理。如果任何读者想了解更多关于这些技术的知识，我强烈推荐这个项目的<a class="ae ky" href="https://github.com/ahershy/Virtual_assistant" rel="noopener ugc nofollow" target="_blank">回购</a>分支，并亲自体验。干杯！</p><p id="fb6e" class="pw-post-body-paragraph mc md it me b mf my ju mh mi mz jx mk ml na mn mo mp nb mr ms mt nc mv mw mx im bi translated"><em class="nd">更新:如果你对这个项目感兴趣，请查看另一个类似的</em> <a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/building-an-application-that-turns-voice-into-text-into-image-9efca8713e29"> <em class="nd">项目</em> </a> <em class="nd">。这与使用语音到文本转录来创建dalle-mini图像有关</em></p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="a8b4" class="le lf it la b gy lg lh l li lj"><strong class="la iu">Want to Connect?</strong></span><span id="0405" class="le lf it la b gy lk lh l li lj">Please check out some of my other articles if you found this one helpful/interesting.</span><span id="539f" class="le lf it la b gy lk lh l li lj"><a class="ae ky" href="https://towardsdatascience.com/how-to-find-land-when-youre-at-sea-using-python-48111e5d9795" rel="noopener" target="_blank"><em class="nd">How to find land when you’re at sea using Python</em></a></span><span id="9344" class="le lf it la b gy lk lh l li lj"><a class="ae ky" href="https://python.plainenglish.io/using-python-to-make-journaling-effortless-b1454753943a" rel="noopener ugc nofollow" target="_blank"><em class="nd">Using Python to make Journaling Effortless</em></a></span><span id="6e88" class="le lf it la b gy lk lh l li lj"><a class="ae ky" href="https://link.medium.com/fk39T8NB8mb" rel="noopener"><em class="nd">Optimize your portfolio using math and Python</em></a></span></pre></div></div>    
</body>
</html>