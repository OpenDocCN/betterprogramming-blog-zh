<html>
<head>
<title>Learn How to Build Your Own Semi-Synthetic Machine Learning Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何构建自己的半合成机器学习数据集</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/jailbird-part-1-curiosity-fake-data-657f8f6dd256?source=collection_archive---------4-----------------------#2020-07-05">https://betterprogramming.pub/jailbird-part-1-curiosity-fake-data-657f8f6dd256?source=collection_archive---------4-----------------------#2020-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4ad7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">为什么</strong>网飞的节目《世界上最严酷的监狱内幕》启发我为数据科学撰写了一份问题陈述</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f9ca37c4dce32a68c95845c12f66e6aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gez9DCNpExITnFqIyRwVmQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@deleece?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">德蕾斯·库克</a>在<a class="ae kv" href="https://unsplash.com/s/photos/prison?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="02cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我已经看完了网飞世界上最严酷监狱的所有剧集。我喜欢在糟糕的情况下看到好的结果。挪威监狱取得了很大的成绩，但从其他监狱也总能学到至少一点有用的东西。</p><p id="52fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个例子是巴西监狱，在那里，一个教授生活技能和工作心态的慈善基金会是矫正治疗的一部分。它通过团队建设活动提供情感康复，如泥浴，囚犯们走出他们的舒适区，互相用泥覆盖。</p><p id="8995" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">乌克兰的囚犯在每日歌唱俱乐部获得一些欢笑，所有已婚囚犯都有权每两个月进行为期三天的配偶探视。</p><p id="a21a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在伯利兹，一所监狱开展了一项康复计划，囚犯们在那里学习社会化和愤怒管理。</p><p id="9f38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">洪都拉斯监狱的警卫把自己锁在外面，挑选出来的、信任的囚犯被武装起来，并被赋予管理监狱的责任。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="c9cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二季和第三季的主持人是英国记者拉斐尔·罗，他因莫须有的罪名被判终身监禁，不得假释。服刑12年后，他最终被无罪释放。他的经历和感受不仅为这部剧的结局增色不少，而且最终会和所有站出来展示自己的人一起，让这部剧变得更好。</p><p id="73d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">剧中几乎所有的监狱都极其恐怖。但我相信应该有可能收集所有这些知识，在这里和那里做一点调整，并通过使用知识而不是必要的资金来改善世界各地的监狱福利和制度。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="2fa7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让事情变得更好，你需要数据，所以我开始浏览<a class="ae kv" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>寻找数据集，找到了<a class="ae kv" href="https://www.kaggle.com/new-york-state/nys-recidivism-beginning-2008" rel="noopener ugc nofollow" target="_blank"> NYS累犯:始于2008 </a>。但是和通常的数据集一样，它缺少软因素。我认为有用的数据是这样的数据，它能告诉囚犯们是否得到了足够高质量的社交，他们能阅读什么，他们做什么活动，以及他们是否在任何情况下都感到需要。</p><p id="993d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果囚犯在服刑期间能够继续与亲属度过健康的高质量时间，那么他们的关系将会得到维持。一旦他们出狱，一个他们非常想念的健康的社交圈将等待他们重新进入。他们会努力不再打破这个圈子。</p><p id="dd1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有了用软因子列生成和丰富数据集的想法。但是我从做探索性的数据分析开始。我在相关矩阵的帮助下发现，特别是女性和年龄跨度在33-82岁(但特别是50-64岁)的囚犯重返监狱的可能性很高。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mb"><img src="../Images/6dc7d875d99534afcad0fd73d19c9439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jXkiicHCxJcfEnAQcDYpYg.png"/></div></div></figure><p id="eb13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我如何使用<a class="ae kv" href="https://pypi.org/project/Faker/" rel="noopener ugc nofollow" target="_blank"> Faker </a>为数据集生成额外的合成数据:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mc lt l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GitHub gist的链接:<a class="ae kv" href="https://gist.github.com/annaunger/1adaab593f0b0a171c69f6d638a44a23" rel="noopener ugc nofollow" target="_blank">https://gist . GitHub . com/annaunger/1 ada ab 593 f 0 b 0a 171 c 69 F6 d 638 a 44 a 23</a></p></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="b2f1" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">如何一步一步来</h1><p id="fc10" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">我已经用one-hot编码对数据集进行了编码，以将其用于机器学习。然后我创建一个空列表，在那里我使用<a class="ae kv" href="https://faker.readthedocs.io/en/master/providers/faker.providers.misc.html" rel="noopener ugc nofollow" target="_blank"> Faker </a>生成一个布尔值，这取决于<code class="fe na nb nc nd b">DataFrame</code>中的值，使用<code class="fe na nb nc nd b"><a class="ae kv" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iloc.html" rel="noopener ugc nofollow" target="_blank">iloc</a></code>。</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="b6ca" class="ni me iq nd b gy nj nk l nl nm">pip install Faker</span><span id="7746" class="ni me iq nd b gy nn nk l nl nm">fakies = []</span><span id="c717" class="ni me iq nd b gy nn nk l nl nm">for i in range(len(new_df)):</span><span id="6d58" class="ni me iq nd b gy nn nk l nl nm">    if (new_df.iloc[i].gender_MALE==1) <br/>    and (new_df.iloc[i].age_16_32==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=85))</span><span id="976c" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_MALE==1) <br/>    and (new_df.iloc[i].age_50_64==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=75))</span><span id="d24b" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_MALE==1) <br/>    and (new_df.iloc[i].age_33_49==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=70))</span><span id="8e0c" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_MALE==1) <br/>    and (new_df.iloc[i].age_65_82==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=65))</span><span id="a68c" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_FEMALE==1) <br/>    and (new_df.iloc[i].age_16_32==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=55))</span><span id="4ee4" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_FEMALE==1) <br/>    and (new_df.iloc[i].age_50_64==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=25))</span><span id="bef6" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_FEMALE==1) <br/>    and (new_df.iloc[i].age_33_49==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=40))</span><span id="7dd9" class="ni me iq nd b gy nn nk l nl nm">    elif (new_df.iloc[i].gender_FEMALE==1) <br/>    and (new_df.iloc[i].age_65_82==1):<br/>        fakies.append(fake.boolean(chance_of_getting_true=45))<br/>   <br/>    else:<br/>        fakies.append(fake.boolean(chance_of_getting_true=30))</span></pre><p id="2887" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将造假者名单添加到<code class="fe na nb nc nd b">DataFrame</code>:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="da69" class="ni me iq nd b gy nj nk l nl nm">new_df['visitors_family'] = pd.DataFrame(fakies)</span></pre><p id="29f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我用一键编码对新列进行编码:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="c3d0" class="ni me iq nd b gy nj nk l nl nm">df_visitors_family_one_hot = pd.get_dummies(new_df['visitors_family'], prefix='fam')</span></pre><p id="8c5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我用<code class="fe na nb nc nd b">DataFrame</code>连接两个编码的列:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="3dd8" class="ni me iq nd b gy nj nk l nl nm">new_df_con_enc = pd.concat([new_df, df_visitors_family_one_hot], axis=1)</span></pre><p id="54c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我重命名<code class="fe na nb nc nd b">DataFrame</code>并删除添加的Faker列表列:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="235c" class="ni me iq nd b gy nj nk l nl nm">final_df = new_df_con_enc.drop(['visitors_family'], axis=1)</span></pre><p id="e614" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我用一个相关矩阵来可视化<code class="fe na nb nc nd b">DataFrame</code>，看看我的假数据看起来是否正常:</p><pre class="kg kh ki kj gt ne nd nf ng aw nh bi"><span id="110d" class="ni me iq nd b gy nj nk l nl nm">plt.figure(figsize=(15,5))<br/>sns.heatmap(final_df.corr(),<br/>        vmin=-1,<br/>        cmap='coolwarm',<br/>        annot=True);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/46fbdd0bdc14c1e46592ca1439ac65a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B8BGUdOI0GvOEFNlHx0qSA.png"/></div></div></figure><p id="ff81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看起来不错，但是我需要稍微调整一下<code class="fe na nb nc nd b">chance_of_getting_true</code>的值。</p><p id="71c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很难找到一个与您的需求100%匹配的数据集，因此，知道如何生成您自己的数据集是很好的，一个不是完全随机的数据集。</p><p id="bbdb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>