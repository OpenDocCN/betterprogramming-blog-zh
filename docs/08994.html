<html>
<head>
<title>Using the Scaffold and Slot APIs in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Jetpack Compose中使用Scaffold和Slot APIs</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-the-scaffold-and-slot-apis-in-jetpack-compose-3e2e1b0e0550?source=collection_archive---------2-----------------------#2021-07-05">https://betterprogramming.pub/using-the-scaffold-and-slot-apis-in-jetpack-compose-3e2e1b0e0550?source=collection_archive---------2-----------------------#2021-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fd12" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建出色的Android应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/112c87a2d9717964823ac8128f9cbb28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N9L3ZRc_Go4k4kLM"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@altumcode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> AltumCode </a>的照片。</p></figure><p id="e7ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将学习Scaffold和Slot APIs，以及如何使用它们在Android应用程序中设计一个全功能的屏幕。您将学习如何创建顶部栏、底部导航视图、抽屉和屏幕的主要内容。最重要的是，你会学到脚手架是如何将它们连接在一起的。</p><p id="c603" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文的最后，您会发现Github项目。请随意探索代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4833" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">介绍</h1><p id="092b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Jetpack Compose是谷歌最近试图让Android开发者轻松构建UI的尝试之一。</p><blockquote class="mz na nb"><p id="822f" class="kz la nc lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">“Jetpack Compose是一个用于构建原生Android UI的现代工具包。Jetpack Compose以更少的代码、强大的工具和直观的Kotlin APIs简化并加速了Android上的UI开发。”— <a class="ae ky" href="https://developer.android.com/jetpack/compose/tutorial" rel="noopener ugc nofollow" target="_blank">安卓开发者</a></p></blockquote><p id="bc26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jetpack Compose最近进行了测试。这意味着API结构将不再有任何剧烈的变化，因此这将是学习如何使用这个下一代UI套件进行Android开发的大好时机。</p><p id="6e03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要安装Android Studio Canary，北极狐(2020.3.1) <strong class="lb iu"> </strong>版本才能使用Jetpack Compose beta。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="553d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">先决条件</h1><p id="4955" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在进一步学习之前，您必须具备如何使用Jetpack Compose的基本知识。如果你是作曲新手，我强烈推荐阅读以下文章:</p><ul class=""><li id="5ecc" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/jetpack-compose-components-part-1-a80717dbfb59">“Jetpack编写组件(第1部分)”</a></li><li id="171b" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/build-android-layouts-in-jetpack-compose-bda2e0837f5e">“在JetPack Compose中构建Android布局”</a></li><li id="622a" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/theming-in-jetpack-compose-for-android-667d42b8279c">“面向Android的Jetpack合成中的主题化”</a></li><li id="0234" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/android-bottom-navigation-bar-with-jetpack-compose-8c2aa02b933d">“底部导航栏与Jetpack组合”</a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="19ab" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是脚手架？</h1><p id="88de" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#scaffold" rel="noopener ugc nofollow" target="_blank"> Scaffold </a>是一个材质设计布局结构，它提供了一种方法来容纳不同的材质组件，如应用程序栏、底部导航视图、抽屉、浮动操作按钮等。通过实施布局结构策略来确保所有这些组件无缝地协同工作。所有这些子组件都被称为插槽—打个比方。</p><p id="e8bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了<code class="fe nu nv nw nx b">Scaffold</code>Compose以外，Compose还提供了几个如<code class="fe nu nv nw nx b">BackdropScaffold</code>、<code class="fe nu nv nw nx b">BottomSheetScaffold</code>等。来处理像底层这样的复杂用例。首先，我们来看看<code class="fe nu nv nw nx b">Scaffold</code>可组合函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">脚手架</p></figure><ul class=""><li id="4ead" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">modifier</code> <strong class="lb iu"> </strong> —顾名思义，<code class="fe nu nv nw nx b">Modifier</code>是一种修改组件某些方面的方式，这导致了它在屏幕上的显示方式。要了解更多关于<code class="fe nu nv nw nx b">modifier</code>的信息，请阅读以下文章:</li></ul><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/jetpack-compose-components-part-3-ce5ae661f3d6"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">Jetpack组件(第3部分)</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">关于修改器你需要知道的一切</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><ul class=""><li id="4361" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">ScaffoldState</code><strong class="lb iu"/>—<code class="fe nu nv nw nx b">Scaffold</code>可组合组件的状态。它包含基本屏幕状态(如抽屉配置)以及布局完成后组件的尺寸。基本上，它用于获取抽屉的状态，并执行打开、关闭等操作。</li></ul><pre class="kj kk kl km gt os nx ot ou aw ov bi"><span id="5abf" class="ow md it nx b gy ox oy l oz pa">class ScaffoldState(<br/>    val drawerState: DrawerState,<br/>    val snackbarHostState: SnackbarHostState<br/>)</span></pre><ul class=""><li id="9e54" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">topBar</code> <strong class="lb iu"> </strong> —设计app的顶栏，很简单的可组合功能。</li><li id="f974" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">bottomBar</code> <strong class="lb iu"> </strong> —用于在屏幕上显示底部导航视图。要了解更多信息，请阅读以下文章:</li></ul><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/android-bottom-navigation-bar-with-jetpack-compose-8c2aa02b933d"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">Android底部导航栏，带有Jetpack组件</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">定制您的导航路线</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="pb l oo op oq om or ks od"/></div></div></a></div><ul class=""><li id="954d" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">snackbarHost</code> <strong class="lb iu"> </strong> —为了在已有的UI上有效地处理<code class="fe nu nv nw nx b">snackbar</code>，我们需要使用<code class="fe nu nv nw nx b">snackbarHost</code>。要了解更多信息，请阅读以下文章:</li></ul><div class="oa ob gp gr oc od"><a href="https://medium.com/the-devops-corner/design-snackbars-and-alert-dialogs-in-jetpack-compose-f6aa314c498d" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">在Jetpack Compose中设计零食条和提醒对话框</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">在现代android应用程序中，显示像snackbar或dialog这样的警告是一项常见的任务。在这篇文章中，你是…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="pc l oo op oq om or ks od"/></div></div></a></div><ul class=""><li id="338f" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">floatingActionButton</code>、<code class="fe nu nv nw nx b">floatingActionButtonPosition</code>、<code class="fe nu nv nw nx b">isFloatingActionButtonDocked</code> —这些标志用于管理带有现有UI的fab按钮。</li><li id="b18d" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">这是一个简单的可组合函数，用于设计抽屉布局。<code class="fe nu nv nw nx b">drawerGesturesEnabled</code>、<code class="fe nu nv nw nx b">drawerShape</code>、<code class="fe nu nv nw nx b">drawerElevation</code>、<code class="fe nu nv nw nx b">drawerBackgroundColor</code>、<code class="fe nu nv nw nx b">drawerContentColor</code>、<code class="fe nu nv nw nx b">drawerScrimColor</code>用于管理抽屉的不同UI元素。</li><li id="07c2" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">backgroundColor</code>和<code class="fe nu nv nw nx b">contentColor</code> —用于定义屏幕主视图的背景和内容颜色。</li><li id="4772" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><code class="fe nu nv nw nx b">content</code> —这是一个用于设计屏幕主要内容的可组合功能。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f0a7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建一个基本的脚手架</h1><p id="78a7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们创建一个简单的<code class="fe nu nv nw nx b">Scaffold</code>可组合函数，将<code class="fe nu nv nw nx b">topBar</code>、<code class="fe nu nv nw nx b">bottomBar</code>和<code class="fe nu nv nw nx b">drawerContent</code>参数作为空函数。用简单的文字设计应用程序的主要内容。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3820" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设计组件</h1><p id="0fce" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我们需要创建<code class="fe nu nv nw nx b">ScaffoldState</code>和<code class="fe nu nv nw nx b">CoroutineScope</code> <em class="nc"> </em>，使用<code class="fe nu nv nw nx b">remember</code>来维护重组后的状态。要了解更多关于<code class="fe nu nv nw nx b">remember</code>的信息:</p><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/jetpack-compose-components-part-2-2b3eb135d294"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">Jetpack合成组件(第2部分)</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">查看图标、图像、记忆、间隔、单选按钮、加载器、开关和复选框以及滑块</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><pre class="kj kk kl km gt os nx ot ou aw ov bi"><span id="9d78" class="ow md it nx b gy ox oy l oz pa">val scaffoldState = <strong class="nx iu"><em class="nc">rememberScaffoldState</em></strong>()<br/>val scope = <strong class="nx iu"><em class="nc">rememberCoroutineScope</em></strong>()</span></pre><p id="0351" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们开始一步一步地设计可组合的。</p><h2 id="4612" class="ow md it bd me pd pe dn mi pf pg dp mm li ph pi mo lm pj pk mq lq pl pm ms pn bi translated">顶部栏</h2><p id="8e69" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nu nv nw nx b">topBar</code>就是我们用来显示在屏幕上方的工具栏。让我们设计一个简单的带有菜单图标和标题的<code class="fe nu nv nw nx b">TopAppBar</code>。点击菜单图标，我们需要使用<code class="fe nu nv nw nx b">ScaffoldState</code>打开抽屉。<code class="fe nu nv nw nx b">open</code>是一个挂起函数，所以我们需要使用协程作用域。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">屏幕的顶栏</p></figure><h2 id="0ac4" class="ow md it bd me pd pe dn mi pf pg dp mm li ph pi mo lm pj pk mq lq pl pm ms pn bi translated">drawer内容</h2><p id="9d5e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe nu nv nw nx b">drawerContent</code>是一个简单的可组合函数，用于设计抽屉布局。这里，我们将显示一个简单的项目列表。看一看:</p><pre class="kj kk kl km gt os nx ot ou aw ov bi"><span id="3154" class="ow md it nx b gy ox oy l oz pa">@Composable<br/>fun DrawerContent() {<br/>    for ( i in 0 <em class="nc">until </em>5 ){<br/>        <em class="nc">Text</em>(text = "Item $i")<br/>    }<br/>}</span></pre><h2 id="e221" class="ow md it bd me pd pe dn mi pf pg dp mm li ph pi mo lm pj pk mq lq pl pm ms pn bi translated">底部条</h2><p id="fdae" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最后，是时候设计屏幕的最后一个组件了:底部导航视图。出于本文的考虑，我将实现一个简单的底部导航视图。如果你想了解更多关于如何有效地设计它，我强烈推荐你阅读这篇<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/android-bottom-navigation-bar-with-jetpack-compose-8c2aa02b933d">文章</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">底部导航视图设计</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2c5d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">脚手架设计</h1><p id="3256" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">既然我们已经设计了子组件，最后是时候通过Scaffold将它们集合在一起了。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">支撑屏幕上所有子组件的支架</p></figure><p id="baa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们只需要从<em class="nc"> </em> <code class="fe nu nv nw nx b">MainActivity</code>中的<code class="fe nu nv nw nx b">setContent</code> <em class="nc"> </em>调用<code class="fe nu nv nw nx b">ScaffoldSample</code>即可。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="8f62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已。我们完了！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f0a8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">奖金</h1><p id="11ab" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">下面是GitHub repo链接，它实现了持久化和模式化的底层表单。随意探索:</p><div class="oa ob gp gr oc od"><a href="https://github.com/SG-K/Jetpack-Compose-Scaffold" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">SG-K/Jetpack-Compose-脚手架</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">在GitHub上创建一个帐户，为SG-K/Jetpack-Compose-Scaffold的开发做出贡献。</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">github.com</p></div></div><div class="om l"><div class="po l oo op oq om or ks od"/></div></div></a></div><p id="33e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近看到了Satya Pavan Kantamani 发表的这篇关于Android前台服务的优秀文章。强烈建议:</p><div class="oa ob gp gr oc od"><a rel="noopener  ugc nofollow" target="_blank" href="/what-is-foreground-service-in-android-3487d9719ab6"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">如何在Android中实现前台服务</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">了解什么是前台服务，并将其集成到您的Android应用程序中</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">better编程. pub</p></div></div><div class="om l"><div class="pp l oo op oq om or ks od"/></div></div></a></div><p id="cd42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>