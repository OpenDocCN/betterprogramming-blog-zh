# Swift 5.7 的可选解包语法

> 原文：<https://betterprogramming.pub/swift-5-7-unwrapping-optionals-gets-improvement-be81c578e9fa>

## 在 Swift 5.7 中，解包选项越来越短

![](img/35a0e15687804ef40b872a536d3a3201.png)

# 介绍

在 Swift 中解开可选变量是 iOS 开发人员每小时执行的最常见的开发任务之一。

这很常见，以至于拆开包装是面试中最受欢迎的问题之一。

在展开的背景下，我将展示 Swift 5.7 中的一个小“语法糖”。

这是变化本身并不重要的一个例子——但是围绕它的讨论要多得多。

为了理解为什么我们首先需要讨论阴影。

# 跟踪——不好吗？

我们都经历过。

我们有一个可选的，我们想打开它。

当我们展开可选的 x 时，我们创建了一个新的常数，也叫 x，它包含相同的值，现在我们用这个常数代替可选的变量。

这个动作被称为**遮蔽**——因为新的常量就像我们想要解开的原始可选的阴影。

做跟班好吗？

很明显，隐藏一个可选变量会给我们带来一些问题。

首先，上面的例子并不代表现实。

变量名更长，有时长得多。

例如:

好吧，也许太长了:)，但你明白了。长名称的可选变量创建了没有理由的扩展展开代码。它只是看起来…嗯..奇怪。

那么，我们该怎么办？哦，我知道了，让我们缩短名字吧！

好的，所以我们把名字缩短为“日期”，现在，不清楚“日期”是什么意思。我们知道命名在编写可读代码中起着重要的作用，我们对命名可选变量进行了深入的思考。

因此，如果我们回到隐藏(我的意思是，保持原来的名称)，我们会遇到一个新问题——我们现在有两个同名的变量。当然，我们知道如何处理(我们都是专业人员)，但这仍然不是最佳实践，不是吗？

我们看到阴影(我们都使用！)也没那么无辜。

因此，Swift 5.7 采用了一种有趣的新方法来处理这种情况。

但是，这种方法可能会引发新的问题。大家说说吧。

# 缩短阴影

解决办法很简单。

而不是:

我们可以做到以下几点:

当变量很长时，这种解决方案非常有用:

现在，当然，这个解决方案也与另一个阴影展开相关:

但是，它完美吗？

有人说，缩短 Swift 5.7 允许的方式也有缺点。

例如，在执行以下操作时:

我们好像一直在丢失 x 的上下文，感觉 x 是一个没有值的新变量。“= x”给了我们上下文，反映出我们使用了一个现有的变量。

第二个原因可能更加深刻。

我们说过隐藏可能不是一个好方法。原因之一是创建重复的变量。

但是这个解决方案并不能阻止我们跟踪——甚至更糟！它鼓励我们跟踪可选变量，并由此把洞挖得更深。

# 思想

作为一个“老”开发人员，我很难缩短我的解包时间，所以我可能不是一个完美的例子。

但我认为 Swift 5.7 的这个新特性可以教会我们很多关于命名、重复变量和可读代码的知识。

你怎么想呢?你喜欢吗？