<html>
<head>
<title>Morphing Nodes Under SceneKit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SceneKit下变形节点</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/morphing-nodes-under-scenekit-b6c72784265a?source=collection_archive---------14-----------------------#2022-08-22">https://betterprogramming.pub/morphing-nodes-under-scenekit-b6c72784265a?source=collection_archive---------14-----------------------#2022-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b34" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在场景中改变物体的几何形状</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f549594934eddaa65f4605306df5bc67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WqITcnA1DVwDs5vQUh5u6A.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者创建的SceneKit | GIFs中的数字之间的变形</p></figure><p id="6295" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我最近又看了一遍史蒂夫·乔布斯的电影，不禁反思这个人如何改变了他一生中的两个行业。计算机产业和电影产业——后者是皮克斯公司的创立，该公司于1995年制作了第一部全3D动画长片《玩具总动员》。</p><p id="7a8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这家公司当时肯定会使用苹果电脑及其早期版本的动画框架，如Core Image、SceneKit和现在的Metal，其中一个关键元素是morphers将两个形状从一个融合到另一个。</p><p id="397c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">和我一起在这篇文章中学习在SceneKit中这样做的基本知识，这个过程没有我认为苹果公司关于这个主题的手册页所建议的那么明显。</p><h1 id="5f33" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">基本变形</h1><p id="a7e5" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">先说一个简单的动画GIF。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2896b592dcd8a6fe6363b9b27985d453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Pjj950mh9nV2jrI7vlTdFg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个在场景下从小变大再变回来的盒子</p></figure><p id="646e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在图像中，你看到一个简单的蓝色立方体；在变小变蓝之前变大变红。我通过下面的代码片段实现了一种效果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="2327" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我已经创建并添加了一个具有<code class="fe mt mu mv mw b">cubeGeometry</code>布局的立方体，这个配置后来被我改成了<code class="fe mt mu mv mw b">cubeGeometry2</code>。当我完成最后一个时，通过删除添加的原始节点并用新节点替换它来更改节点。</p><p id="a7dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">整个过程是由我前几个月在这篇<a class="ae mx" rel="noopener ugc nofollow" target="_blank" href="/16-useful-extensions-for-swiftui-88aae6ff8909">文章</a>中描述的订阅设置触发的。</p><h1 id="30b1" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">自定义变形</h1><p id="961e" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在此图像中，您可以看到两个自定义几何图形从一个变形到另一个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c2e1e0a6abfd94ae57ed4850347be72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lY7ga79PDRK_02VGHuyYOA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个平面在场景中变形为一个尖角</p></figure><p id="6f79" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这需要更多的代码。更多的代码，因为你需要几个我之前在这篇<a class="ae mx" rel="noopener ugc nofollow" target="_blank" href="/custom-geometry-in-scenekit-under-swiftui-35a95520e6d9">文章</a>中描述的扩展。构建自定义几何图形的扩展。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="ded4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用于创建自定义形状的代码，您可以随后使用前面显示的变形代码对其进行变形。</p><h1 id="8cc0" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">组合变形</h1><p id="0871" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">最后，在这张图片中，我将数字1的几何形状变形为多个立方体，这是一种爆炸效果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/82b3da1e6a38b500a0482d6b297af67b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Q8IDy6Vy0RvxG-J2adP0UA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在SceneKit下将textNode变形为cubeNode</p></figure><p id="80a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我确实试着用了一个圆，但是说实话，一塌糊涂。你也可以尝试其他形状。只要顶点匹配的数量，它可以是任何值。</p><blockquote class="my mz na"><p id="5579" class="ky kz nb la b lb lc ju ld le lf jx lg nc li lj lk nd lm ln lo ne lq lr ls lt im bi translated">不幸的是，你似乎不能直接访问组成TextNode的顶点，所以我不能直接变形一个数字，尽管当你尝试这样做时，morphing命令会崩溃并告诉你需要多少个顶点。</p></blockquote><p id="a99d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不同的数有不同的顶点数:一个基本数有230个顶点；两个具有322个顶点，三个具有636个顶点，四个具有322个顶点，五个具有404个顶点。如果你使用不同的字体，我也怀疑这个数字会改变。通过改变所绘制图形的不同属性，可以增加顶点数。所以，像这样的代码:</p><pre class="kj kk kl km gt nf mw ng nh aw ni bi"><span id="64fd" class="nj lv it mw b gy nk nl l nm nn">let rect3 = CGRect(x: 0, y: 0, width: 2, height: 2)<br/>let roundedRect3 = UIBezierPath(roundedRect: rect3, cornerRadius: 2)<br/>neuText.chamferRadius = 0.5<br/>neuText.flatness = 0.2<br/>neuText.chamferProfile = roundedRect3<br/>neuText.chamferRadius = 0.5</span></pre><p id="5e38" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在这里详细描述代码给<code class="fe mt mu mv mw b">textNode</code><a class="ae mx" rel="noopener ugc nofollow" target="_blank" href="/integrating-texteffects-using-scenekit-in-ios-14c05e2c803e"/>。看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="dc0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除了创建<code class="fe mt mu mv mw b">textNode</code>(以及您计划将其变形到的节点)，您只需填充后者。代码如下:</p><pre class="kj kk kl km gt nf mw ng nh aw ni bi"><span id="7326" class="nj lv it mw b gy nk nl l nm nn">var vertex = cubeNode.geometry?.vertices(multiple: 3.0)<br/>var cvertex = vertex!</span><span id="6777" class="nj lv it mw b gy no nl l nm nn">for i in 0...7 {<br/>  vertex!.append(contentsOf: cvertex)<br/>}<br/>for i in 0...13 {<br/>  vertex!.append(SCNVector3(x: 1, y: 1, z: 0))<br/>}</span></pre><p id="62cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先提取顶点的代码如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="d48e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是等等，我还没说完。</p><h1 id="cd96" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">变形魔法</h1><p id="78e1" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我继续在这方面瞎折腾，发现我可以访问一个<code class="fe mt mu mv mw b">textNode </code>的顶点，如果我创建它，然后使用所说的<code class="fe mt mu mv mw b">textNode</code>的几何图形制作第二个节点。新节点看起来不错——也许不完美，但足够接近了。现在我可以直接从一个数字转换到另一个数字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f549594934eddaa65f4605306df5bc67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WqITcnA1DVwDs5vQUh5u6A.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在SceneKit下将一个数字直接变形为另一个数字</p></figure><p id="6786" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">没有火箭科学。我找出哪个图形有最多的顶点(在所示的例子中是8号),并填充所有其他图形，使它们都有相同的数字，这意味着我可以使用已经显示的变形代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="3544" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样的方法，我用来填补一个形状，使顶点的数量匹配，这一次我把重点放在数字上。</p><p id="f30f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p></div></div>    
</body>
</html>