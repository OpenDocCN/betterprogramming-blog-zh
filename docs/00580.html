<html>
<head>
<title>SwiftUI and the UIStackView Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI和UIStackView问题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-and-the-uistackview-problem-34381ffaa71f?source=collection_archive---------3-----------------------#2019-06-13">https://betterprogramming.pub/swiftui-and-the-uistackview-problem-34381ffaa71f?source=collection_archive---------3-----------------------#2019-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1c29ca36c32a4f5f2abdb2cd7c29c01b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPS0vf1VIMla1hnwPt-WSA.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="dce8" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">或者苹果如何在SwiftUI上犯了一个重大错误…</h2></div><p id="9d40" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我记得在2015年WWDC奥运会期间观看UIStackView的介绍时，我感到非常兴奋。我观看了自动布局会议的奥秘，变得更加兴奋。</p><p id="d2f3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后，您可以专注于编写代码和创建接口，而不必花费一半的时间来设置AutoLayout约束。它甚至可以自动管理视图的显示和隐藏——用动画！你可以<em class="lp">最终</em>让电脑做电脑擅长的事情，让它帮我管理我的布局！</p><p id="8a9d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后，你可以…等等。什么？仅在iOS 9中支持？！</p><p id="e452" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我的希望如此之高，最终还是破灭了。</p><h2 id="0a73" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">iOS开发者的第22条军规</h2><p id="8931" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">如果你是专业的iOS开发者，那么你和我一样清楚这个问题。毕竟很少有一个应用能写到<em class="lp">只有</em>支持当前版本的iOS。</p><p id="5c91" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">不是每个客户都会立即升级到最新最好的iOS版本。事实上，并不是每个客户<em class="lp">都能</em>升级到最新最好的版本。他们的手机根本不被支持。</p><p id="761c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">的确，正如在主题演讲中提到的那样，今天85%的用户都在iOS 12上。但那句话中的关键短语是“今天的基地”。它并没有立即发生。这需要时间。事实上，快九个月了。</p><p id="0b03" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所以，如果你<em class="lp">幸运的话，</em>你的店做“当前减一”，这意味着你写的代码支持当前版本的iOS，减一。在UIStackView的例子中，应该是iOS 9和iOS 8。</p><p id="d832" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">可惜当时我们做的是“当前减二”，也就是说要支持iOS 9、iOS 8、<em class="lp">和</em> iOS 7。见鬼，我们还在支持iOS 6！</p><p id="6f64" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">根据这个标准，我甚至需要整整两年的时间才能考虑使用我的新工具。</p><p id="5a17" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你知道这是怎么回事，不是吗？</p><h2 id="5c1b" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">SwiftUI简介</h2><p id="e6e5" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">在WWDC 19大会上，苹果推出了SwiftUI，我敢肯定不止一个开发者惊讶地张大了嘴巴。至少，我知道我的是这样。</p><p id="0d81" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">引用苹果公司的话，“SwiftUI是一种创新的、极其简单的方式，利用Swift的力量在所有苹果平台上构建用户界面。”</p><p id="733c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">SwiftUI使用声明性语法，因此您可以简单地说明您的用户界面应该做什么。</p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mp"><img src="../Images/3ce2a1d5a7dc11f17b534e978c6fe0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6zNONtBlvbXjeAS6Gk6Abw.png"/></div></div></figure><p id="73e9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">据说SwiftUI还通过提供自动界面布局、自动支持黑暗模式、自动支持可访问性、自动从右到左语言支持和国际化来节省开发人员的时间。几乎全自动。</p><p id="50d0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">SwiftUI甚至为Apple Watch、tvOS和macOS应用程序提供了原生框架，因此您编写的方法甚至大部分代码都可以跨平台。</p><p id="3e1f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">还有很多很多。我口水流得太多了，以至于在苹果公司的国情咨文演讲中，我不得不跑去拿了一条毛巾。</p><p id="51ea" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">然后，我又一次被这个小字打动了。iOS 13中支持。</p><p id="4ecd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们又看到了。</p><h2 id="e930" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">问题是</h2><p id="a623" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">我是说，我明白问题所在。SwiftUI主要基于仅在Swift 5.1语言和运行时支持的功能。特定于领域的语言，不透明的返回类型。属性包装。</p><p id="9f2a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">它还严重依赖于Combine，这是苹果新的反应式框架，也只在iOS 13上可用。</p><p id="c69e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">加上iOS 13增加的其他新功能，比如SF符号。</p><p id="d0a6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我是说，我<em class="lp">明白</em>这个问题…</p><p id="8914" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">…这并不意味着我喜欢它。或者我认为它应该存在。</p><h2 id="c90d" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">竞争</h2><p id="a961" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">苹果为iOS上的Swift开发者引入了一种新的范式。SwiftUI承诺让开发人员比以往走得更远、更快。</p><p id="c2b3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">要是他们能<em class="lp">使用那些工具就好了。</em></p><p id="c22b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">更糟糕的是，从很多方面来看，苹果在这一点上完全落后。</p><p id="5bb7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">许多开发人员放弃了特定于iOS的开发，转而支持跨平台工具，如React Native。</p><p id="eb14" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在声明式框架领域，Google宣布了Jetpack Compose，这是他们自己的向后兼容框架，用于在Kotlin中快速创建和开发Android应用程序。</p><p id="567a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其他人，包括相当多的Android开发者，已经接受了<a class="ae mo" href="https://flutter.dev/docs/resources/faq" rel="noopener ugc nofollow" target="_blank"> Flutter </a>，</p><p id="4010" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Flutter是谷歌的另一个声明性框架，允许开发者为Android和iOS创建应用。谷歌甚至承诺支持桌面和网络应用。</p><p id="c6ad" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我使用过Flutter，虽然我认为SwiftUI已经消除了Flutter的许多缺点并锉掉了粗糙的边缘，但事实仍然是我今天还可以使用它<em class="lp">。</em>我今天可以编写并支持iOS 12应用<em class="lp">。</em></p><p id="729b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">见鬼，Flutter支持iOS 8。没错。iOS 8。今天。</p><h2 id="d3ff" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">漂亮女人</h2><p id="7c48" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">还记得电影经典《风月俏佳人》中的一个场景吗？女主角看到一个装满耀眼珠宝的盒子……然后，当她伸手去拿时，盒子啪的一声关上了。</p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mu"><img src="../Images/0f142e26f9a2918003983cf110757744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MInl_ZAqMj0bP421Bz_dkw.jpeg"/></div></div></figure><p id="81a9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">感觉就是那样。</p><p id="34f5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">苹果向我们展示了一套闪亮的新工具……然后啪的一声合上了盒子。</p><h2 id="b2cf" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">向后兼容性</h2><p id="7044" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">听着，我知道在iOS 12上支持SwiftUI可能很难。支持iOS 11甚至是不可能的。有些事情它可能做不了或者支持不了。</p><p id="0c48" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">好吧。我明白了。但是有什么选择呢？</p><p id="c56f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">再等一年，或者两年，直到有足够多的开发者可以夕阳他们现有的代码，最终迁移到SwiftUI？再给谷歌一年时间来改善和巩固Flutter及其不断增长的跨平台成功故事？</p><p id="0f64" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在这个过程中，强化了这样一种观点:显然只有谷歌拥有支持之前版本iOS所需的技术诀窍和专业知识？在一个甚至不是他们自己的平台上？</p><p id="b0ce" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">或者徒劳地希望一些开发人员会决定孤注一掷，完全抛弃他们现有的所有代码，并在SwiftUI中完全重写他们当前的应用程序？</p><p id="db95" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所有这一切都给了苹果公司的其他开发者足够的时间来对他们最终能够做的所有酷的事情感到沮丧和幻灭……</p><p id="6bc3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">是的，我个人可能会在今天开始用SwiftUI编写一个新的应用程序，并计划在秋季发布。</p><p id="25e9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">然而，在工作中呢？我的团队可能要到明年年底才能开始使用SwiftUI。</p><p id="68b8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你的呢？2020年？后年2021年？甚至后来？？？</p><h2 id="14b6" class="lq lr je bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">完成块</h2><p id="610a" class="pw-post-body-paragraph kt ku je kv b kw mj kf ky kz mk ki lb lc ml le lf lg mm li lj lk mn lm ln lo im bi translated">鉴于上述情况，我认为苹果应该站出来，想办法让iOS开发者进入乐土。</p><p id="e001" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">创造一种方式，让我们能够在我们的<em class="lp">现有的</em>应用中使用和集成SwiftUI和Combine。让我们开始使用这些工具编写<em class="lp">新的</em>应用，同时继续支持那些尚未升级到最新最好的手机和操作系统的用户。</p><p id="0455" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在主题演讲期间(以及几乎每场会议期间)，有一句话被一遍又一遍地重复。“那就是[Combine | SwiftUI | Xcode 11]。我们等不及要看你用它做什么了！”</p><p id="3b86" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">可悲的是，苹果可能不得不这么做:等待。</p><p id="c304" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">因为尽管SwiftUI有潜力激励开发者，给他们创造未来应用的能力…</p><p id="d736" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这正是许多应用程序注定要存在的地方。</p><p id="de87" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在未来。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="8b6a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你呢？同意吗？不同意？迫不及待想用SwiftUI？切换到颤振？</p><p id="3123" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我真的很想知道，所以请在下面的评论中给我留言。</p><p id="d853" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">与此同时呢。</p><p id="c486" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">嘿，至少我们终于可以使用UIStackViews了…</p></div></div>    
</body>
</html>