<html>
<head>
<title>Creating Static Webpages Using GatsbyJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GatsbyJS创建静态网页</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-static-webpages-using-gatsbyjs-6884d46c653d?source=collection_archive---------10-----------------------#2021-03-03">https://betterprogramming.pub/creating-static-webpages-using-gatsbyjs-6884d46c653d?source=collection_archive---------10-----------------------#2021-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="76c7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">看看为什么服务器渲染的网站如此震撼</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/ef710e18c6df16f0397f85b3b47e7f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rnX0nlbNDAkelzWjpkFHhA.jpeg"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">照片由<a class="ae kw" href="https://unsplash.com/@zvessels55?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Zach Vessels </a>在<a class="ae kw" href="https://unsplash.com/s/photos/static?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="eb1d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在的网页加载速度很慢。他们需要获取所有JavaScript文件、所有图像，并调用许多不同的API。但是，当我们继续创建更复杂的网站时，我们的用户变得越来越不耐烦，几乎要求页面在几秒钟内加载。否则，他们会点击离开。</p><p id="da02" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kw" href="https://www.gatsbyjs.com/" rel="noopener ugc nofollow" target="_blank"> Gatsby </a>通过在服务器上预加载所有东西来关注性能。它创建服务器渲染的网页，网页上已经有了所有的内容。页面不需要调用任何API，这也提高了安全性。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="d207" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">为什么是静态？</h1><p id="cc98" class="pw-post-body-paragraph kx ky iq kz b la ms jr lc ld mt ju lf lg mu li lj lk mv lm ln lo mw lq lr ls ij bi translated">那么，为什么你会关心，为什么你会创建一个服务器渲染的静态网站呢？在某些情况下，您可能不想使用服务器呈现的页面。但是在你这样做的情况下，有几个使用它的理由:</p><ul class=""><li id="4252" class="mx my iq kz b la lb ld le lg mz lk na lo nb ls nc nd ne nf bi translated">性能——因为所有东西都加载到服务器上，所以服务器只需要提供一个样式HTML文件和所有必要的样式表和JavaScript文件。它不需要等待API调用，这大大加快了加载速度。</li><li id="dde8" class="mx my iq kz b la ng ld nh lg ni lk nj lo nk ls nc nd ne nf bi translated">安全性——在构建时呈现静态HTML意味着没有服务器和可访问的数据库。这将攻击发生的可能性降至几乎为零。</li><li id="fae6" class="mx my iq kz b la ng ld nh lg ni lk nj lo nk ls nc nd ne nf bi translated">盖茨比有很好的开发经验和很大的社区。</li><li id="63cc" class="mx my iq kz b la ng ld nh lg ni lk nj lo nk ls nc nd ne nf bi translated">静态和服务器渲染的页面生态系统正在慢慢成长。</li></ul><p id="d947" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">所以让我们自己来看看它是如何工作的。开始工作再容易不过了，这对我们有好处。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="2c4d" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">装置</h1><p id="e898" class="pw-post-body-paragraph kx ky iq kz b la ms jr lc ld mt ju lf lg mu li lj lk mv lm ln lo mw lq lr ls ij bi translated">我们将把Gatsby用于我们的服务器渲染网页。另一个很好的服务器端渲染选项是<a class="ae kw" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>。</p><p id="6b27" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Gatsby使用CLI工具进行安装。让我们使用NPM安装它:</p><pre class="kh ki kj kk gt nl nm nn no aw np bi"><span id="deea" class="nq mb iq nm b gy nr ns l nt nu">npm install -g gatsby-cli</span></pre><p id="97a2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Gatsby项目通常使用启动器启动。Gatsby在他们的GitHub上有很多各种项目的启动程序。“Hello-World”启动器是最简单的启动器，也是我们将使用的启动器。</p><pre class="kh ki kj kk gt nl nm nn no aw np bi"><span id="6855" class="nq mb iq nm b gy nr ns l nt nu">gatsby new project-title <a class="ae kw" href="https://github.com/gatsbyjs/gatsby-starter-hello-world" rel="noopener ugc nofollow" target="_blank">https://github.com/gatsbyjs/gatsby-starter-hello-world</a></span></pre><p id="8727" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">安装CLI工具后，我们可以使用<code class="fe nv nw nx nm b">gatsby new</code>创建一个新项目。然后，我们定义一个项目名，并向其中一个启动器添加一个GitHub链接。最后，我们可以通过从新的项目文件夹运行<code class="fe nv nw nx nm b">gatsby develop</code>来启动我们的服务器。然后，它将建立我们的静态页面，并提供给<code class="fe nv nw nx nm b">localhost:8000</code>。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="70ca" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">你的第一页</h1><p id="0238" class="pw-post-body-paragraph kx ky iq kz b la ms jr lc ld mt ju lf lg mu li lj lk mv lm ln lo mw lq lr ls ij bi translated">您可能已经查看了生成的文件。如果你看到了<code class="fe nv nw nx nm b">src/pages/index.js</code>，你就会看到我们正在使用一个基于<a class="ae kw" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>的库。事实上，最小的页面只有普通的React代码。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="76ff" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们导入React并导出一个功能组件。我们可以使用钩子和React的所有其他特性。让我们给页面添加一些样式和新元素。它的工作原理和React一样。如果您想添加不是页面的新组件，您可以将它们添加到<code class="fe nv nw nx nm b">src/components</code>文件夹中。</p><p id="baac" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果我们想添加一个新页面，我们可以用另一个名字创建一个新的JavaScript文件，比如<code class="fe nv nw nx nm b">about.js</code>。它将包含与主页大致相同的代码。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9d0a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们还添加了一些简单的样式作为示例。如果您浏览到<code class="fe nv nw nx nm b">localhost:8000/about</code>，您将看到新页面。如果它还没有加载，您可能需要重新启动服务器，虽然不应该这样。</p><p id="f748" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">对于链接，你需要使用<code class="fe nv nw nx nm b">Link</code>组件。这是Gatsby中处理导航的组件。</p><pre class="kh ki kj kk gt nl nm nn no aw np bi"><span id="9639" class="nq mb iq nm b gy nr ns l nt nu">import { Link } from "gatsby"<br/>...<br/><strong class="nm ir">&lt;Link to={`/about`}&gt;&lt;span&gt;About&lt;/span&gt;&lt;/Link&gt;</strong></span></pre><p id="fa44" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但是，尽管这些页面是静态的，并且在提供给用户时不依赖于API或其他数据，但在构建时它们<em class="oa">可以</em>依赖这些。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="7dd8" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">获取数据</h1><p id="904e" class="pw-post-body-paragraph kx ky iq kz b la ms jr lc ld mt ju lf lg mu li lj lk mv lm ln lo mw lq lr ls ij bi translated">Gatsby使用<a class="ae kw" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>查询从各种来源检索数据。GraphQL是一种由脸书开发的查询语言，专注于获取您需要的数据，而不需要所有非重要数据来减缓请求。</p><p id="3061" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最容易获得的数据是来自<code class="fe nv nw nx nm b">gatsby-config.js</code>的站点元数据。您可以添加和删除使用GraphQL检索的站点数据和配置。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="d8d4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们以标题的形式添加简单的站点元数据。但这可以是任何东西，比如字幕、按键和其他文本或对象。</p><p id="38c9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，我们将更新我们的About页面，使用GraphQL查询来使用这些元数据。数据将被检索并放入您可以从道具中检索的<code class="fe nv nw nx nm b">data</code>对象中。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="d154" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这只是Gatsby的冰山一角，只是静态web应用程序的开始。当你慢慢完善，了解更多关于Jamstack，Gatsby，或者Next.js的东西，你会发现它可以像你想象的那么强大。</p><p id="6ca1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Gatsby甚至提供了使用Markdown文件创建页面的可能性。这对于非技术人员可能负责内容的博客或其他网站来说是非常强大的。我写了另一篇关于这个话题的文章。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="da81" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">结论</h1><p id="777d" class="pw-post-body-paragraph kx ky iq kz b la ms jr lc ld mt ju lf lg mu li lj lk mv lm ln lo mw lq lr ls ij bi translated">服务器渲染网页正慢慢变得越来越广泛使用。Gatsby是第一批，现在正在被Next.js超越。在快速变化的网络开发环境中，我对它的未来有很好的预感。</p><p id="aeb0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">感谢您的阅读，祝您愉快。</p></div></div>    
</body>
</html>