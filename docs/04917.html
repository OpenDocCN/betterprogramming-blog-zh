<html>
<head>
<title>An Introduction to React Table</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应表简介</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-introduction-to-react-table-6ebd34d8059e?source=collection_archive---------0-----------------------#2020-05-22">https://betterprogramming.pub/an-introduction-to-react-table-6ebd34d8059e?source=collection_archive---------0-----------------------#2020-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9805" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用于轻量级、快速和可扩展数据网格的实用工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b0e7c9dbf3e2ed029e50173e138cae15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6kMSxzxvko2SNL8q1MjLw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@serjosoza?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> sergio souza </a>在<a class="ae ky" href="https://unsplash.com/s/photos/grid?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="57d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">表格也称为数据网格，是数据在行和列中的排列，或者可能是更复杂的结构。它是用户界面的重要组成部分。我已经使用Java Swing、ExtJs、Angular和React构建了表格。我还使用了许多第三方的表格。作为一名UI开发人员，表格组件是不可避免的。</p><p id="7d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建还是购买？它总是在成本和控制之间做出选择。当有一个有着良好记录的开源软件时，选择就变得显而易见了。</p><p id="1a5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我推荐使用<a class="ae ky" href="https://github.com/tannerlinsley/react-table" rel="noopener ugc nofollow" target="_blank"> React Table </a>，它为轻量级、快速和可扩展的数据网格提供了一个实用工具。这个项目从2016年10月开始，有几百个投稿人，上万个明星。它提供了一个定制的钩子<code class="fe lv lw lx ly b">useTable</code>，它实现了行排序、过滤、搜索、分页、行选择、无限滚动以及更多的功能。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1a4e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><strong class="ak">基本表</strong></h1><p id="48be" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">和往常一样，我们使用<a class="ae ky" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener"> Create React App </a>作为起点。首先，用命令<code class="fe lv lw lx ly b">npm i react-table</code>安装React Table。然后这个包成为<code class="fe lv lw lx ly b">package.json</code>中<code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/better-programming/package-jsons-dependencies-in-depth-a1f0637a3129" rel="noopener">dependencies</a></code>的一部分。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="9e51" class="nh mh it ly b gy ni nj l nk nl">"dependencies": {<br/>  "react-table": "^7.1.0"<br/>}</span></pre><p id="4e73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe lv lw lx ly b">src/index.css</code>改为最小表格样式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="56f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个基本表格，有五列十行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/741d28760979da3d530ec68c503f45ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2Rm7YAGCru79ouZHb7Mtw.png"/></div></div></figure><p id="83b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与任何表格类似，React表格由<a class="ae ky" href="https://react-table.tanstack.com/docs/api/useTable" rel="noopener ugc nofollow" target="_blank">列和</a>数据组成:</p><ul class=""><li id="160c" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">columns</code>是列的数组。列可以嵌套，充当标题组。此外，可以根据需要对列进行递归嵌套。</li><li id="a87a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">data</code>是要在表格上显示的行的数组。</li></ul><p id="1b8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们为<code class="fe lv lw lx ly b">columns</code>和<code class="fe lv lw lx ly b">data</code>设置了<code class="fe lv lw lx ly b">src/dataSource.js</code>。在下面的代码中，<code class="fe lv lw lx ly b">accessor</code>作为列键，用于定义行数据中的每一列。列ID由字符串访问器生成或由列定义提供。<code class="fe lv lw lx ly b">Header</code>是显示字符串或JSX的列。<code class="fe lv lw lx ly b">accessor</code>和<code class="fe lv lw lx ly b">Header</code>都可以是函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6bcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用我们的表格代码替换<code class="fe lv lw lx ly b">src/App.js</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6ede" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第12到15行是<code class="fe lv lw lx ly b">useTable</code>钩。构建一个表实例需要选项和插件。基本选项是列和数据。插件是可选的。</p><p id="2487" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第7到11行，我们使用了来自<code class="fe lv lw lx ly b">useTable</code>实例的许多道具:</p><ul class=""><li id="be72" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">getTableProps</code>是一个解析表包装器所需的任何道具的函数。内置的桌子道具是<code class="fe lv lw lx ly b">{role: “table”}</code>，可以定制。</li><li id="245a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">getTableBodyProps</code>是一个解析表体包装器需要的任何道具的函数。内置的桌子道具是<code class="fe lv lw lx ly b">{role: “rowgroup”}</code>，可以定制。</li><li id="454b" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">prepareRow</code>是必须在要显示的任何行上调用的函数。它负责延迟准备一行进行呈现。</li><li id="39e7" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><code class="fe lv lw lx ly b">headerGroups</code>和<code class="fe lv lw lx ly b">rows</code>是从列和数据派生的内部数据结构。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6fb580786fa189a3f764bbe82e288ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K5EYazqmDjmmpzkayhMV6g.png"/></div></div></figure><p id="86ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了来自<code class="fe lv lw lx ly b">useTable</code>实例的道具，我们获得了在第18到40行组成<code class="fe lv lw lx ly b">Table</code>的构件。<code class="fe lv lw lx ly b">headerGroups</code>、<code class="fe lv lw lx ly b">rows</code>、<code class="fe lv lw lx ly b">columns</code>是复杂的数据结构，包含了额外的使用功能，如<code class="fe lv lw lx ly b">getHeaderGroupProps</code>、<code class="fe lv lw lx ly b">getHeaderProps</code>、<code class="fe lv lw lx ly b">getRowProps</code>、<code class="fe lv lw lx ly b">getCellProps</code>。也可以叫<code class="fe lv lw lx ly b">column.render(‘Header’)</code>和<code class="fe lv lw lx ly b">cell.render(‘Cell’)</code>。</p><p id="2b71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是该表的翻译后的HTML定义。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/683fa1af1e888d9fe9d9d62ee83167cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wl7EfXFS3zZTDb95mv7TeQ.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="26e7" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><strong class="ak">具有分组页眉和页脚的表格</strong></h1><p id="911d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">表头可以分组，表尾也可以分组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/2c62c11c10df3260955533e8dd6a51a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXlI6UGNZQ1jB14ZycCYLg.png"/></div></div></figure><p id="eb59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过定义列来实现上表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="7619" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用嵌套列将<code class="fe lv lw lx ly b">firstName</code>和<code class="fe lv lw lx ly b">lastName</code>放入一个组<code class="fe lv lw lx ly b">Name</code>，将另外三列放入另一个组<code class="fe lv lw lx ly b">Information</code>。</p><p id="dc29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列组<code class="fe lv lw lx ly b">Name</code>有一个页脚呈现来计算总行数(第4行到第11行)。</p><p id="3510" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列<code class="fe lv lw lx ly b">firstName</code>使用分隔符作为页脚(第15行)。</p><p id="022f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列<code class="fe lv lw lx ly b">grade</code>有一个标题呈现，根据行值生成显示文本(第36到54行)。</p><p id="a5fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是调整后的<code class="fe lv lw lx ly b">src/App.js</code>使用的页眉和页脚:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c886" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第10行检索第41到49行中用于显示表尾的<code class="fe lv lw lx ly b">footerGroups</code>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6d55" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">具有行排序的表格</h1><p id="57df" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">行排序是基本的表功能。通常通过单击列标题对表格进行排序来实现。React Table的插件<code class="fe lv lw lx ly b"><a class="ae ky" href="https://react-table.tanstack.com/docs/api/useSortBy" rel="noopener ugc nofollow" target="_blank">useSortBy</a></code>，支持单列行排序，也支持多列行排序。</p><p id="8abc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下表按<code class="fe lv lw lx ly b">First Name</code>排序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/ad9632f4fa4f3497f15f9f9daa80d609.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HtRxVm54mGJxI4o2Gk5HQw.png"/></div></div></figure><p id="6296" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是修改后的<code class="fe lv lw lx ly b">src/App.js</code>执行行排序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="2299" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第18行提供插件<code class="fe lv lw lx ly b">useSortBy</code>。</p><p id="c8fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第27行使用了<code class="fe lv lw lx ly b">getSortByToggleProps()</code>，这是一个在切换排序方向时解析任何所需属性的函数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/690fc32ffed2975f028f822e5a261a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWIcRRfDfeIVfH9vjlubqw.png"/></div></div></figure><p id="a315" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第29到31行显示了排序列的降序或升序箭头。</p><p id="ba63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可排序的列<code class="fe lv lw lx ly b">firstName</code>具有以下属性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/d626de9359a1b72678d304ab3d980292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M7VwuLla-C2D9YRWTEhNKw.png"/></div></div></figure><p id="6ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击列标题将在升序、降序和不排序之间切换。如果您按住shift键并单击列标题，其他列的排序状态将被保留，新列将随后被排序。这导致了多重排序。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1fce" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">带过滤器的桌子</h1><p id="2b64" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">行过滤也是基本的表功能。它根据单个列或多个列的筛选条件来筛选表行。React Table的插件<code class="fe lv lw lx ly b"><a class="ae ky" href="https://react-table.tanstack.com/docs/api/useFilters" rel="noopener ugc nofollow" target="_blank">useFilters</a></code>，支持行排序，</p><p id="4fcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们已经使用过的同一个表，除了它被过滤为只保留从<code class="fe lv lw lx ly b">firstName</code>开始的行。当前计数是1。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/3e79fbbba4efbda4c4fe1af1ad285a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HSaEo1MmaxAhZK23zM82eQ.png"/></div></div></figure><p id="355d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于要由相关列过滤器过滤的行，需要提供过滤功能。下面是修改后的<code class="fe lv lw lx ly b">src/dataSource.js</code>中<code class="fe lv lw lx ly b">firstName</code>的列定义。它在第五行定义了一个过滤器来执行过滤任务。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="3d74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是修改后的<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="2c8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第26行，插件<code class="fe lv lw lx ly b">useFilters</code>被提供。</p><p id="7c7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第17到24行设置初始过滤器状态。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="3465" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">具有全局过滤的表格</h1><p id="dd21" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b"><a class="ae ky" href="https://react-table.tanstack.com/docs/api/useGlobalFilter" rel="noopener ugc nofollow" target="_blank">useGlobalFilter</a></code>是实现全局行过滤的钩子。它根据表格中的任何单元格值过滤表格行。也叫搜索。</p><p id="883c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这与我们使用的表格相同，只是它被过滤以保留任何单元格中带有文本“A”或“A”的行。目前的计数是7。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/957c69ba908fabd237f4f69098ed6837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yhs8olpFSIJfOG9E1NRrmA.png"/></div></div></figure><p id="b3b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是修改后的<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="4cce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第21行，插件<code class="fe lv lw lx ly b">useGlobalFilter</code>被提供。</p><p id="e693" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第17到19行设置了初始的<code class="fe lv lw lx ly b">globalFilter</code>。它是一个字符串或一个函数。</p><p id="9538" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">useGlobalFilter</code>可与<code class="fe lv lw lx ly b">useFilters</code>配合使用。这两个挂钩的顺序取决于性能特征。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a594" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">分页表</h1><p id="ebb7" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b"><a class="ae ky" href="https://react-table.tanstack.com/docs/api/usePagination" rel="noopener ugc nofollow" target="_blank">usePagination</a></code>是实现行分页的钩子，将大量数据拆分成页面，一次显示一页。</p><p id="63e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们的十行表格，如果我们将页面大小设为三行，下面的用户界面将显示第二页。这里，总数仍然是十。我们可以添加按钮来显示上一页和下一页。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/2c780df749ccf85ef83d14cae1f4c14e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QigqYIs04WsUve8ED_TGQg.png"/></div></div></figure><p id="8596" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是修改后的<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6c24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第22行，插件<code class="fe lv lw lx ly b">usePagination</code>被提供。</p><p id="f3a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第17到20行设置了初始分页参数。页面索引是从0开始的，因此第二页索引是1。</p><p id="090a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此处<code class="fe lv lw lx ly b">page</code>是从第11行检索的。它用于通过第39行显示可见的行。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9f4c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用服务器数据分页</h1><p id="d4e4" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">对于我们已经展示的所有特性——行排序、过滤、搜索和分页——可以设置一个手动标志。这意味着实际数据是从表外获取的。从用户界面上看，似乎table正在操作行排序、过滤、搜索、分页和各种操作，但实际上操作是在服务器端执行的。</p><p id="949a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们以分页为例，展示如何从外部源获取第二页数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/2c780df749ccf85ef83d14cae1f4c14e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QigqYIs04WsUve8ED_TGQg.png"/></div></div></figure><p id="78cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要修改<code class="fe lv lw lx ly b">src/dataSource.js</code>中的<code class="fe lv lw lx ly b">Name</code>列。第四行从外部<code class="fe lv lw lx ly b">pageCount</code>获得总计数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0366" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是修改后的<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="8832" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第23行将<code class="fe lv lw lx ly b">manualPagination</code>设置为真，第24行基于外部源提供<code class="fe lv lw lx ly b">pageCount</code>。</p><p id="3983" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第29到31行是获取外部数据的模拟。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1781" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">具有行选择的表格</h1><p id="5dae" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b"><a class="ae ky" href="https://react-table.tanstack.com/docs/api/useRowSelect" rel="noopener ugc nofollow" target="_blank">useRowSelect</a></code>是实现行选择的钩子，切换行选择。通常，空框表示未选择行，复选标记表示选择了行。表格通常在标题处有一个指示，显示是否所有行都被选中，如果是，标题会显示一个复选标记。如果未选择每一行，标题将显示一个空复选框。如果选择了一些行，则标题会显示一个表示不确定状态的破折号。因此，我们需要一个复选框来表示三种状态:未选中、选中和不确定。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/25cc6439e5ddd6972a1afed1bc8a0072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lav-irA42QK0dafFb8mgeg.png"/></div></div></figure><p id="e04a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在HTML中，<code class="fe lv lw lx ly b">&lt;input type=”checkbox”&gt;</code>只能设置为选中和未选中状态。但是不确定属性可以用JavaScript: <code class="fe lv lw lx ly b">checkbox.indeterminate = true</code>来设置。</p><p id="f242" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们为React <code class="fe lv lw lx ly b">IndeterminateCheckbox</code>组件创建<code class="fe lv lw lx ly b">src/IndeterminateCheckbox.js</code>。它通过两个道具支持三种状态:<code class="fe lv lw lx ly b">checked</code>和<code class="fe lv lw lx ly b">indeterminate</code>。<code class="fe lv lw lx ly b">indeterminate</code>是通过一个<code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/better-programming/most-things-you-want-to-know-about-react-refs-29901ebf28c6" rel="noopener">forwardRef</a></code>设置的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="9fb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们准备为我们的表实现行选择:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/86e11135731f1c28d618f1d00907caac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PPhC_3zxfl7YLLx4Alud9g.png"/></div></div></figure><p id="4b61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<code class="fe lv lw lx ly b">src/dataSource.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="fd3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="ad1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第19行提供了插件<code class="fe lv lw lx ly b">usePagination</code>。</p><p id="1be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第20到33行为表格标题和行设置了<code class="fe lv lw lx ly b">IndeterminateCheckbox</code>。因为React表允许子行，所以行也使用<code class="fe lv lw lx ly b">IndeterminateCheckbox</code>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="af33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你运行代码，发现它不工作。发生了什么事？</p><p id="33fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，<code class="fe lv lw lx ly b"><a class="ae ky" href="https://github.com/tannerlinsley/react-table/issues/2120" rel="noopener ugc nofollow" target="_blank">useRowSelect</a></code> <a class="ae ky" href="https://github.com/tannerlinsley/react-table/issues/2120" rel="noopener ugc nofollow" target="_blank">不支持</a> <code class="fe lv lw lx ly b"><a class="ae ky" href="https://github.com/tannerlinsley/react-table/issues/2120" rel="noopener ugc nofollow" target="_blank">React.StrictMode</a></code>。您需要从<code class="fe lv lw lx ly b">src/index.js</code>中删除严格模式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f314" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">无限滚动的表格</h1><p id="7e68" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">无限滚动显示滚动条，而不是分页表。用户可以向下滚动，直到到达末尾。这不完全是无限滚动，但<code class="fe lv lw lx ly b"><a class="ae ky" href="https://react-table.tanstack.com/docs/api/useBlockLayout" rel="noopener ugc nofollow" target="_blank">useBlockLayout</a></code>可以用来实现类似的东西。它将标题和单元格显示为<code class="fe lv lw lx ly b">inline-block</code> <code class="fe lv lw lx ly b">div</code>秒。列宽是固定的，默认值为150像素。</p><p id="0a01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然只有十行，但是一个固定高度的表格可以上下滚动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/4a116a80db9710ac5ede41ad0ab88ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4nRkaAH3hVxRT9d_osydfQ.png"/></div></div></figure><p id="c01f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">src/dataSource.js</code>没有变化。</p><p id="2fbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是修改后的<code class="fe lv lw lx ly b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="33f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第14行，检索<code class="fe lv lw lx ly b">totalColumnsWidth</code>以通过第63行设置主体宽度。</p><p id="40e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第20行，插件<code class="fe lv lw lx ly b">useBlockLayout</code>被提供。</p><p id="c91d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第23到45行是行的呈现函数。</p><p id="90df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从下面的Inspect窗口中，我们可以看到每一行和每一个单元格的样式。每个行定义都是HTML格式的，不管它是否可见。只呈现部分行的无限滚动并不真实。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/7471ddf954e5d336649dc05c8c8b74bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cH3PfenxtG720ix4fjxATg.png"/></div></div></figure><p id="1a1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第59到66行显示了在<code class="fe lv lw lx ly b"><a class="ae ky" href="https://github.com/bvaughn/react-window" rel="noopener ugc nofollow" target="_blank">react-window</a></code>中定义的<code class="fe lv lw lx ly b">FixedSizedList</code>。它将高度设置为100像素，每行的高度设置为20像素。因此，有五个可见的行。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f363" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="1d3d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">React Table提供了很多插件，可以组合使用。为了简单起见，我们的每个例子只使用一个插件。这些例子比React Table提供的例子简单，因为我们的目的是演示每个插件是如何工作的。</p><p id="1271" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让事情变得更有趣，你还可以在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/understanding-the-ant-design-system-a-ui-design-for-enterprises-39afdb188b06">蚂蚁设计系统</a>中查看<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/an-introduction-to-ant-tables-for-javascript-developers-c420754c9fe7">蚂蚁表</a>。</p><p id="9209" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。你可以在这里看到我的其他媒体出版物<a class="ae ky" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener"/>。</p></div></div>    
</body>
</html>