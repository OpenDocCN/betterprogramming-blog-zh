<html>
<head>
<title>Update Your GitHub Profile Readme With Your Latest Medium Article Automatically Using Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Go自动用您最新的媒体文章更新您的GitHub个人资料自述文件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/update-your-github-profile-readme-with-you-latest-medium-article-automatically-using-go-e6d303109164?source=collection_archive---------17-----------------------#2020-10-01">https://betterprogramming.pub/update-your-github-profile-readme-with-you-latest-medium-article-automatically-using-go-e6d303109164?source=collection_archive---------17-----------------------#2020-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="30ba" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">自动化小事情的一步一步的指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6bf9eb43098ec0e1b3414a47084a0940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Gedrd7f2rG9t6mph"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Joshua Aragon 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="d353" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的GitHub简介Readme已经取得了很大的进步，但是还缺少一些东西:当然是您最新的Medium文章。在本教程中，我将带您了解如何使用<a class="ae kv" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Go </a>脚本进行设置。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="965d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">要求</h1><p id="871d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">您需要在您的计算机上安装Go版本1.x。如果你没有任何围棋知识，我建议你看看布莱恩·迪克伊岑的这篇文章。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c1a5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">入门指南</h1><p id="ec4f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们将创建一个脚本来获取我们最新的媒体文章，并将它们写出到一个减价文件中。首先，我们需要一个数据源。Medium提供了一个RSS提要，这非常适合我们的用例。我们可以使用下面的URL获取此提要。请务必将用户名改为您的用户名:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="159a" class="nd ma iq mz b gy ne nf l ng nh">https://medium.com/feed/@koenverburg</span></pre><p id="f9b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个文件夹或通过终端访问GitHub profile Readme存储库。</p><p id="cc1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们通过运行以下命令来初始化Go模块:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="eacb" class="nd ma iq mz b gy ne nf l ng nh">go mod init medium</span></pre><p id="6526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个名为<code class="fe ni nj nk mz b">main.go</code>的新文件，并粘贴以下样板代码:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="8dc9" class="nd ma iq mz b gy ne nf l ng nh">package main</span><span id="1d0c" class="nd ma iq mz b gy nl nf l ng nh">func main() {</span><span id="9808" class="nd ma iq mz b gy nl nf l ng nh">}</span></pre><p id="737e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们从启动请求开始。将以下代码粘贴到main函数中。不要忘记更改用户名:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="afc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第一行中，我们从Medium向RSS提要发出HTTP <code class="fe ni nj nk mz b">get</code>请求。<code class="fe ni nj nk mz b">get</code>函数返回一个元组、响应和<code class="fe ni nj nk mz b">err</code>。最好先检查错误，然后继续响应。</p><p id="8188" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在错误检查之后，我们推迟了<code class="fe ni nj nk mz b">response.Body.Close()</code>。这样，当我们完成时，客户端将被关闭。然后我们把<code class="fe ni nj nk mz b">response.Body</code>给<code class="fe ni nj nk mz b">ioutil.ReadAll</code>。这是因为主体是一个字节流，我们想要读取它的全部。这也将返回一个元组，我们将首先在其上检查任何错误。然后我们将继续处理主体，并使用<code class="fe ni nj nk mz b">string</code>函数将其打印到字符串中。</p><p id="9cdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行该命令将得到以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/ca994a0e196c95fe4da4b54383ff64f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKvL459Jxea4JYtfUAoVUw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">XML输出的屏幕截图。</p></figure><p id="8e0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看URL提要的输出，我们看到了XML。我们必须把它转换成结构，这样我们就可以使用Go编程语言的强类型特性。</p><p id="70c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在名为<code class="fe ni nj nk mz b">structs</code>的文件夹中创建一个名为<code class="fe ni nj nk mz b">rss.go</code>的新文件，并粘贴以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0237" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到主函数。让我们删除这一行，因为我们不需要它:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="1c14" class="nd ma iq mz b gy ne nf l ng nh">fmt.Println(string(body))</span></pre><p id="ccd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并替换为以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="5ea3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们使用XML包，我们将根据<code class="fe ni nj nk mz b">rss</code>变量解组主体，变量是<code class="fe ni nj nk mz b">Rss</code>结构类型。封送处理对你来说可能是个新名词。将其视为从一种数据格式到另一种数据格式的转换操作。在维基百科上了解更多关于这个话题的信息。</p><p id="ae6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一切顺利，将会输出以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/cbda4deaf26d61ccb70a04672caec146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wMlQo7ceyBTQAjAhKVij7g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">RSS源标题的屏幕截图。</p></figure><p id="c51b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，现在我们有了所有的强类型，让我们使用下面的循环来获取最新的文章:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="f336" class="nd ma iq mz b gy ne nf l ng nh">for i := 0; i &lt; 3; i++ {<br/>	fmt.Println(rss.Channel.Item[i].Title)<br/>}</span></pre><p id="5207" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将输出以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/8ef19b9426c15d91ec5afa63d9d2ccac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MsmslNgFFI1DkA2nLR2U_w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输出截图:循环浏览最新文章</p></figure><p id="efe7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一点上，我们有我们的最新文章，但它不是在降价格式。让我们把它改成markdown。将上述<code class="fe ni nj nk mz b">for</code>回路替换为以下回路:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="f366" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们创建一个字符串数组类型的变量<code class="fe ni nj nk mz b">items</code>。然后我们进入循环，使用下面的格式创建格式化字符串:<code class="fe ni nj nk mz b">[&lt;text&gt;](&lt;link&gt;)</code>。这是一个HTML中锚标签的标记表示。我们在循环的每次迭代中添加标题和链接。</p><p id="3e9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出将如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/948269b05e0a3703ee03891fe2825b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VuSoQ0odSma6WhkQOpBx4Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输出截图:markdown格式</p></figure><p id="62bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把内容写到一个markdown文件中，这样我们就可以看到整个脚本的运行。将这部分代码粘贴到我们刚刚创建的循环下面:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0c88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们正在创建一个新文件。你注意到元组和错误检查的模式了吗？如果是这样，很好！现在到了有趣的部分:将我们的模板与文件合并。我们使用<code class="fe ni nj nk mz b">io.WriteString</code>来做到这一点。这个方法也将返回一个tuple，但是在这里，我们不关心输出，所以我们将变量<code class="fe ni nj nk mz b">_</code>赋给它。这意味着它没有被使用。</p><p id="d595" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您运行此程序，您将拥有一个包含您最新文章的新自述文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/066292d9a85f527dfea3037dc33dd8ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Tv18H5pD2DUo6sxfAKa6A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">VScode的屏幕截图:左侧为降价预览，右侧为原始降价</p></figure><p id="00ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。我们已经完成了脚本部分。现在是自动化部分。</p><p id="8d00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个<code class="fe ni nj nk mz b">.github/workflows</code>文件夹和一个<code class="fe ni nj nk mz b">cron.yml</code>。这就是奇迹发生的地方。该脚本将按一定的时间间隔运行。它将检查您的代码，运行<code class="fe ni nj nk mz b">main.go</code>文件，并将更改提交给repo！</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="6e78" class="nd ma iq mz b gy ne nf l ng nh">name: cron </span><span id="2213" class="nd ma iq mz b gy nl nf l ng nh">on:<br/>  push:<br/>    branches:<br/>      - master<br/>  schedule:<br/>    - cron: "5 5 * * *"</span><span id="d346" class="nd ma iq mz b gy nl nf l ng nh">jobs:<br/>  build:<br/>    runs-on: ubuntu-latest</span><span id="af09" class="nd ma iq mz b gy nl nf l ng nh">    steps:<br/>      - name: Checkout<br/>        uses: actions/checkout@master<br/>        with:<br/>          fetch-depth: 1</span><span id="affa" class="nd ma iq mz b gy nl nf l ng nh">      - name: Generate<br/>        run: |<br/>          cd ${GITHUB_WORKSPACE}/<br/>          go run main.go</span><span id="b1ba" class="nd ma iq mz b gy nl nf l ng nh">      - name: Commit<br/>        run: |<br/>          git config user.name "${GITHUB_ACTOR}"<br/>          git config user.email "${GITHUB_ACTOR}@users.noreply.github.com"<br/>          git add .<br/>          git commit -am "feat(auto generate): Update content"<br/>          git push --all -f &lt;https://$&gt;{{ secrets.GITHUB_TOKEN }}@github.com/${GITHUB_REPOSITORY}.git</span></pre><p id="6578" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你知道如何使用Go获得你的最新文章，并以完全自动化的方式将它们写出到markdown文件中。最后一步是你把这个推上GitHub，看看奇迹发生了。祝你好运！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4819" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="098b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">感谢您的阅读。在这篇文章中，我谈到了:</p><ul class=""><li id="3d4c" class="nt nu iq ky b kz la lc ld lf nv lj nw ln nx lr ny nz oa ob bi translated"><a class="ae kv" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank">戈朗</a></li><li id="c972" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated"><a class="ae kv" href="https://golang.org/doc/" rel="noopener ugc nofollow" target="_blank"> Go文档</a></li><li id="80de" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated"><a class="ae kv" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> GitHub动作</a></li><li id="8d5f" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated"><a class="ae kv" href="https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-your-github-profile/managing-your-profile-readme" rel="noopener ugc nofollow" target="_blank"> GitHub简介自述文件</a></li><li id="1888" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated"><a class="ae kv" href="https://github.com/koenverburg/koenverburg" rel="noopener ugc nofollow" target="_blank">我的GitHub简介自述文件</a></li></ul></div></div>    
</body>
</html>