<html>
<head>
<title>How Software Deployment Tools Have Changed in the Past 20 Years</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">软件部署工具在过去20年中发生了怎样的变化</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-software-deployment-tools-have-changed-in-the-past-20-years-7ac24723704a?source=collection_archive---------13-----------------------#2022-08-24">https://betterprogramming.pub/how-software-deployment-tools-have-changed-in-the-past-20-years-7ac24723704a?source=collection_archive---------13-----------------------#2022-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9b92" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在过去的20年里，我使用了各种各样的软件部署工具。从FTP到使用聊天机器人在Kubernetes上部署Docker容器，我想我已经看到了大部分。在本帖中，我将带你踏上从2001年到2022年的web软件部署工具之旅，让我们开始吧！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ef72dec4014ccb278fcfe2b1a97d0b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DmpdMuXVUVcNekBI.jpg"/></div></div></figure><p id="76dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">什么是软件部署工具？</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="e16f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在过去的8-10年中，软件部署工具也作为部署自动化工具得到了普及。</p><blockquote class="lu lv lw"><p id="acc2" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">基本上，任何帮助您获得软件的第一个版本或软件用户可用的后续更改的软件都是软件部署工具。</p></blockquote><p id="3054" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，我将重点介绍可以部署任何形式的web软件的部署软件，无论是网站还是web应用程序。我不会讨论桌面软件或者像Windows 98这样的操作系统是如何在CD上获得的。</p><p id="b960" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我试着解释一下什么是软件部署工具，什么是触发层。软件部署工具是用来部署一个软件(主要是web软件)的工具。例如，Capistrano、Fabric、Docker run、Kubectl apply等。这些工具运行的触发层是像Jenkins、Bamboo、Github actions这样的软件。让我们把事情搞清楚。我想在下面清楚地说明这种区别:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/61350d9491bfc91965514103622c7c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J17BaG1edvNjloUy.jpg"/></div></div></figure><p id="ae47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如你所见，我们将讨论上图中的黄色部分，而不是绿色部分。那么，我是如何开始将一个网站部署到一个免费的网络主机上的呢？在21世纪初，它还不是“云”。我认为<a class="ae mb" href="https://geshan.com.np/blog/2015/10/4-pillars-of-a-solid-software-application-and-tools-to-support-it/#automated-deployment" rel="noopener ugc nofollow" target="_blank">自动化部署</a>是坚实的软件开发的支柱。</p><p id="9071" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我不会提到基础设施供应和基础设施作为代码工具，如Ansible、Puppet、Salt和Terraform。它们属于不用于web软件部署自动化的另一类工具。</p><h1 id="1007" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">我的网络之旅是什么时候开始的？</h1><p id="d382" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">回到1999-2000年，那时人们还没有电子邮件地址，我在免费的网站主机上运行网站。那是<a class="ae mb" href="https://en.wikipedia.org/wiki/Dial-up_Internet_access" rel="noopener ugc nofollow" target="_blank">拨号上网</a>的时代。</p><blockquote class="lu lv lw"><p id="4e12" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">正是33.6k和56k <a class="ae mb" href="https://en.wikipedia.org/wiki/Modem" rel="noopener ugc nofollow" target="_blank">调制解调器</a>的时代，使得<a class="ae mb" href="https://www.youtube.com/watch?v=gsNaR6FRuO0" rel="noopener ugc nofollow" target="_blank">这种</a>声音使用电话线连接互联网。如今拥有5G手机的年轻人永远不会知道我们当时拥有的互联网的价值。</p></blockquote><p id="d447" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我查看了Archive.org T2，找到了一个我在2000年左右部署的网站。当然，我不会因为分享这个网站而感到尴尬，但我可以告诉你，它有<a class="ae mb" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/marquee" rel="noopener ugc nofollow" target="_blank">字幕标签</a>、gif、几个<a class="ae mb" href="https://en.wikipedia.org/wiki/Java_applet" rel="noopener ugc nofollow" target="_blank"> Java小程序</a>和页面计数器。以下是上述匿名网站<a class="ae mb" href="https://archive.org/" rel="noopener ugc nofollow" target="_blank">archive.org</a>的截图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d76a04fda2b128243af2b6b8ed01fba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K_egyRSxQh3C3Ec6.jpg"/></div></div></figure><p id="d1b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，这是一个包含一些HTML、JavaScript和CSS的静态站点。它是从web界面或可靠的文件传输协议(FTP)客户端部署的。</p><h1 id="af19" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">第一个软件部署工具—2000年至2008年的web界面和FTP</h1><p id="83f2" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">我第一次接触部署工具是一个叫做文件管理器的web界面。那时，我有一堆HTML文件，它们带有不太好的CSS和Javascript，在我们的奔腾或II桌面上运行。因为那台机器更像是一台家用机器，而我是它的用户之一。</p><blockquote class="lu lv lw"><p id="835a" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">无论如何，21年前我像一个脚本小子一样建立了这个令人惊叹的网站，并想把它放到网上。</p></blockquote><p id="33f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在33.6 kbps连接上的最佳赌注是用名为<code class="fe mz na nb nc b">File Manager</code>的网络界面上传。当时的文件管理器如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/183e52d43eda0637ca1559d7f09e36f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h7JNgmLk65P5YEVL.jpg"/></div></div></figure><p id="23f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意“Internet Explorer ”,这是当时唯一流行的浏览器。在使用文件管理器几个月后，我偶然发现了文件传输协议(FTP)软件。</p><p id="0796" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">FTP曾经是一个先进的东西。</p><blockquote class="lu lv lw"><p id="c44a" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">我在2000年到2008年间使用过Core FTP、Cute FTP和FileZilla FTP客户端。如果你问我FTP是不是自动化部署，我的回答是“不是”。</p></blockquote><p id="5f33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像往常一样，当我不得不部署更改时，我会谨慎行事，将几乎整个网站复制一遍。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/41a2a16eef22f1fadeb3440d7e3ec0c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xP-csat89qCaFG76.jpg"/></div></div></figure><p id="ce84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我清楚地记得在我2007年实习的第一份工作中，我使用fireFTP和Filezilla将Drupal文件复制到服务器上。即使在我2008年的第二份工作中，我也曾使用SVN和FileZilla为我当时开发的一个web应用程序将PHP文件复制到服务器上。</p><blockquote class="lu lv lw"><p id="ac4a" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">大概在2008年底，我/我们在YIPL开始使用Git的时候。这是SVN所需要的改变，Git仍然令人惊叹。</p></blockquote><p id="9cee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果当时存在的话，我应该谷歌一下，找到类似于<a class="ae mb" href="https://github.com/git-ftp/git-ftp" rel="noopener ugc nofollow" target="_blank"> Git FTP </a>的东西。这就把我们带到了软件部署工具的下一个阶段。</p><h1 id="ee86" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">SSH、Git pull作为软件部署工具2008–2011</h1><p id="855a" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">因此，大约在2008年第四季度，我加入了我们共同创立的公司<a class="ae mb" href="https://younginnovations.com.np/" rel="noopener ugc nofollow" target="_blank">青年创新公司</a>。那时我们是Git的超级早期采用者。记住，Github始于2008年，直到2010年才流行起来。在2008-2010年，我们使用<a class="ae mb" href="https://wiki.archlinux.org/index.php/gitosis" rel="noopener ugc nofollow" target="_blank"> Gitosis </a>在我们的团队中用SSH公钥配置Git访问。所以，我很清楚Git和Github的区别。</p><p id="30bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们曾经通过SSH连接到我们的服务器，我们的部署流程更像这样:</p><ol class=""><li id="eac2" class="nd ne iq kt b ku kv kx ky la nf le ng li nh lm ni nj nk nl bi translated">使用SSH密钥在没有密码的情况下进入生产服务器</li><li id="5be1" class="nd ne iq kt b ku nm kx nn la no le np li nq lm ni nj nk nl bi translated">转到正确的文件夹</li><li id="7eff" class="nd ne iq kt b ku nm kx nn la no le np li nq lm ni nj nk nl bi translated">确保master上有最新的更改，然后在网站文件夹上执行<code class="fe mz na nb nc b">git pull origin master</code></li><li id="affe" class="nd ne iq kt b ku nm kx nn la no le np li nq lm ni nj nk nl bi translated">根据需要重启服务器(就我记忆所及，它曾经是Apache，因为我们那时主要做PHP开发)。</li></ol><p id="e711" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这工作得很好，我要说它比使用FTP工作得好得多，因为你不需要记住哪些文件要复制，这个过程基本上没问题，除非你面临git冲突之类的东西。回顾过去，我会编写一个<a class="ae mb" href="http://www.fabfile.org/" rel="noopener ugc nofollow" target="_blank"> Fabric </a>脚本，作为一个原子任务来完成，如果有任何失败，它就会停止部署。</p><blockquote class="lu lv lw"><p id="b49c" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">看起来很多其他开发者甚至在2018年也在做这个git pull的事情，打开了。git <a class="ae mb" href="https://www.zdnet.com/article/almost-400k-websites-risk-hacking-data-theft-via-open-git-repos-researcher-warns/" rel="noopener ugc nofollow" target="_blank">安全漏洞</a>。</p></blockquote><p id="0ccf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">无论如何，这是我们一直部署到2010年的方法，但我不建议任何人在2021年就这么做。</p><h1 id="e4f5" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">你好，卡皮斯特拉诺，大约2012年至2015年</h1><p id="30d9" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">2012年，我搬到了一个新的国家，加入了阿联酋的一家时尚电子商务初创公司— <a class="ae mb" href="https://en-ae.namshi.com/" rel="noopener ugc nofollow" target="_blank"> Namshi </a>。我第一次看到一个合适的自动化部署工具在运行。它不是Capistrano，它是一个定制的CLI工具，有选择的步骤，git分支或标记可以实时部署。后来，我们在2013年将<a class="ae mb" href="https://capistranorb.com/" rel="noopener ugc nofollow" target="_blank"> Capistrano </a>用于我们在Symfony2中构建的<a class="ae mb" href="https://en.wikipedia.org/wiki/Service-oriented_architecture" rel="noopener ugc nofollow" target="_blank">面向服务架构</a>“SOA”组件之一。老实说，与FTP或登录到服务器并运行<code class="fe mz na nb nc b">git pull</code>甚至这个定制工具相比，我真的很喜欢我们用Capistrano部署的方式。这是一个单一命令部署，没有选择，没有中断，可以原子部署到任何环境转移或生产。</p><p id="5edc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">卡皮斯特拉诺固执己见，但它有<a class="ae mb" href="https://github.com/capistrano/capistrano/blob/master/README.md#features" rel="noopener ugc nofollow" target="_blank">的特征</a>排序。</p><blockquote class="lu lv lw"><p id="5409" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">新版本建立在一个新的文件夹中，当它准备好获得流量时，符号链接将指向最新版本。之后，服务器将被重新加载/重启。如此简单却如此有效。</p></blockquote><p id="da6e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以将git分支或标签部署到多个阶段；主要是分期和直播。这是项目根目录上的一个命令，等待几分钟，然后就完成了。回滚很快，所有ACL都由SSH密钥管理。</p><p id="6ba7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">即使现在，如果您有1到10台虚拟机，并且想要部署一个web应用程序，我也会说Capistrano是您的最佳选择。Ruby和PHP还有其他风格，但Capistrano引入的基本部署思想保持不变。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c95ef36ae46b913c9ec28dda6525c965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AHutR17FgPK_-FrT.jpg"/></div></div></figure><p id="dd87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Capistrano是安全部署web软件的先驱，最大限度地减少或消除了停机时间。许多其他软件部署工具也追随了Capistrano的脚步，如<a class="ae mb" href="https://github.com/mina-deploy/mina" rel="noopener ugc nofollow" target="_blank"> Mina </a>、<a class="ae mb" href="https://deployer.org/" rel="noopener ugc nofollow" target="_blank"> deployer </a>等。另一个不那么固执己见的部署工具是<a class="ae mb" href="http://www.fabfile.org/" rel="noopener ugc nofollow" target="_blank"> Fabric </a>。它是用Python写的。此时，我们已经为我们构建的应用编写了测试，并且在Travis上有一个良好的持续集成(CI)过程。<a class="ae mb" href="https://geshan.com.np/blog/2017/08/adopt-a-painless-continuous-delivery-culture/" rel="noopener ugc nofollow" target="_blank">连续输送</a> (CD)部分主要是在盖帽展开时完成的。</p><p id="3ae1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们愉快地使用了Capistrano 3-4年，然后在2015年加入了Docker。它颠覆了人们对web软件开发和部署的看法。我还是会说，最好的软件部署工具是符合你需求的<a class="ae mb" href="https://geshan.com.np/blog/2015/08/the-best-automated-deployment-tool-the-one-that-fits-your-needs/" rel="noopener ugc nofollow" target="_blank"/>。大约在2015年，我写了几个fabric脚本来自动部署CMS，比如用于YIPL的Drupal。这对他们也很有帮助。然后我们都偶然发现了<a class="ae mb" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。</p><h1 id="76cc" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">Docker是2016年的发展方向</h1><p id="da97" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">Docker是一个范式的转变，我们可能是中东和北非地区第一批使用它的团队之一。</p><p id="0360" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了清楚起见，Docker本身并不是一个自动化部署工具。它是一个软件打包软件，可以让您在从开发到生产的所有环境中一致地运行您的软件，从而创建一个“通用”奇偶校验。反过来，由于构建和部署/运行过程是分离的，这也使得软件部署更加容易。了解更多关于为什么你应该<a class="ae mb" href="https://geshan.com.np/blog/2018/10/why-use-docker-3-reasons-from-a-development-perspective/" rel="noopener ugc nofollow" target="_blank">在开发中使用Docker</a>以及在过去的几年里它如何<a class="ae mb" href="https://geshan.com.np/blog/2018/11/4-ways-docker-changed-the-way-software-engineers-work-in-past-half-decade/" rel="noopener ugc nofollow" target="_blank">改变了软件工程</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/12966ebd41d03ac894cc672c204dfffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8ZKfuJ7MpE_6seFm.jpg"/></div></div></figure><p id="66fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我记得我们在Docker上运行的应用不到5个。我不清楚具体情况，但我想我们是在做码头拉货和码头跑货，因为少于10个集装箱。</p><p id="97d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请记住，向您的工作流添加容器确实会在CI/CD流程中添加更多的层和复杂性。将需要有一个像DockerHub，AWS ECR，或谷歌容器注册的容器注册。在部署和运行映像之前，需要一个构建器来构建映像。过一段时间，当运行的容器数量增加时，你将需要一个像Kubernetes这样的容器编排器。</p><p id="e338" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在推进部署触发器方面，我们在Hipchat/Slack上用Hubot编写了一个聊天机器人，它可以在AWS虚拟机上运行<code class="fe mz na nb nc b">cap deploy</code>或<code class="fe mz na nb nc b">kubectl apply</code>或<code class="fe mz na nb nc b">helm install</code>。这使得部署变得更加容易。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b20c8f8dd33e99ee8ea1b87b82dd9f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*X6BbJu0hZN1fUFUk.jpg"/></div></div></figure><p id="5933" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">后来我们开始全面使用Kubernetes。</p><h1 id="aa94" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">现在是2016-2021年</h1><p id="08c9" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">我记得2016年是一个转折点。我们的高级DevOps工程师做了一次内部谈话，向技术团队介绍Kubernetes。除了库伯内特斯的力量之外，它没有什么意义。</p><p id="6708" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在AWS上，我相信Kubernetes当时是由<a class="ae mb" href="https://github.com/kubernetes/kops" rel="noopener ugc nofollow" target="_blank"> Kops </a>管理的，没有<a class="ae mb" href="https://aws.amazon.com/eks/" rel="noopener ugc nofollow" target="_blank"> AWS EKS </a>，我想GKE最近才开始。我们用Kubernetes工件部署应用程序。我们很快转移到Helm来部署我们所有的应用程序。即使是用Capistrano和其他遗留工具部署的旧应用程序也已经用Kubernetes进行了dockerized和部署。我们也在我们的开发机器上使用Minikube。</p><p id="07cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">部署过程非常顺利。将更改推送到git，等待docker构建通过，并使用聊天机器人进行部署。我们有<a class="ae mb" href="https://github.com/namshi/roger" rel="noopener ugc nofollow" target="_blank"> Roger </a>我们自己的开源docker builder，后来我们在Google cloud build上构建docker映像，并使用<a class="ae mb" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank"> Helm </a>和Helm charts使用<code class="fe mz na nb nc b">helm install</code>部署在自我管理的Kubernetes上。最终，南西在2019年搬到了GCP。</p><p id="3f3b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">后来当我在2018年年中加入一家新公司时，我们正在使用Kubernetes，并回到<code class="fe mz na nb nc b">kubectl apply</code>来部署事情。用Kubernetes运行，用Kubectl部署的容器，从2018年开始就是我现在习惯的样子。</p><h1 id="144b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">快速回顾</h1><p id="d630" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">总结一下我在过去20年中使用的软件部署工具:</p><ul class=""><li id="021b" class="nd ne iq kt b ku kv kx ky la nf le ng li nh lm nr nj nk nl bi translated">2001–2008—Web界面和文件传输协议(FTP)客户端</li><li id="15b0" class="nd ne iq kt b ku nm kx nn la no le np li nq lm nr nj nk nl bi translated">2009–2011—SSH和git拉:)</li><li id="600b" class="nd ne iq kt b ku nm kx nn la no le np li nq lm nr nj nk nl bi translated">2012–2015—Capistrano和一些结构脚本</li><li id="1eed" class="nd ne iq kt b ku nm kx nn la no le np li nq lm nr nj nk nl bi translated">2016–2021—kube CTL申请Docker和Kubernetes，2016–2018年间担任部分掌舵人</li></ul><p id="627b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你看到这种趋势，FTP已经使用了7年或更长时间，Kubeclt正在慢慢超越它。这只是一个时间问题，Kubectl将被使用最长时间，因为我不认为它会很快改变。</p><h1 id="9660" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">如何选择你的软件部署工具？</h1><p id="bc80" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">到目前为止，我已经写了足够多的关于软件部署工具和自动化部署工具在过去20年中的变化。如果你想在2021年为你的团队选择一个软件部署工具，下面是一个非常简单的流程图，应该可以帮助你:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0cd2eaa64e68e16fd1205815b494af53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QvVX8RoOY_EMal3X.jpg"/></div></div></figure><p id="874b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您也可以查看<a class="ae mb" href="https://geshan.com.np/images/software-deployment-tools/09choose-deployment-tool-full.jpg" rel="noopener ugc nofollow" target="_blank">大图</a>。</p><h1 id="32f2" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">结论</h1><p id="763c" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated"><a class="ae mb" href="https://geshan.com.np/blog/2018/10/deployment-is-not-release/" rel="noopener ugc nofollow" target="_blank">部署不是发布</a>，始终将技术任务的部署与业务操作的发布分开。这是主要的一点，如果你在代码中使用一个完整的特性标志SAAS或者只是一个if-else来做这件事，这取决于你。</p><blockquote class="lu lv lw"><p id="eade" class="kr ks lx kt b ku kv jr kw kx ky ju kz ly lb lc ld lz lf lg lh ma lj lk ll lm ij bi translated">在2021年，如果你的团队使用FTP/Capistrano来部署web软件，并且业务每月收入数千美元，那么你的团队比使用Docker容器、Kubernetes等每月消耗数千美元的“现代”团队要好得多。</p></blockquote><p id="d3b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">目标是赚钱和让客户满意，软件和软件部署工具只是实现这一目标的手段。选择有助于你实现商业目标的东西，而不是最新的时尚。部署愉快！</p></div></div>    
</body>
</html>