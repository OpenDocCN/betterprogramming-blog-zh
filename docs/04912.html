<html>
<head>
<title>How to Generate Random Text CAPTCHAs Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python生成随机文本验证码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-generate-random-text-captchas-using-python-e734dd2d7a51?source=collection_archive---------3-----------------------#2020-05-21">https://betterprogramming.pub/how-to-generate-random-text-captchas-using-python-e734dd2d7a51?source=collection_archive---------3-----------------------#2020-05-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="98d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">确保你的用户是他们所说的那个人</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee40279bdf74cc5ab969a21f713ca5b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QNr379hDEZHrJX3q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@massimovirgilio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Massimo Virgilio </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="9bea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">被困在付费墙后面？点击</em> <a class="ae ky" href="https://medium.com/better-programming/how-to-generate-random-text-captchas-using-python-e734dd2d7a51?source=friends_link&amp;sk=14e06b373dc1b033a4463541cd48ee79" rel="noopener"> <em class="lv">此处</em> </a> <em class="lv">阅读全文与我的朋友链接</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="486d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你肯定在网站上遇到过<a class="ae ky" href="https://en.wikipedia.org/wiki/CAPTCHA" rel="noopener ugc nofollow" target="_blank">验证码</a>来验证你是人还是机器人。最初是一个为难以辨认的书籍数字化的合作平台，现在已经发展成为一个大众资助的图像标记(在某些情况下，还有音频识别)项目，在这个项目中，你甚至不知道你是服务提供商，而不是客户。</p><p id="44ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探索如何使用Python的<a class="ae ky" href="https://opencv.org/" rel="noopener ugc nofollow" target="_blank"> OpenCV </a>和<a class="ae ky" href="https://pillow.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> PIL </a>库来生成我们自己的非常简单的文本验证码。</p><p id="4b03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b81e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">创建画布</h1><p id="7d52" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，我们需要从PIL导入<code class="fe na nb nc nd b">ImageFont</code>、<code class="fe na nb nc nd b">ImageDraw</code>和<code class="fe na nb nc nd b">Image</code>模块:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="2c0a" class="ni me it nd b gy nj nk l nl nm">from PIL import ImageFont, ImageDraw, Image</span></pre><p id="48bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们必须创建一个空白的图像对象。为此，我们首先需要创建一个三维(针对三个颜色通道)numpy零数组:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="0854" class="ni me it nd b gy nj nk l nl nm">import numpy as np<br/>img = np.zeros(shape=(25, 60, 3), dtype=np.uint8)</span></pre><p id="6c4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这为我们提供了一个数组，其中每个元素代表图像的一个像素，图像的大小为60x25像素:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="b2ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了从这个数组创建一个图像，我们调用<code class="fe na nb nc nd b">Image</code>的<code class="fe na nb nc nd b">fromarray()</code>方法:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/ea0cb3e6c4bed2fc8a3f1cb0f5f29d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBJv6KGRzyBfy8ITO3nD-A.png"/></div></div></figure><p id="4714" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图像是黑色的，因为每个像素都有一个值<code class="fe na nb nc nd b">(0, 0, 0)</code>，它对应于红色、绿色和蓝色像素的亮度。亮度值介于0(最暗)和255(最亮)之间。要获得白色图像，只需将<code class="fe na nb nc nd b">255</code>添加到图像数组中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/8abc525bd839260edb086a662e6ccfa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lt5j7n4jaY5nKecD-cTLxw.png"/></div></div></figure><p id="89e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们需要白色背景，我们将使用最后一块画布。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1b60" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">添加文本</h1><p id="4491" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在，我们需要在画布上绘制文本。为此，我们首先在画布上使用<code class="fe na nb nc nd b">ImageDraw</code>的<code class="fe na nb nc nd b">Draw()</code>函数创建一个绘图界面:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="3f42" class="ni me it nd b gy nj nk l nl nm">draw = ImageDraw.Draw(img_pil)</span></pre><p id="fa07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以使用<code class="fe na nb nc nd b">Draw</code>的<code class="fe na nb nc nd b">text()</code>方法在画布上写文本。<code class="fe na nb nc nd b">draw</code>方法采用以下参数:</p><ul class=""><li id="deaf" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><code class="fe na nb nc nd b">xy</code>:文本作为元组的起始坐标(<code class="fe na nb nc nd b">x</code>，<code class="fe na nb nc nd b">y</code>)。</li><li id="e946" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><code class="fe na nb nc nd b">text</code>:要绘制的文本。</li><li id="3d3c" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><code class="fe na nb nc nd b">font</code>:要使用的字体。这是PIL使用的<code class="fe na nb nc nd b">FreeType</code>或<code class="fe na nb nc nd b">OpenType</code>字体，这就是<code class="fe na nb nc nd b">ImageFont</code>发挥作用的地方。</li><li id="2926" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><code class="fe na nb nc nd b">fill</code>:文本的填充颜色，用<code class="fe na nb nc nd b">(R, G, B)</code>表示。</li></ul><p id="fb28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要为此准备好我们的字体对象。我们将使用<code class="fe na nb nc nd b">ImageDraw</code>的<code class="fe na nb nc nd b">truetype()</code>功能:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="8893" class="ni me it nd b gy nj nk l nl nm">font = ImageFont.truetype(font = ‘arial’, size=12)</span></pre><p id="4f29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用了字体名称，但是<code class="fe na nb nc nd b">truetype</code>也可以采用系统上的字体路径。我们稍后再谈这个。</p><p id="0787" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了字体，让我们添加文本，看看验证码是什么样子的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/539ff065ce8e850f98f9b6c5282998bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*im3MnJMkuE183-Ny8_0Stg.png"/></div></div></figure><p id="dbf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以在图像中添加线条来迷惑任何试图闯入纯人类系统的机器人！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/45c296c1c971d6a4e9d6324a99063a93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PipwRd3C_oF06fTID9qGzA.png"/></div></div></figure><p id="7492" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">元组指示行的开始和结束像素。第一行从<code class="fe na nb nc nd b">(0, 0)</code>开始，到<code class="fe na nb nc nd b">(60, 25)</code>结束。</p><p id="e8e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的方法是使用OpenCV的<code class="fe na nb nc nd b">imshow()</code>方法，它从一个数组中呈现一个图像:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="95b6" class="ni me it nd b gy nj nk l nl nm">import cv2<br/>cv2.imshow(‘OpenCV’,np.array(img_pil))<br/>cv2.waitKey() #Displays the image till a key is pressed<br/>cv2.destroyAllWindows()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/a22be947dcd1d3acbb2043a26faa8dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*peKZgKeIKeRgFEbyY6yatA.png"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d515" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">添加噪声</h1><p id="320b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们的基本验证码现在已经准备好了，但与你在网上看到的验证码相比，它看起来非常干净和可读。我们来加点噪音吧！</p><p id="1fb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最简单的方法是在图像中随机添加黑白像素。这就是所谓的椒盐噪声。</p><p id="79e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们必须从我们的映像创建一个数组:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="95de" class="ni me it nd b gy nj nk l nl nm">img = np.array(img_pil)</span></pre><p id="f7c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们定义要改变的像素阈值。我们将保持在0.05 (5%)。添加噪声的代码是一个简单的嵌套for循环，使用随机生成的数字(0-1之间)来确定噪声是否会添加到特定像素:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="01a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，如果随机数低于阈值(0.05)，我们将其设为白色。如果它大于0.95，我们就把它变成黑色。否则，我们让它保持原样。添加噪声后的输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/5137df4169f14c63d220dae1811399ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*VJ_nzR4t4aghKNSgc2r0dA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加盐和胡椒噪声</p></figure><p id="86cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">胡椒噪声(黑色像素)非常明显，但是文本上先前为黑色的一些像素现在变成了白色(注意线条中的中断)。</p><p id="2d0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过模糊图像来添加更多的噪声，这将使噪声更加分散。对于cv2，这只是一行程序！</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="ca59" class="ni me it nd b gy nj nk l nl nm">img_blurred = cv2.blur(img,(2,2))</span></pre><p id="4189" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，<code class="fe na nb nc nd b">(2,2)</code>是用于平滑图像的内核的大小。在OpenCV的<a class="ae ky" href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_filtering/py_filtering.html#averaging" rel="noopener ugc nofollow" target="_blank">文档</a>中阅读更多相关内容。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/3a82b868aa08bc8836050caad18cd2a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*pYqGijJa9-nMelu28gGboA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模糊图象</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6810" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">随机化一切！</h1><p id="6869" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们的基本代码已经准备好了…但是“随机文本验证码”中的“随机”却不见了。让我们随机化大部分事情，以便每个验证码是真正独特的！</p><p id="bc03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，什么可以随机化呢？好吧，一切，但我们将集中在图像大小，文本(字符串，字体，字体大小，颜色)，线位置，线颜色，噪声阈值，噪声强度和模糊强度。</p><p id="4d8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图像大小将取决于文本的长度和字体大小。所以我们首先制作一个字体大小变量和字符串的长度:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="a897" class="ni me it nd b gy nj nk l nl nm">size = random.randint(10,16)<br/>length = random.randint(4,8)</span></pre><p id="8961" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在对字体大小、字符串长度和画布大小之间的关系进行了大量实验后，我得出了画布大小的如下结果:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="5898" class="ni me it nd b gy nj nk l nl nm">img = np.zeros(((size*2)+5, length*size, 3), np.uint8)</span></pre><p id="7ecd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，为了随机化字体，我们可以使用<a class="ae ky" href="https://docs.python.org/2/library/glob.html" rel="noopener ugc nofollow" target="_blank"> glob </a>库从系统字体路径中选择一些。我只使用Arial字体的变体。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/94136a694a83c07a3f1356630ed67ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iflloHcYn-69srcyx0nH9g.png"/></div></div></figure><p id="641c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以使用<code class="fe na nb nc nd b">random.choice()</code>选择一个随机的字体:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="6681" class="ni me it nd b gy nj nk l nl nm">font = random.choice(fonts)</span></pre><p id="17fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在来看正文。给定字符串的长度，我们生成ASCII字母数字字符的随机序列:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="3e09" class="ni me it nd b gy nj nk l nl nm">text = ''.join(<br/>        random.choice(string.ascii_uppercase + string.digits + string.ascii_lowercase) <br/>                   for _ in range(length))</span></pre><p id="ac19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于长度已经是随机的，我们只是通过传递<code class="fe na nb nc nd b">length</code>来调用这个函数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/6fe18645b3863ab9881cde5d8e3007ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tv1zX8_YECcHlI2MtxosWQ.png"/></div></div></figure><p id="82e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于线的位置，不是从左上角画到右下角<code class="fe na nb nc nd b">[(0,0),(length*size,(size*2)+5)]</code>，我们可以通过以下方式随机化起点和终点坐标</p><p id="10f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">[(random.choice(range(length*size)), random.choice(range((size*2)+5)))<br/> ,(random.choice(range(length*size)), random.choice(range((size*2)+5)))]</code></p><p id="caf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于文本和线条的颜色，之前我们只使用黑色(<code class="fe na nb nc nd b">0, 0, 0</code>)。这可以随机化到<code class="fe na nb nc nd b">(random.randint(0,255), random.randint(0,255), random.randint(0,255))</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/63c43e65fdf365559dc11610fb10b089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rm55s1LeuWc4ifboJxy4kg.png"/></div></div></figure><p id="3d08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于噪声阈值，我们可以将其设置为1%到5%之间的任意随机值:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="7f91" class="ni me it nd b gy nj nk l nl nm">thresh = random.randint(1,5)/100</span></pre><p id="be8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于噪波强度，我们可以将盐和胡椒像素分别设置为随机的明暗色调，而不是使用绝对的白色和黑色:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="31e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，为了控制模糊强度，我们可以从<code class="fe na nb nc nd b">(2, 2)</code>到<code class="fe na nb nc nd b">(int(size/random.randint(5,10)),int(size/random.randint(5,10)))</code>随机化内核大小。选择5到10之间的范围，因为任何小于5的值都会使图像太模糊而不清晰，而大于10的值不会有太大的模糊效果。</p><p id="d057" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">img = cv2.blur(img,(int(size/7),int(size/7)))</code></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="c2ba" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">把所有的放在一起</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/f1bf808ae61baf30cf4ce8b88e57db5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*QIIR1GkgdafoaSCNw1JWOg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">OQw4(够狠？)</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="dc1a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">应用程序？</h1><p id="3e39" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这可以用来生成验证码。您可以用文本作为要匹配的文件名来保存图像。另一个新颖的应用是生成大量带标签的图像来训练OCR模型。把上面的代码放在一个循环中，你会得到你想要的任意多的图像！</p><p id="5075" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你能想到更多的应用，请告诉我。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="ea18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Medium仍然不支持向印度以外的作者支付费用。如果你喜欢我的内容，你可以给我买杯咖啡:)</p><div class="oj ok gp gr ol om"><a href="https://www.buymeacoffee.com/siddhantsadangi" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">Siddhant Sadangi正在Streamlit上创建python网络应用程序</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">嘿👋我刚刚在这里创建了一个页面。你现在可以给我买杯咖啡了！</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>