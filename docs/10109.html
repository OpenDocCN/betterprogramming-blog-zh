<html>
<head>
<title>How to Use NVM to Manage Node.js 17 and NPM 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用NVM管理Node.js 17和NPM 8</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-nvm-to-manage-node-js-17-and-npm-8-2da8bf3ca5e9?source=collection_archive---------1-----------------------#2021-11-30">https://betterprogramming.pub/how-to-use-nvm-to-manage-node-js-17-and-npm-8-2da8bf3ca5e9?source=collection_archive---------1-----------------------#2021-11-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="648f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">NVM实用指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/436c2334c883d2867cf334bf9520adb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a1P5ww36NhRZ9DQ1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aaronburden?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aaron Burden </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><blockquote class="kz la lb"><p id="84c8" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="it">本文发布为nvm </em> <code class="fe lz ma mb mc b"><em class="it">0.39.0</em></code> <em class="it">，</em><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/3-major-features-of-node-js-17-4bee7135df02"><em class="it">node . js 17</em></a><em class="it">，</em><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6"><em class="it">NPM 8</em></a><em class="it">。本文中的所有概念仍然有效。但是，您可以查看以下文章中的更新示例:</em></p><p id="966a" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-nvm-to-manage-node-js-19-and-npm-9-bc5656d52d5f"> <em class="it">如何使用NVM管理Node.js 19和NPM 9 </em> </a></p></blockquote><p id="cf59" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated"><a class="ae ky" href="https://nodejs.org/en/blog/release/v17.0.0/" rel="noopener ugc nofollow" target="_blank"> Node.js 17 </a>发布于2021年10月19日。它带有npm 8和许多新功能。你准备好尝试了吗？</p><p id="c2bc" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">正如我们在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/use-nvm-to-manage-node-js-and-npm-versions-2bd0d0875f9f">上一篇文章</a>中所说，最好的尝试方式是使用<a class="ae ky" href="https://github.com/nvm-sh/nvm" rel="noopener ugc nofollow" target="_blank"> NVM(节点版本管理器)</a>来升级node.js和npm版本。它可以帮助我们降低风险。</p><p id="ed33" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">这是一篇类似的文章，所有的概念仍然有效。但是，所有示例都更新了新版本的<code class="fe lz ma mb mc b">nvm</code>、node.js和npm。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="7bc4" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">安装NVM</h1><p id="adf3" class="pw-post-body-paragraph lc ld it lf b lg nf ju li lj ng jx ll md nh lo lp me ni ls lt mf nj lw lx ly im bi translated"><code class="fe lz ma mb mc b">nvm</code>管理node.js和npm版本。它被设计为按用户安装，按shell调用。<code class="fe lz ma mb mc b">nvm</code>可以在任何POSIX兼容的shell (sh、dash、ksh、zsh、bash)上工作，特别是在这些平台上:unix、macOS和windows WSL。</p><p id="851f" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated"><code class="fe lz ma mb mc b">nvm</code>的最新版本是<code class="fe lz ma mb mc b">0.39.0</code>，可以通过curl或者<code class="fe lz ma mb mc b">wget</code>命令安装:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="dc01" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">脚本<code class="fe lz ma mb mc b">install.sh</code>将nvm存储库克隆到<code class="fe lz ma mb mc b">~/.nvm</code>，并尝试将下面代码片段中的源代码行添加到正确的概要文件(<code class="fe lz ma mb mc b">~/.bash_profile</code>、<code class="fe lz ma mb mc b">~/.zshrc</code>、<code class="fe lz ma mb mc b">~/.profile</code>或<code class="fe lz ma mb mc b">~/.bashrc</code>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="7c2e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">在profile文件中，如<code class="fe lz ma mb mc b">~/.zshrc</code>，我们看到上面的行被添加。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="33b3" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">使用NVM</h1><p id="67a1" class="pw-post-body-paragraph lc ld it lf b lg nf ju li lj ng jx ll md nh lo lp me ni ls lt mf nj lw lx ly im bi translated">安装nvm后，我们可以使用下面的命令来安装node.js的最新版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="bb97" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">上面的输出(第7行)表明npm <code class="fe lz ma mb mc b">8.1.2</code>与node.js <code class="fe lz ma mb mc b">17.1.0</code>一起使用。这一点可以得到证实:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="add9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">我们还可以指定要安装的确切版本。语义版本格式由<a class="ae ky" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">sever</a>定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="141d" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">如果已经安装了特定版本，则不会重新安装:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1dbd" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">我们可以列出所有已安装的版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="3044" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">上面输出中的箭头显示node.js的当前版本是<code class="fe lz ma mb mc b">12.22.7</code>(第3行)。它还显示了<code class="fe lz ma mb mc b">default</code> ( <code class="fe lz ma mb mc b">14.17.6</code>，第6行)、<code class="fe lz ma mb mc b">node</code> ( <code class="fe lz ma mb mc b">17.1.0</code>，第9行)和<code class="fe lz ma mb mc b">stable</code> ( <code class="fe lz ma mb mc b">17.1.0</code>，第10行)的值。</p><p id="9c7a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated"><code class="fe lz ma mb mc b">nvm use</code>修改当前版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="b601" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">您可能想知道<code class="fe lz ma mb mc b">v10.14.0</code>如何使用比<code class="fe lz ma mb mc b">v14.17.6</code>(第6行)更高版本的npm(第2行)。这可以通过以下命令实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="5817" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">正如我们所知，npm 8放弃了对Node.js 10的支持。版本，<code class="fe lz ma mb mc b">10.14.0</code>，无法安装npm <code class="fe lz ma mb mc b">8.0.0</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="6761" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">以下命令将获取当前节点版本上支持的最新npm版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="72a3" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated"><code class="fe lz ma mb mc b">nvm use</code>为当前外壳设置特定版本。如果启动新的shell，新设置的node.js版本将会丢失。</p><p id="4e4e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">如何才能让一个特定的节点版本持久化？</p><p id="2304" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">默认版本适用于所有shells。<code class="fe lz ma mb mc b">nvm alias</code>可以设置默认版本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="3adc" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">为了方便，可以创建一个<code class="fe lz ma mb mc b">.nvmrc</code>文件，它采用SemVer格式，或者<code class="fe lz ma mb mc b">node</code>，或者<code class="fe lz ma mb mc b">default</code>。之后，<code class="fe lz ma mb mc b">nvm use</code>、<code class="fe lz ma mb mc b">nvm install</code>、<code class="fe lz ma mb mc b">nvm exec</code>、<code class="fe lz ma mb mc b">nvm run</code>和<code class="fe lz ma mb mc b">nvm which</code>将使用<code class="fe lz ma mb mc b">.nvmrc</code>文件中指定的版本，如果命令行上没有提供版本的话。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="d495" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">我们可以使用以下命令检查当前版本:</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="cdcb" class="nq mo it mc b gy nr ns l nt nu">% nvm current<br/>v17.1.0</span></pre><p id="a8a4" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">列出了所有可用的版本，但是要准备好一个很长的列表。</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="176e" class="nq mo it mc b gy nr ns l nt nu">% nvm ls-remote</span></pre><p id="1907" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">更具体地说，提供部分版本可以缩小可用列表的范围。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1e07" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated"><code class="fe lz ma mb mc b">nvm which</code>显示可执行文件的安装路径。我们已经安装了<code class="fe lz ma mb mc b">10.14.0</code>、<code class="fe lz ma mb mc b">12.22.7</code>、<code class="fe lz ma mb mc b">14.17.6</code>、<code class="fe lz ma mb mc b">17.1.0</code>的node.js。下面是<code class="fe lz ma mb mc b">nvm which </code>的结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9932" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">特定的节点版本可以直接用于运行应用程序:</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="084f" class="nq mo it mc b gy nr ns l nt nu">% nvm run 14.17.6 app.js</span></pre><p id="1f9e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">或者，下面的命令运行<code class="fe lz ma mb mc b">node app.js</code>，路径指向节点<code class="fe lz ma mb mc b">14.17.6</code>。</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="b8bc" class="nq mo it mc b gy nr ns l nt nu">% nvm exec 14.17.6 node app.js</span></pre><p id="94c9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">如果您想找到更多nvm命令，请运行帮助命令:</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="73db" class="nq mo it mc b gy nr ns l nt nu">% nvm --help</span></pre></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="8e09" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">升级NVM</h1><p id="3c45" class="pw-post-body-paragraph lc ld it lf b lg nf ju li lj ng jx ll md nh lo lp me ni ls lt mf nj lw lx ly im bi translated">我们可以用<code class="fe lz ma mb mc b">nvm</code>来升级node.js和npm。如何才能升级<code class="fe lz ma mb mc b">nvm</code>本身？</p><p id="982e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">让我们试试。</p><p id="eb79" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">在升级之前，我们有<code class="fe lz ma mb mc b">nvm</code> <code class="fe lz ma mb mc b">0.37.2</code>。</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="20b1" class="nq mo it mc b gy nr ns l nt nu">% nvm --version<br/>0.37.2</span></pre><p id="2bca" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">我们将其升级到版本<code class="fe lz ma mb mc b">0.39.0</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="d8c7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">正如输出(第9行)所述，我们需要关闭并重新打开终端以使用新版本:</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="3a1e" class="nq mo it mc b gy nr ns l nt nu">% nvm --version<br/>0.39.0</span></pre></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="3fd5" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="2551" class="pw-post-body-paragraph lc ld it lf b lg nf ju li lj ng jx ll md nh lo lp me ni ls lt mf nj lw lx ly im bi translated"><code class="fe lz ma mb mc b">nvm</code>方便管理node.js和npm版本。按照本文中的说明，您可以升级到node.js 17和npm 8，或者任何其他版本。</p><ul class=""><li id="95fb" class="nv nw it lf b lg lh lj lk md nx me ny mf nz ly oa ob oc od bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc">node . js 18的5大特色</a></li><li id="d9f0" class="nv nw it lf b lg oe lj of md og me oh mf oi ly oa ob oc od bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/3-major-features-of-node-js-17-4bee7135df02">node . js 17的3大特色</a></li><li id="3dc5" class="nv nw it lf b lg oe lj of md og me oh mf oi ly oa ob oc od bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/a-quick-look-at-the-node-js-16-features-d616e8b2f29">快速浏览Node.js 16特性</a></li><li id="b183" class="nv nw it lf b lg oe lj of md og me oh mf oi ly oa ob oc od bi translated">Node.js 15的新功能</li><li id="31eb" class="nv nw it lf b lg oe lj of md og me oh mf oi ly oa ob oc od bi translated"><a class="ae ky" href="https://medium.com/p/bea4631a96d6" rel="noopener">探索npm 9中的新功能</a></li><li id="6cc3" class="nv nw it lf b lg oe lj of md og me oh mf oi ly oa ob oc od bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">快速浏览npm 8特性和对npm 9的预测</a></li><li id="6b07" class="nv nw it lf b lg oe lj of md og me oh mf oi ly oa ob oc od bi translated"><a class="ae ky" href="https://medium.com/better-programming/the-step-by-step-guide-to-understanding-and-adopting-npm-7-914504f7090f" rel="noopener">理解和采用npm 7的逐步指南</a></li></ul><p id="bf8c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll md ln lo lp me lr ls lt mf lv lw lx ly im bi translated">感谢阅读。</p><pre class="kj kk kl km gt nm mc nn no aw np bi"><span id="d15a" class="nq mo it mc b gy nr ns l nt nu"><strong class="mc iu">Want to Connect?</strong></span><span id="cddb" class="nq mo it mc b gy oj ns l nt nu">If you are interested, check out <a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">my directory of web development articles</a>.</span></pre></div></div>    
</body>
</html>