<html>
<head>
<title>Add Flexibility to Web Components With Slots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过插槽增加Web组件的灵活性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/2020-008-add-flexibility-to-web-components-with-slots-c07ce2620952?source=collection_archive---------3-----------------------#2020-02-18">https://betterprogramming.pub/2020-008-add-flexibility-to-web-components-with-slots-c07ce2620952?source=collection_archive---------3-----------------------#2020-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dec2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将重点从组件开发者转移到组件消费者</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5c8605aab84bb230415eabf6846c0389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfvDP4gBs8DrgkercpAlRw.png"/></div></div></figure><p id="c2f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">HTML <code class="fe lq lr ls lt b">&lt;slot&gt;</code>标签通过允许任何人向标准web组件添加新内容，将重点从组件开发者转移到组件消费者。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="1272" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">自定义元素和模板</h1><p id="9c5f" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">定制元素是一种基于标准的技术，允许软件开发者扩展HTML的基本标签集。它与其他基于标准的技术一起用于创建一个独立于任何专有框架的<em class="my"> web组件</em>，比如React、Vue或Angular。</p><p id="6310" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里的一切都是面向未来的，由万维网联盟(W3C)设计和批准的。</p><p id="e2ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，考虑一个具有如下结构的文档:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="8976" class="nd mc it lt b gy ne nf l ng nh">&lt;body&gt;<br/>    &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>    &lt;my-component&gt;&lt;/my-component&gt;<br/>&lt;/body&gt;</span></pre><p id="d2af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了使其合法化，开发人员必须通知浏览器新的标签名称，并告诉它JavaScript类将定义它的行为。这是通过这样一个声明完成的:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="1176" class="nd mc it lt b gy ne nf l ng nh">&lt;script&gt;    <br/>    window.customElements.define('my-component', MyComponent);<br/>&lt;/script&gt;</span></pre><p id="aebb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">新的<code class="fe lq lr ls lt b">my-component</code>标签成为组件开发人员指定的元素层次结构的简写。最初，<code class="fe lq lr ls lt b">document</code> DOM无法访问这个层次结构——它被包装在一个HTML <code class="fe lq lr ls lt b">&lt;template&gt;</code>中并被搁置一旁，直到浏览器需要它。</p><p id="651a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">出于讨论的目的，我将声明一个可用于web组件的模板，它模拟一个带有标题、内部内容和页脚的对话框。</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="0e74" class="nd mc it lt b gy ne nf l ng nh">&lt;template&gt;<br/>    &lt;caption&gt;Getting Started&lt;/caption&gt;<br/>    &lt;section&gt;<br/>        &lt;h2&gt;Welcome&lt;/h2&gt;<br/>        &lt;p&gt;Press OK when you're ready to begin.&lt;/p&gt;<br/>        &lt;button&gt;OK&lt;/button&gt;<br/>    &lt;/section&gt;<br/>    &lt;footer&gt;Glad you're here!&lt;/footer&gt;<br/>&lt;/template&gt;</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="c485" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">该槽元件</h1><p id="ec23" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">让我们不要纠缠于<code class="fe lq lr ls lt b">MyComponent</code> JavaScript类做什么或者web组件生命周期如何工作的细节。我们将把那个讨论留给别处的<a class="ae ni" href="https://medium.com/better-programming/2020-007-the-facets-of-w3c-web-components-e76798ab7b29" rel="noopener"/>。</p><p id="0da6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">相反，让我们专注于我们已经创建的模板，改变它使标题和文本通用。目标是让<em class="my">消费者</em>，即<em class="my">使用</em>组件的应用程序开发者，决定在那里放什么。这就是<code class="fe lq lr ls lt b">&lt;slot&gt;</code>标签发挥作用的地方。这是同一个模板，但是有一个槽，可以接受来自消费者的元素:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="bbb6" class="nd mc it lt b gy ne nf l ng nh">&lt;template&gt;<br/>    &lt;caption&gt;Getting Started&lt;/caption&gt;<br/>    &lt;section&gt;<br/>        &lt;slot&gt;&lt;/slot&gt;<br/>        &lt;button&gt;OK&lt;/button&gt;<br/>    &lt;/section&gt;<br/>    &lt;footer&gt;Glad you're here!&lt;/footer&gt;<br/>&lt;/template&gt;</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="c76e" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">可开槽和开槽的</h1><p id="ef2a" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">为了使用这个新组件，使用者在开始和结束自定义元素标记名之间添加元素，如下所示:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="60a5" class="nd mc it lt b gy ne nf l ng nh">&lt;body&gt;<br/>    &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>    &lt;my-component&gt;<br/>        &lt;h2&gt;Goodbye&lt;/h2&gt;<br/>        &lt;p&gt;Your submission has been accepted.&lt;/p&gt;<br/>    &lt;/my-component&gt;<br/>&lt;/body&gt;</span></pre><p id="f80e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本例中消费者指定的<code class="fe lq lr ls lt b">h2</code>和<code class="fe lq lr ls lt b">p</code>元素称为<em class="my">可开槽元素</em>。</p><p id="6c65" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当浏览器呈现文档时，<em class="my">将模板和可开槽的元素组成</em>一个内部层次结构，如下所示:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="8738" class="nd mc it lt b gy ne nf l ng nh">&lt;body&gt;<br/>    &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>    &lt;my-component&gt;<br/>        &lt;caption&gt;Getting Started&lt;/caption&gt;<br/>        &lt;section&gt;<br/>            &lt;h2&gt;Goodbye&lt;/h2&gt;<br/>            &lt;p&gt;Your submission has been accepted.&lt;/p&gt;<br/>            &lt;button&gt;OK&lt;/button&gt;<br/>        &lt;/section&gt;<br/>        &lt;footer&gt;Glad you're here!&lt;/footer&gt;<br/>    &lt;/my-component&gt;<br/>&lt;/body&gt;</span></pre><p id="5a49" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在组合层次结构中，从消费者处获得的标题和段落被称为<em class="my">槽元素</em>。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e911" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">命名插槽</h1><p id="0013" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">正如我们所看到的，组件现在是欢迎和告别的大杂烩。为了澄清这一点，我们希望允许消费者指定标题和页脚。这就是<em class="my">命名槽</em>发挥作用的地方。组件开发人员应该将模板改为有三个插槽，每个插槽都有一个唯一的<code class="fe lq lr ls lt b">name</code>属性(<code class="fe lq lr ls lt b">title</code>、<code class="fe lq lr ls lt b">inner</code>和<code class="fe lq lr ls lt b">message</code>)。</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="ab2c" class="nd mc it lt b gy ne nf l ng nh">&lt;template&gt;<br/>    &lt;slot name='title'&gt;&lt;/slot&gt;<br/>    &lt;section&gt;<br/>        &lt;slot name='inner'&gt;&lt;/slot&gt;<br/>        &lt;button&gt;OK&lt;/button&gt;<br/>    &lt;/section&gt;<br/>    &lt;slot name='message'&gt;&lt;/slot&gt;<br/>&lt;/template&gt;</span></pre><p id="fd87" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是消费者应该如何用命名槽标记文档，以便正确使用这三个槽:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="87f2" class="nd mc it lt b gy ne nf l ng nh">&lt;body&gt;<br/>    &lt;h1&gt;Goodbye World!&lt;/h1&gt;<br/>    &lt;my-component&gt;<br/>        &lt;caption slot='title'&gt;Finishing Up&lt;/caption&gt;<br/>        &lt;h2 slot='inner'&gt;Goodbye&lt;/h2&gt;<br/>        &lt;p slot='inner'&gt;Your submission has been accepted.&lt;/p&gt;<br/>        &lt;footer slot='message'&gt;Thanks for supporting us!&lt;/footer&gt;<br/>    &lt;/my-component&gt;<br/>&lt;/body&gt;</span></pre><p id="16d1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">浏览器将文档层次结构组成为:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="e84a" class="nd mc it lt b gy ne nf l ng nh">&lt;body&gt;<br/>    &lt;h1&gt;Goodbye World!&lt;/h1&gt;<br/>    &lt;my-component&gt;<br/>        &lt;caption&gt;Finishing Up&lt;/caption&gt;<br/>        &lt;section&gt;<br/>            &lt;h2&gt;Goodbye&lt;/h2&gt;<br/>            &lt;p&gt;Your submission has been accepted.&lt;/p&gt;<br/>            &lt;button&gt;OK&lt;/button&gt;<br/>        &lt;/section&gt;<br/>        &lt;footer&gt;Thanks for supporting us!&lt;/footer&gt;<br/>    &lt;/my-component&gt;<br/>&lt;/body&gt;</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="0991" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">默认插槽值</h1><p id="c446" class="pw-post-body-paragraph ku kv it kw b kx mt ju kz la mu jx lc ld mv lf lg lh mw lj lk ll mx ln lo lp im bi translated">组件开发人员可以为三个插槽中的每一个提供默认值，这样消费者就不会被迫提供它们。</p><p id="3a7f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当文档被合成时，这些缺省值将被覆盖——但是只有当消费者提供了具有匹配名称的可开槽元素时。这是默认的版本:</p><pre class="kj kk kl km gt mz lt na nb aw nc bi"><span id="ec13" class="nd mc it lt b gy ne nf l ng nh">&lt;template&gt;<br/>    &lt;slot name='title'&gt;<br/>        &lt;caption&gt;Getting Started&lt;/caption&gt;<br/>    &lt;/slot&gt;<br/>    &lt;section&gt;<br/>        &lt;slot name='inner'&gt;<br/>            &lt;h2&gt;Welcome&lt;/h2&gt;<br/>            &lt;p&gt;Press OK when you're ready to begin.&lt;/p&gt;<br/>        &lt;/slot&gt;<br/>        &lt;button&gt;OK&lt;/button&gt;<br/>    &lt;/section&gt;<br/>    &lt;slot name='message'&gt;<br/>        &lt;footer&gt;Glad you're here!&lt;/footer&gt;<br/>    &lt;/slot&gt;<br/>&lt;/template&gt;</span></pre><p id="ca05" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果消费者提供了前面显示的“Goodbye”文档标记，那么组合的层次结构将与我们已经看到的完全一样。但是如果消费者省略了指定的槽，那么组合的层次结构将与我们开始时的“Hello”文档一样。</p><p id="08fb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们刚刚使我们的web组件变得更加灵活！</p></div></div>    
</body>
</html>