<html>
<head>
<title>Building Custom Themes in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Jetpack Compose中构建自定义主题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/jetpack-compose-custom-themes-b1836877981d?source=collection_archive---------0-----------------------#2022-04-29">https://betterprogramming.pub/jetpack-compose-custom-themes-b1836877981d?source=collection_archive---------0-----------------------#2022-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ca5e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">改进你的应用程序的设计系统</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/104767f3e741bce3cb314d566882e853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DcdcDNP3o2F9n9cWCvdHw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Kelli Tungay的色彩(Unsplash)</p></figure><p id="de31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Jetpack Compose是Android的新UI工具包，我们可以通过代码创建组件，避免创建XML文件，因为这种Compose更直观，加快了开发过程，是一种非常强大的工具，可以轻松创建复杂的设计。</p><p id="2f83" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">开发UI时最重要的一件事就是创建我们的<code class="fe lr ls lt lu b">Theme</code>，默认情况下Android使用<a class="ae lv" href="https://material.io/" rel="noopener ugc nofollow" target="_blank">材质设计</a>(最新版本是Material You)。当我们用<a class="ae lv" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank"> Jetpack Compose </a>创建一个Android项目时，我们有一个名为<code class="fe lr ls lt lu b">ui</code>的文件夹，它有主题、颜色、形状和排版，在内部使用了<code class="fe lr ls lt lu b">MaterialTheme</code> composable。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仅使用材质配置的默认主题</p></figure><p id="f96e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据我自己在一个大型项目中使用<em class="ly">设计系统</em>的经验，我们采取了以下步骤来创建我们自己的<code class="fe lr ls lt lu b">Theme</code> <strong class="kx ir"> </strong>并为定制组件提供支持。</p><h1 id="210a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak"> 1。颜色、字体和形状的定义</strong></h1><h2 id="1814" class="mr ma iq bd mb ms mt dn mf mu mv dp mj le mw mx ml li my mz mn lm na nb mp nc bi translated"><strong class="ak">颜色</strong></h2><p id="7256" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">第一件事是创建我们的颜色，我们可以从UI/UX团队获得颜色，但如果我们没有一个特定的团队来定义这些颜色，我们可以在一个文件中定义我们自己的颜色。当我们准备好颜色后，我们需要创建一个类来处理我们的颜色和材质颜色，所以我们将创建类<code class="fe lr ls lt lu b">CustomColors</code> <em class="ly">。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们设计系统中的颜色列表</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">CustomColors类包含材质和自定义颜色</p></figure><h2 id="36be" class="mr ma iq bd mb ms mt dn mf mu mv dp mj le mw mx ml li my mz mn lm na nb mp nc bi translated"><strong class="ak">字体</strong></h2><p id="5a90" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">字体很容易配置，我们只需要创建一个<code class="fe lr ls lt lu b"><strong class="kx ir">Typography</strong></code>类，但我们可以创建额外的类来重用我们字体的主类中的代码，这总是好的。需要记住的一件非常重要的事情是，我们需要根据文本大小来定义所有的变体，例如h1、h2、body等；因为我们会在<code class="fe lr ls lt lu b"><strong class="kx ir">Typography</strong></code>类内部重用它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">为我们自己的排版类配置</p></figure><h2 id="4d30" class="mr ma iq bd mb ms mt dn mf mu mv dp mj le mw mx ml li my mz mn lm na nb mp nc bi translated"><strong class="ak">形状</strong></h2><p id="0c1a" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">这里我们没有太多要配置的，我们只需要创建我们的<strong class="kx ir"> Shapes </strong>类，就这样。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">形状类的定义</p></figure><h1 id="6506" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak"> 2。供应商创建</strong></h1><p id="c8b2" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">这可能是创建自定义主题最重要的事情，因为我们将使用<code class="fe lr ls lt lu b">CompositionLocal</code>，这是一个我们可以通过组合隐式传递数据的选项。</p><p id="bb98" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一般来说，所有的数据流从上到下遍历UI树，作为一种全局配置。在我们的例子中，隐式发送我们自己的颜色并在整个应用程序的自定义主题中使用它们是很有用的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">隐式传递颜色的本地提供程序</p></figure><h1 id="ddd7" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak"> 3。主题创作(亮/暗模式)</strong></h1><p id="6c88" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">最后但同样重要的是，我们需要组装所有代码片段，以使我们的<code class="fe lr ls lt lu b">CustomTheme</code> composable在我们所有的定制组件中工作，因此我们将为亮暗模式创建颜色，这些颜色将根据手机的配置而变化。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">主题文件包含所有的配置(颜色，字体和形状)</p></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="d19e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过上面的步骤，我们可以用一种简单的方式创建我们的自定义调色板，并最终组装我们的主题，其职责是为整个应用程序提供<em class="ly">颜色、字体和形状</em>，我们也可以避免总是使用<code class="fe lr ls lt lu b">MaterialTheme</code>而使用<code class="fe lr ls lt lu b">CustomTheme</code>。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="9fd1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这篇文章中没有提到的一些细节是，对于颜色的定义，我们(我的团队)正在使用令牌来进行更具语义的命名，这个过程是UI/UX团队的一部分，因此我们可以在不影响颜色名称的情况下替换令牌的值，另一点是，<code class="fe lr ls lt lu b">debugColors</code>函数只是一个可组合的函数，它返回一个具有默认颜色<code class="fe lr ls lt lu b">MaterialTheme</code>的<code class="fe lr ls lt lu b">Colors</code>类，以提供对材料设计库中内置组件的支持。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="3392" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望这篇文章可以帮助你定义你的主题，改善你的设计系统。</p></div></div>    
</body>
</html>