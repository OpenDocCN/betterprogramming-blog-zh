<html>
<head>
<title>Let’s Make a React Radio That Will Pass A11Y — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们制作一个能通过A11Y的React收音机——第3部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-make-a-react-radio-that-will-pass-a11y-part-3-c77105a94a9a?source=collection_archive---------29-----------------------#2019-11-25">https://betterprogramming.pub/lets-make-a-react-radio-that-will-pass-a11y-part-3-c77105a94a9a?source=collection_archive---------29-----------------------#2019-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2b31" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用React、styled-components和Framer Motion创建一个单选按钮组</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b677f040b8dd6ca63ed88edc4fc4beaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2UGvNAiSpq3fU8tq"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">克里斯托夫·鲁舍夫在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5ffc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" href="https://medium.com/better-programming/lets-make-a-react-radio-that-will-pass-a11y-part-1-of-2-dc971d1f4c6" rel="noopener">第1部分</a>和<a class="ae kv" href="https://medium.com/better-programming/lets-make-a-react-radio-that-will-pass-a11y-part-2-932ac911a3e2" rel="noopener">第2部分</a>中，我们看了基本结构、可访问性规则、处理选中状态、点击和按键事件等等。如果您还没有阅读它们，我建议您在继续阅读之前先阅读一下。</p><p id="0326" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们快速回顾一下我们离开第2部分的地方。你可以在这里找到<a class="ae kv" href="https://gist.github.com/chrispcode/f623120e34e389de04ff25d9d9c90ea7" rel="noopener ugc nofollow" target="_blank">代码。</a></p><p id="cc27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到，我已经创建了一个<code class="fe ls lt lu lv b">styled.tsx</code>文件，其中放有我所有的样式化组件。我把这个文件当作一个CSS文件。其他一切都保持不变。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="1081" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">8.使用帧运动制作动画</h1><p id="d86b" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在我看来,是React目前最好的动画库。它是Pose的继任者，由同一作者(Matt Perry)以及Framer的一些优秀工程师创建。</p><p id="4872" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始制作动画。当一个选项被选中时，我们将动画显示<code class="fe ls lt lu lv b">Circle</code>的边框，反之亦然。</p><p id="8398" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们要定义动画的<code class="fe ls lt lu lv b">variants</code>。*注意:您可以从<a class="ae kv" href="https://www.npmjs.com/package/framer-motion" rel="noopener ugc nofollow" target="_blank">成帧器-运动</a>库中获取<code class="fe ls lt lu lv b">Variant</code>类型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/40495f6c3b1d52d5cba60ef8c7a88e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBWL9Oll7qDFuN4u6MKWgQ.png"/></div></figure><p id="44e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们必须将<code class="fe ls lt lu lv b">Circle</code>组件的基础改为<code class="fe ls lt lu lv b">motion.div</code>，而不是常规的div元素。我强调了重要的几行:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/fd63c61feb0e31e493ffcd4b29a2db82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSzrqX0cvH6INMZutYGj_g.png"/></div></figure><p id="c65d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们必须从<code class="fe ls lt lu lv b">Option</code>组件中删除之前选择的策略:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/17d045c81df51437a092191b7b69c446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RV0aVmV7J9zQluP_Mm-RTw.png"/></div></figure><p id="adf2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以改变逻辑，其中<code class="fe ls lt lu lv b">Circle</code>被样式化为选中。我提取了<code class="fe ls lt lu lv b">isSelected</code>逻辑，然后传递给<code class="fe ls lt lu lv b">aria-checked</code>。重点线路已经突出显示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/ed0e7e44be25d40437fcfd1f3685de35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dtbO1CNKJ9wpz4aS5zeK4w.png"/></div></figure><p id="7e31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，我们对<code class="fe ls lt lu lv b">Circle</code>组件(在这个阶段是类型<code class="fe ls lt lu lv b">motion.div </code>的)说，它可以使用我们已经指定的变量(初始的和选择的)。</p><p id="ab6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们告诉它应该用<code class="fe ls lt lu lv b">initial</code>变体开始一个组件，如果它被选中，它应该使用<code class="fe ls lt lu lv b">selected</code>变体，如果不是，那么使用<code class="fe ls lt lu lv b">initial</code>变体。在我看来，这是一个非常简单的API。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/2cb39c870115f13058bdb42642d98f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*gwY9G4GUNuKthSTQUXy1eg.gif"/></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="d10b" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">9.受控和非受控</h1><p id="d1e9" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">如果你检查我们的组件，它一直处于这种奇怪的状态，我们从内部控制<code class="fe ls lt lu lv b">selectedId</code>而不传递出去。它既不是受控的，也不是不受控制的。</p><p id="1431" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样做是为了让我们可以专注于组件内部的逻辑，而不用担心如何调用它。让我们专注于这个系列的最后一步，使其得到适当的控制。</p><p id="66ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们添加额外的道具:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/11a71e20e7c42c9454bace23d1170ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NfkBNuKRX2BRmcjdl7JWHg.png"/></div></div></figure><p id="cc12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，姑且称之为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/1908d91f7a284734ded45c90d7baf6fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TNjVxh0R2JfSmsUKKTy_UA.png"/></div></figure><p id="aeaa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们移除<code class="fe ls lt lu lv b">selectedId</code>的状态，因为我们将从props传递的值中获取它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/af830be84a2325bc8b315e073921c17c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zGBFv132txeSvwKdn8OBEQ.png"/></div></figure><p id="0f56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还应该将<code class="fe ls lt lu lv b">setSelectedId</code>函数改为<code class="fe ls lt lu lv b">onChange</code>，因为我们现在希望组件的用户从外部设置值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/45ce0b722f2b8480d5d586467716b52a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1iorTu1b5kdlftCZ3PNF0Q.png"/></div></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="c72c" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">结论</h1><p id="858c" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">这给我们留下了一个工作组件。您可以根据自己的需要随意更改。</p><p id="f79a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里找到<a class="ae kv" href="https://gist.github.com/chrispcode/f93d59bd2506fd2b3b2f7af8a4a95d4a" rel="noopener ugc nofollow" target="_blank">完成代码</a>。</p><p id="c2b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一如既往的感谢您的阅读。如果我错过了什么或什么是错的，请让我知道。我会尽我所能保持这个网页的更新。</p></div></div>    
</body>
</html>