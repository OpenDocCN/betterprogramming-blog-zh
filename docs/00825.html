<html>
<head>
<title>How To Use Local Storage With JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中使用本地存储</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-local-storage-with-javascript-9598834c8b72?source=collection_archive---------1-----------------------#2019-07-18">https://betterprogramming.pub/how-to-use-local-storage-with-javascript-9598834c8b72?source=collection_archive---------1-----------------------#2019-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5e1d771ff6228967ef5d1f71628c600b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9uu4ncY_FsOCldQFecj7_A.jpeg"/></div></div></figure><p id="5411" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本地存储是本地存储在客户端浏览器中的数据。也是纯JavaScript。</p><p id="1d79" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有两种类型的存储可供您使用:</p><ul class=""><li id="ec49" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><strong class="ka ir">本地存储</strong>:即使刷新页面或关闭浏览器，数据仍然存在。</li><li id="a7d2" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><strong class="ka ir">会话存储</strong>:浏览器关闭时将被清除的数据。</li></ul></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="db5b" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">为什么本地存储和会话存储有用？</h1><p id="66e9" class="pw-post-body-paragraph jy jz iq ka b kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">您不必使用cookies来存储临时数据，临时数据需要由web服务器创建，并且不会随每个HTTP请求一起发送。</p><p id="7144" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，如果你正在构建一个静态网站，你不需要任何后端语言或逻辑来存储数据。此外，您的本地存储提供5MB的数据存储，而您在cookie中最多只能存储4KB。</p><p id="33c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一些技术性的东西:</p><ul class=""><li id="af9a" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">您可以设置键:值对。</li><li id="03f7" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">您只能存储字符串。</li><li id="9e08" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">你可以存储数组和对象，但是你必须先把它们转换成字符串，使用一个叫做<code class="fe mu mv mw mx b">JSON.stringify()</code>和<code class="fe mu mv mw mx b">JSON.parse()</code>的方法。稍后将详细介绍。</li></ul><p id="c672" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是本地存储的方法:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/cdd1ea97daf9b162a94494ecac09481b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Z3qE9-WWRY7EeKtCCYnTQ.png"/></div></div></figure><p id="e9e3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将数据设置到本地存储:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/4398787fcdc2cadf6048db7abda4e556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gfVzKHYIi-ptyfujGhfwfw.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">它们被保存为键:值对。</p></figure><p id="262b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将数据设置到会话存储中:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/b05de4c273b81ebc99fa68192c23e381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0zyrKQg4fm_MNN-JXDsLdg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">这些也被保存为键:值对。</p></figure><p id="303e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你在你的浏览器(<code class="fe mu mv mw mx b">CMD+Option+J</code>)中进入你的控制台，进入应用程序选项卡，你可以看到你的数据。</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/882e4f3be8564b5ff41875bfac47635f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4Nm9E18NXEoUDCI92FGwA.png"/></div></div></figure><p id="7ff1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以<code class="fe mu mv mw mx b">get</code>从存储:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/aa27cf6c3a21402d17fa3c0cc1a142e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ihXrfGosVb4JnDVXVpNvw.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">使用console.log()作为显示数据的示例。</p></figure><p id="c6a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以从存储中<code class="fe mu mv mw mx b">remove</code>:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/a561f83f87decbc56108bf2e95c3083c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*F1zeBalW_pMLBIXUw4Jlpw.png"/></div></figure><p id="266b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以<code class="fe mu mv mw mx b">clear</code>全部从存储:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/81e43816392c875c3afd2cacb23e8291.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*8WMaYN4RruRHgZS_tRVMzg.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">数据将变为空。</p></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="95fa" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">示例:保存任务</h1><p id="842c" class="pw-post-body-paragraph jy jz iq ka b kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">快速举例。如果你有一个表单，比如说，一个任务列表，你想保存用户提交的任务，你可以这样做:</p><p id="6bf6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查找您的表单输入:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3662092b18514355214fb5f7b653eecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*mL7gBGxU992B16w-eQBR1A.png"/></div></figure><p id="2ffa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将事件<code class="fe mu mv mw mx b">‘submit’</code>添加到表单输入:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/2d875a803bf6b2a80dc87f548011dfdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sLm6yA-aehKuwqRa2WRIUg.png"/></div></div></figure><p id="97fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">抓取表单的输入<code class="fe mu mv mw mx b">value</code>:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/e8c6c17681f78b98c4453b4660f37dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BdL_QjCCPcibsf-MZTzvRg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">我有一个ID为“task”的输入标签，我使用value方法获取用户的输入，并将其存储在一个变量中。</p></figure><p id="3c32" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是有点棘手的部分。如果我们想要存储来自用户的多个任务，我们需要创建一个任务数组，并将其存储为一个字符串。</p><ol class=""><li id="9bf6" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv nq lc ld le bi translated">首先，我们需要检查本地存储中是否有内容，如果有，就将其取出并添加到。如果没有，设置一个空数组。</li></ol><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/e7cc5b0d24c94127d3aaae035175aabc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOEPBDBYUvKN_rEQfRF3Ng.png"/></div></div></figure><p id="1ea9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.现在我们想用一个叫做<code class="fe mu mv mw mx b">JSON.parse()</code>的方法来包装我们的<code class="fe mu mv mw mx b">localStorage.getItem(‘tasks’);</code>。然后，我们想把我们的<code class="fe mu mv mw mx b">task</code>变量传递给我们的<code class="fe mu mv mw mx b">tasks</code>变量。</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/13dfc1e27562474d23cbea9747d8e6ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FafKtaUbLdNFFKznrB3WOw.png"/></div></div></figure><p id="f3b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.我们将任务转换回字符串，因为我们只能在本地和会话存储中存储字符串。</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nt"><img src="../Images/725b48bfd477544a688caa4f4308cac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yC09_ehPmhD3ZkZe-MnDLg.png"/></div></div></figure><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/79329b8308d827070b3ff889c501d9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hjIwgoi8a3UHRTuxNZ0l0w.png"/></div></div></figure><p id="5bc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.现在，如果我们想遍历它并使用一个<code class="fe mu mv mw mx b">forEach()</code>，我们必须解析它，否则我们会得到<code class="fe mu mv mw mx b">TypeError</code> : <code class="fe mu mv mw mx b">forEach</code>不是一个函数错误，因为tasks是一个数组——我们从只存储字符串的本地存储中取出它。</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/88546d11551c76c9e57efe68a1f603fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*87p0e2WOSEcrVI9-Mb_a6Q.png"/></div></div></figure><p id="12b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>