# JavaScript 项目中的 6 个潜在优化

> 原文：<https://betterprogramming.pub/6-potential-optimizations-in-your-javascript-project-f9e944f012a4>

## 学习六种潜在的优化方法来提高你网站的性能

![](img/9aed98f02de48e31d7d67b52a9ed3b23.png)

来自 [Pexels](https://www.pexels.com/photo/time-lapse-photography-of-brown-concrete-building-842654/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的[张凯夫](https://www.pexels.com/@zhangkaiyv?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)的照片

优化代码的性能是你应该拥有的一项优秀技能。如果您编写的代码能够为最终用户提供出色的性能，那将是最好的。在你的项目中，可能有你可以改进的地方。您需要修复它们以避免糟糕的用户体验。

有一些工具和方法可以测量和分析性能，并发现您的应用程序如何运行。然而，在本文中，我将告诉您提高代码性能的潜在优化思路。

# 两种类型的性能

两个主要类别解释了术语性能:启动时性能和运行时性能。

**启动时间性能:**它是关于用户能多快地与网页交互并在屏幕上看到一些东西。每天，你都会访问一个网页。你知道当你遇到一个很慢的网页是什么感觉:很长时间过去了，直到它加载，看起来像是在加载，但当你点击某个地方时，什么也没有发生。令人沮丧。因此，启动时间性能是优化的一个重要部分。

**运行时性能:**页面加载后，网页也要有出色的性能，对于优化后的代码，要避免 bug。运行时性能是关于应用程序运行的流畅度，它保护用户免受冻结和延迟的影响。

例如，当你点击一个按钮时，如果网页上有一些动画，它们应该可以流畅地播放。

此外，您的代码的某些部分可能会在您的网站上运行的一些用户的设备上花费更多的内存。它可能会耗尽内存，浏览器可能会将其关闭。

您应该知道，性能不仅仅与您的 JavaScript 代码有关。CSS 代码、HTML 代码和服务器配置也会影响网页的性能。然而，在本文中，我将重点关注 JavaScript 代码中潜在的优化。

# 1.脚本大小

脚本大小是启动时间的一个重要因素。当用户打开网页时，您会强制用户下载脚本，然后才能在页面上看到任何内容。脚本大小既影响在屏幕上显示内容的时间，也影响用户与网页交互的时间。

延迟初始解析和执行。如果脚本在屏幕上渲染很多可视部分，会影响用户交互。例如，如果网页上的某些内容是可见的，但是脚本还没有完成下载，则图像还不能使用。因此，如果脚本变得更大，用户下载它们就需要更长的时间。

因为并不是每个访问你页面的用户都有很好的互联网连接，这会导致糟糕的用户体验。你应该做的是尽量保持脚本的长度尽可能小。

# 2.HTTP 往返

当 HTTP 往返次数增加时，会延迟初始解析和执行。如果您使用许多脚本文件，浏览器必须下载所有文件才能使您的页面工作。你发送的每个下载请求都是有代价的。所以是你要优化的部分。如果可能的话，最好在 HTTP 请求之前下载文件，而不是在 HTTP 请求之后下载。

您可以通过添加 [**webpack**](https://webpack.js.org/) 来优化 bot 大小和 HTTP 往返次数。Webpack 将优化并捆绑您的代码。

# 3.DOM 访问

您可以优化 DOM 访问。您需要避免不必要的代码执行，因此避免过多的 DOM 操作是一个很好的主意。

例如，如果在屏幕上不必要地重新呈现太多元素，就会影响性能，因为 DOM 在代码性能方面的代价很高。另外，当你使用 DOM 时，你不应该通过 JavaScript 添加和删除 HTML 元素。这可能会降低网站的性能。所以，如果你想优化你的网页性能，这是一个很好的避免部分。

# 4.内存泄漏

您可能没有意识到一些内存泄漏。然而，如果您有更大的内存泄漏，它们将导致您的页面变得更慢——在最坏的情况下，它们可能会使您的应用程序崩溃。

JavaScript 最常见的内存泄漏是时间监听器、事件监听器、观察器、窗口对象和保存 DOM 引用。有一篇关于这些常见 JavaScript 内存错误的优秀文章。[在这里，你可以学到一些在你的 web 应用中避免内存泄漏的技巧](/5-common-javascript-memory-mistakes-c8553972e4c2)。

# 5.具有更好性能的替代代码

在某些情况下，JavaScript 代码中可能有性能更好的替代代码。对于高频代码部分意义重大。

例如，在循环遍历一个数组时，通常有几种不同的方法。他们没有相同的表现。这也是一个你可以尝试优化的案例。

考虑下面的代码块:

```
for(var i = 0; i < arr.length; i++) {// Some logic here}
```

您可以按如下方式更改上面的代码:

```
var len = arr.length;for(var i = 0; i < len; i++) {// Some logic here}
```

如果这样做，代码就不需要为每个周期计算`array.lenght`。

# 6.微优化

您可以优化代码的特定用例。例如，如果您更改代码段的数据结构以优化性能。遍历数组是微优化的一个例子。您可以使用不同的结构进行优化，因为它比您已经实现的其他方法更快。

另一个微优化是可以在 JavaScript 中使用垃圾收集。

如果你不再需要它，你需要释放它。例如，您可以执行以下操作:

```
var x = 100;
x++;
```

另外，您可以在代码中的某个地方使用变量`x`，但是您不再需要它了。您可以使用如下函数来代替上述操作:

```
function increment() { var x = 100; x++; return x;
}
```

如果您使用此功能，它将在使用后释放分配给`x`的内存。这对于其他函数也是有效的，因为它们会释放所分配的内存。

优化代码的性能是 JavaScript 项目的重要一步。性能的不足可能会导致一些问题，比如网站最终用户的连接速度很慢。想想当你使用一个快速的网站时，你会感到多么幸福。快速的动画和交互是一种非常好的感觉。

有两个主要类别:启动时间和运行时间来优化您的网站的性能。您的 JavaScript 代码会影响这两者。您可以找到潜在的优化，并重构它们来加快您的网页。

六种潜在的优化可能是:

*   脚本大小
*   HTTP 往返
*   DOM 访问
*   内存泄漏
*   具有更好性能的替代代码
*   微优化

为了优化 JavaScript 代码的性能，您应该看看这些概念。