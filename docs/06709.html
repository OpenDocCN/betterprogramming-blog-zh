<html>
<head>
<title>How Optional Chaining Made My Code Awesome</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可选链接如何让我的代码棒极了</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-optional-chaining-made-my-code-awesome-e9c55ba53da?source=collection_archive---------12-----------------------#2020-10-27">https://betterprogramming.pub/how-optional-chaining-made-my-code-awesome-e9c55ba53da?source=collection_archive---------12-----------------------#2020-10-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0393" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">访问嵌套属性的安全方式，即使属性不存在</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1f5b2e0b7d8616398f729426a0f099d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MRU7O_-aOyshQiMs"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jlcruz_photography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jordan M. Lomibao </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="76b7" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">介绍</h1><p id="4b04" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如MDN <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">文档</a>中所述:</p><blockquote class="mu mv mw"><p id="a6e0" class="ly lz mx ma b mb my ju md me mz jx mg na nb mj mk nc nd mn mo ne nf mr ms mt im bi translated">"<strong class="ma iu">可选链接</strong>操作符(<code class="fe ng nh ni nj b"><strong class="ma iu">?.</strong></code>)允许读取位于连接对象链深处的属性值，而不必明确验证链中的每个引用是否有效。"</p></blockquote><p id="baf9" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">换句话说，使用<code class="fe ng nh ni nj b">?.</code>的可选链接是访问嵌套对象属性的安全方式——即使中间属性不存在。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="f5f6" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">我为什么要用这个？</h1><p id="179d" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">一个对象可以有非常不同的对象嵌套结构。在JavaScript中处理数据经常会遇到不确定某样东西是否存在的情况。</p><h2 id="0ac5" class="nk lh it bd li nl nm dn lm nn no dp lq mh np nq ls ml nr ns lu mp nt nu lw nv bi translated">例子</h2><p id="d899" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">例如，考虑应用程序数据的对象。我们的大多数应用程序在<code class="fe ng nh ni nj b">app.author</code>属性中有一个名为<code class="fe ng nh ni nj b">app.author.firstName</code>的作者，但是有些应用程序没有。</p><p id="7d6a" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">在这样的情况下，当我们试图获取<code class="fe ng nh ni nj b">app.author.firstName</code>时，我们可能会得到一个错误:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="1bc5" class="nk lh it nj b gy oa ob l oc od">let app = {}; // app object without author property</span><span id="904e" class="nk lh it nj b gy oe ob l oc od">console.log(<!-- -->app.author.firstName<!-- -->); // Error</span></pre><h2 id="6aca" class="nk lh it bd li nl nm dn lm nn no dp lq mh np nq ls ml nr ns lu mp nt nu lw nv bi translated">我们该如何解决这个问题？</h2><p id="3326" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">我们通常会使用如下条件运算符来检查该属性是否存在:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="4ec4" class="nk lh it nj b gy oa ob l oc od">let app = {};  </span><span id="15cb" class="nk lh it nj b gy oe ob l oc od">console.log(app.author ? app.author.firstName : undefined);</span></pre><p id="fefc" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">但是如果我们想读取作者的Twitter句柄呢？然后我们会继续写这个:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="32bb" class="nk lh it nj b gy oa ob l oc od">let app = {};</span><span id="2392" class="nk lh it nj b gy oe ob l oc od">console.log(app.author ? app.author.social ? app.author.social.twitter : undefined : undefined);</span></pre><p id="9ee2" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">这看起来好可怕<strong class="ma iu">，</strong>对不对？这时，可选链接就来帮忙了。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b3aa" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">可选链接(？。)</h1><p id="79fb" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">可选的链接<code class="fe ng nh ni nj b">?.</code>不是一个操作符，而是一个特殊的语法结构，如果<code class="fe ng nh ni nj b">?.</code>之前的部分没有被定义或者<code class="fe ng nh ni nj b">null</code>没有被定义，它将停止求值并返回<code class="fe ng nh ni nj b">undefined</code>。</p><p id="192e" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">对于上面的例子，编写代码的可选链接方式是:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="5ae4" class="nk lh it nj b gy oa ob l oc od">let app = {};</span><span id="e2c6" class="nk lh it nj b gy oe ob l oc od">console.log(app?.author?.social?.twitter); // undefined</span></pre><p id="2a12" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">在这个例子中，由于作者没有被定义，它在那之后停止评估并返回<code class="fe ng nh ni nj b">undefined</code>。这个语法看起来很简单，不是吗？</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="3191" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">可选链接的变体</h1><p id="f0bb" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">可选链接还有另外两种变体。您可以使用这种方法来调用函数，调用对象的属性，或者读取数组的条目。</p><h2 id="f2fe" class="nk lh it bd li nl nm dn lm nn no dp lq mh np nq ls ml nr ns lu mp nt nu lw nv bi translated">调用函数</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><h2 id="7697" class="nk lh it bd li nl nm dn lm nn no dp lq mh np nq ls ml nr ns lu mp nt nu lw nv bi translated">调用对象属性</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="f014" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">需要小心的事情</h1><h2 id="e2df" class="nk lh it bd li nl nm dn lm nn no dp lq mh np nq ls ml nr ns lu mp nt nu lw nv bi translated">1.之前的初始变量？。应该被定义</h2><p id="ea65" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如果没有定义初始变量，就会导致错误:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="52f7" class="nk lh it nj b gy oa ob l oc od">console.log(app?.author) // app is not defined</span></pre><h2 id="fbed" class="nk lh it bd li nl nm dn lm nn no dp lq mh np nq ls ml nr ns lu mp nt nu lw nv bi translated">2.使用？。用于读取和删除，但不能写入</h2><p id="6e32" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">不要在JS表达式的左边使用可选的链接。这会导致一个错误:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="3922" class="nk lh it nj b gy oa ob l oc od">let app = {};  <br/>app?.author = 'Harsha'; // Invalid left-hand side in assignment</span></pre></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="3d86" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">摘要</h1><p id="dae7" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">可选的链接<code class="fe ng nh ni nj b">?.</code>语法有三种形式:</p><ol class=""><li id="71b9" class="oh oi it ma b mb my me mz mh oj ml ok mp ol mt om on oo op bi translated">如果<code class="fe ng nh ni nj b">obj</code>存在，则<code class="fe ng nh ni nj b">obj?.prop</code>返回<code class="fe ng nh ni nj b">obj.prop</code>。否则，它返回<code class="fe ng nh ni nj b">undefined</code>。</li><li id="b1e1" class="oh oi it ma b mb oq me or mh os ml ot mp ou mt om on oo op bi translated">如果<code class="fe ng nh ni nj b">obj</code>存在，则<code class="fe ng nh ni nj b">obj?.[prop]</code>返回<code class="fe ng nh ni nj b">obj[prop]</code>。否则返回<code class="fe ng nh ni nj b">undefined</code>。</li><li id="1e29" class="oh oi it ma b mb oq me or mh os ml ot mp ou mt om on oo op bi translated">如果<code class="fe ng nh ni nj b">obj.method</code>存在，则<code class="fe ng nh ni nj b">obj.method?.()</code>调用<code class="fe ng nh ni nj b">obj.method()</code>。否则，返回<code class="fe ng nh ni nj b">undefined</code>。</li></ol></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="2696" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">参考</h1><div class="ov ow gp gr ox oy"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">可选链接(？。)</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">可选的链接操作符()允许读取一个位于连接的…链深处的属性值</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">developer.mozilla.org</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ks oy"/></div></div></a></div><div class="ov ow gp gr ox oy"><a href="https://javascript.info/optional-chaining" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">可选链接？.'</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">可选链接？。是访问嵌套对象属性的安全方式，即使中间属性不…</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">javascript.info</p></div></div><div class="ph l"><div class="pn l pj pk pl ph pm ks oy"/></div></div></a></div><p id="3627" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh nb mj mk ml nd mn mo mp nf mr ms mt im bi translated">我希望你觉得这篇文章很有趣。感谢您的阅读！</p></div></div>    
</body>
</html>