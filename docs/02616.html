<html>
<head>
<title>Build GitHub Actions with Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Typescript构建GitHub操作</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-github-actions-with-typescript-bc0442572825?source=collection_archive---------11-----------------------#2019-12-12">https://betterprogramming.pub/build-github-actions-with-typescript-bc0442572825?source=collection_archive---------11-----------------------#2019-12-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c325" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">它们跑得很快，到处都是</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cbc73de3002ac9f965c283ba5467c596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QXzjUZgGZH276DW0_gDytQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.pexels.com/photo/black-cat-holding-persons-arm-1049764/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae ky" href="https://www.pexels.com/@ruca-souza-32753?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Ruca Souza </a>拍摄的照片</p></figure><h2 id="0bbe" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">GitHub Actions是一个CI/CD平台</h2><p id="07e2" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">GitHub动作(至于其他<a class="ae ky" href="https://www.atlassian.com/continuous-delivery/continuous-integration" rel="noopener ugc nofollow" target="_blank"> CI/CD </a>服务/平台):</p><ul class=""><li id="77fc" class="mo mp it lx b ly mq mb mr li ms lm mt lq mu mn mv mw mx my bi translated">事件的触发器</li><li id="d014" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">准备环境</li><li id="81cb" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">运行工作流</li><li id="fb31" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">报告结果</li></ul><h2 id="28fc" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">GitHub动作可以是docker文件或Javascript</h2><p id="7159" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在<a class="ae ky" href="https://docs.docker.com/engine/reference/builder/" rel="noopener ugc nofollow" target="_blank"> Dockerfile </a>动作中:</p><ul class=""><li id="cb5b" class="mo mp it lx b ly mq mb mr li ms lm mt lq mu mn mv mw mx my bi translated">环境由<a class="ae ky" href="https://medium.com/@jessgreb01/digging-into-docker-layers-c22f948ed612" rel="noopener">容器层</a>定义</li><li id="7929" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">工作流是由入口点bash脚本定义的</li></ul><p id="cae6" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">在JavaScript操作中:</p><ul class=""><li id="c5cf" class="mo mp it lx b ly mq mb mr li ms lm mt lq mu mn mv mw mx my bi translated">在<code class="fe nh ni nj nk b"><a class="ae ky" href="https://docs.npmjs.com/files/package.json" rel="noopener ugc nofollow" target="_blank">package.json</a></code>中，环境被定义为NPM模块</li><li id="67f0" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">工作流由JavaScript/TypeScript代码定义</li></ul><h2 id="56d6" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">JavaScript动作更快、更稳定</h2><p id="d1df" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">与<a class="ae ky" href="https://docs.docker.com/engine/reference/builder/" rel="noopener ugc nofollow" target="_blank"> Dockerfile </a>动作相比，JavaScript动作的优势在于:</p><ul class=""><li id="4ada" class="mo mp it lx b ly mq mb mr li ms lm mt lq mu mn mv mw mx my bi translated">大多数web/移动/后端开发人员熟悉的语法</li><li id="7511" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">随处运行(JavaScript比Docker限制更少)</li><li id="d617" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">跳过容器构建和虚拟机预热，运行速度更快。</li></ul><p id="42dc" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated"><em class="nl">注:让我们善待自己，用</em><a class="ae ky" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"><em class="nl">TypeScript</em></a><em class="nl">代替JavaScript吧！</em></p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="f709" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">步骤1:配置操作</h1><p id="3b43" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">该配置将让GitHub知道如何运行该操作，以及如何将其列在GitHub marketplace上。</p><p id="2197" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">该配置由一个<code class="fe nh ni nj nk b">yaml</code>文件<code class="fe nh ni nj nk b">action.yml</code>定义，该文件包含:</p><ul class=""><li id="f757" class="mo mp it lx b ly mq mb mr li ms lm mt lq mu mn mv mw mx my bi translated">动作的名称</li><li id="8726" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">动作的参数</li><li id="95a1" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn mv mw mx my bi translated">运行操作的入口点</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/f92834ee2da8b9170f5ab873c243a697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBdernYfWkpoZPBa4OH-KA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">致谢:GitHub动作配置示例来自<a class="ae ky" href="https://github.com/tianhaoz95/readable-readme" rel="noopener ugc nofollow" target="_blank"> readable-readme </a></p></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="81c5" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">步骤2:实现微服务</h1><ol class=""><li id="8edc" class="mo mp it lx b ly lz mb mc li of lm og lq oh mn oi mw mx my bi translated">为您的神奇动作编写源代码:</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/8bae4d22abef35f93a023ec41c1f09be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njRi0WX_7HO6SElmzugdJA.png"/></div></div></figure><p id="68a6" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">2.编译成JavaScript代码，并将它们添加到源代码控制中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/9275b826e550815e53205c4a2e490852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sNwY2YBcYpxzyoISszQJNw.png"/></div></div></figure><p id="daf3" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">3.指向编译后的JavaScript代码的动作入口点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/030fdc213e9cd0ac95ea2c54c75724b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZq61HMXHr__PPyK4bHyCw.png"/></div></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="0a35" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">步骤3:发布操作</h1><p id="ede2" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">发布您的操作意味着在您的存储库中发布！</p><ol class=""><li id="6175" class="mo mp it lx b ly mq mb mr li ms lm mt lq mu mn oi mw mx my bi translated">给它一个版本号(<a class="ae ky" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">语义版本化</a>首选。)</li><li id="c3e4" class="mo mp it lx b ly mz mb na li nb lm nc lq nd mn oi mw mx my bi translated">留下一个简短的发布描述。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/581ad537a8016cea971bb89554c11794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c2eaVyn65hGRZPe-cBnXkA.png"/></div></div></figure><p id="1cbd" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">3.放松一下，喝杯咖啡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/04bd7ce5c8b35768ece4759e7f3d8ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LQGocpeuut5eXOtetvFMYg.png"/></div></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="17d1" class="nt la it bd lb nu nv nw le nx ny nz lh jz oa ka ll kc ob kd lp kf oc kg lt od bi translated">第四步:开始使用动作</h1><p id="f879" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">1.将已发布的操作添加到工作流程中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/c8b9eed6a0b89ad6c0fa549f86c79588.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvM4GJArmdVJXJDh5cGOEQ.png"/></div></div></figure><p id="23a3" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">2.看结果，再来一杯咖啡！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/f34221524fe65750dffd7e8c7359c195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2mOi9_do8E7GchFFrxgXQ.png"/></div></div></figure><p id="7e51" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">3.此操作链接文档并生成报告:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/2a1d3c80e1135f1d4fc2c01a7e51d67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TePF9xwOMOl4Xbxtm0GMyQ.png"/></div></div></figure><p id="3cb5" class="pw-post-body-paragraph lv lw it lx b ly mq ju ma mb mr jx md li ne mf mg lm nf mi mj lq ng ml mm mn im bi translated">用于此演示的代码可在此处找到:</p><div class="or os gp gr ot ou"><a href="https://github.com/tianhaoz95/readable-readme" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">天昊95/可读-自述</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">如果README不可读，那么其他任何东西都不可读。我们经常发现一个伟大的项目，但仅仅5分钟后就放弃了…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">github.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>