<html>
<head>
<title>Improve Your Workflow With These 4 GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这4个GitHub动作改善你的工作流程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/improve-your-workflow-with-these-4-github-actions-7b2fbd29f752?source=collection_archive---------5-----------------------#2019-11-27">https://betterprogramming.pub/improve-your-workflow-with-these-4-github-actions-7b2fbd29f752?source=collection_archive---------5-----------------------#2019-11-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4211" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这里有4个有用的GitHub动作来改善你的工作流程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b7dfe665219d0744351170ef9a131aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SVlSSi6ZRXbBzezY"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">潘卡杰·帕特尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="3eeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在GitHub上托管你的代码，你可以利用<a class="ae ky" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> GitHub动作</a>。您可以利用GitHub动作来完成这些任务，而不是手动运行所有的测试和linters。</p><p id="da0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，这里有四个省时的GitHub动作，可以改善你的工作流程。如果你不确定Github动作是什么以及如何使用它们——我建议<a class="ae ky" href="https://medium.com/better-programming/github-actions-the-what-why-and-how-3868d5a86292" rel="noopener">先阅读这篇文章</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cb0c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.用谷歌浏览器的灯塔测试来审核你的网页</h1><p id="f627" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这一行动整合了谷歌对网页有益的<a class="ae ky" href="https://developers.google.com/web/tools/lighthouse/" rel="noopener ugc nofollow" target="_blank"> Lighthouse审计</a>——特别是对性能、可访问性、最佳实践、SEO和渐进式网络应用的测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/9cf4610372add8af8a71615ad0137c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1EP69sh4F2_CjWWIPY2GA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Github灯塔行动—<a class="ae ky" href="https://github.com/marketplace/actions/lighthouse-audit" rel="noopener ugc nofollow" target="_blank">https://github.com/marketplace/actions/lighthouse-audit</a></p></figure><p id="beec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，该操作将把五个分数(满分为100)打印到输出中，并将报告的HTML和JSON版本作为工件上传。</p><p id="a2c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一个版本中，该操作将允许您为每个测试指定阈值，如果没有达到阈值，则可以选择不执行该步骤。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/9e3380c0269582722eda5958b5967413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Zfs1UtUm0_HqrD3H.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lighthouse审计报告示例</p></figure><h2 id="8fdc" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">使用</h2><p id="2941" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">以下工作流对<a class="ae ky" href="https://jarv.is/" rel="noopener ugc nofollow" target="_blank"> jarv.is </a>运行Lighthouse审计，在该步骤的输出中显示五个分数，并将<code class="fe nn no np nq b">.html</code>和<code class="fe nn no np nq b">.json</code>结果作为工件上传以供下载(如上所示)。</p><p id="df75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">workflow.yml</code>文件:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="81ef" class="nb md it nq b gy nv nw l nx ny">name: Audit live site<br/>on: push</span><span id="b25b" class="nb md it nq b gy nz nw l nx ny">jobs:<br/>  audit:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>    - name: Audit live URL<br/>      uses: jakejarvis/lighthouse-action@master<br/>      with:<br/>        url: 'https://jarv.is/'<br/>    - name: Upload results as an artifact<br/>      uses: actions/upload-artifact@master<br/>      with:<br/>        name: report<br/>        path: './report'</span></pre><p id="84f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你在构建渐进式网络应用时，Lighthouse非常有用。这个项目的灵感来自于GoogleChromeLabs/lighthousebot。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a9b9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.使用GitHub操作运行SSH命令</h1><p id="c50b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">该操作将通过SSH在您的$HOST上运行所提供的参数作为命令。如果您想在每次提交或推送后在您的专用服务器上运行命令，这很有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/fdab162b432da408d5a105bc1323a409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/0*sAxgwo9IVi0bK0Z1.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">宋承宪GitHub动作—<a class="ae ky" href="https://github.com/maddox/actions/tree/master/ssh" rel="noopener ugc nofollow" target="_blank">https://github.com/maddox/actions/tree/master/ssh</a></p></figure><h2 id="dcd5" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">使用</h2><p id="2b7b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要使用该操作，只需在您的<code class="fe nn no np nq b">.github/main.workflow</code>中添加以下几行:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="912e" class="nb md it nq b gy nv nw l nx ny">action "Run deploy script" {<br/>  uses = "maddox/actions/ssh@master"<br/>  args = "/opt/deploy/run"<br/>  secrets = [<br/>    "PRIVATE_KEY",<br/>    "HOST",<br/>    "USER"<br/>  ]<br/>}</span></pre><h2 id="dad8" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">必需的参数</h2><p id="59f9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您将使用的参数是将通过SSH在您的服务器上运行的命令。</p><h2 id="d490" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">例子</h2><ul class=""><li id="29bd" class="ob oc it lb b lc mu lf mv li od lm oe lq of lu og oh oi oj bi translated"><code class="fe nn no np nq b">args = "/opt/deploy/run"</code></li><li id="0bc6" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated"><code class="fe nn no np nq b">args = "touch ~/.reload"</code></li></ul><h2 id="5ba9" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">必需的秘密</h2><p id="7f61" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您需要提供一些使用该操作的秘密。</p><ul class=""><li id="e92f" class="ob oc it lb b lc ld lf lg li op lm oq lq or lu og oh oi oj bi translated"><code class="fe nn no np nq b">PRIVATE_KEY</code>:你的SSH私钥。</li><li id="cf2a" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated"><code class="fe nn no np nq b">HOST</code>:主机动作将SSH运行命令。比如<code class="fe nn no np nq b">your.site.com</code>。</li><li id="5c81" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated"><code class="fe nn no np nq b">USER</code>:SSH命令将使用私钥对用户进行身份验证。</li></ul><p id="f7e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请参见<a class="ae ky" href="https://github.com/maddox/actions/tree/master/ssh" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>了解全部细节。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9fe3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.检测密钥泄漏—gitleaks—操作</h1><p id="dc34" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用<a class="ae ky" href="https://github.com/zricethezav/gitleaks" rel="noopener ugc nofollow" target="_blank"> gitleaks </a>审计Git提交的秘密，作为GitHub动作。如果你使用<code class="fe nn no np nq b">.env</code>文件，这个动作会通知你是否曾经不小心发布了秘密。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/dc2ed6be8778fbf94d147707cc03a4d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbqbTaOk4BnW5jM-8PhVBQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">git leaks-action—<a class="ae ky" href="https://github.com/eshork/gitleaks-action" rel="noopener ugc nofollow" target="_blank">https://github.com/eshork/gitleaks-action</a></p></figure><h2 id="e26f" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">使用</h2><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="696d" class="nb md it nq b gy nv nw l nx ny">workflow "gitleaks my commits" {<br/>  on = "push"<br/>  resolves = ["gitleaks"]<br/>}</span><span id="bc37" class="nb md it nq b gy nz nw l nx ny">action "gitleaks" {<br/>  uses = "eshork/gitleaks-action@master"<br/>}</span></pre><p id="3dbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢<a class="ae ky" href="https://github.com/zricethezav/gitleaks" rel="noopener ugc nofollow" target="_blank"> zricethezav/gitleaks </a>提供了复杂的位。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="735b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.运行ESLint的GitHub操作</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/e086f62ee785410eb1d49e598f1796fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVADN2lyD-8s-Cf9AoVvCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">https://github.com/stefanoeb/eslint-action</p></figure><p id="e94c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该操作在指定的JavaScript文件上执行<a class="ae ky" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a> linter，而不需要任何先前的操作/构建步骤或<a class="ae ky" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。</p><p id="297f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要执行该操作，必须在本地运行ESLint。它将使用与本地相同的规则。ESLint入门指南中的更多信息<a class="ae ky" href="https://eslint.org/docs/user-guide/getting-started#installation-and-usage" rel="noopener ugc nofollow" target="_blank"/></p><h2 id="5ba4" class="nb md it bd me nc nd dn mi ne nf dp mm li ng nh mo lm ni nj mq lq nk nl ms nm bi translated">使用</h2><p id="ad90" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">将以下任何示例添加到您的工作流文件<code class="fe nn no np nq b">.github/main.workflow</code>中。</p><p id="88ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个让它工作的例子:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="ae73" class="nb md it nq b gy nv nw l nx ny">workflow "New workflow" {<br/>  on = "push"<br/>  resolves = ["ESLint"]<br/>}</span><span id="388a" class="nb md it nq b gy nz nw l nx ny">action "ESLint" {<br/>  uses = "stefanoeb/eslint-action@master"<br/>}</span></pre><p id="9ec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，它将通过项目中的所有文件运行ESLint。但是您也可以在<code class="fe nn no np nq b">args</code>上指定一堆文件，就像ESLint:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="276c" class="nb md it nq b gy nv nw l nx ny">workflow "New workflow" {<br/>  on = "push"<br/>  resolves = ["ESLint"]<br/>}</span><span id="02a5" class="nb md it nq b gy nz nw l nx ny">action "ESLint" {<br/>  uses = "stefanoeb/eslint-action@master"<br/>  args = "index.js src/**.js"<br/>}</span></pre><p id="2ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果没有安装必要模块的前一步骤，该动作将自动执行<code class="fe nn no np nq b">yarn install</code>或<code class="fe nn no np nq b">npm install</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="09c1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="af6b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">感谢阅读，我希望你学到了新的东西。如果您知道任何有用的GitHub操作，请告诉我们。保持好奇，快乐编码！</p></div></div>    
</body>
</html>