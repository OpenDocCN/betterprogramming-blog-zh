<html>
<head>
<title>Easily Create Pagination Functionality From Scratch in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中从头开始轻松创建分页功能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/easily-create-pagination-functionality-from-scratch-a738837ed6f2?source=collection_archive---------13-----------------------#2020-04-01">https://betterprogramming.pub/easily-create-pagination-functionality-from-scratch-a738837ed6f2?source=collection_archive---------13-----------------------#2020-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c140" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">加速您的应用程序，实现和显示分页</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/02620ad155e2e411fe5f4bf0aadcf03f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yx_6kQVDMQQm3pXq8i9pcQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马文·朗斯多夫在<a class="ae ky" href="https://unsplash.com/s/photos/numbers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7f3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将在React中实现一个简单的分页组件，使用<a class="ae ky" href="https://randomuser.me/" rel="noopener ugc nofollow" target="_blank">随机用户生成器</a> API显示随机用户列表。</p><p id="e0ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="ff48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<a class="ae ky" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> Create React App </a>来初始化项目。</p><p id="236f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过运行以下命令创建一个新项目:</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="5b28" class="mh mi it md b gy mj mk l ml mm">create-react-app pagination-from-scratch</span></pre><p id="f8d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">项目创建完成后，删除<code class="fe mn mo mp md b">src</code>文件夹中的所有文件，在<code class="fe mn mo mp md b">src</code>文件夹中创建<code class="fe mn mo mp md b">index.js</code>、<code class="fe mn mo mp md b">App.js</code>、<code class="fe mn mo mp md b">styles.css</code>文件。同样，在<code class="fe mn mo mp md b">src</code>文件夹中创建<code class="fe mn mo mp md b">components</code>和<code class="fe mn mo mp md b">utils</code>文件夹。</p><p id="447f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的文件夹结构将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/8f9aabe507538612791984d69f5b2af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nxjPCc3gt0Zxo9J9U-kHQ.png"/></div></div></figure><p id="f17d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用以下工具安装<a class="ae ky" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> axios npm包</a>:</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="7c01" class="mh mi it md b gy mj mk l ml mm">yarn add axios@0.19.2</span></pre><p id="9b29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe mn mo mp md b">index.js</code>并添加以下代码:</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="12c3" class="mh mi it md b gy mj mk l ml mm">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import App from './App';<br/>import './styles.css';</span><span id="503c" class="mh mi it md b gy mr mk l ml mm">ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));</span></pre><p id="e15d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe mn mo mp md b">styles.css</code>并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="9cc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mn mo mp md b">src/utils</code>文件夹中，用下面的声明创建<code class="fe mn mo mp md b">constants.js</code>:</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="19c9" class="mh mi it md b gy mj mk l ml mm">export const USERS_PER_PAGE = 5;</span></pre><p id="42d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mn mo mp md b">src/components</code>内部，用以下代码创建<code class="fe mn mo mp md b">Users.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="b844" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们从主<code class="fe mn mo mp md b">App.js</code>组件中获取用户列表和当前页码，并从用户列表中计算要显示的用户的起始和结束位置。</p><p id="d088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mn mo mp md b">src/components</code>文件夹中，用以下代码创建<code class="fe mn mo mp md b">User.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="0629" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们只是显示来自<code class="fe mn mo mp md b">Users.js</code>组件的用户详细信息。</p><p id="4166" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mn mo mp md b">src/components</code>内，用下面的代码创建<code class="fe mn mo mp md b">Pagination.js</code>文件夹:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="178b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们从<code class="fe mn mo mp md b">App.js</code>中获取<code class="fe mn mo mp md b">totalPages</code>、页码和点击处理程序作为道具，并通过用数字初始化一个空数组来创建分页数组。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="9c32" class="mh mi it md b gy mj mk l ml mm">const pages = [...Array(totalPages).keys()].map(number =&gt; number + 1);</span></pre><p id="3ecb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们将这些数字显示为页码。</p><p id="3ad2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mn mo mp md b">src/App.js</code>内部，添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="37d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们使用React钩子来声明状态和处理生命周期方法。</p><p id="2449" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不熟悉React钩子，可以看看我的文章中的介绍。</p><p id="d1c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们了解一下代码是做什么的。</p><p id="6e6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经声明了具有初始状态的变量和使用<code class="fe mn mo mp md b">useState</code>钩子更新该状态的方法。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="69a5" class="mh mi it md b gy mj mk l ml mm">const [users, setUsers] = useState([]);<br/>const [page, setPage] = useState(1);<br/>const [totalPages, setTotalPages] = useState(0);<br/>const [isLoading, setIsLoading] = useState(false);</span></pre><p id="89b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，在<code class="fe mn mo mp md b">useEffect</code>钩子中，我们进行一个API调用来获得一个50个随机用户的列表，并在收到响应时设置各自的状态变量。</p><p id="d032" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们已经添加了一个空数组<code class="fe mn mo mp md b">[]</code>作为<code class="fe mn mo mp md b">useEffect</code>钩子的第二个参数，所以当组件被挂载时，<code class="fe mn mo mp md b">useEffect</code>中的代码将只执行一次。这类似于<code class="fe mn mo mp md b">componentDidMount</code>生命周期方法。</p><p id="4af6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还在响应到来时显示加载消息，因此我们在进行API调用之前将加载状态设置为<code class="fe mn mo mp md b">true</code>，并在收到响应时使用<code class="fe mn mo mp md b">setIsLoading</code>方法将其设置为<code class="fe mn mo mp md b">false</code>。在render方法中，我们检查<code class="fe mn mo mp md b">isLoading</code>状态，并根据当前页码显示用户。</p><p id="93f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当您运行应用程序时，通过运行<code class="fe mn mo mp md b">yarn start</code>命令，您可以看到带有分页的工作应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/bc3d3a438f36769e469cbdcf92380b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3iMMnmikx-pU5vGAhe8mRQ.png"/></div></div></figure><p id="fd5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在GitHub上找到这个应用程序的完整源代码和现场演示。</p><p id="7364" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天到此为止。我希望你学到了新东西。</p><p id="cff9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要忘记订阅我的每周简讯，里面有惊人的技巧、诀窍和文章，直接在你的收件箱 <a class="ae ky" href="https://yogeshchavan.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这里。</strong>T25】</a></p></div></div>    
</body>
</html>