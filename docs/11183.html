<html>
<head>
<title>The Complete Guide to Convert Python Notebook Into an Interactive Web Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Python Notebook转换成交互式Web应用程序的完整指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-complete-guide-for-converting-python-notebook-into-interactive-web-application-1288ae22b5cf?source=collection_archive---------5-----------------------#2022-02-24">https://betterprogramming.pub/a-complete-guide-for-converting-python-notebook-into-interactive-web-application-1288ae22b5cf?source=collection_archive---------5-----------------------#2022-02-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fef1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">轻松创建和部署用于金融数据技术分析的web应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e3721b222dfcbd9ae3b7e6300845481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Dek4hfE-b8mHoGkI"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">尼古拉斯·卡佩罗在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="821f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你好。本文准备用python语言对金融数据进行技术分析，并将我们编写的代码转换成交互式web应用程序。</p><p id="8dbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">技术分析是理解金融股票数据、货币或不同类型的金融时间序列数据的最简单的方法。大多数程序员或数据科学家使用python语言对金融数据进行基本分析，因为它非常简单易用。</p><p id="f5d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了财务分析代码之外，我还想向您展示如何快速轻松地将python笔记本转换成web应用程序。对你团队里不懂编程的人可能会有帮助。</p><p id="9a96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您的python笔记本代码可以转换为交互式web应用程序，那么每个人都会使用您的python应用程序。因此，这篇文章解释了如何可视化python代码并使其易于使用。技术分析应用程序就是一个例子…</p><blockquote class="ls lt lu"><p id="8bc0" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">这不是投资建议。我只是想展示如何用python语言中最常用的技术指标来审核财务数据。</p></blockquote><p id="24f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/mljar/mercury" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">水星</strong> </a> <strong class="ky ir"> </strong>是一个强大的工具，用于将构建在python笔记本上的数据科学应用程序转换为交互式web应用程序。在本文中，我使用python笔记本上的财务指标创建了一个财务数据分析应用程序，并使用mercury将其转换为web应用程序，然后部署到Heroku free dyno服务以在Web上使用。我认为该工具对于python开发人员或任何懂python语言的人来说都非常有用，它将简化快速分析。在这篇文章的最后，你将会有一个指示板给任何不懂编程的人看。</p><p id="6371" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，您将学习如何:</p><ul class=""><li id="81a2" class="lz ma iq ky b kz la lc ld lf mb lj mc ln md lr me mf mg mh bi translated">计算一些技术指标并用python语言对财务数据进行可视化，</li><li id="9fae" class="lz ma iq ky b kz mi lc mj lf mk lj ml ln mm lr me mf mg mh bi translated">在Jupyter笔记本或visual studio代码Jupyter扩展中创建仪表板，</li><li id="23e7" class="lz ma iq ky b kz mi lc mj lf mk lj ml ln mm lr me mf mg mh bi translated">使用<a class="ae kv" href="https://github.com/mljar/mercury" rel="noopener ugc nofollow" target="_blank"> Mercury </a>将笔记本转换为动态网络应用程序，</li><li id="3a07" class="lz ma iq ky b kz mi lc mj lf mk lj ml ln mm lr me mf mg mh bi translated">将基于笔记本的仪表盘应用程序部署到Heroku free dyno。</li></ul></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="dd11" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">技术分析和指标</h1><h2 id="ff50" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">移动平均线</h2><p id="aee9" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">在金融中，移动平均线(MAs)是技术分析中常用的技术指标。计算股票的移动平均线是通过创建不断更新的平均价格来帮助平滑价格数据。它可以支持理解价格何时上涨或下跌。在python语言中，一个简单的移动平均可以像下面的代码一样计算。同时也是我python笔记本的一部分。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="ca27" class="nm mv iq oe b gy oi oj l ok ol">## calculate 7days, 14days, 21days moving averages<br/>techAnalysis=finData[["Close"]]<br/>if ma_7d:<br/>    techAnalysis["ma_7d"]=techAnalysis["Close"].rolling(5).mean()<br/>if ma_14d:<br/>    techAnalysis["ma_14d"]=techAnalysis["Close"].rolling(14).mean()<br/>if ma_21d:<br/>    techAnalysis["ma_21d"]=techAnalysis["Close"].rolling(21).mean()</span></pre><p id="2538" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这段代码中，7天、14天和21天的移动平均线是根据“<strong class="ky ir">收盘</strong>数据计算的。</p><h2 id="e4cb" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">MACD</h2><p id="840e" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">MACD指标是一个趋势动量指标，它是根据两个不同的价格变量来观察的。它是用12天指数移动平均线减去26天指数移动平均线得到的。MACD指标中的信号被用来触发买卖。<br/>在python语言中，MACD指标可以这样计算如下。我在mercury应用程序中使用了这种方式。在python语言中，这是一种非常简单有效的计算MACD的方法。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="3369" class="nm mv iq oe b gy oi oj l ok ol"><em class="lv"># calculate MACD </em></span><span id="68d0" class="nm mv iq oe b gy om oj l ok ol">if "MACD" in indicators:<br/>   k = techAnalysis['Close'].ewm(<em class="lv">span</em>=12, <em class="lv">adjust</em>=False,              <em class="lv">min_periods</em>=12).mean()</span><span id="f355" class="nm mv iq oe b gy om oj l ok ol">   d = techAnalysis['Close'].ewm(<em class="lv">span</em>=26, <em class="lv">adjust</em>=False, <em class="lv">min_periods</em>=26).mean()</span><span id="4152" class="nm mv iq oe b gy om oj l ok ol">   macd=k-d</span><span id="d388" class="nm mv iq oe b gy om oj l ok ol">   macd_s = macd.ewm(<em class="lv">span</em>=9, <em class="lv">adjust</em>=False, <em class="lv">min_periods</em>=9).mean()</span><span id="aca9" class="nm mv iq oe b gy om oj l ok ol">   macd_h = macd - macd_s</span><span id="3caf" class="nm mv iq oe b gy om oj l ok ol">   techAnalysis['macd_h'] = techAnalysis.index.map(macd_h)</span><span id="87b8" class="nm mv iq oe b gy om oj l ok ol">   techAnalysis['macd_s'] = techAnalysis.index.map(macd_s)</span></pre><p id="cb7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这段代码中，我们计算了MACD指示器、MACD信号和MACD直方图，并将它们保存到<code class="fe on oo op oe b">techAnalysis</code>数据帧中。</p><h2 id="c770" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">相对强度指数</h2><p id="7007" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">相对(相对)强度指数(RSI)是一个指标，它通过比较相关时期的收盘值与该时期的前一个收盘值来预测短期和中期趋势的方向。了解投资者何时会卖出或买入对我们很有帮助。<br/>在这段代码中，我使用了<code class="fe on oo op oe b">pandas_ta</code>模块来计算RSI。在python中，这是一种非常简单快捷的方法。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="d6f2" class="nm mv iq oe b gy oi oj l ok ol"><em class="lv">## RSI calculate<br/></em>if "RSI" in indicators:<br/>import pandas_ta as pta<br/>techAnalysis["RSI"]=pta.rsi(techAnalysis["Close"],<em class="lv">lenght</em>="14")</span></pre><p id="3642" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们在<code class="fe on oo op oe b">techAnalysis</code>数据框中有了“RSI”栏。</p><h2 id="c5ea" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">卷</h2><p id="b47d" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">体积数据可以使用指示器。它显示了在市场中某一段时间内有多少股票易手。投资者通常使用交易量数据来解释和确认价格变动。<br/>在这个应用程序中，交易量数据被添加到最后一个图表中，以告知投资者关于价格m的更多信息</p><h1 id="7257" class="mu mv iq bd mw mx oq mz na nb or nd ne jw os jx ng jz ot ka ni kc ou kd nk nl bi translated">创建Python环境并安装Mercury</h1><p id="5def" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">如果你想清理环境，我建议你创建一个python虚拟环境并使用它。我正在使用python <code class="fe on oo op oe b">virtualenv</code>包创建一个python虚拟环境。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="4702" class="nm mv iq oe b gy oi oj l ok ol">python3 -m pip install virtualenv</span></pre><p id="6348" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，让我们为这个项目创建一个虚拟环境。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="b313" class="nm mv iq oe b gy oi oj l ok ol">python -m venv my_env</span></pre><p id="896b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有一个环境，我们必须激活它来使用下面的代码。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="db39" class="nm mv iq oe b gy oi oj l ok ol">cd my_env<br/>source bin/activate</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/a43ba4bef2c455a6d7568266bceb3fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*jnsknCoSKdghpEIbSCf9qg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">my_env在zsh上被激活(fino主题)——<em class="ow">图片作者</em></p></figure><p id="c031" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe on oo op oe b">my_env</code>被激活。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="b709" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用所用的python函数和模块，您应该安装下面所需的包。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="ce7b" class="nm mv iq oe b gy oi oj l ok ol">matplotlib       <br/>pandas                             <br/>pandas-ta                             <br/>numpy                             <br/>pandas_datareader                             <br/>requests                             <br/>mplfinance                             <br/>beautifulsoup4                             <br/>mljar-mercury</span></pre><p id="b23d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以复制全部并粘贴到<strong class="ky ir"> </strong> <code class="fe on oo op oe b">requirements.txt</code>文件中。然后，您可以运行下面的命令，轻松安装所有需要的软件包。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="bd4c" class="nm mv iq oe b gy oi oj l ok ol">pip install -r requirements.text</span></pre><h2 id="5727" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">控制Mercury服务器</h2><p id="47d0" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">现在，让我们快速控制水星服务器。一个简单的命令就足以做到这一点。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="07f1" class="nm mv iq oe b gy oi oj l ok ol">mercury runserver — runworker</span></pre><p id="a8e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们在您的网络浏览器上检查一下<strong class="ky ir"> </strong> <code class="fe on oo op oe b">https:127.0.0.1/8000</code>地址。如果你能看到下面的页面，你就成功了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/dd9cc4d6f6622eb6d09199483d098d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1SunR7w2J7r3s11TofwsA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">水星服务器欢迎页面— <em class="ow">作者图片</em></p></figure><p id="79a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要编码，可以使用Jupyter笔记本或vs code Jupyter扩展。需要注意的是，在使用Jupyter笔记本或vs代码时，应该选择Jupyter内核<code class="fe on oo op oe b">my_env</code> <strong class="ky ir"> </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/1d17738076b7d1067f2dcfe0efeaf72e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qClLAXmitc2EzWTqH5LdVw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">选择Jupyter内核作为my_env(红色区域)——<em class="ow">作者图片</em></p></figure><p id="9864" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果看不到my_env，必须将虚拟内核添加到Jupyter内核中。为此，您将通过pip安装Jupyter包，并通过<code class="fe on oo op oe b">ipykernel</code> <strong class="ky ir"> </strong>包添加内核。在<code class="fe on oo op oe b">my_env</code>目录中，你应该运行下面的命令或者阅读共享<a class="ae kv" href="https://ipython.readthedocs.io/en/stable/install/kernel_install.html" rel="noopener ugc nofollow" target="_blank">链接</a>中的文档。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="2466" class="nm mv iq oe b gy oi oj l ok ol">python3 -m pip install jupyter ipykernel<br/>python -m ipykernel install --user --name myenv"</span></pre><p id="d7be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用下面的命令检查已安装的Jupyter内核。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="31a8" class="nm mv iq oe b gy oi oj l ok ol">Jupyter kernelspec list</span></pre><p id="c6a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您可以透过其他内核看到该内核，那么您可以确保它已安装到代码中。</p><p id="9e4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了！让我们回顾一下我的代码，并轻松地将其转换为web应用程序！！</p><h1 id="7143" class="mu mv iq bd mw mx oq mz na nb or nd ne jw os jx ng jz ot ka ni kc ou kd nk nl bi translated">创建用于财务分析的python笔记本</h1><h2 id="0afe" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">雅虎财经</h2><p id="3c7f" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">Yahoo finance是一个有用的网站，可以简单快速地收集最多的财务数据。这里可以免费获取历史数据<a class="ae kv" href="http://finance.yahoo.com" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="de8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我使用下面的代码通过python从yahoo finance收集财务数据。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="8690" class="nm mv iq oe b gy oi oj l ok ol">import pandas_datareader as dr</span><span id="c454" class="nm mv iq oe b gy om oj l ok ol"><em class="lv">## date yyyy-dd-mm<br/></em>start_date= "2015-01-01"<br/>end_date=date.today()<br/>finData=dr.data.get_data_yahoo(ticket,<em class="lv">start</em>=start_date,<em class="lv">end</em>=end_date)</span></pre><p id="aea5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe on oo op oe b">pandas_datareader</code>模块包含了<code class="fe on oo op oe b">get_data_yahoo</code> <strong class="ky ir"> </strong>功能，我们可以方便的收集历史数据。</p><h2 id="6be3" class="nm mv iq bd mw nn no dn na np nq dp ne lf nr ns ng lj nt nu ni ln nv nw nk nx bi translated">让我们分析一下财务数据</h2><p id="3215" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">在这个应用程序中，一些移动平均线、MACD、RSI指标和成交量数据用于对任何金融数据进行简单的技术分析。</p><p id="0e76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我绘制了过去N天的蜡烛图开盘价-收盘价-最高价-最低价数据和这些指标。所有代码都被推送到我的GitHub库，你可以在下面的要点查看代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oz pa l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">金融分析师-水星所有代码-作者要点</p></figure><h1 id="ec54" class="mu mv iq bd mw mx oq mz na nb or nd ne jw os jx ng jz ot ka ni kc ou kd nk nl bi translated">将python notebook转换为web应用程序</h1><p id="aa95" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated"><strong class="ky ir">第一步。</strong>添加YAML单元格— <a class="ae kv" href="https://github.com/mljar/mercury" rel="noopener ugc nofollow" target="_blank"> Mercury framework </a>允许您通过在笔记本的开头添加YAML标题来定义笔记本的小部件。</p><p id="58f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，您必须在python笔记本的顶部添加一个空白单元格，并将单元格类型切换到<code class="fe on oo op oe b">raw</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/c4d0c21f2b6856c63f25ac7810dc5bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*ctqo8J9KzlkzSFY7ddy3Jw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">vscode Jupyter扩展-YAML标头的第一个单元格类型必须是raw—<em class="ow">作者图片</em></p></figure><p id="ff20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它在我用于<a class="ae kv" href="http://fin-analyzer-mercury.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">fina analyzer-mercury</a>应用程序的YAML文件的下面。它将在web应用程序上创建小部件。它可以用在许多带有<strong class="ky ir"> mercury </strong>的小工具类型中，如选择、文本、滑块、范围、复选框等。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="ec35" class="nm mv iq oe b gy oi oj l ok ol">---<br/>title: FinAnalyzer<br/>author: noah<br/>description: Technical analysis application for financial data<br/>show-code: False<br/>params:<br/>   ticket:<br/>      input: text<br/>      label: yahoo finance ticket<br/>      value: "^GSPC"<br/>      row: 1<br/>   year:<br/>      input: range<br/>      label: Select data range of year<br/>      value: [2020,2022]<br/>      min: 2017<br/>      max: 2022<br/>   lastndays:<br/>      input: slider<br/>      label: Select last n days for candlestick chart<br/>      value: 30<br/>      min: 7<br/>      max: 200<br/>   ma_7d:<br/>      label: 7 days Moving averages<br/>      input: checkbox<br/>      value: true<br/>   ma_14d:<br/>      label: 14 days Moving averages<br/>      input: checkbox<br/>      value: true<br/>   ma_21d:<br/>      label: 21 days Moving averages<br/>      input: checkbox<br/>      value: true<br/>   indicators:<br/>      label: Select financial indicators<br/>      input: select<br/>      value: [MACD,RSI]<br/>      choices: [MACD,RSI,Volume]<br/>      multi: True<br/>---</span></pre><p id="1bc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">原始单元格将创建下面的小部件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/cb1ee4b3b9b49e06e9b351d7c46981a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*d-zfuHiuNcGmiET6rQ3ERQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">web应用程序上的小部件— <em class="ow">作者图片</em></p></figure><p id="b3fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第二步。</strong>分配变量—我们必须用YAML单元格创建同名的变量，并分配第一个值。在我的代码中，我将第一个值赋给了YAML单元格。</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="7c04" class="nm mv iq oe b gy oi oj l ok ol">ticket = "^GSPC"<br/>year= [2020,2022]<br/>ma_7d=True<br/>ma_14d=True<br/>ma_21d=True<br/>indicators=["MACD","RSI"]<br/>lastndays=30</span></pre><p id="5e10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第三步。</strong>测试——对于测试，我们可以使用本地的mercury服务器。运行下面的代码并打开<a class="ae kv" href="https://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank">https://127 . 0 . 0 . 1:8000</a><strong class="ky ir"/>地址您的web浏览器。您可以显示应用程序正在本地mercury服务器上运行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/1657a72747d0acfcc2055be670ae1090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xqdUhqAHp5UJM1n5S9ED3Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">金融分析师-当地水星服务上的水星笔记本<em class="ow"> r —作者图片</em></p></figure><p id="1f49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每次您更新笔记本时，它都会在Mercury中自动更新</p><p id="19b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第四步。</strong>部署到Heroku Dyno——仪表板已经准备好了，让我们将它部署到Heroku。</p><p id="bdba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我假设您已经安装了Heroku帐户和Heroku命令行(CLI)工具。但是如果你没有安装，你可以查看<a class="ae kv" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="9cf5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们登录Heroku-CLI工具:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="2a10" class="nm mv iq oe b gy oi oj l ok ol"> heroku login</span></pre><p id="c5ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Heroku登录屏幕将在您的默认浏览器上打开，您必须以这种方式登录。</p><p id="5f5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，让我们运行以下命令来创建一个Heroku应用程序:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="d587" class="nm mv iq oe b gy oi oj l ok ol">heroku create finAnalzer-mercury</span></pre><p id="3c2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在项目目录中，您应该在create命令中使用不同的项目名称，因为我得到了该名称。</p><p id="7e2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要给我们的项目添加一个<code class="fe on oo op oe b">Procfile</code>:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="66d2" class="nm mv iq oe b gy oi oj l ok ol">web: mercury runserver 0.0.0.0:$PORT --runworker</span></pre><p id="c540" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们设置必要的环境(<strong class="ky ir">)。dyno中的env </strong>变量:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="c04f" class="nm mv iq oe b gy oi oj l ok ol">heroku config:set ALLOWED_HOSTS=fin-analyzer-mercury.herokuapp.com<br/>heroku config:set SERVE_STATIC=True<br/>heroku config:set NOTEBOOKS=*.ipynb</span></pre><p id="25dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们创建一个setup.sh文件，并通过下面的命令设置环境变量:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="e378" class="nm mv iq oe b gy oi oj l ok ol">heroku config:set $(cat .env | sed ‘/^$/d; /#[[:print:]]*$/d’)</span></pre><p id="1b90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/nuhyurduseven/finAnalyzer-mercury" rel="noopener ugc nofollow" target="_blank">我的GitHub库</a>就是你的一个例子。之后，您就可以通过运行以下命令来部署应用程序了:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="7874" class="nm mv iq oe b gy oi oj l ok ol">git push heroku main</span></pre><p id="6913" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我现在有一个网络应用程序。可以通过下面的链接获得。</p><div class="pe pf gp gr pg ph"><a href="https://fin-analyzer-mercury.herokuapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">汞</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">Mercury:轻松分享您的Python笔记本</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">fin-analyzer-mercury.herokuapp.com</p></div></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/5bf92a3fd45a7b2859eee0299d4ce300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DtpITJT46joff4j5xvd4JQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者在Heroku dyno — <em class="ow">图像上的应用</em></p></figure><p id="cf89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顺便说一下，如果您将代码推送到您的GitHub库，但是您不能推送到<code class="fe on oo op oe b">.env</code>文件。文件只有Heroku dyno。你可以很容易地添加你的<code class="fe on oo op oe b">.gitignore </code>文件。</p><h1 id="0a3b" class="mu mv iq bd mw mx oq mz na nb or nd ne jw os jx ng jz ot ka ni kc ou kd nk nl bi translated">结论</h1><p id="c9d3" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">因此，在这篇文章中，我们使用python来获取关于金融数据的知识，包括一些技术分析指标和mercury框架，并将其转换为web应用程序。</p><p id="9451" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">人们使用许多技术指标来了解趋势，我们使用一些指标来了解数据，如移动平均线、MACD、RSI和成交量。我认为使用交互式web应用程序可能是查看财务数据的一种非常简单的方式，在这篇文章中，我们学习了如何通过python笔记本上的代码创建web应用程序。</p><p id="96e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Mercury是一个很有吸引力的工具，可以使用Python从笔记本文件制作web应用程序。将Python notebook转换成一个简单的web dashboard应用程序非常有用。毕竟用Python写的应用可以轻松部署在Heroku free dyno上。</p><p id="ce4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你的团队里有不懂Python编程的朋友，你可以替他们用这个方法。他们可以轻松使用您的数据科学应用程序。</p><p id="da33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的代码和Heroku文件可以在这里找到。</p></div></div>    
</body>
</html>