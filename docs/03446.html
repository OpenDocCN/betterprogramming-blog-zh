<html>
<head>
<title>A Guide to the Express Application Object: Routing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速应用程序对象指南:路由</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/guide-to-the-express-application-object-routing-6e89d6257d2?source=collection_archive---------19-----------------------#2020-02-10">https://betterprogramming.pub/guide-to-the-express-application-object-routing-6e89d6257d2?source=collection_archive---------19-----------------------#2020-02-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d92b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们看看路由和参数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f69c019ec7ebdf1b807755df728a02a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ev-5-gnEJ8MBuhnz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@diegojimenez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迭戈·希门尼斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="701e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快速应用程序的核心部分是应用程序对象。是应用本身。</p><p id="06a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将看看<code class="fe lv lw lx ly b">app</code>对象的方法以及我们可以用它做什么。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="71ef" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">app。方法(路径，回调[，回调…])</h1><p id="9489" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这个方法路由一个HTTP请求。<code class="fe lv lw lx ly b">METHOD</code>是Express支持的各种路由方法的占位符。</p><p id="68c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它采用以下参数:</p><ul class=""><li id="6b41" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">path</code> —它可以是表示路径或路径模式的字符串或正则表达式。默认为<code class="fe lv lw lx ly b">/</code>。</li><li id="de72" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">callback</code> —处理请求的功能。它可以是一个中间件功能、一系列中间件功能、一系列中间件功能或以上所有功能的组合。</li></ul><p id="d9ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Express支持以下路由方法:</p><ul class=""><li id="6997" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">checkout</code></li><li id="cd5c" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">copy</code></li><li id="2bb1" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">delete</code></li><li id="055f" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">get</code></li><li id="bd55" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">head</code></li><li id="a6c5" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">lock</code></li><li id="84bf" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">merge</code></li><li id="a57c" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">mkactivity</code></li><li id="5719" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">mkcol</code></li><li id="2333" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">move</code></li><li id="a7db" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">m-search</code></li><li id="49f3" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">notify</code></li><li id="165a" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">options</code></li><li id="5660" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">patch</code></li><li id="30cf" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">post</code></li><li id="b513" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">purge</code></li><li id="c92d" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">put</code></li><li id="7025" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">report</code></li><li id="7f77" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">search</code></li><li id="04ef" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">subscribe</code></li><li id="56a7" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">trace</code></li><li id="c0e9" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">unlock</code></li><li id="28cb" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">unsubscribe</code></li></ul><p id="04f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有方法都采用相同的参数，并以完全相同的方式工作。所以<code class="fe lv lw lx ly b">app.get</code>和<code class="fe lv lw lx ly b">app.unlock</code>是一样的。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="08be" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">app . param([名称]，回调)</h1><p id="bb65" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">app.param</code>增加路由参数的回调触发器。<code class="fe lv lw lx ly b">name</code>是参数或它们的数组。<code class="fe lv lw lx ly b">callback</code>是一个回调函数。</p><p id="aa40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回调的参数是请求对象、响应对象、下一个中间件函数、参数值和参数名，按照给定的顺序排列。</p><p id="41b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以如下使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6789" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe lv lw lx ly b">id</code> URL参数与<code class="fe lv lw lx ly b">app.param</code>回调一起存在时，上面的代码将获得该参数。</p><p id="73be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在回调中，我们让<code class="fe lv lw lx ly b">id</code>到<code class="fe lv lw lx ly b">req.id</code>，并调用<code class="fe lv lw lx ly b">next</code>来调用<code class="fe lv lw lx ly b">app.get</code>中的路由处理程序。</p><p id="c522" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们调用<code class="fe lv lw lx ly b">res.send(req.id);</code>发送带有<code class="fe lv lw lx ly b">req.id</code>的响应，这是我们之前设置的。</p><p id="33d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意<code class="fe lv lw lx ly b">app.param</code>中的<code class="fe lv lw lx ly b">id</code>必须将<code class="fe lv lw lx ly b">:id</code>与路线处理器匹配。</p><p id="dcf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以传入一组我们想要监视的参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="4740" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，如果我们请求<code class="fe lv lw lx ly b"> /1/foo</code>，我们将一次得到一个<code class="fe lv lw lx ly b">1</code>和<code class="fe lv lw lx ly b">foo</code>作为<code class="fe lv lw lx ly b">value</code>参数的值。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="0272" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">app.path()</h1><p id="3f81" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">app.path</code>以字符串形式返回已安装应用程序的路径。</p><p id="9919" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以如下使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="04a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们将<code class="fe lv lw lx ly b">foo</code>安装到<code class="fe lv lw lx ly b">app</code>上，将<code class="fe lv lw lx ly b">bar</code>安装到<code class="fe lv lw lx ly b">foo</code>上，因此<code class="fe lv lw lx ly b">app.path()</code>将得到<code class="fe lv lw lx ly b">''</code>，而<code class="fe lv lw lx ly b">foo.path()</code>将得到<code class="fe lv lw lx ly b">'/foo'</code>，而<code class="fe lv lw lx ly b">bar.path()</code>将得到<code class="fe lv lw lx ly b">'/foo/bar'</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/b7fb7af69dfe4412e4d37b9f21c9c19f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hC4qa3eKTWD_g_hs"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@bundo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Bundo Kim </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4932" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">app.post(路径，回调[，回调…])</h1><p id="ab9e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">app.post</code>方法，通过传入一个<code class="fe lv lw lx ly b">callback</code>路由处理程序，用给定的<code class="fe lv lw lx ly b">path</code>来处理POST请求。</p><p id="831f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它采用以下参数:</p><ul class=""><li id="f4e8" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">path</code> —可以是表示路径或路径模式的字符串或正则表达式。默认为<code class="fe lv lw lx ly b">/</code>。</li><li id="9d38" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">callback</code> —处理请求的功能。它可以是一个中间件功能、一系列中间件功能、一系列中间件功能或以上所有功能的组合。</li></ul><p id="1581" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以如下使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="2354" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们向像Postman这样的客户发出POST请求时，我们应该看到“<em class="nu">POST request maked</em>”</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c60f" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">app.put(路径，回调[，回调…])</h1><p id="3b98" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">app.put</code>方法通过传入一个<code class="fe lv lw lx ly b">callback</code>路由处理程序来处理带有给定<code class="fe lv lw lx ly b">path</code>的PUT请求。</p><p id="f473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它采用以下参数:</p><ul class=""><li id="5ad6" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">path</code> —可以是表示路径或路径模式的字符串或正则表达式。默认是<code class="fe lv lw lx ly b">/</code>。</li><li id="f2d7" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">callback</code> —处理请求的功能。它可以是一个中间件功能、一系列中间件功能、一系列中间件功能或以上所有功能的组合。</li></ul><p id="1097" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以如下使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="99b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们向像Postman这样的客户机发出PUT请求时，我们应该看到"<em class="nu">PUT request maked</em>"</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="3c39" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="3e1e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们可以用<code class="fe lv lw lx ly b">app.params</code>方法拦截请求发送的参数。</p><p id="d698" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了监听POST请求，我们可以使用<code class="fe lv lw lx ly b">app.post</code>方法。为了监听PUT请求，我们可以使用<code class="fe lv lw lx ly b">app.put</code>方法。</p><p id="ff17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">app.path</code>让我们获取已安装应用的路径。</p><p id="57f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">app</code>也有一长串监听各种请求的方法。</p></div></div>    
</body>
</html>