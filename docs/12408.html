<html>
<head>
<title>Zustand in a Micro Frontend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">祖站在微前端</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/zustand-in-a-micro-frontend-b92d02a51577?source=collection_archive---------5-----------------------#2022-06-03">https://betterprogramming.pub/zustand-in-a-micro-frontend-b92d02a51577?source=collection_archive---------5-----------------------#2022-06-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3b7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">状态管理变得简单。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/94c000265d19d1e9d4c461b00dfdd6da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KbY4OoXL_bY8vWw1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@mannyb?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">曼尼·韦塞拉</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="f2eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您开发使用Webpack的模块联合构建的大规模微前端应用程序时，您最终将需要在您的微应用程序之间共享数据和通信。我将在后面的文章中介绍许多可用的选项，但首先我想与您分享一个使用状态管理解决方案的示例。</p><blockquote class="lv lw lx"><p id="fefd" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">注意:在微前端架构中共享全局状态应该是最后的手段，并且应该仔细设计，因为它会在您的团队之间引入不必要的耦合。</p></blockquote><p id="711b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Zustand 是一个相对较新的状态管理工具，仍处于其生命周期的早期，每周下载量仅为47万次，但它的发展势头很快。这是一个优雅且有趣的解决方案，我强烈建议您尝试一下。</p><p id="d32c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何建立一个可以在我们的微应用中使用的Zustand商店？</p><h1 id="09e1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建共享Zustand商店</h1><p id="3605" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要在我们的一个微应用程序中实例化一个Zustand商店。它可以是任何公开具有模块联合的远程模块。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="78fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我们有一个商店，它跟踪某种形式的购物车，并使用方法在购物车中添加或删除商品。</p><p id="a96f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们通过创建一个<code class="fe nb nc nd ne b">useStore</code>钩子来实例化商店。这是我们将向其他应用程序公开的内容。</p><p id="109d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们更新我们的<code class="fe nb nc nd ne b">webpack.config.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="10bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以在其他微应用中使用商店了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="e586" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊。您已经在微前端架构中创建了一个全局状态。恭喜你！</p><h1 id="cea3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">活生生的例子</h1><p id="6eea" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">看看我的微前端演示应用:<a class="ae ky" href="https://micro-frontend-demo-main.vercel.app/" rel="noopener ugc nofollow" target="_blank">https://micro-frontend-demo-main.vercel.app/</a></p><p id="b1b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个购买不同种类水果的虚拟电子商务网站。它由一个主机应用程序和两个遥控器组成:购物车和产品。cart remote公开了一个Zustand存储，用于管理购物车中的商品，并添加和删除它们。产品遥控器使用它，因此它知道哪些商品已经添加到购物车中，以及添加了多少，允许您更改数量或删除/添加商品。另外，本例中的Zustand存储将购物车状态存储在本地存储中，并在页面加载时进行水合物处理，因此我们可以跨会话持久化您的购物车。</p><p id="7072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里查看源代码:<a class="ae ky" href="https://github.com/rautio/micro-frontend-demo/tree/zustand-remote-state" rel="noopener ugc nofollow" target="_blank">https://github.com/rautio/micro-frontend-demo</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/187aecbf7b3c649d1a002cb28a870746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mefq4fJ9cgJOHnuPUN3HKQ.png"/></div></div></figure><p id="d2da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，请在Medium上关注我，了解更多关于微前端和Webpack模块联盟的故事。</p></div></div>    
</body>
</html>