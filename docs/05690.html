<html>
<head>
<title>Deno vs. Node.js — Key Differences</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno与Node.js —主要区别</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/deno-vs-node-js-key-differences-8b2f4f63e2c7?source=collection_archive---------9-----------------------#2020-07-28">https://betterprogramming.pub/deno-vs-node-js-key-differences-8b2f4f63e2c7?source=collection_archive---------9-----------------------#2020-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6c53" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">每个人都在谈论的新JavaScript库，来自Node的创建者</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8101774d6ca614fd620b1b9f4f07833f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MdUYc-UwlO4d107aEBN6-A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><p id="3cfe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">该不该学Deno？使用Deno胜过Node的主要好处是什么？</em></p><p id="1708" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">读完这个故事后，你会知道<a class="ae ls" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank"> Deno </a>如何工作的关键原理，谁是幕后黑手，以及为什么有这么多关于它的讨论。我将把它与Node.js进行比较，因为它是目前为止最流行的JavaScript运行时。</p><p id="36a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ls" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点</a>与德诺的创作者相同，瑞安·达尔。正确的问题是，“如果Node已经在市场上站稳脚跟并受到许多公司的青睐，他为什么还要创建另一个库？”</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="0a42" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">幕后的支持</h1><p id="d85e" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated"><a class="ae ls" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank">官方文件</a>说:</p><blockquote class="mx my mz"><p id="6c39" class="kv kw lr kx b ky kz jr la lb lc ju ld na lf lg lh nb lj lk ll nc ln lo lp lq ij bi translated">Deno是一个简单、现代、安全的JavaScript和TypeScript运行时，使用V8引擎，内置于Rust中</p></blockquote><p id="63e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这也是Deno能够非常成功的主要原因。背后有大公司:</p><ul class=""><li id="c8d6" class="nd ne iq kx b ky kz lb lc le nf li ng lm nh lq ni nj nk nl bi translated">由Mozilla创建的Rust</li><li id="9508" class="nd ne iq kx b ky nm lb nn le no li np lm nq lq ni nj nk nl bi translated">来自微软的TypeScript</li><li id="9f4c" class="nd ne iq kx b ky nm lb nn le no li np lm nq lq ni nj nk nl bi translated">来自谷歌的V8引擎</li></ul><p id="1b4e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一方面，Node是用C和C++构建的，与Rust相比，它们往往不太安全。它没有内置TypeScript编译器，所以为了使用它，您需要用npm安装它。</p><p id="81a4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它们的共同点是引擎盖下的谷歌V8引擎——与驱动Chrome浏览器的引擎相同。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="c3a2" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">ES模块与CommonJS</h1><p id="4c45" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">2009年，Node创建的时候，JavaScript还没有自己的模块系统。因此，默认情况下，在Node:</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="0520" class="nw mb iq ns b gy nx ny l nz oa">const bcrypt = require('bcrypt');</span></pre><p id="9eb9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">问题是这并不是真正的JavaScript <em class="lr">。这是一种包含来自第三方库的不同代码的非标准方式。</em></p><p id="bb25" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">幸运的是，2015年ES6推出了自己的JavaScript模块系统，所以现在你可以这样做:</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="90d2" class="nw mb iq ns b gy nx ny l nz oa">import bcrypt from 'bcrypt'</span></pre><p id="a453" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与Deno相比，ES模块在Deno中是开箱即用的。这意味着您实际上可以导入URL，而无需通过npm进行安装:</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="50a1" class="nw mb iq ns b gy nx ny l nz oa">import '<a class="ae ls" href="https://deno.land/std/examples/chat/server.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/std/examples/chat/server.ts</a>'</span></pre><p id="1b3b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有了这种能力，你基本上可以导入任何一段程序，并在你的代码中使用它。然而，如果你这样做，你会得到一个权限错误。</p><p id="0a14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">原因是Deno也是把安全放在心上。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="5688" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">安全第一</h1><p id="28bd" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">尽管Node越来越受欢迎，但许多公司都倾向于绕过它。其中一个很重要的原因就是它在安全性上有缺陷。</p><p id="08ee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">问题是节点使用npm来安装应用程序的外部模块。因为npm对社区开放，每个人都可以创建一个，所以有可能注入恶意的东西。</p><p id="01b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">并且节点将毫无怨言地信任该模块。</p><p id="f695" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一方面，Deno正在使用最小特权原则和允许实体列表。您可以单独授予每个模块权限。这本身解决了开发服务器时许多潜在的安全问题。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="de03" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">内置工具</h1><p id="0934" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">要开始用Node开发一个app，首先要决定用什么工具。</p><p id="a12a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你要用TypeScript吗？然后安装<a class="ae ls" href="https://github.com/TypeStrong/ts-node" rel="noopener ugc nofollow" target="_blank"> ts节点</a>。测试呢？我们用<a class="ae ls" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>吧。格式化呢？捆绑销售？等等。</p><p id="dd24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用Deno，您不必解决这些问题，因为它已经预装了这些工具。因为它是Deno的标准，所以你可以确信这些工具有完全的支持。真的很酷。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="9fd9" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">浏览器兼容的API</h1><p id="57de" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">我认为这是Node和Deno最大的区别之一。</p><p id="b856" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可能已经知道，浏览器有<code class="fe ob oc od ns b">window</code>作为全局对象，它有很多属性和方法，比如<code class="fe ob oc od ns b">addEventListener</code>、<code class="fe ob oc od ns b">setTimeout</code>、<code class="fe ob oc od ns b">setInterval</code>等。</p><p id="d897" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">浏览器也使用<code class="fe ob oc od ns b">fetch</code>向给定的URL发送请求并返回承诺。</p><p id="b0e7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Deno中，所有这些都是内置的。这是完美的，特别是对于前端开发人员，他们每天都在使用这些方法。</p><h2 id="b631" class="nw mb iq bd mc oe of dn mg og oh dp mk le oi oj mm li ok ol mo lm om on mq oo bi translated">Node呢？</h2><p id="56a0" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">在节点中，<code class="fe ob oc od ns b">fetch</code>不存在。如果要用的话，需要安装<a class="ae ls" href="https://www.npmjs.com/package/node-fetch" rel="noopener ugc nofollow" target="_blank"> node-fetch </a>或者<a class="ae ls" href="https://github.com/npm/node-fetch-npm" rel="noopener ugc nofollow" target="_blank"> node-fetch-npm </a>之类的东西。<em class="lr">但是哪一个是正确的呢？这在我的项目中行得通吗？</em></p><p id="c57b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">节点也使用<code class="fe ob oc od ns b">global</code>作为主对象，它不是浏览器的一部分。所以它不是真正的JavaScript。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="a517" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">单一可执行文件</h1><p id="b8d3" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">使用Deno时，您总是有一个单独的可执行文件，例如<code class="fe ob oc od ns b">deno.exe</code>，您可以双击它并运行Deno运行时。所以基本上你可以使用JavaScript编写程序，然后轻松地与其他计算机共享。</p><p id="e6c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Node中，没有单个可执行文件这样的选项，因为应用程序需要在<code class="fe ob oc od ns b">node-modules</code>文件夹下运行所有必要的包。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="7130" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">异步退货承诺</h1><p id="8d86" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">Deno中的异步代码总是返回Promise。在Node中，情况并非总是如此。</p><p id="723a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">节点是在我们有基于承诺的语法之前创建的。尽管在许多情况下异步代码会返回承诺，但有时您必须使用像<code class="fe ob oc od ns b"><a class="ae ls" href="https://nodejs.org/dist/latest-v8.x/docs/api/util.html#util_util_promisify_original" rel="noopener ugc nofollow" target="_blank">util.promisify</a></code>这样的构造函数来解决问题。</p><p id="0c91" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">事实上，每当JavaScript中引入新特性时，Node都需要做一些变通，以使它们兼容。相比之下，Deno支持最新的JavaScript特性。</p><p id="f98a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它的后端是用Rust编写的，用一种叫做<em class="lr">期货</em>的东西来处理异步代码。在幕后，它将异步代码转化为承诺。</p><p id="d804" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这意味着在Deno中你可以毫无问题地使用<code class="fe ob oc od ns b">async await</code>。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="ca5f" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">总结一下</h1><p id="2906" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated"><em class="lr">那么，我应该立即开始使用Deno吗？</em></p><p id="ff21" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我会说，“不尽然。”</p><p id="55df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我的意思是，当然，它看起来很有前途，当看所有的功能和它是如何建立的。它基本上解决了Node的很多核心问题。</p><p id="4540" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Deno有大公司支持，使用最新的JavaScript，安全性很高。当然，每种技术都有其缺陷。</p><p id="423e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">而且到目前为止，Deno最大的缺陷就是还只是在前期。这个社区刚刚开始成长。因此，只有时间会告诉我们它是否会赶上Node、Java或PHP等语言——或者它是否只是最初的炒作。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="4905" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你喜欢阅读，你可能会对我的其他一些故事感兴趣:</p><div class="op oq gp gr or os"><a href="https://levelup.gitconnected.com/what-you-should-know-about-npm-2b198dab6e9d" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">关于NPM你应该知道什么</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">你应该毫无疑问地掌握的命令和核心原则。</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg kp os"/></div></div></a></div><div class="op oq gp gr or os"><a href="https://levelup.gitconnected.com/learn-gatsby-by-building-your-own-blog-website-ff5aaa8e90b8" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">通过建立自己的博客网站来学习盖茨比</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">静态渲染方法介绍。</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pb l"><div class="ph l pd pe pf pb pg kp os"/></div></div></a></div><p id="0a56" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>