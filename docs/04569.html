<html>
<head>
<title>Why I Migrated From Next.js to Create React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我从Next.js迁移到React App</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-i-migrated-from-next-js-to-create-react-app-7e74834e8431?source=collection_archive---------4-----------------------#2020-04-22">https://betterprogramming.pub/why-i-migrated-from-next-js-to-create-react-app-7e74834e8431?source=collection_archive---------4-----------------------#2020-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8310" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我没有从CRA迁移到Next——原因如下</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/215f89736ce714b935a430e53be3259b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*emTLGroP54nRnTZYWP_SGg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克莱门特·H</a>在<a class="ae ky" href="https://unsplash.com/s/photos/javascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e4c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我先说我是<a class="ae ky" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>的超级粉丝。对于构建React应用程序来说，这是一个令人惊叹的框架，尤其是当您需要服务器端呈现(SSR)时。总有一天，我会写一篇文章介绍这个框架的所有优点，但幸运的是，很多人已经在这么做了。</p><p id="88cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，我现在将解释为什么我从Next.js迁移了我的许多辅助项目之一来创建React App。</p><p id="5406" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:如果你不关心背景故事，向下滚动，直接进入结论。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e3a0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">免费开始</h1><p id="a2d6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当你有很多副业项目(这些项目不会让你赚到钱)时，如果你能免费主持这些项目就好了。我有一个托管在Heroku的自定义域上的Ruby on Rails项目，这个项目已经花费了我每月30多美元，这很好——如果你只有一个项目或者这个项目让你赚了一些钱…</p><p id="b8bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Firebase和Firestore构建React应用程序的一个很酷的地方是，您可以构建一个全栈应用程序，并且不需要任何成本(除了自定义域名)。我用类似于<a class="ae ky" href="https://www.flowreads.com/" rel="noopener ugc nofollow" target="_blank"> FlowReads </a>和<a class="ae ky" href="https://www.makermove.com/" rel="noopener ugc nofollow" target="_blank"> MakerMove </a>这样的附带项目来做。我还制作了<a class="ae ky" href="https://www.reactmilkshake.com/" rel="noopener ugc nofollow" target="_blank"> React Milkshake </a>，这是用这个堆栈创建应用程序的样板文件。对于一个新的副业项目，我打算用同样的方法，但是用Nextjs，虽然它工作得很好，但是我遇到了一个问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bc93" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在Vercel上部署</h1><p id="ff4a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">部署Nextjs应用程序的最佳地方是Vercel(以前的<a class="ae ky" href="https://zeit.co/" rel="noopener ugc nofollow" target="_blank"> Zeit </a>)。虽然你可以免费开始，但如果我想保持我目前的项目，我必须升级到团队计划(每月20美元起)。</p><p id="e833" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Next.js，您可以选择是静态生成页面还是服务器呈现页面。如果您的页面是服务器呈现的，这意味着在构建过程中会为您的页面创建一个无服务器函数。Zeit的团队刚刚决定将无服务器功能的数量限制在12个——而我的应用程序有14页。这意味着我不能再部署这个应用程序——由于这个限制，它会在构建过程中失败。我可以理解限制免费层上无服务器功能数量的决定，但最令人沮丧的是我的站点已经部署了。在Zeit增加了这个限制后，如果不升级，我就无法部署任何更改！</p><p id="4e68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会想“但是你为什么要服务器渲染每一个页面呢？你就不能至少静态地提供几页吗？”这也是Zeit推荐的，也正是我想要的。唯一的问题是，以我目前的实现(使用Redux)，我不能。让我解释一下。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8edd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">SSR vs SSG</h1><p id="2096" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用Next.js，你可以在你的页面组件中使用<code class="fe na nb nc nd b">getIntialProps</code>(或者从9.3版本开始使用<code class="fe na nb nc nd b">getServerSideProps</code>和<code class="fe na nb nc nd b">getStaticProps</code>)，它决定一个页面是应该由服务器渲染还是静态生成(在这里阅读更多关于<a class="ae ky" href="https://nextjs.org/docs/basic-features/data-fetching" rel="noopener ugc nofollow" target="_blank">的内容</a>)。如果你的页面中不需要任何数据，它会被静态生成，但是当你在<code class="fe na nb nc nd b">_app.js</code> <em class="mz">中使用<code class="fe na nb nc nd b">getInitialProps</code>时，你所有的页面都会被服务器渲染。</em>在构建您的应用程序时，您会收到这条警告消息:“由于pages/_app中的getInitialProps，您已经退出了自动静态优化。”</p><p id="9860" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当您使用Redux作为您的状态管理库时，您可能会使用<code class="fe na nb nc nd b">next-redux-wrapper</code>，因此您不必实现任何复杂的东西来使您的商店客户端状态与服务器同步等。至少，我是这么做的，问题来了:这个库在你的<code class="fe na nb nc nd b">_app.js</code>文件上调用<code class="fe na nb nc nd b">getInitialProps</code>，所以你所有的页面都会实现服务器端渲染。</p><p id="288a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">老实说，我的应用程序不需要服务器渲染，因为一切都在登录屏幕后面。我基本上只用了Next.js，因为我想用它做实验。我可能有更多的选择，而不仅仅是将我的项目重构到CRA，但我认为服务器端渲染(即使是Next.js)可能带来的麻烦不值得为一个不会从中受益太多的项目花费时间。我也喜欢免费托管东西，只要我还在开发阶段，而对于Next.js，我不确定我能不能做到。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e3bd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">结论</strong></h1><p id="274d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您在Nextjs应用程序中使用redux(使用<a class="ae ky" href="https://github.com/kirill-konshin/next-redux-wrapper" rel="noopener ugc nofollow" target="_blank"> next-redux-wrapper </a>)并且有超过12条路线，如果您在Zeit上托管项目，您将需要升级到团队计划。</p><p id="db5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不需要SSR，正在用redux，还想免费托管，那你大概就不要用Next.js了，还有，如果你想用Next.js的SSG选项，就不要用<a class="ae ky" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>了。</p><p id="4ea7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，我可以推荐你尝试一下<a class="ae ky" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>，因为这是一个非常好的框架！</p></div></div>    
</body>
</html>