<html>
<head>
<title>How to Helm With Sonatype Nexus</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Sonatype Nexus掌舵</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-helm-with-sonatype-nexus-c49c98324a19?source=collection_archive---------2-----------------------#2020-03-28">https://betterprogramming.pub/how-to-helm-with-sonatype-nexus-c49c98324a19?source=collection_archive---------2-----------------------#2020-03-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9f39" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Sonatype Nexus作为CI/CD的导航库</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5179bcf544f6ff2a355bf50daec097f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MT4rtKHy7D6FbHvu"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弗兰克·艾弗特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2f03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank"> Helm </a>是Kubernetes第一个也是最受欢迎的包管理器。它允许DevOps团队对Kubernetes应用程序进行版本控制、分发和管理。</p><p id="ec98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然人们可以接受标准的kubectl命令和Kubernetes清单YAML文件，但当组织在微服务架构上工作时——有数百个容器相互交互——有必要对Kubernetes清单进行版本化和管理。</p><p id="8593" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Helm现在正成为管理Kubernetes应用程序的标准，也是任何使用Kubernetes的人的必要技能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3afd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么是赫尔姆？</h1><p id="60ce" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">显而易见的问题是:我们为什么需要赫尔姆？让我们找出答案。</p><h2 id="ae76" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak"> Helm让模板应用变得简单</strong></h2><p id="9af6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Docker图像形成Docker容器的模板。您可以使用一个Docker图像来创建多个容器。</p><p id="d9d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Kubernetes来说，情况并非如此。您不能轻易重用清单文件。例如，如果您必须部署两个PostgreSQL实例，您必须复制您的清单文件。</p><p id="9d46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Helm使用图表和变量帮助您管理它。您只需要创建一个通用的PostgreSQL图表，并使用变量以发布的形式部署不同的实例。</p><h2 id="c2b0" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak"> Helm使Kubernetes应用程序的版本控制成为可能</strong></h2><p id="a5b0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">开发人员最初使用YAML文件创建Kubernetes清单，然后存储在源代码库中。</p><p id="3e6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法的问题是清单没有语义版本。源代码库并不是发布版本的合适地方。您应该始终将您的发布版本作为软件包。Helm通过将您的应用程序打包在Helm chart中解决了这个问题，这使得在Helm存储库中存储多个版本的图表成为可能，并且您可以快速部署或回滚一个版本，而无需从源代码进行构建。</p><h2 id="5e1e" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak"> Helm使重复使用和共享成为可能</strong></h2><p id="2848" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于Docker图片，你可以在DockerHub上分享你的图片——这在Kubernetes上是不可能的。有了像<a class="ae ky" href="https://github.com/helm/charts" rel="noopener ugc nofollow" target="_blank"> Kubernetes charts </a>这样的公共舵手库，现在这是可能的。公共舵库允许重用Kubernetes应用程序，使供应商能够为消费者提供标准舵图，并使他们的生活变得简单。</p><h2 id="69b5" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak"> Helm使部署Kubernetes应用程序变得简洁</strong></h2><p id="e7f9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有了Helm，你可以运行简单的命令，比如<code class="fe nl nm nn no b">helm install</code>和<code class="fe nl nm nn no b">helm del</code>，来安装和删除发布。</p><p id="59d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不必担心找到清单文件和运行<code class="fe nl nm nn no b">kubectl delete</code>。有了Helm，一切都充满活力。</p><h2 id="261a" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak"> Helm使依赖管理成为可能</strong></h2><p id="0feb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们以一个灯堆为例。Apache对MySQL有明显的依赖性。没有MySQL就不应该安装Apache。</p><p id="19e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Helm，您可以在Apache图表上添加MySQL的依赖项来实现这一点，这是您无法用纯Kubernetes清单实现的。</p><h2 id="0c52" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated"><strong class="ak"> Helm帮助执行标准</strong></h2><p id="d987" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Helm允许图表开发人员从标准模板开始，他们可以根据自己的应用需求定制模板。</p><p id="c97a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">标准模板将使他们能够满足使用Kubernetes开发应用程序的最低标准。Helm生成的manifest模板是有一定质量的，开发者从中学习。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1084" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">掌舵的三大概念</h1><p id="bba1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在上一节中，我已经介绍了许多行话——让我们看看它们是什么意思。</p><h2 id="e7fd" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">舵图</h2><p id="42a1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">图表是一个舵包。如果你理解Linux，掌舵图就相当于Kubernetes的RPM或DEB。Helm chart将您的Kubernetes清单包装成带有图表版本和所有所需依赖项的动态模板，这允许您标准化和分发您的应用程序。</p><h2 id="777c" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">舵释放</h2><p id="10d2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Helm release是Kubernetes集群上Helm图表的一个实例。舵图作为发布的模板，而发布是实际运行的舵应用程序。</p><p id="6dfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用同一个舵图创建多个版本。例如，您想要安装两个独立的PostgreSQL实例，您可以使用PostgreSQL Helm图表创建两个具有不同变量的版本。</p><h2 id="6af8" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">赫尔姆仓库</h2><p id="5733" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">掌舵仓库存储掌舵图表，就像Yum仓库存储rpm一样。任何需要在Kubernetes上安装应用程序的人都可以使用简单的Helm命令从Helm库下载应用程序。</p><p id="5ec5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Helm存储库可以在任何web服务器上运行，因此，托管一个服务器很简单。传统的方法包括在<code class="fe nl nm nn no b">charts</code>目录中创建一个<code class="fe nl nm nn no b">index.yaml</code>文件，这个文件是在web服务器的<code class="fe nl nm nn no b">public</code>文件夹中创建的，当您将图表推入存储库时，手动更新这个文件。以下是网络服务器目录结构的示例:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="bc3a" class="mz md it no b gy nt nu l nv nw">charts/<br/>  |<br/>  |- index.yaml<br/>  |<br/>  |- alpine-0.1.2.tgz<br/>  |<br/>  |- alpine-0.1.2.tgz.prov</span></pre><p id="ee73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，目前成熟的组织使用某种形式的工件库管理器，例如<a class="ae ky" href="https://www.sonatype.com/" rel="noopener ugc nofollow" target="_blank"> Sonatype Nexus </a>，它与他们的CI/CD管道集成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/48d7cc44d9002740df42db1456913c8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*X332y2-pvnrdeNFWJsqE3Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">掌舵的三大概念</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="611c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">带Docker和Helm的CI/CD</h1><p id="4a60" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">带有Docker和Helm的典型持续集成和持续部署(CI/CD)管道如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/0cff1a111d2645358796a5ec682e8b64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nFcEY4K7n0Xz-iz3hKoplg.png"/></div></div></figure><p id="d2bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DevOps工程师创建Docker文件和所需的依赖项(以及应用程序的舵图),并将其推送到源代码库。</p><p id="5de7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码存储库有一个到诸如Jenkins之类的CI/CD工具的提交后挂钩，它:</p><ul class=""><li id="b701" class="nz oa it lb b lc ld lf lg li ob lm oc lq od lu oe of og oh bi translated">使用Docker文件构建Docker映像，并将其推送到Sonatype Nexus中的Docker存储库</li><li id="9054" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated">打包舵图并将其推送到Sonatype Nexus中的舵库</li></ul><p id="10a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，它使用<code class="fe nl nm nn no b">helm repo update</code>用Nexus的最新包更新索引，并触发Kubernetes运行<code class="fe nl nm nn no b">helm upgrade --install</code>来升级现有版本或根据Nexus中可用的最新图表安装新版本。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2465" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在Sonatype Nexus上托管舵库</h1><p id="2740" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Nexus使组织和管理存储库变得容易，因为它们为各种技术提供了对多种类型存储库的支持，如Maven、Yum、Go、Python、npm、Docker等。</p><p id="d6e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于已经使用Sonatype Nexus的组织来说，在Nexus中托管他们的头盔库是有意义的。</p><p id="0185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Sonatype并不正式支持头盔库。然而，已经有社区在努力构建托管Helm存储库的能力。</p><p id="7e11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个这样的项目是<a class="ae ky" href="https://github.com/sonatype-nexus-community/nexus-repository-helm" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><p id="5143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将演示如何使用该项目使Nexus能够存储舵图。</p><h2 id="2d55" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">在nexus上安装nexus-repository-helm插件</h2><p id="d08a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">识别您的Nexus安装版本，并使用<a class="ae ky" href="https://github.com/sonatype-nexus-community/nexus-repository-helm#compatibility-with-nexus-repository-manager-3-versions" rel="noopener ugc nofollow" target="_blank">该</a>表使用插件的正确版本。然后，运行以下命令来生成插件Jar文件。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="b12c" class="mz md it no b gy nt nu l nv nw">git clone <a class="ae ky" href="https://github.com/sonatype-nexus-community/nexus-repository-helm.git" rel="noopener ugc nofollow" target="_blank">https://github.com/sonatype-nexus-community/nexus-repository-helm.git</a><br/>cd nexus-repository-helm<br/>git checkout &lt;plugin_version&gt; #e.g. git checkout 0.0.13<br/>mvn clean package</span></pre><p id="4c31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nl nm nn no b">&lt;nexus_dir&gt;/system/org/sonatype/nexus/plugins/nexus-repository-helm/&lt;plugin_version&gt;/nexus-repository-helm-&lt;plugin_version&gt;.jar</code>将生成的Jar从<code class="fe nl nm nn no b">nexus-repository-helm/target</code>目录复制到Nexus plugins目录。</p><p id="261b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编辑<code class="fe nl nm nn no b">features.xml</code>文件，将插件包含在Nexus配置中。</p><p id="3e63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用的是Nexus 3.21及更新版本，编辑<code class="fe nl nm nn no b">&lt;nexus_dir&gt;/system/org/sonatype/nexus/assemblies/nexus-cma-feature/3.x.y/nexus-cma-feature-3.x.y-features.xml</code>。</p><p id="1acd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于旧的OSS版本，编辑<code class="fe nl nm nn no b">&lt;nexus_dir&gt;/system/com/sonatype/nexus/assemblies/nexus-oss-feature/3.x.y/nexus-oss-feature-3.x.y-features.xml</code>。</p><p id="190d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于旧的专业版，编辑<code class="fe nl nm nn no b">&lt;nexus_dir&gt;/system/com/sonatype/nexus/assemblies/nexus-pro-feature/3.x.y/nexus-pro-feature-3.x.y-features.xml</code>。</p><p id="8890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将以下标有<code class="fe nl nm nn no b">+</code>的行添加到文件中。保存文件，并重启Nexus。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="5787" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切正常，那么Helm(托管)和Helm(代理)将会出现在存储库配方中。</p><h2 id="5f18" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">创建Helm托管的存储库</h2><p id="604d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在Nexus上创建一个名为<code class="fe nl nm nn no b">helm-hosted</code>的舵手库，使用舵手(托管)配方。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/d2d639d5b8043f1bc25f265b88c11165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZKWJzMsc3JIu-wTegwSxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选择配方</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/e94b26c131ec19789f73a472c59c8899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RrJrc_MzhFH-W01rJsjbSQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建存储库</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/688bf47cdcf16f09a05fbb6ca085b89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-eM2Vkf4LiEFnrCNXN2Xg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Helm托管的存储库</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e38a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">测试设置</h1><p id="06c2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">既然我们已经成功地在Nexus上配置了<code class="fe nl nm nn no b">helm-hosted</code>存储库，那么是时候在您的Kubernetes集群上测试它了。</p><h2 id="a0db" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">访问Helm存储库</h2><p id="c11a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用以下命令将Nexus存储库添加到您的Helm配置中:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="a269" class="mz md it no b gy nt nu l nv nw">helm repo add nexus http://&lt;username&gt;:&lt;password&gt;@&lt;nexus_url&gt;/repository/helm-hosted/</span></pre><p id="979c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您可以使用Helm访问Nexus存储库。</p><h2 id="7fbf" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">将舵图推向Nexus</h2><p id="cc44" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了将你的头盔图推送到Nexus，我们首先打包图表，然后使用curl将图表上传到<code class="fe nl nm nn no b">helm-hosted</code>库。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="1cef" class="mz md it no b gy nt nu l nv nw">helm package &lt;chart_dir&gt;<br/>curl -v -F file=@chart.tgz -u &lt;username&gt;:&lt;password&gt; http://&lt;nexusurl&gt;/service/rest/v1/components?repository==helm-hosted</span></pre><p id="88bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">浏览<code class="fe nl nm nn no b">helm-hosted</code>存储库，查看您上传的资产。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/a9341bcdaa2c49ddd3783d529b8b9e2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bb4PpMs4wJQLt0p_kwBD9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资产已上传</p></figure><p id="725c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查一下<code class="fe nl nm nn no b">index.yaml</code>文件，你会发现它已经自动更新了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="4d37" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">从Nexus安装舵图</h2><p id="1910" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要从Nexus安装您的Helm图表，您需要使用<code class="fe nl nm nn no b">helm repo update</code>用Nexus上的最新软件包更新您的本地回购指数，然后运行<code class="fe nl nm nn no b">helm install</code>从图表创建一个新版本。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="30f5" class="mz md it no b gy nt nu l nv nw">helm repo update<br/>helm install --name &lt;release-name&gt; nexusrepo/&lt;chart&gt; --version &lt;version&gt;</span></pre><p id="d39a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切顺利，Helm将从Nexus下载图表并安装到您的Kubernetes集群上</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="07c2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">进一步阅读</h1><p id="126f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">感谢您的阅读。我希望你喜欢这篇文章。如果您有兴趣了解更多信息，请查看以下文章，您可能会感兴趣:</p><div class="oq or gp gr os ot"><a href="https://medium.com/better-programming/demystifying-kubernetes-objects-understanding-the-what-why-and-how-18b42c9ca9c2" rel="noopener follow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">揭开Kubernetes物件的神秘面纱</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">理解什么、为什么和如何</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">medium.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ks ot"/></div></div></a></div><div class="oq or gp gr os ot"><a href="https://medium.com/@bharatmicrosystems/using-the-azure-kubernetes-provider-in-a-vm-based-k8s-cluster-fdf941b86d69" rel="noopener follow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">在基于虚拟机的K8S集群中使用Azure Kubernetes提供程序</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">建立kubernetes集群有多种方式，一些组织希望从头开始…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">medium.com</p></div></div></div></a></div></div></div>    
</body>
</html>