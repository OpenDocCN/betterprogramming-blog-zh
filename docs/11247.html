<html>
<head>
<title>Cracking Android Screen Sizes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">破解安卓屏幕尺寸</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/cracking-android-screen-sizes-88228822-98b28d23260c?source=collection_archive---------2-----------------------#2022-03-02">https://betterprogramming.pub/cracking-android-screen-sizes-88228822-98b28d23260c?source=collection_archive---------2-----------------------#2022-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6c4f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们将探索Android的不同屏幕尺寸，并对各种术语有一个清晰的理解</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dc8ae85d81ff36a4ab91b04377bffb4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TtT-PxLyt7CHVCLB_hg7Jg.jpeg"/></div></div></figure><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="a828" class="kw kx iq ks b gy ky kz l la lb"><strong class="ks ir">Table of Contents</strong></span><span id="1f2d" class="kw kx iq ks b gy lc kz l la lb">Introduction<br/>Pixel and Screen size<br/>Pixels Per Inch (PPI) and how it is calculated<br/>Different Densities in Android<br/>How to calculate device density<br/>Working with sizes<br/>Wrap Up</span></pre><h1 id="f541" class="ld kx iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">介绍</h1><p id="af78" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">在Android中，有许多与显示相关的限定符，这有时会让开发人员感到困惑。什么是DPs？它们和蘸酱有什么不同？各种密度是什么？所有的计算是如何发生的？有可能得到以英寸为单位的屏幕宽度和高度吗？在这篇文章中，我将回答所有这些问题。</p><p id="0b67" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">P.S .本文不是关于如何支持多种屏幕尺寸。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="935b" class="ld kx iq bd le lf nc lh li lj nd ll lm jw ne jx lo jz nf ka lq kc ng kd ls lt bi translated">像素和屏幕尺寸</h1><p id="105f" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">我猜大家都知道什么是像素。如果你捕捉你的监视器并放大，你可以看到带有RGB颜色的小方块。所有这些小方块都是像素。Pixel也代表图片元素(pix =图片，el =元素)。它们是数字图像或显示的基本构件。如果显示器分辨率为1280像素宽和720像素高，那么显示器的总像素为921 600像素。它也代表像素密度。密度越高，图像质量越好。如果显示器分辨率为3840x2160，则总像素为8 294 400。</p><p id="75ee" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">现在，屏幕尺寸是多少？它是对角之间的距离。也叫对角线。如果距离是6.5英寸，则屏幕尺寸是6.5英寸。</p><p id="55db" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">那么这些屏幕尺寸和像素是如何连接的呢？我们拿一个显示器来说，分辨率为1080x1920(宽x高)，屏幕尺寸为5.5英寸。总的来说，屏幕上会有1080 * 1920 = 2 073 600个像素。</p><p id="d7d7" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">现在问你一个问题:<strong class="lw ir"> </strong>假设我们有2台设备，它们的分辨率都是1080x1920，但是第一台设备屏幕尺寸是7.0英寸，另一台是5.5英寸。在哪款设备上屏幕质量会更好？我们需要在下一节找到答案。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="d3c7" class="ld kx iq bd le lf nc lh li lj nd ll lm jw ne jx lo jz nf ka lq kc ng kd ls lt bi translated">每英寸像素(PPI)及其计算方式</h1><p id="0bbd" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">开始之前，我们先明确一件事。在Android中，PPI和DPI(每英寸点数)是一回事。在现实生活中它们是不同的，但是Android团队选择使用DPI而不是PPI。</p><p id="16d9" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">有时，如果你看一下器件规格，在显示器部分你可能会看到PPI值。它代表每英寸像素数，代表设备每英寸的像素数。</p><p id="4e94" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">PPI是怎么算出来的？为了计算PPI，我们需要屏幕分辨率WxH和屏幕尺寸。公式是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/f5960efcdba5026161a1188a7da87345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w3XTR64VeDj3OxMAs1EYXw.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">计算屏幕PPI的公式</p></figure><p id="808e" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">让我们从上一节中取值。如果我们的屏幕分辨率为1080x1920，屏幕尺寸为7.0英寸，则PPI将为:</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="5dc9" class="kw kx iq ks b gy ky kz l la lb">1080 x 1080 = 1 166 400<br/>1920 x 1920 = 3 686 400<br/>1 166 400 + 3 686 400 = 4 852 800<br/>sqrt(4 852 800) = ~2203<br/>2203 / 7.0 = ~315</span></pre><p id="3383" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">因此，我们7英寸屏幕的PPI值约为315。让我们对另一个分辨率相同但尺寸为5.5英寸的屏幕进行相同的操作。在这种情况下，PPI将大约为401。</p><p id="99e8" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">屏幕质量与1英寸的像素数(PPI)成正比。如果PPI值较高，则该设备的屏幕质量会更好。</p><p id="fb79" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">现在让我们来回答上一节中的问题。哪款设备屏幕质量会更好？当然，5.5英寸的屏幕，因为在1英寸它有更多的像素。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="cf4a" class="ld kx iq bd le lf nc lh li lj nd ll lm jw ne jx lo jz nf ka lq kc ng kd ls lt bi translated">Android中的不同密度</h1><p id="65cd" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">从现在开始，我会用DPI代替PPI，因为那些是一回事。在这里要特别小心，以免以后混淆。</p><p id="7603" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">*在Android中，当我们创建UI时，我们通常使用DP作为视图的大小说明符。DP(密度无关像素)和DIP一样，不要搞混了。唯一的原因是DP更符合SP(尺度无关像素)。</p><p id="6360" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">* SP(独立于比例的像素)与DP相同，但增加了一个比例因子，该因子基于用户在设备的系统设置中选择的字体大小。SP只能用作文本的单位。避免使用SP作为非文本组件的单位。</p><p id="55e7" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">*密度与DPI相同，它显示1英寸区域内的像素数。在Android中，DPI只是一个计量单位，代表的是密度。例如，对于分辨率为1080x1920、尺寸为5.5英寸的设备，我们可以说设备屏幕密度约为401。</p><p id="5dec" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">我希望术语是清楚的。没有吗？再仔细看一遍就好了))</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/c97a7a2e7892d5cbda98ffb5c958a745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eqZQuAtuARj4Lj0lXxMiTg.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">密度，DPI，PPI是相互联系的。这是一回事。</p></figure><p id="ec54" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">那么什么是密度无关呢？这意味着，我们的视图大小将与屏幕密度无关。你知道，如果我们以像素为单位指定我们的视图大小，它将根据密度改变它的大小。假设我们有一个宽度和高度都是200x200px的ImageView。现在，如果设备密度为100 dpi，该ImageView将在屏幕上占据2英寸的宽度和高度。但如果设备密度将为400 dpi，则需要0.5英寸。我希望术语是清楚的。如果你感到困惑，再看一遍PPI/DPI。</p><p id="cf31" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">那么它是如何独立于密度的呢？为了回答这个问题，让我介绍一下Android中存在的不同密度的存储桶:</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="0b27" class="kw kx iq ks b gy ky kz l la lb">ldpi - low density bucket (~120dpi, 0.75x).<br/>mdpi - medium density bucket (~160dpi, 1x)<br/>hdpi - high density bucket (~240dpi, 1.5x)<br/>xhdpi - extra high density bucket (~320dpi, 2x)<br/>xxhdpi - extra-extra high density bucket (~480dpi, 3x)<br/>xxxhdpi - extra-extra-extra high density bucket (~640dpi, 4x)</span></pre><blockquote class="nn no np"><p id="2018" class="lu lv nq lw b lx mq jr lz ma mr ju mc nr ms mf mg ns mt mj mk nt mu mn mo mp ij bi translated">ldpi桶已经不太常见了。</p></blockquote><p id="c79e" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">如你所见，Android有6个密度桶。当然，还有nodpi(所有密度的资源)和tvdpi(打算用于TVs的资源)桶，但我们不会在本文中涉及它们。在160 dpi的屏幕中，1dp大约等于1px。所以才叫中密度。此外，它在某些地方被称为基线密度。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="8b3e" class="ld kx iq bd le lf nc lh li lj nd ll lm jw ne jx lo jz nf ka lq kc ng kd ls lt bi translated">如何计算设备密度</h1><p id="190d" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">让我们以我们示例中的器件为例，其密度约为315 dpi。如果我们看一下密度表，我们会发现315 dpi介于hdpi和xhdpi之间。现在，我们的设备属于哪个密度桶？也许是hdpi？或者也许是xhdpi？嗯，可以是hdpi，也可以是xhdpi，我们不敢奢望。制造商在选择密度时有一定的灵活性。但通常，该设备属于其最近的桶。这意味着，315 dpi的设备将是xhdpi，401 dpi的设备将是xxhdpi。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/95d8e5c8b87ae35259eefdd3a9017720.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*GuY3wizS8IMmkOVz_SfBJg.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">设备密度为401 dpi</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/de52fa48b767f4535ee291b238b2f9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*Cn1ntinhSlN9ZHU2bbinig.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">设备密度为315 dpi</p></figure><p id="bfa9" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">当我们在dp中指定视图大小时，我们的视图会根据屏幕密度进行缩放。但是Android怎么知道它需要缩放多少视图呢？如上所述，在160 dpi屏幕中，1dp等于1px。</p><p id="6043" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">就拿密度为401 dpi的设备来说吧。为了得到比例因子，我们必须将401除以160。结果决定了视图在此设备上的缩放比例。答案是2.51。</p><p id="0952" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">我们还可以确定它有多少像素。我们用50x50dp的尺寸来简单的看一下。在我们的设备中，Android将50乘以比例因子，以获得当前设备的像素视图大小。我们会得到126像素。</p><p id="6f74" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">对于另一个密度约为315 dpi的设备，比例因子约为1.97。因此，50dp大小的相同视图在该设备中将是99像素。这就是dp与密度无关的原因。每个屏幕都有自己的比例因子，它决定了屏幕上将显示多少像素。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="41f6" class="ld kx iq bd le lf nc lh li lj nd ll lm jw ne jx lo jz nf ka lq kc ng kd ls lt bi translated">使用尺寸</h1><p id="fd7d" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">在这一点上，我们已经知道了许多关于dp、px、屏幕尺寸和密度的事情。现在该编码了:)</p><p id="46e2" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">我们将在这里讨论一些副主题:</p><ul class=""><li id="6c2d" class="nw nx iq lw b lx mq ma mr md ny mh nz ml oa mp ob oc od oe bi translated">如何获得显示器的真实宽度和高度？</li><li id="dad4" class="nw nx iq lw b lx of ma og md oh mh oi ml oj mp ob oc od oe bi translated">如何确定器件密度及其比例因子？</li><li id="36a6" class="nw nx iq lw b lx of ma og md oh mh oi ml oj mp ob oc od oe bi translated">我们能得到以英寸为单位的显示宽度和高度吗？</li><li id="e152" class="nw nx iq lw b lx of ma og md oh mh oi ml oj mp ob oc od oe bi translated">查找设备屏幕尺寸。</li></ul></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h2 id="7d9a" class="kw kx iq bd le ok ol dn li om on dp lm md oo op lo mh oq or lq ml os ot ls ou bi translated"><strong class="ak">如何获得显示器的真实宽度和高度？</strong></h2><p id="5efd" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">我们可以使用WindowManager类以像素为单位获得显示器的实际宽度和高度。</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="9d02" class="kw kx iq ks b gy ky kz l la lb">fun WindowManager.currentDeviceRealSize(): Pair&lt;Int, Int&gt; {<br/>    return if (Build.VERSION.<em class="nq">SDK_INT </em>&gt;= Build.VERSION_CODES.<em class="nq">R</em>) {<br/>        return Pair(<br/>            <em class="nq">maximumWindowMetrics</em>.<em class="nq">bounds</em>.width(),<br/>            <em class="nq">maximumWindowMetrics</em>.<em class="nq">bounds</em>.height())<br/>    } else {<br/>        val size = Point()<br/>        <em class="nq">defaultDisplay</em>.getRealSize(size)<br/>        Pair(size.x, size.y)<br/>    }<br/>}</span><span id="8900" class="kw kx iq ks b gy lc kz l la lb">val (width, height) = windowManager.currentDeviceRealSize()</span></pre><p id="3cc1" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">在上面的程序中，我们有1个扩展函数，它返回一对Int。这对表示显示宽度和高度。从Android 11 (API 30)开始<code class="fe ov ow ox ks b">defaultDisplay.getRealSize()</code>功能已弃用。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h2 id="cee4" class="kw kx iq bd le ok ol dn li om on dp lm md oo op lo mh oq or lq ml os ot ls ou bi translated"><strong class="ak">如何确定器件密度及其比例因子？</strong></h2><p id="b333" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">如何确定器件密度及其比例因子？我们能以某种方式确定什么是设备dpi吗？</p><p id="fc8e" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">不幸的是，不能保证我们总能得到正确的值。有一类叫做<code class="fe ov ow ox ks b">DisplayMetrics</code>。它包括关于我们显示器特性的信息。我们可以使用以下方法检索<code class="fe ov ow ox ks b">DisplayMetrics</code>实例:</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="c60e" class="kw kx iq ks b gy ky kz l la lb">val displayMetrics = <em class="nq">resources</em>.<em class="nq">displayMetrics</em></span></pre><p id="b966" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated"><code class="fe ov ow ox ks b">DisplayMetrics</code>有一些变数:</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="80b6" class="kw kx iq ks b gy ky kz l la lb">displayMetrics.density //The scale factor of the density<br/>displayMetrics.densityDpi // The density of the screen</span></pre><p id="61a8" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">坏消息是:这些值没有返回关于比例因子和密度的正确信息。但是取而代之的是，有两个变量，它们通常返回更准确的值。</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="fa77" class="kw kx iq ks b gy ky kz l la lb">displayMetrics.xdpi // The pixels count in inch for screen width<br/>displayMetrics.ydpi // The pixels count in inch for screen height</span></pre><p id="6645" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">“xdpi”代表X维度上屏幕每英寸的像素。“ydpi”是相同的，但用于Y维。即使在这种情况下，我们也不能100%保证我们会得到正确的值。但是在我的实践中，我利用了这些价值。在大多数情况下,“xdpi/ydpi”返回相同的值，因此使用哪一个取决于您。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h2 id="9189" class="kw kx iq bd le ok ol dn li om on dp lm md oo op lo mh oq or lq ml os ot ls ou bi translated"><strong class="ak">我们能得到以英寸为单位的显示宽度和高度吗？</strong></h2><p id="69ca" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">如果我们运气好，得到了正确的值，我们可以很容易地计算出显示器的宽度和高度。</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="7c13" class="kw kx iq ks b gy ky kz l la lb">val (width, height) = <em class="nq">windowManager</em>.currentDeviceRealSize()<br/>val displayMetrics = <em class="nq">resources</em>.<em class="nq">displayMetrics<br/></em>val widthInInches = width / displayMetrics.xdpi<br/>val heightInInches = height / displayMetrics.ydpi</span></pre><p id="9151" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">我们只需要用像素宽度除以每英寸的像素数。对于宽度，我们使用xdpi，对于高度，我们使用ydpi，因为在坐标系中，x轴是宽度，y轴是高度。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h2 id="df64" class="kw kx iq bd le ok ol dn li om on dp lm md oo op lo mh oq or lq ml os ot ls ou bi translated"><strong class="ak">查找设备屏幕尺寸</strong></h2><p id="9426" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">这很容易计算，因为我们已经有了以英寸为单位的屏幕宽度和高度。利用勾股定理，我们可以很容易地确定我们的屏幕尺寸。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/ee66b3abea16d3904a2ecd9120f49034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SL5zcU6ZjGrqgTXOrLcMDQ.jpeg"/></div></figure><p id="7332" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">该程序将如下所示:</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="183a" class="kw kx iq ks b gy ky kz l la lb">val (width, height) = <em class="nq">windowManager</em>.currentDeviceRealSize()<br/>val widthInInches: Double = (width / <em class="nq">resources</em>.<em class="nq">displayMetrics</em>.xdpi).toDouble()<br/>val heightInInches: Double = (height / <em class="nq">resources</em>.<em class="nq">displayMetrics</em>.ydpi).toDouble()<br/><br/>val widthAndHeightSum = widthInInches.<em class="nq">pow</em>(2) + heightInInches.<em class="nq">pow</em>(2)<br/>val screenSize = <em class="nq">sqrt</em>(widthAndHeightSum)</span></pre><p id="bd3b" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">我们也可以使用Math class <code class="fe ov ow ox ks b">hypot()</code>函数，它会在内部为我们做这个计算。</p><p id="164e" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated"><code class="fe ov ow ox ks b">hypot()</code> -计算<code class="fe ov ow ox ks b">sqrt(x^2 + y^2)</code>，没有中间溢出或下溢。</p><pre class="kg kh ki kj gt kr ks kt ku aw kv bi"><span id="fdad" class="kw kx iq ks b gy ky kz l la lb">val (width, height) = <em class="nq">windowManager</em>.currentDeviceRealSize()<br/>val widthInInches: Double = (width / <em class="nq">resources</em>.<em class="nq">displayMetrics</em>.xdpi).toDouble()<br/>val heightInInches: Double = (height / <em class="nq">resources</em>.<em class="nq">displayMetrics</em>.ydpi).toDouble()<br/><br/>val screenSize = <em class="nq">hypot</em>(widthInInches, heightInInches)</span></pre><p id="e883" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">在这两种情况下，我们的程序都运行良好。我的设备屏幕尺寸是6.3。我得到的输出是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/a2d2e29dae126766b3805656339ca36e.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*7R-dGQxvncx3Wh3kAgtzNg.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">输出</p></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="4364" class="ld kx iq bd le lf nc lh li lj nd ll lm jw ne jx lo jz nf ka lq kc ng kd ls lt bi translated">包裹</h1><p id="3a83" class="pw-post-body-paragraph lu lv iq lw b lx ly jr lz ma mb ju mc md me mf mg mh mi mj mk ml mm mn mo mp ij bi translated">在本文中，我们讨论了令Android开发人员困惑的大部分事情。现在，您已经清楚地了解了像素和PPI、不同的密度桶及其说明符、什么是dp，以及它如何独立于密度。你知道所有的公式，你可以自己计算得到屏幕密度。</p><p id="0997" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">最后我们甚至还写了一个程序，进行了不同的计算，你会有一个清晰的认识。从现在开始，你可以潜得更深，探索更多。感谢您抽出时间。</p><p id="9058" class="pw-post-body-paragraph lu lv iq lw b lx mq jr lz ma mr ju mc md ms mf mg mh mt mj mk ml mu mn mo mp ij bi translated">你可以在这个<a class="ae pa" href="https://gist.github.com/Hayk985/ba0945ef7d8da2289f07119dfa77504e" rel="noopener ugc nofollow" target="_blank">要旨</a>里找到上面的源代码。</p></div></div>    
</body>
</html>