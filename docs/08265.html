<html>
<head>
<title>How To Nest a UITableView Inside a UICollectionViewCell Like Trello</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在类似Trello的UICollectionViewCell中嵌套UITableView</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-nest-a-uitableview-inside-a-uicollectionviewcell-like-trello-eeec0ea6f097?source=collection_archive---------5-----------------------#2021-04-12">https://betterprogramming.pub/how-to-nest-a-uitableview-inside-a-uicollectionviewcell-like-trello-eeec0ea6f097?source=collection_archive---------5-----------------------#2021-04-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c80" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">制作一个Trello board样式的CollectionView，并将数据传递给CollectionView中嵌入的TableView</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5ad23e8ecd122519a85c413b301bda3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W_Z9KgVzGgMLeefe"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wocintechchat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜@ wocintechchat.com</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="eccb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">受Trello的启发，我尝试制作一个Trello board风格的<code class="fe lv lw lx ly b">CollectionView</code>，在不同的<code class="fe lv lw lx ly b">CollectionView</code>单元格中呈现不同的数据集。下面的演示展示了最终结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/6eeb56807557a91483404a56a1f30080.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/1*vgpX7i0EGI85YwuR4bhnzw.gif"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="3cd7" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">设置视图</h1><p id="03c4" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我认为用一个例子会更容易理解视图的层次关系:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/6238dd53f19ef4c0af5a0bdcbc6c0af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*NzoBO07MgSPIZXKV7InUTQ.png"/></div></figure><ol class=""><li id="9d9e" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">我在<code class="fe lv lw lx ly b">ViewController</code>里设置了一个<code class="fe lv lw lx ly b">CollectionView</code>。由于<code class="fe lv lw lx ly b">ViewController</code>持有<code class="fe lv lw lx ly b">CollectionView</code>，应该设置为<code class="fe lv lw lx ly b">UICollectionView</code>的代理和数据源。</li><li id="98a9" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">然后我给<code class="fe lv lw lx ly b">CollectionView</code>添加一个<code class="fe lv lw lx ly b">CollectionView Cell</code>原型。将<code class="fe lv lw lx ly b">CollectionView Cell</code>原型的宽度调整为与<code class="fe lv lw lx ly b">CollectionView</code>的宽度相同。</li><li id="62e1" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">一个<code class="fe lv lw lx ly b">TableView</code>嵌入在<code class="fe lv lw lx ly b">CollectionView Cell</code>原型中。<code class="fe lv lw lx ly b">CollectionView Cell</code>应该是<code class="fe lv lw lx ly b">UITableView</code>的代理和数据源。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/1d149764106f0fe1e2c3f120885ef31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*vGQ9fF3-YfaGcty-yx4L0A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">视图层次结构</p></figure><h2 id="bce7" class="nu mi it bd mj nv nw dn mn nx ny dp mr li nz oa mt lm ob oc mv lq od oe mx of bi translated">视图控制器</h2><p id="0b90" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">作为<code class="fe lv lw lx ly b">CollectionView</code>的代理和数据源，<code class="fe lv lw lx ly b">ViewController</code>必须符合<code class="fe lv lw lx ly b">UICollectionViewDelegate</code>、<code class="fe lv lw lx ly b">UICollectionViewDataSource</code>和<code class="fe lv lw lx ly b">UICollectionViewDelegateFlowLayout</code>协议。</p><p id="e9da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">collectionView(_:numberOfItemsInSection:)</code>和<code class="fe lv lw lx ly b">collectionView(_:cellForItemAt:)</code>功能必须在<code class="fe lv lw lx ly b">ViewController</code>中实现。</p><p id="3416" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">collectionView(_:cellForItemAt:)</code>函数中，有一个<code class="fe lv lw lx ly b">UICollectionViewCell</code>的实例方法叫做<code class="fe lv lw lx ly b">updateCellWith(row:)</code>。这是为传递数据而定制的扩展函数。我会在显示数据部分解释。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><h2 id="4c7e" class="nu mi it bd mj nv nw dn mn nx ny dp mr li nz oa mt lm ob oc mv lq od oe mx of bi translated">CollectionViewCell</h2><p id="cc28" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">作为<code class="fe lv lw lx ly b">UITableView</code>的代理和数据源，<code class="fe lv lw lx ly b">CollectionViewCell</code>必须符合<code class="fe lv lw lx ly b">UITableViewDataSource</code>和<code class="fe lv lw lx ly b">UITableViewDelegate </code>协议。</p><p id="000c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里必须实现<code class="fe lv lw lx ly b">tableView(_:numberOfRowsInSection:)</code>和<code class="fe lv lw lx ly b">tableView(_:cellForRowAt:)</code>功能。</p><p id="1304" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我使用一个原型单元格来显示数据。如果您从<code class="fe lv lw lx ly b">nib</code>创建一个定制的<code class="fe lv lw lx ly b">tableView</code>单元格，它应该在<code class="fe lv lw lx ly b">CollectionView Cell</code>中注册。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="a43e" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">显示数据</h1><p id="5372" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">整个数据首先被载入<code class="fe lv lw lx ly b">ViewController</code>。每个<code class="fe lv lw lx ly b">CollectionView</code>单元上显示的数据集由<code class="fe lv lw lx ly b">indexPath.row</code>检索并传递给<code class="fe lv lw lx ly b">collectionViewCell</code>。</p><p id="39b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe lv lw lx ly b">collectionViewCell</code>接收到一组数据时，嵌入其中的<code class="fe lv lw lx ly b">tableView</code>也可以用<code class="fe lv lw lx ly b">indexPath.row</code>检索数据，然后在<code class="fe lv lw lx ly b">tableView</code>单元格上显示数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/e2a831f3b938cd38b954bc8a0457a005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f3tPH5X1WhHdPNCaukANKQ.png"/></div></div></figure><h2 id="7397" class="nu mi it bd mj nv nw dn mn nx ny dp mr li nz oa mt lm ob oc mv lq od oe mx of bi translated">视图控制器</h2><p id="a6dd" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">在这个例子中，原始数据是静态存储在<code class="fe lv lw lx ly b">ViewController</code>中的<code class="fe lv lw lx ly b">UIColor</code>的六个数组。您可以用从数据库中动态加载的数据来替换它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/0f0ba44d0004ade906f967c892041d47.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*QplZQQzzc2SbChXOFE8N3g.png"/></div></figure><p id="8ec6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我扩展了<code class="fe lv lw lx ly b">UICollectionViewCell</code>类，并为其添加了一个名为<code class="fe lv lw lx ly b">updateCellWith(row:)</code>的自定义函数，以帮助将一组<code class="fe lv lw lx ly b">UIColor</code>从<code class="fe lv lw lx ly b">ViewController</code>传递到<code class="fe lv lw lx ly b">CollectionViewCell</code>，这样我就可以进一步显示<code class="fe lv lw lx ly b">tableView</code>单元格上的每种颜色。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="6fd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">collectionView(_:cellForItemAt:)</code>中，用<code class="fe lv lw lx ly b">indexPath.row</code>检索当前<code class="fe lv lw lx ly b">CollectionView Cell</code>上应该显示的<code class="fe lv lw lx ly b">UIColor</code>的数组。</p><p id="3141" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调用<code class="fe lv lw lx ly b">updateCellWith(row: )</code>将数据数组传递给<code class="fe lv lw lx ly b">CollectionViewCell</code>并存储在<code class="fe lv lw lx ly b">var dataArray</code>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><h2 id="452d" class="nu mi it bd mj nv nw dn mn nx ny dp mr li nz oa mt lm ob oc mv lq od oe mx of bi translated">CollectionViewCell</h2><p id="c0ba" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">在<code class="fe lv lw lx ly b">CollectionViewCell</code>中有一个名为<code class="fe lv lw lx ly b">dataArray</code>的变量。在<code class="fe lv lw lx ly b">ViewController</code>传递数据给它之后，它就不再是零了。然后可以在<code class="fe lv lw lx ly b">tableView(_:cellForRowAt:)</code>中读取，该数组中的每种颜色可以显示在<code class="fe lv lw lx ly b">tableView</code>单元上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/6eeb56807557a91483404a56a1f30080.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/1*vgpX7i0EGI85YwuR4bhnzw.gif"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/15bb15137ba3bd234c94e0740bdfb465.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/1*B1_Fr84B2nZzdqq5mGfQjA.gif"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><p id="a277" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想用<code class="fe lv lw lx ly b">UIPageViewController</code>达到同样的效果，这里有另一篇文章你可能会喜欢:</p><h2 id="9e1b" class="nu mi it bd mj nv nw dn mn nx ny dp mr li nz oa mt lm ob oc mv lq od oe mx of bi translated"><strong class="ak">【Swift】用UIPageViewController制作日志般的无限滚动视图</strong></h2><div class="ol om gp gr on oo"><a href="https://medium.com/geekculture/swift-make-a-journal-like-infinite-scrolling-view-with-uipageviewcontroller-6ffe2b0d06df" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">[Swift]用UIPageViewController制作日志般的无限滚动视图</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">无限地向前和向后滚动视图，并像日志一样相应地显示数据</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="83c8" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">参考</h1><div class="ol om gp gr on oo"><a href="https://stackoverflow.com/questions/43231937/tableview-inside-specific-uicollectionviewcell-programmatically" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">特定UICollectionViewCell内部的TableView？</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">stackoverflow.com</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://stackoverflow.com/questions/50679338/table-view-inside-of-a-collection-view/50679533" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">集合视图中的表格视图</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">stackoverflow.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://stackoverflow.com/questions/45767502/how-do-i-show-a-uitableview-within-a-uicollectionviewcell" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">如何在UICollectionViewCell中显示UITableView</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">我是一名新的Swift程序员，目前正在开发一个非常简单的待办事项应用程序。问题是我…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">stackoverflow.com</p></div></div><div class="ox l"><div class="pf l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://johncodeos.com/how-to-add-uicollectionview-inside-uitableviewcell-using-swift/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">如何使用Swift | John Codeos在UITableViewCell内添加UICollectionView</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">今天，我将向您展示如何在UITableView中添加UICollectionView。在本例中，我们有类别，并且…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">johncodeos.com</p></div></div><div class="ox l"><div class="pg l oz pa pb ox pc ks oo"/></div></div></a></div></div></div>    
</body>
</html>