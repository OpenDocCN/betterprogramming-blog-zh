<html>
<head>
<title>A Look at the Flutter Freezed Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">看一看颤动的冷冻包装</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-look-at-the-flutter-freezed-package-5ea5473c6abc?source=collection_archive---------2-----------------------#2022-04-26">https://betterprogramming.pub/a-look-at-the-flutter-freezed-package-5ea5473c6abc?source=collection_archive---------2-----------------------#2022-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="67d8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">颤动冻结的基调</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/db212c9c24af854a90e6ff567abcb142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ka3jf4GMW8hDQHQ7"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">克里斯托弗·高尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ec12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中(或者我应该说我的关键笔记)，我将展示如何使用我最喜欢的一个Flutter包:<a class="ae kv" href="https://github.com/rrousselGit/freezed" rel="noopener ugc nofollow" target="_blank"> Freezed </a>。</p><p id="d9b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Freezed是一个健壮的、可伸缩的数据类代码生成器。它很可靠，但也有一个缺点:对于初学者来说，很难找到合适的混合和必要的功能来用于他们的应用程序逻辑。它的<a class="ae kv" href="https://github.com/rrousselGit/freezed" rel="noopener ugc nofollow" target="_blank">文档</a>非常精彩，详尽地解释了所有的特性，所以可以把这篇文章看作是偶尔参考的一些速记笔记。</p><p id="81db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我将强调冻结优惠的关键必要功能，并解释您为什么需要它们。</p><p id="d485" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在继续之前，请查看关于如何安装和使用软件包的<a class="ae kv" href="https://github.com/rrousselGit/freezed#install" rel="noopener ugc nofollow" target="_blank">冻结文档</a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="06c2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">禁用invalid_annotation_target警告和生成文件中的警告。</h1><p id="2f5c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">对于那些结合使用<code class="fe mw mx my mz b">json_serializable</code>和<code class="fe mw mx my mz b">freezed</code>的人来说，他们的共存有一个已知的问题，dart分析器在一个无效的注释目标上抛出警告。对于那些认为警告是错误的人来说，下面是解决这个问题的方法。</p><p id="24d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请查看本<a class="ae kv" href="https://github.com/rrousselGit/freezed/issues/488" rel="noopener ugc nofollow" target="_blank">期</a>以了解关于该问题的更多见解和更新。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="a8c5" class="lz ma iq bd mb mc nc me mf mg nd mi mj jw ne jx ml jz nf ka mn kc ng kd mp mq bi translated">默认值</h1><p id="5244" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">当变量在类形成期间没有被传递时，它允许有一个占位符。当缺少预期值时，将此值视为后备值。</p><pre class="kg kh ki kj gt nh mz ni nj aw nk bi"><span id="3ddd" class="nl ma iq mz b gy nm nn l no np">@Default(“John Doe“) String name</span></pre><h1 id="90e8" class="lz ma iq bd mb mc nc me mf mg nd mi mj jw ne jx ml jz nf ka mn kc ng kd mp mq bi translated">JsonKey</h1><p id="91cd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这在从后端反序列化JSON数据时很方便。它用于引用保存变量数据的键。仅当变量名不同于密钥时才需要，如下所示。</p><pre class="kg kh ki kj gt nh mz ni nj aw nk bi"><span id="76b2" class="nl ma iq mz b gy nm nn l no np">@JsonKey(name: “first_name”) String firstName</span></pre><h1 id="8ebe" class="lz ma iq bd mb mc nc me mf mg nd mi mj jw ne jx ml jz nf ka mn kc ng kd mp mq bi translated">托吉森</h1><p id="4bdd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><strong class="ky ir">冻结后的</strong>会自动要求<code class="fe mw mx my mz b"><a class="ae kv" href="https://pub.dev/packages/json_serializable" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">json_serializable</strong></a></code> <strong class="ky ir"> </strong>生成<a class="ae kv" href="https://github.com/rrousselGit/freezed#fromjsontojson" rel="noopener ugc nofollow" target="_blank">文档</a>中所述的所有必要的<code class="fe mw mx my mz b">fromJson</code> / <code class="fe mw mx my mz b">toJson</code>。</p><p id="28f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，为了序列化冻结对象的嵌套列表，您应该:</p><p id="19bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在类定义前指定一个<code class="fe mw mx my mz b">@JsonSerializable(explicitToJson: true)</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="7de1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者在你的<code class="fe mw mx my mz b">build.yaml</code>文件中修改<code class="fe mw mx my mz b">explicit_to_json</code>(在项目的根文件夹中创建)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="58c7" class="lz ma iq bd mb mc nc me mf mg nd mi mj jw ne jx ml jz nf ka mn kc ng kd mp mq bi translated">自定义JSON转换器</h1><p id="9650" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">不要像我第一天那样害怕这个。你是否厌倦了要求你的后端工程师在进行API调用时改变他们返回的变量类型？除非你是后端工程师(这会让你付出代价)。</p><p id="6122" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">于是就有了<code class="fe mw mx my mz b">JsonConverters</code>的概念。在类序列化/反序列化之前，它们将JSON值转换成所需的变量类型。</p><blockquote class="nq nr ns"><p id="a183" class="kw kx nt ky b kz la jr lb lc ld ju le nu lg lh li nv lk ll lm nw lo lp lq lr ij bi translated">NB:在Dart int和int？，弦与弦？etc是不同的变量类型。</p></blockquote><p id="33c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子将一个字符串分别转换为<code class="fe mw mx my mz b">int</code>和<code class="fe mw mx my mz b">int?</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6aa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，在您的类中使用自定义转换器，如下所示。</p><pre class="kg kh ki kj gt nh mz ni nj aw nk bi"><span id="6873" class="nl ma iq mz b gy nm nn l no np">@IntConverter() int id,</span><span id="df59" class="nl ma iq mz b gy nx nn l no np">@NullableIntConverter() int? age,</span></pre><h1 id="3e2d" class="lz ma iq bd mb mc nc me mf mg nd mi mj jw ne jx ml jz nf ka mn kc ng kd mp mq bi translated">我们类中的方法和Getters</h1><p id="9d9f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">每当你定义一个方法或getter时，我们都需要添加一个空的私有构造函数来让它工作。</p><p id="a6bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">否则，您可能会遇到这样的错误:非抽象类<code class="fe mw mx my mz b">_$_Person</code>缺少这些成员的实现:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="d183" class="lz ma iq bd mb mc nc me mf mg nd mi mj jw ne jx ml jz nf ka mn kc ng kd mp mq bi translated">可变类</h1><p id="fc85" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">到目前为止，您应该知道Flutter主要围绕两个概念:</p><ul class=""><li id="c252" class="ny nz iq ky b kz la lc ld lf oa lj ob ln oc lr od oe of og bi translated">不可变:不能改变，只能替换。</li><li id="5300" class="ny nz iq ky b kz oh lc oi lf oj lj ok ln ol lr od oe of og bi translated">可变的:可以改变</li></ul><p id="6c1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Freezed通过使用<code class="fe mw mx my mz b">@freezed</code>注释支持不变性，通过使用<code class="fe mw mx my mz b">@unfreezed</code>注释支持可变性。</p><p id="a571" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/rrousselGit/freezed#defining-a-mutable-class-instead-of-an-immutable-one" rel="noopener ugc nofollow" target="_blank">这里的</a>是对<a class="ae kv" href="https://github.com/rrousselGit/freezed#defining-a-mutable-class-instead-of-an-immutable-one" rel="noopener ugc nofollow" target="_blank">概念</a>的深入解释。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="91ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那是一个包裹。</p><p id="6ece" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我会不断更新这篇文章，介绍Freezed提供的很酷的特性。尽管如此，请查看<a class="ae kv" href="https://github.com/rrousselGit/freezed" rel="noopener ugc nofollow" target="_blank">文档</a>，该文档全面涵盖了封装的所有方面。</p><p id="239d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>