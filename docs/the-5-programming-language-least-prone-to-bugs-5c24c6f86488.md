# 最不容易出错的 5 种编程语言

> 原文：<https://betterprogramming.pub/the-5-programming-language-least-prone-to-bugs-5c24c6f86488>

## 提示:它们更具表现力和类型安全，采用不变性，并具有强大的并发支持

![](img/6ad820a446da6dbc9fd8ce2f2f8346fb.png)

照片由[马库斯·奥斯](https://unsplash.com/@medienserviceorth?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄

当我们期望程序做的和程序实际运行的不匹配时，通常会出现 bug。

大多数错误并不是语言本身的错，相反，它们是开发人员在使用语言时犯的错误。然而，一些编程语言不仅被设计用来编写可读的代码，还用来帮助开发人员做正确的事情。例如，东尼·霍尔说发明`null`是一个[十亿美元的错误](http://lambda-the-ultimate.org/node/3186)

他在 QCon 2009 上的演讲中提到，他正试图用面向对象语言设计第一个全面的引用类型系统，但他无法抗拒加入引用的诱惑，因为这很容易实现。`null`导致大量错误、漏洞和系统崩溃。最近的编程使用了许多带有非`null`引用的声明，比如 Scala 中的 Option type。

我认为有几种编程语言不太容易出错。这些编程语言都具有提高开发人员生产力和减少开发人员编写易错代码的机会的特性。

# 类型安全

编译时检查越多，编译器捕获的错误就越多，因此，一般来说，类型安全是件好事。如果一个程序在运行时被评估，更多的意外错误会发生。

# 表示

如果代码更短，样板文件/附带复杂性更少，就更容易发现 bug。如果你需要 100 行来表达一个算法，你的算法通常会更难阅读，更难发现错误。

# 不变

许多硬错误是由于与可变状态的复杂交互造成的。强调或提倡不变性的语言通常倾向于开发人员产生较少的错误。

# 强大的并发支持

编程中最具挑战性的 bug 就是那些无法重现的 bug。它可能无法生产的原因之一是它不可预测。并发问题很难检测和调试。任何需要手动锁定的事情最终都注定会失败(这包括每一种面向对象的并发方法)。

下面是我认为能让程序员写出不容易出错的代码的编程语言列表。

## 哈斯克尔

在 80 年代，函数式编程语言可能很优雅，但它被视为不实用的语言。许多可用的编程语言没有开源框架。因此，一群研究人员组成了一个委员会，来设计和实现一种用于研究和教授函数式编程的新语言 Haskell 就这样诞生了。

许多人认为 Haskell 是一种安全的语言，因为它提供了一套丰富的工具来编写正确的代码，再加上鼓励更安全模式的默认设置。用 Haskell 编写程序的好处之一是它的函数式编程特性和一个充满活力的类型系统。

默认情况下，所有 Haskell 变量都是惰性的。因此，您编写的代码是可预测的，不会在运行时出现意外的急切执行。

Haskell 中最显著的影响是它如何处理非局部效果。它帮助你考虑你放入函数中的每一个效果，由工具和库支持，让你明确地表达你的效果管理。如果你不知道什么是*效应*，看看[这篇](https://edward-huang.com/functional-programming/scala/monad/2020/06/21/what-is-effect-or-effectful-mean-in-functional-programming/)文章。

当你在 Haskell 中写东西时，你跟踪你的程序中的所有效果(并且单独的纯域代码包装在处理输入和输出的命令层中)，这导致更少的错误代码和意想不到的结果。

Haskell 是一种静态类型的语言，非常有表现力。这种语言通过它的类型系统提供了一种工具来谈论语言中的效果和组织。这意味着你可以根据类型类别的原则和法则来编写你的代码，并使它成为你的代码库中的一个抽象。这些抽象帮助您编写更通用的代码，并避免在您的数据类型中编写可能导致错误和错误的原语。

其他编程语言中的许多库，比如 Scala 中的精化类型和其他语言中的其他最佳约定，都来自 Haskell。

## 语言

在 20 世纪 70 年代中期，当美国国防部和英国国防部试图取代数百种用于嵌入式计算机系统的专用编程语言时，Ada 被设计成一种在所有嵌入式军事系统中运行该系统的单一语言。它表现出相同或更好的性能可靠性。

之后，他们将自己的语言定位为通用语言——通过添加 OOP，同时不失去可靠性和可维护性的核心价值。

Ada 目前的应用包括军事硬件、航空电子设备、空中交通管制系统和许多卫星——在这些领域，小故障会造成重大影响。

Ada 的设计是为了在编译时尽可能多地捕捉错误。这意味着编译一个 Ada 程序通常比编译一个 Java 程序需要更长的时间。然而，当它编译时，你可以确信当程序运行时，整个类的错误不会出现。

Ada 类型系统是强类型的——它不允许任何形式的隐式转换。因此，程序员必须明确命名块的结束语句，并声明变量的范围。例如，取一小段 C 代码如下:

如果上面的代码直接翻译成 Ada，看起来是这样的:

您将看到一个令人讨厌的错误:`Integer`和`MyInt`不一样。

这样做的好处之一是减少了意外——一个变量改变了类型定义之后，不会突然导致一千个隐式转换在整个代码库中爆炸。

## 红宝石

你一定在想，“Ruby 没有你上面描述的描述符。怎么上榜了？”

Ruby 上榜的原因之一是因为我认为它的哲学和原则有助于人类编写不容易出错的代码。

松本幸弘创建 Ruby 的原因之一就是为了“让开发者开心”。因此，该程序是高级的和开发者友好的。它很容易用人类的语言来理解，并且有一些合理的原则，比如最小惊讶原则。

虽然面向对象语言在并发环境下往往会产生更多容易出现 bug 的代码，但是如果我们想把简单的逻辑写成机器语言，Ruby 的高级语言可以帮助我们写出清晰易懂的语法。这是一种透明的语言，可以直接将人类的想法翻译成代码。

最小惊讶原则意味着事情按照你期望的方式运行，很少有例外。

Ruby 不会掩盖你用大量语法编写的解决方案，也不会让你需要导入外部库来完成简单的事情。使用 Ruby，您可以编写接近问题领域的程序，而不是总是将您的想法和设计映射到低级语言。

在创建程序时，Ruby 给出的东西是可以预见的。

## 斯卡拉

Scala 的创始人 Martin Odersky 想要设计一种比 Java 更好的语言。尽管 Scala 是面向对象和函数式编程的混合体，但它强烈提倡函数式编程作为其源代码中的事实。

默认情况下，不变性是标准，如果你正在用 Scala 编写代码，这是值得鼓励的。许多 Scala 社区也已经转向了 Haskell 的代码编写方式。一些流行的库，如[猫](https://typelevel.org/cats/)和 [FS2](https://fs2.io/#/) ，在编写高度并发的应用程序时采用了函数式编程。

Scala 有一个强大的静态类型系统，它将代数数据类型与类层次结构统一起来，使类型和路径相关类型能够将微积分应用到具体的语言设计中。

许多大数据应用程序，如 Hadoop 和 Kafka，都是用 Scala 创建的，因为 Scala 具有出色的并发 API 支持，这是并行处理大型数据集的关键。

Duolingo(一个著名的语言学习应用)将他们的会话生成器功能迁移到 Scala，因为它不太容易出现运行时[错误](https://blog.duolingo.com/rewriting-duolingos-engine-in-scala/)。Scala 静态类型使得用编译器捕捉 bug 变得更加容易。它没有 Java 那么冗长，这使得使用应用程序更加容易。此外，Scala 编程语言是可扩展的。在他们用 Scala 重写应用程序之前，他们的服务每个季度平均停机两个小时。切换到 Scala 后，最初几个月的停机时间为零。

还有更多关于受益于实现 Scala 的公司的案例研究。编写 Scala 代码不容易出错，因为它具有类型安全的特性、函数式编程范式和托管内存资源。

## 锈

Rust 是一种较新的语言，在 Stack Overflow 开发者调查中被选为最受欢迎的语言。开发人员报告说，它的静态类型、所有权模式和依赖性管理提高了他们的生产力。

当你用 Rust 编程时，最棒的事情之一就是与错误处理消息的交互足够健壮，可以告诉你哪些错误你可能还没有处理。

例如，如果你写的数据是从一串`data.txt`中读取的，就像这样…

…您会得到一条类似这样的错误消息:

```
error[E0308]: mismatched types note: expected type `std::string::String` found type `std::result::Result<std::string::String, std::io::Error>`
```

上面的代码会给出一个编译器错误，因为`fs::read_to_String`方法可能会因为一个 I/O 错误而失败:例如，文件可能不存在，但是程序没有处理这个错误情况。其他编译器通常没有预先的错误处理——它通常在问题出现时被跟踪。

Rust 使用函数式编程的口头禅“让非法状态变得不可表示”这消除了一整类错误，这些错误可能显示为未经检查的异常:`NullPointerException`、`IllegalArgumentException`、`ConcurrentModificationException`等等。Rust 会在编译时捕获这些。这些异常通常是程序员写代码时出现的异常，而不是网络故障。

# 外卖食品

每种编程语言都是为不同的目的而设计的。有些语言是为了易于使用而设计的，而有些则是基于可伸缩性的目的而设计的。

语言类型越强大，在编译时捕获的错误就越多。

以并发方式设计的语言有助于减少难以发现的错误。

一门编程语言在识别 bug 方面再好，也只能指导我们按照它的哲学去写代码。最终，开发人员仍然需要对所有可能的情况采取预防措施，以便生成一个健壮的应用程序。

根据我的经验，这是五种我认为不容易出错的编程语言。

# 资源

*   [“最安全的编程语言是什么？”——Quora](https://www.quora.com/What-is-the-safest-programming-language)
*   [“什么编程语言通常产生的错误代码最少？”— Quora](https://www.quora.com/What-programming-languages-generally-produce-the-least-buggy-code)
*   [“Github 中编程语言和代码质量的大规模研究”——《美国计算机学会通讯》](https://cacm.acm.org/magazines/2017/10/221326-a-large-scale-study-of-programming-languages-and-code-quality-in-github/fulltext)
*   [“为什么认为 Haskell 是安全的？”— Quora](https://www.quora.com/Why-is-Haskell-considered-to-be-safe)
*   [“编程语言安全分值 2”——刻意软件](http://deliberate-software.com/safety-rank-part-2/)
*   [“为什么选择铁锈？”—通行证](https://www.passfort.com/news/why-choose-rust)

*原载于*[*https://edward-huang.com*](https://edward-huang.com/programming/software-development/2021/03/02/5-programming-language-that-produce-code-least-prone-to-bugs/)*。*