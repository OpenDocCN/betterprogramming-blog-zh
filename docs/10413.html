<html>
<head>
<title>This Hidden Feature of React Hides HTML Attributes From the DOM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React的这个隐藏特性对DOM隐藏了HTML属性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-325a4df09c38?source=collection_archive---------9-----------------------#2022-01-05">https://betterprogramming.pub/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-325a4df09c38?source=collection_archive---------9-----------------------#2022-01-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1d66" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在DOM中隐藏React JSX元素的属性，比如当你使用可选道具或条件渲染时？它不在React文档中，但是你可以这样做</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cc34262f501046c3d95009496d8d8a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MWqleM0LiZ2jVYUL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">托马斯·博尔曼斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f82c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近实现了一些代码，使用一个可选的<code class="fe lv lw lx ly b">isNewWindow</code>属性来决定一个链接是否应该在一个新窗口中打开。</p><p id="84e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前的解决方案是可行的，但是每次我读代码的时候，我都觉得一定有问题。这是不必要的复杂。</p><p id="49dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给你，看一下。这个TypeScript代码示例对您有意义吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/7adc7b6a855bf7c6adb0916b1ad4439a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_uOjl3s0TUxK_CGQTHkSA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://codesandbox.io/s/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-oky3k?file=/src/MyCoolLink.tsx" rel="noopener ugc nofollow" target="_blank">在CodeSandbox查看原始代码</a></p></figure><p id="c7fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，其实我有很多话要说。谁写的这些垃圾？(<em class="ma">让我查一下</em><code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/@drdmason/git-blame-all-the-way-back-62957f8407" rel="noopener"><em class="ma">git blame</em></a></code><em class="ma">——哎呦，原来是我！！</em> <a class="ae ky" href="https://www.urbandictionary.com/define.php?term=damn" rel="noopener ugc nofollow" target="_blank"> <em class="ma">该死的</em> </a> <em class="ma">。</em>)</p><p id="2c42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，当我们可以在函数声明中直接析构属性时，为什么在函数组件前有一个命名类型？</p><p id="ff95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二，我比较懒，用<code class="fe lv lw lx ly b">export default function ...</code>比用<a class="ae ky" href="https://javascript.plainenglish.io/how-to-use-let-var-and-const-in-javascript-cdf42b48d70" rel="noopener ugc nofollow" target="_blank"> const </a>少一行代码。这是个人喜好，但是嘿。</p><p id="37b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三，我不认为你真的需要指定<code class="fe lv lw lx ly b">target="self"</code>，因为它是默认值。为什么要让事情变得不必要的混乱？</p><blockquote class="mb mc md"><p id="7d0f" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">”<code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-target" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">target</strong></a></code></p><p id="a6dd" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">在哪里显示链接的URL，作为一个<em class="it">浏览上下文</em>(一个标签、窗口或<code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe" rel="noopener ugc nofollow" target="_blank">&lt;iframe&gt;</a></code>)的名称。以下关键字对于加载URL的位置具有特殊的含义:</p><p id="d8d6" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">_self</code>:当前浏览上下文。(默认)</p><p id="550f" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">通常是一个新标签，但是用户可以配置浏览器打开一个新窗口。"— <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a" rel="noopener ugc nofollow" target="_blank"> MDN Docs for &lt; a &gt;:锚元素</a></p></blockquote><p id="718e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第四，最后还有一个不必要的<a class="ae ky" href="https://javascript.plainenglish.io/what-does-the-question-mark-mean-in-javascript-code-353cfadcf760" rel="noopener ugc nofollow" target="_blank">问号</a> <code class="fe lv lw lx ly b"><a class="ae ky" href="https://javascript.plainenglish.io/what-does-the-question-mark-mean-in-javascript-code-353cfadcf760" rel="noopener ugc nofollow" target="_blank">?</a></code> <a class="ae ky" href="https://javascript.plainenglish.io/what-does-the-question-mark-mean-in-javascript-code-353cfadcf760" rel="noopener ugc nofollow" target="_blank">【三元运算符】</a>，这里<code class="fe lv lw lx ly b">&lt;NewWindowIcon&gt;</code>可以用<code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND" rel="noopener ugc nofollow" target="_blank">&amp;&amp;</a></code>(逻辑与)进行<a class="ae ky" href="https://reactjs.org/docs/conditional-rendering.html" rel="noopener ugc nofollow" target="_blank">条件渲染</a>而不是<code class="fe lv lw lx ly b">? : <a class="ae ky" href="https://javascript.plainenglish.io/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener ugc nofollow" target="_blank">null</a></code>模式。</p><p id="1640" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我很快对代码进行了重构，以获得更好的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/c4f9e9f0cd2e03eb946422ed92384962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qqx5nYa0omdF6C4-6chpGQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://codesandbox.io/s/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-oky3k?file=/src/MyCoolLinkRefactored.tsx:0-451" rel="noopener ugc nofollow" target="_blank">在CodeSandbox上查看原始代码</a></p></figure><p id="a744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，仍然有一个巨大的、突出的问题让我每次看代码时都感到困惑:那就是<code class="fe lv lw lx ly b">linkProps</code>部分。</p><p id="874e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我见过的可读性最差的代码，每次我试图解析它的时候，我都能听到大脑里发出“沉闷的声音”。</p><p id="2672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想修复它，但是我有一个棘手的问题——如何在React中创建一个隐藏在<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" rel="noopener ugc nofollow" target="_blank"> DOM </a>中的“可选属性”?</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="710d" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">可选属性和条件呈现</h1><p id="7d5f" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">因为我不记得可选属性是如何工作的，所以我快速浏览了一下React文档，但是我没有发现太多。</p><blockquote class="mb mc md"><p id="9e8e" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">“<code class="fe lv lw lx ly b">&amp;&amp;</code>逻辑AND运算符之所以有效，是因为在JavaScript中，<code class="fe lv lw lx ly b">true &amp;&amp; expression</code>总是计算为<code class="fe lv lw lx ly b">expression</code>，而<code class="fe lv lw lx ly b">false &amp;&amp; expression</code>总是计算为<code class="fe lv lw lx ly b">false</code>。</p><p id="acbc" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">因此，如果条件为<code class="fe lv lw lx ly b">true</code>，紧接在<code class="fe lv lw lx ly b">&amp;&amp;</code>之后的元素将出现在输出中。如果是<code class="fe lv lw lx ly b">false</code>，React会忽略并跳过。[…]</p><p id="af00" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">在极少数情况下，您可能希望一个组件隐藏自己，即使它是由另一个组件呈现的。为此，返回<code class="fe lv lw lx ly b">null</code>而不是它的渲染输出。”— <a class="ae ky" href="https://reactjs.org/docs/conditional-rendering.html" rel="noopener ugc nofollow" target="_blank">根据条件渲染对文档做出反应</a></p></blockquote><p id="4623" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有一个想法，你也许可以使用falsy值在React中选择性地渲染道具，但我需要确认一下。</p><p id="b08d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢使用CodeSandbox伟大的<a class="ae ky" href="https://React.new" rel="noopener ugc nofollow" target="_blank"> React.new </a>服务对React进行这种快速测试。</p><p id="ef3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你从未尝试过，那就点击链接吧，它不会咬人的。您将直接进入React的新代码沙箱。</p><p id="cd25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许有一天我们会将React内置到浏览器控制台中，但是如果你曾经想测试React的一个快速功能，React.new是很难被击败的。</p><p id="621a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有一个想法，你可以使用<a class="ae ky" href="https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4" rel="noopener"> falsy值</a>来使道具可选，类似于<code class="fe lv lw lx ly b">null</code>在React中对DOM不渲染。</p><p id="0317" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React文档中没有记录这种行为，它也不像我预期的那样工作。这是我发现的。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="549b" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">React中的假值和条件渲染</h1><p id="4f26" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">正如您可能会怀疑的那样，在React JSX中将falsy值作为HTML元素的属性值传递给<a class="ae ky" href="https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4" rel="noopener">会在DOM中隐藏该属性。</a></p><p id="83c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">属性的行为类似于条件呈现——试图将一个falsy值“直接”传递给DOM。</p><p id="5475" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您从React组件返回<code class="fe lv lw lx ly b"><a class="ae ky" href="https://levelup.gitconnected.com/how-to-check-for-an-object-in-javascript-object-null-check-3b2632330296" rel="noopener ugc nofollow" target="_blank">null</a></code>、<code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/coding-at-dawn/how-to-check-for-undefined-in-javascript-bcedd62c8ad" rel="noopener">undefined</a></code>、<code class="fe lv lw lx ly b"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/making-sense-of-vs-in-javascript-f9dbbc6352e3">false</a></code>或空的<a class="ae ky" href="https://javascript.plainenglish.io/how-to-check-for-a-string-in-javascript-a16b196915ff" rel="noopener ugc nofollow" target="_blank">字符串</a>、<code class="fe lv lw lx ly b">""</code>时，您在DOM中得不到任何呈现。</p><p id="dca3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，falsy值<code class="fe lv lw lx ly b">0</code>、<a class="ae ky" href="https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114" rel="noopener">负零(</a> <code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114" rel="noopener">-0</a></code> <a class="ae ky" href="https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114" rel="noopener"> ) </a>和<code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/coding-in-simple-english/how-to-check-for-nan-in-javascript-4294e555b447" rel="noopener">NaN</a></code>将在DOM中显示为文本，即使它们是falsy。这是一种反应。™ 😂</p><p id="716a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种行为实际上导致了一个常见的错误，Kent C. Dodds已经在他的博客上讨论过了(尽管我更喜欢他的技巧):</p><div class="no np gp gr nq nr"><a href="https://kentcdodds.com/blog/use-ternaries-rather-than-and-and-in-jsx" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">在JSX使用ternaries而不是&amp;。</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">这个代码有什么问题？不确定？我再问你一个问题。如果…上面的代码会怎么样</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">kentcdodds.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><p id="ffae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，React表达式<code class="fe lv lw lx ly b">{count} {count &amp;&amp; " messages"}</code>将返回文本“0”而不是文本“0 messages”或者什么都不返回。</p><p id="d6b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们很快就会看到，可选属性的行为是相似的，尽管无论属性是否需要值，行为都会略有不同。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="31ae" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">在HTML中，布尔属性不需要值</h1><p id="a55e" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">您可能还记得，<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes#boolean_attributes" rel="noopener ugc nofollow" target="_blank">HTML元素的某些属性是布尔型的</a>，这意味着它们可以带值使用，也可以不带值使用。</p><p id="82ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，<code class="fe lv lw lx ly b">&lt;a&gt;</code>锚标签元素可以采用布尔属性<code class="fe lv lw lx ly b">download</code>，而带有<code class="fe lv lw lx ly b">type="checkbox"</code>的<code class="fe lv lw lx ly b">&lt;input&gt;</code>可以采用<code class="fe lv lw lx ly b">checked</code>的布尔属性。这些布尔属性不需要值。</p><blockquote class="mb mc md"><p id="ffd3" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">”<code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-download" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">download</strong></a></code></p><p id="52cb" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">提示用户保存链接的URL，而不是导航到它。可以带值使用，也可以不带值使用:</p><p id="4277" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">如果没有值，浏览器将建议从各种来源生成的文件名/扩展名[…]</p><p id="96d3" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">定义一个值建议将其作为文件名。<br/> — <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a" rel="noopener ugc nofollow" target="_blank"> MDN Docs for &lt; a &gt;:锚元素</a></p></blockquote><p id="40ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以向DOM传递不带值的布尔属性，浏览器会将它们解释为true或enabled。</p><p id="72a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<code class="fe lv lw lx ly b">&lt;a&gt;</code>要记住的是<code class="fe lv lw lx ly b">download</code>的行为与<code class="fe lv lw lx ly b">href</code>不同，因为<code class="fe lv lw lx ly b">href</code>需要一个值，而<code class="fe lv lw lx ly b">download</code>不需要。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="0adb" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">如何在React中隐藏DOM中的属性</h1><p id="9d33" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">要在React的DOM中隐藏HTML元素的属性，需要传递false、undefined、null作为该属性的值。</p><p id="2b2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与需要值的属性(如<code class="fe lv lw lx ly b">&lt;a&gt;</code>上的<code class="fe lv lw lx ly b">href</code>)相比，布尔属性(如<code class="fe lv lw lx ly b">&lt;a&gt;</code>上的<code class="fe lv lw lx ly b">download</code>)的行为会发生变化。</p><p id="d473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你指定了一个布尔属性，但是没有给它一个值，它将会不带任何值的出现在DOM中。常规属性不会出现在DOM中。</p><p id="e623" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我的测试，以下是falsy值的完整列表，以及它们在React中用作属性值时的行为:</p><ul class=""><li id="b3ea" class="og oh it lb b lc ld lf lg li oi lm oj lq ok lu ol om on oo bi translated"><em class="ma">无参数</em> = &gt;非布尔属性(需要值的属性)根本不会出现在DOM中。一个布尔属性(不需要值的属性)将出现在没有值的DOM中。</li><li id="83c2" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated"><code class="fe lv lw lx ly b">{true}</code> = &gt;与无参数相同，除了非布尔属性会在控制台中生成警告消息。</li><li id="b94b" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated"><code class="fe lv lw lx ly b">""</code> <em class="ma">(空字符串)</em> = &gt;属性出现在DOM中没有值，不管它是否需要值。</li><li id="d2d4" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated">属性根本没有出现在DOM中。</li><li id="b4ee" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated">属性根本没有出现在DOM中。</li><li id="bc77" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated">属性根本没有出现在DOM中。</li><li id="0468" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated"><code class="fe lv lw lx ly b">{0}</code> <em class="ma">(零)</em> = &gt;无论是否需要值，该属性都以值“0”出现。</li><li id="961f" class="og oh it lb b lc op lf oq li or lm os lq ot lu ol om on oo bi translated"><code class="fe lv lw lx ly b">{NaN}</code> <em class="ma">(非数字)</em> = &gt;无论是否需要值，该属性都以值“NaN”出现。生成控制台警告。</li></ul><p id="bff6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道了如何可选地呈现某些属性，我们可以返回并从代码示例中重构掉<code class="fe lv lw lx ly b">linkProps</code>。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="d12a" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">如何在React的新窗口中打开链接</h1><p id="8c34" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">为了在新窗口中打开一个链接，我们将使用<code class="fe lv lw lx ly b">isNewWindow</code>属性有条件地设置<code class="fe lv lw lx ly b">target</code>和<code class="fe lv lw lx ly b">rel</code>属性的值。</p><p id="f776" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于应该在当前浏览器选项卡中打开的普通链接，我们根本不想将<code class="fe lv lw lx ly b">target</code>或<code class="fe lv lw lx ly b">rel</code>呈现到DOM中。下面是怎么做的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/02f636221c56e998e7f9691c8cafe8f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nAZy190GJfRP7FGSrOTVYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://codesandbox.io/s/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-oky3k?file=/src/MyCoolLinkFixed.tsx:0-402" rel="noopener ugc nofollow" target="_blank">在CodeSandbox上查看原始代码</a></p></figure><p id="3792" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们将<code class="fe lv lw lx ly b">undefined</code>传递给<code class="fe lv lw lx ly b">target</code>或<code class="fe lv lw lx ly b">ref</code>时，React简单地从DOM中完全删除这些属性。这就是我们隐藏属性的方式。</p><p id="4ce9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从技术上讲，您可以使用<code class="fe lv lw lx ly b">&amp;&amp;</code>(逻辑AND)来代替<code class="fe lv lw lx ly b">?</code>，但是这给了我一个ESLint警告，提示<code class="fe lv lw lx ly b">false</code>对于这些属性无效。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="9310" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">结论:隐藏DOM中的可选道具</h1><p id="5edb" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在最初的代码示例中<code class="fe lv lw lx ly b">linkProps</code>让我感到困扰的是，我不知道道具将会被改变。</p><p id="228f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我查看代码的开头，我可以解析出会有一些普通的道具，比如<code class="fe lv lw lx ly b">href</code>和<code class="fe lv lw lx ly b">text</code>。</p><p id="5f63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，如果我看一下代码的结尾，我可以看到<code class="fe lv lw lx ly b">target="_blank"</code>根据<code class="fe lv lw lx ly b">isNewWindow</code>属性被可选地设置。</p><p id="1910" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，每次我看代码的时候，我都认为<code class="fe lv lw lx ly b">rel</code>属性已经被遗忘了，除非我回头看看中间。</p><p id="ce3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然你应该包括<code class="fe lv lw lx ly b">rel="noopener noreferrer"</code>，至少对于老版本的浏览器，我一直在想我需要添加它。代码太复杂了。</p><blockquote class="mb mc md"><p id="2ab4" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">“当您使用<code class="fe lv lw lx ly b">target="_blank"</code>属性链接到另一个网站上的页面时，您的网站可能会面临性能和安全问题:</p><p id="9ddd" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">另一个页面可能与您的页面在同一进程上运行。如果另一个页面运行大量JavaScript，您的页面的性能可能会受到影响。</p><p id="8a66" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">另一个页面可以使用<code class="fe lv lw lx ly b">window.opener</code>属性访问您的<code class="fe lv lw lx ly b">window</code>对象。这可能允许其他页面将您的页面重定向到恶意URL。</p><p id="25b0" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">将<code class="fe lv lw lx ly b">rel="noopener"</code>或<code class="fe lv lw lx ly b">rel="noreferrer"</code>添加到<code class="fe lv lw lx ly b">target="_blank"</code>链接中可以避免这些问题。</p><p id="a861" class="kz la ma lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated">从Chromium版开始，带有<code class="fe lv lw lx ly b">target="_blank"</code>的锚点默认自动获得<code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.chromestatus.com/feature/6140064063029248" rel="noopener ugc nofollow" target="_blank">noopener</a></code> <a class="ae ky" href="https://www.chromestatus.com/feature/6140064063029248" rel="noopener ugc nofollow" target="_blank">行为</a>。<code class="fe lv lw lx ly b">rel="noopener"</code>的明确规范有助于保护传统浏览器的用户，包括Edge Legacy和Internet Explorer。“—<a class="ae ky" href="https://web.dev/external-anchors-use-rel-noopener/" rel="noopener ugc nofollow" target="_blank">web . dev</a>的“跨起点目的地的链接不安全”</p></blockquote><p id="c2d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我坚信，在React中处理传递给子组件的道具的最佳位置是在return语句中，而不是在其他地方。</p><p id="ccf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然很“可爱”但你可以用<a class="ae ky" href="https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab" rel="noopener"/><code class="fe lv lw lx ly b"><a class="ae ky" href="https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab" rel="noopener">...</a></code><a class="ae ky" href="https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab" rel="noopener">展开符</a>来调整一些<code class="fe lv lw lx ly b">linkProps</code> <a class="ae ky" href="https://levelup.gitconnected.com/how-to-check-for-an-object-in-javascript-object-null-check-3b2632330296?gi=f235dad84669" rel="noopener ugc nofollow" target="_blank">对象</a>到时候<a class="ae ky" href="https://javascript.plainenglish.io/destructure-react-props-with-es6-object-destructuring-for-cleaner-code-3984453e484d" rel="noopener ugc nofollow" target="_blank">析构</a>，很难读懂。</p><p id="3238" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们可以像有条件地渲染组件一样有条件地渲染React道具，所以这是我们应该使用的解决方案。</p><p id="4cb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！！</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="ffc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">德里克·奥斯汀博士是《职业规划:如何在6个月内成为成功的6位数程序员》一书的作者，该书现已在亚马逊上出售。</p></div></div>    
</body>
</html>