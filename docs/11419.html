<html>
<head>
<title>How to Share Pieces of Data in a Cross-region Fashion Using AWS CDK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用CDK自动气象站跨地区共享数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/cdk-and-the-sharing-of-cross-region-data-955925685e57?source=collection_archive---------9-----------------------#2022-03-17">https://betterprogramming.pub/cdk-and-the-sharing-of-cross-region-data-955925685e57?source=collection_archive---------9-----------------------#2022-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="01b0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">CDK与跨区域数据共享</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7d0cc79202bd12d3534d1d47b24bab87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4XcoKa2ZRDRHX-UO"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@jeffreyblum?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰弗里·布鲁姆</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1631" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在构建跨区域部署AWS资源的CDK应用程序时，一个典型的挑战是如何以灵活可靠的方式共享信息。</p><p id="4eb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，下图显示了跨区域部署期间的典型流程:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/d88996cf02ec86e7779cc0d5769364b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*vArZtHGifbI2vu0VhFucVQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">跨区域部署</p></figure><p id="eecd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能会尝试使用普通的SSM参数来编写:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="b895" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和SSM参数查找:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="749f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这在单区域部署中非常好，但是在跨区域设置中就不行了，因为查找机制没有提供任何指定目标区域的方法。</p><p id="4205" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">底线，写机制还可以但是读需要改进支持跨区读。</p><h1 id="63d0" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">提议的解决方案</h1><p id="cb62" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">我想到的克服这一限制的解决方案是实现一个CDK结构，用于以跨区域的方式读取SSM参数值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="99c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个框架实现基于两个可用的CDK结构:</p><ul class=""><li id="f0d0" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated"><a class="ae kv" href="https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.custom_resources.AwsCustomResource.html" rel="noopener ugc nofollow" target="_blank"> AwsCustomResource </a>，这是一个高级API，简化了CloudFormation定制资源的实现，包括底层Lambda函数的实现</li><li id="0b99" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">AwsSdkCall ，它是对AWS服务的单独调用的包装器</li></ul><p id="863e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，<code class="fe ng nh ni nj b">AwsCustomResource</code>管理定制资源的生命周期，而它的实现基于<code class="fe ng nh ni nj b">AwsSdkCall</code>作为<code class="fe ng nh ni nj b">SSM.GetParameter</code> API的包装器。</p><p id="194f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这个构造非常简单，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="e98e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只需注意region参数，您可以在其中指定该参数所在的区域。</p><p id="0719" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，您可以很容易地跨区域读取SSM参数值。</p></div></div>    
</body>
</html>