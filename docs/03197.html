<html>
<head>
<title>Swift Test Tips and Tricks: Build a Well-Designed Test Structure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速测试技巧和窍门:构建一个设计良好的测试结构</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-tests-tips-tricks-well-designed-test-structure-31dfa2fb5282?source=collection_archive---------22-----------------------#2020-01-27">https://betterprogramming.pub/swift-tests-tips-tricks-well-designed-test-structure-31dfa2fb5282?source=collection_archive---------22-----------------------#2020-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="83fa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是安排-行动-断言？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d3ce15e43bfc8d86700bfca89c6ca4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GDBxaLFilfgXAv4IyRFWTQ.png"/></div></div></figure><p id="f32c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本系列的一个主要思想是培养写好测试代码的心态，讨论它为什么重要。因此，让我们深入研究一种非常好的编写测试的方法。</p><p id="88bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，我想谈谈安排-行动-断言模式。(你也可以找到这个概念的其他名称，如AAA、Given-When-Then或最广为人知的名称AAA测试模式。)我们将解释如何用Swift语言实现这个测试结构模式。</p><p id="a96a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我给你看一些例子之前，我真的建议你观看2017年WWDC关于可测试性工程的会议。我相信这个环节是我写这些关于测试的文章的最大原因——也是我的主要参考。</p><div class="lq lr gp gr ls lt"><a href="https://developer.apple.com/videos/play/wwdc2017/414/" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">可测性工程- WWDC 2017 -视频-苹果开发者</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">单元测试是持续验证您的代码工作正常的必要工具。探索设计技巧…</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">developer.apple.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ks lt"/></div></div></a></div></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="b8eb" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">什么是安排-行动-断言？</h1><p id="ea41" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">Arrange-Act-Assert (AAA)模式是为被测方法编写单元测试的一种常见方式。我喜欢把它定义为一个伟大的指南，让你更好地编写和组织你的测试。</p><p id="d564" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最好的事情是它为你的测试提供了更好的可读性。当你阅读你的测试结构时，你可以给它一个与你的测试一致的名字。在本文中，我也将谈一点术语——但这还不是重点。</p><ul class=""><li id="fad8" class="nm nn it kw b kx ky la lb ld no lh np ll nq lp nr ns nt nu bi translated">单元测试方法的<code class="fe nv nw nx ny b">Arrange</code>部分初始化对象并设置传递给被测方法的数据值。</li><li id="00ff" class="nm nn it kw b kx nz la oa ld ob lh oc ll od lp nr ns nt nu bi translated"><code class="fe nv nw nx ny b">Act</code>部分使用排列好的参数调用测试中的方法。</li><li id="d56b" class="nm nn it kw b kx nz la oa ld ob lh oc ll od lp nr ns nt nu bi translated"><code class="fe nv nw nx ny b">Assert</code>部分验证被测方法的行为是否符合预期。</li></ul><p id="26cd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我将向您展示一个如何将这种模式应用到我们的测试中的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="5ba0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是一个简单测试的例子。基本上，我们想要验证一个类别是否有效。</p><p id="09c5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看一下这个测试，你可以看到它很大，很难阅读，如果有什么，需要改变或添加一些额外的代码。这个测试很难，因为测试的<code class="fe nv nw nx ny b">Arrange</code>、<code class="fe nv nw nx ny b">Act</code>和验证都在一行上。</p><p id="6bad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们看一个设计良好的测试结构的相同测试，实现这个模式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="6cd1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正如您所看到的，这个测试的结构更好，定义更好，易于阅读和理解，如果由于某种原因需要修改，也很容易做到。</p><p id="b123" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以像我在示例中所做的那样，选择使用注释来帮助您更好地理解您的测试，或者您可以尝试遵循没有注释的结构。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="46d5" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">最终注释</h1><p id="0a0c" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">这种模式在不同的编程语言中使用，可以作为整个技术团队使用的非常好的指南，并为单元测试编写设置一种模式。在我看来，这也是一个很大的好处——特别是如果你的公司有一个定义良好的代码审查过程，在这个过程中，你可以阅读另一种语言的测试，并理解测试的上下文和写作。</p><p id="9121" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">希望你喜欢它，并证明对你的项目有用。</p></div></div>    
</body>
</html>