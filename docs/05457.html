<html>
<head>
<title>How to Send Emails With Node.js Using Amazon SES</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用亚马逊SES通过Node.js发送电子邮件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-send-emails-with-node-js-using-amazon-ses-8ae38f6312e4?source=collection_archive---------0-----------------------#2020-07-10">https://betterprogramming.pub/how-to-send-emails-with-node-js-using-amazon-ses-8ae38f6312e4?source=collection_archive---------0-----------------------#2020-07-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="56f9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过Node.js和AWS从您自己的域发送电子邮件比您想象的要容易</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eaa0f2226480d793a6dae2d35b8b3d0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vxH2EOmiryvhFVDBOPg-0w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@onlineprinters?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">在线打印机</a>在<a class="ae kv" href="/s/photos/email?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="fc5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">发送高质量的电子邮件对任何在线平台都至关重要。幸运的是，有了Node.js和Amazon SES，这非常简单。我在下面列出了教程结构，所以你可以随意跳过。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="e66d" class="lx ly iq lt b gy lz ma l mb mc">1. <a class="ae kv" href="#45d1" rel="noopener ugc nofollow">Setting Up Your AWS Account to Yse SES</a><br/>2. <a class="ae kv" href="#525e" rel="noopener ugc nofollow">Integrating Amazon SES Into Your Node.js App</a></span></pre></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="45d1" class="mk ly iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">设置您的AWS帐户</h1><p id="8d46" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在设置Amazon SES之前，您需要做一些事情。</p><ul class=""><li id="ffef" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nl nm nn no bi translated">AWS帐户</li><li id="c4b6" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated">你拥有的域名</li></ul><p id="7a35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您还没有AWS帐户，您可以在这里创建一个<a class="ae kv" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">。否则，第一步就完成了。</a></p><p id="4581" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你没有自己的域名，很容易也很容易买到。有很多服务可以用来购买你自己的域名——我在下面列出了一些比较流行的服务。</p><p id="8cbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">获得您自己的域名的服务:</p><ul class=""><li id="f286" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nl nm nn no bi translated"><a class="ae kv" href="https://domains.google/" rel="noopener ugc nofollow" target="_blank">谷歌域名</a></li><li id="b827" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated"><a class="ae kv" href="https://www.domain.com/" rel="noopener ugc nofollow" target="_blank">Domain.com</a></li><li id="7ac0" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated"><a class="ae kv" href="https://www.hostgator.com/" rel="noopener ugc nofollow" target="_blank">主持人</a></li><li id="e1b7" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated"><a class="ae kv" href="https://www.namecheap.com/" rel="noopener ugc nofollow" target="_blank">名字便宜</a></li></ul><p id="f2ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你有了自己的域名，你就可以设置亚马逊SES了。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="bd03" class="mk ly iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">设置Amazon SES</h1><p id="8f65" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">设置Amazon SES有几个步骤。</p><ol class=""><li id="9a62" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nu nm nn no bi translated">使用AWS验证您的域。</li><li id="447b" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nu nm nn no bi translated">从域注册邮件。</li><li id="6193" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nu nm nn no bi translated">验证您的发件人电子邮件。</li><li id="15dd" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nu nm nn no bi translated">从SES沙盒环境中删除您的AWS帐户。</li><li id="20b4" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nu nm nn no bi translated">创建具有SES权限的AWS IAM用户。</li></ol><h2 id="98fb" class="lx ly iq bd ml nv nw dn mp nx ny dp mt lf nz oa mv lj ob oc mx ln od oe mz of bi translated"><strong class="ak">使用AWS验证您的域名</strong></h2><p id="d04f" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">要使用SES验证您的域，请在此处打开SES控制台<a class="ae kv" href="https://console.aws.amazon.com/ses" rel="noopener ugc nofollow" target="_blank"/>。在那里，从侧面菜单导航到域，并选择“验证一个新的域。”您应该会看到类似下面的提示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/e00c90749af9bad915160de60938b6d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6l2noiQ5p3bEMSuibsQtQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Amazon SES验证新域提示</p></figure><p id="cde7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">继续键入您的完整域名——您不需要包括<code class="fe oh oi oj lt b">https://</code>。我强烈推荐生成DKIM设置。这将允许您的电子邮件得到认证，验证在传输过程中没有数据被访问和更改。验证后，可能需要几分钟时间。现在，您可以从域中添加邮件了。</p><h2 id="3d3a" class="lx ly iq bd ml nv nw dn mp nx ny dp mt lf nz oa mv lj ob oc mx ln od oe mz of bi translated"><strong class="ak">注册来自域的邮件</strong></h2><p id="5a32" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">您的邮件发件人域是在所有电子邮件中显示为发件人的地址。如果你没有指定你自己的邮件发件域，亚马逊会根据你所在的地区给你分配一个。这不是一个大问题，但是如果这个域和电子邮件是用于商业或更专业的设置，我强烈建议设置一个来自域的邮件。</p><p id="e9e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要从域中设置您的邮件，请选择您新验证的域，您将被重定向到如下页面。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/c0206f1bd1cae64af3e714cfb6b22ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8JCOIhHEmqiOlQHARN3qHA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚马逊SES域名页面</p></figure><p id="31c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择“从域设置邮件”，您应该会看到以下提示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/58733f655fc11c0e18dd041275b26951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0dWIlr-Yth76OKIjGEP6g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚马逊SES从域提示设置邮件</p></figure><p id="ddb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的邮件发件人域名可以是您喜欢的任何子域。我主要用<code class="fe oh oi oj lt b">mail.&lt;your-domain&gt;</code>或者<code class="fe oh oi oj lt b">email.&lt;your-domain&gt;</code>，不过也可能是你喜欢的随便。</p><p id="a928" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于“如果没有找到MX记录的行为”，我建议使用您所在地区的默认亚马逊地址，但您也可以选择拒绝该电子邮件。</p><p id="33dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你从域设置了你的邮件，你会被提示MX记录必须被添加到托管DNS服务器的网站。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/768c310e05d1b9091ef4efc26655096c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KyYEt09cq9zxPQM7e2xq0Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自域的邮件的Amazon SES MX记录集</p></figure><p id="f994" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您使用Amazon Route 53来托管您的站点，这些记录可以使用显示的按钮自动添加。如果你在另一个服务上托管你的网站，这个<a class="ae kv" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/mail-from.html" rel="noopener ugc nofollow" target="_blank">亚马逊指南</a>提供了一个表格，上面有如何为各种服务添加这些记录的链接。</p><h2 id="adf3" class="lx ly iq bd ml nv nw dn mp nx ny dp mt lf nz oa mv lj ob oc mx ln od oe mz of bi translated"><strong class="ak">验证发件人邮件</strong></h2><p id="6788" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">为了从某个地址发送电子邮件，您需要验证您拥有该电子邮件地址。为此，请访问SES电子邮件地址页面<a class="ae kv" href="https://console.aws.amazon.com/ses/home#verified-senders-email:" rel="noopener ugc nofollow" target="_blank">此处</a>。单击“验证新的电子邮件地址”，您应该会看到如下提示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/1be30133032904c4b7f3fb546bb7c168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*I0dk-V94TuQSbk0FV8lgdQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Amazon SES验证新的电子邮件地址提示</p></figure><p id="353a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只需输入您希望验证的电子邮件地址。您将在该电子邮件地址收到一封电子邮件，其中包含验证您地址的链接。点击链接，一切就绪。</p><h2 id="7f36" class="lx ly iq bd ml nv nw dn mp nx ny dp mt lf nz oa mv lj ob oc mx ln od oe mz of bi translated"><strong class="ak">从SES沙盒环境中删除您的AWS帐户</strong></h2><p id="784e" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">现在，您的域已验证，您的“发件人”域已设置，并且您的发件人电子邮件已验证，您可以发送电子邮件了。但在你可以向任何你喜欢的地址发送电子邮件之前，你需要离开SES沙盒环境。</p><p id="7b23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了走出SES沙箱，您需要创建一个支持案例。这可以在<a class="ae kv" href="https://console.aws.amazon.com/support/home#/case/create." rel="noopener ugc nofollow" target="_blank">这里</a>完成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/a1f6fcad82ba9edbecf46192b5ccfee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZtbejOhIkHP0Sg1kA4BzA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚马逊SES服务限制增加</p></figure><p id="a195" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择“服务限额增加”案例，并将限额类型设置为“SES发送限额”填写剩余的字段，并提交您的请求。</p><p id="2d42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于有关发送报价和发送率的问题，请为每项设置您想要的金额；然而，亚马逊通常默认发送报价最低为50，000，发送速率为14封邮件/秒。您应该会在一两天内收到一封电子邮件，通知您您的发送限额。</p><h2 id="0063" class="lx ly iq bd ml nv nw dn mp nx ny dp mt lf nz oa mv lj ob oc mx ln od oe mz of bi translated"><strong class="ak">创建具有SES权限的AWS IAM用户</strong></h2><p id="4363" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">设置Amazon SES的最后一步是创建一个具有SES权限的IAM用户。这将允许您更好地控制您的帐户的安全性，并允许您访问AWS SDK。</p><p id="6898" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">导航到IAM服务下的<a class="ae kv" href="https://console.aws.amazon.com/iam/home#/users" rel="noopener ugc nofollow" target="_blank">用户页面</a>，添加一个新用户:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/252c70ce5d0dc7ad8c046613eaca3914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CfFQl0SQ4B2NezvfTr8rSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Amazon IAM添加用户页面</p></figure><p id="1e29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">设置您喜欢的任何用户名，并将访问类型设置为“编程访问”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/ef3c3cc8f71b6e7476432dde2757a2d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZqMzqM7wNS7H90PIcJyqQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Amazon IAM设置权限页面</p></figure><p id="eda2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过附加现有的Amazon策略来设置用户权限。搜索SES策略，并选择“AmazonSESFullAccess”如果你愿意，你可以遵守这个政策，只允许某些行为。</p><p id="e99c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以跳过添加标签，因为它们不是必需的，但是如果您愿意，您当然可以添加它们。填写所有内容后，您可以创建具有SES权限的用户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/82fe96387bec7f06dcfb93c482810566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iECp4HMpnJa7OTTQdy6qw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚马逊IAM用户创建的页面</p></figure><p id="a509" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将看到新用户访问Amazon SDK的凭证。请务必保存这些，因为一旦离开此页面，您将无法再次看到它们。</p><p id="a606" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Amazon SES现在已经完全设置好了，您可以开始研究一些代码了。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="525e" class="mk ly iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">将Amazon SES集成到Node.js中</h1><p id="b928" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">设置好Amazon SES后，剩下要做的就是使用AWS SDK和SES IAM用户以编程方式发送电子邮件。</p><p id="bdf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要开始，安装官方的AWS SDK npm包，<code class="fe oh oi oj lt b">npm i aws-sdk</code>。</p><p id="6e4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将介绍两种发送邮件的方法:一种是简单的文本邮件，另一种是模板邮件。</p><p id="080c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我已经将代码贴在下面，并将一步一步地讲解。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚马逊AWS SDK SES使用Node.js</p></figure><p id="c60a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们导入AWS SDK npm包。然后，我们设置配置以访问我们之前设置的SES配置文件。</p><p id="ba3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里的关键字段是<code class="fe oh oi oj lt b">accessKeyID</code>和<code class="fe oh oi oj lt b">secretAccessKey</code>。为您之前创建的SES IAM用户输入这些信息。地区是您的AWS帐户所在地区的亚马逊代码。您可以在这里找到每个地区<a class="ae kv" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html" rel="noopener ugc nofollow" target="_blank">的代码列表。接下来，我们使用配置文件创建SES对象。</a></p><p id="1f97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了SES对象，我们就可以发送电子邮件了。我将首先检查简单的文本电子邮件。</p><p id="3854" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe oh oi oj lt b">sendEmail</code>方法使用基本方法在ses中发送电子邮件。这种方法可以在正文中包含HTML格式的文本和组件，因此可以随意创建带有图像和所有内容的格式精美的电子邮件。</p><p id="65e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，如果你想要更复杂的电子邮件，你会重复使用，这可能是更方便的使用第二种方法，模板电子邮件。模板电子邮件将您的电子邮件模板保存到您的SES个人资料中，以便您可以轻松地反复使用它们。首先，您需要创建一个模板。为此，创建一个文本文件，并输入以下JSON。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Amazon SES电子邮件模板JSON文件</p></figure><p id="c20b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是SES电子邮件模板的基本格式。你可以根据自己的需要让它们变得复杂或简单。</p><p id="c640" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">保存好模板JSON后，打开命令提示符，执行下面的AWS CLI命令:<code class="fe oh oi oj lt b">aws ses create-template --cli-input-json file://emailTemplate.json</code>。</p><p id="da60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你的系统上没有安装AWS CLI，你可以按照这个<a class="ae kv" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html" rel="noopener ugc nofollow" target="_blank">亚马逊指南</a>来做。配置AWS CLI时，请确保使用SES IAM用户凭据。</p><p id="aafa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行后，您应该会在您的SES档案中看到您的新模板<a class="ae kv" href="https://console.aws.amazon.com/ses/home#email-templates-list:" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/8022c19516535319b51e6bb600fceff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tiKIJw0FFWKyt7KS1gwwtA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚马逊SES电子邮件模板页面</p></figure><p id="0fc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦创建了模板，您就可以通过SES <code class="fe oh oi oj lt b">sendTemplatedEmail</code>方法自由使用它。在这种方法中，需要注意的重要字段是<code class="fe oh oi oj lt b">TemplateData</code>。确保在模板中包含所有需要的变量。</p><p id="a0b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">AWS SDK可以调用所有方法作为承诺，这对于Node.js来说非常好。这些方法可以直接放在一个路由或一个单独的电子邮件控制器中，就像我在本教程中所做的那样。</p><p id="31dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获得更多关于特定SES方法的信息或查看AWS SDK中所有其他很酷的功能，请务必查看亚马逊文档<a class="ae kv" href="https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/SES.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="06da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇教程对你有所帮助。</p></div></div>    
</body>
</html>