<html>
<head>
<title>Why Every Git Commit Message Must Include Its Commit Context</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么每个Git提交消息都必须包含它的提交上下文</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-every-git-commit-message-must-include-its-commit-context-1171c0b2f710?source=collection_archive---------5-----------------------#2020-11-02">https://betterprogramming.pub/why-every-git-commit-message-must-include-its-commit-context-1171c0b2f710?source=collection_archive---------5-----------------------#2020-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eb5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高Git提交日志的清晰度和可搜索性的技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bf48026d905c233a7086808babc66e2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1meqOrHYSzETtBOiRzuew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是我在2017年建立的一个购物车应用程序。当时，我没有看到提交消息的重要性，因为它们只是由我完全管理的一次性项目。</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="3f7a" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">问题</h1><p id="f019" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">Git 没有为提交消息定义官方标准/开发者指南，所以提交消息格式通常取决于开发者的判断。有时，这种安排会让您的Git提交日志变得一团糟(尤其是当来自多个背景和团队的开发人员贡献相同的源代码，并且没有遵循共同的约定时)。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="8bfe" class="mz lg it mv b gy na nb l nc nd">$ git log --oneline -10</span><span id="1c45" class="mz lg it mv b gy ne nb l nc nd">xxxxxxx unit tests updated - good to go<br/>xxxxxxx New customers added<br/>xxxxxxx renew certificates - fullchain.pem &amp; privkey.pem<br/>xxxxxxx Merge branch 'xxxx' of bitbucket.org:xxxxx/xxx-xx into xxxx<br/>xxxxxxx sample response added to swagger spec<br/>xxxxxxx Syntax error corrected<br/>xxxxxxx division by 100 change added to loans<br/>xxxxxxx Updated Units<br/>xxxxxxx Updated Users<br/>xxxxxxx collateral details no account handling changed temporarily</span></pre><p id="f283" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">为了解决这个问题，大多数团队都维护了一套Git指南。本文为您的下一个项目提出了这样一个约定。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="63b2" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">最佳实践</h1><ul class=""><li id="3b1c" class="nk nl it lz b ma mb md me mg nm mk nn mo no ms np nq nr ns bi translated">提交总结:始终使用命令式现在时。不要大写提交消息的第一个字母。不要在你的文章结尾使用句号。</li><li id="e84e" class="nk nl it lz b ma nt md nu mg nv mk nw mo nx ms np nq nr ns bi translated">提交上下文:使用1-3个前缀来描述提交的上下文。选择关键词时要小心。建议在开始时定义一组允许的关键字。一个好的关键字必须是通用的和可重用的。</li><li id="02a7" class="nk nl it lz b ma nt md nu mg nv mk nw mo nx ms np nq nr ns bi translated">TicketID(可选):如果您使用项目管理工具(如<a class="ae mt" href="https://www.atlassian.com/software/jira" rel="noopener ugc nofollow" target="_blank"> JIRA </a>)跟踪变更日志和问题，您可以将它与Git repo集成，并开始将tickets自动链接到提交消息中。这样，您就可以将所有重要信息转移到票据中，并减少冗长的提交描述。这在企业软件团队中是非常常见的做法。</li><li id="18a8" class="nk nl it lz b ma nt md nu mg nv mk nw mo nx ms np nq nr ns bi translated">提交描述(可选):在开源和其他关键项目中，团队更喜欢使用Git作为真实的单一来源，并维护详细的提交日志。对于它们，可以添加额外的解释作为提交消息描述(例如，参见<a class="ae mt" href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#commit" rel="noopener ugc nofollow" target="_blank">角度提交指南</a>)。如果您以前没有使用过提交描述，请注意有两种方法可以添加它们——通过CLI ( <code class="fe ny nz oa mv b">git commit -m "commit summary" -m "description..."</code>)或通过<a class="ae mt" href="https://git-scm.com/downloads/guis" rel="noopener ugc nofollow" target="_blank"> GUI客户端</a>(这是最简单、最干净的方法)。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/98d679ca0abc65cfdc1e513e13ecd647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CaKf5pS7oFsBpzCI3xGqGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这就是我今天写提交消息的方式。在这个例子中，我将提交上下文与提交摘要一起使用。这种方法为Git提交日志提供了清晰性和可搜索性，任何人都可以很容易地理解每次提交的影响——甚至在将来。我的队友也采用了这种方法。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/a5d4919b9a4c0cb720887b6203c1f615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JqVs6_-OixnwWKg_tinLOA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是来自<a class="ae mt" href="https://github.com/angular/angular/commits/master" rel="noopener ugc nofollow" target="_blank">角度存储库</a>的最新提交历史。看看他们如何很好地使用提交描述、提交范围、提交摘要和自动链接的票据id。</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="2c37" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">通用模板</h1><h2 id="8468" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated">案例#1 —提交但没有描述</h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="3620" class="mz lg it mv b gy na nb l nc nd">[module|type][function|scope] commit summary #<a class="ae mt" href="#" rel="noopener ugc nofollow">ticketID</a></span><span id="7d93" class="mz lg it mv b gy ne nb l nc nd">e.g.<br/>[api][users] add GET &amp; POST endpoints<br/>[test][users] update unit &amp; REST-based tests<br/>[scripts] add env flag to specify deployment environment <br/>[libs] migrate to node@12.14.1 <br/>[ci] release v2.1.34 for QA #<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-208</a></span></pre><ul class=""><li id="7ae2" class="nk nl it lz b ma nf md ng mg oo mk op mo oq ms np nq nr ns bi translated">如果您的团队/组织要求您将每个提交与一个票证ID绑定，您可以考虑在提交消息的开头提到它。</li></ul><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="5342" class="mz lg it mv b gy na nb l nc nd">#<a class="ae mt" href="#" rel="noopener ugc nofollow">ticketID</a> [module|type][function|scope] commit summary</span><span id="ca51" class="mz lg it mv b gy ne nb l nc nd">e.g.<br/>#<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-202</a> [api][users] add GET &amp; POST endpoints<br/>#<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-202</a> [test][users] update unit &amp; REST-based tests <br/>#<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-201</a> [scripts] add env flag to specify deployment environment <br/>#<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-205</a> [libs] migrate to node@12.14.1 <br/>#<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-208</a> [ci] release v2.1.34 for QA</span></pre><h2 id="f75a" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated">案例#2 —提交描述</h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="a905" class="mz lg it mv b gy na nb l nc nd">[module|type][function|scope] Commit Message Subject #<a class="ae mt" href="#" rel="noopener ugc nofollow">ticketID</a></span><span id="7cd1" class="mz lg it mv b gy ne nb l nc nd">Commit Message Body</span><span id="1bf4" class="mz lg it mv b gy ne nb l nc nd">Commit Message Footer</span></pre></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="daa9" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">示例场景</h1><h2 id="1189" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated"><strong class="ak">微服务/单报告</strong></h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="e7a7" class="mz lg it mv b gy na nb l nc nd">[service][module|type][function|scope] commit summary</span><span id="231c" class="mz lg it mv b gy ne nb l nc nd">e.g.<br/>[auth][ldap] log incoming requests with source IP<br/>[apigw][connectors] add reconnect logic<br/>[gui][certs] renew self-signed certificates</span></pre><h2 id="8dc2" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated"><strong class="ak"> Monolith/MVC回购</strong></h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="f8e6" class="mz lg it mv b gy na nb l nc nd">[module|type][function|scope] commit summary</span><span id="3492" class="mz lg it mv b gy ne nb l nc nd">e.g.<br/>[models][users] add user entity<br/>[handlers] log all incoming requests <br/>[routes] setup http routes with custom configs</span></pre><h2 id="90af" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated"><strong class="ak"> DevOps回购</strong></h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="263c" class="mz lg it mv b gy na nb l nc nd">[tool|type][script|scope] commit summary (#ticketID)</span><span id="3ef3" class="mz lg it mv b gy ne nb l nc nd">e.g.<br/>[k8s][specs] add podAntiAffinity for all StatefulSets<br/>[tf][aws] parameterize the AWS env alias for resources</span></pre></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="1e24" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">利益</h1><h2 id="1a34" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated">1.基于上下文的可搜索性</h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="1f2a" class="mz lg it mv b gy na nb l nc nd">e.g. (a) Search for latest changes affecting to Users entity</span><span id="9d2b" class="mz lg it mv b gy ne nb l nc nd">$ git log --oneline -5 --grep="\[users\]"</span><span id="2427" class="mz lg it mv b gy ne nb l nc nd">xxxxxxx [test][users] add new unit tests for managers &amp; customers<br/>xxxxxxx [seed_data][users] add customers data<br/>xxxxxxx [rest_api][users] add getAllUsers endpoint to api spec<br/>xxxxxxx [seed_data][users] add managers data<br/>xxxxxxx [seed_data][users] add internal staff data</span><span id="c678" class="mz lg it mv b gy ne nb l nc nd">-------------------------------------------------------------</span><span id="2533" class="mz lg it mv b gy ne nb l nc nd">e.g. (b) Track dependency/library version updates </span><span id="2190" class="mz lg it mv b gy ne nb l nc nd">$ git log --oneline -5 --grep="\[libs\]"</span><span id="b165" class="mz lg it mv b gy ne nb l nc nd">xxxxxxx [libs] migrate to node@12.14.1 #<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-305</a><br/>xxxxxxx [libs] link solution paths with auth-core@0.3.19 #<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-272</a><br/>xxxxxxx [libs] add typescript@3.1.2 as devDependency #<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-246</a></span></pre><h2 id="6650" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated">2.便于理解每个提交的影响</h2><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="31de" class="mz lg it mv b gy na nb l nc nd">[ci] release v2.4.30 #<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-218</a><br/>[apigw][config] enable https and wss<br/>[apigw][test] complete tests for incoming request validations<br/>[apigw][auth] integrate auth header check<br/>[apigw][handlers] add reconnect and throttling logic #<a class="ae mt" href="#" rel="noopener ugc nofollow">GT-182</a><br/>[auth][ldap] implement ldap support</span></pre></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="a0b7" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">结论</h1><p id="41e5" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">Git commit消息不是火箭科学，但是看到人们不理解这个奇妙特性的目的是很悲哀的。如果你坚持写有意义的提交消息，它将为每个人节省时间。</p><p id="9a47" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">请继续关注下一个编程技巧。在那之前，编码快乐！</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h2 id="8554" class="mz lg it bd lh od oe dn ll of og dp lp mg oh oi lr mk oj ok lt mo ol om lv on bi translated">关于软件开发的其他有趣的媒体文章……✍</h2><div class="or os gp gr ot ou"><a href="https://medium.com/platform-engineer/microservices-design-guide-eca0b799a7e8" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">微服务设计指南</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">大家都听说过微服务。但是你知道怎么设计一个吗？</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://medium.com/platform-engineer/understanding-jvm-architecture-22c0ddf09722" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">理解JVM架构</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">理解JVM架构和Java在幕后是如何工作的，对每个Java来说都是一项重要的学习…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pj l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://medium.com/platform-engineer/web-api-design-35df8167460" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">HTTP和Websockets:了解当今web通信技术的能力</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">决定为你的下一个web API设计选择什么</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pk l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>