<html>
<head>
<title>Are Your Pull Requests Hard To Review? 5 Tips To Make Them Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您的拉动式请求很难审核吗？让它们变得更简单的5个技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/are-your-pull-requests-hard-to-review-5-tips-to-make-them-easier-b6759b0749e8?source=collection_archive---------11-----------------------#2021-10-05">https://betterprogramming.pub/are-your-pull-requests-hard-to-review-5-tips-to-make-them-easier-b6759b0749e8?source=collection_archive---------11-----------------------#2021-10-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc4e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">帮你的同事一个忙</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7a2cafc92d5c2dc2694fbd5e7d69cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ss6nfRHhuYv_v4HlBkGbFA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Nubelson Fernandes 在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="36a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">评审是软件开发的核心过程。它是两个目的不同的人之间的一种交流形式。与任何形式的交流一样，它们总是可以改进的，评审过程也不例外。代码提议者和代码评审者都扮演着各自的角色，但是在本文中，我们将把重点放在提议者身上。</p><p id="7f36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于提出代码的开发人员来说，主要目标是通过评审者的所有检查。然后，代码将被合并到代码库中，并在(不久的)将来交付生产。理想情况下，代码提议者希望通过最少的反馈和来自评审者的一些来回来完成整个过程。</p><p id="f6ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了防止这种情况，我们作为开发人员经常强调让我们的代码变得更好。假设当我们代码的质量和可读性足够高时，产生的Pull请求(PR)将更容易审查。反过来，这应该导致更少的反馈、来回的来回以及在评审过程中花费的时间的预期结果。</p><p id="c328" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，PR的审查有多容易并不仅仅取决于它提出的代码。对于其他开发人员来说，包含非常高质量和可读代码的PR仍然很难评审。这是因为公关的质量并不等于提议代码的质量。不仅如此，PR的许多方面与代码无关，但仍然会影响PR的审查难易程度。</p><p id="88c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我作为开发人员的职业生涯中，我经历了大量的PRs，来自代码提议者和评审者两方面。作为一名代码提议者，我已经犯了无数个错误，最终很难让我的同事们审阅。但这些问题都与准则无关，而是与公关本身有关。另一方面，作为一名代码评审员，我也经历了许多同事在他们的PRs中没有做的不同的事情，这些事情极大地影响了我的评审体验。</p><p id="2c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于这种个人经验，本文将分享开发人员会犯的五个与代码无关的错误，这些错误导致他们的PRs很难被评审。利用这些信息，你自己就能避免这些错误。反过来，这将帮助您创建更容易审查的PRs，在审查过程中花费更少的时间，更快地将您的工作交付到生产中，并且总体上提高工程团队内部审查过程的质量。</p><h1 id="0c3d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.忽略上下文信息</h1><p id="2842" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">对任何公关来说，最重要的信息，甚至比代码本身还重要，是上下文信息。像PR的目的、必须更改的原因代码、当前PR解决了什么bug等信息。没有这些类型的上下文信息，其他开发人员很难甚至不可能正确地审查您的代码。这就像让你的同事验证一辆车是否正常工作，而不告诉他们这是一辆车，什么是一辆车，或者为什么这辆车是必要的，而只是给他们看这辆车。</p><p id="3d07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我经常创建一个公关，却忽略了背景信息。要么我认为公关已经不言而喻，太小，不足以保证大量的信息，这是不必要的，或者我只是懒得添加它。虽然有好几次我侥幸逃脱了，但这并没有改变我的假设是错误的，我忽视了我的评论者这一事实。</p><p id="7d84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个PR引入代码变更都有原因、目的和上下文。没有上下文信息，任何代码更改都是没有目的和不必要的。这就是为什么把他们包括在公共关系中是极其重要的。围绕代码的所有上下文信息为评审者提供了一个基础层，让他们可以查看您的代码，并将其与您试图解决的实际问题联系起来。从这个意义上来说，在你的公关中遗漏上下文信息相当于主动妨碍你的审查者。</p><h1 id="10ec" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.包括不相关的变更</h1><p id="a91b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">无论是修复一个大问题，引入一个新功能，偿还技术债务，自动化流程，还是更新文档，你的公关总是只有一个目的。当审查您的代码时，假设所有包含的代码都有助于那个单一的目标。</p><p id="260c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，代码提议者能做的最糟糕的事情就是在PR中包含与该目的无关的代码变更。这不仅会给公关增加干扰，分散评论者的注意力，还会让评论者感到困惑。从个人经验来看，我知道无论无关的变化有多大，都会发生这种情况。不管你添加的噪音有多小，最终还是噪音。</p><p id="7b8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面提到的假设下，评审者将试图将每一个代码变更与指定的目标联系起来。但是如果公关的一部分与这个目标无关，这个过程就会变得非常混乱。最终，这将导致评审者要么花费更多的时间来理解PR，因为不相关的变更而需要更多的来回，要么根本不理解PR。</p><h1 id="3b35" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.让评审者自己解决所有问题</h1><p id="0668" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">较小的PRs比较大的PRs有更少的代码，这意味着它们更容易审查。这是我们无法回避的事实。可惜不是每个PR都只能碰两个文件，改20行代码。将会有更大的PRs，要么覆盖许多不同的文件，数百到数千行代码，要么是这些的混合。自然这些就更难复习了。</p><p id="0019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是尽管更大的PRs更难审查，但这并不是说我们作为代码提议者不能使它们更容易审查。即使是最轻微的正确方向的推动，一些小的指令，或者来自代码提议者的任何评论都会产生显著的不同。不幸的是，这是经常被忽视的东西，给评论者带来了所有的后果。</p><p id="77c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为代码提议者，我们可以对我们的评审者做的最糟糕的事情之一就是给他们提供一个PR来评审，让他们自己解决所有的事情。虽然这种影响在较小的减贫战略中不太明显，但这种影响仍然存在于所有规模的减贫战略中。这不仅给代码审查者制造了一个非结构化的困难局面，而且还要求他们从头开始。他们不得不主动地在没有适当知识的情况下去理解你的工作，反复检查以找出最好的方法，从而花费更多的时间和精力。</p><h1 id="21f9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.有无意义的版本控制历史</h1><p id="299f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">版本控制历史可能是PR最有影响力的方面之一。正确维护的版本控制历史会对PR的审查难度产生重大影响。特别是在较大的PRs中，将相关的代码块分解成单独的提交可以使代码评审者的工作变得更加容易。历史越有条理，审查者就越容易理解和理解代码。</p><p id="8662" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，我经历了许多版本控制历史基本上没有意义的pr。要么它有一个大的提交，太多的提交，太小的提交，或者提交消息不够描述性。特别是当PR的生命周期超过多个反馈周期时，但是一般来说，拥有适当的版本控制历史可以产生很大的不同。</p><p id="9565" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">维护正确的版本控制历史有很多方面，并且它本身就是一项技能。要包括的因素的例子有提交的大小(不要太大，也不要太小)、提交的数量(不要太多，也不要太少)、提交消息、如何分割提交等等。做好这件事需要花费大量的时间和精力。但是当你做得好的时候，你的代码审查员会感觉到这种效果。</p><h1 id="d1b9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.每次更改时重写版本控制历史记录</h1><p id="58d2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在版本控制历史的重要性之上，还有它的稳定性。随着PR生命周期的增长，正确维护的版本控制历史对审查难度的影响也在增加。随着PR存在的时间越来越长，代码审查者不得不多次检查PR的机会变得越来越高。当多次评审时，评审者很少想要在每次评审中检查所有的代码。</p><p id="bc16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，基于自上一次评审以来增加的变更，求助于增量评审是很常见的。但是，要做到这一点，审阅者依赖于版本控制历史的稳定性。当随后检查时，有必要知道PR的哪一部分自从他们上次提交以来保持不变，哪一部分发生了变化。</p><p id="fe5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，这是我过去经常做的事情。每次我必须处理反馈或者在现有PR上添加额外的变更时，我也会方便地重写版本控制历史。要么是修改对特定提交的更改，要么是因为方便而改变分支的基础。问题是，这妨碍了版本控制历史的稳定性，并严重阻碍了我的评审人员轻松通过我的PR。</p><h1 id="4936" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法</h1><p id="da3d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">评审过程有两方，代码提议者和评审者。作为代码提议者，我们希望尽可能容易地通过评审者的所有检查标记。为了做到这一点，我们经常关注于在质量、可读性等方面改进我们提出的代码。但事实上，公关不仅仅是代码。即使代码质量非常好，PR仍然很难审查。</p><p id="94a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文涵盖了开发人员会犯的五个与代码无关的错误，这些错误导致他们的PRs变得更加难以审查。这些错误是遗漏了上下文信息，包括不相关的变更，让评审者在没有指导的情况下自己解决所有问题，拥有无意义的版本控制历史，以及在您对PR所做的每个变更上重写版本控制历史。</p><p id="d7f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一份很难审阅的公关需要更多的时间、更多的反馈和更多的来回。你可能认为它不会影响你。但是这意味着你的工作将在评审过程中拖延更长时间，并且在投入生产之前需要更多的时间。与此同时，你的同事和你都必须在这上面花费更多的时间和精力。</p><p id="598f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，遭殃的是整个工程团队。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="8dd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，可以考虑看看我在Medium和我的Twitter上的其他编程文章。</p></div></div>    
</body>
</html>