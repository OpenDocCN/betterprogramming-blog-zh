<html>
<head>
<title>SwiftUI Spring Animation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI Spring动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-spring-animation-beginner-69faf0b6eb9c?source=collection_archive---------9-----------------------#2019-10-11">https://betterprogramming.pub/swiftui-spring-animation-beginner-69faf0b6eb9c?source=collection_archive---------9-----------------------#2019-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="dc0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">苹果发布了SwiftUI，利用SwiftUI的强大功能在所有苹果平台上构建用户界面</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/a69e414c5fedf3fad281d52d1ce491c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/1*VKJDnmtn-1TvAAgK3F64aA.gif"/></div></figure><h1 id="c6f4" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">步骤1:如何创建您的SwiftUI项目</h1><p id="661c" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">在XCode中，进入文件→新建→项目→单视图应用程序→下一步→选择用户界面→ SwiftUI →下一步→选择您想要的项目位置→完成</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="3b41" class="kt ku iq bd kv kw md ky kz la me lc ld le mf lg lh li mg lk ll lm mh lo lp lq bi translated">步骤2: ContentView.swift</h1><p id="d01b" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">默认的<code class="fe mi mj mk ml b">SwiftUI(ContentView)</code> <strong class="jp ir"> </strong>文件会出现以下代码:</p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="17ab" class="mq ku iq ml b gy mr ms l mt mu"><strong class="ml ir">import</strong> SwiftUI</span><span id="d58d" class="mq ku iq ml b gy mv ms l mt mu"><strong class="ml ir">struct</strong> ContentView: View {</span><span id="172b" class="mq ku iq ml b gy mv ms l mt mu"><strong class="ml ir">var</strong> body: <strong class="ml ir">some</strong> View {<br/>    Text(”Hello World!”)<br/>  }<br/>}</span><span id="687e" class="mq ku iq ml b gy mv ms l mt mu"><strong class="ml ir">struct</strong> ContentView_Previews: PreviewProvider {</span><span id="3b83" class="mq ku iq ml b gy mv ms l mt mu"><strong class="ml ir">  static</strong> <strong class="ml ir">var</strong> previews: <strong class="ml ir">some</strong> View {<br/>     ContentView()<br/>   }<br/>}</span></pre><p id="83b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在右边，您可以看到UI的预览。</p><p id="b49a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您看不到预览，请前往调整编辑器选项并选择画布，或者按option+command+enter <strong class="jp ir"> <em class="mw">。</em> </strong>之后，确保canvas正在显示UI预览。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/225164f98e8df7fca1b3133ba1efdd58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*06iaM1PquWLmYhcpJWR47g.png"/></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="ffe3" class="kt ku iq bd kv kw md ky kz la me lc ld le mf lg lh li mg lk ll lm mh lo lp lq bi translated">步骤3:创建用户界面</h1><p id="6327" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">在<code class="fe mi mj mk ml b">ContentView</code>主体中，定义垂直堆栈，它将包含一个标记为“按我”的按钮和文本(“🛬").</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi my"><img src="../Images/20318c37a78af6fcd3cefa265d385db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*aotXl2NRw41q5pJGldM7rw.png"/></div></figure><p id="53ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">代码:</strong></p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="cf15" class="mq ku iq ml b gy mr ms l mt mu">VStack{</span><span id="ee7d" class="mq ku iq ml b gy mv ms l mt mu">   Button(“Press Me”){</span><span id="eac8" class="mq ku iq ml b gy mv ms l mt mu">   //Perform an action        when the button is clicked</span><span id="644a" class="mq ku iq ml b gy mv ms l mt mu">   }</span><span id="cb87" class="mq ku iq ml b gy mv ms l mt mu">    Text(“🛬”)</span><span id="2e46" class="mq ku iq ml b gy mv ms l mt mu">}</span></pre><p id="5e1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">按function+control+command+spaceba<strong class="jp ir">r</strong>获得表情列表，选择一个平面。</p><p id="a0bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在如果你看预览，飞机几乎看不见。让我们使用属性<code class="fe mi mj mk ml b">.font</code>、<strong class="jp ir">、</strong>来增加字体大小，我们将把<code class="fe mi mj mk ml b">.custom</code>方法作为参数传递，在这里我们将定义字体名称和字体大小。</p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="0643" class="mq ku iq ml b gy mr ms l mt mu">Text(“🛬”)</span><span id="0bf1" class="mq ku iq ml b gy mv ms l mt mu">.font(.custom(“Arial”, size: 100))</span></pre><p id="c92b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们将文本嵌入到水平堆栈中，并添加<code class="fe mi mj mk ml b">Spacer()</code>来对齐左侧的文本</p><blockquote class="mz na nb"><p id="9b37" class="jn jo mw jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated"><strong class="jp ir">面试问题:</strong>swift ui中的间隔符()是什么？</p><p id="59e9" class="jn jo mw jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated">Spacer()是一个灵活的空间，它沿包含堆栈布局的主轴扩展，或者如果它不包含在堆栈中，则沿两个轴扩展。</p></blockquote><p id="8485" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以现在我们的代码看起来会像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/89da2a77fbaa11b80d854a4c3c64711c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*pKOEKRWK4CgxMoL1iC22WA.png"/></div></figure><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="42e0" class="mq ku iq ml b gy mr ms l mt mu">HStack {</span><span id="f31b" class="mq ku iq ml b gy mv ms l mt mu">    Text(“🛬”)<br/>    .font(.custom(“Arial”,       size: 100))</span><span id="2d04" class="mq ku iq ml b gy mv ms l mt mu">     Spacer()</span><span id="ce05" class="mq ku iq ml b gy mv ms l mt mu">}</span></pre><p id="3ef9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的UI现在几乎准备好了——让我们添加动画以实现最终输出。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="6e98" class="kt ku iq bd kv kw md ky kz la me lc ld le mf lg lh li mg lk ll lm mh lo lp lq bi translated">步骤4:定义状态变量和偏移量</h1><p id="b258" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">在添加动画之前，我们必须定义一个<code class="fe mi mj mk ml b">@State</code>变量，它将负责维护动画的状态。</p><blockquote class="mz na nb"><p id="d184" class="jn jo mw jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated"><strong class="jp ir">面试问题</strong>:什么是状态变量？或者是什么状态？</p><p id="aed4" class="jn jo mw jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated"><code class="fe mi mj mk ml b"><em class="iq">@State</em></code>关键字是一个<code class="fe mi mj mk ml b"><em class="iq">@propertyWrapper</em></code>，其中<em class="iq"> </em> SwiftUI管理您声明为状态的任何属性的存储。当状态值改变时，视图使其外观无效，并重新计算<code class="fe mi mj mk ml b"><a class="ae ng" href="https://developer.apple.com/documentation/swiftui/view/3278523-body" rel="noopener ugc nofollow" target="_blank"><em class="iq">body</em></a></code></p><p id="f870" class="jn jo mw jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated"><em class="iq">更详细</em> <a class="ae ng" href="https://developer.apple.com/documentation/swiftui/state" rel="noopener ugc nofollow" target="_blank"> <em class="iq">此处</em> </a></p></blockquote><p id="0bed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们将在视图主体外定义一个<code class="fe mi mj mk ml b"><em class="mw">boolean State variable</em></code> <em class="mw"> </em>，并将变量命名为<code class="fe mi mj mk ml b">playAnimation</code>，并将默认值设置为false。</p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="a0df" class="mq ku iq ml b gy mr ms l mt mu">@State <strong class="ml ir">private</strong> <strong class="ml ir">var</strong> playAnimation : Bool = <strong class="ml ir">false</strong></span></pre><p id="de28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，每当变量<code class="fe mi mj mk ml b">playAnimation</code>的值发生变化时，SwiftUI就会重新加载主体。</p><p id="d353" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们定义文本的<code class="fe mi mj mk ml b">offset</code>值。如果变量<code class="fe mi mj mk ml b">playAnimation</code>的值为真，我们要把平面移到右手边<code class="fe mi mj mk ml b">(UIScreen.main.bounds.width — 120)</code>；否则，我们要将平面移动到原点或初始位置。</p><p id="feb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以使用方法<code class="fe mi mj mk ml b">.offset</code>访问文本的offset属性。因为我们想要沿着水平轴执行动画，我们将改变变量<code class="fe mi mj mk ml b">x</code>的偏移值。</p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="1ec9" class="mq ku iq ml b gy mr ms l mt mu">Text(“🛬”)<br/>.font(.custom(“Arial”, size: 100))<br/>.offset(x: <strong class="ml ir">self</strong>.playAnimation ? UIScreen.main.bounds.width — 120 : 0)</span></pre></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="5e30" class="kt ku iq bd kv kw md ky kz la me lc ld le mf lg lh li mg lk ll lm mh lo lp lq bi translated">步骤5:添加动画</h1><p id="aa35" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我们可以使用<code class="fe mi mj mk ml b">.animation</code> <em class="mw"> </em>属性给文本添加动画。作为一个参数，我们将在任何需要提供值的地方传递方法<code class="fe mi mj mk ml b">.interpolatingSpring</code> <em class="mw"> </em>，比如对象的质量、弹簧的刚度、弹簧的阻尼以及动画开始时对象的初始速度。</p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="5524" class="mq ku iq ml b gy mr ms l mt mu">Text(“🛬”)<br/>.font(.custom(“Arial”, size: 100))<br/>.offset(x: <strong class="ml ir">self</strong>.playAnimation ? UIScreen.main.bounds.width — 120 : 0)<br/>.animation(.interpolatingSpring(mass: 1.0,stiffness: 100.0,damping: 10,initialVelocity: 0))</span></pre><p id="6992" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用这些值来找出最适合您的弹簧动画的值。</p><p id="4e5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们几乎完成了我们的动画。我们只需要在用户点击按钮“按我”时切换变量<code class="fe mi mj mk ml b">playAnimation</code>的值</p><pre class="km kn ko kp gt mm ml mn mo aw mp bi"><span id="1b31" class="mq ku iq ml b gy mr ms l mt mu">Button(“Press Me”){<br/>    <strong class="ml ir">self</strong>.playAnimation.toggle()<br/>}</span></pre><p id="7c52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每当用户点击“按我”按钮，它将切换状态变量的值，这样整个身体将再次加载，它将根据状态变量值执行动画。</p><p id="7ec0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，整个代码将如下所示:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="8f72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<a class="ae ng" href="https://github.com/rathodmayur93/SwiftUISpringAnimation" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到这个项目。</p></div></div>    
</body>
</html>