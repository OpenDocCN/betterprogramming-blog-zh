<html>
<head>
<title>How to Use the React Hook Form With Ionic React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用带有离子反应成分的反应钩形式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-react-hook-form-with-ionic-react-components-eaa4426d8a2d?source=collection_archive---------1-----------------------#2020-03-13">https://betterprogramming.pub/how-to-use-react-hook-form-with-ionic-react-components-eaa4426d8a2d?source=collection_archive---------1-----------------------#2020-03-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c038" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">具有易于使用的验证的高性能、灵活且可扩展的表单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e48e3cad11fb620fc020859cbb9e4152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2pbsPGZ3rpCFFDHBgNHFBg.png"/></div></div></figure><p id="6a46" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">设置<a class="ae lq" href="https://react-hook-form.com/" rel="noopener ugc nofollow" target="_blank"> react-hook-form </a>非常简单。您可以通过导入库并用任何默认值定义和初始化定制钩子来开始。</p><p id="67f2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我不打算涵盖太多的基础知识，因为在该库的网站上提供了大量的文档:<a class="ae lq" href="https://react-hook-form.com/get-started" rel="noopener ugc nofollow" target="_blank"> <em class="lr">入门</em> </a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="5e94" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们有了提交表单时调用的<code class="fe lu lv lw lx b">onSubmit</code>函数。</p><p id="3266" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用这个函数来添加表单中的值。最后，我们还使用<code class="fe lu lv lw lx b">useState</code>在本地管理状态。我们将本地状态信息存储在变量<code class="fe lu lv lw lx b">data</code>中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="800a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们设置在应用程序中使用的表单；请注意表格中<code class="fe lu lv lw lx b">onSubmit</code>功能的使用。</p><p id="e1af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我已经排除了许多用于设置页面、页眉等的<a class="ae lq" href="https://ionicframework.com/" rel="noopener ugc nofollow" target="_blank"> Ionic </a>组件，但是它们包含在本文末尾提供的项目和示例代码中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="c92b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Ionic framework的大多数组件的基本功能都可以正常工作，跟踪错误并提供值，而没有你在React应用程序中经常看到的所有额外的<code class="fe lu lv lw lx b">useState</code>样板代码。</p><p id="dfba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，为了获得验证和错误检查的真正好处，您需要将Ionic组件包装在<code class="fe lu lv lw lx b"><a class="ae lq" href="https://react-hook-form.com/get-started#ControlledInput" rel="noopener ugc nofollow" target="_blank">Controller</a></code> <a class="ae lq" href="https://react-hook-form.com/get-started#ControlledInput" rel="noopener ugc nofollow" target="_blank">组件</a>中</p><p id="e691" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在深入研究控制包装的离子组件之前，我们将从react-hook-form的基本用法开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="5dde" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如您所见，简单的<code class="fe lu lv lw lx b">IonInput</code>是开箱即用的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="0e68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我创建了一个简单的错误处理函数来显示来自react-hook-form钩子的错误消息。该库创建一个对象作为钩子的一部分，该钩子保存验证表单时生成的错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="bfb7" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">使用React-Hook表单控件组件</h1><p id="b753" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">必须使用<code class="fe lu lv lw lx b">Controller</code>组件的一个例子是使用<code class="fe lu lv lw lx b">IonRange</code>组件。</p><p id="39a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe lu lv lw lx b">IonRange</code>组件需要使用react-hook-form <code class="fe lu lv lw lx b">controller</code>属性并监听<code class="fe lu lv lw lx b">onIonChange</code>事件以从<code class="fe lu lv lw lx b">IonRange</code>组件获得适当的值。</p><p id="453d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用<code class="fe lu lv lw lx b">selected.detail.value</code>属性从<code class="fe lu lv lw lx b">IonRange</code>组件获取值，并适当地设置对象。我们让react-hook-form钩子从那里处理它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="f8de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，为了从库和Ionic framework的web组件中获得真正的价值，我建议您把所有东西都包装起来。</p><p id="0556" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我根据需要挑选要包装的特定组件，当我检查表单的状态以查看表单是否有效时，我就完全投入了。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="659b" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">将所有内容包装在控件中</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/94963e92ec8094ed33f990ec28954eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6aB6Wjmk7UiZppP7vs6SA.png"/></div></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="5182" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于像<code class="fe lu lv lw lx b">IonRadioGroup</code>这样更复杂的控件，我们不能像上面那样包装组件名，因为这里有子组件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="7ba2" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">错误检查和表单验证</h1><p id="7f09" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">为了验证表单的内容，您可以访问<code class="fe lu lv lw lx b">formState</code>对象来确定表单是否有效。您可以使用它来保持提交按钮被禁用。</p><pre class="kj kk kl km gt nd lx ne nf aw ng bi"><span id="ee8c" class="nh mg it lx b gy ni nj l nk nl">&lt;IonButton type="submit" disabled={formState.isValid === false}&gt;<br/>  submit<br/>&lt;/IonButton&gt;</span></pre><p id="3a4b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您要检查错误，您设置<code class="fe lu lv lw lx b">mode</code>用于检查错误的时间...</p><pre class="kj kk kl km gt nd lx ne nf aw ng bi"><span id="2d90" class="nh mg it lx b gy ni nj l nk nl">const { control, register, handleSubmit, errors, formState } = useForm({<br/>  defaultValues: initialValues,<br/>  mode : 'onChange' // when the values change... check for errors<br/>});</span></pre><p id="0f85" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">或者，我们可以检查字段何时模糊，更多信息可在<a class="ae lq" href="https://react-hook-form.com/get-started#Handleerrors" rel="noopener ugc nofollow" target="_blank"> react-form-hooks文档</a>中获得。</p><pre class="kj kk kl km gt nd lx ne nf aw ng bi"><span id="dc90" class="nh mg it lx b gy ni nj l nk nl">const { control, register, handleSubmit, errors, formState } = useForm({<br/>  defaultValues: initialValues,<br/>  mode : 'onBlur' // when the you blur... check for errors<br/>});</span></pre></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="8b34" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">录像</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lt l"/></div></figure><h1 id="ef97" class="mf mg it bd mh mi nn mk ml mm no mo mp jz np ka mr kc nq kd mt kf nr kg mv mw bi translated">源代码/项目</h1><ul class=""><li id="f657" class="ns nt it kw b kx mx la my ld nu lh nv ll nw lp nx ny nz oa bi translated">在<a class="ae lq" href="https://codesandbox.io/s/react-hook-form-ionic-input-components-29zur" rel="noopener ugc nofollow" target="_blank"> CodeSandbox.io </a>上的项目。</li><li id="7d75" class="ns nt it kw b kx ob la oc ld od lh oe ll of lp nx ny nz oa bi translated">项目的<a class="ae lq" href="https://gist.github.com/aaronksaunders/86251779cbefacf4c9397ea6a574809a#file-app-tsx" rel="noopener ugc nofollow" target="_blank">脚本版本的GitHub要点。</a></li></ul></div></div>    
</body>
</html>