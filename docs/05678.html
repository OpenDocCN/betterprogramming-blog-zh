<html>
<head>
<title>YAML Files and Pods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">YAML文件和豆荚</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/yaml-files-and-pods-a2625a989d15?source=collection_archive---------12-----------------------#2020-07-27">https://betterprogramming.pub/yaml-files-and-pods-a2625a989d15?source=collection_archive---------12-----------------------#2020-07-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b541" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们开始在Kubernetes中创建一个pod</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7485eddddd9ebbf796b55d9d0fd182ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GMxfxriRfRfcRtYu"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">乔纳森·法伯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="f0fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经介绍了Kubernetes的体系结构和一般概念，并为您设置了一个友好的集群，现在是时候创建一个pod了(使用YAML文件)。如前所述，pod是运行容器映像的容器组。在这些窗格中，需要一个容器映像。这些可以从Docker Hub页面获得。</p><p id="f0a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始在Kubernetes中创建一个pod。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1f96" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">YAML档案</h1><p id="4a85" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在创建pod之前，您需要理解YAML文件背后的一般思想。通常，使用JSON文件，但YAML是新的，更有效，更容易使用。</p><p id="f8d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">YAML文件的一个主要概念是键值对。本质上，一个键(如food)被分配给一个值(如pasta)。这两个值是一个键值对。他们代表着彼此！以下是一些YAML格式的键值对示例:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="2a37" class="nb ma iq mx b gy nc nd l ne nf">Fruit: Apple<br/>Vegetable: Carrot<br/>Liquid: Water<br/>City: Austin</span></pre><p id="6c57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以看到，格式是<code class="fe ng nh ni mx b">key: value</code>。需要注意的一件重要事情是键和值之间的空间。如果在<code class="fe ng nh ni mx b">:</code>后面没有空格，键值对将不会被识别。这是YAML档案的主要组成部分之一。</p><p id="716c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个组件是数组/列表。根据名称，您可以看出这个函数的主要目的是列出YAML文件的许多不同属性，无论是键值对还是字典/映射。以下是YAML格式的数组/列表示例:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="f8a3" class="nb ma iq mx b gy nc nd l ne nf">Cities:<br/>-  Austin<br/>-  Dallas<br/>-  San Francisco<br/>-  New York</span></pre><p id="bf15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基于这个例子，您可以看到有一个类别后跟一个<code class="fe ng nh ni mx b">`:`</code>。之后，用破折号创建一个列表，并写入列表值。您可能会注意到，列表中所有值的间距都是相同的。这是在YAML文件中创建数组/列表时必须记住的事情。</p><p id="7f47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，关于YAML文件，我要讨论的最后一件事是创建字典。这是数组/列表和键值对的混合。一般来说，YAML文件中字典的主要用途是存储在某些情况下有用的特定数据(例如，在创建服务、pod、部署等时)。在Kubernetes)。以下是YAML格式的词典示例:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1524" class="nb ma iq mx b gy nc nd l ne nf">Mango:<br/>  calories: 105<br/>  fat: 0.4g<br/>  carbs: 28g</span></pre><p id="8e9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，字典中的条目都在同一级别缩进。这一点很重要！谈到这件事，YAML是很挑剔的。如果字典有许多不同的元素，记得在同一层缩进它们。否则，您将得到一个错误。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5958" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">创造一个Kubernetes豆荚</h1><p id="de48" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在我们已经在Kubernetes的上下文中学习了YAML文件的基础知识，我们将创建一个pod。记得吗？这是一组运行相同映像和配置的容器。</p><p id="e303" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们将从…开始，你猜对了！一份YAML档案。这些YAML文件被称为定义文件，因为它们定义了您正在部署的服务。因为我们正在部署一个pod，所以我们将使用一个pod定义文件。</p><p id="c0a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在写文件之前，我们需要创建文件:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="5f3b" class="nb ma iq mx b gy nc nd l ne nf">vi pod-def.yaml</span></pre><p id="cd6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行此命令后，您应该会看到类似如下的窗口:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/5f25180b21e27a2ed0f251d4c5b82d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XKHHNxAgonk44-MAi8Y-jg.png"/></div></div></figure><p id="aae2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">放心吧！这一页只是告诉你，你已经准备好编辑文件，并把YAML代码。</p><p id="fa4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们将使用的YAML文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="41f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是pod定义文件。这个文件中有很多方面和组件。不要不知所措。我会解释每一个元素！</p><ul class=""><li id="c734" class="nm nn iq ky b kz la lc ld lf no lj np ln nq lr nr ns nt nu bi translated">让我们从<code class="fe ng nh ni mx b">apiVersion</code>(键值对)开始。这用于说明在创建pod时，您将在后台运行什么API服务器和版本。</li><li id="1851" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">接下来是<code class="fe ng nh ni mx b">kind</code>，它表示这是哪种定义文件。在我们的例子中，它是一个豆荚。当我们了解Kubernetes中的其他产品时，您将可以尝试其他种类的产品。</li><li id="411c" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">然后是<code class="fe ng nh ni mx b">metadata</code>，这是一个包含项目名称的字典。元数据存储的值可以在Kubernetes文档页面上更深入地查看。在我们的例子中，当创建一个Kubernetes pod时，我们将它命名为<code class="fe ng nh ni mx b">Pod</code>。</li><li id="7286" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ng nh ni mx b">spec</code>实际上是一个数组/列表。pod中有特定的规格。对于一个普通的pod定义文件，唯一需要的规范是<code class="fe ng nh ni mx b">containers</code>，它是一个列表。我们将需要指定pod中容器的配置，因此这一部分至关重要。在<code class="fe ng nh ni mx b">containers</code>列表中，我们将包含容器的名称，图像名称将在后面提供。在本例中，容器的名称是<code class="fe ng nh ni mx b">nginx</code>，我们将使用<code class="fe ng nh ni mx b">nginx:latest</code>作为pod中运行的容器的图像名称。</li><li id="6448" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">最后，有一个<code class="fe ng nh ni mx b">command</code>部分表示您将使用的特定命令。没有必要填写，但在某些情况下，命令项可能会派上用场。</li></ul><p id="0ca8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经完成了pod定义文件。现在点击Control + C，然后点击<code class="fe ng nh ni mx b">:wq! </code>保存并退出文件。</p><p id="5af5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用此命令创建基于YAML文件的窗格:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="6dd5" class="nb ma iq mx b gy nc nd l ne nf">kubectl create -f pod-def.yaml</span></pre><p id="793c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成后，使用以下命令查看pod:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="8aaa" class="nb ma iq mx b gy nc nd l ne nf">kubectl get pods</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5e84" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="97a3" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">耶！你创造了你的第一个豆荚！您已经向进入Kubernetes及其功能领域迈出了一步。我希望到目前为止你喜欢它。我们将在以后的文章中讨论更多的信息。</p><p id="c1d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解更多并做一些实验，请访问下面的Kubernetes文档页面。</p><p id="2427" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1f5f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">资源</h1><div class="oa ob gp gr oc od"><a href="https://kubernetes.io/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">Kubernetes文档页面</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Kubernetes (K8s)是一个开源系统，用于自动化部署、扩展和管理容器化的…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">kubernetes.io</p></div></div><div class="om l"><div class="on l oo op oq om or kp od"/></div></div></a></div></div></div>    
</body>
</html>