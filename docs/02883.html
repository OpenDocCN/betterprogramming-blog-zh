<html>
<head>
<title>Document Your Python Code Without Writing Documentation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">记录您的Python代码，无需编写文档</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/document-your-python-code-without-writing-documentation-2d8bf3a42e1a?source=collection_archive---------4-----------------------#2020-01-07">https://betterprogramming.pub/document-your-python-code-without-writing-documentation-2d8bf3a42e1a?source=collection_archive---------4-----------------------#2020-01-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a277" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写代码时要考虑的事情</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fd0f6c482cd3bf21657998f8c063aa8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v9puG5NEyrWBjYL0"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thepootphotographer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">🇸🇮·扬科·菲利- @specialdaddy </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e9f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在职业生涯的某些阶段，一个程序员阅读的代码可能比他/她写的还要多，所以阅读糟糕的文档化代码一定会令人沮丧。</p><p id="f6b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个程序员在使用库或另一个程序员的代码时也会阅读大量的文档。</p><p id="3635" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你总是有时间记录你的代码吗？当然不是，但是长时间地负债编码并不是一个好主意。</p><p id="c884" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那你是做什么的？跳过它，祈祷没人读过你的代码？嗯，当你写代码的时候，有些事情你可以考虑。</p><p id="3454" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，有几种方法可以正确地记录代码，但是让我们把重点放在没有这些资源时可以做的事情上</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7a4f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.变量</h1><p id="95eb" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">没有理由使用像<code class="fe na nb nc nd b">s</code>和<code class="fe na nb nc nd b">l</code>这样的变量名，除非你全力以赴去破坏每个人的生活。保持简短和描述性的名字是至关重要的。当你回到你的代码或者另一个程序员正在阅读你的代码时，你希望限制认知负荷。</p><p id="a6c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不得不不断地重读你的代码来弄清楚发生了什么，这将是令人疲惫的。</p><p id="d21b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以给你的变量起个合适的名字，但是不要太多。上下文通常会帮助你。好的变量名本身就是文档。</p><p id="5d3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看一些例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">糟糕的变量名</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/4c67b058bb63d01cb4587021de6529a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ek4OVZo2fseVC8at7TxCeg.png"/></div></figure><p id="fe31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧…那么这是怎么回事？我们有一串看起来像是某种东西的代码？然后有一本字典叫<code class="fe na nb nc nd b">gl</code>(“好运？”)用更多的代码和随机字符串？有的是一个字母，还有什么是<code class="fe na nb nc nd b">pass</code>？<code class="fe na nb nc nd b">pass</code>以后会传承什么吗？</p><p id="6be1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来我们打印<code class="fe na nb nc nd b">n</code>，然后是键和值？看起来是这样。很酷的代码，兄弟。</p><p id="de6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能是一个更好、更易读的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更好的变量名</p></figure><p id="8a2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个变化没费多大力气。写的时候多花了几秒钟的时间，当我们试图弄清楚代码在一个月内做了什么(或者对于用你的代码做其他事情的人来说)的时候，我们又多花了几秒钟。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="115c" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">2.本应是变量的数据</h1><p id="5236" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在某些情况下，您只需编写如下内容:</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="b5d6" class="nl me it nd b gy nm nn l no np">if kid1.get_height() &gt;= 140:<br/>    return True</span></pre><p id="ac99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很好，但还可以更好。我们可以写一个关于<code class="fe na nb nc nd b">140</code>是什么的评论(见下文)。但是<code class="fe na nb nc nd b">140</code>是一个我们可以声明为变量的数字。因此，我们可以a)清楚地说明为什么使用它，b)确保它易于更新。</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="4dea" class="nl me it nd b gy nm nn l no np"># minimum height for the ride:<br/>min_height = 140</span><span id="b096" class="nl me it nd b gy nq nn l no np">if kid1.get_height() &gt;= min_height:<br/>    return True</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/5f68e4dd4cf35b704456aac7d9992a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3p9_47KWVB1tK2Kj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·斯鲁普斯基在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="f604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能觉得这是不必要的，但是我们使用这个最小高度而没有声明它为变量的地方越多，它就越混乱，越难更新。阅读这段代码并理解它应该做什么也很容易。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b1fb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">3.注释和文档字符串</h1><p id="897b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是大多数程序员已经熟悉的。在Python中，你可以使用散列符号来单行注释(<em class="lv">块注释</em>)出代码，如下所示:</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="5b69" class="nl me it nd b gy nm nn l no np"># this is a commment</span></pre><p id="b196" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在线评论:</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="cd8a" class="nl me it nd b gy nm nn l no np">last_square = board[-1]-10  # make sure last square is inside board</span></pre><p id="d484" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者像这样的多行注释(<em class="lv">文档字符串</em>):</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="f210" class="nl me it nd b gy nm nn l no np">""" This is a multi line commment:<br/>oh, forgot to <br/>add <br/>more<br/>lines...</span><span id="57ef" class="nl me it nd b gy nq nn l no np">"""</span></pre><p id="77c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据Python文档，使用注释时有一些特定的规则:</p><blockquote class="ns nt nu"><p id="d454" class="kz la lv lb b lc ld ju le lf lg jx lh nv lj lk ll nw ln lo lp nx lr ls lt lu im bi translated">块注释通常适用于其后的部分(或全部)代码，并且缩进到与该代码相同的级别。块注释的每一行都以#和一个空格开始(除非它是注释内的缩进文本)。”</p></blockquote><p id="0b97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">—</p><blockquote class="ns nt nu"><p id="6e28" class="kz la lv lb b lc ld ju le lf lg jx lh nv lj lk ll nw ln lo lp nx lr ls lt lu im bi translated">"为所有公共模块、函数、类和方法编写docstrings。对于非公共方法，Docstrings不是必需的，但是应该有一个注释来描述该方法的作用。此注释应出现在def行之后。</p></blockquote><p id="6cce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">—</p><blockquote class="ns nt nu"><p id="7c53" class="kz la lv lb b lc ld ju le lf lg jx lh nv lj lk ll nw ln lo lp nx lr ls lt lu im bi translated"><a class="ae ky" href="https://www.python.org/dev/peps/pep-0257" rel="noopener ugc nofollow" target="_blank"> "PEP 257 </a>描述了良好的docstring约定。请注意，最重要的是，结束多行docstring的""，应该单独在一行上。"</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/25ef7a465aba54a5414962dff8a049fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2FhhZZeZ4fW7vBCqOLdj7w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">像老板一样阅读Python文档。照片由<a class="ae ky" href="https://www.pexels.com/@thatguycraig000?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Craig Adderley </a>从<a class="ae ky" href="https://www.pexels.com/photo/man-sitting-on-sofa-reading-book-1467564/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄。</p></figure><p id="f156" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些年来，我一直是“代码中不能有太多注释”的粉丝。我在VFX工作了这么长时间，被公共汽车撞的因素一直很强烈，所以我总是工作，就好像我会在回家的路上被公共汽车撞，有人会接管我的工作文件。</p><p id="2462" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近，我变得更加自由了。我现在的想法是，你应该在需要的时候发表评论，而不要夸大它。</p><p id="5118" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们修正之后，上面的学生例子并不需要太多的注释，因为变量的名字。你可能会说我们需要一个注释来解释我们为什么这样做和那样做，也许像这样的格言:</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="ae72" class="nl me it nd b gy nm nn l no np">""" student grades dictionary. New courses and grades will be added to this dict whenever new grades are in.<br/>"""</span></pre><p id="14ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可能有点太久了？</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="2f5a" class="nl me it nd b gy nm nn l no np"># dict holds current- and new grades for the student.</span></pre><p id="1e26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您还记得前面的引用，Python文档希望我们总是为所有公共模块、函数、类和方法编写docstrings。让我们用一些方法创建一个类(程序本身没那么神奇):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用公共方法的文档字符串初始化</p></figure><p id="6057" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个类<code class="fe na nb nc nd b">Student</code>有一个保存一些数据的构造函数，它还有几个处理课程、成绩和报告的方法。</p><p id="9a61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都有文档字符串来记录它们的功能。如果你曾经在一个类中使用过<code class="fe na nb nc nd b">help</code>,你应该已经很熟悉了。也许你没有考虑太多，但这就是它是如何做的。</p><p id="58b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看:</p><p id="181b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在终端中，您可以转到该类所在的目录并键入:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/4643f6f65e84925d04041fad17a73190.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zNygTP6fxJX5FQotzv8OFQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/a256c2cc32c1dcac68acf632823d0cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WIXXvpuhHZjHlnhmzhQcwA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">太棒了。认识文档字符串吗？</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a9b0" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">4.使用Dunder方法__str__打印该类的数据</h1><p id="e54d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这个并不是真正的文档，只是一个在打印类本身时能够打印预定义字符串的好方法。</p><p id="02d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过像这样添加一个<code class="fe na nb nc nd b">__str__</code>方法，你可以打印对象，它会打印你决定的任何东西:</p><pre class="kj kk kl km gt nh nd ni nj aw nk bi"><span id="3bfc" class="nl me it nd b gy nm nn l no np">def __str__(self):<br/>        return ('Name: ' + self._student_name +  '\nUser Name: ' + self._student_user)</span></pre><p id="9045" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尝试在终端中运行它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/89adac8cab184c8a5ddc7be6b3e7b0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vN47vhNuZiUgsW1jOOmSdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">当打印对象时，它会打印你放在__str__中的内容</p></figure><h1 id="37ca" class="md me it bd mf mg oc mi mj mk od mm mn jz oe ka mp kc of kd mr kf og kg mt mu bi translated">最后</h1><p id="db85" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">所以下次我从你的GitHub上下载代码的时候。我假设变量名会很棒，函数和方法是docstringed的。或许我可以打印你的课程？</p><p id="3537" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢你坚持到最后。如果您有任何意见或反馈，请告诉我。我总是渴望了解更多！</p></div></div>    
</body>
</html>