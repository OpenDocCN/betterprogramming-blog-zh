<html>
<head>
<title>Switching Between Multiple Conda Distributions on macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在macOS上的多个Conda发行版之间切换</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/switching-between-multiple-conda-distributions-on-macos-b78b6b21720?source=collection_archive---------4-----------------------#2021-11-01">https://betterprogramming.pub/switching-between-multiple-conda-distributions-on-macos-b78b6b21720?source=collection_archive---------4-----------------------#2021-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bd32" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用MiniForge的数据科学家的实际使用案例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6e0b96aa6305510ef3c6034278531632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vjvp83w12J-vCnfU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@arnav_arw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿纳夫·辛哈尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="214c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">苹果M系列芯片的问世在苹果社区引发了新的希望。从2020年第四季度的M1芯片开始，Mac开发者，尤其是数据科学家开始从第三方资源和工具(最流行的是Colab)转向M1处理器的原生GPU。</p><p id="2499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从那以后，越来越多的开发者开始将他们的工作空间转移到macOS上。macOS中用于数据科学项目的所有设置的共同点是MiniForge。</p><p id="9634" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些没有听说过MiniForge的人来说，它基本上是一个康达发行版，以其与苹果的兼容性而闻名，包括苹果M1设备。有人可能会说它与Miniconda不相上下，但与苹果合作得非常好。</p><blockquote class="lv lw lx"><p id="e5f2" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><em class="it">从</em> <a class="ae ky" href="https://medium.com/@nikoskafritsas/list/setup-apple-m1-for-deep-learning-75e74b9f7cb4" rel="noopener"> <em class="it">这里</em> </a> <em class="it">可以访问“为深度学习设置苹果M1”系列的所有文章。</em></p></blockquote><p id="aedc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管MiniForge没有被广泛采用。因此，主要的挑战是一小部分库(大多数时候不是流行的库)不能被MiniForge安装。然而，随着苹果社区接受这个conda发行版，这个分数变得越来越小。</p><p id="24c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显而易见的解决方案是同时使用MiniForge和Anaconda:例如，MiniForge可能有利用GPU的框架或工具，而Anaconda可能有不兼容的库，或者开发人员认为必要的任何东西。这种方法的问题是每次只能初始化一个conda环境。为了克服这种情况，下面是如何做到这一点:</p><blockquote class="mc"><p id="0f43" class="md me it bd mf mg mh mi mj mk ml lu dk translated"><strong class="ak">这一招对Ubuntu同样有效</strong>！</p></blockquote><p id="db7a" class="pw-post-body-paragraph kz la it lb b lc mm ju le lf mn jx lh li mo lk ll lm mp lo lp lq mq ls lt lu im bi translated">安装MiniForge后。zshrc文件如下所示:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="3564" class="mw mx it ms b gy my mz l na nb"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;<br/># !! Contents within this block are managed by 'conda init' !!<br/>__conda_setup="$('/Users/johndoe/opt/miniforge/bin/conda' 'shell.zsh' 'hook' 2&gt; /dev/null)"<br/>if [ $? -eq 0 ]; then<br/>    eval "$__conda_setup"<br/>else<br/>    if [ -f "/Users/johndoe/opt/miniforge/etc/profile.d/conda.sh" ]; then<br/>        . "/Users/johndoe/opt/miniforge/etc/profile.d/conda.sh"<br/>    else<br/>        export PATH="/Users/johndoe/opt/miniforge/bin:$PATH"<br/>    fi<br/>fi<br/>unset __conda_setup<br/># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span></pre><p id="ff56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您执行<code class="fe nc nd ne ms b">'conda env list'</code>，输出将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/8c2562ad87d25aa658d0f6163f4572b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*ArC-6ugPpzKKUBQIFCJ8lw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">MiniForge是活跃的conda发行版</p></figure><p id="44fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上图显示有两种康达分布可用:<code class="fe nc nd ne ms b">anaconda3</code>和<code class="fe nc nd ne ms b">miniforge</code>。然而，这也意味着康达将始终使用MiniForge进行初始化。因此，虽然使用<code class="fe nc nd ne ms b">'conda env list'</code>命令你可以看到所有的<code class="fe nc nd ne ms b">conda</code>环境，但是你不能激活非MiniForge环境。要切换到Anaconda，在<code class="fe nc nd ne ms b">.zshrc</code>文件中用<code class="fe nc nd ne ms b">anaconda</code>替换单词<code class="fe nc nd ne ms b">miniforge</code>。我的情况是<code class="fe nc nd ne ms b">anaconda3</code>。然后，<code class="fe nc nd ne ms b">.zshrc</code>文件应该是这样的:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="3527" class="mw mx it ms b gy my mz l na nb"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;<br/># !! Contents within this block are managed by 'conda init' !!<br/>__conda_setup="$('/Users/johndoe/opt/anaconda3/bin/conda' 'shell.zsh' 'hook' 2&gt; /dev/null)"<br/>if [ $? -eq 0 ]; then<br/>    eval "$__conda_setup"<br/>else<br/>    if [ -f "/Users/johndoe/opt/anaconda3/etc/profile.d/conda.sh" ]; then<br/>        . "/Users/johndoe/opt/anaconda3/etc/profile.d/conda.sh"<br/>    else<br/>        export PATH="/Users/johndoe/opt/anaconda3/bin:$PATH"<br/>    fi<br/>fi<br/>unset __conda_setup<br/># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span></pre><p id="617b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，你必须执行<code class="fe nc nd ne ms b">'source zshrc'</code>。如果操作正确，当您检查conda环境时，您会看到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/d290896de3bbd2b8b19c5f9c4b66274d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*5MXDsk4mWFv5jUuqMC9hZg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Anaconda3是活跃的conda发行版</p></figure><p id="e2bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要自动做到这一点，您可以使用脚本。姑且称之为<code class="fe nc nd ne ms b">'changeconda.sh'</code>:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="3330" class="mw mx it ms b gy my mz l na nb">#!/bin/bash</span><span id="fa52" class="mw mx it ms b gy ng mz l na nb"># Take the search string<br/>read -p "Enter the search string: " search</span><span id="e843" class="mw mx it ms b gy ng mz l na nb"># Take the replace string<br/>read -p "Enter the replace string: " replace</span><span id="8b1c" class="mw mx it ms b gy ng mz l na nb">if [[ $search != "" &amp;&amp; $replace != "" ]]; then<br/>sed -i '' "s/$search/$replace/gi" $1<br/>fi</span></pre><p id="706d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过执行以下命令来运行脚本:</p><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="057e" class="mw mx it ms b gy my mz l na nb">bash changeconda.sh .zshrc<br/>source .zshrc</span></pre><p id="fd91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！</p><h2 id="3931" class="mw mx it bd nh ni nj dn nk nl nm dp nn li no np nq lm nr ns nt lq nu nv nw nx bi translated"><strong class="ak">注意事项</strong></h2><ol class=""><li id="3d78" class="ny nz it lb b lc oa lf ob li oc lm od lq oe lu of og oh oi bi translated">某些macOS版本可能会使用bash而不是zsh。在这种情况下，执行:</li></ol><pre class="kj kk kl km gt mr ms mt mu aw mv bi"><span id="d225" class="mw mx it ms b gy my mz l na nb">bash changeconda.sh .bash_profile<br/>source .bash_profile</span></pre><p id="c9a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.这一招对Ubuntu同样有效！由于Ubuntu附带的是GNU <code class="fe nc nd ne ms b">sed</code>而不是BSD <code class="fe nc nd ne ms b">sed</code>，要在Ubuntu上使用这个脚本，只需删除<code class="fe nc nd ne ms b">sed -i</code>命令后的单引号<code class="fe nc nd ne ms b">''</code>。</p><p id="fa46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.完成更改后，不要忘记打开一个新的终端会话！如果您在执行脚本的同一个终端中测试命令<code class="fe nc nd ne ms b">'conda env list'</code>，更改将不会发生，先前的conda发行版仍将处于活动状态。</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="4c26" class="oq mx it bd nh or os ot nk ou ov ow nn jz ox ka nq kc oy kd nt kf oz kg nw pa bi translated">结束语</h1><p id="320d" class="pw-post-body-paragraph kz la it lb b lc oa ju le lf ob jx lh li pb lk ll lm pc lo lp lq pd ls lt lu im bi translated">毫无疑问，在过去的一年里，MiniForge获得了发展，这主要归功于开源社区的巨大帮助。即使使用单独的conda发行版是互补的，但这并不意味着MiniForge缺乏通用性。</p><p id="fdc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，许多流行的框架已经开始与MiniForge兼容。例如，查看本指南，其中深入描述了如何在Apple M系列电脑上安装Tensorflow:</p><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/installing-tensorflow-on-apple-m1-with-new-metal-plugin-6d3cb9cb00ca"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">用新的金属插件在苹果M1上安装Tensorflow</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">如何在Mac M1上启用GPU加速并实现顺利安装</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">better编程. pub</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv ks ph"/></div></div></a></div></div></div>    
</body>
</html>