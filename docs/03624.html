<html>
<head>
<title>Classes With Private Properties in TypeScript 3.8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript 3.8中具有私有属性的类</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/classes-with-private-properties-in-typescript-3-8-9fdb91c26ab1?source=collection_archive---------4-----------------------#2020-02-23">https://betterprogramming.pub/classes-with-private-properties-in-typescript-3-8-9fdb91c26ab1?source=collection_archive---------4-----------------------#2020-02-23</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7b18" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">最后，TypeScript/JavaScript类中的隐私</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/b6e524d8ff9d9cccdadda9e2fe9326fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bmoWRyvZ_5bMlJpIWEA1VQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">塞尔吉奥·索萨在<a class="ae kz" href="https://unsplash.com/s/photos/container-rotterdam?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="52d9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我感觉这并没有引起很多JavaScript开发者的注意，但是有一段时间，我们有可能在我们的JavaScript类中使用私有属性(查看下面的<em class="lw">支持</em>部分)。</p><p id="3938" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这篇文章中，我想告诉你私有属性在类中是多么有用。由于即将到来的浏览器和工具支持，我们今天就可以开始使用它。</p><p id="04d5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">旁注:私有属性和方法是ECMAScript规范第三阶段提案的一部分，所以这在未来可能会改变。很可能会加入ES2019 (ES10)。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="15ed" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">ES2015之前的类，模块模式</h1><p id="2d8c" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">让我们回到JavaScript的ES5时代。</p><p id="0b32" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们没有任何正式的模块定义。我们聪明地使用了函数(我们也使用了<a class="ae kz" href="https://requirejs.org/" rel="noopener ugc nofollow" target="_blank"> RequireJS </a>、<a class="ae kz" href="https://requirejs.org/docs/commonjs.html" rel="noopener ugc nofollow" target="_blank"> CommonJS </a>和其他替代方法)。这给了我们创建某种形式的模块的能力。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div></figure><p id="d13a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想使用这个模块，你必须这样使用它。</p><pre class="kk kl km kn gu nd ne nf ng aw nh bi"><span id="39f8" class="ni mf iu ne b gz nj nk l nl nm">Ford.brand() // “Ford Mustang”</span></pre><p id="a86a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我们可以利用私有属性和方法。要使它成为公共的，你必须返回你想在模块外使用的所有东西。</p><p id="660c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">许多开发人员已经习惯了这种类型的模块中默认的私有属性和方法。查看Todd Motto的帖子，了解关于<a class="ae kz" href="https://ultimatecourses.com/blog/mastering-the-module-pattern" rel="noopener ugc nofollow" target="_blank">模块模式</a>的更多信息。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="f4a6" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">ES2015课程</h1><p id="9169" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">ES2015 (ES6)的推出为我们带来了JavaScript语言的大规模升级。我对这次升级非常满意，就像我的JavaScript开发伙伴一样。</p><pre class="kk kl km kn gu nd ne nf ng aw nh bi"><span id="c2cd" class="ni mf iu ne b gz nj nk l nl nm">class Foo {<br/>  bar = 10<br/>}</span><span id="8086" class="ni mf iu ne b gz nn nk l nl nm">console.log(new Foo().bar) // 10</span></pre><p id="55f8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">JavaScript类的行为大多类似于其他语言中的类。它们非常适合以各种方式重用功能。</p><p id="cd34" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">比起模块模式，我更喜欢它们，但是我想念我的私有属性…</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="d7fa" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">使用具有私有属性的TypeScript类</h1><p id="9efb" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">但是我们不用再难过了。私有属性要来TypeScript类了！要在TypeScript中使用它们，你必须安装3.8版本，这是2月20日发布的版本。</p><pre class="kk kl km kn gu nd ne nf ng aw nh bi"><span id="f184" class="ni mf iu ne b gz nj nk l nl nm">npm install typescript</span></pre><blockquote class="no np nq"><p id="45e6" class="la lb lw lc b ld le jv lf lg lh jy li nr lk ll lm ns lo lp lq nt ls lt lu lv in bi translated">最后，需要考虑的是您打算让代码在哪里运行。除非针对ECMAScript 2015 (ES6)或更高版本，否则TypeScript当前不支持此功能。</p><p id="9b8b" class="la lb lw lc b ld le jv lf lg lh jy li nr lk ll lm ns lo lp lq nt ls lt lu lv in bi translated">这是因为我们的底层实现使用<code class="fe nu nv nw ne b"><em class="iu">WeakMaps</em></code>来加强隐私，并且<code class="fe nu nv nw ne b">WeakMaps</code>不能以不导致内存泄漏的方式被聚合填充。</p><p id="16a5" class="la lb lw lc b ld le jv lf lg lh jy li nr lk ll lm ns lo lp lq nt ls lt lu lv in bi translated">相比之下，TypeScript的<code class="fe nu nv nw ne b">private</code>声明的属性适用于所有目标——甚至ECMAScript 3！”——<a class="ae kz" href="https://devblogs.microsoft.com/typescript/announcing-typescript-3-8-beta/" rel="noopener ugc nofollow" target="_blank">微软开发博客</a></p></blockquote></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="5058" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">如何创建私有类属性</h1><p id="3041" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">只需在它们前面加上一个<code class="fe nu nv nw ne b">#</code>。就这么简单！</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nb nc l"/></div></figure><p id="e000" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当您试图从私有属性获取信息时，它会在TypeScript中给出一个错误。</p><pre class="kk kl km kn gu nd ne nf ng aw nh bi"><span id="41e0" class="ni mf iu ne b gz nj nk l nl nm">Property ‘#foo’ is not accessible outside class ‘Foo’ because it has a private identifier.</span></pre><p id="de6f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我们可以通过公共方法返回它来使它可用。就像JavaScript中的所有东西一样。</p><p id="7736" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在<a class="ae kz" href="https://www.typescriptlang.org/v2/en/play?ts=3.8.0-beta#code/MYGwhgzhAEBiD29oG8BQ0PQMQDNHQF5oAmABgG51MAjMAJ0OgEZTUqMBzAUwBcF4AFAEoU7TBjq8ArnQB20HgAsAlhAB0uRGIC+qXW2DxZEeCC5qQ8DgNlcA7nETC1tOiID075q0PHT5y2tbB35nbj4nIQ8vMlRfEzMLKxt7R0EhDTx4aOguOjp4OiA" rel="noopener ugc nofollow" target="_blank"> TypeScript playground </a>的类中使用新的私有属性。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="0086" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">为什么要设置私有类属性</h1><p id="4438" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">我使用私有属性的原因是只在本地使用信息。如果你在你的类中做各种各样的计算，但是不需要公开分享，那么就把它变成私有的。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="5dbf" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">浏览器支持</h1><p id="e7e9" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">目前支持这些私有属性的浏览器只有<strong class="lc iv"> Chrome </strong> ( &gt; 74)和<strong class="lc iv"> Opera </strong> ( &gt; 66)。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nx"><img src="../Images/d01ef4b66ce800e85baf821078ed03e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*exT34-AZJ-BTLpMYYAnbHg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来源:<a class="ae kz" href="https://caniuse.com/#feat=mdn-javascript_classes_private_class_fields" rel="noopener ugc nofollow" target="_blank">CanIUse.com</a></p></figure><p id="46fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想使用<strong class="lc iv"> Node.js </strong>中的私有属性，你必须至少使用版本12。<strong class="lc iv"> Babel </strong>通过<a class="ae kz" href="https://babeljs.io/docs/en/babel-plugin-proposal-private-methods" rel="noopener ugc nofollow" target="_blank">插件</a>支持私有属性。</p><p id="2d95" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想了解更多关于TypeScript 3.8中令人敬畏的特性，请查看微软的<a class="ae kz" href="https://devblogs.microsoft.com/typescript/announcing-typescript-3-8/" rel="noopener ugc nofollow" target="_blank">开发博客</a>。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="d7e7" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">有角的</h1><p id="fa10" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">在Angular应用程序中使用私有类属性听起来不错，但是Angular团队<a class="ae kz" href="https://github.com/angular/angular/issues/35204" rel="noopener ugc nofollow" target="_blank">并不正式支持Angular 9.0中的TypeScript 3.8 </a>。他们说我们必须等到Angular 10。</p><blockquote class="no np nq"><p id="18a7" class="la lb lw lc b ld le jv lf lg lh jy li nr lk ll lm ns lo lp lq nt ls lt lu lv in bi translated">由于<a class="ae kz" href="https://blog.angular.io/version-9-1-of-angular-now-available-typescript-3-8-faster-builds-and-more-eb292f989428" rel="noopener ugc nofollow" target="_blank">角度9.1打字稿3.8可用</a>。因此私有属性受到支持👍</p></blockquote><p id="eefd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但我用Angular 9应用程序对TypeScript 3.8做了一个小测试，看起来它仍然在运行。所以，我会说试试看。</p><p id="a589" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你在TypeScript 3.8中使用Angular 9有问题，请在评论中告诉我，这样我们就可以更新其他想要尝试的人。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="8b00" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">结论</h1><p id="ed82" class="pw-post-body-paragraph la lb iu lc b ld mw jv lf lg mx jy li lj my ll lm ln mz lp lq lr na lt lu lv in bi translated">正如您所看到的，设置私有类属性非常有用，可以给人一种隐私的感觉。但老实说，我们还处于非常早期的阶段，所以规格可能会有一些变化。</p><p id="193e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢您一路阅读！我希望你和我一样对这个特性充满热情，并从这篇文章中学到了一些新东西。</p><p id="d2ba" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你有任何问题，请在评论中告诉我。</p></div><div class="ab cl lx ly hy lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="in io ip iq ir"><h1 id="e5f0" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">从我这里读更多</h1><div class="ny nz gq gs oa ob"><a href="https://medium.com/@devbyrayray/the-number-1-skill-you-need-to-grow-as-a-person-7d1a6f34afb5" rel="noopener follow" target="_blank"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">作为一名开发人员，你成长所需要的头号技能</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">在任何事情上帮助任何人，这是双赢！</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kt ob"/></div></div></a></div><div class="ny nz gq gs oa ob"><a href="https://medium.com/better-programming/7-lessons-i-learned-while-being-a-developer-for-10-years-c0e3db2c1336" rel="noopener follow" target="_blank"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">我做了10年开发人员后学到的7条经验</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">我学到的经验教训有望为你节省时间和压力</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">medium.com</p></div></div><div class="ok l"><div class="oq l om on oo ok op kt ob"/></div></div></a></div><div class="ny nz gq gs oa ob"><a href="https://medium.com/better-programming/an-introduction-to-typescript-property-decorators-1c9db23b6ca1" rel="noopener follow" target="_blank"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">TypeScript属性装饰器简介</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">对TypeScript装饰器的深入探究</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">medium.com</p></div></div><div class="ok l"><div class="or l om on oo ok op kt ob"/></div></div></a></div><div class="ny nz gq gs oa ob"><a href="https://medium.com/better-programming/5-reasons-why-you-should-write-technical-blog-posts-as-developer-30cd349ece60" rel="noopener follow" target="_blank"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">作为开发人员，你应该写技术博客的5个理由</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">撰写技术博客文章如何在开发人员职业生涯的早期帮助你</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">medium.com</p></div></div><div class="ok l"><div class="os l om on oo ok op kt ob"/></div></div></a></div><div class="ny nz gq gs oa ob"><a href="https://medium.com/better-programming/7-steps-to-dockerize-your-angular-9-app-with-nginx-915f0f5acac" rel="noopener follow" target="_blank"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">使用Nginx对Angular 9应用程序进行分类的7个步骤</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">在Docker环境中设置Angular 9应用程序，并立即进行部署</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">medium.com</p></div></div><div class="ok l"><div class="ot l om on oo ok op kt ob"/></div></div></a></div></div></div>    
</body>
</html>