<html>
<head>
<title>How To Save an Image to Core Data With Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Swift将图像保存到核心数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-save-an-image-to-core-data-with-swift-a1105ae2cf04?source=collection_archive---------4-----------------------#2019-12-09">https://betterprogramming.pub/how-to-save-an-image-to-core-data-with-swift-a1105ae2cf04?source=collection_archive---------4-----------------------#2019-12-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1da5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">保存图像，简化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/86d92d4bb152aeebab591e4409d73c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zKjE0bIN7pzZaU_y5558Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弗兰基·查马基在<a class="ae ky" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a960" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码的目的是将用户选择的图像转换成二进制数据，并将该图像保存在核心数据中。此外，我们将获取保存的图像。</p><p id="15db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在示例iOS应用程序中实现这个特性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><blockquote class="mc md me"><p id="8879" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu"> <em class="it">如果你正在准备你的技术编码面试，或者你想学习递归来提高你解决问题的技能，那么你应该查看这个udemy课程</em> </strong> <a class="ae ky" href="https://www.udemy.com/course/master-the-recursion-from-beginner-to-advance-level/?referralCode=75F57675BDABF6D104C0" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">递归大师班，从C++ </strong> </a> <strong class="lb iu"> <em class="it">的初级到高级水平，或者你可以在</em></strong><a class="ae ky" href="https://skl.sh/3PTOCns" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="it">Skillshare</em></strong></a><strong class="lb iu"><em class="it">上查看这个递归课程。</em>T25】</strong></p><p id="ad40" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu">如果你想从初学者到专家水平学习ARKit 3，然后点击</strong> <a class="ae ky" href="https://www.udemy.com/course/ios-13-swift-5-the-complete-arkit-3-course/?couponCode=FORCREATOR" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这里</strong> </a> <strong class="lb iu">获得课程，你还将获得97%的折扣。</strong></p><p id="3203" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu">如果你对学习iOS移动开发充满热情，并希望将你的iOS开发技能提升到一个新的水平，那么使用CloudKit framework的核心数据应该是你的首选。点击</strong> <a class="ae ky" href="https://www.udemy.com/course/mastering-coredata-with-cloudkit-in-swift-5-for-ios/?couponCode=FORDEVS" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">此处</strong> </a> <strong class="lb iu">获取课程，还可享受97折优惠。</strong></p><p id="b825" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu">从头开始学习SwiftUI点击</strong> <a class="ae ky" href="https://www.udemy.com/course/swiftui-the-complete-course-building-real-world-apps/?couponCode=FORCODERS" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">此处</strong> </a> <strong class="lb iu">获取课程，因为在本课程中，我们将使用SwiftUI构建许多应用，如脸书克隆、新闻应用、笔记应用等等。</strong></p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bea4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">开始使用示例iOS应用程序</h1><p id="ee5b" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">打开Xcode 并创建一个新的Xcode项目。在iOS模板部分选择<em class="mf">单视图应用</em>，点击<em class="mf">下一步</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/d905b5ed7b8f2bacb801752d8cb8b598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BQFS9JT9lQ-6m3CI.png"/></div></div></figure><p id="9c58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入您的产品名称，确保选中<em class="mf">使用核心数据</em>框，然后点击<em class="mf">下一个</em>并在您的桌面上创建它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/38fd62600bb59e9eadad32aa7e61db23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LY7DoeXSfT9mSG3bvWcCiQ.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d8ed" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">设计界面</h1><p id="3d14" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">跳到<code class="fe ni nj nk nl b">Main.storyboard</code>，将<code class="fe ni nj nk nl b">ViewController</code>嵌入<code class="fe ni nj nk nl b">NavigationController</code>，取两个<code class="fe ni nj nk nl b">UIImageView</code>和<code class="fe ni nj nk nl b">UIButton</code>。拖到画布上，并根据需要对其进行约束。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/4e3beee8487f9c5fbd963045e182adef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UwwRP-SImBFrL3WcGN9gAw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Main.storyboard看起来像这样</p></figure><p id="d95f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，打开助理编辑器，为两个按钮创建<code class="fe ni nj nk nl b">IBAction</code>。调用第一个按钮<code class="fe ni nj nk nl b">saveImageButtonPressed</code>，调用第二个按钮<code class="fe ni nj nk nl b">fetchImageButtonPressed</code>。</p><p id="7e06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还要为<code class="fe ni nj nk nl b">UIImageView</code>创建一个<code class="fe ni nj nk nl b">IBOutlet</code>。调用第一个<code class="fe ni nj nk nl b">saveImageView</code>和第二个<code class="fe ni nj nk nl b">fetchImageView.</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/6b49aaef2a5849e00c7501f4fb2ae4ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_qblkO4qjIjjitHcL6B5IA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">助理编辑长这样</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f2df" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">在NavigationItem中实现按钮</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="50c0" class="ns mk it nl b gy nt nu l nv nw">navigationItem.rightBarButtonItem = UIBarButtonItem(barButtonSystemItem: .camera, target: <strong class="nl iu">self</strong>, action: <strong class="nl iu">#selector</strong>(cameraButtonPressed))</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cbe2" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">展示UIImagePickerController</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="e356" class="ns mk it nl b gy nt nu l nv nw"><strong class="nl iu">@objc</strong> <strong class="nl iu">func</strong> cameraButtonPressed() {</span><span id="a2ae" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">let</strong> picker = UIImagePickerController()<br/>picker.delegate = <strong class="nl iu">self<br/></strong>picker.allowsEditing = <strong class="nl iu">true<br/></strong>picker.sourceType = .photoLibrary<br/>present(picker, animated: <strong class="nl iu">true</strong>)</span><span id="674a" class="ns mk it nl b gy nx nu l nv nw">}</span><span id="4bfb" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">func</strong> imagePickerController(<strong class="nl iu">_</strong> picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : <strong class="nl iu">Any</strong>]) {</span><span id="f8a8" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">guard</strong> <strong class="nl iu">let</strong> userPickedImage = info[.editedImage] <strong class="nl iu">as</strong>? UIImage <strong class="nl iu">else</strong> { <strong class="nl iu">return</strong> }</span><span id="2f8e" class="ns mk it nl b gy nx nu l nv nw">saveImageView.image = userPickedImage<br/>picker.dismiss(animated: <strong class="nl iu">true</strong>)</span><span id="09e6" class="ns mk it nl b gy nx nu l nv nw">}</span></pre><p id="976a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们给出了<code class="fe ni nj nk nl b">UIImagePickerController</code>，让用户能够从<code class="fe ni nj nk nl b">photoLibrary</code>中选择图像。</p><p id="a28b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们采用<code class="fe ni nj nk nl b">UIImagePickerControllerDelegate</code>的委托方法将<code class="fe ni nj nk nl b">UIImageView</code>赋给<code class="fe ni nj nk nl b">userPicked</code> <code class="fe ni nj nk nl b">UIImageView</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="874e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">构建并运行</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c078ca799385ab9981c599dcee9fb145.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/1*-Lq2kv_YkNPewZMaXaTJJg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">结果看起来像这样</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c927" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">创建模型</h1><p id="9ecc" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">接下来，转到<code class="fe ni nj nk nl b">.xcdatamodelId</code>文件并创建一个<code class="fe ni nj nk nl b">entity</code>。<code class="fe ni nj nk nl b">entity</code>作<code class="fe ni nj nk nl b">Image</code>之名。在那个<code class="fe ni nj nk nl b">entity</code>中，创建一个<code class="fe ni nj nk nl b">attribute</code>。将其命名为<code class="fe ni nj nk nl b">img</code>并确保<code class="fe ni nj nk nl b">attribute</code>类型为<em class="mf">二进制数据</em>，然后点击<code class="fe ni nj nk nl b">img</code> <code class="fe ni nj nk nl b">attribute</code>并进入<em class="mf">数据模型检查器</em>。</p><p id="8c9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">勾选<em class="mf">框允许外部存储</em>。通过勾选此框，<em class="mf">核心数据</em>保存一个数据参考，这将有助于更快的访问。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/a6cf3654b2257a707cd7d2755125a393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ayeUgoCp_36x-eWawWh9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><code class="fe ni nj nk nl b">.xcdatamodelId looks like this</code></p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1abb" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">将图像保存在核心数据中</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="cdd4" class="ns mk it nl b gy nt nu l nv nw"><strong class="nl iu">class</strong> DataBaseHelper {</span><span id="081f" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">static</strong> <strong class="nl iu">let</strong> shareInstance = DataBaseHelper()</span><span id="cabd" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">let</strong> context = (UIApplication.shared.delegate <strong class="nl iu">as</strong>! AppDelegate).persistentContainer.viewContext</span><span id="7482" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">func</strong> saveImage(data: Data) {</span><span id="6147" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">let</strong> imageInstance = Image(context: context)<br/>imageInstance.img = data</span><span id="ae85" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">do</strong> {</span><span id="f84e" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">try</strong> context.save()<br/>print("Image is saved")</span><span id="e99b" class="ns mk it nl b gy nx nu l nv nw">} <strong class="nl iu">catch</strong> {<br/>print(error.localizedDescription)</span><span id="1927" class="ns mk it nl b gy nx nu l nv nw">      }</span><span id="8180" class="ns mk it nl b gy nx nu l nv nw">   }</span><span id="169a" class="ns mk it nl b gy nx nu l nv nw">}</span></pre><p id="13bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建了一个新文件<code class="fe ni nj nk nl b">DataBaseHelper</code>，因为在这个文件中，我们将执行所有操作，如<code class="fe ni nj nk nl b">saveImage</code>和<code class="fe ni nj nk nl b">fetchImage</code>。</p><p id="0b5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在文件中，我们已经创建了一个<code class="fe ni nj nk nl b">class</code>、<code class="fe ni nj nk nl b">DataBaseHelper</code>，然后我们有一个类<code class="fe ni nj nk nl b">DataBaseHelper</code>的单体来访问这个类的属性和方法。</p><p id="603f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们使用<code class="fe ni nj nk nl b">UIApplication</code>创建<code class="fe ni nj nk nl b">context</code>，然后我们有一个方法<code class="fe ni nj nk nl b">saveImage()</code>来保存用户选择的图像。通过这种方法，我们使用<code class="fe ni nj nk nl b">context</code>保存图像。</p><p id="d85a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">跳转到<code class="fe ni nj nk nl b">ViewController.swift</code>文件。去你的<code class="fe ni nj nk nl b">fetchImageButtonPressed</code> <code class="fe ni nj nk nl b">IBAction</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7cd3" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">IBAction看起来像这样</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="d7f7" class="ns mk it nl b gy nt nu l nv nw"><strong class="nl iu">@IBAction</strong> <strong class="nl iu">func</strong> saveImageButtonPressed(<strong class="nl iu">_</strong> sender: UIButton) {</span><span id="e3f1" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">if</strong> <strong class="nl iu">let</strong> imageData = saveImageView.image?.pngData() {</span><span id="80c1" class="ns mk it nl b gy nx nu l nv nw">DataBaseHelper.shareInstance.saveImage(data: imageData)</span><span id="efd8" class="ns mk it nl b gy nx nu l nv nw">   }</span><span id="53f6" class="ns mk it nl b gy nx nu l nv nw">}</span></pre><p id="800c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的<code class="fe ni nj nk nl b">saveImageButtonPressed</code> <code class="fe ni nj nk nl b">IBAction</code>中，我们已经将<code class="fe ni nj nk nl b">UIImageView</code>转换为<code class="fe ni nj nk nl b">pngData()</code>，因为要以二进制数据的形式保存<code class="fe ni nj nk nl b">UIImageView</code>，首先我们必须转换它，然后我们使用我们的<code class="fe ni nj nk nl b">saveImage()</code>方法保存<code class="fe ni nj nk nl b">UIImageView</code>。</p><p id="6d56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果您运行应用程序，从<code class="fe ni nj nk nl b">photoLibrary</code>中选择图像，并点击<em class="mf">保存图像</em>按钮，您的图像将会保存。</p><p id="acda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道图像是否被保存，首先在<code class="fe ni nj nk nl b">AppDelegate</code>文件中打印文档目录的路径并复制该路径。前往<em class="mf">查找器前往</em>T35】前往<em class="mf">文件夹</em>并打印该路径。</p><p id="0d0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按回车键，然后打开你的数据库应用程序，在那里你可以看到你的图像是否保存。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5ebf" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">打印路径</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="92d7" class="ns mk it nl b gy nt nu l nv nw"><strong class="nl iu">func</strong> application(<strong class="nl iu">_</strong> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: <strong class="nl iu">Any</strong>]?) -&gt; Bool {</span><span id="06b8" class="ns mk it nl b gy nx nu l nv nw">print(FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first ?? "Not Found")</span><span id="ae28" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">return</strong> <strong class="nl iu">true</strong></span><span id="4ab2" class="ns mk it nl b gy nx nu l nv nw">}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c2fb" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">检索图像</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="c613" class="ns mk it nl b gy nt nu l nv nw"><strong class="nl iu">func</strong> fetchImage() -&gt; [Image] {</span><span id="2849" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">var</strong> fetchingImage = [Image]()</span><span id="125a" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">let</strong> fetchRequest = NSFetchRequest&lt;NSFetchRequestResult&gt;(entityName: "Image")</span><span id="dfa7" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">do</strong> {</span><span id="ac23" class="ns mk it nl b gy nx nu l nv nw">fetchingImage = <strong class="nl iu">try</strong> context.fetch(fetchRequest) <strong class="nl iu">as</strong>! [Image]</span><span id="a7c1" class="ns mk it nl b gy nx nu l nv nw">} <strong class="nl iu">catch</strong> {</span><span id="be6a" class="ns mk it nl b gy nx nu l nv nw">print("Error while fetching the image")</span><span id="dc2b" class="ns mk it nl b gy nx nu l nv nw">}</span><span id="2df1" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">return</strong> fetchingImage</span><span id="5d86" class="ns mk it nl b gy nx nu l nv nw">}</span></pre><p id="9088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的方法中，我们使用<code class="fe ni nj nk nl b">NSFetchRequest</code>和<code class="fe ni nj nk nl b">context</code>获取用户选择的图像。</p><p id="13fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ni nj nk nl b">NSFetchRequest</code>是一个泛型类。它描述了用于从持久性存储中检索数据的搜索标准，最后，我们返回了<code class="fe ni nj nk nl b">fetchingImage</code>。</p><p id="88ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">跳转到<code class="fe ni nj nk nl b">ViewController.swift</code>文件，到你的<code class="fe ni nj nk nl b">fetchImageButtonPressed</code> <code class="fe ni nj nk nl b">IBAction</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aa6c" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">IBAction看起来像这样</h1><pre class="kj kk kl km gt no nl np nq aw nr bi"><span id="f9bc" class="ns mk it nl b gy nt nu l nv nw"><strong class="nl iu">@IBAction</strong> <strong class="nl iu">func</strong> fetchImageButtonPressed(<strong class="nl iu">_</strong> sender: UIButton) {</span><span id="a5d3" class="ns mk it nl b gy nx nu l nv nw"><strong class="nl iu">let</strong> arr = DataBaseHelper.shareInstance.fetchImage()</span><span id="f2fe" class="ns mk it nl b gy nx nu l nv nw">fetchImageView.image = UIImage(data: arr[0].img!)</span><span id="263b" class="ns mk it nl b gy nx nu l nv nw">}</span></pre><p id="6031" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的<code class="fe ni nj nk nl b">fetchImageButtonPressed</code> <code class="fe ni nj nk nl b">IBAction</code>中，我们使用<code class="fe ni nj nk nl b">fetchImage()</code>方法在<code class="fe ni nj nk nl b">fetchImageView</code>中获取用户选择的图像。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cc28" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">构建并运行</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/63bd33c38770a4b2a117875a907e967c.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/1*ERVLXcohzAjNB_yUigBrMw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最终结果看起来像这样</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="467e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="c08b" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">这一块就到此为止！我希望你喜欢这篇文章，并学会了如何在核心数据中保存图像。</p><p id="7b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在<a class="ae ky" href="https://github.com/Amitrai011/Saving-Image-in-Core-Data" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完整的项目。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><blockquote class="mc md me"><p id="e66d" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu"> <em class="it">如果你正在准备你的技术编码面试，或者你想学习递归来提高你解决问题的技能，那么你应该查看这个udemy课程</em> </strong> <a class="ae ky" href="https://www.udemy.com/course/master-the-recursion-from-beginner-to-advance-level/?referralCode=75F57675BDABF6D104C0" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">递归大师班，从C++ </strong> </a> <strong class="lb iu"> <em class="it">的初级到高级水平，或者你可以在</em></strong><a class="ae ky" href="https://skl.sh/3PTOCns" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="it">Skillshare</em></strong></a><strong class="lb iu"><em class="it">上查看这个递归课程。</em> </strong></p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1937" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">额外资源</h1><blockquote class="mc md me"><p id="462c" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu">如果你想从初学者到专家级别学习ARKit 3，那么点击</strong> <a class="ae ky" href="https://www.udemy.com/course/ios-13-swift-5-the-complete-arkit-3-course/?couponCode=FORCREATOR" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这里</strong> </a> <strong class="lb iu">获得课程，并且你将获得97%的折扣。</strong></p><p id="f85b" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu">如果你对学习iOS移动开发充满热情，并希望将你的iOS开发技能提升到一个新的水平，那么使用CloudKit framework的核心数据应该是你的首选。点击</strong> <a class="ae ky" href="https://www.udemy.com/course/mastering-coredata-with-cloudkit-in-swift-5-for-ios/?couponCode=FORDEVS" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">此处</strong> </a> <strong class="lb iu">获取课程，还可享受97折优惠。</strong></p><p id="1740" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated"><strong class="lb iu">从头开始学习SwiftUI点击</strong> <a class="ae ky" href="https://www.udemy.com/course/swiftui-the-complete-course-building-real-world-apps/?couponCode=FORCODERS" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">此处</strong> </a> <strong class="lb iu">获取课程，因为在本课程中，我们将使用SwiftUI构建许多应用，如脸书克隆、新闻应用、笔记应用等等。</strong></p></blockquote></div></div>    
</body>
</html>