<html>
<head>
<title>Creating Custom Eslint Rules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建自定义Eslint规则</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-custom-eslint-rules-cdc579694608?source=collection_archive---------4-----------------------#2022-02-16">https://betterprogramming.pub/creating-custom-eslint-rules-cdc579694608?source=collection_archive---------4-----------------------#2022-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0c88" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何像专业人士一样使用Eslint</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0003579ecc8f2161559764ab8f5bbc75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RCQ9HtV6R59DC-hA"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@tingeyinjurylawfirm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">廷杰伤害律师事务所</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="8036" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">简介</strong></h1><p id="6ee6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">ESLint是一个静态代码分析工具，用于识别JavaScript代码中的问题模式。尼古拉斯·c·扎卡斯在2013年创建了它。ESLint规则是可配置的，并且可以定义和加载定制规则。</p><p id="d785" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">ESLint涵盖了代码质量和编码风格问题。简而言之，ESLint是一个代码分析工具，用于代码格式化、错误检查、强制代码样式等。它用于在整个项目中强制实施代码样式。ESLint中有一些标准的代码风格。这些格式和样式被称为规则。</p><p id="a8a7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">本文将解释如何创建您自己的定制ESLint规则，并使用ESLint <strong class="lq ir"> </strong>模块创建一个脚本，用于Lint文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/1ccaeba1ed518ff21164b50b6ebd743b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MUmYUk572ZCU9o3r"/></div></div></figure><h1 id="cde8" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">项目设置</strong></h1><p id="1658" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将创建一个简单的TypeScript项目。这将是准系统，只是几个文件来测试我们的自定义规则。</p><p id="0f75" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">运行以下命令来设置typescript项目:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="18f3" class="mv kx iq mr b gy mw mx l my mz">npm init –y</span><span id="8e84" class="mv kx iq mr b gy na mx l my mz">tsc — init</span></pre><p id="dd80" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这些命令将为我们创建<code class="fe nb nc nd mr b">package.json</code> <strong class="lq ir"> <em class="ne"> </em> </strong>和<code class="fe nb nc nd mr b">tsconfig.json</code> <strong class="lq ir"> <em class="ne"> </em> </strong>文件。</p><p id="a314" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">将<code class="fe nb nc nd mr b">tsconfig.json</code> <strong class="lq ir"> <em class="ne"> </em> </strong>文件替换为以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="3bb5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">接下来，让我们为我们的项目设置ESLint。</p><p id="8e48" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">使用以下命令为您的项目安装ESLint:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="0a56" class="mv kx iq mr b gy mw mx l my mz">npm install eslint — save-dev</span></pre><p id="4db6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">接下来，使用以下命令为项目设置ESLint:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="5703" class="mv kx iq mr b gy mw mx l my mz">npm init @eslint/config</span></pre><p id="6b7d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">按照提示，回答如下图所示的问题:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/b135067bae49b8e8fbd222a1cbbb6a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*SODQRFFPR978xyEm"/></div></figure><p id="0ea4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们的<code class="fe nb nc nd mr b">eslintrc.js</code> <strong class="lq ir"> <em class="ne"> </em> </strong>文件应该看起来像下面这个:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4f9d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在我们的项目已经完全设置好了，我们可以编译我们添加的任何文件并lint这些文件。</p><h1 id="984b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">创作我们的林挺剧本</h1><p id="53a2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">接下来，我们需要创建脚本来lint我们的文件。我们将从我们的节点脚本中使用<code class="fe nb nc nd mr b">eslint</code> <strong class="lq ir"> <em class="ne"> </em> </strong>模块来完成这个魔术，而不是运行<code class="fe nb nc nd mr b">eslint</code> <strong class="lq ir"> <em class="ne">。</em> </strong>来自我们的终点站。我们将使用<code class="fe nb nc nd mr b">glob</code> <strong class="lq ir"> <em class="ne"> </em> </strong>包来获取这个脚本中的文件，所以我们需要安装它。您可以运行以下命令来安装它:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3153" class="mv kx iq mr b gy mw mx l my mz">npm i glob</span></pre><p id="2da5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们还需要安装一些类型的定义。运行以下命令进行安装:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="9176" class="mv kx iq mr b gy mw mx l my mz">npm i -D @types/eslint @types/node @types/glob</span></pre><p id="d421" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，我们可以创建一个名为<code class="fe nb nc nd mr b">lint_files.ts</code> <strong class="lq ir"> <em class="ne"> </em> </strong>的文件，并在其中插入以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="be57" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这个文件非常容易理解。我们有四个助手功能用于改变我们的控制台的颜色。这样，我们可以在必要的地方添加信息、成功、警告和错误日志。</p><p id="69cb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当这个脚本被调用时，最后一个函数被调用。在这个函数中，首先，我们使用<code class="fe nb nc nd mr b">glob</code>模块获取所有的TypeScript和JavaScript文件。接下来，我们过滤从<code class="fe nb nc nd mr b">glob </code>返回的文件，只返回TypeScript和JavaScript文件，因为这些是我们想要lint的文件。接下来，我们创建一个eslint对象。</p><p id="c898" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">根据<a class="ae kv" href="https://eslint.org/docs/developer-guide/nodejs-api#-new-eslintoptions" rel="noopener ugc nofollow" target="_blank">文档</a>，我们传递一些我们需要的参数，比如扩展名、<code class="fe nb nc nd mr b">errorOnUnmatchedPattern</code>和<code class="fe nb nc nd mr b">baseConfig</code>，也就是<code class="fe nb nc nd mr b">eslintrc.js</code>文件(ESLint配置)。我们还传递另一个重要参数:<code class="fe nb nc nd mr b">rulePaths</code>。该选项告诉ESLint查找该目录，并检查该目录中定义的任何ESLint规则。</p><p id="82b4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们遍历所有文件，然后调用<code class="fe nb nc nd mr b">lintFiles</code>方法，该方法执行林挺并修复问题(如果可以修复的话)。然后我们遍历从林挺得到的结果，这是一个lint结果数组，包含每个被lint的文件。<code class="fe nb nc nd mr b">message</code>属性是每个文件中每个错误的错误消息对象。<code class="fe nb nc nd mr b">message</code>属性的<code class="fe nb nc nd mr b">severity</code>属性可以是1表示警告，也可以是2表示错误。</p><p id="2f6b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在运行这个脚本之前，我们需要创建我们指定为<code class="fe nb nc nd mr b">rulePaths</code>的目录。在根项目中创建一个名为<code class="fe nb nc nd mr b">lint_rules</code>的文件夹，并在其中创建任何文件，然后编译代码。如果运行该脚本，您应该会看到以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/d7e12a4c9ba28b377ec95b87b6271b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t45sD9R7CS4M71TU"/></div></div></figure><p id="e8cf" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正如我们所期望的，我们不应该有任何错误。</p><h1 id="4f7c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">创建我们的第一条规则</h1><p id="caf6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这一部分将集中于创建我们的第一个定制规则，但是在此之前，我们需要理解代码是如何构造的。我们通过使用AST explorer，抽象语法树来做到这一点。AST explorer有助于解释我们代码的分解。让我们来看看下面的代码示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="fde9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们将使用<a class="ae kv" href="https://astexplorer.net/" rel="noopener ugc nofollow" target="_blank"> AST explorer </a>网站，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/e943a5d2c2b888f7b208d731d52a241e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ghrLhJswRe4CWSie"/></div></div></figure><p id="1a05" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果我们将鼠标指向代码的任何部分，我们就可以遍历该节点。让我们以<code class="fe nb nc nd mr b"> printTips</code>函数为例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/0524b38eddb4dbc8548de6b08a840ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z2rD2NC18v4ylMnY"/></div></div></figure><p id="5031" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以使用<code class="fe nb nc nd mr b">FunctionDeclaration</code>节点访问<code class="fe nb nc nd mr b">printTips</code>函数声明。我们可以使用<code class="fe nb nc nd mr b">parent </code>属性访问类似<code class="fe nb nc nd mr b">type</code>、<code class="fe nb nc nd mr b">id</code>、<code class="fe nb nc nd mr b">name </code>甚至是父节点的属性。</p><p id="67f1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们再举一个例子，假设我们有下面的代码片段:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/54d63cd473be3857ebf844be2a7e72cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A5HVBnHYxMW_Ls3a"/></div></div></figure><p id="0473" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们可以通过使用<code class="fe nb nc nd mr b">SwitchCase</code>节点并检查节点的<code class="fe nb nc nd mr b">test.value</code>属性是否是我们想要的来访问任何案例。例如，如果我们正在处理第一种情况，我们可以使用<code class="fe nb nc nd mr b">SwitchCase</code>节点并检查<code class="fe nb nc nd mr b">node.test.value</code>是否与<code class="fe nb nc nd mr b">hello</code>相同。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/487ca0e4b5cce419fb2585e5f4475078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jlbmc85pjMfJRHyE"/></div></div></figure><p id="5511" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，回到我们的<a class="ae kv" href="https://eslint.org/docs/developer-guide/working-with-rules" rel="noopener ugc nofollow" target="_blank">自定义规则</a>。为了创建自定义规则，我们将在之前创建的<code class="fe nb nc nd mr b">lint_rules</code>文件夹中创建一个文件。文件名应该是规则名。我们将在本文中创建的规则将禁止在我们项目的<code class="fe nb nc nd mr b">dangerous</code>目录之外命名函数<code class="fe nb nc nd mr b">dangerous</code>。</p><p id="3447" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在<code class="fe nb nc nd mr b">lint_rules</code>目录下创建一个文件名<code class="fe nb nc nd mr b">no_dangerous_function.js</code>，并粘贴以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="de37" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">首先，我们创建了一个助手函数，它接受两个参数，<code class="fe nb nc nd mr b">context </code>和<code class="fe nb nc nd mr b">node </code>，并检查被链接的文件是否在根项目的<code class="fe nb nc nd mr b">dangerous </code>目录中。如果它在这个目录中，我们就退出这个函数，但是如果文件不在<code class="fe nb nc nd mr b">dangerous </code>目录中，我们就报告一个错误<code class="fe nb nc nd mr b">context.report</code>，它需要一些选项。第一个是有错误的节点，第二个是将显示为林挺消息的消息，而<code class="fe nb nc nd mr b">fix</code>是可用于修复错误的函数，是可选的。</p><p id="a37d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们还导出了一个传递给ESLint的对象，该对象描述了规则的元数据。如果你想让ESLint修正这个规则，你需要将<code class="fe nb nc nd mr b">fixable </code>属性传递给<code class="fe nb nc nd mr b">meta</code>，它可以是<code class="fe nb nc nd mr b">code </code>或者<code class="fe nb nc nd mr b">whitespace</code>。</p><p id="9a33" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><code class="fe nb nc nd mr b">create </code>属性是一个接受<code class="fe nb nc nd mr b">context </code>对象的函数，这里是我们进行实际工作的地方。我们有三种节点:</p><ol class=""><li id="09ad" class="nj nk iq lq b lr mk lu ml lx nl mb nm mf nn mj no np nq nr bi translated">调用表达式:该节点检查函数何时被调用</li><li id="5c78" class="nj nk iq lq b lr ns lu nt lx nu mb nv mf nw mj no np nq nr bi translated">函数声明:该节点检查何时使用<code class="fe nb nc nd mr b">function</code>关键字声明函数。</li><li id="32b0" class="nj nk iq lq b lr ns lu nt lx nu mb nv mf nw mj no np nq nr bi translated">箭头函数表达式:该节点检查何时使用箭头函数声明函数。</li></ol><p id="e6d5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们的用例需要这三个节点，因为我们想确保名为<code class="fe nb nc nd mr b">dangerous </code>的函数不会在<code class="fe nb nc nd mr b">dangerous </code>目录之外以任何方式被调用或声明。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/8d68ffedc5208212c0e420a36872c602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PAl7ZsbFxXjKfD07"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/c2187c72ce44e1c8b7ac98aff9b90201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K6kYA3xA88vya7Sx"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/be932f5ec000da3d77b7015ee2597b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*29NufPDsXzQZuhvW"/></div></div></figure><p id="698a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">从上面的图片中，我们可以看到我们选择每个节点的原因，以及我们能够访问<code class="fe nb nc nd mr b">node.parent.id.name</code>获取箭头函数表达式、<code class="fe nb nc nd mr b">node.id.name</code>获取函数声明以及<code class="fe nb nc nd mr b">node.callee.name</code>获取调用表达式的原因。接下来，我们需要启用这个规则，通过添加这个规则来编辑<code class="fe nb nc nd mr b">eslintrc.js</code>文件的规则属性。</p><p id="b465" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">将其作为另一个属性添加到您的<code class="fe nb nc nd mr b">eslintrc.js</code>文件的规则属性中:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="37e9" class="mv kx iq mr b gy mw mx l my mz">no_dangerous_function: ‘error’,</span></pre><p id="5f8b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，您的所有文件都应该会给您一条如下所示的错误消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/0563db3a71658b1533d2fbeea71d8328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hwd1Iz7_Wuo6_hCA"/></div></div></figure><p id="cec5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是因为VSCode的ESLint扩展找不到此规则。我们稍后会解决这个问题。现在让我们测试我们的规则。在您的<code class="fe nb nc nd mr b">app.ts</code>文件中，添加以下内容:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="c9e4" class="mv kx iq mr b gy mw mx l my mz">export {}</span><span id="7920" class="mv kx iq mr b gy na mx l my mz">function dangerous () {</span><span id="572d" class="mv kx iq mr b gy na mx l my mz">    console.log(‘dangerous’)</span><span id="52f5" class="mv kx iq mr b gy na mx l my mz">}</span><span id="1fbe" class="mv kx iq mr b gy na mx l my mz">dangerous()</span></pre><p id="272c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果您再次清理文件，您应该会收到以下错误消息。这证明了，即使我们的编辑器给出了一个错误信息，说它看不到规则，我们还是把它添加到了<code class="fe nb nc nd mr b">eslintrc.js</code>文件中，我们没有收到警告，告诉我们不要在<code class="fe nb nc nd mr b"> app.ts</code>文件中命名函数“<code class="fe nb nc nd mr b">dangerous</code>，所以我们的规则运行得很好。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/d573de6d717b0fe2f0d46573e01092b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*irTuh2SZyqHPWrtS"/></div></div></figure><p id="1c3b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们创建一个名为<code class="fe nb nc nd mr b">dangerous </code>的目录，并在其中创建一个文件。之后，我们最终可以将相同的代码粘贴到我们的<code class="fe nb nc nd mr b">app.ts</code>文件里面，如下图所示:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3645" class="mv kx iq mr b gy mw mx l my mz">export {}</span><span id="5da2" class="mv kx iq mr b gy na mx l my mz">function dangerous () {</span><span id="3d7e" class="mv kx iq mr b gy na mx l my mz">    console.log(‘dangerous’)</span><span id="96cf" class="mv kx iq mr b gy na mx l my mz">}</span><span id="406a" class="mv kx iq mr b gy na mx l my mz">dangerous()</span></pre><p id="7514" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果我们再次丢弃我们的文件代码，只有<code class="fe nb nc nd mr b">app.ts</code>文件会产生错误。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/8a683fed814979f390f29620162311b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XkAK6IBNz2ea3RDG"/></div></div></figure><p id="f9e1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们在项目的根目录下创建另一个文件，通过在这个文件中创建一个名为<code class="fe nb nc nd mr b">dangerous </code>的函数来测试arrow函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/c5705955d24dff4d8a9c5ec062c4885c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8ihDpq5teCdYemRS"/></div></div></figure><h1 id="a418" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">配置我们的编辑器和Eslint</h1><p id="98d8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">若要修复警告“找不到规则‘no _ dangerous _ function’的定义。eslint(no_dangerous_function)，"我们需要告诉VSCode检查特定目录中的自定义规则。为此，我们需要为我们的项目创建VSCode设置。这是通过在我们项目的<code class="fe nb nc nd mr b">.vscode</code>目录中创建一个<code class="fe nb nc nd mr b">settings.json</code>文件来完成的。将以下内容粘贴到该文件中:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="69d9" class="mv kx iq mr b gy mw mx l my mz">// Place your settings in this file to overwrite default and user settings.</span><span id="9298" class="mv kx iq mr b gy na mx l my mz">{</span><span id="bcc3" class="mv kx iq mr b gy na mx l my mz">    “eslint.options”: {</span><span id="d3ed" class="mv kx iq mr b gy na mx l my mz">        “rulePaths”: [“lint_rules”],</span><span id="198b" class="mv kx iq mr b gy na mx l my mz">    }</span><span id="14c4" class="mv kx iq mr b gy na mx l my mz">}</span></pre><p id="7988" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">所有这些错误应该会消失，而且VSCode也足够聪明，可以在林挺我们的文件之前警告我们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/7382e8e06dc1a69814f4a29fa5b146c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*06B1_-Xv7wd2kTjS"/></div></div></figure><h1 id="e9fb" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为我们的规则添加修复程序</h1><p id="ef7d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果我们悬停在该错误上并单击修复按钮，我们只能禁用该规则。但这还不够。我们可能想让ESlint为我们自动修复一些规则的问题。</p><p id="cdf9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">例如，对于这条规则，如果ESLint的fix选项为真，或者当我们单击<strong class="lq ir">快速修复</strong>按钮时，我们可以决定我们想要自动将函数名更改为<code class="fe nb nc nd mr b">notDangerous</code>或其他名称。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/1ad475cffc74deabc36d8f26b1de823b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_lDT8mQ4Cu4JAWdr"/></div></div></figure><p id="4ef1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们已经将<code class="fe nb nc nd mr b">context.report</code>中的<code class="fe nb nc nd mr b">fix</code>方法注释掉了，取消对该方法的注释，现在点击快速修复选项会给我们带来更多有趣的功能。此外，当我们lint时，文件会自动修复，因为我们已经将fix设置为true。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/7da3e0f7a2e0af047b9102230b930396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EkJdhtagTUeiL9s4"/></div></div></figure><p id="8f9d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果我们点击按钮，功能名称将变为<code class="fe nb nc nd mr b">notDangerous</code>。让我们再次lint我们的文件，但我们所有的错误将被自动修复。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/183d04f00f8dd4d3885a549e87be2ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4voydOUedGoMBw6U"/></div></div></figure><p id="3d3b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你检查你的源代码，<code class="fe nb nc nd mr b">dangerous </code>函数应该变成了<code class="fe nb nc nd mr b">notDangerous</code>。</p><h1 id="7532" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">接下来的步骤</strong></h1><p id="1f02" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">本文通过typescript帮助您设置和使用ESLint，使用ESLint模块而不是CLI工具，并为您的项目创建您自己的定制ESLint规则。</p><p id="4bcd" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">您可以使用第一个规则背后的思想，创建更多的规则来实施您和与您一起工作的开发人员想要遵循的样式。</p><p id="a2d0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你可以在<a class="ae kv" href="https://github.com/Babatunde13/eslint-rules" rel="noopener ugc nofollow" target="_blank"> Github </a>上查看这篇文章的源代码，或者在<a class="ae kv" href="https://twitter.com/bkoiki950" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上联系我。</p></div></div>    
</body>
</html>