<html>
<head>
<title>7 Ways to Limit Scope in Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">限制代码范围的7种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/7-ways-to-limit-scope-in-your-code-e3052cdb91a4?source=collection_archive---------7-----------------------#2020-06-17">https://betterprogramming.pub/7-ways-to-limit-scope-in-your-code-e3052cdb91a4?source=collection_archive---------7-----------------------#2020-06-17</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="243e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">保持代码干净、简洁和可测试的简单方法</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/2d15afd489e068773164ebffc8b19263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZVVzne-yWlk5FCRH"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">卢多维克·沙雷特在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="bf3a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一般来说，开发人员应该尽可能地限制变量和引用的范围。尽可能地限制范围，从大事(永远不要使用全局变量)到一种语言能做的细微小事(尽可能声明<code class="fe lw lx ly lz b">const</code>)，都有助于编写干净、易于测试的代码。</p><p id="8e9e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">限制范围有各种好处。首先，限制变量的范围减少了给定变量可以修改的地方的数量。我们厌恶全局变量的原因是无法知道全局变量何时何地会被改变。全局变量就像休息室里的最后一个甜甜圈。你知道你不应该碰它，但它是如此的诱人和简单，只要抓住那个变量，用它做你需要做的任何事情。限制可改变事物的范围减少了它以不应该的方式改变的机会——或者更糟，以你甚至不知道的方式。</p><p id="d63e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">根据定义，限制范围也是面向对象编程的一个主要特征。当你想到OOP时，封装可能是你想到的第一件事，它的基本目的——它存在的全部理由——是形式化限制范围的过程。他们称之为<a class="ae kz" href="http://bit.ly/o7J7uZ" rel="noopener ugc nofollow" target="_blank">信息隐藏</a>不是白叫的。术语“信息隐藏”实际上意味着“隐藏你的变量的范围，以至于它们不能被改变，除非以你允许的方式。”封装使您能够确保不想公开的数据不会被公开。如果它没有暴露，它就不能被改变。</p><p id="b8a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">限制范围也限制了人们依赖他们不应该依赖的代码的能力。松散耦合——限制系统内的依赖性——是一件好事。紧密耦合是一件坏事。限制范围会使一个类更难与另一个类结合，并产生依赖性，从而使代码难以测试和维护。这也使得一个代码区域的变化很难对其他耦合的区域产生二次影响。最糟糕的事情莫过于在纽约市(打个比方)更改代码，然后让这种更改在整个洛杉矶引发一个代码错误。这通常被称为<a class="ae kz" href="http://bit.ly/nNmoDB" rel="noopener ugc nofollow" target="_blank">远距离动作</a>，就像一个糟糕的玉米煎饼一样应该避免。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="94ae" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">限制范围的7种方法</h1><p id="3f7f" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">有很多众所周知的方法来限制作用域(对象，使变量成为方法的局部变量，等等。)，但是也有很多更小、更微妙的方法来限制范围。我试着列出了一些限制代码范围的方法:</p><ol class=""><li id="3069" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated">没有全局变量。没有。零。这一点并不微妙，但它是必不可少的。确保永远不将变量声明为全局变量是非常容易的。你可以用多种语言做到这一点，但你永远不应该这样做。在像C#和Java这样的语言中，严格地说，你实际上不能声明一个全局变量——所有的东西都必须在一个类中——但是你可以在你的主类中创建一个几乎是同样的东西。你能做并不意味着你应该做。所以不要。</li><li id="f826" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">不要创造任何东西。取而代之的是，提出你的需求。这个主题本身就是一个大主题，涉及到依赖和依赖注入的问题。但是，如果您试图永远不在类的构造函数中实际创建任何东西，而是向构造函数传递它所需要的现有实例，您可以限制给定类的范围。更好的是，如果您使用一个成熟的依赖注入容器，您可以非常严格地限制您的类的范围，但仍然可以从它们的功能中充分受益。</li><li id="b230" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">如果一个变量可以是例程的局部变量，就这样做。这与“永远没有全局变量”是一致的，但这是必须要说的。如果您可以在单个方法的范围内声明一个变量，那么就这样做。</li><li id="c3b9" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">尽可能使用常数。如果你永远不会改变赋给一个变量的值，为什么要让它成为一个变量呢？养成一个习惯，让某样东西成为一个常数，然后只在需要的时候才让它成为一个变量。即使在方法内部也要这样做。</li><li id="818e" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">如果你能使一个变量私有，那就去做。如果不能，就让它受到保护。如果做不到，那就公开吧。这一个有点棘手，因为需要考虑OOP原则。但是通常，将字段变量设为私有，并通过公共setter方法来访问它们。这样，虽然数据可以更改，但实际的存储设备本身是不可直接访问的。此外，您可以通过setter方法控制更改内部数据的能力。</li><li id="36d2" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">在您的setters中提供通知系统来监控变化的数据。有时，您可能有需要更改的数据，但出于某种原因，这些数据是敏感的。因此，您希望监控甚至阻止内部数据的更改。您可以在setter方法中使用像事件一样简单的东西，或者更健壮、更灵活的东西，比如Observer模式。</li><li id="3b4f" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">不要插手另一个班级。或者更好的是，不要创建其他人可以进入的类。这涉及到我之前讨论过的德米特定律。</li></ol></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="8a2e" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="35b2" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">这是限制范围的一个简短且可能不完整的列表。你们用来限制变量范围的其他小方法和技巧是什么？</p></div></div>    
</body>
</html>