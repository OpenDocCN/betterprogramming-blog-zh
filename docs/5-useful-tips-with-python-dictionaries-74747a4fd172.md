# Python 字典的 5 个有用技巧

> 原文：<https://betterprogramming.pub/5-useful-tips-with-python-dictionaries-74747a4fd172>

## 利用 Python 中最强大的数据类型之一

![](img/31467654f89390bd1650c5874147044b.png)

照片由 [kazuend](https://unsplash.com/@kazuend?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄。

尽管每种数据类型都有自己的优缺点，但在常见的数据容器(例如列表和集合)中，字典是我最喜欢的。要成为一名有经验的 Python 开发人员，您需要了解这种通用的数据类型。

事不宜迟，我想在本文中分享一些超越字典最基本用例的技巧。我希望它们会对你有所帮助。

# 1.用指定的键创建词典

编写 Python 脚本时，可能需要定义一些全局变量。然而，当你以后在函数中更新这些变量时，你必须明确这些变量是全局的。下面是一个简单的例子:

全局变量

我不太喜欢这种使用`global`关键字的编码模式。当您在多个函数中使用多个全局关键字时，这是一项繁琐的工作。相反，您可以使用 dictionary 对象来捕获所有相关变量。在这种情况下，您可以直接更新字典，因为它将由您的解释器全局定位。下面是修改后的代码:

参数字典

正如您在代码片段中注意到的，我使用了`fromkeys`类方法来实例化一个`dict`对象。使用这种实例化方法有几个优点:

*   您的代码可读性更好，因为读者很清楚您在这个脚本中使用了什么参数。在这种情况下，我们只有`param0`和`param1`。
*   当您使用方括号获取字典中这些键的值时，您不会得到`KeyError`异常，因为我们指定的所有键都将`None`作为初始值，如下所示:

```
>>> params = dict.fromkeys(["param0", "param1"])
>>> print(params)
{'param0': None, 'param1': None}
```

# 2.列表和词典之间的转换

除了字典，列表是我们在项目中经常使用的另一种数据容器类型。列表和字典之间的转换构成了双向通信。让我们先来看看列表是如何转换成字典的。

如果您的列表由包含两个条目的条目组成，您可以直接实例化一个 dictionary 对象。每个条目都将成为创建的 dictionary 对象中相应的键值对，如下所示:

列表中的字典

*   这段代码展示了几个从列表对象创建字典的例子。注意，列表中的项目可以是列表或元组，只要每个项目只有两个项目。
*   更广泛地说，字典可以从 iterables(列表是一种 iterable)创建，要求 iterable 的每一项都有两个对象。在代码中，我们注意到我们从`zip`和`tuple`对象创建了字典。

当您有字典时，有几种可能的情况说明如何从现有的字典创建列表。看看下面的代码片段，了解常见的用例:

词典到列表

*   第一个用例是创建一个包含现有字典的键的对象列表。我们可以简单地将字典传递给 list 构造函数，这是传递字典的 key view 对象(即调用`keys()`方法返回的对象)的捷径。
*   我们还可以通过使用`values()`和`items()`方法创建值列表或键-值对，每个方法都从字典中创建值或键-值字典视图对象。

除了使用 list 构造函数，我们还可以使用内置的`sorted()`方法，创建一个排序的 list 对象。使用 dictionary 对象，我们可以创建排序的键、值或键值对:

# 3.字典迭代

我们可以在一个`for`循环中直接使用字典，因为它们是一种可迭代的。默认情况下，迭代使用键。如前所述，您可以将迭代概念化，就像您已经在 dictionary 对象上调用了`keys()`方法一样。以类似的方式，您还可以通过访问值和项的字典视图对象来迭代值和项。下面是一些相关的例子:

基本迭代

除了这些基本迭代，您还可以利用一些内置函数，包括`sorted()`和`reversed()`。

*   方法将创建一个有序的对象列表。根据您指定的内容，您可以拥有排序的键、值或键值对。

对字典使用 sorted()

*   `reversed()`方法将创建一个反转的对象，该对象翻转字典对象的顺序。在 Python 的最新版本中，字典保留了插入顺序，因此可以使用通常用于序列数据类型的`reversed()`方法。

对字典使用 reversed()

# 4.词典理解

您可能听说过 list comprehension，这是一种用 Python 从现有的 iterables 创建 list 对象的简洁方法。你知道还有字典理解吗？它的语法类似于 list comprehension，通过迭代现有的 iterable，比如 list 和 tuple。以下代码片段向您展示了一些常见的用例:

*   词典理解的基本形式如下:`{key_expr: value_expr for item in iterable}`。第 4 行向您展示了用法。
*   像列表理解一样，我们也可以对理解应用一些过滤条件。如第 8 行所示，我们通过使用模运算只为奇数创建正方形。

# 5.pop()和 popitem()方法

在许多情况下，我们不需要从 dictionary 对象中删除条目。一旦它被使用，Python 将负责从`dict`对象取回内存。但是，在其他一些情况下，您可以在使用移除的项(或值)时动态移除这些项。您可能知道列表对象有一个`pop()`方法，但是您知道我们也可以用`dict`对象弹出项目/值吗？先来看看`pop()`的用法:

字典对象的 Pop()

*   上面的用例向您展示了我们有一个字典来跟踪餐馆的小费。
*   一天结束的时候，服务员排队拿自己的那份。我们不希望服务员意外得到超过他们份额的东西。在这个场景中，我们希望在获取小费时销毁字典中的条目。
*   如您所见，`pop()`方法返回键值，同时从字典中删除整个键值对。
*   然而，应该注意的是，当键不在`dict`对象中时，`pop()`方法可以选择一个默认参数，该参数成为返回值，如下所示。注意，当我们没有指定默认值并且`dict`没有指定的键时，就会引发`KeyError`。

除了`pop()`方法，我们还可以使用`popitem()`方法破坏性地迭代一个字典。假设我们有与上面讨论的相同的用例。服务员不会得到小费，经理会叫他们的名字来分发小费。相关代码如下所示:

字典的 popitem()

*   `popitem()`返回的不是键值对，而是键值对。每次函数调用后，该对被删除。
*   如果您检查打印输出，您会发现弹出的顺序遵循 LIFO(后进先出)原则。
*   请注意，这个方法会在字典为空时引发一个`KeyError`，如下所示。因此，在调用这个方法之前，使用一个`while`循环来确保字典不为空是很重要的。

```
>>> tips_all_dispensed = {}
>>> tips_all_dispensed.popitem()
Traceback (most recent call last):
  File "<input>", line 1, in <module>
KeyError: 'popitem(): dictionary is empty'
```

# 结论

在本文中，我们回顾了在 Python 中使用字典的五个有用的技巧。如你所见，这些提示并不复杂。然而，掌握它们将使 Python 字典成为您项目中更强大的工具。

感谢阅读。