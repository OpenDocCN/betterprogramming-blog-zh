<html>
<head>
<title>How to Write Effects for Actions in NgRx Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在NgRx数据中编写动作效果</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-effects-for-actions-in-ngrx-data-214c93869758?source=collection_archive---------7-----------------------#2020-07-29">https://betterprogramming.pub/write-effects-for-actions-in-ngrx-data-214c93869758?source=collection_archive---------7-----------------------#2020-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9f53" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">动态拦截@ngrx/data请求</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/877b61051d830cf179de02a0f0fa7fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiAVAcwZ_Lxzz8Po8uy56A.png"/></div></div></figure><p id="233a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从一个框架入手，解决了很多问题；有些从一开始就很难学。然而，我们甚至可以比在<code class="fe ln lo lp lq b"><a class="ae lr" href="https://en.wikipedia.org/wiki/Vanilla_software" rel="noopener ugc nofollow" target="_blank">vanilla</a></code>模式下更快地构建许多东西。事实上，我几乎在使用<code class="fe ln lo lp lq b"><a class="ae lr" href="https://ngrx.io/" rel="noopener ugc nofollow" target="_blank">NgRx</a></code>之前就使用了<code class="fe ln lo lp lq b"><a class="ae lr" href="https://ngrx.io/guide/data" rel="noopener ugc nofollow" target="_blank">NgRx Data</a></code>。</p><p id="831f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我要告诉你我遇到一个问题的经历——我很长时间都找不到解决方案。</p><p id="413f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但在此之前，我们还将学习如何:</p><ul class=""><li id="6409" class="ls lt iq kt b ku kv kx ky la lu le lv li lw lm lx ly lz ma bi translated">在NgRx数据中创建一个虚拟项目，并且</li><li id="256d" class="ls lt iq kt b ku mb kx mc la md le me li mf lm lx ly lz ma bi translated">自定义NgRx数据中的URL。</li></ul><p id="ceb3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后来看看如何拦截原生NgRx数据动作——对点火效果的请求。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="3c6d" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">介绍</h1><p id="885a" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">Angular和NGRX团队完成了出色的工作；然而，你知道医生有时...</p><p id="d13c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不管怎样，事实是NgRx数据使得通过后端的<code class="fe ln lo lp lq b"><a class="ae lr" href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" rel="noopener ugc nofollow" target="_blank">CRUD</a></code>通信变得困难。我们节省了大量的时间和精力，但这是有代价的。这是你请求的<code class="fe ln lo lp lq b"><a class="ae lr" href="https://medium.com/@stevenpcurtis.sc/rest-vs-crud-ca5522bf3fc3" rel="noopener">REST</a></code>动词的规范化，也是到达你后端的URL路由的规范化。就是这样；挺简单，挺标准。</p><p id="98ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我关于<a class="ae lr" href="https://stackoverflow.com/questions/61634055/how-do-i-write-effects-for-actions-in-ngrx-data" rel="noopener ugc nofollow" target="_blank"> StackOverFlow </a>的问题:</p><blockquote class="nk nl nm"><p id="c355" class="kr ks nn kt b ku kv jr kw kx ky ju kz no lb lc ld np lf lg lh nq lj lk ll lm ij bi translated">“如何在ngrx/data中为“本机”动作编写效果？</p><p id="aa89" class="kr ks nn kt b ku kv jr kw kx ky ju kz no lb lc ld np lf lg lh nq lj lk ll lm ij bi translated">我知道ngrx/data的创建是为了尽可能地去除动作、选择器、效果、减少器，因此减少了样板文件。但是，应该有一种方法为NgRx数据创建效果。"</p></blockquote><p id="391d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我用另一种方式解释。对于我的项目，我需要监听NgRx数据操作，例如，<a class="ae lr" href="https://ngrx.io/api/data/EntityOp#QUERY_ALL" rel="noopener ugc nofollow" target="_blank">QUERY _ ALL:' @ NgRx/data/QUERY-ALL '</a>或<a class="ae lr" href="https://ngrx.io/api/data/EntityOp#QUERY_ALL_SUCCESS" rel="noopener ugc nofollow" target="_blank">QUERY _ ALL _ SUCCESS:' @ NgRx/data/QUERY-ALL/SUCCESS '</a>，或其他。</p><p id="2b9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">存在类似的东西吗？</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="8985" class="nv mo iq lq b gy nw nx l ny nz"><strong class="lq ir">fooNgrxDataEffectForQueryLoad</strong>$ = createEffect(() =&gt;<br/>            this.actions$<br/>                .pipe(<br/>                    ofType(('<strong class="lq ir">FooActionDispatchedByNgRxData</strong>')),</span></pre><p id="5c74" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，上面的<strong class="kt ir">代码</strong>会不会<strong class="kt ir">不起作用，</strong>也没人告诉我一个方法来动态捕捉这些自动请求(NgRx Data<strong class="kt ir"><em class="nn">Actions</em></strong>)对编写<strong class="kt ir"> <em class="nn">的影响。我没有通过谷歌或者StackOverFlow找到任何东西。</em></strong></p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="4611" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">虚拟NgRx数据项目</h1><p id="f815" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">我们需要一个项目，通过一个实际的例子来应用我们的概念，并实现我们脑海中的所有想法。</p><p id="dfee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看看这个网站，它为我们提供了一个简单的假rest API。是的，我们不需要构建后端！</p><div class="oa ob gp gr oc od"><a href="https://jsonplaceholder.typicode.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">JSONPlaceholder</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">JSONPlaceholder是一个免费的在线REST API，只要你需要一些假数据，就可以使用它。对于教程来说很棒…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">jsonplaceholder.typicode.com</p></div></div><div class="om l"><div class="on l oo op oq om or kp od"/></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1becbffd757a9a4d786949c27508a06a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*opcEYAsmcpY97wkqF6wh4w.png"/></div></div></figure><p id="f245" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们今天的候选人是一个帖子列表，这都是关于API和后端的。</p><h2 id="fe06" class="nv mo iq bd mp os ot dn mt ou ov dp mx la ow ox mz le oy oz nb li pa pb nd pc bi translated">定义实体</h2><p id="a1ba" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">现在，让我们用NgRx数据开始聚会…</p><p id="cd39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用<strong class="kt ir"> <em class="nn">帖子</em> </strong> <em class="nn">，</em>，所以我们要做的第一件事就是定义实体…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/afbcba6bc0134759b25a7baed436c9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-3MjIws1ScKuotMNlznPw.png"/></div></div></figure><p id="9553" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">interfaces.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="1c3a" class="nv mo iq lq b gy nw nx l ny nz">export default interface <strong class="lq ir">Post</strong> {<br/>userId: number;<br/>id: number;<br/>title: string;<br/>body: string;<br/>}</span></pre><p id="892f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们对NgRx数据说要使用哪些实体:</p><p id="91de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">entity.component.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="d9d6" class="nv mo iq lq b gy nw nx l ny nz">import { EntityMetadataMap } from '@ngrx/data';</span><span id="cd92" class="nv mo iq lq b gy pe nx l ny nz">const entityMetadata: EntityMetadataMap = {<br/>    <strong class="lq ir">Post</strong>: {}<br/>};</span><span id="8838" class="nv mo iq lq b gy pe nx l ny nz">export const <strong class="lq ir">entityConfig</strong> = {<br/>    entityMetadata<br/>};</span></pre><h2 id="83d6" class="nv mo iq bd mp os ot dn mt ou ov dp mx la ow ox mz le oy oz nb li pa pb nd pc bi translated">注册实体存储</h2><p id="afbe" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">只是为了正确加载NgRx数据:</p><p id="3fc0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">app.module.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="870f" class="nv mo iq lq b gy nw nx l ny nz">...</span><span id="e8d0" class="nv mo iq lq b gy pe nx l ny nz">@NgModule({<br/>     imports: [<br/>     HttpClientModule,<br/>     StoreModule.forRoot({}),<br/>     EffectsModule.forRoot([]),<br/>     EntityDataModule.forRoot(<strong class="lq ir">entityConfig</strong>)<br/>    ]<br/>})</span><span id="048e" class="nv mo iq lq b gy pe nx l ny nz">...</span></pre><h2 id="dd4b" class="nv mo iq bd mp os ot dn mt ou ov dp mx la ow ox mz le oy oz nb li pa pb nd pc bi translated">创建实体数据服务</h2><p id="9e33" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">创建一个服务，完成与API通信的所有神奇工作:</p><p id="7dfd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">post.service.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="21f9" class="nv mo iq lq b gy nw nx l ny nz">import { Injectable } from '@angular/core';<br/>import {EntityCollectionServiceBase,EntityCollectionServiceElementsFactory} from '@ngrx/data';<br/>import Post from './interfaces';</span><span id="a17e" class="nv mo iq lq b gy pe nx l ny nz">@Injectable({ providedIn: 'root' })<br/>export class <strong class="lq ir">PostService</strong> extends <strong class="lq ir">EntityCollectionServiceBase</strong>&lt;<strong class="lq ir">Post</strong>&gt; {</span><span id="c7f9" class="nv mo iq lq b gy pe nx l ny nz">constructor(serviceElementsFactory:  <strong class="lq ir">EntityCollectionServiceElementsFactory</strong>) {<br/>  super('<strong class="lq ir">Post</strong>', serviceElementsFactory);<br/>}</span></pre><h2 id="8178" class="nv mo iq bd mp os ot dn mt ou ov dp mx la ow ox mz le oy oz nb li pa pb nd pc bi translated">在组件中使用NgRx数据</h2><p id="693e" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">现在来看智能<a class="ae lr" href="https://medium.com/@michelestieven/components-stateful-stateless-dumb-and-smart-2847dd4092f2" rel="noopener">和非智能</a>组件。这是我们的智能组件，包含检索数据的所有逻辑，以及NgRx数据:</p><p id="178a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">post-list.component.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="3744" class="nv mo iq lq b gy nw nx l ny nz">...</span><span id="2cb2" class="nv mo iq lq b gy pe nx l ny nz">export class PostListComponent {</span><span id="2c3a" class="nv mo iq lq b gy pe nx l ny nz">posts$: Observable&lt;Post[]&gt;;</span><span id="e3e5" class="nv mo iq lq b gy pe nx l ny nz">constructor(private postService: PostService) {<br/>   <strong class="lq ir">this.posts$ = postService.entities$;</strong><br/>}</span><span id="649a" class="nv mo iq lq b gy pe nx l ny nz">ngOnInit() {<br/>   <strong class="lq ir">this.getPosts()</strong>;<br/>}</span><span id="ff84" class="nv mo iq lq b gy pe nx l ny nz">getPosts() {<br/>   <strong class="lq ir">this.postService.getAll()</strong>;<br/>}<br/><br/>...</span></pre><p id="f2af" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">post-list.component.html</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="2c88" class="nv mo iq lq b gy nw nx l ny nz">&lt;ng-container <strong class="lq ir">*ngFor</strong>="let post of <strong class="lq ir">posts$</strong> | <strong class="lq ir">async</strong>"&gt;<br/>     &lt;<strong class="lq ir">post</strong> <strong class="lq ir">[post]="post"</strong>&gt;&lt;/<strong class="lq ir">post</strong>&gt;<br/>&lt;/ng-container&gt;<br/></span></pre><p id="1a5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的哑巴:</p><p id="d54f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">post.component.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="2b47" class="nv mo iq lq b gy nw nx l ny nz">export class <strong class="lq ir">PostComponent</strong>  {<br/>  <strong class="lq ir">@Input()</strong> post: <strong class="lq ir">Post</strong>;</span></pre><p id="751c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">post.component.html</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="efd6" class="nv mo iq lq b gy nw nx l ny nz">&lt;p class="title"&gt;{{ <strong class="lq ir">post.id</strong> }}: {{ <strong class="lq ir">post.title</strong> }}&lt;/p&gt;<br/>&lt;img [src]="'https://picsum.photos/id/'+<strong class="lq ir">post.userId</strong>+'/200/200'" alt="Avatar"&gt;<br/>&lt;p class="body"&gt;{{ <strong class="lq ir">post.body</strong> }}&lt;/p&gt;</span></pre><p id="914c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注:我们在与https://picsum.photos/的帖子中通过他们的id随机排列照片，只是为了让它更真实。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="d723" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">自定义URL</h1><p id="6d16" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">我们的jsonplaceholder后端API在路由方面不符合<a class="ae lr" href="https://ngrx.io/guide/data/entity-dataservice#configure-the-defaultdataservice" rel="noopener ugc nofollow" target="_blank"> NgRx数据默认配置</a>，那么定制:</p><p id="c756" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">app.module.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="4270" class="nv mo iq lq b gy nw nx l ny nz">const defaultDataServiceConfig: DefaultDataServiceConfig = {<br/>    root: 'https://jsonplaceholder.typicode.com/'<br/>}</span><span id="4841" class="nv mo iq lq b gy pe nx l ny nz">...</span><span id="5f9e" class="nv mo iq lq b gy pe nx l ny nz">@NgModule({</span><span id="8358" class="nv mo iq lq b gy pe nx l ny nz">imports: [</span><span id="cbde" class="nv mo iq lq b gy pe nx l ny nz">...</span><span id="ec0a" class="nv mo iq lq b gy pe nx l ny nz">providers: [{ provide: DefaultDataServiceConfig, <br/>useValue: defaultDataServiceConfig }]</span><span id="e0a8" class="nv mo iq lq b gy pe nx l ny nz">...</span></pre><p id="cddb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还做了一些其他的小工作来美化我们的帖子列表，让它更完美。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="b61e" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">拦截动作</h1><h2 id="a851" class="nv mo iq bd mp os ot dn mt ou ov dp mx la ow ox mz le oy oz nb li pa pb nd pc bi translated">在NgRx数据中是什么样子的？</h2><p id="4a60" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">还记得我们在<code class="fe ln lo lp lq b">post-list.component.ts</code>做什么吗？</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="9057" class="nv mo iq lq b gy nw nx l ny nz"><strong class="lq ir">this.posts$ = postService.entities$;</strong><br/>...</span><span id="0ee3" class="nv mo iq lq b gy pe nx l ny nz"><strong class="lq ir">this.postService.getAll()</strong>;</span></pre><p id="974f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这几行代码通过几个动作激活了它们背后的所有魔力:</p><ul class=""><li id="b294" class="ls lt iq kt b ku kv kx ky la lu le lv li lw lm lx ly lz ma bi translated"><a class="ae lr" href="https://ngrx.io/api/data/EntityOp#QUERY_ALL" rel="noopener ugc nofollow" target="_blank">QUERY _ ALL:' @ ngrx/data/QUERY-ALL '</a></li><li id="c96d" class="ls lt iq kt b ku mb kx mc la md le me li mf lm lx ly lz ma bi translated"><a class="ae lr" href="https://ngrx.io/api/data/EntityOp#QUERY_ALL_SUCCESS" rel="noopener ugc nofollow" target="_blank">QUERY _ ALL _ SUCCESS:' @ ngrx/data/QUERY-ALL/SUCCESS</a></li></ul><p id="b044" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一个动作<strong class="kt ir">【发布】ngrx/data/query-all: </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pf"><img src="../Images/97645b55a2f294d8a5128e862888c690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXtPIwbi_K4kjunNiNYyyw.png"/></div></div></figure><p id="4aed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">发送请求:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/8a8e058e68125df562d365d5b251d853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RXlqkDJV-n6vwe2kqkgJYA.png"/></div></div></figure><p id="a89a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要检索所有数据，请使用:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/568c37d342d9a61814cfbb5ed523eb96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dim_xC3vSC1aL2Su14pz2g.png"/></div></div></figure><p id="b8c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">他们的回答是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/fafa5f3e3302fee6b6b4ac283b162788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VtX-OaJYoFaN4fH0N4uG0w.png"/></div></div></figure><p id="e160" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">UI中的结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/315fb49d79abd1f316c4c501505d9cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-h-n-pPifCuhHuIvj8qlEA.png"/></div></div></figure><h2 id="1d5a" class="nv mo iq bd mp os ot dn mt ou ov dp mx la ow ox mz le oy oz nb li pa pb nd pc bi translated">WoW NgRx效果</h2><p id="7949" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">最后，我们创建这个项目的原因是:</p><p id="2451" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">post.effects.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="d25b" class="nv mo iq lq b gy nw nx l ny nz">...</span><span id="8e84" class="nv mo iq lq b gy pe nx l ny nz">@Injectable()<br/>export class <strong class="lq ir">PostEffects</strong> {</span><span id="bb3e" class="nv mo iq lq b gy pe nx l ny nz"><strong class="lq ir">ngrxDataEffectForQueryLoad$</strong> = createEffect( </span><span id="d03c" class="nv mo iq lq b gy pe nx l ny nz">() =&gt;this.actions$.pipe(</span><span id="6cbf" class="nv mo iq lq b gy pe nx l ny nz"><strong class="lq ir">ofEntityType("Post"),<br/>ofEntityOp([EntityOp.QUERY_ALL_SUCCESS]),</strong></span><span id="b754" class="nv mo iq lq b gy pe nx l ny nz">tap(action =&gt;</span><span id="ed63" class="nv mo iq lq b gy pe nx l ny nz">console.log("%c%s","color: green; background: yellow; font-size: 24px;","Your 🎸🎸🎸 WOW 😲😲😲 Effect here 🚀🚀🚀!"))),</span><span id="83a8" class="nv mo iq lq b gy pe nx l ny nz">{ dispatch: false }</span><span id="957e" class="nv mo iq lq b gy pe nx l ny nz">);</span><span id="d618" class="nv mo iq lq b gy pe nx l ny nz">...</span></pre><p id="1be6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不要忘记在应用程序中注册它们:</p><p id="e829" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">app.module.ts</code></p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="0d38" class="nv mo iq lq b gy nw nx l ny nz">...</span><span id="5119" class="nv mo iq lq b gy pe nx l ny nz">@NgModule({<br/>imports: [</span><span id="c2a1" class="nv mo iq lq b gy pe nx l ny nz">...</span><span id="fe75" class="nv mo iq lq b gy pe nx l ny nz"><strong class="lq ir">EffectsModule.forRoot([PostEffects])</strong>,<br/>],</span><span id="1349" class="nv mo iq lq b gy pe nx l ny nz">...</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/c08c70ab9764ecd26e5e5fe0374f5c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YChJVVj0CNGIawRlfWClBg.png"/></div></div><p class="pl pm gj gh gi pn po bd b be z dk translated">现在，我们在控制台上看到它。</p></figure><p id="0cb1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了过滤Post实体和QUERY_ALL_SUCCESS操作之外，并不十分困难——不需要解释太多。请记住，您也可以对所有的<a class="ae lr" href="https://ngrx.io/api/data/EntityOp" rel="noopener ugc nofollow" target="_blank">https://ngrx.io/api/data/EntityOp</a>操作执行此操作。</p><p id="095d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个很好的技巧，如果你不读这篇文章或在其他地方看到它，你可能很难发现它。</p><p id="dc7b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你所看到的，我已经为你留下了WoW效果部分，我不想让文章变得更长…现在，你可以从NgRx数据动作中发射效果了！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pp pq l"/></div></figure><p id="2577" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">⤣ <em class="nn">回购至此(</em><a class="ae lr" href="https://stackblitz.com/edit/angular-ivy-ngrx-data-effects4actions" rel="noopener ugc nofollow" target="_blank"><em class="nn">stack blitz</em></a><em class="nn">或</em><a class="ae lr" href="https://github.com/ackuser/angular-ivy-ngrx-data-effects4actions/tree/develop" rel="noopener ugc nofollow" target="_blank"><em class="nn">github</em></a><em class="nn">上支开拓)</em> ⤤</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/6aa65b3df9a7fa8093f02e51f2b17778.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/0*qBk35Y0jVWCDtGzv.png"/></div></figure><h1 id="ac52" class="mn mo iq bd mp mq ps ms mt mu pt mw mx jw pu jx mz jz pv ka nb kc pw kd nd ne bi translated">结论</h1><p id="2c65" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">我喜欢NgRx数据。如果你是这方面的新手，现在你知道如何用NgRx数据快速实现一个项目。</p><p id="c671" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，如果你已经知道NgRx数据，但是你从来没有见过如何从NgRx数据<em class="nn">动作/请求、</em>中触发<em class="nn">效果/魔法</em>，或者你在这方面遇到了困难，我希望这篇文章对你有所帮助。</p><p id="0665" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我总是喜欢推荐别人有帮助的文章:</p><ul class=""><li id="8bf5" class="ls lt iq kt b ku kv kx ky la lu le lv li lw lm lx ly lz ma bi translated"><a class="ae lr" href="https://medium.com/@felipenoratolacerda/super-fast-stateful-crud-a-practical-guide-to-ngrx-data-9aaf89186348" rel="noopener">超快速状态CRUD——NgRx数据实用指南</a></li><li id="4e7d" class="ls lt iq kt b ku mb kx mc la md le me li mf lm lx ly lz ma bi translated"><a class="ae lr" href="https://medium.com/better-programming/ngrx-data-will-change-your-life-8528736e4fc0" rel="noopener"> @ngrx/data将改变你的人生</a></li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="1061" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">后续步骤</h1><p id="98a4" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">我们想🎸NgRx，所以请继续关注其他特性和定制！</p><p id="ba99" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>