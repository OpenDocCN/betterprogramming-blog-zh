<html>
<head>
<title>Catch ‘Em All Chrome Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抓住他们所有的铬扩展</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/catch-em-all-chrome-extension-d51a8b6813fd?source=collection_archive---------19-----------------------#2019-09-19">https://betterprogramming.pub/catch-em-all-chrome-extension-d51a8b6813fd?source=collection_archive---------19-----------------------#2019-09-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6e6a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习如何制作你的第一个Chrome扩展——第2部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/83d6e31e283da2014b9cb114c0b3badc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrTuPEhXkQDJxlVex4Y4Ow.png"/></div></div></figure><p id="0c5c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文是学习如何构建浏览器扩展的两篇文章的第二部分。第一部分在这里有:<a class="ae ln" href="https://medium.com/better-programming/replace-everything-with-pikachu-chrome-extension-de40497c7f5a" rel="noopener"> <em class="lo">把一切都换成皮卡丘Chrome扩展</em> </a>。</p><p id="ba15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一篇文章深入解释了什么是浏览器扩展，它有什么用，以及它的基本组件是什么。</p><p id="da80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这篇文章不是那个。我们将从头到尾编码。我们将使用普通的JavaScript、HTML和CSS创建一个遭遇口袋妖怪的浏览器扩展。</p><p id="3336" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不要让这篇文章的长度成为衡量难度的标准。我用超级慢的方式写了很多图片。创建扩展的过程比您想象的要简单。</p><p id="23cc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的路线图:</p><ol class=""><li id="0047" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm lu lv lw lx bi translated">设置Chrome扩展以显示弹出窗口。</li><li id="48e3" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">在后台脚本中获取口袋妖怪。</li><li id="7bb9" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">在弹出窗口中显示获取的口袋妖怪。</li><li id="aecc" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">抓住他们！(使用localStorage)。</li></ol><p id="f253" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果一切按计划进行，我们就能做到:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="c2dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，让我们开始吧！</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="4465" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">设置</h1><p id="142b" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">注意:如果您对这个初始设置有疑问，并且还没有阅读上一篇文章，请回去看看。这第一段节奏有点快。</p><p id="9d17" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建新的目录和基本清单。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="c09c" class="no mn iq nk b gy np nq l nr ns">$ mkdir pokeCatcherExtension <br/>$ cd pokeCatcherExtension<br/>$ touch manifest.json</span><span id="d230" class="no mn iq nk b gy nt nq l nr ns">// Within manifest.json =&gt; </span><span id="6e71" class="no mn iq nk b gy nt nq l nr ns">{<br/>  "name": "Poke Catcher", <br/>  "version": "1.0", <br/>  "manifest_version": 2<br/>}</span></pre><p id="706c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:Chrome要求你使用清单版本2来加载你的扩展。莫名其妙，但无害。</p><p id="10b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您的目录应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/0b9d975c0217ff77f742607d0a3429d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*dXNR5MVWxlbcAzDZ4-DQtA.png"/></div></div></figure><p id="458b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">带一个正方形进来。用作我们扩展图标的png图像:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/7ee06336a665faea7ac2f5b41e08a6da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*mJO4N4fYpEO0i5Q_qc15ew.png"/></div></figure><p id="595f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将此图像包含在清单中…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/42a161f62f98df73c50568ca24ae2d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*irDs3OrzcJLKh_hSWEqeAw.png"/></div></figure><p id="92c1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建一个<code class="fe nx ny nz nk b">background.js</code>文件来处理浏览器事件。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="4414" class="no mn iq nk b gy np nq l nr ns">$ touch background.js</span><span id="fbd3" class="no mn iq nk b gy nt nq l nr ns">Within background.js =&gt;</span><span id="358c" class="no mn iq nk b gy nt nq l nr ns">console.log('background script runnin runnin and...')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/f10b8cf973d04c82e164d5948faac529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SJ4quZKPjBCEftE3FEagqQ.png"/></div></div></figure><p id="83ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的清单中包含新文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/925bdb2c4f0c337cdfbcd12654c5ab6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*4xURNNIIfmTdcVLMi2KKjw.png"/></div></figure><p id="222d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在准备将这段代码作为扩展加载到chrome中。导航到URL <code class="fe nx ny nz nk b">chrome://extensions</code>。应该会出现下面的页面。确保<em class="lo">显影模式</em>(右上)已打开。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/c33169b1862c61354627aa0f9fd8a414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLHlseUOf1dGVteILb4--w.png"/></div></div></figure><p id="2946" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击<em class="lo"> Load unpacked </em>(左上)，选择刚刚创建的目录。新的扩展卡应该出现在您的扩展管理页面中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/dea0583f9273dcf4afcfda3ce7a387e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*QYUUcaLHom2E-OP_Eh4ChA.png"/></div></figure><p id="454f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击<em class="lo">背景页</em>进入背景页控制台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/605e16a3d0b8a845e9263bf8de7e31a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*m9A3Pm305zXQ3pI6Thyb8Q.png"/></div></figure><p id="5a8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">检查你的工具栏，在最右边的位置看到一个扑克球图标…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/e3d03d836e6c9a3c1c90f1edb33b2ca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*1VkzjSKlrrWbubuIZBbrKQ.png"/></div></figure><p id="de7a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这三个结果都是你的，那么你就可以运行了！</p><p id="797f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在第2部分中的目标是<em class="lo">单击Pokeball图标来改变页面上的图像元素，</em>我们在本文中的目标是显示一个弹出页面。</p><p id="e7db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们现在创建该页面。随便你怎么称呼它。<code class="fe nx ny nz nk b">popup.html</code>好听，不言自明。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="75e0" class="no mn iq nk b gy np nq l nr ns">$ touch popup.html</span><span id="1106" class="no mn iq nk b gy nt nq l nr ns">// Within popup.html<br/> <br/>&lt;h1&gt; You done made it. &lt;/h1&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/2936231ce3d8d99cc33fb1acdae48242.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*VPoBOfSxt0dlM8JmdsNsBw.png"/></div></figure><p id="7762" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更新我们的清单，以便在单击扩展图标时默认显示这个新的HTML页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/65ec11a43495e89fd770ca2e8aeb8417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*eWBHh3AxNamVU9y06cWMcg.png"/></div></figure><p id="4b54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Chrome要求您在编写清单时使用它们特定的语法。有关问题和(最好是)澄清，请查看<a class="ae ln" href="https://developer.chrome.com/apps/manifest" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="1985" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">重要提示</strong>:因为我们对扩展的结构进行了修改，所以返回到扩展管理页面(chrome://extensions)并重新加载<code class="fe nx ny nz nk b">pokeCatcherExtension</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/33feca1d912c45c30aae3b03b1d50c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:66/format:webp/1*9zDjH2MJMtJ2n1_uUIw6KA.png"/></div></figure><p id="4b5c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你猜怎么着？你刚刚做了一个Chrome扩展弹出窗口。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/23517d0299b240d1263b25b34a249dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*tbITHwFEk-wktpP3mrmolw.png"/></div></figure><p id="e591" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们进入下一部分之前，让我们风格化我们的<code class="fe nx ny nz nk b">popup.html</code>并添加一个<a class="ae ln" href="https://www.google.com/search?q=pokemon+logo&amp;safe=active&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwiw9YnotNjkAhVQKawKHYsHB4QQ_AUIEigB&amp;biw=1181&amp;bih=699#imgrc=dG7X4B1-nBEj4M:" rel="noopener ugc nofollow" target="_blank">口袋妖怪标志</a>的图像:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/f835bfcb52eb997d6179b87d8c68141b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EZ0DziNxl9kBBlJAgoRc_Q.png"/></div></div></figure><p id="7f28" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建您的样式表。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="58e4" class="no mn iq nk b gy np nq l nr ns">$ touch style.css</span></pre><p id="afc7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加这些基本规则(随意发挥，用你的风格变得时髦——为了简单起见，我将保持简单)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/2b1c7cc8d04aa8f8aa0844fdb73093e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*G_2u9ECoBVQ3tccj8rFXgQ.png"/></div></figure><p id="abc3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于我们没有改变扩展的底层结构(即清单没有改变，只有样式改变了)，我们<em class="lo">不需要</em>重新加载我们的扩展。</p><p id="ddf3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以直接回到我们的图标，点击查看这个漂亮的空白页…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/065d17c305824ab0d34df786cc4f3442.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*mmwL4PIcah-l0Pmn-ZtWdQ.png"/></div></figure><p id="48bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不错！我们现在有了一个运行的后台脚本和功能弹出窗口。继续下一个…</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="26c6" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">在后台获取口袋妖怪</h1><p id="60e9" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">在本节中，我们的第一个目标是在后台检索口袋妖怪。然后，我们将使用Chrome-Speak(也称为Chrome API)在每次加载新网页时检索一个新的口袋妖怪。</p><p id="3a26" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:在本文中，我将把Chrome API称为Chrome-Speak，因为它就是Chrome API。</p><h2 id="8007" class="no mn iq bd mo on oo dn ms op oq dp mw la or os my le ot ou na li ov ow nc ox bi translated">首先，获取</h2><p id="2c79" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">打开后台脚本开发人员控制台。提醒一下(我开始时经常忘记)，这个控制台可以通过导航到您的扩展管理器<code class="fe nx ny nz nk b">chrome://extensions</code>并点击<em class="lo">背景页面</em>来使用</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/c8dfd5ceec922e0a0622a742741e70b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*oPr1ZI6Qu-ZtaikKxP8dqQ.png"/></div></figure><p id="de60" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">控制台是练习抓取的好地方。在控制台中失败是最快且无害的。控制台获取是快速原型制作的最佳方式。</p><p id="56f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用世界闻名的<a class="ae ln" href="https://pokeapi.co/" rel="noopener ugc nofollow" target="_blank"> PokeAPI </a>来检索我们的口袋妖怪数据。检查一下，感受一下你能做什么(大量的)。</p><p id="6230" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将从获取皮卡丘开始…</p><p id="5314" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nx ny nz nk b">URL: https://pokeapi.co/api/v2/pokemon/pikachu</code></p><p id="3385" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是获取脚本，可以在我们的控制台中使用:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/8279aa65e901d4f22b6a85a00b08af6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*jGEETNyptMTMwxA6ANtNuw.png"/></div></figure><p id="78e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">新来的？提醒:我们正在访问一个网站<code class="fe nx ny nz nk b">pokeapi.co</code>，这个网站不是呈现一个网页，而是呈现一串信息。在这种情况下，这个特定的字符串将是皮卡丘的所有信息。<code class="fe nx ny nz nk b">.then()s</code>允许我们查看这些信息，然后在我们的应用程序中使用它们。</p><p id="da2e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按回车键。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/f4145542d5cc45f51247d8ac59f91a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*9LLXyoKXAQKbw6os8tRxaQ.png"/></div></figure><p id="b4d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很好。通话成功。现在深入研究返回的对象并检索您想要的任何信息。注意，这个物体可不是闹着玩的…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/2cec36119a3a251a00ff79975772f7fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJBOEUYSQoEc8Za4gIRQ0A.png"/></div></div></figure><p id="ab91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">谢天谢地，组织得很好。我们想要口袋妖怪的名字和一个小图像。你会看到<code class="fe nx ny nz nk b">name</code>可以这样找到…</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="614d" class="no mn iq nk b gy np nq l nr ns">returnedObject.forms[0].name</span></pre><p id="b5e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意<code class="fe nx ny nz nk b">forms</code>是一个包含单个对象的数组。于是有了<code class="fe nx ny nz nk b">[0]</code>。</p><p id="9977" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以发现<em class="lo">图像</em>像这样:</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="ef00" class="no mn iq nk b gy np nq l nr ns">returnedObject.sprites.front_default</span></pre><p id="3310" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们应该在控制台上测试我们的理论。将返回的对象保存为全局变量(通过右键单击)并执行这些方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/3fc8b40773bce876bfbeb48c7054cfea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXai8NxB72GM6DKkOy6k2g.png"/></div></div></figure><p id="dd57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们<em class="lo">存储为全局变量</em>时，chrome自动生成引用对象的<code class="fe nx ny nz nk b">temp1</code>。使用<code class="fe nx ny nz nk b">temp1</code>来测试这些方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/de0bc3c8968df8a9d57cfbf7c4eae94e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dagB5_GdgThqmYIA1AvOBg.png"/></div></div></figure><p id="36e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不错！我们有名称(红色)和网址(下划线)…请随意检查该网址。你应该在另一端找到你知道的人:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/a2629bab35963983d552d7bb63b49094.png" data-original-src="https://miro.medium.com/v2/resize:fit:230/format:webp/1*gsbBn9Rt3qDrI6GXqrW0ZQ.png"/></div></div></figure><p id="93a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们知道我们正在获取正确的数据，让我们将这些行插入我们的后台脚本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pf"><img src="../Images/791d3f6996c9855a30989daecca7bf81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-clTpOpMZpyhf6cIw59LQ.png"/></div></div></figure><p id="57ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在管理页面中重新加载您的扩展，以见证您的工作的全部效果。当您返回到后台页面控制台时，您应该会看到我们刚刚练习检索的完整对象…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/7a02e3203a5fa487f62a4367a1ab8e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*R_kRBdn3bBYEKjzHzKqY3Q.png"/></div></figure><p id="b4a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们有了对象，让我们创建一个函数来记录我们检索到的口袋妖怪的名称和图像…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/3d8fe0839b25f46217102b15577c490b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d8TVssRq4ebo4ZBq9CfXJQ.png"/></div></div></figure><p id="a838" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">…再次重新加载您的扩展，返回控制台，您应该会看到…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/215c188a607d58cfc8c29a2eeb01919e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*3PRTJ9s5lUIgtrwdWBqr7w.png"/></div></figure><p id="e9b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不错！那是一个合适的选择。</p><h2 id="8de7" class="no mn iq bd mo on oo dn ms op oq dp mw la or os my le ot ou na li ov ow nc ox bi translated">在页面加载时获取新的口袋妖怪</h2><p id="a513" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">这个部分的第二阶段是在每次我们加载一个新页面<em class="lo">时执行一个新的获取<em class="lo">。为此，我们将使用Chrome-Speak。</em></em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/8fbfcad17613f9d09ffb5c6832ff288d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*THA3wl-LfLAh2LNDpNuYnw.png"/></div></div></figure><p id="c139" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">翻译:“chrome”给我当前窗口的“标签”，并“监听”它们何时被“更新”(重新加载)——当其中一个被更新时，请记录当前标签的“url”。</p><p id="5809" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重要提示:你应该得到一个错误！</p><p id="e796" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有一个重要的步骤我们还没有采取，它涉及到我们的清单。</p><p id="184b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">赋予一个扩展命令标签发生什么的权力不是一件小事。Chrome要求我们明确允许访问<code class="fe nx ny nz nk b">tabs.onUpdated()</code>函数。</p><p id="dd3e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像这样更新您的清单:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/f47d42fc0ef1d480a02e7a95140a39f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*mXDx1GUAKaksYnVPshae-w.png"/></div></figure><p id="3e83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，重新加载扩展，加载一个网页，打开您的后台页面控制台，您应该会看到类似这样的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/d643ae975e4dd56e90709b20612d83d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*9_77dtPL7i1OF8ESIXhoFg.png"/></div></figure><p id="6db8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是谷歌！加载一个新网页，并查看记录到控制台的新URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/e5628f940d0c143789769860795122c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*BFkVZdASCkxZDke4OCInzQ.png"/></div></figure><p id="22c9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不错！</p><p id="9ef4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们这一部分的目标首先是获取一个口袋妖怪，然后在我们加载的每个新页面上执行该操作。我们已经构建了等式的两边(我们的获取和我们的页面侦听器)。让我们把它们结合起来。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/b876f3eefeb0feb70a47beb41d4a435e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zIJurFOTL_ef6zRwejrbPw.png"/></div></div></figure><p id="9bc2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在扩展管理页面重新加载你的扩展，浏览几个网页。你的控制台应该充满了皮卡丘获取信息…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/77f347383fd4d86b4d5b94c1f329bec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*C4zY9JXbjHdPI721Q_g9MQ.png"/></div></figure><p id="8e22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">非常好。但是，尽管这很酷，我们不想在我们访问的每个页面上都看到皮卡丘。我们想要一个随机的口袋妖怪。让我们编写一个快速函数来从PokeAPI中检索任意一个口袋妖怪。</p><p id="1372" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们知道总共有807个口袋妖怪可供选择。快速浏览一下PokeAPI文档，我们了解到可以通过ID而不是名称进行搜索。即<code class="fe nx ny nz nk b">/api/v2/pokemon/pikachu</code>与<code class="fe nx ny nz nk b">api/v2/pokemon/25</code>相同。</p><p id="0509" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">随意创建一个从1到807的随机数生成器。我的心属于最初的151口袋妖怪，所以我将把我的随机数生成器限制为1到151之间的数字。</p><p id="c4bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们将把这个数字插入到fetch调用的URL的最后一个空格中…</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="2e97" class="no mn iq nk b gy np nq l nr ns">Random number generator: </span><span id="4e2d" class="no mn iq nk b gy nt nq l nr ns">const pokemonId = Math.ceil(Math.random() * 151)</span></pre><p id="1670" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将<code class="fe nx ny nz nk b">pokemonId</code>插入我们的获取并将其插入获取URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/794ee99043a3adf5699aae9b86e452dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gO_90vvRu4Up_-5k6QkAWg.png"/></div></div></figure><p id="c635" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重新加载你的扩展和网上冲浪一点。你应该看到背景脚本每次都充满了新的口袋妖怪信息！！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/3b6f87c4d644739ad94044c5390f8d92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*HL1kD08gu_mK7eVjdBbCLw.png"/></div></figure><p id="4792" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你做到了，那就太好了！我们刚刚完成了这一部分的目标:在每个新访问的站点的背景脚本中获取新的口袋妖怪。下一步:获取弹出窗口中的信息。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="21a7" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">将口袋妖怪发送到弹出窗口</h1><p id="d528" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">在上一篇文章中，我们能够从后台脚本向内容脚本发送消息。我们不能在这里这样做。弹出窗口实际上并不存在，直到你点击图标并强制迷你扩展窗口存在。</p><p id="9af9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了向弹出窗口发送消息，我们必须从弹出窗口<em class="lo">调用<em class="lo">到</em>后台脚本。</em></p><p id="243d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是信息流:</p><ol class=""><li id="408a" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm lu lv lw lx bi translated">访问一个新的网页，后台脚本获取一个随机的口袋妖怪。</li><li id="fb55" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">将信息存储在可变变量中。</li><li id="1509" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">打开弹出窗口并调用存储的信息。</li><li id="70f5" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">后台脚本接收调用，并发回它存储的口袋妖怪。</li><li id="bc3d" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm lu lv lw lx bi translated">Popup收到口袋妖怪，并相应地改变它的外观。</li></ol><p id="f1d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们完成了上一部分中的第一个问题。让我们快速解决第二个问题。</p><h2 id="e570" class="no mn iq bd mo on oo dn ms op oq dp mw la or os my le ot ou na li ov ow nc ox bi translated">存储获取的口袋妖怪</h2><p id="b374" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">不要把我们的<code class="fe nx ny nz nk b">name</code>和<code class="fe nx ny nz nk b">imageUrl</code>登录到控制台，让我们创建两个不断被新的口袋妖怪填充和替换的变量。</p><p id="dcb1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(让我们也削减脂肪和摆脱我们的控制台日志…)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/8fca92c0f490e6ce3fedfb7ebfc1716d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ytX7LggKNlxbEczlprr3gQ.png"/></div></div></figure><p id="98e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重新加载您的扩展，然后加载一个新网页或重新加载当前网页，并检查这两个变量是否会随着您的浏览而改变。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/2ec647fb9e830065195cda2cfce8f658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*q9ODoJsf85sMwpRbngUWFA.png"/></div></figure><p id="d80b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很好。现在让我们来看看弹出窗口。</p><h2 id="2a76" class="no mn iq bd mo on oo dn ms op oq dp mw la or os my le ot ou na li ov ow nc ox bi translated">从弹出窗口呼叫口袋妖怪</h2><p id="f20a" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">您会注意到现在唯一与弹出菜单相关的文件是<code class="fe nx ny nz nk b">popup.html</code>。那不是逻辑的地方。让我们创建一个<code class="fe nx ny nz nk b">popup.js</code>文件，将它链接到我们的HTML，并用控制台日志测试它。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="acb7" class="no mn iq nk b gy np nq l nr ns">$ touch popup.js</span><span id="0dd5" class="no mn iq nk b gy nt nq l nr ns">// Within popup.js =&gt;</span><span id="9ecf" class="no mn iq nk b gy nt nq l nr ns">console.log('popup script runnin runnin and...')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/4b7dfae87f634964f6940ad03a18eaab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lNfp-wzIo6EGuH2YkAr8Rw.png"/></div></div></figure><p id="0dde" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的HTML中包含新脚本…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/84adfc8ad550b8fefc706c703794a327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BA1O3sv5zeP6qjwo1UO5Tg.png"/></div></div></figure><p id="bd91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可能认为我们需要将这个脚本包含在我们的清单中。我们没有！</p><p id="0a33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这两者通过扩展的HTML页面间接相关。(与我们的样式表相同。)所以我们很好。Chrome只要知道<code class="fe nx ny nz nk b">popup.html</code>，就知道所有相关的样式表和脚本。</p><p id="110f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你现在已经出发了。单击扑克球图标。直接右键单击HTML并导航到<em class="lo"> inspect </em>以检索弹出窗口的开发人员控制台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/83fd959e907cd69e9d74d79e1fef252e.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*TW6nwdzPg6P4Dd_z_b1sRQ.png"/></div></figure><p id="2005" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将立即看到我们写的<code class="fe nx ny nz nk b">runnin runnin and…</code>日志…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/6913382402e95153cdfacd12289273f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAQI3_PR02TfuATtIvQvLg.png"/></div></div></figure><p id="75f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这意味着我们准备向后台脚本发送消息。为此，我们将使用一些Chrome语言。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/3cf51bd22a3a771e68c856627f4af073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yiYOpu1LyQjYH1blwnze6Q.png"/></div></div></figure><p id="0070" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">翻译过来就是:“chrome”，HTML页面一加载，弹出窗口就“运行”，“发送”一条“消息到后台脚本。</p><p id="d554" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该消息将是<code class="fe nx ny nz nk b">“Poke, please”</code>，如果您从后台脚本得到响应，运行函数<code class="fe nx ny nz nk b">logPokemon</code> <em class="lo">，</em>，该函数将控制台记录响应包含的任何消息。</p><p id="b9b5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们单击扩展图标，什么也不会发生。我们的弹出脚本需要来自后台脚本的<em class="lo">响应</em>。现在让我们创建这个响应。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pt"><img src="../Images/5c41a5d0dda57499fc6db006ca17c5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fxQjF8XW5iVt9ILxlAMA2g.png"/></div></div></figure><p id="8d4c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上一节中，我们创建了两个变量:<code class="fe nx ny nz nk b">name</code>和<code class="fe nx ny nz nk b">imageUrl</code>。为了在Chrome网络上整齐地传递这些值，我们必须在一个对象内发送它们。注意，我们创建了一个对象<code class="fe nx ny nz nk b">currentPokemon</code> <em class="lo"> </em>来实现这一点。</p><p id="cdcc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在前一篇文章中，我们已经使用了这种Chrome-Speak的确切形式。如果你需要翻译，就去找那篇文章。</p><p id="dc81" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重要的是，我们的后台脚本现在正在积极地监听消息。当它收到消息时，它将运行函数<code class="fe nx ny nz nk b">sendPokeBack</code><em class="lo"/>，将当前的口袋妖怪对象发送回发送者。</p><p id="208e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">整个后台脚本现在看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pu"><img src="../Images/05e9eca4cb57a4bbdd7cbaacc6d45ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkJTTDngepU2TkmBaHk1-g.png"/></div></div></figure><p id="dc02" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意</strong>我们在函数<code class="fe nx ny nz nk b">setAttributes</code> <em class="lo">中改变了变量赋值的语法。</em>该函数现在与我们新配置的<code class="fe nx ny nz nk b">currentPokemon</code> <em class="lo"> </em>对象<em class="lo">协同工作。</em></p><p id="4a23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">继续重新加载扩展，刷新页面，单击弹出窗口图标，并检查弹出窗口的控制台。您应该看到:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/9e81efcb58108928f0130749e251da71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*kqD8jhb4GDycNLnLScIASw.png"/></div></figure><p id="5d35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重复这个过程(减去重新加载扩展)，你应该得到另一个口袋妖怪…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/7b9ce2a10f5e0cf924001ee168fb9915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*gkC0BOLWiJzNIoOnyy8jlQ.png"/></div></figure><p id="20db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太好了。我们刚刚为两个不同的网站找回了两个不同的口袋妖怪。现在，这一部分的点睛之笔——在屏幕上显示它们！</p><h2 id="f0d3" class="no mn iq bd mo on oo dn ms op oq dp mw la or os my le ot ou na li ov ow nc ox bi translated">一只野生口袋妖怪出现了！</h2><p id="7219" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">让我们从更新HTML文件开始，这样它就可以接收名称和图像了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi px"><img src="../Images/59ada5f99f233ab136f1a39d582caf46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yj55SzQDqk8JXEWmzi0PqQ.png"/></div></div></figure><p id="e2dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在体内创建了一个h2和一个图像标签。</p><p id="0b3f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:我对img使用了一个<code class="fe nx ny nz nk b">class</code> <strong class="kt ir"> </strong>，对头部使用了一个<code class="fe nx ny nz nk b">id</code> <strong class="kt ir"> </strong>。</p><p id="12d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们编写脚本<code class="fe nx ny nz nk b">popup.js</code> <em class="lo"> </em>在弹出窗口打开时为这两个标签填充值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi py"><img src="../Images/5de442d34f0db740ff41ae31e3bf1b04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_jmwA0L2Ra9EMVMAhtuxSw.png"/></div></div></figure><p id="1c91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我把我们函数的名字从<code class="fe nx ny nz nk b">logPokemon</code> <em class="lo"> </em>改成了<code class="fe nx ny nz nk b">showPokemon</code> <em class="lo">，</em>这样更能说明问题。而且，我们不是记录文本，而是找到标题和图像，并用适当的口袋妖怪信息填充它们。</p><p id="e137" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最终结果，加载两个不同的页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pz"><img src="../Images/9f459e46adefe4bcb8f8712ce90edfed.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*gxT2Mfeg3DaUGNTmlB_fOg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/ba2446a44d2699cf48fe67d9de2e8e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*MkKGn8ARXUo2Ir9qCc3kYw.png"/></div></figure><p id="b7fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太棒了。更好的是，这标志着一个重要的检查点。</p><p id="cdb3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们已经完成了困难的后台任务。我们在弹出脚本和背景页面之间进行无缝通信。捕捉口袋妖怪只需要一点本地存储魔法。</p><p id="d71d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但在我们继续之前，让我们做一些快速造型。在我们的CSS中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/a0bb9230d0f61ad4bfd4a6c414f603ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*yhz4MExq5cdDhlkUC1IG_g.png"/></div></figure><p id="7691" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的JS中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qc"><img src="../Images/7becc595a1ffb445ba98eb40ee3e8a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X07wC-krCUeX0NXJMPEVrg.png"/></div></div></figure><p id="3e5a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">…这给了我们一些更合适的东西…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/7cd936853cefdad36a516bf8c4d9e053.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*DTbVxYkf6cwYrAgV03F25A.png"/></div></figure><p id="e7f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">干得好。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="b034" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">抓住他们！</h1><p id="815b" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">至此，我们已经完成了所有的基础工作。扩展已经启动并运行。你可以一整天都碰到随机的口袋妖怪。但是如果没有<em class="lo">捕捉</em>的话，口袋妖怪捕捉扩展会是什么样的呢？</p><p id="78fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这一节中，我们将使用我们扩展的<code class="fe nx ny nz nk b">localStorage</code>来存储我们在野外遇到的口袋妖怪。</p><p id="1cef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，让我们在我们的HTML中写一个<code class="fe nx ny nz nk b">Catch!</code> <em class="lo"> </em>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi px"><img src="../Images/b471547f9f044e0f2a0218be1dbd34e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2SyS0E866Ex9-mBL-c1IdQ.png"/></div></div></figure><p id="1683" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">移动到<code class="fe nx ny nz nk b">popup.js</code>并编写一个脚本，当你点击新制作的<code class="fe nx ny nz nk b">Catch!</code>按钮时，将当前的口袋妖怪存储在<code class="fe nx ny nz nk b">localStorage</code>中…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/dd51e1109fb85ad89a0b14fec55553de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*8AqGhPc9aNTlw4BjgQ4NJQ.png"/></div></figure><p id="37d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们点击按钮，野生口袋妖怪将保存到本地存储，屏幕上的文字将改变，以反映捕捉！</p><p id="d6d2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更妙的是，那个口袋妖怪跑不掉了。本地存储跨网页持续存在。即使你访问每个新页面都会遇到新的口袋妖怪，你的<code class="fe nx ny nz nk b">localStorage</code>也会保持不变，直到被篡改。</p><p id="4cda" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是我们的<code class="fe nx ny nz nk b">popup.js</code> <em class="lo"> </em>完整的样子…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qf"><img src="../Images/3f75b655c7b0d4a32e5fc40b92357652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GhPWzyuqutRx4_iJyun3WQ.png"/></div></div></figure><p id="9cbd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当您打开弹出窗口时，您应该会看到…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/da8ec9ec619c7306ed17544e2b1c2417.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*C5MhuhE5iPtR6vdwVNxy3g.png"/></div></figure><p id="36b5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按那个按钮！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/848ac389d35483f2ff53efa766a47ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*WsKgD4oQIiNca34DgyyZMw.png"/></div></figure><p id="6b29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过检查弹出菜单来检查您的<code class="fe nx ny nz nk b">localStorage</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qh"><img src="../Images/806c0bc6319c9ef7cc4081f421bafd8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*-NM1K3x3CnIyjlsF76WxeA.png"/></div></figure><p id="64bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重新加载页面，运行到一个新的口袋妖怪，并看到你的butterfree坚持！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/96272ac164d3c19e3a69e732406f9215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*_H_1bQolbTKFPgD---ZCMA.png"/></div></figure><p id="c425" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，点击“接住”！又来了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/14c006580fa0df6000b8c931f9327f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*xT4AcB-RDlDoQgf6tR6V0Q.png"/></div></figure><p id="5d70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">克罗伊斯特是你的了！</p><p id="7eb0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这种数据持久性开启了一个充满机遇的世界。我们可以有一百万种选择。我们可以开始在我们的浏览器中构建口袋妖怪…口袋妖怪足够强大。</p><p id="e232" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但现在，让我们只是添加一些肉汁，然后就到此为止。以下是我们应该添加到口袋妖怪捕捉扩展中的剩余功能:</p><ul class=""><li id="6961" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm qk lv lw lx bi translated">我希望所有的口袋妖怪都有等级。(<code class="fe nx ny nz nk b">background.js</code>)</li><li id="3881" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm qk lv lw lx bi translated">我想看看我现在的口袋妖怪。(<code class="fe nx ny nz nk b">popup.js</code>)</li></ul><h2 id="c5b1" class="no mn iq bd mo on oo dn ms op oq dp mw la or os my le ot ou na li ov ow nc ox bi translated">生成级别</h2><p id="fcb6" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">让我们从在后台脚本中生成1到100之间的等级开始。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ql"><img src="../Images/a5206301c95e36be1f0d8de07c86fade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*4gLQcQ4yTVY2ioXrUMcEag.png"/></div></figure><p id="7c71" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用完全相同的公式来生成随机数。</p><p id="6b0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想知道为什么我们在后台脚本中生成这些信息——我们这样做是为了防止每次打开弹出窗口时口袋妖怪的等级发生变化。</p><p id="9363" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从后台接收的所有信息都是固定的，直到加载新的页面。否则，我们将能够停留在同一页面上，重复打开和关闭我们的弹出窗口，直到出现100级。不好。</p><p id="982f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有了新的关卡信息，我们的后台脚本相当于这样…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qm"><img src="../Images/40573f97ca439aa3b4853a8e3cc09160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2jY1sQhparQogNjGbQdFQQ.png"/></div></div></figure><p id="d44c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">信息就在那里。现在我们需要展示它。在我们的<code class="fe nx ny nz nk b">popup.html</code>中，在h2标题下添加一个span标签。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qn"><img src="../Images/a2e211ae31c1e82a432e65877bdaf9fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gZcYIfe75_i05LhG_8AvSw.png"/></div></div></figure><p id="a6fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将改变这个跨度的内部文本，以反映口袋妖怪的水平。我们在我们的<code class="fe nx ny nz nk b">popup.js</code> <em class="lo"> </em>文件中这样做。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qo"><img src="../Images/bfd1f2ae9cd3379168e9bc4a04a7274f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NT_vis7pvibykb3BbcYiCw.png"/></div></div></figure><p id="6312" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的<code class="fe nx ny nz nk b">popup.js</code> <em class="lo"> : </em>的每个部分都添加了一个新的行:在页面顶部添加了一个新的<code class="fe nx ny nz nk b">const</code>，在我们的<code class="fe nx ny nz nk b">showPokemon</code> <em class="lo"> </em>函数中添加了一行来创建span的文本，并在我们的<code class="fe nx ny nz nk b">localStorage</code> <em class="lo">函数中设置了一个新值。</em></p><p id="a332" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您的弹出窗口现在应该呈现以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qp"><img src="../Images/23ba828d3e1d473513e73f103ffafd2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*aaJemVhm9gDshQkOXgfUoQ.png"/></div></figure><p id="88e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">非常好。现在是我们项目的最后一步:展示我们目前的口袋妖怪。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="8641" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">显示我储存的口袋妖怪</h1><p id="38bb" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">我们将这样解决这个问题:</p><ul class=""><li id="8ea0" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm qk lv lw lx bi translated">在我们的HTML中添加一个新按钮。</li><li id="e978" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm qk lv lw lx bi translated">在按钮下面添加一个隐藏区域，保存当前戳的信息。</li><li id="f587" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm qk lv lw lx bi translated">在<code class="fe nx ny nz nk b">popup.js</code> <em class="lo"> </em>中写一个函数，当我们点击按钮时，这个函数显示我们的戳。</li></ul><p id="9143" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们从<code class="fe nx ny nz nk b">popup.html</code>开始吧……</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qq"><img src="../Images/8fdc6a41b1c4a8d7771efc3a0b23109b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JmVWM8gtfVc4-t-v4E0HEw.png"/></div></div></figure><p id="2745" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们创建了一个<code class="fe nx ny nz nk b">&lt;button&gt;</code>、容器<code class="fe nx ny nz nk b">&lt;div&gt;</code>、<code class="fe nx ny nz nk b">&lt;h3&gt;</code>和<code class="fe nx ny nz nk b">&lt;img&gt;</code>。我们给了容器div一个<code class="fe nx ny nz nk b">hide</code>类，我们需要在CSS中创建它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi qr"><img src="../Images/8529b819d7f5161c3d70375b2d9ccd51.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*SVPo8xUc_rBOa4badC0atA.png"/></div></figure><p id="ae9a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还创建了<code class="fe nx ny nz nk b">show</code>类。</p><p id="3440" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在需要指示我们的扩展在新按钮被按下时在隐藏和显示当前口袋妖怪容器之间切换。我们将在我们的<code class="fe nx ny nz nk b">popup.js</code> <em class="lo"> </em>中使用这组新的函数和常数来完成这项工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qs"><img src="../Images/909342d19fbcedab1bac9465fb72cc66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EaSORYEGOGuIEaRUZh9bjA.png"/></div></div></figure><p id="9bff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意:<code class="fe nx ny nz nk b">(!!localStorage.pokemon)</code>条件仅仅检查口袋妖怪是否被存储。</p><p id="53ea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将这段代码添加到我们的<code class="fe nx ny nz nk b">popup.js</code>文件的其余部分，我们得到如下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qt"><img src="../Images/8c0c31b8f6954794c93f3e7fdd9114c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nI2TX1FOeeZ7zTFDGEOTCQ.png"/></div></div></figure><p id="cf10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样！是时候庆祝一下你的劳动成果了:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="qu me l"/></div></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="be01" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">结论</h1><p id="3f6c" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">如果你能走到这一步，我为你鼓掌。我希望通过本教程的学习，您对未来的项目有了更多的想法。</p><p id="38e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在两篇文章中，我们学习了如何在弹出窗口、背景和网页之间进行交流。我们从扩展窗口中的API获取并显示信息。我们用<code class="fe nx ny nz nk b">localStorage</code>来暂时保存我们的口袋妖怪遭遇。我认为这是一个很好的开始。</p><p id="8a74" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你需要一点鼓励，这里有一些有趣的想法供你参考:</p><ul class=""><li id="3316" class="lp lq iq kt b ku kv kx ky la lr le ls li lt lm qk lv lw lx bi translated">尝试制作一个<code class="fe nx ny nz nk b">localStorage</code> Pokedex，记录你在野外遇到的每一个口袋妖怪。</li><li id="bb9e" class="lp lq iq kt b ku ly kx lz la ma le mb li mc lm qk lv lw lx bi translated">如果你想做大，试着通过创建你自己的API并在你浏览时发布给它来永久保存你的口袋妖怪遭遇——<code class="fe nx ny nz nk b">localStorage</code>在你退出Chrome时会丢失它的信息，所以你的口袋妖怪很可能会在当前格式中消失。</li></ul><p id="6a20" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就我而言，我目前正在开发一个扩展，让你在浏览网页的时候可以很容易地看到和理解网站的隐私政策。它叫做数据信任。睁大你的眼睛！</p><p id="d893" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">非常感谢阅读。随时检查这个项目的<a class="ae ln" href="https://github.com/SwanHub/pokemonCatchingExtension" rel="noopener ugc nofollow" target="_blank"> GitHub回购</a>。</p><p id="927a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">快乐编码，</p><p id="7034" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">杰克逊</p></div></div>    
</body>
</html>