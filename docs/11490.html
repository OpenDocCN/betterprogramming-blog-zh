<html>
<head>
<title>Improving Our iOS Alerts Implementation Using Factory Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用工厂模式改进我们的iOS警报实现</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/part-2-implementing-ios-alerts-with-the-factory-pattern-fb96ae584c76?source=collection_archive---------9-----------------------#2022-03-24">https://betterprogramming.pub/part-2-implementing-ios-alerts-with-the-factory-pattern-fb96ae584c76?source=collection_archive---------9-----------------------#2022-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="db8e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">识别和理解设计模式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/183dc6f78757c1dc689877e4b8ff777d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eVtUHj3We_3SQejp"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@kaitlynbaker?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯特琳·贝克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3ed6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你没有读过“用工厂模式实现iOS警报”的第1部分<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/a-better-way-to-implement-alerts-on-your-swift-ios-projects-70de896bcdc2">，这里有链接</a>。</p><p id="628a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，请使用我的例子作为一个什么是可能的公会。代码可以无限改进，也可以无限变化。换句话说，总有更好的方法来编写代码。</p><p id="a20b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，我想提一下，命名我的变量、类、结构等对我来说一直是个挑战，我还不是首席工程师，所以我也有很多东西要学。并不是说首席工程师是完美的，什么都知道，但这是我目前在自己的职业发展中努力的目标。</p><p id="a5ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">够了，我不想在不同模式的定义上浪费太多时间，所以我将只提到一些我认为有助于解释每个模式是什么的链接。我将解释我如何使用它们，如何识别它们，以及它们的好处。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="5502" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">工厂模式的资源</h2><p id="972b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">以下是我推荐的一些关于工厂模式的阅读材料:</p><ul class=""><li id="08bd" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated"><a class="ae ky" href="https://www.raywenderlich.com/books/design-patterns-by-tutorials/v3.0/chapters/11-factory-pattern" rel="noopener ugc nofollow" target="_blank">https://www . raywenderlich . com/books/design-patterns-by-tutorials/v 3.0/chapters/11-factory-pattern</a></li><li id="5abf" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://stevenpcurtis.medium.com/the-factory-pattern-using-swift-b534ae9f983f" rel="noopener">https://stevenpcurtis . medium . com/the-factory-pattern-using-swift-b 534 AE 9 f 983 f</a></li></ul><h2 id="c82b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">构建器模式的资源</h2><p id="02e6" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">以下是我推荐的一些关于构建器模式的阅读材料:</p><ul class=""><li id="f78c" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated"><a class="ae ky" href="https://www.geeksforgeeks.org/builder-design-pattern/" rel="noopener ugc nofollow" target="_blank">https://www.geeksforgeeks.org/builder-design-pattern/</a></li><li id="35ff" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://www.tutorialspoint.com/design_pattern/builder_pattern.htm" rel="noopener ugc nofollow" target="_blank">https://www . tutorialspoint . com/design _ pattern/builder _ pattern . htm</a></li></ul><p id="8b1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看<a class="ae ky" href="https://medium.com/javarevisited/design-patterns-101-factory-vs-builder-vs-fluent-builder-da2babf42113" rel="noopener">这个故事，了解更多关于工厂与建筑商模式的信息</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="35e5" class="no md it bd me np nq nr mh ns nt nu mk jz nv ka mn kc nw kd mq kf nx kg mt ny bi translated">在我的警报实现中识别这些模式的用法</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">工厂模式</p></figure><p id="43e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意我的<code class="fe ob oc od oe b">AlertImplementation</code>只做一件事。它创建了一个<code class="fe ob oc od oe b">UIAlertController</code>。我可以使用这个构建函数来创建一个新的<code class="fe ob oc od oe b">UIAlertController</code>。</p><blockquote class="of og oh"><p id="f347" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated">工厂协议将返回新的对象。</p></blockquote><p id="85ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用Swift阅读了工厂模式，你会读到这句话。然而，正如我之前所说，代码是可以无限改进的。</p><p id="6890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如现在看它，我应该调用它来创建，而不是调用这个函数build，因为它总是创建一个新的<code class="fe ob oc od oe b">UIAlertController</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">建设者</p></figure><p id="f28a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的工厂构建函数包含一个<code class="fe ob oc od oe b">AlertViewData</code>。这就是我如何使用构建器模式的。构建器通常有setter函数和getter函数来组装新对象。</p><p id="8eb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在Swift中，我们不使用getters，尽管我没有setter函数，但我有这些项目需要在每次构建新的<code class="fe ob oc od oe b">AlertViewData</code>时进行设置。</p><blockquote class="of og oh"><p id="6970" class="kz la oi lb b lc ld ju le lf lg jx lh oj lj lk ll ok ln lo lp ol lr ls lt lu im bi translated"><em class="it"/><strong class="lb iu">构建器</strong>创建一个<strong class="lb iu">产品</strong>，就像<strong class="lb iu">工厂</strong>所做的那样。但是现在，不是只有一个创建产品的请求，而是有几个对构建器中的方法的调用。每次电话都会给产品添加一个新的零件。当构建器被提供了所有需要的东西后，可以调用它的方法<em class="it"> get() </em>来用构建器之前收到的元素组装新产品。</p></blockquote><p id="d43b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哈维尔·冈萨雷斯很好地解释了它们的区别，并举例说明了它们是如何被使用的，因此，我在这里联系了他。所以，如果你还没有关注他，就给他一个关注吧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有建筑商的工厂</p></figure><p id="2e7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当把它们放在一起时，你可以创建一个单独的<code class="fe ob oc od oe b">alertFactory</code>来使用任何你想要的<code class="fe ob oc od oe b">AlertViewData</code>构建器。上面是如何使用它的一个简单的例子。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1c3e" class="no md it bd me np nq nr mh ns nt nu mk jz nv ka mn kc nw kd mq kf nx kg mt ny bi translated"><strong class="ak">使用这些模式的好处</strong></h1><p id="28f4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果你阅读了我上面链接的要点，你就已经知道了使用每种模式的好处。</p><p id="8e10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我们可以更进一步，将它与其他模式结合起来。例如，当你将它与一个<code class="fe ob oc od oe b">ViewModel</code>和一些服务结合在一起时，你会惊奇地发现你可以用它做什么。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信号服务</p></figure><p id="dc51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们有一个<code class="fe ob oc od oe b">AlertService</code>专门用于登录应用程序。我们可以使用我们的构建器在这里构建各种警报，而不需要实际使用我们的工厂方法，直到我们准备好显示它们。</p><p id="a188" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些方法和变量已经从下面的代码中删除，所以如果你只是复制和粘贴，而只是作为我如何使用它的一般指南来阅读，它可能不会工作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SignInViewModel</p></figure><p id="520a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ob oc od oe b">ViewModel</code>将使用并初始化我们的<code class="fe ob oc od oe b">SignInAlertService</code>来决定在验证时显示哪些错误警告。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0e90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个使用单独的<code class="fe ob oc od oe b">SignInView</code>作为视图的控制器。在这里，我练习使用控制器作为<code class="fe ob oc od oe b">ViewModel</code>和视图之间的媒介。这有助于减少这些<code class="fe ob oc od oe b">ViewControllers</code>中的行数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信号控制器</p></figure><p id="a201" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ob oc od oe b">SignInController</code>将初始化一个<code class="fe ob oc od oe b">AlertFactory</code>,当我们需要从我们的ViewModel的委托方法创建一个新的警报时，将会用到这个<code class="fe ob oc od oe b">AlertFactory</code>。</p><p id="edd0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经将数据从视图中分离出来，并使用单个<code class="fe ob oc od oe b">alertFactory</code>实例来创建基于<code class="fe ob oc od oe b">SignInAlertService</code>的<code class="fe ob oc od oe b">AlertViewData</code>的多个警报。</p><p id="9fef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有任何问题或者您认为有更好的方法，请告诉我。</p><p id="33bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我把这个留给你。学会快速编写iOS应用程序！</p></div></div>    
</body>
</html>