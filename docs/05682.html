<html>
<head>
<title>The SwiftUI Toolbar in iOS 14</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 14中的SwiftUI工具栏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-swiftui-toolbar-in-ios-14-b4a0fe6a3034?source=collection_archive---------1-----------------------#2020-07-28">https://betterprogramming.pub/the-swiftui-toolbar-in-ios-14-b4a0fe6a3034?source=collection_archive---------1-----------------------#2020-07-28</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="baeb" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">让我们来看看新的修饰符，在我们的布局中巧妙地放置视图</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/93eac5ae2c827e559f4fddde464448fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tEdIixHzcnQkPNYc"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@pemmax?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Przemyslaw Marczynski </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7f9c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">工具栏是WWDC 2020期间SwiftUI第二次迭代中有趣的新增内容之一。</p><p id="fce5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从本质上来说，<code class="fe lw lx ly lz b">toolbar</code>是一个修饰符，它允许您在一组视图控件周围放置一个环绕，并将它们设置在所需的位置。</p><p id="93e8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">默认情况下，SwiftUI可以使用<code class="fe lw lx ly lz b">toolbar</code>修改器智能地确定和设置所需位置的视图，但是您也可以使用<code class="fe lw lx ly lz b">ToolbarItem</code>显式地设置它。</p><p id="461e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在接下来的几节中，我们将了解:</p><ul class=""><li id="e470" class="ma mb iu lc b ld le lg lh lj mc ln md lr me lv mf mg mh mi bi translated">对<code class="fe lw lx ly lz b">toolbar</code>修改器的需求</li><li id="43e9" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">使用工具栏API自动设置底部栏和导航栏中的项目</li><li id="7575" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">使用<code class="fe lw lx ly lz b">ToolbarItem</code>进行手动放置</li></ul></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="77bb" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">需要SwiftUI工具栏</h1><p id="967a" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">以前在SwiftUI中设置底栏是一件很头疼的事情。你可能已经使用了<code class="fe lw lx ly lz b">UIViewRepresentable</code>来显示一个<code class="fe lw lx ly lz b">UIToolbar</code>。</p><p id="a79e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">类似地，要定制顶部的导航条，在此之前，您必须依赖底层的<code class="fe lw lx ly lz b">UINavigationBar</code>。是的，是的，在<code class="fe lw lx ly lz b">init</code>函数中做事情让它看起来像一个UIKit应用程序，而不是纯粹的SwiftUI。</p><p id="9cd8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">令人高兴的是，新的<code class="fe lw lx ly lz b">toolbar</code>修改器让我们包裹视图并设置我们选择的放置位置。因此，在屏幕的底部或顶部添加一个视图控件，以及在watchOS的情况下将项目设置为主要操作或确认是相当容易的。</p></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="4008" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">使用SwiftUI工具栏自动放置</h1><p id="5926" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">让我们看看如何用SwiftUI <code class="fe lw lx ly lz b">toolbar</code>修改器设置几个视图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/045703f93dfb66058282a8139cc21564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ne95ZZfEPQEcoW8k4O97wQ.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/anupamchugh/38b97106fcd46676fde073e052dd750f" rel="noopener ugc nofollow" target="_blank">代码要点链接</a></p></figure><p id="d873" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意以下几点很重要:</p><ul class=""><li id="fe98" class="ma mb iu lc b ld le lg lh lj mc ln md lr me lv mf mg mh mi bi translated">要使工具栏工作，您的视图需要包装在NavigationView中。</li><li id="0a69" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">默认情况下，在iOS和macOS中，工具栏中的第一个项目被放置为导航栏的右栏按钮。</li><li id="674d" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">第二个项目习惯上放在底部栏的中心。</li><li id="6ba4" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">如果在工具栏内指定了一个<code class="fe lw lx ly lz b">Label</code>，由于空间限制，它可能只显示图像。在这种情况下，<code class="fe lw lx ly lz b">Text</code>将用于辅助目的。</li></ul><p id="f49f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">虽然上面指定工具栏布局的方式很好，但有时你希望有更多的控制。</p><p id="6671" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，我们已经准备好了。</p></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="7cbd" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">使用ToolbarItem手动定位项目</h1><p id="49ca" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">根据<a class="ae kz" href="https://developer.apple.com/documentation/swiftui/toolbaritem" rel="noopener ugc nofollow" target="_blank">苹果文档</a> , <code class="fe lw lx ly lz b">ToolbarItem</code>是“一个模型，代表一个可以放在工具栏或导航栏中的项目。”</p><p id="d7ff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">ToolBarItem</code>让我们以如下方式包装视图并定义位置:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/e55ea5aaf59b33a9f98e8e496fabdcb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6VrdOzJv8pvZDnDdS-CAA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/anupamchugh/80e07ce5ff08b9147928cb4e8ba44a1f" rel="noopener ugc nofollow" target="_blank">代码要点链接</a></p></figure><p id="8b2d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，我们有几种放置模式:</p><ul class=""><li id="8160" class="ma mb iu lc b ld le lg lh lj mc ln md lr me lv mf mg mh mi bi translated"><code class="fe lw lx ly lz b">principal</code> —这将视图放在屏幕最突出的部分。在iOS和macOS中，是标题视图。</li><li id="4e14" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated"><code class="fe lw lx ly lz b">navigationBarLeading</code>和<code class="fe lw lx ly lz b">navigationBarTrailing</code>用于在导航栏的左右两端放置项目。</li><li id="f9df" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated"><code class="fe lw lx ly lz b">bottomBar</code>设置屏幕底部工具栏中的项目。</li><li id="7331" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated"><code class="fe lw lx ly lz b">automatic</code>就是我们上一节看到的。它根据平台和可用空间找到最合适的位置。</li></ul><p id="2969" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">需要注意的是，如果<code class="fe lw lx ly lz b">navigationBar</code>显示模式设置为<code class="fe lw lx ly lz b">automatic</code>，则<code class="fe lw lx ly lz b">principal</code>的位置将被忽略。因此，我们在上面指定了<code class="fe lw lx ly lz b">inline</code>模式。</p><p id="b92e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">ToolBarItem</code>如果需要，可以轻松创建自定义导航栏。</p><p id="30dc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要用多个项目来设计底部栏的样式，我们需要确保顺序不变。这意味着最左边的项目首先被放置，如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/06fde7706c6ef8c664b5239ad00e9fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52jNhnqnrmv_omF3BlwdUg.png"/></div></div></figure></div><div class="ab cl mo mp hy mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="in io ip iq ir"><h1 id="0b37" class="mv mw iu bd mx my mz na nb nc nd ne nf ka ng kb nh kd ni ke nj kg nk kh nl nm bi translated">结论</h1><p id="3cfa" class="pw-post-body-paragraph la lb iu lc b ld nn jv lf lg no jy li lj np ll lm ln nq lp lq lr nr lt lu lv in bi translated">我们探索了新的工具栏修改器，并看到了如何使用<code class="fe lw lx ly lz b">ToolbarItem</code>来帮助设置视图控件的位置。</p><p id="ca61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个新的API将有助于构建独立于平台的工具栏。</p><p id="55ee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是一个总结。感谢阅读。</p></div></div>    
</body>
</html>