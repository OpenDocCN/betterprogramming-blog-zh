<html>
<head>
<title>Web Components API in a Nutshell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简而言之，Web组件API</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/web-components-api-in-a-nutshell-c409127d563a?source=collection_archive---------3-----------------------#2019-07-07">https://betterprogramming.pub/web-components-api-in-a-nutshell-c409127d563a?source=collection_archive---------3-----------------------#2019-07-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9286" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">本机Web组件API的内容和原因</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d50f50a4f0a4eb5b2bc6aca51c36dbcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7A47VKzg_r2HzmvWcLdIcA.png"/></div></div></figure><p id="c8ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们都知道尽可能多地重用代码通常是一个好主意。在组件之间共享代码为我们节省了金钱、精力，最重要的是，节省了时间。</p><p id="fd7a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于复杂的HTML 来说，重用代码并不容易。有时你不得不编写自定义UI控件，如果不小心的话，多次使用它们会使你的页面变得一团糟。</p><p id="418f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是<a class="ae lq" href="https://www.webcomponents.org/" rel="noopener ugc nofollow" target="_blank"> Web组件</a>的用武之地。Web Components是一套不同的技术，它允许您创建可重用的自定义元素(将它们的功能封装在代码的其余部分之外)，并在您的Web应用程序中使用它们。</p><p id="1451" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，web组件让我们在<code class="fe lr ls lt lu b">HTML</code>文件中定义定制元素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/6ba8014911221fce78c0a0ab4592e7fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GQPdSNao8cm4HmEO4h3DLg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">自定义HTML元素(非JSX)</p></figure><p id="d4d9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ma">注；我们没有使用</em><a class="ae lq" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"><em class="ma">webpack</em></a><em class="ma"/><a class="ae lq" href="https://rollupjs.org/" rel="noopener ugc nofollow" target="_blank"><em class="ma">roll up</em></a><em class="ma">，或者</em><a class="ae lq" href="https://bundler.io/" rel="noopener ugc nofollow" target="_blank"><em class="ma">bundler</em></a><em class="ma">以上。HTML5和JavaScript支持该语法。如果想学习原生JavaScript，我推荐阅读“</em> <a class="ae lq" href="https://www.amazon.com/Eloquent-JavaScript-3rd-Introduction-Programming-ebook/dp/B07C96Q217/ref=as_li_ss_tl?keywords=javascript+book&amp;qid=1564573443&amp;s=books&amp;sr=1-2&amp;linkCode=ll1&amp;tag=thegeniusde07-20&amp;linkId=788a6ff50f5075cf57e905ba4306b695&amp;language=en_US" rel="noopener ugc nofollow" target="_blank">口才JavaScript </a>”这本书。</p><p id="adc0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每个JS框架都有自己的可重用组件API。一个<code class="fe lr ls lt lu b">react-video-player</code>在Ember里不行，一个<code class="fe lr ls lt lu b">ember-preload</code>在Vue里也不行。比如<a class="ae lq" href="https://github.com/matrix-org/matrix-react-sdk" rel="noopener ugc nofollow" target="_blank"> Matrix.org的JavaScript SDK绑定了React </a>。其他JS SDK使用iframe(像脸书的Button和其他ad-tech SDK通常走这条路)或者根本不提供任何UI功能(像WebTorrent)。</p><p id="31c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Web组件，因为它们的行为完全像内置的HTML元素，应该可以在任何框架中工作。如果你的框架可以呈现任意的HTML元素，那么它可以呈现一个定制的HTML元素。如果你只是搭建一个app，那没关系；只需用你的模板语言呈现你想要的HTML。作为一个<em class="ma">库的作者</em>，仅使用浏览器内置API来提供带有某种程度封装的JavaScript小部件的能力看起来确实不错。— <a class="ae lq" href="https://lobste.rs/s/xfeqvu/web_components_api_nutshell#c_vnrvzz" rel="noopener ugc nofollow" target="_blank">未解之谜</a></p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="0448" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">入门指南</h1><p id="7f17" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">我们只需要<code class="fe lr ls lt lu b">index.html</code>和<code class="fe lr ls lt lu b">app.js</code>文件。确保将<code class="fe lr ls lt lu b">app.js</code>文件包含在您的<code class="fe lr ls lt lu b">index.html</code>中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/078ace577ae1cbe0dbc2196b02d87173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0jPUx7YerUuwmDzcmLpbw.png"/></div></div></figure><p id="e143" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意浏览器全局窗口对象有一个名为<code class="fe lr ls lt lu b">customElements</code>的属性——我们调用属性上的define方法来创建我们的定制HTML元素。它有三个参数，最后一个是可选的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">定义自定义HTML语法— <a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define#Syntax" rel="noopener ugc nofollow" target="_blank"> Mdn </a></p></figure><p id="2331" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一个参数是定制元素的名称，在上面的例子中是<code class="fe lr ls lt lu b">app-button</code>。第二个参数是元素的构造函数。我们使用构造函数来构建自定义元素，比如附加事件侦听器和逻辑。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/88ee1af6e8f08a14dce3400324a2be18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*THTe8O1ePzprJDQie5muTg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define#Syntax" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="5b26" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意我们的<code class="fe lr ls lt lu b">WebComponentButton</code>类是如何扩展<code class="fe lr ls lt lu b">HTMLElement</code>类的。简单来说，我们继承并扩展了内置的HTML元素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/df2eec1b5cd8d7a625ecf5e1f7f573a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*82uSX-6Vjy0gB2i_AI6n1w.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="224e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们在浏览器中打开<code class="fe lr ls lt lu b">index.html</code>文件，我们应该会看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/a8c9f75d2c967d8558f987f380fe3caf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sk3eOvbxYED-EffxrtEeVw.png"/></div></div></figure><p id="aed4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意我们的DOM中有一个类似JSX的节点元素吗？非常酷，考虑到我们在这里没有使用任何捆绑器或框架。</p><p id="c451" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不出所料，如果我们点击按钮，什么都不会发生。我们需要告诉按钮点击后要做什么。为了实现这一点，让我们为按钮添加一个事件监听器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">将单击事件侦听器附加到我们的按钮实例</p></figure><p id="e952" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，如果我们点击按钮，我们应该看到一个<em class="ma"> </em> <code class="fe lr ls lt lu b">click </code>登录到控制台。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/9e06a100db1fedb166ea0858ffc0bd7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Uz_7XkrIYFdmTb-flJU20A.gif"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">点击按钮</p></figure><p id="abfd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们给按钮添加样式。我们该怎么做？</p><p id="6ccf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">类有现成的生命周期。如果你从<a class="ae lq" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应过来</a>、<a class="ae lq" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue </a>、<a class="ae lq" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>等等。，你可能已经很熟悉了。生命周期方法让我们控制当某些行为发生时会发生什么。例如，当浏览器呈现按钮时，我们希望为其附加样式。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">按钮组件的生命周期事件</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/bcd6f2e2efa90cc0809634ce303b38e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jv68fJLrqyiUc12AdYRvvg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks" rel="noopener ugc nofollow" target="_blank">使用生命周期回调</a></p></figure><p id="bfdf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过标准的<code class="fe lr ls lt lu b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">CSSStyleDeclaration</strong></a></code> API来设计我们的按钮。例如，<code class="fe lr ls lt lu b">&lt;div style=”…”&gt;</code>使用的是<code class="fe lr ls lt lu b">CSSStyleDecleration</code> API。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">向按钮添加样式</p></figure><p id="cf94" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">This</code>引用我们的类，在这种情况下<code class="fe lr ls lt lu b">WebComponentButton</code>。上面的代码会给我们的按钮一个带填充的深色边框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/11f2f91289a0d87fc619df411f74b14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1eRESB-OeIO2yf58q1hbQ.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">样式按钮</p></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="22ec" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">浏览器支持</h1><p id="0573" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">大多数现代浏览器都有不错的web组件支持。考虑到IE11无关紧要，您应该可以在生产中使用web组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/84d39c9e9f0a90a16eeb77b63f9bb7d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNSoQibqCjopXvBuppo3xg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><a class="ae lq" href="https://caniuse.com/#search=web%20components" rel="noopener ugc nofollow" target="_blank"> Web组件API浏览器支持</a></p></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="db92" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">从这里去哪里</h1><p id="7e49" class="pw-post-body-paragraph ku kv it kw b kx na ju kz la nb jx lc ld nc lf lg lh nd lj lk ll ne ln lo lp im bi translated">Web组件API可以为您做很多事情。请阅读下面的文章，更好地了解它的用处。</p><p id="459b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你足够好奇，我推荐你通读一下<a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" rel="noopener ugc nofollow" target="_blank"> Mozilla Developers </a>和<a class="ae lq" href="https://developers.google.com/web/fundamentals/web-components/customelements" rel="noopener ugc nofollow" target="_blank"> Google Web Fundamentals </a>来更好地理解Web组件API。还有一本名为《<a class="ae lq" href="https://amzn.to/2YyR8rx" rel="noopener ugc nofollow" target="_blank"><em class="ma">Web Component Essentials</em></a>》的书，里面有很多关于如何利用web components API的例子。</p><div class="np nq gp gr nr ns"><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">Web组件</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">作为开发人员，我们都知道尽可能多地重用代码是一个好主意。传统上不是这样的…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">developer.mozilla.org</p></div></div><div class="ob l"><div class="oc l od oe of ob og ks ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a href="https://developers.google.com/web/fundamentals/web-components/customelements" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">定制元素v1:可重用的Web组件| Web基础| Google开发者</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">自定义元素允许web开发人员定义新的HTML标记，扩展现有的标记，并创建可重用的web组件。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">developers.google.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og ks ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a href="https://css-tricks.com/an-introduction-to-web-components/" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">Web组件介绍| CSS-技巧</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">前端开发以惊人的速度前进。无数的文章、教程和Twitter证明了这一点…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">css-tricks.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og ks ns"/></div></div></a></div><p id="7b11" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想玩源代码，请随意<a class="ae lq" href="https://github.com/indreklasn/js-web-components-nutshell" rel="noopener ugc nofollow" target="_blank">点击这里的例子</a>。</p><div class="np nq gp gr nr ns"><a href="https://github.com/indreklasn/js-web-components-nutshell" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">indreklasn/js-web-组件-果壳</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">通过在GitHub上创建一个帐户，为indreklasn/js-we B- components-坚果壳开发做出贡献。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oj l od oe of ob og ks ns"/></div></div></a></div><p id="7483" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读。保持对信息的渴望！❤</p></div></div>    
</body>
</html>