<html>
<head>
<title>Link Presentation in iOS 13</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 13中的链接展示</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/linkpresentation-in-ios-13-bbb6007818c6?source=collection_archive---------13-----------------------#2020-01-16">https://betterprogramming.pub/linkpresentation-in-ios-13-bbb6007818c6?source=collection_archive---------13-----------------------#2020-01-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9fbe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">向链接添加元数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d568537170c946d2d4c0cd28b781cb36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8KlTxoEgBrVYF8UQA_Zz7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:Apple.com</p></figure><p id="9b11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">难度:<strong class="la iu">容易</strong> |中等|困难</p><p id="19d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">苹果发布iOS 10的时候，苹果的Messages应用更新到了支持消息中丰富链接的新版本。在iOS 13中，苹果支持在我们自己的应用程序中使用丰富的链接。这里有一些步骤来帮助你实现添加元数据到你的链接。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="5add" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第一步。获取您的元数据</h1><p id="14c4" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">创建一个丰富的链接预览首先需要的是<code class="fe my mz na nb b"><a class="ae nc" href="https://developer.apple.com/documentation/linkpresentation/lplinkmetadata" rel="noopener ugc nofollow" target="_blank">LPLinkMetadata</a></code>。</p><p id="4076" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe my mz na nb b">LPLinkMetadata</code>是一个对象，存储关于URL的元数据，包括链接的标题、图标、图像和视频。</p><h2 id="e726" class="nd mc it bd md ne nf dn mh ng nh dp ml lh ni nj mn ll nk nl mp lp nm nn mr no bi translated">自动获取元数据</h2><p id="0204" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">因为您没有链接的元数据，所以您必须有另一个进程来获取它。为此，我们可以使用<code class="fe my mz na nb b"><a class="ae nc" href="https://developer.apple.com/documentation/linkpresentation/lpmetadataprovider" rel="noopener ugc nofollow" target="_blank">LPMetadataProvider</a></code>。</p><p id="af96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe my mz na nb b">LPMetadataProvider</code>是一个检索URL元数据的对象。在它完成获取之后，它会将元数据映射到<code class="fe my mz na nb b">LPLinkMetadata</code> <strong class="la iu"> </strong>对象。</p><p id="2a9f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe my mz na nb b">LPMetadataProvider</code> <strong class="la iu"> </strong>支持一个功能叫做<code class="fe my mz na nb b"><a class="ae nc" href="https://developer.apple.com/documentation/linkpresentation/lpmetadataprovider/3143321-startfetchingmetadata" rel="noopener ugc nofollow" target="_blank">startFetchingMetadata</a></code>。</p><p id="e5c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是一个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="ea92" class="nd mc it bd md ne nf dn mh ng nh dp ml lh ni nj mn ll nk nl mp lp nm nn mr no bi translated">自定义元数据</h2><p id="0589" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">如果您的链接不支持元数据，或者您想要更改为另一个URL、标题、图标、图像或视频，只需创建<code class="fe my mz na nb b">LPLinkMetadata</code> <strong class="la iu"> </strong>并输入必要的数据。</p><p id="e2fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是一个标题的例子(链接的标题)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="0e97" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第二步。创建一个包含<strong class="ak"> LPLinkMetadata </strong>的视图</h1><p id="139d" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">有了<code class="fe my mz na nb b">LPLinkMetadata</code>之后，下一步是创建一个视图并将元数据放入其中。叫<code class="fe my mz na nb b"><a class="ae nc" href="https://developer.apple.com/documentation/linkpresentation/lplinkview" rel="noopener ugc nofollow" target="_blank">LPLinkView</a></code>。</p><p id="6b31" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe my mz na nb b">LPLinkView</code>是一个链接的丰富的可视化表示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="030d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为方便起见，我想将所有必要的函数放在一个文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="4d42" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是两种情况下的结果:自动(左)和自定义(右)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/484c18bfdabb9befb2f845f84bf7e313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n5BSiIawRl-25hBF8-bFyA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动(左)和自定义(右)</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8cb0" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">用视频试试</h1><p id="67a9" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">实现视频和实现图像是一样的，但是请注意输入视频的直接链接。</p><p id="616c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/8a567ee2be23b6cebd9f0470b2b9d13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*VIisuQvJD3JdjCYsCgSfrg.gif"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="9879" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。希望这篇文章对你有用。</p></div></div>    
</body>
</html>