<html>
<head>
<title>Error Handling in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度误差处理</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/error-handling-in-angular-67c308df0f07?source=collection_archive---------7-----------------------#2019-09-04">https://betterprogramming.pub/error-handling-in-angular-67c308df0f07?source=collection_archive---------7-----------------------#2019-09-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fcb7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何正确处理角度应用中的误差</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/16e0c759be73dd1fb2e6143e07baa1f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nwLfMEqdh1-TmVhzJ2tHw.png"/></div></div></figure><p id="71c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这篇文章中，我们将演示如何正确处理角度应用中的误差。</p><p id="3c25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">软件开发中的错误处理与拥有一个正常工作的应用程序一样重要。为了拥有一个完整和健壮的应用程序，必须正确处理错误和异常。</p><p id="f7c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将指导您如何有效处理角度应用中的错误。在本教程中，我使用的是Angular 7 . 0 . 4——我建议你使用相同的版本。</p><h1 id="984b" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak">先决条件</strong></h1><p id="db34" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">您的系统上应该有以下内容:</p><h2 id="b5a7" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated">结节</h2><ul class=""><li id="0391" class="mw mx iq kt b ku mf kx mg la my le mz li na lm nb nc nd ne bi translated">转到<a class="ae nf" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">nodejs.org</a></li><li id="90fb" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">下载并安装可用的LTS版本。</li><li id="7166" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">要检查您的版本，请在终端/控制台窗口中运行<code class="fe nl nm nn no b">node -v</code>。</li></ul><h2 id="21f4" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated">角度CLI</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/d883d6818748f3eb03000e3a93839bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5U8T_krpqq_HlMCu2_sYWQ.png"/></div></div></figure><h2 id="f5c9" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated">Visual Studio代码</h2><p id="15b7" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我使用VSCode，但是你可以使用任何其他的IDE (Atom，Vim等等。).</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="dc44" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有了这些，我们可以开始为我们的应用程序创建一个新文件夹。</p><ul class=""><li id="0b5e" class="mw mx iq kt b ku kv kx ky la nx le ny li nz lm nb nc nd ne bi translated">在VSCode中打开文件夹，方法是在文件夹中单击鼠标右键，然后使用VSCode打开。</li><li id="5a85" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">打开VsCode终端并创建一个新的angular项目。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/572ee243a161ce8cdbda3ab650a9f6b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PPtT60ptHr_v_YFft9s34w.png"/></div></div></figure><ul class=""><li id="4c04" class="mw mx iq kt b ku kv kx ky la nx le ny li nz lm nb nc nd ne bi translated"><code class="fe nl nm nn no b">ng new</code>命令提示您关于要包含在初始应用程序项目中的特性的信息。通过按Enter或Return键接受默认值。</li><li id="a795" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">Cd到项目文件夹<strong class="kt ir"> cd myErrorHandlingApp </strong></li></ul><p id="4787" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本地服务应用程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/2e3a2f36744f0f9a535e2069ddc32ad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcKgFkBeDtT1cJnsW-ahXA.png"/></div></div></figure><p id="b36c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将在<strong class="kt ir"> localhost:4200 </strong>上的本地浏览器中打开应用程序。您应该看到这个:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f292d9d783251843d31a3cf4e88d8c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*gYJsF3DjeYROa7nwVVcmLA.png"/></div></figure><p id="8b87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Angular应用程序中的错误可以是客户端错误，也可以是服务器端错误:</p><ul class=""><li id="c28f" class="mw mx iq kt b ku kv kx ky la nx le ny li nz lm nb nc nd ne bi translated">客户端错误:与前端代码和网络相关的错误—它们抛出4xx状态代码。</li><li id="0076" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">服务器端错误:与后端代码、数据库和文件系统相关的错误。他们通常抛出5xx状态码。</li></ul><p id="40b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用Angular的内置<code class="fe nl nm nn no b">HttpClientModule</code>，通过使用<a class="ae nf" href="https://api.chucknorris.io/" rel="noopener ugc nofollow" target="_blank"> chucknorris </a> API显示随机笑话来演示错误处理。</p><p id="aa40" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">1.我们首先将<code class="fe nl nm nn no b">HttpClientModule</code>导入到我们的根模块(app.module.ts)中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/2488a55d3089198031790216871b7878.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1uTigux8xD3nss490Ms-w.png"/></div></div></figure><p id="1bf5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.在app.component.html，我们创建了一个按钮，单击它将启动HTTP请求:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/a0f443def2a1f8895010a76f792a0f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYyBeU8v2dR7mSwOT1BlEw.png"/></div></div></figure><p id="b153" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.在app.component.ts中，我们包含了构造函数，并扩展了组件的类来实现OnInit生命周期挂钩。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/1914ba9ba62326bd888ed7bbee73cf9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCgHFlEWxnWlal_3lLSxcA.png"/></div></div></figure><p id="b018" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">4.现在我们需要创建一个可以发出HTTP请求的服务。服务是Angular的重要组成部分。当我们需要在应用程序的任何地方使用代码时，或者我们需要在应用程序之间传递数据时，服务就会派上用场。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/67cbebeebfb92f2cbd3fc3538e20b858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lcIs8PTFK2GUPJV565tPtA.png"/></div></div></figure><p id="d351" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将创建一个新的可注入服务，它可以被注入到我们所有的组件中。我们现在应该将它放在我们的文件夹树中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/a9e28ce0e616be8dd492c97773a57a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:258/format:webp/1*GtSb7qTBggMO6AzsLvVZ8A.png"/></div></figure><p id="7ca0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">5.创建服务后，我们将服务注入到app组件控制器(app。component.ts文件)。请注意appService是如何导入到组件中的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/444f504db1a7414d3cbcef687640ed9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vV2CmdpdJ66S-Epq16TmCg.png"/></div></div></figure><p id="6c98" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">6.在appService中，我们将向chuck Norris open API发出HTTP请求，以获取随机笑话。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/7cc058f32232447846ae553ddb7a1d3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgKynHneYMaAqcs413l8uA.png"/></div></div></figure><p id="b3f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我做了什么?</p><ul class=""><li id="c6a2" class="mw mx iq kt b ku kv kx ky la nx le ny li nz lm nb nc nd ne bi translated">将我们的API的基本URL设置为<a class="ae nf" href="https://api.chucknorris.io/jokes" rel="noopener ugc nofollow" target="_blank">https://api.chucknorris.io/jokes</a></li><li id="dd13" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">在构造函数中将HttpClient服务作为私有变量注入。注意:你需要将<code class="fe nl nm nn no b">HttpClientModule</code> <strong class="kt ir"> </strong>从' @angular/common/http '导入到app.module.ts中。</li><li id="3b9b" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">我创建了一个<code class="fe nl nm nn no b">getJokes</code> <strong class="kt ir"> </strong>，它调用HTTP get方法来获取随机笑话。这是作为<code class="fe nl nm nn no b">Observables</code>返回的。</li><li id="65a1" class="mw mx iq kt b ku ng kx nh la ni le nj li nk lm nb nc nd ne bi translated">在<code class="fe nl nm nn no b">extractJokes</code> <strong class="kt ir"> </strong>方法中，我订阅了可观察到的笑话并将其记录在控制台上。</li></ul><p id="5433" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">7.我们需要做的下一件事是从点击按钮的控制器中调用<code class="fe nl nm nn no b">extractJokes</code> <strong class="kt ir"> </strong>方法。在<code class="fe nl nm nn no b">makeApi</code> <strong class="kt ir"> </strong>方法中，插入此；</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/87c5f71f741e658b42b191e2ae13fdfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JiOBP3vHnlzaIRLSWCR3Ew.png"/></div></div></figure><p id="a7c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">保存您的代码，然后单击按钮。您应该会在浏览器的控制台上看到一个<code class="fe nl nm nn no b">joke</code> <strong class="kt ir"> </strong>对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/65558c882f1c5e69237d2678069cb57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*RPj1MbgMqLOR83MoDSIfAQ.png"/></div></figure><p id="ab57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">工作正常，对吗？</p><p id="8a01" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们完成了应用程序，并准备发货。但是等等！如果我们的HTTP请求出错，会发生什么？我们如何让用户知道这个错误？我们该如何处理？现在有许多方法可以做到这一点，在本教程中，让我们探索其中的一些。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="7295" class="ln lo iq bd lp lq od ls lt lu oe lw lx jw of jx lz jz og ka mb kc oh kd md me bi translated"><strong class="ak">错误处理</strong></h1><p id="ebf3" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们可以使用一个错误处理程序来提醒用户有错误。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/f985b4c351e195b1efbfc1870b8677f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PeTjGIujKNrYTKgN9HuA4A.png"/></div></div></figure><p id="70e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我创建了一个新的<code class="fe nl nm nn no b">handleError</code> <strong class="kt ir"> </strong>方法来提醒用户错误。我还添加了第二个参数，它接受错误，将其记录到浏览器的控制台，并调用<code class="fe nl nm nn no b">handleError</code>函数，将错误作为参数传递。</p><p id="5a75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们模拟一个错误场景。让您的浏览器离线，然后单击按钮进行测试:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/3d2bf2c3b4e1c5100120bd40aa4747e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*54alPkQGDXkKoiC8NyFXBg.png"/></div></figure><p id="09cc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您应该会收到这样的警告:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/5c93542572b8d19e218faa98fb3926b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*d0j5CLPFRc3CMN_ZUwrERw.png"/></div></figure><p id="8640" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这告诉我们有一个HTTP失败响应。现在用户知道了这个错误——一个改进……但是我们可以做得更好。</p><p id="b719" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们重新编写代码。从我们服务的<code class="fe nl nm nn no b">getJokes</code> <strong class="kt ir"> </strong>方法开始</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/172f44a4a8bf9319f7c6a4082dd01e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0iDSjWnLzUtzcygvVHZGFw.png"/></div></div></figure><p id="a5cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要从rxjs/operators中导入<code class="fe nl nm nn no b">retry</code> <strong class="kt ir"> </strong>和<code class="fe nl nm nn no b">catchError</code> <strong class="kt ir"> </strong>运算符。<code class="fe nl nm nn no b">retry</code>将帮助我们在抛出错误之前重试指定次数的HTTP请求，<code class="fe nl nm nn no b">catchError</code>将向用户抛出错误。</p><p id="8c65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在修改<code class="fe nl nm nn no b">getJokes</code> <strong class="kt ir">、</strong>、<code class="fe nl nm nn no b">extractJokes</code>、和<code class="fe nl nm nn no b">handleError</code>的方法如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/9de7b6822bab62ca4ad07966fa36603d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JrOm4EUX0rN3iDMGSPPdTg.png"/></div></div></figure><p id="94d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请记住，正如我前面提到的——错误可能发生在客户端，也可能发生在服务器端，所以我们需要同时捕捉两者。每当我们点击按钮发出HTTP请求时，我们已经成功地处理了发生的任何一种错误。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="4c68" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">处理错误的第二种方法是使用角度4.3.1中引入的<code class="fe nl nm nn no b">HttpInterceptor</code> <strong class="kt ir"> </strong>。<code class="fe nl nm nn no b">HttpInterceptor</code>用于拦截所有HTTP请求和响应，并有选择地对其进行转换。<code class="fe nl nm nn no b">HttpInterceptor</code>是一个可以由类实现的接口。它有一个<code class="fe nl nm nn no b">intercept</code> <strong class="kt ir"> </strong>方法，当HTTP请求被拦截时，该方法将实现所有的逻辑。更多可以从官方<a class="ae nf" href="https://angular.io/api/common/http/HttpInterceptor" rel="noopener ugc nofollow" target="_blank">角度文档</a>中阅读。</p><ul class=""><li id="220a" class="mw mx iq kt b ku kv kx ky la nx le ny li nz lm nb nc nd ne bi translated">创建一个新类<code class="fe nl nm nn no b">HttpInterceptor.ts</code>:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/b96a0c7155020f3d50fba3de04354b99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ndE2T05r5g-QB9YSbUkTnA.png"/></div></div></figure><p id="4d5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要将新类添加到app模块的提供者列表中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/8a2df34ae677a9b766fa556feec4d636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QASMM4IgLKgxxUs5TOqUkw.png"/></div></div></figure><p id="1552" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意<code class="fe nl nm nn no b">HTTP_INTERCEPTORS</code> <strong class="kt ir"> </strong>是如何从@angular/common/http导入的。如果您点击按钮发出HTTP请求，该请求将被拦截,“拦截”将被记录到浏览器的控制台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/a13bed139283269b8103e1391ba45ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*wK5cQpPIhVQT0B7YnmNCtw.png"/></div></figure><p id="d6ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在已经能够拦截所有请求，并成功地将每个请求的消息记录到控制台。这样，我们可以在这里放入我们的错误处理逻辑。如下编辑<code class="fe nl nm nn no b">HttpInterceptor</code>文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/52c9e1862bc638451158d15d583dfff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3fblTXh5ZrFndCqgi6qGeQ.png"/></div></div></figure><p id="60f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用<code class="fe nl nm nn no b">HttpInterceptor</code>允许我们有一个适当的关注点分离，这正是Angular宣扬的最佳实践。如果我们想改变在应用程序的任何部分将错误推给用户的方式，我们可以简单地在创建的拦截器类中这样做，这样我们就可以在应用程序中正确和全局地处理错误。</p><p id="15c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以在这里访问源代码<strong class="kt ir"/><a class="ae nf" href="https://github.com/horlabyc/duneBook-errorHandling" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"/></a></p><p id="fd8c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过编码来改变现状。</p></div></div>    
</body>
</html>