<html>
<head>
<title>Swift Property Wrappers — Powerful New Annotations (Attributes) System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift属性包装器——强大的新注释(属性)系统</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-property-delegates-powerful-new-annotations-attributes-system-2e3968b29624?source=collection_archive---------6-----------------------#2019-06-04">https://betterprogramming.pub/swift-property-delegates-powerful-new-annotations-attributes-system-2e3968b29624?source=collection_archive---------6-----------------------#2019-06-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="eaea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">验证属性，使用户默认值易于使用，并创建令人惊叹的<a class="ae kf" href="https://docs.swift.org/swift-book/ReferenceManual/Attributes.html" rel="noopener ugc nofollow" target="_blank"> Swift属性</a></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/83187189c0e9b1cc72df8e2fe5cebcd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NlqpTTAM8DbGl4paBmjE_g.jpeg"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@cgower" rel="noopener ugc nofollow" target="_blank">克里斯托弗·高尔</a>在<a class="ae kf" href="https://unsplash.com/photos/m_HRfLhgABo" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="33ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">编辑</strong>:从Xcode 11和Swift 5.1的发布开始，属性委托与<code class="fe ls lt lu lv b">@propertyWrapper</code>一起使用，不再实现“<strong class="ky ir"> value </strong>”属性，而必须实现“<strong class="ky ir"> wrappedValue </strong>”。</p><p id="2cf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从一个受<a class="ae kf" href="https://github.com/DougGregor/swift-evolution/blob/property-wrappers/proposals/0258-property-wrappers.md" rel="noopener ugc nofollow" target="_blank">原始提议本身</a>启发的例子开始，在这个例子中，您可以像在Java中一样放置<strong class="ky ir">注释</strong>，并在内部使用定制的getter和setter，这样它就可以保存或检索来自<code class="fe ls lt lu lv b">UserDefaults</code>的数据。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi lw"><img src="../Images/75955fe218e71f699079a4bfb7252cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AW_lgi91BtrI88jxzhLVjw.png"/></div></div></figure><p id="e026" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以像使用普通的<strong class="ky ir">计算属性一样使用它，</strong>并且getter和setter已经在我们的自定义<code class="fe ls lt lu lv b">UserDefault</code>结构中实现了。</p><p id="d9c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">UserDefaultsManager.User.username = "Daniel"</code> //示例</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="afc8" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">履行</h1><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi mw"><img src="../Images/d41ab4bb780091839fa5a8dcbd729575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkR_hPzOWe_08r6r8XSTOQ.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated"><a class="ae kf" href="http://bit.ly/2KuopwH" rel="noopener ugc nofollow" target="_blank">http://bit.ly/2KuopwH</a></p></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="f340" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">属性验证</h1><p id="727e" class="pw-post-body-paragraph kw kx iq ky b kz mx jr lb lc my ju le lf mz lh li lj na ll lm ln nb lp lq lr ij bi translated">我们还可以用一种非常简单的方式来验证属性，就像这样:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nc nd l"/></div><p class="ks kt gj gh gi ku kv bd b be z dk translated"><a class="ae kf" href="http://bit.ly/2KqYJko" rel="noopener ugc nofollow" target="_blank">http://bit.ly/2KqYJko</a></p></figure><p id="1520" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当验证不成功时，它将在内部分配<code class="fe ls lt lu lv b">nil</code></p><p id="d870" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">score = -10</code></p><p id="67e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">print(score) // nil</code></p><p id="c8ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">score = 30</code></p><p id="6831" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">print(score) // Optional(30)</code></p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="029f" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated"><strong class="ak">附加示例</strong></h1><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ne"><img src="../Images/7d0ea0d0ac6bfe37b95f7d68df673722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bC2ZJ0h_im-yjxyihseQQA.png"/></div></div></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="1797" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">从这里去哪里</h1><p id="b841" class="pw-post-body-paragraph kw kx iq ky b kz mx jr lb lc my ju le lf mz lh li lj na ll lm ln nb lp lq lr ij bi translated">感谢<code class="fe ls lt lu lv b">@propertyWrapper</code>带来了无尽的新可能</p><p id="b799" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，您可以使用<code class="fe ls lt lu lv b">$propertyNameHere</code>来访问属性委托变量或方法。</p><p id="b138" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个很短的例子，但是我希望您从现在开始理解并使用这个新特性。感谢阅读。</p></div></div>    
</body>
</html>