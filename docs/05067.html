<html>
<head>
<title>Create an Awesome Loading State Using SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI创建一个令人敬畏的加载状态</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-an-awesome-loading-state-using-swiftui-9815ff6abb80?source=collection_archive---------5-----------------------#2020-06-04">https://betterprogramming.pub/create-an-awesome-loading-state-using-swiftui-9815ff6abb80?source=collection_archive---------5-----------------------#2020-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="201f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">美丽的装载状态</h2></div><p id="0b5d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在苹果全新的框架<strong class="kk iu"> SwiftUI </strong>中，创建一个直观的动画非常简单高效。在开始之前，请观看下面的视频，了解我们将要讨论的内容。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="lj lk l"/></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">动画片</p></figure><p id="6f60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的视频中，你看到了五个简单的活动动画，它们使用了SwiftUI中不同的内置<a class="ae lp" href="https://www.hackingwithswift.com/quick-start/swiftui/swiftuis-built-in-shapes" rel="noopener ugc nofollow" target="_blank">立体形状</a>。</p><p id="6870" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在SwiftUI中，我们可以使用<strong class="kk iu"> <em class="lq">添加动画来查看可动画的属性。</em>动画()</strong>修改器。视图中有一系列可设置动画的属性，如:</p><ol class=""><li id="25b4" class="lr ls it kk b kl km ko kp kr lt kv lu kz lv ld lw lx ly lz bi translated">不透明</li><li id="ff8d" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">抵消</li><li id="f8d4" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">规模</li><li id="681d" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">基本框架</li><li id="4045" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">等等…</li></ol><p id="5b59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您应该将任何一个可动画化的属性应用到您的视图中，以使用<code class="fe mf mg mh mi b">.animation()</code>修改器获得动画效果。带有<code class="fe mf mg mh mi b">.animation() </code>修改器的视图没有任何动画属性。话虽如此，我们还是开始吧。</p><blockquote class="mj mk ml"><p id="5316" class="ki kj lq kk b kl km ju kn ko kp jx kq mm ks kt ku mn kw kx ky mo la lb lc ld im bi translated">注:动画gif仅供参考。运行Xcode中的代码或检查上面的视频，以获得实际的动画流畅度。</p></blockquote></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="dca4" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">3个滑动圆圈</h1><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi no"><img src="../Images/7126958232cc9ed367459b95cb24e661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/1*hShXr9hDtKxHbHe3jQ_DQw.gif"/></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">3个滑动圆圈GIF</p></figure><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nr lk l"/></div></figure><ol class=""><li id="8bac" class="lr ls it kk b kl km ko kp kr lt kv lu kz lv ld lw lx ly lz bi translated">使用SwiftUI中的<strong class="kk iu">圆形</strong>形状创建三个宽和高均为20x20的圆。</li><li id="f24c" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">这里，我们正在制作圆形的<strong class="kk iu">偏移</strong>动画，这使得圆形从左边移动到right(➡️)和从右边移动到left(⬅️).</li><li id="285b" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">我们添加了一个<strong class="kk iu">定时器</strong>，它将每1.6秒触发一次，以交换偏移值。最初，偏移会在<strong class="kk iu"> 100 </strong> (leftOffset)，使圆从左向右移动；1.6秒后，leftOffset将交换为<strong class="kk iu"> -100 </strong>，使圆从右向左移动。</li><li id="cb7c" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">为什么是1.6秒-秒计时器？<strong class="kk iu"> <em class="lq"> 1.6 </em> </strong> <em class="lq">秒= 1圈动画时长(</em><strong class="kk iu"><em class="lq">1</em></strong><em class="lq">)+2圈延时(</em><strong class="kk iu"><em class="lq">0.2</em></strong><em class="lq">)+3圈延时(</em><strong class="kk iu"><em class="lq">0.4</em></strong><em class="lq">)。</em></li><li id="ad6d" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">我们降低了圆圈的不透明度，以增加从一边移动到另一边时的良好感觉。</li><li id="1864" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">你注意到第二圈和第三圈的<strong class="kk iu">延迟</strong>了吗？是的，延迟有助于在等待上述延迟后启动动画。在我们的例子中，延迟帮助我们一个接一个地转圈。如果我们不提延迟，所有的圈都会同时移动。</li><li id="02b5" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">我们使用默认的<strong class="kk iu"> easeInOut </strong>动画，持续时间为<strong class="kk iu">一秒钟</strong>。默认情况下有很多可用的动画，像easeIn，easeOut，spring等等…继续玩吧。</li></ol></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="41a7" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">水平滑杆</h1><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/bc3fa466c417aacb3df448679e1f5814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/1*I1-Kb8mVdEY8Z5hD4fOrvA.gif"/></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">水平滑动条GIF</p></figure><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nr lk l"/></div></figure><ol class=""><li id="4973" class="lr ls it kk b kl km ko kp kr lt kv lu kz lv ld lw lx ly lz bi translated">创建一个<strong class="kk iu">圆角矩形</strong>形状，圆角半径为<strong class="kk iu"> 10 </strong>，边框为80x20的<strong class="kk iu">T5。</strong></li><li id="7648" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">这里我们正在制作视图的<strong class="kk iu">偏移</strong>的动画。但这一次，我们实现了没有<strong class="kk iu">定时器的动画。</strong>我们增加了<strong class="kk iu">should animate</strong><em class="lq">@ State</em>变量来代替。</li><li id="0d1e" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">每当我们改变<strong class="kk iu"> shouldAnimate </strong>值时，SwiftUI将再次重新呈现视图的body属性。最初，我们将它设置为false和<a class="ae lp" href="https://medium.com/better-programming/view-life-cycle-methods-in-swiftui-b7fa9f0e8dfb" rel="noopener"> <strong class="kk iu"> <em class="lq">。onAppear() </em> </strong> </a>我们已经将其设置为true，从而触发动画。</li><li id="1bfc" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">视图如何在不交换偏移的情况下返回？🤔可能是因为<strong class="kk iu">。repeat forever(auto reverses:true)</strong>(🔁).这使得视图动画永远继续与漂亮的反向动画。</li><li id="aeee" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">尝试将autoreverses更改为<strong class="kk iu"> false </strong>，看看会发生什么。😅</li><li id="388f" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">我们使用默认的<strong class="kk iu"> easeInOut </strong>动画，持续时间为<strong class="kk iu"> 1秒</strong>。</li></ol></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="ff77" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">5条竖线</h1><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/dd3578ada9561353f61635cfd548634e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/1*Kr0i6XlnHE1-oAx_sNp-hQ.gif"/></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">5条竖线GIF</p></figure><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nr lk l"/></div></figure><ol class=""><li id="e18a" class="lr ls it kk b kl km ko kp kr lt kv lu kz lv ld lw lx ly lz bi translated">创建一个样式为10x50的<strong class="kk iu">连续</strong>和<strong class="kk iu"> </strong>帧的<strong class="kk iu">胶囊</strong>形状。</li><li id="0666" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">在这里，我们通过基于<strong class="kk iu"> shouldAnimate </strong>状态变量改变容器视图<strong class="kk iu"> HStack </strong>的宽度和间距来动画化容器视图<strong class="kk iu">而不是胶囊。</strong></li><li id="c3ed" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">看看当我们改变容器视图的宽度和间距时，子视图是如何被很好地动画化的。</li><li id="f5e8" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">使用<strong class="kk iu"> easeInOut </strong>动画。<strong class="kk iu">repeat forever(auto reverses:true)</strong>获得一个好看的反转动画，时长<strong class="kk iu"> 1秒</strong>。</li></ol></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="4bf0" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">3个刻度圆</h1><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7ad3902a12811da5e9908d9c0fed2ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/1*55EegehSCK1AtqFdHu7NRg.gif"/></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">3个缩放圆GIF</p></figure><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nr lk l"/></div></figure><ol class=""><li id="8270" class="lr ls it kk b kl km ko kp kr lt kv lu kz lv ld lw lx ly lz bi translated">在SwiftUI中使用<strong class="kk iu"> Circle </strong>形状创建三个宽度和高度均为20x20的圆。</li><li id="57ea" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">这里我们使用<strong class="kk iu"> <em class="lq">制作圆形的<strong class="kk iu">比例</strong>属性的动画。基于<strong class="kk iu">的scaleEffect() </strong></em> </strong>修改器应该激活状态变量</li><li id="9ef5" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">第二个和第三个圆圈中的延迟避免了所有圆圈同时放大和缩小。</li><li id="b888" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">使用<strong class="kk iu"> easeInOut </strong>动画。<strong class="kk iu">repeat forever(auto reverses:true)</strong>获得一个漂亮的反向动画，持续时间为<strong class="kk iu"> 0.5 </strong>秒。</li></ol></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="6c92" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">带波浪的圆圈</h1><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/20e7942c9765c07e37b96bd640c72a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*gwQB_VLm07m11ZLyO35d2g.gif"/></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">带波浪的圆圈GIF</p></figure><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nr lk l"/></div></figure><ol class=""><li id="6319" class="lr ls it kk b kl km ko kp kr lt kv lu kz lv ld lw lx ly lz bi translated">使用SwiftUI中的<strong class="kk iu">圆</strong>形状创建一个宽度和高度均为30x30的基圆。</li><li id="62fc" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">这里我们使用<strong class="kk iu"> <em class="lq">制作叠加圆的<strong class="kk iu">比例</strong>属性的动画。scaleEffect() </em> </strong>基于<strong class="kk iu">的修改器应该激活</strong>状态变量。</li><li id="a160" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">我们为叠加圆添加了不同的比例值，以获得波浪效果。</li><li id="8d9a" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated"><strong class="kk iu"> <em class="lq"> stroke() </em> </strong>像边框，推荐用于形状。<strong class="kk iu"> <em class="lq"> stroke() </em> </strong>应用形状一半内一半外的边框。</li><li id="c3c4" class="lr ls it kk b kl ma ko mb kr mc kv md kz me ld lw lx ly lz bi translated">使用<strong class="kk iu"> easeInOut </strong>动画。<strong class="kk iu">repeat forever(auto reverses:false)</strong>获得持续时间为<strong class="kk iu"> 1 </strong>秒的单向动画。</li></ol></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="e5a0" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">结论</h1><p id="8568" class="pw-post-body-paragraph ki kj it kk b kl nw ju kn ko nx jx kq kr ny kt ku kv nz kx ky kz oa lb lc ld im bi translated">使用SwiftUI，我们可以用更少的代码和工作创建任何复杂的动画。我们已经看到了它的基本水平。播放SwiftUI提供的默认动画，使用<strong class="kk iu"> <em class="lq">制作您的动画。</em>动画()</strong>根据需要修改器。</p><p id="a704" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完整的代码可在<a class="ae lp" href="https://github.com/karthironald/ActivityAnimations" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="f798" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">谢谢👨🏻‍💻</p></div></div>    
</body>
</html>