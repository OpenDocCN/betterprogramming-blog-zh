<html>
<head>
<title>Find and Fix Bugs Like a Pro With Divide and Conquer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专业人员一样通过分治法找到并修复错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/find-and-fix-bugs-like-a-pro-with-divide-and-conquer-d55f3cf91154?source=collection_archive---------11-----------------------#2020-05-18">https://betterprogramming.pub/find-and-fix-bugs-like-a-pro-with-divide-and-conquer-d55f3cf91154?source=collection_archive---------11-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="86fa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果我只能学到一件关于调试的事情，我会学会分而治之</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a637419a450a4250270d5210935ef251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2zpyOsqf4etm_XEneNpDw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">调试就像玩捉迷藏。Artur Rutkowski 在<a class="ae ky" href="https://unsplash.com/s/photos/hide-and-seek?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><h1 id="7366" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">各个击破</h1><p id="3613" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">分而治之是一种算法设计类型。它的工作原理是递归地将一个问题分解成两个(或更多)性质相似的小问题。如果你能解决小问题，你也能解决更大的问题。分而治之主要用于排序或查找最近的一对点。</p><p id="f2a6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是分而治之不止于此。你可以用这种心态来调试你的应用程序。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="c415" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">排除故障</h1><p id="53d0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于许多开发人员来说，调试是一项累人的任务。你需要知道你想要的输入和输出。你需要了解应用程序的代码和流程。通常发现一个错误比改正它要困难得多。</p><p id="45d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">无数程序员讨厌调试还有另一个原因。比起修理东西，我们更喜欢制造东西。创建新代码比花半天时间寻找一个错误并最终修改两行代码要令人满意得多。</p><p id="372a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">寻找bug的简单方法是一行一行地检查代码，记录数据，或者设置断点。你可以在琐碎的应用程序中使用，或者如果你知道错误在哪里。</p><p id="e463" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是通常，您需要调试一个大的应用程序，通常是在您熟悉代码库之前。制作成吨的原木将会花费很长时间。你必须做得更好。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/eda3e14e06b8616c0f35a1cd02af9a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*axtw4glWSXmG1e5XI6s9_Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aronvisuals?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Aron视觉效果</a>在<a class="ae ky" href="https://unsplash.com/collections/9826757/learning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="6d8d" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">基本的各个击破</h1><p id="9fd6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在调试中直接使用分治法是将代码库分成两半，并在那里添加一个日志。如果日志工作并打印出正确的数据，我们可以假设到那时为止一切都正常；否则，错误出现在代码的前半部分。</p><p id="cf34" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们取出可疑的那一半代码，在中间放入另一个日志。我们重复这个过程，直到发现问题。每次我们都将剩余的代码库减半，所以我们只需几个步骤就能找到错误。这比在所有代码中记录日志要好得多，但是我们可以更进一步。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="0ac4" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">有根据的猜测和分而治之</h1><p id="1d10" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">想象你的应用程序由数千行代码组成。很难找到中间的，你将需要几十个日志来发现罪魁祸首。现在是时候在添加日志之前退一步思考了。</p><p id="ce10" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">先回答几个问题，做一些假设。</p><p id="4b61" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">什么坏了？可能是某些字符串转换失败了；可能返回的数据不是您期望的类型，或者有其他问题？</p><ul class=""><li id="da3a" class="nf ng it lt b lu mn lx mo ma nh me ni mi nj mm nk nl nm nn bi translated">有没有一些测试或者检查过的部分代码？如果是这样的话，这个bug可能不存在。</li><li id="0522" class="nf ng it lt b lu no lx np ma nq me nr mi ns mm nk nl nm nn bi translated">bug是什么时候出现的？之前一切正常吗？什么变了？也许现在输入不同了，或者也许代码在两次提交后工作了。</li></ul><p id="f934" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当你回答了这些问题，你就准备好对bug的本质做出一个有根据的猜测了。</p><p id="554d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">每一个假设都可能被证明是错误的，但是你的目标不是正确的。这是为了找到最有可能的罪魁祸首，这样你就可以精确定位代码中可疑的部分。</p><p id="6078" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当你有几个假设时，放大最有可能的，然后分而治之。如果你找到了漏洞，那太好了。如果不是，进行下一个假设。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="8c14" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">各个击破的例子</h1><p id="cd8f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我将向您展示一个分而治之调试的真实例子。下面的代码获取一个HTML表单，并为其创建一个PNG图像。稍后，它将图像和表单数据发送到服务器，并重定向到另一个页面。</p><p id="7631" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">具体来说:</p><ul class=""><li id="65cd" class="nf ng it lt b lu mn lx mo ma nh me ni mi nj mm nk nl nm nn bi translated"><code class="fe nt nu nv nw b">toPng</code>获取HTML元素并返回图像(base64编码的数据)</li><li id="072d" class="nf ng it lt b lu no lx np ma nq me nr mi ns mm nk nl nm nn bi translated"><code class="fe nt nu nv nw b">dataUrltoFile</code>获取base64编码的数据并返回一个文件</li><li id="23c9" class="nf ng it lt b lu no lx np ma nq me nr mi ns mm nk nl nm nn bi translated"><code class="fe nt nu nv nw b">saveFormScreenshot</code>和<code class="fe nt nu nv nw b">saveDraft</code>向服务器发送数据</li><li id="660b" class="nf ng it lt b lu no lx np ma nq me nr mi ns mm nk nl nm nn bi translated"><code class="fe nt nu nv nw b">setRedirect</code>重定向到另一个页面</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/534a642ebb956cff20d406e4aa7acdb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZWJffpT7VuA6TWK_oG8IQ.png"/></div></div></figure><p id="da80" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">代码在Chrome上运行良好，但我在Safari上遇到了问题。程序没有返回任何东西——没有数据，没有错误。</p><h2 id="575f" class="ny la it bd lb nz oa dn lf ob oc dp lj ma od oe ll me of og ln mi oh oi lp oj bi translated">我的(幼稚)方法</h2><p id="2ea3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我在代码中间的第4行和第5行之间记录了一个响应。日志从来没有运行过，所以问题就在上面。</p><p id="199c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我的下一步是在第2行和第3行之间记录<code class="fe nt nu nv nw b">formAsFile</code>。那个日志也没有运行。</p><p id="1fc6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我得到了我的答案bug隐藏在第一行。功能<code class="fe nt nu nv nw b">toPng</code>从未完成。</p><h2 id="0862" class="ny la it bd lb nz oa dn lf ob oc dp lj ma od oe ll me of og ln mi oh oi lp oj bi translated">有根据的猜测方法</h2><p id="5a13" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，我应该分析为什么我没有得到一个错误。如果对服务器的请求有问题，我应该得到一个。所以最有可能失败的地方是在第1行或第2行。第二行中的一个简单日志就足以告诉我，我从未将图像从HTML中取出。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="71ed" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">结论</h1><p id="fc3f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">分而治之是查找bug的一种简便方法。你的工具箱里需要它。</p><p id="9c44" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你想知道潜在的错误是什么HTML元素太大，Safari无法转换成图像。</p></div></div>    
</body>
</html>