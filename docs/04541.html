<html>
<head>
<title>Draw Neat Trees With Git Rebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Git Rebase画出整齐的树</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/from-messy-to-beauty-with-git-rebase-2d2e9ec6070f?source=collection_archive---------19-----------------------#2020-04-20">https://betterprogramming.pub/from-messy-to-beauty-with-git-rebase-2d2e9ec6070f?source=collection_archive---------19-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dbe0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用交互式重置基准编辑或放弃您的提交</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/38837a9d531ddcf9db29b686df80bce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yAUsmcEoJaulRiRt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thecreative_exchange?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的创意交流</a>拍摄</p></figure><p id="6af1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重定Git分支的基础很有挑战性。我建议在深入研究之前，通过阅读“<a class="ae ky" href="https://medium.com/better-programming/dont-fret-with-git-rebase-75fe3ed5ca8f" rel="noopener">不要为Git Rebase </a>而烦恼”来更加熟悉它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a647" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您决定使用这个强大的命令，那么您已经迈出了最重要的一步。您已经展平了您的Git历史，创建了一个任何人都可以阅读的线性树。</p><p id="395a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们能做的就这些吗？当然不是——我们还没有利用Git rebase背后的真正力量。我会告诉你怎么做。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="103c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">超越Rebase</h1><p id="39a8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们假设你已经将<code class="fe mz na nb nc b">neat_branch</code>和<code class="fe mz na nb nc b">messy_branch</code>合并成了<code class="fe mz na nb nc b">develop</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/526207ef2a1a7251a8959b016752ad5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AWrU-puqJt9C7Szx8OdZ6g.png"/></div></div></figure><p id="1277" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成的树看起来又平又整齐。不过，多挤压我们的树不是更有帮助吗？也许有些行为是可以避免的？</p><p id="6103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然<code class="fe mz na nb nc b">neat_branch</code>看起来不错，<code class="fe mz na nb nc b">messy_branch</code> <em class="ne"> </em>包含了<em class="ne"> </em>几个我们可以丢弃的提交。两次提交表示“固定”前缀，这可能不会带来太多信息。更糟糕的是，有人推了一个临时提交。</p><p id="19b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Git rebase提供了进一步重写Git历史的选项。让我们收拾残局吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aee0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">与你的Rebase互动</h1><p id="ad6c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当引用官方的<a class="ae ky" href="https://git-scm.com/docs/git-rebase#_interactive_mode" rel="noopener ugc nofollow" target="_blank">文档</a>时，你可以在重定分支的基础上与你的提交交互。让我们关注以下选项:</p><ul class=""><li id="e8b6" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">选择(p):默认选项。基本上，保持提交原样。</li><li id="86f7" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">Reword (r):选择提交，但允许您重命名提交的标题。</li><li id="0fe3" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">挤压:将提交的内容与前一次提交的内容合并。</li></ul><p id="00db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:你不能压制你的第一个分支的提交。</p><p id="6c4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到我们的例子，我们将几个提交合并成一个，并重命名提交的标题，使它更相关。</p><pre class="kj kk kl km gt nt nc nu nv aw nw bi"><span id="4775" class="nx md it nc b gy ny nz l oa ob">$ git fetch --all<br/>$ git checkout messy_branch<br/>$ git rebase -i origin/develop</span></pre><p id="bd54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们立即得到分行历史的提示。</p><pre class="kj kk kl km gt nt nc nu nv aw nw bi"><span id="23ed" class="nx md it nc b gy ny nz l oa ob">pick <!-- -->29d2bab<!-- --> First commit on messy branch<br/>pick <!-- -->de7cdc8<!-- --> Fix build<br/>pick <!-- -->e120b7c<!-- --> Fix Unit tests<br/>pick <!-- -->8f79ef0<!-- --> Tmp commit<br/>pick <!-- -->ff1b89b<!-- --> Very bad tipo<br/>pick <!-- -->c8c0ba5<!-- --> Final commit</span></pre><p id="3dc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们挤压一些不相关的提交，并重命名一个错误类型的提交。我们只与我们感兴趣的提交进行交互。</p><pre class="kj kk kl km gt nt nc nu nv aw nw bi"><span id="c52c" class="nx md it nc b gy ny nz l oa ob">pick <!-- -->29d2bab<!-- --> First commit on messy branch<br/>s <!-- -->de7cdc8<!-- --> Fix build<br/>s <!-- -->e120b7c<!-- --> Fix Unit tests<br/>s <!-- -->8f79ef0<!-- --> Tmp commit<br/>r <!-- -->ff1b89b<!-- --> Very bad tipo<br/>pick <!-- -->c8c0ba5<!-- --> Final commit</span></pre><p id="7350" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们继续这个设置。我们将把第二到第四个提交压缩到第一个中。我们还利用重命名第五个提交。</p><p id="5e3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">击中第一个壁球时，基础将停止。提示器显示你所有被挤压的提交将变成一个更重要的提交。验证并继续。</p><p id="617f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，是时候按照上面的要求重命名我们类型不良的提交了。编辑您的提交名称，并最终确定rebase。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/221b7fc8b6de882ddf45854002024119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TRj2g9xuqlKhPxcmvimYwA.png"/></div></div></figure><p id="39fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这看起来像是一个小小的进步，但我向你保证，它可以让你避免眼睛过度疲劳。有些分支可能每个分支包含二十多个提交，迫使您在找到想要的内容之前向下滚动很多次。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8f97" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">关于壁球的想法？</h1><p id="7c46" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">人们经常问我我们应该什么时候打壁球。在我看来，对每项任务进行单独的提交可以减轻审查，应该鼓励这样做。</p><p id="95f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦您的团队成员批准了您的拉请求，您可能会在合并之前将您的分支重新基于目标分支。我建议通过做最后一次清扫从这次行动中获利。</p><p id="d03b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你能养成清理Git历史的习惯。从长远来看，这次行动对你和你的整个团队都有好处。</p><p id="203c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请保持联系，我们会有更多的文章。</p></div></div>    
</body>
</html>