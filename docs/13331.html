<html>
<head>
<title>APIs: An In-Depth Explanation for People Who Aren’t Into Tech</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">API:对不喜欢科技的人的深入解释</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/apis-an-in-depth-explanation-for-people-who-arent-into-tech-a6174f944385?source=collection_archive---------10-----------------------#2022-08-17">https://betterprogramming.pub/apis-an-in-depth-explanation-for-people-who-arent-into-tech-a6174f944385?source=collection_archive---------10-----------------------#2022-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="544b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是API？是什么让它变好或变坏？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2973f4ae669a103214b319267232a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAa0HyOodcFqvXmIWJqcnw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在本文中，您将了解什么是API。</p></figure><p id="0f7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在过去的200年里，我们生产和交换信息的速度大大提高了。它始于1833年的电磁电报，但在1971年第一封电子邮件发出后，它就变得疯狂了。</p><p id="f736" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一场革命。突然间，世界各地的人们可以交换书面信息。</p><p id="e58e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与此同时，我们开始自动化越来越多的任务。自动取款机在1972年开始取代银行出纳员；公共交通取代了很大一部分个人交通，更大的农业机械提高了效率。</p><p id="827a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">越多的事物和服务被数字化，我们就越能实现自动化。连接这些服务变得越来越重要:你希望能够发送招聘电子邮件，并在招聘门户中提供这些服务。一旦你预约了，日期应该在招聘人员的日程表上。</p><p id="5e2f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">连接服务意味着一个服务需要提供信息，另一个服务需要消费信息。消费者必须能够和提供者“说同一种语言”。对于日历事件，这可以是类似于<code class="fe lu lv lw lx b">.ical</code>的文件格式。或者它可以是不同于文件的另一个接口。一个开发者可以用来编写他们自己的东西的接口。应用程序编程接口，或称API。</p><h1 id="06dc" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">什么是API？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/364fcb3a96f8aef9ea61f305601ba54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0xABjhrOegGzkIuZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·温克勒在<a class="ae mr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="68fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很多人写软件。有时他们的程序可以自己做所有的事情，但在很多情况下，开发人员(也称为程序员)使用其他人的工作作为构建模块。这有多种方式:将他人的代码直接复制到您自己的项目中被称为“出售”如果你在你的机器上安装这个项目，它通常被称为“使用库/框架”然后还有服务。</p><p id="a1b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">服务通常不会在您的机器上运行。有人在照顾他们。它是互联网上的服务器。该服务器有一个明确定义的连接方式。类似于您可以打开浏览器并输入URL。然后，浏览器向该服务器发送请求数据的包。然后，浏览器将响应可视化，通常是HTML、图像和JavaScript。</p><p id="c228" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">API首先是接口。就像遥控器是电视的接口一样。</p><blockquote class="ms"><p id="4441" class="mt mu it bd mv mw mx my mz na nb lt dk translated">接口位于两个系统的边界。它们允许两个系统相互作用。</p></blockquote><figure class="nd ne nf ng nh kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/85ecf824ff75442b8675047468f67ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8JY4iMyzJRPme1Vl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae mr" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kelly Sikkema </a>在<a class="ae mr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9f0b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">API是一个应用程序编程接口。</p><blockquote class="ms"><p id="337a" class="mt mu it bd mv mw mx my mz na nb lt dk translated">API是两个程序之间的接口。</p></blockquote><p id="620c" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">您可以用许多不同的方式定义APIs就像您可以用远程控制一样。但就像有些电视不接受某些遥控器一样，不是每个程序都接受每个API。开发人员必须努力增加对特定API的支持。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2973f4ae669a103214b319267232a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAa0HyOodcFqvXmIWJqcnw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在互联网上，许多通信都是按照请求-响应原则进行的:客户端向服务器发送请求，然后接收响应。服务器的接触点是它的API。典型地(但不一定！)，服务器有数据库(DB)。客户端可以是运行在用户浏览器中的代码。也可能是另一种服务。</p></figure><p id="b454" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一组非常常见的API是所谓的REST-API。它们工作在HTTP协议之上。这使用请求-响应原则，类似于人们使用他们的浏览器:</p><ol class=""><li id="42df" class="nn no it la b lb lc le lf lh np ll nq lp nr lt ns nt nu nv bi translated">请求:程序向一个端点(URL)发送请求。比如<code class="fe lu lv lw lx b">https://example.com/api/books</code>。该请求可能包含两种形式的更多信息:报头和有效载荷。报头可以是认证信息——任何让接收服务器知道您被允许查看您请求的内容的信息。有效负载确切地指定了您想要的内容，例如<code class="fe lu lv lw lx b">series=Lord of the Rings</code>。</li><li id="9c08" class="nn no it la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">响应:响应可以是任何内容。它还包含状态代码、标题和正文。标头可能会告诉您主体被压缩或被缓存。</li></ol><p id="ec7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于本文，当我谈到API时，我指的是“REST-API”。还有其他API，但REST是当今最流行的API风格。</p><h1 id="297a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">如何记录REST APIs？</h1><p id="db63" class="pw-post-body-paragraph ky kz it la b lb ob ju ld le oc jx lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">REST APIs通常使用OpenAPI规范进行文档化。OpenAPI文档以YAML格式存储在文本文件中。看起来是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="0573" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以看到域名(example.com)没有被指定，但是URL的其余部分<code class="fe lu lv lw lx b">/store/order</code>在那里。它指定了HTTP方法“post”</p><blockquote class="oi oj ok"><p id="05dd" class="ky kz ol la b lb lc ju ld le lf jx lg om li lj lk on lm ln lo oo lq lr ls lt im bi translated"><code class="fe lu lv lw lx b">HTTP</code>方法只是协议的另一部分。有<code class="fe lu lv lw lx b">GET</code>检索素材、<code class="fe lu lv lw lx b">POST</code>创建素材、<code class="fe lu lv lw lx b">PATCH</code>和<code class="fe lu lv lw lx b">PUT</code>修改素材、<code class="fe lu lv lw lx b">DELETE</code>删除素材。</p></blockquote><p id="aa84" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该文档定义请求体必须采用JSON格式，并遵循<code class="fe lu lv lw lx b">Order</code>模式。稍后在OpenAPI文档中会详细说明。</p><p id="4935" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，OpenAPI文档指定了在发送这样的请求时可能得到的响应:成功订单的状态为<code class="fe lu lv lw lx b">200</code>,无效订单的状态为<code class="fe lu lv lw lx b">400</code>。</p><blockquote class="oi oj ok"><p id="3dda" class="ky kz ol la b lb lc ju ld le lf jx lg om li lj lk on lm ln lo oo lq lr ls lt im bi translated">有许多HTTP状态码的<a class="ae mr" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" rel="noopener ugc nofollow" target="_blank">。它们都有3个数字，重要的部分是第一个数字:2xx是成功消息，4xx是请求出错，5xx是服务器出错。你不会经常看到1xx和3xx。细节很重要，但只对开发者而言。</a></p></blockquote><h1 id="5ee3" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">如何阅读OpenAPI规范？</h1><p id="d9fb" class="pw-post-body-paragraph ky kz it la b lb ob ju ld le oc jx lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">有两个工具可以使OpenAPI规范文件可读:ReDoc和Swagger。</p><p id="8155" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Swagger是一种广为人知的解决方案。他们已经开始开发OpenAPI规范。这就是我们有时将术语Swagger和OpenAPI作为同义词使用的原因，尽管它们在概念上非常不同</p><blockquote class="ms"><p id="57f1" class="mt mu it bd mv mw mx my mz na nb lt dk translated">Swagger是一个使用OpenAPI规范为REST APIs生成文档的工具。</p></blockquote><p id="ec89" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">Swagger文档看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/fcd2f5902be9f7ca2004bdcae8588bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-F3XYNKV8Ztcobzdj7jFIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">著名宠物店OpenAPI规范截图，用Swagger渲染成易读的HTML文档。</p></figure><p id="b1ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ReDoc是显示文档的另一种方式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/693f73b72b19152e6f01692711611189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIFSp341ZxTOC-w37PPaUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">ReDoc为OpenAPI规范生成了一个非常简洁的可视化。</p></figure><h1 id="61e9" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">API文档还需要什么？</h1><p id="0aac" class="pw-post-body-paragraph ky kz it la b lb ob ju ld le oc jx lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">通常，一个新API最难的部分是入门:如何认证？你如何完成一个典型的工作流程？使用了哪些约定？</p><p id="3343" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是否有速率限制，也就是说你必须小心不要打太多电话？有些电话不是免费的，甚至打起来很贵吗？有什么我应该知道的电话副作用吗？</p><h1 id="fa6a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">REST API的好坏取决于什么？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/5c5d9fe3b2f5a353f721b2db04060681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fnkdoNi_7UFpX-tv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae mr" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">肯尼·埃利亚松</a>在<a class="ae mr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8343" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果REST API是用OpenAPI完全指定的，并且有一个可访问的Swagger/Redoc页面，那么它已经走了很长的路。如果有额外的文档帮助您完成第一步并展示如何组合使用不同的端点，那就更好了。</p><p id="cfdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个坏的REST API是不一致的，完全没有文档记录，有不同的非标准认证机制。此外，像任何软件一样，糟糕的API也有错误和停机时间。</p><p id="a7d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于最后一句话，你可以注意到一个有趣的效果:作为用户，我们开始不再区分界面和服务。更正确的说法是，服务错误地实现了API，并且实现API的服务关闭了。但很多情况下，人们把“API”和“API背后的服务”当成同义词。</p><p id="636d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">服务本身只是软件，因此有功能性和非功能性需求。功能需求是您希望能够完成的事情。如果API是图书馆的接口，您可能需要订购一本书或查看您当前租借的书籍。</p><p id="b781" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">非功能性需求是关于你如何做事的:服务在99.9%的时间里都是可用的吗？大多数时候它的反应有多快？</p><h1 id="d8a7" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">摘要</h1><p id="e2b9" class="pw-post-body-paragraph ky kz it la b lb ob ju ld le oc jx lg lh od lj lk ll oe ln lo lp of lr ls lt im bi translated">API是允许服务进行通信的接触点。它需要以某种形式记录下来，以便其他人能够使用。OpenAPI是指定REST APIs的一种方式。使用OpenAPI规范，您可以使用Swagger或ReDoc来记录API。</p></div></div>    
</body>
</html>