<html>
<head>
<title>Optimize Jekyll Assets With Gulp Using Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Netlify通过Gulp优化Jekyll资产</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-jekyll-with-gulp-and-netlify-dbe5e1bfec62?source=collection_archive---------28-----------------------#2020-01-28">https://betterprogramming.pub/using-jekyll-with-gulp-and-netlify-dbe5e1bfec62?source=collection_archive---------28-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1818" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Netlify的持续部署功能来发布我们的网站</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8c0c31c4f3df7ac2adcb5d593ff08b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RG2aA2xEXqG2M-fWdExHzA.png"/></div></div></figure><p id="e3c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章是为那些希望用Netlify建立一个ekyll + Gulp工作流的人准备的，以利用Netlify与GitHub的无缝集成及其连续部署(CD)特性。</p><p id="7c2d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">人们总是可以用Jekyll建立一个Gulp工作流，然后在Netlify上手动部署它——有许多文章可以帮助您解决这个问题——但是手动部署会绕过CD，这可以说是Netlify的最佳特性，允许通过快速的git推送来触发部署。</p><p id="79d1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在这里想要实现的是运行一个完全优化的Jekyll博客——所有的图片都被缩小，样式表被捆绑。Gulp应该负责所有的优化，但是写一篇简单的博客文章不应该是一件麻烦的任务，你必须每次都运行<code class="fe lq lr ls lt b">jekyll build</code>和<code class="fe lq lr ls lt b">gulp build</code>——更不用说本地安装所有Gulp模块的麻烦了。它应该像执行一个简单的git推送一样简单。</p><p id="8466" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我们可以利用Netlify的CD特性来为我们处理网站的构建、优化和部署。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="3e4d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">我们开始吧</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/c0eb2a894c57aef3e44769af22334eee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1DRpMevlnpmn-13R2pwXWg.png"/></div></div><p class="mu mv gj gh gi mw mx bd b be z dk translated">设置存储库</p></figure><ol class=""><li id="e7f8" class="my mz it kw b kx ky la lb ld na lh nb ll nc lp nd ne nf ng bi translated">为项目建立一个新的<a class="ae nh" href="https://github.com/chiragpaliwal/jekyllBlog" rel="noopener ugc nofollow" target="_blank"> Github回购</a>，并将回购与Netlify关联。</li><li id="8c82" class="my mz it kw b kx ni la nj ld nk lh nl ll nm lp nd ne nf ng bi translated">在根目录中创建一个<a class="ae nh" href="https://github.com/chiragpaliwal/jekyllBlog/blob/master/gulpfile.js" rel="noopener ugc nofollow" target="_blank"> gulpfile.js </a>，在这里我们将定义我们的Gulp任务。</li><li id="13b6" class="my mz it kw b kx ni la nj ld nk lh nl ll nm lp nd ne nf ng bi translated">在根目录下做一个<code class="fe lq lr ls lt b">npm init -y</code>或者创建一个<a class="ae nh" href="https://github.com/chiragpaliwal/jekyllBlog/blob/master/package.json" rel="noopener ugc nofollow" target="_blank"> package.json </a>文件。</li></ol><p id="b35b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lq lr ls lt b">"build": jekyll build &amp;&amp; gulp build</code></p><p id="fd81" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里需要注意的一件事是名为<code class="fe lq lr ls lt b">build</code>的npm脚本——作为部署过程的一部分，我们将使用它在Netlify上构建我们的网站。(两个任务之间的双&amp;符号是为了确保任务按顺序运行。)</p><p id="2df9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要运行的两个主要任务是:</p><ul class=""><li id="aa83" class="my mz it kw b kx ky la lb ld na lh nb ll nc lp nn ne nf ng bi translated"><code class="fe lq lr ls lt b">jekyll build</code>(在<code class="fe lq lr ls lt b">_site</code>目录中构建Jekyll站点)</li><li id="3d31" class="my mz it kw b kx ni la nj ld nk lh nl ll nm lp nn ne nf ng bi translated"><code class="fe lq lr ls lt b">gulp build</code>(运行大口魔法)</li></ul><p id="2ca3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，转到Netlify和已部署站点的站点设置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/1731bce2bff4d3f7a8b69ceee4a4166f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ryKjtP7TgaAxbnNL2sWyw.png"/></div></div></figure><p id="9ded" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">转到Build &amp; deploy选项卡，编辑Build命令，并使用我们前面定义的npm运行脚本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/cb57fc714a1bc9092e5e21d14455b8c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qXtHZC79joRuWwtHrNYuKA.png"/></div></div></figure><p id="202a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这应该能行。现在，每当我们执行一个<code class="fe lq lr ls lt b">git push</code>，它应该会触发Netlify上的一个新部署，负责构建我们的网站以及执行Gulp任务。</p><p id="8348" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望那有帮助。感谢阅读！</p></div></div>    
</body>
</html>