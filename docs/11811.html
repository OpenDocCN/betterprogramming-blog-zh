<html>
<head>
<title>How To Build a Todo Application With Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Django构建Todo应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-todo-application-with-django-ac675811d77b?source=collection_archive---------7-----------------------#2022-04-19">https://betterprogramming.pub/how-to-build-a-todo-application-with-django-ac675811d77b?source=collection_archive---------7-----------------------#2022-04-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7253" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何构建CRUD web应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e0dceb4f96b7c65a0ed661ab6d17c47d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJ8KmgdAE-aHFwNHwnn40w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安内特·lūsiņa在<a class="ae ky" href="https://unsplash.com/s/photos/todo-application?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d123" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">todo应用程序是每个开发人员都应该尝试构建的应用程序之一，因为它涵盖了开发中所有常用的模式，例如:</p><ul class=""><li id="51a8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">数据库</li><li id="cf10" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">视图</li><li id="8bab" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">模板</li></ul><p id="7ccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，您将使用Django构建一个全功能的todo应用程序。您将能够执行以下操作:</p><ul class=""><li id="b1d8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">查看所有待办事项</li><li id="fc9c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">添加新的待办事项</li><li id="1b34" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">更新待办事项</li><li id="8396" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">删除待办事项</li></ul><p id="6caf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程结束时，您将了解这些技能:</p><ul class=""><li id="c35f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">在编写任何一行代码之前，都要设计好项目。</li><li id="3fce" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何创建虚拟环境？</li><li id="ff24" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何建立自己的Django项目？</li><li id="0616" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">建模数据库关系。</li><li id="07a7" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">对数据库执行操作，如创建、更新、读取和删除。</li><li id="a7a0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">将从数据库接收的数据呈现到网页。</li></ul><h1 id="0cad" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">为什么是姜戈？</h1><p id="cb1d" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Django是一个高级Python框架，非常适合构建复杂的数据库驱动的应用程序。你知道Django为Instagram等一些最著名的网站提供支持吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/dab857f84bd8707380f2cf5300302a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O4PQSC7_vsqnY_tJVSR__A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thomascpark?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">托马斯·帕克</a>在<a class="ae ky" href="https://unsplash.com/s/photos/surprised-face?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h2 id="61da" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">先决条件</h2><p id="ebdd" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">你应该已经有了</p><ul class=""><li id="08e6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">Python3已安装</li><li id="f65d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Python和Django的基础知识</li></ul><h1 id="8da3" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">项目设计</h1><p id="ace6" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在编写任何代码之前有一个构建内容的思考过程将会为你将来省去很多麻烦。例如，首先要考虑您的数据库，并提出以下问题:</p><ul class=""><li id="8434" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">我的数据库会是什么样子？</li><li id="7946" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">我需要捕捉哪些细节？</li><li id="3bf1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">待办事项有哪些属性？</li><li id="d296" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">界面会是什么样子？</li></ul><p id="d3d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你有了一个合适的设计，你就可以开始建造了。</p><h2 id="9bc7" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">入门指南</h2><p id="221e" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">与往常一样，建议在使用Python项目时创建一个虚拟环境，以将项目依赖关系与系统的其余部分隔离开来。因此，使用以下代码创建一个目录并放入cd:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="99af" class="nh mk it nu b gy ny nz l oa ob">mkdir TODO<br/>cd TODO</span></pre><p id="ff9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<a class="ae ky" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwj6noyF2Zr3AhXJzaQKHQGFBecQFnoECBEQAQ&amp;url=https%3A%2F%2Fdocs.python.org%2F3%2Flibrary%2Fvenv.html&amp;usg=AOvVaw1SQ6VGTcJCX7W6wOs1SpnV" rel="noopener ugc nofollow" target="_blank"> venv </a>模块创建一个虚拟环境并激活它。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="540a" class="nh mk it nu b gy ny nz l oa ob">python3 -m venv env<br/>source env/bin/activate</span></pre><p id="e28b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用pip安装Django。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="f6ea" class="nh mk it nu b gy ny nz l oa ob">pip install Django</span></pre><p id="22df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个名为<code class="fe oc od oe nu b">todoapp</code>的新Django项目。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="1167" class="nh mk it nu b gy ny nz l oa ob">django-admin startproject todoapp</span></pre><p id="43cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在新的<code class="fe oc od oe nu b">todoapp</code>目录中，创建一个名为tasks的app，如下图所示:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="8fcd" class="nh mk it nu b gy ny nz l oa ob">cd todoapp<br/>django-admin startapp tasks</span></pre><p id="fd2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Django将为项目创建以下文件，您的目录应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/fb38ca2f5ad7bf30198fe489186d60c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*bp6CEhx_vq83lGD_PdHvug.png"/></div></figure><p id="f540" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将任务app添加到<code class="fe oc od oe nu b">settings.py</code>中的<code class="fe oc od oe nu b">installed_apps</code>列表中，如下图所示。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="2cfa" class="nh mk it nu b gy ny nz l oa ob">INSTALLED_APPS = [</span><span id="3064" class="nh mk it nu b gy og nz l oa ob">.....</span><span id="243e" class="nh mk it nu b gy og nz l oa ob">'tasks' #add this</span><span id="46b8" class="nh mk it nu b gy og nz l oa ob">]</span></pre><h2 id="8afa" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">数据库</h2><p id="66b7" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Django附带SQLite，这是一个轻量级数据库应用程序。如果您希望使用任何其他数据库，您可以选择如下选项:</p><ul class=""><li id="ac58" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">一种数据库系统</li><li id="7d76" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Mongo数据库</li><li id="6a2c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Mysql，等等</li></ul><h2 id="3b74" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">模型</h2><p id="a384" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">您希望存储在应用程序中的东西(待办事项)由模型表示。反过来，模型也有属性。例如，模型用户可以具有诸如用户名、电子邮件等属性。</p><p id="6583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，您的数据库将有一个模型，即:</p><ul class=""><li id="60a8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">任务项</li></ul><p id="2deb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开任务/模型并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d8c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，上面的代码中发生了什么呢？我们来分解一下。</p><ul class=""><li id="c62d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">首先，您定义了<code class="fe oc od oe nu b">TaskItem</code>模型，它将有<code class="fe oc od oe nu b">title</code>、<code class="fe oc od oe nu b">body</code>、<code class="fe oc od oe nu b">due_data</code>和一个布尔字段，用于检查任务是否已经完成。</li><li id="7847" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">接下来，定义一个字段类别，该类别包含一系列选项:默认、个人、购物、愿望列表和工作。</li><li id="af80" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">然后是<code class="fe oc od oe nu b">__str__()</code>方法，它给出了模型实例对象的“类似英语”版本</li></ul><h2 id="9545" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">迁移</h2><p id="249e" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">运行迁移会影响您对模型所做的所有更改。因此，运行<code class="fe oc od oe nu b">migrations</code>命令。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="076c" class="nh mk it nu b gy ny nz l oa ob">python manage.py makemigrations<br/>Migrations for 'tasks':<br/>  tasks/migrations/0001_initial.py<br/>    - Create model TaskItem</span></pre><p id="b589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是<code class="fe oc od oe nu b">migrate</code>命令，它将创建数据库表。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="6a50" class="nh mk it nu b gy ny nz l oa ob">python manage.py migrate<br/>Operations to perform:<br/>  Apply all migrations: admin, auth, contenttypes, sessions, tasks<br/>Running migrations:<br/>  Applying tasks.0001_initial... OK</span></pre><h2 id="e950" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">Django管理站点</h2><p id="02f4" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Django管理站点是一个功能强大的界面，可以很容易地添加和管理数据。首先要做的是创建一个超级用户，他将能够在管理界面中添加和删除数据。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="1867" class="nh mk it nu b gy ny nz l oa ob">python manage.py createsuperuser<br/>Username (leave blank to use 'earth'): admin<br/>Email address: <br/>Password: <br/>Password (again): <br/>Superuser created successfully</span></pre><p id="0490" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在管理应用程序中注册模型。打开<code class="fe oc od oe nu b">admin.py</code>文件，添加以下代码:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="539d" class="nh mk it nu b gy ny nz l oa ob">from django.contrib import admin</span><span id="d7ac" class="nh mk it nu b gy og nz l oa ob">from .models import TaskItem</span><span id="73fb" class="nh mk it nu b gy og nz l oa ob"># Register your models here.</span><span id="5d03" class="nh mk it nu b gy og nz l oa ob">admin.site.register(TaskItem)</span></pre><p id="15a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行开发服务器，导航到<code class="fe oc od oe nu b"><a class="ae ky" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/</a>admin</code>并使用超级用户凭证登录。您应该会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/947ab0c7bf4e4473d3b4fbb2d5096e46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlxOHZf8_H1tV2YLz1RIZA.png"/></div></div></figure><p id="1f2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以添加一些数据来使用。</p><h1 id="4546" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">视图和模板</h1><p id="49cb" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Django中的视图向模板发送数据，而模板显示数据。使用Django的最大优势是它提供了内置的视图，这些视图抽象了CRUD操作的大部分底层功能。这就是你要利用的。</p><h2 id="40c9" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">基于类的通用视图</h2><p id="5ca5" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">第一个视图是从数据库中获取所有<code class="fe oc od oe nu b">Task</code>项的视图。打开<code class="fe oc od oe nu b">views.py</code>并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="c0ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oc od oe nu b">ListView</code>是一种通用视图，可以检索列表中的条目。该类需要两个属性:<code class="fe oc od oe nu b">model</code>和<code class="fe oc od oe nu b">template_name</code>，它将执行从数据库中检索所有<code class="fe oc od oe nu b">TaskItem</code>对象所需的所有功能。你现在需要创建<code class="fe oc od oe nu b">todoitem_list.html</code>模板。Django将默认在templates目录中查找模板，因此文件目录应该遵循以下约定:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="6637" class="nh mk it nu b gy ny nz l oa ob">tasks/ <br/>    templates/<br/>           tasks/<br/>            -task-list.html</span></pre><h2 id="cc7f" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">Django中的模板</h2><p id="c2c9" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">该视图将提供一个与模板通信的上下文(<code class="fe oc od oe nu b">object_list</code>)。模板将使用花括号作为Django传递的数据的占位符。打开<code class="fe oc od oe nu b">task-list.html</code>并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="4015" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">资源定位符</h2><p id="af36" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">当一个客户端请求一个特定的URL时，Django将获取该地址，将其传递给URL解析器，然后将其与一个模式列表进行匹配。如果找到匹配，它将被传递给正确的视图函数。打开<code class="fe oc od oe nu b">urls.py</code>并添加一个对应于我们上面定义的<code class="fe oc od oe nu b">TodoItemListView</code>的URL模式，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d316" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看所有待办事项的路径可以在<code class="fe oc od oe nu b"><a class="ae ky" href="http://127.0.0.1:8000/todo/list" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/tasks</a></code>找到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/37d7c749ec9a23b23b0922286be5f45c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kc7QtuXesMkQvIJaGnhQSA.png"/></div></div></figure><h2 id="9895" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">形式</h2><p id="d467" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">到目前为止，您一直在使用管理界面添加待办事项。但这不是理想的方式。您需要在web应用程序中添加表单来使其变得更好。Django带有内置的<code class="fe oc od oe nu b">ModelForm</code>类，使得从模型类创建表单变得容易。在tasks应用程序中创建一个文件<code class="fe oc od oe nu b">forms.py</code>，并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="ec10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oc od oe nu b">TaskItemCreate</code>表单将自动为上面定义的字段生成表单字段</p><h2 id="1bdf" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">创建待办事项</h2><p id="b84a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">您仍将使用Django的内置泛型类来实现这一点。打开<code class="fe oc od oe nu b">views.py</code>并创建一个用于创建新待办事项的视图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="0ce6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个视图和<code class="fe oc od oe nu b">CreateTodoItemView</code>之间的唯一区别是现在您添加了两个额外的属性，即一个<code class="fe oc od oe nu b">form_class</code>和一个<code class="fe oc od oe nu b">success_url</code>。一个<code class="fe oc od oe nu b">success_url</code>定义了成功创建一个新的待办事项后用户将被重定向到的路径。</p><p id="552a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建<code class="fe oc od oe nu b">todoitemcreate_form.html</code>模板并添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="9b5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如下所示更新URL:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="a98e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航至<code class="fe oc od oe nu b"><a class="ae ky" href="http://127.0.0.1:8000/todo/create" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/todo/create</a></code>并添加新的待办事项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/728cefaf1beedfe72be7582be0e1e71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9phvAFiwT_XIdXYACIpGkg.png"/></div></div></figure><h2 id="b197" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">更新和删除待办事项</h2><p id="eda0" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">从上面的端点可以看出，泛型类提供了大多数底层功能。在本节中，您将添加更新和删除待办事项的功能。您将使用学到的概念，包括以下内容:</p><ul class=""><li id="2484" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">从模型创建表单</li><li id="72ea" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">创建视图</li><li id="c873" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">将上下文数据呈现到HTML页面</li></ul><p id="238a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe oc od oe nu b">forms.py</code>，添加一个更新待办事项的表单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="dd94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您只需要更新那些在<code class="fe oc od oe nu b">Meta</code>类中指定的字段。<br/>接下来，创建用于更新和删除待办事项的视图。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="34ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建相应的模板</p><p id="7030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oc od oe nu b">todoitem_update_form.html</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="87de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oc od oe nu b">todoitem_delete_form.html</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="00d6" class="nh mk it bd ml ni nj dn mp nk nl dp mt li nm nn mv lm no np mx lq nq nr mz ns bi translated">资源定位符</h2><p id="e806" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">按如下方式更新<code class="fe oc od oe nu b">url.py</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="6343" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oc od oe nu b">todo/update/&lt;pk&gt;</code>和<code class="fe oc od oe nu b">todo/delete.&lt;pk&gt;</code>路径将根据其主键检索待办事项。例如，如果您想用<code class="fe oc od oe nu b">id ==1</code>更新一个实例，那么路径将是<code class="fe oc od oe nu b"><a class="ae ky" href="http://127.0.0.1:8000/todo/delete/1" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/todo/update/1</a></code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/82816b2dc5e20fd824947b57094022d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbmLc3C2MXKBZDb1fnkAXg.png"/></div></div></figure><p id="7025" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要删除待办事项，导航至<code class="fe oc od oe nu b"><a class="ae ky" href="http://127.0.0.1:8000/todo/delete/1" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/todo/delete/1</a></code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/6b44c06de156fbfd982f6cfe70ed0487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vXmHXYifW5ISQ9GzWxbkTw.png"/></div></div></figure><h1 id="4399" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="1d15" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">您的应用程序现在执行它的预期功能，也就是说，您可以查看、创建、更新和删除待办事项。</p><p id="41c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢读这篇文章，你可能会喜欢这些文章:</p><div class="om on gp gr oo op"><a rel="noopener  ugc nofollow" target="_blank" href="/everything-you-need-to-know-about-django-models-in-python-2a44ed4293dd"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">关于Python中的Django模型，您需要知道的一切</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">Django模型综合指南</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">better编程. pub</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks op"/></div></div></a></div><div class="om on gp gr oo op"><a rel="noopener  ugc nofollow" target="_blank" href="/a-detailed-guide-to-user-registration-login-and-logout-in-flask-e86535665c07"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">Flask中用户注册、登录和注销的详细指南</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">如何在Flask中设置用户帐户</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">better编程. pub</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd ks op"/></div></div></a></div><p id="31bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我每周都会发布新的Python教程。关注并订阅更多。</p></div></div>    
</body>
</html>