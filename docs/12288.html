<html>
<head>
<title>How To Boost Your iOS Code Performance by Reducing Collection Type Initialisation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过减少集合类型初始化来提高iOS代码性能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-boost-your-ios-code-performance-by-reducing-collection-type-initialisation-564bffee94a3?source=collection_archive---------11-----------------------#2022-05-25">https://betterprogramming.pub/how-to-boost-your-ios-code-performance-by-reducing-collection-type-initialisation-564bffee94a3?source=collection_archive---------11-----------------------#2022-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d844" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">优化快速和客观的C代码速度的技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d5042dfb3c40ba2513f744c225bf039a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8962KiM0oBS-i3r6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丘特尔斯纳普</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="1fbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建新的集合类型会占用资源。频繁创建集合类型对象，例如，在for循环或频繁执行的函数中初始化字典，可能会消耗大量时间。</p><p id="fe02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，我用<code class="fe lv lw lx ly b">reduce(_:_:)</code>和<code class="fe lv lw lx ly b">reduce(into:_:)</code>来演示执行速度的差异。这两个示例都旨在创建一个字典，将用户名作为键，将用户id作为值。</p><h1 id="1828" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">例1: <code class="fe lv lw lx ly b">reduce(_:_:)</code></h1><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="6de2" class="mv ma it ly b gy mw mx l my mz">Declaration:<br/>func reduce&lt;Result&gt;(_ initialResult: Result, _ nextPartialResult: (Result, Element) throws -&gt; Result) rethrows -&gt; Result</span></pre><p id="bbeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在示例1中，第一次执行闭包时，初始结果(一个空字典)被传递给闭包。之后，返回值将在闭包的下一次调用中使用，直到序列结束。</p><p id="b527" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次执行<code class="fe lv lw lx ly b">reduce(_:_:)</code>的闭包时，我都会创建一个新的字典，并将捕获的值<code class="fe lv lw lx ly b">dict</code>赋给它。我向字典中添加了一对新的用户<code class="fe lv lw lx ly b">name</code>和<code class="fe lv lw lx ly b">id</code>，然后将其返回。当序列结束时，最终结果是从闭包返回的最后一个<code class="fe lv lw lx ly b">dict</code>值。</p><h1 id="291e" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">例2: <code class="fe lv lw lx ly b">reduce(into:_:)</code></h1><pre class="kj kk kl km gt mr ly ms mt aw mu bi"><span id="8053" class="mv ma it ly b gy mw mx l my mz">Declaration:<br/>func reduce&lt;Result&gt;(into initialResult: Result, _ updateAccumulatingResult: (inout Result, Element) throws -&gt; ()) rethrows -&gt; Result</span></pre><p id="3a9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在例2中，当一个空字典在开始时被初始化时，每次执行闭包，对<code class="fe lv lw lx ly b">dict</code>的任何改变都会更新字典。</p><h2 id="eba7" class="mv ma it bd mb na nb dn mf nc nd dp mj li ne nf ml lm ng nh mn lq ni nj mp nk bi translated">速度比较</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="b5f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用同样的用户数据测试了速度。</p><p id="776b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例1的执行时间为<code class="fe lv lw lx ly b">0.07398414611816406</code>秒，例2的执行时间为<code class="fe lv lw lx ly b">0.0013837814331054688</code>秒。比例1快了50多倍。</p><p id="8506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，这里有另一篇你可能喜欢的文章:</p><h2 id="4ffe" class="mv ma it bd mb na nb dn mf nc nd dp mj li ne nf ml lm ng nh mn lq ni nj mp nk bi translated">如何提高iOS代码性能:减少数组搜索</h2><div class="nn no gp gr np nq"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-boost-your-ios-code-performance-reduce-searching-an-array-55fbdfee2050"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">如何提高iOS代码性能:减少数组搜索</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">优化快速和客观的C代码速度的技巧</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">better编程. pub</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe ks nq"/></div></div></a></div><h2 id="a57b" class="mv ma it bd mb na nb dn mf nc nd dp mj li ne nf ml lm ng nh mn lq ni nj mp nk bi translated">参考</h2><div class="nn no gp gr np nq"><a href="https://developer.apple.com/documentation/swift/array/3126956-reduce" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">Apple开发者文档</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">编辑描述</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.apple.com</p></div></div></div></a></div><div class="nn no gp gr np nq"><a href="https://developer.apple.com/documentation/swift/array/2298686-reduce" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">Apple开发者文档</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">编辑描述</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.apple.com</p></div></div></div></a></div></div></div>    
</body>
</html>