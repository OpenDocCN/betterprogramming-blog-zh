<html>
<head>
<title>Create a Pendulum Swing Animation in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中创建钟摆摆动动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-pendulum-swing-animation-in-swiftui-animationtutorial-series-b9154f3523f7?source=collection_archive---------12-----------------------#2022-09-29">https://betterprogramming.pub/create-a-pendulum-swing-animation-in-swiftui-animationtutorial-series-b9154f3523f7?source=collection_archive---------12-----------------------#2022-09-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6f8d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用RotationEffect修改器创建单摆摆动动画</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9cc48313ee2181c5a3dfd71a29c38e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UZaTqw5Ei5yJxPbI"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@enginakyurt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> engin akyurt </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="a006" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">实施分解</h1><ul class=""><li id="22fd" class="lv lw iq lx b ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">使用矩形视图为钟摆创建一个悬挂底座</li><li id="5355" class="lv lw iq lx b ly mn ma mo mc mp me mq mg mr mi mj mk ml mm bi translated">从悬挂底座创建一个钟摆支架——使用矩形视图并指定唯一的左下角和右下角半径</li><li id="2ae7" class="lv lw iq lx b ly mn ma mo mc mp me mq mg mr mi mj mk ml mm bi translated">使用矩形视图为钟摆创建一条绳子</li><li id="ea45" class="lv lw iq lx b ly mn ma mo mc mp me mq mg mr mi mj mk ml mm bi translated">创建一个球——使用圆形视图，并填充有角度的辐射</li><li id="862e" class="lv lw iq lx b ly mn ma mo mc mp me mq mg mr mi mj mk ml mm bi translated">使用<code class="fe ms mt mu mv b">RotationEffect</code>左右摆动钟摆</li></ul></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="055a" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><strong class="ak">悬挂底座</strong></h1><p id="ba49" class="pw-post-body-paragraph mw mx iq lx b ly lz jr my ma mb ju mz mc na nb nc me nd ne nf mg ng nh ni mi ij bi translated">这里<strong class="lx ir"> </strong>我们简单的用一个矩形视图做一个类似屋顶的视图。我们将称之为<code class="fe ms mt mu mv b">TopBase</code>，并将<code class="fe ms mt mu mv b">color</code>指定为灰色。从下面的代码你可以看到我们将如何创建悬挂基地。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="398b" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><strong class="ak">摆式支架</strong></h1><p id="4356" class="pw-post-body-paragraph mw mx iq lx b ly lz jr my ma mb ju mz mc na nb nc me nd ne nf mg ng nh ni mi ij bi translated">一旦钟摆悬挂基地创建，我们将快速创建钟摆持有人。为了创建钟摆支架，我们将使用一个带有自定义视图修改器的<code class="fe ms mt mu mv b">Rectangle</code> <code class="fe ms mt mu mv b">View</code>,该修改器将<code class="fe ms mt mu mv b">Bottom</code>左右裁剪一个圆角半径。为了剪辑<code class="fe ms mt mu mv b">Rectangle</code>视图的左右角<code class="fe ms mt mu mv b">Bottom</code>，我们将使用下面的<code class="fe ms mt mu mv b">extension</code>和<code class="fe ms mt mu mv b">shape</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="bed4" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">一旦扩展被设置，我们将创建我们的钟摆架视图，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="a339" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><strong class="ak">摆绳</strong></h1><p id="6577" class="pw-post-body-paragraph mw mx iq lx b ly lz jr my ma mb ju mz mc na nb nc me nd ne nf mg ng nh ni mi ij bi translated">一旦创建了支架，我们将再次使用矩形视图来创建摆绳。您可以使用下面的代码来创建摆绳视图。我们将给它一个<code class="fe ms mt mu mv b">width of 2</code>和<code class="fe ms mt mu mv b">height of 200</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h2 id="367b" class="nq le iq bd lf nr ns dn lj nt nu dp ln mc nv nw lp me nx ny lr mg nz oa lt ob bi translated"><strong class="ak">球</strong></h2><p id="f540" class="pw-post-body-paragraph mw mx iq lx b ly lz jr my ma mb ju mz mc na nb nc me nd ne nf mg ng nh ni mi ij bi translated">为了创建<code class="fe ms mt mu mv b">Ball</code>,我们将使用一个圆形视图并用一个径向渐变来遮盖它，这样<code class="fe ms mt mu mv b">Ball</code>将得到一些3D效果。</p><pre class="kg kh ki kj gt oc mv od oe aw of bi"><span id="0106" class="nq le iq mv b gy og oh l oi oj">RadialGradient(gradient: Gradient(colors: [.clear, .black, .black, .black]), center: .center, startRadius: 1, endRadius: 50)</span></pre><p id="71ff" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">我们将使用上面的<code class="fe ms mt mu mv b">Gradient</code>来掩盖我们的<code class="fe ms mt mu mv b">Circle</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="155c" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">动画🎬</h1><p id="d192" class="pw-post-body-paragraph mw mx iq lx b ly lz jr my ma mb ju mz mc na nb nc me nd ne nf mg ng nh ni mi ij bi translated">为了设置像钟摆摆动这样的动画，我们需要一个<code class="fe ms mt mu mv b">state</code>设置器来告诉我们球是在右边还是左边。此外，我们需要确保动画永远重复。</p><p id="9761" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">我们将首先引入我们的<code class="fe ms mt mu mv b">state</code>变量，它将告诉我们球是在其最大(右)还是最小(左)位置。我们将建立一个Enum，称为<code class="fe ms mt mu mv b">RotationState</code>，它可以有两种状态<code class="fe ms mt mu mv b">Min</code>和<code class="fe ms mt mu mv b">Max</code>。</p><p id="a05f" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">当动画或球到达<code class="fe ms mt mu mv b">Max</code>状态时，我们需要将<code class="fe ms mt mu mv b">state</code>(旋转状态)切换到<code class="fe ms mt mu mv b">Min</code>，反之亦然。</p><h1 id="dcf3" class="ld le iq bd lf lg ok li lj lk ol lm ln jw om jx lp jz on ka lr kc oo kd lt lu bi translated"><strong class="ak">对齐视图内容视图</strong></h1><p id="8138" class="pw-post-body-paragraph mw mx iq lx b ly lz jr my ma mb ju mz mc na nb nc me nd ne nf mg ng nh ni mi ij bi translated">我们将在VStack中创建一个<code class="fe ms mt mu mv b">VStack</code>,我们将添加我们的<code class="fe ms mt mu mv b">TopBase</code>,固定器，以及另一个包含<code class="fe ms mt mu mv b">PendulumRope</code>和球的<code class="fe ms mt mu mv b">VStack</code>。<br/>为什么我创建了另一个<code class="fe ms mt mu mv b">VStack</code>并将摆绳和球视图放在里面，因为我们只需要旋转摆绳和<code class="fe ms mt mu mv b">Ball</code>而不是<code class="fe ms mt mu mv b">TopBase</code>和支架。我们可以在下面的代码中看到相同的设置。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="9b35" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">这里我们要做的是，我们将添加一个<code class="fe ms mt mu mv b">rotationEffect</code>修改器到我们的第二个<code class="fe ms mt mu mv b">VStack</code>中，它包含了<code class="fe ms mt mu mv b">PendulumRope</code>和球。</p><p id="853c" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">旋转角度将由我们的<code class="fe ms mt mu mv b">state</code>变量驱动。当<code class="fe ms mt mu mv b">state</code>设置为最大时，我们将旋转角度设置为-40度，当<code class="fe ms mt mu mv b">state</code>设置为最小时，我们将旋转角度设置为40度。同样，我们将在<code class="fe ms mt mu mv b">onAppear</code>视图修改器中的<code class="fe ms mt mu mv b">withAnimation</code>闭包内切换它。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="8f74" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">最终动画</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi op"><img src="../Images/e03f3166ed9e2dcc5be439215989ad80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/1*H22nY1QHBzcSEs93hJOzkA.gif"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="5f33" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">我希望你明白我们如何使用<code class="fe ms mt mu mv b">rotationEffect</code>来创建一个类似钟摆摆动的动画。</p><p id="e25e" class="pw-post-body-paragraph mw mx iq lx b ly nl jr my ma nm ju mz mc nn nb nc me no ne nf mg np nh ni mi ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>