<html>
<head>
<title>Hide Your Secret Message in Plain Sight Using a Short Python Script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用一个简短的Python脚本隐藏你的秘密信息</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/hide-your-secret-message-in-plain-site-using-a-short-python-script-1439bd0fcf6d?source=collection_archive---------8-----------------------#2021-03-04">https://betterprogramming.pub/hide-your-secret-message-in-plain-site-using-a-short-python-script-1439bd0fcf6d?source=collection_archive---------8-----------------------#2021-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5ace" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">眼不见为净——他们永远也不会知道！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8b5ca9e45cc8ad5503c5144414fa83da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0XFXRR5d8we00AfV2ytFQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@tinaflour?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kristina Flour </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="3415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">隐写术是将消息或信息隐藏在其他非机密文本或数据中的做法。使用以下Python代码，您可以在图像文件中隐藏文本消息，人眼将看不到文件图像的任何变化。他们不会知道他们不知道的事。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7257" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">只是一点小小的改变</h1><p id="f403" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">那么，怎么可能在一张图片中隐藏数百行文本而没有人发现这种变化呢？如果您检查图像文件的属性，您会发现它的宽度和高度是用像素来表示的，像素是视觉信息的最小点。当使用<a class="ae ky" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>加载到内存中时，每个像素有三个字节的信息:红色、绿色和蓝色各一个。我们可以将我们的秘密文本分割成微小的比特，或者1和0，并将这些比特存储在每个颜色字节的最低位。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/a933d3573099fa5a81c1433ef88885a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UnGCYCEwvFWYbOMvTqtzvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">没有秘密信息的原始照片(作者)。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8ecb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么看不出图像有什么变化？</h1><p id="4c26" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当秘密消息被嵌入到图像中时，修改后的图像文件中的每个像素的颜色被改变(平均大约一半时间)256个可能的强度等级中的一个。专家表示，这几乎是正常人类颜色感知极限的两倍。简而言之，没有人会注意到这个变化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/efdf32eeca3a25b224af51f83f002473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2I6I2V5AKON6JMYhUfBBGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这张图片中嵌入了几行秘密文本。</p></figure><p id="e8bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="na">注意:Medium在发布过程中会对图像进行一些额外的处理，因此您必须使用自己的图像文件，而不是下载上面显示的内容。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1a3f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">守则的基本内容</h1><p id="002a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">第一个程序嵌入你的秘密文本在一个PNG图像文件，第二个程序提取它。图像文件不能是有损类型，这意味着组成图像的所有字节都必须没有任何改变。这排除了使用JPG文件的可能性，因为图像数据在压缩过程中会有一些损失。另一方面，PNG文件保留了所有的信息，没有丢失。始终使用PNG图像文件。</p><p id="fb75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是第一个名为<code class="fe nb nc nd ne b">txt_hide.py</code>的程序。下面的代码清单解释了它的工作原理:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="34ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个程序中导入了三个库。tkinter 是标准Python安装的一部分，但是另外两个(<a class="ae ky" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> PIL </a>和NumPy)需要安装，如果你还没有安装的话。安装它们最简单的方法是在命令提示符或终端窗口中使用<code class="fe nb nc nd ne b">pip install Pillow</code>和<code class="fe nb nc nd ne b">pip install numpy</code>。为了便于参考，我在清单顶部的注释中添加了这两个命令。</p><p id="90fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">程序运行时会弹出两个对话框，这两个对话框都是由tkinter库提供的。第一个提示输入嵌入秘密消息的PNG图像文件，另一个提示输入秘密消息的文本。我选择了<code class="fe nb nc nd ne b">askstring()</code>对话框，而不是Python的<code class="fe nb nc nd ne b">input()</code>语句，因为它允许你粘贴剪贴板中的多行文本，并在每行末尾添加新行。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5e8f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">NumPy来救援了</h1><p id="9af2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">加载和处理图像文件有几种可能的方法，但是NumPy库是这个程序的理想选择，原因有几个。图像被加载到一个三维数组中——二维表示行和列的位置，一维表示颜色的字节。NumPy允许您有效地将该数组重新整形为一个8位字节的一维数组，并在以后将其重新整形为原始形状，以便写回文件。作为一个简单的字节线性数组，处理每个字节中的所有低位要容易得多。</p><p id="5fdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">秘密消息的每个字节被分解成单独的比特，并且这些比特中的每个比特替换图像字节中的低阶比特。最后，图像字节被重新整形为它们的原始形式，并且结果被写入以替换原始的PNG文件。</p><p id="6392" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="na">注意:我建议在试验这段代码的同时复制一个PNG图像文件。任何打字错误都可能破坏你的图像文件。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6856" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">提取秘密信息</h1><p id="3efe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">第二个程序名为<code class="fe nb nc nd ne b">txt_show.py</code>，从PNG图像文件中提取秘密信息的过程与此相反。下面是源代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7559" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个程序的几个部分与第一个清单中的非常相似。导入相同的库，并使用相同的tkinter对话框提示输入PNG文件。这个程序核心的比特旋转代码从图像字节数组中提取低位比特，并重建秘密文本消息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5164" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">这结束了我们的传输</h1><p id="5148" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您非常仔细地查看源代码，您可能会注意到一个附加在秘密消息末尾的特殊字符，并在提取过程中注意它。<code class="fe nb nc nd ne b">End of xmit</code>在标准ASCII码中由数值为<code class="fe nb nc nd ne b">4</code>的字符表示。我选择这个作为一个特殊的标记来表示秘密文本的结束。在正常情况下，该字符不应出现在您作为输入内容键入或复制粘贴的任何普通文本中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e96e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可回收图像</h1><p id="97f4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">提取过程不会改变图像文件，因此您可以根据需要多次提取秘密邮件。类似地，您可以重复使用相同的图像文件来嵌入不同的秘密消息，因为每次只改变相同的低阶位。</p><p id="a2ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>