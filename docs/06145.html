<html>
<head>
<title>Micro-Interactions in SwiftUI: Async Button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的微交互:异步按钮</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/micro-interactions-async-button-279a37c4f41e?source=collection_archive---------10-----------------------#2020-09-04">https://betterprogramming.pub/micro-interactions-async-button-279a37c4f41e?source=collection_archive---------10-----------------------#2020-09-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="77e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于为你的应用程序创建异步按钮微交互的SwiftUI教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9fa92a4ce5d054b6a097bd70e0f83399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DDwcf4-kzFHvoY_b.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="978c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">欢迎回来！本周的文章涵盖了我为自己的应用程序制作的各种SwiftUI微交互。这些交互带来的好处确实有助于让你的应用感觉更好，更容易使用。</p><p id="f942" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天的微交互教程是关于为异步任务创建一个自定义按钮，比如下载、发送或加载数据。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="37de" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创建异步按钮</h1><p id="99fe" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在开始编程之前，我们先来解释一下<code class="fe my mz na nb b">AsyncButton</code>的不同状态:</p><ul class=""><li id="115b" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt nh ni nj nk bi translated"><code class="fe my mz na nb b">inactive</code> —用户尚未启动异步任务。</li><li id="8b70" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><code class="fe my mz na nb b">inProgress</code> —主动处理异步任务。</li><li id="a87f" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><code class="fe my mz na nb b">isComplete</code> —异步任务完成。</li></ul><p id="84ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在每个状态期间，<code class="fe my mz na nb b">AsyncButton</code>将显示不同的<code class="fe my mz na nb b">View</code>来描述异步任务:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1bafe9ae66df94abb44fbe5454321ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WeqSZcmahhLn3IQ7.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/ea0b6f044d5404990b59b169b0e502c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/0*lyzQ5jnFxD_QoLvA.gif"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="2d01" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">入门指南</h1><p id="3a18" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">下面是我们的<code class="fe my mz na nb b">AsyncButton</code>的模板，它包含了上述状态的属性。我们将重点关注不同状态的视图编程。如果你对<code class="fe my mz na nb b">init</code>函数如何工作或者<code class="fe my mz na nb b">@ViewBuilder</code>是什么感到好奇，那么我鼓励你去看看<a class="ae nr" href="https://twitter.com/mecid" rel="noopener ugc nofollow" target="_blank"> Majid Jabrayilov </a>关于<a class="ae nr" href="https://swiftwithmajid.com/2019/12/18/the-power-of-viewbuilder-in-swiftui/" rel="noopener ugc nofollow" target="_blank">swift ui</a>中属性包装器<code class="fe my mz na nb b"><a class="ae nr" href="https://swiftwithmajid.com/2019/12/18/the-power-of-viewbuilder-in-swiftui/" rel="noopener ugc nofollow" target="_blank">@ViewBuilder</a></code>的力量的文章。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="11c9" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">编程不同的视图状态</h1><p id="5878" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在<code class="fe my mz na nb b">label:</code>闭包内，我们将利用<code class="fe my mz na nb b">VStack</code>对所有不同的状态视图进行分组。我专门选择了一个<code class="fe my mz na nb b">VStack</code>来制作<code class="fe my mz na nb b">AsyncButton</code>状态变化的动画。如果我们将堆栈的对齐方式设置为<code class="fe my mz na nb b">.center</code>，那么新的视图将从按钮的中心开始显示，看起来就像按钮在调整自己的大小。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="9255" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随着按钮状态的改变，我们返回不同的视图，如<code class="fe my mz na nb b">ProgressView</code>、<code class="fe my mz na nb b">Image</code>和<code class="fe my mz na nb b">content</code>，这些视图是在实例化时提供的。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="7237" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">更新按钮状态</h1><p id="159d" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">当用户点击<code class="fe my mz na nb b">AsyncButton</code>时，我们希望确保我们做了两件事:</p><ul class=""><li id="440b" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt nh ni nj nk bi translated">调用开发人员在实例化过程中传递的动作闭包。</li><li id="1da3" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated">通过更新<code class="fe my mz na nb b">inProgress</code>属性来更新<code class="fe my mz na nb b">AsyncButton</code>的状态。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4701" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">添加样式</h1><p id="5ea2" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">下面，我给<code class="fe my mz na nb b">AsyncButton</code>添加了一些样式，但我鼓励你尝试并修改它以适应你的应用的主题或风格:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="2eda" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">使用异步按钮</h1><p id="e17c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">这个例子展示了如何使用我们完整的<code class="fe my mz na nb b">AsyncButton</code>创建一个基本的提交按钮:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="09cf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p></div></div>    
</body>
</html>