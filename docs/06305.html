<html>
<head>
<title>A Case Study on Dealing with a Noisy Load Balancer Alarm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理负载均衡器噪声报警的案例研究</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-i-help-developers-sleep-at-night-69cb70a9f018?source=collection_archive---------5-----------------------#2020-09-18">https://betterprogramming.pub/how-i-help-developers-sleep-at-night-69cb70a9f018?source=collection_archive---------5-----------------------#2020-09-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cb0d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何诊断和解决负载平衡器问题</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7974b875c3dadcedaa250863839c4e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SqZN0A-OU-xiRgUf"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Yeo Khee 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="0beb" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">介绍</h1><p id="904e" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">为了交付一个高度可用的应用程序，标准的做法是设置在出错时触发的警报。警报可能由以下情况触发:</p><ul class=""><li id="a020" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">CPU或内存使用率高的实例</li><li id="41d4" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">异常或非零退出代码</li><li id="9101" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">大量HTTP错误状态代码</li></ul><p id="9231" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">好的警报是可操作的；否则，重要的问题可能会被看似不重要的警报所掩盖，被掩盖起来。通常在不相关的情况下发出的警报被认为是<em class="nk">噪音</em>。为了减少开发人员和第一反应者的认知负荷，重要的是不相关的情况不会产生警报。</p><p id="b6e0" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">到目前为止，我们的AWS应用程序负载平衡器已经生成了许多504和502错误代码，这些代码已经触发了几次警报。我们在调查过程中没有看到任何确凿的证据，一切似乎都很好。我们意识到这个警报已经变得嘈杂。</p><p id="ce43" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">在本文中，我将讨论我们为使警报恢复正常状态所采取的步骤。谁将从这篇文章中受益:</p><ul class=""><li id="087e" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">对REST服务的网络配置感兴趣的人</li><li id="af52" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">缺乏基础设施经验并希望曝光的开发人员。这个练习是平台开发人员、开发人员和站点可靠性团队所做工作的一个很好的例子。</li></ul></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="41f0" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">术语</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f1b6d0b14e46fc868ebcababae0d3354.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*RPmt6232JmLd1NBYEICGdw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一个负载均衡器反向代理多个服务器(图片来源:作者)</p></figure><p id="f3d7" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated"><strong class="lx ir">负载平衡器</strong> —负载平衡器是一个架构组件，它在一组服务器之间分配请求，这样就不会有一台服务器不堪重负。</p><p id="39b0" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated"><strong class="lx ir">上游服务</strong> —上游服务是指一个或多个运行相同业务逻辑的服务器。在上图中，服务器A、B和C形成了一个上游服务(从负载平衡器的角度来看)。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="8054" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">的反应</h1><p id="48e6" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">该过程从寻呼机发出的ELB_5XX警报通知开始:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ca"><img src="../Images/afbf49dfd0aaf4b0154e929db3e9b5e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AB83B4l_PLae0_K9F1pUaw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由我们的PagerDuty集成触发的松弛通知</p></figure><p id="d419" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">在我们解决这个问题之前，我们需要看看是否有任何可以立即采取的措施来降低用户体验到的服务降级水平。我们已经为不同的失败场景编写了“操作手册”,帮助我们加快流程。触发警报的描述中包含相应操作手册的链接。第一响应者只需遵循运行手册，该手册通常具有以下结构:</p><ul class=""><li id="e3e9" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">上游服务器的CPU或内存使用率高吗？如果是这样，请增加服务器数量以应对负载。</li><li id="0146" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">是否只有一台上游服务器的CPU或内存使用率很高？如果是这样，关闭该服务器并用新的替换它。</li><li id="cf65" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">检查上游日志。这些警报来自同一个服务器吗？如果是这样，关闭该服务器并用新的替换它。</li><li id="656e" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">诸如此类…</li></ul><p id="0192" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">关于跑步手册，需要注意以下几点:</p><ul class=""><li id="b1dd" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">说明非常简单。</li><li id="0671" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">这些步骤是连续的，很容易遵循。</li><li id="6566" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">它们旨在帮助急救人员系统地解决问题。</li></ul><p id="afcb" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">在我们的案例中，相关的操作手册没有产生解决方案，我们的仪表盘也没有显示任何错误/警告信号。在我们的调查中，警报自动解决，502错误消失了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/e8631aae3e266747e89caefecbb3c8b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMIoF34nfOGnopvD2iV00w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自我们的弹性负载平衡器的5XX错误计数</p></figure><p id="429c" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">在我们更深入地研究这个问题之前，我们需要确定错误的影响，并向涉众提供持续的状态更新。在我们的例子中，不到0.5%的请求导致了502个错误。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="ed0c" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">这个发现</h1><p id="22fb" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">现在我们已经更新了利益相关者，是时候调查和解决问题了。我暂时提高了警报的阈值，以确保它不会在我们的调查期间触发:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/53591f6bdf9635efaa8ab814ef352597.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SlrcIKxuvaxpshWNl_rRg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Github PR更改触发警报的阈值</p></figure><p id="c245" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">负载平衡器会抛出5XX错误的原因有很多:</p><ul class=""><li id="aea9" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">一个(或多个)上游服务器没有响应。</li><li id="194b" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">有一个暂时的网络问题正在破坏上游连接。</li><li id="bf4c" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">上游服务响应不兼容/损坏的数据。</li></ul><p id="0ba3" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">AWS有许多文章解释<a class="ae kv" href="https://aws.amazon.com/premiumsupport/knowledge-center/http-5xx-errors-s3/" rel="noopener ugc nofollow" target="_blank">如何对ELB 5XX错误</a>进行故障诊断。我们的工作是系统地检查和消除可能的故障模式。找出根本原因的最简单方法是查询ELB(弹性负载平衡器)访问日志并分析结果:</p><ul class=""><li id="de6e" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated"><a class="ae kv" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-access-logs.html#enable-access-logging" rel="noopener ugc nofollow" target="_blank">AWS elb可以配置为将它们的访问日志存放到S3桶中</a>。访问日志文件只包含向ELB发出的所有请求的列表。</li><li id="37c2" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated"><a class="ae kv" href="https://docs.aws.amazon.com/athena/latest/ug/application-load-balancer-logs.html" rel="noopener ugc nofollow" target="_blank">我们可以将日志文件加载到AWS Athena中，并使用SQL梳理日志。</a>(正如我们将看到的，使用Athena可以非常容易地缩小可能的故障模式。)</li></ul><p id="6de9" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">首先，我们在Athena中索引相关的日志文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="a28e" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">让我们检查一下5XX错误是否是由同一个上游服务器引起的。我们可以通过按目标IP对请求进行分组来做到这一点。我们应该只能看到少数几个IP地址。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3427cb82b3611d4a75b5b21861315f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*9XJbZ1sqCy2CjPBffVVolg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">查询的结果。</p></figure><p id="2c67" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">查询结果包括许多不同的IP地址，所以我们知道错误不是来自一个上游服务器。以下是我们可以用来帮助调查的一些其他问题:</p><p id="ef26" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">确定导致5XX的请求响应时间:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><ul class=""><li id="bbaf" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">如果目标处理时间为0，则意味着ELB在与上游服务建立连接时遇到了问题。</li><li id="9ae0" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">如果目标处理时间几乎是60秒(默认的ELB超时)，那么上游服务响应不够快。在这种情况下，您需要调查为什么上游服务花费这么长时间来响应或增加ELB目标响应超时。</li></ul><p id="e6d3" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">基于客户端IP对请求进行分组:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><ul class=""><li id="c029" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">如果所有错误的请求都是由少数客户端生成的，那么这些客户端的互联网连接可能会出现问题。</li></ul><p id="b7a6" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">使用HTTP动词和URL对请求进行分组，以发现慢速端点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="7c8b" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated"><strong class="lx ir">注意:</strong>我们已经按年、月、日为ELB日志的Athena表建立了索引。使用基于日期的索引是绝对重要的，因为我们能够在感兴趣的时间范围内加载和查询日志文件。这些独立查询具有以下优点:</p><ul class=""><li id="256a" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">我们的查询更快，因为我们正在处理日志文件的子集。</li><li id="1716" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">雅典娜按处理的数据量收费；处理日志文件的子集意味着我们每次查询花费更少。</li></ul><p id="5cde" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">如果您想避免在查询上花钱，另一种梳理日志文件的方法是下载相关的日志文件，并编写一个脚本来解析和过滤请求。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="a041" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">降低噪音</h1><p id="f946" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">在彻底查询ELB访问日志后，我们发现所有5XX请求的响应处理时间都是60秒(即，ELB等待上游服务器响应需要60秒)。上游服务器响应不够快，导致ELB抛出5XX。我们测试了我们的上游服务器，以找出它们响应如此缓慢的原因，我们发现它们实际上一点也不慢。</p><p id="fa7d" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">在做了一些研究后，我们发现问题是网络配置不一致。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/90d13d479aa0c1c1b159bd7fa78c17f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*xukDTzhWlK6Gz0Txi8_biQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">打开负载平衡器和上游服务器之间的连接</p></figure><p id="293a" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">当ELB向上游服务器转发请求时，会建立一个连接，然后通过该连接发送和接收数据。建立连接既慢又贵；为了避免为每个请求打开一个新的连接，我们的ELB和上游服务器使用同一个连接来处理几个请求(称为<a class="ae kv" href="https://en.wikipedia.org/wiki/HTTP_persistent_connection" rel="noopener ugc nofollow" target="_blank"> <em class="nk">保活连接</em> </a>)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/59821686605a58a7b289a77da450fab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*vVbFdjByPicj77b_n-da3Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">负载平衡器保持与无接收服务器的连接</p></figure><p id="f3dd" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">我们的上游服务器被配置为在一段时间后关闭这些连接以释放资源。由于竞争条件，我们的ELB有时会认为这些连接仍然是开放的。ELB会尝试通过这个“幽灵”连接发送数据，请求会超时，因为那里没有任何响应。</p><p id="3e7d" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">为了解决这个问题，我们确保上游服务器的保持活动超时大于ELB的空闲连接超时，确保ELB不会维护任何幽灵连接。做了这个改变后，我们不再接收定期警报，我们的警报再次恢复正常。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="7eb0" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated"><strong class="ak">结论</strong></h1><p id="38cb" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">警报解决后，我们在评估警报的重要性时会考虑一些指标:</p><ul class=""><li id="c601" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">受影响用户的数量/百分比</li><li id="dfb1" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">用户体验下降的持续时间</li><li id="ed64" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">事件的货币成本</li></ul><p id="337f" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">如果警报被触发，尽管前面的因素没有中断，那么您可能有一个嘈杂的警报，在我们的情况下，我们做到了。我们的用户没有受到明显影响，我们处于“警报”状态不到一分钟，警报自动解除。</p><p id="c84e" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">让我们回顾一下为什么我们要确保这个警报不会在无关紧要的情况下再次触发:</p><ul class=""><li id="1760" class="mr ms iq lx b ly mt mb mu me mv mi mw mm mx mq my mz na nb bi translated">我们需要减少开发人员的认知负荷。</li><li id="4a97" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">可操作的警报不应该隐藏在嘈杂的警报中。</li><li id="3e82" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">第一反应者不应该在营业时间后被警报打扰。</li></ul><p id="1675" class="pw-post-body-paragraph lv lw iq lx b ly mt jr ma mb mu ju md me nh mg mh mi ni mk ml mm nj mo mp mq ij bi translated">在某些情况下，重构警报以降低噪音仅仅意味着提高/降低警报阈值。在其他情况下，您可能需要进行更深入的研究，并调整服务器/网络配置。</p><h2 id="46b8" class="ns le iq bd lf nt nu dn lj nv nw dp ln me nx ny lp mi nz oa lr mm ob oc lt od bi translated">结束语</h2><ul class=""><li id="4596" class="mr ms iq lx b ly lz mb mc me oe mi of mm og mq my mz na nb bi translated">无论您使用的是Athena、CloudWatch还是定制的Python/C脚本，团队都应该每隔几个月进行一次ELB诊断演练。在关键情况下，拥有一个用于调查和解决问题的实践工作流程是非常有价值的。</li><li id="dead" class="mr ms iq lx b ly nc mb nd me ne mi nf mm ng mq my mz na nb bi translated">一些ELB 5XX错误是由AWS中断引起的。如果您无法找到根本原因，最好进行<a class="ae kv" href="https://en.wikipedia.org/wiki/Timeboxing" rel="noopener ugc nofollow" target="_blank">时间盒</a>调查并开立AWS支持单。AWS专家将能够告诉您问题是否在他们这边。</li></ul></div></div>    
</body>
</html>