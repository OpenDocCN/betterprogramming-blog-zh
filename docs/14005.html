<html>
<head>
<title>Loading 3D Models Using PyWeb3D</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PyWeb3D加载3D模型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/loading-3d-models-using-pyweb3d-b8c8d84faaf9?source=collection_archive---------4-----------------------#2022-10-25">https://betterprogramming.pub/loading-3d-models-using-pyweb3d-b8c8d84faaf9?source=collection_archive---------4-----------------------#2022-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ba04" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用python语法探索three.js</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e4b740845c58bf0e97a48b2fd25df5ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ChcKxlYe4ks6WrtXxr6PQg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自作者:使用<a class="ae kv" href="https://www.pyweb3d.org/" rel="noopener ugc nofollow" target="_blank"> pyweb3d </a>加载的3D汽车模型</p></figure><p id="1c13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在今天的文章中，我们将讨论如何使用<a class="ae kv" href="https://www.pyweb3d.org/" rel="noopener ugc nofollow" target="_blank"> PyWeb3D </a>将3D模型加载到场景中。如果你错过了上一篇关于如何<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/create-3d-text-using-pyweb3d-b4950a437322">创建3D文本</a>的文章，一定要去看看。</p><p id="1db6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3D模型有数百种文件格式，每种格式都有不同的用途、不同的功能和不同的复杂性。虽然<a class="ae kv" href="https://github.com/Bruno-Odinukweze/PyWeb3D/tree/main/jsm/loaders" rel="noopener ugc nofollow" target="_blank"> three.js提供了许多加载器</a>，但是选择正确的格式和工作流程将会节省时间并避免以后的挫折。有些格式很难处理，对于实时体验来说效率很低，或者目前还不完全支持。</p><p id="28af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<code class="fe ls lt lu lv b">glTF</code>格式(three.js推荐的格式)。</p><p id="3ddc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:格式的<code class="fe ls lt lu lv b">.GLB</code>和<code class="fe ls lt lu lv b">.GLTF</code>版本都支持。</p><p id="8ff3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了将模型加载到我们的场景中，我们将使用three.js <code class="fe ls lt lu lv b">GLTFLoader</code>。</p><p id="0efc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">PyWeb3D的修改版本可以在这里<a class="ae kv" href="https://github.com/Bruno-Odinukweze/PyWeb3D/blob/main/jsm/loaders/GLTFLoader.js" rel="noopener ugc nofollow" target="_blank">查看。</a></p><h2 id="27da" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">HTML样板文件</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="78f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的所有代码都将放入我们的HTML文件主体的内联<code class="fe ls lt lu lv b">&lt;script type=”text/python”&gt;</code>标签中</p><h2 id="3b79" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">导入必要的模块和功能</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://gist.github.com/Bruno-Odinukweze/7ff0e893e5745a701a8757c184a54e12" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Bruno-Odinukweze/7 ff 0e 893 e 5745 a 701 a 8757 c 184 a 54 e 12</a></p></figure><h2 id="a0c0" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">初始化插件</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://gist.github.com/Bruno-Odinukweze/b3b2a51de3d96cadd227a8e0db446dd7" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Bruno-Odinukweze/B3 B2 a51 de 3d 96 cadd 227 A8 E0 db 446 DD 7</a></p></figure><p id="81df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码片段中，我们初始化了<code class="fe ls lt lu lv b">GLTFLoader</code>、<code class="fe ls lt lu lv b">OrbitControls</code>和<code class="fe ls lt lu lv b">RGBELoader</code>插件，直接从javascript文件到我们的python代码中。</p><h2 id="49d4" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">创建场景并加载模型</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://gist.github.com/Bruno-Odinukweze/2e0b30576a104d7ee0dd80f88bb90635" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Bruno-Odinukweze/2e0b 30576 a 104d 7 ee 0 DD 80 f 88 bb 90635</a></p></figure><p id="6b62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们一行一行地检查上面代码片段的内容。</p><ul class=""><li id="8438" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">2 — 5</code>行开始，我们声明了空变量来保存我们的<strong class="ky ir">相机</strong>、<strong class="ky ir">渲染器</strong>、<strong class="ky ir">场景、</strong>和<strong class="ky ir">汽车</strong></li><li id="bc78" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">7 — 75</code>行开始，我们定义了一个名为<code class="fe ls lt lu lv b">init()</code>的函数，在函数中我们创建了一个场景、摄像机、网格和灯光，并加载了模型。</li></ul><p id="dd28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们深入一点:</p><ul class=""><li id="6f66" class="mr ms iq ky b kz la lc ld lf mt lj mu ln mv lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">8 — 11</code>行开始，我们让第<code class="fe ls lt lu lv b">2–5</code>行的变量可修改。如果您是python的新手，那么需要global关键字来修改我们在第<code class="fe ls lt lu lv b">2 — 5</code>行声明的变量的全局副本。</li><li id="1f21" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">14 — 18</code>行开始，我们创建了一个场景，给场景添加了背景色，添加了纹理和雾。</li><li id="3e44" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">20 — 24</code>行，我们创建了一个网格，并将其添加到场景中</li><li id="c8b4" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">根据线条<code class="fe ls lt lu lv b">26 — 35</code>，我们创建了一个透视相机，并给它一个视野、长宽比和一个远近剪裁平面。如果你不知道这些是什么，请阅读关于创建场景的<a class="ae kv" href="https://www.pyweb3d.org/docs/docs.html#manual/en/introduction/Creating-a-scene" rel="noopener ugc nofollow" target="_blank">文档。</a></li><li id="0c95" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从线<code class="fe ls lt lu lv b">38 — 39</code>，我们创建了一个环境光，并将其添加到场景中。</li><li id="8498" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从线<code class="fe ls lt lu lv b">41 — 43</code>，我们创建了一个直射光，并将其添加到场景中。</li><li id="9650" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">根据线条<code class="fe ls lt lu lv b">45 — 46</code>，我们创建了一个半球光源，并将其添加到场景中。</li><li id="f2fe" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">49 -52</code>行开始，我们创建了一个webGL渲染器，并将其附加到HTML文件的主体中</li><li id="dc60" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">在第<code class="fe ls lt lu lv b">54</code>行，我们创建了轨道控制。<code class="fe ls lt lu lv b">OrbitControl</code>将目标作为参数(在本例中是摄像机和<code class="fe ls lt lu lv b">renderer.domElement</code>或画布)。</li><li id="68fe" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">在第<code class="fe ls lt lu lv b">57</code>行，我们实例化了GLTFLoader。</li><li id="18ec" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">59 — 70</code>行开始，我们定义了一个名为<code class="fe ls lt lu lv b">loadGLTF()</code>的回调函数来处理gLTF模型设置。</li><li id="1b21" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">从第<code class="fe ls lt lu lv b">72 — 73</code>行开始，我们定义了一个回调函数调用<code class="fe ls lt lu lv b">onError()</code>，用于处理错误消息，并在模型加载失败时帮助我们排除故障。</li><li id="e0a3" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">最后，在第<code class="fe ls lt lu lv b">75</code>行，我们加载了模型，并将回调函数作为参数传递给了<code class="fe ls lt lu lv b">load</code>方法。</li></ul><h2 id="87a8" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">处理窗口大小调整和动画</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://gist.github.com/Bruno-Odinukweze/285e58b441db4fda5371c4ce49b27d07" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Bruno-Odinukweze/285 e 58 b 441 db 4 FDA 5371 C4 ce 49 b 27d 07</a></p></figure><p id="e701" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码片段中，从第<code class="fe ls lt lu lv b">1 — 8</code>行开始，我们处理窗口大小调整，从第<code class="fe ls lt lu lv b">10 — 12</code>行开始，我们处理动画循环，最后，在第14行，我们调用在前面代码片段的第<code class="fe ls lt lu lv b">7 — 75</code>行定义的<code class="fe ls lt lu lv b">init()</code>函数。</p><h1 id="c6cf" class="nf lx iq bd ly ng nh ni mb nj nk nl me jw nm jx mh jz nn ka mk kc no kd mn np bi translated">现在运行代码</h1><p id="ea99" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">在你的浏览器中打开HTML文件，你应该会看到一个漂亮的日产Z原型车:)</p><p id="ac19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看现场版<a class="ae kv" href="https://www.pyweb3d.org/examples/#loading_3d_models_NissanZProto" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/09cd0e37ac79e453d72682011f2e6f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wlt2hN07An4tDbKcHFkdew.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自作者:使用<a class="ae kv" href="https://www.pyweb3d.org/" rel="noopener ugc nofollow" target="_blank"> pyweb3d </a>加载的3D汽车模型</p></figure><p id="81cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢这篇文章。感谢阅读。</p><pre class="kg kh ki kj gt nw lv nx ny aw nz bi"><span id="34e9" class="lw lx iq lv b gy oa ob l oc od"><strong class="lv ir">Want to contribute?<br/></strong>Would you like to contribute to PyWeb3D? Join me, and let’s create something awesome together. Join me <a class="ae kv" href="https://github.com/Bruno-Odinukweze/PyWeb3D" rel="noopener ugc nofollow" target="_blank">here</a>.</span></pre><p id="df5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">源代码:</p><div class="oe of gp gr og oh"><a href="https://github.com/Bruno-Odinukweze/PyWeb3D/blob/main/examples/loading_3d_models_NissanZProto.html" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">pyweb 3d/loading _ 3d _ models _ nissanzproto . html位于主Bruno-Odinukweze/PyWeb3D</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">此文件包含双向Unicode文本，其解释或编译可能与下面显示的不同…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kp oh"/></div></div></a></div><h1 id="6874" class="nf lx iq bd ly ng nh ni mb nj nk nl me jw nm jx mh jz nn ka mk kc no kd mn np bi translated">学分和参考</h1><ul class=""><li id="7956" class="mr ms iq ky b kz nq lc nr lf ow lj ox ln oy lr mw mx my mz bi translated">受<a class="ae kv" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank">启发three.js </a></li><li id="cc02" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated"><a class="ae kv" href="https://brython.info/" rel="noopener ugc nofollow" target="_blank">布里森</a></li><li id="86ab" class="mr ms iq ky b kz na lc nb lf nc lj nd ln ne lr mw mx my mz bi translated">P <a class="ae kv" href="https://python.org/" rel="noopener ugc nofollow" target="_blank"> ython </a></li></ul></div></div>    
</body>
</html>