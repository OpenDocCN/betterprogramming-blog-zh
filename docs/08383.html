<html>
<head>
<title>5 Python String Tricks To Write Faster, More Concise, and More Pythonic Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5个Python字符串技巧来编写更快、更简洁、更Python化的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-python-string-tricks-to-write-faster-more-concise-and-more-pythonic-code-82d333e0186f?source=collection_archive---------7-----------------------#2021-04-23">https://betterprogramming.pub/5-python-string-tricks-to-write-faster-more-concise-and-more-pythonic-code-82d333e0186f?source=collection_archive---------7-----------------------#2021-04-23</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="a065" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">通过用更少的行编写代码来节省时间</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/0384f1c968c2434a96c93f574cc3e79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U0w1AjX5x4qLx2BH"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@dhika88?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">和hika Soreng </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="a07f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Python类似英语的语法使得阅读、写作和学习变得容易。难怪今天它在开发人员和数据科学家中如此受欢迎。</p><p id="3f7e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然而，尽管Python提供了简洁明了的语法，开发人员却经常忽略它强大的特性。在这样做的时候，他们倾向于比平时写更多的代码行。</p><p id="d218" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">字符串是编程中最常用的数据类型。现在，如果您是Python老手或刚刚起步的开发人员，您可能听说过一些流行的速记技术，比如使用析构语法交换元素或使用<code class="fe lw lx ly lz b">[:-1]</code>反转字符串。</p><p id="439d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">还有许多其他整洁的小字符串技巧，可以用来编写更干净、更快、更好的代码。</p><p id="7cc3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在接下来的几节中，我们将介绍一些Python字符串技巧，您现在就可以开始使用。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="688e" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">使用f字符串的千位分隔符</h1><p id="2a76" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">通常，我们会遇到需要以特定格式可读的数字。格式通常是货币值。例如，您的输入需要显示为美元值。</p><p id="0d94" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以使用强大的Python <code class="fe lw lx ly lz b">f</code> -strings，用一行代码以逗号分隔的格式打印出来，如下所示:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="608e" class="ni mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; a = 1000000<br/>&gt;&gt;&gt; print(f'{my_var:,}')</span><span id="c95f" class="ni mi iu lz b gz nn nk l nl nm">1,000,000</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="08c6" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">快速将字符串转换成Python列表</h1><p id="dee8" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">接下来，你有一串字符串，希望把它们都放在一个Python列表中。旧的、无聊的、乏味的方法是:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="c1d3" class="ni mi iu lz b gz nj nk l nl nm">my_list = ['A', 'B', 'C'] </span></pre><p id="4213" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以将元素放在<code class="fe lw lx ly lz b">list()</code>中，而不是像上面那样手动将每个元素添加到列表中:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="1ba7" class="ni mi iu lz b gz nj nk l nl nm">my_list = list('ABC')</span></pre><p id="f64c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，<code class="fe lw lx ly lz b">list()</code>对于字符串的琐碎用例很有用。为了有更多的定制自由，你可以使用<code class="fe lw lx ly lz b">split()</code>方法将字符串转换成列表。</p><p id="fb61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，在下面的例子中，我们有一个带有空格的字符串。使用<code class="fe lw lx ly lz b">list()</code>构造函数实际上会将每个字符解析为一个单独的列表元素。因此，使用<code class="fe lw lx ly lz b">split()</code>代替，并放置一个分隔符:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="no np l"/></div></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="7b8b" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">在字符串插值中使用命名参数以提高可读性</h1><p id="b6ff" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated"><code class="fe lw lx ly lz b">format</code>方法对于字符串插值来说非常有效。<code class="fe lw lx ly lz b">f</code>——弦乐更胜一筹。但是很多时候，您会遇到参数名不可读的情况。这可能导致理解格式化字符串中实际发生了什么的问题，尤其是当有许多变量时。</p><p id="170e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，我们可以使用字典键显式命名字符串中变量的占位符。这里有一个例子:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="95ea" class="ni mi iu lz b gz nj nk l nl nm">x = {'language': 'Python', 'feature': 'match statement'}<br/>&gt;&gt;&gt; print('{language} {feature} is amazing.'.format(**x))</span><span id="42e8" class="ni mi iu lz b gz nn nk l nl nm">Python match statement is amazing.</span></pre><p id="f80c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您也可以对插值字符串使用<code class="fe lw lx ly lz b">%</code>格式。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="d467" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">使用列表理解从字符串中去除模式</h1><p id="fd49" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">现在，你可能已经知道有一些从字符串中去除字符的简单方法。<code class="fe lw lx ly lz b">strip()</code>方法用于快速去除字符串中的空白，而<code class="fe lw lx ly lz b">lstrip()</code>和<code class="fe lw lx ly lz b">rstrip()</code>分别用于去除前导空格和尾随空格。</p><p id="b108" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您甚至可以删除<code class="fe lw lx ly lz b">strip</code>方法中的某些子字符串，或者使用<code class="fe lw lx ly lz b">replace()</code>方法来做同样的事情。</p><p id="381a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是使用上面的方法，你只能做这么多来去除某些模式。</p><p id="16da" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您希望在字符串中只保留字母数字或数字字符，该怎么办？</p><p id="8174" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">谢天谢地，我们有<code class="fe lw lx ly lz b">join</code>方法和列表理解供我们使用。</p><p id="158e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下面的例子中，我们只保留了字符串中的数字字符，并删除了其余的字符:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="0fda" class="ni mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; x = "BTC is $48000.12"<br/>&gt;&gt;&gt; x = ''.join([c for c in x if c in '1234567890.'])<br/>&gt;&gt;&gt; x</span><span id="01aa" class="ni mi iu lz b gz nn nk l nl nm">'48000.12'</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="cd42" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">仅获取字符串的第一个拆分</h1><p id="5049" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">当我们希望根据某种定界符分解一个字符串时,<code class="fe lw lx ly lz b">split()</code>方法非常有用。但是如果我们只需要第一次出现的分裂呢？</p><p id="4dc2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，我们的最后一个技巧使用了<code class="fe lw lx ly lz b">partition</code>方法，它确实做到了这一点，并返回一组字符串。</p><p id="d715" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你只想从网站中提取一个子域名，这是很有用的。我们开始吧:</p><pre class="kk kl km kn gu ne lz nf ng aw nh bi"><span id="7217" class="ni mi iu lz b gz nj nk l nl nm">&gt;&gt;&gt; x = "mail.google.com"<br/>&gt;&gt;&gt; x.partition(".")<br/>('mail', '.', 'google.com')<br/>&gt;&gt;&gt; x.partition(".")[0]<br/>'mail'</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="3898" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="cbf7" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">在本文中，我们看到了一些有趣的技术，它们可以帮助您编写干净、简洁，更重要的是更短的代码，从而节省时间。你可以做更多的字符串操作。例如，<code class="fe lw lx ly lz b">capitalize()</code>方法将字符串中的第一个字符大写，而<code class="fe lw lx ly lz b">title()</code>将字符串中每个单词的首字母大写。</p><p id="744e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。感谢阅读。</p></div></div>    
</body>
</html>