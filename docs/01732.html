<html>
<head>
<title>Convert a UIImage to PDF in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中将UIImage转换为PDF</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/convert-a-uiimage-to-pdf-in-swift-bf9f22b127c5?source=collection_archive---------2-----------------------#2019-10-09">https://betterprogramming.pub/convert-a-uiimage-to-pdf-in-swift-bf9f22b127c5?source=collection_archive---------2-----------------------#2019-10-09</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="6355" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用VisionKit和PDFKit</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/c9a16bb8a453e0935b981421f0bf62a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cz_KoOXZCZJuMmxk"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">安妮·斯普拉特在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d4e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">PDFKit是在iOS 11中引入的，这给了开发人员很多喘息的机会，他们之前不得不在他们的应用程序中处理C++的PDF渲染。</p><p id="c0e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">PDFKit允许我们在应用程序中创建、修改和显示pdf。<br/>本文的目标是使用Swift将UIImage转换成PDF。</p><p id="1a21" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将使用iOS 13 VisionKit，它有一个文档相机扫描仪。我们已经在这里讨论了VisionKit的文档扫描仪<a class="ae kz" href="https://www.iosdevie.com/p/ios13-vision-text-doc-scanner" rel="noopener ugc nofollow" target="_blank">的实现。</a></p><h2 id="caf1" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">行动（或活动、袭击）计划</h2><ul class=""><li id="4289" class="mp mq iu lc b ld mr lg ms lj mt ln mu lr mv lv mw mx my mz bi translated">使用VisionKit的文档扫描仪扫描图像</li><li id="27f9" class="mp mq iu lc b ld na lg nb lj nc ln nd lr ne lv mw mx my mz bi translated">将它们转换成PDF文档</li><li id="b31e" class="mp mq iu lc b ld na lg nb lj nc ln nd lr ne lv mw mx my mz bi translated">使用文件管理器保存PDF</li><li id="5878" class="mp mq iu lc b ld na lg nb lj nc ln nd lr ne lv mw mx my mz bi translated">在PDF视图中显示PDF</li></ul><h2 id="2ed5" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">我们将实现什么</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nf"><img src="../Images/76b795efc3361de8a84215cbd88de346.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/1*A8En0-COynIknjL3Av6CEA.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">最终结果:来自iOS设备的屏幕截图</p></figure></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><h1 id="8a73" class="nn lx iu bd ly no np nq mb nr ns nt me ka nu kb mh kd nv ke mk kg nw kh mn nx bi translated">PDFKit:里面有什么？</h1><p id="9ede" class="pw-post-body-paragraph la lb iu lc b ld mr jv lf lg ms jy li lj ny ll lm ln nz lp lq lr oa lt lu lv in bi translated">PDFKit包含以下类别:</p><ol class=""><li id="8fbd" class="mp mq iu lc b ld le lg lh lj ob ln oc lr od lv oe mx my mz bi translated"><code class="fe of og oh oi b">PDFPage</code>:一个<code class="fe of og oh oi b">PDFPage</code>负责渲染PDF的单个页面。通常一个<code class="fe of og oh oi b">PDFPage</code>在其初始化方法中需要一个图像。</li><li id="adcb" class="mp mq iu lc b ld na lg nb lj nc ln nd lr ne lv oe mx my mz bi translated"><code class="fe of og oh oi b">PDFDocument</code>:这个类的一个实例包含了完整的PDF数据，并托管每个<code class="fe of og oh oi b">PDFPage</code>。</li><li id="f246" class="mp mq iu lc b ld na lg nb lj nc ln nd lr ne lv oe mx my mz bi translated"><code class="fe of og oh oi b">PDFView</code>:这负责在我们的应用程序的UI中显示PDF。它具有以下可自定义的属性:</li></ol><ul class=""><li id="11f4" class="mp mq iu lc b ld le lg lh lj ob ln oc lr od lv mw mx my mz bi translated"><code class="fe of og oh oi b">PDFDisplayMode</code>:可以是<code class="fe of og oh oi b">singlePage</code>、<code class="fe of og oh oi b">singlePageContinuous</code>、<code class="fe of og oh oi b">twoUp</code>或<code class="fe of og oh oi b">twoUpContinuous</code></li><li id="b3c3" class="mp mq iu lc b ld na lg nb lj nc ln nd lr ne lv mw mx my mz bi translated"><code class="fe of og oh oi b">PDFDisplayDirection</code>:PDF页面可以<code class="fe of og oh oi b">horizontal</code>或<code class="fe of og oh oi b">vertical</code>滚动</li></ul><p id="5ee9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">4.<code class="fe of og oh oi b">PDFThumbnailView</code>:用于显示PDF页面的缩略图预览。</p><p id="233b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">还有其他类，比如<code class="fe of og oh oi b">PDFOutline</code>和<code class="fe of og oh oi b">PDFSelection</code>(用于选择PDF中的文本)，我们不在这篇文章中讨论。</p><blockquote class="oj ok ol"><p id="37ff" class="la lb om lc b ld le jv lf lg lh jy li on lk ll lm oo lo lp lq op ls lt lu lv in bi translated">要获取PDF的完整内容，请使用PDFDocument上的<code class="fe of og oh oi b">string</code>属性。要获得PDFPage的完整内容，请使用<code class="fe of og oh oi b">attributedString</code>属性。</p></blockquote></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><h1 id="f9a9" class="nn lx iu bd ly no np nq mb nr ns nt me ka nu kb mh kd nv ke mk kg nw kh mn nx bi translated">UIImage到PDFPage到PDFDocument</h1><pre class="kk kl km kn gu oq oi or os aw ot bi"><span id="cf44" class="lw lx iu oi b gz ou ov l ow ox">let pdfDocument = PDFDocument()</span><span id="ac2b" class="lw lx iu oi b gz oy ov l ow ox">for i in 0 ..&lt; scan.pageCount {<br/>   if let image = scan.imageOfPage(at: i).resize(toWidth: 250){<br/>      let pdfPage = PDFPage(image: image)<br/>      pdfDocument.insert(pdfPage!, at: i)        <br/>   }<br/>}</span></pre><p id="ccc1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这就创建了我们的PDF。我们已经使用resize扩展功能(在本文末尾提供)调整了扫描图像的大小。</p><h2 id="f4f2" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">将PDFDocument保存到文档目录</h2><p id="8dd7" class="pw-post-body-paragraph la lb iu lc b ld mr jv lf lg ms jy li lj ny ll lm ln nz lp lq lr oa lt lu lv in bi translated">为了保存<code class="fe of og oh oi b">PDFDocument</code>，检索原始数据并将其写入文档目录URL，如下所示:</p><pre class="kk kl km kn gu oq oi or os aw ot bi"><span id="b2f6" class="lw lx iu oi b gz ou ov l ow ox">let data = pdfDocument.dataRepresentation()<br/>            <br/>let documentDirectory = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first!<br/>            <br/>let docURL = documentDirectory.appendingPathComponent("Scanned-Docs.pdf")<br/>            <br/>do{       <br/>  try data?.write(to: docURL)       <br/>}catch(let error){<br/>   print("error is \(error.localizedDescription)")<br/>}</span></pre><h2 id="9c02" class="lw lx iu bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">在PDFView中显示</h2><p id="435d" class="pw-post-body-paragraph la lb iu lc b ld mr jv lf lg ms jy li lj ny ll lm ln nz lp lq lr oa lt lu lv in bi translated">最后，我们可以在父视图中嵌入<code class="fe of og oh oi b">PDFView</code>,并在其中显示保存的PDF:</p><pre class="kk kl km kn gu oq oi or os aw ot bi"><span id="66ba" class="lw lx iu oi b gz ou ov l ow ox">let pdfView = PDFView()</span><span id="fd2c" class="lw lx iu oi b gz oy ov l ow ox">pdfView.translatesAutoresizingMaskIntoConstraints = false<br/>view.addSubview(pdfView)</span><span id="565f" class="lw lx iu oi b gz oy ov l ow ox">let docURL = documentDirectory.appendingPathComponent("Scanned-Docs.pdf")<br/>        <br/>if fileManager.fileExists(atPath: docURL.path){<br/>    pdfView.document = PDFDocument(url: docURL)<br/>}</span></pre><p id="e37c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">就是这样。我们已经完成了将一批<code class="fe of og oh oi b">UIImages</code>转换成PDF文件。<br/>下面是完整的源代码。</p><div class="oz pa gq gs pb pc"><a href="https://github.com/anupamchugh/iowncode/tree/master/iOSUIImageToPDF" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fp"><div class="pe ab pf cl cj pg"><h2 class="bd iv gz z fq ph fs ft pi fv fx it bi translated">anupamchugh/iowncode</h2><div class="pj l"><h3 class="bd b gz z fq ph fs ft pi fv fx dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pk l"><p class="bd b dl z fq ph fs ft pi fv fx dk translated">github.com</p></div></div></div></a></div></div></div>    
</body>
</html>