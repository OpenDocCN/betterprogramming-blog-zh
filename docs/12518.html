<html>
<head>
<title>VS Code, WSL2, and OneAPI — Leveraging Tools for Cross-Platform Software Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">VS代码、WSL2和OneAPI——利用工具进行跨平台软件开发</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/vscode-wsl2-and-oneapi-leveraging-tools-for-cross-platform-software-development-dbb8deaf10c9?source=collection_archive---------6-----------------------#2022-06-10">https://betterprogramming.pub/vscode-wsl2-and-oneapi-leveraging-tools-for-cross-platform-software-development-dbb8deaf10c9?source=collection_archive---------6-----------------------#2022-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a0e1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用WSL2和VSCode为Linux和Windows构建oneAPI</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/43f8c07af6bbefaf3159aaa1ea52cab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MXO_It3wlI6R3qUi"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@vidarnm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">维达尔·诺德里-马西森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="6049" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你好，世界！作为一名在英特尔从事性能/并行化工具和人工智能系统平台工作19年的软件工程师和软件架构师，我非常幸运和激动地与您分享我的一些经验，并获得您对软件、技术和英特尔的看法。我的第一个重点是试图解决现代软件开发人员的困境。</p><h1 id="1402" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">为什么要先解决这个问题？</h1><p id="447b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">从我记事起，我就一直热爱编程和解决问题。1985年，当我上一年级时，我开始用BASIC编程，当时它还不太普遍。</p><p id="377c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我已经足够幸运(或者足够不幸？)学习了几十种编程语言，用几种ide编程，在Windows和Linux环境下开发软件。我还必须在快速发展的领域进行开发，如Web/UI框架、云开发、深度学习等。</p><p id="0162" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段时间以来，一个不变的事实是，工程师总是在与他们的工具斗争，以提高生产率。作为一名开发人员，我希望尽可能高效地完成更多的工作，或者腾出时间做生活中的其他事情……所以这对我个人来说意义重大。=)</p><h1 id="629b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">缩小范围</h1><p id="9585" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对我们来说不幸的是，没有一个现代软件开发者。当我为微服务或Kubernetes编写Go代码时，我使用的工具链与我编写React/Angular/Vue/Javascript代码时完全不同。还有很多时候我需要Windows/Linux/Mac之间的跨平台支持。</p><p id="dc1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，在跨平台ide和支持方面已经有了很多进步。我是一个长期的Vi用户(无意冒犯emacs用户，我知道emacs更强大)，但我喜欢现代的ide，作为一名工程师，我喜欢跨平台标准化我的工作流，因为这使我更有效率。</p><p id="d7f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说幸运的是，我通常使用的语言(C/C++/Python/Javascript/Go)在微软的Visual Studio代码(VSCode)中都能很好地工作，最近对微软Linux窗口子系统(WSL)的更新也能很好地用于跨平台开发。</p><p id="a18c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种背景下，我想我应该尝试看看在我的英特尔Alder Lake Core i9外星人R13系统上运行一些跨平台oneAPI样本的效果如何(不，英特尔没有购买)。</p><h1 id="11dc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置WSL和VSCode</h1><p id="2ea3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">设置WSL没有痛苦，我只是打开一个Windows命令提示符并运行</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="784b" class="mu lt iq mq b gy mv mw l mx my">&gt; wsl --install</span></pre><p id="3d28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它安装了用于WSL的Ubuntu 20.04发行版，并且需要快速重启。</p><p id="5462" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说，这个过程是没有痛苦的，但是我的一些同事提到，如果你遇到问题，微软已经提供了一个方便的<a class="ae kv" href="https://docs.microsoft.com/en-us/windows/wsl/troubleshooting" rel="noopener ugc nofollow" target="_blank">故障排除指南</a>，它将指导你完成使你的系统WSL准备就绪的先决步骤。</p><p id="7e97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是设置我的VSCode。我最初试图使用Linux安装工作流在WSL中设置我的VSCode，但结果证明这不是正确的方法。按照微软的说明，我只需按照下面的说明在VSCode中启用远程WSL扩展:</p><p id="aebe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">【https://code.visualstudio.com/docs/remote/wsl T4】</p><p id="f1e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">启用扩展后，要求一个新的WSL窗口就像弹出一个VSCode WSL连接窗口一样简单。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/fc7b79fd085e06d78721202f96068222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vmk6_wSgpuvLTV6SMK_pkw.png"/></div></div></figure><h1 id="d2e9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">安装oneAPI工具包</h1><p id="c909" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">因为我想知道我是否可以在我的系统上运行基于Linux和Windows oneAPI的代码，所以我访问了oneAPI发布页面:</p><p id="15d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/toolkits.html" rel="noopener ugc nofollow" target="_blank">https://www . Intel . com/content/www/us/en/developer/tools/oneapi/toolkits . html</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/280baad6fd0c3f91c0599073328658c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EU_7nkUy-vSWP98_pG7BDw.png"/></div></div></figure><p id="c1d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择我想要的工具包，并按照说明将它们安装到我的系统上。我在WSL终端和Windows的在线安装程序中使用了apt安装。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/8c47af48647b22366a00053fd6c31e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGqfW1WFC2qsD_UrHcrE9g.png"/></div></div></figure><h1 id="4474" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">运行一些代码</h1><p id="3f1e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">既然理论上我已经有了一个工作开发环境，我就去了Github的<code class="fe nc nd ne mq b">oneAPI</code> samples:</p><div class="nf ng gp gr nh ni"><a href="https://github.com/oneapi-src/oneAPI-samples" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">GitHub-oneapi-src/oneAPI-Samples:英特尔oneAPI工具包示例</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">oneAPI样本库为英特尔oneAPI工具包提供代码样本。我们建议查看特定的…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><p id="3198" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">把代码放到我的本地机器上。这段代码被设计为兼容Windows和Linux，所以我在我的WSL VSCode窗口中加载了Libraries-&gt; oneMKL-&gt; matrix _ mul _ mkl目录，并启动了一个bash终端。我必须找到<code class="fe nc nd ne mq b">oneAPI</code>变量来启用适当的环境，然后运行make来构建并运行示例代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0621" class="mu lt iq mq b gy mv mw l mx my">&gt; source /opt/intel/oneapi/setvars.sh<br/>&gt; make</span></pre><p id="96e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这成功构建并运行了dpc++/英特尔数学内核库(MKL)矩阵乘法示例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/0a1d256c3f499c2baaa4f39351256139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jVznuBcTvjTnm2H1ZLGUEw.png"/></div></div></figure><p id="e73e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用Windows二进制文件创建和运行示例最终要多做一些工作，因为这是一个新系统，所以我必须安装Microsoft Visual Studio 2022 Community Edition和GNUMake。在那之后，它又像加载VSCode并运行一样简单:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="2fe8" class="mu lt iq mq b gy mv mw l mx my">&gt; C:\Program Files (x86)\Intel\oneAPI\setvars.bat<br/>&gt; make</span></pre><h1 id="67e6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">但是等等，还有呢！</h1><p id="1654" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我相信你们很多人都知道这一点，但接下来的事情对我来说是一个惊人的发现。我正在玩VSCode (Windows，不是基于WSL的),看到我可以为我的分割终端选择WSL提示符！</p><p id="5e89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样做允许我在同一个VSCode实例中为Windows和Linux构建和运行示例。</p><p id="1d9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在单个IDE中的单个系统上进行跨平台开发！在经历了多年处理跨平台开发的痛苦之后，我无法从这种魔力中释放出兴奋的内啡肽。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/dd3375488120e595a87c64d3424854fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DC2b6q87JGoxv4AMhzytqA.png"/></div></div></figure><h1 id="2380" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结束(暂时)</h1><p id="02d1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">所有这一切的好处是，我能够在几个小时内在后台将所有这一切设置在一个新系统上。</p><p id="0869" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在未来，我将撰写更多关于这种流程如何适用于基于英特尔Arc的GPU的文章，讨论Jupyter笔记本电脑等其他开发人员工作流程，深入探讨云和人工智能系统平台开发等软件主题，并分享我作为技术行业软件工程师的经验。感谢阅读！</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9135" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">Want to Connect?</strong></span><span id="13c1" class="mu lt iq mq b gy nz mw l mx my">If you want to see what random tech news I’m reading, you can <a class="ae kv" href="https://twitter.com/tonymongkolsmai" rel="noopener ugc nofollow" target="_blank">follow me</a> on Twitter.</span></pre><p id="3b29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oa">英特尔、英特尔标志和其他英特尔标志是英特尔公司或其子公司的商标。</em></p></div></div>    
</body>
</html>