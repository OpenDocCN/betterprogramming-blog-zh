<html>
<head>
<title>How to Create a Chrome Extension With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React创建一个Chrome扩展</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-a-chrome-extension-with-react-in-2020-5dadebf2135e?source=collection_archive---------7-----------------------#2020-04-13">https://betterprogramming.pub/how-to-create-a-chrome-extension-with-react-in-2020-5dadebf2135e?source=collection_archive---------7-----------------------#2020-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e68" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Create React App快速启动Chrome扩展</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f1970e9d4050269b1302379ac4b4e205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EU0uJJDIGdxWyMQPLRQnDQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://www.flickr.com/photos/russellstreet/" rel="noopener ugc nofollow" target="_blank"> russellstreet </a>在<a class="ae ky" href="https://www.flickr.com/photos/russellstreet/4668188279" rel="noopener ugc nofollow" target="_blank"> Flickr </a>上提供</p></figure><p id="1cc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以对几乎所有的事情使用React，对吗？嗯，对于Chrome扩展来说，可能比你想象的要复杂一些，因此有了这个指南。</p><p id="9a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Create React App不能直接与Chrome扩展一起使用。原因是React使用了内嵌脚本，这违反了Chrome的安全准则。但不用担心——我们；我将实现一个变通办法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e748" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak"> 1。创建React应用程序</strong></h1><p id="36a7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要创建我们的React应用程序。创建一个新的文件夹——你可以把它叫做类似于<code class="fe mz na nb nc b">cool-extension</code>的东西——并在VS代码中打开它(或者任何你喜欢使用的IDE)。打开一个终端(确保您在您的文件夹中)，并输入以下命令:</p><p id="cae0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">npx create-react-app</code></p><p id="73a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在您的文件夹中设置一个新的React应用程序。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="77c1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.创建manifest.json文件</h1><p id="9c2d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">通常，当你创建一个Chrome扩展时，你需要创建一个<code class="fe mz na nb nc b">manifest.json</code>文件，但是我们很幸运！Create React App默认创建一个<code class="fe mz na nb nc b">manifest.json</code>文件——你可以在你的公共文件夹里找到它。</p><p id="cc2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">删除该文件中的所有内容，并粘贴以下代码:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="e434" class="nh md it nc b gy ni nj l nk nl">{</span><span id="041f" class="nh md it nc b gy nm nj l nk nl">  "short_name": "Your Extension Name",</span><span id="f466" class="nh md it nc b gy nm nj l nk nl">  "name": "Your Extension Name",</span><span id="3cf8" class="nh md it nc b gy nm nj l nk nl">  "icons": {</span><span id="533d" class="nh md it nc b gy nm nj l nk nl">    "16": "favicon.ico",</span><span id="ac3d" class="nh md it nc b gy nm nj l nk nl">    "48": "logo192.png",</span><span id="9b4b" class="nh md it nc b gy nm nj l nk nl">   "128": "logo512.png"</span><span id="a097" class="nh md it nc b gy nm nj l nk nl">  },</span><span id="f91e" class="nh md it nc b gy nm nj l nk nl">  "permissions": [],</span><span id="6f6b" class="nh md it nc b gy nm nj l nk nl">  "manifest_version": 2,</span><span id="9356" class="nh md it nc b gy nm nj l nk nl">  "version": "0.0.1",</span><span id="df30" class="nh md it nc b gy nm nj l nk nl">  "browser_action": {</span><span id="2f8e" class="nh md it nc b gy nm nj l nk nl">    "default_popup": "index.html",</span><span id="ce3f" class="nh md it nc b gy nm nj l nk nl">    "default_title": "Your Extension Name"</span><span id="a97c" class="nh md it nc b gy nm nj l nk nl">  }</span><span id="6032" class="nh md it nc b gy nm nj l nk nl">}</span></pre><p id="ea42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么这个文件是做什么的呢？这个文件被Chrome用来获取你的扩展的主要信息:叫什么名字？我应该显示什么图标？我们需要用户的什么权限来运行这个扩展？诸如此类。</p><p id="9653" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会很快浏览一下<code class="fe mz na nb nc b">manifest.json</code>，但是如果你想深入了解，请看看<a class="ae ky" href="https://developer.chrome.com/extensions/manifest" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><ul class=""><li id="c4cd" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated"><code class="fe mz na nb nc b"><strong class="lb iu">short_name</strong></code> <strong class="lb iu">和</strong> <code class="fe mz na nb nc b"><strong class="lb iu">name</strong></code>应该是不言自明的——它们采用您的扩展的名称</li><li id="dd6a" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">这些图标会出现在你的Chrome标题栏上吗</li><li id="b429" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe mz na nb nc b"><strong class="lb iu">permissions</strong></code><strong class="lb iu">——</strong>这里变得更有趣了。你不能在另一个用户的机器上为所欲为——他们需要首先允许。因此，如果你想改变你的用户的Chrome存储，你需要把它放在权限数组中。它看起来像这样:<code class="fe mz na nb nc b">“permissions”: [“storage”]</code>。但是对于本教程，我们不需要它。</li><li id="7f06" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">仅仅是你的发布版本——当你在Chrome商店更新你的应用时，你需要改变它</li><li id="e6a3" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">需要<code class="fe mz na nb nc b"><strong class="lb iu">browser_action</strong></code> <strong class="lb iu">、</strong> <code class="fe mz na nb nc b"><strong class="lb iu">default_popup</strong></code> <strong class="lb iu">和</strong> <code class="fe mz na nb nc b"><strong class="lb iu">default_title</strong></code> <strong class="lb iu"> </strong>来指定您的扩展将做什么。<code class="fe mz na nb nc b">default_popup</code>指定您希望您的扩展呈现的页面(在我们的例子中，就是<code class="fe mz na nb nc b">index.html</code>)。<code class="fe mz na nb nc b">default_title</code>是将鼠标悬停在扩展图标上时显示的标题。</li></ul><p id="a2bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有很多明显的属性，但是你必须自己去探索。目前，它们并不相关。</p><p id="84f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正常情况下，我们现在已经完事了。您的React扩展功能齐全，但是正如我前面提到的，我们需要解决内联脚本的使用问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="229c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.创建一个。环境文件</h1><p id="9c8b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在主文件夹(<code class="fe mz na nb nc b">cool-extension</code>)中，您现在需要创建一个名为<code class="fe mz na nb nc b">.env</code>的文件来保存您的环境变量。添加这行代码:</p><p id="23e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">INLINE_RUNTIME_CHUNK=false</code></p><p id="22cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将确保Chrome没有任何问题。</p><p id="245f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是最后一步。我们现在可以启动我们的分机了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9e10" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.构建您的扩展</h1><p id="2c22" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在命令行中，您现在必须运行:</p><p id="c09d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">npm run build</code></p><p id="f268" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在您的<code class="fe mz na nb nc b">cool-extension</code>文件夹中创建一个构建文件夹。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ed6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.在Chrome中打开你的扩展</h1><p id="a9bf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在你的Chrome搜索栏中输入:</p><p id="9e7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">chrome://extensions/</code></p><p id="2798" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在右上角，打开开发人员模式。这将在左上角呈现两个按钮。加载未打包的扩展和打包的扩展。</p><p id="b9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击“Load unpacked extension”，并选择您的构建文件夹。</p><p id="ba83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的扩展现在会显示在您的浏览器中，并且会在您每次使用<code class="fe mz na nb nc b">npm run build</code>时自动更新。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="eb7f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6.(可选):添加一些CSS</h1><p id="b0ae" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们的扩展成功了——恭喜！但是看起来有点小。为了改变这一点，我们需要添加一些CSS。</p><p id="0c21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到您的<code class="fe mz na nb nc b">App.css</code>文件，并添加以下内容:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="33e1" class="nh md it nc b gy ni nj l nk nl">.App { </span><span id="645d" class="nh md it nc b gy nm nj l nk nl">  text-align: center;<br/>  min-width: 300px;<br/>  max-width: 300px;<br/>  min-height: 300px;<br/>  max-height: 300px;</span><span id="aef2" class="nh md it nc b gy nm nj l nk nl">}</span></pre><p id="cd2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次运行<code class="fe mz na nb nc b">npm run build</code>，等待它完成，然后打开你的扩展。</p><p id="58a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！感谢您阅读本指南。</p></div></div>    
</body>
</html>