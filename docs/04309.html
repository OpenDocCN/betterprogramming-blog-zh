<html>
<head>
<title>Kafka vs. RabbitMQ: Why Use Kafka?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡夫卡vs. RabbitMQ:为什么要用卡夫卡？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/kafka-vs-rabbitmq-why-use-kafka-8401b2863b8b?source=collection_archive---------3-----------------------#2020-04-05">https://betterprogramming.pub/kafka-vs-rabbitmq-why-use-kafka-8401b2863b8b?source=collection_archive---------3-----------------------#2020-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8278" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">所有的数据流服务都是平等的吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30aa73c034aeb453295ef2cfebc89ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DJvGajoZpUGKsSSEFyzwwQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">利瓦伊·琼斯在<a class="ae ky" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d4d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成功完成任何项目的一个重要部分是选择正确的工具来执行重要的基本功能。对于开发人员来说，有几个消息服务可供选择总是一个挑战。</p><p id="28ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个悬而未决的关键问题是使用<a class="ae ky" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Kafka </a>或<a class="ae ky" href="https://www.rabbitmq.com/" rel="noopener ugc nofollow" target="_blank"> RabbitMQ </a>服务。这两个平台都有几个功能和用例，可以帮助用户做出明智的决策。</p><p id="b9ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Apache Kafka和RabbitMQ是消息服务领域的两个顶级平台。尽管两个平台处理消息的方式不同，但不同之处在于它们所选择的架构、设计和交付方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9093" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">但是什么是阿帕奇卡夫卡和RabbitMQ呢？</h1><p id="9548" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Apache Kafka和RabbitMQ是开源平台，用于流数据，并配备了商业支持的<a class="ae ky" href="https://www.rabbitmq.com/tutorials/tutorial-three-ruby.html" rel="noopener ugc nofollow" target="_blank"> pub/sub </a>(我们将在后面描述)系统，由几家企业使用。</p><h2 id="b718" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">什么是阿帕奇卡夫卡？</h2><p id="2ef2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">简单地说，Apache Kafka是一个为高访问数据重放和流而优化的消息总线。健壮的消息代理允许应用程序不断处理和重新处理流数据。</p><p id="37f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开源平台使用一种简单易用的路由方法，使用路由键向主题发送消息。Kafka工具于2011年推出，是为流媒体设置而创建的。</p><h2 id="4e21" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">什么是RabbitMQ？</h2><p id="60fb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RabbitMQ是一个全面的消息传递代理，支持高级消息队列协议(AMQP)、MQ遥测传输(MQTT)和简单(或流)面向文本的消息传递协议(STOMP)等协议。</p><p id="3415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RabbitMQ可以处理寻求高效率的用例，比如处理在线支付。RabbitMQ还可以作为微服务之间的消息代理。</p><p id="8a88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RabbitMQ于2007年推出，最初是消息传递和SOA系统中的主要元素。如今，它的扩展角色还包括流用例。</p><p id="6d25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果您正在考虑是使用Apache Kafka还是RabbitMQ，请继续阅读，了解架构、方法的差异以及它们的性能优缺点。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="223a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">架构差异</h1><h2 id="7c66" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">阿帕奇卡夫卡建筑</h2><p id="df9c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Apache Kafka架构使用大量的发布-订阅消息和快速可伸缩的流平台。与日志一样，健壮的消息存储库利用服务器集群来保存主题(类别)中的若干记录。</p><p id="8907" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有Kafka消息都有一个密钥、值和时间戳。智能消费者或哑代理模型不尝试跟踪消费者消息，只保留未读消息。Apache Kafka保存了定义时间范围内的所有消息。</p><h2 id="ea6f" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">RabbitMQ架构</h2><p id="f70b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RabbitMQ体系结构利用了一个全方位的消息代理，它包含了点对点、请求/回复和发布/订阅通信设计的变化。</p><p id="b5b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用哑消费者和智能代理方法允许以与监视消费者状态的代理相似的速度向消费者可靠地传递消息。</p><p id="b5f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过使用同步或异步通信方法，该平台为几个插件提供了足够的支持，包括。NET、客户端库、Java、Node.js、Ruby等等。</p><p id="ea24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还提供了分布式部署场景以及多节点集群到集群的联合，完全不依赖外部服务。</p><p id="3a05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过<a class="ae ky" href="http://kth.diva-portal.org/smash/get/diva2:813137/FULLTEXT01.pdf" rel="noopener ugc nofollow" target="_blank"> RabbitMQ </a>，发布者可以将消息传送到交易所，并由消费者从队列中检索消息。通过交换将生产者从线路中分离出来，保证了生产者不会被硬编码的路由选择所困扰。</p><h1 id="2863" class="mc md it bd me mf nl mh mi mj nm ml mm jz nn ka mo kc no kd mq kf np kg ms mt bi translated">发布/订阅(发布/订阅)</h1><p id="397f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">发布/订阅是异步消息传递的主要消息传递模式之一，异步消息传递是一种消息传递方案，在这种方案中，消费者将消息的生成与处理分离开来。</p><h2 id="dd8d" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">阿帕奇卡夫卡</h2><p id="781b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在Apache Kafka中，该平台是为高容量发布-订阅消息和流创建的，旨在持久、快速和可伸缩。本质上，Kafka提供了一个可持续的消息存储和一个服务器集群。</p><h2 id="9af9" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">兔子q</h2><p id="13d8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在RabbitMQ中，设计需要一个全面的消息代理，使用点对点、请求/回复和发布/订阅通信风格模式的几种变体。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6aef" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">推/拉模式</h1><h2 id="699b" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">阿帕奇·卡夫卡:基于拉的方法</h2><p id="7204" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Kafka使用拉模型，在该模型中，消费者从指定的偏移量开始批量发出消息请求。Apache Kafka还允许长池，当没有消息通过偏移量时，它会停止循环。</p><p id="955e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于Apache Kafka的分区，拉模型对于它来说仍然是合理的。它的平台可以在没有竞争消费者的情况下在一个障碍内提供消息顺序。</p><p id="5558" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法允许用户利用消息批处理来实现高效的消息传递和更高的吞吐量。</p><h2 id="99c5" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">RabbitMQ:基于推送的方法</h2><p id="2f8c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RabbitMQ将消息推送给消费者，其中包括一个预取极限配置，对于防止消费者被多个消息淹没至关重要。</p><p id="338a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们对于低延迟消息传递也很有用。push方法的目的是快速分发单个消息，同时保证所有消息均匀地并行化，并在有序队列中处理消息，通常是在消息到达时。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9d6b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用例</h1><h2 id="67ca" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">阿帕奇卡夫卡</h2><p id="a15a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Apache Kafka本身提供了一个额外的代理，这是它最著名的地方，也是平台的一个流行元素。额外的代理是有预谋的，并在流处理设置的方向上进行营销。</p><p id="0f68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，Kafka Streams的加入可以作为Apache Flink、Apache Spark、Google Cloud数据流和Spring Cloud数据流等流媒体平台的替代方案。</p><p id="b3d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出色的<a class="ae ky" href="https://kafka.apache.org/uses" rel="noopener ugc nofollow" target="_blank">用例</a>文档提供了Apache Kafka的详细用例，包括提交日志、事件源、日志聚合、度量、web活动跟踪以及更多任务。</p><h2 id="97c2" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">兔子q</h2><p id="dee4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RabbitMQ提供了一个全面的消息传递解决方案，在web服务器对请求的及时响应中广泛使用，以取代在用户等待结果时执行资源密集型措施的强制响应。</p><p id="81f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RabbitMQ也非常适合将消息分发给多个接收者，因为它提供了许多用于可靠交付的<a class="ae ky" href="http://www.rabbitmq.com/confirms.html" rel="noopener ugc nofollow" target="_blank">特性</a>、联合、管理工具、路由、安全和<a class="ae ky" href="http://www.rabbitmq.com/features.html" rel="noopener ugc nofollow" target="_blank">其他功能</a>。</p><p id="9d4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在附加软件的帮助下，RabbitMQ还可以有效地处理几个重要的用例。与Apache Cassandra结合可以提供对流历史的访问，或者与用于访问“无限”队列的<a class="ae ky" href="https://github.com/google/leveldb" rel="noopener ugc nofollow" target="_blank"> LevelDB </a>插件结合。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6324" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="ad7b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Apache Kafka和RabbitMQ这两个平台都提供了各种旨在满足大量需求的关键服务。</p><p id="e463" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RabbitMQ对于需要低数据流量的简单用例已经足够了。此外，使用RabbitMQ，其他额外的好处包括灵活的路由前景和优先级队列选项。</p><p id="08d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，如果所提出的用例具有对海量数据和高流量的需求，那么Apache Kafka是值得考虑的。</p></div></div>    
</body>
</html>