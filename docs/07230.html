<html>
<head>
<title>How to Create a Revolut-Esque Cards Collection View on iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在iOS上创建一个Revolut风格的卡片收藏视图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-a-revolut-esque-cards-collection-view-on-ios-c42e649f17a9?source=collection_archive---------7-----------------------#2020-12-21">https://betterprogramming.pub/how-to-create-a-revolut-esque-cards-collection-view-on-ios-c42e649f17a9?source=collection_archive---------7-----------------------#2020-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0ea1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习制作滚动和捕捉集合视图单元格，并在滚动时缩放它们</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3d264f66ec9293c54b8c65566ec3946a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HU39kchLN--45d6B"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Arnel Hasanovic 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="af5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章将帮助你理解如何通过子类化一个<code class="fe ls lt lu lv b">UICollectionViewFlowLayout</code>来定制一个<code class="fe ls lt lu lv b">UICollectionView</code>布局。</p><p id="2e47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将讨论插入和行间距来定制单元格周围的间距，并使用<code class="fe ls lt lu lv b">UIScrollView</code> <strong class="ky ir"> </strong>协议在用户滚动时为每个单元格添加对齐行为。当用户在单元格上滑动时，我们还将在单元格中添加一个缩放动画，给它一种有弹性的感觉。</p><p id="7f97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将创建一个<em class="lw">应用内钱包</em>，类似于Revolut所拥有的(即用户可以刷卡的信用卡集合，将所选的卡置于中心，并显示其他卡的一小部分):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/4c2805e651db425647ce0f7d13cf320a.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/1*RGvMOdX64n3_rGnm1ZBJUA.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这就是你在这篇文章结束时要达到的目标。</p></figure><p id="49f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把这个问题分成三部分:</p><ul class=""><li id="78b3" class="ly lz iq ky b kz la lc ld lf ma lj mb ln mc lr md me mf mg bi translated">增加卡片之间的间距，以便上一张和下一张卡片的一部分可见(居中分页)。</li><li id="e6c7" class="ly lz iq ky b kz mh lc mi lf mj lj mk ln ml lr md me mf mg bi translated">添加一个snap-on-scroll行为，以便只有一张卡片位于屏幕中央。</li><li id="564f" class="ly lz iq ky b kz mh lc mi lf mj lj mk ln ml lr md me mf mg bi translated">当用户开始滚动时缩小选定的卡片，并在滚动结束时放大新的卡片。</li></ul><p id="da0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以让我们开始吧。🥳</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="9d39" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">1.设置集合视图</h1><p id="5a3f" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">建立项目非常简单。确保选择故事板作为用户界面，我们就可以开始了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/144e12b85f509f15b8905a4c78a4e55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zoi5FZEsBBMHU6n7nk_2Cw.png"/></div></div></figure><p id="e4f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">UI在这里也不需要太多准备。你只需要做到以下几点:</p><ul class=""><li id="eda6" class="ly lz iq ky b kz la lc ld lf ma lj mb ln mc lr md me mf mg bi translated">给<code class="fe ls lt lu lv b">ViewController</code>场景添加一个<code class="fe ls lt lu lv b">UICollectionView</code>，并添加约束。</li><li id="4776" class="ly lz iq ky b kz mh lc mi lf mj lj mk ln ml lr md me mf mg bi translated">将收藏视图的滚动方向设置为<code class="fe ls lt lu lv b">horizontal</code> <em class="lw"> </em>，取消选择任何滚动指示器。</li><li id="67e9" class="ly lz iq ky b kz mh lc mi lf mj lj mk ln ml lr md me mf mg bi translated">添加子视图(卡号、背景、CVV等。)添加到集合视图单元格中，并添加约束。</li><li id="0231" class="ly lz iq ky b kz mh lc mi lf mj lj mk ln ml lr md me mf mg bi translated">填写单元格可重用标识符。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/b41ff0c5e7f1b8c5f228bf03ac9a3453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAQjWe7YdmurvN1OVf00vA.png"/></div></div></figure><p id="8b8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以从<a class="ae kv" href="https://github.com/burhanshakir/peeking-cards-ios" rel="noopener ugc nofollow" target="_blank">项目存储库</a>中获得资产和确切的维度。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="f7e9" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">2.在卡片之间创建间距(居中分页)</h1><p id="003d" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">控制集合视图单元格如何在屏幕上定位和排列的一个好方法是子类化<code class="fe ls lt lu lv b">UICollectionViewFlowLayout</code>。我们将创建一个自定义类来为我们处理居中分页:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="3127" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后将其设置为集合视图，最好是在<code class="fe ls lt lu lv b">ViewController</code>类中，如下所示:</p><pre class="kg kh ki kj gt nu lv nv nw aw nx bi"><span id="3073" class="ny mu iq lv b gy nz oa l ob oc">collectionView.collectionViewLayout = CardsCollectionFlowLayout()</span></pre></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="b3d5" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">3.添加滚动捕捉行为</h1><p id="bc2a" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated"><code class="fe ls lt lu lv b">scrollViewWillEndDragging(_:withVelocity:target:ContentOffset:)</code>实例方法可用于确定用户何时完成滚动，以及集合视图需要滚动到哪个单元格:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="88f2" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">4.缩放卷轴上卡片的大小</h1><p id="3283" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">在用户完成滚动并且集合视图已经滚动到所选择的卡片之后，我们可以更新<code class="fe ls lt lu lv b">previousSelectedCell</code>和<code class="fe ls lt lu lv b">currentSelectedCell</code>的大小。</p><p id="04c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将创建两个扩展方法来处理这个问题:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="e8d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">collectionView</code>滚动后，我们可以在<code class="fe ls lt lu lv b">scrollViewWillEnd</code>方法中调用这些方法:</p><pre class="kg kh ki kj gt nu lv nv nw aw nx bi"><span id="dd9d" class="ny mu iq lv b gy nz oa l ob oc">previousSelectedCell?.transformToStandard()<br/>nextSelectedCell?.transformToLarge()</span></pre></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="5fef" class="mt mu iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">结论</h1><p id="4c65" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">就是这样！完整的项目可以在GitHub 上获得<a class="ae kv" href="https://github.com/burhanshakir/peeking-cards-ios" rel="noopener ugc nofollow" target="_blank">。如果你遇到什么问题，请随时查看。</a></p><p id="9622" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望这能帮你节省一些时间。如果你有任何问题，请随时回复。感谢阅读和快乐编码！</p></div></div>    
</body>
</html>