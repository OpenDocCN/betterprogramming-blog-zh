<html>
<head>
<title>How to Add Authentication to MongoDB in Portainer (Docker)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Portainer (Docker)中向MongoDB添加身份验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-authentication-to-mongodb-in-portainer-docker-30a60ab7858a?source=collection_archive---------18-----------------------#2020-03-03">https://betterprogramming.pub/add-authentication-to-mongodb-in-portainer-docker-30a60ab7858a?source=collection_archive---------18-----------------------#2020-03-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2923" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">默认情况下，MongoDB <strong class="ak">不使用任何认证</strong>。在生产中使用数据库之前，请确保对此进行了更改。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6597c9324a1501a65a5ef31f9e345b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzGm1hOzwvRRMRvF19yj1Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@getcroissant?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">羊角面包</a>在<a class="ae ky" href="https://unsplash.com/collections/764827/work?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="d55c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>默认情况下不使用任何认证。当将数据库打开到internet时，应该更改这一点。</p><p id="051e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将描述如何在<a class="ae ky" href="https://www.portainer.io/" rel="noopener ugc nofollow" target="_blank">Portainer</a>——Docker的web接口中为MongoDB启用身份验证。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cf48" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">向MongoDB添加身份验证</h1><ol class=""><li id="c195" class="mu mv it lb b lc mw lf mx li my lm mz lq na lu nb nc nd ne bi translated">打开您的Portainer界面。</li><li id="bcbd" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">如果您还没有，请安装MongoDB。(你可以通过Portainer上的应用模板来完成。)</li><li id="c126" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">进入MongoDB容器的控制台。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/2e8168ef13594be2cb437afc26dffbfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GoyWjlHU3IoJA7nAeQ1WCg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/cedd58e3cca3770c3ec00733d4f81b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*CdxAsumfFydNlMpCjwZQdQ.png"/></div></figure><p id="5d22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.将<code class="fe nm nn no np b">mongo</code>写入控制台。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/2b912f1bf2a5c813ae4dd08ed55c5b93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_BMCZule-TmUPDh7paPMg.png"/></div></div></figure><p id="ef51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.转到<code class="fe nm nn no np b">admin</code>数据库。</p><pre class="kj kk kl km gt nr np ns nt aw nu bi"><span id="933d" class="nv md it np b gy nw nx l ny nz">&gt; use admin</span></pre><p id="af9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.创建新用户。</p><pre class="kj kk kl km gt nr np ns nt aw nu bi"><span id="8b92" class="nv md it np b gy nw nx l ny nz">&gt; db.createUser(<br/>  {<br/>    user: "<strong class="np iu">nameHere</strong>",<br/>    pwd: "<strong class="np iu">passwordHere</strong>",<br/>    roles: [ { role: "root", db: "admin" } ]<br/>  }<br/>)</span></pre><p id="a66e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想粘贴上面的代码片段，先把它复制到一个编辑器中，然后填写那里的字段——这会容易得多。此外，如果您想将其粘贴到Portainer控制台中，您必须右键单击并选择paste。</p><p id="7226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在已经创建了root用户。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b459" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">告诉MongoDB从认证开始</h1><p id="fec3" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">1.转到MongoDB容器的<code class="fe nm nn no np b">Duplicate/Edit</code>部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/d8677f487f6891758a09893e67189589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OomPk2OUDxi3qJBfnfJapg.png"/></div></div></figure><p id="251d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.将您的命令设置为<code class="fe nm nn no np b">'mongod' '--auth'</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/dfca7779a03b4b8f6b7b63e27e8047cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ZXc_JnXjmuQjLOrWlykGuw.png"/></div></figure><p id="0b91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.部署容器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/2df84f6520af5f58302fca5e147b981a.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/1*8l5EDfg4N036UkMhP3qItQ.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3e5c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="70ac" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">您的整个MongoDB现在使用用户名/密码认证！</p><p id="476f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>