<html>
<head>
<title>How to Use UIViewRepresentable in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中使用UIViewRepresentable</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-uiviewrepresentable-in-swiftui-1b9a0a7c1358?source=collection_archive---------5-----------------------#2020-06-08">https://betterprogramming.pub/how-to-use-uiviewrepresentable-in-swiftui-1b9a0a7c1358?source=collection_archive---------5-----------------------#2020-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c971" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将UIKit的所有手势添加到您的SwiftUI库中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/72e79eb6c797f5e41df36997b6fe4896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xpRzOYeePZi1rjmI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dtopkin1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">戴恩托普金</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="16c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢SwiftUI。这是Swift语言的一大补充。但是我一直听到开发者说它还没有准备好迎接黄金时代，我不得不同意这一点。也就是说，我有一种挥之不去的感觉，也许在这方面我可以做得更多。</p><p id="b924" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇短文中，我将尝试这样做。我打算通过<code class="fe lv lw lx ly b">UIViewRepresentable</code>在SwiftUI中实现几个UIKit手势。对于那些想要添加更多UIKit的按钮、旋钮和挂钩的广泛库的人来说，这也应该是一个很好的参考/模板，可以这么说，这是SwiftUI中所缺少的。</p><p id="79df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。UIKit总共有七种手势。SwiftUI有五个。可以说，最重要的是点击、长按、旋转、拖动和放大(你可以自定义放大，也可以捏造其他的，但我不想重写iOS库)。如果我们已经在UIKit中得到它，让我们使用它。UIKit具有点击、挤压、旋转、平移、滑动、屏幕边缘平移和长按功能。其中一些的实现相当微妙。</p><p id="d697" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在UIKit下，swipe可以理解你拿着设备的方式，并获得正确的方式，因此向左滑动始终是向左滑动。尽量用拖来实现。你可以，但是你需要更多的代码来考虑手持设备的方式。这是一个在UIKit中完整实现与在SwiftUI中部分实现的比较突出的例子。</p><p id="6119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不管怎样，让我们开始吧。我们从一个结构开始，当然，还有你在<code class="fe lv lw lx ly b">UIViewRepresentable</code>中需要的两个方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="1d46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第一个函数(<code class="fe lv lw lx ly b">makeView</code>)中，我们将定义我们的手势。在第二个(<code class="fe lv lw lx ly b">updateUIView</code>)内，如果需要的话我们会刷新它们。我们已经定义了一个视图，我称之为<code class="fe lv lw lx ly b">v</code>。</p><p id="c71e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要定义我们将调用的方法，以将手势数据传递回SwiftUI:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="cb6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，我们都准备好了。现在，我们所需要做的就是添加一些手势和那个无处不在的框架组合起来。在<code class="fe lv lw lx ly b">makeView</code>中，我们可以定义几个滑动手势:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="da9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们用同样的方法添加到视图中，当然:</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="3e62" class="mf mg it ly b gy mh mi l mj mk">v.addGestureRecognizer(leftSwipe)<br/>v.addGestureRecognizer(rightSwipe)</span></pre><p id="8c69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以及我之前定义的<code class="fe lv lw lx ly b">Coordinator()</code>类的目标函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="2ffc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，SwiftUI代码将所有东西整合在一起:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="cc01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你有了:让UIKit直接与SwiftUI对话的快速实现指南。这里有一个要点，将所有这一切结合在一起。还有一点代码，但没什么重要的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="e053" class="ms mg it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="ca18" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">如果你喜欢读这篇文章并想知道更多，我需要给你介绍我的同事Anupam Chugh关于同一主题的优秀文章。这是这首曲子的高级版本。</p></div></div>    
</body>
</html>