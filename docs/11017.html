<html>
<head>
<title>SQL, NoSQL, Graph: A Commentary on Databases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL，NoSQL，图表:对数据库的评论</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sql-nosql-graph-a-commentary-on-databases-1f0861624eb4?source=collection_archive---------8-----------------------#2022-02-10">https://betterprogramming.pub/sql-nosql-graph-a-commentary-on-databases-1f0861624eb4?source=collection_archive---------8-----------------------#2022-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f265" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">理解为什么会有新类型的数据库出现</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/336b1cee5dbbeb531265148e6491056b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f8gHG4ikydMrrbZoRomFnw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">拉格斯技术人员在<a class="ae kv" href="https://unsplash.com/s/photos/tech?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8f96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我开始我的编程之旅时，我相当深入地学习了许多语言，如Python和web框架，如Django。我不太关心数据库，它们如何存储信息，或者为什么它们有特定的设计模式。</p><p id="5877" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但随着时间的推移，我意识到真正理解幕后发生的事情是非常重要的。</p><p id="06ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我问人们为什么在工作场所使用某些数据库系统时，他们没有多少头绪。这些决定通常是由高层做出的。</p><p id="c979" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天时事通讯的目标是让你了解各种数据库系统在使用目的上的不同。</p><blockquote class="ls lt lu"><p id="06e7" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq"> 🧠精神食粮！</em> </strong> <em class="iq">为什么我们在处理数据库系统时要限制自己？</em></p><p id="5f53" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">我同意它们是相当复杂的系统，但从更广泛的角度来看，它们只是存储数据的系统，对吗？您只需要最有效的方式来存储和检索您的数据。那么，为什么要将自己局限于关系数据库或文档数据库呢？</p><p id="c449" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">每个应用程序是否只需要使用一种类型的数据库？是类似“2022年最好的数据库系统是哪一个？”还要理智的去问？</em></p><p id="7131" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">想想吧！当你读完整篇文章后再回到这个话题</em></p></blockquote><p id="6b6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我之前的一期<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/understanding-postgresql-how-bad-query-practices-are-hurting-your-backend-1d3a966af4cb">中，我谈到了一些优化数据库查询的实践。但这只是皮毛。它没有谈到数据库设计模式。</a></p><h1 id="8484" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">为什么是不同的数据库？</h1><p id="5b45" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们的数据需求会不时发生变化。早期的数据并不庞大。收集数据的价值那时还没有意识到。此外，也没有足够的技术来获取这些数据。</p><p id="4153" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是随着时间的推移，数据不断发展，规模不断扩大。我们一开始使用SQL这样的数据库，后来使用MongoDB这样的数据库来存储混乱和不一致的数据。在当今的互联世界中，我们也有图形数据库，它们有助于对彼此错综复杂的数据进行建模。</p><p id="f37a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本上，这种演变表明，您需要根据您想要对数据做什么来优化和选择存储引擎或数据库类型(想想OLAP与OLTP)</p><h1 id="48f4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">文档和关系数据库述评💭</h1><h2 id="b9fc" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">关系数据库</h2><p id="3254" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在很长一段时间里，关系数据库是数据库领域的主导者。它成功地保护了自己免受他人攻击，并且是大多数应用程序的事实，以至于它将成为每个人在其技术生涯中学习的第一个也是唯一一个数据库技术。</p><blockquote class="ls lt lu"><p id="27db" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq">什么是关系数据库？</em>T3】</strong></p><p id="5743" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">关系数据库将你的数据排列成被称为表格的列和行。</em></p><p id="d687" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">如果要添加更多类型的数据，您可以将其拆分成多个表格，然后通过“键”将它们链接起来。键是用于引用另一个表中特定行的标识符。</em></p><p id="427a" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">这种组织数据的方式就是我们所说的“参照完整性”。因为数据不是在任何地方都被编辑，而是只在被引用的地方被编辑一次。因为它是从引用的区域获取的，你只需要在一个地方更新它</p></blockquote><ol class=""><li id="b635" class="ni nj iq ky b kz la lc ld lf nk lj nl ln nm lr nn no np nq bi translated"><strong class="ky ir">关系数据库不是那么容易扩展的。</strong>我并不是说他们不能。脸书使用关系数据库。因此它们可以扩展。但是这对建筑师来说有点挑战性。</li><li id="8e45" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">这是一个关于概念的<a class="ae kv" href="https://www.notion.so/blog/sharding-postgres-at-notion" rel="noopener ugc nofollow" target="_blank"> <em class="lv">案例研究</em> </a>以及他们在扩展时如何对数据库进行分片。</li><li id="31ff" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">在数据量不断变化的情况下，关系数据库不是很好。让我们以一个模型为例，您需要存储求职者的详细信息。</li><li id="55b8" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">一个候选人可能在10家不同的公司工作过，也可能只有一家。或者他们可能去了2所学校和0所大学，但可能在Udemy上完成了很棒的课程。这种数据不太适合附加模式，因此不太适合关系数据库。</li><li id="19a0" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">此外，如果数据有太多的类型，那么为每种类型创建表是不理想的，因为连接会导致它们自己的读写开销。</li><li id="3c80" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated"><strong class="ky ir">拥有一个模式可能会受到限制。</strong>关系数据库有约束条件。例如，如果两个表有外键关系，删除一个表中的一行将删除相关表中的相关行。</li><li id="c993" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">因此，在数据需要严格的情况下，这是很有用的，但是您必须注意这种极端情况。</li><li id="d420" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">多级联接会降低查询速度。当您查询多个表的信息时，您创建了连接。当你有像这样的多级连接时，查询会变得越来越慢。如果您的API越来越慢，检查SQL查询，您可能会明白为什么。</li></ol><p id="2269" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么什么时候会选择关系数据库呢？</p><ol class=""><li id="c524" class="ni nj iq ky b kz la lc ld lf nk lj nl ln nm lr nn no np nq bi translated">如果您想要数据的绝对一致性，</li><li id="b46f" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">您知道数据需求在未来不会有太大的变化</li><li id="76ca" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">你知道到时候你将能够扩展它</li></ol><h2 id="3a53" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">文档数据库</h2><p id="16f8" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">引入文档数据库是为了克服关系数据库的一些限制。</p><blockquote class="ls lt lu"><p id="1ba5" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq">什么是文档数据库？</em> </strong></p><p id="5e23" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">文档数据库将信息存储在类似JSON的文档中。关系数据库中的每一行都类似于文档数据库中的一个文档。最流行的文档DB是MongoDB。它在存储动态数据方面非常方便。</em></p><p id="1069" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">它也非常类似于您的应用程序处理的数据类型。所以不需要ORM(对象关系映射)。因此，查询速度很快！</em></p></blockquote><p id="7345" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您正在处理大规模的动态数据，那么文档数据库是您的首选解决方案。</p><p id="2860" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文档数据库的另一个优点是，如果您想访问整个文档，查询会更快，而关系数据库则需要连接多个表来访问相同的数据。</p><p id="af37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是文档数据库也有自己的问题。</p><p id="7f28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，它不支持连接，这在合并数据时是一个缺点。</p><p id="ff9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之，如果数据的"<em class="lv">连通性</em>"很高，那么使用文档数据库就很复杂。</p><p id="fe18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当涉及到一对多关系时，文档数据库是好的，但当涉及到多对一或多对多关系时，文档数据库就不好了。规范化文档模型中的数据也不容易。</p><p id="6c18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么你什么时候会选择文档数据库呢？</p><ol class=""><li id="8910" class="ni nj iq ky b kz la lc ld lf nk lj nl ln nm lr nn no np nq bi translated">如果你的数据变得混乱和不一致，那么维护一个模式将是一件痛苦的事情</li><li id="ecde" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">如果您的用例涉及访问整个数据文档</li><li id="0347" class="ni nj iq ky b kz nr lc ns lf nt lj nu ln nv lr nn no np nq bi translated">如果您的数据点是独立的，并且不需要与其他类型的数据进行太多的交互。</li></ol><h1 id="65c6" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">图形数据库也很神奇！</h1><p id="ba23" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在社交媒体时代，一些用例可能不是传统数据库方法的最佳选择。</p><p id="84dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据的连通性增加了许多倍。与每个实体(例如电子商务网站上的产品)相关联的参数和数据点(例如价格、产品颜色)的数量增加了。</p><p id="bc7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关系数据库对多对多是好的，但如果数量太多就不好了。</p><p id="f146" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是图形数据库的用武之地。他们很酷，<a class="ae kv" href="https://neo4j.com/developer/graph-database/" rel="noopener ugc nofollow" target="_blank">看看这个</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/81b9532e819649044cecbe98f43e707c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2fOcl3XFbLj6K8j4.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:Neo4j</p></figure><blockquote class="ls lt lu"><p id="612e" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="iq">我们来看一个场景！🖌 </em> </strong></p><p id="3a74" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">所以，我想查询如下:</em></p><p id="8a31" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><code class="fe nx ny nz oa b"><em class="iq">Fetch me all the friends of Rahul who are married and living in Delhi but also are a Python developer.</em></code></p><p id="7726" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">为此编写一个SQL查询的恐怖是不可想象的，我还没有谈到查询的时间。</p><p id="4930" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><em class="iq">这是图形数据库大放异彩的地方。</em></p></blockquote><p id="4e65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在图形数据库中，如果有路径连接它们，就可以回答这个问题。</p><p id="ecfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我看来，图形数据库更容易可视化，也更容易理解。它们基本上是存储数据和属性的节点，以及显示节点之间关系的边。</p><h1 id="cf40" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">外卖食品</h1><p id="77cd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">没有放之四海而皆准的解决方案。如果历史是证据的话，那么将会有革命性的存储数据的方法有待发现。</p><p id="ddff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是最重要的是，您应该深入了解您的应用程序存储了哪些数据，以及它是如何检索这些数据的。如果您觉得应用程序中的某种数据应该是文档类型，那么在同一个应用程序中有两个数据库也没有错。像混合解决方案！</p><p id="0de2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多大公司都遵循这种做法。</p><p id="77a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本周，我希望大家看一下自己的数据，并问一下，它是否适合您的数据库？</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><pre class="kg kh ki kj gt oi oa oj ok aw ol bi"><span id="e815" class="mw ma iq oa b gy om on l oo op"><strong class="oa ir">Want to Connect?</strong></span><span id="9993" class="mw ma iq oa b gy oq on l oo op"><a class="ae kv" href="https://softwareengineeringwk.substack.com/" rel="noopener ugc nofollow" target="_blank">Software Engineering Weekly</a> is my weekly newsletter where I publish similar articles to make your software engineering journey easy. Subscribe to it for more!</span></pre></div></div>    
</body>
</html>