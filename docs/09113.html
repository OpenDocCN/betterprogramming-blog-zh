<html>
<head>
<title>How To Use React’s useState() Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React的useState()钩子</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-reacts-usestate-hook-ee0dc6da54f8?source=collection_archive---------14-----------------------#2021-07-15">https://betterprogramming.pub/how-to-use-reacts-usestate-hook-ee0dc6da54f8?source=collection_archive---------14-----------------------#2021-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="77c3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从类到功能组件的状态管理</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2c00798e409ee51bc2be0c25b73f5fbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n_qQqmKMyRTM5alw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·斯科特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="0a14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>是一个开源的JavaScript库，它智能地从虚拟DOM中分割出DOM，并在构建web应用程序时带来了一种创新的状态管理方法。它遵循基于组件的架构和创新的状态管理方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c410" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">React中的组件</h1><p id="163d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在React中，组件是用一个JavaScript类、一个状态和一个<code class="fe mz na nb nc b">render</code>方法实现的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e1f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，不建议总是使用类组件。这是相当沉重的，如果组件中有状态管理的需要，最好只使用类组件<em class="nf">。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7820" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">功能组件</h1><p id="2561" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当我们遇到没有状态的组件时，我们可以简单地使用功能组件来呈现它们。</p><p id="7e16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个不一定有状态的欢迎消息的示例:</p><pre class="kj kk kl km gt ng nc nh ni aw nj bi"><span id="efdf" class="nk md it nc b gy nl nm l nn no">function Welcome(props){<br/>    return &lt;h1&gt;Hello World&lt;/h1&gt;;<br/>}</span></pre><p id="9ff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">功能组件不是类组件，所以我们没有<code class="fe mz na nb nc b">this</code>。因此，我们在组件内部直接调用<code class="fe mz na nb nc b">useState</code>钩子。</p><p id="f512" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以通过JSX表达式<code class="fe mz na nb nc b">{props.&lt;property&gt;}</code>将道具传入功能组件并访问和读取它们，或者你可以析构道具<code class="fe mz na nb nc b">{prop1, prop2, prop3}</code>并用<code class="fe mz na nb nc b">{prop1}</code>直接调用它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ec2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用功能组件进行状态管理</h1><p id="f4fb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你正在开发一个功能组件，并且你意识到它需要添加一些状态，你不必把它转换成一个类组件。</p><p id="7a12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React使用<code class="fe mz na nb nc b"><a class="ae ky" href="https://reactjs.org/docs/hooks-reference.html#usestate" rel="noopener ugc nofollow" target="_blank">useState</a></code>钩子在功能组件中提供简单的状态管理。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0311" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用状态挂钩</h1><p id="67b6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们构建一个简单的应用程序，当你点击“关注”按钮时，它可以让你统计脸书的关注者。</p><p id="1797" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">useState</code>钩子可以从React本身导入。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9218" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，追随者的初始计数被传递到<code class="fe mz na nb nc b">useState</code>函数中，并被设置为初始状态。当点击“跟随”按钮时，计数增加<code class="fe mz na nb nc b">1</code>。</p><p id="b352" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">useState</code>挂钩由三个主要部分组成:</p><ul class=""><li id="e928" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">状态变量</li><li id="7e53" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">更新状态的函数</li><li id="1e17" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">初始状态变量</li></ul><p id="99ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">初始状态是<em class="nf">只有</em> <strong class="lb iu"> <em class="nf"> </em> </strong>实参可以传入<code class="fe mz na nb nc b">useState</code>钩子。</p><p id="ad4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不像在类组件中，“初始<strong class="lb iu"> </strong>状态”是一个<em class="nf">对象</em>，在函数组件中，它可以是任何东西:数字、字符串、布尔值、数组或对象。</p><p id="3574" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中使用<code class="fe mz na nb nc b">useState</code>返回<code class="fe mz na nb nc b">followers</code>状态变量，使用<code class="fe mz na nb nc b">setFollowers</code> <strong class="lb iu"> <em class="nf"> </em> </strong>函数更新状态。</p><p id="7fa2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个<code class="fe mz na nb nc b">setFollowers</code> <strong class="lb iu"> <em class="nf"> </em> </strong>功能类似于类组件中的<code class="fe mz na nb nc b">this.setState({followers: followers + 1})</code>。</p><p id="eb0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React记住重新渲染之间的当前值，并将最近的值提供给<code class="fe mz na nb nc b">setFollowers</code> <em class="nf"> </em>函数。</p><h2 id="b6d5" class="nk md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">处理数字</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="f5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，初始计数被设置为<code class="fe mz na nb nc b">0</code>。每点击一次按钮，它就调用<code class="fe mz na nb nc b">setCount()</code>函数并加1，从而显示按钮被点击的次数。</p><h2 id="b8cb" class="nk md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">处理字符串</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ed2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，颜色变量的初始状态是<code class="fe mz na nb nc b">‘red’</code>。点击按钮时，按钮名称从“红色”<em class="nf"> </em>变为“蓝色”</p><h2 id="cdb2" class="nk md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">处理布尔值</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="db8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，每次点击按钮时，调用<code class="fe mz na nb nc b">setOn()</code>函数并否定当前状态。在初始状态设置为<code class="fe mz na nb nc b">false</code>的情况下，当点击按钮时，<code class="fe mz na nb nc b">setOn()</code>函数将<code class="fe mz na nb nc b">false</code>值取反，变为<code class="fe mz na nb nc b">true</code>(反之亦然)。</p><h2 id="f6a9" class="nk md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">处理对象</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="61e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，记分板包含玩家Sam的名字和分数。点击“重新开始游戏”按钮后，Sam的分数被重置为<code class="fe mz na nb nc b">0</code>。</p><h2 id="f811" class="nk md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">处理数组</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="192d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，当点击按钮时，使用<code class="fe mz na nb nc b">setItems()</code>函数将一个新项目添加到项目数组中。您可以注意到按钮顶部的数组长度会动态变化。</p><p id="336e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查看项目数组，请通过按Ctrl+Shift+I访问浏览器的控制台。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5fad" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最佳实践</h1><p id="ad65" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们中的许多人在开始时都面临这个问题:“我应该使用类组件还是功能组件？”</p><p id="631f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类组件和功能组件都有它们的好处。有些人可能对这个问题有偏见。然而，如果类组件是最好的，他们就不会创建功能组件，反之亦然。那么你应该选择哪一个呢？</p><p id="5caa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问你自己这个问题:这个组件有某种状态吗？</p><p id="2ad4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果是这样，用类组件实现它。否则，用功能组件实现它。充分利用两者，实现更有效的应用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="117e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="8478" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">下次当你使用一个功能组件并想添加一些状态时，记住<code class="fe mz na nb nc b">useState</code>钩子！</p><p id="8717" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分享知识是获取知识的唯一途径。欢迎在评论区贡献你自己的一些想法。</p><p id="4991" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>