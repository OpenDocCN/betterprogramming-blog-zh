<html>
<head>
<title>Web APIs that you should use for a Better UX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为了获得更好的UX，您应该使用的Web APIs</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/must-have-web-apis-for-better-ux-34af6747cb8f?source=collection_archive---------6-----------------------#2019-10-21">https://betterprogramming.pub/must-have-web-apis-for-better-ux-34af6747cb8f?source=collection_archive---------6-----------------------#2019-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f6a5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">您现在应该使用的简单而有用的web APIs</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ebffe4d15be257dd16bd48e603208dc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Slvuzk8UI0Ehlj40pyIkg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">背景图片由<a class="ae ky" href="https://unsplash.com/@jesuskiteque?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jesus Kiteque </a>在<a class="ae ky" href="https://unsplash.com/s/photos/web-design?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="8d14" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Web APIs是一些最强大的工具，可以利用浏览器的功能，为用户提供与本地应用一样好的体验。在本文中，我们将探索一些最有用的web APIs，您可能听说过，也可能没有。无论哪种方式，这些都是你绝对应该用来优化你的应用程序以改善用户体验的API。我们几乎进入了下一个十年。如果你还没有意识到，如果你想让你的产品存活下来，用户体验真的很重要。</p><p id="0a5b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">注意:其中一些API仍在开发中，或者在某些浏览器中不受支持。在使用它们之前，请务必阅读完整的文档。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="2000" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">页面可见性</h1><p id="73a0" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated">我们大多数人可能都使用过<code class="fe nb nc nd ne b">blur</code> <em class="nf"> </em>或<em class="nf"> </em> <code class="fe nb nc nd ne b">focus</code> <em class="nf"> </em>事件上的<em class="nf"/><em class="nf"/><em class="nf"/>对象来检测用户当前是否在页面上。但是这个API不能检测用户在不使用时是否还能看到页面，比如在同一个屏幕上打开两个窗口。页面可见性API 通过告诉你页面何时可见或隐藏来解决这个问题。一个用例是当页面显示给用户时刷新页面内容，即使它不是焦点。</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="51a6" class="nk mf it ne b gy nl nm l nn no">window.addEventListener('visibilitychange', ()=&gt;{<br/>if(document.hidden){<br/>    console.log('Page Hidden');<br/>} else{<br/>    console.log('Page Shown');<br/>}<br/>});</span></pre><p id="5a4f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><code class="fe nb nc nd ne b">visibilityState</code>属性提供了四个不同的值:<code class="fe nb nc nd ne b">visible</code>、<code class="fe nb nc nd ne b">prerender</code>、<code class="fe nb nc nd ne b">hidden</code>和<code class="fe nb nc nd ne b">unloaded</code>。<strong class="ld iu"> </strong>下面是浏览器兼容性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/5cc803aeafabbcac9ee9d589b9a02b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0FwK42cTP_eDochC0rCs1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=pagevisibility" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="2d7d" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">演讲</h1><p id="9485" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated">这是一个很酷的API，可以用来给你的网页添加一个文本到语音的过程。<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank">Speech synthesis</a><strong class="ld iu"><em class="nf"/></strong>是<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API" rel="noopener ugc nofollow" target="_blank"> Web Speech API </a>的一个接口，具有多种可定制的属性，如一组说话声音、语速、音调等。对于带有默认选项的最简单的实现，您只需要三行代码:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="4eb9" class="nk mf it ne b gy nl nm l nn no">let synth = window.speechSynthesis;<br/>let speakthis = new SpeechSynthesisUtterance('hello world');<br/>synth.speak(speakthis);</span></pre><p id="696d" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">对于自定义，您可以单独设置每个属性:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="a39e" class="nk mf it ne b gy nl nm l nn no">let voices = synth.getVoices();<br/>speakthis.voice = voices.find( voice =&gt; voice.name === 'Monica');<br/>speakthis.rate = 0.5;<br/>speakthis.pitch = 0.4;<br/>synth.speak(speakthis);</span></pre><p id="82df" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">有些声音只在某些浏览器中可用；除此之外，支持看起来不错:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/4f4f920d2dac0ec4b21f572c5b37b3a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gl74PageRwBVgqXrzHY_-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=SpeechSynthesis" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="ad7e" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">地理定位</h1><p id="01fa" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" rel="noopener ugc nofollow" target="_blank">地理定位API </a>是一个非常简单而强大的API，用于从浏览器获取用户的当前位置。它给你经纬度坐标，只能在安全的环境下使用(HTTPS)。最简单的使用方法是使用<code class="fe nb nc nd ne b">getCurrentPosition</code> <em class="nf"> </em>方法:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="6d69" class="nk mf it ne b gy nl nm l nn no">navigator.geolocation.getCurrentPosition((position) =&gt; {<br/>  console.log(position.coords.latitude, position.coords.longitude);<br/>});</span></pre><p id="077c" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这个方法会给你用户的经纬度坐标。它还有一个名为<code class="fe nb nc nd ne b">watchPosition</code> <em class="nf"> </em>的方法，可以用来检测位置<em class="nf">的变化。</em>当你想利用用户的位置给出准确的信息时，这个API会非常有用。它有一些额外的属性，如准确性和高度，可以与纬度-经度一起使用。示例用例可以包括在地图上显示最近的事件或在表单上自动填充位置信息。</p><p id="411d" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">它在所有现代浏览器上都得到普遍支持:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/748f037941292b610827734af41315a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-K6tkWCaPeGcRTtzmmtZBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=geolocation" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="607b" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">导航器.设备内存</h1><p id="2e15" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/deviceMemory" rel="noopener ugc nofollow" target="_blank">这个API </a>可以用来检测用户在设备上的内存量。在这种情况下，内存是指安装的RAM，而不是实际可用的内存。如果您想要检查用户的设备是否能够支持繁重的功能并相应地调整用户体验，这将非常有用。就像地理定位一样，它只能在HTTPS使用。使用起来非常简单:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="a46d" class="nk mf it ne b gy nl nm l nn no">console.log(navigator.deviceMemory);</span></pre><p id="9b37" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">有一个上限值和下限值的阈值来保护非常低端或高端设备的用户。因此，如果您有一台16GB内存的笔记本电脑，它将只返回8。可能的值有<code class="fe nb nc nd ne b"><strong class="ld iu"><em class="nf">0.25</em></strong></code> <strong class="ld iu"> <em class="nf">，</em> </strong> <code class="fe nb nc nd ne b"><strong class="ld iu"><em class="nf">0.5</em></strong></code> <strong class="ld iu"> <em class="nf">，</em> </strong> <code class="fe nb nc nd ne b"><strong class="ld iu"><em class="nf">1</em></strong></code> <strong class="ld iu"> <em class="nf">，</em> </strong> <code class="fe nb nc nd ne b"><strong class="ld iu"><em class="nf">2</em></strong></code> <strong class="ld iu"> <em class="nf">，</em></strong><strong class="ld iu"><em class="nf">，</em> </strong>和<code class="fe nb nc nd ne b"><strong class="ld iu"><em class="nf">8</em></strong></code>。这是一项试验性功能，目前对浏览器的支持有限:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/0d7fbf028a59408bd1f795699de88d75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1wl8kKyAUyBsox4csZGaA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息由- caniuse提供。<a class="ae ky" href="https://caniuse.com/#search=deviceMemory" rel="noopener ugc nofollow" target="_blank"> com </a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="170c" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated"><strong class="ak">在线状态</strong></h1><p id="594b" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated">如果你正在运行一个web应用程序，知道用户何时失去网络连接对于提供良好的用户体验来说非常方便。例如，当用户点击表单的提交按钮时，您可能想要发送一封电子邮件并将他们重定向到另一个页面。这个API 可以帮助解决这种情况。想象一下，用户在加载页面后失去了互联网连接；浏览器会将他们带到失去网络连接页面。您可以通过检查用户点击按钮时是否有网络连接来防止这种情况发生。或者更好的是，你可能希望在你的页面上显示“没有网络连接”的信息，就像所有现代的移动应用程序一样。</p><p id="e05b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">当您想要检查特定事件的按钮点击状态时，您可以使用一行程序，如:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="1b7a" class="nk mf it ne b gy nl nm l nn no">console.log(navigator.onLine ? 'online' : 'offline');</span></pre><p id="30c7" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">或者，如果您想一直收听事件:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="ac4e" class="nk mf it ne b gy nl nm l nn no">window.addEventListener('offline',networkStatus);<br/>window.addEventListener('online',networkStatus);</span><span id="0c47" class="nk mf it ne b gy ns nm l nn no">function networkStatus(e){<br/>console.log(e.type);<br/>}</span></pre><p id="64ce" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">以下是该API的浏览器兼容性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/f101bccab043fd935896029055272a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6F8LG6rpu3tVOOgE-8kEHg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=online" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure><p id="b59a" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">还有一个<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API" rel="noopener ugc nofollow" target="_blank">网络信息API </a>，可用于检测用户当前使用的网络连接类型(wifi、蜂窝等。).</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="ef54" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">震动</h1><p id="1989" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Vibration_API" rel="noopener ugc nofollow" target="_blank">振动<em class="nf"> </em> API </a>可以用来在网页上给出触觉反馈。它让你能够访问设备的振动功能。这对于在浏览器上运行的游戏非常有用，甚至对于在表单域出错的情况下向用户提供反馈也非常有用。该API使用起来非常简单:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="d9c2" class="nk mf it ne b gy nl nm l nn no">// vibrate for one second<br/>navigator.vibrate(1000);</span><span id="048c" class="nk mf it ne b gy ns nm l nn no">// turn of vibration<br/>navigator.vibrate(0);</span><span id="57ec" class="nk mf it ne b gy ns nm l nn no">// vibrate in a pattern =&gt; [vibrate,wait,vibrate,wait,vibrate]<br/>navigator.vibrate([500,400,700,400,6000]);<br/>                  </span></pre><p id="8178" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">注意:如果用户没有点击框架或任何嵌入的框架，对<code class="fe nb nc nd ne b">navigator.vibrate </code>的调用将立即返回<code class="fe nb nc nd ne b">false</code>。</p><p id="eb13" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">你可以在这里找到一些很酷的主题振动模式的代码，比如马里奥、星球大战等等。<strong class="ld iu"> </strong>遗憾的是，目前浏览器支持有限:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/10c9692d55ef62ebb52b3c8e040f3b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SVPe3tcQghBxHhoXyQ9jjA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=vibrate" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="0dd1" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">方向</h1><p id="bef6" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated">检测方向对于保持响应速度和提供更好的用户体验非常有帮助。有两个主要的API可以帮助获得这些信息。</p><p id="f711" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">第一个是<a class="ae ky" href="https://developer.mozilla.org/en/docs/Web/API/DeviceOrientationEvent" rel="noopener ugc nofollow" target="_blank">deviceorientionevent</a>，<strong class="ld iu"> </strong>这是一个实验性的API，使用之前要小心。这个API提供了三个有用的值:</p><ul class=""><li id="8974" class="nv nw it ld b le lf lh li lk nx lo ny ls nz lw oa ob oc od bi translated"><code class="fe nb nc nd ne b">alpha</code>表示设备绕z轴的运动，以度数表示，取值范围为0到360。</li><li id="cf27" class="nv nw it ld b le oe lh of lk og lo oh ls oi lw oa ob oc od bi translated"><code class="fe nb nc nd ne b">beta</code>值代表设备绕x轴的运动，以度表示，取值范围为-180至180。这表示设备的前后运动。</li><li id="b0f2" class="nv nw it ld b le oe lh of lk og lo oh ls oi lw oa ob oc od bi translated"><code class="fe nb nc nd ne b">gamma</code>值代表设备绕y轴的运动，以度数表示，取值范围为-90°到90°。这表示设备从左到右的运动。</li></ul><p id="f15d" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">用法非常简单:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="948a" class="nk mf it ne b gy nl nm l nn no">window.addEventListener('deviceorientation', function(event) {<br/>  console.log(event.alpha + ' : ' + event.beta + ' : ' + event.gamma);<br/>});</span></pre><p id="7bed" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">来自MDN的警告:目前，Firefox和Chrome处理坐标的方式不同。在对它们使用API时要注意这一点。</p><p id="4919" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">此API的一个示例用例是基于设备方向旋转3D图像或徽标。到目前为止，浏览器支持看起来也不错:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/19d6a7263d0840edab4518e922686082.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-4KMi9FFoJir_Oy1aLb0w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=deviceorientation" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure><p id="3ccf" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">另一个可以用来检测方向的API是<a class="ae ky" href="https://developer.mozilla.org/en/docs/Web/API/Screen/orientation" rel="noopener ugc nofollow" target="_blank">屏幕。这是一个非常简单的API，包含两个主要属性:</a></p><ul class=""><li id="b4e4" class="nv nw it ld b le lf lh li lk nx lo ny ls nz lw oa ob oc od bi translated"><code class="fe nb nc nd ne b">type</code> <strong class="ld iu"> </strong>根据屏幕方向返回<code class="fe nb nc nd ne b">portrait-primary</code>、<code class="fe nb nc nd ne b">portrait-secondary</code>、<code class="fe nb nc nd ne b">landscape-primary</code>或<code class="fe nb nc nd ne b">landscape-secondary</code>之一的<strong class="ld iu"> </strong>。</li><li id="974f" class="nv nw it ld b le oe lh of lk og lo oh ls oi lw oa ob oc od bi translated"><code class="fe nb nc nd ne b">angle</code>返回设备的旋转角度。Eg- 0，90等。</li></ul><p id="d91d" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">对该API的支持是有限的，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/22e765c0109c10ea4981bb007c5c94c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I2KCKxqBTjSpu5cpEEdZwQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=screenorientation" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="5f42" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">设备照明事件</h1><p id="3e23" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/DeviceLightEvent" rel="noopener ugc nofollow" target="_blank"> DeviceLightEvent </a> API从光电传感器或类似的检测器获取关于设备附近环境光线水平的信息。这在一些用例中非常有用，比如在你的网页上调整亮度或者切换到黑暗模式。但是MDN的另一个缺点是:这是一项实验性技术。在生产中使用之前，请仔细检查浏览器兼容性表。</p><p id="36e2" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">该API使用起来非常简单:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="2f22" class="nk mf it ne b gy nl nm l nn no">window.addEventListener('<strong class="ne iu">devicelight</strong>', function(event) {<br/>  console.log(event.value);<br/>});</span></pre><p id="e2c0" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我在Firefox上检查了一下，它确实对关灯和把手靠近摄像头等事件做出了反应。如果浏览器兼容性得到改善，这种方便的API会有大量的应用；同时，以下是截至2019年10月的浏览器支持:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/f348b80403415503faeeddda9691c9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5Kt6FKoWXPEJix-RCAXLw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=devicelight" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="266f" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">电池状态</h1><p id="7c5e" class="pw-post-body-paragraph lb lc it ld b le mw ju lg lh mx jx lj lk my lm ln lo mz lq lr ls na lu lv lw im bi translated"><a class="ae ky" href="https://developer.mozilla.org/en/docs/Web/API/Battery_Status_API" rel="noopener ugc nofollow" target="_blank">电池状态API </a>允许你获取移动或桌面设备的电池信息。例如，当电池电量不足时提醒用户，或者当电池电量低于某一水平时保存用户数据。但是在你使用它之前，这里有一个来自MDN的免责声明:</p><blockquote class="ol om on"><p id="a776" class="lb lc nf ld b le lf ju lg lh li jx lj oo ll lm ln op lp lq lr oq lt lu lv lw im bi translated">不再推荐使用此功能。虽然一些浏览器可能仍然支持它，但它可能已经从相关的web标准中删除，可能正在被放弃，或者可能只是出于兼容性的目的而保留。</p></blockquote><p id="5c80" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果您仍然决定继续使用它，这个API非常简单。<code class="fe nb nc nd ne b">navigator</code>对象上的<code class="fe nb nc nd ne b">getBattery()</code>方法是一个承诺，它将为您提供<code class="fe nb nc nd ne b">battery</code>对象，您可以在其上设置事件监听器。</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="fc55" class="nk mf it ne b gy nl nm l nn no">navigator.<strong class="ne iu">getBattery()</strong>.then(<strong class="ne iu">battery</strong> =&gt;{<br/>console.log(`${battery.level * 100}%`);<br/> <strong class="ne iu">battery</strong>.addEventListener('<strong class="ne iu">levelchange</strong>', ()=&gt; {<br/>   console.log(`${this.level*100} %'`);<br/>   });<br/>});</span></pre><p id="08db" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">API包含许多其他方法来检测充电、放电、充电时间等。但是，如上所述，要小心使用它，因为浏览器可能会随时取消对API的支持。这是电池状态的浏览器兼容性。要查找其他电池API兼容性，请访问图像描述中给出的链接:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/318c370b9173c4c84c6ce590bc71a690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIsXpURVq0xt-xEsJSLfEQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">信息提供者-<a class="ae ky" href="https://caniuse.com/#search=battery" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure></div></div>    
</body>
</html>