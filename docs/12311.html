<html>
<head>
<title>How to Set Up CI/CD Pipeline For Cloudflare Worker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Cloudflare Worker设置CI/CD管道</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-up-ci-cd-pipeline-for-cloudflare-worker-dbd3603b9c52?source=collection_archive---------13-----------------------#2022-05-26">https://betterprogramming.pub/how-to-set-up-ci-cd-pipeline-for-cloudflare-worker-dbd3603b9c52?source=collection_archive---------13-----------------------#2022-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d0b6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在牧马人、k6和语义发布中使用GitHub动作</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2fa4706062d9d1c3c0910e1260860379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DXuliIHg90yxZP3r"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="eff8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，我在GitHub上的大多数项目都与<a class="ae ky" href="https://github.com/renovatebot/renovate" rel="noopener ugc nofollow" target="_blank">更新</a>保持同步。在启用自动合并的情况下，我希望有足够的信心，自动的依赖项更新不会导致任何回归。</p><p id="26a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试Cloudflare Worker有点不正常。别误会，我喜欢Cloudflare Worker。然而,<a class="ae ky" href="https://blog.cloudflare.com/unit-testing-workers-in-cloudflare-workers/" rel="noopener ugc nofollow" target="_blank">现有的解决方案</a>感觉有点不直观。最重要的是，<a class="ae ky" href="https://github.com/dollarshaveclub/cloudworker" rel="noopener ugc nofollow" target="_blank">dollarshaveclub/cloud worker</a>不再被积极维护，这是一个败笔。</p><p id="946b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">TL；DR:如何使用GitHub Action和</em><a class="ae ky" href="https://k6.io/" rel="noopener ugc nofollow" target="_blank"><em class="lv">Grafana K6</em></a><em class="lv">为Cloudflare Worker项目设置CI/CD管道。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d930" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">概观</h1><p id="4b34" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">之前，<a class="ae ky" href="https://jerrynsh.com/i-built-my-own-tiny-url/" rel="noopener ugc nofollow" target="_blank">我用Cloudflare Worker构建了一个URL shortener克隆</a>。使用这个现有的项目(<a class="ae ky" href="https://github.com/ngshiheng/atomic-url" rel="noopener ugc nofollow" target="_blank"> GitHub </a> link)，我们将考虑为它建立一个CI/CD管道以及简单的集成测试。</p><p id="ad94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的GitHub Action CI/CD管道相当简单。阶段(作业)如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/e5620598cf4dde7f4eb032d2de19b7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-AkdZpYfaGEsIrNM.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">GitHub上的CI工作流示例(<a class="ae ky" href="https://github.com/ngshiheng/atomic-url/actions/runs/2374888846" rel="noopener ugc nofollow" target="_blank">链接</a>)</p></figure><ol class=""><li id="436d" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">皮棉检查或单元测试</li><li id="9578" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">部署到临时环境</li><li id="7a98" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">在我们的试运行环境中运行集成测试</li><li id="ec58" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">运行<a class="ae ky" href="https://github.com/semantic-release/semantic-release" rel="noopener ugc nofollow" target="_blank">语义发布</a>并部署到生产环境中</li></ol><h1 id="4b03" class="md me it bd mf mg np mi mj mk nq mm mn jz nr ka mp kc ns kd mr kf nt kg mt mu bi translated">牧马人配置</h1><p id="763b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，我们必须修改我们现有的 <code class="fe nu nv nw nx b"><a class="ae ky" href="https://github.com/ngshiheng/atomic-url/blob/v1.1.8/wrangler.toml" rel="noopener ugc nofollow" target="_blank">wrangler.toml</a></code> <a class="ae ky" href="https://github.com/ngshiheng/atomic-url/blob/v1.1.8/wrangler.toml" rel="noopener ugc nofollow" target="_blank">文件</a><a class="ae ky" href="https://github.com/ngshiheng/atomic-url/blob/v1.1.8/wrangler.toml" rel="noopener ugc nofollow" target="_blank">。请记住，我们需要部署一个测试环境来运行我们的集成测试:</a></p><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="12d2" class="oc me it nx b gy od oe l of og">[env.staging]<br/>name = "atomic-url-staging"<br/>workers_dev = true<br/>kv_namespaces = [<br/>  { binding = "URL_DB", id = "ca7936b380a840908c035a88d1e76584" },<br/>]</span></pre><ul class=""><li id="b613" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated"><code class="fe nu nv nw nx b">name</code> —确保<code class="fe nu nv nw nx b">name</code>对于每个环境都是唯一的字母数字(<code class="fe nu nv nw nx b">-</code>是允许的)。让我们将我们的登台环境命名为<code class="fe nu nv nw nx b">atomic-url-staging</code>。</li><li id="04a4" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu oh nh ni nj bi translated"><code class="fe nu nv nw nx b">worker_dev</code> —我们的集成测试在<code class="fe nu nv nw nx b">&lt;NAME&gt;.&lt;SUBDOMAIN&gt;.workers.dev</code>端点上运行。因此，我们需要通过设置<code class="fe nu nv nw nx b">workers_dev = true</code> ( <a class="ae ky" href="https://developers.cloudflare.com/workers/platform/environments/#publishing-to-workersdev" rel="noopener ugc nofollow" target="_blank">引用</a>)来部署我们的Cloudflare Worker。</li><li id="7d19" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu oh nh ni nj bi translated"><code class="fe nu nv nw nx b">kv_namespaces</code> —原子URL使用KV作为其数据库来存储缩短的URL。这里，我选择使用一个预览名称空间KV作为测试数据库。为什么？仅仅因为它是我在本地开发期间(运行<code class="fe nu nv nw nx b">wrangler dev</code>时)使用的同一个开发KV名称空间。当然，您可以只使用常规的KV名称空间。请确保您没有使用生产KV <code class="fe nu nv nw nx b">id</code>。<a class="ae ky" href="https://developers.cloudflare.com/workers/wrangler/cli-wrangler/commands/#kv_namespaces" rel="noopener ugc nofollow" target="_blank">阅读如何创建KV名称空间</a>。</li></ul><p id="9999" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们还需要创建一个生产环境，使用我们的生产KV命名空间进行部署:</p><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="3578" class="oc me it nx b gy od oe l of og">[env.production]<br/>name = "atomic-url"<br/>route = "s.jerrynsh.com/*"<br/>workers_dev = false<br/>kv_namespaces = [<br/>  { binding = "URL_DB", id = "7da8f192d2c1443a8b2ca76b22a8069f" },<br/>]</span></pre><p id="9425" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生产环境部分与之前类似，除了—我们将为生产设置<code class="fe nu nv nw nx b">worker_dev = false</code>和<code class="fe nu nv nw nx b">route</code>。</p><h2 id="cd29" class="oc me it bd mf oi oj dn mj ok ol dp mn li om on mp lm oo op mr lq oq or mt os bi translated">部署</h2><p id="898f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">要从本地计算机手动部署到各自的环境，请运行:</p><ul class=""><li id="0f47" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated"><code class="fe nu nv nw nx b">wrangler publish -e staging</code></li><li id="44f6" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu oh nh ni nj bi translated"><code class="fe nu nv nw nx b">wrangler publish -e production</code></li></ul><p id="b81b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，我们将研究如何使用GitHub动作通过CI/CD管道自动完成这项工作。</p><p id="dc89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们继续之前，您可以在这里找到完整的<code class="fe nu nv nw nx b">wrangler.toml</code>配置<a class="ae ky" href="https://github.com/ngshiheng/atomic-url/blob/f1ff25a00c1430314b45dde855497b58831b8e3a/wrangler.toml" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="6996" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哦，这里有一张<a class="ae ky" href="https://developers.cloudflare.com/workers/wrangler/configuration/#configure-wranglertoml" rel="noopener ugc nofollow" target="_blank">小抄</a>来配置<code class="fe nu nv nw nx b">wrangler.toml</code>。我强烈建议你利用这一点！</p><h1 id="a54f" class="md me it bd mf mg np mi mj mk nq mm mn jz nr ka mp kc ns kd mr kf nt kg mt mu bi translated">Grafana k6</h1><p id="45ea" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对于集成测试，我们将使用一个叫做k6的工具。通常，k6被用作性能和负载测试的工具。现在，请原谅我，我们不会将任何负载测试集成到我们的CI/CD管道中；今天不行。</p><p id="6048" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，每当新的提交被推送到我们的<code class="fe nu nv nw nx b">main</code>分支时，我们将为这个项目运行<a class="ae ky" href="https://k6.io/docs/test-types/smoke-testing/" rel="noopener ugc nofollow" target="_blank">冒烟测试</a>。冒烟测试本质上是一种在系统上执行健全性检查的集成测试。</p><p id="7d37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，运行冒烟测试足以让我确定我们的系统是在没有任何回归的情况下部署的，并且可以在最小负载下运行。</p><h2 id="2453" class="oc me it bd mf oi oj dn mj ok ol dp mn li om on mp lm oo op mr lq oq or mt os bi translated">测试什么</h2><p id="13a7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">基本上，这里有几件事是我们想要在<a class="ae ky" href="https://k6.io/docs/using-k6/tags-and-groups/#groups" rel="noopener ugc nofollow" target="_blank">组</a>中对我们的URL shortener应用程序进行冒烟测试的一部分:</p><ul class=""><li id="f805" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated">主页应该像预期的那样加载200响应状态</li></ul><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="8bc5" class="oc me it nx b gy od oe l of og">group('visit main page', function () {<br/>    const res = http.get(BASE_URL)</span><span id="8125" class="oc me it nx b gy ot oe l of og">check(res, {<br/>        'is status 200': (r) =&gt; r.status === 200,<br/>        'verify homepage text': (r) =&gt;<br/>            r.body.includes(<br/>                'A URL shortener POC built using Cloudflare Worker'<br/>            ),<br/>    })<br/>})</span></pre><ul class=""><li id="1f1e" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated">我们的主POST API端点<code class="fe nu nv nw nx b">/api/url</code>应该用原始URL创建一个短URL</li></ul><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="2ae0" class="oc me it nx b gy od oe l of og">group('visit rest endpoint', function () {<br/>    const res = http.post(<br/>        `${BASE_URL}/api/url`,<br/>        JSON.stringify({ originalUrl: DUMMY_ORIGINAL_URL }),<br/>        { headers: { 'Content-Type': 'application/json' } }<br/>    )</span><span id="5300" class="oc me it nx b gy ot oe l of og">check(res, {<br/>        'is status 200': (r) =&gt; r.status === 200,<br/>        'verify createShortUrl': (r) =&gt; {<br/>            const { urlKey, shortUrl, originalUrl } = JSON.parse(r.body)<br/>            shortenLink = shortUrl<br/>            return urlKey.length === 8 &amp;&amp; originalUrl === DUMMY_ORIGINAL_URL<br/>        },<br/>    })<br/>})</span></pre><ul class=""><li id="f96d" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated">最后，我们希望确保当我们访问生成的短URL时，它会将我们重定向到原始URL</li></ul><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="6c54" class="oc me it nx b gy od oe l of og">group('visit shortUrl', function () {<br/>    const res = http.get(shortenLink)</span><span id="fa4f" class="oc me it nx b gy ot oe l of og">check(res, {<br/>        'is status 200': (r) =&gt; r.status === 200,<br/>        'verify original url': (r) =&gt; r.url === DUMMY_ORIGINAL_URL,<br/>    })<br/>})</span></pre><p id="6135" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要进行本地测试，只需运行<code class="fe nu nv nw nx b">k6 path/to/test.js</code>。仅此而已！你可以在这里找到完整的测试脚本。</p><p id="faaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在考虑运行负载测试，请阅读<a class="ae ky" href="https://k6.io/blog/monthly-visits-concurrent-users/" rel="noopener ugc nofollow" target="_blank">如何在负载测试中确定并发用户</a>。</p><h1 id="221b" class="md me it bd mf mg np mi mj mk nq mm mn jz nr ka mp kc ns kd mr kf nt kg mt mu bi translated">GitHub操作</h1><p id="0467" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我将忽略这一部分，因为它非常简单。你可以在这里参考最终的<a class="ae ky" href="https://github.com/ngshiheng/atomic-url/blob/f1ff25a00c1430314b45dde855497b58831b8e3a/.github/workflows/ci.yml" rel="noopener ugc nofollow" target="_blank"> GitHub Actions工作流文件</a>。</p><p id="5d63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把所有的东西拼凑起来。下面是我们需要使用的GitHub操作:</p><ul class=""><li id="0518" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated"><a class="ae ky" href="https://github.com/cloudflare/wrangler-action/tree/1.3.0" rel="noopener ugc nofollow" target="_blank"> wrangler-action </a> —用于使用Wrangler CLI部署Cloudflare Worker</li><li id="4aea" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu oh nh ni nj bi translated"><a class="ae ky" href="https://github.com/marketplace/actions/k6-load-test?version=v0.2.0" rel="noopener ugc nofollow" target="_blank">k6-动作</a>-用于运行K6</li></ul><p id="506a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于工作流文件有一点需要注意——为了使一个作业依赖(需要)另一个作业，我们将使用<code class="fe nu nv nw nx b"><a class="ae ky" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idneeds" rel="noopener ugc nofollow" target="_blank">need</a></code> <a class="ae ky" href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idneeds" rel="noopener ugc nofollow" target="_blank">语法</a>。</p><h2 id="1bfd" class="oc me it bd mf oi oj dn mj ok ol dp mn li om on mp lm oo op mr lq oq or mt os bi translated">行动秘密</h2><p id="b78c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这个项目需要2个行动秘密:</p><ol class=""><li id="fb4f" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe nu nv nw nx b">CF_API_TOKEN</code> —供Wrangler GitHub Action用于将我们的Cloudflare Worker自动发布到其各自的环境中。您可以使用<code class="fe nu nv nw nx b">Edit Cloudflare Workers</code>模板<a class="ae ky" href="https://dash.cloudflare.com/profile/api-tokens" rel="noopener ugc nofollow" target="_blank">创建您的API令牌</a>。</li><li id="2b22" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe nu nv nw nx b">NPM_TOKEN</code> —该项目也使用<a class="ae ky" href="https://github.com/semantic-release/npm" rel="noopener ugc nofollow" target="_blank">语义发布</a>自动发布到<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>。为此，您需要通过<a class="ae ky" href="https://docs.npmjs.com/getting-started/working_with_tokens#how-to-create-new-tokens" rel="noopener ugc nofollow" target="_blank"> npm创建令牌</a>创建一个<code class="fe nu nv nw nx b">NPM_TOKEN</code>。</li></ol><p id="2cca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将它添加到您的GitHub库机密，请查看本指南。</p><p id="e91b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你已经看了最终的工作流文件，你可能已经注意到了语法<code class="fe nu nv nw nx b">${{ secrets.GITHUB_TOKEN }}</code>，并且想知道为什么我没有提到任何关于添加<code class="fe nu nv nw nx b">GITHUB_TOKEN</code>到我们的项目动作秘密中的事情。原来，它是<a class="ae ky" href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication#about-the-github_token-secret" rel="noopener ugc nofollow" target="_blank">自动创建并添加到您的所有工作流</a>中的。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1e1d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结束语</h1><p id="12f3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">可以理解的是，众所周知，无服务器平台很难测试和调试。然而，这并不意味着我们应该忽视它。</p><p id="8d25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，下一步是什么？在我脑海中，我们可以做得更好。这里有几个我们可以改进的地方:</p><ol class=""><li id="b29a" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">添加一个在冒烟测试失败时自动回滚并恢复提交的作业/阶段</li><li id="95ea" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">创建PR时创建一个单独的测试环境，以便我们可以对它们进行冒烟测试</li><li id="c3d0" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">对这个项目来说可能有点过了——实现<a class="ae ky" href="https://octopus.com/docs/deployments/patterns/canary-deployments" rel="noopener ugc nofollow" target="_blank">金丝雀部署</a>听起来是一个有趣的挑战</li></ol><h1 id="ea9b" class="md me it bd mf mg np mi mj mk nq mm mn jz nr ka mp kc ns kd mr kf nt kg mt mu bi translated">参考</h1><p id="ad13" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您正在考虑对Cloudflare工作人员进行单元测试，以下是我的建议:</p><ul class=""><li id="69dc" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated">https://findwork.dev/blog/testing-cloudflare-workers/<a class="ae ky" href="https://findwork.dev/blog/testing-cloudflare-workers/" rel="noopener ugc nofollow" target="_blank"/></li><li id="4a4f" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu oh nh ni nj bi translated"><a class="ae ky" href="https://blog.cloudflare.com/unit-testing-workers-in-cloudflare-workers/" rel="noopener ugc nofollow" target="_blank">https://blog . cloud flare . com/unit-testing-workers-in-cloud flare-workers/</a></li><li id="a2bb" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu oh nh ni nj bi translated"><a class="ae ky" href="https://blog.cloudflare.com/unit-testing-worker-functions/" rel="noopener ugc nofollow" target="_blank">https://blog.cloudflare.com/unit-testing-worker-functions/</a></li></ul><p id="09e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个关于建立理想而实用的CI/CD渠道的视频:</p><ul class=""><li id="2319" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu oh nh ni nj bi translated"><a class="ae ky" href="https://www.youtube.com/watch?v=OPwU3UWCxhw" rel="noopener ugc nofollow" target="_blank">理想的&amp;实用的CI / CD管道</a></li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt ny nx nz oa aw ob bi"><span id="7916" class="oc me it nx b gy od oe l of og"><strong class="nx iu">Want to Connect?</strong></span><span id="40cd" class="oc me it nx b gy ot oe l of og">This article was originally published at <a class="ae ky" href="https://jerrynsh.com/how-i-setup-ci-cd-pipeline-for-cloudflare-worker/" rel="noopener ugc nofollow" target="_blank">jerrynsh.com</a></span></pre></div></div>    
</body>
</html>