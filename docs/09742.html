<html>
<head>
<title>How To Automate Asset Management in Your iOS Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在您的iOS应用中自动化资产管理</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-automate-asset-management-in-your-ios-apps-1f465bcaa4ef?source=collection_archive---------6-----------------------#2021-10-05">https://betterprogramming.pub/how-to-automate-asset-management-in-your-ios-apps-1f465bcaa4ef?source=collection_archive---------6-----------------------#2021-10-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0253" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用R.swift简化颜色、图像和本地化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/713b121391709af48cf857e4164faeea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FtA00oQy5iN7ekeD"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奥马尔·普雷斯特维奇在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d1db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将了解如何以及为什么我们应该在我们的iOS应用程序中使用资产自动化。我们将通过使用一个流行的开源库来实现。当您完成这篇文章时，您将已经学会如何自动化:</p><ul class=""><li id="0c36" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">形象</li><li id="7cf4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">颜色；色彩；色调</li><li id="17cb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">局限</li></ul><p id="1d73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，我们开始吧。</p><h1 id="9702" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">我们开始吧</h1><p id="fe63" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们从一个空项目开始，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/30a2d3172d7f4850ebd978d159971090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W7CLYJHQJeBSjKBO6tEBeg.png"/></div></div></figure><p id="23d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的第一步是将R.swift添加到项目中。在将这一行添加到Podfile之后，我们将通过运行<code class="fe nh ni nj nk b">pod install</code>来通过CocoaPods安装它:</p><p id="bc95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nh ni nj nk b">pod ‘R.swift’</code></p><p id="b806" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很好，现在已经安装了R.swift，我们需要调整目标的构建阶段。从添加新的运行脚本阶段开始，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/8b388c257001140ad5ab53e97b7c0aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ufq4ap16YUWYJgRwhw2s_A.png"/></div></div></figure><p id="32bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建新的“运行脚本”后，我们将它移到“编译源代码”上方，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/f3b9e6c439b3adcdb6403a112e25c791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tnbHllie3mVEeMXLdUwy1g.png"/></div></div></figure><p id="824b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原因是库将生成一个<code class="fe nh ni nj nk b">R.generated.swift</code>文件，该文件将包含引用我们的应用程序中使用的资产的所有属性。我们希望它在应用程序编译所有文件之前生成。</p><p id="4e91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是定义实际的脚本。增加<code class="fe nh ni nj nk b">“$PODS_ROOT/R.swift/rswift” generate “$SRCROOT/R.generated.swift”</code>如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/556a45ec5b59ffcbf0f94ee621442f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLWqw33KvOhOx-Pgxo2rLg.png"/></div></div></figure><p id="e59a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，取消选中“基于依赖关系分析”以使脚本运行每个构建:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/ccb63d927ccbb71e157b0835e3623f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v2g3FMZPgKuRYO7eCx9u-g.png"/></div></div></figure><p id="0817" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">配置R.swift的最后一步是更新脚本的<code class="fe nh ni nj nk b">Output</code>文件。像这样将<code class="fe nh ni nj nk b">$SRCROOT/R.generated.swift</code>添加到<code class="fe nh ni nj nk b">Output Files</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/8ef898065bbcbde81d6f13bc6f3d96de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WYM7Sl_BFjfGXBAwnYdgPA.png"/></div></div></figure><p id="a68a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们构建应用程序并打开项目文件夹，我们将看到<code class="fe nh ni nj nk b">R.generated.swift</code>文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/ae1fd9ed181bdf3f44a71b4fa07a75e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*alXpWzGY0YElpxc50_q1yg.png"/></div></div></figure><p id="ec3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将文件拖放到Xcode项目中，并取消选中“如果需要，拷贝项目”<em class="nn"/>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/49e267a60d797c4c86eb804106c9ad79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mDSHNWwAhZywywbnie0SUw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/d5f9f73d5e801fced65b875738961361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NSDLmG2j6Klxo-FbHS07mQ.png"/></div></div></figure><p id="ee2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！现在是时候了解我们如何自动化映像管理了。</p><h1 id="421b" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">管理图像</h1><p id="9fe6" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">首先，让我们给<code class="fe nh ni nj nk b">Assets.xcassets</code>目录添加一个图像，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/93295305263891ba8b35ea8208de83f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTtc0K3bgCQWM1ARprZkbQ.png"/></div></div></figure><p id="6d5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建应用程序后，我们可以像这样轻松引用<code class="fe nh ni nj nk b">ViewController</code>中的图像:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="471d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，我们不需要使用标准的容易出错的方法来获取图像，这种方法要求我们使用字符串。</p><p id="e0b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们看看如何使用颜色。</p><h1 id="fb29" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">管理颜色</h1><p id="5e3d" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">让我们给<code class="fe nh ni nj nk b">Assets.xcassets</code>添加一个颜色集，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/856e1a7c012287289e7ae0ebad183ee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ie3vcbFhgP4n2qUvAl7-Zw.png"/></div></div></figure><p id="7daa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在将其命名为“Primary”并设置其值后，我们得到了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/0d4a8751837184737717b8543d1b46e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V1tuxBwsPwogZik-B0Z4Rg.png"/></div></div></figure><p id="5afa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，就像我们之前做的一样，我们构建应用程序并在<code class="fe nh ni nj nk b">ViewController</code>中获得新创建的<code class="fe nh ni nj nk b">UIColor</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="3740" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成颜色后，现在让我们处理可本地化的字符串。</p><h1 id="0957" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">管理本地化</h1><p id="a17e" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">假设我们有两个可本地化的字符串文件，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/69d938302abdcb1d64693975c6def21a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vk0PSXeOmawI44QJmnvHZA.png"/></div></div></figure><p id="0198" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们希望在我们的项目中使用这个简单的字符串:</p><pre class="kj kk kl km gt oa nk ob oc aw od bi"><span id="84c3" class="oe mk it nk b gy of og l oh oi">"hello" = "Hello";</span><span id="f592" class="oe mk it nk b gy oj og l oh oi">//or</span><span id="d072" class="oe mk it nk b gy oj og l oh oi">"hello" = "Привет";</span></pre><p id="d5e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建完应用程序后，我们在<code class="fe nh ni nj nk b">ViewController</code>中轻松引用字符串，代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="1add" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，使用如下参数引用字符串也非常容易:</p><pre class="kj kk kl km gt oa nk ob oc aw od bi"><span id="7f82" class="oe mk it nk b gy of og l oh oi">"hello" = "Hello, %@!";</span></pre><p id="a6e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">R.swift更新了<code class="fe nh ni nj nk b">R.generated.swift</code>文件，这样我们可以在获取字符串时提供一个参数:</p><pre class="kj kk kl km gt oa nk ob oc aw od bi"><span id="471e" class="oe mk it nk b gy of og l oh oi">let message = R.string.localizable.hello("James")<br/>print(message)</span></pre><p id="2eb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！我们已经成功利用R.swift库更高效地管理图像、颜色和本地化文件。</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><p id="e9ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用Git时，将<code class="fe nh ni nj nk b">R.generated.swift</code>文件添加到<code class="fe nh ni nj nk b">.gitignore</code>是有意义的，因为它总是在构建项目时重新生成。它还有助于我们避免合并冲突:</p><pre class="kj kk kl km gt oa nk ob oc aw od bi"><span id="2cb6" class="oe mk it nk b gy of og l oh oi">*.generated.swift</span></pre><h1 id="94d9" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">资源</h1><p id="626a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">示例项目可以在<a class="ae ky" href="https://github.com/zafarivaev/rswift-images-colors-localization" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><h1 id="d484" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">包扎</h1><p id="6caf" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">R.swift支持的不仅仅是图像、颜色和字符串。要了解更多信息，请访问框架的<a class="ae ky" href="https://github.com/mac-cain13/R.swift" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>。</p><p id="dfdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇教程对你有用。感谢阅读！</p></div></div>    
</body>
</html>