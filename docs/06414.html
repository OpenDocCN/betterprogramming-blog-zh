<html>
<head>
<title>Use an AI Tool to Write Your Unit Tests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用人工智能工具编写你的单元测试</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/this-ai-tool-write-great-unit-tests-acfbfab53c09?source=collection_archive---------0-----------------------#2020-09-30">https://betterprogramming.pub/this-ai-tool-write-great-unit-tests-acfbfab53c09?source=collection_archive---------0-----------------------#2020-09-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8199" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用人工智能驱动的插件生成单元测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c746f0cf09770c45faf1217c5a2d2519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ZQdSSBrq4sZm1-ykzhOKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动化测试-Credit:<a class="ae ky" href="https://www.helpsystems.com/resources/articles/5-tips-automated-web-testing" rel="noopener ugc nofollow" target="_blank">https://www . help systems . com/resources/articles/5-tips-automated-web-Testing</a></p></figure><p id="e0e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将为IntelliJ使用一个AI驱动的插件来自动生成单元测试。</p><p id="308c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">在我们谈论这个插件和它背后的公司之前，值得一提的是，我和这家公司及其员工没有任何关系。然而，我曾经在牛津大学工作，所以看到这样一个有趣的创新来自一个有很多回忆的地方是令人兴奋的。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6976" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">第一步。安装插件并导入项目</h1><p id="6cc1" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">IntelliJ IDEA插件对于开源开发是100%免费的。要安装插件，进入IntelliJ IDEA <strong class="lb iu">偏好设置，</strong>，从那里，找到左边的<strong class="lb iu">插件</strong>，搜索<strong class="lb iu"> Diffblue Cover，</strong>，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/f50eeebf30c92412439d8e8dcaecdd00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ktRIvt7QqWJRiUBcNJSeg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在IntelliJ IDEA中安装Diffblue封面插件</p></figure><p id="1302" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦安装了插件，如果在IntelliJ IDEA中导入了现有的项目，那么插件将开始索引和分析整个代码库(例如，类、依赖项等)。)作为后台任务。这可能需要一些时间，取决于代码库的大小和复杂程度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/d15c988cfc4044b57950a5042740a021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3bBZD5M2eSWmNVvneFdSQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Diffblue封面索引项目</p></figure><p id="b93d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">您还可以进一步配置Diffblue Cover插件，从IntelliJ IDEA设置中根据您的需要对其进行微调。</em></p><p id="99ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想玩玩，我建议你从基础项目开始。下面是一个示例spring boot项目，它包含控制器、服务层、使用spring数据的存储库和内存数据库:</p><pre class="kj kk kl km gt nc nd ne nf aw ng bi"><span id="4508" class="nh me it nd b gy ni nj l nk nl">git clone <a class="ae ky" href="https://github.com/rhamedy/sample-rest-service.git" rel="noopener ugc nofollow" target="_blank">https://github.com/rhamedy/sample-rest-service.git</a></span></pre><p id="67ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请随意克隆<a class="ae ky" href="https://github.com/rhamedy/sample-rest-service.git" rel="noopener ugc nofollow" target="_blank">库</a>并使用它。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="769b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">第二步。简短的项目演练</h1><p id="810f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您克隆了上面链接的示例项目，那么请按照这一节的内容进行操作，因为我将简要地向您展示我们将要为其生成单元测试的类。</p><h2 id="a28c" class="nh me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">控制器层</h2><p id="a5b4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">下面是我们将要测试的弹簧引导控制器的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="cc57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，我们有几个端点来获取学生列表、添加学生、按id获取学生以及按id删除学生。</p><h2 id="336f" class="nh me it bd mf nm nn dn mj no np dp mn li nq nr mp lm ns nt mr lq nu nv mt nw bi translated">服务层</h2><p id="a50d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">服务层将控制器与存储库层连接起来，存储库层是大多数逻辑驻留的地方。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9dfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将尝试使用Diffblue Cover插件为上述类生成单元测试。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1946" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">第三步。使用人工智能驱动的插件生成单元测试</h1><p id="cfce" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是激动人心的部分，所有的奇迹都发生在这里。换句话说，人工智能驱动的插件介入并为我们自己生成单元测试，没有任何帮助。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/5892d6570e6f4bf4400509b080483009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U03M7r0L2_QLBvN35UTfgg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Diffblue Cover插件—编写测试以生成单元测试</p></figure><p id="aa4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你已经安装了插件，右击<code class="fe oa ob oc nd b">StudentController</code>并从动作菜单中选择<strong class="lb iu">写测试</strong>选项，如上所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/b4354aa8156740f3ca126eba1b267172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0lP3dsgFK_vCZDsAT4B9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">学生控制器的Diffblue Cover插件生成单元测试</p></figure><p id="959b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，插件将开始分析控制器及其每个方法。最后，它为每种方法生成单元测试。</p><p id="97ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">生成单元测试确实需要一点时间——Diffblue Cover正在分析这个类及其方法。但是与实际编写测试的人相比，所花的时间是很少的。</em></p><p id="02ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是Diffblue Cover生成的<code class="fe oa ob oc nd b">StudentControllerTest</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="8acf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不知道你怎么想，但是我对生成的测试印象深刻。它们似乎坚如磐石，并遵循spring boot测试的最佳实践。</p><p id="a2a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在<a class="ae ky" href="https://github.com/rhamedy/sample-rest-service/pull/1" rel="noopener ugc nofollow" target="_blank">这个拉请求</a>中找到生成的单元测试的完整源代码。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b4bc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">第四步。生成的单元测试的测试覆盖率</h1><p id="f7b1" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">一个代码或者测试覆盖工具将会指出被测试覆盖的代码的百分比。</p><p id="8ba5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们对生成的测试运行代码覆盖工具，以了解测试覆盖了多少百分比的代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/587d6fc43b527d7f040ebd96989392d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IO_dteKlT3KwxYx9mVqRZw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">生成单元测试JaCoCo代码覆盖率。</p></figure><p id="994c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那看起来一点也不差。对于我们已经生成测试的类，例如控制器、服务和实用程序包，覆盖率相当高。</p><p id="d7a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">值得一提的是，这是一个超级简单的代码库，没有复杂的代码或逻辑，插件似乎在生成一些可靠的单元测试方面做得相当不错。对于代码非常复杂的遗留代码或代码库，插件的行为可能会有所不同。</em></p><p id="3b3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个视频中，我快速地讲述了如何使用AI驱动的Diffblue Cover插件生成单元测试。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="dd9b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">使用Diffblue Cover生成单元测试的演示</h1><p id="a310" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对于那些感兴趣的人，我还准备了一个快速演示，从安装插件到生成测试以及生成测试的覆盖范围，你们都可以观看。</p><p id="542a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如何使用Diffblue Cover插件生成单元测试的演示</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of ny l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何使用Diffblue Cover插件生成java单元测试的快速演示</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b8d9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">自动化单元测试生成的缺点</h1><p id="0790" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">不反对Diffblue封面插件。尽管与生成单元测试相关的优点很多，但是也有一些缺点，我很想快速地谈一谈。</p><p id="7784" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我相信编写单元测试的开发人员比不编写单元测试的开发人员要好。</p><p id="5085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，在我看来，单元测试间接影响了我们如何编写代码。如果我们写的代码设计得不好，那么单元测试会变得更加痛苦。让我们举一个例子，一个方法做十种不同的事情，有许多嵌套的条件和一些非常复杂的逻辑。编写覆盖这些方法的所有执行路径的测试将是一个挑战。</p><p id="57c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从前，当我提倡单元测试时，一个开发人员告诉我。</p><blockquote class="og"><p id="331a" class="oh oi it bd oj ok ol om on oo op lu dk translated">我花20%的时间写代码，80%的时间写代码的单元测试。</p></blockquote><p id="cd07" class="pw-post-body-paragraph kz la it lb b lc oq ju le lf or jx lh li os lk ll lm ot lo lp lq ou ls lt lu im bi translated">如果你写的代码不容易阅读和理解，并且是耦合的和不连贯的，那么单元测试将是一个非常耗时和低效的过程。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d66c" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="c755" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">总的来说，我对这个插件在我们的示例项目中的表现和生成的单元测试的质量印象深刻。</p><p id="d53c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我注意到插件不能为某些类生成测试，在某些情况下会跳过执行路径(分支)，查看上面的youtube视频演示以了解更多信息。</p><p id="2cf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你的时间，我希望你喜欢这篇文章。敬请关注更多有见地的内容。</p></div></div>    
</body>
</html>