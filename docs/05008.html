<html>
<head>
<title>How to Conditionally Apply View Modifiers in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中有条件地应用视图修改器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/conditionally-applying-view-modifiers-in-swiftui-c5541711eb41?source=collection_archive---------1-----------------------#2020-05-31">https://betterprogramming.pub/conditionally-applying-view-modifiers-in-swiftui-c5541711eb41?source=collection_archive---------1-----------------------#2020-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b4e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">根据某些属性或变量应用视图修改器</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30dd54bc7512483c0843f115cb1121cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NiVnQN4LcIO0FLII.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://developer.apple.com/documentation/swiftui" rel="noopener ugc nofollow" target="_blank">苹果开发者</a>。</p></figure><p id="797c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在SwiftUI中开发时，有时我们倾向于有条件地应用视图修饰符。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="79b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，我们不能直接这样做。经过一番搜索和摸索，我找到了一个很好的解决方案，这要感谢这个<a class="ae ky" href="https://stackoverflow.com/questions/59029560/how-to-apply-modifier-or-view-by-condition" rel="noopener ugc nofollow" target="_blank">堆栈溢出帖子</a>。让我们先看看实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="ccbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们在类型<code class="fe lx ly lz ma b">View</code>上创建一个扩展函数。这允许我们在任何类型的视图上调用<code class="fe lx ly lz ma b">conditionalModifier</code>。我们使用一个<a class="ae ky" href="https://docs.swift.org/swift-book/LanguageGuide/Generics.html" rel="noopener ugc nofollow" target="_blank">通用函数</a>，因为这个函数可以应用于任何符合<code class="fe lx ly lz ma b">View</code>的类型。</p><p id="41f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数有两个参数，一个是决定是否应用<code class="fe lx ly lz ma b">transform</code>(即视图修改器，如<code class="fe lx ly lz ma b">.foregroundColor(...)</code>)的<code class="fe lx ly lz ma b">condition</code>。</p><p id="9bb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第<code class="fe lx ly lz ma b">@ViewBuilder</code>部分可能会让一些人感到困惑。Majid有一篇关于SwiftUI中的ViewBuilders的很好的博客文章。简而言之，这允许我们有条件地返回两种不同类型的内容(<code class="fe lx ly lz ma b">transform(self)</code>和<code class="fe lx ly lz ma b">self</code>)，而不会将它们的类型擦除到<code class="fe lx ly lz ma b">AnyView</code>。</p><p id="b2aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数体非常简单:如果条件为真，则应用<code class="fe lx ly lz ma b">transform</code>。现在你知道了！您可以像这样使用这个扩展:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="02eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以更进一步。假设我们想要在条件为假的情况下应用一个不同的修饰符。根据我们当前的设置，我们必须:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="4d71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不是很优雅。为了改善这一点，我们可以在我们的<code class="fe lx ly lz ma b">conditionalModifier</code>函数中增加一个参数——当条件为假时应用的另一个修饰符闭包:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="9b0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不算太差！</p></div></div>    
</body>
</html>