<html>
<head>
<title>Recreate Apple’s Breathing Animation in SwiftUI (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中重现苹果的呼吸动画(第二部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/recreating-apples-breathing-animation-in-swiftui-part-2-d548e690c542?source=collection_archive---------14-----------------------#2020-05-06">https://betterprogramming.pub/recreating-apples-breathing-animation-in-swiftui-part-2-d548e690c542?source=collection_archive---------14-----------------------#2020-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7b14" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">探索如何创建当你开始呼吸时发生的模糊效果</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d5246b6094aa72666a8966a544da16f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*se6RZYxhpvdiDVw6OOttDQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">模糊-淡化效果(图片来源:作者)</p></figure><p id="0483" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你对我们如何创建花和呼吸动画感兴趣，你可以看看这个教程的第一部分<a class="ae lr" href="https://medium.com/p/3848c5558fb6/edit" rel="noopener"/>。</p><p id="16c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了达到这个惊人的效果，我们要把问题分成两部分。我们需要做以下两件事:</p><p id="d8e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">1.在花卉视图周围创建一个遮罩</p><p id="e937" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.创建模糊淡化效果</p><p id="7ddb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你对我们正在做的事情和原因有点困惑，请稍等片刻。它将在接近尾声时开始变得有意义。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d805" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">在花卉视图周围创建一个遮罩</h1><p id="f515" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">你可能会认为这相对容易——只需给花卉视图添加一个<code class="fe mw mx my mz b">.background()</code>修饰符，然后就到此为止，但是…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/775707e42172c782e03a2a627ca38a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bPxTBj7j-C9D9jnOuZJXXw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用背景修改器的遮罩</p></figure><p id="6059" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如您所见，这并没有完全解决问题。因为花卉视图由多个圆组成，所以为花卉视图创建背景的最简单的方法是使用与动画同步的整个其他花卉视图<strong class="kx ir"> </strong>。</p><p id="1221" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们通过在一个<code class="fe mw mx my mz b">ZStack</code> <strong class="kx ir"> </strong>中嵌入我们的原始<code class="fe mw mx my mz b">FlowerView</code>来实现它，并添加第二个<code class="fe mw mx my mz b">FlowerView</code>作为背景。对<code class="fe mw mx my mz b">ContentView</code>进行这些更改。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/a4eeafca7d1cf8487396ff6f9980e4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*TC3lfCQLi4gWSWud0MD8kg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">并列示例</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="e1d8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">模糊淡化效果</h1><p id="fb0b" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">如果我们仔细观察，模糊淡入淡出动画有三个要点:</p><ul class=""><li id="dce6" class="ne nf iq kx b ky kz lb lc le ng li nh lm ni lq nj nk nl nm bi translated">模糊效果</li><li id="603a" class="ne nf iq kx b ky nn lb no le np li nq lm nr lq nj nk nl nm bi translated">不透明度从1变到0</li><li id="1a86" class="ne nf iq kx b ky nn lb no le np li nq lm nr lq nj nk nl nm bi translated">落后于原来的萎缩动画</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/f94890ec21642d7d34638c08ad6b6ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*xF5G48hHCy35glkrfFVFGw.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">模糊效果</p></figure><p id="551b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将通过在<code class="fe mw mx my mz b">ZStack</code>上增加另一个<code class="fe mw mx my mz b">FlowerView</code>来实现这一点，这应该不会让你感到惊讶。</p><p id="88e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这一次，我们将隐藏和显示基于<code class="fe mw mx my mz b">isMinimized</code>属性的第三个<code class="fe mw mx my mz b">FlowerView</code>，并创建一个自定义过渡修改器，该修改器应该在缩小时创建模糊淡入淡出效果。</p><p id="1f92" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建新的Swift文件或将其添加到<code class="fe mw mx my mz b">ContentView</code>之后。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="6720" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">快好了！现在我们来添加最后的<code class="fe mw mx my mz b">FlowerView</code>。我们还将创建一个基于<code class="fe mw mx my mz b">breathingAnimation</code>持续时间的<code class="fe mw mx my mz b">fadeDuration</code>属性。</p><p id="6441" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，我们使用的是非对称过渡，因为我们不希望模糊淡化效果双向。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/5027b1fa7cfc068f015ef432278fa90d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IHasUuiwfp-jVPIbVYGdfg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终产品</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="726c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">结论</strong></h1><p id="9554" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">正如你所看到的，通过使用简单的内置形状和动画，我们成功地合成了一个非常复杂的动画。</p><p id="912b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你觉得自己足够勇敢，现在我鼓励你尝试制作自己的动画！PS:一定要发微博告诉我。</p><p id="3aec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是带有完整项目的<a class="ae lr" href="https://github.com/Pondorasti/WatchOSBreathingAnimation" rel="noopener ugc nofollow" target="_blank"> GitHub回购。</a></p></div></div>    
</body>
</html>