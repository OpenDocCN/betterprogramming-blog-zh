<html>
<head>
<title>How To Use Axios in an Optimized and Scalable Way With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过React以优化和可扩展的方式使用Axios</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-axios-in-an-optimized-and-scalable-way-with-react-c56fa632e088?source=collection_archive---------1-----------------------#2021-07-13">https://betterprogramming.pub/how-to-use-axios-in-an-optimized-and-scalable-way-with-react-c56fa632e088?source=collection_archive---------1-----------------------#2021-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0cf3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">实例、动词、超时等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2b05fe7b2ca2912723feb52b67845a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lB9pNmGBczviEw2rkCunRA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Marc-Olivier Jodoin 在<a class="ae ky" href="https://unsplash.com/s/photos/network?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="12ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到如何在React应用程序中以优化和可扩展的方式使用<a class="ae ky" href="https://axios-http.com/" rel="noopener ugc nofollow" target="_blank"> Axios </a>。<br/>在构建基于API的React应用时，HTTP客户端是需要添加到架构中的核心服务。React有很多HTTP客户端库。在决定选择哪个的时候，Axios可能是大多数开发者的首选。</p><p id="1776" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Axios是一个HTTP客户端库，具有许多优势特性。可以在浏览器和<a class="ae ky" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>中使用。在本文中，我们将了解如何以可扩展和优化的方式利用所有高级Axios功能。</p><h1 id="8785" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Axios实例</h1><p id="3b18" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">创建一个Axios实例对于一个大规模的应用程序更重要，因为所有的基本配置都在一个文件中。对基本配置的更改可以在单个文件中轻松完成，并且会在使用Axios实例的任何地方反映出来。查看下面的代码片段</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="d29d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于上面的代码，我们已经使用默认配置配置了所有的基本设置，这将应用于每个使用<code class="fe mu mv mw mx b">axiosClient</code>实例的请求，如下面的请求所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="4176" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">中轴动词</h1><p id="f477" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们可以在基本配置文件中对Axios HTTP动词进行分组，如<code class="fe mu mv mw mx b">GET</code>、<code class="fe mu mv mw mx b">POST</code>、<code class="fe mu mv mw mx b">DELETE</code>和<code class="fe mu mv mw mx b">PATCH</code>，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="4ded" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以在任何需要发出API请求的地方直接导入自定义函数，如下面的代码所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="b0fc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">超时</h1><p id="359d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Axios超时选项允许以毫秒为单位设置请求超时。在Axios中配置超时很容易。正如我们之前看到的，它可以在基本配置本身中定义。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="5a7d" class="nc lw it mx b gy nd ne l nf ng">timeout: 2000 // Request will be timeout after 2 seconds.</span></pre><h1 id="597e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">拦截请求</strong></h1><p id="e80a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">使用请求拦截，您可以在发送之前编写或执行请求。查看下面的代码片段。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="5d15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们在发出请求之前添加了<code class="fe mu mv mw mx b">contentType</code>头。默认情况下，请求拦截器是异步的，这可能会导致Axios请求执行的一些延迟。为了避免这种情况，我们使用了<code class="fe mu mv mw mx b">synchronous: true</code>。</p><h1 id="9863" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">拦截响应</h1><p id="e425" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">使用请求拦截，您可以在响应到达<code class="fe mu mv mw mx b">then</code>之前编写或执行。响应拦截器可用于在令牌到期(401状态)时注销用户，或者您可以刷新令牌并再次发出失败的请求，以使用户停留在同一页面，从而获得良好的UX。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="f979" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">上传进度</h1><p id="923b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您可以使用<code class="fe mu mv mw mx b">onUploadProgress</code>选项非常容易地在Axios中跟踪上传进度。<code class="fe mu mv mw mx b">onUploadProgress</code>允许处理上传的进度事件。这可用于向用户实时显示上传百分比，向他们确认上传正在进行中。查看下面的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="4bad" class="lv lw it bd lx ly no ma mb mc np me mf jz nq ka mh kc nr kd mj kf ns kg ml mm bi translated">资源</h1><p id="317a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> Axios GitHub库</a></p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="f3bb" class="lv lw it bd lx ly no ma mb mc np me mf jz nq ka mh kc nr kd mj kf ns kg ml mm bi translated">结论</h1><p id="663a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Axios是React及其社区的一个很好的HTTP客户端包。我希望你已经发现这是有用的。感谢您的阅读。</p></div></div>    
</body>
</html>