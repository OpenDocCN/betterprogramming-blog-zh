<html>
<head>
<title>Create a Simple Web App With Kotlin and Ktor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Kotlin和Ktor创建一个简单的Web应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-web-app-with-kotlin-and-ktor-540b9a412943?source=collection_archive---------15-----------------------#2020-12-30">https://betterprogramming.pub/simple-web-app-with-kotlin-and-ktor-540b9a412943?source=collection_archive---------15-----------------------#2020-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ff45" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们从科特林开始构建网络吧</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/df200881bee02d81c08ec48bc507e9ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXX8o8hZLmmS_AHYIff3Wg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@louis993546?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">路易·蔡</a>在<a class="ae kv" href="https://unsplash.com/@louis993546?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7d64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">保持务实，开始在web后端开发中使用Kotlin。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ab0f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">开始</h1><p id="27d8" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，你需要下载<a class="ae kv" href="https://www.jetbrains.com/idea/download/#section=windows" rel="noopener ugc nofollow" target="_blank"> IntelliJ IDEA </a>。用社区版就可以了。安装完<a class="ae kv" href="https://ktor.io/" rel="noopener ugc nofollow" target="_blank"> Ktor </a>后，进入插件&gt;市场，在搜索栏中输入“Ktor”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/e9a27b9d45cbe987fa3dd4185487dc47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_pZ0TKvMbDQOHdzt"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">下载Ktor插件</p></figure><p id="2cf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装Ktor <strong class="ky ir">插件。重新启动IDE，您就可以开始了！</strong></p><p id="3e91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在点击新建项目，选择Ktor <strong class="ky ir"> </strong>项目预置。确保项目SDK被设置为项目类型“Gradle”在客户端组框中，您需要选择Apache HttpClient Engine，然后选择Next。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/4a4c1f213be513fcb172d9b6a27e8fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kYg-Gzq-4GR1cUKb"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建新项目</p></figure><p id="4bff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以将GroupId设置为“com.example”，但将ArtifactId更改为“simple-ktor-web”然后单击Next，再次将项目名称设置为“simple-ktor-web”指定您希望项目源代码所在的项目位置。</p><p id="df4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">浏览文件夹，从根文件夹<code class="fe my mz na nb b">simple-ktor-web</code>到<code class="fe my mz na nb b">src</code>文件夹，打开<code class="fe my mz na nb b">Application.kt</code>文件。这是您的主应用程序文件，应用程序逻辑从这里开始。</p><pre class="kg kh ki kj gt nc nb nd ne aw nf bi"><span id="6062" class="ng ma iq nb b gy nh ni l nj nk">package com.example<br/><br/>import io.ktor.application.*<br/>import io.ktor.response.*<br/>import io.ktor.request.*<br/>import io.ktor.client.*<br/>import io.ktor.client.engine.apache.*<br/>import io.ktor.routing.*<br/><br/>fun main(args: Array&lt;String&gt;): Unit = io.ktor.server.netty.EngineMain.main(args)<br/><br/>@Suppress("unused") // Referenced in application.conf<br/>@kotlin.jvm.JvmOverloads<br/>fun Application.module(testing: Boolean = false) {<br/>    val client = HttpClient(Apache) <strong class="nb ir">{<br/><br/>    }<br/></strong>}</span></pre><p id="7912" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要用默认设置创建HTTP客户端，需要调用<code class="fe my mz na nb b">HttpClient()</code>构造函数。我推荐阅读Kotlin官方文档<a class="ae kv" href="https://kotlinlang.org/docs/mobile/use-ktor-for-networking.html#set-up-an-http-client" rel="noopener ugc nofollow" target="_blank">中关于如何设置HTTP客户端的内容。要开始通过HTTP提供数据，您需要指定路由。你可以在官方</a><a class="ae kv" href="https://ktor.io/docs/routing-in-ktor.html" rel="noopener ugc nofollow" target="_blank"> Ktor文档</a>中阅读更多关于Ktor路由的内容。为了使路由工作，我们将定义几条路由:</p><ul class=""><li id="25bd" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">根路由/</li><li id="e655" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">测试路线/测试</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="9d26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你。现在我们完成了！在运行应用程序之前，请确保端口:8080未被使用。然后你可以立即运行你的第一个简单的Kotlin网络应用程序。此外，您可以通过导航到<code class="fe my mz na nb b">application.conf</code>文件中的<code class="fe my mz na nb b">resources</code>文件夹来更改端口。打开浏览器，在浏览器地址栏中输入http://localhost:8080/your browser。</p><p id="a91c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个简单的Ktor应用程序现在包含两条路线:</p><ul class=""><li id="4d00" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">http://localhost:8080</li><li id="5182" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">http://本地主机:8080/test</li></ul><p id="a454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要犹豫，去我的<a class="ae kv" href="https://github.com/liumedz/simple-ktor-web" rel="noopener ugc nofollow" target="_blank"> GitHub </a>库获取源代码。如果您想了解关于如何托管Kotlin应用程序或如何将其用于Web Sockets的未来内容，请点击星号按钮。我很快会补充最相关的内容。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2f2d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="0a39" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我希望你喜欢阅读关于如何用Kotlin创建web应用程序的简短介绍。现在我们可以得出结论，对于那些喜欢用Kotlin进行开发的人来说，有一些开放的选择。例如，移动开发者现在可以通过Ktor使用Kotlin轻松创建web APIs。</p><p id="f7a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尤其是在移动领域，拥有合适的工具来构建后端API并保持它们之间的一致性是至关重要的。现在，您可以通过在后端和移动前端都使用Kotlin来实现这一点。这种务实的方式让我们有机会在未来尽可能高效地开发移动应用程序。</p></div></div>    
</body>
</html>