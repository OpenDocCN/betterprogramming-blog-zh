<html>
<head>
<title>From Software Engineer to Data Engineer — Schema Registry, Data Lineage, and Cataloguing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从软件工程师到数据工程师——模式注册、数据沿袭和编目</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/software-engineer-to-data-engineer-schema-registry-data-lineage-and-cataloguing-71c7905e6522?source=collection_archive---------6-----------------------#2022-03-30">https://betterprogramming.pub/software-engineer-to-data-engineer-schema-registry-data-lineage-and-cataloguing-71c7905e6522?source=collection_archive---------6-----------------------#2022-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2299" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">重要概念及其重要性的简要概述</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dc6af47cd0859ee83ad6f8ebf516a5f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CR3HUc-yMFXcTWrT"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@itfeelslikefilm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">🇸🇮·扬科·菲利</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5218" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/from-software-engineer-to-data-engineer-the-basics-part-1-535c0837b591">上一篇关于从软件到数据工程的转变的文章</a>中，我概述了一个非常基本的观点，关于生产流水线可能是什么样子，以及相关的概念意味着什么。然而，还有更多。除非您知道如何使用数据，否则数据本身毫无意义，无论是对工程师还是对业务都是如此。</p><p id="e1b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，在公司中自然发生的是，当试图在各自的业务领域中保持领先的快速技术进步和创新，以保持竞争力时，他们忽视或忽略了一些最佳实践。对于初创公司来说，为了领先并寻找“变通办法”，推迟一些有利于MVP的适当实现，匆忙推出解决方案并不罕见。</p><p id="806d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一件常见的事情可能会在“以后”的待办事项中结束，那就是对公司拥有的数据进行编目。这不是每个人都会优先考虑的事情，因为一开始就没有太多的数据。因此，忽略它似乎是无害的，每个服务只是“触发并忘记”一些到达某种存储的字节数组，就这样，工作完成了，我们有了数据。</p><p id="411c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几年后，有几十个甚至数百个微服务在发送各种数据，有从第三方获取数据的管道，企业希望根据现在非常丰富的数据做出智能决策。如果你在成长的早期没有付出一些努力，那么你会在这里挣扎…很多。在大多数情况下，公司至少会添加一个模式注册表，也许是每个数据人的适当血统和梦想——数据目录。</p><h1 id="0c52" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">模式注册表</h1><p id="ddd1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这实质上是一个模式文件的集中存储库。它们可以是JSON或AVRO格式，并定义通过公司系统传输的所有事件和数据点中所有属性的结构和含义。这些模式可以进行版本控制和更改，并由相应数据的生产者拥有。</p><p id="a029" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">理想情况下，会有一个UI允许业务中的每个人查看当前活动的模式和旧的定义。</p><p id="d434" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">发送到管道的每个事件都应该经过验证，只有有效的事件才能到达存储。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="13d0" class="mv lu iq mr b gy mw mx l my mz">{<br/>  "schema": "http://schema-def-url",<br/>  "title": "user account created",<br/>  "self": {<br/>     "vendor": "a vendor",<br/>     "name": "user_account_created",<br/>     "format": "jsonschema",<br/>     "version": "1-0-0"<br/>  },<br/>  "type": "object",<br/>  "properties": {<br/>     "user_id": {<br/>       "type": [<br/>          "string"<br/>       ],<br/>       "description": "the user id..."<br/>     },<br/>     "email": {<br/>       "type": [<br/>          "string"<br/>       ],<br/>       "description": "the user email...",<br/>       "pii": true<!-- --> <br/>     <!-- -->},<br/>     ...<br/>     "region": {<br/>       "type": [<br/>          "string"<br/>       ],<br/>       "description": "..."<br/>     }<br/>   },<br/>   "required": [<br/>     "user_id",<br/>     "email",<br/>      ...<br/>   ]<br/>}</span></pre><p id="eb89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个非常非常简单的模式的一部分。您会注意到它定义了所有属性的名称和类型，以及哪些是必需的。还有一个额外的位<code class="fe na nb nc mr b">pii: true</code>。它旨在表明该字段是一个PII(个人可识别信息)，因此该字段可以在需要时匿名(应客户要求或在法定保留时间过后)。可以向每个字段添加更多的位，以允许正确的验证、存储和使用——如最大长度、编码、它要转换到的表中的列类型等。</p><p id="a6f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没错，模式可以用来在表的顶部创建视图，事件就像JSON有效负载一样存储在表中，或者可以具体化为表。</p><p id="3ccf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，模式允许您基于这些定义类，并在您的应用程序中以更易于管理的方式处理数据(有一些工具可以基于定义自动生成类，因此可以作为模式注册表发布过程的一部分)。你可以有一个基于它的全公司范围的API，这意味着所有的应用程序总是在同一个页面上。</p><h1 id="6ef5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">流式数据</h1><p id="3ceb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我提到过，应用程序可以使用模式注册表来反序列化事件，并将它们作为类来处理。在一家大公司，你会有很少的应用程序产生事件，可能会有很多应用程序从所选的流媒体解决方案中消费这些事件，并根据这些事件采取行动或进行报告。</p><p id="97f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据应用程序获取消息的机制，有两种类型的流:</p><ul class=""><li id="0d8f" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><strong class="ky ir">拉</strong>——意味着应用程序将从各种事件/消息的队列中拉出，随时准备处理它们，然后提交一个指示器来“记住”它到达的位置，以防它死亡。在这种方法中，应用程序控制处理速度、偏移和事件数量。这是一个很好的解决方案，无论何时数据持续大量流动，它都是两者中更可靠的，除非发生大规模中断，否则不会有丢失数据的风险。这方面的一个例子是卡夫卡，这是最流行的解决方案之一。</li><li id="5982" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">推送</strong> —意味着每当有新消息添加到队列中时，应用程序都会收到请求。解决方案通常可以配置为重试多次，一旦成功，就会将“指针”移动到队列中的下一个位置。这种方法更适合偶尔发送数据和/或处理不太重要的情况(因为如果应用程序未能在配置的尝试次数内回复OK，消息可以被跳过，这超出了应用程序的控制)。谷歌的Pub/Sub就是一个例子。</li></ul><p id="e834" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">应用程序将订阅主题(或任何其他特定于实现的抽象，这里使用Kafka ),并读取所有内容，但只处理和反应与特定应用程序相关的记录。</p><p id="bd4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，作为业务运营一部分的应用程序将从连续流中消耗数据，但也有批处理流的概念。所以，我会简单提一下区别:</p><ul class=""><li id="20bf" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><strong class="ky ir">批处理</strong>是一种模型，其中数据随着时间的推移而累积，并以块为单位进行处理。通常，它用于通过类似ETL的过程将第三方数据导入数据仓库。它还可以用于从连续流中导入聚合数据，以便优化导入或节省定价。另一种使用情形是将聚合数据移动到不同的存储，以便更容易地进行分析或报告。</li><li id="1410" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">流处理</strong>模型是指数据实时或接近实时地连续通过系统的模型。这通常用于制定运营决策。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/4c4d4ef307c5445cc6d941b7332d17b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IUmLiK8q6UmkR9OVaXw-kw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><h1 id="121e" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">数据谱系</h1><p id="789e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">除了数据结构和单个属性的含义之外，工程师还需要了解一个更重要的信息，那就是血统。理想情况下，这意味着能够跟踪一段数据的整个生命周期，并将其可视化。</p><p id="9e2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着显示每条数据是在哪里产生的，是否以及如何沿着管道进行转换，由哪些应用程序进行转换，在哪里以及是否最终出现在目标存储解决方案中。</p><p id="b896" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实施这一流程将使公司能够:</p><ul class=""><li id="42fd" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">发现数据</li><li id="3419" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">追查错误</li><li id="88e2" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">以较低的风险实施变革</li><li id="aae6" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">跟踪的详细信息还有助于审计和遵守任何组织政策和法规标准</li></ul><h1 id="2af7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">数据目录</h1><p id="81ef" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">模式注册和数据沿袭以及其他数据原则旨在使数据对业务可用且有意义。</p><p id="2d27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据目录使用户(无论是数据工程师、数据科学家、业务分析师还是开发人员)能够在一个地方访问所有有用的信息。通常，企业解决方案并不持有任何实际数据，而是从不同来源访问所需信息的端点集合，以人类可读的格式聚集和呈现。这意味着没有重复的元数据，因此不需要处理同步和现状问题。</p><p id="47ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本质上，数据目录是各种元数据的门户:</p><ul class=""><li id="6074" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">技术—模式、文件名、数据源名称、以任何方式更改或处理数据的应用程序名称等</li><li id="15de" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">业务——与业务相关的任何特定领域的信息，如描述、评论、注释、分类等</li><li id="bcd1" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">操作—访问日志、更新时间等</li></ul><p id="c92c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于数据和比我更聪明的人，我不可能说尽所有，我已经就我提到的每个概念写了详细的文章和帖子。我在这里的目标只是给出其中的一个片段，并激发你阅读更多。希望这是一次成功:)</p><p id="13da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>