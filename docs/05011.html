<html>
<head>
<title>Abstracting Forms in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的抽象形式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/form-abstraction-d8b60eff773c?source=collection_archive---------4-----------------------#2020-05-31">https://betterprogramming.pub/form-abstraction-d8b60eff773c?source=collection_archive---------4-----------------------#2020-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3cf3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建更简洁的表单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3491c46814cae9fe441a93618004bc04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXgZ97ICqc8aRbzM2MAXWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="567c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在过去的一周里，我完成了Mosh Hamedani的一些课程，以巩固我在熨斗学校学到的技能。虽然Mosh没有任何Ruby课程，但我一直在显著提高我的JavaScript和React技能。我目前正在上的课程是Mosh的<a class="ae lw" href="https://codewithmosh.com/p/mastering-react" rel="noopener ugc nofollow" target="_blank">精通React </a>课程，我强烈推荐。这有点贵，但绝对物有所值。另一个选择是像我一样:每月订阅他的所有课程。</p><p id="4335" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会学到很多巧妙的技巧，比如在JSX文件中写下以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/549cefca07d9bafa09cfe45d9d73eb98.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*y2C1cowrvWpQE00fo6rcpA.png"/></div></figure><p id="dbcc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">其结果是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/c4b57117d311abc804318cc310c863b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*clzCfhpz52l1I_PFcBOooQ.png"/></div></figure><p id="b145" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是今天我想讲讲我们是如何在整个程序中抽象形式的。完成后，您应该能够让程序的表单看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/1f374b0cfe2cee63fbd9359bb4c538b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ofUrVbJfo2WHm-6M2oaYqQ.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="8f64" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第一步</h1><p id="6a28" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">创建一个名为<code class="fe ne nf ng nh b">form</code>的JS或JSX文件，创建一个React <code class="fe ne nf ng nh b">form</code>类，并移除render和return，使该类为空。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/c5fc710cbed8ff0c9b2941f941b1f9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_YIQUUZZx6_BgGyUubwZRA.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="06df" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第二步</h1><p id="dd3e" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">为数据创建类的状态，以跟踪各种输入的不同值。您可以在状态中添加额外的键值对，比如errors。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/e5eb007f4870bd8f72b7bfacc439f2db.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*maLO_oCwbAa-dkvc_vgnog.png"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="99c0" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第三步</h1><p id="554a" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">创建<code class="fe ne nf ng nh b">handle change</code>和<code class="fe ne nf ng nh b">submit</code>功能。您可以在这些函数中添加其他重要的东西，如错误处理，这将使函数变得更大。这将证明有两个不同的功能来处理<code class="fe ne nf ng nh b">submit</code>是正确的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/3ef6a917567d3c49ecab2df2e12192b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iq_shbb-PnCMAFaplHGR3Q.png"/></div></div></figure><p id="d1a6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您的<code class="fe ne nf ng nh b">handle submit</code>是所有表单都需要使用的表单提交的公共方面。<code class="fe ne nf ng nh b">e.preventDefualt()</code>防止提交后刷新表单。<code class="fe ne nf ng nh b">this.doSubmit()</code>是一个函数，由使用表单的组件发送，允许对提交进行独特的处理。</p><p id="e7f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ne nf ng nh b">handle change</code>将状态更新为输入字段中的当前值。首先，为了得到当前的目标(你的输入域被改变了),你正在析构props，并把<code class="fe ne nf ng nh b">currentTarget</code>的名字设置为input以使它更易读。</p><p id="e4c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，使用spread操作符设置一个接受所有当前状态的变量(<code class="fe ne nf ng nh b">data</code>)。在下面一行中，将<code class="fe ne nf ng nh b">data</code>设置为输入字段的名称，并将键的值设置为输入的值。例如，<code class="fe ne nf ng nh b">data</code>可能是这样的:<code class="fe ne nf ng nh b">{‘title’: “The Social Network”, numberInStock: 3}</code>。请记住，这将在输入字段的值发生每次更改时更新状态，如果输入字段尚未更改，则它不存在于状态中，而是在输入字段第一次更改时创建。最后，更新当前状态。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="cae6" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第四步</h1><p id="1c30" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">创建表单中使用的各种字段:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/8aa74da17f78ec32c1c611c20e8405c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tm7OkRYc6_I8ltFn9T8edA.png"/></div></div></figure><p id="38f4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">按钮是不言而喻的——它返回一个按钮，标签是发送过来的任何东西(例如<code class="fe ne nf ng nh b">submit</code>)。</p><p id="b474" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ne nf ng nh b">renderInput</code>使用输入字段的输入抽象，因为输入经常通过程序使用，比如搜索框。你是通过类型发送的，自动是<code class="fe ne nf ng nh b">text</code>。名称用作输入的标识符，标签是用户将看到的，值是保存在state中的输入框的当前值，最后<code class="fe ne nf ng nh b">onChange</code>函数保持状态更新。</p><p id="8f39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ne nf ng nh b">renderSelect</code>是类似的，除了<code class="fe ne nf ng nh b">options</code>(一个对象数组)是通过。在本例中，选项是电影类型的流派:</p><pre class="kj kk kl km gt nm nh nn no aw np bi"><span id="0a9c" class="nq mi it nh b gy nr ns l nt nu">[{name: “horror”, _id: “123”}, {name: “comedy”, _id: 321}]</span></pre><p id="6d7e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是其他的都和输入一样。</p><p id="58df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们更仔细地看看输入和选择框:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/a05e6e9fa40ab39780cedcf7a5f9639e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_AKfNKf9086qITB4TMgX7Q.png"/></div></div></figure><p id="bc25" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为您在输入之外使用名称和标签，所以您需要显式声明您的输入，并且您可以如下设置输入的其余部分。</p><p id="168d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ne nf ng nh b">…rest</code>是其他变量，像<code class="fe ne nf ng nh b">value</code>和<code class="fe ne nf ng nh b">type</code>。您不需要声明它们，因为您正在一起使用这些属性来声明输入。如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/48daae1b21b80ae3371ddace887dca18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuhJ02KCJy-5jm_BnA-e9A.png"/></div></div></figure><p id="b7d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选择框更复杂，但是让我们来浏览一下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/8451e5b08fad892c2ec7cc999898f537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Nn1mQ076HWm6vFT0QrjVw.png"/></div></div></figure><p id="5c97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">总之，您设置了一个标签和一个<code class="fe ne nf ng nh b">select</code>标签，并遍历选项以显示每个<code class="fe ne nf ng nh b">option</code>标签。</p><p id="6557" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以在表单中添加其他字段，如单选按钮和文件选择器。这可以使用<code class="fe ne nf ng nh b">renderRadioButton</code>或<code class="fe ne nf ng nh b">renderFile</code>来完成。如果你认为代码太长(比如选择框)或者在程序中使用(比如输入)，考虑把它抽象成自己的类。</p><p id="1a8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在你已经设置好了我们的基本表单，让我们来学习如何使用它。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="98c7" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第五步</h1><p id="7d7e" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">您的特定表单类将从您的表单类<code class="fe ne nf ng nh b">Form</code>继承。这允许在特定的类中使用像<code class="fe ne nf ng nh b">renderInput</code>这样的函数。它这样做的方式是通过扩展<code class="fe ne nf ng nh b">form</code>而不是<code class="fe ne nf ng nh b">component</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/16100c6761fb0496c7636a1f9c9e0a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4-vH7BSz5k1ADqzr0vl6g.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="513d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第六步</h1><p id="ff58" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">现在，您将设置状态，并在状态中为选择框添加不同的选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/560468134611fb213d7b8e52a478f831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mo0Of0s5JvrwrPVdoBqwyQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/9b560cc87696be1aeb4edae72b72f769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*gjNyAa2c0GAb9Isdg35RSw.png"/></div></figure><p id="921e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ne nf ng nh b">getGenres()</code>是一个获取电影类型的函数，但我不会深入讨论。剩下的就很简单了。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="f3be" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第七步</h1><p id="c43b" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">还记得你在<code class="fe ne nf ng nh b">handle submit</code>里用的<code class="fe ne nf ng nh b">doSubmit()</code>吗？这就是了。它处理提交的所有独特之处。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/d6e782bbbd885efe2758f467d2db34f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSsdhd8wAS9pudg6N9ag2g.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="f15c" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">第八步</h1><p id="b449" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">创建您的表单:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/1f374b0cfe2cee63fbd9359bb4c538b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ofUrVbJfo2WHm-6M2oaYqQ.png"/></div></div></figure><p id="2f21" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在您可以使用<code class="fe ne nf ng nh b">renderInput</code>、<code class="fe ne nf ng nh b">renderButton</code>和<code class="fe ne nf ng nh b">renderSelect</code>函数来创建您的表单。瞧，您已经完成了，可以通过应用程序使用表单(例如登录):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/526e9ee1b750ad5b074b67d03fee9152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qGnSTM-yyer6_xwnTcnrA.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="5c32" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">结论</h1><p id="47d2" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">这真的让我想起了我最近在约翰·奥特的书《软件设计哲学》中读到的一些东西，他在书中谈到了战略性编程而不是战术性编程。</p><p id="bf27" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">战术方法可能只是像往常一样创建一个表单。这似乎是一种更快的方法，但它要求开发人员每次需要时都创建一个全新的表单，这非常耗时。本文中的策略方法可能需要更长的时间来实现，但是在创建新表单时，只需要5分钟，而不是20分钟，从长远来看，确实节省了时间。</p><p id="ffdd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以下次你编程的时候，想想你在做什么，从战略上来说，这是不是你代码的最佳选择。</p></div></div>    
</body>
</html>