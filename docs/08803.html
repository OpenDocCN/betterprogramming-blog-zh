<html>
<head>
<title>A Beginner’s Guide To React Native Navigation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应本地导航的初学者指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-beginners-guide-to-react-native-navigation-a3d7042666c9?source=collection_archive---------5-----------------------#2021-06-14">https://betterprogramming.pub/a-beginners-guide-to-react-native-navigation-a3d7042666c9?source=collection_archive---------5-----------------------#2021-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3247" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在React本地应用中执行路由和导航</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b8a015eb182167210c861df08a82da8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2UbxGdL4Vp5RmBlx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://unsplash.com/@diegojimenez" rel="noopener ugc nofollow" target="_blank"> Diego Jumenz </a>在<a class="ae ky" href="http://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="a8a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React Native对于希望构建移动应用的开发人员来说是一个绝佳的选择。但是它的一个主要缺点是路由。例如，看看下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="2ab6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们只渲染了<code class="fe lx ly lz ma b">Home</code>组件。然而，考虑一下:如果我们想让用户在应用程序的不同部分导航，该怎么办？例如，让我们尝试用下面的代码呈现<code class="fe lx ly lz ma b">Details</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="7753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这段代码中，您会注意到一个主要问题:我们如何告诉React Native从<code class="fe lx ly lz ma b">Home</code>组件导航到<code class="fe lx ly lz ma b">Details</code>组件？</p><p id="b2c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是<a class="ae ky" href="https://reactnavigation.org/" rel="noopener ugc nofollow" target="_blank">反应导航</a>进入场景的地方。这是一个易于使用的库，允许开发人员在他们的应用程序中利用路由功能。</p><p id="d8a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，您将学习如何使用React导航库执行简单的动态路由。到本文结束时，您将已经构建了一个演示导航功能的应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/7f21ab804bac99ffb7fed3a5755761ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/1*Bxt_PwDwA92W3vu-XU5XGw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这篇文章的结果</p></figure><p id="356c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="24a4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">入门指南</h1><h2 id="a3b7" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">项目初始化和设置</h2><p id="983f" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在本文中，我们将使用<code class="fe lx ly lz ma b">expo-cli</code>来实例化我们的React原生应用。为此，运行以下终端命令:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="9e35" class="nb mk it ma b gy nw nx l ny nz">expo init navigation-tutorial</span></pre><p id="5dd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，它会要求您决定一个模板。选择<code class="fe lx ly lz ma b">bare workflow</code>部分下的<code class="fe lx ly lz ma b">minimal</code>选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/a9865760aace4c1f2fc971da4b504f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KhiisdWB7GmJ8jtRpMPqwA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选择“最小”</p></figure><p id="e08b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，就该安装以下库了:</p><ul class=""><li id="edcb" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated"><code class="fe lx ly lz ma b">@react-navigation/native</code>:这个项目的核心模块。</li><li id="6ed9" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated"><code class="fe lx ly lz ma b">@react-navigation/stack</code>:构建我们的堆栈导航器。在本文的后面，您将了解更多关于堆栈导航器的内容。</li></ul><p id="b8be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，运行以下终端命令:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="c9c4" class="nb mk it ma b gy nw nx l ny nz">npm install <a class="ae ky" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-navigation/native @react-navigation/stack</span></pre><p id="6ab9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在继续使用以下命令安装对等依赖项:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="0f71" class="nb mk it ma b gy nw nx l ny nz">expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context <a class="ae ky" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-native-community/masked-view</span></pre><p id="b98d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在已经完成了初始阶段。现在让我们编写一些代码来创建堆栈导航器。</p><h2 id="bd57" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">堆栈导航器</h2><p id="e502" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">栈导航器是构建路由系统的核心模块；它让你的应用程序在不同的屏幕之间转换。因此，这允许客户端浏览应用程序的不同部分。</p><p id="5d1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们编写堆栈导航器。转到<code class="fe lx ly lz ma b">App.js</code>并添加以下导入:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/825790cd45172405837470ece86c0661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJiiVcAodgipJ9POLvNpwQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要在App.js中编写的代码</p></figure><ul class=""><li id="dfc2" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第2行:<code class="fe lx ly lz ma b">NavigationContainer</code>组件将管理我们的应用程序状态，并将我们的堆栈导航器挂接到应用程序。</li><li id="1b6e" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第3行:<code class="fe lx ly lz ma b">createStackNavigator</code>函数将构建我们的堆栈导航器。</li></ul><p id="f5f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要构建我们的导航容器。为此，在您的<code class="fe lx ly lz ma b">App</code>组件声明的正上方编写以下代码行:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="33d3" class="nb mk it ma b gy nw nx l ny nz">const Stack = createStackNavigator();</span><span id="3c14" class="nb mk it ma b gy oq nx l ny nz">function App() { <br/>  //further code...</span></pre><p id="f546" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe lx ly lz ma b">App.js</code>中找到你的<code class="fe lx ly lz ma b">return</code>区块:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="21e2" class="nb mk it ma b gy nw nx l ny nz">return (<br/>  &lt;View style={styles.container}&gt;<br/>  &lt;Text&gt;Open up App.js to start working on your app!&lt;/Text&gt;<br/>  &lt;StatusBar style="auto" /&gt;<br/>  &lt;/View&gt;<br/>);</span></pre><p id="8fa3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样改变它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/6f8784f4bdf5280bff87cc5815f49c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFvGIP95WTLT2sEzBvbVWw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要在App.js中编写的代码</p></figure><ul class=""><li id="a842" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第2行:创建我们的导航容器。我们的导航员会在这里。</li><li id="b61f" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第3行:初始化我们的<code class="fe lx ly lz ma b">Stack.Navigator</code>组件。我们将把我们的路线放在这里。</li></ul><p id="898d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，尝试运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/b6460e96a15b541edbb7e7768c1572d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*8fR-xnxJpCSIG4zmwL7ylQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">输出错误</p></figure><p id="3b2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的导航器找不到任何路线，因此出错。在本文的下一部分，我们将初始化我们的屏幕，以便React Native可以显示它们。</p><p id="733d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lx ly lz ma b">App.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h1 id="9cfc" class="mj mk it bd ml mm ot mo mp mq ou ms mt jz ov ka mv kc ow kd mx kf ox kg mz na bi translated">基本路由</h1><p id="805a" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在本节中，我们将创建一个主页，允许用户转到“关于我”页面。</p><h2 id="eb2b" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">主页</h2><p id="420b" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在项目的根目录下，创建一个名为<code class="fe lx ly lz ma b">screens</code>的文件夹。在这里，创建一个名为<code class="fe lx ly lz ma b">Home.js</code>的文件。</p><p id="27c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lx ly lz ma b">screens/Home.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="088b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个标准的React本地组件，显示一段文本。</p><ul class=""><li id="d6ec" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第12–22行:我们的页面应该有一个蓝色的背景颜色和白色的字体颜色</li></ul><p id="b32d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为最后一步，我们需要告诉导航库这将是我们的主页。</p><p id="4b9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe lx ly lz ma b">App.js</code>并找到以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/6f8784f4bdf5280bff87cc5815f49c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFvGIP95WTLT2sEzBvbVWw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要在App.js中查找的代码</p></figure><p id="f228" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样改变它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/bcc8e4f23f5f8704968afeb903db30c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I4WQ52jWwprzFwOCGcqthg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.js中要替换的代码</p></figure><ul class=""><li id="7497" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第4行:通知React Navigation,<code class="fe lx ly lz ma b">Home</code>组件将是我们想要呈现的屏幕之一。<br/>组件<code class="fe lx ly lz ma b">Screen</code>具有<code class="fe lx ly lz ma b">name</code>和<code class="fe lx ly lz ma b">component</code>支柱。在这种情况下，我们已经指定当用户转到<code class="fe lx ly lz ma b">Home</code>路线时，React Native应该呈现<code class="fe lx ly lz ma b">Home</code>组件。</li></ul><p id="eb90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/8bfbd976fa62450b5f9f22054a30c469.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*z6TunV0N-0Feigjg23KoIA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="d38d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太神奇了，我们的代码起作用了！现在让我们尝试添加一个“关于我”页面作为路线。</p><p id="22a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lx ly lz ma b">App.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h2 id="27e8" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">“关于”页面</h2><p id="5436" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在您的<code class="fe lx ly lz ma b">screens</code>文件夹中，创建一个名为<code class="fe lx ly lz ma b">About.js</code>的文件。在这里，编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="9917" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第19行:我们的<code class="fe lx ly lz ma b">Text</code>元素应该有40个单位大。</li></ul><p id="fc45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要将这个组件添加到堆栈中。为此，在<code class="fe lx ly lz ma b">App.js</code>中找到您的<code class="fe lx ly lz ma b">return</code>块，并按如下方式更换它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="b070" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第5行:当用户走到<code class="fe lx ly lz ma b">About</code>路线时，再渲染<code class="fe lx ly lz ma b">About.js</code>组件。<br/>由于<code class="fe lx ly lz ma b">Home</code>组件是堆栈中的第一项，它将作为我们应用程序的主页。</li></ul><p id="32cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/f6c2837464e259174106cc249de2d7a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*lGXZlBEnc7vsozdH6omgyQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="e7ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使我们将<code class="fe lx ly lz ma b">About</code>组件添加到可用路线中，为什么我们不能导航到它？这是因为我们还没有编写告诉React Native改变路由的代码。</p><p id="f824" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，请转到<code class="fe lx ly lz ma b">screens/Home.js</code>并找到以下代码:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="35d3" class="nb mk it ma b gy nw nx l ny nz">export default function Home() {</span></pre><p id="3826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样改变它:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="2e94" class="nb mk it ma b gy nw nx l ny nz">export default function Home({ navigation }) {</span></pre><p id="39c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个屏幕组件中都捆绑了<code class="fe lx ly lz ma b">navigation</code>道具。它包含几个执行导航相关操作的实用函数。</p><p id="d766" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe lx ly lz ma b">App.js</code>中找到你的<code class="fe lx ly lz ma b">return</code>块:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="88c8" class="nb mk it ma b gy nw nx l ny nz">return (<br/>  &lt;View style={styles.container}&gt;<br/>    &lt;Text style={styles.text}&gt;Welcome Home!&lt;/Text&gt;<br/>  &lt;/View&gt;<br/>);</span></pre><p id="5337" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样改变它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="0b60" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第6行:当用户点击这个<code class="fe lx ly lz ma b">Button</code>元素时，然后转到我们的<code class="fe lx ly lz ma b">About</code>路线。因此，这将呈现出<code class="fe lx ly lz ma b">About</code>屏幕。</li></ul><p id="5035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次运行代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/c71e47058ad3c49dd5ef159383e6fab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/1*TGmBjPpuyZE3wNw8NDWYbw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="81c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们完事了。在下一部分中，我们将使用该库执行动态路由。</p><p id="d3db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lx ly lz ma b">screens/Home.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h1 id="c37a" class="mj mk it bd ml mm ot mo mp mq ou ms mt jz ov ka mv kc ow kd mx kf ox kg mz na bi translated">动态路由</h1><p id="2a9d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在本节中，我们将使用<a class="ae ky" href="https://sampleapis.com/api-list/coffee" rel="noopener ugc nofollow" target="_blank"> Coffee API </a>来演示React导航中的动态路由。</p><p id="9ab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的计划是呈现咖啡名称的列表。如果客户点击其中的任何一个，那么应用程序应该会将他们带到另一个页面，该页面包含关于所选项目的更多信息。</p><h2 id="4a47" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">呈现我们的咖啡单</h2><p id="c3e5" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在您的<code class="fe lx ly lz ma b">screens</code>文件夹中，创建一个名为<code class="fe lx ly lz ma b">CoffeeList.js</code>的文件。在这里，编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="9039" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第1行:这个组件可以执行与导航相关的操作。</li><li id="d0bd" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第6行:<code class="fe lx ly lz ma b">data</code>钩子将包含API返回的响应。</li><li id="26b1" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第8–13行:<code class="fe lx ly lz ma b">fetchData</code>函数将执行对Coffee API的请求，然后将其响应存储到<code class="fe lx ly lz ma b">data</code>钩子中。此外，我们还记录了它对控制台的响应。</li><li id="1e96" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第15–17行:当组件首次安装时，运行<code class="fe lx ly lz ma b">fetchData</code>功能。</li></ul><p id="16f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要将它添加到堆栈中。在<code class="fe lx ly lz ma b">App.js</code>中，编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="bf84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要呈现一个按钮，让用户前往<code class="fe lx ly lz ma b">CoffeeList</code>路线。为此，转到<code class="fe lx ly lz ma b">screens/Home.js</code>并编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6b1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/11620d58a486e41ddce85bfda1df0093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/1*gw2EUkQZZI8M79gkajP6Zw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="c9f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在看看你的控制台:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/846b3235ce4184465efdb5580d7868e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2yz9byqSDYFICVXa7bQYQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">终端中的输出</p></figure><p id="1736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的产量和预期的一样！现在，让我们将这个列表呈现在屏幕上。</p><p id="92ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe lx ly lz ma b">CoffeeList</code>函数中编写以下代码块:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="b0d0" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第1行:我们将使用<code class="fe lx ly lz ma b">renderItem</code>函数将列表呈现到屏幕上。</li><li id="f517" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第2行和第3行:将每个元素表示为一个<code class="fe lx ly lz ma b">Text</code>元素，并显示该项目的<code class="fe lx ly lz ma b">title</code>字段。</li></ul><p id="23d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一步，在<code class="fe lx ly lz ma b">CoffeeList.js</code>中找到下面的代码:</p><pre class="kj kk kl km gt ns ma nt nu aw nv bi"><span id="6a60" class="nb mk it ma b gy nw nx l ny nz">return (<br/>  &lt;View&gt;<br/>    &lt;Text&gt;Text pasted here.&lt;/Text&gt;<br/>  &lt;/View&gt;<br/>);</span></pre><p id="7bfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样改变它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="ef79" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第3行:<a class="ae ky" href="https://reactnative.dev/docs/flatlist" rel="noopener ugc nofollow" target="_blank">平面列表</a>组件将呈现我们的列表。</li><li id="0483" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第4行:告诉React Native呈现存储在我们的<code class="fe lx ly lz ma b">data</code>钩子中的项目。</li></ul><p id="7621" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/09b60b4c4b1c27b201c0c7ea7906fa41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/1*cD5aneYbYS1AMXIS9jSeww.gif"/></div></figure><p id="083b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们就快完成了！在下一节中，我们将使用这个API来显示每个项目的信息。</p><p id="2c22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lx ly lz ma b">CoffeeList.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h2 id="c365" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">显示咖啡信息</h2><p id="137e" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在您的<code class="fe lx ly lz ma b">screens</code>文件夹中，创建一个名为<code class="fe lx ly lz ma b">CoffeeInfo.js</code>的文件。在这里，编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="4d2a" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第4行:<code class="fe lx ly lz ma b">route</code>属性对于获取参数值很有用。我们将在本文的后面了解这一点。</li></ul><p id="1ee6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您现在需要将它作为一个屏幕添加到我们的堆栈中。转到<code class="fe lx ly lz ma b">App.js</code>并像这样改变您的<code class="fe lx ly lz ma b">return</code>块:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6d35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二步，转到<code class="fe lx ly lz ma b">screens/CoffeeList.js</code>并找到您的<code class="fe lx ly lz ma b">renderItem</code>功能，并将其更改如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="b4cc" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第2行:单击后，导航到<code class="fe lx ly lz ma b">CoffeeInfo</code>路线，并将项目的<code class="fe lx ly lz ma b">id</code>字段作为参数发送。</li></ul><p id="1aea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/ecf8abc13f771636ab991582caa41a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/1*BJzVKW2M-fJo7nSok5aNPA.gif"/></div></figure><p id="a831" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！我们的代码按预期工作。我们现在需要使用参数的值从我们的API获取数据。</p><p id="94bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，转到<code class="fe lx ly lz ma b">CoffeeInfo.js</code>并编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><ul class=""><li id="3919" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">第3行:从参数中提取<code class="fe lx ly lz ma b">id</code>属性。</li><li id="723c" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第5–10行:根据<code class="fe lx ly lz ma b">id</code>获取咖啡信息，然后将其响应存储到<code class="fe lx ly lz ma b">data</code>钩子中。</li><li id="6b2a" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第12–14行:当组件首次安装时，运行<code class="fe lx ly lz ma b">fetchData</code>方法。</li><li id="ce81" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第17行:检查<code class="fe lx ly lz ma b">data</code>挂钩是否不是<code class="fe lx ly lz ma b">undefined</code>或<code class="fe lx ly lz ma b">null</code>。如果是<code class="fe lx ly lz ma b">true</code>，则显示<code class="fe lx ly lz ma b">title</code>和<code class="fe lx ly lz ma b">description</code>字段。</li><li id="8f97" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">第24行:否则，通知用户数据正在路上。</li></ul><p id="5d8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/5dc15aadfc2e1afc00f2c5405aaec544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/1*P7eG9_aTx8Plv5T3hcWzrw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="1ff3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们完事了。</p><p id="3984" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lx ly lz ma b">CoffeeInfo.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><h1 id="25c6" class="mj mk it bd ml mm ot mo mp mq ou ms mt jz ov ka mv kc ow kd mx kf ox kg mz na bi translated">额外资源</h1><h2 id="e121" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">Github知识库</h2><p id="0923" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">本文的代码在这里。</p><h2 id="1e92" class="nb mk it bd ml nc nd dn mp ne nf dp mt li ng nh mv lm ni nj mx lq nk nl mz nm bi translated">进一步阅读</h2><ul class=""><li id="93c0" class="ob oc it lb b lc nn lf no li pb lm pc lq pd lu og oh oi oj bi translated">【React导航入门—  <a class="pe pf ep" href="https://medium.com/u/7cbf2b1d5a4e?source=post_page-----a3d7042666c9--------------------------------" rel="noopener" target="_blank"> Ross Bulat </a></li><li id="faf6" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated"><a class="ae ky" href="https://www.youtube.com/watch?v=nQVCkqvU1uE" rel="noopener ugc nofollow" target="_blank">反应导航v5 —反应原生学校</a></li><li id="ac35" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated"><a class="ae ky" href="https://blog.logrocket.com/navigating-react-native-apps-using-react-navigation/" rel="noopener ugc nofollow" target="_blank"> React本地导航:教程和示例— LogRocket </a></li></ul><h1 id="efd9" class="mj mk it bd ml mm ot mo mp mq ou ms mt jz ov ka mv kc ow kd mx kf ox kg mz na bi translated">结论</h1><p id="65c0" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">React导航库提供了在React本地项目中实现简单和动态路由的简单解决方案。除了堆栈导航器，您还可以获得基于<a class="ae ky" href="https://reactnavigation.org/docs/tab-based-navigation" rel="noopener ugc nofollow" target="_blank">标签的</a>和<a class="ae ky" href="https://reactnavigation.org/docs/drawer-based-navigation" rel="noopener ugc nofollow" target="_blank">抽屉导航</a>。此外，考虑到路由对于一个项目是多么的重要，难怪这个库<a class="ae ky" href="https://reactnavigation.org/docs/used-by/" rel="noopener ugc nofollow" target="_blank">是复杂和大型应用</a>中的主要部分。</p><p id="0f47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在这篇文章中遇到了任何困惑，我建议您解构代码，并摆弄它，以便您可以完全掌握主题。</p><p id="4347" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢您阅读这篇文章！编码快乐！</p></div></div>    
</body>
</html>