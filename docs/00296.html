<html>
<head>
<title>What’s in a Bitcoin Block?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个比特币区块里有什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/whats-in-a-bitcoin-block-41d0a5d1472f?source=collection_archive---------0-----------------------#2019-02-26">https://betterprogramming.pub/whats-in-a-bitcoin-block-41d0a5d1472f?source=collection_archive---------0-----------------------#2019-02-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="57b5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何理解构成比特币区块链区块的数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d6bd6fb8b3c825d04c7b20205934c36b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PoRsNwlI9yuJ4Rf4on-EDg.png"/></div></div></figure><p id="8cd6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">块是一种数据结构，包含事务以及关于块的元数据。所有交易必须包含在有效的块中，才能被视为最终交易。网络上的所有完整节点将存储该块的副本，以便验证新的事务并与其他节点共享数据。</p><blockquote class="lq lr ls"><p id="34a8" class="ku kv lt kw b kx ky ju kz la lb jx lc lu le lf lg lv li lj lk lw lm ln lo lp im bi translated">这是视频课程的一部分，加入全球22个国家的人在我的课程<a class="ae lx" href="https://www.udemy.com/course/create-your-own-blockchain/" rel="noopener ugc nofollow" target="_blank">上成为比特币+区块链程序员</a>。</p></blockquote><h1 id="c2e2" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">方块图</h1><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="53ee" class="mv lz it mr b gy mw mx l my mz">$ bitcoin-cli -regtest getblockhash 0 <br/>0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206</span><span id="ce31" class="mv lz it mr b gy na mx l my mz">$ bitcoin-cli -regtest getblock 0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206 0</span></pre><p id="7bc7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nb nc nd mr b">0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4adae5494dffff7f20020000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000</code></p><p id="e87f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是regtest网络的起源块，正如你所看到的，它不是真正的人可读的。我们将学习数据是如何从左到右编码的。</p><p id="2ff5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nb nc nd mr b">{block header}</code> <code class="fe nb nc nd mr b">{transaction counter}</code> <code class="fe nb nc nd mr b">{transactions}</code></p><h1 id="1920" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">块标题</h1><p id="5ad8" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated"><code class="fe nb nc nd mr b">{version 4B}</code> <code class="fe nb nc nd mr b">{previous block hash 32B}</code> <code class="fe nb nc nd mr b">{merkle root hash 32B}</code> <code class="fe nb nc nd mr b">{time 4B}{bits 4B}</code> <code class="fe nb nc nd mr b">{nonce 4B}</code></p><ul class=""><li id="f167" class="nj nk it kw b kx ky la lb ld nl lh nm ll nn lp no np nq nr bi translated"><code class="fe nb nc nd mr b">version</code> (4字节)-块格式版本。</li><li id="2c10" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><code class="fe nb nc nd mr b">previous block hash</code> (32字节)——前面块的哈希。将这一点包含在报头中很重要，因为块的散列是根据报头计算的，因此取决于前一个块的值，将每个新块链接到最后一个块。这是区块链链条中的一环。</li><li id="8dc9" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><code class="fe nb nc nd mr b">merkle root hash</code> (32字节)-块中所有事务的<a class="ae lx" href="https://en.wikipedia.org/wiki/Merkle_tree" rel="noopener ugc nofollow" target="_blank"> Merkle树</a>根的散列。如果任何事务被更改、删除或重新排序，都会改变merkle根散列。这就是锁定块中所有事务的原因。</li><li id="51cc" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><code class="fe nb nc nd mr b">time</code> (4字节)——<a class="ae lx" href="https://en.bitcoin.it/wiki/Block_timestamp" rel="noopener ugc nofollow" target="_blank">Unix时间</a>中的时间戳(秒)。由于世界各地的每个节点的时钟不能保证同步，因此只要求与网络的其他节点相差不超过2小时。</li><li id="0496" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><code class="fe nb nc nd mr b">bits</code> (4字节)—<a class="ae lx" href="https://bitcoin.org/en/developer-reference#target-nbits" rel="noopener ugc nofollow" target="_blank">紧凑格式</a>的目标哈希值。块哈希必须等于或小于该值，才能被视为有效。</li><li id="e054" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><code class="fe nb nc nd mr b">nonce</code> (4字节)-可以是任何4字节值，在挖掘时不断变化，直到找到有效的块哈希。</li></ul><h1 id="631f" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak">数值</strong></h1><ul class=""><li id="a840" class="nj nk it kw b kx ne la nf ld nx lh ny ll nz lp no np nq nr bi translated"><strong class="kw iu">版本</strong> — <code class="fe nb nc nd mr b">01000000</code> (1)</li><li id="49e5" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><strong class="kw iu">前一块哈希</strong>——<code class="fe nb nc nd mr b">0000000000000000000000000000000000000000000000000000000000000000</code></li><li id="9a03" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><strong class="kw iu">默克尔根哈希</strong>——<code class="fe nb nc nd mr b">3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a</code></li><li id="fb62" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><strong class="kw iu">时间</strong> — <code class="fe nb nc nd mr b">dae5494d</code>(格林威治时间2011年2月2日星期三下午11:16:42)</li><li id="2999" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><strong class="kw iu">位</strong>—<code class="fe nb nc nd mr b">ffff7f20</code>(7 fffff 000000000000000000000000000000000000000000000000000)</li><li id="8f4a" class="nj nk it kw b kx ns la nt ld nu lh nv ll nw lp no np nq nr bi translated"><strong class="kw iu">随机数</strong> — <code class="fe nb nc nd mr b">02000000</code>(十进制2)</li></ul><p id="3689" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">注:</strong>记住比特币使用的是<a class="ae lx" href="https://chortle.ccsu.edu/AssemblyTutorial/Chapter-15/ass15_3.html" rel="noopener ugc nofollow" target="_blank"> Little Endian </a>格式，可能看起来是反的。您可以使用提供的工具<code class="fe nb nc nd mr b">$ reverse_endian {hex}</code>来反转十六进制字符串的字节顺序。</p><h1 id="3339" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">交易计数器</h1><p id="e1db" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated"><code class="fe nb nc nd mr b">01</code> (1)区块中的交易</p><ul class=""><li id="8999" class="nj nk it kw b kx ky la lb ld nl lh nm ll nn lp no np nq nr bi translated">事务计数器(可变长度)—以一个<a class="ae lx" href="https://en.bitcoin.it/wiki/Protocol_documentation#Variable_length_integer" rel="noopener ugc nofollow" target="_blank">可变长度整数</a>表示的块中的事务数量。</li></ul><blockquote class="lq lr ls"><p id="4562" class="ku kv lt kw b kx ky ju kz la lb jx lc lu le lf lg lv li lj lk lw lm ln lo lp im bi translated">这是视频课程的一部分，加入全球22个国家的人在我的课程<a class="ae lx" href="https://www.udemy.com/course/create-your-own-blockchain/" rel="noopener ugc nofollow" target="_blank">上成为比特币+区块链程序员</a>。</p></blockquote></div></div>    
</body>
</html>