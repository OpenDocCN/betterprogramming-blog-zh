<html>
<head>
<title>My Awesome React/Redux Structure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的超赞反应/还原结构</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/my-awesome-react-redux-structure-6044e5007e22?source=collection_archive---------0-----------------------#2019-10-01">https://betterprogramming.pub/my-awesome-react-redux-structure-6044e5007e22?source=collection_archive---------0-----------------------#2019-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f70c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何以优雅的方式构建React/Redux应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e55b5bab0ca2fa31663bf9d6b43c22aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ApyPDl5_ovc87cyvX7MMw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@smnzhu?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西蒙朱</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="3a20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想展示我是如何构造React/Redux应用程序的。我将为我的许多文件使用JavaScript ES2015类。我认为类有助于构建你的代码。</p><p id="7ff9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不喜欢类，那么请查看其他源代码示例:</p><ul class=""><li id="8dae" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture/tree/TypeScript" rel="noopener ugc nofollow" target="_blank"> React/Redux(类型脚本—类)</a></li><li id="ae4f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture/tree/JavaScript" rel="noopener ugc nofollow" target="_blank">React/Redux(JavaScript-classes)</a></li><li id="666a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture/tree/ts/arrows" rel="noopener ugc nofollow" target="_blank">React Hooks/Redux(TypeScript-functional)(箭头函数)</a></li><li id="6393" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture/tree/ts/function" rel="noopener ugc nofollow" target="_blank">React Hooks/Redux(TypeScript-functional)(常规函数)</a></li><li id="c0dc" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture/tree/js/function" rel="noopener ugc nofollow" target="_blank">React Hooks/Redux(JavaScript-functional)(常规函数)</a></li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3d34" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">概观</h1><p id="4455" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">本文将涵盖以下主题:</p><ul class=""><li id="45c7" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">应用程序工作流(最佳实践)</li><li id="29fb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">文件夹结构(很棒)</li><li id="ddef" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">视图(简化)</li><li id="4097" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">商店(冗余)</li><li id="190a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">动作(应用程序通信)</li><li id="337a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">效果(API请求)</li><li id="e9ec" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">缩减器(数据管理)</li><li id="4f10" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择器(查看业务逻辑)</li></ul><p id="9e49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">参见与本文对应的<a class="ae ky" href="https://codebelt.github.io/react-redux-architecture/" rel="noopener ugc nofollow" target="_blank">示例应用程序</a>工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/0b82c315c65ef65f355bbed084b01927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5UmpZ8ntrsrbEL1PRmhFw.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="0173" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">应用程序工作流程</h1><p id="0dda" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在我的职业生涯中，我做过许多应用程序。从<a class="ae ky" href="https://www.adobe.com/devnet/actionscript.html" rel="noopener ugc nofollow" target="_blank"> ActionScript </a>到最现代的JavaScript框架和库。一路走来，我学到了很多。</p><p id="02d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我一路走来形成的一些模式、策略和观点。</p><p id="deb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是理想的应用程序生命周期:</p><ul class=""><li id="c8db" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe no np nq nr b">View</code>急件<code class="fe no np nq nr b">Action</code>。</li><li id="afb3" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Action</code>称之为<code class="fe no np nq nr b">Effect</code>。</li><li id="4016" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Effect</code>处理API调用，净化输入数据或返回错误。</li><li id="8b07" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Action</code>从<code class="fe no np nq nr b">Effect</code>接收净化的模型或错误，并分派它。</li><li id="9379" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Reducer</code>从<code class="fe no np nq nr b">Action</code>接收模型或错误，并将它们添加到商店。</li><li id="6cd4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Selector</code>获取<code class="fe no np nq nr b">Reducers</code>数据并为<code class="fe no np nq nr b">Views</code>创建特定数据。</li><li id="e921" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">View</code>直接从商店或<code class="fe no np nq nr b">Selector</code>获取数据并显示出来。</li><li id="1c1f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">剩下的就是内部沟通和状态管理。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/be3e5dd468d0074c26a0e62f9e9952c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*l2rXdVxRl2MD9qV1q-CXZg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序生命周期图</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="e9bd" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">文件夹结构</h1><p id="26d6" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我真的很喜欢下面的文件夹结构，它非常适合任何规模的项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/5ac61f5a6f39bc739ff3bfaa9aa23d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*PM3xAp_lZw-u1j3S2hfYmA.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React/Redux文件夹结构</p></figure><ul class=""><li id="6a68" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe no np nq nr b">constants</code>:不变的静态数据。</li><li id="accf" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">environments</code> : <a class="ae ky" href="https://blog.usejournal.com/my-awesome-custom-react-environment-variables-setup-8ebb0797d8ac" rel="noopener ugc nofollow" target="_blank"> API端点，可能在不同<br/>环境中变化的静态信息</a>。</li><li id="8404" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">models</code>:共享模型/接口。</li><li id="e205" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">selectors</code>:为视图生成的业务逻辑代码、模型/接口。</li><li id="b045" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">stores</code> : <br/> - <code class="fe no np nq nr b">models</code> : API相关型号。<br/> - <code class="fe no np nq nr b">actions</code>:触发应用变更的事件。<br/> - <code class="fe no np nq nr b">effects</code> : <a class="ae ky" href="https://medium.com/swlh/protect-your-javascript-applications-from-api-data-401a73c7c80b" rel="noopener">处理API并清理响应数据</a>。<br/> - <code class="fe no np nq nr b">reducers</code>:添加/删除/编辑全局存储中的数据。</li><li id="48ca" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">utilities</code>:帮助器代码，抽象代码，防止重复。</li><li id="a25a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">views</code>:所有视图组件。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="20f9" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">视图</h1><p id="e053" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">视图应该简单，没有转换数据的逻辑。</p><p id="f8fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的视图需要做的就是显示数据和管理它们自己。应用程序的其他部分可以完成繁重的工作。</p><p id="1d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我为之奋斗的一件事是“让你的代码读起来像一本书”。最好从顶部开始，从左到右阅读文件，以理解代码在做什么。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="a806" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像一本书一样从顶部开始，您可以看到视图将使用什么数据。然后，看着<code class="fe no np nq nr b">componentDidMount</code>，你会看到视图会<code class="fe no np nq nr b">dispatch</code>一个<code class="fe no np nq nr b">SomeAction.requestSomething</code>动作。</p><p id="bbfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们来看重要的<code class="fe no np nq nr b">render</code>方法代码，最后，任何像<code class="fe no np nq nr b">_onClick</code>这样的辅助方法都被放在文件的底部，重要的代码放在文件的顶部。</p><p id="4c90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">父组件不再为您的子组件做任何事情。让您的子组件获得它们自己的数据并进行它们自己的动作调用。</p><p id="1909" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要组件不会在其他组件中重用，我更喜欢连接组件，而不是让父组件获取数据并传入props。</p><p id="a01b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你把组件想象成乐高积木，如果父母不为孩子传递数据或管理回调，移动它们就容易多了。</p><p id="3a69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看下面的组件，我们可以很容易地将<code class="fe no np nq nr b">&lt;Actors /&gt;</code>移动到另一个组件，而不改变<code class="fe no np nq nr b">HomePage</code>中的任何逻辑。</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="a059" class="oa mr it nr b gy ob oc l od oe">class HomePage extends React.Component {<br/>  render() {<br/>    return (<br/>      &lt;div className={styles.wrapper}&gt;<br/>        <strong class="nr iu">&lt;MainOverview /&gt;</strong><br/>        <strong class="nr iu">&lt;Actors /&gt;</strong><br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="304a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让子组件更加独立的一个方法是使用<code class="fe no np nq nr b">Selectors</code>来创建特定于视图需求的数据，并限制视图中逻辑代码的数量。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3343" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">商店(冗余)</h1><p id="914b" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在Redux中，<code class="fe no np nq nr b">store</code>是跟踪应用程序当前状态的单个对象。您使用减速器来管理整个<code class="fe no np nq nr b">store</code>的各个部分。</p><p id="2268" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有一个<code class="fe no np nq nr b">stores</code>目录，包含各个动作、效果和reducers文件的文件夹。这实际上构成了管理单个对象<code class="fe no np nq nr b">store</code>的较小部分。</p><p id="23ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件夹结构示例:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="9d39" class="oa mr it nr b gy ob oc l od oe">┣━ src/<br/>┃   ...<br/>┃   ┗━ stores/<br/>┃      ┣━ shows/<br/>┃      ┃  ┣━ models/<br/>┃      ┃  ┣━ <strong class="nr iu">ShowsAction</strong>.ts<br/>┃      ┃  ┣━ <strong class="nr iu">ShowsEffect</strong>.ts<br/>┃      ┃  ┗━ <strong class="nr iu">ShowsReducer</strong>.ts<br/>┃      ┣━ episodes/<br/>┃      ┃  ┣━ models/<br/>┃      ┃  ┣━ <strong class="nr iu">EpisodesAction</strong>.ts<br/>┃      ┃  ┣━ <strong class="nr iu">EpisodesEffect</strong>.ts<br/>┃      ┃  ┗━ <strong class="nr iu">EpisodesReducer</strong>.ts<br/>┃      ┣━ rootReducers.ts<br/>┃      ┗━ rootStore.ts<br/>┃   ...</span></pre><p id="64c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据经验，我按照API域来划分我的存储。</p><p id="2dbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我有一个类似于<a class="ae ky" href="http://api.tvmaze.com/shows/74" rel="noopener ugc nofollow" target="_blank">http://api.tvmaze.com/shows/74</a>的API，我会创建一个<code class="fe no np nq nr b">ShowsAction</code>、<code class="fe no np nq nr b">ShowsEffect</code>和<code class="fe no np nq nr b">ShowsReducer</code>。</p><p id="3d69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<a class="ae ky" href="http://api.tvmaze.com/episodes/1" rel="noopener ugc nofollow" target="_blank">http://api.tvmaze.com/episodes/1</a>，我将创建一个<code class="fe no np nq nr b">EpisodesAction</code>、<code class="fe no np nq nr b">EpisodesEffect</code>和<code class="fe no np nq nr b">EpisodesReducer</code>。</p><p id="5d73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢这样做，因为如果应用程序的某个功能被删除，我可以删除单个文件夹，而不是去顶级文件夹(操作、reducers等)。)并逐个删除文件。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="2d26" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">行动</h1><p id="ebc4" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">动作是应用程序中的核心通信，它提供了一种触发副作用并将数据传递给reducers的方式。</p><h2 id="f124" class="oa mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated">通量标准行动(FSA)</h2><p id="43fc" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">说到动作，我遵循<a class="ae ky" href="https://github.com/acdlite/flux-standard-action" rel="noopener ugc nofollow" target="_blank">通量标准动作</a>模式来确定动作对象的结构:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><ul class=""><li id="a0fb" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe no np nq nr b">type</code>(必需):一个唯一的字符串标识符，用来告诉消费者(reducers、sagas、middlewares等)。)行动的意图。</li><li id="4724" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">payload</code>(可选):要随动作和属性一起发送的数据可以是任何类型的值。</li><li id="135f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">error</code>(可选):如果设置为<code class="fe no np nq nr b">true</code>，动作代表一个错误，<code class="fe no np nq nr b">payload</code>应该包含某种错误数据。</li><li id="7a61" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">meta</code>(可选):用于任何不属于有效负载的额外信息，该属性可以是任何类型的值。例如:可能不包含在有效载荷本身中的“ID”。</li></ul><p id="6236" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个动作<em class="oq">不能</em>包括除<code class="fe no np nq nr b">type</code>、<code class="fe no np nq nr b">payload</code>、<code class="fe no np nq nr b">error</code>和<code class="fe no np nq nr b">meta</code>之外的属性，这样你所有的动作都是一致的和可预测的。</p><h2 id="cf88" class="oa mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated">动作的静态类</h2><p id="c96a" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我发现静态类对动作很有效。请参见下面的示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="c754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现以这种方式编写代码可以使代码自文档化。例如，我可以清楚地看到我正在从<code class="fe no np nq nr b">SomeAction</code>商店部分调用<code class="fe no np nq nr b">normalAction</code>:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="6ddf" class="oa mr it nr b gy ob oc l od oe">this.props.dispatch(<strong class="nr iu">SomeAction.normalAction()</strong>);</span></pre><p id="a6ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，不清楚它属于操作的哪个存储部分，代码读起来不像一本书:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="9349" class="oa mr it nr b gy ob oc l od oe">this.props.dispatch(<strong class="nr iu">normalAction()</strong>);</span></pre><p id="9e41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，当在reducer中使用它时，使用哪个动作和动作组是很清楚的:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="bf5d" class="oa mr it nr b gy ob oc l od oe">switch (action.type) {<br/>  case <strong class="nr iu">SomeAction.<em class="oq">NORMAL_ACTION</em></strong>:<br/>    return {<br/>      ...state,<br/>      someProperty: action.payload,<br/>    };<br/>  default:<br/>    return state;<br/>}</span></pre><h2 id="3cde" class="oa mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated"><strong class="ak">强制执行通量标准动作(FSA) </strong></h2><p id="74f8" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">为了确保您团队中的每个人都在他们的操作中使用FSA，让我们创建一个<code class="fe no np nq nr b">ActionUtility</code>并添加一个<code class="fe no np nq nr b">createAction</code>方法。</p><p id="da76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一需要的参数是第一个，即<code class="fe no np nq nr b">type</code>。其余的设置为默认值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="e2aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们更新<code class="fe no np nq nr b">normalAction</code>方法以使用<code class="fe no np nq nr b">ActionUtility.createAction</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="5dc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也更新一下<code class="fe no np nq nr b">thunkAction</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="330c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们所有的行动都会一致。</p><h2 id="b26d" class="oa mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated"><strong class="ak">API请求动作的约定</strong></h2><p id="f826" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">谈到管理API请求的加载和错误逻辑，我非常喜欢下面的约定。这归结于你的行动如何命名，以及你和你的团队将遵循的惯例。</p><p id="b377" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何以<code class="fe no np nq nr b">REQUEST_</code>开头的动作都是开始动作:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="ff64" class="oa mr it nr b gy ob oc l od oe"><strong class="nr iu">SomeAction.<em class="oq">REQUEST_SOMETHING</em></strong></span></pre><p id="b289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，一个动作以<code class="fe no np nq nr b">REQUEST_</code>开始，以<code class="fe no np nq nr b">_FINISHED</code>结束，这个动作就完成了:</p><pre class="kj kk kl km gt nw nr nx ny aw nz bi"><span id="bfd8" class="oa mr it nr b gy ob oc l od oe"><strong class="nr iu">SomeAction.<em class="oq">REQUEST_SOMETHING_FINISHED</em></strong></span></pre><p id="ba09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，您可以创建逻辑来确定某个动作的加载状态是<code class="fe no np nq nr b">true</code>还是<code class="fe no np nq nr b">false</code>。如上所述，当我使用通量标准动作时，我们也可以将<code class="fe no np nq nr b">error</code>属性设置为<code class="fe no np nq nr b">true/false</code>。</p><p id="2bd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许我们在操作完成或重新启动时显示或删除错误消息。您可以在示例应用程序中看到这一点。</p><h2 id="d059" class="oa mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated"><strong class="ak">带Redux-Thunk的动作</strong></h2><p id="f6ea" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">看看下面的例子，你会发现我使用了上面提到的动作命名约定。</p><p id="ceb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，在我调用<code class="fe no np nq nr b">ShowsEffect.requestShow(74)</code>之前，我调度了开始的动作，然后，一旦我从请求中获得数据，我就调度完成的动作。</p><p id="de9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还要注意我是如何设置错误状态的。我的<code class="fe no np nq nr b">ShowsEffect</code>要么返回一个有效模型，要么返回一个<code class="fe no np nq nr b">HttpErrorResponseModel</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="938a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以将这个约定/模式用于所有的请求操作。我们可以做的一件事是将一些样板代码抽象成一个实用程序。让我们在<code class="fe no np nq nr b">ActionUtility</code>上创建另一个名为<code class="fe no np nq nr b">createThunkEffect</code>的方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="71dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用<code class="fe no np nq nr b">ActionUtility.createThunkEffect</code>重构<code class="fe no np nq nr b">requestShow</code>动作方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="1c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从相应的<a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture" rel="noopener ugc nofollow" target="_blank">样本代码</a>中查看完整的<code class="fe no np nq nr b">ShowsAction</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="0105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本节中，我谈到了<a class="ae ky" href="https://github.com/reduxjs/redux-thunk" rel="noopener ugc nofollow" target="_blank"> Redux-Thunk </a>，但是如果您需要处理复杂的逻辑，比如有序的结账流程，我会考虑将<a class="ae ky" href="https://github.com/redux-saga/redux-saga" rel="noopener ugc nofollow" target="_blank"> Redux-Saga </a>添加到您的应用程序中。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="7599" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">效果(API请求)</h1><p id="f933" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">Effects负责获取数据，并确保数据在传递到应用程序之前经过清理。</p><p id="3a8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看下面的<code class="fe no np nq nr b">ShowsEffect</code>片段。请注意，这里有一个端点，它发出一个<code class="fe no np nq nr b">GET</code>请求，并从响应中返回来自API或<code class="fe no np nq nr b">HttpErrorResponseModel</code>的成功数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="d746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">效果也应该净化你的数据，这就是<code class="fe no np nq nr b">ShowModel</code>正在做的。查看我的文章<a class="ae ky" href="https://medium.com/swlh/protect-your-javascript-applications-from-api-data-401a73c7c80b" rel="noopener">保护您的JavaScript应用程序免受Api数据的影响</a>以了解更多信息。</p><p id="cdbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再一次，让我们重构并最小化我们需要编写的样板代码的数量。</p><p id="0c99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经创建了一个包含一个<code class="fe no np nq nr b">getToModel</code>方法的<code class="fe no np nq nr b">EffectUtility</code>类。该方法发出一个<code class="fe no np nq nr b">GET</code>请求，并用响应数据创建一个新模型。</p><p id="693a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，如果请求失败，它将创建一个<code class="fe no np nq nr b">ShowModel</code>或返回一个<code class="fe no np nq nr b">HttpErrorResponseModel</code>。这和上面的一样，但是更干净。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="8d93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要修改特定视图的API数据。将其直接传递给reducer，让<code class="fe no np nq nr b">Selectors</code>为视图转换API数据。</p><p id="732e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我曾经经历过这样的混乱，当API数据为一个特定的视图而改变时，几个月后才意识到相同的API数据将被用于一个完全不同的视图。</p><p id="4112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">帮自己一个忙，保持API所提供内容的一对一映射，这样每个人都可以更容易地从原始结构中查看数据。</p><p id="d4e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能已经注意到了一些例子中的<code class="fe no np nq nr b"><a class="ae ky" href="https://github.com/codeBelt/react-redux-architecture/blob/JavaScript/src/utilities/HttpUtility.js" rel="noopener ugc nofollow" target="_blank">HttpUtility</a></code>。我不打算详细介绍它，但在幕后它使用了<a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>。</p><p id="7fd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许我将API错误转换成一个<code class="fe no np nq nr b">HttpErrorResponseModel</code>,它有助于确定动作是否有有效的负载。此外，如果我想的话，修复bug或更改到另一个库也很容易，因为我只需要更改一个文件。</p><p id="ebed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">HttpUtility</code>也是标准化数据的好地方。阅读我的文章<a class="ae ky" href="https://medium.com/swlh/dont-let-api-data-structure-your-javascript-application-7fa7fd5a590f" rel="noopener">不要让Api数据结构化你的JavaScript应用程序</a>以获得更多信息。</p><p id="54f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道<code class="fe no np nq nr b">environment.api.shows</code>是关于什么的，看看<a class="ae ky" href="https://blog.usejournal.com/my-awesome-custom-react-environment-variables-setup-8ebb0797d8ac" rel="noopener ugc nofollow" target="_blank">我的令人敬畏的自定义React环境变量设置</a>。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9d59" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">还原剂</h1><p id="1411" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">Reducers是较小的代码段，通过动作添加、删除或编辑数据来管理全局<code class="fe no np nq nr b">store</code>。</p><p id="3b4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">reducers很简单，它们监听在存储区中添加、删除或编辑数据的操作。</p><p id="9737" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，我有一个名为<code class="fe no np nq nr b">ShowsReducer</code>的静态类，它有一个<code class="fe no np nq nr b">initialState</code>属性和一个将数据添加到存储中的<code class="fe no np nq nr b">reduce</code>方法。我想指出的是，我不在同一个reducer中处理错误动作。</p><p id="bae0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个<code class="fe no np nq nr b">ErrorReducer</code>将处理错误，你可以阅读我的文章<a class="ae ky" href="https://medium.com/@robertsavian/react-redux-api-loading-errors-e783972c5424" rel="noopener"> React/Redux API加载&amp;错误</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="f7fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把上面的减速器做的更干净更快。我们将使用<em class="oq">继承</em>，在这里我们抽象出一些逻辑，并专注于必要的东西。</p><p id="3e32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，通知如何<code class="fe no np nq nr b">ShowsReducer</code> <code class="fe no np nq nr b">extends</code> <code class="fe no np nq nr b">BaseReducer</code>。这允许我们将上面例子中的<code class="fe no np nq nr b">reducer</code>方法移动到它自己的文件(<code class="fe no np nq nr b">BaseReducer</code>)中，这样不是所有的reducer文件都必须包含它。</p><p id="78ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与上面的一个重要区别是我去掉了前缀<code class="fe no np nq nr b">static</code>，使它成为一个普通的类，这样它就可以扩展<code class="fe no np nq nr b">BaseReducer</code>。注意我们是如何使用action <code class="fe no np nq nr b">type</code>常量作为方法名的:</p><p id="9e59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">[ShowsAction.REQUEST_SHOW_FINISHED](state, action){}</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="61f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看上面的<code class="fe no np nq nr b">BaseReducer</code>，就会看到<code class="fe no np nq nr b">reducer</code>的方法。</p><ul class=""><li id="e4f3" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe no np nq nr b">Line 5</code>:获取与<code class="fe no np nq nr b">action.type</code>匹配的类方法的访问权。</li><li id="a262" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Line 7</code>:如果找不到方法(<code class="fe no np nq nr b">!method</code>)或者动作错误(<code class="fe no np nq nr b">action.error</code>)，则返回当前<code class="fe no np nq nr b">state</code>。</li><li id="cef1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">Line 11</code>:用<code class="fe no np nq nr b">state</code>和<code class="fe no np nq nr b">action</code>参数调用找到的方法，该方法将返回Redux将使用的修改后的<code class="fe no np nq nr b">state</code>。</li></ul><h2 id="d21d" class="oa mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated">减根剂</h2><p id="9847" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">下面是使用Redux的<code class="fe no np nq nr b">combineReducers</code>的文件，在<code class="fe no np nq nr b">line 12</code>上你可以看到如何设置/添加使用<code class="fe no np nq nr b">BaseReducer</code>的减速器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="2f35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我尽量保持我的减速器简单，把繁重的代码工作留给<code class="fe no np nq nr b">Selectors</code>。</p><p id="9329" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你需要在你的reducers中做一些额外的逻辑，创建一个类似下面的(<code class="fe no np nq nr b">_complicatedToSimple</code>)的helper方法，或者把它抽象成一个可以重用的工具文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="62d8" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">选择器(查看业务逻辑)</h1><p id="6d47" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">选择器包含将<code class="fe no np nq nr b">store</code>数据转换成特定视图数据的业务逻辑，因此您可以将不必要的逻辑排除在视图和归约器之外。</p><p id="56a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe no np nq nr b">Selectors</code>是您为视图生成不同数据对象的大部分逻辑的地方。</p><p id="afce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我甚至在我的<a class="ae ky" href="https://github.com/reduxjs/redux-thunk" rel="noopener ugc nofollow" target="_blank"> Thunks </a> / <a class="ae ky" href="https://github.com/redux-saga/redux-saga" rel="noopener ugc nofollow" target="_blank"> Sagas </a>中使用选择器来创建复杂的请求对象，这样我的视图调度动作就不必在视图中构建有效负载。</p><p id="11c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你看下面的代码，我使用一个静态类来组织我的逻辑，在最底层，我有一个<a class="ae ky" href="https://github.com/reduxjs/reselect" rel="noopener ugc nofollow" target="_blank">重选</a>T3】。</p><p id="5c28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢将两者分开，这样我就可以清楚地看到哪个reducer<code class="fe no np nq nr b">createSelector</code>关心，而让静态类只关心它需要对数据做什么。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="ccd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有一件事我想强调的话，那就是总是尝试在<code class="fe no np nq nr b">Selectors</code>中完成你的大部分逻辑，而你的应用程序的其余部分只是传递和显示数据。</p><p id="0ee1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。如果你看到你喜欢的东西，请给我留言。</p><p id="30c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这篇文章中已经介绍了很多，但是如果你想了解更多的细节，请查看我的相关文章:</p><div class="or os gp gr ot ou"><a href="https://medium.com/@robertsavian/react-redux-api-loading-errors-e783972c5424" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">反应/减少API加载和错误</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">我建议从示例源代码中寻找，但是我的所有操作都是与“效果”文件一起工作的(例如ShowsEffect)…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://blog.usejournal.com/my-awesome-custom-react-environment-variables-setup-8ebb0797d8ac" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">我很棒的自定义React环境变量设置</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">我想展示如何为我的JavaScript项目设置环境变量。这种技术不仅用于创造反应…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">blog.usejournal.com</p></div></div><div class="pd l"><div class="pj l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://medium.com/better-programming/improving-redux-reducers-in-3-ways-bf297743b21e" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">从3个方面改进Redux减速器</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">对象、类和函数式编程</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pk l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://medium.com/swlh/protect-your-javascript-applications-from-api-data-401a73c7c80b" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">保护您的JavaScript应用程序免受Api数据的影响</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">在这篇文章中，我将谈论开发客户端时你可以做的最重要的事情之一…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pl l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://medium.com/swlh/dont-let-api-data-structure-your-javascript-application-7fa7fd5a590f" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">不要让Api数据构造您的JavaScript应用程序</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">当我创建应用程序时，一致性对我来说很重要。所以我喜欢遵循的一个标准是将我所有的代码放在…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pm l pf pg ph pd pi ks ou"/></div></div></a></div><p id="be43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，请分享它，关注我，阅读我的其他<a class="ae ky" href="https://medium.com/@robertsavian" rel="noopener">文章</a>和/或使用下面我的推荐链接注册Medium。谢谢！</p><div class="or os gp gr ot ou"><a href="https://medium.com/@robertsavian/membership" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">通过我的推荐链接加入Medium—Robert S(代码带)</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pn l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>