<html>
<head>
<title>10 Ways of Iterating Over a List in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中遍历列表的10种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10-ways-of-iterating-over-a-list-in-python-f068da25875f?source=collection_archive---------9-----------------------#2022-08-02">https://betterprogramming.pub/10-ways-of-iterating-over-a-list-in-python-f068da25875f?source=collection_archive---------9-----------------------#2022-08-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d1a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">可以不使用<code class="fe ki kj kk kl b">for</code>关键字循环吗？</h2></div><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/9b40af75a01600ec9ddaf585e4e99742.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*89MtvQyeyOA3tJRb"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://unsplash.com/es/@tine999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tine ivani</a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="5247" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">Python是一种很棒的编程语言。这是一个简单而强大的工具，只需几行代码就可以完成复杂的任务。此外，Python非常灵活，提供了无数标准和非标准的方法来实现相同的目标。</p><p id="1a2c" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在本文中，我将向您展示Python中遍历列表的十种方法。</p><h1 id="02c3" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">经典的For-Each循环</h1><p id="4490" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">遍历列表的第一种也是最常见的方法是直接在列表上使用Python的<code class="fe ki kj kk kl b">for</code>循环:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="d946" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">经典的射程弧线</h1><p id="a49d" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">这是另一种传统的循环方法，如此平庸以至于不需要演示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="d80b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">非Pythonic While循环</h1><p id="acd4" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">现在我们开始研究一些不太常见的方法，比如在一个<code class="fe ki kj kk kl b">while</code>循环中手动更新列表索引:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0ed5" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">还是很无聊吧？现在是时候用下面的方法来预热派对了。</p><h1 id="0b04" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">破解内置函数</h1><p id="ee52" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">黑客是一种通过非标准手段实现目标的艺术，例如，通过制作东西(软件、对象等)。)以不希望的方式行事。</p><p id="d6f0" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">所以，我们来黑一下<code class="fe ki kj kk kl b">sorted()</code>内置函数。它通常接受一个iterable并返回它的排序副本。但是，您可以传递一个可选键来定义自己的排序标准。但是，如果您使用这个键函数对列表项执行操作，会怎么样呢？</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="d1a0" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">像SQL注入这样的代码注入攻击不也是这样工作的吗？的确如此。</p><h1 id="130d" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">手动管理列表迭代器</h1><p id="b0da" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">这是一种更技术性的方法，涉及迭代器:允许遍历容器(通常是列表)的对象，不知道其内部结构。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c165" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这也是经典for-each循环的内部工作方式。</p><h1 id="3656" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">将列表视为非破坏性队列</h1><p id="8603" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">这些方法都不是特别有性能，但是在每次迭代中弹出并随后重新指定列表项怎么样？</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="456e" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">注意，即使我们在列表的长度范围内循环，我们也不会使用下标操作符<code class="fe ki kj kk kl b">[]</code>。</p><h1 id="37b9" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">解析列表的字符串表示</h1><p id="00bf" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">这种方法利用了列表的内置字符串表示。但是，请注意，这种算法只适用于基本类型，因为复杂对象被表示为它们的类型名和内存地址，如果不实现特定于类型的解析器，就很难将其转换为Python对象。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="f697" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">然而，既然我们使用了列表理解和for-each循环，这不是有点欺骗吗？如果你不能忍受循环，不要担心，下一个选项中没有<code class="fe ki kj kk kl b">for</code> s。</p><h1 id="c0cc" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">使用递归迭代</h1><p id="1867" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">使用一种更函数化的方法，我们可以递归地遍历一个列表，并对其元素应用一个谓词:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="50d9" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">谁说循环和递归不能很好地结合在一起？</p><h1 id="a89c" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">解析列表的字节表示</h1><p id="1172" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">尽管原始字节和Python通常不能很好地协同工作，但您仍然可以将列表转换为字节数组，然后从原始字节中重建项目。注意，这个方法也不适用于复杂的对象，因为我们不能从它的原始字节重建一个对象。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e36d" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">不过，这很不雅观。让我们看看下面的方法是否能做得更好。不使用Python，用Python迭代一个列表怎么样？</p><h1 id="14d2" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">处理C中的迭代</h1><p id="4eb4" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">对于这种方法，我们将编写一个C扩展来处理Python列表的迭代。为了保持文章简洁，我不打算详细解释为Python创建C扩展的整个过程。如果你有兴趣了解更多关于这个话题的信息，请查看<a class="ae lc" rel="noopener ugc nofollow" target="_blank" href="/speed-up-your-python-codebases-with-c-extensions-94859875eb70">这个指南</a>。</p><p id="a3c6" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">首先，让我们创建C代码。如果你不懂C，你可能只看注释。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="cf44" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">然后创建<code class="fe ki kj kk kl b">setup.py</code>脚本来构建扩展:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2e83" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">最后，构建并安装C扩展:</p><pre class="kn ko kp kq gt my kl mz na aw nb bi"><span id="5bcb" class="nc ma it kl b gy nd ne l nf ng">python3 setup.py build<br/>python3 setup.py install --user</span></pre><p id="cf61" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在，您可以轻松地在Python脚本中导入新的C模块，因为它是一个普通的库。代码如下:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="26ec" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">事实上，你可以在不使用Python的情况下迭代一个列表。但是，您应该注意到，由于C是一种静态类型的编程语言，您不能将任何参数类型传递给用它编写的函数。</p><p id="ac6a" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果您想实现一个通用的<code class="fe ki kj kk kl b">c_iter()</code>函数，它可以接受任何列表类型，那么您需要在C文件中不同地处理每个特定的类型，或者简单地为每个数据类型定义一个不同的C函数(<code class="fe ki kj kk kl b">c_iter_int()</code>、<code class="fe ki kj kk kl b">c_iter_float()</code>、<code class="fe ki kj kk kl b"> c_iter_str()</code>等等)。).</p><h1 id="1997" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="7cb7" class="pw-post-body-paragraph ld le it lf b lg mr ju li lj ms jx ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">Python中有无数种遍历列表的方法。有些是有意义的，并且被认为是最佳实践，比如使用for-each循环(与相比，<a class="ae lc" rel="noopener ugc nofollow" target="_blank" href="/python-loops-performance-compared-the-fastest-is-b4638744a1ff"> Python循环)。其他的被认为是概念验证，不应该在任何生产代码库中使用。</a></p><p id="d82f" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我希望你喜欢这篇文章。如果你知道任何其他有趣的在Python中循环列表的方法，请在评论中分享。感谢阅读！</p><p id="b66b" class="pw-post-body-paragraph ld le it lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这是我探索用Python实现简单任务的各种有趣和过度设计的方法的系列文章的第二篇。如果你错过了，你可以在下面找到它:</p><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/7-ways-of-reading-a-file-in-python-855340b002dc"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">Python中读取文件的7种方式</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">你能在不打开文件的情况下读取它吗？</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">better编程. pub</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kw nk"/></div></div></a></div></div></div>    
</body>
</html>