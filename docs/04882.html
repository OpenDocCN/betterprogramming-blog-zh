<html>
<head>
<title>How to Merge Deeply Nested Objects in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中合并深度嵌套的对象</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-merge-deeply-nested-objects-in-javascript-27e12107480e?source=collection_archive---------3-----------------------#2020-05-19">https://betterprogramming.pub/how-to-merge-deeply-nested-objects-in-javascript-27e12107480e?source=collection_archive---------3-----------------------#2020-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b103" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">正确合并嵌套对象的方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c653b678051c10e500025724c226ce47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YJhHKdhldwjTpP0v"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@emilep?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">émile Perron</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="819e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在很多情况下，我们需要合并两个嵌套很深的对象。</p><p id="a9f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将看到如何正确地处理这个问题。</p><p id="7b8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比方说，我们有一个这样的<code class="fe ls lt lu lv b">user</code>对象:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="fad4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们想用新值更新这个对象。例如，当更新他们的用户配置文件时，用户输入新的值，因此我们需要将以前的对象与新的更新对象合并。</p><p id="8437" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果用户只更新一些值，我们将得到这样一个对象:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="cafb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，<code class="fe ls lt lu lv b">user</code>对象有一个<code class="fe ls lt lu lv b">location</code>属性，其中包含了<code class="fe ls lt lu lv b">city</code>和<code class="fe ls lt lu lv b">country</code>属性。但是在<code class="fe ls lt lu lv b">updates</code>对象中，我们没有<code class="fe ls lt lu lv b">country</code>属性，那么如何合并这些对象呢？</p><p id="d741" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们尝试使用一些已知的方法。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><h1 id="a981" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">使用Object.assign</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="1d31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您所看到的，来自<code class="fe ls lt lu lv b">update</code>对象的<code class="fe ls lt lu lv b">location</code>属性已经完全替换了之前的<code class="fe ls lt lu lv b">location</code>对象，因此<code class="fe ls lt lu lv b">country</code>属性丢失了。</p><p id="b324" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是因为<code class="fe ls lt lu lv b">Object.assign</code>做的是<a class="ae kv" href="https://codepen.io/myogeshchavan97/pen/ZEbmZoq?editors=0011" rel="noopener ugc nofollow" target="_blank">浅合并</a>而不是深合并。浅合并意味着它将只在第一级而不是嵌套级合并属性。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><h1 id="8809" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">使用扩展运算符</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="a247" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，这也产生了相同的结果，因为<code class="fe ls lt lu lv b">Object.assign</code>和<code class="fe ls lt lu lv b">spread operator</code>只是浅层合并了对象。</p><p id="9221" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了解决这个问题并正确合并两个深度嵌套的对象，我们可以使用由<a class="ae kv" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> Lodash </a>库提供的<code class="fe ls lt lu lv b">merge</code>方法。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><h1 id="75f7" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">使用Lodash合并</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="e9a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，它像预期的那样工作，并且<code class="fe ls lt lu lv b">country</code>属性是<a class="ae kv" href="https://codepen.io/myogeshchavan97/pen/xxwQNOZ?editors=0011" rel="noopener ugc nofollow" target="_blank">没有在合并中丢失</a>。</p><p id="e9cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Lodash是最好的实用程序库，它为现实生活中的应用程序提供了很多函数。要探索其他有用的<code class="fe ls lt lu lv b">lodash</code>方法，请查看<a class="ae kv" href="https://levelup.gitconnected.com/extremely-useful-lodash-methods-b38f121fea7e" rel="noopener ugc nofollow" target="_blank">我以前的文章</a>。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><p id="ae2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看我最近出版的<a class="ae kv" href="https://master-redux.yogeshchavan.dev/" rel="noopener ugc nofollow" target="_blank">掌握Redux </a>课程。</p><p id="203a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本课程中，您将构建3个应用程序以及一个点餐应用程序，您将了解:</p><ul class=""><li id="4c27" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">基本和高级冗余</li><li id="745b" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">如何管理数组和对象的复杂状态</li><li id="0142" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">如何使用多个减速器管理复杂的冗余状态</li><li id="cb91" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">如何调试Redux应用程序</li><li id="5f02" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">如何在React中使用Redux使用react-redux库让你的app反应性。</li><li id="65fa" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">如何使用redux-thunk库处理异步API调用等等</li></ul><p id="37bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将从头开始构建一个完整的<a class="ae kv" href="https://www.youtube.com/watch?v=2zaPDfCKAvM" rel="noopener ugc nofollow" target="_blank">订餐应用</a>，集成stripe以接受支付，并将其部署到生产中。</p><p id="87eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">别忘了订阅我的每周简讯，里面有惊人的技巧、窍门和文章，直接在这里的收件箱</strong> <a class="ae kv" href="https://yogeshchavan.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">中。</strong>T12】</a></p></div></div>    
</body>
</html>