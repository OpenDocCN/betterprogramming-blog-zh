<html>
<head>
<title>Build a Discord Bot Using Node.js, Discord.js, and OpenAI GPT-3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js、Discord.js和OpenAI GPT-3构建一个Discord Bot</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-an-ai-to-your-discord-server-with-node-js-and-gpt-3-198b538cc05b?source=collection_archive---------0-----------------------#2022-08-07">https://betterprogramming.pub/add-an-ai-to-your-discord-server-with-node-js-and-gpt-3-198b538cc05b?source=collection_archive---------0-----------------------#2022-08-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de13" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">给你的不和谐服务器添加一个人工智能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/543f24288e1570cb6f33442687dee242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3BZ1tI13cSWcvNDZOTf33Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">人工智能生成的机器人追逐尖叫男子的照片蒙太奇</p></figure><p id="f45f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">人工智能现在正在蓬勃发展，许多开发人员希望开始用它创建项目。然而，训练你自己的人工智能在你的项目中使用它对初学者来说是相当具有挑战性的。</p><p id="4e15" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">幸运的是，近年来与人工智能的交互变得容易得多，这要归功于OpenAI等公司发布的API，用于与他们大型的预训练神经网络进行交互。</p><p id="a264" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本教程中，我们将构建一个genius Discord bot，它可以回答复杂的问题并完成有用的任务。为了创建这个机器人，我们将使用Node.js、Discord.js和GPT-3的OpenAI API，这是有史以来最大、最智能的神经网络之一。</p><p id="e5df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以事不宜迟，让我们开始体验一下人工智能吧！</p><p id="c888" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更新:与此同时，Discord API和Discord.js有了突破性的变化。在本教程的最后找到bot.js的更新代码。</p><h1 id="2651" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">你需要什么(先决条件)</h1><p id="4d92" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">要创建我们的项目，您需要几个帐户，并安装必要的软件，如下所示:</p><p id="7b44" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">账户:</p><ul class=""><li id="db0d" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">OpenAI beta账户(在此注册<a class="ae my" href="https://openai.com/api/" rel="noopener ugc nofollow" target="_blank"/>)</li><li id="4dbe" class="mp mq iq kx b ky mz lb na le nb li nc lm nd lq mu mv mw mx bi translated">不和谐账号(此处下载并注册<a class="ae my" href="https://discord.com/" rel="noopener ugc nofollow" target="_blank"/>)</li></ul><p id="1e5e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">软件安装:</p><ul class=""><li id="f2a9" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">Node.js(从<a class="ae my" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">这里</a>下载安装)</li><li id="ea63" class="mp mq iq kx b ky mz lb na le nb li nc lm nd lq mu mv mw mx bi translated">VS代码(从<a class="ae my" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">这里</a>下载安装)。如果您还没有代码编辑器</li></ul><h1 id="d150" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">不和谐准备</h1><h2 id="d30e" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第一步:登录Discord并创建一个服务器</strong></h2><p id="c373" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">如果你还没有的话。请注意，您必须拥有服务器或认识有权在后续步骤中添加bot帐户的人。您可以通过单击左侧菜单中的“+”图标来创建新的服务器。</p><h2 id="c2ce" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤2:添加新的开发者应用</strong></h2><p id="5aef" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">转到<a class="ae my" href="https://discord.com/developers/applications" rel="noopener ugc nofollow" target="_blank">https://discord.com/developers/applications</a>并点击右上角的“新建应用程序”按钮创建一个新应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/6f72f2baa4fa396045569a8c7712def4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7AIQPcvcEsnSicNJFxRGpQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">点击左上方的“新建应用程序”按钮，添加一个新的开发者应用程序。</p></figure><h2 id="28a3" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第三步:为应用程序命名</strong></h2><p id="b63c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">比如“AiBot”然后点击“创建”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/84b19c2d8f945f5df6ed0b1ba784b2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*E8VNLVxJ46LH79P2XE7GJQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">为应用程序命名，然后单击“创建”</p></figure><h2 id="6851" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第四步:创建一个机器人</strong></h2><p id="8448" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">转到左侧菜单中的“机器人”部分，然后单击屏幕右侧的“添加机器人”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/8116812ea3c585054108cb87a61ba62d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRdXOcOUSqdwmY63lYc-gw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">转到应用程序的bot部分。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/66febf9dd0904da78aad8af972d6277f.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*v6_ff36u72021ASHj0ks3w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">通过点击按钮添加一个机器人。</p></figure><h2 id="b183" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated">第五步:创建一个机器人令牌</h2><p id="3b50" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">单击“重置令牌”按钮创建新的bot令牌。此令牌是秘密的，不应与其他人共享。将其保存在文本文件中以备后用(令牌仅显示一次)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/c20f102c2054318e97cb45cc5b80c221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zWs6YM75CWSzMNcf0Ml-8w.png"/></div></div></figure><h2 id="ba87" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第六步:设置bot的作用域和权限。</strong></h2><p id="b101" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">转到设置菜单的OAuth2 &gt;URL生成器部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/34c93a9c2b40fc3f15d609a0e72e9507.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*Haucpy7tauXXrekAS7tofQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">转到OAuth2 &gt; URL生成器</p></figure><p id="f9fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将范围设置为“bot”，并将权限设置为“阅读消息/查看频道”和“发送消息”这将使机器人能够在服务器聊天中读写消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/10e43470b1e74b546fde6b587e7149eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EOTN22AjD3955LaT0RfDuw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将范围设置为“bot”</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/c862aa9bdcbf85bb18af8e790e2e952a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rQ6-VYQHRmKh2tC2B1L8Ow.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">设置权限，使机器人能够在聊天中读写。</p></figure><h2 id="ce40" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第七步:复制邀请网址并粘贴到浏览器中</strong></h2><p id="d131" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">继续向下滚动，找到“生成的URL”它看起来会像这样:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="b6aa" class="ne lt iq nz b gy od oe l of og"><a class="ae my" href="https://discord.com/api/oauth2/authorize?client_id=989592867871801434&amp;permissions=3072&amp;scope=bot" rel="noopener ugc nofollow" target="_blank">https://discord.com/api/oauth2/authorize?client_id={YOUR_CLIENT_ID}&amp;permissions=3072&amp;scope=bot</a></span></pre><p id="c07d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将此URL粘贴到浏览器的搜索栏中。选择要授权bot的服务器，然后单击“下一步”(“Weiter”)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/f1b1188699249d4d186c8924e8f06df6.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*nw6fTpPShzU4WdT6W3AQDw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">为您的服务器授权您的bot</p></figure><p id="1e3c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接受必要的权限并点击“授权”完成</p><h2 id="b785" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第八步:在服务器上欢迎你新创建的bot！</strong></h2><p id="1b8d" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">关闭选项卡并返回到您的服务器。如果一切顺利，你会在服务器成员中找到你的机器人。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2056aa5b2f239d02cf4f706e8ff3f309.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*xCpfCUNWi5ktvvMKuSGFbQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">如果一切顺利，您应该能够在服务器上找到这个机器人</p></figure><h1 id="b37c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">将人工智能机器人带入生活</h1><p id="1132" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">现在这个机器人在我们的服务器中是可见的，让我们用代码让它做一些事情。</p><h2 id="37c3" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤9:初始化一个新项目</strong></h2><p id="aaa0" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">创建一个新文件夹，并在计算机上的首选位置将其命名为类似“aiBot”的名称。我在桌面上创建了我的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/145ffdb9c8ac1e0b2673189b627c5539.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*LYO2FUTrhMcmpHTCOg71Vw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在您的首选位置创建一个新文件夹来保存代码</p></figure><p id="9f3e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，在File &gt; Open Folder下打开VSCode应用程序和新创建的文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/72b7a28bbec8d8f70660e576c12dce10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lwMhaOUBiBB4MehZTf9mxA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在代码编辑器中打开文件夹</p></figure><p id="2534" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，在菜单栏中的终端&gt;新终端下打开一个新的终端。一个新的终端应该从底部弹出。</p><p id="2260" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在终端中，使用以下命令初始化新的Node.js应用程序:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="6d50" class="ne lt iq nz b gy od oe l of og">npm init -y</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/0ff08f3177d3181b6a803947c4c58605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2GxUhOS8V0EyWTX6HHhC9Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">初始化新的节点应用程序</p></figure><p id="5814" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后按回车。在左边的文件浏览器中，您会看到执行该命令创建了一个新的<code class="fe om on oo nz b">package.json</code>文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi op"><img src="../Images/b01b77cdfada2ce3724bfef915821684.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*GwKtNOlAda5kSg7vmr7P4A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建了一个新的package.json文件</p></figure><h2 id="c602" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤10:创建一个包含僵尸代码的新文件</strong></h2><p id="c079" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">编辑<code class="fe om on oo nz b">package.json</code>文件，在启动时执行这个bot代码文件中的脚本。</p><p id="8cd3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">单击“新建文件”图标创建一个新的节点脚本。然后将文件命名为<code class="fe om on oo nz b">bot.js</code>，并在文件中编写一些hello world代码。别忘了保存。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/433d26b9872770038bf5da532ae7dc64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTQ-F9BraKNc7FXhnwZVhA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建一个新文件，给它一个名字，用hello world代码填充这个文件</p></figure><p id="4a1b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后转到<code class="fe om on oo nz b">package.json</code>文件，编辑如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/f12a930cc4ad2d994ba72a4293a04ae2.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*yvz0EpN9AfduUICX4XiNfA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">像截图中一样，用“main”和“scripts”下面的代码行进行修改</p></figure><p id="11c4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您可以执行以下命令:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="c5bf" class="ne lt iq nz b gy od oe l of og">npm start</span></pre><p id="93cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在终端，它应该打印“你好人工智能机器人。”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/ed54d230d99fc964227328f4fee3d417.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*TEkwo2pK57wMLrNnUhS9aw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">运行上面的命令会打印出“Hello AI bot！”到终端</p></figure><h2 id="c082" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤11:安装Discord.js依赖项</strong></h2><p id="e80f" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">现在我们可以运行<code class="fe om on oo nz b">bot.js</code>脚本了，让我们安装Discord.js库来与Discord交互。</p><p id="5bd0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在终端中，运行:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="128e" class="ne lt iq nz b gy od oe l of og">npm install discord.js</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/c58f2374cf78931ce877d39541ee4189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*brzaxoi35Dag8RmbzoO5WQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安装discord.js库</p></figure><p id="1e4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将安装Discord.js库，以便轻松地与Discord API交互。如果您只收到警告，应该没有问题。但是，如果有错误，请在线搜索解决方案。</p><h2 id="a0af" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第12步:编写让你的人工智能机器人活起来的代码</strong></h2><p id="3417" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">打开<code class="fe om on oo nz b">bot.js</code>文件。在那里，编写以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="0d8b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将<code class="fe om on oo nz b">&lt;YOUR_SAVED_BOT_TOKEN&gt;</code>替换为您在本教程的步骤5中保存以备后用的令牌，并将其放在引号内。然后保存文件。</p><p id="43f7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个令牌不应该和任何人分享，所以不要把这个教程的代码直接推送给GitHub。可以选择将“dotenv”软件包与“dotenv”结合使用。gitignore”文件来安全地存储您的令牌，但是对于本教程，我想把重点放在简单性而不是安全性上。</p><h2 id="86c3" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第十三步:是(一)直播！</strong></h2><p id="c6c4" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">在终端中运行以下命令，并查看您的Discord服务器。这个机器人现在应该在线了。</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="5c51" class="ne lt iq nz b gy od oe l of og">npm start</span></pre><p id="adcd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">故障排除:</strong>如果您收到类似“错误:找不到模块‘节点:事件’”的错误，请确保您安装的Node.js版本高于版本16.6.0。您可以使用以下命令检查当前的节点版本:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="d527" class="ne lt iq nz b gy od oe l of og">node -v</span></pre><p id="de64" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您的版本低于16.6.0版本，请访问<a class="ae my" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank"> Node.js </a>网站并安装一个更新的版本。您可以随时使用以下命令关闭卡在终端中的命令:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="a247" class="ne lt iq nz b gy od oe l of og">[Ctrl + C] (on Windows) or [Cmd + C] on MacOS</span></pre><p id="89e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">尝试重新运行“npm start”命令，并再次检查您的Discord服务器。你现在应该看到你的AI机器人在线了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/a6258fe40af3e24f3d883a6d0c0aacb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*g1PlG7JBIiQa-OpZdjB5lw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">感到高兴，因为你的人工智能机器人现在在线:D</p></figure><h2 id="8e53" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤14:让AI机器人在服务器上回答消息</strong></h2><p id="bf03" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">编辑<code class="fe om on oo nz b">bot.js</code>文件，使用下面的代码来回答包含感叹号("！")作为第一个角色。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="2a98" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">保存您的更改。通过在终端中按“Ctrl + C”并再次运行“npm start”来重新启动应用程序。</p><p id="582a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在在服务器上发送一条以感叹号作为第一个字符的消息。人工智能机器人现在应该回应“你好，来自人工智能机器人。”它不应该响应不具有所需格式的消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/15a0ad8cb6de136804de6e17386bc974.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*eOOSpL1IV--TJhoE2SiNkg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">机器人对以感叹号开头的消息的回复</p></figure><h1 id="a6e6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">准备OpenAI的GPT-3</h1><p id="8407" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">既然我们已经让机器人响应消息，让我们让它变得智能。为此，我们必须从OpenAI网站获得一个令牌。</p><h2 id="cf2c" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤15:获取一个OpenAI API令牌</strong></h2><p id="034c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">去<a class="ae my" href="https://beta.openai.com/account/api-keys" rel="noopener ugc nofollow" target="_blank">https://beta.openai.com/account/api-keys</a>。在创建本教程时，GPT-3服务仍处于测试阶段。如果您稍后按照教程操作，上述URL可能已经更改。如果是这样的话，登录你的OpenAI账户，进入网站右上角的个人页面。在那里，点击“个人”并选择一个选项，如“查看API密钥”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/0c367a92fa467599f7e90fb3dda134cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*i_i3feK7M84wJ5jap3758g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在API密钥URL发生变化的情况下查找API密钥</p></figure><p id="e0a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你会看到这样一个部分:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/fc418d1171a504a2231a28560378a102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u7DfEtq20lzC67PIF06tyw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">OpenAI网站上的API密钥部分</p></figure><p id="e0dd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">单击“显示”并将API密钥保存在安全的位置。再次强调…你不应该与任何人分享这些API密匙，或者把它们上传到你的GitHub。如果还没有密钥，单击“创建新的密钥”来创建一个新的API密钥。</p><p id="04f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，有了免费帐号，你可以问AI的问题的大小(可能还有数量)会有限制。</p><h1 id="da29" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">连接OpenAI的GPT 3号</h1><p id="ac4c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">现在，您已经从OpenAI网站获得了必要的令牌，让我们编写代码来与GPT-3进行交互。</p><h2 id="249f" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第十六步:安装OpenAI库</strong></h2><p id="2d61" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">前往VSCode。如果bot当前正在运行，请在终端中键入<code class="fe om on oo nz b">Ctrl + C</code>将其停止。</p><p id="8918" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，在终端中使用以下命令安装Node.js的OpenAI库:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="1339" class="ne lt iq nz b gy od oe l of og">npm install openai</span></pre><h2 id="61a7" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第17步:创建一个脚本与GPT-3互动</strong></h2><p id="7494" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">在VSCode中，创建一个名为<code class="fe om on oo nz b">ai.js</code>的新文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/2600290f959128f4b3540492cc7ebe07.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*QPp-FISfN0jUK9YjA4pD4w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建一个名为“ai.js”的新脚本文件</p></figure><p id="6bb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在把下面的代码粘贴进去，用第15步中的API令牌替换掉<code class="fe om on oo nz b">&lt;YOUR_OPENAI_API_KEY&gt;</code>部分，并确保把它放在双引号内。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="7071" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">步骤18:测试与OpenAI的GPT3的连接</strong></h2><p id="0c39" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">保存文件，前往终端。在那里，运行以下命令:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="4707" class="ne lt iq nz b gy od oe l of og">node ai.js</span></pre><p id="1477" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果一切正常，你应该会看到人工智能的答案被打印到终端上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/cf3e18f6de2f27cb362dc45a955cbad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*zhd0oqQfFNTi12h_gb59_w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在执行“node ai.js”之后，您应该会得到来自GPT-3的响应</p></figure><h1 id="1e00" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">现在让你的AI机器人超级智能！</h1><p id="223c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">快好了！祝贺您在教程中走到这一步！你真棒！现在，让我们把所有的部分粘在一起，让你的人工智能机器人达到一个超级天才的水平。</p><h2 id="0a93" class="ne lt iq bd lu nf ng dn ly nh ni dp mc le nj nk me li nl nm mg lm nn no mi np bi translated"><strong class="ak">第19步:将你的不和谐机器人连接到GPT-3 </strong></h2><p id="8d43" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">转到你的<code class="fe om on oo nz b">ai.js</code>文件。在那里，删除“ask”函数的示例调用，并使用<code class="fe om on oo nz b">module.exports</code>导出该函数。此外，删除控制台日志并在“询问”功能中返回答案。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="27d6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在转到<code class="fe om on oo nz b">bot.js</code>文件，应用以下更改:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="3358" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不要忘记保存您的更改。现在，最后一次，用<code class="fe om on oo nz b">Ctrl + C</code>停止你的机器人运行，然后用:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="8b1a" class="ne lt iq nz b gy od oe l of og">npm start</span></pre><p id="60e8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，前往你的不和谐服务器，检查是否一切正常。在聊天中用一个问题或任务写一条消息，并在开头加上感叹号。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/9cf551eccf783654c4d6b5f7a11128d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*zS9bVWRsF4YdMtGEr-7MJw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">提示人工智能机器人创建一个包含有用信息的表格，并查看结果</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/4cf638d4a53a3a2acbfa972daebb4030.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*WyJ-mmXR67vXj6M6v9hAqA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">悲伤却真实。不过，我希望在完成这个教程后能加薪</p></figure><h1 id="cb12" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">恭喜你！</h1><p id="aeeb" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">你成功了！您使用Node.js、Discord.js和OpenAI API创建了第一个AI Discord Bot。现在你可以向你的朋友炫耀你的机器人，或者随便问他们你感兴趣的问题！</p></div><div class="ab cl pe pf hu pg" role="separator"><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj"/></div><div class="ij ik il im in"><p id="6b8e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望你能从这篇(冗长的)教程中获得乐趣！如果您在代码中遇到任何问题或bug，请随时联系我。</p><p id="2d40" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你喜欢这个教程，我也很高兴收到你的反馈！它给了我创造更多像这样的教程的能量！:)</p><p id="456c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">干杯！</p><h1 id="f1c0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">更新</h1><p id="3b4e" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">与此同时，Discord API和Discord.js得到了更新，带来了突破性的变化。如果您的不和谐机器人没有回复，请按照以下步骤操作:</p><p id="c203" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">更新至较新版本的discord.js: </strong></p><p id="9b87" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要获得我测试的版本，用<code class="fe om on oo nz b">npm uninstall discord.js</code>卸载discord.js，然后运行<code class="fe om on oo nz b">npm install discord.js@14.6.0</code>。</p><p id="5aba" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">启用特权网关意图:</strong></p><p id="7509" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Discord开发人员门户中，转到:应用程序↦设置↦ Bot ↦特权网关意图，并设置消息内容意图的标志。否则，您将不会收到发送到服务器的消息内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/21438fad0cca23da654dea362510692d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H0_zBIinQ1DwTLie86UwPw.png"/></div></div></figure><p id="03ee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">更新bot.js代码:</strong></p><pre class="kg kh ki kj gt ny nz pm bn pn po bi"><span id="0a3f" class="pp lt iq nz b be pq pr l ps og">//in bot.js<br/><br/>const { ask } = require("./ai.js"); //import the "ask" function from the "ai.js" file<br/>const { Client, Events, GatewayIntentBits } = require('discord.js'); //v14.6.0<br/>const token = "&lt;YOUR_BOT_TOKEN&gt;";<br/><br/>// Create a new client instance<br/>const client = new Client({<br/>  intents:<br/>    [GatewayIntentBits.Guilds,<br/>    GatewayIntentBits.GuildMessages,<br/>    GatewayIntentBits.MessageContent]<br/>});<br/><br/>client.once(Events.ClientReady, c =&gt; {<br/>  console.log(`Ready! Logged in as ${c.user.tag}`);<br/>});<br/><br/>client.on(Events.MessageCreate, async message =&gt; {<br/>  if (message.content.substring(0, 1) === "!") {<br/>    const prompt = message.content.substring(1); //remove the exclamation mark from the message<br/>    const answer = await ask(prompt); //prompt GPT-3<br/>    client.channels.fetch(message.channelId).then(channel =&gt; channel.send(answer));<br/>  }<br/>});<br/><br/>// Log in to Discord with your client's token<br/>client.login(token);</span></pre><p id="bdc1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">注意:</strong>这可能不是最佳的代码，但它是从今天(2022年11月19日)开始为我工作的代码。我希望这将解决你们中的一些人对机器人没有反应的问题！编码快乐！</p></div></div>    
</body>
</html>