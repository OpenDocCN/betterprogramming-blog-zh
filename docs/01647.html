<html>
<head>
<title>What is the Proxy Design Pattern?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是代理设计模式？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/proxy-design-pattern-and-how-to-use-it-acd0f11e5330?source=collection_archive---------7-----------------------#2019-10-01">https://betterprogramming.pub/proxy-design-pattern-and-how-to-use-it-acd0f11e5330?source=collection_archive---------7-----------------------#2019-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aca6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">代理控制对对象的访问，并可以在使用对象之前或之后执行各种操作</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3915a883626a00f70679d15f848b4d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K6JYk-LQrzfXLUOvsyqWNQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jjying?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> JJ英</a>在<a class="ae ky" href="https://unsplash.com/s/photos/pattern?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="34c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能是一个无需更改类本身就能扩展其功能的解决方案。代理与原始类共享相同的接口，因此它们可以互换使用。它给了我们很大的灵活性，并且不会产生紧耦合。</p><p id="7b31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代理对于以下任务非常有用:</p><ul class=""><li id="bbfd" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">记录</li><li id="049a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">捕捉异常</li><li id="9187" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">贮藏</li><li id="177b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在调用某个方法之前或之后调度事件</li><li id="5c2b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">访问验证</li></ul><p id="a5bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个允许对文件进行基本操作的系统。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="b12b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了简单起见，每个方法都不返回任何东西(甚至<code class="fe ml mm mn mo b">get</code>)。我们的实现将只记录每个方法调用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="a21e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一切都运行良好，但我们的系统缺乏验证。我们希望只允许选定的登录用户访问文件。我们可以修改<code class="fe ml mm mn mo b">FileProvider</code>并添加验证，或者保持它的简单并将该逻辑移到另一个类中。这是代理模式的一个很好的用例。</p><p id="09ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将使用一个单独的类来负责验证。这种方法将使我们的代码更加符合单一责任原则(SRP)。</p><p id="4c84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在代码中直接使用超级全局变量并不是一个好的做法，但是我们希望这个例子尽可能的简单和简短，并且在没有任何中介的情况下使用<code class="fe ml mm mn mo b">$_SESSION</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="e256" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一切似乎都被设定好了。为了测试我们的应用程序，我们还需要一个简单的组件来帮助我们授权用户。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="9334" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看我们的应用程序在运行。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="25bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的文件很安全。一切都如预期的那样工作。我们的代理模式包含以下元素:</p><ul class=""><li id="29c3" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">Subject ( <code class="fe ml mm mn mo b">File</code>):为我们真正的Subject和Proxy定义公共接口</li><li id="e21b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">真实主语(<code class="fe ml mm mn mo b">FileProvider</code>):实现主语</li><li id="f793" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Proxy ( <code class="fe ml mm mn mo b">AuthFile</code>):保存对真实主题的引用，并共享主题接口</li></ul></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="56fe" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">优势</h1><ul class=""><li id="bff4" class="lv lw it lb b lc no lf np li nq lm nr lq ns lu ma mb mc md bi translated">允许在不修改对象的情况下扩展其功能</li><li id="4b86" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">促进职责分离</li><li id="ed1b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">您可以根据用例为一个对象创建多个代理，并在运行时附加它们</li></ul></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="9524" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">资源</h1><p id="5866" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">完整的源代码和其他一些模式可以在这里找到:</p><div class="nw nx gp gr ny nz"><a href="https://github.com/jkapuscik2/design-patterns-php" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">jkapuscik 2/设计-模式-php</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">这个项目是一组在现实世界中使用不同设计模式的简单例子。每个人都有一个…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ks nz"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="e841" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解一些更有用的设计模式，您可以在以下文章中找到它们:</p><ul class=""><li id="2071" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/getting-started-with-design-patterns-in-php-4d451ccdfb71" rel="noopener">工厂方法</a></li><li id="0a7c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/creational-design-patterns-in-php-db365d3245ce" rel="noopener">创作模式</a></li><li id="223f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/observer-pattern-in-php-2ba240f89fb2" rel="noopener">观察者</a></li><li id="9b30" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/iterator-pattern-in-php-b7624f6bdbcf" rel="noopener">迭代器</a></li><li id="a1ef" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/state-strategy-design-patterns-by-example-f57ebd7b6211" rel="noopener">状态&amp;策略</a></li><li id="2a10" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/template-method-pattern-in-php-6116fd7e8ccc?source=friends_link&amp;sk=ac4c483446bd5a5323c09a662bd54116" rel="noopener">模板方法</a></li><li id="5161" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/swlh/flyweight-design-pattern-in-php-edcda0486fb0?source=friends_link&amp;sk=a0fa3083d5afd7e41af8a4f7a1df05f1" rel="noopener">飞锤</a></li><li id="eccc" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/decorator-c04fae63dfff" rel="noopener">装饰者</a></li><li id="2404" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/dependency-injection-8f09a93ec995" rel="noopener">依赖注入</a></li><li id="a465" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/swlh/composite-908878748d0e" rel="noopener">复合</a></li><li id="d113" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/swlh/building-cloud-storage-application-with-adapter-design-pattern-8b0105a1bda7" rel="noopener">适配器</a></li><li id="4b5a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-facade-design-pattern-67cb09ce35d4" rel="noopener">立面</a></li><li id="122e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/what-is-bridge-design-pattern-89bfa581fbd3" rel="noopener">桥</a></li><li id="e2ce" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/what-is-chain-of-responsibility-design-pattern-ff4d22abd124" rel="noopener">责任链</a></li><li id="b2b2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/what-is-visitor-design-pattern-8451fb75876" rel="noopener">来访者</a></li><li id="34ed" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/what-is-cqrs-command-design-pattern-5d400fd9f93a" rel="noopener">命令</a></li><li id="008a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/what-is-null-object-design-pattern-f3b4d3d28636" rel="noopener">空对象</a></li><li id="2306" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/what-is-the-fluent-interface-design-pattern-2797645b2a2e" rel="noopener">流畅的界面</a></li><li id="76d6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@j.kapuscik2/what-is-the-specification-design-pattern-4051dd9e71c3" rel="noopener">规格</a></li></ul></div></div>    
</body>
</html>