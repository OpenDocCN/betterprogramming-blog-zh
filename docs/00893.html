<html>
<head>
<title>From React to SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从React到SwiftUI</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/from-react-to-swiftui-f08c29b7d3b?source=collection_archive---------5-----------------------#2019-07-25">https://betterprogramming.pub/from-react-to-swiftui-f08c29b7d3b?source=collection_archive---------5-----------------------#2019-07-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6b19" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">来自React背景的SwiftUI工作原理的解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/87ac868e21911514de66de9346800a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AyX_8GJg8psAKJzveQnnpA.png"/></div></div></figure><h1 id="5c2f" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">基本组件</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure><ul class=""><li id="ea0f" class="ll lm iq ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe md me mf mg b">function/class</code>变成了<code class="fe md me mf mg b">struct</code></li><li id="2927" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated"><code class="fe md me mf mg b">React.Component</code>变成了<code class="fe md me mf mg b">View</code>，一个纯粹的UI元素</li><li id="eee8" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated"><code class="fe md me mf mg b">function return/render(...)</code>变成了<code class="fe md me mf mg b">var body: some View { ... }</code></li></ul></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="af3e" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">状态</h1><h2 id="d014" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lu nf ng lf lw nh ni lh nj bi translated">初始化</h2><p id="7e88" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">使用<code class="fe md me mf mg b">@State</code>装饰器为组件定义一个状态属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="e936" class="pw-post-body-paragraph nk nl iq ln b lo lp jr nn lq lr ju np ls nz nr ns lu oa nu nv lw ob nx ny ly ij bi translated">相当直接。使用<code class="fe md me mf mg b">self.stateProperty</code>代替<code class="fe md me mf mg b">this.state</code>，就像任何struct属性一样。</p><h2 id="9491" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lu nf ng lf lw nh ni lh nj bi translated">更新</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="13f1" class="pw-post-body-paragraph nk nl iq ln b lo lp jr nn lq lr ju np ls nz nr ns lu oa nu nv lw ob nx ny ly ij bi translated">没有<code class="fe md me mf mg b">setState</code>，没有<code class="fe md me mf mg b">setProperty</code>，只要马上更新值，组件就会相应地重新渲染。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="44e8" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">小道具</h1><p id="7d77" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">应该使用组件属性定义属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure><ul class=""><li id="18eb" class="ll lm iq ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">设置默认值:</li></ul><pre class="kg kh ki kj gt oc mg od oe aw of bi"><span id="eb8b" class="my ks iq mg b gy og oh l oi oj">var message: String = "Goodbye"</span></pre><ul class=""><li id="95c5" class="ll lm iq ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">这里的道具和React中的一样是不可变的</li><li id="962d" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated">道具可以通过设置而变得可变:</li></ul><pre class="kg kh ki kj gt oc mg od oe aw of bi"><span id="74b9" class="my ks iq mg b gy og oh l oi oj">// Calling component<br/>@State var message = "Hello"<br/>Home(message: $message)</span><span id="eb84" class="my ks iq mg b gy ok oh l oi oj">// Home<br/>@Binding var message: String</span></pre><ul class=""><li id="9b27" class="ll lm iq ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">这里的属性是一个状态属性，因为我们需要在它上面保留一个引用，因为它会发生变化</li><li id="adbc" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated">注意<code class="fe md me mf mg b">message</code>变量前面的<code class="fe md me mf mg b">$</code>，表示这个值是一个绑定(双向绑定)</li><li id="edbf" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated"><code class="fe md me mf mg b">@Binding</code>表示子节点和父节点之间的关系</li></ul></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="2d06" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">生命周期</h1><p id="7b8e" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">非常有限，因为我们只能分别使用<code class="fe md me mf mg b">onAppear</code>和<code class="fe md me mf mg b">onDisappear</code>获得<code class="fe md me mf mg b">didMount</code>和<code class="fe md me mf mg b">willUnmount</code>的挂钩:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="c53c" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">碎片</h1><p id="f660" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">与<code class="fe md me mf mg b">React.Fragment</code>类似，<code class="fe md me mf mg b">Group</code>派上了用场:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="dc9c" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">风格</h1><h2 id="2243" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lu nf ng lf lw nh ni lh nj bi translated">基础</h2><p id="5ccb" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">使用视图修改器定义样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure><h2 id="112a" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lu nf ng lf lw nh ni lh nj bi translated">布局</h2><p id="1ffc" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">忘记<code class="fe md me mf mg b">div</code>:</p><ul class=""><li id="74e1" class="ll lm iq ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">使用<code class="fe md me mf mg b">HStack</code>进行水平布局</li><li id="918e" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated">使用<code class="fe md me mf mg b">VStack</code>进行垂直布局</li><li id="666e" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated">使用<code class="fe md me mf mg b">ZStack</code>堆叠视图</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="f181" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">可选渲染</h1><p id="e3b7" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated">使用<code class="fe md me mf mg b">if value != nil { ... }</code>代替<code class="fe md me mf mg b">value &amp;&amp; (...)</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="253b" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">手势</h1><p id="7bcb" class="pw-post-body-paragraph nk nl iq ln b lo nm jr nn lq no ju np ls nq nr ns lu nt nu nv lw nw nx ny ly ij bi translated"><code class="fe md me mf mg b">onClick</code>变为<code class="fe md me mf mg b">tapAction</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="b9bc" class="pw-post-body-paragraph nk nl iq ln b lo lp jr nn lq lr ju np ls nz nr ns lu oa nu nv lw ob nx ny ly ij bi translated">有更多的手势可用，但开始时不太直观。</p><p id="5321" class="pw-post-body-paragraph nk nl iq ln b lo lp jr nn lq lr ju np ls nz nr ns lu oa nu nv lw ob nx ny ly ij bi translated">Majid Jabrayilov在SwiftUI 上写了一篇非常棒的关于手势的文章，如果你有兴趣，我鼓励你去读一读。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="6d3d" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">从这里去哪里？</h1><ul class=""><li id="e67a" class="ll lm iq ln b lo nm lq no ls om lu on lw oo ly lz ma mb mc bi translated">苹果推出了<a class="ae ol" href="https://developer.apple.com/tutorials/swiftui/tutorials" rel="noopener ugc nofollow" target="_blank">一个很棒的SwiftUI入门教程</a></li><li id="dc1a" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated">如果你喜欢欣赏今年来自WWDC的精彩演讲:<a class="ae ol" href="https://developer.apple.com/videos/play/wwdc2019/240" rel="noopener ugc nofollow" target="_blank">所有设备上的swift ui</a>，<a class="ae ol" href="https://developer.apple.com/videos/play/wwdc2019/216" rel="noopener ugc nofollow" target="_blank"> SwiftUI Essentials </a></li><li id="2566" class="ll lm iq ln b lo mh lq mi ls mj lu mk lw ml ly lz ma mb mc bi translated">在伟大的<code class="fe md me mf mg b"><a class="ae ol" href="https://github.com/chinsyo/awesome-swiftui" rel="noopener ugc nofollow" target="_blank">awesome-swiftui</a></code>列表中找到更多</li></ul></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="9f60" class="pw-post-body-paragraph nk nl iq ln b lo lp jr nn lq lr ju np ls nz nr ns lu oa nu nv lw ob nx ny ly ij bi translated">如果你好奇想了解更多，可以在Medium上关注我(或者<a class="ae ol" href="https://github.com/eveningkid" rel="noopener ugc nofollow" target="_blank"> Github </a>)。</p><p id="25d2" class="pw-post-body-paragraph nk nl iq ln b lo lp jr nn lq lr ju np ls nz nr ns lu oa nu nv lw ob nx ny ly ij bi translated">关于语法，SwiftUI潜力有什么想法吗？🙋</p></div></div>    
</body>
</html>