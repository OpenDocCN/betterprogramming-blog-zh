<html>
<head>
<title>6 Best Practices for Defining the Initialization Method In Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python定义初始化方法的6个最佳实践</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/6-best-practices-for-defining-the-initialization-method-in-python-9173808bfb8f?source=collection_archive---------1-----------------------#2021-08-11">https://betterprogramming.pub/6-best-practices-for-defining-the-initialization-method-in-python-9173808bfb8f?source=collection_archive---------1-----------------------#2021-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9317" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写可读和可维护的Python代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0a01065f3444b329cf2c16edb5684ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6J_dDOPOcYqktMO-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@fossy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Fab Lentz </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ec3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python作为面向对象编程语言的重要基石是相关类的定义，用于管理和处理程序中的数据。当我们创建类时，我们定义的第一个方法是初始化方法:<code class="fe lv lw lx ly b">__init__</code>。将最佳实践应用于该方法将确保读者很容易理解该类的实例对象。在本文中，我想回顾一下定义<code class="fe lv lw lx ly b">__init__</code>方法的最佳实践。</p><h1 id="e385" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">1.把它放在顶部</h1><p id="fb55" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">对我们大多数人来说，这听起来是显而易见的，但我见过有人将它和其他属性一起“隐藏”在类的主体深处。重要的是把它放在类的顶部，在任何其他方法之前。这就是读者应该寻找<code class="fe lv lw lx ly b">__init__</code>方法的地方。</p><p id="1a58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有类属性，您应该将<code class="fe lv lw lx ly b">__init__</code>方法放在这些类属性之后。您必须在您为项目定义的所有类中保持一致，这样读者才不会感到困惑。</p><h1 id="4850" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">2.将第一个参数命名为Self</h1><p id="ddb4" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">首先你要明白第一个参数是什么意思。第一个参数是指调用<code class="fe lv lw lx ly b">__init__</code>方法的实例对象。您可能听说过实例化这个术语，但是<code class="fe lv lw lx ly b">__init__</code>方法本身并不等同于实例化。顾名思义，<code class="fe lv lw lx ly b">__init__</code>就是初始化，指的是设置新创建的实例对象的初始状态的过程。</p><p id="f11e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按照惯例，将第一个参数命名为self很重要，尽管并不要求这样做。顺便提一下，<code class="fe lv lw lx ly b">self</code>在Python中不是一个关键字，不像许多其他语言可能使用<code class="fe lv lw lx ly b">this</code>、<code class="fe lv lw lx ly b">self</code>或<code class="fe lv lw lx ly b">it</code>作为保留关键字来引用当前调用的实例对象。</p><h1 id="2261" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">3.设置所有实例属性</h1><p id="3ddd" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">Python不限制在类中定义实例属性的位置。但是，这并不意味着您可以将实例属性分散到类中的任何地方。考虑下面的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">定义实例属性</p></figure><p id="6556" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，我们可以通过初始化它们的名称来创建一个<code class="fe lv lw lx ly b">Student</code>实例。稍后，我们可以调用<code class="fe lv lw lx ly b">verify_registration</code>来获取注册状态，调用<code class="fe lv lw lx ly b">get_guardian_name</code>来获取学生的监护人信息。然而，这种实现模式并不可取，因为当您将实例属性分散到各处时，代码的读者将无法确定一个实例具有什么属性。相反，最佳实践是将所有实例属性放在<code class="fe lv lw lx ly b">__init__</code>中，这样读者就可以确定地知道实例具有哪些属性。以下实现采用了所需的模式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">实例属性的单一位置</p></figure><h1 id="a809" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">4.避免使用**kwargs</h1><p id="dcdb" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">在Python中，<code class="fe lv lw lx ly b">**kwargs</code>用于表示函数定义中不同数量的关键字参数。因此，在<code class="fe lv lw lx ly b">__init__</code>方法中包含<code class="fe lv lw lx ly b">**kwargs</code>在语法上是正确的。尽管在某些情况下使用<code class="fe lv lw lx ly b">__init__</code>中的<code class="fe lv lw lx ly b">**kwargs</code>是有效的，但是在大多数情况下，您并不希望使用它，因为它屏蔽了实例初始化所需的参数。</p><p id="b551" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我猜一些人使用<code class="fe lv lw lx ly b">**kwargs</code>的一个主要理由是让<code class="fe lv lw lx ly b">__init__</code>方法看起来“干净”然而，我相信明确的总是比含蓄的好。虽然在<code class="fe lv lw lx ly b">__init__</code>方法头中列出所有参数看起来很麻烦，但是我们很清楚用户在创建实例对象时需要指定哪些参数。</p><h1 id="9a9b" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">5.设置适当的默认值</h1><p id="e17c" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">如果您知道应该为某些属性设置什么初始值，您可以在<code class="fe lv lw lx ly b">__init__</code>头中指定它们，这样用户在创建实例时就不需要设置这些参数。或者，如果某些值适用于大多数实例化场景，您也可以设置这些参数。下面是一个可能的例子:</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="6f88" class="nc ma it ly b gy nd ne l nf ng">class Student:<br/>    def __init__(self, name, bus_rider=True):<br/>        self.name = name<br/>        self.bus_rider = bus_rider</span></pre><p id="8e5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，应该注意的是，当参数是可变数据结构时，您将做一些不同的事情。以下是错误的:</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="54c5" class="nc ma it ly b gy nd ne l nf ng">class Student:<br/>    def __init__(self, name, subjects=["maths", "physics"]):<br/>        self.name = name<br/>        self.subjects = subjects</span></pre><p id="7207" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题是，当您将<code class="fe lv lw lx ly b">[“maths”, “physics”]</code>设置为默认值时，<em class="nh">这个列表对象是在函数定义</em>中创建的，并将由所有实例共享<strong class="lb iu">。以下代码显示了问题所在:</strong></p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="ae6b" class="nc ma it ly b gy nd ne l nf ng">&gt;&gt;&gt; student0 = Student("John")<br/>&gt;&gt;&gt; student0.subjects.append("music")<br/>&gt;&gt;&gt; student0.subjects<br/>['maths', 'physics', 'music']<br/>&gt;&gt;&gt; student1 = Student("Ashley")<br/>&gt;&gt;&gt; student1.subjects<br/>['maths', 'physics', 'music']</span></pre><h1 id="715e" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">6.文档字符串</h1><p id="a1c1" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">就像其他公共方法一样，您应该为<code class="fe lv lw lx ly b">__init__</code>方法准备适当的文档字符串。尽管有些人喜欢在类级别记录构造信息(例如，将初始化相关的信息放在类头下面)，但通常建议您将docstrings放在<code class="fe lv lw lx ly b">__init__</code>方法的正下方。</p><p id="bff7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每个参数，您需要指定参数的类型——是<code class="fe lv lw lx ly b">str</code>还是<code class="fe lv lw lx ly b">int</code>。在这些信息之后，您需要提供这个参数是什么或者它有什么作用的简要描述。如果有默认值，也请用任何适用的理由/解释加以说明。</p><h1 id="6466" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="a24e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">这是我在为Python中的类定义<code class="fe lv lw lx ly b">__init__</code>方法时遵循的最佳实践列表。我个人认为它们有助于保持代码的可读性。如果你有什么要补充的，请随时留下评论。</p><p id="3734" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>