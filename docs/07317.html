<html>
<head>
<title>Git Cherry-Pick — Selecting Specific Commits to Merge</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git精选——选择要合并的特定提交</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/git-cherry-pick-selecting-specific-commits-to-merge-f1bf245e052a?source=collection_archive---------3-----------------------#2021-01-04">https://betterprogramming.pub/git-cherry-pick-selecting-specific-commits-to-merge-f1bf245e052a?source=collection_archive---------3-----------------------#2021-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="707a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何通过挑选特定的提交来合并分支</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d32a3ec678ef345274cc957f0e366cc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IRjmXSa0pY-jxa31"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yancy Min </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="86fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所知道的，当你使用<a class="ae kv" href="https://git-scm.com" rel="noopener ugc nofollow" target="_blank"> Git </a>并且需要在两个分支之间进行合并时，在<em class="ls">源</em>分支中的每一个提交都会被合并到<em class="ls">目标</em>分支中，没有例外。好吧，我要告诉你一个关于这个话题的恐怖故事，以及我是如何解决这个问题的。</p><p id="f87d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，我加入了一个新的软件公司，叫做<a class="ae kv" href="https://patagonian.it" rel="noopener ugc nofollow" target="_blank">巴塔哥尼亚</a>。我在那里开始工作几天后，项目经理给我分配了一个属于更大任务的任务(<a class="ae kv" href="https://www.productboard.com/glossary/epics" rel="noopener ugc nofollow" target="_blank">一个史诗任务</a>)。</p><p id="5596" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我完成我的任务时，我创建了一个拉请求，合并到<code class="fe lt lu lv lw b">develop</code>分支，并继续我的下一个任务。几天后，我们需要发布到staging，然后到production，但是……一个不完整的epic任务被合并到<code class="fe lt lu lv lw b">develop</code>中，并将成为下一个发布的一部分。</p><p id="a10a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们不能通过将<code class="fe lt lu lv lw b">develop</code>合并到<code class="fe lt lu lv lw b">staging</code>来进行正常的发布。实际上，我们需要从发布中排除史诗任务的提交。你能想象我的担心吗？</p><p id="40f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，我的队友们之前已经解决了这个问题，他们还有一张王牌:<code class="fe lt lu lv lw b"><a class="ae kv" href="https://git-scm.com/docs/git-cherry-pick" rel="noopener ugc nofollow" target="_blank">git cherry-pick</a></code>。这个Git命令通过选择您需要的特定提交，使得将现有提交应用到另一个分支成为可能。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="9314" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">挑选</h1><p id="49c9" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">正如您在官方文档中看到的那样，<code class="fe lt lu lv lw b">cherry-pick</code>命令允许您选择特定的现有提交来包含在另一个分支中。</p><p id="8f99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更容易理解，我将使用一个图形化的例子。假设您有一个存储库，在您的<code class="fe lt lu lv lw b">develop</code>分支中有一些提交，但是一些变更是被错误合并的不完整特性的一部分(绿樱桃)。在这种情况下，您只需要将与完成的特性(红樱桃)相关的提交传递给<code class="fe lt lu lv lw b">main</code>分支。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/e3f6a48ed17667c465fbbfe167e6bdbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SvC2ke1DMZ-yidcDyralg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">樱桃采摘命令的插图。</p></figure><p id="353e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一些截图展示了如何使用<a class="ae kv" href="https://www.sourcetreeapp.com" rel="noopener ugc nofollow" target="_blank"> Sourcetree </a>创建一个<code class="fe lt lu lv lw b">cherry-pick</code>。如果你想了解它是如何工作的，请继续阅读终端解释。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/fe2046addc4fe01cf5e646cdafaae5f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEk3Wz1XnxSHrYC_M4zMDA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">选择要包含在精选命令中的提交</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/a55ad121e58e27ecc2272c352dfd00dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*EcmlV_f_uDznpiXFJAP29w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用Sourcetree设置和创建樱桃采摘</p></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="c862" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">我如何在终端上使用它？</h1><p id="267a" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">如果你是终端爱好者，也许你会想用你漂亮的终端来完成这个过程。好吧，考虑以下步骤。</p><p id="ddb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，您必须从您的目标分支<code class="fe lt lu lv lw b">main</code>创建一个名为<code class="fe lt lu lv lw b">main_cherry_pick</code>的新分支。这个分支将用于应用所选择的提交，然后将它们合并到<code class="fe lt lu lv lw b">main</code>分支中。</p><p id="778e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其次，您需要知道想要包含的提交id。在<code class="fe lt lu lv lw b">develop</code>分支中，执行下一个<a class="ae kv" href="https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History" rel="noopener ugc nofollow" target="_blank">日志命令</a>，该命令将显示每次提交的散列和消息:</p><pre class="kg kh ki kj gt ne lw nf ng aw nh bi"><span id="dc3f" class="ni mf iq lw b gy nj nk l nl nm">git log --pretty=format:"%h %s"<!-- --> </span></pre><p id="6a92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到类似这样的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/2d9d3e39f614e9be7b7ec9904f015e0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_s8YbIXZ6T-vZG7mkgqbRQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Git日志命令的结果</p></figure><p id="1ed6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是检查目标分支。然后复制需要的id并执行<code class="fe lt lu lv lw b">cherry-pick</code>命令。在这种情况下，我将复制与文件1、2、3、5和6相关的提交id，忽略文件4、4.1和4.2，因为它们属于不完整的特性。</p><pre class="kg kh ki kj gt ne lw nf ng aw nh bi"><span id="a15b" class="ni mf iq lw b gy nj nk l nl nm">git checkout main<br/>git cherry-pick 12670fd 14b185a df931e3 1441727 2296bb0</span></pre><p id="e385" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果没有任何冲突，您将在您的<code class="fe lt lu lv lw b">cherry-pick</code>命令中看到每个选择/包含提交的一个提交确认:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/4f80b25839fe89527d613545b182e046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PqECTsLQr9VnwIYgXKWFIw.png"/></div></div></figure><p id="fffc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，您需要将您的<code class="fe lt lu lv lw b">main_cherry_pick</code>中的更改推送到远程分支。然后你必须做一个从<code class="fe lt lu lv lw b">main_cherry_pick</code>到<code class="fe lt lu lv lw b">main</code>分支的普通合并。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="7a6f" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">结论</h1><p id="0af4" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">我在这里解释的是<code class="fe lt lu lv lw b">git cherry-pick</code>最基本的用法。您可以在官方文档中查看几个选项:</p><div class="np nq gp gr nr ns"><a href="https://git-scm.com/docs/git-cherry-pick" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">git-git-樱桃-pick文档</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">git cherry-pick master在master分支的顶端应用由commit引入的更改，并创建一个新的…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">git-scm.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a href="https://github.com/carboleda/git-cherry-pick" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">carboleda/git-cherry-pick</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">在GitHub上创建一个帐户，为carboleda/git-cherry-pick开发做贡献。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kp ns"/></div></div></a></div><p id="866f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我希望这篇文章对您有所帮助。欢迎所有建设性的反馈。</p></div></div>    
</body>
</html>