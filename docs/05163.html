<html>
<head>
<title>What Can We Expect in TypeScript 4.0?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在TypeScript 4.0中我们可以期待什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-can-we-expect-in-typescript-4-0-b5be85021b90?source=collection_archive---------4-----------------------#2020-06-16">https://betterprogramming.pub/what-can-we-expect-in-typescript-4-0-b5be85021b90?source=collection_archive---------4-----------------------#2020-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c4a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解下一版本的TypeScript将会带来什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/43daf5dfbbc0a9c5de2d3bd9f106c0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O0xevM-0f9Srz0Na"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Natalie Rhea Riggs 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="53c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我之前的<a class="ae ky" href="https://medium.com/better-programming/whats-new-in-typescript-3-9-70e3d2eabe26" rel="noopener">文章</a>中，我谈到了TypeScript版本3.9中的新特性。今天，我将浏览预计将于2020年8月发布的TypeScript 4.0。根据<a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/38510" rel="noopener ugc nofollow" target="_blank">迭代计划</a>，看起来他们正在各方面努力，包括语言特性、性能、基础设施，以及——最重要的——错误。</p><p id="c71a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将介绍一些计划在4.0版本中发布的特性</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e2f1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">短路赋值运算符</h1><p id="0fc8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">TypeScript计划引入一个新的操作符(<code class="fe mz na nb nc b">??=</code>)，如果变量是空的，就将默认值赋给变量。</p><p id="69ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以前，<code class="fe mz na nb nc b">obj.x = obj.x ?? 20;</code>。</p><p id="5333" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了新的符，<code class="fe mz na nb nc b">obj.x ??= 20;</code>。</p><p id="deb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这不是一个突破性的变化，但拥有这些类型的操作总是好的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="72a5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">标记元组元素</h1><p id="505d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">还有另一个建议的语言特性，它改变了元组的定义方式。目前，元组的定义没有标签:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ed03" class="nh md it nc b gy ni nj l nk nl">// length, count<br/>type Segment = [number, number];</span></pre><p id="b880" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">建议的改进将使该特性能够向每个元组元素添加标签:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="a21a" class="nh md it nc b gy ni nj l nk nl">type Segment = [length: number, count: number];</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="21b7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">catch子句绑定未知</h1><p id="232c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在当前的TypeScript版本中，<code class="fe mz na nb nc b">catch</code>子句中不允许任何类型的注释。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8532" class="nh md it nc b gy ni nj l nk nl">try {<br/>  throw 20;<br/>} catch (err) {<br/>  console.error(err.specialFunction()); <br/>}</span></pre><p id="8c52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，错误的类型是<code class="fe mz na nb nc b">any</code>，因此它不是类型安全的。新的建议是允许在<code class="fe mz na nb nc b">catch</code>子句中使用<code class="fe mz na nb nc b">unknown</code> <strong class="lb iu"> <em class="nm"> </em> </strong>类型的注释，使其类型安全:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a6dc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">从构造函数推断类属性</h1><p id="0ab2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我们在<code class="fe mz na nb nc b">noImplicitAny</code>模式下配置TypeScript，<strong class="lb iu"><em class="nm"/></strong><strong class="lb iu"><em class="nm"/></strong>当前版本的TypeScript不会编译下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f922" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是4.0版本会编译，TypeScript会推断出<code class="fe mz na nb nc b">x</code>的类型是<code class="fe mz na nb nc b">string</code> <strong class="lb iu"> <em class="nm"> </em> </strong>还是<code class="fe mz na nb nc b">number</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="411a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">远期申报</h1><p id="95c6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有些情况下，我们需要能够告诉TypeScript某个类型可能存在，这取决于代码执行的环境。在4.0版中，TypeScript通过让我们定义占位符类型来充当占位符，直到实现可用，从而为我们提供了正确处理这种情况的方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="503a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提出的<code class="fe mz na nb nc b">exists</code> <strong class="lb iu"> <em class="nm"> </em> </strong>关键字将让我们定义那些占位符类型。当引入实际的实现类型时，TypeScript编译器将确保该实现遵守占位符定义的约束:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="72d9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">其他拟议变动</h1><p id="487d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">除了这些语言特性，还有许多提议的特性和错误修复。其中一些列举如下:</p><ul class=""><li id="ecd9" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/35524" rel="noopener ugc nofollow" target="_blank">编辑器支持</a> <code class="fe mz na nb nc b"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/35524" rel="noopener ugc nofollow" target="_blank">/** @see */</a></code> <a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/35524" rel="noopener ugc nofollow" target="_blank">标签</a></li><li id="c132" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/390" rel="noopener ugc nofollow" target="_blank">编辑器支持</a> <code class="fe mz na nb nc b"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/390" rel="noopener ugc nofollow" target="_blank">/** @deprecated */</a></code> <a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/390" rel="noopener ugc nofollow" target="_blank">标签</a></li><li id="8e92" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/37812" rel="noopener ugc nofollow" target="_blank">改进的自动导入</a></li><li id="b4e1" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/27711" rel="noopener ugc nofollow" target="_blank">调查</a> <code class="fe mz na nb nc b"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/27711" rel="noopener ugc nofollow" target="_blank">awaited</a></code> <a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/27711" rel="noopener ugc nofollow" target="_blank">型</a></li><li id="5aa7" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/38435" rel="noopener ugc nofollow" target="_blank">语义高亮</a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4474" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="9e18" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">理解本文基于TypeScript 4.0的迭代计划是很重要的，在实际发布之前事情可能会发生变化。你也可以进入<a class="ae ky" href="https://github.com/microsoft/TypeScript/issues/38510" rel="noopener ugc nofollow" target="_blank">迭代计划</a>并表达你对提议想法的想法。</p></div></div>    
</body>
</html>