<html>
<head>
<title>3 Simple Ways to Download Files With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python下载文件的3种简单方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-simple-ways-to-download-files-with-python-569cb91acae6?source=collection_archive---------0-----------------------#2020-12-27">https://betterprogramming.pub/3-simple-ways-to-download-files-with-python-569cb91acae6?source=collection_archive---------0-----------------------#2020-12-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8fcd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python从互联网上下载文件非常简单，而且只需使用标准的库函数就可以实现</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/eb70f31588733c73c0657fb1570ab2be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*reLMUydcauPfWAfQyRNfUQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片来自<a class="ae ky" href="https://www.overcoded.net" rel="noopener ugc nofollow" target="_blank">过度编码</a>。</p></figure><p id="81cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他库，最著名的是Python Requests库，可以为那些更关心高级操作的人提供更清晰的API。本文概述了使用Python下载文件的三种方法，并对每种方法进行了简短的讨论。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7a51" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.urllib.request.urlretrieve</h1><p id="003a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Python的<a class="ae ky" href="https://docs.python.org/dev/library/urllib.html" rel="noopener ugc nofollow" target="_blank"> urllib库</a>提供了一系列用于处理常见URL相关任务的函数。这包括解析、请求和下载文件。让我们考虑一个从<a class="ae ky" href="http://www.google.com:" rel="noopener ugc nofollow" target="_blank"> www.google.com: </a>下载<code class="fe mz na nb nc b">robots.txt</code>文件的基本例子</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e959" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nf">注意:urllib的</em> <code class="fe mz na nb nc b">urlretrieve<em class="nf"> </em></code> <em class="nf">被认为是Python 2的“遗产”，在Python文档</em>  <em class="nf">的</em> <a class="ae ky" href="https://docs.python.org/3/library/urllib.request.html#legacy-interface" rel="noopener ugc nofollow" target="_blank"> <em class="nf">中，“可能在将来的某个时候会被弃用。”在我看来,“可能”被弃用和“将”被弃用有很大的区别。换句话说，在可预见的未来，这可能是一种安全的方法。</em></a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4eb9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.requests.get +手动保存</h1><p id="9b56" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Python请求模块是一个超级<em class="nf"> - </em>友好库，号称“人类的HTTP”Requests提供了非常简化的API，即使是与HTTP相关的高吞吐量需求也符合它的座右铭。然而，它没有下载文件的一行程序。相反，必须手动保存流式文件数据，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="46d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法有一些重要的方面需要记住——最明显的是数据传输的二进制格式。当web浏览器加载页面(或文件)时，它使用来自主机的指定编码对其进行编码。</p><p id="d030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">常见的编码包括UTF-8和拉丁-1。这是一个针对网页浏览器的指令，这些浏览器接收到<em class="nf">和</em>显示的数据不能立即下载文件。</p><p id="3869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nf">注意:下载的文件可能需要编码才能正常显示。这超出了本教程的范围。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="12f9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.wget.download</h1><p id="82cc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://pypi.org/project/wget/" rel="noopener ugc nofollow" target="_blank"> wget Python库</a>提供了一个类似于<code class="fe mz na nb nc b">urllib</code>的方法，并且由于其名称与Linux <code class="fe mz na nb nc b">wget</code>命令相同而吸引了很多关注。该模块最后一次更新是在2015年。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b788" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nf">注意:</em> <code class="fe mz na nb nc b"><em class="nf">wget.download</em></code> <em class="nf">功能使用</em> <code class="fe mz na nb nc b"><em class="nf">urllib</em></code> <em class="nf">、</em> <code class="fe mz na nb nc b"><em class="nf">tempfile</em></code> <em class="nf">和</em> <code class="fe mz na nb nc b"><em class="nf">shutil</em></code> <em class="nf">的组合来检索下载的数据，保存到一个临时文件，然后将该文件移动(并重命名)到指定位置。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b7f5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="cf92" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用Python下载文件超级简单，<em class="nf">可以用标准的<code class="fe mz na nb nc b">urllib</code>函数</em>完成。我发现Requests库为常见的HTTP相关任务提供了最简单、最通用的API。一个值得注意的例外是 <code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.python.org/dev/library/urllib.parse.html?highlight=urlparse#urllib.parse.urlparse" rel="noopener ugc nofollow" target="_blank">urllib</a></code>的<a class="ae ky" href="https://docs.python.org/dev/library/urllib.parse.html?highlight=urlparse#urllib.parse.urlparse" rel="noopener ugc nofollow" target="_blank"> URL解析特性。不过，这些都是严格与HTTP相关的，所以我不会从T8扣分！</a></p><p id="f36d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nf">文章</em> <a class="ae ky" href="https://www.overcoded.net/downloading-files-with-python-533513/" rel="noopener ugc nofollow" target="_blank"> <em class="nf">如何用Python </em> </a> <em class="nf">下载文件最初发表在</em> <a class="ae ky" href="https://www.overcoded.net" rel="noopener ugc nofollow" target="_blank"> <em class="nf">过度编码</em> </a> <em class="nf">上，经许可在此重新发布。对原始文章的更新可能不会反映在此帖子中。</em></p></div></div>    
</body>
</html>