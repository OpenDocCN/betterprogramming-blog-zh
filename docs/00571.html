<html>
<head>
<title>Cloning Tinder With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SwiftUI克隆Tinder</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/cloning-tinder-swiftui-29faed752be6?source=collection_archive---------4-----------------------#2019-06-11">https://betterprogramming.pub/cloning-tinder-swiftui-29faed752be6?source=collection_archive---------4-----------------------#2019-06-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4eca" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用SwiftUI创建真实世界的布局</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a70bb518cb00ebca010fce8fc8273fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4CPYBOeGecAOKN2w.png"/></div></div></figure><p id="d35a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你听说过苹果在WWDC 2019上发布的新UI框架吗？它叫做<strong class="kw iu"> SwiftUI </strong>，感觉像魔术一样。</p><p id="b2bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Mac，iOS，iPad，WatchOS，tvOS开发者被炒作！</p><p id="d1f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">原因如下:</p><ul class=""><li id="29d4" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">SwiftUI兼容所有苹果平台</li><li id="e6d9" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">SwiftUI是声明性的</li><li id="06e3" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">SwiftUI不仅仅是UIKit的一个包装器，它是新的并且是使用Swift构建的！</li><li id="3a4d" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">SwiftUI不是基于故事板的！你好，代码评审:)</li><li id="ee40" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">SwiftUI取代了AutoLayout——现在一切都基于堆栈视图</li></ul><p id="ca32" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这已经很多了，而且由于整个社区已经在创建大量SwiftUI内容，甚至正在写书，我想重点介绍一个如何使用这个可爱的框架复制Tinder UI的实际例子。你准备好了吗？</p><h1 id="af96" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">重要的事情先来</h1><p id="39f2" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">当您使用XCode 11创建一个新项目并选中<strong class="kw iu"> SwiftUI </strong>框时，它会附带一个内容视图文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="6d4e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有两件重要的事情需要澄清:</p><ul class=""><li id="4b8d" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">第一个结构是您编写视图/布局代码的地方。</li><li id="eef3" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">第二个结构是您声明要预览的内容的地方。最后，我们有实时预览！</li></ul><p id="564b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将构建一些组件，当你想检查它们的外观时，只需通过你想预览的组件来改变<code class="fe nd ne nf ng b">ContentView()</code>内部预览变量。</p><h2 id="e3df" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">这是我们今天想要实现的布局:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/17a81af42704811f1fe1378481590089.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*-I_FfR8sm3CkjAEVGNDXFA.png"/></div></figure><h2 id="0c8b" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">酷吧？这是一个垂直布局，由3个重要部分组成:</h2><ul class=""><li id="1bbd" class="lq lr it kw b kx mw la mx ld nu lh nv ll nw lp lv lw lx ly bi translated">顶部组件包含三个水平对齐的按钮。</li><li id="37d2" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">中间组件是用户图像和信息。</li><li id="0698" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">底部组件包含五个水平对齐的按钮。</li></ul><h2 id="cd52" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">顶部控件</h2><p id="06d7" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">我们准备好创建我们的第一个组件了！由于我们的界面有许多按钮，我们将从编写一个助手函数开始，该函数基于图像资产名称创建一个按钮。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="00f7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">酷！这将有助于我们，因为我们的第一个视图需要三个不同的按钮水平排列。姑且称之为<strong class="kw iu"> TopStack: </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="d9b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你熟悉UIKit，一切看起来都很好，直到你读到<strong class="kw iu"> <em class="nx"> Spacer()。S </em> </strong>起搏器可用于填充堆栈项目之间的间隙，以适应剩余的视图空间。<strong class="kw iu"> HStack </strong>应用于构建水平堆栈布局——如果您想进行垂直布局，请使用<strong class="kw iu"> VStack </strong>。</p><p id="3bbc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是我们的第一个结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2cbbbd71fcc015740e4590cce0a18352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*ww3nCUVCgJAruQUBOTzPxA.png"/></div></figure><h2 id="d6c2" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">底部控制</h2><p id="be69" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">我们可以对底部控件做同样的操作，它包含五个不同的按钮。姑且称之为<strong class="kw iu"> BottomStack </strong>。非常类似于第一个不是吗？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h2 id="6228" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">图像、叠加和渐变</h2><p id="d2be" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">看起来不错！让我们深入一点。现在我们需要建立顶部和底部控件之间的视图，它应该是什么样子的呢？基本上，我们想要一个圆角的图像，但有一个额外的细节:如果我们想显示用户信息，如姓名和年龄，我们需要在底部有一个小的黑色渐变。我们的字体颜色是白色的，如果图像很亮，渐变可以让我们看到用户的名字。我们可以称之为<code class="fe nd ne nf ng b">UserImageView</code> <strong class="kw iu">。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="ba01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，这里有一些新的东西！图像…可调整大小？好吧…为什么？这是因为我们的图像需要填充顶部和底部控件之间的整个空间！</p><p id="6f41" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">叠加呢？我们在图像上方显示用户信息，所以我们需要用渐变图层覆盖图像——我们可以使用不同的形状作为图层，例如圆形和矩形。现在，让我们建立一个矩形，并用渐变填充它。我们的渐变在中间开始清晰，在底部结束黑色。</p><p id="5cfd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">检查结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/dc64b00603de97a163760c2fa91f7af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*GJlSZtJl_plDUlC3uSu9Xw.png"/></div></figure><h2 id="812d" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">用户信息</h2><p id="2175" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">现在我们想在图片上方显示用户的姓名、年龄和职业。这个视图叫做<code class="fe nd ne nf ng b"><strong class="kw iu">UserInfoView — </strong></code>检查下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="367a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面这个人开始创建一个包含一个分隔符和两个文本组件的垂直堆栈。这里我们再次需要间隔符，因为它将我们的用户信息保存在堆栈的底部。我们还想添加一些填充，从视图边界创建一些空间。</p><h2 id="60f4" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">是时候将UserImageView和UserInfoView结合起来了！</h2><p id="5d4e" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">让我们创建<code class="fe nd ne nf ng b">CardView</code>，包含用户图像和信息:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="0ff4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们希望<code class="fe nd ne nf ng b">UserInfoView</code>在<code class="fe nd ne nf ng b">UserImageView </code>之上——用<code class="fe nd ne nf ng b">ZStack</code>在SwiftUI上很容易实现。我们使用<code class="fe nd ne nf ng b">HStack</code>和<code class="fe nd ne nf ng b">VStack</code>来水平和垂直堆叠视图，<code class="fe nd ne nf ng b">ZStacks</code>用于堆叠视图。在文件的最后，您可以看到使用SwiftUI添加阴影是多么容易。</p><p id="447f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/213beb84b1af3b86a3f98302757681cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*X0i6lm4JePaQHEk61zHWPA.png"/></div></figure><h2 id="432f" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">压轴戏</h2><p id="7d81" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">让我们将<strong class="kw iu">内容视图</strong>中的三个组件结合起来，得到最终的布局:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8d07" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是什么？基本上，我们将三个组件垂直堆叠，每个组件之间的高度间隔为20。我们还为<code class="fe nd ne nf ng b">TopStack</code>和<code class="fe nd ne nf ng b">CardView</code>添加了一些水平填充，最后为<code class="fe nd ne nf ng b">VStack</code>添加了一个底部呼吸。</p><h2 id="326b" class="nh mf it bd mg ni nj dn mk nk nl dp mo ld nm nn mq lh no np ms ll nq nr mu ns bi translated">决赛成绩</h2><p id="0004" class="pw-post-body-paragraph ku kv it kw b kx mw ju kz la mx jx lc ld my lf lg lh mz lj lk ll na ln lo lp im bi translated">在<code class="fe nd ne nf ng b">ContentView</code>文件中，通过<code class="fe nd ne nf ng b">ContentView()</code> <strong class="kw iu"> </strong>改变你的预览结构，我们就完成了！</p><p id="8b71" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是我们使用SwiftUI制作的漂亮布局:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/e0ee342483a6297354b8e4fc511d7931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVE2EYi1kbRUFqQCMaYhMQ.png"/></div></div></figure><p id="9c1d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae oc" href="https://github.com/davidgdoll/tinder-clone-swiftui" rel="noopener ugc nofollow" target="_blank">源代码</a></p></div></div>    
</body>
</html>