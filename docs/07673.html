<html>
<head>
<title>Getting Query String Values in JavaScript in 2021</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2021年用JavaScript获取查询字符串值</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/getting-query-string-values-in-javascript-in-2021-ae3cbadcd366?source=collection_archive---------11-----------------------#2021-02-08">https://betterprogramming.pub/getting-query-string-values-in-javascript-in-2021-ae3cbadcd366?source=collection_archive---------11-----------------------#2021-02-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6a4f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">安全访问URLSearchParams</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/201f258cf78f1bd712fed1831d7b9d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vCZhrMG6Jwvds8PZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Markus Spiske </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="d642" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过去，对于用普通JavaScript从URL的查询字符串中检索键值对这一简单问题，没有简单的解决方案。</p><p id="7932" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们来看看下面这个网址:<code class="fe lv lw lx ly b"><a class="ae ky" href="http://example.com/search?someParam=someValue&amp;anotherParam=anotherValue" rel="noopener ugc nofollow" target="_blank">http://example.com/search?someParam=someValue&amp;anotherParam=anotherValue</a></code>。我们感兴趣的信息由两个键值对组成:<code class="fe lv lw lx ly b">{someParam: 'someValue', anotherParam: 'anotherValue'}</code>。令许多开发人员惊讶的是，并不存在具有足够大的浏览器支持的本地解决方案。这就是为什么你不得不使用像jQuery这样的库，或者想出自己的解决方案，这些解决方案往往变得非常复杂。</p><p id="11e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样一个常见的任务需要一个内置的解决方案。这个解决方案被称为<code class="fe lv lw lx ly b">UrlSearchParams</code>。它与大多数现代浏览器兼容。如果您需要支持Internet Explorer，您仍然应该通过提供polyfill来使用它。</p><p id="e031" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您需要此功能时，您通常会发现自己处于以下情况之一。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="243e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">获取当前网站的查询字符串值</h1><p id="1e29" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">首先，我们需要当前URL的搜索部分。我们可以通过<code class="fe lv lw lx ly b">window.location.search</code>获得。</p><p id="707d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nd">注意:我们不能用</em> <code class="fe lv lw lx ly b"><em class="nd">window.location.href</em></code> <em class="nd">。原因将在下一节解释。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="00c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ng ly nh ni aw nj bi"><span id="3598" class="nk mh it ly b gy nl nm l nn no">someParam someValue<br/>anotherParam anotherValue</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6fd6" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">获取任何URL的查询字符串值</h1><p id="1995" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这里有一个警告:如果我们想要解析一个完整的URL，我们需要首先分离搜索参数部分(在<code class="fe lv lw lx ly b">?</code>之后的所有内容)。对于我们的示例URL，这部分应该是<code class="fe lv lw lx ly b">?someParam=someValue&amp;anotherParam=anotherValue</code>。我们使用<code class="fe lv lw lx ly b">split</code>来实现这一点。</p><p id="9bd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，<code class="fe lv lw lx ly b">?</code>是否是该字符串的一部分并不重要。<code class="fe lv lw lx ly b">UrlSearchParams</code>的构造器会处理的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="bd69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ng ly nh ni aw nj bi"><span id="59bc" class="nk mh it ly b gy nl nm l nn no">someParam someValue<br/>anotherParam anotherValue</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="682b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="1ec9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">摆弄复杂的自制正则表达式的日子已经结束了。我们现在可以放心使用<code class="fe lv lw lx ly b">URLSearchParams</code>了。对于那些必须支持旧浏览器的人来说，有很好的polyfills。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c3e8" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">参考</h1><ul class=""><li id="8446" class="np nq it lb b lc my lf mz li nr lm ns lq nt lu nu nv nw nx bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/URLSearchParams</a></li><li id="6510" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Location/search" rel="noopener ugc nofollow" target="_blank">https://开发者. Mozilla . org/en-US/docs/Web/API/Location/search</a></li></ul></div></div>    
</body>
</html>