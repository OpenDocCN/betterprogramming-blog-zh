<html>
<head>
<title>VSCode, GitHub, and Rust</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">VSCode、GitHub和Rust</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/vscode-github-and-rust-8b8a06b7442c?source=collection_archive---------6-----------------------#2022-01-22">https://betterprogramming.pub/vscode-github-and-rust-8b8a06b7442c?source=collection_archive---------6-----------------------#2022-01-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6d76" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何为Rust项目建立开发环境</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c741a20c569f356f4a843f6b357a74ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BiC0mWNgiMkaWMaYX1GXuQ.png"/></div></div></figure><p id="d7cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我最近一直在解决<a class="ae lq" href="https://leetcode.com/" rel="noopener ugc nofollow" target="_blank"> Leetcode </a>上的问题来学习Rust，在这个过程中，我学到了一些东西，帮助我建立了一个更有效的开发环境。</p><p id="e17c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面将介绍如何设置一个支持调试、单元测试和GitHub集成的IDE，所有这些对于编码练习都很有用。</p><h1 id="9966" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">设置</h1><p id="aea4" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">以下是设置Microsoft Visual Studio代码(VSCode)以使用Rust开发和调试编码项目的步骤。在这篇文章中，我使用了一个托管在Azure中的微软Windows 11虚拟机。</p><h2 id="3190" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤1 —安装防锈漆</strong></h2><p id="ff02" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">通过<a class="ae lq" href="https://www.rust-lang.org/tools/install" rel="noopener ugc nofollow" target="_blank">使用此链接</a>下载并安装Rust。安装后，通过运行命令<code class="fe na nb nc nd b">rustc</code> <em class="ne"> </em>并确认返回使用信息，验证路径设置是否正确。如果该命令不起作用，请确保Rust可执行文件的路径(例如，C:\Users\[username]\。cargo\bin)包含在您的主机路径主机环境变量中。</p><h2 id="a294" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤2 —安装Visual Studio代码</strong></h2><ol class=""><li id="9531" class="nf ng it kw b kx mj la mk ld nh lh ni ll nj lp nk nl nm nn bi translated">使用此链接下载并安装Microsoft VSCode <a class="ae lq" href="https://code.visualstudio.com/Download" rel="noopener ugc nofollow" target="_blank">。安装时使用默认设置，我选择安装64位系统安装程序。</a></li><li id="1cbb" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">在VSCode中启动Terminal (Ctrl+Shift+)，尝试命令<code class="fe na nb nc nd b">rustc</code> <em class="ne"> </em>验证是否运行无误。</li></ol><p id="e7ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果<code class="fe na nb nc nd b">rustc</code>命令不起作用，您可能还需要在VSCode工作区中设置路径信息，以便Rust在终端中工作。可以通过编辑VSCode settings.json文件来添加路径:</p><ol class=""><li id="4293" class="nf ng it kw b kx ky la lb ld nt lh nu ll nv lp nk nl nm nn bi translated">选择<em class="ne">文件|首选项|设置</em></li><li id="4e24" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">点击右上角的开放设置(JSON)图标</li><li id="be3c" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">添加一个包含Rust二进制文件路径的条目(更多信息请点击<a class="ae lq" href="https://fabianlee.org/2021/12/23/vscode-add-a-directory-to-the-terminal-path/" rel="noopener ugc nofollow" target="_blank">这里</a>)。)</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/6fb342f04d30d19eda09c12712ac6fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*-KEtewO_T2EmJhNaWRXEVg.png"/></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">图settings.json文件的路径条目示例</p></figure><h2 id="7895" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤3——安装Visual Studio构建工具</strong></h2><p id="f970" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">VSCode需要Visual Studio生成工具来使用Rust运行时进行调试。</p><p id="6e19" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些构建工具有多个版本，尽管我使用的是较新版本的VSCode和Rust，但2019版的构建工具为我工作。</p><p id="7d8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果不执行这一步，当您试图运行或调试代码时，可能会出现类似“link.exe not found”的错误(更多信息请点击<a class="ae lq" href="https://stackoverflow.com/questions/63390924/rust-link-exe-not-found/70703624" rel="noopener ugc nofollow" target="_blank">这里</a>)。)</p><p id="904c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是安装VSCode生成工具的步骤:</p><ol class=""><li id="0860" class="nf ng it kw b kx ky la lb ld nt lh nu ll nv lp nk nl nm nn bi translated">退出VSCode</li><li id="63fc" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">去<a class="ae lq" href="https://my.visualstudio.com/Downloads?q=visual%20studio%202019&amp;wt.mc_id=o%7Emsft%7Evscom%7Eolder-downloads" rel="noopener ugc nofollow" target="_blank"> Visual Studio下载网站</a></li><li id="266c" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">向下滚动到较早的下载</li><li id="0b79" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">拓展2019</li><li id="e63f" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">点击下载。<em class="ne">您需要登录您的Microsoft帐户才能继续</em></li><li id="c5fb" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">单击Visual Studio 2019(16.9版)构建工具旁边的下载</li><li id="5a40" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">运行下载的安装程序</li><li id="f0de" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">选择使用C++开发桌面，然后单击安装。<em class="ne">根据您的系统，这大约需要10分钟。</em></li><li id="4dbe" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">启动VSCode</li></ol><h2 id="ea4d" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤4 —安装Rust for Visual Studio代码扩展</strong></h2><ol class=""><li id="9be1" class="nf ng it kw b kx mj la mk ld nh lh ni ll nj lp nk nl nm nn bi translated">单击右侧的扩展图标，搜索Rust并安装Rust for Visual Studio代码扩展。</li></ol><h2 id="634f" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤5 —安装CodeLLDB扩展</strong></h2><ol class=""><li id="c8df" class="nf ng it kw b kx mj la mk ld nh lh ni ll nj lp nk nl nm nn bi translated">单击右侧的扩展图标，安装“CodeLLDB”扩展。</li><li id="90df" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">重启VSCode</li></ol><h2 id="b60b" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤6 —创建一个新的Rust项目</strong></h2><ol class=""><li id="4bf1" class="nf ng it kw b kx mj la mk ld nh lh ni ll nj lp nk nl nm nn bi translated">在左侧窗格中，单击“打开文件夹”为项目选择主文件夹</li><li id="9a85" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">选择<em class="ne">端子|新端子</em> (Ctrl+Shift+`)</li><li id="2e70" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用命令行导航到新创建的文件夹</li><li id="0177" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">运行命令<code class="fe na nb nc nd b">cargo new demo</code></li></ol><p id="bdf8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一个名为<em class="ne">演示</em>的新Rust项目将被创建，新文件将显示在ide左侧的文件浏览器窗格中。</p><h2 id="63bd" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">步骤7 —构建项目</h2><p id="3889" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">通过选择<em class="ne"/><code class="fe na nb nc nd b">Terminal | Run Build Task</code><em class="ne">……(</em><code class="fe na nb nc nd b">Ctrl+Shift+B</code><em class="ne">)</em>首次构建项目。</p><p id="1e37" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在顶部出现的选项中，选择Rust: <code class="fe na nb nc nd b">cargo build — demo</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/fe54b75510a143987dfdc7b7fce2cd5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_P8v1Rxx3xE74N3tvIyEQ.png"/></div></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">图2:选择货物构建—选择运行构建任务后的演示…</p></figure><p id="1a5a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将会创建一些新的项目文件，但是此时您只能<em class="ne">构建</em>项目(您仍然需要终端来运行它)。</p><h2 id="12d3" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">步骤8 —运行项目</h2><p id="1eee" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">如果你现在尝试<code class="fe na nb nc nd b">Run | Run Without Debugging (Ctrl+F5)</code>，你会得到一个错误，接着是另一个错误。对第一个选项单击确定，对第二个选项单击是。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/7f9fbebbbf4492afbb4ab0ae917efc9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*_w_VTjT6B-T34RDjyW2jPw.png"/></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">错误1:首次尝试运行新的Rust项目时收到的消息</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ef98ba0ad741a8c8118f121cd7c07e98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*b5XzZwP1YiH4HZTncxz99A.png"/></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">错误2:错误1之后的消息，如果单击“是”,将自动创建启动配置</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/59b60b9df601b3c59972bc9349e87d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*CXxYWmi7gpMcsSLFIwx6Yg.png"/></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">图3:自动创建启动配置后的项目文件</p></figure><p id="53df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对第二个错误模式单击“是”后，将自动创建一个启动配置。现在，如果您再次尝试运行该项目，您应该会看到“Hello，World！”在VSCode的终端窗口中。</p><h2 id="bf50" class="mo ls it bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated"><strong class="ak">步骤9—安装并设置Git(可选)</strong></h2><p id="4265" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">GitHub是备份和共享代码的好方法。虽然让VSCode与git一起工作可能是一个挑战，但下面的方法对我很有效。</p><ol class=""><li id="fe8c" class="nf ng it kw b kx ky la lb ld nt lh nu ll nv lp nk nl nm nn bi translated">使用此链接安装Git for Windows <a class="ae lq" href="https://git-scm.com/download/win" rel="noopener ugc nofollow" target="_blank"/></li><li id="04f3" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">在VSCode中安装<a class="ae lq" href="https://marketplace.visualstudio.com/items?itemName=GitHub.vscode-pull-request-github" rel="noopener ugc nofollow" target="_blank"> GitHub Pull Requests and Issues扩展</a>，然后重启VSCode</li><li id="e152" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用VSCode终端，使用以下命令生成一个新的SSH密钥:<code class="fe na nb nc nd b">ssh-keygen -t rsa -b 4096 -C "&lt;your email address&gt;"</code></li><li id="44e7" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用文本编辑器，打开最近更新的。您的%USERPROFILE%\中的pub文件(例如id_rsa.pub)。ssh目录。复制以<code class="fe na nb nc nd b">ssh-rsa</code>开头的字符串(key)。</li><li id="353b" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用网页浏览器，登录GitHub网站，并前往右上角选择您的帐户&gt;设置&gt; SSH和GPG键。点击<em class="ne">新建SSH密钥</em>，添加标题，将新创建的SSH密钥粘贴到密钥字段，然后点击添加SSH密钥。GitHub现在信任您的Windows主机，只要它使用相同的SSH密钥，默认情况下应该是这样。</li><li id="8a21" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用web浏览器，创建一个新的存储库(repo)，然后复制它的git URL</li><li id="e091" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用VSCode终端，运行命令<code class="fe na nb nc nd b">git clone &lt;repo URL&gt;</code>，以便将github.com添加到已知主机的Windows列表中。这也将确认git在一般情况下是有效的，并且不会再次提示您这样做(参见图1。)</li><li id="51ad" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">使用VSCode，通过选择视图&gt;命令调色板…再次克隆repo，在搜索栏中键入<code class="fe na nb nc nd b">clone</code> <em class="ne"> </em>，然后选择<em class="ne"> </em> <code class="fe na nb nc nd b">Git:Clone</code>。将git URL粘贴到随后的文本字段中，选择本地目标文件夹，然后单击<em class="ne">在新窗口中打开</em>以在ide左侧的文件资源管理器中查看您的repo的内容。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/4dcf856cd39450b723e33851e8c02a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/0*7LDpiusH_K9RSmXY.png"/></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">图1:首次运行时将github.com添加到已知主机列表的示例</p></figure><h1 id="289d" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">结论</h1><p id="0353" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">VSCode的调试特性提供了对运行时值的可见性，以及在不使用print语句的情况下测试逻辑分支的能力。</p><p id="c285" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦您的项目完成，GitHub扩展可以用于暂存、提交和推送新文件和更改到远程存储库。结果是一个可用于执行以下操作的开发环境:</p><ol class=""><li id="6304" class="nf ng it kw b kx ky la lb ld nt lh nu ll nv lp nk nl nm nn bi translated">在Rust中创建项目</li><li id="d81b" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">逐句通过并调试代码</li><li id="c6da" class="nf ng it kw b kx no la np ld nq lh nr ll ns lp nk nl nm nn bi translated">将文件备份到GitHub(可选)</li></ol><p id="0fd5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">编码快乐！</p><h1 id="2659" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">资源</h1><div class="og oh gp gr oi oj"><a href="https://azure.microsoft.com/en-us/free/virtual-desktop" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">立即创建您的Azure免费帐户| Microsoft Azure</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">观看各种Azure服务的运行，了解如何部署资源，并设想您的云计划。观看…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">azure.microsoft.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ks oj"/></div></div></a></div><p id="51f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://www.rust-lang.org/tools/install" rel="noopener ugc nofollow" target="_blank">安装Rust — Rust编程语言(rust-lang.org)</a></p><p id="4850" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://code.visualstudio.com/Download" rel="noopener ugc nofollow" target="_blank">下载Visual Studio代码——Mac、Linux、Windows </a></p><p id="d1d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://my.visualstudio.com/Downloads?q=visual%20studio%202019&amp;wt.mc_id=o%7Emsft%7Evscom%7Eolder-downloads" rel="noopener ugc nofollow" target="_blank">下载— Visual Studio订阅门户</a></p></div></div>    
</body>
</html>