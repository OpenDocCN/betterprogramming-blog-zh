<html>
<head>
<title>Kubernetes Just Deprecated Docker Support. What Now?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes刚刚否决了Docker支持。现在怎么办？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/kubernetes-just-deprecated-docker-support-e86d2327afad?source=collection_archive---------9-----------------------#2020-12-07">https://betterprogramming.pub/kubernetes-just-deprecated-docker-support-e86d2327afad?source=collection_archive---------9-----------------------#2020-12-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4d8a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这会杀死Docker吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6aaf25be3520f71a2362a51e8345bff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5r8ePXCixql2aGJ0LUaE8A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><blockquote class="ky kz la"><p id="6752" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">这篇文章的视频版本在<a class="ae ly" href="https://youtu.be/AB2elYLNlLs" rel="noopener ugc nofollow" target="_blank">https://youtu.be/AB2elYLNlLs</a></p></blockquote><p id="4d00" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated"><a class="ae ly" href="https://twitter.com/Dixie3Flatline" rel="noopener ugc nofollow" target="_blank">凯特·科斯格罗维</a>12月2日在推特上写道:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="efb2" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">如果你不是Twitter用户，让我在这里为你转录整个线程:</p><blockquote class="ky kz la"><p id="f19a" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">“所以，Kubernetes不赞成Docker的支持，你要么紧张，要么困惑。没关系！我想帮助你了解发生了什么。一根线！1/10</p><p id="9c65" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">从Kubernetes v1.20开始，您将收到Docker的弃用警告。之后，您将需要使用不同的容器运行时。是的，这将打破你的集群。你可能认为Docker == Kubernetes。不是这样的！2/10</p><p id="44c0" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">我们称之为Docker的东西实际上是一个完整的技术堆栈，包括一个叫做containerd的东西以及一些其他东西，比如一些花哨的UX变化，使人类更容易与之交互。Containerd本身就是一个高级容器运行时。3/10</p><p id="f402" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">不过，库伯内特并不需要UX那些花哨的东西。它只需要容器运行时。使用Docker，整个堆栈，因为你的容器运行时意味着Kubernetes必须使用称为dockershim的东西来与它实际需要的部分进行交互。4/10</p><p id="4276" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">这是因为Docker与CRI(容器运行时接口)不兼容。Dockershim允许我们绕过这一点，但这也意味着我们要维护一个完全独立的东西，以便我们可以使用Docker作为我们的运行时。5/10</p><p id="0e31" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">这真糟糕。不方便。解决方案是去掉抽象，只使用containerd作为我们在Kubernetes中的容器运行时。因为，再说一次，库贝内特斯不是人类——它不需要UX增强功能。6/10</p><p id="7676" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">所以，你不需要恐慌。Docker还没有死，它仍然有它的用途。在Kubernetes中，您不能再将它用作容器运行时。下一个版本之后，需要切换到containerd。7/10</p><p id="a5f4" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">是的，你可以呆在旧版本的Kubernetes上。不，你绝对不应该，否则@IanColdwater会缠着你的集群。幽灵8/10</p><p id="58ec" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">关于容器运行时的Kubernetes文档在这里，其中包含关于使用containerd或CRI-O的信息:https://Kubernetes . io/docs/setup/production-environment/container-runtimes/…9/10</p><p id="7b83" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">无论如何，我希望这有助于减轻一些焦虑或误解。如果你还是很困惑，没关系！提问！这真的很复杂。你的问题并不愚蠢，即使它们很简单！10/10</p><p id="09c3" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">奖励推文:是的，Kubernetes仍将运行Docker构建的图像！TL；对于开发人员来说，灾难恢复不会有太大的变化，这些映像仍然符合OCI(开放容器倡议), containerd知道如何处理它们。"</p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="398d" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">官方公告在哪里？</h1><p id="6152" class="pw-post-body-paragraph lb lc it le b lf nd ju lh li ne jx lk lz nf ln lo ma ng lr ls mb nh lv lw lx im bi translated">一个有趣的回答是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="6483" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">我还要在这里补充一点:</p><blockquote class="ky kz la"><p id="a062" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">kubelet中的Docker支持现在已被否决，并将在未来的版本中删除。kubelet使用了一个名为“dockershim”的模块，它实现了对Docker的CRI支持，并且在Kubernetes社区中发现了维护问题。我们鼓励您评估迁移到一个容器运行时，这是一个成熟的CRI实现(v1alpha1或v1兼容)，因为它们变得可用。”—<a class="ae ly" href="https://github.com/kubernetes/sig-release/blob/master/releases/release-1.20/release-notes-draft.md" rel="noopener ugc nofollow" target="_blank">GitHub上的Kubernetes</a></p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="7cb8" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">我应该停止使用Docker吗？</h1><p id="a4e7" class="pw-post-body-paragraph lb lc it le b lf nd ju lh li ne jx lk lz nf ln lo ma ng lr ls mb nh lv lw lx im bi translated">如果您是开发人员，不用担心:Docker充当了容器化的人性化接口，它已经使用了containerd。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="59a3" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">包含什么？</h1><p id="3c44" class="pw-post-body-paragraph lb lc it le b lf nd ju lh li ne jx lk lz nf ln lo ma ng lr ls mb nh lv lw lx im bi translated">他们提到的这个书呆子容器是什么？</p><p id="4bb0" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">实际上是<a class="ae ly" href="https://containerd.io/" rel="noopener ugc nofollow" target="_blank">集装箱</a>。</p><p id="2bf0" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated"><a class="ae ly" href="https://www.docker.com/blog/what-is-containerd-runtime/" rel="noopener ugc nofollow" target="_blank">迈克尔·克罗斯比在Docker博客上讨论了这个问题</a>。这是最有助于我理解的部分:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/2a162ada25b92d8e5237bcfcf55fb792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2A9tgSQ30MwGCKaT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自Docker博客。</p></figure><blockquote class="ky kz la"><p id="42e1" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">“由于在内核空间中没有Linux容器这样的东西，容器是捆绑在一起的各种内核特性，当您构建一个大型平台或分布式系统时，您需要在管理代码和运行容器的系统调用和特性之间有一个抽象层。那是集装箱人住的地方。它提供了一个客户端类型层，平台可以在其上构建，而不必下降到内核级别。</p><p id="c5aa" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">Containerd旨在供Docker和Kubernetes以及任何其他希望抽象出系统调用或操作系统特定功能以在linux、windows、solaris或其他操作系统上运行容器的容器平台使用。考虑到这些用户，我们希望确保containerd只有他们需要的东西，没有他们不需要的东西。实际上这是不可能的，但至少这是我们努力的方向。”——<a class="ae ly" href="https://www.docker.com/blog/what-is-containerd-runtime/" rel="noopener ugc nofollow" target="_blank">Docker博客</a></p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="3e63" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">这会杀死Docker吗？</h1><p id="c8c1" class="pw-post-body-paragraph lb lc it le b lf nd ju lh li ne jx lk lz nf ln lo ma ng lr ls mb nh lv lw lx im bi translated">大概不会。我大部分时间都是不用别的东西就用Docker。很简单。</p><p id="3fdf" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">此外，如果新来者从Kubernetes开始，他们可能会首先看到新的替代方案。</p><p id="9ae0" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">无论哪种方式，如果这种转变影响Docker的使用，它只会在未来几年内出现。</p><p id="c7a6" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">感谢阅读！</p></div></div>    
</body>
</html>