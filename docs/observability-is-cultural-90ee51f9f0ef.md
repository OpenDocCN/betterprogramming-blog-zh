# 可观察性是文化的

> 原文：<https://betterprogramming.pub/observability-is-cultural-90ee51f9f0ef>

## 为了利用可观察性，我们需要在我们的企业文化中进行重大转变，这种转变囊括了整个公司，而不仅仅是工具

![](img/4525399da5c96af732adc42e46c2907e.png)

科林·劳埃德在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

我很抱歉把“调试”这个词用在任何事情上。我孩子的乐高玩具装不下，我们来调试一下。可观察性是为数不多的几个学科之一，实际上保证了这个绰号；正在调试。但是传统的调试并不真正适合可观察性实践。我通常称之为“预知调试”对于有效的可观察性故障排除，我们需要提前对我们的调试过程有一个大致的了解。

注意，这并不适用于开发人员的可观察性，这是一个特例。这是一个更动态的过程，更类似于典型的调试会话。这是关于更传统的监控和可观察性。我们需要首先对系统进行测试，并添加日志、指标等。以涵盖我们将需要的信息，因为我们稍后将调查该问题。

我以前写过关于过度记录的祸害。这同样适用于可观察性度量，因为我们收集越来越多的数据，保留和处理的成本很快超过了可观察性的好处。我们最终会面临一个更大的问题。我们需要选择我们的战斗，记录“正确的数量”并监控“正确的数量”不多也不少于我们的需要。为此，我们需要了解我们正在应对的风险，并尝试在我们的调查中最大限度地重叠。

# 混沌工程的启示

按照混沌工程的传统，我们会组织一场由“灾难大师”精心策划的“游戏”来练习灾难准备。这是一个很好的锻炼，也是锻炼“肌肉”的好方法它不适合可观察性架构，因为可观察性处理的是细微差别，而不是“火”

可观察性需要一个类似的游戏，但是是一个深思熟虑的游戏，我们的团队在寻找我们的系统可能失败的方式上竞争。就当是宾果游戏。一旦我们有了一个充满潜在故障的电子表格，我们需要将故障映射到我们希望每个潜在故障都具有的可观测性。例如，在黑客入侵的情况下，我们希望在访问任何受限资源时记录用户 id。

一旦我们将所有这些愿望都绘制成图表，我们就可以对它们进行审查，并尝试统一一些指标和日志。然后实施它们，这样我们的可观察性就能回答我们追踪问题所需的一切。

我们会不会错过一些东西？

是的。这是过程的一部分。我们将需要迭代和调整。可能需要减少一些昂贵数据点的数量，以保持合理的成本。我们无疑会遇到不在可观察性范围内的问题(或者可观察性范围不明显的问题)。在这两种情况下，我们都需要一些帮助。

# 我们需要专家吗？

一些可观测性爱好者认为我们不再需要领域经验来调试问题。给定一个适当的可观测系统，我们应该能够在不了解该系统任何信息的情况下理解问题。

虽然我同意调试专家可能更快地解决问题。可能比领域专家还快。我仍然有疑问。在十年的时间里，我是一名顾问，我会去那些使用剖析器、调试器等的公司。作为这项工作的一部分，我发现了那些比我更精通领域的人所忽略的问题。所以这种说法有一定的道理。

但是调试需要对我们试图理解的系统有所了解。就像通过谷歌诊断一样。我们可能偶尔会比我们的全科医生更好地找到病因，但可能不会比专家更好。这个规则也有例外，但是根据我的经验，经验对于任何类型的调试都很重要。

# 我们自己的仪表板

我经常看到的一件事是一个公司中通用的“一刀切”的仪表板。Grafana 是一个非常灵活的工具，但是有些人将其可视化为一个单一的公司仪表板。这些应用程序至少应该有三个仪表板:

*   高级别—首席技术官/副总裁 R&D 级别。这侧重于业务指标、用户、可靠性、成本
*   DevOps —关于环境的低级信息
*   开发人员—特定于应用的指标和平台信息

那里有很多重叠。但是我们需要定制的仪表板。仪表板的整个想法是在一个地方看到所有重要的东西。一般来说，容器上的 CPU 利用率可能会让我感兴趣，但更有可能的是，这只会分散我的注意力。我想知道授权系统是否有问题，因为用户登录时出错率增加了。这些指标应该放在前面和中间。

当我在浏览器中打开一个新标签时，我看到 Grafana。这应该是每个团队成员的主页。我们系统的“健康”观点应该铭刻在我们的脑海中，这样我们就可以立即注意到环境中的微小偏差并采取相应的行动。

# 可观察性增长

随着我们系统的增长，我们需要在引入特性的拉请求中包含可观察性和度量。没有第一天的可观测性，任何东西都无法发射。它应该被蚀刻到代码审查过程中，并且应该与测试覆盖需求相一致。

与测试覆盖率不同，我们没有可以依赖的度量来验证可观测性是否足以满足快速发展的需求，因此此时这是评审者肩上的一个沉重负担。但是还有一个更大的负担:成本。随着我们的成长，这些变化可能会影响成本，成本可能会突然飙升至导致破产的高度。成本并不总是容易监控的，但它是我们应该每天关注的一个标准。通过跟踪这一指标并尽早发现成本高峰，我们可以在不牺牲成本效益的情况下保持系统的稳定性和可管理性。

# 最后的想法

一些工程师过分迷恋度量标准。我不是其中之一。有些东西是无法衡量的。人际关系的价值。一个团队的价值。一个社区。由于这种痴迷，可观察性越来越受欢迎。这有好有坏。由于这种困扰，我们有时会过度记录和观察，从而导致糟糕的性能和成本超支。

我们应该用手术刀而不是铲子来观察。这不应该是我们事后委托给 DevOps 团队的事情。这应该是一个团队的努力，我们在前进的过程中不断完善。我们应该保持对我们的度量标准的关注，并拥有特定领域的仪表板，以保持我们的外围视野中始终重要的东西。如果我们不去寻找，可观察性并不重要。