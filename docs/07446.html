<html>
<head>
<title>How To Send Emails Using Python (Updated for 2021)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python发送电子邮件(2021年更新)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-send-emails-using-python-updated-for-2021-5ad483bb5c90?source=collection_archive---------2-----------------------#2021-01-15">https://betterprogramming.pub/how-to-send-emails-using-python-updated-for-2021-5ad483bb5c90?source=collection_archive---------2-----------------------#2021-01-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b80" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在不到20行代码中，我将向您展示如何使用Python向任何人发送电子邮件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bb7b8bc9eb79b3107b58c03ad1f521fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WwT9xJ9i_vPRXkXmDee_eA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Solen Feyissa 在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="a3cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近，我发现了一种独特的方法来自动化我的Python脚本，使它们在每天特定的时间运行。事实上，我写了一篇关于它的文章。</p><div class="lv lw gp gr lx ly"><a href="https://towardsdatascience.com/how-to-automate-your-python-scripts-for-free-2021-98ac71b0c360" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">如何免费自动化你的Python脚本(2021)</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">我将向您展示如何将Python脚本设置为在每天的特定时间、每周或每月运行</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="e319" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这非常有用，但还不够。你看，我想真正实现整个过程的自动化，这样当一个脚本运行完成时，结果会立即发送给我。一个简单有效的解决方案是让Python脚本通过电子邮件发送结果。</p><p id="c1c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实证明这在Python中非常容易做到。你只需要一个Gmail账户，就可以搭载谷歌的简单邮件传输协议(SMTP)服务器。</p><p id="b00d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，让我向您展示如何使用Python发送电子邮件。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="9b57" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">导入包</h1><p id="c8b5" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">第一步是导入内置的Python包，它将为我们完成大部分工作:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="39b6" class="nw mv it ns b gy nx ny l nz oa">import smtplib, ssl<br/>from email.mime.text import MIMEText</span></pre><p id="205e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ob oc od ns b">smtplib</code>是内置的Python SMTP协议客户端，允许我们连接到我们的电子邮件帐户并通过SMTP发送邮件。</p><p id="d308" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MIME(多用途互联网邮件扩展)是一种标准，用于格式化要通过互联网发送的文件，以便可以在浏览器或电子邮件应用程序中查看这些文件。</p><p id="2c75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用的MIME包是MIMEText。这个软件包将使我们能够发送纯文本的电子邮件。要查看其他类型的MIME消息(例如，MIMEAudio、MIMEImage ),请查看<a class="ae ky" href="https://docs.python.org/2/library/email.mime.html" rel="noopener ugc nofollow" target="_blank"> Python email.mime docs </a>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="e81b" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">发件人、收件人、电子邮件正文</h1><p id="2875" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">要创建一封MIME邮件，我们首先需要决定谁在发送邮件，谁在接收邮件，以及邮件的内容是什么。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="c7bb" class="nw mv it ns b gy nx ny l nz oa">sender = ‘your_email@email.com’<br/>receivers = [‘recipient1@recipient.com’, ‘recipient2@recipient.com’]<br/>body_of_email = ‘Text to be displayed in the email’</span></pre><p id="708d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复制上面的代码块，并用适当的信息替换变量。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="119d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">创建邮件、主题行、发件人和收件人</h1><p id="c422" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">接下来，我们必须创建我们的消息，并提供一些关于电子邮件的必要细节。</p><p id="f2f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了创建包含文本的消息，我们使用了导入的包MIMEText。然后，我们必须提供电子邮件的主题行，并确认谁在发送电子邮件，谁在接收它。这些将是上一节中的发送者和接收者变量。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="9064" class="nw mv it ns b gy nx ny l nz oa">msg = MIMEText(body_of_email, ‘html’)<br/>msg[‘Subject’] = ‘Subject line goes here’<br/>msg[‘From’] = sender<br/>msg[‘To’] = ‘,’.join(receivers)</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="a322" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">连接到Gmail SMTP服务器</h1><p id="1d49" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">既然邮件已经完成，我们必须连接到Gmail SMTP服务器。简单来说，这实际上就是登录到您的Gmail帐户，这样它就可以生成并发送从上一部分创建的邮件。</p><p id="23fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们用主机<code class="fe ob oc od ns b">‘smtp.gmail.com’</code>和端口465连接到Gmail SMTP服务器。使用您的Gmail帐户详细信息登录，然后将发送包含以下信息的电子邮件:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="d942" class="nw mv it ns b gy nx ny l nz oa">s = smtplib.SMTP_SSL(host = ‘smtp.gmail.com’, port = 465)<br/>s.login(user = ‘your_username’, password = ‘your_password’)<br/>s.sendmail(sender, receivers, msg.as_string())<br/>s.quit()</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="b7ab" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">最后一步:打开不太安全的应用程序</h1><p id="32b5" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">最后一步，你需要更改你的Gmail账户，以允许访问“不太安全的应用程序”这是必要的，这样你的Python脚本就可以访问你的帐户并从它发送电子邮件。</p><p id="caec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，请转到您的Gmail帐户的安全设置。在那里，向下滚动，直到你看到一个标题为“不太安全的应用程序访问”的框</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/d92bb9b3a95840a30abc315880972013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEQkjaQ0Pz4nkABv0WNKfA.jpeg"/></div></div></figure><p id="f0f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你点击它，你应该看到一个开关。翻转它以打开不太安全的应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/023f65e34dabec218841a7f3ac092ad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMbUb7MZLjL8eel3DVaM2w.jpeg"/></div></div></figure><p id="c3c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你！如果你做的一切都是正确的，你现在应该能够使用Python向任何人发送电子邮件。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="eb27" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">迷茫？在视频中看到这篇文章</h1><p id="9206" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">如果你在阅读这篇文章时有一些困惑，你可以看看我在YouTube频道上发布的一步一步的教程。</p><p id="03bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该视频还包括其他内容，如如何发送带有附件的电子邮件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="e7d6" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">访问此代码的干净版本</h1><p id="1703" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">如果你想获得创建这篇文章所使用的代码的完全清理和评论版本，你可以加入我的群<strong class="lb iu">“Clean Code Z”</strong>，通过加入，你将获得我在所有文章和视频中使用的代码的清理版本。</p><p id="ef25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感受感受加入这里:<a class="ae ky" href="http://wondrous-originator-2391.ck.page/christopherzita/cleancodez" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">洁码Z </strong> </a></p></div></div>    
</body>
</html>