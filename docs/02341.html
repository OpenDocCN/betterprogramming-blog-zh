<html>
<head>
<title>Creating a Context Menu and SF Symbol in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中创建上下文菜单和SF符号</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-a-context-menu-and-sf-symbol-in-swift-e45459f5f704?source=collection_archive---------7-----------------------#2019-11-24">https://betterprogramming.pub/creating-a-context-menu-and-sf-symbol-in-swift-e45459f5f704?source=collection_archive---------7-----------------------#2019-11-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3624" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用上下文菜单替换3D触摸</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/06958a050fb8087639353b0e5afcfc30.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*T8-zdxJibbmBBQaKtdOaug.png"/></div></figure><h1 id="7213" class="kn ko iq bd kp kq kr ks kt ku kv kw kx jw ky jx kz jz la ka lb kc lc kd ld le bi translated">介绍</h1><p id="1ae5" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在iOS 13中引入了上下文菜单peek和pop，并取代了3D Touch。它可以在包括iPad在内的所有设备上运行，并具有强大的功能来构建菜单和定制预览。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><blockquote class="mi mj mk"><p id="6fb2" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir"> <em class="iq">如果你正在准备你的技术编码面试，或者你想学习递归来提高你解决问题的技能，那么你应该查看这个udemy课程</em> </strong> <a class="ae mu" href="https://www.udemy.com/course/master-the-recursion-from-beginner-to-advance-level/?referralCode=75F57675BDABF6D104C0" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">递归大师班，从C++ </strong> </a> <strong class="lh ir"> <em class="iq">的初级到高级水平，或者你可以在</em></strong><a class="ae mu" href="https://skl.sh/3PTOCns" rel="noopener ugc nofollow" target="_blank"><strong class="lh ir"><em class="iq">skill share</em></strong></a><strong class="lh ir"><em class="iq">上查看这个递归课程。</em> </strong></p><p id="6257" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir">如果你想从初学者到专家水平学习ARKit 3，然后点击</strong> <a class="ae mu" href="https://www.udemy.com/course/ios-13-swift-5-the-complete-arkit-3-course/?couponCode=FORCREATOR" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">这里</strong> </a> <strong class="lh ir">获得课程，你还将获得97%的折扣。</strong></p><p id="3203" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir">如果你对学习iOS移动开发充满热情，并希望将你的iOS开发技能提升到一个新的水平，那么使用CloudKit framework的核心数据应该是你的首选。点击</strong> <a class="ae mu" href="https://www.udemy.com/course/mastering-coredata-with-cloudkit-in-swift-5-for-ios/?couponCode=FORDEVS" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">此处</strong> </a> <strong class="lh ir">获取课程，还可享受97折优惠。</strong></p><p id="b825" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir">从头开始学习SwiftUI点击</strong> <a class="ae mu" href="https://www.udemy.com/course/swiftui-the-complete-course-building-real-world-apps/?couponCode=FORCODERS" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">此处</strong> </a> <strong class="lh ir">获取课程，因为在本课程中，我们将使用SwiftUI构建许多应用，如脸书克隆、新闻应用、笔记应用等等。</strong></p></blockquote></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="f3cc" class="kn ko iq bd kp kq mv ks kt ku mw kw kx jw mx jx kz jz my ka lb kc mz kd ld le bi translated">行动（或活动、袭击）计划</h1><ul class=""><li id="d613" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated">我们将使用图像视图实现一个上下文菜单。</li><li id="62c9" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">我们将使用<a class="ae mu" href="https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/" rel="noopener ugc nofollow" target="_blank"> SF符号</a>来定制上下文菜单按钮。</li></ul></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="0e0e" class="kn ko iq bd kp kq mv ks kt ku mw kw kx jw mx jx kz jz my ka lb kc mz kd ld le bi translated">入门指南</h1><p id="71a4" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">打开Xcode<a class="ae mu" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank">并创建一个新的Xcode项目。</a></p><p id="8e07" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">选择<em class="ml"> iOS模板</em>下的<em class="ml">单视图App </em>，点击n <em class="ml"> ext </em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi no"><img src="../Images/d3a0e540ac7a0f092c5e79e5d718b0e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DOzkj6oHVxhlV2M3.jpeg"/></div></div></figure><p id="eb62" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">输入您的<em class="ml">产品名称，点击n <em class="ml"> ext，</em>并在您的桌面上创建它。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi nt"><img src="../Images/5e8773692f56f5c400c099065ea52948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HrCTWqeLLCiNB-kym1sVJA.jpeg"/></div></div></figure><p id="c251" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">首先，转到<code class="fe nu nv nw nx b">Main.storyboard</code>并从你的对象库中拖动一个<code class="fe nu nv nw nx b">UIImageView</code>，将其放置在画布上，并对其进行约束。然后打开助理编辑器，创建一个<code class="fe nu nv nw nx b">UIImageView.</code>的<code class="fe nu nv nw nx b">IBOutlet</code>跳转到<code class="fe nu nv nw nx b">ViewController.swift</code>文件，继承<code class="fe nu nv nw nx b">UIContextMenuInteractionDelegate</code>协议。</p><ol class=""><li id="f0c8" class="na nb iq lh b li mm ll mn lo ny ls nz lw oa ma ob ng nh ni bi translated">创建一个<code class="fe nu nv nw nx b">UIContextMenuInteraction</code>实例并赋予代理自我。</li><li id="8403" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma ob ng nh ni bi translated">在<code class="fe nu nv nw nx b">UIImageView.</code>中添加交互</li><li id="cb54" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma ob ng nh ni bi translated">将<code class="fe nu nv nw nx b">UIImageView</code> <code class="fe nu nv nw nx b">isUserInteractionEnabled</code>属性设置为true。</li></ol><p id="eb47" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">整个代码如下所示:</p><pre class="kg kh ki kj gt oc nx od oe aw of bi"><span id="355e" class="og ko iq nx b gy oh oi l oj ok"><strong class="nx ir">let</strong> interaction = UIContextMenuInteraction(delegate: <strong class="nx ir">self</strong>)<br/>imageView.addInteraction(interaction)<br/>imageView.isUserInteractionEnabled = <strong class="nx ir">true</strong></span></pre><p id="5dc5" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">接下来，创建一个方法，返回类型应该是<code class="fe nu nv nw nx b">UIMenu</code>。声明一个<code class="fe nu nv nw nx b">UIAction</code>类型的属性，给<code class="fe nu nv nw nx b">title</code>参数<code class="fe nu nv nw nx b">Share</code>，而<code class="fe nu nv nw nx b">image</code>参数应该是<code class="fe nu nv nw nx b">UIImage</code>。在这个<code class="fe nu nv nw nx b">UIImage</code>中，我们使用<a class="ae mu" href="https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/" rel="noopener ugc nofollow" target="_blank"> SF符号</a>。给它一个系统名<code class="fe nu nv nw nx b">square.and.arrow.up</code>，在处理程序中它将打印“一些文本消息”。您可以根据需要执行任何操作。</p><p id="934f" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">整个方法看起来像这样:</p><pre class="kg kh ki kj gt oc nx od oe aw of bi"><span id="0911" class="og ko iq nx b gy oh oi l oj ok"><strong class="nx ir">func</strong> createContextMenu() -&gt; UIMenu {</span><span id="6347" class="og ko iq nx b gy ol oi l oj ok"><strong class="nx ir">let</strong> shareAction = UIAction(title: "Share", image: UIImage(systemName: "square.and.arrow.up")) { <strong class="nx ir">_</strong> <strong class="nx ir">in</strong></span><span id="bd59" class="og ko iq nx b gy ol oi l oj ok">print("Share")</span><span id="af51" class="og ko iq nx b gy ol oi l oj ok">}</span><span id="cf8f" class="og ko iq nx b gy ol oi l oj ok"><strong class="nx ir">let</strong> copy = UIAction(title: "Copy", image: UIImage(systemName: "doc.on.doc")) { <strong class="nx ir">_</strong> <strong class="nx ir">in</strong></span><span id="c425" class="og ko iq nx b gy ol oi l oj ok">print("Copy")</span><span id="dc26" class="og ko iq nx b gy ol oi l oj ok">}</span><span id="9cf6" class="og ko iq nx b gy ol oi l oj ok"><strong class="nx ir">let</strong> saveToPhotos = UIAction(title: "Add To Photos", image: UIImage(systemName: "photo")) { <strong class="nx ir">_</strong> <strong class="nx ir">in</strong></span><span id="7631" class="og ko iq nx b gy ol oi l oj ok">print("Save to Photos")</span><span id="047a" class="og ko iq nx b gy ol oi l oj ok">}</span><span id="fe86" class="og ko iq nx b gy ol oi l oj ok"><strong class="nx ir">return</strong> UIMenu(title: "", children: [shareAction, copy, saveToPhotos])</span><span id="ffd6" class="og ko iq nx b gy ol oi l oj ok">}</span></pre><h2 id="5d71" class="og ko iq bd kp om on dn kt oo op dp kx lo oq or kz ls os ot lb lw ou ov ld ow bi translated">导入委托方法</h2><pre class="kg kh ki kj gt oc nx od oe aw of bi"><span id="5625" class="og ko iq nx b gy oh oi l oj ok"><strong class="nx ir">func</strong> contextMenuInteraction(<strong class="nx ir">_</strong> interaction: UIContextMenuInteraction, configurationForMenuAtLocation location: CGPoint) -&gt; UIContextMenuConfiguration? {</span><span id="4f6f" class="og ko iq nx b gy ol oi l oj ok"><strong class="nx ir">return</strong> UIContextMenuConfiguration(identifier: <strong class="nx ir">nil</strong>, previewProvider: <strong class="nx ir">nil</strong>) { <strong class="nx ir">_</strong> -&gt; UIMenu? <strong class="nx ir">in</strong></span><span id="72f1" class="og ko iq nx b gy ol oi l oj ok"><strong class="nx ir">return</strong> <strong class="nx ir">self</strong>.createContextMenu()</span><span id="46f3" class="og ko iq nx b gy ol oi l oj ok">    }</span><span id="c003" class="og ko iq nx b gy ol oi l oj ok">}</span></pre><p id="8912" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">在上面的方法中，我们返回了<code class="fe nu nv nw nx b">UIContextMenuConfiguration</code>，在handler中，我们返回了我们的方法。</p><p id="8cf8" class="pw-post-body-paragraph lf lg iq lh b li mm jr lk ll mn ju ln lo mp lq lr ls mr lu lv lw mt ly lz ma ij bi translated">现在运行代码并长按<code class="fe nu nv nw nx b">UIImage</code>。结果应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi ox"><img src="../Images/c9bf66293cc4b006edbc8b64859ca402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohkmT08tndLnY5uJ7Oyw_w.png"/></div></div></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="079b" class="kn ko iq bd kp kq mv ks kt ku mw kw kx jw mx jx kz jz my ka lb kc mz kd ld le bi translated">完整代码</h1><p id="063c" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你可以在<a class="ae mu" href="https://github.com/Amitrai011/Context-Menu-Demo" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到完整的项目。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><blockquote class="mi mj mk"><p id="d34e" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir"> <em class="iq">如果你正在准备你的技术编码面试，或者你想学习递归来提高你解决问题的技能，那么你应该查看这个udemy课程</em> </strong> <a class="ae mu" href="https://www.udemy.com/course/master-the-recursion-from-beginner-to-advance-level/?referralCode=75F57675BDABF6D104C0" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">递归大师班，从C++ </strong> </a> <strong class="lh ir"> <em class="iq">的初级到高级水平，或者你可以在</em></strong><a class="ae mu" href="https://skl.sh/3PTOCns" rel="noopener ugc nofollow" target="_blank"><strong class="lh ir"><em class="iq">skill share</em></strong></a><strong class="lh ir"><em class="iq">上查看这个递归课程。</em> </strong></p></blockquote></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="da18" class="kn ko iq bd kp kq mv ks kt ku mw kw kx jw mx jx kz jz my ka lb kc mz kd ld le bi translated">额外资源</h1><blockquote class="mi mj mk"><p id="462c" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir">如果你想从初学者到专家水平学习ARKit 3，然后点击</strong> <a class="ae mu" href="https://www.udemy.com/course/ios-13-swift-5-the-complete-arkit-3-course/?couponCode=FORCREATOR" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">这里</strong> </a> <strong class="lh ir">获得课程，你还将获得97%的折扣。</strong></p><p id="4928" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir">如果你对学习iOS移动开发充满热情，并希望将你的iOS开发技能提升到一个新的水平，那么使用CloudKit framework的核心数据应该是你的首选。点击</strong> <a class="ae mu" href="https://www.udemy.com/course/mastering-coredata-with-cloudkit-in-swift-5-for-ios/?couponCode=FORDEVS" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">此处</strong> </a> <strong class="lh ir">获取课程，还可享受97折优惠。</strong></p><p id="5974" class="lf lg ml lh b li mm jr lk ll mn ju ln mo mp lq lr mq mr lu lv ms mt ly lz ma ij bi translated"><strong class="lh ir">从头开始学习SwiftUI点击</strong> <a class="ae mu" href="https://www.udemy.com/course/swiftui-the-complete-course-building-real-world-apps/?couponCode=FORCODERS" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ir">此处</strong> </a> <strong class="lh ir">获取课程，因为在本课程中，我们将使用SwiftUI构建许多应用，如脸书克隆、新闻应用、笔记应用等等。</strong></p></blockquote></div></div>    
</body>
</html>