<html>
<head>
<title>Powerful Code Blocks With Code Hike and MDX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有Code Hike和MDX的强大代码块</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/powerful-code-blocks-with-code-hike-and-mdx-4cd60049463f?source=collection_archive---------8-----------------------#2022-03-10">https://betterprogramming.pub/powerful-code-blocks-with-code-hike-and-mdx-4cd60049463f?source=collection_archive---------8-----------------------#2022-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3ebc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">向Next.js应用程序添加代码hike</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/280ae69f001ac7d35cab610135262d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDJa8kPo9YTwXRaCcarzbg.png"/></div></div></figure><p id="cb02" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://mdxjs.com/" rel="noopener ugc nofollow" target="_blank"> MDX </a>是一种将markdown中的标记与JSX代码结合起来，将组件嵌入markdown文档的格式。它被用于文档，博客文章，以及更多可以添加与JSX互动的例子。你可以在这里了解更多。</p><p id="34b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天，我们将看看一个名为<a class="ae ln" href="https://codehike.org/" rel="noopener ugc nofollow" target="_blank"> Code Hike </a>的库，它提供了markdown代码块的特殊特性。这些包括<a class="ae ln" href="https://codehike.org/demo/code" rel="noopener ugc nofollow" target="_blank">聚焦代码</a>，<a class="ae ln" href="https://codehike.org/demo/filenames" rel="noopener ugc nofollow" target="_blank">添加文件名并将它们显示为标签</a>，<a class="ae ln" href="https://codehike.org/demo/meta-annotations" rel="noopener ugc nofollow" target="_blank">注释</a>，<a class="ae ln" href="https://codehike.org/demo/sections" rel="noopener ugc nofollow" target="_blank">链接文本到代码</a>，以及更多！它还内置了对语法高亮显示的支持。</p><p id="d4f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看一下将代码Hike添加到Next.js应用程序中。请注意，虽然MDX得到了Vue、Svelte等许多框架的支持，但Code Hike只适用于React。</p><p id="5c4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://code-hike-example.vercel.app/" rel="noopener ugc nofollow" target="_blank">现场演示</a> &lt; &gt; <a class="ae ln" href="https://github.com/AnishDe12020/code-hike-example" rel="noopener ugc nofollow" target="_blank"> GitHub资源库</a></p><h1 id="c3e0" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">在Next.js应用程序中设置代码标记</h1><p id="2c9b" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">首先，让我们创建一个新的Next.js应用程序</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="9c50" class="mq lp iq mm b gy mr ms l mt mu">npx create-next-app code-hike-example<br/># OR<br/>yarn create next-app code-hike-example</span></pre><p id="907f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，在您最喜欢的文本编辑器中打开项目。</p><h1 id="20ce" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">设置MDX</h1><p id="3a87" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">接下来，我们需要将MDX添加到Next.js应用程序中。为此，我们将遵循<a class="ae ln" href="https://nextjs.org/docs/advanced-features/using-mdx" rel="noopener ugc nofollow" target="_blank">官方指南将MDX添加到Next.js应用程序</a>。</p><p id="266d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，Code Hike也适用于<a class="ae ln" href="https://github.com/hashicorp/next-mdx-remote" rel="noopener ugc nofollow" target="_blank"> Next MDX Remote </a>和<a class="ae ln" href="https://github.com/kentcdodds/mdx-bundler" rel="noopener ugc nofollow" target="_blank"> MDX Bundler </a>然而，我们将看一个简单的例子，使用<a class="ae ln" href="https://www.npmjs.com/package/@next/mdx" rel="noopener ugc nofollow" target="_blank">官方MDX plugin for Next.js </a>。</p><p id="5ebd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，让我们安装所需的软件包-</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="275b" class="mq lp iq mm b gy mr ms l mt mu">npm install @next/mdx @mdx-js/loader<br/># OR<br/>yarn add @next/mdx @mdx-js/loader</span></pre><p id="36f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，打开<code class="fe mv mw mx mm b">next.config.js</code>，用下面的代码替换它</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="5119" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们只是告诉我们的捆绑器，当<code class="fe mv mw mx mm b">.md</code>和<code class="fe mv mw mx mm b">.mdx</code>文件在<code class="fe mv mw mx mm b">pages</code>目录中时，也把它们当作页面。这也负责编译我们的MDX。</p><p id="46e1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们设置代码远足</p><h1 id="f680" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">设置代码远足</h1><p id="b50d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">首先，让我们安装<a class="ae ln" href="https://www.npmjs.com/package/@code-hike/mdx" rel="noopener ugc nofollow" target="_blank">代码远足包</a></p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="39ca" class="mq lp iq mm b gy mr ms l mt mu">npm install @code-hike/mdx@next<br/># OR<br/>yarn add @code-hike/mdx@next</span></pre><p id="8e15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们必须添加代码Hike作为一个<a class="ae ln" href="https://remark.js.org/" rel="noopener ugc nofollow" target="_blank">备注</a>插件。Remark是一个简单的降价处理器，拥有一个庞大的插件生态系统。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="13e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Code Hike使用<a class="ae ln" href="https://github.com/shikijs/shiki" rel="noopener ugc nofollow" target="_blank"> Shiki </a>来提供语法高亮。我们可以在这里找到所有支持主题的列表<a class="ae ln" href="https://github.com/shikijs/shiki/blob/main/docs/themes.md#all-themes" rel="noopener ugc nofollow" target="_blank"/>。让我们和Monokai一起去做这个教程吧。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="2a41" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有最后一件事要做。我们需要将代码远足CSS添加到我们的应用程序中。打开<code class="fe mv mw mx mm b">_app.js</code>，将这一行代码添加到顶部</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><h1 id="2b3c" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">测试代码提升</h1><p id="2c1c" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">让我们在<code class="fe mv mw mx mm b">pages</code>目录下创建一个名为<code class="fe mv mw mx mm b">code-hike.mdx</code>的新文件。在那里添加以下mdx标记-</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="9403" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们首先编写一些基本的markdown，然后添加3个代码块。在这3个例子中，我在指定语言之后提供了一个文件名(在这3个例子中是<code class="fe mv mw mx mm b">js</code>)。</p><p id="8565" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在第一个代码块中，我们在文件名后面传入了<code class="fe mv mw mx mm b">box</code>属性。我们将它设置为<code class="fe mv mw mx mm b">1[25:39]</code>，其中<code class="fe mv mw mx mm b">1</code>表示行号，<code class="fe mv mw mx mm b">25:39</code>表示该行上要注释的字符范围。</p><p id="994e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">类似地，在第二个代码块中，我们传入<code class="fe mv mw mx mm b">focus</code>属性并将其设置为<code class="fe mv mw mx mm b">1:2,7</code>。这里<code class="fe mv mw mx mm b">1:2</code>表示要聚焦的行的范围。我们还通过添加逗号分隔的值来添加第7行。</p><p id="f6b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于第三个代码块，我们必须将内容和代码块包装在<code class="fe mv mw mx mm b">CH.Section</code>标签中。我们还必须将代码块包装在<code class="fe mv mw mx mm b">CH.Code</code>标签中。这是为了当我们指定文件名时，Code Hike知道我们将通过代码链接引用哪个文件。</p><p id="03f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将<code class="fe mv mw mx mm b">console.log</code>作为指向<code class="fe mv mw mx mm b">focus://console.js#2</code>的代码链接。这表明，每当我们将鼠标悬停在该代码链接上时，它将聚焦于<code class="fe mv mw mx mm b">console.js</code>代码块中的第二行。</p><p id="a3d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，这是它应该看起来像当我们导航到</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/2bb4ac6d8c685297e3ccc96bcb674431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QeBm1Vtuzn4dbie5"/></div></div></figure><p id="4a8f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是的，那些阴影很酷。</p><h1 id="ec45" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">结论</h1><p id="5d16" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这是代码远足的简要概述。Code Hike支持更多的东西，比如<a class="ae ln" href="https://codehike.org/demo/scrollycoding" rel="noopener ugc nofollow" target="_blank">滚动编码</a>和预览。Code Hike仍处于测试阶段，许多功能仍处于试验阶段。</p><p id="54a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望到目前为止一切顺利，现在您可以在您的博客或文档中使用Code Hike来实现极其强大的代码块！</p><p id="4c2c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一集见。</p><h1 id="76b3" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">🔗重要链接</h1><ul class=""><li id="1562" class="nb nc iq kt b ku mg kx mh la nd le ne li nf lm ng nh ni nj bi translated"><a class="ae ln" href="https://codehike.org/" rel="noopener ugc nofollow" target="_blank">代码远足</a></li><li id="f888" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><a class="ae ln" href="https://github.com/code-hike/codehike" rel="noopener ugc nofollow" target="_blank">代码Hike GitHub库</a></li><li id="d8c8" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><a class="ae ln" href="https://github.com/AnishDe12020/code-hike-example" rel="noopener ugc nofollow" target="_blank">本教程的GitHub库</a></li><li id="9280" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated"><a class="ae ln" href="https://code-hike-example.vercel.app/" rel="noopener ugc nofollow" target="_blank">本教程的部署预览</a></li></ul></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="b3e3" class="mq lp iq mm b gy mr ms l mt mu"><strong class="mm ir">Want to Connect?</strong></span><span id="834c" class="mq lp iq mm b gy nw ms l mt mu">Originally published at <a class="ae ln" href="https://blog.anishde.dev/powerful-code-blocks-with-code-hike-and-mdx" rel="noopener ugc nofollow" target="_blank">https://blog.anishde.dev</a>.</span></pre></div></div>    
</body>
</html>