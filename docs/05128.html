<html>
<head>
<title>Explaining JavaScript’s Fetch Using a Fast Food Drive-Thru Analogy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用一个快餐店的类比来解释JavaScript的获取</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/explaining-fetch-using-fast-food-drive-through-analogy-9b19428eab72?source=collection_archive---------5-----------------------#2020-06-11">https://betterprogramming.pub/explaining-fetch-using-fast-food-drive-through-analogy-9b19428eab72?source=collection_archive---------5-----------------------#2020-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ab60" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何得到你需要的东西</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/772dd6ccabf4ef1a0636e099e7214f54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NX1c0Kh6l1evAylC"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@micheile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米歇尔·亨德森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="749f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你用JavaScript编码，你可能听说过<code class="fe ls lt lu lv b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank">fetch</a></code>。<code class="fe ls lt lu lv b">Fetch()</code>通过与远程服务器通信，为您发出HTTP请求。<code class="fe ls lt lu lv b">Fetch()</code>可以发出所有的HTTP请求，但是它的默认请求是<code class="fe ls lt lu lv b">GET. Fetch() </code>总是返回一个<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" rel="noopener ugc nofollow" target="_blank">承诺</a>。</p><p id="4dcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了承诺，你现在可以链接并使用所有可用于承诺的方法。对于这篇文章，我只打算讨论<code class="fe ls lt lu lv b">.then()</code>。让我们看看下面的示例代码。我们会仔细检查每一条线，就像在快餐店一样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/65a3d30161dc98445404d94f6f750f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ViTLhNb6mticyVGIvSG3ng.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">获取示例</p></figure><p id="68d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了这个类比，我们要用德州图标Whataburger！所以，让我们做好准备，迎接美好的事物。好吃！</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="f2e6" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">下订单</h1><p id="ca4e" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">好吧，我们去本地的快餐店。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/b5dda9d602c19b6ea6fbfe13d7312423.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*fWySvNHbBDRCNgxfFGed2Q.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Whataburger得来速菜单</p></figure><p id="47b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">Fetch()</code>需要我们传递一个URL给它才能工作。<code class="fe ls lt lu lv b">Fetch()</code>也可以将选项作为参数，这在<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch" rel="noopener ugc nofollow" target="_blank"> MDN web文档</a>中有更详细的解释。您还希望传递一个带有正确路径的有效URL，以便将请求路由到正确的控制器。这样想吧:如果你在Whataburger，你想点一个巨无霸，你只会让员工感到困惑和失望。</p><p id="460a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们传递了一个有效的URL，我们就可以下订单了！让我们看看菜单:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/24d40dc0e01c9936c56968184e56f075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ExkJvIF7mMK7OA-G6hYyiw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Whataburger汉堡菜单</p></figure><p id="de4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它们看起来都很美味，但是让我们为这篇文章选择第五个。让我们对着对讲机问好。</p><ul class=""><li id="8a64" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">“喂？”</li><li id="278b" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">“你好，欢迎来到Whataburger。我能为你做些什么？”</li></ul><p id="4149" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">成功！我们得到了我们想要的回应！让我们点一份5号餐，开始我们旅程的下一部分。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="ab81" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">将您的订单打包并放入袋子中</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/65a3d30161dc98445404d94f6f750f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ViTLhNb6mticyVGIvSG3ng.png"/></div></figure><p id="ae90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你！我们现在在代码的第二行，离得到美味的汉堡又近了一步。</p><p id="26b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二行是我们如何处理HTTP响应。<code class="fe ls lt lu lv b">Res</code>是应答对象的简称。这是表示对请求的响应的对象。我们将<code class="fe ls lt lu lv b">.json()</code>放在<code class="fe ls lt lu lv b">Res</code>的末尾，从响应中提取JSON主体内容。回到我们的“得来速”旅程，这是我们把车停在窗口拿食物袋的地方。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/efdd75ad0862de04b01278be0ad5a697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*qAfUHGUY-_iBQSx_tonqcw.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">什么汉堡包</p></figure><p id="9916" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不错！但这就是我们的第二行代码。</p><p id="613c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就像一个包装好的汉堡，我们得到了我们想要的东西，但只有打开包装才能享用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/2267306d168cd56be330fe2604aaf94d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*djtODRdgRng5iQWH8m8PHg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片来自<a class="ae kv" href="https://www.facebook.com/whataburger/photos/a.196181800410538/2414945288534167/?type=3&amp;theater" rel="noopener ugc nofollow" target="_blank">脸书</a>上的Whataburger。</p></figure><p id="4958" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了打开我们的汉堡，我们需要做另一个步骤。输入我们代码的最后一行。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="6db8" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">打开食物，尽情享用吧！</h1><p id="8b66" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">我们马上就要品尝到所有的美味了！</p><p id="9959" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们最后一次看一下代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/65a3d30161dc98445404d94f6f750f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ViTLhNb6mticyVGIvSG3ng.png"/></div></figure><p id="bd71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的最后一行代码将响应体作为一个对象或一个对象数组来处理。在括号中，我们可以调用依赖于请求成功的函数，或者如果需要的话，我们可以更新DOM。</p><p id="88ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一行代码，在我们的类比中，我们调用一个函数来打开我们的汉堡。所以让我们把包好的汉堡和薯条一起从袋子里拿出来，找到可以开始打开汉堡的终点。打开汉堡。漫威看着它。咬一口。微笑吧，因为你刚刚尝到了天堂的滋味——尝到了汉堡的滋味。享受你剩下的晚餐吧！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/bf06144edf21b2474cde08e1bb857f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*LoK-N9sKPDNXP9JANrAGQg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Whataburger #5培根芝士汉堡</p></figure><p id="1c62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这个类比能够帮助您理解一个简单的<code class="fe ls lt lu lv b">Fetch()</code>请求是如何工作的。敬请期待下一篇文章！</p></div></div>    
</body>
</html>