<html>
<head>
<title>How To Validate Emails in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Flutter中验证电子邮件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-validate-emails-in-flutter-957ae75926c9?source=collection_archive---------3-----------------------#2021-05-26">https://betterprogramming.pub/how-to-validate-emails-in-flutter-957ae75926c9?source=collection_archive---------3-----------------------#2021-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e9e6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用这个Flutter包使验证变得简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/93bfd3a0cfa14e3b6d5599bcdc86f79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IuheXKNPd97EDoTAWe5OMQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Solen Feyissa 在<a class="ae ky" href="https://unsplash.com/s/photos/email-valdation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="2094" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">欢迎阅读我的第一篇关于颤振包测试的文章。每周，我都会测试另一个发布在<a class="ae ky" href="https://pub.dev/" rel="noopener ugc nofollow" target="_blank"> pub.dev </a>下的包。</p><h2 id="3343" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">电子邮件验证程序</h2><p id="658b" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">本周的软件包为您提供了一个简单易用的功能来验证电子邮件输入。作者提到这是一个简单(但“正确”)的Dart类，用于电子邮件验证，不使用正则表达式。我们稍后会回到为什么他称之为正确。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="d7c5" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">目录</h2><blockquote class="na nb nc"><p id="1910" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated"><a class="ae ky" href="#fbc0" rel="noopener ugc nofollow"> <em class="it">用途<br/> </em> </a> <a class="ae ky" href="#8131" rel="noopener ugc nofollow"> <em class="it">范围<br/> </em> </a> <a class="ae ky" href="#d662" rel="noopener ugc nofollow"> <em class="it">举例<br/> </em> </a> <a class="ae ky" href="#05dc" rel="noopener ugc nofollow"> <em class="it">局限性</em></a><br/><a class="ae ky" href="#ca6b" rel="noopener ugc nofollow"><em class="it">安装</em></a><em class="it"><br/></em><a class="ae ky" href="#9859" rel="noopener ugc nofollow"><em class="it">版本</em></a><em class="it"><br/></em><a class="ae ky" href="#8530" rel="noopener ugc nofollow"><em class="it">分数</em></a></p></blockquote><h2 id="fbc0" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">目的</h2><p id="9e16" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我认为这个方案的目的非常明确。例如，如果您想用电子邮件地址和密码注册一个用户，您必须验证该电子邮件地址是有效的。如果不是，你可以给你的用户一个提示，让他们再次检查他们的电子邮件地址是否有拼写错误。创建新用户时，并非所有后端系统都支持电子邮件验证。根据你的应用程序的用户体验，当用户完成电子邮件地址输入并想要开始填写密码时，帮助他们也会好得多。</p><p id="a977" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数时候，当你需要的时候，你就开始搜索电子邮件验证。看看堆栈溢出，这个场景中投票最多的响应是一个复杂的正则表达式。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="8131" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">范围</h2><p id="032c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">除了<code class="fe nh ni nj nk b">EmailValidator.validate(value)</code>方法之外，这个包在整个验证过程中只有私有的、不可用的函数。</p><p id="ec18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://github.com/fredeil/email-validator.dart" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>里面看，只有一个类叫做<code class="fe nh ni nj nk b">email_validator.dart</code>。事实上，没有使用正则表达式来验证输入。相反，作者利用类型参数并将其与输入进行比较。通过使用这一点，他使得算法对想要理解黑盒的人来说更加清晰。</p><p id="4738" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仔细看看，我明白作者为什么强调他的包是正确的:验证器不仅验证“name@email.de”，还验证包含IPv4或IPv6域的电子邮件地址(例如name@[123.123.123.123])。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="d662" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">例子</h2><p id="486f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">pub.dev上给出的例子简单地展示了如何使用来自<code class="fe nh ni nj nk b">EmailValidator</code>类的<code class="fe nh ni nj nk b">validate</code>方法来验证硬编码的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="7e03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用变化的输入测试电子邮件验证时，您可以使用如下例所示的<code class="fe nh ni nj nk b">TextField</code>。用户在<code class="fe nh ni nj nk b">TextField</code>中所做的任何更改都会得到验证。在<code class="fe nh ni nj nk b">TextField</code>下面，我放了一个简单的<code class="fe nh ni nj nk b">Text</code>显示当前输入是否有效。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn nm l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Luciano Jung在Youtube上的视频</p></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="05dc" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">限制</h2><p id="7477" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">通过测试可能的电子邮件地址，我发现了一个GitHub gist显示有效和无效的电子邮件地址:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="deb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这个列表，我发现电子邮件验证器的算法非常好，但是它有一个限制。当输入电子邮件地址email@example.web时，它第一眼看上去并没有提到它是无效的。看看顶级域名的维基百科页面。网络”不是其中之一。从技术上来说，这是一个错误的验证，但这是一个不值得的努力。要检查这一点，你还必须及时更新所有列出的顶级域名，并在验证电子邮件地址时检查它们。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="ca6b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">装置</h2><p id="4dd4" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">要安装这个包，您可以在命令行中使用Dart或Flutter命令，或者简单地在依赖项下的<code class="fe nh ni nj nk b">pubspec.yaml</code>中添加最新版本的<code class="fe nh ni nj nk b">email_validator</code>。</p><p id="56f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">带省道:</p><pre class="kj kk kl km gt no nk np nq aw nr bi"><span id="857f" class="lv lw it nk b gy ns nt l nu nv"><strong class="nk iu">$</strong> dart pub add email_validator</span></pre><p id="4c4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">带颤振:</p><pre class="kj kk kl km gt no nk np nq aw nr bi"><span id="dde3" class="lv lw it nk b gy ns nt l nu nv"><strong class="nk iu">$</strong> flutter pub add email_validator</span></pre><p id="e153" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将向您的包的<code class="fe nh ni nj nk b">pubspec.yaml</code>添加一行代码(并运行一个隐式的<code class="fe nh ni nj nk b">dart pub get</code>):</p><pre class="kj kk kl km gt no nk np nq aw nr bi"><span id="33e7" class="lv lw it nk b gy ns nt l nu nv">dependencies:<br/>  email_validator: ^latest_version</span></pre><p id="dea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，您的编辑器可能支持<code class="fe nh ni nj nk b">dart pub get</code>或<code class="fe nh ni nj nk b">flutter pub get</code>。查看您的编辑器的文档以了解更多信息。</p><p id="3753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">导入它</strong></p><p id="6ba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在您的Dart代码中，您可以使用:</p><pre class="kj kk kl km gt no nk np nq aw nr bi"><span id="9d35" class="lv lw it nk b gy ns nt l nu nv"><strong class="nk iu">import</strong> 'package:email_validator/email_validator.dart';</span></pre></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="9859" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">版本</h2><p id="8c78" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">撰写本文时的最新版本是2.0.1。最新版本支持Flutter 2的零安全。查看历史记录，您可以看到发行者在这个包中加入了一些工作来保持它的最新。他还清理了代码，修复了社区提到的bug。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="8530" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">得分</h2><p id="cdbc" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这个包的受欢迎程度说明了一切:325个赞，来自Flutter的130个pub积分，以及98%的受欢迎程度。</p><p id="0b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">Furthermore, the package supports<strong class="lb iu"> </strong>null safety and all current platforms (Android, iOS, Linux, macOS, web, Windows). It was first published in August 2018 and has supported null safety since March of this year. It’s under the MIT License and uses AppVeyor to validate the building process. The tests of this project test several email addresses themselves, including email addresses in other languages like Chinese, Hindi, and Greek (e.g. 伊昭傑@郵件.商務).</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="109b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">评级</h2><p id="022d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">总而言之，我会给这个包打9/10分，因为它简单易用。前面提到的一个限制和这个包中只有一个函数的开销是我只给出9分的原因。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="41dd" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">链接</h2><p id="0270" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">你可以在<a class="ae ky" href="https://pub.dev/packages/email_validator" rel="noopener ugc nofollow" target="_blank"> pub.dev </a>找到这个包。</p><p id="52cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想看看我写的每个包的应用程序，请前往<a class="ae ky" href="https://github.com/lucianojung/flutter_package_examples" rel="noopener ugc nofollow" target="_blank">我的GitHub </a>。</p><p id="a473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对这个包的源代码感到好奇，可以在GitHub 上查看一下<a class="ae ky" href="https://github.com/fredeil/email-validator.dart" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="7073" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="http://buymeacoffee.com/lucianojung" rel="noopener ugc nofollow" target="_blank">喜欢支持这类内容的话给我买个寿司卷</a>。</p></div></div>    
</body>
</html>