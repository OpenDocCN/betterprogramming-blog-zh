<html>
<head>
<title>Document Your GitHub Repo Changes to Google Sheets Using Ballerina</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ballerina将您的GitHub回购变更记录到Google Sheets</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/document-your-github-repo-changes-to-google-sheets-using-ballerina-e1446dabf5ae?source=collection_archive---------4-----------------------#2022-10-06">https://betterprogramming.pub/document-your-github-repo-changes-to-google-sheets-using-ballerina-e1446dabf5ae?source=collection_archive---------4-----------------------#2022-10-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="985e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将GitHub Repo与Google Sheets集成</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6851a972ff7d64d7787010245724887f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JfDEWh-e_nlAiWMZ74cyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="4094" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文着眼于如何在Ballerina中将GitHub repo与Google Sheets集成，以便每次GitHub repo中发生特定事件时，您都可以将其记录在自己的Google Sheets中。多酷啊！无论是在标签下创建的问题，还是打开的PR，甚至是提交到存储库，您都可以通过几个简单的步骤在Google Sheet中记录所有内容。</p><h1 id="f29c" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">最终目标</h1><p id="be0e" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">最终目标是在Github事件被触发时动态填充一个Google表单！看起来是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/f6a3ad0c81769117af397a47e2d8d4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*0SMyi1VN8xc_2oRnBeb7bg.gif"/></div></figure><p id="bd99" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个项目的源代码可以在GitHub上通过<a class="ae mp" href="https://github.com/TharushiJay/github-gsheet-integration" rel="noopener ugc nofollow" target="_blank">这个链接</a>访问！</p><h1 id="f25e" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">芭蕾舞演员是什么？</h1><p id="9cc5" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">Ballerina是一种面向云的开源编程语言，它使使用、组合和创建网络服务变得更加容易。对于芭蕾舞新手，请参考<a class="ae mp" href="https://ballerina.io/" rel="noopener ugc nofollow" target="_blank"> ballerina.io </a>了解入门步骤。为了继续，您需要安装芭蕾舞演员。按照这些<a class="ae mp" href="https://ballerina.io/downloads/" rel="noopener ugc nofollow" target="_blank">步骤</a>进行安装。</p><p id="4dfc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下实现使用芭蕾舞演员的天鹅湖版本。</p><h1 id="21a8" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">第1部分:配置GitHub Webhook来监听事件</h1><p id="5e7a" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">最初，您需要在本地机器中公开订阅者服务，以便服务器能够访问URL。因此，我们将使用<a class="ae mp" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank"> ngrok </a>，它允许您将运行在本地机器上的web服务器暴露给互联网。</p><p id="f745" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">步骤1:一旦你安装了<a class="ae mp" href="https://ngrok.com/download" rel="noopener ugc nofollow" target="_blank">ngrok，你所要做的就是运行下面的命令来告诉ngrok你的web服务器正在监听哪个端口。在我们这里是<code class="fe mq mr ms mt b">port 9090</code>。</a></p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="9e95" class="my ls iq mt b gy mz na l nb nc">ngrok http -bind-tls=true 9090</span></pre><p id="70b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦您启动并运行了ngrok，它将如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/34dae69e8f4196682f038b45329c8498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YuaPyLTfT_YNSuQhc4hr8Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">突出显示的URL将被用作回调URL</p></figure><p id="9c16" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用上面突出显示的ngrok URL作为订户服务的回调URL。</p><p id="84b2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们这里是<code class="fe mq mr ms mt b">https://b3e0–112–134–171–11.ngrok.io</code>。</p><p id="bf49" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">步骤2:为我们想要接收通知的存储库注册一个GitHub webhook。</p><p id="3504" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在存储库主页中，导航到设置-&gt; Webhooks -&gt;添加webhook。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/bf967219490206f15b3d5444e1b73333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaOM5jfgU77VCh8wbaMR5w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">进入设置-&gt;网页挂钩-&gt;添加网页挂钩</p></figure><ul class=""><li id="924f" class="nf ng iq kx b ky kz lb lc le nh li ni lm nj lq nk nl nm nn bi translated">将有效负载URL设置为ngrok回调URL，后跟ballerina服务的服务路径名。在我们这里，它是<code class="fe mq mr ms mt b">https://b3e0–112–134–171–11.ngrok.io/events</code>。</li><li id="36b3" class="nf ng iq kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">将内容类型设置为application/JSON，然后单击Add webhook。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/590a9b2c2bcecc5ac2d575965824d9c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blvNKJfrZwgFrFqmR_dlPA.png"/></div></div></figure><ul class=""><li id="366c" class="nf ng iq kx b ky kz lb lc le nh li ni lm nj lq nk nl nm nn bi translated">接下来，您应该创建一个<a class="ae mp" href="https://docs.github.com/en/enterprise-server@3.4/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" rel="noopener ugc nofollow" target="_blank">个人访问令牌</a>，在使用GitHub API时，它将作为使用密码对GitHub进行身份验证的替代方法。</li><li id="3cc1" class="nf ng iq kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">登录你的GitHub账户，进入<a class="ae mp" href="https://github.com/settings/tokens" rel="noopener ugc nofollow" target="_blank">https://github.com/settings/tokens</a>。</li><li id="a596" class="nf ng iq kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">在“个人访问令牌”下，单击“生成新令牌”，这将带您进入如下所示的界面:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/a122c816fbcbb6694ab934adc80c5608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bDQQT5-qMuV_82kbdgchQ.png"/></div></div></figure><p id="29b8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于您的新PAT，根据您的意愿设置到期日期，然后选择范围以准确指定您需要的访问类型。</p><p id="e3ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于这个应用程序，我们将选择<code class="fe mq mr ms mt b">repo</code>、<code class="fe mq mr ms mt b">write:packages</code>、<code class="fe mq mr ms mt b">admin:repo_hook</code>、<code class="fe mq mr ms mt b">notifications</code>的范围，并生成令牌。创建后，请务必复制您的PAT，因为您将无法再次看到它。</p><p id="70dd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们用芭蕾舞者来写我们的代码！</p><p id="2e0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，通过在终端中运行以下代码来创建一个芭蕾舞项目。我们将称我们的项目为<code class="fe mq mr ms mt b">gsheet_github_integration</code>。</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="9ba3" class="my ls iq mt b gy mz na l nb nc">tharushijayasekara@Tharushi/Test % bal new gsheet_github_integration<br/>Created new package 'gsheet_github_integration' at gsheet_webhook_integration.</span></pre><p id="3669" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这创建了一个带有<code class="fe mq mr ms mt b">main.bal</code>和<code class="fe mq mr ms mt b">Ballerina.toml</code>的项目，前者包含我们的主方法，后者包含我们项目的配置。将以下代码添加到<code class="fe mq mr ms mt b">main.bal</code>中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="b332" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们仔细查看代码，我们所做的是通过设置repo、ngrok回调URL以及我们刚刚为身份验证创建的GitHub PAT的路径来创建一个订阅者服务来侦听GitHub事件。</p><p id="1d7c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">订户服务是使用WebSub订户服务创建的。WebSub是一种基于HTTP webhooks的通用机制，用于在Web内容的发布者和他们的订阅者之间进行通信。确认和验证订阅请求以及发布可用的新内容都是通过hub完成的。</p><p id="6bf3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关于如何充分利用websub模块的更多详细信息，请参见https://lib.ballerina.io/ballerina/websub/latest<a class="ae mp" href="https://lib.ballerina.io/ballerina/websub/latest" rel="noopener ugc nofollow" target="_blank">的芭蕾舞演员API文档。</a></p><p id="d26e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，每次发送事件通知时，我们将所需的数据填充到一个Details类型的记录中。在将事件类型设置为Issue或PR之后，我们将记录传递到<code class="fe mq mr ms mt b">insertDetails()</code>中，根据事件类型在Google sheet上记录事件细节。</p><h1 id="63d2" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">第2部分:集成Google Sheets API</h1><p id="6936" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">对于实现的下一部分，我们将创建一个名为GitHub Changes的Google表单，用两个表单来记录PR细节和问题细节。让我们记下工作表ID，它是URL下面突出显示的部分:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/1861c78ec7b119498ae76bbcf9270977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g2T4DrZWlp5KlIhq59cxcA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">工作表ID</p></figure><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="af88" class="my ls iq mt b gy mz na l nb nc"><a class="ae mp" href="https://docs.google.com/spreadsheets/d/1l4KUKQ0e5HKB35doSRcaF3QgNYvBAp99q_l5GS3J1B8/edit#gid=0" rel="noopener ugc nofollow" target="_blank">https://docs.google.com/spreadsheets/d/1l4KUKQ0e5HKB35doSRcaF3QgNYvBAp99q_l5GS3J1B8/edit#gid=0</a></span></pre><p id="837f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，在同一个项目中创建另一个名为<code class="fe mq mr ms mt b">gsheet.bal</code>的文件来访问Google Sheets API，并插入以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="8e33" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们在这里所做的就像它看起来那样简单。只需调用Google Sheets API将新的数据行追加到我们的Google Sheets中。</p><p id="f3d8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一个任务是找出上面代码中使用的<code class="fe mq mr ms mt b">refreshToken</code>、<code class="fe mq mr ms mt b">clientId</code>和<code class="fe mq mr ms mt b">clientSecret</code>。</p><ol class=""><li id="42e2" class="nf ng iq kx b ky kz lb lc le nh li ni lm nj lq ny nl nm nn bi translated">打开<a class="ae mp" href="https://console.developers.google.com/apis/credentials" rel="noopener ugc nofollow" target="_blank"> Google API控制台凭证</a>页面，登录您的相关Google帐户并创建一个新项目。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/0da5a8afb02c3af968d50537cd3bd616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZKMEdQGFD8L1jqEf1Qrgg.png"/></div></div></figure><p id="a0ab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.为项目命名，然后点按“创建”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/52201281172301549fbe1ed7806c576c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJHIIz80IARgzoGrPCSXpQ.png"/></div></div></figure><p id="7efe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.单击“配置同意屏幕”选择您希望如何配置和注册您的应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/0fb3fa615c44f88b0b92f71ca3d8a4a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sjh7dr_SiWWpxUD0gTX6dQ.png"/></div></div></figure><p id="3e60" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.将用户类型设置为外部，然后单击创建。</p><p id="37a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">5.在OAuth同意屏幕中，输入应用程序名称、用户支持电子邮件、开发人员联系信息，然后单击保存并继续。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/c535402bd5ae0727c422980615edb297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mlJcay1RFZXIirNxBDzqeg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/2a612645aa6b37124c823051483e6fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18Fhh0xD53w9kMCHXaZeOQ.png"/></div></div></figure><p id="8fac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">6.在“范围”屏幕中，单击“保存并继续”,然后进入下一个屏幕“测试用户”。</p><p id="71c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">7.在测试用户下，添加您的电子邮件地址，然后单击保存并继续。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/12fb7c1b92ed6057f13cb7eb10d1253c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EJxvMe3_hlJ_VRaLGGsZqQ.png"/></div></div></figure><p id="88ef" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">8.最后，您将看到一个摘要，以验证您输入的详细信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/74f90f6ff6e613b5fba1b88891927c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pGXNSGikO_0s32RbGQPUlw.png"/></div></div></figure><p id="4254" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">9.下一步，在凭据下单击创建凭据，然后单击OAuth客户端ID。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/958505354d34619d01a1e966932a4781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3iTGMlsQAXLDGOXCUohXQ.png"/></div></div></figure><p id="ac2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">10.在创建OAuth客户端ID屏幕中输入以下详细信息，然后单击创建。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/cd393470ab138243ae905a80508e48e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pkzC11oVmTxU8EKpdZW1aw.png"/></div></div></figure><p id="a437" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">11.这将生成一个客户端ID和客户端密码，您应该保存以供将来使用！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/343298a95c5f720b1b472977b64dbe3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZuMoqhhfXtPWvc9qgsxmfA.png"/></div></div></figure><p id="8fef" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">12.从左侧菜单中，选择Library，搜索Google Sheets API，并单击它以启用它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/903b25f0c6830627de2abde4d8195484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RScr-GbH_NAfrBvVwQ63w.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/37a47209e5986b168a07c919f7166e80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4F4S-p2C8tcJ-_fMtPkKsQ.png"/></div></div></figure><p id="26e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">13.为了获得刷新令牌，导航到<a class="ae mp" href="https://developers.google.com/oauthplayground/" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0 Playground </a>并点击屏幕右上角的OAuth 2.0配置按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/fffd8d266b5925c0f0fa585d1b97ca26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lMtLVmpA0-LZzgFpFea-A.png"/></div></div></figure><p id="9f18" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">14.选择使用您自己的OAuth凭据，提供获得的客户端ID和客户端密码值，然后关闭窗口。</p><p id="aab4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">15.在步骤1中，从API列表中选择<code class="fe mq mr ms mt b">Google Sheets API v4</code>,并选择所有的作用域。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/a9c22b8ecb3df7c91565973773b6a50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTj2-fgmnoWfCsK1hic3-g.png"/></div></div></figure><p id="05fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">16.点击授权API按钮，当系统询问您是否允许时，选择您的Gmail帐户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/494a24f273897ffc665b41d44ca84301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3B9fmFFDxkko6zQtD6Iyw.png"/></div></div></figure><p id="357c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">17.在步骤2下，单击“交换令牌的授权码”以生成和显示访问令牌和刷新令牌。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/1e117e4b67df0f0378d085384449e15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_r-NuquK1mxJl4IaS6_7_w.png"/></div></div></figure><p id="3bb5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这让我们结束了对Google Sheets API的配置！使用我们的<code class="fe mq mr ms mt b">gsheet.bal</code>文件中的刷新令牌、客户机ID和客户机秘密，并使用<code class="fe mq mr ms mt b">bal run</code>运行项目。</p><p id="6c0f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">输出如下，这意味着服务在<code class="fe mq mr ms mt b">port 9090</code>成功启动。</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="4e10" class="my ls iq mt b gy mz na l nb nc">tharushijayasekara@Tharushi github-gsheet-integration % bal run<br/>Compiling source<br/>        tharushijayasekara/github_gsheet_integration:0.1.0<br/>WARNING [gsheet.bal:(31:5,32:95)] unused variable 'append'<br/>WARNING [gsheet.bal:(47:5,48:95)] unused variable 'append'<br/>WARNING [main.bal:(17:5,17:5)] concurrent calls will not be made to this method since the method is not an 'isolated' method<br/>WARNING [main.bal:(24:21,29:84)] unused variable 'issueResponse'<br/>WARNING [main.bal:(33:21,38:95)] unused variable 'pullRequestResponse'</span><span id="584a" class="my ls iq mt b gy oo na l nb nc">Running executable</span><span id="4c8f" class="my ls iq mt b gy oo na l nb nc">time = 2022-04-10T22:18:14.755+05:30 level = WARN module = ballerina/websub message = "HTTPS is recommended but using HTTP"</span></pre><p id="de78" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你会在我们的谷歌表单上看到这些变化！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/bced5169a81f6394bef007a1a1267e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*1EF7Lu9LGN82ZGZngE6rdQ.gif"/></div></figure><p id="0a57" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您已经成功地为GitHub配置了一个webhook，并使用一个用Ballerina编程语言编写的订阅者接收了事件！</p><p id="0cf0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">谢谢你坚持到底。要了解芭蕾舞演员的最新动态，请访问<a class="ae mp" href="https://ballerina.io/" rel="noopener ugc nofollow" target="_blank">https://ballerina.io/</a>。</p></div></div>    
</body>
</html>