<html>
<head>
<title>Build a Customizable Meter in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中构建可定制的仪表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-customizable-meter-in-swiftui-a44fabeb08c2?source=collection_archive---------9-----------------------#2020-05-22">https://betterprogramming.pub/build-a-customizable-meter-in-swiftui-a44fabeb08c2?source=collection_archive---------9-----------------------#2020-05-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a02d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为初学者体验SwiftUI</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7be8ad6490ddb0ba3d825a35e483d393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H75ZRh7Bj5KFshmV2z3dNg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="594d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">SwiftUI为开发人员提供了快速模拟和调整设计元素的能力。使用故事板、UIViews和核心图形需要几个小时或几天的创作现在只需要几分钟。由于结果完全在代码中，它们可以高度重用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/7a6c8025b1ceebc0de55889bcc93430c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*5526esmajI1tszZ3Objtfw.gif"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="25c4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">设置</h1><p id="ba69" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">启动Xcode并选择新项目。选择单视图iOS应用程序。然后选择Swift作为语言，SwiftUI作为用户界面。</p><p id="8056" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">删除<code class="fe mw mx my mz b">ContentView.swift</code>文件中的所有内容。然后将下面的实现复制并粘贴到<code class="fe mw mx my mz b">ContentView.swift</code>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="0b2b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的代码中，我们创建了一个LevelMeter视图及其包含的MeterCell视图。LevelMeter视图是可重用的，并且可以通过改变显示的条的数量和它所绑定的值来定制。</p><p id="29e3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要么构建并运行，要么在画布中预览。通过调整滑块，您应该能够看到仪表在工作。当指示器达到峰值时，您会看到文本从顶部开始显示。您可以通过调整跟随文本的修改器(“BOOM”)中的值来轻松试验动画:</p><pre class="kg kh ki kj gt nc mz nd ne aw nf bi"><span id="4c0a" class="ng ma iq mz b gy nh ni l nj nk">.animation(.interpolatingSpring(stiffness: 100.0, damping: 5.0))</span></pre><p id="0480" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用SwiftUI，可以很容易地试验小细节，并在画布中近乎实时地看到结果。这可以大大减少开发时间。</p><p id="5d55" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于那些不熟悉Swift应用于范围的模式匹配操作符(<code class="fe mw mx my mz b">~=</code>)的人来说，<code class="fe mw mx my mz b">colorForLower()</code>函数可能会令人困惑。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f89d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mw mx my mz b">~=</code>操作符只是让我们知道范围是否包含传递给函数的“下限”变量。</p><p id="293a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">蛇行动画是在将MeterCell视图添加到LevelMeterView中的仪表时，通过简单地更改该视图的alignment属性而产生的。动画从对齐的一侧开始生长。</p><pre class="kg kh ki kj gt nc mz nd ne aw nf bi"><span id="4a0e" class="ng ma iq mz b gy nh ni l nj nk"> .alignment: number.isMultiple(of: 2) ? .leading : .trailing)</span></pre><p id="d97b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了获得不同的效果，您可以将上面的内容更改为:</p><pre class="kg kh ki kj gt nc mz nd ne aw nf bi"><span id="e349" class="ng ma iq mz b gy nh ni l nj nk">.alignment: .trailing</span></pre><p id="ae88" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">非常简单的变化会产生非常大的影响。可重用组件允许我们以一种几乎像复制和粘贴一样简单的方式进行大的修改。例如，我添加了第二个指示器条、一个滑块和另一个文本标签。我还把较低范围的颜色改成了蓝色。大约花了一分钟。看起来是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/166a38d9f04eac32b22e9545e136272e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*7mbAv5NDDuWntuKhi06M1g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">新面貌</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="cde9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">挑战</h1><ol class=""><li id="4d7c" class="nm nn iq kx b ky mr lb ms le no li np lm nq lq nr ns nt nu bi translated">匹配上面的更改。</li><li id="12da" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">使滑块垂直。</li><li id="e6dc" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">将百分比标签和动画“BOOM”文本移动到水平仪视图中。</li></ol><p id="1975" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.添加更多不同的颜色范围。</p></div></div>    
</body>
</html>