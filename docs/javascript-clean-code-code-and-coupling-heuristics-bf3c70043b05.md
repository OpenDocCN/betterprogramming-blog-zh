# JavaScript 干净代码:代码和耦合启发式

> 原文：<https://betterprogramming.pub/javascript-clean-code-code-and-coupling-heuristics-bf3c70043b05>

## 我们看一般的代码气味

![](img/c54bcd65a2f52803b6f46d3c4acca2e7.png)

由[斯蒂芬·克拉克莫](https://unsplash.com/@srkraakmo?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/magnifying-glass?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

糟糕的代码有许多独特的字符。在这篇文章中，我们将看看每一个和他们是什么。我们看更一般的代码味道。

# 信息太多

定义良好的模块应该很小，允许我们用很少的代码做很多事情。它们没有提供很多可以依赖的功能，所以耦合是松散的。

一个坏的模块有很多我们必须调用才能完成的函数，所以耦合度很高。

应该尽量减少暴露在模块中的东西。数据和实现应该被隐藏，除非它们不能被隐藏。我们不应该创建大量被其他类继承的实例变量。

实用函数应该对其他模块隐藏。最后，我们应该可以参考一些事情来尽量减少耦合。

# 死代码

死代码绝对应该从我们的代码库中删除。

它会被忽略，也不会根据最新的惯例进行更新。因此，它应该从我们的代码中删除。我们的测试应该检查它是否在没有死代码的情况下工作。

# 垂直间隔

变量和函数应该放在它们被使用的地方，这样我们就不必为了跟踪代码而进行大量的滚动。

# 不一致

我们应该保持命名的一致性。例如，在命名事物时，我们应该坚持 JavaScript 惯例。

函数和类都是大写字母。变量是骆驼大小写。常量是大写的。名称一致的东西更容易修改。

# 杂乱

我们应该删除任何扰乱我们代码的东西。无用的代码应该被删除。不使用的实体应该消失。

一切都应该井井有条，干净整洁，没有杂乱。

# 人工耦合

耦合应该总是最小化，这样不应该耦合在一起的东西就不会耦合。一个事物对另一个事物了解得越少越好。

它们没有任何用途，并且进行更改更加困难，因为无论何时进行更改，我们都必须处理所有的耦合。当我们让一些东西工作时，我们应该清理我们的代码，这样我们就不会出现这些情况。

# 特征羡慕

一个类的方法应该对它们所在的类的变量和函数感兴趣，而不是其他类的变量和函数。

我们应该尽可能少地引用外部来源的代码。

下面的例子说明了什么是特征羡慕:

我们有大量引用了`Rectangle`类的`ShapeCalculator`类。我们称其为构造函数和实例变量。

然而，我们不应该这样做，因为它引用了太多来自`Rectangle`类的内容。我们可以删除对实例变量的引用，如下所示:

正如我们所看到的，我们不需要接触内部来获得矩形的面积。如果没有必要，最好不要从`Rectangle`实例中引用`length`和`width`。

这是因为当我们对`Rectangle`类进行修改时，如果我们引用了这些实体，我们必须修改`ShapeCalculator`类中的很多东西。

比如我们把`length`和`width`的名字改成别的，那就要到处改。

# 选择器参数

在函数中选择功能的布尔参数是错误的。当我们选择它时，很难知道`true`或`false`是什么意思。如果我们确实需要一个选择器参数，我们应该把一个函数一分为二。这和其他争论一样糟糕。

避免布尔参数是将一个函数分成多个函数的明确标准之一。如果我们确实需要选择器，它们应该是更清晰的东西，比如字符串或整数。

# 模糊的意图

我们希望我们的代码对我们的读者尽可能清晰。因此，命名应该揭示标识符的意图。

因此，变量`x`是一个坏名字，因为它没有告诉我们任何东西，但是`numApples`是一个好名字，因为我们知道它的意思。我们知道它储存了许多苹果。

# 错位的责任

代码应该放在我们期望的地方。例如，`PI`应该属于一个`Math`类作为常量。我们不应该在把某些功能放在哪里的问题上耍小聪明。我们把它放在什么地方对读者来说应该是直观的。

函数的名字应该告诉我们把代码放在哪里。例如，`getHoursWorked`应该在`Employee`类中，因为它属于一个雇员。

# 不适当的静电

静态方法应该只用于不对实例进行操作的函数。因此，`getHoursWorked`不应该是`Employee`类中的静态方法，因为工作小时数属于雇员。

适合静态方法的是那些不关心它所操作的类的实例的方法。

例如，`Math.min`方法应该是一个静态方法，因为我们不需要`Math`实例做任何事情。

# 结论

当编写干净的代码时，我们必须考虑许多事情。不过，大部分都是常识。我们应该编写清晰的代码，并尽可能少地暴露于外部，以减少耦合。

名字应该清楚，这样每个人都知道我们的意思。最后，东西必须放在它们有意义的地方。