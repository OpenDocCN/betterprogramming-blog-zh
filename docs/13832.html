<html>
<head>
<title>Making Music From Images With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python制作图像音乐</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/making-music-from-images-with-python-81db627fd549?source=collection_archive---------0-----------------------#2022-10-01">https://betterprogramming.pub/making-music-from-images-with-python-81db627fd549?source=collection_archive---------0-----------------------#2022-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b2f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">迷因随着音乐的声音而活跃</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c88fd901e4dae3c57fbc72266002f8a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WHByu0E1j4AKA9e3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/ja/@sanarara?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">谢李普</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="9ba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说音乐是我生活中不可或缺的一部分是一种轻描淡写。我做了20多年的吉他手，没有一天我不听它。事实上，在开始我作为一名物理化学家的学术旅程之前的12年里，我几乎要追求音乐生涯了。</p><p id="2ba0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然我不能走这条路，但我仍然可以享受音乐，用音乐做一些很酷的事情。例如，在这个项目中，我认为制作一个可以从图像中制作音乐的程序会很酷。过去有一些非常巧妙的尝试来产生这样的东西，然而，结果并不十分…美妙。</p><p id="5576" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文的剩余部分，我将展示我从图像中创作歌曲的尝试，这些图像(依我拙见)听起来相当酷。这篇文章将主要详细介绍主要结果，并展示该计划的一些整洁的例子。如果你想看完整的代码，你可以在我的网站<a class="ae ky" href="https://victormurcia.github.io/Making-Music-From-Images-in-Python/" rel="noopener ugc nofollow" target="_blank">这里</a>和/或GitHub仓库<a class="ae ky" href="https://github.com/victormurcia/Making-Music-From-Images" rel="noopener ugc nofollow" target="_blank">这里</a>找到。我用Streamlit做了一个应用程序，你可以在这里用<a class="ae ky" href="https://victormurcia-making-music-from-images-music-to-images-ce4ydi.streamlitapp.com/" rel="noopener ugc nofollow" target="_blank">玩</a>。</p><h1 id="99da" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">基本思想</h1><p id="efb0" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我实现这一目标的策略和思考过程如下:</p><ul class=""><li id="0d40" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">图像是由像素组成的</li><li id="4007" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">像素由指定颜色的数字数组组成</li><li id="5762" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">颜色是通过颜色空间如RGB、BGR或HSV来描述的</li><li id="e583" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">色彩空间可以被划分成多个部分</li><li id="6a73" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">音阶通过音程被细分成音符</li><li id="b339" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">声音是振动，因此每个音符都与一个频率相关联</li><li id="f2f9" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">因此，颜色空间的细分可以映射到音阶中的特定音符。这个音符会有一个与之相关的频率。</li></ul><p id="23b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们试一试！</p><h1 id="d930" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用HSV颜色空间</h1><p id="6c03" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">HSV是由三个值控制的颜色空间。这三个值是色调、饱和度和亮度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/1392e139c9c96cc4d5cba7320e6aebe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EV_soMd1wcZETeDZMIVP-g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">HSV cylinder By HSV _ color _ solid _ cylinder . png:SharkD衍生作品:SharkD Talk—HSV _ color _ solid _ cylinder . png，CC BY-SA 3.0，<a class="ae ky" href="https://commons.wikimedia.org/w/index.php?curid=9801673" rel="noopener ugc nofollow" target="_blank">https://commons.wikimedia.org/w/index.php?curid=9801673</a></p></figure><p id="1633" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">色调被定义为“刺激与被描述为红色、橙色、黄色、绿色、蓝色、紫色的刺激相似或不同的程度。”换句话说，色调代表颜色。</p><p id="25ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">饱和度被定义为“一个区域的色彩与其亮度成比例”换句话说，饱和度表示颜色与白色混合的程度。</p><p id="79dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">亮度被定义为“由视觉目标的亮度引起的感知”。换句话说，饱和度表示颜色与黑色混合的程度。</p><p id="81a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本颜色的色调值:</p><ul class=""><li id="b4e5" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">橙色0–44</li><li id="e1d0" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">黄色44- 76</li><li id="4006" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">绿色76–150</li><li id="685d" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">蓝色150–260</li><li id="f5db" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">紫罗兰色260–320</li><li id="ba7f" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">红色320–360</li></ul><p id="778d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将在HSV颜色空间中工作，因为它已经被自然地细分了，所以它使随后的频率映射更加直观。类似地，色调通道(在这个空间中主要负责颜色)从其他两个通道中分离出来，这简化了事情。</p><p id="f2e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个图像的色彩空间与生成它们的代码之间的比较示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/aaf57c47540b2472d81407c95e865799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAUiVNeHi3l2Ae1qvxCsBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">色彩空间。由<a class="ae ky" href="https://stock.adobe.com/contributor/201652684/agsandrew?load_type=author&amp;prev_url=detail" rel="noopener ugc nofollow" target="_blank"> agsandrew </a>制作的原始RGB图像。作者对BGR和HSV的描述。</p></figure><h1 id="837c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">提取色调通道</h1><p id="72d5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们有了HSV格式的图像，让我们从每个像素中提取色调(H)值。这可以通过在图像的高度和宽度上嵌套for循环来完成。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="cc03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我有了一个包含每个像素的<code class="fe nk nl nm nn b">H</code>值的数组，我将把结果放入pandas数据帧中。数据帧中的每一行是一个像素，因此，每一列将包含关于该像素的信息。我将这个数据帧称为<code class="fe nk nl nm nn b">pixels_df</code>，你可以在下面看到它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/9c4e1121a4f8223718267baf67b634e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*72f45mRoMkkUCYldwCpVew.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从图像的H值制作pixels_df。图片作者。</p></figure><p id="42ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">dataframe目前由一个名为“hues”的列组成，其中每行代表我加载的图像上每个像素的H通道。</p><h1 id="4cdd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">将色调转换为频率</h1><p id="dd30" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我最初的想法是将一个色调值转换成一个频率，这涉及到一组预先设定的频率到<code class="fe nk nl nm nn b">H</code>值之间的映射。映射函数如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7a4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该函数将<code class="fe nk nl nm nn b">H</code>值和一个包含要将H映射到的频率的数组作为输入。这个例子使用一个名为<code class="fe nk nl nm nn b">scale_freqs</code>的数组来定义频率。<code class="fe nk nl nm nn b">scale_freqs</code>中使用的频率对应于A谐波小音阶。</p><p id="7753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，定义H的阈值数组(称为<code class="fe nk nl nm nn b">thresholds</code>)。然后，该阈值阵列可用于使用lambda函数将<code class="fe nk nl nm nn b">H</code>转换为来自<code class="fe nk nl nm nn b">scale_freqs</code>的频率。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/b868ffe603ebea78ddcbb57e986a26d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*pCczDiz5b_BOE2CtdLSp6A.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">pixels_df带有映射到每个色调值的频率。作者图片</p></figure><h1 id="1976" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">将NumPy数组转换为可播放的音频</h1><p id="04eb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">酷！现在，我有了一个频率数组，我将把<code class="fe nk nl nm nn b">notes</code>列转换成一个名为<code class="fe nk nl nm nn b">frequencies</code>的numpy数组，因为我可以用它来制作一个可播放的音频文件:】为此，我可以使用scipy中内置的<code class="fe nk nl nm nn b">wavfile.write</code>函数，并确保我使用了适当的数据类型转换(对于1D数组，它是<code class="fe nk nl nm nn b">np.float32</code>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="84a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以听到我用下图的前60个像素制作的歌曲(我可以尝试使用组成该图像的所有230，400个像素，但这首歌最终会有几个小时长)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">歌曲1-也称为1997年歌曲2中侠影热门歌曲之前的歌曲。按作者。</p></figure><p id="5fbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这真是太棒了！但是让我再玩一会儿。</p><h1 id="205a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包括八度音阶</h1><p id="b382" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我决定将八度音阶的效果(也就是说，让音符听起来更高或更低)纳入我的“创作歌曲”程序。给定音符使用的八度音程将从数组中随机选择。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="0117" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们听听吧！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">八度音阶之歌(风暴之歌不太为人所知的表亲)</p></figure><p id="f15b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">厉害！现在我们有了一些变化。然而，我们确实有所有这些像素，我们通过从随机像素中选取频率来使用它们怎么样？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按作者计算</p></figure><p id="6b97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太棒了。我们现在基本上有了一个歌曲生成器，我们可以随心所欲地玩它！</p><p id="3a26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道这有点像迷因，但是“这是数学岩石吗？”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/01b07c9fc99cccf34d21c52300ab600c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*4UE2mu1RjjZy0SwWAQlYWA.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我认为这有资格成为数学摇滚。在<a class="ae ky" href="https://www.reddit.com/r/mathrock/comments/lyvnfo/when_someone_says_they_like_math_rock_what_do/" rel="noopener ugc nofollow" target="_blank"> Reddit </a>上找到的图片</p></figure><h1 id="eccd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">生成其他比例</h1><p id="ff39" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">到目前为止，我已经展示了如何使用A-harmonic小调音阶从图像中生成音乐。尽管这个音阶很酷，但如果我们的音阶的起始音(主音)和其他音程能有更多的变化，除了那些由和声小调音阶结构定义的音程，那就更好了。这将允许我们的程序给生成的歌曲添加更多的味道和种类。</p><p id="32f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了做到这一点，我首先需要一种方法来为我们希望使用的主音产生频率。Katie He有一篇精彩的文章<a class="ae ky" href="https://towardsdatascience.com/music-in-python-2f054deb41f4" rel="noopener" target="_blank">在这里</a>找到了，这篇文章对Python和音乐进行了很好的探索。我在作品中运用了她的一个功能，将钢琴音符映射到如下所示的频率:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d42c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的函数将作为我的歌曲/音阶生成例程的起点，它可用于生成一个字典，该字典将对应于标准钢琴中88个键的音符映射到以Hz为单位的频率，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="18bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们需要根据音调来定义音阶音程，这样我们就可以索引我们的音符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个，我们现在可以在之前的音调列表中找到我们音阶的索引。这是必要的，因为我将重新索引列表，以便它从我们想要的主音开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e815" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此之后，我可以定义一组不同的小数位数数组，其中每个元素对应于上一步中创建的reindex数组中的一个索引。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="f8b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">差不多准备好了！我还将定义在这里使用的音程，以防我想为我们制作的歌曲制作和声。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="1485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而现在，我可以把前面步骤的结果拿来做一首歌了！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="68e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">厉害！我现在有相当多的参数可以用来做歌曲。我可以设置音阶，调，八度，和声，像素数，像素是否随机选择，每个音符的持续时间。</p><p id="e4e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在几张图片上测试一下吧！除非另有说明，所有图像的采样率均为22050Hz。</p><p id="1464" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在手机上阅读下一部分，强烈推荐使用耳机，因为一些较低的频率似乎不能很好地从标准的手机音频中出来。</p><h1 id="680e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">像素艺术实验</h1><p id="fa59" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我认为一个自然的实验场所是通过像素艺术。这里是许多歌曲中的一首，这些歌曲是使用由<a class="ae ky" href="https://medium.com/@retronator?source=post_page-----2e211a6200e2--------------------------------" rel="noopener"> @Matej 'Retro' Jan </a>创作的这首优美的歌曲作为源图像而产生的。这首歌是用A大调的第三个八度音程作为基础创作的。我觉得听起来挺可爱的！这让我觉得我好像正走过一个快乐的小镇。我认为这非常适合老派电子游戏的介绍阶段。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/566975b78d6afd32cd7dc55f5957a8fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G77LMWEHeKjwr8TZ_Qeoig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="nt"> Pixel China Mountains，Matej ' Retro ' 2013年1月，根据Marta Nael </em>的<a class="ae ky" href="http://martanael.deviantart.com/art/China-Mountains-345041389" rel="noopener ugc nofollow" target="_blank"><em class="nt">China Mountains</em></a><em class="nt"/></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者的像素艺术歌曲</p></figure><h1 id="7f48" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">孔雀之歌</h1><p id="210b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这首歌是用多里安和第三个八度音域创作的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/1561a9add1ad22c679371538131f6f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSoefZyv40AzTOiOYek18g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">孔雀图。图片由<a class="ae ky" href="https://www.123rf.com/profile_photopiano" rel="noopener ugc nofollow" target="_blank">https://www.123rf.com/profile_photopiano</a></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><h1 id="716a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">水之歌</h1><p id="c7f5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这首歌是用B吕底亚语和第二个八度音域创作的。这个是我最喜欢的。我觉得作为吉他即兴演奏听起来会很酷。这让人想起了梦剧场将要上演的一幕！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/7886c10368fc3db379079e0c2c8879a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0qj0KQScer30JOd1tvQmQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">水图。约翰·萨拉塔斯的照片。知识共享许可</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><h1 id="fea3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">卡特琳娜·宋</h1><p id="cccd" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我的猫Catterina让我超级开心。这首歌是用和声小调和第三个八度音域创作的。我觉得听起来真的很不错！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/20972b3269da04788d6e6e9553d11b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4W1usWC0SfUI7_WhBiM29g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卡特琳娜。作者照片。</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><h1 id="3a58" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包括通过2D数字阵列的歌曲中的和声</h1><p id="9e38" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我开发的程序允许和声加入到我们的歌曲中。用户可以定义使用什么和声(即，全五度、小六度等。)然后使用我之前展示的例程，从中推导出正确的音符音程。下面，我将展示一个从图像制作的歌曲的例子，对应的和声，以及两者放在一起成一个单一的。wav文件通过2D numpy数组。</p><p id="3f69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<code class="fe nk nl nm nn b">scipy.io.wavfile.write</code>的文档来看，如果我想把一个2D数组写到一个. wav文件中，2D数组必须有(<code class="fe nk nl nm nn b">Nsamples</code>、<code class="fe nk nl nm nn b">Nchannels</code>形式的维度。注意我们的数组现在是什么形状<code class="fe nk nl nm nn b">(2, 264600)</code>。这意味着我们有<code class="fe nk nl nm nn b">Nchannels = 2</code>和<code class="fe nk nl nm nn b">Nsamples = 264600</code>。为了确保我们的numpy数组有正确的形状用于<code class="fe nk nl nm nn b">scipy.io.wavfile.write</code>，我将首先转置数组。这首歌是用一个#和声小调，第二个八度音域和一个小调第三和声创作的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/233ca32b017eb63de173ccea2c40b547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZC6G4M7Cc35ttvdU-gXng.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新西兰峡湾国家公园的水反射着天空。<a class="ae ky" href="https://www.markgray.com.au" rel="noopener ugc nofollow" target="_blank">图片版权标记灰色</a></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><h1 id="8490" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用Spotify的Pedalboard库为我们的歌曲添加效果</h1><p id="e5b1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">太好了！但是我们可以做得更多！我要加载。wav文件，并使用Spotify的pedalboard模块对其进行一些额外的操作。太棒了，我强烈推荐你去看看。你可以在这里和这里阅读更多关于pedalboard库<a class="ae ky" href="https://github.com/spotify/pedalboard" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="03d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将首先使用由压缩器、增益、合唱、相位器、混响和梯形滤波器组成的踏板重新处理我之前展示的水之歌。结果如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><p id="b805" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">超级爽！这听起来很棒！想象这是用鼓轨道或现场乐器演奏的。</p><p id="c051" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我将使用阶梯滤波器、延迟、混响和音高移位重新处理我之前展示的Catterina歌曲。结果如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><p id="ea07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">啊，听起来不错！</p><p id="567b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为最后一个例子，我将使用阶梯滤波器、延迟、混响、合唱、音高移位和相位器重新处理由我之前展示的自然图片制作的和声歌曲。结果如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq ni l"/></div></figure><h1 id="5f89" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用Librosa映射其他音乐量</h1><p id="295e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Librosa是一个很棒的软件包，可以对声音数据进行各种操作。这是另一个我强烈推荐你去看看的包！在这里，我用它来轻松地将频率转换成“音符”和“Midi数字”</p><p id="2346" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">乐器数字接口(MIDI)文件用作一种文件格式，可以连接到各种电子乐器、电脑和其他音频设备。因此，能够以这种格式保存我们的歌曲将使其他感兴趣的音乐人或程序员能够拿着这首歌进行试验。</p><p id="de05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，我展示了一些函数，这些函数可以用来映射我从例程中生成的频率，以获得我们的歌曲的相关音符和<code class="fe nk nl nm nn b">midi_numbers</code>！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/0ce86b1592380b51bbbcedfce68ac17e.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*kndurtYMWKPiG3fdh8nhQw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最终数据框架为宋使用librosa和熊猫。作者图片</p></figure><h1 id="c437" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">用我们的歌制作MIDI</h1><p id="4023" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我已经生成了一个包含频率、音符和midi数字的数据帧，我可以用它制作一个midi文件了！然后我可以使用这个MIDI文件为我们的歌曲生成乐谱:】。</p><p id="e720" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了制作一个MIDI文件，我将使用<code class="fe nk nl nm nn b">midiutil</code>包。这个包允许我们从一组MIDI数字中构建MIDI文件。您可以通过设置音量、节奏和轨道来以多种方式配置文件。现在，我只做一个单声道的midi文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="2e34" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="731d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我展示了如何从图像制作音乐，以及如何将我们的歌曲输出到。wav文件进行后续处理。我展示了如何使用这种方法来构建和声，并且由此可以构建更复杂、丰富和/或怪异的和声。我还想在这个方法中加入一些其他的东西，但是我会留到以后再说。有大量的实验可以用这个来做！</p><p id="60f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一名音乐家，发现自己陷入困境，缺乏创作新音乐的灵感，也许可以在我的应用程序中添加一张图片，也许你会得到一个可以借鉴的好主意。你永远不知道灵感会从哪里来！</p><p id="bf71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我享受了制作这个项目的乐趣，我希望你在使用它和在它的基础上有乐趣！</p><p id="132c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这里添加了GitHub库<a class="ae ky" href="https://github.com/victormurcia/Making-Music-From-Images" rel="noopener ugc nofollow" target="_blank">的链接，在这里</a>添加了我为这个<a class="ae ky" href="https://victormurcia-making-music-from-images-music-to-images-ce4ydi.streamlitapp.com/" rel="noopener ugc nofollow" target="_blank">制作的Streamlit应用的链接。</a></p><p id="be15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">玩得开心，感谢阅读！</p><p id="dc29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你愿意支持我的编码工作，请考虑通过我的推荐链接加入Medium:<a class="ae ky" href="https://victormurcia-53351.medium.com/membership" rel="noopener">https://victormurcia-53351.medium.com/membership</a></p></div></div>    
</body>
</html>