# 理解 Python 用户定义函数的 12 个例子

> 原文：<https://betterprogramming.pub/python-user-defined-functions-65f8662e2528>

## 从语法、文档、参数和自变量到局部和全局变量的一切

![](img/6e790e6363ebf48069c20bbdd7c6cd4b.png)

[Boitumelo Phetla](https://unsplash.com/@writecodenow?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

你好，欢迎来到我的 Python 用户定义函数指南。本文将涵盖 Python 用户定义函数的基础知识、您必须掌握的语法，以及帮助您巩固新获得的知识的示例。

# 介绍

简单来说，函数接受输入，执行计算，并产生输出。Python 有用户自定义函数、匿名函数和内置函数，比如`print()`函数。我敢肯定，你们都会把`print()`函数看作是通向精彩编程世界的入门代码。

```
print("Hello World")
>>> Hello World
```

然而，今天我们将把重点放在用户自定义函数上。在编程中，你最终会到达一个点，在那里你会一遍又一遍地重复同样的代码。这既耗时又不必要的重复。在编程中，这个有个缩写:DRY(不要重复自己)！为了避免这种情况，您可以定义自己的函数。这将有助于使你的代码有条理，可管理，可重用。这个想法是，你可以在必要的时候调用(使用)你的函数，而不是为不同的输入反复编写相同的代码。

![](img/ee9abecbaa566e6cb88fccad48643aba.png)

[flickr.com](https://www.flickr.com/photos/foggodavid/5998340587)

语法是定义代码的一组规则(在这里是您的函数)。

## 第一行(表头)

*   关键词`def`
*   函数名(保持相关性—链接到[命名约定](https://www.python.org/dev/peps/pep-0008/#:~:text=Use%20the%20function%20naming%20rules,invoke%20Python's%20name%20mangling%20rules.))
*   圆括号`()`，可以包含也可以不包含参数和自变量
*   和一个冒号`:`

## 函数/语句块(体)

*   功能块的下面几行包括该功能应该做什么。所有这些行都必须缩进(按 Tab)。
*   函数的第一条语句可以是可选语句、函数的文档字符串或 docstring。可以用`help(function_name)`或`print(function_name.__doc__)`调用。我将在下面详细介绍。
*   语句`return [expression/value]`退出一个函数，向用户返回一个值或表达式。不带参数的 return 语句与`return None`相同。
*   如果不使用 return 语句，函数将不返回值(void 函数)。这方面的一个例子是`print()`函数。它只是在你的屏幕上打印输出；但是，没有赋值，也不能被其他函数调用。当赋给一个变量时，该变量将没有值。

## 调用/使用该功能

*   要调用函数，只需在没有缩进的新行上键入函数名，后跟括号(以及所需的任何参数)。

```
**# Example 1****def** function_name(Parameters / Arguments):
        "function_docstring"
         function / computations
         **return** expression / value function_name(Parameters / Arguments)
```

# 文档字符串

在编程世界中，为了更好地阅读，编写代码文档是标准的做法。这可以是以[注释](https://www.python.org/dev/peps/pep-0008/#comments)或[文档字符串](https://www.python.org/dev/peps/pep-0008/#documentation-strings)的形式。(点击链接了解更多关于 Python 约定的信息。)重要的是将你的代码文档化，让第三方用户能够理解，例如在工作项目或开源协作中。注释和文档字符串也将使单个项目更容易回忆起来。

那么什么是 docstring 呢？docstring 是一个字符串文字，用于描述函数做什么，而不是如何使用它。使用该函数的第三方用户可以读取 docstring，以便更好地掌握参数、条件、返回的内容以及可能出现的任何错误。对于简单的函数，Docstrings 可以是一行，对于更深入的函数，可以是多行。按照惯例，文档字符串用三重引号括起来，并缩进到紧接函数名的那一行。

## 一行程序

```
**# Example 2****def** squared_number(x):
       """ Argument passed into x returns x squared """
       **return** x*x
```

## 多衬里

# 参数和自变量

形参和实参本质上是一样的东西。参数是函数括号中列出的变量名，而实参是调用(使用)函数时通过参数传递的值。参数可以是变量、值或对象。

```
**# Example 4****def** summation(a,b):
      """ return a - b """
      **return** a - b
```

这些参数分别命名为`a`和`b`。

```
**print**(summation(3,6))
>>> -3
```

然后，当我们调用函数时，实参通过这些参数传递。`3`通过参数`a`传递，`6`通过`b`传递。这些参数称为位置参数，必须在正确的位置调用。

**注意:**如果您为固定位置参数调用了错误数量的参数，该函数将返回一个错误。

```
print(summation(6))>>>TypeError: summation() missing 1 required positional argument:'b'
```

争论有多种形式。到目前为止，我们只看到了固定的位置参数。还有另外三种常用的论证形式。它们是默认参数、关键字参数和任意参数。

# 默认参数

在 Python 中，函数参数可以有默认值。简单地说，如果一个值对于 80%或更多的使用是合理的，那么它需要是一个默认值。这使得调用函数更加简洁，同时仍然允许配置。定义函数时，可以使用 Python 中的赋值运算符(`=`)为参数赋值默认值。如果调用没有参数值的函数，将使用其默认值。

在上面的例子中，首先只使用强制的`name`参数调用函数。如果没有调用名字，函数将返回一个错误。然而，`msg`参数被留空，导致函数打印默认值“早安”对该函数的第二次调用提供了强制的`name`参数和一个用于`msg`参数的新值(导致默认值被覆盖)。

**注意:**任何数量的参数都可以有一个默认值，但是一旦使用了一个，后面的每个参数也必须有一个默认值；否则该函数将返回一个错误。简而言之，任何固定位置参数都必须放在默认参数之前。

```
**def** greet(msg = "Good morning!", name):>>>SyntaxError: non-default argument follows default argument
```

# 关键字参数

关键字参数有助于使您的函数调用更加明确，因为它清楚地表明了每个参数所代表的内容。关键字参数的另一个积极属性是，它们可以在不适当的位置被调用，从而提高代码的可读性。

第一个调用验证了上面提出的观点:关键字参数允许简洁清晰的可读性，并且能够在位置之外调用。从视觉上看，您可以更好地理解作为参数传递的度量。

第二个调用重申了固定位置参数必须在任何关键字参数/默认参数之前调用的事实。定义和调用函数时，同样的规则也适用。

# 武断的论点

可以用任意数量的参数定义一个函数。换句话说，参数的数量不需要固定。这可以通过解包操作实现。

解包运算符是从可迭代对象中解包值的运算符。单星号操作符`*`可以用于任何 iterable，而双星号操作符`**`只能用于关键字参数(字典)。

## ***args**

如果你不知道在运行时之前你将通过一个函数传递多少个参数，会发生什么？你可以写一个列表并通过你的函数传递它，但是这可能不太方便。这就是`*args`真正有用的地方，因为它允许传递不同数量的位置参数。

传递给函数的位置参数将被解包到一个名为`args`的 iterable 对象中，它是一个元组。元组支持切片和迭代。然而，元组是不可变的。因此，您不能修改对象中的值。

```
**def** karate_roster(*names):
      **pass**
```

变量`args` 只是一个名字，可以更改，尽管使用`args`作为命名协议是 Python 的惯例。

**注意:**函数体中的`pass` 语句是用作未来代码的占位符。拥有一个空的主体通常会返回一个错误，从而终止程序执行。

## *** *夸脱**

`**kwargs`的工作方式和`*args`一样，但是它不接受位置参数，而是接受关键字参数。这些关键字将被解压缩到一个可迭代的字典对象中。记住这一点，内置的字典方法，比如`item()`，可以应用于对象。

上面的函数解包使用`**kwargs` 操作符创建的 dictionary 对象。然后，它使用`item()`方法检查每个字典条目。如果关键字(孩子的名字)已经存在于字典中，它将孩子的值(出勤频率)加 1。如果是孩子的第一次，将为他们创建一个值为 1 的新密钥。

这是一个关于`**kwargs` 如何提高代码可读性、可重用性和效率的例子。教师不必根据有多少孩子来上课而编辑或创建新的函数，教师可以简单地预计不同数量的学生，调用他的函数并使用`**kwargs`解包。

变量`kwargs` 只是一个名字，可以更改，尽管使用`kwargs`作为命名协议是 Python 的惯例。

# 命令

记住必须定义或传递参数的顺序很重要:

1.  位置参数
2.  默认值、关键字和`*args`参数
3.  `**kwargs`论据

错误地传递或定义它们将导致引发错误。以下示例显示了正确和不正确的参数顺序。

# 全局和局部变量

理解局部变量和全局变量的概念以及它们如何与函数交互是很重要的。

*   局部变量是在函数内部声明的。局部变量在函数开始执行时创建，在函数终止时丢失(永久)。
*   全局变量在函数外部声明。全局变量在执行开始时创建，在程序结束时丢失。它们也可以在函数中访问(在块内部)。

上面的例子演示了全局变量和局部变量。在函数外部，我们有一个值为`3`的变量`x`。在我们的函数中，有一个值为`5`的变量`x`。这是两个不相关的对象，互不影响。

一旦函数被执行，本地`x`变量将永远丢失。然而，全局变量`x`将继续保持其值，直到程序停止运行。

如果希望在函数中重新分配全局变量，可以使用关键字`global`。

在结束之前，我认为了解可变对象及其被局部修改的能力是很方便的。在函数(局部)内修改可变对象，如字典或列表，会对函数(全局)外的对象产生直接影响。

这不适用于不可变的对象，因为不可变的对象不能被修改或改变。

这就是我的 Python 用户定义函数指南。我希望你发现它信息丰富和有用。在接下来的几周里，我将继续撰写关于内置函数和匿名函数的文章。保持快乐和健康，皮托尼斯塔。