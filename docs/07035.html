<html>
<head>
<title>Get to Know the UseState Hook in React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解React.js中的UseState钩子</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/get-to-know-the-usestate-hook-in-react-js-d87797cb5a7?source=collection_archive---------14-----------------------#2020-11-30">https://betterprogramming.pub/get-to-know-the-usestate-hook-in-react-js-d87797cb5a7?source=collection_archive---------14-----------------------#2020-11-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9304" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">因为功能组件很牛逼</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/517819664652e86078f201057034e0a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VgTrI7fyXouNag3J3bPt8Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="b0f2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天，我们来看看React中的<code class="fe lu lv lw lx b">useState</code>钩子。本文将是React Hooks系列文章的第一部分。本文中使用的演示回购的链接可以在下面找到:</p><div class="ly lz gp gr ma mb"><a href="https://github.com/jonathanbrierre/hooks-demo" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">jonathanbrierre/hooks-演示</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">下面的应用程序是我用React Hooks创建的博客系列的演示。您可以找到相关的…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp ks mb"/></div></div></a></div></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="2858" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated"><strong class="ak">假设</strong></h1><ul class=""><li id="cbb0" class="np nq it la b lb nr le ns lh nt ll nu lp nv lt nw nx ny nz bi translated">您了解React中的基本状态功能。</li><li id="1499" class="np nq it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated">您了解基本的JavaScript事件处理。</li><li id="e4e4" class="np nq it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated">你了解基本的函数式编程。</li></ul></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="9d8a" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">我们开始吧！</h1><p id="e672" class="pw-post-body-paragraph ky kz it la b lb nr ju ld le ns jx lg lh of lj lk ll og ln lo lp oh lr ls lt im bi translated">下面是两个受控输入字段之间的比较。一个是使用类状态，另一个是使用带有<code class="fe lu lv lw lx b">useState</code>钩子的函数状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/d9c0d45df528b03d2bb1df3390cbadf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*5Kujc3InrhKZNUVNIY6o5g.gif"/></div></figure><p id="8a02" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您不熟悉如何在React中控制输入字段，或者为什么控制它们是必要的，请随意查看我以前的文章<a class="ae oj" href="https://levelup.gitconnected.com/building-a-simple-controlled-form-in-react-js-b7e28236bf2e" rel="noopener ugc nofollow" target="_blank">关于构建一个简单的受控表单。</a></p><p id="bb1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们查看类组件时，您可以看到它非常简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="fcba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的<code class="fe lu lv lw lx b">render</code>方法中，我们有控制输入字段的<code class="fe lu lv lw lx b">name</code>状态。</p><p id="5ff6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们看看我们的功能组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="dd8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你所看到的，我们的状态现在使用<code class="fe lu lv lw lx b">useState</code>钩子减少到一行。让我们把这个再拆开一些！</p><pre class="kj kk kl km gt om lx on oo aw op bi"><span id="7a2d" class="oq my it lx b gy or os l ot ou">const [name, setName] = useState("")</span></pre><p id="8941" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们调用<code class="fe lu lv lw lx b">useState</code>函数时，它会把我们的初始状态值作为参数。在这种情况下，我们的默认参数是一个空字符串。</p><p id="a7bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后这个函数返回一个包含组件状态和状态设置函数的数组。我们通过析构被调用的<code class="fe lu lv lw lx b">useState</code>钩子的返回值来访问状态和状态设置器。在这种情况下，当我们进行析构时，我们将返回值命名为<code class="fe lu lv lw lx b">name</code>和<code class="fe lu lv lw lx b">setName</code>。如果您不熟悉JavaScript中的析构，请查看下面的文档！</p><div class="ly lz gp gr ma mb"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">解构分配</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">析构赋值语法是一个JavaScript表达式，它使得从数组中解包值成为可能，或者…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">developer.mozilla.org</p></div></div><div class="mk l"><div class="ov l mm mn mo mk mp ks mb"/></div></div></a></div><p id="14ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们控制表单时，设置新值可以像将新的状态值传递给我们的setter函数一样简单:</p><pre class="kj kk kl km gt om lx on oo aw op bi"><span id="974c" class="oq my it lx b gy or os l ot ou">const handleOnChange = (e) =&gt; {<br/>  setName(e.target.value) // the setter function defined from hook<br/> }</span></pre><p id="df98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就这样，我们的形式被控制了！</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="60a1" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated"><strong class="ak">多个状态值</strong></h1><p id="1e98" class="pw-post-body-paragraph ky kz it la b lb nr ju ld le ns jx lg lh of lj lk ll og ln lo lp oh lr ls lt im bi translated">如果我们想用<code class="fe lu lv lw lx b">useState</code>控制多个值怎么办？</p><p id="279e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用一个类组件这样做很简单，只需添加更多的状态变量，并确保所需的输入字段连接到它们。</p><p id="468e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们能对<code class="fe lu lv lw lx b">useState</code>做同样的事情吗？是的，我们可以！</p><p id="21bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是一个新组件，它有两个由单个<code class="fe lu lv lw lx b">useState</code>钩子控制的输入字段:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/9f1161cd40981dfa3b53d0b2acc1f8f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*krsEfD0HukGXLez4Yfhkrw.gif"/></div></figure><p id="d1d4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看代码，看看这是如何工作的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><h2 id="8603" class="oq my it bd mz ow ox dn nd oy oz dp nh lh pa pb nj ll pc pd nl lp pe pf nn pg bi translated"><strong class="ak">创建我们的状态</strong></h2><p id="f688" class="pw-post-body-paragraph ky kz it la b lb nr ju ld le ns jx lg lh of lj lk ll og ln lo lp oh lr ls lt im bi translated">在这种情况下，由于我们想要一个单独的<code class="fe lu lv lw lx b">useState</code>钩子来管理状态变量，我们将像在类组件中那样定义我们的状态——用一个组件范围的<code class="fe lu lv lw lx b">initialState</code>变量引用一个对象。我们将把我们的<code class="fe lu lv lw lx b">initialState</code>对象作为初始值传递给我们的<code class="fe lu lv lw lx b">useState</code>钩子。记住，我们传递给钩子的值成为析构钩子调用的第一个返回值。这包括对象。</p><p id="ac73" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们想要引用状态中的不同变量时，我们会调用<code class="fe lu lv lw lx b">state.firstName</code>或<code class="fe lu lv lw lx b">state.lastName</code>。在我们的输入字段中定义<code class="fe lu lv lw lx b">value</code>属性时，您可以看到这种情况发生:</p><pre class="kj kk kl km gt om lx on oo aw op bi"><span id="b45d" class="oq my it lx b gy or os l ot ou">&lt;input type="text" value={state.firstName} onChange={handleOnChange} name="firstName"/&gt;</span><span id="ea30" class="oq my it lx b gy ph os l ot ou">&lt;input type="text" value={state.lastName} onChange={handleOnChange} name="lastName"/&gt;</span></pre><h2 id="74bd" class="oq my it bd mz ow ox dn nd oy oz dp nh lh pa pb nj ll pc pd nl lp pe pf nn pg bi translated"><strong class="ak">改变我们的状态</strong></h2><p id="a73f" class="pw-post-body-paragraph ky kz it la b lb nr ju ld le ns jx lg lh of lj lk ll og ln lo lp oh lr ls lt im bi translated">下一部分是用一个函数动态改变状态的小技巧。如果您阅读了我关于受控表单的文章，您会发现这个功能与我为类组件实现的功能非常相似:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="4d4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">钩子的setter方法可以接受一个回调作为参数。这个回调接收的参数是对期望的更改发生之前的状态(在本例中为<code class="fe lu lv lw lx b">prevState</code>)的引用。</p><p id="8970" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了不改变状态，我们将返回一个新对象，它将成为我们的新状态。在这个新的状态对象中，我们将在<code class="fe lu lv lw lx b">previousState</code>对象上使用JavaScript的ES2015 <code class="fe lu lv lw lx b">…</code> spread操作符。通过这样做，我们可以保存不受期望的状态变化影响的值。我们可以根据作为参数传递给<code class="fe lu lv lw lx b">onChange</code>事件处理程序中的<code class="fe lu lv lw lx b">handleOnChange</code>回调的事件对象来更改我们想要的值。如果您想了解关于spread操作符的更多信息，可以查看下面的文档:</p><div class="ly lz gp gr ma mb"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">扩展语法(...)</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">扩展语法(...)允许诸如数组表达式或字符串的可迭代对象在零或…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">developer.mozilla.org</p></div></div><div class="mk l"><div class="pi l mm mn mo mk mp ks mb"/></div></div></a></div></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="82cc" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated"><strong class="ak">结论</strong></h1><p id="08d1" class="pw-post-body-paragraph ky kz it la b lb nr ju ld le ns jx lg lh of lj lk ll og ln lo lp oh lr ls lt im bi translated"><code class="fe lu lv lw lx b">useState</code>钩子是管理功能组件状态的一种简洁而通用的方法。如果你想看看我用来创建这个演示的回购，请查看以下内容:</p><div class="ly lz gp gr ma mb"><a href="https://github.com/jonathanbrierre/hooks-demo" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">jonathanbrierre/hooks-演示</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">下面的应用程序是我用React Hooks创建的博客系列的演示。您可以找到相关的…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp ks mb"/></div></div></a></div><div class="ly lz gp gr ma mb"><a href="https://reactjs.org/docs/hooks-state.html" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd iu gy z fp mg fr fs mh fu fw is bi translated">使用状态钩子-反应</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">钩子是React 16.8中的新增功能。它们允许您使用状态和其他React特性，而无需编写类。的…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">reactjs.org</p></div></div><div class="mk l"><div class="pj l mm mn mo mk mp ks mb"/></div></div></a></div><p id="9799" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">编码快乐！</p></div></div>    
</body>
</html>