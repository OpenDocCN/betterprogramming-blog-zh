<html>
<head>
<title>Install Tensorflow 1.13 on Ubuntu 18.04 with GPU support</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在有GPU支持的Ubuntu 18.04上安装Tensorflow 1.13</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/install-tensorflow-1-13-on-ubuntu-18-04-with-gpu-support-239b36d29070?source=collection_archive---------0-----------------------#2019-03-15">https://betterprogramming.pub/install-tensorflow-1-13-on-ubuntu-18-04-with-gpu-support-239b36d29070?source=collection_archive---------0-----------------------#2019-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="278e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">完整的安装指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fed7fafa7c136c74ce085080bd5fb494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2jOwlN51GkwrAIOFgjd7g.png"/></div></div></figure><p id="15bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>本文不是为了从源代码构建，因为1.13已经支持CUDA 10.0和CuDNN 7.5。此外，在这里你不会发现NCCL安装-因此，<a class="ae ln" href="https://github.com/tensorflow/tensorflow/releases/tag/v1.13.1" rel="noopener ugc nofollow" target="_blank">发布</a> NCCL是核心的一部分，不需要安装。</p><p id="406d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为什么不装2.0版本？Tensorflow 2.0现已发布，计划今年在Q2稳定发布。如果你现在想试试这个，点击这里查看来自Tensorflow团队<a class="ae ln" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank">的官方指南。<strong class="kt ir">更新</strong>:tensor flow 2快速安装指南你可以在这里</a><a class="ae ln" href="https://medium.com/@Oysiyl/install-tensorflow-2-with-gpu-support-on-ubuntu-19-10-f502ae85593c?" rel="noopener">找到</a>。</p><p id="347b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像往常一样，我添加了最新内核的安装过程，该内核有一个长期版本(在本例中是4.19)。你可以点击查看关于内核<a class="ae ln" href="https://www.kernel.org/category/releases.html" rel="noopener ugc nofollow" target="_blank">的信息。这一部分是可选的，需要你签署一个未签名的内核——这可能很危险——所以请随意跳过这一部分。</a></p><p id="1107" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么，让我们开始吧！</p><h1 id="5912" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">步骤1:更新和升级您的系统</h1><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="f98e" class="ml lp iq mh b gy mm mn l mo mp">sudo apt-get update <br/>sudo apt-get upgrade</span></pre><h1 id="c40d" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">步骤2:验证你有一个支持CUDA的GPU</h1><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="4cf5" class="ml lp iq mh b gy mm mn l mo mp">lspci | grep -i nvidia</span></pre><p id="0121" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果看不到任何设置，请通过在命令行输入update-pciids(通常位于/sbin中)来更新Linux维护的PCI硬件数据库，并重新运行前面的lspci命令。</p><h1 id="d768" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">步骤3:验证您拥有受支持的Linux版本</h1><p id="07ac" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">要确定您运行的是哪个发行版和发行版本号，请在命令行中键入以下内容:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="f520" class="ml lp iq mh b gy mm mn l mo mp">uname -m &amp;&amp; cat /etc/*release</span></pre><p id="720b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">x86_64行表示您正在cuda 10.0支持的64位系统上运行。</p><h1 id="58eb" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">可选步骤:安装4.19内核</h1><p id="c4d4" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">下载数据:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="e5a9" class="ml lp iq mh b gy mm mn l mo mp">cd /tmp/<br/>wget -c http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.19/linux-headers-4.19.0-041900_4.19.0-041900.201810221809_all.deb<br/>wget -c http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.19/linux-headers-4.19.0-041900-generic_4.19.0-041900.201810221809_amd64.deb<br/>wget -c http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.19/linux-image-unsigned-4.19.0-041900-generic_4.19.0-041900.201810221809_amd64.deb<br/>wget -c http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.19/linux-modules-4.19.0-041900-generic_4.19.0-041900.201810221809_amd64.deb</span></pre><p id="2901" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="c044" class="ml lp iq mh b gy mm mn l mo mp">sudo dpkg -i *.deb</span></pre><p id="3443" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在你得到了内核，但是需要签名才能使用(在其他情况下，你可以从内核启动，并得到一条消息，说明你的内核版本未经签名，系统无法启动)。为此，您需要安装lib-elf包:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="643d" class="ml lp iq mh b gy mm mn l mo mp">sudo apt install libelf-dev</span></pre><p id="6370" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后下载并安装libssl(如果下面的链接已经过时，请点击<a class="ae ln" href="http://security.ubuntu.com/ubuntu/pool/main/o/openssl/" rel="noopener ugc nofollow" target="_blank">此处</a>并用新版本替换ubuntu4.3_amd64):</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="b8c0" class="ml lp iq mh b gy mm mn l mo mp">wget -c security.ubuntu.com/ubuntu/pool/main/o/openssl/libssl1.1_1.1.0g-2ubuntu4.3_amd64.deb<br/>sudo dpkg -i *.deb</span></pre><p id="37ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装后，重启你的ubuntu系统:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="3069" class="ml lp iq mh b gy mm mn l mo mp">sudo reboot</span></pre><p id="e949" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">检查linux内核版本:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="90f9" class="ml lp iq mh b gy mm mn l mo mp">uname -a</span></pre><p id="e874" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你会得到这样的东西:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/9cf474b414c26eca9042a1add31b44a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PG9wcw1ef_BuCsA3m7fG-g.png"/></div></div></figure><p id="37ea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您愿意，您可以删除这个内核(确保您至少有一个额外的内核来保持您的系统可启动):</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="329c" class="ml lp iq mh b gy mm mn l mo mp">sudo dpkg --purge linux-image-unsigned-4.19.0-041900-generic linux-image-4.19.0-041900-generic</span></pre><h1 id="c59b" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第四步:安装NVIDIA CUDA 10.0</h1><p id="af10" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">删除以前安装的cuda(如果您以前安装过cuda):</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="9f01" class="ml lp iq mh b gy mm mn l mo mp">sudo apt-get purge nvidia*<br/>sudo apt-get autoremove<br/>sudo apt-get autoclean<br/>sudo rm -rf /usr/local/cuda*</span></pre><p id="d8c9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加密钥并下载:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="f0ce" class="ml lp iq mh b gy mm mn l mo mp">sudo apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub<br/>echo "deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64 /" | sudo tee /etc/apt/sources.list.d/cuda.list</span></pre><p id="ac65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装CUDA-10.0:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="c8c9" class="ml lp iq mh b gy mm mn l mo mp">sudo apt-get update <br/>sudo apt-get -o Dpkg::Options::="--force-overwrite" install cuda-10-0 cuda-drivers</span></pre><p id="3b6e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重新启动并键入:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="19a4" class="ml lp iq mh b gy mm mn l mo mp">echo 'export PATH=/usr/local/cuda-10.0/bin${PATH:+:${PATH}}' &gt;&gt; ~/.bashrc<br/>echo 'export LD_LIBRARY_PATH=/usr/local/cuda-10.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}' &gt;&gt; ~/.bashrc<br/>source ~/.bashrc<br/>sudo ldconfig</span></pre><p id="837f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">检查安装是否成功:执行下一个命令后，您需要查看您的nvidia驱动程序和GPU的版本:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="33fa" class="ml lp iq mh b gy mm mn l mo mp">nvidia-smi</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/e2371beb7c93c32ea78ac2bd145035c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_2obqleidv0isqQSBwTXA.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">nvidia-smi命令的输出</p></figure><p id="3882" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您的屏幕分辨率较低，请使用Xorg解决这个问题:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="a650" class="ml lp iq mh b gy mm mn l mo mp">sudo nvidia-xconfig</span></pre><p id="a60a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这没有帮助，检查我以前的一个安装(我已经详细描述了如果问题仍然存在应该有什么帮助)。</p><p id="c59f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，不要忘记检查NVIDIA-settings——在这里你可以发现加载了多少GPU(例如，如果使用ML框架训练neuralnets):</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="7503" class="ml lp iq mh b gy mm mn l mo mp">nvidia-settings</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/4bc878303d99472b0222461bb284355d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rrw4ujxCy3SKbiX2nqwhjA.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">在我看来，这个标签是最有用的</p></figure><h1 id="604f" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第五步:安装cuDNN 7.5.0</h1><p id="7bc6" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">前往<a class="ae ln" href="https://developer.nvidia.com/cudnn" rel="noopener ugc nofollow" target="_blank">此处</a>并点击下载CuDNN。登录并接受所需的协议。点击以下:“下载cuDNN v 7 . 5 . 0(2019 . 2 . 21)，针对CUDA 10.0”然后“cud nn库针对Linux”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/a495297ee57869996e92d78bdd83454f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iANmo6ekig1cp3q7tmMziA.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">从这里下载tgz</p></figure><p id="8208" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后安装:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="15c6" class="ml lp iq mh b gy mm mn l mo mp">tar -xf cudnn-10.0-linux-x64-v7.5.0.56.tgz<br/>sudo cp -R cuda/include/* /usr/local/cuda-10.0/include<br/>sudo cp -R cuda/lib64/* /usr/local/cuda-10.0/lib64</span></pre><h1 id="3012" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">步骤6:安装依赖项</h1><p id="b2e1" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">安装libcupti:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="1d4c" class="ml lp iq mh b gy mm mn l mo mp">sudo apt-get install libcupti-dev<br/>echo 'export LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64:$LD_LIBRARY_PATH' &gt;&gt; ~/.bashrc</span></pre><p id="442d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Python相关:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="fc90" class="ml lp iq mh b gy mm mn l mo mp">sudo apt-get install python3-numpy python3-dev python3-pip python3-wheel</span></pre><h1 id="5880" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">第七步:安装Tensorflow-GPU</h1><p id="2c18" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">使用pip安装Tensorflow-GPU 1.13:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="1863" class="ml lp iq mh b gy mm mn l mo mp">pip3 install --user tensorflow-gpu==1.13.1</span></pre><p id="a4b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在您可以检查您安装的tensorflow版本:</p><pre class="kg kh ki kj gt mg mh mi mj aw mk bi"><span id="e7dc" class="ml lp iq mh b gy mm mn l mo mp">pip3 show tensorflow-gpu</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/a85fd4b459ac7399cf8482f283fb0908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r-5-jShhpgcsEfMjmIS_oA.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">没错。你已经准备好使用GPU了！</p></figure><p id="c376" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一如既往，我建议你去<a class="ae ln" href="https://medium.com/@Oysiyl/install-and-configure-monitoring-tool-in-ubuntu-18-04-8fe1566050a8" rel="noopener">这篇文章</a>如果你想从系统托盘看到GPU的温度。要安装Tensorflow以前的安装版本，您可以通过我的<a class="ae ln" href="https://medium.com/@Oysiyl" rel="noopener">个人资料</a>查看。</p><p id="eea9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝您愉快！</p><p id="f250" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">链接，应该可以帮助您:</p><div class="nd ne gp gr nf ng"><a href="https://www.pytorials.com/how-to-install-tensorflow-gpu-with-cuda-10-0-for-python-on-ubuntu/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">如何用CUDA 10安装tensor flow | pytorials.com</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">这将是一个如何安装tensorflow 1.12 GPU版本的教程。我们还将安装CUDA 10.0和…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.pytorials.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kp ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://askubuntu.com/questions/1069433/upgrade-from-16-04-to-18-04-failed-please-help" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">从16.04升级到18.04失败，请帮助</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">感谢贡献回答问Ubuntu！请务必回答问题。提供详细信息并分享您的…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">askubuntu.com</p></div></div><div class="np l"><div class="nv l nr ns nt np nu kp ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://askubuntu.com/questions/1039201/why-ubuntu-stopped-publishing-signed-linux-kernel-images-since-4-16-4" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">为什么Ubuntu从4.16.4开始停止发布签名的linux内核镜像？</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">感谢贡献回答问Ubuntu！请务必回答问题。提供详细信息并分享您的…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">askubuntu.com</p></div></div><div class="np l"><div class="nw l nr ns nt np nu kp ng"/></div></div></a></div></div></div>    
</body>
</html>