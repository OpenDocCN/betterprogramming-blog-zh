<html>
<head>
<title>Become a Better “apt” User With These Commands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这些命令成为更好的“apt”用户</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/become-a-better-apt-user-with-these-commands-ecd7b13fd502?source=collection_archive---------4-----------------------#2022-05-12">https://betterprogramming.pub/become-a-better-apt-user-with-these-commands-ecd7b13fd502?source=collection_archive---------4-----------------------#2022-05-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e8e5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不要只是盲目地安装，要学会如何利用apt的全部能力</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8f2243a7ad5fd88172de9404bc0b6b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FroCOCq2FHoX_bFdU6vbOg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼基塔·卡恰诺夫斯基在<a class="ae ky" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="aaf1" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">大多数人在安装新的基于Debian的Linux时做的第一件事就是运行<code class="fe mc md me mf b">sudo apt-get update</code>。这个流行的命令刷新缓存并检查系统安装包的可用更新。保持缓存和安装包都是最新的，这是一个很好的内务处理。</p><p id="56d6" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">大多数情况下，普通Linux用户的apt体验就到此为止了。安装、更新和删除软件包是主要功能，那么为什么还要走得更远呢？</p><p id="54d3" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">嗯，如果你深入了解apt，你会发现不仅仅是一个简单的安装软件的方法。apt实用程序是一个功能全面的程序，允许您管理您安装的软件包和系统本身的许多不同方面。在本文中，我们将探索一些使用apt的新方法，以及如何从这个流行的开源包管理器中获得更多的灵活性。</p><h1 id="0c2c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">搜索包</h1><p id="8930" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">如果你找不到包的名字，就不会安装它。幸运的是，apt有一个内置的方法来搜索包。您可以通过包描述中包含的关键字进行快速搜索。</p><p id="b5f1" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">发出以下命令将搜索任何包含关键字“cows”的包:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="cb27" class="nh mh it mf b gy ni nj l nk nl">apt-cache search cows</span></pre><p id="143a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><em class="nm">注意:您不必以</em> <code class="fe mc md me mf b"><em class="nm">sudo</em></code> <em class="nm">的身份运行该命令，并且应该避免养成对实际上不需要的东西使用</em> <code class="fe mc md me mf b"><em class="nm">sudoing</em></code> <em class="nm">的习惯。</em></p><p id="aac2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">运行这个命令后，您应该会看到一个包含“cows”的包列表，并且能够挑选出您正在寻找的包。在这种情况下，让我们假装忘记了心爱的<code class="fe mc md me mf b">cowsay</code>包的名字。名单上不远的地方应该是<code class="fe mc md me mf b">cowsay</code>。答对了。你已经找到了那个难以捉摸的包裹。</p><p id="b8a2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在你不用离开终端就可以搜索软件了。</p><h1 id="100e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">阅读变更日志</h1><p id="46d9" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">开发者并不完美。bug时有发生。发生了突破性的变化。东西会被删除。如果你想知道为什么会丢失一些东西，或者什么时候增加了一些新特性，apt可以帮助你。</p><p id="9cd6" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">每个包都包含一个详细的变更日志，维护人员可以在其中添加关于特定变更的注释。这有助于参考新功能或寻找特定的错误修复。</p><p id="e116" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您可以通过发出以下命令来查看<code class="fe mc md me mf b">cowsay</code>包的变更日志:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="0751" class="nh mh it mf b gy ni nj l nk nl">apt-get changelog cowsay</span></pre><p id="bc7f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您应该会得到类似于下面的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/072582d8a109fc61cadc2da2dccf24b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xqF5kKBiFc8Vxn4pb3sD4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Cowsay的apt-get changelog。</p></figure><p id="cafa" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在这里，你可以看到每个变化的主要说明，甚至发现添加的小宝石。如果你错过了增加袋鼠牛的机会，那该多可惜！</p><h1 id="0fa3" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">修复损坏的包</h1><p id="7de3" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">有时候apt会碍手碍脚。软件包会被破坏、废弃或完全删除。如果您正在为一个损坏的安装而挣扎，或者apt因为依赖地狱而让您痛苦，这是一组很好的开始故障诊断的命令:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="97e0" class="nh mh it mf b gy ni nj l nk nl">sudo apt-get clean<br/>sudo apt-get autoremove<br/>sudo apt-get update --fix-missing<br/>sudo apt-get install -f</span></pre><p id="56ff" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">以下命令类似于apt的一个小重置:</p><ul class=""><li id="883f" class="no np it li b lj lk lm ln lp nq lt nr lx ns mb nt nu nv nw bi translated">首先，清理本地缓存以消除任何损坏。</li><li id="cd19" class="no np it li b lj nx lm ny lp nz lt oa lx ob mb nt nu nv nw bi translated">接下来，删除所有不必要的包。</li><li id="4bd5" class="no np it li b lj nx lm ny lp nz lt oa lx ob mb nt nu nv nw bi translated">之后，我们更新包缓存并修复任何缺失的依赖项。</li><li id="eb88" class="no np it li b lj nx lm ny lp nz lt oa lx ob mb nt nu nv nw bi translated">最后，我们安装并尝试修复损坏的软件包情况。</li></ul><p id="5495" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">魔力来自于试图自动修复破损软件包的<code class="fe mc md me mf b">-f</code>标志。你应该只在apt崩溃的情况下使用<code class="fe mc md me mf b">-f</code>,因为它可能会无意中删除你真正想要保留的东西。</p><h1 id="15b2" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">下载源文件</h1><p id="ec89" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">能够修改和扩展其他开发人员的代码是开源社区最好的部分之一。因为apt中包含的几乎所有包都是开源的，所以您可以下载它们的所有源代码来使用。</p><p id="8464" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果您想获取<code class="fe mc md me mf b">cowsay</code>包的源代码，只需执行:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="c424" class="nh mh it mf b gy ni nj l nk nl">apt-get source cowsay</span></pre><p id="35e8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您将看到所有的源文件都被转储到当前的工作目录中。现在你可以自己给<code class="fe mc md me mf b">cowsay</code>添加一种新的奶牛了。</p><h1 id="bdfc" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">从自定义来源列表升级</h1><p id="fa3f" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">如果您在一个系统上安装了许多来自自定义源的软件包，管理升级会变得很困难。有时候你不想升级所有的东西。某些包可能需要保留，以防止破坏性的更改或错误。</p><p id="bf47" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果您想从自定义列表升级，可以向apt传递一个特殊的参数:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="a635" class="nh mh it mf b gy ni nj l nk nl">sudo apt-get upgrade -o Dir::Etc::SourceList=/etc/apt/&lt;my_list&gt;</span></pre><p id="f8da" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您可以告诉apt使用特定的源代码列表，而不是简单地从所有源代码升级。传递带有源列表路径的<code class="fe mc md me mf b">-o</code>参数只会从该文件中找到的源进行升级。</p><p id="5382" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这对于保持包的基本子集更新和避免其他包非常有用。</p><h1 id="3d96" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">标记包裹</h1><p id="1240" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">管理源代码和其他包组可以完成apt的大部分工作，但是有时候你有一个特别烦人的包需要一些手工干预。在这种情况下，您可能需要告诉apt如何处理它。<code class="fe mc md me mf b">apt-mark</code>实用程序在这里派上了用场。</p><p id="844f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">使用<code class="fe mc md me mf b">apt-mark</code>工具，你可以改变apt处理特定包的方式。你可以阻止它升级，改变它的安装方式或阻止它被删除。</p><p id="f99f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果您想将一个包标记为“手动”安装，这将防止它在不再有依赖项需要它时被删除。您可以通过执行以下命令为<code class="fe mc md me mf b">cowsay</code>实现这一点:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="a614" class="nh mh it mf b gy ni nj l nk nl">sudo apt-mark manual cowsay</span></pre><p id="903e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果这是一个开发库，您希望为将来的工作保留它，您可以将它标记为“手动”安装，而不用担心它以后会自动删除。</p><h1 id="7fce" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">查看哪些包有升级</h1><p id="bd3b" class="pw-post-body-paragraph lg lh it li b lj my ju ll lm mz jx lo lp na lr ls lt nb lv lw lx nc lz ma mb im bi translated">如果你曾经更新过apt缓存，并且背负着大量可能令人望而生畏的升级。如果你关心特定的软件包，那么继续所有的升级可能是没有意义的。有了apt，你可以看到需要升级的软件包列表，甚至可以看到你要升级到哪个版本。</p><p id="6856" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">执行以下命令以查看可用升级的列表以及它们可以移动到的版本:</p><pre class="kj kk kl km gt nd mf ne nf aw ng bi"><span id="e511" class="nh mh it mf b gy ni nj l nk nl">sudo apt list --upgradeable -a</span></pre><p id="386a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在，在盲目升级系统并可能破坏整个系统之前，您可以确切地看到软件包会发生什么。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="7546" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">感谢阅读！如果你喜欢这篇文章，请花点时间看看下面更多的Linux冒险:</p><ul class=""><li id="7b6f" class="no np it li b lj lk lm ln lp nq lt nr lx ns mb nt nu nv nw bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/6-more-oddball-linux-utilities-you-should-try-7ba8552c2e2e"> <em class="nm"> 6更古怪的Linux实用程序你应该试试</em> </a></li><li id="0fbb" class="no np it li b lj nx lm ny lp nz lt oa lx ob mb nt nu nv nw bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-basic-linux-disk-management-commands-you-should-know-ee47c49ce6e6"> <em class="nm">你应该知道的5个基本Linux磁盘管理命令</em> </a></li><li id="0b25" class="no np it li b lj nx lm ny lp nz lt oa lx ob mb nt nu nv nw bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/6-simple-linux-utilities-you-didnt-know-you-needed-a60c150747e8"> <em class="nm"> 6个你不知道自己需要的简单Linux实用程序</em> </a></li></ul></div></div>    
</body>
</html>