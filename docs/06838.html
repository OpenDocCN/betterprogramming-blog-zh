<html>
<head>
<title>TextInputLayout Form Validation Using Data Binding in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android中使用数据绑定的TextInputLayout表单验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/textinputlayout-form-validation-using-data-binding-in-android-86aea8645a11?source=collection_archive---------6-----------------------#2020-11-10">https://betterprogramming.pub/textinputlayout-form-validation-using-data-binding-in-android-86aea8645a11?source=collection_archive---------6-----------------------#2020-11-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3d6b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一种更简单的表单验证方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5520791f232acd5b87754a1bcdb932e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJMlSskm4YqOhY2WDz5UkA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Christian Wiediger 在<a class="ae kv" href="https://unsplash.com/s/photos/android?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><blockquote class="kw"><p id="4f35" class="kx ky iq bd kz la lb lc ld le lf lg dk translated">“除非你通过多种方式学习，否则你什么都不懂”</p></blockquote><p id="3559" class="pw-post-body-paragraph lh li iq lj b lk ll jr lm ln lo ju lp lq lr ls lt lu lv lw lx ly lz ma mb lg ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di">答</span>几天前，我在做一个项目，我必须使用数据绑定在<code class="fe ml mm mn mo b">textInputLayout</code>和<code class="fe ml mm mn mo b">textInputEditText</code>上实现表单验证。不幸的是，没有足够的文档来说明这一点。</p><p id="7613" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">最后通过一些研究和实验，达到了我想要的。这就是我想要实现的目标:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/034065395d1e08180196bff143a3455e.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*tpxwSUlj1viqJ2_3orsMFw.gif"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/5a861eefde1b87d4a5de44f3df8615f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*7GTwESwDJZ_JQ-psn05XbQ.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终应用</p></figure><p id="806e" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">所以我知道有很多开发人员想要相同的动作和用户友好的表单行为。让我们开始吧。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="00f2" class="nc nd iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">我们要用什么？</h1><ol class=""><li id="0ecf" class="nu nv iq lj b lk nw ln nx lq ny lu nz ly oa lg ob oc od oe bi translated">科特林</li><li id="55c8" class="nu nv iq lj b lk of ln og lq oh lu oi ly oj lg ob oc od oe bi translated"><a class="ae kv" href="https://medium.com/better-programming/android-data-binding-139686b65aec" rel="noopener">数据绑定</a></li><li id="ea15" class="nu nv iq lj b lk of ln og lq oh lu oi ly oj lg ob oc od oe bi translated"><a class="ae kv" href="https://material.io/" rel="noopener ugc nofollow" target="_blank">素材库</a></li></ol><p id="e340" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">我将把整个项目分解成几个步骤，以便于你理解。</p><p id="f27a" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di"> 1 </span>通过在<code class="fe ml mm mn mo b">android{}</code>标签下添加这一行来设置初始项目并启用来自<code class="fe ml mm mn mo b">build.gradle(:app)</code>的数据绑定:</p><pre class="kg kh ki kj gt ok mo ol om aw on bi"><span id="81a0" class="oo nd iq mo b gy op oq l or os">dataBinding<strong class="mo ir">{<br/>    </strong>enabled true<br/><strong class="mo ir">}</strong></span></pre><p id="92b2" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">要使用<code class="fe ml mm mn mo b">textInputLayout</code>和<code class="fe ml mm mn mo b">textInputEditText</code>，您需要通过在<code class="fe ml mm mn mo b">build.gradle(:app)</code>中添加该依赖项来启用对Android的材料支持:</p><pre class="kg kh ki kj gt ok mo ol om aw on bi"><span id="31ba" class="oo nd iq mo b gy op oq l or os">implementation 'com.google.android.material:material:1.2.1'</span></pre><p id="aa9f" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">让我们制作一个表单的布局。我把它变得简单，因为我的目标是定义这个特性的核心功能部分，而不是设计布局。</p><div class="ot ou gp gr ov ow"><a href="https://medium.com/better-programming/android-free-courses-3b550ce388e6" rel="noopener follow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd ir gy z fp pb fr fs pc fu fw ip bi translated">成为成功的Android开发者的路线图</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">如果你想成为一名专业的Android开发者，请遵循这个路线图</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">medium.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk kp ow"/></div></div></a></div><p id="a113" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">我做了这个简单的布局:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/06dfe81a7a95ff59927a29b16b8568d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ccIBxJqJIIPFdx9XNLPVrQ.png"/></div></figure><p id="9f9b" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">下面是<code class="fe ml mm mn mo b">activity_main.xml</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure><blockquote class="po pp pq"><p id="a138" class="lh li pr lj b lk mp jr lm ln mq ju lp ps mr ls lt pt ms lw lx pu mt ma mb lg ij bi translated"><em class="iq">如果你对</em> <code class="fe ml mm mn mo b"><em class="iq">&lt;layout&gt;</em></code> <em class="iq">标签感到困惑，不用担心。这是我在之前的一篇文章</em>  <em class="iq">中已经涉及到</em> <a class="ae kv" href="https://medium.com/better-programming/android-data-binding-139686b65aec" rel="noopener"> <em class="iq">的东西。</em></a></p></blockquote><p id="34e3" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">我们的布局已经准备好了。让我们现在做一些编码。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="627f" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di"> 2 </span>如果你看看最终应用程序的GIF(本文前面)，你会看到当条件变为<code class="fe ml mm mn mo b">true</code>时，错误是如何显示和隐藏的。这是因为我用<code class="fe ml mm mn mo b">TextWatcher</code>绑定了每个文本字段，当用户在字段中键入内容时，它会不断调用。</p><p id="5fa5" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">在这里，我在<code class="fe ml mm mn mo b">MainActivity.kt</code>内部创建了一个继承自<code class="fe ml mm mn mo b">TextWatcher</code>的类:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure><p id="9c4e" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">不要担心<code class="fe ml mm mn mo b">view</code>，它传入了类的构造函数。我稍后会定义它。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="49f4" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di"> 3 </span>这里是主要部分。每个文本字段都有一些条件，在提交表单之前需要<code class="fe ml mm mn mo b">true</code>。因此，每个文本字段条件的代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="585d" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di"> 4 </span>现在是时候用我们之前创建的<code class="fe ml mm mn mo b">textWatcher</code>类绑定每个文本字段了:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure><p id="e67a" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">但是<code class="fe ml mm mn mo b">TextFieldValidation</code>如何知道绑定哪个文本字段呢？向上滚动，看看我在<code class="fe ml mm mn mo b">TextFieldValidation</code>方法中提到的注释:</p><pre class="kg kh ki kj gt ok mo ol om aw on bi"><span id="c6e4" class="oo nd iq mo b gy op oq l or os">// checking ids of each text field and applying functions accordingly.</span></pre><p id="8951" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">请注意，我在<code class="fe ml mm mn mo b">TextFieldValidation</code>的构造函数内部传递了一个视图，这个类负责分离每个文本字段，并像这样应用上面的每个方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure><p id="fa7f" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">您的最终<code class="fe ml mm mn mo b">MainActivity.kt</code>将如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure><p id="09e6" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">运行应用程序，感受神奇之处:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/034065395d1e08180196bff143a3455e.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*tpxwSUlj1viqJ2_3orsMFw.gif"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/5a861eefde1b87d4a5de44f3df8615f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*7GTwESwDJZ_JQ-psn05XbQ.gif"/></div></figure><p id="dba4" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">您可以从下面下载该项目的完整源代码:</p><div class="ot ou gp gr ov ow"><a href="https://github.com/Mustufa786/TextInputLayout-FormValidation" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd ir gy z fp pb fr fs pc fu fw ip bi translated">mustufa 786/TextInputLayout-form validation</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">github.com</p></div></div><div class="pf l"><div class="pv l ph pi pj pf pk kp ow"/></div></div></a></div><p id="c32a" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">我希望你学到了新的东西。请继续关注更多类似的文章。编码快乐！</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="803d" class="pw-post-body-paragraph lh li iq lj b lk mp jr lm ln mq ju lp lq mr ls lt lu ms lw lx ly mt ma mb lg ij bi translated">关注<a class="ae kv" href="https://medium.com/codixlab" rel="noopener"> CodixLab </a>了解更多技术知识。</p><h2 id="9970" class="oo nd iq bd ne pw px dn ni py pz dp nm lq qa qb no lu qc qd nq ly qe qf ns qg bi translated">延伸阅读:</h2><ol class=""><li id="54c8" class="nu nv iq lj b lk nw ln nx lq ny lu nz ly oa lg ob oc od oe bi translated"><a class="ae kv" href="https://medium.com/codechai/custom-error-screen-instead-of-default-crash-dialog-android-8727ac2fcd50" rel="noopener">自定义错误屏幕代替默认崩溃对话框——Android</a></li><li id="5f40" class="nu nv iq lj b lk of ln og lq oh lu oi ly oj lg ob oc od oe bi translated"><a class="ae kv" href="https://medium.com/better-programming/top-android-studio-shortcuts-d0d04cbd41ae" rel="noopener">顶级安卓工作室快捷键</a></li><li id="ee4b" class="nu nv iq lj b lk of ln og lq oh lu oi ly oj lg ob oc od oe bi translated"><a class="ae kv" href="https://medium.com/swlh/basic-skills-required-to-become-an-android-developer-b98b3585ff35" rel="noopener">成为Android开发者所需的基本技能</a></li><li id="2440" class="nu nv iq lj b lk of ln og lq oh lu oi ly oj lg ob oc od oe bi translated"><a class="ae kv" href="https://medium.com/better-programming/android-recyclerview-with-beautiful-animations-5e9b34dbb0fa" rel="noopener">Android recycler用漂亮的动画观看</a></li></ol></div></div>    
</body>
</html>