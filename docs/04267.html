<html>
<head>
<title>How to Write Test Cases for React Components With Jest and Enzyme</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Jest和Enzyme编写React组件的测试用例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-test-cases-for-react-components-using-jest-and-enzyme-de3ac3d600c?source=collection_archive---------1-----------------------#2020-04-02">https://betterprogramming.pub/write-test-cases-for-react-components-using-jest-and-enzyme-de3ac3d600c?source=collection_archive---------1-----------------------#2020-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3319" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们构建健康的、经过测试的组件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b79d1a08480ff916ce85b5d9f1ce7f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WbBdl8umhbBtOfKbrJPWQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“npm运行测试”命令的快照</p></figure><p id="2704" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将使用Jest和Enzyme从头开始编写React组件的测试用例。此外，我们将了解更多关于Jest和酶的知识。开始吧！</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="088a" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">什么是玩笑？</h1><p id="2e56" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Jest 是一个为JavaScript和React代码编写测试用例的单元测试框架。笑话是脸书创造的。</p><p id="a797" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">create-react-app命令安装Jest及其依赖项集，因此我们不必担心这一点。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="87ca" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">酶是什么？</h1><p id="16e6" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated"><a class="ae my" href="https://github.com/enzymejs/enzyme" rel="noopener ugc nofollow" target="_blank"> Enzyme </a>是一个测试React的JavaScript实用程序。在Jest的帮助下，Enzyme变得更加强大，并完全控制React应用程序，以测试React组件的每个方面。酶专门用于测试反应成分。</p><p id="4e9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们将创建一个带有组件的应用程序。稍后我们将为这个组件编写测试用例。</p><p id="ce5b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们从头开始。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="894d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第一步。创建一个应用程序笑话和酶演示</h1><p id="cc6c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">为此，我们需要使用下面的命令创建一个演示应用程序。让我们运行这个命令并创建一个演示应用程序:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="0b5b" class="ne mc it na b gy nf ng l nh ni">npx create-react-app jest-and-enzyme-demo</span></pre><p id="4877" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">成功完成上述命令后:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2616" class="ne mc it na b gy nf ng l nh ni">cd jest-and-enzyme-demo</span><span id="463a" class="ne mc it na b gy nj ng l nh ni">npm start</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="cfe2" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第二步。在浏览器中打开localhost:3000</h1><p id="dcca" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">检查您当前的端口(这里的默认端口是3000)并确认它正在工作，就像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/32614f04ceb1d4ef973263425fe74dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJPE3g9VTNx08PsuRstOVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">网址快照<a class="ae my" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a></p></figure><p id="f664" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们看一下<code class="fe nl nm nn na b">src</code>文件夹中新创建的项目(通过create-react-app ),您会看到已经有一个文件<code class="fe nl nm nn na b">App.test.js</code>,它用于使用Jest测试app组件。</p><p id="7430" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们使用命令<code class="fe nl nm nn na b">npm run test</code>运行这个测试用例，它将使用Jest运行测试用例。</p><p id="8eeb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个命令运行Jest并选择<code class="fe nl nm nn na b">App.test.js</code>文件，因为它有特定的扩展名<code class="fe nl nm nn na b">.test.js</code>。它将使用Jest运行它，您将获得以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/9972a5f144497a8ec68b00c6458c5f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5wItOOq39OI5COtW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“npm运行测试”的快照</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4cf6" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">第三步。删除App.test.js文件</strong></h1><p id="ba40" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在删除<code class="fe nl nm nn na b">App.test.js</code>文件。我们将在不同的文件中使用Jest和Enzyme编写我们自己的测试用例。我们删除这个文件是为了在命令/终端上获得更好的结果。如果我们不删除它，那么我们就不会得到测试用例的详细结果。相反，我们将在终端(命令提示符)上得到合并的结果。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a2c4" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">步骤4:创建一个React组件</h1><p id="5bd4" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们将创建一个组件，它有一个隐藏和显示文本的按钮，如下面的GIF所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d154b6a41346720f5b97503a1769169a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*L56eTuSn7AmPTWVn137w2g.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要测试的组件</p></figure><p id="3acb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<code class="fe nl nm nn na b">src</code>文件夹(<code class="fe nl nm nn na b">src/ToggleComponent.js</code>)中创建一个文件<code class="fe nl nm nn na b">ToggleComponent.js</code>，并编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="f4b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的代码非常简单，是一个基本的React组件，我觉得不需要描述了。</p><p id="6766" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们继续前进。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="7326" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第五步。使用App.js中的“ToggleComponent”组件:</h1><p id="a04e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在让我们在<code class="fe nl nm nn na b">App.js</code>中使用这个组件。删除<code class="fe nl nm nn na b">App.js</code>中的所有代码，并编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="4562" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的<code class="fe nl nm nn na b">App.js</code>文件中，我们只是简单地使用了<code class="fe nl nm nn na b">ToggleComponent</code>。<br/>现在使用命令<code class="fe nl nm nn na b">npm start</code>运行应用程序，并在浏览器中查看(URL <code class="fe nl nm nn na b">localhost:3000</code>)。你会看到有一个带有“隐藏”或“显示”文字的按钮，点击按钮后，文字会显示或隐藏，正如我们在上面的GIF中所述。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="54c6" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第六步。如何使用Jest和Enzyme编写测试用例</h1><p id="abcc" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在我们已经创建了一个组件，是时候编写测试用例并验证组件了。</p><p id="9b6b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们在<code class="fe nl nm nn na b">src</code>文件夹(<code class="fe nl nm nn na b">src/ToggleComponent.test.js</code>)中创建一个文件<code class="fe nl nm nn na b">ToggleComponent.test.js</code>，并编写下面的代码。(首先我将向您展示一个简单的测试用例，然后运行它):</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="01c3" class="ne mc it na b gy nf ng l nh ni">describe('ToggleComponent', () <strong class="na iu">=&gt;</strong> {</span><span id="7dbd" class="ne mc it na b gy nj ng l nh ni">   it('Should be true', () <strong class="na iu">=&gt;</strong> {</span><span id="2749" class="ne mc it na b gy nj ng l nh ni">      <strong class="na iu">const</strong> test = true;</span><span id="403a" class="ne mc it na b gy nj ng l nh ni">      expect(test).toBe(true);<br/>   });</span><span id="a1f3" class="ne mc it na b gy nj ng l nh ni">});</span></pre><p id="9619" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们来理解一下上面的代码。</p><p id="107e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Jest有一个名为<code class="fe nl nm nn na b">describe()</code>的函数，用于在块中创建测试套件。我们正在测试<code class="fe nl nm nn na b">ToggleComponent</code>，所以我们将传递<code class="fe nl nm nn na b">ToggleComponent</code>作为它的第一个参数。第一个参数是一个字符串，第二个参数是一个包含所有其余套件的函数。它将包含一个测试列表。</p><p id="3878" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用<code class="fe nl nm nn na b">it()</code>函数定义一个测试用例。<code class="fe nl nm nn na b">it()</code>将第一个参数作为描述测试用例的字符串。第二个参数是一个函数，我们将在其中编写测试的逻辑。</p><p id="53f7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我有一个变量<code class="fe nl nm nn na b">test</code>，它的值是<code class="fe nl nm nn na b">true</code>，现在我们期望测试是<code class="fe nl nm nn na b">true</code>，这很好，测试用例将通过。让我们运行测试(可能是自动运行)，看看这个测试用例的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/499cfd306c3b9288792aac60232f1ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b98M7vr0rEZSlNBj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“npm运行测试”命令的快照</p></figure><p id="2010" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以看到，在上面的结果中，是通过了。让我们创建一个失败的测试用例。让我们在同一个文件中添加下面的测试用例。(写第二个<code class="fe nl nm nn na b">it()</code>):</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6f4a" class="ne mc it na b gy nf ng l nh ni">it('Should be false', () <strong class="na iu">=&gt;</strong> {</span><span id="8eb0" class="ne mc it na b gy nj ng l nh ni">   <strong class="na iu">const</strong> test = 'Shubham';</span><span id="def5" class="ne mc it na b gy nj ng l nh ni">   expect(test).toBe('Ankit');</span><span id="fc2f" class="ne mc it na b gy nj ng l nh ni">});</span></pre><p id="c3ed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们运行它，看看结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/9db0d0223842a0cc51a2e3e14fa6fec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TLymlRF4expLe9C6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“npm运行测试”命令的快照</p></figure><p id="c93c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以在上面的快照中看到，一个通过了，第二个失败了。断言(<code class="fe nl nm nn na b">expect(test).toBe(‘Ankit’)</code>)失败是因为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/bcb3a37b81c6b4e6d97e492561ad96ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/0*dU2JTdIU1O7p_62A"/></div></figure><p id="6269" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以上两个案例只是向您展示测试用例是如何工作的。</p><p id="4407" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们开始吧。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="519e" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第七步。使用Jest和Enzyme为组件编写测试用例</h1><p id="15e7" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在我们将编写我们的主测试用例来测试<code class="fe nl nm nn na b">ToggleComponent.js</code>。这里我们将测试按钮点击的行为。问题是，我们如何实现这一点？不用担心；酵素会帮助我们。</p><p id="7d6d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要安装酶和酶-适配器-反应-16(根据反应版本；我在用React 16。x)。根据您的React版本，在GitHub上检查合适的酶。</p><p id="197f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，请运行以下命令:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="64d3" class="ne mc it na b gy nf ng l nh ni">npm install --save-dev enzyme enzyme-adapter-react-16</span></pre><p id="adcf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们为<code class="fe nl nm nn na b">ToggleComponent</code>编写代码来测试行为。这里我们将编写两个测试用例。</p><h1 id="9a38" class="mb mc it bd md me nv mg mh mi nw mk ml jz nx ka mn kc ny kd mp kf nz kg mr ms bi translated">测试案例1。</h1><p id="6101" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们的<code class="fe nl nm nn na b">ToogleComponent</code>在嵌套的<code class="fe nl nm nn na b">div</code>中有文本“这将被切换”。在第一个测试案例中，我们将测试组件是否有文本“This will toggled”</p><p id="71d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们为此编写测试用例。删除<code class="fe nl nm nn na b">ToggleComponent.test.js</code>中的所有代码，并编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="c28c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们先来了解一下代码。</p><p id="3004" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面，该行用于将React导入到该文件中:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1f51" class="ne mc it na b gy nf ng l nh ni">import React from ‘react’;</span></pre><p id="b1c1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这一行，我们有进口酶及其<code class="fe nl nm nn na b">shallow</code>功能:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="96a0" class="ne mc it na b gy nf ng l nh ni">import Enzyme, { shallow } from ‘enzyme’;</span></pre><p id="c6f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从enzyme-adapter-react-16导入适配器:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="849f" class="ne mc it na b gy nf ng l nh ni">import Adapter from ‘enzyme-adapter-react-16’;</span></pre><p id="8da8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们想要测试<code class="fe nl nm nn na b">ToogleComponent</code>，所以我们将导入这个组件:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f1c9" class="ne mc it na b gy nf ng l nh ni">import ToggleComponent from ‘./ToggleComponent’;</span></pre><p id="61bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要配置酶，所以我们需要这样做:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f513" class="ne mc it na b gy nf ng l nh ni">Enzyme.configure({ adapter: new Adapter() });</span></pre><p id="4b87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在下面的代码中，我们使用<code class="fe nl nm nn na b">define()</code>和<code class="fe nl nm nn na b">it()</code>函数来编写我们的测试用例逻辑:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="8505" class="ne mc it na b gy nf ng l nh ni">describe(‘ToggleComponent’, () <strong class="na iu">=&gt;</strong> {</span><span id="f305" class="ne mc it na b gy nj ng l nh ni">   it(‘should show the text’, () <strong class="na iu">=&gt;</strong> {<br/>       ……</span><span id="a7e7" class="ne mc it na b gy nj ng l nh ni">   });</span><span id="8bcf" class="ne mc it na b gy nj ng l nh ni">});</span></pre><p id="b6fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下一行用于获取要测试的组件的实例:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1870" class="ne mc it na b gy nf ng l nh ni">const toggleInstance = shallow(&lt;ToggleComponent /&gt;);</span></pre><h2 id="9455" class="ne mc it bd md oa ob dn mh oc od dp ml lh oe of mn ll og oh mp lp oi oj mr ok bi translated">“shallow()”做什么</h2><p id="3b3e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">为了测试React组件，我们需要该组件的实例，以便我们可以轻松地检查和编写断言代码。对于这一点，酵素的<code class="fe nl nm nn na b">shallow()</code>功能帮助很大。</p><p id="9778" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它将一个节点作为第一个参数。它允许我们在对象中呈现React组件，然后在内存中呈现，而不是在DOM中。这项技术加快了这个过程。不需要DOM。它将对象包装在包装器中，包装器允许我们搜索使用CSS呈现的元素。它返回呈现输出周围的包装实例。</p><p id="6642" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在下一行中，我们将在一个<code class="fe nl nm nn na b">div</code>中搜索一个<code class="fe nl nm nn na b">div</code>:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="edcb" class="ne mc it na b gy nf ng l nh ni"><strong class="na iu">const</strong> element = toggleInstance.find(‘div div’);</span></pre><p id="b4ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在下一行中，我们编写了一个断言，期望文本为“This will toggled”，正如我们所希望的:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="d772" class="ne mc it na b gy nf ng l nh ni">expect(element.text()).toBe(‘This will be toggled’);</span></pre><p id="a270" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们使用命令<code class="fe nl nm nn na b">npm run test</code>运行测试用例(也许它会自动发生):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/1e50987500dcc2a10fa7c7bcffec13d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iCm2N7ptbcRlZrgJ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命令"<code class="fe nl nm nn na b">npm run test</code>"的快照</p></figure><p id="2a92" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以看到我们的第一个测试用例通过了。(确保没有空格，并在代码中写入正确的文本。您还可以尝试修改文本并运行测试用例结果。)</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8092" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">测试用例2。</strong></h1><p id="3ad7" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们想要测试导致文本被隐藏的按钮的点击。因此，让我们编写代码来测试这个场景:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="9fe2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们使用命令<code class="fe nl nm nn na b">npm run test</code>运行测试用例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/e1bf025505fc4e290342d41296bca0d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UoC9hsCIgOUiluof"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“npm运行测试”命令的快照</p></figure><p id="ae50" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以在上面的结果中看到，我们的两个测试用例都通过了。这意味着我们的组件是完美的。为了更加清晰，您可以从<br/> <code class="fe nl nm nn na b">{isShowText &amp;&amp; &lt;div&gt;This will be toggled&lt;/div&gt;}</code>中删除条件，将其简化为<code class="fe nl nm nn na b">&lt;div&gt;This will be toggled&lt;/div&gt;</code>。运行测试并查看结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/ae489fccb6a52eae78972d89a48e9c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BtB1TFzH932NJc9y"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“npm运行测试”命令的快照</p></figure><p id="495a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它失败了。这意味着我们的测试用例工作正常。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a63e" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">结论</strong></h1><p id="1080" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在这篇文章中，我们学习了以下内容:</p><ul class=""><li id="f566" class="on oo it la b lb lc le lf lh op ll oq lp or lt os ot ou ov bi translated">什么是玩笑</li><li id="ed58" class="on oo it la b lb ow le ox lh oy ll oz lp pa lt os ot ou ov bi translated">什么是酶</li><li id="f7d2" class="on oo it la b lb ow le ox lh oy ll oz lp pa lt os ot ou ov bi translated">如何在React中创建组件</li><li id="b604" class="on oo it la b lb ow le ox lh oy ll oz lp pa lt os ot ou ov bi translated">如何编写测试用例</li><li id="e234" class="on oo it la b lb ow le ox lh oy ll oz lp pa lt os ot ou ov bi translated">如何使用Jest和Enzyme编写React组件</li><li id="84c9" class="on oo it la b lb ow le ox lh oy ll oz lp pa lt os ot ou ov bi translated">如何使用enzyme-adapter-react-16</li></ul><p id="346f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢您花时间阅读这篇文章。</p></div></div>    
</body>
</html>