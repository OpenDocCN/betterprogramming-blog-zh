<html>
<head>
<title>How Ad Blockers Work</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">广告拦截器如何工作</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-ad-blockers-work-and-what-they-mean-for-web-developers-f151fd73ec28?source=collection_archive---------2-----------------------#2019-01-02">https://betterprogramming.pub/how-ad-blockers-work-and-what-they-mean-for-web-developers-f151fd73ec28?source=collection_archive---------2-----------------------#2019-01-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ce6e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及它们对Web开发人员的意义</h2></div><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">别在我家！</p></figure><p id="e139" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">网络广告之争让每个人都感到沮丧。用户已经厌倦了被广告密集的网站轰炸，随着自动播放视频和光标跟踪技术使广告变得更具侵略性，一些用户说:“够了”只是时间问题</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lp"><img src="../Images/b63057cd92aa4b610177250155965b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5brTrf1BKlXzPHGsxe6S9w.png"/></div></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">对着燕麦片大喊</p></figure><p id="d461" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">另一方面，内容创作者正面临严峻的财务形势。到目前为止，广告是从一个拥有大量流量的成功网站上赚钱的最有效方式，现在，仅仅因为一些坏蛋过度使用广告，他们就有望想出新的赚钱方式？难怪这么多受人喜爱的独立网站最近不得不关闭。</p><p id="84c5" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这场战斗的中心是广告拦截器。如果你自己不用，很可能你的一个朋友会用。根据<a class="ae lw" href="https://www2.deloitte.com/content/dam/Deloitte/global/Images/infographics/technologymediatelecommunications/gx-deloitte-tmt-2018-adblocking-media-report.pdf" rel="noopener ugc nofollow" target="_blank">最近的德勤调查</a>，2017年，31%的美国人在电脑上使用某种形式的广告拦截器，高于2016年的24%。随着广告拦截器越来越受欢迎，有必要调查一下:广告拦截器<em class="lx">实际上</em>在做什么？</p><p id="ef79" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为简单起见，本文余下部分我将着眼于Adblock Plus。它是世界上最受欢迎的广告拦截器之一，下载量超过5亿次，也是我个人使用的。</p><h1 id="341b" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">Adblock Plus是做什么的？</h1><p id="8e22" class="pw-post-body-paragraph kt ku it kv b kw mq ju ky kz mr jx lb lc ms le lf lg mt li lj lk mu lm ln lo im bi translated">在最基本的层面上，Adblock Plus可以过滤掉网站的元素，使其不被加载或显示。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mv"><img src="../Images/69bf3dd38905281a35bcf43f5a179fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydR2D97pwMatxeAcM4MhYg.png"/></div></div></figure><h1 id="21c4" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">AdBlock Plus如何确定要拦截的内容？</h1><p id="8665" class="pw-post-body-paragraph kt ku it kv b kw mq ju ky kz mr jx lb lc ms le lf lg mt li lj lk mu lm ln lo im bi translated">Adblock Plus表示，他们不会屏蔽所有的广告，在2009年的一项调查中，只有25%的Adblock Plus用户表示他们严格反对所有的广告。因此，该扩展的默认功能仍然允许被认为可以接受的广告在网站上显示。如果这让你作为一个用户踌躇不前，考虑一下<a class="ae lw" href="https://adblockplus.org/en/acceptable-ads" rel="noopener ugc nofollow" target="_blank">他们的规则列表</a>相当严格:</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mw"><img src="../Images/03c1bc0526bf64e2a7ffe3bf6f4ccf5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mnk-0-5C3D0v3Iya0DmtKw.png"/></div></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">基本上，所有用户讨厌的烦人的东西</p></figure><p id="812d" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其中一些限制是基于元素本身的性质和它在页面上的表现，而另一些，如下图所示，只是简单地说明广告只能占据页面的一定比例，并且只能以不分散页面主要内容的方式这样做。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mx"><img src="../Images/5d226e2d4c2864a46f83cfbe560f9372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*erOAgJk_tPLhsV8fnAGQiA.jpeg"/></div></div></figure><h1 id="99dd" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">Adblock Plus实际上是如何屏蔽广告的？</h1><p id="9876" class="pw-post-body-paragraph kt ku it kv b kw mq ju ky kz mr jx lb lc ms le lf lg mt li lj lk mu lm ln lo im bi translated">Adblock Plus用来阻止广告加载到您的页面上的两种机制是HTTP请求阻止和元素隐藏。HTTP请求阻塞完成了这两者的大部分工作。许多广告存储在另一个服务器上，如果一个网站试图从一个被禁止的域加载元素或使用错误的关键字，Adblock Plus将阻止HTTP请求，并阻止元素加载到页面上。这可以让广告远离你的网页，减少网页加载的时间。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi my"><img src="../Images/dbcafd945d12dc79a2deefe9243891ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gBGScP_ec9X6S-JHPAZ2wg.png"/></div></div></figure><p id="3c93" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果广告存储在网站上，Adblock plus将应用CSS过滤器，使其不显示。这些显示过滤器位于用户样式表中，Adblock Plus使用样式表服务nsIStyleSheetService将其加载到网站上。由于用户样式表可能具有最高的重要性，它们将覆盖相关站点的现有CSS。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/e99072855c03ace87de4f1f834358733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*W7m9rOg02yfMLlrw4D5oQQ.png"/></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">再见，阿德。</p></figure><h1 id="91d2" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">这一切怎么会发生得这么快</h1><p id="0822" class="pw-post-body-paragraph kt ku it kv b kw mq ju ky kz mr jx lb lc ms le lf lg mt li lj lk mu lm ln lo im bi translated">广告拦截器的一个关键卖点是更快的页面加载速度，因此Adblock Plus的创建者Wladimir Palant痴迷于哪种算法将最大程度地简化该工具的过滤匹配过程是有道理的，正如本文中的<a class="ae lw" href="https://adblockplus.org/blog/investigating-filter-matching-algorithms" rel="noopener ugc nofollow" target="_blank">所详述的。正如帕兰特概述的那样，当他实现了一种改进的</a><a class="ae lw" href="https://adblockplus.org/blog/investigating-filter-matching-algorithms" rel="noopener ugc nofollow" target="_blank">博耶-摩尔算法</a>时，过滤匹配过程是最有效的。该算法结合了两种更有效的模式匹配方法:坏字符启发法和好后缀启发法。不良字符探试法将采用第一个不匹配的字符(从右到左)，并在模式中进一步寻找匹配的字符。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi na"><img src="../Images/3de4996bb41002a556c9ca684a6294c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_SD9wXGgbtL6-Qd5BXTWA.png"/></div></div></figure><p id="5200" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">因为如果字符没有出现在模式中的任何地方，就不可能有匹配，所以如果没有找到匹配的字符，整个模式将被移动到不匹配的字符之外。这在搜索匹配时节省了时间。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nb"><img src="../Images/b66277a583862e61975ee2b5dcb0a1bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvv5C6EYzRnB-MpgvejOdg.png"/></div></div><p class="kp kq gj gh gi kr ks bd b be z dk translated">行动中的不良角色启发。</p></figure><p id="67b7" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">算法中使用的另一种技术是好后缀启发式算法。如果模式和字符串之间有几个字符匹配(同样，从右到左扫描)，这将查看匹配的后缀是否出现在模式中的其他地方。如果是这样，它会将模式下移，将模式中“good suffix”的另一个实例与文本对齐，以测试是否匹配。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nc"><img src="../Images/c086be7e4fa39592e1414624ca4be208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Jc6i9S06cEccrBsa3JH5Q.png"/></div></div></figure><p id="9c5e" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">当您使用强好后缀启发式时，这变得更加有效。这将排除模式中前面有相同不匹配字符的任何“好后缀”，以避免浪费时间检查相同的不匹配。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nc"><img src="../Images/6036bab091c587aff029c40c5be5203c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1DpIZ_RS0B1vfAnOV5Y0nA.png"/></div></div></figure><p id="487b" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果没有“好后缀”的其他实例，该模式将被移过被检查的文本部分以节省时间。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nd"><img src="../Images/aa5295b83e3555329a2a519d1aa8bbb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Efr_3e3UGCbW91JNw5Yoig.png"/></div></div></figure><p id="10e6" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">以下是Adblock Plus代码中Javascript的实际情况。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ne"><img src="../Images/5cb0afa039411d922a236f3bb9a36784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QHXLm7p9etqiSYhviAI-ew.png"/></div></div></figure><h1 id="ed47" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">开发者该怎么做？</h1><p id="bc3c" class="pw-post-body-paragraph kt ku it kv b kw mq ju ky kz mr jx lb lc ms le lf lg mt li lj lk mu lm ln lo im bi translated">虽然大多数用户仍然不使用广告拦截器，但采用率正在上升，没有理由怀疑这一趋势会放缓。在这一点上，看起来确保你的网站上的广告到达你的网站的访问者的最高百分比的最好的方法是理解被Adblock Plus和其他流行的广告拦截器使用的最流行的标准。也许并不总是有可能在这些指导方针下工作，但是在可能的情况下这样做将会创造一个好的用户体验，让你的网站赚钱并避免被屏蔽。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure></div></div>    
</body>
</html>