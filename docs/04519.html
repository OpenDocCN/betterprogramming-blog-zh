<html>
<head>
<title>Getting Started With Brownie (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">布朗尼入门(第2部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/getting-started-with-brownie-part-2-615a1eec167f?source=collection_archive---------3-----------------------#2020-04-19">https://betterprogramming.pub/getting-started-with-brownie-part-2-615a1eec167f?source=collection_archive---------3-----------------------#2020-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="368c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用核仁巧克力饼项目</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0c36b7ef784673914c493760ccac25eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*92DgiNmPPshn_rQDi8QQoA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@thoughtcatalog?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">思想目录</a>在<a class="ae kv" href="https://unsplash.com/s/photos/ethereum?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="4b11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">错过了第一部？</em> <a class="ae kv" href="https://medium.com/@iamdefinitelyahuman/getting-started-with-brownie-part-1-9b2181f4cb99" rel="noopener"> <em class="ls">点击这里</em> </a> <em class="ls">。</em></p><p id="a867" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们刚刚安装了<a class="ae kv" href="https://github.com/iamdefinitelyahuman/brownie" rel="noopener ugc nofollow" target="_blank">布朗尼</a>，并确认它可以工作。现在怎么办？让我们从快速定位开始，然后我们将深入一些更重要的领域。首先，我们需要一个项目！</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="46d3" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">创建一个布朗尼项目</h1><p id="d466" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">在使用Brownie的大部分时间里，你都在处理一个项目。项目由一个或多个智能合约、单元测试和脚本组成，以处理部署和常见交互。</p><p id="7207" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过在一个空文件夹中键入<code class="fe mx my mz na b">brownie init</code>来开始一个新项目，但是对于本教程，我们将从一个预先制作的项目开始工作。Brownie提供了几个模板(称为<em class="ls">混合</em>)，以及一个初始化它们的工具<code class="fe mx my mz na b">brownie bake</code>。</p><p id="4314" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从初始化<code class="fe mx my mz na b"><a class="ae kv" href="https://github.com/brownie-mix/token-mix" rel="noopener ugc nofollow" target="_blank">token-mix</a></code>开始，这是一个简单的ERC20项目:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="ae45" class="nf mb iq na b gy ng nh l ni nj">brownie bake token<br/>cd token</span></pre><p id="aead" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">初始化完成后，打开新创建的<code class="fe mx my mz na b">token</code>子目录，查看一下。如果您使用过其他智能合约框架，这种布局可能很熟悉。</p><ul class=""><li id="18d6" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated"><code class="fe mx my mz na b"><strong class="ky ir">contracts/</strong></code>保存项目智能合约的所有源文件。Brownie支持用<a class="ae kv" href="https://solidity.readthedocs.io/en/v0.6.6/" rel="noopener ugc nofollow" target="_blank"> Solidity </a>(带<code class="fe mx my mz na b">.sol</code>后缀)和<a class="ae kv" href="https://vyper.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Vyper </a>(带<code class="fe mx my mz na b">.vy</code>后缀)书写的合同。</li><li id="1710" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><code class="fe mx my mz na b"><strong class="ky ir">interfaces/</strong></code>持有项目所需的智能合约接口。接口是一个文件，可以用来与合同进行交互，但不包含足够的信息来部署它。</li><li id="3d92" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><code class="fe mx my mz na b"><strong class="ky ir">scripts/</strong></code>保存用于部署和与项目交互的Python脚本。</li><li id="8eb9" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">为你的项目保存单元测试。Brownie使用<a class="ae kv" href="https://docs.pytest.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> pytest </a>框架进行测试。</li></ul></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="2575" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">运行编译器</h1><p id="2f18" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">项目已初始化，但尚未编译。我们可以使用以下命令手动触发编译器:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="f8e4" class="nf mb iq na b gy ng nh l ni nj">brownie compile</span></pre><p id="5f27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到如下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/8f9910c8f8b78e03ad6de40385de91ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zVpV9zDxWGHvWUnHaz1jnQ.png"/></div></div></figure><p id="c393" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Brownie自动跟踪项目的<code class="fe mx my mz na b">contracts/</code>文件夹中的文件，并在添加或更改文件时运行编译器。通常不需要手动编译——但是知道如何编译还是很好的。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="b468" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">运行测试</h1><p id="8a4d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">Brownie使用<a class="ae kv" href="https://docs.pytest.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> pytest </a>进行单元测试。Pytest是一个成熟的全功能测试框架——如果您以前没有使用过，您会很快爱上它。我们将在另一篇文章中讨论如何进行单元测试。现在，让我们运行测试套件:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="c36a" class="nf mb iq na b gy ng nh l ni nj">brownie test</span></pre><p id="27f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到如下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/87765ffcf623ff7f4983576795f66eea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpbUFHDMcR8anj7_Aqhmvw.png"/></div></div></figure><p id="e3c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Brownie还可以评估测试覆盖率:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="606b" class="nf mb iq na b gy ng nh l ni nj">brownie test --coverage</span></pre><p id="0595" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到如下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/8e6ad9803bc34fa2a3f6852b75178a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLknFV6_FQFfnVokFE1S5g.png"/></div></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="4d08" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">运行部署脚本</h1><p id="2804" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">在<code class="fe mx my mz na b">scripts/</code>文件夹中，你会发现一个单独的文件，<code class="fe mx my mz na b">token.py</code>。这是一个非常基本的脚本，可以处理<code class="fe mx my mz na b">Token</code>合同的部署。让我们试着运行它:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="5831" class="nf mb iq na b gy ng nh l ni nj">brownie run token</span></pre><p id="5ff9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到如下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/38bd530e555b83b57fd5e6c39d23ae81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qom3CyEYmp0RMEvYdGWmHw.png"/></div></div></figure><p id="56ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能已经注意到，Brownie加载了<a class="ae kv" href="https://github.com/trufflesuite/ganache-cli" rel="noopener ugc nofollow" target="_blank"> Ganache </a>并且契约部署在那里。这很好，因为我们只是弄清楚了一切是如何工作的，但是当到了实际部署的时候，我们将使用<code class="fe mx my mz na b">--network</code>标志来代替部署到一个活动的网络。稍后会详细介绍。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="cf84" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">启动控制台</h1><p id="feec" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">Brownie控制台是开发过程中快速测试和调试的宝贵工具。这也是熟悉Brownie功能的一个很好的起点。</p><p id="bccb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要加载控制台:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="cc26" class="nf mb iq na b gy ng nh l ni nj">brownie console</span></pre><p id="3903" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到类似这样的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/e07430ea745012dbbe8e3334581aaf7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTkKgk6Lh2PPwaPFnbNQwQ.png"/></div></div></figure><p id="d64b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您键入时，Brownie会提供自动完成和输入提示来帮助您导航。您已经连接到了由Ganache提供的开发链上，因此可以随意使用。你不会弄坏任何东西:)</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="3d88" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">接下来</h1><p id="ecbe" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">暂时不要关闭控制台！在本系列的第三部分<a class="ae kv" href="https://medium.com/@iamdefinitelyahuman/getting-started-with-brownie-part-3-ef6bfa9867d7" rel="noopener">中，我们将使用它来探索布朗尼的一些功能。</a></p></div></div>    
</body>
</html>