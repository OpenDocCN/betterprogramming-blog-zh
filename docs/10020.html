<html>
<head>
<title>The Fastest Way To Build Lightweight Angular Content Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建轻量级角度内容服务的最快方式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-fastest-way-to-build-lightweight-angular-content-service-1970fbc67681?source=collection_archive---------10-----------------------#2021-11-15">https://betterprogramming.pub/the-fastest-way-to-build-lightweight-angular-content-service-1970fbc67681?source=collection_archive---------10-----------------------#2021-11-15</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="70f4" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">最好的解决方案很简单！</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/07c33c2f132aa7e7180c6bdcafff3b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HWY53D51pJqJuCKUXFf_9g.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@lonestarexotic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">韦斯·廷德尔</a>在<a class="ae kz" href="https://unsplash.com/s/photos/racecar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="23f9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在典型的角度应用程序中，我们使用大量的标题、标签、标题和更多的内容。但是如果你需要一种方法把这些内容元素放在一个地方，你需要一个类似字典的东西。它是小单词和更广泛的句子的组合。</p><p id="9f87" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一些应用程序需要多种语言，但其他应用程序需要一种语言，但有大量内容可以重用。在本文中，我想向您展示为您的Angular应用程序创建一个<code class="fe lw lx ly lz b">ContentService</code>(有人称之为字典)的最快方法。</p><blockquote class="ma mb mc"><p id="ec66" class="la lb md lc b ld le jv lf lg lh jy li me lk ll lm mf lo lp lq mg ls lt lu lv in bi translated">如果你需要多语言的内容服务，我强烈推荐<a class="ae kz" href="http://www.ngx-translate.com/" rel="noopener ugc nofollow" target="_blank"> NGX-Translate </a>。这个包提供了一个简单的API和管道机制来重用内容，但也支持多种语言。</p></blockquote></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="ef59" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">创建内容服务</h1><p id="3976" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">创建Angular服务最简单快捷的方法是使用Angular CLI。</p><pre class="kk kl km kn gu nl lz nm nn aw no bi"><span id="0b1b" class="np mp iu lz b gz nq nr l ns nt">ng generate service services/content</span></pre><p id="189d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过运行这个命令，您将生成一个Angular服务，自动添加到<code class="fe lw lx ly lz b">app.module.ts</code>文件中。如果您的项目具有不同的CLI设置，它可能会出现在另一个Angular模块中。</p><p id="5a4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在内容服务看起来是这样的。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="3ef0" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">创建一个JSON字典文件</h1><p id="4a99" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">您需要创建一个字典文件来放入您所有的标题、标签和其他内容。请将它放在最适合您的应用的地方。</p><p id="d71b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我创建了一个<code class="fe lw lx ly lz b">dictionary</code>文件夹，在那里我创建了<code class="fe lw lx ly lz b">general.dictionary.json</code>文件，但是我可以在那里有更多的字典文件。</p><p id="4803" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我放进去的内容是这样的。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="4e20" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以创建任何你喜欢的结构；这取决于你怎么做最好。</p></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="d986" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">为可重用性准备内容服务</h1><p id="d2a8" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">我们从创建私有财产<code class="fe lw lx ly lz b">cache$</code>开始，在那里我们制作一个<code class="fe lw lx ly lz b">BehaviourSubject</code>。我们这样做是因为我们可以从应用程序的任何地方订阅这个<code class="fe lw lx ly lz b">BehaviourSubject</code>。最棒的是，当一个内容项被更新时，它将自动在任何地方被更新。</p><blockquote class="nw"><p id="7070" class="nx ny iu bd nz oa ob oc od oe of lv dk translated">我创建了一个<a class="ae kz" href="https://stackblitz.com/edit/angular-content-dictionary-service?file=README.md" rel="noopener ugc nofollow" target="_blank"> StackBlitz示例</a>，来展示为什么<code class="fe lw lx ly lz b">BehaviourSubject</code>是服务的一个重要部分。</p></blockquote><figure class="og oh oi oj ok ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><blockquote class="ma mb mc"><p id="80f6" class="la lb md lc b ld le jv lf lg lh jy li me lk ll lm mf lo lp lq mg ls lt lu lv in bi translated">如果你想知道不同主题之间的区别，请查看这个帖子"<a class="ae kz" href="https://hasnode.byrayray.dev/rxjs-subject-behavioursubject-replaysubject-asyncsubject-void-subject-angular" rel="noopener ugc nofollow" target="_blank">当在Angular </a>中使用RxJS主题、behaviour主题、replay主题、async主题或Void主题时"</p></blockquote><p id="e678" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下一步是在顶部导入字典文件。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="d4b0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在服务的构造函数中，我们希望确保如果<code class="fe lw lx ly lz b">BehaviourSubject</code>是<code class="fe lw lx ly lz b">null</code>，我们需要从字典文件中添加内容。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="005b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我们需要一个方法将<code class="fe lw lx ly lz b">BehaviourSubject</code>及其内容公开给订阅者。我们通过返回<code class="fe lw lx ly lz b">cache$</code>属性来做到这一点。在这种情况下，方法的返回类型是<code class="fe lw lx ly lz b">any</code>,因为您不必键入字典的结构。但是如果你想，你可以做到。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="ac5d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了使服务更适合在HTML模板中使用，我们可以公开链接了<code class="fe lw lx ly lz b">.getValue()</code>方法的<code class="fe lw lx ly lz b">content()</code>方法。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="52f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，我们的服务中有了一切可以使用的东西。服务的完整代码如下所示。简单右😉。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="f74b" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">使用内容中的内容服务</h1><p id="7e14" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">我猜你知道怎么做一个有角度的组件。CLI是我最喜欢的方式。例如，您生成一个<code class="fe lw lx ly lz b">HomepageComponent</code>。</p><pre class="kk kl km kn gu nl lz nm nn aw no bi"><span id="463a" class="np mp iu lz b gz nq nr l ns nt">ng generate component components/homepage</span></pre><p id="b477" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你自己有个角的成分，那也没问题。</p><p id="4880" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，我们需要将<code class="fe lw lx ly lz b">ContentService</code>导入到我们的组件中，并通过<code class="fe lw lx ly lz b">constructor</code>公开它。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="ff78" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我们想将来自<code class="fe lw lx ly lz b">ContentService</code>的内容暴露给HTML模板。我们在组件中创建一个<code class="fe lw lx ly lz b">content</code>属性，并通过<code class="fe lw lx ly lz b">constructor</code>添加值。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="c330" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过<code class="fe lw lx ly lz b">console.log</code>，您可以测试是否一切正常。</p><p id="05a9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在使用<code class="fe lw lx ly lz b">ContentService</code>将字典文件中的标题添加到HTML模板中。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="ffa9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在示例中，您可以看到我们向模板添加了一个表达式。在这个表达式中，我们使用了无效碰撞技术。我们这样做，所以当属性不在字典文件中时，我们不会得到错误。在这种情况下，它只是向你显示“标题”。如果该值可用，它将交付该值。</p></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="fb48" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">资源</h1><p id="02fb" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated"><strong class="lc iv"> StackBlitz </strong>中的代码示例👇</p><div class="ol om gq gs on oo"><a href="https://stackblitz.com/edit/angular-content-dictionary-service?ctl=1&amp;embed=1&amp;file=src/app/app.component.ts&amp;hideExplorer=1&amp;hideNavigation=1" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd iv gz z fq ot fs ft ou fv fx it bi translated">角度内容/字典服务(RxJS) - StackBlitz</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">编辑描述</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">stackblitz.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kt oo"/></div></div></a></div><p id="ae9a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> Github </strong>示例👇</p><div class="ol om gq gs on oo"><a href="https://github.com/devbyray/angular-content-dictionary-service/tree/master" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd iv gz z fq ot fs ft ou fv fx it bi translated">github-dev byray/angular-content-dictionary-service:用StackBlitz ⚡️创建</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">由斯塔克布里兹·⚡️.创作通过创建一个应用程序，为devbyray/angular-content-dictionary-service开发做出贡献</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">github.com</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc kt oo"/></div></div></a></div></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="1950" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">结论</h1><p id="7cc1" class="pw-post-body-paragraph la lb iu lc b ld ng jv lf lg nh jy li lj ni ll lm ln nj lp lq lr nk lt lu lv in bi translated">现在，您在Angular中有了一个简单的内容服务，而不需要使用外部包。所以它重量轻，速度超快，这是它最大的优点。我们可能经常认为它太复杂，但我们需要的只是简单的东西。</p><p id="da4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">希望这有助于您构建易于维护的出色的角度应用程序。</p></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="f81b" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated">谢谢！</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pe"><img src="../Images/2bd571bb1ce9f466ae279fa98111b086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7pa1RpRxXqdkgYAJ"/></div></figure><p id="6169" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">读完这个故事后，我希望你学到了一些新的东西，或者受到启发去创造一些新的东西！🤗</p><p id="dc24" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果我给你留下了问题或一些要说的话作为回应，向下滚动并给我键入一条消息。如果你想保密，请在Twitter @DevByRayRay 上给我发一条<a class="ae kz" href="https://twitter.com/@devbyrayray" rel="noopener ugc nofollow" target="_blank"> DM。我的DM永远是开放的😁</a></p></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><p id="2ca9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://byrayray.medium.com/subscribe" rel="noopener"> <strong class="lc iv">通过电子邮件获取我的文章点击这里</strong> </a> <strong class="lc iv"> | </strong> <a class="ae kz" href="https://byrayray.medium.com/membership" rel="noopener"> <strong class="lc iv">购买5美元中等会员资格</strong> </a></p></div><div class="ab cl mh mi hy mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="in io ip iq ir"><h1 id="0af6" class="mo mp iu bd mq mr ms mt mu mv mw mx my ka mz kb na kd nb ke nc kg nd kh ne nf bi translated"><strong class="ak">阅读更多</strong></h1><div class="ol om gq gs on"><div role="button" tabindex="0" class="ab bv gw cb fq pf pg bn ph kt ex"><div class="pi l"><div class="ab q"><div class="l di"><img alt="RayRay" class="l de bw pj pk fe" src="../Images/992af170033696163d6cc0269218aedd.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*1fUwrIRcFq3paK71SLifMw.png"/><div class="fb bw l pj pk fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://byrayray.medium.com/?source=post_page-----1970fbc67681--------------------------------" rel="noopener follow" target="_top">雷雷</a></p></div></div><div class="pn po gx l"><h2 class="bd iv uu uv fq uw fs ft ou fv fx it bi translated">荒诞的故事</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi ux au uy uz va rg vb an eh ei vc vd ve el em eo de bk ep" href="https://byrayray.medium.com/list/angular-stories-24674407532a?source=post_page-----1970fbc67681--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="vf l fp"><span class="bd b dl z dk">6 stories</span></div></div></div><div class="qa dh qb fq ab qc fp di"><div class="di ps bv pt pu"><div class="dh l"><img alt="" class="dh" src="../Images/b94f2b7d2929c90566cd2dd6f657a751.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*O_EKcNrJVWS18ZG-bP1FtA.png"/></div></div><div class="di ps bv pv pw px"><div class="dh l"><img alt="" class="dh" src="../Images/02b73423a62d73b113af9fdf9629c79f.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*HWY53D51pJqJuCKUXFf_9g.jpeg"/></div></div><div class="di bv py pz px"><div class="dh l"><img alt="Stacked books" class="dh" src="../Images/b02a2f57c0093e04ab1d11d3a55f35ea.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*QhXyFtl1Xx_ptTw5"/></div></div></div></div></div></div></div>    
</body>
</html>