<html>
<head>
<title>A Look at Pure and Curry Functions in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的Pure和Curry函数</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-look-at-pure-and-curry-functions-in-swift-c62c21d07598?source=collection_archive---------19-----------------------#2020-04-23">https://betterprogramming.pub/a-look-at-pure-and-curry-functions-in-swift-c62c21d07598?source=collection_archive---------19-----------------------#2020-04-23</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b9e1" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Swift中的函数式编程</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/85453e969be91915fbe74881bfa1d1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RiS86bu5rmlvOchC"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@thips?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Thiébaud Faix </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="86a1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Swift不是纯粹的函数式语言。相反，这种语言足够灵活，允许多种范例——面向对象、函数式和泛型编程。</p><p id="f9e6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">纯函数式语言的一个必要特征是“没有副作用”换句话说，函数应该根据参数返回值，而不依赖于任何外部状态。在非常基础的层面上，在Swift中使用<code class="fe lw lx ly lz b">let</code>定义一个值是尊重函数式编程的，因为它避免了可变状态。</p><p id="5829" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">尽管语言不是纯函数式的，我们仍然可以利用范式特性。在接下来的几节中，我们将深入探讨两个核心函数式编程概念Swift中的pure和curry函数——并探索它们的用例。让我们开始吃吧。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="3c5b" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">纯函数</h1><p id="6bb9" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">Swift中的功能有多种类型。闭包是没有名字的函数，但是它们有能力捕获周围的值。虽然这可能将闭包描绘成不纯的函数，但这并不一定适用于所有情况。</p><p id="f814" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下核心原则决定了一个函数是否是纯函数:</p><ul class=""><li id="0435" class="ne nf iu lc b ld le lg lh lj ng ln nh lr ni lv nj nk nl nm bi translated">给定一组参数，它必须返回相同的值。</li><li id="4a92" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">它不应该自己变异。</li><li id="fc25" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">它不能依赖于任何可变的东西。</li><li id="5d98" class="ne nf iu lc b ld nn lg no lj np ln nq lr nr lv nj nk nl nm bi translated">它的评估应该没有副作用—网络或数据库调用。</li></ul><p id="8502" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">没有返回值的函数是不纯函数的明显标志。另一个不纯函数的生动例子是<code class="fe lw lx ly lz b">print</code>函数，因为它改变了I/O，这是一个外部状态。</p><p id="6f34" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是一个纯函数的基本例子:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="c0e0" class="nw mi iu lz b gz nx ny l nz oa">func add(a: Int, b: Int) -&gt; Int { a + b }</span></pre><p id="ed22" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们考虑另一个例子，我们将<em class="ob">净化</em>一个不纯的函数:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oc od l"/></div></figure><p id="eb7b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上面的变异函数改变了字符串<code class="fe lw lx ly lz b">name</code>。我们可以简单的去掉mutating关键字，设置返回类型为<code class="fe lw lx ly lz b">String</code>，做一个<code class="fe lw lx ly lz b">return append(str)</code>，让函数变得纯粹。</p><p id="ab6e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在代码库中使用纯函数有很多好处——可重用性、线程安全性、可测试性——从而产生更可预测的代码。不可变值和纯函数在并发中非常方便。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="a480" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">咖喱功能</h1><p id="bb78" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">Currying是通过将具有多个参数的单个函数翻译成一系列具有单个参数的函数来组合函数的过程。</p><p id="ab71" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">本质上，它允许我们使用函数的部分应用，其中您可以保持一个中间函数，在代码中传递它，并随后填充剩余的参数以完全评估它。</p><p id="662f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们看一个简单的函数，并将其转换成一个咖喱函数:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oc od l"/></div></figure><p id="4c4c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意:删除了currying函数(<code class="fe lw lx ly lz b">sum(_ x: Int)(_ y: Int)</code>)的旧声明语法。</p><p id="ee56" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，上面的代码可能看起来没什么大不了的，但是在高阶函数中使用curry函数确实很方便:</p><pre class="kk kl km kn gu ns lz nt nu aw nv bi"><span id="f1f2" class="nw mi iu lz b gz nx ny l nz oa">let numbers = 1...10<br/>let add10 = sum(10) </span><span id="b98d" class="nw mi iu lz b gz oe ny l nz oa">let x = numbers.map(add10)</span><span id="2a81" class="nw mi iu lz b gz oe ny l nz oa">//Output of x = [11, 12, 13,..., 20]</span></pre></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="30b2" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="af01" class="pw-post-body-paragraph la lb iu lc b ld mz jv lf lg na jy li lj nb ll lm ln nc lp lq lr nd lt lu lv in bi translated">Swift是一门神奇的语言，功能是一等公民。我希望pure和curry函数的概念能够帮助您在基于iOS和Swift的应用程序中很好地应用函数式编程。</p><p id="1bcd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。感谢阅读。</p></div></div>    
</body>
</html>