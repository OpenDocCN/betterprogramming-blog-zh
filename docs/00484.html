<html>
<head>
<title>The Beginner’s Guide to Contributing to the Mozilla Firefox Codebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">贡献Mozilla Firefox代码库的初学者指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/beginners-guide-contributing-to-mozilla-firefox-codebase-lionguest-studios-8e9b42140c38?source=collection_archive---------3-----------------------#2019-05-29">https://betterprogramming.pub/beginners-guide-contributing-to-mozilla-firefox-codebase-lionguest-studios-8e9b42140c38?source=collection_archive---------3-----------------------#2019-05-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="64a4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何为网络上最好、最受欢迎的浏览器之一做出贡献</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/731f662ef40c9f3e9cd6c87bfd465cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0beMieKwV3dOjGPKplZmA.jpeg"/></div></div></figure><p id="7a65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://www.mozilla.org/en-US/firefox/" rel="noopener ugc nofollow" target="_blank">众所周知，Mozilla Firefox </a>是一款开源浏览器，被数百万用户、开发者和网络安全专家广泛使用。该软件可以免费使用，其源代码向公众开放。世界各地的任何人都可以修改软件并修复错误。你想过自己为Mozilla Firefox浏览器做贡献吗，不管是通过代码还是通过编写文档？如果是这样，这是你需要做出第一份贡献的每一步。</p><p id="1b91" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">总共有四个步骤:</p><ul class=""><li id="0642" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">获取Mozilla Firefox源代码。</li><li id="43a7" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">创建一个<a class="ae ln" href="https://www.bugzilla.org/" rel="noopener ugc nofollow" target="_blank"> Bugzilla </a>账户。</li><li id="7b37" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">对源代码进行更改并创建补丁。</li><li id="fd2f" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">使用<a class="ae ln" href="https://www.phacility.com/phabricator/" rel="noopener ugc nofollow" target="_blank"> Phabricator </a>提交补丁进行审查。</li></ul></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="94fe" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">如何获得Mozilla Firefox源代码</h1><p id="fc27" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">这篇文章讨论在Linux系统上构建Firefox(任何发行版都可以)。要了解更多关于在另一个平台上构建Firefox的信息，你可以点击<a class="ae ln" href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Simple_Firefox_build" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="f584" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要下载源代码，你必须使用<a class="ae ln" href="https://www.mercurial-scm.org/" rel="noopener ugc nofollow" target="_blank"> Mercurial </a>(也称为hg)，这是一个用于Firefox开发的分布式版本控制系统。</p><p id="e1d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，打开一个新的终端窗口，按照下面的命令下载源代码:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c35e" class="nl mk iq nh b gy nm nn l no np">//Create a folder named src and go inside it <br/>mkdir src &amp;&amp; cd src </span><span id="5e17" class="nl mk iq nh b gy nq nn l no np">//Get the source code <br/>hg clone <a class="ae ln" href="https://hg.mozilla.org/mozilla-central" rel="noopener ugc nofollow" target="_blank">https://hg.mozilla.org/mozilla-central</a></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/cce3c3823547eec03fcbdaf053a74a95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xYa7tvUBobeDu3rT.png"/></div></div></figure><p id="d99a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你必须先编译代码，然后才能运行它。编译过程可能需要几个小时才能完成，请耐心等待。此外，在编译源代码时，您可能会遇到各种错误。下面列出了这些错误以及解决这些错误所需的相应命令。</p><p id="d7d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要编译源代码:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="f067" class="nl mk iq nh b gy nm nn l no np">//Change directory to mozilla-central <br/>cd mozilla-central </span><span id="d2e5" class="nl mk iq nh b gy nq nn l no np">//Compile the source <br/>./mach build</span></pre><h2 id="8244" class="nl mk iq bd ml ns nt dn mp nu nv dp mt la nw nx mv le ny nz mx li oa ob mz oc bi translated"><strong class="ak">代码编译过程中可能出现的错误</strong></h2><p id="7232" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">您可能得到的错误之一是<code class="fe od oe of nh b">rust compiler</code>版本错误。当您安装了旧版本的<code class="fe od oe of nh b">rust compiler</code>时，会出现此错误。要解决这个问题，请运行以下命令:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="be03" class="nl mk iq nh b gy nm nn l no np">//To update the rust compiler <br/>rustup update</span></pre><p id="e38d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一个错误与<code class="fe od oe of nh b">cbindgen</code>有关:使用以下命令解决它:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="85ad" class="nl mk iq nh b gy nm nn l no np">// Install the latest version of cbindgen <br/>cargo install cbindgen --force</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/872c0381a7888842ab898ae942ec604c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rFKQXztPoHZ_FGxj.png"/></div></div></figure><p id="6000" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据您在系统上安装的软件包以及它们是否是最新的，您可能会得到更多的错误。按照终端窗口中显示的步骤可以解决这些错误。</p><p id="1e09" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在您已经成功编译了它，您已经准备好运行源代码了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/6814600025aa6daf51b7a996e5f5b16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*snPrrTT57ndl06FB.png"/></div></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="1cf9" class="nl mk iq nh b gy nm nn l no np">//Running the code <br/>./mach run</span></pre></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="ae89" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">创建补丁</h1><p id="25d7" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">首先，你需要一个Bugzilla账户。使用您的电子邮件地址或GitHub帐户创建一个。</p><h2 id="30ba" class="nl mk iq bd ml ns nt dn mp nu nv dp mt la nw nx mv le ny nz mx li oa ob mz oc bi translated">选择您的问题</h2><p id="9cb4" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">创建Bugzilla帐户后，寻找“好的第一个bug”这些bug很容易解决，重点是让初学者熟悉Firefox的源代码。在您熟悉流程和源代码之后，您将能够解决高优先级的错误。可以在<a class="ae ln" href="https://codetribute.mozilla.org/" rel="noopener ugc nofollow" target="_blank">这里</a>找到可以解决的bug列表。你可以根据你的专业知识和你精通的编程语言来过滤bug。</p><h2 id="d2fc" class="nl mk iq bd ml ns nt dn mp nu nv dp mt la nw nx mv le ny nz mx li oa ob mz oc bi translated">例子</h2><p id="2916" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">对于本教程，我们将使用<a class="ae ln" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1475503" rel="noopener ugc nofollow" target="_blank"><em class="oi">Bug 1475503</em></a><em class="oi">:</em><em class="oi">停止使用</em> <code class="fe od oe of nh b"><em class="oi">reftest.jsm</em></code>中的预处理器，这是最容易开始的。</p><p id="1d29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从阅读错误报告者提供的信息开始，以便理解问题。如果你还需要更多的信息，或者你被卡住了，你可以向与那个bug相关的指导者(报告者)寻求帮助。</p><p id="7ddb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每当你解决一个新的bug时，你首先要确保你系统上的Firefox源代码是最新的。您可以通过运行以下命令来更新您的Firefox代码库:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="8066" class="nl mk iq nh b gy nm nn l no np">//To update the Mozilla Firefox code base <br/>hg pull -u</span></pre><p id="1115" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们来看看Bug 1475503的记者对此是怎么说的:</p><blockquote class="oj ok ol"><p id="a4c5" class="kr ks oi kt b ku kv jr kw kx ky ju kz om lb lc ld on lf lg lh oo lj lk ll lm ij bi translated">在位置<code class="fe od oe of nh b">mozilla-central/layout/tools/reftest/reftest.jsm</code>的同一文件中有两个预处理程序。第一个预处理器，<code class="fe od oe of nh b">#ifdef MOZ_ENABLE_SKIA_PDF</code>可以从该文件中删除，并添加到位于<code class="fe od oe of nh b">mozilla-central/toolkit/modules/AppConstants.jsm</code>的文件中。第二个预处理器可以完全删除。最后，<code class="fe od oe of nh b">mozilla-central/layout/tools/reftest/jar.mn</code>文件中<code class="fe od oe of nh b">reftest.jsm</code>之前的<code class="fe od oe of nh b">*</code>必须删除。</p></blockquote><h2 id="5b42" class="nl mk iq bd ml ns nt dn mp nu nv dp mt la nw nx mv le ny nz mx li oa ob mz oc bi translated">如何解决Bug 1475503</h2><p id="fbfe" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">首先，我们把<code class="fe od oe of nh b">reftest.jsm</code>中的<code class="fe od oe of nh b">#ifdef MOZ_ENABLE_SKIA_PDF</code>去掉。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/59c0a1f38720d764bf9d4a6f1117c16f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WNp8KnhWxX1YLByC.png"/></div></div></figure><p id="6bab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在在<code class="fe od oe of nh b">AppConstants.jsm</code>文件末尾添加第一个预处理器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/d430cb37c4bcca6ed2f85b054bb72540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O_mmat9-6fe5gg_F.png"/></div></div></figure><p id="87d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">其次，从<code class="fe od oe of nh b">reftest.jsm</code>文件中完全删除第二个预处理器，如下所示。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="c744" class="nl mk iq nh b gy nm nn l no np">#ifdef XP_MACOSX <br/>try { <br/>var dock = Cc["@mozilla.org/widget/macdocksupport;1"].getService(Ci.nsIMacDockSupport); dock.activateApplication(true); <br/>} <br/>catch(ex) { } <br/>#endif</span></pre><p id="456d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，去掉<code class="fe od oe of nh b">mozilla-central/layout/tools/reftest/jar.mn</code>文件中<code class="fe od oe of nh b">reftest.jsm</code>前的<code class="fe od oe of nh b">*</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/4a71f420da57e4d8e0989b61c686a199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Rs9sHMN8Bv-t0OC2.png"/></div></div></figure><p id="21c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们已经完成了所需的更改；接下来，我们可以构建源代码来检查一切是否正常。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="7a9e" class="nl mk iq nh b gy nm nn l no np">//Compiling the source code <br/>./mach build</span></pre><h2 id="da0d" class="nl mk iq bd ml ns nt dn mp nu nv dp mt la nw nx mv le ny nz mx li oa ob mz oc bi translated">提交更改</h2><p id="ede4" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">到目前为止，我们所做的更改已经被表示为一个补丁。现在，我们必须用提交消息来提交这些更改。提交消息必须包含错误号和该错误的简短描述。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi gj"><img src="../Images/edf5d782fb76c56608ad00211c082dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5TE1BfEnd7qon-gH.png"/></div></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="9b60" class="nl mk iq nh b gy nm nn l no np">//Adding a commit message <br/>hg commit -m "Bug 1475503 Stop using preprocessor in reftest.jsm"</span></pre></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="fff4" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">提交您的修补程序以供审查</h1><p id="404b" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">首先，按照中的<a class="ae ln" href="https://moz-conduit.readthedocs.io/en/latest/phabricator-user.html" rel="noopener ugc nofollow" target="_blank">步骤创建一个Phabricator账户。</a></p><p id="4410" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装<code class="fe od oe of nh b"><a class="ae ln" href="https://github.com/mozilla-conduit/review" rel="noopener ugc nofollow" target="_blank">moz-phab</a></code>和<a class="ae ln" href="https://secure.phabricator.com/book/phabricator/article/arcanist/" rel="noopener ugc nofollow" target="_blank"> Arcanist </a>，通过这个<a class="ae ln" href="https://moz-conduit.readthedocs.io/en/latest/arcanist-linux.html" rel="noopener ugc nofollow" target="_blank">链接</a>提交补丁。</p><p id="85d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在使用<code class="fe od oe of nh b">moz-phab</code>提交补丁进行审查之前，请确保在完成以上两个步骤之后运行以下命令。否则，它会给你一个错误(<code class="fe od oe of nh b">moz-phab: command not found</code>)。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="4be9" class="nl mk iq nh b gy nm nn l no np">source ~/.profile</span></pre><p id="f6ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您需要使用以下命令安装一个证书(这是一个一次性的过程)。您需要从您的Phabricator帐户输入API令牌。</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="4282" class="nl mk iq nh b gy nm nn l no np">moz-phab install-certificate</span></pre><p id="b083" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您已经准备好提交您的补丁进行审查。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/99d966959f4c26a93fb9df040f0012c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i5CVjVtySWyQoA3O.png"/></div></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="25d2" class="nl mk iq nh b gy nm nn l no np">moz-phab submit</span></pre></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="a6d7" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">了解更多关于开源的资源</h1><ol class=""><li id="0c42" class="lo lp iq kt b ku nb kx nc la ot le ou li ov lm ow lu lv lw bi translated"><a class="ae ln" href="https://amzn.to/33UdUta" rel="noopener ugc nofollow" target="_blank">商业开放(源代码):开源软件许可实用指南——第二版</a></li><li id="f281" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm ow lu lv lw bi translated"><a class="ae ln" href="https://amzn.to/2Xg61Ma" rel="noopener ugc nofollow" target="_blank">管理第三方软件许可证:掌控您的许可证组合</a></li><li id="ae55" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm ow lu lv lw bi translated"><a class="ae ln" href="https://amzn.to/2Qo62fU" rel="noopener ugc nofollow" target="_blank">生产开源软件:如何运行一个成功的自由软件项目</a></li><li id="6ad0" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm ow lu lv lw bi translated"><a class="ae ln" href="https://amzn.to/378geyX" rel="noopener ugc nofollow" target="_blank">社区的艺术:构建参与的新时代</a></li></ol><p id="6d65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更多这样的博客请访问<a class="ae ln" href="https://liongueststudios.com/blogs/" rel="noopener ugc nofollow" target="_blank"> LionGuest工作室</a>。</p><p id="3dd8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>