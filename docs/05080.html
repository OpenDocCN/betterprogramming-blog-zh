<html>
<head>
<title>Clean Code: Naming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">干净代码:命名</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/clean-code-naming-b90740cbae12?source=collection_archive---------0-----------------------#2020-06-06">https://betterprogramming.pub/clean-code-naming-b90740cbae12?source=collection_archive---------0-----------------------#2020-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e7ab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">命名变量、函数、类等的最佳实践</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f3945fadc53c7c273d132b77e69116f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tums41FARnW23dtyXsi86w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@florianolv?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Florian Olivo </a>在<a class="ae ky" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a758" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">欢迎阅读干净代码系列的第一部分。这个系列将受到罗伯特·c·马丁(鲍勃叔叔)的《干净代码》一书的高度启发，有时还会令人尴尬地抄袭该书。我强烈推荐阅读这本书。这个系列与原著相去甚远。</p><p id="4abb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">书中有很多代码示例，大部分都是Java提供的。我不会遍历所有的代码示例，但如果我确实使用了一些，我会使用Python来翻译或制作示例。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9cb3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是干净代码？</h1><p id="3c06" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">干净的代码应该具有:</p><ul class=""><li id="43a6" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">全面测试覆盖</li><li id="871e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">完整的错误处理</li><li id="f65a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">没有重复</li><li id="7f0f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">高表现力</li><li id="e114" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">最小数量的实体，如类、函数、方法和…</li><li id="c4ab" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">性能接近最佳</li><li id="15cf" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">对第三方的依赖性最小</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b018" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">有意义的名字</h1><p id="5af0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">名字是代码的最小组成部分。名字无处不在:函数、类、文件、组件和容器都有名字。名字也是干净代码的基本组成部分。一个好名字有一些硬性规定。</p><h2 id="a410" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">使用透露意图的名字</h2><p id="2bdb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一个好名字应该只回答三个问题。</p><p id="9281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道这听起来很简单，但是要取一个好名字需要很多时间。但是，从长远来看，它会节省更多的钱。</p><p id="fe7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个名字不应该有注释来表达它的意图。看看这个例子:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="3c4f" class="nn md it oa b gy oe of l og oh"># Dirty Code d = 100 # elapsed time in days </span><span id="69e8" class="nn md it oa b gy oi of l og oh"># Clean Code elapsed_time_in_days = 100</span></pre><p id="bfa9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第一种情况下，您需要浏览注释。这一次没关系。但是无论何时使用变量<code class="fe oj ok ol oa b">d</code>，你都必须进行初始化，以获得变量的意图。但是第二种情况，<code class="fe oj ok ol oa b">elapsed_time_in_days</code>，本身就很有表现力。</p><p id="a32e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要给你的变量取一个单字母的名字。一个字母的名字从来没有表达。他们没有透露他们的意图。也有一些例外，比如<code class="fe oj ok ol oa b">for</code>循环中的字母<em class="om"> i </em>、<em class="om"> j </em>和<em class="om"> k </em>。但是，千万不要使用小写字母<em class="om"> l </em> (el)、大写字母<em class="om"> I </em> (eye)或大写字母<em class="om"> O </em> (oh)作为名称，因为程序员容易将它们分别与1和0混淆。</p><h2 id="1fc3" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">避免虚假信息</h2><p id="9dcb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">避免特定于平台的名字，比如<code class="fe oj ok ol oa b">htop </code>和<code class="fe oj ok ol oa b">hp</code>。</p><p id="e869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要用<code class="fe oj ok ol oa b">dataset_generator_for_cat_with_user_mobile_1</code>、<code class="fe oj ok ol oa b">dataset_generator_for_cat_with_user_mobile_2</code>之类变化不大的名字。在这种情况下，直到最后一个字母，你才会得到差异，而且大多数时候，你会忽略这种差异。</p><h2 id="a549" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">进行有意义的区分</h2><p id="7d1b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">变量命名应该有足够的区别。如果作用域中有一个同名的变量，不要只追加一个数字:<code class="fe oj ok ol oa b">a1</code>，<code class="fe oj ok ol oa b">a2</code>是intent-revising的反义词。</p><p id="b036" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要用意思相近的名字。比如，<code class="fe oj ok ol oa b">product_data</code>和<code class="fe oj ok ol oa b">product_info</code>就没有恰当的区分。光看名字，不能假设这两个变量的意图。这些被称为<em class="om">噪声字</em>。其他一些干扰词有<code class="fe oj ok ol oa b">a</code>、<code class="fe oj ok ol oa b">an</code>和<code class="fe oj ok ol oa b">the</code>。</p><p id="1bee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要在变量名后面附加变量类型。使变量名具有很强的表达力，这样你就可以通过变量名来理解变量的类型。例如，<code class="fe oj ok ol oa b">account_name</code>永远不能是浮点数。它必须并且应该是一个字符串。也有一些例外，像<code class="fe oj ok ol oa b">id</code>，可以是字符串，也可以是数字。但是在整个项目中应该遵循这个惯例，这样从事该项目的程序员就会知道<code class="fe oj ok ol oa b">id</code>是一个数字、一个字符串还是其他什么。</p><h2 id="11c1" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">使用易发音的名字</h2><p id="b6f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你不会发音，你就不能像个白痴一样讨论这个问题。</p><p id="1386" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时候一个简短的例子比一大堆文字更好:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="dbc7" class="nn md it oa b gy oe of l og oh"># Poor Name gen_ymdhms = "1591442356268" # Generation year, month, date, hour, min, sec </span><span id="a9e0" class="nn md it oa b gy oi of l og oh"># Good Name<br/>genration_timestamp = "1591442356268"</span></pre><h2 id="b856" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">使用可搜索的名称</h2><p id="4a0f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽可能避免使用单字母名称。如果需要使用单字母名称，请仅在局部范围内使用，而不要在全局范围内使用。</p><p id="0b23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">避免使用像<code class="fe oj ok ol oa b">sum</code>、<code class="fe oj ok ol oa b">temp</code>或<code class="fe oj ok ol oa b">flag</code>这样的常用词，因为它们似乎被许多方法和类使用，因此不是便于搜索的名称。</p><h2 id="cdf4" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">避免编码</h2><p id="7784" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">避免使用像匈牙利符号或成员前缀这样的编码。以前IDE不像现在这么智能的时候就用过。当前的ide足够聪明，可以给我们关于类的类型或成员变量的建议。我们不想让更多的信息塞满我们的大脑。</p><p id="a8a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，应该在整个项目中维护特定于语言的编码，例如Python中的<a class="ae ky" href="https://en.wikipedia.org/wiki/Snake_case" rel="noopener ugc nofollow" target="_blank"> snake_case </a>和JavaScript中的<a class="ae ky" href="https://en.wikipedia.org/wiki/Camel_case" rel="noopener ugc nofollow" target="_blank"> camel case </a>。</p><h2 id="b386" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">避免心理映射</h2><p id="fff3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">程序员确实很聪明。但是代码不是炫耀你聪明的地方。显然，您可以记住<code class="fe oj ok ol oa b">r</code>是去掉了主机和方案的URL的变量名。但是阅读你的代码的人不知道这种心理映射。使用正确表达变量意图的名称。</p><h2 id="26ae" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">类别名</h2><p id="42c3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">类名应该是名词或名词短语。按照设计，类是相同类型的方法和变量的封装，因此它们应该有一个共同的名字。无论如何，类都不应该是动词。</p><h2 id="237c" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">函数/方法名</h2><p id="aa02" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">函数应该是动词或动词短语。根据设计，一个功能应该只有一个职责。如果名字不是动词，那么要么是你命名错了，要么是架构有问题。</p><h2 id="0e36" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">为每个概念选择一个词</h2><p id="9aa8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">避免使用不同但相似的词来定义相同的概念。例如，不要在同一个项目中使用<code class="fe oj ok ol oa b">fetch</code>、<code class="fe oj ok ol oa b">get</code>和<code class="fe oj ok ol oa b">retrieve</code>来承担相同的责任。</p><h2 id="7c2d" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">不要用同一个词表达不同的概念</h2><p id="996b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">避免用同一个词表达完全不同的概念。当你打算遵循前面的规则时，你会得到很多同名的变量。也许在整个项目中使用<code class="fe oj ok ol oa b">add</code>来添加或连接两个现有的值。但是如果我们用它来给一个现有的变量追加一个新值，这将会令人困惑。<code class="fe oj ok ol oa b">append</code>似乎是这种方法更合理的名称。</p><h2 id="c173" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">使用解决方案域名</h2><p id="bc1b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你的代码会被程序员阅读和维护，所以用解决方案域名没问题。例如，在机器学习上下文中，<code class="fe oj ok ol oa b">data_generator</code>是一个很好的名称。看到这个名字的人会知道它是一个数据生成器，是一个迭代器。</p><h2 id="8450" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">使用有问题的域名</h2><p id="ab94" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果没有可用的解决方案域名，则使用特定于域的名称。在这种情况下，程序员可以向领域专家询问其含义。</p><h2 id="dbc8" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">添加有意义的上下文</h2><p id="ff35" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">作为程序员，我们的首要职责是选择尽可能有表现力的名字。但是有时不可能用变量名给出上下文。在这种情况下，首先尝试将变量包含在一个有意义的类或函数中。例如，<code class="fe oj ok ol oa b">name</code>、<code class="fe oj ok ol oa b">city</code>和<code class="fe oj ok ol oa b">district</code>应该用类名<code class="fe oj ok ol oa b">Address</code>括起来。如果这根本不可能，就用上下文的名称作为变量的前缀。但是记住，那是万不得已，所以要经过缜密的思考后再用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="9f7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道对于一件简单的事情来说，有很多该做的和不该做的。但是相信我，这是我在小小的软件工程生涯中遇到的最棘手的问题。</p></div></div>    
</body>
</html>