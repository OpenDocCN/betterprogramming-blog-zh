# 开放 API 生态系统面临的 10 大威胁

> 原文：<https://betterprogramming.pub/10-threats-to-an-open-api-ecosystem-2d8ba0a01818>

## 担心对您的开放 API 生态系统的威胁？准备好以下值得注意的技巧和最佳实践列表

![](img/0eef98e125701f1332cb4b42c04677a4.png)

照片由[飞:D](https://unsplash.com/@flyd2069?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

尽管全球经济形势严峻，但 API 经济仍在持续增长。对于大多数行业来说，API 促进了几乎所有应用程序或服务的即时交易，加快了商品和服务的流动。最近来自 F5 的一份[报告这样描述 API 的扩散:“如果数据是新的石油，那么 API 将成为新的塑料。”](https://www.f5.com/pdf/reports/f5-office-of-the-cto-report-continuous-api-sprawl.pdf)

开放 API(或公共 API)提供了许多机会和竞争优势。公司可以利用开放 API 重塑他们的供应和交付链。企业可以利用大量的开发人才库和不断增长的软件资源库。此外，公司可以在以后将商业开发的 API 作为开放 API 发布。通过这样做，他们可以吸引新客户，增加品牌忠诚度，并提高他们的市场形象。

然而，开放 API 也伴随着固有的风险和挑战，企业必须在开始这一旅程之前解决这些问题。

本文将为 IT 工程师、领导团队成员和网络安全专业人员简要介绍开放 API 生态系统面临的十大威胁。我们还将介绍 Gravitee，这是一个现代化的 API 管理平台，提供了必要的工具和技术来应对 API 开发、部署和维护的挑战。

# API 经济:机遇与威胁

开放 API 提供了许多机会，包括改善与供应商、服务提供商和客户的连接和协作。最终，这有助于改善客户体验。通过 API 端点连接的微服务使企业能够利用适合用途的技术，将他们从繁琐的单一系统中解放出来，从而提高生产力。所有这些都大大降低了应用程序开发、部署和维护的成本。

然而，从本质上讲，开放 API 也会吸引个人和有组织网络罪犯的注意。由于 API 是事务性的，因此它们也容易受到个人、财务和其他敏感信息的意外或恶意泄露。未受保护的端点或未经验证的客户端请求可能会使 API 遭受 DDoS、SQL 注入或勒索软件等攻击。这些会严重影响开放 API 的开发者和消费者。

参与开放 API 生态系统需要精心准备，首先要识别威胁。

# 对开放 API(或任何 API)的 10 种威胁

网络安全部门已经投入大量资源对 API 攻击媒介进行识别、分类和分级。基于这项研究，我们编制了一份清单，列出了开放 API 面临的十大威胁。

## 1.对象级入侵

API 依赖于经常处理对象 id 的端点。这些对象可以是任何资源，如文件、数据库表或端口。糟糕的应用程序设计可能会利用随客户端请求发送的对象 ID。

为了防止这种情况，API 的代码必须在每次获取对象的数据或对其进行任何操作时执行对象级授权检查。此类检查确保发出请求的用户或应用程序具有执行此类功能的最低权限。最佳实践的传统实现使用最小特权的[原则](https://www.cisa.gov/uscert/bsi/articles/knowledge/principles/least-privilege)和基于角色的[访问控制](https://www.techtarget.com/searchsecurity/definition/role-based-access-control-RBAC)来进行这些检查。

## 2.用户认证漏洞

恶意行为者利用具有不可靠用户认证的 API 来欺骗合法用户，获得对系统不同部分的未授权访问，并发起进一步的攻击。

使用健壮的身份验证机制来保护 API 端点对于防范这种威胁至关重要。用户身份验证通过要求客户端提供有效的凭证(如用户名/密码组合或 API 访问密钥)来保护 API。

## 3.粗心的数据暴露

糟糕的编码实践通常会暴露代码中的对象属性、数据或其他敏感信息。在将结果返回给用户之前，客户端应用程序必须过滤掉这些信息。然而，这样的数据(例如，其他 API 的密钥、凭证或个人信息)可能会保留在代码中，并且当 API 代码托管在公共存储库上时，会无意中被广泛使用。

## 4.分布式拒绝服务(DDoS)

如果没有对请求访问速率的限制，API 端点容易受到分布式拒绝服务(DDoS)攻击。这种攻击涉及恶意玩家从多个来源(通常是受损系统)向 API 端点发起大量请求，淹没端点并使其离线。流行的开放 API 可能是这种攻击的常见目标。

速率限制将给定时间内的客户端请求数量限制在特定的最大值。在此期间收到的任何其他客户端请求都将被拒绝。通常，API 网关执行这种限速任务。

## 5.授权黑客

复杂的对象和功能访问控制策略有时可以有多个层次结构、组、角色和权限。这种复杂的安全机制很难使用，也很难维护。开发人员或管理员有时可能会为用户或应用程序分配更高的权限来规避这个问题。这通常会导致入侵者利用更高的特权，攻击个人帐户或完全绕过访问控制中的漏洞。

## 6.批量分配弱点

这种威胁也称为自动绑定或对象注入漏洞。现代应用程序框架鼓励开发人员使用自动将客户端请求输入值链接到代码变量和其他内部对象的功能，以简化和加速开发。利用这种框架副作用，攻击者可以改变或覆盖开发人员永远不会公开的关键对象的属性。

## 7.安全错误配置缺陷

安全错误配置的示例包括不安全的默认设置、不充分或未跟踪的配置更改、不安全的存储、错误配置的 HTTP 头、许可跨源资源共享(CORS)以及包含敏感信息的详细错误消息。部署和配置支持开放 API 运行的基础设施资源需要非常注意安全性。

## 8.代码注入漏洞

代码注入涉及恶意玩家利用不良输入验证在 API 请求中嵌入 SQL 或其他命令。当 API 代码不能很好地防范此类攻击时，这些命令可能会暴露敏感数据，执行数据修改或删除，或者便于进一步渗透。

## 9.资产管理不善

由于 API 比传统的 web 应用程序公开更多的端点，维护不良的文档、接口描述、版本或资产列表可能会导致忽略重要的攻击面并保持不安全。

## 10.记录和监控不足

不充分的日志记录和监控导致关键的安全事件没有被报告，主动警告没有被发送。此外，缺失或有缺陷的事件响应流程会让攻击者有机可乘，继续他们的活动而不被发现。许多违规研究表明，监控不力会导致违规行为被忽视 200 多天。

# 应对开放 API 威胁

为了解决上面讨论的威胁和漏洞，有必要在 API 的设计和开发阶段采用安全性最佳实践。以下是一些需要考虑的基本安全控制措施:

*   监控软件供应链和分析软件组合可以识别易受攻击的组件，例如不安全的第三方库。
*   静态应用程序安全测试(SAST)审查应用程序代码，并可以识别漏洞。
*   动态应用程序安全测试(DAST)在应用程序运行时模拟对应用程序代码的攻击，从而发现可能的弱点。
*   安全事故和事件管理(SIEM)解决方案可以扫描应用程序日志，以发现可能的违规、可疑活动、趋势或异常情况。
*   当检测到安全异常或威胁时，安全协调、自动化和响应(SOAR)解决方案会根据操作手册执行补救步骤。
*   健壮的认证机制允许验证 API 用户。类似地，强授权机制使用户只能执行被允许执行的特定操作。
*   使用对称密钥加密数据，并使用 SSL/TLS 证书保护 API 端点，确保数据在静态和传输过程中受到保护。
*   经过测试的强大灾难恢复计划可确保 API 得到快速修复并恢复在线，即使它已经受损。

此外，API 网关还可以通过向其背后托管的 API 提供服务发现、路由、负载平衡、高可用性和可观察性服务，极大地增强 API 的安全性和稳定性。它允许您轻松地使用 SSL/TLS 保护所有通信通道，实施速率限制以防止 DDoS 攻击，并限制客户端请求有效负载和 API 响应大小。API 网关也可以与 web 应用程序防火墙(WAF)一起使用，以增加一层安全性。

# 结论

正如我们所见，公司可以通过使用开放 API 构建强大的应用程序来参与 API 经济。然而，开放 API 并非没有威胁。我们简要介绍了十种安全威胁以及应对这些威胁的措施。API 网关可以促进这些措施，并提供高级管理功能。

[Gravitee 平台](https://www.gravitee.io/)提供了一套强大的应用程序，用于完整的 API 生命周期管理——包括 API 设计、部署、访问管理、网关服务、可观察性和发布。

Gravitee 的工具可以生成带有策略和访问计划的文档化 API，创建自动化警报方法，处理访问管理需求，并为身份验证流提供动态建模。最棒的是，[gravite 驾驶舱](https://www.gravitee.io/platform/cockpit)可以集中管理所有 API 环境，从沙盒到生产。

要了解更多关于 Gravitee 的信息，[预订一个演示](https://www.gravitee.io/demo?hsLang=en)。