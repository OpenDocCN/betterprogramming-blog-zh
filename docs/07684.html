<html>
<head>
<title>Android View Binding Components: Dialogs and Adapters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android视图绑定组件:对话框和适配器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/android-view-binding-components-dialogs-and-adapters-7628f6ce6ff7?source=collection_archive---------9-----------------------#2021-02-09">https://betterprogramming.pub/android-view-binding-components-dialogs-and-adapters-7628f6ce6ff7?source=collection_archive---------9-----------------------#2021-02-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a8e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不再有findViewById。是时候升级了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/083bef4b8fbb207e6d442b72ab90d5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JZu4i7PRPHMhMQy6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·冯·阿彭在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="c481" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，您将学习如何使用视图绑定来链接视图和代码，而不是传统的<code class="fe lv lw lx ly b">findViewById</code>或重量级的数据绑定框架。在我以前的文章中，我们讨论了基础知识。在本文中，我们将讨论Android组件，如对话框和适配器。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="970d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">介绍</h1><p id="562c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">对于那些不熟悉视图绑定的人来说，这是一个来自Jetpack家族的轻量级库，用于将视图与Android组件链接起来。在当前的Android环境中，我们有四种解决方案来链接视图和Android组件:</p><ul class=""><li id="57cf" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe lv lw lx ly b">findViewById</code> —这是涉及更多手动工作的传统解决方案。</li><li id="e0d1" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">Kotlin人工合成——这是Kotlin本地库的一个不错的解决方案，但Kotlin团队最近否决了它。</li><li id="8eab" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">数据绑定——这个库提供了比视图链接更高级的特性，比如双向绑定等等。</li><li id="8870" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">视图绑定—具有空值和类型安全代码的本机解决方案。</li></ul><p id="7844" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有兴趣进一步了解这四种类型，我推荐你阅读<a class="ae ky" href="https://medium.com/better-programming/the-evolution-of-view-linking-in-android-d6219678740d" rel="noopener">这篇文章</a>。</p><p id="76f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">ViewBinding</code> <strong class="lb iu"> </strong>背后的思想是为每一个布局创建一个绑定类，保存布局中视图的引用。这减少了组件(对话框和适配器)中的样板代码，我们可以通过创建该类的实例来访问视图。如果您是查看绑定的新手，请阅读下面的文章，了解如何添加该库并在高级Android组件(如活动和片段)中使用它。</p><div class="nr ns gp gr nt nu"><a href="https://medium.com/better-programming/everything-you-should-know-about-viewbinding-in-android-52552af9e8ba" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">关于Android中的ViewBinding你应该知道的一切</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">没有findViewById了，该升级了。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b9cd" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">在对话框中查看绑定</h1><p id="abb5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">一旦我们在gradle文件中启用了视图绑定，就会为项目中的每个布局创建一个绑定类。我们可以在任何Android组件中使用这个类来扩展布局。例如，让我们为一个对话框创建一个示例布局:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="dab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用视图绑定的好处之一是，我们不需要像使用数据绑定时那样在XML文件中包含任何额外的布局。返回到对话框视图绑定，一旦创建了布局，就会生成该布局的新绑定类。在这种情况下，生成的文件是<code class="fe lv lw lx ly b">DialogAlertCommonBinding</code>类。</p><p id="00ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是将生成的文件链接到Android组件。在这种情况下，那就是<code class="fe lv lw lx ly b">Dialog</code>。这里，我们需要使用<code class="fe lv lw lx ly b">LayoutInflater</code>来扩展<code class="fe lv lw lx ly b">DialogAlertCommonBinding</code>根视图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="faca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这么简单！不再有<code class="fe lv lw lx ly b">findViewById</code>、视图转换、空指针异常或数据绑定“未知引用”问题。对话框不是主要的Android组件，比如<code class="fe lv lw lx ly b">Activities</code>和片段，尽管视图绑定工作得完美而快速。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="de1c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">查看适配器中的绑定</h1><p id="61a7" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">正如我所说的，不管布局类型是什么(也就是说，即使布局被用在主要的Android组件中，如<code class="fe lv lw lx ly b">Activity</code>或对话框等组件中)，一个单独的绑定类将会自动生成。适配器也是如此。让我们创建一个示例布局:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="6621" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">recyclerview</code>适配器中，我们需要在<code class="fe lv lw lx ly b">createViewHolder</code>函数中展开视图，并在<code class="fe lv lw lx ly b">bindViewHolder</code>函数中使用绑定实例。让我们从膨胀布局开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="026b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们需要在<code class="fe lv lw lx ly b">AppsListItemViewHolder</code>内部使用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="1678" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们需要用适配器位置项从<code class="fe lv lw lx ly b">onBindViewHolder</code>调用<code class="fe lv lw lx ly b">bind</code>函数。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4589" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="aa8d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">视图绑定的唯一目的是取代<code class="fe lv lw lx ly b">findViewById</code>并提供一个类型安全和空安全的最小框架。与黄油刀和数据绑定等许多其他库不同，视图绑定提供了一个强大的轻量级解决方案。</p><p id="26ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在本文中看到的，即使在核心的内部组件如对话框和适配器上也很容易应用。我更喜欢使用视图绑定来提高效率，并创建一个长期受支持的安全代码库。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="760d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">奖金</h1><p id="ff83" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">要了解有关Android高级开发的更多信息，请阅读以下文章:</p><ul class=""><li id="2cb9" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><a class="ae ky" href="https://sgkantamani.medium.com/data-binding-in-android-4ff7bba93a2c" rel="noopener">“Android中的数据绑定”</a></li><li id="978a" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/android-product-flavors-eb526e35f9f1" rel="noopener">“安卓产品口味”</a></li><li id="3e64" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/how-to-create-and-publish-an-android-library-f37bf715932" rel="noopener">“如何创建和发布Android库”</a></li></ul><p id="7076" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>