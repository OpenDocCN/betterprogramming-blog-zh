# 在 SwiftUI 2 中设置变量值的 6 种方法

> 原文：<https://betterprogramming.pub/6-ways-to-set-a-value-for-a-variable-in-swiftui-2-5296f7648d3f>

## 如何在 SwiftUI 2 中设置方法中的值

![](img/195e191602d05d2838a293fb909d3aaf.png)

[Pop &斑马](https://unsplash.com/@popnzebra?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照。

如果你需要向一个外星人解释一个应用程序是什么，你可以简单地说它是一个控制语句的集合，它改变了变量中的一组值。当然，事情远不止如此。还是有？在最底层的编码(也称为汇编程序)，它只是:一个控制语句体管理一个变量块。

随着编程语言几十年来的发展，我们已经有了一个字典，用不同的方法来组织我们的代码，包括控件、构造和元数据。编码中的构造，如包、类、结构、函数、方法和变量的元数据，如类型、范围和访问权限。

让我们使用 Swift 中的经典“Hello world”应用程序来完成一些示例。我们有什么选择？

# 选项 1

这里的变量是字符串`Hello World`。当然，它还不是一个变量。但我们可以做到这一点，并在这个过程中变得有条理。在 SwiftUI 中，您可以设置到变量的绑定，然后在调用包含链接的结构时将其命名为参数。

选项 1

这是可行的，但是扩展性不好。试着给你的代码添加一打参数，它会很快变得不可读。

# 选项 2

我如何用更多的值做到这一点，并保持它的可读性？一个可能的解决方案是将我们的字符串转换成一个结构。

选项 2

这很好，因为对方法的调用仍然简短易读。

# 选项 3

另一种选择是使用 Combine 框架。看起来像这样。我们仍然有一个参数，但是我们把它从调用中分离出来，使代码更易读。

选项 3

当然，虽然我们回到这里设置一个单独的字符串，但是没有什么可以阻止它成为一个结构。它会以同样的方式工作。你只需要多个发布者或者发布者本身是一个结构。该解决方案如下所示:

```
struct message {
  var code: Int
  var message: String
}var setGreet = PassthroughSubject<message,Never>()
```

# 选项 4

你可以通过像`@appdefaults`这样的外部来源阅读你的问候，现在在 SwiftUI 2.0 中它被称为。或者你甚至可以使用 iCloud，尽管你需要考虑到它会更慢的事实。在我们的情况下，它不会工作得很好。

选项 4

这看起来简单，好，干净。但是等等，这不是全局变量(编码的大坏狼)吗？小心使用。

# **选项 5**

你可以用一个被观察的物体。这是一个不断被监控的状态变量，可以保存在一个 singleton 中。这是一个很好的解决方案，因为它看起来确实是自文档化的。同样，没有什么可以阻止你向这个结构中添加更多的变量。

选项 5

# 选项 6

最后，SwiftUI 2.0 的新功能是使用`onChange` viewModifier。现在，我知道我们又用一个参数兜了一圈，但是这个解决方案的美妙之处在于，所有的文本都包含在视图中，并通过代码引用。

选项 6

我可以想象一个场景，代码属于应用程序中的错误，调用这个方法将它们转换成更有意义的消息。

当然，您可以将其中一些组合成一个混合解决方案(比如选项 5 和选项 6)。我没有这样做——我会把它作为家庭作业。这就把我带到了文章的结尾。希望你觉得有用。

保持冷静，继续编码。