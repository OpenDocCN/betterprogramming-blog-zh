<html>
<head>
<title>Python Animations With Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Matplotlib的Python动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/python-animations-with-matplotlib-e8e8037f4df7?source=collection_archive---------5-----------------------#2021-06-15">https://betterprogramming.pub/python-animations-with-matplotlib-e8e8037f4df7?source=collection_archive---------5-----------------------#2021-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8add" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过了解如何制作图形动画，充分利用您的模拟。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/378dfcfb0a0a2fe042ad160deb97d5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*00vG0SYqtWBoK9AH4wIXSw.gif"/></div></div></figure><p id="a9c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Python中，绘制图形很简单——可以使用像<a class="ae lq" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>这样强大的库。但是当你运行模拟时，基本的绘图可能并不总是足够的。您可能希望展示一个动画来帮助您理解状态如何随时间变化。</p><p id="953b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">幸运的是，创建动画就像用Matplotlib创建情节一样简单。</p><p id="c111" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本指南中，您将学习:</p><ul class=""><li id="2375" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">如何创建一个基本的Matplotlib绘图？</li><li id="6d94" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">如何使用Matplotlib创建一个基本的动画情节？</li><li id="a645" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">如何创建一个实时更新的股价图？</li></ul><h1 id="6af6" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">Matplotlib</h1><p id="8201" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated"><a class="ae lq" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>是Python中常用的可视化库。您可以绘制交互式图表、直方图、条形图等。</p><h2 id="d596" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">如何安装Matplotlib</h2><p id="5372" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">安装Matplotlib很简单。只需打开您的终端并运行:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="4aa4" class="nc mg it np b gy nt nu l nv nw">pip install matplotlib</span></pre><h2 id="ed71" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">Numpy</h2><p id="681b" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">此外，如果您没有<a class="ae lq" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> numpy </a>，请安装它，以便您可以遵循本指南中的示例:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="c2a4" class="nc mg it np b gy nt nu l nv nw">pip install numpy</span></pre><h1 id="ab67" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">如何用Matplotlib绘图</h1><p id="c330" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">尽管本教程是关于Matplotlib中的动画，但首先让我们创建一个简单的正弦波静态图:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="ed6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/a6c1a52ce71309bc6bbcee32eed45fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzoaF04kF4Iw2JOPhXSlxA.png"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">基本正弦波</p></figure><h1 id="7222" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">如何用Matplotlib制作动画</h1><p id="b853" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">要用Matplotlib创建动画，你需要使用Matplotlib的<code class="fe oe of og np b">animation</code>框架的<code class="fe oe of og np b">FuncAnimation</code>类。</p><p id="9001" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，让我们创建一个正弦波动画:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="c469" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/378dfcfb0a0a2fe042ad160deb97d5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*00vG0SYqtWBoK9AH4wIXSw.gif"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">使用Matplotlib的动画正弦波</p></figure><p id="b8c3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后让我们更详细地浏览一下上面的代码，以便更好地理解动画是如何与Matplotlib一起工作的。</p><h2 id="53a3" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">第1–3行</h2><p id="c773" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">您可以在这里添加所需的库。尤其是可以用来为你制作动画的<code class="fe oe of og np b">FuncAnimation</code>类。</p><h2 id="d7be" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">第5–7行</h2><p id="2dfc" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">在这里，首先为动画人物创建一个空窗口。然后创建一个空的<code class="fe oe of og np b">line</code>对象。这个<code class="fe oe of og np b">line</code>后来被修改成动画。</p><h2 id="9f7c" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">第9–11行</h2><p id="d4f7" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">这里您创建了一个<code class="fe oe of og np b">init()</code>函数来设置动画的初始状态。</p><h2 id="ddde" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">第13–17行</h2><p id="2b55" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">然后创建一个<code class="fe oe of og np b">animate()</code>函数。这就是产生正弦波的函数。它将帧数<code class="fe oe of og np b">i</code>作为其参数，然后创建一个根据帧数偏移的正弦波(帧数越大，波偏移越多)。最后，它返回更新后的<code class="fe oe of og np b">line</code>对象。现在<code class="fe oe of og np b">animation</code>框架根据<code class="fe oe of og np b">line</code>的变化更新图表。</p><h2 id="d47f" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">第19行</h2><p id="4311" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">这一行代码将所有这些放在一起，并创建实际的动画对象。简单来说:</p><ul class=""><li id="92a7" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">从<code class="fe oe of og np b">init()</code>定义的初始状态开始，通过重复调用<code class="fe oe of og np b">animate()</code>函数，将动画渲染到人物<code class="fe oe of og np b">fig</code></li><li id="6497" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">渲染到“一轮动画”的帧数为<code class="fe oe of og np b">200</code>。</li><li id="380c" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">两帧之间的延迟是<code class="fe oe of og np b">20</code>毫秒(<code class="fe oe of og np b">1000ms / 20ms = 50 FPS</code>)。</li><li id="334f" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">(<code class="fe oe of og np b">blit=True</code>确保只绘制图形的变化部分，以提高效率)</li></ul><h2 id="1d22" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">第22行</h2><p id="6293" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">你猜对了——这一行显示的是动画。</p><h1 id="31b6" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">如何将Matplotlib动画导出到视频文件</h1><p id="e25d" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">在前面的例子中，您看到了一个很好的正弦波动画。但是如果你想导出并保存这个动画呢？当然，你可以截图，但是当你想导出更多的动画时，这不是很有效。</p><p id="75fe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要将Matplotlib动画保存到视频文件，只需使用动画的<code class="fe oe of og np b">save()</code>方法。</p><p id="9192" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要将余弦波动画导出为<code class="fe oe of og np b">Animation.mp4</code>，只需注释掉前面示例代码中的第20行:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f7de" class="nc mg it np b gy nt nu l nv nw"># cosine_animation.save("Animation.mp4")</span></pre><p id="6862" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，根据动画大小，可能需要一段时间才能成功导出动画。在导出完成之前，您不会看到Matplotlib动画，所以不要混淆。</p><p id="c6e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">恭喜你！现在你知道如何使用Matplotlib创建一个基本的动画。您还知道如何将动画导出为视频文件。</p><p id="dd8a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们来看看Matplotlib中动画的一个有用的应用。</p><h1 id="6dd9" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">使用Matplotlib更新实时数据图</h1><p id="f78a" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">您可以使用Matplotlib中的<code class="fe oe of og np b">animation</code>框架创建图表的实时更新。</p><p id="7589" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，让我们创建一个实时股票价格更新图。</p><p id="7dcb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为此，您需要创建一个文本文件来更新股票价格。将其命名为<code class="fe oe of og np b">stock_price.txt</code>,放在Python文件旁边:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/813d475bf3af7f08a1a98400a3c7ab3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbC7qUfdwjpmPumOIwffPQ.png"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">股票价格和动画文件需要在同一个文件夹中。</p></figure><p id="a174" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们来看看代码。简而言之，它定期读取包含股票价格和“时间戳”的文本文件当添加一个新的时间-价格数据点时，图表会根据您之前学习的动画逻辑进行更新。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="9b01" class="nc mg it bd mh nd ne dn ml nf ng dp mp ld nh ni mr lh nj nk mt ll nl nm mv nn bi translated">结果</h2><p id="1321" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">运行上述代码的结果是，您可以更新您的<code class="fe oe of og np b">stock_price.txt</code>文件，并看到价格实时更新到图表中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/b59d6b5d43025436abf1be1ad4b26b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pvxpbAzaN3UOi7OL6R_7oQ.gif"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">股价图会随着价格的变化而更新</p></figure><h1 id="d550" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">结论</h1><p id="4fa3" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">Matplotlib是Python常用的可视化库。除了静态图之外，您还可以用它创建简单的动画，例如制作正弦波动画或创建实时股价图。</p><p id="36d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读。我希望你今天学到了新东西。编码快乐！</p><h1 id="7f9e" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">你可能也喜欢</h1><div class="oj ok gp gr ol om"><a rel="noopener  ugc nofollow" target="_blank" href="/10-useful-python-snippets-to-code-like-a-pro-e3d9a34e6145"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">10个有用的Python片段，让你像专业人士一样编写代码</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">我每天使用的有用的提示和技巧</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">better编程. pub</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>