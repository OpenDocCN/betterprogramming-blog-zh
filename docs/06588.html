<html>
<head>
<title>How to Automate XCTests With GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用GitHub动作自动化XCTests</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-automate-xctests-with-github-actions-6570fcd21519?source=collection_archive---------8-----------------------#2020-10-15">https://betterprogramming.pub/how-to-automate-xctests-with-github-actions-6570fcd21519?source=collection_archive---------8-----------------------#2020-10-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7356" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过CI/CD自动化优化您的时间，专注于重要的事情</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5f85ab0b38b491bc5198d4028606b79c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a4E1CE4bppKuwJTq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@julielaiymani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">朱莉·莱马尼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="8abd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自从2018年GitHub推出GitHub Actions以来，开发者现在有了一个强大的工具，可以为CI/CD创建复杂的管道，而无需依赖第三方软件。</p><p id="e628" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你和一个由多人组成的团队一起工作过，你就会知道很多事情可能会出错。许多代码可能会因为一个错误的推送/合并的提交或者一个不太注意其他人代码的用户提交而中断。</p><p id="5d56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">克服这一点的最明显的方法是创建一个可靠的测试套件，它会随着时间的推移而增加，并告诉您是否有问题需要修复，或者您的代码是否与以前的代码非常匹配。</p><p id="cc84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试可以有很大的变化，随着项目的增长，测试套件也会变化。有UI和单元测试，每一项都需要在不同的设备上用不同的场景进行测试。谁愿意等15分钟来完成你的测试呢？GitHub Actions是来拯救我们的，并且会完成这项工作。</p><p id="b9d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从现在开始，我将使用我的测试应用程序test app中的一些测试。</p><p id="f78c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先创建一个. yml文件，它将包含我们的XCTest工作流。我将它命名为<code class="fe lv lw lx ly b">xctest-workflow.yml</code>，它需要放在<code class="fe lv lw lx ly b">.github/workflows</code>文件夹中，以便GitHub识别并执行它。</p><p id="dccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是工作流程的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="3449" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">工作流定义</h1><p id="5201" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">在第1-8行，我们给工作流本身起了一个名字，并指示它应该在每次有到主分支的push或者在主分支上发出pull请求时运行。你可以添加更多的分支或定制你想要它运行的时间。</p><p id="5b91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看<a class="ae ky" href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#on" rel="noopener ugc nofollow" target="_blank"> GH行动文件</a>中的所有可能事件。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="6cee" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">工作流作业</h1><p id="3dec" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">在第9-41行，我们定义了你的工作流程。在这个代码片段中，我保持内容简单，但是您可以定义更多的作业来运行第1-5行指定的事件。在<a class="ae ky" href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobs" rel="noopener ugc nofollow" target="_blank"> GH行动文档</a>中了解更多相关信息。</p><p id="3ee2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，我调用作业<code class="fe lv lw lx ly b">build</code>并指示它应该在macOS操作系统上运行。紧接着，我定义了五个不同的步骤，将在五个不同的iOS设备上测试我的代码。</p><p id="2287" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的核心命令是:</p><pre class="kj kk kl km gt nf ly ng nh aw ni bi"><span id="f913" class="nj mj it ly b gy nk nl l nm nn">xcodebuild test -workspace TestApp.xcodeproj/project.xcworkspace -scheme TestApp -destination 'platform=iOS Simulator, name=iPad Air (3rd generation),OS=13.7'</span></pre><p id="b41b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个命令将在iPad Air模拟器上测试我的测试套件中包含的所有代码。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="86cb" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">推了就忘了</h1><p id="f3f4" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">现在，如果您已经正确地复制了所有步骤，那么当您将请求内容推/拉到您的主分支时，您应该会在Actions面板中看到一些内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/67f242396532328ef289f67d805c8c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rm0DkyON3dOROrRRjlypkg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">成功运行GitHub操作</p></figure><p id="ac76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果跑步成功，您应该会在所有步骤旁边看到一个勾号。真正有用的是，如果您的运行失败，GitHub Actions会立即通过电子邮件通知您作业失败。因此，如果你在下班前将数据推送到一个远程服务器，而在上下班途中没有收到电子邮件，你会知道一切都很好。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="9804" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">结论</h1><p id="d554" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">在这篇文章中，我只是触及了GitHub动作的皮毛。我肯定会在将来讨论更高级的东西，但是现在，我希望您已经喜欢了对CI自动化的介绍。</p></div></div>    
</body>
</html>