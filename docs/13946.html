<html>
<head>
<title>Build an Autocomplete Search Component in React and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React和TypeScript中构建自动完成搜索组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/autocomplete-search-component-with-react-and-typescript-94fa0e21fa04?source=collection_archive---------1-----------------------#2022-10-18">https://betterprogramming.pub/autocomplete-search-component-with-react-and-typescript-94fa0e21fa04?source=collection_archive---------1-----------------------#2022-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="108a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何显示来自API Rest的数据建议</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0772e409faf6b58b1c2fa80fb4f9eefe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bxmbAp8Sq4nD-kw1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@laughayette?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马腾纽霍尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="f8c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如今，网站中使用最广泛的组件之一是带有自动完成或建议功能的搜索引擎。</p><p id="6977" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它通常是用户交互的第一个组件，因为执行搜索并直接找到我们需要的东西更实际。这些组件在电子商务等网站中对于良好的用户体验是必不可少的。</p><p id="e831" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将构建一个简单的搜索组件，在没有第三方库的情况下，为用户提供关于他们正在键入的内容的建议。</p><h1 id="bd81" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是自动完成搜索？</h1><p id="f83f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><em class="ms"> Autocomplete是一种用于显示查询建议的模式。</em></p><p id="19fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自动完成搜索，也称为“预测搜索”或“自动建议”，是用户在输入字段中键入的组件，它将建议如何完成搜索的各种预测或可能的结果。</p><p id="0d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Autocomplete与搜索引擎一起工作，当用户执行搜索时，搜索引擎学习并改进建议的结果。</p><p id="8111" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们不会看到更多关于搜索引擎的内容，因为这超出了本教程的范围。如果你想进一步了解这个话题，可以看看这个<a class="ae ky" href="https://www.addsearch.com/blog/autocomplete-search/" rel="noopener ugc nofollow" target="_blank">站点</a>。事不宜迟，让我们开始编程吧。</p><h1 id="b70d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">设置自动完成搜索</h1><p id="bc0a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们用下面的命令创建带有<a class="ae ky" href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project" rel="noopener ugc nofollow" target="_blank"> vite </a>的应用程序:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="a221" class="my lw it mu b gy mz na l nb nc">yarn create vite autocomplete-search --template react-ts</span></pre><p id="3ff7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们安装项目中需要的依赖项:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1308" class="my lw it mu b gy mz na l nb nc">yarn add @nextui-org/react</span></pre><p id="9c27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我将只使用第三方库的样式，您可以随意使用:</p><ul class=""><li id="5574" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">一个Javascript/CSS框架</li></ul><p id="6170" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们为项目创建以下文件夹结构:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="d37e" class="my lw it mu b gy mz na l nb nc">src/<br/>├── components/<br/>│   └── ui/<br/>│       ├── Autocomplete.tsx<br/>│       ├── Autocomplete.tsx<br/>│       ├── index.ts<br/>│       └── ui.module.css<br/>├── hooks/<br/>│   └── useAutocomplete.ts<br/>├── ts/<br/>│   └──interfaces/<br/>│      └── Country.interface.ts<br/>├── App.tsx<br/>└── main.tsx</span></pre><h1 id="e9f6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">成分</h1><p id="972f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><code class="fe nm nn no mu b">AutocompleteWrapper.tsx</code>该组件仅用作<code class="fe nm nn no mu b">Autocomplete.tsx</code>的容器或包装器，是我们请求所需数据的地方。</p><p id="82d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在教程中使用了<a class="ae ky" href="https://restcountries.com/" rel="noopener ugc nofollow" target="_blank"> restcountries </a> API，并且只使用说英语的国家，因此查询如下:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="729e" class="my lw it mu b gy mz na l nb nc"><a class="ae ky" href="https://restcountries.com/v3.1/lang/eng" rel="noopener ugc nofollow" target="_blank">https://restcountries.com/v3.1/lang/eng</a></span></pre><p id="bbc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">Autocomplete.tsx</code>这是主要组成部分，它有两个部分。第一部分是输入元素，第二部分是建议列表。</p><p id="c2de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，使用一个<code class="fe nm nn no mu b">&lt;ul&gt;</code>或<code class="fe nm nn no mu b">&lt;ol&gt;</code>元素，但是在本教程中，我们将在下一个UI卡组件中使用Rows组件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Autocomplete.tsx</p></figure><p id="bd97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们创建我们需要的类型。API返回大量我们不会使用的数据，因此简化信息和类型如下所示:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1361" class="my lw it mu b gy mz na l nb nc">export type Country = {<br/>  name: Name<br/>  flags: Flags<br/>}</span><span id="bf0f" class="my lw it mu b gy nr na l nb nc">type Name = {<br/>  common: string<br/>}</span><span id="aa1f" class="my lw it mu b gy nr na l nb nc">type Flags = {<br/>  png: string<br/>  svg: string<br/>}</span></pre><p id="7e89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们将创建以下状态:</p><p id="5b65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">searchedValue</code> —这里，我们将存储用户正在键入的文本。</p><p id="b2ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">suggestions</code>—在这里，我们将存储与用户所写内容相匹配的建议。</p><p id="53a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">selectedSuggestion</code> —这里，我们将存储用户选择的选项。</p><p id="f916" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">activeSuggestion</code> —在这里，我们将存储所示建议的索引。我们将使用它来了解键盘选择了哪个建议。</p><p id="e945" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们需要创建对输入元素和结果列表的事件做出反应的函数。</p><p id="1c9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">handleChange()</code>每次用户在input元素中输入内容时，都会执行这个函数。我们将验证输入的内容是否不是空值。否则，我们将把状态设置为初始值。</p><p id="e12d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果input元素中接收的值不为空，将执行该函数并显示与输入值匹配的建议。</p><p id="926b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">handleClick()</code>该功能将在用户选择建议时执行；我们保存选定的值，并将剩余的状态设置为初始值。</p><p id="3a28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nm nn no mu b">handleKeyDown()</code>该功能将在检测到键盘上的事件时执行，因此您可以浏览建议并选择一个。</p><p id="6924" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们添加一个<code class="fe nm nn no mu b">useEffect</code>来关注安装组件时的输入元素。</p><p id="073d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已！我们已经有了一个可以在任何项目中使用的自动完成搜索，通过传递输入引用和数据来过滤。</p><p id="b0d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个额外的步骤和良好的实践，我们将把功能带到一个定制的钩子上，我们的组件将会更干净，可读性更好。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">useAutocomplete.ts</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Autocomplete.tsx</p></figure><p id="2705" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该应用程序如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/71a4167bc19b868afb52a84ba652545d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Na4QO1y_iTPtIyMWguX3JQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动完成搜索</p></figure><p id="8150" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://autocomplete-search-react-ts.vercel.app/" rel="noopener ugc nofollow" target="_blank">看这里的演示</a>。</p><h1 id="902a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">被卖方收回的汽车</h1><div class="nt nu gp gr nv nw"><a href="https://github.com/ljaviertovar/autocomplete-search-react-ts" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">GitHub—ljaviertovar/autocomplete-search-react-ts:一个自动完成搜索组件</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><h1 id="4854" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="6436" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们已经创建了一个简单的搜索组件，对收到的数据进行过滤。根据具体情况，搜索可能会变得越来越复杂。在捕获选定的值之后，您可以添加更多的功能，比如显示所选国家的详细信息。</p><p id="4a69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇教程对你有用，并且你在开发这个应用程序的过程中学到了新的东西。</p><h2 id="9e02" class="my lw it bd lx ol om dn mb on oo dp mf li op oq mh lm or os mj lq ot ou ml ov bi translated">阅读更多</h2><div class="nt nu gp gr nv nw"><a rel="noopener  ugc nofollow" target="_blank" href="/developing-reusable-and-customizable-modals-with-react-and-typescript-9f6217c76f07"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">用React和TypeScript开发可重用和可定制的模型</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">如何使用React门户和样式化组件创建完整的模型</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">better编程. pub</p></div></div><div class="of l"><div class="ow l oh oi oj of ok ks nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://javascript.plainenglish.io/why-should-you-use-cleanup-functions-in-reacts-useeffect-hook-bdff48bd9b3" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">为什么要在React的useEffect钩子中使用清理函数？</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">React的useEffect钩子中的清理函数——用例子解释。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="of l"><div class="ox l oh oi oj of ok ks nw"/></div></div></a></div><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="692b" class="my lw it mu b gy mz na l nb nc"><strong class="mu iu">Want to Connect?</strong></span><span id="4096" class="my lw it mu b gy nr na l nb nc">Love connecting with friends all around the world on <a class="ae ky" href="https://twitter.com/ljaviertovar" rel="noopener ugc nofollow" target="_blank">Twitter</a>.</span></pre></div></div>    
</body>
</html>