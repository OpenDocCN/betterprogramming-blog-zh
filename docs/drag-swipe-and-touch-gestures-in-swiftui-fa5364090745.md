# SwiftUI 中的拖动、滑动和触摸手势

> 原文：<https://betterprogramming.pub/drag-swipe-and-touch-gestures-in-swiftui-fa5364090745>

## 看看 SwiftUI 2.0 中的一些新手势

![](img/f5e4f761eddef0e0d49b94e163677d28.png)

图片来源:作者

在我写这篇文章的时候，我担心你在 SwiftUI2.0 中的手势方面有点受限。目前，只有五个。`tapGesture`、`longPressGesture`、`theRotateGesture`、`theMagnifyGesture`、`DragGesture`。本文的重点基本上是最后一个，我认为这是最灵活的。有了它，你不仅可以拖动，还可以滑动，在某种程度上，甚至可以触摸。请和我一起探讨如何“挖掘”这些可能性。

# 简单拖动手势

为了编码，让我们从这两个片段开始我们的旅程。他们都做同样的事情。也就是说，它们允许您拖动标记了拖动手势的项目，然后在您放开时立即将其返回到原始位置。但有一个重要的区别:第一个是通过在拖动项目时实时更新偏移量变量来实现的，然后重置它；第二个是通过专用的`@State`变量更新拖动项本身的状态，这个变量会重置自身。

这一个，使用@ `GestureState` 变量，你可以看到它稍微短了一点。

# 简单的触摸手势

让我们看第二个例子。这次我使用拖动手势的位置来控制图像的颜色。如果我向左移动，它会变成红色，如果我向右移动，它会变成蓝色。

拖动手势实际上很像`touch`。在这个例子中，通过将动作绑定到状态变量和位置，您可以看到，您不必使用拖动手势来拖动东西。您可以使用它来启动其他操作。

# 滑动手势

其他动作，比如构建一个滑动手势，我在这里作为`view modifier`来做是有用的，因为你很可能想要重用这些代码。

但是等等——这里发生了很多事情。让我解释一下代码。顶部是使用修改器的视图。在其中，我通过修改器正在更新的单例来访问滑动方向。

在修改器内部，我创建了一个`enum`来命名方向，并使用`onChanges`和`Update`方法来记录你在屏幕上拖动光标/手指的时间。它会找出这两次回调之间的差异，并给出滑动的方向。因为当我运行代码时，我将得到对`onChange`和`Update`的许多更新，所以这两个方法用方向更新一个数组。然后，我将向用户报告数组和摘要。

注意:如果你斜着移动，你会得到两个更新:例如，同时向左和向上。理论上，你可以在这里设计一个更强大的刷卡功能，不仅可以记录左、右、上、下，还可以记录对角线方向。

对角线划水我会留做作业练习。你不需要做太多；你只需要延长`enum`并想出你将如何呈现那些双重动作。

注意:如果你设法用一个完美的动作对角移动，你根本不会得到一个结果。

## 报告其“和其他人”存在的拖动手势

邦。“好吧，这很好，”我听到你说，“但是我真正想做的是当我拖动一个项目到另一个项目时的一个动作。我该怎么做？”与本文标题中的示例一样，编写以下代码:

这段代码显示了两个心形，当你将一个拖动到另一个上时，它会在控制台上进行报告。

但是等等，这里有几个重要的点。首先，正如你可能已经注意到的，它使用了`geometry` 容器，这是一个讨厌的家伙，苹果似乎已经在上面配置了默认设置，特别是为了迷惑我们。以下是一些使用指南:

*   总是给你的`geometry` 容器一个框架。如果做不到这一点，它会打乱你所有其他的观点。
*   将容器放在你想要检查坐标的视图中，它将只返回容器中的值，无论如何，放在更高的层次是没有意义的。
*   请注意，我要求`dragGesture` 返回全局坐标，这个坐标空间就是我用`onAppear`启动应用程序时为`CGRectangle`保存的坐标空间。很明显，如果我使用不同的坐标空间，东西会坏掉。奇怪的是，缺省值是局部坐标范围，在我看来这种缺省值毫无意义。
*   也请注意，我正看着你在`heartA`或`heartB`上的手指进入另一个所画矩形的点。我不是在看矩形是否接触。

所有这些都让我想到这篇短文的结尾。我希望你发现阅读它是有用的，并且像我写它一样喜欢这样做。

[](https://medium.com/codestory/correcting-paths-on-custom-gestures-with-swiftui2-0-7113019684f0) [## 使用 SwiftUI2.0 纠正自定义手势的路径

### 寻找不同的方法来改善绘画

medium.com](https://medium.com/codestory/correcting-paths-on-custom-gestures-with-swiftui2-0-7113019684f0) 

保持冷静，继续编码。