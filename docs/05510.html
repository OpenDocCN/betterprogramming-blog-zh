<html>
<head>
<title>An Introduction to Map in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的地图介绍</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-introduction-to-map-in-swiftui-ec3a310fcbbd?source=collection_archive---------12-----------------------#2020-07-14">https://betterprogramming.pub/an-introduction-to-map-in-swiftui-ec3a310fcbbd?source=collection_archive---------12-----------------------#2020-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="38e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">苹果终于给了我们一个简单的方法在我们的应用程序中显示地图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d58c8b5c21935f59cf62dae7d565e059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MhYBKRnt3wv7plxb"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@tabeadamm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Tabea Damm </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="d7f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">苹果改进了iOS上的<code class="fe lv lw lx ly b">Map</code>体验，提供了对位置隐私的更多控制。考虑到这一点，当我得知苹果推出了<code class="fe lv lw lx ly b">Map</code>时，我真的很惊讶。我很确定他们已经发布了它，但是一查，它实际上是<code class="fe lv lw lx ly b">MapView</code>。</p><p id="5c4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我对比了一下<code class="fe lv lw lx ly b">Map</code>和<code class="fe lv lw lx ly b">MapView</code>，发现<code class="fe lv lw lx ly b">MapView</code>其实是为了UIKit，而<code class="fe lv lw lx ly b">Map</code>是为了SwiftUI。</p><p id="f76d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，如果您使用<code class="fe lv lw lx ly b">Map</code>，您将支持的操作系统是iOS 14+。对于<code class="fe lv lw lx ly b">MapView</code>来说是iOS 3+。</p><blockquote class="lz"><p id="d6c4" class="ma mb it bd mc md me mf mg mh mi lu dk translated"><em class="mj">“显示嵌入式地图界面的视图。”——</em><a class="ae ky" href="https://developer.apple.com/documentation/mapkit/map?language=_1" rel="noopener ugc nofollow" target="_blank"><em class="mj">苹果开发者</em> </a></p></blockquote></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="d18f" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">先决条件</h1><p id="e7f1" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">要学习本教程，您需要了解以下方面的一些基本知识:</p><ul class=""><li id="cdd8" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">迅速发生的</li><li id="cbcf" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">至少Xcode 12+</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="29a8" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">地图</h1><p id="7c52" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">让我们深入了解一下<code class="fe lv lw lx ly b">Map</code>的能力。你可以选择一个地点来展示，我正在使用马来西亚的马来西亚国家石油公司双塔——世界上最高的双塔。</p><p id="8225" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过指示一个位置的纬度和经度来开始创建<code class="fe lv lw lx ly b">MKCoordinateRegion</code>。<code class="fe lv lw lx ly b">MKCoordinateSpan</code>被用作地图的缩放级别，较小的值对应较高的缩放级别。</p><pre class="kj kk kl km gt oc ly od oe aw of bi"><span id="4e07" class="og ms it ly b gy oh oi l oj ok">@State private var region = MKCoordinateRegion(center: CLLocationCoordinate2D(latitude: 3.164557, longitude: 101.713423), span: MKCoordinateSpan(latitudeDelta: 0.03, longitudeDelta: 0.03))</span></pre><p id="abfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于创建的区域，您可以将它传递到<code class="fe lv lw lx ly b">Map</code>:</p><pre class="kj kk kl km gt oc ly od oe aw of bi"><span id="d6a2" class="og ms it ly b gy oh oi l oj ok">Map(coordinateRegion: $region)</span></pre><p id="6557" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是你创建地图的方式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/803eed776ee403b342d290f3460dfe8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*jRJZ-SxaGhCG6o76BWykBg.png"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="ed6c" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">当前位置</h1><p id="4b4b" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">现在获取用户的当前位置要容易得多，但是有一些需要注意的事项。</p><p id="c656" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">MapInteractionMode</code>允许用户缩放、平移或缩放和平移。目前，用户只允许缩放，不允许平移。</p><p id="0ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">MapUserTrackingMode</code>允许你通过跟随用户的位置进行更新或者根本不更新。正在使用<code class="fe lv lw lx ly b">@State private var trackingMode = MapUserTrackingMode.follow</code>跟踪用户。</p><pre class="kj kk kl km gt oc ly od oe aw of bi"><span id="cf2c" class="og ms it ly b gy oh oi l oj ok">Map(coordinateRegion: $region, interactionModes: .zoom, showsUserLocation: true, userTrackingMode: $trackingMode)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/d3427dfc4bbc151bfa6cf535733bfadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/1*5Fp-aiajoltJcCChZPxABw.gif"/></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="8a6a" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">地图注释</h1><p id="aec5" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">包含注释也容易多了。我希望苹果公司能尽快提供更多的指导。</p><p id="19e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，你可以创建一个这样的模型。这些是注释的坐标:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="4129" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您只需要获得注释:</p><pre class="kj kk kl km gt oc ly od oe aw of bi"><span id="c1a8" class="og ms it ly b gy oh oi l oj ok">@State private var locations: [Location] = Location.getLocation()</span></pre><p id="4a47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">插入注释，获得每个注释的坐标，它们将出现在地图上:</p><pre class="kj kk kl km gt oc ly od oe aw of bi"><span id="b436" class="og ms it ly b gy oh oi l oj ok">Map(coordinateRegion: $region, interactionModes: .all, showsUserLocation: true, userTrackingMode: $trackingMode, annotationItems: locations) { (location) -&gt; MapPin in<br/>    MapPin(coordinate: location.coordinate, tint: .black)<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/8a604d583cafa19734d24ea4e373c333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4B-gemXkzcbfJ_3BzdPEA.png"/></div></div></figure></div></div>    
</body>
</html>