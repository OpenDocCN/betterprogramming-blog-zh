<html>
<head>
<title>How To Draw Beautifully Animated Graphs in SwiftUI — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中绘制精美的动画图形—第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-draw-beautifully-animated-graphs-in-swiftui-part-1-8688c38a2db0?source=collection_archive---------15-----------------------#2019-11-06">https://betterprogramming.pub/how-to-draw-beautifully-animated-graphs-in-swiftui-part-1-8688c38a2db0?source=collection_archive---------15-----------------------#2019-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dd11" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">首先，创建主界面</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ca56290da0dcd68fba62878b36c34929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3RGAJmUIINNHCzkmg2Qow.png"/></div></div></figure><p id="ff3c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是一系列三个片段中的第一个，它将教你在<a class="ae lq" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank"> SwiftUI </a>中创建这个美丽的动画图形所需知道的一切。</p><p id="452e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在第一部分要做的是:</p><ul class=""><li id="5d11" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">创建标题为<code class="fe ma mb mc md b">Picker</code>的主界面；</li><li id="e7e4" class="lr ls it kw b kx me la mf ld mg lh mh ll mi lp lw lx ly lz bi translated">创建一个单条形图，组成我们的图表；</li><li id="5f93" class="lr ls it kw b kx me la mf ld mg lh mh ll mi lp lw lx ly lz bi translated">创建要显示的初始数据集。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8d04" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">入门指南</h1><p id="8382" class="pw-post-body-paragraph ku kv it kw b kx ni ju kz la nj jx lc ld nk lf lg lh nl lj lk ll nm ln lo lp im bi translated">首先，为iOS创建一个新的<a class="ae lq" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank"> Xcode </a>项目。您将立即看到一个自动生成的<code class="fe ma mb mc md b">ContentView</code>，显示超著名的“<code class="fe ma mb mc md b">Hello World</code>”</p><p id="9bb5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，让我们创建我们的图表将代表的数据集。我们将使用一个简单的字典，根据分段的<code class="fe ma mb mc md b">Picker</code>中包含的单词进行索引。在<code class="fe ma mb mc md b">ContentView</code>结构中，声明这些变量:</p><pre class="kj kk kl km gt nn md no np aw nq bi"><span id="cd2a" class="nr mr it md b gy ns nt l nu nv">private var data: [String: [Int]] = [<br/>     "Data1": [28, 25, 30, 29, 23],<br/>     "Data2": [3, 1, 2, 4, 3],<br/>     "Data3": [2, 6, 8, 3, 4]<br/>]</span></pre><p id="1fa7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如你所见，我使用的是<code class="fe ma mb mc md b">Int</code> s，但你也可以使用任何你喜欢的其他类型，如<code class="fe ma mb mc md b">Double</code>或<code class="fe ma mb mc md b">Float</code>。</p><p id="2230" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，我们需要声明一个<code class="fe ma mb mc md b">@State</code>变量，每当您选择不同的选项时，该变量将由选取器自己进行更改。</p><pre class="kj kk kl km gt nn md no np aw nq bi"><span id="5f1b" class="nr mr it md b gy ns nt l nu nv">@State private var dataPicker: String = "Data1"</span></pre><p id="fe5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们可以开始构建我们的主UI。我们需要一个简单的标题和一个<code class="fe ma mb mc md b">Picker</code>，垂直堆叠。</p><pre class="kj kk kl km gt nn md no np aw nq bi"><span id="5825" class="nr mr it md b gy ns nt l nu nv">VStack {</span><span id="e074" class="nr mr it md b gy nw nt l nu nv">    Text("Let's Graph!")<br/>        .foregroundColor(.white)<br/>        .font(.largeTitle)<br/>        .fontWeight(.bold)<br/>        .padding()</span><span id="cea5" class="nr mr it md b gy nw nt l nu nv">    Picker("", selection: $dataPicker) {<br/>        Text("Data1").tag("Data1")<br/>        Text("Data2").tag("Data2")<br/>        Text("Data3").tag("Data3")<br/>    }.pickerStyle(SegmentedPickerStyle())<br/>    .padding()</span><span id="7232" class="nr mr it md b gy nw nt l nu nv">}</span></pre><p id="460d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面的代码将以大而粗的白色字符显示我们的标题，并在其周围创建一些填充。</p><p id="aeb7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">拾取器代码将显示一个<code class="fe ma mb mc md b">SegmentedPicker</code>，带有三个标记为<code class="fe ma mb mc md b">“Data1”</code>、<code class="fe ma mb mc md b">“Data2”</code>和<code class="fe ma mb mc md b">“Data3”</code>的选项。每当你点击一个时，<code class="fe ma mb mc md b">$dataPicker</code>变量将被改变为相应的<code class="fe ma mb mc md b">tag</code>值。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="378b" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">创建图表</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/59ab7122b8a358edcad34e8877cf4f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*JRPAN0RRnZA5HFlQyLkFbQ.png"/></div></figure><p id="ecec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在准备创建一个单独的条形图来组成我们的大图！</p><p id="1799" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用SwiftUI Capsule视图创建此栏。特别是，我们希望显示分配给条形的值、条形本身及其标签。</p><p id="a1a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们需要一个<code class="fe ma mb mc md b">VStack</code>来显示值，一个<code class="fe ma mb mc md b">ZStack</code>来叠加背景<code class="fe ma mb mc md b">Capsule</code>和值<code class="fe ma mb mc md b">Capsule</code>。</p><p id="56bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们创建一个新结构来创建这个新组件:</p><pre class="kj kk kl km gt nn md no np aw nq bi"><span id="e1fe" class="nr mr it md b gy ns nt l nu nv">struct CapsuleBar: View {<br/>    var value: Int<br/>    var maxValue: Int<br/>    var width: CGFloat<br/>    var valueName: String<br/>    var capsuleColor: ColorRGB</span><span id="6eb9" class="nr mr it md b gy nw nt l nu nv">    var body: some View {<br/>        VStack {<br/>            <br/>            Text("\(value)")<br/>            ZStack(alignment: .bottom) {<br/>                Capsule()<br/>                    .fill(Color.gray)<br/>                    .opacity(0.1)<br/>                    .frame(width: width, height: 400)</span><span id="6828" class="nr mr it md b gy nw nt l nu nv">                Capsule()<br/>                    .fill(<br/>                        Color(.sRGB, red: capsuleColor.red, green: capsuleColor.green, blue: capsuleColor.blue)<br/>                    )<br/>                    .frame(width: width, height: CGFloat(value) / CGFloat(maxValue) * 400)<br/>                    .animation(.easeOut(duration: 0.5))<br/>            }<br/>            <br/>            Text("\(valueName)")</span><span id="632e" class="nr mr it md b gy nw nt l nu nv">        }<br/>    }<br/>}</span></pre><p id="49ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里使用了五个变量:</p><ul class=""><li id="5df6" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><code class="fe ma mb mc md b">value</code>:条绘制的实际值</li><li id="0190" class="lr ls it kw b kx me la mf ld mg lh mh ll mi lp lw lx ly lz bi translated"><code class="fe ma mb mc md b">maxValue</code>:要显示的数据数组中的最大值(注意:为了在数组中提供完全不同的值，<code class="fe ma mb mc md b">maxValue</code>必须始终为≤ <code class="fe ma mb mc md b">value</code>)</li><li id="172e" class="lr ls it kw b kx me la mf ld mg lh mh ll mi lp lw lx ly lz bi translated"><code class="fe ma mb mc md b">width</code>:T4的边框宽度</li><li id="87ea" class="lr ls it kw b kx me la mf ld mg lh mh ll mi lp lw lx ly lz bi translated"><code class="fe ma mb mc md b">valueName</code>:在<code class="fe ma mb mc md b">Capsule</code>下面的标签里会写什么</li><li id="38d9" class="lr ls it kw b kx me la mf ld mg lh mh ll mi lp lw lx ly lz bi translated"><code class="fe ma mb mc md b">capsuleColor</code>:控制<code class="fe ma mb mc md b">Capsule</code>的颜色</li></ul><p id="5da7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我已经应用到<code class="fe ma mb mc md b">Capsule</code>的动画修改器将会在它改变值的时候激活这个条。</p><p id="b4df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe ma mb mc md b">ColorRGB</code>结构看起来像这样</p><pre class="kj kk kl km gt nn md no np aw nq bi"><span id="b390" class="nr mr it md b gy ns nt l nu nv">struct ColorRGB {<br/>    var red: Double<br/>    var green: Double<br/>    var blue: Double<br/>}</span></pre><p id="c650" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要预览这个新的<code class="fe ma mb mc md b">CapsuleBar</code>，我们唯一需要做的就是在<code class="fe ma mb mc md b">ContentView_Previews</code> <strong class="kw iu"> </strong>结构中编写这段代码:</p><pre class="kj kk kl km gt nn md no np aw nq bi"><span id="f4d9" class="nr mr it md b gy ns nt l nu nv">CapsuleBar(value: 20, maxValue: 50, width: 50, valueName: "Val Text", capsuleColor: ColorRGB(red: 44 / 255, green: 54 / 255, blue: 79 / 255))</span></pre><p id="3ff9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你现在应该看到<code class="fe ma mb mc md b">CapsuleBar</code>了！干得好。</p><p id="3807" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Part2中看到你创造了<code class="fe ma mb mc md b">CapsuleGraphView</code>！</p></div></div>    
</body>
</html>