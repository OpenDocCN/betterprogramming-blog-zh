<html>
<head>
<title>An In-Depth Guide for Create React App 5 (CRA 5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建React应用程序5 (CRA版本5)的深入指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2?source=collection_archive---------1-----------------------#2022-01-03">https://betterprogramming.pub/an-in-depth-guide-for-create-react-app-5-cra-5-b94b03c233f2?source=collection_archive---------1-----------------------#2022-01-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d00d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">CRA 5的新功能和新套件的详细信息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6f1c8d2e3ae8dd432724b37089a5b7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BdbcHcb-S69vtTrJ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@unknown_salad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">星号KWON </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="50ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener">创建React应用</a> (CRA)是搭建React项目的快捷方式。它可以通过命令<code class="fe lv lw lx ly b">npx create-react-app &lt;project name&gt;</code>轻松生成。使用一个命令，我们就有了React项目的最新包和执行环境。方便有效。</p><p id="4c3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5于2021年12月14日发布。它具有以下新功能和新软件包:</p><ul class=""><li id="b00e" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">停止对节点10和12的支持。</li><li id="04dc" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">快速刷新改进。</li><li id="1e51" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">改进的软件包管理器检测。</li><li id="6f80" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">取消固定所有依赖关系，以便更好地与其他工具兼容。</li><li id="d659" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">开始顺风支持。</li><li id="51da" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">升级到Webpack 5、Jest 27、ESLint 8和PostCSS 8。</li></ul><p id="4179" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们过一遍这些细节。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f6a4" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">安装新创建的React应用程序</h1><p id="9396" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">create-react-app</code>是一个创建新React项目的全局命令行实用程序。创建的项目有最新版本的<code class="fe lv lw lx ly b">react-scripts</code>，目前是5.0.0。CRA 5不再支持节点10和12，它需要节点14或更高版本。如果节点版本不符合要求，<code class="fe lv lw lx ly b">create-react-app</code>将失败。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="c09c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将节点版本设置为17 (14或更高版本)后，安装工作正常。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h1 id="6190" class="mu mv it bd mw mx nt mz na nb nu nd ne jz nv ka ng kc nw kd ni kf nx kg nk nl bi translated">升级现有Create React应用程序</h1><p id="0f9d" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">react-scripts</code>包括脚本和配置。更新Create React App项目是通过将<code class="fe lv lw lx ly b">react-scripts</code>升级到特定版本来实现的。<a class="ae ky" href="https://create-react-app.dev/docs/updating-to-new-releases/" rel="noopener ugc nofollow" target="_blank">官方文档</a>建议运行以下命令升级到最新版本:</p><pre class="kj kk kl km gt ny ly nz oa aw ob bi"><span id="3127" class="oc mv it ly b gy od oe l of og">npm install --save react-scripts@latest</span></pre><p id="e103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过运行这个命令，我们将<code class="fe lv lw lx ly b">react-scripts</code>从版本<code class="fe lv lw lx ly b">4.0.3</code>平稳地升级到版本<code class="fe lv lw lx ly b">5.0.0</code>。</p><p id="c91b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是<code class="fe lv lw lx ly b">package.json</code>文件的区别:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/0f252f586e000bbb41e19090a989aab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EncdlsB1yV4Y8iDHT1oITA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="19d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经升级了<code class="fe lv lw lx ly b">react-scripts</code>的版本。以下是CRA 4 <code class="fe lv lw lx ly b">package.json</code>和CRA 5 <code class="fe lv lw lx ly b">package.json</code>的区别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/89097cb8ac84c517cd92da583da406de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4tCAEZNe7flnIvuqNE9hQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="70c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">差异看起来很小。我们可以手动更新<code class="fe lv lw lx ly b">testing-library</code>和<code class="fe lv lw lx ly b">web-vitals</code>的版本，以匹配CRA 5中的版本。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f6ad" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">升级TypeScript版本</h1><p id="3c63" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">如果使用TypeScript，可以通过运行以下命令来创建新项目:</p><pre class="kj kk kl km gt ny ly nz oa aw ob bi"><span id="82fb" class="oc mv it ly b gy od oe l of og">npx create-react-app --template typescript &lt;project name&gt;</span></pre><p id="aa6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是JavaScript CRA <code class="fe lv lw lx ly b">package.json</code>的区别。还有打字稿CRA <code class="fe lv lw lx ly b">package.json</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/30b1b493febaf44e338733c742a6c316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5N_Sd9dQYvLSH5OqqGXSTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="7800" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从CRA 4到CRA 5，TypeScript已经从4.1版更新到4.5版。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="c172" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">快速刷新改进</h1><p id="8051" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">对于热模块更换(HMR)运行时，快速刷新已通过如下所述的紧急情况行为得到改进:</p><ul class=""><li id="627d" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">如果未启用快速刷新，则退出到强制重新加载。</li><li id="e9cd" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">如果启用了快速刷新并且有更新的模块，请依靠快速刷新来恢复错误并跳过强制重新加载。</li><li id="0889" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">如果启用快速刷新，则没有更新的模块，热更新的状态为<code class="fe lv lw lx ly b">abort</code>或<code class="fe lv lw lx ly b">failed</code>，退出强制重新加载。</li></ul></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="5c25" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">改进的软件包管理器检测</h1><p id="0f00" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在CRA 4中，<code class="fe lv lw lx ly b">npx create-react-app my-app</code>会使用yarn来安装依赖项，如果有yarn安装的话。否则，可以设置一个标志来使用npm:</p><pre class="kj kk kl km gt ny ly nz oa aw ob bi"><span id="6783" class="oc mv it ly b gy od oe l of og">npx create-react-app my-app --use-npm</span></pre><p id="ef9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种行为在CRA 5中被改变了。如果环境变量<code class="fe lv lw lx ly b">npm_config_user_agent</code>设置为<code class="fe lv lw lx ly b">'yarn'</code>，它将使用yarn作为包管理器:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="e0d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，这取决于调用命令的方式:</p><pre class="kj kk kl km gt ny ly nz oa aw ob bi"><span id="79b7" class="oc mv it ly b gy od oe l of og">yarn create react-app my-app // use yarn</span><span id="7020" class="oc mv it ly b gy oj oe l of og">npm init react-app my-app // use npm</span><span id="2b27" class="oc mv it ly b gy oj oe l of og">npx create-react-app my-app // use npm</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="1b8a" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">取消固定的相关性</h1><p id="5e51" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在CRA 5中，这里是<code class="fe lv lw lx ly b">react-scripts</code>中已安装的<code class="fe lv lw lx ly b">package-lock.json</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="467a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看上面的代码。你发现了什么？</p><p id="cef4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有版本都使用<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-upgrade-dependencies-in-package-json-e5546804187f">插入符号依赖关系</a>，即这些包将使用最高的次要版本。</p><p id="773f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相比之下，CRA 4的<code class="fe lv lw lx ly b">react-scripts</code>中的许多包都是精确的版本。</p><p id="d4f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5解钉<code class="fe lv lw lx ly b">babel-loader</code>，这已导致问题时，使用CRA与故事书。此外，CRA 5取消了所有的依赖关系，以便更好地与其他工具兼容。</p><p id="077b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你还发现了什么？</p><ul class=""><li id="693e" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">tailwindcss</code> ( <code class="fe lv lw lx ly b">^3.0.2</code>)新增。</li><li id="4d68" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">这些包被更新:<code class="fe lv lw lx ly b">webpack</code>:(<code class="fe lv lw lx ly b">^5.64.4</code>)<code class="fe lv lw lx ly b">jest</code>:(<code class="fe lv lw lx ly b">^27.4.3</code>)<code class="fe lv lw lx ly b">eslint</code>:(<code class="fe lv lw lx ly b">^8.3.0</code>)<code class="fe lv lw lx ly b">postcss</code>:(<code class="fe lv lw lx ly b">^8.4.4</code>)。</li></ul></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="6962" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">顺风支架</h1><p id="35d8" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Tailwind是一个CSS框架，打包了像<code class="fe lv lw lx ly b">flex</code>、<code class="fe lv lw lx ly b">text-5xl</code>、<code class="fe lv lw lx ly b">font-bold</code>、<code class="fe lv lw lx ly b">text-green-500</code>等类。可以直接在标记中组合这些类来构建任何设计。</p><p id="467d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Tailwind扫描HTML文件、JavaScript组件和其他一些模板中的类名。它生成相应的样式，然后将它们写入静态CSS文件。Tailwind快速、灵活、可靠，并且零运行时间<strong class="lb iu">。</strong></p><p id="f085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5号增加了顺风支持。</p><p id="3f77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常情况下，<a class="ae ky" href="https://tailwindcss.com/docs/installation" rel="noopener ugc nofollow" target="_blank">设置和使用顺风</a>需要5个步骤。借助预配置的CRA 5，只需3个步骤:</p><p id="d3b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第一步:配置模板路径。</strong></p><p id="6156" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在根目录下创建配置文件<code class="fe lv lw lx ly b">tailwind.config.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8ac3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第二步:将顺风指令添加到CSS文件中。</strong></p><p id="8de9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是<code class="fe lv lw lx ly b">src/index.css</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6763" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第三步:在React组件中使用顺风。</strong></p><p id="2328" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个<code class="fe lv lw lx ly b">src/App.js</code>的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="f1a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">text-5xl</code>设置<code class="fe lv lw lx ly b">font-size: 3rem</code>和<code class="fe lv lw lx ly b">line-height: 1</code>。</p><p id="b8b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">font-bold</code>设置<code class="fe lv lw lx ly b">font-weight: 700</code>。</p><p id="613c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">text-green-500</code>设置<code class="fe lv lw lx ly b">color: rgb(34 197 94)</code>。</p><p id="0eef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行代码<code class="fe lv lw lx ly b">npm start</code>，我们看到文本应用了顺风样式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/e06aa96b624ededa4ccf37d95f2e7582.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*DxOOw9W4eUL53Ss6sUzOCw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="210f" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">网络包5</h1><p id="4134" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Webpack是一个模块捆绑器。它的主要目的是捆绑JavaScript文件以在浏览器中使用，但它也能够转换、捆绑或打包任何资源或资产。捆绑模块可以是<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-are-cjs-amd-umd-esm-system-and-iife-3633a112db62"> CMJ、AMD、UMD、ESM等</a>。</p><p id="5cbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/micro-frontends-using-webpack-5-module-federation-3b97ffb22a0d"> Webpack 5于2020年10月10日</a>发布，主要特点如下:</p><ul class=""><li id="dfe3" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">通过持久缓存提高构建性能。</li><li id="80e0" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">通过更好的算法和默认值改进了长期缓存。</li><li id="a8bd" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">通过更好的树抖动和代码生成改进了包的大小。</li><li id="383e" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">引入了<a class="ae ky" href="https://webpack.js.org/concepts/module-federation/" rel="noopener ugc nofollow" target="_blank">模块联合</a>，它允许多个Webpack构建一起工作。</li></ul><p id="e949" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5与Webpack 5打包在一起。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8a7d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">笑话27</h1><p id="79f2" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Jest 是一个JavaScript测试框架，专注于创建、运行和构建测试。Jest是最受欢迎的测试运行程序之一，它与使用Babel、TypeScript、Node、React、Angular、Vue等的项目一起工作。</p><p id="07f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jest 27于2021年5月25日发布，主要功能如下:</p><ul class=""><li id="a8b9" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">对于观察模式下的快照测试，我们可以输入<code class="fe lv lw lx ly b">u</code>来更新失败的快照。现在交互模式也可以应用于一次一个地通过失败的测试。我们可以键入<code class="fe lv lw lx ly b">s</code>跳过失败的测试，键入<code class="fe lv lw lx ly b">q</code>退出交互模式，或者按<code class="fe lv lw lx ly b">Enter</code>返回观看模式。</li><li id="33db" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">与Jest 26相比，每个测试文件的初始化速度提高了70%。</li><li id="00d7" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">支持写在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6"> ESM </a>中的用户配置，所有可插拔模块都能够加载ESM。</li><li id="134c" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">启用符号链接到测试目录的测试文件，这是<a class="ae ky" href="https://enlear.academy/how-to-set-up-bazel-for-a-react-app-c8a6ae6131d5" rel="noopener ugc nofollow" target="_blank"> Bazel </a>想要的特性。</li><li id="d4aa" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">使<code class="fe lv lw lx ly b">transform</code>能够异步，这是<a class="ae ky" href="https://esbuild.github.io/" rel="noopener ugc nofollow" target="_blank"> esbuild </a>、<a class="ae ky" href="https://www.snowpack.dev/" rel="noopener ugc nofollow" target="_blank"> Snowpack </a>和<a class="ae ky" href="https://vitejs.dev/" rel="noopener ugc nofollow" target="_blank"> Vite </a>想要的特性。</li><li id="5c3f" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">将默认测试运行器从<code class="fe lv lw lx ly b">jest-jasmine2</code>更改为<code class="fe lv lw lx ly b">jest-circus</code>，将默认测试环境从<code class="fe lv lw lx ly b">'jsdom'</code>更改为<code class="fe lv lw lx ly b">'node'</code>。</li><li id="9c60" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">Jest 26中假计时器的新实现成为默认。</li><li id="32d8" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">同一个<code class="fe lv lw lx ly b">done</code>测试回调不能调用多次，调用<code class="fe lv lw lx ly b">done</code>和返回承诺不能合并。</li><li id="78ca" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">一个<code class="fe lv lw lx ly b">describe</code>块不能返回任何东西。</li></ul><p id="a45a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5是用Jest 27包装的。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="b393" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">ESLint 8</h1><p id="a0a3" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">ESLint是一个识别和报告JavaScript / TypeScript代码中模式的工具。它执行传统的林挺来寻找有问题的模式，它还执行样式检查来执行约定。ESLint 8于2021年10月9日发布，主要特性如下:</p><ul class=""><li id="eadc" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">停止对节点10、13和15的支持。</li><li id="ff5f" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">移除了代码帧和表格格式化程序。如果需要，需要安装独立的<code class="fe lv lw lx ly b">eslint-formatter-codeframe</code>或<code class="fe lv lw lx ly b">eslint-formatter-table</code>软件包。</li><li id="117c" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">comma-dangle</code>规则模式变得更加严格。</li><li id="0cf0" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">未使用的禁用指令现在可以用<code class="fe lv lw lx ly b">--fix</code>修复。</li><li id="947a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">eslint:recommended</code>预置中启用了4条新规则:<code class="fe lv lw lx ly b">no-loss-of-precision</code>、<code class="fe lv lw lx ly b">no-nonoctal-decimal-escape</code>、<code class="fe lv lw lx ly b">no-unsafe-optional-chaining,</code>和<code class="fe lv lw lx ly b">no-useless-backreference</code>。</li><li id="1b4d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">CLIEngine</code>类已被<code class="fe lv lw lx ly b">ESLint</code>类取代。</li><li id="3a8a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">已弃用的<code class="fe lv lw lx ly b">linter</code>对象已被移除。</li><li id="0a6f" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">/lib</code>入口点已被移除。</li></ul><p id="e0ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5与ESLint 8打包在一起。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8d3d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">后CSS 8</h1><p id="7b47" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">PostCSS是一个用JS插件转换样式的工具。这些插件可以lint一个CSS文件，支持变量和混合，transpile未来的CSS语法，内联图像等。例如，<code class="fe lv lw lx ly b"><a class="ae ky" href="https://github.com/postcss/autoprefixer" rel="noopener ugc nofollow" target="_blank">autoprefixer</a></code>是一个流行的插件，它根据当前浏览器的流行程度和属性支持来应用css前缀。</p><p id="5067" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PostCSS 8于2020年9月15日发布，主要特点如下:</p><ul class=""><li id="09ff" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">它有一个新的插件API，允许所有插件共享CSS树的单一扫描。它使CSS处理速度提高了20%。它减小了<code class="fe lv lw lx ly b">node_modules</code>的大小，支持更好的源码图，改进了CSS解析器。</li><li id="6a1d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">停止对节点6、8、11和13的支持。</li><li id="9723" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">它为npm包中的ES6+源代码提供服务，不需要Babel编译。</li><li id="3385" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">移除了很少使用的<code class="fe lv lw lx ly b">postcss.vendor</code> API。</li></ul><p id="48b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CRA 5与PostCSS 8打包在一起。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="11cb" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">结论</h1><p id="245b" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">CRA 5已经到来，具有新的功能和新的软件包。新创建的项目将使用CRA 5。如果你有一个现有的CRA 4项目，按照上述说明进行升级。</p><p id="0d51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有一个现有的CRA 3项目，按照本文<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/upgrade-create-react-app-based-projects-to-version-4-cra-4-d7962aee11a6">先升级到CRA 4。</a></p><p id="d0b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以看看<a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒体文章</a>。</p></div></div>    
</body>
</html>