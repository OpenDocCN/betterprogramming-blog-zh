<html>
<head>
<title>Xamarin Forms Is Dying — And MAUI May Not Be Future</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Xamarin Forms正在消亡——毛伊岛可能不是未来</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/xamarin-forms-is-dying-and-maui-may-not-be-future-f0395575ac5d?source=collection_archive---------0-----------------------#2021-09-20">https://betterprogramming.pub/xamarin-forms-is-dying-and-maui-may-not-be-future-f0395575ac5d?source=collection_archive---------0-----------------------#2021-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d17a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">多平台应用开发体验的下一件大事是什么？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0fac151ae60170ede78d4dcbdf345b2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uBYw5a68eUjYFZ2j"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="bad4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想告诉你一个惊人的命题。想象一下，你懂两种语言。一种是基于标准的标记语言，比如HTML，让你描述你的应用应该是什么样子。第二种是一种功能丰富的编程语言，被全世界数百万开发人员使用和喜爱。如果你把这两件事结合起来，你怎么可能弄错呢？不幸的是，这正是Xamarin Forms设法做到的。</p><p id="2f70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且，像大多数被普遍接受的事物一样，它是<a class="ae ky" href="https://github.com/xamarin/Xamarin.Forms/wiki/Feature-Roadmap" rel="noopener ugc nofollow" target="_blank">即将消失的</a>。我的意思是，即使是微软，<em class="lv">字面意思是拥有Xamarin的人，</em>在他们的任何大型产品中使用它，比如Teams，Outlook，还有很多。相反，他们寻求自然发展或电子。所以我们可以在里面打个蝴蝶结，为另一个跨平台软件开发框架寿终正寝默哀一分钟。</p><p id="0848" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，这种沉默将被一个事实打破，即Xamarin Forms并没有完全被搁置，而是形成了所谓的多平台应用程序UI (MAUI)的基础。它应该和……同时着陆。NET 6.0登陆，但后来被推出<a class="ae ky" href="https://devblogs.microsoft.com/dotnet/update-on-dotnet-maui/" rel="noopener ugc nofollow" target="_blank"> Q2 2022 </a>。当这种情况发生时，毛伊岛将取代Xamarin Forms成为微软在移动领域的产品。很自然地，你可能会认为更多的移动框架使得开发更容易，而且只会是一件好事，对吗？</p><p id="de77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不太确定。你看，大约两年前，我离开了Xamarin Forms，我可以自信地说这是我在编程生涯中做出的最好的决定。Xamarin Forms是一个非常令人沮丧的框架，现在MAUI正在它的基础上构建。这有点像把旋转餐厅栓在比萨斜塔的一侧。类比是显而易见的，但如果从一开始基础就乏善可陈，餐厅就注定要失败。</p><p id="411f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会使用并喜欢Xamarin表单，如果你这样做了，那就太好了。我不是来改变你的想法的。但是我花了大约一年半的时间开发我用Xamarin格式写的应用程序，最后，我把它们都扔掉，用不同的语言重写。几个月来，我坚持下来了，但我在核心框架、插件、总体外观和感觉以及整体质量方面有太多问题，我认为为iOS和Android编写两个独立的应用程序会花费<em class="lv">更少的</em>精力。</p><p id="1010" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为MAUI是在Xamarin表单上发展的，所以这是一个很好的时机来回顾我这些年来在这个框架上经历了哪些棘手的问题。</p><h1 id="d452" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">开发者的经历是痛苦的</h1><p id="5bad" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们大多数开发人员在制作应用程序时，大部分时间都盯着的不是应用程序本身，而是我们编写应用程序的IDE。我的情况就是Visual Studio 2019。每当我试图在Visual Studio 2019中使用Xamarin Forms应用程序时，都是一种糟糕的体验。</p><p id="d22c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很奇怪，因为Visual Studio本身就是一个完美的IDE。当我将它用于我的其他应用程序时，它运行得相当好。然而，由于某种原因，每当我使用Xamarin Forms应用程序时，Visual Studio就会变慢。崩溃也并不罕见，或者奇怪的警告框中只有HRESULT，或者短语“灾难性失败”。这并没有激发信心。</p><p id="4f48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与Android开发相关的其他领域缺乏润色，并且经常无法正常工作。例如，Visual Studio提供的Android模拟器在我使用的整个过程中都有问题。这是我现在的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/c3ff53fb9a3856203c745658570f65df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tdkUr-nMqVSJJGjIsOd2A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Android模拟器</p></figure><p id="b427" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为Android Studio而存在的所有仿真器都处于“错误”状态，这是错误的，因为它们在Android Studio之外工作得很好。当前正在运行的一个模拟器(突出显示的像素2)不尊重我点击“停止”当我试图停止它时，它抛出这个错误。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/2d6698a28431220a5668d001a5db327e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnBx9H_Qu5uZC7b7alGttA.png"/></div></div></figure><p id="66fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还是那句话，这是在我现在刚设置的一个全新的模拟器里，马上开箱，Visual Studio里的Android设备管理器就管不了了。我发现这类问题是Visual Studio整体支持Xamarin表单开发的方式所特有的。有趣的是，在Android Studio中创建的模拟器工作得很好，运行起来没有问题。然而，Visual Studio生成的每个模拟器图像都与Android Studio不兼容。</p><p id="93e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只是一个简单的缺陷Visual Studio模拟器管理器应该能够运行和管理用Android Studio创建的模拟器。毕竟，它们都运行了QEMU，并且使用了相同的模拟器。另一个波兰的问题是，处于“错误”状态的模拟器不会告诉你为什么会这样，或者你可以做什么来“修复”它们。这些问题在Xamarin集成到Visual Studio的过程中普遍存在。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/f7e23ee39dc67c2372f1bb9c463c1b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E0O7PaGP5ZsOkV4o"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">约翰·施诺布里奇在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="df8d" class="mw lx it bd ly mx my dn mc mz na dp mg li nb nc mi lm nd ne mk lq nf ng mm nh bi translated">跨平台开发做错了</h2><p id="fbc6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">你有苹果电脑和个人电脑吗？如果是这样的话，你会陷入一种特殊的痛苦之中。在Windows上，你将使用Visual Studio 2019，它主要是功能性的，当你切换到Mac时，你将无法控制地哭泣，而使用Visual Studio for Mac，那里没有任何意义，地板就是天花板。</p><p id="36f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，Visual Studio for Mac不好。它一直都是这样，令人沮丧的是，无论微软投入多少时间，它一直都是这样。我敢肯定，这些年来许多开发人员在IDE上投入了大量的时间，放下它让我感觉很不好，但每次我使用它都是一次糟糕的体验。我只能用感觉“不精确”来描述VS for Mac的体验——事情不会按照你期望的方式工作，它与Visual Studio for Windows完全不同。</p><p id="b89a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，微软没有义务创建一个跨平台看起来一样的Visual Studio版本。Visual Studio代码看起来与Visual Studio 2019有很大不同，这没关系。一个是文本编辑器，另一个是针对大量工作负载的强大开发工具。这有点道理——为Windows开发人员提供复杂的IDE，为跨平台的其他人提供简化的文本编辑器。</p><p id="19c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有意义的是，Visual Studio for Mac和它的Windows对应物同名，但它做不到Visual Studio 2019能做的一半。因为它与Visual Studio 2019 for Windows同名，所以它毫无意义地、令人困惑地割裂了这一领域的开发者体验。一切看起来和感觉都不一样，热键不一样，程序输出窗口完全不一样，使用起来很痛苦。它不仅仅是一个文本编辑器，因为VS代码占据了市场的那个角落。不，如果你有一台mac，这是你应该使用的IDE。</p><p id="6db3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了演示我的意思，这是Visual Studio 2019在Windows上的样子，带有一个新的控制台应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/1a0aea076ddba284ae821049906bf73d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5zylkpvGgsixkYb5VDUtog.png"/></div></div></figure><p id="e2eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是它在macOS上的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/a4b88d0d5c09ca245e23cc42714553ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdBSq4aywthd6rG0EyZ0gg.png"/></div></div></figure><p id="53b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，这两款产品都有相同的名称，“Visual Studio 2019”。然而，在Windows和Mac上，它们看起来<em class="lv">完全不同</em>。在你的PC和Mac上切换开发是非常累人的，因为你必须记住两套热键，两套所有东西的位置，以及实际使用IDE的两种方式。我知道Visual Studio 2019 for Windows是为Windows开发的，而VS for Mac是基于MonoDevelop，所以他们的起步非常不同。但那是几年前的事了，Mac版本仍然没有达到功能对等的希望。</p><p id="c7f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些和Xamarin表单或毛伊岛有什么关系？嗯，当毛伊岛登陆时，如果你在PC和Mac上开发，你仍然要在这两个独立的产品之间切割，因为它今天令人沮丧，这意味着它将来也会令人沮丧。</p><p id="dcf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会认为“基于这个前提进行比较是不公平的——不同平台的产品看起来会有所不同。”这是可以理解的，但如果你曾经使用过Android Studio，你会注意到它根本没有这个问题。在Windows，Mac，<em class="lv">和</em> Linux之间看起来是一样的。Google没有在每个平台上分离出一个独立的IDE，而是简单地将他们的IDE基于(并授权)IntelliJ IDEA，这已经是一个跨平台的IDE，然后将他们的东西放在上面。</p><p id="6ea4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是一个跨平台运行完全相同的IDE，这让许多开发人员非常高兴。这正是跨平台开发应该做的——平台之间的一切看起来和感觉起来都应该是一样的。</p><p id="419b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会想，甚至有跨平台的吗？NET IDE可用于Windows、Mac和Linux吗？<a class="ae ky" href="https://www.jetbrains.com/rider/" rel="noopener ugc nofollow" target="_blank">有。</a>太棒了。所有平台看起来都一样。我不知道这些东西是如何工作的，但肯定的是，如果谷歌可以为其跨平台开发解决方案授权Android Studio，他们就可以为其跨平台提供一个微软许可证附件。NET开发？当然，这比雇佣一整队开发人员来维护Visual Studio for Mac的成本要低。</p><h2 id="fe78" class="mw lx it bd ly mx my dn mc mz na dp mg li nb nc mi lm nd ne mk lq nf ng mm nh bi translated">当你做的一切看起来很无聊</h2><p id="55b9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Xamarin Forms的视觉层围绕着一个被称为XAML的概念，因此，在Xamarin Forms中创建任何应用程序都需要学习XAML。这很公平——例如，你必须学习HTML来制作网站，你必须学习如何使用Dart来制作Flutter应用程序。</p><p id="4ff3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，作为开发人员，我们希望我们所学的东西有不止一种用途。唯一使用XAML的是Xamarin表单、Windows演示框架(WPF)和“原生”Windows 10应用，就像Windows商店里的那些。</p><p id="5198" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能必须有一个非常具体的用例来创建一个WPF应用程序。我不是说你不需要，也许你想创建一个高性能的应用程序，也可以在旧的Windows操作系统上工作。同样，如果你有非常具体的使用案例，或者可能正在为XBOX或其他设备创建应用程序，你可能只会编写原生Windows 10应用程序？我觉得这有点罕见。</p><p id="4dc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以你最终学习XAML只有一个原因，用Xamarin的形式创建应用程序。这本身没有什么错，除了所有东西的默认样式看起来非常非常乏味。如果你查看<a class="ae ky" href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/samples/" rel="noopener ugc nofollow" target="_blank"> Xamarin表单样本页面</a>，你会发现这些例子看起来相当单调。</p><p id="e204" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多灰色，没有真正使用阴影或深度给应用程序。比方说，与Flutter 可用的<a class="ae ky" href="https://flutter.github.io/samples/#" rel="noopener ugc nofollow" target="_blank">样本相比(这些样本大量使用了颜色、阴影和其他有品位的设计元素)，它确实显示了Xamarin Forms应用程序看起来有多过时。</a></p><p id="90f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原因很简单，因为Xamarin Forms将您编写的XAML映射到特定于平台的实现，所以XAML中的<code class="fe nk nl nm nn b">Label</code>控件映射到目标平台的适当控件。对于像将文本放入框中这样的简单事情，这些控件按照您期望的方式工作，但是当您想要更高级的东西(如渐变、动画、边框半径等)时，您正在Xamarin Forms所能提供的东西之外进行操作。</p><p id="d971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在Xamarin表单上追求某种外观，您需要为您的目标平台编写一个“自定义呈现器”。忽略在跨平台应用程序中编写特定于平台的代码这一事实，首先就违背了使用跨平台解决方案的目的，必须编写这些呈现器确实是一件痛苦的事情，而且在C#中只能通过绑定库与较低级别的系统API进行交互这一事实使事情变得更糟。</p><p id="3bdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这听起来可能很奇怪，但让我解释一下。假设您想要调整边框的外观，或者想要赋予应用程序的某个部分某种外观。现在，您必须创建一个特定于平台的自定义渲染器，但不是使用该平台的本地语言(如Swift或Kotlin ),而是使用绑定到特定设备API表面的C#绑定库。</p><p id="afd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为当底层平台在使用Kotlin或Swift时，你在使用C#，感觉你所说的一切都要经过一个翻译器，虽然每个人都可能理解你所说的要点，但更好的细节却丢失了。有时候，你能在网上找到的唯一能让你得到你想要的东西的例子是用这些语言写的，你必须把这些实现从它们的母语重写为C#才能得到你想要的东西。这几乎总是以糟糕的结局告终，因为你试图理解足够的斯威夫特或科特林，以使某些东西看起来是特定的。</p><h2 id="20cf" class="mw lx it bd ly mx my dn mc mz na dp mg li nb nc mi lm nd ne mk lq nf ng mm nh bi translated">XAML和查看模型困境</h2><p id="27bc" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在Xamarin表单中创建应用程序意味着您定义应用程序在XAML的外观，然后创建一个视图模型，其中包含每个视图的业务逻辑。理论上，这听起来不错，但现实是XAML是如此笨拙和冗长，以至于试图用它来实现简单的事情很快变得非常困难。</p><p id="09c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在示例Xamarin表单应用程序中，我们的<code class="fe nk nl nm nn b">AppShell.xaml</code>中有这样的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="b3a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当我们想要对我们的应用程序进行视觉上的改变时，我们必须通过一个很长的“Setters”列表来配置它在上面的代码片段中，我们重复了“Shell”这个词大约一千次，只是为了设置一个特定的属性。当然，这种语法现在应该已经被压缩了，不需要开发人员一遍又一遍地重新输入相同的内容了吧？</p><p id="7edd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还看到对位于app.xaml中的<code class="fe nk nl nm nn b">StaticResource</code>的引用，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="7506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这位XAML不知何故用了近25行来定义一种原色，以及一个按钮在启用或禁用时应该是什么颜色。例如，如果您试图定义一些高级样式，不难看出这会变得多长。</p><p id="d197" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冗长的另一个问题是，当用户点击一个按钮或以某种方式与你的应用程序交互时，你定义应该发生什么。例如，我习惯于通过定义当用户点击一个按钮时应该发生什么来实现这一点。但是在XAML，要你定义一个“命令”行为就太复杂了。以这个按钮为例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c9a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们关心的是对“OpenWebCommand”的“绑定”这是怎么回事？像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="f7fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们为OpenWebCommand定义了一个<code class="fe nk nl nm nn b">ICommand</code>，然后在ViewModel的<em class="lv">构造函数</em>中，我们设置了当我们的按钮被点击时应该发生什么。在这么小的文件中，这不是一个问题，但是在更大的文件中，当用户点击一个按钮时，试图找到实际运行的代码变成了一个漫长的旅程，试图在这些视图模型中导航并迷失方向。对我来说，按钮功能和按钮被按下时运行的逻辑之间的关系并不像它应该的那样清晰。</p><p id="5551" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种设计选择也使得做简单的事情变得非常困难，比如向这些命令传递参数。XAML允许你指定一个<code class="fe nk nl nm nn b">CommandParameter</code>，你应该可以用它来把数据传入你的<code class="fe nk nl nm nn b">ICommand</code>，但是因为你不是直接从你的视图模型中调用函数(相反，你是通过<code class="fe nk nl nm nn b">ICommand</code>抽象出来的)，你失去了类型安全。</p><p id="7a77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您需要向命令传递一个参数时，这变得特别有趣，因为首先需要将参数转换成不同的类型。同样，因为您是通过<code class="fe nk nl nm nn b">ICommand</code>抽象这个功能，所以您不能只是逐字传递您的参数，并在接收函数中对其进行造型或转换。不，你必须写一个<a class="ae ky" href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.xaml.data.binding.converter?view=winrt-20348" rel="noopener ugc nofollow" target="_blank">转换器</a>来指定这些转换应该如何发生。如果这里面有逻辑的话，显然是我理解不了的。</p><h1 id="5e42" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">毛伊岛没有解决这些问题</h1><p id="ce86" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">糟糕的开发者体验，应用程序的外观，XAML是一个痛苦，以及其他这些核心问题不会在毛伊岛得到解决。因此，如果你已经知道Xamarin形式，并且你正在等待毛伊岛登陆，但是你对迄今为止的体验不是100%兴奋，那么这是一个考虑学习其他东西的好机会。</p><p id="3b99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你总是可以在本地创建你的应用，或者如果你仍然有跨平台的需求，你可以看看类似Flutter或者React Native这样的东西。就我而言，我转向了Flutter，从那以后我一直非常喜欢它。它本身并不是没有问题，但以我的经验来看，实际使用起来要愉快得多。</p><p id="c0a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许最大的遗憾是，Xamarin Forms总是拥有伟大想法的<em class="lv">气质</em>。也许如果微软在内部广泛使用的应用程序上使用它，如Teams或Outlook，并经历了随之而来的所有问题和磨难，那么它就会在更早的时候走上正确的道路。</p><p id="dbaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有理由说这不可能发生——Xamarin Forms应用程序实际上会比它们的电子对应物更具性能，因为C#是一种编译语言，而Javascript是一种解释语言。通过为渲染器实现特定于平台的位，或者某些业务逻辑依靠本机代码进行优化，它可能为真正伟大的应用程序铺平了道路。</p><p id="c4a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，Xamarin Forms已经被排除在微软的第一方应用程序之外，像Teams这样的应用程序是用电子方式编写的。如果微软不把它用在他们重要的大型应用程序中，那我为什么要用呢？</p><p id="3c39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我在开始时所说的，如果你真的为毛伊岛感到兴奋，那很好，不要让像这篇文章这样的文章夺走这种兴奋。如果你已经深入Xamarin生态系统，那么你可能已经意识到其中的古怪之处，以及如何解决它们。但是，如果您是跨平台开发的新手，或者您已经厌倦了Xamarin，那么至少要确保您已经很好地了解了现有的替代方案。</p><p id="b843" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我真的希望毛伊岛为一个伟大的多平台应用程序开发体验铺平道路。但是根据Xamarin Forms的过去和现在的情况，很难看出它将如何发生。不过，我希望我是错的。</p></div></div>    
</body>
</html>