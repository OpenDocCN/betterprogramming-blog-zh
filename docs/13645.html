<html>
<head>
<title>How Does Polygon Help Ethereum Scale?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多边形如何帮助以太坊缩放？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-does-polygon-help-ethereum-scale-47b2400d44c?source=collection_archive---------15-----------------------#2022-09-13">https://betterprogramming.pub/how-does-polygon-help-ethereum-scale-47b2400d44c?source=collection_archive---------15-----------------------#2022-09-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fc4e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">深入了解多边形的优势</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1ad8ed1260dd275e629b65b042ec1e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBVuWWZ-SsHV5pRirRRC2A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="04ac" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">介绍</h1><p id="591d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">自2014年成立以来，以太坊已经成为能够支持图灵完全智能合约的区块链平台事实上的领导者。</p><p id="408b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以太坊在带来一场被称为web3的革命中发挥了重要作用。最大的分散式交易所，NFT市场和农业协议位于以太坊。该链负责处理价值数十亿美元的价值，它为创作者和投资者开辟了以前深不可测的途径。</p><p id="4de8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">尽管以太坊dapps在用户中广受欢迎，但它们还远未被广泛采用。使用dapps的总人数仍然只有几百万。其中一个最大的原因是链条固有的伸缩障碍。除了少数高净值用户，它很快就会变得不可用。</p><p id="26a2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">幸运的是，社区已经做出了认真的努力来帮助以太坊扩大规模。当今市场上最受欢迎的扩展解决方案是Polygon POS(Proof of stage)侧链。本文将探讨什么是多边形，以及它如何克服以太坊的缺点。最后，我们将通过创建一个NFT铸币智能合同来并排比较两家连锁店的表现。</p><h1 id="ddcb" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">以太坊的问题是</h1><p id="f16d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">尽管以太坊处于市场领先地位，但它仍面临一系列问题:</p><ol class=""><li id="445d" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">低事务吞吐量:以太坊每秒只能处理15个事务。与Visa或Mastercard等每秒处理超过25，000笔交易的解决方案相比，这一数字微不足道。</li><li id="fee6" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">高汽油费:当一家连锁店可以处理几笔交易时，当交易量大时，它必须增加处理成本。以太坊因高昂的煤气费而臭名昭著。例如，不久前，在一个受欢迎的NFT造币厂(称为Otherside)，它达到了近7000 Gwei。在此期间，即使是最基本的交易，你也要花费超过500美元。</li><li id="3351" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">缓慢的事务终结:以太坊大约每15秒向其链中添加一个块。由于多个采矿者同时竞争开采区块，一个区块不能被认为是最终的，直到至少4-5个区块被添加到它的顶部。从本质上讲，一个交易需要一分钟以上的时间才能被认为是最终的。对于游戏和金融工具这样的应用程序来说，如此缓慢的事务终结是完全不可接受的。</li></ol><h1 id="f7dd" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">解决方案</h1><p id="f4d3" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">为了实现大规模的采用和接受，必须在以太坊的基础上开发一个解决方案来解决它最突出的问题。本质上，我们需要一个具有以下特征的解决方案:</p><ol class=""><li id="5889" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">低成本:即使是计算量最大的交易，成本也不应超过几美分。</li><li id="3b4e" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">快速:交易几乎立即得到确认。</li><li id="c8a9" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">EVM兼容:开发人员不需要学习新的工具或语言来构建解决方案。</li><li id="36ec" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">与以太坊互通:轻松存取以太坊资金及解决方案。</li><li id="384a" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">参与式社区:致力于随着时间的推移改进解决方案并在此基础上构建用户友好的dapps的社区。</li><li id="39b8" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">可持续发展:任何被大众接受的解决方案都必须具有环保意识。</li></ol><p id="0804" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以太坊核心开发人员正在致力于第1层扩展修复，如<a class="ae nc" href="https://ethereum.org/en/upgrades/sharding/" rel="noopener ugc nofollow" target="_blank">分片</a>，但这些解决方案还远未完成。我们需要任何人今天就能轻松开始的解决方案。</p><h1 id="aa64" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">引入多边形</h1><p id="5d2f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Polygon的创建者设计了一个包含上述所有特性的链。自2017年问世以来，多边形链已经成为最受欢迎的以太坊缩放解决方案之一。</p><p id="e9d7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">从技术上讲，Polygon是一个以太坊侧链。侧链是一个独立的区块链，通过桥连接到以太坊。与L2不同，侧链不继承以太坊主链的安全特性。相反，它们实现自己的一致协议并阻止参数。因此，侧链不需要向以太坊发送状态变化和事务数据(而L2则需要)。</p><p id="73c2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">侧链与以太坊的更大独立性使得Polygon更加集中，并使其能够实现非常高的吞吐量。</p><p id="79e4" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以下是Polygon在以太坊上实现的改进:</p><ol class=""><li id="6389" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">高事务处理速度:Polygon每秒可以处理高达65，000个事务，与其集中式竞争对手的规模相当。</li><li id="a0cd" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">低交易成本:即使是Polygon上最繁重的交易也只需要几分钱。在大多数情况下，与以太坊相比，成本可以降低10，000倍。</li><li id="3618" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">即时交易终结:Polygon的共识协议保证交易几乎即时(不到两秒钟)得到确认。</li><li id="0157" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">EVM兼容:多边形是建立在相同的软件以太坊。因此，以太坊开发者可以使用相同的工具在Polygon上构建。</li><li id="a954" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">强大的社区:Polygon团队已经花费了数百万美元来建立一个由建筑商、投资者和用户组成的强大社区。它已经是以太坊上一些最受欢迎的dapps的所在地，有更好的UX和更便宜的成本。</li><li id="4971" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">低能耗:Polygon使用利益验证协议，比它的PoW对手少消耗99.9%的能量。事实上，Polygon已经承诺到2022年底成为<a class="ae nc" href="https://polygon.technology/sustainability/" rel="noopener ugc nofollow" target="_blank">碳负</a>，使其成为当今市场上最大的环保区块链之一。</li></ol><h1 id="23f9" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">关于多边形PoS安全性的一个注记</h1><p id="79af" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">与其他侧链不同，Polygon PoS确实有一种方法可以继承以太坊的安全性。Polygon PoS链利用<a class="ae nc" href="https://docs.polygon.technology/docs/develop/ethereum-polygon/plasma/getting-started/" rel="noopener ugc nofollow" target="_blank">等离子桥</a>来维持和保证高水平的安全性。Plasma拥有独特的退出机制，一套智能合同来帮助移动资产和检查点进行验证，使Polygon PoS能够利用以太坊的安全性。</p><p id="bbc3" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里唯一的缺点是通过等离子桥从Polygon到Ethereum的撤退必须经过7天的撤退期。使用<a class="ae nc" href="https://docs.polygon.technology/docs/develop/ethereum-polygon/pos/getting-started/" rel="noopener ugc nofollow" target="_blank"> PoS桥</a>，可以更快地取款(30分钟到3小时内)。然而，这种方法不如使用等离子体桥安全。</p><p id="4951" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这两种桥使用起来仍然安全可靠，在大多数情况下，应该可以很好地满足用户的需求。但是，如果您的项目需要最先进的安全性，谨慎的做法是考虑使用多边形L2解决方案，如<a class="ae nc" href="https://polygon.technology/solutions/polygon-zero/" rel="noopener ugc nofollow" target="_blank"> Zero </a>、<a class="ae nc" href="https://polygon.technology/solutions/polygon-nightfall/" rel="noopener ugc nofollow" target="_blank">夜幕</a>和<a class="ae nc" href="https://polygon.technology/solutions/polygon-hermez/" rel="noopener ugc nofollow" target="_blank"> Hermez </a>。</p><h1 id="baaf" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">行动比较</h1><p id="6021" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">既然我们已经看到了Polygon PoS在某些项目上相对于Ethereum的优势，让我们分析一下这两个链的部署。</p><p id="095d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在本文的以下部分中，我们将创建一个简单的NFT契约，并将其部署到Polygon Mumbai和Ethereum Goerli测试网。我们将观察两个链的开发过程是如何几乎相同的。</p><p id="a908" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">接下来，我们将分析之前(由其他团队)在以太坊和Polygon主网上部署的NFT合同，然后比较成本和确认时间。</p><h1 id="39ac" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">NFT项目概述</h1><p id="a90d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们将要创建的项目非常简单。我们想写和部署ERC-721合同，铸造一个单一的NFT到我们选择的区块链。</p><p id="899a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">此类项目的第一步是创建NFT艺术及其相关元数据，并将其上传到IPFS。对于本教程，我们已经为您做到了这一点。</p><p id="4d3f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你可以点击这里查看上传到IPFS <a class="ae nc" href="https://gateway.pinata.cloud/ipfs/QmeDadHM1U3jVw1pMpZ5ZENBJhFGafHQeUNTNoapw7j3mq" rel="noopener ugc nofollow" target="_blank">的图片，点击这里</a>查看相关的NFT元数据<a class="ae nc" href="https://gateway.pinata.cloud/ipfs/QmUyZoK21qb8YknXGfDB34RTY8vMqPb6Bsj9U9iLEnyrZR" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/c10f749a1272cf59ce61b172a30a2613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*vSosvwF5owM8oj5t.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="27b2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果你有兴趣了解更多关于NFT元数据、IPFS和Pinata的信息，请点击这里查看这篇文章<a class="ae nc" href="https://dev.to/rounakbanik/working-with-nft-metadata-ipfs-and-pinata-3ieh" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="56f3" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">创建NFT合同</h1><h2 id="571a" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤1:安装元掩码扩展</h2><p id="589a" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果你还没有，为你的浏览器安装<a class="ae nc" href="https://metamask.io/download/" rel="noopener ugc nofollow" target="_blank">元掩码扩展</a>。安装后，MetaMask将引导您创建第一个钱包。</p><h2 id="3acb" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">第二步:将Goerli和Mumbai连锁店加入MetaMask</h2><p id="7409" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">默认情况下，MetaMask带有以太坊mainnet和Goerli testnet配置。要添加多边形mainnet和Mumbai testnet链，请遵循本文档中<a class="ae nc" href="https://docs.polygon.technology/docs/develop/metamask/config-polygon-on-metamask/" rel="noopener ugc nofollow" target="_blank">的说明。</a></p><h2 id="f901" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">第三步:从水龙头中取出GoerliETH和Mumbai MATIC</h2><p id="38fd" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">前往炼金术士的<a class="ae nc" href="https://goerlifaucet.com/" rel="noopener ugc nofollow" target="_blank"> Goerli水龙头页面</a>请求一些免费goer lies。你可能需要为此创建一个免费的炼金术账户。</p><p id="88e6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果一切顺利，当你转到歌利测试网时，你的钱包里应该有0.05歌利。</p><p id="908a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">同样，从Polygon的官方水龙头获得一些免费的Mumbai MATIC。如果成功，切换到孟买连锁店应该会告诉你，你有0.2 MATIC的余额。</p><h2 id="09e9" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤4:安装NPM和节点</h2><p id="aa4d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们将使用JavaScript和node构建我们的项目。如果您的本地机器上没有安装node和npm，您可以在这里<a class="ae nc" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">安装。</a></p><p id="9c4c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您可以通过使用以下命令检查终端上节点的版本号来确保一切正常运行:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="0fc2" class="ne kw iq nr b gy nv nw l nx ny">$ node -v</span></pre><h2 id="7140" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤5:创建一个节点项目并安装依赖项</h2><p id="32f6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">让我们通过运行以下命令来设置一个空的项目存储库:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="7104" class="ne kw iq nr b gy nv nw l nx ny">$ mkdir nft-contract &amp;&amp; cd nft-contract<br/>$ npm init -y</span></pre><p id="04f3" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将使用行业标准以太坊开发环境Hardhat来构建和部署我们的智能合约。通过运行以下命令安装Hardhat:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="b4be" class="ne kw iq nr b gy nv nw l nx ny">$ npm install --save-dev hardhat</span></pre><p id="4c10" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们现在可以通过运行以下命令并选择“创建一个基本的示例项目”来创建一个示例Hardhat项目</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="23f0" class="ne kw iq nr b gy nv nw l nx ny">$ npx hardhat</span></pre><p id="f0d4" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">同意所有默认设置(项目根，添加一个<code class="fe nz oa ob nr b">.gitignore</code>，并安装示例项目依赖项)。</p><p id="cdfa" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">要检查一切是否正常，请运行以下命令:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="1582" class="ne kw iq nr b gy nv nw l nx ny">$ npx hardhat test</span></pre><p id="d14e" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们现在已经成功地配置了我们的Hardhat开发环境。接下来让我们安装OpenZeppelin合同包。这将使我们能够访问ERC-721实现(NFTs的标准)，在此基础上我们将构建我们的合同。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="5842" class="ne kw iq nr b gy nv nw l nx ny">$ npm install @openzeppelin/contracts</span></pre><h2 id="fbca" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤6:编写智能合同</h2><p id="ccc4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在您喜欢的代码编辑器(例如VS Code)中打开存储库。在<code class="fe nz oa ob nr b">contracts</code>文件夹中，创建名为<code class="fe nz oa ob nr b">NFTContract.sol</code>的新文件。</p><p id="ce04" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将创建一个非常简单的ERC-721契约，它在部署时(即在构造函数中)铸造一个NFT。将以下代码添加到文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure><h2 id="50eb" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤7:在本地部署契约</h2><p id="c63b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在，让我们编写一个脚本，在本地部署和测试契约。在脚本文件夹中，创建一个名为<code class="fe nz oa ob nr b">run.js</code>的新文件，并添加以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="29b6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在，在您的终端上运行以下命令:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="5a0c" class="ne kw iq nr b gy nv nw l nx ny">$ npx hardhat run scripts/run.js</span></pre><h2 id="0695" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤8:将合同部署到Goerli</h2><p id="42f9" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">要将合同部署到Goerli，我们必须将网络添加到<code class="fe nz oa ob nr b">hardhat.config.js</code>文件中。用以下内容替换文件末尾的<code class="fe nz oa ob nr b">module.exports</code>对象:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="e0a9" class="ne kw iq nr b gy nv nw l nx ny">module.exports = {<br/>  solidity: "0.8.4",<br/>  networks: {<br/>    goerli: {<br/>      url: "https://ethereum-goerli-rpc.allthatnode.com/",<br/>      accounts: ["&lt;-- WALLET PRIVATE KEY --&gt;"]<br/>    }<br/>  }<br/>};</span></pre><p id="6d0a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">用元掩码钱包的私钥替换占位符。(这可以在账户详情中找到。)注意不要公开共享此密钥或文件。</p><p id="241a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">要部署到Goerli testnet，运行以下命令:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="9154" class="ne kw iq nr b gy nv nw l nx ny">npx hardhat run scripts/run.js --network goerli</span></pre><p id="f17b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果一切顺利，您的终端将在Goerli网络上显示已部署合同的地址。前往<a class="ae nc" href="https://goerli.etherscan.io/" rel="noopener ugc nofollow" target="_blank">https://goer Li . ethers can . io</a>并搜索您的合同地址以查看您的合同。</p><p id="e705" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你可以在这里找到我们部署<a class="ae nc" href="https://goerli.etherscan.io/address/0x64ccE52898F5d61380D2Ec8C02F2EF16F28436de" rel="noopener ugc nofollow" target="_blank">的合同。</a></p><h2 id="8309" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">步骤9:将合同部署到孟买</h2><p id="a07c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在让我们将合同部署到Polygon Mumbai网络。这一步最好的部分是，我们必须完全不改变我们的合同或运行脚本。我们唯一需要添加的是<code class="fe nz oa ob nr b">mumbai</code>网络到<code class="fe nz oa ob nr b">hardhat.config.js</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="7482" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">通过运行以下命令部署到孟买:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="1147" class="ne kw iq nr b gy nv nw l nx ny">npx hardhat run scripts/run.js --network mumbai</span></pre><p id="2821" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您可以在<a class="ae nc" href="https://mumbai.polygonscan.com/" rel="noopener ugc nofollow" target="_blank">https://mumbai.polygonscan.com</a>搜索您的合同地址。你可以在这里找到我们的合同。</p><p id="bd8d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你也可以在<a class="ae nc" href="https://testnets.opensea.io/" rel="noopener ugc nofollow" target="_blank"> OpenSea Testnets </a>上搜索你的Goerli和Mumbai NFTs。例如，<a class="ae nc" href="https://testnets.opensea.io/assets/mumbai/0x785e970c281ecfcbbc83b1ca1b32fb30ba0e08b3/0" rel="noopener ugc nofollow" target="_blank">这里的</a>是我们在孟买网络上创造的NFT。</p><h1 id="72ea" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">比较成本和时间</h1><p id="4c8c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">到目前为止，应该非常清楚以太坊和多边形侧链的开发几乎是相同的。</p><p id="51ed" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">但是成本和时间的影响是什么？</p><p id="3a51" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们无法用我们部署的合同来回答这些问题，因为我们是在使用假币的测试网上操作的。</p><p id="56d8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">但不用担心。我们已经代表你将这些合同部署到以太坊和多边形主网。让我们来看看表演。</p><h2 id="6f3e" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">以太坊</h2><p id="44ac" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">你可以在以太坊<a class="ae nc" href="https://etherscan.io/address/0x5acea83cd77703773429959e66cc2c2f648262a7" rel="noopener ugc nofollow" target="_blank">这里</a>查看已部署的NFT合同，在这里查看合同创建交易<a class="ae nc" href="https://etherscan.io/tx/0x26ac19375af708c7d7b9266d9aae9198f49b41124f49af68dc1d28963f6363af" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="9684" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">尽管最近以太币价格(以美元计算)和平均天然气价格(以gwei计算)下降，但合同部署成本约为0.02以太币或40美元。</p><p id="c075" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">确认这个以太坊交易的时间大约是40秒。</p><h2 id="5d90" class="ne kw iq bd kx nf ng dn lb nh ni dp lf lw nj nk lh ma nl nm lj me nn no ll np bi translated">多边形</h2><p id="c6aa" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">您可以在多边形<a class="ae nc" href="https://polygonscan.com/address/0xceb61fdf7130d170c50c02e3a9bed4eb83b42a46" rel="noopener ugc nofollow" target="_blank">的</a>处查看已部署的NFT合同，在处查看合同创建事务<a class="ae nc" href="https://polygonscan.com/tx/0x95c2bbbb79ab07db7ea656b0506c88bd3f3e83e485e1d075f770581f312ffd06" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="709e" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">请注意，当MATIC交易价格为0.94美元时，我们支付了0.06 MATIC。因此，我们支付了0.06美元来部署合同。</p><p id="be25" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">确认该交易的时间是6秒。</p><p id="cb06" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">实际上，该合同的确认速度几乎提高了7倍，成本降低了1000倍！</p><h1 id="020e" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="03e2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">以太坊无疑是现存的最重要的智能合约区块链。然而，它面临着规模和交易成本方面的巨大障碍。</p><p id="40a8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">希望这篇文章有力地说明了为什么Polygon是解决以太坊可伸缩性问题的灵丹妙药。作为PoS侧链，它显著提高了处理速度并降低了成本。</p><p id="0e2e" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">对于以太坊开发者来说，在多边形上构建几乎不需要额外的技能提升。以太坊工具兼容这两种环境。要开始在多边形上构建，请在这里查看文档<a class="ae nc" href="https://docs.polygon.technology/docs/develop/getting-started/" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>