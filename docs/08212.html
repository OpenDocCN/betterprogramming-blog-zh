<html>
<head>
<title>How To Design and Develop APIs That Developers Will Love to Use</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设计和开发开发人员喜欢使用的API</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-design-and-develop-apis-that-developers-will-love-to-use-4bbd859d9fe5?source=collection_archive---------18-----------------------#2021-04-06">https://betterprogramming.pub/how-to-design-and-develop-apis-that-developers-will-love-to-use-4bbd859d9fe5?source=collection_archive---------18-----------------------#2021-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7ef6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从设置正确的响应代码开始，您的开发人员会很高兴</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/83d36a8ff45757e591edb0920696a991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWPp24FNoKquc0XXUj_yng.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@codestorm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">萨法·萨法罗夫</a>在<a class="ae ky" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="3879" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在构建一个API，它很可能会被另一个开发者使用。你的API必须易于理解和使用。下面是一些技巧，可以帮助你设计一个其他开发者会喜欢的API。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c0b5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">端点路径必须是名词</h1><p id="38a0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">理想情况下，端点路径应该包含名词，避免使用动词。HTTP动词足以告诉消费者端点的用途。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="1b73" class="ne md it na b gy nf ng l nh ni">Good Names<br/>- /cars<br/>- /books/1</span><span id="bcb0" class="ne md it na b gy nj ng l nh ni">Bad Names<br/>- /getCars<br/>- /getBooks/1</span></pre><p id="714c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用动词，您将需要为一个项目上的所有CRUD操作创建一个单独的端点。向名为<code class="fe nk nl nm na b">/getCars</code>的端点发出PUT请求确实令人困惑。</p><p id="3f84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，如果您的端点路径是一个名词，那么您可以对不同的CRUD操作使用带有不同HTTP动词的同一个端点。向<code class="fe nk nl nm na b">/cars</code>发出PUT请求是有意义的，向<code class="fe nk nl nm na b">/cars</code>发出GET或POST请求也是有意义的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="81ee" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">端点的名称必须是复数</h1><p id="42a5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">端点的名称必须是复数。当试图描述URI的等级制度时，这一点很重要。(我们会在下一段讲等级制度。)通常情况下，数据会存储为集合，表中会有多行。因此，在命名端点时，鼓励使用复数。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="dce1" class="ne md it na b gy nf ng l nh ni">Good Names<br/>- /cars<br/>- /books</span><span id="66c8" class="ne md it na b gy nj ng l nh ni">Bad Names<br/>- /car<br/>- /book</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4f4c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">URI必须描绘等级制度</h1><p id="e489" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">端点路径必须以这样的方式命名，即它们告诉消费者它们试图访问的数据的层次结构。例如，假设我们有多个图书馆，每个图书馆都有多本书，我们希望创建一个端点来访问图书馆中的特定书。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7495" class="ne md it na b gy nf ng l nh ni">A good endpoint would be<br/>/libraries/2/books/10 </span><span id="1405" class="ne md it na b gy nj ng l nh ni">A not so good endpoint would be <br/>/books/10</span></pre><p id="7024" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这两种情况下，我们都试图访问ID为10的书。虽然第二个端点还不错，但是第一个端点为消费者提供了关于库ID和数据层次结构的信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d85f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">HTTP动词应该只做它们的工作</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/ce9217a2d35f9e8c2f14cc1c0e8679b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8_izMXame6IrPES8.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="no">图片来源:“</em><a class="ae ky" href="https://medium.com/hashmapinc/rest-good-practices-for-api-design-881439796dc9" rel="noopener">REST:API设计的良好实践</a>”</p></figure><ul class=""><li id="681e" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">GET请求用于读取多个项目或单个项目。它不应该改变数据库的状态，即创建新项目、删除项目或更新项目。</li><li id="4065" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">POST请求只能创建一个或多个项目。应该没有其他副作用。</li><li id="49a9" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">PUT请求用于更新项目。它不应该删除或创建任何项目。</li><li id="cad7" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">删除请求只能用于从表中删除项目。</li><li id="3683" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">确保这些请求没有任何副作用。</li></ul><p id="979b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请求应该只对指定的数据起作用。例如，如果用户试图将一本书添加到一个不存在的图书馆，那么对图书端点的POST请求也不应该创建一个图书馆记录。相反，用户应该首先被重定向到库端点。成功创建库之后，它们应该被定向到图书端点。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="07e1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为排序、筛选和分页提供支持</h1><h2 id="6daf" class="ne md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">整理</h2><p id="40fa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">应该在API中实现一个特性，允许它接受如下请求。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7ca8" class="ne md it na b gy nf ng l nh ni">/cars?sort=+carName,-yearReleased</span></pre><p id="e027" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，API被要求返回所有的汽车，按字段<code class="fe nk nl nm na b">carName</code>升序排序，按<code class="fe nk nl nm na b">yearReleased</code>降序排序。</p><h2 id="6433" class="ne md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">过滤</h2><p id="fb8e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用户/开发人员应该能够获得基于指定字段的过滤数据。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="12bd" class="ne md it na b gy nf ng l nh ni">/cars?carName="XYZ"&amp;yearRealeased="2020"</span></pre><p id="92e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果发出类似上面的请求，API应该只返回2020年发布的名为<code class="fe nk nl nm na b">“XYZ”</code>的汽车。</p><h2 id="bf02" class="ne md it bd me od oe dn mi of og dp mm li oh oi mo lm oj ok mq lq ol om ms on bi translated">页码</h2><p id="039e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">API应该能够批量或以页面的形式发送数据，而不是一次返回所有数据。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="bf09" class="ne md it na b gy nf ng l nh ni">/cars?pageData=10&amp;page=1</span></pre><p id="248e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的请求告诉API，用户正在请求包含十条记录的第一个页面，即前十辆汽车。如果参数<code class="fe nk nl nm na b">page</code>的值是<code class="fe nk nl nm na b">2</code>，API应该发送接下来的十辆汽车(汽车11到汽车20)。因此，如果用户有一个循环，并在每次迭代中不断增加值<code class="fe nk nl nm na b">page</code>，他们应该以十为一批获得所有数据。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6ba9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用正确的响应代码</h1><p id="4c8c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如前所述，您的API很可能会被其他开发人员使用。有不同的响应代码是有原因的:它们帮助其他开发人员调试他们发出的请求中的错误。以下是标准响应代码。</p><ul class=""><li id="ca6d" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">200 —请求成功，返回了一些内容。</li><li id="813a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">201-请求成功，资源已创建。</li><li id="2415" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">204-请求成功，没有内容返回。对于删除请求很有用。</li><li id="90e4" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">400-由于缺少必需的参数，请求不正确。</li><li id="88a5" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">401 —未经授权。用户无权访问请求，很可能是因为他们没有登录。</li><li id="dc3d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">403 —禁止。用户已登录并通过身份验证，但无权查看资源。它可以是安全的端点/数据。</li><li id="0312" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">404 —未找到。找不到请求的资源/端点。</li><li id="3247" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">405-不允许使用方法。尝试在仅支持GET请求的端点上发出POST请求，反之亦然。</li><li id="81c8" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">500 —一般错误。当上述代码都不是合适的响应代码时抛出。理想情况下，应该包括一个描述性的错误消息。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a9bf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">记录您的API</h1><p id="1eeb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">具有良好文档的API使得其他开发人员更容易使用。理想情况下，您的API将安装类似于<a class="ae ky" href="https://swagger.io/solutions/api-documentation/" rel="noopener ugc nofollow" target="_blank"> Swagger </a>的东西，这将允许用户向API发出请求，而实际上不需要编写任何代码。</p><p id="bf79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保所有终点都有完整的记录。</p><p id="a396" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尝试为所有主要语言提供访问API端点的代码片段。</p><p id="cd24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">包括每个端点的示例请求对象和响应对象。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="34df" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="686c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">总结以上内容:</p><ul class=""><li id="d8d8" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">端点路径必须是名词</li><li id="3f33" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">端点的名称必须是复数</li><li id="1f73" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">URI必须描绘等级制度</li><li id="3a8a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">HTTP动词应该只做它们的工作</li><li id="7f28" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">为排序、筛选和分页提供支持</li><li id="f760" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">使用正确的响应代码</li><li id="a306" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">记录您的API</li></ul><p id="9a54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有任何其他设计或开发API的规则/技巧，请在评论中告诉我。你用过哪些好的API？你用过哪些API？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2d66" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><div class="oo op gp gr oq or"><a href="https://stackoverflow.blog/2020/03/02/best-practices-for-rest-api-design/" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">REST API设计的最佳实践——堆栈溢出博客</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">关于如何将REST APIs设计得易于理解、面向未来、安全且快速的最佳实践。</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">stackoverflow.blog</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">设计实用的RESTful API的最佳实践</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">您的数据模型已经开始稳定下来，您可以为您的web应用程序创建一个公共API了。你意识到…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">www.vinaysahni.com</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf ks or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://swagger.io/resources/articles/best-practices-in-api-design/" rel="noopener  ugc nofollow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">API设计的最佳实践</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">良好的API设计是那些试图完善API策略的团队经常提到的话题。在以前的…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">swagger.io</p></div></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0319" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近开始了一个修改版的#100daysofcode挑战。我的目标是每天写与Python、数据科学或编程相关的<a class="ae ky" href="https://medium.com/daily-programming-tips" rel="noopener">内容</a>。</p><p id="1592" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://www.linkedin.com/in/rahulbanerjee2699/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae ky" href="https://twitter.com/rahulbanerjee99" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="f8ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ph">原载于2021年4月6日https://www.realpythonproject.com</em><em class="ph">的</em> <a class="ae ky" href="https://www.realpythonproject.com/how-to-develop-design-an-api-that-developers-want-to-use/" rel="noopener ugc nofollow" target="_blank"> <em class="ph">。</em></a></p></div></div>    
</body>
</html>