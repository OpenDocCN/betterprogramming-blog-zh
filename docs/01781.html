<html>
<head>
<title>Setting Up Continuous Integration Pipeline in GitLab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在GitLab中设置持续集成管道</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/setting-up-continuous-integration-pipeline-in-gitlab-8a79001dce74?source=collection_archive---------5-----------------------#2019-10-13">https://betterprogramming.pub/setting-up-continuous-integration-pipeline-in-gitlab-8a79001dce74?source=collection_archive---------5-----------------------#2019-10-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b7e7" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"># 100日的第26天代码</h2><div class=""/><div class=""><h2 id="ebcd" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">这个流行词已经存在一段时间了，如果你还没有开始，为什么不开始呢？</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/6c544d93014a7d627e66fa444e703780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u6KsqMepV1ftgLChySdLgQ.png"/></div></div></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ld le l"/></div></figure></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="8024" class="lm ln it bd lo lp lq lr ls lt lu lv lw ki lx kj ly kl lz km ma ko mb kp mc md bi translated">1.在GitLab上创建一个示例项目</h1><p id="3780" class="pw-post-body-paragraph me mf it mg b mh mi kd mj mk ml kg mm mn mo mp mq mr ms mt mu mv mw mx my mz im bi translated">GitLab是免费使用的，所以如果您还没有使用它，请不要犹豫。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi na"><img src="../Images/3073015e2f1a11a25ba0027fca06bf83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VxFBuU4RPYQNY9zH6PB8XQ.png"/></div></div></figure><p id="c743" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">创建项目后，您应该会看到以下屏幕:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/ad19e8f019ce7b628640d661155a3ebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*78YRNeu7xVTgBOq_JemY_g.png"/></div></div></figure><p id="c2ab" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">请随意将您的GitLab项目与您现有的项目连接起来。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="2d47" class="lm ln it bd lo lp lq lr ls lt lu lv lw ki lx kj ly kl lz km ma ko mb kp mc md bi translated">2.添加YAML文件</h1><ul class=""><li id="b2a9" class="nh ni it mg b mh mi mk ml mn nj mr nk mv nl mz nm nn no np bi translated">我们需要定义一个包含自动化指令的<code class="fe nq nr ns nt b">.yml</code>文件，每次我们做出更改时，我们的CI管道都必须运行该文件。</li><li id="5dbd" class="nh ni it mg b mh nu mk nv mn nw mr nx mv ny mz nm nn no np bi translated">我使用GitLab UI直接创建文件，您可以随意添加文件。</li><li id="e45e" class="nh ni it mg b mh nu mk nv mn nw mr nx mv ny mz nm nn no np bi translated">将你的文件命名为<code class="fe nq nr ns nt b">.gitlab-ci.yml</code>——这非常重要。</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/0c587cefe255a71c8aa82a8f675fa845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJqWNIRZUH80ZZ4krzoVOA.png"/></div></div></figure><p id="04ac" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">这里，我们定义了流程中的两个阶段。</p><ol class=""><li id="5754" class="nh ni it mg b mh nb mk nc mn oa mr ob mv oc mz od nn no np bi translated"><code class="fe nq nr ns nt b">Build</code>——我们将在那里构建最终的生产文件，对于Android，这将是一个APK文件。</li><li id="b063" class="nh ni it mg b mh nu mk nv mn nw mr nx mv ny mz od nn no np bi translated"><code class="fe nq nr ns nt b">Test</code> —随心所欲地运行各种测试。</li></ol><p id="6f23" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">然后，我们定义在每个阶段运行哪些命令。</p><p id="bb86" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">这些是我们正在定义的一些非常简单的命令，但是您将在实际项目中处理更复杂的过程，这些项目可能在它们的管道中有多个自动化过程。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="bba8" class="lm ln it bd lo lp lq lr ls lt lu lv lw ki lx kj ly kl lz km ma ko mb kp mc md bi translated">3.承诺运行您的第一个CI渠道</h1><p id="3fbc" class="pw-post-body-paragraph me mf it mg b mh mi kd mj mk ml kg mm mn mo mp mq mr ms mt mu mv mw mx my mz im bi translated">点击<code class="fe nq nr ns nt b">Commit</code>按钮。</p><p id="62ee" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">现在，单击顶部的项目名称，打开项目概述屏幕。看到标有箭头的图标，如果它是一个蓝色的圆圈，这意味着您的CI管道正在运行。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/02df053ae94fe5c3487185fa3e6332b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2Mw0ZpsCZzc9VYlejp9Dw.png"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/5ca67ffd2095152aa66f63cbc0944be5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3t2HOVSZN2AyvdHuPkIH3Q.png"/></div></div></figure><p id="9ec5" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">运行后会失败。因此，您会看到红色图标。您可以点击图标查看更多详细信息。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/73a1ae31f934ba9297f1f65d2d5a90a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*81JPyZYLQy3xq6FSeyyJuw.png"/></div></div></figure><p id="97bb" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">你可以看到我们的第一阶段是成功的，但第二阶段让我们失望了。</p><p id="da2f" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">为什么？在第一阶段之后，创建了一个新的构建文件，但是没有转移到第二阶段。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="9b4d" class="lm ln it bd lo lp lq lr ls lt lu lv lw ki lx kj ly kl lz km ma ko mb kp mc md bi translated">4.在YAML文件中定义工件</h1><p id="1ed5" class="pw-post-body-paragraph me mf it mg b mh mi kd mj mk ml kg mm mn mo mp mq mr ms mt mu mv mw mx my mz im bi translated">我们需要在我们的YAML文件中定义一个叫做<code class="fe nq nr ns nt b">Artifacts</code> <strong class="mg jd"> </strong>的东西。一个<code class="fe nq nr ns nt b">artifact</code>是应用程序的可部署组件。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/9b80e7ff78d50382b51c48da1942bb3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6cWRqSBmPp7a-ztQraa7Q.png"/></div></div></figure><p id="3d69" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">这里，我们定义了一个到<code class="fe nq nr ns nt b">artifact</code>文件的路径，该路径将在<code class="fe nq nr ns nt b">build/</code> <strong class="mg jd"> <em class="oh"> </em> </strong>中，我们已经在<code class="fe nq nr ns nt b">touch</code>命令中提到过。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="87ca" class="lm ln it bd lo lp lq lr ls lt lu lv lw ki lx kj ly kl lz km ma ko mb kp mc md bi translated">5.承诺看到您第一个成功的CI渠道</h1><ul class=""><li id="17e6" class="nh ni it mg b mh mi mk ml mn nj mr nk mv nl mz nm nn no np bi translated">提交并观察CI渠道。</li><li id="df8f" class="nh ni it mg b mh nu mk nv mn nw mr nx mv ny mz nm nn no np bi translated">您将看到蓝色图标，表示CI渠道正在运行，此后您将获得成功。</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oi"><img src="../Images/405a0db1f8d0d8fb0677196c404d73ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzjKKNMp02OZG84RHKZ3lw.png"/></div></div></figure><p id="c241" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">如果页面没有自动刷新，请随意单击刷新。您将看到绿色勾号图标，表示一切都很成功。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oj"><img src="../Images/e8a9f89bc7bd4fbc194ff34dd963b719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIIZFNxAhOOY1uxhFS6BPQ.png"/></div></div></figure><p id="5e50" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">就这样，作为开始。您现在对CI有了一个概念。我们将在未来的故事中进行更深入的探讨。敬请关注！</p><p id="b4af" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">请务必查看之前撰写的故事，以了解有关CI/CD的更多信息。</p><p id="3f17" class="pw-post-body-paragraph me mf it mg b mh nb kd mj mk nc kg mm mn nd mp mq mr ne mt mu mv nf mx my mz im bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>