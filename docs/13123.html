<html>
<head>
<title>Python Shorts — Birthday Mystery!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蟒蛇短裤——生日之谜！</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/python-shorts-birthday-surprise-fe2b90d44e96?source=collection_archive---------6-----------------------#2022-07-31">https://betterprogramming.pub/python-shorts-birthday-surprise-fe2b90d44e96?source=collection_archive---------6-----------------------#2022-07-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d766" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">你的生日聚会有23位客人。其中两个可能同一天生日。但是，等等，有一个奇怪的转折，你可能需要平均让25！</em></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/b1d5181017f1bf6f81ebdce1cdc9355e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yPT2H6Ed1_HpjJSZ"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kz" href="https://unsplash.com/@skylakestudio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> SKYLAKE工作室</a>拍摄</p></figure><p id="991d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">平均有多少人需要参加一个聚会，这样至少有两个人同一天生日？当你用蒙特卡洛模拟来处理这类问题时，Python会大放异彩。当然，你可以找到一个概率公式(在维基百科中查找)，但模拟这种情况会很有趣，也很有启发性。</p><h2 id="9103" class="lw lx it bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">但是抓紧你的派对帽！</h2><p id="02d3" class="pw-post-body-paragraph la lb it lc b ld mp ju lf lg mq jx li lj mr ll lm ln ms lp lq lr mt lt lu lv im bi translated">当我编写这个程序的时候，我发现了一个非常奇怪的结果，我至今仍想不明白。让我解释一下。</p><p id="64b5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">首先，这里有一个简短的Python程序，它符合所有专家的观点，并且很有意义。</p><pre class="kk kl km kn gt mu mv mw mx aw my bi"><span id="b6e6" class="lw lx it mv b gy mz na l nb nc">import random</span><span id="acee" class="lw lx it mv b gy nd na l nb nc">parties = 10000<br/>hits = 0<br/>days = list(range(365))</span><span id="6a94" class="lw lx it mv b gy nd na l nb nc">for i in range(parties):<br/>    guest_birthdays = random.choices(days, k=23)<br/>    if len(set(guest_birthdays)) &lt; 23:<br/>        hits += 1</span><span id="58d1" class="lw lx it mv b gy nd na l nb nc">print(hits / parties)</span></pre><p id="faaa" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">变量<code class="fe ne nf ng mv b">days</code>是一个从0到364的整数列表，每个整数代表一年365天中的一天。对于每一方，从日期列表中随机选择一组23天，以创建23个<code class="fe ne nf ng mv b">guest_birthdays</code>的列表。<code class="fe ne nf ng mv b">choices()</code>函数使用“with replacement ”,这意味着所选择的日期可能会在返回的列表中重复。</p><p id="36ea" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">通过将这个包含23个客人生日的列表转换成一个<code class="fe ne nf ng mv b">set</code>，任何重复都将被删除，如果任意两个客人同一天生日，那么这个集合的计数将小于23。计算出在所有10，000次聚会中发生这种情况的次数，其平均值略高于一半。这本身就很了不起。</p><h1 id="e5ed" class="nh lx it bd ly ni nj nk mb nl nm nn me jz no ka mh kc np kd mk kf nq kg mn nr bi translated">现在事情变得奇怪了</h1><p id="2982" class="pw-post-body-paragraph la lb it lc b ld mp ju lf lg mq jx li lj mr ll lm ln ms lp lq lr mt lt lu lv im bi translated">与其让23个人进门，然后比较生日，不如让参加派对的人一个一个进来。</p><p id="9c86" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当每个客人到达时，我们会将他们的生日号码添加到一个列表中，检查他们是否与列表中已有的任何一个客人的生日相匹配。</p><p id="8ff6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一旦我们找到一个匹配的，我们就停止让更多的客人进来，并计算让两个客人同一天生日需要多少人。</p><p id="4cdb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在一万次聚会之后，你会认为找到匹配的客人的平均数量应该少于23个。毕竟，如上所示，有23个客人，匹配的几率大于50%。</p><p id="44e0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="ns">但事实证明，在你找到任何两位生日相同的客人之前，你平均需要让25位客人进来！</em></p><p id="181e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这里有一个简短的Python程序演示了这个操作。</p><pre class="kk kl km kn gt mu mv mw mx aw my bi"><span id="aeb5" class="lw lx it mv b gy mz na l nb nc">import random</span><span id="7c46" class="lw lx it mv b gy nd na l nb nc">parties = 10000<br/>total_guests = 0</span><span id="8c85" class="lw lx it mv b gy nd na l nb nc">for i in range(parties):<br/>    guest_birthdays = []<br/>    while True:<br/>        bd = random.randrange(365)<br/>        guest_birthdays.append(bd)<br/>        if bd in guest_birthdays[:-1]:<br/>            break</span><span id="e9f1" class="lw lx it mv b gy nd na l nb nc">    party_guests = len(guest_birthdays)<br/>    total_guests += party_guests</span><span id="1488" class="lw lx it mv b gy nd na l nb nc">print(total_guests / parties)</span></pre><p id="4f9d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于10，000个聚会中的每一个，我们让客人进来(将他们的生日号码附加到列表中)，直到我们最终有两个生日匹配的客人。请注意，我们使用以下代码检查了刚刚附加的生日，以查看它是否存在于列表中较早的位置… <code class="fe ne nf ng mv b">if bd in guest_birthdays[:-1]:</code></p><p id="b291" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在找到相匹配的生日之前，每场派对开门的客人数量被记录并用于计算每场派对的平均客人数量。</p><p id="34a4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">根据标准谜题，我完全预计客人的平均人数不到23人。但客人的平均数量总是在24.6左右，这意味着平均每次需要25个客人才能确保一半以上的时间有比赛。奇怪。</p><h1 id="d1fd" class="nh lx it bd ly ni nj nk mb nl nm nn me jz no ka mh kc np kd mk kf nq kg mn nr bi translated">还在寻找解释！</h1><p id="326b" class="pw-post-body-paragraph la lb it lc b ld mp ju lf lg mq jx li lj mr ll lm ln ms lp lq lr mt lt lu lv im bi translated">每当我遇到这样的挑战时，我倾向于将情况推向极端，看看它是否简化了逻辑。</p><p id="041c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这种情况下，我为二进制情况设置了代码，而不是365个可能的生日。如果参加聚会的人是随机的男性或女性，你需要让多少人进门才能得到两个同性？换个角度看，如果一个聚会上有两个人，他们是同性的可能性有多大？</p><p id="d046" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="ns">提示:答案不一样！</em></p><p id="be90" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我很谦虚地承认，对于上述两个程序之间的区别，我仍然没有一个清晰的解释，我欢迎任何即将到来的解释，希望是清晰简洁的。<em class="ns">你有吗？</em></p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><pre class="kk kl km kn gt mu mv mw mx aw my bi"><span id="b398" class="lw lx it mv b gy mz na l nb nc"><strong class="mv iu">Want to Connect?</strong></span><span id="c17e" class="lw lx it mv b gy nd na l nb nc">John is the author of <a class="ae kz" href="https://amzn.to/3k4O39j" rel="noopener ugc nofollow" target="_blank">Python for Numworks</a> , <a class="ae kz" href="https://amzn.to/3mHK0Br" rel="noopener ugc nofollow" target="_blank">Python for OpenSCAD</a>, <a class="ae kz" href="https://read.amazon.com/kp/embed?asin=B09DJ7MRDX&amp;preview=newtab&amp;linkCode=kpe&amp;ref_=cm_sw_r_kb_dp_Z6AHQNW2MQBZHCNKC38G&amp;tag=solarproud-20" rel="noopener ugc nofollow" target="_blank">Python for the TI-Nspire CX II</a>, <a class="ae kz" href="https://read.amazon.com/kp/embed?asin=B09GJMBDMF&amp;preview=newtab&amp;linkCode=kpe&amp;ref_=cm_sw_r_kb_dp_Z6AHQNW2MQBZHCNKC38G&amp;tag=solarproud-20" rel="noopener ugc nofollow" target="_blank">Python for the TI-84 Plus CE Python calculator</a>, <a class="ae kz" href="https://amzn.to/3mgX0js" rel="noopener ugc nofollow" target="_blank">Python for CASIO Calculators</a>, and <a class="ae kz" href="http://johnclarkcraig.com/" rel="noopener ugc nofollow" target="_blank">many other titles</a>.</span></pre></div></div>    
</body>
</html>