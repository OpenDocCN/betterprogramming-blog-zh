<html>
<head>
<title>Introduction to Elasticsearch Using Node.js—Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js的Elasticsearch简介—第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introduction-to-elasticsearch-using-node-js-part-1-164311327557?source=collection_archive---------5-----------------------#2019-08-21">https://betterprogramming.pub/introduction-to-elasticsearch-using-node-js-part-1-164311327557?source=collection_archive---------5-----------------------#2019-08-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0e2a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">弹性搜索背后的理论</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/480c8c744e71c8369ea6ce86bc19dd81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAiziQ2Fz-cqZwOyl_AtfQ.png"/></div></div></figure><p id="c2b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是<a class="ae lq" href="https://medium.com/@pankaj.panigrahi/list-of-node-js-articles-ededa6dd304b" rel="noopener">系列</a>的第十篇文章，它将帮助您掌握Node.js背后的不同概念，并使您能够创建生产就绪的应用程序。</p><p id="2c62" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章期望读者了解巴别塔。如果你需要知道如何设置，请阅读这篇<a class="ae lq" href="https://medium.com/@pankaj.panigrahi/using-babel-and-other-dependencies-in-node-js-18f74973c1f0" rel="noopener">文章</a>。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="d73a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak">什么是弹性搜索？</strong></h1><p id="09b6" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">Elasticsearch是一个开源的、可广泛分发的、非常可扩展的搜索引擎。Elasticsearch的查询速度明显更快，这有助于我们在大量数据中搜索文本。使用Elasticsearch的一个关键原因是，它从开发人员那里抽象出搜索和索引机制的所有复杂性，同时给开发人员足够的工具来定制任何需要的东西。</p><p id="4291" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">传统的SQL数据库管理系统并不是真正为全文搜索而设计的。因此，人们使用Elasticsearch的主要原因之一是在几毫秒内搜索文本。</p><p id="3fa2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但这不是你用Elasticsearch能做的全部。以下是人们使用Elasticsearch搜索的一些常见内容:</p><p id="94dc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">1.自动完成和即时搜索</p><p id="6e33" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.模糊搜索</p><p id="ff09" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.使用Kibana进行分析和可视化</p><p id="dab2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">4.聚合分布式日志数据</p><p id="badc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">5.应用性能管理(APM)</p><p id="fc2c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本课程中，我们不会深入研究Elasticsearch，因为我们将更多地关注集成部分。但是我们将介绍一些弹性搜索的基础知识，以便我们理解如何使用它。</p><p id="b336" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这也意味着文章会很长，充满了无聊的文字。</p><p id="bb4f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实在没办法:(。这就是为什么我决定把这篇文章分成两部分。一个只有理论一个有烟火:)</p><p id="ea2b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我保证，一旦你看完这篇文章，你就会对ElasticSearch有一个清晰的概念。</p><p id="cd9c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">推荐通读教程<a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" rel="noopener ugc nofollow" target="_blank">elastic search参考</a>和<a class="ae lq" href="https://www.udemy.com/elasticsearch-complete-guide/" rel="noopener ugc nofollow" target="_blank">elastic search解答</a>对ES (Elasticsearch)有一个完整的了解。此后，我将把弹性研究称为ES。).</p><p id="ec8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，让我们看看ES是如何存储数据的，关键组件是什么:</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="4477" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><strong class="ak"> <em class="mv">集群</em> </strong></h1><p id="8686" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">集群是一个或多个节点(服务器)的集合，它们共同保存所有数据，并提供跨所有节点的联合索引和搜索功能。集群中的一个节点是主节点，负责集群范围的管理和配置操作。可以查询集群中的任何节点，包括主节点。但是节点也会将查询转发给包含被查询数据的节点。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="c9f0" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">结节</h1><p id="8441" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">节点是一台服务器，它是群集的一部分，存储数据，并参与群集的索引和搜索功能。可以通过集群名称将节点配置为加入特定的集群。默认情况下，每个节点都被设置为加入名为<em class="mw"> elasticsearch </em>的集群。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="730a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">索引</h1><p id="2782" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">索引是具有相似特征的文档的集合。例如，可以有一个客户数据索引，一个产品目录索引，还有一个订单数据索引。索引由名称(必须全部小写)标识，当对其中的文档执行索引、搜索、更新和删除操作时，该名称用于引用索引。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="a6ca" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">文件</h1><p id="4724" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">文档是可以被索引的基本信息单元。例如，您可以为单个客户创建一个文档，为单个产品创建另一个文档，为单个订单创建另一个文档。这个文档是用<a class="ae lq" href="http://json.org/" rel="noopener ugc nofollow" target="_blank"> JSON </a> (JavaScript对象符号)表示的，这是一种无处不在的互联网数据交换格式。</p><p id="9c6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在一个索引/类型中，您可以存储任意多的文档。请注意没有限制。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="d7b5" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">碎片和复制品</h1><p id="7813" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">索引可能会存储大量数据，这可能会超出单个节点的硬件限制。例如，占用1TB磁盘空间的十亿个文档的单个索引可能不适合单个节点的磁盘。</p><p id="83b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了解决这个问题，ES提供了将索引细分为多个片段的能力。当您创建一个索引时，您可以简单地定义您想要的碎片数量。每个碎片本身都是一个功能齐全的独立“索引”，可以托管在集群中的任何节点上。分片很重要，有两个主要原因:</p><ul class=""><li id="8706" class="mx my it kw b kx ky la lb ld mz lh na ll nb lp nc nd ne nf bi translated">它允许您水平分割/缩放内容量。</li><li id="536e" class="mx my it kw b kx ng la nh ld ni lh nj ll nk lp nc nd ne nf bi translated">它允许您跨分片(可能在多个节点上)分布和并行化操作，从而提高性能/吞吐量。</li></ul><p id="4c58" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在随时可能出现故障的环境中，强烈建议拥有故障转移机制，以防某个碎片/节点以某种方式离线。ES允许您将索引碎片的一个或多个副本制作成所谓的<em class="mw">副本碎片</em>，或简称为<em class="mw">副本</em>。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="6682" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">绘图</h1><p id="f3e3" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">映射定义了特定类型文档的字段——数据类型(如字符串和整数)以及字段在es中的索引和存储方式。这类似于关系数据库中定义的模式。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="24a3" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">分析者</h1><p id="25f4" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">分析器在索引过程中用于将短语或表达式分解成术语。在索引中定义的分析器——无论是内置的还是自定义的——只是一个包含三个较低级别的构建块的包:字符过滤器、标记化器和标记过滤器。</p><p id="5372" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在所有这些中，映射和分析器是开发人员通常使用的最重要的项目。我们将在几分钟后看到这些技术的实际应用。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="8c9a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">倒排索引</h1><p id="19c9" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">Elasticsearch将分析器生成的所有令牌存储在一个称为倒排索引的数据结构中。它以一种结构存储文本，这种结构允许非常高效和快速的全文搜索。当执行全文搜索时，我们实际上是在查询一个倒排索引，而不是我们在索引文档时定义的JSON文档。</p><p id="5361" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以包含以下文本的两个文档为例:</p><p id="0a11" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="mw">医生1号:我是不可避免的。</em></p><p id="1801" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">医生2:我是，我是钢铁侠。</p><p id="60aa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">倒排索引由出现在索引所覆盖的任何文档中的所有唯一术语组成。它存储每个术语出现的文档列表。因此，本质上，倒排索引是术语和包含这些术语的文档之间的映射。对于以上两个文档，我们的倒排索引将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/9ff197dc99c10d0d40ae8322f22090d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rn7ib-7Q8QUEjnSQNuAr7g.png"/></div></div><p class="nm nn gj gh gi no np bd b be z dk translated">倒排索引</p></figure><p id="9e9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实际的倒排索引会存储更多的信息，比如每个术语在每个文档中的出现频率、术语在文档中的位置等。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="4827" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">详细映射</h1><p id="c51e" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">字段是ES中最小的数据单位。每个字段都有一个定义的类型，包含一个数据片段，如布尔、字符串或数组表达式。对于不同的目的，以不同的方式索引相同的字段通常是有用的。例如，<code class="fe nq nr ns nt b">string</code>字段可以被索引为用于全文搜索的<code class="fe nq nr ns nt b">text</code>字段，以及用于排序或聚合的<code class="fe nq nr ns nt b">keyword</code>字段。</p><p id="dbda" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在使用之前，不需要定义字段和映射类型。多亏了动态映射，新的字段名将通过索引文档自动添加。新字段既可以添加到顶级映射类型，也可以添加到内部对象和<code class="fe nq nr ns nt b"><a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html" rel="noopener ugc nofollow" target="_blank">nested</a></code>字段。我们还可以为我们的索引创建自定义映射，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="10a8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们实现自己的索引时，我们将看到更高级的用法。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="3d11" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">分析器的剖析</h1><p id="d4e5" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">Analyzer有三个较低级别的构建块:字符过滤器、令牌化器和令牌过滤器。</p><p id="9a6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">字符过滤器:</strong>字符过滤器接收作为字符流的原始文本，并可以通过添加、删除或改变字符来转换该流。例如，<code class="fe nq nr ns nt b">html_strip</code>字符过滤器从文本中去除所有的HTML标签。</p><p id="22d6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">记号赋予器:</strong>记号赋予器接收字符流，将其分解成单个记号(通常是单个单词)并输出记号流。例如，<code class="fe nq nr ns nt b">whitespace</code>记号赋予器在看到任何空白时会将文本分解成记号。我真的推荐浏览一些<a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenizers.html" rel="noopener ugc nofollow" target="_blank">常见的记号赋予器。</a></p><p id="74f8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">令牌过滤器</strong>:令牌过滤器接收令牌流，并可以添加、删除或更改令牌。例如，<code class="fe nq nr ns nt b"><a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lowercase-tokenfilter.html" rel="noopener ugc nofollow" target="_blank">lowercase</a></code>令牌过滤器将所有的令牌转换成小写字母，<code class="fe nq nr ns nt b"><a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stop-tokenfilter.html" rel="noopener ugc nofollow" target="_blank">stop</a></code>令牌过滤器从令牌流中删除常用词(<em class="mw">停用词</em>)如<code class="fe nq nr ns nt b">the</code>，而<code class="fe nq nr ns nt b"><a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-synonym-tokenfilter.html" rel="noopener ugc nofollow" target="_blank">synonym</a></code>令牌过滤器将同义词引入令牌流。</p><p id="675a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，分析器可以有零个或多个字符过滤器和标记过滤器，但它必须只有一个<strong class="kw iu">标记器。</strong></p><p id="8058" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们举一个定制分析器的例子，我们可以使用<code class="fe nq nr ns nt b">standard</code>标记器、<code class="fe nq nr ns nt b">html_strip</code>字符过滤器和<code class="fe nq nr ns nt b">lowercase</code>标记过滤器来构建它。标准的记号赋予器将文本划分为单词边界上的术语(不仅仅是空白)。它删除了大多数标点符号。</p><p id="d43e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过使用ES提供的以下API来检查我们的定制分析器是如何工作的。不要担心，在下一篇文章中，您将看到如何使用这个API。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="1b99" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它将返回两个令牌:<code class="fe nq nr ns nt b">i'm</code>和<code class="fe nq nr ns nt b">inevitable</code>。让我们想象一下这是如何发生的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/02d559967fc5bdffbc264e06ce4a510c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbOEXzVpGgxbPr2JsAxw4g.png"/></div></div></figure><p id="c644" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们已经按照我们想要的搜索和检索方式存储了数据，但是我们该如何做呢？</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="f15d" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">查询DSL</h1><p id="751e" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">Elasticsearch提供了基于JSON的全查询DSL(领域特定语言)来定义查询。最常见最简单的查询子句之一是<code class="fe nq nr ns nt b">match</code>。在本文中，我们将使用<code class="fe nq nr ns nt b">match</code>查询来获取我们的结果。但是你可以在这里阅读更多关于查询DSL <a class="ae lq" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html" rel="noopener ugc nofollow" target="_blank">的内容</a>。</p><p id="98fb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过以下方式使用匹配查询:</p><pre class="kj kk kl km gt nx nt ny nz aw oa bi"><span id="0218" class="ob lz it nt b gy oc od l oe of">GET /my-index/_search<br/>{<br/>  "query":{<br/>    "match":{<br/>      "field_name" : "search text"<br/>    }<br/>  }<br/>}</span></pre></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="c326" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">唷！</p><p id="775b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我觉得这么多理论，足够我们弄脏手了。所以做好飞行的准备吧！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/ed58d1465edffd7711cc2f14862761b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/0*wxF3wuZcLKTO7Rzm.jpg"/></div></figure><p id="0c3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://medium.com/@pankaj.panigrahi/introduction-to-elasticsearch-using-node-js-part-2-4c804427bc94" rel="noopener">在下一篇文章</a>中，我们将创建我们的索引，设置显式映射，创建自定义分析器，将文档上传到我们的索引，并在node.js中创建一个rest API，它将使用查询DSL来访问ES实例。接下来会有很多激动人心的事情。:)</p></div></div>    
</body>
</html>