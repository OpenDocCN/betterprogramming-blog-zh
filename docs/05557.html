<html>
<head>
<title>A Python Substitute? I Tried Out the Best Programming Language You’ve Never Heard Of</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python替代品？我尝试了你从未听说过的最好的编程语言</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-python-substitute-i-tried-out-the-best-programming-language-youve-never-heard-of-9e29cd1893c0?source=collection_archive---------0-----------------------#2020-07-17">https://betterprogramming.pub/a-python-substitute-i-tried-out-the-best-programming-language-youve-never-heard-of-9e29cd1893c0?source=collection_archive---------0-----------------------#2020-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4251" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">认识Nim:具有类似Python的语法和C效率的语言</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/68a6507cc867cb70c68193b8707b4d63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSyFbtX0jVbR0-MkJvVQoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">虽然很有代表性，但上面的图像仅用于说明目的，也就是说，它不是真实结果的实际图表。(图片来源:作者)</p></figure><p id="7a65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">几周前，我在浏览GitHub时，遇到了一个引起我注意的回购。它托管了一个完全用Nim编写的项目。</p><p id="8054" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lv">尼姆是什么鬼？我想。</em></p><p id="1355" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我立即得出结论，这是许多人使用的许多编程语言之一，但我只是不知道它的愚蠢的家伙。但是我没有把它放在一边，而是决定:让我们学习一下这个。</p><p id="6bb9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后我有了两个主要的认识:</p><ul class=""><li id="1f1d" class="lw lx it la b lb lc le lf lh ly ll lz lp ma lt mb mc md me bi translated">不，这种语言没有被很多人使用。</li><li id="2e30" class="lw lx it la b lb mf le mg lh mh ll mi lp mj lt mb mc md me bi translated">但也许应该是。</li></ul><p id="2889" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，这里要介绍一下我使用Nim的经历，这是一个快速编程教程，以及为什么这种语言对我来说非常有前途。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="f635" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">给我看看代码！</h1><p id="40e2" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">这是我用Nim写的一个没用的程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/ef910ab2384f985b165d8e8fee7f36ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UXahr6XASB076XXuAUKI-Q.png"/></div></div></figure><p id="a92d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看起来很干净。它也非常简单，即使你以前可能从来没有听说过Nim，你也可以毫不费力地猜出它是做什么的。(提示:它打印<code class="fe np nq nr ns b">num: 5 i: 5</code>。)</p><p id="71a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，让我们来分解一下这里看起来熟悉的东西:</p><h2 id="b6b6" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">变量声明</h2><p id="ade3" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">JavaScript开发人员对此非常熟悉。虽然有些语言使用<code class="fe np nq nr ns b">var</code>，有些使用<code class="fe np nq nr ns b">let</code>，但JS和Nim都允许使用这两种语言中的任何一种进行声明。然而，需要注意的是，它们在两种语言中的意思并不相同。但稍后会详细介绍。</p><h2 id="9087" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">块语法</h2><p id="fdee" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">为了在Nim中标记一个新的块，我们使用一个冒号后跟一个缩进行。这就是Python。</p><h2 id="7784" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">关键词</h2><p id="79fa" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">这两个循环，以及if语句，看起来就像是从Python中摘出来的。事实上，从第5行开始的所有内容实际上都是有效的Python(假设我们定义了一个<code class="fe np nq nr ns b">echo</code>函数)。</p><p id="2ff2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以是的，很多来自Python的关键字和操作符在Nim中也是有效的，比如<code class="fe np nq nr ns b">not</code>、<code class="fe np nq nr ns b">is</code>、<code class="fe np nq nr ns b">and</code>、<code class="fe np nq nr ns b">or</code>等。</p><p id="fbd6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直到现在，尼姆也没有什么特别之处。它看起来只是Python的一个糟糕版本(语法方面)，因为我们需要使用<code class="fe np nq nr ns b">let</code>或<code class="fe np nq nr ns b">var</code>。</p><p id="216a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是如果我告诉你:Nim是一种静态类型的语言，运行速度几乎和c一样快。</p><p id="d4e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">哦，现在我们在谈话。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="8582" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">友好的比赛</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/b292d2c2ccbfe2ddb7bbd50ff5db1548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdCZYq9z_CWUwMZKDZJAqA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/@victoire_jonch?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Victoire Joncheray拍摄</a></p></figure><p id="7d8d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在深入研究Nim语法之前(尤其是静态类型部分，我们还没有看到)，让我们试着支持一下关于其速度的说法。为此，我用Nim、Python和c编写了一个程序让<strong class="la iu">(即没有动态编程)</strong>计算第n个斐波那契数</p><p id="fa83" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了公平起见，我基于针对这个问题的建议的<a class="ae lu" href="https://leetcode.com/problems/fibonacci-number/solution/" rel="noopener ugc nofollow" target="_blank"> Leetcode解决方案</a>(方法1)对实现进行了标准化，并确保在三种语言中尽可能地坚持它。</p><blockquote class="og oh oi"><p id="bcee" class="ky kz lv la b lb lc ju ld le lf jx lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated"><strong class="la iu">编辑:</strong>不断有人跟我说<a class="ae lu" href="https://www.geeksforgeeks.org/python-functools-lru_cache/" rel="noopener ugc nofollow" target="_blank"> LRU缓存</a>。我意识到了。然而，所有语言的实现都可以通过记忆化来改进。这里的要点只是选择一个标准实现并使用它，而不是尽可能地优化。因此我选择了一个简单的实现。</p></blockquote><p id="fadd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了给执行计时，我使用了Bash shell中<code class="fe np nq nr ns b">time</code>输出的“真实”值。</p><p id="b0c4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是计算第40个斐波那契数的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7f2138eaa0fe0600a27a9ece20db49b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7xy8DpkPquQip0pv_ZrZHg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">十次运行的平均速度，第一次“冷”运行被丢弃(原因见<a class="ae lu" href="https://stackoverflow.com/questions/13365914/why-the-first-time-c-program-runs-it-runs-10x-slower" rel="noopener ugc nofollow" target="_blank">此</a>)。</p></figure><p id="6670" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，发生了。</p><p id="1fb0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，这是非常有限的，远非科学实验，但它与其他做过更严肃基准测试的人的发现一致<a class="ae lu" href="https://github.com/kostya/benchmarks" rel="noopener ugc nofollow" target="_blank">【1】</a><a class="ae lu" href="https://github.com/frol/completely-unscientific-benchmarks" rel="noopener ugc nofollow" target="_blank">【2】</a><a class="ae lu" href="https://github.com/the-benchmarker/web-frameworks" rel="noopener ugc nofollow" target="_blank">【3】</a>。</p><p id="cf75" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，我在本文中要运行的所有代码都可以在GitHub 上找到<a class="ae lu" href="https://github.com/yakkomajuri/fibonacci-benchmark" rel="noopener ugc nofollow" target="_blank">，包括如何进行这个实验的说明。</a></p><blockquote class="og oh oi"><p id="7282" class="ky kz lv la b lb lc ju ld le lf jx lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated">编辑:我注意到，只要给Nim编译器传递一个标志，我就可以将它的执行速度提高10倍以上。一些人做了测试，发现Nim甚至比c还要快，这是因为，正如官方文档中所述:“默认情况下，Nim编译器会生成大量的运行时检查，目的是为了让您调试起来更愉快。使用<code class="fe np nq nr ns b"><em class="it">-d:release</em></code>，一些检查<a class="ae lu" href="https://nim-lang.org/docs/nimc.html#compiler-usage-compile-time-symbols" rel="noopener ugc nofollow" target="_blank">被关闭，优化</a>被打开</p><p id="cda1" class="ky kz lv la b lb lc ju ld le lf jx lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated">为了最终的结果，图表将不会更新，但是我认为这一点很重要。更多信息参见<a class="ae lu" href="https://github.com/yakkomajuri/fibonacci-benchmark/issues/1" rel="noopener ugc nofollow" target="_blank">本期</a>。</p></blockquote><p id="1c96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那么为什么Nim比Python快那么多呢？</p><p id="9eb6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嗯，我认为有两个主要原因。简单来说，这些是:</p><ul class=""><li id="7538" class="lw lx it la b lb lc le lf lh ly ll lz lp ma lt mb mc md me bi translated">Nim是编译的，而<a class="ae lu" href="https://github.com/the-benchmarker/web-frameworks" rel="noopener ugc nofollow" target="_blank"> Python是解释的</a>(我知道这是一个争论，但我从文档中抽出来以保持简短)。这意味着当Python程序运行时，要做的工作不仅仅是运行程序，因为它需要在实际执行之前被解释。这通常会使语言速度变慢。</li><li id="00cc" class="lw lx it la b lb mf le mg lh mh ll mi lp mj lt mb mc md me bi translated">Nim是静态类型的。虽然我前面展示的例子没有单一的类型声明或注释，但我们稍后会看到它确实是一种静态类型语言。对于动态类型化的Python来说，解释器需要做更多的工作来判断和适当地处理类型，这会降低执行速度。</li></ul></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="7b81" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">跑得更快，写得更慢</h1><p id="18bf" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">以下是<a class="ae lu" href="https://docs.python.org/3/glossary.html" rel="noopener ugc nofollow" target="_blank"> Python文档</a>对解释型语言的看法:</p><blockquote class="om"><p id="c892" class="on oo it bd op oq or os ot ou ov lt dk translated">解释语言通常比编译语言有更短的开发/调试周期，尽管它们的程序通常也运行得更慢</p></blockquote><p id="7f5b" class="pw-post-body-paragraph ky kz it la b lb ow ju ld le ox jx lg lh oy lj lk ll oz ln lo lp pa lr ls lt im bi translated">例如，这句话很好地总结了Python和C之间的权衡。你可以用Python做的任何事情也可以用C来做，你的程序运行速度会快很多个数量级。</p><p id="39db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，你将花费更多的时间用C语言编写和调试你的代码，而且它会更长，可读性更差。这就是为什么C不再流行而Python如此流行的原因。简单来说:Python是“容易的”(当然是相对而言)。</p><p id="8743" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，如果Python在这个范围的一端，而C在另一端，Nim试图在中间的某个地方:有点快又有点容易？差不多吧。</p><p id="825c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，让Nim脱颖而出的是，乍一看，它似乎已经最小化了权衡。换句话说，它比Python快得多，但并不像C语言那样更难编程(或者简单看起来是这样)。</p><p id="78ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了说明这一点，让我们来看看斐波那契实验的代码。</p><p id="9382" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是C代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pb pc l"/></div></figure><p id="b2bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Python:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pb pc l"/></div></figure><p id="dc39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有尼姆:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pb pc l"/></div></figure><p id="3862" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然Nim有这个奇怪的<code class="fe np nq nr ns b">proc</code>东西，并且，亲爱的上帝，使用<code class="fe np nq nr ns b">=</code>来声明函数(或者被称为<em class="lv">过程</em>，它仍然比c干净得多</p><p id="4ab0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，也许这是一个值得的权衡？比Python难写一点，但是快几十倍——我可以接受。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="37f0" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">Nim语法</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pb pc l"/></div></figure><p id="b930" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是关于Nim语法的一些要点的简要概述:</p><h2 id="a405" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">变量</h2><p id="2ad1" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">变量用<code class="fe np nq nr ns b">var</code>、<code class="fe np nq nr ns b">let</code>或<code class="fe np nq nr ns b">const</code>声明。</p><p id="1ba6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe np nq nr ns b">var</code>和<code class="fe np nq nr ns b">const</code>的工作本质上类似于JavaScript，但是<code class="fe np nq nr ns b">let</code>是一个不同的故事。</p><p id="6dd1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然JavaScript中的<code class="fe np nq nr ns b">let</code>与<code class="fe np nq nr ns b">var</code>在作用域上有所不同，但Nim中的<code class="fe np nq nr ns b">let</code>表示一个变量，其值在初始化后不能改变。我现在被告知，这显然与Swift相似。</p><p id="7c0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但那不是一个常数吗？</p><p id="48dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在尼姆身上，区别如下:</p><p id="a94a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于<code class="fe np nq nr ns b">const</code>，编译器必须能够在编译时确定值，而<code class="fe np nq nr ns b">let</code>可以在运行时确定。</p><p id="55d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">文档提供了以下示例:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="129e" class="nt ms it ns b gy ph pi l pj pk">const input = readLine(stdin) <em class="lv"># Error: constant expression expected</em></span><span id="0157" class="nt ms it ns b gy pl pi l pj pk">let input = readLine(stdin)   <em class="lv"># works</em></span></pre><p id="41fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，您还可以像这样声明变量:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="6087" class="nt ms it ns b gy ph pi l pj pk">var<br/>    a = 1<br/>    b = 2<br/>    c = 3<br/>    x, y = 10 # Both x, y are assigned to 10</span></pre><h2 id="692c" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">功能</h2><p id="7edb" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">Nim中的函数被称为过程，它们的声明是这样完成的:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="798d" class="nt ms it ns b gy ph pi l pj pk">proc procedureName(parameterName: parameterType):returnType =<br/>    return returnVar</span></pre><p id="0d80" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">鉴于这种语言在很多方面看起来像Python，当你第一次看到过程时，它们肯定会显得有点奇怪。</p><p id="553d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用<code class="fe np nq nr ns b">=</code>代替<code class="fe np nq nr ns b">{</code>或<code class="fe np nq nr ns b">:</code>尤其奇怪。然而，它在一行程序中看起来更好一点:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="df11" class="nt ms it ns b gy ph pi l pj pk">proc hello(s: string) = echo s</span></pre><p id="5f57" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，您可以从这样的函数返回:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="2fd4" class="nt ms it ns b gy ph pi l pj pk">proc toString(x: int): string = <br/>    result = <br/>        if x &lt; 0: “negative” <br/>        elif x &gt; 0: “positive” <br/>        else: “zero”</span></pre><p id="48b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感觉还是应该做<code class="fe np nq nr ns b">return result</code>，但是<code class="fe np nq nr ns b">result</code>不是变量——是关键字。上面的片段是完全有效的尼姆。</p><p id="e0f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你也可以重载程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pb pc l"/></div></figure><h2 id="8e72" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">控制流</h2><p id="5f6e" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">很像Python。</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="53e7" class="nt ms it ns b gy ph pi l pj pk"># if true:</span><span id="2e6a" class="nt ms it ns b gy pl pi l pj pk"># while true:</span><span id="9c5f" class="nt ms it ns b gy pl pi l pj pk"># for num in nums:</span></pre><p id="9eea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于一个范围的迭代，你可以使用<code class="fe np nq nr ns b">countup(start, finish)</code>或<code class="fe np nq nr ns b">countdown(start, finish)</code>来代替一个范围。或者你可以把整个事情简化，用:<code class="fe np nq nr ns b">for i in start..finish</code>。</p><h2 id="fb2b" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">打印和获取用户输入</h2><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="fc5c" class="nt ms it ns b gy ph pi l pj pk">let input = readLine(stdin)<br/>echo input</span></pre><p id="e51d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与Python相比，<code class="fe np nq nr ns b">readLine(stdin)</code>相当于<code class="fe np nq nr ns b">input()</code>,<code class="fe np nq nr ns b">echo</code>相当于<code class="fe np nq nr ns b">print</code>。</p><p id="cc74" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe np nq nr ns b">echo</code>可以带括号也可以不带括号。</p><p id="6b65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在这里的目的是让您体验一下Nim，而不是浏览他们的整个手册。因此，我想我将在这里停下来讨论简单的语法，然后浏览一些附加的特性。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="bb65" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">附加功能</h1><h2 id="679a" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">面向对象编程</h2><p id="f737" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">Nim不是面向对象的，但是对对象有最少的支持。然而，它们不像Python类那样简洁。</p><h2 id="9671" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">宏指令</h2><p id="cc8c" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">Nim支持宏和元编程，事实上，似乎非常强调这一点。他们的三部分教程系列中有整整一部分是专门针对它的。</p><p id="e35d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一个简单的例子:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="9a56" class="nt ms it ns b gy ph pi l pj pk">import macros  </span><span id="dc1c" class="nt ms it ns b gy pl pi l pj pk">macro myMacro(arg: static[int]): untyped =   <br/>    echo arg <br/> <br/>myMacro(1 + 2 * 3)</span></pre><h2 id="e7c9" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">基本类型</h2><p id="317a" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">Nim中的基本类型有:<code class="fe np nq nr ns b">string</code>、<code class="fe np nq nr ns b">char</code>、<code class="fe np nq nr ns b">bool</code>、<code class="fe np nq nr ns b">int</code>、<code class="fe np nq nr ns b">uint</code>、<code class="fe np nq nr ns b">float</code>。</p><p id="12e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些也是有效的:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="e0ee" class="nt ms it ns b gy ph pi l pj pk">int8 int16 int32 int64 uint8 uint16 uint32 uint64 float32 float64</span></pre><p id="1041" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，与Python不同，Nim中的字符串是可变的。</p><h2 id="6a40" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">评论</h2><p id="9479" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">您可能已经在上面的Python语法中看到了我的注释，但是与Python不同，多行注释也使用散列符号(后跟<code class="fe np nq nr ns b">[</code>或<code class="fe np nq nr ns b">]</code>):</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="ef57" class="nt ms it ns b gy ph pi l pj pk"># a comment</span><span id="de55" class="nt ms it ns b gy pl pi l pj pk">#[<br/>a<br/>multi<br/>line<br/>comment<br/>]#</span></pre><h2 id="212f" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">JavaScript编译</h2><p id="90ae" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">来自Nim网站:</p><blockquote class="om"><p id="eafc" class="on oo it bd op oq or os ot ou ov lt dk translated">“Nim包括一个一流的JavaScript后端，因此您可以毫不费力地同时定位客户端和服务器。”</p></blockquote><p id="7009" class="pw-post-body-paragraph ky kz it la b lb ow ju ld le ox jx lg lh oy lj lk ll oz ln lo lp pa lr ls lt im bi translated">这很酷，尽管我不确定有多少人会真正使用它。但是如果你想<a class="ae lu" href="https://picheta.me/snake/" rel="noopener ugc nofollow" target="_blank">玩Nim </a>写的浏览器贪吃蛇，可以这么做。不过，这一次我没有建造它。</p><h2 id="0642" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">迭代器</h2><p id="f0a0" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">除了定义一个<code class="fe np nq nr ns b">proc</code>，还可以定义一个<code class="fe np nq nr ns b">iterator</code>。然而，Nim迭代器实际上更像Python生成器。这里有一个例子:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="7c18" class="nt ms it ns b gy ph pi l pj pk">iterator countup(a, b: int): int = <br/>    var res = a <br/>    while res &lt;= b: <br/>        yield res <br/>        inc(res)</span></pre><h2 id="e926" class="nt ms it bd mt nu nv dn mx nw nx dp nb lh ny nz nd ll oa ob nf lp oc od nh oe bi translated">案例和强调漠不关心</h2><p id="23bc" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">Nim不区分大小写和下划线(除了第一个字符)。</p><p id="0bbe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此<code class="fe np nq nr ns b">HelloWorld</code>和<code class="fe np nq nr ns b">helloWorld</code>是不同的，但是<code class="fe np nq nr ns b">helloWorld</code>、<code class="fe np nq nr ns b">helloworld</code>和<code class="fe np nq nr ns b">hello_world</code>都是相同的，使其有效:</p><pre class="kj kk kl km gt pd ns pe pf aw pg bi"><span id="9b16" class="nt ms it ns b gy ph pi l pj pk">proc my_func(s: string) =<br/>    echo s</span><span id="db5a" class="nt ms it ns b gy pl pi l pj pk">myFunc("hello")</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="5453" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">流行</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/424cc5ed6fc964239b73578558dc52bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fn_4-lqiguMKWTFiuFL81A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">积极的一面是，Nim在GitHub上有将近10，000颗星</p></figure><p id="472e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也许你看过标题后对自己说:<em class="lv">呃，我听说过尼姆</em>或者<em class="lv">我用过尼姆！</em></p><p id="fbe1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那样的话，嘿，我为你高兴。然而，我确实试图得到一些关于这种语言受欢迎程度的信息，它肯定没有那么高。</p><p id="c9cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，在2020年堆栈溢出调查<a class="ae lu" href="https://insights.stackoverflow.com/survey/2020" rel="noopener ugc nofollow" target="_blank">中甚至没有提到Nim。我在LinkedIn上找不到任何Nim开发人员的工作(位置设置为全球)，该语言的</a><a class="ae lu" href="https://stackoverflow.com/questions/tagged/nim-lang" rel="noopener ugc nofollow" target="_blank">堆栈溢出标签</a>只有349个问题。(相比之下，Python为150万英镑，Swift为27万英镑。)</p><p id="1562" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，假设大多数开发人员都没有使用过它，甚至很多人都没有听说过Nim这个名字是很公平的。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="dc57" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">一个真正的Python替代品？</h1><p id="4d2c" class="pw-post-body-paragraph ky kz it la b lb nj ju ld le nk jx lg lh nl lj lk ll nm ln lo lp nn lr ls lt im bi translated">老实说，我觉得尼姆很酷。</p><p id="5866" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了写这篇文章，我浏览了最低限度，所以还没有太深入，但我可以看到自己在未来使用它。</p><p id="a995" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，尽管基本语法与Python非常相似，但它很快变得更加复杂，我敢肯定这会让很多Python用户/开发人员感到困惑。</p><p id="de11" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就个人而言，我是Python的忠实粉丝，但也是静态类型语言的忠实粉丝，所以对我来说，某些情况下的性能提升会大大补偿增加的冗长。</p><p id="bbc1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，通过写这篇文章我意识到:那<a class="ae lu" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Go </a>呢？</p><p id="5408" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我相信你们中的许多人在阅读时也是这么想的，这是一个有根据的观点。尽管Nim的语法可能更接近Python的语法，但它确实在比C++语言更好的高性能语言领域竞争，目前由Go领先。</p><p id="51b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有趣的事实:我还偷偷用Go进行了速度测试。具体来说，它和c一样快。</p><p id="93f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那么，Nim能和Python抗衡吗？我非常怀疑。我们看到计算机越来越快，编程越来越容易的趋势，即使Nim提供了一个很好的折衷方案，正如我所指出的，<strong class="la iu">我认为这还不足以对付干净和通用的Python </strong>。</p><blockquote class="og oh oi"><p id="b7d7" class="ky kz lv la b lb lc ju ld le lf jx lg oj li lj lk ok lm ln lo ol lq lr ls lt im bi translated">编辑:我和一位Nim核心开发人员交谈过，他告诉我他认为Nim更适合从C++过渡的人，而不是从Python过渡的人。</p></blockquote><p id="aa92" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，它能和围棋抗衡吗？也许吧(如果谷歌没有落后于围棋的话)。语法是友好的，语言是强大的，它比Go提供了更好的对C/C++特性的支持(例如宏和重载)。</p><p id="f966" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也许这就是我接下来要调查的？</p><p id="7b2a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p><h1 id="5fb6" class="mr ms it bd mt mu pn mw mx my po na nb jz pp ka nd kc pq kd nf kf pr kg nh ni bi translated">进一步阅读</h1><ul class=""><li id="5bd2" class="lw lx it la b lb nj le nk lh ps ll pt lp pu lt mb mc md me bi translated">你正在创建一种新的编程语言——它的语法会是什么样的？</li><li id="c832" class="lw lx it la b lb mf le mg lh mh ll mi lp mj lt mb mc md me bi translated"><a class="ae lu" href="https://medium.com/swlh/sick-of-javascript-just-use-browser-python-4b9679efe08b?source=friends_link&amp;sk=40e664d45bfea34d35189c32cd5d0a51" rel="noopener">厌倦了在网络上使用Javascript？使用浏览器Python代替</a></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pv pc l"/></div></figure></div></div>    
</body>
</html>