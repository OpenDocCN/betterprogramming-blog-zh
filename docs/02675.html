<html>
<head>
<title>More JavaScript Array Tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更多JavaScript数组技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/more-javascript-array-tips-replacing-and-mapping-entries-2fb4c0b139d8?source=collection_archive---------12-----------------------#2019-12-16">https://betterprogramming.pub/more-javascript-array-tips-replacing-and-mapping-entries-2fb4c0b139d8?source=collection_archive---------12-----------------------#2019-12-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="17c2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">替换和映射条目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dba23cc2315995a37e223d97ad2e9a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HOhe_61_4CNFTiDE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jentheodore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jen Theodore </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="667b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript和其他编程语言一样，有许多方便的技巧，让我们可以更容易地编写程序。在本文中，我们将研究如何做涉及数组的不同事情，比如替换数组中的特定值，以及将数组条目从一个值映射到另一个值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d240" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">替换数组中的特定值</h1><p id="7997" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有几种方法可以替换数组中的特定值。我们可以使用<code class="fe mz na nb nc b">indexOf</code>方法获得数组的第一个匹配项，然后使用索引为数组索引中的条目分配一个新值。例如，我们可以像下面的代码一样使用<code class="fe mz na nb nc b">indexOf</code>方法:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="844f" class="nh md it nc b gy ni nj l nk nl">const arr = ['apple', 'orange', 'grape', 'banana'];<br/>const index = arr.indexOf('orange');<br/>arr[index] = 'chicken';<br/>console.log(arr);</span></pre><p id="562a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">indexOf</code>在<code class="fe mz na nb nc b">arr</code>上被调用，它接受任何我们想要获取数组中第一个索引的对象。它最适合原始值，因为它不对对象进行深度检查，所以它只通过检查对象的引用来工作。在第三行，我们重新分配了由<code class="fe mz na nb nc b">indexOf</code>方法分配的<code class="fe mz na nb nc b">index</code>的值，应该是1。然后，我们赋予它新的值<code class="fe mz na nb nc b">'chicken'</code>。然后，我们应该从最后一行的<code class="fe mz na nb nc b">console.log</code>语句中获得以下输出:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="b023" class="nh md it nc b gy ni nj l nk nl">["apple", "chicken", "grape", "banana"]</span></pre><p id="f5b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我们可以使用<code class="fe mz na nb nc b">const</code>来声明<code class="fe mz na nb nc b">arr</code>，因为我们没有给<code class="fe mz na nb nc b">arr</code>的任何属性分配任何新值，所以它不会出错。</p><p id="dd17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以使用<code class="fe mz na nb nc b">splice</code>方法来替换数组中的一个或多个值。这种方法让我们可以删除、替换现有元素或在适当的位置添加新元素。<code class="fe mz na nb nc b">splice</code>方法的参数是开始改变数组的起始索引<code class="fe mz na nb nc b">start</code>。它可以是积极的，也可以是消极的。如果它是负的，那么它将从数组的末尾开始改变数组，并向数组的开头移动。结束索引是-1，第二个是-2，依此类推。<code class="fe mz na nb nc b">splice</code>方法的第二个参数是<code class="fe mz na nb nc b">deleteCount</code>，这是一个可选参数，让我们指定从第一个元素的<code class="fe mz na nb nc b">start</code>参数开始删除多少项。后续参数是我们想要插入到数组中的项目。我们想多久就多久。只有第一个参数是必需的。</p><p id="dd4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe mz na nb nc b">splice</code>方法，首先通过获取我们想要替换的项目的索引来删除我们想要替换的条目，然后我们可以使用<code class="fe mz na nb nc b">splice</code>方法在它的位置插入一个新条目，如下面的代码所示:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="4b70" class="nh md it nc b gy ni nj l nk nl">const arr = ['apple', 'orange', 'grape', 'banana'];<br/>const index = arr.indexOf('orange');<br/>arr.splice(index, 1);<br/>arr.splice(index, 0, 'chicken');<br/>console.log(arr);</span></pre><p id="bb06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们运行上面的代码，我们应该得到与之前相同的输出:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="52da" class="nh md it nc b gy ni nj l nk nl">["apple", "chicken", "grape", "banana"]</span></pre><p id="26c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前两行与第一个示例相同。然后，我们第一次调用了<code class="fe mz na nb nc b">splice</code>方法来删除索引中的原始条目。第一个参数是我们想要移除的数组的<code class="fe mz na nb nc b">index</code>，第二个参数指定我们只移除一个条目，也就是由<code class="fe mz na nb nc b">index</code>指定的条目。然后我们再次调用<code class="fe mz na nb nc b">splice</code>来插入新的条目。我们在第二个拼接调用中再次传入<code class="fe mz na nb nc b">index</code>,因为我们想要在与原始元素相同的位置插入新元素。第二个参数是零，因为我们不想删除任何条目。然后，我们在第三个参数中传递<code class="fe mz na nb nc b">'chicken'</code>,这样我们就可以将<code class="fe mz na nb nc b">'chicken'</code>放在与<code class="fe mz na nb nc b">'orange'</code>相同的位置。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9233" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将数组条目从一个值映射到另一个值</h1><p id="4474" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我们想将数组的每个条目映射到一个新值，我们可以用几种方法来实现。我们可以使用<code class="fe mz na nb nc b">map</code>方法或<code class="fe mz na nb nc b">Array.from</code>方法来完成这项工作。<code class="fe mz na nb nc b">map</code>方法是一个数组实例方法，它接受一个最多有三个参数的回调函数。第一个参数是由<code class="fe mz na nb nc b">map</code>方法处理的数组的值。这是一个必需参数。第二个参数是可选参数，它是数组中正在处理的数组条目的<code class="fe mz na nb nc b">index</code>。第三个参数是调用<code class="fe mz na nb nc b">map</code>方法的数组。回调返回我们希望新值具有的值。</p><p id="cff1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们想把每个数组条目的一个字段放入一个新的数组，我们可以编写下面的代码:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="5706" class="nh md it nc b gy ni nj l nk nl">const arr = [{<br/>    food: 'apple',<br/>    color: 'red'<br/>  },<br/>  {<br/>    food: 'orange',<br/>    color: 'orange'<br/>  },<br/>  {<br/>    food: 'grape',<br/>    color: 'purple'<br/>  },<br/>  {<br/>    food: 'banana',<br/>    color: 'yellow'<br/>  }<br/>];<br/>const foodColors = arr.map(({<br/>  color<br/>}) =&gt; color);<br/>console.log(foodColors);</span></pre><p id="4be2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们使用了<code class="fe mz na nb nc b">map</code>方法来获取<code class="fe mz na nb nc b">color</code>字段的值，并将其放入一个新的数组中。在<code class="fe mz na nb nc b">map</code>方法中，我们用第一个参数传入一个回调函数，将<code class="fe mz na nb nc b">arr</code>数组中的对象析构到<code class="fe mz na nb nc b">color</code>变量中，在参数中检索<code class="fe mz na nb nc b">color</code>变量，然后返回它。这将使我们获得新的<code class="fe mz na nb nc b">foodColors</code>数组中每个条目的<code class="fe mz na nb nc b">color</code>字段的值。</p><p id="fc50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，我们可以使用<code class="fe mz na nb nc b">Array.from</code>方法来做同样的事情。<code class="fe mz na nb nc b">Array.from</code>方法从类似数组或其他可迭代对象创建一个新的浅复制数组实例。它接受的第一个参数是一个数组或其他类似数组或可迭代的对象，如NodeList、<code class="fe mz na nb nc b">arguments</code>、strings、TypedArrays如<code class="fe mz na nb nc b">Uinit8Array</code>、<code class="fe mz na nb nc b">Map</code>、other <code class="fe mz na nb nc b">Sets</code>以及任何其他具有<code class="fe mz na nb nc b">Symbol.iterator</code>方法的对象。第二个参数是可选的回调参数函数，我们可以用它将每个条目从一个值映射到另一个值。回调函数有两个参数，即由<code class="fe mz na nb nc b">from</code>方法处理的条目。<code class="fe mz na nb nc b">from</code>方法将遍历整个iterable对象或数组，将每个条目映射到一个新值。第二个参数是正在处理的数组或iterable的索引。它返回一个包含新条目的新数组</p><p id="3e93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以用下面的代码将<code class="fe mz na nb nc b">map</code>方法替换为<code class="fe mz na nb nc b">Array.from</code>方法:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2ba1" class="nh md it nc b gy ni nj l nk nl">const arr = [{<br/>    food: 'apple',<br/>    color: 'red'<br/>  },<br/>  {<br/>    food: 'orange',<br/>    color: 'orange'<br/>  },<br/>  {<br/>    food: 'grape',<br/>    color: 'purple'<br/>  },<br/>  {<br/>    food: 'banana',<br/>    color: 'yellow'<br/>  }<br/>];<br/>const foodColors = Array.from(arr, ({<br/>  color<br/>}) =&gt; color);<br/>console.log(foodColors);</span></pre><p id="a572" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们使用传入<code class="fe mz na nb nc b">Array.from</code>方法的回调函数来获取<code class="fe mz na nb nc b">color</code>字段的值，并将其放入一个新数组中。在<code class="fe mz na nb nc b">map</code>方法中，我们传递了一个带有第一个参数的回调函数，将<code class="fe mz na nb nc b">arr</code>数组中的对象析构到<code class="fe mz na nb nc b">color</code>变量中。在参数中检索<code class="fe mz na nb nc b">color</code>变量，然后我们返回它。这将为我们获取新的<code class="fe mz na nb nc b">foodColors</code>数组中每个条目的<code class="fe mz na nb nc b">color</code>字段的值。</p><p id="c3d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几种方法可以替换数组中的特定值。我们可以使用<code class="fe mz na nb nc b">indexOf</code>方法获取数组的第一个匹配项，然后使用索引为数组索引中的条目分配一个新值。我们还可以使用<code class="fe mz na nb nc b">splice</code>方法移除给定索引的现有条目，然后在给定相同索引的相同位置添加另一个元素。如果我们想将数组的每个条目映射到一个新值，我们可以用几种方法来实现。我们可以使用<code class="fe mz na nb nc b">map</code>方法或<code class="fe mz na nb nc b">Array.from</code>方法来完成此操作。</p></div></div>    
</body>
</html>