<html>
<head>
<title>7 Steps to Dockerize Your Angular 9 App With Nginx</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Nginx对Angular 9应用程序进行分类的7个步骤</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/7-steps-to-dockerize-your-angular-9-app-with-nginx-915f0f5acac?source=collection_archive---------2-----------------------#2020-02-17">https://betterprogramming.pub/7-steps-to-dockerize-your-angular-9-app-with-nginx-915f0f5acac?source=collection_archive---------2-----------------------#2020-02-17</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="37f9" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">在Docker环境中设置Angular 9应用程序，并立即进行部署</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/38069996978af4e4c8ebdf8a723dc5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ybCApnyoJFfRYkBEkGniUA.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">德里克·托尔萨尼在<a class="ae kz" href="https://unsplash.com/s/photos/seven?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="fc98" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本教程中，我想向你展示如何将你的Angular 9应用程序dockerize，并让它立即上线！</p><p id="7aad" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">了解Angular和Docker的一些基本知识会很有用，因为我不会深入介绍Docker和Angular 9的本质细节。</p><p id="e24a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我将向您展示一个实用的方法来将您的Angular 9应用程序dockerize，这样您就可以将它部署在您选择的web主机上。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><blockquote class="md"><p id="b9ed" class="me mf iu bd mg mh mi mj mk ml mm lv dk translated">最初发布于:<a class="ae kz" href="https://byrayray.dev/posts/2020-02-17-7-steps-to-dockerize-your-angular-9-app-with-nginx-915f0f5acac" rel="noopener ugc nofollow" target="_blank"> ByRayRay.dev </a></p></blockquote></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="9edc" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">工具作业</h1><p id="d9e2" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">在本教程中，我们将使用以下工具。如果您还没有安装它们，我将带您浏览一遍，但是如果您的机器上已经安装了它们，速度会更快。</p><ol class=""><li id="cc82" class="nk nl iu lc b ld le lg lh lj nm ln nn lr no lv np nq nr ns bi translated">节点. js</li><li id="9cc2" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated">npm或<a class="ae kz" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">纱线</a></li><li id="b266" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated">角度CLI</li><li id="8df0" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated">您选择的代码编辑器。(我倾向于Visual Studio代码。)</li><li id="311e" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated">码头工人</li></ol></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="ffe2" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">1.安装Angular CLI</h1><p id="f6d0" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">如果你还没有安装Angular CLI，我建议你安装。</p><p id="2d59" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">打开你的终端，运行<code class="fe ny nz oa ob b">npm install -g @angular/cli</code>，或者如果你使用Yarn，运行<code class="fe ny nz oa ob b">yarn global add @angular/cli</code>。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="01e0" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">2.使用CLI创建新的角度项目</h1><p id="5578" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">如果您已经创建了一个角度项目，您可以跳过这一步。</p><p id="2f76" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">运行<code class="fe ny nz oa ob b">ng new</code>命令创建一个新的Angular 9项目。请确保您回答了终端中的所有问题，因为这将使设置变得非常简单。</p><h2 id="9fa5" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">命令</h2><ul class=""><li id="9711" class="nk nl iu lc b ld nf lg ng lj oo ln op lr oq lv or nq nr ns bi translated">npm: <code class="fe ny nz oa ob b">ng new project-name</code></li><li id="0d6b" class="nk nl iu lc b ld nt lg nu lj nv ln nw lr nx lv or nq nr ns bi translated">纱线:<code class="fe ny nz oa ob b">ng new project-name --packageManager=yarn</code></li></ul><p id="9440" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了测试一切是否正常，在终端中导航到您的<code class="fe ny nz oa ob b">project-name</code>文件夹并运行<code class="fe ny nz oa ob b">ng serve</code>。当一切按预期运行时，您可以使用<a class="ae kz" href="http://localhost:4200" rel="noopener ugc nofollow" target="_blank"> localhost:4200 </a>打开您的浏览器。</p><p id="406a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当然，您将构建一个对用户非常有用的出色的角度应用程序。但是你可以以后再做。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="dae7" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">3.安装Docker</h1><p id="b322" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">当我们想要使用Docker来构建我们的Docker映像并运行我们的容器时，我们必须安装Docker。</p><p id="dbd2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你已经安装了Docker，你可以继续下一步。</p><p id="f089" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://docs.docker.com/install/" rel="noopener ugc nofollow" target="_blank">为您的平台下载安装程序</a>并运行安装程序。应该很简单。</p><p id="7c7b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要测试安装是否成功，运行命令<code class="fe ny nz oa ob b">docker -version</code>。如果你看到一个版本号，一切都好，可以进入下一步。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="23ca" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">4.创建多阶段Docker映像</h1><p id="9113" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">如果你有一点Docker的经验，你应该知道什么是Docker图像，你可以用它做什么。对于不了解的，我简单解释一下。</p><h2 id="8212" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">什么是Docker图像？</h2><p id="3999" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">Docker映像是您希望在Docker容器中运行的应用程序的蓝图。在蓝图中，您必须决定Docker需要采取什么样的步骤来构建您的应用程序、获取依赖项以及复制所需的文件。</p><p id="81e2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，使用Docker映像，您可以旋转Docker容器来运行它，并使它在浏览器中可见。</p><h2 id="015e" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">什么是Docker容器？</h2><p id="0293" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">Docker容器是一种虚拟(小型)服务器，您可以用一个命令启动、停止或删除它。Docker容器可以很容易地启动该容器的多个实例，这样您就可以在它们之间分配流量。</p><h2 id="c14f" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">让我们构建Docker图像的第一部分</h2><p id="ed72" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">创建一个文件，<code class="fe ny nz oa ob b">Dockerfile</code>，注意没有文件扩展名。(没错。)</p><p id="bf4e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，我们要告诉它，我们希望我们的图像基于哪张图像。该映像将自动安装Node.js的所有依赖项，以便在其上构建我们的Angular 9应用程序。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="3ab1" class="oc mo iu ob b gz ow ox l oy oz">FROM node:13.3.0 AS compile-image</span></pre><p id="6859" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们正在使用<code class="fe ny nz oa ob b">node:13.3.0</code>，如果你想使用另一个版本或更小的基础图像，请查看<a class="ae kz" href="https://hub.docker.com/_/node/" rel="noopener ugc nofollow" target="_blank"> Node.js Docker页面</a>。我们称这个图像为<code class="fe ny nz oa ob b">compile-image</code>，这在以后会变得很方便。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="3570" class="oc mo iu ob b gz ow ox l oy oz">RUN npm install -g yarn</span></pre><p id="d45b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下一步，我们为使用纱线的人安装纱线。如果要使用npm，可以跳过这一步。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="af90" class="oc mo iu ob b gz ow ox l oy oz">WORKDIR /opt/ng COPY .npmrc package.json yarn.lock ./</span></pre><p id="a802" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将我们的<code class="fe ny nz oa ob b">WORKDIR</code>设置为<code class="fe ny nz oa ob b">/opt/ng</code>，这样我们就知道所有内容将被复制到哪个目录下。</p><p id="b31d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于Yarn，我们像在本地计算机上一样运行<code class="fe ny nz oa ob b">yarn</code>命令。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="2da5" class="oc mo iu ob b gz ow ox l oy oz">RUN npm install</span></pre><p id="bbd7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用npm时，运行<code class="fe ny nz oa ob b">npm install</code>命令来安装所有的依赖项。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="f8f3" class="oc mo iu ob b gz ow ox l oy oz">COPY . ./ RUN ng build --prod</span></pre><p id="5ec5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">复制所有其他角度文件，以便能够运行<code class="fe ny nz oa ob b">ng build --prod</code>。建议在创建Docker映像之前在您的计算机上运行此命令，这将使您免于不断构建失败的Docker映像。</p><p id="43da" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">大部分Docker图片都会停在这里。但这会让你的Docker形象比需要的大。</p><h2 id="f9af" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">构建Docker映像的第二部分</h2><p id="258f" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">要运行我们的Angular app，我们不需要用Node.js来运行，我们可以选择一个更轻量级的变种来运行。</p><p id="b951" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Docker映像的第二个阶段从<code class="fe ny nz oa ob b">FROM</code>语句开始，在那里我们指定我们想要使用<code class="fe ny nz oa ob b">nginx</code>。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="e9bd" class="oc mo iu ob b gz ow ox l oy oz">COPY docker/nginx/default.conf /etc/nginx/conf.d/default.conf <br/>COPY --from=compile-image /opt/ng/dist/app-name /usr/share/nginx/html</span></pre><p id="a1fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第一个<code class="fe ny nz oa ob b">COPY</code>语句将<code class="fe ny nz oa ob b">default.conf</code>文件从<code class="fe ny nz oa ob b">nginx</code>基础映像复制到我们正在构建的Docker映像。</p><p id="45d4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第二个<code class="fe ny nz oa ob b">COPY</code>语句告诉它我们想要来自<code class="fe ny nz oa ob b">compile-image</code>的一些文件。因此，在水下，它已经在一个单独的Docker图像中建立了图像的第一部分。</p><p id="965a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将构建好的Angular app从<code class="fe ny nz oa ob b">compile-image</code>中的<code class="fe ny nz oa ob b">/dist</code>文件夹复制到<a class="ae kz" href="https://www.nginx.com/" rel="noopener ugc nofollow" target="_blank"> NGINX </a>的<code class="fe ny nz oa ob b">html</code>文件夹中。</p><p id="0631" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用NGINX的原因是，它将使运行Angular应用程序成为可能，而不需要大的<code class="fe ny nz oa ob b">node_modules</code>文件夹。我们只使用应用程序的文件。这将在Docker映像上节省一些字节。</p><h2 id="fe62" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">最终Docker图像</h2><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pa pb l"/></div></figure><p id="d6de" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是最终Docker图像的外观。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="9998" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">5.建立码头工人形象</h1><p id="e1ec" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">现在我们已经创建了<code class="fe ny nz oa ob b">Dockerimage</code>文件。我们准备运行命令来构建我们的映像。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="b212" class="oc mo iu ob b gz ow ox l oy oz">docker build -t angular-9-app .</span></pre><p id="87e2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当运行这个命令时，Docker将创建您的映像。这可能需要一段时间，取决于您的计算机的能力。所以，要有耐心。</p><p id="555a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当命令没有任何错误时，当它以类似这样的方式结束时，它就成功地构建了。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="08c0" class="oc mo iu ob b gz ow ox l oy oz">Successfully built 1c40cf9e92e3 <br/>Successfully tagged angular-9-app:latest</span></pre><p id="10cb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您想查看电脑上的所有Docker图像，请运行以下命令:</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="a531" class="oc mo iu ob b gz ow ox l oy oz">docker image ls</span></pre><p id="0e60" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">结果应该是类似这样的。在顶部，您会发现新创建的Docker图像带有标签、图像ID、日期和大小。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="f2de" class="oc mo iu ob b gz ow ox l oy oz">REPOSITORY     TAG     IMAGE ID      CREATED             SIZE <br/>angular-9-app  latest  1c40cf9e92e3  About a minute ago  130MB</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="1f84" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">6.使用Docker映像运行Docker容器</h1><p id="e03d" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">为了让我们的Angular应用程序运行，我们必须启动一个使用Docker图像的Docker容器。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="2bcd" class="oc mo iu ob b gz ow ox l oy oz">docker run --name ng-app-container -d -p 8080:80 angular-9-app</span></pre><p id="ec45" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当运行上面的命令时，终端将用一个ID来响应。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="6a7c" class="oc mo iu ob b gz ow ox l oy oz">8ef42069eaaf0e70aceebddcd0131c3b670464dd62cf8a78c19cb074e84ad750</span></pre><p id="544d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个ID与您的Docker容器相对应。</p><p id="df3c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们打开浏览器并启动<a class="ae kz" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>来查看我们的Angular应用程序的运行情况。</p><p id="c928" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您对Angular应用程序进行了更改，您需要创建一个新的Docker图像。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="d4cc" class="oc mo iu ob b gz ow ox l oy oz">docker container stop 8ef42 <br/>docker container rm 8ef42</span></pre><p id="5768" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用此命令停止并删除Docker容器。(如果您不知道您的Docker容器ID，请运行<code class="fe ny nz oa ob b">docker container ls</code>。)不需要长ID，只需要输入前三四个字符，就够了。</p><p id="4871" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当新的Docker映像创建后，您可以使用上面的<code class="fe ny nz oa ob b">docker run</code>命令启动一个新的Docker容器。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="8817" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">7.将Docker图像添加到GitHub</h1><p id="32de" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">现在我们已经创建了一个Docker映像，并使用它在本地计算机上的Docker容器中运行，我们已经测试过这是可行的。</p><p id="fb24" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想在你的主机上使用这个应用(它必须是一个支持Docker的主机平台，我推荐<a class="ae kz" href="https://www.digitalocean.com/" rel="noopener ugc nofollow" target="_blank"> DigitalOcean </a>)你必须将这个Docker图像存储在Docker注册表中。</p><p id="c4f9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Docker注册表是Docker映像的存储提供者。GitHub是存储私有和公共Docker图像的好方法。</p><h2 id="f133" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">登录GitHub Docker注册表</h2><p id="1823" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">在推送我们的图片之前，我们需要登录到您计算机上的Github Docker注册表。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="a55e" class="oc mo iu ob b gz ow ox l oy oz">docker login -u USERNAME -p TOKEN docker.pkg.github.com</span></pre><p id="3a3a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将<code class="fe ny nz oa ob b">USERNAME</code>替换为您的用户名，将<code class="fe ny nz oa ob b">TOKEN</code>替换为您通过<a class="ae kz" href="https://github.com/settings/tokens" rel="noopener ugc nofollow" target="_blank"> GitHub网站</a>创建的令牌。给令牌命名，选择回购、<code class="fe ny nz oa ob b">write:packages</code>、<code class="fe ny nz oa ob b">read:packages</code>和<code class="fe ny nz oa ob b">delete:packages</code>。</p><p id="62f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">复制令牌并在命令中传递它。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pc"><img src="../Images/a2d3292ba36c7c266d7848d4fd7273ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZBpq27WYMC1kOJmnAZktg.png"/></div></div></figure><p id="7276" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要推送Docker映像，您必须创建GitHub repo。如果你在GitHub上托管你的代码，你可能已经这么做了。如果你还没有，先这样做。</p><h2 id="d4ce" class="oc mo iu bd mp od oe dn mt of og dp mx lj oh oi mz ln oj ok nb lr ol om nd on bi translated">发布Docker图像</h2><p id="9372" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">我们从Angular应用程序中创建的Docker图像将被发布到注册表中。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="9322" class="oc mo iu ob b gz ow ox l oy oz">docker image ls</span></pre><p id="d9f1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了发布，我们需要知道Docker图像ID，您可以使用上面的命令找到它。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pa pb l"/></div></figure><p id="042f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在您知道了Docker图像ID，您可以用您的图像ID替换<code class="fe ny nz oa ob b">IMAGE_ID</code>。接下来，用您的信息替换URL中的所有内容。对于<code class="fe ny nz oa ob b">VERSION</code>，你可以从<code class="fe ny nz oa ob b">0.0.1</code>或者其他对你有意义的东西开始。</p><p id="5601" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当一切顺利时，在浏览器中打开你的GitHub repo。你应该看到在分支数旁边有一个包。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pd"><img src="../Images/422cdd349a5ffe9c3d14085999338647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oQdlFhZZVCJFvsK6imOBKQ.png"/></div></div></figure><p id="97c0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">单击链接并选择您的图像。这将导航到您的Docker图像页面。在此页面上，您将看到指向您的图像的链接。</p><p id="fc5b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在你可以在你的虚拟主机上使用Docker图片了。我不打算解释你如何在你的主机上安装Docker(因为有一百万种可能性)。如果你使用的是Digital Ocean，你可以手动安装或者使用市场上的<a class="ae kz" href="https://marketplace.digitalocean.com/apps/docker" rel="noopener ugc nofollow" target="_blank"> Docker安装程序</a>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="pa pb l"/></div></figure><p id="30cc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用这个命令，您可以将刚刚发布的图像拉至GitHub Docker注册表。</p><pre class="kk kl km kn gu os ob ot ou aw ov bi"><span id="6bb6" class="oc mo iu ob b gz ow ox l oy oz">docker run --name ng-app-container -d -p 8080:80 angular-9-app</span></pre><p id="c53f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当您想在容器中运行它时，您可以像以前一样运行相同的命令。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="3951" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">谢谢</h1><p id="9bf1" class="pw-post-body-paragraph la lb iu lc b ld nf jv lf lg ng jy li lj nh ll lm ln ni lp lq lr nj lt lu lv in bi translated">希望本教程能帮助您用Angular 9创建Docker映像，在Docker容器中运行它，并在GitHub Docker注册表中发布它。</p><blockquote class="md"><p id="692c" class="me mf iu bd mg mh mi mj mk ml mm lv dk translated">在这篇文章中，我要感谢弗兰克·斯皮克曼，他帮助我创建了这个快速的Docker图像设置。🙏</p></blockquote><p id="366e" class="pw-post-body-paragraph la lb iu lc b ld pe jv lf lg pf jy li lj pg ll lm ln ph lp lq lr pi lt lu lv in bi translated">如果你有任何问题，请在评论中告诉我。如果没有，编码快乐！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="056d" class="mn mo iu bd mp mq mr ms mt mu mv mw mx ka my kb mz kd na ke nb kg nc kh nd ne bi translated">阅读更多</h1><div class="pj pk gq gs pl pm"><a rel="noopener  ugc nofollow" target="_blank" href="/7-web-development-guidelines-to-speed-up-page-loading-e8f0e13a53b"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">加速页面加载的7个Web开发指南</h2><div class="pt l"><h3 class="bd b gz z fq pr fs ft ps fv fx dk translated">为了你的访问者的爱，改善用户体验</h3></div><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">better编程. pub</p></div></div><div class="pv l"><div class="pw l px py pz pv qa kt pm"/></div></div></a></div><div class="pj pk gq gs pl pm"><a href="https://medium.com/dev-together/use-cli-tools-from-mac-linux-on-windows-subsystem-for-linux-37d16f012489" rel="noopener follow" target="_blank"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">在适用于Linux的Windows子系统上使用Mac/Linux中的CLI工具</h2><div class="pt l"><h3 class="bd b gz z fq pr fs ft ps fv fx dk translated">WSL2如此强大，使得从Mac到wsl 2的转换轻而易举。</h3></div><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">medium.com</p></div></div><div class="pv l"><div class="qb l px py pz pv qa kt pm"/></div></div></a></div><div class="pj pk gq gs pl pm"><a href="https://medium.com/dev-together/3-todos-before-applying-for-a-junior-developer-job-26fc0d8ba2b9" rel="noopener follow" target="_blank"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">申请初级开发人员工作前的3件事</h2><div class="pt l"><h3 class="bd b gz z fq pr fs ft ps fv fx dk translated">我见过很多初级开发人员的求职申请。大多数申请都是出于好意…</h3></div><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">medium.com</p></div></div><div class="pv l"><div class="qc l px py pz pv qa kt pm"/></div></div></a></div><div class="pj pk gq gs pl pm"><a href="https://medium.com/better-programming/why-tutorials-wont-make-you-a-professional-developer-271108c74ddb" rel="noopener follow" target="_blank"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">为什么教程不能让你成为专业的开发者</h2><div class="pt l"><h3 class="bd b gz z fq pr fs ft ps fv fx dk translated">精通不仅仅来自于做教程。尝试，失败，学习，重复！</h3></div><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">medium.com</p></div></div><div class="pv l"><div class="qd l px py pz pv qa kt pm"/></div></div></a></div><div class="pj pk gq gs pl pm"><a href="https://medium.com/better-programming/tips-to-create-developer-tutorials-62cb3a25b8e5" rel="noopener follow" target="_blank"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">创建开发人员教程的技巧</h2><div class="pt l"><h3 class="bd b gz z fq pr fs ft ps fv fx dk translated">想写更多的教程，但你不知道从哪里开始？从这里开始</h3></div><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">medium.com</p></div></div><div class="pv l"><div class="qe l px py pz pv qa kt pm"/></div></div></a></div></div></div>    
</body>
</html>