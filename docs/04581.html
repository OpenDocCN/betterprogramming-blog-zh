<html>
<head>
<title>How to Use .reduce() in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用。JavaScript中的reduce()</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-reduce-in-javascript-8f5413f17dac?source=collection_archive---------16-----------------------#2020-04-22">https://betterprogramming.pub/how-to-use-reduce-in-javascript-8f5413f17dac?source=collection_archive---------16-----------------------#2020-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bef4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用一些本地JavaScript数组功能的概述和快速指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/79177a8f1c074cda22b6784764c3e578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U9QnXkA5IeXgDw8d"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@hafidhsatyanto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Hafidh Satyanto </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="5897" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我第一次试图弄清楚<code class="fe ls lt lu lv b">.reduce()</code>函数是做什么的时候，它困扰了我很长一段时间。出于某种原因，我就是拿不出来。现在我终于解开了这个谜，我希望我可以帮助其他人获得他们的灵光一现。让我们开始吧。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="dab9" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">这是如何？reduce()函数工作？</h1><p id="ee41" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">基本上，<code class="fe ls lt lu lv b">.reduce()</code>接受我们提供的一个reducer函数，它将针对给定数组中的每一项执行。结果将作为<code class="fe ls lt lu lv b">accumulator</code>变量传递给下一次迭代。该函数仅返回<code class="fe ls lt lu lv b">accumulator</code>变量，并将在最后一次迭代后返回。正如人们所料，该函数从左向右迭代——稍后您会明白我为什么要提到这一点。</p><p id="49ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们举下面的例子。我们有一群游客，我们想知道旅游团的平均年龄。我们可以使用传统的<code class="fe ls lt lu lv b">for</code>循环来确定这一点，如下例所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="67b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是有一种更干净的方法，它有一个额外的但经常被忽视的好处。让我们在这里使用<code class="fe ls lt lu lv b">.reduce()</code>函数来组合年龄，看看它可能是什么样子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ce34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们可以看到我们不再需要使用传统的<code class="fe ls lt lu lv b">for</code>循环。我们可以使用JavaScript本身提供的原生功能，使代码更加易读和简洁，额外的好处是我们新的<code class="fe ls lt lu lv b">combinedAges</code>变量已经被不变地创建了。</p><p id="d9f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经把旅游团的年龄减少到一个总数，我们就可以很简单地确定这个旅游团的平均年龄。唷！那很容易。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="bcdb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个简单的例子可能是我们需要将一组对象简化为一个对象的场景。我们可能不知道返回的对象的数量，或者我们可能正在构建一些配置对象，不管是哪种情况。让我们来看看这个。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="b334" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，结果将是一个组合了键的平面对象，更值得注意的是，下一次迭代的<code class="fe ls lt lu lv b">currentValue</code>覆盖了<code class="fe ls lt lu lv b">accumulator</code>的键。如果我们在数组中有未知数量的对象，我们就不能使用spread语法，这使得它成为一种可能派上用场的替代方法。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="df48" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">如果我们需要索引呢？</h1><p id="cf22" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在一些用例中，我们可能需要知道迭代的当前索引。令人欣慰的是，我们创建并传递给<code class="fe ls lt lu lv b">.reduce()</code>函数的reducer不仅仅接受两个参数；它需要四个人。</p><pre class="kg kh ki kj gt nc lv nd ne aw nf bi"><span id="6dc3" class="ng me iq lv b gy nh ni l nj nk">const fooReducer = (acc, value, index, array) =&gt; (...)</span><span id="5d06" class="ng me iq lv b gy nl ni l nj nk">const bar = [...]<br/>const value = bar.reduce(fooReducer)</span></pre><p id="f6b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个参数始终是<code class="fe ls lt lu lv b">accumulator</code>值，后跟<code class="fe ls lt lu lv b">currentValue</code>；但是，如果需要的话，我们可以传递<code class="fe ls lt lu lv b">index</code>，以及调用该函数的<code class="fe ls lt lu lv b">array</code>。</p><p id="a871" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这为我们创建和提供的reducer的逻辑提供了很大的灵活性。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="b083" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">数组不是从1开始的</h1><p id="13b5" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">实际的<code class="fe ls lt lu lv b">.reduce()</code>函数本身并不只是把我们传递给它的reducer作为参数；它也可以取初始值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="4b14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面，我们可以看到在第一次缩减中，我们没有提供任何初始的<code class="fe ls lt lu lv b">accumulator</code>值。因此，在第一次迭代中，<code class="fe ls lt lu lv b">accumulator</code>被设置为调用它的数组中的第一个值。</p><p id="4f25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第二种情况下，我们提供一个0的初始<code class="fe ls lt lu lv b">accumulator</code>值，在第一次迭代中，我们可以看到<code class="fe ls lt lu lv b">accumulator</code>实际上被设置为0。</p><p id="0e05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能是需要记住的事情，当然这取决于您的函数用例。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="6126" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">从左到右再回到左</h1><p id="7f73" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">如果您不熟悉使用<code class="fe ls lt lu lv b">.reduce</code>函数，那么您可能不知道实际上还有一个<code class="fe ls lt lu lv b">.reduceRight</code>函数。然而，这个函数的工作方式略有不同，并且在某些值的累积顺序可能很重要的用例中非常有用。</p><p id="a41d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么<code class="fe ls lt lu lv b">.reduceRight</code>和<code class="fe ls lt lu lv b">.reduce</code>功能有什么不同呢？很简单，<code class="fe ls lt lu lv b">.reduceRight</code>函数从右向左迭代，而不是从左向右迭代。它向后遍历给定的数组。</p><p id="8f1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在所有其他方面，这两个函数的表现完全相同。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/7d9d0b78507795e5346a40b1120ae835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KPdfTeHeyRcA0H8D"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马库斯·斯皮斯克在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="6dab" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">最后一个结论！</h1><p id="9bc3" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">总之，使用JavaScript的原生数组功能不仅可以使我们的代码更加简洁易读，而且还可以帮助引入对象不变性，<strong class="ky ir"> </strong>，这一点经常被忽略。</p><p id="5bae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。我希望你喜欢并学到了一些东西。如果你碰巧有任何反馈、批评或贡献，请随意写在下面的评论区。</p><p id="1048" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再见了。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="7894" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">参考</h1><p id="36b5" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">这里有一些参考资料，如果您想了解更多信息或者想在自己的代码库中实现这个原生函数(如果您还没有这样做的话),可能会引起您的兴趣。</p><p id="ec5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank"> MDN。</a> <br/>减少()<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight" rel="noopener ugc nofollow" target="_blank"> MDN。reduceRight() </a></p></div></div>    
</body>
</html>