<html>
<head>
<title>Implement SwiftUI Navigation With NavigationStack and NavigationSplitView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NavigationStack和NavigationSplitView实现SwiftUI导航</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implement-swiftui-navigation-with-navigationstack-and-navigationsplitview-d1d813a74941?source=collection_archive---------5-----------------------#2022-07-04">https://betterprogramming.pub/implement-swiftui-navigation-with-navigationstack-and-navigationsplitview-d1d813a74941?source=collection_archive---------5-----------------------#2022-07-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="23f8" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">苹果已经弃用了NavigationView，但未来已经到来</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/3571596966a28a27f8f099196c55fba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qPTvU1PDe74iwJRL.jpg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片来自<a class="ae kz" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=632394" rel="noopener ugc nofollow" target="_blank">pix abay</a>firm bee</p></figure><p id="17d4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">苹果公司已经否决了NavigationView，它以前被用作本质上是一堆视图的包装器，当呈现时被推送，当关闭时弹出。这是iOS导航从一开始就熟悉的工作方式，没有物理的后退按钮，但在顶部有一个导航栏，上面有一个后退按钮，描述“后退”在哪里。</p><p id="8d64" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有两种实现导航的新方法，但它们在iPhone上看起来非常相似，原因我将在后面讨论。</p><p id="8c88" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们开始吧！</p><h1 id="bd39" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">导航堆栈</h1><p id="5d71" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">这个应用程序从几个<code class="fe mt mu mv mw b">Hashable</code>和<code class="fe mt mu mv mw b">Identifiable</code>结构开始非常简单。</p><p id="84ce" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">存储导航状态的<code class="fe mt mu mv mw b">Screen</code>枚举是<code class="fe mt mu mv mw b">Hashable</code>是必要的，因为我稍后将使用的<code class="fe mt mu mv mw b">NavigationLink</code>的新初始化器需要它。为了成为<code class="fe mt mu mv mw b">Hashable</code>，相关值也需要成为<code class="fe mt mu mv mw b">Hashable</code>。如果它们只是一个<code class="fe mt mu mv mw b">String</code>和一个<code class="fe mt mu mv mw b">Int</code>，这仍然是正确的，但是我想利用<code class="fe mt mu mv mw b">ForEach</code>，它要求类型也是<code class="fe mt mu mv mw b">Identifiable</code>。因为原始值类型<code class="fe mt mu mv mw b">String</code>和<code class="fe mt mu mv mw b">Int</code>是可互换的，并且它们没有定义它们的唯一属性。</p><p id="5110" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我已经将数据作为两个数组添加到<code class="fe mt mu mv mw b">ContentView</code>中。</p><p id="8562" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我可以(也可能应该)使用一个<code class="fe mt mu mv mw b">ObservableObject</code>来存储数据，但是我更愿意编写更多的代码来专门演示导航。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mx my l"/></div></figure><p id="9ae2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我有数据，但没有地方显示它。</p><p id="09e9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里有一个简单的<code class="fe mt mu mv mw b">List</code>，其中一个<code class="fe mt mu mv mw b">Section</code>用于单词，另一个用于数字。</p><p id="bcc3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">每个单词和数字变成一个<code class="fe mt mu mv mw b">NavigationLink</code>，它将传递一个<code class="fe mt mu mv mw b">Screen</code>值作为<code class="fe mt mu mv mw b">navigationDestination</code>，这个值还不存在。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mx my l"/></div></figure><p id="d809" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我终于可以通过在一个<code class="fe mt mu mv mw b">NavigationStack</code>中放入一个<code class="fe mt mu mv mw b">ItemsListView</code>并添加<code class="fe mt mu mv mw b">navigationDestination</code>来完成这个应用了。这适用于任何情况下的Screen enum，所以我使用一个<code class="fe mt mu mv mw b">switch</code>来决定基于给定值做什么。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mx my l"/></div></figure><p id="1ded" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这种情况下，我在这里所做的只是显示值，但显然这些可能是完全不同的屏幕，以完全不同的方式显示数据。</p><h1 id="224d" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">导航拆分视图</h1><p id="f49c" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">iPad是使用<code class="fe mt mu mv mw b">NavigationSplitView</code>的显而易见的选择。</p><p id="18c4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">详细信息栏始终显示，即使您只有一个<code class="fe mt mu mv mw b">NavigationLink</code>。</p><p id="59e3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这意味着您所做的任何改变状态的事情，比如改变一个<code class="fe mt mu mv mw b">State</code>属性，将会更新detail列，如果它使用那个属性的话。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mz"><img src="../Images/80781a6dcd9cf3651b29cc027853b8e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rPLbGruAqP2VMVIb.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者截图</p></figure><p id="9bd9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我花了一段时间才弄明白如何让一个<code class="fe mt mu mv mw b">NavigationSplitView</code>在iPhone上工作。修改<code class="fe mt mu mv mw b">State</code>属性来设置选择项的常规<code class="fe mt mu mv mw b">Button</code>不会导致任何事情发生。</p><p id="7886" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是因为在iPhone上实际上有一个<code class="fe mt mu mv mw b">NavigationStack</code>，而在iPad上有足够的空间来放置侧边栏。</p><p id="1ee8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">换句话说，没有某种导航，细节列就无法显示。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj na"><img src="../Images/f4433c53d92901c35d9e902300d473ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/0*CA0CO4r6ya2PU0Lu.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者截图</p></figure><p id="4eac" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了解决这个问题，我使用了一个设置值的<code class="fe mt mu mv mw b">NavigationLink</code>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mx my l"/></div></figure><p id="c337" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这给了我在iPhone和iPad上想要的行为，而不需要编写特定于平台的代码。</p><p id="1c18" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读！</p><pre class="kk kl km kn gu nb mw nc nd aw ne bi"><span id="b81e" class="nf lx iu mw b gz ng nh l ni nj"><strong class="mw iv">Want Daily Coding Tips like these?</strong></span><span id="2426" class="nf lx iu mw b gz nk nh l ni nj">These tips previously appeared in my newsletter <a class="ae kz" href="https://typesafely.substack.com/" rel="noopener ugc nofollow" target="_blank">Type Safely</a>.</span></pre></div></div>    
</body>
</html>