# 今天交付更高质量代码评审的 5 个可行技巧

> 原文：<https://betterprogramming.pub/5-actionable-tips-to-deliver-higher-quality-code-reviews-today-de422cd538df>

## 明确一点

![](img/0f4ba3f6a0583cfe1de376410f826847.png)

Nubelson Fernandes 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

评审是软件开发的核心过程。它是两个目的不同的人之间的一种交流形式。与任何形式的交流一样，它们总是可以改进的，评审过程也不例外。代码提议者和代码评审者都扮演着各自的角色，但是在本文中，我们将关注评审者。

作为评审员，你有很多不同的职责。首先，你是合并请求的第一轮质量评估之一。其次，你基本上代表了团队，以确保提议的代码符合团队的标准。第三，你应该深入代码，指出潜在的错误，无论是微小的细节还是重要的代码结构。最后，你必须积极地传达你的所有反馈，并有可能跟进由此引发的任何讨论。

因为有太多的责任，作为评审者，我们很容易陷入自己的观点中，而忘记另一边的人。问题是，每种形式的交流都是双方面的。你的同事将不得不处理你的评估结果。

最终，这整个过程是一个团队的努力。在这种情况下，优化他们的工作流程也是你作为同事的工作的一部分。但是如何成为一个更好的评审者，提高代码评审的质量呢？

这篇文章将涵盖你可以做的五个具体的改进来提高你的评论的质量。反过来，这将帮助您成为更好的评审者，为您的同事提供更有意义的评审，防止不必要的讨论，并在总体上优化团队内部的评审过程。

# 提供解决方案的建议

与流行的观念相反，审查你同事的代码的目的不仅仅是为了发现和强调错误。大多数时候，开发人员会在他们认为 MR 已经完成的时候创建一个 MR。如果现在还不是这样，那么肯定应该是这样。否则，他们基本上是在浪费同事的时间，这些同事正在审查可能未完成的代码。

但是在假设 MR 的代码已经完成的情况下，仅仅指出错误对于你的同事来说通常没有太大的意义。你正在看的代码是你的同事已经选定的。除非错误非常轻微或很小，否则最有可能的原因是他们已经决定像以前那样处理它。

仅仅指出错误只会让代码提议者更加困惑。如果他们知道如何以更好的方式实现它，那么他们早就这样做了。相反，他们现在只知道这是错误的，但仍然不知道如何正确地解决它。最终，这只会在他们和你之间制造更多的来回讨论，这会消耗你们双方更多的时间和精力。

相反，提供如何解决你指出的问题的建议会彻底改变这个过程。不仅其他开发人员会确切地知道您认为他们的实现有什么问题，而且您的意图也很明显。你是最有资格解释这些意图的人。因为你是指出它的人，你也将有如何改进它的最佳想法。

在评论中提供解决方案的建议对双方都有好处。对方不一定要和你经过几次讨论才能明确你的意图。要么他们很快就能明白该做什么，要么他们能马上用有针对性的问题来回应你的建议。最后，这对他们和你来说都是一种更有效利用时间的方式。

普通的评论只告诉开发者什么是错的，更好的评论会思考并提出建议。

# 做好准备并致力于跟进

最糟糕的事情莫过于在做出评估后没有得到回应，这是双向的。您的同事已经花费了宝贵的时间来理解需求，提出解决方案，并实现一切。之后，他们还必须花时间检查你的反馈，理解它，并处理它。

对他们来说，更糟糕的感觉是，有人来了，只是指出他们 MR 中的一堆错误，给他们更多的工作，却没有明确的指示，然后就消失了。他们不仅需要你参与评审，还需要你参与与评审结果相关的所有事情:讨论、理解、处理并最终验证反馈。

反过来，当你是提议者，而他们正在审查你的工作时，你也不希望这种情况发生。作为评审者，确保你准备好并致力于跟进。无论是对您的反馈、讨论或另一个审核的回应，它们都是审核者的额外责任。即使是像竖起大拇指这样的小动作也能让世界变得不同。做好准备并致力于这些将极大地有助于提供更好的评论并成为更好的评论者。

# 明确你的意图

通过文本交流，理解上下文和情感是极其困难的。这是一个非常困难的过程，因此你尽可能清晰明了是非常重要的。通常，我们认为我们的信息、评论和反馈都非常清楚。在现实中，这种情况很少发生。就我个人而言，我从讨论的双方都感受到反馈不明确。

但是事后看来，你的意图是否被恰当地传达和接收还是相对容易的。想象一下这样的场景，你从一些反馈开始，但是反馈或对反馈的反应的意图并不完全清楚。很多时候，人们会试图通过评论来异步解决。但最终，这仍然不起作用，您决定更容易的方法是立即打电话，并以同步的方式说出来。

虽然在这种情况下，这是避免浪费更多时间的完美解决方案，但这表明之前的沟通不够清楚，已经浪费了大量时间。因为如果在此之前足够清楚明确，那么一开始就没有必要召开扩大会议。

这就是为什么你应该总是尽可能清晰明确，尤其是当你的反馈或评论中有明确的意图时。批评和指出错误是回顾过程的一部分，我并不阻止你这样做。但是不要马上假设你的反馈足够清晰，代码提议者可以跟进。

仔细检查你的评论，问问你自己，如果仅仅基于你的评论，你是否能够做到你想让他们做的事情。如果没有，添加剩余的部分。对你的推理、意图和期望要非常具体和明确。这样，您对代码提议者的帮助比您想象的要多，并且会避免双方浪费时间和精力。

# 利用虱卵

当审查某人的代码时，你会遇到很多问题。有些比其他的更相关或更重要。在某些情况下，您拒绝 MR 的原因仅由您的评估中的一小部分意见来表示，这意味着其他意见不太重要。在其他情况下，你只是想强调某件事，而不期望提议者会立即解决它。

清楚地传达这些评论的重要性(缺乏)的一个非常简单的解决方案是利用 nits。将某个东西标记为 nit 意味着您将它视为代码中的一个小缺陷。它还可以改进，但没有立即这样做的必要。要么是优先级不高，要么是个人偏好，要么是对代码影响不大。

我用来标记 nit 的最简单的方法是用“Nit:”开始你的评论，然后描述你的反馈。这不是唯一的方法，有很多不同的方法来明确地描述上述意图。不管你的方法是什么，最重要的是明确你不期望提议者一定会解决它。

你把选择权留给了代码提议者。如果他们认为包含您的 nit 反馈是值得的或相关的，那么他们被允许这样做。如果他们认为不值得或不需要花费太多精力将它包含在当前的 MR 中，那也没关系。你要让他们明白，他们可以做出最终决定，而不需要和你再来一次唇枪舌剑。

而这一切之所以成为可能，只需在你的评论中添加一个词。

# 区分必要和偏好

作为评审者，牢记您反馈背后的意图非常重要。最终，评审的目的是确保进入代码库的所有代码都具有与团队标准相匹配的质量水平。如果所提议的代码在质量上有重大或明显的缺点，那么有必要在评审期间解决这个问题。考虑主要的主题，如整体代码结构、架构和性能。

所有这些的共同点是他们的意图是确保代码符合团队的质量标准。这种意图使得反馈具有很高的优先级和重要性。

评审中包含针对所选实现或其细节的反馈是很常见的。大多数情况下，这种反馈源于评审者不同意 MR 的具体实施。这种类型的反馈的问题是，它们通常不会为评审提供任何有意义的价值。

从个人经验来说，我非常喜欢 JavaScript 中的函数数组方法，比如`Array.reduce`、`Array.filter`和`Array.map`。如果可能的话，我会一直使用它们，并且比其他实现更喜欢它们。

在过去，我对在代码审查中遇到这些替代方案非常过敏。每当我在别人的代码中遇到一个 for 循环，我会立即在我的评论中加入一条关于它的评论。主要原因是我认为代码构造丑陋、冗长，而且通常不是我喜欢的样子。

但事后来看，这种“强制偏好”的唯一作用是在我和同事之间引发了不必要的对话。讨论这两种实现是否有显著的优势，是否真的有必要，是否有什么不同，或者我的期望是什么。总的来说，所有这些讨论都是不必要的，如果我没有在评审中把我个人对代码的偏好强加给代码提议者，这些讨论都是可以避免的。

作为代码评审人员，有很多话题可以关注。显然，如果您的评估涵盖了所有这些问题，那就太好了，但最终最重要的是反馈要有意义。你应该考虑反馈是否是必要的，因而具有有意义的价值，或者它是否更具个人偏好，因而具有更小的价值或者甚至会阻碍 MR。

回顾就像这是你的代码，但接受这不是你的代码。

# 最后的想法

能够交付好的评审不仅对代码提议者有利，对代码、团队以及最终对你自己都有利。评审过程中很多时间都浪费在揣摩对方意图、等待、讨论上。最佳解决方案是避免所有这些混乱。实现这个目标的第一步是成为一个更好的评论者，并提供更高质量的评论。

为了帮助您做到这一点，本文涵盖了五个具体的技巧。首先，建议提供解决方案的建议，而不仅仅是指出错误。这对提议者来说更有意义，并且会节省你很多讨论和时间。说到时间，确保你已经做好准备，并致力于跟进代码提议者的反馈，以保持进展。没有人喜欢他们的工作被搁置两周。

让你的意图更加明确也无妨。回顾过程是一种交流方式，交流的黄金法则是:越清晰越好。为了更好地沟通，要学会利用 nits，这样提议者就知道具体的评论是否优先。最后，记得区分你的反馈是真的必要还是只是个人偏好。

如果你喜欢这篇文章，可以考虑看看我在 Medium 和我的 Twitter 上的其他编程文章。