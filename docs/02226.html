<html>
<head>
<title>Create a Swift 5 Static Library: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建Swift 5静态库:第2部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-swift-5-static-library-part-2-8bea54bb0b9e?source=collection_archive---------10-----------------------#2019-11-14">https://betterprogramming.pub/create-a-swift-5-static-library-part-2-8bea54bb0b9e?source=collection_archive---------10-----------------------#2019-11-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b0ba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们使静态库具有通用性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e16f70952df3e4596ffc800f6c6cde98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T6kGKyWZ0abGvC24"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@cgower?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯托弗·高尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">号宇宙飞船</a>上拍摄的照片</p></figure><p id="b0c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文考虑的主要思想是如何使静态库<em class="lv">通用</em>，即包含在模拟器和真实设备之间工作的二进制代码。</p><p id="7470" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要知道如何从头开始在Swift 5上创建静态库，请查看本教程的第一部分。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0f92" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">使图书馆具有普遍性</h1><p id="1154" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了遵循本文，您可以使用<a class="ae ky" href="https://medium.com/better-programming/create-swift-5-static-library-f1c7a1be3e45" rel="noopener">上一教程</a>中的最终项目，或者您可以<a class="ae ky" href="https://github.com/drrost/ios-tutorials/tree/master/201911-StaticLib-Part2-Universal/Starter" rel="noopener ugc nofollow" target="_blank">从GitHub下载</a>即用型入门项目。那里有两个项目。打开名为Networking的项目，这是我们将在本教程中用于静态库的项目。</p><h2 id="6015" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">添加新目标:聚合器</h2><p id="b3be" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，打开网络项目，并在项目导航器中单击项目名称。然后点击目标列表左下角的灰色+,添加一个新的目标，这将使我们能够在一个二进制文件中聚合两种架构的代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/5fe5fee107457e05f0e372d0e103c9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKACDQfUEvY3cIi0YOSvLg.png"/></div></div></figure><p id="cf17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您会看到一个新的弹出窗口，您需要在其中选择跨平台选项卡。然后按“聚合”。最后，按下一步。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/c028774277618a245fb96b4e11537963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNGnCbRXPR7LWE165ydnqQ.png"/></div></div></figure><p id="bbf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你想给新目标起什么名字都行。在本教程中，我们将其命名为UniversalLib，然后按“完成”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/336de97c1a8f6bd5efd10102ac446417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8iFMvm4-axRHB5nWxZ1jWg.png"/></div></div></figure><p id="83e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将在您的项目中创建一个新的目标，用于构建通用库。</p><h2 id="324c" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">创建运行脚本</h2><p id="0c98" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在目标导航器<em class="lv"> </em>中选择创建的目标(1)。</p><p id="99f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后选择构建阶段(2)。</p><p id="1315" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后按+按钮，如截图(3)所示。</p><p id="ef7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并选择新运行脚本阶段(4)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/52fcc2349337c22dcd4d8aafbae97106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMvtP47uD-vfIeMBNJo-TQ.png"/></div></div></figure><p id="324b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在出现的“运行脚本”部分，按下灰色三角形按钮(1)。然后在出现的文本视图(2)中，选择所有文本，并将其删除。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/922ae0d2de35fd4db8b04f2f4afdfd72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_1W-m0QGtYm_Yp58e3Jgw.png"/></div></div></figure><p id="a580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将此代码复制并粘贴到运行脚本的文本视图中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="16e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们讨论脚本的要点，找出它实际上是做什么的。</p><p id="3c12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第1节中，它声明了文件夹名称的变量。如果您想管理这些名字，请随意尝试。有一个<code class="fe nr ns nt nu b">LIB_NAME</code>变量有一个<code class="fe nr ns nt nu b">Networking</code>值。您可以将该值更改为您想要为库命名的任何值。</p><p id="836c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第2部分运行xcodebuild两次，第一次用于模拟器，第二次用于设备。编译后的二进制文件将被放置在相应的文件夹中，如第1节所定义。</p><p id="7eff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第3部分删除旧的构建结果，如果有的话。然后创建一个必要的文件夹，将<code class="fe nr ns nt nu b">libNetworking.a</code>文件复制到一个文件夹中，并运行<code class="fe nr ns nt nu b">lipo</code>命令。这就是本文的核心——<code class="fe nr ns nt nu b">lipo</code>创造了最终的通用二进制。然后它删除所有不必要的文件。</p><p id="89bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第4部分将两种架构的<code class="fe nr ns nt nu b">*.swiftmodule</code>和<code class="fe nr ns nt nu b">*.swiftdoc</code>文件合并到一个文件夹中。</p><p id="7b31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您不能更改此脚本中的任何内容；它应该适用于任何库项目——在另一个项目中唯一必须更改的是<code class="fe nr ns nt nu b">LIB_NAME</code>变量的值。</p><h2 id="03ae" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">建造图书馆</h2><p id="6d69" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是重要的一步。在方案选择菜单中，选择UniversalLib目标(1)，然后选择<code class="fe nr ns nt nu b">Generic iOS Device</code> (2)。</p><p id="29a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择<code class="fe nr ns nt nu b">Generic iOS device</code>是强制性的。否则，库的构建将是不正确的。你可以在<a class="ae ky" href="https://stackoverflow.com/questions/51558933/error-unable-to-load-standard-library-for-target-arm64-apple-ios10-0-simulator" rel="noopener ugc nofollow" target="_blank">这篇</a> SO帖子中找到更多相关信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/5bf5e7f7988849fa9946c4ea1116d3f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wXnh5DaStZrNHnj3HUYFVA.png"/></div></div></figure><p id="7343" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后按Cmd+B构建项目，并确保项目编译无误。</p><p id="5dc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我们在静态库项目中需要改变的全部…所以不多。在下一节中，我们将发现我们编译了什么。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="87e6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">研究通用二进制文件</h1><p id="94c8" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本节中，我们将考虑我们所创建的内容，并讨论一些细节。如果你只对教程的实践感兴趣，你可以跳过这一部分。</p><p id="83eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在项目导航器中打开产品，选择libNetworking，右键单击它，然后选择在Finder中显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/a4649508861785543d26c2c86144f368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FX67EJQp0pNDmm5dwkANJg.png"/></div></div></figure><p id="b37f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将打开一个新的finder窗口，但它将打开名为<code class="fe nr ns nt nu b">Debug-iphoneos.</code>的文件夹，其中只有移动设备的二进制文件，不包含模拟器的代码。</p><div class="kj kk kl km gt ab cb"><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/33dfcd8e3a172ce5b808f936dc9055c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*LFrZ7vQcaaFkTi9qtQuYag.png"/></div></figure><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/684e21fb98416b1d603b21139e2d7115.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*4cgs7GpJVwHJITIaO2QT2g.png"/></div></figure><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/73843d037c41fe02e7fa6dcbcc2084c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*kEiGGecyJzppz45pfVZZGw.png"/></div></figure></div><p id="976b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们比较这三个文件夹的内容，我们会发现它们都包含一个<code class="fe nr ns nt nu b">libNetworking.a</code>文件和一个<code class="fe nr ns nt nu b">Networking.swiftmodule</code>文件夹。</p><p id="870d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nr ns nt nu b">Debug-iphoneos</code>和<code class="fe nr ns nt nu b">Debug-iphonesimulator</code>文件夹包含两个平台的二进制文件，文件大小几乎相同——大约20k。但是<code class="fe nr ns nt nu b">libUniversal</code>文件夹有41k大小的二进制文件。这正是我们所需要的——它是包含两个平台的编译代码的二进制文件，我们必须复制<code class="fe nr ns nt nu b">libUniversal</code>文件夹的内容，并将其粘贴到您的项目中，以便为两个平台构建。</p><div class="kj kk kl km gt ab cb"><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a8c4abba23723fcf4afc6d5ea6054301.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*9_fVP99P_PWwMru1uFgxDA.png"/></div></figure><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/17e4734caf1207ef9c76c7fe8e4ad1df.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*5wRtCF7RzKrq3k2B5ogPZw.png"/></div></figure><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7732f43620be198ac6abcde9bc2b580a.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0Y5q76VFfSF8LdAojA9wlw.png"/></div></figure></div><p id="77da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nr ns nt nu b">Networking.swiftmodule</code>文件夹包含<code class="fe nr ns nt nu b">*.swiftmodule</code>和<code class="fe nr ns nt nu b">*.swiftdoc</code>文件，这些文件包含库的接口描述和文档(如果提供的话)。我们将编译器生成的所有文件放在一个文件夹中，并将在我们的项目中使用它们。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9154" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">集成到另一个项目</h1><h2 id="6d40" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">为集成准备项目</h2><p id="f64e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">然后从Starter文件夹中打开SimpleApplication项目。在scheme navigator中选择Generic iOS device，然后按Cmd+B构建项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/0da0f7677d90b61b4a008fbc5ff217c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LKj0vuqOQpDDWQPBcixj0g.png"/></div></div></figure><p id="1a7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该项目不会建立。相反，您会看到一个错误:</p><blockquote class="oc od oe"><p id="ce08" class="kz la lv lb b lc ld ju le lf lg jx lh of lj lk ll og ln lo lp oh lr ls lt lu im bi translated">“简单应用”的签约需要一个开发团队。在签名和功能编辑器中选择开发团队。</p></blockquote><p id="b1ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是因为为移动设备构建需要对最终应用程序的二进制文件进行签名。它与库集成过程没有直接关系，但它是在移动设备上运行应用程序的必要步骤。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/3e6bc94936021ab7cda86bc9d3f0c247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4L3EvHNqWWTCYWXrnuwFQw.png"/></div></div></figure><p id="11e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">签署应用程序是一个庞大而复杂的过程，有很多可能的情况，在本教程中，我们不打算深入探讨。</p><p id="984d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果需要，您可以自己研究这个过程—我们假设您熟悉这个过程，并将演示签署您的应用程序的最简单方法。这意味着你有一个设置和有效的苹果开发者帐户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/6d32e1e9d488cb6589c55ff6efc21442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21_WZZQBkIoaxHUHJgIxzQ.png"/></div></div></figure><p id="d3ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在项目导航器<em class="lv"> </em> (1)中选择项目，然后为您想要构建的应用程序选择目标(2)。</p><p id="95a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后选择签名和功能选项卡(3)。</p><p id="4523" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选中“自动管理签名”(4)，并选择一个有效的团队(5)。</p><p id="d3d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后尝试再次按下Cmd-B来构建。结果，您将看到另一个错误:</p><blockquote class="oc od oe"><p id="1715" class="kz la lv lb b lc ld ju le lf lg jx lh of lj lk ll og ln lo lp oh lr ls lt lu im bi translated">找不到目标“arm64-apple-ios”的模块“Networking”；找到:x86_64-apple-ios-simulator，x86_64</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/cebe296b935ee892d6efffeed1cac907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4vtZSBVDv4Lou_3FSspmg.png"/></div></div></figure><p id="d0ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是完全可以预见的，因为我们还没有为静态库添加合适的二进制文件。所以现在我们准备更新库的二进制文件。</p><h2 id="cd47" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">更新库的文件</h2><p id="882b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在SimpleApplication项目中，打开项目vavigator，找到我们在之前的教程中构建的<code class="fe nr ns nt nu b">lib</code>文件夹(它包含仅用于模拟器的二进制文件)，并删除它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/05d0b8381afbb52f05aeafb6b745d3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aparMtZ-HpKKG3yiz9jUJw.png"/></div></div></figure><p id="e6f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在出现的窗口中按“移到废纸篓”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/0d98c278b5666139784b541415c0feab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xUyChS5b_shjS69VHqgoVw.png"/></div></div></figure><p id="061f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在项目导航器中选择项目文件。右键单击它，然后选择在Finder中显示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/0ebc0afccc65adb82fb61ff1aeb6c594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JrT3DpjRuEj4_9mlnFa9A.png"/></div></div></figure><p id="5d51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到<code class="fe nr ns nt nu b">lib</code>文件夹，并删除那里的所有文件(如果有的话)。</p><p id="68e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后回到网络项目，选择<code class="fe nr ns nt nu b">libNetworking.a</code>，在Finder中按Show。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/a4649508861785543d26c2c86144f368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FX67EJQp0pNDmm5dwkANJg.png"/></div></div></figure><p id="545a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到包含通用二进制文件和<code class="fe nr ns nt nu b">Networking.swiftmodule</code>文件夹的文件夹。将它们拖放到<code class="fe nr ns nt nu b">SimpleApplication/lib</code>文件夹:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/f7e367788e02694b7e34e208b5b75256.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k9U6tVGo1QzDS3AvDvgKCg.png"/></div></div></figure><p id="0103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保你是从<code class="fe nr ns nt nu b">libUniversal</code>文件夹中，而不是从<code class="fe nr ns nt nu b">Debug-iphoneos</code>或<code class="fe nr ns nt nu b">Debug-iphonesimulator</code>中拖动文件。</p><p id="b676" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后再次打开<code class="fe nr ns nt nu b">SimpleApplication</code>项目。在项目导航器中选择项目文件。右键单击，并选择将文件添加到“简单应用程序”…:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/a9bd9707eaac5c154c744876f66f2687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rE1nRyeKiW60_Fj73B5tmQ.png"/></div></div></figure><p id="be46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在出现的窗口中，选择<code class="fe nr ns nt nu b">lib</code>文件夹，并按添加:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/558c64a3cb59c73308394eec4716ffae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YEiPe_frTlqIBLP3nSZVbA.png"/></div></div></figure><p id="a5ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按下Cmd-opt-shift-K来清理项目。然后，按Cmd-B，构建应该会成功。</p><p id="e62a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在真实设备或模拟器上运行应用程序，以确保它正常工作。在Xcode的输出中，我们应该会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/50fe3f5744bb6670bc2883f1ec88ec2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wP26UWxR188KVqZXi9HxiQ.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="768f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="eb75" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本文中，我们做了并考虑了几件事，即:</p><ul class=""><li id="e8ec" class="om on it lb b lc ld lf lg li oo lm op lq oq lu or os ot ou bi translated">为用Swift编写的静态库创建了一个通用二进制文件</li><li id="7935" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">被认为是可以在任何项目中轻松重用的构建脚本</li><li id="e83d" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">将通用库集成到另一个项目中，并在模拟器和移动设备上运行</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6aa2" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">下一步是什么？</h1><p id="88ce" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">尽管我们创建了一个静态库，并使其代码可用于其他应用程序，但仍有很大的改进空间:</p><h2 id="79fa" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">自动化</h2><p id="2d29" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">可以自动复制/粘贴库的二进制文件。要做到这一点，应该对运行脚本稍加修改，并且还需要对环境进行一些更改。</p><h2 id="a65a" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">单元测试</h2><p id="e654" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">模块化最重要的优势之一是隔离和依赖性制动。它为单元测试和集成测试奠定了良好的基础。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="adfb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">参考</h1><ul class=""><li id="392a" class="om on it lb b lc mv lf mw li pa lm pb lq pc lu or os ot ou bi translated">https://GitHub . com/drrost/IOs-tutorials/tree/master/201911-static libp 2—GitHub上的完整代码版本，您可以下载并研究</li><li id="8b80" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated"><a class="ae ky" href="https://medium.com/better-programming/create-swift-5-static-library-f1c7a1be3e45" rel="noopener">https://medium . com/better-programming/create-swift-5-static-library-f1 c 7 a1 be 3 e 45</a>—本教程第1部分</li><li id="a284" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/51558933/error-unable-to-load-standard-library-for-target-arm64-apple-ios10-0-simulator" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/51558933/error-unable-load-standard-library-for-target-arm 64-apple-IOs 10-0-simulator</a></li><li id="aa11" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated"><a class="ae ky" href="https://github.com/apple/swift/blob/master/docs/Serialization.rst" rel="noopener ugc nofollow" target="_blank">https://github . com/apple/swift/blob/master/docs/serialization . rst</a>—一个Swift文档，它揭示了<code class="fe nr ns nt nu b">*.swiftmodule</code>和<code class="fe nr ns nt nu b">*.swiftdoc</code>文件</li></ul></div></div>    
</body>
</html>