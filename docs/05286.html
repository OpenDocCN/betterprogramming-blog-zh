<html>
<head>
<title>Add Multilanguage Support to Your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向React应用程序添加多语言支持</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/add-multi-language-support-in-react-js-a771c9ab31c3?source=collection_archive---------0-----------------------#2020-06-26">https://betterprogramming.pub/add-multi-language-support-in-react-js-a771c9ab31c3?source=collection_archive---------0-----------------------#2020-06-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ee0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何让您的React应用国际化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6ce271994c9520a2d28c4a3a04ed5bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-zOVs7OADfdJdvZclSvZQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://www.youtube.com/watch?v=PM3SrgdYvrw" rel="noopener ugc nofollow" target="_blank"> Chigabiga </a>通过<a class="ae ky" href="https://undraw.co/illustrations" rel="noopener ugc nofollow" target="_blank"> unDraw </a>拍摄的图像</p></figure><p id="755a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从Angular转向React，并且已经在这上面花了很长时间。我喜欢React每天都在发展，并且正在成为UI开发的强大库。</p><p id="92cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数开发人员更喜欢React进行前端开发。比较简单，容易掌握。其性能；虚拟DOM和灵活、基于组件的方法使它与众不同。我在React工作时参与了多个项目。其中一个项目需要多种语言的国际化特性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b364" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">react-i18接下来</h1><p id="633a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我碰到了国际化的i18next框架，它是用JavaScript写的。它为您的产品本地化提供了完整的解决方案。</p><p id="ac79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了在React中添加国际化，我们在i18next的基础上使用了<a class="ae ky" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank">React-i18 next</a><strong class="lb iu"><em class="mz"/></strong>。该模块提供了多个组件，用于在语言发生变化时呈现内容翻译。</p><p id="da34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在任何UI框架上使用它(Angular，React，Vue等。)以及服务器端(例如Node.js)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="df97" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">简单演示</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/c70f2173d0e9336e612ca68a067f1154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/1*sY-MC2J6-SJDg3sOvTNL3Q.gif"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7ce2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">React中的实现</h1><p id="cd3b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先你要通过npm或者yarn安装i18next:</p><p id="7472" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">npm install react-i18next i18next — save</code></p><p id="6bb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">npm install i18next-http-backend i18next-browser-languagedetector — save</code></p><p id="9dfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过<code class="fe nb nc nd ne b">http-backend</code>和<code class="fe nb nc nd ne b">browser-languagedetector</code>，它将检测用户语言并加载翻译。</p><p id="b30c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装后，您必须在<code class="fe nb nc nd ne b">index.js</code>旁边创建一个<code class="fe nb nc nd ne b">i18nextConf.js</code>文件，以便添加i18next的配置，它将检测并加载翻译内容。</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="a2fa" class="nj md it ne b gy nk nl l nm nn">import <strong class="ne iu"><em class="mz">i18n </em></strong>from 'i18next';<br/>import { <strong class="ne iu"><em class="mz">initReactI18next </em></strong>} from 'react-i18next';<br/>import Backend from 'i18next-xhr-backend';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/><br/>const fallbackLng = ['en'];<br/>const availableLanguages = ['en', 'ar', 'fr'];<br/><br/><strong class="ne iu"><em class="mz">i18n<br/>  </em></strong>.use(Backend) // load translations using http (default                                               public/assets/locals/en/translations)<br/>  .use(LanguageDetector) // detect user language<br/>  .use(<strong class="ne iu"><em class="mz">initReactI18next</em></strong>) // pass the i18n instance to react-i18next.<br/>  .init({<br/>    fallbackLng, // fallback language is english.<br/><br/>    detection: {<br/>      checkWhitelist: true, // options for language detection<br/>    },<br/><br/>    debug: false,<br/><br/>    whitelist: availableLanguages,<br/><br/>    interpolation: {<br/>      escapeValue: false, // no need for react. it escapes by default<br/>    },<br/>  });<br/><br/>export default <strong class="ne iu"><em class="mz">i18n</em></strong>;</span></pre><p id="8da7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将这些配置导入到您的<code class="fe nb nc nd ne b">index.js</code>文件中。</p><p id="6663" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">import ‘./i18nextConf’;</code></p><p id="b79e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个初始化，您现在可以使用下拉菜单、单选按钮或其他任何可以用来转换多种语言并相应地更改翻译的东西。为了改变语言，我们使用<code class="fe nb nc nd ne b">i18next.changeLanguage(‘en’)</code> ( <code class="fe nb nc nd ne b">‘en’</code>只是一个例子)和<code class="fe nb nc nd ne b">onClick()</code>来改变基于选择的语言。</p><p id="6a16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以通过选择的语言将方向设置为从右向左。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cce9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用</h1><p id="7149" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在功能组件中，您可以使用<code class="fe nb nc nd ne b">useTranslation</code>钩子来翻译您的内容。</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="9c9f" class="nj md it ne b gy nk nl l nm nn">import { useTranslation } from 'react-i18next';<br/><br/>function MyComponent() {<br/>  const { t } = useTranslation();</span><span id="a923" class="nj md it ne b gy no nl l nm nn">// this_is_an_example is the key against translation in locales/en/translation.json file.</span><span id="dcb1" class="nj md it ne b gy no nl l nm nn">  return &lt;h1&gt;{t('this_is_an_example')}&lt;/h1&gt; <br/>}</span></pre><p id="2119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在类组件中，您可以使用<code class="fe nb nc nd ne b">withTranslation</code> HOC来翻译您的内容。</p><pre class="kj kk kl km gt nf ne ng nh aw ni bi"><span id="50d5" class="nj md it ne b gy nk nl l nm nn">import { withTranslation } from 'react-i18next';</span><span id="15c7" class="nj md it ne b gy no nl l nm nn">class MyComponent extends Component {<br/>render() {<br/>  const {t} = this.props<br/>     return (&lt;h1&gt;{t('this_is_an_example')}&lt;/h1&gt;)<br/>   }<br/>}<br/>export default withTranslation()(MyComponent)</span></pre><p id="0f67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在CodeSandbox上创建了示例代码，以帮助您了解支持多语言的react-i18next实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="7317" class="nj md it bd me nr ns dn mi nt nu dp mm li nv nw mo lm nx ny mq lq nz oa ms ob bi translated">优势</h2><ul class=""><li id="0781" class="oc od it lb b lc mu lf mv li oe lm of lq og lu oh oi oj ok bi translated">检测用户语言的插件</li><li id="5c2b" class="oc od it lb b lc ol lf om li on lm oo lq op lu oh oi oj ok bi translated">加载翻译</li><li id="0d36" class="oc od it lb b lc ol lf om li on lm oo lq op lu oh oi oj ok bi translated">可选地缓存翻译</li><li id="8e6a" class="oc od it lb b lc ol lf om li on lm oo lq op lu oh oi oj ok bi translated">支持多种翻译的项目的可伸缩性</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0c4d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="32a5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">i18next是一个强大且可扩展的国际化框架。它对大型和小型项目都很灵活。上面的文章是它在React.js中的实现。</p><p id="7ccc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我的观点。希望有帮助。</p><p id="45b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="27a2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">参考</h1><ul class=""><li id="fea8" class="oc od it lb b lc mu lf mv li oe lm of lq og lu oh oi oj ok bi translated"><a class="ae ky" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank">react-i18下一篇文档</a></li></ul></div></div>    
</body>
</html>