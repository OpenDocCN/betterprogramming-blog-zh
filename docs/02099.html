<html>
<head>
<title>A Real-World Example of Go Interfaces</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go接口的真实例子</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-real-world-example-of-go-interfaces-98e89b2ddb67?source=collection_archive---------5-----------------------#2019-11-06">https://betterprogramming.pub/a-real-world-example-of-go-interfaces-98e89b2ddb67?source=collection_archive---------5-----------------------#2019-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="14eb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何实现Go接口以及为什么它们如此棒</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b3ed7ec280c708b296c7b29acc417639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E8dtcW7fEoJc7qw20_rTKg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@seanlimm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Sean Lim </a>在<a class="ae ky" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2b10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我正在用Go构建一个web应用。在我的应用程序中，我想向我的用户发送一条消息。我可以通过电子邮件或短信向用户发送消息。这将是一个完美的接口用例。</p><p id="99a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个假设的web应用程序，我创建了下面的<code class="fe lv lw lx ly b">main.go</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="6225" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">User</code>结构代表一个用户。</p><p id="1ed6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到我创建了一个<code class="fe lv lw lx ly b">interface</code>类型的<code class="fe lv lw lx ly b">UserNotifier</code>，它只有一个功能:<code class="fe lv lw lx ly b">SendMessage()</code>。</p><p id="5059" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现这个接口，我必须创建一个实现<code class="fe lv lw lx ly b">SendMessage()</code>功能的<code class="fe lv lw lx ly b">struct</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="012d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，我创建了一个新的<code class="fe lv lw lx ly b">EmailNotifier</code>结构。然后我在struct上实现了<code class="fe lv lw lx ly b">SendMessage()</code>方法。注意，在这个例子中，<code class="fe lv lw lx ly b">EmailNotifier</code>只是打印一条消息。在现实世界中，你可能会调用电子邮件API，比如<a class="ae ky" href="https://www.mailgun.com/" rel="noopener ugc nofollow" target="_blank"> Mailgun </a>。</p><p id="d527" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，接口现在实现了。</p><p id="3960" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来要做的是使用<code class="fe lv lw lx ly b">UserNotifier</code>接口给用户发送一封电子邮件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="7562" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行该程序时，<code class="fe lv lw lx ly b">EmailNotifier</code>的<code class="fe lv lw lx ly b">SendMessage()</code>被正确调用。</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="e215" class="mf mg it ly b gy mh mi l mj mk">go build -o main main.go<br/>./main<br/>Welcome Dirk<br/>Sending email to Dirk with content Interfaces all the way!</span></pre></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="dd85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也实现一个SMS接口。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="18aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个很酷的特性是我们可以将通知存储在用户结构中。这样，每个用户都会有一个个人通知。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="d742" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您可以向使用<code class="fe lv lw lx ly b">UserNotifier</code>接口通知用户的<code class="fe lv lw lx ly b">User</code>结构添加一个方便的方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="4956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我在<code class="fe lv lw lx ly b">main()</code>函数中创建了两个用户，并调用了<code class="fe lv lw lx ly b">notify()</code>方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="d6a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终结果如预期般奏效。</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="18e4" class="mf mg it ly b gy mh mi l mj mk">go build -o main main.go<br/>./main<br/>Sending email to Dirk with content Welcome Email user!<br/>Sending SMS to Justin with content Welcome SMS user!</span></pre></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="3fb9" class="ms mg it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="5203" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">这是我展示Go接口如何工作，在现实世界中如何有用，同时保持简单的机会。</p><p id="ee4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望这对某些人有用！</p></div></div>    
</body>
</html>