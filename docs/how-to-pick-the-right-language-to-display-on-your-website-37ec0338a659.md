# 如何选择合适的语言显示在你的网站上

> 原文：<https://betterprogramming.pub/how-to-pick-the-right-language-to-display-on-your-website-37ec0338a659>

## 为什么 IP 地理定位不好，以及为用户选择正确语言的更好策略

![](img/ebbe1bbec43145e742dc3953728780ef.png)

照片由[凯蒂·曼宁](https://unsplash.com/@kmanni?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 拍摄

网络本地化有时会令人沮丧。可悲的是，这是一个你只有在旅行、生活在国外或生活在多语言国家时才会遇到的问题。这涵盖了很多人，但不一定是负责 web 项目的人。

似乎默认的选择是根据用户所在的国家选择语言，而这又是根据他们的 IP 地址。尽管如果你是住在帕洛阿尔托的说英语的人，这种方法行得通，但在很多其他情况下，这种方法会惨败。

事实上，它依赖于这样一个假设，即一个国家有一种语言，并且这个国家的所有人都把这种语言作为他们的主要语言(或者根本没有)。这是完全错误的。例如，在美国，只有大约 80%的人口使用英语作为他们的第一语言，而大约 13%的人口使用西班牙语。在比利时，我们有三种官方语言，即荷兰语(占人口的 55%)、法语(38%)和德语(0.4%)。

默认选项不仅给出了错误的答案，而且过于复杂。为了实现它，您可能必须集成一个外部 API，使您的应用程序比它必须的更复杂，并且可能响应性更差。所有这些都是次优的解决方案。

# HTTP 已经覆盖了你

HTTP 协议为该特定目的指定了报头`Accept-Language`。对于每个请求，浏览器都会发送一个语言列表，其中包含代表用户偏好的可选权重。

下面是 MDN 的文档中的一些例子:

```
Accept-Language: de
Accept-Language: de-CH
Accept-Language: en-US,en;q=0.5
```

默认情况下，浏览器发送其图形界面的语言，这很可能是用户的首选语言。

但是，这不是灵丹妙药，在这种特殊情况下，当我们没有其他方法知道用户的偏好时，应该把它作为最后的手段。例如，我的浏览器是英文的，但当我登录比利时税务网站时，我更愿意看到法语(我的母语)的网站。

那么，我们还能如何知道选择哪种语言呢？

# 显性和隐性选择

当然，如果用户通过在菜单中选择一种语言或者在他们登录后的设置中选择一种语言，那么这必须是显示给他们的语言。但也有隐性选择。

大多数时候，流量来自其他地方，而不是让访问者在地址栏中键入 URL。这可以为您提供用户偏好的语言的线索。如果我用谷歌搜索某个东西，看到的是英文结果，我想在点击链接时看到英文版本。

一些网站将语言隐藏在 cookie 或会话中。最好直接放在网址里。这样，任何链接都已经包含了一个隐式选择。搜索结果会指向正确的版本，社交媒体或任何其他页面上的链接也会如此。

# 后备策略

好吧，但也许有人真的在地址栏中输入了域名，并更改了浏览器的设置以发送`Accept-Language: *`或类似的内容。那你会怎么做？

根据 IP 地理位置进行猜测可能很诱人，但是还有另一个非常简单的解决方案。这么简单明了，事实上，我不明白为什么更多的网站不用它。

随便问问。

您可能不知道用户说的是什么语言，也可能猜不出来，但是用户知道。

经历了这一切，还是有可能你做了错误的选择。让用户可以轻松地更改语言。很难找到语言菜单的网站并不少见。大多数情况下，这是因为菜单是用当前语言(用户可能不会说)编写的，没有任何视觉提示。使用每个人都能理解的旗帜或图标。

总之，一种更合理的选择语言的方式是这样的:

*   如果用户做出了另一个明确的选择，就使用它。尝试将该语言放在任何可能被搜索引擎索引或共享的页面的 URL 中。
*   如果有一个隐含的选择—例如，从 URL —使用该语言。
*   否则，使用`Accept-Language`。
*   如果这些都不行，就去问用户。

如果你喜欢这样的故事，可以考虑成为[媒体](https://tomferon.medium.com/membership)和/或[订阅](https://tomferon.medium.com/subscribe)的会员。

## 进一步阅读

*   美国人口普查局在家里说的语言
*   [欧洲人和他们的语言](https://ec.europa.eu/commfrontoffice/publicopinion/archives/ebs/ebs_386_en.pdf)，欧洲委员会(PDF)
*   [接受语言](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language)，MDN 网络文档