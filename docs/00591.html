<html>
<head>
<title>Demystifying React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭秘React挂钩</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/demystifying-react-hooks-a0b56a6254c2?source=collection_archive---------0-----------------------#2019-06-16">https://betterprogramming.pub/demystifying-react-hooks-a0b56a6254c2?source=collection_archive---------0-----------------------#2019-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc00" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">钩子如何节省你的时间并提高你代码库的质量</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8fcda331f5032cbed20a9b1d538fa255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8oPaqO0UKS-dxqN_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@anaya_katlego?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安纳亚·卡特莱戈</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8f12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能听说过React的最新功能:钩子。React版本16.8中发布了钩子，它们让我们不用使用类语法就能编写有状态的组件。</p><p id="f05e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想了解更多关于钩子的知识，这个指南是一个温和的介绍。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/e7a92fd2bd34727b7aa45623982e0051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgfLNUe3cwpqeE2YaGwCwg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React钩子是什么样子的(后面解码)</p></figure><p id="e881" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，很难在类组件之间重用状态、逻辑和功能。你要么传递道具，要么使用渲染道具，这就导致了<em class="lw"> (a) </em>巨大的组件、<em class="lw"> (b) </em>组件间重复的代码，或者<em class="lw"> (c) </em>像高阶组件这样的复杂模式的问题。</p><blockquote class="lx ly lz"><p id="9f6a" class="kz la lw lb b lc ld ju le lf lg jx lh ma lj lk ll mb ln lo lp mc lr ls lt lu im bi translated">如果你是React新手，我建议你阅读“<a class="ae ky" href="https://amzn.to/2GAxiBW" rel="noopener ugc nofollow" target="_blank"><em class="it">React学习之路:你掌握简单而实用React.js </em> </a>”来开始使用React。</p></blockquote><p id="c11e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">钩子在组件内部应用React哲学(显式数据流和组合)<em class="lw">，而不仅仅是在组件之间。</em></p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="6acc" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">将React组件从类重构为钩子</h1><p id="32d4" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">请记住，钩子仍然是相对较新的东西，没有人希望你只使用钩子来重构你的应用程序。但是尝试一些新的东西并改善代码库的整体结构和质量并没有坏处。</p><p id="dd15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下面的React类组件为例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="db4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该组件有三个职责:</p><ul class=""><li id="379e" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">保存搜索状态</li><li id="6af2" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">更改搜索状态</li><li id="1e8f" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">呈现搜索用户界面</li></ul><p id="050b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个组件没有什么令人兴奋的地方，但是总有改进的方法。你如何通过使用钩子来改进组件？</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="c7c2" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">钩子来拯救</h1><p id="320c" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">让我们把同一个类组件变成基于钩子的组件。我们不会改变搜索本身的任何功能，只是将代码从类重构为钩子语法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="cf74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哇哦。我们从29行代码变成了17行代码。如果我的数学没有让我不及格，那我们要写的代码量就大大减少了41.3%。</p><p id="b3f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们可以为每个组件节省41.3%的时间，在纸上，我们可以用几乎一半的时间编写我们的应用程序。将我们编写应用程序所需的时间减少一半过于乐观，但这是可能发生的。只有时间能证明一切。</p><p id="ed17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变化是生活中唯一不变的东西，所以让我们来揭开钩子如何工作的神秘面纱。</p><p id="f770" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要做的第一件事是从React包中导入<code class="fe nx ny nz oa b">useState</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="bd44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用钩子定义我们的状态如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d0fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可能会让你一时糊涂。我知道这让我很困惑。数组括号在那里做什么？</p><p id="8fcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数组括号语法称为<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">数组解构赋值</a>。</p><p id="52c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">析构赋值语法是一个JavaScript表达式，它可以将数组中的值(或对象中的属性)解包到不同的变量中。</p><p id="ee9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">析构赋值使用赋值的左边来定义从源变量中解包什么值。这里有一个例子来说明:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="864d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nx ny nz oa b">searchFieldValue</code>是第一个值，是初始状态。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3f09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个参数<code class="fe nx ny nz oa b">handleSearchFieldChange</code>，只是一个函数，允许我们根据作为参数传递的内容来改变<code class="fe nx ny nz oa b">searchFieldValue</code>状态。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7f20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让大家明白这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e779" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们开始吧。每当我们拥有有状态组件时，我们不再有义务使用基于类的语法。</p><p id="85fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是如何用React钩子创建搜索组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="5288" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">我应该使用钩子、类还是两者的混合？</h1><p id="fa72" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">官方反应文件很好地解决了这个问题。</p><p id="b8de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你准备好了，我会鼓励你开始尝试你写的新组件。确保团队中的每个人都在使用它们，并且熟悉这些文档。我不建议把你现有的类重写到钩子上，除非你打算重写它们(比如修复bug)。</p><p id="e012" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">举个例子，我们有一个开关。通过点击标签，我们触发了相对于当前状态的从假到真，或从真到假的状态变化。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e1b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意如何将任何值或类型传递给<code class="fe nx ny nz oa b">useState()</code>——我们传递一个布尔值作为初始状态。你甚至可以传递一个对象、数组或数字，就像使用<code class="fe nx ny nz oa b">setState({})</code>一样。</p><p id="d83c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在去玩React钩子吧！从小处着手，用钩子创建几个组件。</p><p id="88e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">玩现场版<a class="ae ky" href="https://bhgyo.codesandbox.io/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><div class="ob oc gp gr od oe"><a href="https://bhgyo.codesandbox.io/" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">用钩子做出反应</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">与Indrek Lasn bhgyo.codesandbox.io挂钩</h3></div></div></div></a></div></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="4692" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">从这里去哪里</h1><p id="ae21" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我建议阅读React官方文档。还有很多React钩子等着被发现。在学习React方面，也有一些有用的书籍。我建议通读“<a class="ae ky" href="https://amzn.to/2Yz8Lr5" rel="noopener ugc nofollow" target="_blank"> <em class="lw">学习React之路:你掌握简单而实用React.js </em> </a>”来了解更多关于React的知识。</p><div class="ob oc gp gr od oe"><a href="https://reactjs.org/docs/hooks-reference.html" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">钩子API参考-反应</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">钩子是React 16.8中的新增功能。它们允许您使用状态和其他React特性，而无需编写类。这个…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">reactjs.org</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div></div></div>    
</body>
</html>