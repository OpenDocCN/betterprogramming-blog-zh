<html>
<head>
<title>Exploring the Coinbase API From a Web2 Starting Point</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Web2的起点探索比特币基地API</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/exploring-the-coinbase-api-from-a-web2-starting-point-f1232e84777c?source=collection_archive---------12-----------------------#2022-09-20">https://betterprogramming.pub/exploring-the-coinbase-api-from-a-web2-starting-point-f1232e84777c?source=collection_archive---------12-----------------------#2022-09-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e3fe" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不知道从哪里开始使用Web3？开始使用比特币基地开发者工具</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9ad7ffdd534ab75db8997e6b4abc72c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sdIsdzEwjJk49k8P61y23w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://pixabay.com/illustrations/loveourplanet-earth-peaceful-4851331/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="b6ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1977年，在看过电影《星球大战》后，我心中那个有抱负的音乐家想学钢琴。我的目标是学习如何演奏大家都在谈论的电影的主旋律，所以我买了乐谱。我们家有一架钢琴，是我祖父母送的礼物。</p><p id="a04e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我看到页面上所有的注释时，10岁版本的我很快变得不知所措:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/3372b2e6ea8efb4191d1606bfade9aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*sBt_FIQyZTmZUkfE5Ti75w.jpeg"/></div></figure><p id="da91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想我可能会从更容易的东西开始，所以我开始在钢琴凳上筛选文件。然后我发现了这个很酷的音符图表模板，它非常适合放在钢琴的琴键后面。我找不到完全匹配的，但这里的<a class="ae kv" href="https://a.co/d/477bjX6" rel="noopener ugc nofollow" target="_blank"/>就是一个例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/7723d3b1d38e88ef2625e96e39b2596d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuZVo9GdegmBc9Q92D9LHQ.jpeg"/></div></div></figure><p id="d6c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这对我来说是一个游戏规则的改变。我把所有其他音乐扔回到钢琴凳上，开始工作，学习如何演奏《星球大战》。在很短的时间内，我学会了演奏那首歌(和钢琴),没有一节课。</p><p id="5c69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这让我想知道，为什么这样的“模板”并不存在于生活的方方面面。</p><h1 id="c3f1" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">新技术的第22条军规</h1><p id="19b6" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">新的语言、平台、框架和设计模式都有一个共同的需求——开发人员接受和采用。大多数人通常都面临另一个共同的挑战:比预期更陡峭的学习曲线。</p><p id="d3c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说，Web3目前正处于这种状态，尽管在我的“<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/moving-from-full-stack-developer-to-web3-pioneer-13bf8b415dc9">从全栈开发者转向Web3先锋</a>”出版物中已经讨论过一个Web3的例子。</p><p id="79ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最前沿的开发者已经用Web3做了很多伟大的事情。但是下一个一百万像我一样的开发者呢？他们希望开始时不会感到不知所措和沮丧。我们怎样才能找到一种方法让他们使用Web3呢？</p><p id="bb0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想为Web3开发找到一个助手模板，这是我在开始探索<a class="ae kv" href="https://www.coinbase.com/products" rel="noopener ugc nofollow" target="_blank">比特币基地SDK</a>时找到的。</p><h1 id="8df4" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">比特币基地SDK/API</h1><p id="1405" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">根据维基百科，<a class="ae kv" href="https://en.wikipedia.org/wiki/Coinbase" rel="noopener ugc nofollow" target="_blank">比特币基地</a>是一家美国上市公司，自2012年6月以来一直运营加密货币交易平台。与我用Marqeta写的文章类似，比特币基地提供了一系列应用程序编程接口(API)和软件开发工具包(SDK)，供有兴趣构建数字货币应用程序的开发人员使用。</p><p id="a948" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个这样的例子是比特币基地钱包SDK。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/7a8db306a530f27bb7df17acfc83d46a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZNmm4iJiqCSxKuJOX-AqMw.png"/></div></div></figure><p id="bcbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于本出版物，我希望完成以下任务:</p><ul class=""><li id="cd4e" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">使用React创建一个简单的Web3应用程序</li><li id="15b3" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">将我的钱包浏览器扩展与Dapp集成</li><li id="5889" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">允许用户使用比特币基地钱包SDK进行捐赠</li></ul><h1 id="7e79" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">使用比特币基地钱包SDK创建Web3应用程序</h1><p id="a871" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">首先，我们可以使用React CLI创建一个名为coinbase-wallet-example的React应用程序:</p><p id="0d47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">npx create-react-app coinbase-wallet-example</code></p><p id="c58b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建React应用程序后，我使用以下命令切换到coinbase-wallet-example目录:</p><p id="3ed4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">cd coinbase-wallet-example</code></p><p id="4032" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于较新版本的create-react-app不再包括polyfills支持(正确使用<code class="fe ng nh ni nj b">web3.js</code>的必要条件),这需要较旧版本的react-scripts:</p><p id="a734" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">npm install --save-exact react-scripts@4.0.3</code></p><p id="66d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我们将构建一个Web3示例，所以web3框架是使用npm安装的(其他选项可以在这里找到<a class="ae kv" href="https://github.com/ChainSafe/web3.js" rel="noopener ugc nofollow" target="_blank"/>):</p><p id="a80b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">npm install web3</code></p><p id="889f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，使用npm安装比特币基地钱包SDK(其他选项可在此处找到<a class="ae kv" href="https://docs.cloud.coinbase.com/wallet-sdk/docs/installing" rel="noopener ugc nofollow" target="_blank"/>):</p><p id="9a0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">npm install @coinbase/wallet-sdk</code></p><p id="eaa2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<a class="ae kv" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>区块链开发套件，我创建了一个名为<code class="fe ng nh ni nj b">coinbase-wallet-example</code>的新项目:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/95475714c92bc2fdb8596e007f73bf89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDaRwUtcTKA5ftkbAr3Qbw.png"/></div></div></figure><p id="f14b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我切换到Ropsten测试网络，并记下了该项目的键和URL:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/7cd518c827af24f09228a22366a93722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6I4gvcHDJ9AAsEHWN1ERA.png"/></div></div></figure><p id="69b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们只需要包含以下代码来初始化比特币基地钱包SDK和一个Web3对象:</p><pre class="kg kh ki kj gt nm nj nn no aw np bi"><span id="9507" class="nq lv iq nj b gy nr ns l nt nu">import CoinbaseWalletSDK from '<a class="ae kv" href="http://twitter.com/coinbase/wallet-sdk" rel="noopener ugc nofollow" target="_blank">@coinbase/wallet-sdk</a>'<br/>import Web3 from 'web3';</span><span id="7ebb" class="nq lv iq nj b gy nv ns l nt nu">const APP_NAME = 'coinbase-wallet-example';<br/>const APP_LOGO_URL = './coinbase-logo.png';<br/>const DEFAULT_ETH_JSONRPC_URL = '<a class="ae kv" href="https://ropsten.infura.io/v3/56f" rel="noopener ugc nofollow" target="_blank">https://ropsten.infura.io/v3/56f</a> … d69';<br/>const DEFAULT_CHAIN_ID = 3; // 1=Ethereum (mainnet), 3=Ropsten, 5=Gorli</span></pre><p id="2981" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的应用程序的<code class="fe ng nh ni nj b">useEffect()</code>方法中，我包含了初始化比特币基地钱包和Web3:</p><pre class="kg kh ki kj gt nm nj nn no aw np bi"><span id="935c" class="nq lv iq nj b gy nr ns l nt nu">const coinbaseWallet = new CoinbaseWalletSDK({<br/>      appName: APP_NAME,<br/>      appLogoUrl: APP_LOGO_URL,<br/>    });</span><span id="8bd3" class="nq lv iq nj b gy nv ns l nt nu">const walletSDKProvider = coinbaseWallet.makeWeb3Provider(<br/>        DEFAULT_ETH_JSONRPC_URL,<br/>        DEFAULT_CHAIN_ID<br/>    );</span><span id="8727" class="nq lv iq nj b gy nv ns l nt nu">const web3 = new Web3(walletSDKProvider);</span></pre><p id="1f05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这个非常简单的示例，我们不会利用智能合同，而是提供一个发送捐款的目标地址:</p><pre class="kg kh ki kj gt nm nj nn no aw np bi"><span id="8636" class="nq lv iq nj b gy nr ns l nt nu">const DONATION_ADDRESS = '0x7 ... c94';</span></pre><p id="8a75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了降低风险，将更新代码，将<code class="fe ng nh ni nj b">DONATION_ADDRESS</code>设置为正在使用的钱包的连接地址。</p><p id="cee2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">DONATION_ADDRESS = account;</code></p><p id="6603" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着代码将向发送者发送资金，只留下从用户钱包中取走的油费。React Dapp将允许用户连接他们的钱包，然后提供一个捐赠金额(使用WEI单位)，然后按下捐赠按钮将资金发送到<code class="fe ng nh ni nj b">DONATION_ADDRESS</code>。</p><p id="3900" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个简单的Dapp的完整源代码如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="e35e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行基于React的Dapp就像使用以下命令一样简单:</p><p id="30c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">npm start</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nx l"/></div></figure><h1 id="999c" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">结论</h1><p id="5afc" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">自2021年以来，我一直试图按照以下使命宣言生活，我觉得这可以适用于任何IT专业人士:</p><blockquote class="nz oa ob"><p id="cf64" class="kw kx oc ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated">“将您的时间集中在提供扩展您知识产权价值的特性/功能上。将框架、产品和服务用于其他一切。”</p><p id="f8e6" class="kw kx oc ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><em class="iq">—j·维斯特</em></p></blockquote><p id="91d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在介绍中提到的笔记图表模板成为了我人生中的一个关键点。藏在我们钢琴凳里的这块隐藏的宝石不仅让我有能力弹奏《星球大战》主题曲，也让我有能力弹奏音乐。那个简单的模板和对学习的渴望最终为我进入伯克利音乐学院铺平了道路，并有能力参与几部音乐作品。</p><p id="f6fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比特币基地API和SDK——或开发者工具——为渴望进入新兴的Web3世界的开发者提供了类似的目的。开发人员可以将这些模块包含到他们的应用程序中，并快速开始，而不会陷入细节中。</p><p id="2fc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这两种情况下，音符图表模板和比特币基地开发者工具都坚持我的使命宣言，允许个人专注于他们的主要目标——无论是第一次学习弹钢琴还是用Web3做一些很酷的事情。</p><p id="5178" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您对本出版物的源代码感兴趣，可以在GitLab上找到，地址如下:</p><div class="og oh gp gr oi oj"><a href="https://gitlab.com/johnjvester/coinbase-wallet-example" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">John Vester/coin base-wallet-git lab示例</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">coinbase-wallet-example存储库是一个简单的web3 Dapp示例，构建于React和web3之上，用于说明它有多简单…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">gitlab.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kp oj"/></div></div></a></div><p id="57dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>