<html>
<head>
<title>6 Use Cases for Reduce() in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中Reduce()的6个用例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/6-use-cases-for-reduce-in-javascript-49683842ebed?source=collection_archive---------2-----------------------#2021-09-14">https://betterprogramming.pub/6-use-cases-for-reduce-in-javascript-49683842ebed?source=collection_archive---------2-----------------------#2021-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fa97" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习reduce()的不同用例，丰富您的JavaScript知识</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8654d108010b7913979c8bf8b1f3dfd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KPfivQxvbc7k0ESP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@remimullercha?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">雷米·米勒</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1c02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">reduce方法在数组的每个元素上执行用户提供的回调函数“reducer”。它传递前面元素的计算返回值。结果是单个值。这是在数组的所有元素上运行缩减器的结果。</p><h1 id="0818" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">它是如何工作的？</h1><p id="936f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">reducer函数逐个元素地遍历数组。在每一步中，reducer函数都将当前数组值与上一步的结果相加，直到不再有元素需要添加为止。</p><h1 id="b5ab" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参数是什么？</h1><p id="5999" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这些参数是一个回调函数和一个可选的初始值。</p><h2 id="82d0" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated"><strong class="ak">回调函数</strong></h2><ul class=""><li id="3913" class="ne nf it lb b lc mn lf mo li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe nn no np nq b">preVal</code> : <strong class="lb iu"> </strong>是前一次回调函数得到的前一个值</li><li id="631d" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated"><code class="fe nn no np nq b">currVal</code> : <strong class="lb iu"> </strong>是reducer函数遍历的数组的当前元素。</li><li id="fbf3" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated"><code class="fe nn no np nq b">currentIndex</code>:当前指数。但是，它是可选的。</li><li id="5df9" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated"><code class="fe nn no np nq b">arrayToTraverse</code>:是要遍历的数组。它也是可选的。</li></ul><h2 id="3f78" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated"><strong class="ak">初始值</strong></h2><p id="32cd" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">初始值参数是可选的。这是第一次调用回调时将前一个值初始化为的值。如果未指定初始值，则将前一个值初始化为初始值，并将当前值初始化为数组中的第二个值。</p><p id="1909" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Reduce方法在某些情况下是一种有价值的方法。在某些情况下，它可以节省您的时间，或者减少您编码的行数。在本文中，我将向您展示JavaScript中<code class="fe nn no np nq b">reduce()</code>方法的六个用例。</p><h1 id="fc70" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.对数组的元素求和</h1><p id="da5b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">假设您有以下数组:</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="bc30" class="ms lw it nq b gy oa ob l oc od">const prices = [5.99, 2.99, 3.99, 11.59]</span></pre><p id="bdbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能更喜欢使用for循环或for-each循环来对上面的数组元素求和，但是，如果使用<code class="fe nn no np nq b">reduce()</code>，您可以编写更少的代码。</p><p id="e2f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在简介中所知道的，<code class="fe nn no np nq b">reduce()</code>接受一个有四个参数的函数。<code class="fe nn no np nq b">preVal, currVal, currentIndex, prices</code>在这种情况下。</p><p id="f379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">reduce需要传递的第二个参数是要开始的初始值。例如，如果您希望对一个数组的元素求和，可以将0作为初始值。</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="1447" class="ms lw it nq b gy oa ob l oc od">const sum = prices.reduce((<!-- -->preVal<!-- -->, currVal, currentIndex, prices) =&gt; {<br/>  return preVal + currVal;<br/>}, 0);</span></pre><p id="835b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对数组中的每个元素执行该函数。<code class="fe nn no np nq b">preVal</code>对于第一次执行的初始值你设置为第二个参数，在本例中它是" 0 "。否则将是未定义的。<code class="fe nn no np nq b">currVal</code>是数组的第一个元素。对于第二次执行，对数组中的第二个元素执行以下函数:</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="3b58" class="ms lw it nq b gy oa ob l oc od">(preVal, currVal, currentIndex, prices) =&gt; {<br/>  return preVal + currVal;<br/>}</span></pre><p id="75a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，<code class="fe nn no np nq b">preVal</code>不是0。它等于上一次执行中返回的值。所以，<code class="fe nn no np nq b">preVal = 5.99 + 0</code>。现在，<code class="fe nn no np nq b">currVal</code>是第二次迭代的第二个元素。</p><p id="45be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种情况下不需要<code class="fe nn no np nq b">currentIndex</code>和<code class="fe nn no np nq b">prices</code>。所以，你可以把这个函数写成一行程序。</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="136a" class="ms lw it nq b gy oa ob l oc od">const sum = prices.reduce((preVal, currVal) =&gt; preVal + currVal, 0);</span></pre><h1 id="95f3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.展平数组</h1><p id="aa79" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">使用<code class="fe nn no np nq b">reduce()</code>，可以将多维数组转换成一维集合。</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="5a5d" class="ms lw it nq b gy oa ob l oc od">var rows = [[2, 3, 5], [1, 2, 4], [8, 5, 5]]</span><span id="84c2" class="ms lw it nq b gy oe ob l oc od">var matrixElements = rows.reduce( function (prev, current) {<br/>  return prev.concat(current);<br/>});</span></pre><h1 id="ba55" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.创建管道</h1><p id="578a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">此外，你可以减少超过函数以及数字和字符串。假设你有一系列数学函数。例如，您有以下功能:</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="a68e" class="ms lw it nq b gy oa ob l oc od">function increment(input) { return input + 1;}<br/>function decrement(input) { return input - 1; }<br/>function double(input) { return input * 2; }<br/>function halve(input) { return input / 2; }</span></pre><p id="9494" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您还想在订单中使用增量、双倍和减量。所以，你可以创建一个管道。然后，可以配合<code class="fe nn no np nq b">reduce()</code>使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者简介<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener"/></p></figure><h1 id="33df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.从数组中获取一个对象</h1><p id="bb93" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">例如，你有一个字符串数组，是彩色的苹果。使用<code class="fe nn no np nq b">reduce()</code>你可以如下构造一个苹果对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要旨由<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者</a></p></figure><h1 id="fae0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.找出奇数次出现的整数</h1><p id="2189" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您可以使用<code class="fe nn no np nq b">reduce()</code>来查找在给定数组中出现奇数次的整数。下面这个函数有一个不好的地方。如果你给出一个以上奇数次出现的整数，那就不行。</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="9f94" class="ms lw it nq b gy oa ob l oc od">const findOdd = (a) =&gt; a.reduce((a, b) =&gt; a ^ b);</span><span id="fd66" class="ms lw it nq b gy oe ob l oc od">console.log(findOdd([1, 2, 2, 1])); // Result: 0<br/>console.log(findOdd([1, 2, 2, 1, 2, 3, 3])); // Result: 2<br/>console.log(findOdd([1, 2, 3, 4])); // Result: 4 -&gt; Not working</span></pre><h1 id="c0f5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">6.找出给定数组的最大子数组和</h1><p id="5c25" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">使用这个函数，您可以找到给定数组的最大子数组和。这是一个需要解决的大问题。不容易解决。尤其是如果你想用一行程序实现这个功能，就更有挑战性了。不过如果用<code class="fe nn no np nq b">reduce()</code>会更容易。</p><pre class="kj kk kl km gt nw nq nx ny aw nz bi"><span id="2f67" class="ms lw it nq b gy oa ob l oc od">const maxSequence = (a,sum=0) =&gt; a.reduce((max,v) =&gt; Math.max(sum = Math.max(sum + v, 0), max), 0);</span><span id="1fe0" class="ms lw it nq b gy oe ob l oc od">console.log(maxSequence([1,2,3,4])); // Result: 10<br/>console.log(maxSequence([1,2,3,4,-8])); // Result: 10<br/>console.log(maxSequence([1,-2,3,-2,5,-1,3,-9,1,6])); // Result: 8</span></pre><h1 id="d961" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">加成:reduceRight()</h1><p id="555c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">也可以用<code class="fe nn no np nq b">reduceRight()</code>。其工作方式与<code class="fe nn no np nq b">reduce()</code>相同。然而，它的作用方向相反。正如您所了解的，<code class="fe nn no np nq b">reduce()</code>从第一个元素开始，向最后一个元素行进。相反，<code class="fe nn no np nq b">reduceRight()</code>从最后一个元素开始，到第一个元素。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">要旨由<a class="ae ky" href="https://medium.com/@onurinanc" rel="noopener">作者</a></p></figure><h1 id="1727" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="ba2d" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">了解JavaScript中一些内置函数的用例可以帮助你提高编码技能。学习用例可以让你获得一些洞察力。可以优雅的实现一些功能。</p><p id="cbc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">reduce()</code>在JavaScript中也是一个有用的内置函数。如果你知道如何使用它，它是强大的。这有助于您编写更少的代码行，就像对价格求和的例子一样。创建管道也是<code class="fe nn no np nq b">reduce()</code>的一个有趣的用例。</p><p id="3621" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">综上所述，本文中<code class="fe nn no np nq b">reduce()</code>的用例如下:</p><ul class=""><li id="eab9" class="ne nf it lb b lc ld lf lg li oh lm oi lq oj lu nj nk nl nm bi translated">对数组的元素求和</li><li id="2419" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated">展平数组</li><li id="9e66" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated">创建管道</li><li id="5898" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated">从数组中获取对象</li><li id="a804" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated">寻找奇数次出现的整数</li><li id="68e0" class="ne nf it lb b lc nr lf ns li nt lm nu lq nv lu nj nk nl nm bi translated">寻找给定数组的最大子数组和。</li></ul></div></div>    
</body>
</html>