<html>
<head>
<title>Start a New Electron App With React and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和TypeScript启动一个新的电子应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/start-a-new-electron-app-with-react-and-typescript-cdd6d9997933?source=collection_archive---------0-----------------------#2020-04-20">https://betterprogramming.pub/start-a-new-electron-app-with-react-and-typescript-cdd6d9997933?source=collection_archive---------0-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="65ce" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">立即构建您的第一个桌面应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b648d518f40dd2aae5bcb6d6e3fd6075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qJufYfBtDKuFDOFqsY_b4w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@joaosilas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔·塞拉斯</a>在<a class="ae ky" href="https://unsplash.com/s/photos/desktop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="8f8d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是电子？</h1><p id="a016" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">electronic是一个创建本地应用程序的框架。它是开源的，跨平台的。如果你已经知道Javascript、HTML和CSS，你可以用electron构建一个应用程序。</p><p id="0bad" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本教程中，我将向您展示如何使用webpack、React和Typescript从头开始一个电子项目。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="bc95" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">从电子开始</h1><p id="7232" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们首先创建一个新文件夹和一个新的<code class="fe ne nf ng nh b">npm</code>项目。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="863a" class="nm la it nh b gy nn no l np nq">mkdir electron-react-ts<br/>cd electron-react-ts<br/>npm init -y</span></pre><p id="012c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，安装这些依赖项。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="a44a" class="nm la it nh b gy nn no l np nq">npm install --save-dev electron \<br/>webpack webpack-cli webpack-dev-server \<br/>babel-loader @babel/core @babel/preset-env \<br/>@babel/preset-react @babel/preset-typescript</span></pre><p id="88b3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建一个<code class="fe ne nf ng nh b">tsconfig.json</code>文件。这允许您指定typescript编译器的配置。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="b2cc" class="nm la it nh b gy nn no l np nq">{<br/>  "compilerOptions": {<br/>    "target": "es5",<br/>    "module": "commonjs",<br/>    "lib": [<br/>      "dom",<br/>      "es2015",<br/>      "es2016",<br/>      "es2017"<br/>    ],<br/>    "allowJs": true,<br/>    "jsx": "react",<br/>    "sourceMap": true,<br/>    "outDir": "./dist",<br/>    "strict": true,<br/>    "esModuleInterop": true,<br/>  }<br/>}</span></pre><p id="7e11" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创造一个<code class="fe ne nf ng nh b">babel.config.js</code>:</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="d6fa" class="nm la it nh b gy nn no l np nq">module.exports = {<br/>  presets: [<br/>    '@babel/preset-env',<br/>    '@babel/preset-react',<br/>    '@babel/preset-typescript'<br/>  ]<br/>}</span></pre><p id="a25f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以及我们应用程序根目录下的一个<code class="fe ne nf ng nh b">index.html</code>文件:</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="356b" class="nm la it nh b gy nn no l np nq">&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>  &lt;title&gt;New Electron App&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3a31" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们在应用程序的根目录下创建一个名为<code class="fe ne nf ng nh b">webpack.electron.config.js</code>的新文件。这个webpack文件将把我们的电子应用程序编译到一个<code class="fe ne nf ng nh b">dist</code>文件夹中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="fd72" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">除了目标之外，这看起来像是typescript的普通webpack配置。目标是webpack将要编译的特定环境。这种情况下是<code class="fe ne nf ng nh b">electron-main</code>。</p><p id="f8c8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建一个<code class="fe ne nf ng nh b">electron</code>文件夹，然后在一个<code class="fe ne nf ng nh b">main.ts</code>文件中使用下面的代码。这个文件应该为你的应用程序创建窗口和处理系统事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6080" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">模块将创建一个新窗口，并呈现我们的react应用程序。</p><p id="acfa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在让我们在<code class="fe ne nf ng nh b">package.json</code>文件中添加一个脚本来运行Electron。此外，我们必须为编译了我们的电子应用程序的路径更改<code class="fe ne nf ng nh b">main</code>字段。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="c892" class="nm la it nh b gy nn no l np nq">{<br/>  "main": "./dist/main.js",<br/>    "scripts": {<br/>    "dev:electron": "NODE_ENV=development webpack --config webpack.electron.config.js --mode development &amp;&amp; electron ."<br/>  },<br/>}</span></pre><p id="2099" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在在控制台中运行<code class="fe ne nf ng nh b">npm run dev:electron</code>。</p><p id="f55d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">注意:</strong>如果你使用的是Windows，你很可能会遇到一个错误，这是因为<code class="fe ne nf ng nh b">NODE_ENV</code>不被识别为命令。你必须安装<a class="ae ky" href="https://www.npmjs.com/package/cross-env" rel="noopener ugc nofollow" target="_blank"> crossenv </a>并将命令放在<code class="fe ne nf ng nh b">NODE_ENV</code>之前。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="39f4" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">添加电抗器</h1><p id="b3b8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在我们已经运行了电子应用程序，让我们设置一个React应用程序在这个电子环境中运行。</p><p id="d2c1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们需要安装一些依赖项。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="4442" class="nm la it nh b gy nn no l np nq">npm install react react-dom @types/react @types/react-dom</span><span id="3140" class="nm la it nh b gy nt no l np nq">npm install --save-dev html-webpack-plugin</span></pre><p id="4dd6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建一个新的<code class="fe ne nf ng nh b">webpack.react.config.js</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="98ce" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们的<code class="fe ne nf ng nh b">package.json</code>文件现在应该是这样的。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="3281" class="nm la it nh b gy nn no l np nq">{<br/>  "main": "./dist/main.js",<br/>    "scripts": {<br/>      "dev:electron": "NODE_ENV=development webpack --config webpack.electron.config.js --mode development &amp;&amp; electron .",<br/>      "dev:react": "NODE_ENV=development webpack-dev-server --config webpack.react.config.js --mode development"<br/>    },<br/> }</span></pre><p id="738a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了试用这个应用程序，让我们创建一个新文件夹<code class="fe ne nf ng nh b">src</code>，里面有一个<code class="fe ne nf ng nh b">app.tsx</code>文件。</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="fc8d" class="nm la it nh b gy nn no l np nq">import React from 'react';<br/>import ReactDom from 'react-dom';</span><span id="8c61" class="nm la it nh b gy nt no l np nq">const mainElement = document.createElement('div');<br/>document.body.appendChild(mainElement);</span><span id="43a1" class="nm la it nh b gy nt no l np nq">const App = () =&gt; {<br/>  return (<br/>    &lt;h1&gt;<br/>      Hi from a react app<br/>    &lt;/h1&gt;<br/>  )<br/>}</span><span id="b3de" class="nm la it nh b gy nt no l np nq">ReactDom.render(&lt;App /&gt;, mainElement);</span></pre><p id="5820" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们准备好了。</p><p id="8478" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在一个控制台上运行<code class="fe ne nf ng nh b">npm run dev:react</code>，在另一个控制台上运行<code class="fe ne nf ng nh b">npm run dev: electron</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/87fb25ee5ee588109642eb2392803fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lp0KxRDxTByMW55d"/></div></div></figure><p id="fbfb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">检查此<a class="ae ky" href="https://github.com/elisealcala/electron-react-ts" rel="noopener ugc nofollow" target="_blank"> repo </a>中的代码。</p></div></div>    
</body>
</html>