<html>
<head>
<title>You Don’t Need void 0 in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中不需要void 0</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/you-dont-need-void-0-f9d4cc1d0e1f?source=collection_archive---------10-----------------------#2022-05-10">https://betterprogramming.pub/you-dont-need-void-0-f9d4cc1d0e1f?source=collection_archive---------10-----------------------#2022-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4b5c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这里有一个更好的选择</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e094c0e735c4ff228875fd14c00221b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eT_vInyR25oNrJQQx09QAg.jpeg"/></div></div></figure><p id="9d35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在JavaScript代码中，尤其是在旧的遗留代码中，有时会发现表达式<code class="fe ln lo lp lq b">void 0</code>。</p><p id="6071" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae lr" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void" rel="noopener ugc nofollow" target="_blank"> void运算符</a>计算一个表达式并返回原始值<a class="ae lr" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="noopener ugc nofollow" target="_blank">未定义的</a>。<code class="fe ln lo lp lq b">void 0</code>评估<code class="fe ln lo lp lq b">0</code>，它什么也不做，然后返回<code class="fe ln lo lp lq b">undefined</code>。它实际上是<code class="fe ln lo lp lq b">undefined</code>的别名。</p><h1 id="41b8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">为什么void 0被用作undefined的别名？</h1><p id="7e84" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">JavaScript的一个怪癖是<code class="fe ln lo lp lq b">undefined</code>不是保留关键字。<br/>相反，它是<a class="ae lr" href="https://developer.mozilla.org/en-US/docs/Glossary/Global_object" rel="noopener ugc nofollow" target="_blank">全局对象</a>的一个属性。</p><p id="d251" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在ES5 (2009)之前，可以修改<code class="fe ln lo lp lq b">undefined</code>全局属性，这可能会导致<code class="fe ln lo lp lq b">undefined</code>的意外行为。</p><p id="85de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">考虑下面的例子(在现代JavaScript引擎中不起作用):</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="c6bb" class="mt lt iq lq b gy mu mv l mw mx">// Pre-ES5 example - does not work in modern JS engines:</span><span id="3bea" class="mt lt iq lq b gy my mv l mw mx">// changes property 'undefined' on the global object:<br/>undefined = "something else"; </span><span id="5562" class="mt lt iq lq b gy my mv l mw mx">// potentially in some other JavaScript file or script section:<br/>if (aVariable === undefined) {<br/>  // aVariable is equal to "something else", <br/>  // but not to the primitive value 'undefined'<br/>  doSomething();<br/>}</span></pre><p id="2420" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">修改<code class="fe ln lo lp lq b">undefined</code>全局甚至可以发生在第三方代码中，例如通过脚本标签导入的库。由于<code class="fe ln lo lp lq b">void 0</code>总是返回实际的原始值<code class="fe ln lo lp lq b">undefined</code>，它通常在ES5之前使用，以使代码对<code class="fe ln lo lp lq b">undefined</code>全局属性的重新定义具有故障保护。</p><h1 id="8985" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">ES5之后的全局属性“未定义”</h1><p id="addd" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">在全局对象上修改<code class="fe ln lo lp lq b">undefined</code>的问题太大了，以至于JavaScript标准被改变了。</p><p id="faec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在ES5中，全局属性<code class="fe ln lo lp lq b">undefined</code>变成了只读的。</p><p id="0d18" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在现代JavaScript中，试图更改该值没有任何作用:</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="bc0e" class="mt lt iq lq b gy mu mv l mw mx">globalThis.undefined = "something else";<br/>console.log(undefined); // prints undefined in modern browsers</span></pre><h1 id="078d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Undefined仍然可以被局部变量隐藏</h1><p id="b48f" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">然而，虽然不再可能更改<code class="fe ln lo lp lq b">undefined</code>全局属性，但是<code class="fe ln lo lp lq b">undefined</code>仍然不是JavaScript中的保留关键字。因此，它仍然可以被局部变量隐藏:</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="6a07" class="mt lt iq lq b gy mu mv l mw mx">const undefined = "something else";<br/>let check = aVariable === void 0; // void 0 is needed here</span></pre><p id="dc9f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用名为<code class="fe ln lo lp lq b">undefined</code>的局部变量是您想要避免的一个缺陷。ESLint规则no-undefined 不允许使用undefined作为变量名，并防止隐藏问题。</p><h1 id="63eb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">void 0有助于减少捆绑包大小吗？</h1><p id="0027" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">表达式<code class="fe ln lo lp lq b">void 0</code>比<code class="fe ln lo lp lq b">undefined</code>短。JavaScript包的大小对于创建快速加载的网站至关重要，去掉几个字节会有所帮助。</p><p id="0325" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，最好是<strong class="kt ir">将基本的代码大小优化留给minifiers </strong>，例如<a class="ae lr" href="https://github.com/terser/terser" rel="noopener ugc nofollow" target="_blank"> Terser </a>作为产品捆绑过程的一部分。它们可以执行许多不同的优化，并且源代码保持更好的可读性，而不需要任何手动的代码大小优化，比如使用<code class="fe ln lo lp lq b">void 0</code>而不是<code class="fe ln lo lp lq b">undefined</code>。</p><h1 id="432a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">避免现代JavaScript中的void 0</h1><p id="3808" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">总而言之，在现代浏览器和JavaScript引擎中，没有理由再使用<code class="fe ln lo lp lq b">void 0</code>:</p><ul class=""><li id="e7cb" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">在ES5和更新的环境中，全局属性<code class="fe ln lo lp lq b">undefined</code>不能改变</li><li id="61ac" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">使用<a class="ae lr" href="https://eslint.org/docs/rules/no-undefined" rel="noopener ugc nofollow" target="_blank"> ESLint规则no-undefined </a>可以禁止名为<code class="fe ln lo lp lq b">undefined</code>的局部变量</li><li id="94b8" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">当创建生产包时，迷你编辑器可以用<code class="fe ln lo lp lq b">void 0</code>替换<code class="fe ln lo lp lq b">undefined</code></li></ul><p id="e29a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">相反，<code class="fe ln lo lp lq b">void 0</code>使得JavaSCript代码更难阅读和理解，因为你需要知道<code class="fe ln lo lp lq b">void 0</code>的含义，并为同一个概念(<code class="fe ln lo lp lq b">undefined</code>)处理不同的术语(<code class="fe ln lo lp lq b">void 0</code>、<code class="fe ln lo lp lq b">undefined</code>)。</p><p id="9077" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TLDR:你可以使用<code class="fe ln lo lp lq b">undefined</code>并移除不必要的<code class="fe ln lo lp lq b">void 0</code>并发症。</p></div></div>    
</body>
</html>