<html>
<head>
<title>Shoehorning SwiftUI and Create ML — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Shoehorning SwiftUI和创建ML —第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/shoehorning-swiftui-and-create-ml-part-1-e517be035ed0?source=collection_archive---------14-----------------------#2019-07-22">https://betterprogramming.pub/shoehorning-swiftui-and-create-ml-part-1-e517be035ed0?source=collection_archive---------14-----------------------#2019-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="39bd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">我最近的旅程试图一次了解两件WWDC 2019的事情</em></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/2ffe317bb6ce09c5225b33fd826a7058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q732-j2Fgm7jCulW3M03Xw.png"/></div></div></figure><p id="af4c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">今年，我完全错过了跟上WWDC 2019…因为我的儿子出生了…所以我很确定我可以通过。</p><p id="d417" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">所以现在，一个多月过去了，在重新开始工作后，我决定看看我错过了什么。</p><p id="eac5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在<a class="ae lr" href="https://developer.apple.com/documentation/swiftui" rel="noopener ugc nofollow" target="_blank"> SwiftUI </a>和<a class="ae lr" href="https://developer.apple.com/documentation/createml" rel="noopener ugc nofollow" target="_blank"> Create ML </a>抓住了我的全部注意力之前，我还没有走那么远。</p><p id="333a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">今年<em class="ls">将会是像SwiftUI这样的东西成为现实的时候。老实说，我对此很兴奋。尤其是我跟<a class="ae lr" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>合作过，跟我跟<a class="ae lr" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>(原生)的经历差不多。</em></p><p id="f11d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这三个都是反应式的、以UI为中心的开发框架，这意味着它们是专门为尽可能简单地构建UI而建立的，同时也弥合了它们和它们应该显示的数据之间的差距。</p><p id="7211" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我喜欢这种构建UI的“新”方式。与我以前所知道的相比，这就像可读的HTML或Android XML一样，UI和代码实际上可以共存。</p><p id="7cde" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">但吸引我眼球的还不止这些。我还看到了新的Create ML应用程序的演示，它使得创建ML模型更加用户友好。</p><p id="751a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我承认我一直很好奇，在阅读了大量的clickbait文章标题之后，关于机器学习是一切事物的未来。我想，现在它似乎是点击和拖动，我真的没有借口了。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="ad0e" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">入门指南</h1><p id="34de" class="pw-post-body-paragraph kv kw it kx b ky ms ju la lb mt jx ld le mu lg lh li mv lk ll lm mw lo lp lq im bi translated">声明:这更多的是叙述，而不是按部就班。但我会指出我引用的代码和项目的<a class="ae lr" href="https://github.com/dbolella/FlowerPower" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>。</p><p id="1b0c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">由于没有耐心，我想同时学习两者。</p><p id="9fdc" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">受到苹果<a class="ae lr" href="https://developer.apple.com/documentation/vision/training_a_create_ml_model_to_classify_flowers" rel="noopener ugc nofollow" target="_blank">教程</a>和<a class="ae lr" href="https://developer.apple.com/videos/play/wwdc2019/430/" rel="noopener ugc nofollow" target="_blank"> WWDC会议</a>的启发，我决定将它与我在<a class="ae lr" href="https://developer.apple.com/videos/play/wwdc2019/204/" rel="noopener ugc nofollow" target="_blank">swift ui WWDC会议</a>的介绍中所学到的东西结合起来。</p><p id="eaa0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">本质上，我将生成一个测试花的列表，在它们各自的细节视图中，我将检查我的ML模型的预测是否正确，以及它是否<em class="ls">反应性地</em>显示结果。</p><p id="ec08" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们需要的是:</p><ul class=""><li id="9234" class="mx my it kx b ky kz lb lc le mz li na lm nb lq nc nd ne nf bi translated"><a class="ae lr" href="https://developer.apple.com/documentation/macos_release_notes/macos_catalina_10_15_beta_4_release_notes" rel="noopener ugc nofollow" target="_blank"> macOS Catalina beta </a>(抱歉，没有它就不能做SwiftUI或使用新的Create ML)</li><li id="5788" class="mx my it kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated"><a class="ae lr" href="https://developer.apple.com/documentation/xcode_release_notes/xcode_11_beta_4_release_notes" rel="noopener ugc nofollow" target="_blank"> Xcode 11 Beta </a></li><li id="d477" class="mx my it kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated"><a class="ae lr" href="https://www.kaggle.com/alxmamaev/flowers-recognition" rel="noopener ugc nofollow" target="_blank">花卉数据</a></li></ul><p id="ac44" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">请注意，有时SwiftUI中的某些内容可能与另一个熟悉的Swift元素共享一个名称(例如<code class="fe nl nm nn no b">List</code>)。我将用(SUI) <em class="ls">来表示SwiftUI元素。</em></p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="88f1" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">构建应用程序(SwiftUI)</h1><p id="49f0" class="pw-post-body-paragraph kv kw it kx b ky ms ju la lb mt jx ld le mu lg lh li mv lk ll lm mw lo lp lq im bi translated">我创建了一个新的iOS单视图项目，并确保SwiftUI在您输入项目名称的下方被选中(旁注:我用的是FlowerPower)。</p><p id="4105" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在<code class="fe nl nm nn no b">ContentView</code>中，我创建了一个简单的<code class="fe nl nm nn no b">List</code> (SUI)，其中的内容构成了我们的单元格。这个单元格是一个包含图像和文本的hstack，这对于现在来说已经足够了。</p><p id="d100" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了更有趣，我用CMD +点击我的hstack并选择<em class="ls">提取子视图</em>，创建一个新的<code class="fe nl nm nn no b">FlowerCell</code>结构。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi np"><img src="../Images/34973e3b10bd6787fd1875b122c0f0bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lmyTw7kTSzBS5erM7BiA_g.png"/></div></div><p class="nq nr gj gh gi ns nt bd b be z dk translated">预览让我们几乎可以立即看到我们正在构建的内容。</p></figure><p id="67f9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让整个SwiftUI体验比我的其他体验好得多的是预览窗口。</p><p id="1c28" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">它对我做的任何改变都非常敏感，我喜欢你可以在里面运行应用程序。</p><p id="5512" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我知道<a class="ae lr" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>和Flutter可以做同样的事情，但Xcode提供了不同程度的查看和测试应用程序(预览，预览中的半构建运行模式，然后是传统运行)。</p><p id="8007" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">需要注意的一件重要事情是用测试数据填充你的用户界面。理想情况下，您应该使用<code class="fe nl nm nn no b">ContentView_Previews</code>结构，但是对于这个屏幕，只需让列表迭代五次并用占位符填充您的单元格。</p><p id="b19e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">接下来，在一个新文件中，创建一个Flower struct，它将保存花的名称、分类(用于与我们的预测进行比较)和图像名称。</p><p id="de89" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在同一个文件中，有测试数据<em class="ls">最初是</em>用于预览，但后来我意识到这只是一个有趣的应用程序，所以相反，我让它打开，以便它对应用程序也是静态的。</p><p id="d322" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">测试数据是一个包含五种花的列表，这些花的图片是我从Google images上下载的，每一种花都有一个类别(蒲公英、郁金香、雏菊、玫瑰、向日葵)。这些图像随后被放置在项目资源中。</p><p id="8311" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">现在，回到<code class="fe nl nm nn no b">ContentView</code>，我为我的测试数据创建了一个let。</p><p id="2f98" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我让我的<code class="fe nl nm nn no b">List</code> (SUI)根据数据变成一个for each，给我的<code class="fe nl nm nn no b">FlowerCell</code>添加一个参数以接收一朵花，并指向图像和文本以引用花的属性。</p><p id="ab4c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">到目前为止，在我的预览中，我看到了我的结果。</p><p id="e70e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">知道我将创建一个细节页面，最后要做的事情是在一个<code class="fe nl nm nn no b">NavigationView</code>中包装我的视图，在一个<code class="fe nl nm nn no b">NavigationLink</code>中包装我的单元格。除了有个要去的目的地，我的主页是完整的！</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi np"><img src="../Images/a76573218896b0dc260b5e8e7524b9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOVQ-y4z7m3Wt3hYPeJh7A.png"/></div></div><p class="nq nr gj gh gi ns nt bd b be z dk translated">相当简单，还没有什么新奇的东西。</p></figure><p id="48f2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于详细页面(我计划也运行ML模型)，我创建了一个新的SwiftUI文件，并用我们将要显示/分析的花的参数调用我的新视图<code class="fe nl nm nn no b">FlowerDetail</code>。</p><p id="4008" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">很快，我跳回我的<code class="fe nl nm nn no b">ContentView</code>，现在将我的<code class="fe nl nm nn no b">NavigationLink</code>目的地设置为<code class="fe nl nm nn no b">FlowerDetail</code>，传入单元格的花。</p><p id="f632" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">回到<code class="fe nl nm nn no b">FlowerDetail</code>，我简单地创建了一个vstack，其中有花的图像、间隔符、显示结果的文本和触发模型的按钮。</p><p id="cef4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在结束第一部分并进入ML部分之前，我决定使用一个<code class="fe nl nm nn no b">State</code>变量。</p><p id="8423" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">SwiftUI之所以具有反应性，是因为数据和UI可以同步的新方式。</p><p id="d4f0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在这里，我创建了一个名为<code class="fe nl nm nn no b">matchResults</code>的新var，并在它前面加上了前缀<code class="fe nl nm nn no b">@State</code>。</p><p id="aeac" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我将它设置为默认文本(例如，“点击下面运行模型！”)并将vstack中的我的文本视图设置为<code class="fe nl nm nn no b">matchResults</code>。</p><p id="3699" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">自动地，每当<code class="fe nl nm nn no b">matchResults</code>现在被设置，SwiftUI将告诉任何引用它的视图，它需要更新。</p><p id="199e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">最终，<code class="fe nl nm nn no b">matchResults</code>将有三个状态，由三个字符串表示:</p><ul class=""><li id="164e" class="mx my it kx b ky kz lb lc le mz li na lm nb lq nc nd ne nf bi translated">"点击下面运行模型！":创建<code class="fe nl nm nn no b">State</code>时设置的默认消息。</li><li id="117e" class="mx my it kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">“匹配”:模型找到匹配项时将显示的消息。</li><li id="34c8" class="mx my it kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">“不匹配”:模型找不到匹配时显示的消息。</li></ul></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="9266" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">接下来:创建ML</h1><p id="75a0" class="pw-post-body-paragraph kv kw it kx b ky ms ju la lb mt jx ld le mu lg lh li mv lk ll lm mw lo lp lq im bi translated">从这里开始，下一步是创建我们的模型，把它放到我们的项目中，然后通过模型运行我们的测试花，并用我们的发现更新<code class="fe nl nm nn no b">matchResults</code>。</p><p id="447c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在<a class="ae lr" href="https://medium.com/@dbolella/shoehorning-swiftui-and-create-ml-part-2-a8932075e09a" rel="noopener"> Shoehorning SwiftUI中查看并创建ML —第2部分</a>！</p><p id="1c4d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于代码，请查看<a class="ae lr" href="https://github.com/dbolella/FlowerPower" rel="noopener ugc nofollow" target="_blank">回购</a>。</p></div></div>    
</body>
</html>