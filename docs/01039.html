<html>
<head>
<title>How To Create A Framework With Carthage Support</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建一个支持Carthage的框架</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-a-framework-with-carthage-support-c30b596d3a7a?source=collection_archive---------3-----------------------#2019-08-09">https://betterprogramming.pub/how-to-create-a-framework-with-carthage-support-c30b596d3a7a?source=collection_archive---------3-----------------------#2019-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cffc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">简化的框架管理</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b7ce5c265fbdc2debf8f441815dd80a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xv_W2QYW2zTO0pYSEIpX3w.jpeg"/></div></div></figure><p id="373a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">也许你想知道迦太基是什么。Carthage是cocoa的分散依赖管理器。那是什么意思？这意味着它通过处理所有依赖于框架管理的问题简化了我们的生活。</p><p id="6049" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本指南的最后，你将拥有一个由<a class="ae ln" href="https://github.com/Carthage/Carthage" rel="noopener ugc nofollow" target="_blank">迦太基</a>支持的基本框架。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="df2c" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">开拍！</h1><p id="01bb" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">要继续，您的计算机上需要一些软件包。我推荐安装<a class="ae ln" href="https://brew.sh/index_it" rel="noopener ugc nofollow" target="_blank">家酿</a>，一个可以简化你的安装生活的包管理器。</p><p id="21e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您还没有安装Carthage，请运行以下命令:</p><p id="c119" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ms mt mu mv b">brew install carthage</code></p><p id="a8e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦你这样做了，你就可以开始了！</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="2bfd" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">创建框架</h1><p id="5a18" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">首先，我们必须创建我们的框架。在这种情况下，我们将创建一个简单的方法来改变视图的背景颜色。新建一个Xcode项目，<em class="mw"> iOS，Cocoa Touch框架:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/8bfc22aa31d1483ee7c3e4804f504eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8hGRqcRfAEqoiypT3QNu5Q.png"/></div></div></figure><p id="d630" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击next，然后给它起个名字(我就叫它<em class="mw"> GSKit </em>)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/4871d23706be45cff33d50ff1ae60919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aj_ysfW57dubVmWakDvwcw.png"/></div></div></figure><p id="a2b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">再次点击下一步并保存。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="6804" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">添加Git控件</h1><p id="ed47" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">为了共享你的框架，你必须把它放在Github上，所以让我们创建本地git版本。打开终端，<code class="fe ms mt mu mv b">cd</code>项目的文件夹，执行<code class="fe ms mt mu mv b">git init</code>。它创建了一个git的本地版本，我们稍后会上传它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/0487e9dc8fcd694911527245100d9ee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_YhQrqr46kis1Cr7GXQPg.png"/></div></div></figure><h1 id="ceac" class="lv lw iq bd lx ly mz ma mb mc na me mf jw nb jx mh jz nc ka mj kc nd kd ml mm bi translated">开始编码</h1><p id="b7e2" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">现在我们需要一些东西来执行。那么我们来创建一个文件:Cmd+N，选择Swift文件，命名为<em class="mw"> GSViewController </em>保存。现在让我们写一些代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7e8f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您应该会看到如下所示的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/78f979e9a27cb37dedde9832a44e1ce0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGykEu1DCGKBIurASPDgUw.png"/></div></div></figure><p id="f71f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们回顾一下刚刚编写的代码:</p><ul class=""><li id="0363" class="ng nh iq kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated"><em class="mw">第9行</em>:我们正在导入UIKit框架，以便能够使用对UIViewController和UIColor的引用。</li><li id="ec6d" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated"><em class="mw">第11行</em>:我们正在创建一个名为<em class="mw"> GSViewController </em>的新类，它继承了<em class="mw"> UIViewController </em>类。我们将类<em class="mw">打开</em>，以便能够在它的目标之外继承它。</li><li id="ad20" class="ng nh iq kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated"><em class="mw">第12行</em>:我们创建了一个名为changeBackground的函数，带有一个UIColor类型的名为::color::的参数。这个函数是公共的，因为我们想在这个框架之外使用它。在函数中，我们只是简单地改变背景的颜色。</li></ul></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="d296" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">示例项目</h1><p id="0c92" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">我们将创建一个样例应用程序来展示如何使用我们漂亮的新框架。要创建此应用程序，请单击该项目，然后单击左下方的加号图标。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/350d1c8663213fdc686169ec2e0d93a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7sFar9XjzEsOzfxCNhTZg.png"/></div></div></figure><p id="4ab9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后选择iOS，和单视图应用程序。将其命名为Example并保存。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/3c65ef456793b9ca6a0c0b54bcd8d41e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_TmN3jNZ2sw9HS4f1MqLRw.png"/></div></div></figure><p id="c470" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们必须链接框架，以便能够在我们的示例应用程序中使用它。单击链接的框架和库下的加号图标，并从菜单中选择GSKit。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/6810b5e0782599b3d67a82f3167244ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgqZ6eHf2QrorVO77rMcew.png"/></div></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="a0fd" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">测试我们的框架</h1><p id="bdea" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">现在我们可以通过在ViewController类中使用这段代码来测试框架是否以正确的方式工作。</p><pre class="kg kh ki kj gt nu mv nv nw aw nx bi"><span id="01df" class="ny lw iq mv b gy nz oa l ob oc">import UIKit<br/>import GSKit<br/><br/>class ViewController: GSViewController {<br/>    <br/>    var colors: [UIColor] = [.red, .green, .blue, .orange, .purple]<br/>    var currentIndex = 0<br/>    <br/>    override func viewDidLoad() {<br/>        super.viewDidLoad()<br/>        <br/>        changeBackground(withColor: colors[currentIndex])<br/>        <br/>        self.view.addGestureRecognizer(UITapGestureRecognizer(target: self, action: #selector(handleClick)))<br/>    }<br/>    <br/>    @objc func handleClick() {<br/>        currentIndex += 1<br/>        <br/>        if !colors.indices.contains(currentIndex) {<br/>            currentIndex = 0<br/>        }<br/>        <br/>        changeBackground(withColor: colors[currentIndex])<br/>    }<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/370c8f9cc11ae1aaf6c1c0b02d4f5217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*-19ZdHFvAxD1XIGEU2L3SA.png"/></div></figure><p id="9a84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将构建目标更改为Example并运行应用程序。它将打开一个红色背景的应用程序，如果你点击查看，颜色会发生变化。有用！</p><p id="87ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击管理方案，然后取消标记并重新标记GSKit附近的“共享”语音。</p><h1 id="2c9d" class="lv lw iq bd lx ly mz ma mb mc na me mf jw nb jx mh jz nc ka mj kc nd kd ml mm bi translated">为迦太基而建</h1><p id="026f" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">现在是时候在迦太基建立我们的框架了。如果您关闭了“终端”窗口，请重新打开它，并再次导航到项目的文件夹。我们现在唯一需要做的就是运行这个命令:<code class="fe ms mt mu mv b">carthage build --no-skip-current</code>。它将构建框架并在项目文件夹中创建一个<em class="mw"> Carthage </em>文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/20a113df7d34c1a98892dc091adba1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTJP2hzt6v44aTd389Qulw.png"/></div></div></figure><p id="f474" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们离终点只有一步之遥了！我们现在要做的就是把文件夹推送到GitHub。为此，我们在终端中使用以下命令:</p><pre class="kg kh ki kj gt nu mv nv nw aw nx bi"><span id="27ce" class="ny lw iq mv b gy nz oa l ob oc">add .<br/>git commit -m 'first commit'<br/>git tag "v1.0"<br/>git remote add origin "URL OF THE REPO"<br/>git push origin "v1.0"</span></pre><p id="38e1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你需要首先在GitHub上创建一个repo。回购的URL是指向您创建的回购的链接。</p><p id="fb78" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mw">该框架现已发布在GitHub上！</em></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="79d9" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">如何使用它</h1><p id="08a7" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">要使用它，你需要做的就是创建一个<a class="ae ln" href="https://github.com/Carthage/Carthage/blob/master/Documentation/Artifacts.md#cartfile" rel="noopener ugc nofollow" target="_blank"> Cartfile </a>并添加这个:<code class="fe ms mt mu mv b">git "URL OF THE REPO" ~&gt; 1.0</code></p><p id="350e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">保存文件，打开终端，导航到项目的文件夹并运行<code class="fe ms mt mu mv b">carthage update</code>。</p><p id="a1e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将框架从Carthage/Build/iOS/GS kit . framework拖到Xcode目标中链接的框架和库。</p><p id="dfce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您必须使用:<code class="fe ms mt mu mv b">/usr/local/bin/carthage copy-frameworks</code>为应用程序目标的构建阶段创建一个新的运行脚本阶段</p><p id="32b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在输入文件中你必须添加这个:<code class="fe ms mt mu mv b">$(SRCROOT)/Carthage/Build/iOS/GSKit.framework</code></p><p id="ba89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而这个在输出文件中:<code class="fe ms mt mu mv b">$(BUILT_PRODUCTS_DIR)/$(FRAMEWORKS_FOLDER_PATH)/GSKit.framework</code></p><p id="669f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">全部完成！您现在可以在您的新项目中使用您的框架了！</p><p id="318f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以在GitHub上的<a class="ae ln" href="https://github.com/gianpispi/GSKit" rel="noopener ugc nofollow" target="_blank">我的回购</a>中找到这个项目的代码。</p></div></div>    
</body>
</html>