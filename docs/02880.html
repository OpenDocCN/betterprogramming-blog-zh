<html>
<head>
<title>How To Add Authentication to Your React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向React本机应用程序添加身份验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-authentication-to-your-react-native-app-with-react-hooks-and-react-context-api-46f57aedbbd?source=collection_archive---------1-----------------------#2020-01-07">https://betterprogramming.pub/how-to-add-authentication-to-your-react-native-app-with-react-hooks-and-react-context-api-46f57aedbbd?source=collection_archive---------1-----------------------#2020-01-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="44a5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以现代方式验证您的用户:使用Expo或React Native CLI的React挂钩和React上下文API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b098d00efbb31af1fc5e127f1f0f44c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9JIvQ9NwFCmdo0VNGaTu6Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">菲利贝托·桑蒂兰在<a class="ae ky" href="https://unsplash.com/s/photos/react?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5d19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我之前的教程概述了使用Redux的简单React原生应用程序所需的步骤和<a class="ae ky" href="https://medium.com/mesan-digital/tutorial-1a-react-native-with-react-hooks-and-redux-boilerplate-75014ca8dee4" rel="noopener">样板代码</a>。接下来，我概述了如何通过开发一个允许用户创建、更新、删除和查看所有报价的报价应用程序，将<a class="ae ky" href="https://medium.com/mesan-digital/tutorial-2a-how-to-add-crud-operations-to-your-react-native-app-using-react-hooks-and-redux-5896ebab89ea" rel="noopener"> CRUD操作</a>添加到您的应用程序中。</p><p id="0743" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的下一个教程中，我将向一个事件应用程序添加CRUD操作。与quotes的应用程序不同，用户需要注册并登录才能查看或添加活动。</p><p id="0017" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，将创建身份验证模块，用户将能够:</p><ul class=""><li id="9a84" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">注册(每次注册后都会发送电子邮件确认)</li><li id="01e6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">登录(如果用户已经验证了他们的帐户，他们就可以登录)</li><li id="a6d8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">更新个人资料</li><li id="4d64" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">恢复密码</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/f36e3fa17ab051553be76f5aadf17b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*etSpPY4I5PPZz3uNX1g1Uw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">登记</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/7688ba07db7e12c1e4ea9be40585e7e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*2Ay1Rq0nwiOPbob6Oz1mxQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">登录，用户名，更新个人资料</p></figure><h2 id="337a" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">要求</h2><ul class=""><li id="5c36" class="lv lw it lb b lc nd lf ne li nf lm ng lq nh lu ma mb mc md bi translated">认证API —(你可以按照这个<a class="ae ky" href="https://medium.com/swlh/how-to-build-a-node-js-authentication-api-with-email-verification-image-upload-and-password-reset-95e35fd46be1" rel="noopener">教程</a>来创建一个NodeJS认证API)或者随意使用我的演示API(<a class="ae ky" href="http://mesannodejsapiwithverification.herokuapp.com" rel="noopener ugc nofollow" target="_blank">http://mesannodejsapiwithverification.herokuapp.com</a>)</li></ul><h2 id="eb27" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated"><strong class="ak">链接</strong></h2><ul class=""><li id="e0cb" class="lv lw it lb b lc nd lf ne li nf lm ng lq nh lu ma mb mc md bi translated">Expo:<a class="ae ky" href="https://expo.io/@mosesesan/mesan-react-native-authentication" rel="noopener ugc nofollow" target="_blank">https://Expo . io/@ mosesesan/mesan-react-native-authentic ation</a></li><li id="c1f0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">GitHub (Expo版):<a class="ae ky" href="https://github.com/MosesEsan/mesan-react-native-authentication-app/tree/auth" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/MosesEsan/mesan-react-native-authentic ation-app/tree/auth</a></li><li id="b464" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">GitHub ( <strong class="lb iu"> React Native CLI </strong>版本):<a class="ae ky" href="https://github.com/MosesEsan/mesan-react-native-cli-authentication-app" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/MosesEsan/mesan-React-Native-CLI-authentic ation-app</a></li></ul></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="13bc" class="np ml it bd mm nq nr ns mp nt nu nv ms jz nw ka mv kc nx kd my kf ny kg nb nz bi translated">第1部分— PDF(项目、依赖项、文件夹结构)</h1><h2 id="9348" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">步骤1:创建您的项目</h2><p id="1bdd" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">若要创建项目，请运行下面的命令。选择一个空白模板并设置应用程序的名称。</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="3b71" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">Expo</strong><br/>$ expo init react-native-authentication<br/>$ cd react-native-authentication</span><span id="80b1" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">React Native CLI</strong><br/>$ npx react-native init ReactNativeAuthentication<br/>$ cd ReactNativeAuthentication</span></pre><h2 id="8620" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">步骤2:安装依赖项</h2><p id="510f" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">将使用以下软件包:</p><ul class=""><li id="d43b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">Axios ，一个基于承诺的HTTP客户端，用于调用API</li><li id="352f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/MosesEsan/react-native-basic-form" rel="noopener ugc nofollow" target="_blank">反应原生基本形态</a></li></ul><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="3218" class="mk ml it oe b gy oi oj l ok ol">$ npm i --save axios <strong class="oe iu">react-native-basic-form </strong>react-native-elements</span></pre><p id="6675" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航依赖项:</p><ul class=""><li id="e401" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://reactnavigation.org/" rel="noopener ugc nofollow" target="_blank">反应导航</a>为app导航。</li><li id="fa56" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/react-navigation/stack" rel="noopener ugc nofollow" target="_blank"> React导航堆栈</a> —用于iOS和Android的堆栈导航器。</li></ul><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="b9d4" class="mk ml it oe b gy oi oj l ok ol">$ npm i --save react-navigation react-navigation-stack</span><span id="4443" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">Expo<br/></strong>$ expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context @react-native-community/masked-view</span><span id="1557" class="mk ml it oe b gy om oj l ok ol">------</span><span id="d06e" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">React Native CLI</strong><br/>$ npm install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context @react-native-community/masked-view --save</span><span id="9450" class="mk ml it oe b gy om oj l ok ol"><em class="on">//link these libraries</em><br/>$ cd ios; pod install; cd ..</span><span id="1124" class="mk ml it oe b gy om oj l ok ol"><em class="on">//Vector Icons (</em><strong class="oe iu">React Native CLI only</strong><em class="on">)</em><br/>npm i --save react-native-vector-icons  <br/>react-native link react-native-vector-icons</span></pre><h2 id="3b36" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">步骤3:创建文件夹结构</h2><p id="3273" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在你的项目根目录下，创建<code class="fe oo op oq oe b">app</code> <strong class="lb iu"> </strong>文件夹。在此文件夹中，创建以下文件夹:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="f52a" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">components</strong><br/>contain all the components</span><span id="1998" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">scenes</strong><br/>contain all the scenes</span><span id="9f85" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">routes<br/></strong>contains the app routes.</span><span id="ac54" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">services<br/></strong>contains functions to access the backend API.</span><span id="437f" class="mk ml it oe b gy om oj l ok ol">----</span><span id="031e" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">Make sure you are in the project root</strong></span><span id="181e" class="mk ml it oe b gy om oj l ok ol">$ mkdir app &amp;&amp; cd app<br/>$ mkdir providers services components scenes routes</span></pre></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="a570" class="np ml it bd mm nq nr ns mp nt nu nv ms jz nw ka mv kc nx kd my kf ny kg nb nz bi translated">第2部分— CPRS(常量、提供者、缩减者、服务)</h1><h2 id="cde1" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第四步:配置</h2><p id="76e3" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">app</code>文件夹中，创建两个文件<code class="fe oo op oq oe b">constants.js</code>和<code class="fe oo op oq oe b">theme.js</code>:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="57d7" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">constants.js</strong></span><span id="509f" class="mk ml it oe b gy om oj l ok ol">The <strong class="oe iu">api url, </strong>its<strong class="oe iu"> endpoints </strong>and other config variables<strong class="oe iu"> </strong>are declared.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><code class="fe oo op oq oe b"><strong class="ak">constants.js</strong></code></p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak"> theme.js </strong></p></figure><h2 id="d4c0" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第五步:供应商</h2><p id="8695" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">providers</code>文件夹中，新建一个文件:<code class="fe oo op oq oe b">auth.js</code> <em class="on">。</em></p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="7390" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">auth.js</strong></span><span id="230c" class="mk ml it oe b gy om oj l ok ol">At the top of the file, the context is created</span><span id="738d" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">const </strong>AuthContext = React.createContext();</span><span id="5a86" class="mk ml it oe b gy om oj l ok ol">---</span><span id="e851" class="mk ml it oe b gy om oj l ok ol">The <strong class="oe iu">reducer </strong>and <strong class="oe iu">initial state</strong> are imported from the reducer file [<strong class="oe iu">this will be created later</strong>] and passed to the <strong class="oe iu">useReducer</strong> hook which returns the current state paired with a <!-- -->dispatch<!-- --> method similar to redux.</span><span id="ca03" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">const </strong>[state, dispatch] = useReducer(<em class="on">reducer</em>, initialState || {});</span><span id="e667" class="mk ml it oe b gy om oj l ok ol">---</span><span id="f42c" class="mk ml it oe b gy om oj l ok ol">Various functions are declared and passed as value to the <strong class="oe iu">Provider, this functions include:</strong></span><span id="806e" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">getAuthState<br/></strong>returns user data if logged in </span><span id="0711" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">handleLogin</strong><em class="on">: <br/></em>stores the token and the users' data, sets Axios Authorization header and dispatches the users' data to the reducer to be saved.</span><span id="396d" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">handleLogout</strong><em class="on">: <br/></em>does the opposite of <strong class="oe iu">handleLogin</strong></span><span id="cdca" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">updateUser</strong><em class="on">: <br/></em>updates the users' data in the local storage and dispatches the new data to the reducer to be saved.</span><span id="7ac8" class="mk ml it oe b gy om oj l ok ol">---</span><span id="8bd7" class="mk ml it oe b gy om oj l ok ol">At the bottom, a new object <strong class="oe iu">useAuth </strong>is created using the <a class="ae ky" href="https://reactjs.org/docs/hooks-reference.html#usecontext" rel="noopener ugc nofollow" target="_blank"><strong class="oe iu">useContext</strong></a><strong class="oe iu"> </strong>hook and the previously created <strong class="oe iu">AuthContext</strong>. </span><span id="f80d" class="mk ml it oe b gy om oj l ok ol">This object represents the current context value for our context and is exported along with the <strong class="oe iu">AuthContext</strong> and the <strong class="oe iu">Provider</strong>.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak"> provider.js </strong></p></figure><h2 id="2ea8" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第六步:减肥药</h2><p id="8d9e" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">app</code>文件夹中，新建一个文件:<code class="fe oo op oq oe b">reducer.js</code> <em class="on">。</em></p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="e3e0" class="mk ml it oe b gy oi oj l ok ol">The reducer is in charge updating the app state based on the dispatched action.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak"> reducer.js </strong></p></figure><h2 id="aa8b" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第七步:服务</h2><p id="8cbc" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">services</code>文件夹中，新建一个文件:<code class="fe oo op oq oe b">auth.js</code> <em class="on">。</em></p><p id="0713" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该文件将包含访问身份验证API端点所需的以下所有函数。</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="eb9f" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">register<br/></strong>makes API request to register the user.</span><span id="f031" class="mk ml it oe b gy om oj l ok ol">Accepts users data as parameter.</span><span id="0596" class="mk ml it oe b gy om oj l ok ol">--</span><span id="9ea5" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">login<br/></strong>makes API request to login the user.</span><span id="6e63" class="mk ml it oe b gy om oj l ok ol">Accepts users data as parameter.</span><span id="46e5" class="mk ml it oe b gy om oj l ok ol">---</span><span id="b745" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">forgotPassword<br/></strong>makes API request to login the user.</span><span id="2cc3" class="mk ml it oe b gy om oj l ok ol">Accepts users <strong class="oe iu">'email' in an object</strong> as parameter.</span><span id="989a" class="mk ml it oe b gy om oj l ok ol">---</span><span id="29a0" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">updateProfile<br/></strong>makes API request to update users data.</span><span id="a749" class="mk ml it oe b gy om oj l ok ol">Accepts <strong class="oe iu">userId</strong> and <strong class="oe iu">data</strong> as parameter.</span><span id="2f7d" class="mk ml it oe b gy om oj l ok ol">Loops through the data passed to create a <strong class="oe iu">FormData<em class="on"> </em></strong>object.</span><span id="3061" class="mk ml it oe b gy om oj l ok ol">An <strong class="oe iu">axios options object</strong> is created with the content type set to "multipart/form-data" to allow for image upload.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak">服务/认证服务</strong></p></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="6ce4" class="np ml it bd mm nq nr ns mp nt nu nv ms jz nw ka mv kc nx kd my kf ny kg nb nz bi translated">第3部分— CSR(组件、场景、路线)</h1><h2 id="9f81" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第八步:组件</h2><p id="4ec7" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">components</code>文件夹中，创建以下文件:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="115f" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">CTA.js</strong></span><span id="6437" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">props<br/></strong>title: E.g. "Already have an account?"</span><span id="6abb" class="mk ml it oe b gy om oj l ok ol">ctaText: (e.g 'Login')<br/>onPress: (CTA action - e.g. Navigate to another scene)</span><span id="7c82" class="mk ml it oe b gy om oj l ok ol">style: (styles for the panel container)<br/>titleStyle: (styles for the title)<br/>ctaStyle: (styles for the cta)</span></pre></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><pre class="od oe of og aw oh bi"><span id="4a2a" class="mk ml it oe b gy ot ou ov ow ox oj l ok ol"><strong class="oe iu">Shared.js</strong></span><span id="8481" class="mk ml it oe b gy om oj l ok ol">In here, 2 components are created, Header and ErrorText, one is used for displaying a header in the scene and the other for displaying errors.</span><span id="5c03" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">props<br/>(Header) </strong>title: E.g. "Login"<br/><strong class="oe iu">(Error) </strong>error: the error message to display</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak">组件</strong></p></figure><h2 id="541f" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第九步:场景</h2><p id="adb7" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">scenes</code>文件夹中创建两个文件夹，并创建以下文件:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="92de" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">auth/</strong><strong class="oe iu">Register.js <br/></strong><strong class="oe iu">auth/</strong><strong class="oe iu">Login.js<br/></strong><strong class="oe iu">auth/</strong><strong class="oe iu">Username.js<br/></strong><strong class="oe iu">auth/</strong><strong class="oe iu">ForgotPassword.js</strong></span><span id="c390" class="mk ml it oe b gy om oj l ok ol">All scenes use the Header and ErrorText components.</span><span id="61aa" class="mk ml it oe b gy om oj l ok ol">---</span><span id="4e92" class="mk ml it oe b gy om oj l ok ol">Register scene calls the auth service <strong class="oe iu">register</strong><em class="on"> </em>function to register the new user. On success, the app replaces the current scene with the <strong class="oe iu">Login</strong> scene. Uses CTA component.</span><span id="0a8a" class="mk ml it oe b gy om oj l ok ol">---</span><span id="40d6" class="mk ml it oe b gy om oj l ok ol">Login scene calls the auth service<em class="on"> </em><strong class="oe iu">login</strong><em class="on"> </em>function to log user in. On success, the app navigates to the <strong class="oe iu">Home</strong> scene. Uses CTA component.</span><span id="d48c" class="mk ml it oe b gy om oj l ok ol">---</span><span id="adaf" class="mk ml it oe b gy om oj l ok ol">Username scene calls the auth service <strong class="oe iu">updateProfile</strong><em class="on"> </em>function to update the users' data. On success, the app navigates to the <strong class="oe iu">Home</strong> scene.</span><span id="aad2" class="mk ml it oe b gy om oj l ok ol">---</span><span id="708c" class="mk ml it oe b gy om oj l ok ol">Forgot Password scene calls the auth service <strong class="oe iu">forgotPassword</strong><em class="on"> </em>function to update the users' data. On success, the app navigates back to the <strong class="oe iu">Login</strong> scene.</span></pre></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><pre class="od oe of og aw oh bi"><span id="92cb" class="mk ml it oe b gy ot ou ov ow ox oj l ok ol"><strong class="oe iu">auth/</strong><strong class="oe iu">AuthLoading.js</strong></span><span id="4f20" class="mk ml it oe b gy om oj l ok ol">Displays a loading screen while the app checks if the user is logged in.</span><span id="0ec2" class="mk ml it oe b gy om oj l ok ol">Uses the <strong class="oe iu">useAuth</strong> object to retrieve the <strong class="oe iu">getAuthState</strong> function. If a user exist, checks if the username has been set, if yes, the app navigates to the <strong class="oe iu">Home</strong> scene, if not, navigates to the <strong class="oe iu">Username</strong> scene.</span><span id="e78f" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">const </strong>{ getAuthState } = <em class="on">useAuth</em>();<br/><strong class="oe iu">const </strong>user = <strong class="oe iu">await </strong>getAuthState();</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak">认证场景</strong></p></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="a9fb" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">home/</strong><strong class="oe iu">Home.js</strong></span><span id="7818" class="mk ml it oe b gy om oj l ok ol">Displays a screen with a welcome message and a 'Logout' and 'Update Profile' button. Uses the <strong class="oe iu">useAuth</strong> object to retrieve the users data and the <strong class="oe iu">handleLogout </strong>function. <br/><br/><strong class="oe iu">const </strong>{state, handleLogout} = useAuth();<br/><strong class="oe iu">const </strong>user = state.<strong class="oe iu">user</strong>;</span><span id="d1fe" class="mk ml it oe b gy om oj l ok ol">---</span><span id="2422" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">home/</strong><strong class="oe iu">UpdateProfile.js</strong></span><span id="7d79" class="mk ml it oe b gy om oj l ok ol">Calls the auth service <strong class="oe iu">updateProfile</strong><em class="on"> </em>function to update the users' data. On success, the app navigates back to the <strong class="oe iu">Home</strong> scene.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak">家居场景</strong></p></figure><h2 id="445a" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">第十步:路线</h2><p id="019c" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">routes</code>文件夹中，创建两个文件:<code class="fe oo op oq oe b">auth.js</code> <em class="on"> </em>和<em class="on"> </em> <code class="fe oo op oq oe b">home.js</code> <em class="on">。</em></p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="1cc4" class="mk ml it oe b gy oi oj l ok ol">In these files, React Navigation <strong class="oe iu">createStackNavigator<em class="on"> </em></strong>function is used to create the routes stacks.</span><span id="c693" class="mk ml it oe b gy om oj l ok ol">The authentication routes stack, consists of the Register, Login, Username and ForgotPassword scenes.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak">路线</strong></p></figure></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="fe0f" class="np ml it bd mm nq nr ns mp nt nu nv ms jz nw ka mv kc nx kd my kf ny kg nb nz bi translated">第4部分—结论(RA)</h1><h2 id="c727" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">路由器</h2><p id="1502" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<code class="fe oo op oq oe b">app</code>文件夹中，新建一个文件:<code class="fe oo op oq oe b">router.js</code> <em class="on">。</em></p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="d231" class="mk ml it oe b gy oi oj l ok ol">Using the <strong class="oe iu">createSwitchNavigator</strong> function, the apps routes stack is created consisting of the <strong class="oe iu">AuthLoading</strong> scene, the authentication routes stack, and the home stack.</span><span id="5ea4" class="mk ml it oe b gy om oj l ok ol">The <strong class="oe iu">Provider </strong>is imported and the<strong class="oe iu"> </strong>apps routes stack is wrapped in it, making the context value available across all scenes.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak"> router.js </strong></p></figure><h2 id="78c4" class="mk ml it bd mm mn mo dn mp mq mr dp ms li mt mu mv lm mw mx my lq mz na nb nc bi translated">App.js</h2><p id="7d08" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">这个文件是我们应用程序的主要入口点:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="a0ba" class="mk ml it oe b gy oi oj l ok ol">In this file, the router is imported. Update the App.js file with the code below.</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak"> App.js </strong></p></figure><h1 id="bbb5" class="np ml it bd mm nq oy ns mp nt oz nv ms jz pa ka mv kc pb kd my kf pc kg nb nz bi translated">第十步:测试</h1><p id="9858" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">运行下面的命令来测试应用程序。</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="721e" class="mk ml it oe b gy oi oj l ok ol"><strong class="oe iu">Expo</strong><br/>$ expo start</span><span id="af91" class="mk ml it oe b gy om oj l ok ol"><strong class="oe iu">React Native CLI<br/></strong>$ npx react-native run-ios</span></pre><h1 id="4aea" class="np ml it bd mm nq oy ns mp nt oz nv ms jz pa ka mv kc pb kd my kf pc kg nb nz bi translated">那都是乡亲们！</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pd os l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">欢迎来到2020年</p></figure><h1 id="7e36" class="np ml it bd mm nq oy ns mp nt oz nv ms jz pa ka mv kc pb kd my kf pc kg nb nz bi translated">变更日志</h1><ol class=""><li id="8452" class="lv lw it lb b lc nd lf ne li nf lm ng lq nh lu pe mb mc md bi translated"><strong class="lb iu"> React本地CLI指令和GitHub Repo已添加(2020年3月)</strong></li></ol><h1 id="e8c6" class="np ml it bd mm nq oy ns mp nt oz nv ms jz pa ka mv kc pb kd my kf pc kg nb nz bi translated">相关教程</h1><ol class=""><li id="5a6b" class="lv lw it lb b lc nd lf ne li nf lm ng lq nh lu pe mb mc md bi translated"><a class="ae ky" href="/mesan-digital/tutorial-1a-react-native-with-react-hooks-and-redux-boilerplate-75014ca8dee4" rel="noopener ugc nofollow" target="_blank">用React钩子和Redux样板文件来反应本地</a></li><li id="f823" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu pe mb mc md bi translated"><a class="ae ky" href="/mesan-digital/tutorial-2a-how-to-add-crud-operations-to-your-react-native-app-using-react-hooks-and-redux-5896ebab89ea" rel="noopener ugc nofollow" target="_blank">如何使用React钩子和Redux将CRUD操作添加到React原生应用中</a></li><li id="9f4f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu pe mb mc md bi translated"><a class="ae ky" href="https://medium.com/swlh/how-to-build-a-news-app-with-search-and-load-more-functionality-using-react-native-and-redux-2875e827cd7f" rel="noopener">如何使用React Native和Redux构建一个具有搜索和加载更多功能的新闻App。</a></li></ol></div></div>    
</body>
</html>