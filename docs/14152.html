<html>
<head>
<title>Want To Set Up Your Next React Native Project Faster? Use CLI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">想要更快地设置下一个React原生项目吗？使用CLI</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/want-to-setup-your-next-react-native-project-faster-use-cli-4d0b7ee442d9?source=collection_archive---------4-----------------------#2022-11-11">https://betterprogramming.pub/want-to-setup-your-next-react-native-project-faster-use-cli-4d0b7ee442d9?source=collection_archive---------4-----------------------#2022-11-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="520b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Node.js构建您自己的CLI</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0e041bdd2798b9755e6bd9f58f6c240c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RwzOA7L__cpSKVYH"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">凯文·Ku在Unsplash<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></p></figure><p id="ded5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当涉及到在React Native中设置您的项目时，像所有其他框架一样，您有两种选择:</p><ol class=""><li id="e928" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">你做一个全新的安装，然后一个接一个地添加你的模块</li><li id="6a0a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">您克隆了一个初学者模板，然后开始编码</li></ol><p id="592b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，初学者模板是快速入门的理想选择，因为它带有一些现成的屏幕和功能，但问题是，由于初学者工具包不经常更新，模块通常落后于其最新版本，因此您的整个应用程序可能会过时。</p><p id="d2de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我们能做些什么呢？从头开始一个项目似乎是一条可行之路，但是我们如何才能简化和加快这个过程呢？</p><h1 id="ed2d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">输入CLI</h1><p id="5fb3" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">等等！我们在说什么CLI？在本文中，我们将构建自己的CLI，用于即将到来的项目。我们的CLI将负责安装React Native和您经常使用的模块。我们还将打包我们的CLI，并在npm上发布。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="82ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">酷！开始吧！</p><p id="0b4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这个项目，我们将使用<a class="ae kv" href="https://www.npmjs.com/package/commander" rel="noopener ugc nofollow" target="_blank"> commander.js </a>，因为我们在Node.js环境中。Commander.js是一个流行的、固执己见的工具，它可以让你在终端上使用命令程序。我们还将使用<a class="ae kv" href="https://www.npmjs.com/package/shelljs" rel="noopener ugc nofollow" target="_blank"> shelljs </a>在每个操作系统环境中一致地运行shell命令。</p><p id="7516" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们先决定盒子里会有什么。尽管React Native有很多很棒的库，但基本的都是一样的。以下是我将使用的模块列表示例:</p><ul class=""><li id="ed89" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr nk ly lz ma bi translated">反应导航</li><li id="e4e6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nk ly lz ma bi translated">Redux工具包</li><li id="4bd4" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nk ly lz ma bi translated">反应自然复活</li><li id="c795" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nk ly lz ma bi translated">反应查询</li><li id="77af" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nk ly lz ma bi translated">Axios</li><li id="d0fc" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nk ly lz ma bi translated">洛蒂</li><li id="013e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr nk ly lz ma bi translated">福米克和耶</li></ul><p id="e1b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，您的可能会有所不同，请随意添加您自己的内容。此时，我们可以像这样组成这些模块的数组:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="b022" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，让我们通过<code class="fe nn no np nq b">npm i commander --save</code>安装commander.js并开始编写我们的CLI:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="8abd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是我们的命令脚本的基本版本，它触发react-native安装并在之后退出。为了更好地理解，我们来分解一下:</p><p id="17e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们将一个shebang bash指令放在我们的脚本之上，以便在UNIX系统中访问可移植性。这也是我们的脚本在运行时像cli一样运行所必需的。然后我们介绍我们的程序，并定义它的名称、版本和描述。我选择了rncli作为名字，也就是说当你使用它的时候，你必须在终端中输入<code class="fe nn no np nq b">rncli</code>。Commander.js程序有命令，有参数，有选项。当您安装一个模块时，请考虑npm。例如，当您编写以下内容时:</p><pre class="kg kh ki kj gt nr nq ns bn nt nu bi"><span id="3694" class="nv mh iq nq b be nw nx l ny nz">npm install react-native --save</span></pre><p id="b942" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们有<code class="fe nn no np nq b">npm</code>是我们的程序，<code class="fe nn no np nq b">install</code>是我们的命令，<code class="fe nn no np nq b">react-native</code>是我们的参数，最后<code class="fe nn no np nq b">--save</code>是我们的选项。这个例子也是如此。我们得到了<code class="fe nn no np nq b">install</code>命令，并作为参数提供了要安装的目录。</p><p id="4687" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自变量为<code class="fe nn no np nq b"> &lt;required&gt;</code>或<code class="fe nn no np nq b">[optional]</code>。如果您省略了一个必需的参数，您将会得到一个错误。</p><p id="c916" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，在最后一行中，我们提供了一个要触发的操作，并运行默认的react-native install命令，就像我们从终端执行它一样。</p><p id="7b3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们继续安装我们的模块:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="30ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们生成一个模块名的连接字符串，并将其提供给<code class="fe nn no np nq b">npm install</code>命令。我们还为喜欢用TS编写的用户提供了<code class="fe nn no np nq b">--typescript</code>选项。</p><p id="f788" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一点上，我们实现了我们想要的:一个简单、枯燥的CLI，节省了我们几分钟的时间。然而，你想把它改进得更好一点，对吗？</p><h1 id="2020" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">越来越花哨</h1><p id="26cf" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">为了使我们的CLI更加友好和“现代”，我们可以添加一个向导模式来指导用户完成这些步骤。这个向导解释这个程序将做什么，询问首选语言，并列出模块名称及其最新版本号。</p><p id="61ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们首先从安装以下模块开始:</p><pre class="kg kh ki kj gt nr nq ns bn nt nu bi"><span id="ca4b" class="nv mh iq nq b be nw nx l ny nz">npm i figlet axios inquier loading-cli --save</span></pre><p id="3025" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简而言之，Inquier允许我们显示选择列表和输入。Figlet生成漂亮的ASCII文本、loading-cli和colors-cli，为我们的cli添加一些颜色和微调器。我们还将通过npm端点获取软件包版本。因此，我们将使用axios(对我来说，这似乎更方便)，但是您也可以使用简单的fetch。</p><p id="d9db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以添加新的命令“向导”，不提供任何参数，让程序一步一步地指导我们。</p><p id="db56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们的最终代码将如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="fd06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">酷！我们的节目准备好了。如果我们首先传递一个像<code class="fe nn no np nq b">rncli wizard</code>这样的“向导”参数，它会列出我们的模块和它们的最新版本，并询问我们是否想继续。如果我们不这样做，它将立即退出。然后它会询问语言和目录。获得这些信息后，它将开始安装模块，就像我们之前在bare CLI中所做的那样。</p><h1 id="a9bb" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">出版</h1><p id="4041" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">最后一步是发布。在将我们的包发送给npm之前，请确保您的<code class="fe nn no np nq b">package.json</code>包含这两个条目:</p><pre class="kg kh ki kj gt nr nq ns bn nt nu bi"><span id="6f97" class="nv mh iq nq b be nw nx l ny nz">"main": "index.js",<br/>"bin": {"rncli": "index.js"},</span></pre><p id="5999" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要与这里的<code class="fe nn no np nq b">bin</code>名称混淆。程序包名称将显示在npm中，而不是CLI名称中。如果你的名字被占用了，你可以用别的名字来改变这个名字。</p><p id="fdb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，登录npm并发布您的包:</p><pre class="kg kh ki kj gt nr nq ns bn nt nu bi"><span id="1718" class="nv mh iq nq b be nw nx l ny nz">npm login<br/>npm publish</span></pre><p id="d515" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！您的CLI在npm上公开发布。你现在可以用<code class="fe nn no np nq b">npx rncli wizard</code>快速测试，检查事情是否正常。</p><h1 id="f366" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="93d3" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在本文中，我们简要地进入了CLI世界，了解了如何在Node.js中构建命令程序。您可以使用这个示例，并针对任何使用npm的语言对其进行修改，如Angular、React.js或bare Node.js。您可以通过添加目录结构来进一步改进它，或者通过添加颜色等来使终端更加美观。</p><p id="e762" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望对你有用。如果您有任何意见，请告诉我！</p><p id="b688" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码快乐！</p></div></div>    
</body>
</html>