<html>
<head>
<title>Build Your First Mobile Linux App With React And Tauri</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和Tauri构建您的第一个移动Linux应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/pinephone-app-development-a-quick-start-guide-97f2d90a334c?source=collection_archive---------3-----------------------#2022-09-22">https://betterprogramming.pub/pinephone-app-development-a-quick-start-guide-97f2d90a334c?source=collection_archive---------3-----------------------#2022-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="94e5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">PinePhone应用开发:快速入门指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/73147c69d51849ff4fa2324bcff8ee97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1shPlJVHVnwi3QpFoc_NsQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">为PinePhone创建应用程序的新方法</p></figure><p id="1222" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在过去的几年里，纯Linux驱动的移动设备已经成为主流。在Android设备上运行定制内核的能力并不新鲜，iPhone越狱也是如此。</p><p id="cc70" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里的不同之处在于，这些设备(至少其中许多设备)都是从零开始构建的，专注于免费和开源技术。因此，他们的目标是运行完全开放的基于Linux的操作系统，并且在许多情况下包括物理硬件开关来禁用各种组件，以提供额外的用户隐私。</p><p id="3bfe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">功能更强大、价格更低廉的ARM芯片的出现，意味着许多设备有可能达到或接近运行iOS或Android的中档闭源设备的水平。</p><p id="0321" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">许多爱好者和开发人员(比如我自己)已经开始蜂拥购买这些设备，这让我们中的许多人在得到一台设备后都有了同样的问题:<strong class="kx ir">“这太棒了，但是我该如何为它创建自己的应用程序呢？”</strong>。我希望这篇文章能帮助你们中的一些人回答这个问题，并帮助你们为这些流行的设备开发自己的应用程序！</p><p id="2701" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">毫无疑问，市场上最受欢迎的男士晚礼服手机之一是由T4 pine 64 T5生产的T2 pine phone T3(以及最近的PinePhone Pro)。不幸的是，我的预算中没有购买新的专业版，所以只能选择开发第一代社区版。这里概述的项目绝不是局限于在这些设备上运行。如果你有一个类似于Librem 5的Purism，看看你如何让它工作！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/3d01049b67b1f964645385e96a9b5560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1TFQTigqD73MJHYM5XR2pw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">松果电话</p></figure><p id="dabf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我的上一篇文章中，我写了一个叫做Tauri的新框架，我已经开始用它来取代我的基于电子的项目(查看一下)。与Electron不同，它使用Rust来处理所有后端功能，并允许使用web技术来构建您的UI，而无需使用服务器来进行通信。使用Tauri的另一个优势是最终二进制文件的整体大小大大减小，这使得上传、共享和传输到您的设备上变得更加容易。</p><p id="99b9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">尽管我最初使用Tauri创建了一个新的桌面应用程序，但我认为在PinePhone上测试它的功能会很棒！让我们进入正题，好吗？</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="a9ce" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">开始项目</h1><p id="6c64" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">Tauri文档提供了使用命令行工具从头创建新项目的优秀指南，包括使用您选择的前端框架生成完整框架的能力。因为我已经使用React开发了一个web应用程序，所以我已经有了UI代码结构。既然是这样，我需要做的就是在项目目录中创建Tauri所需的Rust和配置文件:</p><p id="920e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装CLI工具→ <code class="fe mx my mz na b">yarn add -D @tauri-apps/cli</code></p><p id="e1cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">初始化Tauri → <code class="fe mx my mz na b">yarn tauri init</code></p><p id="219e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您正在从头开始创建一个全新的项目，并且您需要为前端和后端生成所有需要的文件<strong class="kx ir">，您应该运行:</strong></p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="1287" class="nf mb iq na b gy ng nh l ni nj">yarn create tauri-app</span></pre><h2 id="bda3" class="nf mb iq bd mc nk nl dn mg nm nn dp mk le no np mm li nq nr mo lm ns nt mq nu bi translated">后端功能</h2><p id="61cc" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">因为我正在构建一个需要定期向本地网络上的Raspberry Pi发出GET请求的仪表板应用程序，所以我必须确保包含我的应用程序的其他版本用来发出这些请求的相同后端Rust函数。</p><p id="a8a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用Tauri，不需要为UI创建一个<code class="fe mx my mz na b">preload.js</code>文件来调用后端函数。相反，所需要的只是将<code class="fe mx my mz na b">@tauri-apps/api</code>库添加到您的<code class="fe mx my mz na b">package.json</code>文件中。然后，您可以通过以下导入从JavaScript/React代码中调用该函数:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="441b" class="nf mb iq na b gy ng nh l ni nj">import { invoke } from '@tauri-apps/api/tauri'</span></pre><p id="d96e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<code class="fe mx my mz na b">invoke</code>，您可以通过名称调用您的后端函数，传递任何必要的参数。对于我的应用程序，我使用一个JavaScript函数进行调用，该函数传递我发出请求的URL端点，以便检索特定的传感器值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="71d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">相应的后端函数包含在Tauri在项目的<code class="fe mx my mz na b">src-tauri</code>目录中创建的<code class="fe mx my mz na b">main.rs</code>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="b1a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">记住这一点很重要，因为这个应用程序是专门为在PinePhone(或其他移动Linux设备)上运行而编写的，<strong class="kx ir">组件大小和窗口尺寸需要考虑在内。</strong>为了让您了解什么样的尺寸最适合这个项目，我已经创建了一个公共Gitlab repo，其中包含所有源代码以及成功运行该应用程序的说明:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0a88f746c83de5e8c9f3d2a3d3713357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R6McxJVTMYcCyXfPEiM_dA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终产品</p></figure><div class="nx ny gp gr nz oa"><a href="https://gitlab.com/dedSyn4ps3/enviroplus-pinephone" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">ed Rutherford/enviro plus pine phone git lab</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">GitLab.com</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">gitlab.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kp oa"/></div></div></a></div><h1 id="7c3e" class="ma mb iq bd mc md op mf mg mh oq mj mk jw or jx mm jz os ka mo kc ot kd mq mr bi translated">二进制创作</h1><p id="b635" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">一旦你完成了设置你的界面和任何后端函数调用的过程，测试和调试了所有的东西，你可能想要构建一个最终的产品！因为这些设备运行Linux，Tauri将构建一个<code class="fe mx my mz na b">.deb</code>和<code class="fe mx my mz na b">.AppImage</code>二进制文件来运行和分发您的应用程序。构建一切就像跑步一样简单:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="c878" class="nf mb iq na b gy ng nh l ni nj">yarn tauri build</span></pre><p id="3e14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我试图在<code class="fe mx my mz na b">aarch64</code>平台上运行时，我确实注意到了自动化AppImage构建脚本的一个问题，所以为了成功地完成我的应用程序的AppImage构建，我简单地下载并运行了<code class="fe mx my mz na b">appimagetool</code>实用程序来完成打包:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="c6f4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后，您将得到一个全新的AppImage，内置了运行所需的一切！简单地使它可执行，并运行它来享受你的新PinePhone(或类似的)应用程序！</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="34ec" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">一句警告</h1><p id="e439" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">我爱我的PinePhone手机，但是当涉及到在设备上单独进行所有的开发时，我建议不要这样做。<strong class="kx ir">它有足够的能力</strong>，但是热重装会比你想要的花费更多的时间<em class="ou">，构建最终的二进制文件</em>也是如此。</p><p id="103e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我发现在一个独立的ARM驱动的设备(我的Raspberry Pi 4)上进行大部分开发和调试要快得多。一旦你算出了正确的窗口尺寸，<code class="fe mx my mz na b">dev</code>预览仍然提供了一个准确的应用程序的外观。</p><p id="f3fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Pi上构建最终的可执行文件后，使用<code class="fe mx my mz na b">scp</code>或图形<code class="fe mx my mz na b">SFTP</code>工具转移到PinePhone上非常简单！</p></div></div>    
</body>
</html>