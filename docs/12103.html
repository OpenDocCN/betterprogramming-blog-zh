<html>
<head>
<title>A Direct Comparison Between UIKit and SwiftUI by Building the Same App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过构建相同的应用程序直接比较UIKit和SwiftUI</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-simplicity-of-swiftui-a-direct-comparison-between-uikit-and-swiftui-by-example-97a417a17898?source=collection_archive---------15-----------------------#2022-05-11">https://betterprogramming.pub/the-simplicity-of-swiftui-a-direct-comparison-between-uikit-and-swiftui-by-example-97a417a17898?source=collection_archive---------15-----------------------#2022-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="97d3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">SwiftUI的简单性</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/24d9f409f7059674ea16a0f03c84051b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eu8tqOJiWvA9MKKe"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">麦克斯韦·纳尔逊</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5fbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我实话实说。我不想喜欢SwiftUI…但我喜欢。自从SwiftUI在2019年底推出以来，我一直坚持不打算使用它，我将只坚持使用UIKit。</p><p id="e289" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然有些东西仍然需要依赖于UIKit的使用，但SwiftUI有一种神奇的方式，可以轻松地创建UI元素，这在UIKit中可能是一个令人头疼的问题。</p><p id="9230" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Swift作为一种语言，给了苹果团队思考iOS开发者经常做的事情和UIKit面临的问题的时间。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="ff85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你想做一些简单的事情吗，比如给标签或带有文本的自定义按钮中的图像添加填充？当然…！</p><p id="7a73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以用某种UIEdgeInsets子类化一个<code class="fe lz ma mb mc b">UILabel</code>和<code class="fe lz ma mb mc b">initialize</code>，或者你可以为你的子类添加覆盖函数或属性，比如<code class="fe lz ma mb mc b">intrinsicContentSize: CGSize</code>。</p><p id="883f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多有效的解决方案，但SwiftUI的一大亮点是<code class="fe lz ma mb mc b">ViewModifiers</code>。</p><div class="md me gp gr mf mg"><a href="https://medium.com/@kysodev/create-a-clean-uitextfield-with-an-embedded-uiimage-or-static-text-390c121e384d" rel="noopener follow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd ir gy z fp ml fr fs mm fu fw ip bi translated">用嵌入的UIImage或静态文本创建一个干净的UITextField</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">如果你和我一样，你会知道那种不想在遇到障碍时翻身的感觉，同时…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">medium.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu kp mg"/></div></div></a></div><p id="b2ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在过去的几天里，我玩了一会SwiftUI，真的看到了Swift新开发的吸引力。</p><p id="1dac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几周前，我写了一篇文章，提出了解决我在<code class="fe lz ma mb mc b">UITextField</code>问题中的小“形象”的方法，并决定在SwiftUI中尝试一下！</p><p id="c598" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我相信很多读到这里的人会认为这在SwiftUI中是微不足道的。</p><p id="65f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文不是针对目前正在学习/了解SwiftUI的人。相反，这是为了展示我之前在UIKit中创建的一些东西的一个例子，以供那些寻求某种直接比较的人使用。</p><h2 id="d063" class="mv mw iq bd mx my mz dn na nb nc dp nd lf ne nf ng lj nh ni nj ln nk nl nm nn bi translated">第一个结果</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/d1d9c0eb00fb8dd908b620b85059aae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/1*2s-vo4D71oE5TVgql-ELGA.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一个简单的TextField，带有一个使用SwiftUI包装在HStack中的图像</p></figure><p id="d6b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的代码是用于上面的GIF。这是一个非常简单的例子。</p><p id="fcc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将它包装在一个<code class="fe lz ma mb mc b">NavigationView</code> ( <code class="fe lz ma mb mc b">UINavigationController</code>中，仅用于UIKit用户),并将其放在一个<code class="fe lz ma mb mc b">Form</code>中，它看起来相当于一个<code class="fe lz ma mb mc b">UITableView</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="fd91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然看起来有点重复，对吧？我几乎不敢相信我在打字。我们已经节省了许多行代码来配置我们的<code class="fe lz ma mb mc b">UITableView</code>、<code class="fe lz ma mb mc b">UINavigationController</code> / <code class="fe lz ma mb mc b">UICollectionView</code>、<code class="fe lz ma mb mc b">NSLayoutConstraint</code>、<code class="fe lz ma mb mc b">UITableViewDelegate</code>、<code class="fe lz ma mb mc b">UITableViewDataSource</code> …不要忘记上面的自定义<code class="fe lz ma mb mc b">UITextField</code>！</p><h2 id="7e72" class="mv mw iq bd mx my mz dn na nb nc dp nd lf ne nf ng lj nh ni nj ln nk nl nm nn bi translated"><strong class="ak"> <em class="nr">稍微重构</em> </strong></h2><p id="b288" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">如果我们按下<code class="fe lz ma mb mc b">cmd</code>键并点击<code class="fe lz ma mb mc b">HStack</code>，我们可以选择将这段代码提取到它自己的子视图中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/87d75ba5b4e536f77b9b0bed70183b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*cPdgWsQV0RQpGbM2V7mg9Q.png"/></div></figure><p id="d14d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，Swift将友好地为我们命名这个<code class="fe lz ma mb mc b">ExtractedView()</code>，直到我们为它找到一个合适的名称，并将其放在下面的<code class="fe lz ma mb mc b">ContentView()</code>之外。</p><p id="ee31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将重命名这个<code class="fe lz ma mb mc b">PersonalInfoStack</code>，并为我们的<code class="fe lz ma mb mc b">image</code>和<code class="fe lz ma mb mc b">textField</code>添加3个新属性。</p><p id="9539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将返回“<em class="ny">某种类型的</em> <code class="fe lz ma mb mc b"><em class="ny">View</em></code>”，在本例中，它将返回一个带有<code class="fe lz ma mb mc b">image</code>和<code class="fe lz ma mb mc b">textField</code>的HStack。然后，当我们调用<code class="fe lz ma mb mc b">PersonalInfoStack()</code>的实例时，我们通过新的构造函数传递属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在这个子视图中使用的修改器将被应用到每个实例，所以要小心使用。您可以为特定视图添加单独的修改器，如下所示。</p></figure><p id="f34c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我们在新的子视图上使用了一个<code class="fe lz ma mb mc b">@State</code>属性，所以我们需要在<code class="fe lz ma mb mc b">textFieldText: String</code>属性上使用<code class="fe lz ma mb mc b">@Binding</code>关键字来告诉Swift，“<em class="ny">嘿，我将在这里使用一个值，但我希望它与我传入的值相同……如果我在这里更新，就在最初声明它的地方更新它</em>”。</p><p id="f905" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在来揭晓新重构的<code class="fe lz ma mb mc b">ContentView</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="b19f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的，到了。</p><p id="7aca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个现在看起来很小。对于我们用户界面上的东西来说，这实在是小得可笑。我们不想走极端，但是让我们想象你在这里有更多的观点和很多的逻辑。</p><p id="188c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们不想实现的是代码变得不可读/难以管理的MVC问题！</p><p id="25e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以选择重构<code class="fe lz ma mb mc b">Section</code>，但是要小心；为了理智而抽象和抽象那是<strong class="ky ir"> <em class="ny">所以</em> </strong>抽象，你无法理解是怎么回事！</p><p id="3cb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就个人而言，我喜欢保持代码的某些部分不变，以提高可读性，比如决定<strong class="ky ir"> <em class="ny">而不是</em> </strong>来重构<code class="fe lz ma mb mc b">Section</code>。</p><p id="9112" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实际编码的时候，我经常用<code class="fe lz ma mb mc b">alt</code> + <code class="fe lz ma mb mc b">cmd</code> + <code class="fe lz ma mb mc b">&lt;</code>或者<code class="fe lz ma mb mc b">alt</code> + <code class="fe lz ma mb mc b">cmd</code> + <code class="fe lz ma mb mc b">&gt;</code>折叠打开代码。这绝对是一个长期受欢迎的小帮手<code class="fe lz ma mb mc b">ContentView()</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/20703e80855b4ad0955aad4f3b83be10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/1*3vnb2QHrBBSkmRMz40RX9A.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将光标移到花括号内，使用上面的快捷键。代码将在花括号的范围内折叠，如图所示。</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="2605" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ny">继续！</em></p><p id="74ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后一个例子是一个显示和隐藏文本的<code class="fe lz ma mb mc b">TextField</code>，以匹配<a class="ae kv" href="https://medium.com/@kysodev/create-a-clean-uitextfield-with-an-embedded-uiimage-or-static-text-390c121e384d" rel="noopener">我之前的文章</a>。这方面的一个例子是某种类型的密码或安全条目。</p><p id="c8ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在UIKit中，我们将把<code class="fe lz ma mb mc b">textField.isSecureTextEntry</code>属性设置为<code class="fe lz ma mb mc b">= true</code>。在SwiftUI中，我们可以编写以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="8d44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你在上面看到的，我们添加了一个布尔值来决定密码是否可见。</p><p id="301d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该布尔值还通过三元运算符确定图像所使用的图像类型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/2c6b5eae6d65740a8e3022c6458d3fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*_J1pdiNrjYkoRPV1RwClfg.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">你发现了吗？填充(。trailing)我们添加到文本中的ViewModifier？！只有一行，我们现在有一点填充正是我们想要的！</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="5309" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ny">这不是在UIKit上转储！</em> </strong></p><p id="9f77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实际上，当我试图在SwiftUI中改变一个<code class="fe lz ma mb mc b">Form</code>的背景颜色时遇到了一个有趣的问题，我很快发现我不得不依赖UIKit。我期望我能在<code class="fe lz ma mb mc b">Form</code>上添加一个<code class="fe lz ma mb mc b">Color</code>修改器。</p><p id="b332" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在那不起作用之后，我试着用一个<code class="fe lz ma mb mc b">ZStack</code>把它包起来，也不起作用。经过一番研究，我发现了以下解决方案，对那些可能觉得有用的人来说:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="36ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不是这里最好的颜色选择，但它是一个需要切换框架并在必要时实现UIKit的例子。</p><p id="49ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我仍然会使用UIKit，但是从这个小例子和我在UIKit和SwiftUI中实现相同内容的比较来看，可以肯定地说SwiftUI将是我渴望了解更多的东西！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="27a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>