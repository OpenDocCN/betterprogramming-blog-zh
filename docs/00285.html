<html>
<head>
<title>Understanding Linux Systemctl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Linux系统ctl</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/linux-systemctl-46bd0a11e27b?source=collection_archive---------0-----------------------#2019-02-07">https://betterprogramming.pub/linux-systemctl-46bd0a11e27b?source=collection_archive---------0-----------------------#2019-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d70e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在Linux 中使用<strong class="ak"> systemctl命令</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e96009de14be001c9994e71733a46fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zyFTI9LW9MiwebFEOzG5YA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://pixabay.com/es/photos/contador-cinta-grabadora-de-cassette-949233/" rel="noopener ugc nofollow" target="_blank"> TBIT </a>在<a class="ae kv" href="https://pixabay.com/es/photos/contador-cinta-grabadora-de-cassette-949233/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的照片</p></figure><p id="03fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是来自维基百科的Systemd的定义:</p><blockquote class="ls lt lu"><p id="a41f" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">Systemd是一个软件套件，它为Linux操作系统提供了基本的构建模块。它包括systemd“系统和服务管理器”，一个用于引导用户空间和管理用户进程的init系统。systemd旨在跨Linux发行版统一服务配置和行为。</p></blockquote><p id="3c79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在你对<strong class="ky ir"> Systemd </strong>，<strong class="ky ir">，</strong>着迷之前，也看看反对Systemd的<a class="ae kv" href="http://without-systemd.org/wiki/index.php/Arguments_against_systemd" rel="noopener ugc nofollow" target="_blank">论据。我个人觉得很好管理。由于我并不精通Linux，它帮助我少犯错误，并且它防止我因为懒惰和不熟悉而错过做一些事情。我使用一个名为<strong class="ky ir"> systemctl的命令。检查你的Linux发行版是否支持它。</strong></a></p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="b3f6" class="me mf iq ma b gy mg mh l mi mj"># which systemctl<br/>/bin/systemctl</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="971c" class="mr mf iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">便捷的命令</h1><h2 id="c507" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">启动应用程序</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="eb47" class="me mf iq ma b gy mg mh l mi mj">sudo systemctl start application<br/>#Example<br/>sudo systemctl start nginx</span></pre><h2 id="b978" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">停止应用程序</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="5bc4" class="me mf iq ma b gy mg mh l mi mj">sudo systemctl stop application<br/>#Example<br/>sudo systemctl stop nginx</span></pre><h2 id="8ef2" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">重启应用程序</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="655d" class="me mf iq ma b gy mg mh l mi mj">sudo systemctl restart application<br/>#Example<br/>sudo systemctl restart nginx</span></pre><h2 id="405b" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">重新加载应用程序</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="9b26" class="me mf iq ma b gy mg mh l mi mj">sudo systemctl reload application<br/>#Example<br/>sudo systemctl reload nginx</span></pre><h2 id="22ab" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">检查状态</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="710e" class="me mf iq ma b gy mg mh l mi mj">sudo systemctl status application<br/>#Example<br/>sudo systemctl status nginx</span></pre><h2 id="2ecd" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">状态输出示例</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="67f5" class="me mf iq ma b gy mg mh l mi mj"><strong class="ma ir">●</strong> nginx.service - A high performance web server and a reverse proxy server</span><span id="88ac" class="me mf iq ma b gy nt mh l mi mj">Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)</span><span id="bc5a" class="me mf iq ma b gy nt mh l mi mj">Active: <strong class="ma ir">active (running)</strong> since Wed 2019-01-30 11:29:16 IST; 1 weeks 0 days ago</span><span id="76c0" class="me mf iq ma b gy nt mh l mi mj">Docs: man:nginx(8)</span><span id="d831" class="me mf iq ma b gy nt mh l mi mj">Main PID: 909 (nginx)</span><span id="9719" class="me mf iq ma b gy nt mh l mi mj">Tasks: 2 (limit: 1152)</span><span id="8978" class="me mf iq ma b gy nt mh l mi mj">CGroup: /system.slice/nginx.service</span><span id="b451" class="me mf iq ma b gy nt mh l mi mj">├─909 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;</span><span id="5cba" class="me mf iq ma b gy nt mh l mi mj">└─911 nginx: worker process</span><span id="665f" class="me mf iq ma b gy nt mh l mi mj">Jan 30 11:29:15 ubuntu-s-1vcpu-1gb-blr1-01-monitoring systemd[1]: Starting A high performance web server and a reverse proxy server...</span><span id="0d54" class="me mf iq ma b gy nt mh l mi mj">Jan 30 11:29:16 ubuntu-s-1vcpu-1gb-blr1-01-monitoring systemd[1]: nginx.service: Failed to parse PID from file /run/nginx.pid: Invalid argument</span><span id="d39e" class="me mf iq ma b gy nt mh l mi mj">Jan 30 11:29:16 ubuntu-s-1vcpu-1gb-blr1-01-monitoring systemd[1]: Started A high performance web server and a reverse proxy server.</span></pre><h2 id="ae4e" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated"><strong class="ak">检查是否激活</strong></h2><p id="8c07" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">如果您正在使用类似<a class="ae kv" href="https://medium.com/@gokulnk/understanding-zabbix-f2a83eeb1221" rel="noopener"> Zabbix </a>的监控服务，并且需要检查服务是否处于活动状态，您可以使用:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="05ac" class="me mf iq ma b gy mg mh l mi mj"># systemctl is-active nginx</span><span id="3370" class="me mf iq ma b gy nt mh l mi mj">active</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="8896" class="mr mf iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">准备重启</h1><p id="4712" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">尽管我们采取了所有的预防措施，还是会有事情失败的情况。由于调试可能会花费更多的时间，并可能使您的应用程序或服务停止运行，我们可能会被迫重启我们的服务器。因此，确保重启时一切正常至关重要。</p><h2 id="71e3" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">列出所有加载的单元</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="2f40" class="me mf iq ma b gy mg mh l mi mj">systemctl <!-- -->list-units -all<!-- --> | grep loaded | awk '{print $1;}'</span></pre><h2 id="b41f" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">列出所有启用的设备</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="cc15" class="me mf iq ma b gy mg mh l mi mj">systemctl <!-- -->list-unit-files<!-- -->| grep enabled | awk '{print $1;}' &gt; enabled.txt</span></pre><p id="5e43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大多数时候，我们需要确保我们使用的所有服务都在启动脚本中。</p><h2 id="bb38" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">列出所有加载的服务</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="cd70" class="me mf iq ma b gy mg mh l mi mj">systemctl <!-- -->list-units -all<!-- --> | grep service | grep loaded | awk '{print $1;}'</span></pre><h2 id="57f5" class="me mf iq bd ms ni nj dn mw nk nl dp na lf nm nn nc lj no np ne ln nq nr ng ns bi translated">列出所有启用的服务</h2><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="bc65" class="me mf iq ma b gy mg mh l mi mj">systemctl <!-- -->list-unit-files<!-- --> | grep service | grep enabled | awk '{print $1;}' &gt; enabled.txt</span></pre><p id="0c4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要找到已加载但未启用的服务列表，我们可以执行以下操作:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="11c5" class="me mf iq ma b gy mg mh l mi mj">systemctl <!-- -->list-units -all<!-- --> | grep service | grep loaded | awk '{print $1;}' &gt; loaded.txt<br/>systemctl <!-- -->list-unit-files<!-- --> | grep service | grep enabled | awk '{print $1;}' &gt; enabled.txt<br/>diff -y loaded.txt enabled.txt<br/>#If you want a quick glance of missing ones you can also use<br/>diff -y loaded.txt enabled.txt | grep '&lt;'</span></pre><p id="9627" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道这不是万无一失的，但它能让您快速浏览丢失的服务。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="6c86" class="mr mf iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">Docker，Ansible等人。</h1><p id="9d79" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">确保您的服务器即使在重新启动后也能正常工作，让您晚上睡得更香。</p><p id="35bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们正在考虑将我们的工作流程转移到Docker和Ansible。这需要一些时间。在那之前，我们将使用一个通用的设置、像这样的工具和一个像<a class="ae kv" href="https://staging.app.learningpaths.io/#/highlights" rel="noopener ugc nofollow" target="_blank"> Zabbix </a>这样的监控工具。希望对你也有帮助。</p></div></div>    
</body>
</html>