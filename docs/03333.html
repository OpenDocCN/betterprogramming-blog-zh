<html>
<head>
<title>Functional Programming With Java: Streams</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java函数式编程:流</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/functional-programming-with-java-streams-f930e0e4d184?source=collection_archive---------6-----------------------#2020-02-04">https://betterprogramming.pub/functional-programming-with-java-streams-f930e0e4d184?source=collection_archive---------6-----------------------#2020-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="04ce" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最佳实践概述</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6e7dcf909d7fad8aa3f0386aba672387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LMkg5S9jZiQZ7B7s-jbASQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">西蒙·博克斯在<a class="ae ky" href="https://unsplash.com/@simonlerouge?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b8ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java 8给了我们<a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html" rel="noopener ugc nofollow" target="_blank">流API </a>，一个功能块的惰性顺序数据管道。它不是作为数据结构来实现的，也不是通过直接改变其元素来实现的。它只是一个<em class="lv">哑</em>管道，提供了操作的脚手架，使它真正成为一个<em class="lv">智能</em>管道。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7630" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">基本概念</h1><p id="ed27" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">streams背后的基本概念很简单:我们得到一个数据源，执行零个或多个中间操作，然后得到一个结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/42a8b77beab286a66b094d499985a9ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4bVRNjdhlFy0Nd7yq4Ydw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">流量</p></figure><p id="4e4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">流的各个部分可以分为三组:</p><ul class=""><li id="39be" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">获取流(源)</li><li id="d886" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">工作(中间操作)</li><li id="ce98" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">获得结果(终端操作)</li></ul><h2 id="2399" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">获取流</h2><p id="ce72" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">第一步是获取流。JDK的许多数据结构已经支持提供流:</p><ul class=""><li id="4df3" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#stream--" rel="noopener ugc nofollow" target="_blank">java.util.Collection#stream()</a></code></li><li id="3a60" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-" rel="noopener ugc nofollow" target="_blank">java.util.Arrays#stream(T[] array)</a></code></li><li id="2834" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#list-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank">java.nio.file.Files#list(Path dir)</a></code></li><li id="3bec" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-" rel="noopener ugc nofollow" target="_blank">java.nio.file.Files#lines(Path path)</a></code></li></ul><p id="e947" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者我们可以通过使用<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T...-" rel="noopener ugc nofollow" target="_blank">java.util.stream.Stream#of(T... values)</a></code>和我们的价值观来创造一个。类<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/StreamSupport.html" rel="noopener ugc nofollow" target="_blank">java.util.StreamSupport</a></code>也提供了大量的<code class="fe ob oc od oe b">static</code>方法来创建流。</p><h2 id="4adf" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">做工作</h2><p id="2312" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html" rel="noopener ugc nofollow" target="_blank">java.util.Stream</a></code>接口提供了许多不同的操作。</p><p id="352b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">过滤</strong></p><ul class=""><li id="dec2" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-" rel="noopener ugc nofollow" target="_blank">filter(Predicate&lt;? super T&gt; predicate)</a></code></li><li id="5b61" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#distinct--" rel="noopener ugc nofollow" target="_blank">distinct()</a></code></li></ul><p id="edc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">映射</strong></p><ul class=""><li id="af3f" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-" rel="noopener ugc nofollow" target="_blank">map(Function&lt;? super T, ? extends R&gt; mapper)</a></code></li><li id="c91e" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-" rel="noopener ugc nofollow" target="_blank">mapToInt(ToIntFunction&lt;? super T&gt; mapper)</a></code></li><li id="57c9" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToLong-java.util.function.ToLongFunction-" rel="noopener ugc nofollow" target="_blank">mapToLong(ToLongFunction&lt;? super T&gt; mapper)</a></code></li><li id="3ead" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToDouble-java.util.function.ToDoubleFunction-" rel="noopener ugc nofollow" target="_blank">mapToDouble(ToDoubleFunction&lt;? super T&gt; mapper)</a></code></li><li id="d98f" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-" rel="noopener ugc nofollow" target="_blank">flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)</a></code></li><li id="a445" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMapToInt-java.util.function.Function-" rel="noopener ugc nofollow" target="_blank">flatMapToInt(Function&lt;? super T, ? extends IntStream&gt; mapper)</a></code></li><li id="7c99" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMapToLong-java.util.function.Function-" rel="noopener ugc nofollow" target="_blank">flatMapToLong(Function&lt;? super T, ? extends LongStream&gt; mapper)</a></code></li><li id="72bd" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMapToDouble-java.util.function.Function-" rel="noopener ugc nofollow" target="_blank">flatMapToDouble(Function&lt;? super T, ? extends DOubleStream&gt; mapper)</a></code></li></ul><p id="a2b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">尺寸/分类</strong></p><ul class=""><li id="5616" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#skip-long-" rel="noopener ugc nofollow" target="_blank">skip(long n)</a></code></li><li id="3452" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-" rel="noopener ugc nofollow" target="_blank">limit(long maxSize)</a></code></li><li id="f61f" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#sorted--" rel="noopener ugc nofollow" target="_blank">sorted()</a></code></li><li id="a0d2" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#sorted-java.util.Comparator-" rel="noopener ugc nofollow" target="_blank">sorted(Comparator&lt;? super T&gt; comparator)</a></code></li></ul><p id="09a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">调试</strong></p><ul class=""><li id="e606" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#peek-java.util.function.Consumer-" rel="noopener ugc nofollow" target="_blank">peek(Consumer&lt;? super T&gt; action)</a></code></li></ul><h2 id="9308" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">得到结果</h2><p id="7487" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在流元素上执行操作非常棒。但是在某些时候，我们希望从我们的数据管道中得到一个结果。</p><p id="4bfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">终端操作启动惰性管道来完成实际工作，并且不返回新的流。</p><p id="dee4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">聚合到新的集合/数组</strong></p><ul class=""><li id="beb8" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.stream.Collector-" rel="noopener ugc nofollow" target="_blank">R collect(Collector&lt;? super T, A, R&gt; collector)</a></code></li><li id="ce5f" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-" rel="noopener ugc nofollow" target="_blank">R collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R, ? super T&gt; accumulator, BiConsumer&lt;R, R&gt; combiner)</a></code></li><li id="2962" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#toArray--" rel="noopener ugc nofollow" target="_blank">Object[] toArray()</a></code></li><li id="c965" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#toArray-java.util.function.IntFunction-" rel="noopener ugc nofollow" target="_blank">A[] toArray(IntFunction&lt;A[]&gt; generator)</a></code></li></ul><p id="06ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">减少到单一值</strong></p><ul class=""><li id="a73a" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-" rel="noopener ugc nofollow" target="_blank">T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</a></code></li><li id="efb9" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-U-java.util.function.BiFunction-java.util.function.BinaryOperator-" rel="noopener ugc nofollow" target="_blank">Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator)</a></code></li><li id="6136" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-U-java.util.function.BiFunction-java.util.function.BinaryOperator-" rel="noopener ugc nofollow" target="_blank">U reduce(U identity, BiFunction&lt;U, ? super T, U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)</a></code></li></ul><p id="95b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">计算</strong></p><ul class=""><li id="49d3" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#min-java.util.Comparator-" rel="noopener ugc nofollow" target="_blank">Optional&lt;T&gt; min(Comparator&lt;? super T&gt; comparator)</a></code></li><li id="6ce4" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#max-java.util.Comparator-" rel="noopener ugc nofollow" target="_blank">Optional&lt;T&gt; max(Comparator&lt;? super T&gt; comparator)</a></code></li><li id="05fe" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#count--" rel="noopener ugc nofollow" target="_blank">long count()</a></code></li></ul><p id="e107" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">匹配</strong></p><ul class=""><li id="cbf4" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#allMatch-java.util.function.Predicate-" rel="noopener ugc nofollow" target="_blank">boolean allMatch(Predicate&lt;? super T&gt; predicate)</a></code></li><li id="540e" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#anyMatch-java.util.function.Predicate-" rel="noopener ugc nofollow" target="_blank">boolean anyMatch(Predicate&lt;? super T&gt; predicate)</a></code></li><li id="66a5" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#noneMatch-java.util.function.Predicate-" rel="noopener ugc nofollow" target="_blank">boolean noneMatch(Predicate&lt;? super T&gt; predicate)</a></code></li></ul><p id="1d09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">发现</strong></p><ul class=""><li id="3887" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findAny--" rel="noopener ugc nofollow" target="_blank">Optional&lt;T&gt; findAny()</a></code></li><li id="e1e3" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findFirst--" rel="noopener ugc nofollow" target="_blank">Optional&lt;T&gt; findFirst()</a></code></li></ul><p id="f600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">消费</strong></p><ul class=""><li id="dccb" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-" rel="noopener ugc nofollow" target="_blank">void forEach(Consumer&lt;? super T&gt; action)</a></code></li><li id="2b9c" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEachOrdered-java.util.function.Consumer-" rel="noopener ugc nofollow" target="_blank">void forEachOrdered(Consumer&lt;? super T&gt; action)</a></code></li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="83c8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">河流特征</h1><p id="342c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">流不仅仅是美化了的循环。当然，我们可以用循环来表达任何流——也可以用流来表达大多数循环。但这并不意味着它们是平等的，或者一个总是比另一个好。</p><h2 id="12f5" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">怠惰</h2><p id="57ba" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">流相对于循环的最大优势是懒惰。直到我们在一个流上调用一个终端操作，才完成任何工作。我们可以随着时间的推移建立我们的处理管道，并且只在我们希望的确切时间运行它。</p><p id="4db6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不仅仅是管道的建设是懒惰的。大多数中间操作也很懒。元素只有在需要的时候才会被消耗。</p><h2 id="92f2" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">(大部分)无国籍</h2><p id="7215" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">函数式编程的主要支柱之一是不可变的状态。大多数中间操作都是无状态的，除了<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#distinct--" rel="noopener ugc nofollow" target="_blank">distinct()</a></code>、<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#sorted--" rel="noopener ugc nofollow" target="_blank">sorted(...)</a></code>、<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-" rel="noopener ugc nofollow" target="_blank">limit(...)</a></code>和<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#skip-long-" rel="noopener ugc nofollow" target="_blank">skip(...)</a></code>。</p><p id="58f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使Java允许构建有状态的lambdas，我们也应该努力将它们设计成无状态的。任何状态都可能对安全性和性能产生严重影响，并可能带来意想不到的副作用。</p><h2 id="5ade" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">包括优化</h2><p id="2b5f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">由于(大部分)无状态，流可以非常有效地优化自己。无状态的中间操作可以<a class="ae ky" href="https://stackoverflow.com/a/35070889/12367039" rel="noopener ugc nofollow" target="_blank">融合</a>在一起成为一个组合消费者。多余的操作可能会被删除。并且一些管道路径可能短路。</p><p id="c8da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JVM也将优化传统的<a class="ae ky" href="https://blogs.oracle.com/javamagazine/loop-unrolling" rel="noopener ugc nofollow" target="_blank">循环</a>。但是由于流的多操作设计，流更容易成为目标，并且大多数情况下是无状态的。</p><h2 id="6206" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">不可重复使用</h2><p id="5a2f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">由于只是一个哑管道，流不能被重用。但是它们不会改变原始数据源——我们总是可以从数据源创建另一个流。</p><h2 id="1c0f" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">较少样板文件</h2><p id="9cde" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">流通常更容易阅读和理解。</p><p id="38f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个带有<code class="fe ob oc od oe b">for</code>循环的简单数据处理示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="5b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此代码相当于:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="02d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有一个更短的代码块，更清晰的操作，没有循环样板文件，也没有额外的临时变量。全部打包在一个流畅的API中。这样，我们的代码反映了<em class="lv">什么，</em>什么，我们不再需要关心实际的迭代过程，<em class="lv">如何。</em></p><h2 id="e524" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">易于并行化</h2><p id="dc96" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">并发很难做对，也很容易做错。流支持并行执行(<code class="fe ob oc od oe b">forkJoin</code>)，如果我们自己来做，可以减少很多开销。</p><p id="1d5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以通过调用中间操作<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#parallel--" rel="noopener ugc nofollow" target="_blank">parallel()</a></code>将流并行化，并通过调用<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#sequential--" rel="noopener ugc nofollow" target="_blank">sequential()</a></code>将其转换回顺序。但并不是每个流管道都适合并行处理。</p><p id="c7cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码必须足够大，操作成本必须足够高，以证明多线程的开销是合理的。上下文切换是昂贵的。我们不应该仅仅因为可以就并行化一个流。</p><h2 id="2ef1" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">原始处理</h2><p id="7695" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">就像<a class="ae ky" href="https://medium.com/better-programming/functional-programming-with-java-whats-in-the-box-4c0ee20035af#839b" rel="noopener">函数接口</a>一样，流有专门的类来处理原语，以避免自动装箱/取消装箱:</p><ul class=""><li id="71d2" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html" rel="noopener ugc nofollow" target="_blank">java.util.stream.IntStream</a></code></li><li id="3019" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/LongStream.html" rel="noopener ugc nofollow" target="_blank">java.util.stream.LongStream</a></code></li><li id="74e5" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/DoubleStream.html" rel="noopener ugc nofollow" target="_blank">java.util.stream.DoubleStream</a></code></li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0934" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">最佳实践和注意事项</h1><h2 id="39d4" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">较小的操作</h2><p id="5ee9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果用花括号括起来，Lambdas可以是简单的一行代码，也可以是巨大的代码块。为了保持简单和简洁，我们应该将自己限制在操作的这两个用例上:</p><ul class=""><li id="d238" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">单行表达式—例如<code class="fe ob oc od oe b">.filter(album -&gt; album.getYear() &gt; 4)</code></li><li id="a331" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">方法引用—例如<code class="fe ob oc od oe b">filter(this::myFilterCriteria)</code></li></ul><p id="b5e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过使用方法引用，我们可以进行更复杂的操作，重用操作逻辑，甚至更容易进行单元测试。</p><h2 id="2b05" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">方法引用</h2><p id="3e34" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">使用方法引用不仅会影响简单性和简洁性。字节码级别上也有暗示。</p><p id="b114" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">lambda和方法引用<a class="ae ky" href="https://medium.com/better-programming/functional-programming-with-java-an-introduction-daa783355731#7ffc" rel="noopener">之间的字节码略有不同</a>——方法引用生成的代码更少。lambda可能会被翻译成调用主体的匿名类，从而创建比所需更多的代码。</p><p id="c756" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，通过使用方法引用，我们失去了lambda的视觉噪声:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><h2 id="d266" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">造型和类型检查</h2><p id="64d4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">不要忘记<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" rel="noopener ugc nofollow" target="_blank">Class&lt;T&gt;</a></code>也是一个对象，提供了许多有用的方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><h2 id="f389" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">返回值或检查是否为空</h2><p id="8073" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">中间操作要么返回值，要么在下一个操作中处理<code class="fe ob oc od oe b">null</code>。</p><p id="d340" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一个简单的<code class="fe ob oc od oe b">.filter(<a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#nonNull-java.lang.Object-" rel="noopener ugc nofollow" target="_blank">Objects::nonNull</a>)</code>可能足以确保没有npe。</p><h2 id="1547" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">代码格式</h2><p id="3726" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">通过将每个管道步骤放入一个新行，我们可以提高可读性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="85db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还允许我们在正确的流水线步骤设置断点。</p><h2 id="a64b" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">不是每个迭代都是一个流</h2><p id="4677" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如前所述，我们不应该替换每个循环。仅仅因为它迭代，并不使它成为基于流的处理的有效目标。通常，传统的循环可能比在流中使用<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-" rel="noopener ugc nofollow" target="_blank">forEach(...)</a></code>更好。</p><h2 id="5b4a" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">有效最终</h2><p id="ca46" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们可以访问中间操作之外的变量，只要它们在作用域内并且是有效的final。这意味着初始化后不允许改变，但不需要显式的<code class="fe ob oc od oe b">final</code>修饰符。</p><p id="740a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时这种限制看起来很麻烦，我们可以有效地改变final对象的状态，只要变量是final。但是这样做破坏了不变性的概念，并引入了意想不到的副作用。</p><h2 id="3fe6" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">检查异常</h2><p id="0836" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">流和异常是一个主题，应该有它们自己的文章，但是我将尝试对其进行总结。</p><p id="be8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码无法编译:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="7439" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#forName-java.lang.String-" rel="noopener ugc nofollow" target="_blank">Class.forName(String className)</a></code>抛出一个检查过的异常<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassNotFoundException.html" rel="noopener ugc nofollow" target="_blank">ClassNotFoundException</a> </code>并需要一个<code class="fe ob oc od oe b">try-catch</code>，使得代码难以阅读:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="1d28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过将<code class="fe ob oc od oe b">className</code>转换重构为一个专用的方法，我们可以零售流的简单性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="166f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们仍然需要处理可能的<code class="fe ob oc od oe b">null</code>值，但是被检查的异常在流代码中是不可见的。</p><p id="5a38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">处理检查异常的另一个解决方案是将中间操作包装在消费者/函数等中。捕捉已检查的异常并将其作为未检查的异常重新抛出。但是，在我看来，这更像是一个丑陋的黑客，而不是一个有效的解决方案。</p><p id="4629" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一个操作抛出了一个检查过的异常，我们应该把它重构为一个方法，并相应地处理它的异常。</p><h2 id="65d5" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">未检查的异常</h2><p id="0765" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">即使我们处理了所有检查过的异常，我们的流仍然会由于未检查的异常而爆炸。</p><p id="34ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有一个放之四海而皆准的解决方案来防止异常，就像没有任何其他代码一样。开发人员纪律可以大大降低风险。使用定义明确的小型操作，并进行足够的检查和验证。这样至少可以把风险降到最低。</p><h2 id="0ed5" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">排除故障</h2><p id="ebf1" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">流可以像任何其他流畅的调用一样进行调试。如果我们在一行中有一个单独的操作，断点将相应地停止。但是为lambdas创建匿名类会导致非常混乱的堆栈跟踪。</p><p id="6cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在开发过程中，我们也可以利用中间操作<code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#peek-java.util.function.Consumer-" rel="noopener ugc nofollow" target="_blank">peek(Consumer&lt;? super T&gt; action)</a></code>来截取一个元素。该操作主要用于调试目的，不应在流的最终形式中使用。</p><p id="3526" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">IntelliJ提供了一个<a class="ae ky" href="https://plugins.jetbrains.com/plugin/9696-java-stream-debugger" rel="noopener ugc nofollow" target="_blank">可视化调试器</a>。</p><h2 id="e528" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">操作顺序</h2><p id="df27" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">想象一个简单的流:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="e311" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码将运行<code class="fe ob oc od oe b">map</code>五次，<code class="fe ob oc od oe b">sorted</code>八次，<code class="fe ob oc od oe b">filter</code>五次，<code class="fe ob oc od oe b">forEach</code>两次。这意味着总共20次运算来输出两个值。</p><p id="7023" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们对管道零件进行重新排序，我们可以显著减少总操作数，而不会改变实际结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="7432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过首先过滤，我们将把其他操作限制到最少:<code class="fe ob oc od oe b">filter</code>五次，<code class="fe ob oc od oe b">map</code>两次，<code class="fe ob oc od oe b">sort</code>一次，<code class="fe ob oc od oe b">forEach</code>两次，这样总共节省了10次操作。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="39fc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Java 9增强</h1><p id="6e05" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Java 9给streams带来了四个新特性:</p><ul class=""><li id="a803" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#dropWhile-java.util.function.Predicate-" rel="noopener ugc nofollow" target="_blank">dropWhile​(Predicate&lt;? super T&gt; predicate)</a></code> <br/>删除元素，直到遇到第一个<code class="fe ob oc od oe b">false</code>谓词。</li><li id="757d" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#takeWhile-java.util.function.Predicate-" rel="noopener ugc nofollow" target="_blank">takeWhile​(Predicate&lt;? super T&gt; predicate)</a></code> <br/>接受元素，直到遇到第一个<code class="fe ob oc od oe b">false</code>谓词。</li><li id="b4c4" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#ofNullable-T-" rel="noopener ugc nofollow" target="_blank">Stream&lt;T&gt; ofNullable​(T t)</a></code> <br/>如果nullable不为空，则返回单元素流，否则返回空流。</li><li id="daac" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><code class="fe ob oc od oe b"><a class="ae ky" href="https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#iterate-T-java.util.function.Predicate-java.util.function.UnaryOperator-" rel="noopener ugc nofollow" target="_blank">iterate​(T seed, Predicate&lt;? super T&gt; hasNext, UnaryOperator&lt;T&gt; next)</a></code> <br/>生成一个有限流，相当于一个<code class="fe ob oc od oe b">for </code>循环，像<code class="fe ob oc od oe b">Stream.iterate(0, i -&gt; i &lt; 10, i -&gt; i + 1)</code>一样。</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e8e4" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">资源</h1><ul class=""><li id="69e7" class="nb nc it lb b lc mv lf mw li oh lm oi lq oj lu ng nh ni nj bi translated"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html" rel="noopener ugc nofollow" target="_blank">Java SE 8的流包文档</a> (Oracle)</li><li id="640b" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae ky" href="https://www.baeldung.com/java-8-streams" rel="noopener ugc nofollow" target="_blank">《Java 8流API教程</a>》(bael dung)</li></ul><h2 id="8f10" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">相关文章</h2><div class="ok ol gp gr om on"><a href="https://medium.com/better-programming/functional-programming-with-java-immutability-8dc748e85f9e" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">Java函数式编程:不变性</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">具有不可变状态的更好的数据结构</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/better-programming/functional-programming-with-java-whats-in-the-box-4c0ee20035af" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">Java函数式编程:盒子里是什么</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">JDK中可用的不同种类的功能接口</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/better-programming/functional-programming-with-java-an-introduction-daa783355731" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">Java函数式编程:简介</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">Java从来就不是函数式语言，但这并不意味着我们不能尝试</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pd l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/better-programming/java-stream-collectors-explained-6209a67a4c29" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">Java流收集器解释</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">收集器是如何工作的——我们如何建立自己的收集器？</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pe l oy oz pa ow pb ks on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/better-programming/better-null-handling-with-java-optionals-4793a8566710" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">使用Java选项更好地处理空值</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">可怕的NullPointerException是许多Java开发人员的祸根</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pf l oy oz pa ow pb ks on"/></div></div></a></div><h2 id="e896" class="np me it bd mf nq nr dn mj ns nt dp mn li nu nv mp lm nw nx mr lq ny nz mt oa bi translated">书</h2><ul class=""><li id="0e90" class="nb nc it lb b lc mv lf mw li oh lm oi lq oj lu ng nh ni nj bi translated"><a class="ae ky" href="https://www.goodreads.com/book/show/18669408-java-8-lambdas" rel="noopener ugc nofollow" target="_blank">“Java 8 Lambdas:实用函数式编程</a>”</li><li id="c67b" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae ky" href="https://www.goodreads.com/book/show/46213396-modern-java-in-action?from_search=true&amp;qid=aKiCVlpqZW&amp;rank=1" rel="noopener ugc nofollow" target="_blank">“现代Java在行动</a>”</li><li id="e4b3" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated"><a class="ae ky" href="https://www.goodreads.com/book/show/23711021-functional-java" rel="noopener ugc nofollow" target="_blank">“函数式Java:Java 8中的Lambdas和函数式编程指南</a>”</li></ul></div></div>    
</body>
</html>