<html>
<head>
<title>A Guide to Connecting Your Apps via Webhooks With Autocode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Autocode通过Webhooks连接应用程序的指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-guide-to-connecting-your-apps-via-webhooks-with-autocode-685accab8eae?source=collection_archive---------8-----------------------#2022-11-09">https://betterprogramming.pub/a-guide-to-connecting-your-apps-via-webhooks-with-autocode-685accab8eae?source=collection_archive---------8-----------------------#2022-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e95e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解在Autocode上构建端点以配置webhooks的基础知识。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ac65a6c845a0c624a386131a1b9a57fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WqopmG5yIPFNPZb3.png"/></div></div></figure><p id="aca3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当特定事件发生时，应用程序使用webhooks通知外部应用程序。例如，webhooks是<a class="ae ln" href="https://stripe.com/docs/api/webhook_endpoints" rel="noopener ugc nofollow" target="_blank"> Stripe </a>如何在新客户订阅时通过电子邮件通知您，当提交表单时<a class="ae ln" href="http://developers.webflow.com/#webhook-events" rel="noopener ugc nofollow" target="_blank"> Webflow </a>如何将新的销售线索信息保存到Airtable，以及当有新的购买时<a class="ae ln" href="https://shopify.dev/api/admin-rest/2022-04/resources/webhook" rel="noopener ugc nofollow" target="_blank"> Shopify </a>如何通过Slack提醒您。了解如何配置webhook集成可以帮助您节省时间并提高工作效率。</p><p id="f2c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本指南中，我们将介绍在Autocode上构建端点来配置webhooks的基础知识。为了巩固我们的学习，我们将构建一个端点并配置一个webhook，以便在<a class="ae ln" href="https://tally.so/" rel="noopener ugc nofollow" target="_blank"> Tally.so </a>提交表单时，自动发送一条定制的SMS消息和电子邮件。</p><h1 id="3c8a" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">我们将学到什么:</h1><ul class=""><li id="2854" class="mg mh iq kt b ku mi kx mj la mk le ml li mm lm mn mo mp mq bi translated">什么是webhook？</li><li id="18de" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">什么是端点？</li><li id="faaf" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">真实世界webhook示例</li><li id="bbb1" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">在Autocode上创建具有短信和电子邮件功能的端点</li><li id="7c48" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">在Tally.so上将我们的端点配置为webhook</li><li id="849a" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">使用Autocode上的事件数据定制短信和电子邮件</li></ul><h1 id="b9cd" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">什么是Webhook？</h1><p id="7573" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">Webhooks将事件驱动的即时消息从一个应用程序传递到另一个应用程序。这里的关键定义是“事件驱动”消息。</p><p id="69d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当应用程序中发生一个事件时，比如Stripe中发生了一次购买，一个有效负载数据被发送到一个webhook URL。这个webhook将充当一个“监听器”，这意味着它将从该事件接收数据的有效载荷。它还可以处理事件，这意味着它可以执行代码向多个API发出请求。为了让我们配置webhook，应用程序必须支持web hook。我们在工作中使用的很多应用，比如Github、Salesforce、Hubspot、Slack，都有通过webhooks扩展其应用的能力，但有些没有。</p><h1 id="d5cc" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">什么是端点？</h1><p id="52e5" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">端点是一个包含托管在Autocode.com上的代码的文件。部署后，该代码可通过对自动生成的端点URL的HTTP请求来执行。您的端点URL包含您的Autocode用户名，后跟项目名称和开发环境。例如:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/3a202fe89d4f07a2f82dfb7b6d7822a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hGrkiduKo6eD-5TQ.png"/></div></div></figure><h1 id="5cd3" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">真实的Webhook示例</h1><p id="4110" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">Webhooks消除了信息滞后，提供了更好的客户体验。例如，假设您正在使用Stripe，并且您希望在客户订阅您的服务后立即联系他们。通过在Stripe上设置webhook来将更新推送到您的客户成功团队，您可以确保您的团队对新订户做出快速响应。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/390427d55c5f4700543b1b13e430307a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z4784-LZvoyBtk3e.png"/></div></div></figure><h1 id="72ef" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">关键术语</h1><ul class=""><li id="fa41" class="mg mh iq kt b ku mi kx mj la mk le ml li mm lm mn mo mp mq bi translated"><strong class="kt ir">web hook</strong>——一种从一个应用程序向另一个发送数据的方式。您将一个端点URL配置为一个webhook，告诉应用程序向何处发送数据。</li><li id="40b3" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><strong class="kt ir">端点</strong>—Autocode上的一个文件，每当应用程序通过webhook配置向它发送数据时，它就运行代码</li><li id="7b82" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><strong class="kt ir">有效负载</strong> —通过webhook从一个应用程序发送到另一个应用程序的数据</li><li id="6db4" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><strong class="kt ir"> API </strong> —应用程序编程接口是更复杂的定义指令，用于一个应用程序如何使用代码与另一个应用程序进行通信。您可以通过在Autocode编辑器中键入await lib来尝试Autocode本身支持的API。</li></ul><p id="4b8c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在对webhooks的工作原理有了更高层次的理解。然而，没有比实践更好的学习方法了，所以让我们开始在Autocode上构建端点，并在Tally上配置webhook。Tally让我们构建类似于Typeform和Google Forms的表单，并且它方便地支持在提交表单时向webhook发送数据！</p><h1 id="c2e4" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">在Autocode上创建具有SMS功能的端点</h1><p id="bb62" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">登录到您的<a class="ae ln" href="https://autocode.com/dashboard" rel="noopener ugc nofollow" target="_blank">自动编码仪表板</a>并点击<code class="fe na nb nc nd b">New Web Service</code>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/501699c8e07e3494b13197e280b74a60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5hVT9m2yKAHri6qd.png"/></div></div></figure><p id="1995" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">选择您希望此项目存在的帐户，为其命名，然后点按“创建项目”。分配给项目的名称将构成端点URL的一部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/5b518b477da33369b4f67caa2c93bc42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zORp0ctf8niUjdOQ.png"/></div></div></figure><p id="b22f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您将被重定向到Autocode的代码编辑器。删除第3行以下的所有内容。在第3行，我们包含了我们的<code class="fe na nb nc nd b">lib</code> Node.js包。这允许你用一行代码连接到<a class="ae ln" href="https://autocode.com/lib" rel="noopener ugc nofollow" target="_blank"> Autocode的标准库</a>中的任何API。</p><p id="0757" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从为我们的端点添加SMS功能开始。您可以通过键入await lib来搜索可用的API。将出现可用API列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/f172864f105ef67fc2cb91476abf074d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a8SzDHF3bhpY4CRt.png"/></div></div></figure><p id="6a79" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将弹出所有可用API集成的列表。选择<code class="fe na nb nc nd b">utils</code> API选项并搜索允许我们<strong class="kt ir">发送SMS消息的方法(仅限美国和CA)。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/72fcf9a87829ef56fc78245b9094e919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oRd7r6-7IhC0kwzT.png"/></div></div></figure><p id="9b82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Autocode将弹出一个窗口，帮助准备这个SMS API的API请求。您将被要求输入两个参数。</p><ul class=""><li id="7785" class="mg mh iq kt b ku kv kx ky la ni le nj li nk lm mn mo mp mq bi translated">第一个参数是接收消息的电话号码。在此输入您的电话号码！</li><li id="3bb7" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">第二个参数是您希望在提交计数表单时发送的消息。现在，我们保持简单，只输入<code class="fe na nb nc nd b">A form was submitted!</code>。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/94c228ae33ce41ac050799009b8f8360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yB8iHDkU8OxEZKCF.png"/></div></div></figure><p id="8d70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">完成API请求的配置后，单击蓝色的完成配置按钮，然后单击橙色的保存按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/e9e54ac965b31cd47df74f2bfb39d7ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SXDbcnN-rU2O8ZSE.png"/></div></div></figure><p id="8f28" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将编辑器底部的端点URL复制到安全的地方。在本教程的后面，您将需要它！</p><p id="c811" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它由您的用户名、项目名和您选择的开发环境组成:</p><pre class="kg kh ki kj gt nn nd no np aw nq bi"><span id="6e03" class="nr lp iq nd b gy ns nt l nu nv">https://&lt;username&gt;.autocode.dev/&lt;projectname&gt;@dev/.</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/d0c86ea32872a4e394808d00e84d0df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eI13FuuTmknIflbu.png"/></div></div></figure><p id="b2df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将编辑器底部的端点URL复制到安全的地方。在本教程的后面，您将需要它！现在我们已经有了端点URL，让我们尝试使用Tally向它发送数据。Tally是一种创建表格和调查的简单方法。我们将在Tally上构建并发布一个示例表单，然后尝试使用webhook将数据发送到Autocode。前往<a class="ae ln" href="https://tally.so/" rel="noopener ugc nofollow" target="_blank">理财师</a>，注册账户。</p><h1 id="864e" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">在Tally上配置Webhook</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/7c9536a8c446baf6e3a49b3c3bdc8d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z9-pwQiw-Fpp_doN.png"/></div></div></figure><p id="d627" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">出于演示目的，我们将使用以下销售线索挖掘模板:</p><p id="5a5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://tally.so/templates/lead-generation-form/l3jQmM" rel="noopener ugc nofollow" target="_blank">销售线索生成表单模板</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/7a3013209f34ba6c1c777036a23e8b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*16pyL4rRNsrJmiCl.png"/></div></div></figure><p id="95c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个简单的表单，接受几个输入。选择<strong class="kt ir">使用此模板</strong>，然后在顶部菜单栏选择<strong class="kt ir">发布</strong>。一旦我们完成了这个示例，您可以返回并根据自己的喜好进行修改。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/c5ba78658692325b6978b5914de54b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qvRCae_f-YWkBeO2.png"/></div></div></figure><p id="509d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦您发布，Tally将生成一个到您表单的唯一链接。复制此链接，在单独的选项卡上打开表单，然后选择“集成”选项卡。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/2fa1c432b358bcd5eb66423337eca0d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZB_Qu5-vfg01XIxo.png"/></div></div></figure><p id="6c88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你所看到的，Tally提供了本地集成，这使得它很容易连接到其他平台和工具。然而，它本身并不支持Twilio或Gmail。幸运的是，我们可以将表单提交发送到Autocode端点来绕过这个限制。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/dcaccee862b8c58c21c7cae9f2e1ef2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EIvXyFPuQcf8cl2l.png"/></div></div></figure><p id="b3d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">选择Webhooks选项，并通过注册您在Autcode上创建的端点的URL来设置您的webhook。确保不要在端点URL前后留下任何空格，并选择Connect。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/a4a72bccf70d6bd6fb25b22fbb115b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cE9OPgfeFeIHBEVp.png"/></div></div></figure><p id="e4fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦您设置了webhook端点，您将返回到您的销售线索生成表单的控制面板。您应该通过切换<code class="fe na nb nc nd b">enable</code>选项来确保webhook已打开。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/d21f8c1ce414f9d87d941a8323322ef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cYnzWDx8nXSmxpS8.png"/></div></div></figure><p id="352a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过提交表格来测试你的webhook。当您在Autocode中配置参数时，您应该会收到一条消息，发送到您设置的号码。</p><h1 id="5978" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">使用事件数据定制SMS消息</h1><p id="c18f" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">到目前为止，我们已经能够部署一个端点，配置一个webhook URL，并触发一个通知。接下来，让我们学习如何从事件有效负载中提取数据，以便根据发送者的姓名、电子邮件地址和职位定制每个文本。返回Autocode编辑器，点击编辑器右下角的<code class="fe na nb nc nd b">Tools</code>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/a427e2660492ba659b07831da2b3bb5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UdOy3WOupseYDKwp.png"/></div></div></figure><p id="55b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将弹出一个窗口，让您访问四个不同的选项卡。<code class="fe na nb nc nd b">Logs</code>选项卡将显示对您的端点的任何错误消息和请求。</p><h1 id="b741" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">检查请求</h1><p id="ede8" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">通过这里，我们可以检查发送到Autocode的单个HTTP(S)请求和事件。我们还能够将事件有效负载直接复制到Autocode IDE中，以调试和迭代我们的代码。将鼠标悬停在最新请求上方，并选择<code class="fe na nb nc nd b">Inspect Request</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/9fa5eb4367298ba5e76dbeddca636c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E317_te1fDDEulyz.png"/></div></div></figure><p id="71c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们可以访问事件被接收的时间，从计数，标题和更多的数据完整的事件有效载荷。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/7e6f560bd8bd70067153ad1e12b6e978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0FDIlhCHBnVcdiWu.png"/></div></div></figure><p id="4d88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过单击蓝色的Copy Request Payload to Test Payload按钮，将此请求负载复制到您的测试负载。这将导致您的有效负载数据自动填充到Autocode IDE中的<code class="fe na nb nc nd b">Payload</code>选项卡上。这允许您通过按下编辑器右下角的绿色<code class="fe na nb nc nd b">Run</code>按钮来模拟一个事件，从而大大加快端点代码的迭代速度。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/d7fa1cd5aa11cc2f35adf2685eb37a3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9tWoOKddtTP_vTXv.png"/></div></div></figure><p id="0d4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们在迭代代码时有了实际的事件数据可以使用，让我们回到编辑每次提交计数表单时发送的SMS消息。我们可以使用点符号和模板文字从事件负载中提取值。我们将格式化我们的消息，为通过SMS提交表单的每个人发送名字、姓氏、电子邮件和角色。</p><pre class="kg kh ki kj gt nn nd of bn og oh bi"><span id="f598" class="oi lp iq nd b be oj ok l ol nv">// authenticates you with the API standard library<br/>// type `await lib.` to display API autocomplete<br/>const lib = require('lib')({token: process.env.STDLIB_SECRET_TOKEN});<br/>await lib.utils.sms['@2.0.2']({<br/>  to: `10000000000`, //your number here<br/>  body: `A form was submitted here is the info:<br/>  name: ${context.params.data.fields[0].value} ${context.params.data.fields[1].value}!<br/>  email: ${context.params.data.fields[2].value}<br/>  role: ${context.params.data.fields[3].value}`,<br/>});<br/>return "message sent"</span></pre><p id="2a81" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们可以通过按绿色的run按钮来模拟一个事件，而不是返回到Tally，填写并提交表单来触发事件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/ba4ad824c3c3bbb391211788f3ca374a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*djILzJmgMd2966cf.png"/></div></div></figure><h1 id="2a6e" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">添加电子邮件通知</h1><p id="d7e5" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">现在，让我们添加向端点发送电子邮件通知的逻辑。让我们向提交表单的人发送一封定制的电子邮件，并附上一条简单的确认消息，说明我们已经收到了他们的请求。使用API自动完成功能，通过键入<code class="fe na nb nc nd b">await lib.</code>来搜索Gmail API，并选择撰写和发送邮件的方法。</p><p id="5884" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">填写相应的参数，点击<strong class="kt ir">完成配置。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="on oo l"/></div></figure><pre class="kg kh ki kj gt nn nd of bn og oh bi"><span id="d097" class="oi lp iq nd b be oj ok l ol nv">// authenticates you with the API standard library<br/>// type `await lib.` to display API autocomplete<br/>const lib = require('lib')({token: process.env.STDLIB_SECRET_TOKEN});<br/>await lib.utils.sms['@2.0.2']({<br/>  to: `15100000000`, //your number here<br/>  body: `A form was submitted here is the info:<br/>  name: ${context.params.data.fields[0].value} ${context.params.data.fields[1].value}!<br/>  email: ${context.params.data.fields[2].value}<br/>  role: ${context.params.data.fields[3].value}`,<br/>});<br/>await lib.gmail.messages['@0.2.8'].create({<br/>  to: `${context.params.data.fields[2].value}`,<br/>  subject: `Hey ${context.params.data.fields[0].value} - we received your request!`,<br/>  text: `Hey ${context.params.data.fields[0].value},\n\nThank you for submitting a request. We will get back to you shortly!\n\n-Janeth \nDeveloper Advocate`<br/>});</span></pre><p id="75e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这是第一次向Gmail API发出请求，请单击编辑器左下角的红色<code class="fe na nb nc nd b">required</code>按钮，并按照说明链接新资源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/7aded4d74940e9dc27db0427cfbcbe73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I2e1HJloLjA0Ty5Q.png"/></div></div></figure><p id="1445" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">用你的电子邮件提交一份表格，你将在几秒钟内收到一封电子邮件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/3d9d807c0ab2ff3d9fb68a709fe464e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GK3MXAWLNr69RVyG.png"/></div></div></figure><h1 id="b49d" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">是时候开始建造了</h1><p id="6584" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">恭喜你！现在，您已经具备了构建webhook功能的webhook语言和工具。</p></div></div>    
</body>
</html>