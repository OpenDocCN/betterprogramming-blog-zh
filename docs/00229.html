<html>
<head>
<title>Share Component Data With Other Components in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular中与其他元件共享元件数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/angular-7-share-component-data-with-other-components-1b91d6f0b93f?source=collection_archive---------0-----------------------#2018-11-16">https://betterprogramming.pub/angular-7-share-component-data-with-other-components-1b91d6f0b93f?source=collection_archive---------0-----------------------#2018-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="1e77" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">有角的</h2><div class=""/><div class=""><h2 id="b060" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Angular的输入、输出、EventEmitter和ViewChild共享组件数据</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/6af12882df4bed9d94be2c25ee5cc6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UApTnC4Gg0VeDgfZ"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">通过<a class="ae lh" href="https://unsplash.com/@rawpixel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> rawpixel </a>上的<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="46fd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">注:本文适用于每一个Angular版本，包括最新版本。</em></p><p id="f9f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要共享组件数据，您可以使用以下命令:</p><ul class=""><li id="aaa8" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated"><code class="fe mo mp mq mr b">@Input</code> —属性绑定</li><li id="d299" class="mf mg it lk b ll ms lo mt lr mu lv mv lz mw md mk ml mm mn bi translated"><code class="fe mo mp mq mr b">@Output</code>和<code class="fe mo mp mq mr b">EventEmitter</code> —事件绑定</li><li id="e3ef" class="mf mg it lk b ll ms lo mt lr mu lv mv lz mw md mk ml mm mn bi translated"><code class="fe mo mp mq mr b">@ViewChild</code>和<code class="fe mo mp mq mr b">AfterViewInit</code></li></ul><p id="1558" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们依次看一下它们。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="d186" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">@Input —属性绑定</h1><p id="aa02" class="pw-post-body-paragraph li lj it lk b ll nw kd ln lo nx kg lq lr ny lt lu lv nz lx ly lz oa mb mc md im bi translated">如果要将数据从父组件传递到子组件，需要使用两个东西:<code class="fe mo mp mq mr b">@Input</code>和属性绑定。</p><p id="72d3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这个例子中，我们在<code class="fe mo mp mq mr b">child</code>组件中设置了一个名为<code class="fe mo mp mq mr b">childExample</code>的变量，它是一个字符串。我们在变量前面设置Angular的<code class="fe mo mp mq mr b">@Input</code>装饰器。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/e64af683384ab349e8f16686c3af8f54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bcn7H4wrvU2yc5TpisHZ2g.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">代码显示由<a class="ae lh" href="https://carbon.now.sh/?bg=rgba(74%2C144%2C226%2C1)&amp;t=material&amp;wt=none&amp;l=application%2Ftypescript&amp;ds=false&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fm=Fira%20Code&amp;fs=14px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false" rel="noopener ugc nofollow" target="_blank">碳</a></p></figure><p id="cf2c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这为我们提供了向子节点的选择器(<code class="fe mo mp mq mr b">&lt;app-child&gt;</code>)添加属性的选项，如下例所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/9e50192c1f13e0067553d3f6e21e08a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EMjhXpfWqDlpVn1GLuM9PA.png"/></div></div></figure><p id="0d3a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在父类中，我们声明了一个名为<code class="fe mo mp mq mr b">parentExample</code>的变量。我们给它一个值<code class="fe mo mp mq mr b">[childExample]</code>。结果是文本“Hello Angular 7”显示在子组件中。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt od"><a href="https://itnext.io/must-have-tool-for-every-developer-71508e73e9aa" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">每个开发人员的必备工具</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">通过生成文档节省大量时间</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">itnext.io</p></div></div><div class="om l"><div class="on l oo op oq om or lb od"/></div></div></a></div></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="de13" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">@Output &amp; EventEmitter —事件绑定</h1><p id="78dd" class="pw-post-body-paragraph li lj it lk b ll nw kd ln lo nx kg lq lr ny lt lu lv nz lx ly lz oa mb mc md im bi translated">对于<code class="fe mo mp mq mr b">@Output</code>和<code class="fe mo mp mq mr b">EventEmitter</code>，情况正好相反。您可以将数据从子组件传递回父组件。同样，我们在子元素中声明了一个变量，但是这次使用了<code class="fe mo mp mq mr b">@Output</code>装饰器和一个新的<code class="fe mo mp mq mr b">EventEmitter</code>:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/e77763f0ca36b129b4d1613a83ea2303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EFWHaZLT0AAbKjHBf3ta5A.png"/></div></div></figure><p id="debd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们希望通过执行以下操作将事件<code class="fe mo mp mq mr b">emit</code>添加到父组件:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ot"><img src="../Images/f452d1e1c3e7741df35d7554b2e02545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3O3DZ_t98gR9g5bqLOiJtw.png"/></div></div></figure><p id="bd8c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在子组件中单击每个按钮时，我们将文本“Hello Angular 7”传递给父组件。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ou"><img src="../Images/adedbd7cadaceb50db5f273a38fed2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wdESml6PG1dFaK3rZHqM6Q.png"/></div></div></figure><p id="611d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们的父组件中，我们现在可以为子选择器(<code class="fe mo mp mq mr b">&lt;app-child&gt;</code>)设置一个事件。正如你所看到的，我们使用了来自孩子的<code class="fe mo mp mq mr b">exampleOutput</code>，它的值是一个名为<code class="fe mo mp mq mr b">exampleMethodParent</code>的方法，带有参数<code class="fe mo mp mq mr b">$event</code>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ov"><img src="../Images/2c522e20027da64e0802a55bb8033c98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yCZzp2HbmudxQUoFJlcs8Q.png"/></div></div></figure><p id="9282" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，在子方法中的每个按钮点击上，我们通过父方法中的一个事件获得一个文本。在这个方法中，我们给<code class="fe mo mp mq mr b">example</code>一个<code class="fe mo mp mq mr b">$event</code>的值。通过插值(<code class="fe mo mp mq mr b">{{ exampleParent }}</code>)，我们现在可以看到我们孩子的示例文本。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="8ec6" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">@ViewChild &amp; AfterViewInit</h1><p id="1855" class="pw-post-body-paragraph li lj it lk b ll nw kd ln lo nx kg lq lr ny lt lu lv nz lx ly lz oa mb mc md im bi translated">传递数据的第三种方式是使用<code class="fe mo mp mq mr b">@ViewChild</code>和<code class="fe mo mp mq mr b">AfterViewInit</code>。使用最后一个选项，我们可以引用子组件并访问父组件中的变量。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ow"><img src="../Images/1578be23c808f075a37f3137139d2d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pirdl0OyFzsfD-3nu7dvXg.png"/></div></div></figure><p id="cfd8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">装饰器设置在父组件中。我们在类中声明了以下内容:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ox"><img src="../Images/0348f6ceb131f3e166000caa1b68ce5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kDMT_IXQRa_WYCYuU7jAeQ.png"/></div></div></figure><p id="90b7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们还需要实现<code class="fe mo mp mq mr b">AfterViewInit</code>生命周期挂钩，因为在视图初始化之前，子视图是不可用的。在<code class="fe mo mp mq mr b">ngAfterViewInit()</code>方法中，我们从<code class="fe mo mp mq mr b">ChildComponent</code>访问<code class="fe mo mp mq mr b">exampleChild</code>并将值赋予<code class="fe mo mp mq mr b">exampleParent</code>变量。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oy"><img src="../Images/c313164cef2237848d59112e7f92c889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*beXsISVT0Rq7TMppbgothw.png"/></div></div></figure><p id="8baf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们完整的<code class="fe mo mp mq mr b">ParentComponent</code>将会是这样的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oz"><img src="../Images/699e4de0e5cbe774eb8105d9be0d4df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TROOJWkymSOTaAfNqNbX7w.png"/></div></div></figure><p id="3c54" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">同样，通过插值(<code class="fe mo mp mq mr b">{{ exampleParent }}</code>)，我们现在可以看到我们孩子的示例文本。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h2 id="d568" class="pa nf it bd ng pb pc dn nk pd pe dp no lr pf pg nq lv ph pi ns lz pj pk nu iz bi translated">感谢您的阅读！我的<a class="ae lh" href="https://github.com/jeroenouw/" rel="noopener ugc nofollow" target="_blank"> Github </a>或者<a class="ae lh" href="https://twitter.com/jeroenouw" rel="noopener ugc nofollow" target="_blank"> Twitter </a>。如果你觉得这篇文章有用，请点击👏关注button，并考虑阅读我的其他文章:</h2><div class="pl pm gp gr pn od"><a href="https://itnext.io/rendering-data-with-next-js-explained-28364f5fc11d" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">解释了使用Next.js呈现数据</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">简单解释了getStaticPaths、getStaticProps和getServiceSideProps</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">itnext.io</p></div></div><div class="om l"><div class="po l oo op oq om or lb od"/></div></div></a></div><div class="pl pm gp gr pn od"><a href="https://itnext.io/must-have-tool-for-every-developer-71508e73e9aa" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jd gy z fp oi fr fs oj fu fw jc bi translated">每个开发人员的必备工具</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">通过生成文档节省大量时间</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">itnext.io</p></div></div><div class="om l"><div class="on l oo op oq om or lb od"/></div></div></a></div></div></div>    
</body>
</html>