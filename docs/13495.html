<html>
<head>
<title>Elixir Associative Data Structures: Maps and Keyword Lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Elixir关联数据结构:映射和关键字列表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/elixir-associative-data-structures-maps-and-keyword-lists-1db33d166bcc?source=collection_archive---------9-----------------------#2022-08-31">https://betterprogramming.pub/elixir-associative-data-structures-maps-and-keyword-lists-1db33d166bcc?source=collection_archive---------9-----------------------#2022-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="830a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解地图和关键字列表的工作原理</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bb6109569e8de3ba54a89e788dbcb7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yGq1mGN-Xc5GeHPYDAkGaQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">摘自<a class="ae ky" href="https://elixir-lang.org/" rel="noopener ugc nofollow" target="_blank">https://elixir-lang.org/</a></p></figure><p id="f00d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关联数据结构允许一个键与一个给定值相关联。在Python中，它们被称为字典；在JS中，它们被称为文字对象。在Elixir中，有两个:关键字列表和映射。</p><h1 id="f517" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">关键词列表</h1><p id="911a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">它们通常用于向函数发送选项。让我们看一个使用关键字列表的例子。</p><p id="8f28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个由空格分隔的三个数的二进制数，我们想得到一个包含这些数的列表。这可以通过将二进制字符串和分隔符放在string模块内的split函数中来轻松实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="03a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是当二进制字符串中有更多的空格时会发生什么呢？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们没有列出这些数字。我们也有空白，这就是关键字列表出现的地方。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/e928e3ffd790201fb005a39b2c594b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*31_nSsvRJyGMUegK0AutNw.png"/></div></div></figure><p id="4872" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决这个问题，我们可以在split函数中添加一个选项。当一个关键字列表是一个函数的最后一个参数时，我们可以不写尖括号。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6ecb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">换句话说:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="b68d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要的是，关键字列表是元组的列表，其中第一个元素是原子，第二个元素是关键字的值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="e00c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为关键字列表是列表，我们可以做所有我们用普通列表做的操作。让我们通过连接列表来看一个例子(因此，它们是由我们排序的，并且具有与列表相同的线性性能，列表越长，找到值所需的时间就越长):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="b362" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了访问列表的值，我们从原子开始。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="03c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们有两个相同但值不同的键，它将返回找到的第一个值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="48bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些关键词列表被Ecto深度使用，这是一个针对Elixir的ORM。在下面的例子中，我们看到一个对数据库执行查询的函数，这个函数来自于，它的第一个参数是在<code class="fe mv mw mx my b">client_cat</code>中的查询，并使用关键字列表、<code class="fe mv mw mx my b">select</code>和<code class="fe mv mw mx my b">where</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="c705" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">地图</h1><p id="9c76" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">每当我们需要在键值结构中存储数据时，我们就使用映射。当与模式匹配结合使用时，它们非常有用，语法如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a56b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，要访问该地图的元素，我们使用以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2d0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们试图访问一个不存在的键，它将返回nil。我们也可以提取一个值，并把它放在一个变量中。值得一提的是，空地图可以与任何其他地图匹配。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6cb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以使用ping操作符<code class="fe mv mw mx my b">^</code>来匹配键。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="3d26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有一个名为<code class="fe mv mw mx my b">Map</code>的模块，它具有操作映射的功能，比如获取给定键的值或添加新值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="8081" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要修改键值，我们可以使用以下语法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6d1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原始地图不会被修改。记住，在长生不老药里，一切都是永恒不变的。当我们用这个语法更新一个条目时，如果这个键不存在，它将返回一个KeyError错误，而不是返回nil。</p><p id="90a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的代码中可以看到另一种获取地图值的方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="57e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，当一个映射的所有键都是原子时，我们就有了句法糖。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="346f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法</h1><p id="2049" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">总之，我认为和模式匹配一起，这是操纵键值结构的一种非常聪明的方法。你怎么想呢?</p><p id="6f49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查以前的条目:</p><div class="mz na gp gr nb nc"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-control-structures-in-elixir-a8b2b134c1f5"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">如何在药剂中使用控制结构</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">如何在灵丹妙药中使用格、条件、如果和除非</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-pattern-matching-in-elixir-426709bb179a"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">如何在仙丹中使用模式匹配</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">了解等号运算符实际上是如何工作的</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nr l nn no np nl nq ks nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a rel="noopener  ugc nofollow" target="_blank" href="/learn-elixir-in-2023-a691d37f521"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">长生不老药入门——了解它的种类</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">第1部分—基础知识</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="ns l nn no np nl nq ks nc"/></div></div></a></div></div></div>    
</body>
</html>