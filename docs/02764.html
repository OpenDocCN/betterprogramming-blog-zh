<html>
<head>
<title>Build, Test, and Deploy a Flask Application (Part 7)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建、测试和部署Flask应用程序(第7部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-test-and-deploy-a-flask-application-part-7-60dde9080330?source=collection_archive---------1-----------------------#2019-12-28">https://betterprogramming.pub/build-test-and-deploy-a-flask-application-part-7-60dde9080330?source=collection_archive---------1-----------------------#2019-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a179" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">部署</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c5e0a1d110e5b8d6f5fc03cba2b3bf83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4bu2ZYALhOUJIPXV"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> SpaceX </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="6238" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">关于本教程的元信息</h1><h2 id="605d" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">学习目标</h2><ul class=""><li id="5536" class="mk ml iq mm b mn mo mp mq ma mr md ms mg mt mu mv mw mx my bi translated">部署</li></ul><p id="0f52" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">注:本教程是<a class="ae kv" href="https://medium.com/@neohao/learn-flask-in-a-scientific-way-baf4d8055f6e" rel="noopener"> <em class="no">科学学烧瓶</em> </a> <em class="no">系列的一部分。</em></p><h2 id="913a" class="lv le iq bd lf lw lx dn lj ly lz dp ln ma mb mc lp md me mf lr mg mh mi lt mj bi translated">源代码</h2><ul class=""><li id="a679" class="mk ml iq mm b mn mo mp mq ma mr md ms mg mt mu mv mw mx my bi translated">本教程的源代码可以在<a class="ae kv" href="https://github.com/Neo-Hao/mean-review-collector" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获取。</li><li id="5f43" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated">该演示可在<a class="ae kv" href="https://pacific-fortress-91193.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">该网站</a>上获得。</li><li id="6d0a" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated">仅涵盖本教程的版本可以在GitHub 上访问<a class="ae kv" href="https://github.com/Neo-Hao/mean-review-collector" rel="noopener ugc nofollow" target="_blank">。</a></li></ul></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="4596" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">计划</h1><p id="f497" class="pw-post-body-paragraph mz na iq mm b mn mo jr nc mp mq ju ne ma nu ng nh md nv nj nk mg nw nm nn mu ij bi translated">在本教程中，我们将部署我们一直在开发的web应用程序，并向全世界展示它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/05a66c57ac049981477525dfa12fa51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydX83x7tyNIHIQOrCC-Exg.png"/></div></div></figure><p id="b7ba" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">我们将使用Heroku的免费服务。Heroku是构建在AWS服务(如EC2)之上的应用托管服务。</p><p id="9518" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">您可以利用EC2的强大功能，但不需要处理EC2所需的系统管理工作。有了Heroku，你可以用一个<code class="fe ny nz oa ob b">git push</code>将你的应用程序部署到他们的服务器上。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="1d79" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">使用生产级WSGI Web服务器</h1><p id="c5f3" class="pw-post-body-paragraph mz na iq mm b mn mo jr nc mp mq ju ne ma nu ng nh md nv nj nk mg nw nm nn mu ij bi translated">Flask development server不擅长处理真正的请求。要部署我们的应用程序，我们首先需要一个生产级的WSGI web服务器。为此，我们将使用<a class="ae kv" href="https://gunicorn.org/" rel="noopener ugc nofollow" target="_blank"> gunicorn </a>。</p><p id="01d8" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">要安装gunicorn，请在您的终端中键入以下行(您仍然需要在虚拟环境中):</p><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="9bf0" class="lv le iq ob b gy og oh l oi oj">(env)$ pip install gunicorn==19.9.0</span></pre><p id="176d" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">由于我们使用了应用程序工厂模式，gunicorn很难直接找到我们的应用程序模块。因此，我们需要在根级别创建一个名为<code class="fe ny nz oa ob b">wsgi.py</code>的文件:</p><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="18f6" class="lv le iq ob b gy og oh l oi oj">#wsgi.py</span><span id="a2c0" class="lv le iq ob b gy ok oh l oi oj">from app import create_app<br/>app = create_app()</span></pre><p id="35ca" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">要确保这一点，请在您的终端中键入以下行:</p><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="1a2c" class="lv le iq ob b gy og oh l oi oj">(env)$ gunicorn wsgi:app</span></pre><p id="906b" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">您应该看到以下内容:</p><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="8289" class="lv le iq ob b gy og oh l oi oj">[2019-12-27 15:41:08 -0800] [31065] [INFO] Starting gunicorn 19.9.0<br/>[2019-12-27 15:41:08 -0800] [31065] [INFO] Listening at: http://127.0.0.1:8000 (31065)<br/>[2019-12-27 15:41:08 -0800] [31065] [INFO] Using worker: sync<br/>[2019-12-27 15:41:08 -0800] [31068] [INFO] Booting worker with pid: 31068</span></pre><p id="2e22" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">Gunicorn会用你的8000入口。您应该能够通过web浏览器在http://127.0.0.1:8000本地检查您的应用程序。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="5344" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">使用Heroku</h1><p id="e67e" class="pw-post-body-paragraph mz na iq mm b mn mo jr nc mp mq ju ne ma nu ng nh md nv nj nk mg nw nm nn mu ij bi translated">要准备将您的应用程序部署到Heroku，您需要:</p><ol class=""><li id="cea0" class="mk ml iq mm b mn nb mp nd ma ol md om mg on mu oo mw mx my bi translated">在Heroku.com报名。</li><li id="3687" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu oo mw mx my bi translated">安装<a class="ae kv" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"> Heroku CLI </a>。(请按照此网页上的说明操作。)</li><li id="e015" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu oo mw mx my bi translated">仔细检查您的<code class="fe ny nz oa ob b">requirements.txt</code>:回想一下我们在教程<a class="ae kv" href="https://medium.com/better-programming/build-test-and-deploy-a-flask-application-part-3-3a2abfe4be21" rel="noopener"> <em class="no">构建、测试和部署Flask应用程序:第3部分——应用程序工厂和蓝图</em> </a>中生成的需求文件。为了确保我们没有添加任何新的依赖项(我们实际上添加了)，请在您的终端中再次运行下面一行:</li></ol><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="1e80" class="lv le iq ob b gy og oh l oi oj">(env)$ pip freeze &gt; requirements.txt</span></pre><p id="ab0d" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">4.创建一个名为<code class="fe ny nz oa ob b">procfile</code>的新文件:</p><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="846b" class="lv le iq ob b gy og oh l oi oj">web gunicorn wsgi:app</span></pre><p id="7e41" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">5.将上述所有更改提交并推送到GitHub。</p><p id="f006" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">现在，您已经为部署做好了准备。在终端中键入以下行:</p><pre class="kg kh ki kj gt oc ob od oe aw of bi"><span id="733b" class="lv le iq ob b gy og oh l oi oj">(env)$ heroku create<br/>(env)$ git push heroku master</span></pre><p id="0644" class="pw-post-body-paragraph mz na iq mm b mn nb jr nc mp nd ju ne ma nf ng nh md ni nj nk mg nl nm nn mu ij bi translated">您可以通过运行<code class="fe ny nz oa ob b">heroku open</code>在浏览器中打开应用程序来检查您的实时应用程序。你也可以在这个网站上查看我的演示。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="efd2" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">教程列表</h1><ul class=""><li id="d8fc" class="mk ml iq mm b mn mo mp mq ma mr md ms mg mt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/@neohao/build-test-and-deploy-a-mini-flask-application-1d9ca6c45115" rel="noopener">构建并测试迷你烧瓶应用</a></li><li id="e240" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/better-programming/build-test-and-deploy-an-interactive-flask-application-part-i-templates-53a7b0cbe760" rel="noopener">构建、测试和部署Flask应用程序:第1部分—模板</a></li><li id="ada3" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/better-programming/build-test-and-deploy-a-flask-application-part-2-53f2c8df3ebc" rel="noopener">构建、测试和部署Flask应用程序:第2部分——认证</a></li><li id="78c5" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/@neohao/build-test-and-deploy-a-flask-application-part-3-3a2abfe4be21" rel="noopener">构建、测试和部署Flask应用程序:第3部分——应用程序工厂和蓝图</a></li><li id="c985" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/@neohao/build-test-and-deploy-a-flask-application-part-4-5aa4f079fadb" rel="noopener">构建、测试和部署Flask应用程序:第4部分——重构测试</a></li><li id="0517" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/@neohao/build-test-and-deploy-a-flask-application-part-5-4a3c0bc36b8e" rel="noopener">构建、测试和部署Flask应用程序:第5部分——认证(续)</a></li><li id="0eca" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/@neohao/build-test-and-deploy-a-flask-application-part-6-952a1b29a02a" rel="noopener">构建、测试和部署Flask应用程序:第6部分——评审系统</a></li><li id="19fb" class="mk ml iq mm b mn np mp nq ma nr md ns mg nt mu mv mw mx my bi translated"><a class="ae kv" href="https://medium.com/@neohao/build-test-and-deploy-a-flask-application-part-7-60dde9080330" rel="noopener">构建、测试和部署Flask应用程序:第7部分——部署</a></li></ul></div></div>    
</body>
</html>