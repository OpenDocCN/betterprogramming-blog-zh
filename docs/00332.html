<html>
<head>
<title>Recognizing Text With Firebase ML Kit on iOS and Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在iOS和Android上使用Firebase ML套件识别文本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/recognizing-text-with-firebase-ml-kit-on-ios-android-8b9c538715df?source=collection_archive---------0-----------------------#2019-04-19">https://betterprogramming.pub/recognizing-text-with-firebase-ml-kit-on-ios-android-8b9c538715df?source=collection_archive---------0-----------------------#2019-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d1e8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Firebase的ML工具包实现文本识别的实用指南</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div></figure><p id="57d4" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在我的上一篇文章中，我谈到了什么是<a class="ae li" href="https://firebase.google.com/docs/ml-kit/" rel="noopener ugc nofollow" target="_blank"> Firebase ML Kit </a>，我们对它的所有特性做了一个简单的介绍。</p><p id="01f8" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果你错过了这篇文章，下面是它的链接:</p><div class="lj lk gp gr ll lm"><a href="https://medium.com/kulizau/ok-ml-kit-how-smart-are-you-83c9e58b7330" rel="noopener follow" target="_blank"><div class="ln ab fo"><div class="lo ab lp cl cj lq"><h2 class="bd ir gy z fp lr fr fs ls fu fw ip bi translated">“好吧，ML Kit，你有多聪明？”</h2><div class="lt l"><h3 class="bd b gy z fp lr fr fs ls fu fw dk translated">ML工具包的介绍以及为什么您应该了解更多关于它的信息。</h3></div><div class="lu l"><p class="bd b dl z fp lr fr fs ls fu fw dk translated">medium.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma mb lm"/></div></div></a></div><p id="eef3" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在本文中，我将介绍如何在ML工具包中为您的iOS和Android应用程序实现<em class="mc">文本识别</em>功能。</p><p id="3621" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">开始之前，请确保:</p><ul class=""><li id="316b" class="md me iq ko b kp kq ks kt kv mf kz mg ld mh lh mi mj mk ml bi translated">你已经在你的项目中包含了Firebase。你可以在<a class="ae li" href="https://firebase.google.com/docs/ios/setup" rel="noopener ugc nofollow" target="_blank"> iOS这里</a>和<a class="ae li" href="https://firebase.google.com/docs/android/setup" rel="noopener ugc nofollow" target="_blank"> Android这里</a>找到如何做到这一点。</li><li id="daf8" class="md me iq ko b kp mm ks mn kv mo kz mp ld mq lh mi mj mk ml bi translated">如果您打算使用基于云的API，那么您已经启用了它们。</li></ul><p id="3bf3" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如前一篇文章所述，你必须升级到<a class="ae li" href="https://firebase.google.com/pricing/" rel="noopener ugc nofollow" target="_blank"> Blaze plan </a>才能使用基于云的API。</p><p id="0bc3" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">升级后，您会在项目的Firebase仪表板的ML Kit页面上找到启用基于云的API的选项。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/7f25c52a38ce406954eca389692d8b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rrDd80oMVfRvSxvgFgU5Eg.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">用于文本识别和条形码扫描的设备上APIs用于图像标注的基于云的API</p></figure></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="b167" class="ni nj iq bd nk nl nm nn no np nq nr ns jw nt jx nu jz nv ka nw kc nx kd ny nz bi translated">ios</h1><h2 id="009f" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">第一步:包括豆荚</h2><p id="11a1" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">对于iOS，您需要包含两个pod中的一个，<code class="fe or os ot ou b">MLVision</code>或<code class="fe or os ot ou b">MLVisionTextModel</code>。</p><p id="2f2f" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果您计划使用云API，请使用<code class="fe or os ot ou b">MLVision</code>，如果您只想使用设备上的API，请使用<code class="fe or os ot ou b">MLVisionTextModel</code>。</p><p id="48e3" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">把它们包含在你的<code class="fe or os ot ou b">Podfile</code>里，就像这样:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="5118" class="oa nj iq ou b gy oz pa l pb pc">pod 'Firebase/Core'</span><span id="85c3" class="oa nj iq ou b gy pd pa l pb pc"># On-device API<br/>pod 'Firebase/MLVisionTextModel'</span><span id="ba7e" class="oa nj iq ou b gy pd pa l pb pc"># Cloud-based API<br/>pod 'Firebase/MLVision'</span></pre><p id="33dd" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">一旦你在<code class="fe or os ot ou b">Podfile</code>中包含了这些pod，运行<code class="fe or os ot ou b">pod install</code>命令来安装这些pod。</p><h2 id="2d33" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤2:导入Firebase</h2><p id="67d7" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">在您的应用程序中，在需要使用Firebase的地方导入它，如下所示:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="7719" class="oa nj iq ou b gy oz pa l pb pc">import Firebase</span></pre><h2 id="06fb" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤3:获取<code class="fe or os ot ou b">Vision</code>的一个实例</h2><p id="9265" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">我们在这里谈论的是Firebase的<code class="fe or os ot ou b">Vision</code>:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="9a78" class="oa nj iq ou b gy oz pa l pb pc">let vision = Vision.vision()</span></pre><h2 id="99c3" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤4:获取文本识别器的实例</h2><p id="cf11" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">一旦获得了<code class="fe or os ot ou b">Vision</code>的实例，就需要获得文本识别器，如何获得取决于您使用的API。</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="c5d9" class="oa nj iq ou b gy oz pa l pb pc">// On-device API<br/>let recognizer = vision.onDeviceTextRecognizer()</span><span id="c57b" class="oa nj iq ou b gy pd pa l pb pc">// Cloud-based API<br/>let recognizer = vision.cloudTextRecognizer()</span></pre><p id="2f44" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这是负责处理图像和识别其中文本的组件。</p><h2 id="1b49" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤5(可选):配置您的文本识别器以检测某些语言</h2><p id="5a9f" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">您还可以将文本识别器配置为仅识别特定语言或特定语言集的文本。</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="8ac1" class="oa nj iq ou b gy oz pa l pb pc">let options = VisionCloudDocumentTextRecognizerOptions()</span><span id="a2a1" class="oa nj iq ou b gy pd pa l pb pc">// Setting languages to English, French &amp; Hindi<br/>options.languageHints = ["en", "fr", "hi"]</span><span id="efad" class="oa nj iq ou b gy pd pa l pb pc">// Create your text recognizer with the above options<br/>let recognizer = vision.cloudDocumentTextRecognizer(options: options)</span></pre><h2 id="d0a0" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">第六步:让你的形象成为一个<code class="fe or os ot ou b">VisionImage</code></h2><p id="5e20" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">像这样将<code class="fe or os ot ou b">UIImage</code>作为参数传递给<code class="fe or os ot ou b">VisionImage</code>:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="930e" class="oa nj iq ou b gy oz pa l pb pc">let visionImage = VisionImage(image: UIImage)</span></pre><p id="44d4" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在Firebase文档中有其他方法可以得到<code class="fe or os ot ou b">VisionImage</code> <a class="ae li" href="https://firebase.google.com/docs/ml-kit/ios/recognize-text" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="6ec2" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤7:用你的文本识别器处理你的<code class="fe or os ot ou b">VisionImage</code></h2><p id="3b91" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">既然已经有了文本识别器和图像，就可以通过将图像传递给<code class="fe or os ot ou b">process(_:completion:)</code>方法来处理图像并获得结果。</p><p id="7538" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个方法返回一个<code class="fe or os ot ou b">VisionText</code>对象。</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="pe kl l"/></div></figure><p id="8e5d" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这是一个关于如何从图像中检测文本的教程。ML工具包中有一个选项，您可以从文档图片的图像中检测文本。</p><p id="a854" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在Firebase文档中了解更多信息<a class="ae li" href="https://firebase.google.com/docs/ml-kit/ios/recognize-text" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="a9b5" class="ni nj iq bd nk nl nm nn no np nq nr ns jw nt jx nu jz nv ka nw kc nx kd ny nz bi translated">机器人</h1><h2 id="f0db" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤1:添加Firebase ML Vision作为依赖项</h2><p id="1534" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">对于Android，您需要在应用程序级的<code class="fe or os ot ou b">build.gradle</code>文件的<code class="fe or os ot ou b">dependencies</code>块中包含ML视觉依赖，如下所示:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="7131" class="oa nj iq ou b gy oz pa l pb pc">implementation 'com.google.firebase:firebase-ml-vision:19.0.3'</span></pre><h2 id="cbf6" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤2:自动下载文本识别ML模型</h2><p id="edc7" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">只有在使用设备上的API时，才需要遵循这个步骤。</p><p id="7774" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">将以下代码块添加到您的<code class="fe or os ot ou b">AndroidManifest.xml</code>文件中，可以确保从Play Store下载您的应用程序时，文本识别ML模型会自动下载:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="1bd0" class="oa nj iq ou b gy oz pa l pb pc">&lt;application ...&gt;<br/>  ...<br/>  &lt;meta-data<br/>      android:name="com.google.firebase.ml.vision.DEPENDENCIES"<br/>      android:value="ocr" /&gt;<br/>&lt;/application&gt;</span></pre><h2 id="181d" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤3:获取文本识别器的实例</h2><p id="4b40" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">由于您的文本识别器是负责处理图像和识别图像中的文本的组件，因此您需要在执行任何其他操作之前获取该组件的实例:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="b926" class="oa nj iq ou b gy oz pa l pb pc">// On-device API<br/>val recognizer = FirebaseVision.getInstance().onDeviceTextRecognizer</span><span id="d83b" class="oa nj iq ou b gy pd pa l pb pc">// Cloud-based API<br/>val recognizer = FirebaseVision.getInstance().cloudTextRecognizer</span></pre><h2 id="15b7" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤4(可选):配置您的文本识别器以检测某些语言</h2><p id="23d3" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">您可以将文本识别器配置为仅识别特定语言或特定语言集的文本。</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="d890" class="oa nj iq ou b gy oz pa l pb pc">// Setting languages to English, French &amp; Hindi<br/>val options = FirebaseVisionCloudTextRecognizerOptions.Builder()<br/>        .setLanguageHints(Arrays.asList("en", "fr", "hi"))<br/>        .build()</span><span id="bd14" class="oa nj iq ou b gy pd pa l pb pc">// Create your text recognizer with the above options<br/>val recognizer = FirebaseVision.getInstance().getCloudTextRecognizer(options)</span></pre><h2 id="697d" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">第五步:让你的形象成为一个<code class="fe or os ot ou b">FirebaseVisionImage</code></h2><p id="9419" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">以下是你如何从一个<code class="fe or os ot ou b">Bitmap</code>得到你的<code class="fe or os ot ou b">FirebaseVisionImage</code>:</p><pre class="kf kg kh ki gt ov ou ow ox aw oy bi"><span id="6429" class="oa nj iq ou b gy oz pa l pb pc">val image = FirebaseVisionImage.fromBitmap(bitmap)</span></pre><h2 id="74c2" class="oa nj iq bd nk ob oc dn no od oe dp ns kv of og nu kz oh oi nw ld oj ok ny ol bi translated">步骤6:用文本识别器处理FirebaseVisionImage</h2><p id="2970" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">在获得了<code class="fe or os ot ou b">FirebaseVisionImage</code>和文本识别器之后，可以通过调用文本识别器上的<code class="fe or os ot ou b">processImage()</code>方法来处理图像，如下所示:</p><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="pe kl l"/></div></figure><p id="6299" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">同样，这是一个关于如何从图像中检测文本的教程。ML工具包中有一个选项，您可以从文档图片的图像中检测文本。</p><p id="bf4a" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">你可以在Firebase文档中了解更多信息<a class="ae li" href="https://firebase.google.com/docs/ml-kit/ios/recognize-text" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="71a6" class="ni nj iq bd nk nl nm nn no np nq nr ns jw nt jx nu jz nv ka nw kc nx kd ny nz bi translated">结论</h1><p id="88be" class="pw-post-body-paragraph km kn iq ko b kp om jr kr ks on ju ku kv oo kx ky kz op lb lc ld oq lf lg lh ij bi translated">这就是Firebase ML套件的文本识别功能！</p><p id="2af4" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">以下是我的ML工具包系列中的所有文章:</p><div class="lj lk gp gr ll lm"><a href="https://medium.com/thecreateschool/ok-ml-kit-how-smart-are-you-83c9e58b7330" rel="noopener follow" target="_blank"><div class="ln ab fo"><div class="lo ab lp cl cj lq"><h2 class="bd ir gy z fp lr fr fs ls fu fw ip bi translated">“好吧，ML Kit，你有多聪明？”</h2><div class="lt l"><h3 class="bd b gy z fp lr fr fs ls fu fw dk translated">ML工具包的介绍，以及为什么你应该了解更多。</h3></div><div class="lu l"><p class="bd b dl z fp lr fr fs ls fu fw dk translated">medium.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma mb lm"/></div></div></a></div><div class="lj lk gp gr ll lm"><a href="https://medium.com/thecreateschool/recognizing-text-with-firebase-ml-kit-on-ios-android-8b9c538715df" rel="noopener follow" target="_blank"><div class="ln ab fo"><div class="lo ab lp cl cj lq"><h2 class="bd ir gy z fp lr fr fs ls fu fw ip bi translated">在iOS和Android上使用Firebase ML套件识别文本</h2><div class="lt l"><h3 class="bd b gy z fp lr fr fs ls fu fw dk translated">用Firebase ML工具包实现文本识别功能的实用指南。</h3></div><div class="lu l"><p class="bd b dl z fp lr fr fs ls fu fw dk translated">medium.com</p></div></div><div class="lv l"><div class="pf l lx ly lz lv ma mb lm"/></div></div></a></div></div></div>    
</body>
</html>