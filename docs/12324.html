<html>
<head>
<title>Providing Help to Your Console Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的控制台应用程序提供帮助</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/providing-help-to-your-console-apps-c686e2d5f6c1?source=collection_archive---------11-----------------------#2022-05-27">https://betterprogramming.pub/providing-help-to-your-console-apps-c686e2d5f6c1?source=collection_archive---------11-----------------------#2022-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9897" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过提供命令行应用程序信息和参数使用说明，让您的控制台应用程序用户更加轻松</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e6bf6918cb2b4e476f2e9bf989854a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6aR5wnXtQv-g7b3nn9oz5g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/pt-br/@yankrukov?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Yan Krukov </a>从<a class="ae ky" href="https://www.pexels.com/pt-br/foto/borrao-mancha-nevoa-morena-4458411/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄</p></figure><p id="b190" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">控制台应用程序(也称为命令行应用程序)是一种不提供GUI(图形用户界面)的应用程序，用户交互仅通过命令文本进行，大多数控制台应用程序(如grep、curl和git)都有大量的文档，提供有关参数的使用方法信息，避免用户必须搜索其他来源来了解如何使用该应用程序。</p><p id="6fde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建控制台应用程序是一项非常常见的任务，但为所有参数添加自定义帮助文本可能是一项非常痛苦的任务，我甚至可以说，我过去使用的大多数控制台应用程序都没有为用户提供任何帮助，迫使他们检查源代码或外部文档才能使用它。</p><p id="d966" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是,<code class="fe lv lw lx ly b">System.CommandLine</code>工具为我们的。net核心应用程序，它的使用很简单，正如你在我将要展示的下一步中所看到的。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b6ca" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">创建控制台应用程序</h1><p id="5cb5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">要创建新的应用程序，运行命令<code class="fe lv lw lx ly b">dotnet new console -n command-line-example</code>，它将在新的命令行示例文件夹中创建一个新的控制台应用程序，然后运行<code class="fe lv lw lx ly b">cd command-line-example</code>来访问项目并使用<code class="fe lv lw lx ly b">dotnet run</code>运行</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e03c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">系统。命令行</h1><p id="c804" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><a class="ae ky" href="https://github.com/dotnet/command-line-api/blob/main/docs/Your-first-app-with-System-CommandLine.md" rel="noopener ugc nofollow" target="_blank">系统。命令行</a>包提供了一个行解析器、命令行帮助文档和其他特性。</p><p id="fdfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将它添加到项目中，只需运行<code class="fe lv lw lx ly b">dotnet add package System.CommandLine — prerelease</code>，它就会被下载并安装。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1d83" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">添加应用程序帮助描述</h1><p id="6589" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当在执行中提供<code class="fe lv lw lx ly b">-h</code>或<code class="fe lv lw lx ly b">-help</code>时，刚刚创建的应用程序不会显示任何信息，但<code class="fe lv lw lx ly b">RootCommand</code>类将允许轻松地向应用程序添加描述，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加应用描述</p></figure><p id="46b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行<code class="fe lv lw lx ly b">dotnet run -- -h</code>将显示应用描述</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/d7be08220d5c24e9164127eb06f172e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*G-tbSoAr2yc--yxUEJVNyQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">控制台应用程序帮助文本描述</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="88d9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">添加参数帮助信息</h1><p id="f4eb" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在让我们添加新的参数，并为其提供解析和帮助文本，我将首先尝试一个整数。</p><p id="feee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用有几个构造函数的<code class="fe lv lw lx ly b">System.CommandLine.Option&lt;T&gt;</code>泛型类来做到这一点，我选择了一个非常普通的构造函数，在这里我们传递它的游戏，一个带有默认值的函数，最后是它的描述。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加参数描述</p></figure><p id="6cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行<code class="fe lv lw lx ly b">dotnet run -- -h</code>也会显示参数帮助文本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/d7eb3900801d01bf963cd5caf2371a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*4VFKzwFCWXmZyRmRMIVq7A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序和参数帮助信息</p></figure><p id="608a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要访问参数，我们可以使用<code class="fe lv lw lx ly b">SetHandler</code>方法，它有许多签名，最常见的是接受一个动作，然后输入参数列表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">处理输入参数值</p></figure><p id="9558" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在下面看到的，用<code class="fe lv lw lx ly b">dotnet run</code>命令运行应用程序将显示所提供的输入值的默认参数值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0ec4c3228a386f6ecd75d79c211baf03.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*x20iIMdKsAwzmArtYMqTEA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用默认参数值</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/6a182cc6c8ef573e4a4f7071830d06fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*YxnZ7T1m6oSZY6Yr-o7GXg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">提供输入参数</p></figure><p id="69c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以创建其他参数并以同样的方式使用它们，下面我们可以看到添加一个布尔值和一个系统后的完整代码。IO.FileInfo参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="f037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在<code class="fe lv lw lx ly b">-h</code>选项将显示其他参数</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/8c52ec635f9896a6a5dadf05ee39c108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*bdyheDQQXirZ5ASLCU8XKw.png"/></div></div></figure><p id="66fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当不提供输入参数时，将使用所有默认值</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/1305daa674f2e8096f81506b87fadb23.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*KJ7V8tIW8GQV5rmyK2vM0A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">默认值</p></figure><p id="30c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并且，将使用提供的值而不是默认值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/38737c0b0155369054d1f7d5e894ea8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*bCY6dhPfmtjfgFBBvvxMSA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">提供的输入值</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c8f8" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">火龙果</h1><p id="e5ea" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><a class="ae ky" href="https://www.nuget.org/packages/System.CommandLine.DragonFruit" rel="noopener ugc nofollow" target="_blank">火龙果项目</a>为<code class="fe lv lw lx ly b">System.CommandLine</code>提供了一个实验模型，我们可以完全像以前那样做，但要简单得多，如果你喜欢简单，这可能是一个很好的选择。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="92de" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">了解更多信息</h1><p id="5726" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">像往常一样，我刚刚解释了使用该工具的一个非常简单的方法，要了解更多信息，只需深入了解<a class="ae ky" href="https://github.com/dotnet/command-line-api/blob/main/docs/Your-first-app-with-System-CommandLine.md" rel="noopener ugc nofollow" target="_blank">系统。命令行</a>文档，玩得开心。</p><p id="17e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章能帮助你改进你的项目，让你的用户生活更轻松，谢谢你的阅读，下次再见。</p></div></div>    
</body>
</html>