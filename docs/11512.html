<html>
<head>
<title>How to Use SSH Config File to Boost Your Productivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SSH配置文件来提高您的生产力</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-ssh-config-file-to-boost-your-productivity-b3867ce8cbfe?source=collection_archive---------1-----------------------#2022-03-27">https://betterprogramming.pub/use-ssh-config-file-to-boost-your-productivity-b3867ce8cbfe?source=collection_archive---------1-----------------------#2022-03-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="21b8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">轻松跟踪您的服务器的IP地址</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bfd4b80cb131bbfda2254579ba1e4f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-7HlAx9cmfiaH6yf"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@wocintechchat" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜@ wocintechchat.com</a>在<a class="ae kv" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f277" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在当今的云计算时代，每个软件开发人员都必须与各种远程服务器打交道，以部署、管理和调试他的代码。</p><p id="2db9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当远程连接的数量开始增加时，记住这些不同服务器的IP地址、端口和凭证位置变得非常困难。</p><p id="6926" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是ssh配置文件的用处。</p><h1 id="565a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">通过ssh连接的传统方式</h1><p id="9e01" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设您运行了以下AWS EC2实例，并提供了以下详细信息</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/5cf48e46be94ba45d0c83cbf5cbbcc78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rxb8X0QqlTh6WwMB7Wza6A.png"/></div></div></figure><p id="023b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有<code class="fe mq mr ms mt b">.pem</code>扩展文件通过ssh连接到服务器。</p><p id="e9cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，要连接到服务器，我们可以使用以下命令</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="28db" class="my lt iq mt b gy mz na l nb nc">ssh -i t3_nano_ssh_aws_keys.pem ubuntu@174.129.141.81</span></pre><p id="5832" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将看到如下所示的服务器连接</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/ca96ef588380c979258948e30357dc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S7iI0aAXH-6x86B7o5YFHQ.png"/></div></div></figure><p id="527d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，上述方法的问题是，当要管理的服务器数量增加时，我们必须跟踪每台服务器的IP地址以及权限文件。</p><p id="fcf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是ssh配置文件的用处。</p><h1 id="cf41" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">通过SSH配置文件连接</h1><p id="6375" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">默认情况下，ssh配置文件位于<code class="fe mq mr ms mt b">~/.ssh</code>目录中。</p><p id="c573" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果该文件不存在，您可以使用以下命令创建一个:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="299f" class="my lt iq mt b gy mz na l nb nc">touch ~/.ssh/config</span></pre><p id="26d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在配置文件中编写远程主机配置的格式如下:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="e7f4" class="my lt iq mt b gy mz na l nb nc">Host &lt;server-alias&gt;<br/>  HostName &lt;server IP or url&gt;<br/>  User &lt;username&gt;<br/>  IdentityFile &lt;location of private key&gt;</span></pre><p id="8478" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二行提供的空间不是必需的，但有助于使文件更具可读性。</p><p id="2af9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们的用例，连接到AWS EC2实例的配置如下:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="aa7a" class="my lt iq mt b gy mz na l nb nc">Host nano-server<br/>  HostName 174.129.141.81<br/>  User ubuntu<br/>  IdentityFile ~/t3_nano_ssh_aws_keys.pem</span></pre><p id="a75b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">保存以下配置后，我们现在可以直接使用上面提供的主机名进行ssh。</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="1b86" class="my lt iq mt b gy mz na l nb nc">ssh nano-server</span></pre><p id="a82b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行上面的命令让我们直接连接到EC2实例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/63afd8c5f704881515accbf9d1d2c901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MznGgnS9Jl6EvXVWtaqPQ.png"/></div></div></figure><h1 id="2461" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">SSH配置文件语法</h1><p id="51e3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">一个ssh配置文件可以有多个ssh配置。例如:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="b37f" class="my lt iq mt b gy mz na l nb nc">Host HOST_NAME_1<br/>  HostName IP_1<br/>  User USER_1<br/>  IdentityFile LOCATION_1</span><span id="eadd" class="my lt iq mt b gy ne na l nb nc">Host HOST_NAME_2<br/>  HostName IP_1</span><span id="eb6b" class="my lt iq mt b gy ne na l nb nc">Host HOST_NAME_3<br/>  HostName IP_1</span></pre><p id="dbda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如上所述，像<code class="fe mq mr ms mt b">User</code> <code class="fe mq mr ms mt b">IdentityFile</code>这样的参数不是强制性的，它们的存在可以根据配置的不同而不同。</p><p id="2372" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以在<a class="ae kv" href="https://www.ssh.com/academy/ssh/config#:~:text=that%20contain%20spaces.-,Listing%20of%20client%20configuration%20options,-The%20following%20keywords" rel="noopener ugc nofollow" target="_blank">这里</a>找到完整的参数列表</p><p id="3a90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了拥有多种配置，我们还可以在创建配置文件时使用大量通配符</p><ul class=""><li id="6a1e" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated">(*)可用作一个或多个字符的替代。例如，如果所有开发服务器都有一个通用的<code class="fe mq mr ms mt b">IdentityFile</code>，我们可以在配置文件中添加下面一行:</li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="be3d" class="my lt iq mt b gy mz na l nb nc">Host dev-*<br/>  IdentityFile &lt;location to identity file&gt;</span></pre><ul class=""><li id="d790" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated">( ?)可以作为单个字符的替代。例如，如果我们想要为所有服务器编写配置，我们可以使用相同的前缀编写:</li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="8123" class="my lt iq mt b gy mz na l nb nc">Host ????-server<br/>  HostName 174.129.141.81<br/>  User ubuntu</span></pre><p id="cbf7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过命令<code class="fe mq mr ms mt b">ssh nano-server</code> <code class="fe mq mr ms mt b">tall-server</code> <code class="fe mq mr ms mt b">omni-server</code>连接到这个服务器，但不能通过<code class="fe mq mr ms mt b">dev-server</code>连接，因为<code class="fe mq mr ms mt b">dev</code>只包含3个字符。</p><ul class=""><li id="5411" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated">( !)可以用来否定它后面的表达式的匹配</li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="4130" class="my lt iq mt b gy mz na l nb nc">Host !prod-server<br/>  User low-priority-user</span></pre><p id="b80c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的配置文件意味着在主机为<code class="fe mq mr ms mt b">prod-server</code>之前，将用户字段的值设置为<code class="fe mq mr ms mt b">low-priority-user</code></p><p id="965a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基于这些通配符，我们可以编写如下示例配置文件:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="1b5c" class="my lt iq mt b gy mz na l nb nc">Host prod-server<br/>  HostName xxx.xxx.xxx.xx<br/>  User ubuntu<br/>  IdentityFile ~/prod.pem</span><span id="013e" class="my lt iq mt b gy ne na l nb nc">Host stag-server<br/>  HostName xxx.xxx.xxx.xx<br/>  User ubuntu<br/>  IdentityFile ~/stag.pem</span><span id="703a" class="my lt iq mt b gy ne na l nb nc">Host dev-server<br/>  HostName xxx.xxx.xxx.xx</span><span id="67dd" class="my lt iq mt b gy ne na l nb nc">Host !prod-server<br/>  LogLevel DEBUG</span><span id="4ffd" class="my lt iq mt b gy ne na l nb nc">Host *-server<br/>  IdentityFile ~/low-security.pem</span></pre><p id="0dfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的文件中，我们已经为<code class="fe mq mr ms mt b">prod-server</code>和<code class="fe mq mr ms mt b">stag-server</code>定义了单独的配置，它们有单独的标识文件。而对于<code class="fe mq mr ms mt b">dev-server</code>和任何其他可能的服务器，有一个默认的<code class="fe mq mr ms mt b">pem</code>文件。</p><p id="74e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，对于除<code class="fe mq mr ms mt b">prod-server</code>之外的所有服务器，日志级别设置为<code class="fe mq mr ms mt b">DEBUG</code>:</p><h1 id="e2c7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="efe8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">配置文件可以用来提高软件开发人员的工作效率。这些文件甚至可以跨系统使用，以实现与远程服务器的安全、可靠和快速的连接，而无需记住与每个单独连接相关的所有元数据。</p><h1 id="e062" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">参考</h1><p id="501d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><a class="ae kv" href="https://linuxize.com/post/using-the-ssh-config-file/" rel="noopener ugc nofollow" target="_blank">https://linuxize.com/post/using-the-ssh-config-file</a></p><div class="no np gp gr nq nr"><a href="https://www.ssh.com/academy/ssh/config" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">SSH配置文件语法和如何配置OpenSSH客户端</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">这个页面是关于OpenSSH客户端配置的。关于OpenSSH服务器配置，请参见sshd_config。对于塔蒂亚宋承宪…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">www.ssh.com</p></div></div></div></a></div><div class="no np gp gr nq nr"><a href="https://www.endpointdev.com/blog/2011/01/ssh-config-wildcards-and-multiple/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">SSH配置通配符和每个客户端多个Postgres服务器</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">由格雷格萨比努Mullane年1月7日SSH配置文件有一些不错的功能，帮助我保持我的理智在…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">www.endpointdev.com</p></div></div></div></a></div></div></div>    
</body>
</html>