<html>
<head>
<title>A New Future for Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java的新未来</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-new-future-for-java-b10a6789f962?source=collection_archive---------2-----------------------#2020-08-06">https://betterprogramming.pub/a-new-future-for-java-b10a6789f962?source=collection_archive---------2-----------------------#2020-08-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e33" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">JVM、Kotlin和Java在2020年后的发展方向</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/916498a6fff89e953990e110ba0a9020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ck8VxCssP9cMqAWZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Javier Allegue Barros 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4364" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们行业的大部分人一直对Java有相当多的批评。这种批评主要集中在Java的冗长和它在许多不必要的情况下生成的样板代码的数量上。虽然我一直喜欢Java，但我不能说这些指控是错误的。的确，Java的冗长和杂乱在很多情况下会变得非常烦人。然而，很多时候，我们不得不接受我们并不是生活在一个完美的世界里，而且在大多数情况下，我们不得不接受两害相权取其轻。所以，是的，Java并不完美，我们都知道这一点，但主要的问题是为什么以前没有做任何事情来解决这些问题。</p><p id="6107" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我个人看来，改变花了这么长时间的唯一原因是Java没有足够的竞争，事情就像它们原来那样。Java语言主宰了市场，这可能是因为缺乏强有力的竞争者，以及Sun和Oracle先后做出的巨大努力。</p><p id="d5a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java提供的强大的类型安全性和它作为一种结构良好的语言的一些特性使它成为大型项目中非常受欢迎的语言。使用Java，事情变得真正失控通常更困难。此外，Java的一个主要特点——它是一种在自己的虚拟机上运行的多平台语言——使它成为许多组织的完美搭档。如果您通过其著名的JIT编译器添加其执行自动性能优化的固有功能，这在许多情况下可以最小化糟糕代码的影响，那么您就有了使用Java的充分理由。</p><p id="bb3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是后来发生了什么？所发生的是，能够在与Java相同的JVM中运行的新语言被引入市场，这些语言消除了Java中的一些最大的烦恼，并且在某些情况下为学习曲线相当平坦的开发人员提供了更好的环境。</p><p id="f2f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们继续之前，让我们简要回顾一下JVM语言的历史。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="381c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">JVM语言的历史</h1><p id="0bcd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们开始之前，我想澄清一件事，我跳过了一些现有的JVM语言，主要是因为它们从未获得足够的吸引力，不能被认为是在我们的行业中广泛使用的候选语言。说到这里，让我们开始快速浏览JVM语言的历史。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/b88e5de74ac287d7c968979c69f48621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZJR42y-aY_0xcY7w.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马克西米利安·魏斯贝克尔在<a class="ae ky" href="https://unsplash.com/s/photos/java?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="295b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须从<a class="ae ky" href="https://en.wikipedia.org/wiki/Java_(programming_language)" rel="noopener ugc nofollow" target="_blank"> Java </a>说起，当然，它是JVM世界中最古老和最流行的语言。</p><p id="059e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java于1996年1月正式发布，因此它已经存在了24年；不错吧，嗯？最初，Java是一种纯粹的命令式语言，遵循纯粹面向对象的编程风格；它也是一种强类型语言。Java的语法在某些方面类似于C++和C<a class="ae ky" href="https://en.wikipedia.org/wiki/C_(programming_language)" rel="noopener ugc nofollow" target="_blank">语言，但它被认为是一个改进的版本，因为用Java编写代码比C或c++容易得多。另一方面，我们认为批评者最大的争论是它的冗长。</a></p><p id="6f43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个发布的JVM语言是Groovy。它在2003年就出现了，尽管直到2007年1月它的第一个官方和标准化版本才出现。Groovy的优势还在于它可以被用作脚本语言。Groovy是一种动态类型语言，所以类型检查发生在运行时；这也是一些开发者不喜欢Groovy的原因之一。你用Groovy写代码，它在编译时看起来是正确的，但是在运行时，你意识到有问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/32cd271b9af6c39020de83455801d8eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J1MV_KxBgI-2-m0m.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:维基百科</p></figure><p id="b5f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来出现了一种流行了几年的语言。我们说的是<a class="ae ky" href="https://www.scala-lang.org/" rel="noopener ugc nofollow" target="_blank"> Scala </a>。Scala于2004年正式发布，它为JVM世界带来了一种新的编程模型，包括函数式编程及其声明式方法。我们可以肯定Scala是第一个引入我们之前讨论过的不变性概念的，所以它为Java转换做了很好的事情。另一方面，Scala的批评者不喜欢它，因为它语法复杂，可读性差。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/3bf9ae9b401925c4ff6bdfb1ab278079.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/0*KNAG3TrBiAKV-GjD.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:维基百科</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/bab09ec052d59fcbc145e65fb3abead7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0cJKgNPkFk1bvYGX.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:维基百科</p></figure><p id="e66e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一种出现在JVM世界中的语言是<a class="ae ky" href="https://clojure.org/" rel="noopener ugc nofollow" target="_blank"> Clojure </a>，一种纯粹的函数式语言。最近它变得相当流行，但是它<strong class="lb iu">第一次出现是在2007年。Clojure是一种基于<a class="ae ky" href="https://en.wikipedia.org/wiki/Lisp_(programming_language)" rel="noopener ugc nofollow" target="_blank"> LISP </a>的语言，其特点是简单和使用纯函数。在它的缺点中，我们可以提到它是动态类型的(与Groovy相同),学习曲线更陡峭，因为它的语法与其他JVM语言完全不同。</strong></p><p id="bf34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对学习Clojure感兴趣，有几本好书值得一读:《Clojure的乐趣》和《Clojure编程:第三版》</p><p id="cf65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后但同样重要的是，我们有<a class="ae ky" href="https://kotlinlang.org/" rel="noopener ugc nofollow" target="_blank">科特林</a>。Kotlin于2016年2月首次发布，从那以后，它的人气就没有停止过增长。它是由JetBrains公司设计的，有一个明确的目标:消除所有最流行的Java问题。按照它的设计方式，它保留了Java的所有优点，同时消除了它的大部分问题。这就是它变得如此流行的原因，许多人认为它可能在未来几年内打败Java。</p><p id="ca92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解更多关于Kotlin的知识(我鼓励您这样做，因为它是一种很棒的语言)，我建议您阅读书籍"<a class="ae ky" href="https://www.manning.com/books/kotlin-in-action" rel="noopener ugc nofollow" target="_blank"> Kotlin in Action </a>",这是一本面向从Kotlin开始的Java开发人员的极好的书籍。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/911544c1c0c035473131fae3abcc9e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TpR6huTNqOyvrdcm.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@louis993546?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">路易·蔡</a>在<a class="ae ky" href="https://unsplash.com/s/photos/kotlin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a4fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是最重要的JVM语言。我们跳过了一些不太流行的，但是我们可以提到其中的一些:Jython、JRuby、Ceylon、Fantom等等。你可以在维基百科上查看现有JVM语言的完整列表。</p><p id="da60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们注意到的一件事是，在最初的八年或十年里，Java没有多少竞争对手，但从那以后，它开始有了一些竞争。那么有竞争是好是坏呢？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3cc8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">竞争加剧的好处</h1><p id="f452" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如我们前面提到的，Java在早期没有太大的变化，可能是因为不需要它。尽管这种语言远非完美，但它被广泛使用并非常流行。</p><p id="6072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是后来新的竞争者出现了，更多的现代语言带来了新的特性，解决了Java开发人员长期以来的一些痛点。</p><p id="d997" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，让我们看看Scala语言。自2009年以来，Scala越来越受欢迎。开发人员欢迎这种新的函数式风格，这种风格允许他们有更大的灵活性，并且能够安全轻松地编写并行代码。我们可以在下面的谷歌趋势图中看到这一趋势:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/d4994c020ba9ea265ac5c874bf553216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6zMGoaB3lEBxtEkx.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资料来源:theboreddev.com</p></figure><p id="6216" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">甲骨文对这一新趋势的反应是什么？Java Lambdas和Streams是2014年发布的。我想我们都同意，那是Java迈出打败Scala的最大一步的时候。目前在业界工作的每个人都可以感受到Scala近年来一直在遭受的蒸汽损失。</p><p id="d130" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JVM世界中有更多竞争者的另一个好处是JIT编译器和JVM本身正在经历的持续改进。现在有更多的人对优化的JVM和改进的性能优化感兴趣。所以竞争对每个人来说都是一件好事！</p><p id="3da9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个出现在舞台上的竞争对手是Kotlin，Kotlin非常重要，因为在某些方面，它为Oracle指明了前进的道路。Kotlin已经表明，保留Java的优点，但创造一种更简洁、编码更快的语言是可能的。</p><p id="5305" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们看看谷歌趋势，看看Kotlin在过去几年里有多受欢迎，这是我们得到的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/4e7f72f65122c251aa9fce2aaa30b9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jpkN_tUtiepSuGeQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资料来源:theboreddev.com</p></figure><p id="e153" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来科特林很快就变得很受欢迎。然而，在过去几年里，它似乎已经稳定下来。</p><p id="3847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">甲骨文已经注意到业界对科特林的反应。如果你看一下<a class="ae ky" href="https://jdk.java.net/15/release-notes" rel="noopener ugc nofollow" target="_blank"> JDK 15发布说明</a>，你会发现Java的一些新特性基本上是Kotlin所改变的复制。例子包括<a class="ae ky" href="https://openjdk.java.net/jeps/359" rel="noopener ugc nofollow" target="_blank">新的Java记录</a>，新的文本块(带三重引号的多行字符串)，以及新的<code class="fe nb nc nd ne b">switch</code>语句，它或多或少是Kotlin <code class="fe nb nc nd ne b">when</code>语句的副本。</p><p id="97bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们讨论的所有这些我称之为“Java的Kotlinisation”通过成为更强有力的竞争者，Kotlin向Java展示了前进的道路。从我的角度来看，Kotlin是我见过的唯一一种可以在我们的行业中超越Java的语言。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7b1c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Java的“kotline化”</h1><p id="69f9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一些即将到来的Java特性在可读性和改进Java的主要弱点之一——冗长性方面将是Java的一个巨大改进。我们可以肯定他们都与科特林的某些特征有可疑的相似之处。</p><p id="106b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，这些功能大部分是<em class="nf">功能预览</em>。这意味着，如果你在JDK 14或JDK 15发布时安装了它们，你将无法默认使用它们。</p><p id="f46a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java特性预览是一个版本中引入的新特性，但默认情况下是禁用的。它们被包含在发布中只是为了收集来自开发者社区的反馈，所以它们仍然会有变化。这就是为什么不建议在生产代码中使用它们。</p><p id="4e31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在编译时启用它们，您必须执行以下操作:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="5b52" class="nk md it ne b gy nl nm l nn no">javac --enable-preview --release 14</span></pre><p id="5dc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想在运行时启用它们，您必须运行以下命令:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="6a48" class="nk md it ne b gy nl nm l nn no">java --enable-preview YourClass</span></pre><p id="e2c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，您也可以在IDE中启用它们，但是注意不要在所有新项目中默认启用预览！</p><p id="8e1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看那些将对我们未来版本的Java编码产生更大影响的变化。</p><h2 id="9d30" class="nk md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">Java记录</h2><p id="9c2c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Java记录是我们许多人长期以来一直要求的一个特性。我猜您已经多次遇到过这种情况，当您不情愿地必须实现<code class="fe nb nc nd ne b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" rel="noopener ugc nofollow" target="_blank">toString</a></code>、<code class="fe nb nc nd ne b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" rel="noopener ugc nofollow" target="_blank">hashCode</a></code>、<code class="fe nb nc nd ne b"><a class="ae ky" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" rel="noopener ugc nofollow" target="_blank">equals</a></code>，并且为每个现有的字段获取器时。(我假设您不再使用setters，并且您也绝对不应该使用它。)</p><p id="dc8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kotlin提供了<a class="ae ky" href="https://kotlinlang.org/docs/reference/data-classes.html" rel="noopener ugc nofollow" target="_blank">数据类</a>来解决这个问题，Java也打算通过发布<a class="ae ky" href="https://openjdk.java.net/jeps/359" rel="noopener ugc nofollow" target="_blank">记录类</a>来做同样的事情，Scala的<a class="ae ky" href="https://docs.scala-lang.org/tour/case-classes.html" rel="noopener ugc nofollow" target="_blank"> case类</a>也有这样的东西。</p><p id="b2a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些类的主要目的是在对象中保存不可变的数据。让我们通过一个例子来看看在Java中会好到什么程度。这是我们需要编写多少代码才能实例化和比较我们的<code class="fe nb nc nd ne b">Employee</code>类:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="2657" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以及它包含的<code class="fe nb nc nd ne b">Address</code>对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="0386" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这么简单的东西代码太多了，不是吗？</p><p id="2a1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看新的Java记录会是什么样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="5a04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有我们的<code class="fe nb nc nd ne b">Address</code>班又来了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="78bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这和我们之前用这么多代码写的完全一样。你将不得不同意我的观点:这是惊人的，我们将要节省的代码量和它的简单程度！</p><p id="fb96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看新的switch语句有什么不同。</p><h2 id="fe35" class="nk md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">改进的switch语句</h2><p id="5355" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Java中新的switch语句解决了在Java中使用switch语句的一些固有问题。此时应该避免使用Switch语句，因为它们很容易出错并导致代码重复。例如，目前很容易让一个案子不了了之。<br/>有了新的switch语句，这个问题就解决了，因为如果我们的switch语句没有覆盖属于我们传递给switch的类型的整个域范围，它就无法编译。</p><p id="49c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了举例说明这一点，我们将在Java中创建一个<code class="fe nb nc nd ne b">DayOfTheWeek</code> enum:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="70e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个，我们的开关就会告诉我们一周中的哪个位置对应于那一天。让我们先来看看目前我们如何使用Java 11来做到这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="226f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用当前的switch语句，我们将不得不使用一个变量，而且，如果我们错过了一周中的某一天，我们的代码将完美地编译。这是switch语句的问题之一:它非常容易出错。</p><p id="a133" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么Java 14如何改善这种情况呢？让我们快速了解一下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="b680" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将很快看到，新的switch语句可以用作表达式，而不仅仅是语句。</p><p id="b6c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果更简洁，更有表现力。这足以说服我们中的许多人使用它们，但主要的改进之一是，如果我们没有覆盖switch中的所有情况，现在switch语句将无法编译。它会向我们显示以下错误，例如:</p><pre class="kj kk kl km gt ng ne nh ni aw nj bi"><span id="94ed" class="nk md it ne b gy nl nm l nn no">Error:(9, 24) java: the switch expression does not cover all possible input values</span></pre><p id="a5b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从现在开始，在我们的switch语句中不可能漏掉一个案例。太棒了，不是吗？</p><p id="779d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这非常类似于科特林<code class="fe nb nc nd ne b">when</code>声明，你可以在<a class="ae ky" href="https://kotlinlang.org/docs/reference/control-flow.html" rel="noopener ugc nofollow" target="_blank">文档</a>中读到。</p><p id="eff8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也来看看新的文本块。</p><h2 id="1599" class="nk md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">文本块</h2><p id="12b6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你有没有抱怨过在Java中将一大块JSON 赋值给一个变量是多么的丑陋和困难？Java将引入多行字符串，您可以通过用三重引号将它们括起来来定义它们。当这个特性正式发布时，在多行中定义长字符串将变得更加容易。</p><p id="70b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这两种模式的区别。目前，如果我们想在一个变量中存储一个格式化的JSON，它看起来就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="b372" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，当新的文本块发布时，它会像下面这样简单明了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="79e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我认为那样好多了，你同意吗？这也是Kotlin支持的，你可以在它的<a class="ae ky" href="https://kotlinlang.org/docs/reference/basic-types.html" rel="noopener ugc nofollow" target="_blank">类型定义</a>中找到。</p><p id="0d07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到，Java从它的竞争对手Kotlin那里“继承”了许多解决自己问题的方法。我们不知道这一次甲骨文是否及时做出了正确的反应来对抗科特林的崛起，或者它是否来得太晚了。就个人而言，我认为Java正在向前迈出正确的步伐，即使这些变化是由其竞争对手以某种方式引发的，并且可能来得有点晚。</p><p id="d2de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，如果这篇文章激发了您学习Kotlin语言的兴趣，我建议您阅读“<a class="ae ky" href="https://www.manning.com/books/kotlin-in-action" rel="noopener ugc nofollow" target="_blank"> Kotlin in Action </a>”，这是一本非常好的面向Kotlin初学者的Java开发人员的书。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="780c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="b06f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我认为竞争是Java语言有史以来最好的事情。我的印象是，否则的话，Java将会固步自封。此外，Java的竞争对手已经展示了一种不同的编程方式是可能的，展示了前进的道路，并避免停留在一种过时和生疏的编写代码的方式。</p><p id="d902" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近在Java中看到的变化，以及所有即将到来的特性和改进，正在使Java变得比以往任何时候都更强大，一种适应当前时代的语言，一种希望发展并忘记传统做事方式的语言:Java的新未来！</p><p id="760a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我真的希望你喜欢这次阅读，我希望我能很快再次见到你。</p><p id="19b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢您的阅读！</p></div></div>    
</body>
</html>