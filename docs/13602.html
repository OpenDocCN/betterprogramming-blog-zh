<html>
<head>
<title>Tauri’s Use of JavaScript and Rust</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Tauri对JavaScript和Rust的使用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tauris-use-of-javascript-and-rust-850cc6d542c8?source=collection_archive---------6-----------------------#2022-09-11">https://betterprogramming.pub/tauris-use-of-javascript-and-rust-850cc6d542c8?source=collection_archive---------6-----------------------#2022-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="56a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Tauri有一个非常有趣的能力，可以在一个项目中使用Rust和JavaScript。为什么这种方法如此罕见？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e733aa0ebd282c32cf2a001052bed80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A7IWi4U7sEpsbG4U"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">丹尼尔·里昂在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ecf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://tauri.app/" rel="noopener ugc nofollow" target="_blank"> Tauri </a>是一个非常有趣的框架。一方面，它是一个框架，解决了桌面开发领域的一个大问题。它支持跨平台开发，没有每次都要单独安装Chrome浏览器的缺点。这节省了资源并减小了包的大小。另一方面，它是需要两种完全不同语言的罕见框架之一。在这种情况下，语言是Rust和JavaScript。Tauri在前端需要JavaScript、CSS和HTML，但也给了将片段外包给Rust的可能性。这个想法并不是全新的。WebAssembly实际上采用了类似的方法。</p><p id="422a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是有道理的。通过这种方法，您仍然可以使用web的UI技术，同时通过一种更加优化的语言来利用计算机的所有功能。然而，Tauri的这一特性在其他框架中非常少见。此外，WebAssembly是一个很好的东西，但在web中有某种缺失。但是为什么两种不同语言的这种方法如此罕见呢？要回答这个问题，首先要熟悉这两种语言的巨大差异。</p><h1 id="7517" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Rust vs. JavaScript</h1><p id="2ec6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果我们想探讨这个问题，就不能避免对这两种语言进行技术上的比较。不过，我想长话短说。</p><p id="d401" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript是一种高级的解释语言。这意味着它从实际的技术过程中获得了高度的抽象。这使得程序员可以更容易、更快地完成任务。此外，代码仅在执行时才被转换成机器可读的代码。因此，不需要单独的构建过程。虽然这些语言以其快速开发的能力而大放异彩，但它们也有性能差的缺点。每次执行程序时，必须运行转换代码的独立程序。</p><p id="5a21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，Rust是一种用于系统编程的编译语言。这意味着Rust代码在发货前会被转换为机器代码。因此，生成的二进制文件是高度优化的。此外，该语言提供了对内存等系统资源的更多访问，增加了实现的复杂性。然而，你几乎可以完全控制你的程序。</p><h1 id="ea44" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">当速度和UX相遇</h1><p id="1fbd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Rust因其构建可靠高效的软件的强大能力而广受欢迎。你可以争辩说JavaScript有着相反的名声。然而，它在浏览器上具有垄断地位，并且相当灵活。</p><p id="c5ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是什么时候需要这么快的节奏呢？最近只有一个项目我需要使用Rust。</p><p id="798f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前段时间想用Tauri搭建一个带live preview的小型Markdown编辑器(类似VS代码)。为了解析降价，使用了库“marked”。太好了，太好了。</p><p id="6c68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是过了一段时间，我注意到在处理较大的文本时会出现一定的延迟。这与每次击键都必须在预览中重新生成整个文本这一事实有关。文档越大，解析器的工作量就越大。我有点惊讶自己这么快就陷入了这个瓶颈。现在，有很多方法可以帮助我们。</p><p id="4542" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我可以对React中的两个值去抖，以限制编辑中的延迟。这只会为用户隐藏延迟。此外，我可以尝试将文本分成多个块，只重新生成被编辑的部分。但是为了不破坏文本，这种方法需要小心实现。但是为什么需要用JavaScript运行这个任务呢？将Markdown解析成HTML的任务对于Rust来说几乎是一个完美的例子。如果没有上面的任何优化，Rust将大文档转换成Markdown的速度要快12倍。这是一项很容易外包给Rust的大任务。</p><h1 id="1e46" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">现实</h1><p id="5aef" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这种情况有多常见？从我的角度来看，这种情况有点罕见，因为大多数时候JavaScript已经足够快了。它能完成任务。即使不是这样，我们也可以通过减少对JavaScript的依赖来提高性能。这是岛屿架构的基础，我已经在这篇文章中解释过了。当使用中级语言时，你仍然有一个陡峭的学习曲线。</p><p id="135a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个问题和你当前的语言也能完成任务的想法足以证明在大多数时候坚持使用特定语言的决定是正确的。然而，这种想法并不总是最好的方法——在JavaScript世界中也可以看到这一点。用JavaScript创建网站变得很棒。但是对任何远离浏览器的东西使用JavaScript就不合适了。Rust或任何其他中级语言也有这个问题。通过WebAssembly可以用Rust创建一个网站，但从开发人员的体验来看，效率并不高。</p><h1 id="a6fb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">摘要</h1><p id="844c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">回到开头的问题:我认为桌面应用是一个罕见的领域，在这个领域，伟大的UX和令人敬畏的性能的要求结合在一起。物联网在未来也可能有类似的需求。但是，它可能不需要出色的用户体验。也许，在未来我们会更经常地看到这种双语教学。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="884b" class="mu lt iq mq b gy mv mw l mx my">This article can also be found on my blog: <a class="ae kv" href="https://nikolas.blog/tauris-use-of-javascript-and-rust/" rel="noopener ugc nofollow" target="_blank">https://nikolas.blog/tauris-use-of-javascript-and-rust/</a></span></pre></div></div>    
</body>
</html>