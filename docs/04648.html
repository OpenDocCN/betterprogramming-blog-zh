<html>
<head>
<title>How to Structure Your Code With React and Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React和Redux构建代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-structure-your-code-with-react-and-redux-948d0a2bd55e?source=collection_archive---------15-----------------------#2020-04-27">https://betterprogramming.pub/how-to-structure-your-code-with-react-and-redux-948d0a2bd55e?source=collection_archive---------15-----------------------#2020-04-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ebc7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">保持代码库和文件整洁的设计</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/586280358b1984780b7092d604e49160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J88dBnBsh_EhzoEx.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@flowforfrank?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">费伦茨·阿尔马西</a>在<a class="ae ky" href="https://unsplash.com/s/photos/react?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="fd63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当从零开始构建一个应用程序时，技术债务会迅速增加。像React和Redux这样的框架提供了很好的模式来以模块化的方式构建代码。</p><p id="d2e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们生活在一个完美的世界，所以这就是我们所需要的！</p><p id="c97a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，<em class="lv">我们不</em>除外，<em class="lv">也不是。</em></p><p id="8306" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用React和Redux时，我总是在后退一步时想到“哇，什么时候变得这么乱了？”这引发了一次洗牌，在解决了所有的错误后，我终于满意了。</p><p id="f6c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直到几个星期后，它再次发生。</p><p id="7c62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样的代码需要持续的关注。它需要爱和感情。驯服野兽的同时让它变得更强大。构建难以驾驭的代码需要一个总体策略。</p><p id="672d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于React和Redux，我使用我喜欢称之为IARS。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><p id="d5db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你爱怎么说就怎么说，IARS代表互动、行动、减少者、选择者。</p><p id="b174" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个细目分类。</p><h2 id="010b" class="mh mi it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">相互作用</h2><p id="cdcd" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">这是完成繁重工作的地方，由用户活动触发。保存新的东西？将功能放在这里并导出，以便前端组件可以访问它。</p><p id="1c35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应用程序中的任何更改都应该从这里开始。</p><p id="6458" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">示例:我开发了很多区块链应用程序，所以图1是interactions.js中的一个函数示例，它从我创建的游戏中加载一个玩家。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/6dc5576428378f697c6c4443f4503330.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-BxUOJzhGvzCfOyR.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图interactions.js的片段</p></figure><p id="cc2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里唯一的外部依赖是actions.js中的<code class="fe lw lx ly lz b">playerDetailsLoaded</code>。</p><p id="8c2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">tennisPlayer</code>是区块链上的一个智能合约实例。它存储一个玩家列表，并公开一个公共的<code class="fe lw lx ly lz b">players</code>数组，用<code class="fe lw lx ly lz b">id</code>调用该数组来检索单个玩家。</p><p id="a177" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图2显示了如何从组件中调用它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/08ad4595df1fa4b1fc50960745670104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/0*Su5e6FNsCOBNTlcF.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2</p></figure><h2 id="847a" class="mh mi it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">行动</h2><p id="f418" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">动作是调度程序用来与缩减器交互的东西。过一会儿，您的actions.js文件将看起来如图3所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/d728ea625210d7362dc9405c2162703c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-hW2BsNU9gfSnIyY.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3: actions.js</p></figure><p id="c681" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第55行显示了从interactions.js中的调度程序调用的<code class="fe lw lx ly lz b">playerDetailsLoaded</code>函数。</p><p id="8b81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个文件会很快变大，所以明智的做法是将actions.js转换成一个actions目录，并在逻辑上分离这些操作。稍后会详细介绍。</p><h2 id="1862" class="mh mi it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">还原剂</h2><p id="9504" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">Redux存储中的数据是由Redux改变的。如果你以前用过Redux，你就会知道这些是什么样子的。图4显示了我们的<code class="fe lw lx ly lz b">PLAYER_DETAILS_SELECTED</code>减速器在第22行的例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/4e9ac05114947852f9fc8cb4555431d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sz6fJpPbuwfgh8OV.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4: reducers.js</p></figure><h2 id="1c59" class="mh mi it bd mj mk ml dn mm mn mo dp mp li mq mr ms lm mt mu mv lq mw mx my mz bi translated">选择器</h2><p id="227e" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">选择器是组件用来访问redux存储中的数据的。我在selectors.js中使用了<a class="ae ky" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> lodash </a>和<a class="ae ky" href="https://github.com/reduxjs/reselect" rel="noopener ugc nofollow" target="_blank"> reselect </a>的组合。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/699b4ea00f179e590f124ec83d46ffce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E3V8XxME_JpufH7f.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5:选择器. js</p></figure><p id="49ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图6展示了如何从组件中调用它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/7b6146db46cdb1f2590a50d4afb62d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C_Dn9n4upovMHJwZ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图6:在组件代码中选择playerDetails</p></figure><p id="01d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们做到了！从组件到交互，到动作，到缩减器，到选择器，再回到组件。</p><p id="cf2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种模式的伟大之处在于，每个组件只需要知道一些交互和一些选择器，从而保持组件代码的整洁。</p><h1 id="0564" class="nl mi it bd mj nm nn no mm np nq nr mp jz ns ka ms kc nt kd mv kf nu kg my nv bi translated">扩大</h1><p id="75a8" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">从一个包含以下文件的<code class="fe lw lx ly lz b">redux/</code>文件夹开始:</p><ul class=""><li id="5aec" class="nw nx it lb b lc ld lf lg li ny lm nz lq oa lu ob oc od oe bi translated"><code class="fe lw lx ly lz b">interactions.js</code></li><li id="33fe" class="nw nx it lb b lc of lf og li oh lm oi lq oj lu ob oc od oe bi translated"><code class="fe lw lx ly lz b">actions.js</code></li><li id="957a" class="nw nx it lb b lc of lf og li oh lm oi lq oj lu ob oc od oe bi translated"><code class="fe lw lx ly lz b">reducers.js</code></li><li id="4b4d" class="nw nx it lb b lc of lf og li oh lm oi lq oj lu ob oc od oe bi translated"><code class="fe lw lx ly lz b">selectors.js</code></li></ul><p id="6aa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着应用程序的增长，当您觉得文件变得太大(可能每个文件都超过了几百行)时，请重新构建Redux文件夹，为每个文件创建一个文件夹。在每个文件夹中，将代码分成逻辑文件。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="b764" class="nl mi it bd mj nm ok no mm np ol nr mp jz om ka ms kc on kd mv kf oo kg my nv bi translated">进一步阅读</h1><p id="e107" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">如果你对区块链开发感兴趣，我会写一些教程、演练、提示以及如何开始和建立投资组合的技巧。</p><p id="c135" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看以下资源:</p><div class="op oq gp gr or os"><a href="https://medium.com/blockcentric/blockchain-development-resources-b44b752f3248" rel="noopener follow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">区块链开发资源马上跟进</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">学习区块链、以太坊和DApp开发的资源列表</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">medium.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div></div></div>    
</body>
</html>