<html>
<head>
<title>I Roasted My First iOS Apps’ Source Code and Refactored It</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我烘烤了我的第一个iOS应用程序的源代码，并对其进行了重构</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/i-roasted-my-first-ios-apps-source-code-and-refactored-it-79aa7ae519f2?source=collection_archive---------11-----------------------#2022-08-09">https://betterprogramming.pub/i-roasted-my-first-ios-apps-source-code-and-refactored-it-79aa7ae519f2?source=collection_archive---------11-----------------------#2022-08-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b726" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">给iOS开发者的提示</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/818f91643dff2a20785c8907b1168f3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ay1imfTGwq48fI0B"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯利·西克玛</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7b39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">刚找到一个硬盘，里面有我所有的旧编码项目。我想看一看，并分享我犯下的暴行，所以在开发出更好的替代方案后，我烘烤了我的代码。</p><p id="d55c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2018年快高中毕业的时候开始了我的iOS开发之旅。有整整一年的时间致力于跟随教程，学习语言的语义，以及半生不熟的项目。我决定跳过这些，直接进入我的第一个完全独立的应用程序。</p><h1 id="ec9d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">动物媒体</h1><p id="0cc5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这是我第一个真正的iOS应用。我的创作没有遵循教程。</p><p id="cc25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我记得我刚刚学会使用Python进行web抓取。我很兴奋能把它应用到某个地方。我决定做一个动物百科全书，简称Animalpedia，作为一个iOS应用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/32bcdc7bb931f58e0fe06cdfad15eb22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*bMIoMs8nV3FgiBvphwncCQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">动物媒体演示</p></figure><h1 id="0d13" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">巨大的JSON</h1><p id="03cb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">打开项目时，我注意到的第一件事是没有外部API调用。当然不是。在这段时间里，我不知道如何打网络电话。</p><blockquote class="mt mu mv"><p id="a83e" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">对于新手来说，API是一种与服务进行通信方式。想象一下有一个电影API。你告诉API，“给我所有的恐怖电影”，API就会检索并给你所有的恐怖电影数据。</p></blockquote><p id="2c04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我学会了如何使用Python进行网络抓取，所以我编写了一个脚本，用所有动物的数据生成一个JSON文件。之后我手动导入到项目中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/9a5645ac5275944ec19c92e9c0827c22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZAhnYb9b0zaCxEEG5atgtA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">巨大的JSON和所有已知的现存动物</p></figure><p id="1c77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图像也是如此。我不知道您可以从URL中检索图像，所以我将它们作为资产包括在内。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/9e1d14d552cf16198436a06557b97539.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*yrdGWeNFWOQOec4SEp9nVg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">所有已知现存动物的图像</p></figure><p id="857d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我可以说我不依赖外部供应商是为了安全起见，但我是在撒谎。事实是，我不知道API是什么，也不知道如何在iOS应用程序中通过互联网检索图像。</p><h1 id="48f4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">应用程序图标</h1><p id="5f02" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这也是我第一次创建应用程序图标。我想我被你需要包含的大量不同尺寸的图片弄得有点不知所措，所以我只添加了出现在主屏幕上的图标。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/f5826c5d6dd75543669282943ec7c8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fASEa8OKFRvpz76RUu7hrA.png"/></div></div></figure><p id="907d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最近的WWDC上，苹果宣布在Xcode 14中，你不再需要包括所有不同的图标大小，只需要一个。然而，这只是最近的消息。</p><blockquote class="mt mu mv"><p id="94a8" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">如果你需要一个免费的第三方解决方案来生成所有不同的图标尺寸，我推荐你去<a class="ae ky" href="https://appicon.co/" rel="noopener ugc nofollow" target="_blank"> appicon.io </a>。只需上传你的<code class="fe nd ne nf ng b">1024x1024</code>应用图标，它将生成所有不同大小的图标，这样你就可以将它们拖放到你的项目中。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/116408767dc7012cf6daa4d2dc68db44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lSYXy1d-MSHZGGUo-YXwsg.png"/></div></div></figure><p id="ec0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太棒了。我还第一次展示了自定义的启动画面！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/7e95c1273702522528ac575b25ada8b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t1EvfggVVdjDYywQM7dDWQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">展示应用程序图标和启动屏幕</p></figure><h1 id="4e63" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">项目结构</h1><p id="a3e4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">好了，让我们来看看实际的项目结构。还有一个<code class="fe nd ne nf ng b">AppDelegate.swift</code>，一个里面什么都没有的<code class="fe nd ne nf ng b">MenuViewController.swift</code>，一个名字奇怪的<code class="fe nd ne nf ng b">AnimalsTableViewControllertest2.swift</code>(我不知道如何在创建文件后重构/重命名它们)，以及其他文件。</p><blockquote class="mt mu mv"><p id="77cf" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">快速提示:要重命名一个类，右击类名，重构&gt;重命名</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/6a2f30e9a84388526554ed27aebbd08e.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*OtRsNVskEUm0gyCNovudNw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">不太好的项目结构</p></figure><p id="f83d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是新手，请注意项目结构不应该是这样的。他们应该按职责分组，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/bbfce40b51f3ee700378b7f7b88e9269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4WsUo5WzFzBL03inFo0fA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">良好的项目结构</p></figure><p id="ec5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了正确地组织你的项目，你首先需要了解架构模式。起初它们可能看起来令人生畏，但是它们会引导你解决常见的问题。有许多不同的模式，但保持简单:</p><ul class=""><li id="9ae1" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">如果你用的是<code class="fe nd ne nf ng b">UIKit</code>(故事板),那就用<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/MVC" rel="noopener ugc nofollow" target="_blank"> MVC </a></li><li id="eecb" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">如果你用<code class="fe nd ne nf ng b">SwiftUI</code>去找<a class="ae ky" href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel" rel="noopener ugc nofollow" target="_blank"> MVVM </a></li></ul><h1 id="fc48" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">UITableViewController</h1><p id="07d8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">看了一眼<code class="fe nd ne nf ng b">AnimalsTableViewControllertest2.swift</code>，我意识到它是你在演示中可以看到的主要<code class="fe nd ne nf ng b">UITableViewController</code>。</p><p id="117a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我创建了两个类型为<code class="fe nd ne nf ng b">Animal</code>的数组；一个用于所有的<code class="fe nd ne nf ng b">animals</code>，一个用于<code class="fe nd ne nf ng b">filteredAnimals</code>(过滤意味着用户在顶部的搜索栏上输入)。</p><p id="37dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我注意到我喜欢在我的旧项目中两次输入大量代码，就像这个例子。我从来没有想过复制代码可能会有一些粗略的东西。对我来说，这是一个很好的标志，表明我正走在正确的道路上！不对！</p><blockquote class="mt mu mv"><p id="0488" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">快速提示:如果你输入代码两次，总会有更好的方法。</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="b5a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我也不知道三元运算符是什么。我非常依赖<code class="fe nd ne nf ng b">if-else</code>语句，即使它们只有一行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/bad2ac6d4704e0d36ce9e44e2dfb7029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONpqOYIgmEndDQRTZnOeMw.png"/></div></div></figure><p id="0540" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不知道计算属性的存在。我去寻找返回我需要的属性的函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">旧代码示例</p></figure><p id="185f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们解决这个问题。我将这些函数重构为计算属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">良好的代码示例</p></figure><blockquote class="mt mu mv"><p id="b6e7" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">快速提示:只要不需要传递参数，就尽量使用计算属性。</p></blockquote><p id="bc7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，我删除了评论。</p><pre class="kj kk kl km gt oc ng od oe aw of bi"><span id="dd81" class="og lw it ng b gy oh oi l oj ok">// Returns true if the text is empty or nil</span></pre><p id="9744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我以前经常这么做。评论最琐碎的事情。好的代码不言自明。属性<code class="fe nd ne nf ng b">searchBarIsEmpty</code>是不言自明的。我不需要知道更多关于它或它是如何计算的。</p><p id="ccb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不必要的是，我还在代码的随机位置留下了太多的空格。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="dcac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得代码变得混乱和难以阅读，所以尽量保守地使用新行。</p><h1 id="d4fc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">轻松转换</h1><p id="aef1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">一个单位转换器应用程序。我把这个应用程序献给我亲爱的母亲，因为她正在寻找一个易于使用的单位转换器应用程序(现有的大多数太复杂了)。我花了两天时间开发，想出了这个:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/79eb47ca22fb1b0e6bb725f8ff6a1403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*kK5J3NbvSy_HB971B-T9Rw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">轻松转换的演示</p></figure><p id="8e58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一款让我有足够信心提交给应用商店的应用。从那时起，它经历了一些迭代。我在<code class="fe nd ne nf ng b">SwiftUI</code>重新做了一遍(敬请期待，我很快会做一个教程)。</p><p id="809a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有兴趣看看现在的app怎么样，可以在这里找到。</p><p id="bd2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使它功能齐全，代码本身也很糟糕，至少可以这么说；我不敢相信它跑了。</p><p id="0048" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此期间，我采用了一种完成项目的哲学。不求完美，但求足够好。这是一个伟大的哲学，我相信每个人都应该采纳。你总是可以迭代和改进的。</p><p id="9197" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个项目远非完美，但完成了它的工作——它很容易转换单位。</p><p id="fa00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，让我们看看代码。</p><h1 id="b37b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">字符串数组</h1><p id="d0f8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我刚打开<code class="fe nd ne nf ng b">ViewController.swift</code>文件，已经开始畏缩了。我为每个单元类别创建了字符串数组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="db0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想我知道这是怎么回事…我将使用这些文字字符串，就像它们是枚举一样。</p><blockquote class="mt mu mv"><p id="f187" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">快速提示:不要在不同的情况下使用字符串！创建一个包含所有可能情况的自定义枚举。如果需要enum的字符串，请使用<code class="fe nd ne nf ng b">CustomStringCovertible</code>协议。</p></blockquote><h2 id="45d9" class="og lw it bd lx ol om dn mb on oo dp mf li op oq mh lm or os mj lq ot ou ml ov bi translated">单元类</h2><p id="de07" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">刚发现一个<code class="fe nd ne nf ng b">Unit</code>级。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/46be0e1886bb6b69865346a46bfb7133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*tbb-gJLA3Yh61KimYSHnbg.png"/></div></figure><p id="e945" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我首先担心的是，苹果的<code class="fe nd ne nf ng b">Foundation</code>库中已经有了一个功能完备的<code class="fe nd ne nf ng b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/unit" rel="noopener ugc nofollow" target="_blank">Unit</a></code>类。我无知地决定用自己的来代替它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/6233b0d75cb44ac8696d3d5566aa6323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zD8admAXz15cCHEEk3VrVg.png"/></div></div></figure><p id="e0ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我可能不知道它的存在。然而，我觉得有趣的是，我没有费心去寻找一个现有的解决方案(就像我们所有懒惰的开发人员所做的那样),而是直接实现了我自己的解决方案。</p><blockquote class="mt mu mv"><p id="cd50" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">快速提示:你的问题可能有一个解决方案。你只需要足够努力地搜索。</p></blockquote><p id="dab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我为创建一个单元定制了一个初始化器。</p><p id="148a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建我的自定义<code class="fe nd ne nf ng b">Unit</code>的实例，您需要传递一个<code class="fe nd ne nf ng b">UnitCategory</code>类型的<code class="fe nd ne nf ng b">category</code>(一个包含<code class="fe nd ne nf ng b">.length</code>、<code class="fe nd ne nf ng b">.volume</code>等的枚举)。)和……就是这样，一个<code class="fe nd ne nf ng b">String</code>类型的<code class="fe nd ne nf ng b">unit</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">非常糟糕的代码</p></figure><p id="11ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不得不删除大部分初始化代码，但是还有另外200行switch语句用于其他单元。</p><p id="5b40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有趣且奇怪的是，我的<code class="fe nd ne nf ng b">Unit</code>类包含一个名为<code class="fe nd ne nf ng b">toMeter</code>的属性，尽管该类应该适用于任何维度，而不仅仅是长度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="56d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我假设我先做了长度单位，需要一个基础系数，这个维度上的所有单位都可以进行转换，只是后来懒得重命名<code class="fe nd ne nf ng b">toMeter</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/7aa23e90d7dd816b1c920475d4af138d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g11i4qrpA_zkd1uvuFR0Kg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何进行线性转换</p></figure><p id="89a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用这个实现把一切都复杂化了。事实上，苹果已经有了<code class="fe nd ne nf ng b">Unit</code>、<code class="fe nd ne nf ng b">Measurement</code>和<code class="fe nd ne nf ng b">Dimension</code>类来为我们做这些工作。看看有多简单。</p><p id="2dbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我创建了一个<code class="fe nd ne nf ng b">convert</code>函数。您传递三个参数:一个值、一个输入单位和一个输出单位。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e839" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样，两行代码转换单位。</p><p id="4a56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Swift中有一篇关于转换单位的文章。这里可以找到<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/unit-and-measurement-in-swift-7c6be4a25586">。</a></p><h1 id="2954" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">更好的方法</h1><p id="d208" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我已经创建了一个更好的方法来获取每个维度类型的单位数组。不需要创建额外的类。枚举就足够了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">良好的代码示例</p></figure><h1 id="b0c9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包裹</h1><p id="1b71" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我想分享更多我的旧代码库，但我认为这篇文章已经扩展得足够了。我希望你在开发iOS应用程序时学到了一些不太好的做法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/0f7760c9191c89998d3dee62c4b66681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FStftyucv6Qpaw_jI9IagA.png"/></div></div></figure><p id="f183" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读，祝你一切顺利！</p><h1 id="04cc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考</h1><ul class=""><li id="c3ea" class="nl nm it lb b lc mn lf mo li oz lm pa lq pb lu nq nr ns nt bi translated">对于应用程序图标生成:<a class="ae ky" href="https://appicon.co/" rel="noopener ugc nofollow" target="_blank">https://appicon.co/</a></li><li id="6c74" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">你可以在这里下载转换应用<a class="ae ky" href="https://apps.apple.com/mx/app/convert/id1495564786?l=en" rel="noopener ugc nofollow" target="_blank"/></li><li id="a740" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">苹果的单元类<a class="ae ky" href="https://developer.apple.com/documentation/foundation/unit" rel="noopener ugc nofollow" target="_blank">文档</a></li><li id="42a0" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">《Swift中的单位和计量》<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/unit-and-measurement-in-swift-7c6be4a25586">篇</a></li></ul></div></div>    
</body>
</html>