<html>
<head>
<title>Build a Full Stack Application With Vue.js, GraphQL, Fastify and MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue.js、GraphQL、Fastify和MongoDB构建全栈应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/coupling-vue-js-with-a-graphql-api-e9fb830e3db?source=collection_archive---------5-----------------------#2019-09-19">https://betterprogramming.pub/coupling-vue-js-with-a-graphql-api-e9fb830e3db?source=collection_archive---------5-----------------------#2019-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="25e2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从头开始部署功能齐全的全栈应用。第三部分，共四部分。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9f5de1eb9409aa5eb4fc3142c5581e8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWhdDsth889DW51EDem23Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="https://www.freepik.com/free-vector/hand-with-a-pencil-with-lightning-shape_901992.htm" rel="noopener ugc nofollow" target="_blank">由Dooder </a>设计</p></figure><ul class=""><li id="aec3" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第1部分:<a class="ae ky" href="https://medium.freecodecamp.org/how-to-build-blazing-fast-rest-apis-with-node-js-mongodb-fastify-and-swagger-114e062db0c9?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">如何用Node.js、MongoDB、Fastify和Swagger构建超快的REST APIs】</a></li><li id="4486" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">第2部分:<a class="ae ky" href="https://medium.com/free-code-camp/how-to-build-a-blazing-fast-graphql-api-with-node-js-mongodb-and-fastify-77fd5acd2998" rel="noopener">如何用Node.js、MongoDB、Fastify和GraphQL构建超快的graph QL API</a></li><li id="df28" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">第3部分:用GraphQL API耦合Vue.js(你在这里。)</li><li id="a3c4" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">第4部分:部署一个GraphQL API和Vue.js前端应用程序(即将推出)。</li></ul><p id="0748" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在本教程中，我们将连接一个GraphQL API和一个解耦的<a class="ae ky" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>前端。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="4769" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">介绍</h1><p id="49f7" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">Vue.js是一个进步的JavaScript框架，允许任何具有HTML、CSS和JavaScript知识的人快速启动应用程序。</p><p id="f30d" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">据说Vue.js吸取了Angular和React的精华部分，然后在它们的基础上进行改进，创造了<a class="ae ky" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>。我个人认为Vue.js对后端和前端开发人员来说都非常直观。</p><p id="8686" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><a class="ae ky" href="https://www.monterail.com/blog/reasons-why-vuejs-is-popular" rel="noopener ugc nofollow" target="_blank">这里的</a>是一篇关于Vue.js更详细的博文，如果你是Vue.js的新手，一定要看下面的视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="607a" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">先决条件</h1><p id="0b8d" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">如果您已经完成了本系列的第二部分，那么您应该已经掌握了完成本教程所需的JavaScript知识。</p><p id="cf7b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">掌握HTML和CSS知识是很好的，但是我们不会太深入——我们将更多地关注JavaScript和Vue.js部分。请务必熟悉<a class="ae ky" href="https://www.youtube.com/watch?v=NoXQ79A2yuM" rel="noopener ugc nofollow" target="_blank"> Vue.js模板语法</a>。</p><p id="2168" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">为了跟进，您需要完成本系列的第2部分或者从Git中克隆库。我强烈建议至少浏览一下第2部分，以便对我们正在处理的数据有一个总体的了解。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="2c0d" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">我们开始吧</h1><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="652b" class="nu mr it nq b gy nv nw l nx ny">git clone <a class="ae ky" href="https://github.com/siegfriedgrimbeek/fastify-graphql-api.git" rel="noopener ugc nofollow" target="_blank">https://github.com/siegfriedgrimbeek/fastify-graphql-api.git</a><br/>cd fastify-graphql-api<br/>npm i</span></pre><p id="9b04" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">请随意将文件夹重命名为更直观的名称。</p><p id="66e4" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们要做的第一件事是将项目文件分为后端(服务器)和前端(客户端)。</p><p id="7beb" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">为此，在项目<code class="fe nz oa ob nq b">root</code>目录中，创建两个目录——即一个<code class="fe nz oa ob nq b">server</code>目录和一个<code class="fe nz oa ob nq b">client</code>目录。一旦创建了这些，将所有现有的代码复制到<code class="fe nz oa ob nq b">server</code>文件夹中。</p><p id="0edd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在我们初始化<code class="fe nz oa ob nq b">client</code>目录中的<strong class="lb iu"> Vue.js </strong>前端之前，我们需要给予我们的客户端与服务器交互的权限，这可以通过启用跨源资源共享(CORS)来完成。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="d1c7" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">实现跨产地资源共享(CORS)</h1><blockquote class="oc od oe"><p id="6c37" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">跨源资源共享(<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/CORS" rel="noopener ugc nofollow" target="_blank"> CORS </a>)是一种机制，它使用额外的<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP" rel="noopener ugc nofollow" target="_blank"> HTTP </a>报头来告诉浏览器让在一个源(域)上运行的web应用程序有权访问来自不同源的服务器的选定资源。当一个web应用程序请求一个不同来源(域、协议或端口)的资源时，它会执行一个<strong class="lb iu">跨来源HTTP请求</strong>。</p></blockquote><p id="bbea" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">server</code>目录中，使用以下命令安装<code class="fe nz oa ob nq b">fastify-cors</code> npm包:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="872f" class="nu mr it nq b gy nv nw l nx ny">npm i fastify-cors</span></pre><p id="25d9" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">软件包安装完成后，将以下内容添加到<code class="fe nz oa ob nq b">src</code>文件夹中的<code class="fe nz oa ob nq b">server.js</code>文件中:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="37ae" class="nu mr it nq b gy nv nw l nx ny">...</span><span id="b883" class="nu mr it nq b gy oj nw l nx ny">// Enable the fastify CORS plugin<br/>fastify.register(require('fastify-cors'), {<br/>   origin: '*',<br/>   credentials: true<br/>})</span><span id="1144" class="nu mr it nq b gy oj nw l nx ny">...</span></pre><p id="bc8e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们现在允许所有的源连接到我们的API。在生产应用程序中，我们将准确指定允许谁进行连接。</p><p id="26ed" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">出于测试目的，确保运行后端应用程序的一个实例，这可以通过导航到<code class="fe nz oa ob nq b">server</code>目录并启动应用程序来完成:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="5aad" class="nu mr it nq b gy nv nw l nx ny">npm run start</span></pre><p id="63f4" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在在另一个终端窗口中，导航到<code class="fe nz oa ob nq b">client</code>目录。现在我们将从一些Vue.js开始。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ff47" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">初始化并设置一个新的Vue.js项目</h1><p id="880e" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">我们将使用<a class="ae ky" href="https://cli.vuejs.org" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">Vue CLI</strong></a><strong class="lb iu"/>工具来创建项目。在<code class="fe nz oa ob nq b">client</code>目录中，运行以下命令:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="f929" class="nu mr it nq b gy nv nw l nx ny">npm install -g @vue/cli</span></pre><p id="7737" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这将安装Vue CLI <strong class="lb iu"> </strong>工具作为<a class="ae ky" href="https://flaviocopes.com/npm-packages-local-global/" rel="noopener ugc nofollow" target="_blank">全局npm包</a>。请注意，您可能需要安装软件包的权限，因此确保在Mac上以管理员身份运行该命令。</p><p id="ab4a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">安装完成后，运行以下命令:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="51dc" class="nu mr it nq b gy nv nw l nx ny">vue create .</span></pre><p id="afd2" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这将在<code class="fe nz oa ob nq b">client</code>目录中生成应用程序。确保遵循下面列出的设置步骤:</p><p id="214d" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">选择将应用程序安装在<strong class="lb iu"> c </strong>当前目录下，然后选择手动选择功能选项并选择以下选项:</p><ul class=""><li id="b3e0" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">巴比伦式的城市</li><li id="9cda" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">路由器</li><li id="ea2f" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">Vuex</li><li id="bba3" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">CSS预处理程序</li><li id="cf03" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">可选地选择<a class="ae ky" href="https://www.thecodecampus.de/blog/eslint-customizable-javascript-linting-tool-1/" rel="noopener ugc nofollow" target="_blank">棉绒/格式器</a></li></ul><p id="0ccf" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">路由器不要选择历史模式<strong class="lb iu"> </strong>，选择Sass/SCSS(带node-sass) <strong class="lb iu"> </strong>作为<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Glossary/CSS_preprocessor" rel="noopener ugc nofollow" target="_blank"> CSS预处理器</a>。</p><p id="a99e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">如果您选择了Linter / Formatter选项，请随意定制它以满足您的开发需求。</p><p id="e9c6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最后，选择将设置存储在专用配置文件中的选项，并将设置保存为名为<code class="fe nz oa ob nq b">fastify-app</code>的预设。这将允许您在稍后阶段再次使用它。</p><p id="2154" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在正在安装您的Vue.js应用程序。完成后，安装以下附加NPM软件包:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="17e8" class="nu mr it nq b gy nv nw l nx ny">npm i apollo-boost bootstrap-vue vue-apollo vue-moment graphql</span></pre><p id="0ae7" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><a class="ae ky" href="https://www.npmjs.com/package/apollo-boost" rel="noopener ugc nofollow" target="_blank">阿波罗推进</a></p><blockquote class="oc od oe"><p id="fef0" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">Apollo Boost是一种开始使用Apollo客户端的零配置方式。它包括一些合理的默认设置，比如我们推荐的<code class="fe nz oa ob nq b"><em class="it">InMemoryCache</em></code>和<code class="fe nz oa ob nq b"><em class="it">HttpLink</em></code>，它们是按照我们推荐的设置为您配置的。</p><p id="f365" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">Apollo Client是一个全功能的缓存GraphQL客户端，集成了React、Angular等等。它允许您轻松地构建通过GraphQL获取数据的UI组件。为了从<code class="fe nz oa ob nq b"><em class="it">apollo-client</em></code>中获得最大价值，您应该将其与视图层集成一起使用。</p></blockquote><p id="a512" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><a class="ae ky" href="https://vue-apollo.netlify.com/" rel="noopener ugc nofollow" target="_blank">vue-阿波罗</a></p><blockquote class="oc od oe"><p id="9477" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">将GraphQL集成到您的Vue.js应用中！</p></blockquote><p id="40bd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><a class="ae ky" href="https://bootstrap-vue.js.org/" rel="noopener ugc nofollow" target="_blank">靴带洞</a></p><blockquote class="oc od oe"><p id="0a30" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">借助BootstrapVue，您可以使用Vue.js和世界上最流行的前端CSS库— Bootstrap v4，在web上构建响应迅速、移动优先的项目。</p></blockquote><p id="9c3a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><a class="ae ky" href="https://github.com/brockpetrie/vue-moment#readme" rel="noopener ugc nofollow" target="_blank"> vue力矩</a></p><blockquote class="oc od oe"><p id="cc8b" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">为您的<a class="ae ky" href="http://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>项目提供便利的<a class="ae ky" href="http://www.momentjs.com/" rel="noopener ugc nofollow" target="_blank"> Moment.js </a>过滤器。在JavaScript中解析、验证、操作和显示日期和时间。</p></blockquote><p id="3e22" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">是时候进行理智检查了。让我们运行应用程序:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="df13" class="nu mr it nq b gy nv nw l nx ny">npm run serve</span></pre><p id="4fd2" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">您的应用程序现在应该运行在<a class="ae ky" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>上。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c26f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">应用概述</h1><p id="bdc0" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">所有的应用程序开发文件都在<code class="fe nz oa ob nq b">src</code>目录中，该目录被构建到<code class="fe nz oa ob nq b">src</code>目录中的<code class="fe nz oa ob nq b">dist</code>目录中。其结构如下:</p><p id="dd7c" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">views</code>目录中，有三个主要视图:</p><ul class=""><li id="0498" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Home.vue</li><li id="d967" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">Car.vue <strong class="lb iu"> * </strong></li><li id="befc" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">Owner.vue <strong class="lb iu"> * </strong></li></ul><p id="4606" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">你可以在<code class="fe nz oa ob nq b">views</code>目录下创建这些文件。</p><p id="95be" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">components</code>目录中，有三个可重用的组件:</p><ul class=""><li id="418f" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Header.vue <strong class="lb iu"> * </strong></li><li id="e112" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">CarCard.vue <strong class="lb iu"> * </strong></li><li id="5324" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">EditCar.vue <strong class="lb iu"> * </strong></li></ul><p id="6ee4" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">*您可以在<code class="fe nz oa ob nq b">components</code>目录中创建这些文件。</p><p id="5e59" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们还有一些用于路由(<code class="fe nz oa ob nq b">router.js</code>)、状态管理(<code class="fe nz oa ob nq b">store.js</code>)和设置(<code class="fe nz oa ob nq b">main.js</code>)文件的支持文件，它们已经由Vue CLI工具创建。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="4bb0" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">让我们写一些代码</h1><p id="1b82" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">我们要做的第一件事是导航到<code class="fe nz oa ob nq b">src</code>文件夹，用下面的代码更新<code class="fe nz oa ob nq b">main.js</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">主页. js</p></figure><p id="584f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在上面的代码中，我们导入了几个依赖项，初始化了库，创建了<a class="ae ky" href="https://www.apollographql.com/docs/react/" rel="noopener ugc nofollow" target="_blank"> Apollo客户端</a>和p<a class="ae ky" href="https://www.apollographql.com/docs/react/v2.5/api/react-apollo/#apolloprovider" rel="noopener ugc nofollow" target="_blank">provider</a>，并创建了Vue实例。</p><p id="9193" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">以上链接是通用的<a class="ae ky" href="https://www.apollographql.com/docs/react/" rel="noopener ugc nofollow" target="_blank"> Apollo </a>文档，但也适用于跨框架。Vue Apollo文档可在<a class="ae ky" href="https://vue-apollo.netlify.com/" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="ffbb" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">了解更多关于Vue实例的信息也是有帮助的，尤其是生命周期挂钩，在这个视频中有很好的解释。</p><p id="bb04" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">接下来，我们将以下代码添加到<code class="fe nz oa ob nq b">router.js</code>文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">router.js</p></figure><p id="8c96" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">上面我们只是导入外部依赖和视图文件。然后，我们初始化路由器并设置路由。</p><p id="542f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">routes对象由路径、名称、组件(视图)以及是否传递了任何属性组成。</p><p id="6db9" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">使用以下语法传递<a class="ae ky" href="https://router.vuejs.org/guide/essentials/passing-props.html" rel="noopener ugc nofollow" target="_blank">属性</a>:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="f412" class="nu mr it nq b gy nv nw l nx ny">:id</span></pre><blockquote class="oc od oe"><p id="2d52" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">Vue路由器是<a class="ae ky" href="http://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>的官方路由器。它与Vue.js core深度集成，使使用Vue.js构建单页面应用变得轻而易举。</p></blockquote><p id="13fa" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">点击了解有关路由和Vue路由器<a class="ae ky" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank">的更多信息。</a></p><p id="3301" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">让我们用下面的代码更新<code class="fe nz oa ob nq b">store.js</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">商店. js</p></figure><p id="6d3a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在上面的代码中，我们导入外部依赖项并初始化<a class="ae ky" href="https://vuex.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vuex </a>。然后我们建立Vuex存储，在其中我们指定初始应用程序状态以及我们期望的突变。</p><blockquote class="oc od oe"><p id="b588" class="lw lx of lb b lc ld ju ly le lf jx lz og ma mb mc oh md me mf oi mg mh mi lm im bi translated">Vuex是Vue.js应用程序的状态管理模式+库。它充当应用程序中所有组件的集中存储，规则确保状态只能以可预测的方式变化。它还与Vue的官方<a class="ae ky" href="https://github.com/vuejs/vue-devtools" rel="noopener ugc nofollow" target="_blank"> devtools扩展</a>集成，以提供诸如零配置时间旅行调试和状态快照导出/导入等高级功能。</p></blockquote><p id="af2d" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这里是<a class="ae ky" href="https://medium.com/vue-mastery/vuex-explained-visually-f17c8c76d6c4" rel="noopener">一篇深入研究Vuex的伟大文章</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="342e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在让我们通过替换下面的代码来更新<code class="fe nz oa ob nq b">App.vue</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.vue</p></figure><p id="564e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">Vue路由器将加载与默认页面相同的<code class="fe nz oa ob nq b">Home.vue</code>，因为我们将主视图指定为默认(<code class="fe nz oa ob nq b">/)</code>路由。</p><p id="8178" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们用以下代码将<code class="fe nz oa ob nq b">router-view</code>加载到我们的应用程序中:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="b069" class="nu mr it nq b gy nv nw l nx ny">&lt;router-view /&gt;</span></pre><p id="e029" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，我们声明并运行将返回数据库中所有汽车的<code class="fe nz oa ob nq b">CarsQuery</code>，然后将结果提交给<strong class="lb iu"> </strong> Vuex商店。</p><p id="d18b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">注意，<code class="fe nz oa ob nq b">CarsQuery</code>是在组件挂载之前执行的，使用的是<code class="fe nz oa ob nq b">beforeMount()</code> <a class="ae ky" href="https://alligator.io/vuejs/component-lifecycle/" rel="noopener ugc nofollow" target="_blank">生命周期钩子</a>。</p><p id="6308" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">请随意将<code class="fe nz oa ob nq b">response</code>变量记录到控制台或使用<a class="ae ky" href="https://github.com/vuejs/vue-devtools" rel="noopener ugc nofollow" target="_blank"> Vue开发工具</a>扩展来查看我们Vuex商店中的响应。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="64bb" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">创建视图和组件</h1><p id="68e1" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">首先，我们可以将下面的代码添加到<code class="fe nz oa ob nq b">Header.vue</code>组件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Header.vue</p></figure><p id="7aa6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">使用上面的代码，我们用字符串props <code class="fe nz oa ob nq b">title</code>和<code class="fe nz oa ob nq b">intro</code>创建了一个简单的可重用的<code class="fe nz oa ob nq b">Header</code>组件。使用<a class="ae ky" href="https://bootstrap-vue.js.org/docs/components/jumbotron" rel="noopener ugc nofollow" target="_blank">引导大屏幕组件</a>构建标题组件。</p><p id="0ceb" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">接下来，我们可以填充<code class="fe nz oa ob nq b">CarCard.vue</code>组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">CarCard.vue</p></figure><p id="c078" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这里我们使用<a class="ae ky" href="https://bootstrap-vue.js.org/docs/components/card" rel="noopener ugc nofollow" target="_blank">引导卡组件</a>和<code class="fe nz oa ob nq b">Car</code>对象作为道具。汽车的详细信息及其属性使用<a class="ae ky" href="https://vuejs.org/v2/guide/syntax.html" rel="noopener ugc nofollow" target="_blank"> Vue模板语法</a>显示，它有两个click事件，使用Vue路由器导航到单个<code class="fe nz oa ob nq b">Car</code>视图或<code class="fe nz oa ob nq b">Owner</code>视图，我们接下来将实现这两个视图。</p><p id="5776" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们使用下面的代码使用<a class="ae ky" href="https://loremflickr.com/" rel="noopener ugc nofollow" target="_blank"> Lorem Flickr API </a>来提供与汽车相关的图像:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="04ae" class="nu mr it nq b gy nv nw l nx ny">:img-src="`https://loremflickr.com/350/200/${car.brand},${car.title}`"</span></pre><p id="0976" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们需要指定API URL、图像宽度和图像高度。然后我们使用模板文字来指定汽车品牌和汽车标题，它们来自汽车对象。</p><p id="ea48" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">两个点击事件<code class="fe nz oa ob nq b">viewCar(id)</code>和<code class="fe nz oa ob nq b">viewOwner(id)</code>使用Vue路由器导航到它们各自的页面，但是在它们工作之前，我们必须首先填充这些视图。</p><p id="633e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最后，还有一些CSS样式规则，我们不会深入讨论。</p><p id="581a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在我们已经有了将被<code class="fe nz oa ob nq b">Home.vue</code>使用的两个组件，我们可以用下面的内容更新<code class="fe nz oa ob nq b">Home.vue </code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Home.vue</p></figure><p id="ee32" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在上面的代码中，我们使用了之前创建的两个组件。</p><p id="6f0a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">对于<code class="fe nz oa ob nq b">Header</code>组件，我们绑定了以下道具:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="0f77" class="nu mr it nq b gy nv nw l nx ny">v-bind:title="'My Car Garage'"<br/>v-bind:intro="'A MongoDB, fastify and GraphQL powered Vue.Js app'"</span></pre><p id="4d6b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">对于<code class="fe nz oa ob nq b">CarCard</code>组件，我们使用<a class="ae ky" href="https://vuejs.org/v2/guide/list.html" rel="noopener ugc nofollow" target="_blank">列表呈现函数</a>遍历<code class="fe nz oa ob nq b">carData</code>数组(从Vuex存储中检索)。这里我们将汽车对象绑定为道具，并将<code class="fe nz oa ob nq b">car.id</code>作为键。</p><p id="8b3d" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">您需要为每个项目提供一个唯一的<code class="fe nz oa ob nq b">key</code>属性，这样Vue就可以跟踪每个项目的身份。点击了解更多关于<code class="fe nz oa ob nq b">key</code>属性<a class="ae ky" href="https://vuejs.org/v2/api/#key" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="d2f2" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在脚本标签中，我们导入依赖项和组件。然后我们使用<code class="fe nz oa ob nq b">mapState</code>助手为我们生成一个计算的getter函数，将<code class="fe nz oa ob nq b">carData</code>加载到状态中。点击了解更多关于<code class="fe nz oa ob nq b">mapState</code>帮手<a class="ae ky" href="https://vuex.vuejs.org/guide/state.html#the-mapstate-helper" rel="noopener ugc nofollow" target="_blank">的信息。</a></p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="4965" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">健全性检查</h1><p id="5cd5" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">如果一切顺利，我们应该会在主页上看到加载的汽车:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/cc0298bf69b07a9fd78c1c57316b605b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4HkvCTmdeIh5zxk5smGzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">主页</p></figure><p id="c4a3" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">如上所述，<code class="fe nz oa ob nq b">@click</code>事件确实工作，因为它们被重定向到正确的视图，但是此时，这些视图是空的，所以让我们填充它们。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="34a4" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">汽车视图</h1><p id="3e2c" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">在<code class="fe nz oa ob nq b">views</code>目录和<code class="fe nz oa ob nq b">Car.vue</code>文件中，添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">汽车. vue</p></figure><p id="a5fd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">让我们从<code class="fe nz oa ob nq b">&lt;template&gt;</code>标签开始，一段一段地分解每个部分。</p><p id="f7ff" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">与我们的其他视图和组件一样，我们使用<a class="ae ky" href="https://vuejs.org/v2/guide/syntax.html" rel="noopener ugc nofollow" target="_blank"> Vue模板语法</a>来呈现汽车的细节。这将创建由标题、面包屑、汽车细节、行动号召和<code class="fe nz oa ob nq b">EditCar</code>组件组成的布局。</p><p id="a2d9" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们循环遍历<code class="fe nz oa ob nq b">car.services</code>对象中的服务数组，列出所有服务，或者在汽车没有服务时显示一条消息。</p><p id="4ee8" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在服务循环中，我们使用<a class="ae ky" href="https://momentjs.com/" rel="noopener ugc nofollow" target="_blank"> moment.js </a>库来格式化日期。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="e220" class="nu mr it nq b gy nv nw l nx ny">{{ service.date | moment("DD/MM/YYYY") }}</span></pre><p id="915b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">btn-container</code> div中，我们列出了我们对动作的调用以及它们各自的功能。</p><p id="b0f5" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最后，我们将<a class="ae ky" href="https://bootstrap-vue.js.org/docs/components/modal" rel="noopener ugc nofollow" target="_blank">引导模式</a>用于编辑汽车表单，它由编辑按钮触发。</p><p id="76b8" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">&lt;script&gt;</code>标签中，我们导入了依赖项和组件，并声明了两个查询，即<code class="fe nz oa ob nq b">getCar</code>和<code class="fe nz oa ob nq b">deleteCar</code>查询，它们用于检索一辆汽车的数据并删除它。</p><p id="83f6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，我们声明我们的初始组件数据、属性、计算数据、组件和方法。</p><p id="f72f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">beforeMount()</code> <a class="ae ky" href="https://alligator.io/vuejs/component-lifecycle/" rel="noopener ugc nofollow" target="_blank">生命周期挂钩</a>中，我们运行<code class="fe nz oa ob nq b">getCarDetails()</code>函数，将<code class="fe nz oa ob nq b">id</code>作为变量传入，它将返回所有单车的数据，然后将结果提交给<strong class="lb iu"> Vuex存储。</strong></p><p id="ae4b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe nz oa ob nq b">goHome()</code>功能将在历史中向后导航一页。</p><p id="7405" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe nz oa ob nq b">deleteCar()</code>函数将通过删除带有我们作为变量传入的<code class="fe nz oa ob nq b">id</code>的汽车来改变我们的数据，然后将结果提交给<strong class="lb iu"> </strong> Vuex存储。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="af90" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">编辑车</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">EditCar.vue</p></figure><p id="a510" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">&lt;template&gt;</code>标签中，我们创建了一个表单，并用<code class="fe nz oa ob nq b">v-model</code> <a class="ae ky" href="https://vuejs.org/v2/guide/forms.html" rel="noopener ugc nofollow" target="_blank">指令</a>将每个表单输入绑定到其各自的值。</p><p id="beb3" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们用下面的代码将OK按钮绑定到<code class="fe nz oa ob nq b">onSubmit</code>事件:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="7bdc" class="nu mr it nq b gy nv nw l nx ny">@ok="onSubmit"</span></pre><p id="d2a7" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在<code class="fe nz oa ob nq b">&lt;script&gt;</code>标签中，我们导入了依赖项并声明了<code class="fe nz oa ob nq b">editCar</code>查询，该查询用于编辑一辆汽车的数据。</p><p id="1598" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，我们声明我们的初始组件数据和道具。</p><p id="d4af" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最后，我们声明了<code class="fe nz oa ob nq b">onSubmit(evt)</code>方法，该方法使用<code class="fe nz oa ob nq b">editCar</code>查询来更新汽车，将表单数据(<code class="fe nz oa ob nq b">{ …data }</code>)作为新的汽车数据传入，然后将这些数据保存到Vuex存储中。然后模态被隐藏。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="0161" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">所有者视图</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok no l"/></div></figure><p id="c7c4" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">到目前为止，您应该已经掌握了代码中的模式，因为<code class="fe nz oa ob nq b">Owner</code>视图中的大部分代码已经在之前的组件和视图中讨论过了。</p><p id="1fc1" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们重用了<code class="fe nz oa ob nq b">Header</code>组件和<code class="fe nz oa ob nq b">CarCard</code>组件——只是这次显示了属于特定所有者的所有汽车。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="2bfe" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="c016" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">我真的希望这篇教程能达到双重目的，一方面展示使用GraphQL进行数据检索和操作的简易性，另一方面展示Vue.js的编码简易性和直观性。</p><p id="5545" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我知道本教程肯定可以进一步重构，以减少代码和复杂性。如果你有什么建议，请在评论中留下。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="cb56" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">下一步是什么？</h1><p id="f6c2" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">我们唯一要做的就是部署。这听起来可能很容易，但是我们有几个松散的结束绑在一起，真正把所有的东西放在一起。</p><p id="335d" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">因此，在下一个教程中，我们将把我们的代码库，包括数据库，转移到云中，我们还将引入环境变量。</p><p id="ab5e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">像往常一样，上述教程中的所有代码都可以在<a class="ae ky" href="https://github.com/siegfriedgrimbeek/Fastify-GraphQL-Vue.Js-Application" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p></div></div>    
</body>
</html>