<html>
<head>
<title>My Attempt at Advent of Code 2021 in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在科特林的《2021代码降临》中的尝试</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/my-attempt-at-advent-of-code-2021-in-kotlin-e26b9a0d394b?source=collection_archive---------11-----------------------#2021-12-14">https://betterprogramming.pub/my-attempt-at-advent-of-code-2021-in-kotlin-e26b9a0d394b?source=collection_archive---------11-----------------------#2021-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="81d3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">科特林能在水下帮你吗，或者圣诞老人和他的潜水艇</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c0348ec8c7288e58ed650d9d85517c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8KUuuZkYHIXczC2m"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">托马斯·哈斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5010" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个名为<a class="ae ky" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">代码降临</a>的编码挑战正在进行中(实际上是中途)，由JetBrains发起，这家公司创造了Kotlin编程语言。</p><p id="45b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在JetBrains 的Kotlin博客上发现了它，并正在解决几个谜题——不是所有的谜题，因为它们有时很耗时，我这样做不是为了竞争，只是为了更好地记住Kotlin，因为现在它不是我的主要工作语言，坦白地说，我很怀念它(而且有机会获得一些奖品——谁会传递一些免费的奖品，我说得对吗？).</p><p id="28c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将会有25个挑战，从12月1日到圣诞节每天一个，所以它就像一个降临节日历，但是用代码。所有的谜题(显然)都是以圣诞节为主题的，并且与圣诞精灵有关，他们在水下的潜水艇里游泳，大概是为了找回被丢进海里的圣诞老人的雪橇钥匙。</p><p id="55fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他们在途中遇到不同的障碍，并解决难题以营救潜艇并继续前进。</p><blockquote class="lv lw lx"><p id="5ceb" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">代码<a class="ae ky" href="https://adventofcode.com/2021/" rel="noopener ugc nofollow" target="_blank">的出现</a>问题可以用你喜欢的任何语言来解决——据我所知，Kotlin不是必需的。但是如果你想有机会赢得一些Kotlin奖品，你需要满足几个条件，使用Kotlin语言是其中之一。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/c3ec99dc3060345e58dcbceb5aa69acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I3GUEWmC49-ufsY1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">塞巴斯蒂安·佩纳·兰巴里在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，我想发布一个第6天的解决方案的例子，因为它已经通过了，而且是允许的，但也因为虽然足够简单，但它没有以最明显的方式解决。我们来看看为什么。</p><p id="94cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://adventofcode.com/2021/day/6" rel="noopener ugc nofollow" target="_blank">此处对问题进行了全面描述</a>。我将转贴部分描述，以便快速参考。</p><p id="b597" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重申一下，有一群灯笼鱼，任务是计算它们繁殖的速度。每条鱼都用一个数字来代表，这个数字显示了它能繁殖的天数。每条鱼在繁殖日只生产一条鱼。有一个规则列表定义了每条鱼的过程:</p><ul class=""><li id="9dbe" class="md me it lb b lc ld lf lg li mf lm mg lq mh lu mi mj mk ml bi translated">一天后，它的内部计时器会变成<code class="fe mm mn mo mp b">2</code>。</li><li id="60de" class="md me it lb b lc mq lf mr li ms lm mt lq mu lu mi mj mk ml bi translated">再过一天，它的内部计时器会变成<code class="fe mm mn mo mp b">1</code>。</li><li id="233b" class="md me it lb b lc mq lf mr li ms lm mt lq mu lu mi mj mk ml bi translated">再过一天，它的内部计时器就会变成<code class="fe mm mn mo mp b">0</code>。</li><li id="e329" class="md me it lb b lc mq lf mr li ms lm mt lq mu lu mi mj mk ml bi translated">又过了一天，它的内部计时器将重置为<code class="fe mm mn mo mp b">6</code>，并且它将创建一个内部计时器为<code class="fe mm mn mo mp b">8</code>的新lanternfish。</li><li id="92f0" class="md me it lb b lc mq lf mr li ms lm mt lq mu lu mi mj mk ml bi translated">又过了一天，第一个lanternfish将具有内部定时器<code class="fe mm mn mo mp b">5</code>，第二个lanternfish将具有内部定时器<code class="fe mm mn mo mp b">7</code>。</li></ul><p id="e9d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建新鱼的lanternfish将其计时器重置为<code class="fe mm mn mo mp b">6</code>，而不是<code class="fe mm mn mo mp b">7</code>(因为<code class="fe mm mn mo mp b">0</code>作为有效计时器值包含在内)。新的lanternfish启动了一个内部计时器<code class="fe mm mn mo mp b">8</code>，直到第二天才开始倒计时。</p><p id="6462" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入是一个数字列表，代表初始鱼群及其各自的内部计时器。第一项任务是计算80天后会有多少鱼。我想到的显而易见的解决方案只是一个模拟:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="abb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此有一个名为<code class="fe mm mn mo mp b">Fish</code>的类，它只有一个名为<code class="fe mm mn mo mp b">plusDay()</code>的方法，并在类<code class="fe mm mn mo mp b">FishFarm</code>中用来创建lanternfish的列表。我们的结果就是添加指定天数后的列表大小，在我们的例子中是<code class="fe mm mn mo mp b">80</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="3a9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确实有效，测试用例通过了。我在我的字谜输入上运行它，它也通过了，耶！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的难题输入(比小测试大)</p></figure><p id="f630" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是等等——还有第二部分。而第二个任务恰好相同，只是现在的天数是256。你认为这个解决方案在全尺寸输入下还能工作吗？</p><p id="c1c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">剧透提醒:不会。鱼的数量增长如此之快，以至于超过了<code class="fe mm mn mo mp b">Int</code>的范围，于是这个计划失败了。怎么办？我们是否应该找到一个可以容纳超过<strong class="lb iu"> 2，147，483，647 </strong>个值<strong class="lb iu">的列表？</strong></p><h1 id="ca74" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">实际上，我们真的那么需要一份名单吗？</h1><p id="1889" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">事实上我们没有。</p><p id="82d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么？因为我们对鱼的定义非常有限——只能有从0到8范围内的值。有没有让你想到什么合适的数据结构？</p><h1 id="71f1" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">一个数组。</h1><p id="7628" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">的确如此。我们只需要一个索引从0到8的数组来保存各自的计数器。数组中的每一个值都将保存当前在内部计时器上有这个数字的鱼的数量。的确，这个解决方案需要更多的改动，以确保我们得到正确的增量和减量。但是最后，它甚至比前一段代码还要短一点。这是调用代码的样子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="0084" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是一个<code class="fe mm mn mo mp b">Long</code>值，该数组还保存类型为<code class="fe mm mn mo mp b">Long</code>的计数器。然而，它们只有几个，一般来说，这个程序的内存占用应该比上一个程序少。而且见效很快。</p><p id="3202" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时候最好的解决方案有点不太明显，不是吗？</p><p id="ed2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者对你来说很明显，只是对我来说不明显。它发生了。尝试一些谜题，也许你会成为这方面的高手！</p><h1 id="4dfe" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">资源</h1><ul class=""><li id="6510" class="md me it lb b lc np lf nq li nu lm nv lq nw lu mi mj mk ml bi translated"><a class="ae ky" href="https://adventofcode.com/2021/day/6" rel="noopener ugc nofollow" target="_blank">代码2021出现，第6天</a>。</li><li id="2e1e" class="md me it lb b lc mq lf mr li ms lm mt lq mu lu mi mj mk ml bi translated"><a class="ae ky" href="https://blog.jetbrains.com/kotlin/2021/11/advent-of-code-2021-in-kotlin/" rel="noopener ugc nofollow" target="_blank">kot Lin博客上关于2021号代码及其规则的文章</a>。</li></ul></div></div>    
</body>
</html>