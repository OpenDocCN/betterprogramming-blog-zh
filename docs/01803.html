<html>
<head>
<title>Swift Design Patterns: Facade Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift设计模式:门面模式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-design-patterns-facade-d12280f61b34?source=collection_archive---------21-----------------------#2019-10-14">https://betterprogramming.pub/swift-design-patterns-facade-d12280f61b34?source=collection_archive---------21-----------------------#2019-10-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3613" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Facade模式可用于使您的代码更加模块化、可重用和易于更改</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0c0294508e8f808772c1b2ff5fd67aa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDuG38q94zegEN_NSb-GRg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@claybanks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">粘土堤</a>在<a class="ae ky" href="https://unsplash.com/s/photos/store-facade?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="7807" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像商店门面一样，它的同名编程模式通常指的是作为前端接口的对象，并屏蔽更复杂的底层或结构代码。</p><p id="47c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在实践中，Facade模式是一个非常重要的工具，可以用来使您的代码模块化、可重用和易于更改。</p><p id="3b84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设您的应用程序需要在每次用户点击以下屏幕中的三个按钮之一时呈现一个平视显示(<code class="fe lv lw lx ly b">HUD</code>):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/09baa4c3078cd1cbcb19265989bc9de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7vW5D4autIP2AttabvYEmQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/433b133c6a5015aca21762aec9dd196d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbpFQtcEdS6kNheyqg0kEg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用户每次点击其中一个按钮时，应用程序将显示一个HUD的示例屏幕。</p></figure><p id="30f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要预设那个<code class="fe lv lw lx ly b">HUD</code>，您可以在SwiftUI视图中实现下面这段代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ma mb l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是一个在SwiftUI视图中使用HUD的非常noob的实现，它包含了大量的代码重复！</p></figure><p id="b073" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，有四行代码重复了三次:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ma mb l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">初始化和调用HUD库的代码块<code class="fe lv lw lx ly b">SVProgressHUD</code></p></figure><p id="6cfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们肯定能做得更好！这里要做的最明显的事情是在我们的<code class="fe lv lw lx ly b">ContentView</code>中创建一个私有方法，称为<code class="fe lv lw lx ly b">func showSuccessHUD(withStatus status: String, delay: TimeInterval = 2)</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ma mb l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在SwiftUI视图中更好地实现了HUD的使用，消除了类中大量的代码重复。</p></figure><p id="f480" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这避免了在<code class="fe lv lw lx ly b">ContentView</code>类中的大量代码重复，但是我们实际上还没有创建一个专门的类来处理我们的<code class="fe lv lw lx ly b">HUD</code>。</p><p id="4c0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">拥有一个专门的<code class="fe lv lw lx ly b">HUD</code>服务会让我们受益匪浅，因为我们不仅可以在整个项目中避免代码重复，而且用另一个库或者甚至是我们自己的定制实现来替换我们的<code class="fe lv lw lx ly b">SVProgressHUD</code>也会容易得多。</p><p id="efc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，无论何时需要，我们都可以很容易地调整我们的项目。</p><p id="229b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看<code class="fe lv lw lx ly b">HUD</code>外观会是什么样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ma mb l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最后，Facade模式用于配置和呈现一个简单的<code class="fe lv lw lx ly b">HUD</code></p></figure><p id="8117" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过调用<code class="fe lv lw lx ly b">HUD.showSuccessHUD(withStatus: "Your message here")</code>，这可以在我们代码的任何地方使用。</p><p id="d341" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么这样更好？您的代码变得适应性很强，因为<code class="fe lv lw lx ly b">HUD</code>服务中的任何更改都(可能)需要更新一个文件:文件<code class="fe lv lw lx ly b">HUD.swift</code>。</p><p id="53cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，这种代码可以轻松地在您的项目中重用，从而显著提高您的生产率和代码质量！</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="47d3" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">好处:面向协议的编程+门面</h1><p id="75df" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我个人喜欢将Facade模式与面向协议编程(PoP)结合使用。</p><p id="db2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，你所有的代码<em class="ng">看起来都是本地的</em>，你可以明确地限制哪种类型的类可以调用它。例如，<code class="fe lv lw lx ly b">HUD</code>方法应该只在<code class="fe lv lw lx ly b">SwiftUI.View</code>类中显示，所以我们可以使用PoP来执行这条规则:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ma mb l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通过面向协议的编程实现的HUD外观</p></figure><p id="16d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个PoP，每次你想从一个<code class="fe lv lw lx ly b">View</code>调用方法<code class="fe lv lw lx ly b">showSuccessHUD</code>，你可以显式地采用那个<code class="fe lv lw lx ly b">View</code>中的<code class="fe lv lw lx ly b">HUD</code>协议，并通过<code class="fe lv lw lx ly b">self.showSuccessHUD</code>调用它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ma mb l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">HUD正面通过PoP结构使用。</p></figure><p id="bb41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是不是很牛逼？继续尝试吧！</p><p id="2029" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PoP + Facade使用的一些其他例子是组织诸如动画、可达性观察器、警告视图、字符串本地化和单元可重用性之类的东西。</p></div></div>    
</body>
</html>