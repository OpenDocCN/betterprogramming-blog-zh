<html>
<head>
<title>How To Use Plotly.js With Angular 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何配合Angular 8使用Plotly.js</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-plotly-js-with-angular-8-2cbf74fd29ba?source=collection_archive---------2-----------------------#2019-07-22">https://betterprogramming.pub/how-to-use-plotly-js-with-angular-8-2cbf74fd29ba?source=collection_archive---------2-----------------------#2019-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/72537dcc4679e22c0e1e1491fee25e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XpYWOJufsyLPdqdiq74CFw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">这张图超载了，但是很平滑。</p></figure><p id="0639" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我一直在做一个项目，我需要使用<a class="ae ld" href="https://plot.ly/javascript/" rel="noopener ugc nofollow" target="_blank"> Plotly.js </a>和<a class="ae ld" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a> 8来绘制一个自定义的TDMS文件。</p><p id="b15e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我在互联网上找到的简单方法有效，但有一个自定义要求，即绘制一个超过100万个点的线图。浏览器最终会崩溃或变慢。</p><p id="d815" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在集思广益和尝试了许多事情之后，我设法找到了一种方法，使Angular 8成为可能。我找到了关于普通JavaScript和反应的文档，但是没有关于Angular的。</p><p id="da04" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">有一个<a class="ae ld" href="https://github.com/plotly/angular-plotly.js?files=1" rel="noopener ugc nofollow" target="_blank"> angular-plotly.js repo </a>，它可能是angular的plotly的最佳版本，但它似乎适用于较小的图形，仍然有一点缺陷。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="d6eb" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">入门指南</h1><p id="bcae" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">我们将在Angular中使用Plotly的普通JavaScript版本，以使其与他们的WebGL版本一起工作时更快更流畅。</p><p id="368e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">本教程假设您在Angular上有一个应用程序。</p><p id="4a77" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将首先在Angular项目中包含Plotly.js。</p><p id="2882" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">从下载部分下载他们的plotly-latest . min . js(1 . 48 . 3是我写这篇教程时的版本)。(你可以使用CDN，但我想让我的应用程序完全独立于互联网)。</p><p id="e13a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您正在使用CDN，只需在<code class="fe mo mp mq mr b">index.html</code>中添加脚本标签。</p><p id="a7cc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您下载了该文件，请将该文件复制到assets文件夹中。</p><p id="3f17" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在<code class="fe mo mp mq mr b">scripts</code>标签的<code class="fe mo mp mq mr b">angular.json</code>中添加这一行:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="6180" class="na lm it mr b gy nb nc l nd ne">"scripts": [</span><span id="8718" class="na lm it mr b gy nf nc l nd ne">"src/assets/plotly-latest.min.js"</span><span id="c195" class="na lm it mr b gy nf nc l nd ne">]</span></pre><p id="3f98" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们已经成功地将该库包含在我们的项目中，现在我们将使用它。</p><p id="ed1a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们假设我们有一个组件<code class="fe mo mp mq mr b">graph</code>，我们将在这里使用它。</p><p id="7134" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在<code class="fe mo mp mq mr b">graph.component.ts</code>:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="ef3b" class="na lm it mr b gy nb nc l nd ne">declare var Plotly: <em class="ng">any</em>;<br/>export class GraphComponent implements OnInit {<br/>...<br/>...<br/>}</span></pre><p id="405c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们在HTML文件中创建一个应该绘制图形的div，您可以相应地添加CSS和HTML标签。我将在最后提供我的，这帮助我保持我的项目响应。</p><p id="866d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe mo mp mq mr b">graph.component.html</code></p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="8852" class="na lm it mr b gy nb nc l nd ne">&lt;div id="Graph" #Graph&gt;&lt;/div&gt;</span></pre><p id="5870" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">回到<code class="fe mo mp mq mr b">graph.component.ts</code>。</p><p id="67d4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们使用<code class="fe mo mp mq mr b">@ViewChild</code>从DOM中查找元素。</p><p id="4308" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">使用<code class="fe mo mp mq mr b">ViewChild</code>而不是<code class="fe mo mp mq mr b">document.getElementById</code>的原因是:</p><ol class=""><li id="af98" class="nh ni it kh b ki kj km kn kq nj ku nk ky nl lc nm nn no np bi translated">是<a class="ae ld" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">打字稿</a>。</li><li id="4d42" class="nh ni it kh b ki nq km nr kq ns ku nt ky nu lc nm nn no np bi translated">如果<code class="fe mo mp mq mr b">div</code>不可见(也就是说，它可能在某个选项卡中，当你转到该选项卡时，该选项卡将被呈现，或者由于某种原因，它的可见性在应用程序中被隐藏)，<code class="fe mo mp mq mr b">the document.getElementById</code>将返回一个错误；它不会找到的。</li></ol><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="4671" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，我们得到了数据。我们可以从任何<code class="fe mo mp mq mr b">GET</code>请求、文件或你可能有的任何来源获得它。</p><p id="7cbc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我将使用一个<code class="fe mo mp mq mr b">GET</code>请求。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="91cd" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">接下来，我们需要以特定的方式格式化数据，以便这个图形库能够工作:</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="0095" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们已经格式化了数据，现在是时候定义图的布局并最终绘制它了。</p><p id="b483" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们使用这个功能，<code class="fe mo mp mq mr b">Plotly.newPlot()</code>。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="7e61" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，服务应用程序并检查。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="f932" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">完整的打字稿代码</h1><p id="760b" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">TypeScript文件的完整代码:</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="2e8f" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">CSS代码</h1><p id="9464" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">我使用CSS来保持它的响应——根据屏幕方向和中心:</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="3c37" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我希望这篇教程对你和我一样有帮助。在这之前我纠结了很多！</p><p id="9a21" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">感谢阅读。</p></div></div>    
</body>
</html>