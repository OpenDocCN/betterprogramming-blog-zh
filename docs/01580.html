<html>
<head>
<title>How To Dockerize an App in 2 Steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过2个步骤将应用程序分类</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-dockerize-an-app-in-2-steps-635edb31fb4a?source=collection_archive---------7-----------------------#2019-09-25">https://betterprogramming.pub/how-to-dockerize-an-app-in-2-steps-635edb31fb4a?source=collection_archive---------7-----------------------#2019-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="73ee" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Docker和Node.js启动容器化的应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d16bce641501bc7952ddedf11a45f7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v8NF5Jh6IRO_1hhX"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">弗兰克·麦肯纳在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="253f" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">要求</h1><ul class=""><li id="3821" class="lv lw iq lx b ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><a class="ae kv" href="https://docs.docker.com/install/" rel="noopener ugc nofollow" target="_blank">码头工人</a></li><li id="f116" class="lv lw iq lx b ly mn ma mo mc mp me mq mg mr mi mj mk ml mm bi translated"><a class="ae kv" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a></li></ul><p id="345f" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">如果您已经有了应用程序，请随意跳到步骤2。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="d399" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">第一步。创建应用程序</h1><p id="7e93" class="pw-post-body-paragraph ms mt iq lx b ly lz jr mv ma mb ju mx mc nh mz na me ni nc nd mg nj nf ng mi ij bi translated">对于这一部分，我们将使用Express创建一个基本的应用程序来生成一个简单的web服务器，而不使用视图引擎。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/84f88c6278cccb4498348a760be5b370.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*PDEWpSLtQMshbo9KsI1DCg.png"/></div></figure><p id="1476" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">您应该得到以下文件结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/9ae513fe26bdabee6d3ca722e952836d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*O87RCHoI_rmN0g1TjGIfIg.png"/></div></figure><p id="7ac1" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">让我们对应用程序做一些更改。首先，我们将更改服务器正在监听的端口。</p><p id="dd03" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">导航至<code class="fe nm nn no np b">bin/www</code> <em class="nq">。</em></p><p id="cd88" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">改变这一点:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/7b59584d9d4e2ac1fc5a59c3e6277e55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Es8BHj-gF4ShY_hlT3irvg.png"/></div></div></figure><p id="7814" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">对此:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/3e3b8b96000aed71ecccc5a5e17b8a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGdbsz7OJ7fwmFHBFjC4cQ.png"/></div></div></figure><p id="b1d1" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">我们所做的只是将端口号从<code class="fe nm nn no np b">3000</code>改为<code class="fe nm nn no np b">8080</code>。</p><p id="a459" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">接下来，我们将编辑<code class="fe nm nn no np b">/users</code> <em class="nq"> </em>路线的响应。导航到<code class="fe nm nn no np b">routes/users.js</code>T21。</p><p id="dcf2" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">改变这一点:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/afce8874eee46a268150e0922f5ec07c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Ore1TwfgjIpQou0FyyX0Mg.png"/></div></figure><p id="c1fb" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">对此:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/e0a15eb729ba196db8c0742de8108080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*eSOPaNWd6m_cQKk_GtMQ1w.png"/></div></figure><p id="e414" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">现在，运行您的服务器:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a08e22711e66bd683683acd127cb7deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*7aG3FdnqAjjC5kmEDkPElA.png"/></div></figure><p id="47fb" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">并在<a class="ae kv" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>上测试你的服务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/f1deb498eac31999459c80778f122221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7VJqeDtcT_QaM8oDZg6SKg.png"/></div></div></figure><p id="b74a" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">我们现在有一个工作服务！</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="4ba3" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">第二步。创建Docker图像</h1><p id="0d0b" class="pw-post-body-paragraph ms mt iq lx b ly lz jr mv ma mb ju mx mc nh mz na me ni nc nd mg nj nf ng mi ij bi translated">首先，我们将向根目录添加一个Dockerfile文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/def402c4898868383f321f113c983b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*VDI6XPJog0BUa-IZMbCiog.png"/></div></figure><p id="0a1b" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">您的docker文件应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/b8377bc1be59adff91ba6a71665e0d30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0TKkdNKkjUcPBIlR_hl4tg.png"/></div></div></figure><p id="3406" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">注意，<code class="fe nm nn no np b">CMD [“node”, “./bin/www”]</code> <em class="nq"> </em>是运行应用程序的命令。如果您有不同的命令(如<code class="fe nm nn no np b">node server.js</code> ) <em class="nq">，请更改该命令。</em></p><p id="cfd4" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">接下来，在根目录下运行以下命令来构建并标记Docker映像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/828c6c70e39aa58b30c8e5eb6ab8a787.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*5XOT6Q2noVU2E866oxEolw.png"/></div></figure><p id="3f19" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">您应该会得到这样的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/8aeba3373b8ee0ade0a2b7852dfe7523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*WKVwsyBbyFiNs0ppyk3Mhw.png"/></div></figure><p id="a4ad" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">通过运行以下命令查看您的图像:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/b1961cbf215b02ed9e06dc07851dc021.png" data-original-src="https://miro.medium.com/v2/resize:fit:396/format:webp/1*Tu-xzhshtHeyPSYlt-skrA.png"/></div></figure><p id="ebf8" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">您应该能够看到构建图像的列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/bf9470f726195a99a83392ad72b705be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fg5gYHS5ebvxGoyWwUFwNg.png"/></div></div></figure><p id="f2c5" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">现在，让我们运行容器！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/bcacbdb7d6ec32485bd8dcd4336acaec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*s-2HyNB_NVzu66JUaYLWeQ.png"/></div></figure><p id="65bc" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">这里，我们将服务器端口<code class="fe nm nn no np b">8080</code>映射到容器端口<code class="fe nm nn no np b">49160</code>。</p><p id="8e1f" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">让我们在Postman上测试我们的容器:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/742f7b99a331a56f4536eedace1f773d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qSb6U9J1L2jXMjmRjzrXgQ.png"/></div></div></figure><p id="1e61" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">太好了！</p><p id="d921" class="pw-post-body-paragraph ms mt iq lx b ly mu jr mv ma mw ju mx mc my mz na me nb nc nd mg ne nf ng mi ij bi translated">现在我们正在与Docker容器中的服务进行通信！</p></div></div>    
</body>
</html>