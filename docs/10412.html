<html>
<head>
<title>6 Common Git Errors and How to Avoid Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个常见的Git错误以及如何避免它们</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/common-git-errors-2e379516dc65?source=collection_archive---------8-----------------------#2022-01-05">https://betterprogramming.pub/common-git-errors-2e379516dc65?source=collection_archive---------8-----------------------#2022-01-05</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="d0ec" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">探究Git中一些最常见的错误</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6e1ac8b93421a311d9e8b22b7500cc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5wsCf8KuZbmubo7t"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@cookiethepom?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Cookie在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的Pom </a>拍摄</p></figure><p id="e24a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">版本控制系统(VCS)是几乎所有需要跟踪源代码变更的开发团队的基本工具。</p><p id="d0c8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Git早在2005年就被开发出来了，现在是最常用的VCS，几乎所有需要对源代码进行版本化和归档的开发团队都在使用它。在今天的文章中，我们将介绍一些最常见的Git错误，并讨论如何避免或修复它们。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="2b5f" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">致命错误:不是git存储库(或任何父目录)</h1><p id="e59c" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这是最常见的错误之一，尤其是对于Git新手来说。让我们假设您想要在一个特定的目录中运行<code class="fe na nb nc nd b">git status</code>:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="cf93" class="ni me iu nd b gz nj nk l nl nm">$ git status<br/>fatal: not a git repository (or any of the parent directories): .git</span></pre><p id="8d37" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该错误表明该命令无法执行，因为当前目录<strong class="lc iv">不是Git目录</strong>。通常，有两个主要原因会导致您出现错误。</p><ul class=""><li id="f1ac" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">您可能忘记使用<code class="fe na nb nc nd b"><a class="ae kz" href="https://git-scm.com/docs/git-init" rel="noopener ugc nofollow" target="_blank">git init</a></code>将存储库初始化为Git存储库</li><li id="5b06" class="nn no iu lc b ld nw lg nx lj ny ln nz lr oa lv ns nt nu nv bi translated">或者你可能在错误的目录。您可以使用<code class="fe na nb nc nd b">pwd</code>查看您当前的工作目录。人们在克隆Git存储库时忘记更改目录是很常见的。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="9b46" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">致命:拒绝合并不相关的历史</h1><p id="07cf" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在<code class="fe na nb nc nd b">git pull</code>或<code class="fe na nb nc nd b">git merge</code>之后的另一个非常常见的错误如下所示:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="f849" class="ni me iu nd b gz nj nk l nl nm">fatal: refusing to merge unrelated histories</span></pre><p id="3335" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这通常主要有两个原因:</p><ul class=""><li id="ab32" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated"><code class="fe na nb nc nd b">.git</code>目录损坏。这个隐藏的目录包含了与您的项目相关的信息，这些项目是受版本控制的(例如，关于提交、远程存储库等的信息。).如果目录被破坏，git不知道本地历史，因此当尝试向/从远程存储库推送或提取时，将会报告错误。</li><li id="9d38" class="nn no iu lc b ld nw lg nx lj ny ln nz lr oa lv ns nt nu nv bi translated">您正在尝试从已经提交的远程存储库中进行拉取，同时您还在本地创建了一个新的存储库并添加了提交。在这种情况下，将会报告错误，因为Git不知道这两个项目是如何关联的(它们被解释为两个不同的项目)。</li></ul><p id="73eb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果是这种情况，那么您需要提供<code class="fe na nb nc nd b"><a class="ae kz" href="https://github.com/git/git/blob/master/Documentation/RelNotes/2.9.0.txt#L58-L68" rel="noopener ugc nofollow" target="_blank">--allow-unrelated-histories</a></code>标志。举个例子，</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="23d7" class="ni me iu nd b gz nj nk l nl nm">$ git pull origin master --allow-unrelated-histories</span></pre><p id="16c1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当试图<code class="fe na nb nc nd b">rebase</code>时也有可能得到这个错误，并且需要不同的处理。</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="4ade" class="ni me iu nd b gz nj nk l nl nm">$ git rebase origin/development<br/>fatal: refusing to merge unrelated histories<br/>Error redoing merge 1234deadbeef1234deadbeef</span></pre><p id="21cd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将提交组合成新的基础提交的过程被称为<a class="ae kz" href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase#:~:text=What%20is%20git%20rebase%3F,of%20a%20feature%20branching%20workflow." rel="noopener ugc nofollow" target="_blank"><strong class="lc iv"/></a>。换句话说，重定基础只是将分支的基础更改为一个不同的提交，这样看起来好像是从那个特定的提交创建的分支。下图准确地说明了在Git中重置基础的工作方式。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ob"><img src="../Images/2bc4eed3873cb72139a1e96552408eb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xO58L2ljBrTxFQu7QZ09Kg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来源:<a class="ae kz" href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase#:~:text=What%20is%20git%20rebase%3F,of%20a%20feature%20branching%20workflow." rel="noopener ugc nofollow" target="_blank">亚特兰蒂斯文件</a></p></figure><p id="152c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当<code class="fe na nb nc nd b">git rebase</code>因该错误而失败时<strong class="lc iv">重置基础不会中止，但仍在进行中。</strong>相反，你其实可以手动干预。</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="c7e4" class="ni me iu nd b gz nj nk l nl nm">$ git status<br/>interactive rebase in progress; onto 4321beefdead<br/>Last command done (1 command done):<br/>   pick 1234deadbeef1234deadbeef test merge commit</span></pre><p id="e7ea" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要解决这个问题，你首先需要<code class="fe na nb nc nd b">merge</code>和<code class="fe na nb nc nd b">commit</code>，最后迫使<code class="fe na nb nc nd b">rebase</code>继续:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="bab9" class="ni me iu nd b gz nj nk l nl nm">$ git merge --allow-unrelated ORIGINAL_BRANCH_THAT_WAS_MERGED --no-commit<br/>$ git commit -C ORIGINAL_MERGE_COMMIT<br/>$ git rebase --continue</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="5497" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">xcrun:错误:无效的活动开发者路径</h1><p id="1750" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这是OSX用户的一个常见错误，当一个新的主要OSX版本发布时，这个错误会更加频繁。当您尝试运行任何git命令时，都会报告该错误。举个例子，</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="eb8b" class="ni me iu nd b gz nj nk l nl nm">$ git status<br/>xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</span></pre><p id="ddb9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该问题与需要更新的<a class="ae kz" href="https://developer.apple.com/xcode/features/" rel="noopener ugc nofollow" target="_blank"> Xcode命令行工具</a>版本有关，以便解决该错误。为此，请打开终端并运行</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="f789" class="ni me iu nd b gz nj nk l nl nm">$ xcode-select --install</span></pre><p id="d18d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对此的回应应该是</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="1831" class="ni me iu nd b gz nj nk l nl nm">xcode-select: note: install requested for command line developer tools</span></pre><p id="f140" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">同时屏幕上会出现一个弹出窗口，要求您确认是否要安装命令行开发工具。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oc"><img src="../Images/540196d5de0d8cc9dba2a7e77b237577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQnHAvwcr_3E9FdLttYdcQ.png"/></div></div></figure><p id="078c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">只需点击安装，等待安装完成，并打开一个新的终端会话。Git命令现在应该可以正常工作了。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0220" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">致命错误:无法创建。' git/index.lock ':文件存在</h1><p id="54e8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">当git进程在您的一个git存储库中崩溃时，您可能会在尝试运行Git命令时看到如下所示的错误:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="f11e" class="ni me iu nd b gz nj nk l nl nm">fatal: Unable to create '/path/to/.git/index.lock': File exists.<br/><br/>If no other git process is currently running, this probably means a git process crashed in this repository earlier. </span></pre><p id="ebd5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果没有其他git进程正在运行，您可以通过手动删除该文件来快速修复这个问题:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="1533" class="ni me iu nd b gz nj nk l nl nm">$ rm -f .git/index.lock</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="631b" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">错误:pathspec不匹配git已知的任何文件</h1><p id="c6e3" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">通常，当您使用GitHub的web UI创建一个新分支，并返回到您的本地终端，使用</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="ee11" class="ni me iu nd b gz nj nk l nl nm">$ git checkout mybranch</span></pre><p id="162f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可能会得到这个错误</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="ca79" class="ni me iu nd b gz nj nk l nl nm">error: pathspec '<!-- -->mybranch<!-- -->' did not match any file(s) known to git.</span></pre><p id="8e6d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这通常意味着您的本地存储库没有更新远程Git存储库的最新信息。要解决这个问题，您只需获取新创建的分支的信息:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="efd4" class="ni me iu nd b gz nj nk l nl nm">$ git fetch</span></pre><p id="355f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在<code class="fe na nb nc nd b">git checkout</code>应该工作正常。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="9f5f" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">权限被拒绝(公钥)</h1><p id="0ca1" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">为了将远程存储库克隆到您的本地机器，您需要确保您已经正确配置了身份验证。</p><p id="fe98" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您尝试克隆一个回购，而响应是</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="94b9" class="ni me iu nd b gz nj nk l nl nm">$ git clone git@github.com/username:test.git<br/>Initialized empty Git repository in `/path/to/test/.git/`<br/>Permission denied (publickey).<br/>fatal: The remote end hung up unexpectedly</span></pre><p id="503e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在可能有几种方法可以解决这个问题。最简单的方法可能是使用<code class="fe na nb nc nd b">HTTPS</code>将存储库克隆到您的本地机器上，这不需要公钥验证:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="6948" class="ni me iu nd b gz nj nk l nl nm">$ https://github.com/username/test.git</span></pre><p id="3913" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者，如果您仍然需要使用SSH来克隆存储库，那么您必须生成SSH公钥和私钥，以便配置正确的身份验证。为此，请确保遵循以下步骤。</p><ul class=""><li id="f611" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">导航到您本地的<code class="fe na nb nc nd b">.ssh</code>目录并运行<code class="fe na nb nc nd b">ssh-keygen</code>来生成密钥</li></ul><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="6b1c" class="ni me iu nd b gz nj nk l nl nm">$ cd ~/.ssh &amp;&amp; ssh-keygen</span></pre><ul class=""><li id="de07" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">现在你需要复制生成的<code class="fe na nb nc nd b">id_rsa.pub</code>文件的内容</li></ul><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="c3ce" class="ni me iu nd b gz nj nk l nl nm"># OSX<br/>$ cat id_rsa.pub | pbcopy</span><span id="1e0c" class="ni me iu nd b gz od nk l nl nm"># Linux<br/>$ <!-- -->cat id_rsa.pub | xclip</span><span id="a744" class="ni me iu nd b gz od nk l nl nm"># Windows<br/>$ cat id_rsa.pub | clip</span></pre><ul class=""><li id="0418" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated"><a class="ae kz" href="https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" rel="noopener ugc nofollow" target="_blank">将密钥添加到GitHub网站的相应部分</a></li><li id="153a" class="nn no iu lc b ld nw lg nx lj ny ln nz lr oa lv ns nt nu nv bi translated">确保您的git配置是正确的</li></ul><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="de4c" class="ni me iu nd b gz nj nk l nl nm">$ git config --global user.name "your-user-name"<br/>$ git config --glocabl user.email your@email.com</span></pre><p id="4de1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，您应该能够使用SSH克隆远程存储库了。更多细节可以参考<a class="ae kz" href="https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh" rel="noopener ugc nofollow" target="_blank"> GitHub文档</a>。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="1b4c" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">最后的想法</h1><p id="b1f3" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在今天的文章中，我们探讨了Git中一些最常见的错误。对于其中的每一个，我们讨论了可能触发这些错误的潜在原因以及如何修复它们。</p><p id="addd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Git绝对是一个非常强大的工具，并且比它有时看起来要复杂得多。这个社区很棒，互联网上有很多资源可以帮助你解决任何关于Git的问题。</p><p id="676e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可能还喜欢:</p><div class="oe of gq gs og oh"><a href="https://towardsdatascience.com/undo-last-local-commit-git-5410a18f527" rel="noopener follow" target="_blank"><div class="oi ab fp"><div class="oj ab ok cl cj ol"><h2 class="bd iv gz z fq om fs ft on fv fx it bi translated">如何撤销Git中的最后一次本地提交</h2><div class="oo l"><h3 class="bd b gz z fq om fs ft on fv fx dk translated">了解如何在Git中撤销最近的本地提交</h3></div><div class="op l"><p class="bd b dl z fq om fs ft on fv fx dk translated">towardsdatascience.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kt oh"/></div></div></a></div></div></div>    
</body>
</html>