<html>
<head>
<title>5 Network Performance and Analysis Tools For Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5用于Linux的网络性能和分析工具</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-network-performance-analysis-tools-for-linux-f420c35fb8bd?source=collection_archive---------3-----------------------#2022-02-17">https://betterprogramming.pub/5-network-performance-analysis-tools-for-linux-f420c35fb8bd?source=collection_archive---------3-----------------------#2022-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b394" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用这些免费实用程序对您的网络进行诊断、故障排除和基准测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/66250075a2480f7aa4d31a5dbcfd6932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GsTkpVco571ugW7hwVeC0A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@comparefibre?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">对比纤维</a>在<a class="ae ky" href="https://unsplash.com/s/photos/network?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="9689" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您可以拥有最新、最棒的服务器、最快的处理器、装满内存的自动倾卸卡车和几天的磁盘空间，而一个简单的网络问题可能会让一切嘎然而止。</p><p id="32ed" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">服务器依靠坚如磐石的网络连接来真正利用所有的计算能力。无论是下载工作负载信息还是满足客户的web请求，您都需要确保您的网络能够处理这些信息。</p><p id="1b91" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">诊断麻烦的网络路径并获得准确的链路性能基准并不总是容易的。幸运的是，在Linux世界中，我们可以使用大量的工具来帮助解决这些困难的任务。</p><p id="496f" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在本文中，我将介绍一些内置的和第三方的Linux实用程序，它们使诊断网络问题和制定解决方案变得轻而易举。</p><h1 id="125d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.iPerf</h1><p id="6fe8" class="pw-post-body-paragraph lg lh it li b lj mu ju ll lm mv jx lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">没有iPerf，网络工程师的工具包就不完整。这个非常有用的网络实用程序允许您执行端到端的吞吐量和延迟测试。使用iPerf的最大好处是您可以控制连接的两端。你不会简单地发送流量并等待它的回报，你将可以访问两端的统计数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/85a3b4dce726dc034b31354cbe0ae72e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Td2fOuM5_np7ezkZfqTcvw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">iperf计划。</p></figure><p id="908e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">为了正确使用iPerf，您必须设置客户端和服务器实例。服务器实例运行在您现有的服务器上，客户端实例可以从您希望测试的任何地方启动。</p><p id="6170" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">客户端将在特定的端口上连接到服务器，然后能够执行一系列详细的测试。</p><p id="7070" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">通过运行以下命令启动简单的iPerf服务器:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="81bb" class="ng md it nc b gy nh ni l nj nk">iperf -s</span></pre><p id="f197" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这将运行iPerf并自动监听端口<code class="fe nl nm nn nc b">5001</code>。现在，连接一个客户端，通过发出以下命令开始默认带宽测试:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7467" class="ng md it nc b gy nh ni l nj nk">iperf -c &lt;host_ip_running_iperf_server&gt;</span></pre><p id="bed2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在以下示例中，iPerf测试是在本地主机上的同一台计算机上执行的:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="e214" class="ng md it nc b gy nh ni l nj nk">------------------------------------------------------------<br/>Client connecting to 127.0.0.1, TCP port 5001<br/>TCP window size:  144 KByte (default)<br/>------------------------------------------------------------<br/>[  1] local 127.0.0.1 port 52340 connected with 127.0.0.1 port 5001<br/>[ ID] Interval       Transfer     Bandwidth<br/>[  1] 0.00-10.00 sec   141 GBytes   121 Gbits/sec</span></pre><p id="4c02" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">显然，对于该测试，带宽相当高，因为流量从未离开主机。如果您正在诊断慢速链接、主机或其他中间设备，那么当部署在整个网络中时，它的用处就显而易见了。</p><p id="6aa8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">查看以下iPerf官方网站了解更多信息:</p><div class="no np gp gr nq nr"><a href="https://iperf.fr/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">iPerf-TCP、UDP和SCTP网络带宽测量工具</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">iPerf3是一个工具，用于主动测量IP网络上可实现的最大带宽。它支持…的调谐</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">iperf.fr</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><h1 id="1d9f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.tcpdump</h1><p id="41c2" class="pw-post-body-paragraph lg lh it li b lj mu ju ll lm mv jx lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">这绝对是网络诊断领域的一匹骏马。使用<code class="fe nl nm nn nc b">tcpdump</code>你可以捕捉通过主机的网络流量，并使用它来重放或重写数据包。使用<code class="fe nl nm nn nc b">tcpdump</code>您可以保存数据包捕获文件，这些文件可以以纯文本格式读取，也可以通过臭名昭著的<a class="ae ky" href="https://www.wireshark.org/" rel="noopener ugc nofollow" target="_blank"> Wireshark </a>实用程序读取</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/5c096341b5fb7ee5a793a4b1110b2597.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lC8LuOy7ue6H7lKMOXNpQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Tcpdump徽标。<a class="ae ky" href="https://www.tcpdump.org/" rel="noopener ugc nofollow" target="_blank">来源</a>。</p></figure><p id="7c18" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><code class="fe nl nm nn nc b">tcpdump</code>最大的优点是它的灵活性。它可以像你希望的那样简单，也可以像你希望的那样先进。例如，让我们看看如何捕获去往谷歌公共DNS解析器<code class="fe nl nm nn nc b">8.8.8.8</code>的流量:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="6467" class="ng md it nc b gy nh ni l nj nk">sudo tcpdump host 8.8.8.8</span></pre><p id="031a" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这个命令告诉<code class="fe nl nm nn nc b">tcpdump</code>只过滤来自或去往IP地址为<code class="fe nl nm nn nc b">8.8.8.8</code>的主机的流量。您应该会看到类似如下的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/b42a82a14a1843f30a56334a60d161fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*al5RowFnWtM0jQfgmFiOWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">tcpdump命令行捕获。</p></figure><p id="03e4" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在这个例子中，我们清楚地看到从我们的主机(<code class="fe nl nm nn nc b">172.16.30.223</code>)到Google和返回的双向流量。使用<code class="fe nl nm nn nc b">tcpdump</code>你可以快速轻松地找出网络上的特定流量是从哪里听到的。</p><ul class=""><li id="8e5e" class="oi oj it li b lj lk lm ln lp ok lt ol lx om mb on oo op oq bi translated">更多信息请访问官方<code class="fe nl nm nn nc b">tcpdump</code>网站<a class="ae ky" href="https://www.tcpdump.org/" rel="noopener ugc nofollow" target="_blank">这里</a>。</li><li id="ebb1" class="oi oj it li b lj or lm os lp ot lt ou lx ov mb on oo op oq bi translated">Red Hat博客有一篇关于使用<code class="fe nl nm nn nc b">tcpdump</code>滤镜<a class="ae ky" href="https://www.redhat.com/sysadmin/filtering-tcpdump" rel="noopener ugc nofollow" target="_blank">的很棒的入门文章，可以在这里找到</a>。</li></ul><h1 id="b21e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.平</h1><p id="f1c1" class="pw-post-body-paragraph lg lh it li b lj mu ju ll lm mv jx lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">这就像打了兴奋剂的ping。使用hping，您可以执行一整套普通ping无法执行的附加任务。虽然它最初是作为安全工具开发的，但它也提供了有用的日常网络测试功能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/e60c5977ead06e01fae0b098485bd0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/0*msyqwVDAjV7loJKx.jpg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://hping.org/" rel="noopener ugc nofollow" target="_blank">来源</a>。</p></figure><p id="6708" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在hping中，你可以欺骗网络地址，发送大量数据包，甚至运行复杂的端口扫描。与hping的TCP/UDP部分的功能相比，这些仅仅是玩具。</p><p id="bab7" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">使用hping，您可以设置大量不同的标志，并通过精确创建您需要的流量来执行详细的TCP/UDP应用程序测试:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="c375" class="ng md it nc b gy nh ni l nj nk">UDP/TCP<br/>  -s  --baseport   base source port             (default random)<br/>  -p  --destport   [+][+]&lt;port&gt; destination port(default 0) ctrl+z inc/dec<br/>  -k  --keep       keep still source port<br/>  -w  --win        winsize (default 64)<br/>  -O  --tcpoff     set fake tcp data offset     (instead of tcphdrlen / 4)<br/>  -Q  --seqnum     shows only tcp sequence number<br/>  -b  --badcksum   (try to) send packets with a bad IP checksum<br/>                   many systems will fix the IP checksum sending the packet<br/>                   so you'll get bad UDP/TCP checksum instead.<br/>  -M  --setseq     set TCP sequence number<br/>  -L  --setack     set TCP ack<br/>  -F  --fin        set FIN flag<br/>  -S  --syn        set SYN flag<br/>  -R  --rst        set RST flag<br/>  -P  --push       set PUSH flag<br/>  -A  --ack        set ACK flag<br/>  -U  --urg        set URG flag</span></pre><p id="b929" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果您正在对一个特别古怪的网络应用程序进行故障排除，并且想要尝试和复制它的一些流量模式，那么这些就非常方便。</p><p id="3ed8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">hping官方网站如下:</p><div class="no np gp gr nq nr"><a href="http://hping.org/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">Hping -主动网络安全工具</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">Home hping是一个面向命令行的TCP/IP包组装器/分析器。该界面受ping(8) unix的启发…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">hping.org</p></div></div><div class="oa l"><div class="ox l oc od oe oa of ks nr"/></div></div></a></div><h1 id="8fc1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.Netstat</h1><p id="11a6" class="pw-post-body-paragraph lg lh it li b lj mu ju ll lm mv jx lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">想知道谁在和主持人说话？正在使用哪些端口？应用程序处于什么状态？Netstat 在解决这些问题上创造了奇迹。</p><p id="dca6" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">这个工具已经存在了将近四十年。这是有充分理由的。Netstat向您展示了您需要了解的关于谁与您有联系的确切信息。</p><p id="5528" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">Netstat最常见的用途是显示机器的开放端口。使用以下命令可以看到这些信息:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="4511" class="ng md it nc b gy nh ni l nj nk">netstat -ap</span></pre><p id="9b03" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">您应该会看到类似如下的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/f85b5545d58f0ef435caf42442592d0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSrW6jAWtukydgbdjqah1w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">覆盆子Pi上的Netstat输出。</p></figure><p id="3ffb" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">在上面的信息中，我们可以清楚地看到，该主机正在端口<code class="fe nl nm nn nc b">22</code>上监听传入的SSH连接。为了方便起见，Netstat还将著名的端口替换为它们的服务名。</p><p id="aee8" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果您试图确定某个特定端口是否打开并在监听，那么使用Netstat是一个不错的选择。</p><h1 id="9867" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.Scapy</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/346547d0d1ac4589849a3b53f55a5423.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*uZC9gS9cq4Ey3vE72LplgQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://github.com/secdev/scapy" rel="noopener ugc nofollow" target="_blank">来源</a>。</p></figure><p id="a476" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们把最好的留到了最后。这是一个大的。</p><p id="c062" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">如果前面列出的工具是工具箱中的工具，那么Scapy就是整个该死的车库。这个应用程序让你从头开始一次一层地构建完整的包。如果你有时间和耐心，你几乎可以在Scapy中创建任何你想要的网络流量。</p><p id="d1de" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">虽然从技术上来说Scapy是一个Python模块，但是它可以像任何其他命令行程序一样容易地安装和运行。好处是因为它是内置的Python，所以您可以用直观的语言创建复杂的Scapy设置，而不必使用Bash或其他烦人的配置文件。</p><p id="18a0" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">Scapy还提供了一个命令行解释器，用于交互式地构建包和其他数据。他们声称它包含如此多的功能:</p><blockquote class="oz pa pb"><p id="64a5" class="lg lh mz li b lj lk ju ll lm ln jx lo pc lq lr ls pd lu lv lw pe ly lz ma mb im bi translated">“它可以轻松处理大多数经典任务，如扫描、跟踪路由、探测、单元测试、攻击或网络发现(它可以替代hping、85%的nmap、arpspoof、arp-sk、arping、tcpdump、tshark、p0f等。)."</p><p id="902f" class="lg lh mz li b lj lk ju ll lm ln jx lo pc lq lr ls pd lu lv lw pe ly lz ma mb im bi translated">—<a class="ae ky" href="https://scapy.net/" rel="noopener ugc nofollow" target="_blank">Scapy官方网站</a></p></blockquote><p id="2216" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">就整个网络堆栈而言，这是一个真正的发电站。如果你真的想了解每一层是如何工作的，这个库会给你所有你需要的工具。</p><p id="6b63" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">查看以下Scapy官方网站，了解更多使用和安装信息:</p><div class="no np gp gr nq nr"><a href="https://scapy.net/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">Scapy</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">Scapy是一个功能强大的交互式数据包处理程序。它能够伪造或解码大量的数据包…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">scapy.net</p></div></div><div class="oa l"><div class="pf l oc od oe oa of ks nr"/></div></div></a></div></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="d321" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">感谢阅读！如果你喜欢这篇文章，请随意查看我的其他帖子:</p><ul class=""><li id="9f43" class="oi oj it li b lj lk lm ln lp ok lt ol lx om mb on oo op oq bi translated"><a class="ae ky" href="https://tateg.medium.com/capturing-network-traffic-with-python-and-tshark-19599d39dbce" rel="noopener"> <em class="mz">用Python和TShark捕获网络流量</em> </a></li><li id="49ae" class="oi oj it li b lj or lm os lp ot lt ou lx ov mb on oo op oq bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-troubleshoot-slow-linux-servers-20a4e2843131"> <em class="mz">如何排除Linux服务器运行缓慢的故障</em> </a></li></ul></div></div>    
</body>
</html>