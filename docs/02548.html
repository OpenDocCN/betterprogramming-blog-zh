<html>
<head>
<title>Why Using Cypress Is Better Than Unit Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么使用Cypress比单元测试更好</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-using-cypress-is-better-than-unit-testing-e8234229be81?source=collection_archive---------4-----------------------#2019-12-08">https://betterprogramming.pub/why-using-cypress-is-better-than-unit-testing-e8234229be81?source=collection_archive---------4-----------------------#2019-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9a35" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">回到为什么你首先应该写测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e0eac8355122e62f83d43374aaad679a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_j4UBfu8sTS3Eo2KmZNdQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">柏树在意大利——照片由<a class="ae ky" href="https://unsplash.com/@weblounge?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯托夫·范·伦特根</a>在<a class="ae ky" href="https://unsplash.com/s/photos/cypress?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="68ba" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">单元测试</h1><p id="cf9a" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">根据我的经验，前端单元测试通常会测试真正基本的组件功能。</p><p id="8025" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我经常看到的一个单元测试的例子如下。</p><p id="b30f" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">假设我有一个简单的<code class="fe mz na nb nc b">MyButton</code>组件，它接受一个单独的<code class="fe mz na nb nc b">buttonText</code>道具，并在被点击时显示一个警告。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="17b3" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我可以为这个按钮编写一个单元测试，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b1cf" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">现在运行测试将通过！</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="3175" class="nj lh it nc b gy nk nl l nm nn">PASS src/MyButton.test.js<br/> ✓ displays the correct text value (23ms)</span></pre><p id="b9fc" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">然而，真正的问题是:“这个测试有多大用处？”</p><p id="eca5" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我已经测试了一个非常基本的功能，如果我改变了按钮组件，我现在也需要更新这个测试。</p><p id="9f80" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在我看来，前端测试在模拟真实情况时是有用的。</p><p id="318b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">你可以用单元测试来测试100%的代码覆盖率，但是当组件开始相互通信时，你的应用程序仍然可能失败。</p><p id="07d4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">不要低估为所有组件编写单元测试所花费的时间。</p><p id="6291" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">真正重要的测试是那些测试用户每天使用的功能的测试。</p><p id="dbc4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">比如:“用户可以购买产品吗？”以及“如果我以后更改了地址，我的订单会被运送到正确的地址吗？”</p><p id="e5fd" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这些事情是不可能用单元测试来测试的，因为它们使用了你的应用程序的所有组件。</p><p id="bce3" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这就是你可以用<a class="ae ky" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank">柏树</a>的地方！</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="cf7c" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">柏树试验</h1><p id="e132" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">使用Cypress，您可以编写测试来启动浏览器并自动导航您的应用程序。这是测试真实用例的理想方法，例如:“当我购买一个产品时，一切都正常吗？”</p><p id="e803" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">例如，我将创建一个非常简单的Cypress测试，测试当我单击<code class="fe mz na nb nc b">MyButton</code> React组件时是否显示警告。</p><p id="881c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">为了安装Cypress，我运行以下命令:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="04d9" class="nj lh it nc b gy nk nl l nm nn">yarn add cypress --save-dev</span></pre><p id="9afe" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">接下来，我创建一个包含实际测试的<code class="fe mz na nb nc b">cypress.spec.js</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="27f4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我告诉Cypress导航到我的应用程序的URL并点击按钮。然后，我模拟<code class="fe mz na nb nc b">window:alert</code>函数以确保它被调用。</p><p id="8202" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">现在，我下载<a class="ae ky" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank"> Cypress app </a>，打开我的<code class="fe mz na nb nc b">cypress.spec.js</code>文件。运行时，Cypress点击按钮，测试通过！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/985a780cc60a6606e0353c1237ef97ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cvGR7WRQd9rNTL4CeglCqA.png"/></div></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="0f5c" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">结论</h1><p id="1bfe" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">请记住，我展示的Cypress测试示例是非常基础的，当您开始为真实用例编写自动化测试时，Cypress的威力变得非常显著。</p><p id="a2bd" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">Cypress已经多次将我从令人讨厌的错误中拯救出来，我肯定会推荐它！</p></div></div>    
</body>
</html>