<html>
<head>
<title>SwiftUI: Sequence Gestures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI:序列手势</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swiftui-sequence-gestures-a9d8861caa4c?source=collection_archive---------19-----------------------#2020-04-22">https://betterprogramming.pub/swiftui-sequence-gestures-a9d8861caa4c?source=collection_archive---------19-----------------------#2020-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2379" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">组合手势—但只允许完成一个手势，然后才允许触发下一个手势</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/38e219117b0efbcbcd51b2d913a8aacc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l62WjahyFsrjjNrKbjoYew.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Elena Mozhvilo 在<a class="ae ky" href="https://unsplash.com/s/photos/gesture?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="bc8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，您将学习SwiftUI中的序列手势以及如何使用它们。</p><h2 id="e49c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">先决条件</h2><p id="ecfd" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">要跟随本教程，您需要:</p><ul class=""><li id="9034" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">对Swift的基本熟悉</li><li id="5467" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">至少Xcode 11</li></ul></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="e4c4" class="no lw it bd lx np nq nr ma ns nt nu md jz nv ka mg kc nw kd mj kf nx kg mm ny bi translated">序列手势</h1><p id="ca2d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">首先，您需要一些变量来知道您的视图是否被拖动，视图的当前位置，以及它将被移动到的位置。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="0e53" class="lv lw it oa b gy oe of l og oh">@State var state = CGSize.zero<br/>@State var isDraggable = false<br/>@State var translation = CGSize.zero</span><span id="09a1" class="lv lw it oa b gy oi of l og oh">let minimumLongPressDuration = 1.0</span></pre><p id="1fd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这些，你现在可以用一个长按手势和一个拖动手势来设置你的手势。通过长按，您可以启动用户现在可以拖动视图。</p><p id="a5b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是拖动手势。它给出了我们需要的所有值——像<em class="oj"> x </em>和<em class="oj"> y </em>坐标(等等)。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="4d94" class="lv lw it oa b gy oe of l og oh">// Long Tap Gesture<br/>let longTap = LongPressGesture(minimumDuration: minimumLongPressDuration).onEnded { value in<br/>    self.isDraggable = true<br/>}</span><span id="8a33" class="lv lw it oa b gy oi of l og oh">// Drag Gesture<br/>let drag = DragGesture().onChanged { value in<br/>    self.translation = value.translation<br/>    self.isDraggable = true<br/>}.onEnded { value in<br/>    self.state.width += value.translation.width<br/>    self.state.height += value.translation.height<br/>    self.translation = .zero<br/>    self.isDraggable = false<br/>}</span><span id="7f8a" class="lv lw it oa b gy oi of l og oh">// Sequence Gesture<br/>let sequenceGesture = longTap.sequenced(before: drag)</span></pre><p id="6d0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码返回一个圆，然后允许你移动它。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1156" class="lv lw it oa b gy oe of l og oh">return Circle()<br/>    .fill(Color.blue)<br/>    .overlay(isDraggable ? Circle().stroke().stroke(Color.white, lineWidth: 2) : nil)<br/>    .frame(width: 100, height: 100, alignment: .center)<br/>    .offset(x: state.width + translation.width, y: state.height + translation.height)<br/>    .shadow(radius: isDraggable ? 8 : 0)<br/>    .animation(.linear(duration: minimumLongPressDuration))<br/>    .gesture(sequenceGesture)</span></pre><p id="b83f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/4a89a3e95754459db2c392d5cf075699.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/0*-X6jlimmjF8L8yGX.gif"/></div></figure></div></div>    
</body>
</html>