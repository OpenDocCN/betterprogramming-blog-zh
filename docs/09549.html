<html>
<head>
<title>Why You Should Use Next.js As the Default Framework in React Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么应该使用Next.js作为React应用的默认框架</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-you-should-use-next-js-as-the-default-framework-in-react-apps-e1d453336d38?source=collection_archive---------3-----------------------#2021-09-08">https://betterprogramming.pub/why-you-should-use-next-js-as-the-default-framework-in-react-apps-e1d453336d38?source=collection_archive---------3-----------------------#2021-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="51be" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解Next.js能为您的web开发带来什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/877203e2737a7c98c09bdec37fff2fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s-cAvk46D5j-trEU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aoddeh?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit" rel="noopener ugc nofollow" target="_blank">艾哈迈德·奥德</a> / <a class="ae ky" href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="e753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React是一个很棒的JavaScript库。它有一个很棒的组件系统，并为您提供了一种轻松创建单页面应用程序的方法。</p><p id="12d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如React开发者在他们的<a class="ae ky" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">官网</a>上提到的，React是一个库。这意味着它将为您提供创建web应用程序所需的部分功能，但您可能还需要更多的工具。例如，如果你创建一个需要路由的应用程序，你必须安装<a class="ae ky" href="https://reactrouter.com/web/guides/quick-start" rel="noopener ugc nofollow" target="_blank"> <em class="lv"> react-router </em> </a>(或者一个类似的库)并配置它。</p><p id="e845" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你没有使用起始模板，比如<a class="ae ky" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"><em class="lv">create-react-app</em></a><em class="lv">，</em>，举例来说，你还必须使用<em class="lv"> webpack </em>和<em class="lv"> babel </em>来做一些繁重的配置。然后，您必须设置一个开发配置和一个生产配置。这需要时间和努力。如果你每次开始一个项目都要做，那就没意思了！</p><p id="8f98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.js解决了大部分问题。这是一个建立在React之上的框架。它提供了您在web应用程序中需要的现成特性。</p><p id="0c95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们一会儿会详细介绍它，但总的来说，Next.js包括路由、生产优化、服务器端渲染、静态站点生成等等！让我们来发现这些特性吧！</p><h1 id="1194" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">按指定路线发送</h1><p id="2274" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Next.js为你提供了一个现成的路由系统。这意味着您不必处理额外的库来处理这个主题。</p><p id="daae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.js提供了一种定义路由系统的智能方法。你不必像使用<em class="lv"> react-router、</em>那样在JavaScript文件中声明你的路线。您将使用文件系统描述您的路径。</p><p id="2e59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以从一开始就访问客户端路由。Next.js没有使用标准的<code class="fe mt mu mv mw b">&lt;a&gt;</code> HTML标签在应用程序中导航，而是提供了一个名为<code class="fe mt mu mv mw b">&lt;Link/&gt;</code>的组件。它不仅支持客户端导航，还允许浏览器预取用户可能导航到的页面所需的数据！</p><h1 id="7d30" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">预取</h1><p id="6749" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">该框架将下载用户视窗中每个链接所需的所有资源。例如，如果您打开一个包含导航菜单的页面，该导航菜单包含到<code class="fe mt mu mv mw b">/about</code>页面的路径。用户的浏览器甚至会在点击之前就下载该页面所需的资源。从用户的角度来看，导航似乎要快得多。</p><h1 id="06cc" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">服务器端呈现(SSR)</h1><p id="964a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Next.js的一个亮点是为您提供了一个简单的解决方案，将服务器端呈现(或SSR)应用到您的应用程序中。</p><p id="0da3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您使用<em class="lv"> create-react-app </em>命令行创建一个新的应用程序时，您的应用程序将默认为单页面应用程序(SPA)。当用户访问您的应用程序时，客户端构建整个应用程序，浏览器下载一个HTML文件，该文件的主体包含一个简单的<code class="fe mt mu mv mw b">div</code>。然后，浏览器获取所需的JavaScript文件，执行它们，并构建您的应用程序页面。</p><p id="248a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个过程被称为客户端渲染(或CSR)。虽然这是创建React应用程序的好方法，但它的主要缺点是在SEO方面表现不佳。搜索引擎用来索引网络的机器人没有执行JavaScript。在CSR场景中，机器人下载空的HTML文件，然后读取页面。由于JavaScript没有运行来构建页面，因此对于机器人来说，文档将显示为空白。</p><p id="1cca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是SSR的用武之地。顾名思义，SSR进程将首先在服务器上构建页面，然后将它们发送到浏览器。因此，当客户端收到页面时，它不需要构建页面。搜索引擎爬虫也是如此。他们看到的不是一个空白页面，而是一个完整的文档。</p><p id="5a67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然从SEO的角度来看，这种方法非常好，但是它也有一些缺点:</p><ul class=""><li id="998e" class="mx my it lb b lc ld lf lg li mz lm na lq nb lu nc nd ne nf bi translated"><strong class="lb iu">当用户请求时，你需要一个服务器</strong>来生成页面的结构。在Next.js的例子中，Node.js服务器处理这个问题。</li><li id="812e" class="mx my it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated"><strong class="lb iu">服务器为每个请求构建页面</strong>:一千个用户请求同一个页面将触发服务器的一千次生成。</li><li id="b140" class="mx my it lb b lc ng lf nh li ni lm nj lq nk lu nc nd ne nf bi translated"><strong class="lb iu">首字节时间增加(TTFB) </strong>:由于服务器首先构建页面，您的浏览器将不得不等待更多的时间来接收对其请求的响应。</li></ul><h1 id="16e9" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">静态站点生成(SSG)</h1><p id="2095" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">静态站点生成(SSG)是服务器端呈现的一个很好的替代方案。SSR在运行时根据每个请求构建页面，而SSG在构建时构建应用页面<strong class="lb iu">。</strong></p><p id="3059" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着您需要向Next.js指定静态生成的页面的路由是什么样子，获取所需的数据，并运行build命令。然后，框架将从您的源代码中构建静态HTML页面。</p><p id="8ee7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用SSG而不是SSR，您将保持出色的SEO性能的优势，同时不需要服务器来构建您的应用程序页面。这也将有利于您的用户，因为应用程序的性能将得到增强。因为在运行时没有构建页面的服务器，所以用户下载HTML文件(例如，从CDN下载)。</p><p id="608a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SSG的一个缺点是构建应用程序所需的时间:如果您的应用程序需要大量的页面，构建时间可能会很长。在这种情况下，您还需要更多的存储空间来容纳整个应用程序。</p><p id="4c6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您有大量频繁更改的页面；你可能会认为SSG不适合你，因为每次内容发生变化时，你都必须构建自己的应用程序。你是对的！</p><p id="ed74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是从9.4版本开始，Next引入了增量静态再生。该功能允许两件事:</p><p id="e4aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在应用程序运行时生成新的静态页面。假设您有一个包含数千种产品的电子商务网站。如果您在构建阶段生成所有页面，那么在您的应用程序准备好被部署之前，将需要一些时间。</p><p id="dcea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用增量静态重新生成，您可以向Next.js指定即使某些页面应该是静态的，也不应该在构建阶段创建它们。相反，框架应该在运行时生成它们——用户请求页面，Next.js注意到它不存在，它动态地构建它，提供给用户，并将其与其他静态生成的页面一起保存在存储中，以防用户请求相同的页面。</p><p id="77d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的应用程序中有大量的页面，这种解决方案是非常好的。缺点是到达页面的第一个用户在收到响应之前必须“等待”,因为需要构建页面。</p><p id="a99e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">它可以在运行时重新生成静态页面。</strong>您可以让Next.js在收到请求时更新静态页面，最多每“X”秒更新一次。如果页面内容变化很大，这个功能会很方便，但是您仍然希望从SSG中受益。</p><h1 id="4132" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">代码分割</h1><p id="26c8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Next.js在页面级别为您配置代码分割。这到底是什么意思？让我们假设您的应用程序正在使用许多不同的组件和库。如果您没有合适的代码分割配置，一个JavaScript包包含您的整个应用程序。当用户访问你的网站时，他们将不得不下载整个包，即使他们只看到一个页面。</p><p id="b9eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码分割通过将应用程序“切割”成不同的块来解决这个问题。如前所述，Next.js是在页面级完成的:它分析页面需要哪些组件或库，并将它们包含在特定的块文件中。这样，用户只需下载他们需要的东西，仅此而已。这种优化会对您的应用性能产生重大影响。</p><h1 id="1112" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">动态导入</h1><p id="9c1f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">动态导入允许您进一步优化包的大小。假设您的应用程序包含一个日历，当用户点击一个按钮时就会出现。</p><p id="88a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，页面级的代码拆分对您没有帮助:Next.js会在页面包中包含日历组件，因为它认为这是必需的。这意味着即使用户没有打开日历组件，他们也必须下载它。</p><p id="9337" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">动态导入为您提供了向Next.js指定如何在多个卡盘中切割应用程序包的可能性。在“日历示例”中，我们可以确定只有当用户单击特定按钮时，应用程序才必须导入日历组件。这样，Next.js将日历放在一个单独的按需下载的块中。</p><h1 id="8661" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">创建下一个应用程序</h1><p id="598c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><a class="ae ky" href="https://nextjs.org/docs/getting-started#setup" rel="noopener ugc nofollow" target="_blank"><em class="lv">Create-next-app</em></a><em class="lv"/>是类似于<em class="lv"> create-react-app </em>的命令。它实际上不是Next.js的一部分。它是一个帮助你轻松开始使用新的Next.js应用程序的工具。您可以使用不带选项的CLI，它将为您生成最少的应用程序。或者你可以给它传递一个<code class="fe mt mu mv mw b">--example</code>选项，这样它就会让你的项目基于众多<a class="ae ky" href="https://github.com/vercel/next.js/tree/canary/examples" rel="noopener ugc nofollow" target="_blank"> Next.js示例</a>中的一个。</p><h1 id="d55b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="dcf6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">使用Next.js，您可以从零配置的开箱即用的出色特性中获益。这将有助于你提高网页的性能和搜索引擎优化的可见性。</p><p id="4c3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">客户端路由非常有助于改善用户在应用程序中的体验。当用户在网站上导航时，页面之间的过渡看起来更平滑。</p><p id="cecc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不需要SSR或SSG，这个框架仍然有用。代码分割和动态导入将提高用户下载应用程序的速度。这在移动设备上尤其明显。</p><p id="a6b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你只需要弄清楚你的网站需要什么类型的渲染。注意，您可以单独决定哪个页面使用SSR或SSG！</p><p id="b961" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next还提供了许多我在本文中没有深入描述的其他有用功能，例如图像优化、国际化、快速刷新、林挺、简单的TypeScript配置、<a class="ae ky" href="https://nextjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank">和更多</a>。</p><p id="b3da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您阅读我的文章。希望还没做过的你去试试Next.js！</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="e7a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">最初发表于</em><a class="ae ky" href="https://www.developerstavern.com/you-should-use-next-js-as-your-default-framework-for-your-next-react-application/" rel="noopener ugc nofollow" target="_blank"><em class="lv">https://www.developerstavern.com</em></a></p></div></div>    
</body>
</html>