<html>
<head>
<title>Building colorful, springy components using React Spring and Tinycolor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Spring和Tinycolor构建丰富多彩、富有弹性的组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-colorful-springy-components-using-react-spring-and-tinycolor-1086c6594203?source=collection_archive---------3-----------------------#2019-07-03">https://betterprogramming.pub/building-colorful-springy-components-using-react-spring-and-tinycolor-1086c6594203?source=collection_archive---------3-----------------------#2019-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5870f40c2c57b9e77040247055fc61aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SU3kN-z2al5aqxgU"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">菲利普·维特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="5662" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最近，我决定开发一个web应用程序<a class="ae kf" href="https://rainbo.xyz/" rel="noopener ugc nofollow" target="_blank">,让设计师和开发人员可以生成不同的颜色，并检查颜色的可访问性。在这篇文章中，我想给你演示一下我是如何构建我将在那个应用中使用的一些组件的。</a></p><p id="7652" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该应用程序的完整源代码可以在本文末尾找到，还有一个链接，指向一个包含所有描述组件的Storybook实例。</p><h1 id="d033" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">属国</h1><p id="65a5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了帮助我构建这些组件，我使用了<a class="ae kf" href="https://github.com/bgrins/TinyColor" rel="noopener ugc nofollow" target="_blank"> Tinycolor </a>，这是一个具有一系列颜色实用函数的库，您可以使用它来操作、转换和表示颜色。</p><p id="3ed1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我也使用过<a class="ae kf" href="https://www.react-spring.io/" rel="noopener ugc nofollow" target="_blank"> React Spring </a>，这是一个基于Spring物理的库，允许你非常容易地将动画添加到你的项目中。</p><h1 id="a006" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">彩色瓷砖</h1><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="ml mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">彩色瓷砖设计</p></figure><p id="3462" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们列表中最简单的组件，色块将作为其他组件的构建块。这个组件的职责是显示一种颜色，以及它的名称和十六进制值。</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mn mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">彩色拼贴源</p></figure><h2 id="4fb4" class="mo lf it bd lg mp mq dn lk mr ms dp lo kr mt mu ls kv mv mw lw kz mx my ma mz bi translated">实施说明</h2><ol class=""><li id="b359" class="na nb it ki b kj mc kn md kr nc kv nd kz ne ld nf ng nh ni bi translated">如果你不熟悉优秀的<a class="ae kf" href="https://www.npmjs.com/package/classnames" rel="noopener ugc nofollow" target="_blank">类名</a>库，第17行和第19行可能看起来有点奇怪。基本上，类名库允许你连接CSS类并有条件地应用于你的元素。</li><li id="f676" class="na nb it ki b kj nj kn nk kr nl kv nm kz nn ld nf ng nh ni bi translated">在第36行，你可以看到我们计算了传入的颜色的十六进制字符串。因为我们使用CSS中直接传递的颜色属性，它可以是任何可接受的CSS颜色格式，而不仅仅是十六进制。例如，它可以是rgba字符串。这就是Tinycolor的用武之地。我们可以给它这些格式中的任何一种，它会返回一个格式良好的十六进制字符串，我们可以将它与我们的图块一起显示。</li><li id="3a39" class="na nb it ki b kj nj kn nk kr nl kv nm kz nn ld nf ng nh ni bi translated">继续看第36行，您可能已经注意到计算十六进制字符串的函数被包装在<code class="fe no np nq nr b">useMemo</code>中。这是因为我们只想在颜色改变时计算这个值。我们可以避免重新计算任何其他道具的变化，这可能会导致重新渲染。我还在学习新的Hooks API，所以这可能不是最合适的<code class="fe no np nq nr b">useMemo</code>用法，因为它可能不是一个特别昂贵的操作，但我认为这是一个处理它的好方法。你可以在这里了解更多关于<code class="fe no np nq nr b">useMemo</code>函数或者钩子的一般<a class="ae kf" href="https://reactjs.org/docs/hooks-reference.html#usememo" rel="noopener ugc nofollow" target="_blank">。</a></li></ol><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mn mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">彩色瓷砖样式源</p></figure><h2 id="6be0" class="mo lf it bd lg mp mq dn lk mr ms dp lo kr mt mu ls kv mv mw lw kz mx my ma mz bi translated">造型说明</h2><p id="5dbe" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们瓷砖的造型非常简单。我们有瓷砖本身，它的尺寸和颜色来自我们传入的变量。</p><p id="7169" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们有一个容器来保存图块、颜色名称和十六进制值。这是一个简单的flex容器，保持我们的元素对齐。</p><h1 id="911f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">颜色选择器</h1><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/8d5f19ff7aff34d8b0ce90f325d4d699.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*60aXsgfuTUd0yYPBvhl71w.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">颜色选择器设计</p></figure><p id="ad69" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于我们的拾色器，我们将重用色块组件，以及来自<a class="ae kf" href="https://casesandberg.github.io/react-color/" rel="noopener ugc nofollow" target="_blank"> react-color </a>包的拾色器。</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mn mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">颜色选择器源</p></figure><h2 id="7bda" class="mo lf it bd lg mp mq dn lk mr ms dp lo kr mt mu ls kv mv mw lw kz mx my ma mz bi translated">实施说明</h2><p id="f79a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们的颜色选择器由一个显示当前选择的颜色及其十六进制值的<code class="fe no np nq nr b">ColorTile</code>和一个来自<code class="fe no np nq nr b">react-color</code>库的<code class="fe no np nq nr b">ChromePicker</code>组成，后者实际上允许我们选择一种颜色。</p><p id="758b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有一些状态来控制<code class="fe no np nq nr b">ChromePicker</code>是否可见，还有一个回调函数来让任何使用我们的选择器的组件知道颜色何时改变。当颜色改变时，提供了很多信息，但是十六进制值对于我的目的来说已经足够了，正如你在第17行看到的。</p><h1 id="8f16" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">颜色列表</h1><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="ml mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">颜色列表设计</p></figure><p id="0ec4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的颜色列表组件接受一个颜色列表，并将它们呈现为一个包含颜色块的列表。我们的颜色列表旨在将基色显示为稍大的图块，其余的图块表示基色的变体，显示为较小的图块。我们还允许命名我们的列表，这将用于显示基本颜色的名称。</p><p id="154d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的颜色列表也带来了本演练的“弹性”部分。使用React Spring将在进入时对瓷砖进行动画处理😊</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mn mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">调色板列表实现</p></figure><h2 id="6a0d" class="mo lf it bd lg mp mq dn lk mr ms dp lo kr mt mu ls kv mv mw lw kz mx my ma mz bi translated">实施说明</h2><ol class=""><li id="4cb3" class="na nb it ki b kj mc kn md kr nc kv nd kz ne ld nf ng nh ni bi translated">在第34–40行，你可以看到我们使用<code class="fe no np nq nr b">useTrail</code>实现了React Spring。你可以在这里阅读更多关于步道的信息。我们将颜色块容器上的边距设置为动画，根据列表是列对齐还是行对齐，这可能是右边或底部的边距。</li><li id="49ec" class="na nb it ki b kj nj kn nk kr nl kv nm kz nn ld nf ng nh ni bi translated">在第39行，你可以看到我们传递了一个对动画的引用。这是为了让我们可以传递一个引用到我们的颜色列表来延迟动画。如果我们想从一个父组件中触发一个特定的动画序列，这将是非常有用的。</li></ol><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mn mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">调色板列表样式</p></figure><h1 id="bb26" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">颜色对</h1><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="ml mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">色彩配对设计</p></figure><p id="3a20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颜色对组件采用两种颜色，并并排显示它们以及一些可访问性信息。这个想法是，开发者或设计师将颜色配对，以确保它们在用作背景/前景组合时一起工作。</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mn mm l"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">颜色对实现</p></figure><h2 id="1aab" class="mo lf it bd lg mp mq dn lk mr ms dp lo kr mt mu ls kv mv mw lw kz mx my ma mz bi translated">实施说明</h2><p id="26f5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如前所述，我们的颜色对组件采用背景色和前景色，在第26–33行，您可以看到我们使用Tinycolor来确定颜色对的可访问性。</p><p id="882c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用一个简单的药丸组件来显示结果，药丸的类型由结果决定。我在这里没有展示药丸的源代码，但是它是一个非常标准的组件，你可以在任何组件库中找到(Bootstrap、Material等)。</p><p id="610c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以在这里了解更多关于无障碍和WCAG <a class="ae kf" href="https://www.w3.org/WAI/standards-guidelines/wcag/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><h1 id="c170" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论和源代码</h1><p id="b816" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我希望你能从这个演练中学到一些东西。我强烈推荐在你的下一个项目中研究我在这里提到的库。特别是，如果没有优秀的Tinycolor包，我的应用程序将需要更长的时间来创建。</p><blockquote class="nt nu nv"><p id="bf17" class="kg kh nw ki b kj kk kl km kn ko kp kq nx ks kt ku ny kw kx ky nz la lb lc ld im bi translated">完整应用程序的源代码可以在<a class="ae kf" href="https://github.com/stephan-mclean/project-color" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="8c69" class="kg kh nw ki b kj kk kl km kn ko kp kq nx ks kt ku ny kw kx ky nz la lb lc ld im bi translated">包含所有组件的故事书实例可以在<a class="ae kf" href="https://rainbo-components.netlify.com/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></blockquote><p id="22d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对设计、代码或其他方面有任何反馈，我很乐意在回复中听到。</p><p id="c68f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">非常感谢你看我的文章！</p></div></div>    
</body>
</html>