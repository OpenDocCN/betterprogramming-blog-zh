<html>
<head>
<title>How to Improve Page Speed by Optimizing Content</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过优化内容来提高页面速度</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-improve-page-speed-by-optimizing-content-669e17a369cb?source=collection_archive---------19-----------------------#2020-01-27">https://betterprogramming.pub/how-to-improve-page-speed-by-optimizing-content-669e17a369cb?source=collection_archive---------19-----------------------#2020-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c3e7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">图像和字体优化技术</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9741e0bbc3482e3a384e534e323e0780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5D3IesGdajaptmogSart-w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.webtips.dev/how-to-improve-page-speed-by-optimizing-content"><div class="gh gi ku"><img src="../Images/c19cb3069af1beba3c93258d9fcfe139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*-PVzecNs3s4ZbJsdsgIsGA.png"/></div></a></figure><p id="ac49" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Web应用程序的范围和功能不断增长，这使我们能够离开某些桌面应用程序，在旅途中访问我们的文件。但是让网络更加丰富是有代价的:这类应用程序下载的数据量持续稳定增长。</p><p id="209a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于一个内容丰富的站点，网络请求的数量可以从100到500不等。在撰写本文时，让脸书加载首页导致了超过<strong class="kx iu"> 500 </strong>个网络请求和超过<strong class="kx iu"> 8 MB </strong>的传输。</p><p id="f7de" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">互联网速度越来越快，但不同国家的速度不同，截至2016年，移动互联网的使用超过了桌面互联网，其中许多用户仍然使用缓慢的3G连接。</p><p id="8770" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">有鉴于此，实现流畅的用户体验变得越来越困难，使得内容优化比以往任何时候都更加重要。</p><p id="f3df" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">优化我们的大部分资产，如HTML、CSS和JavaScript文件是非常简单的，你缩小和丑化，去掉注释，你基本上就完成了，没有太多其他事情可以做。</p><p id="8ed4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">但是这些并不是唯一花费我们额外的加载时间的资产。就文件大小而言，我们有占应用程序最大部分的较重资产，这些是图像和字体。</p><p id="5252" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">所以，让我们来看看这两者，看看我们如何优化它们，使我们的网站的内容加载更有效。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="fc30" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">图像优化技术</h1><p id="91cb" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">大多数情况下，图像占传输字节的大多数，这意味着我们可以通过优化它们来获得最大的性能。要开始这样做，我们需要知道我们在哪里使用什么类型的图像。</p><h2 id="1312" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">替换图像</h2><p id="0179" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">利用CSS效果可以移除和替换一些图像。考虑使用阴影:不要用图像来代替阴影或文本阴影，而是用CSS来代替它们。</p><p id="35d0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">通常，我们在工具提示、语音气泡、切换和其他UI处理程序中使用三角形箭头，并且我们倾向于使用自定义字形或图像。这些也可以用CSS <a class="ae nh" href="https://css-tricks.com/snippets/css/css-triangle/" rel="noopener ugc nofollow" target="_blank">边框</a>代替。下次当你必须实现一个设计时，想想你是否可以只用CSS实现同样的效果。</p><p id="1252" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">但是，如果我们确实需要使用图像，并且我们碰巧想在图像上显示一些文本，那么就使用web字体，而不是在图像本身中编码文本。这也有助于减少资源大小。</p><h2 id="d761" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">使用矢量图像</h2><p id="5253" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">当你在图像中使用不同几何形状的组合时，最好使用矢量而不是光栅。请注意两者之间的区别:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/fb415b264ef2387c463241b7597d4519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1UpKn6yU7SDqjHqxtnC3Jg.png"/></div></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">放大矢量与光栅图像</p></figure><p id="d247" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">矢量图像与分辨率和比例无关，因此在高分辨率和不同屏幕尺寸设备的世界中，矢量图像是一个很好的选择。</p><h2 id="9d86" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">缩小SVG标记</h2><p id="14fc" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">组成SVG的XML标记通常包含由生成它们的应用程序添加的不必要的元数据。这些可以安全地删除，以确保我们只交付绝对必要的部分，仅此而已。</p><h2 id="774a" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">选择正确的光栅图像格式</h2><p id="6e63" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">选择正确的光栅图像格式对于节省宝贵的字节至关重要。首先，从决定在三种主要类型中使用哪一种开始:JPG、PNG或GIF？</p><p id="780e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们可以简单地通过提问来排除GIF:“<em class="nn">我需要动画吗？</em>“如果答案是肯定的，那就用GIF，如果不是，我们要么用JPG，要么用PNG。</p><p id="346a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果我们不需要动画图像，我们只剩下JPG和巴布亚新几内亚。如果你的图像是透明的，那就剩下PNG了。如果没有，你也不需要保存好的细节，你就剩下JPG了。</p><p id="eaa7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了更容易理解选择哪一个，请看下面的决策树:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/a91d157aae644df420a8737cc101c339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ewfi_ZP6Q7zeJjgikvwqmw.png"/></div></div></figure><h2 id="1f7c" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">压缩</h2><p id="cf83" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">就像SVG一样，许多光栅图像包含元数据，如相机信息甚至地理位置。这些可以安全地移除。</p><p id="a1bb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">除了删除元信息，我们还可以通过有损压缩进一步减小文件大小。由于我们眼睛的工作方式，我们可以降低分辨率而不会注意到差异。一个使用有损压缩的伟大工具是<a class="ae nh" href="https://tinypng.com/" rel="noopener ugc nofollow" target="_blank"> TinyPNG </a>。</p><h2 id="566a" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">缩放您的图像</h2><p id="af2c" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">调整图像大小，确保显示尺寸尽可能接近图像的自然尺寸。如果你在你的网站上显示一个300x150px的图片，没有必要是1500x750，把它缩小到显示尺寸。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/77a80f17eb1b154a0b4495dee5e8fffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*dpjLIHxFoB5wndID-FpgRg.png"/></div><p class="nj nk gj gh gi nl nm bd b be z dk translated">在DevTools中显示为“固有”的图像的自然大小</p></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="27c9" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">字体优化技术</h1><p id="12b7" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">就像图像一样，为了知道我们可以在哪里进行改进，我们需要首先监控我们的字体使用，尽管这里提到的技术适用于所有字体。</p><h2 id="f718" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">最小化字体数量</h2><p id="bf08" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">最简单和最容易实现的方法是最小化页面上使用的字体数量和每个字体系列使用的变体数量。</p><p id="6c6f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这不仅在性能方面有所帮助，而且还创建了更一致的设计，为更好的用户体验铺平了道路。</p><p id="d97e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">你可以在fonts.google.com的<a class="ae nh" href="https://fonts.google.com/" rel="noopener ugc nofollow" target="_blank">上试验字体加载次数；选择您想要导入的字体，加载时间将根据您的选择进行计算。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/2a498861f3fb1603780de8ea05d1f240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xaWRvmOBaHdocvlg1feLsw.png"/></div></figure><h2 id="e1c0" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">子集化</h2><p id="753e" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">许多字体都有各种各样的字形，您可能永远也不会用到。如果你的网站只由拉丁字符组成，那么在你的字体集中保留西里尔符号就没有意义了。</p><p id="bd21" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这些字体可以是子集，并且只包括所需的Unicode范围，以进一步减小文件大小。有很多在线和离线工具，比如<a class="ae nh" href="https://www.npmjs.com/package/glyphhanger" rel="noopener ugc nofollow" target="_blank"> glyphhanger </a>、<a class="ae nh" href="https://transfonter.org/" rel="noopener ugc nofollow" target="_blank">trans Font</a>和<a class="ae nh" href="https://everythingfonts.com/subsetter" rel="noopener ugc nofollow" target="_blank"> Font Subsetter </a>可以帮助你实现这一点。</p><h2 id="42ab" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">实现自定义字体加载策略</h2><p id="8c70" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">为了进一步优化字体加载，您还可以实现自定义字体加载和呈现策略。</p><p id="b001" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">默认情况下，字体请求被搁置，直到渲染树被构建，这意味着我们已经准备好了DOM和CSSOM。这可能会导致文本呈现延迟。</p><p id="bba1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">通过在<code class="fe nr ns nt nu b">link</code>标签上使用<code class="fe nr ns nt nu b">rel="preload"</code>,我们可以告诉浏览器以高优先级处理资源，这样就可以在早期请求字体，而不必等待CSSOM准备就绪。</p><p id="1b5a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">确保用<code class="fe nr ns nt nu b">as</code>属性指定资源的类型:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="4bac" class="mv lz it nu b gy nz oa l ob oc">&lt;link rel="preload" href="myCustomFont.woff2" as="font" /&gt;</span></pre><h2 id="a0a0" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">贮藏</h2><p id="ef09" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">字体是静态资源，大多数时候，它们很少改变，这意味着您可以提供一个长的<code class="fe nr ns nt nu b">Cache-Control: max-age</code>指令来缓存它们，并避免不必要的网络请求。</p><h2 id="728e" class="mv lz it bd ma mw mx dn me my mz dp mi le na nb mk li nc nd mm lm ne nf mo ng bi translated">压缩</h2><p id="3327" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">最后但同样重要的是，一些字体格式，如EOT或TTF，默认情况下是不压缩的，请确保对它们进行某种压缩。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="e727" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">还能做什么？</h1><p id="24b3" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated">到目前为止，我们主要讨论了前端的优化技术，但是在将内容发送到客户端之前，我们也可以在服务器上进行优化。例如，启动<a class="ae nh" href="https://github.com/google/brotli" rel="noopener ugc nofollow" target="_blank"> Brotli </a>或<a class="ae nh" href="https://www.gzip.org/" rel="noopener ugc nofollow" target="_blank"> gzip </a>压缩。</p><p id="bd1d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们讨论了字体的缓存，但这同样适用于图像。您可以将这些标记为静态资源<em class="nn"> </em> ( <em class="nn">如徽标和背景图片</em>)，这样下次用户访问您的网站时，他们会从缓存而不是从服务器获得请求，从而避免不必要的旅行。</p><p id="b77f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这几点都有影响，有些影响很小，有些影响很大。</p><p id="6791" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">照顾好每一点真的可以增加和提高你的性能，所以下次当你被要求提高页面速度时，记住上面的几点，你将保证你的内容效率会很高。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://medium.com/@ferencalmasi/membership"><div class="gh gi od"><img src="../Images/e66c4cd6d9849ac0bd245f3fc39b65c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZ9xuLqLkbqUG65sgVB3gg.png"/></div></a></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.webtips.dev/10-critical-performance-optimization-steps-you-should-take"><div class="gh gi ku"><img src="../Images/f2e3f1a32a1a7eea85c8553aa3ed7b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*n3Bw6sPsdLbUrpBa_6masA.png"/></div></a></figure></div></div>    
</body>
</html>