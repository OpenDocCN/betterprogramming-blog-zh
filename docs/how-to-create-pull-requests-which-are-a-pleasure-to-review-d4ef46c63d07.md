# 如何创建令人愉快的拉动式请求？

> 原文：<https://betterprogramming.pub/how-to-create-pull-requests-which-are-a-pleasure-to-review-d4ef46c63d07>

## 一些工具和模板来控制拉取请求

![](img/8ecb1435c50e1d645ec964e416b55df3.png)

[扬西·敏](https://unsplash.com/@yancymin?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

如果你正在阅读这篇博文，你可能已经感受到了没有描述和上下文的 4000 行拉请求的痛苦。

任何人都不应该在打开一个拉取请求时翻白眼和呻吟。如果你也认为让他们愉快地接受审查的责任在于提出拉取请求的工程师，请继续阅读。

# 拉式请求模板

我们公司最近开始使用拉式请求模板。拉动式请求模板提供了一个模板，工程师可以在编写拉动式请求时填写该模板。

我们不会在拉式请求中强制说明，但是我发现如果您包含一个模板，工程师可能会填写字段，并为审阅者提供一些上下文。

这在您审查您当前没有处理的功能/项目时特别有用。要添加一个模板到你的项目中，你必须创建一个`pull_request_template.md`文件，这个文件可以在你的项目的根目录下可见或者隐藏在一个`.github/`目录中。这是我们采用的模板:

点击 raw 查看原始降价文件

当工程师用简单的英语思考他们所做的更改时，这个模板是有用的，从而使审核者更清楚地了解拉取请求。关于拉请求模板的更多信息可以在[这里](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository)找到。

# 对拉取请求大小的限制

施加一个大小限制使得拉取请求更加简洁，并且更容易被审阅者理解，这意味着他们可以用更少的努力来捕捉任何潜在的错误。

认知负荷和拉请求的大小之间的关系是指数级的——在一定的规模下，评审者甚至不会阅读代码，错误就会溜走。

为了解决这个问题，我们对拉取请求施加了 400 行代码的长度限制。在此限制下，我们有时需要将功能分解为多个拉式请求(即 SQ4–123-a、SQ4–123-b、SQ4–123-c 等)。)并发现代码审查在这样做时更有效。

提交历史确实变得有点混乱，但是我们觉得这是一个值得的权衡；评论者考虑的越少，他们在评论中就能抓住更多。

400 行的限制可能不适合您的项目。这里有一个有趣的工具，它将你的组织与行业中的其他组织进行比较。

# 在 GitHub 上使用什么工具

有几个代码拉取请求工具使得审查代码变得更加容易。以下是我最喜欢的几个:

1.  [可查看的](https://reviewable.io/)——这是一个比 Github 的原生视图更好的用户界面，它有大量的键盘快捷键来帮助查看。如果您希望使用可复查，也可以通过提交进行复查。
2.  GitHub . dev——你知道吗，如果你在 GitHub repo 上按下`.`,你会被带到一个 web 版本的 VSCode？这也适用于拉请求，你可以清楚地看到所有的文件被修改，并在 IDE 中随心所欲地添加注释。
3.  GitHub 的更好的拉取请求——与上面类似，这个 chrome 扩展将允许你浏览在类似 IDE 的树形结构中改变的文件。
4.  [Codacy](https://github.com/marketplace/codacy)——使用这个 GitHub 应用程序，您将能够去除平凡的代码评审活动(比如代码风格)，它自动化了代码评审的某些方面。
5.  使用 [Husky](https://github.com/typicode/husky) 的预提交/预推送挂钩——这些任务在提交或推送代码之前在本地运行；他们可以做诸如运行测试、运行 lint 检查器和检查提交消息之类的事情，并且他们可以捕捉到一些本来可能会漏掉的东西。这将简化审查者的代码审查。

# 自我检讨

总是值得考虑的；您愿意审核自己的拉动式请求吗？

这是我个人使用的技巧。虽然看起来很傻，但我假装自己是评审者，在要求别人之前先评审我自己写的代码。

我把评论留给自己，一旦我解决了它们，我就解决它们。即使使用了我上面提到的所有工具，我仍然会在检查我自己的代码时发现一些东西。之后，我会要求其他人进行审核，希望我已经让他们感到更愉快，并减少了在合并之前可能会遗漏的内容。

有了这些工具，对于评审者来说，你可以使拉请求变得不那么费力，甚至是愉快的。如果你有更多的建议，请告诉我们。我们喜欢听到和探索新的方法来改进我们的流程。

*最初发表于*[*【https://www.brightec.co.uk】*](https://www.brightec.co.uk/blog/what-are-the-best-tools-to-use-for-pull-requests)*。*