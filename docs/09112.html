<html>
<head>
<title>Webhooks Are Everywhere — It’s Time To Learn Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络钩子无处不在——是时候学习它们了</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/webhooks-are-everywhere-its-time-to-learn-them-721658716c6a?source=collection_archive---------13-----------------------#2021-07-15">https://betterprogramming.pub/webhooks-are-everywhere-its-time-to-learn-them-721658716c6a?source=collection_archive---------13-----------------------#2021-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0930" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个快速简单的指南，帮助你学习用Python发送webhooks</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee7c363d9ae07114d63136033ed534a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*seWMi7mZPx1MPr4c"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@saadchdhry?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Saad Chaudhry </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8f5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你曾经研究过API和自动化，你肯定听说过webhooks。现在，对于每个开发人员来说，在他们的技能包中包含这些是很重要的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="03df" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是Webhooks及其用例？</h1><p id="75d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我将保持简单，因为我注意到阅读/浏览百分比分数最高的文章是那些技术细节较少而例子较多的文章。</p><p id="421a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Webhooks基本上是用户定义的回调，工作在HTTP协议上。它们是请求，通常由用户在事件开始时触发，并提供实时信息。一旦事件启动，一个webhook就会被发送到一个定义好的“webhook URL ”,其中包含有关该事件的数据。看一个真实世界的例子，我们可以使用webhooks来通知我们，一旦我们的代码执行完了一个任务，或者一旦我们完成了推送GitHub repo。</p><p id="f969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，当在服务器上运行长时间的任务时，在我的代码中，我将webhooks发送给Discord(使用它的webhooks功能)以向我发送输出，并在进程结束时发送。它非常有用，因为我不需要打开外壳，无论我在哪里，我都可以在手机上查看它。</p><p id="b430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名开发人员，无论你是做前端还是后端工作，把它们放在你的技能包中是很重要的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ffdd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Python通用实现</h1><p id="c9bf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">发送webhooks总是相对简单的，对于Python也是如此。有许多方法可以做到这一点。我个人更喜欢使用webhooks包，因为它使用的只是一个简单的装饰器。</p><p id="3ffe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">webhook请求基本上是一个带有JSON主体的简单POST请求。我们可以在Python中很容易地复制这一点(导入<code class="fe mz na nb nc b">webhooks</code>模块):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="1b2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们定义了一个新的使用<code class="fe mz na nb nc b">webhook</code>装饰器的<code class="fe mz na nb nc b">basic</code>函数(用于发送基本的webhooks)。装饰器只是从函数中获取参数，并完成所有的艰苦工作。我们只需要在webhook的主体中添加<code class="fe mz na nb nc b">hey_msg</code>参数。最后，我们调用<code class="fe mz na nb nc b">basic</code>函数并设置webhook的URL和<code class="fe mz na nb nc b">hey_msg</code>参数的内容。</p><p id="9c38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，<code class="fe mz na nb nc b">webhooks</code>包附带了许多其他有用的功能，您可以通过阅读<a class="ae ky" href="https://webhooks.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">文档</a>来发现。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b5f7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Python Discord实现</h1><p id="b149" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">经过简单实用的介绍，我们现在可以看到如何使用webhooks。对我来说，这非常有用:当在服务器上运行或构建时，这是从我的脚本和应用程序获得输出的一种快速而可靠的方式。我只是使用<code class="fe mz na nb nc b">nohup</code>并让我的脚本在服务器的后台运行，然后休息一下，只是从我的手机监控我的不和谐。当它遇到断点时，我给自己发送调试信息、输出结果等。</p><p id="bca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好消息是什么？实现和前面的例子一样简单:</p><ol class=""><li id="9837" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">在Discord上创建webhook集成。</li><li id="21db" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">发送webhooks。</li></ol><h2 id="c420" class="nt md it bd me nu nv dn mi nw nx dp mm li ny nz mo lm oa ob mq lq oc od ms oe bi translated">创建webhook集成</h2><ol class=""><li id="55f3" class="nf ng it lb b lc mu lf mv li of lm og lq oh lu nk nl nm nn bi translated">创建测试服务器。</li><li id="5eb3" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">在服务器的常规聊天中，转到设置:</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/b31dee94503f96037d1a97019373dcb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*WfJfPcFHQUxAkQGC7kzdNA.png"/></div></figure><p id="d8e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.转到集成&gt;创建webhook &gt;复制webhook URL。</p><p id="b7ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在只需要使用<code class="fe mz na nb nc b">webhooks</code>包向这个URL发送一个webhook请求。</p><h2 id="0e00" class="nt md it bd me nu nv dn mi nw nx dp mm li ny nz mo lm oa ob mq lq oc od ms oe bi translated">发送网页挂钩</h2><p id="8280" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用下面的代码，我们将向webhook bot发送信息，以在<code class="fe mz na nb nc b">general</code> <em class="oj"> </em>频道上发送一条以<code class="fe mz na nb nc b">content</code> ( <code class="fe mz na nb nc b">"hey”</code>)内容为主体的消息。要了解更多关于webhook不和谐请求的内容，请参见这个令人敬畏的<a class="ae ky" href="https://gist.github.com/Birdie0/78ee79402a4301b1faf412ab5f1cdcf9" rel="noopener ugc nofollow" target="_blank"> GitHub要点</a>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b638" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Python Slack实现</h1><p id="b64d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我确信你们中的许多人更喜欢Slack来与团队合作，所以我也描述了如何使用webhooks在Slack中发送消息。这个过程类似于不和谐的过程。你可以按照这个简单的指南来激活和创建webhooks。一旦你有了你的webhook URL(看起来像这样:<a class="ae ky" href="https://hooks.slack.com/services/" rel="noopener ugc nofollow" target="_blank">https://hooks.slack.com/services/XXXXXX/XXXXXX/XXXXX</a>)，你可以使用下面的代码片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9fe8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像不和谐音一样，这会用<code class="fe mz na nb nc b">"hey"</code>身体发出一个信息。您可以使用此<a class="ae ky" href="https://api.slack.com/messaging/webhooks#advanced_message_formatting" rel="noopener ugc nofollow" target="_blank">资源</a>来了解邮件的高级格式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="aea5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以从代码中间发送webhooks，并与主要的团队平台进行交互。就我个人而言，我将这些webhook函数插入到我的许多代码中。同样，当在服务器上工作或投入生产时，它们变得非常有用。</p><p id="972c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你学习使用webhooks有所帮助。</p></div></div>    
</body>
</html>