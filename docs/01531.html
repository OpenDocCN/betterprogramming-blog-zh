<html>
<head>
<title>Java 13 Features: Switch Enhancements and Text Blocks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 13特性:开关增强和文本块</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/java-13-features-switch-enhancements-and-text-blocks-3be53a6d7ed3?source=collection_archive---------1-----------------------#2019-09-21">https://betterprogramming.pub/java-13-features-switch-enhancements-and-text-blocks-3be53a6d7ed3?source=collection_archive---------1-----------------------#2019-09-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="75b5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最有趣、最易于使用的新功能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8ce64b108fc9bd0b0f94a2dbdd2e6605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/0*u9PcMh-O1CE8aKuw"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">在<a class="ae ku" href="https://unsplash.com/s/photos/thirteen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ku" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Franck V. </a>拍摄的照片</p></figure><p id="407c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">新的Java来了！</p><p id="c5d3" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在过去的几年里，这是非常频繁的新闻。我仍然不习惯一年两次而不是每五次发布新的Java。</p><p id="0699" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我认为在这个快速发布周期中最好的事情是它唤醒了沉睡的Java社区，使它比前些年更加活跃。当然，其数量甚至还没有接近在线社区之王JavaScript，但随着更频繁的发布周期，事情似乎正在朝着正确的方向发展。这对Java或全栈开发人员来说绝对是个好消息。</p><p id="5c71" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我喜欢用Java进行敏捷开发的想法，每六个月发布一个小版本，增加一些新的特性和修改。它让语言再次变得有趣和令人兴奋，并证明了你不需要革命性的改变(像Java 8中的streams和lambdas)来证明一个发布的合理性。大量的小改进也一样好。</p><p id="aff8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们来看看Java 13 的新特性和改进，比如使用开关表达式的新方式和原本为Java 12设计的文本块特性。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="b23f" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">切换表达式增强功能</h1><p id="1a04" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated"><em class="mv"> Switch表达式</em>在Java 12中作为预览功能引入。在过去的几个月里，社区向Oracle发送了反馈，现在在Java 13中，他们发布了一些程序员要求的改进。</p><p id="d01f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">让我们快速回顾一下Java 12中引入的switch表达式，然后谈谈Oracle为这个版本所做的改进。</p><p id="2aea" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">是一个容易出错的组件，通常很少在日常开发中使用。必须在每个案例的结尾键入<code class="fe mw mx my mz b">break;</code>看起来总是像样板文件。Java 12通过做两件事解决了这个问题:它使<code class="fe mw mx my mz b">switch</code>成为一个表达式(不仅仅是一个语句)，这意味着它现在返回一个可以赋给变量的值，或者作为一个返回语句，或者任何你能想到的其他用例。Java 12做的第二件事是，当你使用新语法<code class="fe mw mx my mz b">case -&gt;</code>而不是<code class="fe mw mx my mz b">case:</code>时，通过使<code class="fe mw mx my mz b">switch</code>而不是<strong class="kx iu"> </strong>在情况之间穿越，来消除烦人的<code class="fe mw mx my mz b">break;</code>。</p><p id="020f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">当然，每个新的Java版本都是向后兼容的，使用旧的语法会给你带来旧的失败行为。没有遗留代码被破坏或改变行为。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="534a" class="ne lz it mz b gy nf ng l nh ni">// Legacy Switch Statement<br/>private String javaReleaseDate(int version) {<br/>  String result = "TBD";<br/>  switch (version){<br/>    case 12:<br/>      result = "19.3";<br/>      break;<br/>    case 13:<br/>      result = "19.9";<br/>      break;<br/>  };<br/><br/>  return result;<br/>}<br/></span><span id="4d1f" class="ne lz it mz b gy nj ng l nh ni">// Arrow Syntax Switch Expression // no fall-through<br/>private String javaReleaseDate(int version) {<br/>  return switch (version) {<br/>    case 12 -&gt; "19.3";<br/>    case 13 -&gt; "19.9";<br/>    default -&gt; "TBD";<br/>  };<br/>}</span></pre><p id="8beb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">由于社区对switch表达式的反馈，在Java 13中，如果你想使用<code class="fe mw mx my mz b">switch</code>作为表达式而不是语句，并且你想使用冒号语法，关键字‘break’被替换为关键字<code class="fe mw mx my mz b">yield</code>。这一改变消除了混淆，并使您在使用<code class="fe mw mx my mz b">switch</code>作为表达式或陈述时变得明显，从而减少了无意中使用您不想要的东西的可能性。<code class="fe mw mx my mz b">yield</code>语句与<code class="fe mw mx my mz b">return </code>语句非常相似；当<code class="fe mw mx my mz b">case</code>匹配时，它返回当前分支结果，没有遗漏。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="4ab0" class="ne lz it mz b gy nf ng l nh ni">// Switch Expression using yield over break<br/>private  String javaReleaseDate(int version) {<br/>  return switch (version){<br/>    case 12: yield "19.3";<br/>    case 13: yield "19.3";<br/>    default: yield "TBD";<br/>  };<br/>}</span></pre><p id="af6f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这个特性还在预览版中，所以在未来的Java版本中，我们可能会看到进一步的变化和改进。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="e124" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">文本块</h1><p id="29cd" class="pw-post-body-paragraph kv kw it kx b ky mq ju la lb mr jx ld le ms lg lh li mt lk ll lm mu lo lp lq im bi translated"><em class="mv">文本块</em>只是Java 12即将推出的巨大功能“原始字符串”的一小部分，但由于社区反馈提出了太多重要的问题，该功能被推迟了。</p><p id="1c9d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">文本块允许更好地编写，更重要的是读取Java代码中的多行文本。这是Java所渴望的，尤其是因为运行在Java虚拟机上的其他语言，如<a class="ae ku" href="https://kotlinlang.org/" rel="noopener ugc nofollow" target="_blank"> Kotlin </a>和<a class="ae ku" href="https://www.scala-lang.org/" rel="noopener ugc nofollow" target="_blank"> Scala </a>，已经支持多行文本很长时间了。</p><p id="8418" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">文本块解决的主要问题是在Java代码中编写其他语言的代码。以前，您总是需要像<code class="fe mw mx my mz b">/n</code>这样的样板文件，以便在每一行的末尾换行，这使得代码容易出错并且难以阅读。</p><p id="a80f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">文本块为您提供了一种在Java中编写多行文本的更好方法。它们使用三重引号作为分隔符，可以用在常规字符串可以用的任何地方。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="23c4" class="ne lz it mz b gy nf ng l nh ni">// Multi line text with regular String<br/>String html = "&lt;html&gt;\n" +<br/>            "   &lt;title&gt;\n" +<br/>            "     Text Blocks\n" +<br/>            "   &lt;/title&gt;\n" +<br/>            "   &lt;body&gt;\n" +<br/>            "     &lt;p&gt;...&lt;/p&gt;\n" +<br/>            "   &lt;/body&gt;\n" +<br/>            "&lt;/html&gt;\n";<br/></span><span id="0a8d" class="ne lz it mz b gy nj ng l nh ni">// With Text Blocks  <br/>String html = """<br/>              &lt;html&gt;<br/>                &lt;title&gt;<br/>                  &lt;p&gt;Text Blocks&lt;/p&gt;<br/>                &lt;/title&gt;<br/>                &lt;body&gt;<br/>                  &lt;p&gt;...&lt;/p&gt;<br/>                &lt;/body&gt;<br/>              &lt;/html&gt;""";</span></pre><p id="8012" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Java编译器会把它编译成常规的字符串，如果它原本是字符串或文本块，将不会有任何提示。</p><p id="1f6f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">请注意，文本块不能在一行中使用:左引号后面必须跟一个行结束符，否则代码将无法编译。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="ba55" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Java 13中有更多的变化。如果你看一下官方的<a class="ae ku" href="https://www.oracle.com/java/technologies/javase/13-relnote-issues.html" rel="noopener ugc nofollow" target="_blank">变更日志</a>，你会看到一个相当大的新特性列表，但是也有不赞成和将要不赞成的组件。</p><p id="e031" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">对于开发人员来说，我们刚刚提到的两个是最有趣的，也是您可以立即使用的。请记住，这两个功能都处于预览状态，可能会在功能发布中发展。</p></div></div>    
</body>
</html>