<html>
<head>
<title>A Simple Introduction to Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redux的简单介绍</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-simple-introduction-to-redux-387e6b232760?source=collection_archive---------19-----------------------#2020-04-02">https://betterprogramming.pub/a-simple-introduction-to-redux-387e6b232760?source=collection_archive---------19-----------------------#2020-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f858" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Redux如何管理复杂状态</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bfda90ed0f9c82a29737175a0fd2137a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*POj0vsz3b2UhWb2S.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自https://chriscourses.com/blog/redux<a class="ae ky" href="https://chriscourses.com/blog/redux" rel="noopener ugc nofollow" target="_blank">克里斯托弗·里斯</a></p></figure><p id="17ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Redux是一个用于管理和维护应用程序状态的JavaScript库，可以和其他框架一起使用，比如React。理解Redux的工作原理可能很棘手。本指南的目的是分解我们从Redux获得的一些资源，并解释与之相关的术语。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d58a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装<strong class="ak">凌和实现Redux </strong></h1><p id="6abd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们首先用下面的代码生成一个名为<code class="fe mz na nb nc b">redux-practice</code>的React应用程序:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="309e" class="nh md it nc b gy ni nj l nk nl">npx create-react-app "redux-practice"</span></pre><p id="d50c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个生成的应用程序的目的是测试Redux，主要来自<code class="fe mz na nb nc b">src/index.js</code>。</p><p id="f218" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还需要安装Redux，包括以下内容:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d08d" class="nh md it nc b gy ni nj l nk nl">npm install redux</span></pre><p id="6ae3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，我们现在可以从Redux导入一些资源。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e965" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建Redux存储</h1><p id="5405" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Redux store是一个普通的JavaScript对象，它提供了一些可以调用的方法。应用程序的状态包含在Redux存储中。从存储中，我们将能够读取和更改状态数据。</p><p id="0011" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Redux存储必须在应用程序的最开始创建。在我们的例子中，那是在<code class="fe mz na nb nc b">ReactDOM</code>提交应用程序之前。在<code class="fe mz na nb nc b">src/index.js</code>中，我们可以使用来自Redux的命名导出开始创建商店:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="20b9" class="nh md it nc b gy ni nj l nk nl">import {createStore} from 'redux'</span></pre><h2 id="07ec" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">createStore()</h2><p id="2e8a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe mz na nb nc b">createStore</code>是创建商店时需要调用一次的函数。没有任何参数就不能调用它。它接受的参数是一个名为<code class="fe mz na nb nc b">reducer</code>的函数，该函数将返回一个对象，即包含应用程序数据的状态。对于这个例子，我们将在变量<code class="fe mz na nb nc b">reducerFunction</code>中定义<code class="fe mz na nb nc b">reducer</code>。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="14e7" class="nh md it nc b gy ni nj l nk nl">const reducerFunction = () =&gt; {} </span><span id="371e" class="nh md it nc b gy nx nj l nk nl">const store = createStore(reducerFunction)</span></pre><p id="9566" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">reducerFunction</code>中，它接受的第一个参数将代表状态，一个对象。理想的情况是在参数中设置一个默认状态，在本例中是一个键为count、值为0的对象。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="5f1b" class="nh md it nc b gy ni nj l nk nl">const reducerFunction = (state = {count: 0}) =&gt; {</span><span id="ad3a" class="nh md it nc b gy nx nj l nk nl">   return state</span><span id="de95" class="nh md it nc b gy nx nj l nk nl">}</span></pre><p id="6c71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建Redux存储后，让我们将存储变量注销到控制台，看看我们可以访问哪些方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/8d772c4c0c8a892f84c9c4abe9c5ac93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMBzrTeHx2_7whzDgir6DA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">console.log(存储)</p></figure><p id="0e89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本指南，我们将只关注<code class="fe mz na nb nc b">getState</code>和<code class="fe mz na nb nc b">dispatch</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c6c2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">与Redux Store交互</h1><p id="1e2f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了从存储中访问当前状态对象，我们调用存储上的方法<code class="fe mz na nb nc b">store.getState()</code>，类似于reader方法。如果我们去<code class="fe mz na nb nc b">console.log(store.getState()</code>，我们将得到我们在<code class="fe mz na nb nc b">reducerFunction</code>中定义的状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/8eda8bb0b57800175f08630474f161b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qYz8OT3dfEIN-KBlFRvPOA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<code class="fe mz na nb nc b">reducerFunction</code>中定义的默认状态</p></figure><h2 id="12f5" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">行动</h2><p id="9658" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要更改Redux store上的属性，我们首先必须创建一个所谓的<em class="nz">动作</em>。动作只不过是被发送到存储的对象。</p><p id="4b89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在对象上，第一个必需的属性是<code class="fe mz na nb nc b">type</code>。分配给它的值表示它将采取的操作。对于此操作，它将增加我们状态中的计数。按照惯例，该值是一个全大写的字符串。该对象可以具有附加属性。对于这个例子，它可以使用<code class="fe mz na nb nc b">amount</code>属性，该属性将计数增加5。</p><p id="1c6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个函数，它将返回一个具有这些属性的对象，并将它赋给一个变量<code class="fe mz na nb nc b">actionIncrement</code>。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="f4b1" class="nh md it nc b gy ni nj l nk nl">const actionIncrement = () =&gt; {</span><span id="e4af" class="nh md it nc b gy nx nj l nk nl">   return {</span><span id="36f0" class="nh md it nc b gy nx nj l nk nl">     type: "INCREMENT",</span><span id="d5ab" class="nh md it nc b gy nx nj l nk nl">     amount: 5     <br/>   }</span><span id="3da3" class="nh md it nc b gy nx nj l nk nl">}</span></pre><h2 id="9122" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">派遣</h2><p id="15e8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，我们该怎么做呢？简单地呼叫<code class="fe mz na nb nc b">actionIncrement()</code>不会改变我们商店的状态。为此，我们需要在我们的存储上调用另一个方法<code class="fe mz na nb nc b">store.dispatch(actionIncrement())</code>，传入从<code class="fe mz na nb nc b">actionIncrement()</code>返回的对象。<code class="fe mz na nb nc b">.dispatch()</code>方法允许我们发送一个动作对象，商店可以用这个信息做一些事情。</p><p id="7b5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当派单发送到商店时，<code class="fe mz na nb nc b">createStore()</code>功能再次运行。dispatch动作作为reducer中的第二个参数传入，<code class="fe mz na nb nc b">reducerFunction</code>。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="de0a" class="nh md it nc b gy ni nj l nk nl">const reducerFunction = (state = {count: 0}, action) =&gt; {</span><span id="80ea" class="nh md it nc b gy nx nj l nk nl">   console.log(action) // {type: "INCREMENT", amount: 5}</span><span id="97d2" class="nh md it nc b gy nx nj l nk nl">   return state</span><span id="f953" class="nh md it nc b gy nx nj l nk nl">}</span></pre><h2 id="e137" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">还原剂</h2><p id="9727" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">根据传入的操作，可以更改返回的对象。在reducer中设置了一个条件来确定返回哪个对象。通常，使用switch语句。在<code class="fe mz na nb nc b">“INCREMENT”</code>的例子中，我们想返回一个对象，它的count属性加上了传递的数量。</p><p id="58ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">减速器是纯函数，其输出仅由输入决定。它不使用或改变函数范围之外的任何东西。千万不要直接操纵国家的价值观！使用状态值计算新状态的值。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="f931" class="nh md it nc b gy ni nj l nk nl">const reducerFunction = (state = {count: 0}, action) =&gt; {</span><span id="7e2c" class="nh md it nc b gy nx nj l nk nl">   switch(action.type){</span><span id="f345" class="nh md it nc b gy nx nj l nk nl">      case "INCREMENT":</span><span id="e867" class="nh md it nc b gy nx nj l nk nl">      return {</span><span id="81ad" class="nh md it nc b gy nx nj l nk nl">         count: state.count + action.amount</span><span id="28fa" class="nh md it nc b gy nx nj l nk nl">      }</span><span id="9a04" class="nh md it nc b gy nx nj l nk nl">      default:</span><span id="358a" class="nh md it nc b gy nx nj l nk nl">         return state</span><span id="f94c" class="nh md it nc b gy nx nj l nk nl">      }</span><span id="6de0" class="nh md it nc b gy nx nj l nk nl">}</span></pre><h2 id="c02d" class="nh md it bd me nm nn dn mi no np dp mm li nq nr mo lm ns nt mq lq nu nv ms nw bi translated">使用多个减速器</h2><p id="1ff5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">随着应用程序的扩展，需要更多的属性和信息。假设我们想要在我们的州中包含另一个属性，<code class="fe mz na nb nc b">comments</code>。让另一个reducer函数来管理这些信息会更有效。现在，让我们创建这个函数并将状态设置为一个空数组。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="473e" class="nh md it nc b gy ni nj l nk nl">const commentReducer = (state= []) =&gt; {</span><span id="185d" class="nh md it nc b gy nx nj l nk nl">   return state<br/>}</span></pre><p id="9f23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，<code class="fe mz na nb nc b">createStore</code>功能只能取一个减速器功能。除了传入一个reducer函数，还可以传入另一个负责将多个reducer函数组合成一个状态的方法。</p><p id="7fa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是Redux的另一个命名导出，名为<code class="fe mz na nb nc b">combineReducers</code>。这个函数接受一个参数，一个定义了键值对的对象。在我们的例子中，我们希望将<code class="fe mz na nb nc b">countObject</code>和<code class="fe mz na nb nc b">commentsArray</code>的键设置为各自的值。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="67de" class="nh md it nc b gy ni nj l nk nl">import {createStore, combineReducers} from 'redux'</span><span id="ad37" class="nh md it nc b gy nx nj l nk nl">const store = createStore(</span><span id="7a75" class="nh md it nc b gy nx nj l nk nl">   combineReducers({</span><span id="58de" class="nh md it nc b gy nx nj l nk nl">      countObj: reducerFunction,<br/>      commentsArray: commentReducer</span><span id="0a06" class="nh md it nc b gy nx nj l nk nl">   })</span><span id="ab1c" class="nh md it nc b gy nx nj l nk nl">)</span></pre><p id="ab68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe mz na nb nc b">combineReducers</code>将返回一个对象，这就是<code class="fe mz na nb nc b">createStore</code>所期望的参数。<code class="fe mz na nb nc b">combineReducers</code>返回的对象就是现在的状态。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4763" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Redux流程概述</h1><p id="c2f9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Redux存储是应用程序状态存在的地方。一个动作包含一些识别状态变化的信息。一个应用程序将一个动作分派给缩减器。reducer是基于动作实际改变状态的方法。缩减器接受之前的状态，并将之后的状态返回给Redux存储。然后，Redux store将更新后的状态发送给应用程序中的组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/6c3b6a736bc2a01c26664f9731d35add.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FelUI2HFAFHKGJaSczTvGg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">运动中的还原</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="053f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><p id="eae4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://rangle.github.io/react-training/redux-intro/" rel="noopener ugc nofollow" target="_blank">https://rangle.github.io/react-training/redux-intro/</a></p><p id="1fea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://gist.github.com/alexgriff/0e247dee73e9125177d9c04cec159cc6" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/Alex Griff/0e 247 dee 73 e 9125177d 9 c 04 CEC 159 cc 6</a></p><p id="c561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是代码的要点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f721" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结束语</h1><p id="6068" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Redux是一个库，随着应用程序规模的增长，它可以管理更复杂的状态。Redux的思想是只有一个状态管理所有的数据。可以从该状态中读取信息，更新信息的唯一方法是通过reducer函数。本指南涵盖了Redux的基础知识以及Redux能为我们的应用程序提供什么。感谢您的阅读！</p></div></div>    
</body>
</html>