# 应用于 JavaScript 的干净代码—第 2 部分:变量

> 原文：<https://betterprogramming.pub/clean-code-applied-to-javascript-part-2-variables-8302f01e539c>

## 关于编写和维护干净代码的惊人好处的系列文章

![](img/6b533f8fc08b69a2c315043eeeeaab51.png)

由[路](https://unsplash.com/s/photos/team?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)上[车头](https://unsplash.com/@headwayio?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)拍摄

这篇文章是一个有趣系列文章的第二部分，该系列文章将深入探讨众所周知的“干净的代码”但适用于 JavaScript 的主题。

在本系列中，我们将讨论每个程序员都应该知道的关于干净代码的经典技巧，并将它们应用于特定的 JavaScript/TypeScript 语言。

*   [第 1 部分:开始之前](https://medium.com/better-programming/clean-code-applied-to-javascript-part-1-9f3badd5715)
*   [第二部分:变量](https://medium.com/better-programming/clean-code-applied-to-javascript-part-ii-variables-8302f01e539c)
*   [第 3 部分:功能](https://medium.com/@ccaballero/clean-code-applied-to-javascript-part-3-functions-f9f26b221736)
*   [第 4 部分:注释](https://medium.com/better-programming/clean-code-applied-to-javascript-part-4-3f6db21ee4e5)
*   [第 5 部分:例外情况](https://medium.com/better-programming/clean-code-applied-to-javascript-part-5-exceptions-d46e07691c19)
*   [第 6 部分:避免条件复杂性](https://medium.com/better-programming/clean-code-applied-to-javascript-part-6-avoid-conditional-complexity-5ee9cbb1b26a)

# 介绍

在这篇文章中，我们将介绍生成干净代码的基本技巧和建议，重点关注编程时最基本的元素:*变量。*

我们所有的例子都是用 JavaScript 说明的，但是这些好的实践应该适用于任何编程语言，包括“最接近金属”的编程语言。

我做这个评论是因为我和用 C 或 Go 等语言工作的同事讨论过，他们不喜欢应用这些实践，认为在他们的编程语言中“没有人”会这样做。

然后，我总是回答说，只要是为了努力提高，就必须有人第一个打破僵局。然而，这个评论给出了同事之间长时间愉快的谈话，其中讨论了这些实践的优点和缺点。

因此，我们从生成专门应用于变量的良好代码的技巧开始。

# 使用意图暴露姓名

变量名必须揭示变量的意图。也就是说，我们不应该有像“x”或“y”这样名字的变量，除非我们正在开发数学软件。

在数学的上下文中，这些名字是准确的，但是在我们在一个变量中存储其他信息的情况下，它应该以另一种方式命名，因为变量本身必须揭示你想要做什么。

第一种情况，如果我们调用一个名为`x`的变量，我们怎么知道里面存储了什么信息？我们不能！

在第二种情况下，我们继续保持名称而不暴露意图，并添加注释。为什么我们要给一个不好的变量名加注释？解决办法先验的简单多了，就是给变量一个合适的名字。

现在有趣的来了，父母给孩子取名字需要多长时间？找到合适的名字需要很长时间，但是最好的是，在 ide 的支持下，我们可以不断地给变量重新命名，直到找到一个更合适的名字。

```
const x; // What it is?!
const x; // User information
const user;
```

# 使用易发音的名字

如果一个变量的名字必须揭示意向性，我们必须能够发音。如果我们回到干净代码的主要实践之一，包括生成人类可读的代码，我们必须认为我们能够说出变量是至关重要的。

因此，你不应该为此发明首字母缩略词，即使它们看起来是宇宙中最可爱、最巧妙的。你和同事一起编程，为了你不那么聪明的未来。

选择变量名称的另一个错误行为是通过去掉单词中的字母来使用小称。首先，记住我们是用英语编码的，并不是所有的开发人员都会说英语。

所以，为什么我们要把它的名字减少三四个字呢？那有什么好处？代码将被工具操纵(transpilators 包括其他语言的编译器)，代码将被正确列表(使用[漂亮的](https://prettier.io/))。

所以，把不可发音的名字放进去，只能让我们费点心思去推导变量的意向性。

请不要让我去想那些与我的商业逻辑无关的事情！

看看下面的代码，你会很好地推断出这个类在建模什么样的数据，但是这需要开发团队之间的伪代码，甚至是脑力劳动。

接下来，读取第二段代码，这段代码对相同的信息进行建模，但不需要花费太多精力就能知道存储的是什么类型的数据。

```
class DtaRcrd102 {
 private Date genymdhms;
 private Date modymdhms;
} class Customer {
 private Date generationTimestamp;
 private Date modificationTimestamp;
}
```

# 不要在名称中使用变量的类型

旧的做法是在变量名称中使用前缀，指定数据的类型。让我们思考一下:

*   我们必须为变量中包含的数据类型创建伪前缀代码吗？
*   每个公司都有自己的伪代码，我应该按公司还是按项目学习伪代码？
*   如果我在变量名中使用编程语言的类型系统，为什么我要它呢？
*   如果我必须将数组中的数据类型修改为集合或映射，会发生什么情况？
*   那个前缀给了我什么？可以发音吗？

如果我们有一种被输入的语言，为什么我们要这个前缀？但是即使这种语言没有像 JavaScript 那样被输入。我们以变量的名义揭示了一个具体的实现，它把我们和一种数据联系起来。

也就是说，我们将数据类型或数据结构与要解决的业务逻辑概念或问题相结合。

这*没有*贡献任何东西！

相反，它使变量变得不可读，如果我们做了改进(使我们的代码适应新的数据类型),我们必须重新命名所有的代码。也就是说，*这个前缀是噪音。*

看看变量定义中的两个例子。作为开发人员，您真的有必要使用前缀来理解变量的内容吗？

```
const aCountries = [] 
const sName = ‘’
const dAmount = 3.2; const countries = [] 
const name = ‘’
const amount = 3.2;
```

# 对相同的变量类型使用相同的词汇

这个建议并不仅仅适用于团队工作，即使代码是单独生成的，也会出现这种情况。尤其是在我们软件开发职业生涯的初期。

对相同类型的数据使用相同的词汇。也就是说，如果我们需要检索一个*用户*或*客户端*的信息，我们不能不同地引用该用户或客户端。

也就是我们有时称之为*用户*，有时称之为*客户*，甚至称之为*客户端*。更严重的是，我们甚至在变量名后面加了一个后缀。

因此，必须定义在所有软件中使用的词汇表。当我们作为一个团队工作时，更重要的是这个定义。不能是一群开发人员用不同的名称来指代同一个概念。

下面的例子就说明了这一点，同样的概念，有三种不同的定义。必须始终决定始终使用相同的名称，不管是*用户*、*客户*还是*客户*但始终相同。

```
 getUserInfo();
getClientData();
getCustomerRecord(); getUser();
```

# 不要添加不必要的上下文

没有必要在变量名称的定义中添加类或包的上下文。

非常常见的是，在变量的名称中添加上下文，以了解该变量位于哪个工作空间中。

这是不必要的，事实上，当你阅读代码时，你会很快意识到，因为当理解这个概念时，你会发现不必要的冗余会给你带来麻烦。

在下面的例子中，我们有一个汽车的定义，它有三个基本属性和一个方法。在我们已经包含上下文的情况下，我们可以观察到单词`car`是如何不断重复的，并且没有贡献任何东西。

如果我们去掉(上下文)car 这个词，代码就完全理解了；事实上，由于我们消除了不必要的噪声，这一点更容易理解。

```
const Car = {
 carMake: ‘Honda’,
 carModel: ‘Accord’,
 carColor: ‘Blue’
};

function paintCar(car) {
 car.carColor = ‘Red’;
}  const Car = {
 make: ‘Honda’,
 model: ‘Accord’,
 color: ‘Blue’
};

function paint(car) {
 car.color = ‘Red’;
}
```

# 不要使用神奇的数字和字符串

当你编写代码时，你应该*永远不要*在源代码(硬代码)中写有数值的数字和文本串。

这些被称为幻数或幻链。那个数字是什么意思？我必须破译它吗？你意识到你让我在商业逻辑的焦点之外重新思考。

因此，这些幻数或幻链必须经常存储在常数中，这些常数的名称指定了幻数的意图。

因此，请记住，如果数字或文本字符串在变量或常量中没有给定的名称，那么它们在业务逻辑级别上的意义就会产生干扰。

下面的例子说明了一个数字的赋值是如何让我们思考这个数字的含义的。

此外，如果你写错了`*Adminitrator*` ，而不是写`Administrator`*，软件将会不知道为什么而停止正常工作，那么文本字符串是危险的。*

```
*// What the heck is 86400000 for?
setTimeout(blastOff, 86400000);
user.rol = “Administrator”; const MILLISECONDS_IN_A_DAY = 86400000;
const ADMINISTRATOR_ROL = “Administrator”;setTimeout(blastOff, MILLISECONDS_IN_A_DAY);
user.rol = ADMINISTRATOR_ROL;*
```

# *结论*

*在我们作为开发人员的第一步中，我们不会注意到变量的名称，因为通常情况下，我们开始单独开发脚本或代码。*

*我们的第一个应用程序是学习如何编程，一旦它们被制作出来，我们就再也不会使用它们了。因此，我们不需要阅读自己的源代码。*

*然而，当我们正在开发一个需要长时间维护或者由几个开发人员开发的软件应用程序时，这就是我们需要反复阅读源代码的时候。*

*这时，我们给变量起的名字会给我们一点质量和干净的代码。*

*在本帖中，我们回顾了选择变量名称时的一些基本要点。如果你正在学习编程，把它们写下来，因为它们会在将来为你节省很多精力。*

*如果你有很长的职业生涯，你会发现，很自然，你是通过不断地阅读代码得出这些结论的。*

*请记住，我们提出的要点如下:*

*   *使用透露意图的名字。*
*   *使用容易发音的名字。*
*   *不要在名称中使用变量的类型。*
*   *对相同的变量类型使用相同的词汇。*
*   *不要添加不必要的上下文。*
*   *不要使用神奇的数字和字符串。*