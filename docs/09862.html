<html>
<head>
<title>Assigning Data to NFT Tokens</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将数据分配给NFT令牌</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/assigning-data-to-nft-tokens-46865a3fde39?source=collection_archive---------5-----------------------#2021-10-22">https://betterprogramming.pub/assigning-data-to-nft-tokens-46865a3fde39?source=collection_archive---------5-----------------------#2021-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c90e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">元数据如何链接到NFT令牌，如何上传<code class="fe kf kg kh ki b">metadata.json</code>和pic到IPFS，等等</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/87618bb51dc0d3d807d3acd5b22e15c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QKthGXJ09XbCSEzF"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@tezos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Tezos </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2601" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当我第一次介绍<a class="ae kz" href="https://www.rotynski.dev/game-items-as-nfts/" rel="noopener ugc nofollow" target="_blank">游戏物品作为NFT代币</a>时，我们已经看到在铸造阶段有可能添加代币的<code class="fe kf kg kh ki b">tokenURI</code>。但是我从来没有合理的使用过。相反，我只是输入了一些无意义的值。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="fd56" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">令牌的<code class="fe kf kg kh ki b">metadataURI</code>是一种将一些数据分配给我们的游戏物品，并在我们想要的任何地方使用它的方式，即:</p><ul class=""><li id="1f33" class="ly lz iq lc b ld le lg lh lj ma ln mb lr mc lv md me mf mg bi translated">市场上</li><li id="c4b8" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">在游戏中</li></ul><h1 id="ab59" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">有意义的URI</h1><p id="51df" class="pw-post-body-paragraph la lb iq lc b ld ne jr lf lg nf ju li lj ng ll lm ln nh lp lq lr ni lt lu lv ij bi translated">根据<a class="ae kz" href="https://eips.ethereum.org/EIPS/eip-721" rel="noopener ugc nofollow" target="_blank">https://eips.ethereum.org/EIPS/eip-721</a>T3应该有以下字段:<code class="fe kf kg kh ki b">name</code>、<code class="fe kf kg kh ki b">description</code>和<code class="fe kf kg kh ki b">image</code>。</p><p id="4119" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">名称和描述是显而易见的，但图像字段可以是一个图像(如jpeg)或链接到另一个文件。然而，实现<code class="fe kf kg kh ki b"><a class="ae kz" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md#erc-1155-metadata-uri-json-schema" rel="noopener ugc nofollow" target="_blank">enjin</a></code>标准会更有用，因为它允许指定游戏物品的属性:)</p><p id="dc34" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="nj">注意:根据</em><a class="ae kz" href="https://docs.opensea.io/docs/metadata-standards#attributes" rel="noopener ugc nofollow" target="_blank"><em class="nj">opensea</em></a><em class="nj">的说法，这个项目最好的方式是将每个令牌的元数据扩展成OpenSea理解并在其UI上表示的特殊属性。</em></p><h1 id="5cda" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">它是如何工作的</h1><p id="e3fb" class="pw-post-body-paragraph la lb iq lc b ld ne jr lf lg nf ju li lj ng ll lm ln nh lp lq lr ni lt lu lv ij bi translated">每个NFT令牌都应该将<code class="fe kf kg kh ki b">tokenURI</code>设置为解析为<code class="fe kf kg kh ki b">metadata.json</code>文件的URL(通常是IPFS)。</p><p id="4c7c" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">IPFS可能是一个不错的选择，因为它的好处。不变性是一种特殊的特征，当它应该被交易时就会发光。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nk"><img src="../Images/3ee6426db14ef60cee283437459562e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s2mxe0KJtHU1XuNr.png"/></div></div></figure><h1 id="daf9" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">剑的属性</h1><p id="ea54" class="pw-post-body-paragraph la lb iq lc b ld ne jr lf lg nf ju li lj ng ll lm ln nh lp lq lr ni lt lu lv ij bi translated">如果我们回想一下剑的样子，最好在元数据中至少有4个字段。</p><ul class=""><li id="790b" class="ly lz iq lc b ld le lg lh lj ma ln mb lr mc lv md me mf mg bi translated">剑的形象</li><li id="1548" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">剑的水平</li><li id="2006" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">伤害(生命值)</li><li id="3d26" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">灵活</li></ul><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nl"><img src="../Images/5b0da43dcbcd04cf28bbb3efca230f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Gn6kFgwb4uCvspXP.png"/></div></div></figure><p id="7516" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">知道了这把剑的元数据之后:</p><p id="f2a8" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">伤害和敏捷都应该显示为进度条，等级只是一个数字。OpenSea UI使用的配置将如下所示:</p><p id="f188" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir">伤害</strong> : <code class="fe kf kg kh ki b">{trait_type: "Damage","value":25, "max_value": 100}</code> <br/> <strong class="lc ir">敏捷</strong> : <code class="fe kf kg kh ki b">{trait_type: "Agility","value":17, "max_value": 100}</code> <br/> <strong class="lc ir">等级</strong> : <code class="fe kf kg kh ki b">{trait_type: "Level", "value":1, "displa_type": number}</code></p><p id="b77f" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">因此，完整的元数据将如下所示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nm lx l"/></div></figure><p id="8ce0" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">由于有两个文件与令牌相关，我们需要将它们都上传到IPFS。由于<code class="fe kf kg kh ki b">metadata.json</code>链接到图像文件，上传的顺序是:</p><ol class=""><li id="d89c" class="ly lz iq lc b ld le lg lh lj ma ln mb lr mc lv nn me mf mg bi translated">上传图像文件并记下其路径</li><li id="2829" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv nn me mf mg bi translated">使用从点1开始的路径引用<code class="fe kf kg kh ki b">metadata.json</code>中的图像文件。</li><li id="d467" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv nn me mf mg bi translated">上传<code class="fe kf kg kh ki b">metadata.json</code>文件</li></ol><p id="ce87" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在<a class="ae kz" href="https://gateway.pinata.cloud/ipfs/QmP22uedqSAcbNqCzcXdnsEMfJr8QqjtTjX3zS71BkXfxx/metadata.json" rel="noopener ugc nofollow" target="_blank">上传ifps并钉住</a>(感谢pinata)后，看起来是这样的:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi no"><img src="../Images/29f4d61692d7d243be723dcac35a87a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OSnVCHK5jZX_HNbz.png"/></div></div></figure><p id="2679" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这两个文件都可以通过<code class="fe kf kg kh ki b">pinata.cloud gateway</code>来访问(该服务不帮助兼容的浏览器，并将<a class="ae kz" href="https://gateway.pinata.cloud/ipfs/QmP22uedqSAcbNqCzcXdnsEMfJr8QqjtTjX3zS71BkXfxx/sword-of-justice.png" rel="noopener ugc nofollow" target="_blank"> ipfs资源</a>视为常规资源)。这是<a class="ae kz" href="https://gateway.pinata.cloud/ipfs/QmP22uedqSAcbNqCzcXdnsEMfJr8QqjtTjX3zS71BkXfxx/sword-of-justice.png" rel="noopener ugc nofollow" target="_blank">正义之剑档案</a>。</p><h1 id="a668" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">将tokenUri分配给新生成的令牌的时间</h1><p id="881c" class="pw-post-body-paragraph la lb iq lc b ld ne jr lf lg nf ju li lj ng ll lm ln nh lp lq lr ni lt lu lv ij bi translated">这也很简单，我们可以使用<code class="fe kf kg kh ki b">etherscan</code>并使用元掩码登录。然后在创建时，我们将使用位于ipfs中的特定值<code class="fe kf kg kh ki b">metadata.json</code>(不是网关地址，因为这是不必要的，会导致单点故障)</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi np"><img src="../Images/72a3a9181c9807047ab3ff21d3df01a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8CxD1NOqnewsoMj0.png"/></div></div></figure><p id="1224" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如图所示，首先我们用metamask登录，然后使用mint函数，用我们的地址作为所有者，IPFS链接到<code class="fe kf kg kh ki b">metadata.json</code>(它本身链接到图像):</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f25d41c0ec1f19cf3e28959790e24c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/0*XO5uFuRpYUP07CVb.png"/></div></figure><p id="4d52" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">要快速查看如何在我们的以太网智能合约中创建新令牌，请观看以下视频:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="cbd5" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然而，这次需要使用ipfs URL，而不是上面视频中显示的无意义的值。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="848d" class="mm mn iq bd mo mp ny mr ms mt nz mv mw jw oa jx my jz ob ka na kc oc kd nc nd bi translated">让我们在OpenSea上测试一下</h1><p id="8fcf" class="pw-post-body-paragraph la lb iq lc b ld ne jr lf lg nf ju li lj ng ll lm ln nh lp lq lr ni lt lu lv ij bi translated">在登录到<code class="fe kf kg kh ki b">test.opensea.io</code> ( <em class="nj">在林克比测试网上，与合同及其令牌</em>相同)后，我们应该可以看到我们的NFT令牌的完整形状。</p><p id="9301" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它应该有一个名称和描述在<code class="fe kf kg kh ki b">metadata.json</code>，也有图像上传到IPFS。此外，您将看到如上所述的属性。</p><p id="2fba" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">登录后，它会显示在列表上。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi od"><img src="../Images/63df1d3628133cbd5e1675d2d19d10c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dMPZTUZOEAF0dioA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">令牌列表，其中第一个令牌刚刚铸造，并分配了所有参数</p></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/97498c30cf120af332db6f2bdeda02d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/0*gEG5XV6ObhLGXYHU.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">令牌属性在opensea ui上的呈现方式</p></figure><p id="75da" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们还可以看到OpenSea内部UI呈现的属性:</p><ul class=""><li id="1477" class="ly lz iq lc b ld le lg lh lj ma ln mb lr mc lv md me mf mg bi translated">等级(<em class="nj">1/1，后者来自于对所有其他等级的分析，因为只有一个等级，所以这就是</em></li><li id="d27d" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">灵活</li><li id="3bf9" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">损害</li></ul><h1 id="6bc0" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">总结</h1><p id="8bc7" class="pw-post-body-paragraph la lb iq lc b ld ne jr lf lg nf ju li lj ng ll lm ln nh lp lq lr ni lt lu lv ij bi translated">我们在这里讨论了</p><ul class=""><li id="a107" class="ly lz iq lc b ld le lg lh lj ma ln mb lr mc lv md me mf mg bi translated">元数据如何链接到NFT令牌</li><li id="da67" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">什么是元数据标准，OpenSea是如何使用它们的</li><li id="a431" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">如何上传<code class="fe kf kg kh ki b">metadata.json</code>和pic到IPFS</li><li id="787c" class="ly lz iq lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">属性丰富的令牌如何在OpenSea上呈现</li></ul></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="d7db" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="nj">原载于</em><a class="ae kz" href="https://rotynski.dev/assigning-data-to-nft-tokens/" rel="noopener ugc nofollow" target="_blank"><em class="nj">https://rotynski . dev</em></a></p></div></div>    
</body>
</html>