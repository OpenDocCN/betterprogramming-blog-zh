<html>
<head>
<title>3 Essential Decorators in Python You Need To Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你需要知道的Python中的3个基本装饰器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-essential-decorators-in-python-you-need-to-know-654650bd5c36?source=collection_archive---------2-----------------------#2021-10-19">https://betterprogramming.pub/3-essential-decorators-in-python-you-need-to-know-654650bd5c36?source=collection_archive---------2-----------------------#2021-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1561" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更擅长装饰</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d8280e6d7395df331d0c941c2e37d971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gXjd8zr5jOE8AjxS"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@tma?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">天一马</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="f51c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是室内设计师？</h1><p id="fdcf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在Python中，函数与常规对象没有什么不同，它们也是对象。这就是Python中的函数如此有用的原因，因为它们可以和decorators一起使用。</p><p id="9457" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">装饰器本质上是一个为传递给它的函数提供额外功能的函数。所以装饰器修改作为参数传递给自己的函数的行为。</p><p id="6e9c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">变复杂了？不要担心！装饰者只是函数。它们只是由<code class="fe ms mt mu mv b">'@’</code>符号指定，这只是语法上的糖。所以装修工都是由<code class="fe ms mt mu mv b">'@’</code>来装修的。:)</p><p id="bae3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">装饰者不一定是一个函数；也可以是一个类。或者它可以接受一个类作为参数。为了简单起见，我在这里只讨论函数装饰器。</p><h1 id="b776" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么要用装修工？</h1><p id="fdc0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当然是为了增加代码的可读性！此外，为了减少代码重复，如果有一些函数有类似的行为。</p><p id="d902" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是首先，让我们记住如何使用装饰器。</p><h1 id="673a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">装修工怎么用？</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="d35a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第1行— <code class="fe ms mt mu mv b">funtion_to_decorate</code>被传递给装饰器函数。</p><p id="cef8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第2行——我们将在<code class="fe ms mt mu mv b">wrapper</code>函数中构建我们的逻辑。</p><p id="180c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第3行— <code class="fe ms mt mu mv b">funtion_to_decorate()</code>被执行。</p><p id="3eef" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第4行— <code class="fe ms mt mu mv b">wrapper</code>函数返回。</p><p id="c7d1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我们准备看例子。</p><h1 id="dc1c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">1.执行计时器装饰器</h1><p id="0f86" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">你写了一个函数，想知道它需要多长时间。这可以使用以下代码实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="be77" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意，我们将带有<code class="fe ms mt mu mv b">*args</code>和<code class="fe ms mt mu mv b">**kwargs</code>的函数参数传递给包装器。并且不要忘记返回结果。</p><p id="e9c3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第4行—获取开始时间。</p><p id="cf38" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第5行—调用我们想要测量其运行时间的函数，并将返回值赋给一个变量。离开装饰器时返回这个值。</p><p id="e76f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第6行—用<code class="fe ms mt mu mv b">f-string</code>打印出经过的时间。</p><p id="ea38" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第7行—返回结果值。</p><p id="5545" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">就是这样！</p><p id="58dc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们测试我们的代码。</p><h2 id="c36e" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">例1 </strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="a352" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">结果</strong></h2><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="0f10" class="my la it mv b gy no np l nq nr">Elapsed time is 1.9073486328125e-06 ms</span></pre><h2 id="3d5f" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">例2 </strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="e82e" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">结果</strong></h2><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="d351" class="my la it mv b gy no np l nq nr">Elapsed time is 0.5003328323364258 ms<br/>Elapsed time is 1.0017611980438232 ms<br/>Elapsed time is 1.5045099258422852 ms<br/>Elapsed time is 2.003535747528076 ms</span></pre><p id="d456" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">最后值得一提的是:在装饰函数中使用<code class="fe ms mt mu mv b">f-string</code>提高了代码的可读性。<a class="ae ky" href="https://medium.com/r?url=https%3A%2F%2Fpython.plainenglish.io%2Fget-better-at-python-f-strings-83b123bb4ce0" rel="noopener">我用Python写了一篇关于<code class="fe ms mt mu mv b">f-string</code> s的文章</a>，所以你可能想看看。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="dee4" class="kz la it bd lb lc nz le lf lg oa li lj jz ob ka ll kc oc kd ln kf od kg lp lq bi translated">2.伐木装饰工</h1><p id="ca6e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">logger decorator显示了可以写入的函数名和相应的时间戳值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="cfaf" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">例子</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="c49b" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">结果</strong></h2><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="4717" class="my la it mv b gy no np l nq nr">_________________________<br/>Run on: 2021-10-15 23:21:57<br/>shutdown<br/>System shutdown<br/>_________________________<br/>_________________________<br/>Run on: 2021-10-15 23:21:57<br/>restart<br/>System restarts<br/>_________________________</span></pre><h1 id="50a8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">3.HTML生成器装饰器</h1><p id="3d2e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">人们说HTML不是编程语言。但是Python是！迄今为止最强的语言之一。</p><p id="e812" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以用decorators创建一个HTML生成器。</p><p id="20db" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们试着用一个装饰器写下面一行:</p><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="af00" class="my la it mv b gy no np l nq nr">&lt;h1&gt;I love Python&lt;/h1&gt;</span></pre><p id="7a29" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它有两个部分:</p><ul class=""><li id="427a" class="oe of it lt b lu mn lx mo ma og me oh mi oi mm oj ok ol om bi translated"><strong class="lt iu"> HTML标签</strong>:也就是<code class="fe ms mt mu mv b">&lt;h1&gt;</code></li><li id="290e" class="oe of it lt b lu on lx oo ma op me oq mi or mm oj ok ol om bi translated"><strong class="lt iu">内文</strong>:即<code class="fe ms mt mu mv b">I love Python</code></li></ul><p id="895e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请记住，我们刚刚创建的所有装饰器都为函数赋予了功能。这时，我们需要给出两个功能:一个是HTML标签，另一个是内部文本。所以这次新的装饰器将由两个包装函数组成。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="a97e" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">示例</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="2746" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">结果</strong></h2><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="bce0" class="my la it mv b gy no np l nq nr">&lt;div&gt;I love Python&lt;/div&gt;<br/>&lt;i&gt;I love Python&lt;/i&gt;</span></pre><p id="0299" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">可以使用多个装饰器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="b320" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated"><strong class="ak">结果</strong></h2><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="67f5" class="my la it mv b gy no np l nq nr">&lt;div&gt;&lt;p&gt;I love Python&lt;/p&gt;&lt;/div&gt;</span></pre><h1 id="6fcf" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">奖金装饰者</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="438b" class="my la it bd lb mz na dn lf nb nc dp lj ma nd ne ll me nf ng ln mi nh ni lp nj bi translated">结果</h2><pre class="kj kk kl km gt nk mv nl nm aw nn bi"><span id="c4ec" class="my la it mv b gy no np l nq nr">#################################<br/>Thank you for reading my article<br/>#################################</span></pre></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="c623" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你喜欢你所读到的，看看下面这个故事:</p><div class="os ot gp gr ou ov"><a href="https://levelup.gitconnected.com/5-powerful-python-one-liners-you-should-know-469b9c4737c7" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">您应该知道的5个强大的Python一行程序</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">如果没有map()函数和理解，我真不知道该怎么办。</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj ks ov"/></div></div></a></div></div></div>    
</body>
</html>