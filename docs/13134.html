<html>
<head>
<title>Build a Dapp Using Next.js, Typescript, Wagmi, and the Coinbase Wallet SDK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Next.js、Typescript、Wagmi和比特币基地钱包SDK构建一个Dapp</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/onboarding-new-users-with-coinbase-wallet-790784ac8821?source=collection_archive---------9-----------------------#2022-08-01">https://betterprogramming.pub/onboarding-new-users-with-coinbase-wallet-790784ac8821?source=collection_archive---------9-----------------------#2022-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1337" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">比特币基地钱包新用户入职</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f43e25d4ae11725776f1b033f753c5d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4y3VUC9_wJTTdi_tUkU9A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">封面图像</p></figure><h1 id="746d" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">介绍</h1><p id="4f6a" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Web3代表了互联网发展中激动人心的一章。区块链提供的原语将导致无限数量的应用程序和用例。我们已经看到ico、DeFi、NFTs和点对点支付系统的爆炸式增长。然而，在大规模采用这项新技术之前，我们还有很长的路要走。用户体验仍然是一个欠缺的领域。</p><p id="e894" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">作为web3开发者，当普通人不理解诸如非保管加密钱包或签名交易等概念时，我们应该如何加入下一波用户？本文将探讨这个问题，并提供一个解决方案来帮助创建更好的用户体验。我们将看一个真实的例子，展示我们如何使用<a class="ae mo" href="https://docs.cloud.coinbase.com/wallet-sdk/docs/welcome" rel="noopener ugc nofollow" target="_blank">比特币基地钱包SDK </a>为新用户创造无缝的入职体验。</p><h1 id="81c5" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">现实世界的问题</h1><p id="6102" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">web3中最有趣的概念之一是医疗保健和区块链技术的交叉。HIPAA合规性意味着患者记录可能不应该放在公共区块链上。然而，我们还有成百上千的其他方法可以利用区块链来革新医疗保健部门。</p><p id="0bd9" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">医疗保健工作者(HCW)在任何医疗保健机构工作之前，必须花费超过六周的时间接受审查和核实。医院系统的时间和收入损失是巨大的。一个可信的第三方进行认证验证，背景调查等连续数周，而HCW没有支付，医院系统必须找到一个临时工来填补空缺。这是一个区块链能够解决的问题。有了区块链不变性，认证一旦被验证，就再也不会发生了。</p><h1 id="ecd3" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">Web3解决方案</h1><p id="ec0e" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">为了解决这个问题，我想构建一个名为Health Verify (HV)的认证验证dapp，如果成功验证了HCW证书，它就会生成一个NFT。这个解决方案有很多不同的路径可以走:<a class="ae mo" href="https://en.wikipedia.org/wiki/Zero-knowledge_proof" rel="noopener ugc nofollow" target="_blank"> ZK证明</a>保证匿名，用<a class="ae mo" href="https://www.arweave.org/" rel="noopener ugc nofollow" target="_blank"> Arweave </a>或者<a class="ae mo" href="https://ceramic.network/" rel="noopener ugc nofollow" target="_blank">陶瓷</a>作为所有验证过的证书的卖点，等等。在我看来，一切都取决于首次使用crypto的用户的入门质量。</p><p id="f0a6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">因为用户需要一个钱包浏览器扩展来与web3应用程序交互，所以对于不熟悉该技术的人应该有所考虑。仅仅看到一个“连接钱包”按钮，没有什么背景，可能会给人一种令人生畏的第一印象，所以我们希望事情尽可能顺利。</p><p id="7b68" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><a class="ae mo" href="https://docs.cloud.coinbase.com/wallet-sdk/docs/welcome" rel="noopener ugc nofollow" target="_blank">比特币基地钱包</a>是为数不多的钱包之一，如果用户还没有安装钱包扩展，它可以提供入职体验。使用这个钱包是有意义的，因为比特币基地在web3中是一个受信任的名字，并为新用户提供了一个安全的入口，同时允许现有用户轻松连接到我的dapp。</p><p id="98c8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在本文的其余部分，我们将重点构建健康验证dapp的第一部分。我们将创建入职页面并集成比特币基地钱包SDK，使用户可以轻松连接现有钱包或创建新钱包。</p><h1 id="406a" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">该项目</h1><p id="3162" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">所以让我们开始把所有的事情都联系起来。React是当前构建dapps的库，我首选的健康验证库包括:</p><ul class=""><li id="757d" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated"><a class="ae mo" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a> —理想的React生产框架</li><li id="a086" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated"><a class="ae mo" href="https://wagmi.sh/" rel="noopener ugc nofollow" target="_blank"> Wagmi钩子</a>——React钩子的集合，包含开始使用以太坊所需的一切</li><li id="aefa" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated"><a class="ae mo" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura RPC provider </a> —高度可用的以太坊API</li><li id="acff" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated"><a class="ae mo" href="https://docs.cloud.coinbase.com/wallet-sdk/docs/welcome" rel="noopener ugc nofollow" target="_blank">比特币基地钱包SDK</a>——比特币基地钱包SDK(前身为WalletLink)允许开发者在移动网络(iOS和Android)和桌面上将其dapps连接到比特币基地钱包</li><li id="9841" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated"><a class="ae mo" href="https://chakra-ui.com/" rel="noopener ugc nofollow" target="_blank"> Chakra UI </a> —一个简单的、模块化的、可访问的组件库，为您提供构建React应用程序所需的构件</li></ul><p id="d649" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">至于特性，本文的范围如下:</p><ul class=""><li id="5e33" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated">入职:允许HCW在没有钱包的情况下注册。</li><li id="67f4" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated">验证:HCW从支持的认证列表中选择，提交一些信息，然后将其发送到服务器进行人工验证。验证完成后，会发布一个NFT。</li></ul><p id="a56d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">对于本文，我们将只为这个工作流的提交部分构建一个简单的接口，包括比特币基地钱包入职流程。</p><h1 id="19af" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">履行</h1><p id="5432" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><strong class="lp ir">注:</strong>如果你愿意，可以在这里查看代码库<a class="ae mo" href="https://github.com/teeolendo/health-verify" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0e54" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">好吧，但是时间到了！Next.js自问世以来一直是React生态系统的宠儿。就我个人而言，我喜欢不与React路由器打交道，所以当我开始任何React项目时，它都是我的首选。对于Health Verify，我们将从安装Next.js和Chakra UI开始。我在本文中使用Typescript，但是您也可以使用Javascript，一切都应该是一样的，没有所有的打字样板。</p><h2 id="1e72" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤1:安装Next.js</h2><ul class=""><li id="37ce" class="mp mq iq lp b lq lr lt lu lw np ma nq me nr mi mu mv mw mx bi translated">转到您的终端，键入以下命令:</li></ul><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="1ba9" class="nd kw iq nt b gy nx ny l nz oa">npx create-next-app@latest --typescript</span></pre><ul class=""><li id="05cd" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated">按照提示输入应用程序名称。如果一切顺利，那么您应该有一个全新的Next.js安装。</li></ul><h2 id="bf24" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤2:安装和配置Chakra用户界面</h2><p id="b80b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这些年来，我已经使用了许多不同的UI库，但是我还没有发现任何关于UI元素设计的非固执己见的东西，同时拥有如此惊人的开发者体验。所以我强烈推荐Chakra UI库。</p><ul class=""><li id="e913" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated">在终端中导航到您在步骤1中创建的项目文件夹，并运行以下命令:</li></ul><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="b225" class="nd kw iq nt b gy nx ny l nz oa">yarn add @chakra-ui/react @emotion/react@^11 @emotion/styled@^11 framer-motion@^6</span></pre><ul class=""><li id="6ac5" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated">导入Chakra UI提供程序，并将其添加到<code class="fe ob oc od nt b">_app.tsx</code>文件中。在这个阶段，<code class="fe ob oc od nt b">_app.tsx</code>应该如下所示:</li></ul><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="2519" class="nd kw iq nt b gy nx ny l nz oa">import type { AppProps } from "next/app"<br/>import { ChakraProvider } from "@chakra-ui/react"</span><span id="eac3" class="nd kw iq nt b gy oe ny l nz oa">function MyApp({ Component, pageProps }: AppProps) {<br/>    return (<br/>        &lt;ChakraProvider&gt;<br/>            &lt;Component {...pageProps} /&gt;<br/>        &lt;/ChakraProvider&gt;<br/>    );<br/>}</span><span id="1152" class="nd kw iq nt b gy oe ny l nz oa">export default MyApp;</span></pre><h2 id="95bf" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">第三步:安装比特币基地钱包SDK和Wagmi挂钩</h2><p id="2861" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">通过运行以下命令安装比特币基地钱包SDK和Wagmi挂钩:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="c588" class="nd kw iq nt b gy nx ny l nz oa">yarn add @coinbase/wallet-sdk wagmi ethers</span></pre><p id="e499" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><strong class="lp ir">注意</strong> : Ethers是Wagmi依赖。</p><h2 id="cba6" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤4:获取一个Infura ID</h2><p id="c384" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Infura的以太坊高可用性API将帮助我们开始使用Health Verify。我们正在为比特币基地钱包配置一个备份提供程序，用于不使用注入提供程序的请求。这一步是可选的。你可以按照这个指南开始运行一个Infura项目。</p><p id="5454" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">一旦你有了你的信息ID，通过添加下面的键来编辑<code class="fe ob oc od nt b">.env.local</code>:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="5e84" class="nd kw iq nt b gy nx ny l nz oa">REACT_APP_INFURA_ID=xxxxxxIDHERE*******</span></pre><h2 id="676d" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤5:配置Wagmi和比特币基地SDK</h2><p id="1819" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们可以主要通过连接器实现比特币基地钱包SDK和Wagmi之间的集成。连接器是提供者的包装器，既可以被注入，也可以来自保管或非保管钱包。Wagmi内置了对比特币基地钱包的支持，这使得整合变得轻而易举。</p><ul class=""><li id="bd47" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated">在项目的根目录下创建一个文件，并将其命名为<code class="fe ob oc od nt b">connectors.ts</code>。这个可以放在任何地方。我把我的放在项目根目录下的<code class="fe ob oc od nt b">utils</code>文件夹中。</li><li id="8802" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated">我选择支持Metamask以及Health Verify，因为它有助于我的测试，也为一些用户提供了一种替代方法。</li></ul><p id="bcae" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><a class="ae mo" href="https://github.com/teeolendo/health-verify/blob/main/utils/connectors.ts" rel="noopener ugc nofollow" target="_blank">连接器. ts </a></p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="d142" class="nd kw iq nt b gy nx ny l nz oa">import { CoinbaseWalletConnector } from 'wagmi/connectors/coinbaseWallet'<br/>import { MetaMaskConnector } from 'wagmi/connectors/metaMask'<br/>import { chain } from 'wagmi'</span><span id="5126" class="nd kw iq nt b gy oe ny l nz oa">const APP_NAME = 'Health Verify'<br/>const APP_LOGO_URL = 'https://ethereum.org/static/a110735dade3f354a46fc2446cd52476/f3a29/eth-home-iconwebp'</span><span id="a7d7" class="nd kw iq nt b gy oe ny l nz oa">export const connectors = [<br/>    new CoinbaseWalletConnector({<br/>        chains: [chain.mainnet],<br/>        options: {<br/>            appName: APP_NAME,<br/>            appLogoURL: APP_LOGO_URL,<br/>    }}),<br/>    new MetaMaskConnector({<br/>        chains: [chain.mainnet],<br/>        options: {<br/>            shimChainChangedDisconnect: false,<br/>        },<br/>    }),<br/>]</span></pre><h2 id="cc54" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤6:配置Wagmi挂钩</h2><p id="7446" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我喜欢Wagmi Hooks库的简单性。你所需要做的就是把你的应用程序包装在WagmiConfig组件中，然后你就可以在你的dapp上使用React钩子了。就是这样。对于健康验证，我必须以下列方式编辑<code class="fe ob oc od nt b">_app.tsx</code>:</p><ul class=""><li id="4308" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated">从Wagmi库导入Wagmi钩子提供程序、<code class="fe ob oc od nt b"><a class="ae mo" href="https://wagmi.sh/docs/client" rel="noopener ugc nofollow" target="_blank">createClient</a></code>、<code class="fe ob oc od nt b"><a class="ae mo" href="https://wagmi.sh/docs/providers/configuring-chains" rel="noopener ugc nofollow" target="_blank">configureChains</a></code>、链对象。你可以在Wagmi文档<a class="ae mo" href="https://wagmi.sh/docs/" rel="noopener ugc nofollow" target="_blank">这里</a>阅读他们都做了什么。</li><li id="059c" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated">用您在步骤4中创建的Infura ID初始化一个变量。</li><li id="9686" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated">使用<code class="fe ob oc od nt b">configureChains</code>创建一个提供者。在这个阶段，您还可以传递一组受支持的链。我用的是mainnet和polygon。注意:您可以在步骤5中创建的<code class="fe ob oc od nt b">Connector</code>对象中配置支持的链。</li></ul><p id="094a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在这一步结束时，您的<code class="fe ob oc od nt b">_app.tsx</code>文件应该如下所示:</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="f6af" class="nd kw iq nt b gy nx ny l nz oa">import type { AppProps } from 'next/app'<br/>import { providers } from 'ethers'<br/>import {ChakraProvider } from '@chakra-ui/react'<br/>import { WagmiConfig, createClient, configureChains, chain } from 'wagmi'<br/>import { connectors } from '../utils/connectors'<br/>import { infuraProvider } from 'wagmi/providers/infura'</span><span id="e37d" class="nd kw iq nt b gy oe ny l nz oa">const infuraId = process.env.REACT_APP_INFURA_ID<br/>const { provider } = configureChains(<br/>    [chain.mainnet, chain.polygon],<br/>    [infuraProvider({ infuraId })],<br/>)</span><span id="ba9e" class="nd kw iq nt b gy oe ny l nz oa">const client = createClient({<br/>    connectors,<br/>    provider,<br/>})</span><span id="ad77" class="nd kw iq nt b gy oe ny l nz oa">function MyApp({ Component, pageProps }: AppProps) {<br/>    return (<br/>        &lt;ChakraProvider&gt;<br/>            &lt;WagmiConfig client={client}&gt;<br/>                &lt;Component {...pageProps} /&gt;<br/>            &lt;/WagmiConfig&gt;<br/>        &lt;/ChakraProvider&gt;<br/>    )<br/>}</span><span id="f06c" class="nd kw iq nt b gy oe ny l nz oa">export default MyApp</span></pre><p id="6d4b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在这之后，您可以通过运行<code class="fe ob oc od nt b">yarn dev</code>来启动您的Next.js实例。但是，如果您这样做了，您将会看到样本Next.js主页。让我们解决这个问题。</p><h2 id="635b" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤7:连接钱包模式</h2><p id="e3ee" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在是有趣的部分。我不会关注我将使用的特定Chakra UI元素，但我会关注我们需要使用的几个很酷的Wagmi挂钩，以便构建一个响应钱包连接状态的动态UI。</p><ul class=""><li id="c33d" class="mp mq iq lp b lq mj lt mk lw mr ma ms me mt mi mu mv mw mx bi translated"><code class="fe ob oc od nt b">useAccount</code> -用于访问连接的账户。我们可以基于这个二进制值来切换UI状态。</li><li id="01b3" class="mp mq iq lp b lq my lt mz lw na ma nb me nc mi mu mv mw mx bi translated"><code class="fe ob oc od nt b">useConnect</code> -用于使用已配置的连接器访问账户。</li></ul><p id="82cf" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">对于Connect Wallet模式，我们正在加载之前配置的连接器，并向用户显示支持的Wallet选项。这一切都凑在一起了——上蜡，下蜡。</p><p id="b5da" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><a class="ae mo" href="https://github.com/teeolendo/health-verify/blob/main/components/SelectWalletModal.tsx" rel="noopener ugc nofollow" target="_blank">选择WalletModal.tsx </a></p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="6f38" class="nd kw iq nt b gy nx ny l nz oa">import {<br/>    VStack,<br/>    HStack,<br/>    Modal,<br/>    ModalOverlay,<br/>    ModalContent,<br/>    ModalHeader,<br/>    ModalBody,<br/>    ModalCloseButton,<br/>    Button,<br/>    Text,<br/>    Image,<br/>} from '@chakra-ui/react'<br/>import { useConnect } from 'wagmi'</span><span id="00dc" class="nd kw iq nt b gy oe ny l nz oa">export type SelectWalletModalProps = {<br/>    isOpen: boolean;<br/>    closeModal: () =&gt; coid;<br/>}</span><span id="c706" class="nd kw iq nt b gy oe ny l nz oa">export default function SelectWalletModal({<br/>    isopen,<br/>    closeModal,<br/>}: SelectWalletModalProps) {<br/>    const { data } = useConnect();<br/>    const {<br/>        activeConnector,<br/>        connect,<br/>        connectors,<br/>        error,<br/>        isConnecting,<br/>        pendingConnector,<br/>    } = uesConnect();</span><span id="aa62" class="nd kw iq nt b gy oe ny l nz oa">    return (<br/>        &lt;Modal isOpen={isOpen} onClose={closeModal} isCentered&gt;<br/>            &lt;ModalOverlay /&gt;<br/>            &lt;ModalContent w='300px'&gt;<br/>                &lt;ModalHeader&gt;Select Wallet&lt;/ModalHeader&gt;<br/>                &lt;ModalCloseButton<br/>                    _focus={{<br/>                        boxShadow: 'none',<br/>                    }}<br/>                /&gt;<br/>                &lt;ModalBody paddingBottom='1.5rem'&gt;<br/>                    &lt;VStack&gt;<br/>                        {activateConnector &amp;&amp; &lt;div&gt;Connected to {activeConnector.name}&lt;/div&gt;}<br/>                        {connectors.map((connector) =&gt; (<br/>                            &lt;Button<br/>                                variant='outline'<br/>                                key={connector.id}<br/>                                disabled={!connector.ready}<br/>                                onClick={() =&gt; {<br/>                                    connect(connector);<br/>                                    closeModal();<br/>                                }}<br/>                                w='100%'<br/>                            &gt;<br/>                                &lt;HStack w='100%' justifyContent='center'&gt;<br/>                                  &lt;Image<br/>                                    width={26}<br/>                                    height={26}<br/>                                    borderRadius="3px"<br/>                                    src={walletIcons(connector.name)}<br/>                                    alt={"Wallet"}<br/>                                    &gt;&lt;/Image&gt;<br/>                                  &lt;Text&gt;<br/>                                    {connector.name}{" "}<br/>                                    {isConnecting &amp;&amp;<br/>                                    pendingConnector?.id === connector.id &amp;&amp;<br/>                                    " (connecting)"}<br/>                                   &lt;/Text&gt;<br/>                             &lt;/Button&gt;<br/>                        ))}<br/>                        {error &amp;&amp; &lt;Text&gt;(error.message)&lt;/Text&gt;}<br/>                    &lt;/VStack&gt;<br/>                &lt;/ModalBody&gt;<br/>            &lt;/ModalContent&gt;<br/>        &lt;/Modal&gt;<br/>    );<br/>}</span></pre><h2 id="4944" class="nd kw iq bd kx ne nf dn lb ng nh dp lf lw ni nj lh ma nk nl lj me nm nn ll no bi translated">步骤8:主页用户界面</h2><p id="17f3" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">对于Health Verify，我想要的UX是用户访问主页，看到一些副本，以及提示用户选择钱包的行动号召。如果他们没有钱包，那么他们可以快速轻松地创建一个。</p><p id="4cad" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">使用比特币基地钱包SDK的最大好处是，如果用户没有钱包，他或她仍然可以获得无缝的登录体验，并且是绿色的。我们已经做了很多工作，所以让我们通过组装一个漂亮的UI来把它带回家。</p><p id="02d2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><a class="ae mo" href="https://github.com/teeolendo/health-verify/blob/main/pages/index.tsx" rel="noopener ugc nofollow" target="_blank"> index.tsx </a></p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="bf42" class="nd kw iq nt b gy nx ny l nz oa">import {<br/>    Flex,<br/>    Box,<br/>    Text,<br/>    Button,<br/>    Container,<br/>    Heading,<br/>    Stack,<br/>    ListItem,<br/>    UnorderedList,<br/>    useDisclosure, } from '@chakra-ui/react'<br/>import type { NextPage } from 'next'<br/>import Head from 'next/head'</span><span id="1bac" class="nd kw iq nt b gy oe ny l nz oa">import { useAccount, useConnect } from 'wagmi'<br/>import SelectWalletModal from '../components/SelectWalletModal'<br/>import { Certifications } from '../components/certifications'</span><span id="290f" class="nd kw iq nt b gy oe ny l nz oa">const Home: NextPage = () =&gt; {<br/>    const { data: account } = useAccount()<br/>    const { isOpen, onOpen, onClose } = useDisclosure()</span><span id="8257" class="nd kw iq nt b gy oe ny l nz oa">    return (<br/>        &lt;&gt;<br/>            &lt;Head&gt;<br/>                &lt;title&gt;Health Verify&lt;/title&gt;<br/>                &lt;meta<br/>                    name='Health Verify'<br/>                    content='Health Verify remembers your certifications'<br/>                /&gt;<br/>                &lt;link rel='icon' href='/facivon.ico' /&gt;<br/>            &lt;/Head&gt;<br/>            &lt;Flex alignItems='center' justifyContent='center'&gt;<br/>                {account ? &lt;Certifications/&gt; : (<br/>                    &lt;Container maxW={'3x1'}&gt;<br/>                        &lt;Stack<br/>                            as={Box}<br/>                            textAlign={'center'}<br/>                            spacing={{ base: 8, md: 14 }}<br/>                            py={{ base: 20, md: 36 }}<br/>                        &gt;<br/>                        &lt;Heading<br/>                            fontWeight={600}<br/>                            fontSize={{ base: '2x1', sm: '4x1', md: '6x1' }}<br/>                            lineHeight={'110%'}<br/>                        &gt;<br/>                            Never verify your health certifications &lt;br /&gt;<br/>                            &lt;Text as={'span'} color={'green.400'}&gt;<br/>                                AGAIN<br/>                            &lt;/Text&gt;<br/>                        &lt;/Heading&gt;<br/>                        &lt;Text fontSize={'2x1'}&gt;<br/>                            With Health Verify, you can easily verify your health certifications by following the steps below.<br/>                        &lt;/Text&gt;<br/>                        &lt;UnorderedList listStyleType='none'&gt;<br/>                            &lt;ListItem&gt;{`Click 'Start' to connect your wallet.`}&lt;/ListItem&gt;<br/>                &lt;ListItem&gt;{`If you don't have a wallet, create a Coinbase Wallet by selecting Coinbase Wallet`}&lt;/ListItem&gt;<br/>                            &lt;ListItem&gt;Select a certification to verify&lt;/ListItem&gt;<br/>                            &lt;ListItem&gt;Enter your Certification ID&lt;/ListItem&gt;<br/>                            &lt;ListItem&gt;<br/>                                Wait for our team to verify your certification<br/>                            &lt;/ListItem&gt;<br/>                        &lt;/UnorderedList&gt;<br/>                        &lt;Stack<br/>                            direction={'column'}<br/>                            spacing={3}<br/>                            align={'center'}<br/>                            position={'relative'}<br/>                        &gt;<br/>                            &lt;Button<br/>                                colorScheme={'green'}<br/>                                bg={'green.400'}<br/>                                rounded={'full'}<br/>                                onClick={onOpen}<br/>                                px={6}<br/>                                _hover={{<br/>                                    bg: 'green.500',<br/>                                }}<br/>                            &gt;<br/>                                Start<br/>                            &lt;/Button&gt;<br/>                        &lt;/Stack&gt;<br/>                        &lt;/Stack&gt;<br/>                    &lt;/Container&gt;<br/>                )}<br/>            &lt;/Flex&gt;<br/>            &lt;SelectWalletModal isopen={isOpen} closeModal={onClose} /&gt;<br/>        &lt;/&gt;<br/>    );<br/>}</span></pre><p id="c453" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在，如果你很感兴趣，你会注意到我们只需要一个钩子就能让一切顺利进行。这也是Wagmi这么牛逼的另一个原因。我们可以非常容易地开始使用钩子，而不需要为RPC或契约交互编写大量的样板文件。Wagmi有更多的钩子，我鼓励任何人去看看。</p><p id="ee5c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在我们有了自己的用户界面，我们可以把所有的东西都放在一起。让我们启动应用程序，看看我们渲染的应用程序是什么样子的。如果您正确配置了所有内容，那么您的主页应该如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/c913cb1de150c66094e28b56c5961a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vGAo_qm7Ry8YFOKZ.png"/></div></div></figure><p id="e1d0" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">当你点击<strong class="lp ir">开始</strong>时，应该会弹出如下的连接钱包模式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/7470d0570e1976dd1244eb11345949cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*raP6FUn828PDH3ER.png"/></div></div></figure><p id="188c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">选择“比特币基地钱包”，如果你配置正确，它应该显示比特币基地钱包SDK“安装”对话框，允许用户注册他们的手机或安装比特币基地钱包。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/6d16fab3d5d7d56c9e9b098d259de916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VVMzdcQRmXPksLbb.png"/></div></div></figure><p id="cfe8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果用户选择“<strong class="lp ir">安装</strong>，系统将提示他们安装比特币基地钱包浏览器扩展，并引导他们完成最终设置。这正是我们希望新接触crypto的用户体验。现在，我们可以搭载全新的用户，我们可以继续构建健康验证。</p><h1 id="bcf3" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="a11c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Web3引入的技术无疑将增强我们数字生活的许多领域。我们仅处于开发的早期阶段，但用例及应用已经在增长。然而，为了达到更广泛的采用，用户体验需要改善。</p><p id="e6af" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在本文中，我们回顾了如何使用Next.js、Typescript、Wagmi和比特币基地钱包SDK构建Dapp。通过一点点配置，我们能够为新的加密用户提供出色的用户体验。现在，我们可以进一步构建运行状况验证。</p></div></div>    
</body>
</html>