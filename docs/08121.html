<html>
<head>
<title>How To Check and Change the Collation of MySQL Tables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何检查和更改MySQL表的排序规则</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-check-and-change-the-collation-of-mysql-tables-6095fada0ebd?source=collection_archive---------5-----------------------#2021-03-29">https://betterprogramming.pub/how-to-check-and-change-the-collation-of-mysql-tables-6095fada0ebd?source=collection_archive---------5-----------------------#2021-03-29</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7e36" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">了解在数据库中配置排序规则的重要性</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e30e84974c5105e9b34b3b686c0b31c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TpBp4N6hVq-niUt7"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@seffen99" rel="noopener ugc nofollow" target="_blank">斯文·布兰德斯马</a>在<a class="ae kz" href="https://unsplash.com/photos/6Uf-1Ozbvho" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="92d4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">根据我们希望存储在数据库中的数据，通常的做法是相应地调整表的排序规则，以避免任何不必要的行为。</p><p id="806e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本文中，我们将介绍数据库中的排序规则，并讨论相应地配置表的排序规则的重要性。此外，我们将探索一些方法来检查MySQL(或MariaDB)中的表的排序。最后，我们将展示如何更改表的排序规则。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="5fff" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">什么是数据库中的排序规则，为什么它很重要？</h1><p id="9246" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">归类是一组明确定义如何对字符串进行比较和排序的规则。例如，这些规则可以指示字符是否应该区分大小写，或者字母中的重音是否重要(例如，是否应该将“a”视为独立于“o”的字符)。</p><p id="33a9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">根据希望存储在表中的数据来配置排序规则是很重要的。有各种非英语语言有相当奇怪的规则(例如，两个字符被认为是一个字母，等等。)，所以如果必须处理这样的数据，就必须相应地调整表的排序规则。如果您忽略此步骤，则某些查询可能会返回意外和/或不正确的结果。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="ab29" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">如何检查MySQL/MariaDB表的排序规则</h1><p id="a60b" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated"><code class="fe na nb nc nd b">INFORMATION_SCHEMA</code>是一个数据库，提供对数据库中各表的元数据的访问。可以从<code class="fe na nb nc nd b">INFORMATION_SCHEMA.TABLES</code>表中获取表的排序，如下所示(假设我们的表叫做<code class="fe na nb nc nd b">t_name</code>):</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="47c8" class="ni me iu nd b gz nj nk l nl nm">SELECT TABLE_SCHEMA<br/>    , TABLE_NAME<br/>    , TABLE_COLLATION <br/>FROM INFORMATION_SCHEMA.TABLES<br/>WHERE TABLE_NAME = 't_name';</span></pre><p id="4549" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">输出将类似于下面显示的内容:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="c576" class="ni me iu nd b gz nj nk l nl nm">+--------------+------------+-----------------+<br/>| TABLE_SCHEMA | TABLE_NAME | TABLE_COLLATION |<br/>+--------------+------------+-----------------+<br/>| mysql        | user       | utf8_bin        |<br/>+--------------+------------+-----------------+</span><span id="6311" class="ni me iu nd b gz nn nk l nl nm">1 row in set (0.00 sec)</span></pre><p id="9719" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是请注意，排序规则可能应用于特定的列，这意味着一个表可以有不同排序规则的列。如果您想要检查特定列的排序规则，可以从<code class="fe na nb nc nd b">INFORMATION_SCHEMA.COLUMNS</code>中获取这段元数据。以下查询应该会给您提供所需的信息:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="1ba1" class="ni me iu nd b gz nj nk l nl nm">SELECT TABLE_NAME <br/>    , COLUMN_NAME <br/>    , COLLATION_NAME <br/>FROM INFORMATION_SCHEMA.COLUMNS<br/>WHERE TABLE_NAME = 't_name';</span></pre><p id="cd1f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，输出将分别显示每个列的排序规则:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="a554" class="ni me iu nd b gz nj nk l nl nm">+------------+--------------------------+------------------+<br/>| TABLE_NAME | COLUMN_NAME              | COLLATION_NAME   |<br/>+------------+--------------------------+------------------+<br/>| user       | Host                     | ascii_general_ci |<br/>| user       | User                     | utf8_bin         |<br/>| user       | Select_priv              | utf8_general_ci  |<br/>| user       | Insert_priv              | utf8_general_ci  |<br/>| user       | Update_priv              | utf8_general_ci  |<br/>| user       | Delete_priv              | utf8_general_ci  |<br/>| user       | Create_priv              | utf8_general_ci  |<br/>| user       | Drop_priv                | utf8_general_ci  |<br/>| user       | Reload_priv              | utf8_general_ci  |<br/>| user       | Shutdown_priv            | utf8_general_ci  |<br/>| user       | Process_priv             | utf8_general_ci  |<br/>| user       | File_priv                | utf8_general_ci  |<br/>| user       | Grant_priv               | utf8_general_ci  |<br/>......<br/>+------------+--------------------------+------------------+</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="e516" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">如何更改数据库、表或列的排序规则</h1><p id="4c51" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">现在，如果您想更改整个数据库的排序规则，可以运行下面的查询:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="f4ba" class="ni me iu nd b gz nj nk l nl nm">ALTER DATABASE mydb CHARACTER SET utf8mb4 COLLATE utf8mb4;</span></pre><p id="9de7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">同样，要更改特定表的排序规则:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="f864" class="ni me iu nd b gz nj nk l nl nm">ALTER TABLE t_name CONVERT TO CHARACTER SET utf8;</span></pre><p id="81a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于单个列:</p><pre class="kk kl km kn gu ne nd nf ng aw nh bi"><span id="4265" class="ni me iu nd b gz nj nk l nl nm">ALTER TABLE t_name MODIFY c_name VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;</span></pre></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="c50c" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="06d7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在本文中，我们讨论了MySQL表的排序及其重要性。此外，我们探索了检查表的排序规则的各种方法，并展示了如何更改它。相应地配置表的排序规则是非常重要的，这样才能以正确的方式处理数据，而不会导致任何不必要的行为。</p></div></div>    
</body>
</html>