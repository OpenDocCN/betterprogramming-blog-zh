<html>
<head>
<title>How to Create Your Xcode Cloud Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建您的Xcode云工作流程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-your-xcode-cloud-workflow-cd03816bedb8?source=collection_archive---------12-----------------------#2022-11-23">https://betterprogramming.pub/how-to-create-your-xcode-cloud-workflow-cd03816bedb8?source=collection_archive---------12-----------------------#2022-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fd99" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Xcode Cloud在GitHub上发布每个新版本的App Store Connect版本</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c52bba0c302ac4bb9369f1f9ef62395e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nqH6ho7UFTuLa487QVCGZg.jpeg"/></div></div></figure><p id="657e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大型项目的一个常见问题是，人们不知道哪个提交实际上是为了在App Store上发布。</p><p id="b4a1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">也许你在制作之前的版本时很匆忙，忘记在GitHub中标记它了？或者甚至忘记合并您正在处理的分支，这样发布代码就不在主分支中了？</p><p id="7674" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在分析错误报告和避免重复工作时，知道哪个代码在发布中是至关重要的。CI/CD是这个问题的一个解决方案。通过将部署应用程序的过程转移到GitHub，您可以保持良好的分支和发布标记策略。</p><p id="6e40" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Xcode Cloud是苹果平台开发者在应用中利用持续集成和交付(CI/CD)的绝佳机会。通过Xcode 14向所有Apple开发人员提供，并完全内置于Xcode中——为您的应用程序项目配置CI/CD再简单不过了。</p><h1 id="b237" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">配置项目</h1><p id="1536" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在Xcode Cloud中创建工作流之前，我们需要确保项目中的一切都设置正确。提前正确配置一切可以消除云中意外的构建失败。</p><h2 id="456b" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated"><strong class="ak"> 1。确保目标</strong>的方案已共享且存档已启用</h2><p id="6232" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">大多数项目可能已经在这里正确配置了。您想要构建的方案需要对Xcode Cloud可用，并且目标需要启用<code class="fe mw mx my mz b">Archive</code>选项(在构建中)。</p><p id="be70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">只是为了确保它是，选择编辑方案(<code class="fe mw mx my mz b">⌘ + ;</code>)，看看一切是否看起来不错。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/71e97daf07c0ab93d3db41f7a1022de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnTU1K_XOyywRmIn8Ftw9g.jpeg"/></div></div></figure><h2 id="d184" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated"><strong class="ak"> 2。让Xcode云可以使用依赖关系</strong></h2><p id="9892" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">最简单的方法是使用Swift包，这几乎不需要额外的配置。</p><p id="2e92" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您只需要批准您在<code class="fe mw mx my mz b">$filename.xcodeproj/project.workspace/xcshareddata/swiftpm/Package.resolved</code>的<code class="fe mw mx my mz b">Package.resolved</code>文件在您的Git存储库中是可用的。</p><p id="357e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Xcode Cloud使用此文件而不是自动包解析来解析SPM依赖关系。请注意，该文件可能会在您项目的<code class="fe mw mx my mz b">.gitignore</code>中被忽略。</p><p id="dbe9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您的项目依赖于私有SPM依赖项，Xcode Cloud中的构建将会失败，但会给出如何在构建日志中提供依赖项的说明。</p><p id="042d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Xcode Cloud也可以解析来自CocoaPods或Carthage的依赖项，但这需要额外的设置，超出了本文的范围。如果你感兴趣，可以看看苹果关于审查第三方依赖关系的伟大<a class="ae nb" href="https://developer.apple.com/documentation/xcode/making-dependencies-available-to-xcode-cloud#Review-third-party-dependencies" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="5bcb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">创建工作流</h1><p id="19e7" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">现在，您已经准备好为您的项目创建工作流了。</p><p id="0292" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">转到报告导航器(⌘ + 9)，在云选项卡下按<code class="fe mw mx my mz b">Get Started…</code>。如果您已经创建了一个工作流，您可以右击目标并选择<code class="fe mw mx my mz b">Manage Workflows…</code>来创建一个新的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/304e1610c78d89b80b4dbe016c269532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmToqkNXa1qit2kPIRTqJw.jpeg"/></div></div></figure><p id="8c24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Xcode将指导您创建新的工作流程，从选择您想要使用的目标开始。大多数配置都在“检查工作流”页面上完成。按下纸张底部的<code class="fe mw mx my mz b">Edit Workflow…</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/69811975c1e1ccec6b105b207104075d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IlGGUVX76oNxHZP-PnEWWQ.png"/></div></div></figure><p id="36d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要在新版本上为App Store Connect构建新的应用程序，您需要更改三项设置。</p><h2 id="6c1f" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated"><strong class="ak"> 1。环境</strong></h2><p id="f01f" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在环境设置中，启用<code class="fe mw mx my mz b">Clean</code>选项从头开始构建每个部署。这是Xcode Cloud为发布而构建时的要求。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/58e789346b0f2f7caba15c257168a541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5BCdcmWe2RZIxJRfo92d8A.jpeg"/></div></div></figure><h2 id="c0eb" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated"><strong class="ak"> 2。开始条件</strong></h2><p id="a685" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">添加一个基于<code class="fe mw mx my mz b">Tag Changes</code>的新开始条件，删除一个基于分支的开始条件。您甚至可以进一步配置开始条件，例如，要求用某个标记(例如<code class="fe mw mx my mz b">Release</code>)来标记提交。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/9733672d08e01e146f04348eac7906d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PqN_tIoo8xfBe_XNJB308Q.jpeg"/></div></div></figure><h2 id="1e1a" class="mk lo iq bd lp ml mm dn lt mn mo dp lx la mp mq lz le mr ms mb li mt mu md mv bi translated">3.档案馆</h2><p id="1e6a" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在存档设置中，您要选择<code class="fe mw mx my mz b">App Store</code>作为部署准备。如果您启用了试飞，您可以在创建工作流程后在此选择试飞备选方案。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/77f6bd0b7b91d4c9423bd486df3b67ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J2A15ThAgVCZfKeok2JlWw.jpeg"/></div></div></figure><p id="1c2e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按save，进入下一步，授予访问权限，并将工作流连接到GitHub存储库。</p><h1 id="6df7" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="60c0" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">恭喜你。就这样，你用Xcode Cloud在你的app项目上设置了CI/CD。每当您在GitHub中创建新的标记版本时，Xcode Cloud都会调用并构建您的应用程序的新版本，您可以在App Store Connect中管理该版本。</p></div></div>    
</body>
</html>