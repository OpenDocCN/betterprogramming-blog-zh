<html>
<head>
<title>Intro to MLB-StatsAPI — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MLB-StatsAPI简介—第二部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/intro-to-mlb-stats-api-part-2-f47564651d01?source=collection_archive---------18-----------------------#2019-09-26">https://betterprogramming.pub/intro-to-mlb-stats-api-part-2-f47564651d01?source=collection_archive---------18-----------------------#2019-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8e18" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">向您展示了如何使用几个新的API调用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d9d0e1bb183b2bb46af7dc2efbd44c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hIVNTKNMANN3bJMZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">上图:克利夫兰印第安人队三垒手何塞·拉米雷斯</p></figure><p id="2f0e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上周，我给了大家一些关于使用<a class="ae lu" href="https://pypi.org/project/MLB-StatsAPI/" rel="noopener ugc nofollow" target="_blank"> MLB-StatsAPI </a>收集每日最新棒球数据的见解。</p><p id="ee89" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过这样做，我对使用这个给我带来麻烦已经有一段时间了的API变得更加适应了。有趣的是，在深入研究这些查询后，我意识到这并不像看起来那么难。</p><p id="697b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你熟悉了一些球队/球员的参数，你就可以直观地理解剩下的了。因为我非常喜欢使用这个API，所以我决定开始为我使用该API的不同功能和查询编写一份每周操作指南。</p><p id="4eac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你还没有读过我在这个系列中的第一篇博客<a class="ae lu" href="https://medium.com/better-programming/using-the-mlb-stats-api-to-get-daily-data-88f48266656c" rel="noopener"> <em class="lv">使用MLB-StatsAPI获取每日数据</em> </a>，请随意查看，给你一点入门知识。</p><p id="1011" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上周，我向您展示了如何编写查询来提取数据，如联盟领先的击球手，以及现场分区和外卡排名。</p><p id="c0a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本周，我将向您展示如何使用几个新的API调用，您将在下面看到。如果您需要帮助安装包或实例化类，请参考我的上一篇博客。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b638" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">statsapi.lookup_team()</h1><p id="8ab6" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这将返回给定输入的团队数据。返回的数据将包括:<code class="fe na nb nc nd b">id</code>、<code class="fe na nb nc nd b">teamCode</code>、<code class="fe na nb nc nd b">fileCode</code>、<code class="fe na nb nc nd b">teamName</code>、<code class="fe na nb nc nd b">locationName</code>、<code class="fe na nb nc nd b">shortName</code>。看看下面纽约扬基队的例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/4f32327f206de42b46df8f17f6c77f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*e0sxNe3t5csA5OqLasUGZA.png"/></div></figure><p id="42bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它看起来不多，但在这个输出中有相当数量的价值。</p><p id="6cd6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用和理解团队ID将为您在API中打开新的大门。举个简单的例子，你也可以只根据他们的ID来查找团队，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/2e02c18b43ff74b66d20c38b3a0bcb1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*pwzUnNjfs18RimxehNsHXw.png"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="984f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">statsapi . lookup _ player()</strong></h1><p id="6873" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这种查找与上面的类似，除了您可以更深入地查看单个球员的数据。看看下面Bryce Harper的球员数据输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/99060d77cef48469572dea89b5b4e2c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*ztwt8ve6wtiQHfbIj-faxA.png"/></div></figure><p id="07b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如您所见，在这个输出字典中有大量可用的键值对。再次强调,<code class="fe na nb nc nd b">id</code>键非常有用。</p><p id="2bff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不过这种查找有多种用途。假设我们想从每个姓Ramirez的活跃玩家那里获取玩家数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4a29c45a77e65b6e2dc102c51cb9434b.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*cHWBp5LK0XCPGjIP-9lzvg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">姓氏为“拉米雷斯”的玩家的输出预览</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/945f26a1150b4b763f684848ec8ac6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*3hG9k0I45WbyuQiH2-ftgg.png"/></div></figure><p id="fa1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面，您可以从Bryce Harper查询中看到类似的预期输出。</p><p id="9484" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为这篇博文的输出太大，所以我简单地检查了返回的词典列表的长度。如你所见，MLB有九个叫Ramirez的活跃玩家。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2e4f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">用这些可以做什么？</h1><p id="ce0a" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这是博客的要点，人们可能会问:“那么，我们可以收集单个球员和球队的数据，现在怎么办？”</p><p id="eddf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">答案取决于你。在此基础上，你决定自己的创造力。但是为了帮助你开动脑筋，我给你举个小例子。</p><p id="1fbc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看这个赛季哪个叫拉米雷斯的球员最活跃。为此，我编写了几个助手函数。第一个是收集给定名字的每个玩家的玩家id。</p><p id="88e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出是与输入名称相关联的玩家id的方便列表。见下文。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/b5af4ff8771e35fb09dafed16d162185.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*Sj2qFDv_yvZ4G_poEPCYEA.png"/></div></figure><p id="962e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二个辅助函数使用<code class="fe na nb nc nd b">get_player_ids</code>函数从给定玩家的ID中找到相关的统计数据(您可以选择击球、投球或防守)，然后将每个输出字典放入一个列表中。</p><p id="8a66" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我返回了一个<a class="ae lu" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>数据帧，它将所有数据组合成一个很好的可用格式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/d2b023429e9619f3e185e91e45ea974f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdrNC7jD7k2KF71b9dFlww.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/bdb9c6b079ca3e9a223bb31eb34aec3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*jfUeROKKGcFe53NpyMtQcQ.png"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ffa3" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">最终输出</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/410b064b31c9b6b810e30205c475c54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*q9FQE7WN07C3QH6ZdXq36w.png"/></div></figure><p id="e368" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看最后的输出，似乎何塞和哈罗德·拉米雷斯是拉米雷斯组中仅有的两个2019日常首发。</p><p id="b11b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要注意的是，在这个最终输出中只有七个玩家。如果你还没有猜到，这是由于两名名叫拉米雷斯的球员没有2019年的击球统计数据，所以他们没有被包括在输出中。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9428" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="7126" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这就结束了本周的博客，解释了MLB-StatsAPI的几个额外用途。</p><p id="0283" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我真心希望你能在本周学到一些新技术，并把这些带到你的下一个项目中。下周当我深入探究使用API的复杂性时，请务必回来查看。</p><p id="18c8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一如既往，任何反馈都是受欢迎的，我喜欢收到读者的反馈！</p></div></div>    
</body>
</html>