<html>
<head>
<title>iOS 13 Multiselection Gestures in TableView and CollectionView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">表格视图和集合视图中的iOS 13多选手势</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ios-13-multi-selection-gestures-in-tableview-and-collectionview-619d515eef16?source=collection_archive---------14-----------------------#2019-11-18">https://betterprogramming.pub/ios-13-multi-selection-gestures-in-tableview-and-collectionview-619d515eef16?source=collection_archive---------14-----------------------#2019-11-18</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="516a" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用新的委托方法加速项目选择</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/5655efa7f1338c861853ea32c5ef5ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I8ChgT4jW68Wg2HjDGf8KQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由<a class="ae kz" href="https://pixabay.com/users/qimono-1962238/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1872665" rel="noopener ugc nofollow" target="_blank"> Arek Socha </a>在<a class="ae kz" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1872665" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="b10b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">WWDC 2019在桌面上引入了一些有趣的新功能，同时增强了一些旧功能。虽然SwiftUI以其构建用户界面的直观方式震撼了社区，但在cells上引入了带有两个平移手势的多重选择，以加速用户的选择过程。</p><p id="1d12" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过使用新引入的委托方法和属性<code class="fe lw lx ly lz b">CollectionView</code>和<code class="fe lw lx ly lz b">TableView</code>，我们可以加快用户选择项目的过程。</p><h2 id="29a5" class="ma mb iu bd mc md me dn mf mg mh dp mi lj mj mk ml ln mm mn mo lr mp mq mr ms bi translated">我们的目标</h2><ul class=""><li id="0232" class="mt mu iu lc b ld mv lg mw lj mx ln my lr mz lv na nb nc nd bi translated">了解多重选择在<code class="fe lw lx ly lz b">TableView</code>和<code class="fe lw lx ly lz b">CollectionView</code>中是如何工作的</li><li id="1472" class="mt mu iu lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated">实现iOS 13新功能，从<code class="fe lw lx ly lz b">TableView</code>中删除一批选择</li></ul></div><div class="ab cl nj nk hy nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="in io ip iq ir"><h1 id="9605" class="nq mb iu bd mc nr ns nt mf nu nv nw mi ka nx kb ml kd ny ke mo kg nz kh mr oa bi translated">使用两个平移手势进行多重选择</h1><p id="43d4" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj ob ll lm ln oc lp lq lr od lt lu lv in bi translated">iOS 13的<code class="fe lw lx ly lz b">TableViews</code>和<code class="fe lw lx ly lz b">CollectionViews</code>为项目的多重选择提供了双指平移手势。一旦视图识别出手势，它就启用编辑模式。用户甚至不需要点击编辑模式，因为手势会自动将视图置于编辑模式。</p><p id="decf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，多选不必是连续的。用户可以在某一点停止选择，并从<code class="fe lw lx ly lz b">TableView</code>或<code class="fe lw lx ly lz b">CollectionView</code>中的另一点开始手势。下图显示了它的工作原理。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oe"><img src="../Images/885365f2b28e020b61170154250401e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*F-zPVDMEgx7RNizQt1oT6A.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://developer.apple.com/documentation/uikit/uitableviewdelegate/selecting_multiple_items_with_a_two-finger_pan_gesture" rel="noopener ugc nofollow" target="_blank">来自苹果文档</a></p></figure><p id="95a2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了支持<code class="fe lw lx ly lz b">TableView</code>中的多项选择，需要启用<code class="fe lw lx ly lz b">allowsMultipleSelectionDuringEditing</code>属性。此外，需要实现以下新的可选委托方法:</p><ul class=""><li id="8502" class="mt mu iu lc b ld le lg lh lj of ln og lr oh lv na nb nc nd bi translated"><code class="fe lw lx ly lz b">didBeginMultipleSelectionInteractionAt</code></li><li id="99f8" class="mt mu iu lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated"><code class="fe lw lx ly lz b">shouldBeginMultipleSelectionInteractionAt</code></li><li id="69e5" class="mt mu iu lc b ld ne lg nf lj ng ln nh lr ni lv na nb nc nd bi translated"><code class="fe lw lx ly lz b">tableViewDidEndMultipleSelectionInteraction</code></li></ul><p id="bc92" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">双指平移手势还允许单指多选/取消选择一组已经选定的项目。</p></div><div class="ab cl nj nk hy nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="in io ip iq ir"><h1 id="9d3d" class="nq mb iu bd mc nr ns nt mf nu nv nw mi ka nx kb ml kd ny ke mo kg nz kh mr oa bi translated">在TableView中实现多选</h1><p id="4c32" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj ob ll lm ln oc lp lq lr od lt lu lv in bi translated">首先，创建一个新的Xcode项目。</p><p id="bdc5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码演示了一个在编辑模式下使用多指选择的<code class="fe lw lx ly lz b">TableView</code>示例，以及一个删除所选项的选项。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi oj l"/></div></figure><p id="da57" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的代码中，在<code class="fe lw lx ly lz b">didBeginMultipleSelectionInteractionAt</code>内部启用了编辑模式以标记多个选择。</p><p id="95a9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在用户标记编辑完成后，<code class="fe lw lx ly lz b">setEditing</code>处理该情况。在我们的例子中，我们从<code class="fe lw lx ly lz b">TableView</code>中删除了所选项目的数组。</p><p id="899c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">作为回报，我们在模拟器中得到iOS应用程序的如下结果。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ok"><img src="../Images/8541f979dadedecea0ad5c8f3be57fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/1*_2KQzTFzt1cinwuybNTl9g.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">实际应用中的一个例子</p></figure><p id="fd00" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">若要在模拟器上模拟手势，请按住option和shift键拖移触控板。</p><p id="a01a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">等效的委托方法也适用于<code class="fe lw lx ly lz b">CollectionView</code>。</p></div><div class="ab cl nj nk hy nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="in io ip iq ir"><h1 id="416f" class="nq mb iu bd mc nr ns nt mf nu nv nw mi ka nx kb ml kd ny ke mo kg nz kh mr oa bi translated">结论</h1><p id="57ab" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj ob ll lm ln oc lp lq lr od lt lu lv in bi translated">所以我们在一个<code class="fe lw lx ly lz b">TableView</code>上实现了新的iOS 13双指手势多选。苹果旨在通过这一功能加快用户对多个项目的选择。上述实现的源代码可以在这个<a class="ae kz" href="https://github.com/anupamchugh/iowncode/tree/master/iOS13TableViewAndCollectionView" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中找到</p><p id="5b74" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">iOS 13还引入了其他值得注意的UIKit新增功能，比如<code class="fe lw lx ly lz b">CollectionViews</code>中的复合布局。我们将在下一篇文章中讨论这个问题。敬请期待！</p><p id="1974" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一次到此为止。我希望你喜欢阅读。</p></div></div>    
</body>
</html>