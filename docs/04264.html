<html>
<head>
<title>How to Quickly Authenticate Users With Ruby on Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Ruby on Rails快速认证用户</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-quickly-authenticate-users-with-ruby-on-rails-c55471308641?source=collection_archive---------17-----------------------#2020-04-01">https://betterprogramming.pub/how-to-quickly-authenticate-users-with-ruby-on-rails-c55471308641?source=collection_archive---------17-----------------------#2020-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d678" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用基本身份验证</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ccaf7ca0b5810cc41edff1d5e95656f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QV7Q2OBKIfQwSyZz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lucabravo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢卡·布拉沃</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="8015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些情况下，您可能需要对某些页面进行授权，以便未经授权的客户端无法访问它们。在Ruby on Rails应用程序中可以使用许多授权方法。</p><p id="b876" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将提到一个非常简单(但不太著名)的方法，它已经实现，并且可以在每次创建新的Rails应用程序时使用。</p><p id="1852" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">ActionController::HttpAuthentication::Basic</code>有一个叫做<code class="fe lv lw lx ly b">http_basic_authenticate_with</code>的方法，你通常需要在你的控制器的顶部调用它。</p><p id="5c05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/rails/rails" rel="noopener ugc nofollow" target="_blank"> Rails </a>是一个开源框架，所以我们很庆幸能够看到<a class="ae ky" href="http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic/ControllerMethods/ClassMethods.html" rel="noopener ugc nofollow" target="_blank">的实现</a>以及通过这种方法完成的工作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="adf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们举一个<code class="fe lv lw lx ly b">DocumentsController</code>的例子。我有两个呈现视图的方法。我想向任何人显示文档列表，不管他们是否已经通过验证。</p><p id="8d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想将修改文档的权限仅限于经过授权的用户。也就是说，他们知道我一开始设置的可以使用的名字和密码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="dddd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我当然应该使用在配置文件中设置的参数化值，但是为了这个例子的目的，我在调用这个方法的时候使用实际值。</p><p id="c22b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，我知道这并不太难找到，但它只用于这篇文章，也许还有一些祖母。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="fdd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一行代码调用了保护您的文档不被您不想要的人修改的方法。这真的很棒，而且省时，所以你不必自己写所有的东西。</p><p id="7ee6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您需要对许多控制器进行这种类型的授权，那么您可以简单地在<code class="fe lv lw lx ly b">ApplicationController</code>声明它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="61bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是为您的应用程序使用这种非常易于使用的授权方式所需要做的全部工作。</p><p id="3aaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html" rel="noopener ugc nofollow" target="_blank">在这里，您可以查看这个Rails模块中包含的其他方法</a>。</p><p id="cc8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>