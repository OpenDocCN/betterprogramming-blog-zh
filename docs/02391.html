<html>
<head>
<title>What’s New in the iOS 13 Search Bar?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 13搜索栏有什么新功能？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/whats-new-in-the-ios-13-search-bar-f87c1e47f8d0?source=collection_archive---------2-----------------------#2019-11-27">https://betterprogramming.pub/whats-new-in-the-ios-13-search-bar-f87c1e47f8d0?source=collection_archive---------2-----------------------#2019-11-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="243c" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">UISearchBarController和UIKit中的增强功能</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4c8b110af539eb5d551ed0c271af23cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mr--OfRQScst95GQ"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@joaosilas?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔·塞拉斯</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6e1e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在每一个WWDC版本中，苹果都发布了大量的改进和要求，以使用户界面现代化，从而允许构建更好的应用程序。2019年WWDC也不例外。</p><p id="386d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">除了引人注目的SwiftUI之外，苹果还在搜索栏中引入了不少新功能。在我们深入研究它们之前，让我们快速浏览一下<code class="fe lw lx ly lz b">UISearchBarController</code>的搜索栏。</p><p id="5284" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">搜索栏主要由三部分组成:</p><ul class=""><li id="e0f7" class="ma mb iu lc b ld le lg lh lj mc ln md lr me lv mf mg mh mi bi translated">文本字段。</li><li id="8ca5" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">取消按钮。</li><li id="ae9f" class="ma mb iu lc b ld mj lg mk lj ml ln mm lr mn lv mf mg mh mi bi translated">范围栏。</li></ul><p id="ccd2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如下所示，设置一个简单的<code class="fe lw lx ly lz b">UISearchBarController</code>既快速又简单:</p><pre class="kk kl km kn gu mo lz mp mq aw mr bi"><span id="91e6" class="ms mt iu lz b gz mu mv l mw mx">let search = UISearchController(searchResultsController: nil)</span><span id="03c4" class="ms mt iu lz b gz my mv l mw mx">search.obscuresBackgroundDuringPresentation = false</span><span id="be3a" class="ms mt iu lz b gz my mv l mw mx">search.searchBar.placeholder = "Type something here..."</span><span id="cc9a" class="ms mt iu lz b gz my mv l mw mx">search.searchBar.scopeButtonTitles = ["Title", "Genre", "Rating", "Actor"]</span><span id="c07b" class="ms mt iu lz b gz my mv l mw mx">navigationItem.searchController = search</span></pre><p id="22cd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">点击搜索栏，取消按钮和范围栏显示在<code class="fe lw lx ly lz b">UISearchTextField</code>附近，如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mz"><img src="../Images/049ff93323f8c1e8b88c1b79cc6f8ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bx1cZ5HB5XFgzjVWSZXSvg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">我的应用程序中的随机截屏。</p></figure><p id="7bee" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">iOS 13允许我们通过引入和展示一些新的好东西来以相当多的方式定制我们的<code class="fe lw lx ly lz b">UISearchBarController</code>。让我们逐一介绍一下。</p></div><div class="ab cl na nb hy nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="in io ip iq ir"><h1 id="ead8" class="nh mt iu bd ni nj nk nl nm nn no np nq ka nr kb ns kd nt ke nu kg nv kh nw nx bi translated">公开搜索文本字段属性</h1><p id="ff86" class="pw-post-body-paragraph la lb iu lc b ld ny jv lf lg nz jy li lj oa ll lm ln ob lp lq lr oc lt lu lv in bi translated">在iOS 12之前，<code class="fe lw lx ly lz b">searchTextField</code>属性无法访问，因此无法进行定制。随着iOS 13的到来，苹果决定在其API中公开<code class="fe lw lx ly lz b">SearchTextField</code>属性:</p><pre class="kk kl km kn gu mo lz mp mq aw mr bi"><span id="52a6" class="ms mt iu lz b gz mu mv l mw mx">let textField = search.searchBar.searchTextField</span></pre><p id="0809" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在可以定制背景颜色、字体以及<code class="fe lw lx ly lz b">searchTextField</code>上的几乎任何东西来满足我们的需求。</p><pre class="kk kl km kn gu mo lz mp mq aw mr bi"><span id="fdf9" class="ms mt iu lz b gz mu mv l mw mx">textField.textColor = .white</span><span id="bc66" class="ms mt iu lz b gz my mv l mw mx">textField.backgroundColor = .systemPink</span><span id="4748" class="ms mt iu lz b gz my mv l mw mx">textField.font = UIFont.boldSystemFont(ofSize: 14)</span></pre></div><div class="ab cl na nb hy nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="in io ip iq ir"><h1 id="03a6" class="nh mt iu bd ni nj nk nl nm nn no np nq ka nr kb ns kd nt ke nu kg nv kh nw nx bi translated">访问UISearchController的属性</h1><p id="85e0" class="pw-post-body-paragraph la lb iu lc b ld ny jv lf lg nz jy li lj oa ll lm ln ob lp lq lr oc lt lu lv in bi translated">在iOS 12之前，<code class="fe lw lx ly lz b">UISearchController</code>总是在<code class="fe lw lx ly lz b">SearchTextField</code>活动时显示取消按钮和范围栏(如果定义的话)。</p><p id="139c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">从iOS 13开始，我们可以通过调用下面几行代码来选择不在搜索栏上自动显示这些UI组件:</p><pre class="kk kl km kn gu mo lz mp mq aw mr bi"><span id="03d0" class="ms mt iu lz b gz mu mv l mw mx">search.automaticallyShowsCancelButton = false</span><span id="aeb6" class="ms mt iu lz b gz my mv l mw mx">search.automaticallyShowsScopeBar = false</span><span id="1a73" class="ms mt iu lz b gz my mv l mw mx">search.showsSearchResultsController = true</span></pre><p id="5cc1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，iOS 13允许我们在搜索栏被激活后立即显示搜索结果控制器。</p><p id="723d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一点目前在iOS 13及以上设备的邮件应用中已经有了。此外，开发人员可以利用这一点来定制搜索过滤器，从而使其在视觉上吸引用户。</p></div><div class="ab cl na nb hy nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="in io ip iq ir"><h1 id="a7f4" class="nh mt iu bd ni nj nk nl nm nn no np nq ka nr kb ns kd nt ke nu kg nv kh nw nx bi translated">搜索令牌</h1><p id="fc31" class="pw-post-body-paragraph la lb iu lc b ld ny jv lf lg nz jy li lj oa ll lm ln ob lp lq lr oc lt lu lv in bi translated">搜索令牌是iOS 13中引入的新类别。它是<code class="fe lw lx ly lz b">NSObject</code>的子类，允许用文本和图标以丰富的方式表示查询。</p><p id="62f6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">iOS 13中升级后的Photos应用使用了这个新的搜索令牌API。</p><p id="8da5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">虽然搜索标记支持复制粘贴和拖放，但它们总是在文本字段中输入的文本之前。</p><p id="689f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下代码显示了如何创建一个带有额外自定义的搜索令牌。</p><pre class="kk kl km kn gu mo lz mp mq aw mr bi"><span id="4edd" class="ms mt iu lz b gz mu mv l mw mx">let iosToken = UISearchToken(icon: UIImage(systemName: "tag"), text: "iOS")</span><span id="be14" class="ms mt iu lz b gz my mv l mw mx">let shopToken = UISearchToken(icon: UIImage(systemName: "cart.fill"), text: "Shop")</span><span id="0ce7" class="ms mt iu lz b gz my mv l mw mx">search.searchBar.searchTextField.insertToken(iosToken, at: 0)<br/>search.searchBar.searchTextField.insertToken(shopToken, at: 1)</span><span id="e506" class="ms mt iu lz b gz my mv l mw mx">search.searchBar.searchTextField.tokenBackgroundColor = .systemYellow</span></pre><p id="3159" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，我们可以选择禁止复制和删除搜索令牌。为此，需要调用以下属性:</p><pre class="kk kl km kn gu mo lz mp mq aw mr bi"><span id="fa30" class="ms mt iu lz b gz mu mv l mw mx">searchBar.searchTextField.allowsCopyingTokens = false searchBar.searchTextField.allowsDeletingTokens = false</span><span id="aad0" class="ms mt iu lz b gz my mv l mw mx">searchBar.searchTextField.clearButtonMode = .never</span></pre><p id="846d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意:如果<code class="fe lw lx ly lz b">UISearchTextField</code>中有清除按钮，禁用<code class="fe lw lx ly lz b">allowsDeletingTokens</code>不起作用。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj od"><img src="../Images/09a8f700025001f28df7770b38f78d64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*jguM6MEAZy3qJGJ_Ghd9eA.png"/></div></figure></div><div class="ab cl na nb hy nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="in io ip iq ir"><h1 id="e606" class="nh mt iu bd ni nj nk nl nm nn no np nq ka nr kb ns kd nt ke nu kg nv kh nw nx bi translated">还有更多</h1><p id="54cb" class="pw-post-body-paragraph la lb iu lc b ld ny jv lf lg nz jy li lj oa ll lm ln ob lp lq lr oc lt lu lv in bi translated">除了<code class="fe lw lx ly lz b">UISearchBarController</code>之外，苹果还引入了不少增强功能来更新iOS 13及以上版本的用户界面。随着默认视图控制器呈现方式的改变，Apple旨在促进iOS应用程序中模态表的使用。</p><p id="4e8b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在今年重要的UI公告中，苹果要求所有在2020年4月之后使用iOS 13 SDK提交的应用程序都必须指定一个启动故事板。仅使用启动图像提交应用程序将不再可能。</p><p id="2335" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是WhatsApp和Instagram等流行的社交网络应用程序已经做到的事情。(您是否注意到那些应用程序中带有徽标的新启动屏幕？)</p><p id="a0be" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这一个到此为止。我希望你喜欢阅读。</p></div></div>    
</body>
</html>