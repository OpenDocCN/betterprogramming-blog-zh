<html>
<head>
<title>Translate Any Retro Game on the Fly With Google Cloud AI and Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌云人工智能即时翻译任何复古游戏并运行</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/translate-any-retro-game-on-the-fly-with-google-cloud-ai-and-go-c0692ab40547?source=collection_archive---------6-----------------------#2022-07-22">https://betterprogramming.pub/translate-any-retro-game-on-the-fly-with-google-cloud-ai-and-go-c0692ab40547?source=collection_archive---------6-----------------------#2022-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cd6a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">追忆经典游戏？这是给你的指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5558a6ddc4e043673e5495d6c2683bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*90Sv8FuDbc9WE0qT"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">维维安娜·里什在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1abb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢玩复古游戏，尤其是老RPG，你可能已经经历过发现这个令人敬畏的老日本RPG的高潮和低谷，你现在拼命想玩，但立即意识到它从未被翻译成英语，你只是带着你的希望破灭了。</p><p id="efa2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢谷歌云人工智能服务，这已经成为历史！</p><p id="2ce2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用谷歌云视觉和谷歌翻译API，我组装了一个名为<a class="ae kv" href="https://github.com/bquenin/interpreter" rel="noopener ugc nofollow" target="_blank">解释器</a>的小型Go应用程序，它可以将屏幕上的任何内容翻译成你喜欢的语言。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ls"><img src="../Images/8458ead80f2e4732493324e32a9c3c1d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*t2lCIkldBS45iBK_W00ntA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带翻译的实时字幕</p></figure><h1 id="51a7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">它是如何工作的？</h1><p id="8d38" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这个过程其实很简单:</p><ul class=""><li id="fefa" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">给我们要翻译的窗口截图</li><li id="ce95" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">使用谷歌视觉从其中提取任何文本</li><li id="ee6f" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">用谷歌翻译翻译一下</li><li id="f50b" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">在屏幕上作为字幕显示出来</li></ul><h1 id="61dc" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">截图</strong></h1><p id="e8eb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">为了截取特定窗口的截图，我不得不写了一个名为<a class="ae kv" href="https://github.com/bquenin/captured" rel="noopener ugc nofollow" target="_blank">的小库captured </a>。它只是截取了一个特定窗口的屏幕截图:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4f88" class="nj lu iq nf b gy nk nl l nm nn">// Capture window<br/>screenshot, err := captured.CaptureWindowByTitle(a.windowTitle, captured.<em class="no">CropTitle</em>)<br/>if err != nil {<br/>   log.Fatal().Err(err).Send()<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/7cea247f7d6a29dea5559df9ea8ac1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l0qg9R78yo-FPi6xhCdyBQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">游戏截图</p></figure><h1 id="3593" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">从截图中提取文本</strong></h1><p id="f9eb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">一旦你有了一张图片，你就可以把它发送到谷歌云视觉，从中提取任何文本:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d894" class="nj lu iq nf b gy nk nl l nm nn">// Extract text from image<br/>annotations, err := vision.DetectTexts(context.Background(), screenshot, nil, 1)<br/>if err != nil {<br/>   log.Fatal().Err(err).Send()<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/fd9d4edb21f7931dfadd9fa183b5ff34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KClIeUNGSpNnlwFIxiQMuA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌视觉从截图中提取文本</p></figure><h1 id="5af3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">一切看起来都很好…嘿，等一下？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/41d76d4b1d63b2e3bbbaf7e4603f8981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6lLP2DtaNTnSSpyY"/></div></div></figure><p id="8f55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是什么胡言乱语？肯定不是屏幕上的！事实证明，神经网络试图解释任何类似文本的东西。</p><p id="67cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快速浏览一下<a class="ae kv" href="https://cloud.google.com/vision/docs/samples/vision-fulltext-detection" rel="noopener ugc nofollow" target="_blank">文档</a>告诉我们，每个结果都带有一个置信度得分和摘录文本。经过一些测试后，看起来任何真实的文本都有99%或更高的置信度，但那些胡言乱语的结果的置信度远低于50%。所以我们只需要过滤掉结果，保留置信度在90%以上的。</p><h1 id="18fd" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">翻译提取的文本</strong></h1><p id="0fca" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">一旦我们从截图中提取了文本，我们就可以通过调用Google Translate API来翻译它。你甚至不需要指定源语言，它会自动检测。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d96a" class="nj lu iq nf b gy nk nl l nm nn">// Translate text<br/>resp, err := a.translationClient.Translate(context.Background(), []string{detectedText}, "en", nil)<br/>if err != nil {<br/>   log.Fatal().Err(err).Send()<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/8c619440a4f7d0f2a81b367cab67352b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-g6jsILB2f0Q2So63EpfQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌翻译</p></figure><h1 id="403a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">显示字幕</strong></h1><p id="7bc9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这部分有点复杂，因为它需要一个图形库在屏幕上绘制。为此，我一直在使用神奇的围棋库。我省略了细节，但它本质上是在一个透明的、总是在顶部的窗口上显示翻译的文本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ls"><img src="../Images/8458ead80f2e4732493324e32a9c3c1d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*t2lCIkldBS45iBK_W00ntA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在游戏窗口顶部显示字幕</p></figure><h1 id="53df" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">正在试用</strong></h1><p id="dd1f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">前往https://github.com/bquenin/interpreter的<a class="ae kv" href="https://github.com/bquenin/interpreter" rel="noopener ugc nofollow" target="_blank"/>，按照<a class="ae kv" href="https://github.com/bquenin/interpreter#readme" rel="noopener ugc nofollow" target="_blank">自述文件</a>中的说明进行操作，你应该在几分钟内准备就绪！</p></div></div>    
</body>
</html>