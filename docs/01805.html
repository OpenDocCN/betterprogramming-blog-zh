<html>
<head>
<title>Things That You Can Do to Improve Code Quality</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您可以做些什么来提高代码质量</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/things-that-you-can-do-to-improve-code-quality-c746c30e7521?source=collection_archive---------0-----------------------#2019-10-15">https://betterprogramming.pub/things-that-you-can-do-to-improve-code-quality-c746c30e7521?source=collection_archive---------0-----------------------#2019-10-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f257" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何降低每分钟的WTFs</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/77912a434a3257019af6162e7e24e7cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k5ZxB0XDa81Nf5Bj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Clem Onojeghuo 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="d3ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">写得不好的代码可能是一场真正的灾难。当代码中的混乱增加时，维护代码所需的时间也会增加。在最坏的情况下，代码不能再被维护，项目会慢慢死去。</p><p id="52bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了防止这种情况，您应该注意代码的质量。你应该在你的代码质量上投入时间。从长远来看，好的代码是有回报的。</p><p id="52bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">质量是每个人的工作。不管你是经理、测试人员还是开发人员。交付高质量的，当然也是有效的代码应该是整个开发过程的目标。</p><p id="f5fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里列出了可以用来提高代码质量的六件事。这些事情有些可以单独完成，有些则需要团队的努力。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/b316f96dca45fa9b97fd019c38bf5e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/0*ePlqU8F3I5FcbDVH.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://hackernoon.com/the-book-every-programmer-should-read-33b5ef2e532a" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8d70" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.四眼原则</h1><p id="b041" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">四眼原则是一个容易理解和执行的原则。意味着至少有两个人，包括代码的作者，评审代码。当今最流行的方法之一是拉请求方法。</p><blockquote class="na nb nc"><p id="a880" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">Pull请求允许你告诉其他人你已经推送到GitHub上的一个存储库中的一个分支的变更。一旦打开了一个拉请求，您就可以与协作者讨论和评审潜在的变更，并在您的变更被合并到基础分支之前添加后续提交。</p><p id="0778" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">—<a class="ae ky" href="https://help.github.com/en/articles/about-pull-requests" rel="noopener ugc nofollow" target="_blank">Github.com</a></p></blockquote><p id="43d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在代码审查期间，应该考虑几件事情。其中之一是检查代码是否违反了代码约定规则。这是一个可以通过在管道中使用棉绒来自动化的过程，但是有时这种检查仍然是手动执行的。</p><p id="fb70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他可以检查但不能自动完成的事情是代码的可维护性和错误处理。最后，但同样重要的是，应该检查代码的完整性。这段代码是否包含了功能的整个范围，正如它被设计的那样？</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b10f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">2.连续累计</h1><p id="9821" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">“但它在开发服务器上工作正常”。或者更糟:“它在我的机器上工作”。</p><p id="e845" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种性质的问题和讨论是你想要阻止的。这正是持续集成(CI)可以发挥巨大作用的地方。</p><blockquote class="na nb nc"><p id="956c" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">持续集成是一种软件开发实践，其中团队成员频繁地集成他们的工作，通常每个人至少每天集成一次——导致每天多个集成。每个集成都由一个自动化构建(包括测试)来验证，以尽可能快地检测集成错误。</p><p id="3584" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">—马丁·福勒</p></blockquote><p id="9856" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">持续集成的要点在于，它能迅速给开发人员提供大量反馈。</p><p id="a94d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您遵循两个简单的规则时，持续集成会起作用:</p><ol class=""><li id="5468" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated">保持快速构建。没有什么比一个长达一小时的构建更令人沮丧的了。</li><li id="dabd" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">立即修复损坏的版本。持续集成的全部意义在于，您总是在已知的稳定基础上进行开发。</li></ol><p id="ddd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">持续集成提高了代码质量，因为它向开发人员提供了快速的反馈。如果测试失败，构建将会失败，开发人员将会得到通知。此外，最好在构建脚本中添加一个linter来检查编码约定。显然，这也提高了代码质量。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8625" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">3.编码约定</h1><p id="168e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">拥有一个编码约定列表是很重要的。但是在你开始列出编码惯例之前，团队中的每个人都应该达成共识。这可能会伴随着大量关于首选约定的讨论。</p><p id="7981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">制作一个编码约定的列表，其中记录了变量应该如何声明以及一些命名约定等。您可以添加到该列表中的规则数量是无限的，并且规则的数量可以变化。做对你和你的团队有用的事情。如果团队喜欢的话，可以随意在约定列表中添加新的规则。从列表中删除约定也是如此。</p><p id="be70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你有了你的编码惯例列表，坚持它们是非常重要的。正如我提到的，最好的方法是在管道中用linter检查编码约定，因为它不需要任何手动操作。如果这不是一个选项，请在您的本地环境中安装linter。只要确保定期使用linter，至少在每次提交之前。这将大大提高代码库的可读性和可维护性，因为代码更加统一。</p><p id="698e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">高质量的代码可以加速长期的软件开发，因为它可以被重用，开发人员不必花那么多时间修复旧的错误和润色代码。这也使得新人更容易加入项目。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f892" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">4.测试，测试，测试</h1><p id="f9f9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">代码的错误越少，质量就越高。彻底的测试过滤掉关键的错误，确保代码按照预期的方式工作。</p><p id="52b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当涉及到提高代码质量时，有一个清晰的测试策略是必不可少的。最起码，你的代码应该经过单元测试。如果你想做其他方式的测试，比如集成测试或者回归测试，那就更好了。</p><p id="bbd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据测试金字塔，一个软件项目中最大量的测试应该是单元测试。这样做的原因是它们既便宜又快。有很多不同的工具可以帮助你创建单元测试和代码覆盖率报告。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/91c686e928b9dbeb386057ef641cfeb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v6btYB1Xtb9crWQv.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://blog.octo.com/en/the-test-pyramid-in-practice-5-5/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="d2f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行测试套件和创建代码覆盖报告都可以通过持续集成自动完成。当代码覆盖率没有达到要求的百分比时，构建甚至可能会失败。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e0ff" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">5.分析bug</h1><p id="9d25" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">代码中出现错误可能是不可避免的。处理这些错误的方式非常重要。作为一名开发人员，如果你想提高自己，从错误中学习是关键。这就是为什么你要分析bug。</p><p id="a53a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当bug发生时，分析bug的影响。是低优先级还是高优先级的bug？如果是高优先级的bug，应该立即修复。</p><p id="e550" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当分析bug时，问自己一些问题是很重要的。哪里出了问题？为什么我们没有(正确地)测试这个？还有哪些地方会发生这种情况？最重要的是，我们如何防止这种情况再次发生？</p><p id="a806" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，工具可以帮助您跟踪bug。市场上有很多bug追踪器。选择一个符合你需求的。</p><blockquote class="nw"><p id="f196" class="nx ny it bd nz oa ob oc od oe of lu dk translated">唯一真正的错误是我们从中学不到任何东西的错误——亨利·福特</p></blockquote></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="844a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">6.开始测量</h1><p id="3484" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">谈到度量，有几个度量标准可以用来量化代码的质量。</p><h2 id="f730" class="og me it bd mf oh oi dn mj oj ok dp mn li ol om mp lm on oo mr lq op oq mt or bi translated">缺陷度量</h2><p id="b717" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">缺陷的数量以及这些缺陷的严重性是整体质量的重要度量。例如，如果您想要跟踪缺陷，您可以使用bug burndown图表。bug燃尽图就像敏捷软件开发中的普通燃尽图一样。唯一的区别是bug burndown图表包含未修复的bug数量，而不是用户故事点。</p><h2 id="b65f" class="og me it bd mf oh oi dn mj oj ok dp mn li ol om mp lm on oo mr lq op oq mt or bi translated">复杂性度量</h2><p id="1dbf" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">复杂性通常用圈复杂性度量来衡量。它是通过程序源代码的线性独立路径数量的定量度量。</p><p id="d419" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">圈复杂度数和缺陷频率之间存在相关性:</p><blockquote class="na nb nc"><p id="4c5d" class="kz la nd lb b lc ld ju le lf lg jx lh ne lj lk ll nf ln lo lp ng lr ls lt lu im bi translated">许多研究已经调查了圈复杂度数与函数或方法中出现缺陷的频率之间的相关性。一些研究发现圈复杂度和缺陷之间存在正相关:具有最高复杂度的函数和方法往往也包含最多的缺陷。然而，圈复杂度和程序大小(通常用代码行来度量)之间的相关性已经被证明了很多次。<br/>——<a class="ae ky" href="https://en.wikipedia.org/wiki/Cyclomatic_complexity" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="a09d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从理论上来说，降低代码的复杂性可以减少缺陷。</p></div></div>    
</body>
</html>