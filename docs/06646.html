<html>
<head>
<title>Exploring Data Classes in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Python中的数据类</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/exploring-data-classes-in-python-66b696506e55?source=collection_archive---------7-----------------------#2020-10-21">https://betterprogramming.pub/exploring-data-classes-in-python-66b696506e55?source=collection_archive---------7-----------------------#2020-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b94b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解数据类</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b0313e808dcc190c3a01e4410ad9dc25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vN6vBqB0fQfjbMd9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安妮·斯普拉特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="6149" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们经常创建主要目的是保存数据的类。在这样的类中，一些标准功能和效用函数通常可以从数据中机械地推导出来。在Python中，这被称为<em class="lv">数据类</em>，并用<code class="fe lw lx ly lz b">@dataclass</code>进行注释。</p><p id="77ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道了什么是数据类，下一个问题是我们如何在实时用例中使用它。如果您有一个数据列表，其中每个项目包含一组属性，我们可以创建一个具有所需属性的数据类，并将其用作列表类型。</p><p id="e85f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您想要显示一个雇员列表，那么我们可以创建一个<code class="fe lw lx ly lz b">Employee</code>数据类，并将其用作列表类型。数据类在各种编程语言中都很有名，因为它们具有保存实体属性的一般性质，这是实时编码中的常见用例。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="401e" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">数据类</h1><p id="4297" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">数据类是用<code class="fe lw lx ly lz b">@dataclass</code>装饰器标注的常规类。通常，它的主要目的是保存数据。除了注释之外，其余的语法与常规类相似。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="c7a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用构造函数来分配数据。开箱即用，数据类带有像<code class="fe lw lx ly lz b">instantiate</code>、<code class="fe lw lx ly lz b">compare</code>和<code class="fe lw lx ly lz b">print</code>这样的基本特性。一旦我们创建了数据类的实例，我们就可以通过它们的名称直接访问属性。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="51b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python的优势之一是我们可以使用命名参数，当我们的数据类有太多属性时，命名参数就不那么模糊了。除此之外，我们不再需要按照属性声明的顺序来分配属性。看一看:</p><pre class="kj kk kl km gt ng lz nh ni aw nj bi"><span id="1914" class="nk mi it lz b gy nl nm l nn no">employee = Employee(<strong class="lz iu">name=</strong>"Jessica", <strong class="lz iu">designation=</strong>"Manager", <strong class="lz iu">salary=</strong>10000, <strong class="lz iu">id=</strong>2)</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="08b7" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">数据类的优势</h1><p id="7bdd" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我们可以使用一个普通的类来保存数据，但是我们需要手工编写所有的样板代码，比如<code class="fe lw lx ly lz b">__init__</code>、<code class="fe lw lx ly lz b">__repr__</code>、<code class="fe lw lx ly lz b">__eq__</code>等等。功能。为了更好地理解核心优势，让我们在没有数据类装饰器的情况下创建相同的<code class="fe lw lx ly lz b">Employee</code>类。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="330e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们使用数据类装饰器，我们可以获得所有这些现成的特性。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="9186" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">默认值</h1><p id="4816" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我们已经看到了在创建实体或实体列表时，数据类是如何变得方便的。现在，是时候探索高级用例了，比如为数据类中的属性分配默认值。</p><p id="97e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我的经验，为数据类中的一个属性指定一个默认值是很方便的，因为大多数时候，特定的属性可能不会改变。举个例子，你拿一个创业软件公司来说，大部分员工都是开发人员。因此将<code class="fe lw lx ly lz b">developer</code> <em class="lv"> </em>作为默认值赋给属性<code class="fe lw lx ly lz b">designation</code> <em class="lv"> </em>是有意义的。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="0589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们声明默认值需要遵循的一个主要条件是，默认值属性应该只在所有没有默认值的属性之后声明。如果不这样做，它会显示以下编译时错误:</p><pre class="kj kk kl km gt ng lz nh ni aw nj bi"><span id="5716" class="nk mi it lz b gy nl nm l nn no">Fields with a default value must come after any fields without a default.</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="f0cb" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">类型提示</h1><p id="52c1" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">大多数开发人员喜欢Python的原因之一是它的简单性。例如，我们不需要像在Java中那样提到变量的数据类型。这种行为可以在稍加修改的数据类中实现。</p><p id="c1a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在数据类中，必须提到属性的数据类型。所以我们可以在声明数据类的属性时使用<code class="fe lw lx ly lz b">Any</code>,并在运行时根据需要赋值。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="765e" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">数据类中的函数</h1><p id="262d" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">属性通常在数据类中起着关键作用，但是有时候我们需要的不仅仅是属性。例如，如果我们以员工为例，有时当我们需要计算他们的年薪时，这可以通过在数据类内部编写函数来轻松处理。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="c26d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">不可变数据类</h1><p id="61cc" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">对于许多类型的数据类来说，这是一个好主意！为了使数据类不可变，在创建时设置<code class="fe lw lx ly lz b">frozen=True</code>。只能通过构造函数为冻结数据类的属性赋值。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="d35e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您试图更新一个冻结的类属性的值，它将抛出以下编译时错误:</p><pre class="kj kk kl km gt ng lz nh ni aw nj bi"><span id="c453" class="nk mi it lz b gy nl nm l nn no">‘Employee’ object attribute ‘name’ is read-only</span></pre></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="26f7" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">遗产</h1><p id="5b71" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">Python是面向对象的，正如它是函数式编程一样。这开启了数据类继承的可能性。该实现类似于普通类的实现。例如，有一个名为<code class="fe lw lx ly lz b">EmployeeWithBenifits</code>的类，它从<code class="fe lw lx ly lz b">Employee</code>数据类继承了雇员的基本信息。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="28ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该记住，如果<code class="fe lw lx ly lz b">EmployeeWithBenifits</code>类至少有一个属性没有默认值，那么<code class="fe lw lx ly lz b">Employee</code>数据类中就不应该有任何默认值属性。</p><p id="313c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读！</p></div></div>    
</body>
</html>