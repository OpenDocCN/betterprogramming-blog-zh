<html>
<head>
<title>What Is @Binding in SwiftUI?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的@Binding是什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-binding-in-swiftui-how-to-use-it-206d22affd9a?source=collection_archive---------1-----------------------#2019-10-18">https://betterprogramming.pub/what-is-binding-in-swiftui-how-to-use-it-206d22affd9a?source=collection_archive---------1-----------------------#2019-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4605" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你如何使用它？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/177dbdbea1788ec6096ae1a964e09bbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3lsCa552mEnVxHekqN42sw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Pierre Bamin 在<a class="ae kv" href="https://unsplash.com/s/photos/binding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="149a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">苹果发布了<a class="ae kv" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank"> SwiftUI </a>，利用<a class="ae kv" href="https://swift.org/" rel="noopener ugc nofollow" target="_blank"> Swift </a>的力量在所有苹果平台上构建用户界面。在我向您展示我们将在本文中构建什么之前，让我解释一下SwiftUI开发中最重要的概念之一:<code class="fe ls lt lu lv b">@Binding</code>。</p><p id="f4e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注:</strong>在进行<code class="fe ls lt lu lv b">@Binding</code>之前，我强烈建议你通读一下我的<code class="fe ls lt lu lv b"><a class="ae kv" href="https://medium.com/better-programming/what-is-state-in-swiftui-and-how-to-use-it-cc672de85188" rel="noopener">@State</a></code> <a class="ae kv" href="https://medium.com/better-programming/what-is-state-in-swiftui-and-how-to-use-it-cc672de85188" rel="noopener">文章</a>，因为使用<code class="fe ls lt lu lv b">@Binding</code>需要具备<code class="fe ls lt lu lv b">@State</code>的知识。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="75d0" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">什么是@绑定？</h1><p id="8a4f" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">SwiftUI中的视图可能包含多个子视图。您可能希望与这些子视图进行通信，或者希望子视图更改其父视图的值。使用<code class="fe ls lt lu lv b">@Binding</code>，您可以将<code class="fe ls lt lu lv b">@State </code>变量值从父视图传递到子视图，如果子视图改变、变异或更改了<code class="fe ls lt lu lv b">@State</code>的值，父视图将自动获得更新的值并重新呈现视图。这意味着您可以通过使用<code class="fe ls lt lu lv b">@Binding</code>改变子视图中父视图的<code class="fe ls lt lu lv b">@State</code>变量的值来从子视图中更新父视图。</p><p id="baea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何在XCode中使用<code class="fe ls lt lu lv b">@Binding</code>变量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/e41319e57bb234af927d7614792dc8fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-G6Y-n3WBh7jC91yESr1CA.gif"/></div></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="dcfa" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">设置</h1><p id="656a" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">要创建项目，请在XCode中选择:“文件”&gt;“新建”&gt;“项目”&gt;“单视图应用程序”&gt;“下一步”&gt;“选择用户界面”&gt;“SwiftUI”&gt;“下一步”&gt;选择要保存该项目的位置&gt;“完成”</p><h2 id="4079" class="nb me iq bd mf nc nd dn mj ne nf dp mn lf ng nh mp lj ni nj mr ln nk nl mt nm bi translated">内容视图. swift</h2><p id="ef25" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">默认<code class="fe ls lt lu lv b">SwiftUI(ContentView)</code> <strong class="ky ir"> </strong>出现以下代码:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="e951" class="nb me iq lv b gy nr ns l nt nu">import SwiftUI</span><span id="ad5f" class="nb me iq lv b gy nv ns l nt nu">struct ContentView: View {<br/>var body: some View {<br/>    Text(”Hello World!”)<br/>  }<br/>}</span><span id="ae9d" class="nb me iq lv b gy nv ns l nt nu">struct ContentView_Previews: PreviewProvider {<strong class="lv ir">  <br/></strong>static var previews: some View {<br/>     ContentView()<br/>   }<br/>}</span></pre><p id="0152" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在右边，您可以看到UI的预览。如果你看不到预览，去右上角的“调整编辑器选项”，选择“画布”或者按“Option+Command+Enter <strong class="ky ir"> <em class="nw">”</em> </strong>然后确保Canvas正在显示UI预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/bb6331f710eda81c470e72eabe2e260f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*GjpMyO5_MRo2xMcU.png"/></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="c2df" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">创建用户界面</h1><p id="e67e" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">定义<code class="fe ls lt lu lv b">ContentView</code>体内的垂直堆栈。这将包含<code class="fe ls lt lu lv b">Text</code>和<code class="fe ls lt lu lv b">Plus One</code>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2a9c4f5a3a18428e3449f5288665047a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*WlgFPrDthQPe1vLdf2DiBg.png"/></div></figure><p id="843f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="5fdd" class="nb me iq lv b gy nr ns l nt nu">VStack {<br/>   Text("Hello World!")<br/>   Button("Plus One"){<br/>      //Action Goes Here<br/>   }<br/>}</span></pre><p id="1d75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于最终的输出，我们希望定制文本字体大小，按钮字体大小，背景颜色，文本颜色，并使按钮的边缘呈圆形。</p><p id="1ffa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们修改按钮代码，这样我们就可以访问按钮的<code class="fe ls lt lu lv b">Text</code>属性。修改后，代码将如下所示:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="9d5d" class="nb me iq lv b gy nr ns l nt nu">VStack{<br/>   Text(”Hello World!”)<br/>   Button(action: {<br/>   //Button action goes here<br/>   }){<br/>      Text(“Plus One”)<br/>     }<br/>}</span></pre><p id="fe57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们来看看我们将用来实现我们想要的输出的属性。</p><p id="7784" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用属性<code class="fe ls lt lu lv b">.font()</code>来改变字体大小:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="73e8" class="nb me iq lv b gy nr ns l nt nu">Text("Hello World")<br/>   .font(.largeTitle) // Font type</span></pre><p id="9c81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用属性<code class="fe ls lt lu lv b">.background(Color.COLOR_NAME)</code>改变背景颜色:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="0ed3" class="nb me iq lv b gy nr ns l nt nu">Text(“Hello World”) // Button Text<br/>   .background(Color.orange) // Button Background Color</span></pre><p id="cce3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要改变文本颜色，我们可以使用属性<code class="fe ls lt lu lv b">.foregroundColor(Color.COLOR_NAME)</code>:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="ca85" class="nb me iq lv b gy nr ns l nt nu">Text(“Hello World”) // Button Text<br/>   .foregroundColor(Color.white) // Button text color</span></pre><p id="f9d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使边缘呈圆形，我们可以使用属性<code class="fe ls lt lu lv b">.cornerRadius(CORNER_RADIUS_VALUE)</code>:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="0c6b" class="nb me iq lv b gy nr ns l nt nu">Text(“Hello World”) // Button Text<br/>   .cornerRadius(10.0) // Button corner radius property</span></pre><p id="e659" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们将上述所有属性应用于文本和按钮，我们的代码将如下所示:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="8f71" class="nb me iq lv b gy nr ns l nt nu">//Vertical Stack</span><span id="f12f" class="nb me iq lv b gy nv ns l nt nu">VStack {<br/>   //Text containing current value<br/>   Text("Hello World")<br/>      .font(.largeTitle)  // Font type or size<br/>      .fontWeight(.bold)  // Font style<br/>   <br/>   Button(action: {<br/>         //Button on click action goes here<br/>      }){<br/>      <br/>      //Button Text a&amp; its properties<br/>      Text("Plus One")<br/>         .font(.title)   // Font type or size<br/>         .fontWeight(.bold)  // Font style<br/>         .foregroundColor(Color.white) // Text Color<br/>         .padding(16)    // Padding to the button<br/>         .background(Color.orange) // Background color of the button<br/>         .cornerRadius(10)   // Corner radius to make edges circular<br/>      }<br/>}</span></pre><p id="15d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/d620a7742a0f01363b2e9559d3c59cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*91sR03JYYDyfzpDyEq7j8w.png"/></div></figure><p id="e53d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们的UI已经准备好了，让我们看看如何实现<code class="fe ls lt lu lv b">@Binding</code>。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="5cbe" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">声明@State变量</h1><p id="a38b" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">现在我们声明<code class="fe ls lt lu lv b">@State</code>变量。要声明一个<code class="fe ls lt lu lv b">@State</code>变量，我们必须在声明变量之前使用<code class="fe ls lt lu lv b">@State</code>关键字。查看下面一行，更好地理解如何声明<code class="fe ls lt lu lv b">@State</code>变量。</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="bf61" class="nb me iq lv b gy nr ns l nt nu">@State var currentValue = 0</span></pre><p id="7b89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们将在<code class="fe ls lt lu lv b">Text</code>中设置<code class="fe ls lt lu lv b">@State</code>变量<strong class="ky ir"> </strong>的值。<code class="fe ls lt lu lv b">Text</code>代码现在看起来像这样:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="d631" class="nb me iq lv b gy nr ns l nt nu">Text(“\(currentValue)”)<br/>   .font(.largeTitle) // Font type or size<br/>   .fontWeight(.bold) // Font style</span></pre><p id="fe4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每当用户点击按钮时，我们想要改变<code class="fe ls lt lu lv b">@State</code>变量值。为此，我们需要改变<code class="fe ls lt lu lv b">Button ACTION</code> <strong class="ky ir"> </strong>块中变量的值。要访问<code class="fe ls lt lu lv b">button ACTION</code>方法中的<code class="fe ls lt lu lv b">@State</code>变量，我们需要定义<code class="fe ls lt lu lv b">self.STATE_VARIABLE_NAME</code> <strong class="ky ir"> </strong>，如下所示:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="fd48" class="nb me iq lv b gy nr ns l nt nu">self.currentValue += 1</span></pre><p id="4a35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当用户点击按钮时，它会改变<code class="fe ls lt lu lv b">@State</code>变量值。当<code class="fe ls lt lu lv b">@State</code>变量值改变时，它再次渲染视图并改变显示的文本值。</p><p id="ef5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">整个代码如下所示:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="5386" class="nb me iq lv b gy nr ns l nt nu">//<br/>//  ContentView.swift<br/>//  State-Demo<br/>//<br/>//  Created by Mayur on 14/10/19.<br/>//  Copyright © 2019 Mayur Rathod. All rights reserved.<br/>//</span><span id="1fa6" class="nb me iq lv b gy nv ns l nt nu">import SwiftUI</span><span id="bed0" class="nb me iq lv b gy nv ns l nt nu">struct ContentView: View {<br/>    <br/>   @State <strong class="lv ir">var</strong> currentValue = 0<br/>   <br/>   <strong class="lv ir">var</strong> body: <strong class="lv ir">some</strong> View {<br/>   //Vertical Stack<br/>   VStack {<br/>      //Text containing current value<br/>      Text("\(currentValue)")<br/>         .font(.largeTitle)  // Font type or size<br/>         .fontWeight(.bold)  // Font style</span><span id="6227" class="nb me iq lv b gy nv ns l nt nu">Button(action: {<br/>       //Button on click action goes here<br/>       self.currentValue += 1<br/>   }){<br/>      //Button Text a&amp; its properties<br/>      Text("Plus One")<br/>         .font(.title)   // Font type or size<br/>         .fontWeight(.bold)  // Font style<br/>         .foregroundColor(Color.white) // Text Color<br/>         .padding(16)    // Padding to the button<br/>         .background(Color.orange) // Background color of the button<br/>         .cornerRadius(10)   // Corner radius to make edges circular<br/>   }<br/>  }<br/>}</span><span id="5532" class="nb me iq lv b gy nv ns l nt nu">struct ContentView_Previews: PreviewProvider {<br/>    static var previews: some View {<br/>        ContentView()<br/>    }<br/>}</span></pre></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="0253" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">创建子视图界面</h1><p id="2825" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">现在让我们创建另一个SwiftUI文件，它将是<code class="fe ls lt lu lv b">ContentView</code>的子视图。我们将这个文件命名为<code class="fe ls lt lu lv b">BindingView.swift</code>。代码应该是这样的:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="6521" class="nb me iq lv b gy nr ns l nt nu">import SwiftUI</span><span id="1e04" class="nb me iq lv b gy nv ns l nt nu">struct BindingView: View {<br/>var body: some View {<br/>    Text(”Hello World!”)<br/>  }<br/>}</span><span id="be3f" class="nb me iq lv b gy nv ns l nt nu">struct BindingView_Previews: PreviewProvider {<strong class="lv ir">  <br/></strong>static var previews: some View {<br/>     BindingView()<br/>   }<br/>}</span></pre><p id="5c2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">BindingView</code>所需的用户界面如下所示。我们必须创建一个带有文本“减去一个<strong class="ky ir">、</strong>的按钮，它与我们在父视图中创建的按钮<code class="fe ls lt lu lv b">ContentView.swift</code>相同。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/30404ef94bbe4849c6843116c65013ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*EI-ihTcb_EHCtYPG0Amh1w.png"/></div></figure><p id="7f15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="1917" class="nb me iq lv b gy nr ns l nt nu">var body: some View {<br/>   VStack {<br/>      Button(action: {<br/>         //Button action goes here<br/>      }){<br/>         Text(“Minus One”)<br/>            .font(.title)<br/>            .fontWeight(.bold)<br/>            .foregroundColor(Color.white) <br/>            .padding(16)<br/>            .background(Color.blue)<br/>            .cornerRadius(10)<br/>        }<br/>    }<br/>}</span></pre></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="0481" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">声明@Binding变量</h1><p id="b06a" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">现在我们将创建一个<code class="fe ls lt lu lv b">@Binding</code>变量。<strong class="ky ir"> </strong>要做到这一点，我们必须在声明变量之前使用<code class="fe ls lt lu lv b">@Binding</code>关键字。</p><p id="439c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">@Binding</code>变量必须在视图主体之外声明:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="00d6" class="nb me iq lv b gy nr ns l nt nu">@Binding var valueFromParent : Int</span></pre><p id="a256" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每当用户点击按钮时，我们想要改变<code class="fe ls lt lu lv b">@Binding</code>变量的值。为此，我们现在需要更改<code class="fe ls lt lu lv b">Button ACTION</code> <strong class="ky ir"> </strong>块中变量的值。定义<code class="fe ls lt lu lv b">self.BINDING_VARIABLE_NAME</code> <strong class="ky ir"> </strong>是这样的:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="39ef" class="nb me iq lv b gy nr ns l nt nu">self.valueFromParent -= 1</span></pre><p id="4fff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，当用户点击子视图中的“减一”按钮时，我们会将该值减一。一旦我们这样做，它将再次呈现父视图，显示递减后的最新值。</p><p id="2810" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="056f" class="nb me iq lv b gy nr ns l nt nu">import SwiftUI</span><span id="835d" class="nb me iq lv b gy nv ns l nt nu">struct BindingView: View {<br/>   @Binding var valueFromParent : Int<br/>   <br/>   var body: some View {<br/>      VStack {<br/>         Button(action: {<br/>            self.valueFromParent -= 1<br/>      }){<br/>          Text(“Minus One”)<br/>             .font(.title)<br/>             .fontWeight(.bold)<br/>             .foregroundColor(Color.white)<br/>             .padding(16)<br/>             .background(Color.blue)<br/>             .cornerRadius(10)<br/>         }<br/>      }<br/>   }<br/>}</span><span id="0ad9" class="nb me iq lv b gy nv ns l nt nu">struct BindingView_Previews: PreviewProvider {<br/>   static var previews: some View {<br/>       BindingView(valueFromParent: .constant(0))<br/>   }<br/>}</span></pre><p id="5b54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们改变子视图中的值，父视图将再次呈现。</p><p id="bc52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为我们将把<code class="fe ls lt lu lv b">@State</code>变量作为参数从父视图传递给子视图，子视图将改变<code class="fe ls lt lu lv b">@Binding</code>变量的值。这相当于改变父视图中的<code class="fe ls lt lu lv b">@State</code>变量值，根据<code class="fe ls lt lu lv b">@State</code>变量定义，每当我们改变<code class="fe ls lt lu lv b">@State</code>变量值时，视图将被再次渲染。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="cd15" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">最终产品</h1><p id="f71e" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">完整的代码如下所示:</p><p id="bf8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">父视图，即<code class="fe ls lt lu lv b">ContentView.swift</code>:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="c567" class="nb me iq lv b gy nr ns l nt nu">import SwiftUI</span><span id="c179" class="nb me iq lv b gy nv ns l nt nu">struct ContentView: View {<br/>   @State var currentValue = 0<br/>   <br/>   var body: some View {<br/>   //Vertical Stack<br/>   VStack {<br/>      //Text containing current value<br/>      Text(“\(currentValue)”)<br/>         .font(.largeTitle) // Font type or size<br/>         .fontWeight(.bold) // Font style<br/>      Button(action: {<br/>         //Button on click action goes here<br/>         self.currentValue += 1<br/>      }){<br/>       //Button Text a&amp; its properties<br/>       Text(“Plus One”)<br/>         .font(.title) // Font type or size<br/>         .fontWeight(.bold) // Font style<br/>         .foregroundColor(Color.white) // Text Color<br/>         .padding(16) // Padding to the button<br/>         .background(Color.orange) // Background color of the button<br/>         .cornerRadius(10) // Corner radius to make edges circular<br/>      }<br/>     <br/>       //Child View<br/>       BindingView(valueFromParent: $currentValue)<br/>    }<br/>   }<br/>}</span><span id="d540" class="nb me iq lv b gy nv ns l nt nu">struct ContentView_Previews: PreviewProvider {<br/>   static var previews: some View {<br/>     ContentView()<br/>   }<br/>}</span></pre><p id="6549" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">子视图，或<code class="fe ls lt lu lv b">BindingView.swift</code>:</p><pre class="kg kh ki kj gt nn lv no np aw nq bi"><span id="e9a3" class="nb me iq lv b gy nr ns l nt nu">import SwiftUI</span><span id="d4fb" class="nb me iq lv b gy nv ns l nt nu">struct BindingView: View {<br/>   @Binding var valueFromParent : Int<br/>      var body: some View {<br/>      VStack {<br/>         Button(action: {<br/>            self.valueFromParent -= 1<br/>         }){<br/>         Text(“Minus One”)<br/>          .font(.title)<br/>          .fontWeight(.bold)<br/>          .foregroundColor(Color.white)<br/>          .padding(16)<br/>          .background(Color.blue)<br/>          .cornerRadius(10)<br/>         }<br/>      }<br/>   }<br/>}</span><span id="9a4f" class="nb me iq lv b gy nv ns l nt nu">struct BindingView_Previews: PreviewProvider {<br/>   static var previews: some View {<br/>      BindingView(valueFromParent: .constant(0))<br/>   }<br/>}</span></pre></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div></div>    
</body>
</html>