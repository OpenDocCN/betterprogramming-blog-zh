# 什么是 UUID，它们是如何产生的？

> 原文：<https://betterprogramming.pub/what-is-a-uuid-and-how-are-they-generated-17f0acbd7233>

## 看看通用唯一标识符

![](img/d0f40b8323dd54a03cad7383fb7c6e25.png)

马库斯·斯皮斯克在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

通用唯一标识符(UUID)是一个 128 位的数字，用于标识计算机系统中的信息。它也被称为全球唯一标识符(GUID)。UUID 的标准表示通常由十六进制数字组成:

```
e5d520d8-d06e-4bc2-9bb9-a28e47014884
```

总共有 32 个字符，中间有四个连字符。为了不辜负他们的名字，UUID 的期望是独一无二的。这通常是不正确的——它们的唯一性取决于用来生成它们的方法或算法。然而，尽管这是可能的，UUID 被复制的概率接近于零，可以忽略不计。

有多种方法可以计算 UUID。我将解释它们的区别，并提供一些关于实现的见解。

# 版本一

第一版 UUID 是使用电脑的 MAC 地址和生成时间生成的通用唯一标识符。

这是否意味着第一版 UUID 是独一无二的？嗯，他们差不多是。为了确保唯一性，一台计算机(或节点)的速度限制在每秒 163 亿，但作为开发人员，你不会经常遇到这种情况。

这个版本还有其他问题需要担心。几乎保证的唯一性是以匿名为代价的。因为这个版本考虑了时间和唯一的 MAC 地址，所以可以识别电脑的地址和时间。

# 版本二

我会尽量缩短我们对第二版的讨论。第二版 UUIDs 与第一版相似，并且不经常实现，因为 [RFC 4122](https://tools.ietf.org/html/rfc4122) 没有提供太多细节。实际上，你根本不会用到它们。它们也被称为 DCE 安全 UUIDs。

# 版本三

在第三版中，使用加密哈希和应用程序提供的文本字符串来生成 UUID。在这个版本中，使用 MD5 散列。UUID 氏症是由名字产生的。我们现在可以使用名称和命名空间来创建一系列的 UUID。MD5 哈希算法是一种广泛使用的哈希函数，可以产生 128 位的哈希值。

最初 MD5 被设计用作加密哈希函数，但现在它似乎有漏洞问题。很容易找到两个散列值相同的不同消息。因此，这不是您希望在应用程序中使用的版本。

# 版本四

> 伪随机数发生器，也称为确定性随机位发生器，是一种用于生成数字序列的算法，该数字序列的属性近似于随机数序列的属性。— [维基百科](https://en.wikipedia.org/wiki/Pseudorandom_number_generator)

这个版本使用伪随机数发生器来产生 UUID。用起来很简单。字符串的每一位都是完全“随机”生成的。UUID 仍有可能被复制，但可能性很小，因为可能的组合数量很多。可能性的确切数字是关于⁸.的

到目前为止，第四版在大多数编程语言中都有实现。非常好用。我用 Java 举个例子:

```
UUID uuid = UUID.randomUUID();
```

# 版本五

第三版和第五版的唯一区别是使用了不同的哈希算法。第五版使用 SHA-1 而不是 MD5。虽然它在技术上是一个优秀的哈希算法，但它也可能遇到第三版所遇到的相同问题。不推荐用。

# 结论

UUID 的最大好处是它实际上是独一无二的(与保证独一无二相反)，这对于日常使用来说仍然是完全可以接受的。

以下是 UUID 的主要缺点:

*   例如，需要生成 UUID，而不是使用每次在数据库中插入记录时都会上升的索引。这可能需要更长时间。它没有说任何关于创造的顺序。如果你需要排序，考虑不要使用 UUID 排序法来排序标识符以外的东西。
*   和他们一起工作可能有点奇怪。UUID 也没有说任何关于它所属的实体的事情。这使得调试更加困难，尤其是在测试中。
*   这是一个相当长的值，会影响性能。然而，现在空间更便宜了。

但是它也有一些重要的好处:

*   UUID 的主要优势在于它的独特性。例如，用户几乎不可能猜到它是一个 URL 参数(开放讨论，因为这可能是一个安全问题)。它们在不同的应用中是独一无二的。
*   它与环境无关。您可以在任何地方(甚至离线)生成它，并且不依赖于数据库来生成标识符。当您有多个包含数据段(碎片)的数据库时，UUID 在所有数据库中都是唯一的，而不仅仅是您当前所在的数据库。这使得在数据库之间移动数据更加安全。

虽然几乎每个版本都有自己的优点，但它们也有明显的弱点，这会在应用程序设计中给你带来伤害。

第四版是完全随机和不可预测的，这是我现在推荐使用的版本。

如果您不想在多个数据库实例上发生冲突，不想让 IDs 具有可预测性或给出有关系统的信息，可以考虑使用 UUIDs。