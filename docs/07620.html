<html>
<head>
<title>Stop Committing the Xcodeproj</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止提交Xcodeproj</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/stop-committing-the-xcodeproj-fa83527ba156?source=collection_archive---------9-----------------------#2021-02-02">https://betterprogramming.pub/stop-committing-the-xcodeproj-fa83527ba156?source=collection_archive---------9-----------------------#2021-02-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c369" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何从Swift文件自动生成. xcodeproj文件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/71b7d42b144ac86ed7f8bf1da4c27cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G_jomNC6nI_czolf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@freestocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> freestocks </a>拍摄。</p></figure><p id="f357" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当团队中的工程师数量开始增加时，他们应该使用<a class="ae ky" href="https://en.wikipedia.org/wiki/Version_control" rel="noopener ugc nofollow" target="_blank">版本控制系统(VCS) </a>来共享他们的代码。其中最著名和最常用的是<a class="ae ky" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> Git </a>。<a class="ae ky" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae ky" href="https://about.gitlab.com/" rel="noopener ugc nofollow" target="_blank"> GitLab </a>是我们每天利用的服务。</p><p id="cf56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Git和它的兄弟姐妹非常适合存储和与同事共享代码。它们提供了许多特性，如文件区分、责备、恢复等等。当两个或更多的人处理同一个文件时，这些文件会同时被修改。迟早，两个开发人员中的一个必须将他们同事的变更与他们的工作合并。在一些非常不幸的情况下，他们还必须解决一些冲突。当同一行代码在不同的分支上以不同的方式被修改，并且它们需要被合并在一起时，就会发生这种事件。</p><p id="c2bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码中的冲突可能非常复杂，但一般来说，它们可以通过一些时间和协作来解决。相反，当文件中存在冲突时，还有其他几种文件是合并的噩梦。</p><p id="311b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名iOS工程师，我很容易想到三种这样的文件类型:</p><ul class=""><li id="5992" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe me mf mg mh b">Storyboard</code></li><li id="a303" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">Xcodeproj</code></li><li id="59e1" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">Xcworkspace</code></li></ul><p id="ac34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些文件都有一个共同的特点:它们都是由一个工具(例如Xcode)自动生成的，它们隐藏了大量的复杂性。例如，<code class="fe me mf mg mh b">Xcodeproj</code>实际上是更多文件夹和文件的捆绑包！</p><p id="c5dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">团队需要共享项目的配置，但是人们不想花一整天的时间来解决自动生成文件的愚蠢冲突。那么解决办法是什么呢？</p><p id="a218" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要提交这些文件！</p><p id="f36b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我们如何分享它们呢？想法是提交一个描述项目的更简单的文件。然后这个文件被输入到一个特殊的工具中，这个工具能够从中生成<code class="fe me mf mg mh b">.xcodeproj</code>和<code class="fe me mf mg mh b">.xcworspace</code>！</p><p id="7b3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天我们要探索一个极其简单却功能强大的工具:<a class="ae ky" href="https://tuist.io/" rel="noopener ugc nofollow" target="_blank"> Tuist </a>。这个社区充满活力，他们每天都在开发新的功能。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="602e" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated"><strong class="ak">推斯特</strong></h1><p id="af85" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Tuist允许iOS开发人员使用我们钟爱的语言Swift来描述项目。一切都是强类型的，Xcode可以帮助我们自动完成。我们还能问些什么吗？</p><p id="4944" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装它，我们只需运行来自他们的<a class="ae ky" href="https://tuist.io/docs/usage/getting-started/" rel="noopener ugc nofollow" target="_blank">入门</a>指南的以下命令:</p><pre class="kj kk kl km gt nr mh ns nt aw nu bi"><span id="2ad1" class="nv mv it mh b gy nw nx l ny nz">bash &lt;(curl -Ls <a class="ae ky" href="https://install.tuist.io)" rel="noopener ugc nofollow" target="_blank">https://install.tuist.io)</a></span></pre><p id="0e76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，为了生成我们的第一个项目，我们需要:</p><pre class="kj kk kl km gt nr mh ns nt aw nu bi"><span id="d869" class="nv mv it mh b gy nw nx l ny nz"># create a new folder<br/>$ mkdir FirstTuistApp</span><span id="f368" class="nv mv it mh b gy oa nx l ny nz"># navigate into it<br/>$ cd FirstTuistApp</span><span id="c464" class="nv mv it mh b gy oa nx l ny nz"># create the project<br/>$ tuist init --platform ios</span></pre><p id="c105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个命令准备Tuist项目。如果我们检查文件夹，我们看不到任何与Xcode相关的内容。为了实际生成<code class="fe me mf mg mh b">xcodeproj</code>，我们需要另一行代码:</p><pre class="kj kk kl km gt nr mh ns nt aw nu bi"><span id="5f61" class="nv mv it mh b gy nw nx l ny nz"># generate the project<br/>$ tuist generate</span><span id="ca31" class="nv mv it mh b gy oa nx l ny nz"># Open project<br/>$ open FirstTuistApp.xcworkspace</span></pre><p id="eed5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个命令打开Xcode和新创建的项目。下图显示了项目结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/ce666f8773a77be09aefb8778170596f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*IDlIOto1w2OciF6W9eAdzA.png"/></div></figure><p id="9960" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">项目的根由一个:</p><ul class=""><li id="7f89" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe me mf mg mh b">Derived</code>文件夹。这个文件夹包含了Tuist从项目中包含的资源开始为我们生成的一些代码。例如，它包含了一种轻松访问<code class="fe me mf mg mh b">Bundle</code>和资源的方法。更多信息可在文档中找到<a class="ae ky" href="https://tuist.io/docs/usage/resources/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="6b36" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated"><code class="fe me mf mg mh b">Targets</code>文件夹。该文件夹包含项目中指定的目标。默认情况下，项目由应用程序、逻辑框架和UI框架组成。虽然应用程序与项目同名，但逻辑框架的后缀是<code class="fe me mf mg mh b">Kit</code>，UI框架的后缀是<code class="fe me mf mg mh b">UI</code>。</li></ul><p id="538f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自动生成的项目已经在工作了。点击播放按钮，查看模拟器中启动的应用程序！</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="9b05" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">探索项目描述</h1><p id="343b" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">这看起来像魔术！控制台中的几行代码，我们就有了一个完全工作的模块化项目！这怎么可能呢？让我们揭开谜底！</p><p id="a1aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解创建项目的起点，请返回到终端并键入:</p><pre class="kj kk kl km gt nr mh ns nt aw nu bi"><span id="de69" class="nv mv it mh b gy nw nx l ny nz"># Open the Tuist project<br/>$ tuist edit </span></pre><p id="5c1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个命令将启动Xcode的一个实例，用几个助手围绕着<code class="fe me mf mg mh b">Project.swift</code>。看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/02252b3d000abc8d89c26a61e23594bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*3n6AUOlMzRmkDBnbVJgU0g.png"/></div></figure><p id="8c24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">Manifest</code>是根文件夹。</p><p id="319c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它包含了<code class="fe me mf mg mh b">Project.swift</code>，在这里我们可以描述我们的应用程序是如何组成的。</p><p id="701e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，有一个包含所有助手的<code class="fe me mf mg mh b">Tuist</code>文件夹:一个<code class="fe me mf mg mh b">Config.swift</code>文件和一个<code class="fe me mf mg mh b">ProjectDescriptionHelpers</code>文件夹。这个文件夹包含一些描述项目的其他助手。让我们检查一下<code class="fe me mf mg mh b">Project.swift</code>和<code class="fe me mf mg mh b">Project+Template.swift</code>文件。</p><h2 id="438e" class="nv mv it bd mw od oe dn na of og dp ne li oh oi ng lm oj ok ni lq ol om nk on bi translated">Project.swift</h2><p id="ddd0" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">这是<code class="fe me mf mg mh b">Project.swift</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="0b32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个文件唯一的职责是创建一个<code class="fe me mf mg mh b">Project</code>结构。这是通过利用<code class="fe me mf mg mh b">app</code>函数来指定:</p><ul class=""><li id="07c3" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">应用程序的名称。</li><li id="d071" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">站台。</li><li id="2bf5" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">附加目标(即我们想要实现的模块以及应用程序所依赖的模块)。</li></ul><p id="f1e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">app函数在<code class="fe me mf mg mh b">Project+Template.swift</code>文件中定义。</p><h2 id="4594" class="nv mv it bd mw od oe dn na of og dp ne li oh oi ng lm oj ok ni lq ol om nk on bi translated">项目+模板. swift</h2><p id="60e5" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">让我们看看<code class="fe me mf mg mh b">Project+Template</code>的内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="378b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个文件中，我们可以定义函数和结构来简化Xcode项目的描述。在初始配置中，这个文件公开了一个静态的<code class="fe me mf mg mh b">app</code>函数，由<code class="fe me mf mg mh b">Project.swift</code>文件使用。该函数使用几个其他函数来构建主目标和辅助模块。</p><p id="2ef5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用于创建主目标(应用程序)的功能称为<code class="fe me mf mg mh b">makeAppTargets</code>。这将通过以下方式配置应用:</p><ol class=""><li id="660c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu oq mb mc md bi translated">定义所需的Plist键，如<code class="fe me mf mg mh b">CFBundleShortVersionString</code>和<code class="fe me mf mg mh b">CFBundleVersion</code>。</li><li id="921f" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu oq mb mc md bi translated">使用正确的路径创建类型为<code class="fe me mf mg mh b">.app</code>的主目标，以加载<code class="fe me mf mg mh b">Source</code>文件和<code class="fe me mf mg mh b">Resources</code>。</li><li id="14ed" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu oq mb mc md bi translated">创建一个测试目标来为应用程序编写单元测试。</li></ol><p id="1035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个重要的参数是<code class="fe me mf mg mh b">dependencies</code>。这用于建立应用程序所依赖的模块，这些模块是项目中的其他目标或第三方依赖项。</p><p id="d103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">dependencies</code>参数通过<code class="fe me mf mg mh b">makeFrameworkTargets</code>填充，这是用于创建项目的另一个函数。</p><p id="a5dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个功能非常类似于<code class="fe me mf mg mh b">makeAppTargets</code>。唯一的区别是它创建了<code class="fe me mf mg mh b">framework</code>类型的目标。在初始配置中，它们是<code class="fe me mf mg mh b">&lt;AppName&gt;Kit</code>和<code class="fe me mf mg mh b">&lt;AppName&gt;UI</code>目标。</p><p id="388a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe me mf mg mh b">app</code>函数返回填充了正确参数的<code class="fe me mf mg mh b">Project</code>结构。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="6214" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">结论</h1><p id="f128" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在今天的文章中，我们开始探索创建Xcode项目的新工具。这允许iOS开发者只提交和共享Tuist Swift文件，忽略<code class="fe me mf mg mh b">xcodeproj</code>和<code class="fe me mf mg mh b">xcworkspace</code>。这是一个强大的解决方案，因为可以利用Xcode编译和自动完成功能，以更易于阅读的方式使用Swift解决合并冲突。</p><p id="b229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只是触及了它的表面，理解了它的基础以及它是如何描述这个项目的。我们已经可以利用它的基本架构，开始在它为我们生成的两个框架中实现我们的应用程序。</p><p id="3b3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们仍然需要探索如何创建新模块和安装依赖项。如果我们一次性完成所有这些工作，那么这篇文章将会过长。</p><p id="606c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Tuist和生成的app已经有很好的发挥空间了。<a class="ae ky" href="https://tuist.io/docs/usage/project-description/" rel="noopener ugc nofollow" target="_blank"> Tuist的文档</a>是惊人的，如果你想立即修补它。下周，我们将继续探索定制它的几种方法。</p></div></div>    
</body>
</html>