<html>
<head>
<title>NBA Statistics and the Golden State Warriors: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NBA统计和金州勇士队:第一部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/nba-statistics-and-the-golden-state-warriors-during-their-championship-runs-part-1-cafc5d8042a8?source=collection_archive---------17-----------------------#2019-08-13">https://betterprogramming.pub/nba-statistics-and-the-golden-state-warriors-during-their-championship-runs-part-1-cafc5d8042a8?source=collection_archive---------17-----------------------#2019-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d39" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python中的数据资源和数据争论</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5efefecd3df2625974d6cfaea56abd92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*un-Tvp5znLHJYsQXtHjQHg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com/search/photos/basketball?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e71e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2018-2019 NBA赛季于6月结束，NBA历史上最多产的球队之一输给了一支从未获得过NBA总冠军的球队。多伦多猛龙队是一支从未获得过冠军的加拿大球队，他们击败了金州勇士队，这支球队被广泛认为是一个王朝，在过去的五次冠军中赢得了三次。即使最近失去了总冠军，勇士队也为现代篮球发展了一个典范，将自己树立为新篮球时代的缩影。</p><p id="24f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的五个NBA赛季中，勇士队一直是一支主导力量，甚至在2015-2016赛季创下了73场胜利的赛季纪录。勇士队在2014-2015赛季席卷了联盟，新聘请的主教练史蒂夫·科尔实施了一个流动的进攻体系，即移动进攻。在主教练马克·杰克逊掌舵的前几个赛季，勇士队已经处于上升轨道，他在担任主教练的最后两个赛季中，一直宣扬防守心态，推动勇士队成为一支争夺季后赛的球队。</p><p id="cfb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，马克·杰克逊的进攻有时停滞不前，进攻系统的变化展示了勇士队的整体潜力和天赋。在史蒂夫·科尔担任主教练期间，他保持了马克·杰克逊灌输的防守基础，同时也宣扬了新进攻体系的目标，即通过分享篮球来创造球和球员移动以获得高质量的投篮。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="da70" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">项目概述</h1><p id="5866" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我想探究NBA过去五个赛季的统计数据，以确定哪些数据对赛季表现有很大影响。特别是，由于勇士队已经连续五年在NBA总决赛中取得了如此多的成功，我想看看他们在统计数据方面的表现，并尝试了解他们的进攻体系的影响。</p><p id="6d97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个项目中，我的目标是探索和分析任何NBA球迷都可以获得的基本球队统计数据。这些统计数据在每场NBA比赛中都有记录，并在整个赛季中汇总。我将利用2014-2015到2018-2019赛季的数据来确定哪些统计数据与胜利有显著的相关性(从而进入季后赛)，以及金州勇士队在相关统计数据中的排名如何。然后，我将使用与胜利相关的统计数据建立一个模型，看看它们能在多大程度上预测球队的常规赛表现，从而决定一支球队是否会争夺季后赛。</p><p id="470e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将这个项目分成三个部分:数据资源、信息和数据争论；探索性数据分析；和模型预测。使用的编程工具是Python以及流行的库<a class="ae ky" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a>、<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>、<a class="ae ky" href="https://www.numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>、<a class="ae ky" href="https://matplotlib.org/api/pyplot_api.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib Pyplot、</a> <a class="ae ky" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>和<a class="ae ky" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"> SciKit-Learn。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1146" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据资源和数据争论</h1><p id="e94e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我从讨论数据资源和信息开始分析NBA数据和金州勇士队，并回顾我是如何争论这些数据的。</p><p id="b51c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该项目的统计数据来自<a class="ae ky" href="http://www.basketball-reference.com/" rel="noopener ugc nofollow" target="_blank">www.basketball-reference.com</a>，其中有球队和球员的数据。篮球参考网站是其母网站<a class="ae ky" href="http://www.sports-reference.com/" rel="noopener ugc nofollow" target="_blank">www.sports-reference.com</a>的子网站，它是提供各种美国体育统计数据的重要来源，如棒球、(美国)足球、足球、曲棍球和一些大学体育。</p><p id="2e94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NBA中记录了各种各样的统计数据，如投篮命中率和罚球数(投篮次数、罚球次数、罚球命中率)、助攻数、失误数、抢断数和盖帽数，这些数据有助于统计得分，并被视为基本统计数据。然而，在过去的几年里，高级统计学在所有体育项目中都获得了大量的追随者。统计学家更深入地研究数据，以制定高级指标，为整体游戏提供额外的统计见解。</p><p id="63a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个项目中，我将探索基本的统计数据，可以发现记录在框分数，但也将增加两个统计数据。由于我对勇士队最近的成功以及勇士队的进攻体系如何影响球队的赛季表现感兴趣，我将包括助攻失误率和真实投篮命中率。</p><p id="53fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">助攻失误比(AstTOVr)的公式是助攻/失误<em class="mz">。</em>这个比例被认为是衡量控球的。助攻是控球机会，导致球员将球传给队友得分，而失误是失去控球机会，导致将球交给对方球队。</p><p id="0057" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下真实投篮命中率的公式和定义来自篮球参考(【https://www.basketball-reference.com/about/glossary.html】T2)。真实投篮命中率(TS%)是使用真实投篮次数(TSA)计算的。TSA的公式是投篮次数+ (0.44 *罚球次数)。TS%的公式是点数/ (2 * TSA)。真实投篮命中率是衡量投篮效率的指标，考虑了投篮命中率、三分球命中率和罚球命中率。</p><p id="4c07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据basketball-reference提供的数据和添加的两个额外的统计数据，我将探索哪些统计数据与胜利相关，以及金州勇士队在这些统计数据中的排名如何。然后，我将利用分析中发现的信息建立一个模型，预测常规赛的表现(以胜利衡量)，并衡量争夺季后赛的能力。</p><p id="0bcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为参考，NBA总共有30支NBA球队，分东部和西部两个赛区。每个会议有15个团队。然而，每个联盟只有八支球队有资格进入季后赛。NBA总共有82场常规赛来决定谁能进入季后赛。获得季后赛席位是基于单个球队在各自联盟中的获胜记录。每个大会的前八名球队将根据他们的记录进入季后赛。</p><p id="4638" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我开始这个项目是为了寻找收集我想用于分析的数据的方法。我有几个选择。然而，我知道我想尽可能方便地收集多个季节的数据。Basketball-reference在其网站上提供了数据表(CSV格式)供下载，但所提供的数据表要么是每个赛季的，要么是每个球队的。对我来说，这可能有点麻烦，因为它需要下载多个文件，然后将它们合并在一起。此外，我快速搜索了一个API，但是没有找到一个会根据我想要的信息定期更新的API。所以我决定从篮球参考网站上搜集数据。</p><p id="8b59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我开始导入以下库和模块:Pandas、BeautifulSoup、requests和time。根据<a class="ae ky" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a>文档，“BeautifulSoup是一个Python库，用于从HTML和XML文件中提取数据”。<a class="ae ky" href="https://2.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">请求</a>库是一个HTTP库，用来简化HTTP请求。这个项目中的<a class="ae ky" href="https://docs.python.org/3/library/time.html" rel="noopener ugc nofollow" target="_blank"> time </a>模块的目的是将HTTP请求分散到一定的时间内，而不是在短时间内使网站过载。</p><p id="b338" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我第一次查看该球队成立以来每支球队的汇总统计数据时，我注意到在URL中，我可以将球队的缩写改为我想要的下一支球队的数据(例如，<a class="ae ky" href="https://www.basketball-reference.com/teams/TOR/stats_basic_totals.html" rel="noopener ugc nofollow" target="_blank">https://www . basketball-reference . com/teams/TOR/stats _ basic _ totals . html</a>)。现在我知道我可以做到这一点，我为所有NBA球队创建了一个缩写列表。然后，我使用requests的library <code class="fe na nb nc nd b">.get</code>方法为每个团队收集数据，将返回的原始数据放入一个字典中，每个缩写的团队名称作为字典键。收集的原始数据是《篮球参考》提供的逐年(自球队成立以来)的基本球队数据。在抓取每个URL的过程中，我加入了<code class="fe na nb nc nd b">time.sleep</code>方法来延迟请求，这样basketball-reference web服务器的压力就会小一些。</p><p id="7868" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在有了字典中的原始数据，我必须解析HTML数据。使用BeautifulSoup的<code class="fe na nb nc nd b">html.parser</code>，我将HTML数据附加到一个列表中，这样我就可以进一步分离出我想要进行分析的数据。这里是我为我想要的数据创建列表的地方:标题、季节和统计值。我使用保存解析数据的BeautifulSoup对象的<code class="fe na nb nc nd b">.find_all</code>方法来搜索我想要的特定数据。为了获得标题(即stat名称)，我搜索了表头的第<em class="mz">个</em>标记。HTML的<em class="mz"> tr </em>标签表示它是一个表格行，这个表格行保存每个统计的数据(例如，季节、统计值)。现在为了获得每个季节，我在表行数据中搜索了表头的第<em class="mz">个</em>标记。为了获得整个赛季的每个stat值，我在表行数据中搜索了表数据<em class="mz"> td </em>标记。</p><p id="f4a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我将解析后的HTML数据分成列表，我就必须从HTML中提取文本。对于这个任务，我使用了<code class="fe na nb nc nd b">.get_text()</code>方法，将文本值放入一个新的列表中。我快速检查了一下文本值列表是否符合我的要求，并注意到我必须清理列表，因为有空白值和多余的“‘Season’]”值是我不想要的。为了清理这些数据，我在列表上使用了Python过滤器和lambda函数。然后，我使用<code class="fe na nb nc nd b">.append()</code>和<code class="fe na nb nc nd b">.extend()</code>方法将赛季年份和统计值的过滤列表组合在一起，这样就有一个干净的列表来转换和存储数据。</p><p id="4692" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我已经合并了过滤后的数据，我想把它保存成一种格式，比如CSV文件，这样所有的数据都被存储起来，我就可以把数据读入Python。为了开始将数据转换成CSV文件，我首先使用我创建的列表创建了一个Pandas数据框。然后，我使用<code class="fe na nb nc nd b">.to_csv()</code>方法将这个初始数据帧转换成CSV文件。这个初始数据框架保存了每个特许经营自开始以来的统计数据。然而，我对进一步过滤该项目的数据框感兴趣。</p><p id="852e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在进一步过滤之前，我需要再次检查数据是否符合我的要求。我读入了新创建的CSV文件作为熊猫数据框，并注意到仍然有一些不需要的功能。为了删除这些特性，我使用Pandas <code class="fe na nb nc nd b">.drop()</code>方法删除了不需要的列。现在这已经按照我喜欢的方式清理了，我为我感兴趣的NBA赛季(即2014-15到2018-19)创建了新的数据框。一个数据框代表所有30支NBA球队，另一个数据框只代表勇士队。</p><p id="d69e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在最后检查这些数据框时，特别是每一列的数据类型(dtype ),我注意到需要对“Season”列进行调整，因为这一列目前是“object”dtype。因此，我调整了“季节”列的值，将日期格式从2018–19更改为2019，表示季节的结束年份；为此，我使用了<code class="fe na nb nc nd b">.apply()</code>方法。但这还不是全部。我必须将这个新日期转换成一个数值；我在这个任务中使用了<code class="fe na nb nc nd b">pd.to_numeric()</code>函数。</p><p id="5c8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在清理和过滤数据之后，我将Pandas数据帧转换成CSV文件，用于存储和探索性分析。</p><p id="b3d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看我在GitHub上关于数据争论的<a class="ae ky" href="https://github.com/ant-L/Portfolio_Projects/blob/master/NBA_stats_and_GSW_during_championship_run/Basketball_Ref_Data_Wrangle-v2.ipynb" rel="noopener ugc nofollow" target="_blank">代码</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="7bb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://medium.com/@aliu415/nba-statistics-and-the-golden-state-warriors-during-their-championship-runs-part-2-bf7240ddbbd4" rel="noopener">第二部分</a>，我讨论探索性分析。</p></div></div>    
</body>
</html>