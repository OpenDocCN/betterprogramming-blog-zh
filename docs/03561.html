<html>
<head>
<title>How to Indefinitely Request User Input Until Valid in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中无限期地请求用户输入直到有效</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-indefinitely-request-user-input-until-valid-in-python-388a7c85aa6e?source=collection_archive---------0-----------------------#2020-02-18">https://betterprogramming.pub/how-to-indefinitely-request-user-input-until-valid-in-python-388a7c85aa6e?source=collection_archive---------0-----------------------#2020-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b50c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">无限循环和try/except语句的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0611440456a61e463cb814ea703a493f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jCagd8Tu-8VXd_s9cBrblQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sigmund?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae ky" href="https://unsplash.com/s/photos/form?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="317f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户输入是一件棘手的事情。我很早就知道，仅仅因为你提示用户的“电子邮件地址”或“年龄”，你不会得到一堆乱码。</p><p id="d6b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建时，你必须假设用户会把事情搞砸…</p><p id="64fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让我们的脚本在恶意和愚蠢中运行，我们需要建立适当的机制来请求用户的命令行输入。</p><p id="82d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们回顾一些基础知识，并为持续请求用户输入建立一个可靠的计划，直到他们输入适当的响应。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d849" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">所需工具</h1><p id="55af" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在开始之前，让我们盘点一下我们将在代码中使用的内容。</p><ul class=""><li id="86fd" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><code class="fe ni nj nk nl b">input()</code>函数:该函数接受一个字符串参数，这是屏幕上显示的提示。然后，用户将能够提交由该函数返回的响应。</li><li id="2b0d" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated"><code class="fe ni nj nk nl b">while</code>循环:我最近写了关于<a class="ae ky" href="https://medium.com/better-programming/how-to-pick-between-a-while-and-for-loop-14ef217c3776" rel="noopener"> while和for循环</a>的区别。本质上，我们选择了一个<code class="fe ni nj nk nl b">while</code>循环，因为我们不知道需要迭代的次数。</li><li id="cff3" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated"><code class="fe ni nj nk nl b">try</code> / <code class="fe ni nj nk nl b">except</code>语句:<code class="fe ni nj nk nl b">try</code> / <code class="fe ni nj nk nl b">except</code>语句将作为我们抵御会抛出异常的值的第一道防线。我在<a class="ae ky" href="https://medium.com/better-programming/how-to-start-using-try-statements-in-python-5043fe69058d" rel="noopener"> try/except </a>上写过类似的入门。</li><li id="e6d3" class="mz na it lb b lc nm lf nn li no lm np lq nq lu ne nf ng nh bi translated"><code class="fe ni nj nk nl b">if</code>带<code class="fe ni nj nk nl b">break</code>的语句:<code class="fe ni nj nk nl b">if</code>和<code class="fe ni nj nk nl b">break</code>语句的组合将帮助我们评估定制条件的有效性——这些条件不会抛出异常，但没有意义。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4797" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">构建循环</h1><p id="5af4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">好了，现在我们已经介绍了解决方案的四个组成部分，我们将要求用户输入他们的年龄。我们开始工作吧！</p><h2 id="7a2d" class="nr md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated">创建一个无限循环</h2><p id="3f6b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">第一步是创建一个无限循环。通常，当你听到<em class="od">无限循环，</em>是在“我不小心写了一个无限循环”的上下文中别担心，这次我们想要一个。</p><pre class="kj kk kl km gt oe nl of og aw oh bi"><span id="5398" class="nr md it nl b gy oi oj l ok ol">while True:<br/>  pass</span></pre><p id="0d54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用关键字<code class="fe ni nj nk nl b">pass</code>作为语法占位符。<em class="od">暂时不要运行这段代码。</em></p><h2 id="1d48" class="nr md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated">添加try/catch语句</h2><p id="a363" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们的无限循环中，第一步是添加我们的<code class="fe ni nj nk nl b">try</code> / <code class="fe ni nj nk nl b">except</code>语句。</p><pre class="kj kk kl km gt oe nl of og aw oh bi"><span id="2237" class="nr md it nl b gy oi oj l ok ol">while True:<br/>  try:<br/>    pass<br/>  except Exception as e:<br/>    print(e)</span></pre><p id="e649" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里发生的事情是，语句的<code class="fe ni nj nk nl b">try</code>部分内的所有内容都将试图被执行。如果抛出任何异常，那么将执行<code class="fe ni nj nk nl b">except</code>子句。</p><p id="3c11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，这意味着打印错误消息，它被分配给变量<code class="fe ni nj nk nl b">e</code>。</p><h2 id="8c75" class="nr md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated">请求用户输入</h2><p id="d917" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在是时候要求用户输入了。我们将使用<code class="fe ni nj nk nl b">input()</code>函数，根据定义，它返回一个字符串。我们还将转换成整数，因为我们要求用户的年龄。</p><pre class="kj kk kl km gt oe nl of og aw oh bi"><span id="5805" class="nr md it nl b gy oi oj l ok ol">while True:<br/>  try:<br/>    age = int(input("Enter your age: "))<br/>  except Exception as e:<br/>    print(e)</span></pre><h2 id="9454" class="nr md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated">定义正例</h2><p id="679e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最后一步，我们将定义有效响应的标准，这样我们就可以退出循环。这里需要定制逻辑，因为Python没有“年龄”的概念——解释器不知道负年龄没有意义。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="a66d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，现在我们可以测试我们的代码了！这里有一个输入一些假值的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1796" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="8aab" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">通过这种设置，您可以准确地定制您想要请求的内容。</p><p id="1269" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想用不同的方式处理异常吗？您可以准确地指定您捕获的异常的类型，并独立地处理每个异常。想要更改正值的标准吗？只需更新<code class="fe ni nj nk nl b">if</code>语句。</p><p id="70ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您是否有不同的方法来请求满足相同标准的用户输入？下面分享一下你的想法。感谢阅读！</p></div></div>    
</body>
</html>