<html>
<head>
<title>Let’s Build a Note-Taking App With React and FaunaDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用React和FaunaDB构建一个笔记应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-build-a-note-taking-app-with-react-and-faunadb-a2a1d5e78359?source=collection_archive---------2-----------------------#2020-01-10">https://betterprogramming.pub/lets-build-a-note-taking-app-with-react-and-faunadb-a2a1d5e78359?source=collection_archive---------2-----------------------#2020-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2d48" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以下是如何使用React和FaunaDB创建现代的动态单页面应用程序(spa)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/15aa56ba2599fd8eb24c1717187961ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HvLtGg3z6y6nL6UeJs327Q.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们要打造的是——一款笔记应用</p></figure><p id="3033" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">快到2020年了，你有很多方法可以构建你的web应用。我们将探讨如何使用React和FaunaDB来构建快速、响应迅速、有趣的应用程序。</p><p id="6cb8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">开发应用程序应该很有趣。让我们就这么做吧。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="3f11" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">我们正在建造的东西</h1><p id="1f43" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们将构建一个笔记应用程序，因为它清楚地展示了<a class="ae my" href="https://fauna.com/" rel="noopener ugc nofollow" target="_blank"> FaunaDB </a>和<a class="ae my" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>如何协同工作。</p><p id="bfce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了做笔记，我们需要实现CRUD(创建、读取、更新、删除)功能，这是所有现代应用程序的基础。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/e1f6b4104675320e0ac93967cd30fda1.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*AWUPGQJ0hAjf5jp4xWngSA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React和FaunaDB如何协同工作</p></figure><p id="bae2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们希望有一个架构，让我们的用户创建新的笔记，编辑现有的笔记，以及从数据库中删除和获取笔记。</p><p id="9c78" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">速度、正确性和安全性至关重要，因此我们需要能够直接从浏览器与数据库进行交互，并确保对数据库的一致读写(因此我们的笔记按顺序存储)，例如，有保证的事务。</p><p id="9488" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些都使得FaunaDB和React成为一个有吸引力的选择。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="3083" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">为什么是FaunaDB</h1><p id="cbc7" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">FaunaDB速度快，伸缩性好，并且易于使用。虽然拥有这些东西很好，但为数据库选择云提供商的最大好处是易于启动和运行。</p><p id="fc98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">FaunaDB很好地解决了所有这些问题，而不是花费数小时进行数据库设置和支持维护。我们越少考虑搭建，我们就越能专注于实际构建应用程序。</p><p id="38e8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们不必考虑一致性、规模、复制、冗余等问题。— FaunaDB负责所有这些。我们可以专注于核心应用程序，而不是处理数据库搭建和设置过程。</p><p id="2123" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">FaunaDB使用<a class="ae my" href="https://fauna.com/blog/distributed-consistency-at-scale-spanner-vs-calvin" rel="noopener ugc nofollow" target="_blank"> Calvin </a>协议来维护数据的几个一致且完整的副本，称为<em class="na">副本，</em>能够在每个节点上读写。一个副本由几个地理感知节点组成，每个节点在一个本地环境中包含完整数据集的一个分区。</p><p id="162e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">FaunaDB还通过安全访问密钥、基于属性的访问控制、本地实例级权限、数据库和客户端的TLS/SSL、通过数据库层次结构的客户端/租户分离、优先级工作负载以及用于客户端直接访问数据库的安全访问令牌来提供身份验证支持。FaunaDB集群需要身份验证，不能意外失去保护。</p><p id="861d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">注:</strong>如果你想了解更多，我写了一篇关于为什么React和FaunaDB是好选择的文章。</p><div class="nb nc gp gr nd ne"><a href="https://medium.com/better-programming/supercharge-your-jamstack-with-faunadb-and-react-js-e2960f731a58" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">用FaunaDB和React.js增强您的JAMstack</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">以下是如何使用FaunaDB和React.js将JAMStack提升到一个新的水平</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">medium.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ks ne"/></div></div></a></div></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="218b" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">为什么要反应</h1><p id="ee02" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">React已经证明了自己是事实上的旗舰前端库。更重要的是，使用它很有趣，开发应用程序从未如此简单。</p><p id="a9cf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到现在为止，我已经使用React五年多了。作为一个旁注，我认为有多种好的解决方案，如Vue，Angular，Svelte等。在一天结束的时候，你不应该关心选择哪个库，只要工作完成了。</p><p id="131d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事不宜迟，我们开始吧！</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="55b7" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">入门指南</h1><p id="d484" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">既然我们要使用React和FaunaDB，自然我们需要安装Node。</p><h2 id="564a" class="nt mc it bd md nu nv dn mh nw nx dp ml lh ny nz mn ll oa ob mp lp oc od mr oe bi translated">先决条件</h2><ul class=""><li id="6885" class="of og it la b lb mt le mu lh oh ll oi lp oj lt ok ol om on bi translated">文本编辑器(我使用Visual Studio代码)</li><li id="d41b" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">Node.js已安装— <a class="ae my" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">通过网站或终端</a>在此安装</li><li id="2522" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">基于Unix的终端</li><li id="52c8" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">网页浏览器</li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="74a0" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创建-反应-应用</h1><p id="c662" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">打开您的终端，用<a class="ae my" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>创建一个全新的React应用程序。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="4714" class="nt mc it ou b gy oy oz l pa pb">npx create-react-app react-faunadb-note-app &amp;&amp; cd react-faunadb-note-app &amp;&amp; start</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/23876ff1ab5ebfbef191aab3e5655700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oxQKzoaF6kaDyq7EKHZMcQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">启动我们的React应用</p></figure><p id="d290" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在我们已经建立了项目，让我们创建我们的文件夹。我们需要以下目录:</p><ul class=""><li id="d0e4" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated"><code class="fe pg ph pi ou b">config</code> —将所有与数据库相关的逻辑放在这里</li><li id="7a56" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated"><code class="fe pg ph pi ou b">components</code> —反应相关的东西</li><li id="ed16" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated"><code class="fe pg ph pi ou b">api</code> —获取、编辑和删除笔记的方法</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/88133e1d9e1a5bc39e38a74a7bd2bab4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ncAs82Mb-p7EsoS5I-r5Ng.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用mkdir命令创建目录</p></figure><p id="24e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">注意</strong>:如果你不太熟悉终端，我推荐你通读一下“<a class="ae my" href="https://medium.com/better-programming/here-are-11-console-commands-every-developer-should-know-54e348ef22fa" rel="noopener">这里是每个开发者都应该知道的11个控制台命令</a>”</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="814f" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">建立FaunaDB</h1><p id="a749" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">去FaunaDB网站注册一个新用户——这是免费的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/f8f04901271e3128657866071b6af28d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Puc57qzyPMpRQVypF5oDZA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae my" href="https://dashboard.fauna.com/accounts/register" rel="noopener ugc nofollow" target="_blank">动物报名</a></p></figure><p id="39df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你有了一个帐户并登录，创建一个数据库——我称我的数据库为<code class="fe pg ph pi ou b">notes_app</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/c90a137b1edaa60cc123753c4844748d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3eEnMJW_kRAR2FjJa2giw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FaunaDB界面控制台</p></figure><p id="1910" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">太好了！一旦我们有了数据库，创建一个访问键。这用于对数据库的连接授权。我们希望控制谁可以读写数据库，这个键将允许我们这样做。但在此之前，让我们为数据库创建一个新角色。</p><p id="736a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在此找到角色选项:控制台→应用程序→安全→角色→新角色</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/1d7932cf756a7294c57c0b7d86f0552f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1kdZj2hr7hPVW5nnvi3wQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建FaunaDB角色</p></figure><p id="2a64" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，继续创建数据库密钥。我们需要钥匙来授权进入数据库。</p><p id="2a0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">控制台→应用程序→安全→密钥→新密钥</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/e937645f615f04f2687a5685b179283f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_dTZIOlGMk4e4YRnjp2Clw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新密钥</p></figure><p id="ffe9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你按下保存，你应该会看到FaunaDB键。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/83ebea0ed4f90d412a6f1e9c5b9aa0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUmfb_g9EJA1nH5cYYDgkA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FaunaDB</p></figure><p id="8693" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要记住的是，这个密钥有管理员权限，这意味着如果这个密钥被泄露，这将是一个很大的安全漏洞。</p><p id="a00a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能想从一把不太有力的钥匙开始。需要考虑的事情。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/2ae26c08388a662f6cf40a1cce423e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WRTUjc8u9aRO3PMtgmQEqQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd pq">可选:</strong>改为使用服务器角色创建密钥</p></figure><p id="ca91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将密钥复制到您的文本编辑器或某个安全的地方—我们稍后会用到它。</p><p id="18ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用FaunaDB作为文档存储数据库。还有其他选项— <a class="ae my" href="https://db-engines.com/en/system/FaunaDB" rel="noopener ugc nofollow" target="_blank">点击这里查看选项</a>。因为我们已经在控制台上，所以让我们创建notes集合。一个<em class="na">集合</em>是一组文档。在这种情况下，每个便笺都是一个文档。</p><div class="kj kk kl km gt ab cb"><figure class="pr kn ps pt pu pv pw paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/4367a63b604d55b4a17ebfbb5ae4871c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*x47rY5gAYCez00aGScxRVA.png"/></div></figure><figure class="pr kn px pt pu pv pw paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/0cb2f3a7818c33da53c8215108e834e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*sqs_G0ExrrMINSo4pIz3sA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk py di pz qa translated">创建FaunaDB集合——这是我们存放笔记的地方</p></figure></div><p id="d6fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦我们创建了一个集合，默认情况下，FaunaDB将对该集合进行索引。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qb"><img src="../Images/0a94dd82fbb3ef2185f483053b6a3a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FV_tk1KEI8a6gN1_08sHsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">notes集合的all_notes索引</p></figure><p id="6bd7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">索引是由数据库系统维护的存储结构，用于促进数据子集的有效检索。FaunaDB中有效的模式设计利用了对关系建模和物化索引的一流支持。</p><p id="1bb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您有兴趣了解关于索引查询的更多信息，请查看FaunaDB 中的“<a class="ae my" href="https://fauna.com/blog/index-queries-in-faunadb" rel="noopener ugc nofollow" target="_blank">索引查询”</a></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a316" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">将React连接到FaunaDB实例</h1><p id="7e15" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在我们已经从FaunaDB获得了我们需要的一切，让我们用React把它连接起来。</p><h2 id="2644" class="nt mc it bd md nu nv dn mh nw nx dp ml lh ny nz mn ll oa ob mp lp oc od mr oe bi translated">安装依赖项</h2><p id="1d66" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">尽可能多地重用代码使我们的生活更加轻松，并加快了我们的开发速度。让我们利用受欢迎的图书馆。我们的应用程序具有以下依赖性:</p><ul class=""><li id="0d04" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated"><code class="fe pg ph pi ou b"><a class="ae my" href="https://www.npmjs.com/package/faunadb" rel="noopener ugc nofollow" target="_blank">faunadb</a></code>—<a class="ae my" href="https://fauna.com/" rel="noopener ugc nofollow" target="_blank">faun ADB</a>的FaunaDB JavaScript驱动程序</li><li id="f0d6" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated"><code class="fe pg ph pi ou b"><a class="ae my" href="https://www.npmjs.com/package/antd" rel="noopener ugc nofollow" target="_blank">antd</a></code> —企业级UI设计语言和React UI库</li><li id="c736" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated"><code class="fe pg ph pi ou b"><a class="ae my" href="https://www.npmjs.com/package/react-toastify" rel="noopener ugc nofollow" target="_blank">react-toastify</a></code> —轻松响应通知</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qc"><img src="../Images/67ea0003bfbd1ddda0cecee0631f6ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jcj8pkEOAsTEDXZ-fDxJbg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安装依赖项</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="3ef8" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创建。环境文件</h1><p id="742e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">因为我们不希望我们的令牌和密钥由于被推入存储库而泄露，所以我们希望利用<code class="fe pg ph pi ou b">.env</code>文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qd"><img src="../Images/28c45af0f92bc7cf5add41b35a63bf23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogDQABWy3IULkRVo9qVUXQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创造。环境文件</p></figure><p id="c18c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">继续将<code class="fe pg ph pi ou b">.env</code>文件添加到<code class="fe pg ph pi ou b">.gitignore</code>中。应该将<code class="fe pg ph pi ou b">.env.example</code>推入库中，但不带值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qe"><img src="../Images/8719b8faeca996091efc397e5d7a8186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNpJ0z2ZtQTwulHu8zStzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将FaunaDB键添加到。环境文件</p></figure><p id="f364" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确保用FaunaDB键替换<code class="fe pg ph pi ou b">YOURKEYHERE</code>。继续并重新启动服务器。通过这样做，我们现在可以通过<code class="fe pg ph pi ou b">process.env.REACT_APP_FAUNADB_KEY</code>值访问FaunaDB键。</p><p id="3481" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您的项目架构现在应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qf"><img src="../Images/341a95513ab9217231b50d3f773b7388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nUzmQCwQdH28Z38BV5Zf3Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们当前的React和FaunaDB项目架构</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e1ad" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">与动物的最初联系</h1><p id="6415" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们已经走了很长一段路——是时候连接到我们的数据库了。继续在<code class="fe pg ph pi ou b">config</code>目录下创建一个名为<code class="fe pg ph pi ou b">db.js</code>的文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/config/db.js <strong class="ak"> </strong> —我们连接到FaunaDB并导出实例</p></figure><p id="597f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">建立连接后，我们可以开始查询我们的FaunaDB。还记得<code class="fe pg ph pi ou b">api</code>目录吗？这是我们将要放置所有与查询相关的逻辑的地方。这样，我们可以简单地在React组件中调用类似于<code class="fe pg ph pi ou b">fetchAllNotes()</code>的东西。</p><p id="60d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们这样做是因为我们希望分离关注点，并使我们的React组件易于阅读和理解。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="45ec" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">编写FaunaDB查询</h1><p id="9c10" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">notes应用程序允许用户创建、删除、编辑和获取所有笔记。让我们从获取集合中的所有笔记开始。</p><h2 id="78af" class="nt mc it bd md nu nv dn mh nw nx dp ml lh ny nz mn ll oa ob mp lp oc od mr oe bi translated">获取所有笔记</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/api/getAllNotes.js</p></figure><p id="2f1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这可能看起来很多，但相对简单。上面的代码是这样做的:</p><ul class=""><li id="14f9" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated">导入FaunaDB数据库和查询实例</li><li id="909d" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">使用<code class="fe pg ph pi ou b">notes</code>索引查询所有笔记。该查询返回所有引用，我们映射这些引用并返回结果。</li><li id="701c" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">在出现网络错误的情况下，我们会捕获错误并发出警告。当我们想给用户提供反馈时，这很方便。</li></ul><p id="26d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意我们正在使用<em class="na">异步承诺。</em>如果这个概念对你来说是新的，看看<a class="ae my" href="https://medium.com/better-programming/improve-your-asynchronous-javascript-code-with-async-and-await-c02fc3813eda" rel="noopener">“如何用Async和Await改进你的异步JavaScript代码”我在那里解释承诺。</a></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="5b89" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">编辑便笺</h1><p id="ba18" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">编辑FaunaDB记录很简单。我们需要做的就是用ref ID和新值调用<code class="fe pg ph pi ou b">Update</code>查询。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/api/editNote.js</p></figure><p id="a3b6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你注意到次要的细节了吗？</p><p id="2aaf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们用一个带两个参数的函数包装我们的查询，即我们正在编辑的<code class="fe pg ph pi ou b">noteId</code>和新的注释文本。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="4982" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">删除注释</h1><p id="67f0" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">删除注释类似于编辑。使用注释引用ID调用<code class="fe pg ph pi ou b">Delete</code>查询。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="0a78" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创建便笺</h1><p id="7a9c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">最后，您可以通过查询FaunaDB向集合中添加新的条目。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div></figure><p id="7687" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意FaunaDB已经逻辑地命名了它的查询，例如<code class="fe pg ph pi ou b">q.Create</code>、<code class="fe pg ph pi ou b"> q.Delete</code>、<code class="fe pg ph pi ou b">q.Update</code>等。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="107c" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">导出查询</h1><p id="3c51" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在我们已经完成了查询代码的编写，是时候导出查询了，这样我们就可以在React组件中使用它们。继续在<code class="fe pg ph pi ou b">api</code>目录中创建<code class="fe pg ph pi ou b">index.js</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导入和导出我们的查询</p></figure><p id="769b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的代码让我们在一行代码中完成以下任务，而不是编写四行导入代码。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="9cfb" class="nt mc it ou b gy oy oz l pa pb">import { getAllNotes, deleteNote, editNote, createNote } from ‘./api’</span></pre><p id="70ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你曾经迷失过，<a class="ae my" href="https://github.com/indreklasn/react-faunadb-app-demo" rel="noopener ugc nofollow" target="_blank">这里是源代码</a>。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e215" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">用React调用FaunaDB查询</h1><p id="063c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">剩下要做的就是调用FaunaDB查询并呈现结果。让我们从打开<code class="fe pg ph pi ou b">App.js</code>文件并编写以下代码开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.js</p></figure><p id="acea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们是:</p><ul class=""><li id="70d9" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated">从<code class="fe pg ph pi ou b">api</code>目录导入我们的FaunaDB查询</li><li id="3146" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">用<code class="fe pg ph pi ou b">useState</code>钩子为音符创建一个状态。如果你不确定React钩子，看看我之前写的<a class="ae my" href="https://medium.com/better-programming/demystifying-react-hooks-a0b56a6254c2" rel="noopener">“揭开React钩子的神秘面纱”</a>这篇文章。</li><li id="1975" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">在<code class="fe pg ph pi ou b">useEffect</code>钩子内部调用<code class="fe pg ph pi ou b">getAllNotes</code>查询。这个钩子在组件挂载之前被调用。如果你不熟悉这种模式，<a class="ae my" href="https://medium.com/@indreklasn/how-to-fetch-data-from-an-api-with-react-hooks-9e7202b8afcd?" rel="noopener">看看这篇文章，了解它是如何工作的</a>。</li></ul><p id="efc4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是查询返回的结果。我们将结果保存为<code class="fe pg ph pi ou b">notes</code>状态，并用React进行渲染。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/76dd2a1f4496afdacf6af0a6bba3ea77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9vl9aEZlCo4mO6Wx7xALw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><code class="fe pg ph pi ou b">getAllNotes query result</code></p></figure><p id="5da2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可能想知道这些时间戳是干什么用的。嗯，FaunaDB为您跟踪这些，因为它有内置的版本控制。如果你愿意，你甚至可以查询你笔记的历史。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9652" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">创建笔记</h1><p id="e70c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">继续在<code class="fe pg ph pi ou b">components</code>目录中创建以下文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qj"><img src="../Images/57b8d48d26844c44ded964d59821aabd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rM-jB-gwI3IE3iQZhzrJWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的组件文件</p></figure><ul class=""><li id="aa05" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated"><code class="fe pg ph pi ou b">NoteForm.js </code> —这是用于创建新便笺的文件</li><li id="601b" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated"><code class="fe pg ph pi ou b">NoteList.js</code> —呈现所有注释以及与注释相关的功能，例如编辑和删除</li><li id="1abf" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated"><code class="fe pg ph pi ou b">index.js </code> —用于导入和导出</li></ul><p id="e4a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">太好了，我们先从<code class="fe pg ph pi ou b">NoteForm.js</code>开始吧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/components/NoteForm.js</p></figure><p id="b57b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意在底部，我们用Ant设计的<code class="fe pg ph pi ou b">Form</code>高阶组件(HOC)包装了我们的<code class="fe pg ph pi ou b">NoteForm</code>组件。这提供了注入，并让我们能够访问<code class="fe pg ph pi ou b">NoteForm</code>组件中的表单<code class="fe pg ph pi ou b">prop</code>。</p><p id="73d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">属性包含表单验证的方法。我们使用了<code class="fe pg ph pi ou b">getFieldDecorator</code>、<code class="fe pg ph pi ou b">validateFields</code>和<code class="fe pg ph pi ou b">resetFields</code>方法。</p><h2 id="28be" class="nt mc it bd md nu nv dn mh nw nx dp ml lh ny nz mn ll oa ob mp lp oc od mr oe bi translated">实施处理表单提交</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div></figure><p id="ae16" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们正在验证表格。如果没有错误，并且至少有一个字符，我们将提交表单并查询我们的FaunaDB实例来保存注释。</p><p id="9098" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意我们使用了<code class="fe pg ph pi ou b">notes</code>和<code class="fe pg ph pi ou b">setNotes</code>道具。我们必须从<code class="fe pg ph pi ou b">App.js</code>传递这些值——如果你特别注意，你会注意到我们正在从<code class="fe pg ph pi ou b">props</code>和<code class="fe pg ph pi ou b">form</code>对象中解构值。如果不熟悉这种模式，请查看<a class="ae my" href="https://medium.com/better-programming/use-these-javascript-features-to-make-your-code-more-readable-ec3930827226" rel="noopener">“如何使用析构”</a></p><p id="488f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，继续将组件导入到<code class="fe pg ph pi ou b">index.js</code>，这样我们可以方便地导入它们。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/components/index.js</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="75d7" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">式样</h1><p id="d4c7" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我去创造了以下风格。将以下内容复制到<code class="fe pg ph pi ou b">App.css</code>文件中。请随意做任何修改。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">src/App.css</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a8d6" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">使用NoteForm组件</h1><p id="61e9" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">是时候使用<code class="fe pg ph pi ou b">NoteForm</code>组件了。将组件导入<code class="fe pg ph pi ou b">App.js</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div></figure><p id="ede7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不要忘记将道具传递给<code class="fe pg ph pi ou b">NoteForm</code>组件。这是您应该在浏览器中看到的内容。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qk"><img src="../Images/790677292605ae80ee991235a0e9ee5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3waDxX4R_elh10id51q4OQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">NoteForm.js React组件</p></figure><p id="5c9c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">表单可以工作，但是结果还没有呈现出来。让我们解决这个问题。打开<code class="fe pg ph pi ou b">NoteList.js</code>组件，并编写以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div></figure><ul class=""><li id="fbc9" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated">我们将所有的音符映射并呈现出来</li><li id="6896" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">在每个笔记上，我们都添加了事件监听器，以允许编辑内容和删除笔记</li></ul><p id="637d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将<code class="fe pg ph pi ou b">NoteList</code>导入<code class="fe pg ph pi ou b">App</code>，并将其放置在<code class="fe pg ph pi ou b">NoteForm</code>组件下方。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.js</p></figure><p id="c9e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不要忘记实现<code class="fe pg ph pi ou b">handleRemove</code>和<code class="fe pg ph pi ou b">handleEdit</code>方法，并将它们作为道具传递给<code class="fe pg ph pi ou b">NoteList</code>组件。</p><p id="3d96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们走吧！打开浏览器，在<code class="fe pg ph pi ou b">NoteForm</code>中键入一些内容，然后按回车键。我们现在应该看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ql"><img src="../Images/be399528baecc0a0700b43bda585692b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8aogbbUulYqRT55CWXMbew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加新注释</p></figure><p id="c71a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们检查我们的FaunaDB集合，我们应该看到新的笔记插入。尝试创建新笔记，编辑和删除。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/f40286cbc8971a0ad55f35ebaf6b53dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tD8u9tszN_Q7wFv-b2k7tw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FaunaDB收藏中的新笔记</p></figure><p id="129a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">干得好——你做得非常好！</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8741" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">可选:添加Toast通知</h1><p id="ae12" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">如果要在插入或删除便笺时显示绿色通知，请执行以下操作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div></figure><ul class=""><li id="b4f5" class="of og it la b lb lc le lf lh pd ll pe lp pf lt ok ol om on bi translated">首先，从<code class="fe pg ph pi ou b">react-toastify</code>库中导入样式和<code class="fe pg ph pi ou b">ToastContainer</code></li><li id="374d" class="of og it la b lb oo le op lh oq ll or lp os lt ok ol om on bi translated">将<code class="fe pg ph pi ou b">ToastContainer</code>放在<code class="fe pg ph pi ou b">return</code>方法中。这使我们能够访问toast通知。我们现在可以在应用程序中的任何地方简单地呼叫<code class="fe pg ph pi ou b">toast.success(‘message here’)</code>或<code class="fe pg ph pi ou b">toast.error(‘error message’)</code>。</li></ul><p id="5cf9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尝试一下——将toast消息放到<code class="fe pg ph pi ou b">handleRemove</code>方法中。不要忘记从包中导入<code class="fe pg ph pi ou b">toast</code>方法，无论你在哪里使用它。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="bbf1" class="nt mc it ou b gy oy oz l pa pb">import { toast } from 'react-toastify';</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qg qh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">App.js</p></figure><p id="72b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，如果我们单击删除图标，我们应该会看到我们的吐司。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qn"><img src="../Images/70360c14378db6f92dccc0ae8ba5763e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcqAz7EH-iz4Yigfp2gIZA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">移除笔记时显示toast通知</p></figure><p id="6e44" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">干得好！如果你曾经迷失过，这里有这篇文章的源代码。</p><div class="nb nc gp gr nd ne"><a href="https://github.com/indreklasn/react-faunadb-app-demo" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">indreklasn/react-faunadb-app-demo</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="qo l np nq nr nn ns ks ne"/></div></div></a></div><p id="b68a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">需要考虑的事项:</strong>出于演示的目的，当前的应用程序允许任何访问网站的用户创建和阅读笔记。在真实场景中，出于安全原因，这不是一个好主意。通常，你会想把应用程序放在一个安全的登录页面后面，你可以使用<a class="ae my" href="https://app.fauna.com/tutorials/authentication" rel="noopener ugc nofollow" target="_blank"> FaunaDB的登录功能</a>或其他解决方案来实现。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="295d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">结论</h1><p id="d2df" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">谢谢你能走到这一步。我希望你学到了新东西。请随意尝试FaunaDB和React——这是一个有趣的组合。我强烈建议给它一个机会。</p></div></div>    
</body>
</html>