<html>
<head>
<title>Functional Programming Series(1): What Is a Semigroup?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数编程系列(1):什么是半群？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/functional-programming-series-what-is-a-semigroup-c1ff987db8c?source=collection_archive---------10-----------------------#2020-07-21">https://betterprogramming.pub/functional-programming-series-what-is-a-semigroup-c1ff987db8c?source=collection_archive---------10-----------------------#2020-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="721b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在函数式编程世界中，这意味着什么？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3ac527f12145b87e352ef23e73c329a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M9V-UL2GkmxwWfZd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@scienceinhd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">科普高清</a>照片</p></figure><p id="3b64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">欢迎来到函数式编程系列。在这篇文章中，我将尽可能用最简单的方式来解释FP的概念。</p><p id="521a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还在学习函数式编程。但是你知道，理解FP的每一个概念都是很混乱的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1589" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在进入正题之前先说岩浆</h1><p id="1356" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为什么我突然想说岩浆？因为FP里几乎每一个概念都不是孤立存在的。它们大多来自于类似父母的概念。就像你应该知道什么是运动，才能理解什么是足球。半群来源于岩浆，岩浆是FP中许多已有概念的根概念。</p><p id="93a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个由数字组成的数组，<code class="fe mz na nb nc b">[1, 2, 3]</code>，我有一些函数执行如下。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="fbbe" class="nh md it nc b gy ni nj l nk nl">const magmas = {<br/>  add: (x: number, y: number): number =&gt; x + y,<br/>  sub: (x: number, y: number): number =&gt; x - y,<br/>  mul: (x: number, y: number): number =&gt; x * y,<br/>  div: (x: number, y: number): number =&gt; x / y,<br/>};</span></pre><p id="b11e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">magmas</code>中的所有函数都是两个arity函数，接受两个数字并返回一个数字。例如，<code class="fe mz na nb nc b">magmas.sub(5, 3)</code>等于2，一个数字。</p><p id="f78f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设有一组元素，<em class="nm"> S </em>，它们都是<em class="nm"> T </em>类型(在这个例子中是数字类型)。并且你从<em class="nm"> S </em>、<em class="nm"> a </em>和<em class="nm">b</em>中挑选任意两个元素，如果<em class="nm"> a </em> <em class="nm"> b </em>的结果也是一个<em class="nm"> T </em>类型元素，它是<em class="nm"> S、</em>的成员，并且如果这对<em class="nm"> S </em>中的任意两个元素都有效，<em class="nm"> S </em>被认为是岩浆。(本例中的符号表示任何使用两个元素的操作)。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="cc5d" class="nh md it nc b gy ni nj l nk nl">Magma: a ∈ S, b ∈ S --&gt; a·b ∈ S</span></pre><p id="3c28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果只包含四个二元运算，+，-，*和/，那么<code class="fe mz na nb nc b">magmas</code>中的所有函数在运算后总是返回一个数字类型的元素。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="30cc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是半群？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e6428b02b0a64658e34bf63a9bd4387a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*KP6HXiTwPKL0zRjL.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://en.wikipedia.org/wiki/Magma_(algebra)" rel="noopener ugc nofollow" target="_blank">维基</a></p></figure><p id="fb90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，我在这篇文章的前面说过半群来自岩浆。Magma是一组元素，它总是确保其中的每一个元素在运算后仍然是同一类型的元素，例如加减。</p><p id="1c09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，如果一个元素的集合<em class="nm"> S </em>是半群，那么它的每个元素都必须满足Magma的条件。另外，他们还必须遵守以下规则。</p><p id="db8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<em class="nm"> a </em>、<em class="nm"> b </em>和<em class="nm"> c </em>是集合<em class="nm"> S </em>的成员，并且其中是二元运算，(<em class="nm">a</em>T13】bc必须等于<em class="nm">a</em>(<em class="nm">b</em>T19】c)。他们两个的结果一定是<em class="nm"> S </em>的成员。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="1f7f" class="nh md it nc b gy ni nj l nk nl">Semigroup: a ∈ S, b ∈ S, c ∈ S --&gt; (a·b)·c = a·(b·c) ∈ S</span></pre><p id="b515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而这个特性在FP界被称为“结合性”。</p><p id="d9fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们扩展我们之前在岩浆章节中使用的例子。我要做的是让这些方法多带一个参数。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="a042" class="nh md it nc b gy ni nj l nk nl">const semigroups = {<br/>  mul: (x: number, y: number, z: number): number =&gt; x * y * z,<br/>};</span></pre><p id="e85a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在它们是三个arity函数，接受三个参数并返回一个Number类型的元素。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="bc5e" class="nh md it nc b gy ni nj l nk nl">semigroups.mul(5, 3, 2) = 10</span></pre><p id="7212" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当这三个数相乘时，相乘的顺序并不重要。(5*3)*2 = 5*(3*2).左手边给你的结果是30，右手边也是。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="c951" class="nh md it nc b gy ni nj l nk nl">(5 / 3) / 2 = 0.8333...34<br/>5 / (3 / 2) = 3.3333...35</span></pre><p id="1134" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是在这个例子中，每个结果给你一个不同的值。所以(5 / 3) / 2不等于5/(3/2)；这不可能是半群算子。</p><p id="b4ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我们已经证实乘法可以是半群算子。那么我们可以说(数，*)是一个半<strong class="lb iu">群</strong>。(从“群”这个词可以看出，半群是指一对某类的集合和一个二元算子)</p><p id="bab8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在轮到你思考加号(+)、减号(-)和除法(/)是否可以是半群算符了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5349" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">其他函数式编程库是如何使用这个的？</h1><p id="cc7f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有一些FP库。再来看最著名的一个，<a class="ae ky" href="https://github.com/fantasyland/fantasy-land" rel="noopener ugc nofollow" target="_blank"> <em class="nm">幻境</em> </a>。</p><p id="4fcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/fantasyland/fantasy-land" rel="noopener ugc nofollow" target="_blank"> <em class="nm">幻境</em> </a>更像是一个关于函数式编程的规范。所以现代函数式编程库通常遵循<a class="ae ky" href="https://github.com/fantasyland/fantasy-land" rel="noopener ugc nofollow" target="_blank"> <em class="nm">幻想世界</em> </a>的指南。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/622e21080a98d77d27a1c73f13ed43b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mljAiT9UV0OsRjc2sJqSQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片是<em class="np">幻境半群</em>的截图</p></figure><p id="6617" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://github.com/fantasyland/fantasy-land#semigroup" rel="noopener ugc nofollow" target="_blank"> <em class="nm">幻境</em> </a>中，半群略有不同。他们的半群必须包含名为<code class="fe mz na nb nc b">concat</code>的方法，<code class="fe mz na nb nc b">concat</code>在结合律方面必须是无辜的。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="9f33" class="nh md it nc b gy ni nj l nk nl">const concat = (x: string, y: string, z: string): string =&gt; {<br/>  return x + y + z;<br/>};</span></pre><p id="4b35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们检查一下这个<code class="fe mz na nb nc b">concat</code>是否真的满足半群需要的所有条件。</p><ol class=""><li id="f13a" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated">这种方法总是能保证是岩浆吗？</li></ol><p id="ac21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的。如果<code class="fe mz na nb nc b">x</code>是“I”，<code class="fe mz na nb nc b">y</code>是“like”，<code class="fe mz na nb nc b">z</code>是“FP”，<code class="fe mz na nb nc b">x</code>、<code class="fe mz na nb nc b">y</code>、<code class="fe mz na nb nc b">z</code>是String的成员，<code class="fe mz na nb nc b">x+y+z</code> (IlikeFP)也是String的成员。</p><p id="888c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.这种方法总是保证它是半群吗？</p><p id="746a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的。如果<code class="fe mz na nb nc b">x</code>是“I”，<code class="fe mz na nb nc b">y</code>是“like”，而<code class="fe mz na nb nc b">z</code>是“FP”，<code class="fe mz na nb nc b">x</code>、<code class="fe mz na nb nc b">y</code>、<code class="fe mz na nb nc b">z</code>是字符串的成员，<code class="fe mz na nb nc b">(x+y)+z</code> (IlikeFP)等于<code class="fe mz na nb nc b">x+(y+z)</code> (IlikeFP)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3f5b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="5642" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们讲过岩浆和半群；两者都是FP中的重要概念。他们不太可怕。你需要做的就是努力做出自己的榜样。</p><p id="f1fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">推荐你看一下<a class="ae ky" href="https://github.com/fantasyland/fantasy-land" rel="noopener ugc nofollow" target="_blank"> <em class="nm">幻境</em> </a>说明书。</p><h2 id="9df4" class="nh md it bd me nz oa dn mi ob oc dp mm li od oe mo lm of og mq lq oh oi ms oj bi translated">资源</h2><ul class=""><li id="89a6" class="nq nr it lb b lc mu lf mv li ok lm ol lq om lu on nw nx ny bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Magma_(algebra)" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/Magma _(代数)</a></li><li id="32dd" class="nq nr it lb b lc oo lf op li oq lm or lq os lu on nw nx ny bi translated">【https://en.wikipedia.org/wiki/Semigroup】</li><li id="fa70" class="nq nr it lb b lc oo lf op li oq lm or lq os lu on nw nx ny bi translated"><a class="ae ky" href="https://github.com/fantasyland/fantasy-land" rel="noopener ugc nofollow" target="_blank">https://github.com/fantasyland/fantasy-land</a></li></ul></div></div>    
</body>
</html>