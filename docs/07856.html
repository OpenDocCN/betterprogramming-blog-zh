<html>
<head>
<title>5 More Kotlin Extensions for Android Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向Android开发者的5款Kotlin扩展</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-more-kotlin-extensions-for-android-developers-3857b1f16407?source=collection_archive---------2-----------------------#2021-02-26">https://betterprogramming.pub/5-more-kotlin-extensions-for-android-developers-3857b1f16407?source=collection_archive---------2-----------------------#2021-02-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e343" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">联机状态、权限、可扩展字符串等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a0efd07fdb1374b4135728e78a934029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wbUX-eW1P6WsQBtb"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@shotbyrain?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ave Calvar </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="ca61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经阅读了大量与Kotlin扩展相关的文章，但本文并不完全是关于扩展的。这是为了让你的代码更有表现力，所以我列出了我最喜欢的扩展，让代码尽可能自然。</p><p id="7473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是本系列的第二部分。如果你是Kotlin或扩展概念的新手，我强烈推荐你阅读第一部分来学习基础知识。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9d09" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.isOnline</h1><p id="492b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在大多数移动应用程序中，网络请求是不可避免的任务。检查用户是否连接到互联网至关重要。更进一步，一些应用程序在用户界面的顶部或底部显示一个小的snackbar类型的横幅，以指示用户在线/离线。</p><p id="ac62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查用户是否连接到互联网几乎是任何移动开发者的日常任务。因此，我们实现的代码应该是整洁的，并且在没有任何先验知识的情况下表达自己。</p><p id="4229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用Kotlin扩展主要是为了这些用例。大多数情况下，我们试图在我们的片段、活动、服务等中检查互联网连接。其中常见的一个就是Android <code class="fe mz na nb nc b">Context</code>。我们可以在名为<code class="fe mz na nb nc b">isOnline</code>的<code class="fe mz na nb nc b">Context</code>类上创建一个扩展函数并实现代码，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="5d40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果用户在线，该函数返回<code class="fe mz na nb nc b">true</code>。否则，它返回<code class="fe mz na nb nc b">false</code>。我们还可以在Kotlin中使用lambdas和高阶函数，使其更具声明性。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b283" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们移除了布尔返回类型，并使用高阶函数来传递应该在各自的事件中执行的函数。所以现在我们不需要在调用点使用<code class="fe mz na nb nc b">if</code>语句。相反，我们使用lambda函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ab4a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.显示或隐藏键盘</h1><p id="40f2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">安卓键盘事件维护的一塌糊涂。最近，Android团队一直在关注这个问题，并提供了类似window insets等解决方案。坦率地说，大多数开发人员还没有采用它们。在我的日常工作中，我使用以下扩展函数来显示和关闭键盘。</p><p id="8fb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Kotlin之前，我将这些函数用作<code class="fe mz na nb nc b">Utility</code>类静态函数，并从单例实例中调用它们，这是一种更古怪的方法。然后我决定让它尽可能自然地触发，所以我创建了两个视图扩展函数来打开和关闭键盘:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c24b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.权限检查</h1><p id="54e5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是我最喜欢的扩展之一，因为它提高了我的生产率，同时增强了代码的可读性。谷歌为Android 6引入了动态权限。这是一个很好的安全方法，但是实现部分包含了大量的样板代码。</p><p id="7ca7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几个很棒的库可以让你的日常开发变得简单，比如<a class="ae ky" href="https://github.com/Karumi/Dexter" rel="noopener ugc nofollow" target="_blank"> Dexter </a>、<a class="ae ky" href="https://github.com/permissions-dispatcher/PermissionsDispatcher" rel="noopener ugc nofollow" target="_blank"> PermissionsDispatcher </a>和<a class="ae ky" href="https://github.com/sagar-viradiya/eazypermissions" rel="noopener ugc nofollow" target="_blank"> EazyPermissions </a>。但是这些解决方案通常会在代码库中添加更多不必要的代码。</p><p id="69bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为所有这些方法的简单替代，我们可以创建一些扩展函数来简化它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b781" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nf">注:我改编了威廉·古韦亚的文章</em>  <em class="nf">中的</em> <a class="ae ky" href="https://proandroiddev.com/easy-way-to-ask-for-permissions-on-android-62a9ae4a22b0" rel="noopener ugc nofollow" target="_blank"> <em class="nf">的这些扩展。</em></a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e398" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.可延展的字符串</h1><p id="8966" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">无论您在哪个平台上工作，有时您会想要突出显示字符串的某个部分以获得用户焦点，或者您想要为字符串的某个特定部分分配一个点击监听器。这可以在Android环境中使用spannable字符串来实现。</p><p id="e199" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我用来简化可扩展字符串代码的一些扩展:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="389a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这些扩展，我们可以在调用点编写整洁的代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e9a7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.颜色转换扩展</h1><p id="9eac" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在Android中，我们通常用十六进制格式声明颜色。但我们将遇到的不仅仅是这种形式。一些流行的库使用RGB和整数，所以我们可以快速转换成任何颜色格式是很重要的。为此，我使用了以下扩展:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="cae6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我处理调色板时，这两个扩展使我的生活变得简单。当然，您可以根据需要创建自己的扩展。例如，如果你需要的话，你可以创建RGB转十六进制。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f9a8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">奖金</h1><p id="b274" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要了解更多关于协同程序和Kotlin的其他高级特性，请阅读以下文章:</p><ul class=""><li id="7fc0" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-kotlin-extensions-to-make-your-android-code-more-expressive-4c9243cb9466">“5个Kotlin扩展让你的Android代码更有表现力”</a></li><li id="8396" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-powerful-kotlin-extensions-from-ktx-libraries-b10c50504df6">“KTX库的5个强大的Kotlin扩展”</a></li><li id="9a5d" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://medium.com/better-programming/advanced-android-programming-with-kotlin-5e40b1be22bb" rel="noopener">“用Kotlin进行高级编程</a></li><li id="b613" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://medium.com/better-programming/kotlin-coroutines-from-basics-to-advanced-ad3eb1421006" rel="noopener">“科特林协程，从基础到高级</a>”</li><li id="f8de" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://medium.com/better-programming/asynchronous-data-loading-with-new-kotlin-flow-233f85ae1d8b" rel="noopener">“使用新的Kotlin流进行异步数据加载</a>”</li><li id="e068" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://medium.com/better-programming/why-and-how-to-use-kotlins-native-serialization-library-c88c0f14f93d" rel="noopener">“为什么以及如何使用Kotlin的原生序列化库</a>”</li></ul><p id="9654" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>