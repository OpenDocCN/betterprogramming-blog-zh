<html>
<head>
<title>Switch Between Dark and Light Themes in Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Next.js中的暗主题和亮主题之间切换</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/%EF%B8%8F-switch-between-dark-light-themes-in-next-js-244c30c7d99a?source=collection_archive---------2-----------------------#2020-02-22">https://betterprogramming.pub/%EF%B8%8F-switch-between-dark-light-themes-in-next-js-244c30c7d99a?source=collection_archive---------2-----------------------#2020-02-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a723" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用样式组件和使用暗模式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/212b2952e5be20313fb2c2d07cae5ce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1T_tjGHKjUDfJAnxCI71cg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Elliott Engelmann 在<a class="ae ky" href="https://unsplash.com/s/photos/dark?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="df11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我将使用一个样板文件<a class="ae ky" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>项目，它是使用<a class="ae ky" href="https://github.com/zeit/create-next-app" rel="noopener ugc nofollow" target="_blank"> create-next-app </a>创建的。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1939" class="ma mb it lw b gy mc md l me mf">npx create-next-app project-name</span></pre><p id="e184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在项目目录中的任意位置创建一个主题文件。我调用我的<code class="fe mg mh mi lw b">theme.js</code>并把它放在顶层目录中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="76b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们将风格分为浅色和深色主题。我有背景和字体颜色。浅色主题有白色背景和紫色字体，深色主题有黑色背景和白色字体。简单！</p><p id="d8d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以将<a class="ae ky" href="https://styled-components.com/" rel="noopener ugc nofollow" target="_blank">样式化组件</a>添加到我们的项目中。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0fa1" class="ma mb it lw b gy mc md l me mf">npm i styled-components</span></pre><p id="c11b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还想添加<a class="ae ky" href="https://github.com/donavon/use-dark-mode" rel="noopener ugc nofollow" target="_blank">使用黑暗主题</a>。这使得我们可以轻松地在暗主题和亮主题之间切换。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0d46" class="ma mb it lw b gy mc md l me mf">npm i use-dark-mode</span></pre><p id="0b6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将主题实现到我们整个应用程序的最佳方式是使用<code class="fe mg mh mi lw b">/pages/_app.js</code>文件。你可以在Next.js的网站上阅读更多关于这个<a class="ae ky" href="https://nextjs.org/docs/advanced-features/custom-app" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="9c7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，<code class="fe mg mh mi lw b">_app.js</code>会将所有其他页面换行。如果没有这个文件，您需要创建它。下面是一个将我们的主题应用到整个应用程序的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="d2f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://styled-components.com/" rel="noopener ugc nofollow" target="_blank">样式组件</a>提供了一个方便的<code class="fe mg mh mi lw b">&lt;ThemeProvider/&gt;</code>来接收<code class="fe mg mh mi lw b">theme</code>道具。这个<code class="fe mg mh mi lw b">theme</code>属性被传递给我们应用程序中的所有组件。</p><p id="cdde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们使用接受默认布尔值的<code class="fe mg mh mi lw b">useDarkMode</code>创建一个<code class="fe mg mh mi lw b">darkMode</code>对象。<a class="ae ky" href="https://github.com/donavon/use-dark-mode" rel="noopener ugc nofollow" target="_blank">使用黑暗模式</a>读取浏览器的<code class="fe mg mh mi lw b">localStorage</code>并返回一个保存当前选中主题的<code class="fe mg mh mi lw b">darkMode</code>对象。</p><p id="2c7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于Next.js在服务器上合并了我们的应用程序，并且我们的主题存储在浏览器中，这可能会在渲染时导致一些不稳定的行为。因此，为了避免这种情况，我们使用<code class="fe mg mh mi lw b">useEffect</code>将页面包装在一个<code class="fe mg mh mi lw b">isMounted</code>条件中，这个条件在客户端变成了<code class="fe mg mh mi lw b">true</code>。</p><p id="10ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还创建了两个按钮来切换黑暗和光明的主题。你可以通过<code class="fe mg mh mi lw b">darkMode</code>对象的<code class="fe mg mh mi lw b">darkMode.enable</code>和<code class="fe mg mh mi lw b">darkMode.disable</code>方法使用一个开关或任何组件。</p><p id="8333" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用<a class="ae ky" href="https://styled-components.com/" rel="noopener ugc nofollow" target="_blank">样式化组件</a>创建一个<code class="fe mg mh mi lw b">&lt;Button/&gt;</code>组件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="af71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们的<code class="fe mg mh mi lw b">&lt;ThemeProvider/&gt;</code>，这个组件将收到我们在<code class="fe mg mh mi lw b">theme.js</code>中创建的主题作为道具。</p><p id="5eab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把<code class="fe mg mh mi lw b">&lt;Button/&gt;</code>加到<code class="fe mg mh mi lw b">/pages/index.js</code>上。我已经删除了样板代码，并代之以这个简单的页面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="c2a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试你的主题！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/5622d9f6ee3852ffaf985332a2bfa4c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ajrF443cbmmYwbnDqTqTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">🌙深色模式</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/5534a2fbf1fcd6582c450077ec8510bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SQWX7_V8Ml14vB3UtOJpSg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">☀️光模式</p></figure><p id="1b1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！享受您的多主题Next.js应用程序！</p><div class="mm mn gp gr mo mp"><a href="https://github.com/skolhustick/next-dark-mode" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd iu gy z fp mu fr fs mv fu fw is bi translated">skolhustick/下一个黑暗模式</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">这是一个用create-next-app引导的Next.js项目。首先，运行开发服务器:打开…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">github.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd ks mp"/></div></div></a></div></div></div>    
</body>
</html>