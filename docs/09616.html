<html>
<head>
<title>Blockchain Development Tutorial: Get The Latest Block Number From The Ethereum Mainnet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">区块链开发教程:从以太坊Mainnet获取最新区块号</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/blockchain-development-tutorial-get-the-latest-block-number-from-ethereum-mainnet-bcc3ac2b605b?source=collection_archive---------6-----------------------#2021-09-16">https://betterprogramming.pub/blockchain-development-tutorial-get-the-latest-block-number-from-ethereum-mainnet-bcc3ac2b605b?source=collection_archive---------6-----------------------#2021-09-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e73e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用炼金术写一个简单的Web3脚本</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f34f9aa0f2e55f5a22ede9a2c197bf5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*budHn5JUAOfVABDY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@estherrj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Esther Jiao </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="6061" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不知道从哪里开始？这个简短的教程将带你编写一个简单的Web3脚本，使用Alchemy从以太坊mainnet获取最新的块号。我们假设你已经通过了<a class="ae kv" href="https://docs.alchemy.com/alchemy/introduction/getting-started" rel="noopener ugc nofollow" target="_blank">入门</a>步骤，并且拥有了<a class="ae kv" href="https://alchemy.com/?a=035d6ae2d0" rel="noopener ugc nofollow" target="_blank">炼金术账户</a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="8290" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">​1.从您的命令行，创建一个新的项目目录和cd到它</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="246d" class="lz ma iq mt b gy mx my l mz na">mkdir web3-example<br/>cd web3-example</span></pre><h2 id="a377" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">2.如果您还没有安装Alchemy Web3依赖项，请安装它</h2><p id="793c" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">你可以使用任何你选择的web3库，然而，使用<a class="ae kv" href="https://docs.alchemy.com/alchemy/documentation/alchemy-web3" rel="noopener ugc nofollow" target="_blank"> Alchemy Web3 </a>有很多好处:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="0698" class="lz ma iq mt b gy mx my l mz na">npm install @alch/alchemy-web3</span></pre><h2 id="d1ca" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">3.创建一个名为index.js的文件来添加内容</h2><p id="7484" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">您最终需要用Alchemy HTTP API密钥替换demo密钥，并添加以下代码:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="24b1" class="lz ma iq mt b gy mx my l mz na">async function main() {</span><span id="cef2" class="lz ma iq mt b gy ng my l mz na">const { createAlchemyWeb3 } = require(“@alch/alchemy-web3”);</span><span id="db5c" class="lz ma iq mt b gy ng my l mz na">const web3 = createAlchemyWeb3(“https://eth-mainnet.alchemyapi.io/v2/demo");</span><span id="9df3" class="lz ma iq mt b gy ng my l mz na">const blockNumber = await web3.eth.getBlockNumber();</span><span id="1081" class="lz ma iq mt b gy ng my l mz na">console.log(“The latest block number is “ + blockNumber);</span><span id="f6af" class="lz ma iq mt b gy ng my l mz na">}</span><span id="270e" class="lz ma iq mt b gy ng my l mz na">main();</span></pre><p id="c1f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不熟悉异步的东西？看看这篇<a class="ae kv" href="https://medium.com/better-programming/understanding-async-await-in-javascript-1d81bb079b2c" rel="noopener">文章</a>。</p><h2 id="1231" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">4.使用节点运行它</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="8876" class="lz ma iq mt b gy mx my l mz na">node index.js</span></pre><h2 id="61ad" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">5.您现在应该会在控制台中看到最新的块号输出！</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="56ca" class="lz ma iq mt b gy mx my l mz na">The latest block number (at time of writing) is 11043912</span></pre><p id="85ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">呜！恭喜你。您刚刚使用<a class="ae kv" href="https://alchemy.com/?a=035d6ae2d0" rel="noopener ugc nofollow" target="_blank">炼金术</a>编写了您的第一个web3脚本。</p></div></div>    
</body>
</html>