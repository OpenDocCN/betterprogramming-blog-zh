<html>
<head>
<title>Use “git-bisect” to Find Problems Fast</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“git-等分”快速发现问题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-git-bisect-to-find-problems-fast-2cc02653cd37?source=collection_archive---------13-----------------------#2022-04-26">https://betterprogramming.pub/use-git-bisect-to-find-problems-fast-2cc02653cd37?source=collection_archive---------13-----------------------#2022-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c4e0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">缩小您的提交范围</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee0a5e824c82efdc6ddc759772cdc476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jhQt9znV__VdXsNg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">纪尧姆·伊萨利在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8ae5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天我注意到一个自定义组件的一个样式被搞乱了。该组件由两个图标之间的一段文本组成。以前图标和文本之间有足够的空间，但是现在没有了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/2d81bb041c07173f39032f849029c321.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/0*DKhy7TamqDqxtElB"/></div></figure><p id="c7c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我先是怀疑某个班级被改了。也许它有一些填充，但现在没有了，但在Chrome开发者工具中快速检查显示，在生产版本中没有这样的填充(看起来仍然正确)。</p><p id="9717" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很明显，在过去的一周左右，我在某个地方把它弄坏了。我经常提交，所以浏览每一次提交将是费力和费时的。如果有一种方法可以缩小提交的范围，并且有条不紊地有条不紊地完成它们就好了。</p><p id="e137" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嗯，有了git-平分，就有了！</p><h1 id="4d2e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">git-平分救援</h1><p id="05fd" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">什么是git-平分？这是一个很聪明但很少使用的实用程序，它可以让你通过将提交分成两半，测试应用程序，然后重复这个过程来完成一系列提交。</p><p id="36a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是它的工作原理，以及我是如何使用它的。</p><p id="a92b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，在过去的某个地方找到一个提交，在那里你知道代码是有效的。复制此提交的哈希。这将是你的起点。等分线的另一端是你的大脑，你知道它坏掉了。</p><p id="bd7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不得不查看我的git日志来找到最初包含我的代码的提交。我运行“git log — oneline | head -25”来查看我最近的25次提交。我找到了我第一次实现代码的地方，它现在已经坏了，记得当时它还在工作。我记下了它的提交散列2d8cf845。</p><p id="f58c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这些信息，我输入了以下命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="500c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个命令初始化git-biquite，但除此之外不做任何事情。第二个命令告诉git我知道提交是好的。我的最后一个命令指示了一个我知道不起作用的提交:我的错误提交。我没有提供提交散列，而是简单地使用了HEAD，这是我最近的一次提交。</p><p id="e10c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">git-biquite的输出告诉我，在这两次修改或提交之间有6次修改或提交，我需要3个步骤才能找到问题的根源。</p><h1 id="502b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">运行应用程序</h1><p id="20d3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在该运行应用程序了，看看问题是否存在。我的问题是可视化，所以我必须建立和运行应用程序，并检查输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/9445982175eff910a87536b5292129e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/0*9OpB_CpgzPFe4MuC"/></div></figure><p id="8a1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来很完美。您可以看到数字1和图标之间的间距。</p><p id="3dcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，现在我告诉git这是一个很好的提交。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="bf6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我只需要告诉git-bi section这个提交是好的。然后，它会自动在这个提交和我的错误提交之间选择一个提交，并为我检查出来。</p><p id="b803" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我重建刷新了app，那个也不错。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="16ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个也不错，所以我重复了上面的命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7e24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，它说还有0个修订和0个步骤，所以这最好是坏的一个，它是。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/a6ad8498fec6f0b2877681dfd7f2ee6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/0*yCBa-TT0nWAQTs4K"/></div></figure><p id="272d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了git-bi section的帮助，我只需要尝试三次提交就可以找到问题的根源。</p><p id="eadb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果这不是我的最终提交，我会用<strong class="lb iu"> git平分bad </strong>来标记它，然后git会继续缩小更改范围，直到我们最终找到违规者。</p><h1 id="3872" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">找到窃听器</h1><p id="4637" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在我有了提交，我可以查看差异，并找出我可能做了什么来破坏它。</p><p id="5423" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将项目加载到GitHub中，并导航到该提交。幸运的是，我的提交不是很大，我很快就发现了问题。自定义组件使用第三方flex布局库，这是组件正确呈现所必需的。出于某种我不记得的原因，我已经从我的主脚本集中删除了这个库。</p><p id="3cd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替换删除的那一行解决了我的问题。作为一名优秀的团队成员，我创建了一个新的fix分支，并通过单行更改打开了一个pull请求。</p><h1 id="e2a6" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="5012" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">发现一个意想不到的bug从来都不是一种好的感觉。更糟糕的是，当你不记得曾经接触过被破坏的代码时。在我的例子中，我随意地进行了更改，认为我正在删除一个未使用的导入。我错了。</p><p id="b5ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，我能够使用git-section找到问题提交，识别导致中断的更改，并发布更正。整个经历，从开始到结束，花了我大约半个小时，包括我记笔记和写解释的时间。</p><p id="2267" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了我在这里展示的内容，还有很多东西需要一分为二。如果您有单元测试，并且您试图找到破坏了其中一个或多个单元测试的提交，甚至有可能让git-bi section为您完成大部分工作。它可以运行您的测试，并自行决定提交是好是坏。这是另一天的高级主题。</p><p id="1afd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望下次你发现自己处于类似的困境时，你会记得这篇文章，并试着把自己一分为二。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="24ab" class="lw lx it bd ly lz nd mb mc md ne mf mg jz nf ka mi kc ng kd mk kf nh kg mm mn bi translated">👉想要更多像这样的内容来提高你的技术和专业技能吗？</h1><p id="42b6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">请看看我收藏的书籍和课程，或者注册我的电子邮件列表，在https://walkingriver.gumroad.com<a class="ae ky" href="https://walkingriver.gumroad.com" rel="noopener ugc nofollow" target="_blank">的</a>📱</p></div></div>    
</body>
</html>