<html>
<head>
<title>4 Python Packages to Beautify and Format Your Codebases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4个Python包来美化和格式化你的代码库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-hacks-to-automate-python-code-beautification-5ad934cf5a29?source=collection_archive---------7-----------------------#2022-01-08">https://betterprogramming.pub/simple-hacks-to-automate-python-code-beautification-5ad934cf5a29?source=collection_archive---------7-----------------------#2022-01-08</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="2310" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">自动清理您的Python代码</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/cb0d360b82aa2c144e831b8d7d59d8b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g1bNL9lq_ZQta9Kw"/></div></div><p class="ks kt gk gi gj ku kv bd b be z dk translated"><a class="ae kw" href="https://unsplash.com/@andrewtneel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安德鲁·尼尔</a>在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="ee2c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你曾经遇到过一段写得很差的Python代码吗？</p><p id="4bf6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我说的是一团乱麻，你不得不花上几个小时试图理解哪段代码去了哪里。</p><p id="eea1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">编写代码是开发人员角色的一部分。另一方面，编写漂亮整洁的Python代码完全是另一回事。这可能会成就或破坏你在分析或数据科学领域(甚至是软件开发领域)作为一名熟练程序员的形象。</p><p id="8f8d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">那么我们该如何编写这个所谓漂亮的Python代码呢？</p><p id="889b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">PEP8，有时拼写为PEP 8或PEP-8，是由吉多·范·罗苏姆、巴里·华沙和尼克·科格兰在2001年编写的一个文档，它提供了关于如何编写Python代码的指南和最佳实践。PEP 8的主要目的是提高Python代码的可读性和一致性。</p><blockquote class="lt lu lv"><p id="a90f" class="kx ky lw kz b la lb js lc ld le jv lf lx lh li lj ly ll lm ln lz lp lq lr ls ik bi translated">正如吉多·范·罗苏姆所说，“<strong class="kz is">代码被阅读的次数比它被编写的次数多得多。</strong>“你可能要花几分钟，或者一整天，写一段代码来处理用户认证。一旦你写了，你就不会再写了。但是你一定要再读一遍。这段代码可能仍然是您正在进行的项目的一部分。每次你回到那个文件，你都必须记住代码做了什么，为什么要写它，所以可读性很重要。</p></blockquote><p id="4315" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你感兴趣，PEP 8可以在这里找到<a class="ae kw" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="98de" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated">动机</h1><p id="a105" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">作为开发人员，在编写Python代码时，您需要确保代码:</p><ul class=""><li id="e009" class="ne nf ir kz b la lb ld le lg ng lk nh lo ni ls nj nk nl nm bi translated">看起来不错</li><li id="149e" class="ne nf ir kz b la nn ld no lg np lk nq lo nr ls nj nk nl nm bi translated">是有组织的</li><li id="924a" class="ne nf ir kz b la nn ld no lg np lk nq lo nr ls nj nk nl nm bi translated">符合PEP 8风格指南</li><li id="3349" class="ne nf ir kz b la nn ld no lg np lk nq lo nr ls nj nk nl nm bi translated">包括文档字符串</li></ul><p id="19e2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然而，每次编写代码时，手动检查所有这些标准可能会让人不知所措。如果您能在提交到版本控制系统之前自动检查和格式化您的代码，那不是很好吗？</p><p id="ec7a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始吧。</p></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="375b" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated"><strong class="ak">垃圾Python代码示例</strong></h1><p id="db08" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">让我们从编写一个混乱的Python代码开始，它将违反所有PEP 8标准。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ns"><img src="../Images/1e1ad6f363d82d3107f0cd002ae87141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4ccdpeUBW1GqHd3WcGlrg.png"/></div></div></figure></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="18b0" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated"><strong class="ak"> 1。薄片8 </strong></h1><p id="8005" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">我们将通过使用<a class="ae kw" href="https://flake8.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> flake8 </a> Python包，从检查Python代码的风格和质量开始。</p><p id="9b3e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">要安装flake8，请键入:</p><pre class="kh ki kj kk gu nt nu nv nw aw nx bi"><span id="5520" class="ny mi ir nu b gz nz oa l ob oc">pip install flake8</span></pre><p id="af75" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">下面是在我们的Python代码上运行flake8的输出。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj od"><img src="../Images/e064be661fea7ba482446cf87566cd6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*uoNjFkit-XAs3lykFkKtyA.png"/></div></figure><p id="0272" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">正如我们所见，flake8指出了以下错误类型。</p><ol class=""><li id="a2ea" class="ne nf ir kz b la lb ld le lg ng lk nh lo ni ls oe nk nl nm bi translated">导入但未使用的库</li><li id="bcaa" class="ne nf ir kz b la nn ld no lg np lk nq lo nr ls oe nk nl nm bi translated">缩进和行太长错误，违反PEP 8风格指南</li></ol></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="1bba" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated">2.黑色</h1><p id="747f" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">现在我们知道了错误是什么，让我们开始用一个<a class="ae kw" href="https://black.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">黑色</a> Python包格式化代码。</p><p id="442f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">要安装black，请键入:</p><pre class="kh ki kj kk gu nt nu nv nw aw nx bi"><span id="d8a4" class="ny mi ir nu b gz nz oa l ob oc">pip install black</span></pre><p id="639c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">下面是在我们的Python代码上运行black的输出。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj of"><img src="../Images/ac17266b716b3a084dea3c59f3f5fa7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*3L3MhjdhREg0FjzPO51xJg.png"/></div></figure><p id="d31b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">瞧啊。代码自动格式化如下！</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj og"><img src="../Images/9fcabd297f529c1a27ea74c3c9f3d4dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LU2WZyuvB6egijL7AoNHbQ.png"/></div></div></figure></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="d251" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated">3.伊索特</h1><p id="c008" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">下一步，让我们尝试按字母顺序对导入的库进行排序，并将它们分成不同的部分和类型，以获得更有组织的代码。</p><p id="5554" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">要安装<code class="fe oh oi oj nu b"><a class="ae kw" href="https://github.com/PyCQA/isort" rel="noopener ugc nofollow" target="_blank">isort</a></code>，请键入:</p><pre class="kh ki kj kk gu nt nu nv nw aw nx bi"><span id="913b" class="ny mi ir nu b gz nz oa l ob oc">pip install isort</span></pre><p id="0114" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">下面是在我们的Python代码上运行<code class="fe oh oi oj nu b">isort</code>的输出。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ok"><img src="../Images/1dba16a8c58b1d99dca52458158b4b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IJrOAABOq5A26xPIyxtfxQ.png"/></div></div></figure><p id="18a9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">酷！进口现在更有条理了。</p></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="8aea" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated">4.审问</h1><p id="ebe9" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">有时，我们可能会忘记为类和函数编写文档字符串，如下所示:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj ol"><img src="../Images/b577729fddafed47d9ee2ad98ed57c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*MFl-7AQRjqmY87DgrBgCDg.png"/></div></figure><p id="a68d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以最后一步，我们可以运行<a class="ae kw" href="https://interrogate.readthedocs.io/en/latest/index.html?highlight=pre-commit" rel="noopener ugc nofollow" target="_blank">询问</a>来检查丢失的文档字符串，而不是手动查看我们所有的函数和类来查找丢失的文档字符串。</p><p id="5053" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">要安装询问，请键入:</p><pre class="kh ki kj kk gu nt nu nv nw aw nx bi"><span id="3b0f" class="ny mi ir nu b gz nz oa l ob oc">pip install interrogate</span></pre><p id="8210" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">下面是在我们的Python代码上运行interrogate的输出。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj om"><img src="../Images/9a87704ea5ae28e317226b966a942b39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTrHgPPW-MekYAVGx5-TdA.png"/></div></div></figure><p id="b35b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">瞧啊。从终端输出中，我们知道哪些文件、类和函数没有docstrings。</p><p id="f082" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因为我们知道丢失的文档字符串的位置，所以添加它们很容易。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj on"><img src="../Images/087d54e334f5e540946b8fc36b31a52a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*eLGkFGthwx_P2Iny63SaTQ.png"/></div></figure><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj om"><img src="../Images/64dd1cf59d2e62e233145c65d0e16995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZeOjXUzkpBXlTE4Umtt_Zw.png"/></div></div></figure></div><div class="ab cl ma mb hv mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ik il im in io"><h1 id="0d79" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated">结论</h1><p id="9bff" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">恭喜你！您刚刚学习了如何在提交之前自动检查、编辑和美化您的Python代码。我希望这个博客能让你轻松地检查和格式化你的代码。</p></div></div>    
</body>
</html>