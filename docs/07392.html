<html>
<head>
<title>Building a Photo Translator Using Python With the Google Translator API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Google Translator API构建照片翻译器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-a-photo-translator-using-python-with-the-google-translator-api-94b8da75f7f8?source=collection_archive---------6-----------------------#2021-01-11">https://betterprogramming.pub/building-a-photo-translator-using-python-with-the-google-translator-api-94b8da75f7f8?source=collection_archive---------6-----------------------#2021-01-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c0f9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个实践机器学习项目，结合了文本识别和语言翻译</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3aa04bf6e847d1fede19f14a316350f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BGAaf8v4tC3gY6L_hgILyA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/photo/man-sitting-in-front-of-three-computers-4974915/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae ky" href="https://www.pexels.com/@olia-danilevich?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> olia danilevich </a>拍摄</p></figure><p id="9d09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文将向您展示如何构建一个可以为您进行文本识别和语言翻译的程序。我以前做过一个<a class="ae ky" href="https://towardsdatascience.com/building-a-simple-text-recognizer-in-python-93e453ddb759" rel="noopener" target="_blank">文本识别程序</a>，我对它的出色表现感到惊讶。我一直用它来把我的手写笔记和一些我喜欢的书上的句子转换成数字文本文档。然后，我决定给我的程序增加一点功能。为什么不把好的事情变成完美的事情呢？</p><p id="7455" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我已经有了一个文本识别器，我认为智能照片翻译器将是一个很好的项目。在做了一点研究后，我发现谷歌的翻译Ajax API是可用的。在这个项目中，我们将把文本识别与<a class="ae ky" href="https://pypi.org/project/googletrans/" rel="noopener ugc nofollow" target="_blank">语言翻译库</a>结合起来。将两个机器学习科目合并成一个项目会很有趣。不过，介绍到此为止。我们开始工作吧！</p><h2 id="dee1" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><strong class="ak">目录</strong></h2><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="d2b6" class="lw lx it mq b gy mu mv l mw mx">#1. <a class="ae ky" href="#8048" rel="noopener ugc nofollow">Getting Started</a><br/>#2. <a class="ae ky" href="#bf10" rel="noopener ugc nofollow">Step 1: Define the Photo</a><br/>#3. <a class="ae ky" href="#efe9" rel="noopener ugc nofollow">Step 2: Text Recognition</a><br/>#4. <a class="ae ky" href="#b864" rel="noopener ugc nofollow">Step 3: Google Translator</a><br/>#5. <a class="ae ky" href="#e16b" rel="noopener ugc nofollow">Final Step: Exploring the Result</a><br/>#6. <a class="ae ky" href="#44f4" rel="noopener ugc nofollow">Conclusion</a></span></pre></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="8048" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">入门指南</h1><p id="c799" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在这个项目中，我们将使用三个Python库。我将使用我的终端窗口来安装它们。建议:在安装它们之前创建一个环境。我个人会选择Anaconda——它有一个很好的界面，并且简单易用。不管怎样，回到图书馆。这里是我们需要的三个库:</p><ul class=""><li id="eb46" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu"> Pillow </strong>:强大的图像处理库。我们将使用它来打开和编辑图像文件。(枕头也被称为PIL。)</li><li id="eab5" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><a class="ae ky" href="https://python-pillow.org/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a>:我们将用来识别图像中文本的库。</li><li id="8674" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu"> Googletrans </strong>:你可以从库名中猜到，我们将用它来翻译识别的文本。此外，快速注意:由于谷歌端的一些更新，这个包在一些版本中给出了错误信息。这就是为什么，在安装时，我们将使用它的3.1.0 alpha版本。你可以从<a class="ae ky" href="https://stackoverflow.com/questions/52455774/googletrans-stopped-working-with-error-nonetype-object-has-no-attribute-group" rel="noopener ugc nofollow" target="_blank">栈溢出</a>中了解更多关于这个问题的信息。</li></ul><p id="fb91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用PIP来安装它们，PIP是一个Python包管理器。我们可以在一行中安装它们，如下所示:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="d70c" class="lw lx it mq b gy mu mv l mw mx">pip install pillow pytesseract googletrans==3.1.0a0</span></pre><p id="898c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">库将被安装并准备就绪。如果你有任何关于库安装的问题，请随意谷歌“如何安装x库用于macOS或Windows或Linux”我相信你会找到一些资源。不要忘记，所有的程序员在需要帮助的时候都会在网上搜索。寻求帮助没有错。</p><p id="30e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们的库已经准备好了，我们将导入它们以便使用它们。首先，我将在Jupyter中创建一个新的笔记本。如果你是Jupyter的新手，这里有一个来自他们官方网站的很好的定义:</p><blockquote class="oj ok ol"><p id="c5d2" class="kz la lv lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated">“Jupyter Notebook是一个开源的web应用程序，允许您创建和共享包含实时代码、公式、可视化和叙述性文本的文档。用途包括:数据清理和转换、数值模拟、统计建模、数据可视化、机器学习等等。”—<a class="ae ky" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank">Jupyter项目</a></p></blockquote><p id="69ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们导入库。</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="895e" class="lw lx it mq b gy mu mv l mw mx">from PIL import Image <br/>import pytesseract <br/>from googletrans import Translator</span></pre></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="bf10" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">第一步:定义照片</h1><p id="b648" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">这将是一个简单的步骤。我们将拍摄一张照片并将其导入到我们的程序中。因为我们要识别文本，所以要确保照片中有文本。</p><p id="4a8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我打算使用的图像。这是我写的一首诗的一部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/c9c0ddcadd42676c0241405df2d039fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G1-qcFKUpepe4XjH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">沉默 —贝希克·居文的诗</p></figure><p id="6402" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们继续导入它。(我的图像文件保存为<code class="fe oq or os mq b">silence_poem.jpg</code>。)</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="e90c" class="lw lx it mq b gy mu mv l mw mx">img = Image.open('silence_poem.jpg')</span></pre><p id="ddfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完美！我们定义了一个新的变量，并将图像赋给它。让我们进入下一步。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="efe9" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">步骤2:文本识别</h1><p id="6459" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">是时候表演魔术了。在这一步中，我们将识别图像中的文本。为此，我们将使用我们之前安装和导入的Pytesseract包。代码如下:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="aaf8" class="lw lx it mq b gy mu mv l mw mx">result = pytesseract.image_to_string(img)</span></pre><p id="60de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打印结果，看看有多少文本被识别。顺便说一下，文本格式是字符串。这就是为什么我们调用的函数是<code class="fe oq or os mq b">image_to_string</code>。</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="7c49" class="lw lx it mq b gy mu mv l mw mx">print(result)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/47a94440e7ac9052df38ce911f35f831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FTKOzBu02yF7VKKo"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="b864" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">第三步:谷歌翻译</h1><p id="7faf" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">我们快完成了。我们目前所做的叫做文本识别。这也是一个很好的工作程序。但是既然我们想做一些比那更酷的东西，让我们给它添加一些表演。在这一步中，我们将使用Google Translator Ajax API的免费版本将识别的文本翻译成另一种语言。你不会相信翻译会有多容易。</p><p id="89fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我现在将与你分享翻译代码块。</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="37c8" class="lw lx it mq b gy mu mv l mw mx">p = Translator() </span><span id="3c51" class="lw lx it mq b gy ot mv l mw mx">p_translated = p.translate(result, dest='french') </span><span id="dc44" class="lw lx it mq b gy ot mv l mw mx">translated = str(p_translated.text)</span></pre><p id="0e12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以上面发生的事情如下:</p><ul class=""><li id="f07f" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">首先，我们要定义译者。</li><li id="f641" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">在第二行中，我们在函数中传递识别的文本和我们想要翻译的语言。我在目的地参数中传递了<code class="fe oq or os mq b">french</code>。你可以传递你想翻译的语言。</li><li id="3de0" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">最后，我们将转换后的变量转换成字符串格式。</li></ul><p id="4120" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们进入下一步之前，我想向您展示一下<code class="fe oq or os mq b">p_translated</code>作为一个变量及其参数的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/0070b8ed97553e8d58484feaa42c7d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N8xL76lGO3Ac3GCD"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="e16b" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">最后一步:导出结果</h1><p id="847e" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">我们目前所做的是在笔记本内部运行。如果我们想全部完成，我们必须重新运行它。相反，我们将把我们所做的工作导出到一个文本文档中。这样，我们可以在不运行任何代码的情况下访问我们的翻译作品。</p><p id="35dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在导出之前，让我们打印出来看看它是什么样子的:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="71a9" class="lw lx it mq b gy mu mv l mw mx">print (result + "\n\n\n" + translated)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/4e0725d61530ce66b3d8c76a1c798b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9KiXMjVlD2U3yOZA"/></div></div></figure><p id="a708" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来很不错。翻译过程后连格式都保留下来，是不是很酷？是时候将它导出到文本文档中了。下面是允许我们这样做的代码块:</p><pre class="kj kk kl km gt mp mq mr ms aw mt bi"><span id="3f59" class="lw lx it mq b gy mu mv l mw mx">with open('translated_poem_fr.txt', mode ='w') as file: <br/>   file.write(result + "\n\n\n" + translated) <br/>   print("ready!")</span></pre><p id="54bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当导出过程完成时，我们将在笔记本中看到一条<code class="fe oq or os mq b">ready!</code>消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/6fb4ce22fa1f6acce7f3259b09a15051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sZOfkiBrPhRmSblYpjuafQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="84ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我向你们展示我导出的最终作品。它被保存为一个新的文本文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/8e92c08a809d0774d54b12da869ec16f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uNTnxCL8yVVGIBYw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="44f4" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">结论</h1><p id="b235" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">恭喜你。如果你读到这句话，你已经完成了这个项目。在这个项目中，我们将文本识别与谷歌翻译结合起来。这帮助我们创建了一个有用的程序，可以识别图像中的文本并将其翻译成另一种语言。你可以通过把你的教授最喜欢的一本书的一页翻译成另一种语言来打动他。</p><p id="5cb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我热爱编程，因为极限是天空。我们可以在不到一个小时的时间里创造出惊人的东西，这将为我们节省大量的时间。从事像这样的实践项目是提高编程技能的好方法。我已经分享了很多像这样的实践项目。如果您在实施该计划时有任何问题，请随时联系我。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="82a3" class="nf lx it bd ly ng nh ni mb nj nk nl me jz nm ka mh kc nn kd mk kf no kg mn np bi translated">提到的资源</h1><ul class=""><li id="67de" class="nv nw it lb b lc nq lf nr li ov lm ow lq ox lu oa ob oc od bi translated"><a class="ae ky" href="https://towardsdatascience.com/building-a-simple-text-recognizer-in-python-93e453ddb759" rel="noopener" target="_blank">“用Python构建一个简单的文本识别器”</a></li><li id="0c0a" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/52455774/googletrans-stopped-working-with-error-nonetype-object-has-no-attribute-group" rel="noopener ugc nofollow" target="_blank"> " </a> <a class="ae ky" href="https://stackoverflow.com/questions/52455774/googletrans-stopped-working-with-error-nonetype-object-has-no-attribute-group" rel="noopener ugc nofollow" target="_blank"> googletrans停止工作，出现错误“NoneType”对象没有属性“group”</a></li><li id="a917" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">【Jupyter项目</li></ul></div></div>    
</body>
</html>