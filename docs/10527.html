<html>
<head>
<title>How Monitoring Works on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS上的监控工作原理</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-monitoring-works-on-aws-9549e7e865da?source=collection_archive---------14-----------------------#2022-01-12">https://betterprogramming.pub/how-monitoring-works-on-aws-9549e7e865da?source=collection_archive---------14-----------------------#2022-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7685" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于云上的日志，您需要知道的一切</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30fe90a694598f08f66b7666c0df2e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWKTDXElpzLDMMnFLdn4Zw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯·利维拉尼在<a class="ae ky" href="https://unsplash.com/s/photos/monitoring?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5235" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当软件开发人员交付他们的产品时，他们首先想到的是“快乐之路”。他们对照工作环境测试一切。在敏捷开发中，这是一个关键点。然而，也有事情进展不顺利的时候。</p><p id="200c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">端点在集成环境中运行良好，但是在生产环境中会返回一个错误。或者数据库在新部署后变得不可用。或者如何确保系统在其最佳容量下工作？</p><p id="765d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们考虑基于云的解决方案，必要的工具可以帮助我们。让我们探讨一下有哪些可用的，以及如何在AWS上应用。</p><h1 id="2ae7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">监控和警报</h1><p id="9adc" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">AWS提供了很好的监控选项。有一个专门的服务叫做<a class="ae ky" href="https://aws.amazon.com/cloudwatch/" rel="noopener ugc nofollow" target="_blank">云观察</a>。它包含观察解决方案健康状态的所有必要功能。</p><p id="fada" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">工程师开始使用CloudWatch的主要原因是它可以记录日志。来自不同服务的日志可以被发送到那里，然后进行分析。例如，您可以检查Lambda函数的执行情况以及返回的结果。当进行故障排除时，应用程序日志成为开发人员首先关注的地方。</p><p id="9205" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，CloudWatch还有一些功能正在被广泛使用。工程师可以观察各种服务的性能指标。这可以是EC2实例的CPU利用率、平均Lambda函数执行持续时间、数据库响应时间等等。数据以一定的间隔收集，并在图表上很好地显示出来。</p><p id="3ea8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当度量出现异常时会发生什么？没有人会坐在笔记本电脑前查看一百张图表。CloudWatch允许为特定指标设置警报。当指标值超过阈值时，将触发警报。有了警报，相应的SNS通知将被发送出去，每个人都将被通知应用程序有问题。</p><p id="d614" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，可以用CloudWatch事件构建事件总线。它作为一个桥梁工作:当某个事件发生时，连接的组件将接收它。最近这一块被提取到独立组件EventBridge(因此得名)。它有一个类似于CloudWatch Events的API，将来会取代CloudWatch Events。</p><p id="a260" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该服务与许多其他AWS组件很好地集成在一起，使得应用和收集重要数据变得很容易。如果您不知道，EC2的自动缩放组特性使用CloudWatch来触发事件的横向扩展和纵向扩展。这证明了这项服务有多强大。</p><h1 id="8d92" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">审计</h1><p id="2e03" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在安全性和合规性方面，企业不会妥协。这些公司想知道谁访问了应用程序的不同部分。首先，这样做不是为了指责对方，而是要明白最终的解决方案有多可靠和安全。</p><p id="fff6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS有一个专门的服务:<a class="ae ky" href="https://aws.amazon.com/cloudtrail/" rel="noopener ugc nofollow" target="_blank"> CloudTrail </a>。为了更好地理解它的作用，我引用了AWS官方文档中的一句话。</p><blockquote class="ms"><p id="3750" class="mt mu it bd mv mw mx my mz na nb lu dk translated">CloudTrail事件帮助您回答“谁在何时何地做了什么？”</p></blockquote><p id="7ba7" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">CloudTrail跟踪所有的内部API调用，用附加信息丰富它们。每个事件包含详尽的用户数据、事件数据、IP地址、时间等。这些信息足以运行合规性分析并识别系统中的安全漏洞。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/7853e1b482f6414a949ed11344f379b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zqJq6FyDzLlZh2Dzb8QxwQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">CloudTrail可以跟踪不同的事件类型</p></figure><p id="9eb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CloudTrail不仅跟踪来自管理控制台的操作，还跟踪AWS服务(如DynamoDB)上的各种操作。insights事件将应用某种算法来识别用户帐户上是否有异常活动。所有收集的事件都保存到S3存储桶中。此外，所有踪迹信息都可以发送到CloudWatch日志和EventBridge。</p><h1 id="49da" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">跟踪和调试</h1><p id="c25b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在某些时候，CloudWatch的功能可能不足以调试应用程序。尤其是当我们谈到微服务架构的时候。有多个小型组件，其中一些可以是无服务器的。在这些部分没有按预期工作的情况下，我们需要有一个完整的画面。</p><p id="e1f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这种情况，我们可以使用AWS的<a class="ae ky" href="https://aws.amazon.com/xray/" rel="noopener ugc nofollow" target="_blank"> X射线</a>。有更好的跟踪和调试是一个很好的选择。您将大致了解解决方案的所有部分是如何相互连接的，以及哪些部分不是100%健康的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/82fa07d1a073c8151f4eec18a4d40bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OaSGdktcIoXFk28t.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://docs.aws.amazon.com/xray/latest/devguide/xray-console.html" rel="noopener ugc nofollow" target="_blank">教程</a>中的x射线追踪图</p></figure><p id="9a79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这项服务不是“开箱即用”的，需要进行配置。AWS为许多必须集成到您的解决方案中的平台提供了SDK。作为开发人员，我们需要在一些地方添加跟踪方法来传递所需的数据。文档和教程很好地描述了所有必要的步骤。X射线将以每个开发人员都能更好理解的方式收集和组织数据。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="3906" class="lv lw it bd lx ly nq ma mb mc nr me mf jz ns ka mh kc nt kd mj kf nu kg ml mm bi translated">结论</h1><p id="d263" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">软件工程师首先需要监控和调试。你的客户不在乎你有没有。然而，一旦在应用程序中遇到问题而无法检查日志，开发人员肯定会后悔。记录和监控是每个软件的基本部分。尽早整合它，你的团队成员会感激你的。编码快乐！</p></div></div>    
</body>
</html>