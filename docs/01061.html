<html>
<head>
<title>A Closer Look at Etcd: The Brain of a Kubernetes Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">近距离观察Etcd:Kubernetes星团的大脑</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-closer-look-at-etcd-the-brain-of-a-kubernetes-cluster-788c8ea759a5?source=collection_archive---------0-----------------------#2019-08-12">https://betterprogramming.pub/a-closer-look-at-etcd-the-brain-of-a-kubernetes-cluster-788c8ea759a5?source=collection_archive---------0-----------------------#2019-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="51ad" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">etcd包含什么以及它如何组织信息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/080ec2dc1248c11864ff55d8e459fe04.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*qqMZJZp7-3b8oO9ModriDA.png"/></div></figure><p id="381c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Etcd是Kubernetes的一个关键组件，因为它存储了集群的整个状态:它的配置、规范和正在运行的工作负载的状态。在本文中，我们将揭开它的神秘面纱，以了解etcd是如何存储所有这些信息的。</p></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h1 id="a307" class="lt lu it bd lv lw lx ly lz ma mb mc md jz me ka mf kc mg kd mh kf mi kg mj mk bi translated">Etcd简介</h1><blockquote class="ml"><p id="4049" class="mm mn it bd mo mp mq mr ms mt mu ll dk translated">Etcd被定义为一个分布式的、可靠的键值存储，用于存储分布式系统中最关键的数据</p><p id="194f" class="mm mn it bd mo mp mq mr ms mt mu ll dk translated">— <a class="ae mv" href="https://etcd.io" rel="noopener ugc nofollow" target="_blank"> https://etcd.io </a></p></blockquote><p id="db7c" class="pw-post-body-paragraph kq kr it ks b kt mw ju kv kw mx jx ky kz my lb lc ld mz lf lg lh na lj lk ll im bi translated">在Kubernetes世界中，etcd被用作服务发现的后端，并存储集群的状态及其配置。</p><p id="6c3e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Etcd被部署为一个集群，由几个节点组成，它们的通信由Raft算法处理。在生产环境中，一个群集包含奇数个节点，至少需要三个。在http://thesecretlivesofdata.com/<a class="ae mv" href="http://thesecretlivesofdata.com/raft/" rel="noopener ugc nofollow" target="_blank">你可以找到一个很棒的动画来解释这个算法是如何运行的，它展示了集群生命周期的几个阶段，其中包括:</a></p><ul class=""><li id="9acb" class="nb nc it ks b kt ku kw kx kz nd ld ne lh nf ll ng nh ni nj bi translated">领袖选举</li><li id="c342" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">日志复制</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi np"><img src="../Images/30d144a5a6e736535b2957609cc209d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WFqWPEG_2anorU5gYjNSFQ.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">Raft算法在<a class="ae mv" href="http://thesecretlivesofdata.com/raft/" rel="noopener ugc nofollow" target="_blank">thesecretlivesofdata.com</a>中解释</p></figure></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h1 id="5583" class="lt lu it bd lv lw lx ly lz ma mb mc md jz me ka mf kc mg kd mh kf mi kg mj mk bi translated">Kubernetes的Etcd</h1><p id="a2cb" class="pw-post-body-paragraph kq kr it ks b kt ny ju kv kw nz jx ky kz oa lb lc ld ob lf lg lh oc lj lk ll im bi translated">在Kubernetes集群的上下文中，etcd实例可以作为Pods部署在主服务器上(这是我们将在本文中使用的示例)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi od"><img src="../Images/5c0d23fcd5a9fb2d126c08f4d35011f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MzsG-mE789PiISM9gncY7Q.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">部署在主节点上的etcd(来源:Kubernetes文档)</p></figure><p id="c4a9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">为了增加额外的安全性和弹性，它还可以作为外部集群进行部署。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi oe"><img src="../Images/36c9e5186d494bd3ef83f0de44014b00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWPqts5YaE22X0g2lbvi_Q.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">作为外部集群部署的etcd(来源:Kubernetes文档)</p></figure><p id="f096" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下面的序列图来自<a class="of og ep" href="https://medium.com/u/c9196fe571a0?source=post_page-----788c8ea759a5--------------------------------" rel="noopener" target="_blank"> Heptio </a>的博客，展示了在一个简单的Pod创建过程中所涉及的组件。这是API服务器和etcd交互的一个很好的例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi oh"><img src="../Images/9199a9634c3afda03b2bbbefca331c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QLGlVwQ1wmm6c6TrPg4s-w.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">资料来源:blog.heptio.com</p></figure></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h1 id="5c87" class="lt lu it bd lv lw lx ly lz ma mb mc md jz me ka mf kc mg kd mh kf mi kg mj mk bi translated">Kubernetes测试集群</h1><p id="dfcb" class="pw-post-body-paragraph kq kr it ks b kt ny ju kv kw nz jx ky kz oa lb lc ld ob lf lg lh oc lj lk ll im bi translated">在本文中，我们使用了一个Kubernetes集群，它有三个节点，是在<a class="ae mv" href="https://digitalocean.com" rel="noopener ugc nofollow" target="_blank"> DigitalOcean </a>上用<code class="fe oi oj ok ol b">kubeadm</code>创建的。选择的网络插件是<code class="fe oi oj ok ol b"><a class="ae mv" href="https://www.weave.works/docs/net/latest/kubernetes/kube-addon/" rel="noopener ugc nofollow" target="_blank">weavenet</a></code>。该集群有一个主节点也运行etcd。这种配置不适合真实的HA集群，但足以探索存储在etcd中的数据。</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="d499" class="oq lu it ol b gy or os l ot ou"><strong class="ol iu">$ kubectl get nodes</strong><br/>NAME    STATUS ROLES  AGE   VERSION<br/>node-01 Ready  master 56m   v1.15.2<br/>node-02 Ready  &lt;none&gt; 2m17  v1.15.2<br/>node-03 Ready  &lt;none&gt; 2m17  v1.15.2</span></pre></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h1 id="ca5e" class="lt lu it bd lv lw lx ly lz ma mb mc md jz me ka mf kc mg kd mh kf mi kg mj mk bi translated">Etcd Pod</h1><p id="c13b" class="pw-post-body-paragraph kq kr it ks b kt ny ju kv kw nz jx ky kz oa lb lc ld ob lf lg lh oc lj lk ll im bi translated">首先，让我们列出集群中运行的所有pod:</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="269f" class="oq lu it ol b gy or os l ot ou">$ <strong class="ol iu">kubectl get pods --all-namespaces</strong><br/>NAMESPACE   NAME                           READY STATUS  RESTART AGE<br/>kube-system coredns-5c98db65d4–5kjjv       1/1   Running 0       57m<br/>kube-system coredns-5c98db65d4–88hkq       1/1   Running 0       57m<br/>kube-system <strong class="ol iu">etcd-node-01</strong>                   1/1   Running 0       56m<br/>kube-system kube-apiserver-node-01         1/1   Running 0       56m<br/>kube-system kube-controller-manager-node-01 1/1  Running 0       56m<br/>kube-system kube-proxy-7642v               1/1   Running 0       3m<br/>kube-system kube-proxy-jsp4r               1/1   Running 0       3m<br/>kube-system kube-proxy-xj8qm               1/1   Running 0       57m<br/>kube-system kube-scheduler-node-01         1/1   Running 0       56m<br/>kube-system weave-net-2hvbx                2/2   Running 0       87s<br/>kube-system weave-net-5mrjl                2/2   Running 0       87s<br/>kube-system weave-net-c76fx                2/2   Running 0       87s</span></pre><p id="549d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">因为集群刚刚被初始化，所以只有<code class="fe oi oj ok ol b">kube-system</code>名称空间中的Pods在运行。这些单元负责集群的管理任务。我们感兴趣的Pod是<code class="fe oi oj ok ol b">etcd-node-01</code>，它运行负责存储集群状态的etcd实例。</p><p id="e904" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们首先在etcd Pod中运行一个shell，并检查在其中运行的etcd容器的配置:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi ov"><img src="../Images/096a0cbc28a9523c6c0f546e76dff079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ACFByHIGCY6dLxGwmXz3kw.png"/></div></div></figure><p id="2861" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">使用<code class="fe oi oj ok ol b">--advertise-client-urls</code>标志的值，我们可以使用<code class="fe oi oj ok ol b">etcdctl</code>实用程序获得所有现有的键/值对，并将它们保存在<code class="fe oi oj ok ol b">etcd-kv.json</code> <em class="ow">中。</em></p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="a999" class="oq lu it ol b gy or os l ot ou">$ ADVERTISE_URL="https://134.209.178.162:2379"</span><span id="074c" class="oq lu it ol b gy ox os l ot ou">$ kubectl exec etcd-node-01 -n kube-system -- sh -c \<br/>"ETCDCTL_API=3 etcdctl \<br/>--endpoints $ADVERTISE_URL \<br/>--cacert /etc/kubernetes/pki/etcd/ca.crt \<br/>--key /etc/kubernetes/pki/etcd/server.key \<br/>--cert /etc/kubernetes/pki/etcd/server.crt \<br/>get \"\" --prefix=true -w json" &gt; etcd-kv.json</span></pre><p id="48b3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">对该文件的快速检查显示了密钥列表及其对应的值，它们都是以base64编码的(这里只显示了文件的一个摘录)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi ov"><img src="../Images/7d848961ba1192390b459dc2812dc617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fng6f-zap0UBpc-F10nfgA.png"/></div></div></figure><p id="774c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们首先以纯文本的形式获取所有的密钥，看看它们是什么样子的。我把所有的键都留在了下面的输出中，抱歉你需要滚动一下:)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy oz l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">设置组合仪表后，etcd存储器中的可用钥匙</p></figure><p id="ab38" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">上面的结果显示了定义集群中所有资源的配置和状态的342个键:</p><ul class=""><li id="be77" class="nb nc it ks b kt ku kw kx kz nd ld ne lh nf ll ng nh ni nj bi translated">节点(历史上它们被称为Minion，因为我们在这里被提醒)</li><li id="56e9" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">名称空间</li><li id="658f" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">服务帐户</li><li id="18f8" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">角色和角色绑定，集群角色/集群角色绑定</li><li id="1bd3" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">配置映射</li><li id="6f72" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">秘密</li><li id="ad21" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">工作负载:部署、守护设备、单元等</li><li id="bdf4" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">群集的证书</li><li id="c76a" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">每个API版本中的资源</li><li id="f384" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">使集群处于当前状态的事件</li></ul><p id="3cea" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">选择其中一个键后，我们可以使用以下命令获得相关的值:</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="b8c7" class="oq lu it ol b gy or os l ot ou">$ kubectl exec etcd-node-01 -n kube-system —- sh -c \<br/>"ETCDCTL_API=3 etcdctl \<br/>--endpoints $ADVERTISE_URL \<br/>--cacert /etc/kubernetes/pki/etcd/ca.crt \<br/>--key /etc/kubernetes/pki/etcd/server.key \<br/>--cert /etc/kubernetes/pki/etcd/server.crt \<br/>get \"KEY\" -w json"</span></pre><p id="52e2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">例如，让我们获取与键<code class="fe oi oj ok ol b">/registry/deployments/kube-system/coredns</code>相关联的值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi ov"><img src="../Images/9e3e3112d6507ddfe7363b6df2cac6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B1dFp-tYfzw7-hOiod3f_Q.png"/></div></div></figure><p id="f408" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果我们解码与这个键相关联的值，那么返回的结果就不太可读，因为有些字符无法解释，但是当然，Kubernetes知道如何正确地处理它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi pa"><img src="../Images/b12945471785d4141d5438480c21c6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvXxpp1wRnBR6JEDExffEA.png"/></div></div></figure><p id="41b2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">从这个结果中，我们可以推断出这个键用于存储管理<code class="fe oi oj ok ol b">coredns</code>pod的部署的规范和状态。</p></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h1 id="4317" class="lt lu it bd lv lw lx ly lz ma mb mc md jz me ka mf kc mg kd mh kf mi kg mj mk bi translated">Pod的创建</h1><p id="1c2b" class="pw-post-body-paragraph kq kr it ks b kt ny ju kv kw nz jx ky kz oa lb lc ld ob lf lg lh oc lj lk ll im bi translated">让我们创建一个Pod，并检查集群的状态是如何修改的，以及添加了哪些新键。</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="6d35" class="oq lu it ol b gy or os l ot ou"><strong class="ol iu">$ cat &lt;&lt;EoF | kubectl apply -f -<br/></strong>apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: www<br/>spec:<br/>  containers:<br/>  - name: nginx<br/>    image: nginx:1.16-alpine<br/><strong class="ol iu">EoF</strong></span></pre><p id="0a93" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">使用与前面相同的命令，我们获得所有的密钥并将这个列表保存在<code class="fe oi oj ok ol b">etcd-kv-after-nginx-pod.json</code>中。快速比较两个键列表，一个是在集群创建后检索的(<code class="fe oi oj ok ol b">etcd-kv.json</code>)，另一个是在部署<code class="fe oi oj ok ol b">www</code> Pod ( <code class="fe oi oj ok ol b">etcd-kv-after-nginx-pod.json</code>)后检索的，显示了以下内容:</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="0b3c" class="oq lu it ol b gy or os l ot ou">&gt; /registry/events/default/www.15b9e3051648764f<br/>&gt; /registry/events/default/www.15b9e3056b8ce3f0<br/>&gt; /registry/events/default/www.15b9e306918312ea<br/>&gt; /registry/events/default/www.15b9e306a32beb6d<br/>&gt; /registry/events/default/www.15b9e306b5892b60<br/>&gt; /registry/pods/default/www</span></pre><p id="41dd" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">五个事件生成一个Pod，这就说得通了。让我们仔细看看，从解码与事件键相关的值开始。按照时间顺序，我们可以看到它们与以下行动相关联:</p><ul class=""><li id="7532" class="nb nc it ks b kt ku kw kx kz nd ld ne lh nf ll ng nh ni nj bi translated">成功分配<code class="fe oi oj ok ol b">default/www to node-02</code></li><li id="dcfe" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">拉动图像<code class="fe oi oj ok ol b">“nginx:1.16-alpine</code></li><li id="0969" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">成功提取图像<code class="fe oi oj ok ol b">“nginx:1.16-alpine</code></li><li id="8d6e" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">已创建的容器<code class="fe oi oj ok ol b">nginx</code></li><li id="1933" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">开始了<code class="fe oi oj ok ol b">”Started container nginx</code></li></ul><p id="f54c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这些事件列在描述Pod的命令的末尾:</p><pre class="kj kk kl km gt om ol on oo aw op bi"><span id="28ce" class="oq lu it ol b gy or os l ot ou">$ kubectl describe pod www</span></pre><p id="5e59" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">最后一个键<code class="fe oi oj ok ol b"><em class="ow">/registry/pods/default/www</em></code>，提供与新创建的Pod相关的所有信息<em class="ow"> </em>:</p><ul class=""><li id="15d2" class="nb nc it ks b kt ku kw kx kz nd ld ne lh nf ll ng nh ni nj bi translated">上次应用的配置</li><li id="da16" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">关联的令牌</li><li id="80d2" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi translated">它的状态</li><li id="4002" class="nb nc it ks b kt nk kw nl kz nm ld nn lh no ll ng nh ni nj bi">…</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi pb"><img src="../Images/df62dd9fec2edf76895919976c78d8c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obt0bFoyaMC8mTfNF7z_bw.png"/></div></div></figure><p id="af20" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">同样，特殊字符不能正确显示，但我们明白了。</p></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h1 id="6b1f" class="lt lu it bd lv lw lx ly lz ma mb mc md jz me ka mf kc mg kd mh kf mi kg mj mk bi translated">摘要</h1><p id="c8c7" class="pw-post-body-paragraph kq kr it ks b kt ny ju kv kw nz jx ky kz oa lb lc ld ob lf lg lh oc lj lk ll im bi translated">本文的目的不是深入研究etcd，而是稍微解释一下它包含的内容以及信息是如何组织的。这样做，我希望它看起来不像一个黑匣子。</p><p id="286e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">更进一步，下面这篇文章展示了如何在一个牧场主的RKE集群上备份和恢复etcd<a class="ae mv" href="https://medium.com/better-programming/kubernetes-tips-backup-and-restore-etcd-97fe12e56c57" rel="noopener">https://medium . com/better-programming/kubernetes-tips-backup-and-restore-etcd-97 Fe 12 e 56 c 57</a></p></div></div>    
</body>
</html>