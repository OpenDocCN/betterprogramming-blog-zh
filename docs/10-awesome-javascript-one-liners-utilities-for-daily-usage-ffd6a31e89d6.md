# 10 个非常棒的日常使用的 JavaScript 一行程序

> 原文：<https://betterprogramming.pub/10-awesome-javascript-one-liners-utilities-for-daily-usage-ffd6a31e89d6>

## 更新 cookie 值，检测悬停效果，等等

![](img/15febf5be9f94764291b4e0408f85e53.png)

作者创作的封面

因为 JavaScript 是最流行的语言之一，所以有大量的库。这并不意味着我们应该沉迷于不断地向我们的代码库添加更多的东西。我们可能只需要这个我们可以自己构建的工具。

大约五年前，流行的 npm 模块`left-pad`的删除给互联网带来了短暂的混乱。这是一个可以用一行代码轻松构建的实用程序。事实上，它在`ES7`规格中可用。

我们如何防止这种情况发生？我们应该不断地重新发明轮子吗？

不，我们需要明智而整洁地对待我们的 npm 依赖关系。我们需要评估只为一个实用程序添加一个库是否值得。我们自己编码将会给我们更多的控制和对正在执行的内容的更好的理解。

在本文中，我们将看到十个强大的 JavaScript 一行程序工具的例子，它们易于构建和测试。

# 1.生成随机布尔值

我们知道`Math.random`返回一个在`0`和`1`之间的值。我们可以利用这些知识来创建一个非常简单的布尔生成器。

# 2.生成一个随机数

我们将再次利用`Math.random` API。将结果乘以最大值并四舍五入。然后我们将获得一个在`0`和`max`之间的数字。

很容易将这种方法进一步扩展到接受最小和最大范围。

我们在上面的代码中所做的是生成一个区间数的区间差。之后，我们添加最小值。这将在我们给定的范围内产生一个数字。

# 3.生成随机 ID

为了生成这个实用程序，我们将依赖于`toString`方法。它将让我们把随机数转换成字符串。

```
*num*.toString(radix)
```

注意，该方法采用了一个可选参数`radix`，该参数应该在 2 到 36 之间。

对于这种方法，我们将使用最大可接受基值`36`，原因如下:

> **"Base36** 是一种二进制到文本的编码方案，它通过将二进制数据转换成 radix-36 表示来表示 ASCII 字符串格式的二进制数据。选择 36 是很方便的，因为这些数字可以用阿拉伯数字 0-9 和拉丁字母 A-Z[1]”来表示

我们将跳过前两个字符，因为它们最有可能是`0.`。让我们用一个例子来看看我们的代码:

⚠️ `Math.random`结果不包括`1`，包括`0`。这意味着我们的`randomId`结果是`""`的可能性很小。这是因为我们依赖于序列的开始是`0.`。

我们可以简单地为该场景返回`0`,或者您认为合适的任何其他默认字符串 id:

我们的`randomId`方法现在是健壮的。它将返回一个字母数字随机 id。

# 4.生成一个随机的十六进制数

我们可以应用上面看到的相同原理来创建一个随机的十六进制数函数。对于下一个方法，我们将使用`ES7`字符串填充函数:`padEnd`。

如果我们不想依赖`ES7`，我们可以简单地用一种更有效的方式来做:

两种解决方案都很棒。您的选择将取决于您是否希望牺牲一点性能来换取可读性。

# 5.初始化数组

我们不断地操纵数组。谢天谢地，有了所有新的 ECMAScript 规范，我们有了更多的数组工具。我们可以用它来创建很棒的一行程序。

`Array(x)`是初始化长度为`x`的数组的好方法。让我们用它来创建一个有序的数字数组。

我们可以很容易地创建一个布尔数组:

默认情况下，它将为 false，但是我们可以通过向函数传递第二个参数来覆盖它。

# 6.从数组中删除重复项

移除数组的副本很容易做到。我们可以为此使用`Set`对象，然后转换回一个数组。

# 7.打乱数组

起初，打乱一个数组可能听起来有点困难。我们可以使用`sort`方法。

⚠️注意到`sort`方法会使目标数组变异。我们必须首先为我们的数组创建一个副本，然后对其进行排序。代码如下:

`sort`方法 API 采用两项参数进行相互比较。我们将忽略这些，因为我们随机决定一个项目是否大于订单。

# 8.检测悬停效果特征

由于 UX 的原因，知道用户是否拥有具有悬停效果功能的设备是很方便的。我们可能希望根据这个标准来调整我们的布局。

API 将授权我们为此创建一个实用程序:

通过查询`matchMedia`，我们可以检查浏览器是否有过多的功能。

# 9.获取 Cookie 值

有时我们依赖第三方库，如`cookie-manager`或`js-cookies`来处理所有的 cookies 交互。如果我们只需要几个 cookie 工具，我们可以自己实现它们。

从 JavaScript 访问客户端 cookies 很容易:

> “`Document`属性`cookie`允许您读写与文档相关的 cookies。它充当 cookies 实际值的获取器和设置器。— MDN

总之，浏览器 cookies 是关于处理包含所有信息的`document.cookie`字符串的。

让我们创建一个实用程序，通过名称获取某个 cookie 的值。

请注意，我们将依靠正则表达式来找出值。我们将通过使用括号来使用正则表达式组。我们将使用可选操作符`?`来防止任何未定义的错误。

⚠️如前所述，你将无法从 JavaScript 端访问`Http Only`cookie。

# 10.更新 Cookie 值

更新 cookie 值可能看起来是一项微不足道的任务。然而，浏览器的安全性让这变得很难。

`document.cookie` API 只是公开了 cookie 的值。它省略了任何关于 cookie 的`domain`或`path`信息。要更新 cookie，您需要这两条信息。否则，您可能会创建新的 cookie，而不是更新现有的 cookie。

注意`document.cookie`既是 cookie API 的读写接口。

# 最后的想法

我们已经看到为我们的 JavaScript 代码库创建实用程序是多么容易和有趣。通过构建我们自己的函数，我们将获得对我们的应用程序中正在运行的东西的控制。另一个好处是，我们将学习更多关于网络和浏览器的见解，而不是依赖库来为我们做工作。

随着每个 EMAScript 版本的发布，普通 JavaScript 变得越来越强大。这意味着我们将需要更少的图书馆。我们将有更好的工具来建造更多的设施。

与任何代码一样，我们只需关注 transpilers 和 polyfills，这样我们的应用程序就可以在任何浏览器中运行。

干杯。

# 有关系的

[](/javascript-es2021-a-look-at-the-new-features-7d5770288648) [## JavaScript ES2021:看看新特性

### 新 ES12 规格概述

better 编程. pub](/javascript-es2021-a-look-at-the-new-features-7d5770288648) [](/7-tips-to-write-efficient-and-performant-javascript-code-bccbdb9662ae) [## 编写高效高性能 JavaScript 代码的 7 个技巧

### 提升您的 JavaScript 应用程序的性能

better 编程. pub](/7-tips-to-write-efficient-and-performant-javascript-code-bccbdb9662ae)