<html>
<head>
<title>Complete Android Data Binding Tutorial (Part one)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完整的Android数据绑定教程(第一部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/android-data-binding-139686b65aec?source=collection_archive---------3-----------------------#2019-10-18">https://betterprogramming.pub/android-data-binding-139686b65aec?source=collection_archive---------3-----------------------#2019-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="a351" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><strong class="ak">部分</strong><a class="ae ep" href="https://developer.android.com/jetpack" rel="noopener ugc nofollow" target="_blank"><strong class="ak">Android Jetpack</strong></a><strong class="ak">。</strong></h2><div class=""/><div class=""><h2 id="d801" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">没有更多的findViewById()</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/492d55549617363b4013ead4e67dbeda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*oxVS_EJadi2w1tyTTgepzg.png"/></div></figure><blockquote class="kw"><p id="d841" class="kx ky iq bd kz la lb lc ld le lf lg dk translated">“永远不要停止学习；因为当我们停止学习时，我们就停止了成长”</p></blockquote><p id="1840" class="pw-post-body-paragraph lh li iq lj b lk ll ka lm ln lo kd lp lq lr ls lt lu lv lw lx ly lz ma mb lg ij bi mc translated">数据绑定让开发者的生活变得更加轻松，并预示着android应用开发的新时代。</p><p id="238c" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">我在之前的文章中谈到了数据绑定，比如<a class="ae mq" href="https://medium.com/better-programming/recyclerview-expanded-1c1be424282c" rel="noopener">“如何制作可通过动画扩展的RecyclerView项目”</a>，但是如果你对数据绑定一无所知，请继续阅读，我将带你了解每一个方面。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="6eb6" class="my mz iq bd na nb nc nd ne nf ng nh ni kf nj kg nk ki nl kj nm kl nn km no np bi translated">什么是数据绑定？</h1><p id="d38d" class="pw-post-body-paragraph lh li iq lj b lk nq ka lm ln nr kd lp lq ns ls lt lu nt lw lx ly nu ma mb lg ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di">n droid数据绑定是<a class="ae mq" href="https://developer.android.com/jetpack" rel="noopener ugc nofollow" target="_blank"> android jetpack </a>的一部分，这是一套帮助开发者开发高质量应用的工具。如果你是一个有android应用开发经验的开发者，你会熟悉<code class="fe nv nw nx ny b">findViewById()</code>，在活动中声明视图的方法。假设我正在制作一个应用程序，它会在<code class="fe nv nw nx ny b">textView</code>中显示我的名字。这里我展示了定义视图的两种方式，有数据绑定和没有数据绑定。</span></p><blockquote class="nz oa ob"><p id="8ca0" class="lh li oc lj b lk ml ka lm ln mm kd lp od mn ls lt oe mo lw lx of mp ma mb lg ij bi translated">注意:为了简洁起见，我省略了XML和活动的细节。</p></blockquote><h2 id="3efa" class="og mz iq bd na oh oi dn ne oj ok dp ni lq ol om nk lu on oo nm ly op oq no iw bi translated"><strong class="ak">无数据绑定</strong></h2><pre class="kp kq kr ks gt or ny os ot aw ou bi"><span id="ed3b" class="og mz iq ny b gy ov ow l ox oy">TextView myName = findViewById(R.id.m);<br/>myName.setText(“Mustufa Ansari”)</span></pre><h2 id="3b33" class="og mz iq bd na oh oi dn ne oj ok dp ni lq ol om nk lu on oo nm ly op oq no iw bi translated">使用数据绑定</h2><pre class="kp kq kr ks gt or ny os ot aw ou bi"><span id="2328" class="og mz iq ny b gy ov ow l ox oy">&lt;TextView<br/>    android:text="@{modelClass.userName}" /&gt;</span></pre><p id="4636" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">你可能觉得很难理解上面发生的事情——这完全没关系。这是一小段与数据绑定相关的代码，只是给你一个思路。</p><p id="3275" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">你可以清楚地看到，在上面代码的数据绑定部分，我已经直接在我们的活动中使用<code class="fe nv nw nx ny b">modelClass</code>在<em class="oc"> XML </em>文件中声明了我的用户名。在此之后，您不需要在您的活动中添加<code class="fe nv nw nx ny b">findViewById()</code>来找到<code class="fe nv nw nx ny b">textview</code>，然后在其中设置<code class="fe nv nw nx ny b">userName</code> <strong class="lj ja"> </strong>。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="ddec" class="my mz iq bd na nb nc nd ne nf ng nh ni kf nj kg nk ki nl kj nm kl nn km no np bi translated">入门指南</h1><p id="97c6" class="pw-post-body-paragraph lh li iq lj b lk nq ka lm ln nr kd lp lq ns ls lt lu nt lw lx ly nu ma mb lg ij bi translated">首先，我在您的<code class="fe nv nw nx ny b">build.gradle</code>中添加了一小段代码，以便在您的项目中启用数据绑定:</p><pre class="kp kq kr ks gt or ny os ot aw ou bi"><span id="e87e" class="og mz iq ny b gy ov ow l ox oy">dataBinding{<br/>   enabled true<br/>}</span></pre><p id="ea1b" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">接下来，我制作一个简单的应用程序，在<code class="fe nv nw nx ny b">textViews</code>中显示一些文本。我将向您展示在<code class="fe nv nw nx ny b">textView</code>、<em class="oc">中使用</em> <strong class="lj ja"> </strong>和<em class="oc">中不使用</em> <strong class="lj ja"> </strong>数据绑定的两种数据呈现方式，以便您了解其流程。</p><p id="0b89" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">我已经在我的<code class="fe nv nw nx ny b">build.gradle</code>文件中添加了数据绑定依赖:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="563f" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在让我们来做一个示范课。正如我前面提到的，数据绑定与模型类一起工作。在使用数据绑定时拥有一个模型类是一个很好的实践——这是在应用程序中使用数据绑定的完整方式。</p><p id="c203" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">我正在创建一个名为<code class="fe nv nw nx ny b">Person.java</code>的模型类，其中我定义了两个变量:<code class="fe nv nw nx ny b">name</code>和<code class="fe nv nw nx ny b">age</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="82ed" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在让我们在应用程序中展示一些数据。我将把这分成两步—有数据绑定和没有数据绑定。</p><h2 id="47d6" class="og mz iq bd na oh oi dn ne oj ok dp ni lq ol om nk lu on oo nm ly op oq no iw bi translated">无数据绑定</h2><p id="95f1" class="pw-post-body-paragraph lh li iq lj b lk nq ka lm ln nr kd lp lq ns ls lt lu nt lw lx ly nu ma mb lg ij bi translated">我的<code class="fe nv nw nx ny b">activity_main.xml</code>长这样:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="ba0b" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">我的<code class="fe nv nw nx ny b">MainActivity.java</code>长这样:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="9399" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">这是声明视图和将视图与数据绑定的老方法。</p><p id="30f0" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">点击运行，你会得到这个结果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/f7d0846b78688b79c3eb2baa1fae54c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*FnX91ZOQtMbVkTaPZG_D0g.jpeg"/></div></figure><h2 id="e78c" class="og mz iq bd na oh oi dn ne oj ok dp ni lq ol om nk lu on oo nm ly op oq no iw bi translated">使用数据绑定</h2><p id="0a4e" class="pw-post-body-paragraph lh li iq lj b lk nq ka lm ln nr kd lp lq ns ls lt lu nt lw lx ly nu ma mb lg ij bi translated">为了实现数据绑定，我们需要将整个布局包装在<code class="fe nv nw nx ny b">&lt;layout&gt;&lt;/layout&gt;</code>标签中，就像这样:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="4629" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在，在数据绑定中，我们可以直接将视图与数据绑定。但是为此，我们必须引入另一个数据绑定术语:<code class="fe nv nw nx ny b">&lt;data&gt;&lt;/data&gt;</code>标签。在这个数据标签中，我们可以导入我们需要的模型类，它需要与视图绑定:</p><pre class="kp kq kr ks gt or ny os ot aw ou bi"><span id="9644" class="og mz iq ny b gy ov ow l ox oy">&lt;data&gt;<br/>    &lt;variable<br/>        name="person"<br/>        type="com.codixlab.databinding.Person" /&gt;<br/>&lt;/data&gt;</span></pre><p id="5c09" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">这意味着我们将把这个模型类附加到我们的布局中。这里你可以看到我们有一个<code class="fe nv nw nx ny b">variable</code>标签，它有两个属性:<em class="oc">名称</em>和<em class="oc">类型</em>。</p><p id="91ee" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">给这个模型类起什么名字是你自己的决定，但是给它起一个和你的模型类一样的名字是一个很好的习惯。</p><p id="1380" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated"><code class="fe nv nw nx ny b">type</code>:这是一种<code class="fe nv nw nx ny b">name</code>变量。这里我们将<code class="fe nv nw nx ny b">Person</code>类附加到布局中，所以类型是<code class="fe nv nw nx ny b">Person.java</code>的类路径。</p><p id="7331" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在我们的<code class="fe nv nw nx ny b">activity_main.xml</code>长这样:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="6e6f" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">下一步是用数据绑定我们的视图。要做到这一点，有一种通过使用带有视图的<code class="fe nv nw nx ny b">'@{}'</code>来绑定带有数据的布局的方法。让我们看看如何实现这一点:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/22915d4ee98f1fd1046a4e890693a644.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*xvhV6r2f18QkUD5hZ7-w3w.png"/></div></figure><p id="9908" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">在这里，我将我的<code class="fe nv nw nx ny b">TextView</code>文本属性与模型类属性<code class="fe nv nw nx ny b">name</code>绑定，这样无论活动的名称是什么，它都会显示在这个<code class="fe nv nw nx ny b">textView</code> <em class="oc">中。</em>这有意义吗？</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="3bb8" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在布局一切正常，是时候编辑我们的<code class="fe nv nw nx ny b">MainActivity.java</code>了。</p><p id="7332" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">首先，我们需要告诉我们的活动我们将使用数据绑定，因为它不知道我们在XML文件中做了什么。为此，当我们将布局包含在<code class="fe nv nw nx ny b">&lt;layout&gt;</code>标签下时，数据绑定会生成一个类。将该类导入模式很简单。无论您的活动布局的名称是什么，您的绑定类名称都将与该布局文件一致。让我们来看看。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="pe pf di pg bf ph"><div class="gh gi pd"><img src="../Images/54be8a84bd09fc15121d63e6da69085a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*icdNpQMhgj4dP4_5U1ee7Q.png"/></div></div></figure><p id="3a90" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">“Binding”一词将由数据绑定库本身附加。</p><p id="6a48" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated"><em class="oc">注意:如果您无法导入您的数据绑定活动类，只需重新构建您的项目。</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="pe pf di pg bf ph"><div class="gh gi pi"><img src="../Images/8ec39aabc0ba9a5d6b97b1023ee68919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*xj5FMJyhVXJeiNba8Yr_gQ.png"/></div></div></figure><p id="3388" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">在这一行中，我们将整个XML存储在变量<code class="fe nv nw nx ny b">bi</code>中。我们可以用这个变量访问整个布局和其中的每个视图。随便你给它起什么名字——我只是叫它<code class="fe nv nw nx ny b">bi</code>以供即时使用。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="b0d8" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在是将数据附加到视图的时候了。</p><p id="d50c" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">还记得我们对XML文件中的数据做了什么吗？</p><p id="1546" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">没错，我们用名字<code class="fe nv nw nx ny b">person</code>设置模型类。数据绑定非常方便——它为数据生成setter方法。如果你调用<code class="fe nv nw nx ny b">bi</code>并按下<code class="fe nv nw nx ny b">. </code>，那么你会看到类似<code class="fe nv nw nx ny b">setPerson()</code>的东西，你可以在其中设置你的模型类。然后它将附加一个视图:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="6328" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">现在点击运行，你会看到结果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/f7d0846b78688b79c3eb2baa1fae54c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*FnX91ZOQtMbVkTaPZG_D0g.jpeg"/></div></figure><p id="2adb" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">让我们比较一下有数据绑定和没有数据绑定的代码:</p><div class="kp kq kr ks gt ab cb"><figure class="pj kt pk pl pm pn po paragraph-image"><div role="button" tabindex="0" class="pe pf di pg bf ph"><img src="../Images/884bbe83383000e7e2412e2c7216df6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*Qi2ZyFMxPR96f8w6f6hK-g.png"/></div></figure><figure class="pj kt pp pl pm pn po paragraph-image"><div role="button" tabindex="0" class="pe pf di pg bf ph"><img src="../Images/99f48b26ee795b075ca3d79132dac60c.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*HH1IpFkH63TOY64vrq7LLg.png"/></div></figure></div><p id="c600" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">您可以清楚地看到两个示例中的代码行。数据绑定让开发人员更容易开发复杂的应用程序，也让我们免于编写样板代码。</p><p id="12e7" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated">这是系列文章的第一部分——还有很多东西要学，我们还没有完成数据绑定！</p><h2 id="28af" class="og mz iq bd na oh oi dn ne oj ok dp ni lq ol om nk lu on oo nm ly op oq no iw bi translated"><a class="ae mq" href="https://medium.com/better-programming/android-data-binding-2-37737eef89d9" rel="noopener">点击此处查看第二部分</a></h2><p id="61a7" class="pw-post-body-paragraph lh li iq lj b lk nq ka lm ln nr kd lp lq ns ls lt lu nt lw lx ly nu ma mb lg ij bi translated"><strong class="lj ja">关注</strong><a class="ae mq" href="https://medium.com/codixlab" rel="noopener"><strong class="lj ja">CodixLab</strong></a><strong class="lj ja">了解更多科技知识。</strong></p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="dd6c" class="pw-post-body-paragraph lh li iq lj b lk ml ka lm ln mm kd lp lq mn ls lt lu mo lw lx ly mp ma mb lg ij bi translated"><strong class="lj ja">觉得这篇文章有用吗？下面是我阅读最多的关于更好编程的文章:</strong></p><ul class=""><li id="906a" class="pq pr iq lj b lk ml ln mm lq ps lu pt ly pu lg pv pw px py bi translated"><a class="ae mq" href="https://medium.com/better-programming/android-copy-paste-7dd60ad47d0" rel="noopener">如何使用TextView在android中实现复制/粘贴功能？</a></li><li id="dedb" class="pq pr iq lj b lk pz ln qa lq qb lu qc ly qd lg pv pw px py bi translated"><a class="ae mq" href="https://medium.com/better-programming/android-free-courses-3b550ce388e6" rel="noopener">想成为一名成功的Android开发者？遵循此路线图</a></li><li id="2377" class="pq pr iq lj b lk pz ln qa lq qb lu qc ly qd lg pv pw px py bi translated"><a class="ae mq" href="https://medium.com/better-programming/bottom-sheet-android-340703e114d2" rel="noopener">全屏底片</a></li><li id="9719" class="pq pr iq lj b lk pz ln qa lq qb lu qc ly qd lg pv pw px py bi translated"><a class="ae mq" href="https://medium.com/better-programming/recyclerview-expanded-1c1be424282c" rel="noopener">如何使RecyclerView项目可扩展？</a></li><li id="93ad" class="pq pr iq lj b lk pz ln qa lq qb lu qc ly qd lg pv pw px py bi translated">想要制作具有更多选项的动画浮动操作按钮？</li><li id="09fa" class="pq pr iq lj b lk pz ln qa lq qb lu qc ly qd lg pv pw px py bi translated"><a class="ae mq" href="https://medium.com/better-programming/android-recyclerview-with-beautiful-animations-5e9b34dbb0fa" rel="noopener">用漂亮的动画制作RecyclerView！</a></li></ul></div></div>    
</body>
</html>