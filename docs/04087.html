<html>
<head>
<title>How onChange Differs Between React and Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React和普通JavaScript在onChange上的区别</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-onchange-differs-between-react-and-vanilla-javascript-90b56d6a340a?source=collection_archive---------8-----------------------#2020-03-23">https://betterprogramming.pub/how-onchange-differs-between-react-and-vanilla-javascript-90b56d6a340a?source=collection_archive---------8-----------------------#2020-03-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6467" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">重要的区别，这样你就不会在你的应用中引入错误</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/171e0664c3e09735b79400f1a086f6a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uIJjKkZa860fhrxFHfgxqg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Franck V. </a>在<a class="ae ky" href="https://unsplash.com/s/photos/differences?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e6f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多人在他们的项目中使用React。它是世界上最流行和最著名的JavaScript框架之一，我认为它的声誉至少还会持续几年。</p><p id="5189" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是世界上没有完美，不管它是什么。React也是那些不完美的产品之一。意思是，React是基于JavaScript的。因此，它支持JavaScript中几乎所有的特性。</p><p id="a039" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我在React里发现了一件相当诡异的事情，让我思考:“为什么会这样？”这就是我在这篇帖子里要讲的——<code class="fe lv lw lx ly b">onChange</code>，JavaScript DOM事件方法。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f423" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">阅读前</h1><ol class=""><li id="7387" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu nf ng nh ni bi translated">您应该知道React以及如何用JavaScript处理事件处理程序。如果你不太了解它们，请先阅读相关文档。</li><li id="2e3f" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">对于一些人来说，这可能是一个太容易的话题。但是，对于React、Vue或其他JavaScript框架是他们使用名为JavaScript的武器的第一个战场的人来说，比如初级web开发人员(有时也包括高级开发人员)，这可能是一个非常有趣的话题。</li></ol></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9425" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">如何将事件处理程序挂在React JSX元素上</h1><p id="874d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">首先，让我们看看如何处理输入标签上的事件处理程序。通常，在React中，您可以使用<code class="fe lv lw lx ly b">onChange</code>来检测用户键盘交互。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="844d" class="nv mh it ly b gy nw nx l ny nz">&lt;input type="text" onChange={e =&gt; {<br/>  cb(e.target.value);<br/>}} /&gt;</span></pre><p id="d2a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很简单。<code class="fe lv lw lx ly b">onChange</code>给了你一个<code class="fe lv lw lx ly b">Event</code>对象，它包含了<code class="fe lv lw lx ly b">target</code>对象，你可以用它来获得输入值。您需要注册处理数据的回调函数。</p><p id="ec80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，香草JS怎么样？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="5a8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，事件回调已经通过<code class="fe lv lw lx ly b">addEventListener</code>注册。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a8e4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">有什么不同？</h1><p id="2e8a" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">主要区别是他们的结果不同。看看这个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/80984947d80fadf559e037957c2e9c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ts9UuQhXaOfdvMNOjCOEdQ.gif"/></div></div></figure><p id="ed1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React的<code class="fe lv lw lx ly b">onChange</code>会持续跟踪每一次击键的每一个输入值，而Vanilla的<code class="fe lv lw lx ly b">onChange</code>则不能。更奇怪的是，它甚至不能捕捉任何击键。</p><p id="ee60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的方法都不会有所不同。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="eb65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对此我满脑子都是好奇。所以，我读了MDN的文件。它告诉我:</p><blockquote class="od"><p id="03ae" class="oe of it bd og oh oi oj ok ol om lu dk translated">"当元素在其值被更改但未提交后失去焦点时."</p></blockquote><figure class="oo op oq or os kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/7d8f835dd66fc203a2184b8a078c78d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/1*IDck76W32KgOx_QAZ0sy0w.gif"/></div></figure><p id="0fef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在我单击不同的DOM元素后检测到该值，这意味着输入失去焦点。但是，为什么这与React不同呢？</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="754f" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">React已经解释了这一点</h1><p id="7242" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我当时想:“哦，真的吗？”当我注意到React已经在他们的官方文档页面上提到了这一点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/0cad51620a42abeab42aa70b62963195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_o9lpUc68mr-kSE6GIQNuA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://reactjs.org/docs/dom-elements.html#onchange" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/dom-elements.html#onchange</a></p></figure><p id="9468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">据此，React开发者认为Vanilla JavaScript的<code class="fe lv lw lx ly b">onChange</code>并不是人们对其命名所期望的最佳名称。因为人们可能期望<code class="fe lv lw lx ly b">onChange</code>应该检测输入的每一个变化。</p><p id="3105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我觉得好像少了点什么。感觉什么都没了。然后，我在GitHub上找到了一个我觉得描述了我的意思的评论。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/63ffdb9a78608c7b16ec289db53d9487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qo3KtTRSrW7McIw-5VWihQ.png"/></div></div></figure><p id="c1bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个密码就是他的意思。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="cf1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个看起来挺乱的，没必要吧？但是我们有更好更简洁的方法吗？</p><p id="19be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">遗憾的是，没有。因为React已经覆盖了原来的<code class="fe lv lw lx ly b">onChange</code>，所以在普通JavaScript中使用<code class="fe lv lw lx ly b">onChange</code>的唯一方法是通过使用<code class="fe lv lw lx ly b">addEventListener</code>绑定回调函数，或者将其直接绑定到元素。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1021" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">香草可以像React一样工作吗？</h1><p id="0d31" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">是的，绝对的。这其实是极其容易的。你需要做的就是用<code class="fe lv lw lx ly b">onInput</code>代替<code class="fe lv lw lx ly b">onChange</code>。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="a168" class="nv mh it ly b gy nw nx l ny nz">input.addEventListener('input', yourCallback);</span><span id="f1f7" class="nv mh it ly b gy ov nx l ny nz">&lt;Or&gt;</span><span id="0b20" class="nv mh it ly b gy ov nx l ny nz">input.oninput = yourCallback;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/8daec7bb04359a55552501da9bcc72f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/1*e2LV4mOL3fVDe6S934I40g.gif"/></div></figure><p id="f2f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所猜测的，普通JavaScript中的<code class="fe lv lw lx ly b">onInput</code>与React中的<code class="fe lv lw lx ly b">onChange</code>工作原理相同。W3Schools对<code class="fe lv lw lx ly b">onInput</code>和<code class="fe lv lw lx ly b">onChange</code>的区别描述如下。</p><blockquote class="ox oy oz"><p id="7a86" class="kz la pa lb b lc ld ju le lf lg jx lh pb lj lk ll pc ln lo lp pd lr ls lt lu im bi translated">不同之处在于onInput事件在元素的值更改后立即发生，而onChange事件在内容更改后元素失去焦点时发生。</p><p id="d64f" class="kz la pa lb b lc ld ju le lf lg jx lh pb lj lk ll pc ln lo lp pd lr ls lt lu im bi translated">另一个区别是onChange事件也作用于<select>元素。</select></p></blockquote></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="98ba" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="779c" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">React已经覆盖了Vanilla JavaScript的<code class="fe lv lw lx ly b">onChange</code>事件方法，所以如果您像React那样使用<code class="fe lv lw lx ly b">onChange</code>,就不能期望Vanilla会有同样的行为。但是，我不知道React所决定的是否可怕。</p><p id="5e16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想，大多数时候，你不需要香草味的<code class="fe lv lw lx ly b">onChange</code>。但是如果你知道它们有什么不同就好了——也许对准备工作面试也有好处。</p><p id="94e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个简短的对比例子，说明<code class="fe lv lw lx ly b">onChange</code>和<code class="fe lv lw lx ly b">onInput</code>在React和Vanilla上的区别。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pe ob l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="099f" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">资源</h1><ul class=""><li id="c943" class="my mz it lb b lc na lf nb li nc lm nd lq ne lu pf ng nh ni bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event" rel="noopener ugc nofollow" target="_blank"> onChange — MDN </a></li><li id="d0c7" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu pf ng nh ni bi translated"><a class="ae ky" href="https://reactjs.org/docs/dom-elements.html#onchange" rel="noopener ugc nofollow" target="_blank">React文档中的DOM元素</a></li><li id="a953" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu pf ng nh ni bi translated"><a class="ae ky" href="https://github.com/facebook/react/issues/3964#" rel="noopener ugc nofollow" target="_blank">记录React的onChange与onInput的关系</a></li><li id="ff14" class="my mz it lb b lc nj lf nk li nl lm nm lq nn lu pf ng nh ni bi translated"><a class="ae ky" href="https://www.w3schools.com/jsref/event_oninput.asp" rel="noopener ugc nofollow" target="_blank"> onInput — W3Schools </a></li></ul></div></div>    
</body>
</html>