<html>
<head>
<title>Why Is Lerna So Popular Among Developers?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么Lerna这么受开发者欢迎？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-is-lerna-so-popular-among-developers-ef78d965d3ea?source=collection_archive---------6-----------------------#2020-09-23">https://betterprogramming.pub/why-is-lerna-so-popular-among-developers-ef78d965d3ea?source=collection_archive---------6-----------------------#2020-09-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f390" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">monorepo的工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d73d6dd73abe4b36ab251050f746c9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sQ6sGhRdf_gMySX6-4Gbfg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://lerna.js.org/" rel="noopener ugc nofollow" target="_blank"> Lerna </a>。</p></figure><p id="6d74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Lerna是一个monorepo工具，用于管理一个存储库中的多个项目。</p><p id="fc2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">处理任何复杂的应用程序都涉及到多个存储库，对它们进行更改可能很难跟踪，并且会使事情变得复杂。这就是勒纳前来救援的地方。使用monorepo的一个主要好处是它可以在项目之间共享依赖关系。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2f7a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">开发者为什么要用Lerna？</h1><p id="15d6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Lerna通过管理诸如版本控制、代码部署、项目间的依赖关系管理等任务，让开发人员的工作变得更加轻松。它主要用于较大的项目，随着时间的推移，很难手动维护所有这些任务。</p><h2 id="9320" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">例子</h2><p id="8925" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">假设您正在构建一个电子商务应用程序，它有多个包含不同代码库的存储库。一个包含web的前端代码库，另一个包含API服务，还有一个包含移动代码。现在，您将在所有的存储库中使用相同的工具，对吗？我说的工具，是指使用eslint、prettier、babel等工具。我们可以拥有所有项目共享的公共配置，而不是每个项目都有单独的配置。</p><p id="1d06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，如果您使用所有这些项目共有的某些依赖项，您可以将它们包含一次，并在全局范围内共享它们，而不是将它们单独包含在所有项目中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5f80" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Lerna回购看起来像什么？</h1><p id="0007" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们以前面的例子来展示目录结构的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/a428f9bb17fa70bec3eb2b08c1b77d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*jgEgw25HGNqAoofFEjbfwA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个基本的Lerna文件夹结构</p></figure><p id="9e11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，根<code class="fe nm nn no np b">package.json</code>文件包含所有项目(web、mobile)的公共依赖关系。根<code class="fe nm nn no np b">node_modules</code>包含所有这些依赖项。这些项目列在<code class="fe nm nn no np b">packages</code>目录下。移动和web中的<code class="fe nm nn no np b">node_modules</code>目录分别包含移动和web项目的依赖关系。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2cee" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Lerna提供的核心功能</h1><h2 id="c5c3" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">拔靴带</h2><p id="65fe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Lerna引导主repo中的所有包。换句话说，它安装所有的依赖项，并链接任何交叉依赖项(如果有的话)。它通过创建符号链接来链接所有的共享依赖项。如果在共享依赖项中进行了任何更新，它会立即在使用它的代码中生效。</p><h2 id="8714" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">出版</h2><p id="af43" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">出版从未如此简单。你所要做的就是输入一个简单的命令(<code class="fe nm nn no np b">lerna publish</code>，它会提示你输入一个新的版本，并更新git和npm上的所有包。如果您愿意，也可以强制发布。</p><h2 id="ddf7" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">版本控制</h2><p id="6c9f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Lerna提供了检查自上一版本以来哪些包发生了变化的能力。您还可以检查自上次发布以来所有软件包或单个软件包的差异。</p><h2 id="46ba" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">并发运行命令</h2><p id="693f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您可以在根文件<code class="fe nm nn no np b">package.json</code>中编写一个脚本，使用<code class="fe nm nn no np b">lerna run</code>命令在所有项目中同时运行该命令，而不是移动到每个项目并启动服务器。当您想要同时运行所有服务器时，可以使用这种行为。</p><p id="cb02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Lerna还提供了其他几个特性。我刚刚谈到了最基本的问题。看看他们的<a class="ae ky" href="https://lerna.js.org/" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="58cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">谁使用Lerna？</h1><p id="a3b8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">许多顶级公司在他们的项目中使用Lerna。使用Lerna的一些项目有:</p><ul class=""><li id="e317" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><a class="ae ky" href="https://github.com/babel/babel" rel="noopener ugc nofollow" target="_blank">巴别塔</a></li><li id="f9e8" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">做出反应</a></li><li id="f4e6" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><a class="ae ky" href="https://github.com/facebook/jest" rel="noopener ugc nofollow" target="_blank">笑话</a></li><li id="716a" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><a class="ae ky" href="https://github.com/vuejs/vue-cli" rel="noopener ugc nofollow" target="_blank"> Vue CLI </a></li><li id="d1d3" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><a class="ae ky" href="https://github.com/webpack/webpack-cli" rel="noopener ugc nofollow" target="_blank"> Webpack CLI </a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="854b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="4e96" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">今天，Lerna是用git和npm/yarn管理多包存储库的最流行的工具之一。许多人在他们的项目中使用它们并不奇怪，因为它们使事情变得非常简单。</p><p id="8a4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在构建一个大型应用程序，并且已经考虑将它设计成多个项目，那么您绝对应该尝试一下Lerna。蕾娜能做的还有很多。一个很好的起点是他们的<a class="ae ky" href="https://lerna.js.org/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="db67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>