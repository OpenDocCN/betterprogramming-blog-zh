<html>
<head>
<title>Improving Angular *ngFor Performance Through trackBy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过trackBy提高Angular *ngFor性能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/improving-angular-ngfor-performance-through-trackby-ae4cf943b878?source=collection_archive---------6-----------------------#2018-06-16">https://betterprogramming.pub/improving-angular-ngfor-performance-through-trackby-ae4cf943b878?source=collection_archive---------6-----------------------#2018-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a518" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解和使用*ngFor</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7dbdd86c7cadf6767c6c234d48424eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*juZZe0SbI8E_QPd74Ax9uA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@maxcodes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">麦克斯·尼尔森</a>在<a class="ae ky" href="https://unsplash.com/search/photos/angular?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h1 id="74dc" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak"> <em class="lr">简介</em> </strong></h1><p id="6758" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">基本上，开发人员发出一个<code class="fe mo mp mq mr b">GET http</code>请求来获取远程数据，然后通过*ngFor结构指令将这些数据绑定到HTML。</p><p id="3f2b" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">但是，你想过这个*ngFor指令的方法论吗？</p><p id="1c0c" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">该指令将接收iterable项的数组作为输入，然后为该数组的每个项创建一个模板。</p><h2 id="39d2" class="mx la it bd lb my mz dn lf na nb dp lj mb nc nd ll mf ne nf ln mj ng nh lp ni bi translated"><strong class="ak"> *ngFor局部变量</strong></h2><p id="bdc1" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">实际上，*ngFor导出了一些局部变量用于您当前的迭代:</p><p id="c0df" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">index:每个模板上下文的当前循环迭代。<br/> first:布尔值，表示该项是否是迭代中的第一项。<br/> last:布尔值，表示该项是否是迭代中的最后一项。<br/> even:表示该项是否有偶数索引的值。<br/> odd:布尔值，表示该项是否有奇数索引。</p><h2 id="31a9" class="mx la it bd lb my mz dn lf na nb dp lj mb nc nd ll mf ne nf ln mj ng nh lp ni bi translated"><strong class="ak">使用*ngFor without trackBy </strong></h2><p id="76b4" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">当将对象或元素的数组传递给*ngFor时，该指令将元素绘制到DOM。但是这里的问题是，当改变或修改这个数组的一些元素时，<em class="nj">这些元素被完全从头重新绘制到DOM中，这是一个非常昂贵和繁重的操作</em></p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="6b6d" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated"><strong class="ak">了解*ngFor机制</strong></h1><p id="14de" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">默认情况下，当您使用*ngFor而不使用trackBy时，*ngFor跟踪通过对象标识更改的对象数组。因此，如果对象数组的新引用被传递给指令，即使数组具有相同的值，Angular也无法检测到它们已经被绘制并呈现在当前DOM中。相反，将移除旧元素，并重新绘制具有相同值的新集合。</p><p id="17d1" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">我听到有人在问，“为什么<a class="ae ky" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>团队不把trackBy机制作为默认设置？”</p><p id="88d0" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">事实上，Angular团队已经对*ngFor进行了大量改进。他们的回答基本上是，“这是*ngFor通过对象标识的基本实现。如果您要修改(添加、更新、删除或重新排序)*ngFor的任何元素，请通过向trackBy函数提供您的对象id来更新跟踪算法。</p><p id="c3fa" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">看看下面。</p><h2 id="0b32" class="mx la it bd lb my mz dn lf na nb dp lj mb nc nd ll mf ne nf ln mj ng nh lp ni bi translated">在以下情况下使用trackBy:</h2><ul class=""><li id="2008" class="nw nx it lu b lv lw ly lz mb ny mf nz mj oa mn ob oc od oe bi translated">迭代对象集合的大数组</li><li id="a8f1" class="nw nx it lu b lv of ly og mb oh mf oi mj oj mn ob oc od oe bi translated">您的业务逻辑可能需要通过重新排序、修改特定项目、删除项目或添加新项目来修改这些元素</li></ul><h2 id="7d7e" class="mx la it bd lb my mz dn lf na nb dp lj mb nc nd ll mf ne nf ln mj ng nh lp ni bi translated"><strong class="ak">识别跟踪——保持跟踪并提高*绩效</strong></h2><p id="106a" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">默认情况下，trackBy函数接受两个参数。这些参数是索引和元素本身。如果你是从<a class="ae ky" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">出身的</a>反应过来的，这就类似于<a class="ae ky" href="https://reactjs.org/docs/lists-and-keys.html" rel="noopener ugc nofollow" target="_blank"> <em class="nj">键</em> </a> <em class="nj">。</em>如果你来自一个有棱角的背景，那就是被跟踪的<em class="nj">。</em></p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="3685" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated"><strong class="ak">使用*ngFor: </strong></h1><p id="58ab" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在html中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/f368fecf84fa67970b8556ea3c7e2b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49e0oIw8kL0HHiYzOxgYZA.png"/></div></div></figure><p id="096d" class="pw-post-body-paragraph ls lt it lu b lv ms ju lx ly mt jx ma mb mu md me mf mv mh mi mj mw ml mm mn im bi translated">英寸ts:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/d3bd18364ae66ce600d1b5141efeff98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*RVEtrHKMv_38Pp_E6Zzm3g.png"/></div></figure><h2 id="b597" class="mx la it bd lb my mz dn lf na nb dp lj mb nc nd ll mf ne nf ln mj ng nh lp ni bi translated">参考资料:</h2><div class="om on gp gr oo op"><a href="https://angular.io/api/common/NgForOf" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">角度文档</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">编辑描述</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">angular.io</p></div></div></div></a></div></div></div>    
</body>
</html>