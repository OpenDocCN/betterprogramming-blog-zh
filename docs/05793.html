<html>
<head>
<title>Build an Alexa Skill To Play Audio From YouTube Videos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立一个Alexa技能来播放YouTube视频中的音频</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-play-youtube-audio-from-your-alexa-e2d4fb8b5ce9?source=collection_archive---------1-----------------------#2020-08-06">https://betterprogramming.pub/how-to-play-youtube-audio-from-your-alexa-e2d4fb8b5ce9?source=collection_archive---------1-----------------------#2020-08-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c80" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何从你的Alexa播放YouTube音频</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e278f9c926b6746c9deb4420ccafee6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GtGo9ptayaHkW1s1s-EX5A.jpeg"/></div></div></figure><h1 id="897f" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">介绍</h1><p id="a272" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">你有没有想过让Alexa播放一段YouTube视频的音频？只需说“Alexa，请Hey Tube播放白蛇”，然后从YouTube上听一首非常棒的白蛇曲目。</p><p id="45ce" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在本文中，我将展示如何构建一个自定义的Alexa技能，以将您的亚马逊Echo设备连接到YouTube。</p><p id="5d93" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><em class="mn">注意:切记该技能不会在亚马逊商店制作中发布，只能在开发模式下使用。这不是亚马逊认可的技能，只能用于教育目的。</em></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="e1fb" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">Alexa自定义技能</h1><p id="f761" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">Alexa自定义技能由两个主要部分组成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/0755b9ac0fd9115f4eb59803f86a3920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*byEIeejfK5Ilz0B1gwjyJg.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated"><a class="ae nf" href="https://github.com/bignerdranch/developing-alexa-skills-solutions/blob/master/coursebook/coursebook.pdf" rel="noopener ugc nofollow" target="_blank">https://github . com/bignerdranch/developing-Alexa-skills-solutions/blob/master/course book/course book . pdf</a></p></figure><p id="c9c6" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">技能界面定义了您的技能的行为方式:</p><ul class=""><li id="11e1" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">一组“意图”,代表用户可以用你的技能做的动作。</li><li id="6564" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">一组“示例话语”,指定用户可以说出的单词和短语来调用这些意图。你将这些话语映射到你的意图——这种映射形成了技能的“交互模型”。</li><li id="f3d6" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">标识技能的“调用名<em class="mn">”</em>。用户在使用您的技能发起对话时会包括此名称。</li></ul><p id="d97e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">技能服务包含处理意图和执行动作的代码逻辑。该服务被部署为后端资源。对于本练习—部署在AWS Lambda中的JavaScript</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="39de" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">技能流</h1><p id="3913" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">这是要开发的自定义技能流程:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/45c2d9d95620951aef95396f5338b7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HbSMGPPYq4PmHOS0ghmAxQ.png"/></div></div></figure><ul class=""><li id="fe6a" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">该流以一条欢迎消息开始，并期望一个视频查询名称。</li><li id="4316" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">当被要求播放某个视频时，Alexa Interface使用查询作为参数调用服务。</li><li id="a53e" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">该服务调用YouTube API来搜索视频，然后将URL返回给Alexa。</li><li id="1159" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">Alexa开始播放视频网址中的音频。</li><li id="fbb9" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">用户可以随时要求Alexa停止播放。Alexa会停止音轨，说“再见”。</li></ul></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="1a3d" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">我们开始吧</h1><p id="3380" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">创建新的Alexa技能最简单的方法是使用ASK CLI <strong class="lo iu">。</strong></p><p id="69f7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在开始之前，请确保您已经安装了Amazon Developers帐户、Node、AWS帐户、AWS CLI和ASK CLI。</p><p id="ffec" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">要获得完整详细的环境设置指南，请查看我以前的文章<a class="ae nf" href="https://medium.com/swlh/quickly-build-an-alexa-skill-using-ask-cli-8ab2977bd126" rel="noopener">使用ASK CLI快速建立Alexa技能</a>。</p><p id="9336" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">让我们从创建新技能结构开始:<code class="fe nv nw nx ny b">$ ask new</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/e495fbce6474c1968b9921d5121ec490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mCi4mSsBnlzE-_pNzIox3w.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">询问新的</p></figure><p id="1f07" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">选择:</p><ul class=""><li id="a04a" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">NodeJS作为编程语言</li><li id="2020" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">AWS Lambda作为后端资源</li><li id="630a" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">Hello world作为起始模板</li><li id="f420" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">选择一个技能名称:<code class="fe nv nw nx ny b">alexa-skill-heytube</code></li><li id="5e5c" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">选择一个文件夹名:<code class="fe nv nw nx ny b">alexa-skill-heytube</code></li></ul><p id="d992" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">切换到您的新目录:<code class="fe nv nw nx ny b">$ cd alexa-skill-heytube/lambda</code></p><p id="09fd" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">安装您的软件包:<code class="fe nv nw nx ny b">$ npm install</code></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="e2c7" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">技能服务</h1><p id="e227" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">打开您最喜欢的代码编辑器。我用的是Visual Studio代码。</p><p id="9957" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">这是你的起始技能结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/7eda8386e3fa1c9922d27c56a4cf4c68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*3bbwUjn7d03wTQ5p0X3uew.png"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">vs代码技能结构</p></figure><p id="d947" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">技能服务文件位于<code class="fe nv nw nx ny b">skill-package</code>文件夹中。</p><p id="6a34" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">技能包包含ASK平台使用的所有资源——技能清单、交互模型和资产。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="4f36" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated"><strong class="ak">交互模型</strong></h1><p id="2578" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">交互模型将说出的单词解析成特定的意图事件。通过提供一个示例话语列表，您可以定义应该映射到交互模型中特定意图名称的单词。样本话语是表示用户可能与技能对话的一种可能方式的字符串。这些话语用于生成自然语言理解模型。这将用户的声音解析为我们的技能意图。</p><p id="8bc6" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">交互模型的名字是<code class="fe nv nw nx ny b">&lt;locale&gt;.json</code>，例如<code class="fe nv nw nx ny b">en-GB.json</code>。</p><p id="4c8a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><em class="mn">注:我的Alexa配置为en-GB，根据你的配置更新你的文件名，比如en-US或者其他。</em></p><p id="2c55" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">打开<strong class="lo iu"> </strong> <code class="fe nv nw nx ny b">iteractionModels/en-GB.json</code>文件:</p><p id="fc4c" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">与任何json文件一样，请密切注意格式:</p><ul class=""><li id="d36b" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">将<code class="fe nv nw nx ny b">invocationName</code>更新为你的技能名称:<br/> <code class="fe nv nw nx ny b"> “invocationName”: “hey tube”</code></li><li id="a886" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">删除<code class="fe nv nw nx ny b">HelloWorldIntent, AMAZON.NavigateHomeIntent</code></li><li id="0041" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">创建获取YouTube视频的新意图:</li></ul><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="bd49" class="of kv it ny b gy og oh l oi oj">{<br/>   "name": "GetVideoIntent",<br/>   "slots": [{<br/>       "name": "videoQuery",<br/>       "type": "VIDEOS"<br/>   }],<br/>   "samples": [<br/>       "search for {videoQuery}",<br/>       "find {videoQuery}",<br/>       "play {videoQuery}",<br/>       "start playing {videoQuery}",<br/>       "put on {videoQuery}"<br/>   ]<br/>},</span></pre><p id="2704" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">添加音频技能的标准要求意图:<code class="fe nv nw nx ny b">AMAZON.PauseIntent</code>和<code class="fe nv nw nx ny b">AMAZON.ResumeIntent</code>:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="3a33" class="of kv it ny b gy og oh l oi oj">{<br/>   "name": "AMAZON.PauseIntent",<br/>   "slots": [],<br/>   "samples": []<br/>},<br/>{<br/>   "name": "AMAZON.ResumeIntent",<br/>   "slots": [],<br/>   "samples": []<br/>}</span></pre><p id="2365" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们还需要定义一个名为<code class="fe nv nw nx ny b">VIDEOS</code>的类型。</p><p id="6b7a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在“类型”部分添加以下内容:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="e1b6" class="of kv it ny b gy og oh l oi oj">{<br/>   "name": "GetVideoIntent",<br/>   "slots": [{<br/>       "name": "videoQuery",<br/>       "type": "VIDEOS"<br/>   }],<br/>   "samples": [<br/>       "search for {videoQuery}",<br/>       "find {videoQuery}",<br/>       "play {videoQuery}",<br/>       "start playing {videoQuery}",<br/>       "put on {videoQuery}"<br/>   ]<br/>},</span></pre><p id="3e82" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">注:如有必要，根据你的Alexa配置语言重命名或创建一个json文件的副本，如<code class="fe nv nw nx ny b">en-US.json</code>。</p><h2 id="776a" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated"><strong class="ak">技能清单</strong></h2><p id="83a2" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">技能清单是你技能的JSON表示，为Alexa提供了所有需要的元数据。交互模型和帐户链接模式(如果使用的话)是分开的。</p><p id="9a0e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">打开<code class="fe nv nw nx ny b">skill.json</code>。用你的技能总结、例句、名字和描述更新你的地区信息。您还可以在png格式中添加您的技能的小图标和大图标:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="5b92" class="of kv it ny b gy og oh l oi oj">"locales": {<br/>   "en-GB": {<br/>      "summary": "Alexa Hey Tube Skill",<br/>      "examplePhrases": [<br/>         "Alexa open hey tube"<br/>      ],<br/>      "keywords": [<br/>         "audio",<br/>         "streaming",<br/>         "youtube"<br/>      ],<br/>      "name": "Hey Tube",<br/>      "description": "Alexa Skill to listen to youtube audio",<br/>      "smallIconUri": "https://alexademo.ninja/skills/logo-108.png",<br/>      "largeIconUri": "https://alexademo.ninja/skills/logo-512.png"<br/>   }<br/>}</span></pre><p id="18f2" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">将类别更新为<code class="fe nv nw nx ny b">STREAMING_SERVICE</code>:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="2312" class="of kv it ny b gy og oh l oi oj">"category": "STREAMING_SERVICE",</span></pre><p id="fe7f" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">启用audioplayer接口API。这将使Alexa技能播放音频文件:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="e4c3" class="of kv it ny b gy og oh l oi oj">"apis": {<br/>   "custom": {<br/>      "interfaces": [{<br/>         "type": "AUDIO_PLAYER"<br/>      }]<br/>   }<br/>}</span></pre><p id="bb98" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">完整的<code class="fe nv nw nx ny b">skill.json</code>可在此处获得:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">skill.json</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="a2d1" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">YouTube数据API密钥</h1><p id="55fc" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">您的应用程序必须有授权凭证才能使用YouTube数据API。</p><p id="6760" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">使用YouTube API不会给调用API的实体带来任何金钱成本。如果您超出了配额，API将返回403错误。每天的免费使用量限制在100000台——对于我们的使用来说绰绰有余。</p><p id="a999" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">按照以下步骤获取您的YouTube API密钥:</p><ol class=""><li id="7b30" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh ox nm nn no bi translated">前往<a class="ae nf" href="https://console.developers.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌开发者控制台</a></li><li id="ffdf" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">点击图标右边的<code class="fe nv nw nx ny b">Select project</code>下拉菜单创建一个新项目。点击<code class="fe nv nw nx ny b">New Project</code>按钮并为其命名。</li><li id="3733" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">在标题图标旁边的<code class="fe nv nw nx ny b">Select Dropdown</code>中选择您的项目。</li><li id="8400" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">点击<code class="fe nv nw nx ny b">Enable APIs and Services</code>按钮。</li><li id="8378" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">搜索<code class="fe nv nw nx ny b">youtube data</code>。</li><li id="056e" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">点击<code class="fe nv nw nx ny b">Youtube Data API v3</code>。</li><li id="271b" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">单击蓝色的启用按钮。</li><li id="71fb" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">在仪表板中，点击左侧边栏上的<code class="fe nv nw nx ny b">Credentials</code>。</li><li id="e291" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">点击<code class="fe nv nw nx ny b">Create Credential</code>按钮。</li><li id="da06" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">选择<code class="fe nv nw nx ny b">API Key</code>。</li><li id="57f7" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">复制您新生成的密钥并暂时保存它。</li></ol><h2 id="9a4d" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated">保护API密钥</h2><p id="176b" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">Google提供了以下准则来保护您的API密钥:</p><blockquote class="oy oz pa"><p id="92bd" class="lm ln mn lo b lp mi ju lr ls mj jx lu pb mk lx ly pc ml mb mc pd mm mf mg mh im bi translated">当您在应用程序中使用API密钥时，请确保它们在存储和传输过程中是安全的。公开暴露您的凭据可能会导致您的帐户受到威胁，这可能会导致您的帐户出现意外费用。为了帮助保持API密钥的安全，请遵循以下最佳实践:</p></blockquote><ul class=""><li id="ffc9" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">不要在代码中直接嵌入API键。嵌入在代码中的API密钥可能会意外地暴露给公众。例如，您可能忘记从您共享的代码中移除密钥。不要将API键嵌入到应用程序中，而是将它们存储在应用程序源代码树之外的环境变量或文件中。</li><li id="4208" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">不要将API键存储在应用程序源代码树内的文件中。如果您将API密钥存储在文件中，请将文件放在应用程序的源代码树之外，以确保您的密钥不会出现在源代码控制系统中。如果使用GitHub这样的公共源代码管理系统，这一点尤为重要。</li><li id="fd57" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">设置<a class="ae nf" href="https://cloud.google.com/docs/authentication/api-keys#api_key_restrictions" rel="noopener ugc nofollow" target="_blank">应用程序和API密钥限制</a>。通过添加限制，您可以降低受损API密钥的影响。</li><li id="ce98" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">删除不需要的API密钥，以最大限度地减少遭受攻击的风险。</li><li id="80eb" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">定期重新生成您的API密钥。您可以从<a class="ae nf" href="https://console.cloud.google.com/apis/credentials" rel="noopener ugc nofollow" target="_blank">凭证页面</a>通过点击每个密钥的重新生成密钥来重新生成API密钥。然后，更新您的应用程序以使用新生成的密钥。生成替换密钥后，您的旧密钥将继续工作24小时。</li><li id="428e" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated">在公开发布之前，请检查您的代码。在公开您的代码之前，请确保您的代码不包含API密钥或任何其他私有信息。</li></ul></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="3fde" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">技能代码</h1><p id="6e32" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">现在我们准备在NodeJS中发展我们的技能。</p><p id="3a24" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">打开<code class="fe nv nw nx ny b">lambda/index.js</code>。<code class="fe nv nw nx ny b">index.js</code> <strong class="lo iu"> </strong>将首先列出您通过ASK CLI创建的意图处理程序。</p><h2 id="38d3" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated"><strong class="ak">意图处理程序</strong></h2><p id="485c" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">“意图”表示满足用户口头请求的动作。这将触发lambda处理程序<code class="fe nv nw nx ny b">index.js</code>中定义的意图处理程序。意图处理程序接收传入的请求并返回适当的响应。</p><ul class=""><li id="d077" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">内置意图是为常见动作预定义的，您可以在自定义技能中实现这些动作，而无需提供任何示例话语。标准意图用于常见的一般行为，如停止、取消和寻求帮助。以下是可用的标准内置意图列表:</li></ul><div class="pe pf gp gr pg ph"><a href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/standard-built-in-intents.html" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">tech doc-模板</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">概述将Alexa直接集成到您的产品中。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">developer.amazon.com</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv ks ph"/></div></div></a></div><p id="aa4d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">让我们编辑标准意图处理程序:</p><ul class=""><li id="3334" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated"><code class="fe nv nw nx ny b">LaunchRequestHandler</code> : <strong class="lo iu"> </strong>这个方法会处理我们技能的启动。</li></ul><blockquote class="pw"><p id="5141" class="px py it bd pz qa qb qc qd qe qf mh dk translated">“Alexa，打开嘿管”</p></blockquote><p id="103d" class="pw-post-body-paragraph lm ln it lo b lp qg ju lr ls qh jx lu lv qi lx ly lz qj mb mc md qk mf mg mh im bi translated">编辑您的欢迎信息，并添加重复欢迎信息的重新提示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated"><strong class="ak">启动请求处理器</strong></p></figure><ul class=""><li id="204b" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated"><code class="fe nv nw nx ny b">CancelAndStopIntentHandler</code> : <strong class="lo iu"> </strong>此方法将暂停播放音频。它将“停止”、“取消”和“暂停”视为关键字</li></ul><blockquote class="pw"><p id="86c3" class="px py it bd pz qa qb qc qd qe qf mh dk translated">" Alexa，停止音乐"</p></blockquote><figure class="ql qm qn qo qp kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">取消lAndStopIntentHandler </p></figure><p id="5939" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">让我们创建一个定制的意图处理程序来处理<code class="fe nv nw nx ny b">GetVideo</code>调用。</p><p id="514d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><code class="fe nv nw nx ny b">GetVideoIntentHandler</code> <strong class="lo iu"> : </strong>这个方法将处理对YouTube视频的搜索，并返回音频流，以便Alexa可以播放它。</p><p id="8184" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我将使用一个控制器助手函数来使代码更整洁。</p><blockquote class="pw"><p id="67ea" class="px py it bd pz qa qq qr qs qt qu mh dk translated">" Alexa，玩白蛇"</p></blockquote><figure class="ql qm qn qo qp kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h2 id="cfa2" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated">助手功能</h2><p id="e35a" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">控制器辅助程序有三种方法:</p><ul class=""><li id="2723" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated"><code class="fe nv nw nx ny b">search</code>:调用YouTube API，根据用户收到的查询搜索视频。搜索返回视频信息，如视频ID和标题。</li><li id="a426" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated"><code class="fe nv nw nx ny b">play</code>:一旦接收到视频信息，就调用另一个YouTube API接收流，转换成Alexa要求的140质量。该方法将返回一个URL。然后调用<code class="fe nv nw nx ny b">addAudioPlayerPlayDirective</code> <strong class="lo iu"> </strong>开始播放音频流。</li><li id="07bf" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated"><code class="fe nv nw nx ny b">stop</code> : <strong class="lo iu"> </strong>调用<strong class="lo iu"> </strong> <code class="fe nv nw nx ny b">addAudioPlayerStopDirective</code>停止播放音频流。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><h2 id="fac5" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated"><strong class="ak">搜索视频</strong></h2><p id="6630" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">为了搜索YouTube视频，我正在使用npm包<code class="fe nv nw nx ny b"><a class="ae nf" href="https://www.npmjs.com/package/youtube-search" rel="noopener ugc nofollow" target="_blank">yt</a>-list</code>。</p><p id="b772" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">让我们安装它。在你的lambda文件夹中输入:<code class="fe nv nw nx ny b">$ npm i --save yt-list</code>。</p><p id="5904" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在文件顶部添加导入:</p><p id="fa1e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><code class="fe nv nw nx ny b">const ytlist = require("yt-list");</code></p><h2 id="d656" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated"><strong class="ak">播放音频</strong></h2><p id="dbc3" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">为了播放音频流，我使用了另一个npm包<code class="fe nv nw nx ny b"><a class="ae nf" href="https://www.npmjs.com/package/ytdl-core" rel="noopener ugc nofollow" target="_blank">ytdl-core</a></code>。让我们安装它。</p><p id="9cd4" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在你的lambda文件夹中输入<code class="fe nv nw nx ny b">$ npm i --save ytdl-core</code>。</p><p id="929e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在文件顶部添加导入:<code class="fe nv nw nx ny b">const search = require("ytdl-core");</code></p><p id="b319" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">两种方法如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">从YouTube搜索并获取音频</p></figure><h2 id="0c6e" class="of kv it bd kw ok ol dn la om on dp le lv oo op lg lz oq or li md os ot lk ou bi translated">技能建设者</h2><p id="34db" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">最后一部分是向<code class="fe nv nw nx ny b">SkillBuilder</code>添加请求处理程序。技能生成器是您技能的入口点，路由所有请求和响应:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">技能建设者</p></figure><p id="8b89" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">完整的源代码可以在我的GitHub中找到:</p><div class="pe pf gp gr pg ph"><a href="https://github.com/mlomboglia/alexa-skill-heytube" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">姆隆波利亚/阿莱克莎-斯奇尔-海图</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">Alexa播放YouTube视频音频的技巧。有助于mlomboglia/alexa-skill-heytube的发展，创造一个…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">github.com</p></div></div><div class="pq l"><div class="qv l ps pt pu pq pv ks ph"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="97bb" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">发挥你的技能</h1><p id="b8da" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">使用ASK CLI快速部署您的技能，而无需进入控制台。去你的技能文件夹根，输入:<code class="fe nv nw nx ny b">$ ask deploy</code>。</p><p id="ccaf" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">会自动提问:</p><ul class=""><li id="dcbb" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated"><strong class="lo iu">部署技能元数据</strong>:使用<a class="ae nf" href="https://developer.amazon.com/en-US/docs/alexa/smapi/skill-package-api-reference.html" rel="noopener ugc nofollow" target="_blank">技能包API </a>将技能的<code class="fe nv nw nx ny b">skill-package/</code>目录内容打包上传到Alexa Skills。如果这是您第一次部署技能，该命令会在已配置的Amazon开发人员帐户中创建一个新技能。</li><li id="ef62" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated"><strong class="lo iu">在<code class="fe nv nw nx ny b">lambda/</code>目录下构建一个技能代码</strong>，并打包构建工件以部署到AWS。这包括安装技能的依赖项和生产任何构建工件。对于为Node.js编写的技能，这意味着运行<code class="fe nv nw nx ny b">npm install</code>来安装在<code class="fe nv nw nx ny b">package.json</code>中声明的依赖项，并将其与JavaScript源代码打包在一起。</li><li id="c885" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated"><strong class="lo iu">将技能基础设施</strong>构建工件部署到已配置的AWS Lambda函数。如果这是第一次部署技能并且没有配置Lambda ARN，该命令将创建一个新的Lambda函数。</li><li id="54ee" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh nl nm nn no bi translated"><strong class="lo iu">启用技能</strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qw"><img src="../Images/7304ffac618d750b30e7b0df2e286001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_79E-_TAIipd5e-k.png"/></div></div></figure><p id="4bd7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">一段时间后，您的技能部署在AWS中，并准备在开发模式中使用(还没有公开)。</p><p id="3f99" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">验证您的部署:</p><ul class=""><li id="ec92" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh nl nm nn no bi translated">登录AWS控制台→ Lambda</li></ul><p id="f8eb" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在创建lambda函数时验证您的新技能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qx"><img src="../Images/f82ce2bf12512eebcbadc33afa830520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AdTBWi1041dH3CSc7NZRyw.png"/></div></div></figure><p id="800f" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">登录到Alexa开发者控制台，验证你的新技能已经创建。可以点击查看详情，但我不建议通过控制台编辑任何字段。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qy"><img src="../Images/bbb51dd3012e5c837ffb632682c2fd12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VCLiUgdgxf3Bw4QKWS1fEw.png"/></div></div></figure><p id="39fb" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">恭喜——你的第一个技能在Alexa和AWS Lambda中得到了恰当的部署。一切都是通过CLI完成的，不需要通过控制台。</p><p id="d5f4" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">您可以在Visual Studio代码中编辑您的代码，保存它并简单地键入<code class="fe nv nw nx ny b">$ ask deploy</code>来重新部署您的技能。这样在开发的时候会节省你很多时间。</p><p id="5e65" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">如果您使用my repo中的skill.json文件，您可能会收到以下错误:</p><blockquote class="oy oz pa"><p id="b56a" class="lm ln mn lo b lp mi ju lr ls mj jx lu pb mk lx ly pc ml mb mc pd mm mf mg mh im bi translated">" message ":" Lambda arn:AWS:Lambda:eu-west-1:924338216746:function:ask-hey tube-default-default-1595666765538的触发设置无效。"</p></blockquote><p id="f6b3" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">这是因为ask正在使用之前为我的实例创建的端点uri。在<strong class="lo iu"> skill.sjon </strong>文件中，删除整个部分，包括之前的逗号:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="7f09" class="of kv it ny b gy og oh l oi oj">,<br/>"endpoint": {<br/>"uri": "arn:aws:lambda:eu-west-1:924338216746:function:ask-heytube-default-default-1609336787911"<br/>}</span></pre><p id="1fa3" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">现在再试一次<code class="fe nv nw nx ny b">$ ask deploy</code></p><p id="976a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">应该在文件中更新新的端点uri</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="b886" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">上次配置</h1><p id="74ea" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">最后一个配置是将您的环境变量添加到Lambda。不幸的是，我找不到用ASK CLI添加环境变量的方法，所以我的方法是从AWS控制台到Lambda。</p><p id="0df7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">单击服务名并滚动到“环境变量”部分。添加您的变量<code class="fe nv nw nx ny b">YOUTUBE_API_KEY</code>、<strong class="lo iu">、</strong>，其值是您在上面的Google开发者控制台中创建的键。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qz"><img src="../Images/ede26e9b87bb9263522a10aa39f567ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyFHJkfxgpTLFoiSXv0gEA.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">添加您的YOUTUBE_API_KEY</p></figure><p id="3a58" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">此外，增加你的服务超时在“基本设置”到15秒。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ra"><img src="../Images/e0c3585276b09502ed7078232e0749d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWpkp9fDIBviD1kfIoxhEg.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">增加超时</p></figure><p id="7b2d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">现在让我们更新本地服务<code class="fe nv nw nx ny b">revisionId</code>。</p><p id="3f17" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">如果您现在尝试部署您的服务，因为您已经通过控制台更新了配置，您将得到以下错误:</p><blockquote class="oy oz pa"><p id="0161" class="lm ln mn lo b lp mi ju lr ls mj jx lu pb mk lx ly pc ml mb mc pd mm mf mg mh im bi translated">[错误]:当前版本Id(Lambda ARN(arn:AWS:Lambda:eu-west-1:924338216746:function:ask-hey tube-default-default-1595666765538)的版本ID应为a4d5f 786–96 C3–414 c-9 b94–4b 8 ecade 411 b，但找到了1 DCD 52 FB-8626–4f 63-a4cc-c5fc 59454 f 04请解决此版本不匹配问题，然后再次重新部署。</p></blockquote><p id="c1a4" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">解决这个问题最简单的方法是:</p><ol class=""><li id="6483" class="ng nh it lo b lp mi ls mj lv ni lz nj md nk mh ox nm nn no bi translated">打开您的<code class="fe nv nw nx ny b">.ask/ask-states.json</code>文件</li><li id="46aa" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">找到“revision id”:“XXXX”</li><li id="993f" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">删除“revisionId”中的值:“”</li><li id="878d" class="ng nh it lo b lp np ls nq lv nr lz ns md nt mh ox nm nn no bi translated">部署技能:<code class="fe nv nw nx ny b">$ ask deploy</code></li></ol></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="3ada" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">测试第一个技能</h1><p id="05a3" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">要从命令行测试您的技能，运行<code class="fe nv nw nx ny b">ask dialog</code>并指定您的技能所支持的语言环境:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="be1e" class="of kv it ny b gy og oh l oi oj">$ ask dialog --locale en-GB</span></pre><p id="eff1" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">该命令打开一个交互式终端，您可以在其中模拟与Alexa的多回合对话:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rb"><img src="../Images/88f31d357635926e54b2cdd3efeb82c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2HvLzt8bE3nIbRIN.png"/></div></div></figure><p id="9e1a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">打开你的技能，模拟一个对话:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="9aea" class="of kv it ny b gy og oh l oi oj"><strong class="ny iu">User  &gt; Alexa open hey tube</strong><br/>Alexa &gt; Welcome to Hey Tube. ask to play a video to start listening.<br/><strong class="ny iu">User  &gt; play Whitesnake<br/></strong>Alexa &gt; Playing  Whitesnake - Here I Go Again '87 (Official Music Video)<br/><strong class="ny iu">User  &gt; .quit</strong></span></pre><p id="0c87" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">第一项测试已经完成。如果你有一个Alexa设备，你可以在你的Alexa中测试这段对话——你应该会得到相同的结果，并听到白蛇乐队的一首很棒的歌。</p><p id="9775" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">你可以对你的技能做任何改变并重新部署。</p><p id="40ca" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">您可以通过使用预先格式化的。json文件来节省测试时间。</p><p id="dbb0" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">使用<code class="fe nv nw nx ny b"><strong class="lo iu">.record</strong></code>创建一个可重复的JSON测试文件:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="e5cc" class="of kv it ny b gy og oh l oi oj">User  &gt; .record</span></pre><p id="3763" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我创建了happyPath.json作为示例:</p><pre class="kj kk kl km gt ob ny oc od aw oe bi"><span id="2865" class="of kv it ny b gy og oh l oi oj">$ ask dialog --locale en-GB --replay happyPath.json</span></pre><p id="b97e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">你也可以通过Alexa开发者控制台进行测试:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rc"><img src="../Images/7180b72b370c0671c65874a56013a3bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FtisJH5CsZ0caPmA3BfExw.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">Alexa开发者控制台</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="56ea" class="ku kv it bd kw kx mv kz la lb mw ld le jz mx ka lg kc my kd li kf mz kg lk ll bi translated">结束语</h1><p id="e17e" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">这项技能的完整源代码可以在我的GitHub上找到:</p><div class="pe pf gp gr pg ph"><a href="https://github.com/mlomboglia/alexa-skill-heytube" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">姆隆波利亚/阿莱克莎-斯奇尔-海图</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">Alexa播放YouTube视频音频的技巧。有助于mlomboglia/alexa-skill-heytube的发展，创造一个…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">github.com</p></div></div><div class="pq l"><div class="qv l ps pt pu pq pv ks ph"/></div></div></a></div><p id="71f2" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">要获得完整详细的环境设置指南，请查看我以前的文章<a class="ae nf" href="https://medium.com/swlh/quickly-build-an-alexa-skill-using-ask-cli-8ab2977bd126" rel="noopener"> <strong class="lo iu">使用ASK CLI </strong> </a> <strong class="lo iu"> </strong>快速构建Alexa技能——学习创建您的第一个自定义Hello World Alexa技能。</p><p id="325a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">查看多轨道技能版本，将单轨道技能增强为完整的音频播放器，以播放、停止、继续、跳过、循环和播放YouTube中的下一个相关音频轨道。</p><div class="pe pf gp gr pg ph"><a href="https://medium.com/better-programming/a-complete-alexa-skill-to-play-multi-track-audio-from-youtube-videos-9518d5219aa" rel="noopener follow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">一个完整的Alexa技能，从YouTube视频播放多轨音频</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">从YouTube到您的Alexa Echo播放、暂停、继续、下一个、上一个和循环播放音频</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">medium.com</p></div></div><div class="pq l"><div class="rd l ps pt pu pq pv ks ph"/></div></div></a></div><p id="39ff" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">请记住，有些视频可能无法播放，因为它们在YouTube上受到保护。</p><p id="4eaa" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">编码快乐！</p></div></div>    
</body>
</html>