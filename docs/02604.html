<html>
<head>
<title>Formatting Language-Sensitive Lists in JavaScript With ListFormat</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ListFormat在JavaScript中格式化区分语言的列表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/formatting-language-sensitive-lists-in-javascript-with-listformat-d47921cf0533?source=collection_archive---------8-----------------------#2019-12-11">https://betterprogramming.pub/formatting-language-sensitive-lists-in-javascript-with-listformat-d47921cf0533?source=collection_archive---------8-----------------------#2019-12-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6da1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">轻松设置区域设置、类型和样式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f361f1936719c3555c2cfaaafacacebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bLjzaYO7_0yvsDTC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b">Intl.ListFormat</code>构造函数，我们可以轻松格式化语言敏感列表。它让我们设置格式化列表的语言环境。此外，它还允许我们设置格式化列表的选项，如列表的类型或样式。为了使用它，我们可以用<code class="fe lv lw lx ly b">Intl.ListFormat</code>构造函数创建一个新的<code class="fe lv lw lx ly b">ListFormat</code>对象。</p><p id="37af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构造函数最多接受两个参数。第一个参数是要设置列表格式的区域设置字符串。第二个参数接受一个带有格式化和样式化列表选项的对象。<code class="fe lv lw lx ly b">Intl.ListFormat</code>构造函数的一个例子是:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="00ef" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'train'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'long',<br/>  type: 'conjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="73a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们运行上面的代码，我们会看到从<code class="fe lv lw lx ly b">console.log</code>语句中记录的<em class="mj">公共汽车</em>、<em class="mj">汽车</em>、<em class="mj">和</em> <em class="mj">火车</em>。<code class="fe lv lw lx ly b">Intl.ListFormat</code>构造函数创建一个formatter对象，该对象具有<code class="fe lv lw lx ly b">format</code>方法，根据我们设置的区域设置和格式选项将数组转换成列表。</p><p id="b41c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们将英语的区域设置为<code class="fe lv lw lx ly b">en</code>，将<code class="fe lv lw lx ly b">style</code>属性设置为<code class="fe lv lw lx ly b">long</code>，这将字符串数组格式化为类似于<em class="mj"> A </em>、<em class="mj"> B </em>、<em class="mj">和C </em>或<em class="mj"> A、B或C </em>的格式。属性指定了我们想要格式化的列表类型。合取意味着我们将一个列表格式化为<em class="mj"> A、B和C </em>。</p><p id="bdb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构造函数的参数是要将列表格式化成的区域设置。它可以是一个字符串或字符串数组，包含要格式化的列表的区域设置。区域设置字符串应该是BCP 47语言标记。<code class="fe lv lw lx ly b">locales</code>参数是可选的。BCP-47语言标签的简略列表包括:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="ae47" class="md me it ly b gy mf mg l mh mi">ar — Arabic</span><span id="e7e0" class="md me it ly b gy mk mg l mh mi">bg — Bulgarian</span><span id="3180" class="md me it ly b gy mk mg l mh mi">ca — Catalan</span><span id="5bfe" class="md me it ly b gy mk mg l mh mi">zh-Hans — Chinese, Han (Simplified variant)</span><span id="9d05" class="md me it ly b gy mk mg l mh mi">cs — Czech</span><span id="031f" class="md me it ly b gy mk mg l mh mi">da — Danish</span><span id="779d" class="md me it ly b gy mk mg l mh mi">de — German</span><span id="9504" class="md me it ly b gy mk mg l mh mi">el — Modern Greek (1453 and later)</span><span id="8aad" class="md me it ly b gy mk mg l mh mi">en — English</span><span id="5f23" class="md me it ly b gy mk mg l mh mi">es — Spanish</span><span id="ee72" class="md me it ly b gy mk mg l mh mi">fi — Finnish</span><span id="6afc" class="md me it ly b gy mk mg l mh mi">fr — French</span><span id="4640" class="md me it ly b gy mk mg l mh mi">he — Hebrew</span><span id="dc52" class="md me it ly b gy mk mg l mh mi">hu — Hungarian</span><span id="87f4" class="md me it ly b gy mk mg l mh mi">is — Icelandic</span><span id="a8cb" class="md me it ly b gy mk mg l mh mi">it — Italian</span><span id="df61" class="md me it ly b gy mk mg l mh mi">ja — Japanese</span><span id="b633" class="md me it ly b gy mk mg l mh mi">ko — Korean</span><span id="4eb3" class="md me it ly b gy mk mg l mh mi">nl — Dutch</span><span id="c52f" class="md me it ly b gy mk mg l mh mi">no — Norwegian</span><span id="59af" class="md me it ly b gy mk mg l mh mi">pl — Polish</span><span id="1a28" class="md me it ly b gy mk mg l mh mi">pt — Portuguese</span><span id="134a" class="md me it ly b gy mk mg l mh mi">rm — Romansh</span><span id="650d" class="md me it ly b gy mk mg l mh mi">ro — Romanian</span><span id="8299" class="md me it ly b gy mk mg l mh mi">ru — Russian</span><span id="3349" class="md me it ly b gy mk mg l mh mi">hr — Croatian</span><span id="cf46" class="md me it ly b gy mk mg l mh mi">sk — Slovak</span><span id="1d70" class="md me it ly b gy mk mg l mh mi">sq — Albanian</span><span id="fd91" class="md me it ly b gy mk mg l mh mi">sv — Swedish</span><span id="1cbe" class="md me it ly b gy mk mg l mh mi">th — Thai</span><span id="3bc0" class="md me it ly b gy mk mg l mh mi">tr — Turkish</span><span id="131e" class="md me it ly b gy mk mg l mh mi">ur — Urdu</span><span id="4553" class="md me it ly b gy mk mg l mh mi">id — Indonesian</span></pre><p id="d3e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构造函数的第二个参数是一个对象，它允许我们设置如何格式化列表字符串的选项。这个对象有三个属性:<code class="fe lv lw lx ly b">localeMatcher</code>、<code class="fe lv lw lx ly b">type</code>和<code class="fe lv lw lx ly b">style</code>。<code class="fe lv lw lx ly b">localeMatcher</code>选项指定要使用的区域匹配算法。可能的值是<code class="fe lv lw lx ly b">lookup</code>和<code class="fe lv lw lx ly b">best fit</code>。</p><p id="2f82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">lookup</code>算法搜索语言环境，直到找到符合正在比较的字符串字符集的语言环境。</p><p id="7360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">best fit</code>查找至少与<code class="fe lv lw lx ly b">lookup</code>算法一样适合，但可能更适合的语言环境。</p><p id="7be8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">属性可以有两个可能的值:<code class="fe lv lw lx ly b">conjunction</code>、<code class="fe lv lw lx ly b">disjunction</code>或<code class="fe lv lw lx ly b">unit</code>。<code class="fe lv lw lx ly b">conjunction</code>表示列表由一个<em class="mj">和</em>连接，如<em class="mj"> A、B和C </em>。这是默认选项。<code class="fe lv lw lx ly b">disnjunction</code>表示列表由<em class="mj">或</em>连接，如<em class="mj"> A、B或C </em>。</p><p id="f9bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">unit</code>代表带有单位的数值列表。</p><p id="8363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">style</code>属性指定格式化消息的长度。该属性有两个可能的值。既可以是<code class="fe lv lw lx ly b">long</code>(如<em class="mj"> A、B、C </em>)，<code class="fe lv lw lx ly b">short</code>(如<em class="mj"> A、B、C </em>)，也可以是<code class="fe lv lw lx ly b">narrow</code>(如<em class="mj"> A B C </em>)。当<code class="fe lv lw lx ly b">style</code>为<code class="fe lv lw lx ly b">short</code>或<code class="fe lv lw lx ly b">narrow</code>时，<code class="fe lv lw lx ly b">unit</code>是该选项唯一允许的值。</p><p id="e925" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以用它将一个列表格式化成一个字符串，这个字符串在末尾用一个<em class="mj">和</em>连接起来。为此，我们可以编写以下代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d147" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'bicycle'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'long',<br/>  type: 'conjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="2c74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们像上面那样记录<code class="fe lv lw lx ly b">formattedList</code>常量，我们得到<em class="mj">公共汽车、汽车和自行车</em>。我们设置<code class="fe lv lw lx ly b">en</code>语言环境来格式化英语语言环境的字符串，样式为<code class="fe lv lw lx ly b">long</code>并作为一个连接词，这意味着列表将在末尾用一个<em class="mj">和</em>连接。如果我们想获得一个基于<em class="mj">或</em>的列表，我们可以将<code class="fe lv lw lx ly b">type</code>属性改为<code class="fe lv lw lx ly b">disjunction</code>，如下面的代码所示:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="cbb8" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'bicycle'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'long',<br/>  type: 'disjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="127d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们运行上面的代码，那么我们会在上面的<code class="fe lv lw lx ly b">console.log</code>语句中记录<em class="mj">公共汽车、汽车或自行车</em>。</p><p id="f5fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过使用<code class="fe lv lw lx ly b">style</code>属性的<code class="fe lv lw lx ly b">short</code>或<code class="fe lv lw lx ly b">narrow</code>选项将其转换成一个更短的列表。例如，我们可以写:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e6ee" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'bicycle'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'short',<br/>  type: 'conjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="8af0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们运行上面的代码时，在<code class="fe lv lw lx ly b">console.log</code>输出中得到<em class="mj">公共汽车、汽车、&amp;自行车</em>。<code class="fe lv lw lx ly b">short</code>和<code class="fe lv lw lx ly b">disjunction</code>组合与<code class="fe lv lw lx ly b">long</code>和<code class="fe lv lw lx ly b">disjunction</code>组合相同。如果我们写:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="6bca" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'bicycle'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'short',<br/>  type: 'disjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="c74e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们乘公共汽车、小汽车或自行车。<code class="fe lv lw lx ly b">narrow</code>选项会使它更短。例如，如果我们把:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="5fc4" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'bicycle'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'narrow',<br/>  type: 'conjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="53e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，当我们运行上面的代码时，我们在<code class="fe lv lw lx ly b">console.log</code>中记录了<em class="mj">公共汽车、汽车、自行车</em>。</p><p id="e27d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这也适用于非英语语言环境。例如，如果我们想将一个中文字符串列表格式化成一个列表，我们可以编写下面的代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="73c0" class="md me it ly b gy mf mg l mh mi">const arr = ['日', '月', '星'];<br/>const formatter = new Intl.ListFormat('zh-hant', {<br/>  style: 'narrow',<br/>  type: 'conjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="f6d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">Then we get ‘日、月和星’, which means <em class="mj">sun, moon, and stars</em>. If we switch the <code class="fe lv lw lx ly b">style</code> option to <code class="fe lv lw lx ly b">long</code> or <code class="fe lv lw lx ly b">short</code>, we would get the same thing because in Chinese there’s only one way to write a conjunction, unlike in English. <code class="fe lv lw lx ly b">disjunction</code> also works with Chinese. For instance, if we have:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2861" class="md me it ly b gy mf mg l mh mi">const arr = ['日', '月', '星'];<br/>const formatter = new Intl.ListFormat('zh-hant', {<br/>  style: 'long',<br/>  type: 'disjunction'<br/>});<br/>const formattedList = formatter.format(arr);<br/>console.log(formattedList);</span></pre><p id="d95c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">Then we get ‘日、月或星’ which means <em class="mj">sun, moon, or stars</em>. If we switch the <code class="fe lv lw lx ly b">style</code> option to <code class="fe lv lw lx ly b">long</code> or <code class="fe lv lw lx ly b">short</code>, as with Chinese conjunctions, we would get the same thing because in Chinese there’s only one way to write a disjunction, unlike in English.</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="90b4" class="ms me it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">formatToParts()方法</h1><p id="beea" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">除了<code class="fe lv lw lx ly b">format</code>方法之外，<code class="fe lv lw lx ly b">Intl.ListFormat</code>实例还有<code class="fe lv lw lx ly b">formatToParts</code>方法，它将一个数组格式化为一个合取或析取字符串，然后将其作为格式化字符串的一个数组返回。</p><p id="238d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们想为一个列表返回一个格式化的英文字符串部分的数组，那么我们可以编写下面的代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8037" class="md me it ly b gy mf mg l mh mi">const arr = ['bus', 'car', 'bicycle'];<br/>const formatter = new Intl.ListFormat('en', {<br/>  style: 'long',<br/>  type: 'conjunction'<br/>});<br/>const formattedList = formatter.formatToParts(arr);<br/>console.log(formattedList);</span></pre><p id="9b30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="cbf2" class="md me it ly b gy mf mg l mh mi">[<br/>  {<br/>    "type": "element",<br/>    "value": "bus"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": ", "<br/>  },<br/>  {<br/>    "type": "element",<br/>    "value": "car"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": ", and "<br/>  },<br/>  {<br/>    "type": "element",<br/>    "value": "bicycle"<br/>  }<br/>]</span></pre><p id="ee18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<code class="fe lv lw lx ly b">console.log</code>语句。这些是我们用<code class="fe lv lw lx ly b">format</code>方法得到的格式化字符串的一部分，但是被分解成单独的条目。如果我们只需要格式化字符串的某些部分，这个方法很方便。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="9b7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b">Intl.ListFormat</code>构造函数，格式化语言敏感列表很容易。构造函数将一个区域设置字符串或区域设置字符串数组作为第一个参数，将一个带有某些选项的对象作为第二个参数。我们可以用<code class="fe lv lw lx ly b">Intl.ListFormat</code>实例的<code class="fe lv lw lx ly b">format</code>方法将一个数组转换成一个字符串，该字符串将列表格式化为合取或析取，该方法接受一个地区字符串和格式化字符串的长度样式的选项，以及它是合取、析取还是单位字符串。它还有一个<code class="fe lv lw lx ly b">formatToParts</code>方法将它转换成一个格式化的列表，然后将各个部分分解成一个数组。</p></div></div>    
</body>
</html>