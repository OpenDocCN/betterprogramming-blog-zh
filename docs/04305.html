<html>
<head>
<title>A Tutorial in Bash (Unix Shell) Scripting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Bash (Unix Shell)脚本教程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/tutorial-in-bash-unix-shell-scripting-5f368a15b37f?source=collection_archive---------3-----------------------#2020-04-04">https://betterprogramming.pub/tutorial-in-bash-unix-shell-scripting-5f368a15b37f?source=collection_archive---------3-----------------------#2020-04-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1d82" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">面向数据科学家和工程师的Bash脚本完整教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a47f849d21eb9ae124823fdb5e80fca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9SZWzgsnDPZr8KpJ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://predictivehacks.com/" rel="noopener ugc nofollow" target="_blank">预测黑客</a></p></figure><div class="kz la gp gr lb lc"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="231d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Bash 是一种简洁、快速、健壮的数据和文件操作脚本语言。这是在云中构建分析管道的一项重要技能，Linux用户喜欢使用存储在多个文件中的数据。在本文中，我们提供了一些实例，说明如何创建自己的Bash函数来自动化数据科学家的工作。</p><p id="b3bf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本教程完全基于<a class="ae ky" href="https://learn.datacamp.com/courses/introduction-to-bash-scripting" rel="noopener ugc nofollow" target="_blank"> DataCamp </a>课程，我发现它对每个数据科学家都非常有用和重要。</p><p id="5c17" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于本教程，查看一些基本的<a class="ae ky" href="https://predictivehacks.com/unix-commands-cheatsheet/" rel="noopener ugc nofollow" target="_blank"> Unix命令</a>和一些<a class="ae ky" href="https://predictivehacks.com/basic-unix-commands-for-data-analysts/" rel="noopener ugc nofollow" target="_blank">基本Unix示例</a>以及一个<a class="ae ky" href="https://predictivehacks.com/how-to-schedule-a-cron-job-in-linux/" rel="noopener ugc nofollow" target="_blank"> cron作业示例</a>可能会有所帮助。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="98ec" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">“Hello World”Bash脚本示例</h1><p id="8d48" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">通常，bash脚本以一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Shebang_(Unix)" rel="noopener ugc nofollow" target="_blank"> shebang </a> <code class="fe nr ns nt nu b">#!/usr/bash</code>开始，指示使用Bash shell执行文件。假设我们想要运行一个Bash脚本，打印“Hello World”和“Good Night World”。</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="b3a5" class="nz mv it nu b gy oa ob l oc od">#!/usr/bash <br/>echo "Hello World" <br/>echo "Good Night World"</span></pre><p id="2ba9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">脚本文件可以保存为<code class="fe nr ns nt nu b">myscript.sh</code>，其中文件扩展名<code class="fe nr ns nt nu b">.sh</code>表示这是一个Bash脚本。从技术上讲，如果第一行有Bash的shebang和path，就不需要这样做。它可以在终端中使用<code class="fe nr ns nt nu b">bash myscript.sh</code>运行，或者，如果您提到了第一行<code class="fe nr ns nt nu b">!/usr/bash</code>，您可以简单地输入<code class="fe nr ns nt nu b">./scipt_name.sh</code>。回到我们的例子，在终端中，我们键入:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="ff48" class="nz mv it nu b gy oa ob l oc od">bash myscript.sh</span></pre><p id="810d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到了:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="a494" class="nz mv it nu b gy oa ob l oc od">Hello World <br/>Good Night World</span></pre><p id="3358" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们再举一个例子，这个例子使用了管道命令。假设我们有一个名为<code class="fe nr ns nt nu b">employees.csv</code>的文件，其中包含雇员及其部门的用户ID，如下所示(前五行):</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="3481" class="nz mv it nu b gy oa ob l oc od">UserID,Department<br/>1234,Data_Science<br/>1235,Project_Management <br/>1236,Data_Sicence<br/>1237,Human_Resources</span></pre><p id="632f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们想创建一个Bash脚本，它按部门返回雇员人数。让我们称我们的脚本为<code class="fe nr ns nt nu b">group.sh</code>。具体如下:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="0cd6" class="nz mv it nu b gy oa ob l oc od">#!/usr/bash<br/>cat employees.csv | cut -d "," -f 2| tail -n +2 | sort | uniq -c | sort -nr</span><span id="f5dd" class="nz mv it nu b gy oe ob l oc od">bash group.sh</span></pre><p id="962f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="4d3f" class="nz mv it nu b gy oa ob l oc od">10 Data_Science<br/>5 Project_Management<br/>3 Human_Resources</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="29ce" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">标准输入-标准输出-标准错误</h1><p id="acb3" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">在Bash脚本中，有三个<em class="of">流</em>:</p><ul class=""><li id="3017" class="og oh it lt b lu lv lx ly ma oi me oj mi ok mm ol om on oo bi translated">STDIN(标准输入)—进入程序的数据流</li><li id="a7f6" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">STOUT(标准输出)—程序输出的数据流。它的退出代码值为0表示成功，为1表示失败。</li><li id="7fb5" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">STDERR(标准错误)—程序中的错误。它的值为2。</li></ul><h2 id="0755" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">如何在脚本中使用退出代码</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="61bd" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">争论</h1><p id="967f" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">Bash脚本接受在执行脚本调用时指定的参数。<code class="fe nr ns nt nu b">ARGV</code>是描述脚本中所有参数的术语。每个参数都可以通过<code class="fe nr ns nt nu b">$</code>符号来访问——第一个是<code class="fe nr ns nt nu b">$1</code>，第二个是<code class="fe nr ns nt nu b">$2</code>，依此类推。最后，<code class="fe nr ns nt nu b"><a class="ae ky" href="https://predictivehacks.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a></code>和<code class="fe nr ns nt nu b">$*</code>给出了<code class="fe nr ns nt nu b">ARGV</code>中的所有参数，而<code class="fe nr ns nt nu b">$#</code>给出了参数的长度(即数量)。</p><p id="4d5c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">举例。让我们考虑一下<code class="fe nr ns nt nu b">ex.sh</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="d0db" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们跑吧:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="b351" class="nz mv it nu b gy oa ob l oc od">bash args.sh one two three four five</span></pre><p id="832b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="1ab0" class="nz mv it nu b gy oa ob l oc od">one<br/>two<br/>one two three four five<br/>There are 5 arguments</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="0d62" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Bash中的基本变量</h1><p id="8be8" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">与其他语言类似，您可以用等号符号给变量赋值，如下所示:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="c5e9" class="nz mv it nu b gy oa ob l oc od"># do not use space between equal sign<br/>firstanme='George'<br/>lastname='Pipis'<br/># you can reference them with the $<br/>echo "Hello" $firstname $lastname</span></pre><p id="125d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在Bash中，在创建变量和打印时，使用不同的引号可能意味着不同的事情。</p><ul class=""><li id="3c58" class="og oh it lt b lu lv lx ly ma oi me oj mi ok mm ol om on oo bi translated">单引号:Shell解释字面意思</li><li id="f043" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">双引号:Shell按字面解释，除了使用<code class="fe nr ns nt nu b">$</code>和反斜线<code class="fe nr ns nt nu b">“</code>。换句话说，双引号将美元符号后面的内容理解为变量。</li><li id="ddb6" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">反斜线:在壳中创建壳。因此，shell运行命令并将STDOUT捕获回一个变量。命令<code class="fe nr ns nt nu b">date</code>就是一个很好的例子。例如，您可以键入:</li></ul><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="1a05" class="nz mv it nu b gy oa ob l oc od">datenow='the date now is `date`'</span><span id="792b" class="nz mv it nu b gy oe ob l oc od">echo datenow</span></pre><p id="1fa8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="134d" class="nz mv it nu b gy oa ob l oc od">The date is Sat Apr 4 20:16:43 DST 2020</span></pre><p id="4421" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">另一种方法是在shell中调用shell，在我们的例子中，<code class="fe nr ns nt nu b">date</code>是通过键入:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="ad1d" class="nz mv it nu b gy oa ob l oc od">datenow="the date now is $(date)"</span><span id="7047" class="nz mv it nu b gy oe ob l oc od">echo datenow</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="bbd3" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Bash中的数字变量</h1><p id="144a" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">我们可以用以下方法将两个整数相加:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="adb1" class="nz mv it nu b gy oa ob l oc od">expr 4 + 6<br/>echo $((4+6))<br/># only the bc method allows operations with decimal numbers<br/>echo "4+6" | bc</span></pre><p id="b154" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">示例:构建一个Bash脚本，该脚本将华氏温度作为参数，并使用以下公式将其转换为摄氏温度:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/cecf24e9638d8dd6e27380a8d6116d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*1VBdHDJbz1m6gWmiSRsWng.png"/></div></figure><p id="0110" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们调用我们的脚本<code class="fe nr ns nt nu b">script.sh</code>并获得100华氏度的摄氏度数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="7a21" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">调用脚本:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="f32c" class="nz mv it nu b gy oa ob l oc od">bash script.sh 100</span></pre><p id="c1ad" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们得到的输出是:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="2b8d" class="nz mv it nu b gy oa ob l oc od">37.77</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8e43" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Bash中的数组</h1><p id="7235" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">Bash中有两种类型的数组:</p><p id="15b8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">数组</strong></p><ul class=""><li id="ba77" class="og oh it lt b lu lv lx ly ma oi me oj mi ok mm ol om on oo bi translated">正常数字索引结构</li><li id="e746" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">在Python中称为<em class="of">列表</em>或者在R中称为<em class="of">向量</em></li></ul><p id="4e9b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">关联数组</strong></p><ul class=""><li id="f947" class="og oh it lt b lu lv lx ly ma oi me oj mi ok mm ol om on oo bi translated">类似于普通数组，但有键值对，而不是数字索引</li><li id="b834" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">类似于Python的<em class="of">字典</em>或者R的<em class="of">列表</em></li><li id="f588" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">注意:从Bash 4开始，这是可用的</li></ul><p id="7b90" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">有两种方法可以创建数组:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="5675" class="nz mv it nu b gy oa ob l oc od"># declare without adding elements<br/>declare -a my_array</span><span id="bc72" class="nz mv it nu b gy oe ob l oc od"># create and add elements at the same time<br/>my_array=(1 2 3)</span></pre><p id="0e64" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">记住，等号两边不能有空格，元素之间不能有逗号！</p><p id="7f2d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">可以使用<code class="fe nr ns nt nu b">array[@]</code>返回所有数组元素。请注意，当您想要访问这些属性时，Bash需要在数组名两边加上花括号。您可以使用方括号访问数组元素。注意，Bash对数组使用零索引。您可以使用<code class="fe nr ns nt nu b">array+=(elements)</code>添加数组。示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="7271" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="7b63" class="nz mv it nu b gy oa ob l oc od">1 2 3 10<br/>4<br/>10<br/>5<br/>2 3 10<br/>5 2 3 10 20</span></pre><p id="2c67" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">关联阵列的示例:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="839c" class="nz mv it nu b gy oa ob l oc od"># Create empty associative array<br/>declare -A city_details<br/>city_details=([city_name]="New York" [population]=10000000)</span><span id="1f5a" class="nz mv it nu b gy oe ob l oc od">echo ${city_details[city_name]} #index using key to return a value</span><span id="56c5" class="nz mv it nu b gy oe ob l oc od"># return all the keys<br/>echo ${!city_details[@]}</span></pre><p id="5ad1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="be65" class="nz mv it nu b gy oa ob l oc od">New York city_name population</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f7e1" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">如果语句</h1><p id="91c3" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">Bash中的基本IF语句具有以下结构:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="e6be" class="nz mv it nu b gy oa ob l oc od">if [ condition ]; then<br/>    # some code<br/>else<br/>    # some code the else statment is optional<br/>fi</span></pre><p id="7019" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">注意，方括号和条件元素之间有空格，在右括号<code class="fe nr ns nt nu b">];</code>后面有一个分号。</p><ul class=""><li id="5490" class="og oh it lt b lu lv lx ly ma oi me oj mi ok mm ol om on oo bi translated"><code class="fe nr ns nt nu b">=</code>相等</li><li id="7c7d" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">!=</code>不平等</li><li id="bfa9" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">&gt;</code>更大</li><li id="5d1f" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">&lt;</code>比较少</li><li id="ddea" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-eq</code>相等</li><li id="e9a7" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-ne</code>不等于</li><li id="85ee" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-lt</code>小于</li><li id="dc51" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-le</code>小于或等于</li><li id="dd38" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-gt</code>大于</li><li id="7a2a" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-ge</code>大于或等于</li><li id="2ffb" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-e</code>如果文件存在</li><li id="96c6" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-s</code>如果文件存在且大小大于零</li><li id="5655" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-r</code>如果文件存在且可读</li><li id="e1f9" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">-w</code>如果文件存在且可写</li><li id="512e" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">$$</code>对于和</li><li id="c54e" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated"><code class="fe nr ns nt nu b">||</code>为或</li></ul><p id="cc1b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">更多的条件标志，可以看看<a class="ae ky" href="https://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html" rel="noopener ugc nofollow" target="_blank"> gnu Bash手册。</a></p><h2 id="1978" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">锻炼</h2><p id="129b" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">假设有一个名为<code class="fe nr ns nt nu b">employees/</code>的文件夹，其中包含表单中每个员工的文本文件:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="18a8" class="nz mv it nu b gy oa ob l oc od">Name: George Pipis<br/>Hiring Date: 2010<br/>Salary: 30000<br/>Department: Data Science</span></pre><p id="36c5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您希望编写一个脚本，将雇员的相应文本作为输入，并根据雇用日期将其移动到一个新文件夹中。如果聘用日期大于或等于2018年，那么它将进入<code class="fe nr ns nt nu b">new_employee/</code>文件夹；否则，到<code class="fe nr ns nt nu b">old_employee/</code>文件夹。</p><p id="f5f9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">运行<code class="fe nr ns nt nu b">George_Pipis.txt</code>的脚本</p><h2 id="e894" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">解决办法</h2><p id="964f" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated"><code class="fe nr ns nt nu b">script.sh</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="c205" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们运行它:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="b5a2" class="nz mv it nu b gy oa ob l oc od">bash script.sh employees/George_Pipis.txt</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="acf4" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Bash中的FOR循环</h1><p id="5d4e" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">Bash的基本结构是:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="3c85" class="nz mv it nu b gy oa ob l oc od">for x in 1 2 3<br/>do<br/>    echo $x<br/>done</span></pre><p id="19f1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="3203" class="nz mv it nu b gy oa ob l oc od">1<br/>3<br/>5</span></pre><p id="6024" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">也可以用<code class="fe nr ns nt nu b">brace expansion</code>，也就是<code class="fe nr ns nt nu b">{START..STOP..INCREMENT}</code>。</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="2a9c" class="nz mv it nu b gy oa ob l oc od">for x in {1..5..2}<br/>do<br/>    echo $x<br/>done</span></pre><p id="f059" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">还有<code class="fe nr ns nt nu b">three expression syntax</code>:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="7ff7" class="nz mv it nu b gy oa ob l oc od">for ((x=2;x&lt;=4;x+=2))<br/>do<br/>    echo $x<br/>done</span></pre><p id="8a96" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="efc9" class="nz mv it nu b gy oa ob l oc od">2<br/>4</span></pre><h2 id="dfa1" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">全球扩张</h2><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="b294" class="nz mv it nu b gy oa ob l oc od">for employee in employees/*<br/>do<br/>    echo $employee<br/>done</span></pre><h2 id="874e" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">壳中壳到FOR循环</h2><p id="38fa" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">我们可以循环调用shell-in-a-shell的结果:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="803a" class="nz mv it nu b gy oa ob l oc od">for employee in $(ls empoyees/ | grep -i 'georg')<br/>do<br/>    echo $employee<br/>done</span></pre><p id="74d8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="ecf7" class="nz mv it nu b gy oa ob l oc od">George_Pipis_txt<br/>George_Papadopoulos.txt<br/>John_Georgiades.txt</span></pre><h2 id="655c" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">锻炼</h2><p id="a14a" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">你想写一个脚本，打印出文件夹<code class="fe nr ns nt nu b">my_code/</code>中所有以<code class="fe nr ns nt nu b">.py</code>结尾的文件。</p><h2 id="d34a" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">解决办法</h2><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="088b" class="nz mv it nu b gy oa ob l oc od">for file in my_code/*.py<br/>do<br/>    echo $file<br/>done</span></pre><h2 id="84dc" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">锻炼</h2><p id="4449" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">在一个名为<code class="fe nr ns nt nu b">my_python_tests/</code>的文件夹中有许多Python脚本，其中一些是关于文本挖掘任务的。你可以假设所有包含代码<code class="fe nr ns nt nu b">import re</code>的Python脚本都可以归类为<code class="fe nr ns nt nu b">text mining</code>任务。您的任务是编写一个Bash脚本，将所有文本挖掘脚本移动到一个名为<code class="fe nr ns nt nu b">text_mining/</code>的文件夹中。</p><h2 id="7946" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">解决办法</h2><p id="4ac3" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated"><code class="fe nr ns nt nu b">script.sh</code>可以如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="e22d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">WHILE语句语法</h1><p id="cc02" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">迭代继续，直到这个条件不再成立。</p><ul class=""><li id="db2f" class="og oh it lt b lu lv lx ly ma oi me oj mi ok mm ol om on oo bi translated">用<code class="fe nr ns nt nu b">while</code>这个词代替<code class="fe nr ns nt nu b">for</code>。</li><li id="8767" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">用方括号将条件括起来。</li><li id="8abf" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">对IF语句中的数字比较使用相同的标志。</li><li id="418b" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">多个条件可以链接，或者使用双括号，就像<code class="fe nr ns nt nu b">IF</code>语句一样，加上<code class="fe nr ns nt nu b">$$</code>、<code class="fe nr ns nt nu b">||</code>。</li><li id="1f05" class="og oh it lt b lu op lx oq ma or me os mi ot mm ol om on oo bi translated">确保您的循环终止！</li></ul><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="e5cb" class="nz mv it nu b gy oa ob l oc od">x=1<br/>while [ $x -le 3 ];<br/>do<br/>    echo $x<br/>    ((x+=1))<br/>done</span></pre><p id="f1bc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="2c74" class="nz mv it nu b gy oa ob l oc od">1<br/>2<br/>3</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="9059" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">构建案例陈述</h1><p id="9b98" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">CASE语句的结构是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="ae46" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们编写一个Bash脚本<code class="fe nr ns nt nu b">script.sh</code>,它将一个字符串作为输入，并返回是工作日、周末还是非工作日。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="d2df" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="cd14" class="nz mv it nu b gy oa ob l oc od">It is a Weekday!</span></pre><h2 id="f0ac" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">锻炼</h2><p id="d502" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">文件夹<code class="fe nr ns nt nu b">my_r_scripts</code>包含R机器学习模型的R脚本。我们的任务是将基于树的模型移动到名为<code class="fe nr ns nt nu b">tree_models/</code>的文件中，并删除KNN和逻辑回归模型。</p><h2 id="33cd" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">解决办法</h2><p id="52fb" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">我们将使用CASE语句。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="2d0e" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Bash中的函数</h1><p id="a664" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">Bash函数的语法是:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="fbc7" class="nz mv it nu b gy oa ob l oc od">function name () {<br/>    # your code<br/>    return #return something<br/>    }</span></pre><p id="0ec0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">或者可选地</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="0594" class="nz mv it nu b gy oa ob l oc od">function function_nmae {<br/>    # your code<br/>    return #something<br/>    }</span></pre><p id="0308" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">示例:让我们编写一个函数，遍历文件夹中的Python文件并打印出它们的名称。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><h2 id="60a3" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">锻炼</h2><p id="510f" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">在Bash脚本中编写一个返回当天的Bash函数。</p><h2 id="179d" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">解决办法</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="b78f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="441a" class="nz mv it nu b gy oa ob l oc od">Sun</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="bf0f" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">将参数传递给Bash函数</h1><p id="3e8c" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">正如我们前面看到的，您可以使用<code class="fe nr ns nt nu b">$1</code>、<code class="fe nr ns nt nu b">$2</code>符号将参数传递给函数。此外，您还可以使用<code class="fe nr ns nt nu b"><a class="ae ky" href="https://predictivehacks.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a></code>、<code class="fe nr ns nt nu b">$*</code>和<code class="fe nr ns nt nu b">$#</code>。</p><h2 id="c321" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">例子</h2><p id="c88e" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">创建一个函数，将两个数字作为输入，并返回它们的比率。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><h2 id="abbf" class="nz mv it bd mw ou ov dn na ow ox dp ne ma oy oz ng me pa pb ni mi pc pd nk pe bi translated">例子</h2><p id="b8fc" class="pw-post-body-paragraph lr ls it lt b lu nm ju lw lx nn jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">编写一个对数组求和的函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pf pg l"/></div></figure><p id="ef91" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="7ad8" class="nz mv it nu b gy oa ob l oc od">The sum of the test array is 84.84</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="21d7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">感谢阅读！我希望这有所帮助。</p></div></div>    
</body>
</html>