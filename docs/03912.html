<html>
<head>
<title>How to Create Notification Badges With Google Bottom Navigation Bar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用谷歌底部导航栏创建通知徽章</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-notification-badges-with-google-bottom-navigation-bar-330925474f6d?source=collection_archive---------0-----------------------#2020-03-12">https://betterprogramming.pub/how-to-create-notification-badges-with-google-bottom-navigation-bar-330925474f6d?source=collection_archive---------0-----------------------#2020-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="681c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于徽章你需要知道的一切</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3428f911f55cd9500edcacc2c9a6403b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9EvRXeY1RXJlW-jriPdSnw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@snaps_by_clark?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克拉克·范德贝肯</a>在<a class="ae ky" href="https://unsplash.com/s/photos/patterns?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ee76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">底部导航栏使用户只需轻触鼠标即可轻松访问主视图并在主视图之间切换。当一个应用程序有三到五个顶级目的地时，推荐使用它们。</p><p id="1ac7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用许多底层的工具栏库在我们的应用程序中包含高级特性，而无需编码。但使用本机库是最有效的方式——第三方库可能会增加你的应用程序大小，可能不支持黑暗模式等高级功能，并且可以随时弃用该库。我建议你使用标准的谷歌军事导航视图。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6eae" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">综合</h1><p id="6916" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要使用Google material底部导航栏，我们首先需要在项目中包含martial库。为此，您需要在应用程序级的<code class="fe mz na nb nc b">build.gradle</code>文件中的<code class="fe mz na nb nc b">dependencies</code>节点下包含以下代码行。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="85f0" class="nh md it nc b gy ni nj l nk nl">implementation 'com.google.android.material:material:1.0.0'</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ea13" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何使用</h1><p id="fe76" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，您需要将底部导航视图包含到布局文件中，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="4005" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们将底部导航视图添加到布局中，并限制它显示在底部。然后，为了在导航视图中显示项目，我们需要创建一个菜单，所有项目都显示在底部栏中，并将该菜单分配给导航视图。首先，让我们创建一个包含三个项目的菜单，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="a060" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们使用menu属性将这个菜单包含在底部导航视图中。看一看:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/15a93c982b28c3a75545770fb9e92302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3d8L940UG8IMhAjNGHHk7w.jpeg"/></div></div></figure><p id="8281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我们需要做的。简单吧？看一下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/91f3791675224b92c3642655aa062567.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*-gBS_PktCBxYnZ3Gg-GWPw.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="774a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何展示徽章</h1><p id="3bee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经为底部栏中的项目实现了图标和文本。在你的产品将来的某个时候，在底部栏显示通知数似乎是合理的，这样用户可以很快发现他们有未读通知。</p><p id="9991" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这时徽章就派上用场了。在1.0.0版本中，材料底部栏默认不支持徽章，但我们可以使用一些策略来添加徽章。</p><p id="9c8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，让我们看看我们想要达到的目标:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/222036fdbfcfafbcc7ace3219e157f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*mwzgYy5RS4RIuS_dXa_gDw.png"/></div></figure><p id="0cce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显示计数为三的通知标记是我创建的自定义布局，并以编程方式添加到菜单项通知中。</p><p id="c230" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一步一步来。我们需要创建一个圆形drawable，在形状节点的帮助下显示在计数后面。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0ab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们需要创建我们的自定义布局，我们已经<code class="fe mz na nb nc b">textview</code>显示计数，并分配以上创建的drawable作为背景:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="bb4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经创建了自定义布局，是时候将视图添加到底部的<code class="fe mz na nb nc b">navigation-view</code>项了。</p><p id="91ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要创建一个视图并将<code class="fe mz na nb nc b">custom_badge_layout</code>膨胀到视图中，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="a3ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们已经创建了一个名为<code class="fe mz na nb nc b">notificationsBadge </code>的视图，并使用<code class="fe mz na nb nc b">LayoutInflater</code>将<code class="fe mz na nb nc b">cutom_badge_layout</code>膨胀到视图中。</p><p id="cfc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一剩下的就是把视图添加到底部<code class="fe mz na nb nc b">navigation-view</code>。这很简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="5503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道了如何添加徽章，是时候学习如何移除它们了。正如你在上面的代码中看到的，我们什么也没做，只是使用<code class="fe mz na nb nc b">addView</code>函数给<code class="fe mz na nb nc b">viewGroup </code>添加了一个视图。同样，我们使用<code class="fe mz na nb nc b">nav_view </code>上的<code class="fe mz na nb nc b">removeView </code>功能移除徽章:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="82af" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何用材料设计库1.1.0创建徽章？</h1><p id="eac7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">谷歌最近发布了下一个版本的材料设计库(1.1.0)。通过升级，我们可以直接创建徽章，无需任何自定义布局。看看如何在使用升级版库时将徽章添加到底部<code class="fe mz na nb nc b">navigation-view</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6ffd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要移除徽章，我们需要用需要移除徽章的<code class="fe mz na nb nc b">menuItemId</code>调用<code class="fe mz na nb nc b">removeBadge</code>函数。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="023a" class="nh md it nc b gy ni nj l nk nl">nav_view?.<strong class="nc iu">removeBadge</strong>(<strong class="nc iu">R.id.navigation_notifications</strong>)</span></pre><p id="58f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用升级后的库创建圆点和数字徽章。如果你没有提到计数，那么它将显示为一个点，否则，它将显示你分配的数字:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/0b3bbcc6f13731a8c8b226e0ce684b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*qH6lVpxqqhcj_YjGfhQynA.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf81" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">升级的库有问题</h1><p id="0e49" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">1.1.0库的素材设计很梦幻，但是我正在开发的app在我把素材库升级到1.1.0的时候因为各种原因多次崩溃。这不像是库有错误，但是我们需要在代码中做很多改变。</p><p id="95db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">崩溃的一个原因是我在我的根活动中使用了<code class="fe mz na nb nc b">non-material</code>主题，其中material bottom <code class="fe mz na nb nc b">navigation-view</code>是膨胀的。为了解决这个问题，我们需要将根活动的主题更新为material主题。</p><p id="04cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是一名应用程序开发人员，这可能很容易，但是如果您是一名库开发人员呢？应用程序开发人员不太可能正确地更改主题来使用您的库！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fea4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="8efe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我在这里解释的两个解决方案非常适合使用，但是要务实，使用任何适合你的情况。我建议升级你的材料设计库，使用本地代码。另一方面，如果你在一个假设的情况下，就像我上面提到的那样，使用旧版本并创建你自己的徽章，如上所示。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="fa0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。</p></div></div>    
</body>
</html>