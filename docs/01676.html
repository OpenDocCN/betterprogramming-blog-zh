<html>
<head>
<title>Implement a Cookie Consent Notification Within Five Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在五分钟内实施Cookie同意通知</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implement-a-cookie-consent-notification-within-5-minutes-82c845c55487?source=collection_archive---------0-----------------------#2019-10-04">https://betterprogramming.pub/implement-a-cookie-consent-notification-within-5-minutes-82c845c55487?source=collection_archive---------0-----------------------#2019-10-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="028a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">欧盟、GDPR和加州饼干法的免费解决方案</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/db05aa9d3ecc4c225c2599383dcbcac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NMSzB0xm8_GvVhQK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@twinsfisch?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> twinsfisch </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="9524" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是Cookie许可？</h1><p id="a0e7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Cookie许可是一个轻量级的JavaScript插件，提醒用户在你的网站上使用Cookie。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/52f8664f4d0e88c9d8434ab8b65b45f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLDqt785q8GS1L9Jt5jmhQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Cookie同意Github页面—<a class="ae ky" href="https://github.com/osano/cookieconsent" rel="noopener ugc nofollow" target="_blank">https://github.com/osano/cookieconsent</a></p></figure><p id="f067" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">它旨在帮助您快速遵守欧盟、GDPR和加州的饼干法。Cookie同意对每个人来说都是快速、免费且易于使用的。</p><p id="4b15" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">欧盟的《一般数据保护条例》(GDPR)于2018年生效，确立了管理个人信息收集的七项原则:</p><ol class=""><li id="e11c" class="mt mu it lt b lu mo lx mp ma mv me mw mi mx mm my mz na nb bi translated">合法、公平和透明</li><li id="9dd8" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">目的限制</li><li id="dd0a" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">数据最小化</li><li id="c669" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">存储限制</li><li id="9c79" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">完整性和保密性(安全性)</li><li id="4433" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">有责任</li></ol></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="7d2c" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">为什么选择Cookie同意？</h1><ul class=""><li id="6d05" class="mt mu it lt b lu lv lx ly ma nt me nu mi nv mm nw mz na nb bi translated">它是免费和开源的——你可以自由复制、修改甚至出售Cookie许可协议。<em class="nx">参见我们的</em> <a class="ae ky" href="https://cookieconsent.osano.com/documentation/license/" rel="noopener ugc nofollow" target="_blank"> <em class="nx">执照</em> </a> <em class="nx">。</em></li><li id="6b4e" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated">它是超级可配置的。只需点击几下鼠标，即可选择您自己的颜色、样式、合规类型、文本等。</li><li id="2825" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated">这是目前互联网上最受欢迎的同意项目。Cookie同意每个月在数百万个网站上被浏览超过20亿次。</li></ul><p id="79c4" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">标准的cookie同意通知通常是这样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/2042522415bc923f47874fe7f343f125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zA57nUuv_URws6RjAHTxgQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">标准cookie同意弹出菜单</p></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="e76c" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">装置</h1><p id="7fcf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">通过<a class="ae ky" href="https://www.npmjs.com/package/cookieconsent" rel="noopener ugc nofollow" target="_blank"> npm </a>安装cookie同意:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="215b" class="oe la it oa b gy of og l oh oi">npm install cookieconsent</span></pre><p id="1a1b" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">或者通过<a class="ae ky" href="https://yarnpkg.com/en/package/cookieconsent" rel="noopener ugc nofollow" target="_blank">纱线</a>:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1446" class="oe la it oa b gy of og l oh oi">yarn add cookieconsent</span></pre><p id="febe" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">或者通过CDN:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="3f3a" class="oe la it oa b gy of og l oh oi">&lt;script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"&gt;&lt;/script&gt;</span></pre><p id="b769" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">为了简单起见，我将使用CDN。将脚本添加到您的<code class="fe oj ok ol oa b">index.html</code>文件中。一旦完成，我们就可以访问<code class="fe oj ok ol oa b">window.cookieconsent</code>对象了。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="e9fb" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">正在初始化Cookie同意</h1><p id="c7fd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">初始化插件非常简单。只需在<code class="fe oj ok ol oa b">cookieconsent</code>对象上调用<code class="fe oj ok ol oa b">initialise</code>方法。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="d97d" class="oe la it oa b gy of og l oh oi">window.cookieconsent.initialise({});</span></pre><p id="ef4d" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">请注意，我们将一个对象作为数组传递。该对象用于配置。让我们传递主题、调色板和选项。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="bdb3" class="oe la it oa b gy of og l oh oi">window.cookieconsent.initialise({</span><span id="a935" class="oe la it oa b gy om og l oh oi">  container: document.getElementById("cookieconsent"),</span><span id="c497" class="oe la it oa b gy om og l oh oi">  palette:{</span><span id="2fdc" class="oe la it oa b gy om og l oh oi">    popup: { background: "#1aa3ff" },</span><span id="b5a2" class="oe la it oa b gy om og l oh oi">    button: { background: "#e0e0e0" },</span><span id="01c5" class="oe la it oa b gy om og l oh oi">  },<br/>  revokable: true,</span><span id="de9c" class="oe la it oa b gy om og l oh oi">  onStatusChange: function(status) {</span><span id="5527" class="oe la it oa b gy om og l oh oi">    console.log(this.hasConsented() ?</span><span id="a4a4" class="oe la it oa b gy om og l oh oi">    'enable cookies' : 'disable cookies');</span><span id="226d" class="oe la it oa b gy om og l oh oi">  },</span><span id="ccb4" class="oe la it oa b gy om og l oh oi">  "theme": "edgeless"</span><span id="a780" class="oe la it oa b gy om og l oh oi">});</span></pre><p id="6d53" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">插入代码后，打开浏览器。您应该会看到cookie通知出现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/b5347790be1d25d68676692868b808b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jGpL68f_qPEBokGo7r1bVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">cookie同意通知</p></figure><p id="65ea" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">简单明了。</p><p id="d52d" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">在现实世界的应用程序中，我们的数据库中会有一个用户表。用户表包含一个列“<code class="fe oj ok ol oa b">has_cookie_consent</code>”或类似的东西。一旦用户单击accept，我们会将该列更改为<code class="fe oj ok ol oa b">true</code>。</p><p id="a45d" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">然后，下次用户启动我们的应用程序时，我们将获取<code class="fe oj ok ol oa b">has_cookie_consent</code>值。如果它是假的，我们将显示cookie同意通知，如果它是真的，我们将隐藏它，因为用户已经同意这些条款。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="9b94" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">安全性</h1><p id="85fa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了充分保护我们的cookies，请使用以下配置选项:</p><ul class=""><li id="3cfc" class="mt mu it lt b lu mo lx mp ma mv me mw mi mx mm nw mz na nb bi translated"><code class="fe oj ok ol oa b">cookie.domain</code>(字符串)<br/>默认:“(空字符串)</li><li id="d8db" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated">cookie“name”所属的URL路径。只能在此位置读取cookie。</li><li id="8936" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated">cookie“name”所属的域。只能在该域中读取cookie。<a class="ae ky" href="http://erik.io/blog/2014/03/04/definitive-guide-to-cookie-domains/" rel="noopener ugc nofollow" target="_blank">cookie域指南</a></li><li id="d077" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated"><code class="fe oj ok ol oa b">cookie.expiryDays</code>(整数)<br/>默认:<em class="nx"> 365 </em></li><li id="e14d" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated">cookies过期日期，以天为单位指定(指定-1表示不过期)</li><li id="703e" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated"><code class="fe oj ok ol oa b">cookie.secure</code>(布尔)<br/>默认:<em class="nx">假</em></li><li id="3266" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm nw mz na nb bi translated">如果secure为true，则只允许通过https访问cookies。</li></ul><h2 id="0422" class="oe la it bd lb oo op dn lf oq or dp lj ma os ot ll me ou ov ln mi ow ox lp oy bi translated">更改通知内容</h2><p id="ce5f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">用于cookie同意窗口元素的文本字符串。</p><p id="fa87" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated"><code class="fe oj ok ol oa b">content</code>(对象)—使用此对象来更改cookie同意通知HTML。</p><p id="5ce2" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">这看起来是这样的:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="27cb" class="oe la it oa b gy of og l oh oi">"content": {</span><span id="b6bf" class="oe la it oa b gy om og l oh oi">  "header": 'Cookies used on the website!',</span><span id="3dcb" class="oe la it oa b gy om og l oh oi">  "message": 'This website uses cookies to improve your experience.',</span><span id="a091" class="oe la it oa b gy om og l oh oi">  "dismiss": 'Got it!',</span><span id="42b1" class="oe la it oa b gy om og l oh oi">  "allow": 'Allow cookies',</span><span id="516a" class="oe la it oa b gy om og l oh oi">  "deny": 'Decline',</span><span id="05e9" class="oe la it oa b gy om og l oh oi">  "link": 'Learn more',</span><span id="aab1" class="oe la it oa b gy om og l oh oi">  "href": 'https://www.cookiesandyou.com',</span><span id="8f3a" class="oe la it oa b gy om og l oh oi">  "close": '&amp;#x274c;',</span><span id="ef75" class="oe la it oa b gy om og l oh oi">  "policy": 'Cookie Policy',</span><span id="425f" class="oe la it oa b gy om og l oh oi">  "target": '_blank',</span><span id="d81e" class="oe la it oa b gy om og l oh oi">}</span></pre><p id="e4cf" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">下面是我们将看到的情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/5152840e2987b7bdecdd9b87385170d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZdKe0b3DziFWQ_Avupl1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">cookie通知</p></figure><p id="f22b" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">参见Codesandbox示例<a class="ae ky" href="https://codesandbox.io/s/goofy-poitras-i71n4" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pa pb l"/></div></figure><p id="8a0a" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">在这里查看插件<a class="ae ky" href="https://cookieconsent.osano.com/documentation/javascript-api/" rel="noopener ugc nofollow" target="_blank">的完整API文档。</a></p><div class="pc pd gp gr pe pf"><a href="https://cookieconsent.osano.com/documentation/javascript-api/" rel="noopener  ugc nofollow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd iu gy z fp pk fr fs pl fu fw is bi translated">JavaScript API</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">Osano的cookie许可插件的高级Javascript API。配置一切，让它成为你自己的。</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">cookieconsent.osano.com</p></div></div><div class="po l"><div class="pp l pq pr ps po pt ks pf"/></div></div></a></div><p id="b15c" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">如果你是JavaScript新手，想学习这门语言，我建议你从阅读书籍和构建东西开始。从“<a class="ae ky" href="https://amzn.to/2LOkzjj" rel="noopener ugc nofollow" target="_blank"> <em class="nx">一个更聪明的学习JavaScript的方法</em> </a>”书<em class="nx">(亚马逊联盟链接)</em>和<a class="ae ky" href="https://medium.com/better-programming/the-secret-to-being-a-top-developer-is-building-things-heres-a-list-of-fun-apps-to-build-aac61ac0736c" rel="noopener">开始这里有一个要构建的有趣应用的列表</a>。</p><p id="e888" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">感谢阅读，编码快乐！</p></div></div>    
</body>
</html>