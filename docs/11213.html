<html>
<head>
<title>Dependency Inversion vs. Dependency Injection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">依赖倒置与依赖注入</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/straightforward-simple-dependency-inversion-vs-dependency-injection-7d8c0d0ed28e?source=collection_archive---------0-----------------------#2022-02-28">https://betterprogramming.pub/straightforward-simple-dependency-inversion-vs-dependency-injection-7d8c0d0ed28e?source=collection_archive---------0-----------------------#2022-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bd5f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简单明了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e8253093c6ae3212965ea1a4acba4f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bg5zOq7J8Hl_lWyT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">皮特·诺维茨基在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="3b0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我做软件工程师已经有几年了，但是时不时地我喜欢回到基础上来。我们都“知道”我们应该遵循鲍勃大叔的<a class="ae ky" href="https://en.wikipedia.org/wiki/SOLID" rel="noopener ugc nofollow" target="_blank">坚实原则</a>，但是常识并不总是惯例。</p><p id="5066" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近，我突然意识到我真的不知道依赖倒置和依赖注入之间的区别。我大概知道它们的意思，但是我不确定这两者之间有什么区别，而且，为什么叫依赖倒置，到底什么是倒置？事实证明，就像所有美好的事物一样，背后都有一个故事。但是首先，让我们讨论一下这两个概念的区别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/fe4dab83637c2033c6c6d9c6c04664a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Gol3Pay8vho6Y3lH1SlkQ.png"/></div></div></figure><h1 id="02e3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">依赖性倒置</h1><p id="40d5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">依赖性反转是一种设计原则。简单地说，这意味着我们不应该依赖于底层的实现，而应该依赖于高层的抽象。这是有意义的，因为它允许我们不知道实现细节。无论我们想要改变一个特定的实现还是支持其他的实现，代码都将保持不变，因为它与底层的实现细节是分离的。</p><p id="08b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明这个概念，让我们假设你是一名软件工程师。你有两个依赖，你的代码编辑器和你的食物。你不想事事都被VSCode缠住，也不想整天吃披萨。此外，如果他们改变了比萨饼的实现细节，现在它变得很糟糕，会发生什么？</p><p id="8ca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个可怕问题的解决方案是依靠高层次的抽象。你需要<em class="mt">一些</em>编辑，你需要<em class="mt">一些</em>食物，但是你宁愿保留你的选择权。如果比萨饼开始变得难吃，你总是可以使用另一种食物，去吃拉面，甚至汉堡。</p><h1 id="7594" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">依赖注入</h1><p id="6233" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">依赖注入是一种设计模式，它允许我们将创建和使用分开。它允许我们在运行时“注入”所需的对象，而不用担心自己构造它们。它也倾向于与依赖倒置原则携手工作。</p><p id="fe58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以依赖高级抽象类，并在运行时根据所需的用例注入特定的实现。这允许我们编写更多可配置的动态代码。它甚至提高了我们测试代码的能力，因为它允许我们轻松地模仿注入的类，所以我们可以专注于测试我们的核心逻辑。</p><p id="b32a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明这个概念，让我们再次假设你是一名软件工程师，有着同样的依赖——代码编辑器和食物。你肯定不想自己准备比萨饼，也不想自己构建代码编辑器。你是一个忙碌的软件工程师，你没有时间。</p><p id="3b75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，您身边有依赖注入！<br/>你不需要准备比萨饼或构建代码编辑器——你可以假设它已经为你创建好了，并准确地注入到你需要的地方。<br/>此外，你不会永远受困于披萨和VSCode。你可以是食物不可知论者，让配置决定你今天是吃(或被注射，YIKES)披萨还是拉面。</p><p id="5f80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，本质上依赖注入使我们能够使用依赖倒置并依赖高级抽象。</p><p id="b5dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，我还是没有覆盖为什么叫“倒挂”，这里倒挂的到底是什么？我答应给你一个故事！(别担心它很短)</p><h1 id="3f8a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">为什么我们称之为依赖“倒置”？</h1><p id="0866" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在传统的软件开发中，最佳实践似乎是在分层架构中构建软件，这使得越来越复杂的系统的构建成为可能。</p><p id="a131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种体系结构中，较高级别的组件直接依赖于较低级别的组件来完成复杂的任务。</p><h1 id="e84b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">准备披萨——老方法与“倒置”方法</h1><p id="afa1" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了说明“反转”，请看下面的<code class="fe mu mv mw mx b">preparePizza</code>函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="f454" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">高级功能依赖于两个特定的实现来完成其任务。</p><p id="0ca1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看一个使用依赖注入和依赖倒置的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="96eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我们依靠高级抽象来完成我们的任务。所以我们可以用网上找到的菜谱做披萨，自己动手做披萨，让奶奶好好休息一下。</p><h1 id="78aa" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">我们今天学到了什么</h1><p id="f82d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们讨论了依赖注入和依赖倒置之间的区别，以及它们如何一起工作来产生优秀的软件。我们还讨论了为什么我们使用“反转”这个术语，并在这个过程中学到了一些软件历史。</p><p id="19a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用，在下一次之前，保持它简单明了！</p></div></div>    
</body>
</html>