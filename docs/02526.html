<html>
<head>
<title>Supercharge Your JAMstack With FaunaDB and React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用FaunaDB和React.js增强您的JAMstack</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/supercharge-your-jamstack-with-faunadb-and-react-js-e2960f731a58?source=collection_archive---------5-----------------------#2019-12-06">https://betterprogramming.pub/supercharge-your-jamstack-with-faunadb-and-react-js-e2960f731a58?source=collection_archive---------5-----------------------#2019-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="008f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以下是如何使用FaunaDB和React.js将JAMStack提升到一个新的水平</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/02aca16c385f6613b800357916fcbbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VVEnYmxy23dNRzG_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图多尔·巴休在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6b98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://jamstack.org/" rel="noopener ugc nofollow" target="_blank"> JAMstack </a> (JavaScript，API，Markup)对于静态站点和动态单页面应用程序(spa)来说是一种享受。我们使用JavaScript实现交互性，使用标记实现模板，使用API实现服务器端流程或数据库操作。即使是最基本的动态应用程序也使用数据库来存储信息。这就是FaunaDB的用武之地。在本文中，我将向您展示如何使用FaunaDB增强您的JAMstack知识。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="48a4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么是FaunaDB</h1><ul class=""><li id="bda2" class="mu mv it lb b lc mw lf mx li my lm mz lq na lu nb nc nd ne bi translated"><strong class="lb iu">快速且可扩展</strong>—FaunaDB架构让您的数据库实例能够根据需求和负载平衡进行扩展。与CDN非常相似，您的数据将分布在世界各地的许多FaunaDB实例中，因此您的用户和服务器将始终访问最近的实例。任何更改都将复制到所有实例上。</li><li id="722c" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><strong class="lb iu"> FaunaDB支持事务并遵循ACID约定(原子性、一致性、隔离性、持久性)</strong> —如果你好奇，<a class="ae ky" href="https://fauna.com/blog/consistency-without-clocks-faunadb-transaction-protocol" rel="noopener ugc nofollow" target="_blank">阅读这篇文章</a>深入探究FaunaDB如何运作。</li><li id="d5e4" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><strong class="lb iu">保证安全</strong> —一旦事务提交，保证任何后续事务—无论哪个副本正在处理它—都将读取先前事务写入的所有数据。其他NoSQL系统甚至大多数SQL系统都不能保证全局副本的一致性。</li><li id="bc80" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><strong class="lb iu">易用性</strong> —有了FaunaDB作为JAMStack的数据存储，我们就不必考虑一致性、规模、复制、冗余等问题。FaunaDB和React.js配合得很好，并且很容易设置。我们可以专注于核心应用程序，而不是做设置环境的繁重工作。最重要的是，用前面提到的栈来构建快速原型是完全免费的。</li><li id="b814" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated"><strong class="lb iu">DBA as</strong>—通过使用允许您扩展的现有基础架构来节省时间。然后，您可以利用这段时间来开发您的应用程序。与其把时间花在构建自己的数据库集群上，不如使用数据库即服务<em class="nk"> (DBaaS) </em>。</li></ul><p id="7021" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本页包含更多关于FaunaDB概念的信息，并允许您深入了解这些概念。</p><p id="275d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，让我们开始探索我们的JAMstack，在这里我们使用FaunaDB和React。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="42c2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">FaunaDB入门</h1><p id="bcc4" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">首先，你必须注册动物群。访问<a class="ae ky" href="https://dashboard.fauna.com/accounts/register" rel="noopener ugc nofollow" target="_blank">注册页面</a>，应显示以下注册屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/061823bacc14891dc5cfedf3bf538308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*jm1Z0KDbBOLzj3LwBpLTyg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FaunaDB <a class="ae ky" href="https://dashboard.fauna.com/accounts/register" rel="noopener ugc nofollow" target="_blank">注册页面</a></p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ffae" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装FaunaDB外壳</h1><p id="0e38" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">一旦你的帐户设置好了，打开一个终端并安装FaunaDB Shell。如果您在PC上，您可以使用:</p><h2 id="4424" class="np md it bd me nq nr dn mi ns nt dp mm li nu nv mo lm nw nx mq lq ny nz ms oa bi translated">使用NPM</h2><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="303b" class="np md it oc b gy og oh l oi oj">npm i -g fauna-shell</span></pre><p id="c513" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你还没有安装NPM，你可以按照这里的指南<a class="ae ky" href="https://www.npmjs.com/get-npm" rel="noopener ugc nofollow" target="_blank">来设置它。</a></p><h2 id="629c" class="np md it bd me nq nr dn mi ns nt dp mm li nu nv mo lm nw nx mq lq ny nz ms oa bi translated">如果你在苹果电脑上，你可以使用<a class="ae ky" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">自制软件</a>:</h2><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="76ce" class="np md it oc b gy og oh l oi oj">brew install fauna-shell</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8edc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">登录到您的FaunaDB帐户</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/713ddcbed320810d497289add0565e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kl4DEGr5T2nkmNA0TAcZDg.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b0e6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建FaunaDB实例</h1><p id="6968" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">用FaunaDB创建一个新的数据库非常简单。按下仪表盘中的<em class="nk">“新建数据库”</em>按钮，或点击此处的<a class="ae ky" href="https://dashboard.fauna.com/db-new/" rel="noopener ugc nofollow" target="_blank"/>。当您到达该部分时，为数据库命名并按save。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/b5411c303bdbfa2fde6530687a43ee50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJCMn_0Y0Cc-6Xd4rC-oCg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建动物数据库</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cbd5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为数据库创建您的FaunaDB密钥</h1><p id="1f28" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">该键用于为<code class="fe om on oo oc b">create</code>、<code class="fe om on oo oc b">read</code>、<code class="fe om on oo oc b">update</code>和<code class="fe om on oo oc b">delete</code>动作(CRUD)访问数据库。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/8ec920c690f4cde232e1d6c447259546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wSM2KAEVia55_dkkIHDb_Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建数据库密钥—该密钥用于访问数据库</p></figure><h2 id="8c93" class="np md it bd me nq nr dn mi ns nt dp mm li nu nv mo lm nw nx mq lq ny nz ms oa bi translated">FaunaDB密钥系统</h2><p id="75d4" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">对FaunaDB API的访问使用对应于访问密钥的秘密，这些密钥将连接认证为具有特定的权限。访问密钥系统既适用于管理员级和服务器级连接，也适用于对象级和用户级连接。</p><p id="8cb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于FaunaDB密钥和安全性的更多信息可以在的文档中找到。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ca3b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用FaunaDB键</h1><p id="0884" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">复制数据库访问密钥的秘密，并将秘密保存在安全的地方。该密钥仅可见一次。</p><h2 id="3fda" class="np md it bd me nq nr dn mi ns nt dp mm li nu nv mo lm nw nx mq lq ny nz ms oa bi translated">运行以下命令</h2><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="f9ba" class="np md it oc b gy og oh l oi oj">export FAUNADB_SERVER_SECRET=<!-- -->FaunaDBSecretHere</span></pre><p id="051c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用您在上一步中复制的秘密值替换<code class="fe om on oo oc b">FaunaDBSecretHere</code>。</p><p id="eee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe om on oo oc b"><strong class="lb iu">export</strong></code>是为Bash设置环境变量的Bash命令。用这个命令设置的所有变量都将被这个Bash创建的所有进程继承。</p><p id="035a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe om on oo oc b"><a class="ae ky" href="https://gist.github.com/indreklasn/9d329c4a586d0ee623de54750ba695af" rel="noopener ugc nofollow" target="_blank">/scripts/bootstrap-faunadb.js</a></code>添加到项目的根目录中。这是一个幂等脚本，您可以运行一百万次并得到相同的结果(一个todos数据库)。</p><p id="3d4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，将引导命令添加到您的<code class="fe om on oo oc b">package.json</code>文件中的npm脚本:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="6fe4" class="np md it oc b gy og oh l oi oj">{<br/>  "scripts": {<br/>    "bootstrap-faunadb": "node ./scripts/bootstrap-faunadb.js"<br/>  }<br/>}</span></pre><p id="fd48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以运行<code class="fe om on oo oc b">bootstrap</code>命令在我们的FaunaDB帐户中建立我们的FaunaDB数据库。</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="fee5" class="np md it oc b gy og oh l oi oj">npm run bootstrap-fauna</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/3538bf276d2d01f0bfb2a37c6ac8f32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*biXFwvehJ_3l1cxcL6InAA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">引导FaunaDB实例</p></figure><p id="f857" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们应该好好去利用牧神了！如果你遇到了问题或者迷路了，请查看本教程的Github库。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="936a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建-反应-应用程序设置</h1><p id="8229" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">为了开始，使用以下命令创建一个新的React应用程序:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="b8b1" class="np md it oc b gy og oh l oi oj">npx create-react-app faunadb-react-app &amp;&amp; cd faunadb-react-app &amp;&amp; npm start</span></pre><p id="7f38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nk">(</em><a class="ae ky" href="https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b" rel="noopener"><em class="nk">npx</em></a><em class="nk">附带npm 5.2+及更高版本，参见</em> <a class="ae ky" href="https://gist.github.com/gaearon/4064d3c23a77c74a3614c498a8bb1c5f" rel="noopener ugc nofollow" target="_blank"> <em class="nk">旧版本npm说明</em> </a> <em class="nk">。)</em></p><p id="29ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，打开<a class="ae ky" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>查看你的app。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/c65305cbf64f6e9e47016125453ef640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m8FaCDRNh3naRVsfNIejDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React app本地运行—<a class="ae ky" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a></p></figure><p id="5ebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你好奇的话，<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">这里有</a> <code class="fe om on oo oc b"><a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code> <a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">库</a>——用它来了解更多关于设置的信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c38b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">建立FaunaDB促进地方发展</h1><h2 id="7a5d" class="np md it bd me nq nr dn mi ns nt dp mm li nu nv mo lm nw nx mq lq ny nz ms oa bi translated">安装依赖项</h2><ul class=""><li id="e525" class="mu mv it lb b lc mw lf mx li my lm mz lq na lu nb nc nd ne bi translated"><code class="fe om on oo oc b">faunadb</code> NPM包——官方的JavaScript驱动程序，用于<a class="ae ky" href="https://fauna.com/" rel="noopener ugc nofollow" target="_blank"> FaunaDB </a>。</li></ul><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="9b72" class="np md it oc b gy og oh l oi oj">npm i faunadb </span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f9a4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设置。环境文件</h1><p id="5354" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">创建一个<code class="fe om on oo oc b">.env</code>文件，并将FaunaDB密钥放在那里。这是一种安全的方式，我们可以使用我们的令牌，没有任何可能的安全漏洞。</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="3a4a" class="np md it oc b gy og oh l oi oj">FAUNADB_SERVER_SECRET=</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="863c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">连接到FaunaDB数据库</h1><p id="395f" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">创建<code class="fe om on oo oc b">fauna</code>目录。这是所有与FaunaDB相关的功能所在的目录。</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="c908" class="np md it oc b gy og oh l oi oj">mkdir fauna</span></pre><p id="030a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在开始查询之前，我们需要连接到数据库。就这么办吧。</p><p id="ccbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe om on oo oc b">fauna/db.js</code></p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="e41c" class="np md it oc b gy og oh l oi oj">const faunadb = require('faunadb');<br/></span><span id="bd85" class="np md it oc b gy os oh l oi oj"><em class="nk">/* configure faunaDB Client with our secret */</em></span><span id="de44" class="np md it oc b gy os oh l oi oj">const q = faunadb.query</span><span id="76b5" class="np md it oc b gy os oh l oi oj">const client = new faunadb.Client({</span><span id="1520" class="np md it oc b gy os oh l oi oj">  secret: process.env.FAUNADB_SERVER_SECRET</span><span id="30e0" class="np md it oc b gy os oh l oi oj">})</span><span id="d596" class="np md it oc b gy os oh l oi oj">export { q, client } </span></pre><p id="aa09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经建立了与FaunaDB实例的连接，我们可以开始从数据库中获取我们的集合。</p><p id="e2ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在我们的<code class="fe om on oo oc b">fauna</code>目录中创建<code class="fe om on oo oc b">fauna/get-all-products.js</code>文件。这是我们进行FaunaDB查询的地方。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="346d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，FaunaDB数据库中有用于示例目的的虚拟数据。</p><p id="d726" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意这里的FaunaDB特定语法。它叫做F <em class="nk"> QL(动物群查询语言)。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f28a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">动物查询语言(FQL)</h1><p id="4d5e" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">动物查询语言(FQL)是用于查询动物数据库的本地API。</p><p id="72db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">语言是<em class="nk">面向表达式的</em>:所有<a class="ae ky" href="https://docs.fauna.com/fauna/current/api/fql/functions/" rel="noopener ugc nofollow" target="_blank">函数</a>，控制结构，<a class="ae ky" href="https://docs.fauna.com/fauna/current/api/fql/types#literal" rel="noopener ugc nofollow" target="_blank">文字</a>返回值。因此，很容易将多个结果组合成一个<a class="ae ky" href="https://docs.fauna.com/fauna/current/api/fql/types#array" rel="noopener ugc nofollow" target="_blank">数组</a>或<a class="ae ky" href="https://docs.fauna.com/fauna/current/api/fql/types#object" rel="noopener ugc nofollow" target="_blank">对象</a>。或者，您可以映射一个<a class="ae ky" href="https://docs.fauna.com/fauna/current/api/fql/collections" rel="noopener ugc nofollow" target="_blank">集合</a>并为每个成员计算一个结果——可能获取更多数据。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf77" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">FaunaDB支持原生GraphQL</h1><p id="f1a1" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">FaunaDB具有一级GraphQL API支持。FaunaDB GraphQL API应该可以与大多数GraphQL库一起工作。</p><p id="6c1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://docs.fauna.com/fauna/current/api/graphql/" rel="noopener ugc nofollow" target="_blank">点击这里了解更多关于如何使用FaunaDB和GraphQL支持的信息</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="93c3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在React组件内调用FaunaDB查询</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在React组件中查询FaunaDB</p></figure><p id="d83c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意我们使用了React钩子。如果这是一个新的概念，我在前面的中写过。</p><p id="e695" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们看我们的浏览器，我们应该看到我们的数据打印出来。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/4a496debe1091cec3586f13f171719e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEtLVOKL0bRAgPSt5QHxBQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用React渲染数据—<a class="ae ky" href="http://localhost:8888/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a></p></figure><p id="481c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干得好！你坚持到了最后。接下来，我们将使用所有这些知识来构建有用的应用程序。</p><p id="827d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你看到改进它的方法或者被设置卡住了，检查一下<a class="ae ky" href="https://github.com/indreklasn/faunadb-react-app-demo" rel="noopener ugc nofollow" target="_blank">源代码</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8a38" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="fd59" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">请继续关注下一章，我们将使用FaunaDB构建一个笔记应用程序来演示它的一些很酷的特性。</p><p id="514a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读，我希望您能学到一些新东西，并作为一名开发人员成长起来。我希望您尝试FaunaDB、Netlify和React，看看它们的配合有多好。</p><p id="91e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是初学者工具包的源代码。检查一下，如果你看到改进的方法，请告诉我们。</p><p id="ba23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特别感谢<a class="ae ky" href="https://fauna.com/company" rel="noopener ugc nofollow" target="_blank"> FaunaDB团队</a>和<a class="ae ky" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank"> React </a>官方文档在撰写本文时给予的技术支持。</p></div></div>    
</body>
</html>