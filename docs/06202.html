<html>
<head>
<title>Introducing AutoScraper: A Smart, Fast and Lightweight Web Scraper For Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍AutoScraper:一个智能、快速和轻量级的Web Scraper</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introducing-autoscraper-a-smart-fast-and-lightweight-web-scraper-for-python-20987f52c749?source=collection_archive---------5-----------------------#2020-09-09">https://betterprogramming.pub/introducing-autoscraper-a-smart-fast-and-lightweight-web-scraper-for-python-20987f52c749?source=collection_archive---------5-----------------------#2020-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c5b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">抓取网页变得更加自动化了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f96957351058d942a6c003737f498b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vyilp1hhbNT9BY1UYhBEvA.jpeg"/></div></div></figure><p id="1e44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在过去的几年里，网络抓取已经成为我日常工作中经常需要完成的任务之一。我想知道我是否能让它变得智能和自动，以节省大量时间。所以我做了自动刮板机！</p><p id="ebd7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">项目代码可在<a class="ae lq" href="http://github.com/alirezamika/autoscraper" rel="noopener ugc nofollow" target="_blank">这里</a>获得。它成为Github上的头号热门项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/72bba0eb5b8958ef2b962f717b241dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yD2rFqCzI8JlYnAANDexyQ.jpeg"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">Github趋势库</p></figure><p id="b8ac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个项目是为自动网页抓取制作的，使抓取变得容易。它获取一个URL或一个网页的HTML内容，以及我们想要从该网页中获取的样本数据列表。这个数据可以是文本、URL或者页面的任何HTML标签值。它学习刮取规则，返回相似元素。然后，您可以将这个学习到的对象与新的URL一起使用，以获得这些新页面的相似内容或完全相同的元素。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="233d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">装置</h1><p id="581c" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">它与Python 3兼容。</p><p id="fb59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用pip从git存储库中安装最新版本:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="99cb" class="nf me it nb b gy ng nh l ni nj">$ pip install git+https://github.com/alirezamika/autoscraper.git</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="c7f1" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">如何使用</h1><h2 id="4fb1" class="nf me it bd mf nk nl dn mj nm nn dp mn ld no np mp lh nq nr mr ll ns nt mt nu bi translated">得到相似的结果</h2><p id="ff28" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">假设我们想在一个StackOverflow页面中获取所有相关的文章标题:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="1b88" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是输出结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="b82e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在您可以使用<code class="fe nx ny nz nb b">scraper</code>对象来获取任何StackOverflow页面的相关主题:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="19b8" class="nf me it nb b gy ng nh l ni nj">scraper.get_result_similar('https://stackoverflow.com/questions/606191/convert-bytes-to-a-string')</span></pre><h2 id="cd01" class="nf me it bd mf nk nl dn mj nm nn dp mn ld no np mp lh nq nr mr ll ns nt mt nu bi translated">获得准确的结果</h2><p id="d47f" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">假设我们想从Yahoo Finance获取实时股票价格:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5f9c" class="nf me it nb b gy ng nh l ni nj">from autoscraper import AutoScraper</span><span id="d37b" class="nf me it nb b gy oa nh l ni nj">url = 'https://finance.yahoo.com/quote/AAPL/'</span><span id="93db" class="nf me it nb b gy oa nh l ni nj">wanted_list = ["124.81"]</span><span id="0d76" class="nf me it nb b gy oa nh l ni nj">scraper = AutoScraper()</span><span id="0e4b" class="nf me it nb b gy oa nh l ni nj"># Here we can also pass html content via the html parameter instead of the url (html=html_content)<br/>result = scraper.build(url, wanted_list)<br/>print(result)</span></pre><p id="4fd6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你也可以传递任何自定义的<code class="fe nx ny nz nb b">requests</code>模块参数。例如，您可能希望使用代理或自定义头:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="3364" class="nf me it nb b gy ng nh l ni nj">proxies = {<br/>    "http": 'http://127.0.0.1:8001',<br/>    "https": 'https://127.0.0.1:8001',<br/>}</span><span id="a32e" class="nf me it nb b gy oa nh l ni nj">result = scraper.build(url, wanted_list, request_args=dict(proxies=proxies))</span></pre><p id="08ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们可以得到任何符号的价格:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8dfa" class="nf me it nb b gy ng nh l ni nj">scraper.get_result_exact('https://finance.yahoo.com/quote/MSFT/')</span></pre><p id="76fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能还想获得其他信息。例如，如果你也想获得市值，你可以将它添加到通缉列表中。通过使用<code class="fe nx ny nz nb b">get_result_exact</code>方法，它将按照通缉令中相同的顺序检索数据。</p><p id="425a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">另一个例子:</strong>假设我们想要抓取关于Github repo页面的文本、星级数和拉请求的链接:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="45ee" class="nf me it nb b gy ng nh l ni nj">url = 'https://github.com/alirezamika/autoscraper'</span><span id="9a74" class="nf me it nb b gy oa nh l ni nj">wanted_list = ['A Smart, Automatic, Fast and Lightweight Web Scraper for Python', '662', 'https://github.com/alirezamika/autoscraper/issues']</span><span id="541c" class="nf me it nb b gy oa nh l ni nj">scraper.build(url, wanted_list)</span></pre><p id="2a84" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简单吧？</p><h2 id="c02c" class="nf me it bd mf nk nl dn mj nm nn dp mn ld no np mp lh nq nr mr ll ns nt mt nu bi translated">保存模型</h2><p id="c9b3" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">我们现在可以保存构建的模型，以便以后使用。要保存:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="f993" class="nf me it nb b gy ng nh l ni nj"># Give it a file path<br/>scraper.save('yahoo-finance')</span></pre><p id="70b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并加载:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="b503" class="nf me it nb b gy ng nh l ni nj">scraper.load('yahoo-finance')</span></pre><h2 id="1c3a" class="nf me it bd mf nk nl dn mj nm nn dp mn ld no np mp lh nq nr mr ll ns nt mt nu bi translated">生成scraper python代码</h2><p id="dff4" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">我们还可以生成一个独立的代码，供有经验的铲运机在任何地方使用:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="603f" class="nf me it nb b gy ng nh l ni nj">code = scraper.generate_python_code()<br/>print(code)</span></pre><p id="3e70" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它将打印生成的代码。有一个名为<code class="fe nx ny nz nb b">GeneratedAutoScraper</code>的类，它有您可以使用的方法<code class="fe nx ny nz nb b">get_result_similar</code>和<code class="fe nx ny nz nb b">get_result_exact</code>。您也可以使用<code class="fe nx ny nz nb b">get_result</code>方法来获得这两者。</p><p id="21c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">更高级的用法见本</strong> <a class="ae lq" href="https://gist.github.com/alirezamika/72083221891eecd991bbc0a2a2467673" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">要旨</strong> </a> <strong class="kw iu">。</strong></p><p id="6ed4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了展示AutoScraper的强大功能，我写了一个教程，用不到5分钟和不到20行代码从任何网站创建一个API。这里可以看<a class="ae lq" href="https://medium.com/better-programming/autoscraper-and-flask-create-an-api-from-any-website-in-less-than-5-minutes-3f0f176fc4a3" rel="noopener">。</a></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="c31e" class="nf me it bd mf nk nl dn mj nm nn dp mn ld no np mp lh nq nr mr ll ns nt mt nu bi translated">谢了。</h2><p id="b333" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">我希望这个项目对你有用，也能节省你的时间。如果你有任何问题，请在下面提问，我会回答你。我期待听到你的反馈和建议。</p><h2 id="0f2f" class="nf me it bd mf nk nl dn mj nm nn dp mn ld no np mp lh nq nr mr ll ns nt mt nu bi translated">快乐编码❤️</h2></div></div>    
</body>
</html>