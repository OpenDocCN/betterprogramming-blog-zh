# JavaScript 中的原型模式

> 原文：<https://betterprogramming.pub/the-prototype-pattern-in-javascript-bfe9ff433e6c>

## 与面向对象的类相比，使用它可以获得性能提升

![](img/ec81eb0b19aa7d87d3b202bd94590fb4.png)

*多梅尼科·洛亚在 Unsplash* 上拍摄的照片

JavaScript 中可以实现多种设计模式，在本文中，我们将讨论*原型设计模式，*一种基于对象的创造性设计模式。

如果您需要对 JavaScript 中的三种设计模式进行回顾，这里有一个概述:

*   创造性设计模式:这些模式为你创建对象，而不是直接实例化对象。这种方法的好处是，在决定需要创建哪些对象时，它给了您的程序更多的灵活性。
*   **行为设计模式:**这些模式专注于对象之间的交流。
*   **结构设计模式:**这些模式专注于类和对象的组合。它们可用于通过继承来组合接口，并定义组合多个对象的方式，以实现新的功能。

那么，原型模式到底是什么，它有什么作用？

# 原型模式

该模式的主要焦点是帮助创建对象，这些对象可以用作由构造函数创建的任何对象的蓝图。它通过所谓的 [*原型继承*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain) 来做到这一点。

由于 JavaScript 具有对原型继承的原生支持，因此使用起来自然很容易，甚至不需要学习语法本身之外的任何新概念。

当对象通过构造函数创建并包含`name`属性时，用同一构造函数创建的其他对象也将具有相同的属性，如下所示:

这听起来像典型的类对象，但实际上，它完全避免使用类。原型设计模式只是创建现有功能对象的副本，而不是定义全新的对象。

与面向对象的类相比，在 JavaScript 中使用该模式的最大好处是性能提升。这意味着当您在对象内部定义函数时，它们将通过引用来创建。换句话说，所有子对象将指向同一个方法，而不是创建它们自己的单独副本！

下面是这种模式的一个例子:

在我们的代码示例中，我们通过使用`Warrior.prototype.<method> = function() {...}`来定义战士的攻击方法。你可以看到我们已经用关键字`new`实例化了一些战士，所以现在我们看两个实例。两个实例都根据调用者传入的`name`参数来设置它们的`name`属性。

当我们在原型中定义方法`bash`和`omniSlash`时，正如所展示的，我们看到的两个独立的实例实际上引用了相同的`bash`和`omniSlash`函数！

如果我们这样定义它们，那么它们就不一样了。本质上，JavaScript 为每个实例创建了(假定)相同方法的另一个副本:

所以如果我们不像上一个例子那样使用原型模式，那么当我们实例化许多实例时会有多疯狂？我们已经克隆了一些方法，它们从本质上做着同样的事情，甚至不需要被复制，除非它们依赖于实例内部的状态。

扩展原型的另一种变体是如下所示的语法:

这相当于:

# 结论

我希望你发现这是有价值的，并期待在未来更多！