# Tauri 对 JavaScript 和 Rust 的使用

> 原文：<https://betterprogramming.pub/tauris-use-of-javascript-and-rust-850cc6d542c8>

## Tauri 有一个非常有趣的能力，可以在一个项目中使用 Rust 和 JavaScript。为什么这种方法如此罕见？

![](img/6e733aa0ebd282c32cf2a001052bed80.png)

丹尼尔·里昂在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

[Tauri](https://tauri.app/) 是一个非常有趣的框架。一方面，它是一个框架，解决了桌面开发领域的一个大问题。它支持跨平台开发，没有每次都要单独安装 Chrome 浏览器的缺点。这节省了资源并减小了包的大小。另一方面，它是需要两种完全不同语言的罕见框架之一。在这种情况下，语言是 Rust 和 JavaScript。Tauri 在前端需要 JavaScript、CSS 和 HTML，但也给了将片段外包给 Rust 的可能性。这个想法并不是全新的。WebAssembly 实际上采用了类似的方法。

这是有道理的。通过这种方法，您仍然可以使用 web 的 UI 技术，同时通过一种更加优化的语言来利用计算机的所有功能。然而，Tauri 的这一特性在其他框架中非常少见。此外，WebAssembly 是一个很好的东西，但在 web 中有某种缺失。但是为什么两种不同语言的这种方法如此罕见呢？要回答这个问题，首先要熟悉这两种语言的巨大差异。

# Rust vs. JavaScript

如果我们想探讨这个问题，就不能避免对这两种语言进行技术上的比较。不过，我想长话短说。

JavaScript 是一种高级的解释语言。这意味着它从实际的技术过程中获得了高度的抽象。这使得程序员可以更容易、更快地完成任务。此外，代码仅在执行时才被转换成机器可读的代码。因此，不需要单独的构建过程。虽然这些语言以其快速开发的能力而大放异彩，但它们也有性能差的缺点。每次执行程序时，必须运行转换代码的独立程序。

另一方面，Rust 是一种用于系统编程的编译语言。这意味着 Rust 代码在发货前会被转换为机器代码。因此，生成的二进制文件是高度优化的。此外，该语言提供了对内存等系统资源的更多访问，增加了实现的复杂性。然而，你几乎可以完全控制你的程序。

# 当速度和 UX 相遇

Rust 因其构建可靠高效的软件的强大能力而广受欢迎。你可以争辩说 JavaScript 有着相反的名声。然而，它在浏览器上具有垄断地位，并且相当灵活。

但是什么时候需要这么快的节奏呢？最近只有一个项目我需要使用 Rust。

前段时间想用 Tauri 搭建一个带 live preview 的小型 Markdown 编辑器(类似 VS 代码)。为了解析降价，使用了库“marked”。太好了，太好了。

但是过了一段时间，我注意到在处理较大的文本时会出现一定的延迟。这与每次击键都必须在预览中重新生成整个文本这一事实有关。文档越大，解析器的工作量就越大。我有点惊讶自己这么快就陷入了这个瓶颈。现在，有很多方法可以帮助我们。

首先，我可以对 React 中的两个值去抖，以限制编辑中的延迟。这只会为用户隐藏延迟。此外，我可以尝试将文本分成多个块，只重新生成被编辑的部分。但是为了不破坏文本，这种方法需要小心实现。但是为什么需要用 JavaScript 运行这个任务呢？将 Markdown 解析成 HTML 的任务对于 Rust 来说几乎是一个完美的例子。如果没有上面的任何优化，Rust 将大文档转换成 Markdown 的速度要快 12 倍。这是一项很容易外包给 Rust 的大任务。

# 现实

这种情况有多常见？从我的角度来看，这种情况有点罕见，因为大多数时候 JavaScript 已经足够快了。它能完成任务。即使不是这样，我们也可以通过减少对 JavaScript 的依赖来提高性能。这是岛屿架构的基础，我已经在这篇文章中解释过了。当使用中级语言时，你仍然有一个陡峭的学习曲线。

这个问题和你当前的语言也能完成任务的想法足以证明在大多数时候坚持使用特定语言的决定是正确的。然而，这种想法并不总是最好的方法——在 JavaScript 世界中也可以看到这一点。用 JavaScript 创建网站变得很棒。但是对任何远离浏览器的东西使用 JavaScript 就不合适了。Rust 或任何其他中级语言也有这个问题。通过 WebAssembly 可以用 Rust 创建一个网站，但从开发人员的体验来看，效率并不高。

# 摘要

回到开头的问题:我认为桌面应用是一个罕见的领域，在这个领域，伟大的 UX 和令人敬畏的性能的要求结合在一起。物联网在未来也可能有类似的需求。但是，它可能不需要出色的用户体验。也许，在未来我们会更经常地看到这种双语教学。

```
This article can also be found on my blog: [https://nikolas.blog/tauris-use-of-javascript-and-rust/](https://nikolas.blog/tauris-use-of-javascript-and-rust/)
```