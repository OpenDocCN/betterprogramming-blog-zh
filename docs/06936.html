<html>
<head>
<title>How to Build a Scalable CSS Architecture in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中构建可伸缩的CSS架构</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-scalable-css-architecture-in-react-3672338d4d3e?source=collection_archive---------7-----------------------#2020-11-18">https://betterprogramming.pub/how-to-build-a-scalable-css-architecture-in-react-3672338d4d3e?source=collection_archive---------7-----------------------#2020-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b694" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React项目中构建CSS的最佳方式是什么？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/11d6273755ccaa9186beb1a4f359a8d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z9eymjVQWkE1tLHZ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@matthewhenry?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马太·亨利</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="d4b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有什么比杂乱无章的CSS架构更让人抓狂的了。如果你曾经参与过一个包含大量样式和组件的大型项目，那么你会非常清楚其中的可怕之处。到处都是CSS样式，从长期删除的组件的未使用的样式表中分离出来，到处都是<code class="fe ls lt lu lv b">!important</code>。整件事都是卡夫卡式的——没有任何东西是有意义的，所有的逻辑似乎都飞出了窗外。</p><p id="673e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然有许多关于服务器端代码的干净架构的流行书籍，但CSS是构建应用程序时经常被忽略的部分。你不能把所有的东西都放进一个CSS文件里，然后就到此为止。你的程序越大，你的风格就变得越笨拙。开始时的一点点计划可以获得长期的利益。</p><p id="d7b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是在我们进入解决方案之前，有必要讨论一下替代方案。</p><p id="3dee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lw">注意:本文从React的角度讨论CSS架构，但是同样的原则也可以用于其他前端框架。</em></p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="fb3a" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">可供选择的事物</h1><h2 id="4e61" class="mw mf iq bd mg mx my dn mk mz na dp mo lf nb nc mq lj nd ne ms ln nf ng mu nh bi translated">1.基础——内联样式或CSS样式表</h2><p id="5bc8" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">在React中进行样式化的最简单方法是使用内联样式。由于显而易见的原因，这当然不理想。连React官方文档<a class="ae kv" href="https://reactjs.org/docs/dom-elements.html#style" rel="noopener ugc nofollow" target="_blank">都不推荐</a>。当我懒得创建一个单独的CSS文件时，或者当我只是添加诸如填充或边距之类的一次性样式时，我会不时地使用它来构建原型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="90ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种基本方法是普通的CSS文件。您可以简单地在组件旁边创建一个普通的CSS文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="91b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并将其导入组件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="8264" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种方法有几个问题。首先，样式是全局可访问的，这意味着每个组件都可以访问您创建的样式。在上面的例子中，任何其他使用类<code class="fe ls lt lu lv b">primary-button</code>的组件都将从<code class="fe ls lt lu lv b">styles.css</code>文件继承样式。在某一点上，命名变成了一场噩梦，你最终不得不求助于BEM之类的东西。</p><h2 id="86f6" class="mw mf iq bd mg mx my dn mk mz na dp mo lf nb nc mq lj nd ne ms ln nf ng mu nh bi translated">2.顺风CSS</h2><p id="111c" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">顺风是一个有趣的选择。这是一个实用优先的CSS框架，这意味着您可以访问低级的实用类，而不是像Bootstrap或布尔玛那样预先设计的组件。你基本上是通过应用类来设计组件的样式。</p><p id="8e80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我喜欢顺风。我在工作和项目中使用它。一旦你习惯了，应用样式就变得快速而简单——尤其是原型设计变得轻而易举。每当需要应用样式时，不必将选项卡更改为单独的CSS文件，从而避免了上下文切换。此外，您不必担心常见的CSS问题，如命名类或维护CSS文件。下面是使用顺风的典型React组件的样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="93d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，它也会给你的JSX增加很多混乱。创建React应用程序时，我的首要任务之一是构建易于阅读和维护的小组件。将一堆顺风类与JSX中的视图和逻辑混合在一起可能会很混乱。</p><p id="1fd3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，有一些方法可以抑制肿胀。Tailwind建议您将常用的样式提取到组件中。也可以选择使用<code class="fe ls lt lu lv b">@apply</code>作为常用的样式，比如:</p><pre class="kg kh ki kj gt np lv nq nr aw ns bi"><span id="0216" class="mw mf iq lv b gy nt nu l nv nw">.btn-primary {<br/>  @apply bg-transparent rounded border-solid border-2 border-red-600 text-red-600 m-5 px-10 py-5;<br/>}</span></pre><p id="2323" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后可以像普通CSS类一样使用它:</p><pre class="kg kh ki kj gt np lv nq nr aw ns bi"><span id="a725" class="mw mf iq lv b gy nt nu l nv nw">&lt;button className="btn-primary"&gt;Click me!&lt;/button&gt;</span></pre><p id="44de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，并不是所有的东西都可以被转换成一个组件，使用像<code class="fe ls lt lu lv b">@apply</code>这样的东西来封装常用的样式看起来非常接近于用传统的方式做事。如果你能在模板中看到所有这些类，那么Tailwind是一个不错的选择。但对我来说，它似乎以制造新问题为代价解决了某些问题。</p><h2 id="89a5" class="mw mf iq bd mg mx my dn mk mz na dp mo lf nb nc mq lj nd ne ms ln nf ng mu nh bi translated">3.CSS-in-JS</h2><p id="22d3" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">JS中的CSS是另一种选择。有几个流行的库，包括样式组件和情感。基本上，您使用JavaScript来设计组件的样式。下面是一个使用样式化组件的React组件的示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="8209" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种方法有一些优点。像使用Tailwind一样，您可以避免类名冲突的麻烦。您的样式就在组件中，删除组件也会删除样式，从而便于清理。你也可以利用道具来动态改变风格。</p><p id="ae5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然有一点学习曲线，但我并不喜欢这种语法。但是在我看来，最大的缺点是它弄乱了你的代码。在一定的规模下，你的组件中会有一堆CSS-in-JS，这使得它们很难阅读和管理。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="e72b" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">我的解决方案是:CSS模块和一个全局样式文件夹</h1><p id="c990" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">CSS模块基本上是CSS文件，其中类名的作用域是本地的，这意味着我们可以在文件中使用我们想要的任何名称，而不允许任何其他组件访问它。命名一直是CSS的痛点之一，催生了对BEM等解决方案的需求。CSS模块消除了这种担心。现在你可以有50个“包装器”或“容器”分布在你的CSS中，只要你使用CSS模块，风格就不会互相影响。</p><p id="0580" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CSS模块也更容易维护。这些模块通常与组件放在同一个文件夹中，这样很容易找到。这使得它们在组件被删除的情况下很容易被移除，从而避免了一堆未使用的样式表。</p><p id="b674" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说，成功的因素是造型和视角之间关注点的清晰分离。这是一个使用CSS模块的组件的例子。</p><p id="0b3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，用你喜欢的名字创建CSS模块，如果你使用<a class="ae kv" href="https://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"> SASS </a>的话，给它加上<code class="fe ls lt lu lv b">.module.css</code>或<code class="fe ls lt lu lv b">.module.scss</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="2f2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，将CSS模块导入组件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="009e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，JSX变得更加易读。该组件简洁明了。所有的造型都局限于<code class="fe ls lt lu lv b">MyComponent.module.scss</code>。</p><p id="3abb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后但同样重要的是，CSS模块是熟悉的。虽然Tailwind和CSS-in-JS库现在确实非常流行，但它们也是您必须学习和习惯的另一件事情。如果你在一个不熟悉这些工具的团队中工作，你必须能够为他们做一个强有力的案例，因为对于一个多年来一直以传统方式做前端设计的人来说，这些不是无关紧要的转变。CSS模块允许您以习惯的方式应用样式，同时仍然获得可伸缩性和可维护性的好处。</p><p id="f0d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能已经注意到，我在CSS模块中使用了SASS。虽然这肯定不是必需的，但SASS给了您很多好处，包括变量、嵌套和混合。它也已经存在了一段时间，许多前端开发人员可能都有这方面的经验。</p><p id="767d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这种方法，您还需要一个全局样式文件夹。为了实现跨多个页面或组件甚至整个站点共享的样式，比如布局、颜色和版式，全局样式仍然是必要的。这个styles文件夹可以保持精简，因为大多数组件的样式就在components文件夹中的JSX文件旁边。我推荐使用<a class="ae kv" href="https://sass-guidelin.es/" rel="noopener ugc nofollow" target="_blank">7-1模式</a>来组织你的全球风格文件夹。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="7e91" class="me mf iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated"><strong class="ak">做出明智的决定</strong></h1><p id="325c" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">如果我还不能说服你CSS模块的优点，我建议你开始一个小项目，并在上面的每一个不同的策略中实现风格。这将让你更好地了解你喜欢或不喜欢每种方法。</p><p id="30fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">整理你的风格不应该是事后的想法。尽早考虑干净的CSS架构是快乐的开发人员、更干净、更易维护的代码和更好的用户体验的关键。</p></div></div>    
</body>
</html>