<html>
<head>
<title>How To Create Interactive Maps Using SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SwiftUI创建交互式地图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-interactive-maps-using-swiftui-1c49732e2950?source=collection_archive---------7-----------------------#2022-09-26">https://betterprogramming.pub/how-to-create-interactive-maps-using-swiftui-1c49732e2950?source=collection_archive---------7-----------------------#2022-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1c8a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用SwiftUI创建令人惊叹的交互式地图和SVG</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a2d5a6d20be3f1698f66495aad457665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OoIo67HmV4PekfaaP8WEyg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="e62e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Android中，如果你想画一个交互式的地图，你可以使用<code class="fe lr ls lt lu b">GeoChart</code>，或者其他很多这方面的图表库。但是当涉及到<code class="fe lr ls lt lu b">Swift</code>，尤其是<code class="fe lr ls lt lu b">SwiftUI</code>，几乎没有真正的方法可以建造这样的东西。</p><p id="e017" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是<a class="ae lv" href="https://github.com/GrandSir/InteractiveMap" rel="noopener ugc nofollow" target="_blank"> InteractiveMap </a>库的用武之地。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ea2390d7847db5fdaf1d9201a6be1769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lQHuACaVTjoZ-B5spc85jw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用InteractiveMap创建的地图</p></figure><p id="8cb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">注意</strong>:尽管这个库支持大多数SVG，但是SVG解析算法并不是完美的形式，所以它会导致一些SVG出现问题。</p><p id="3ff5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">欢迎在我的GitHub上参与这个项目:</p><div class="lw lx gp gr ly lz"><a href="https://github.com/GrandSir/InteractiveMap" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd ir gy z fp me fr fs mf fu fw ip bi translated">GitHub—GrandSir/Interactive Map:Swift和SwiftUI的交互式地图库！</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">在SwiftUI中交互使用基于SVG的地图的库。仅适用于。基于svg的地图允许你修改所有的…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">github.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn kp lz"/></div></div></a></div><h1 id="ade5" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">将InteractiveMap添加到Xcode项目中</h1><p id="0968" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">首先，你必须安装库。<code class="fe lr ls lt lu b">InteractiveMap</code>仅支持Swift包管理器，因此只需转到<code class="fe lr ls lt lu b">File</code> → <code class="fe lr ls lt lu b">Add Packages…</code>，然后输入URL:</p><pre class="kg kh ki kj gt nl lu nm nn aw no bi"><span id="6739" class="np mp iq lu b gy nq nr l ns nt"><a class="ae lv" href="https://github.com/GrandSir/InteractiveMap" rel="noopener ugc nofollow" target="_blank">https://github.com/GrandSir/InteractiveMap</a></span></pre><p id="db6e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们跳到有趣的部分，看看InteractiveMap是如何渲染地图的！</p><h1 id="fe01" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">使用交互式地图</h1><p id="d048" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">要使用InteractiveMap，您必须使用<code class="fe lr ls lt lu b">InteractiveMap</code>视图并指定一个SVG名称。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/28365a8adbb3d17743287e2d8eac8139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-yH0u14JdJbKJA_MKuCW_Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一张简单的土耳其地图</p></figure><p id="ade2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe lr ls lt lu b">InteractiveMap</code>是一个<code class="fe lr ls lt lu b">View</code>,它返回一个以<code class="fe lr ls lt lu b">PathData</code>为参数的可迭代闭包(就像<code class="fe lr ls lt lu b">ForEach</code>,但是是一个定制的闭包),它包含了所有关于路径aka形状的信息。</p><p id="66f3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">出于几个原因，这是必需的:首先，为了在<code class="fe lr ls lt lu b">Map</code>中定制<code class="fe lr ls lt lu b">Paths</code>，您必须以某种方式访问它的数据。因此，<code class="fe lr ls lt lu b">PathData</code>给你五个属性自定义形状。</p><p id="1f8b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe lr ls lt lu b">id</code>、<code class="fe lr ls lt lu b">name</code>、<code class="fe lr ls lt lu b">boundingBox(bounds of the path)</code>、<code class="fe lr ls lt lu b">svgBounds(bounds of the original SVG)</code>和<code class="fe lr ls lt lu b">path(information needed for drawing operations)</code></p><p id="940a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">足够的信息。现在让我们来看看如何自定义地图。</p><h1 id="bf5d" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">基本定制</h1><p id="e698" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">用于基本自定义，如笔画、路径颜色、笔画宽度等。<code class="fe lr ls lt lu b">InteractiveShape</code>有一个叫做<code class="fe lr ls lt lu b">.initWithAttributes()</code>的修改器</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/2ffc166d3e57ee26f2b953d90fbc6174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XXHa0-ycDJyz8s-jh6j7pg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">定制的中国地图</p></figure><p id="9573" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好吧，太棒了！但是等等，这个库叫做InteractiveMap。互动性在哪里？</p><p id="b8f3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">确实如此。目前，您无法点击地图或对地图执行任何操作。但是，由于InteractiveMap库是用SwiftUI原生编写的，SwiftUI的威力开始显现。</p><h1 id="56fb" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">高级定制和交互性</h1><p id="dcf4" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">至此，我们不得不离开<code class="fe lr ls lt lu b">.initWithAttributes</code>，自己编写定制方法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/dcb09ce4287001c2820bcad4fab0ae8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*4-FUF7Su1iEKeNgmpTgJww.gif"/></div></figure><p id="f5a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是等等，那看起来有问题？有什么问题？</p><p id="6f1f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">嗯，确实出现了一些问题。首先，<code class="fe lr ls lt lu b">InteractiveShape</code>相互重叠。因此，一些路径站在其他路径的后面，导致难看的外观。</p><p id="a395" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一个问题实际上并不是问题，但是目前，路径上没有动画。所以，当你点击另一个路径时，光晕会立即消失。这也不优雅。</p><h1 id="604e" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">修复问题</h1><p id="778a" class="pw-post-body-paragraph kv kw iq kx b ky ng jr la lb nh ju ld le ni lg lh li nj lk ll lm nk lo lp lq ij bi translated">为了解决第一个问题，我们必须为路径指定一个<code class="fe lr ls lt lu b">zIndex</code>。这是一个<code class="fe lr ls lt lu b">SwiftUI</code>修改器，根据其<code class="fe lr ls lt lu b">zIndex</code>告诉哪个<code class="fe lr ls lt lu b">View</code>应该被定位在顶部或后面。</p><p id="f75d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了解决第二个问题，我们可以在<code class="fe lr ls lt lu b">SwiftUI</code>中使用<code class="fe lr ls lt lu b">.animation</code>修饰符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/38e93fb3c02f7b0718a6ef913091b565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PcOMTVBkl6EQis-Uj7c_UQ.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">平稳和伟大的</p></figure><p id="5c0a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！敬请关注更多内容。</p></div></div>    
</body>
</html>