<html>
<head>
<title>How to Handle Common Selenium Issues Using Python (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python处理常见的Selenium问题(第2部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-handle-common-selenium-issues-using-python-part-2-db8d6f39ef06?source=collection_archive---------10-----------------------#2020-12-01">https://betterprogramming.pub/how-to-handle-common-selenium-issues-using-python-part-2-db8d6f39ef06?source=collection_archive---------10-----------------------#2020-12-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7f66" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">解决您的大多数硒挑战</h2></div><p id="e456" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作者:<a class="le lf ep" href="https://medium.com/u/d38873cbc5aa?source=post_page-----db8d6f39ef06--------------------------------" rel="noopener" target="_blank">阿玛尔·哈斯尼</a> &amp; <a class="le lf ep" href="https://medium.com/u/7f47bdb8b8c0?source=post_page-----db8d6f39ef06--------------------------------" rel="noopener" target="_blank">迪亚·赫米拉</a></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/6bc521ef8170a455ead39698f246ba81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2X4onnsu6k_A4tsB_N68A.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">照片由<a class="ae lw" href="https://unsplash.com/@karlahrnndz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卡拉·埃尔南德斯</a>在<a class="ae lw" href="https://unsplash.com/s/photos/problem?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="76c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每当我使用Selenium进行报废或自动化时，无论我认为我已经变得多么轻松，它总是设法用新的问题和挑战来让我吃惊。如果你也是这种情况，你会发现这个常见挑战指南非常有用，非常省时。</p><p id="538f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外，如果你还没有看过本指南的第一部分<a class="ae lw" href="https://medium.com/analytics-vidhya/how-to-handle-common-selenium-issues-using-python-part-1-bb38029c0a04" rel="noopener">你一定要去看看。你可能面临的挑战的解决方案可能在第一部分等着你，如果它没有在这一部分列出来的话。</a></p><p id="1074" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">话虽如此，让我们从第一个常见挑战开始。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="b6c4" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何处理动态网页元素</h1><p id="f307" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">从浏览器的开发工具中复制粘贴元素的XPath无疑是选择元素最简单的方法。但是，如果您使用的元素有一个在您重新加载页面时动态变化的选择器，这可能就行不通了。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nb"><img src="../Images/89d74ca22153e87bdd02d9d9c7162c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tZ6jJaWILTTSnOMv.gif"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">Firefox的开发工具中的动态XPath演示(图片来源:Kayak.com)</p></figure><p id="5e8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有多种解决方案来处理这个问题。让我们用一个简单的例子来探究它们:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="2ca1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的示例中，我们希望选择带有动态id ( <code class="fe ne nf ng nh b"> 'A{some_number}-my-span-element'</code>)的span。以下是不同的解决方案:</p><h2 id="1cf5" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">使用绝对XPath</h2><p id="3358" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在上面的例子中，我们可以通过使用绝对XPath来选择span，如下所示:</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="937d" class="ni mf it nh b gy ny nz l oa ob">absolute_xpath = '/html/body/div[2]/span'</span></pre><p id="3a9c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能需要的一些提示:</p><ul class=""><li id="eed1" class="oc od it kk b kl km ko kp kr oe kv of kz og ld oh oi oj ok bi translated">您可以使用括号<code class="fe ne nf ng nh b"> [n]</code>选择某个元素的第n个子元素，就像我们在示例中所做的那样。</li><li id="3d16" class="oc od it kk b kl ol ko om kr on kv oo kz op ld oh oi oj ok bi translated">您可以通过使用星号(*)省略元素的标记名，如下所示:<code class="fe ne nf ng nh b"> /html/body/*[2]/span</code></li></ul><p id="7e34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您懒得编写绝对XPath:</p><p id="345b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1.你可以在新版Chrome或微软Edge的开发工具中找到它们。您只需要点击一个元素并复制完整的XPath，就像这样。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/6aaeb4dfd591caa1c70d47da91d33c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/0*B1rtrjIKaNlQrGbY.png"/></div></figure><p id="f35b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.如果你使用的是旧版本或者像我一样使用Firefox，你可以使用浏览器的控制台来选择它。你需要做的就是:</p><ul class=""><li id="0629" class="oc od it kk b kl km ko kp kr oe kv of kz og ld oh oi oj ok bi translated">点击F12打开开发工具。</li><li id="e24d" class="oc od it kk b kl ol ko om kr on kv oo kz op ld oh oi oj ok bi translated">选择控制台(如果你使用Firefox，写下“允许粘贴”。)</li></ul><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nb"><img src="../Images/5a88b9ffba62d5a7f673c0e82d84b740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oQ5k1QT6IKPRHoTM.gif"/></div></div></figure><ul class=""><li id="0362" class="oc od it kk b kl km ko kp kr oe kv of kz og ld oh oi oj ok bi translated">复制粘贴这个JavaScript函数(改编自<a class="ae lw" href="https://stackoverflow.com/a/2631931" rel="noopener ugc nofollow" target="_blank">栈溢出</a>)</li></ul><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><ul class=""><li id="97bc" class="oc od it kk b kl km ko kp kr oe kv of kz og ld oh oi oj ok bi translated">使用当前显示的动态id选择元素:</li></ul><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="2585" class="ni mf it nh b gy ny nz l oa ob">element = $("#A154897-my-span-element")</span><span id="66ee" class="ni mf it nh b gy or nz l oa ob">getPathTo(element)</span></pre><ul class=""><li id="7d1c" class="oc od it kk b kl km ko kp kr oe kv of kz og ld oh oi oj ok bi translated">您的绝对XPath应该出现在控制台中。</li></ul><h2 id="585c" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">使用相对XPath</h2><p id="db71" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">使用<code class="fe ne nf ng nh b">absolute_xpath</code>在大多数情况下是可行的，但是编写起来可能会很棘手，因为您必须遵循到根的完整路径。幸运的是，有一个更方便的解决方案，那就是使用相对XPath。</p><p id="8e0b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的例子中，我们可以看到<code class="fe ne nf ng nh b"> div</code>标签有一个静态ID。因此，我们可以使用与该元素相关的XPath:</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="838c" class="ni mf it nh b gy ny nz l oa ob">relative_xpath = '//*[@id="my-div"]/span'</span></pre><p id="673b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">字符“/”用于建议一个直接子(后代)元素，而“//”用于选择更深的后代(直接或非直接子)。</p><p id="2ede" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在示例中，我们可以看到通过id选择元素相当于使用括号语法过滤元素。在括号内，我们指定id(前面有“@”表示它是一个属性)等于某个值(“my-div”)。</p><h2 id="65d2" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">使用XPath函数</h2><p id="d097" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">正如我们在相对路径中看到的，我们可以使用像<code class="fe ne nf ng nh b"> *[@id="my-div"]</code>这样的过滤器来选择我们的元素。然而，我们并不局限于标准操作符(=，！=，&lt;，&lt; =，&gt;，&gt; =)。我们可以使用函数来操作字符串，比如<code class="fe ne nf ng nh b"> contains</code>。(您可以在<a class="ae lw" href="https://developer.mozilla.org/en-US/docs/Web/XPath/Functions" rel="noopener ugc nofollow" target="_blank">文档</a>中找到完整的函数列表。)</p><p id="bc62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">知道了这一点，我们可以使用下面的XPath直接选择元素:</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="fecf" class="ni mf it nh b gy ny nz l oa ob">element_xpath = '//span[contains(@id, "my-span-element")]'</span></pre><p id="a7f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以使用<code class="fe ne nf ng nh b"> and</code>和<code class="fe ne nf ng nh b"> not</code>关键字来组合多个函数(过滤器)来选择我们的元素:</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="86cb" class="ni mf it nh b gy ny nz l oa ob">element_xpath = '//*[not(contains(@id, "div")) and contains(@id, "my")]'</span></pre></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="2bd7" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何在无头模式下运行Selenium WebDriver</h1><p id="2afb" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">假设您刚刚编写完Selenium脚本，并希望每周运行它。每次都会出现一个烦人的浏览器窗口，尽管你并不需要它。我想你会想把它拿掉吧？</p><p id="e356" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">嗯，使用选项是可能的，下面是你如何使用Firefox:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="92bb" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何编写自己的自定义预期条件</h1><p id="b77b" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在Selenium中，<code class="fe ne nf ng nh b">expected</code> conditions是一种告诉Selenium等待直到满足某个条件的方式。例如，当您希望等待一个元素出现在屏幕上并被启用以便您可以单击它时:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="275c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe ne nf ng nh b">expected</code>条件的另一个例子是当等待某事发生时，比如进度条完全加载。</p><p id="2049" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以用<code class="fe ne nf ng nh b"> time.sleep(seconds)</code>。然而，如果<code class="fe ne nf ng nh b"> seconds</code>太小，我们可能会以不完整的信息或不完整的页面结束，如果太大，我们会浪费时间，如果我们扩展代码，这些时间会增加。发生这种情况的一个很好的例子是在<a class="ae lw" href="http://kayak.com" rel="noopener ugc nofollow" target="_blank">皮划艇</a>上。</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="f848" class="ni mf it nh b gy ny nz l oa ob"><a class="ae lw" href="https://www.kayak.com/flights/PAR-TUN/2020-11-07-flexible/2020-12-14-flexible" rel="noopener ugc nofollow" target="_blank">https://www.kayak.com/flights/PAR-TUN/2020-11-07-flexible/2020-12-14-flexible</a></span></pre><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi os"><img src="../Images/7639f1b0cca47a58819dc479269fc435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y8rsND7vwCoHLg8K.png"/></div></div></figure><p id="e94c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">问题是硒中的一切都不存在<code class="fe ne nf ng nh b">expected</code>条件。要在特定情况下使用它们，您必须实现自己的<code class="fe ne nf ng nh b">expected</code>条件。我们可以这样使用它们:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d746" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了创造一个<code class="fe ne nf ng nh b">expected</code>条件，我们首先要理解它的本质是什么。它实际上只是一个简单的函数，接受驱动变量(没有其他参数)，进行一些测试，如果条件满足，则返回<code class="fe ne nf ng nh b">True</code>(或者元素被解释为<code class="fe ne nf ng nh b">True</code>，就像非空列表或Selenium <code class="fe ne nf ng nh b">WebElement</code>或<code class="fe ne nf ng nh b">False</code>。</p><p id="baa0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，对于我们的Kayak示例，我们可以看到进度条元素的样式在满的时候显示100%:</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="81c1" class="ni mf it nh b gy ny nz l oa ob">&lt;div ... style="transform: translateX(100%);"&gt;&lt;/div&gt;</span></pre><p id="e9f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们的期望条件可以写成:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="9492" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于这个例子，我们必须使用一个全局变量来访问我们需要的定位器，因为函数必须只接受一个参数，即驱动程序。一种更干净的方法是使用一个类来代替(不使用全局变量):</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="ce2e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">方法<code class="fe ne nf ng nh b"> __init__</code>是对象的构造函数，而<code class="fe ne nf ng nh b"> __call__</code>只是调用实例化对象时使用的方法。在这种情况下，<code class="fe ne nf ng nh b"> progressbar_is_full_object(driver)</code>等同于<code class="fe ne nf ng nh b"> progressbar_is_full_object.__call__(driver)</code>。基本上，你的对象将表现为一个函数。</p><p id="b633" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要使用它，我们需要执行以下操作:</p><pre class="lh li lj lk gt nu nh nv nw aw nx bi"><span id="e2c2" class="ni mf it nh b gy ny nz l oa ob">progressbar_is_full_object = progressbar_is_full((By.XPATH, progressbar_xpath))<br/>browser_wait.until(progressbar_is_full_object)</span></pre><p id="1e52" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你不太喜欢面向对象的编程，你可以使用Python的<code class="fe ne nf ng nh b">functools.partial</code>或者lambda表达式给定位符作为函数的第二个参数。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="4a28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以使用自定义的<code class="fe ne nf ng nh b">expected</code>条件来等待进度条变满，这样您就可以知道何时所有搜索结果都被正确显示。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="fea8" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何使用Selenium滚动网页</h1><h2 id="1a2b" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">如何滚动到不可见的元素</h2><p id="a157" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在某些情况下，根据您使用的网站或屏幕大小，您可能需要选择一个隐藏元素。如果元素没有显示在屏幕窗口的可见部分，选择它将导致抛出一个<code class="fe ne nf ng nh b">ElementNotVisibleException</code>。为了避免这种情况，我们使用JavaScript方法<code class="fe ne nf ng nh b">.scrollIntoView</code> <strong class="kk iu"> </strong>将元素滚动到视图中(正如您从其名称中肯定猜到的)。下面是一个现成的代码片段:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="8901" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">如何上下滚动网页(或左右滚动)</h2><p id="caef" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">也可以向下和向上滚动到某个高度(如果需要，可以滚动到某个宽度):</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="4237" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">P.S .只要<code class="fe ne nf ng nh b"> y_coord</code>等于<code class="fe ne nf ng nh b">None</code>，第二个选项(<code class="fe ne nf ng nh b">document.body.scrollHeight</code>)作为<em class="ot"> y </em>坐标。如果您不想滚动到页面底部，您可以通过用您选择的值替换<code class="fe ne nf ng nh b"> y_coord</code>中的<code class="fe ne nf ng nh b">None</code>来指定某个<strong class="kk iu"> </strong>高度。</p><h2 id="9baa" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">如何在无限加载的情况下滚动到页面底部</h2><p id="d771" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">有时候，我们浏览的网站可能是那些随着用户不断滚动而不断扩展的网站之一，当接近页面底部时会加载更多的内容。社交媒体页面就是这类网站的具体例子。为了处理无限加载，需要循环重复滚动过程，直到不再有内容要显示，或者满足您选择的其他条件。下面你可以找到执行这个想法的代码片段:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="e4dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PS:对于数据量巨大的网站，一定要指定一个停止条件，而不是到达网页底部。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="0b1d" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">如何处理弹出窗口和警报</h1><p id="f172" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在浏览网页时，我们都曾经不得不处理那些烦人的弹出窗口。幸运的是，有了Selenium，立即关闭它们非常容易。你需要知道的是，弹出窗口有多种类型。我们将在每一部分看到特定类型的代码片段。</p><h2 id="4a18" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">弹出窗口</h2><p id="bd70" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">这种弹出非常频繁，尤其是在比较老的网站上，基本上都是在浏览一个网站的时候显示的一个单独的<a class="ae lw" href="https://www.w3schools.com/jsref/met_win_open.asp" rel="noopener ugc nofollow" target="_blank">窗口</a>。它通常包含广告。</p><p id="2632" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关闭它们非常简单。你只需要在下面的代码中用弹出窗口标题/名称替换<code class="fe ne nf ng nh b"> YOUR_WINDOW_NAME</code>即可。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="175d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用标题关闭窗口可以确保您关闭了不想要的窗口。</p><h2 id="5f5e" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">JavaScript弹出框</h2><p id="27c7" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">另一种弹出是<a class="ae lw" href="https://www.w3schools.com/js/js_popup.asp" rel="noopener ugc nofollow" target="_blank"> JavaScript弹出框</a>，可以是JavaScript函数生成的警告、确认或提示。它们通常是这样的:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/c5ba49a76ad2fb36a47da19cf91233ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/0*ZVK6hQjcNS0xjT5g.png"/></div></figure><p id="3bfc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要关闭它们，您只需运行以下代码片段:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="34e1" class="ni mf it bd mg nj nk dn mk nl nm dp mo kr nn no mq kv np nq ms kz nr ns mu nt bi translated">模态图像</h2><p id="37b0" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated"><a class="ae lw" href="https://www.w3schools.com/howto/howto_css_modal_images.asp" rel="noopener ugc nofollow" target="_blank"> <em class="ot">模态</em> </a>是显示在当前页面顶部的对话框。</p><p id="66cb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不幸的是，对于这种弹出窗口，由于每个网站实现它们的模式不同，所以没有每次都有效的代码。</p><p id="1b79" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，我可以给你一些简单的建议:</p><ul class=""><li id="1793" class="oc od it kk b kl km ko kp kr oe kv of kz og ld oh oi oj ok bi translated">通常，您会发现一个包含十字图像的HTML元素。您可以尝试单击它或父元素。</li><li id="c926" class="oc od it kk b kl ol ko om kr on kv oo kz op ld oh oi oj ok bi translated">您还应该检查出现的模态是否不包含在iFrame中。在这种情况下，您可以使用您在上一节中可能学到的关于iFrames的知识。</li></ul></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="0ea3" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">最后的想法</h1><p id="6171" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">现在，所有这些答案都在你的背包里，你已经准备好面对和战胜Selenium可能抛给你的所有挑战。如果您能想到本文中没有提到的其他Selenium挑战，请不要犹豫，在回复部分与我们分享它们(有或没有解决方案)。</p><p id="6e80" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">谢谢你坚持到现在。注意安全，在我们的下一篇文章中再见！</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="74b4" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">参考</h1><p id="81c7" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">[1]<a class="ae lw" href="https://browsee.io/blog/strategies-to-handle-dynamic-web-elements-in-selenium/" rel="noopener ugc nofollow" target="_blank">https://browsee . io/blog/strategies-to-handle-dynamic-web-elements-in-selenium/</a><br/>【2】<a class="ae lw" href="https://www.w3schools.com/howto/howto_css_modal_images.asp" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/howto/howto_css_modal_images.asp</a><br/>【3】<a class="ae lw" href="https://www.w3schools.com/js/js_popup.asp" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/js/js_popup.asp</a><br/>【4】<a class="ae lw" href="https://www.w3schools.com/jsref/met_win_open.asp" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/jsref/met_win_open.asp</a></p></div></div>    
</body>
</html>