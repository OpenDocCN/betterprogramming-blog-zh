<html>
<head>
<title>Avoid a Dirty Git Repo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">避免肮脏的Git回购</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/avoid-a-dirty-git-repo-4e9518d7914c?source=collection_archive---------13-----------------------#2020-07-10">https://betterprogramming.pub/avoid-a-dirty-git-repo-4e9518d7914c?source=collection_archive---------13-----------------------#2020-07-10</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="07c8" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何清理你的Git回购</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/8d9a9ea401acd66a604709700c261634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uJY0nG-40e0g4Rym"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kz" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yancy Min </a>拍摄</p></figure></div><div class="ab cl la lb hy lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="in io ip iq ir"><h1 id="2de8" class="lh li iu bd lj lk ll lm ln lo lp lq lr ka ls kb lt kd lu ke lv kg lw kh lx ly bi translated">为什么Git会随着时间变慢？</h1><p id="f353" class="pw-post-body-paragraph lz ma iu mb b mc md jv me mf mg jy mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">每次与repo交互时，都会创建Git对象。每次更改都会创建未打包的松散Git对象。未使用的Git对象和未使用的reflog路径只会在您的Git repo中制造混乱。</p><p id="1afd" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">在大多数情况下，松散的物体会导致减速。默认情况下，Git会为您所做的每个更改创建新的对象。考虑将被复制的大文件，它们之间的变化很小。为了解决这个问题，Git将这些文件打包到<code class="fe na nb nc nd b">packfiles</code>中以减小文件大小。<a class="ae kz" href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles" rel="noopener ugc nofollow" target="_blank">关于这个话题的更多信息可以在这里找到</a>。</p><p id="9fb9" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">我将向您展示两种清理Git repo的方法。</p></div><div class="ab cl la lb hy lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="in io ip iq ir"><h1 id="9a5c" class="lh li iu bd lj lk ll lm ln lo lp lq lr ka ls kb lt kd lu ke lv kg lw kh lx ly bi translated">1.Git垃圾收集</h1><p id="aa50" class="pw-post-body-paragraph lz ma iu mb b mc md jv me mf mg jy mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">目前最简单的方法是<a class="ae kz" href="https://git-scm.com/docs/git-gc" rel="noopener ugc nofollow" target="_blank"> Git垃圾收集</a>。它围绕回购做一些日常工作，并重新打包松散的对象。</p><p id="7bf1" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">您可以通过<code class="fe na nb nc nd b">git count-objects -vH</code>查看您回购的文件状态。<a class="ae kz" href="https://git-scm.com/docs/git-count-objects" rel="noopener ugc nofollow" target="_blank">更多详情可点击此处</a>。计数将显示所有未包装、松散的物体和实际尺寸。</p><p id="e685" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">为什么这个命令不是每次提交都运行？如果出现异常数量的松散对象，一些瓷瓶高级命令会运行此命令。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ne"><img src="../Images/ace65e7d30481d9f4b5ada05c4b6d106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KEhONgQFrQononY0ghEjiA.png"/></div></div></figure></div><div class="ab cl la lb hy lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="in io ip iq ir"><h1 id="ddb9" class="lh li iu bd lj lk ll lm ln lo lp lq lr ka ls kb lt kd lu ke lv kg lw kh lx ly bi translated">2.Git清洁和垃圾</h1><p id="7f65" class="pw-post-body-paragraph lz ma iu mb b mc md jv me mf mg jy mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">我要做的另一件事是<a class="ae kz" href="https://git-scm.com/docs/git-clean" rel="noopener ugc nofollow" target="_blank">清理和删除</a>:清理以删除被忽略的文件和垃圾，以便以后查看文件。</p><p id="e3f9" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">运行此命令清除忽略的文件:</p><p id="cef1" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated"><code class="fe na nb nc nd b">git clean -f -n -X</code></p><p id="0436" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">请务必键入<code class="fe na nb nc nd b">-n</code>来查看您的文件发生了什么。</p><p id="0c90" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated"><code class="fe na nb nc nd b">git trash</code>会将所有未暂存的文件移动到<code class="fe na nb nc nd b">.trash</code>子目录中。你可以以后再看，想做什么就做什么。你可以在这里找到更多关于这个话题的信息。</p></div><div class="ab cl la lb hy lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="in io ip iq ir"><h2 id="c606" class="nf li iu bd lj ng nh dn ln ni nj dp lr mi nk nl lt mm nm nn lv mq no np lx nq bi translated">今天就加入Medium！</h2><p id="b6b1" class="pw-post-body-paragraph lz ma iu mb b mc md jv me mf mg jy mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated"><em class="nr">为什么要</em> <a class="ae kz" href="https://zivce.medium.com/membership" rel="noopener"> <em class="nr">订阅</em> </a> <em class="nr">？</em>率先抛弃微服Chrome模式。其次，你会接触到很多精彩的故事。你可以从<a class="ae kz" href="https://medium.com/pragmatic-programmers/directory-of-pragmatic-programmer-books-on-medium-6a5cbadbd4b4" rel="noopener">务实程序员的书架</a>上读到100本左右的书。你可以看到来自Pinterest团队的障碍、非常有用的提示和伟大的建议。你可以阅读<a class="ae kz" href="https://medium.com/google-cloud" rel="noopener">谷歌云的</a>最新进展。</p><p id="152d" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">这就是你每月花5美元(两杯咖啡)所得到的。你花5美元就可以阅读整个实用程序员图书馆。</p><p id="7e97" class="pw-post-body-paragraph lz ma iu mb b mc mv jv me mf mw jy mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated"><em class="nr">免责声明:5美元中的2美元将直接支持我，并为您提供精彩话题。</em></p></div></div>    
</body>
</html>