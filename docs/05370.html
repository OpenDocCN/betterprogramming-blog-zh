<html>
<head>
<title>My Favorite Password One-Liner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我最喜欢的密码一行程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/my-favorite-password-one-liner-2fcf6ce47d95?source=collection_archive---------11-----------------------#2020-07-02">https://betterprogramming.pub/my-favorite-password-one-liner-2fcf6ce47d95?source=collection_archive---------11-----------------------#2020-07-02</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="12dd" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何在macOS上生成安全的随机密码</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6ef7886a945258d308c817840b68784a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N3Je3Qe0YqteA5FL"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@eprouzet?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃里克·普劳泽特</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="6f64" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有时你需要一个新密码。例如，您可能正在创建一个服务帐户，您需要在终端或某个地方的文本字段中输入密码。</p><p id="e404" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您知道必须多次键入密码，那么您可能倾向于选择这样的密码:</p><ul class=""><li id="99ad" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">容易打字</li><li id="4032" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">容易记住</li></ul><p id="f0fe" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是根据这个标准选择密码并不是一个好主意。这两种品质通常与安全密码无关。最好选择这样的密码:</p><ul class=""><li id="c53d" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">长的</li><li id="af48" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">随意</li></ul><p id="0b39" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这种方法听起来可能需要更多的工作。幸运的是，我们可以使用计算机上已经存在的工具轻松地生成任意长度的安全随机密码，并将其自动复制到剪贴板。</p><p id="3f13" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有了剪贴板上的密码，可以很容易地将密码粘贴到另一个终端的提示中，或者粘贴到应用程序或网页的文本字段中。通过粘贴密码，我们根本不用输入密码。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="c69f" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">一句话</h1><p id="e920" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nl ll lm ln nm lp lq lr nn lt lu lv in bi translated">不再拖延，我向您介绍我最喜欢的shell一行程序，它用于生成密码并将其复制到剪贴板，并针对macOS进行了优化:</p><pre class="kk kl km kn gu no np nq nr aw ns bi"><span id="1cc8" class="nt ms iu np b gz nu nv l nw nx">&lt; /dev/urandom \<br/>  LANG= \<br/>  tr -dc a-zA-Z0-9 \<br/>  | head -c 16 \<br/>  | pbcopy \<br/>  &amp;&amp; pbpaste \<br/>  &amp;&amp; echo</span></pre><p id="4e07" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">(我使用反斜杠将一行代码拆分成多行，以使其更具可读性。)</p><p id="30ad" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">运行这个一行程序会生成一个随机的16个字符的字母数字(<a class="ae kz" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> US-ASCII </a>)密码，包含小写字母、大写字母和数字。然后，一行程序将密码复制到剪贴板，并打印到终端。</p><p id="14f5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个一行程序适用于Zsh和Bash，可能也适用于其他shells。它会生成一个类似“vnQ0fEFU0V2V3asb”的密码</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="edce" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">一个解释</h1><p id="8205" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nl ll lm ln nm lp lq lr nn lt lu lv in bi translated">让我们一点一点地分析一下一行程序的作用:</p><p id="da5d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">&lt; /dev/urandom</strong></code> <strong class="lc iv"> </strong> — <strong class="lc iv"> </strong>从<a class="ae kz" href="https://en.wikipedia.org/wiki//dev/random#macOS_and_iOS" rel="noopener ugc nofollow" target="_blank">非阻塞伪随机设备</a>中读取字节，并将其作为第一个命令的输入。为什么是<code class="fe ny nz oa np b">/dev/urandom</code>而不是<code class="fe ny nz oa np b">/dev/random</code>？很高兴你问了这个问题。</p><p id="26da" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">LANG=</strong></code>:不设置<code class="fe ny nz oa np b">LANG</code>环境变量。macOS上该环境变量的默认值阻止<code class="fe ny nz oa np b">tr</code>命令处理来自<code class="fe ny nz oa np b">/dev/urandom</code>的原始字节。(或者，有些人把<code class="fe ny nz oa np b">LC_CTYPE=C</code>改为。有异曲同工之妙。)</p><p id="7346" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">tr -dc a-zA-Z0-9</strong></code>:删除输入中不在<code class="fe ny nz oa np b">a-zA-Z0-9</code>定义的字母数字字符集内的所有字符，然后将它们传递给下一个命令</p><p id="110a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">| head -c 16</strong></code>:允许输入的前16个字符通过。输出是密码</p><p id="7773" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">| pbcopy</strong></code>:将输入的密码复制到剪贴板</p><p id="e567" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">&amp;&amp; pbpaste</strong></code>:将剪贴板中的密码打印到终端</p><p id="2618" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b"><strong class="lc iv">&amp;&amp; echo</strong></code>:打印新的一行，使打印的密码显示在终端中自己的一行上。</p><p id="f677" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注:<code class="fe ny nz oa np b">pbcopy</code>和<code class="fe ny nz oa np b">pbpaste</code>命令内置于macOS中。如果你使用的是Linux，你可以用<code class="fe ny nz oa np b">xclip</code>来代替它们，如<a class="ae kz" href="https://stackoverflow.com/questions/749544/pipe-to-from-the-clipboard-in-bash-script" rel="noopener ugc nofollow" target="_blank">这个栈溢出问题</a>中所述。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="41b3" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">外壳函数</h1><p id="b953" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nl ll lm ln nm lp lq lr nn lt lu lv in bi translated">为了便于运行这个一行程序，我在我的<code class="fe ny nz oa np b">.zshrc</code>文件中定义了以下shell函数:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ob oc l"/></div></figure><p id="e785" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，<code class="fe ny nz oa np b">head</code>的参数有一点变化，因此该函数可以采用一个可选参数来指定所需的密码长度。</p><p id="af71" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该函数的用法如下:</p><pre class="kk kl km kn gu no np nq nr aw ns bi"><span id="7379" class="nt ms iu np b gz nu nv l nw nx">pwcopy</span></pre><p id="ae40" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者这个:</p><pre class="kk kl km kn gu no np nq nr aw ns bi"><span id="5a26" class="nt ms iu np b gz nu nv l nw nx">pwcopy 32</span></pre></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="b7fd" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">但是安全吗？</h1><p id="622a" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nl ll lm ln nm lp lq lr nn lt lu lv in bi translated">字母数字集中有62个字符。我选择了16个字母数字字符的长度，因为这给了密码<a class="ae kz" href="https://en.wikipedia.org/wiki/Password_strength#Entropy_as_a_measure_of_password_strength" rel="noopener ugc nofollow" target="_blank">熵</a>的<code class="fe ny nz oa np b">log₂(62) ✕ 16 ≈ 95 </code>位，无论从哪方面来看，这都是<a class="ae kz" href="https://security.stackexchange.com/questions/69374/is-an-80-bit-password-good-enough-for-all-practical-purposes" rel="noopener ugc nofollow" target="_blank">充足的</a>。</p><p id="d537" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有人说长度为12的密码有足够的熵，特别是如果你除了字母数字字符外还混合了符号。但我问，为什么要吝啬熵呢？16个字符的密码真的比12个字符的密码更贵吗？所以我说，挥霍一点，选择一个更长的密码。</p><p id="a16b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以选择比16年更长的时间。我只是喜欢2的幂。</p><p id="fb02" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您使用的服务要求您的密码包含符号字符，当然，继续添加一个。但是，即使你用十个不同的符号替换密码中的十个字母数字字符，数学计算表明，它只会增加大约相当于你在密码长度中增加一个字符的熵。换句话说:</p><p id="e36d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe ny nz oa np b">log₂(72) ✕ 16 ≈ log₂(62) ✕ 17</code></p><p id="487e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以不要多心！我更喜欢省去奇怪的符号，这样密码更容易选择，如果我需要在JSON文件中把它放在引号内，也不需要转义。</p><p id="6d03" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不相信我？问问<a class="ae kz" href="https://www.schneier.com/blog/about/" rel="noopener ugc nofollow" target="_blank">布鲁斯·施奈尔</a>,<a class="ae kz" href="https://www.schneier.com/books/applied_cryptography/" rel="noopener ugc nofollow" target="_blank">应用密码学</a>的作者我的密码建议与他的文章“<a class="ae kz" href="https://www.schneier.com/blog/archives/2014/03/choosing_secure_1.html" rel="noopener ugc nofollow" target="_blank">选择安全密码</a>”中的建议一致(布鲁斯说他自己使用符号和默认的12位密码。)</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="53d5" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">结论</h1><p id="ad45" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nl ll lm ln nm lp lq lr nn lt lu lv in bi translated">还有许多其他的一行程序可以用来创建密码，但是其中一些依赖于可能并不总是可用的工具，而另一些生成的密码比我喜欢的熵要少。这个适合我。也许对你也有用！</p><p id="0595" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不要忘记将密码保存在某个地方——密码管理器将是一个好的开始。注意安全，各位。</p></div></div>    
</body>
</html>