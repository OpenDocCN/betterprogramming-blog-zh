<html>
<head>
<title>An Introduction to JSX Through ERB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过ERB介绍JSX</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-introduction-to-jsx-through-erb-9e40f6549bd9?source=collection_archive---------27-----------------------#2020-01-28">https://betterprogramming.pub/an-introduction-to-jsx-through-erb-9e40f6549bd9?source=collection_archive---------27-----------------------#2020-01-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b340" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从《ERB》看《反应》中的JSX</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6b8c80eb4de07140060661a72e81d981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6EBXcg0eg1TqHPvuxzX7g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@riddywankenobi" rel="noopener ugc nofollow" target="_blank"> Ridwan Meah </a>在<a class="ae kv" href="https://unsplash.com/s/photos/ice-cream-cone" rel="noopener ugc nofollow" target="_blank"> Upsplash </a>上拍摄的冰淇淋蛋筒照片</p></figure><p id="edaf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你在Rails中与ERB一起工作过，并且需要学习React中的JSX，这篇文章可能会帮助你将你已经学到的东西带到新的格式中。这也可能有助于你理解两者之间的重要区别。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6cb3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">ERB的快速回顾</h1><p id="d73a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">ERB是一个模板引擎，允许你在一个HTML文件中编写Ruby代码来生成用户在客户端看到的HTML。在一个<code class="fe mw mx my mz b">.erb</code>文件中，ruby和HTML之间的界限很清楚，Ruby包含在“squids”中:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="67a6" class="ne ma iq mz b gy nf ng l nh ni">&lt;%= ruby code here will render %&gt; </span></pre><p id="3a77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或“冰淇淋甜筒”:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="d550" class="ne ma iq mz b gy nf ng l nh ni">&lt;% ruby code here will run but not render %&gt; .</span></pre><p id="ab93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">冰淇淋甜筒是用来运行ruby代码的，不显示任何东西——在里面你可以运行任何ruby逻辑。您可以有一个类似这样的<code class="fe mw mx my mz b">if else</code>语句:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="f3d9" class="ne ma iq mz b gy nf ng l nh ni">&lt;% if some_variable &gt;= 5 %&gt;<br/>  &lt;p&gt;Here’s your conditional p tag&lt;/p&gt;<br/>&lt;% end %&gt;</span></pre><p id="8a3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想将标记的内容生成到HTML中，可以使用squids:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="ea5b" class="ne ma iq mz b gy nf ng l nh ni">my_h1_text = "Hello World!"</span><span id="66d5" class="ne ma iq mz b gy nj ng l nh ni">&lt;h1&gt;&lt;%= my_h1_text %&gt;&lt;/h1&gt;</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="faa3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">JSX有什么不同？</h1><p id="3316" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">JSX和ERB的相似之处在于，它们都允许使用非HTML语言来呈现HTML文件中的内容。就像ERB让你把Ruby代码插入HTML一样，JSX也让你把普通的JavaScript代码插入JSX，尽管有一些不同。除此之外，这两种语言几乎在每个方面都不同。要正确地学习使用JSX，还有很多东西需要了解，所以我不会在这里做一个完整的教学演示。相反，我将关注JSX与ERB和其他模板语言的重要区别，以帮助您在开始时了解您正在使用什么。</p><p id="325b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，JSX看起来像什么？以下是片段:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="a588" class="ne ma iq mz b gy nf ng l nh ni">const titleText = “Here’s your Main Title!”</span><span id="cd8b" class="ne ma iq mz b gy nj ng l nh ni">const mainTitle = &lt;h1 <em class="nk">className</em>=”main-title”&gt;{ titleText }&lt;/h1&gt;</span></pre><p id="b7b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">乍一看，这看起来几乎像是HTML中加入了一点Javascript。您可能会推断方括号<code class="fe mw mx my mz b">{}</code>的使用方式类似于squids在ERB的使用方式，允许我们将Javascript插入到我们正在创建的元素中。</p><p id="f3e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不过有一点我们马上就能发现——使用了<code class="fe mw mx my mz b">className</code>而不是<code class="fe mw mx my mz b">class</code>。这不是HTML，这是JSX。这是第一个迹象，即使在花括号<code class="fe mw mx my mz b">{ titleText }</code>中的Javascript产生之后，我们也没有直接将HTML字符串保存到变量中。</p><p id="059b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在页面上，上面的内容呈现为:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="de84" class="ne ma iq mz b gy nf ng l nh ni">&lt;h1 <em class="nk">class</em>=”main-title”&gt;Here’s Your Main Title!&lt;/h1&gt;</span></pre><p id="ed2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是编译器如何知道HTML外观部分和JavaScript部分之间的区别呢？没有squids来描述应该将<code class="fe mw mx my mz b">className</code>解释和呈现为<code class="fe mw mx my mz b">class=‘main-title’</code>。这是因为这些都不会被解读为HTML。这是因为JSX告诉Javascript创建一个元素，它看起来可能与您最初键入的内容相似，但已经通过JavaScript生成为一个对象，就像这样:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="7c2f" class="ne ma iq mz b gy nf ng l nh ni">React.createElement(“h1”, {class: “main-title}, “Here’s Your Main Title!”)</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3bcf" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">有什么事是我能对ERB做却不能对JSX做的吗？</h1><p id="43f2" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在上面的ERB例子中，我使用了一个<code class="fe mw mx my mz b">if</code>语句来说明ERB的功能。如果使用不当，这种操作可能会破坏您的JSX代码，因为React将JSX转换为JS的方式。</p><p id="2ca7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们试图包含一个If语句来给h1标签一个条件类，这是行不通的:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="9fa7" class="ne ma iq mz b gy nf ng l nh ni">const titleText = “Here’s your Main Title!”</span><span id="aa26" class="ne ma iq mz b gy nj ng l nh ni">let bool = true</span><span id="9648" class="ne ma iq mz b gy nj ng l nh ni">&lt;h1 <em class="nk">class</em>= { <br/>  <em class="nk">if</em> <em class="nk">(bool)</em> {<br/>    <em class="nk">“main-title”<br/>  }</em> <em class="nk">else</em> <em class="nk">{<br/>    “another-title”<br/>  }<br/>}</em>&gt;{ titleText }&lt;/h1&gt;</span></pre><p id="d98b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有两种方法可以解决这个问题。一种方法是使用三元表达式:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="1635" class="ne ma iq mz b gy nf ng l nh ni">&lt;h1 <em class="nk">class</em>= { <em class="nk">bool</em> <em class="nk">?</em> <em class="nk">“main-title”</em> <em class="nk">:</em> <em class="nk">“another-title”</em> <em class="nk">}</em>&gt;{ titleText }&lt;/h1&gt;</span></pre><p id="4a0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还可以在其他地方执行条件逻辑，并将其输出保存到一个变量中，然后将该变量插入到花括号中:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="2f23" class="ne ma iq mz b gy nf ng l nh ni">let bool = true</span><span id="a435" class="ne ma iq mz b gy nj ng l nh ni">const ourTitle;</span><span id="0be6" class="ne ma iq mz b gy nj ng l nh ni">if (bool) {<br/>  ourTitle = “main-title” ;<br/>} else {<br/>  ourTitle = “another-title” ;<br/>}</span><span id="cb98" class="ne ma iq mz b gy nj ng l nh ni">const mainTitle = &lt;h1 <em class="nk">class</em>= { <em class="nk">ourTitle</em> <em class="nk">}</em> <em class="nk">}</em>&gt;{ titleText }&lt;/h1&gt;</span></pre><p id="c72b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果逻辑变得太复杂而无法包含在三元表达式中，那么在其他地方执行这种条件逻辑就变得更加必要。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="df35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你正在寻找下一个阅读JSX和React的地方，从源头开始——JSX上的<a class="ae kv" href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener ugc nofollow" target="_blank"> React文档。</a></p></div></div>    
</body>
</html>