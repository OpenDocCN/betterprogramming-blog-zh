<html>
<head>
<title>3 Useful Python f-string Tricks You Probably Don’t Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能不知道的3个有用的Python f-string技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-useful-python-f-string-tricks-you-probably-dont-know-f908f7ed6cf5?source=collection_archive---------2-----------------------#2021-07-06">https://betterprogramming.pub/3-useful-python-f-string-tricks-you-probably-dont-know-f908f7ed6cf5?source=collection_archive---------2-----------------------#2021-07-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="633b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于Python的格式化字符串(f-string)你需要知道的事情</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e09ce9f2bdcdbdc0399680d1ff6a53c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jVxOqqkPhDsiYD8b"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">凯文·Ku在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d489" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python开发人员使用<code class="fe lv lw lx ly b">%</code>操作符在Python中执行字符串格式化的日子已经一去不复返了。</p><p id="3d3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">后来随着Python 3.0的引入，对运算符<code class="fe lv lw lx ly b">%</code>的普遍使用逐渐被对字符串对象调用<code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.w3schools.com/python/ref_string_format.asp" rel="noopener ugc nofollow" target="_blank">.format()</a></code>方法所取代。</p><p id="4072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快进到Python 3.6及更高版本:<a class="ae ky" href="https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals" rel="noopener ugc nofollow" target="_blank"> f-string </a>是作为一种在字符串常量中嵌入Python表达式的新方法而引入的。今天，许多人已经接受了这种改变。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/4560061c242a23d7899bd1bb1c5d7c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kkgkA8RkrR2PzuvoDYC7pw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Python中字符串格式的简要概述。(制造使用:<a class="ae ky" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">https://carbon.now.sh/</a>)</p></figure><p id="b278" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于不熟悉这个的人来说，在Python中使用f-string超级简单。只需在字符串前加上<code class="fe lv lw lx ly b">f</code>或<code class="fe lv lw lx ly b">F</code>，然后加上单引号、双引号甚至三引号，就可以创建字符串，例如<code class="fe lv lw lx ly b">f"Hello, Python!"</code>。</p><p id="3d3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然大多数人可能已经熟悉Python中的f-string格式，但今天我将展示一些在Python 3.8+中使用f-string的鲜为人知的技巧。</p><p id="ce9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">涵盖的主题:</p><ul class=""><li id="2eff" class="ma mb it lb b lc ld lf lg li mc lm md lq me lu mf mg mh mi bi translated">使用f字符串进行更好的调试</li><li id="6caa" class="ma mb it lb b lc mj lf mk li ml lm mm lq mn lu mf mg mh mi bi translated">格式化<code class="fe lv lw lx ly b">float</code>小数位、货币、<code class="fe lv lw lx ly b">datetime</code>对象，并用f字符串填充</li><li id="5fe2" class="ma mb it lb b lc mj lf mk li ml lm mm lq mn lu mf mg mh mi bi translated">使用f字符串进行转换(ASCII和<code class="fe lv lw lx ly b">repr()</code>)</li></ul><p id="3cb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧，好吗？</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="ec1f" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">1.用于调试的f字符串</h1><p id="0e87" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">作为开发人员，我们经常发现自己使用<code class="fe lv lw lx ly b">print</code>语句来调试我们的代码，仅仅是因为它们易于添加。</p><p id="cc67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很有可能，我们会这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个很好的方法来忘记哪个值属于哪个变量。</p></figure><p id="c221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是打印在我们终端上的输出:</p><pre class="kj kk kl km gt nu ly nv nw aw nx bi"><span id="8e34" class="ny mw it ly b gy nz oa l ob oc">🐊<br/>🐼<br/>🐓</span></pre><p id="51ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">老实说，使用上面的代码进行打印没有任何问题。</p><p id="9f51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，当盯着一个满是其他调试器日志的终端时，人们可能很容易忘记输出变量的顺序。在这样的用例中，使用<code class="fe lv lw lx ly b">print</code>语句进行调试很快就会变成大海捞针。在我们的案例中:</p><pre class="kj kk kl km gt nu ly nv nw aw nx bi"><span id="825b" class="ny mw it ly b gy nz oa l ob oc">🐊 <br/>🐼 -- Sorry, which variable does this belong to again?<br/>🐓</span></pre><h2 id="f2db" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">调试期间打印变量的更好方法</h2><p id="8c75" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">为了解决这个问题，我们可以做<code class="fe lv lw lx ly b">print(f’{variable_name=}’)</code>来代替。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用f-string调试打印的更清晰的方法！</p></figure><p id="d742" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管我们必须用f-string语法包装我们的变量，但一切都清晰得多。现在，我们将永远不会在调试过程中丢失打印变量的顺序。</p><p id="54d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，以这种方式使用f-string可以保留空白，当我们在调试过程中查看令人困惑的终端日志时，这是很有帮助的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">f字符串保留空白。</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="d9db" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">2.字符串格式</h1><p id="fedf" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">除了使用f-string进行调试之外，我最喜欢的f-string特性是它的灵活性，它允许我们轻松地格式化我们的字符串。</p><p id="15db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与普通的旧字符串连接相比，使用f-string可以更加灵活地读取、写入和维护字符串的输出。</p><p id="23c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们处理<code class="fe lv lw lx ly b">float</code>类型变量时，可以演示最简单的例子。</p><h2 id="d2d5" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">如何将浮点数格式化为N位小数</h2><p id="1bf4" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">例如，假设我们需要打印一个有两位小数的<code class="fe lv lw lx ly b">float</code>类型的变量，比如把<code class="fe lv lw lx ly b">3.1425123</code>写成<code class="fe lv lw lx ly b">3.14</code>。这并不是不常见的用例，对吧？</p><p id="49b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，人们可能会想到使用Python内置的<code class="fe lv lw lx ly b">round</code>方法来实现这一点。或者，你在考虑使用“更老的”<code class="fe lv lw lx ly b">str.format</code>方式来做这件事，比如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将浮点数限制到两位小数的方法。</p></figure><p id="1862" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们可以用f弦来代替呢？让我们再试一次！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在这个场景中使用f弦比<code class="fe lv lw lx ly b">str.format()</code>要容易得多</p></figure><h2 id="5594" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">把浮动变成一个漂亮的货币价值</h2><p id="1bcf" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">当你处理货币时，你需要准备尽可能用户友好的字符串。例如，将我们的货币值<code class="fe lv lw lx ly b">3142671.76</code>格式化为<code class="fe lv lw lx ly b">$3,142,671.76</code>可能更好。</p><p id="f6ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，使用f-string将我们的<code class="fe lv lw lx ly b">float</code>值格式化为货币非常方便。我们可以通过使用<code class="fe lv lw lx ly b">,:2f</code>轻松做到这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将类型变量格式化为漂亮的货币。简单！</p></figure><h2 id="3040" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">没有<code class="fe lv lw lx ly b">strftime</code>的漂亮格式<code class="fe lv lw lx ly b">datetime</code></h2><p id="8da4" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">除了使用它来格式化<code class="fe lv lw lx ly b">float</code>类型变量，我们甚至可以使用f字符串和<code class="fe lv lw lx ly b">datetime</code>类型变量。</p><p id="98f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当把一个<code class="fe lv lw lx ly b">datetime</code>对象格式化成一种更人性化的方式时，比如<code class="fe lv lw lx ly b">05-July-2021</code>，最常见的方式是使用<code class="fe lv lw lx ly b">datetime</code>对象的标准内置<code class="fe lv lw lx ly b">strftime </code>方法，比如<code class="fe lv lw lx ly b">datetime_var.strftime(‘%d-%b-%y’)</code>。</p><p id="546c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，我们可以使用f-string轻松格式化我们的<code class="fe lv lw lx ly b">datetime</code>变量。这里有一个例子来说明我的意思:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用f字符串代替<code class="fe lv lw lx ly b">strftime.</code>格式化<code class="fe lv lw lx ly b">datetime</code>变量</p></figure><h2 id="42ae" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">用前导零或空格填充您的<code class="fe lv lw lx ly b">int</code>变量</h2><p id="c283" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">根据你所做的工作，当你显示或使用一个字符串时，你可能需要在前面填充你的整数。</p><p id="33b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">f-string不需要编写自定义函数来填充整数，而是允许您毫不费力地填充整数。要用零填充，只需这样做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用前导零填充整型变量！</p></figure><p id="90a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要用前导空格填充整数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用前导空格填充整型变量！</p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="6661" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">转换</h1><p id="bddb" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在本文的最后一部分，我将向您展示一些使用f-string进行转换的简短示例。当您在f字符串中使用感叹号语法<code class="fe lv lw lx ly b">!</code>，后跟您的变量时，它将对该变量执行额外的转换。</p><h2 id="c3f1" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">将字符串转换为ASCII表示形式</h2><p id="1775" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">例如，您可以用<code class="fe lv lw lx ly b">f’{your_variable!a}’</code>轻松地打印出字符串的<a class="ae ky" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> ASCII </a>表示，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示您的表情符号的ASCII表示。</p></figure><h2 id="1cac" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated">带f弦的<code class="fe lv lw lx ly b">repr()</code>备选方案</h2><p id="04e7" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">最后，f-string中的<code class="fe lv lw lx ly b">!</code>语法的另一个好的用途是显示包含我们对象的可打印表示的字符串，就像在Python中使用<code class="fe lv lw lx ly b"><a class="ae ky" href="https://www.programiz.com/python-programming/methods/built-in/repr" rel="noopener ugc nofollow" target="_blank">repr()</a></code>方法一样。</p><p id="0bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用<code class="fe lv lw lx ly b">!r</code>代替<code class="fe lv lw lx ly b">repr()</code></p></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="b540" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">结束语</h1><p id="aed3" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">自Python 3.6时代以来，f-string一直是Python中格式化字符串的一种令人惊叹的方式。在Python中使用f-string非常容易，自从它们被引入以来，我一直在使用它们。</p><p id="dae9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">f-string的灵活性允许我们在string对象中包含表达式、条件甚至格式，它无疑是简单而强大的。</p><p id="5b89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我个人最喜欢的是使用f-string来格式化<code class="fe lv lw lx ly b">datetime</code>对象以及格式化任何货币值。</p><p id="2a1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">老实说，看到Python这些年来的发展，逐渐让我们的开发者体验越来越好，我兴奋不已。我希望你能从这篇文章中学到很多，并在工作中把这些技巧应用到你的兼职项目或代码库中。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="ecc4" class="ny mw it bd mx od oe dn nb of og dp nf li oh oi nh lm oj ok nj lq ol om nl on bi translated"><a class="ae ky" href="https://jerrynsh.com/3-useful-python-f-string-tricks-you-probably-dont-know/" rel="noopener ugc nofollow" target="_blank">最初发表于jerrynsh.com</a></h2><div class="oo op gp gr oq or"><a rel="noopener  ugc nofollow" target="_blank" href="/tuples-vs-lists-vs-sets-in-python-3dff8a7b1f02"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">Python中的元组、列表和集合</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">你可能一直都用错了</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">better编程. pub</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div><div class="oo op gp gr oq or"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-write-clean-code-in-python-5d67746133f2"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">如何用Python写干净的代码</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">使用Python示例编写干净代码的3个技巧</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">better编程. pub</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf ks or"/></div></div></a></div></div></div>    
</body>
</html>