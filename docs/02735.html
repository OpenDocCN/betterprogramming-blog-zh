<html>
<head>
<title>Automate Your Development With Fastlane</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用浪子自动化您的开发</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/automate-your-development-with-fastlane-247221e6c0c5?source=collection_archive---------14-----------------------#2019-12-20">https://betterprogramming.pub/automate-your-development-with-fastlane-247221e6c0c5?source=collection_archive---------14-----------------------#2019-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e1cb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Android开发过程中实现更快的反馈循环</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cd985457f81b31e855cb8ccd4510d014.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lAsg0Sba9XkDwYgWWqz0Q.png"/></div></div></figure><p id="e2fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将讨论fastlane如何在提出合并请求之前帮助自动化您的开发验证。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="02e9" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">在持续集成中发展</h1><p id="cbab" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">构建软件应用程序是一项艰巨的任务。它需要同行的计划、测试和评审。随着应用程序的增长，维护应用程序所需的工作量也会增加。因此，在开发周期的后期，添加新特性或确保代码库没有错误开始变得更加昂贵。为了尽早发现问题，软件开发人员遵循持续集成的实践来大规模构建软件应用程序。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="6664" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">持续集成的构建模块</h1><p id="ba18" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">源代码控制——能够跟踪、管理多个开发人员的源代码，并将其合并到代码库的主版本中。</p><p id="a3c3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">自动化测试——有信心确保新的变化不会破坏现有的特性，也不会在应用程序中引入新的bug。</p><p id="fdcd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">管道验证—验证应用程序是否可以构建、生成可执行文件、符合质量标准并且不包含任何lint问题。</p><p id="6d22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在理想的开发环境中，向存储库提交变更涉及到一个打开合并请求的过程，然后触发一个CI管道来验证所有指定的标准。可以使用的配置项类型有GitLab CI/CD、Travis CI、CircleCI、GitHub Actions等等。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="beab" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">快速构建，经常构建</h1><p id="01d2" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在开发软件时，使用CI有很多好处。它不仅可以在过程的早期发现问题，还可以通过一系列自动化任务加速验证过程。然而，仅仅依靠CI渠道来验证他们的工作的团队会发现他们自己处于一种没有生产力的状态。</p><p id="ea25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用CI服务器通常是一个资源密集型过程。需要启动管道运行程序，并下载所需的依赖项来执行手头的任务。此外，如果管道在后期出现故障，开发人员将需要进行修复并重新运行整个管道。</p><p id="f1fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">相反，开发人员应该被授权在他们的机器上本地执行他们的CI管道，以确保他们的工作在提交合并请求之前得到验证。下面是我最喜欢的Gene Kim、Jez Humble、Patrick Debois和John Willis的《DevOps手册》中的一段话。</p><blockquote class="mr ms mt"><p id="d764" class="kr ks mu kt b ku kv jr kw kx ky ju kz mv lb lc ld mw lf lg lh mx lj lk ll lm ij bi translated">在DevOps ideal中，开发人员会收到快速、持续的工作反馈，这使他们能够快速、独立地实现、集成和验证他们的代码，并将代码部署到生产环境中。</p></blockquote></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="ea4a" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">浪子</h1><p id="7ff4" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">构建本地CI管道可以通过fastlane简单实现，fast lane是一个开源工具，可以自动完成移动应用程序的繁琐构建和发布任务。虽然fastlane在自动化屏幕截图、测试版部署、应用商店部署和代码签名方面很受欢迎，但它也可以帮助自动化本地管道中所需的任务。</p><p id="83bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦在项目中安装并初始化了fastlane，就可以像下面这样轻松地执行命令。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="6769" class="nd lv iq mz b gy ne nf l ng nh">fastlane tests</span></pre><p id="2b65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">执行与在<code class="fe ni nj nk mz b">fastlane/Fastfile</code>中定义的<code class="fe ni nj nk mz b">test</code>通道相关。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="241e" class="nd lv iq mz b gy ne nf l ng nh">lane :tests do   <br/>  gradle(task: "test") <br/>end</span></pre><p id="fb8e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">了解如何<a class="ae nl" href="https://docs.fastlane.tools/" rel="noopener ugc nofollow" target="_blank">开始</a>使用快车道。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="b4fa" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">更快的反馈</h1><p id="ccb8" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在本地执行CI管道赋予了开发人员他们所构建的东西的所有权。它以更快的速度产生反馈，并为在更短的时间内调试问题提供了可能性。有了fastlane，团队可以像在CI服务器上一样使用相同的Fastfile。</p><h2 id="665a" class="nd lv iq bd lw nm nn dn ma no np dp me la nq nr mg le ns nt mi li nu nv mk nw bi translated">小巷</h2><p id="7aa0" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在这个快速文件中，定义了五个不同的通道，它们对应于一个特定的作业。例如，<code class="fe ni nj nk mz b">lint</code>通道验证源代码中没有lint问题。lint通道的执行可以在下面找到。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="f4fd" class="nd lv iq mz b gy ne nf l ng nh">fastlane lint</span></pre><p id="ce16" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">预期结果:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="100a" class="nd lv iq mz b gy ne nf l ng nh">[12:33:02]: -----------------------------------------</span><span id="f134" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: --- Step: Switch to android lint lane ---</span><span id="46b4" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: -----------------------------------------</span><span id="b015" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: Cruising over to lane 'android lint' 🚖</span><span id="bd97" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: --------------------</span><span id="9235" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: --- Step: gradle ---</span><span id="dc03" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: --------------------</span><span id="f79a" class="nd lv iq mz b gy nx nf l ng nh">[12:33:02]: $ gradlew lintDebug -p .</span><span id="ecdb" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:preBuild UP-TO-DATE</span><span id="c167" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:preDebugBuild UP-TO-DATE</span><span id="8936" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:compileDebugAidl NO-SOURCE</span><span id="0bac" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:checkDebugManifest UP-TO-DATE</span><span id="4058" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:compileDebugRenderscript NO-SOURCE</span><span id="0842" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:generateDebugBuildConfig UP-TO-DATE</span><span id="2d1c" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:mainApkListPersistenceDebug UP-TO-DATE</span><span id="01bf" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:generateDebugResValues UP-TO-DATE</span><span id="3d1b" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:generateDebugResources UP-TO-DATE</span><span id="4993" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:createDebugCompatibleScreenManifests UP-TO-DATE</span><span id="c45b" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:mergeDebugResources UP-TO-DATE</span><span id="f10f" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:processDebugManifest UP-TO-DATE</span><span id="0a98" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:processDebugResources UP-TO-DATE</span><span id="4976" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:compileDebugKotlin UP-TO-DATE</span><span id="2a87" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:javaPreCompileDebug UP-TO-DATE</span><span id="8749" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:compileDebugJavaWithJavac UP-TO-DATE</span><span id="1faf" class="nd lv iq mz b gy nx nf l ng nh">[12:33:03]: ▸ &gt; Task :app:prepareLintJar UP-TO-DATE</span><span id="c863" class="nd lv iq mz b gy nx nf l ng nh">[12:33:06]: ▸ &gt; Task :app:lintDebug</span><span id="5d87" class="nd lv iq mz b gy nx nf l ng nh">[12:33:06]: ▸ Wrote HTML report to file:///.../app/build/reports/lint-results-debug.html</span><span id="f77c" class="nd lv iq mz b gy nx nf l ng nh">[12:33:06]: ▸ Wrote XML report to file:///.../app/build/reports/lint-results-debug.xml</span><span id="9789" class="nd lv iq mz b gy nx nf l ng nh">[12:33:06]: ▸ BUILD SUCCESSFUL in 3s</span><span id="9949" class="nd lv iq mz b gy nx nf l ng nh">[12:33:06]: ▸ 13 actionable tasks: 1 executed, 12 up-to-date</span></pre><h2 id="0a67" class="nd lv iq bd lw nm nn dn ma no np dp me la nq nr mg le ns nt mi li nu nv mk nw bi translated">管道</h2><p id="44b0" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">通道可作为独立作业或另一个通道的一部分执行。在本例中，管道通道由五个不同的通道组成。这些通道执行代码库的编译，运行lint分析，组装apk，执行单元测试，并在仿真器上执行工具测试。为方便起见，开发人员只需执行如下所示的一个命令。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="d2bb" class="nd lv iq mz b gy ne nf l ng nh">fastlane lint</span></pre><p id="ea67" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面显示了管道的Fastfile模板。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/3bd4c57b1db63d1b17386764b8572965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_YFNKEAVS1UfujzsQvs9Nw.png"/></div></div></figure><p id="f110" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可以在GitHub上找到源代码的副本。</p><div class="nz oa gp gr ob oc"><a href="https://github.com/asadmansr/android-fastlane" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">asadmansr/Android-快车道</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq kp oc"/></div></div></a></div><p id="2a17" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，管道的执行将产生如图所示的结果摘要。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cd985457f81b31e855cb8ccd4510d014.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lAsg0Sba9XkDwYgWWqz0Q.png"/></div></div></figure><p id="5503" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">谢谢大家！</p></div></div>    
</body>
</html>