<html>
<head>
<title>Building a Robot Friend Using HTML, CSS, and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用HTML、CSS和JavaScript构建一个机器人朋友</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-a-robot-friend-from-a-mcdonalds-toy-b023589fd031?source=collection_archive---------1-----------------------#2021-12-04">https://betterprogramming.pub/building-a-robot-friend-from-a-mcdonalds-toy-b023589fd031?source=collection_archive---------1-----------------------#2021-12-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a8c0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单的麦当劳玩具如何成为儿童的一个简单的网络开发项目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f29e1abe4515a855835f7379b7ea7c7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MEe0QNREqzWhURBw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><blockquote class="ky kz la"><p id="8eb3" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><em class="it">注意:你不需要麦当劳的玩具来构建这个游戏并玩它，但是拥有这个玩具会给这个项目增加一个额外的有趣因素:)</em></p></blockquote><h1 id="fbc0" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">玩具</h1><p id="c3cc" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">前几天，我的妻子在麦当劳给我们的孩子买了快乐套餐，我讨厌承认这一点，但最喜欢这个玩具的人是我。</p><p id="f3b7" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">这是一个简单的玩具。一个很傻的东西:一个带笑脸的机器人模样的东西(我甚至不知道宣传的是什么电影/游戏)，一边有一个旋转手柄，底部有一个洞:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/5d4613881025fa77835ce0d4e0446cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p7IuLt8J6q7cS2Ks.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一开始我以为是个夜光玩具…其实不是。</p></figure><p id="bc7e" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">这个玩具还有更多的功能:它可以与麦当劳的应用程序“互动”。于是，我下载了这款应用，并进行测试。功能很简单:</p><ol class=""><li id="b434" class="mz na it le b lf lg li lj ms nb mu nc mw nd lx ne nf ng nh bi translated">将玩具放在手机顶部(特定位置)</li><li id="70c2" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ne nf ng nh bi translated">调暗房间的灯光</li><li id="6462" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ne nf ng nh bi translated">在弹出的选项中选择</li><li id="7700" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ne nf ng nh bi translated">机器人“活了过来”,所以你可以和它互动。</li></ol><p id="bb74" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">当然，机器人没有活过来。在现实中，玩具是半透明的，底部有一个洞和一些镜子(？)内部，因此通过正确使用灯光并将玩具放在手机上的特定位置，该应用程序可以将图像反射到玩具的屏幕/脸上。</p><p id="61de" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">我喜欢它。它有一些电子鸡混合了大英雄6的大白氛围。它可爱、巧妙、简单……如此简单，令人遗憾的是，它仅限于餐厅应用程序中的几个广告选项。这个基本想法似乎很容易开发。那么，如果……？</p><h1 id="5d16" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">第一版</h1><p id="cb75" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">我打开浏览器，进入<a class="ae nn" href="https://codepen.io/" rel="noopener ugc nofollow" target="_blank">密码本</a>。我在编辑器上快速输入了四个HTML元素:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="798f" class="nt lz it np b gy nu nv l nw nx">&lt;div class="face"&gt;<br/>  &lt;div class="eye"&gt;&lt;/div&gt;<br/>  &lt;div class="eye"&gt;&lt;/div&gt;<br/>  &lt;div class="mouth"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="73d9" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">然后添加了一些基本的样式。没什么特别的:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="6e80" class="nt lz it np b gy nu nv l nw nx">html, body {<br/>  background: #000;<br/>}<br/><br/>.face {<br/>  position: relative;<br/>  width: 1.25in;<br/>  height: 1.25in;<br/>  overflow: hidden;<br/>  margin: 5vh auto 0 auto;<br/>  background: #fff;<br/>  border-radius: 100% / 30% 30% 60% 60%;<br/>}<br/><br/>.eye {<br/>  position: absolute;<br/>  top: 40%;<br/>  left: 25%;<br/>  width: 15%;<br/>  height: 15%;<br/>  background: black;<br/>  border-radius: 50%;<br/>}<br/><br/>.eye + .eye {<br/>  left: 60%;<br/>}<br/><br/>.mouth {<br/>  position: absolute;<br/>  top: 60%;<br/>  left: 40%;<br/>  width: 20%;<br/>  height: 12%;<br/>  background: black;<br/>  border-radius: 0 0 1in 1in;<br/>}</span></pre><blockquote class="ky kz la"><p id="79db" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><em class="it">注:我选了</em> <code class="fe ny nz oa np b"><a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units" rel="noopener ugc nofollow" target="_blank"><em class="it">in</em></a></code> <a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units" rel="noopener ugc nofollow" target="_blank"> <em class="it">单位(英寸)</em> </a> <em class="it">，所以对所有设备都是绝对的。我不得不发挥一点实际价值:我开始与1英寸，但它似乎有点少；我移到了1.5英寸，但那太大了。最后，我满足于1.25英寸，但它可能会更小一点，更适合这个特殊的玩具。</em></p></blockquote><p id="567e" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">总共花了5-10分钟。它不是交互式的，也不是动画，但结果看起来(在玩具上)与应用程序上的结果相似:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/7aa1e3f48dfb9c38d9efb5d006ae9463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6CNBcLxm-TBrzkcE.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">你好啊。</p></figure><h1 id="f027" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">第一次故障和纠正</h1><p id="3606" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">谁会说这么简单的东西会有问题呢？但是它发生了！有几件事从一开始就引起了我的注意:</p><ul class=""><li id="1025" class="mz na it le b lf lg li lj ms nb mu nc mw nd lx ob nf ng nh bi translated">照片被翻转了</li><li id="37e6" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ob nf ng nh bi translated">该图在手机上缩放效果不佳</li><li id="4006" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ob nf ng nh bi translated">浏览器栏太亮了</li></ul><p id="5fb7" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">我认为第一个是因为玩具内部使用了镜子，这将使屏幕上的左侧成为玩具上的右侧，反之亦然。虽然在显示人脸时这不会是一个大问题，但如果我想显示文本或图片，这可能会有问题。</p><p id="096d" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">解决方案是通过使用值为-1 的<code class="fe ny nz oa np b"><a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scaleX()" rel="noopener ugc nofollow" target="_blank">scaleX</a></code> <a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scaleX()" rel="noopener ugc nofollow" target="_blank">变换来翻转面部:</a></p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="20f2" class="nt lz it np b gy nu nv l nw nx">.face {<br/>  ...<br/>  transform: scaleX(-1)<br/>}</span></pre><p id="9d15" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">在头部指定一个视口宽度解决了移动设备上的升级问题。使用<code class="fe ny nz oa np b"><a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag" rel="noopener ugc nofollow" target="_blank">viewport</a></code> <a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag" rel="noopener ugc nofollow" target="_blank">元标记</a>很容易:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="66e8" class="nt lz it np b gy nu nv l nw nx">&lt;meta name="viewport" <br/>      content="width=device-width, initial-scale=1" /&gt;</span></pre><p id="fb07" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">最后，浏览器顶栏太亮了。这通常不是问题，但考虑到玩具需要调暗灯光才能看得更清楚，这是一个问题，因为它可能会分散注意力。</p><p id="199c" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">幸运的是，可以用<code class="fe ny nz oa np b"><a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name/theme-color" rel="noopener ugc nofollow" target="_blank">theme-color</a></code> <a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name/theme-color" rel="noopener ugc nofollow" target="_blank">元标记</a>来指定该条的颜色:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="59d3" class="nt lz it np b gy nu nv l nw nx">&lt;meta name="theme-color" content="#000" /&gt;</span></pre><p id="efb1" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">浏览器的顶栏现在是黑色的(与主体背景颜色相同)，使其与页面更加流畅，并消除了恼人的差异。</p><h1 id="66c4" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">第一个动画</h1><p id="f9b6" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">在那一点上，机器人太简单了。动画会使它变得可爱和富有表现力，而CSS就是这份工作的语言！</p><p id="bd9f" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">我一开始做了两个动画:眨眼和嘴巴说话。</p><p id="5cbc" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">有许多方法可以使眼睛睁开和闭上(眨眼或眨眼)。一个简单的方法是将不透明度设置为0，然后再设置为1。这样，眼睛会消失一小段时间，然后又回来，这就给人以眨眼的印象。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="47d3" class="nt lz it np b gy nu nv l nw nx">@keyframes blink {<br/>  0%, 5%, 100% { opacity: 1; }<br/>  2% { opacity: 0; }<br/>}</span></pre><p id="2af1" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">这是一个基本的动画，也可以通过将yes的高度变为零，然后恢复到原始大小来完成(但我不太喜欢这种方法，因为在我看来它看起来很假)。一个更好的方法可能是动画剪辑路径。只要点数匹配，浏览器就允许剪辑路径的过渡和动画。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f8b5" class="nt lz it np b gy nu nv l nw nx">@keyframes blink {<br/>  0%, 10%, 100% { <br/>    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);<br/>  }<br/>  5% { <br/>    clip-path: polygon(0% 50%, 100% 50%, 100% 50%, 0% 50%);<br/>  }<br/>}</span></pre><p id="603d" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">我没有选择剪辑路径选项，因为如果我想稍后制作眼睛的动画来展示不同的表情，那看起来会很奇怪。</p><p id="3816" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">还有一种选择是将眼睛的高度改为0，然后恢复到正常大小。然而，那会给人一种眨眼的感觉(这是我最终选择的，尽管它可能不是最好的选择。)</p><p id="c33a" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">然后，我还通过制作嘴巴张开和闭合的动画来模拟玩具说话。我把嘴的大小改为0，然后恢复到原来的大小:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="a18e" class="nt lz it np b gy nu nv l nw nx">@keyframes talk {<br/>  0%, 100% { height: 12%; }<br/>  50% { height: 0%; }<br/>}<br/><br/>.mouth {<br/>  ...<br/>  animation: talk 0.5s infinite;<br/>}</span></pre><h1 id="d389" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">让玩具说话</h1><p id="f863" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">到目前为止，一切都是HTML和CSS。但是使用JavaScript和<a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank">语音合成API </a>，这个玩具将能够说话。我已经做过类似的事情<a class="ae nn" href="https://dev.to/alvaromontoro/using-js-speech-recognition-to-build-a-virtual-assistant-1957" rel="noopener ugc nofollow" target="_blank">创建一个教学助理</a>或者一个<a class="ae nn" href="https://www.youtube.com/watch?v=trGQYj1C3lc" rel="noopener ugc nofollow" target="_blank">支持语音的搜索框</a>，所以我有一些经验。</p><p id="8dfe" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">我添加了这个<code class="fe ny nz oa np b">talk</code>函数，它接受一个字符串，浏览器会读取它:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="0b78" class="nt lz it np b gy nu nv l nw nx">function talk(sentence, language = "en") {<br/>  let speech = new SpeechSynthesisUtterance();<br/>  speech.text = sentence;<br/>  speech.lang = language;<br/>  window.speechSynthesis.speak(speech);<br/>}</span></pre><p id="5da2" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">我添加了一个可选的<code class="fe ny nz oa np b">language</code>参数，如果我想在未来使用玩具说西班牙语或另一种语言(多语言玩具和游戏的胜利！).</p><p id="e92e" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">需要考虑的一件重要事情是，语音合成<code class="fe ny nz oa np b">speak()</code>需要用户激活才能工作(至少在Chrome中是这样)。这是一个安全特性，因为网站和开发者正在滥用它，成为一个可用性问题。</p><p id="3a90" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">这意味着用户/玩家必须与游戏互动才能让机器人说话。如果我想添加一个问候语，这可能是个问题(有很多方法可以绕过它)，但对于游戏的其余部分来说，这应该不是问题，因为它需要用户交互。</p><p id="74cc" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">还有一个细节:有一个动画可以让机器人的嘴动起来。只在它说话的时候应用不是很棒吗？这其实也很简单！我将动画添加到<code class="fe ny nz oa np b">.talking</code>类中，并分别在演讲开始/结束时添加/删除该类。以下是对<code class="fe ny nz oa np b">talk</code>功能的更改:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="c5de" class="nt lz it np b gy nu nv l nw nx">function talk(sentence, language = "en-US") {<br/>  let speech = new SpeechSynthesisUtterance();<br/>  speech.text = sentence;<br/>  speech.lang = language;<br/>  // make the mouth move when speech starts<br/>  document.querySelector(".mouth").classList.add("talking");<br/>  // stop the mouth then speech is over<br/>  speech.onend = function() {<br/>    document.querySelector(".mouth").classList.remove("talking");<br/>  }<br/>  window.speechSynthesis.speak(speech);<br/>}</span></pre><h1 id="89a0" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">基本游戏</h1><p id="5fde" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">机器人在页面的顶部，但它没有做太多。所以是时候添加一些选项了！第一件事是包括一个供玩家互动的菜单。菜单将会在页面的底部，为玩具和菜单留出足够的空间，以免相互混淆。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="3b34" class="nt lz it np b gy nu nv l nw nx">&lt;div id="menu" class="to-bottom"&gt;<br/>  &lt;button&gt;Jokes&lt;/button&gt;<br/>&lt;/div&gt;</span></pre></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><pre class="no np nq nr aw ns bi"><span id="b736" class="nt lz it np b gy oj ok ol om on nv l nw nx">.to-bottom {<br/>  position: fixed;<br/>  left: 0;<br/>  bottom: 5vh;<br/>  width: 100%;<br/>  display: flex;<br/>  align-items: flex-end;<br/>  justify-content: center;<br/>}<br/><br/>button {<br/>  margin: 0.5rem;<br/>  min-width: 7rem;<br/>  height: 3.5rem;<br/>  border: 0;<br/>  border-radius: 0.2rem 0.2rem 0.4rem 0.4rem;<br/>  background: linear-gradient(#dde, #bbd);<br/>  border-bottom: 0.25rem solid #aab;<br/>  box-shadow: inset 0 0 2px #ddf, inset 0 -1px 2px #ddf;<br/>  color: #247;<br/>  font-size: 1rem;<br/>  text-shadow: 1px 1px 1px #fff;<br/>  box-sizing: content-box;<br/>  transition: border-bottom 0.25s;<br/>  font-family: Helvetica, Arial, sans-serif;<br/>  text-transform: uppercase;<br/>  font-weight: bold;<br/>}<br/><br/>button:active {<br/>  border-bottom: 0;<br/>}</span></pre><p id="f741" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">这个结果看起来有点过时(抱歉，我不是一个好的设计师)，但是它符合我的要求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/b81625b03c934d35999abcb91faa2836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Eq4hrOzVSfwsJtH7.png"/></div></div></figure><p id="131a" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">至于笑话，为了简单起见，我把它们放在一个数组的数组里(对不起，数据结构教授)。然后创建了一个函数，在父数组中随机选取一个元素并读取元素，在元素之间添加一个短暂的停顿(<a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout" rel="noopener ugc nofollow" target="_blank">使用</a> <code class="fe ny nz oa np b"><a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout" rel="noopener ugc nofollow" target="_blank">setTimeout()</a></code> <a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout" rel="noopener ugc nofollow" target="_blank">表示延迟响应</a>)。否则，我将需要一个额外的用户操作来继续阅读)。</p><p id="7211" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">代码如下所示:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="73cd" class="nt lz it np b gy nu nv l nw nx">const jokes = [<br/>  ["Knock, knock", "Art", "R2-D2"],<br/>  ["Knock, knock", "Shy", "Cyborg"],<br/>  ["Knock, knock", "Anne", "Anne droid"],<br/>  ["Why did the robot go to the bank?", "He'd spent all his cache"],<br/>  ["Why did the robot go on holiday?", "To recharge her batteries"],<br/>  ["What music do robots like?", "Heavy metal"],<br/>  ["What do you call an invisible droid?", "C-through-PO"],<br/>  ["What do you call a pirate robot?", "Argh-2D2"],<br/>  ["Why was the robot late for the meeting?", "He took an R2 detour"],<br/>  ["Why did R2D2 walk out of the pop concert?", "He only likes electronic music"],<br/>  ["Why are robots never lonely?", "Because there R2 of them"],<br/>  ["What do you call a frozen droid?", "An ice borg"]<br/>];<br/><br/>function tellJoke() {<br/>  // hide the menu<br/>  hide("menu");<br/>  // pick a random joke<br/>  const jokeIndex = Math.floor(Math.random() * jokes.length);<br/>  const joke = jokes[jokeIndex];<br/>  // read the joke with pauses in between<br/>  joke.map(function(sentence, index) {<br/>    setTimeout(function() { talk(sentence); }, index * 3000);<br/>  });<br/>  // show the menu back again<br/>  setTimeout("show('menu')", (joke.length - 1) * 3000 + 1000);<br/>}</span></pre><p id="7b58" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">你可能已经注意到了，我添加了几个额外的函数:<code class="fe ny nz oa np b">show()</code>和<code class="fe ny nz oa np b">hide()</code>，它们添加和删除了“hidden”类，所以我可以稍后用CSS将它们制作成动画，并从视图框架中删除它们(我想防止用户在按钮上点击两次。)他们的代码对于本教程来说并不重要，但是您可以在CodePen 上的<a class="ae nn" href="https://codepen.io/alvaromontoro/pen/VwWpZjP" rel="noopener ugc nofollow" target="_blank">演示中查看。</a></p><h1 id="3767" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">让游戏更容易上手</h1><p id="ca0f" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">到目前为止，游戏是基本的和可用的。用户点击一个选项，机器人用语音回复。但是当用户失聪时会发生什么呢？他们会错过整个游戏的要点，因为这是所有的发言！</p><p id="0daa" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">解决这个问题的方法是在机器人每次说话时添加字幕。这样，更多的人就能接触到这个游戏。</p><p id="7be9" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">为了做到这一点，我为字幕添加了一个新元素，并将<code class="fe ny nz oa np b">talk</code>功能扩展了一点:在演讲开始时显示字幕，在演讲结束时隐藏字幕(类似于嘴的运动):</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="b4bb" class="nt lz it np b gy nu nv l nw nx">function talk(sentence, language = "en-US") {<br/>  let speech = new SpeechSynthesisUtterance();<br/>  speech.text = sentence;<br/>  speech.lang = language;<br/>  // show subtitles on speech start<br/>  document.querySelector("#subtitles").textContent = sentence;<br/>  document.querySelector(".mouth").classList.add("talking");<br/>  speech.onend = function() {<br/>    // hide subtitles on speech end<br/>    document.querySelector("#subtitles").textContent = "";<br/>    document.querySelector(".mouth").classList.remove("talking");<br/>  }<br/>  window.speechSynthesis.speak(speech);<br/>}</span></pre><h1 id="9b72" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">更多游戏选项</h1><p id="a495" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">扩展游戏很容易:在菜单中添加更多选项和一个处理它们的函数。我确实增加了两个选项:一个是琐事问题(口语)，另一个是旗帜问题(也是琐事，但这次是图像)。</p><p id="b193" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">两者的工作方式大致相同:</p><ul class=""><li id="765e" class="mz na it le b lf lg li lj ms nb mu nc mw nd lx ob nf ng nh bi translated">以文本形式显示问题</li><li id="2877" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ob nf ng nh bi translated">显示四个可能有答案的按钮</li><li id="ba65" class="mz na it le b lf ni li nj ms nk mu nl mw nm lx ob nf ng nh bi translated">选择一个选项后显示结果</li></ul><p id="de1f" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">主要区别在于，旗帜问题将始终具有相同的文本，旗帜将显示在机器人的脸上(作为不同的东西。)但总的来说，这两个选项的功能是相似的，它们共享相同的HTML元素，只是在JavaScript中的交互略有不同。</p><p id="01ac" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">第一部分是添加HTML元素:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="ece4" class="nt lz it np b gy nu nv l nw nx">&lt;div id="trivia" class="to-bottom hidden"&gt;<br/>  &lt;section&gt;<br/>    &lt;h2&gt;&lt;/h2&gt;<br/>    &lt;div class="options"&gt;<br/>      &lt;button onclick="answerTrivia(0)"&gt;&lt;/button&gt;<br/>      &lt;button onclick="answerTrivia(1)"&gt;&lt;/button&gt;<br/>      &lt;button onclick="answerTrivia(2)"&gt;&lt;/button&gt;<br/>      &lt;button onclick="answerTrivia(3)"&gt;&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  &lt;/section&gt;<br/>&lt;/div&gt;</span></pre><p id="f381" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">大部分的样式已经准备好了，但是还需要添加一些额外的规则(完整的例子见<a class="ae nn" href="https://codepen.io/alvaromontoro/full/VwWpZjP" rel="noopener ugc nofollow" target="_blank">完整的演示</a>)。所有的HTML元素都是空的，因为它们填充了问题的值。</p><p id="dfa6" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">为此，我使用了以下JS代码:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="01f0" class="nt lz it np b gy nu nv l nw nx">let correct = -1;<br/>const trivia = [<br/>  {<br/>    question: "Who wrote the Three Laws of Robotics",<br/>    correct: "Isaac Asimov",<br/>    incorrect: ["Charles Darwin", "Albert Einstein", "Jules Verne"]<br/>  },<br/>  {<br/>    question: "What actor starred in the movie I, Robot?",<br/>    correct: "Will Smith",<br/>    incorrect: ["Keanu Reeves", "Johnny Depp", "Jude Law"]<br/>  },<br/>  {<br/>    question: "What actor starred the movie AI?",<br/>    correct: "Jude Law",<br/>    incorrect: ["Will Smith", "Keanu Reeves", "Johnny Depp"]<br/>  },<br/>  {<br/>    question: "What does AI mean?",<br/>    correct: "Artificial Intelligence",<br/>    incorrect: ["Augmented Intelligence", "Australia Island", "Almond Ice-cream"]<br/>  },<br/>];<br/><br/>// ...<br/><br/>function askTrivia() {<br/>  hide("menu");<br/>  document.querySelector("#subtitles").textContent = "";<br/>  const questionIndex = Math.floor(Math.random() * trivia.length);<br/>  const question = trivia[questionIndex];<br/><br/>  // fill in the data<br/>  correct = Math.floor(Math.random() * 4);<br/>  document.querySelector("#trivia h2").textContent = question.question;<br/>  document.querySelector(`#trivia button:nth-child(${correct + 1})`).textContent = question.correct;<br/>  for (let x = 0; x &lt; 3; x++) {<br/>    document.querySelector(`#trivia button:nth-child(${(correct + x + 1) % 4 + 1})`).textContent = question.incorrect[x];<br/>  }<br/><br/>  talk(question.question, false);<br/>  show('trivia');<br/>}<br/><br/>function answerTrivia(num) {<br/>  if (num === correct) {<br/>    talk("Yes! You got it right!")<br/>  } else {<br/>    talk("Oh, no! That wasn't the correct answer")<br/>  }<br/>  document.querySelector("#trivia h2").innerHTML = "";<br/>  document.querySelector(".face").style.background = "";<br/>  hide("trivia");<br/>  show("menu");<br/>}</span></pre><p id="4928" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">不正确答案放在按钮上的方式很不理想。它们的顺序总是一样的！这意味着，如果用户稍微注意一下，他们就可以通过查看答案来找出哪个是正确的。对我来说幸运的是，这是一个给孩子们玩的游戏，所以他们可能不会意识到这个模式…希望如此。</p><p id="9b61" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">标志版本带来了一些可访问性挑战。如果玩家是盲人呢？然后他们就看不到旗子了，这个游戏对他们来说就没有意义了。解决方案是添加一些视觉上隐藏的(但屏幕阅读器可以访问的)描述标志的文本，并放在问题的后面。</p><h1 id="9f63" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">下一步是什么？</h1><p id="56e8" class="pw-post-body-paragraph lb lc it le b lf mq ju lh li mr jx lk ms mt ln lo mu mv lr ls mw mx lv lw lx im bi translated">我用他们的玩具做了一个麦当劳游戏的克隆，花了大约几个小时。(麦当劳，雇佣我吧！:P)它是基本的(并不是说原著要复杂得多)，但是可以很容易地扩展。</p><p id="1d56" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">有一个最初的问题:不是每个人都有玩具可以玩。没有它你仍然可以玩游戏(我需要添加一个选项来撤销角色的翻转)，但是它失去了一些有趣的因素。一个选择是创造我的玩具。我将需要探索它(如果你不能使用它，有一个3D打印机有什么好处:P)</p><p id="59fa" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">另一个很酷的改进游戏的方法是在动作中加入更好的过渡。例如，当它讲一个敲门的笑话时，增加更长的停顿，眼睛带着灿烂的微笑从一边移到另一边，就像在期待着对方的“谁在那里？”或者当从面部改变到不同的图像如旗帜时的毛刺动画。那些微观互动和动画会有很大帮助。</p><p id="cba2" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">除此之外，游戏很容易扩展。如果我把它变得更加模块化，就可以很容易地在菜单上增加新的选项，用更多的迷你游戏和乐趣来扩展游戏。唯一的限制是我们的想象力。</p><p id="8125" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated"><strong class="le iu">如果你有孩子(或学生)，这是一个与他们一起开发的优秀项目</strong>:它很简单，如果他们正在学习web开发，它会很棒，它有一个<em class="ld">的惊喜因素</em>，会给他们留下深刻印象。至少，它对我的孩子有效。</p><p id="cd80" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated">下面是包含完整代码的完整演示(比这里解释的多一点):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="b212" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk ms lm ln lo mu lq lr ls mw lu lv lw lx im bi translated"><em class="ld">原载于2021年12月4日https://alvaromontoro.com</em><em class="ld"/><a class="ae nn" href="https://alvaromontoro.com/blog/67994/building-a-robot-friend-from-a-mcdonalds-toy" rel="noopener ugc nofollow" target="_blank"><em class="ld">。</em></a></p></div></div>    
</body>
</html>