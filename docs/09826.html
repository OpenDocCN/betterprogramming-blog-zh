<html>
<head>
<title>Build a Painting App in iOS 15 With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SwiftUI在iOS 15中搭建绘画App</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-painting-app-in-ios-15-with-swiftui-bb757a925f6a?source=collection_archive---------7-----------------------#2021-10-18">https://betterprogramming.pub/build-a-painting-app-in-ios-15-with-swiftui-bb757a925f6a?source=collection_archive---------7-----------------------#2021-10-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="115d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用新的画布视图构建一个简单的绘画应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/468fc1627d603eb0222b2b6ac6cfbdb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MdiHDR06_7A9kmdS5Be8Kg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@sharonmccutcheon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">莎伦·麦卡琴</a>在<a class="ae ky" href="https://unsplash.com/s/photos/shapes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="51f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开发应用程序时，你肯定会发现自己需要做的事情之一就是一些简单的图形。可以用画图或预览绘制的那种图形。它们是很棒的应用程序，但并不总是理想的，因为当你经常需要一个形状作为位图时，你希望它是一个特定的iOS颜色或大小。这两者在画图/预览中都是可能的，但有时不那么容易达到像素完美。</p><p id="f817" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我完成这个系列的时候，请加入我的旅程，学习如何构建一个简单的绘画应用程序来解决这个问题，并下载最终的应用程序。</p><h1 id="819b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">案情摘要</h1><p id="f45a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我想要一个可以在iOS下运行的应用程序来构建一些简单的图形。我希望它像绘画或预览应用程序一样合理直观地工作。您应该能够以多种颜色创建、删除、调整大小、复制和粘贴以及重新定位多个形状。特定大小的形状。线条或立体形状——至少是三角形、正方形或圆形。显然，您需要能够保存所述绘图，并容易地将它们导出到开发平台。不像预览或绘画，我也想有层的概念。好有将是能够添加文本到所说的形状和画线。</p><h1 id="d669" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">编码</h1><p id="9cb4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在，我最初确实考虑过作为一个混合的UIKit/SwiftUI应用程序来做这件事，其中一个明显的挑战是SwiftUI中缺少触摸手势。令人欣慰的是，我发现使用最小距离为零的拖动手势与UIKit上的触摸手势工作方式相同——所以我使用了它，并使用了pure SwiftUI。</p><p id="52c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这里展示的版本1最复杂的方面是创建和选择形状背后的逻辑，这需要一点点的尝试和错误。我从<code class="fe ms mt mu mv b">ObservableObject</code>开始，我可以用它在画布视图和<code class="fe ms mt mu mv b">ContentView</code>之间共享数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="8271" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我意识到作为一个单一的结构比三个数组更好，但是我在构建原型时添加了每个元素——我肯定会及时重新构建它。</p><p id="9228" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我有了<code class="fe ms mt mu mv b">CanvasView </code>——一个在画布中自己的层内创建每个形状的视图。最后的演示卷轴使用了椭圆，奇怪的是它似乎比<code class="fe ms mt mu mv b">rect</code>更好，这是我需要改进的一个特性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7bb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">中期计划是使用我在<a class="ae ky" href="https://medium.com/analytics-vidhya/shapes-with-paths-using-swiftui-part1-fb7250d3dce8" rel="noopener">这篇文章中概述的技术，用X边的路径</a>构建一个形状。</p><p id="ac80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe ms mt mu mv b">ContentView</code>中，你得到了一个巧妙的逻辑来计算图像的选择/取消选择应该如何工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="d4f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里也是在基础上有两个变量，以帮助跟踪一些关键变量，因为我是调试应用程序。读者可能会注意到的另一点，即在几个地方使用了<code class="fe ms mt mu mv b">DispatchQueue</code>——这是一种绕过紫色警告并确保UI只在主线程上更新的“修复”。</p><p id="dc68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我需要构建两个助手例程来帮助选择和取消选择屏幕上的对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="55dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关键时刻当你把所有这些放在一起，在模拟器上运行时，看起来是什么样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/62f7c3556a583d05927c1844e8bddd8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zLISMHT1ZRkmNKoLwEvFcQ.gif"/></div></div></figure><p id="dd14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个动画GIF中，你可以看到我画了一个圆，通过点击它的边框选择它，并将其移动到直线上。然后我点击离开，取消选择它，然后创建另一个。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><p id="5711" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还没有发现它对定制形状的效果如何。我们将在后续文章中深入探讨这一点。感谢阅读。</p></div></div>    
</body>
</html>