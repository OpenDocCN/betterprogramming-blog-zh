<html>
<head>
<title>SKWarpGeometry in SpriteKit With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI在SpriteKit中进行skwarp几何处理</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/skwarpgeometry-in-spritekit-with-swiftui-3b90dda1f6ff?source=collection_archive---------14-----------------------#2021-07-13">https://betterprogramming.pub/skwarpgeometry-in-spritekit-with-swiftui-3b90dda1f6ff?source=collection_archive---------14-----------------------#2021-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="89bb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看一看肯定是CS毕业生设计的命令</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ddd287b0216b7a9cef63d7489087344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z-CV_ThL-8Qj4gUw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼克·希利尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="b675" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名计算机科学毕业生，我开始意识到我看待世界的方式与大多数人不同。时不时地，我会遇到一个非常神秘的命令，以至于我会悄悄地对自己说，“这肯定是一个CS毕业生设计的。”</p><p id="0424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SpriteKit中的<code class="fe lv lw lx ly b">SKWarpGeometry</code>就是这样一个命令。甚至关于这个主题的苹果文档页面也是由一名计算机系毕业生整理的。我知道这一点，因为它也有点令人费解。这是关于这个主题的一篇好文章。</p><p id="f6f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">加入我的探索，弄清楚这东西如何工作，如何使用它。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8a90" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">旅程</h1><p id="02a0" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">不久前，我写了几篇关于贝塞尔曲线的文章:</p><div class="nd ne gp gr nf ng"><a rel="noopener  ugc nofollow" target="_blank" href="/using-bezier-curves-in-swiftui-9d080657fb15"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">在SwiftUI中使用贝塞尔曲线</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">让我们构建一个简单的应用程序来探索贝塞尔路径</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">better编程. pub</p></div></div><div class="np l"><div class="nq l nr ns nt np nu ks ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a rel="noopener  ugc nofollow" target="_blank" href="/using-de-casteljaus-algorithm-bezier-curves-in-swiftui-3dcadd62635e"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">在SwiftUI中使用De Casteljau算法/贝塞尔曲线</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">苹果的贝塞尔曲线代码很好，但有时你需要深入挖掘</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">better编程. pub</p></div></div><div class="np l"><div class="nv l nr ns nt np nu ks ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a rel="noopener  ugc nofollow" target="_blank" href="/a-better-bezier-curve-a-polynomial-in-swiftui-e0807e9cc214"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">更好的贝塞尔曲线SwiftUI中的多项式</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">伯恩斯坦多项式是德·卡斯特尔约·贝齐尔的替代物</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">better编程. pub</p></div></div><div class="np l"><div class="nw l nr ns nt np nu ks ng"/></div></div></a></div><p id="c759" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第一篇文章中，我开发了一个应用程序来帮助读者理解上述曲线中使用的数学公式。这是一个演示程序，让他们动态地改变参数，进入一个贝塞尔曲线。</p><p id="94d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一种尝试理解正在发生的事情的有趣方式，所以我决定建立一个简单的程序来对<code class="fe lv lw lx ly b">SKWarpGeometry</code>做同样的事情。我希望这也是一个将SwiftUI卓越的布局功能与SpriteKit结合使用的很好的例子，尽管结果并不完全是这样。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="1ba1" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">外星象形文字</h1><p id="7fc8" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">好了，让我们从这张动画GIF开始，它展示了扭曲几何体的最基本的矩阵。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/c47561b9aed0cbd7f2e00a754192b8cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3cvuVnmyy9lNIGsb1_5MjQ.gif"/></div></div></figure><p id="7d81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe lv lw lx ly b">warp</code>命令集，你有16个变量来改变正方形的基本形状。按钮是SwiftUI，而中心部分是SpriteKit。我使用一个组合<code class="fe lv lw lx ly b">PassThroughSubject</code>将两个框架链接在一起。转换背后的代码如下所示。向量的值<code class="fe lv lw lx ly b">tL1</code>、<code class="fe lv lw lx ly b">tL2</code>等。开始与<code class="fe lv lw lx ly b">sourcePositions</code>相同。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="c5f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">演示应用程序的工作方式是，你有一个看起来像这里显示的一对(<code class="fe lv lw lx ly b">source</code>或<code class="fe lv lw lx ly b">destin</code>)的源向量。</p><pre class="kj kk kl km gt oa ly ob oc aw od bi"><span id="f84a" class="oe mh it ly b gy of og l oh oi">source = vector_float2(0.0, 1.0) destin = vector_float2(1.0, 0.0) </span></pre><p id="0941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有8个向量或者16个浮点数可以改变。</p><p id="3df0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我点击上面有图形的按钮时，<code class="fe lv lw lx ly b">warp</code>命令会从这些值中选择一个，然后加上或减去0.1。然后将其应用并转换为新的形状。看着这个让我想到了外星字母表。在我们的八对中，仅将一个浮点值改变0.5，就会返回一个独特的形状。换两个彩车就更好了。事实上，如果我结合两种转换，我肯定有足够的变化来建立一个外星字母表。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e7df" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">后续步骤</h1><p id="157d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在你理解了基本概念，让我们进入下一个阶段。最后一个演示程序使用了一个2x2的网格。但是你的网格不需要是正方形的。它可以是3x2、4x3等。可能不太明显(至少对我来说)的是源值，所以我写了这段代码来解决这个问题:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="c7fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们构建第二个演示程序，让您选择使用任何大小的矩阵。这项任务听起来容易做起来难。我用它来设计一个外星字母x。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/c74470d0ce069b5480c69e17d7d22065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0o0DnECchwYubfAlWYtUiA.gif"/></div></div></figure><p id="f568" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你看到的是一个由简单纹理组成的精灵节点。我随后用扭曲几何学绘制了它，把它切割成25个向量。你可以看到带白点的向量。当我点击这个点时，我有机会改变源/目的地图的值。你可以看到我在中间选择的向量的索引值，它的值显示在步进器中。我点击不同的向量，慢慢地但肯定地改变目的地地图，以建立你看到的字母逐渐出现。</p><p id="b63b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是弄清楚这是如何工作的一个很好的工具。我为什么这样做？因为:</p><ul class=""><li id="e6c4" class="ok ol it lb b lc ld lf lg li om lm on lq oo lu op oq or os bi translated">我需要一个控制面的设计，它应该是可扩展的，并且比之前的设计更简单。网格是最有意义的。</li><li id="801a" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">我需要一种方法来改变向量中的值，以测试这些改变的效果。我在SwiftUI界面中选择了几个步进器。我确实试着用一些<code class="fe lv lw lx ly b">drag</code>手势做到这一点，但是它……很丑。</li><li id="5b78" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">我想使用两个<code class="fe lv lw lx ly b">SKScenes</code>，一个用于控件，另一个用于被管理的精灵。我试过SwiftUI按钮，但在一些测试后，我又退而求其次。我需要调整顶部场景的不透明度来阻止它完全覆盖第一个场景。</li><li id="dc90" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">最后，因为我要将我的形状扭曲到它本身，而不仅仅是侧面，我需要创建一个有纹理的精灵节点。没有它，对一些向量的改变是不可见的。</li></ul><p id="486e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会开始意识到做好这件事的复杂性。在这个例子中，我有25个向量，每个向量有两个点，它们的值可以增加或减少。将演示代码复制到您自己的项目中，然后进行试验。你很快就会明白我的意思。</p><h2 id="2009" class="oe mh it bd mi oy oz dn mm pa pb dp mq li pc pd ms lm pe pf mu lq pg ph mw pi bi translated">将来的</h2><p id="826e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这看起来不错，但是你怎么能让它变得更好呢？</p><ul class=""><li id="eaa6" class="ok ol it lb b lc ld lf lg li om lm on lq oo lu op oq or os bi translated">你可以尝试用一种或多种渐变给sprite节点上色。参见我的文章,其中详细介绍了一种技术。</li><li id="af0c" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">您可以添加一个按钮来记录该序列，以便回放。</li><li id="4285" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">如果您正在录制，您可以添加一个按钮来将序列保存到XML或XLIST中。</li><li id="c86d" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">如果你正在保存序列，你也需要一个加载按钮来重新读取以前的设计。</li><li id="112a" class="ok ol it lb b lc ot lf ou li ov lm ow lq ox lu op oq or os bi translated">我在这里什么都没做，但是也有很大的潜力。也许SwiftUI中的一个表盘可以做到这一点，这可能会很有趣。显然，你也需要把它们记录到你的序列中。我给<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-draw-in-3d-with-swiftui-7989cfcd35fc">写了一篇关于2D和3D旋转的文章</a>。</li></ul><h2 id="8079" class="oe mh it bd mi oy oz dn mm pa pb dp mq li pc pd ms lm pe pf mu lq pg ph mw pi bi translated">更多的烈酒</h2><p id="ce16" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果你是SpriteKit的新手，你会发现大量关于这个主题的文章。我最喜欢的几首是由@ <a class="ae ky" href="https://artturi-jalli.medium.com/?source=post_page-----8d66b83f8091--------------------------------" rel="noopener">阿图里·贾利</a>和@ <a class="ae ky" href="https://medium.com/@marc.vandehey?source=post_page-----79a750ef319f--------------------------------" rel="noopener">马克·J·范德黑</a>写的:</p><div class="nd ne gp gr nf ng"><a href="https://medium.com/codex/integrate-spritekit-to-your-app-8d66b83f8091" rel="noopener follow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">将SpriteKit集成到您的应用中</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">轻松连接SpriteKit和UIKit，并将令人惊叹的SpriteKit动画添加到基于故事板的应用程序中。</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">medium.com</p></div></div><div class="np l"><div class="pj l nr ns nt np nu ks ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://medium.com/@marc.vandehey/raincat-lesson-1-79a750ef319f" rel="noopener follow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">RainCat:第一课</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">如何在Swift 3中制作一个简单的SpriteKit游戏</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">medium.com</p></div></div><div class="np l"><div class="pk l nr ns nt np nu ks ng"/></div></div></a></div><p id="4561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在我离开之前，这里是第二个演示应用程序的源代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="5981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这让我想到了这篇文章的结尾。我希望你喜欢读它，就像我喜欢写它一样。请随意查看我在Medium上发表的150多篇文章，了解更多Swift内容。</p><div class="nd ne gp gr nf ng"><a href="https://marklucking.medium.com" rel="noopener follow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">马克·卢金-中号</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">看看SwiftUI、SpriteKit和Combine之间的协同作用这是《从单例开始》中的第三篇文章…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">marklucking.medium.com</p></div></div><div class="np l"><div class="pl l nr ns nt np nu ks ng"/></div></div></a></div></div></div>    
</body>
</html>