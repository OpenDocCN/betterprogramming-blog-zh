<html>
<head>
<title>Retrieving Full Historical Data for Every Cryptocurrency on Binance &amp; BitMex Using the Python API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python API检索币安和BitMex上每种加密货币的完整历史数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/easiest-way-to-use-the-bitmex-api-with-python-fbf66dc38633?source=collection_archive---------1-----------------------#2019-06-06">https://betterprogramming.pub/easiest-way-to-use-the-bitmex-api-with-python-fbf66dc38633?source=collection_archive---------1-----------------------#2019-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e213" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">单一功能<strong class="ak">读取</strong>、<strong class="ak">更新</strong>、<strong class="ak">保存、</strong>和<strong class="ak">收集</strong>数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cc196ffe08a0efd120b35d3e1aa2fffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MbWaLw30xLIPHW7PWPaSTw.jpeg"/></div></div></figure><p id="7c63" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="lq">免责声明:我知道这不是我通常发布的内容，但因为这是我的兴趣所在——就像传统金融、机器学习和数据科学一样——我想你们中的一些人可能也会对此感兴趣。</em></p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="5882" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我最近一直在调查数据科学和加密货币市场之间的关系，这是我正在写的一篇相当长的文章。在这个过程中，我需要检索价格历史和其他数据，所以我决定写一篇补充文章，介绍我是如何完成这项工作的。</p><p id="5a24" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">希望你觉得有用。如果你喜欢这个作品并想看更多，一定要跟我来！</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="b7dd" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated"><em class="mr">TL；博士</em></h1><p id="f199" class="pw-post-body-paragraph ku kv it kw b kx ms ju kz la mt jx lc ld mu lf lg lh mv lj lk ll mw ln lo lp im bi translated">要检索比特币价格和数据(100万克林):</p><ol class=""><li id="11cd" class="mx my it kw b kx ky la lb ld mz lh na ll nb lp nc nd ne nf bi translated">在<a class="ae ly" href="https://accounts.binance.com/en/register?ref=10989518" rel="noopener ugc nofollow" target="_blank">币安</a>和/或<a class="ae ly" href="https://www.bitmex.com/register/V2v4aJ" rel="noopener ugc nofollow" target="_blank"> BitMex </a>上注册以获得API访问权限。</li><li id="4ea4" class="mx my it kw b kx ng la nh ld ni lh nj ll nk lp nc nd ne nf bi translated">导入我创建的易于使用的函数，并添加您的API细节。</li><li id="559b" class="mx my it kw b kx ng la nh ld ni lh nj ll nk lp nc nd ne nf bi translated">a.调用函数:get _ all _币安(" BTCUSDT "，" 1m "，save = True) <br/> b .调用函数:get_all_bitmex("XBTUSD "，" 1m "，save = True)</li></ol><h2 id="29fc" class="nl ma it bd mb nm nn dn mf no np dp mj ld nq nr ml lh ns nt mn ll nu nv mp nw bi translated">示例用途:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/60e9e81372ba93d518563f51601b8fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7kMLLY5qM5WbVU7yhlA61g.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">使用get_all_bitmex函数获取<strong class="bd oc"> BitMex </strong>上<strong class="bd oc"> EOS </strong>的<strong class="bd oc"> 5m </strong>历史价格数据的示例</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/273918d681083eba2203b6ab9bd5de27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_w89qUFiDjI56_gfvROLZg.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">使用get _ all _币安函数获取<strong class="bd oc">币安</strong>上<strong class="bd oc"> ICX </strong>的<strong class="bd oc"> 5m </strong>历史价格数据的例子</p></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="acb2" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">为什么是币安和比特墨西哥？</h1><p id="61a8" class="pw-post-body-paragraph ku kv it kw b kx ms ju kz la mt jx lc ld mu lf lg lh mv lj lk ll mw ln lo lp im bi translated">如果你有任何加密货币市场的经验，你知道这个问题的答案是显而易见的:</p><blockquote class="oe"><p id="0bab" class="of og it bd oh oi oj ok ol om on lp dk translated"><a class="ae ly" href="https://accounts.binance.com/en/register?ref=10989518" rel="noopener ugc nofollow" target="_blank">币安</a>是市场上最受欢迎的交易所<a class="ae ly" href="https://www.bitmex.com/register/V2v4aJ" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> BitMex </strong> </a>是市场上<strong class="ak">交易量最大的</strong>交易所。</p></blockquote><p id="9ff3" class="pw-post-body-paragraph ku kv it kw b kx oo ju kz la op jx lc ld oq lf lg lh or lj lk ll os ln lo lp im bi translated">正如我们所知，大容量等于大数据，大数据(通常)等于更好的建模和预测，特别是对于机器学习模型。</p><p id="1f6d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，你不必购买任何比特币或任何其他加密货币来执行本文中的步骤。我们需要注册的原因是，一旦注册，你就可以访问他们的API，这是我们将用来获取实际数据的。</p><p id="ff10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以选择其中之一或两者都选，下面介绍的功能对两个交换机都很灵活。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="0a2a" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">检索和存储数据</h1><p id="953a" class="pw-post-body-paragraph ku kv it kw b kx ms ju kz la mt jx lc ld mu lf lg lh mv lj lk ll mw ln lo lp im bi translated">我们的代码将执行以下操作:</p><ol class=""><li id="5442" class="mx my it kw b kx ky la lb ld mz lh na ll nb lp nc nd ne nf bi translated">检查现有保存的数据</li><li id="03de" class="mx my it kw b kx ng la nh ld ni lh nj ll nk lp nc nd ne nf bi translated">找出最新保存的数据(如果有)和最新数据之间的差异</li><li id="0825" class="mx my it kw b kx ng la nh ld ni lh nj ll nk lp nc nd ne nf bi translated">发送API调用并追加现有的或新的数据帧</li><li id="814b" class="mx my it kw b kx ng la nh ld ni lh nj ll nk lp nc nd ne nf bi translated">保存和/或返回完整的数据帧</li></ol><p id="3b11" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你唯一需要做的就是把你的API-key和API-secret添加到你的代码中，也要记住永远不要<strong class="kw iu"> </strong>与任何人分享这些。如果你在<a class="ae ly" href="https://accounts.binance.com/en/register?ref=10989518" rel="noopener ugc nofollow" target="_blank">币安</a>或<a class="ae ly" href="https://www.bitmex.com/register/V2v4aJ" rel="noopener ugc nofollow" target="_blank"> BitMex </a>交易或持有加密货币，这可能会导致资金损失。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">它看起来很乱，但它非常实用和快速，唯一的限制因素是BitMex和币安每分钟允许的API调用的数量。</p></figure><p id="ca71" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这非常容易使用，只需用Python调用该函数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/2aeb3cc48f39fd103af17d044915a5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5o5kxgg4xSMNmLEYcYXvgA.png"/></div></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">data = get_all_bitmex("XBTUSD "，" 5m "，save = True)</p></figure><p id="a701" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下载后，该函数将返回整个数据帧供您随意使用。如果将参数<code class="fe ow ox oy oz b">save</code>作为<code class="fe ow ox oy oz b">True</code> <strong class="kw iu">，</strong>传递，它会将数据帧保存在您的计算机上，文件名为“[symbol]-[kline_size]-data.csv”，即上述情况中的“XBTUSD-5m-data.csv”。</p><p id="65fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个功能的巧妙之处在于它可以随时更新你的数据。</p><blockquote class="oe"><p id="1972" class="of og it bd oh oi oj ok ol om on lp dk translated"><strong class="ak">每次</strong>函数被调用时，它将检查<strong class="ak">您已经下载的数据的最新点</strong>并用任何新数据更新<strong class="ak">！</strong></p></blockquote><p id="cce0" class="pw-post-body-paragraph ku kv it kw b kx oo ju kz la op jx lc ld oq lf lg lh or lj lk ll os ln lo lp im bi translated">每次使用来自bitmex的XBTUSD数据时，只需调用get_all_bitmex("XBTUSD "，" 5m "，save = True)以确保它是最新的！</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="bd57" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">但是我想要所有市场的数据</h1><p id="bb31" class="pw-post-body-paragraph ku kv it kw b kx ms ju kz la mt jx lc ld mu lf lg lh mv lj lk ll mw ln lo lp im bi translated">别担心，这很容易做到！您可以通过以下方式检索所有市场的数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div><p class="ny nz gj gh gi oa ob bd b be z dk translated">在这里，我们从BitMex和币安下载了比特币及其与以太坊和Ripple的关系的所有可用数据。</p></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="4ed8" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="a79e" class="pw-post-body-paragraph ku kv it kw b kx ms ju kz la mt jx lc ld mu lf lg lh mv lj lk ll mw ln lo lp im bi translated">感谢阅读。希望您发现这很有用！</p><p id="774e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想看和了解更多，一定要关注我的<a class="ae ly" href="https://medium.com/@peter.nistrup" rel="noopener"> <strong class="kw iu">媒体</strong> </a>🔍<strong class="kw iu"> </strong>和<a class="ae ly" href="https://twitter.com/peternistrup" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">碎碎念</strong> </a> <strong class="kw iu"> </strong>🐦</p><div class="pa pb gp gr pc pd"><a href="https://medium.com/@peter.nistrup" rel="noopener follow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">彼得·尼斯特鲁普-中等</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">阅读彼得·尼斯特拉普在媒介上的作品。数据科学、统计和人工智能...推特:@PeterNistrup，LinkedIn…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">medium.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr ks pd"/></div></div></a></div></div></div>    
</body>
</html>