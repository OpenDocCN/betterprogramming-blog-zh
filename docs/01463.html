<html>
<head>
<title>What Are Creational Design Patterns?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是创造性的设计模式？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creational-design-patterns-in-php-db365d3245ce?source=collection_archive---------9-----------------------#2019-09-12">https://betterprogramming.pub/creational-design-patterns-in-php-db365d3245ce?source=collection_archive---------9-----------------------#2019-09-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ad44" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建一个新对象可能会很棘手——学习如何正确地完成它</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b563a8b52b09870aac8b697eeb938cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GkG8QODh_iZJid8ZhHKxAA.jpeg"/></div></div></figure><p id="f9ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在给定的用例中，<em class="lq">创造性设计模式</em>关注于以最好的方式构建新对象的方法。它们有助于将与这些任务相关的逻辑封装到单独的组件中。</p><p id="57f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">新对象的初始化和创建是每个应用程序非常重要的一部分，也是引入新错误的可能来源。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="0ebe" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">原型</h1><p id="c8cc" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">如果您正在创建许多相似的对象，这种模式会很有用。重用现有对象并仅修改您需要的属性通常是有益的。</p><p id="eb01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这种方法可以使您的代码更加整洁，在某些情况下，还可以提高性能。在PHP中，与对象复制相关的逻辑应该放在<code class="fe mv mw mx my b">__clone</code> magic方法中。</p><p id="4a55" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">值得注意的是，在克隆时，并不调用对象<code class="fe mv mw mx my b">__construct</code>。如果你想使用克隆，你应该记住这一点。</p><p id="d9b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们有一个系统来注册计算机，将它们分配到一个组中，并保存到数据库中。我们的设备模型非常简单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="3088" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们只有一种设备类型—计算机。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2753" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每个设备只能分配给一个位置和名称不同的组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="a4b0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们必须在我们的系统中注册许多新电脑。他们都在同一个地方。随着原型的使用，现在真的很容易。我们可以创建一个设备模型，复制它，然后只更改唯一的ID。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="19e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于这样一个简单的例子来说，这似乎不是一件大事，但想象一下，构建每个设备由几个步骤组成，并且每个组都有许多配置，这可能会省去我们很多麻烦。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="c0b9" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">抽象工厂</h1><p id="8e9a" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">这种模式有助于使创建不同类型的对象的过程更加清晰明了。你必须为工厂<strong class="kw iu"> </strong>类定义一个接口，该类的唯一目标是创建新对象<em class="lq">。</em></p><p id="7c4e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，您知道如何创建任何类型的对象以及调用哪些方法。工厂的具体实现处理特殊类型对象的创建。</p><p id="554b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在一家生产电视和一些物联网设备(如信标)的公司工作。它们被放置在室内和室外的公共场所。这些设备的细节必须有所不同，以使其在特定条件下更好地工作。</p><p id="497a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用于室外工作的设备必须防水和防破坏。使用的硬件和安装过程可能会有很大不同。因此，我们应该在应用程序中为它们建立单独的层次结构。</p><p id="5160" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每种生产的设备有两种类型:室内和室外。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b74d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的<code class="fe mv mw mx my b">DisplayFactory</code>制造特殊类型的显示器(这并不奇怪……)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="1d59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">而<code class="fe mv mw mx my b">IotFactory</code>做特殊的物联网设备。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="3141" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">室外和室内产品的界面略有不同，您可以在这些产品上运行特定的操作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="01f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并测试关键的质量属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="487c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些接口中的每一个都有具体的实现，但是我认为没有必要在这里包含它们。现在，我们可以轻松地添加新类型的设备，设计用于室内和室外。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="c47a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">一个</h1><p id="196d" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">有些东西应该只创建一次，然后作为单个实例全局使用。如果您在应用程序中使用数据库，那么每个查询使用单个连接而不是多个连接是合理的。</p><p id="fc4b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您也不希望在应用程序中使用配置组件的多个实例。</p><p id="a6a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">单例有时被认为是一种反模式。它引入了通常不希望的全局状态。它有时会被过度使用，人们应该考虑到它的缺点。</p><p id="90ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在PHP中使用singleton所要做的就是通过将<code class="fe mv mw mx my b">__contruct</code>和<code class="fe mv mw mx my b">__clone</code>方法设置为private或protected来防止直接初始化。这些方法现在只能从类内部调用。</p><p id="9da9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，您所要做的就是通过一个约定允许访问公共静态方法，通常命名为<code class="fe mv mw mx my b">getInstance</code>，它为每个调用提供相同的类实例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="77e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在提供的示例中，我们正在检索一个活动用户的数据(假设一次只能有一个用户)。在现实世界中，这样的操作可能需要数据库查询或其他操作。</p><p id="d003" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用Singleton，我们可以获得性能优化，并建立关于活动用户的单一真实来源。(在修改的情况下，所有客户都会注意到。)</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="c37d" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">建设者</h1><p id="0abb" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">构建复杂类型的对象可能相当棘手。它可以由几个步骤组成，并以特定的顺序执行。这就是构建器设计模式的作用。</p><p id="f1c8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它帮助我们组织一个复杂对象的构造，并将这个逻辑封装到一个单独的组件中。</p><p id="3cd7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在一家制造不同类型设备的公司工作。构建这些包括几个重要的步骤。每一个都需要特定的软件、硬件，并为客户提供某种形式的SLA。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="9238" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">指挥者是操作的大脑，并使用专门为每种类型的设备准备的构建器。每个构建器需要有相同的界面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="0540" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">假设我们创造的设备之一是一面互动的镜子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2129" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了简单起见，交互式镜子的表示非常简单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="1cb8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在制造一种新装置非常容易。如果我们想在生产线上添加电视，我们只需要添加一个新的电视生成器和电视类。</p><p id="27a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">值得注意的是，在构建器模式中，我们的设备不必共享相同的接口。让它们的构建器类有相同的接口是很重要的。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="88de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其他模式的完整源代码和描述可从以下网址获得:</p><div class="nb nc gp gr nd ne"><a href="https://github.com/jkapuscik2/design-patterns-php" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">jkapuscik 2/设计-模式-php</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">这个项目是一组在现实世界中使用不同设计模式的简单例子。每个人都有一个…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div></div></a></div></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="a2d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望这些例子有所帮助，并使每个模式背后的思想更容易理解。如果您想了解一些更有用的设计模式，您可以在以下文章中找到它们:</p><ul class=""><li id="45b2" class="nn no it kw b kx ky la lb ld np lh nq ll nr lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/getting-started-with-design-patterns-in-php-4d451ccdfb71" rel="noopener">工厂方法</a></li><li id="09f8" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/observer-pattern-in-php-2ba240f89fb2" rel="noopener">观察者</a></li><li id="340f" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/iterator-pattern-in-php-b7624f6bdbcf" rel="noopener">迭代器</a></li><li id="3ef9" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/state-strategy-design-patterns-by-example-f57ebd7b6211" rel="noopener">状态&amp;策略</a></li><li id="c69a" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/template-method-pattern-in-php-6116fd7e8ccc?source=friends_link&amp;sk=ac4c483446bd5a5323c09a662bd54116" rel="noopener">模板方法</a></li><li id="cfd1" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/swlh/flyweight-design-pattern-in-php-edcda0486fb0?source=friends_link&amp;sk=a0fa3083d5afd7e41af8a4f7a1df05f1" rel="noopener">飞锤</a></li><li id="6d90" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/better-programming/proxy-design-pattern-and-how-to-use-it-acd0f11e5330" rel="noopener">代理</a></li><li id="b4d3" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/better-programming/decorator-c04fae63dfff" rel="noopener">装饰者</a></li><li id="c532" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/better-programming/dependency-injection-8f09a93ec995" rel="noopener">依赖注入</a></li><li id="1f9c" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/swlh/composite-908878748d0e" rel="noopener">复合</a></li><li id="75dd" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/swlh/building-cloud-storage-application-with-adapter-design-pattern-8b0105a1bda7" rel="noopener">适配器</a></li><li id="dca5" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/better-programming/what-is-facade-design-pattern-67cb09ce35d4" rel="noopener">立面</a></li><li id="c691" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/better-programming/what-is-bridge-design-pattern-89bfa581fbd3" rel="noopener">桥</a></li><li id="ad4a" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/what-is-chain-of-responsibility-design-pattern-ff4d22abd124" rel="noopener">责任链</a></li><li id="f6f7" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/what-is-visitor-design-pattern-8451fb75876" rel="noopener">来访者</a></li><li id="661d" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/what-is-cqrs-command-design-pattern-5d400fd9f93a" rel="noopener">命令</a></li><li id="27c7" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/what-is-null-object-design-pattern-f3b4d3d28636" rel="noopener">空对象</a></li><li id="eda9" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/what-is-the-fluent-interface-design-pattern-2797645b2a2e" rel="noopener">流畅的界面</a></li><li id="932e" class="nn no it kw b kx nx la ny ld nz lh oa ll ob lp ns nt nu nv bi translated"><a class="ae nw" href="https://medium.com/@j.kapuscik2/what-is-the-specification-design-pattern-4051dd9e71c3" rel="noopener">规格</a></li></ul></div></div>    
</body>
</html>