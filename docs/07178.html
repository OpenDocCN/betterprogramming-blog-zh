<html>
<head>
<title>Implement Dark Mode Using JavaScript, CSS, and Third-Party Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript、CSS和第三方库实现黑暗模式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implement-dark-mode-using-javascript-css-and-third-party-libraries-50e27817c790?source=collection_archive---------9-----------------------#2020-12-14">https://betterprogramming.pub/implement-dark-mode-using-javascript-css-and-third-party-libraries-50e27817c790?source=collection_archive---------9-----------------------#2020-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6f38" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">介绍黑暗模式和多种实施方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/163ab1e8b76449c19456f6ff728064e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*oc5vkxjqz1lBygGzUhbtzw.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来源:作者</p></figure><p id="df12" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就网页设计而言，<a class="ae lq" href="https://en.wikipedia.org/wiki/Light-on-dark_color_scheme" rel="noopener ugc nofollow" target="_blank">亮暗配色方案</a>(也称为<em class="lr">黑色模式</em>、<em class="lr">深色模式</em>、<em class="lr">深色主题</em>或<em class="lr">夜间模式</em>)是一种在深色背景上使用浅色文本、图标和UI元素的配色方案。</p><p id="813c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">相反的配色方案称为<em class="lr">暗亮配色方案</em>、<em class="lr">灯光模式</em>或<em class="lr">灯光主题</em>。</p><p id="70f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">电脑屏幕从黑暗模式开始，模仿当时使用的阴极射线管。当在WYSIWYG(所见即所得)文字处理器中引入光模式来模拟纸上的墨迹时，skeuomorphic方法开始流行。很快，轻型模式成为了标准。</p><p id="614c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">自2015年以来，尤其是最近几年，黑暗模式获得了很大的吸引力。</p><p id="b4ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">用户选择黑暗模式的原因有很多:</p><ul class=""><li id="cf18" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">节能:黑暗模式下的灯光显示需要更少的能量。</li><li id="5240" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">眼睛保护:科学表明，从长远来看，负极性(暗模式)对眼睛的伤害小于亮模式。</li><li id="f473" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">美学关注:对于某些UI设计来说，深色模式是时髦的。</li></ul><p id="3063" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">嗯，我们不会放弃光模式。事实上，大多数电子设备仍然默认有灯光模式。光模式是skeuomorphic方法，它在强(太阳)光下读得更好。</p><p id="0f4b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">黑暗模式是一种选择。在一个复杂的前端UI中，为了<a class="ae lq" href="https://medium.com/better-programming/10-steps-to-building-web-applications-with-accessibility-a11y-81cd2c1dd499" rel="noopener">可访问性</a>和可用性，必须支持黑暗模式。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="0151" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">系统偏好设置的媒体查询</h1><p id="ae2c" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated"><code class="fe nk nl nm nn b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" rel="noopener ugc nofollow" target="_blank">prefers-color-scheme</a></code>是一项CSS媒体功能，用于检测用户是否请求系统使用亮模式或暗模式。</p><ul class=""><li id="809d" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated"><code class="fe nk nl nm nn b">no-preference</code>:表示用户通知系统没有首选模式。这是默认值。</li><li id="4d12" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated"><code class="fe nk nl nm nn b">light</code>:表示用户通知系统首选灯光模式。</li><li id="65b6" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated"><code class="fe nk nl nm nn b">dark</code>:表示用户通知系统首选黑暗模式。</li></ul><p id="0b9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于大多数系统都是为轻型模式设计的，因此它可能不需要出现在媒体查询中。</p><p id="812f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个HTML文件显示<code class="fe nk nl nm nn b">Hello, World!</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="5582" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该页面在浏览器上显示如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/d82a6f092d7490d93a3cf551454580f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*OpZprR0yjJN2I7d8IRF7fw.png"/></div></figure><p id="2dc8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们添加了针对黑暗模式的媒体查询:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="ac92" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第8 - 13行设置黑暗模式的颜色。</p><p id="88be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在上面的代码中，为了简单起见，使用了黑色背景和白色文本。</p><p id="6072" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在实际应用中，通常会用到<code class="fe nk nl nm nn b">off white</code>和<code class="fe nk nl nm nn b">off black</code>。<code class="fe nk nl nm nn b">Off white</code>是各种颜色的总称，与纯白只有细微差别。同样，<code class="fe nk nl nm nn b">off black</code>是各种与纯黑只有细微差别的色调的统称。</p><p id="3df6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">前往Mac系统偏好设置将外观更改为深色模式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/25fe5701d4a1e7bafd35bd8975460012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*FUrG6q0422g8BNoZoSOzrw.png"/></div></figure><p id="3903" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该页面在浏览器上显示如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/8d79787f0d5e90e6415e7afc6b0f372e.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*UhwDBPeFXCYD88bH6cRjxg.png"/></div></figure><p id="3ad4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">糟糕，我们忘了把主体背景设为黑色。由于亮模式是默认模式，暗模式需要处理更多的事情来覆盖默认设置。</p><p id="452a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">解决方法如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="1db4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第8 - 10行将主体背景设置为黑色。</p><p id="d15a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们看到了正确的黑暗模式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/0d555be166373f2fd238647e03f5b6d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*sjWIOmSMFG8WIFM-FwPSaA.png"/></div></figure><p id="fad5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从上面的代码中我们有什么可以改进的吗？</p><p id="5e76" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">是的。我们可以只在<code class="fe nk nl nm nn b">body</code>上设置黑暗模式CSS，因为<code class="fe nk nl nm nn b">div</code>将从它的上级继承<code class="fe nk nl nm nn b">background</code>和<code class="fe nk nl nm nn b">color</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="f074" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">JavaScript代码跟踪系统偏好设置</h1><p id="a6c8" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated"><code class="fe nk nl nm nn b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia" rel="noopener ugc nofollow" target="_blank">matchMedia()</a></code>是窗口的接口方法。它返回一个新的<code class="fe nk nl nm nn b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList" rel="noopener ugc nofollow" target="_blank">MediaQueryList</a></code>对象，然后可以用它来确定<code class="fe nk nl nm nn b">document</code>是否匹配媒体查询字符串。它还侦听媒体查询更改。</p><p id="d0be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于我们已经将Mac系统偏好设置设置为黑暗模式，<code class="fe nk nl nm nn b">matchMedia()</code>返回以下值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/bd13c04457e77a168a2a9cab6104afef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*URzxIjFKkAfY0XmexZkC6g.png"/></div></figure><p id="3d62" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">或者，我们可以使用JavaScript来支持亮暗两种模式。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="0c0d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">JavaScript代码可以在头部或身体。建议放在头部。对于本文，我们将它留在正文中，以作一些改变。</p><p id="6ca1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第11行检查媒体查询。</p><p id="e89f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第12 - 15行定义了一个基于系统偏好设置颜色主题的函数。这个函数在第16行被调用。每当颜色模式改变时，颜色主题将由第17行重置。</p><p id="30ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">好吧，与其直接改变风格，推荐的方法是添加或删除一个关于黑暗主题的类。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="f528" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果是系统偏好设置中的黑暗模式，则<code class="fe nk nl nm nn b">dark</code>类被添加到<code class="fe nk nl nm nn b">body</code>(第20行)。否则，从<code class="fe nk nl nm nn b">body</code>中移除<code class="fe nk nl nm nn b">dark</code>类(第22行)。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="f211" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">本地存储中特定于站点的首选项</h1><p id="eafc" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated">我们已经了解了如何根据系统偏好设置切换颜色模式。如果用户想要覆盖某个站点的系统首选项，该怎么办？</p><p id="d0fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，常见的方法是将用户的偏好保存在本地存储中。如果首选项在本地存储中，那么将在主体中添加一个特定的类来显示首选的颜色主题。</p><p id="39ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在前面的例子中，我们从<code class="fe nk nl nm nn b">matchMedia</code>中得到<code class="fe nk nl nm nn b">colorScheme</code>:</p><pre class="kj kk kl km gt nt nn nu nv aw nw bi"><span id="91e2" class="nx mo it nn b gy ny nz l oa ob">const colorScheme = matchMedia('(prefers-color-scheme: dark)');</span></pre><p id="097a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">相反，我们可以从<code class="fe nk nl nm nn b">localStorage</code>那里得到它:</p><pre class="kj kk kl km gt nt nn nu nv aw nw bi"><span id="ee18" class="nx mo it nn b gy ny nz l oa ob">const colorScheme = localStorage.getItem("prefers-color-scheme");</span></pre><p id="767f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另外，我们可以使用<code class="fe nk nl nm nn b">localStorage</code>和<code class="fe nk nl nm nn b">matchMedia</code>的组合:</p><pre class="kj kk kl km gt nt nn nu nv aw nw bi"><span id="cb03" class="nx mo it nn b gy ny nz l oa ob">const colorScheme = localStorage.getItem("prefers-color-scheme") <br/>  || matchMedia('(prefers-color-scheme: dark)');</span></pre><h2 id="01ed" class="nx mo it bd mp oc od dn mt oe of dp mx ld og oh mz lh oi oj nb ll ok ol nd om bi translated">黑暗模式切换</h2><p id="06b6" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated"><a class="ae lq" href="https://github.com/GoogleChromeLabs/dark-mode-toggle" rel="noopener ugc nofollow" target="_blank"> dark-mode-toggle </a>是一个第三方库，它是一个自定义元素，可以在网站上启用颜色<em class="lr"> </em>切换。它从本地存储器中读取<code class="fe nk nl nm nn b">dark-mode-toggle</code>属性，并相应地设置模式。如果未设置<code class="fe nk nl nm nn b">dark-mode-toggle</code>属性，则遵循系统首选项。</p><p id="006e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是用户自定义的灯光模式。您可以选择是否将设置保存在本地存储中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi on"><img src="../Images/193be133f8d99843f3fc8978492de57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LSpzcYVNNDms-7cFZw4S-g.png"/></div></div></figure><p id="f425" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果取消选中<code class="fe nk nl nm nn b">Remember this in local storage</code>，则<code class="fe nk nl nm nn b">dark-mode-toggle</code>属性将从本地存储中删除。</p><p id="b5d1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是用户自定义的黑暗模式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi on"><img src="../Images/42ddec373469d242319c4d2864a9a35b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6ObHVcmoyHtL0dePmFPKQ.png"/></div></div></figure><p id="36a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是HTML代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="5d36" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第8 - 12行定义了光照模式的样式文件。</p><p id="af28" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第13 - 17行定义了黑暗模式的样式文件。</p><p id="c66a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第18 - 21行导入黑暗模式切换。</p><p id="3ae1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第25 - 32行使用了黑暗模式切换组件，以及彩色模式开关。如果外观在第28行被定义为<code class="fe nk nl nm nn b">toggle</code>，它将只显示所选择的模式。</p><p id="1661" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是光照模式的样式文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="a68b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是黑暗模式的样式文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="7e31" class="nx mo it bd mp oc od dn mt oe of dp mx ld og oh mz lh oi oj nb ll ok ol nd om bi translated">黑暗模式</h2><p id="ad62" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated"><a class="ae lq" href="https://github.com/sandoche/Darkmode.js" rel="noopener ugc nofollow" target="_blank"> darkmode-js </a>是一个第三方库，是一个简单的给网站添加黑暗模式的方法。它使用CSS <code class="fe nk nl nm nn b">mix-blend-mode</code>将元素的内容与其父元素和背景混合。它从本地存储器中读取<code class="fe nk nl nm nn b">darkmode</code>属性，并相应地设置模式。如果未设置<code class="fe nk nl nm nn b">darkmode</code>属性，则遵循系统首选项。</p><p id="31f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是用户自定义的灯光模式。你点击右下角的点，选择将被保存到本地存储。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi os"><img src="../Images/786a85120019bc2e07a3a1f0e705e99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FfjTBVMBEOki7Ekdo86hRw.png"/></div></div></figure><p id="df2f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是用户自定义的黑暗模式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi os"><img src="../Images/66bd355a00189cdaa8a6117200899b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ct1F0soGwrSMyz4Cvj9C2g.png"/></div></div></figure><p id="6d26" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当颜色模式改变时，它具有某种动画，这由下面的视频剪辑捕获。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot np l"/></div></figure><p id="adc9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是HTML代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="a6b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第7行导入darkmode-js。</p><p id="bac7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第12行显示了控件小部件。</p><p id="fd26" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从字面上看，它是一行代码。难怪darkmode-js被npm trends评为更受欢迎的JavaScript解决方案。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi ou"><img src="../Images/875954d2af41690291ef21b0e74e5e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v6nTF0c1NRliKBT3s_ElRw.png"/></div></div></figure><h2 id="5353" class="nx mo it bd mp oc od dn mt oe of dp mx ld og oh mz lh oi oj nb ll ok ol nd om bi translated">其他JavaScript库</h2><ul class=""><li id="3348" class="ls lt it kw b kx nf la ng ld ov lh ow ll ox lp lx ly lz ma bi translated"><a class="ae lq" href="https://github.com/itsabdessalam/is-night-mode" rel="noopener ugc nofollow" target="_blank"> is-night-mode </a>:这是一个库，根据当前时间、本地存储属性或系统偏好来检查是否是黑暗模式。</li><li id="7b78" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated"><a class="ae lq" href="https://github.com/Fcmam5/nightly.js" rel="noopener ugc nofollow" target="_blank"> nightly.js </a>:这是一个基于系统偏好设置黑暗模式的库。它支持用户选择，但尚未将用户设置放入本地存储。</li></ul><h2 id="2955" class="nx mo it bd mp oc od dn mt oe of dp mx ld og oh mz lh oi oj nb ll ok ol nd om bi translated">使用标记模式挂钩</h2><p id="e93a" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated">有一个流行的React实现:<a class="ae lq" href="https://github.com/donavon/use-dark-mode" rel="noopener ugc nofollow" target="_blank"> use-dark-mode </a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi ou"><img src="../Images/855797154df97d5a691e6c1149bea57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zdqHAaqOZHf24yjwdDbgxg.png"/></div></div></figure><p id="63ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nk nl nm nn b">useDarkMode</code>是一个自定义的React钩子，帮助实现黑暗模式。颜色主题存储在本地存储中。属性名称是可配置的，默认名称是<code class="fe nk nl nm nn b">darkMode</code>。</p><p id="b562" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是自定义灯光模式，其中车身配置了<code class="fe nk nl nm nn b">light-mode</code>类。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi oy"><img src="../Images/7c8051ef7307a1a1dfd9036c08c25d63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3sSrwlR47k2oRIohPMsvXw.png"/></div></div></figure><p id="3315" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是自定义黑暗模式，车身配置了<code class="fe nk nl nm nn b">dark-mode</code>级。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oo op di oq bf or"><div class="gh gi oy"><img src="../Images/3540fc988a65a513fa28efc332d2805c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KKS3ag1sx6JjgkdN-Wn8jA.png"/></div></div></figure><p id="9321" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们已经在一个<a class="ae lq" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener"> Create React App </a>环境中嵌入了这个例子。</p><pre class="kj kk kl km gt nt nn nu nv aw nw bi"><span id="7dfd" class="nx mo it nn b gy ny nz l oa ob">npx create-react-app my-app</span></pre><p id="a1ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">安装<code class="fe nk nl nm nn b">use-dark-mode</code>:</p><pre class="kj kk kl km gt nt nn nu nv aw nw bi"><span id="9d78" class="nx mo it nn b gy ny nz l oa ob">npm i use-dark-mode</span></pre><p id="6564" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以在<code class="fe nk nl nm nn b">package.json</code>的<code class="fe nk nl nm nn b"><a class="ae lq" href="https://medium.com/better-programming/package-jsons-dependencies-in-depth-a1f0637a3129" rel="noopener">dependencies</a></code>中看到新包装:</p><pre class="kj kk kl km gt nt nn nu nv aw nw bi"><span id="ccc0" class="nx mo it nn b gy ny nz l oa ob">"devDependencies": {<br/>  "use-dark-mode": "^2.3.1"<br/>}</span></pre><p id="da68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是修改过的<code class="fe nk nl nm nn b">src/App.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="d387" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是修改过的<code class="fe nk nl nm nn b">src/App.css</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="d032" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个解决方案不检查系统偏好，但是可以通过<code class="fe nk nl nm nn b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia" rel="noopener ugc nofollow" target="_blank">matchMedia()</a></code>实现。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="812c" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="3651" class="pw-post-body-paragraph ku kv it kw b kx nf ju kz la ng jx lc ld nh lf lg lh ni lj lk ll nj ln lo lp im bi translated">我们已经介绍了如何使用JavaScript、CSS和第三方库实现黑暗模式。</p><p id="029b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了所有的好处和乐趣，你想试试黑暗模式吗？</p><p id="1b9c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">还有其他的CSS方法，比如<a class="ae lq" href="https://medium.com/better-programming/styled-components-a-css-in-js-approach-755f6a196c42" rel="noopener">风格组件</a>，Tailwind CSS等等。他们以自己的方式启用对黑暗模式的支持。</p><p id="9a29" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">享受美丽的黑暗吧！</p><p id="35e2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读。我希望这有所帮助。你可以在这里看到我的其他媒体出版物<a class="ae lq" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">。</a></p></div></div>    
</body>
</html>