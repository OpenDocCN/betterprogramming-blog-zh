<html>
<head>
<title>Create a Deployment Setup on AWS in 10 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10分钟内在AWS上创建一个部署设置</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-deployment-setup-on-aws-in-10-minutes-490d225e6446?source=collection_archive---------11-----------------------#2021-01-07">https://betterprogramming.pub/create-a-deployment-setup-on-aws-in-10-minutes-490d225e6446?source=collection_archive---------11-----------------------#2021-01-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9744" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让您的应用更快上线</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/96c5e770a75304651eba69767c11efe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HRKEJQgBYUrde4pvaFqhWw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@thomasjsn?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">托马斯·詹森</a>在<a class="ae ky" href="https://unsplash.com/s/photos/network?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f0a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些情况下，我们需要进行简单快速的部署，同时遵循最佳工程和安全实践，例如负载平衡、使用专用网络或自动扩展。AWS的服务<a class="ae ky" href="https://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank">弹力豆茎</a>来到现场。</p><blockquote class="lv lw lx"><p id="d8e1" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">“AWS Elastic Beanstalk是一种易于使用的服务，用于部署和扩展用Java开发的web应用程序和服务。NET、PHP、Node.js、Python、Ruby、Go、Docker在Apache、Nginx、Passenger、IIS等熟悉的服务器上。”— <a class="ae ky" href="https://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank"> AWS弹性豆茎</a></p></blockquote><p id="222e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">换句话说，Elastic Beanstalk是一个平台，其主要目的是简化web应用程序的部署。它支持许多不同的现代平台和语言。如果它已经引起了你的注意，让我们更深入地探索它。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="4665" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">如何使用它</h1><p id="ad84" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Elastic Beanstalk提供了两个上传部署的选项:通过web控制台或通过CLI。</p><p id="151c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用web界面，我们需要上传该项目的zip存档，要么直接上传，要么上传到S3桶。然后，我们将看到所有可用的部署配置。根据我们应用的需要，我们可以改变它们。Elastic Beanstalk提供设置自动伸缩组、负载平衡器、监控工具和许多其他选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/6289f85b893ae5153ae15980ab357d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dyw1xNf1erWu2ZhsNhj9pQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弹性Beanstalk部署配置的web界面</p></figure><p id="4626" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过CLI配置部署看起来也很简单，但是我们需要提前<a class="ae ky" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html" rel="noopener ugc nofollow" target="_blank">安装Elastic Beanstalk CLI </a>。为了定义部署配置，我们必须将配置文件放在项目中的路径<code class="fe nh ni nj nk b">.ebextensions/</code>下。例如，要使用应用程序负载平衡器，我们需要在<code class="fe nh ni nj nk b">.ebextensions/custom.config</code>中创建以下配置。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="fbd1" class="np mk it nk b gy nq nr l ns nt">option_settings:<br/>  aws:elasticbeanstalk:environment:<br/>    LoadBalancerType: application</span></pre><p id="f1e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">配置文件使部署定制更加灵活。支持的配置选项的完整列表可在<a class="ae ky" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options.html" rel="noopener ugc nofollow" target="_blank">文档</a>页面上找到。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="7b9e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">部署Docker容器</h1><p id="5388" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我的应用程序是用<a class="ae ky" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank">烧瓶</a>微框架实现的。尽管有弹性豆茎支持，我还是决定把它放在<a class="ae ky" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>容器中。最后，如果AWS在Docker容器中，你不需要担心它是否支持你的平台。</p><p id="950c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们必须通过创建docker文件来封装我们的应用程序。每个平台都需要不同的设置，我们将在本文件中进行描述。我们既可以保存一个本地Docker文件，也可以将图像上传到Docker hub并引用它。在这种情况下，我们需要创建<code class="fe nh ni nj nk b">docker-compose.yml</code>文件来引用远程图像。</p><p id="ee83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们必须用下面的命令初始化用于弹性Beanstack部署的项目。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="029f" class="np mk it nk b gy nq nr l ns nt">eb init -p docker &lt;application name&gt;</span></pre><p id="4144" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们准备通过运行以下命令开始部署。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="8c7d" class="np mk it nk b gy nq nr l ns nt">eb create &lt;environment name&gt;</span></pre><p id="1188" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦流程完成，我们的应用程序就开始运行。这是它，只有几个命令，每个人都会看到你的应用程序。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="2f31" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">我有微服务怎么办？</h1><p id="2738" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">这通常是接下来弹出的问题。除非您必须扩展您的解决方案，否则整体式方法是不错的。微服务架构目前得到了积极利用，实现了更好的可扩展性和性能。</p><p id="78e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS为编排提供了一个容器服务ECS。但是，Elastic Beanstalk可以执行多容器部署吗？是的，<a class="ae ky" href="https://docs.amazonaws.cn/en_us/elasticbeanstalk/latest/dg/create_deploy_docker_ecs.html" rel="noopener ugc nofollow" target="_blank">它能</a>！</p><p id="4f5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Elastic Beanstalk为多容器部署提供了两种选择:</p><ul class=""><li id="8120" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu nz oa ob oc bi translated">Amazon Linux AMI上的多容器Docker平台</li><li id="82ae" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated">带有Docker Compose的Amazon Linux 2上的Docker平台</li></ul><p id="76d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于第一个选项，我们需要在项目根路径中创建一个文件<code class="fe nh ni nj nk b">Dockerrun.aws.json</code>。在这个文件中，我们以JSON格式定义了容器和它们之间的依赖关系。</p><p id="9841" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第二个选项中，我们可以使用Docker Compose直接处理常用文件<code class="fe nh ni nj nk b">docker-compose.yml</code>。这两个选项的区别在于使用的操作系统。小心，因为不能保证向后兼容。</p><p id="495b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想尝试一个或另一个部署选项，您将需要不同的文件格式。幸运的是，有一个可用的解决方法。一个开源项目<a class="ae ky" href="https://github.com/micahhausler/container-transform" rel="noopener ugc nofollow" target="_blank">容器转换</a>提供文件转换。它会将文件从一种格式转换成另一种格式。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h1 id="8087" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="ce18" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">Elastic Beanstalk是在AWS上快速方便地部署应用程序的单一入口点。丰富的配置和简单的使用使这项服务成为许多工程师的最爱。</p></div></div>    
</body>
</html>