# 在 JavaScript 中设置默认值的 6 种方法

> 原文：<https://betterprogramming.pub/6-ways-to-set-default-values-in-javascript-b6869fa65cdb>

## OR 运算符、空运算符、函数默认值等等

![](img/31559635fbe469fc255382858c50c02d.png)

迈克尔·泽兹奇在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

为变量或参数设置默认值是我们可能遇到的常见场景。在本文中，您将找到六个不同的选项来实现这一点。

我们开始吧。

# 1.OR (||)运算符

OR ( `||`)运算符可用于决定默认值。

当第一个操作数为 true 时，OR ( `||`)返回第一个操作数，不计算第二个操作数。当第一个操作数为 falsy 时，它返回第二个操作数。

正如您已经注意到的，OR ( `||`)不一定返回`true`或`false`，但是它会根据具体情况返回第一个或第二个操作数。第二个操作数将是我们的默认值。

我们应该记住什么是虚假和真实的价值观。JavaScript 将`false`、`null`、`undefined`、`0`、`''`和`NaN` 视为 falsy 值。所有其他的价值观都是真理。

下面是基于另一个变量设置变量的示例。如果`lastStatus`为假，则`status`变量被设置为`'Pending'`。否则，它采用`lastStatus`变量的值。

当`lastStatus`的当前值是空字符串时，也会发生同样的情况。新的`status`获得默认值。空字符串是 falsy。

在下一个例子中，第一个操作数`lastStatus`是 true，所以`||`操作符返回`lastStatus`。

# 2.OR 赋值(||=)运算符

仅当左操作数为 falsy 时，逻辑 OR 赋值(`||=`)运算符才会分配新值。

下面是一个在变量 hold`undefined`上使用`||=`的例子。

接下来是一个为包含空字符串的变量赋值的例子。空字符串是 falsy。

`'Done'`字符串是真值。对保存该值的变量使用`||=`没有任何效果。

# *3。零化合并算子*(？？)

nullish 合并运算符(`??`)可用于设置默认值。

当第一个操作数不为空时，空合并运算符(`??`)返回第一个操作数。否则，它返回第二个。

在下一个例子中，第一个操作数是 nullish，所以新的`status`被设置为默认值。

空字符串是一个 falsy 值，但不是 nullish。在下一种情况下，新的状态变量被设置为空字符串。

下面是另一个例子，变量`lastStatus`存储一个字符串值。不使用默认值。

# 4.无效赋值运算符(？？=)

逻辑空值赋值(`??=`)运算符仅在当前值为空值时才赋值。

`undefined`是一个空值，所以在下一个例子中，`status`变量被设置为默认值。

空字符串不是 nullish。执行逻辑空赋值没有任何效果。在下面的例子中，`status`变量保持设置为空字符串。

同样的事情发生在下一个例子中。`status`变量保持设置为`'Done'`状态字符串。nullish 赋值运算符不应用默认值。

# 5.函数默认值

如果没有值或`undefined`被传递，默认函数参数允许命名参数用默认值初始化。

这是一个接受默认值的函数的例子。

```
function getStatus(status = 'Pending'){
  return status;
}
```

不带参数调用函数或使用`undefined`作为参数会使函数使用默认值。

```
getStatus(); //Pending
getStatus(undefined); //Pending
```

`null`和`undefined`是不同的值。当使用`null`作为参数调用时，该函数不使用默认值。

```
getStatus(null); //null
```

同样的事情发生在下面的例子中。默认值不适用。

```
getStatus(0);      //0
getStatus('');     //''
getStatus('Done'); //'Done'
```

# 6.用默认值析构赋值

析构赋值运算符接受默认值，

如果属性不存在或其值被设置为`undefined`，则析构赋值中的默认值有效。

考虑下一个例子。分配的对象中缺少`name`属性。在这种情况下，`name`变量得到默认值。

当指定属性的值不是`undefined`时，如空字符串，则不应用默认值。

在下一个例子中，`name`属性有一个字符串值。不使用默认值。

接下来，我们将析构赋值的默认值与函数参数的默认值结合起来。下面是我们如何确保当输入对象参数丢失或者`name`属性丢失或者`undefined`时`name`属性有一个默认值。

# 关键注意事项

可以使用 OR( `||`)、OR 赋值(`||=`)、无效合并(`??`)或无效赋值(`??=`)运算符来设置默认值。

函数允许默认值。仅当提供的参数缺失或设置为`undefined`时，才应用默认值。

析构赋值允许默认值。仅当指定属性缺失或设置为`undefined`时，才应用默认值。

当提供的值为 falsy 时,`||`运算符应用默认值。

当提供的值为 nullish 时,`??`操作符应用默认值。

在我以前的文章中，你可能会学到更多关于空值和未定义值的知识。

感谢阅读。