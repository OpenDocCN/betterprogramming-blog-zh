<html>
<head>
<title>Getting Started With PyQt and Qt Designer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyQt和Qt设计器入门</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/get-started-with-pyqt-and-qt-designer-63955a129cf7?source=collection_archive---------4-----------------------#2021-08-31">https://betterprogramming.pub/get-started-with-pyqt-and-qt-designer-63955a129cf7?source=collection_archive---------4-----------------------#2021-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7870" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用PyQt和Qt Designer构建自定义用户界面</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d2b81b8139ca00165b2f01f6739bf638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fhpuzBxSC1vaFGuP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯利·西克玛</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="86bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyQt是一组Python绑定，允许开发人员用Python创建高度可定制的图形用户界面(GUI)。PyQt建立在C++ <a class="ae ky" href="https://medium.com/r?url=https%3A%2F%2Fwww.qt.io%2F" rel="noopener"> Qt </a>库的基础上，该库用于为各种多平台应用程序开发GUI。</p><p id="3d75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyQt小部件可以通过各种方式创建，这取决于所需的定制级别。Qt Designer 是一个Qt工具，用于使用所见即所得编辑器设计和构建GUI。使用这种用户友好的工具构建小部件允许开发人员在查看即时反馈的同时快速迭代设计。这篇文章将逐步讲解如何使用Qt Designer + Python创建PyQt小部件。</p><h1 id="4434" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.安装PyQt</h1><p id="6f11" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">第一步是安装PyQt，如果它还没有安装的话。在MacOS上，PyQt可以使用homebrew或pip安装。</p><p id="3102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">自制软件安装:</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c315" class="mx lw it mt b gy my mz l na nb">&gt; brew install pyqt5</span></pre><p id="81ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果用自制软件安装，pyqt5 designer应该会自动安装。</p><p id="75b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Pip安装:</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="6ef4" class="mx lw it mt b gy my mz l na nb">&gt; <!-- -->pip install pyqt5<br/># Install the developer tools<br/>&gt; pip install pyqt5-tools</span></pre><h1 id="0be3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak"> 2。在Qt Designer中创建UI</strong></h1><p id="7395" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">下一步是打开Qt Designer。在Mac OS上，可以通过在终端中运行以下命令来打开Qt designer:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="08f1" class="mx lw it mt b gy my mz l na nb">&gt; open -a Designer</span></pre><p id="30f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">创建一个Qt小部件</strong></p><p id="2d8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件-&gt;新建-&gt;小部件</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/56b6cc6dfa5cec88693b31d2bc02cf5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBWcOINVgntLJhqfdVQXgw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Qt设计器—创建新表单</p></figure><p id="9b3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这里可以将小部件从小部件框拖到表单中，并且可以根据需要更新每个小部件的属性。要查看可用的微件，请转到<code class="fe nd ne nf mt b">View -&gt; Widget Box</code>。下面的<code class="fe nd ne nf mt b">demo.ui</code>示例包含QHboxLayout、QPushButton、QLabel、QSpinBox、QLineEdit等类型的小部件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/2fb546ca9a05c5bc06fd2e9d9a7a4001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*__rsue8TpF7e9TA-5pBg-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Qt设计器—构建一个小部件</p></figure><p id="47f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记得保存。布局完成后的ui文件。</p><h1 id="7cd0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.用python初始化Qt小部件</h1><p id="ec88" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了加载和初始化在Qt Designer中创建的Qt小部件，需要在Python中创建一个QWidget类。下面是启动主要小部件所需的最少代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从Python启动QWidget</p></figure><h1 id="8851" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.将UI组件连接到代码</h1><p id="be40" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">既然主要的小部件是从python类初始化的，我们可能需要直接与组件交互，以设置默认值或从输入字段查询值。</p><p id="f486" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将从python代码中访问的每个组件都需要有一个标识符名称。在Qt Designer中，转到<code class="fe nd ne nf mt b">View -&gt; Property Editor</code>打开属性编辑器。选择每个小部件组件，并通过修改<code class="fe nd ne nf mt b">objectName</code>字段来更新名称。这个名称将在python代码中用来引用相关的小部件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/91fd70181e765ab66e19ba2f8a5aca2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzCe7zIQZIzWOrMFK64cTg.png"/></div></div></figure><p id="9c19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，QLabel被命名为<strong class="lb iu"> mainLabel </strong>。现在可以通过调用以下代码在代码中更新标签的文本:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="24ac" class="mx lw it mt b gy my mz l na nb">self.mainLabel.setText("Updated Text")</span></pre><h1 id="a616" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.将UI操作连接到代码</h1><p id="3ca8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当用户与小部件组件交互时，应用程序可能需要做出响应。信号和插槽是Qt回调机制的核心。事件发生时会发出UI信号。表示为指定函数的槽将被调用以响应特定的信号。有两种方法可以将UI动作连接到自定义函数。</p><p id="3360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">选项1 </strong>:将功能连接到信号</p><p id="7de3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击q按钮<code class="fe nd ne nf mt b">applyButton</code>将调用<code class="fe nd ne nf mt b">self.click</code>功能。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1791" class="mx lw it mt b gy my mz l na nb">self.applyButton.clicked.connect(self.click)</span></pre><p id="5556" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">选项2: </strong>使用<a class="ae ky" href="https://doc.bccnsoft.com/docs/PyQt5/signals_slots.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> pyqtSlot </strong> </a>装饰器指定插槽</p><p id="1921" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种风格的回调是使用<strong class="lb iu"> pyqtSlot </strong>装饰器为给定的信号指定插槽。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="05f3" class="mx lw it mt b gy my mz l na nb"><a class="ae ky" href="http://twitter.com/QtCore" rel="noopener ugc nofollow" target="_blank">@</a>pyqtSlot(name="on_applyButton_clicked")<br/>def click(self):<br/>    print("CLICKING")</span></pre><p id="9437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Qt演示</p></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="6221" class="lv lw it bd lx ly nr ma mb mc ns me mf jz nt ka mh kc nu kd mj kf nv kg ml mm bi translated">结论</h1><p id="46d3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这篇文章包含了使用PyQt和Qt Designer创建第一个小部件的分步说明。</p><p id="0a73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Qt Designer是快速创建任何UI基础的好方法，尽管需要注意的是使用Qt的可能性并不局限于Qt Designer。</p><p id="dc6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PyQt提供了丰富的API，允许开发人员定制外观和用户体验。可能性是无限的！</p></div></div>    
</body>
</html>