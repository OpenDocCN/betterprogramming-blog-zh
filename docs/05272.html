<html>
<head>
<title>Coding Our First Django App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写我们的第一个Django应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/writing-your-first-django-app-e81f76c9b0e1?source=collection_archive---------16-----------------------#2020-06-24">https://betterprogramming.pub/writing-your-first-django-app-e81f76c9b0e1?source=collection_archive---------16-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="87a5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们从最简单的初学者应用程序开始吧</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/aae525ae4547156d51e4408fb268ebcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8N7SP1UbW0AJeIZ3"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@hishahadat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">沙哈达特·拉赫曼</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="20aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几天前，我开始了一个Django系列，在这个系列中，我将撰写一系列文章来帮助你踏上Django之旅。</p><p id="d2a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一系列文章中，我已经谈到了Django、它的应用程序以及我们如何安装和启动它。现在是时候编写我们的第一个应用程序了。我们不会做太专业的事情。相反，我们将打磨我们的基础，创造一些初学者友好的东西。</p><p id="84fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前，我相信你们都知道Django是什么，以及如何安装它。如果你不知道，我在下面附上了以前文章的链接。</p><p id="df15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们开始构建我们的第一个实际应用程序！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="9292" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">创建应用程序</h1><p id="b924" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要创建一个新的应用程序，只需进入Django项目，编写下面这段代码。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="8162" class="nb ma iq mx b gy nc nd l ne nf">python manage.py startapp "application name"</span></pre><p id="a379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，一旦运行了这个程序，就会在您的项目中创建一个<code class="fe ng nh ni mx b">blog</code>文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/8632c415241207ad372347c0dfcdd5ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XELB95Ztt6pBtJU3bP1s5w.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="db5e" class="nb ma iq mx b gy nc nd l ne nf">blog/<br/>    __init__.py<br/>    admin.py<br/>    apps.py<br/>    migrations/<br/>        __init__.py<br/>    models.py<br/>    tests.py<br/>    views.py</span></pre><p id="5444" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">像这样的结构将被创建在你的应用文件夹下。这个目录将存放您的应用程序。在我的例子中，我的博客应用程序将驻留在这个目录中。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="64e9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">编写我们的第一个视图</h1><p id="3ca7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><em class="nk">视图</em>是一个Python函数，接受web请求并返回响应。它可以是任何内容—从内容、图像和视频到404错误。我们将视图写在项目或应用程序目录中的<code class="fe ng nh ni mx b">views.py</code>文件中。</p><p id="f41b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的例子中，我的app <code class="fe ng nh ni mx b">blog</code>目录中有<code class="fe ng nh ni mx b">views.py</code>。我将不得不在那上面工作。<code class="fe ng nh ni mx b">views.py</code>文件将为空，但已经从<code class="fe ng nh ni mx b">django.shortcuts</code>导入了<code class="fe ng nh ni mx b">render</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/45d6def72d410ad1af3456ba106482c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aMy37Bj10A4IbPDUozwTUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">views.py</p></figure><p id="33c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将导入<code class="fe ng nh ni mx b">from django.http import HttpResponse</code>。这基本上会返回一个HTTP响应。它是一个包含生成的响应的对象。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="98d0" class="nb ma iq mx b gy nc nd l ne nf">from django.shortcuts import render<br/>from django.http import HttpResponse</span><span id="01d9" class="nb ma iq mx b gy nm nd l ne nf"># Create your views here.<br/>def home(request):<br/>    return HttpResponse(“Hello, world. You’re at the blog home.”)</span></pre><p id="1aa1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是最简单的Django观点。这是视图功能。每个视图函数接受一个<code class="fe ng nh ni mx b">HttpRequest</code>对象，它通常被命名为<code class="fe ng nh ni mx b">request</code>，并且它返回一个<code class="fe ng nh ni mx b">HttpResponse</code>对象，该对象将在网页上显示<code class="fe ng nh ni mx b">“Hello, world. You’re at the blog home.”</code>。</p><p id="d722" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是我们还不能运行它。为了调用视图，我们需要将它映射到一个URL。为此，我们需要一个<code class="fe ng nh ni mx b">URLconf</code>。我们要创建一个<code class="fe ng nh ni mx b">urls.py</code> <strong class="ky ir"> </strong>文件，在app目录下创建一个<code class="fe ng nh ni mx b">URLconf</code>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1ee0" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">将URL映射到视图</strong></h1><p id="3097" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在<code class="fe ng nh ni mx b">blog/urls.py</code>中，您可以简单地编写以下代码:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="8e2b" class="nb ma iq mx b gy nc nd l ne nf">from django.urls import path<br/>from . import views</span><span id="0122" class="nb ma iq mx b gy nm nd l ne nf">urlpatterns = [<br/>    path('', views.home,name='blog-home'),<br/>]</span></pre><p id="9150" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni mx b">urlpatterns</code>列表将URL路由到视图。您可以从您的应用程序向<code class="fe ng nh ni mx b">urlpatterns</code>添加新的URL。为了添加一个新的URL，我们导入我们的<code class="fe ng nh ni mx b">views.py</code>文件来使用<code class="fe ng nh ni mx b">home</code>函数进行映射。</p><p id="2d21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在在<code class="fe ng nh ni mx b">urlpatterns</code>中增加了一个新的空路径，将运行<strong class="ky ir"> </strong> <code class="fe ng nh ni mx b">views.py</code>的<code class="fe ng nh ni mx b">home</code>功能。<strong class="ky ir"> </strong>表示运行app时，<strong class="ky ir"> </strong> <code class="fe ng nh ni mx b">views.py</code> <strong class="ky ir"> </strong>的<code class="fe ng nh ni mx b">home</code>功能会运行。我把这个路径命名为<code class="fe ng nh ni mx b">blog-home</code>。</p><p id="1fde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们将博客主页的URL路径映射到views.py文件中的<code class="fe ng nh ni mx b">home</code>函数。它不会工作，因为我们的项目目录中仍然有一个<code class="fe ng nh ni mx b">urls.py</code>文件。它会告诉我们整个网站哪些网址应该把我们发送到我们的博客主页。这一切听起来可能令人困惑！</p><h2 id="5200" class="nb ma iq bd mb nn no dn mf np nq dp mj lf nr ns ml lj nt nu mn ln nv nw mp nx bi translated"><strong class="ak">如果你对应用和项目感到困惑</strong></h2><p id="9fed" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一个<em class="nk">应用</em>是一个做一些事情的网络应用——例如，一个网络日志系统。一个<em class="nk">项目</em>是一个特定网站的配置和应用程序的集合。一个项目可以包含多个应用程序。一个应用程序可以在多个项目中。</p><p id="58a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们必须配置项目的<code class="fe ng nh ni mx b">urls.py</code>文件，以便它可以调用我们的应用程序。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="b75e" class="nb ma iq mx b gy nc nd l ne nf">from django.contrib import admin<br/>from django.urls import path,include</span><span id="8b20" class="nb ma iq mx b gy nm nd l ne nf">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('blog/', include('blog.urls')),<br/>]</span></pre><p id="65f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个文件中，我已经导入了<code class="fe ng nh ni mx b">include</code>模块，它可以调用我们的应用程序并包含它的文件。你可以看到我已经创建了另一个路径路由<code class="fe ng nh ni mx b">blog</code>、<strong class="ky ir">、</strong>，它正在调用博客的<code class="fe ng nh ni mx b">url.py</code>文件中的<code class="fe ng nh ni mx b">urlpatterns</code>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d51b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">运行服务器</h1><p id="deaf" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">映射完成后，您就可以运行服务器了——但是您会得到一个令人惊讶的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/9dbd3825ecda7e0441f5f75fdb3e688a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VIr0__IncS5oXfQBk9f90w.png"/></div></div></figure><p id="1bc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经引入了一些新的URL模式，它不会向我们显示默认主页！</p><p id="1013" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果你去<code class="fe ng nh ni mx b">/blog</code>，你会看到你的<code class="fe ng nh ni mx b">views.py</code>函数运行并给出正确的HTTP响应。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/b5c8b6b486f7afc9b9d7fc07fab3363d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1S-XIA8oxONyHWO5rD4qtw.png"/></div></div></figure><p id="3c53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么这是怎么发生的呢？当我们导航到<code class="fe ng nh ni mx b">blog</code> <strong class="ky ir"> </strong>页面时，它会转到项目的<code class="fe ng nh ni mx b">urls.py</code>文件，并在<code class="fe ng nh ni mx b">urlpatterns</code>中查找博客。它查看我们是否有与博客匹配的模式。现在模式匹配了，它就想着模式匹配了就把人送到哪里去。</p><div class="kg kh ki kj gt ab cb"><figure class="oa kk ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/8ca872bcbd7c74a5656fc6f55915b24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*nX6Kpj7dsKjofbQujpqsOw.png"/></div></figure><figure class="oa kk og oc od oe of paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/b715cc25ff627b95bac2685e3e204165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*ZO1V29gLUQ0dLuUxyCibPQ.png"/></div></figure></div><p id="7474" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Django然后遇到<code class="fe ng nh ni mx b">include()</code>并砍掉URL中与该点匹配的部分，并将剩余的字符串发送给included <code class="fe ng nh ni mx b">URLconf</code>进行进一步处理。在我们的例子中，<code class="fe ng nh ni mx b">blog</code>部分被匹配，一个空字符串被发送到我们应用程序的<code class="fe ng nh ni mx b">urls.py</code>文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/a9a85b6e8a05a6b41869f2260be971e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nX6Kpj7dsKjofbQujpqsOw.png"/></div></div></figure><p id="70fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在那里，它匹配URL模式并调用<code class="fe ng nh ni mx b">views.home</code>。在<code class="fe ng nh ni mx b">view.py</code>文件中，<code class="fe ng nh ni mx b">home</code>函数最终返回一个HTTP响应。</p><p id="94ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经成功运行了第一个应用程序。但是如果我想让博客页面成为我们的家呢？如果服务器运行并且<code class="fe ng nh ni mx b">127.0.0.1:8000</code>被踢，我们得到<code class="fe ng nh ni mx b">“Hello, world. You’re at the blog home.”</code>。我们只是想把我们的博客页面改成我们的主页。就是这样！</p><p id="2b10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，转到项目的<code class="fe ng nh ni mx b">urls.py</code>文件，将博客URL路径留空。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="a42b" class="nb ma iq mx b gy nc nd l ne nf">from django.contrib import admin<br/>from django.urls import path,include</span><span id="eb19" class="nb ma iq mx b gy nm nd l ne nf">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include('blog.urls')),<br/>]</span></pre><p id="a8f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，当你运行服务器时，你将登陆博客主页。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/34bcfd4a01b4cb8a655f285fe5699601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VBm1xJLBZEZNi7orCKDyPg.png"/></div></div></figure><p id="52a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！您已经完成了构建web应用程序的第一步。它也是一个网络应用程序。最简单的一个！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="659d" class="nb ma iq bd mb nn no dn mf np nq dp mj lf nr ns ml lj nt nu mn ln nv nw mp nx bi translated">摘要</h2><p id="8430" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在这篇文章中，我谈到了以下主题:</p><ul class=""><li id="1cba" class="oj ok iq ky b kz la lc ld lf ol lj om ln on lr oo op oq or bi translated">创建应用程序</li><li id="9fb6" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">创建视图</li><li id="fd9f" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated">用视图映射URL</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="ca5e" class="nb ma iq bd mb nn no dn mf np nq dp mj lf nr ns ml lj nt nu mn ln nv nw mp nx bi translated">参考</h2><ul class=""><li id="8114" class="oj ok iq ky b kz mr lc ms lf ox lj oy ln oz lr oo op oq or bi translated"><a class="ae kv" href="https://docs.djangoproject.com/en/3.0/intro/tutorial01/" rel="noopener ugc nofollow" target="_blank">“编写你的第一个Django应用，第1部分”</a>(Django官方网站)</li><li id="2dc5" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><a class="ae kv" href="https://medium.com/swlh/getting-started-with-django-b73f7343447b" rel="noopener">“Django入门！”</a></li><li id="215e" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><a class="ae kv" href="https://medium.com/swlh/launching-our-django-site-after-installation-9adecd6b65b2" rel="noopener">安装后启动我们的Django站点！”</a></li></ul></div></div>    
</body>
</html>