# 分类和修复 bug 的最佳实践

> 原文：<https://betterprogramming.pub/best-practices-for-triaging-and-fixing-bugs-c6d02a8bebd6>

## 如何决定何时修复什么

![](img/022f0600278bd95365601d61a8a9d0c5.png)

安内特·lūsiņa 在 [Unsplash](https://unsplash.com/s/photos/todo?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

软件开发的一个基本事实是会有 bug，这包括各种各样的怪癖，比如编码错误，因为依赖关系离线而出现的问题，因为模型被误解而出现的视觉不一致，等等。

虽然有许多技术有助于提高代码的质量，例如测试驱动开发和坚实的原则；虽然有许多其他技术可以帮助尽早捕捉到 bug，比如回归测试、负载测试等等，但是 bug 仍然会出现，并且会让你的用户烦恼。

幸运的是，也有一些技术可以帮助你更容易地分类和修复你的错误。

# 1.了解你的客户

在你开发任何特性之前，尽可能多的了解你的客户总是好的——这是任何敏捷过程不可或缺的一部分。然而，大多数团队忘记了这对于维护您的应用程序也很重要。

为了在流程的后期成功地对 bug 标签进行分类，您应该能够分辨出您的客户正在使用哪些设备/操作系统/浏览器；您的客户属于哪个细分市场，您承诺了什么样的服务水平，以及您的客户期望什么样的服务水平。

了解您的客户正在使用哪些浏览器使您能够主动使用这些浏览器测试您的前端，并有一些方法来确定有多少人将受到浏览器问题的影响。

即使在浏览器渲染引擎较少的时候，根据前端的大小，您也会发现细微到明显的差异。融入像 [WebRTC](https://webrtc.org/) 这样的“相当新”的技术，了解浏览器和版本的差异将成为每周的例行公事。

一旦你知道你的客户正在使用哪些浏览器，决定这些是否是你想要支持的浏览器，以及理想情况下如何处理其余的浏览器——简单地忽略它们只会增加你以后的工作量，并让用户感到沮丧。

你可以将一些浏览器重定向到一个页面，解释它们不受支持(例如 IE8？)，以及哪些浏览器不是；对其他人来说，你可以简单地显示一个浏览器不受支持和可能存在问题的通知，但不阻止他们。

了解您的客户群有助于了解这些浏览器发生变化的可能性，例如，他们更新浏览器的可能性有多大。

企业客户更有可能坚持使用旧的/长期支持版本的浏览器，并且如果没有中央 IT 部门的批准，他们可能无法更改任何内容。

清楚地传达您承诺的服务级别，并了解您的客户期望的服务级别也很重要。

这不仅应该是任何公平合同的一部分，以沟通由于维护和错误造成的潜在停机时间，而且必须让您清楚您试图交付什么样的应用程序和质量。

如果你正在为医生写软件，你可能不应该依赖单一的服务器。无论如何，你的客户和实际的最终用户可能会对你的应用程序的服务水平有不同的感受，这意味着你应该始终记住，即使你的合同给你时间来解决问题，预期通常也会更高。

# 2.通过简单的流程跟踪问题

如果你知道谁是你的客户，他们期望什么，你就可以开始以一种有意义的方式测试你的应用程序。你发现的或者向你报告的每一个 bug 都应该以简单的方式进行跟踪，这样就没有人有借口不报告 bug 了。

你可以添加一个电子邮件地址，比如[report-a-bug@yourcompany.com](mailto:report-a-bug@yourcompany.com)，这样你的同事就可以低门槛地通知你一个问题。

毕竟，销售或客户支持人员可能会直接从客户那里听到错误，但如果过程太复杂而无法使用，他们不会报告错误，同时不得不为客户或被投诉者找到解决方法。

您仍然应该确保每个人都知道您需要哪些信息来最好地跟踪问题——谁报告了错误，谁受到了问题的影响，在什么设备上，使用了哪个版本/浏览器，在什么时间，使用了哪个功能，以及发生了什么——但事实是，通常并不是所有的信息都可用。

如果您发现可能影响许多用户的问题，或者即使只影响少数用户也很严重的问题，也至少在您的公司中传达这些问题，以便与客户接触的人了解这些问题。

根据谁是你产品的目标受众，你也可以和你的客户分享一个已知问题的列表(最好还有解决方法)。

# 3.使用自动化的错误报告工具

除了依靠人工报告 bug 之外，确保你设置了一个自动化的 bug 报告工具，比如[滚动条](https://rollbar.com/)、[哨兵](https://sentry.io/)、 [Bugsnag](https://www.bugsnag.com/) 、 [Raygun](https://raygun.com/) 或任何其他工具。

这些工具都支持各种编程语言，使您能够从前端接收报告(在您的 JavaScript、TypeScript 代码等中)。)以及来自后端的许多额外指标，例如有多少人受到影响、错误发生的频率、自定义元数据等等。

现在，许多网站还提供了版本对比，这样你就可以随时跟踪你的稳定性。

尤其是通常情况下，您的用户不会报告错误，有一个自动工具来报告异常以及导致错误的堆栈跟踪、源映射和面包屑有助于大量调试和捕获错误。

这些工具非常容易设置——在大多数编程语言(例如 Java)或框架(例如 Express)中，就像添加一个库或中间件一样简单，没有理由不收集这些数据。

此外，确保注入任何元数据，这些元数据可能有助于分类和修复错误(例如，客户许可证级别、用户 ID、使用的产品)，但请记住不要过度共享数据，尤其是在涉及 PII 时。

但是，即使你的公司严格限制向第三方数据处理器发送数据(你好，GDPR)，你也可以找到使用本地安装的错误报告工具(例如 Bugsnag)。

此外，对于初创公司来说，入门级计划(历史数据保留时间较短)是可以承受的，并且肯定比开发人员花费时间试图手动找到错误的原因要便宜。

# 4.有一个“零缺陷”政策来提高你的质量和改变你的思维模式

一旦你发现了应用程序中的一些错误，就该对它们进行分类和修复了。

许多团队犯了这样的错误:在他们的产品待办事项列表中收集旧的 bug 报告，使他们的待办事项列表变得混乱，并且需要不断的努力来将每一个新的故障单与几个月(甚至几年)前的故障单进行优先排序。

首先，要有一个更近的工作基础，只需关闭旧的 bug 标签。例如，如果你在过去的六个月里不太关心某个 bug，那么在接下来的六个月里，你可能也不会关心它。

如果一个 bug 标签是旧的，很可能是你的应用程序的一部分已经改变了，或者受影响的浏览器已经不存在了。如果有人在一年前提交了错误报告，并且仍然关心修复，他们会再次联系；如果不是，修复漏洞可能不会有什么不同。

相反，专注于如何处理当前的 bug，确保它们不会变老。为此，尝试应用“零已知错误”策略。

这极大地减少了对 bug 进行优先级排序所需的认知工作，因为 bug 标签将不再永远留在您的积压工作中，也不会有在每个 sprint 中推迟 bug 修复的机会。

其次，随着时间的推移，它会提高您的代码质量，不仅仅是因为所有的 bug 至少都会被开发人员发现，更重要的是因为它有一种强烈的心理效应——它迫使每个人都想办法减少问题，并在多个层面上提高您产品的质量。

这也可以应用于现有的应用程序；关闭太旧的故障单，然后在接下来的几个 sprints 中分批处理所有剩余的故障单，直到您达到零。

但是，要确保这个政策得到团队和管理层的支持。开发/运营团队通常欢迎这样的政策，因为我们通常对我们的工作质量感到自豪，并希望事情运行得完美无缺。

然而，管理层可能不喜欢任何速度的下降，因为稳定的代码可能具有的商业价值通常只有在关键客户抱怨时才能看到(到那时，可能已经太晚了)。

因此，确保在代码中解释异常的性质(系统的行为是不可预见的)，公司风险(客户抱怨和/或安全/GDPR 问题)，以及长期的速度增加(更好的整体质量和团队对代码更深的承诺和洞察力)。

如果您不能或不想应用“零已知错误”策略，请确保仍然与您的团队和管理层一起定义策略。

它不一定是一个成熟的服务水平协议，特别是因为这些协议往往会加强人们的感觉，即它是一个内部供应商，而不是公司的一部分。

然而，你至少应该能够向你的同事解释为什么某些 bug 仍然存在，并且最好定期更新旧的 bug 标签。

# 5.首先根据受影响的客户对故障单进行分类，其次是严重性

在开始修复 bug 之前，确保先对 bug 进行分类。类似于“GTD”这样的任务管理技术，试着立即解决所有明显的速效项目。

如果在一个字符串中有一个打字错误，一个 favicon 丢失，服务器的 POST 响应状态代码是 204，它应该是 201，尝试立即修复这些东西。

当你确定某件事只需要几分钟就能解决时，就不值得在分类过程中考虑太久。

对于其他所有事情，在着手修复之前不要太深入地研究它，特别是不要试图估计它(例如，不要用故事点，也不要用任何其他方式)。

通常，调查是 bug 修复的重要部分，所以当开发人员开始处理这个问题时，把它留给他们；由于大多数 bug 隐藏的复杂性，调查前的评估是困难的，评估是浪费时间。

此外，故事点应该反映您的团队交付特性的速度，而不是 bug(毕竟，它们是“故事”点)。

否则，一个从不提高质量的团队会一直保持高速度，而一个设法为特性开发增加空闲时间的团队不会提高速度。

因此，对于所有无法立即修复的问题，您应该只是想出一个简单的优先顺序，理想情况下，不需要太深入地查看错误报告，例如首先服务您的关键客户，然后是其他客户；首先修复影响许多用户的错误，然后是其他用户。

如果你的一个重要客户，负责你 30%的收入，在你处理一个发生在一个注册试用的 IE11 用户身上的拦截器时不高兴，传统的“首先修复拦截器，然后是关键错误，然后是表面问题”的方法不起作用。

当你最终开始一个 bug 修复的时候，对 bug 报告的调查和修复的开发进行时间限制，这样就有了清晰的界限。

这确保了开发人员不需要主动寻求帮助，因为许多人不愿意这样做。根据您的领域，也许当超过时间限制时，团队可以帮助查找错误，您的外部服务提供商可以加入，客户可以被要求进行屏幕共享会话，…

最后，如果一个 bug 真的无法修复(比如，解决它是不经济的；那个可怜的 IE11 用户)，一定要把它添加到你的应用程序的“已知问题”(或者技术需求)列表中，理想的情况是添加一条有用的错误消息。

# 6.当出现错误或中断时，改善用户体验

最后，在您的框架或编程语言中，尽可能在出现问题时提供良好的用户体验。

例如，如果您正在开发一个 React 应用程序，请确保失败的服务器请求不会使整个应用程序崩溃，并使用错误边界来传达您的应用程序的某些功能当前不可用。

理想情况下，您应该使用许多状态页面服务中的一个来准备状态页面([管理实验室](https://www.adminlabs.com/)、[状态页面](https://www.statuspage.io/)、…)，并链接到您服务器的 5xx 错误页面上的状态页面，以及您应用程序的页脚。

在严重的停机或问题期间，您可以告知发生了什么故障，您正在采取什么措施来修复它，以及预计什么时候可以正常运行，这样客户就不会独自一人想知道发生了什么。

还有，想想你的开发流程，如何改进来减少 bug 的影响。

例如，看看是否可以使用特性标志实现新的特性或变化，以便不是所有的客户都受到编程错误的影响。这种编程技术还很好地“嵌入”了一个新特性，这样就可以更容易地处理它的不可用性，甚至在将来。

此外，使用特性标志，您可以从真实客户(或者至少是活动系统上的内部客户)那里收集关于新特性的反馈，逐步推出特性或者恢复推出，然后在特性对每个人都可用并工作时删除标志。