<html>
<head>
<title>How To Add Form Validation to Your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向React应用程序添加表单验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-form-validation-to-your-react-app-e19f076e6c10?source=collection_archive---------2-----------------------#2019-08-25">https://betterprogramming.pub/how-to-add-form-validation-to-your-react-app-e19f076e6c10?source=collection_archive---------2-----------------------#2019-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c8a6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用Formik、Yep和React Bootstrap构建一个地址簿应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/def6539b386cc94b38cdfa6c991dd03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O9cJH6YdF-kl81ghyvfNWQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@the_roaming_platypus?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> timJ </a>在<a class="ae ky" href="https://unsplash.com/search/photos/address?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="d716" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React是一个简单的库，用于创建交互式前端web应用程序。它的特性集是基本的。它为您提供了基于组件的架构来构建web应用程序。</p><p id="eff9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个组件在一个应用程序中做一件小事，它们可以相互嵌套或并排放置。它不附带表单验证，所以构建没有库的复杂表单不会是一种愉快的体验。</p><p id="a15a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果要创建进行表单验证的表单，需要使用第三方库。</p><p id="d679" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/jaredpalmer/formik" rel="noopener ugc nofollow" target="_blank"> Formik </a>和<a class="ae ky" href="https://github.com/jquense/yup" rel="noopener ugc nofollow" target="_blank"> Yup </a>配合得非常好，可以满足大多数表单验证需求。Formik让我们能够构建表单、显示错误并处理表单值的更改，这是另一件我们必须手工完成的事情。</p><p id="785b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，让我们写一个模式来验证我们的表单域。它可以检查几乎任何东西，带有通用的验证码，如电子邮件和必填字段，作为内置功能提供。它还可以根据国家检查依赖于其他字段的字段，如邮政编码格式。</p><p id="364e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一块，我们将构建一个地址簿应用程序，它使用那些库，加上<a class="ae ky" href="https://react-bootstrap.github.io/" rel="noopener ugc nofollow" target="_blank"> React Bootstrap </a>，它与上面的库有很大的集成来创建表单。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1666" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">入门指南</h1><p id="9ddb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要运行<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a>来搭建应用。</p><p id="7c49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们运行<code class="fe mz na nb nc b">npx create-react-app address-book</code>来创建包含初始文件的应用项目文件夹。该应用程序将有一个主页来显示联系人，并让我们打开一个模式来添加联系人。</p><p id="41a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将有一个表，显示所有的联系人和编辑和删除按钮，每一行编辑或删除每个联系人。联系人将存储在一个中央Redux存储中，将联系人存储在一个中央位置，使他们易于访问。</p><p id="a350" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://reacttraining.com/react-router/" rel="noopener ugc nofollow" target="_blank"> React路由器</a>将用于路由。联系人将保存在后端，使用<a class="ae ky" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank"> JSON服务器包</a>生成。</p><p id="aa15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，我们必须安装一些库。为了安装我们上面提到的库，我们运行<code class="fe mz na nb nc b">npm i axios bootstrap formik react-bootstrap react-redux react-router-dom yup</code>。</p><p id="5a9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Axios是我们用来向后端发出HTTP请求的HTTP客户端。<code class="fe mz na nb nc b">react-router-dom</code>是React路由器最新版本的包名。</p><p id="3584" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经安装了所有的库，我们可以开始构建应用程序了。所有文件都将在<code class="fe mz na nb nc b">src</code>文件夹中，除非另有说明。</p><p id="ebd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们在Redux商店工作。我们在<code class="fe mz na nb nc b">src</code>文件夹中创建一个名为<code class="fe mz na nb nc b">actionCreator.js</code>的文件，并添加以下内容:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="6fe5" class="nh md it nc b gy ni nj l nk nl">import { SET_CONTACTS } from './actions';</span><span id="c70b" class="nh md it nc b gy nm nj l nk nl">const setContacts = (contacts) =&gt; {<br/>    return {<br/>        type: SET_CONTACTS,<br/>        payload: contacts<br/>    }<br/>};</span><span id="421d" class="nh md it nc b gy nm nj l nk nl">export { setContacts };</span></pre><p id="b191" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是动作创建器，用于创建在商店中存储联系人的动作。</p><p id="ff9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建另一个名为<code class="fe mz na nb nc b">actions.js</code>的文件，并添加:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="10b0" class="nh md it nc b gy ni nj l nk nl">const SET_CONTACTS = 'SET_CONTACTS';</span><span id="4fb3" class="nh md it nc b gy nm nj l nk nl">export { SET_CONTACTS };</span></pre><p id="6085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这具有用于分派动作的类型常数。</p><p id="49c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">App.js</code>中，我们用以下代码替换现有代码:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="fffb" class="nh md it nc b gy ni nj l nk nl">import React from 'react';<br/>import { Router, Route, Link } from "react-router-dom";<br/>import HomePage from './HomePage';<br/>import { createBrowserHistory as createHistory } from 'history'<br/>import Navbar from 'react-bootstrap/Navbar';<br/>import Nav from 'react-bootstrap/Nav';<br/>import './App.css';<br/>const history = createHistory();</span><span id="a15e" class="nh md it nc b gy nm nj l nk nl">function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Router history={history}&gt;<br/>        &lt;Navbar bg="primary" expand="lg" variant="dark" &gt;<br/>          &lt;Navbar.Brand href="#home"&gt;Address Book App&lt;/Navbar.Brand&gt;<br/>          &lt;Navbar.Toggle aria-controls="basic-navbar-nav" /&gt;<br/>          &lt;Navbar.Collapse id="basic-navbar-nav"&gt;<br/>            &lt;Nav className="mr-auto"&gt;<br/>              &lt;Nav.Link href="/"&gt;Home&lt;/Nav.Link&gt;<br/>            &lt;/Nav&gt;<br/>          &lt;/Navbar.Collapse&gt;<br/>        &lt;/Navbar&gt;<br/>        &lt;Route path="/" exact component={HomePage} /&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="b642" class="nh md it nc b gy nm nj l nk nl">export default App;</span></pre><p id="1f01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们添加导航栏并显示React路由器路由的路线的地方。在<code class="fe mz na nb nc b">App.css</code>中，为了使文本居中，我们将现有代码替换为:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0e57" class="nh md it nc b gy ni nj l nk nl">.App {<br/>  text-align: center;<br/>}</span></pre><p id="d5bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们建立我们的联系方式。这是我们应用程序中逻辑最强的部分。我们创建一个名为<code class="fe mz na nb nc b">ContactForm.js</code>的文件，并添加:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="449d" class="nh md it nc b gy ni nj l nk nl">import React from 'react';<br/>import { Formik } from 'formik';<br/>import Form from 'react-bootstrap/Form';<br/>import Col from 'react-bootstrap/Col';<br/>import InputGroup from 'react-bootstrap/InputGroup';<br/>import Button from 'react-bootstrap/Button';<br/>import * as yup from 'yup';<br/>import { COUNTRIES } from './exports';<br/>import PropTypes from 'prop-types';<br/>import { addContact, editContact, getContacts } from './requests';<br/>import { connect } from 'react-redux';<br/>import { setContacts } from './actionCreators';</span><span id="047d" class="nh md it nc b gy nm nj l nk nl">const schema = yup.object({<br/>  firstName: yup.string().required('First name is required'),<br/>  lastName: yup.string().required('Last name is required'),<br/>  address: yup.string().required('Address is required'),<br/>  city: yup.string().required('City is required'),<br/>  region: yup.string().required('Region is required'),<br/>  country: yup.string().required('Country is required').default('Afghanistan'),<br/>  postalCode: yup<br/>    .string()<br/>    .when('country', {<br/>      is: 'United States',<br/>      then: yup.string().matches(/^[0-9]{5}(?:-[0-9]{4})?$/, 'Invalid postal code'),<br/>    })<br/>    .when('country', {<br/>      is: 'Canada',<br/>      then: yup.string().matches(/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/, 'Invalid postal code'),<br/>    })<br/>    .required(),<br/>  phone: yup<br/>    .string()<br/>    .when('country', {<br/>      is: country =&gt; ["United States", "Canada"].includes(country),<br/>      then: yup.string().matches(/^[2-9]\d{2}[2-9]\d{2}\d{4}$/, 'Invalid phone nunber')<br/>    })<br/>    .required(),<br/>  email: yup.string().email('Invalid email').required('Email is required'),<br/>  age: yup.number()<br/>    .required('Age is required')<br/>    .min(0, 'Minimum age is 0')<br/>    .max(200, 'Maximum age is 200'),<br/>});</span><span id="09d0" class="nh md it nc b gy nm nj l nk nl">function ContactForm({<br/>  edit,<br/>  onSave,<br/>  setContacts,<br/>  contact,<br/>  onCancelAdd,<br/>  onCancelEdit,<br/>}) {<br/>  const handleSubmit = async (evt) =&gt; {<br/>    const isValid = await schema.validate(evt);<br/>    if (!isValid) {<br/>      return;<br/>    }<br/>    if (!edit) {<br/>      await addContact(evt);<br/>    }<br/>    else {<br/>      await editContact(evt);<br/>    }<br/>    const response = await getContacts();<br/>    setContacts(response.data);<br/>    onSave();<br/>  }</span><span id="979f" class="nh md it nc b gy nm nj l nk nl">return (<br/>    &lt;div className="form"&gt;<br/>      &lt;Formik<br/>        validationSchema={schema}<br/>        onSubmit={handleSubmit}<br/>        initialValues={contact || {}}<br/>      &gt;<br/>        {({<br/>          handleSubmit,<br/>          handleChange,<br/>          handleBlur,<br/>          values,<br/>          touched,<br/>          isInvalid,<br/>          errors,<br/>        }) =&gt; (<br/>            &lt;Form noValidate onSubmit={handleSubmit}&gt;<br/>              &lt;Form.Row&gt;<br/>                &lt;Form.Group as={Col} md="12" controlId="firstName"&gt;<br/>                  &lt;Form.Label&gt;First name&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    name="firstName"<br/>                    placeholder="First Name"<br/>                    value={values.firstName || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.firstName &amp;&amp; errors.firstName}<br/>                  /&gt;<br/>                  &lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.firstName}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;<br/>                &lt;Form.Group as={Col} md="12" controlId="lastName"&gt;<br/>                  &lt;Form.Label&gt;Last name&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    name="lastName"<br/>                    placeholder="Last Name"<br/>                    value={values.lastName || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.firstName &amp;&amp; errors.lastName}<br/>                  /&gt;</span><span id="6a50" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.lastName}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;<br/>                &lt;Form.Group as={Col} md="12" controlId="address"&gt;<br/>                  &lt;Form.Label&gt;Address&lt;/Form.Label&gt;<br/>                  &lt;InputGroup&gt;<br/>                    &lt;Form.Control<br/>                      type="text"<br/>                      placeholder="Address"<br/>                      aria-describedby="inputGroupPrepend"<br/>                      name="address"<br/>                      value={values.address || ''}<br/>                      onChange={handleChange}<br/>                      isInvalid={touched.address &amp;&amp; errors.address}<br/>                    /&gt;<br/>                    &lt;Form.Control.Feedback type="invalid"&gt;<br/>                      {errors.address}<br/>                    &lt;/Form.Control.Feedback&gt;<br/>                  &lt;/InputGroup&gt;<br/>                &lt;/Form.Group&gt;<br/>              &lt;/Form.Row&gt;<br/>              &lt;Form.Row&gt;<br/>                &lt;Form.Group as={Col} md="12" controlId="city"&gt;<br/>                  &lt;Form.Label&gt;City&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    placeholder="City"<br/>                    name="city"<br/>                    value={values.city || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.city &amp;&amp; errors.city}<br/>                  /&gt;</span><span id="42b8" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.city}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;<br/>                &lt;Form.Group as={Col} md="12" controlId="region"&gt;<br/>                  &lt;Form.Label&gt;Region&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    placeholder="Region"<br/>                    name="region"<br/>                    value={values.region || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.region &amp;&amp; errors.region}<br/>                  /&gt;<br/>                  &lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.region}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;</span><span id="f168" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Group as={Col} md="12" controlId="country"&gt;<br/>                  &lt;Form.Label&gt;Country&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    as="select"<br/>                    placeholder="Country"<br/>                    name="country"<br/>                    onChange={handleChange}<br/>                    value={values.country || ''}<br/>                    isInvalid={touched.region &amp;&amp; errors.country}&gt;<br/>                    {COUNTRIES.map(c =&gt; &lt;option key={c} value={c}&gt;{c}&lt;/option&gt;)}<br/>                  &lt;/Form.Control&gt;<br/>                  &lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.country}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;</span><span id="a9ba" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Group as={Col} md="12" controlId="postalCode"&gt;<br/>                  &lt;Form.Label&gt;Postal Code&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    placeholder="Postal Code"<br/>                    name="postalCode"<br/>                    value={values.postalCode || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.postalCode &amp;&amp; errors.postalCode}<br/>                  /&gt;</span><span id="1ae2" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.postalCode}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;</span><span id="7ef7" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Group as={Col} md="12" controlId="phone"&gt;<br/>                  &lt;Form.Label&gt;Phone&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    placeholder="Phone"<br/>                    name="phone"<br/>                    value={values.phone || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.phone &amp;&amp; errors.phone}<br/>                  /&gt;</span><span id="b9e5" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.phone}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;</span><span id="7aba" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Group as={Col} md="12" controlId="email"&gt;<br/>                  &lt;Form.Label&gt;Email&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    placeholder="Email"<br/>                    name="email"<br/>                    value={values.email || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.email &amp;&amp; errors.email}<br/>                  /&gt;</span><span id="3780" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.email}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;</span><span id="6154" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Group as={Col} md="12" controlId="age"&gt;<br/>                  &lt;Form.Label&gt;Age&lt;/Form.Label&gt;<br/>                  &lt;Form.Control<br/>                    type="text"<br/>                    placeholder="Age"<br/>                    name="age"<br/>                    value={values.age || ''}<br/>                    onChange={handleChange}<br/>                    isInvalid={touched.age &amp;&amp; errors.age}<br/>                  /&gt;</span><span id="b53d" class="nh md it nc b gy nm nj l nk nl">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                    {errors.age}<br/>                  &lt;/Form.Control.Feedback&gt;<br/>                &lt;/Form.Group&gt;<br/>              &lt;/Form.Row&gt;<br/>              &lt;Button type="submit" style={{ 'marginRight': '10px' }}&gt;Save&lt;/Button&gt;<br/>              &lt;Button type="button" onClick={edit ? onCancelEdit : onCancelAdd}&gt;Cancel&lt;/Button&gt;<br/>            &lt;/Form&gt;<br/>          )}<br/>      &lt;/Formik&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="5c46" class="nh md it nc b gy nm nj l nk nl">ContactForm.propTypes = {<br/>  edit: PropTypes.bool,<br/>  onSave: PropTypes.func,<br/>  onCancelAdd: PropTypes.func,<br/>  onCancelEdit: PropTypes.func,<br/>  contact: PropTypes.object<br/>}</span><span id="ee45" class="nh md it nc b gy nm nj l nk nl">const mapStateToProps = state =&gt; {<br/>  return {<br/>    contacts: state.contacts,<br/>  }<br/>}</span><span id="e526" class="nh md it nc b gy nm nj l nk nl">const mapDispatchToProps = dispatch =&gt; ({<br/>  setContacts: contacts =&gt; dispatch(setContacts(contacts))<br/>})</span><span id="27b4" class="nh md it nc b gy nm nj l nk nl">export default connect(<br/>  mapStateToProps,<br/>  mapDispatchToProps<br/>)(ContactForm);</span></pre><p id="8268" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里使用Formik，以便于构建我们的联系表单，我们的Boostrap <code class="fe mz na nb nc b">Form</code>组件嵌套在<code class="fe mz na nb nc b">Formik</code>组件中，因此我们可以使用Formik的<code class="fe mz na nb nc b">handleChange</code>、<code class="fe mz na nb nc b">handleSubmit</code>、<code class="fe mz na nb nc b">values</code>、<code class="fe mz na nb nc b">touched</code>和<code class="fe mz na nb nc b">errors</code>参数。</p><p id="aaf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">handleChange</code>是一个函数，让我们不用自己写代码就可以从输入中更新表单域数据。<code class="fe mz na nb nc b">handleSubmit</code>是我们传递给<code class="fe mz na nb nc b">Formik</code>组件的<code class="fe mz na nb nc b">onSubmit</code>处理程序的函数。</p><p id="863c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数中的参数是我们输入的数据，字段名作为键，由每个字段的<code class="fe mz na nb nc b">name</code>属性定义，每个字段的值作为那些键的值。</p><p id="54b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，在每个<code class="fe mz na nb nc b">value</code>属性中，我们有<code class="fe mz na nb nc b">||''</code>，这样我们就不会得到未定义的值，并防止不受控制的表单警告被触发。</p><p id="4b92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了显示表单验证消息，我们必须将<code class="fe mz na nb nc b">isInvalid</code>属性传递给每个<code class="fe mz na nb nc b">Form.Control</code>组件。<code class="fe mz na nb nc b">schema</code>对象是<code class="fe mz na nb nc b">Formik</code>将检查表单验证的对象。</p><p id="43ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">required</code>函数中的参数是验证错误消息。<code class="fe mz na nb nc b">matches</code>、<code class="fe mz na nb nc b">min</code>和<code class="fe mz na nb nc b">max</code>函数的第二个参数也是验证消息。</p><p id="b6fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">ContactForm</code>函数的参数是props，我们将从稍后构建的<code class="fe mz na nb nc b">HomePage</code>组件传入。</p><p id="be12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">handleSubmit</code>功能检查数据是否有效，如果有效，将根据是添加还是编辑联系人进行保存。</p><p id="1f98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保存成功后，我们在存储中设置联系人并调用<code class="fe mz na nb nc b">onSave</code> prop，这是一个关闭表单所在模态的函数。模式将在主页上定义。</p><p id="c271" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">mapStateToProps</code>是React Redux提供的一个函数，因此我们可以将状态直接映射到组件的道具，正如函数名所示。</p><p id="1b4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">mapDispatchToProps</code>允许我们在组件的props中调用一个名为<code class="fe mz na nb nc b">setContacts</code>的函数来调度动作，正如我们在<code class="fe mz na nb nc b">actionCreators.js</code>中定义的那样。</p><p id="9d96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建一个名为<code class="fe mz na nb nc b">exports.js</code>的文件，并将:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="cf38" class="nh md it nc b gy ni nj l nk nl">export const COUNTRIES = ["Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Anguilla", "Antigua &amp;amp; Barbuda", "Argentina", "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan", "Bahamas"<br/>    , "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bermuda", "Bhutan", "Bolivia", "Bosnia &amp;amp; Herzegovina", "Botswana", "Brazil", "British Virgin Islands"<br/>    , "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Cayman Islands", "Chad", "Chile", "China", "Colombia", "Congo", "Cook Islands", "Costa Rica"<br/>    , "Cote D Ivoire", "Croatia", "Cruise Ship", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea"<br/>    , "Estonia", "Ethiopia", "Falkland Islands", "Faroe Islands", "Fiji", "Finland", "France", "French Polynesia", "French West Indies", "Gabon", "Gambia", "Georgia", "Germany", "Ghana"<br/>    , "Gibraltar", "Greece", "Greenland", "Grenada", "Guam", "Guatemala", "Guernsey", "Guinea", "Guinea Bissau", "Guyana", "Haiti", "Honduras", "Hong Kong", "Hungary", "Iceland", "India"<br/>    , "Indonesia", "Iran", "Iraq", "Ireland", "Isle of Man", "Israel", "Italy", "Jamaica", "Japan", "Jersey", "Jordan", "Kazakhstan", "Kenya", "Kuwait", "Kyrgyz Republic", "Laos", "Latvia"<br/>    , "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Macau", "Macedonia", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Mauritania"<br/>    , "Mauritius", "Mexico", "Moldova", "Monaco", "Mongolia", "Montenegro", "Montserrat", "Morocco", "Mozambique", "Namibia", "Nepal", "Netherlands", "Netherlands Antilles", "New Caledonia"<br/>    , "New Zealand", "Nicaragua", "Niger", "Nigeria", "Norway", "Oman", "Pakistan", "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal"<br/>    , "Puerto Rico", "Qatar", "Reunion", "Romania", "Russia", "Rwanda", "Saint Pierre &amp;amp; Miquelon", "Samoa", "San Marino", "Satellite", "Saudi Arabia", "Senegal", "Serbia", "Seychelles"<br/>    , "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "South Africa", "South Korea", "Spain", "Sri Lanka", "St Kitts &amp;amp; Nevis", "St Lucia", "St Vincent", "St. Lucia", "Sudan"<br/>    , "Suriname", "Swaziland", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor L'Este", "Togo", "Tonga", "Trinidad &amp;amp; Tobago", "Tunisia"<br/>    , "Turkey", "Turkmenistan", "Turks &amp;amp; Caicos", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "United States Minor Outlying Islands", "Uruguay"<br/>    , "Uzbekistan", "Venezuela", "Vietnam", "Virgin Islands (US)", "Yemen", "Zambia", "Zimbabwe"];</span></pre><p id="6c19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是表单中国家字段的国家。</p><p id="5e96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">HomePage.js</code>中，我们把:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="814f" class="nh md it nc b gy ni nj l nk nl">import React from 'react';<br/>import { useState, useEffect } from 'react';<br/>import Table from 'react-bootstrap/Table'<br/>import ButtonToolbar from 'react-bootstrap/ButtonToolbar';<br/>import Button from 'react-bootstrap/Button';<br/>import Modal from 'react-bootstrap/Modal'<br/>import ContactForm from './ContactForm';<br/>import './HomePage.css';<br/>import { connect } from 'react-redux';<br/>import { getContacts, deleteContact } from './requests';</span><span id="4b17" class="nh md it nc b gy nm nj l nk nl">function HomePage() {<br/>  const [openAddModal, setOpenAddModal] = useState(false);<br/>  const [openEditModal, setOpenEditModal] = useState(false);<br/>  const [initialized, setInitialized] = useState(false);<br/>  const [selectedId, setSelectedId] = useState(0);<br/>  const [selectedContact, setSelectedContact] = useState({});<br/>  const [contacts, setContacts] = useState([]);</span><span id="1ac8" class="nh md it nc b gy nm nj l nk nl">const openModal = () =&gt; {<br/>    setOpenAddModal(true);<br/>  }</span><span id="719b" class="nh md it nc b gy nm nj l nk nl">const closeModal = () =&gt; {<br/>    setOpenAddModal(false);<br/>    setOpenEditModal(false);<br/>    getData();<br/>  }</span><span id="0100" class="nh md it nc b gy nm nj l nk nl">const cancelAddModal = () =&gt; {<br/>    setOpenAddModal(false);<br/>  }</span><span id="9b27" class="nh md it nc b gy nm nj l nk nl">const editContact = (contact) =&gt; {<br/>    setSelectedContact(contact);<br/>    setOpenEditModal(true);<br/>  }</span><span id="5266" class="nh md it nc b gy nm nj l nk nl">const cancelEditModal = () =&gt; {<br/>    setOpenEditModal(false);<br/>  }</span><span id="2f9c" class="nh md it nc b gy nm nj l nk nl">const getData = async () =&gt; {<br/>    const response = await getContacts();<br/>    setContacts(response.data);<br/>    setInitialized(true);<br/>  }</span><span id="044c" class="nh md it nc b gy nm nj l nk nl">const deleteSelectedContact = async (id) =&gt; {<br/>    await deleteContact(id);<br/>    getData();<br/>  }</span><span id="21bb" class="nh md it nc b gy nm nj l nk nl">useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      getData();<br/>    }<br/>  })</span><span id="7153" class="nh md it nc b gy nm nj l nk nl">return (<br/>    &lt;div className="home-page"&gt;<br/>      &lt;h1&gt;Contacts&lt;/h1&gt;<br/>      &lt;Modal show={openAddModal} onHide={closeModal} &gt;<br/>        &lt;Modal.Header closeButton&gt;<br/>          &lt;Modal.Title&gt;Add Contact&lt;/Modal.Title&gt;<br/>        &lt;/Modal.Header&gt;<br/>        &lt;Modal.Body&gt;<br/>          &lt;ContactForm edit={false} onSave={closeModal.bind(this)} onCancelAdd={cancelAddModal} /&gt;<br/>        &lt;/Modal.Body&gt;<br/>      &lt;/Modal&gt;</span><span id="0d63" class="nh md it nc b gy nm nj l nk nl">&lt;Modal show={openEditModal} onHide={closeModal}&gt;<br/>        &lt;Modal.Header closeButton&gt;<br/>          &lt;Modal.Title&gt;Edit Contact&lt;/Modal.Title&gt;<br/>        &lt;/Modal.Header&gt;<br/>        &lt;Modal.Body&gt;<br/>          &lt;ContactForm edit={true} onSave={closeModal.bind(this)} contact={selectedContact} onCancelEdit={cancelEditModal} /&gt;<br/>        &lt;/Modal.Body&gt;<br/>      &lt;/Modal&gt;<br/>      &lt;ButtonToolbar onClick={openModal}&gt;<br/>        &lt;Button variant="outline-primary"&gt;Add Contact&lt;/Button&gt;<br/>      &lt;/ButtonToolbar&gt;<br/>      &lt;br /&gt;<br/>      &lt;Table striped bordered hover&gt;<br/>        &lt;thead&gt;<br/>          &lt;tr&gt;<br/>            &lt;th&gt;First Name&lt;/th&gt;<br/>            &lt;th&gt;Last Name&lt;/th&gt;<br/>            &lt;th&gt;Address&lt;/th&gt;<br/>            &lt;th&gt;City&lt;/th&gt;<br/>            &lt;th&gt;Country&lt;/th&gt;<br/>            &lt;th&gt;Postal Code&lt;/th&gt;<br/>            &lt;th&gt;Phone&lt;/th&gt;<br/>            &lt;th&gt;Email&lt;/th&gt;<br/>            &lt;th&gt;Age&lt;/th&gt;<br/>            &lt;th&gt;Edit&lt;/th&gt;<br/>            &lt;th&gt;Delete&lt;/th&gt;<br/>          &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>          {contacts.map(c =&gt; (<br/>            &lt;tr key={c.id}&gt;<br/>              &lt;td&gt;{c.firstName}&lt;/td&gt;<br/>              &lt;td&gt;{c.lastName}&lt;/td&gt;<br/>              &lt;td&gt;{c.address}&lt;/td&gt;<br/>              &lt;td&gt;{c.city}&lt;/td&gt;<br/>              &lt;td&gt;{c.country}&lt;/td&gt;<br/>              &lt;td&gt;{c.postalCode}&lt;/td&gt;<br/>              &lt;td&gt;{c.phone}&lt;/td&gt;<br/>              &lt;td&gt;{c.email}&lt;/td&gt;<br/>              &lt;td&gt;{c.age}&lt;/td&gt;<br/>              &lt;td&gt;<br/>                &lt;Button variant="outline-primary" onClick={editContact.bind(this, c)}&gt;Edit&lt;/Button&gt;<br/>              &lt;/td&gt;<br/>              &lt;td&gt;<br/>                &lt;Button variant="outline-primary" onClick={deleteSelectedContact.bind(this, c.id)}&gt;Delete&lt;/Button&gt;<br/>              &lt;/td&gt;<br/>            &lt;/tr&gt;<br/>          ))}<br/>        &lt;/tbody&gt;<br/>      &lt;/Table&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="c199" class="nh md it nc b gy nm nj l nk nl">const mapStateToProps = state =&gt; {<br/>  return {<br/>    contacts: state.contacts,<br/>  }<br/>}</span><span id="3e68" class="nh md it nc b gy nm nj l nk nl">export default connect(<br/>  mapStateToProps,<br/>  null<br/>)(HomePage);</span></pre><p id="9920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它有显示联系人的表格和添加、编辑和删除联系人的按钮。它在第一次加载时用<code class="fe mz na nb nc b">useEffect</code>的回调函数中的<code class="fe mz na nb nc b">getData</code>函数调用获取一次数据。</p><p id="22a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次渲染都会调用<code class="fe mz na nb nc b">useEffect</code>的回调，所以我们想设置一个<code class="fe mz na nb nc b">initialized</code>标志，并检查它是否只在<code class="fe mz na nb nc b">true</code>时才加载。</p><p id="9cad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们将这个组件中的所有道具传递给了<code class="fe mz na nb nc b">ContactForm</code>组件。</p><p id="29da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将一个参数传递给一个<code class="fe mz na nb nc b">onClick</code>处理函数，我们必须调用函数上的<code class="fe mz na nb nc b">bind</code>，并将函数的参数作为第二个参数传递给<code class="fe mz na nb nc b">bind</code>。</p><p id="ba48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在这个文件中，我们有<code class="fe mz na nb nc b">editContact.bind(this, c)</code>，其中<code class="fe mz na nb nc b">c</code>是联系对象。<code class="fe mz na nb nc b">editContact</code>功能定义如下:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2d2b" class="nh md it nc b gy ni nj l nk nl">const editContact = (contact) =&gt; {<br/>    setSelectedContact(contact);<br/>    setOpenEditModal(true);<br/>  }</span></pre><p id="10a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">c</code>是我们传入的<code class="fe mz na nb nc b">contact</code>参数。</p><p id="1ca3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建一个名为<code class="fe mz na nb nc b">HomePage.css</code>的文件，并将:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="b8ec" class="nh md it nc b gy ni nj l nk nl">.home-page {<br/>  padding: 20px;<br/>}</span></pre><p id="0fc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一些填充。</p><p id="1893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">index.js</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="1ea9" class="nh md it nc b gy ni nj l nk nl">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import * as serviceWorker from './serviceWorker';<br/>import { contactsReducer } from './reducers';<br/>import { Provider } from 'react-redux'<br/>import { createStore, combineReducers } from 'redux'</span><span id="c489" class="nh md it nc b gy nm nj l nk nl">const addressBookApp = combineReducers({<br/>    contacts: contactsReducer,<br/>})</span><span id="c4ea" class="nh md it nc b gy nm nj l nk nl">const store = createStore(addressBookApp)</span><span id="40dd" class="nh md it nc b gy nm nj l nk nl">ReactDOM.render(<br/>    &lt;Provider store={store}&gt;<br/>        &lt;App /&gt;<br/>    &lt;/Provider&gt;<br/>    , document.getElementById('root'));</span><span id="aa3b" class="nh md it nc b gy nm nj l nk nl">// If you want your app to work offline and load faster, you can change<br/>// unregister() to register() below. Note this comes with some pitfalls.<br/>// Learn more about service workers: <a class="ae ky" href="https://bit.ly/CRA-PWA" rel="noopener ugc nofollow" target="_blank">https://bit.ly/CRA-PWA</a><br/>serviceWorker.unregister();</span></pre><p id="d232" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们组合了reducers并创建了store，然后用<code class="fe mz na nb nc b">Provider</code>组件将它注入到我们的应用程序中，这样我们就可以在应用程序的任何地方使用它。</p><p id="408f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们创建一个名为<code class="fe mz na nb nc b">reducers.js</code>的文件，并添加:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="7f19" class="nh md it nc b gy ni nj l nk nl">import { SET_CONTACTS } from './actions';</span><span id="218e" class="nh md it nc b gy nm nj l nk nl">function contactsReducer(state = {}, action) {<br/>    switch (action.type) {<br/>        case SET_CONTACTS:<br/>            state = JSON.parse(JSON.stringify(action.payload));<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="5090" class="nh md it nc b gy nm nj l nk nl">export { contactsReducer };</span></pre><p id="9b8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们存储联系人的缩减器，我们通过调用组件中的<code class="fe mz na nb nc b">mapDispatchToProps</code>函数提供的prop来调度这些联系人。</p><p id="64a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建一个名为<code class="fe mz na nb nc b">requests.js</code>的文件，并添加:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8271" class="nh md it nc b gy ni nj l nk nl">const APIURL = '<a class="ae ky" href="http://localhost:3000'" rel="noopener ugc nofollow" target="_blank">http://localhost:3000'</a>;<br/>const axios = require('axios');<br/>export const getContacts = () =&gt; axios.get(`${APIURL}/contacts`);<br/>export const addContact = (data) =&gt; axios.post(`${APIURL}/contacts`, data);<br/>export const editContact = (data) =&gt; axios.put(`${APIURL}/contacts/${data.id}`, data);<br/>export const deleteContact = (id) =&gt; axios.delete(`${APIURL}/contacts/${id}`);</span></pre><p id="df2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些功能向后端发出HTTP请求，以保存和删除联系人。</p><p id="02be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在<code class="fe mz na nb nc b">public/index.html</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d95f" class="nh md it nc b gy ni nj l nk nl">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;</span><span id="1b85" class="nh md it nc b gy nm nj l nk nl">&lt;head&gt;<br/>  &lt;meta charset="utf-8" /&gt;<br/>  &lt;link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" /&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>  &lt;meta name="theme-color" content="#000000" /&gt;<br/>  &lt;meta name="description" content="Web site created using create-react-app" /&gt;<br/>  &lt;link rel="apple-touch-icon" href="logo192.png" /&gt;<br/>  &lt;link rel="manifest" crossorigin="use-credentials" href="%PUBLIC_URL%/manifest.json" /&gt;</span><span id="51a1" class="nh md it nc b gy nm nj l nk nl">&lt;!--<br/>      manifest.json provides metadata used when your web app is installed on a<br/>      user's mobile device or desktop. See <a class="ae ky" href="https://developers.google.com/web/fundamentals/web-app-manifest/" rel="noopener ugc nofollow" target="_blank">https://developers.google.com/web/fundamentals/web-app-manifest/</a><br/>    --&gt;<br/>  &lt;!--<br/>      Notice the use of %PUBLIC_URL% in the tags above.<br/>      It will be replaced with the URL of the `public` folder during the build.<br/>      Only files inside the `public` folder can be referenced from the HTML.</span><span id="858e" class="nh md it nc b gy nm nj l nk nl">Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will<br/>      work correctly both with client-side routing and a non-root public URL.<br/>      Learn how to configure a non-root public URL by running `npm run build`.<br/>    --&gt;<br/>  &lt;title&gt;React Address Book App&lt;/title&gt;<br/>  &lt;link rel="stylesheet" href="<a class="ae ky" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css</a>"<br/>    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /&gt;<br/>&lt;/head&gt;</span><span id="c30a" class="nh md it nc b gy nm nj l nk nl">&lt;body&gt;<br/>  &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;<br/>  &lt;div id="root"&gt;&lt;/div&gt;<br/>  &lt;!--<br/>      This HTML file is a template.<br/>      If you open it directly in the browser, you will see an empty page.</span><span id="b298" class="nh md it nc b gy nm nj l nk nl">You can add webfonts, meta tags, or analytics to this file.<br/>      The build step will place the bundled scripts into the &lt;body&gt; tag.</span><span id="2819" class="nh md it nc b gy nm nj l nk nl">To begin the development, run `npm start` or `yarn start`.<br/>      To create a production bundle, use `npm run build` or `yarn build`.<br/>    --&gt;<br/>&lt;/body&gt;</span><span id="35e8" class="nh md it nc b gy nm nj l nk nl">&lt;/html&gt;</span></pre><p id="8752" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更改标题并添加引导样式表。</p><p id="bd48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以通过在Windows上运行<code class="fe mz na nb nc b">set PORT=3001 &amp;&amp; react-scripts start</code>或在Linux上运行<code class="fe mz na nb nc b">PORT=3006 react-scripts start</code>来运行应用程序。</p><p id="e4b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了启动后端，我们首先通过运行<code class="fe mz na nb nc b">npm i json-server</code>来安装<code class="fe mz na nb nc b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d3e4" class="nh md it nc b gy ni nj l nk nl">json-server --watch db.json</span></pre><p id="f6b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">db.json</code>中，将文本改为:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="94b3" class="nh md it nc b gy ni nj l nk nl">{<br/>  "contacts": [<br/>  ]<br/>}</span></pre><p id="6e0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们有了在可用的<code class="fe mz na nb nc b">requests.js</code>中定义的<code class="fe mz na nb nc b">contacts</code>端点。</p><p id="28e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，我们得到了以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/f0189119955e2e23d8ca9a28cc9761f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFb2MFrfNtkOUItdGkWZWg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/751d2681035b39a9bbd8da8b261ec55b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KpQnx7nTcBYOKO3CinOc8w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/9d3348846e2374867d8616963dcd66e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BSZB0BkJjmLplax7WILf7A.png"/></div></div></figure></div></div>    
</body>
</html>