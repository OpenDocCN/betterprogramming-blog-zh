<html>
<head>
<title>Building Better Concurrency, Finite State Processes, and Modeling Processes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建更好的并发性、有限状态流程和建模流程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-better-concurrency-finite-state-processes-and-modeling-processes-ea0a06b8d529?source=collection_archive---------12-----------------------#2021-01-06">https://betterprogramming.pub/building-better-concurrency-finite-state-processes-and-modeling-processes-ea0a06b8d529?source=collection_archive---------12-----------------------#2021-01-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2bcb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们构建更健壮的并发系统</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/257e4e7fd25bb7bcb27b6428310157a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cy6Dff7bQxN8EhVGtAxkwg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由LTSA工具生成的状态图</p></figure><p id="6067" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你好，我是阿赛尔。今天，我将通过一个示例场景向您展示如何使用FSP为并发程序建模。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="73ed" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">FSP是什么？</h1><p id="0abd" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">有限状态进程(FSP)是一种用于开发并发进程系统的抽象语言。</p><p id="7950" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们使用建模来获得对提议设计的充分性和有效性的信心。与大多数复杂的设计任务一样，通过采用多层次的抽象可以更好地理解并发性。</p><p id="e145" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，系统的功能需求必须根据其期望的行为得到很好的理解。接下来，应该探索并发的可能角色。这最好使用线程的抽象来完成，而不需要致力于特定的实现。</p><p id="17b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在可能的范围内，实现并发性的机制的最终选择应该保持开放，以允许性能的微调和为各种产品配置不同地分发组件的灵活性。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="911d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">让我们考虑如何使用一个叫做FSP的进程代数来描述并发进程</h1><p id="dc3e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">使用一个例子将使解释概念和模型变得更容易。让我们分析并模拟两个学生共享一台打印机打印文档，一名技术人员重新填充打印机的场景。</p><h2 id="d9be" class="my mc it bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">首先，我们可以分析打印机</h2><ul class=""><li id="5542" class="nk nl it la b lb mt le mu lh nm ll nn lp no lt np nq nr ns bi translated">打印机的最大纸张数量为三张。学生最多可以打印三份文档。</li><li id="b17d" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">如果纸张计数为零，则必须重新填充</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">打印机过程</p></figure><p id="b5da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当用户(学生或技术人员)获得打印机时，它打印文档，释放文档，并返回到其初始状态。这被称为<em class="oa">重复行为。</em></p><h2 id="fbed" class="my mc it bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">如何制作流程动画</h2><p id="c6b8" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">要制作动画，首先你必须编译你写的代码，然后你必须导航到“绘制”标签。然后，点击动画按钮[2]。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/e0fb4f1f32a63071355c248d9e62ddaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nM8OBC50fXiTjVdFaxXqrA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">制作打印机动画</p></figure><p id="5628" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在动画师中，你可以看到打印机已经打印了三个文档，并且它去补充。必须由技术人员来重新填充。那部分以后再分析。</p><h2 id="57a5" class="my mc it bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">接下来，我们来分析一下打印文档的学生</h2><p id="5e07" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们可以使用条件进程(<code class="fe oc od oe of b">if</code>、<code class="fe oc od oe of b">then</code>、<code class="fe oc od oe of b">else</code>)来编写FSP代码。<code class="fe oc od oe of b">DOCS_TO_PRINT = 3</code>是传递给流程的<code class="fe oc od oe of b">3</code>参数。我们从<code class="fe oc od oe of b">0</code>开始<code class="fe oc od oe of b">PRINT</code>过程。<code class="fe oc od oe of b">doc_count</code>是被索引的动作标签，导致被索引的动作:<code class="fe oc od oe of b">PRINT[doc_count]</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有条件过程的学生过程</p></figure><p id="e67f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样的进程也可以使用保护进程来编写。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带保护进程的学生进程</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/7a80d4c61de73efb8da3a4041e98e944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dm-A-d_7P4d7-wKBAyq2RQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">制作学生流程动画</p></figure><h2 id="8b44" class="my mc it bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">接下来，我们来分析一下为打印纸补充墨水的技术人员</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="5a8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于如何继续，技术人员流程有多种操作选择。但是当它与学生进程同步时，立即终止将被阻止。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/868b6978775de6438c872f12b4c137b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrDL2rkWV46fFaXeNmXTKQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">制作技术人员流程动画</p></figure><h2 id="08ae" class="my mc it bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">最后，让我们看看复合过程</h2><ul class=""><li id="051c" class="nk nl it la b lb mt le mu lh nm ll nn lp no lt np nq nr ns bi translated">复合流程应该与所有子流程同步，为了做到这一点，我们可以定义一组名为<strong class="la iu"> </strong> <code class="fe oc od oe of b">PRINT_Actions</code>的操作。</li><li id="6b39" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated"><code class="fe oc od oe of b">terminate/s1.terminate</code>是一个重新标记的操作。通过使用那个<code class="fe oc od oe of b">/</code>，我们将<code class="fe oc od oe of b">s1.terminate</code>动作重新标记为终止。否则，动画师会显示<code class="fe oc od oe of b">s1.terminate</code>、<code class="fe oc od oe of b">s2.terminate</code>和<code class="fe oc od oe of b">tcn.terminate</code>。</li><li id="e414" class="nk nl it la b lb nt le nu lh nv ll nw lp nx lt np nq nr ns bi translated">我们可以使用互斥的共享资源建模模式来同步用户和<code class="fe oc od oe of b">PRINTER</code></li></ul><pre class="kj kk kl km gt oi of oj ok aw ol bi"><span id="b2fe" class="my mc it of b gy om on l oo op">|| SHARED_PRINTER = (s1: STUDENT(2) || s2: STUDENT(3) || tcn : TECHNICIAN || <strong class="of iu">All_Users :: PRINTER</strong>) </span></pre><p id="b6c6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将允许一个用户获取资源，另一个用户释放资源。因此，当<code class="fe oc od oe of b">PRINTER</code>与<code class="fe oc od oe of b">USER</code>进程组合在一起时，这种组合确保了只有获得资源的同一个用户才能释放它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">打印机系统的复合过程</p></figure><p id="d1ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望这有助于你的FSP并发研究。干杯！</p></div></div>    
</body>
</html>