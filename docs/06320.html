<html>
<head>
<title>Micro Frontends, Role-Based Applications, and You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微前端、基于角色的应用程序和您</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/micro-frontends-role-based-applications-and-you-5d6cd8d796eb?source=collection_archive---------8-----------------------#2020-09-21">https://betterprogramming.pub/micro-frontends-role-based-applications-and-you-5d6cd8d796eb?source=collection_archive---------8-----------------------#2020-09-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2391" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将一个安全的、高度可迭代的用户界面整合到你的下一个应用中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f018904f9c07738426c3a2fe6619ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eIvkieA3puiz1hpu"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">paweczerwi ski在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="9f25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">微服务很棒——单责任、特定领域的API，可以独立迭代。一个主要的web应用程序可以由几十到几百甚至几千个这样的小家伙组成。</p><p id="10f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它们可以独立扩展，让应用团队能够用<a class="ae ky" href="https://medium.com/better-programming/how-to-choose-the-best-programming-language-for-your-new-project-d72b2e586aac" rel="noopener">最合适的语言</a>编写代码来完成工作，并在出现故障时给你留下一个小的爆炸半径(这意味着如果一个微服务出现故障，整个应用都不会中断)。</p><p id="ebcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有的大人物也在这么做。优步有<a class="ae ky" href="https://eng.uber.com/microservice-architecture/" rel="noopener ugc nofollow" target="_blank">~ 2200个微服务</a>，网飞有<a class="ae ky" href="https://medium.com/refraction-tech-everything/how-netflix-works-the-hugely-simplified-complex-stuff-that-happens-every-time-you-hit-play-3a40c9be254b/" rel="noopener">700个左右</a>，亚马逊……嗯，亚马逊有很多。</p><p id="b3ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，您知道可以将同样的基本原理应用到前端吗？<em class="lv">微</em>不一定只适用于后端API。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="308f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">什么是微前端？</h1><p id="f52f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">微前端遵循与微服务相同的概念，并提供相同的优势。他们把你的大UI块分割成小的、孤立的、可独立迭代的块。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/f466a3d5b778e88260d91f2555dd4622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K83BLkU9IqRKG7lw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="nb">简单的微前端架构</em></p></figure><p id="da8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最初的构建之后，你的UI很有可能比你的后端迭代得更频繁。不管是大是小，你都会经历更多的循环，尽你所能让用户体验最好。</p><p id="8514" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你应该的！</p><p id="02c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以把你的前端分成一口大小的块不是很有意义吗？是啊！</p><p id="4461" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我不希望你认为用微前端构建你的应用程序会使用户体验感觉脱节。这不是目标。那是一个反目标。您希望您的应用程序在快速迭代小功能的同时继续保持凝聚力。</p><p id="44ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在考虑进入<a class="ae ky" href="https://medium.com/better-programming/are-you-really-ready-for-ci-cd-9a8bf6d01b8a" rel="noopener">连续交付</a>，我强烈建议你也考虑进入微前端。交付小的、增量的更新正是这种架构所要做的，有了微前端，您就能让自己做到这一点。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="adcc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">基于角色的应用程序</h1><p id="e502" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果你决定进入微前端，恭喜你！你也向自己敞开了一种模式，这种模式将在未来为你省去许多麻烦:<em class="lv">基于角色的应用</em>。</p><p id="7d94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会问，什么是基于角色的应用程序？</p><p id="c2e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于角色的应用程序是由微前端和具有特定安全限制的API组成的系统。</p><p id="6aca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们举个例子。</p><p id="8cb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你是芹菜爱好者论坛的创建者，跟踪者。论坛的架构图如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/0e83c0632a844a8c38db96f7b608165b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ouRxbHC31g9pP9hi.png"/></div></div></figure><p id="6c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的论坛中，您有拥有不同权限集的用户。每组定义的权限被称为一个<em class="lv">角色</em>。你在《跟踪狂》中有四个角色:</p><ul class=""><li id="fe21" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">用户—查看和创建帖子。</li><li id="bf35" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">版主—查看、编辑、创建和删除帖子。</li><li id="8d58" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">管理员—查看、编辑、创建和删除帖子，并管理版主。</li><li id="cbfa" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">被禁——什么都没有。</li></ul><p id="af67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">登录您的应用程序的每个人都与一个角色相关联。在你的三个微前端中，你对谁能做什么有明确的界限。因此，您在每个服务上设置了一个限制，将范围限制到特定的角色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/8853d733bf1560239473412cb42a6362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HHtBGNh4FFTpHtxS.png"/></div></div></figure><p id="96da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何具有适当角色的人都可以访问应用程序的这一部分。更重要的是，任何没有允许角色的<em class="lv">都被明确拒绝访问微前端。</em></p><p id="3811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你的API是公共的，<a class="ae ky" href="https://medium.com/better-programming/you-should-open-up-that-api-youve-been-working-on-b0313a4df9bc" rel="noopener">它完全应该是</a>，这些权限也必须在API上执行。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="00ec" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">保护微前端</h1><p id="3a74" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有许多不同的方法可以增加web应用程序和支持API的安全性。对于基于角色的应用程序，您必须在授权中包含角色。无论是单独的标题还是幕后查找，您都必须验证用户有权限做他们想做的事情。</p><p id="93cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的微前端中，您需要在任何内容呈现之前验证用户具有与该应用程序相关的角色。这个应用程序很小而且很集中，所以在源代码中用<a class="ae ky" href="https://medium.com/better-programming/new-project-just-hardcode-it-bac72e1a231e" rel="noopener">硬编码允许的角色</a>是完全可以的。流程可以简单到登录&gt;查找用户角色&gt;用户拥有角色？&gt;未授权/正常。</p><p id="d093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该API将做一些类似的事情，除了它不应该被绑定到一个登录事件。当进行任何API调用时，用户将已经登录。因此，一定要在授权令牌中包含用户的标识信息。类似于<a class="ae ky" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank"> OAuth 2.0 </a>的东西通过<a class="ae ky" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> JWT (JSON Web Token) </a>提供了唯一标识用户所必需的上下文。</p><p id="acf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向API请求添加一个<code class="fe nq nr ns nt b">Role</code>头将允许您轻松地向应用程序添加安全性测试。今天构建应用程序时，全面彻底的安全测试是必须的。恶意用户会试图利用您的系统，您需要确信您已经正确设置了微前端和API。</p><p id="f517" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在<a class="ae ky" href="https://github.com/allenheltondev/postman-security-test-generator/" rel="noopener ugc nofollow" target="_blank">我的GitHub repo </a>中提供了一个<a class="ae ky" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>集合和环境，它将自动测试你的API是否有安全漏洞。用这个来帮助确保你有合适的微前端和<a class="ae ky" href="https://medium.com/better-programming/api-first-development-build-consistent-meaningful-apis-with-postman-db7d1e9e8b5c" rel="noopener"> API设计</a>来支持你的应用。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="531a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">访问微前端</h1><p id="152d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">提供对你的微前端的访问，真的没有对错之分。我收回那句话。肯定有错误的方式。</p><p id="389e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让用户访问微前端的两种最常见的方式是通过子域和路由。</p><p id="6d8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两种模式在互联网上随处可见，如何实现完全取决于您。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/61cc434ddfb0cb80dbf62c33b136bdb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HYiSHpc92iDqATMF.png"/></div></div></figure><p id="21d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你热衷于建立DNS路由表，子域名可能是你的新朋友。如果你像躲避瘟疫一样避开DNS路由，那么路由将是你的选择。无论您选择哪种方法，为您的用户提供无缝体验都是您的主要目标。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a6e0" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">微观结论</h1><p id="a114" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您已经在为您的API构建微服务了。继续构建你的单片前端是没有意义的。</p><p id="4c3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分解它，独立迭代，推动小的、增量的变化。你不会因为拼错了一个标签就想重新部署整个前端吧？</p><p id="eeb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将安全性直接构建到您的应用中。定义具有一组已知权限的角色。封锁它。</p><p id="ba6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你作为软件开发人员、经理、产品负责人、质量保证分析师、商业分析师、科技作家等的目标。就是为你的客户制作最好的软件。通过减少停机时间和提高安全性来提供最佳体验。</p><p id="c575" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">软件业正以极快的速度发展，而且不会很快放缓。人们对敏捷性、用户体验和安全性的期望达到了前所未有的高度，如果你简单地打破这些期望，你就能跟上。</p></div></div>    
</body>
</html>