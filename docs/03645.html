<html>
<head>
<title>Build Your Own Mini Forms Framework in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中构建自己的迷你表单框架</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-mini-framework-for-forms-in-react-59b462237e48?source=collection_archive---------19-----------------------#2020-02-24">https://betterprogramming.pub/build-a-mini-framework-for-forms-in-react-59b462237e48?source=collection_archive---------19-----------------------#2020-02-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="06ae" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过构建自己的框架来简化表单的构建</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6c06788009cc3225e57f2c39145da2d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y-RUnijaaPpPyqBX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们全栈开发人员来说，表单是最乏味的任务之一。它们有很多，通常会一遍又一遍地重复。</p><p id="2086" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React没有Angular那样的官方表单框架。你可以找到一些好的第三方库，比如<a class="ae ky" href="https://final-form.org/react" rel="noopener ugc nofollow" target="_blank"> React Final Form </a>和<a class="ae ky" href="https://jaredpalmer.com/formik" rel="noopener ugc nofollow" target="_blank"> Formik </a>，但是有时候，你只需要构建一个简单的表单，或者你可能需要一个独特的功能。</p><p id="ac6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是为什么在本文中，我们将实现一个可以在项目中使用的迷你表单框架。</p><p id="6421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们设定目标。该框架应该是:</p><ul class=""><li id="c15d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank"> DRY </a> —封装表单代码所有重复部分的代码。</li><li id="5ebd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">简单——它应该易于使用。</li><li id="f0e2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">灵活——它应该一般地让我们能够在表单中呈现我们需要的任何类型的组件。</li></ul><p id="a2d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，这些是我们的目标，但是它应该做什么呢？</p><ul class=""><li id="2209" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">它应该管理我们的领域和价值。</li><li id="88d8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">它应该知道一个字段是否有效以及如何验证它。</li><li id="65e7" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">它应该知道某个字段是否被触摸过。</li><li id="676a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">它应该处理提交过程。</li></ul><p id="c597" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个实现中，我们将使用一种叫做“<a class="ae ky" href="https://reactjs.org/docs/render-props.html" rel="noopener ugc nofollow" target="_blank">渲染道具</a>的技术。如果你还不知道也不要担心，看完这篇文章就都清楚了。</p><p id="4374" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的主要构件将是:</p><ul class=""><li id="9186" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">表单上下文</li><li id="c31f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">表单容器</li><li id="edc8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">表单字段</li></ul><p id="9748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在文章的最后，也是在这个网站上<a class="ae ky" href="https://codesandbox.io/s/react-mini-forms-framework-blog-y1lbt" rel="noopener ugc nofollow" target="_blank">，你可以找到一个使用我们在本文中构建的框架的实时表单示例。</a></p><p id="a864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我鼓励你在阅读这篇文章的同时探索它，它会让你更好地理解框架的所有不同部分是如何协同工作的。</p><p id="4966" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始构建我们的框架吧！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="7c6a" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">表单上下文</h1><p id="7413" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">“形式<a class="ae ky" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">背景</a>”将是把我们所有的形式成分粘在一起的胶水。</p><p id="5193" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">核心表单功能将保存在上下文中，并且可由“表单容器”和“表单字段”组件访问。</p><h2 id="e7fa" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">表单上下文. js</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">表单上下文. js</p></figure><p id="d263" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ob oc od oe b">FormContext.js</code>文件中，我们声明了我们的上下文，因此它可以被其他文件访问(在我们的例子中是<code class="fe ob oc od oe b">FormContainer.js</code>和<code class="fe ob oc od oe b">FormField.js</code>)。</p><p id="32e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在表单容器组件中，我们将用表单的核心功能填充它，在表单字段组件中，我们将使用它。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="23cd" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">表单容器组件</h1><p id="2ff0" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">容器组件管理表单字段的值及其验证状态。</p><p id="5904" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的容器将包含这些状态条目:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="7437" class="nn mr it oe b gy oj ok l ol om">{<br/>    "formValues": {},<br/>    "validationState": {},<br/>    "touchState": {},<br/>    "submitOccurred": false<br/>}</span></pre><ul class=""><li id="8a3f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ob oc od oe b">formValues</code> —包含所有表单值的对象。当窗体挂载时，这个对象将是空的。只有当字段值<em class="on">改变</em>时，新的字段条目才会添加到该对象。</li><li id="8c00" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ob oc od oe b">validationState</code> —包含表单中每个字段的验证状态的对象。这个对象中的每个条目代表一个特定的字段，并且有三个属性(我们将在验证策略一节中深入讨论它们)。</li><li id="3e11" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ob oc od oe b">touchState</code> —一个哈希表，包含表单中每个字段的触摸状态(脏不脏)。</li><li id="dc52" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ob oc od oe b">submitOccurred</code> —指示提交事件是否发生的布尔值。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="c4c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">状态将是<em class="on">私有的</em> <strong class="lb iu"> </strong>，并且只能由容器组件访问。</p><p id="0066" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">容器组件将通过<code class="fe ob oc od oe b"><a class="ae ky" href="https://reactjs.org/docs/context.html#contextprovider" rel="noopener ugc nofollow" target="_blank">context.provider</a></code>(公共方法)用表单的核心功能填充上下文:</p><ul class=""><li id="cd8f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">获取/设置字段值。</li><li id="04cd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">获取/设置字段验证状态。</li><li id="dd1a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">获取/设置字段触摸状态。</li><li id="a7c2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">提交时功能。</li></ul><p id="c470" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将是我们的表单容器组件的框架:</p><h2 id="408a" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">表单容器. js</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">表单容器</p></figure><p id="e1b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所讨论的，表单容器将保存一个私有状态，并通过上下文公开操作功能。我们的表单域将使用这个上下文与表单状态进行通信。</p><p id="e9b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的render函数中，您可以看到我们是如何呈现表单组件的。让我们仔细看看渲染函数。</p><h2 id="38c8" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">呈现表单</h2><p id="ff11" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">首先，我们用<a class="ae ky" href="https://reactjs.org/docs/context.html#contextprovider" rel="noopener ugc nofollow" target="_blank">上下文提供者</a>包装表单。提供程序中的每个表单域组件都可以访问上下文。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="083a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，我们呈现表单本身:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="dc3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的表单容器组件将接受渲染道具作为子组件。render prop是一个匿名函数，它接受值和<code class="fe ob oc od oe b">submitOccurred</code>作为参数，并返回JSX。</p><ul class=""><li id="7d52" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ob oc od oe b">values</code> —表格值。我们可以使用这个属性来获取表单字段的所有当前值。</li><li id="2a45" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ob oc od oe b">submitOccurred</code> —指示提交事件是否发生的布尔属性。这用于仅在提交后显示验证消息。</li></ul><p id="25c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是使用我们框架的“联系我们”表单的外观:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">联系方式</p></figure><p id="9b8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“表单容器”组件也将接受onSubmit回调作为道具。我们的框架将在提交过程中触发onSubmit回调。</p><p id="3cdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的表单容器组件中，我们将有许多表单域组件。</p><h1 id="07a6" class="mq mr it bd ms mt oo mv mw mx op mz na jz oq ka nc kc or kd ne kf os kg ng nh bi translated">表单域组件</h1><p id="6989" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们系统中的每个表单都有不同类型的输入。它可以是一个简单的文本框，选择框，日期选择器，自动完成等…</p><p id="b76d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些输入可以以不同的方式实现(材料、引导、简单的Html等)，我们需要一种方法将它们连接到我们的表单框架。我们不想让他们直接访问我们的表单上下文和状态。这就是我们的“表单域”组件派上用场的地方(“表单域”组件将访问上下文，并只向输入公开某些功能)。</p><p id="273e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“表单域”组件将充当表单容器和表单输入之间的中介。</p><p id="fe90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我们表单中的每个输入都需要知道:</strong></p><ul class=""><li id="7e52" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">价值——他目前的价值。</li><li id="f2e9" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">错误-指示输入中是否存在验证错误的布尔值。例如，只接受数字并将文本作为值的输入需要知道它有一个验证错误。</li><li id="307f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">验证文本—如果出现验证错误，输入需要知道要显示的验证文本。</li></ul><p id="8e25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我们表单中的每个输入都需要更新我们的表单框架:</strong></p><ul class=""><li id="99c3" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">名称—表单中字段的名称。</li><li id="bbdb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">值-新输入的值。例如，输入到文本框中的新文本。</li><li id="6ff4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">验证器-输入的验证器。例如，此输入只接受数字或电子邮件。</li><li id="55d5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Validate —验证函数存在于容器之外。每个输入都需要决定何时调用验证函数。例如，我们希望在onBlur事件中验证一个文本框值。当文本框模糊时，我们将调用框架验证函数。</li></ul><p id="65f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“表单域”组件会处理这个问题。这是一个通用组件，它将不同的输入组件连接到我们的框架。和表单容器组件一样，它也会使用渲染道具来渲染不同的组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/565d30d9ee4a68ee394e7e3a22ef5d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXfvCco0fxHC1DpQjNFUqA.png"/></div></div></figure><p id="98d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ob oc od oe b">FormField.js:</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="6e1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单文本字段</p><p id="6da7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的文本字段的例子，我们的表单域组件将呈现。使用render props，表单域可以呈现任何类型的组件。你也可以为你的组件使用像material或者bootstrap这样的库。</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="d5ea" class="nn mr it oe b gy oj ok l ol om">&lt;FormField<br/>   label="Last Name:"<br/>   placeholder="Last Name"<br/>   name="LastName"<br/>   Component={SimpeTextField}<br/>   validators={[this.requireValidator]}<br/>   className="formTextField"<br/>/&gt;</span></pre><p id="9789" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们实现一个样本表单之前，我想谈一谈我们的验证策略。</p><h1 id="25ad" class="mq mr it bd ms mt oo mv mw mx op mz na jz oq ka nc kc or kd ne kf os kg ng nh bi translated">验证策略</h1><blockquote class="ou ov ow"><p id="8d70" class="kz la on lb b lc ld ju le lf lg jx lh ox lj lk ll oy ln lo lp oz lr ls lt lu im bi translated">在我们的“表单容器”组件的状态(我们的主表单的状态)中，我们有一个validationState对象。这个对象是我们验证状态的唯一真实来源。</p></blockquote><p id="7062" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们再来看看“表单容器”组件的状态:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="3ced" class="nn mr it oe b gy oj ok l ol om">formFields:{<br/>    FirstName:"Roi"<br/>    Id:"02132154"<br/>}<br/>validationState: {<br/>    Id: {<br/>        valid: false,<br/>        validationText: "this field is mandatory",<br/>        validators: [<!-- -->required, onlyNumbers<!-- -->]<br/>    }<br/>}<br/>touchedState: {<br/>    Id: true<br/>}</span></pre><p id="1e7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">validationState对象是一个哈希表，我们可以立即访问每个字段的验证状态和触摸状态。<strong class="lb iu">如果一个字段没有任何验证器，那么它就不会出现在哈希表</strong>中(默认情况下它是有效的)。该对象总是最新的。</p><p id="215f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当一个字段第一次挂载时，我们计算它的验证状态并更新validationState对象:每次字段中的值改变时,“表单字段”组件需要调用validateField函数(从上下文中),这个函数更新validation state对象。</p><p id="6b68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们的“表单容器”组件中的validateField函数实现:</p><p id="a1fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">validateField函数:</p><ul class=""><li id="2806" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">接受一组验证器(验证规则)。</li><li id="7b59" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">运行所有验证器。</li><li id="6401" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">计算字段验证状态和验证文本消息。</li><li id="5efa" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">用“valid”和“validationText”新值更新validationState对象中的当前字段条目。</li></ul><h2 id="83d9" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">什么是验证器？</h2><p id="5569" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">验证器是一个接受值并返回具有两个属性的对象的函数:</p><ul class=""><li id="87fb" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">valid-指示字段是否有效的布尔值。</li><li id="d225" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">validationText —要在表单中显示的验证错误消息。</li></ul><p id="5535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，该验证器检查值是否为数字:</p><h2 id="24a7" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">提交事件</h2><p id="11af" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">最后，在onSubmit事件(在FormContainer.js中)中，我们减少validationState对象(检查我们的所有字段是否都有效)，调用onSubmit回调并更新表单的验证和提交状态:</p><h1 id="dc17" class="mq mr it bd ms mt oo mv mw mx op mz na jz oq ka nc kc or kd ne kf os kg ng nh bi translated">实施联系我们表单</h1><p id="27a0" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">最后，我们可以使用全新的迷你表单框架，构建一个简单的联系我们表单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pa oa l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="811f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">后续步骤</h1><p id="daba" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">现在你有了自己的表单框架，你可以用你需要的任何功能来增强它，比如:</p><ul class=""><li id="252c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">支持字段数组</li><li id="ee99" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">支持动态验证器</li><li id="3b28" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">添加将在字段更改时触发的回调</li></ul></div></div>    
</body>
</html>