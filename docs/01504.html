<html>
<head>
<title>How to Add Graphs and Charts to a React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向React应用程序添加图形和图表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-graphs-and-charts-to-a-react-app-339ed2dc4c05?source=collection_archive---------13-----------------------#2019-09-19">https://betterprogramming.pub/how-to-add-graphs-and-charts-to-a-react-app-339ed2dc4c05?source=collection_archive---------13-----------------------#2019-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7c2b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建一个显示当前和历史汇率的应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b5ba77a951735298c96f5027700186b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y-bJhdnax_2NjvHq1RCz5w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com/s/photos/exchange-rates?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="65a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">商业应用程序通常会显示图形和图表。React开发人员的辛勤工作已经产生了图形库，使其很容易满足在应用程序中显示图形和图表的要求。一个流行的图形显示库是Chart.js，它可以在任何JavaScript应用程序中使用。对于React应用程序，我们可以使用Chart.js的React包装器<code class="fe lv lw lx ly b">react-chartjs-2</code>，轻松地将图形和图表添加到我们的应用程序中。</p><p id="f9ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一块，我们将建立一个应用程序来显示当前和历史汇率。当前对欧元的汇率将显示在条形图中，历史汇率将显示在线图中。数据从位于<a class="ae ky" href="https://exchangeratesapi.io/" rel="noopener ugc nofollow" target="_blank">https://exchangeratesapi.io/</a>的外汇汇率API获得。它是免费的，不需要注册就可以使用。它还支持跨域请求，因此可以由web客户端应用程序使用。</p><p id="121c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们运行Create React App来创建脚手架代码。运行<code class="fe lv lw lx ly b">npx create-react-app exchange-rate-app</code>创建应用程序。接下来，我们需要安装我们的库:运行<code class="fe lv lw lx ly b">npm i axios bootstrap chart.js formik react-bootstrap react-chartjs-2 react-router-dom yup</code>来安装库。Axios是我们向汇率API发出请求的HTTP客户端。Bootstrap用于样式化，React ChartJS是我们的图形库。React Router用于将URL路由到我们的页面。Formik和Yup分别用于处理表单值更改和表单验证。</p><p id="9fc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经安装了所有的库，我们可以开始编写代码了。除非另有说明，代码位于<code class="fe lv lw lx ly b">src</code>文件夹中。在<code class="fe lv lw lx ly b">App.js</code>中，我们用以下代码替换现有代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a901" class="md me it ly b gy mf mg l mh mi">import React from "react";<br/>import { Router, Route, Link } from "react-router-dom";<br/>import HomePage from "./HomePage";<br/>import { createBrowserHistory as createHistory } from "history";<br/>import "./App.css";<br/>import TopBar from "./TopBar";<br/>import HistoricRatesBetweenCurrenciesPage from "./HistoricRatesBetweenCurrenciesPage";<br/>import HistoricRatesPage from "./HistoricRatesPage";<br/>const history = createHistory();</span><span id="447e" class="md me it ly b gy mj mg l mh mi">function App() {<br/>  window.Chart.defaults.global.defaultFontFamily = `<br/>  -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",<br/>  "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",<br/>  sans-serif`;</span><span id="ece9" class="md me it ly b gy mj mg l mh mi">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Router history={history}&gt;<br/>        &lt;TopBar /&gt;<br/>        &lt;Route path="/" exact component={HomePage} /&gt;<br/>        &lt;Route path="/historicrates" exact component={HistoricRatesPage} /&gt;<br/>        &lt;Route<br/>          path="/historicrates2currencies"<br/>          exact<br/>          component={HistoricRatesBetweenCurrenciesPage}<br/>        /&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="8184" class="md me it ly b gy mj mg l mh mi">export default App;</span></pre><p id="cf59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里用React Router定义了路由，因为它是我们应用程序的入口点。我们还在这里设置了图形的字体，因此它现在可以应用到任何地方。</p><p id="9c53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">App.css</code>中，我们用以下代码替换现有代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9c05" class="md me it ly b gy mf mg l mh mi">.center {<br/>    text-align: center;<br/>}</span></pre><p id="ac76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将使文本在我们的应用程序中居中。</p><p id="79d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们添加一个文件来添加我们将使用的货币列表。创建一个名为<code class="fe lv lw lx ly b">export.js</code>的文件，并添加以下代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1d62" class="md me it ly b gy mf mg l mh mi">export const CURRENCIES = [<br/>  "CAD",<br/>  "HKD",<br/>  "ISK",<br/>  "PHP",<br/>  "DKK",<br/>  "HUF",<br/>  "CZK",<br/>  "AUD",<br/>  "RON",<br/>  "SEK",<br/>  "IDR",<br/>  "INR",<br/>  "BRL",<br/>  "RUB",<br/>  "HRK",<br/>  "JPY",<br/>  "THB",<br/>  "CHF",<br/>  "SGD",<br/>  "PLN",<br/>  "BGN",<br/>  "TRY",<br/>  "CNY",<br/>  "NOK",<br/>  "NZD",<br/>  "ZAR",<br/>  "USD",<br/>  "MXN",<br/>  "ILS",<br/>  "GBP",<br/>  "KRW",<br/>  "MYR",<br/>];</span></pre><p id="52bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以在组件中使用它。</p><p id="0f64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建一个页面来显示两种货币之间的历史汇率。创建一个名为<code class="fe lv lw lx ly b">HistoricRatesBetweenCurrenciesPage.js</code>的文件，并添加以下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="eeb5" class="md me it ly b gy mf mg l mh mi">import React, { useEffect, useState } from "react";<br/>import { Formik } from "formik";<br/>import Form from "react-bootstrap/Form";<br/>import Col from "react-bootstrap/Col";<br/>import Button from "react-bootstrap/Button";<br/>import * as yup from "yup";<br/>import {<br/>  getHistoricRates,<br/>  getHistoricRatesBetweenCurrencies,<br/>} from "./requests";<br/>import { Line } from "react-chartjs-2";<br/>import { CURRENCIES } from "./exports";</span><span id="be5e" class="md me it ly b gy mj mg l mh mi">const schema = yup.object({<br/>  startDate: yup<br/>    .string()<br/>    .required("Start date is required")<br/>    .matches(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/),<br/>  endDate: yup<br/>    .string()<br/>    .required("End date is required")<br/>    .matches(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/),<br/>  fromCurrency: yup.string().required("From currency is required"),<br/>  toCurrency: yup.string().required("To currency is required"),<br/>});</span><span id="2103" class="md me it ly b gy mj mg l mh mi">function HistoricRatesBetweenCurrenciesPage() {<br/>  const [data, setData] = useState({});</span><span id="b3ae" class="md me it ly b gy mj mg l mh mi">  const handleSubmit = async evt =&gt; {<br/>    const isValid = await schema.validate(evt);<br/>    if (!isValid) {<br/>      return;<br/>    }<br/>    const params = {<br/>      start_at: evt.startDate,<br/>      end_at: evt.endDate,<br/>      base: evt.fromCurrency,<br/>      symbols: evt.toCurrency,<br/>    };<br/>    const response = await getHistoricRatesBetweenCurrencies(params);<br/>    const rates = response.data.rates;<br/>    const lineGraphData = {<br/>      labels: Object.keys(rates),<br/>      datasets: [<br/>        {<br/>          data: Object.keys(rates).map(key =&gt; rates[key][evt.toCurrency]),<br/>          label: `${evt.fromCurrency} to ${evt.toCurrency}`,<br/>          borderColor: "#3e95cd",<br/>          fill: false,<br/>        },<br/>      ],<br/>    };<br/>    setData(lineGraphData);<br/>  };</span><span id="c28e" class="md me it ly b gy mj mg l mh mi">  return (<br/>    &lt;div className="historic-rates-page"&gt;<br/>      &lt;h1 className="center"&gt;Historic Rates&lt;/h1&gt;<br/>      &lt;Formik validationSchema={schema} onSubmit={handleSubmit}&gt;<br/>        {({<br/>          handleSubmit,<br/>          handleChange,<br/>          handleBlur,<br/>          values,<br/>          touched,<br/>          isInvalid,<br/>          errors,<br/>        }) =&gt; (<br/>          &lt;Form noValidate onSubmit={handleSubmit}&gt;<br/>            &lt;Form.Row&gt;<br/>              &lt;Form.Group as={Col} md="12" controlId="startDate"&gt;<br/>                &lt;Form.Label&gt;Start Date&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="startDate"<br/>                  placeholder="YYYY-MM-DD"<br/>                  value={values.startDate || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.startDate &amp;&amp; errors.startDate}<br/>                /&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.startDate}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;</span><span id="7b2a" class="md me it ly b gy mj mg l mh mi">&lt;Form.Group as={Col} md="12" controlId="endDate"&gt;<br/>                &lt;Form.Label&gt;End Date&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="endDate"<br/>                  placeholder="YYYY-MM-DD"<br/>                  value={values.endDate || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.endDate &amp;&amp; errors.endDate}<br/>                /&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.endDate}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;</span><span id="a689" class="md me it ly b gy mj mg l mh mi">&lt;Form.Group as={Col} md="12" controlId="fromCurrency"&gt;<br/>                &lt;Form.Label&gt;From Currency&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  as="select"<br/>                  placeholder="From Currency"<br/>                  name="fromCurrency"<br/>                  onChange={handleChange}<br/>                  value={values.fromCurrency || ""}<br/>                  isInvalid={touched.fromCurrency &amp;&amp; errors.fromCurrency}<br/>                &gt;<br/>                  &lt;option&gt;Select&lt;/option&gt;<br/>                  {CURRENCIES.filter(c =&gt; c != values.toCurrency).map(c =&gt; (<br/>                    &lt;option key={c} value={c}&gt;<br/>                      {c}<br/>                    &lt;/option&gt;<br/>                  ))}<br/>                &lt;/Form.Control&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.fromCurrency}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;</span><span id="1d01" class="md me it ly b gy mj mg l mh mi">              &lt;Form.Group as={Col} md="12" controlId="currency"&gt;<br/>                &lt;Form.Label&gt;To Currency&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  as="select"<br/>                  placeholder="To Currency"<br/>                  name="toCurrency"<br/>                  onChange={handleChange}<br/>                  value={values.toCurrency || ""}<br/>                  isInvalid={touched.toCurrency &amp;&amp; errors.toCurrency}<br/>                &gt;<br/>                  &lt;option&gt;Select&lt;/option&gt;<br/>                  {CURRENCIES.filter(c =&gt; c != values.fromCurrency).map(c =&gt; (<br/>                    &lt;option key={c} value={c}&gt;<br/>                      {c}<br/>                    &lt;/option&gt;<br/>                  ))}<br/>                &lt;/Form.Control&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.toCurrency}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;<br/>            &lt;/Form.Row&gt;<br/>            &lt;Button type="submit" style={{ marginRight: "10px" }}&gt;<br/>              Search<br/>            &lt;/Button&gt;<br/>          &lt;/Form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>      &lt;br /&gt;<br/>      &lt;div style={{ height: "400px", width: "90vw", margin: "0 auto" }}&gt;<br/>        &lt;Line data={data} /&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="2913" class="md me it ly b gy mj mg l mh mi">export default HistoricRatesBetweenCurrenciesPage;</span></pre><p id="6982" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该页面有一个表单，让用户输入他们想要的历史汇率的日期范围和他们正在转换的货币。一旦用户输入了数据，就会根据由Yup库提供的<code class="fe lv lw lx ly b">schema</code>对象中的表单验证模式进行验证。我们要求日期采用YYYY-MM-DD格式，并且所有字段都是必需的，因此要根据模式检查它们的有效性。</p><p id="be19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们从<code class="fe lv lw lx ly b">toCurrency</code>的选择中过滤掉为<code class="fe lv lw lx ly b">forCurrency</code>选择的货币，反之亦然，这样我们就不会在两个下拉菜单中使用相同的货币。</p><p id="3150" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当表单提交完成后，我们将数据提交给API并获取费率。我们必须将数据转换成一种可以被<code class="fe lv lw lx ly b">react-chartjs-2</code>使用的格式，所以我们将带有<code class="fe lv lw lx ly b">datasets</code>属性的<code class="fe lv lw lx ly b">lineGraphData</code>对象定义为一个历史汇率数组。<code class="fe lv lw lx ly b">label</code>是折线图的标题，<code class="fe lv lw lx ly b">borderColor</code>是线条的边框颜色，<code class="fe lv lw lx ly b">fill</code> false表示我们不用颜色填充线条。一旦我们用<code class="fe lv lw lx ly b">setData(lineGraphData);</code>函数调用进行了设置，图表就会显示出来。</p><p id="819c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建一个页面来搜索以欧元为基础货币的历史汇率。为此，我们添加一个名为<code class="fe lv lw lx ly b">HistoricRatePage.js</code>的文件，并添加如下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a937" class="md me it ly b gy mf mg l mh mi">import React, { useEffect, useState } from "react";<br/>import { Formik } from "formik";<br/>import Form from "react-bootstrap/Form";<br/>import Col from "react-bootstrap/Col";<br/>import Button from "react-bootstrap/Button";<br/>import * as yup from "yup";<br/>import "./HistoricRatesPage.css";<br/>import { getHistoricRates } from "./requests";<br/>import { Line } from "react-chartjs-2";<br/>import { CURRENCIES } from "./exports";</span><span id="f725" class="md me it ly b gy mj mg l mh mi">const schema = yup.object({<br/>  startDate: yup<br/>    .string()<br/>    .required("Start date is required")<br/>    .matches(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/),<br/>  endDate: yup<br/>    .string()<br/>    .required("End date is required")<br/>    .matches(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/),<br/>  currency: yup.string().required("Currency is required"),<br/>});</span><span id="29c2" class="md me it ly b gy mj mg l mh mi">function HistoricRatesPage() {<br/>  const [data, setData] = useState({});</span><span id="a210" class="md me it ly b gy mj mg l mh mi">  const handleSubmit = async evt =&gt; {<br/>    const isValid = await schema.validate(evt);<br/>    if (!isValid) {<br/>      return;<br/>    }<br/>    const params = {<br/>      start_at: evt.startDate,<br/>      end_at: evt.endDate,<br/>    };<br/>    const response = await getHistoricRates(params);<br/>    const rates = response.data.rates;<br/>    const lineGraphData = {<br/>      labels: Object.keys(rates),<br/>      datasets: [<br/>        {<br/>          data: Object.keys(rates).map(key =&gt; rates[key][evt.currency]),<br/>          label: `EUR to ${evt.currency}`,<br/>          borderColor: "#3e95cd",<br/>          fill: false,<br/>        },<br/>      ],<br/>    };<br/>    setData(lineGraphData);<br/>  };</span><span id="b445" class="md me it ly b gy mj mg l mh mi">  return (<br/>    &lt;div className="historic-rates-page"&gt;<br/>      &lt;h1 className="center"&gt;Historic Rates&lt;/h1&gt;<br/>      &lt;Formik validationSchema={schema} onSubmit={handleSubmit}&gt;<br/>        {({<br/>          handleSubmit,<br/>          handleChange,<br/>          handleBlur,<br/>          values,<br/>          touched,<br/>          isInvalid,<br/>          errors,<br/>        }) =&gt; (<br/>          &lt;Form noValidate onSubmit={handleSubmit}&gt;<br/>            &lt;Form.Row&gt;<br/>              &lt;Form.Group as={Col} md="12" controlId="startDate"&gt;<br/>                &lt;Form.Label&gt;Start Date&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="startDate"<br/>                  placeholder="YYYY-MM-DD"<br/>                  value={values.startDate || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.startDate &amp;&amp; errors.startDate}<br/>                /&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.startDate}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;</span><span id="b7c1" class="md me it ly b gy mj mg l mh mi">              &lt;Form.Group as={Col} md="12" controlId="endDate"&gt;<br/>                &lt;Form.Label&gt;End Date&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="endDate"<br/>                  placeholder="YYYY-MM-DD"<br/>                  value={values.endDate || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.endDate &amp;&amp; errors.endDate}<br/>                /&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.endDate}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;</span><span id="3d3d" class="md me it ly b gy mj mg l mh mi">              &lt;Form.Group as={Col} md="12" controlId="currency"&gt;<br/>                &lt;Form.Label&gt;Currency&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  as="select"<br/>                  placeholder="Currency"<br/>                  name="currency"<br/>                  onChange={handleChange}<br/>                  value={values.currency || ""}<br/>                  isInvalid={touched.currency &amp;&amp; errors.currency}<br/>                &gt;<br/>                  &lt;option&gt;Select&lt;/option&gt;<br/>                  {CURRENCIES.map(c =&gt; (<br/>                    &lt;option key={c} value={c}&gt;<br/>                      {c}<br/>                    &lt;/option&gt;<br/>                  ))}<br/>                &lt;/Form.Control&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.country}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;<br/>            &lt;/Form.Row&gt;<br/>            &lt;Button type="submit" style={{ marginRight: "10px" }}&gt;<br/>              Search<br/>            &lt;/Button&gt;<br/>          &lt;/Form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>      &lt;br /&gt;<br/>      &lt;div style={{ height: "400px", width: "90vw", margin: "0 auto" }}&gt;<br/>        &lt;Line data={data} /&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="c43c" class="md me it ly b gy mj mg l mh mi">export default HistoricRatesPage;</span></pre><p id="ad56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它与上一页类似，只是我们只选择要显示的货币，因为要转换的货币总是欧元。我们又有了一个<code class="fe lv lw lx ly b">lineGraphData</code>，其中的<code class="fe lv lw lx ly b">datasets</code>是一个数组，而<code class="fe lv lw lx ly b">data</code>是一个历史汇率数组。<code class="fe lv lw lx ly b">label</code>是图表的标题。<code class="fe lv lw lx ly b">borderColor</code>和<code class="fe lv lw lx ly b">fill</code>与上图相同。</p><p id="4d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两种表单都是由React引导表单组件创建的。<code class="fe lv lw lx ly b">Form</code>组件对应于常规自举4组件。</p><p id="7060" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们创建<code class="fe lv lw lx ly b">HistoricalRatesPage.css</code>并放入以下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="67ef" class="md me it ly b gy mf mg l mh mi">.historic-rates-page {<br/>  margin: 0 auto;<br/>  width: 90vw;<br/>}</span></pre><p id="0ed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给我们的页面增加了一些空白。</p><p id="d201" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建我们的主页。创建一个名为<code class="fe lv lw lx ly b">HomePage.js</code>的文件，并添加以下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a873" class="md me it ly b gy mf mg l mh mi">import React, { useEffect, useState } from "react";<br/>import Card from "react-bootstrap/Card";<br/>import { getExchangeRate } from "./requests";<br/>import "./HomePage.css";<br/>import { Bar } from "react-chartjs-2";</span><span id="b0a2" class="md me it ly b gy mj mg l mh mi">function HomePage() {<br/>  const [rates, setRates] = useState({});<br/>  const [initialized, setInitialized] = useState(false);<br/>  const [date, setDate] = useState("");<br/>  const [base, setBase] = useState("");<br/>  const [chartData, setChartData] = useState({});</span><span id="0580" class="md me it ly b gy mj mg l mh mi">  const getRates = async () =&gt; {<br/>    const response = await getExchangeRate();<br/>    const { base, date, rates } = response.data;<br/>    setRates(rates);<br/>    setDate(date);<br/>    setBase(base);<br/>    const filteredRates = Object.keys(rates).filter(key =&gt; rates[key] &lt; 50);<br/>    const data = {<br/>      labels: filteredRates,<br/>      datasets: [<br/>        {<br/>          backgroundColor: "green",<br/>          data: filteredRates.map(key =&gt; rates[key]),<br/>        },<br/>      ],<br/>    };<br/>    setChartData(data);<br/>    setInitialized(true);<br/>  };</span><span id="e39d" class="md me it ly b gy mj mg l mh mi">  useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      getRates();<br/>    }<br/>  });<br/>  const options = {<br/>    maintainAspectRatio: false,<br/>    legend: { display: false },<br/>    scales: {<br/>      yAxes: [{ ticks: { beginAtZero: true } }],<br/>    },<br/>    title: {<br/>      display: true,<br/>      text: "EUR Exchanges Rates",<br/>    },<br/>  };</span><span id="aa13" class="md me it ly b gy mj mg l mh mi">  return (<br/>    &lt;div className="home-page"&gt;<br/>      &lt;h1 className="center"&gt;Rates as of {date}&lt;/h1&gt;<br/>      &lt;br /&gt;<br/>      &lt;div style={{ height: "400px", width: "90vw", margin: "0 auto" }}&gt;<br/>        &lt;Bar data={chartData} options={options} /&gt;<br/>      &lt;/div&gt;<br/>      &lt;br /&gt;<br/>      {Object.keys(rates).map(key =&gt; {<br/>        return (<br/>          &lt;Card style={{ width: "90vw", margin: "0 auto" }}&gt;<br/>            &lt;Card.Body&gt;<br/>              &lt;Card.Title&gt;<br/>                {base} : {key}<br/>              &lt;/Card.Title&gt;<br/>              &lt;Card.Text&gt;{rates[key]}&lt;/Card.Text&gt;<br/>            &lt;/Card.Body&gt;<br/>          &lt;/Card&gt;<br/>        );<br/>      })}<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="5b97" class="md me it ly b gy mj mg l mh mi">export default HomePage;</span></pre><p id="8c37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个页面中，我们显示了来自API的当前汇率列表。我们创建了一个<code class="fe lv lw lx ly b">data</code>对象，用货币符号作为<code class="fe lv lw lx ly b">labels</code>，我们还有一个<code class="fe lv lw lx ly b">datasets</code>属性——一个对象数组，对象中的<code class="fe lv lw lx ly b">data</code>是当前的汇率。此外，我们在React Boostrap提供的引导卡中显示汇率。</p><p id="2382" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了设计这个页面的样式，我们创建了<code class="fe lv lw lx ly b">HomePage.css</code>，并添加了以下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d621" class="md me it ly b gy mf mg l mh mi">.home-page {<br/>  margin: 0 auto;<br/>}</span></pre><p id="2829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这给了我们页面上的一些空白。</p><p id="1270" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建一个文件，让我们向外汇汇率API发出请求。创建一个名为<code class="fe lv lw lx ly b">requests.js</code>的文件，并添加以下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="d68e" class="md me it ly b gy mf mg l mh mi">const APIURL = "<a class="ae ky" href="https://api.exchangeratesapi.io" rel="noopener ugc nofollow" target="_blank">https://api.exchangeratesapi.io</a>";<br/>const axios = require("axios");<br/>const querystring = require("querystring");</span><span id="1ad4" class="md me it ly b gy mj mg l mh mi">export const getExchangeRate = () =&gt; {<br/>  return axios.get(`${APIURL}/latest`);<br/>};</span><span id="0a07" class="md me it ly b gy mj mg l mh mi">export const getRateBetweenCurrencies = data =&gt;<br/>  axios.get(`${APIURL}/history?${querystring.encode(data)}`);</span><span id="0901" class="md me it ly b gy mj mg l mh mi">export const getHistoricRates = data =&gt;<br/>  axios.get(`${APIURL}/history?${querystring.encode(data)}`);</span><span id="04c0" class="md me it ly b gy mj mg l mh mi">export const getHistoricRatesBetweenCurrencies = data =&gt;<br/>  axios.get(`${APIURL}/history?${querystring.encode(data)}`);</span></pre><p id="fdc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将按照我们想要的方式获取汇率，请求获取最新的汇率和历史汇率，指定或不指定基础货币和要转换到的货币的货币符号。</p><p id="8be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们创建顶栏。创建一个名为<code class="fe lv lw lx ly b">TopBar.js</code>的文件，并添加以下代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="fbf6" class="md me it ly b gy mf mg l mh mi">import React from "react";<br/>import Navbar from "react-bootstrap/Navbar";<br/>import Nav from "react-bootstrap/Nav";<br/>import { withRouter } from "react-router-dom";</span><span id="60ed" class="md me it ly b gy mj mg l mh mi">function TopBar({ location }) {<br/>  const { pathname } = location;</span><span id="d1b5" class="md me it ly b gy mj mg l mh mi">  return (<br/>    &lt;Navbar bg="primary" expand="lg" variant="dark"&gt;<br/>      &lt;Navbar.Brand href="#home"&gt;Currenc Converter App&lt;/Navbar.Brand&gt;<br/>      &lt;Navbar.Toggle aria-controls="basic-navbar-nav" /&gt;<br/>      &lt;Navbar.Collapse id="basic-navbar-nav"&gt;<br/>        &lt;Nav className="mr-auto"&gt;<br/>          &lt;Nav.Link href="/" active={pathname == "/"}&gt;<br/>            Home<br/>          &lt;/Nav.Link&gt;<br/>          &lt;Nav.Link<br/>            href="/historicrates"<br/>            active={pathname.includes("/historicrates")}<br/>          &gt;<br/>            Historic Rates<br/>          &lt;/Nav.Link&gt;<br/>          &lt;Nav.Link<br/>            href="/historicrates2currencies"<br/>            active={pathname.includes("/historicrates2currencies")}<br/>          &gt;<br/>            Historic Rates Between 2 Currencies<br/>          &lt;/Nav.Link&gt;<br/>        &lt;/Nav&gt;<br/>      &lt;/Navbar.Collapse&gt;<br/>    &lt;/Navbar&gt;<br/>  );<br/>}</span><span id="7afe" class="md me it ly b gy mj mg l mh mi">export default withRouter(TopBar);</span></pre><p id="0f41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将Bootstrap提供的导航栏添加到我们的页面，并添加到我们之前创建的页面的链接。它还会在当前打开的页面上突出显示链接。我们用<code class="fe lv lw lx ly b">withRouter</code>函数包装组件，这样我们就可以获得当前打开的路线，让我们突出显示链接。</p><p id="01c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们用以下代码替换<code class="fe lv lw lx ly b">index.html</code>中的代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="b806" class="md me it ly b gy mf mg l mh mi">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>    &lt;meta name="theme-color" content="#000000" /&gt;<br/>    &lt;meta<br/>      name="description"<br/>      content="Web site created using create-react-app"<br/>    /&gt;<br/>    &lt;link rel="apple-touch-icon" href="logo192.png" /&gt;<br/>    &lt;!--<br/>      manifest.json provides metadata used when your web app is installed on a<br/>      user's mobile device or desktop. See <a class="ae ky" href="https://developers.google.com/web/fundamentals/web-app-manifest/" rel="noopener ugc nofollow" target="_blank">https://developers.google.com/web/fundamentals/web-app-manifest/</a><br/>    --&gt;<br/>    &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt;<br/>    &lt;!--<br/>      Notice the use of %PUBLIC_URL% in the tags above.<br/>      It will be replaced with the URL of the `public` folder during the build.<br/>      Only files inside the `public` folder can be referenced from the HTML.</span><span id="e373" class="md me it ly b gy mj mg l mh mi">Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will<br/>      work correctly both with client-side routing and a non-root public URL.<br/>      Learn how to configure a non-root public URL by running `npm run build`.<br/>    --&gt;<br/>    &lt;title&gt;React Currency App&lt;/title&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      href="<a class="ae ky" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css</a>"<br/>      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"<br/>      crossorigin="anonymous"<br/>    /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>    &lt;!--<br/>      This HTML file is a template.<br/>      If you open it directly in the browser, you will see an empty page.</span><span id="6e3c" class="md me it ly b gy mj mg l mh mi">You can add webfonts, meta tags, or analytics to this file.<br/>      The build step will place the bundled scripts into the &lt;body&gt; tag.</span><span id="ce7f" class="md me it ly b gy mj mg l mh mi">To begin the development, run `npm start` or `yarn start`.<br/>      To create a production bundle, use `npm run build` or `yarn build`.<br/>    --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="c37e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们得到一些引导样式，可以改变应用程序的标题。我们用自己的标签替换了<code class="fe lv lw lx ly b">title</code>标签，并在<code class="fe lv lw lx ly b">head</code>标签之间添加了以下内容:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="b3e2" class="md me it ly b gy mf mg l mh mi">&lt;link rel="stylesheet"<br/>      href="<a class="ae ky" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css</a>"<br/>      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"<br/>      crossorigin="anonymous"<br/>/&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/8e6a89d211ec7f027be9a577c0a2a798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qG-M4QuJ65yy7ZrDzxzA-A.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/ff66a26832b3242e48da89d062fd3243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXkBVxK4HCX5YUnzKXV0Fw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/b6630737d3a86d9a45064fe2891ffc3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ACJ77AOaYVLsuAKcOk-g1A.png"/></div></div></figure><p id="2748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码:<a class="ae ky" href="https://bitbucket.org/hauyeung/react-chart-tutorial-app/src/master/" rel="noopener ugc nofollow" target="_blank">https://bit bucket . org/hau yeung/react-chart-tutorial-app/src/master/</a></p></div></div>    
</body>
</html>