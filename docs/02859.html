<html>
<head>
<title>Conventional Strings Over Template Literals in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中模板文字上的传统字符串</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-conventional-string-over-template-literals-3811daa6548e?source=collection_archive---------8-----------------------#2020-01-05">https://betterprogramming.pub/javascript-conventional-string-over-template-literals-3811daa6548e?source=collection_archive---------8-----------------------#2020-01-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ac51" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">何时使用每一种，为什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dd13c286047a30e5458ffcf30e7337b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWVZr8s7igfS__pxPaCaUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@matheusferrero" rel="noopener ugc nofollow" target="_blank">马修·费雷罗</a>在<a class="ae ky" href="https://unsplash.com/photos/RxpqZBBevKg" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="1549" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按照惯例，用JavaScript写一个字符串，我们可以使用<code class="fe lv lw lx ly b">singleQuote</code>或者<code class="fe lv lw lx ly b">doubleQuote</code>。例如:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c1d1" class="md me it ly b gy mf mg l mh mi">const singleQuoteString = 'This is a single quote string';<br/>const doubleQuoteString = "This is a double quote string";</span></pre><p id="8b52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着<a class="ae ky" href="http://es6-features.org/" rel="noopener ugc nofollow" target="_blank"> ES6 </a>中<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank">模板文字</a>的引入，字符串文字得到了巨大的改进，比如多行支持、在字符串中更好地嵌入变量或表达式、不再需要在字符串中使用反斜杠引号或双引号等。</p><p id="6aaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它基本上只是使用反勾号，而不是引号或双引号。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="05b4" class="md me it ly b gy mf mg l mh mi">const templatedString = `This is a double quote string`;</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="64ce" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">模板文字的首选项</h1><p id="2cc9" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">通过观察模板文字(反勾号)相对于传统字符串的优势，我怀疑是否还需要传统字符串。</p><p id="58b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在下面找到了这篇文章，它强烈主张使用反勾号作为替换传统字符串的标准，因为它有好处，也是为了一致性。</p><div class="nm nn gp gr no np"><a href="https://ponyfoo.com/articles/template-literals-strictly-better-strings" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">模板文字严格来说是更好的字符串</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">假设有一个ES6代码库，有几种方法可以在字符串中进行插值。你可以使用字符串连接…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">ponyfoo.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ks np"/></div></div></a></div><p id="1348" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我质疑用模板文字替换传统字符串会影响性能，并发现一篇文章显示它们的性能差异可以忽略不计。</p><div class="nm nn gp gr no np"><a href="https://medium.com/javascript-in-plain-english/are-backticks-slower-than-other-strings-in-javascript-ce4abf9b9fa" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">反斜线(``)比JavaScript中的其他字符串慢吗？</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">我使用jsperf运行了一些测试，以找出哪个字符串字符运行得最快，以及是否比空的…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">medium.com</p></div></div><div class="ny l"><div class="oe l oa ob oc ny od ks np"/></div></div></a></div><p id="b7e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，切换到模板字面量似乎是合理的。</p><p id="7822" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不会列出模板文字的好处，因为它们已经在许多文章中提供了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1865" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">对传统字符串的偏好</h1><p id="f93e" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">然而，由于JavaScript已经存在了很长时间，我仍然看到许多代码使用传统的单引号和双引号来表示字符串，所以人们仍然坚持使用它们肯定是有原因的。</p><p id="66bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就连Airbnb 的<a class="ae ky" href="https://github.com/airbnb/javascript#strings" rel="noopener ugc nofollow" target="_blank"> JavaScript代码指南也不提倡。因此，我进行了更多的搜索并理解了原因。以下是原因，从最明显的到一些对我来说不可思议的…</a></p><h2 id="fe05" class="md me it bd mr of og dn mv oh oi dp mz li oj ok nb lm ol om nd lq on oo nf op bi translated">并非所有反勾号字符串对于JavaScript都是合法的</h2><p id="c4a5" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">令我惊讶的是，如果我们只是盲目地将所有的单引号和双引号替换成反勾号，我们就会出错。下面是三个场景。</p><ol class=""><li id="7057" class="oq or it lb b lc ld lf lg li os lm ot lq ou lu ov ow ox oy bi translated">使用<code class="fe lv lw lx ly b">use strict</code>。</li></ol><p id="43ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们用<code class="fe lv lw lx ly b">`use strict`;</code>代替<code class="fe lv lw lx ly b">'use strict';</code>，就不再起作用了。最可怕的是，没有任何预兆。</p><p id="2dba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.从模块导入。</p><p id="414d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们使用<code class="fe lv lw lx ly b">import React from `react`;</code>而不是<code class="fe lv lw lx ly b">import React from 'react';</code>，将导致如下错误。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8289" class="md me it ly b gy mf mg l mh mi">Parsing error: Unexpected token</span></pre><p id="aefb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.JSON风格的对象声明。</p><p id="e25d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不能像下面这样声明一个对象。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="6f0c" class="md me it ly b gy mf mg l mh mi">const headers = {<br/>    `Accept`: `application/json`,<br/>    `Content-Type`: `application/json`<br/>};</span></pre><p id="f89e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将错误排除:<code class="fe lv lw lx ly b">Uncaught SyntaxError: Unexpected template string</code>。</p><p id="2f6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是合法的。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2bbf" class="md me it ly b gy mf mg l mh mi">const headers = {<br/>    [`Accept`]: `application/json`,<br/>    [`Content-Type`]: `application/json`<br/>};</span></pre><p id="2081" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并且:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="fbf2" class="md me it ly b gy mf mg l mh mi">const headers = {<br/>    'Accept': `application/json`,<br/>    'Content-Type': `application/json`<br/>};</span></pre><h2 id="433d" class="md me it bd mr of og dn mv oh oi dp mz li oj ok nb lm ol om nd lq on oo nf op bi translated">普通字符串和需要模板文字的字符串的区别</h2><p id="170c" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">就像<code class="fe lv lw lx ly b">const</code>和<code class="fe lv lw lx ly b">let</code>一样，有些人主张我们应该只在需要的时候使用模板文字字符串。即不要对所有事情都使用<code class="fe lv lw lx ly b">let</code>。</p><p id="e2e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在下面的代码中，<code class="fe lv lw lx ly b">name</code>只是一个普通的字符串，而<code class="fe lv lw lx ly b">sentence</code>因为需要嵌入一个变量，所以使用了模板文字。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3f83" class="md me it ly b gy mf mg l mh mi">let name = 'Alex';<br/>let sentence = `My name is ${name}`;</span></pre><h2 id="91ac" class="md me it bd mr of og dn mv oh oi dp mz li oj ok nb lm ol om nd lq on oo nf op bi translated">首选显式转义(反斜杠)</h2><p id="4905" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">使用模板化的文字，我们可以很容易地得到multiline。但是如果在这条线后面有很多空格，人们可能不容易看到它。如下图，第一行<code class="fe lv lw lx ly b">space</code>字后有空格，但不容易看到。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="1538" class="md me it ly b gy mf mg l mh mi">let spaces = `there are unseen space     <br/>But you can’t see it`<br/>console.log(spaces.replace(‘\n’,’ ‘))</span><span id="4ef0" class="md me it ly b gy oz mg l mh mi">// Output "there are unseen space     But you can’t see it"</span></pre><p id="4a94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是有了下面，下一行在哪里就很清楚了，而且<code class="fe lv lw lx ly b">\n</code>说的很清楚。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3282" class="md me it ly b gy mf mg l mh mi">spaces = “there cannot have unseen space\n\<br/>You can see all”<br/>console.log(spaces.replace('\n',' '))</span><span id="345a" class="md me it ly b gy oz mg l mh mi">// Output "there cannot have unseen space You can see all"</span></pre><p id="d98d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，对于一些开发人员来说，他们喜欢使用传统字符串的更加冗长和明确的方法。</p><p id="92e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，对于第二个例子，如果在<code class="fe lv lw lx ly b">space\n\</code>后面有空格，它将错误地指出<code class="fe lv lw lx ly b">Uncaught SyntaxError: Invalid or unexpected token</code>，这不容易识别。</p><h2 id="e5c7" class="md me it bd mr of og dn mv oh oi dp mz li oj ok nb lm ol om nd lq on oo nf op bi translated">键盘问题</h2><p id="c7c2" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我不会想到这个问题，因为我是一个纯粹的美国ASCII键盘用户。法语、德语、葡萄牙语、巴西语和西班牙语键盘的用户抱怨称，反勾号被用作他们特殊字母的其他用途。</p><p id="f82b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，对于法语和西班牙语键盘，例如键入<code class="fe lv lw lx ly b">`</code>然后<code class="fe lv lw lx ly b">a</code>，产生一个<code class="fe lv lw lx ly b">à</code>。其他角色也一样<code class="fe lv lw lx ly b">àèìòù</code>。</p><p id="ab30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有其他原因，欢迎回复本博客分享。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="aa8f" class="mq me it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">TL；DR；</h1><p id="6eef" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我的观点是，模板文字肯定比传统的字符串有优势，使代码在各方面更具可读性。因此，人们应该明确地使用它们。要么使用模板文字替换所有常规字符串，要么仅在需要组首选项时使用它们。</p><p id="4a04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript是一种非常灵活的语言。做同样的事情有很多方法。有许多建议的最佳实践。选择一个最适合你的，并让团队持续使用它。</p><p id="9a19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p><p id="e3cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">~Elye~</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pa pb l"/></div></figure></div></div>    
</body>
</html>