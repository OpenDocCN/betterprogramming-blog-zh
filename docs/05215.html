<html>
<head>
<title>How to Simply Deploy a Smart Contract on Ethereum (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何简单地在以太坊上部署智能合约(第1部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-simply-deploy-a-smart-contract-on-ethereum-714c692e00c?source=collection_archive---------0-----------------------#2020-06-21">https://betterprogramming.pub/how-to-simply-deploy-a-smart-contract-on-ethereum-714c692e00c?source=collection_archive---------0-----------------------#2020-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="11d9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">智能合约是以太坊概念的核心</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c1c0bf6d537fac8005acacb847b99a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aqeOJwb2IjAyLrhvy9oKsw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@cliffordgatewood?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Clifford摄影</a>在<a class="ae ky" href="https://unsplash.com/s/photos/ethereum?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="194e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以太坊区块链的核心是智能合约的概念。以太坊最初的动机实际上源于比特币的脚本限制，它为智能合约提供了有限的支持。</p><p id="cc06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧——但这到底是什么意思？</p><p id="6227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嗯，比特币对智能合约的支持有限，因为它的脚本语言是非图灵完整的，部分原因是它没有循环。这意味着有很多应用可以被开发者在以太坊上编程，但在比特币上却不行。从技术上讲，以太坊从一开始就被设计成“<a class="ae ky" href="https://epicenter.tv/episodes/259/" rel="noopener ugc nofollow" target="_blank">一个部署和执行智能合约的平台</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2152" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">图灵完全性</h1><p id="e641" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">图灵完备是什么意思？</p><p id="038f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以太坊的图灵完整语言最初是基于艾伦·图灵的通用图灵机(UTM)的概念。</p><p id="62c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单来说，图灵机是数学家艾伦·图灵在1936年发明的一种假设机器。尽管它很简单，但它可以模拟任何计算机算法，不管有多复杂。</p><p id="6fad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">UTM只不过是一个图灵机，在任意输入上模拟任意图灵机。然而，由于以太坊实现了气体限制的概念，开发者不能运行需要比气体限制更多气体的程序。这就是为什么<a class="ae ky" href="https://ethereum.github.io/yellowpaper/paper.pdf" rel="noopener ugc nofollow" target="_blank">以太坊黄皮书</a>称以太坊虚拟机EVM为“准图灵-完全机”。</p><p id="857a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管有许多相似之处，以太坊并不是真正的图灵完备的，因为没有gas，开发者无法编写任何他们想要的程序。</p><p id="8680" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的，但是我们仍然需要理解什么是智能合同！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c046" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">智能合同</h1><p id="4f08" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们快速看一下智能合同的定义:</p><ul class=""><li id="9625" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">智能合同是一种自动执行的合同。这意味着买方和卖方之间的协议条款直接写入代码。</li><li id="f4ef" class="mz na it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">该准则及其包含的协议存在于一个分散的区块链网络中。</li><li id="30dc" class="mz na it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">代码控制执行，事务是可跟踪和不可逆的。</li></ul><p id="daf7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你是否从理论的角度来把握一切？太好了，现在我们动手吧。</p><p id="874a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">注:如果你想更深入地研究以太坊和智能合约的历史，我推荐这篇</em> <a class="ae ky" href="https://medium.com/certik/how-ethereum-works-the-history-of-ethereum-abcc0b770315" rel="noopener"> <em class="ni">博文</em> </a> <em class="ni">。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fae5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">智能合同教程</h1><p id="3011" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">本教程的目的是向您展示在以太坊上部署智能合约的一种最简单的方法。这样做时，我将遵循智能契约开发领域中常见的结构。首先，我们在个人区块链上本地部署智能合约(我将使用<a class="ae ky" href="https://www.trufflesuite.com/ganache" rel="noopener ugc nofollow" target="_blank"> Ganache </a>)。接下来，我们在一个指定的测试网络上部署智能合约(我将使用<a class="ae ky" href="https://rinkeby.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> Rinkeby </a>测试网络)。最后，我们在<a class="ae ky" href="https://etherscan.io/" rel="noopener ugc nofollow" target="_blank">主网络</a>上部署智能合约。</p><p id="a9ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于开发框架，我使用的是<a class="ae ky" href="https://www.trufflesuite.com/" rel="noopener ugc nofollow" target="_blank"> Truffle </a>。Truffle是以太坊的开发环境、测试框架和资产管道，旨在让以太坊开发者的生活更轻松。</p><p id="bbcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你准备好了吗？我们开始吧！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="baab" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.准备工作:安装必要的工具</h1><p id="a920" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们需要一些基本的工具来开始。我们下载<a class="ae ky" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>，8.9.4版本，或以上。我假设我们使用的是Windows、Linux或Mac OS X。准备好之后，我们打开shell并运行以下命令:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="6e39" class="nt md it np b gy nu nv l nw nx">npm i -g truffle</span></pre><p id="9891" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Truffle要求我们运行一个支持标准JSON RPC API(几乎是全部)的以太坊客户端。我们将使用Ganache，它是Truffle suite的一部分，是一个运行在桌面上的以太坊开发的个人区块链。你可以在这里下载<a class="ae ky" href="https://www.trufflesuite.com/ganache" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="672c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们不想安装一个完整的节点，最终我们将使用<a class="ae ky" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>作为托管以太坊节点集群。这样做允许用户运行和部署他们的应用程序，而不必设置他们自己的以太坊节点。</p><p id="2df0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Infura上创建一个简单的免费帐户，并创建一个新项目。将项目设置中的端点更改为Rinkeby，并将Rinkeby端点的URL复制并保存到您选择的位置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/d0d181c7e2bb032d12550da9598f4eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkZYbYrqgihhl9t48Lj9Hw.png"/></div></div></figure><p id="0262" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们准备部署智能合同。当然，我们得先写一个…</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bb47" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.利用OpenZeppelin库起草一份智能合同</h1><p id="b8bd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们为松露项目创建了一个新目录:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="14e6" class="nt md it np b gy nu nv l nw nx">mkdir TestERC20Contract</span><span id="c567" class="nt md it np b gy nz nv l nw nx">cd TestERC20Contract</span><span id="d764" class="nt md it np b gy nz nv l nw nx">truffle init</span></pre><p id="4cab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于本教程的考虑，我们将只使用<a class="ae ky" href="https://openzeppelin.com/contracts" rel="noopener ugc nofollow" target="_blank"> OpenZeppelin库</a>进行智能契约开发。我们可以通过运行以下命令来安装OpenZeppelin:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="4b7e" class="nt md it np b gy nu nv l nw nx">npm init -y</span><span id="2e03" class="nt md it np b gy nz nv l nw nx">npm i openzeppelin-solidity@2.5</span></pre><p id="2904" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">注意:由于块菌兼容性问题，我们使用特定的OpenZeppelin版本。</em></p><p id="34e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的Truffle项目的<code class="fe oa ob oc np b">contracts/</code>目录中，创建文件<code class="fe oa ob oc np b">TestERC20Contract.sol</code>并添加以下内容:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="8a60" class="nt md it np b gy nu nv l nw nx">pragma solidity ^0.5.0;</span><span id="0c00" class="nt md it np b gy nz nv l nw nx"><strong class="np iu">import</strong> "../node_modules/openzeppelin-solidity/contracts/token/ERC20/ERC20.sol";</span><span id="765d" class="nt md it np b gy nz nv l nw nx">contract TestERC20Contract is ERC20 {</span><span id="cb97" class="nt md it np b gy nz nv l nw nx">uint256 <strong class="np iu">public</strong> initialSupply = 1000;</span><span id="f16e" class="nt md it np b gy nz nv l nw nx">constructor() <strong class="np iu">public</strong> {<br/>  _mint(msg.sender, initialSupply);<br/>}</span><span id="766b" class="nt md it np b gy nz nv l nw nx">}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9a45" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.在Ganache(你的个人区块链)上部署智能合约</h1><p id="6702" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，让我们将上面设计的智能契约部署到本地运行的区块链Ganache。打开Ganache，选择一个以太坊快速入门项目。RPC服务器参数和网络ID可以在项目的标题中看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/d54fdfd8d4a36aeeb90dcabaa577d3bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZbKn4G-ZR-Pk4Pqe_aImQ.png"/></div></div></figure><p id="a840" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe oa ob oc np b">truffle-config.js</code>文件中调整这些参数。我们还将编译器版本配置为使用0.5.0版，因为契约是在这个特定的Solidity版本中编写的。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="db0e" class="nt md it np b gy nu nv l nw nx">host: "127.0.0.1", // Localhost (default: none)<br/>port: 7545, // Standard Ethereum port (default: none)<br/>network_id: "5777", // Any network (default: none)</span><span id="373b" class="nt md it np b gy nz nv l nw nx">compilers: {<br/> solc: {<br/>  version: "0.5.0", // Fetch exact version from solc-bin (default:       truffle’s version)<br/> }<br/>}</span></pre><p id="81b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe oa ob oc np b">migrations/</code>目录下，创建<code class="fe oa ob oc np b">2_deploy_contracts.js</code>文件，添加以下内容:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f86f" class="nt md it np b gy nu nv l nw nx"><strong class="np iu">var</strong> TestERC20Contract = artifacts.require("../contracts/TestERC20Contract.sol");</span><span id="cb7a" class="nt md it np b gy nz nv l nw nx">module.exports = <strong class="np iu">function</strong>(deployer) {<br/> deployer.deploy(TestERC20Contract);<br/>};</span></pre><p id="38e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们已经准备好编译和部署我们的合同到区块链。首先，在项目内部，我们运行以下命令来编译合同:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="ae73" class="nt md it np b gy nu nv l nw nx">truffle compile</span></pre><p id="07b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编译完成后，我们将合同部署到区块链:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f7ad" class="nt md it np b gy nu nv l nw nx">truffle migrate</span></pre><p id="49a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在回到加纳切区块链，点击“交易”。恭喜，我们已经在本地部署了我们的第一个智能合同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/73facb3bb30c1dc8c270d4f90c12050e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p2R-0eyANUyGVHidrrepIw.png"/></div></div></figure><p id="a7ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这绝不是故事的结尾。我们的下一个目标是部署公共测试网络<a class="ae ky" href="https://rinkeby.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> Rinkeby </a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="58f5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.在公共测试网络(如Rinkeby)上部署智能合约</h1><p id="56f7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要安装软件包<code class="fe oa ob oc np b">@truffle/hdwallet-provider</code>:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="e7a1" class="nt md it np b gy nu nv l nw nx">npm i @truffle/hdwallet-provider</span></pre><p id="9b47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们编辑<code class="fe oa ob oc np b">truffle-config.js</code>文件来设置<code class="fe oa ob oc np b">hdwallet-provider</code>和到Rinkeby网络的连接。我们提供了对助记符的引用，该助记符在<a class="ae ky" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>上生成一个帐户，并包含Rinkeby的Infura端点的URL(见上文)。最终，我们确保我们的帐户拥有足够的Rinkeby Ether来进行部署。为此，我们可以使用<a class="ae ky" href="https://faucet.rinkeby.io/" rel="noopener ugc nofollow" target="_blank">乙醚龙头</a>。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="b4b9" class="nt md it np b gy nu nv l nw nx"><strong class="np iu">var</strong> HDWalletProvider = require("@truffle/hdwallet-provider");<br/><strong class="np iu">var</strong> mnemonic = "orange apple banana … ";<br/>module.exports = {<br/> networks: {<br/>  development: {<br/>   host: "127.0.0.1",<br/>   port: 8545,<br/>   network_id: "*"<br/>  },<br/>  rinkeby: {<br/>   provider: <strong class="np iu">function</strong>() {<br/>    <strong class="np iu">return</strong> <strong class="np iu">new</strong> HDWalletProvider(mnemonic,    "https://rinkeby.infura.io/v3/&lt;INFURA_Access_Token&gt;");<br/>   },<br/>   network_id: 4,<br/>   gas: 4500000,<br/>   gasPrice: 10000000000,<br/>  }<br/> }<br/>};</span></pre><p id="bb92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也像这样改变<code class="fe oa ob oc np b">2_deploy_contracts.js</code>文件:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="2a7e" class="nt md it np b gy nu nv l nw nx"><strong class="np iu">var</strong> TestERC20Contract = artifacts.require("../contracts/TestERC20Contract.sol");</span><span id="34d0" class="nt md it np b gy nz nv l nw nx">module.exports = <strong class="np iu">function</strong>(deployer, network, accounts) {<br/> deployer.deploy(TestERC20Contract, {from: accounts[0]});<br/>};</span></pre><p id="60bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果尚未编译，运行<code class="fe oa ob oc np b">truffle compile</code>进行编译。最后，我们将其部署到Rinkeby测试网络:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="1dad" class="nt md it np b gy nu nv l nw nx">truffle migrate --network rinkeby</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/805a5d78892cd6bd179b143690094261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sgG3DoOVKXzWd_Qr0f_LTA.png"/></div></div></figure><p id="abe7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们开始专业了！我们现在可以使用合同地址在<a class="ae ky" href="https://rinkeby.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> Etherscan </a>上查看我们的智能合同。但是等等——当我们点击“合同”标签时，我们看到的是一大堆字母和数字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/9352f3f33b0f43c6e252725c9701c67a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJR69EuDrVyUjKr53d3Hiw.png"/></div></div></figure><p id="a814" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现智能合同交互，我们需要确保我们确实是合同的创建者。如果我们成功了，那堆字母和数字将会消失，我们可以调用智能合同功能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3a7d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.验证智能合同代码</h1><p id="9d27" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">点击“验证并发布”,只需按照说明操作即可:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/700df494135ec7893529e2a02600f19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oy8I3HIrWWXqidSYnpOn-g.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/4ccc3b9d743dce4dc8ca5f64279a145b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1igGUI9MwBd03tz1AYKcRQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/04290bcd92b500f85d147390d9cbcf03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNuFWEtk_a4rqU2YEmyRpA.png"/></div></div></figure><p id="b89c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次祝贺您，我们现在已经验证了我们的第一个智能合同！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5161" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6.通过简单的以太网扫描用户界面与智能合同进行交互</h1><p id="2ec9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">再次单击“Contract”选项卡，切换到“Write Contract”，您会发现与部署的智能合同交互变得很容易。我们所要做的就是连接到我们的元掩码帐户，然后我们就可以开始批准或转移令牌等等。我们已经走了很长的路了！</p><p id="3e51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一步是在以太坊主网络上部署完全相同的智能合约。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/d2e02ecbadc37db44b2ca7b3818305f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x9ICgm1q9ueDmtu0LMk2IQ.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8961" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">7.在以太坊主网络上部署智能合约</h1><p id="90d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于最终部署，我们需要在我们的元掩码帐户上获得真正的以太网。此外，我们将<code class="fe oa ob oc np b">truffle-config.js</code>文件中的<code class="fe oa ob oc np b">network_id</code>更改为<code class="fe oa ob oc np b">1</code>,并通过引用主网络来调整Infura URL。</p><p id="9b27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！我们准备再次部署。我们现在是聪明的合同专家！</p><p id="e777" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">警告:如果你向任何一个由Ganache默认助记符生成的账户发送乙醚，你将失去全部！</em></p><p id="278d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，我没有深入研究许多在实践中至关重要的规范(例如单元测试)。然而，我希望我已经触发了你的好奇心，并促使你学习更多关于智能合约及其应用的知识。回头见！</p></div></div>    
</body>
</html>