<html>
<head>
<title>Your Guide to Regular Expressions in Python and Terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python和终端正则表达式指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/your-guide-to-regular-expressions-in-python-terminal-b54d25cbe185?source=collection_archive---------11-----------------------#2020-08-03">https://betterprogramming.pub/your-guide-to-regular-expressions-in-python-terminal-b54d25cbe185?source=collection_archive---------11-----------------------#2020-08-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ae98" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">增强您的正则表达式知识</h2></div><p id="6c63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正则表达式。如果你知道如何使用它们，它们是令人敬畏和强大的。如果不是，它们看起来就像是需要解码的外星语言。无论如何，本指南将涵盖正则表达式的基础知识，以及如何使用它们来简化程序员的生活。然后我们将讨论基本和扩展集，以及它们如何在Python和终端中使用。最后，您将拥有足够的正则表达式知识来加快您的日常编码。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="a9fc" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated"><strong class="ak">基础知识</strong></h1><p id="202a" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">正则表达式是在数据集中搜索模式的一种方式。它本身并不是一种编程语言，但是所有主流语言都有一个内置的regex引擎供您使用。</p><p id="c849" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">究竟什么是正则表达式？</p><blockquote class="mf"><p id="51bb" class="mg mh iq bd mi mj mk ml mm mn mo la dk translated">"正则表达式是定义搜索模式的字符序列."— <a class="ae mp" href="https://en.wikipedia.org/wiki/Regular_expression" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="85ce" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">“字符序列”是正则表达式语法，如果你见过它，你就会知道它是多么陌生，更不用说理解了，尤其是在开始的时候。例如:</p><p id="5201" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b"><em class="mz">^\(?[0-9]{3}\)?[\-\s]?[0-9]{3}[\-\s]?[0-9]{4}$</em></code></p><p id="7d37" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">乍一看，这可能是相当压倒性的。我们中的大多数人甚至不想去尝试去弄明白它。但是，这只是一个匹配电话号码的表达式。我们将在本文的后面对此进行深入分析，所以如果您现在还不理解，请不要担心。</p><h2 id="8281" class="na lj iq bd lk nb nc dn lo nd ne dp ls ko nf ng lu ks nh ni lw kw nj nk ly nl bi translated"><strong class="ak">何时使用，何时不使用正则表达式</strong></h2><p id="260f" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">正则表达式有助于以编程方式:</p><ul class=""><li id="8962" class="nm nn iq kh b ki kj kl km ko no ks np kw nq la nr ns nt nu bi translated">在数据集中查找模式和匹配:无论是. csv还是。txt，他们掩护你</li><li id="27a5" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi translated">验证表单和输入:在提交表单之前，在前端验证表单和输入，以确保表单发送后不会出现任何问题。</li><li id="0897" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi translated">从网页上抓取信息:想从网页上抓取每一个链接吗？对此有一种说法。</li></ul><h2 id="6330" class="na lj iq bd lk nb nc dn lo nd ne dp ls ko nf ng lu ks nh ni lw kw nj nk ly nl bi translated"><strong class="ak">正则表达式有什么局限性？</strong></h2><ul class=""><li id="4cb2" class="nm nn iq kh b ki ma kl mb ko oa ks ob kw oc la nr ns nt nu bi translated">正则表达式不是一种编程语言。它们是工具，所有主要语言都使用它们。</li><li id="34e1" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi translated">难以阅读。尤其是如果你不熟悉他们，这是相当令人生畏的，大多数人，包括我自己，都倾向于尽可能地远离他们。</li><li id="333a" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi translated">即使你知道自己在做什么，也很难写正确。有时候，要让它完全按照你想要的方式工作，需要进行多次尝试。</li></ul></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="75cc" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated"><strong class="ak">不同类型的正则表达式</strong></h1><p id="df7a" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">至此，我们对什么是正则表达式以及如何使用正则表达式有了基本的了解。然而，能够自己编写它们是一个很有价值的工具。让我们开始吧。</p><h2 id="45d3" class="na lj iq bd lk nb nc dn lo nd ne dp ls ko nf ng lu ks nh ni lw kw nj nk ly nl bi translated"><strong class="ak">基本&amp;扩展集</strong></h2><p id="e08b" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">正则表达式有一个基本集和一个扩展集。对于本指南，我们将涵盖基本集和扩展集的部分内容，要查看可用内容的详尽列表，请查看Python的<a class="ae mp" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">正则表达式操作文档</a>。</p><p id="76b2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">基本设定符号</strong></p><p id="3ef6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">.</code> —句点(通配符):替换任何字符</p><p id="9754" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">^ </code> —插入符号:匹配字符串的开头</p><p id="8d66" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">$</code> —美元符号:匹配字符串的结尾</p><p id="3a4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">*</code> —星号:匹配前面的表达式<strong class="kh ir">零次或多次</strong></p><p id="0526" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">\</code> —正斜杠:代表特殊字符和转义字符</p><p id="d521" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">()</code> —括号:将表达式组合在一起</p><p id="5b7d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">?</code> —问号:匹配前面表达式的零个或一个</p><p id="1974" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">\s</code> —转义的‘s’:表示空白</p><p id="978d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[wxyz]</code> —方括号，文字:代表<strong class="kh ir">里面的一个</strong>字符(w、x、y或z)</p><p id="f6d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[w-z]</code> —方括号，范围:代表<strong class="kh ir">范围内的一个</strong>字符(w、x、y或z)，也可用于数字[10–100]。</p><p id="ffa6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[^wxyz]</code> —方括号，取反:表示集合中除以外的任意字符<strong class="kh ir">(除w、x、y或z以外的任何字符)。注意方括号</strong>内的插入符号<strong class="kh ir">，与上面的插入符号有不同的含义。</strong></p><p id="7532" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">\w</code> —单词:匹配任何ASCII字母、数字或下划线</p><p id="36cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">扩展设置符号</strong></p><p id="e021" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">+</code> —加号:匹配前面的表达式<strong class="kh ir">一次或多次</strong></p><p id="2285" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">|</code> —管道:用作<strong class="kh ir">或“比较运算符</strong>。将匹配表达式1或表达式2:表达式1 |表达式2</p><p id="4043" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">{n}</code> —将匹配前面表达式的<strong class="kh ir">、<code class="fe mv mw mx my b">+</code>和<code class="fe mv mw mx my b">?</code>的“n”次出现，除非您用<code class="fe mv mw mx my b">n</code>定义了最大出现次数。</strong></p><p id="7d69" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用基本集和扩展集的主要区别在于终端。例如，当使用扩展集合中的符号时，需要在<code class="fe mv mw mx my b">grep</code>之后跟随<code class="fe mv mw mx my b">-E</code>。</p><p id="1f91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">grep -E ‘your-extended-regex’</code></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="7e8c" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">分解表达式</h1><p id="2f38" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">让我们从头再看一遍这句话:</p><p id="7641" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">^\(?[0-9]{3}\)?[\-\s]?[0-9]{3}[\-\s]?[0-9]{4}$</code></p><p id="9c66" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了更容易阅读，让我们把它分成更小的块，并对它进行逆向工程，以显示它实际上是如何匹配一个电话号码的。使用上面标记的符号作为指南。你也可以查看RegExr 并跟随查看他们创建的比赛。</p><p id="c80c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">^</code> —脱字符号:这表示我们字符串的开始。很简单。</p><p id="e21c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">\(?</code> —可选的左括号:我们首先对<code class="fe mv mw mx my b">\</code>进行转义，这样它将作为文字字符<code class="fe mv mw mx my b">(</code>出现。然后我们将添加一个<code class="fe mv mw mx my b">?</code>来查找它，或者是零次，或者是一次，使它成为可选的。</p><p id="6096" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[0–9]{3}</code> —查找任意三个连续的数字，也称为区号(305，801，702)。</p><p id="604c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">\)?</code> —可选的右括号</p><p id="3801" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，表达式将匹配123或(123)。</p><p id="2650" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[\-\s]?</code> —可选空格<strong class="kh ir">或</strong>破折号:<code class="fe mv mw mx my b">\s</code>是空格或空格的表达式，括号内有一个<code class="fe mv mw mx my b">\-</code>(转义破折号)，后跟一个<code class="fe mv mw mx my b">?</code>，因此它将查找它零次或一次。</p><p id="fb55" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[0-9]{3}</code> —查找任意三个连续数字</p><p id="7e11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[\-\s]?</code> —可选破折号或空格。</p><p id="3675" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[0-9]{4} </code> —结束标记前的最终表达式，查找任意四个连续数字。</p><p id="5ffd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">$</code> —字符串结束。</p><p id="773a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，<code class="fe mv mw mx my b">^</code>和<code class="fe mv mw mx my b">$</code>都可以省略，并且对于该特定表达式不是必需的。我把它们留在这里是因为在这种情况下，了解它们并以任何方式工作都是有用的。如果电话号码在其他文本的中间，你会想把它们都去掉。</p><p id="8032" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分解了也没那么差吧？该表达式将匹配以下任何电话号码格式:</p><ul class=""><li id="a4a1" class="nm nn iq kh b ki kj kl km ko no ks np kw nq la nr ns nt nu bi">1234567891</li><li id="383e" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi">123 456 7891</li><li id="5606" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi">123 456–7891</li><li id="f52f" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi">123–456–7891</li><li id="0ba2" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi">(123) 456 7891</li><li id="9b4c" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi">(123) 456–7891</li></ul><p id="4209" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们希望忽略原始表达式的某些部分，我们可以简化:</p><p id="a7d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b"><em class="mz">[0-9]{10}</em></code> <em class="mz"> — </em>可能是最简单的检查方式，如果包含任何破折号、空格或括号，则不匹配。只查找连续的十位数。</p><p id="e99f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[0-9]{3}[0-9]{3}[0-9]{4}</code> —书写连续十位数表达式的不同方式(这与上面的表达式基本相同)，使得添加破折号或空格更容易。</p><p id="11ad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">[0-9]{3}[\-\s]?[0-9]{3}[\-\s]?[0-9]{4}</code> —与先前相同，检查破折号和空格</p><p id="a7e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们看看一种识别模式和构建我们自己的正则表达式的方法。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="fb3c" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">匹配电子邮件地址的正则表达式</h1><p id="3514" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">至此，我们已经基本了解了一些可用于构建这些表达式的符号和工具。让我们看看另一个我们都熟悉的常见模式，电子邮件地址。</p><p id="68e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们真正开始创建正则表达式之前，让我们先来看一个三步过程，以帮助我们确定想要匹配的模式。</p><ol class=""><li id="6cd1" class="nm nn iq kh b ki kj kl km ko no ks np kw nq la od ns nt nu bi translated">需要包含或排除哪些内容？</li><li id="cc75" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la od ns nt nu bi translated">在包含/排除中寻找模式。</li><li id="0a74" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la od ns nt nu bi translated">在正则表达式中编写这些模式。</li></ol><p id="62e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以这些电子邮件为例:</p><ul class=""><li id="71c4" class="nm nn iq kh b ki kj kl km ko no ks np kw nq la nr ns nt nu bi translated">regular-expression-master101@gmail.com</li><li id="3fb5" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi translated">joe_smith@aol.com</li><li id="a836" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la nr ns nt nu bi translated">business-man99@bigbusiness.net</li></ul><p id="e19f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们将上面的三个步骤应用到我们的电子邮件中</p><ol class=""><li id="5d9a" class="nm nn iq kh b ki kj kl km ko no ks np kw nq la od ns nt nu bi translated"><strong class="kh ir">需要包含或排除什么？</strong><br/>——我们会把邮件分成几个部分。<br/><code class="fe mv mw mx my b">&lt;username&gt;@&lt;second-level-domain&gt;.&lt;top-level-domain&gt;</code><br/>——顶级域名可能以。com，。网，。org等。为了这个例子，我们说最大长度是四，(类似于。信息)。</li><li id="e147" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la od ns nt nu bi translated"><strong class="kh ir">在包含/排除</strong> <br/>中查找模式——用户名需要非常开放，但我们不允许下划线、破折号和句点之外的特殊字符。<br/> -我们将有一个固定的<code class="fe mv mw mx my b">@</code>符号<br/> -二级域名将排除除下划线、破折号和句号之外的特殊字符。<br/> -顶级域名只能是字母，最大长度为4，最小长度为2。</li><li id="2430" class="nm nn iq kh b ki nv kl nw ko nx ks ny kw nz la od ns nt nu bi translated"><strong class="kh ir">将这些模式写入RegEx </strong> <br/> - Username，<code class="fe mv mw mx my b">[\w\-\.]+</code>，<code class="fe mv mw mx my b">\w</code>与任何ASCII字母、数字、下划线匹配。<code class="fe mv mw mx my b">\-</code>是字面上的破折号。<code class="fe mv mw mx my b">\.</code>是句号。用方括号将它们括起来以匹配其中的任何一个，并在后面添加<code class="fe mv mw mx my b">+</code>以一次或多次包含它。<br/> -修正了<code class="fe mv mw mx my b">@</code>符号只与<code class="fe mv mw mx my b">@</code>符号匹配。这是必需的。<br/> -二级域名<code class="fe mv mw mx my b">([\w\-]+\.)+</code>，与用户名表达式类似，只是它允许多个表达式串在一起，并用括号<code class="fe mv mw mx my b">()</code> ( <code class="fe mv mw mx my b">example@<strong class="kh ir">myurl.co</strong>.uk</code> ) <br/> -顶级域名<code class="fe mv mw mx my b">[a-zA-Z]{2,4}</code>，允许从“A”到“Z”，小写和大写均可，长度为2到4个字符。</li></ol><p id="11b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将所有这些放在一起，在开头有一个插入符号，在结尾有一个美元符号，让我们看看它是什么样子的。</p><p id="d5b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">^[\w\-\.]+@([\w\-]+\.)+[a-zA-Z]{2,4}$</code></p><p id="03d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太美了。将其放入RegExr中，并针对每封电子邮件单独进行测试，或者删除插入符号和美元符号，并一起进行测试。我还鼓励您添加和删除正则表达式的某些部分，看看是否可以使它更灵活或更不灵活。</p><p id="570e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">挑战</strong>:编写上面的正则表达式，不要在表达式的任何地方使用<code class="fe mv mw mx my b">\w</code>。</p><p id="78fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">学习正则表达式固然很好，但是我们如何将它应用到日常编程中呢？让我们看看如何在终端和Python中使用正则表达式。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="23e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mz">注意:<br/>不同的正则表达式引擎以各自的方式处理表达式。有时候，在</em><a class="ae mp" href="http://regexr.com" rel="noopener ugc nofollow" target="_blank"><em class="mz">regexr.com</em></a><em class="mz">或者grep中有效的东西在Python中可能无效&amp;反之亦然。在你的正则表达式像预期的那样工作之前，你可能需要尝试用一些方法来制作它</em></p><h1 id="0943" class="li lj iq bd lk ll oe ln lo lp of lr ls jw og jx lu jz oh ka lw kc oi kd ly lz bi translated">终端中的正则表达式</h1><p id="a1f8" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">对于这个例子，我们将使用<code class="fe mv mw mx my b">grep</code>。Grep是一个用于搜索纯文本数据集的命令行实用程序，它内置了自己的regex引擎！让我们获取到目前为止我们已经使用过的电话号码和电子邮件，并把它们放在一个. txt文件中，我们可以用它进行搜索。复制下面的文本并粘贴到终端窗口。</p><pre class="oj ok ol om gt on my oo op aw oq bi"><span id="8187" class="na lj iq my b gy or os l ot ou">cat &lt;&lt; EOF &gt;&gt; regex-test.txt<br/>1234567891<br/>123 456 7891<br/>123 456-7891<br/>123-456-7891<br/>(123) 456 7891<br/>(123) 456-7891<br/>regular-expression-master101@gmail.com<br/>joe_smith@aol.com<br/>business-man99@bigbusiness.net<em class="mz"><br/>EOF</em></span></pre><p id="b0c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将创建一个名为<code class="fe mv mw mx my b">regex-test.txt</code>的新文件，其中包含电话号码和电子邮件。从这里，我们可以使用<code class="fe mv mw mx my b">grep</code>来搜索匹配。</p><p id="3a43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于我的grep版本(2.5.1)，<code class="fe mv mw mx my b">\s</code>并不总是识别空白。因此，您可能需要也可能不需要用<code class="fe mv mw mx my b">[:space:]</code>或一个实际的空格来替换<code class="fe mv mw mx my b">\s</code>的实例。考虑到这一点，下面是一个更新的正则表达式，可以和<code class="fe mv mw mx my b">grep</code>一起使用来搜索电话号码。请注意，我已经将<code class="fe mv mw mx my b">\s</code>改为<code class="fe mv mw mx my b">[:space:]</code>，并移除了<code class="fe mv mw mx my b">^</code>和<code class="fe mv mw mx my b">$</code>。</p><p id="a95e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">电话号码正则表达式:与<code class="fe mv mw mx my b">grep<br/>\(?[0-9]{3}\)?[-[:space:]]?[0-9]{3}[-[:space:]]?[0-9]{4}</code>一起使用</p><p id="e2b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将所有这些放在一起，在与您刚刚创建的<code class="fe mv mw mx my b">regex-test.txt</code>文件相同的目录中运行这个命令。如果不起作用，尝试用<code class="fe mv mw mx my b">\s</code>或实际空白替换空格。</p><p id="2aca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mv mw mx my b">grep -E '<em class="mz">\(?[0-9]{3}\)?[-[:space:]]?[0-9]{3}[-[:space:]]?[0-9]{4}</em>' regex-test.txt</code></p><figure class="oj ok ol om gt ow gh gi paragraph-image"><div role="button" tabindex="0" class="ox oy di oz bf pa"><div class="gh gi ov"><img src="../Images/56021690a3da38f8668aa9303869dbcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*19o5XFdhtGROnPnYeXXEOQ.jpeg"/></div></div><p class="pd pe gj gh gi pf pg bd b be z dk translated">作者提供的屏幕截图</p></figure><p id="3598" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">挑战</strong>:用我们上面写的电子邮件正则表达式做实验，看看你是否能让它和grep一起工作来找到这个文件中的电子邮件匹配。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="d3ba" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">Python中的正则表达式</h1><p id="f3ea" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我发现在Python (vs. <code class="fe mv mw mx my b">grep</code>)中运行正则表达式的一个关键区别是，它不是检查整个文件，而是一次检查一个条目。</p><p id="037d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这个例子，我已经将电子邮件添加到一个列表中，我们将循环通过它来逐个检查每封邮件。如果电子邮件匹配，它将打印match.group() —它匹配的内容—如果不匹配，它将打印“无效电子邮件”</p><p id="c661" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这个例子，电子邮件正则表达式与上面的完全相同。</p><figure class="oj ok ol om gt ow"><div class="bz fp l di"><div class="ph pi l"/></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="a7b9" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">结论</h1><p id="43eb" class="pw-post-body-paragraph kf kg iq kh b ki ma jr kk kl mb ju kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">这就是了。我们已经介绍了正则表达式的基本概述，并学习了如何在终端和Python中应用它们。有了这些知识，您就可以利用正则表达式的力量，成为一名更高效的程序员。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="d653" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有用链接<br/> - <a class="ae mp" href="https://blog.robertelder.org/regular-expression-visualizer/" rel="noopener ugc nofollow" target="_blank">正则表达式可视化器</a><br/>-<a class="ae mp" href="https://regexr.com/" rel="noopener ugc nofollow" target="_blank">Regexr</a><br/>-<a class="ae mp" href="https://docs.python.org/3/howto/regex.html" rel="noopener ugc nofollow" target="_blank">Python正则表达式HOWTO </a></p></div></div>    
</body>
</html>