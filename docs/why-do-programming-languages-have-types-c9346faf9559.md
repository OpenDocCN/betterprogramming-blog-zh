# 为什么编程语言有类型？

> 原文：<https://betterprogramming.pub/why-do-programming-languages-have-types-c9346faf9559>

## 从非类型化到类型化的演练

![](img/eb57bfcf99f581b94f5cf8e3a5c9f264.png)

[扶苏](https://unsplash.com/@sf1221?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

静态类型和动态类型哪个更好？

静态类型可以在运行代码之前发现代码中的错误。然而，这样的打字错误发生的频率有多高？此外，类型不是测试，即使使用类型，您仍然必须证明程序的正确性。尽管如此，一个良好类型的程序将会更加可靠和易于阅读。

打字不仅是一个有趣的争论话题，也是一种可以帮助完成工作的工具。

我想做一个概述，找出不同类型的打字是如何联系在一起的。我相信，理解类型是如何产生的，将有助于我们更明智地使用它们，尤其是在我们可以选择的语言中。

# 无类型世界

低级上没有类型。CPU 和内存过着自己的生活，却不知道什么是类型。他们只有 0 和 1。

机器字是低级别的唯一类型。

计算机内存在各种大小的存储单元中存储信息，CPU 执行机器字上的指令。非类型化的 0 和 1 变成 1 类型的宇宙——不同大小的位串。

底层世界是 1 型的，一切都要用机器字来表示:字符、数字、指针、结构化数据、程序等。

当查看一段原始内存时，无法判断它代表了什么。一段记忆的意义是由对其内容的外部解释决定的。

# 什么是类型？

类型自然出现，甚至从非类型化开始。一旦我们开始在一个单一类型的世界中工作，我们就开始为了不同的目的以不同的方式组织它。任何领域都会出现类型，根据对象的用途和行为对它们进行分类。根据目的对对象进行分类会产生一个类型系统。

类型是用机器语言表达的抽象概念。当我们谈论类型时，我们通常指的是以下几种情况。

*   语法—类型是与变量相关联的标签。
*   值域-变量可以处理的可能值。
*   表示——如何表示一个类型，它可以是一个原始的机器类型，也可以是多个类型的组合。
*   行为——用给定类型限定的一些操作。

这些意义可以结合起来。例如，如果我们只定义一个行为，那么我们有一个[抽象数据类型](https://en.wikipedia.org/wiki/Abstract_data_type)。当我们有了表现+行为，我们就有了具体的实现。

# 类型为什么有用？

类型系统的目的是避免关于表示的问题，并描述适当的行为。类型施加约束，有助于加强正确性。此外，类型对于开发人员思考软件结构很有价值。

类型是我们思考事物过程的一部分。

如果我们看看使用类型系统的好处，我们可以强调:

*   **抽象** —类型有助于在比字节更高的层次上思考
*   **文档** —定义良好的类型也可以是代码的文档
*   **安全** —帮助查找行为未定义的无效代码
*   **优化** —在运行时或编译阶段进行优化

静态和动态类型。

既然我们有类型，我们必须有一个验证它们的需求和约束的过程。这个过程可以在运行程序之前静态完成，也可以在运行时动态完成。

# 静态打字

静态类型是通过分析源代码来证明类型正确性的过程。

## **清单类型化**和**类型化推理。**

我们可以手动定义程序中每个变量的类型，这样我们就有了一个清单类型。或者我们可以依靠类型推断规则，这些规则可以在很少或没有类型信息的情况下推断出表达式的类型。

静态类型是一个很好的工具，但是源代码中所有变量和表达式都绑定到一个类型的要求有时过于严格。

许多编程语言特性不能被静态检查。其中有[动态调度](https://en.wikipedia.org/wiki/Dynamic_dispatch)、[后期绑定](https://en.wikipedia.org/wiki/Late_binding)、[向下转换](https://en.wikipedia.org/wiki/Downcasting)和[反射](https://en.wikipedia.org/wiki/Reflective_programming)。

静态地知道每个变量的类型的约束可以由较弱的需求代替。所有表达式都保证类型一致，尽管类型本身可能是静态未知的。这通常可以通过引入一些运行时类型检查来实现。

# 动态打字

动态类型化是在运行时检查程序类型安全的过程。

许多编程语言包括某种动态类型检查，即使它们也有静态类型检查器。原因是有些属性很难甚至不可能静态验证。

甚至像 C++和 Java 这样的传统静态类型语言也在运行时进行类型检查。这些语言支持将[类型向下转换为](https://en.wikipedia.org/wiki/Downcasting)类型的子类型。

在运行时，程序可能有各种类型的错误。在一些语言中，这样的错误被认为是致命的，在其他语言中，从这些错误中恢复是可能的。

## **强**和**弱打字。**

另一个选择是运行时可以进行隐式类型转换。或者我们是否可以使用指针对它们执行算术运算并绕过类型限制。在这种情况下，通常称为弱类型。

# 多态性

语言的另一个非常重要的特性是代码能够操作多种类型的值。这种能力就是多态性，它提供了在不同类型上重用相同代码的可能性。

## ***多态*** *和* ***单态*** *语言*

与多态形成对比的是单态语言。在这些语言中，函数和过程只能有一个唯一的类型。Pascal 可以是这种语言的一个例子。

有几种方法可以在语言中实现多态性。反正这些可能性都是和打字紧密相关的。

# 渐进打字

静态或动态类型检查都不是最好的。如果有可能在不改变编程语言的情况下选择一种类型就好了。这个概念把我们带到了渐进打字。

它允许程序的一部分被动态类型化，而另一部分被静态类型化。

历史上，这个术语被用于引入静态分析可能性的动态语言。其中有 Python，Typescript，Clojure。

C#可以被认为是逐渐类型化的，从 4.0 版本开始变量可以被标记为动态的。

正如我们所看到的，在这个新术语出现之前，不同类型方法的组合就已经存在了。

# 结论

正如我们所见，什么是更好的没有正确的答案。但是看到语言是如何不断地变化和发展是令人兴奋的。

更先进的方法被用来实现语言的灵活性、优化性和表现力。

> *那些不知道底子的人，注定要不断争论更好的办法。但这总是一种权衡。*

感谢您的阅读！在 [Twitter](https://twitter.com/pavelfokin_) 上与我分享你的想法

# 参考

*   卢卡·卡德里，彼得·韦格纳(1985 年 12 月)。理解类型、数据抽象和多态。
*   卢卡·卡德里，2004，类型系统
*   罗伯特·马丁，干净代码博客，[类型和测试](https://blog.cleancoder.com/uncle-bob/2017/01/13/TypesAndTests.html)
*   Jeremy Siek，[什么是渐进打字](https://wphomes.soic.indiana.edu/jsiek/what-is-gradual-typing/)

*原发布于*[*https://Pavel fokin . dev*](https://pavelfokin.dev/blog/why-do-programming-languages-have-types)*。*