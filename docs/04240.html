<html>
<head>
<title>Storing Math Operators in Hashes in Ruby</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Ruby中将数学运算符存储在哈希表中</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ruby-storing-math-operators-in-hashes-322026169ab4?source=collection_archive---------15-----------------------#2020-03-31">https://betterprogramming.pub/ruby-storing-math-operators-in-hashes-322026169ab4?source=collection_archive---------15-----------------------#2020-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cbad" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用Ruby符号</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7f580c063c67695fea2b5eda6299d983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pLZVJyDe6Y2Nxn6HtWiCsw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@volkanolmez?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">沃尔坎·奥尔梅斯</a>在<a class="ae kv" href="https://unsplash.com/s/photos/maths?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="eadc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前几天晚上，我在编写代码时遇到了一个有趣的问题。在花了一些时间探索互联网的深度后，我决定写一个快速的帖子来分享我的发现。谁知道呢，也许有一天你会发现它会派上用场！</p><p id="45d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">乍一看，这不是一个很难解决的问题。我们需要一个方法，它传递三个参数——一个数学运算(字符串形式)和两个数字——然后执行数学运算并返回结果。在这个问题中，我们有一些离散的简单数学运算符，所以我们可以用if-else语句轻松地解决它，就像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/8e6365da06e956a2be3473b24a7c22d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nEcoix4gzS_2hexC3ZU9iw.png"/></div></div></figure><p id="ed60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是…很好。它完成了工作，这是不容小觑的，但就是感觉笨重。这里有很多重复的代码，if-else语句似乎不适合我们已经知道值的工作。</p><p id="dbb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们尝试哈希呢？大概是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/44a94a72cb4913b6624057f17b3ae482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FVSiItTYQPFDXejd9GOlRg.png"/></div></div></figure><p id="f1f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可悲的是，快速旋转一下<code class="fe lu lv lw lx b">pry</code>就会发现这并不那么简单:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/3777177ac722b29ee2856c383fc66fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qnZJ2ZUQtHPq4RQHc1hU4Q.png"/></div></div></figure><p id="f350" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进入<a class="ae kv" href="https://stackoverflow.com/questions/8437497/can-ruby-math-operators-be-stored-in-a-hash-and-applied-dynamically-later" rel="noopener ugc nofollow" target="_blank">这个帖子</a>是我在栈溢出上发现的。事实证明，我们在Ruby中用作数学运算符的字符实际上是<em class="ly">本身的</em>方法！不仅如此，我们还可以使用与最小公倍数方法相同的语法:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/bd391cec82a1475335a77942dda744e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8sJ-obV2xWhRwT7iLO7MGA.png"/></div></div></figure><p id="b163" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太神奇了！</p><p id="c18a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们试图解决的问题来说，一个好消息是，由于Ruby识别以符号形式存储的方法名，我们现在有办法将我们的操作符放在hash中了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/e137601a45a8ba408c845c4afdb8eedc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TPQi5KAe2DMBxX-DsLfkWw.png"/></div></div></figure><p id="45cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看起来很搞笑，但是很管用。现在，我们将如何使用这个方法来存储一个符号呢？嗯，事实证明<code class="fe lu lv lw lx b">.send</code>方法非常适合这种情况。send方法的执行就像许多基本的ruby语法一样。例如:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/aeb261f1e94f76b8c182a01397c948ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OHsa0ljW3-4LHM-v79HvdQ.png"/></div></div></figure><p id="0428" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，最大的区别在于，send“调用由符号<em class="ly">标识的方法</em>，并向其传递任何指定的参数”(<a class="ae kv" href="https://ruby-doc.org/core-2.7.0/Object.html#method-i-send" rel="noopener ugc nofollow" target="_blank">ruby-doc.org</a>)。不仅如此，在我们的例子中，它允许我们抽象出方法，直到我们得到我们的参数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/5088c7210a09305dc070172a1a7e4ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GvHFUMR_Ec3VzRpB57AuKg.png"/></div></div></figure><p id="4654" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那不是比那堆假设更清楚吗？</p><p id="ad8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我确信这个问题有很多其他的解决方案，但是我认为这个方案很简洁，可能对其他情况有用。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="7f14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于那些想研究其他Ruby零碎东西的人，请注意:</p><ul class=""><li id="f78f" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ml mm mn mo bi translated">从同一个堆栈溢出帖子:显然Ruby实际上把<code class="fe lu lv lw lx b">!=</code>求值为<code class="fe lu lv lw lx b">==</code>，然后翻转结果，所以你不能直接运行<code class="fe lu lv lw lx b">!=</code>(它对上面的解决方案不起作用)。</li><li id="2600" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">相反，如果您将方法存储为字符串，该解决方案也是可行的。我不确定我是否喜欢它，主要是因为一种很难解释的感觉，Ruby更喜欢这个。有一天，当我成为一个聪明的老程序员时，我将能够通过一些花哨的速度测试或关于语言如何编写的讨论来证实或否认这一点。</li><li id="1adf" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">我喜欢这种基本的东西。关于这个话题，<a class="ae kv" href="https://www.destroyallsoftware.com/talks/wat" rel="noopener ugc nofollow" target="_blank">加里·伯恩哈特不久前做了一个4分17秒的搞笑演示</a>，讲述一些基本特质。</li></ul></div></div>    
</body>
</html>