<html>
<head>
<title>Is Deno Ready for Primetime?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno准备好黄金时段了吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/is-deno-ready-for-primetime-a1ea5cd4bea1?source=collection_archive---------12-----------------------#2022-08-01">https://betterprogramming.pub/is-deno-ready-for-primetime-a1ea5cd4bea1?source=collection_archive---------12-----------------------#2022-08-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b8fe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Deno模块的评估</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c8c032689364eba8c26621a8c41cbccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kUqtoE8-0m60rB227I8uGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由DALL-E 2生成</p></figure><p id="8556" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经介绍了Deno T2，一个基于V8 JavaScript引擎和Rust编程语言的JavaScript、TypeScript和WebAssembly的运行时。</p><p id="b7f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里有一个有趣的时间线，比较了<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc"> Node.js </a>和Deno(销毁节点)，以及与Node深度耦合的世界上最大的软件注册表npm(节点包管理器):</p><ul class=""><li id="c1dd" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">npm诞生于2009年9月21日。</li><li id="320a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">node 0.1.14发布于2011年8月2日。</li><li id="3442" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">node 0.6.3于2011年11月24日捆绑npm。</li><li id="723e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">节点14发布于2020年4月21日。</li><li id="037c" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">Deno 1.0于2020年5月13日发布。</li><li id="971e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">节点16发布于2021年4月20日。</li><li id="55b9" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">节点18发布于2022年4月19日。</li><li id="7f27" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">Deno 1.24.1于2022年7月28日发布。</li></ul><p id="f5e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为后来者，Deno建立在node . js 10年经验的基础上，拥有最新的互联网技术和网络标准。</p><p id="1a91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Deno准备好黄金时段了吗？</p><p id="a869" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管坚实的架构带来了有前途的特性，Deno仍然年轻，不稳定，不适合许多环境。这是黄金时间的黎明。它需要一个大的社区来认可这种方法并为开源项目做出贡献。</p><p id="55c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将尝试和评估Deno模块。</p><h1 id="5036" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">Deno模块</h1><p id="eab7" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">根据维基百科的说法，在主要的npm注册表中有超过130万个可用的包。它是强大的，有能力的，但也是一个需要维护的庞大数字。</p><p id="d779" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Deno只支持<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6"> ES模块</a>。对于本地文件，Deno需要完整的模块名，包括扩展名。当处理远程导入时，它期望web服务器通过URL路径解析模块，并提供代码的媒体类型。Deno的远程HTTP导入不使用<code class="fe ng nh ni nj b">package.json</code>。Deno有一个标准库、第三方模块和cdn(内容交付网络)。</p><h2 id="4fd7" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">标准库</h2><p id="5bbe" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">Deno有一个标准库，<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/std" rel="noopener ugc nofollow" target="_blank">https://deno.land/std</a></code>，其中包含了所有Deno项目都可以无所畏惧地使用的高质量代码的模块。例如，<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/manual/node/std_node" rel="noopener ugc nofollow" target="_blank">https://deno.land/manual/node/std_node</a></code>模块，poly填充Node的内置模块。Deno模块没有外部依赖性，它们由Deno核心团队审查。<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/the-comprehensive-guide-to-deno-an-alternative-to-node-ea0db4fdec77">两周前</a>，在<code class="fe ng nh ni nj b">std@0.148.0</code>版本，现在在<code class="fe ng nh ni nj b">std@0.150.0</code>版本。</p><h2 id="330e" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">第三方模块</h2><p id="384a" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">Deno为第三方模块提供托管服务<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">https://deno.land/x</a></code>。它缓存存储在GitHub上的开源模块版本，并在一个易于记忆的域中提供服务。</p><p id="8dea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/the-comprehensive-guide-to-deno-an-alternative-to-node-ea0db4fdec77">两周前</a>，它有4895个第三方模块，现在它有4961个第三方模块。</p><h2 id="cd9e" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">CDNs</h2><p id="eeac" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">一些Deno友好的cdn托管来自npm的包，并将它们作为Deno可消费的es模块提供。<code class="fe ng nh ni nj b">esm.sh</code>、<code class="fe ng nh ni nj b"><a class="ae lu" href="https://esm.sh/" rel="noopener ugc nofollow" target="_blank">https://esm.sh/</a></code>，就是这样的CDN。</p><h1 id="25dc" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">建立全新的工作环境</h1><p id="c9b2" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">我们选择<a class="ae lu" href="https://github.com/denoland/fresh" rel="noopener ugc nofollow" target="_blank"> Fresh </a>作为工作环境，这是一个面向JavaScript和TypeScript开发者的全栈现代web框架。前两篇文章详细描述了以下两个步骤的工作原理:</p><p id="a223" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://medium.com/p/ea0db4fdec77" rel="noopener">第一步:在macOS上，使用brew安装Deno </a>。</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="4a18" class="nk mk it nj b gy oa ob l oc od">% brew install deno</span></pre><p id="ec1c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/the-comprehensive-guide-on-fresh-a-new-web-framework-by-deno-b1ebc94007cb">第二步:使用Deno CLI搭建一个新项目</a>。</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="2c58" class="nk mk it nj b gy oa ob l oc od">% deno run -A -r https://fresh.deno.dev my-project</span></pre><p id="66ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个项目也可以从资源库<code class="fe ng nh ni nj b"><a class="ae lu" href="https://github.com/JenniferFuBook/my-deno-fresh-project" rel="noopener ugc nofollow" target="_blank">my-deno-fresh-project</a></code>下载。</p><p id="a13d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是在项目目录下生成的文件和目录的VS代码显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/d10c2373186e4fc784f88a5712aaa492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9a4Uan4avAKCexPo.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c2e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">顶层文件为<code class="fe ng nh ni nj b">deno.json</code>、<code class="fe ng nh ni nj b">dev.ts</code>、<code class="fe ng nh ni nj b">main.ts</code>、<code class="fe ng nh ni nj b">fresh.gen.ts</code>、<code class="fe ng nh ni nj b">import_map.json</code>和<code class="fe ng nh ni nj b">README.md</code>。</p><p id="b587" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">顶层目录是<code class="fe ng nh ni nj b">routes</code>、<code class="fe ng nh ni nj b">islands</code>和<code class="fe ng nh ni nj b">static</code>。</p><p id="7853" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行<code class="fe ng nh ni nj b">deno task start</code>启动应用程序。页面<code class="fe ng nh ni nj b">http://localhost:8000</code>显示以下应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/24c409f3ed2f0134fcff72765edf23e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/0*RyCqVpZVKs4MVXxB.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="64de" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">示例路线</h1><p id="d77f" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">路由是一种机制，它决定通过哪条路由来处理给定的传入请求。新路由请求基于其URL路径。<code class="fe ng nh ni nj b">routes</code>目录包含项目中的所有路线。每个文件的名称对应于访问该页面的URL路径。</p><p id="285a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们创建一些示例路由来测试Deno模块。</p><h2 id="fe42" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">拉姆达路线</h2><p id="9c46" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated"><a class="ae lu" href="https://ramdajs.com/" rel="noopener ugc nofollow" target="_blank"> Ramda </a>是一个函数式编程库。它旨在将函数式编程添加到JavaScript中，而不改变其本质和感觉。</p><p id="569c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ng nh ni nj b">R.max</code>是一个返回两个参数中较大值的函数。例如，<code class="fe ng nh ni nj b">R.max(200, 300)</code>返回<code class="fe ng nh ni nj b">300</code>。</p><p id="2887" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以在<code class="fe ng nh ni nj b"><a class="ae lu" href="https://esm.sh/" rel="noopener ugc nofollow" target="_blank">https://esm.sh/</a></code>得到ramda模块。在浏览器地址栏中，键入<code class="fe ng nh ni nj b"><a class="ae lu" href="https://esm.sh/ramda" rel="noopener ugc nofollow" target="_blank">https://esm.sh/ramda</a></code>和<code class="fe ng nh ni nj b">enter</code>。会重定向到最新版本的<code class="fe ng nh ni nj b">ramda</code>，可以导入使用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a13e03d04e0d52ddeb909c1d19f3cbbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*VMCNqkC9Cjn_nyB3uzE90Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6fbd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建一条新航路<code class="fe ng nh ni nj b">routes/ramda.tsx</code>，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="708c" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">在第3行，我们导入了最新版本的<code class="fe ng nh ni nj b">ramda</code>。它也适用于特定版本的ramda，如<code class="fe ng nh ni nj b"><a class="ae lu" href="https://esm.sh/v88/ramda@0.28.0/es2022/ramda.js" rel="noopener ugc nofollow" target="_blank">https://esm.sh/v88/ramda@0.28.0/es2022/ramda.js</a></code>。</li><li id="d9d1" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第6行，调用<code class="fe ng nh ni nj b">ramda</code>函数，并返回<code class="fe ng nh ni nj b">300</code>。</li></ul><p id="6c53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">转到页面，<code class="fe ng nh ni nj b">http://localhost:8000/ramda</code>，有效。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/6409dc765ebf9b9200f08c53392961ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*uUEE-_ZubS6-GFndiOxIOw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="b078" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者可以试试Deno的托管服务，<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">https://deno.land/x</a></code>。在<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">https://deno.land/x</a></code>页面，在下面的红色框中输入查询字符串<code class="fe ng nh ni nj b">ramda</code>。按下<code class="fe ng nh ni nj b">enter</code>，页面将被重定向到<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x?query=ramda" rel="noopener ugc nofollow" target="_blank">https://deno.land/x?query=ramda</a></code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/23b44778e0760c251c6d50b8d31a4f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MgQ40H3pAgUbN5Ueym-bEw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e483" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一选择，<code class="fe ng nh ni nj b">rambda</code>，有1334颗星。让我们点击它，进入以下页面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/6ff4184051e2bd06919550e2fcc7045d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZsQi97vBB9To69YpF1zMHQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f168" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">页面上没有用法。无论如何，尝试以下导入:</p><pre class="kj kk kl km gt nw nj nx ny aw nz bi"><span id="64e9" class="nk mk it nj b gy oa ob l oc od">import * as R from "https://deno.land/x/rambda";</span></pre><p id="50ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它会显示一个错误，说明找不到模块。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="ed68" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">1334颗星是从<a class="ae lu" href="https://github.com/selfrefactor/rambda" rel="noopener ugc nofollow" target="_blank"> Github </a>继承来的，但这并不意味着它适用于Deno。</p><h2 id="0447" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">json路线</h2><p id="6bcc" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">JSON是一种轻量级的数据交换格式。<code class="fe ng nh ni nj b">JSON.stringify(value)</code>返回指定<code class="fe ng nh ni nj b">value</code>对应的JSON字符串。这个API对于查看字符串格式的对象值很有用。</p><p id="0401" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">添加路线，<code class="fe ng nh ni nj b">routes/json.tsx</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="6392" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">转到页面，<code class="fe ng nh ni nj b">http://localhost:8000/json</code>，有效。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ol"><img src="../Images/c01e012c4b77422263e0b86a3e743e06.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-3tzYXU_jRdqP6TmSK9GUA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f173" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">JSON5是JSON 的超集，旨在通过扩展其语法来减轻JSON的一些限制。在<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">https://deno.land/x</a></code>，我们找到了json5页面<code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x/json5@v1.0.0" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/json5@v1.0.0</a></code>，上面有一个使用示例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/c3fd1be01d4d696a50591d79c5d5bd07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H89-Zvf1Uj1PBDCgHPGMtg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="acb4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">修改路线<code class="fe ng nh ni nj b">routes/json.tsx</code>以使用<code class="fe ng nh ni nj b">json5</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="b4d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它显示一个错误:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="0ff9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它必须与提供的例子一起工作，但是我们现在找不到模块。</p><p id="bf1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们试试<code class="fe ng nh ni nj b"><a class="ae lu" href="https://esm.sh/" rel="noopener ugc nofollow" target="_blank">https://esm.sh/</a></code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d647" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">转到页面，<code class="fe ng nh ni nj b">http://localhost:8000/json</code>，就可以了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ol"><img src="../Images/c01e012c4b77422263e0b86a3e743e06.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-3tzYXU_jRdqP6TmSK9GUA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="a1b7" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">mysql之路</h2><p id="7a01" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">我们已经在Create React App environment 和Remix 中使用了<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/set-up-and-use-mysql-in-create-react-app-environment-22a4c7dc077f"> MySQL。我们把它作为Deno的标杆吧。</a></p><p id="94e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x/mysql@v2.10.2" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/mysql@v2.10.2</a></code>是一个定义良好的页面，带有详细的文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/7f832175728a3a63b33fc5aa451c7679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qQuFR5SJsASiXLkf8kw9Dw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9e2e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">按照文档创建<code class="fe ng nh ni nj b">mysql</code>路线，<code class="fe ng nh ni nj b">routes/mysql.tsx</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="2751" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">在第7–12行，它创建了一个到MySQL的连接。</li><li id="72c1" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第14–19行，页面处理程序查询已经在数据库中定义的<code class="fe ng nh ni nj b">students</code>表。</li><li id="a30f" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第21–23行，页面内容基于MySQL查询结果呈现。</li></ul><p id="e6eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们用配置好的<code class="fe ng nh ni nj b">myDB</code>运行MySQL 8.0.28。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/f8ab2ec479c6a248387d9e80ff66e34b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*RoBHz_5xJOiiBlzbWWM18Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a408" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">执行<code class="fe ng nh ni nj b">deno task start</code>，显示错误:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="eeda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">发生了什么事？</p><p id="a8ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://github.com/denodrivers/mysql/issues/37" rel="noopener ugc nofollow" target="_blank">本期</a>显示MySQL 8.0的默认认证插件没有实现。Deno不支持<code class="fe ng nh ni nj b">caching_sha2_password</code>，因此只支持低于8.0的MySQL数据库。</p><p id="eec0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题开了两年多了，至今没有任何进展。</p><h2 id="23ca" class="nk mk it bd ml nl nm dn mp nn no dp mt lh np nq mv ll nr ns mx lp nt nu mz nv bi translated">mongodb路线</h2><p id="1ed1" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">MySQL模块不工作。其他数据库呢？尤其是较新类型的数据库？</p><p id="8569" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">SQL数据库使用具有固定行和列的表，自20世纪70年代以来一直在发展。MySQL最初版本发布于1995年5月23日。</p><p id="792b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">自2000年代末以来，NoSQL数据库一直在发展。MongoDB使用带有可选模式的类JSON文档，版本1.0于2009年8月27日发布。</p><p id="e3a1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们相信在MongoDB开发者中应该有更多的Deno采用者。让我们试一试。</p><p id="280a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在macOS上安装MongoDB的最新社区版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="7500" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有多种方法可以运行MongoDB:</p><ul class=""><li id="1284" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">要将MongoDB作为macOS服务运行:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="a4ff" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">要将Mongo DB作为后台进程运行:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="e77f" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">要在命令行运行Mongo DB:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="b63d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">MongoDB Shell<code class="fe ng nh ni nj b">mongosh</code>是一个全功能的JavaScript和Node.js环境，用于与MongoDB部署进行交互。它显示了mongoDB实例的URL路径(第4行)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="6e8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ng nh ni nj b"><a class="ae lu" href="https://deno.land/x/mongo@v0.31.0" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/mongo@v0.31.0</a></code>是一个定义良好的页面，带有详细的文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/d6d94c80f0ea9251c7262f014a8f825e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HlwxErB1DuIcaugP7MGyJw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4529" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建<code class="fe ng nh ni nj b">mongodb</code>路线，<code class="fe ng nh ni nj b">routes/mongodb.tsx</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><ul class=""><li id="2636" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">在第7行，它创建了一个<code class="fe ng nh ni nj b">MongoClient</code>。</li><li id="6f6b" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第8行，它连接到MongoDB，地址显示在<code class="fe ng nh ni nj b">mongosh</code>中。</li><li id="6eee" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第9行，它设置为<code class="fe ng nh ni nj b">test</code>数据库实例。</li><li id="bed4" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第10行，它访问了<code class="fe ng nh ni nj b">users</code>集合。</li><li id="93dd" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第12–22行，页面处理程序查询<code class="fe ng nh ni nj b">users</code>计数(第14行)并插入一个新的计数(第15–18行)。然后，它检索所有用户(第19行)，并将结果传递给<code class="fe ng nh ni nj b">_ctx.render()</code>。</li><li id="3784" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">在第24–27行，页面内容呈现给所有用户，其中第25行记录了<code class="fe ng nh ni nj b">props</code>内容。</li></ul><p id="4a1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过命令<code class="fe ng nh ni nj b">mongod —-config /usr/local/etc/mongod.conf</code>启动mongoDB，并转到页面<code class="fe ng nh ni nj b">http://localhost:8000/mongodb</code>。它显示了四个现有用户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/1c554d745c6d3b43cf0910ed8d371643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*X6VpWp6k9refaCsRPM-3Lw.png"/></div></figure><p id="0b4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是控制台消息:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h1 id="c3e9" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="9828" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">Deno是一个大型项目。架构设计采用最新的互联网技术和网络标准。它相对年轻，构建和维护分布式模块具有挑战性。就像React有Meta做后盾，Angular有Google做后盾，Deno拿一个村子把它推向下一个阶段。</p><p id="855c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是黄金时间的黎明。加入社区来支持Deno，并为开源项目做出贡献。通过反复试验，我们可以成为推动指针前进的力量。</p><p id="9d04" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们期待Deno 2.0，以及一些可预测的发布日期。</p><p id="0fd6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读。</p><p id="2633" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有兴趣，可以看看<a class="ae lu" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的web开发文章目录</a>。</p></div></div>    
</body>
</html>