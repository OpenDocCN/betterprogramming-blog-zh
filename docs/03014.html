<html>
<head>
<title>How to Set Up a Local DynamoDB in a Docker Container</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Docker容器中设置本地DynamoDB</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-up-a-local-dynamodb-in-a-docker-container-and-perform-the-basic-putitem-getitem-38958237b968?source=collection_archive---------4-----------------------#2020-01-15">https://betterprogramming.pub/how-to-set-up-a-local-dynamodb-in-a-docker-container-and-perform-the-basic-putitem-getitem-38958237b968?source=collection_archive---------4-----------------------#2020-01-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3059" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过在Docker容器中设置一个本地DynamoDB实例来改进您的集成测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c64f728a565031c2a8859b2d71aae2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6f40asO5pXJftylOpy8oWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Docker容器中的AWS DynamoDB</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="02d7" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">介绍</h1><p id="a18f" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">在本教程中，我将向您展示如何在Docker容器中设置一个本地DynamoDB，以便您可以在本地机器上使用它。除此之外，我们还将了解如何通过用于DynamoDB的AWS命令行工具来执行基本的CRUD(创建、读取、更新和删除)操作。</p><h2 id="1c72" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">拥有本地DynamoDB实例的好处</h2><p id="05e9" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">拥有本地DynamoDB实例的好处之一是，您可以在本地测试与DynamoDB交互的应用程序代码，而不是在AWS云中指向真正的DynamoDB。我应该提到它是免费的吗？🙂我们也不需要担心本地实例提供的吞吐量。</p><p id="b9d7" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">此外，因为我们将实例托管在Docker容器中，所以它将与运行在本地机器上的其他所有东西分开。所有的依赖项都包含在容器本身中。</p><h2 id="0e44" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">Docker映像和操作系统详细信息</h2><p id="415a" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">我们将在本教程中使用的Docker图像是官方的AWS本地DynamoDB图像，你可以在这里找到<a class="ae nk" href="https://hub.docker.com/r/amazon/dynamodb-local/" rel="noopener ugc nofollow" target="_blank"/>。本教程也是在macOS机器上完成的。</p><p id="57e1" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我们开始吧！</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="ccb4" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">下载Docker</h1><p id="b3ec" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">作为先决条件，您需要在本地机器上安装Docker，如果您还没有安装的话。我不会告诉你怎么做，因为Docker已经在这里发布了如何安装Docker for macOS <a class="ae nk" href="https://docs.docker.com/docker-for-mac/install/" rel="noopener ugc nofollow" target="_blank">的说明。说明很详细，所以你不会有任何问题。</a></p><h2 id="23c5" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">安装AWS命令行工具</h2><p id="9f27" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">本教程的另一个先决条件是AWS命令行工具。请按照AWS <a class="ae nk" href="https://docs.aws.amazon.com/cli/latest/userguide/install-macos.html" rel="noopener ugc nofollow" target="_blank">这里</a>写的说明在macOS上安装CLI工具。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="3018" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">为本地AWS DynamoDB创建Docker-Compose文件</h1><p id="74d6" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">让我们创建一个<code class="fe nl nm nn no b">docker-compose.yaml</code>文件，这样我们就可以利用<code class="fe nl nm nn no b">docker-compose</code>命令来启动和/或停止Docker容器。</p><p id="b3a2" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我将这个文件命名为<code class="fe nl nm nn no b">docker-compose-dynamodb-local.yaml</code>，而不仅仅是<code class="fe nl nm nn no b">docker-compose.yaml</code>，因为我希望能够启动一个我需要的Docker容器(假设我在同一个文件夹中有多个Docker设置)。</p><p id="f886" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">例如，如果我为Kafka或其他东西设置了另一个Docker，那么这个设置将会工作，因为<code class="fe nl nm nn no b">docker-compose</code>命令允许您指定文件的名称。因此，我可以在任何给定的时间里选择我想要旋转的Docker容器。</p><p id="c496" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">文件的内容非常简单。我们只需要指定我们想要的Docker <code class="fe nl nm nn no b">image</code>、<code class="fe nl nm nn no b">hostname</code>、<code class="fe nl nm nn no b">container_name</code>以及我们想要暴露给环境的<code class="fe nl nm nn no b">ports</code>。在这种情况下，我们在本地机器的端口<code class="fe nl nm nn no b">8042</code>上公开Docker容器的端口<code class="fe nl nm nn no b">8000</code>(即DynamoDB的端点将是<code class="fe nl nm nn no b">http://localhost:8042</code>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">docker-compose-dynamo db-local . YAML</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="4d0c" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">启动Docker容器</h1><p id="4b70" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">在您根据上一步创建了<code class="fe nl nm nn no b">yaml</code>文件之后，我们就可以开始运行本地DynamoDB了。从您的终端，将目录<code class="fe nl nm nn no b">cd</code>切换到您创建<code class="fe nl nm nn no b">yaml</code>文件的目录。然后，执行以下命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">docker-compose命令启动本地DynamoDB容器</p></figure><p id="503e" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">厉害！现在我们已经准备好使用刚刚创建的本地DynamoDB实例了。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="be23" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">CRUD操作</h1><h2 id="34ec" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">创建表格</h2><p id="5230" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">在我们进行任何CRUD操作之前，我们需要首先创建一个表。从您的终端，执行以下命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建表格命令</p></figure><p id="e9a4" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我们在命令中设置的变量是:</p><ul class=""><li id="3e57" class="nr ns it lz b ma nf md ng mg nt mk nu mo nv ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">endpoint-url</code>:注意，它被设置为指向<code class="fe nl nm nn no b">http://localhost:8042</code>，这是Docker容器中暴露出来访问DynamoDB的端口。</li><li id="b783" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">table-name</code>:这是将要创建的表的名称。如果你愿意，你可以用不同的名字来命名它。</li><li id="a136" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">attribute-definitions:</code>这是构成表的键模式的属性的描述。它有两个参数，<code class="fe nl nm nn no b">AttributeName</code>和<code class="fe nl nm nn no b">AttributeType</code>。</li><li id="7c99" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">key-schema</code>:在这里我们可以定义作为表格主键的属性。</li><li id="2eb7" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">provisioned-throughput</code>:这定义了我们的表的吞吐量(读和写)，尽管这无关紧要，因为它只是一个本地实例。</li></ul><p id="ed4d" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">如果成功，您应该会看到这样的响应。响应显示了刚刚创建的表的详细信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/798d8fba7c5d48c583ebc4c64765316a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QArq2jFeDNcQEUgKAZyrg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建表成功响应</p></figure><p id="e4ca" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我们现在有桌子玩了。耶！😃</p><h2 id="3c85" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">创建记录— PutItem</h2><p id="0df4" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">我们要对新创建的表做的第一件事是创建一条记录。想象一下这样一个场景，我们有一家企业，想要存储我们的客户信息。让我们假设我们需要的只是他们的电子邮件地址，并且我们有一个合适的系统来生成一个唯一的<code class="fe nl nm nn no b">customerId</code>。</p><p id="b2db" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">要存储新的客户记录，您可以从终端执行以下命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">放入项目</p></figure><p id="38c8" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">如果成功，该命令实际上不会向控制台返回任何内容。所以，当你看不到任何回应时，不要感到困惑。🙂有一个参数<code class="fe nl nm nn no b">--return-values ALL_OLD</code>，但是它也不会返回任何东西，因为它只会返回一个现有的记录，如果有的话。在后面的部分会有更多的介绍。</p><p id="8b5c" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">此外，我们可能想给我们的<code class="fe nl nm nn no b">put-item</code>命令添加一个条件，例如，如果没有相同<code class="fe nl nm nn no b">customerId</code>的现有记录，则只创建一个记录。然后表达式变成这样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有条件表达式的put-item</p></figure><p id="4014" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">如果您尝试执行上面的命令，您将会得到一个错误，因为已经存在一个与<code class="fe nl nm nn no b">1111</code>的<code class="fe nl nm nn no b">customerId</code>相同的记录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/569178fb956e1c5f2b660b86dcb1ed94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8wVyXtyeosUNbsOkzDDo7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">条件检查失败导致的错误</p></figure><p id="4599" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated"><code class="fe nl nm nn no b">condition-expression</code>参数也可用于<code class="fe nl nm nn no b">update-item</code>和<code class="fe nl nm nn no b">delete-item</code>操作。</p><h2 id="1c42" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">检索记录— GetItem</h2><p id="2ed4" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">为了从我们的表中检索一个条目，我们可以使用<code class="fe nl nm nn no b">get-item</code> API。在您的终端上，运行以下命令来检索我们在上一节中创建的客户记录。我们需要指定<code class="fe nl nm nn no b">customerId</code>，因为它是表的主键。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取项目</p></figure><p id="eceb" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">您应该会看到一个响应，其中显示了客户记录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/f2287260007da5ee1e1ad706a7c925f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*eEA5k5qzDtwF7baaqnGLtw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">获取项目响应</p></figure><p id="3aea" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">由此，我们知道上一节中的<code class="fe nl nm nn no b">put-item</code>操作已经成功执行。万岁！😆</p><h2 id="7670" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">更新记录—更新项目</h2><p id="a301" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">接下来，让我们看看是否可以更新之前添加的客户记录。更新记录在现实世界中很常见。假设您的客户需要更改他/她的电子邮件地址。为此，让我们运行下面的命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更新-项目</p></figure><p id="e013" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">如果没有给出<code class="fe nl nm nn no b">return-values</code>参数，如上所示的成功的<code class="fe nl nm nn no b">update-item</code>操作不会返回任何响应。因此，让我们执行一个<code class="fe nl nm nn no b">get-item</code>命令来检索客户记录，以验证我们刚刚对<code class="fe nl nm nn no b">email</code>字段所做的更新。您应该看到下面的响应，它按照我们的<code class="fe nl nm nn no b">update-item</code>表达式显示了新的电子邮件地址。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/11bb81c325980880f12bd1f17735ce52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*aBl9sML4taLkf0i72HzALg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">验证更新项的获取项响应</p></figure><p id="a6c4" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我们现在已经提过几次<code class="fe nl nm nn no b">return-values</code>了，那就说说吧。本质上，如果我们希望我们的<code class="fe nl nm nn no b">update-item</code>命令(以及<code class="fe nl nm nn no b">put-item</code>、<code class="fe nl nm nn no b">delete-item</code>)返回值，我们可以添加这个参数。<code class="fe nl nm nn no b">return-values</code>参数有5个可接受的值:</p><ul class=""><li id="fce0" class="nr ns it lz b ma nf md ng mg nt mk nu mo nv ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">NONE</code>:如果我们简单的不包含<code class="fe nl nm nn no b">return-values</code>，那么将默认为<code class="fe nl nm nn no b">NONE</code>。这意味着不会返回任何值。</li><li id="5eb0" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">ALL_OLD</code>:它将返回更新前该项目的所有属性或列。</li><li id="b269" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">UPDATED_OLD</code>:只返回更新前更新过的属性。</li><li id="be0e" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">ALL_NEW</code>:更新后返回该项目的所有属性或列。</li><li id="c10b" class="nr ns it lz b ma oa md ob mg oc mk od mo oe ms nw nx ny nz bi translated"><code class="fe nl nm nn no b">UPDATED_NEW</code>:更新后只返回项目的属性。</li></ul><p id="200b" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">例如，如果您只是将<code class="fe nl nm nn no b">--return-values ALL_NEW</code>添加到上面的<code class="fe nl nm nn no b">update-item</code>命令中，您将会看到我们在上面的<code class="fe nl nm nn no b">update-item</code>命令之后执行的<code class="fe nl nm nn no b">get-item</code>命令的响应。</p><p id="3834" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">此外，我们可以使用相同的<code class="fe nl nm nn no b">update-item</code>命令向我们的客户记录添加更多的字段。执行以下命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用新字段和返回值更新项目</p></figure><p id="d209" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">您应该会看到该命令的响应，其中包含该项目的所有当前属性。干得好！🙂</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/944e61a9eabc0eaf87aa22f064a1bdba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t5P3mnMNxPyJwtghoAMkng.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更新-项目回应</p></figure><p id="c367" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我想对<code class="fe nl nm nn no b">update-item</code>操作做的最后一件事是添加<code class="fe nl nm nn no b">condition-expression</code>。假设我们希望向符合资格标准的客户发送报价，出于某种奇怪的原因，该标准是客户出生在<code class="fe nl nm nn no b">1980-01-01</code>之后。😅</p><p id="d762" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">为了识别这些客户，并用一个标志来更新我们的表，该标志表明客户有资格获得优惠，让我们执行下面的命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用条件表达式更新项目</p></figure><p id="1c6e" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">如您所见，我们的客户<code class="fe nl nm nn no b">1111</code>的<code class="fe nl nm nn no b">isEligibleForPromotion</code>标志等于<code class="fe nl nm nn no b">true</code>。耶！🙂</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/4b62ae552076cccf23be6b8257ab9f35.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*ZBfxtrq6BWz13rIh5S8EGA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用条件表达式结果更新项目</p></figure><p id="3369" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">如果我们试图更新一个在<code class="fe nl nm nn no b">1980-01-01</code>之前有<code class="fe nl nm nn no b">dateOfBirth</code>的客户，我们会收到这样的错误。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/00beb1d03181aef47a3fed3ad47465d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SnLPzds0NiQBC30E2w-ymg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用条件表达式错误更新项目</p></figure><h2 id="60f0" class="mt lg it bd lh mu mv dn ll mw mx dp lp mg my mz lr mk na nb lt mo nc nd lv ne bi translated">删除记录—删除项目</h2><p id="f71c" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">最后但同样重要的是，有时我们需要根据他们的请求删除我们的客户记录；例如，他们选择退出我们的邮件列表或其他。为此，让我们运行以下命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">删除-项目</p></figure><p id="fc64" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我们在这里添加了<code class="fe nl nm nn no b">return-values</code>参数，这样它将把被删除的项目打印到控制台。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="7363" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">停止码头集装箱</h1><p id="717e" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">既然您已经完成了所有的CRUD操作(或者您可能想继续探索？)，是时候拆Docker容器了。为此，您只需从创建<code class="fe nl nm nn no b">docker-compose-dynamodb-local.yaml</code>文件的位置运行下面的命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">docker-向下合成</p></figure><p id="bf70" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">您应该在终端控制台中看到以下响应。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/dfc68abd017e8a29f8bbcd42f19f924e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HPea0IOZhtIdHKhOPTFtww.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">docker-撰写关闭响应</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="0607" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">包扎</h1><p id="9f7d" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">如果您已经做到了这一步，那么您已经掌握了一些使用DynamoDB实例构建Docker容器、创建DynamoDB表、使用条件表达式对表执行CRUD操作以及关闭容器的技巧。干得好，各位。👍 👍</p><p id="0c6f" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">我希望本教程能帮助您理解，您可以利用本地DynamoDB Docker映像对使用DynamoDB的应用程序进行本地测试。🙂</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/6bc4ba44d4f8e7085606cac5dfa7ee2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MYgfMrQn8LCfUVJ5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae nk" href="https://unsplash.com/@dre0316?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">安德烈·亨特</a>在<a class="ae nk" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="8324" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">下一步是什么</h1><p id="9f96" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf mg mh mi mj mk ml mm mn mo mp mq mr ms im bi translated">您现在可能想知道…“如果我想通过我的应用程序与本地DynamoDB实例交互呢？”别担心，我掩护你。😉</p><p id="f916" class="pw-post-body-paragraph lx ly it lz b ma nf ju mc md ng jx mf mg nh mi mj mk ni mm mn mo nj mq mr ms im bi translated">查看本文，了解如何将您现有的应用程序与本地DynamoDB实例集成。</p></div></div>    
</body>
</html>