<html>
<head>
<title>Clean Code Applied to JavaScript (Part 4)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应用于JavaScript的干净代码(第4部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/clean-code-applied-to-javascript-part-4-3f6db21ee4e5?source=collection_archive---------20-----------------------#2019-12-09">https://betterprogramming.pub/clean-code-applied-to-javascript-part-4-3f6db21ee4e5?source=collection_archive---------20-----------------------#2019-12-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3869" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于编写和维护干净代码的惊人好处的系列文章。第四部分:评论。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b9a1822b721cd36857cacba29610ede9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zB8InrY8_Eh1WSyTJYAh9g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安妮·斯普拉特在<a class="ae ky" href="https://unsplash.com/s/photos/team?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="684c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文是深入探讨应用于JavaScript的干净代码主题的系列文章的第四篇。</p><p id="f583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本系列中，我们将讨论每个程序员都应该知道的关于干净代码的经典技巧，并将它们应用于特定的JavaScript/TypeScript语言。</p><ul class=""><li id="3b8a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/clean-code-applied-to-javascript-part-1-9f3badd5715" rel="noopener">第1部分:开始之前</a></li><li id="f38c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/clean-code-applied-to-javascript-part-ii-variables-8302f01e539c" rel="noopener">第二部分:变量</a></li><li id="cbfa" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/@ccaballero/clean-code-applied-to-javascript-part-3-functions-f9f26b221736" rel="noopener">第3部分:功能</a></li><li id="9575" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/clean-code-applied-to-javascript-part-4-3f6db21ee4e5" rel="noopener">第4部分:注释</a></li><li id="fdfc" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/clean-code-applied-to-javascript-part-5-exceptions-d46e07691c19" rel="noopener">第5部分:例外情况</a></li><li id="0620" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/clean-code-applied-to-javascript-part-6-avoid-conditional-complexity-5ee9cbb1b26a" rel="noopener">第6部分:避免条件复杂性</a></li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="f671" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">介绍</h1><p id="e1aa" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在本帖中，我们将讨论一个引起开发者争论的话题。许多开发人员认为注释是好的实践，而其他人认为相反——应用注释是不好的实践。</p><p id="1ba8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很抱歉地告诉你，没有绝对的规则——一切都要看情况。事实是，在很多情况下，注释<em class="nn">并没有</em> <strong class="lb iu"> </strong>对软件开发有所贡献，因为它们已经被其他比应用注释更好的工具所取代。在其他情况下，注释可能会对我们正在开发的源代码或者我们将来将要阅读的源代码造成干扰。在这种情况下，最理想的是没有评论。</p><p id="65cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，在有些情况下，注释是很好的实践，例如在公共API的文档中，您可以了解一个库的行为，但不能了解它是如何开发的。</p><p id="7ebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将描述注释产生噪音的几种情况，这时注释不应该应用在你的代码中。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="fe19" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">只评论有业务逻辑复杂性的东西</h1><p id="a462" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">注释的存在只是为了帮助程序员解释对他们来说很难理解的业务逻辑。评论从来没有描述过算法。我们必须认为好的代码通常是自文档化的，并且源代码在阅读时是可以理解的。注释是额外的，不是必需的。</p><p id="86b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，有时算法是为特定的业务逻辑设计的，而作为开发人员，我们并不知道这一点。比如用信用卡操作，用自己的保险操作等等。</p><p id="82e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的例子显示了其中大部分的冗长和不必要的注释。然而，最后一个注释并非无关紧要，因为操作是在我们正在建模的问题的领域中执行的。这个评论的存在不会有什么坏处。这个注释不是描述在编程层次上正在做什么，而是在业务逻辑层次上正在做什么。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="0072" class="nt mr it np b gy nu nv l nw nx">function convert(data){<br/> // The result<br/> let result = 0;<br/> <br/> // length of string<br/> const length = data.length;<br/> <br/> // Loop through every character in data<br/> for (let i = 0; i &lt; lenght; i++){<br/> // Get character code.<br/> const char = data.charCodeAt(i);<br/> // Make the hash<br/> result = (result &lt;&lt; 5) — result + char;<br/> // Conver to 32-bit integer<br/> result &amp;= result;<br/> }<br/>}</span></pre><p id="fda9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">等效的代码如下所示。在这段代码中，你可以看到注释并没有增加价值，而是在我们的代码中产生了噪音。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="4dac" class="nt mr it np b gy nu nv l nw nx"><br/>function convert(data) {<br/> let result = 0;<br/> const length = data.length;<br/> <br/> for (let i = 0; i &lt; length; i++){<br/> const char = data.charCodeAt(i);<br/> result = (result &lt;&lt; 5) — result + char;<br/> result &amp;= result; // Convert to 32-bit integer<br/> }<br/>}</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="19c5" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">没有日志评论</h1><p id="9251" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">注释被用来(我希望这种情况不再发生)记录文件随时间发生的变化。由于缺乏版本控制工具，这在过去可能是有意义的。</p><p id="1ad1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，这个任务应该委托给版本控制软件(我推荐使用GIT)。因此，不需要死代码、注释代码，尤其是日志注释。</p><p id="d8b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获得这些信息，您只需使用<em class="nn"> git log </em>来获取历史记录命令。</p><p id="ef12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一段带有日志注释的代码，与之相对的是更简洁的版本。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="edaf" class="nt mr it np b gy nu nv l nw nx">/**<br/> * 2018–12–20: Removed monads, didn’t understand them (CC)<br/> * 2018–10–01: Improved using special mondas (JS)<br/> * 2018–02–03: Removed type-checking (LI)<br/> * 2017–03–14: Added add with type-checking (CC)<br/> */<br/> function add(a, b) {<br/> return a + b;<br/> }</span><span id="4aae" class="nt mr it np b gy ny nv l nw nx">function add(a, b) {<br/> return a + b;<br/>}</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="194f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">避免位置标记</h1><p id="c08f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">您应该避免位置标记，因为它们通常只会增加干扰。<br/>让函数和变量名，以及适当的标识和格式，给你的代码提供可视化的结构。</p><p id="7b5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码显示了一个带有位置标记及其干净版本的示例。您应该认为这些使用注释的技术是一种时代错误，因为在早期，开发人员的工具很少。现在，没有必要在源代码中创建这些标记，因为它们只是噪声。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="21c6" class="nt mr it np b gy nu nv l nw nx">///////////////////////////////<br/>// Controller Model Instantiation<br/>///////////////////////////////<br/>controller.model = {<br/> name: ‘Felipe’,<br/> age: 34<br/>};</span><span id="e176" class="nt mr it np b gy ny nv l nw nx">///////////////////////////////<br/>// Action Setup<br/>///////////////////////////////<br/>const actions = function() {<br/> // …<br/>};</span><span id="7e9e" class="nt mr it np b gy ny nv l nw nx">controller.model = {<br/> name: ‘Felipe’,<br/> age: 34<br/>};</span><span id="f364" class="nt mr it np b gy ny nv l nw nx">const actions = function() {<br/> // …<br/>};</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="7cec" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="9cbe" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">评论是当今开发人员中争论最激烈的话题之一。许多人认为它们是必要的，而许多人认为它们不是。在生活中，任何决策都不能走极端，软件开发也不例外。</p><p id="a552" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在这篇文章中，我试图总结三种通过包含注释而使代码变脏的做法。然而，如果我们正在创建一个公共API，写注释可能会很有趣，因为我们正在记录API。</p><p id="d4d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多教师采用的一个不好的做法是注释生产代码中的每一行。这种不好的习惯是从初级程序员被教导编码代码时继承下来的，每一行都被注释为学习指南。</p><p id="ae97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在产品开发中，拥有学习指南和评论每一行代码之间的差别是巨大的。</p><p id="bb61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们讨论的要点如下:</p><ul class=""><li id="4cf1" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">只评论有业务逻辑复杂性的东西</li><li id="3ddd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">没有日志评论</li><li id="1125" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">避免位置标记</li></ul></div></div>    
</body>
</html>