<html>
<head>
<title>Analyzing Flutter Projects With SonarQube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用SonarQube分析颤振项目</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/flutter-and-sonarqube-6aa06e4b9798?source=collection_archive---------1-----------------------#2022-06-18">https://betterprogramming.pub/flutter-and-sonarqube-6aa06e4b9798?source=collection_archive---------1-----------------------#2022-06-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="863b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">颤振和共振</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/28a206986ad5a9cc804db1d2d5084671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*85YBUNJptHrEYqjF0zSiXw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/pt/users/publicdomainpictures-14/" rel="noopener ugc nofollow" target="_blank"> PublicDomainPicture </a>在<a class="ae ky" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="fac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有一个Flutter应用程序，并且你想知道你的代码质量或者项目的哪些部分需要改进，你可以使用Sonarqube来分析你的代码并为你恢复这些信息。</p><p id="7602" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SonarQube(又名Sonar)是一个开源平台，它基于代码分析来测量代码质量，以检测代码气味、bug、代码覆盖率、代码复杂性、安全问题等。</p><p id="1627" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将通过以下步骤详细展示如何使用SonarQube和Docker分析您的Flutter代码:</p><ul class=""><li id="65b9" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">本地运行声纳</li><li id="4ba5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">创建一个声纳项目</li><li id="01c7" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">下载声纳扫描仪</li><li id="e62c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">分析你的颤振项目</li><li id="d0ba" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">检查结果</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="657d" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">本地运行声纳</h2><p id="e4db" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">您可以使用docker在本地运行Sonar，为此，在您的终端中运行命令<code class="fe no np nq nr b">docker run --rm -d -p 9000:9000/tcp edsondiasalves/sonarqube-flutter</code>，它将提取并运行已经安装了<a class="ae ky" href="https://github.com/insideapp-oss/sonar-flutter" rel="noopener ugc nofollow" target="_blank">Sonar cube Flutter插件</a>的Sonar cube映像。</p><blockquote class="ns nt nu"><p id="ff82" class="kz la nv lb b lc ld ju le lf lg jx lh nw lj lk ll nx ln lo lp ny lr ls lt lu im bi translated">注意SonarQube Flutter插件不是官方的，我使用的这个docker镜像在我自己的docker库中，你可以随意使用它，但我不对它可能出现的任何问题负责</p><p id="b7a1" class="kz la nv lb b lc ld ju le lf lg jx lh nw lj lk ll nx ln lo lp ny lr ls lt lu im bi translated">要创建声纳镜像并自己安装插件，<a class="ae ky" href="https://github.com/insideapp-oss/sonar-flutter/releases" rel="noopener ugc nofollow" target="_blank">下载插件</a>并将其复制到docker镜像运行:<code class="fe no np nq nr b">docker cp ThePluginDownload.jar YourSonarQubeImage:/opt/sonarqube/extensions/plugins</code></p></blockquote><p id="0229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦映像完成提取并运行，它将在地址<a class="ae ky" href="http://localhost:9000" rel="noopener ugc nofollow" target="_blank"> http://localhost:9000 </a>上可用，使用<strong class="lb iu"> admin </strong>作为用户<strong class="lb iu"> </strong>并使用1234作为密码登录</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/095e83db410bf86cb31e37a27d919629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SJn3NXm2ykO7F93fbbC5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube登录页面</p></figure><p id="be5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当点击<strong class="lb iu">管理</strong>菜单选项，在<strong class="lb iu">已安装</strong>部分我们可以看到Flutter插件版本0.4.0已安装</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/b21ec4e6116d89bea1edc20dc8dc74ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LuTpFBONsyCYy2ii8PDDPw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube已安装插件页面</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="24f6" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">创建一个声纳项目</h2><p id="7174" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">现在，是时候创建我们的声纳项目了，为此点击<strong class="lb iu">项目</strong>菜单选项</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/94b90be913f3aee050d1a10b42822efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEGFE3CxUbp7qpxiH4ug9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube项目页面</p></figure><p id="7264" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并在页面中央的<strong class="lb iu">按钮中添加一个项目</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/12a5f29e0783719bdf6d12f6ea63a657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wxzw7899XWg1RPJMe6A-vw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube添加项目页面</p></figure><p id="b503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，手动点击<strong class="lb iu"/>，提供一个<strong class="lb iu">项目键</strong>，注意显示名称会自动完成，不需要更改-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/8332f63b11cf0d09b3efe7fdafa09fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*2kuYZyACUaoMi_RI5J0v4Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube项目关键页</p></figure><p id="ea12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击<strong class="lb iu">设置</strong>按钮，将出现一个新屏幕，要求您生成一个新令牌，提供一个名称，然后单击<strong class="lb iu">生成</strong>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/e40791ea72cf11de64f95be26c3795c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XnhrjoBO0MKCNKLqp-ZxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube令牌生成页面</p></figure><p id="8d6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将为提供的令牌名称创建一个新令牌。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/6e972ee2c284d44db18ee891d160fdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57Gz0sCBHMf3haV1ILtIjA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube生成的令牌页面</p></figure><p id="c13a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当点击but <strong class="lb iu"> Continue </strong>按钮时，将显示如何在不同平台上运行分析</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/496e7d11378ab1dd4725150f76234a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xoHZyEhz_WGQ4n-lI42Fug.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube分析建议页</p></figure><p id="0aa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你的声纳项目已经创建好了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/278540c58527899fbfe89f585d8c8c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QuEKv4mkgJXZA2PeJahfDg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube项目页面</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="5327" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">下载声纳扫描仪</h2><p id="86dc" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">SonarScanner是一个官方的SonarQube工具，它将扫描你的项目并将分析上传到你的Sonar项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/5e7958718664a194c5695cc3003b596f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ANt2oAOumkSvksri45afOA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">声纳扫描仪文档和下载部分</p></figure><p id="bf13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据你的操作系统下载，并将<strong class="lb iu"> /bin </strong>文件夹添加到路径中</p><p id="c1c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为4.7.0 windows版本的示例，需要将<code class="fe no np nq nr b">sonar-scanner-cli-4.7.0.2747-windows\bin</code>添加到路径中</p><p id="7a1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了确保它是正确的，在您的终端上运行<code class="fe no np nq nr b">sonar-scanner -v</code>并检查版本是否会被正确返回</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/ecbfc1d3db471ae70b87435b19458fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*aGLeY6CZt0wKmwfHTtw1jw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">声纳扫描仪版本</p></figure><h2 id="8ebb" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">分析你的颤振项目</h2><p id="e0fb" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">现在，在你的Flutter根文件夹中创建<code class="fe no np nq nr b">sonar-project.properties</code>，并粘贴下面的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="bf4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用之前创建声纳项目时提供的信息替换<code class="fe no np nq nr b">sonar.projectKey</code>、<code class="fe no np nq nr b">sonar.projectName</code>和<code class="fe no np nq nr b">sonar.login</code>。</p><p id="e712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行<code class="fe no np nq nr b">flutter test --machine --coverage &gt; tests.output</code>，它将运行您的本地测试并在声纳扫描仪上传之前将其导出到一个文件中</p><p id="708f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，运行<code class="fe no np nq nr b">sonar-scanner</code>开始分析并上传到你的声纳项目</p><p id="a4f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切正常，最后会出现类似的消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/937bace66ecdeb2f61d76b4d9e4d873e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KU_j9nBZWcvCIFIKUYyKig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">声纳扫描仪分析日志</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="819d" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">检查结果</h2><p id="4028" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">完成扫描后，返回声纳并按f5或再次输入您的项目。现在我们可以看到关于该项目的主要信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/08dc2c5c2d84a71004ad68e5c9d9e513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*42kQ_nanJF3wJ4sef_hOtg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube项目页面</p></figure><p id="5f4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在“概述”选项卡中，我们可以看到更多一般信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/f19d2697bcc36ed138e2174059115157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4vpKNyHqyT3_Lts-fbf6Aw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube项目概述页面</p></figure><p id="c2dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您需要更多详细信息，请浏览其他选项卡</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/05325e6b93bed75a7b71674df2256f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W75hq7mUJuDIZDoV8LkQ3Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SonarQube问题页面</p></figure><p id="3e4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧，完成了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="2699" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像往常一样，我只是提到了该工具的最基本的用法，请随意查看关于<a class="ae ky" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>、<a class="ae ky" href="https://www.sonarqube.org/" rel="noopener ugc nofollow" target="_blank">sonar cube</a>和<a class="ae ky" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>的更多细节，请访问它们各自的文档页面。</p><p id="1367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次，小心使用本文中的图片和插件，它不是一个官方插件，Sonar docker图片在我的个人报告中。</p><p id="4c49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望能对你有用，感谢你读到这里，下次见。</p></div></div>    
</body>
</html>