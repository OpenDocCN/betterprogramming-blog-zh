<html>
<head>
<title>Turn JavaScript Into TypeScript Compatible Packages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将JavaScript转换成兼容TypeScript的包</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/turn-javascript-into-typescript-compatible-packages-cb81820838ed?source=collection_archive---------14-----------------------#2022-02-16">https://betterprogramming.pub/turn-javascript-into-typescript-compatible-packages-cb81820838ed?source=collection_archive---------14-----------------------#2022-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="54ba" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从纯JavaScript项目中生成兼容TypeScript的NPM包</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5300739db1e1fab2f324271aa962d3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GfNwSUtr_RUMpR_6"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@carrier_lost?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊恩·泰勒</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ad00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也许作为一名JavaScript开发人员，您已经担心将您的NPM包转换成<a class="ae kv" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">类型脚本</a>。或者，也许您有不值得花时间移植的遗留代码库。</p><p id="d386" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，您希望您的JavaScript包包含在TypeScript社区中，能够在他们的项目中利用您的NPM包。</p><h1 id="4ed7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">带有JSDoc的JavaScript</h1><p id="dd24" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我的JavaScript项目中，我总是在我的项目中利用JSDoc注释的能力，这是我的IDE能够理解的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/5a964f8f2b8b0d9412f1979866399f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UUvh3w4VTuiwS0AKgvrfsA.gif"/></div></div></figure><p id="0ae5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的JavaScript示例中，JSDoc定义了参数和返回类型:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="34ea" class="mv lt iq mr b gy mw mx l my mz"><em class="na">/**<br/> * Return the average of an array of numbers.<br/> *<br/> * @param</em><strong class="mr ir"><em class="na"> </em></strong><em class="na">{</em><strong class="mr ir"><em class="na">number[]</em></strong><em class="na">} arr Array of numbers to be averaged<br/> * @returns</em><strong class="mr ir"><em class="na"> </em></strong><em class="na">{</em><strong class="mr ir"><em class="na">number</em></strong><em class="na">} Average of numbers<br/> */<br/></em>const average = (arr) =&gt; arr.reduce((a, b) =&gt; a + b) / arr.length;</span></pre><p id="a34b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这使我的IDE能够提供指示签名(<code class="fe nb nc nd mr b">arr: number[]</code>)和返回值(<code class="fe nb nc nd mr b">number</code>)类型的代码完成/智能感知。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/e15216eea9c84ab916e6dd2525903048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6QGpQ1QddF5ab6Fwa1E94A.png"/></div></div></figure><p id="d50f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我输入无效的值，它会突出显示错误。例如，如果我在我的<code class="fe nb nc nd mr b">average()</code>函数中输入<code class="fe nb nc nd mr b">string</code>值而不是<code class="fe nb nc nd mr b">number</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/09c29d448ba352c30c5722a3b86d0548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASEUPNySx8CWzkXV6HfLzQ.png"/></div></div></figure><p id="6139" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而且，我可以从我的<em class="na">问题</em>窗口查看错误的完整汇编。</p><p id="533d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使对于更复杂的typedefs和enums，JSDoc也提供了很多功能。例如，我有一个字符串值的月相枚举:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="0753" class="mv lt iq mr b gy mw mx l my mz"><em class="na">/**<br/> * Enumeration of lunar phases<br/> *<br/> * </em><strong class="mr ir"><em class="na">@typedef {string} </em></strong><em class="na">LunarPhase<br/> * </em><strong class="mr ir"><em class="na">@enum {LunarPhase}</em></strong><em class="na"><br/> */<br/></em>export const LunarPhase<strong class="mr ir"><em class="na"> </em></strong>= {<br/>  NEW: "New",<br/>  WAXING_CRESCENT: "Waxing Crescent",<br/>  FIRST_QUARTER: "First Quarter",<br/>  WAXING_GIBBOUS: "Waxing Gibbous",<br/>  FULL: "Full",<br/>  WANING_GIBBOUS: "Waning Gibbous",<br/>  LAST_QUARTER: "Last Quarter",<br/>  WANING_CRESCENT: "Waning Crescent",<br/>};</span></pre><p id="e6d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我有一个返回下一阶段日期的函数:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3076" class="mv lt iq mr b gy mw mx l my mz"><em class="na">/**<br/> * </em><strong class="mr ir"><em class="na">@param {LunarPhase}</em></strong><em class="na"> phase<br/> * </em><strong class="mr ir"><em class="na">@returns {Date}</em></strong><em class="na"><br/> */<br/></em>const next = (phase) =&gt; {<br/>  // ...<br/>  return new <strong class="mr ir"><em class="na">Date</em></strong>();<br/>};</span></pre><p id="6117" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的IDE能够解析这些类型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/661ddaf79e9df605f54256771c863254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*j73yz6KlSQlrxg7PluD2fA.gif"/></div></div></figure><p id="9da9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再次警告错误:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/c56ddc81abe2663917f67af112afb232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ZhrIyiL_DqbPzKtg1JX0g.png"/></div></div></figure><p id="2119" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，JSDoc并没有提供TypeScript的所有功能，比如接口或通用模板编程。但是，它确实满足类型。</p><h1 id="afc0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">问题:在TypeScript中使用您的包</h1><p id="50db" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，您已经编写了出色的JavaScript模块并将其发布给了NPM，您希望在TypeScript项目中利用它。</p><p id="8509" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将模块添加到package.json后，您会得到错误:</p><blockquote class="ni nj nk"><p id="8f60" class="kw kx na ky b kz la jr lb lc ld ju le nl lg lh li nm lk ll lm nn lo lp lq lr ij bi translated">TS7016:找不到模块“T16”的声明文件。</p></blockquote><p id="4a65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为您的项目不是TypeScript，所以它没有构建一个<code class="fe nb nc nd mr b">d.ts</code>声明文件，所以您的所有类型都是隐式的<code class="fe nb nc nd mr b">any</code>。</p><p id="04d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有不同的方法来处理这个问题，从发布<code class="fe nb nc nd mr b">@types</code>包到修改TypeScript的严格性，但是如果你已经利用了我上面描述的JSDoc，有一种方法可以生成你需要的东西。</p><h1 id="6e51" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">解决方案:从JSDoc构建一个声明文件</h1><p id="26e7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了构建声明文件，我们需要向我们的开发依赖项、配置和一些脚本中添加一些包。</p><h2 id="3f3d" class="mv lt iq bd lu no np dn ly nq nr dp mc lf ns nt me lj nu nv mg ln nw nx mi ny bi translated">属国</h2><p id="3731" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在您的<em class="na"> package.json </em>中，添加以下开发依赖项:</p><ul class=""><li id="98aa" class="nz oa iq ky b kz la lc ld lf ob lj oc ln od lr oe of og oh bi translated">以打字打的文件</li><li id="6368" class="nz oa iq ky b kz oi lc oj lf ok lj ol ln om lr oe of og oh bi translated">@microsoft/api-extractor</li></ul><p id="b526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您从<a class="ae kv" href="https://rollupjs.org/" rel="noopener ugc nofollow" target="_blank"> Rollup </a>开始构建，您的开发依赖项可能看起来像这样:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2e40" class="mv lt iq mr b gy mw mx l my mz">"devDependencies": {<br/>  "@microsoft/api-extractor": "^7.19.4",<br/>  "@rollup/plugin-commonjs": "^21.0.1",<br/>  "@rollup/plugin-node-resolve": "^13.1.3",<br/>  "eslint": "^8.9.0",<br/>  "jsdoc": "^3.6.10",<br/>  "prettier": "^2.5.1",<br/>  "rimraf": "^3.0.2",<br/>  "rollup": "^2.67.2",<br/>  "typedoc": "^0.22.11",<br/>  "typescript": "^4.5.5"<br/>}</span></pre><h2 id="bcf3" class="mv lt iq bd lu no np dn ly nq nr dp mc lf ns nt me lj nu nv mg ln nw nx mi ny bi translated">类型脚本配置</h2><p id="a2f0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于TypeScript支持，我们需要添加一个<em class="na"> tsconfig.json </em>文件。这将配置TypeScript来扫描我们的<em class="na"> JavaScript </em>源以构建声明:</p><p id="bffa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<em class="na"> tsconfig.json </em>添加到项目的根目录:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="dafa" class="mv lt iq mr b gy mw mx l my mz">{<br/>  "include": ["./src/**/*"],<br/>  "compilerOptions": {<br/>    "lib": [<br/>      "dom",<br/>      "dom.iterable",<br/>      "esnext"<br/>    ],<br/>    "allowJs": true,<br/>    "declaration": true,<br/>    "declarationMap": true,<br/>    "emitDeclarationOnly": true,<br/>    "esModuleInterop": true,<br/>    "module": "esnext",<br/>    "moduleResolution": "node",<br/>    "outDir": "dist",<br/>    "strict": true,<br/>    "target": "es6"<br/>  }<br/>}</span></pre><h2 id="e403" class="mv lt iq bd lu no np dn ly nq nr dp mc lf ns nt me lj nu nv mg ln nw nx mi ny bi translated">Microsoft API提取器配置</h2><p id="52d6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了编译声明文件，<a class="ae kv" href="https://api-extractor.com/" rel="noopener ugc nofollow" target="_blank">微软API提取器</a>需要被配置为将所有<code class="fe nb nc nd mr b">d.ts</code>文件合并到一个<code class="fe nb nc nd mr b">index.d.ts</code>文件中，用于我们的包分发。</p><p id="3475" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<em class="na"> api-extractor.json </em>添加到项目的根目录:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3184" class="mv lt iq mr b gy mw mx l my mz">{<br/>  "projectFolder": ".",<br/>  "mainEntryPointFilePath": "&lt;projectFolder&gt;/build/index.d.ts",<br/>  "bundledPackages": [],<br/>  "compiler": {<br/>    "tsconfigFilePath": "&lt;projectFolder&gt;/tsconfig.json",<br/>    "overrideTsconfig": {<br/>      "compilerOptions": {<br/>        "outDir": "build"<br/>      }<br/>    }<br/>  },<br/>  "dtsRollup": {<br/>    "enabled": true,<br/>    "untrimmedFilePath": "&lt;projectFolder&gt;/dist/index.d.ts"<br/>  },<br/>  "apiReport": {<br/>    "enabled": false<br/>  },<br/>  "docModel": {<br/>    "enabled": false<br/>  },<br/>  "tsdocMetadata": {<br/>    "enabled": false<br/>  },<br/>  "messages": {<br/>    "compilerMessageReporting": {<br/>      "default": {<br/>        "logLevel": "none"<br/>      }<br/>    },<br/>    "extractorMessageReporting": {<br/>      "default": {<br/>        "logLevel": "none"<br/>      }<br/>    },<br/>    "tsdocMessageReporting": {<br/>      "default": {<br/>        "logLevel": "none"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><h2 id="48ae" class="mv lt iq bd lu no np dn ly nq nr dp mc lf ns nt me lj nu nv mg ln nw nx mi ny bi translated">包脚本</h2><p id="f50f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有了依赖项和配置，我们只需要向<em class="na"> package.json </em>添加一个脚本来运行TypeScript编译器，并使用Microsoft API Extractor构建声明文件。</p><p id="630b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加以下脚本:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="a6df" class="mv lt iq mr b gy mw mx l my mz">"scripts": {<br/>  "prebuild:types": "rimraf ./build",<br/>  "build:types": "tsc -p ./tsconfig.json --outDir build &amp;&amp; api-extractor run",<br/>},</span></pre><p id="5c99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在构建之前，它会清理<em class="na"> build/ </em>文件夹。这是可选的，但是一个好主意。你需要<code class="fe nb nc nd mr b">rimraf</code>或同等的软件包来删除。</p><p id="63c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，<code class="fe nb nc nd mr b">build:types</code>脚本将执行TypeScript并通过Microsoft API提取器构建声明。</p><h1 id="bf2b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">警告-至少需要一个类型脚本文件</h1><p id="2cc4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果在此过程中收到错误，可能是因为Microsoft API提取器需要至少一个TypeScript文件。</p><p id="8a76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能会看到:</p><blockquote class="ni nj nk"><p id="7641" class="kw kx na ky b kz la jr lb lc ld ju le nl lg lh li nm lk ll lm nn lo lp lq lr ij bi translated">api提取器7 . 19 . 4—<a class="ae kv" href="https://api-extractor.com/" rel="noopener ugc nofollow" target="_blank">https://api-extractor.com/</a></p><p id="6ffd" class="kw kx na ky b kz la jr lb lc ld ju le nl lg lh li nm lk ll lm nn lo lp lq lr ij bi translated">使用中的配置。/api-extractor.json</p><p id="6f6c" class="kw kx na ky b kz la jr lb lc ld ju le nl lg lh li nm lk ll lm nn lo lp lq lr ij bi translated">错误:分析tsconfig.json内容时出错:在配置文件“tsconfig.json”中找不到任何输入。指定的“包含”路径为“[* */*]”，而“排除”路径为“["build"]”。</p></blockquote><p id="a9e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">真的很讨厌…仍然在努力找出一个更好的解决方案，但基本上我们只需要在解决方案的根中有一个TypeScript文件。</p><p id="855d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我创建一个<em class="na">build-declarations . ts</em>文件，内容如下:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="9771" class="mv lt iq mr b gy mw mx l my mz"><em class="na">/**<br/> * This file is required for Microsoft API Extractor <br/> * to build declaration files.<br/> * <br/> * It is intentionally left blank.<br/> */</em></span></pre><h1 id="e995" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结果呢</h1><p id="be58" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">除了构建包之外，我们现在可以通过执行您的<code class="fe nb nc nd mr b">build</code>脚本和<code class="fe nb nc nd mr b">build:types</code>脚本来构建类型脚本声明:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/f2f2270844c57910bac4ae4bf5729a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3dPyyY5HmxQVBqSRjWnCpA.gif"/></div></div></figure><p id="1a51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的JavaScript构建可分发版本将和以前一样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/d7ae9357cb96e7a469fa8c00a588ebd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kq5k9vwLjewKjpRkiSMR7Q.png"/></div></div></figure><p id="dd75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是现在有了一个d.ts声明文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/d5ff8ddadca2f28898be04ce0e396b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgHdNdKBuXir_jcGcaD9Lg.png"/></div></div></figure><h1 id="d290" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在TypeScript应用程序中使用它</h1><p id="14fe" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，您出色的NPM包可以加载到TypeScript项目中，如下面的React TypeScript App.tsx所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/9cfc60a287f570686bddaa5c2a44e3df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hg0xHxbf3BQDjGNbHSBdUg.gif"/></div></div></figure><h1 id="3006" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">额外奖励:文档</h1><p id="a6e1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这样做的另一个副作用是我们可以利用<a class="ae kv" href="https://typedoc.org/" rel="noopener ugc nofollow" target="_blank"> TypeDoc </a>进行文档记录。</p><p id="97bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您将<code class="fe nb nc nd mr b">typedoc</code> npm模块添加到您的开发依赖项中，您可以运行以下任一脚本:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d8b4" class="mv lt iq mr b gy mw mx l my mz">"scripts": {<br/>  "predoc:jsdoc": "rimraf ./docs",<br/>  "docs:jsdoc": "jsdoc -r src/*s -R README.md -d ./docs",<br/><br/>  "predoc:typedoc": "rimraf ./docs",<br/>  "docs:typedoc": "typedoc src --out docs",<br/>},</span></pre><p id="88c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过运行<code class="fe nb nc nd mr b">docs:jsdoc</code>生成JSDoc，和以前一样</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/db4d2638dfbede966d263afba5d8dc9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8WWsipWhdzxOta3HRkTPNA.png"/></div></div></figure><p id="4858" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，通过运行<code class="fe nb nc nd mr b">docs:typedoc</code>来代替TypeDoc</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/0fbb0873c0d1b40402f60e165fbd088f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e43FEGmtwDvPddyM03d1-Q.png"/></div></div></figure><h1 id="04cf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">示例存储库</h1><p id="5251" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">本文的一个例子可以在GitHub上从我的NPM包样板库中找到:</p><div class="oq or gp gr os ot"><a href="https://github.com/jasonsturges/npm-package-boilerplate" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd ir gy z fp oy fr fs oz fu fw ip bi translated">GitHub-jasonsturges/npm-package-boilerplate:JavaScript库NPM包样板</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">使用这个模板搭建JavaScript npm包来引导你的下一个库。对于TypeScript版本，请参见…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">github.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph kp ot"/></div></div></a></div><h1 id="1d0f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">摘要</h1><p id="1cb0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">TypeScript非常棒，但并不适合所有人。</p><p id="e654" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于NPM软件包来说，TypeScript非常灵活，因为它的输出可以在JavaScript和TypeScript项目中使用。</p><p id="68db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用JavaScript时，没有类型声明，这意味着您的NPM包与TypeScript生态系统不相关。</p><p id="18f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，在NPM有一个巨大的纯JavaScript包生态系统。TypeScript开发人员必须处理这些情况。除此之外，如果您利用JSDoc并依赖它的类型值，这种混合解决方案可能会满足两个世界。</p></div></div>    
</body>
</html>