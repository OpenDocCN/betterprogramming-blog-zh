<html>
<head>
<title>Let’s Build a Full-Stack Application in React and Node With MongoDB and NestJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用MongoDB和NestJS在React和Node中构建一个全栈应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-build-a-mongodb-nestjs-react-node-full-stack-application-c47e2eee9240?source=collection_archive---------5-----------------------#2020-07-08">https://betterprogramming.pub/lets-build-a-mongodb-nestjs-react-node-full-stack-application-c47e2eee9240?source=collection_archive---------5-----------------------#2020-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9467" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第1部分:设置堆栈</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b7dc541aa21b7e7b00ddea39be09c739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UJwQJ1Ec0ZiOuUM4V6lYvg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="6d0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我一直在研究不同的web应用程序堆栈，我想与你们分享它们。对于这个由两部分组成的教程，我们将创建一个基本的CRUD员工管理应用程序，它将使用上面提到的技术。</p><p id="5237" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为一名想探索和尝试不同技术的软件工程师同事，我很难找到在真实应用程序中讨论以下技术的文章。本文要求您至少具备React、<a class="ae lr" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>和<a class="ae lr" href="https://nestjs.com/" rel="noopener ugc nofollow" target="_blank"> NestJS </a>的基本工作知识。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="377b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">设置环境</strong></h1><p id="96a0" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">如果您没有以下软件工具，请按照以下步骤在您的机器上安装它们:</p><ol class=""><li id="f513" class="mw mx iq kx b ky kz lb lc le my li mz lm na lq nb nc nd ne bi translated">您需要在计算机上安装Node.js和npm。请按照此<a class="ae lr" href="https://www.npmjs.com/get-npm" rel="noopener ugc nofollow" target="_blank">链接</a>安装两者。</li><li id="cc06" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated">您有一个首选的文本编辑器(例如Sublime、VSCode)和一个网络浏览器(例如Google Chrome、Firefox)</li><li id="2146" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated">您应该安装了一个Postman应用程序。这将用于测试我们的应用程序。</li></ol><p id="1dd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在一切都准备好了，让我们开始构建这个令人敬畏的应用程序吧！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0a46" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">构建后端</h1><p id="e609" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">先说我们的MongoDB + NestJS + Node服务器栈！</p><h2 id="d34c" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">设置MongoDB Atlas集群</h2><p id="509f" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">创建一个MongoDB帐户。创建帐户后，我们可以在MongoDB中创建一个项目和一个自由层集群，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/ab23c8d0c8d204c161f440eda0d393e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*Wo4oJv9U5u3niTGfuzluUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">MongoDB中的“Cluster0”集群</p></figure><p id="c0a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了连接集群，可以点击<em class="nx"> </em>按钮。然后点按“连接您的应用程序”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/262b38034fddbe1bc3813a829877c80b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JsSNtNo4-01QUwwJLoEUIw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">如何连接到MongoDB集群</p></figure><p id="0fd3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">记下页面上显示的连接字符串(类似于下图)。我们将在以后连接到数据库时使用它:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="fffd" class="nk ma iq oa b gy oe of l og oh">mongodb+srv://&lt;username&gt;:&lt;password&gt;<a class="ae lr" href="http://twitter.com/cluster0" rel="noopener ugc nofollow" target="_blank">@cluster0</a>.abvta.mongodb.net/&lt;dbname&gt;?retryWrites=true&amp;w=majority</span></pre><p id="53ad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在页面左侧的“网络访问”选项卡中，我们需要将我们当前的IP地址列入白名单，以便我们能够连接到MongoDB项目。点击“添加IP地址”按钮，添加您当前的IP地址。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/aa7de475df52c16700088494ed6d736f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhFah15zVhnqpFV-rkLJ6Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">MongoDB中的IP地址白名单</p></figure><h2 id="1f4b" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">创建NestJS项目</h2><p id="656e" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">现在已经创建了MongoDB集群，让我们创建NestJS项目。打开终端并创建我们的项目目录。我们将把它命名为<code class="fe oj ok ol oa b">full-stack-employee-app</code>:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="66d8" class="nk ma iq oa b gy oe of l og oh">$  mkdir full-stack-employee-app</span></pre><p id="0a9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您的计算机上没有NestJs库，可以使用以下命令安装它:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="16dd" class="nk ma iq oa b gy oe of l og oh">$  npm install -g @nestjs/cli</span></pre><p id="a9ac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在项目目录中，我们需要创建名为<code class="fe oj ok ol oa b">backend</code>的NestJS项目:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="0cdf" class="nk ma iq oa b gy oe of l og oh">$  cd full-stack-employee-app<br/>$  nest new backend</span></pre><p id="dfc0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将为我们的应用程序创建样板NestJS项目。之后，我们需要安装以下库:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="a4d7" class="nk ma iq oa b gy oe of l og oh">$  cd backend<br/>$  npm install --save @nestjs/mongoose mongoose<br/>$  npm install --save <a class="ae lr" href="http://twitter.com/nestjs/config" rel="noopener ugc nofollow" target="_blank">@nestjs/config</a></span></pre><h2 id="41e8" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">启动应用程序</h2><p id="deb9" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">现在，我们可以启动应用程序来初步检查我们刚刚创建的NestJS项目:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="a7f9" class="nk ma iq oa b gy oe of l og oh">$  npm run start</span></pre><p id="61da" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将在默认端口3000上启动应用程序。打开您选择的网络浏览器，导航到<a class="ae lr" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，您应该会看到类似下面的页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/b27ad904ba41c1ad108ed56e96cc4236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6vV_1333iYVuoq6GvfBeg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">NestJS HelloWorld样板文件</p></figure><h2 id="1ff7" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">连接到MongoDB集群</h2><p id="15dc" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">还记得我们之前保存的连接字符串吗？我们需要将它放在后端目录根目录下的一个<code class="fe oj ok ol oa b">.env</code>文件中。您可以根据之前的设置更改<code class="fe oj ok ol oa b">&lt;username&gt;</code>、<code class="fe oj ok ol oa b">&lt;password&gt;</code>和<code class="fe oj ok ol oa b">&lt;dbname&gt;</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/6d89cd9078dabb8ec3c779fbe186ff26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sg5_DmbG5ASEKTf_fAZ4Ig.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">。环境文件</p></figure><p id="adac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe oj ok ol oa b">src/</code>目录下的<code class="fe oj ok ol oa b">app.module.ts</code>文件中，修改代码以得到以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/4da47a292e49c4dfb51bf0f2e55bbf98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bcoAWNTkNubcsshSyMNVSw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">应用程序模块</p></figure><p id="cba2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您尝试在我们项目的根目录下运行下面的命令，该程序应该能够没有任何问题地连接到<code class="fe oj ok ol oa b">mongoDB</code>实例:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="1e58" class="nk ma iq oa b gy oe of l og oh">$  npm run start</span></pre><h2 id="8076" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">创建员工模块</h2><p id="e6ba" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">我们现在要创建应用程序的<code class="fe oj ok ol oa b">Employee</code>模块。首先，在<code class="fe oj ok ol oa b">src/</code>目录中创建以下文件夹:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="67eb" class="nk ma iq oa b gy oe of l og oh">$  mkdir employee/<br/>$  mkdir employee/dto/<br/>$  mkdir employee/interfaces/<br/>$  mkdir employee/schemas/</span></pre><p id="4c1a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将首先从<code class="fe oj ok ol oa b">schema/</code>文件夹开始。在<code class="fe oj ok ol oa b">schema</code>文件夹中，创建一个名为<code class="fe oj ok ol oa b">employee.schema.ts</code> <em class="nx"> </em>的文件，并将以下代码放入其中。这将定义<code class="fe oj ok ol oa b">employee</code>模式的字段:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/c686c8276ff65a9aa71cc88b78f1f89f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMBQByMwhrhkVV8tOg8rtg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">员工.架构. ts</p></figure><p id="99d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在转到<code class="fe oj ok ol oa b">interfaces/</code>文件夹，我们需要创建一个接口，用于对应用程序接收的数据进行类型检查。在<code class="fe oj ok ol oa b">interfaces/</code>文件夹中创建<code class="fe oj ok ol oa b">employee.interface.ts</code>并粘贴以下代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/ec18598ca6af5997a914b5880b788490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HyC4CLcQXq882cdr0_uxNg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">员工.界面. ts</p></figure><p id="9b13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们将移动到<code class="fe oj ok ol oa b">dto/</code>文件夹。我们需要创建一个d to(数据传输对象)模式，定义我们的数据将如何通过网络发送。在<code class="fe oj ok ol oa b">dto/</code>文件夹中创建<code class="fe oj ok ol oa b">create-employee.dto.ts</code>，并添加以下代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/c4a291849c7399bbadd60e0ac94a37d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kp-TCJ0Fz7jaCr8K-Ns1fw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建-员工. dto.ts</p></figure><h2 id="d6e3" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">生成员工模块</h2><p id="93ed" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">NestJs中的一个<code class="fe oj ok ol oa b">@Module()</code>装饰器提供了元数据，它利用这些元数据来组织应用程序结构。为了在Nest中创建一个模块，执行以下命令:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="ccb8" class="nk ma iq oa b gy oe of l og oh">$  nest generate module employee</span></pre><p id="570f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将在<code class="fe oj ok ol oa b">employee/</code>文件夹中创建一个名为<code class="fe oj ok ol oa b">employee.module.ts</code>的文件。它看起来类似于这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/2f63d4b62627fce4fd495efbbaff02a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9sa8DeKgkOwkzMKEXDWuPQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雇员.模块. ts</p></figure><p id="a129" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们稍后将返回并修改该文件。</p><h2 id="316d" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">生成员工服务</h2><p id="a712" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">为了创建服务，您可以调用以下命令:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="9305" class="nk ma iq oa b gy oe of l og oh">$  nest generate service employee</span></pre><p id="2f09" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将创建两个文件，即员工/文件夹内的<em class="nx"> </em> <code class="fe oj ok ol oa b">employee.service.ts</code>和<code class="fe oj ok ol oa b">employee.service.spec.ts</code> <em class="nx">、</em>。第一个文件是我们将要修改以创建我们的雇员服务的文件。同时，<code class="fe oj ok ol oa b">employee.service.spec.ts</code>用于测试创建的服务。在本教程中，将不会涉及Nest中的测试。请继续关注未来的另一个教程，它将涵盖这个主题。</p><p id="cd46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">回到雇员服务，这个服务类负责检索和存储控制器将使用的数据。继续修改<code class="fe oj ok ol oa b">employee.service.ts</code>文件，使其具有以下代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/c275b4a34d54cacca24a511d5c4e1dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQRI7aCKzOoGU5Ox_0M35Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">员工服务</p></figure><h2 id="bab0" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">生成员工控制器</h2><p id="87b1" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">Web API控制器是一个负责处理传入的HTTP请求并向调用者发送相应响应的类。为了在Nest中创建控制器，您可以调用以下命令:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="422e" class="nk ma iq oa b gy oe of l og oh">$  nest generate controller employee</span></pre><p id="dec3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将在<code class="fe oj ok ol oa b">employee/</code>文件夹中创建两个文件<code class="fe oj ok ol oa b">employee.controller.ts</code>和<code class="fe oj ok ol oa b">employee.controller.spec.ts</code>。与我们之前创建的服务类似，在本教程中，我们将只修改<code class="fe oj ok ol oa b">employee.controller.ts</code>。</p><p id="257c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您现在可以修改<code class="fe oj ok ol oa b">employee.controller.ts</code>文件，使其具有以下代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/39b9c98281f0939659b12e3c221514cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nI5qoI_9bqghpey8VfJtUQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雇员.控制者. ts-1</p></figure><p id="e7b6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">类顶部的<code class="fe oj ok ol oa b">@Controller()</code>装饰器用于定义一个基本控制器。我们在装饰器中添加了一个<code class="fe oj ok ol oa b">employee</code>字符串来分组相关的路由。</p><p id="f429" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于第一个函数，这将让我们在每次收到Post HTTP请求时添加一个雇员。还添加了<code class="fe oj ok ol oa b">/create</code>路线供我们使用该功能。</p><p id="c409" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，继续修改控制器，以获得这两条路由，让我们可以搜索所有员工或只搜索具有特定员工ID的单个员工。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/56b739af398eb994d94a20b2731dbf2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9ekW1f6krboWLxHYmIn-w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雇员.控制者. ts-2</p></figure><p id="e283" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了获得具有特定id的雇员，每当请求带有无效ID时，我们将抛出一个<code class="fe oj ok ol oa b">NotFoundException</code>。</p><p id="aa3f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，修改控制器代码，以便有一个更新和删除特定雇员的路径:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/d97859c6c1731e868bcb4ee1c132071e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67LZMPAEpHGYkhF_sm4u-w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雇员.控制者. ts-3</p></figure><h2 id="e847" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated">钓上来</h2><p id="d2f4" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">现在，我们几乎完成了后端。我们只需要返回并修改我们之前创建的<code class="fe oj ok ol oa b">employee.module.ts</code>,这样您就有了以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/cd472ab4c8b2480c1a7e997e0296743e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cy88RzWGrqfypEZpbKK9Lg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雇员.模块. ts</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="520d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">使用Postman运行应用程序并进行测试</h1><p id="e8d1" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">现在我们已经设置好了，我们可以使用之前使用的相同命令来运行应用程序:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="746a" class="nk ma iq oa b gy oe of l og oh">$  npm run start</span></pre><p id="3fee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦应用程序启动，您就可以转到您的Postman应用程序，用下面的代码进行类似的测试:</p><h2 id="0640" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated"><strong class="ak">创建员工</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/b665f21cff27e8d4defd1e76d94ba4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edNhUnWo_GvItEfy06JAGg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建员工</p></figure><h2 id="9d3a" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated"><strong class="ak">检索所有员工</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/d6f4097eea1552484d5890b8ea8d440b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*axyGRIbxNLEM1pY2FsdWHA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">获取所有员工</p></figure><h2 id="b5ef" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated"><strong class="ak">获取具有特定ID的员工</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/dab343253d44682b28f1e623ee34b000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*_f8sBTP9XNfGvaPMl39Byw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">获取具有特定id的雇员</p></figure><h2 id="491b" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated"><strong class="ak">更新员工</strong></h2><p id="0c63" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">要更新一个员工，我们需要将<code class="fe oj ok ol oa b">employeeId</code>放在“Params”选项卡中，并带有相应的<code class="fe oj ok ol oa b">employeeId</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/a3c748717df06ba4d7f5748bcdc54a92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yh-mV3QONtHnf-rYNsV01w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用于更新员工的参数标签</p></figure><p id="9310" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">同样，我们需要将更新后的数据放在“Body”选项卡中。执行该命令后，您应该会得到类似的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/72233ab75587a3e93385a3dee116b74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gMtbh-x4dW8ShUuQ00tpWQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用于更新员工的正文标签</p></figure><p id="289e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要进行检查，您可以执行请求来获取所有员工，您应该会看到您所做的更改。</p><h2 id="3f95" class="nk ma iq bd mb nl nm dn mf nn no dp mj le np nq ml li nr ns mn lm nt nu mp nv bi translated"><strong class="ak">删除员工</strong></h2><p id="755e" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">类似于更新请求，需要一个<code class="fe oj ok ol oa b">employeeId</code> <em class="nx"> </em>来删除一个雇员。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/729f090ecc085c1ccb9c8ce78503fd1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YpnL5AUGsLrb5GebSsRAkw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">删除员工</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3818" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="83f9" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">作为本教程的总结，我们已经创建了应用程序的后端组件，该组件连接到MongoDB Atlas。此外，我们还创建了一个带有相应服务和控制器的员工模式。相应地，我们已经使用Postman测试了我们的应用程序。</p><p id="c5fb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您想更深入地了解代码，可以查看以下GitHub资源库:</p><div class="pb pc gp gr pd pe"><a href="https://github.com/AntonJaie/employee-crud-tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">Anton jaie/员工-crud-教程</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">github.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps kp pe"/></div></div></a></div><p id="bd00" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请继续关注我的下一篇文章。我们将处理应用程序的前端部分。</p></div></div>    
</body>
</html>