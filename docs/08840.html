<html>
<head>
<title>Why Kubernetes Has Become So Popular in Data Engineering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么Kubernetes在数据工程领域如此受欢迎</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-kubernetes-has-become-so-popular-in-data-engineering-7206b1b6d748?source=collection_archive---------4-----------------------#2021-06-17">https://betterprogramming.pub/why-kubernetes-has-become-so-popular-in-data-engineering-7206b1b6d748?source=collection_archive---------4-----------------------#2021-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fdc2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这是一件好事吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ff72ff13c8a78f1c96eeb41ae944124c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CAeYc7dcofZ_04yNz59E5A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@lukas-hartmann-304281?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Lukas Hartmann </a>从<a class="ae ky" href="https://www.pexels.com/photo/ship-with-lights-on-concrete-platform-1719475/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a> | <a class="ae ky" href="https://www.annageller.com/disclosure" rel="noopener ugc nofollow" target="_blank">品牌内容披露</a>拍摄。</p></figure><p id="641f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">容器已经成为将数据项目转移到生产中的事实上的标准。不再有依赖性管理的噩梦——在本地机器上开发的项目可以毫无意外地“运送”到登台和生产集群。数据管道和ML模型最终是可复制的，并且可以以相同的方式在任何地方运行。</p><p id="1672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，随着容器化数据工作负载数量的不断增长，编排平台变得越来越重要。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ec2f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.编排容器</h1><p id="a8e8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您想运行可复制的数据管道和可以在任何地方运行的ML模型，您可能知道Docker映像是一种不错的选择。从软件工程师到DevOps和SREs，每个人都喜欢容器图像。</p><p id="ef11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过去，挑战在于大规模运行集装箱。有了Kubernetes——尤其是部署到弹性云服务时——大规模管理容器的执行变得不那么痛苦了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a40a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.团队之间的沟通</h1><p id="e625" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽管我们中的许多人喜欢构建端到端的数据产品，但实际上，许多企业在谁构建数据产品和谁运行数据产品之间划分了责任。构建数据管道后，数据科学家和工程师通常必须将这些数据交给DevOps和SREs进行部署和监控。容器映像使得这个移交过程更加容易。</p><p id="43e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同时，容器促进了数据工程师、数据科学家和分析师之间的代码共享和协作，他们可以在同一个可再现的环境中工作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4f74" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.声明性定义</h1><p id="d4fe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如今，数据工程工作负载本质上是动态的。假设您将数据管道部署到一个Kubernetes集群，现在由于内存不足而失败。解决这个问题可能需要增加声明性部署文件中的内存大小，并将更改应用到集群。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d033" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.证明文件</h1><p id="b675" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">工作流和配置作为代码的一个很好的“副作用”是一切都被记录下来——不仅仅是业务逻辑，还有执行细节，比如事情在哪里运行以及它们消耗了哪些资源。当其他工程师需要处理您的代码时，不需要猜测和来回沟通就能让他们跟上您的数据工作负载。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="500f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.版本控制</h1><p id="35ee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">声明式工作流和环境定义的另一个好处是一切都可以进行版本控制。如果出现问题，您可以恢复到以前的版本。您可以跟踪一段时间内对环境所做的更改，并提供合规性审核日志。GitOps和MLOps使这种方法流行起来，但是容器和编排平台有效地使之成为可能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="73b0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">6.维护执行层的健康</h1><p id="7bdc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Kubernetes最突出的优点之一是，它总是试图维护所需的状态，并在资源耗尽时重启或重新创建资源。当然，Kubernetes的自我修复“能力”不会修复您的所有问题(如业务逻辑中断)，但至少当由于临时网络问题而发生错误时，您不需要干预，该问题可以通过重启或重新部署到新的pod来解决。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7bb9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">7.随着数据的增长，无缝扩展您的执行平台</h1><p id="918a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如今，在一台服务器上运行数据管道可能无法满足您的需求。随着数据量的增长，管理数据处理变得越来越困难——不管我们是将代码打包成容器映像还是在单个本地进程中运行它。</p><p id="4f40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您需要跨多个节点扩展您的工作负载，Kubernetes(尤其是与Helm charts结合使用)可以更轻松地在计算集群上安装Dask或Spark，从而跨多个节点分布数据处理。大多数云提供商提供自动扩展服务，甚至提供完全无服务器的数据平面(法盖特的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/serverless-kubernetes-cluster-on-aws-with-eks-on-fargate-a7545cf179be">AWS EKS</a>和<a class="ae ky" href="https://cloud.google.com/blog/products/containers-kubernetes/introducing-gke-autopilot" rel="noopener ugc nofollow" target="_blank"> GCP GKE自动驾驶</a>)。这些云供应商负责在需要时横向扩展工作节点，从而完全消除了猜测所需容量的需要。</p><p id="4875" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管有这么多好处，Kubernetes不会让您立即看到数据工作负载中发生了什么，但它会让您更容易安装分布式计算引擎，并无缝地将其扩展到多个节点。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0f2d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">8.开发和生产环境对等</h1><p id="e0a8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">构建数据产品时的一个常见挑战是，开发环境通常与生产环境中的运行方式大相径庭。容器化的工作负载使这种转变变得更加容易。对于登台和生产环境，您可能有不同的集群或名称空间。它们之间的切换应该是无缝的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="87cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">9.迭代更快</h1><p id="1eed" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">迭代对于构建数据工作负载至关重要。大部分数据产品一开始都是不好的。您可能需要几个周期来清理和转换数据，测试各种分类器和超参数，或者用新数据丰富模型。Kubernetes部署允许您实现A/B测试，或者运行同一个ML培训作业的多个实例，但是使用不同的超参数。</p><p id="2a4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">真正证明利用Kubernetes可以让你迭代得更快的是当你把Kubernetes和抽象出底层细节的工具结合起来的时候。例如:</p><ul class=""><li id="cf8d" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">为了构建和扩展你的数据流，你可以在Kubernetes 上利用<a class="ae ky" href="https://www.prefect.io/" rel="noopener ugc nofollow" target="_blank">perfect</a>和<a class="ae ky" href="https://kubernetes.dask.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> Dask。</a></li><li id="6571" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">为了服务ML模型或者执行A/B测试，你可以利用<a class="ae ky" href="https://docs.seldon.io/projects/seldon-core/en/latest/" rel="noopener ugc nofollow" target="_blank">塞尔顿</a>。</li><li id="12b8" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">要构建可视化、洞察力、度量和KPI，您可以使用<a class="ae ky" href="https://www.gooddata.com/developers/cloud-native-community-edition/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank">GoodData.CN</a>。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d047" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">10.安装几乎任何软件与舵图表和进一步的功能</h1><p id="a855" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Kubernetes已经变得如此普遍流行，以至于已经构建或重新设计了许多工具来处理K8s集群，并且您通常可以使用Helm chart存储库来安装它们。在上面的列表中，我们只是触及了表面。它应该只展示您可以利用这个容器编排平台来构建所有的数据工作负载——执行ETL作业、训练和服务ML模型，甚至构建和托管可视化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/6d19c90dd743ada0eda1bac685e7aec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovxZlxo0XgV69ZnnhizLHA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/photo/photo-of-person-pointing-on-laptop-3183171/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae ky" href="https://www.pexels.com/@fauxels?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">faxels</a>拍摄。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="534f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">共同的主题</h1><p id="8250" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">上述各点的共同点是，容器(和容器编排平台)允许我们:</p><ul class=""><li id="a4a0" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">构建可重复的代码，这些代码可以在任何地方、任何规模下以相同的方式运行。</li><li id="4551" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">减少不同团队之间交接时的摩擦。</li><li id="1b06" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">将现代软件工程实践应用于数据工作负载，包括GitOps、DevOps和MLOps。</li></ul><p id="4bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想让你的数据可视化遵循这种范式，GoodData最近推出了云原生平台<a class="ae ky" href="https://www.gooddata.com/developers/cloud-native-community-edition/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank">GoodData.CN</a>，你可以安装到你的Kubernetes集群。您可以从运行一个单映像Docker容器来本地开发仪表板、指标和KPI开始(以一种<a class="ae ky" href="https://towardsdatascience.com/can-we-apply-the-dry-principle-to-business-intelligence-68c4cfe25669" rel="noopener" target="_blank">干法</a>！):</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="5d77" class="nt md it np b gy nu nv l nw nx">docker run --name gooddata -p 3000:3000 -p 5432:5432 \\<br/>  -e LICENSE_AND_PRIVACY_POLICY_ACCEPTED=YES gooddata/gooddata-cn-ce:latest</span></pre><p id="a0df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦您在本地开发了您的仪表板、指标和洞察，您就可以导出您的声明性定义并将它们部署到生产Kubernetes集群。GoodData团队向<a class="ae ky" href="https://www.gooddata.com/developers/cloud-native/doc/1.1/installation/k8s/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank">提供了详细的文档</a>，展示了如何在各种场景下安装他们的软件:</p><ul class=""><li id="8825" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.gooddata.com/developers/cloud-native/doc/1.1/installation/k8s/environment/aws/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank">采用RDS Postgres数据库和ElastiCache for Redis的AWS EKS</a>，</li><li id="4caa" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.gooddata.com/developers/cloud-native/doc/1.1/installation/k8s/environment/gcp/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank"> GCP GKE为Postgres提供云SQL，为Redis提供MemoryStore】，</a></li><li id="d59e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.gooddata.com/developers/cloud-native/doc/1.1/installation/k8s/environment/azure/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank"> Azure AKS用Azure数据库做Postgres，用Azure缓存做Redis </a>，</li><li id="02cd" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.gooddata.com/developers/cloud-native/doc/1.1/installation/k8s/environment/on-premise/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank">内部部署</a>，</li><li id="6d0a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">以及许多关于如何<a class="ae ky" href="https://www.gooddata.com/developers/cloud-native/doc/1.1/administration/?utm_source=mediumcom&amp;utm_medium=referral&amp;utm_campaign=gdcn&amp;utm_content=anna-k8s" rel="noopener ugc nofollow" target="_blank">管理组织、工作空间和数据源的有用提示</a>。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6462" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="eaaf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们研究了Kubernetes(以及一般的容器编排平台)的特性，这些特性使得容器在数据团队中如此普遍地流行。与K8s集成的工具数量之多，以及它在每个云平台中的存在，使其成为可再生和可扩展数据工作负载的全面执行层。</p><p id="b2cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>