<html>
<head>
<title>How REST Is Your REST API?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的REST API怎么样？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-rest-is-your-rest-api-71817554c99e?source=collection_archive---------22-----------------------#2020-01-28">https://betterprogramming.pub/how-rest-is-your-rest-api-71817554c99e?source=collection_archive---------22-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3f43" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Richardson成熟度模型认可REST APIs的四个阶段</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/93c31b7be1d01f64d34ff2d82a89825f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKCUsi7Xqqc0bpjsln9BHA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安妮·斯普拉特在<a class="ae ky" href="https://unsplash.com/s/photos/growing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8472" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数软件应用程序都有某种API。我们需要一种与其他系统交流的方法。</p><p id="70dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最流行的解决方案之一是REST API。根据开发人员的经验和系统需求，REST API可以通过几种不同的方式实现。思考API设计以及如何充分利用它是值得的。</p><p id="2a4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">REST代表代表性状态转移。我们可以将数据传输到另一个系统，并期望以无状态的方式接收响应。它允许多个系统之间通过网络进行统一通信。</p><p id="4daf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们知道将我们的请求发送到哪里，以及会得到什么样的回应。REST也是技术不可知的。通过REST进行通信的应用程序彼此之间只需要知道很少的信息。他们不必关心细节，API接口就足够了。</p><p id="b77d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">REST APIs有四个成熟度级别。该模型由Leonard Richardson创建，描述了REST标准的实现情况。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bc1c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">0级</h1><p id="8063" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这不是推荐的实现，而且相当麻烦。我们没有利用休息的好处。我们直接告知应该执行哪个操作，并将我们的请求发送到单个端点。它是一种远程过程执行。</p><p id="364d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要获得一个ID为<code class="fe mz na nb nc b">“1234”</code>的植物。如果我们正在处理一个0级REST API，我们将创建一个类似下面的调用。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="0976" class="nh md it nc b gy ni nj l nk nl">POST /plantsService HTTP/1.1</span><span id="c3c4" class="nh md it nc b gy nm nj l nk nl">{<br/>   "method": "fetch",<br/>   "params": {<br/>       "id": "1234"<br/>    }<br/>}</span></pre><p id="0d42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为回报，我们会收到预期的信息或错误。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d5c2" class="nh md it nc b gy ni nj l nk nl">HTTP/1.1 200 (OK)</span><span id="cddc" class="nh md it nc b gy nm nj l nk nl">{<br/>    "result": {<br/>        "id": "1234",<br/>        "name": "Fern",<br/>        "color": "Blue"    <br/>    },<br/>    "error": null,<br/>}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fb36" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">一级</h1><p id="ca67" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们不会对每个呼叫都使用一个端点。根据不同的用例，资源可以在不同的路径下使用。</p><p id="3e3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以打电话给<code class="fe mz na nb nc b">/plants</code>列出所有可用的工厂，打电话给<code class="fe mz na nb nc b">/plants/1234</code>获得单个工厂的详细信息，或者打电话给<code class="fe mz na nb nc b">/plants/new</code>添加新产品。</p><p id="9102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想添加一棵具有给定名称和颜色的新植物，我们可以发出以下请求。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2eea" class="nh md it nc b gy ni nj l nk nl">POST /<!-- -->plants/new<!-- --> HTTP/1.1</span><span id="89d8" class="nh md it nc b gy nm nj l nk nl">{<br/>   "name": "Fern",<br/>   "color": "Green"<br/>}</span></pre><p id="39c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为回报，我们会收到确认或错误。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="fa27" class="nh md it nc b gy ni nj l nk nl">HTTP/1.1 201 (CREATED)</span><span id="9ec1" class="nh md it nc b gy nm nj l nk nl">{<br/>    "id": "12345"<br/>}</span></pre><p id="eaa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们使用不同的端点来获取和修改数据，我们可以引入缓存。</p><p id="0548" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">负责数据检索的请求可以通过使用适当的HTTP头来缓存(例如<code class="fe mz na nb nc b">Cache-Control</code>)。这可能是巨大的性能优化。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="afbd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第二级</h1><p id="3866" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在REST API成熟度的第二个层次上，我们使用HTTP动词来传达我们的意图。根据使用的动词类型，将触发不同的操作。</p><p id="b109" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们对资源组使用不同的URL。给定一个ID为“1234”的工厂，我们将发送:</p><ul class=""><li id="32d4" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">向<code class="fe mz na nb nc b">/plants/1234</code>发出的获取数据的<code class="fe mz na nb nc b">GET</code>请求。</li></ul><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="5699" class="nh md it nc b gy ni nj l nk nl">GET /<!-- -->plants/1234<!-- --> HTTP/1.1</span></pre><ul class=""><li id="4c30" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">一个<code class="fe mz na nb nc b">PATCH</code>请求<code class="fe mz na nb nc b">/plants/1234</code>更新它的值。</li></ul><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="b070" class="nh md it nc b gy ni nj l nk nl">PATCH /<!-- -->plants/new<!-- --> HTTP/1.1</span><span id="a79f" class="nh md it nc b gy nm nj l nk nl">{<br/>   "<!-- -->color<!-- -->": "Yellow"<br/>}</span></pre><ul class=""><li id="b7a2" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">一个<code class="fe mz na nb nc b">DELETE</code>请求<code class="fe mz na nb nc b">/plants/1234</code>删除它。</li></ul><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="d4f2" class="nh md it nc b gy ni nj l nk nl">DELETE /<!-- -->plants/1234<!-- --> HTTP/1.1</span></pre><p id="fbbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一的区别是HTTP请求的类型。有五个最常用的HTTP动词:</p><ul class=""><li id="4648" class="nn no it lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated"><code class="fe mz na nb nc b">GET</code> —检索资源。</li><li id="15c8" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe mz na nb nc b">POST</code> —创建资源。</li><li id="73db" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe mz na nb nc b">PATCH</code> —更新资源。</li><li id="c303" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe mz na nb nc b">DELETE</code> —删除资源。</li><li id="82c4" class="nn no it lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated"><code class="fe mz na nb nc b">OPTIONS</code> —显示有关资源的更多信息。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="99dc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第三级</h1><p id="77f7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经达到了安息荣耀的最高境界。这完全是关于超媒体作为应用程序状态(HATEOAS)的引擎。</p><p id="173a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在也能够知道其他资源的位置。我们不仅用数据来回应，还用在哪里寻找其他信息的信息来回应。</p><p id="cd31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得发现额外的资源成为可能。它还使得引入资源URL的更改变得更加容易，因为这些更改是在响应中提供给客户端的。</p><p id="6641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们正在使用3级API，并且我们想要查询所有工厂，我们将发送一个请求。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="eb85" class="nh md it nc b gy ni nj l nk nl">GET /<!-- -->plants<!-- --> HTTP/1.1</span></pre><p id="7e71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将接收包含剩余资源的URL的分页数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9279" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="279e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Richardson成熟度模型是一个非常有用的工具，可以探索REST APIs的概念，并发现它们在不同层面上的潜在优势。如果我们正在设计或使用一个真正的RESTful API，这对于评估来说是非常好的。</p><p id="b25c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>