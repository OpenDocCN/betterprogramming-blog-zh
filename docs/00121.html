<html>
<head>
<title>Sending Files Between Devices Has Never Been Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在设备之间发送文件从未如此简单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sending-files-between-devices-has-never-been-easer-wifi-direct-open-source-8337a54e8497?source=collection_archive---------0-----------------------#2018-04-11">https://betterprogramming.pub/sending-files-between-devices-has-never-been-easer-wifi-direct-open-source-8337a54e8497?source=collection_archive---------0-----------------------#2018-04-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="61d8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Wi-Fi直接开源</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/87f35a06b592257908edd49b3972396a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Rgk51wJccHXTK1l_merxw.jpeg"/></div></figure><h1 id="c4db" class="kq kr it bd ks kt ku kv kw kx ky kz la jz lb ka lc kc ld kd le kf lf kg lg lh bi translated">介绍</h1><p id="d62f" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您是否尝试过在两台或多台设备之间传输数据？通常，我们使用云和其他方式来传输数据，这需要互联网。在android版本中，有一个被认为可以改变世界的功能。它叫做Wi-Fi Direct。不幸的是，这并没有发生，因为算法太难了，而且不够用户友好。我决定通过使用P2P技术来改变这种情况。Google Play或者GitHub里有很多信使。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="5038" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">目前，Google Play中所有帮助你传输文件的应用程序要么只能通过FTP在你的本地网络中运行，要么你必须创建一个热点，例如SHAREit，或者使用P2P协议。但是通常会有意想不到的事情发生。我的应用在<a class="ae mq" href="https://github.com/YaphetS1/WiFi-Direct-File-Transfer-App" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae mq" href="https://play.google.com/store/apps/details?id=com.app.wi_fi_direct" rel="noopener ugc nofollow" target="_blank"> Google Play </a>上。这里有一个关于它如何与各种设备一起工作的演示。</p><p id="009a" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">在我们开始之前:</p><h2 id="72f7" class="mr kr it bd ks ms mt dn kw mu mv dp la lr mw mx lc lv my mz le lz na nb lg nc bi translated"><strong class="ak">推荐阅读</strong></h2><p id="9151" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae mq" href="http://developer.android.com/guide/topics/connectivity/wifip2p.html" rel="noopener ugc nofollow" target="_blank">总体概述</a> <br/> <a class="ae mq" href="http://developer.android.com/training/connect-devices-wirelessly/nsd-wifi-direct.html" rel="noopener ugc nofollow" target="_blank">服务发现</a> <br/> <a class="ae mq" href="http://www.drjukka.com/blog/wordpress/?p=95" rel="noopener ugc nofollow" target="_blank">功耗</a> <br/> <a class="ae mq" href="http://www.drjukka.com/blog/wordpress/?p=81" rel="noopener ugc nofollow" target="_blank">更多推荐阅读</a></p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="077c" class="kq kr it bd ks kt nd kv kw kx ne kz la jz nf ka lc kc ng kd le kf nh kg lg lh bi translated">我们开始吧</h1><p id="33a0" class="pw-post-body-paragraph li lj it lk b ll lm ju ln lo lp jx lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我有以下任务:</p><ul class=""><li id="5297" class="ni nj it lk b ll ml lo mm lr nk lv nl lz nm md nn no np nq bi translated">显示附近设备的列表。</li><li id="7e06" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">管理连接、断开和重新连接设备。</li><li id="1b84" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">在连接到您的设备之间发送消息，以便进行验证(在官方API Android中不可用)。</li><li id="75cd" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">在两台连接的设备上共享多个文件。</li><li id="3524" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">能够可视化您发送和接收的内容，并且能够在不断开的情况下打开接收到的文件</li><li id="d866" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">负责接收文件和设备信息的服务器自动重启</li></ul><p id="c0d7" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">我将添加我的代码(FileActivity)和注释，在那里你将能够看到我使用的具体方法，因此发送和接收文件和所有其他功能，以及作为一个活动工作的设计。这是一个被迫的行动，因为主要目标是同时发送和接收文件，而无需重复初始化WifiP2PManager等。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="2410" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">让我们来看一个名为<code class="fe ny nz oa ob b">FileServerAsynck</code>的特定任务:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="b9f3" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">和<code class="fe ny nz oa ob b">TransferData</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="710b" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">如我们所见，文件传输是同步的。因此，在未来，我不得不改变代码，以便在发送文件前分割文件。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="0265" class="kq kr it bd ks kt nd kv kw kx ne kz la jz nf ka lc kc ng kd le kf nh kg lg lh bi translated">需要做什么:</h1><ul class=""><li id="4af7" class="ni nj it lk b ll lm lo lp lr oc lv od lz oe md nn no np nq bi translated">将文件的发送和接收从同时和同步更改为不同步。</li><li id="a418" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">当前版本不允许传输大于60mb的文件。</li><li id="bf5c" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">大量设备(目前只有两台)之间的连接</li><li id="8200" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">等等。</li></ul><p id="dcf5" class="pw-post-body-paragraph li lj it lk b ll ml ju ln lo mm jx lq lr mn lt lu lv mo lx ly lz mp mb mc md im bi translated">完整的代码可以在我的GitHub上看到，<a class="ae mq" href="https://github.com/YaphetS1/WiFi-Direct-File-Transfer-App" rel="noopener ugc nofollow" target="_blank">wifi-文件-传输</a>。</p></div></div>    
</body>
</html>