<html>
<head>
<title>Object Keys, Values, and Entries: JavaScript ES6 Feature Series (Pt 9)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对象键、值和条目:JavaScript ES6特性系列(第9部分)</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/object-keys-values-and-entries-javascript-es6-feature-series-part-9-d71268791089?source=collection_archive---------2-----------------------#2019-11-12">https://betterprogramming.pub/object-keys-values-and-entries-javascript-es6-feature-series-part-9-d71268791089?source=collection_archive---------2-----------------------#2019-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f0a2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最后，ECMAScript引入了一些非常需要的对象操作方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3ad54501e0aa0091be0e8272ff72661b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gZawMvSWjeIF21YIGq-mg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thoughtcatalog?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">思想目录</a>在<a class="ae ky" href="https://unsplash.com/s/photos/writing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="39e2" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">介绍</h1><p id="93f9" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这些作品的灵感很简单:事实上，仍然有很多开发人员对JavaScript感到困惑——或者，至少，并不总是很有意义。</p><p id="2a20" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是根据维基百科<a class="ae ky" href="https://en.wikipedia.org/wiki/JavaScript" rel="noopener ugc nofollow" target="_blank">的数据，在1000万个最受欢迎的网页中，JavaScript仍然占据了将近95%。</a></p><p id="0a56" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">因为随着时间的推移，它的使用量只会继续增加，所以我想提供一些我经常使用的ES6+特性的文章和例子，供其他开发人员参考。</p><p id="c7d4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我们的目标是让这些文章简短、深入地解释对该语言的各种改进，我希望它们能启发您使用JS编写一些真正酷的东西。谁知道呢，在这个过程中你可能会学到一些新东西。</p><p id="7038" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这篇文章将关注JavaScript对象和一些方便的新方法，这些新方法涉及键、值以及这两者的组合，它们在过去几年中被标准化为语言。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="9adf" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">Object.keys()</h1><p id="9e7a" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这听起来可能很难相信，特别是如果你来自另一种编程语言，如Java，但直到ES2015，JavaScript中还没有内置方法来轻松访问对象的属性名，也就是所谓的<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" rel="noopener ugc nofollow" target="_blank">键</a>。</p><p id="d112" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">真的吗？</p><p id="78c5" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">令人震惊，我知道。在此之前，像<a class="ae ky" href="https://lodash.com/docs/4.17.15#keys" rel="noopener ugc nofollow" target="_blank"> Lodash </a>这样的库可能会被用来做一些基本的、标准化的方法。</p><p id="f4f6" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">令人高兴的是，ECMAScript委员会在ES2015发布时采取了行动，并引入了方法<code class="fe mz na nb nc b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" rel="noopener ugc nofollow" target="_blank">Object.keys()</a></code>。该方法返回一个给定对象自己的可枚举属性名的数组，其顺序与我们使用普通的<code class="fe mz na nb nc b">for</code>循环得到的顺序相同。</p><p id="e440" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">对象上的<code class="fe mz na nb nc b">Object.keys()</code>示例:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="7aa0" class="nh lh it nc b gy ni nj l nk nl">const resistanceFighter = {<br/>  name: "John Connor",<br/>  age: 30,<br/>  title: "Resistance Leader",<br/>  fight() {<br/>    return `${this.name} leads the resistance fight against the machines.`<br/>  }<br/>};</span><span id="4eab" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(resistanceFighter)); // [ 'name', 'age', 'title', 'fight' ]</span></pre><p id="a422" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.keys()</code>的语法非常简单:您将一个对象(如<code class="fe mz na nb nc b">resistanceFighter</code>)作为参数传递给方法，方法返回该对象的属性和方法的键或名称。</p><p id="519f" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在这种情况下，它返回三个属性名:<code class="fe mz na nb nc b">name</code>、<code class="fe mz na nb nc b">age</code>和<code class="fe mz na nb nc b">title</code>，加上附加到对象的方法<code class="fe mz na nb nc b">fight</code>。</p><p id="43c4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">元素以字符串的形式返回到一个数组中，该数组对应于直接在<code class="fe mz na nb nc b">object</code>上找到的可枚举属性。属性的排序与通过手动循环对象的属性给出的排序相同。</p><p id="9e21" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">让我们看看其他一些例子，看看<code class="fe mz na nb nc b">Object.keys()</code>将如何与各种JavaScript数据结构交互。</p><p id="5270" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.keys()</code>用简单的阵列:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ae99" class="nh lh it nc b gy ni nj l nk nl">const resistanceTeam = [ "Sarah J Connor", "Terminator", "John Connor"];</span><span id="ae28" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(resistanceTeam)); // [ '0', '1', '2' ]</span></pre><p id="2c41" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">当对实际数组运行该方法时，返回的<code class="fe mz na nb nc b">keys</code>是数组中包含的每一项的“字符串化”索引。</p><p id="457b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.keys()</code>带有阵列状物体:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="81fd" class="nh lh it nc b gy ni nj l nk nl">const movieTitles = {<br/>  0: "The Terminator",<br/>  1: "Judgment Day",<br/>  2: "Rise of the Machines",<br/>  3: "Salvation",<br/>  4: "Genesis",<br/>  5: "Dark Fate"<br/>}</span><span id="5223" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(movieTitles)); // [ '0', '1', '2', '3', '4', '5' ]</span></pre><p id="ace8" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">与真正的数组相似，一个类似于以索引号作为键的数组的对象在运行<code class="fe mz na nb nc b">Object.keys()</code>方法时将返回一个数字数组作为字符串。</p><p id="885a" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.keys()</code>在具有随机键排序的类似数组的对象上:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="41dd" class="nh lh it nc b gy ni nj l nk nl">const movieReleaseYears = {<br/>  1991: "Judgment Day",<br/>  2015: "Genisys",<br/>  2003: "Rise of the Machines",<br/>  1984: "The Terminator",<br/>  2019: "Dark Fate",<br/>  2009: "Salvation"<br/>}</span><span id="565d" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(movieReleaseYears)); // [ '1984', '1991', '2003', '2009', '2015', '2019' ]</span></pre><p id="a4fa" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果你在一个随机排序的关键字上运行<code class="fe mz na nb nc b">Object.keys()</code>，比如说，这些关键字恰好是不同的<em class="nn">终结者</em>电影上映的年份，那么产生的关键字数组将从最小到最大排序。</p><p id="b31c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是，如果在键是非数字字符串的对象上运行同样的方法，它们将不会按排序顺序打印出来。为了对它们进行排序，您仍然需要在数组上运行<code class="fe mz na nb nc b">.sort()</code>方法。请参见下面的示例以供参考。</p><p id="dfbe" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.keys()</code>在带有键的对象上，不管是未排序的还是排序的:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="08b8" class="nh lh it nc b gy ni nj l nk nl">const movieDirectorsUnordered = {<br/>  director2: "Tim Miller",<br/>  director4: "Jonathan Mostow",<br/>  director1: "James Cameron",<br/>  director3: "McG"<br/>}</span><span id="b7b1" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(movieDirectorsUnordered)) // [ 'director2', 'director4', 'director1', 'director3' ]</span><span id="51e9" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(movieDirectorsUnordered).sort()); // [ 'director1', 'director2', 'director3', 'director4' ]</span></pre><p id="c471" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在ES2015中，你还可以用<code class="fe mz na nb nc b">Object.keys()</code>做另一件事:你可以将字符串等非对象的东西强制转换成对象。</p><p id="dbed" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.keys()</code>将字符串强制转换为对象:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="e731" class="nh lh it nc b gy ni nj l nk nl">const animal = "canine";</span><span id="6bb9" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.keys(animal)); // [ '0', '1', '2', '3', '4', '5' ]</span></pre><p id="c77c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果您试图在ES5或更低版本中调用这个方法，将会抛出一个<code class="fe mz na nb nc b">TypeError</code>,仅供参考。</p><p id="a0e8" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">现在，让我们转到对象等式的另一半:与键相关的值。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="0d89" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">Object.values()</h1><p id="1274" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">不管出于什么原因，方法<code class="fe mz na nb nc b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values" rel="noopener ugc nofollow" target="_blank">Object.values()</a></code>直到2017年才在JavaScript语言中标准化(为什么不是更早？)</p><p id="b26b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.values()</code>方法返回一个给定对象自己的可枚举属性值的数组，其顺序与<code class="fe mz na nb nc b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in" rel="noopener ugc nofollow" target="_blank">for...in</a></code>循环提供的顺序相同(不同之处在于<code class="fe mz na nb nc b">for-in</code>循环也枚举原型链中的属性)。</p><p id="1d6b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果你曾经针对你的回购运行过一套相对严格的<a class="ae ky" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>规则，比如<a class="ae ky" href="https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb" rel="noopener ugc nofollow" target="_blank"> Airbnb的</a>，你可能会因为上面提到的原因看到一个关于使用<code class="fe mz na nb nc b">for...in</code>循环的警告。</p><p id="e163" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">通过原型链的循环将显示继承的属性以及属于对象本身的属性，这通常是不希望的。</p><p id="b440" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">对象上的<code class="fe mz na nb nc b">Object.values()</code>示例:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="400f" class="nh lh it nc b gy ni nj l nk nl">const resistanceFighter = {<br/>  name: "John Connor",<br/>  age: 30,<br/>  title: "Resistance Leader",<br/>  fight() {<br/>    return `${this.name} leads the resistance fight against the machines.`<br/>  }<br/>};</span><span id="4204" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(resistanceFighter)); // [ 'John Connor', 30, 'Resistance Leader', [Function: fight] ]</span></pre><p id="e701" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">使用我在上面的<code class="fe mz na nb nc b">Object.keys()</code>示例中使用的同一个<code class="fe mz na nb nc b">resistanceFighter</code>对象，当我调用<code class="fe mz na nb nc b">Object.values()</code>并将其作为参数传递时，我得到了对象中值的数组:<code class="fe mz na nb nc b">'John Connor'</code>、<code class="fe mz na nb nc b">30</code>、<code class="fe mz na nb nc b">'Resistance Leader'</code>和<code class="fe mz na nb nc b">fight()</code>函数。</p><p id="95a7" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">与<code class="fe mz na nb nc b">Object.keys()</code>返回的字符串数组不同，<code class="fe mz na nb nc b">Object.values()</code>返回一个数组，其元素是在对象上找到的<em class="nn">实际</em>可枚举属性值。同样，属性的排序与通过手动循环对象的属性值给出的排序相同。</p><p id="c73f" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这里有一些<code class="fe mz na nb nc b">Object.keys()</code>的例子。</p><p id="73fe" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.values()</code>用简单的数组:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ab1b" class="nh lh it nc b gy ni nj l nk nl">const resistanceTeam = [ "Sarah J Connor", "Terminator", "John Connor"];</span><span id="b4d2" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(resistanceTeam)); // [ 'Sarah J Connor', 'Terminator', 'John Connor' ]</span></pre><p id="0656" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">就像当<code class="fe mz na nb nc b">Object.keys()</code>打印出数组中每一项的索引时，调用<code class="fe mz na nb nc b">Object.values()</code>打印出数组中的实际项，就像它们当前被列出一样。</p><p id="0287" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.values()</code>在类似阵列的物体上:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2d40" class="nh lh it nc b gy ni nj l nk nl">const movieTitles = {<br/>  0: "The Terminator",<br/>  1: "Judgment Day",<br/>  2: "Rise of the Machines",<br/>  3: "Salvation",<br/>  4: "Genisys",<br/>  5: "Dark Fate"<br/>}</span><span id="d752" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(movieTitles));</span><span id="5dbf" class="nh lh it nc b gy nm nj l nk nl">/* [ 'The Terminator',<br/>  'Judgment Day',<br/>  'Rise of the Machines',<br/>  'Salvation',<br/>  'Genisys',<br/>  'Dark Fate' ] */</span></pre><p id="c9f4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">当在以数字为键的类似数组的对象上调用<code class="fe mz na nb nc b">Object.values()</code>时，得到的数组将按键的顺序打印出来。下面的例子可以证明这一点。</p><p id="f19d" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.values()</code>在具有随机键排序的类似数组的对象上:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="bfbb" class="nh lh it nc b gy ni nj l nk nl">const movieReleaseYears = {<br/>  1991: "Judgment Day",<br/>  2015: "Genisys",<br/>  2003: "Rise of the Machines",<br/>  1984: "The Terminator",<br/>  2019: "Dark Fate",<br/>  2009: "Salvation"<br/>}</span><span id="fcfb" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(movieReleaseYears));</span><span id="aa04" class="nh lh it nc b gy nm nj l nk nl">/* [ 'The Terminator',<br/>  'Judgment Day',<br/>  'Rise of the Machines',<br/>  'Salvation',<br/>  'Genisys',<br/>  'Dark Fate' ] */</span></pre><p id="bad4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">正如您所看到的，尽管<code class="fe mz na nb nc b">movieReleaseYears’</code>键是随机排列的，但是当从<code class="fe mz na nb nc b">Object.values()</code>中打印出结果数组时，这些值是按照键值的数字顺序排列的。</p><p id="a67e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">当对象的键是非数字值时，这种排序就不成立。</p><p id="9bfb" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在这种情况下，与<code class="fe mz na nb nc b">Object.keys()</code>的例子一样，您必须用<code class="fe mz na nb nc b">.sort()</code>手工对结果数组进行排序。该数组将根据其中的值进行排序，而不是这些值曾经附加到的键。</p><p id="64f4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.values()</code>对一个对象的值，不管是未排序的还是排序的:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2d47" class="nh lh it nc b gy ni nj l nk nl">const movieDirectorsUnordered = {<br/>  director2: "Tim Miller",<br/>  director4: "Jonathan Mostow",<br/>  director1: "James Cameron",<br/>  director3: "McG"<br/>}</span><span id="de96" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(movieDirectorsUnordered)); // [ 'Tim Miller', 'Jonathan Mostow', 'James Cameron', 'McG' ]</span><span id="c4de" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(movieDirectorsUnordered).sort()); // [ 'James Cameron', 'Jonathan Mostow', 'McG', 'Tim Miller' ]</span></pre><p id="7c76" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">就像<code class="fe mz na nb nc b">Object.keys()</code>，<code class="fe mz na nb nc b">Object.values()</code>有能力将字符串这样的非对象原语强制转换成对象。</p><p id="0b1b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">请看，<code class="fe mz na nb nc b">Object.values()</code>将一个字符串强制转换为一个对象:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2ea9" class="nh lh it nc b gy ni nj l nk nl">const animal = "canine";</span><span id="bc50" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.values(animal)); // [ 'c', 'a', 'n', 'i', 'n', 'e' ]</span></pre><p id="464b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">好了，是时候进入这篇文章的第三部分了:由<code class="fe mz na nb nc b">Object.entries()</code>提供的对象键和值的组合。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="8299" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated"><strong class="ak"> Object.entries() </strong></h1><p id="91b9" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">ES2017中也引入了<code class="fe mz na nb nc b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries" rel="noopener ugc nofollow" target="_blank">Object.entries()</a></code>方法，该方法返回给定对象自己的可枚举字符串键属性<code class="fe mz na nb nc b">[key, value]</code>对的数组，顺序与<code class="fe mz na nb nc b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in" rel="noopener ugc nofollow" target="_blank">for...in</a></code>循环提供的顺序相同。</p><p id="ed28" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">正如我在前面的<code class="fe mz na nb nc b">Object.values()</code>一节中提到的，一个<code class="fe mz na nb nc b">for-in</code>循环(它可以获得与<code class="fe mz na nb nc b">Object.entries()</code>相似的结果)也会遍历原型链，这通常不是代码想要的行为。此方法提供了一种更推荐的方法来循环访问对象的键和值。</p><p id="0452" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">由<code class="fe mz na nb nc b">Object.entries()</code>返回的数组的顺序不依赖于对象是如何定义的。如果需要某种排序，那么数组应该像<code class="fe mz na nb nc b">Object.entries(obj).sort((a, b) =&gt; b[0].localeCompare(a[0]));</code>一样先排序。</p><p id="1584" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">对象上的<code class="fe mz na nb nc b">Object.entries()</code>示例:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="6614" class="nh lh it nc b gy ni nj l nk nl">const resistanceFighter = {<br/>  name: "John Connor",<br/>  age: 30,<br/>  title: "Resistance Leader",<br/>  fight() {<br/>    return `${this.name} leads the resistance fight against the machines.`<br/>  }<br/>};</span><span id="a2a9" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(resistanceFighter));</span><span id="5005" class="nh lh it nc b gy nm nj l nk nl">/* [ [ 'name', 'John Connor' ],<br/>   [ 'age', 30 ],<br/>   [ 'title', 'Resistance Leader' ],<br/>   [ 'fight', [Function: fight] ] ] */</span><span id="bfab" class="nh lh it nc b gy nm nj l nk nl">for(let [key, value] of Object.entries(resistanceFighter)){<br/>  console.log(`${key}: ${value}`);<br/>}</span><span id="b179" class="nh lh it nc b gy nm nj l nk nl">/* name: John Connor<br/>  age: 30<br/>  title: Resistance Leader<br/>  fight: function fight() {<br/>    return this.name + " leads the resistance fight against the machines.";<br/>} */</span><span id="841d" class="nh lh it nc b gy nm nj l nk nl">Object.entries(resistanceFighter).forEach(([key, value]) =&gt; console.log(`${key}: ${value}`))</span><span id="ebef" class="nh lh it nc b gy nm nj l nk nl">/* name: John Connor<br/>  age: 30<br/>  title: Resistance Leader<br/>  fight: function fight() {<br/>    return this.name + " leads the resistance fight against the machines.";<br/>} */</span></pre><p id="3593" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在上面的例子中，在<code class="fe mz na nb nc b">resistanceFighter</code>对象上调用<code class="fe mz na nb nc b">Object.entries()</code>会产生一个嵌套数组的数组，每个内部数组对应于对象的一个键值对。</p><p id="ba8a" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">示例的第二和第三部分是一种使用<code class="fe mz na nb nc b">for...of</code>循环或<code class="fe mz na nb nc b">Array.forEach()</code>方法优雅地遍历对象值的方法，当我需要调试或转换一个对象以备将来使用时，我发现这两种方法特别有用。</p><p id="af09" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">再来看看<code class="fe mz na nb nc b">Object.entries()</code>的其他一些用途。</p><p id="baea" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.entries()</code>用一个简单的数组:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="67b9" class="nh lh it nc b gy ni nj l nk nl">const resistanceTeam = [ "Sarah J Connor", "Terminator", "John Connor"];</span><span id="f242" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(resistanceTeam));</span><span id="b9dc" class="nh lh it nc b gy nm nj l nk nl">/* [ [ '0', 'Sarah J Connor' ],<br/>   [ '1', 'Terminator' ],<br/>   [ '2', 'John Connor' ] ] */</span></pre><p id="3fd7" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在一个简单的数组上调用<code class="fe mz na nb nc b">Object.entries()</code>方法将打印出数组中的所有值，并将它们对应的索引值作为它们的键——非常简单，类似于在一个数组上调用<code class="fe mz na nb nc b">Object.keys()</code>。</p><p id="0e31" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.entries()</code>在类似阵列的物体上:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ac0f" class="nh lh it nc b gy ni nj l nk nl">const movieTitles = {<br/>  0: "The Terminator",<br/>  1: "Judgment Day",<br/>  2: "Rise of the Machines",<br/>  3: "Salvation",<br/>  4: "Genisys",<br/>  5: "Dark Fate"<br/>}</span><span id="0808" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(movieTitles));</span><span id="6d44" class="nh lh it nc b gy nm nj l nk nl">/* [ [ '0', 'The Terminator' ],<br/>   [ '1', 'Judgment Day' ],<br/>   [ '2', 'Rise of the Machines' ],<br/>   [ '3', 'Salvation' ],<br/>   [ '4', 'Genisys' ],<br/>   [ '5', 'Dark Fate' ] ] */</span></pre><p id="fcc0" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">类似地，在以索引号作为名称的对象上调用方法，它将生成一个数组的数组，其中包含每个对象属性的键和值。</p><p id="a5de" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.entries()</code>在具有随机键排序的类似数组的对象上:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8219" class="nh lh it nc b gy ni nj l nk nl">const movieReleaseYears = {<br/>  1991: "Judgment Day",<br/>  2015: "Genisys",<br/>  2003: "Rise of the Machines",<br/>  1984: "The Terminator",<br/>  2019: "Dark Fate",<br/>  2009: "Salvation"<br/>}</span><span id="7a0c" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(movieReleaseYears));</span><span id="d493" class="nh lh it nc b gy nm nj l nk nl">/* [ [ '1984', 'The Terminator' ],<br/>   [ '1991', 'Judgment Day' ],<br/>   [ '2003', 'Rise of the Machines' ],<br/>   [ '2009', 'Salvation' ],<br/>   [ '2015', 'Genisys' ],<br/>   [ '2019', 'Dark Fate' ] ] */</span></pre><p id="cd77" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">与本博客的前几篇文章一样，<code class="fe mz na nb nc b">movieReleaseYears</code>上的<code class="fe mz na nb nc b">Object.entries()</code>使用当前无序的数字键，将返回一个按索引值升序排序的数组列表。</p><p id="e321" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.entries()</code>关于对象的值，包括未排序的和排序的:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="9af5" class="nh lh it nc b gy ni nj l nk nl">const movieDirectorsUnordered = {<br/>  director2: "Tim Miller",<br/>  director4: "Jonathan Mostow",<br/>  director1: "James Cameron",<br/>  director3: "McG"<br/>}</span><span id="30da" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(movieDirectorsUnordered));</span><span id="1a27" class="nh lh it nc b gy nm nj l nk nl">/* [ [ 'director2', 'Tim Miller' ],<br/>   [ 'director4', 'Jonathan Mostow' ],<br/>   [ 'director1', 'James Cameron' ],<br/>   [ 'director3', 'McG' ] ] */</span><span id="df76" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(movieDirectorsUnordered).sort());</span><span id="b040" class="nh lh it nc b gy nm nj l nk nl">/* [ [ 'director1', 'James Cameron' ],<br/>   [ 'director2', 'Tim Miller' ],<br/>   [ 'director3', 'McG' ],<br/>   [ 'director4', 'Jonathan Mostow' ] ] */</span></pre><p id="f214" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是，如果被制作成数组的数组的对象除了容易排序的数字之外还有字符串或其他关键字，它将只打印出对象中列出的内容，除非您随后手动调用<code class="fe mz na nb nc b">.sort()</code>方法。够公平吗？</p><p id="bc94" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">Object.entries()</code>将字符串强制转换为对象:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="09e8" class="nh lh it nc b gy ni nj l nk nl">const animal = "canine";</span><span id="495f" class="nh lh it nc b gy nm nj l nk nl">console.log(Object.entries(animal));</span><span id="bc05" class="nh lh it nc b gy nm nj l nk nl">/* [ [ '0', 'c' ],<br/>   [ '1', 'a' ],<br/>   [ '2', 'n' ],<br/>   [ '3', 'i' ],<br/>   [ '4', 'n' ],<br/>   [ '5', 'e' ] ] */</span></pre><p id="4b34" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">最后一个例子。在<code class="fe mz na nb nc b">Object.entries()</code>的帮助下，一个字符串可以变异成一个对象。</p><p id="cc98" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">正如您在上面的代码中看到的，字符串<code class="fe mz na nb nc b">"canine"</code>变成了一个数组的数组，字符串中的每个字符变成了数组的值部分，而该字符串的索引变成了键部分。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="c3b3" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">结论</h1><p id="f750" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">令人惊讶的是，在ES2015和ES2017发布之前，JavaScript对象缺乏一些看似基本的方法来读取和操作键和值。对我们来说幸运的是，访问一个对象的键，它的值，甚至一起迭代这些键和值现在是标准的。</p><p id="6951" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">要跟上ECMAScript委员会即将推出的所有改进可能有点力不从心，这就是我开始撰写这些文章的原因。</p><p id="eb91" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">本系列文章的目标是深入研究您可能每天都在使用(或者甚至可能没有意识到)的ES6语法，这样您就可以成为一名更高效的web开发人员。</p><p id="9319" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">过几周再来看看，我会写更多的JavaScript和ES6，或者其他与web开发相关的东西。</p><p id="1fd7" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">感谢您的阅读，我希望您能在您的JavaScript代码中加入ES6的最新对象方法——我保证，这将使您的开发生活更加轻松。</p><p id="b81e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果你喜欢读这篇文章，你可能也会喜欢我在这个系列中的其他作品:</p><ul class=""><li id="f19b" class="no np it ma b mb mu me mv mh nq ml nr mp ns mt nt nu nv nw bi translated"><a class="ae ky" href="https://itnext.io/classes-and-inheritance-javascript-es6-feature-series-part-8-4a81fa3adf0f" rel="noopener ugc nofollow" target="_blank">类和继承:JavaScript ES6特性系列(Pt 8) </a></li><li id="501a" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://medium.com/better-programming/built-in-module-imports-and-exports-javascript-es6-feature-series-part-7-5f0864049e1f" rel="noopener">内置模块导入导出:JavaScript ES6特性系列(Pt 7) </a></li><li id="92ba" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://itnext.io/enhanced-object-literal-value-shorthand-javascript-es6-feature-series-pt-6-e00dfdc24f64" rel="noopener ugc nofollow" target="_blank">增强的对象文字值速记:JavaScript ES6特性系列(Pt 6) </a></li><li id="4092" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://medium.com/better-programming/string-template-literals-javascript-es6-feature-series-pt-5-a40e55a5485b" rel="noopener">字符串模板文字:JavaScript ES6特性系列(Pt 5) </a></li><li id="ef99" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://itnext.io/spread-rest-parameters-javascript-es6-feature-series-pt-4-c9e9f0c0228f" rel="noopener ugc nofollow" target="_blank"> Spread &amp; Rest参数:JavaScript ES6特性系列(Pt 4) </a></li><li id="ef61" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://itnext.io/default-function-parameter-values-javascript-es6-feature-series-pt-3-bd8392a88a12" rel="noopener ugc nofollow" target="_blank">默认函数参数值:JavaScript ES6特性系列(Pt 3) </a></li><li id="666c" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://itnext.io/arrow-functions-javascript-es6-feature-series-pt-2-e8c31c823392" rel="noopener ugc nofollow" target="_blank">箭头功能:JavaScript ES6特性系列(第二部分)</a></li><li id="b2ac" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><a class="ae ky" href="https://itnext.io/var-let-const-javascript-es6-feature-series-pt-1-fa603567809e" rel="noopener ugc nofollow" target="_blank"> Var，Let &amp; Const: JavaScript ES6特性系列(Pt 1) </a></li></ul></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b4f3" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">参考资料和更多资源</h1><ul class=""><li id="4851" class="no np it ma b mb mc me mf mh oc ml od mp oe mt nt nu nv nw bi translated"><code class="fe mz na nb nc b">Object.entries()</code>，MDN docs:<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/Object/entries</a></li><li id="da84" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><code class="fe mz na nb nc b">Object.keys()</code>、MDN docs:<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/Object/keys</a></li><li id="80bc" class="no np it ma b mb nx me ny mh nz ml oa mp ob mt nt nu nv nw bi translated"><code class="fe mz na nb nc b">Object.values()</code>，MDN docs:<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ objects/Object/values</a></li></ul></div></div>    
</body>
</html>