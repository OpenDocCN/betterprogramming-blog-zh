<html>
<head>
<title>Implementing the Hanota Algorithm Using Golang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Golang实现Hanota算法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-the-hanota-algorithm-using-golang-7c3b9e142448?source=collection_archive---------8-----------------------#2022-02-17">https://betterprogramming.pub/implementing-the-hanota-algorithm-using-golang-7c3b9e142448?source=collection_archive---------8-----------------------#2022-02-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c3ef" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">河内之塔——戈朗版本</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/11b18311f4a5ef36e73b3246427c7652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NeWLiKBe0srAqQQY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="a0ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近重温了电影《人猿星球的崛起》。在电影中，凯撒玩了一个河内塔游戏。你还有印象吗？一个人玩几个游戏还是挺难的😭，今天我们将使用Golang来实现河内塔游戏。</p><p id="9372" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">游戏起源</strong></p><p id="01d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">传说最早发明这个问题的人是法国数学家爱德华·卢卡斯(Edouard Lucas)。</p><p id="8722" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在世界中心的贝拿勒斯圣殿(印度北部)，三根镶有宝石的针被插入一个黄铜盘子里。印度教的主神梵天在创造世界的时候，在其中一根针上从下到上穿了64枚黄金，也就是所谓的河内塔。</p><p id="4952" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不管是白天还是晚上，总有一个和尚按照下面的规则移动这些金块:一次只移动一块，而且不管是在哪根针上，小的那块必须在大的那块上面。</p><p id="29c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">众僧预言，当所有的金片从梵天佩戴的别针移到另一个别针时，世界将在一声雷劈中毁灭，梵天宝塔、寺庙、众生也将灭亡。</p><p id="befa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个传说有很多变体，是谁不得而知，但是留下的数学题非常经典。</p><p id="ddff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">留下的数学知识:金币数和移动步数的关系是<code class="fe ls lt lu lv b">2^n — 1</code></p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="2dea" class="ma mb iq lv b gy mc md l me mf">The number of moves of a gold piece is 2 to the power of 1 minus 1<br/>The number of moves of 2 gold pieces is 2 to the power of 2 minus 1<br/>The number of moves of 3 gold pieces is 2 to the power of 3 minus 1<br/>…<br/>The number of moves of n pieces of gold is 2 to the nth power minus 1</span></pre><p id="380f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果这个传说是真的，僧侣们需要<code class="fe ls lt lu lv b">2^64 — 1</code>步棋来完成这个任务；假设他们每秒移动一块黄金，需要5849亿年才能完成。整个宇宙才137亿岁，所以宇宙毁灭还早…</p><p id="3cf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">游戏规则分析</strong></p><p id="901b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设这个游戏有3根柱子，分别是<code class="fe ls lt lu lv b">A</code>、<code class="fe ls lt lu lv b">B</code>、<code class="fe ls lt lu lv b">C</code>。需要移动的是珠子，其中一个已经有N个排序的珠子，最大的在最下面，珠子按顺序越来越小，另外2个空列。</p><p id="79ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本条件</p><ol class=""><li id="442c" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ml mm mn mo bi translated">一次只能移动一个珠子</li><li id="561e" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">小珠子必须在大珠子的上面</li></ol><p id="75b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">初始状态如下图所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/78b3daa59796634f61725757c1ff0772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r6HV8Ox1p7qTpy_rW9hpZw.png"/></div></div></figure><p id="604a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终目标是将一列上的所有珠子移动到另一列。</p><p id="e88b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如下图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/600e8c684cffab7b6a2ffe22a508a54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_w3USA4l8kgKR34Jc7tzA.png"/></div></div></figure><h1 id="d6e7" class="mw mb iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated"><strong class="ak">游戏实现思路</strong></h1><ol class=""><li id="d890" class="mg mh iq ky b kz nn lc no lf np lj nq ln nr lr ml mm mn mo bi translated">清空大脑，先思考最简单粗暴的解决逻辑。把珠子看成一个整体。</li><li id="c239" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">要满足大珠要下的基本条件，肯定要把<code class="fe ls lt lu lv b">A</code>上最大的珠清空，然后把最大的珠放到<code class="fe ls lt lu lv b">C</code>柱上。假设最大的珠子数是<code class="fe ls lt lu lv b">N</code>。</li><li id="1ca3" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">如果要移动到<code class="fe ls lt lu lv b">C</code>列，要实现的第一步必须是将所有的<code class="fe ls lt lu lv b">N-1</code>珠子移动到<code class="fe ls lt lu lv b">B</code>列，只有这样<code class="fe ls lt lu lv b">Nth</code>珠子(也就是最大的珠子)才能移动到<code class="fe ls lt lu lv b">C</code>列。</li><li id="38cb" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">把<code class="fe ls lt lu lv b">N-1</code>珠子移到<code class="fe ls lt lu lv b">B</code>栏，因为大的是下的，小的是上的，所以<code class="fe ls lt lu lv b">N-1</code>珠子也被点在<code class="fe ls lt lu lv b">B</code>栏上。</li><li id="ddb4" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">最后将B列的N-1颗珠子移到C列，完成最终目标。</li></ol><p id="eea1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">实现第一步:将A上的N-1个</strong>珠子<strong class="ky ir">移动到b上</strong></p><p id="1356" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么先把N-1移到B？因为你最终实现的是把所有的珠子从A移到C，顺序不能变，只有大的在下面，小的在上面。</p><p id="0146" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么你必须先把最大的数移到C，否则不满足条件。要将最大的珠子从A移动到C，您必须腾出A上的最大珠子，也就是说，必须移除最大珠子上面的所有珠子。</p><p id="23b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而你只有3根柱子，C上一定不能有其他的珠子，否则，你就不符合条件，这N-1颗珠子只能全部放在B上，而且还是有序的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/25ec4da1fc3f468e9c9d94563184e68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jLOBES9Xgkb6cMkU3MundQ.png"/></div></div></figure><p id="07db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第二步将A上的第n个珠子(最大的珠子)移动到c上</strong></p><p id="5512" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个很简单，一步就把最大的盘子从A移到C。如下图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/21b63ccdefe4f5cff1b01e3cd1831f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_EU4PuPh7rWrXCY7qGkPw.png"/></div></div></figure><p id="6429" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第三步将B上的N-1个珠子移动到c上。</p><p id="db99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">提醒:要实现将N-1颗珠子移动到C，是不是找到其中最大的珠子，然后先移动最大的珠子。所以这里的单词实际上变成了重复步骤1和2，从N-1中找出最大的一个，先移到C，然后重复。</em></p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="f657" class="ma mb iq lv b gy mc md l me mf">The third step is actually equivalent to changing the requirements. Suppose K = N - 1.</span><span id="f721" class="ma mb iq lv b gy nv md l me mf">There are K beads on column B, column A is empty, column C has the largest bead so for column B with K beads it is equivalent to empty.</span><span id="7787" class="ma mb iq lv b gy nv md l me mf">The first step is to move K-1 beads on B to A.</span><span id="6f5d" class="ma mb iq lv b gy nv md l me mf">The second step moves the Kth bead on B to C.</span><span id="c3aa" class="ma mb iq lv b gy nv md l me mf">The third step moves K-1 beads on A to C.<br/>...</span></pre><p id="8df5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如下图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/e8219822d7230950a4bb3ad425b29b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVFiMSVinDB8cAOVRtJczA.png"/></div></div></figure><p id="6ac0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先找到剩余珠子中最大的一颗，在这个演示中是四颗。那就移动它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/7aa6baf38b4289cb374d63fd4043b32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDLLpj9MutHyC347hPgdww.png"/></div></div></figure><p id="41e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">循环重复以上步骤，直到只剩下一颗珠子，直接移动到C，游戏结束。</p><p id="1648" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">辅助柱。</strong></p><p id="1065" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么是辅助栏？假设你现在在A上有所有要移动的珠子，目标是移动到C，那么B是N-1个珠子的辅助列。因为他们只能暂时留在这里，否则不符合游戏规则。</p><p id="f7c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里你需要先找到辅助支柱，不要想怎么实现，先理清逻辑。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="ff34" class="ma mb iq lv b gy mc md l me mf">To achieve moving from A to B, then C is the auxiliary column.</span><span id="c8b0" class="ma mb iq lv b gy nv md l me mf">To move from A to C, then B is the auxiliary pillar.</span><span id="8b99" class="ma mb iq lv b gy nv md l me mf">To achieve the move from B to C, then A is the auxiliary column.</span></pre><p id="51d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">戈朗实现。</strong></p><p id="b4e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从上面的分析可以看出，这其实是一个循环的重复操作，非常类似于递归，都可以用递归来实现。</p><p id="a228" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用递归有两个必要条件</p><ol class=""><li id="01f1" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ml mm mn mo bi translated">求递归公式</li><li id="78c9" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">找到退出条件</li></ol><p id="d131" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个游戏中，退出条件是在只有一个珠子的情况下直接移动到C柱。</p><p id="3d9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么递归公式是什么呢？根据以上逻辑分析，可以分解为3个步骤。</p><ul class=""><li id="d4e4" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ny mm mn mo bi translated">第一步是将[N-1]个板从A移动到B</li><li id="8fef" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ny mm mn mo bi translated">第二步是将第n块板从A移到C</li><li id="2fdd" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ny mm mn mo bi translated">第三步是将[剩余的N-1]块板从B移到C</li></ul><p id="9a1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是Golang实现的伪代码</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="6d45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您阅读本文，如果您认为文章写得很好，请关注我。</p><p id="c3c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果发现本文有错误，欢迎留言讨论。</p><p id="4435" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝你愉快。</p></div></div>    
</body>
</html>