# 针对接口而不是实现编码

> 原文：<https://betterprogramming.pub/code-against-interfaces-not-implementations-37b30e7ab992>

## 如果你做的每件事都不使用界面，考虑开始吧

![](img/48eaab3658074dd00d2f449ee7048443.png)

克林特·帕特森在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

我曾在推特上写道:

当您使用接口时，您可以将自己与任何特定的实现分离。当一个代码模块没有直接连接到另一个代码模块时，该代码被称为“松散耦合”

而且，我可能会一直重复，直到我死的那一天，松耦合代码是一件非常好的事情。

我谈了很多关于代码解耦的问题，以及为什么这真的很好。但是这里的定义可能是个好主意。

当你的类被设计成不依赖于其他类的具体实现时，可以说代码是*解耦的*。

当两个类对彼此的了解尽可能少，它们之间的依赖尽可能薄，它们之间的通信线路尽可能简单时，它们就是松散耦合的。

换句话说，解耦是将你的依赖尽可能限制到抽象的过程。如果你想写好的、干净的代码，你会试着只耦合抽象；接口是抽象的。正如我在上面的推文中所说，这对于编写易于维护的好代码至关重要。

当然，要针对接口编程，您首先必须知道什么是接口。

# 什么是接口？

大多数现代语言，如 C#、TypeScript 和 Java，作为一种语言特性，包含了接口的概念。界面有点难以描述，但我还是要试试，嗯？

字典将接口描述为:

> “界面——n:两个系统、主体、组织等的结合点。，见面互动。”

在代码的一般情况下，接口是代码模块(通常是类)如何相互交互以执行指定的操作。你的代码需要做一些事情，接口是允许代码模块一起工作的定义。

接口是功能的抽象定义。

好吧，这听起来很理智，不是吗，但这是真的。

接口声明定义了一组可用于特定目的的属性和方法。接口声明并且不要求为此目的的特定实现。它们定义了一个类可以做什么，并且限制了一个类只能暴露给那些由接口定义的东西。

当然，必须实现一个有用的接口。而当你使用一个接口时，你最终并不关心***它是如何实现的；您只需要知道您可以调用接口上的方法和属性，并且会提供您需要的功能。***

***实现隐藏(即抽象)是使用接口的主要目的之一。***

# ***到处都是接口***

***我们每天都在生活中看到界面。电插头是一种接口。在美国，我们的电源插座有两个垂直的矩形插槽用于相线和零线节点，下面有一个圆孔用于接地节点。***

***这不就是功能的定义吗？要实现该接口，您只需提供一个与该接口匹配的插头，您的设备就可以工作了。***

***你可以插上吹风机和电脑显示器——接口不管。结果，这些项目可以说是“有能力的”。***

***使用接口的主要原因是上面讨论过的——解耦。如果你针对接口编程，你可以用这样一种方式编写你的代码，它永远不会被耦合或者“连接”到接口之外的任何东西。***

***您的代码耦合越松散，一个地方的更改影响另一个地方的代码的可能性就越小。***

***此外，通过对一个接口进行编码，您可以用一个更好的实现来替换它，而不会破坏任何东西。关键是接口对于代码的解耦至关重要，而解耦的代码是好的。***

***接口的代码非常简单:它是方法和属性的声明，没有实现。***

***然而，这种简单性会使他们难以理解。当我第一次遇到接口的概念时，我清楚地记得当时的想法:“嗯？你到底为什么想要使用接口？”***

***然而，我当时并不知道，接口可能是你的武器库中唯一最有效的编码工具。一旦你真正理解了接口是用来做什么的，它们能做什么，编写干净的、非耦合的、可测试的代码就会变得容易得多。***

# ***简单的例子***

***例如，下面是 TypeScript 中一个简单接口的声明:***

***在本文中，我们将使用 TypeScript 示例。***

***接口由一个名称(在本例中是`IName`)和一个方法和属性声明组成。***

***按照惯例，接口以字母“`I`”开始。您可以创建任何名称的接口，但是使用`I`可以更容易地在代码中识别接口。***

***接口不包含实现功能的“真正”代码。接口不能声明字段、变量或常数。他们也不能定义私有、公共等范围。这纯粹是能力的宣言。因此，接口的每个成员本质上都是公共成员。***

***在上面的例子中，接口说:“嘿，当我被实现时，我会给你关于某人名字的信息。”它会告诉您有哪些可用的功能。它没有告诉您该功能将如何实现。***

***界面不关心，界面的用户也不应该关心。该接口的实现可能会做许多事情来获取名称信息——从列表中随机选取，从文件中获取，或者从数据库或其他数据存储中提取。***

***接口本身并不关心，也不能决定名称的来源。该接口只知道它的实现者将返回一个字符串，仅此而已。它甚至不能保证字符串是一个人的名字，尽管这是它的意图。***

***当然，这里的目的是创建一个实现类，当它进入“给我一个人的名字”模式时有一些意义。***

***例如，您可能有一个收集用户姓名的表单。您可能会迭代数据库中的记录，并使用接口在迭代时获取每个名称。***

***关键是实现对象是什么或者它们做什么并不重要——它们只是在被当作`IName`时产生一个名称。***

# ***实现接口***

***但是当然，正如你已经猜到的，没有实现类，接口什么也做不了。***

***为此，您需要将一个类声明为实现一个接口，然后确保该类实现接口中所有必需的方法。***

***一些语言允许你实现一个只有部分接口声明的类，或者有可选的接口部分，但是为了本文的目的，我们假设需要实现整个接口。***

***要实现`IName`，您可以如下声明一个类:***

***以下是一些需要注意的事项:***

*   ***类`Name`被声明为实现了`IName`接口。***
*   ***我们以一种迂回的方式实现了这个接口。我们的 TypeScript 类声明了一个`public`构造函数，它将名字和姓氏作为参数。然后，它将该信息存储在作为只读公共属性公开的`private`变量中。因此，该类是不可变的。***
*   ***还要注意，该类不仅仅实现了接口，它还提供了一个名为`fullName`的属性，该属性组合了名字和姓氏的值。这说明了一个类如何在接口的实现之外做任何你想做的事情。然而，当我们将类声明为接口变量时，我们不能使用该功能，因为它不是接口的一部分。***

# ***使用界面***

***当然，如果你不能使用接口，它就没有多大价值。这很简单。***

***在我能想到的几乎每一种语言中，你都要声明一个你想要创建的接口类型的变量，然后给它分配一个实现该接口的对象的实例。一个简单的例子是这样的:***

***接口可以在任何使用常规变量的地方使用。您可以将它们作为参数传递，并将其声明为字段、属性和局部变量。***

***事实上，你应该尽可能地利用接口。***

# ***结论***

***所以，接口很容易声明和使用。当然，真正的问题是*为什么*你想使用它们，它们提供了什么优势。在我的下一篇文章中，我将讨论这个问题。***