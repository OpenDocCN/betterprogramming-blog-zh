<html>
<head>
<title>Here’s How to Set up Webpack 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以下是如何设置Webpack 4</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-up-webpack-4-49012dedbfd6?source=collection_archive---------2-----------------------#2019-07-05">https://betterprogramming.pub/how-to-set-up-webpack-4-49012dedbfd6?source=collection_archive---------2-----------------------#2019-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="564e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我做了调查所以你不用做了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bad17d3184e800cead7d07ce5e9def24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1HRu4YeZDn3PAS81QjuNg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@grohsfabian?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">法比安·格罗斯</a>在<a class="ae ky" href="https://unsplash.com/search/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="69fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个人都有配置Webpack 4的问题。Webpack一开始对我来说很复杂，很难理解。我开始寻找如何做到这一点，我在网上找到了一百万个教程，所以你可能已经看到了一千种不同的方法来配置一个Webpack文件。</p><p id="b937" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我想在没有<code class="fe lv lw lx ly b">.babelrc</code>文件的情况下在webpack 4上配置web app，并且我想谈论更多细节上的散列。在本指南中，我们将逐步了解ES6的Webpack 4配置。</p><p id="b18f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，您将学习:</p><ul class=""><li id="e6aa" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">如何安装和配置Webpack 4</li><li id="584d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">没有<code class="fe lv lw lx ly b">.babelrc</code>如何安装配置Babel</li><li id="f152" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">如何安装React</li><li id="c13d" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">如何使用<code class="fe lv lw lx ly b">html-webpack-plugin</code></li><li id="a9bb" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">哈希(<code class="fe lv lw lx ly b">hash</code>、<code class="fe lv lw lx ly b">chunkhash</code>、<code class="fe lv lw lx ly b">contenthash</code>)</li><li id="1493" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">如何安装和配置Webpack开发服务器</li></ul><p id="c5a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你完全不熟悉Webpack，你可以阅读文档。Webpack有很好的文档，其中有很多解释。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="13a4" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">设置项目</h1><p id="6877" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">创建一个新目录并移动到<code class="fe lv lw lx ly b">webpack-tutorial</code>:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="68a4" class="nv mv it ly b gy nw nx l ny nz">mkdir webpack-tutorial &amp;&amp; cd ./webpack-tutorial</span></pre><p id="8d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">初始化项目:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="2bdb" class="nv mv it ly b gy nw nx l ny nz">npm init</span></pre><p id="af2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要从我们的终端下载<code class="fe lv lw lx ly b">webpack 4</code> <strong class="lb iu"> </strong>和<code class="fe lv lw lx ly b">webpack-cli</code> <strong class="lb iu"> </strong>来运行它:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="b783" class="nv mv it ly b gy nw nx l ny nz">npm install webpack webpack-cli --save-dev</span></pre><p id="f488" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后但同样重要的是，在<code class="fe lv lw lx ly b">package.json</code>中添加webpack命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="39a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们没有webpack的配置文件。</p><p id="cc16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">src</code>文件夹中创建一个<code class="fe lv lw lx ly b">index.js</code>文件，并写下以下几行:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="8e2f" class="nv mv it ly b gy nw nx l ny nz">console.log("Hello World");</span></pre><p id="704f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，使用以下脚本编辑您的<code class="fe lv lw lx ly b">package.json</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="305c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Webpack 4中，你有这些模式:<em class="oc">生产</em>和<em class="oc">开发</em>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8326" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated"><strong class="ak">设置反应</strong></h1><p id="1ca4" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在使用React之前，您应该安装<code class="fe lv lw lx ly b">react</code>和<code class="fe lv lw lx ly b">react-dom</code>。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="1347" class="nv mv it ly b gy nw nx l ny nz">npm install react react-dom --save</span></pre><p id="c17a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，你需要转换你的JS代码，因为现代的JS代码大部分是用ES6写的，并不是所有的浏览器都支持ES6。所以你需要转换它，把你的ES6代码转换成ES5。你可以用<strong class="lb iu">巴别塔</strong>来说明。Babel是一个工具链，主要用于将ES5+代码转换成当前和旧版本浏览器或环境中的向后兼容版本的JavaScript。设置<code class="fe lv lw lx ly b">@babel/core</code>、<code class="fe lv lw lx ly b">@babel/preset-env</code>、<code class="fe lv lw lx ly b">@babel/preset-react</code>和<code class="fe lv lw lx ly b"><strong class="lb iu">babel-loader</strong></code>、<strong class="lb iu">。</strong></p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="ea49" class="nv mv it ly b gy nw nx l ny nz">npm install @babel/core @babel/preset-env @babel/preset-react babel-loader --save-dev</span></pre><ul class=""><li id="f554" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">@babel/core</code>:将ES6代码转换成ES5 JavaScript代码。</li><li id="fc96" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">@babel/preset-env</code>:允许你使用最新的现代JavaScript。</li><li id="9e29" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">@babel/preset-react</code>:巴别预设将JSX电码转化为函数。</li><li id="5b36" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">babel-loader</code>:这个包允许使用<a class="ae ky" href="https://github.com/babel/babel" rel="noopener ugc nofollow" target="_blank"> Babel </a>和W <a class="ae ky" href="https://github.com/webpack/webpack" rel="noopener ugc nofollow" target="_blank"> ebpack </a>传输JavaScript文件。</li></ul><p id="f382" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来创造你的<code class="fe lv lw lx ly b">webpack.config.js</code>。将这些行放入您的配置文件<strong class="lb iu"> : </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="a393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，像这样创建你的<strong class="lb iu"> </strong> <code class="fe lv lw lx ly b">index.js</code> <strong class="lb iu"> </strong>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="0c9d" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated"><strong class="ak">设置Webpack配置</strong></h1><p id="4b9a" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">让我们在<code class="fe lv lw lx ly b">webpack.config.js</code>中创建应用程序目录的入口和输出点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="6c6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面，我们用<code class="fe lv lw lx ly b">filename: "[name].js"</code>定义了<code class="fe lv lw lx ly b">filename</code>。该名称将是<code class="fe lv lw lx ly b">app.js</code>,因为Webpack将它取自条目密钥名称。</p><p id="8f3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们应该创建一个HTML文件来服务我们的Webpack包。因此，我使用<code class="fe lv lw lx ly b">html-webpack-plugin</code>在dist文件夹中生成一个HTML文件。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="e4b2" class="nv mv it ly b gy nw nx l ny nz">npm install html-webpack-plugin html-webpack-template --save-dev</span></pre><p id="8a6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该在<code class="fe lv lw lx ly b">webpack.config.js</code>中插入以下代码行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="4d26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道如何将JS代码转换成ES5。CSS文件呢？为此，我们应该在我们的<code class="fe lv lw lx ly b">package.json</code>中使用<code class="fe lv lw lx ly b">style-loader</code><strong class="lb iu"/><strong class="lb iu"/><code class="fe lv lw lx ly b">css-loader</code><strong class="lb iu"/>；<code class="fe lv lw lx ly b">css-loader</code>加载所有CSS文件并合并成一个文件，<code class="fe lv lw lx ly b">style-loader</code>在文档标签的样式中添加所有样式。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="2150" class="nv mv it ly b gy nw nx l ny nz">npm install style-loader css-loader --save-dev</span></pre><p id="6a6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，要将所有转换后的CSS提取到一个单独的“bundle”文件中，我们必须使用<code class="fe lv lw lx ly b">mini-css-extract-plugin</code>。</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="abd1" class="nv mv it ly b gy nw nx l ny nz">npm install mini-css-extract-plugin --save-dev</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="ce3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您处理一个项目时，您希望使用最新版本的代码。这是发展中最常见的问题之一。它是用哈希法修复的。Webpack提供三种类型的散列:</p><ol class=""><li id="1261" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu od mf mg mh bi translated">[哈希]</li><li id="74fe" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu od mf mg mh bi translated">[chunkhash]</li><li id="b603" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu od mf mg mh bi translated">[内容哈希]</li></ol><p id="3fab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Hash</code> <strong class="lb iu"> </strong>是计算出来的一个构建。</p><p id="b209" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Chunkhash</code>是为chunk(条目文件)计算的。</p><p id="e2ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Contenthash</code>是在<code class="fe lv lw lx ly b">ExtractTextPlugin</code>中生成的特殊哈希，由提取的内容计算得出。<code class="fe lv lw lx ly b">MiniCssExtractPlugin</code>也支持<code class="fe lv lw lx ly b">contenthash</code>。请随意使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f81e" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated"><strong class="ak">设置webpack-dev-server </strong></h1><p id="76e4" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated"><code class="fe lv lw lx ly b">webpack-dev-server</code>为Webpack app提供实时重装开发服务器。你可以查看关于它的官方文件。让我们安装<code class="fe lv lw lx ly b">webpack-dev-server</code>:</p><pre class="kj kk kl km gt nr ly ns nt aw nu bi"><span id="07cb" class="nv mv it ly b gy nw nx l ny nz">npm install webpack-dev-server --save-dev</span></pre><p id="53d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在您的<code class="fe lv lw lx ly b">package.json</code>文件中更改脚本<code class="fe lv lw lx ly b">start</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="33e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该在<code class="fe lv lw lx ly b">webpack.config.js</code>中插入以下代码行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="d402" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">contentBase</code>:告诉服务器从哪里提供内容；</li><li id="5da4" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">compress</code>:启用压缩一切；</li><li id="55ab" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">port</code>:监听端口号；</li><li id="486c" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">open</code>:指定默认打开的浏览器；</li><li id="6b7a" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">watchContentBase</code>:告诉<code class="fe lv lw lx ly b">dev-server</code>观看文件。</li></ul><p id="5a6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们的<code class="fe lv lw lx ly b">webpack.config.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="062f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想在下一篇文章<a class="ae ky" href="https://medium.com/@gapur.kassym/five-steps-to-reduce-webpack-bundle-size-8aebcd8e1562" rel="noopener">讲讲如何优化webpack捆绑包缩小Webpack 4捆绑包大小的五个步骤</a>。</p><h1 id="58a1" class="mu mv it bd mw mx oe mz na nb of nd ne jz og ka ng kc oh kd ni kf oi kg nk nl bi translated">资源</h1><ul class=""><li id="e77b" class="lz ma it lb b lc nm lf nn li oj lm ok lq ol lu me mf mg mh bi translated">链接到GitHub:<a class="ae ky" href="https://github.com/Gapur/webpack-tutorial" rel="noopener ugc nofollow" target="_blank">web pack-教程</a></li><li id="1ac6" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">什么是Webpack？</li><li id="86b7" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated"><a class="ae ky" href="https://medium.com/@sahilkkrazy/hash-vs-chunkhash-vs-contenthash-e94d38a32208" rel="noopener">哈希vs块哈希vs内容哈希</a></li></ul></div></div>    
</body>
</html>