<html>
<head>
<title>Get Started With Swift for WebAssembly on macOS With SwiftWasm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftWasm在macOS上开始使用Swift for WebAssembly</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/get-started-with-swift-for-webassembly-on-macos-with-swiftwasm-5d588a086120?source=collection_archive---------10-----------------------#2020-10-22">https://betterprogramming.pub/get-started-with-swift-for-webassembly-on-macos-with-swiftwasm-5d588a086120?source=collection_archive---------10-----------------------#2020-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6b4c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解SwiftWasm</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/71389f412ad9ef79a940c087ce88f204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkgiYCYl-uLMi4Irus6Rsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@gaspanik?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Masaaki Komori </a>在<a class="ae ky" href="https://unsplash.com/s/photos/spring?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="a566" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SwiftWasm 背后的一群勇敢的灵魂正在致力于将WebAssembly添加为Swift编程语言的编译目标。这是一项正在进行的工作，所以还没有完全准备好。但是我们已经能够在Wasm运行时(例如浏览器)执行Swift代码了！</p><p id="a2b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在最新的macOS上设置SwiftWasm。然后，让我们尝试创建第一个基于Swift的应用程序！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d57c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装支持Wasm的Swift语言</h1><p id="103a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Wasm支持尚未在Swift官方资料库中提供。因此，我们必须安装一个有实验支持的语言快照。</p><p id="0c46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<a class="ae ky" href="https://github.com/swiftwasm/swift/releases/latest" rel="noopener ugc nofollow" target="_blank">项目GitHub </a>下载并安装最新的macOS版本SwiftWasm(撰写本文时为5.3)。</p><p id="90f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了能够从命令行使用SwiftWasm工具链:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="873c" class="ne md it na b gy nf ng l nh ni">export PATH=/Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin:"${PATH}"</span></pre><p id="7939" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并测试它是否已正确设置:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="05e4" class="ne md it na b gy nf ng l nh ni">swift --version</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a829" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">测试SwiftWasm</h1><p id="a785" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">创建HelloWorld Swift文件:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7aff" class="ne md it na b gy nf ng l nh ni">echo 'print("Hello, world!")' &gt; hello.swift</span></pre><p id="42e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将Swift源代码编译成Wasm字节码:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4790" class="ne md it na b gy nf ng l nh ni">swiftc -target wasm32-unknown-wasi hello.swift -o hello.wasm</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3c16" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">运行输出</h1><p id="ee1d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要从命令行运行代码，可以使用<code class="fe nj nk nl na b">wasmer</code>(Wasm运行时)。</p><p id="1a0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="5ccc" class="ne md it na b gy nf ng l nh ni">curl https://get.wasmer.io -sSfL | sh</span></pre><p id="af71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行Wasm代码:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e135" class="ne md it na b gy nf ng l nh ni">wasmer hello.wasm</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b9b3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用SwiftPM制作Swift套餐</h1><p id="a5b7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以利用SwiftPM创建一个包，然后编译成Wasm。</p><p id="4b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单。让我们创建一个名为<code class="fe nj nk nl na b">testpack</code>的包，然后编译并执行它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b2c0" class="ne md it na b gy nf ng l nh ni">mkdir testpack &amp;&amp; cd testpack<br/>swift package init --type executable</span></pre><p id="1abb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来建造它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2158" class="ne md it na b gy nf ng l nh ni">swift build --triple wasm32-unknown-wasi</span></pre><p id="50bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行它:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="17d9" class="ne md it na b gy nf ng l nh ni">wasmer .build/debug/testpack</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0705" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">接下来，用SwiftWasm创建一个Web应用程序</h1><p id="4394" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们只是勉强设置了整个事情，并执行了一个简单的Hello World。现在<a class="ae ky" href="https://medium.com/better-programming/create-a-react-and-swiftui-inspired-web-app-with-swift-for-webassembly-on-macos-with-swiftwasm-7741491b2886" rel="noopener">让我们用Swift制作</a>我们第一个受ReactJS和SwiftUI启发的web应用！</p></div></div>    
</body>
</html>