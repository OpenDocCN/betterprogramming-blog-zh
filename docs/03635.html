<html>
<head>
<title>How to Write and Deploy Firebase Cloud Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何编写和部署Firebase云函数</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-write-and-deploy-firebase-cloud-functions-e5bf5270a5be?source=collection_archive---------9-----------------------#2020-02-24">https://betterprogramming.pub/how-to-write-and-deploy-firebase-cloud-functions-e5bf5270a5be?source=collection_archive---------9-----------------------#2020-02-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5602" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">消防基地101</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b9dc417b97be3c8474e56d8211db1bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4hm9T6JSzTt1YHy7h_YwEg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@nesabymakers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NESA摄制作者</a>在<a class="ae ky" href="https://unsplash.com/s/photos/teach?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="902c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经使用<a class="ae ky" href="https://firebase.google.com/docs/database" rel="noopener ugc nofollow" target="_blank"> Firebase数据库</a>为后端构建移动应用程序有一段时间了，虽然有很好的文档和支持来帮助我使用数据库和大多数其他服务，但我在部署Firebase云功能时面临一些挑战。</p><p id="fcb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将教授如何编写和部署Firebase云函数，并尝试涵盖一些有用的场景。</p><p id="79f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们今天将讨论的内容:</p><ol class=""><li id="3649" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">设置项目。</li><li id="f0d2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">写云函数。</li><li id="fce1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">部署云功能。</li><li id="bb22" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何部署多个功能？</li><li id="8ac8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何通过可视化编辑器查看和编辑云函数？</li></ol><p id="e3c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从编写和部署我们的第一个云函数开始。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3cbc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">1.设置项目</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/0efc093ec0e4ec9fc6b1379e508b3baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fFDyf6xKyzG3O7NC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@danielkcheung?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张家瑜</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="9cc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Firebase Cloud函数，像<a class="ae ky" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>一样，不提供可以直接编写函数逻辑的UI。你必须通过CLI(命令行界面)来完成，这并不困难。</p><ol class=""><li id="4a9d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">打开VS代码或者你喜欢的代码编辑器。</li><li id="9a1f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">选择并打开一个文件夹，您将在其中保存您的云功能代码。</li><li id="ada7" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在同一文件夹中打开终端，并执行以下操作:</li></ol><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="3b84" class="no mr it nk b gy np nq l nr ns">sudo npm install -g firebase-tools</span></pre><p id="95df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将初始化配置Firebase云项目所需的工具。</p><p id="ecea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.与...做<code class="fe nt nu nv nk b">firebase init</code>:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="fde1" class="no mr it nk b gy np nq l nr ns">firebase init</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/ce402a7cbe80348823e8a6eb59bee761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tdDdqKNXbJAS1zjSraGX3A.png"/></div></div></figure><p id="13e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.然后选择你想用这个项目做什么，这个项目就是<br/> <code class="fe nt nu nv nk b">Configure and Deploy Cloud Functions</code>。</p><p id="a659" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按空格键选择一个选项，然后按enter键确认。</p><p id="e829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.如果你已经建立了一个Firebase项目，选择<br/> <code class="fe nt nu nv nk b">use existing project</code>。</p><p id="9055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">7.然后，选择要为其部署该功能的Firebase项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/de1dae846462bdf07c9b59aa8369e9b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dx_1mIai-esEv5glXsRFBA.png"/></div></div></figure><p id="ff8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">8.选择您的编程语言。我更喜欢JS，所以我将继续使用JavaScript中的例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/ebeab4dd7df6ce9248f145a42b1d51ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*LYyeBSTwYGynG_HWqwJfDA.png"/></div></figure><p id="ee99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">9.然后，它会要求您使用<a class="ae ky" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>，以遵循最佳实践。是啊，为什么不呢！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/5c4a58745afa1d888553b759c12cac47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H2TKinSm6U_4s6lxkFIt4g.png"/></div></div></figure><p id="ec55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">10.它会询问您npm依赖项。去做吧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/41658c25def25b2367c5293db886806c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Zc3RucFrddzuf4i4IfIgA.png"/></div></div></figure><p id="a9ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">耶！我们已经完成了项目设置。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="120e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">2.编写我们的云函数</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/cfd161f5ac53b024b5a4ee8121901cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PtJfwyMAxhTDBeRi"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@danielkcheung?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张家瑜</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7e38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，我们已经设置好了一个默认项目，并准备好编写一些杀手级代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/58eafb038536c54d88fb2a15cafd434e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L4Jty1fPoBTvo_O0Jent2w.png"/></div></div></figure><p id="cfff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续在这里写你的函数逻辑。</p><p id="c897" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不知道具体怎么做？我抓住你了！</p><p id="1436" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Firebase团队提供了一些Firebase云功能的优秀示例，以及您可以用它做什么。</p><div class="od oe gp gr of og"><a href="https://github.com/firebase/functions-samples" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">fire base/功能-示例</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">示例应用程序集，展示了使用云函数的Firebase的流行用例- firebase/functions-samples</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">github.com</p></div></div><div class="op l"><div class="oq l or os ot op ou ks og"/></div></div></a></div><p id="0d0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我举的一个例子。</p><p id="f947" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要求是用户可以从应用程序预订他们的座位，他们可以选择他们预订座位的小时数。</p><p id="2457" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据保存在Firebase实时数据库中。一切都很好。</p><p id="30e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">挑战在于，我必须在他们的预订到期后腾出这些座位。当当前时间超过<br/> <code class="fe nt nu nv nk b">starting time + number of hours the seat was booked for</code>时，预订过期。</p><p id="2080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方案是拥有一个每分钟运行并执行以下操作的云功能:</p><ol class=""><li id="bee7" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">检查座椅状态是否为<code class="fe nt nu nv nk b">OCCUPIED</code>。</li><li id="734c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">检查<code class="fe nt nu nv nk b">currentTimeStamp</code>是否大于<code class="fe nt nu nv nk b">(bookingTimeStamp + numberOfHoursBookedForInMilliSeconds)</code>。</li><li id="1d6c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如果上述条件成立，那么就通过更新座位数据来空出上述座位，让其他人预订。</li></ol><p id="8404" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是云函数的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="a9b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要了解的关键事项:</p><ul class=""><li id="9f50" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ox mb mc md bi translated">在第5行，<code class="fe nt nu nv nk b">exports</code>后面的名字将是你的云函数名。</li><li id="82e5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ox mb mc md bi translated">在第5行，<code class="fe nt nu nv nk b">function.https.onRequest</code>告诉我们这个云函数将如何被触发。</li></ul><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="be45" class="no mr it nk b gy np nq l nr ns">functions.database.ref('/messages').onWrite <br/><strong class="nk iu">// This is an example of 'onWrite' trigger</strong></span></pre><ul class=""><li id="0a39" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ox mb mc md bi translated">有各种各样的触发器，你可以从你的应用程序中触发一个函数，在数据库中进行写操作，等等。</li></ul><p id="4465" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与AWS Lambda相比，在Firebase中触发云功能非常容易，因为它们需要您设置AWS API网关。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a530" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">3.让我们部署该功能</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/dd120c526bfc66a8568524e899282d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v3sXKgZqYM58MPfx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@will0629?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">将</a>放在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="70e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到你的终端。做:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="3a69" class="no mr it nk b gy np nq l nr ns">firebase deploy --only functions</span></pre><p id="d09a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您部署之后，根据触发器，对我来说是<code class="fe nt nu nv nk b">function.https.onRequest</code>,所以我得到一个URL，您也可以通过控制台得到这个URL。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/6850853ff8ba69d51a3414cdfa554bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0v2zec2d3ePRm0uWOajeg.png"/></div></div></figure><h2 id="fb02" class="no mr it bd ms pa pb dn mw pc pd dp na li pe pf nc lm pg ph ne lq pi pj ng pk bi translated"><strong class="ak">回到我的例子</strong></h2><p id="ee11" class="pw-post-body-paragraph kz la it lb b lc pl ju le lf pm jx lh li pn lk ll lm po lo lp lq pp ls lt lu im bi translated">我们需要每分钟运行这个函数来查看是否有座位预订过期，为此这个HTTP URL需要被一次又一次地调用。</p><p id="16b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何每分钟自动点击这个网址？</p><p id="0033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你需要的话，你可以想出一些自己定制的解决方案。但是对于那些寻找更简单方法的人来说:</p><div class="od oe gp gr of og"><a href="https://cron-job.org/en/" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">cron-job.org-免费cronjobs -从每分钟一次到每年一次。</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">设置尽可能多的cronjobs。您的每个作业每小时最多可以执行60次。灵活配置…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">cron-job.org</p></div></div><div class="op l"><div class="pq l or os ot op ou ks og"/></div></div></a></div><p id="259f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以添加你的cron作业的URL(我们刚刚创建的云函数)，指定你希望它被调用的频率，对我来说，是每分钟，然后点击save。</p><p id="e3e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Cron-job.org会负责调用你的函数。</p><h2 id="1f36" class="no mr it bd ms pa pb dn mw pc pd dp na li pe pf nc lm pg ph ne lq pi pj ng pk bi translated">要记住的事情</h2><ol class=""><li id="8d89" class="lv lw it lb b lc pl lf pm li pr lm ps lq pt lu ma mb mc md bi translated">你依赖于Cron-job.org，这是一个免费的服务，因此，如果你的功能是做一些关键的事情，你会更好地拥有自己的定制服务器。</li><li id="3dcb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">你每个月有两百万次免费调用。之后，每百万次调用只需0.4美元。这里是<a class="ae ky" href="https://cloud.google.com/functions/pricing" rel="noopener ugc nofollow" target="_blank">定价</a>。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/b076ba3676b951f5c0689cab8ba3409c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMXkfz7A13e4rKElf9ArLw.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="090b" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">4.如何部署多个云功能？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/0acdeb6f83cddfb59af7cb8f8a41a26d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q_z3VESiKQAynAVi"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jamesponddotco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">詹姆斯·庞德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a6df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我花了大量时间，自己想出来的，而且很简单。</p><p id="2319" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需简单地将另一个<code class="fe nt nu nv nk b">exports.functionName = ...</code>添加到您的<code class="fe nt nu nv nk b">index.js</code>文件中，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure><p id="f982" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过在不同的文件中创建提取函数来重构它，并像在JavaScript中一样将它们导入到这里。</p><p id="c74d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需使用以下命令再次部署即可:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="8a21" class="no mr it nk b gy np nq l nr ns">firebase deploy --only functions</span></pre><p id="7278" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你去你的控制台，你应该可以看到这两个功能</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a7c3" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">5.我们如何通过可视化编辑器查看和编辑云函数？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pw"><img src="../Images/7486aa45c4b293f6adf1c2304e7f3f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Jq2MIDXCS61Dunsl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@danielkcheung?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张家瑜</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="7384" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Firebase Cloud Functions确实缺少AWS Lambda提供的可视化编辑器，但是有一种方法可以让你进入可视化控制台。</p><p id="3ec4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那是通过你的GCP控制台。点击<code class="fe nt nu nv nk b">Detailed usage stats</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi px"><img src="../Images/0b1e5b97ea5e7f24f05562c99a7e4a04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lB-ku5EKDXUOKLr5Z9yxQA.png"/></div></div></figure><p id="a657" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将打开下面的页面。点击<code class="fe nt nu nv nk b">source</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi py"><img src="../Images/1869441dceb0ef12434fb986a3ed1343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_r9WaPU96gnJDZfZYMBew.png"/></div></div></figure><p id="68ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以通过这个可视化编辑器来查看和编辑你的云函数。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="26c2" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="cac9" class="pw-post-body-paragraph kz la it lb b lc pl ju le lf pm jx lh li pn lk ll lm po lo lp lq pp ls lt lu im bi translated">就是这样，这就是你如何使用Firebase云功能。如果您有任何问题或改进建议，请告诉我。</p><p id="b39f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢您的阅读！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9d4c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">有用的链接</h1><div class="od oe gp gr of og"><a href="https://codelabs.developers.google.com/codelabs/firebase-cloud-functions/#0" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">Firebase的云函数</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">在这个codelab中，您将了解如何使用Firebase SDK for Google Cloud函数来改进聊天Web应用程序，以及如何…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">codelabs.developers.google.com</p></div></div><div class="op l"><div class="pz l or os ot op ou ks og"/></div></div></a></div><div class="od oe gp gr of og"><a href="https://firebase.google.com/docs/functions/write-firebase-functions" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">开始:编写和部署您的第一个函数| Firebase</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">编辑描述</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">firebase.google.com</p></div></div><div class="op l"><div class="qa l or os ot op ou ks og"/></div></div></a></div><div class="od oe gp gr of og"><a href="https://cloud.google.com/functions/pricing" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">定价|云功能文档|谷歌云</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">本文档中列出的价格可能会发生变化。云功能根据您的功能时长定价…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">cloud.google.com</p></div></div><div class="op l"><div class="qb l or os ot op ou ks og"/></div></div></a></div></div></div>    
</body>
</html>