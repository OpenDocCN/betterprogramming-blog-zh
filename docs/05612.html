<html>
<head>
<title>New Features in Python 3.9 Beta</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 3.9测试版中的新特性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/features-in-python-3-9-beta-cd33790cea6b?source=collection_archive---------24-----------------------#2020-07-21">https://betterprogramming.pub/features-in-python-3-9-beta-cd33790cea6b?source=collection_archive---------24-----------------------#2020-07-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b863" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解Python的未来</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ad7383e4d2fa687e0c04533256d0e892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIq7nIQVnhgEamMsaGR-tw.jpeg"/></div></div></figure><p id="10fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Python 3.9测试版已经发布，商店中有一些新的模块和改进的功能需要寻找和实现。让我们安装新版本，然后看看一些模块和功能的工作情况。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="a1fd" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">安装Python 3.9测试版</strong></h1><p id="1444" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">按照您的操作系统的安装过程，从官方网站安装最新版本。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="8261" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">新模块</strong></h1><p id="cb48" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">最新版本中增加了两个新模块:</p><ul class=""><li id="5de9" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">zoneinfo</code></li></ul><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="6770" class="nj lv iq ne b gy nk nl l nm nn">from zoneinfo import ZoneInfo<br/>from datetime import datetime, timedelta<br/># IANA time zone support</span><span id="94df" class="nj lv iq ne b gy no nl l nm nn">&gt;&gt;&gt; dt = datetime(2020, 12, 31, 12, tzinfo=ZoneInfo(“Asia/Kolkata”))<br/>&gt;&gt;&gt; dt.tzname()<br/>‘IST’</span></pre><ul class=""><li id="d0c5" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">graphlib</code></li></ul><p id="40a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd ne b">graphlib</code>提供对可散列节点图进行拓扑排序的功能。</p><p id="d0ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">拓扑排序是指给定的有向图G=(V，E)，求顶点的线性排序使得对于E中所有边(V，w)，v-&gt; w从顶点V到顶点w，顶点V在排序中先于顶点w。</p><p id="ba89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我试图在下图中解释拓扑排序是如何完成的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/741fcac53f3ec820d4584701679bd3f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*1Fy4tbVlT_cC66OIkklirQ.png"/></div><p class="nq nr gj gh gi ns nt bd b be z dk translated">图表</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/5a68378bb02c1ea6a671dc9296b92716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*22-DAU8VJp03jveGBRckfg.png"/></div><p class="nq nr gj gh gi ns nt bd b be z dk translated">拓扑排序</p></figure><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="870f" class="nj lv iq ne b gy nk nl l nm nn"><strong class="ne ir">&gt;&gt;&gt; </strong>import<strong class="ne ir"> </strong>graphlib<br/>&gt;&gt;&gt; from graphlib import TopologicalSorter<br/><strong class="ne ir">&gt;&gt;&gt; </strong>graph = {'E': {'C', 'F'}, 'D': {'B', 'C'}, 'B': {'A'}, 'A': {'F'}}<br/><strong class="ne ir">&gt;&gt;&gt; </strong>ts = TopologicalSorter(graph)<br/><strong class="ne ir">&gt;&gt;&gt; </strong>tuple(ts.static_order())<br/>('C', 'F', 'E', 'A', 'B', 'D')</span></pre><p id="4056" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以在这里阅读更多关于这个功能<a class="ae mr" href="https://docs.python.org/3.9/library/graphlib.html#graphlib.TopologicalSorter" rel="noopener ugc nofollow" target="_blank">的内容。</a></p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="d507" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">新模块添加到字符串方法</strong></h1><ul class=""><li id="881a" class="ms mt iq kt b ku mm kx mn la nv le nw li nx lm mx my mz na bi translated"><code class="fe nb nc nd ne b">str.removeprefix(prefix, /)</code></li></ul><p id="ef95" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从字符串中删除前缀变得比以前容易得多。</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="2e94" class="nj lv iq ne b gy nk nl l nm nn">&gt;&gt;&gt; 'readable'.removeprefix('read')<br/>'able'</span></pre><p id="ce31" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要从字符串中删除前缀，使用<code class="fe nb nc nd ne b">removeprefix</code>将返回<code class="fe nb nc nd ne b">string[len(prefix):]</code>，否则如果前缀字符串或前缀为空，将返回原始字符串。</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="3fa3" class="nj lv iq ne b gy nk nl l nm nn"><strong class="ne ir">&gt;&gt;&gt; </strong>'readable'.removeprefix('able')<br/>'readable'</span></pre><ul class=""><li id="9c82" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">str.removesuffix(suffix, /)</code></li></ul><p id="f4de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果字符串以给定的后缀结尾，则返回的字符串将是去掉后缀后的值:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="7464" class="nj lv iq ne b gy nk nl l nm nn"><strong class="ne ir">&gt;&gt;&gt; </strong>'MiscTests'.removesuffix('Tests')<br/>'Misc'</span></pre><p id="7557" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果字符串包含一个空的后缀字符串或后缀，将返回原来的:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="b5da" class="nj lv iq ne b gy nk nl l nm nn"><strong class="ne ir">&gt;&gt;&gt; </strong>'TmpDirMixin'.removesuffix('Tests')<br/>'TmpDirMixin'</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="9f48" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">字典合并和更新操作符</strong></h1><p id="a189" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">使用<code class="fe nb nc nd ne b">|</code>操作符，合并字典变得更加容易。这是这样的:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="ccf6" class="nj lv iq ne b gy nk nl l nm nn">&gt;&gt;&gt; d1 = {1: "spam"}<br/>&gt;&gt;&gt; d2 = {2: "eggs"}<br/>&gt;&gt;&gt; d = d1|d2<br/>&gt;&gt;&gt; d<br/>{1: 'spam', 2: 'eggs'}</span></pre><p id="9ec4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用<code class="fe nb nc nd ne b">|=</code>更新字典将如下更新项目:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="4e79" class="nj lv iq ne b gy nk nl l nm nn">&gt;&gt;&gt; d3 = {1:"Apple", 2: "eggs"}<br/>&gt;&gt;&gt; d4 = {2:"banana", 3: "Pancakes"}</span><span id="e669" class="nj lv iq ne b gy no nl l nm nn">&gt;&gt;&gt; d3 |= d4<br/>&gt;&gt;&gt; d3<br/>{1: 'Apple', 2: 'banana', 3: 'Pancakes'}</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="a1e6" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">数学函数</strong></h1><ul class=""><li id="f90e" class="ms mt iq kt b ku mm kx mn la nv le nw li nx lm mx my mz na bi translated"><code class="fe nb nc nd ne b">math.lcm()</code></li></ul><p id="70b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将返回整数参数的最小公倍数:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="daff" class="nj lv iq ne b gy nk nl l nm nn"><strong class="ne ir">&gt;&gt;&gt; </strong>import<strong class="ne ir"> </strong>math<br/>&gt;&gt;&gt; math.lcm(48,72,108)<br/>432</span></pre><ul class=""><li id="b726" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">math.gcd()</code></li></ul><p id="9409" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将返回整数参数的最大公约数。早期版本只支持两个参数。现在增加了对任意数量参数的支持。</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="5865" class="nj lv iq ne b gy nk nl l nm nn"><strong class="ne ir">&gt;&gt;&gt; </strong>import<strong class="ne ir"> </strong>math<br/>&gt;&gt;&gt; math.gcd(9,12,21)<br/>3</span></pre><p id="83b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd ne b">math.nextafter()</code>和<code class="fe nb nc nd ne b">math.ulp()</code>也被添加到数学模块中。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="1732" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated"><strong class="ak">已弃用并删除</strong></h1><ul class=""><li id="2d43" class="ms mt iq kt b ku mm kx mn la nv le nw li nx lm mx my mz na bi translated"><code class="fe nb nc nd ne b">random</code></li></ul><p id="0da4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">随机模块为各种分布实现伪随机数生成器。它目前接受任何可散列类型作为可能的种子值。在这个版本之后，它将限制其种子为<code class="fe nb nc nd ne b">None</code>、<code class="fe nb nc nd ne b">int</code>、<code class="fe nb nc nd ne b">float</code>、<code class="fe nb nc nd ne b">str</code>、<code class="fe nb nc nd ne b">bytes</code>和<code class="fe nb nc nd ne b">bytearray</code>。</p><p id="e20b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd ne b">random.shuffle()</code>的<code class="fe nb nc nd ne b">random</code>参数已被弃用。</p><ul class=""><li id="57d5" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">gzip.GzipFile()</code></li></ul><p id="df8a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不推荐在不指定<code class="fe nb nc nd ne b">mode</code>参数的情况下打开<code class="fe nb nc nd ne b">GzipFile</code>文件进行写入。</p><ul class=""><li id="1164" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">fractions.gcd()</code></li></ul><p id="7053" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd ne b">fractions.gcd()</code>在本版本中已被删除，由<code class="fe nb nc nd ne b">math.gcd()</code>代替。</p><ul class=""><li id="0f04" class="ms mt iq kt b ku kv kx ky la mu le mv li mw lm mx my mz na bi translated"><code class="fe nb nc nd ne b">asyncio.current_task()</code> <strong class="kt ir"> </strong>和<strong class="kt ir"> </strong> <code class="fe nb nc nd ne b">asyncio.all_tasks()</code></li></ul><p id="a8d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">asyncio是一个使用async/await编写并发代码的库。这两个功能已被删除，现在可以使用<code class="fe nb nc nd ne b">asyncio.current_task()</code>和<code class="fe nb nc nd ne b">asyncio.all_tasks()</code>来代替。在<a class="ae mr" href="https://docs.python.org/3.9/library/asyncio-task.html" rel="noopener ugc nofollow" target="_blank"> Python文档</a>中阅读更多关于这个函数的内容。</p><p id="2727" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd ne b"><a class="ae mr" href="https://docs.python.org/3.9/library/json.html#json.loads" rel="noopener ugc nofollow" target="_blank">json.loads()</a></code>的<code class="fe nb nc nd ne b">encoding</code>参数已被删除。</p><p id="40d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您还可以在这里查看其他功能和改进:</p><div class="ny nz gp gr oa ob"><a href="https://docs.python.org/3.9/library/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">Python标准库- Python 3.8.4文档</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">虽然Python语言参考描述了Python语言的确切语法和语义，但是这个库…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">docs.python.org</p></div></div></div></a></div></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="1ef3" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">结论</h1><p id="9a0b" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">Python 3.9对函数的使用方式进行了许多改进，使得使用它们变得更加容易。另一方面，引入了两个新模块— <code class="fe nb nc nd ne b">zoneinfo</code>和<code class="fe nb nc nd ne b">graphlib</code>。</p><p id="f5b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望你喜欢这篇文章，并从中学到一些东西。感谢所有反馈和建议。</p><h1 id="487e" class="lu lv iq bd lw lx ok lz ma mb ol md me jw om jx mg jz on ka mi kc oo kd mk ml bi translated">资源</h1><ul class=""><li id="d99c" class="ms mt iq kt b ku mm kx mn la nv le nw li nx lm mx my mz na bi translated"><a class="ae mr" href="https://docs.python.org/3.9/whatsnew/3.9.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3.9/whatsnew/3.9.html</a></li></ul></div></div>    
</body>
</html>