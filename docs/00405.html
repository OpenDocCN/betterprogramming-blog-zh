<html>
<head>
<title>Writing Readable and Maintainable Code in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用TypeScript编写可读和可维护的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/writing-readable-and-maintainable-code-in-typescript-237accdd8b05?source=collection_archive---------3-----------------------#2019-05-14">https://betterprogramming.pub/writing-readable-and-maintainable-code-in-typescript-237accdd8b05?source=collection_archive---------3-----------------------#2019-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a966" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何让其他人更容易理解你的代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4634738ec2497dd4fbbbc23554738d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d7OvZ4YO6M6HB-Sj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@carlesrgm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡莱斯·拉巴达</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="3d9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最不喜欢的编程部分是不得不阅读那些不能立即理解的代码。如果你在团队中工作过，你可能会明白我的意思。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6ec1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码并不容易阅读——你需要集中注意力，并且可能需要阅读多次才能完全理解它。还有零输入，所以不清楚使用该函数时应该发生什么。现在看看这段代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6c16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以立即看到这是一个将数组分割成块的函数。如果您要使用这个函数，您的IDE将准确地显示哪些参数是被请求的，以及您期望的输出是什么。就实现而言，逻辑命名的变量和空白使代码易于理解。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="16e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会指出，第二个示例比第一个示例需要更长的时间来编写代码。这可能是真的，但是第二个例子将通过使函数更容易使用来节省时间。不用查就知道函数会做什么。打字使使用这个函数更容易，因为你的IDE的智能感知会告诉你如何使用它。您也可以更容易地定位错误，因为它更容易阅读。你理解得更快更深刻。</p><p id="0147" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">chunk array函数可能是一个简单的例子，但是对于更复杂的代码，同样的逻辑也适用。</p><h1 id="7f77" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">改善你和你的团队代码的5个技巧</h1><p id="088e" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">我将分享我作为团队的一员在从事TypeScript项目时学到的一些东西。遵循这些提示使得阅读和维护我们的代码变得更加容易，并且减少了新团队成员变得高效的时间。</p><blockquote class="nc"><p id="d138" class="nd ne it bd nf ng nh ni nj nk nl lu dk translated">不要给自己写代码，要给别人写代码。</p></blockquote><p id="a089" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">换句话说，记住:其他人会阅读你的代码。也许不是今天，甚至不是下周，但它会发生。</p><h1 id="0455" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">1.使您的tsconfig尽可能严格</h1><p id="668d" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这可能是我在这篇文章中给你的最重要的提示。让TypeScript做它应该做的事情:防止人为错误。最好的方法是启用强制您遵循某些规则的TypeScript选项。</p><p id="fe41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是不要仅仅启用所有的TypeScript特性。仔细考虑哪些选项会对您的团队有所改进。在某些情况下，启用某些功能可能会适得其反。</p><h2 id="97b0" class="nr mg it bd mh ns nt dn ml nu nv dp mp li nw nx mr lm ny nz mt lq oa ob mv oc bi translated">严格选项</h2><p id="f0c7" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">我强烈建议您使用TypeScript中的几个严格选项:</p><p id="dc8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of og b">--noImplicitAny</code> <br/>在隐含any类型的表达式和声明中引发错误。</p><p id="645b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of og b">--noImplicitThis<br/></code>使用隐含的any类型在“this”表达式上引发错误。</p><p id="7bd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of og b">--alwaysStrict</code> <br/>在严格模式下解析，对每个源文件发出“use strict”。</p><p id="5493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of og b">--strictNullChecks</code> <br/>在严格的空值检查模式下，空值和未定义值不在每个类型的定义域内，只能赋给自身和any(唯一的例外是undefined也可以赋给void)。</p><p id="933c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of og b">--strictFunctionTypes</code> <br/>禁用函数类型的双变量参数检查。</p><p id="6210" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我称这些选项为严格选项，因为它们都是在使用<code class="fe od oe of og b">--strict </code>标志时设置的。还有一些选项需要设置，但是根据您使用的框架，使用起来可能会很麻烦。</p><p id="0604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，使用带有角度冲突的<code class="fe od oe of og b">--strictPropertyInitialization</code>与<code class="fe od oe of og b">@Input</code>、<code class="fe od oe of og b">@Output</code>和<code class="fe od oe of og b">@ViewChild(ren)</code>装饰器有点冲突。</p><h2 id="9751" class="nr mg it bd mh ns nt dn ml nu nv dp mp li nw nx mr lm ny nz mt lq oa ob mv oc bi translated">非严格选项</h2><p id="b35d" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">在Typescript中有更多的选项可以提高代码质量，我强烈建议您去探索它们。你可以在<a class="ae ky" href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" rel="noopener ugc nofollow" target="_blank">打字手册</a>中找到所有可用的选项。</p><h1 id="b6e0" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">2.可读性比性能更重要</h1><h2 id="516a" class="nr mg it bd mh ns nt dn ml nu nv dp mp li nw nx mr lm ny nz mt lq oa ob mv oc bi translated">变量名和函数名</h2><p id="47fb" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">不要总是使用单字母变量。您可能会节省几毫秒——甚至几行——但这是以牺牲可读性为代价的。</p><p id="11e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总是问:“有人会在第一次读这段代码时理解它吗？”如果答案是“是”，就给自己一个鼓励。如果答案是“不”,想一个好名字，使变量的目的清楚——它使你的代码更容易理解。</p><p id="24e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的函数名也是如此。如果你看到一个函数的名字，它的参数和它所属的类，你应该知道这个函数是做什么的。如果你不知道这个函数是做什么的，它需要一个更好的名字。</p><h2 id="d327" class="nr mg it bd mh ns nt dn ml nu nv dp mp li nw nx mr lm ny nz mt lq oa ob mv oc bi translated">表演</h2><p id="8008" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这取决于您正在进行的项目的类型，但是在大多数情况下，为了节省一毫秒的时间而使您的代码变得更难理解是不值得的。难以理解的代码更容易导致bug。</p><blockquote class="nc"><p id="13db" class="nd ne it bd nf ng nh ni nj nk nl lu dk translated">首先关注正确性，然后是清晰性，最后，如果需要，关注性能。</p></blockquote><p id="14c5" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">如果你确实需要表演，确保你使用正确的命名，并添加清晰的注释。这样你就可以避免你的队友浪费时间去理解复杂的代码。</p><h1 id="e83b" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">3.林挺</h1><p id="8fa8" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">如果你不强制一种代码风格，每个人都将按照他们喜欢的方式编码。有些会使用尾随逗号，有些会使用4个空格缩进，有些会用下划线作为私有变量的前缀。简而言之，每个文件看起来都不一样。</p><p id="8c5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用像<a class="ae ky" href="https://palantir.github.io/tslint/" rel="noopener ugc nofollow" target="_blank"> TSLint </a>和/或<a class="ae ky" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">pretty</a>这样的工具，你可以创建你想要的代码外观规则。试着让你的林挺尽可能的严格——当然，如果你遗漏了一个逗号或者分号会很烦人，但是阅读别人的代码会更容易，因为你知道会发生什么。</p><h1 id="b7e9" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">4.项目结构</h1><p id="a87f" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">没有意义的项目结构是很费时间的。当您试图解决一个bug时，却找不到处理该特定逻辑的文件，这是很烦人的。</p><p id="8823" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不能为你建议一个项目结构，但是我可以建议你在随机创建文件夹和文件之前思考一下。甚至可以和你的团队坐下来创建一个项目结构，让每个人都能找到他们想要的东西。否则，谁知道你最终会得到什么？</p><h1 id="05c2" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">5.结对编程</h1><p id="1eff" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">有时当你在解决复杂的问题时，两人一组会很有用。结对工作比单独工作有几个优点:两个人会更好地理解复杂的问题，四只眼睛比两只眼睛更快地发现bug。</p><p id="d0cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个人也可能得出不同的解决方案。有时，将两种解决方案结合起来会比任何一个人单独解决问题都要好得多。</p><p id="337a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，不要总是两人一组。你还必须能够独立编程，不能总是依赖别人。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="db6c" class="mf mg it bd mh mi oh mk ml mm oi mo mp jz oj ka mr kc ok kd mt kf ol kg mv mw bi translated">TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="5e39" class="om on it lb b lc mx lf my li oo lm op lq oq lu or os ot ou bi translated">让你的<code class="fe od oe of og b">tsconfig</code>尽可能严格。</li><li id="c75f" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">首先关注正确性，然后是清晰性，最后，如果需要，关注性能。</li><li id="628c" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">使用TSLint和/或更漂亮的强制代码样式。</li><li id="d9e9" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">使在项目结构中查找相关文件变得容易。</li><li id="ec42" class="om on it lb b lc ov lf ow li ox lm oy lq oz lu or os ot ou bi translated">成对编程对于解决复杂问题很有用。</li></ul></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="5cdb" class="mf mg it bd mh mi oh mk ml mm oi mo mp jz oj ka mr kc ok kd mt kf ol kg mv mw bi translated">最后一个音符</h1><p id="32fd" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这些都是我从自己的经历中学到的。不要低估高质量代码库的好处。这会让你的生活更轻松。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><div class="kj kk kl km gt pa"><a href="https://medium.com/@freek_mencke/how-to-write-node-js-applications-in-typescript-a54af696f66" rel="noopener follow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd iu gy z fp pf fr fs pg fu fw is bi translated">如何用Typescript编写Node.js应用程序</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">并使它们更容易维护，同时产生更少的错误</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">medium.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ks pa"/></div></div></a></div></div></div>    
</body>
</html>