<html>
<head>
<title>Functional JS From Α to Ω: Filter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从α到ω的泛函JS:滤波器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/functional-js-from-%CE%B1-to-%CF%89-filter-10d8227e8f34?source=collection_archive---------20-----------------------#2019-09-02">https://betterprogramming.pub/functional-js-from-%CE%B1-to-%CF%89-filter-10d8227e8f34?source=collection_archive---------20-----------------------#2019-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bb4b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">过滤功能在我们神圣的三位一体中是第二位的</h2></div><blockquote class="ki"><p id="706c" class="kj kk it bd kl km kn ko kp kq kr ks dk translated">Richard Waters开发了一个程序，可以自动分析传统的Fortran程序，从映射、过滤和累积的角度来查看它们。他发现Fortran科学子程序包中整整90%的代码恰好符合这种范式。</p><p id="52a2" class="kj kk it bd kl km kt ku kv kw kx ks dk translated">— SICP 1979年</p></blockquote><figure class="kz la lb lc ld le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ky"><img src="../Images/6da31d4faa02b63e443e8a715ff65ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZZfWFK50fIjaEcPhILOog.jpeg"/></div></div><p class="ll lm gj gh gi ln lo bd b be z dk translated">照片由<a class="ae lp" href="https://unsplash.com/@jtylernix" rel="noopener ugc nofollow" target="_blank">泰勒·尼克斯</a>在<a class="ae lp" href="https://unsplash.com/photos/W9rOPHK--RQ" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ebdc" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">我们JavaScript编码人员有机会实践一种支持函数式编程的多参数语言。</p><p id="807f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">你想学习那种力量吗？</p><p id="73a5" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">让我们从24课开始，从α到ω，解决我们的日常问题。</p><p id="47f7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated"><strong class="ls iu">课程概述:</strong></p><p id="b8c1" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated"><a class="ae lp" href="https://medium.com/better-programming/functional-js-from-%CE%B1-to-%CF%89-8dc0cfe1f4e1" rel="noopener"> α。对于每个</a>，</p><p id="2a3f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated"><a class="ae lp" href="https://medium.com/better-programming/functional-js-from-%CE%B1-to-%CF%89-map-9173adf7ea3" rel="noopener"> β。地图</a>，</p><p id="e3c7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">γ.过滤器。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="7bde" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">签到</h1><p id="9ed7" class="pw-post-body-paragraph lq lr it ls b lt nk ju lv lw nl jx ly lz nm mb mc md nn mf mg mh no mj mk ks im bi translated">我经常谈到函数的<em class="np">签名</em>。签名是一行语句，表示意图(或名称)以及函数的输入和输出，就像<code class="fe nq nr ns nt b">double::number -&gt; number</code>。</p><p id="e1e0" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">他们对实施只字不提。如果你在15分钟内用一个好的签名解决了你的问题，你有一整天的时间来重构你的实现。签名应该总是先于实现，就像测试先于TDD的开发一样。我想做什么？在我的计算/效果之前我得到了什么，之后我能期待什么？</p><p id="e926" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">在编写代码之前，思考你想要达到的目标是至关重要的。你会感觉到控制着你的代码，准备好一点一点地解决问题。它防止你迷失在代码的意大利面中，疯狂地修补一切，直到它看起来可以工作。</p><p id="479e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">在JavaScript中，签名不是硬编码的，因为它是一种松散/动态类型的语言。秘诀就是使用注释。让我们想象我们的领域是一个赌场，尤其是轮盘赌游戏。这里有一些有用的签名，以及基本的实现。</p><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="bee5" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">加入秩序</h1><p id="a5d1" class="pw-post-body-paragraph lq lr it ls b lt nk ju lv lw nl jx ly lz nm mb mc md nn mf mg mh no mj mk ks im bi translated"><code class="fe nq nr ns nt b">Map</code>、<code class="fe nq nr ns nt b">filter</code>和<code class="fe nq nr ns nt b">reduce</code>是简单的高阶函数，如本系列之前的文章所述。当您只使用一个更高级别的有序性时，您总是对两个签名感兴趣:您的二阶(更高级)函数的签名(运行另一个函数的函数)和您的一阶函数的签名(作为将要运行的参数接收的经典函数，例如回调函数)。</p><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="ec0a" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">如您所见，<code class="fe nq nr ns nt b">filter</code>有一个非常有趣的特征:它返回相同类型元素的集合，最终是只包含匹配条件的元素的原始列表的子集。事实上，它不能在你的收藏中添加或转换任何东西。</p><p id="9248" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">这个条件由回调测试，对原始集合的每个元素逐一执行。</p><p id="b4c9" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">回调的签名将类似于<code class="fe nq nr ns nt b">callback::(a) -&gt; boolean</code>，在循环中采用当前的<code class="fe nq nr ns nt b">a</code>。事实上，返回真值的回调是允许高阶函数<code class="fe nq nr ns nt b">filter</code>只保留搜索结果的通过/不通过门。</p><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="b2ef" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">我们的<code class="fe nq nr ns nt b">even</code>和<code class="fe nq nr ns nt b">odd</code>函数在这里很受欢迎，因为它们的<code class="fe nq nr ns nt b">number -&gt; boolean</code>签名与我们的<code class="fe nq nr ns nt b">number[]</code>数组兼容。</p><p id="6e78" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">我们的<code class="fe nq nr ns nt b">color</code>函数逻辑上不能原样使用，只是更进一步。</p><p id="66c6" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">我知道你不同意这个<code class="fe nq nr ns nt b">play</code>不纯的函数与全局范围共享一些常数。我一开始也是这么想的，但是我们还得等着看我们从<code class="fe nq nr ns nt b">closures</code>、<code class="fe nq nr ns nt b">currying,</code>、<em class="np">、</em>、<code class="fe nq nr ns nt b">memoization</code>、<em class="np">、</em>中学到了什么，才能治愈这种不可接受的杂质。</p><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="4191" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">抛开我们的赌场假设，你可以把你的代码看成一个到处都是传送带的大工厂。武器拿走我们保留的东西，把它放在一条新的带子里，把其余的扔进垃圾桶。然后特殊的<code class="fe nq nr ns nt b">map </code>手臂改造他们在新皮带上发现的东西。这些机器可以兼容我们领域内任何规模的收藏。事实上，我正在做一个名为“Functorio”的项目，这是一个在大工厂里用经典函数式编程玩的游戏。</p><h2 id="66d1" class="oa mt it bd mu ob oc dn my od oe dp nc lz of og ne md oh oi ng mh oj ok ni ol bi translated">我自己的代数</h2><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="6e7d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">你能预见一些不同的自定义代数的到来吗？我们非常紧密地定义数据和功能的世界，一个领域接一个领域，一个是赌场，另一个是约会网站。这就是为什么<code class="fe nq nr ns nt b">map-filter-reduce</code>是我们的神圣三位一体:他们可以很容易地匹配几乎每个领域。剧透警告:<code class="fe nq nr ns nt b">map</code>和<code class="fe nq nr ns nt b">filter</code>只是<code class="fe nq nr ns nt b">reduce</code>最常见的一些用例。函数式程序员选择将它们分开，因为它们太常见了。对于<code class="fe nq nr ns nt b">odd, even, min, max, reverse</code>等就不一定了。最后，都是关于特定领域的代数——例如，<em class="np"> </em>一个制作精良的专业代码库。</p><p id="447d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">函数式编程并不是一种新范式。这是一种思考编码的方式:我们希望定义一个人脑可以控制的内聚的虚拟世界——就像React中的虚拟DOM一样。它基于图灵机:真链和假链——所以我们依赖于布尔代数。函数是我们最小的比特，作为抽象的可组合工具来激活这个生活领域——所以我们拥抱<a class="ae lp" href="https://www.youtube.com/watch?v=3VQ382QG-y4" rel="noopener ugc nofollow" target="_blank">λ演算</a>。它是建立在内聚列表和集合之上的，所以我们拥抱<a class="ae lp" href="https://github.com/hmemcpy/milewski-ctfp-pdf" rel="noopener ugc nofollow" target="_blank">范畴理论</a>。其余的类型和计算将由我们自己完成，所以我们为我们的特定领域创建了一个新的代数:一个在线赌场、一个比萨饼店预订监视器、一个兽医后勤办公室、一个银行ERP或一个鸟类学家网站。</p><p id="6b8a" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">您可能知道，<code class="fe nq nr ns nt b">filter</code>存在于任何JavaScript数组的本机实现中。这是一个您可以使用的原型方法(如果您不像我们一样编写自己的过滤器)。我们可以一起想象它的实现，然后用一些<code class="fe nq nr ns nt b">maps</code>把它链接起来，感受我们的新力量。</p><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2ee7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">链接我们的<code class="fe nq nr ns nt b">filter</code>而不是每次都创建一个新的<code class="fe nq nr ns nt b">const</code>怎么样？通过组合是可能的，但是目前在我们最喜欢的语言中还没有内置的操作符。但是未来的JavaScript (ES9，ES10？)，应该有管道函数的方式，用这个管道操作符:<code class="fe nq nr ns nt b">|&gt;</code>。它已经可以和巴别塔一起使用了。</p><figure class="nu nv nw nx gt le"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="3e83" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ks im bi translated">下一课之后，我们将能够构建<code class="fe nq nr ns nt b">pipe</code> <em class="np"> </em>和<code class="fe nq nr ns nt b">compose</code> <em class="np"> </em>运算符函数，允许我们在2020年之前链接函数，尤其是我们的高阶<code class="fe nq nr ns nt b">map</code>、<code class="fe nq nr ns nt b">filter</code>和<code class="fe nq nr ns nt b"> reduce</code>。</p></div></div>    
</body>
</html>