<html>
<head>
<title>FullStack Web3 — Everything You Need to Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">FullStack Web3 —您需要知道的一切</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/everything-you-need-to-know-about-fullstack-web3-94c0f1b18019?source=collection_archive---------0-----------------------#2022-02-07">https://betterprogramming.pub/everything-you-need-to-know-about-fullstack-web3-94c0f1b18019?source=collection_archive---------0-----------------------#2022-02-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6e08" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们确切地了解了web3 /区块链/智能合约应用程序如何在前端使用HTML和Javascript工作。然后，我们将通过6种不同的方式将您的元掩码、幻象或其他区块链钱包地址连接到您的前端。我们将看看流行的Nextjs / React包，让您的开发生命周期轻松100倍。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6a29ed45691ff7218dab752f1576ceaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0kqXkrXhCvGRy3VlnBx_6g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将您的前端连接到您的智能合同/web3应用程序/区块链。</p></figure><p id="cc10" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你刚刚用<a class="ae lu" href="https://www.youtube.com/watch?v=M576WGiDBdQ" rel="noopener ugc nofollow" target="_blank"> solidity </a>、<a class="ae lu" href="https://www.youtube.com/watch?v=7l1P3xzr7Jo" rel="noopener ugc nofollow" target="_blank"> rust </a>或者<a class="ae lu" href="https://vyper.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> vyper </a>构建了一个令人惊叹的web3应用程序，你告诉你的非开发者朋友“要与它交互，你只需要调用我用你的后端脚本编写的这些函数。”</p><p id="f5f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">令你惊讶的是，他们都不知道你在说什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/20dd9a6ed795ca53b33e0017d27816e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWghxkMUiMJsQa9v9gCiDQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae lu" href="https://knowyourmeme.com/memes/visible-confusion" rel="noopener ugc nofollow" target="_blank">图像来源</a></p></figure><p id="b321" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我们将学习web3 /区块链/智能合同应用程序如何使用HTML和JavaScript在前端工作。</p><p id="5768" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将通过六种不同的方式将您的元掩码、幻影或其他区块链钱包地址连接到您的前端。</p><p id="0759" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我们将看看流行的Nextjs / React包，让您的开发生命周期轻松100倍。</p><p id="b84b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那么，我们开始吧。</p><h1 id="31bf" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">介绍</h1><p id="c94c" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">为了让web3贴近大众，我们需要有用户友好的前端和网站。在区块链领域解决这个问题时，全栈软件工程师会遇到一些挑战。</p><ol class=""><li id="18cc" class="mt mu it la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated">如何将<a class="ae lu" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>连接到我的UI？(或<a class="ae lu" href="https://walletconnect.com/" rel="noopener ugc nofollow" target="_blank"> Walletconnect </a>、<a class="ae lu" href="https://phantom.app/" rel="noopener ugc nofollow" target="_blank"> Phantom </a>等。)</li><li id="d18c" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">如何在网站上使用智能合约执行交易？</li><li id="2bac" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">精英中的精英在做什么工具？</li></ol><p id="f9de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，在问自己这个问题并试图找出向开发人员推荐什么的时候，我看了几乎所有最流行的解决方案。因此，在本文中，我们将:</p><ol class=""><li id="0433" class="mt mu it la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated">当我们想要与区块链交互或向其发送交易时，理解浏览器中正在发生的事情。</li><li id="49e2" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">我们来看看六种最流行的连接web3应用程序的方法</li><li id="4aba" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">给出代码示例并展示这个领域中所有最大的玩家都使用什么，这样您就可以使用相同的工具了！</li></ol><p id="db07" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想看看一些专业前端现在是什么样子，你可以看看<a class="ae lu" href="https://app.aave.com/#/dashboard" rel="noopener ugc nofollow" target="_blank"> Aave </a>或<a class="ae lu" href="https://app.uniswap.org/#/swap?chain=mainnet" rel="noopener ugc nofollow" target="_blank"> Uniswap </a>网站。</p><p id="c180" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">激动吗？我也是。我们走吧。</p><h1 id="2a83" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">如何将我的智能合同连接到Metamask</h1><p id="888e" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">或者浏览器中的另一个钱包，像Phantom，Walletconnect等。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/91e620dbd71922a61480da64f64317f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N63XYV4Ni8qeCmx0YrLmUA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何将我的智能合同连接到Metamask</p></figure><p id="4fac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你的web 3/区块链应用程序的大多数“后端”都将使用类似于<a class="ae lu" href="https://hardhat.org/" rel="noopener ugc nofollow" target="_blank"> Hardhat </a>、<a class="ae lu" href="https://eth-brownie.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Brownie </a>、<a class="ae lu" href="https://medium.com/@patrick.collins_58673/how-to-use-dapptools-code-like-makerdao-fed9909d055b" rel="noopener"> DappTools </a>、<a class="ae lu" href="https://project-serum.github.io/anchor/getting-started/introduction.html" rel="noopener ugc nofollow" target="_blank"> Anchor </a>或<a class="ae lu" href="https://github.com/gakonst/foundry" rel="noopener ugc nofollow" target="_blank"> Foundry </a>的框架来构建(或者如果你相信<a class="ae lu" href="https://www.youtube.com/watch?v=Qp-7Bp3W9f0" rel="noopener ugc nofollow" target="_blank">纸牌之心</a>、<a class="ae lu" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> Remix </a>工具)。我们的前端将使用你在传统web2空间学到的任何东西。HTML、JavaScript、CSS，还有像<a class="ae lu" href="https://nextjs.org/docs/api-reference/create-next-app" rel="noopener ugc nofollow" target="_blank"> NextJS </a>、<a class="ae lu" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae lu" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>这样的框架。</p><p id="c04b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，如果你熟悉传统的web开发，你将会领先于这个游戏！</p><h2 id="56e5" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">使用元掩码在浏览器中会发生什么</h2><p id="cc8f" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">现在，如果你想跟着做，请安装<a class="ae lu" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>。你可以<a class="ae lu" href="https://www.youtube.com/watch?v=Af_lQ1zUnoM" rel="noopener ugc nofollow" target="_blank">观看这个视频</a>进行更深入的跟进。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/15cfeced7733b2fd0d6ad43ea8f65ee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*yT7yWX5qmdj4Ez3Zy9hGQg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">右键单击，然后点击“检查”</p></figure><p id="01af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，在您的浏览器中，右键单击屏幕并点击“inspect”或“inspect element”，您会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/906581fcc7ef7a23f432ab1a8cfbcc53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfi9miT44vz3jw57zgsaXQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">点击“检查”来查看所有的浏览器调试工具。</p></figure><p id="80d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将显示网站用来呈现你在屏幕上看到的所有代码。然后，如果你点击顶栏中的<code class="fe nv nw nx ny b">sources</code>，你会看到类似这样的内容。(如果看不到<code class="fe nv nw nx ny b">sources</code>，可以点击<code class="fe nv nw nx ny b">&gt;&gt;</code>按钮显示更多选项。)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/5cdc2ea18b421c1bcd497b5f1bd60dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_qEDmVrrw3WVcMtZpGZ96Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">点击“源”来查看组成网页的所有文件。</p></figure><p id="fcdc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您的浏览器中安装了元掩码，您会在左侧看到一个“元掩码”文件。如果你安装了幻影，你会看到一个“幻影”</p><p id="e3c9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些浏览器插件会做一些有趣的事情，它们会自动“注入”到你的浏览器中，并作为你所在网站的一部分出现。这给了网站与他们互动的机会。</p><p id="1f47" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个浏览器中都有一个对象叫做<code class="fe nv nw nx ny b">window</code>对象。我们可以通过点击<code class="fe nv nw nx ny b">console</code>标签看到这个对象，(类似于我们点击<code class="fe nv nw nx ny b">sources</code>的方式)我们进入一个<a class="ae lu" href="https://javascript.info/debugging-chrome#console" rel="noopener ugc nofollow" target="_blank"> JavaScript控制台</a>，在这里我们可以编写JavaScript并与JavaScript对象交互。</p><p id="ad6a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们输入<code class="fe nv nw nx ny b">window</code>,看看会得到什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/a6db85e67d354f52e7a0e1d7592c6a5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sW2Hxd64Ysku8L429hM9EQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在“控制台”标签中键入“窗口”并按回车键</p></figure><p id="af5e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">厉害！我们在浏览器中看到JavaScript <code class="fe nv nw nx ny b">window</code>对象。现在，既然我们有了一个<code class="fe nv nw nx ny b">Metamask</code>源，这应该意味着我们有一个<code class="fe nv nw nx ny b">ethereum</code>属性附加到我们的<code class="fe nv nw nx ny b">window</code>对象上。键入<code class="fe nv nw nx ny b">window.ethereum</code>看看你会得到什么(或者<code class="fe nv nw nx ny b">window.solana</code>如果你有幻影)。</p><p id="2294" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会看到一个对象响应！如果你没有元掩码，你会得到一个<code class="fe nv nw nx ny b">undefined</code>。每个浏览器钱包都将自己的属性添加到窗口对象中，您通常可以在它们的文档中找到它。这里是<a class="ae lu" href="https://docs.metamask.io/guide/mobile-best-practices.html#the-provider-window-ethereum" rel="noopener ugc nofollow" target="_blank">元掩码文档</a>确切地谈论了<code class="fe nv nw nx ny b">window.ethereum</code>。</p><blockquote class="ob oc od"><p id="a99f" class="ky kz oe la b lb lc ju ld le lf jx lg of li lj lk og lm ln lo oh lq lr ls lt im bi translated">注意:在以前的版本中，这是<code class="fe nv nw nx ny b">window.web3</code>，现在已经改为<code class="fe nv nw nx ny b">window.ethereum</code></p></blockquote><p id="8d66" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是我们的区块链提供商，或者我们的区块链连接<code class="fe nv nw nx ny b">window.ethereum</code>将成为我们的提供商。那么我们为什么需要它呢？</p><h2 id="6969" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">区块链连接/提供商</h2><p id="ca31" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">每当我们想从区块链读取数据、调用函数或进行交易时，我们都需要连接到区块链网络。如果我们发送一个事务，我们需要将签名的事务发送到一个区块链节点，这样它就可以将它发送到网络中的所有其他区块链节点。在这个免费代码营视频的第0课中，你可以了解更多关于<a class="ae lu" href="https://www.youtube.com/watch?v=Qe-3FUxThso" rel="noopener ugc nofollow" target="_blank">区块链101的信息。</a></p><p id="5e2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您以前可能在您的区块链应用程序中使用过来自<a class="ae lu" href="https://alchemy.com/?a=673c802981" rel="noopener ugc nofollow" target="_blank"> Alchemy </a>、<a class="ae lu" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>或<a class="ae lu" href="https://moralis.io/speedy-nodes/" rel="noopener ugc nofollow" target="_blank"> Moralis Speedy Nodes </a>的<a class="ae lu" href="https://eth.wiki/json-rpc/API" rel="noopener ugc nofollow" target="_blank"> RPC URL </a>。这些都是“节点即服务”提供者，并为我们提供了一个HTTP端点来发送请求到区块链节点。加密货币钱包也是如此，我们的元掩码与内置的区块链节点相连。事实上，如果你去你的<a class="ae lu" href="https://metamask.zendesk.com/hc/en-us/articles/360056196151-Using-custom-networks-with-MetaMask" rel="noopener ugc nofollow" target="_blank">元掩码“网络”标签</a>，你可以看到你的元掩码正在使用的确切的RPC URL！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/3abb5fdd15e122ee78e0188636c0fa6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09VLNFPUV088j1KB6ClSIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">元掩码中的“网络”选项卡—查看区块链RPC URL</p></figure><p id="cb7a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">嘣！因此，每当我们使用元掩码做一些事情时，我们都会对这个RPC URL进行API调用。</p><h2 id="ef7a" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">使用HTML和JavaScript连接到加密货币钱包</h2><p id="71a2" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">现在，我们将首先展示这是如何在HTML和JavaScript中完成的，然后我们将继续我们的Nextjs/React示例。我的GitHub中有一个使用HTML/JavaScript连接到加密货币钱包的完整示例，我的Github中也有一个所有示例的列表。</p><p id="fb5d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们创建一个标准的HTML文档，我们将得到一个<code class="fe nv nw nx ny b">Connect </code>按钮。</p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="7fd3" class="nh lx it ny b gy on oo l op oq">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Javascript Test&lt;/title&gt;<br/>  &lt;/head&gt;</span><span id="c4f3" class="nh lx it ny b gy or oo l op oq">&lt;body&gt;<br/>    &lt;button id="connectButton"&gt;Connect&lt;/button&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="2350" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以通过添加一个<code class="fe nv nw nx ny b">script</code>标签并创建一个寻找<code class="fe nv nw nx ny b">window.ethereum</code>的JavaScript函数来为我们的按钮添加一些功能，如果找到了，它就发出一个连接请求。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="35e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是你所需要的！<code class="fe nv nw nx ny b">eth_requestAccounts</code>直接来自<a class="ae lu" href="https://docs.metamask.io/guide/rpc-api.html#table-of-contents" rel="noopener ugc nofollow" target="_blank">元掩码文档</a>。如果您将它命名为<code class="fe nv nw nx ny b">index.html</code>并在浏览器中运行，您的元掩码会弹出来要求连接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/2348972035def9651e4815998e50dd30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJHg89ZfcY1lIczT-1ladw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">元掩码请求连接</p></figure><h2 id="8316" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">发送交易</h2><p id="03f8" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">现在我们已经连接了元掩码，是时候发送事务了。在这里，我们可以使用像<a class="ae lu" href="https://docs.ethers.io/v5/" rel="noopener ugc nofollow" target="_blank"> ethersjs </a>和<a class="ae lu" href="https://web3js.readthedocs.io/en/v1.7.0/" rel="noopener ugc nofollow" target="_blank"> web3js </a>这样的包来连接我们的提供者，然后发送一个事务。通常，在JavaScript中执行函数/发送事务的一些示例JavaScript如下所示:</p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="6fa1" class="nh lx it ny b gy on oo l op oq">const etheres = require("ethers")</span><span id="7495" class="nh lx it ny b gy or oo l op oq">contractAddress = "0x5FbDB2315678afecb367f032d93F642f64180aa3";<br/>const abi = // some big javascript ABI here...</span><span id="c0f9" class="nh lx it ny b gy or oo l op oq">const provider = new ethers.providers.JsonRpcProvider(/* alchemy or infura */)<br/>const wallet = new ethers.Wallet(/* Private key */, provider)</span><span id="4cf3" class="nh lx it ny b gy or oo l op oq">const contract = new ethers.Contract(contractAddress, abi, wallet)<br/>const contractWithSigner = contract.connect(wallet)<br/>const transactionResponse = contract.someFunction()</span></pre><p id="afa9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在浏览器中发送交易的唯一区别是，我们将提供者改为我们的<code class="fe nv nw nx ny b">window.ethereum</code>，我们的<code class="fe nv nw nx ny b">wallet</code>现在将直接来自我们的<code class="fe nv nw nx ny b">provider</code>。因为我们的元掩码是<strong class="la iu">我们的提供者和钱包(或签名者),所以我们的代码看起来像这样。</strong></p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="2711" class="nh lx it ny b gy on oo l op oq">const etheres = require("ethers")</span><span id="2f5d" class="nh lx it ny b gy or oo l op oq">contractAddress = "0x5FbDB2315678afecb367f032d93F642f64180aa3";<br/>const abi = // some big javascript ABI here...</span><span id="1eff" class="nh lx it ny b gy or oo l op oq">const provider = new ethers.providers.Web3Provider(window.ethereum)<br/>const signer = provider.getSigner();</span><span id="cb83" class="nh lx it ny b gy or oo l op oq">const contract = new ethers.Contract(contractAddress, abi, signer)<br/>const contractWithSigner = contract.connect(wallet)<br/>const transactionResponse = contract.someFunction()</span></pre><p id="4d83" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您会注意到，只有中间的两行发生了变化，取而代之的是从<code class="fe nv nw nx ny b">window.ethereum</code>获取我们的钱包，我们的签名者来自我们的提供者(也就是metamask)。</p><p id="7520" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在这里有一个问题。我们的浏览器不能理解<code class="fe nv nw nx ny b">require</code>(有时<code class="fe nv nw nx ny b">import</code>有问题)，所以我们可以添加一些包来帮助我们。</p><p id="fc90" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为我不希望这篇文章变成一个关注前端的博客，所以我不会只让你看我的<a class="ae lu" href="https://github.com/PatrickAlphaC/html-js-ethers-connect/tree/7fd43da59ff0c6ba4cf2c3dae0395bc6b8df03ad" rel="noopener ugc nofollow" target="_blank"> html-js-ethers-connect </a>例子，它向我们展示了如何自己运行这个例子的其余部分。您只需要安装以下软件:</p><ul class=""><li id="40c0" class="mt mu it la b lb lc le lf lh mv ll mw lp mx lt ov mz na nb bi translated"><a class="ae lu" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="noopener ugc nofollow" target="_blank"> Git </a></li><li id="d6f1" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated"/><li id="ba32" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated"><a class="ae lu" href="https://classic.yarnpkg.com/lang/en/docs/install/" rel="noopener ugc nofollow" target="_blank">纱线</a></li><li id="9c28" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">和<a class="ae lu" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a></li></ul><p id="7409" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，您可以按照<a class="ae lu" href="https://github.com/PatrickAlphaC/html-js-ethers-connect" rel="noopener ugc nofollow" target="_blank"> README.md </a>中的说明进行设置，并使用纯HTML和JavaScript在浏览器中发送事务的完整示例！</p><p id="87cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">然后嘣！你将有一个工作的极简前端与你的智能合同！</strong></p><h1 id="f422" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">前5名最佳前端Web3设置</h1><p id="e19e" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">排名不分先后。这可能是它自己的博客…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/063421605011789516968b10f24ed229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aca3-7S5q5JSDpp-hH8T6Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">前5名前端Web3设置</p></figure><p id="27ac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们开始为您提供全栈应用所需的工具。对于这些设置，我将包括:</p><ol class=""><li id="d77e" class="mt mu it la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated">如何设置它们</li><li id="7001" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">简约的演示</li><li id="9caf" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">真实世界的例子</li></ol><p id="65c8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以你可以挑一个最适合你的！我们正在与<a class="ae lu" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJS </a>一起工作，因为<a class="ae lu" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> ReactJS </a>是目前地球上最流行的前端框架，NextJS是在它的基础上构建的，在我看来，它比原始ReactJS更加用户友好。然而，你可以100%与棱角分明，苗条，或其他。</p><p id="e6eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以找到我所有的极简代码示例<a class="ae lu" href="https://github.com/PatrickAlphaC/full-stack-web3-metamask-connectors" rel="noopener ugc nofollow" target="_blank">full-stack-web 3-meta mask-connectors</a>库，它链接到所有的演示。</p><h2 id="56fb" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">设置基本的NextJS项目</h2><p id="f43f" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">首先，所有这些项目都将从一个基本的nextJS项目开始。您需要安装<a class="ae lu" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">节点</a>、<a class="ae lu" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank"> Git </a>和<a class="ae lu" href="https://classic.yarnpkg.com/en/docs/cli/install/" rel="noopener ugc nofollow" target="_blank"> Yarn </a>才能向前移动。您还可以遵循<a class="ae lu" href="https://nextjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank"> nextjs入门文档</a>。</p><p id="5929" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行以下命令:</p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="0a15" class="nh lx it ny b gy on oo l op oq">yarn create next-app full-stack-web3<br/>cd full-stack-web3</span></pre><p id="073a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你完了！现在您已经有了一个基本的设置。你现在可以运行<code class="fe nv nw nx ny b">yarn dev</code>来看看你当前的网站会是什么样子。最后，删除所有的“东西”,进入你的<code class="fe nv nw nx ny b">index.js</code>文件，删除所有的东西，这样它就是:</p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="68be" class="nh lx it ny b gy on oo l op oq">export default function Home() {<br/>  return &lt;div&gt;Hi&lt;/div&gt;;<br/>}</span></pre><p id="9d9a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在你的前台只会说“嗨”</p><h2 id="2a99" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">建立当地的安全帽区块链和合同</h2><p id="1232" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">现在，由于我们将测试执行功能，我们将需要一个区块链来发送事务，以及一个智能契约来使用。我已经在我的<a class="ae lu" href="https://github.com/PatrickAlphaC/hardhat-simple-storage" rel="noopener ugc nofollow" target="_blank">hard hat-simple-storage GitHub</a>中为你设置了一个。要设置这个，你可以跟随<code class="fe nv nw nx ny b">README.md</code>或者在一个不同于运行你的前端的终端中运行下面的:</p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="77f4" class="nh lx it ny b gy on oo l op oq">git clone <a class="ae lu" href="https://github.com/PatrickAlphaC/hardhat-simple-storage" rel="noopener ugc nofollow" target="_blank">https://github.com/PatrickAlphaC/hardhat-simple-storage</a><br/>cd hardhat-simple-storage<br/>yarn<br/>yarn hardhat node</span></pre><p id="da0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将给你一个启动本地区块链的输出，给你一些临时的假私钥，并部署我们的<code class="fe nv nw nx ny b">SimpleStorage</code>契约，它有一个我们将要使用的<code class="fe nv nw nx ny b">store</code>函数。它接受一个<code class="fe nv nw nx ny b">uint256 _favoriteNumber</code>作为输入，并将这个数字存储到一个公共变量中。您可以在<code class="fe nv nw nx ny b">SimpleStorage.sol</code>文件中查看合同。</p><h2 id="74fa" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">使用我们当地的区块链设置元蒙版</h2><p id="3040" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">现在，我们要将元掩码连接到本地的假区块链。为什么？以便我们可以快速发送事务和测试。这就像一个真实的区块链，但这是我们可以控制的。如果你愿意，你可以使用testnet并跳过这一步，但是你将不得不等待很长时间来处理事务，这是没有人想要的。</p><p id="9e07" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在区块链节点运行的地方，您将看到类似于<code class="fe nv nw nx ny b">Started HTTP and WebSocket JSON-RPC server at <a class="ae lu" href="http://127.0.0.1:8545/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8545/</a></code>的输出。这将是我们的RPC网址类似炼金术。</p><p id="bd0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，在一个<strong class="la iu">元掩码中，没有任何实际资金与之相关联</strong>(请不要使用有实际资金的元掩码进行开发。创建一个新的浏览器配置文件或下载另一个带有元掩码的浏览器)点击顶部的网络按钮，然后“添加网络”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/31a1d78b756582fb2ca97e1bc0b7e24a.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*eJAES6wp7DpqBABoke_kkg.png"/></div></figure><p id="ba79" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如下图所示进行设置，然后点击保存。然后确保您切换到该网络(在网络下拉列表中选择它)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/fe5256febccffd50c08fbc3cc45275f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ehy6HtWJ1_abyzKuWgmSWw.png"/></div></div></figure><p id="2ff9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，点击右上角的大圆圈，然后点击“导入帐户”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/b6ec4804b9d6be899f3ff73b5e41efc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*93ZG439z4mEZALRygXZ3NA.png"/></div></figure><p id="95bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">并从<code class="fe nv nw nx ny b">yarn hardhat node</code>命令的输出中添加一个私钥。你现在应该有一个帐户，在本地网络上，并有一些假的测试ETH。您的元掩码应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/d51ea7f0d3fe36282900116376e4ff66.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*JTius79XWQ2RX2D-ou0Gag.png"/></div></figure><p id="63b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经准备好了:)</p><blockquote class="ob oc od"><p id="2617" class="ky kz oe la b lb lc ju ld le lf jx lg of li lj lk og lm ln lo oh lq lr ls lt im bi translated">重要提示:如果您遇到了<code class="fe nv nw nx ny b">nonce</code>关闭的问题，或者交易发送不正确。在您的metamask中，当您从hardhat导入的帐户被选中时，进入右上角的圆圈- &gt;设置- &gt;高级- &gt;重置帐户。这将消除随机数问题。</p></blockquote><h1 id="ff3c" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">粗醚设置</h1><p id="8db0" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated"><a class="ae lu" href="https://github.com/PatrickAlphaC/nextjs-ethers-metamask-connect" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻链接到我的完整代码在这里</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/6f96769444665596e8227c829151b2d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*kr0s2LOdXQ7b0zoFrg9Rtg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Ethers.js设置</p></figure><p id="0e7b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最简单的开始方法是使用一些你已经熟悉的工具，比如乙醚。我们可以将HTML设置中的内容复制粘贴到我们的<code class="fe nv nw nx ny b">index.js</code>文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="ccf3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为此，我们添加了一些额外的功能，以便在连接或用户没有元掩码时显示“请安装元掩码”或“已连接”。你还会看到像<code class="fe nv nw nx ny b">useState</code>和<code class="fe nv nw nx ny b">useEffect.</code>这样的命令，它们被称为React钩子，你可以从这个<a class="ae lu" href="https://www.youtube.com/watch?v=TNhaISOUy6Q" rel="noopener ugc nofollow" target="_blank"> Fireship视频</a>或<a class="ae lu" href="https://reactjs.org/docs/hooks-overview.html" rel="noopener ugc nofollow" target="_blank"> react文档中了解它们。虽然这个应用程序没有它们也能正常工作，但是我们不能在渲染之间保存应用程序的状态。</a></p><h2 id="3845" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">优点:</h2><ul class=""><li id="3015" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">使用以太网对用户界面进行最精细的控制</li></ul><p id="91a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">缺点:</strong></p><ul class=""><li id="3b17" class="mt mu it la b lb lc le lf lh mv ll mw lp mx lt ov mz na nb bi translated">我们必须写很多自己的代码，包括<a class="ae lu" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">上下文</a>。</li><li id="ef7c" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">除了元掩码连接之外，很难支持其他连接方式(是的，还有其他连接钱包的方式！)</li></ul><h2 id="a30d" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">真实世界的例子</h2><p id="82a2" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated"><a class="ae lu" href="https://dev.to/dabit3/the-complete-guide-to-full-stack-ethereum-development-3j13" rel="noopener ugc nofollow" target="_blank">纳德·达比特解说者</a></p><p id="9267" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，在未来的例子中，我将从另一个文件导入<code class="fe nv nw nx ny b">abi</code>，这样就不会阻塞文章。</p><h1 id="b8b6" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">Setup模式设置</h1><p id="b20b" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated"><a class="ae lu" href="https://github.com/PatrickAlphaC/nextjs-ethers-metamask-connect" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻链接到我的完整代码在这里</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/f9522070673462b1186b97b1fa5dab6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*Wayo87mPNbz1R0aVPBw_Gw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae lu" href="https://walletconnect.com/" rel="noopener ugc nofollow" target="_blank"> WalletConnect </a>标志</p></figure><p id="133d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将EVM的区块链应用程序与钱包连接起来的另一种最流行的方式是使用Walletconnect。我将要展示的所有例子(包括原始的Ethers)都可以连接到Walletconnect(并且应该！)，所以我们的Web3Modal设置并不是唯一可以做到这一点的<em class="oe"/>。钱包连接团队的成员创造的一个奇妙的工具是这个<a class="ae lu" href="https://github.com/Web3Modal/web3modal" rel="noopener ugc nofollow" target="_blank">web 3 mode</a>工具，它允许我们有一个框架来连接到任何提供商，包括<a class="ae lu" href="https://www.ledger.com/" rel="noopener ugc nofollow" target="_blank"> Ledger </a>、wallet connect、<a class="ae lu" href="https://app.tor.us/" rel="noopener ugc nofollow" target="_blank"> Torus </a>、<a class="ae lu" href="https://www.coinbase.com/wallet" rel="noopener ugc nofollow" target="_blank">比特币基地钱包</a>等等！</p><p id="c26f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们只需要导入包，我们的<code class="fe nv nw nx ny b">index.js</code>可能看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="2b8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会看到，我们设置了一些<code class="fe nv nw nx ny b">providerOptions</code>来告诉我们的前端我们想要支持哪些钱包，以及我们想要支持哪些连锁店。我们需要设置一个指向另一个RPC_URL的<code class="fe nv nw nx ny b">NEXT_PUBLIC_RPC_URL</code>来连接一个区块链。如果我们使用walletconnect，我们实际上<em class="oe">不会</em>使用用户元掩码的内置区块链节点。</p><h2 id="5345" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">赞成的意见</h2><ul class=""><li id="d3ff" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">易于集成多个钱包</li><li id="c44b" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">乙醚很好</li></ul><h2 id="71ff" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">骗局</h2><ul class=""><li id="21e1" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">仍然没有内置的上下文</li></ul><h2 id="d771" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">真实世界的例子</h2><ul class=""><li id="71ad" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/ChangoMan/web3modal-example" rel="noopener ugc nofollow" target="_blank">web 3 mode-示例</a></li><li id="1c74" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/scaffold-eth/scaffold-eth" rel="noopener ugc nofollow" target="_blank">脚手架-ETH </a></li><li id="9f68" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/paulrberg/create-eth-app" rel="noopener ugc nofollow" target="_blank"> create-eth-app </a></li></ul><p id="498d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想看看Web3Modal、区块链等的前沿前端应用，一定要去看看Scaffold-ETH。这是奥斯汀·格里菲斯<a class="ae lu" href="https://austingriffith.com/" rel="noopener ugc nofollow" target="_blank">的一个神奇的学习工具，你可以用它来解构一些最佳实践。</a></p><h1 id="ad95" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">道德</h1><p id="40fa" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated"><a class="ae lu" href="https://github.com/PatrickAlphaC/nextjs-moralis-metamask-connect" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻链接到我的完整代码在这里</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/dce1cfebfd6c8fa44aee1805046183f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*Kxgdac7cV3_ii4xR71ceIA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae lu" href="https://moralis.io/" rel="noopener ugc nofollow" target="_blank">道德家</a>标志</p></figure><p id="3476" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，Moralis(或者更具体地说，<a class="ae lu" href="https://github.com/MoralisWeb3/react-moralis" rel="noopener ugc nofollow" target="_blank"> react-moralis </a>)是第一个包含上下文管理器的包，这非常有用。它们允许我们的整个应用程序在组件之间轻松共享状态，这是必要的，因为我们需要传递元掩码授权。</p><p id="e5fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Moralis是由Ivan on Tech和团队创建的，不仅可以帮助开发人员连接到Metamask，还可以帮助全栈应用程序可能需要的任何其他后端系统。以太扫描和<a class="ae lu" href="https://opensea.io/" rel="noopener ugc nofollow" target="_blank"> Opensea </a>都是仍然需要后端和数据库的web3应用程序的例子。为什么？因为你经常想增加大量的功能，这将花费太多的汽油来做链上的事情！</p><p id="a530" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，你仍然希望让你的智能合同做所有的主要工作，但道德可以做围绕它的所有工作。以下是我们的道德准则代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="5a26" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你将会看到Moralis提供了像<code class="fe nv nw nx ny b">useWeb3Contract</code>这样强大的钩子，使得获得状态和与我们的契约交互更加容易，并且不需要以太！代替我们编写自己的<code class="fe nv nw nx ny b">connect</code>函数，Moralis附带了一个函数来为我们和<code class="fe nv nw nx ny b">enableWeb3</code>做同样的事情。</p><p id="6f85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，在我们的<code class="fe nv nw nx ny b">_app.js</code>中，我们需要用上下文提供者包装整个应用，我们可以这样做:</p><pre class="kj kk kl km gt oj ny ok ol aw om bi"><span id="cf3a" class="nh lx it ny b gy on oo l op oq">import "../styles/globals.css";<br/>import { MoralisProvider } from "react-moralis";</span><span id="c14f" class="nh lx it ny b gy or oo l op oq">function MyApp({ Component, pageProps }) {<br/>  return (<br/>    &lt;MoralisProvider initializeOnMount={false}&gt;<br/>      &lt;Component {...pageProps} /&gt;<br/>    &lt;/MoralisProvider&gt;<br/>  );<br/>}</span><span id="7e08" class="nh lx it ny b gy or oo l op oq">export default MyApp;</span></pre><p id="c545" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Morlais有内置的选项来设置你的前端数据库，但是，如果你只是想使用钩子和函数，你可以设置<code class="fe nv nw nx ny b">initializeOnMount</code>为假，只设置一个服务器，如果你想在未来！</p><h2 id="c0b8" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">赞成的意见</h2><ul class=""><li id="ee6e" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">上下文提供者</li><li id="256c" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">用于与智能合约交互的极简内置功能</li><li id="731e" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">包含后端的可选性，以实现功能更加丰富的前端</li></ul><h2 id="1fef" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">骗局</h2><ul class=""><li id="6a2d" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">必须手动添加您自己的钱包</li></ul><h2 id="afa5" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">真实世界的例子</h2><ul class=""><li id="d468" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/ethereum-boilerplate/ethereum-boilerplate" rel="noopener ugc nofollow" target="_blank">以太坊样板</a></li></ul><h1 id="4c05" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">web 3-反应</h1><p id="efd8" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated"><a class="ae lu" href="https://github.com/PatrickAlphaC/nextjs-web3-react-metamask-connect/tree/e9fd7e1c1f78441bc25347c37f581170aab14c40" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻链接到我的完整代码在这里</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/326cc9daa8ccc1c9da0eb1d033347d19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*75gbINvXIHqGHINJFwugjQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae lu" href="https://uniswap.org/" rel="noopener ugc nofollow" target="_blank"> Uniswap </a>标志</p></figure><p id="48b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Uniswap工程负责人Noah Zinsmeister和他的朋友们已经开发了一个惊人的包，叫做web3-react。这是像<a class="ae lu" href="https://uniswap.org/" rel="noopener ugc nofollow" target="_blank"> Uniswap </a>、<a class="ae lu" href="https://aave.com/" rel="noopener ugc nofollow" target="_blank"> Aave </a>和<a class="ae lu" href="https://compound.finance/" rel="noopener ugc nofollow" target="_blank"> Compound </a>这样的顶级项目使用最广泛的软件包之一。它还包含一个上下文管理器和一些非常强大的挂钩，让您可以开始使用，以及一些web3 wallet内置连接。</p><p id="fcba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是你的<code class="fe nv nw nx ny b">index.js</code>可能的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="9729" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有我们的<code class="fe nv nw nx ny b">_app.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="2211" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你所看到的，我们仍然使用ethers来与我们的智能合约交互，但是我们使用hooks来启用我们的元掩码和任何其他我们想要的钱包提供者！</p><h2 id="2bb4" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">赞成的意见</h2><ul class=""><li id="3102" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">上下文提供者</li><li id="d58a" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">用于与智能合约交互的极简内置功能</li><li id="40e3" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">内置钱包连接</li></ul><h2 id="9554" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">骗局</h2><ul class=""><li id="f599" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">不像web3modal那样简单的钱包设置</li><li id="cf04" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">需要编写或使用您自己的钩子来与您的智能合约交互。</li></ul><h2 id="b5a7" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">真实世界的例子</h2><ul class=""><li id="4f52" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/NoahZinsmeister/web3-react/tree/main/packages/example" rel="noopener ugc nofollow" target="_blank"> Web3 React示例</a></li><li id="198b" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/aave/aave-ui" rel="noopener ugc nofollow" target="_blank"> Aave </a></li><li id="21d9" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/Uniswap/interface" rel="noopener ugc nofollow" target="_blank"> Uniswap </a></li></ul><h1 id="7225" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">useDapp</h1><p id="1ce5" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated"><a class="ae lu" href="https://github.com/PatrickAlphaC/nextjs-usedapp-metamask-connect" rel="noopener ugc nofollow" target="_blank"> 🧑‍💻链接到我的完整代码在这里</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/2ff77d7f6bfe217c6df17c2ad44ca74d.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*6gH6elAaJzD2BYMHC4Lvrg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae lu" href="https://ethworks.io/" rel="noopener ugc nofollow" target="_blank"> Ethworks </a>标志</p></figure><p id="3cc2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Ethworks是像<a class="ae lu" href="https://github.com/EthWorks/Waffle" rel="noopener ugc nofollow" target="_blank"> waffle </a>这样的流行工具背后的团队，waffle是最流行的测试框架之一，甚至被<a class="ae lu" href="https://hardhat.org/" rel="noopener ugc nofollow" target="_blank"> hardhat </a>使用。他们又做了一次，做了一个类似于moralis的框架，带有所有用于构建前端的钩子和工具，还包括一个上下文提供者。</p><p id="ff17" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是我们的<code class="fe nv nw nx ny b">index.js</code>可能的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="57fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有我们的<code class="fe nv nw nx ny b">_app.js</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="c0f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们向我们的应用程序传递一个配置，该配置可以包括支持的区块链和其他连接特性。类似于Moralis，<code class="fe nv nw nx ny b">useDapp</code>带有激活元掩码/浏览器钱包的功能<code class="fe nv nw nx ny b">activateBrowserWallet</code>和类似<code class="fe nv nw nx ny b">useContractFunction</code>的挂钩来与我们的智能合约交互(你不必使用ethers！).</p><h2 id="f02c" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">赞成的意见</h2><ul class=""><li id="4212" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">上下文提供者</li><li id="fc20" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">用于与智能合约交互的极简内置功能</li></ul><h2 id="ac9c" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">骗局</h2><ul class=""><li id="b06c" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated">不像web3modal那样简单的钱包设置</li><li id="00fa" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt ov mz na nb bi translated">内置数据库没有可选性</li></ul><h2 id="f82a" class="nh lx it bd ly ni nj dn mc nk nl dp mg lh nm nn mi ll no np mk lp nq nr mm ns bi translated">真实世界的例子</h2><ul class=""><li id="3c53" class="mt mu it la b lb mo le mp lh pb ll pc lp pd lt ov mz na nb bi translated"><a class="ae lu" href="https://github.com/PatrickAlphaC/defi-stake-yield-brownie" rel="noopener ugc nofollow" target="_blank">defi-stake-yield-brownie</a></li></ul><h1 id="a5f5" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">摘要</h1><p id="d933" class="pw-post-body-paragraph ky kz it la b lb mo ju ld le mp jx lg lh mq lj lk ll mr ln lo lp ms lr ls lt im bi translated">我知道这是一个漫长的过程，但这就是我所做的，我确保浏览所有内容，并确保我知道发生了什么，以便为您提供该领域最好的指南。</p><p id="99d4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">编码快乐！</p></div></div>    
</body>
</html>