<html>
<head>
<title>How to Add a Cool Circular Motion Animation in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Swift中添加一个很酷的圆周运动动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-cool-circular-motion-animation-in-swift-96add6fce98d?source=collection_archive---------6-----------------------#2020-05-04">https://betterprogramming.pub/a-cool-circular-motion-animation-in-swift-96add6fce98d?source=collection_archive---------6-----------------------#2020-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6651" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用CAKeyframeAnimation和UIBezierPath</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/10f43c409d98c544f908668d6e6f0545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nhlHnZzX1Oh9JBtrjnivuA.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在大圆的边界上移动的小圆</p></figure><p id="af89" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你在上面看到的是我们将要一起建造的东西。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="dc77" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">起始代码</h1><p id="e42d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">下载下面的代码并跟随。代码包含一个简单的设置，故事板中有一个<code class="fe mv mw mx my b">UIView</code>和一个启动动画的按钮。</p><div class="mz na gp gr nb nc"><a href="https://github.com/akshitzaveri/CircleBorderAnimation/tree/8cfd3ed00994f20dc19850171248ad2269a7cb7b" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">akshitzaveri/CircleBorderAnimation</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">在GitHub上创建一个帐户，为akshitzaveri/CircleBorderAnimation的开发做出贡献。</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq kp nc"/></div></div></a></div></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="8cb1" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">我们将要做的事情的要点</h1><p id="be5d" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">我们将创建一个自定义的<code class="fe mv mw mx my b">UIView</code>类，它将负责显示这两个圆圈，并负责动画。然后，我们将使用相同的自定义<code class="fe mv mw mx my b">UIView</code>与故事板，当用户点击开始按钮，我们将运行动画。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="e185" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">创建自定义UIView</h1><p id="1f8b" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">让我们创建一个名为<code class="fe mv mw mx my b">AnimatableCircleView</code>的自定义<code class="fe mv mw mx my b">UIView</code>。我们将在全新的视图中添加最低限度的内容。注意，我们甚至还没有添加<code class="fe mv mw mx my b">init(frame:)</code>。那是因为我们不需要。此外，我们不打算使用<code class="fe mv mw mx my b">.xib</code>文件。它将全部是纯代码——相信我，你会喜欢它的！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">AnimatableCircleView.swift</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="c6d5" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">在Main.storyboard中更改类</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3bea640562747779f3ad38f7ed622b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*bb1nGn1Cc4mxE7LO26ZXvQ.png"/></div></figure><ol class=""><li id="58c6" class="nu nv iq kx b ky kz lb lc le nw li nx lm ny lq nz oa ob oc bi translated">选择居中视图。</li><li id="d1ac" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">在类字段中输入<code class="fe mv mw mx my b">AnimatableCircleView</code> <strong class="kx ir"> </strong>并按回车键。</li></ol></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="0552" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">在ViewController中更改类</h1><p id="a853" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">替换以下行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="1041" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="9a34" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">在我们的自定义视图中创建视图</h1><p id="0d6a" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">在我们的<code class="fe mv mw mx my b">AnimatableCircleView.swift</code>中添加<strong class="kx ir">下面的代码</strong>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="57ce" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你是第一次看到<code class="fe mv mw mx my b">lazy var</code>或者<code class="fe mv mw mx my b">UIView</code>的编程声明，不要害怕，这很简单。我们使用<code class="fe mv mw mx my b">lazy var</code> <strong class="kx ir"> </strong>和<strong class="kx ir"/><code class="fe mv mw mx my b">{}() block</code><strong class="kx ir"/>是因为我们希望代码在第一次被访问时运行，并且只运行一次。我们不希望每次访问<code class="fe mv mw mx my b"> circleView</code>时都创建一个新的<code class="fe mv mw mx my b">UIView</code>对象，不是吗？</p><p id="03fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您对<code class="fe mv mw mx my b">lazy var</code>有任何疑问，请点击下面的链接:</p><div class="mz na gp gr nb nc"><a href="https://stackoverflow.com/a/40694805/2859764" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">Swift中惰性var的优势是什么</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">stackoverflow.com</p></div></div><div class="nl l"><div class="oi l nn no np nl nq kp nc"/></div></div></a></div></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="8059" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">使视图呈圆形</h1><p id="0700" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">在<code class="fe mv mw mx my b">AnimatableCircleView.swift</code>中添加以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="8374" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">添加视图</h1><p id="2211" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">如果您现在运行项目，您将不会在屏幕上看到视图。这是因为我们还没有将它们添加到视图中。让我们在<code class="fe mv mw mx my b">setup()</code>中添加一些代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="fe9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于我们走的是编程路线，我们也必须添加约束。请注意，我们没有对<code class="fe mv mw mx my b">miniCircleView</code>的位置添加任何约束(前导、顶部、尾部、底部)。那是故意的。无论如何我们都要把它做成动画。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="10b8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在运行项目。你应该能看到两个圆圈。耶！成功了一半。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="8a9a" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">计算动画路径</h1><p id="45a5" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">在我们的<code class="fe mv mw mx my b">AnimatableCircleView.swift</code>中添加以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="16f7" class="oj lz iq bd ma ok ol dn me om on dp mi le oo op mk li oq or mm lm os ot mo ou bi translated">代码解释</h2><ol class=""><li id="97d5" class="nu nv iq kx b ky mq lb mr le ov li ow lm ox lq nz oa ob oc bi translated">它正在创造<code class="fe mv mw mx my b">UIBezierPath</code>。我们将预先计算出<code class="fe mv mw mx my b">miniCircleView</code>将要动画通过的整个路径，并将它存储在路径中。</li><li id="3f67" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">它从动画应该开始的地方获取初始点。稍后，我们将看到<code class="fe mv mw mx my b">getPoint(for:)</code>的作用。</li><li id="9b4d" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们希望<code class="fe mv mw mx my b">miniCircleView</code>通过大圆的整个边界来产生动画效果，因此我们要通过1到360度。请注意，我们已经忽略了0度位置，因为我们已经在步骤2中用0度设置了一个初始点。</li><li id="0b39" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们通过闭合路径，在路径的最后一条线(360度)和初始点(0度)之间建立连接。</li><li id="55fc" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们要求<code class="fe mv mw mx my b">animate(view: path:)</code>函数为给定的预先计算的路径激活我们的视图。</li></ol><p id="8ae6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很简单，不是吗？</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="9fb2" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">getPoint(for:)在做什么？</h1><p id="1745" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">先补充一下<code class="fe mv mw mx my b">getPoint(for:)</code>方法再讲。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="4f61" class="oj lz iq bd ma ok ol dn me om on dp mi le oo op mk li oq or mm lm os ot mo ou bi translated">代码解释</h2><ol class=""><li id="58f7" class="nu nv iq kx b ky mq lb mr le ov li ow lm ox lq nz oa ob oc bi translated">我们正在获取大圆的半径。</li><li id="9a44" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们正在把角度从度数转换成弧度。</li><li id="94cb" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">这是黄金部分。我们正在计算圆的边界上的点。如果你想了解背后的数学原理，那就看下面的视频吧。这很容易理解。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oy ns l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="bbf7" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">添加真实的动画</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="5078" class="oj lz iq bd ma ok ol dn me om on dp mi le oo op mk li oq or mm lm os ot mo ou bi translated">代码解释</h2><ol class=""><li id="4661" class="nu nv iq kx b ky mq lb mr le ov li ow lm ox lq nz oa ob oc bi translated">我们正在创建<code class="fe mv mw mx my b"><a class="ae oz" href="https://developer.apple.com/documentation/quartzcore/cakeyframeanimation" rel="noopener ugc nofollow" target="_blank">CAKeyframeAnimation</a></code>实例。</li><li id="2f94" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们将告诉动画我们之前预计算的贝塞尔路径。</li><li id="0c46" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们希望动画只运行一次。提示:如果你想永远运行它，那么使用<code class="fe mv mw mx my b">.greatestFiniteMagnitude</code>。</li><li id="d573" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们希望每个动画循环的持续时间为五秒钟。因此，如果我们有<code class="fe mv mw mx my b">repeatCount = 10</code>，那么我们的总持续时间将是50秒。</li><li id="45b6" class="nu nv iq kx b ky od lb oe le of li og lm oh lq nz oa ob oc bi translated">我们用一个键将动画添加到视图的层，这样我们以后就可以获取动画并在需要时移除它。</li></ol></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="85b0" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">开始播放动画</h1><p id="5923" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">用以下代码更新我们的<code class="fe mv mw mx my b">ViewController</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="41ac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，运行项目并点击开始按钮。你发现什么问题了吗？迷你圈是动画，但它走上了错误的道路，不是我们想要的。让我们看看这是为什么。</p><p id="935a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你不能解决问题，那就继续读下去。问题在于<code class="fe mv mw mx my b">UIView</code>的坐标系和我们数学所基于的圆的坐标系。如下图所示，坐标系从中心开始，而我们的<code class="fe mv mw mx my b">UIView</code>的坐标系从左上方开始(下图二)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/c16454e3c1a42271a7858caf01a28ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M7WcONmDecAKCCRLGPBojw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">圆的坐标系</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/befec83f4372c51385af8b8db1ca43f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XGNR3NkkU3l7xpg_pW3RjQ.png"/></div></div></figure><p id="7ddd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们如何弥合这一差距？简单:我们将这两点之间的差加到我们在<code class="fe mv mw mx my b">getPoint(for:)</code>方法中进行的<code class="fe mv mw mx my b">centerX</code>、<code class="fe mv mw mx my b">centerY</code>计算中。根据上面的圆图，差值总是等于半径。因此，我们通过给每个计算增加一个半径来更新下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="27cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在运行项目，并点击开始按钮。您应该会看到它沿着正确的路径移动。万岁！但是你会注意到小圆圈是从右边开始的。如果我们想将初始位置设置为顶部呢？</p><p id="f310" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们要用一点小技巧。随着坐标系的差异增加，我们的虚拟0度圆向右侧移动。一个简单的技巧是从-90度开始。然后，为了完成动画，我们将做360–90 = 270度。现在，将<code class="fe mv mw mx my b">startAnimating()</code>中的代码更新如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="478b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">再次运行应用程序。它应该从顶部开始，并通过整个路径动画。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="fcae" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">停止跳迷你圈</h1><p id="83cc" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">我们很接近了，快完成了。唯一烦躁的是动画结束后的迷你圈跳跃。我们可以通过设置小圆圈视图的初始位置来避免这一点，这也将解决应用程序运行时小圆圈位于(0，0)位置的问题。</p><p id="24b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将下面的代码添加到<code class="fe mv mw mx my b">AnimatableCircleView.swift</code>的<code class="fe mv mw mx my b">layoutSubviews()</code>中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="5cb5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你再次运行这个项目，你应该能够看到我们为之努力的完美动画。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85d2c4e5f987a939ce7d219ca5134087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vbxPZ6d3zaxTLbujbkuLUw.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终输出</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="36e4" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">下载最终代码</h1><p id="52ba" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">你可以从GitHub下载<a class="ae oz" href="https://github.com/akshitzaveri/CircleBorderAnimation" rel="noopener ugc nofollow" target="_blank">最终代码</a>。</p><p id="53d1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢您的阅读。如果你知道一个更好的方法来实现同样的动画，或者你认为如果代码可以改进，那么请不要犹豫，取得联系。</p></div></div>    
</body>
</html>