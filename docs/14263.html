<html>
<head>
<title>Link Route53 Domain to CloudFront Distribution With AWS SAM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS SAM将Route53域链接到CloudFront发行版</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/link-route53-domain-to-cloudfront-distribution-with-aws-sam-47f3b05afbe0?source=collection_archive---------10-----------------------#2022-11-22">https://betterprogramming.pub/link-route53-domain-to-cloudfront-distribution-with-aws-sam-47f3b05afbe0?source=collection_archive---------10-----------------------#2022-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="14cd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这一惊人功能的深入指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1a044e94d6d85fc4e606febe66aa8767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBWCdhX_tpHyesB39dasGg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://shahneil.medium.com/" rel="noopener"> Neil Shah </a>使用Canva Pro创建</p></figure><p id="721e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了AWS上典型的无服务器堆栈。Route53是DNS提供商，CloudFront是边缘分发，API Gateway公开了符合HTTPS/CORS的API，Lambda处理后端逻辑，DynamoDB处理存储。这个无服务器堆栈是可扩展的，可以完全用<a class="ae ky" href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html" rel="noopener ugc nofollow" target="_blank"> AWS SAM </a>编码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/afd5559dc538b5d885f5f1b0748c79b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GoxaY5bEZeyNqvmT48Pw1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS无服务器堆栈</p></figure><p id="2f12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文展示了如何使用SAM模板将Route53域链接到现有的CloudFront发行版。我不负责在Route53上购买域名。参见<a class="ae ky" href="https://seed.run/blog/how-to-buy-a-domain-name-on-amazon-route-53-for-my-serverless-api.html" rel="noopener ugc nofollow" target="_blank">本指南</a>了解更多相关信息。</p><h1 id="e538" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第一步—先决条件</h1><p id="fc5e" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">一旦您拥有了一个域，第一步就是让它解析一个现有的CloudFront发行版。</p><p id="875c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS文档(总是一个好的起点！)这样建议道:</p><blockquote class="mt mu mv"><p id="7320" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">如果您想使用自己的域名，使用Amazon Route 53创建一个指向您的<a class="ae ky" href="http://127.0.0.1:8080/#CloudFront" rel="noopener ugc nofollow" target="_blank"> CloudFront </a>发行版<em class="it">的别名记录。</em></p></blockquote><p id="c642" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">别名记录类似于其他DNS记录类型(例如，像<a class="ae ky" href="https://en.wikipedia.org/wiki/CNAME_record" rel="noopener ugc nofollow" target="_blank"> CNAME </a>)，但是它对于Route53是唯一的。其他标准DNS提供商不提供别名记录类型。</p><p id="b251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">来自<a class="ae ky" href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-choosing-alias-non-alias.html" rel="noopener ugc nofollow" target="_blank">AWS文件</a>:</p><blockquote class="mt mu mv"><p id="60ab" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">别名记录是DNS的路由53扩展。</p><p id="c378" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">别名记录让您可以将流量路由到选定的AWS资源，如<a class="ae ky" href="http://127.0.0.1:8080/#CloudFront" rel="noopener ugc nofollow" target="_blank"> CloudFront </a>发行版和亚马逊S3桶。</p><p id="ddd3" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">与CNAME记录不同，您可以在DNS名称空间的顶层节点(也称为区域顶点)创建别名记录。例如，如果您注册DNS名称example.com，区域顶点是example.com。</p></blockquote><p id="46ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个先决条件列表准确地指定了将域名链接到CloudFront所需的信息:</p><h2 id="bcec" class="na lx it bd ly nb nc dn mc nd ne dp mg li nf ng mi lm nh ni mk lq nj nk mm nl bi translated">先决条件</h2><ol class=""><li id="35db" class="nm nn it lb b lc mo lf mp li no lm np lq nq lu nr ns nt nu bi translated">注册的域名。您可以使用Amazon Route53作为您的域名注册商，也可以使用不同的注册商</li><li id="4852" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">Route53必须是该域的DNS服务。如果域名注册到Route53，它将自动配置为该域的DNS服务</li><li id="8047" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">一个CloudFront发行版，它有一个与预期域名相匹配的备用域名</li></ol><p id="ced2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果域是在Route53上购买的，则满足前两个先决条件。</p><p id="b505" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三个先决条件是更新CloudFront分发备用域名设置。要了解如何在SAM模板中做到这一点，<a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudfront-distribution.html" rel="noopener ugc nofollow" target="_blank"> CloudFront分发模板文档</a>很有帮助。似乎<a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudfront-distribution-distributionconfig.html" rel="noopener ugc nofollow" target="_blank"> DistributionConfig </a>属性支持使用别名属性设置备用域名，描述如下:</p><blockquote class="mt mu mv"><p id="bd39" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">一种复杂类型，包含有关此分发的CNAMEs(备用域名)的信息(如果有)。</p></blockquote><p id="0cb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是在SAM模板的CloudFront Distribution部分的DistributionConfig部分下添加别名记录的SAM模板格式:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="7ad9" class="na lx it ob b gy of og l oh oi">Aliases:<br/>  - superWebHacker.org</span></pre><h1 id="aaaf" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第二步—创建Route53记录</h1><p id="a9ad" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">三个先决条件完成后，接下来的一些步骤，同样来自<a class="ae ky" href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-cloudfront-distribution.html" rel="noopener ugc nofollow" target="_blank">的AWS文档</a>，展示了如何使用AWS用户界面链接域。因为我们的目标是在SAM模板中实现这一点，所以必须将UI指导转换为SAM模板配置中的等效操作。</p><p id="3be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，它要求检查目标Cloudfront发行版是否支持IPv6。这可以在CloudFront发行版设置中看到。例如，如果启用了IPV6，它看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/846ddbb27094e754d0df7209c27b3fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*83zQZkYry15ovAN_Yp1sOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS CloudFront分发设置UI</p></figure><p id="6f3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，指南建议使用以下值创建新的Route53记录(一个用于IPV4，一个用于IPV6，如果启用了IPV6 ):</p><ol class=""><li id="8e6b" class="nm nn it lb b lc ld lf lg li ok lm ol lq om lu nr ns nt nu bi translated">路由策略<br/>因为我有一个为网站服务的web服务器，所以我可以使用简单路由策略，这是应用SAM模板时的默认值。</li><li id="081b" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">记录名称:输入您想要用来将流量路由到您的CloudFront发行版的域名</li><li id="a18e" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">价值/路由流量到<br/>在此选择“CloudFront分发的别名”和域名</li><li id="6908" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">第一条记录中的记录类型<br/> A(用于IPv4 ),第二条记录中的记录类型为AAAA(对应于IPv6)</li></ol><p id="a627" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在AWS SAM中实现这一点，我发现<a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-route53-recordsetgroup.html" rel="noopener ugc nofollow" target="_blank"> RecordSetGroup </a>可以方便地为给定的Route53托管区域启用多个记录。</p><p id="f640" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在AWS Sam模板中实现<code class="fe on oo op ob b">RecordSetGroup</code>，UI指令必须映射到AWS SAM模板值。</p><p id="a3f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是从UI指令到SAM模板<code class="fe on oo op ob b">AWS::Route53::RecordSetGroup</code>配置的映射</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS UI值到AWS SAM模板配置的映射</p></figure><p id="85c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要又容易错过！:在<code class="fe on oo op ob b">HostedZoneId</code>下的<code class="fe on oo op ob b">AliasTarget</code>值是一个静态值。参见<a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-route53-aliastarget-1.html" rel="noopener ugc nofollow" target="_blank">此处的文档</a>:</p><blockquote class="mt mu mv"><p id="0795" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">指定<code class="fe on oo op ob b">Z2FDTNDATAQYW2</code>。当您创建将流量路由到<a class="ae ky" href="http://127.0.0.1:8080/#CloudFront" rel="noopener ugc nofollow" target="_blank"> CloudFront </a>分发的别名记录时，这始终是托管区域ID。</p></blockquote><p id="5dc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我第一次尝试配置SAM记录集组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="3826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应用此配置时，您可能会看到一个错误:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2ea8" class="na lx it ob b gy of og l oh oi">message: “”Invalid request provided: To add an alternate domain name (CNAME) to a <a class="ae ky" href="http://127.0.0.1:8080/#CloudFront" rel="noopener ugc nofollow" target="_blank">CloudFront</a> distribution, you must attach a trusted certificate that validates your authorization to use the domain name. For more details, see: <a class="ae ky" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html#alternate-domain-names-requirements" rel="noopener ugc nofollow" target="_blank">https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html#alternate-domain-names-requirements</a> (Service: <a class="ae ky" href="http://127.0.0.1:8080/#CloudFront" rel="noopener ugc nofollow" target="_blank">CloudFront</a>, Status Code: 400, Request ID: 7ed1586f-f604–4083–9448–850cb45ebf3b)” (<a class="ae ky" href="http://127.0.0.1:8080/#RequestToken" rel="noopener ugc nofollow" target="_blank">RequestToken</a>: e6875d48–2515-a6f3–92f7–7ebd0b1b5d31, <a class="ae ky" href="http://127.0.0.1:8080/#HandlerErrorCode" rel="noopener ugc nofollow" target="_blank">HandlerErrorCode</a>: <a class="ae ky" href="http://127.0.0.1:8080/#InvalidRequest" rel="noopener ugc nofollow" target="_blank">InvalidRequest</a>)”</span></pre><p id="f8f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的，这个错误直接引用了文档<a class="ae ky" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html#alternate-domain-names-requirements" rel="noopener ugc nofollow" target="_blank">中的</a>,它说:</p><blockquote class="mt mu mv"><p id="04e7" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">备用域名必须由有效的SSL/TLS证书覆盖</p></blockquote><p id="cb70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哦，对了，SSL需要一个证书，这个证书还没有创建，这就把我们带到了第三步。</p><h1 id="e0e2" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第三步—创建SSL证书</h1><p id="478f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><code class="fe on oo op ob b"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-certificatemanager-certificate.html" rel="noopener ugc nofollow" target="_blank">CertificateManager::Certificate</a></code> SAM类型可用于创建SSL证书。证书可以附加到SAM模板CloudFront配置中。</p><p id="1070" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方便的是，AWS自动处理证书DNS验证(仅当以下条件成立时):</p><ol class=""><li id="68ba" class="nm nn it lb b lc ld lf lg li ok lm ol lq om lu nr ns nt nu bi translated">证书域托管在Amazon Route53中</li><li id="36eb" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">该域位于我的AWS帐户中</li><li id="0769" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">Cert是为DNS验证配置的(与电子邮件验证或其他方法相反)</li></ol><p id="2dc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是完整的SSL证书配置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><h1 id="d24e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">第四步—将SSL证书附加到CloudFront发行版</h1><p id="3724" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在可以通过SAM <a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudfront-distribution-distributionconfig.html" rel="noopener ugc nofollow" target="_blank"> DistributionConfig </a>类型将证书附加到<code class="fe on oo op ob b"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudfront-distribution.html" rel="noopener ugc nofollow" target="_blank">AWS::CloudFront::Distribution</a></code>上。</p><p id="1c6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据文档，<code class="fe on oo op ob b">ViewerCertificate</code>是添加它的地方。<code class="fe on oo op ob b">ViewerCertificate</code>是:</p><blockquote class="mt mu mv"><p id="91ab" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">一种复杂类型，用于确定分发的SSL/TLS配置，以便与查看器进行通信。</p></blockquote><p id="0a18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，它还说:</p><blockquote class="mt mu mv"><p id="8ad2" class="kz la mw lb b lc ld ju le lf lg jx lh mx lj lk ll my ln lo lp mz lr ls lt lu im bi translated">如果分发使用别名(备用域名或CNAMEs)，请使用此类型中的字段指定以下设置:</p></blockquote><ol class=""><li id="0925" class="nm nn it lb b lc ld lf lg li ok lm ol lq om lu nr ns nt nu bi translated">建议将SSLSupportMethod设置为<code class="fe on oo op ob b">sni-only</code></li><li id="e5f5" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">SSL/TLS证书的位置，即<code class="fe on oo op ob b">ACMCertificateArn</code></li></ol><p id="b66f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于<code class="fe on oo op ob b">ACMCertificateArn</code>，需要AWS ARN证书。<a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-certificatemanager-certificate.html#cfn-certificatemanager-certificate-certificateauthorityarn" rel="noopener ugc nofollow" target="_blank">AWS文档</a>称从引用ARN的<code class="fe on oo op ob b">AWS::CertificateManager::Certificate</code>类型自动导出一个<code class="fe on oo op ob b">Ref</code>值。</p><p id="8f1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html" rel="noopener ugc nofollow" target="_blank">参考文档</a>中，我可以看到使用它的语法很简单:<code class="fe on oo op ob b">!Ref logicalName</code></p><p id="34e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是来自<code class="fe on oo op ob b">AWS::CloudFront::Distribution</code>配置的片段(注意DNS证书的<code class="fe on oo op ob b">!Ref</code>)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="7bd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">证书DNS验证是动态完成的，这很好，因此它也同时附加到了CloudFront发行版中。</p><h1 id="c9a8" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">步骤五—更新TLS <em class="os">最低协议版本</em></h1><p id="ea31" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我打了最后一路颠簸后，应用上述。当我访问该网站时，证书仍然显示为无效:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/e4742e3b95d1a012a6070cfcaaf2c1a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZpWgrtbDeI6nl5MM3y59RQ.png"/></div></div></figure><p id="f146" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是因为我将<code class="fe on oo op ob b">MinimumProtocolVersion</code>设置为TLSv1，这是大多数浏览器不再支持的。这里见解释<a class="ae ky" href="https://chromestatus.com/feature/5759116003770368" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="e562" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe on oo op ob b">MinimumProtocolVersion</code>更新为<code class="fe on oo op ob b">TLSv1.2_2021</code>，并重新应用以修复错误。该域名现已开通。更新后的<code class="fe on oo op ob b">ViewerCertificate</code>配置如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="2e4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是完整的最终配置，包含了所有内容(以及一些超出本文范围的其他细节):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="aadf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已。我希望这篇文章对你有所帮助！</p><h1 id="f41e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">资源</h1><ul class=""><li id="1067" class="nm nn it lb b lc mo lf mp li no lm np lq nq lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/server less-application-model/latest/developer guide/Sam-specification . html</a></li><li id="4d95" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-cloudfront-distribution.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/route 53/latest/developer guide/routing-to-cloudfront-distribution . html</a></li><li id="8003" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-route53-recordsetgroup.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/AWS-resource-route 53-recordset group . html</a></li><li id="b20f" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/intrinsic-function-reference-ref . html</a></li><li id="752f" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-certificatemanager-certificate.html#cfn-certificatemanager-certificate-certificateauthorityarn" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/AWS-resource-certificate manager-certificate . html # cfn-certificate manager-certificate-certificate authority yarn</a></li><li id="e055" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudfront-distribution-distributionconfig.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/AWS-properties-cloudfront-distribution-distribution config . html</a></li><li id="18b1" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-certificatemanager-certificate.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/AWS-resource-certificate manager-certificate . html</a></li><li id="cfc2" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu ou ns nt nu bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-route53-aliastarget-1.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/AWS cloudformation/latest/user guide/AWS-properties-route 53-alias target-1 . html</a></li></ul><pre class="kj kk kl km gt oa ob ov bn ow ox bi"><span id="de0f" class="oy lx it ob b be oz pa l oh oi"><strong class="ob iu">Want to Connect?</strong><br/><br/><a class="ae ky" href="https://tony-oreglia.medium.com/subscribe" rel="noopener">Subscribe</a> to my newsletter or connect on <a class="ae ky" href="https://twitter.com/tony_oreglia" rel="noopener ugc nofollow" target="_blank">Twitter</a> or <a class="ae ky" href="https://www.linkedin.com/in/tony-oreglia/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>.</span></pre></div></div>    
</body>
</html>