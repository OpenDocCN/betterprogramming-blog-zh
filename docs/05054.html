<html>
<head>
<title>Build Your Own Button Component Library From Scratch in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中从头开始构建您自己的按钮组件库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-your-own-button-component-library-from-scratch-in-swiftui-14cfa2f0036b?source=collection_archive---------14-----------------------#2020-06-03">https://betterprogramming.pub/build-your-own-button-component-library-from-scratch-in-swiftui-14cfa2f0036b?source=collection_archive---------14-----------------------#2020-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ca20" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">创建一个库来查看应用程序中处于不同状态的所有按钮</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3f7b18537bbef53432ffc860bfc66889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kf6GVARDM_AclyujHJ5toA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@s1ddharth?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西达尔特·辛格</a>在<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="63ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按钮是我们应用中最常用的组件。</p><p id="61a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让它们看起来与它们触发的动作相适应是很重要的。它们应该在整个应用程序中保持一致和可访问，并向用户提供视觉反馈。</p><p id="e8ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的<a class="ae kv" href="https://medium.com/better-programming/a-beginners-guide-to-view-modifiers-in-swiftui-8782c3e44d75" rel="noopener">上一篇文章</a>中，我谈到了视图修改器，以及如何使用它们为我们的SwiftUI应用创建一个时尚的UI。</p><p id="fbac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我将展示如何应用它们来创建可重用的按钮样式。这将是一次漫长而愉快的旅程。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1669" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">SwiftUI按钮</h1><p id="1ced" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在SwiftUI中创建一个按钮非常简单。它需要一个动作和显示的实际内容才能点击。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a606" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，要设计这个<code class="fe my mz na nb b">Button</code>视图的样式，你必须添加视图修改器。你有两个选择:</p><ul class=""><li id="16d9" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated">将修改器应用于内容内部的(每个)视图</li><li id="70aa" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">将修饰符应用到按钮视图—这将把修饰符应用到内容中的所有视图</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="9d76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">两者会有相同的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/a3de7f4ab36442a65e2eb4d801706cfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*zX_QJtdA0k5PDqfPA8tKvw.png"/></div></figure><p id="6df8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，当您在内容中有多个视图时，这种差异就会显现出来:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="424d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，在第一个按钮中,<code class="fe my mz na nb b">Image</code>视图被忽略了，但它仍然是可点击的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/9d0567cb3011a8cf52346278083287eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*N_KEJA1HLxxrqHRr9NAiiA.png"/></div></figure><h2 id="a08f" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak">需要牢记的一些事情</strong></h2><ul class=""><li id="84e8" class="nc nd iq ky b kz mr lc ms lf oe lj of ln og lr nh ni nj nk bi translated">正如我在上一篇关于视图修饰符的文章中提到的，通常顺序很重要</li><li id="6c0d" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">padding</code>应该(通常)放在按钮的背景或边框之前。让按钮透透气——给它一些空间。我们不想要这样的东西:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/514708f3cf10e2e3d6c52f7795595b15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*UUYPmcVCi3CXZOZrmG3mvA.png"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a8a9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">“ButtonStyle”修饰符</h1><p id="32fd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">有两种类型的视图修改器:</p><h2 id="b2d1" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak">与“视图”协议捆绑的修改器，可用于任何视图</strong></h2><p id="23b6" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">例如:<code class="fe my mz na nb b">padding</code>或<code class="fe my mz na nb b">background</code>——两者都可以应用于任何视图。</p><h2 id="2b28" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak">特定于某个类型的修饰符，仅适用于该类型的实例</strong></h2><p id="b612" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这些用于利用该视图的特定特征。按钮就是一个很好的例子。例如，每当用户点击按钮时，我们可能想要改变外观和感觉。</p><p id="05c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有接受实现<code class="fe my mz na nb b">ButtonStyle</code>协议的<code class="fe my mz na nb b">struct</code>的<code class="fe my mz na nb b">ButtonStyle</code>视图修改器。</p><p id="23b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，我们有三种预定义的样式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/e1686725ef6094e50a3caaf7618d02ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*1glIg8pPMaoo0PDg2HIh3Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">具有三种预定义样式的三个按钮</p></figure><p id="ce3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果我们想进一步定制我们的按钮——比如改变按钮被按下时的不透明度呢？</p><p id="27c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是<code class="fe my mz na nb b">ButtonStyle</code>协议发挥作用的地方。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3e3c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">构建自己的“ButtonStyle”修饰符</h1><p id="2a44" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">正如我之前所说的，特定于按钮的视图修饰符让我们可以访问特定的特征。这是通过<code class="fe my mz na nb b">Configuration</code>(实际上是一个<code class="fe my mz na nb b">typealias Configuration = ButtonStyleConfiguration</code>)完成的。</p><p id="f148" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以访问的是:</p><ul class=""><li id="5578" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated"><code class="fe my mz na nb b">label</code>:按钮内容整体视图</li><li id="07f4" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">isPressed</code>:一个布尔变量，每当按钮被按下时就变成<code class="fe my mz na nb b">true</code></li></ul><p id="af6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来做一个更有趣的例子:当按钮被按下时，缩小它并降低不透明度，给它一个高亮效果。此外，作为奖励，让我们动画这些变化。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="654c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/e0e74c08fd5fffc25e485e6c6aebcdfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*1Xy5F0iOzOrxBnorDMqkaQ.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">具有自定义样式和动画的按钮</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4a82" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">React本机UI库</h1><h2 id="59ee" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated">简短的背景故事</h2><p id="31e0" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">2019年，我从原生iOS开发开始休假一年半。我开始把使用React Native开发移动应用作为我的主要工作。</p><p id="dddf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我学到了很多，但让我惊讶的是用现有的UI库快速原型化应用程序的能力。在我来自的地方(本地开发世界)，这甚至不是一个想法。</p><p id="2eb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我当时用的是<a class="ae kv" href="https://callstack.github.io/react-native-paper/" rel="noopener ugc nofollow" target="_blank"> Callstack的React Native Paper(材质设计)</a>然后是<a class="ae kv" href="https://nativebase.io" rel="noopener ugc nofollow" target="_blank"> NativeBase </a>。</p><p id="0a0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进口，使用，并仍然能够定制是令我兴奋不已。我开始理解React Native周围的力量和噪音。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a520" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">以NativeBase为例</h1><p id="ce4a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">NativeBase库由预构建组件构成，这有助于每个开发人员在所有屏幕上更快、更一致地构建内容。按钮也不例外。</p><p id="3009" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它们提供了一长串<em class="oj">道具</em>——按钮组件的输入，告诉它如何看起来或如何表现——像<code class="fe my mz na nb b">outlined</code>、<code class="fe my mz na nb b">transparent</code>、<code class="fe my mz na nb b">bordered</code>、<code class="fe my mz na nb b">rounded</code>、<code class="fe my mz na nb b">large</code>或<code class="fe my mz na nb b">small</code>。</p><p id="fd5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不再有<code class="fe my mz na nb b">@IBOutlets</code>。不再子类化。不要再吃另一个了。</p><p id="998b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>我知道在React Native中，当你实现你的定制风格时，你最终会做同样的事情，但是使用UIKit远没有这么难。</p><p id="3900" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快进到今天:我很高兴我重新发现了我对使用SwiftUI开发美好事物的热爱。</p><p id="0617" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何为我们的按钮开发一个类似于NativeBase的主题UI库。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/b3c78e8d8de7c1cc5ecd6cde873fd0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*j7fWzPkoih0661lrebjy9A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">NativeBase按钮</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b670" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">创建用户界面库</h1><p id="94da" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">下面，我将总结基于NativeBase示例描述的按钮。</p><h2 id="c598" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak"> <em class="ol">类型</em> </strong></h2><ul class=""><li id="5e3c" class="nc nd iq ky b kz mr lc ms lf oe lj of ln og lr nh ni nj nk bi translated"><code class="fe my mz na nb b">light</code></li><li id="fc25" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">primary</code></li><li id="c652" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">success</code></li><li id="66e9" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">info</code></li><li id="da04" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">warning</code></li><li id="3215" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">danger</code></li><li id="468d" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">dark</code></li></ul><h2 id="c399" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak"> <em class="ol">款式</em> </strong></h2><ul class=""><li id="70de" class="nc nd iq ky b kz mr lc ms lf oe lj of ln og lr nh ni nj nk bi translated"><code class="fe my mz na nb b">default</code>(颜色填充)</li><li id="a5bc" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">transparent</code></li><li id="f0a4" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">outline</code></li><li id="0271" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">rounded</code>(颜色填充)</li><li id="fed2" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">full width</code></li></ul><h2 id="60b1" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak"> <em class="ol">状态</em> </strong> s</h2><ul class=""><li id="d079" class="nc nd iq ky b kz mr lc ms lf oe lj of ln og lr nh ni nj nk bi translated"><code class="fe my mz na nb b">enabled</code>(默认)</li><li id="bd8c" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">disabled</code></li></ul><h2 id="deb1" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak"> <em class="ol">字号</em> </strong>(字号)</h2><ul class=""><li id="1da1" class="nc nd iq ky b kz mr lc ms lf oe lj of ln og lr nh ni nj nk bi translated"><code class="fe my mz na nb b">small</code></li><li id="043f" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">default</code></li><li id="497c" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">large</code></li></ul><p id="dd6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想要实现的是尽可能地宣称:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="77d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有的变量都就位了，就像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="9950" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在看看这些需求和NativeBase示例，我们可以看到描述这个UI的一些共同特征:</p><ul class=""><li id="faa5" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated"><code class="fe my mz na nb b">foreground color</code>(文字颜色)</li><li id="9701" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">background color</code></li><li id="5a1f" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">border color</code>(用于轮廓按钮)</li><li id="fd98" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">border radius</code>(默认按钮和圆形按钮)</li><li id="57e7" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><code class="fe my mz na nb b">border width</code></li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="88f9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">按钮式配置</h1><p id="c2cf" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">因此，让我们创建一个名为<code class="fe my mz na nb b">ButtonStyleConfig</code>的协议。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="9ba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看设计，我们可以看到大多数按钮没有边框，并且具有相同的圆角半径。作为任意值，我选择<code class="fe my mz na nb b">6</code>作为圆角半径。</p><p id="7d52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以注意到的另一件事是，不管有什么类型的按钮，它们都有两种颜色:一种主要颜色和一种次要颜色。</p><p id="c015" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，对于默认的成功按钮，我们有主要颜色<code class="fe my mz na nb b">green</code>和次要颜色<code class="fe my mz na nb b">white</code>。事实上，它们中的大多数都有第二种颜色<code class="fe my mz na nb b">white</code>，所以让我们把它作为默认值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="47f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们创建描述每种样式的每种颜色的特定结构:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="b86f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>当然，除了使用结构，还有很多方法可以做到这一点，比如PLIST或JSON文件。</p><p id="1b99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们使样式更容易使用，并为它们创建一个枚举:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b749" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">显示样式</h1><p id="2b01" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在让我们使用一个enum来描述显示样式——<code class="fe my mz na nb b">default</code>、<code class="fe my mz na nb b">transparent</code>、<code class="fe my mz na nb b">outline</code>和<code class="fe my mz na nb b">rounded </code>——并通过实现<code class="fe my mz na nb b">ButtonStyleConfig</code>协议来指定按钮样式的配置。</p><p id="b379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，当在<code class="fe my mz na nb b">transparent</code> / <code class="fe my mz na nb b">outline</code>风格之间切换时，让类型返回主要和次要颜色对我们帮助很大。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="713a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们错过了什么吗？哦，对了，按钮的大小，实际上就是字体的大小。所以我们可以创建一个简单的枚举:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="fc2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些组件，我们就可以开始创建自定义的按钮样式了。</p><h1 id="5ea3" class="lz ma iq bd mb mc om me mf mg on mi mj jw oo jx ml jz op ka mn kc oq kd mp mq bi translated">将按钮主题化</h1><p id="52d4" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们使用之前创建的<code class="fe my mz na nb b">CustomButtonStyle</code>并添加一个定制的init。就像我在<a class="ae kv" href="https://medium.com/better-programming/a-beginners-guide-to-view-modifiers-in-swiftui-8782c3e44d75" rel="noopener">上一篇文章中描述的那样，</a>我们可以将参数传递给我们的自定义视图修改器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3177" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一个微妙的接触，我添加了一个阴影组件，给按钮一点深度。</p><p id="1763" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看它的实际应用:</p><ul class=""><li id="a08b" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated">默认情况下是这样的:<code class="fe my mz na nb b">.buttonStyle(CustomButtonStyle())</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/cf710a2cae84033b91dd634a2abbcc72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*5GOA_HSlTA39kfaLRmo_cQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">默认主要样式</p></figure><ul class=""><li id="a823" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated"><code class="fe my mz na nb b">CustomButtonStyle(.rounded(type: .success))</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/b842dbe59c10f186d29c9241f2e86282.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*z3F7cvq-Xy6N2VBJvkc6Xg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">圆形成功按钮样式</p></figure><ul class=""><li id="b609" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated"><code class="fe my mz na nb b">CustomButtonStyle(.transparent(type: .success)</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/649748cbc6c744c8e601b9427207ffe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*AVJQjg9J7_47sK7mHMzNMQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">透明成功按钮样式</p></figure><ul class=""><li id="cefa" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated"><code class="fe my mz na nb b">CustomButtonStyle(.outline(type: .success))</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/649748cbc6c744c8e601b9427207ffe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*AVJQjg9J7_47sK7mHMzNMQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">失败概述成功按钮样式</p></figure><p id="bf01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">等等，什么？不应该勾勒出来吗？但是边界在哪里呢？让我们修理它！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a834" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">边界</h1><p id="58be" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们修理它！我们可以通过添加一个<code class="fe my mz na nb b">RoundedRectangle</code>作为叠加视图来添加边框:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ed47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">勾勒出的风格是固定的！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/b4e345351cfc8c814d9ee72b89410bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*Efpd2z8vQ0IT8mglairvKg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">修正了成功按钮的轮廓样式</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5d9a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">到目前为止我们已经取得的成绩</strong></h1><p id="62d0" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们看看目前我们能做些什么:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/e8485b2e875fd769a9b5ab46f57ef5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*3iuTaCtJ8LxNHbGUrL9Umw.gif"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4259" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">全宽</h1><p id="2c0f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在，我们的按钮需要最小的宽度。</p><p id="f33d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果我们想在表单中使用提交按钮，并希望它占据可用的全部宽度，该怎么办呢？</p><h2 id="c856" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak">如何</strong></h2><p id="b073" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了使视图具有可用的全宽度，我们可以使用<code class="fe my mz na nb b">.frame</code>视图修改器，如下所示:</p><p id="74a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe my mz na nb b">.frame(maxWidth: .infinity)</code>。</p><h2 id="9512" class="ns ma iq bd mb nt nu dn mf nv nw dp mj lf nx ny ml lj nz oa mn ln ob oc mp od bi translated"><strong class="ak">哪里</strong></h2><p id="b75a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在上一篇文章中，我强调了修饰语的顺序很重要。</p><p id="fc0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们想要实现的不仅仅是全宽。我们想让角落、背景、阴影和覆盖影响整个视图，并保持比例。</p><p id="2daf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们需要在<code class="fe my mz na nb b">background</code>修饰符之前指定<code class="fe my mz na nb b">frame</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="b020" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/6ebced4a1163ba4e379ca04b419731ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*BM6vUK85FtJp8j_MGzEzMA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全宽按钮</p></figure><p id="45cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不是我一直想要的。我想通过一个类似于<code class="fe my mz na nb b">CustomButtonStyle(.default(type: .dark), isFullWidth: true)</code>的布尔来指定。</p><p id="94bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以在<code class="fe my mz na nb b">init</code>方法中指定标志，并且只有在<code class="fe my mz na nb b">makeBody</code>方法中为<code class="fe my mz na nb b">true</code>时才应用<code class="fe my mz na nb b">frame</code>修饰符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3bfb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们在这里，让我们创建一个小的自定义修改器，使视图具有全宽。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="79c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，目前还没有有条件地应用修饰符的方法。但是我们可以创造它！</p><p id="2635" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在谷歌搜索这个问题时，我们发现了这篇关于视图修饰符的优秀文章。在这里我们可以找到一个非常有用的扩展，它只在条件为<code class="fe my mz na nb b">true</code>时才应用指定的修饰符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="23b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们已经拥有了所需的所有构件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2dc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为用法的示例，让我们看看它应用于同一个按钮:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/5c622ad48cfe7e05ad0263ac48d75b3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*X54SBlUzuQ1bO-RGpYntow.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">默认和阻止暗按钮</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7db8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">疯狂的动画</h1><p id="b3e9" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如你所见，我们指示按钮被按下的唯一方式是通过高亮效果:<code class="fe my mz na nb b">.opacity(configuration.isPressed ? 0.7 : 1)</code>。</p><p id="4d61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们添加回<code class="fe my mz na nb b">scaleEffect</code>修改器，但这一次，改变动画效果，使其反弹。更疯狂的是，让我们改变它被按下时的半径:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c75d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3b51c216191c43d0460ac307815aeccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*-ixk8VLkoisPlRU4VFUhdw.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">动画按钮</p></figure><p id="785b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在现实生活中，我们真的需要这样吗？可能不会，但我们有时需要让我们的生活充满活力。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d689" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">恭喜你！</h1><p id="943a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">您已经做到了这一步，回报就是您自己的按钮组件库，它很容易扩展和定制。例如，您可以做的是增强按钮组件以支持加载状态，显示微调器，或者使按钮不可使用。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ce81" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">有用的链接</h1><ul class=""><li id="bef5" class="nc nd iq ky b kz mr lc ms lf oe lj of ln og lr nh ni nj nk bi translated"><a class="ae kv" href="https://swiftui-lab.com/view-extensions-for-better-code-readability/" rel="noopener ugc nofollow" target="_blank">“查看扩展以提高代码可读性”</a></li><li id="41cb" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated"><a class="ae kv" href="https://medium.com/better-programming/a-beginners-guide-to-view-modifiers-in-swiftui-8782c3e44d75" rel="noopener">《在SwiftUI中查看修改器的初学者指南》</a></li></ul></div></div>    
</body>
</html>