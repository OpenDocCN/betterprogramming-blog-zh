<html>
<head>
<title>I Tested 4 Different Error-Reporting Services for PHP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我测试了4种不同的PHP错误报告服务</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/i-tested-4-different-error-reporting-services-with-for-php-1a5228018c67?source=collection_archive---------11-----------------------#2022-01-19">https://betterprogramming.pub/i-tested-4-different-error-reporting-services-with-for-php-1a5228018c67?source=collection_archive---------11-----------------------#2022-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cda9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以及为什么我转而使用自托管版本的Sentry</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b02bfbe8c91c9a45b9584f0eda441afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nmgIAy5LgjsuBTbs"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@portuguesegravity?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">葡萄牙重力</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="67cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您不知道什么是“错误报告服务”，让我简短地解释一下:</p><p id="32f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您想要一个通知，以防您的应用程序抛出任何类型的错误，更重要的是，当我们谈到PHP: <a class="ae kv" href="https://www.php.net/manual/en/language.exceptions.php" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">异常</strong> </a>。</p><p id="60c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">PHP提供了<a class="ae kv" href="https://www.php.net/manual/en/function.set-exception-handler.php" rel="noopener ugc nofollow" target="_blank">方法</a>来处理这些异常。如果你不想建立自己的通知和监控系统，互联网提供了许多不同的服务来为你做这项工作。</p><p id="736d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些服务中的许多处理不止一种编程语言，其他的专注于特定的语言，这真的取决于你的需求。</p><p id="d396" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些服务通常为您提供一个包(作曲家需要…)注册一个异常处理程序，通过HTTP将错误推送给该服务。</p><p id="bbf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在该服务的仪表板中，错误/异常被分组并显示<br/>，就像在票证系统中一样(即Zendesk)。这样，您可以很好地了解系统内部的问题。在团队中工作时，您可以将这些错误分配给队友，添加注释等等。但是最重要的是:如果出现问题，你会收到通知！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="997c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我讨厌点击诱饵，所以让我们先从重要的发现开始:</p><p id="2462" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">获胜者(对我来说)是<a class="ae kv" href="https://sentry.io" rel="noopener ugc nofollow" target="_blank">哨兵</a>！</p><h2 id="93e9" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated"><strong class="ak">为什么？</strong></h2><ol class=""><li id="ab33" class="ms mt iq ky b kz mu lc mv lf mw lj mx ln my lr mz na nb nc bi translated">因为sentry是唯一显示错误所涉及的<code class="fe nd ne nf ng b">$variables </code> <br/>内容的服务！(如果我说错了，请纠正我)<br/>我将解释这一点…</li><li id="2a91" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr mz na nb nc bi translated">Sentry提供灵活的定价，让您物有所值</li><li id="d575" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr mz na nb nc bi translated">因为Sentry是<a class="ae kv" href="https://github.com/getsentry/self-hosted" rel="noopener ugc nofollow" target="_blank">开源的</a>，你可以在你自己的服务器上运行它的所有特性(如果我在这里说错了，请纠正我)</li><li id="4b82" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr mz na nb nc bi translated">Sentry拥有大量的<a class="ae kv" href="https://docs.sentry.io" rel="noopener ugc nofollow" target="_blank">特性</a>(我从未使用过并支持许多不同的语言，并为大多数语言提供了软件包)</li></ol><p id="6a83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">免责声明:</strong>这里的帖子是非常主观的，因为一方面我已经使用Sentry很多年了，另一方面我只是非常肤浅地看了一下其他服务。(因为时间不够)<br/>所以不能排除我错过了其他服务的一些很棒的功能——也就是说:如果你也在寻找(新)服务，请自己测试一切！</p><p id="15d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我调查了哪些服务呢？</p><ul class=""><li id="e9c3" class="ms mt iq ky b kz la lc ld lf nm lj nn ln no lr np na nb nc bi translated"><a class="ae kv" href="https://sentry.io" rel="noopener ugc nofollow" target="_blank"> sentry.io </a>(提供免费计划，但没有第三方集成)</li><li id="dc20" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr np na nb nc bi translated"><a class="ae kv" href="https://www.bugsnag.com" rel="noopener ugc nofollow" target="_blank">bugsnag.com</a>(提供一个带有完全提醒的免费计划)</li><li id="7d46" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr np na nb nc bi translated">raygun.com(无免费计划)</li><li id="cec0" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr np na nb nc bi translated"><a class="ae kv" href="https://flareapp.io" rel="noopener ugc nofollow" target="_blank">flare pre . io</a>(无自由计划)</li></ul><p id="8b7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是什么让我在这么多年后检查别人的服务而不是哨兵？</p><p id="2cbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哨兵最近发布了一个公告:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/a96e2630831e82bf1d61039206030bd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*xAwVvCm4oR8V2YFAzsiVJA.png"/></div></figure><p id="a8f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这真是令人失望！；-(</p><p id="3846" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我解释一下。《哨兵》的结构是这样的:</p><ul class=""><li id="47be" class="ms mt iq ky b kz la lc ld lf nm lj nn ln no lr np na nb nc bi translated">你有一个账户(像往常一样)</li><li id="6585" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr np na nb nc bi translated">在您的帐户中，您有“组织”</li><li id="b379" class="ms mt iq ky b kz nh lc ni lf nj lj nk ln nl lr np na nb nc bi translated">在每个“组织”中，你都有项目</li></ul><p id="b21f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，为了保持整洁，为不同客户/公司工作的人在Sentry内部为每个客户创建一个“组织”,在这里是该客户的所有项目——有意义吗？</p><p id="5aec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很长一段时间以来，Sentry通过他们的“遗留集成”提供松弛通知——甚至在免费计划中——棒极了！</p><p id="ef98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你在公告中看到的，这种“遗留的Slack集成”不再可用，如果你想继续使用Slack通知，你现在被迫升级到付费计划。要明确的是:这是100%公平的，没问题——但是他们的概念有一个大问题:</p><p id="9341" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你不用在你的“账户”里付钱——你要在你的账户里“为每个组织”付钱。</p><p id="9e30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们有5个客户:</p><p id="c9e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了保持松弛通知有效，您将不得不支付312美元/年* 5，<br/>这样每年就有1560美元的松弛通知！！！</p><p id="6e8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">….是的，还有一些额外的升级物品，但这不是重点。</p><p id="8bb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那不是很疯狂吗？！？ 1560美元/年，仅仅是因为您通过“组织”而不是您的全球账户付费？</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="09df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我试着这样向哨兵解释:</p><p id="635d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你住在一栋房子或公寓里:你的房子/公寓里的每一个水龙头都有“供水合同”吗？或者你的整个房子/公寓都有合同吗？如果你当地的供水公司告诉你，你家里的每个水龙头都需要一份合同，你会开始认为他们在跟你开玩笑。</p><p id="ebf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我看了那个公告后的感受。这就是为什么我检查了其他服务，因为有懈怠通知是没有什么特别的这些天，我一定是愚蠢的支付所有的钱只是因为这一点。</p><p id="9332" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哨兵支援告诉我:</p><blockquote class="nr ns nt"><p id="801f" class="kw kx nu ky b kz la jr lb lc ld ju le nv lg lh li nw lk ll lm nx lo lp lq lr ij bi translated">此外，如果您愿意，您可以考虑将您的项目转移到一个组织，并取消当时未使用的订阅。这样，您的所有项目都将在一个组织下，您只需支付一次费用。请记住，您需要邀请每个组织的所有成员加入主组织，并组建新的团队。</p></blockquote><p id="8374" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对我来说:不能接受！</p><p id="37b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再次:这就是为什么我很快查了一些其他服务。我向所有服务发送了相同的“异常”,并检查了仪表板的外观和感觉，以及它们提供了多少信息。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="6c07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先:下面是产生错误的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="f819" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这很简单，但重要的是:</p><p id="2e3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的应用程序调用错误类型的函数，这种情况时有发生。所以我们假设<code class="fe nd ne nf ng b">$this-&gt;aConfig[‘error_reporting’][‘service’]</code>是一个“字符串”。</p><p id="cc60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我们会得到错误:</p><pre class="kg kh ki kj gt oa ng ob oc aw od bi"><span id="e628" class="lz ma iq ng b gy oe of l og oh">Fatal error: Uncaught TypeError: Argument 1 passed to Mode_test_exception::throwerror() must be of the type array, string given</span></pre><p id="f769" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们比较一下这在不同的错误报告服务中的表现:</p><h2 id="bcd9" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated"><strong class="ak">雷根</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/b66a93d7ac26b4bb0512286776f6fa13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dwOvztf48Edhf2FzsTPOng.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全尺寸图片:<a class="ae kv" href="https://i.imgur.com/Qtbnx3R.png" rel="noopener ugc nofollow" target="_blank">https://i.imgur.com/Qtbnx3R.png</a></p></figure><p id="ba18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这对你有帮助吗？堆栈跟踪甚至不可点击，它几乎和你在bash上看到的信息一样。你看不到这里涉及的代码。说实话，这看起来太他妈的“老套”了，这里缺了那么多东西，但我在这里就不赘述了。</p><h2 id="2787" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated"><strong class="ak">障碍</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/472591106a40a19965089bb1eb705aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JlB9Hds1Ll3846IAIDJ_Og.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全尺寸图片:<a class="ae kv" href="https://i.imgur.com/yYxsyK2.png" rel="noopener ugc nofollow" target="_blank">https://i.imgur.com/yYxsyK2.png</a></p></figure><p id="9b9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可恶！这看起来非常清晰，您可以获得完整的堆栈跟踪，并看到发生错误的代码。好多了。它与哨兵有许多共同之处。Bugsnag没有“组织”，只有项目、团队和团队成员。</p><p id="da67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了跟踪哪个项目属于你的哪个客户，在你的项目名称中使用前缀是有意义的，即<code class="fe nd ne nf ng b">CustomerA-webinterface</code>、<code class="fe nd ne nf ng b">CustomerA-backend</code>、<code class="fe nd ne nf ng b">CustomerB-webinterface</code>，你明白了。</p><p id="e45a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是时差通知的样子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/eb524c2f0cf177d9a71b56ec47289694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQF2L_jkdxTsQCtBryXRwQ.png"/></div></div></figure><p id="fb3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顺便说一下:哨兵通知没有“打盹”按钮，但嘿，你不能拥有一切；-)</p><h2 id="1d64" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated"><strong class="ak">弗拉拉普</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/01e6de1152b5ad8243c0f75b48df1f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Agn-VDRbDQYYZLa7L0iouA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全尺寸图片:<a class="ae kv" href="https://i.imgur.com/ELaWHwh.png" rel="noopener ugc nofollow" target="_blank">https://i.imgur.com/ELaWHwh.png</a></p></figure><p id="be13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不知道该说什么。Flare试图解决Laravel开发人员的问题，如果有人为此支付319美元/年，我非常抱歉，我无法用更友好的语言来表达。对我来说，收取与Sentry相同的费用，但只提供10%的功能，这是绝对的厚颜无耻。是的，Flare提供了“深入的Laravel应用洞察”，我从来没有见过，但我可以向你保证，如果你将Sentry与Laravel一起使用，你不会错过任何东西。</p><h2 id="5346" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated"><strong class="ak">哨兵</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/d3d41bf08721ce5100e09c72805eb3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4Yma-WcGjNkRK2r8Zy1Kg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">全尺寸图片:<a class="ae kv" href="https://i.imgur.com/7xCAlLK.png" rel="noopener ugc nofollow" target="_blank">https://i.imgur.com/7xCAlLK.png</a></p></figure><p id="6060" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不仅仅是因为美丽的黑暗模式而看起来很酷，还有如此多的功能，选项，动作，信息——这真的令人无法抗拒。功能和可能性的数量是无穷无尽的！我可以写一整个关于哨兵的故事，也许我会！</p><p id="76fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个时差通知的示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/70c6f923d6fe82d8eb074551ffe11fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*SksN0GiU6cu4VXv_bQHvBg.png"/></div></figure><h1 id="a76e" class="on ma iq bd mb oo op oq me or os ot mh jw ou jx mk jz ov ka mn kc ow kd mq ox bi translated">那么为什么哨兵在所有其他人的前面？</h1><p id="9afa" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf oy lh li lj oz ll lm ln pa lp lq lr ij bi translated">我非常接近切换到Bugsnag，但是在测试我的第一个异常时，我注意到错误报告中最有价值的信息丢失了:</p><p id="30c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">【变量$的内容】</strong></p><p id="9c84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们记住代码:</p><pre class="kg kh ki kj gt oa ng ob oc aw od bi"><span id="1e7c" class="lz ma iq ng b gy oe of l og oh">private function throwerror(array $params): void</span></pre><p id="b71e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以当<code class="fe nd ne nf ng b">$parms</code>不是一个数组时，我们会得到下面的错误:</p><pre class="kg kh ki kj gt oa ng ob oc aw od bi"><span id="3429" class="lz ma iq ng b gy oe of l og oh">Argument 1 passed to Mode_test_exception::throwerror() must be of the type array</span></pre><p id="6ee5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，得到错误通知很好，知道涉及到哪个代码也很好…但是你知道什么更好吗？</p><blockquote class="nr ns nt"><p id="f115" class="kw kx nu ky b kz la jr lb lc ld ju le nv lg lh li nw lk ll lm nx lo lp lq lr ij bi translated">"知道错误发生时$params的值"</p></blockquote><p id="e403" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我不知道是什么数据引起了错误，我该如何调试这个错误呢？要我猜吗？我是否应该添加日志记录，以便找出当时的$params可能是什么？</p><p id="352b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我告诉你:</strong>在我看来，如果你看不到错误中涉及的数据，错误报告服务是没有用的。</p><p id="32b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设你得到一个错误，一个<code class="fe nd ne nf ng b">DB-INSERT</code>失败了，如果你看不到你试图插入的数据，这个信息有什么价值呢？没什么！</p><p id="a010" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些错误报告服务都不会显示这些超级信息，只有Sentry会！(如果我在这里说错了，请再次纠正我)</p><p id="e73a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">明确地说:向异常添加数据很容易，比如:</p><pre class="kg kh ki kj gt oa ng ob oc aw od bi"><span id="c516" class="lz ma iq ng b gy oe of l og oh">throw new RuntimeException(print_r($somedata,true));</span></pre><p id="959d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是看到我的堆栈跟踪<br/>中使用的<code class="fe nd ne nf ng b">$paramters</code>的内容从开始到错误发生的那一刻，这太棒了！</p><p id="24e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，让我们看看我们的例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/3b79f4df6f700383d4ec824bd96d6e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*UZk2biLYSNlTEYOncpoJ_A.png"/></div></figure><p id="e760" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请不要混淆:<code class="fe nd ne nf ng b">TypeError</code>的发生是因为变量(<code class="fe nd ne nf ng b">$params</code>)在那一刻已经是一个值为“哨兵”的“字符串”。</p><p id="ffae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正是了解了这一点，使得调试和修复变得如此之快！</p><blockquote class="nr ns nt"><p id="1a03" class="kw kx nu ky b kz la jr lb lc ld ju le nv lg lh li nw lk ll lm nx lo lp lq lr ij bi translated">我不知道为什么有人应该在没有这些信息的情况下使用任何错误报告服务/工具。(对我来说)那没有意义。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/c3d2b115f88854f4ad643fea439636aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G9ariQhn7l0XVzpW"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@mufidpwt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Mufid Majnun </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="ad54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，在这一点上你很有希望理解为什么Sentry在这里是赢家，<br/>但是你可能会问我是如何解决“钱的问题”而不用为我的每个“组织”付费的。</p><p id="2a8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">就这么简单:</strong>我换到了<a class="ae kv" href="https://github.com/getsentry/self-hosted" rel="noopener ugc nofollow" target="_blank">自带</a>版本的哨兵。</p><p id="9ac9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在你自己的服务器上运行Sentry可以让你完全控制一切。<br/>有了Docker的帮助，事情变得异常简单。</p><blockquote class="nr ns nt"><p id="ea1c" class="kw kx nu ky b kz la jr lb lc ld ju le nv lg lh li nw lk ll lm nx lo lp lq lr ij bi translated">因此，我现在将支付0美元，而不是每年支付1500美元以上！</p></blockquote><p id="25ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">反正我运行的是不同的服务器，所以服务器成本对我来说没什么影响。</p><p id="0602" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这个简单的解决方案，我可以和我的组织呆在一起，继续我喜爱的Slack通知。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="6cb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">在您开始考虑自托管解决方案之前，请考虑一下:</em></p><p id="bf6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前，您“仅”获得每月26美元的付费计划—考虑到8GB RAM服务器的成本，这是一笔非常划算的交易！</p><p id="60fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>