<html>
<head>
<title>3 Tips for Advancing Python String Formatting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高Python字符串格式的3个技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-tips-for-advancing-python-string-formatting-bc4cc8720f2e?source=collection_archive---------17-----------------------#2020-03-19">https://betterprogramming.pub/3-tips-for-advancing-python-string-formatting-bc4cc8720f2e?source=collection_archive---------17-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1d6b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">开始使用f-string来对齐代码，使字符串可读、清晰、明确</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ba61b02ab4b057cce30e21fc1b9d5867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GxQs4P9CUJYQqqxZd8wG8g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@tvick?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">泰勒维克</a>在<a class="ae ky" href="https://unsplash.com/s/photos/table-chairs-outdoors?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="37ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字符串格式化意味着在字符串中嵌入表达式。在大多数面向初学者的Python教程中，第一个任务从“Hello World”项目开始，这使得<code class="fe lv lw lx ly b">string</code>成为最熟悉的变量类型。</p><p id="dc67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，一旦您开始在一个较长的字符串中添加参数，您的代码将会变得不那么简洁和易读。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="65ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，字符串串联看起来很糟糕而且冗长，因此<a class="ae ky" href="https://www.python.org/psf/" rel="noopener ugc nofollow" target="_blank"> Python软件基金会</a>发明了一个名为<code class="fe lv lw lx ly b">.format()</code>的函数来缩短语法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="80ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它更直观但仍然不容易阅读，所以为什么不采用新的方式呢？到本文结束时，你将学会三种保持代码简洁的方法:</p><ol class=""><li id="183b" class="mb mc it lb b lc ld lf lg li md lm me lq mf lu mg mh mi mj bi translated">格式化的字符串文字。</li><li id="eb24" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">输出对齐。</li><li id="852f" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">最大线路长度。</li></ol></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="12de" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">什么是格式化字符串？</h1><p id="53b0" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">格式化字符串文字(f-string)具有简单的语法和较短的表达式，取代了像% formatting或<code class="fe lv lw lx ly b">str.format()</code>这样的“老派”方法。</p><p id="5ccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的是，它比这些旧方法执行得更快，线索在<a class="ae ky" href="https://www.python.org/dev/peps/pep-0498/" rel="noopener ugc nofollow" target="_blank"> PEP 498 </a>中提供:</p><blockquote class="nt"><p id="29de" class="nu nv it bd nw nx ny nz oa ob oc lu dk translated">F字符串提供了一种使用最小语法将表达式嵌入字符串文字的方法。应该注意，f字符串实际上是在运行时计算的表达式，而不是常量值。</p></blockquote><p id="71c0" class="pw-post-body-paragraph kz la it lb b lc od ju le lf oe jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">简而言之，f-string比其他方法使用更少的字节码指令。如果您对f字符串的高级解释感兴趣，请查看<a class="ae ky" href="https://www.python.org/dev/peps/pep-0498/" rel="noopener ugc nofollow" target="_blank"> Python文档</a>。</p><p id="168c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">展示f弦的工作原理。让我们重复使用上面的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="3373" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字符串的开头有一个<code class="fe lv lw lx ly b">f</code>,包含表达式的花括号被替换为表达式的值。这种技术也可以与字典/类/列表配合使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="da07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，f-string支持各种格式规范以消除过多的工作，同时语法保持简洁。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="d27c" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">如何实现输出对齐</h1><p id="365a" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">你花了多少时间来计算数字的位数，以区分准确的数值？</p><p id="7fdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在现实世界中，我们会不自觉地受到文本格式的影响，并期望获得舒适的阅读体验。在Python的输出显示中，我们有强大的工具来完成这项工作:</p><ol class=""><li id="354a" class="mb mc it lb b lc ld lf lg li md lm me lq mf lu mg mh mi mj bi translated">逗号“<code class="fe lv lw lx ly b">,</code>”分隔千人一组。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="b9e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.有限的数字显示冗长的数字。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="eb11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.用空格填充来对齐段落。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="10e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些例子是常用的规范，其他选项可以在<a class="ae ky" href="https://docs.python.org/3.4/library/string.html" rel="noopener ugc nofollow" target="_blank"> Python的官方文档</a>中找到，包括显示正负符号，改变位置系统，显示百分号。</p><p id="18ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为符号太多，记不住，使用<a class="ae ky" href="https://myshell.co.uk/blog/2018/11/python-f-string-formatting-cheatsheet/" rel="noopener ugc nofollow" target="_blank">备忘单</a>总是正确的选择。</p><p id="a7d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设关于f弦的那一段对你来说还不够，试试这一段！<br/>(我一直是真Python的忠实粉丝！)</p><div class="oi oj gp gr ok ol"><a href="https://realpython.com/python-f-strings/" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">Python 3的f-Strings:改进的字符串格式化语法(指南)- Real Python</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">从Python 3.6开始，f字符串是格式化字符串的一种很好的新方法。它们不仅可读性更强，更简洁，而且…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">realpython.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz ks ol"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="7dce" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">为什么最大线长度很重要？</h1><p id="a6f6" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">不要在一行中粘贴太多代码，给读者造成压力。根据Python代码的<a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/#class-names" rel="noopener ugc nofollow" target="_blank">样式指南，推荐的最大行长度是79个字符。</a></p><p id="18f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当使用代码审查工具时，编辑器窗口宽度的限制很有效。每当您想要将代码从一个文件复制到另一个文件或者使用Git来比较两个代码版本时，受控的窗口长度使得并排打开几个文件成为可能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://medium.com/analytics-vidhya/how-to-download-images-faster-using-multithreading-in-python-a31110468770"><div class="gh gi pa"><img src="../Images/5e5c86c6b81b22bf2613ae8aaa1a10c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bMKdLM1Piixe9HTdu3zgA.png"/></div></a><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Python从Unsplash下载images agiler。</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="cfd7" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">结论</h1><p id="9ce8" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">简化的能力意味着消除不必要的东西，让必要的东西说话。字符串格式化不会对你的算法造成任何影响，但是在阅读你的代码时让别人感到舒服是很温和的。</p><p id="a3d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获得更多让代码变得漂亮整洁的技巧:</p><div class="oi oj gp gr ok ol"><a href="https://medium.com/better-programming/how-to-make-python-programming-more-elegant-and-decent-4b5962695aa9" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">如何让你的Python代码更优雅</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">我对Python禅宗的理解和更多让代码变得漂亮整洁的技巧</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">medium.com</p></div></div><div class="ou l"><div class="pb l ow ox oy ou oz ks ol"/></div></div></a></div><p id="b70b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！我希望你喜欢它。</p></div></div>    
</body>
</html>