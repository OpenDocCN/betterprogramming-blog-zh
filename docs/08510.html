<html>
<head>
<title>5 Things I Dislike the Most About Code Reviews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于代码评审，我最不喜欢的5件事</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-i-hate-about-code-review-66a86e2e3d3f?source=collection_archive---------0-----------------------#2021-05-09">https://betterprogramming.pub/what-i-hate-about-code-review-66a86e2e3d3f?source=collection_archive---------0-----------------------#2021-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1904" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">固执己见的评论，双重标准，等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1c08008aa017d01486eb49c027f609a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6p1RLMgcIwHqJHPMbX_FlA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安德烈·亨特在<a class="ae ky" href="https://unsplash.com/s/photos/angry-face?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="afa1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我想澄清一下标题。当代码评审做得正确时，我不讨厌它。事实上，我喜欢审查代码和被审查。代码评审对于作者和评审者来说都是一次愉快的学习经历，有一个支持性的环境和一致的标准。适当的代码审查减少了错误并保持了代码库的质量。</p><p id="0d59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但在现实中，这往往是一项压力很大的运动。来自评论者的恶意评论会引起持续的争论。在某些情况下，它会导致团队沟通的中断。那是我(以及我认识的许多开发人员)讨厌代码审查的时候。</p><p id="e8dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我最不喜欢代码审查的几件事。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8cb0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.来自“我总是对的”评论者的固执己见的评论</h1><p id="609d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我过去的工作经验中，许多团队至少有一个过度自负和/或傲慢的高级开发人员。这个人很容易通过代码评审毒害团队环境。</p><p id="5ead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个傲慢的评审者会试图通过代码评审来证明他们比其他人更好。这些评论者倾向于在没有正当理由或解释的情况下不断添加固执己见的评论。很多时候，这些问题属于个人偏好的范畴。</p><p id="06a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我见过代码审查者沉迷于命名约定或者迂腐地过度工程化。他们强迫其他开发人员根据评审者的个人偏好更改他们的代码，即使代码符合团队的编码标准。</p><p id="01a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于审查者的权威和通过PR的时间压力，其他开发人员通常会让步并做出更改。这是浪费时间和精力，而且会让其他开发人员感到没有动力。通常，由于评审而导致的不必要的最后一分钟的更改会导致新的错误。</p><p id="90bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据GitLab的最佳实践:</p><blockquote class="mz"><p id="2524" class="na nb it bd nc nd ne nf ng nh ni lu dk translated">“接受许多编程决策都是观点。讨论你喜欢的权衡，并迅速达成解决方案。”</p></blockquote><p id="0b94" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">简单明了。我相信每个开发者都会同意这是常识。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="33c3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.双重标准还是不断变化的标准</h1><p id="65f9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在一些项目中，没有正式的书面代码评审标准。不幸的是，经常有一两个大声而傲慢的高级开发人员在做所有的代码审查。这就是代码审查成为权力游戏而不是必要的质量保证的时候。</p><p id="aa3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个症状是代码审查者将根据PR的作者应用不同的标准。我见过新的或初级的开发人员被单独投入到一项复杂的任务中，然后在代码审查中遵循比通常更高的标准。因此，PR被阻止并要求重写。这造成了不必要的挫折和延误。与此同时，其他人的PRs未经适当审查就被迅速批准。</p><p id="468c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一比双重标准更糟糕的是不断变化的标准。</p><p id="ac33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">软件设计是一门艺术，艺术没有固定的规则，相反，我们有许多可以解释的原则。当您根据评审者的反馈进行代码更改时，标准会发生变化，但他们会不断移动目标。结果是显而易见的:严重的延误和与不讲道理的人无休止的讨论。</p><p id="ba0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从我的经验来看，双重标准给其他开发者带来了巨大的焦虑。他们会觉得受到了侮辱，失去了动力，最终会开始寻找其他机会。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8651" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.对同一琐碎问题的重复评论，但他们错过了核心的设计/结构问题</h1><p id="7ed3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一个常见的问题是代码评审有一种“更多的评论意味着更好的评审”的心态</p><p id="1a7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不用花时间去理解公关的背景，增加评论数量最简单的方法就是挑选一个次要的风格问题，并为每个事件添加一条评论。这没有帮助，因为样式问题通常可以通过在IDE中应用一个额外的/缺少的设置来修复。真正有帮助的是添加一个信息性的注释，并带有样式指南或设置指南的链接。</p><p id="4951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对风格和琐碎问题的狭隘看法导致对现实问题的盲目。</p><p id="d53c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多时候，主要的结构或设计问题通过评审，是因为评审者缺乏时间和上下文。鉴于审查者通常是高级和/或长期任职的工作人员，如果他们的关注点在正确的地方，他们可能会注意到这些问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="433a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.超出范围的评论</h1><p id="c8b7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一些代码评审员习惯于做出这样的评论:“我知道这不是你的代码，但是既然你接触了它，请重构它。”</p><p id="0803" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个公关都有一个范围。好的公关都有小的。它要么修复一个bug，要么增加一个特性。代码评审的范围应该适当。它不应该仅仅因为PR碰巧接触到同一个文件就要求作者进行重构，从而扩大PR的范围。这样做可能会导致其他开发人员在时间压力下匆忙做出不正确的更改。将两个不相关的变更混合到一个PR中不是好的做法。</p><p id="a6b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除非重构很小，并且与公关直接相关，否则最好创建一个单独的问题/标签，让另一个公关来完成。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8059" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">5.审核和响应缓慢</h1><p id="9757" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">代码审查应该及时。我们都知道等待是痛苦的，在交付压力下等待代码评审反馈更痛苦。</p><p id="cf64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我参与的大多数项目中，没有关于代码审查时间的SLA。要看有多少审稿人有空，有多忙。当代码审查仅限于团队中的一两个高级开发人员时，情况会变得更糟。因为代码评审员通常是资深的，他们将有多重责任。这让等待变得更加漫长。</p><p id="96bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码审查成为瓶颈并不罕见，尤其是在敏捷环境中，每个sprint都需要一个可交付的产品。</p><p id="5f39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然没有代码审查速度的标准，但是谷歌的指南可能是一个很好的参考:</p><blockquote class="no np nq"><p id="fce3" class="kz la nr lb b lc ld ju le lf lg jx lh ns lj lk ll nt ln lo lp nu lr ls lt lu im bi translated">“如果你不是在一个集中的任务中，你应该在它进来后不久做一个代码审查。</p><p id="0747" class="kz la nr lb b lc ld ju le lf lg jx lh ns lj lk ll nt ln lo lp nu lr ls lt lu im bi translated">一个工作日是响应代码评审请求的最长时间(即第二天早上的第一件事)。"</p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="00f7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的想法</h1><p id="87ea" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">以上是我在代码评审中遇到的常见问题。这是<em class="nr">而不是</em>代码审查本身的错误。</p><p id="37ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实很简单，审查不是由正确的人或以正确的方式进行的。</p><p id="dac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会想，“我们应该如何处理这些问题？”不会有简单的答案。我可能会在另一篇文章中与你分享我的想法。如果你有类似的经历和/或有什么可以分享的，请留下评论。我很想收到你的来信。</p><p id="84ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我想分享一段摘录自<a class="ae ky" href="https://slab.com/library/examples/google-code-review/" rel="noopener ugc nofollow" target="_blank">谷歌的代码审查开发者指南</a>:</p><blockquote class="no np nq"><p id="e420" class="kz la nr lb b lc ld ju le lf lg jx lh ns lj lk ll nt ln lo lp nu lr ls lt lu im bi translated">一般来说，一旦一个CL确实改善了正在工作的系统的整体代码健康状态，评审者应该赞成批准它，即使这个CL并不完美</p></blockquote><p id="d848" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复习愉快！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="b325" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nr">如果您还不是Medium的付费会员，</em> <a class="ae ky" href="https://sunnysun-5694.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="nr">您可以访问此链接</em> </strong> </a> <em class="nr">。你可以无限制地阅读媒体上的所有报道。我会收你一部分会员费作为介绍费。</em></p></div></div>    
</body>
</html>