# 去无服务器？建立一个可观察的心态

> 原文：<https://betterprogramming.pub/going-serverless-build-an-observability-mindset-38d2d74f9756>

## 对于无服务器应用程序，可观察性对您的成功至关重要。了解为什么你需要把可观察性作为你的第一个想法。

![](img/b3a38e7d5a20f23ba39b01d183bb9081.png)

图片由 Freepik 上的 pch.vector 提供

当我开始构建我的第一个无服务器应用程序时，我非常兴奋地看到它开始如此快速地组合在一起。无服务器非常适合快速开发、更短的迭代周期以及尽快找到合适的产品市场。

当我和我的团队开发这个应用程序时，我们很自然地开始测试它。我们喜欢它的速度，它的可扩展性，以及我们在屏幕上从想法变成现实的速度。

但是这种兴奋并没有持续很久。

我们的代码中某处有一个 bug，阻止我们完成一个关键的业务流程。所以我被告知找出问题所在并解决它。我找到我团队中的一名工程师，我们开始解决这个问题。

我们最终发现问题来自一个 SNS 话题的消费者。它就是不跑。我们不知道这是发布活动的问题，还是消费者本身的错误。为了解决问题，我们不知道问题到底出在哪里。

不用说，这对我来说是一个相当紧张的情况。我们在事件驱动的架构上构建这个大型分布式系统，但是我们不知道如何通过系统跟踪数据。这让我担心我们做了一个错误的决定，没有服务器。

可观察性是很难的，如果你不把它放在心上，那就更难了。在您的应用程序启动并运行之后，恢复可观察性是一项困难的任务。

# 可观察性背后的原因

我最近有机会与几个不同的可观测性平台坐在一起。我会见了 [Lumigo](https://lumigo.io/) 、 [Baselime](https://baselime.io/) 、 [Logz.io](https://logz.io/) 、 [DataDog](https://www.datadoghq.com/) 以及一些早期创业公司，讨论可观测性的现状和未来。

与这么多不同的供应商聊天让我意识到可观察性在无服务器环境中是多么重要。尽管它是无服务器的良好架构框架的[卓越运营支柱](https://docs.aws.amazon.com/wellarchitected/latest/serverless-applications-lens/operate.html)的主要焦点，但它从未真正打动过我。

直到我与托默·利维交谈后，我才意识到我们应该如此强调可观察性的真正原因。

> 可观察性是关于达到你的 SLA。

知道什么时候事情开始出错，通过架构图跟踪，从日志中聚集数据，所有这些都是为了维护系统的正常运行时间和可用性。如果您没有工具来指出何时何地出现了问题，那么您很快就会脱离您的 SLA，并给客户带来糟糕的体验。

在 SaaS，保持一致的高可用性和主动解决问题并不是一个“值得拥有”的特性。这是成功的一部分。

一个吃力不讨好的软件组件，当你做了正确的观察并在问题被报告之前做出反应时，没有人会注意到。但是如果你的服务出现问题，你很快不仅会失去你的客户，还会失去你作为一个可靠的 SaaS 供应商的信誉。

有许多选项可以在您的指尖开始观察。无论您使用应用性能监控(APM)工具还是任何刚刚在 CloudWatch 中发布的[新可观察性特性](https://aws.amazon.com/blogs/aws/category/management-tools/amazon-cloudwatch/)，重要的是您正在观察您的工作负载。

有这么多公司专门针对 APM 和可观察性的原因— **这很重要**！它是构建向消费者提供高度可靠性的应用程序的关键部分。

一次又一次，我看到构建的无服务器应用直到最后才考虑可观察性。代码编写完成后，监控工具就可以投入使用了。

虽然这种方法没有错(我们都做过)，但它确实适用于一些不太理想的监控范例。当你试图在事后使用工具或修改代码时，你就开始反对它们了。

# 最后的想法

在构建您的应用程序时，将监控和可观察性视为“一等公民”。它是架构的一部分，和其他组件一样重要。

拥有强大的可观察性实践意味着您可以实时地对事件做出反应。管理错误、扩展基础设施和跟踪分布式传奇都是保护可用性 SLA 的重要方面。高可用性不再是应用程序中的一个好特性，而是一个必备特性。正确的可观察性实践可以帮助您在问题变成主要问题之前对其进行管理。

有许多软件供应商提供他们对可观察性最佳实践的看法。依靠他们来引导你去看正确的事情，以及当事情变糟时如何反应。找到符合您的需求和团队技能的合适工具。

如果我们不及早强调可观察性，[我们将永远无法解决这个问题](https://logz.io/blog/observability-broken-6-reasons-why/)。开始将它整合到您的工作流程、设计和模式中。正如他们所说，最好的开始时间是去年。第二好的时间是今天。

编码快乐！