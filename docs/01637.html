<html>
<head>
<title>Real-Time Error Reporting — Catch Every Bug or Error</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实时错误报告—捕捉每个Bug或错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/real-time-error-reporting-catch-every-bug-or-error-4c3df3b9a49d?source=collection_archive---------21-----------------------#2019-09-30">https://betterprogramming.pub/real-time-error-reporting-catch-every-bug-or-error-4c3df3b9a49d?source=collection_archive---------21-----------------------#2019-09-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ebe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Sentry能让你捕捉到每一个错误，而且它是开源的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0a831e1485fe522575f879e099f2689d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NeAmSEBczI53ko0R.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">哨兵艺术作品—<a class="ae ky" href="https://sentry.io/" rel="noopener ugc nofollow" target="_blank">https://sentry.io/</a></p></figure><p id="6dcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">试图在你的前端应用程序或后端服务器中捕捉错误<strong class="lb iu"> </strong>可能会很棘手，因为问题很少发生，或者当你不查看日志跟踪时。但是能够抓住每一个错误真的很难能可贵！</p><p id="9745" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">市面上有很多厂商<strong class="lb iu"> </strong>向你出售一体化解决方案，实时跟踪每一个可能的错误。但是它们中的大多数都有一个锁定的代码库，阻止你更换供应商或者在你需要的时候添加新的语言。</p><p id="4221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些著名的公司有<a class="ae ky" href="https://www.bugsnag.com/" rel="noopener ugc nofollow" target="_blank"> BugSnag </a>、<a class="ae ky" href="https://rollbar.com/" rel="noopener ugc nofollow" target="_blank"> RollBar </a>、<a class="ae ky" href="https://sentry.io/welcome/" rel="noopener ugc nofollow" target="_blank"> Sentry </a>。</p><p id="f186" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，有了<a class="ae ky" href="https://sentry.io/" rel="noopener ugc nofollow" target="_blank">哨兵</a>，我们就不会被锁定，我们将获得有史以来最好的产品之一，没有我们之前讨论过的任何问题。</p><p id="15d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://sentry.io/_/open-source/" rel="noopener ugc nofollow" target="_blank">哨兵100%开源</a>！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d243" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么我需要哨兵或类似的服务？</h1><p id="a084" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我将引用<a class="ae ky" href="https://sentry.io/about/" rel="noopener ugc nofollow" target="_blank">官方哨兵声明</a>，它充分代表了为什么以现代方式处理错误或问题是至关重要的。</p><blockquote class="mz na nb"><p id="ec32" class="kz la nc lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">S <!-- --> entry通过提供跨堆栈的可见性和关于错误的深层上下文，使开发人员能够快速分类和解决问题，同时减少一切都在燃烧的压力、混乱和潜在的财务损失——从<a class="ae ky" href="https://sentry.io/about/" rel="noopener ugc nofollow" target="_blank"> Sentry </a> about页面。</p></blockquote><p id="98bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">信息是明确的。当问题出现时，您必须尽快找到并解决它们，有了Sentry，您就有能力解决每一个问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2100" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么是哨兵？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.npmtrends.com/@sentry/browser-vs-rollbar-browser-vs-airbrake-js-vs-trackjs-vs-bugsnag-js-vs-raygun4js-vs-bugsnag-vs-rollbar"><div class="gh gi ng"><img src="../Images/bf66ec278525a345adace864e66121d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XQqDA5NXGj8s2y-eVw8hZQ.png"/></div></a></figure><ul class=""><li id="ee23" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated">哨兵在去年 (2019年)<a class="ae ky" href="https://www.npmtrends.com/@sentry/browser-vs-rollbar-browser-vs-airbrake-js-vs-trackjs-vs-bugsnag-js-vs-raygun4js-vs-bugsnag-vs-rollbar" rel="noopener ugc nofollow" target="_blank">一直在急剧增长。从npm下载的趋势来看，你可以清楚地看到它正在统治竞争对手。</a></li><li id="109e" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">Sentry的创建者免费提供一个管理版本的Sentry，有一个巨大的免费计划，他们提供所有的文档让你在你的个人服务器上安装Sentry。</li><li id="a555" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">Sentry支持各种编程语言，这要感谢它的社区不断构建和添加新的包，比如:<a class="ae ky" href="https://sentry.io/for/javascript/" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>、<a class="ae ky" href="https://sentry.io/for/react/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae ky" href="https://sentry.io/for/angular/" rel="noopener ugc nofollow" target="_blank"> Angular </a>、<a class="ae ky" href="https://sentry.io/for/angular2/" rel="noopener ugc nofollow" target="_blank"> Angular 2 </a>、<a class="ae ky" href="https://sentry.io/for/ember/" rel="noopener ugc nofollow" target="_blank"> Ember </a>、<a class="ae ky" href="https://sentry.io/for/backbone/" rel="noopener ugc nofollow" target="_blank"> Backbone </a>、<a class="ae ky" href="https://sentry.io/for/vue/" rel="noopener ugc nofollow" target="_blank"> Vue </a>、<a class="ae ky" href="https://sentry.io/for/node/" rel="noopener ugc nofollow" target="_blank"> Node </a>、<a class="ae ky" href="https://sentry.io/for/express/" rel="noopener ugc nofollow" target="_blank"> Express </a>、<a class="ae ky" href="https://sentry.io/for/koa/" rel="noopener ugc nofollow" target="_blank"> Koa </a>、<a class="ae ky" href="https://sentry.io/for/celery/" rel="noopener ugc nofollow" target="_blank"> <a class="ae ky" href="https://sentry.io/for/celery/" rel="noopener ugc nofollow" target="_blank">芹菜</a>，<a class="ae ky" href="https://sentry.io/for/pythonawslambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>，<a class="ae ky" href="https://sentry.io/for/pyramid/" rel="noopener ugc nofollow" target="_blank">金字塔</a>，<a class="ae ky" href="https://sentry.io/for/rq/" rel="noopener ugc nofollow" target="_blank"> RQ </a>，<a class="ae ky" href="https://sentry.io/for/php/" rel="noopener ugc nofollow" target="_blank"> PHP </a>，<a class="ae ky" href="https://docs.sentry.io/hosted/clients/php/integrations/monolog/" rel="noopener ugc nofollow" target="_blank"> Monolog </a>，<a class="ae ky" href="https://sentry.io/for/laravel/" rel="noopener ugc nofollow" target="_blank"> Laravel </a>，<a class="ae ky" href="https://sentry.io/for/symfony/" rel="noopener ugc nofollow" target="_blank"> Symfony </a>，<a class="ae ky" href="https://sentry.io/for/ruby/" rel="noopener ugc nofollow" target="_blank"> Ruby </a>，<a class="ae ky" href="https://sentry.io/for/rails/" rel="noopener ugc nofollow" target="_blank"> Rails </a>，<a class="ae ky" href="https://sentry.io/for/sinatra/" rel="noopener ugc nofollow" target="_blank"> Sinatra </a>，<a class="ae ky" href="https://sentry.io/for/go/" rel="noopener ugc nofollow" target="_blank">Go</a> 网</a>，<a class="ae ky" href="https://sentry.io/for/dot-net/" rel="noopener ugc nofollow" target="_blank">。NET </a>，Unity也有<a class="ae ky" href="https://sentry.io/for/csharp/" rel="noopener ugc nofollow" target="_blank"> C# </a>，还有<a class="ae ky" href="https://sentry.io/for/unrealengine/" rel="noopener ugc nofollow" target="_blank">虚幻引擎</a>。</li><li id="76f2" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">为JavaScript应用程序安装它的Sentry包很小:<a class="ae ky" href="https://bundlephobia.com/result?p=@sentry/browser@5.6.3" rel="noopener ugc nofollow" target="_blank"> 17.3kb </a>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://bundlephobia.com/result?p=@sentry/browser@5.6.3"><div class="gh gi nv"><img src="../Images/63db11d1075e06726dee7284992c47bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMjDgoIMyqJXu7FBixnI3Q.png"/></div></a></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ffe7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何在React或JavaScript中安装</h1><p id="8728" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要在React或JavaScript应用程序中使用Sentry，您需要使用<code class="fe nw nx ny nz b"><a class="ae ky" href="https://www.npmjs.com/package/@sentry/browser" rel="noopener ugc nofollow" target="_blank">@sentry/browser</a></code> (Sentry的浏览器JavaScript SDK)。</p><ol class=""><li id="f433" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu oa nn no np bi translated">使用<code class="fe nw nx ny nz b">yarn</code>或<code class="fe nw nx ny nz b">npm</code>将Sentry SDK作为依赖项添加到您的项目中:</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="e6ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.去<a class="ae ky" href="https://sentry.io/auth/login/" rel="noopener ugc nofollow" target="_blank"> Sentry.io </a>登录或者注册，用你项目的特定编程语言或者框架添加一个新项目，这种情况下，React。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/83e18e9b44a57fdcf37c0e75f6f1c5bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*nrlSou3CGTw2li2cYQT23g.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/e62bc51e366a5e933dafa70d7ac6d565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*new6b9MXoso7A4AstWfR9A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">没有项目？创建一个项目并选择您正在使用的语言或框架。</p></figure><p id="ae7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.最后，您将从onboarding页面上显示的代码中复制定制的DSN URL。这是我的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/04e850060aaa2c22dd8cdc2323733845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*v6r561I0CRQzf1_gjUMw3Q.png"/></div></figure><p id="21c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您将通过在React应用程序启动之前添加一个<code class="fe nw nx ny nz b">Sentry.init</code>命令来将SDK连接到Sentry。记得从web项目中复制您的Sentry DSN密钥。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="c63b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用React ≥16并且你想使用新的<a class="ae ky" href="https://reactjs.org/docs/error-boundaries.html" rel="noopener ugc nofollow" target="_blank"> React错误边界</a>、<strong class="lb iu"> <br/> </strong>我建议你遵循<a class="ae ky" href="https://docs.sentry.io/platforms/javascript/react/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="83dc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">测试岗哨</h1><p id="12de" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们抛出一个简单的错误，您将看到第一个问题出现在Sentry仪表板中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="3ed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且，如果你去哨兵页，你会看到这个不错的错误出现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/d1279e41de326d1bb6ebe994c07d0124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WYDiM0xcS45F8tJEAKqfaQ.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e78a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何将错误链接到用户</h1><p id="dc8e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在您的应用程序中，您将拥有一个包含管理登录状态的逻辑的类。在那里，您需要添加这段代码，将任何错误链接到遇到它的用户。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c2e9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">错误看起来像什么？</h1><p id="d1dd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Sentry会自动将任何新错误与多个用户可能遇到的任何其他相关或相同的错误进行分组。</p><p id="753d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将尝试匹配和合并它们，让您看到已经分组在一起的问题的概述，您不必手动将特定错误分配给特定问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/1ea0a9b46b263c4d1b7209948bc5aea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYFBLf2p3ncIgISRANaxcw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/b6f803137ee9da3fc32b3738bf005f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UI3Yh8y3SYL-bKPczP71zQ.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a21b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">CodeSandbox哨兵+反应</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ff80" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="7f98" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我希望你开始使用Sentry或BugSnag或RollBar等其他服务来捕捉每个错误，并记住错误就像口袋妖怪一样。</p><blockquote class="ok"><p id="3df2" class="ol om it bd on oo op oq or os ot lu dk translated">“你必须抓住他们！”—前端工程师在习惯Sentry后谈论浏览器问题</p></blockquote><figure class="ou ov ow ox oy kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/684a1ae2aa78526618c857461ef77bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T2v60RzLFB7VUIaH.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">哨兵从他们的博客真棒艺术品！——<a class="ae ky" href="https://sentry.io/" rel="noopener ugc nofollow" target="_blank">https://sentry.io/</a></p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="271f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">参考资料和资源</h1><ul class=""><li id="8885" class="nh ni it lb b lc mu lf mv li oz lm pa lq pb lu nm nn no np bi translated"><a class="ae ky" href="https://www.npmtrends.com/@sentry/browser-vs-rollbar-browser-vs-airbrake-js-vs-trackjs-vs-bugsnag-js-vs-raygun4js-vs-bugsnag-vs-rollbar" rel="noopener ugc nofollow" target="_blank">https://www . NPM trends . com/@ sentry/browser-vs-roll bar-browser-vs-air brake-js-vs-track js-vs-bugsnag-js-vs-ray gun 4 js-vs-bugsnag-vs-roll bar</a></li><li id="4519" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated">https://bundlephobia.com/result?p=@sentry/browser@5.6.3<a class="ae ky" href="https://bundlephobia.com/result?p=@sentry/browser@5.6.3" rel="noopener ugc nofollow" target="_blank"/></li><li id="55f8" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" href="https://sentry.io/" rel="noopener ugc nofollow" target="_blank"> https://sentry.io </a></li><li id="d78f" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" href="https://docs.sentry.io/platforms/javascript/react/" rel="noopener ugc nofollow" target="_blank">https://docs.sentry.io/platforms/javascript/react/</a></li></ul></div></div>    
</body>
</html>