<html>
<head>
<title>Avoid Using “when” Expression as Much as Possible. Use Polymorphism Instead</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尽可能避免使用“当”的表达方式。请改用多态性</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/avoid-using-when-expression-as-much-as-possible-use-polymorphism-instead-890b92389060?source=collection_archive---------1-----------------------#2022-05-18">https://betterprogramming.pub/avoid-using-when-expression-as-much-as-possible-use-polymorphism-instead-890b92389060?source=collection_archive---------1-----------------------#2022-05-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7973" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">给Android开发人员的提示</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/74aeefdec5ead902e18c76c37b73d7bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ESBgHSr2GhAXSgiS"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@hackcapital?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">黑客资本</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="85a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">When</code>语句通常被认为有<a class="ae kv" href="https://en.wikipedia.org/wiki/Code_smell" rel="noopener ugc nofollow" target="_blank">代码味道</a>，应该避免使用。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="9b40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设<code class="fe ls lt lu lv b">Button</code>需要开发五个预定义的大小:</p><ul class=""><li id="3f68" class="md me iq ky b kz la lc ld lf mf lj mg ln mh lr mi mj mk ml bi translated">小型(高度= 16dp)</li><li id="b98b" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">中等(高度= 24dp)</li><li id="d73e" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">大(高度= 32dp)</li><li id="8092" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">巨大(高度= 40dp)</li><li id="8a7f" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">习俗</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="d0a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们仔细看看最后一个私有函数<code class="fe ls lt lu lv b">getButtonHeight</code>，了解它有什么问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="f127" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">两个问题与代码复制有关:</p><ol class=""><li id="0f0f" class="md me iq ky b kz la lc ld lf mf lj mg ln mh lr mt mj mk ml bi translated">来自<code class="fe ls lt lu lv b">Int</code>的重复创作<code class="fe ls lt lu lv b">Dp</code>。</li><li id="2ce5" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mt mj mk ml bi translated">附加运行时检查。我们已经在<code class="fe ls lt lu lv b">ViewModel</code>的某个地方决定了应该使用什么样的按钮高度。为什么要进行额外的检查？没用的。此外，它还会产生运行时开销。花在检查上的Android手机资源可能会花在其他更有价值的操作上——例如动画。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="8cfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们摆脱检查。我们所要做的就是用多态性替换<code class="fe ls lt lu lv b">when</code>表达式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="b6d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把这个例子变得更复杂。让我们假设按钮的文本和颜色取决于按钮的大小。我们将考虑这两种情况。<br/>比较下面两个片段:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">多态的例子</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">when表达式的示例</p></figure><h1 id="46a9" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">多态性的好处:</h1><ul class=""><li id="1cdd" class="md me iq ky b kz nm lc nn lf no lj np ln nq lr mi mj mk ml bi translated">它使代码库变得更小。</li><li id="83db" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">更容易扩展功能。</li><li id="e584" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">它消除了代码重复。</li><li id="9285" class="md me iq ky b kz mm lc mn lf mo lj mp ln mq lr mi mj mk ml bi translated">它减少了运行时开销。</li></ul></div></div>    
</body>
</html>