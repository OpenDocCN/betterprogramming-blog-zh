<html>
<head>
<title>Build a Markdown Editor With SwiftUI in iOS 15</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在iOS 15中用SwiftUI构建Markdown编辑器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-markdown-editor-with-swiftui-in-ios-15-767a2e9348a9?source=collection_archive---------2-----------------------#2021-06-10">https://betterprogramming.pub/build-a-markdown-editor-with-swiftui-in-ios-15-767a2e9348a9?source=collection_archive---------2-----------------------#2021-06-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2712" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只需要43行代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fe69bb231d5c391b2922a7a9e320d8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EiyHeeDx7SVtWfDNOE0w-Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Anton Maksimov juvnsky 在<a class="ae ky" href="https://unsplash.com/s/photos/typewriter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="cfad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Markdown可能是编辑和格式化富文本最简单的方法。它也非常受欢迎，几乎每个人都知道如何使用它。</p><p id="e724" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，想在你的应用中实现Markdown？它曾经是…复杂的。您需要使用第三方Markdown解析器，然后在web视图中显示结果。如果你想和SwiftUI一起使用，那么，祝你和<code class="fe lv lw lx ly b">UIViewRepresentable</code>一起工作好运。</p><p id="d99a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，好消息是:在WWDC21上，苹果发布了支持Markdown的SwiftUI 3！这是一个被忽略的特性，但也是最有趣的特性之一。在本文中，我们将用43行代码构建一个Markdown编辑器。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="7546" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从一个基本的界面开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/b2073c0c4917fdc11428d1c2781e9fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOZyTZMYCbjZk1woysiOuA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">结果</p></figure><p id="155c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，我们可以在Markdown字段中输入，文本存储在<code class="fe lv lw lx ly b">markdownText</code>中。然而，输出并没有改变。这是意料之中的，因为我们只是在展示<code class="fe lv lw lx ly b">Text(“Output goes here!”)</code>。</p><p id="5602" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我们如何在输出文本字段中呈现<code class="fe lv lw lx ly b">markdownText</code>？使用新发布的<code class="fe lv lw lx ly b">AttributedString</code> API很简单。你可以在这篇<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/ios-15-attributed-strings-in-swiftui-markdown-271204bec5c1">文章</a>中找到更多细节。</p><p id="c299" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<code class="fe lv lw lx ly b">AttributedString</code>的<code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/attributedstring/3796160-init" rel="noopener ugc nofollow" target="_blank">init(markdown:options:baseURL:)</a></code>方法从Markdown创建一个属性化的字符串。将此添加到<code class="fe lv lw lx ly b">ContentView</code>的底部:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="f096" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个方法接受一个Markdown的<code class="fe lv lw lx ly b">String</code>，然后将其转换为一个<code class="fe lv lw lx ly b">AttributedString</code>。</p><p id="5f5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在剩下的就是调用它了！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="44ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…我们还有降价编辑。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/6486749e48f93590acebdc6cba45d87a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Few-4ZgMT0OY3tF35ubWkg.png"/></div></div></figure><p id="f606" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个快速降价备忘单:</p><ul class=""><li id="ca86" class="mj mk it lb b lc ld lf lg li ml lm mm lq mn lu mo mp mq mr bi translated"><em class="ms">斜体</em>T10】</li><li id="15c9" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated"><strong class="lb iu">加粗</strong>T11】</li><li id="a369" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated">删除线<code class="fe lv lw lx ly b">~Strikethrough~</code></li><li id="d2d0" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated">代码<code class="fe lv lw lx ly b">`Code`</code></li><li id="a910" class="mj mk it lb b lc mt lf mu li mv lm mw lq mx lu mo mp mq mr bi translated">链接<code class="fe lv lw lx ly b">[Link](https://apple.com)</code></li></ul><p id="daff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里获得完整的应用程序源代码:</p><div class="my mz gp gr na nb"><a href="https://github.com/aheze/MarkdownTextEditor" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">aheze/MarkdownTextEditor</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">在GitHub上创建一个帐户，为aheze/MarkdownTextEditor开发做贡献。</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">github.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np ks nb"/></div></div></a></div></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="0da8" class="nq nr it bd ns nt nu dn nv nw nx dp ny li nz oa ob lm oc od oe lq of og oh oi bi translated">结论</h2><p id="5f54" class="pw-post-body-paragraph kz la it lb b lc oj ju le lf ok jx lh li ol lk ll lm om lo lp lq on ls lt lu im bi translated">很简单，对吧？今天只是WWDC21的第三天。还有更多的东西值得期待。</p><p id="0b6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>