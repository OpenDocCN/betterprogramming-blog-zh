<html>
<head>
<title>Create a Captcha With SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI创建验证码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-captcha-with-swiftui-ff75b750971d?source=collection_archive---------13-----------------------#2020-12-07">https://betterprogramming.pub/create-a-captcha-with-swiftui-ff75b750971d?source=collection_archive---------13-----------------------#2020-12-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3353" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">弄清楚你是不是在和人类打交道</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4454c81e7c0ab114157fccb788c13cce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OHsFD-1Dk5p_QqDJKru0BA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">验证码的一个例子。作者GIF。</p></figure><p id="5481" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如今，试图弄清楚你在和一个人还是一个机器人说话变得越来越困难。近年来，解决这一问题的实际方法是验证码——一种挑战/响应协议，它要么给你一组图像，并要求你识别其中一些图像中的某些东西，要么是一串被扭曲的文本(如上所示)。</p><p id="6290" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将重点讨论后者。我们将试图伪装一串文本，这样人类仍然可以理解它说的是什么，但机器人会很难理解。我将在SwiftUI中提出一个解决方案。</p><p id="2982" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们从哪里开始？前阵子我在<a class="ae lu" href="https://medium.com/better-programming/how-to-draw-in-3d-with-swiftui-7989cfcd35fc" rel="noopener">旋转图片</a>上发表了<a class="ae lu" href="https://medium.com/better-programming/drawing-in-3d-using-swiftui-ed211d7c2c91" rel="noopener">的几篇文章</a>。他们广泛讨论了<code class="fe lv lw lx ly b">rotationEffect</code>，这是一个可能的起点。我可以转动并扭曲文本中的数字和字母，生成一个验证码版本:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b679bb8da347b6a2096bd4b64b53ab51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Hp0Rplbeh0L05-p6mdYnBQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">十六进制字母表被captcha'd旋转3DEffect</p></figure><p id="ba64" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这张GIF中，我随机翻转了每个轴上的字母，尽管我将角度限制在65%以保持可读性。还可以，但是还有很大的改进余地。我在这里已经要解决的一个问题是，字母保留了它们自己的空间，这对于试图分析它正在看的东西的机器人来说是一个真正的泄露。</p><p id="18f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，答案就在核心图形框架中，其中一个方面可以在SwiftUI构造中访问。一种源于数学分支仿射几何的方法。它在SwiftUI中特别可用，带有<code class="fe lv lw lx ly b">transformEffect</code>标签。</p><p id="2dc7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">仿射几何有五种可能的变换:</p><ul class=""><li id="ff97" class="lz ma it la b lb lc le lf lh mb ll mc lp md lt me mf mg mh bi translated">平移，就是简单地移动X和Y原点。</li><li id="201d" class="lz ma it la b lb mi le mj lh mk ll ml lp mm lt me mf mg mh bi translated">倒影，这是一个镜像。</li><li id="a31c" class="lz ma it la b lb mi le mj lh mk ll ml lp mm lt me mf mg mh bi translated">缩放，使其变大或变小。</li><li id="4617" class="lz ma it la b lb mi le mj lh mk ll ml lp mm lt me mf mg mh bi translated">旋转，就是这么做的。</li><li id="65fe" class="lz ma it la b lb mi le mj lh mk ll ml lp mm lt me mf mg mh bi translated">剪毛，这是我们真正感兴趣的。</li></ul><p id="9ab8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">剪切图像会使其扭曲或变形。这对我们的验证码很重要，因为人类的大脑擅长纠正这种事情，但你的普通机器人不擅长。巧合的是，上周我写了一篇文章关于剪切图像产生的形状。它被称为梯形。</p><p id="c46e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到代码。这一切意味着什么，它是如何工作的？如果你有一个模板，理解离线转换是很容易的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/a8cbbc36af1f2def139ee94327f27d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:196/format:webp/1*vQd9PvCMRQl2IiyMIrzIXg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae lu" href="https://en.wikipedia.org/wiki/Affine_transformation" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></figure><p id="d46f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是所谓的单位矩阵——一个表示没有任何变换的图像的矩阵。现在，通过改变不同位置的值，您可以有效地描述如何改变它所涉及的仿射空间。</p><p id="dac9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，通过代码，我们可以定义10度的剪切变换:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="106c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些字母映射到我之前介绍的矩阵。使用warping，我们可以创建一个更加狂野的captcha(本文开头给出的那个)。请注意，我从模板的维基百科页面获取了这里需要的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/edcdc962f81bd971c433cf18cd82e0b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gc1BFgxjt2F0G0IonQigbg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae lu" href="https://en.wikipedia.org/wiki/Affine_transformation#/media/File:2D_affine_transformation_matrix.svg" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></figure><p id="609f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所有这些让我想到这篇短文的结尾。以下是使用核心动画进行各种变换所需的iOS代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="1454" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是等等，在我离开之前，这里还有另外两个技巧。</p><p id="76d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先是用一种无论如何都很难读懂的字体。这听起来有点愚蠢，不是吗？但如果你想想手头的任务，这是有意义的。</p><p id="d889" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二种方法是在图片中引入噪声——足以扰乱图像处理算法，但又不至于让你看不清文字。这是一条微妙的线，我将留给你去探索。</p><p id="0fe1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>