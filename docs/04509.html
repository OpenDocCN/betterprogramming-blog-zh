<html>
<head>
<title>Unicode Equivalence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unicode等价</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/unicode-equivalence-72c152e7b098?source=collection_archive---------9-----------------------#2020-04-17">https://betterprogramming.pub/unicode-equivalence-72c152e7b098?source=collection_archive---------9-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2b7c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">并非所有表情符号都是平等的</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/265aa132e67027471b9441a5b06cf181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aGkHyrmWkzfPxSZCFhnI9w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">阿玛多·洛雷罗在<a class="ae kv" href="https://unsplash.com/s/photos/letters?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="00e8" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">统一码</h1><blockquote class="lo lp lq"><p id="e706" class="lr ls lt lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">世界上的每个人都应该能够在电话和电脑上使用自己的语言。— <a class="ae kv" href="https://home.unicode.org/" rel="noopener ugc nofollow" target="_blank"> Unicode Consortium主页</a></p></blockquote><p id="1178" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">Unicode标准为每个字符定义了不同的代码。它的编码基础足以支持世界上所有语言使用的书写系统。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/f569385ef5af9bf09471853a5bb3066e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*gf3skBN8S4Cgu8FI423epw.png"/></div></figure></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="9710" class="kw kx iq bd ky kz mz lb lc ld na lf lg jw nb jx li jz nc ka lk kc nd kd lm ln bi translated">Unicode等价</h1><p id="2716" class="pw-post-body-paragraph lr ls iq lu b lv ne jr lx ly nf ju ma mo ng md me mp nh mh mi mq ni ml mm mn ij bi translated">即使使用相同的编码标准(Unicode)，文本也可能以不同的形式表示。例如，你认为<strong class="lu ir"/>等于<strong class="lu ir"> ã </strong>吗？</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="95c6" class="no kx iq nk b gy np nq l nr ns">'ã' === 'ã' → false<br/>'ã'.length → 1<br/>'ã'.length → 2</span></pre><p id="4edd" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">结果，同一个字符，如本例中的“<em class="lt">带颚化符的拉丁文小写字母A”，</em>可以用不同的形式进行规范化，最终得到不同的Unicode表示。然而，在大多数情况下，我们可能希望独立于Unicode表示来比较两个字符串。这就是正常化的目的。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="6c28" class="kw kx iq bd ky kz mz lb lc ld na lf lg jw nb jx li jz nc ka lk kc nd kd lm ln bi translated">正常化</h1><p id="4089" class="pw-post-body-paragraph lr ls iq lu b lv ne jr lx ly nf ju ma mo ng md me mp nh mh mi mq ni ml mm mn ij bi translated">规范化通过以特定顺序组合所有标记，并使用分解和组合规则将每个字符串转换为Unicode规范化形式之一，来确定两个字符是否等效:</p><ul class=""><li id="d845" class="nt nu iq lu b lv lw ly lz mo nv mp nw mq nx mn ny nz oa ob bi translated"><strong class="lu ir">规范化形式D (NFD) </strong>:规范分解</li><li id="e942" class="nt nu iq lu b lv oc ly od mo oe mp of mq og mn ny nz oa ob bi translated"><strong class="lu ir">规范化形式C (NFC) </strong>:规范分解，<br/>后接规范合成</li><li id="87d8" class="nt nu iq lu b lv oc ly od mo oe mp of mq og mn ny nz oa ob bi translated"><strong class="lu ir">规范化形式KD (NFKD) </strong>:兼容性分解</li><li id="3020" class="nt nu iq lu b lv oc ly od mo oe mp of mq og mn ny nz oa ob bi translated"><strong class="lu ir">规范化形式KC (NFKC) </strong>:相容性分解，<br/>后为规范合成</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/68ac7cd820c481aaca6f1b48b55244fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*1Pmwm9liOqTOdEo9-SAUgQ.png"/></div></figure><p id="74a5" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">因此，在我们的示例中，第一个字符用NFC表示，它将值组合成一个Unicode值(<strong class="lu ir"> U+00E3 </strong>)，而第二个字符用NFD表示，它将字符分解成多个Unicode值(<strong class="lu ir"> U+0061 U+0303 </strong>)。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="53ee" class="no kx iq nk b gy np nq l nr ns">'ã'.normalize('NFC') === 'ã'.normalize('NFC') → true<br/>'ã'.normalize('NFC').length → 1<br/>'ã'.normalize('NFC').length → 1</span></pre><p id="d757" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">为了解释NFKC和NFKD，让我们用一个不同的例子——<strong class="lu ir">ẛ̣</strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/b0a38f6f386d3fa943865dc59de0c240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*WJgTvC0P5rHjZboMh-iIWw.png"/></div></figure><p id="c3c0" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">正如我们所见，在NFKC和NFKD中，它可以消除改变输出的格式差异。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="d29b" class="kw kx iq bd ky kz mz lb lc ld na lf lg jw nb jx li jz nc ka lk kc nd kd lm ln bi translated">选择哪种归一化？</h1><p id="b641" class="pw-post-body-paragraph lr ls iq lu b lv ne jr lx ly nf ju ma mo ng md me mp nh mh mi mq ni ml mm mn ij bi translated">W3C建议尽可能开发WWW NFC:</p><blockquote class="lo lp lq"><p id="f08d" class="lr ls lt lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">内容作者应尽可能对内容使用Unicode标准化格式C (NFC)。请注意，NFC并不总是适用于内容，甚至对于某些语言的内容作者也不可用。— <a class="ae kv" href="https://www.w3.org/TR/charmod-norm/" rel="noopener ugc nofollow" target="_blank"> W3C工作组</a></p></blockquote><p id="cfc2" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">其他规范化形式是针对我们大多数人都不会经历的特定场景。例如，NFKC和NFKD可以用来将一个罗马数字分解成多个字符，比如将<strong class="lu ir">ⅷ</strong>变成<strong class="lu ir">ⅷ</strong>。NFD可以用于模糊搜索，例如在需要忽略标记的情况下——例如，搜索<strong class="lu ir"> a </strong>也应该包括带有<strong class="lu ir">和</strong>的结果。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="e59c" class="kw kx iq bd ky kz mz lb lc ld na lf lg jw nb jx li jz nc ka lk kc nd kd lm ln bi translated">Java Script语言</h1><p id="caee" class="pw-post-body-paragraph lr ls iq lu b lv ne jr lx ly nf ju ma mo ng md me mp nh mh mi mq ni ml mm mn ij bi translated">Javascript中的文本规范化:</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="6f34" class="no kx iq nk b gy np nq l nr ns">const value = "ã"</span><span id="3ce6" class="no kx iq nk b gy oj nq l nr ns">console.log('Unicode codepoint:', <br/>  value.charCodeAt(0).toString(16),<br/>  value.charCodeAt(1).toString(16))<br/>// → Unicode codepoint: 61 303</span><span id="6d7a" class="no kx iq nk b gy oj nq l nr ns">console.log('Normalize:', value.normalize('NFC'))</span></pre><p id="7687" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize" rel="noopener ugc nofollow" target="_blank"> Javascript规范化方法文档</a></p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="e65a" class="kw kx iq bd ky kz mz lb lc ld na lf lg jw nb jx li jz nc ka lk kc nd kd lm ln bi translated">戈朗</h1><p id="749e" class="pw-post-body-paragraph lr ls iq lu b lv ne jr lx ly nf ju ma mo ng md me mp nh mh mi mq ni ml mm mn ij bi translated">Go中的文本规范化:</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="06f8" class="no kx iq nk b gy np nq l nr ns">package main</span><span id="8469" class="no kx iq nk b gy oj nq l nr ns">import (<br/> "fmt"</span><span id="81c2" class="no kx iq nk b gy oj nq l nr ns"> "golang.org/x/text/unicode/norm"<br/>)</span><span id="f4ac" class="no kx iq nk b gy oj nq l nr ns">func main() {<br/> value := "ã"</span><span id="b849" class="no kx iq nk b gy oj nq l nr ns"> fmt.Printf("Unicode codepoint: %U\n", []rune(value))<br/> //→ Unicode codepoint: [U+0061 U+0303]</span><span id="f431" class="no kx iq nk b gy oj nq l nr ns"> fmt.Println("Normalize:", string(norm.NFC.Bytes([]byte(value))))<br/>}</span></pre><p id="4f09" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated"><a class="ae kv" href="https://pkg.go.dev/golang.org/x/text/unicode/norm?tab=doc" rel="noopener ugc nofollow" target="_blank"> Golang定额包文档</a></p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="fe24" class="kw kx iq bd ky kz mz lb lc ld na lf lg jw nb jx li jz nc ka lk kc nd kd lm ln bi translated">参考</h1><ul class=""><li id="ca1b" class="nt nu iq lu b lv ne ly nf mo ok mp ol mq om mn ny nz oa ob bi translated"><a class="ae kv" href="http://unicode.org/reports/tr15/" rel="noopener ugc nofollow" target="_blank">http://unicode.org/reports/tr15/</a></li><li id="18a8" class="nt nu iq lu b lv oc ly od mo oe mp of mq og mn ny nz oa ob bi translated"><a class="ae kv" href="https://blog.golang.org/normalization" rel="noopener ugc nofollow" target="_blank">https://blog.golang.org/normalization</a></li><li id="8a33" class="nt nu iq lu b lv oc ly od mo oe mp of mq og mn ny nz oa ob bi translated"><a class="ae kv" href="https://www.win.tue.nl/~aeb/linux/uc/nfc_vs_nfd.html" rel="noopener ugc nofollow" target="_blank">https://www.win.tue.nl/~aeb/linux/uc/nfc_vs_nfd.html</a></li></ul></div></div>    
</body>
</html>