<html>
<head>
<title>How To Change the Status Bar Color With SwiftUI on a Specific View</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SwiftUI在特定视图上更改状态栏颜色</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-change-the-status-bar-color-with-swiftui-on-a-specific-view-36f773d78549?source=collection_archive---------2-----------------------#2022-03-10">https://betterprogramming.pub/how-to-change-the-status-bar-color-with-swiftui-on-a-specific-view-36f773d78549?source=collection_archive---------2-----------------------#2022-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8cbc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在<em class="ki"> SwiftUI </em>中使用<em class="ki"> ViewModifier </em>的小技巧</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/85132851fbecabe960545c2856739c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZFki0SehcmN15RfVBTWv2g.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">资料来源:undraw.co</p></figure><p id="b132" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还记得以前在UIKit <em class="lv"> </em>中的美好时光吗？那时只需在特定的<code class="fe lw lx ly lz b">UIViewController</code>上使用这段代码就可以非常简单地改变状态栏的颜色。</p><pre class="kk kl km kn gt ma lz mb mc aw md bi"><span id="30f1" class="me mf it lz b gy mg mh l mi mj">override var preferredStatusBarStyle: UIStatusBarStyle {<br/>    .lightContent<br/>}</span></pre><p id="b1e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在有了SwiftUI，即使我们的生活在声明式UI下看起来更简单，但我们似乎总会在这里或那里发现一些小问题，让我们做更多的工作。SwiftUI中的类似行为就是这种情况。</p><p id="9c9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个解决方案(不是理想的解决方案，因为<code class="fe lw lx ly lz b">UIApplication.shared.statusBarStyle</code> <em class="lv"> </em>在iOS 13中被声明不推荐使用，但仍然有效，特别是如果你没有场景委托，并且你正在使用iOS 14)。</p><h1 id="42eb" class="mk mf it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">1.配置<em class="ki">信息列表</em></h1><p id="d761" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">确保您已经将<code class="fe lw lx ly lz b">Info.plist</code>配置为允许这样做。只要在上面加上这一行:</p><pre class="kk kl km kn gt ma lz mb mc aw md bi"><span id="d701" class="me mf it lz b gy mg mh l mi mj">&lt;key&gt;UIViewControllerBasedStatusBarAppearance&lt;/key&gt;<br/>&lt;false/&gt;</span></pre><h1 id="e5eb" class="mk mf it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">2.创建自定义ViewModifier和View协议的扩展</h1><p id="107b" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">让我们创建一个自定义的<code class="fe lw lx ly lz b">ViewModifier</code>(关于它的更多信息，你可以查看苹果的文档链接<a class="ae ng" href="https://developer.apple.com/documentation/swiftui/viewmodifier" rel="noopener ugc nofollow" target="_blank">这里</a>)，然后将它应用到我们的屏幕<code class="fe lw lx ly lz b">MyView</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="c264" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">警告:<code class="fe lw lx ly lz b">ViewModifier</code>应用于颜色，而不是<code class="fe lw lx ly lz b">NavigationView</code>，否则它不会在视图消失时重置(因为导航将保持活动)。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/ff49697e2c84a01522c0f1c9d3f2d6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*HKfS0cQiImWGpbAu1iUFwQ.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">上面代码的模拟器屏幕</p></figure><p id="68e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有一个<code class="fe lw lx ly lz b">SceneDelegate</code>(主要是在iOS 14之前)，那么你可以用一个自定义的<code class="fe lw lx ly lz b">UIHostController</code> <em class="lv">来完成这个任务。</em></p><p id="f971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在以后的文章中，我将展示如何在使用<code class="fe lw lx ly lz b">@main</code>和<code class="fe lw lx ly lz b">WindowGroup</code>时做到这一点。</p></div></div>    
</body>
</html>