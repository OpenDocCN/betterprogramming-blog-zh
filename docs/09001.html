<html>
<head>
<title>How To Resolve a Pull Request Conflict Between Humans</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何解决人与人之间的拉请求冲突</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-resolve-a-pull-request-conflict-between-humans-1b6715b1432d?source=collection_archive---------9-----------------------#2021-07-05">https://betterprogramming.pub/how-to-resolve-a-pull-request-conflict-between-humans-1b6715b1432d?source=collection_archive---------9-----------------------#2021-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e6d3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">人类的冲突并不都是闪闪发光的金子</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/821d0b91b6401c62feec912039e050f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BEoRyTaLhWcXFXHN"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">赫尔墨斯·里维拉在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="937e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">拉请求通常有两种冲突:代码冲突和人为冲突。</p><p id="6554" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当源分支没有目标分支的提交时，就会发生代码冲突。您可以通过合并或重组来解决代码冲突。两种方式都是对的。然而，人类的冲突并不总是那么简单。</p><p id="479d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当两个开发人员，通常是作者和评审者，对一段代码有不同的观点时，就会发生人员冲突。有时一种观点显然比另一种更好。有时两者似乎都是正确的。</p><p id="202d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是其中一方或者第三方，你会如何处理这种情况？你如何客观地判断一段代码？在这篇文章中，我将带你经历四个判断标准，这些标准可以用来解决这样的人类冲突。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="751e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">个案研究</h1><p id="37f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了理解什么会导致人类冲突，让我们看看下面的示例代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><ul class=""><li id="b982" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">第一个代码块生成一个包含1，000，000个元素的虚拟数组，其中包含字段<code class="fe nk nl nm nn b">sex</code>和<code class="fe nk nl nm nn b">name</code>。一半的元素是女性，另一半是男性。名字并不重要。</li><li id="2d12" class="nb nc it lb b lc no lf np li nq lm nr lq ns lu ng nh ni nj bi translated">代码的第二部分是一个从上面的数组中获取男性姓名列表的函数。它使用传统的<code class="fe nk nl nm nn b">for</code>循环来迭代数组。通过检查元素的<code class="fe nk nl nm nn b">sex</code>字段，如果<code class="fe nk nl nm nn b">sex === 'M'</code>，该函数将名称推送到输出数组。</li><li id="9093" class="nb nc it lb b lc no lf np li nq lm nr lq ns lu ng nh ni nj bi translated">第三个代码块是另一个旨在实现与前一个函数相同结果的函数，但是它使用了<code class="fe nk nl nm nn b">Array.prototype</code>函数<code class="fe nk nl nm nn b">filter</code>和<code class="fe nk nl nm nn b">map</code>。</li><li id="90bb" class="nb nc it lb b lc no lf np li nq lm nr lq ns lu ng nh ni nj bi translated">最后一段代码是调试两个函数的执行时间。</li></ul><p id="fa26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，你的团队里有人写了<code class="fe nk nl nm nn b">getMaleNames1</code>函数，但你觉得<code class="fe nk nl nm nn b">getMaleNames2</code>函数更好。你如何证明你的建议是正确的？还是反过来？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/52e1d67e31f5e759b59ce97d71ecedd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*-nYDwT7Mr7cWmJ7Y.jpg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://imgflip.com/memegenerator/Marvel-Civil-War-1" rel="noopener ugc nofollow" target="_blank">漫威内战1迷因生成器</a></p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="97b0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.正确性</h1><p id="e00c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">实现的正确性是最重要的标准。如果拉请求中的解决方案显然返回了一个错误的结果或者没有处理所有的情况，那么必须采用解决问题的注释。</p><p id="a717" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这非常简单，但它几乎不是冲突的原因。在案例研究中，两个函数都是正确的，并且产生相同的结果，所以我们需要考虑下一个因素。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b799" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.表演</h1><p id="06a9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在继续或者运行上面的代码之前，能不能暂停一下，猜猜哪个函数更快？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/92cd287974d04b6db2932997a3b4c06a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DVpuyAprfm8enyUyR5xgKg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://imgflip.com/memegenerator/316678270/Think-Mark-Think" rel="noopener ugc nofollow" target="_blank">思迹思模因生成器</a></p></figure><p id="c7ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大概也没那么难猜。事不宜迟，让我们检查一下运行时比较:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/fa0ff8b4687e7a18215645c5d19d9e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mr3xwpYrxOMKYhpMr9TDzQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">两个函数的运行时比较</p></figure><p id="53c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据结果，第一个函数比第二个函数快，平均快2.76倍。虽然两个函数都有O(n)时间复杂度，<code class="fe nk nl nm nn b">for</code>循环只迭代数组一次，但是<code class="fe nk nl nm nn b">filter</code>和<code class="fe nk nl nm nn b">map</code>迭代数组1.5次。(在<code class="fe nk nl nm nn b">filter</code>函数之后，数组长度变成一半。)</p><p id="37f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这并不是为了对比一个<code class="fe nk nl nm nn b">for</code>循环与一个<code class="fe nk nl nm nn b">map</code>功能或一个<code class="fe nk nl nm nn b">filter</code>功能的性能。那将是改天的另一篇文章。</p><p id="c053" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种性能差异显著吗？是也不是，看比例的话，第一个函数比第二个函数跑快276%！如果看毫秒，两者都很难达到50ms。没有人会注意到延迟的变化，即使你交换它们。</p><p id="11f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能想指出元素的数量并不总是一百万。元素数量增加到1亿会怎样？两个函数之间的运行时间差异现在是<code class="fe nk nl nm nn b">|1.230s — 3.390s| = 2.16s</code>。这是一个重大的延误。</p><p id="c492" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我会辩论这一亿是现实的还是假设的。是一般情况还是最坏情况？是基于我们现在掌握的数据还是为了未来的预防？</p><p id="ed14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">性能方面，还是模棱两可。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9edb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.指导方针</h1><p id="fe76" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">原则</strong>是编程中改进软件设计和代码实现的通用指南，例如，SOLID、DRY、YAGNI等。</p><p id="f38c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">规则</strong>是一套指导方针，确保代码是基于一种令人愉快的风格和惯例编写的。</p><p id="b54d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些规则防止特定的问题，一些规则定义特定的代码风格。规则可以是基于项目、基于团队、基于组织或基于社区的。</p><p id="19f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JavaScript / TypeScript中，您可以使用ESLint通过社区或知名组织的预设建议来实施规则。</p><p id="e39f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于您的团队和项目，您可能需要额外的自定义规则来确保每个人都以相似的方式编写代码。团队成员应该不时地讨论、同意、记录和更新这些规则。例如:</p><ul class=""><li id="b735" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">比起类组件，更喜欢功能组件。</li><li id="c31d" class="nb nc it lb b lc no lf np li nq lm nr lq ns lu ng nh ni nj bi translated">比起常规函数，更喜欢箭头函数。</li><li id="d6c8" class="nb nc it lb b lc no lf np li nq lm nr lq ns lu ng nh ni nj bi translated">文件夹结构和命名约定。</li></ul><p id="089f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">案例研究中的两个功能似乎都没有违反任何标准规则或原则。除非您的团队有不使用传统的<code class="fe nk nl nm nn b">for</code>循环的自定义规则，否则这两个函数都遵循标准指南。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="460a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.所有权</h1><p id="d451" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们站在作者的角度思考一下。当你用一个<code class="fe nk nl nm nn b">for</code>循环写函数，提出一个拉请求，一个评审建议你把它改成<code class="fe nk nl nm nn b">filter</code>和<code class="fe nk nl nm nn b">map</code>，你愿意改变吗？</p><p id="4ae4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">肯定不是，你为什么要花额外的时间重写函数呢？可读性更强吗？语法是不是短了很多？重写一个不会带来显著改进的函数的成本只是浪费时间。</p><p id="62cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当一段代码不比另一段代码更好或更差时，拥有最终发言权的人应该是作者。作者拿起这张票，考虑了一下如何实现它，并花了真正的精力来编写这段代码。</p><p id="1dd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应该尊重作者的决定。如果他们坚持他们的实现，那很酷。这为他们节省了时间去做更重要的事情。如果他们决定改变，那就是双赢。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f9ca" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">你能拿走什么</h1><p id="9111" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">总而言之，在审查拉请求时，您应该根据这些标准和优先级来评估任何代码段:</p><p id="421a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">正确性&gt;性能&gt;准则&gt;所有权</strong></p><p id="455e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种优先排序绝不是解决人类冲突黄金标准或银弹，但它消除了偏见，并导致一个明确的结论。如果你不这么认为，请在评论中告诉我。</p><p id="f7b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道更多关于拉式请求的礼节，看看下面的另一个故事。干杯！</p><div class="nw nx gp gr ny nz"><a rel="noopener  ugc nofollow" target="_blank" href="/pull-request-etiquettes-for-reviewer-and-author-f4e80360f92c"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">审阅者和作者的拉式请求礼仪</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">小心那些LGTMs</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">better编程. pub</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ks nz"/></div></div></a></div></div></div>    
</body>
</html>