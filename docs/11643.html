<html>
<head>
<title>7 Annoying Things About Jetpack Compose According to Me</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于Jetpack的7件令人讨厌的事情</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/7-annoying-things-about-jetpack-compose-according-to-me-bdb3c8fdf7d0?source=collection_archive---------8-----------------------#2022-04-05">https://betterprogramming.pub/7-annoying-things-about-jetpack-compose-according-to-me-bdb3c8fdf7d0?source=collection_archive---------8-----------------------#2022-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a5b3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">compose中令人讨厌的错误和缺失的功能，这是我在全职工作时将一个遗留应用程序迁移到compose时亲自遇到的。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cfa59659868614e53a01c8b8e738cb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wfbx1Iuwne-4-sfMr2GQQA.png"/></div></div></figure><p id="f1d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Jetpack Compose可以说是Android开发领域最激动人心的创新之一。它给陈旧的XML UI系统带来了新鲜空气，带来了许多改进。</p><p id="9984" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最重要的是，它的发展速度也是惊人的。自从它稳定下来已经快一年了，正在被各个团队采用。但并非一切都是完美的。Jetpack compose仍然有一些不完全成熟或尚未开发的领域。在这篇文章中，我将回顾一些恼人的错误和缺失的功能，这些都是我在全职迁移一个遗留应用以进行compose和我自己的一些附带项目时亲身遇到的。</p><h1 id="35d5" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">1.预览性能</h1><p id="faac" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在Android studio中，我们可以设置预览，以便查看我们在compose中实现的设计。但是就性能而言，这个预览版与旧的XML预览版相差甚远。更改不会立即显示在屏幕上，需要重建才能看到。但是随着时间的推移，compose预览版将会出现，并且很可能超过XML预览版。最近有一些更新来支持交互性和预览动画。</p><h1 id="daf4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">2.缺少图书馆</h1><p id="e796" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">根据您开始使用compose的时间，与我们通常习惯的UI库相比，您会发现非常少的UI库。我已经为一些常见的问题创建了定制的解决方案(从好的方面来看，这给了我更多编写可组合件的经验)。这当然是意料之中的，因为compose还相对年轻。</p><h1 id="5bd6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">3.性能监控</h1><p id="f12d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">性能是一个应用程序非常关键的一部分，我们作为开发人员的工作就是为我们的用户保持流畅的体验。不幸的是，如果没有合适的工具来调试性能，我们就无法做到这一点。我们仍然可以使用调试旧的XML UI的工具，但是我认为我们需要新的工具和系统来构建声明性系统。根据我的经验，大多数UI在编写时的延迟都是由对状态如何工作的误解引起的，最终导致了多次不必要的重新编写。Google Play团队也意识到了这一点，并构建了一个<a class="ae mk" href="https://github.com/android/snippets/blob/master/compose/recomposehighlighter/src/main/java/com/example/android/compose/recomposehighlighter/RecomposeHighlighter.kt" rel="noopener ugc nofollow" target="_blank">自定义修改器</a>，用于在优化过程中跟踪重组。像这样的工具应该更容易访问，直接进入compose。Android Studio中也可以有警告，以避免导致UI滞后的常见反模式。</p><h1 id="368a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">4.广告(ad的复数)</h1><p id="0ad1" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">大多数应用程序依靠广告获得收入。因此，你可能需要以某种方式在你的应用程序中实现广告。但是如果您在应用程序中使用compose，您可能会遇到一些必须切换到XML视图的情况。在jetpack compose中，Ad库本身还不可用。当您用xml定义广告的文本元素，但仍然需要将它与撰写主题的设计相匹配时，这就成了一个问题，尤其是对于原生广告。<code class="fe ml mm mn mo b">AndroidView</code>确实提供了非常好的互操作性，但我认为这只是连接两个世界的垫脚石。为了获得更好的体验，广告库应该提供广告容器的可组合版本。</p><h1 id="09b5" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">5.导航动画</h1><p id="6763" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">任何超过一个屏幕的应用程序都需要一个系统来管理应用程序的导航。喷气背包导航是官方推荐的方式，但它有一个难以忽视的奇怪的<a class="ae mk" href="https://issuetracker.google.com/issues/172112072#comment25" rel="noopener ugc nofollow" target="_blank">缺陷</a>。屏幕之间有一个渐变动画，这是不可配置的，也不能关闭。还有另一个<a class="ae mk" href="https://issuetracker.google.com/issues/197140101" rel="noopener ugc nofollow" target="_blank">问题</a>跟踪当导航时动画将被添加，但是现在，你可以使用伴奏导航库并调整或关闭动画。</p><h1 id="3832" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">6.列表动画</h1><p id="0bb3" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">为RecyclerView编写适配器和视图持有者的日子已经一去不复返了。现在我们有了可以在几秒钟内创建的LazyLists。但在动画方面，还是比不上<code class="fe ml mm mn mo b">RecyclerView</code>。已经有一些<a class="ae mk" href="https://developer.android.com/reference/kotlin/androidx/compose/foundation/lazy/LazyItemScope#(androidx.compose.ui.Modifier).animateItemPlacement(androidx.compose.animation.core.FiniteAnimationSpec)" rel="noopener ugc nofollow" target="_blank">更新</a>添加了重新排序的动画(尽管已经有一些<a class="ae mk" href="https://issuetracker.google.com/issues/150812265#comment18" rel="noopener ugc nofollow" target="_blank">问题</a>对此进行了报道)，但是仍然没有添加和删除动画的官方实现。我一直在我的应用程序中使用这个<a class="ae mk" href="https://github.com/davidliu/LazyColumnItemDiffAnimations" rel="noopener ugc nofollow" target="_blank">解决方案</a>，直到有一个正式和稳定的实现。</p><h1 id="1ed8" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">7.飞虫</h1><p id="1771" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">最后一个看起来很小，但对用户如何看待这个应用有很大的影响。嵌套滚动是某些UI模式中的常见构建块。无论是一个折叠的应用程序栏还是一个带有列表的模态，它都有很多用途。在这些情况下，滚动性能应该是反应性的和平滑的。失败的话，应用程序可能会觉得不自然或者不是本地的。<a class="ae mk" href="https://issuetracker.google.com/issues/179417109" rel="noopener ugc nofollow" target="_blank"> fling bug </a>在滚动时提供了错误的速度值，导致列表瞬间停止滚动，甚至开始向错误的方向滚动。</p><p id="f052" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以上是迁移写作时遇到的7件烦心事。如果你想分享我的沮丧，或者你已经找到了解决这些问题的适当方法，请告诉我</p><p id="8703" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读，祝你好运！</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="40dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mw">最初发表于</em><a class="ae mk" href="https://sinasamaki.com/post/2022-04-05-compose-7-shortcomings/" rel="noopener ugc nofollow" target="_blank">T5【https://sinasamaki.com】</a><em class="mw">。</em></p></div></div>    
</body>
</html>