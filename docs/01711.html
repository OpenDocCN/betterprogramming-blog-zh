<html>
<head>
<title>Introduction to Higher-Order Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">高阶函数介绍</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introduction-to-higher-order-functions-3ff0a05b40eb?source=collection_archive---------10-----------------------#2019-10-07">https://betterprogramming.pub/introduction-to-higher-order-functions-3ff0a05b40eb?source=collection_archive---------10-----------------------#2019-10-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d0af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过示例理解高阶函数，如map、filter和reduce</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8fb1cc7723adb5bf1c7e4034c1465fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ai6Dtj1nxefZF9FC"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">由<a class="ae ku" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">萨法尔·萨法罗夫</a>在<a class="ae ku" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="f503" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">高阶函数</h1><p id="7075" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated"><em class="mq">高阶函数</em>是接受另一个函数作为参数或者返回一个函数作为其返回类型的函数。理解这一点最简单的方法是认识到函数可以像任何其他数据一样被处理。</p><p id="e938" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">在支持高阶函数的语言中，就像使用<code class="fe mw mx my mz b">String</code>或<code class="fe mw mx my mz b">Integer</code>一样，您可以将函数作为参数传递、存储并返回。</p></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="d577" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">匿名函数</h1><p id="16c0" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">在探索高阶函数之前，首先要了解匿名函数，它通常与高阶函数一起使用。</p><p id="1dc6" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">一个匿名函数，或者说<em class="mq"> lambda </em>，仅仅是一个没有任何命名标识符来引用它的函数。它们仍然可以存储在变量中，因此仍然可以在代码中命名，但是函数本身是在没有附加名称的情况下声明的。</p><p id="8d88" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">例如，在Java中，一个简单的匿名函数如下所示:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="2e88" class="ne ld it mz b gy nf ng l nh ni">x -&gt; x + 1</span></pre><p id="1e7a" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">该功能的输入为<code class="fe mw mx my mz b">x</code>，输出为<code class="fe mw mx my mz b">x + 1</code>。</p><p id="0144" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">匿名函数的语法在不同的语言中略有不同，但是它通常以(输入)→(输出)的形式编写。</p><p id="0aca" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">通常使用匿名函数，因为它们避免了与将它们正式声明为命名函数相关的样板代码。因此，对于可能不会在多个地方使用的简单函数，比如上面的函数，使用匿名函数可能更合适。</p><h2 id="9371" class="ne ld it bd le nj nk dn li nl nm dp lm md nn no lo mh np nq lq ml nr ns ls nt bi translated">例子</h2><p id="74a0" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">现在，我们将进入一个使用匿名函数的高阶函数的非常基本的例子。这个例子使用Python，其中匿名函数的语法是<code class="fe mw mx my mz b">lambda (inputs): (output)</code>。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="6378" class="ne ld it mz b gy nf ng l nh ni">def add_n(n):<br/>    return lambda x: x + n</span></pre><p id="6b55" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">这个例子采用一个数字<code class="fe mw mx my mz b">n</code>并返回一个将<code class="fe mw mx my mz b">n</code>加到输入中的函数。</p><p id="6913" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">所以，如果我们想把1 + 2相加，我们可以通过调用<code class="fe mw mx my mz b">add_n(2)(1)</code>来实现。第一个调用<code class="fe mw mx my mz b">add_n(2)</code>返回一个将2加到其输入的函数，第二个调用<code class="fe mw mx my mz b">(1)</code>使用该函数将2加到1。</p></div><div class="ab cl kv kw hx kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="im in io ip iq"><h1 id="01f0" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">常见高阶函数</h1><p id="8789" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">有几个特定的高阶函数对于理解现代代码库是必不可少的。这些函数主要处理数据列表的迭代或求和。</p><p id="ad78" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">它们提供了一种更简洁的方式来处理常见的列表操作，使您不必创建大量的助手代码来完成基本的列表操作。这将创建意图更加明确的代码。</p><p id="ab91" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">对于这些例子，我将通篇使用Python式的代码。其他大多数现代语言，比如Java和JavaScript，也有这些特性。</p><h2 id="ee74" class="ne ld it bd le nj nk dn li nl nm dp lm md nn no lo mh np nq lq ml nr ns ls nt bi translated">地图</h2><p id="89f0" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated"><code class="fe mw mx my mz b">map</code>操作允许你对列表的每个元素应用一个函数，然后返回一个包含新值的新列表。</p><p id="d11a" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">如果没有<code class="fe mw mx my mz b">map</code>，你的代码应该是这样的:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="de73" class="ne ld it mz b gy nf ng l nh ni">new_list = []<br/>old_list = [...]</span><span id="0e83" class="ne ld it mz b gy nu ng l nh ni">for e in old_list:<br/>    new_list.append(some_function(e))</span><span id="7b2e" class="ne ld it mz b gy nu ng l nh ni">return new_list</span></pre><p id="bcc9" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">在这里，我们的目标是将<code class="fe mw mx my mz b">some_function</code>应用到<code class="fe mw mx my mz b">old_list</code>的每个元素中。在这个循环的最后，<code class="fe mw mx my mz b">new_list</code>现在包含了这个结果。</p><p id="d6f9" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">有了<code class="fe mw mx my mz b">map</code>，我们可以用更干净的方式来做这件事。</p><p id="68ec" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated"><code class="fe mw mx my mz b">map</code>函数接受一个函数和一个列表，并返回一个新列表，该函数应用于列表的每个元素。它的用法如下:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="f7b2" class="ne ld it mz b gy nf ng l nh ni">old_list = [...]<br/>return <strong class="mz iu">map</strong>(some_function, old_list)</span></pre><p id="fe1f" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">所以，如果<code class="fe mw mx my mz b">old_list = [1, 2, 3]</code>和<code class="fe mw mx my mz b">some_function = lambda x: x + 1</code>，返回值将是<code class="fe mw mx my mz b">[2, 3, 4]</code>。</p><h2 id="d1bf" class="ne ld it bd le nj nk dn li nl nm dp lm md nn no lo mh np nq lq ml nr ns ls nt bi translated">过滤器</h2><p id="3ae2" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated"><code class="fe mw mx my mz b">filter</code>操作允许您返回满足条件的列表元素。</p><p id="8761" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">如果没有筛选，完成此任务的代码将如下所示:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="6d60" class="ne ld it mz b gy nf ng l nh ni">new_list = []<br/>old_list = [...]</span><span id="8c33" class="ne ld it mz b gy nu ng l nh ni">for e in old_list:<br/>    if some_function(e):<br/>        new_list.append(e)</span><span id="ab8a" class="ne ld it mz b gy nu ng l nh ni">return new_list</span></pre><p id="ef00" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">这里，我们想要返回<code class="fe mw mx my mz b">old_list</code>中<code class="fe mw mx my mz b">some_function</code>返回<code class="fe mw mx my mz b">True</code>的元素子集。</p><p id="2c6e" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">有了过滤器，我们可以用更干净的方式做到这一点。Filter接受一个函数和一个列表，并返回一个新的列表，其中只包含函数返回的列表中的元素<code class="fe mw mx my mz b">True</code>。</p><p id="98d4" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">我们按如下方式使用过滤器:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="4221" class="ne ld it mz b gy nf ng l nh ni">old_list = [...]<br/>return <strong class="mz iu">filter</strong>(some_function, old_list)</span></pre><p id="0008" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">所以，如果<code class="fe mw mx my mz b">old_list = [1, 2, 3]</code>和<code class="fe mw mx my mz b">some_function = lambda x: x == 2</code>，那么它的返回值就是<code class="fe mw mx my mz b">[2]</code>。</p><h2 id="572f" class="ne ld it bd le nj nk dn li nl nm dp lm md nn no lo mh np nq lq ml nr ns ls nt bi translated">减少</h2><p id="b114" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated"><code class="fe mw mx my mz b">reduce</code>操作允许您基于用于组合列表中所有元素的函数来计算单个值。例如，这可能是将一个列表中的所有元素相加，得到列表的总和。</p><p id="27cf" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">如果没有<code class="fe mw mx my mz b">reduce</code>，您的代码将如下所示:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="b46d" class="ne ld it mz b gy nf ng l nh ni">accumulator = 0<br/>old_list = [...]</span><span id="73cd" class="ne ld it mz b gy nu ng l nh ni">for e in old_list:<br/>    accumulator += e</span><span id="10eb" class="ne ld it mz b gy nu ng l nh ni">return accumulator</span></pre><p id="8aac" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">累加器变量用一个值初始化(本例中为<code class="fe mw mx my mz b">0</code>，保存对累加器和每个列表元素应用函数的累积结果。</p><p id="99e8" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">在这种情况下，功能是<code class="fe mw mx my mz b">lambda accumulator, e: accumulator + e</code>。</p><p id="6205" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">所以，对于给定的函数<code class="fe mw mx my mz b">f</code>，reduce操作相当于调用<code class="fe mw mx my mz b">f(...(f(f(initial, list[0]), list[1]),...), list[n])</code>。</p><p id="0249" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">例如，假设<code class="fe mw mx my mz b">old_list = [1, 2, 3, 4]</code>，我们使用初始值为<code class="fe mw mx my mz b">0</code>的函数<code class="fe mw mx my mz b">lambda accumulator, e: accumulator + e</code>。</p><p id="0383" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">然后，我们的reduce操作的值将是<code class="fe mw mx my mz b">((((0 + 1) + 2) + 3) + 4)</code>，这与上面的代码片段的结果完全相同。</p><p id="cf63" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">我们可以如下使用<code class="fe mw mx my mz b">reduce</code>:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="23f2" class="ne ld it mz b gy nf ng l nh ni">old_list = [...]<br/>initial = 0<br/>return <strong class="mz iu">reduce</strong>(lambda acc, e: acc + e, old_list, initial)</span></pre><p id="3ede" class="pw-post-body-paragraph lu lv it lw b lx mr ju lz ma ms jx mc md mt mf mg mh mu mj mk ml mv mn mo mp im bi translated">(注意，Python实际的<code class="fe mw mx my mz b">reduce</code>函数不接受初始值作为参数——它只是使用列表的第一个值作为初始值。上面的语法更通用于其他语言。)</p></div></div>    
</body>
</html>