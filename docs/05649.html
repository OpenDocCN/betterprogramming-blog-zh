<html>
<head>
<title>Learn to Use 3 Other “Else” Clauses in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习使用Python中的另外3个“Else”子句</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learn-to-use-3-other-else-clauses-in-python-58a62db15a50?source=collection_archive---------3-----------------------#2020-07-24">https://betterprogramming.pub/learn-to-use-3-other-else-clauses-in-python-58a62db15a50?source=collection_archive---------3-----------------------#2020-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7752" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python的一些鲜为人知的特性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/89be369aedce1dab0a2d29ad5192ff36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c1GSX-eISGG-E7Pd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@tolga__?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">托尔加·乌尔坎</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="605e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="a112" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">任何有编程经验的人都应该熟悉<code class="fe mn mo mp mq b">if…else</code>语句。基本上，它通过检查特定的条件来创建一个逻辑分支。当条件被评估为真时，程序将执行<code class="fe mn mo mp mq b">if</code>子句中的操作，否则执行<code class="fe mn mo mp mq b">else</code>子句中的操作。值得注意的是，这两个子句中的代码是互斥的，这意味着当执行<code class="fe mn mo mp mq b">if</code>子句中的代码时，将会跳过<code class="fe mn mo mp mq b">else</code>子句中的代码，反之亦然。</p><p id="3aa2" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">不同的语言在句法细节上有所不同。例如，Kotlin要求对条件求值使用圆括号，而在Swift和Python中圆括号是可选的。Kotlin和Swift都为每个<code class="fe mn mo mp mq b">if</code>和<code class="fe mn mo mp mq b">else</code>子句使用花括号，但是Python使用冒号和缩进来表示范围。其他语言也有一些其他的变化，但是对于那些不是这些特定语言专家的精通技术的局外人来说，这并不奇怪。</p><p id="4934" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在大多数这些语言中，<code class="fe mn mo mp mq b">if</code>和<code class="fe mn mo mp mq b">else</code>子句只存在于<code class="fe mn mo mp mq b">if…else</code> <em class="mw"> </em>语句中，它们不会出现在语言的其他地方。然而，Python在这方面并不常见，因为<code class="fe mn mo mp mq b">else</code>子句还有三种其他用法。在本文中，我们将回顾它们是什么，以及如何通过一些实际的例子来使用它们。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="9890" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">“for”语句</h1><p id="90b6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们知道，迭代是我们在程序中最常见的操作之一，是实现自动化的重要方式。具体来说，我们主要使用<code class="fe mn mo mp mq b">for</code>循环，并通过检查某种可重复项来执行特定的操作，比如列表、字典、集合等等。最基本的格式如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“for”循环的基本形式</p></figure><p id="e8f4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们可以在<code class="fe mn mo mp mq b">for</code>循环后面追加一个<code class="fe mn mo mp mq b">else</code>子句。else子句在什么条件下被执行？这是规则。</p><p id="9dc6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">只有当<code class="fe mn mo mp mq b">for</code>循环完成所有迭代时，<code class="fe mn mo mp mq b">else</code>子句中的代码才会执行。如果<code class="fe mn mo mp mq b">for</code>循环被break语句提前终止，那么<code class="fe mn mo mp mq b">else</code>子句也会被跳过。</p><p id="e1ae" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">听起来很困惑？当然，是。当<code class="fe mn mo mp mq b"> else</code>条款不在<code class="fe mn mo mp mq b">if…else</code>声明的上下文中时，它确实很棘手。让我们通过一个简单的代码示例来理解这种用法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“For…else”语句</p></figure><p id="5cdf" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">如上所示，当订购的商品可用时，<code class="fe mn mo mp mq b">else</code>子句被执行，表明分组订购是可能的。当发现任何项目不可用时，执行将运行到<code class="fe mn mo mp mq b">break</code>语句(第6行)，这将导致跳过<code class="fe mn mo mp mq b">else</code>子句。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="f7cc" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">“while”语句</h1><p id="1af3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当条件在执行过程中随后会发生变化时,<code class="fe mn mo mp mq b">while</code>语句特别有用。具体来说，当条件为真时，<code class="fe mn mo mp mq b">while</code>原因中的代码将执行，直到条件变为假。我们先来看一个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“While”语句</p></figure><p id="ce0e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">如上所示，<code class="fe mn mo mp mq b">while</code>子句中的代码继续执行，直到储蓄余额不大于零。如子节标题所示，我们还可以有一个带有<code class="fe mn mo mp mq b">while</code>语句的<code class="fe mn mo mp mq b">else</code>子句。规则如下:</p><p id="e91d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">因为条件评估为假，只有当<code class="fe mn mo mp mq b">while</code>循环正常退出时，<code class="fe mn mo mp mq b">else</code>子句中的代码才会执行。如果break语句提前停止了<code class="fe mn mo mp mq b">while</code>循环，那么<code class="fe mn mo mp mq b">else</code>子句也会被跳过。</p><p id="6063" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我知道这也令人困惑。通过一个更现实的例子更好理解。我只是简单地将<code class="fe mn mo mp mq b">else</code>子句添加到上面的例子中，并做了一些调整。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“While…else”语句</p></figure><p id="d135" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">如上所示，我们现在设置一个警报级别，低于该级别时，我们将通过执行<code class="fe mn mo mp mq b">break</code>语句来停止取款活动。如您所见，当警报级别设置为100时，<code class="fe mn mo mp mq b">while</code>循环正常退出，因为最终余额达到零。但是，当警戒级别设置为500时，在第三次取款后，余额变为400，这将触发<code class="fe mn mo mp mq b">if</code>语句中的代码执行，因此<code class="fe mn mo mp mq b">break</code>语句将使<code class="fe mn mo mp mq b">while</code>循环提前停止执行，这样一来，<code class="fe mn mo mp mq b">else</code>子句将不会执行。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="5eba" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">“尝试”语句</h1><p id="81f9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">异常处理是编码中一项棘手的任务。当你不做的时候，你的程序是非常脆弱的。但是，如果做得太多，代码的可读性会大大降低。因此，您需要在处理异常的数量和时间之间找到一个平衡点。当然，当前的文章不是关于在Python中处理异常。相反，让我们只讨论异常处理的特性。具体来说，我们将使用<code class="fe mn mo mp mq b">try…except</code>语句来处理Python中的异常。让我们看一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“try…except”语句的基本形式</p></figure><p id="0af7" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">如上所示，我们只是尝试将字符串转换为整数。当一个字符串能够被强制转换时，<code class="fe mn mo mp mq b">try</code>子句中的所有代码都会执行。然而，当我们转换一个不兼容整数的字符串时，异常被抛出，并由<code class="fe mn mo mp mq b">except</code>子句中的代码处理。非常简单的异常处理，对吗？因为这篇文章讨论的是<code class="fe mn mo mp mq b">else</code>子句，你可以打赌我们也可以在<code class="fe mn mo mp mq b">try…except</code>语句中使用<code class="fe mn mo mp mq b">else</code>子句，这一点你完全正确。让我们看看规则:</p><p id="a98d" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">只有当<code class="fe mn mo mp mq b">try</code>子句正常完成且没有遇到任何异常时，<code class="fe mn mo mp mq b">else</code>子句中的代码才会执行。</p><p id="3211" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">这可能是这三个<code class="fe mn mo mp mq b">else</code>子句用法中最容易理解的一个。然而，考虑以下代码的具体用法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">“Try…except…else”语句</p></figure><p id="4507" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在上面的代码中，我们将原本在<code class="fe mn mo mp mq b">try</code>子句中的<code class="fe mn mo mp mq b">print</code>函数移到了<code class="fe mn mo mp mq b">else</code>子句中。对于这两个函数调用，如您所见，<code class="fe mn mo mp mq b">else</code>子句仅在没有引发<code class="fe mn mo mp mq b">ValueError</code>异常时执行，这与其预期用途一致。</p><p id="2288" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">值得注意的是，最小化<code class="fe mn mo mp mq b">try</code>子句中的代码是非常重要的，因为它将准确地告诉我们什么代码会导致异常，在这种情况下，就是<code class="fe mn mo mp mq b">int()</code>函数。因此，与前两种用法相比，<code class="fe mn mo mp mq b">else</code>子句增加了使我们的代码更干净的好处。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="d0c0" class="kz la it bd lb lc ne le lf lg nf li lj jz ng ka ll kc nh kd ln kf ni kg lp lq bi translated">结论</h1><p id="06dc" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，除了<code class="fe mn mo mp mq b">if</code>语句中<code class="fe mn mo mp mq b">else</code>子句最广为人知的用法之外，我们还回顾了另外三个<code class="fe mn mo mp mq b">else</code>子句。下面是这三种用法的快速回顾。</p><ul class=""><li id="c5a8" class="nl nm it lt b lu mr lx ms ma nn me no mi np mm nq nr ns nt bi translated">在<code class="fe mn mo mp mq b">for</code>和<code class="fe mn mo mp mq b">while</code>语句中使用<code class="fe mn mo mp mq b">else</code>子句时，如果前面的子句(<code class="fe mn mo mp mq b">for</code>或<code class="fe mn mo mp mq b">while</code>)遇到<code class="fe mn mo mp mq b">break</code>语句，则<code class="fe mn mo mp mq b">else</code>子句中的代码不会执行。否则，它将按照前面的子句执行。</li><li id="e00b" class="nl nm it lt b lu nu lx nv ma nw me nx mi ny mm nq nr ns nt bi translated">在<code class="fe mn mo mp mq b">try…except</code>语句中使用<code class="fe mn mo mp mq b">else</code>子句时，如果在<code class="fe mn mo mp mq b">try</code>子句执行过程中出现异常，则<code class="fe mn mo mp mq b">else</code>子句中的代码不会执行。只有当<code class="fe mn mo mp mq b">try</code>子句没有引发异常时，它才会运行。</li></ul><p id="0caa" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">这三者中，人们最熟悉的可能是<code class="fe mn mo mp mq b">try…except</code>语句中的<code class="fe mn mo mp mq b">else</code>子句。关于另外两个，对于新的Python程序员来说，它们可能会非常混乱。即使对于那些经验丰富的人来说，如果你不使用这些被低估的功能，它们仍然会令人困惑。因此，我的建议是了解这些特性，这将允许您阅读可能碰巧使用它们的其他人的代码。如果您自己正在使用这些功能，您可能希望确保您的代码读者(例如，在团队项目中)也能欣赏这些功能。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><p id="5073" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">感谢阅读！</p></div></div>    
</body>
</html>