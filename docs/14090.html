<html>
<head>
<title>More Like This: Recommending Similar Netflix Shows With AWS Personalize</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更像这样:用AWS个性化推荐类似的网飞秀</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/more-like-this-recommending-similar-netflix-shows-with-aws-personalize-feb829e1e1c6?source=collection_archive---------2-----------------------#2022-11-04">https://betterprogramming.pub/more-like-this-recommending-similar-netflix-shows-with-aws-personalize-feb829e1e1c6?source=collection_archive---------2-----------------------#2022-11-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7f97" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">更个性化电影的逐步指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/da1a7a8958d65ec04a35da08dab3d73a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1ErX6XsymdhTFUQ-"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@glenncarstenspeters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">格伦·卡斯滕斯-彼得斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="eb3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">指尖上有大量的节目，浏览新内容可能是一个有趣的探索过程，但当我们花太多时间搜索却没有找到任何感兴趣的内容时，就会变得令人厌倦。应用良好的推荐可以填补这一空白，根据我们的活动历史以及其他人如何与类似内容交互来推荐项目。</p><p id="7f9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样的推荐器可以用Sagemaker和TensorFlow这样的工具自建，或者我们可以使用即插即用的选项，几乎可以立即应用。</p><p id="1426" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个项目中，我从网飞官方YouTube频道的<a class="ae kv" href="https://www.youtube.com/playlist?list=PLvahqwMqN4M2N01FfQy2wXkyVyucAL86b" rel="noopener ugc nofollow" target="_blank">预告片播放列表</a>中提取了网飞节目的数据，并使用<a class="ae kv" href="https://aws.amazon.com/personalize/" rel="noopener ugc nofollow" target="_blank"> AWS个性化</a>基于每个视频上留下的评论中的用户交互模式来推荐类似的标题。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="6b0b" class="lx ly iq lt b gy lz ma l mb mc">Table of Contents</span><span id="9ee9" class="lx ly iq lt b gy md ma l mb mc"><a class="ae kv" href="#bc01" rel="noopener ugc nofollow">Part 1: Preparing the Data</a><br/><a class="ae kv" href="#35ae" rel="noopener ugc nofollow">Part 2: Generating the Recommendations</a><br/><a class="ae kv" href="#6a57" rel="noopener ugc nofollow">Part 3: Results</a></span></pre><h1 id="bc01" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">第1部分:准备数据</h1><p id="30f4" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">输入数据是来自<a class="ae kv" href="https://www.youtube.com/playlist?list=PLvahqwMqN4M2N01FfQy2wXkyVyucAL86b" rel="noopener ugc nofollow" target="_blank">网飞预告片播放列表</a>的评论和视频数据，通过YouTube数据API v3提取。这个API可以免费使用，但是有使用限额。因此，数据是在2022年9月至10月的多个日期提取的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/39d9b3d45c3dd3ea180dd726dd3a6a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VQ-1STI4pVMJOvd7gH3vEw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在云控制台上跟踪API使用水平</p></figure><p id="ae3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://developers.google.com/youtube/v3/docs" rel="noopener ugc nofollow" target="_blank"> YouTube数据API </a>提供对多种资源类型和方法的访问。这里使用的是:</p><ul class=""><li id="18ea" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated"><code class="fe nk nl nm lt b">playlistItems.list</code>获取预告片播放列表中所有视频id的列表</li><li id="2ecd" class="nb nc iq ky b kz nn lc no lf np lj nq ln nr lr ng nh ni nj bi translated"><code class="fe nk nl nm lt b">videos.list</code>获取每个视频的详细信息(标题、描述、上传日期等。)</li><li id="ae6f" class="nb nc iq ky b kz nn lc no lf np lj nq ln nr lr ng nh ni nj bi translated"><code class="fe nk nl nm lt b">comments.list</code>获取评论回复/子级评论</li><li id="6e09" class="nb nc iq ky b kz nn lc no lf np lj nq ln nr lr ng nh ni nj bi translated"><code class="fe nk nl nm lt b">commentThreads.list</code>获取每个视频的主要/顶级评论列表</li></ul><p id="11ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这产生了来自1，254个视频的总共1，181，917条评论的数据集。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/fc17aa55e1db4fa9fbdd8bdb2c5ab025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yng7JeGQcFsR9Duj4BdOpQ.png"/></div></div></figure><p id="6b60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，根据AWS个性化<a class="ae kv" href="https://docs.aws.amazon.com/personalize/latest/dg/how-it-works-dataset-schema.html" rel="noopener ugc nofollow" target="_blank">模式需求</a>对原始数据进行清理和格式化。这包括:</p><ul class=""><li id="90fa" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">将时间数据字段转换为UNIX时间戳格式</li><li id="482e" class="nb nc iq ky b kz nn lc no lf np lj nq ln nr lr ng nh ni nj bi translated">解析视频标题，删除不相关的词，如“预告片”、“网飞”等。</li><li id="7508" class="nb nc iq ky b kz nn lc no lf np lj nq ln nr lr ng nh ni nj bi translated">非结构化文本字段必须用双引号括起来，值本身中的任何双引号都必须删除或用转义符格式化</li></ul><p id="f277" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">未使用或未正确清理的字段在此步骤中被删除，但在原始数据中仍然可用，以供将来迭代使用。这是最终的数据集:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/05006afecaea2ec9b1fbea08d301ceaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LAou4qxcBVXb4bXwem71jg.png"/></div></div></figure><h1 id="35ae" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">第2部分:生成建议</h1><p id="0106" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">准备好格式化的数据后，现在进入AWS控制台来构建建议！</p><p id="b014" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两个文件首先以CSV格式上传到S3存储桶:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/c0065daf1e1b1813ca86c1c1bd378867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BO8JLojRhB_x7PeCcr450Q.png"/></div></div></figure><p id="53f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还必须设置权限和访问——为AWS Personalize创建一个IAM角色，并添加一个S3存储桶策略以允许个性化读写访问。</p><p id="8e2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们可以从AWS个性化服务开始构建推荐器:</p><p id="e21d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，创建一个数据集组，并选择用例域。个性化提供不同的食谱，包括用户细分、个性化排名和相关项目。对于这个项目，我在“自定义”域下使用了一个<code class="fe nk nl nm lt b">similar-items</code>食谱。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/67d7c4afe1f708cd2ef20219a6c298ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i7j5mMlL58fJjnaiOnAWew.png"/></div></div></figure><p id="0919" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过指定数据上载的S3位置并提供必须与导入的数据匹配的方案，导入数据以进行个性化。</p><p id="0a2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据集创建并成功导入后，创建一个解决方案并选择要使用的配方类型(<code class="fe nk nl nm lt b">aws-similar-items</code>)。</p><p id="8824" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这个设置，我们可以通过活动或批处理检索推荐结果——这里，我使用一个批处理作业来获取所有视频的结果。提供输入数据(JSON 文件格式的视频id<a class="ae kv" href="https://docs.aws.amazon.com/personalize/latest/dg/batch-data-upload.html#batch-inference-job-json-examples" rel="noopener ugc nofollow" target="_blank">列表)和输出目录(结果将被写入的文件夹)以启动批处理作业:</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/1b4b3d90cf6fe2841a26a491f886fcac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r-Gk03ty9AOexMYomPLvqA.png"/></div></div></figure><p id="d583" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦批处理作业完成，推荐器结果应该在提供的输出s3位置可用。默认情况下，为每个项目生成25条建议，可在批处理作业中配置。</p><h1 id="6a57" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">第3部分:结果</h1><p id="a9c8" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在对输出数据进行一些格式化和清理之后，下面是一些生成的类似项目建议的示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/f66381276bb28995071256f35b3013bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BC1a1kWdSQUodnBJK7H_g.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/8d86a3b75ff0aa99013a9cb747711e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAEbuCGwGmbqDRKwp3YCNw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/8e8d4b8ac8cdbd3bc4cd6fde155ff33f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tq6LkNQzczr0nX2kZ14m2w.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/818cd3690ce22bbc61a0e912315b0358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YdJ8jtsdq7RSX0vzZW_BFA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/05b1e11a58ba4b6ec15e6bea3bf75506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RrdAa9yCMn6spC3PSlGPA.png"/></div></div></figure><p id="2d6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">乍一看，推荐的几本书有明显的相似之处。<em class="oc">致所有男生:永远永远</em>与其他浪漫爱情片(<em class="oc">爱得狠</em>、<em class="oc">他就是那个</em>、<em class="oc">公主开关</em>)；<em class="oc">爱丽丝在边疆</em>与其他电子游戏和漫画启发的动作秀(<em class="oc"> DOTA </em>、<em class="oc">恶魔城</em>、<em class="oc">亚介</em>、<em class="oc">虎王</em>与其他调查纪录片(<em class="oc">我们的父亲</em>、<em class="oc">未披露的</em>、<em class="oc">发明安娜</em>)。<em class="oc">一个叫圣诞的男孩</em>也回报了各种圣诞题材的电影像<em class="oc">一路单身</em>、<em class="oc">圣诞城堡</em>、<em class="oc">精灵</em>。</p><p id="94ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，对其他人来说，这种联系并不那么明显。首先，<em class="oc">卖《日落》</em>和<em class="oc">吸引同样观众的《杯具秀》</em>有什么共同点？</p><p id="c554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近非常受欢迎的标题也被推荐了不成比例的次数——我们的视频列表中有一半的节目被推荐&lt;10 times, but <em class="oc">仅灰人</em>就被推荐了总共370次！</p><p id="de76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，最初的结果看起来很有希望，但要为生产部署做好准备，还需要更多的微调。可探索潜在后续步骤的一些领域包括:</p><ol class=""><li id="4602" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr od nh ni nj bi translated">添加项目元数据:这个解决方案完全基于交互(评论)，几乎不包含任何项目元数据。演员、流派和描述等附加信息可以极大地提高结果的相关性。</li><li id="1205" class="nb nc iq ky b kz nn lc no lf np lj nq ln nr lr od nh ni nj bi translated">推荐没有互动的项目:一些节目几乎没有互动数据，即面临冷启动问题或特殊情况的新标题-在该数据集中，儿童节目的评论计数为<code class="fe nk nl nm lt b">0</code>，因为儿童内容的评论已被禁用。</li></ol><p id="2d61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有哪些领域值得研究？如果你有任何建议，请告诉我！</p><p id="7a9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>