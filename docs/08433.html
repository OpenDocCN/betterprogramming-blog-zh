<html>
<head>
<title>How to Add a React Component to Active Admin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向活动管理添加React组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-a-react-component-to-active-admin-9fe6151033eb?source=collection_archive---------4-----------------------#2021-04-29">https://betterprogramming.pub/how-to-add-a-react-component-to-active-admin-9fe6151033eb?source=collection_archive---------4-----------------------#2021-04-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="df41" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用此库快速构建管理面板</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/41dfc4a5e49c7b7efa46f412efa75666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LlRK_vEQDFsIGZnW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">斯坦利·戴在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d029" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">众所周知，您可以用Ruby快速编写和测试您的商业想法。这可以在Rails和Active Admin的帮助下完成，Active Admin是一个允许您用最少的精力和时间快速创建管理面板的库。但是有时表单或信息小部件非常复杂或动态，以至于您开始考虑转向现代前端，而不是使用熟悉但不太受支持的jQuery代码。</p><p id="7144" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这些情况下，Vue.js和React非常有帮助。在本文中，我将告诉您如何将React组件添加到Active Admin中。</p><p id="3b2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们考虑Active Admin使用Webpacker管理资产的完美场景。查看<a class="ae ky" href="https://activeadmin.info/0-installation.html#webpacker" rel="noopener ugc nofollow" target="_blank">官方文档</a>以了解如何设置该模式。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e672" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">活动管理员和Webpacker</h1><p id="8ae6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们从添加和安装<code class="fe mz na nb nc b">activeadmin</code>和<code class="fe mz na nb nc b">react-rails</code>宝石开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="a1d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行安装程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b2f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将<code class="fe mz na nb nc b">HelloWorld</code> React组件添加到目录<em class="nf">app/JavaScript/components</em>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="d75a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使组件在Active Admin中可见，请将以下代码添加到<em class="nf">app/JavaScript/packs/Active _ Admin . js</em>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="a91b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们添加一个新的Arbre组件，它将允许我们轻松地调用React小部件(单击<a class="ae ky" href="https://activeadmin.info/12-arbre-components.html" rel="noopener ugc nofollow" target="_blank">官方文档</a>阅读更多关于Arbre组件的信息):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="dbf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们调用<em class="nf"> dashboard.rb </em>中的组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/0811be4f6cb2da25610146335ef7d21f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7FBLdIu6IPPUiKw_piVVA.png"/></div></div></figure><p id="3fb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太神奇了！您现在可以在Active Admin中使用React组件了！</p><h1 id="2229" class="mc md it bd me mf nh mh mi mj ni ml mm jz nj ka mo kc nk kd mq kf nl kg ms mt bi translated"><strong class="ak">主动管理和资产渠道</strong></h1><p id="1da6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您的项目使用链轮来管理活动管理资产，可以通过资产管道集成react-rails(单击<a class="ae ky" href="https://github.com/reactjs/react-rails#use-with-asset-pipeline" rel="noopener ugc nofollow" target="_blank">自述文件</a>了解详细信息)。这就是我如何从上面的例子中运行HelloWorld.jsx的，但在我看来，这种方法很难维护，所以我建议添加<code class="fe mz na nb nc b">webpacker</code>并使用它来构建React组件。</p><p id="ca21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，将gem <code class="fe mz na nb nc b">webpacker</code>添加到Gemfile，然后安装<code class="fe mz na nb nc b">react-rails</code>，像上面那样添加Arbre组件和React组件。</p><p id="37ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一的区别是我们没有文件<em class="nf">app/JavaScript/packs/active _ admin . js—</em>，所以让我们创建它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="1933" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个不同点是:由于我们在链轮模式下工作，主动管理并不连接这个包，所以我们需要手动连接。例如，像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="a185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，还有一些“更纯粹”的选项，例如，您可以编写下面的<code class="fe mz na nb nc b">ActiveAdmin</code>扩展:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4f79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们将扩展添加到初始化器的开头:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e03a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们更改<em class="nf"> app/admin/dashboard.rb </em>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4bcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是诀窍。界面可以更方便，但我想重点介绍这个选项。确保重新加载应用程序，以使初始化器的更改生效。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fe0e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">React-rails和Webpacker的作用</h1><p id="f721" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们让手册更贴近实践:让我们向项目添加Typescript支持和带有React组件的外部库。然后我们将使用一个. tsx文件调用组件。</p><p id="822b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从配置TypeScript开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们将测试组件从。jsx到。tsx:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="09d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们以<a class="ae ky" href="https://github.com/uber/react-vis" rel="noopener ugc nofollow" target="_blank"> react-vis </a>作为外部库的例子。我们首先添加一个依赖项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="0e34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们添加一个新组件<em class="nf">app/JavaScript/components/plot . tsx</em>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="3195" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们检查一下新组件的工作情况:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/859bd7e6e67ffa52eff74d7624ab0e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uttPCYiARFoPqWFk_KDDeg.png"/></div></div></figure><p id="ae9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，现在您知道如何将React添加到Active Admin中了。我希望你向前看，下定决心在实践中使用(或不使用)这些知识！</p></div></div>    
</body>
</html>