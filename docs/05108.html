<html>
<head>
<title>Will Deno Change the Future of JavaScript As We Know It?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno会改变我们所知的JavaScript的未来吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/deno-will-it-change-the-future-of-javascript-as-we-know-it-81ce59a0cd3d?source=collection_archive---------9-----------------------#2020-06-09">https://betterprogramming.pub/deno-will-it-change-the-future-of-javascript-as-we-know-it-81ce59a0cd3d?source=collection_archive---------9-----------------------#2020-06-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bac0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">没有人知道未来会怎样——但是Deno看起来很有希望</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d08a65896ccd4e38b010a71d7b6c4e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pzwe6jKF3Wb4fRHXPdZXyw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">高分辨率logo由<a class="ae kv" href="https://github.com/kevinkassimo" rel="noopener ugc nofollow" target="_blank"> @kevinkassimo </a></p></figure><h1 id="5f7c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">Deno到底是什么？</h1><p id="f603" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Deno是运行在V8引擎上的JavaScript命令行运行时，用Rust编程语言编写。</p><p id="3c90" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">它的工作方式与Node.js类似，但当Node在2009年发布时，它是根据当前版本的JavaScript创建的。JavaScript在2009年的基础上有了很大的发展，现在我们所知道的JavaScript有了更多的便利。</p><p id="d3ed" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">Deno希望解决Node的许多问题——安全性、模块系统(那个巨大的<code class="fe mp mq mr ms b">node_modules</code>文件夹)以及兼容浏览器的API。</p><p id="f963" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们回顾一下它的一些很酷的功能！</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="3e62" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">以打字打的文件</h1><p id="f98c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">开箱即用，Deno内置了JavaScript扩展TypeScript。对于那些不熟悉TypeScript的人，可以在这里查看文档<a class="ae kv" href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" rel="noopener ugc nofollow" target="_blank"/>。但是能够在我们的项目中使用编译器、静态检查和类型脚本模块是一个巨大的优势！</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="efcd" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">去中心化的包管理</h1><p id="f006" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">就像npm现在的情况一样，它是一个集中的存储库，这意味着您需要与服务器通信才能获得节点模块。有了Deno，那个<code class="fe mp mq mr ms b">node_modules</code>文件夹中庞大的文件列表和管理依赖关系的<code class="fe mp mq mr ms b">package.json</code>都将成为过去！现在可以从URL导入包:</p><pre class="kg kh ki kj gt nf ms ng nh aw ni bi"><span id="e7bb" class="nj kx iq ms b gy nk nl l nm nn">import clc from 'https://deno.land/x/color/index.ts'</span></pre><p id="cc59" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一旦我们从网上导入了我们的模块并运行了我们的程序，它们就会在加载后被缓存到硬盘上。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="4a95" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">安全性</h1><p id="da32" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Deno比Node做得更好的一点是安全性。每当你运行一个访问你的文件系统或互联网的应用程序时，当你运行这个程序时，首先需要允许你做这些事情。例如，假设我们正在编写一个程序，该程序为我们创建了一个新文件，该文件的内容是一个问候语的文本:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/cb3ed34f78c3920991a2f9ee6bb1eaa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXXXCy2Mqm6n96uY3bchxg.png"/></div></div></figure><p id="4621" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们通过执行<code class="fe mp mq mr ms b">deno run example2.ts</code>在控制台中运行代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/3401a8651424a112126565a34912ce71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DUO03qrDkK0mfeEWaYGHVQ.png"/></div></div></figure><p id="23e4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们遇到了一个<code class="fe mp mq mr ms b">PermissionDenied</code>错误。这是Deno实施的安全措施。为了解决这个错误，我们需要使用<code class="fe mp mq mr ms b">--allow-write</code>标志再次运行它，允许我们写一个新文件。虽然这可能一开始看起来很乏味，需要时间来适应，但这是一个很好的安全措施，可以防止损坏的文件损害您的设备。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="d2d0" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">ES模块</h1><p id="0196" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">回到Deno如何处理模块。假设我们想使用一个很酷的第三方模块来改变我们的控制台文本的颜色。不再需要运行npm install了，只需简单地运行你的代码，Deno的工作很神奇，就是这样，模块已经实现了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/70d23fd7671c3964da2bbb25742925ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03Sjdh8NY75lqKh16ACzwQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">导入可以更改控制台中文本颜色的第三方模块</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/938d262ea8b3c3ec4d949da93aa47ee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MB1EAD5Jkrz3cDEYsuZiQ.png"/></div></div></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="6e11" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">顶级等待</h1><p id="c11e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">因为Deno脱离了V8引擎，所以我们可以使用顶级的<code class="fe mp mq mr ms b">await</code>。通常，我们在异步函数中使用await:</p><pre class="kg kh ki kj gt nf ms ng nh aw ni bi"><span id="a438" class="nj kx iq ms b gy nk nl l nm nn">async function foo() {<br/> const bar = await <!-- -->Promise.resolve(console.log('Success!'))<br/>}</span></pre><p id="22b8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">但是有了顶级的<code class="fe mp mq mr ms b">await</code>，我们可以在全球范围内利用<code class="fe mp mq mr ms b">await</code>:</p><pre class="kg kh ki kj gt nf ms ng nh aw ni bi"><span id="cb21" class="nj kx iq ms b gy nk nl l nm nn">import { readJson } from 'https://deno.land/std/fs/mod.ts';</span><span id="5755" class="nj kx iq ms b gy ns nl l nm nn"><br/>const foo = await readJson('./foo.json');</span></pre><p id="7ddb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">欲了解更多关于顶级<code class="fe mp mq mr ms b">await</code>的信息，请点击查看文档<a class="ae kv" href="https://v8.dev/features/top-level-await" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="0c82" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">测试</h1><p id="9811" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Deno还自带内置的测试运行器，可用于测试JavaScript或TypeScript代码。要设置测试，您可以使用<code class="fe mp mq mr ms b">Deno.test</code>语法:</p><pre class="kg kh ki kj gt nf ms ng nh aw ni bi"><span id="c7c1" class="nj kx iq ms b gy nk nl l nm nn">//example_test.ts</span><span id="cd7a" class="nj kx iq ms b gy ns nl l nm nn">Deno.test("test example", () =&gt; {<br/>  const x = 5 + 5;<br/>  if (x !== 10) {<br/>    throw Error("x should be equal to 10");<br/>  }<br/>});</span></pre><p id="cebb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里我们创建一个测试，如果<code class="fe mp mq mr ms b">x</code>等于除<code class="fe mp mq mr ms b">10</code>之外的任何值，它会给出一个错误，指出<code class="fe mp mq mr ms b">x</code>应该等于<code class="fe mp mq mr ms b">10</code>。为了运行这个测试，我们将<code class="fe mp mq mr ms b">deno test example_test.ts</code>输入到控制台。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="6a86" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">标准程序库</h1><p id="a8b1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在第三方模块之上，Deno有一些非常漂亮的标准库模块。你可以在这里查看它们。</p><p id="d54d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在让我们使用其中一个来启动服务器！因此，在我们的标准库列表中，我们希望接入HTTP库(<code class="fe mp mq mr ms b"><a class="ae kv" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank">deno.land</a> /<a class="ae kv" href="https://deno.land/std" rel="noopener ugc nofollow" target="_blank">std</a> /<a class="ae kv" href="https://deno.land/std/http" rel="noopener ugc nofollow" target="_blank">http</a></code>)并导入服务器URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/e2bc61b27379001902f95dde37dff4f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwDZvRxXa-jFS93noyCJSw.png"/></div></div></figure><p id="3b42" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们将我们的服务器分配到端口9000，console.log以确认我们的服务器正在运行，然后使用<code class="fe mp mq mr ms b">for await</code>语法获取请求对象并添加响应。让我们在终端中运行我们的文件(不要忘记添加许可)，看看我们得到了什么。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/8a440b3551d65773ac242eca5df2166b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dHZjlGBFYgCYEJ3e7YR_Jw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们运行我们的代码，通过访问localhost:9000检查我们的服务器，棒极了，它工作了！</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="c55a" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">Deno看起来很棒，我应该学习如何使用Node吗？</h1><p id="0877" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><em class="nv">绝对！</em>需要注意的一点是Node.js不会很快消失。Node拥有一个稳定、完善的生态系统，将用于数百万个项目。</p><p id="aedf" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">Deno是一个非常强大的工具，但它仍然只处于1.0版本阶段。我敢肯定还有很多问题和功能需要解决。毫无疑问，在未来几年，Deno可能会成为JavaScript的下一个大事件。</p><p id="834b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你有一些空闲时间，我绝对推荐你和Deno一起玩，学习它是如何工作的。如果它真的起飞了，你将是一个早期采用者，将会比其他人更有优势！</p></div></div>    
</body>
</html>