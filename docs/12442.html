<html>
<head>
<title>Testing Pinia — Is Vuex Out of the Race?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试皮尼亚Vuex出局了吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/testing-pinia-is-vuex-out-43e0531824f5?source=collection_archive---------14-----------------------#2022-06-06">https://betterprogramming.pub/testing-pinia-is-vuex-out-43e0531824f5?source=collection_archive---------14-----------------------#2022-06-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c14f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Vue 3哪个状态管理最好？我想可能是皮尼亚</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5df5394b6d2439ce13bb4c04f664e648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wumM818TmrkBDMCqXOfhww.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Vuex和Pinia</p></figure><p id="6299" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">自从我开始使用Vue 3和composition API以来，我还尝试使用<a class="ae lr" href="https://pinia.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Pinia </a>作为状态管理库。</p><p id="ab92" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">来自一个使用Vue 2.x和Vuex的更大的项目，当你开始使用它时，已经有了明显的变化。</p><p id="e212" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">老实说，我从未对Vuex感到完全舒服。最初，有“很多”样板代码只是减少了对store的使用。也许这只是我的懒惰，但是状态管理真的应该是一种乐趣，所以当你有一小段应该在组件间共享的状态时，你更倾向于使用它。</p><h1 id="7c2d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">API差异</h1><p id="ed01" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">让我们来看看两家商店的整体设计，看看我们是否能发现一些特点和差异，这些特点和差异可能会说服我们使用其中一家而不是另一家。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="02e3" class="ls lt iq bd lu lv mw lx ly lz mx mb mc jw my jx me jz mz ka mg kc na kd mi mj bi translated">Vuex</h1><p id="49c4" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">下面是Vuex如何工作的官方示意图。这有点令人困惑，但是一旦你使用它，你就会掌握它的窍门。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/1bb6f5e05fa80b87d81a07f84b587d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rbbtFgzWB5vX-6b7.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Vuex架构</p></figure><p id="7f16" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Vuex商店中，有4个主要组件:</p><h2 id="8c28" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">1.状态</h2><p id="b4d4" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这只是一个包含实际状态的对象。您将能够在您的开发工具中看到该状态，并且如果您想要保存该状态以用于缓存或其他目的，您也可以保存该对象。</p><h2 id="7a4c" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">2.行动</h2><p id="2229" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">动作是执行异步任务的功能。它们由关键字<code class="fe no np nq nr b">dispatch</code>发起。动作通常会请求一个外部API或者做一些其他的异步工作。该动作还负责调用适当的突变来实际改变状态。这意味着动作本身并没有改变状态，但是<code class="fe no np nq nr b">commit</code>发生了变化，所以突变可以改变状态。</p><h2 id="bedf" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">3.突变</h2><p id="1c6e" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">突变是唯一会同步改变状态的函数。变异使用关键字<code class="fe no np nq nr b">commit</code></p><h2 id="2a4f" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">4.吸气剂</h2><p id="a9d7" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">Getters可以被认为是计算的属性，应该用来从您的状态获得修改后的响应。</p><p id="7c12" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Vuex商店的一个简单示例如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="5119" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">使用商店</h2><p id="b958" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">当使用上述组件时，组件通常会调用<code class="fe no np nq nr b">dispatch</code>来启动异步任务(比如从外部API获取)。如果你需要改变状态，比如一个简单的计数器，你可以调用<code class="fe no np nq nr b">commit</code>。</p><p id="f2eb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这意味着一个组件可以通过调用<code class="fe no np nq nr b">dispatch</code>或<code class="fe no np nq nr b">commit</code>与商店交互。我不知道你怎么想，但对我来说，这增加了一些我真的不需要的大脑超载。<br/>在使用Vuex之前，我对前端环境中的术语“提交”和“分派”并不熟悉。因此，用它们来改变状态对我来说并不直观。对于一些人来说，这可能是不同的，但使用一个动作或一个突变让我感到有点不舒服。</p><p id="fe56" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">同样值得注意的是，使用Vuex一个组件可以访问整个存储，即使你可以在逻辑上将你的Vuex存储分成不同的文件。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="ebd9" class="ls lt iq bd lu lv mw lx ly lz mx mb mc jw my jx me jz mz ka mg kc na kd mi mj bi translated">皮尼亚</h1><p id="ff3c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">与Vuex相比，Pinia图如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/ef6e7eba0e5222585fda64100e48ab8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgkInNrezsK6yplRI5odBQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">皮尼亚建筑</p></figure><p id="86a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如你在上面看到的，整体架构更简单，更容易理解。</p><p id="1705" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">皮尼亚商店有3个主要组成部分</p><h2 id="bbe7" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">1.状态</h2><p id="8241" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">和Vuex的情况一模一样</p><h2 id="32e0" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">2.行动</h2><p id="6da5" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这里的动作与Vuex中的动作和突变做同样的工作。这意味着这些函数应该是改变状态的唯一方法。如果您想从外部API获取数据并更新状态，也可以使用这些操作。<br/>与Vuex设置的另一个区别是Pinia动作被称为正常功能。当必须使用它们时，这给了最小的认知负荷！</p><h2 id="ef11" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">3.吸气剂</h2><p id="ca16" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这些作为您所在州的计算属性。例如，你可以在blow store中获得计数+ 5。</p><p id="dd97" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个简单的Pinia商店可能是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Pinia商店示例</p></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="60bf" class="nc lt iq bd lu nd ne dn ly nf ng dp mc le nh ni me li nj nk mg lm nl nm mi nn bi translated">使用商店</h2><p id="a0a1" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">与Vuex不同的是，Pinia商店被分隔成完全不同的商店。这意味着每个组件必须包括它想要使用的特定商店。另一个区别是我们与商店互动的方式。API比Vuex简单很多。</p><p id="bd6d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这可以部分地从我们如何执行行动中看出。在Vuex中，我们必须使用关键字<code class="fe no np nq nr b">dispatch</code>，在Pinia中，我们只是将动作称为普通方法。<code class="fe no np nq nr b">dispatch</code>调用的一个大“问题”是参数通常是一个字符串，这感觉是错误的。</p><blockquote class="nv"><p id="6c81" class="nw nx iq bd ny nz oa ob oc od oe lq dk translated">参数一般是字符串，感觉不对。</p></blockquote><h1 id="0d8f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw of jx me jz og ka mg kc oh kd mi mj bi translated">结论</h1><p id="1bcc" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">现在，我想说Pinia更容易理解和使用。可能有一些东西可以让Vuex在更大的项目中更好地扩展，但是我还没有遇到过。对我来说，另一件重要的事情是我们可以用普通的参数调用普通的方法。</p><p id="04b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Pinia还支持Vue 2和3，这使得迁移变得更加容易。</p><p id="db24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">保持简单！</p></div></div>    
</body>
</html>