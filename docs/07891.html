<html>
<head>
<title>Rendering Charts in Laravel Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Laravel应用程序中呈现图表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/rendering-charts-in-laravel-applications-b6cd1ef982f6?source=collection_archive---------9-----------------------#2021-03-02">https://betterprogramming.pub/rendering-charts-in-laravel-applications-b6cd1ef982f6?source=collection_archive---------9-----------------------#2021-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a365" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Laravel应用程序中呈现图表的最简单快捷的方式</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c961ed2034a004e42c47a54cc64f101b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTJtSQEGM4gkapqbeMRhAA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com/s/photos/analytics?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@adeolueletu?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Adeolu Eletu </a>拍摄的照片。</p></figure><p id="62e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">人们说一张图胜过千言万语。这对于图表来说再真实不过了，图表让你将数据浓缩成一个有意义的信息，人们可以很容易地消化。</p><p id="532d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将讨论如何在<a class="ae kv" href="https://laravel.com/" rel="noopener ugc nofollow" target="_blank"> Laravel </a>应用程序中呈现图表。我们将采用的方法不需要安装任何库，这意味着可以快速简单地呈现图表。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3630" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">我们将建造什么</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/5dcfe3444dad22e53bc062a83db44782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N837sXAyRWOB5qRLtAvGdw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有图表的示例报告页面</p></figure><p id="2c46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们假设我们正在为一个在线商店构建一个报告页面。该报告可能包含:</p><ol class=""><li id="18fb" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">月订单—客户每月下的订单数量</li><li id="cc3c" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">月收入—每月产生的收入额</li><li id="734f" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">产品份额—一段时间内最畅销产品的列表</li></ol><p id="5c8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Laravel应用程序中，该报告作为网页被访问。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="34e9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">技术选择</h1><p id="ebad" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">Laravel中呈现图表的方法很少。比如使用一个JavaScript前端库比如<a class="ae kv" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> Chart.js </a>、<a class="ae kv" href="https://www.highcharts.com/" rel="noopener ugc nofollow" target="_blank"> Highcharts </a>或者<a class="ae kv" href="https://vega.github.io/vega-lite/" rel="noopener ugc nofollow" target="_blank"> Vega-Lite </a>。然而，这样做的缺点是在前端包含了正在讨论的库。对于JavaScript被停用的客户端(例如电子邮件)，这是不可行的。</p><p id="41ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是在服务器中呈现图表，并将其作为图像发送给客户机。这一领域没有太多竞争。我能找到的一个选项是<a class="ae kv" href="https://github.com/szymach/c-pchart" rel="noopener ugc nofollow" target="_blank"> c-pchart </a>，不幸的是对我的口味来说感觉太冗长了。在服务器中呈现图表的缺点是增加了服务器所需的处理能力。呈现图表不如典型的服务器工作负载(从数据库获取数据、转换等)便宜。).</p><p id="63e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是使用<a class="ae kv" href="https://getchart.me?m=mdm.laravel.0" rel="noopener ugc nofollow" target="_blank"> GetChart.me </a>来呈现图表。简而言之，GetChart.me是一个允许我们从URL中编码的图表定义中获取图表图像的服务。这意味着在HTML页面中嵌入图像就像<code class="fe nl nm nn no b">&lt;img src="{url}"/&gt;</code>一样简单。这种方法的缺点是依赖于外部服务，这意味着图表图像的可用性取决于服务的可用性。</p><p id="3cbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将使用GetChart.me，原因如下:</p><ol class=""><li id="1ecc" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">这很容易快速开始—只需构建一个URL并将其作为图像嵌入到HTML文档中。</li><li id="b8a9" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">没有JavaScript —图表可以覆盖更多客户(例如电子邮件)。</li><li id="b16a" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">使用开源图表定义(Vega-Lite) —如果服务停止运行，我们可以通过将Vega-Lite添加到HTML页面来退回到“客户端库”方法。</li></ol></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0e56" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">辅导的</h1><p id="b9ac" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">我假设你已经设置了一个Laravel应用程序。如果没有，您可以按照<a class="ae kv" href="https://laravel.com/docs/8.x#your-first-laravel-project" rel="noopener ugc nofollow" target="_blank">官方指南</a>设置一个。</p><h2 id="b578" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated">设置刀片模板</h2><p id="727c" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">首先，让我们在<code class="fe nl nm nn no b">resource/views</code>文件夹中创建一个名为<code class="fe nl nm nn no b">report.blade.php</code>的新<a class="ae kv" href="https://laravel.com/docs/8.x/blade" rel="noopener ugc nofollow" target="_blank">刀片模板</a>。顾名思义，这个模板将显示报告页面。刀片模板的内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="a9a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里没什么花里胡哨的。如您所见，图表基本上是指向一些URL的图像。URL将通过三个模板参数从控制器传入:<code class="fe nl nm nn no b">monthlyOrdersImageUrl</code>、<code class="fe nl nm nn no b">monthlyRevenuaImageUrl</code>和<code class="fe nl nm nn no b">shareOfProductsImageUrl</code>。</p><h2 id="d6dc" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated">创建控制器并连接刀片模板</h2><p id="e2c4" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">在<code class="fe nl nm nn no b">app/Http/Controllers</code>文件夹中创建一个名为<code class="fe nl nm nn no b">ReportController.php</code>的新文件。将以下代码放入文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="cd24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从源代码中，我们连接了之前使用<code class="fe nl nm nn no b">view('report', ...)</code>创建的刀片模板。我们还传入了三个模板变量，尽管现在它们都是空字符串。</p><h2 id="6050" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated">GetChart.me URL帮助函数</h2><p id="b839" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">在制作实际的图表之前，让我们创建一个助手函数来生成GetChart.me URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/bca37128f0344e3b167395b775c08957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*FYNSDHXHzokk3QlOFst7NA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">显示GetChart.me如何工作的图表</p></figure><p id="c90e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">GetChart.me的工作方式是发送一个URL编码的Vega-Lite图表定义作为URL参数。在PHP中，我们将其实现为一个简单的单行程序，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="c4a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个函数接收一个Vega-Lite图表定义(在PHP maps中),并输出一个有效的GetChart.me URL。</p><h2 id="f395" class="np ma iq bd mb nq nr dn mf ns nt dp mj lf nu nv ml lj nw nx mn ln ny nz mp oa bi translated">创建图表</h2><p id="46d6" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">创建图表涉及两件事:</p><ul class=""><li id="3ba9" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr oe my mz na bi translated">定义图表的外观。</li><li id="40c3" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr oe my mz na bi translated">定义图表的数据。</li></ul><p id="3be9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">图表的数据可以来自任何地方。数据库是典型的数据源。在本文中，为了简明起见，我们将只对数据进行硬编码。</p><p id="cfd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">定义图表视觉效果基本上与编写Vega-Lite图表定义是一样的。在<a class="ae kv" href="https://vega.github.io/vega-lite/examples/" rel="noopener ugc nofollow" target="_blank"> Vega-Lite示例</a>中有大量图表。<a class="ae kv" href="https://vega.github.io/vega-lite/docs/" rel="noopener ugc nofollow" target="_blank">图书馆的文档</a>也相当可靠。在我们的例子中，我们使用条形图、折线图和水平条形图。</p><p id="5227" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建图表的代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="9cb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">刷新页面。您应该会看到报告页面现在看起来非常有用，带有图表。</p><p id="a5ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你成功地达到了这一点，那么我们就完成了。很简单，对吧？</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1c38" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="ce9c" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">在本文中，我们用Laravel创建了一个包含图表的报告页面。在Laravel应用程序中呈现图表有多种方式:使用客户端图表库、服务器端图表呈现或第三方图表呈现服务(GetChart.me)。我们选择使用GetChart.me是因为它的低复杂性和可移植性。</p></div></div>    
</body>
</html>