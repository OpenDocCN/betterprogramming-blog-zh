<html>
<head>
<title>I Wrote a VS Code Extension to Sort Your Flutter Project’s Imports</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我写了一个VS代码扩展来排序你的Flutter项目的导入</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sorting-your-flutter-projects-imports-ffb88b4502f?source=collection_archive---------9-----------------------#2022-05-27">https://betterprogramming.pub/sorting-your-flutter-projects-imports-ffb88b4502f?source=collection_archive---------9-----------------------#2022-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2938" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">轻松排序您的dart导入</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2c6cb9dfb8957fc26b72b7f5958aba79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_8nZp5HHMluyD4hv"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="563d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">TL；速度三角形定位法(dead reckoning)</h1><blockquote class="lo lp lq"><p id="0aeb" class="lr ls lt lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">Dart导入分类器扩展做了一件主要的事情:它将你的导入从一团乱麻转换成整洁一致的东西。</p></blockquote><h1 id="0932" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="e199" class="pw-post-body-paragraph lr ls iq lu b lv mo jr lx ly mp ju ma mq mr md me ms mt mh mi mu mv ml mm mn ij bi translated">在很大程度上，IDEs负责为您组织导入。我不是一个狂热的IntelliJ用户，但我经常欣赏它让进口产品看不见、想不起来的方式。</p><p id="152c" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">我想在VS代码中实现同样的功能，但是我在市场上找不到任何扩展来实现我想要的行为。所以，像任何过于雄心勃勃的程序员一样，我决定自己写！</p><h1 id="650d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">描述</h1><p id="3f0b" class="pw-post-body-paragraph lr ls iq lu b lv mo jr lx ly mp ju ma mq mr md me ms mt mh mi mu mv ml mm mn ij bi translated">Dart导入分类器扩展做了一件主要的事情:它将你的导入从一团乱麻转换成整洁一致的东西。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/60191d8463ed755988e66ef0b0cfe7fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v-beLWG8yo6nG6Ms.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">对混乱的导入进行排序和分组</p></figure><h1 id="e20b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">设置您自己的配置</h1><p id="a328" class="pw-post-body-paragraph lr ls iq lu b lv mo jr lx ly mp ju ma mq mr md me ms mt mh mi mu mv ml mm mn ij bi translated">您可以使用默认配置，也可以根据自己的需要进行定制。扩展可以使用正则表达式来配置，所以没有限制。</p><p id="08b3" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">下面是一个配置示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">扩展配置示例(settings.json)</p></figure><p id="f905" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">根据上面的例子，扩展将查找匹配Flutter规则的导入，然后是Dart，然后是所有其他的。这些标签实际上并不用于分类过程。它们只是在这里帮助您跟踪每个规则的作用。</p><p id="79c2" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">这是这些规则的演示。以下是一堆乱七八糟的进口货:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">未分类进口的例子</p></figure><p id="d575" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">上面的代码经过排序后变成如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">分组和排序导入的示例</p></figure><p id="978a" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">您会注意到每个组之间有新的行，并且组内的导入按字母顺序排序。</p><p id="5ac2" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">您可以通过设置以下规则来关闭组之间的换行符:</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="190c" class="ne kx iq na b gy nf ng l nh ni">"dartimportsorter.leaveEmptyLinesBetweenGroups": false</span></pre><h1 id="8172" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">如何使用</h1><p id="5b5f" class="pw-post-body-paragraph lr ls iq lu b lv mo jr lx ly mp ju ma mq mr md me ms mt mh mi mu mv ml mm mn ij bi translated">您可以使用快捷键<code class="fe nj nk nl na b">Ctrl + Alt + O</code>运行扩展，或者您可以使用命令面板<code class="fe nj nk nl na b">Ctrl + Shift + P -&gt; Dart: Sort Imports</code>。</p><p id="7d72" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">最后，您可以设置扩展名，以便在保存文件时对导入内容进行排序。为此，请设置以下规则:</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="c673" class="ne kx iq na b gy nf ng l nh ni">"dartimportsorter.sortOnSave": true</span></pre><h1 id="3c2a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么要对进口商品进行分类？</h1><p id="1381" class="pw-post-body-paragraph lr ls iq lu b lv mo jr lx ly mp ju ma mq mr md me ms mt mh mi mu mv ml mm mn ij bi translated">当我第一次开始编写这个扩展时，真的是因为我喜欢看到我的导入被分组和组织起来。但是后来，我发现了几个(有点)令人信服的原因:</p><ol class=""><li id="6965" class="nm nn iq lu b lv lw ly lz mq no ms np mu nq mn nr ns nt nu bi translated">您的导入在文件的开头更紧凑。您知道应该立即跳过哪个部分来获得实际的代码。您也可以折叠整个块以使其更容易。</li><li id="5ff1" class="nm nn iq lu b lv nv ly nw mq nx ms ny mu nz mn nr ns nt nu bi translated">如果需要，您可以更快地找出并修复不正确的导入。</li></ol><h1 id="0aa3" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">关于扩展</h1><p id="9961" class="pw-post-body-paragraph lr ls iq lu b lv mo jr lx ly mp ju ma mq mr md me ms mt mh mi mu mv ml mm mn ij bi translated">注意:这一部分并不真正讨论扩展的功能，而是讨论开发过程。</p><p id="5d61" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">我把开发这个扩展的过程当作一个游戏场，尝试了一些我读到的编程/架构技术。主要是清洁建筑(鲍勃大叔)。我在这里还没有真正应用它，但是它激励我应用坚实的原则(或者至少尝试一下)。</p><p id="3ef9" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">我设法通过使用<a class="ae kv" href="https://www.npmjs.com/package/tsyringe" rel="noopener ugc nofollow" target="_blank">t插入</a>注入依赖关系来实现控制反转。这允许我将事情彼此分离，并正确地进行单元测试，而不涉及vs代码扩展API。</p><p id="8893" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">在编写测试方面，我不是最有经验的人，但是我必须承认，测试极大地增加了我对我在代码中实现的变化的信心，无论是添加功能还是重构。为了确保一切正常，我需要做的只是在bash中编写一个小命令，如果它亮起绿灯，那么我就可以开始了。</p><p id="88ec" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">如果你对贡献感兴趣或者你想要求一个功能，这里有回购的<a class="ae kv" href="https://github.com/aziznal/dart-import-sorter" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="a31e" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">另外，这里有一个<a class="ae kv" href="https://marketplace.visualstudio.com/items?itemName=aziznal.dart-import-sorter" rel="noopener ugc nofollow" target="_blank">到VS代码市场</a>的链接</p><p id="6341" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mq mc md me ms mg mh mi mu mk ml mm mn ij bi translated">编码快乐！</p></div></div>    
</body>
</html>