<html>
<head>
<title>Introduction to Flutter Animations Using AnimatedContainer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AnimatedContainer的颤动动画简介</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introduction-to-flutter-animations-using-animatedcontainer-96a335cad2ca?source=collection_archive---------7-----------------------#2019-12-14">https://betterprogramming.pub/introduction-to-flutter-animations-using-animatedcontainer-96a335cad2ca?source=collection_archive---------7-----------------------#2019-12-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="063e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将您的Flutter应用程序带入生活</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4d84f6e346c1b0ec3f2be77bdd559e06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q_obyf4OI-S-Ghr3nM2txA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@ruizra?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">兰德尔·鲁伊斯</a>在<a class="ae ky" href="https://unsplash.com/s/photos/flutter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ef60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将看看<code class="fe lv lw lx ly b">AnimatedContainer</code>以及它如何被用来在<a class="ae ky" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>应用中执行动画。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8cc9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">动画容器</h1><p id="3298" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在Flutter中有几种表现动画的方式，但<code class="fe lv lw lx ly b">AnimatedContainer</code>可能是最简单的一种。</p><p id="b053" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个想法是将您的小部件包装在一个容器(<code class="fe lv lw lx ly b">AnimatedContainer</code>)中，并在一段时间内更新<code class="fe lv lw lx ly b">AnimatedContainer</code>的属性。这些属性包括高度、宽度、颜色、边框半径、边框等。</p><p id="7e11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:<code class="fe lv lw lx ly b">AnimatedContainer</code>的变换和子属性不能被动画化。</p><p id="85c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这可能感觉受到限制，但实际上您可以组合多个属性并制作动画来创建有趣的动画。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4102" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">入门指南</h1><p id="bc78" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">让我们从创建应用程序的基本布局开始。这将由一个按钮和一个<code class="fe lv lw lx ly b">Container</code>组成，如下图所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创建以下界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/db8c8b700d993c9f5cd16c65d4f04315.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*P0FJXloT6ruhRvbN7d_QdQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">凸起的按钮和容器</p></figure><p id="89e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了动画显示容器的宽度或高度，我们将把它包装在一个<code class="fe lv lw lx ly b">AnimatedContainer</code>小部件中。<code class="fe lv lw lx ly b">AnimatedContainer</code>还公开了宽度、高度和颜色属性，如下面的代码所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6907" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您会注意到我们已经移除了<code class="fe lv lw lx ly b">Container</code>小部件，并用<code class="fe lv lw lx ly b">AnimatedContainer</code>取而代之。效果是一样的，它只是在屏幕上显示一个绿色的小方块。</p><p id="f067" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了制作<code class="fe lv lw lx ly b">AnimatedContainer</code>的宽度和高度的动画，我们将不得不改变这些尺寸。这意味着我们必须为我们的小部件启用状态。</p><p id="717c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，我们的小部件继承了<code class="fe lv lw lx ly b">StatelessWidget</code>，这意味着它不能维护状态。让我们首先确保更新小部件以使用<code class="fe lv lw lx ly b">StatefulWidget</code>,如下面的代码所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ae24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">StatefulWidget</code>将允许我们改变小部件的状态，这将有助于动画<code class="fe lv lw lx ly b">AnimatedContainer</code>的某些属性。</p><p id="ef17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，创建一个属性<code class="fe lv lw lx ly b">_width</code>并用值<code class="fe lv lw lx ly b">50.0</code>初始化它，如下所示:</p><pre class="kj kk kl km gt ng ly nh ni aw nj bi"><span id="cc1d" class="nk mh it ly b gy nl nm l nn no">double _width = 50.0; </span></pre><p id="5b0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们想在按钮被按下时更新<code class="fe lv lw lx ly b">_width</code>的值。将下面的代码添加到<code class="fe lv lw lx ly b">RaisedButton</code>的<code class="fe lv lw lx ly b">onPressed</code>事件中，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="a5ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还要注意，我们已经更新了<code class="fe lv lw lx ly b">AnimatedContainer</code>，它现在使用<code class="fe lv lw lx ly b">_width</code>作为其宽度属性的值。这意味着当点击按钮时，它会将<code class="fe lv lw lx ly b">_width</code>变为<code class="fe lv lw lx ly b">100</code>。</p><p id="f847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为这个变化在<code class="fe lv lw lx ly b">setState</code>块内部，它将触发小部件的构建功能。这意味着所有的小部件都将重新创建，这一次，<code class="fe lv lw lx ly b">AnimatedContainer</code>将对其width属性执行动画，因为它已经从<code class="fe lv lw lx ly b">50</code>变成了<code class="fe lv lw lx ly b">100</code>。</p><p id="c4fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的动画展示了这种效果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/119d412a27401d3258ec71fb2e9bf5a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/1*3_LRsvA__yOJBmNeVPD_Qw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">动画容器通过改变宽度来制作动画</p></figure><p id="ef9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很酷，对吧？</p><p id="cdb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你甚至可以制作包括颜色在内的多种属性的动画。这显示在下面的实现中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="541d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建了两个名为<code class="fe lv lw lx ly b">_length</code>和<code class="fe lv lw lx ly b">_color</code>的全新属性。长度属性将显示容器的大小，颜色属性将显示容器的颜色。最终效果如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/1de39989bf237715e7d377376697c570.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/1*l1t27tJsUIVRTWOpN3B2DQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">动画大小和颜色</p></figure><p id="e0e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">负责改变一些视觉属性的动画可能看起来不太像，但是当组合在一起时可以产生有趣的结果。</p><p id="bd54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一节中，我们将实现一个通知横幅小部件，它将使用<code class="fe lv lw lx ly b">AnimatedContainer</code>来创建有吸引力的动画。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="4db3" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">az通知</h1><p id="48a3" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><code class="fe lv lw lx ly b">AZNotification</code>是一个通知窗口小部件，用于显示基于横幅的小通知。<code class="fe lv lw lx ly b">AZNotification</code>小部件的动画如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/44dba14e92f171fe790cd42909f97d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/1*mP8jfbZ7qw-y47LkB_Tz8w.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">az通知成功动画</p></figure><p id="4f3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">AZNotification</code>使用<a class="ae ky" href="https://pub.dev/packages/sprung" rel="noopener ugc nofollow" target="_blank">弹起</a>框架来实现弹性弹起效果。</p><p id="cac8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还允许开发人员选择横幅的状态，包括成功、警告和错误，分别用绿色、橙色和红色表示。</p><p id="66dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，你可以找到<code class="fe lv lw lx ly b">AZNotification</code>小部件的基本定义。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="dc06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些属性的详细信息如下所示:</p><ul class=""><li id="6252" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b">isActive</code> —该属性表示是否显示<code class="fe lv lw lx ly b">AZNotification</code>。</li><li id="89c5" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b">child</code> —将在<code class="fe lv lw lx ly b">AZNotification</code>小工具中显示的子控件。</li><li id="d1f0" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b">status</code> —成功、警告或错误。</li><li id="2ef9" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b">completion</code> —动画完成时触发的完成功能。</li><li id="91af" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b">maxHeight</code> —旗帜的最大高度。</li><li id="e674" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe lv lw lx ly b">borderRadius</code>—<code class="fe lv lw lx ly b">AZNotification</code>小工具是否有圆形边框。</li></ul><p id="ad1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">AZNotification</code> widget的构建功能实现如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="f245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">差不多就是这样了！</p><p id="181b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">AZNotification</code>的用法如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="f4dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/df7db26abf4a28f36181904c9b8bfb48.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/1*yUreK6-d5ANMKIOgDZ8tLg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">az通知错误状态</p></figure><p id="7f26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您了解了Flutter中的<code class="fe lv lw lx ly b">AnimatedController</code>，以及如何使用它在Flutter应用程序中创建动画。</p><ul class=""><li id="0de8" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><a class="ae ky" href="https://github.com/azamsharp/AzamSharp-Weekly/blob/master/flutter_animations.zip" rel="noopener ugc nofollow" target="_blank"> GitHub —颤动动画</a></li></ul><p id="a99b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我真的希望你喜欢这篇文章！</p><p id="d5df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快乐编码。</p></div></div>    
</body>
</html>