<html>
<head>
<title>How to Use Key Path Expressions as Functions in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Swift中将关键路径表达式用作函数</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/using-key-path-expressions-as-functions-in-swift-f0fe650ef7dc?source=collection_archive---------6-----------------------#2020-04-26">https://betterprogramming.pub/using-key-path-expressions-as-functions-in-swift-f0fe650ef7dc?source=collection_archive---------6-----------------------#2020-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="55ba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Swift 5.2中一项令人惊叹的新功能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d40fdcbd4707c64f6ab30bc3c684613e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5q8WvaFtqx9bphSHymNwyQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@merittthomas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">merit Thomas</a>在<a class="ae ky" href="https://unsplash.com/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="091e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑这段代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="1927" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们创建了一个名为<code class="fe lx ly lz ma b">Car</code>的<code class="fe lx ly lz ma b">struct</code>，它有五个属性:<code class="fe lx ly lz ma b">model</code>、<code class="fe lx ly lz ma b">brand</code>、<code class="fe lx ly lz ma b">price</code>、<code class="fe lx ly lz ma b">designerName</code>和<code class="fe lx ly lz ma b">isExpensive</code>。</p><p id="0d18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建这个结构的一些实例，并将它们存储在一个数组中，<code class="fe lx ly lz ma b">cars</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="9825" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mb">注意:汽车的名称及其属性与现实世界中的汽车并不相似。</em></p><p id="2846" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想要检索<code class="fe lx ly lz ma b">cars</code>数组中所有汽车的型号，直到Swift 5.1，语法如下:</p><pre class="kj kk kl km gt mc ma md me aw mf bi"><span id="de09" class="mg mh it ma b gy mi mj l mk ml">let carModels = cars.map({ car in<br/>    return car.model<br/>})</span></pre><p id="9370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，如果那个开发者有点懒(像我！)或者更喜欢编写简短的代码，那么代码应该是:</p><pre class="kj kk kl km gt mc ma md me aw mf bi"><span id="6713" class="mg mh it ma b gy mi mj l mk ml">let carModels = cars.map { $0.model }</span></pre><p id="a7dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是等等，<a class="ae ky" href="https://swift.org/blog/swift-5-2-released/" rel="noopener ugc nofollow" target="_blank">雨燕5.2 </a>有东西给你！由<a class="ae ky" href="https://github.com/stephencelis" rel="noopener ugc nofollow" target="_blank"> Stephen Celis </a>和<a class="ae ky" href="https://github.com/gregomni" rel="noopener ugc nofollow" target="_blank"> Greg Titus </a>撰写、由<a class="ae ky" href="https://github.com/airspeedswift" rel="noopener ugc nofollow" target="_blank"> Ben Cohen </a>和<a class="ae ky" href="https://github.com/apple/swift/pull/26054" rel="noopener ugc nofollow" target="_blank">审核并在Swift 5.2 </a>中实施的<a class="ae ky" href="https://github.com/apple/swift-evolution/blob/master/proposals/0249-key-path-literal-function-expressions.md" rel="noopener ugc nofollow" target="_blank"> Swift Evolution提案SE-0249 </a>，介绍了一种在一些特殊情况下使用关键路径的简便方法。演进建议将此描述为能够在允许使用<code class="fe lx ly lz ma b">(Root) -&gt; Value</code>功能的任何地方使用<code class="fe lx ly lz ma b">\Root.value</code>。这意味着，如果您之前向一个方法发送了一个<code class="fe lx ly lz ma b">Car</code>并取回了它的<code class="fe lx ly lz ma b">model</code>，那么您现在可以使用<code class="fe lx ly lz ma b">Car.model</code>来代替。</p><p id="6583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，从Swift 5.2开始，您可以使用key path来选择特定的迭代并访问其属性。因此，我们可以通过编写以下代码来获取<code class="fe lx ly lz ma b">cars</code>数组中所有汽车的模型:</p><pre class="kj kk kl km gt mc ma md me aw mf bi"><span id="0782" class="mg mh it ma b gy mi mj l mk ml">let carModels = cars.map(\.model)</span></pre><p id="6f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这么简单！关键路径使它变得简单快捷。</p><p id="fa75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法在另一个场景中也很有用。而在以前，您将接收一个值并传回它的一个属性。现在，您可以使用密钥路径。例如，要退回所有昂贵的汽车，我们只需这样做:</p><pre class="kj kk kl km gt mc ma md me aw mf bi"><span id="2651" class="mg mh it ma b gy mi mj l mk ml">let expensiveCars = cars.filter(\.isExpensive)</span></pre><p id="9868" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获取汽车设计师的所有姓名的数组，我们可以这样做:</p><pre class="kj kk kl km gt mc ma md me aw mf bi"><span id="cfb5" class="mg mh it ma b gy mi mj l mk ml">let designers = cars.compactMap(\.designerName)</span></pre><p id="1f92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Swift 5.2还引入了其他新功能，但这是我最喜欢的一个。请检查这个<a class="ae ky" href="https://gist.github.com/sagunraj/257beefc06cf67dd1c930da98eeb5116" rel="noopener ugc nofollow" target="_blank">要点</a>来查看所有代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您最喜欢的Swift 5.2功能与我的不同吗？请在评论区分享。</p><p id="8589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快乐的雨燕！</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="8ee1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你觉得这篇文章有用，并且愿意支持我，请"<a class="ae ky" href="https://www.buymeacoffee.com/sagunraj" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a>"</p><div class="mt mu gp gr mv mw"><a href="https://www.buymeacoffee.com/sagunraj" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">Sagun Raj Lage正在撰写博客和书籍，并免费教授编程。</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">我是一名iOS开发人员，有从事各种领域相关项目的经验，如交通和…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk ks mw"/></div></div></a></div></div></div>    
</body>
</html>