# 为什么应该重构代码

> 原文：<https://betterprogramming.pub/why-you-should-be-refactoring-your-code-423d4986647>

## 当你进入一个文件时，让它比你发现它时更好

![](img/c6a9eaec03851fb30c6aede09b02f36c.png)

卢克·切瑟在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

> “重构是改变软件系统的过程，它不会改变代码的外部行为，但会改进其内部结构。
> 
> 这是一种清理代码的训练有素的方法，可以最小化引入 bug 的机会。本质上，当你重构的时候，你是在改进代码的设计。”——*马丁·福勒* *(父亲* [*码闻*](https://martinfowler.com/bliki/CodeSmell.html) *)* 。

让我们面对现实吧。我们都是程序员。我们聪明伶俐，喜欢交付成果。但是我们有多少次关心清理代码气味呢？

# 完美的代码好吗？

我们希望编写没有任何错误的代码。测试所有可能的边缘情况。它在每次运行构建时通过 linter 检查。你开始爱上的代码。顶尖的程序员肯定一直在写这样的代码，对吗？

不对。

没有完美的代码。*曾经*！

完美的代码是不存在的，就像神圣的界面也不存在一样。

代码是随着时间而演变的东西。在大多数情况下，代码库会变成一个庞然大物。

![](img/ae23eb617d50a80499555a69b18be4ed.png)

[克里斯汀·瓦格纳](https://unsplash.com/@wagner2074?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

复杂的代码库极难管理。

因此，编写干净的代码变得更加重要。一点一点地重构。以公寓为例。短时间清洗比长时间清洗更有用。

每当您修补代码库的特定部分时，请确保遵循以下方面。

## **1。签入比您签出的代码更干净**

> "让露营地比你发现时更干净."——[干净的代码](https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)(作者罗伯特·马丁)

童子军规则规定，你离开露营地时必须比发现时干净。由于代码会随着时间的推移而退化和腐烂，所以签入比从版本控制中签出的代码更干净的代码是一个好习惯。

当进行代码更改时，确定周围代码中需要改进的地方。

## **2。确保方法和变量有有意义的名字**

代码中有意义的名称确保您不必添加注释。名字越清晰，就越容易让人读懂，推断出它在做什么。

当你使用更清晰、更有意义的命名约定时，你实际上是在*节省*编写开发人员文档的时间。

## **3。遵守单一责任原则**

让我们面对现实吧。方法体越长，就越难理解。寻找最终朝着共同目标努力的路线。如果您找到这样的块，*将它们提取*到具有适当名称的单独方法中。

下一个处理这部分代码的人会非常感谢你。相信我！

一个方法应该一次只涉及一个需求。遵循这种设计范式对降低代码复杂性大有帮助。

## **4。尽可能使用设计模式**

设计模式使您能够实现经过试验和测试的问题解决方案，从而在软件开发生命周期的实现阶段节省时间和精力。

通过使用充分理解和记录的解决方案，最终产品将具有更高的理解程度。如果解决方案更容易理解，那么通过扩展，它也将更容易维护。

## **5。添加测试**

我不得不强调测试你的代码的重要性。确保您有足够的单元和集成测试。这些不仅帮助你识别潜在的陷阱和边缘情况，而且提供了重构的机会。

我可能会一直大谈测试覆盖率的重要性，也许有一天它会有自己的帖子。

甚至 Google 都推荐写单元测试！

# 知道什么时候划清界限

我的结论是，尽管重构很重要，但它不应该以完成手头的任务为代价。

明智地选择重构什么和重构多少，很快，你就会收获你努力的回报。

感谢阅读！