<html>
<head>
<title>Analyzing JavaScript UI Performance Using Network Panel and HAR Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用网络面板和HAR文件分析JavaScript UI性能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/analyzing-javascript-ui-performance-using-network-panel-and-har-files-bff526df60b2?source=collection_archive---------7-----------------------#2022-03-02">https://betterprogramming.pub/analyzing-javascript-ui-performance-using-network-panel-and-har-files-bff526df60b2?source=collection_archive---------7-----------------------#2022-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f206" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">调试web应用程序的有效方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e2246914ec3c1e5b08f7beb8acf08b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aJMEyiHm4lto7ops"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@towfiqu999999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Towfiqu barb huya</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="26b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的页面加载很慢！我的页面在加载时卡住了！</p><p id="2e7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你以前听说过这种抱怨吗？</p><p id="88a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最明显的UI性能问题是加载时间长。如果网页加载时间超过2秒，则认为用户体验差。如果加载时间超过5秒，web应用程序将被视为不可用。</p><p id="0906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为UI开发人员，我们一直都面临着这种情况。在开发环境中，我们专注于编写性能代码。然而，有许多因素会导致加载问题，例如互联网连接缓慢、过时的浏览器、缓存的数据和cookies、广告拦截器、浏览器扩展、许多打开的标签，或者只是一段时间没有重新启动的浏览器的状态。</p><p id="a78e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可能不知道每个用户的工作环境。在访问受限的情况下，可以通过分析网络活动来检查和解决问题。这项技术已经存在了一段时间，它仍然是测量JavaScript性能和调试任何瓶颈的最有效的方法之一。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fd8a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">DevTools的网络面板</h1><p id="26f2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">每个浏览器都提供DevTools。在本文中，我们以Chrome为例。其他浏览器的DevTools以类似的方式工作。</p><p id="fb65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，如果DevTools处于打开状态，网络面板会记录所有网络请求。</p><p id="ca43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个例子，请求表显示了来自<code class="fe mz na nb nc b"><a class="ae ky" href="http://www.qwerly.com/" rel="noopener ugc nofollow" target="_blank">http://www.qwerly.com/</a></code>的21个请求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/7ab0702364af9d4b9aa84b6ff542636a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIj5t62p2x5oE_QPCmYtGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="355e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">requests表显示了自DevTools打开以来发出的所有请求。对请求进行检查，以揭示web应用程序是如何工作的。这张桌子有两个部分:</p><ul class=""><li id="7885" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">设置控制以记录目标请求。</li><li id="1dbb" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">分析保存的请求。</li></ul><h2 id="f0f5" class="ns md it bd me nt nu dn mi nv nw dp mm li nx ny mo lm nz oa mq lq ob oc ms od bi translated">设置控制以记录目标请求</h2><p id="1471" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于如何记录目标请求，需要配置许多控制。</p><ul class=""><li id="069d" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">录音按钮:默认情况下，录音按钮是打开的，但可以关闭。当DevTools不再记录请求时，它变为灰色。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/7946647b614cb1b6e761c0a86a3110cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0mgqaA71FkzyURVVq7FWGQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="725d" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">clear按钮:它从requests表中清除所有请求。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/cca7f0f7d63bc928dbf37c9de574f2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JWL-gtV23szak0PYsN4Jlw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="fd26" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">过滤器按钮:在下一行显示/隐藏过滤器面板。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/1c0418d226c8882261a48ed110dfa2e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJ4PwYWRTuku04MspwfmlA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="398f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当filter按钮打开时，我们可以通过文本和特定的按钮<code class="fe mz na nb nc b">All</code>、<code class="fe mz na nb nc b">Fetch/XHR</code> (XMLHttpRequest)、<code class="fe mz na nb nc b">JS</code> (JavaScript)、<code class="fe mz na nb nc b">CSS</code>来过滤requests表。<code class="fe mz na nb nc b">Img</code>(图片)<code class="fe mz na nb nc b">Media</code><code class="fe mz na nb nc b">Font</code><code class="fe mz na nb nc b">Doc</code>(文档)<code class="fe mz na nb nc b">WS</code>(web socket)<code class="fe mz na nb nc b">Wasm</code>(web assembly)<code class="fe mz na nb nc b">Manifest</code><code class="fe mz na nb nc b">Other</code>。</p><ul class=""><li id="7ae4" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">search按钮:它打开一个搜索面板，可以在其中搜索响应内容。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/bcadc311e41a32eef90692be5d74d71a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DYt8lCNqRppfNQN-7114A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ca35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是从请求表中搜索<code class="fe mz na nb nc b">div</code>的搜索面板。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/ece9fb9b33a3aab35c9a4374f60ad117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u6u7tDjBMAfgOK0xXHrbqQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="5793" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Preserve log</code>复选框:要跨页面加载保存请求，请选中<code class="fe mz na nb nc b">Preserve log</code>复选框。否则，对于每次页面加载，requests表都会被清除。对于性能分析，跨页面加载保存请求通常很有帮助。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/1089c7679f2401320182ae3cf5b7f476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0W3HK3SBSg_9U-As5o-XPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="ff75" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Disable cache</code>复选框:要模拟首次用户体验，请选中<code class="fe mz na nb nc b">Disable cache</code>复选框。否则，一些请求会在重复访问时由浏览器缓存提供服务。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/42c498f5982f714881bbe876dcfa0143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4zvxxkUHYCyrDI3BwZwlOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><ul class=""><li id="2bed" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">网络节流菜单:除常规网速(<code class="fe mz na nb nc b">No throttling</code>)外，我们可以模拟<code class="fe mz na nb nc b">Fast 3G</code>、<code class="fe mz na nb nc b">Slow 3G</code>、<code class="fe mz na nb nc b">Offline</code>以及其他自定义连接速度(如<code class="fe mz na nb nc b">Slowest</code>)。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/8f357d48832adb8cf91b5b66784c679f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*MHRLqM6Tzdb1U4ojodxW4Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="11ba" class="ns md it bd me nt nu dn mi nv nw dp mm li nx ny mo lm nz oa mq lq ob oc ms od bi translated">分析保存的请求</h2><p id="82be" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经配置了requests表来记录目标请求。我们如何阅读请求？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/6d69587a1eeda831cde3092b8c1fc4a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4uyE_I41b5-RbeLEx5wLNw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="6ed1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述请求表显示以下各列:</p><ul class=""><li id="9f49" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Name</code>:资源的文件名或标识符。</li><li id="5c7e" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Status</code>:HTTP状态码。<code class="fe mz na nb nc b">100</code>–<code class="fe mz na nb nc b">199</code>为信息响应，<code class="fe mz na nb nc b">200</code>–<code class="fe mz na nb nc b">299</code>为成功响应，<code class="fe mz na nb nc b">300</code>–<code class="fe mz na nb nc b">399</code>为客户端错误响应，<code class="fe mz na nb nc b">500</code>–<code class="fe mz na nb nc b">599</code>为服务器错误响应。状态<code class="fe mz na nb nc b">200</code>为<code class="fe mz na nb nc b">OK</code>，表示请求成功。</li><li id="a1f7" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Protocol</code>:应用协议，如<code class="fe mz na nb nc b">http/1.0</code>、<code class="fe mz na nb nc b">http/1.1</code>、<code class="fe mz na nb nc b">h2</code>、<code class="fe mz na nb nc b">h3</code>等。</li><li id="8a26" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Type</code>:请求资源的MIME(多用途互联网邮件扩展)类型，如<code class="fe mz na nb nc b">document</code>、<code class="fe mz na nb nc b">stylesheet</code>、<code class="fe mz na nb nc b">script</code>、<code class="fe mz na nb nc b">font</code>、<code class="fe mz na nb nc b">png</code>、<code class="fe mz na nb nc b">jpeg</code>等。</li><li id="877a" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Initiator</code>:发起请求的对象/进程。在上面的请求表中，大多数请求都是由索引文件发起的。</li><li id="4929" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Size</code>:响应头和响应体的组合大小，由服务器提供。</li><li id="50fe" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Time</code>:总持续时间，从请求开始到收到响应中的最后一个字节。</li><li id="cca6" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Waterfall</code>:每个请求活动的可视化分解。</li></ul><p id="c411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以选择的列比较多，每个列都可以排序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/7a0da6fe9700d3fd7ca70bea90d274d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VIaPRHjXNR_bquxKrm5PFQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a130" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分析保存的请求可以了解应用程序是如何工作的。它显示失败和出错的呼叫。错误可能是由于客户端错误地调用API调用，或者服务器遇到内部错误而导致的。可以通过逐行查看请求表来了解细节。</p><p id="acbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击请求行将显示或重放请求。对<code class="fe mz na nb nc b">Apache.jpg</code>的请求显示了羽毛图像的预览。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/8cdd3e8f9ddea6ee78bca46117b00bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e-HHAIbWci5_4Bi_K0bSxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="bdbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瀑布活动显示了一个请求排队多长时间，等待多长时间，以及下载内容需要多长时间。</p><ul class=""><li id="42bb" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Queueing</code>:当有更高优先级的请求时，浏览器将请求排队，或者已经有6个TCP连接为此源打开，这是<code class="fe mz na nb nc b">HTTP/1.0</code>和<code class="fe mz na nb nc b">HTTP/1.1</code>的Chrome限制，或者浏览器正在分配磁盘缓存中的空间。</li><li id="f72c" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Waiting (TTFB)</code>:浏览器正在等待响应的第一个字节。TTFB代表到达第一个字节的时间。这个计时包括一次往返的延迟和服务器准备响应所花费的时间。</li><li id="f73a" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe mz na nb nc b">Content Download</code>:浏览器直接从网络或服务人员那里接收响应。该值是读取响应正文所花费的总时间。大于预期值可能表示网络速度较慢，或者浏览器正忙于执行其他工作，从而延迟了响应的读取。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/67a7ecbf419c924b9524a0b0983bfc7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h14rLi58xMixSV-6iVMh0w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e146" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将节流菜单改为<code class="fe mz na nb nc b">Slow 3G</code>。在第一个5s中，标题图像丢失。发生了什么事？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/c04f9dc4e5a4d34b24a7d270c02cfbea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Tdwz8mc3g3Yv_kSPQXE4w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a682" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看请求表，我们发现有多个挂起的请求。对<code class="fe mz na nb nc b">Apache.jpg</code>的请求正在等待处理。这是图像缺失的根本原因。</p><p id="a951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网页加载完毕后，我们检查对<code class="fe mz na nb nc b">Apache.jpg</code>的请求。从<code class="fe mz na nb nc b">Slow 3G</code>加载图像花费了<code class="fe mz na nb nc b">8.61s</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/e2a2bfc64caaa970ab7f05afcd9e5d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rsWQbMmopLSL4RgISS-hgw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2217" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将网络面板日志保存到HAR文件</h1><p id="9ddb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">从前面的例子中，我们看到requests表对于分析UI性能问题非常有效。</p><p id="e538" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b"><a class="ae ky" href="http://www.qwerly.com/" rel="noopener ugc nofollow" target="_blank">http://www.qwerly.com/</a></code>是简单的页面。如果我们尝试用谷歌地图搜索旧金山，总共有208个请求，这在浏览器可视区域是看不到的。它需要更多的时间来分析这些请求。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/5650af0a1c3d489c501766edab624126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eJ4crUGBfSa_39a5UBFcxg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d992" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们不小心关闭了窗口/标签页怎么办？</p><p id="4d97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们会丢失所有的请求日志吗？</p><p id="25c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方案是将请求表保存到HAR文件中。</p><p id="c95e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">HAR代表HTTP存档格式。它是一种JSON格式的归档文件格式，记录了web浏览器如何与站点交互。这类文件的常见扩展名是<code class="fe mz na nb nc b">.har</code>。</p><p id="bf9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">右键单击请求表会显示一个菜单。选择<code class="fe mz na nb nc b">Save all as HAR with content</code>，请求日志被保存。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/28a60d35c11690e2bb0d098cf07e34d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G0pggJS1OX7VBociAQ8TAg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9e9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，我们可以使用向下箭头来保存HAR文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/181dd810eeb4d4bd040795be9dc9a826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DYw9tOmbgdh9tAle_kN2CQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cf35" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">查看HAR文件</h1><p id="248b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经收到了对慢速UI的请求，并将它们保存到HAR文件中。</p><p id="0e39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个来自谷歌地图的HAR文件的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="d7af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该文件有94，816行，我们已经显示了前58行。以下是JSON树:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/79bab66f08fde39c1b88e1b82ce9526c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TNm-EEgZ9yCcm8inQNgpLw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="95bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何分析这份HAR文件？</p><p id="49be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看HAR文件有多种方式:</p><ul class=""><li id="eeb9" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">上传HAR文件到网络面板。</li><li id="e073" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">使用Chrome扩展。</li><li id="32de" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">使用在线HAR文件查看器。</li></ul><h2 id="66b7" class="ns md it bd me nt nu dn mi nv nw dp mm li nx ny mo lm nz oa mq lq ob oc ms od bi translated">将HAR文件上传到网络面板</h2><p id="e1d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">HAR文件从“网络”面板保存，并且可以上传回“网络”面板。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/cb34420434532d5f2cea818dc0e46e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNKM0z2244qYrvyrt0VQtQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="8f2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这也可以通过在网络面板上拖放HAR文件来完成。</p><p id="5e38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们甚至可以将Chrome保存的HAR文件放到Firefox浏览器上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/a73b796c881c79482fd4e3d012bb24d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QSqUHcgX6vbaScm_huxvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="afb1" class="ns md it bd me nt nu dn mi nv nw dp mm li nx ny mo lm nz oa mq lq ob oc ms od bi translated">使用Chrome扩展查看HAR文件</h2><p id="470b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Chrome有一个扩展<code class="fe mz na nb nc b">HTTP Archive Viewer</code>，是一个检查HAR文件的工具。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/be127f2acf4ed4740dadee7009bd5e63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQEFQLafME_Ni4UQs5Wx4A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d2a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<code class="fe mz na nb nc b">Lunch app</code>按钮，弹出一个窗口，有3个选项卡。第一个选项卡用于加载HAR文件。该文件可以放在页面上的任何地方，用文件选择器选择，或者粘贴到文本框中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/276830debac534adec35a3aa8dc828b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C59zZo2alLNbwXmkeWXrIA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="57e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件加载后，窗口切换到<code class="fe mz na nb nc b">Inspect</code>选项卡。除了可用于附加分析的请求之外，查看器还可以显示/隐藏每个加载的HAR文件的<code class="fe mz na nb nc b">Page Timeline</code>。我们已经加载了两个HAR文件，一个用于<code class="fe mz na nb nc b"><a class="ae ky" href="http://www.qwerly.com/" rel="noopener ugc nofollow" target="_blank">http://www.qwerly.com/</a></code>，一个用于谷歌地图。点击时间线栏可以选择/取消选择要包含/排除在<code class="fe mz na nb nc b">Show Statistics</code>面板中的相关请求。在下面的屏幕截图中，选择了两个HAR文件来显示有关传输数据的统计信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/cb9d6d095a75d7aa1470fd6a39c5e6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTBjNH9Xw0ZYjdzA7PryXA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ede1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三个标签页是<code class="fe mz na nb nc b">About</code>，是关于查看器的描述。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/37b6d370773d5e32d303c83ac99f8293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wxZ6Nt98HzuSSWtgDs7Ig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="d41e" class="ns md it bd me nt nu dn mi nv nw dp mm li nx ny mo lm nz oa mq lq ob oc ms od bi translated">使用在线HAR文件查看器</h2><p id="c74d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有一些在线的HAR文件查看器，<a class="ae ky" href="http://www.softwareishard.com/blog/har-viewer/" rel="noopener ugc nofollow" target="_blank">http://www.softwareishard.com/blog/har-viewer/</a>的工作方式类似于Chrome扩展，<code class="fe mz na nb nc b">HTTP Archive Viewer</code>。</p><p id="4b1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前两个选项卡类似于<code class="fe mz na nb nc b">HTTP Archive Viewer</code>的前两个选项卡。第三个选项卡显示了上传的HAR文件的JSON树。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/fc1fd62c798f375ad794edda83533edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*22qmjsCZerhO4nOpv_E07Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5818" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="23f7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们已经展示了如何使用DevTools的网络面板来分析UI性能。请求表可以保存为HAR文件。HAR文件可以上传回网络面板进行检查，或者使用浏览器扩展或在线HAR文件查看器进行显示和分析。这种技术并不新鲜，但它仍然是测量JavaScript性能和调试任何瓶颈的最有效的方法之一。</p><p id="dffe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。如果你有兴趣，可以看看<a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">我的其他媒体文章</a>。</p></div></div>    
</body>
</html>