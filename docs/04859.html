<html>
<head>
<title>When to Declare the Type on a Variable in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时在TypeScript中声明变量的类型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/when-to-declare-type-to-variables-in-typescript-d69a917ac1cf?source=collection_archive---------5-----------------------#2020-05-17">https://betterprogramming.pub/when-to-declare-type-to-variables-in-typescript-d69a917ac1cf?source=collection_archive---------5-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e8df" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们来谈谈类型推断</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ff30c4019c4afd332cc87a03c16ab799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ixi3DVaTSWT-qcAKR10uQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">劳拉·奥克尔在<a class="ae ky" href="https://unsplash.com/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="87cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我觉得这是TypeScript初学者最常问的问题之一。当我看到每个人都为每个变量声明类型时，我发现自己也在问这个问题。这似乎不太对，所以我直接去了官方的打字稿文档来寻找答案。</p><p id="81fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">typescript中有一个称为类型推断的特性，它通过变量值来猜测类型。</p><p id="b8a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您为字符串、数字、对象、数组和函数手动键入类型注释，如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7282" class="ma mb it lw b gy mc md l me mf">const animal: string = ‘cat’</span><span id="babf" class="ma mb it lw b gy mg md l me mf">const count: number = 5</span><span id="add8" class="ma mb it lw b gy mg md l me mf">count animalObj: {} = {</span><span id="e7fd" class="ma mb it lw b gy mg md l me mf">   name: ‘cat’,</span><span id="5a07" class="ma mb it lw b gy mg md l me mf">   count: 1</span><span id="97b5" class="ma mb it lw b gy mg md l me mf">}</span><span id="76b7" class="ma mb it lw b gy mg md l me mf">const animals: string[] = [‘cat’, ‘dog’, ‘bird’]</span><span id="8c08" class="ma mb it lw b gy mg md l me mf">const logAnimal: (i: number) =&gt; void = (i: number) =&gt; console.log(‘dog’)</span></pre><p id="ef0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，尝试删除类型并将鼠标悬停在变量上。你会发现TypeScript还是能告诉你是什么类型的！</p><h1 id="99ad" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">何时在TypeScript中向变量声明类型？</h1><p id="f701" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">答案是当TypeScript能够进行类型猜测时。我们只是尽可能地依赖它。当我们不需要的时候，写不必要的字符是没有意义的。</p><p id="005e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是在另外两种情况下，我们需要手动添加类型。</p><h2 id="126f" class="ma mb it bd mi nd ne dn mm nf ng dp mq li nh ni ms lm nj nk mu lq nl nm mw nn bi translated">返回任意类型的函数</h2><p id="3068" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当typescript搞不清楚类型推断时，它将只使用任何类型。例如，因为<code class="fe no np nq lw b">JSON.parse</code>可以返回任何类型，所以变量<code class="fe no np nq lw b">result</code>可以是任何类型:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8d78" class="ma mb it lw b gy mc md l me mf">let result = JSON.parse(‘4’)</span><span id="429e" class="ma mb it lw b gy mg md l me mf">result = JSON.parse(“{value: 123}”)</span><span id="d2a2" class="ma mb it lw b gy mg md l me mf">console.log(result)</span></pre><p id="2834" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了避免<code class="fe no np nq lw b">result</code>上的任何类型，这可能会删除我们代码库中的错误，我们可以手动声明类型:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0bda" class="ma mb it lw b gy mc md l me mf">const result: { value: number } = JSON.parse(“{value: 123}”)<br/>console.log(result.someOtherProp) // ts now throw error which is what we wanted</span></pre><p id="98ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们使用不是用typescript编写的库中的方法时，经常会发生这种情况。</p><h2 id="eca2" class="ma mb it bd mi nd ne dn mm nf ng dp mq li nh ni ms lm nj nk mu lq nl nm mw nn bi translated">在多行中为变量赋值</h2><p id="9176" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">当你只在一行中给一个变量赋值时，类型推断起作用。让我们尝试在一个变量上分配多行值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3f15" class="ma mb it lw b gy mc md l me mf">const arr = [1,2,3]</span><span id="4c25" class="ma mb it lw b gy mg md l me mf">let twoExisted</span><span id="176a" class="ma mb it lw b gy mg md l me mf">twoExisted = true</span></pre><p id="0d5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">试着悬停在上面的两个变量上。TypeScript知道<code class="fe no np nq lw b">arr</code>是数字<code class="fe no np nq lw b">[]</code>，但是<code class="fe no np nq lw b">twoExisted</code>是任意类型，尽管它已经被重新分配给<code class="fe no np nq lw b">true</code>。我们必须这样做:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5619" class="ma mb it lw b gy mc md l me mf">let twoExisted: boolean<br/>twoExisted = true</span></pre><p id="ddc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们想要对来自外部源的数据使用临时变量时，比如来自API调用的数据，就会发生这种情况。</p></div></div>    
</body>
</html>