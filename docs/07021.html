<html>
<head>
<title>8 Common Mistakes in Android Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android开发中的8个常见错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/8-common-mistakes-in-android-development-2edcf5179ec0?source=collection_archive---------0-----------------------#2020-11-30">https://betterprogramming.pub/8-common-mistakes-in-android-development-2edcf5179ec0?source=collection_archive---------0-----------------------#2020-11-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b130" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建优秀应用程序的陷阱</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3118f3bb4fa822e0c809f92335a99f2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wv0TnoSUN3tsL8kE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@loli_oni?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">川上正风</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="df19" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">1.东西应该在它们应该在的地方(线、颜色)</h1><p id="b9be" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">随着社区的多样化，Android生态系统在全球范围内有了巨大的增长。来自不同背景的人，残疾人，希望拥有夜间模式等奇特功能的人，以及更多在日常生活中使用Android应用的人。</p><p id="7bf5" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">为如此多样化的社区开发应用并不是一件容易的事情。这里我不是在谈论高层架构。相比之下，它是关于简单的东西，如字符串，颜色，尺寸等。这将极大地影响现代Android开发。</p><p id="e127" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">人们通常觉得使用母语的应用程序很舒服。至关重要的一步是将所有的字符串保存在一个文件中(通常是<code class="fe mz na nb nc b">strings.xml</code>)，以便快速添加不同语言的字符串文件。</p><p id="dfa4" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这也适用于颜色、尺寸和样式，所以当你决定做一些事情，如支持黑暗模式或调整布局以适应平板电脑视图时，很容易处理它们。底线是:在一个地方维护代码以便重用，而不是在任何需要的地方硬编码。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="3df9" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">2.不使用片段</h1><p id="b98f" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在Android开发的早期，建议每个屏幕使用单独的活动。随着时间的推移，开发人员会因此面临不同的问题。此外，活动作为应用程序的入口点也是一个漏洞。</p><p id="f6c2" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果你已经是一名Android开发人员，那么你会知道几年前使用activities是有意义的，那时Fragments API还没有那么成熟。</p><p id="7b79" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">快进到2020年，Android团队建议使用片段来设计每个屏幕，并在整个应用程序中维护单个或少数几个活动来托管片段。这就是众所周知的单活动架构。</p><p id="de3a" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">遵循这种架构将会减少来自应用程序外部的大量交互。新的<a class="ae ky" href="https://medium.com/better-programming/jitpack-navigation-component-in-android-944165c35f54" rel="noopener"> Jetpack导航组件</a>主要基于单活动架构。Fragments API将使您的生活更加简单。也许几年后，Android开发将会从活动转向片断。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="2294" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">3.不使用数据绑定或视图绑定</h1><p id="e337" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">Android开发环境从一开始就基于三种类型的文件:XML、Kotlin和Java。XML文件包含与设计相关的一切，而Kotlin/Java文件包含除设计部分之外的任何内容。</p><p id="fdc6" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">最终，UI和业务逻辑需要链接起来，这就是数据绑定和视图绑定发挥关键作用的地方。UI和业务逻辑之间的链接是从臭名昭著的<code class="fe mz na nb nc b"><a class="ae ky" href="https://medium.com/better-programming/the-evolution-of-view-linking-in-android-d6219678740d" rel="noopener">findviewbyid</a></code>函数开始的。</p><p id="5354" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是<a class="ae ky" href="https://medium.com/better-programming/everything-you-should-know-about-viewbinding-in-android-52552af9e8ba" rel="noopener">视图绑定</a>和数据绑定是解决这个问题的推荐方案。视图绑定的主要目的是解决运行时类型和空安全的链接问题。</p><p id="7533" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/data-binding-in-android-4ff7bba93a2c" rel="noopener">数据绑定</a>是为了更大的利益。它允许您使用声明性格式而不是编程方式将布局中的UI组件绑定到数据源。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="ff29" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">4.不使用Kotlin和协程</h1><p id="f456" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">谷歌宣布推荐Kotlin作为开发Android应用程序的语言已经有几年了。这是一个变革性的决定:Kotlin解决了Java中的痛点，可以减轻开发人员的负担。</p><p id="1e20" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">使用Kotlin进行Android开发打开了新的大门，提供了诸如<a class="ae ky" href="https://medium.com/better-programming/advanced-android-programming-with-kotlin-5e40b1be22bb" rel="noopener">扩展</a>、作用域函数、数据类、对象关键字、空安全等特性。除了Android开发，还可以用Kotlin进入多平台和服务器端开发。</p><p id="00b9" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">异步编程在移动开发中起着关键作用。在早期阶段，我们使用AsyncTask。随着时间的推移，RxJava出现了，这是一个转型性的变化。但是RxJava有一个深度学习曲线和一个完全不同的回调方法。</p><p id="40dc" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">然后是<a class="ae ky" href="https://medium.com/better-programming/kotlin-coroutines-from-basics-to-advanced-ad3eb1421006" rel="noopener">协程</a>，一个用简单方法实现异步编程的Kotlin-y解决方案。如今，协程已经成为实现异步任务的标准解决方案。强大的功能和简单的实现使其适应性更强。</p><p id="561d" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">Kotlin使您的开发变得简单明了，而协程允许您顺序执行异步任务，而无需学习任何新东西。在您的开发中使用它们只会产生更有生产力和更有效的输出。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="da37" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">5.设计错误</h1><h2 id="0466" class="nd lh it bd li ne nf dn lm ng nh dp lq mh ni nj ls ml nk nl lu mp nm nn lw no bi translated">低估ConstraintLayout</h2><p id="4249" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated"><code class="fe mz na nb nc b"><a class="ae ky" href="https://medium.com/android-dev-hacks/exploring-constraint-layout-in-jetpack-compose-67b82123c28b" rel="noopener">ConstraintLayout</a></code>结合了许多便利的功能，如指南、障碍、群组、纵横比、流动、图层等。有了所有这些特性，<code class="fe mz na nb nc b">ConstraintLayout</code>几乎可以绘制每一个屏幕(从简单到复杂的用例)。</p><p id="3270" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">ConstraintLayout</code>不同于相对和线性布局。停止用同样的方式对待他们。我们可以创建没有嵌套层次的平面布局。平面布局设计导致在视图上绘制较少的图层。</p><h2 id="1588" class="nd lh it bd li ne nf dn lm ng nh dp lq mh ni nj ls ml nk nl lu mp nm nn lw no bi translated">过度使用ConstraintLayout</h2><p id="9e9e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">强大的功能有被滥用的危险。在可以用<code class="fe mz na nb nc b">FrameLayout</code>或<code class="fe mz na nb nc b">LinearLayout</code>设计的UI中使用<code class="fe mz na nb nc b">ConstraintLayout</code>是一种荒谬的方法。</p><h2 id="4d66" class="nd lh it bd li ne nf dn lm ng nh dp lq mh ni nj ls ml nk nl lu mp nm nn lw no bi translated">害怕运动布局</h2><p id="4f0c" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated"><code class="fe mz na nb nc b">ConstraintLayout</code>是设计复杂用例的正确选择，但不是实现动画和过渡。<code class="fe mz na nb nc b"><a class="ae ky" href="https://medium.com/better-programming/beginners-guide-to-motion-layout-732395a7de7e" rel="noopener">MotionLayout</a></code>是做这件事的有效办法。</p><p id="3e90" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><code class="fe mz na nb nc b">MotionLayout</code>是<code class="fe mz na nb nc b">ConstraintLayout</code>的一个子类，包含了它所有突出的特性，它是完全声明性的，能够在XML中实现复杂的转换。它向后兼容API level 14，这意味着它覆盖了99%的用例。</p><p id="1315" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">Android Studio 4.0中新的<code class="fe mz na nb nc b">MotionLayout</code>编辑器使得使用<code class="fe mz na nb nc b">MotionLayout</code>变得更加容易。它提供了一个奇特的环境来实现过渡、<code class="fe mz na nb nc b">MotionScenes</code>等等。</p><p id="0b20" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">MotionLayout不包含复杂的计算和算法。相反，它是一种简单的声明性方法，通过Android Studio中一个新的花哨编辑器来实现动画和过渡。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="51bf" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">6.没有意识到安全缺陷</h1><h2 id="ff45" class="nd lh it bd li ne nf dn lm ng nh dp lq mh ni nj ls ml nk nl lu mp nm nn lw no bi translated">存储敏感数据</h2><p id="fdc4" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在Android共享偏好设置、数据库或本地存储中存储敏感数据存在风险。很容易被黑。许多开发人员并没有意识到这一点，而是使用共享偏好来存储用户敏感数据。</p><p id="eac9" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这可以通过使用新的<a class="ae ky" href="https://medium.com/better-programming/jetpack-datastore-improved-data-storage-system-adec129b6e48" rel="noopener">数据存储库</a>库或<a class="ae ky" href="https://medium.com/android-dev-hacks/securing-sensitive-data-in-android-e261687ab66e" rel="noopener">加密首选项</a>库或通过自己实现加密来解决。</p><h2 id="5e4f" class="nd lh it bd li ne nf dn lm ng nh dp lq mh ni nj ls ml nk nl lu mp nm nn lw no bi translated">安全通信</h2><p id="8ee9" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">许多Android开发者认为使用HTTPS可以使他们与服务器的通信安全。但事实并非如此。许多黑客通过干扰通信来误导服务器和客户端。这被称为<a class="ae ky" href="https://medium.com/better-programming/secure-communication-with-the-server-from-your-android-client-with-certificate-pinning-5f53cea55972" rel="noopener">中间人攻击</a>。</p><p id="0d3a" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">为了建立到服务器的安全线路，我们需要实现<a class="ae ky" href="https://medium.com/better-programming/secure-communication-with-the-server-from-your-android-client-with-certificate-pinning-5f53cea55972" rel="noopener">证书锁定</a>。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="bdd4" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">7.不了解Android Studio的功能</h1><p id="80a1" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">除非你学会如何正确使用，否则武器有多强大并不重要。作为开发人员，我们很幸运有一个像Android Studio这样强大的工具，但你应该知道如何有效地使用它。</p><p id="ac31" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">有许多隐藏的功能，如方便的<a class="ae ky" href="https://medium.com/android-dev-hacks/android-studio-tips-tricks-for-beginners-703bc9a36259" rel="noopener">快捷方式</a>、<a class="ae ky" href="https://medium.com/@sgkantamani/constraint-layout-with-live-templates-do-less-finish-more-b62397725835" rel="noopener">实时模板、文件模板</a>、预定义的项目结构、代码生成器插件、<a class="ae ky" href="https://medium.com/better-programming/customize-the-logcat-in-android-studio-8f58d39222ef" rel="noopener">定制</a>等等。我们还有一个<a class="ae ky" href="https://medium.com/better-programming/exploring-the-database-inspector-in-android-studio-de0026024895" rel="noopener">数据库检查器</a>、<a class="ae ky" href="https://medium.com/better-programming/explore-the-new-layout-inspector-in-android-studio-4-0-6f9ffb1505f2" rel="noopener">布局检查器</a>、剖析器等等，以便在运行时提高效率。</p><p id="f67b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">Android Studio还为几个库提供了工具支持，如查看应用程序导航图的导航编辑器和以奇特方式实现有效动画和过渡的运动编辑器。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="c6dc" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">8.不使用Jetpack库</h1><blockquote class="np nq nr"><p id="0abf" class="ly lz ns ma b mb mu ju md me mv jx mg nt mw mj mk nu mx mn mo nv my mr ms mt im bi translated">“Jetpack是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨Android版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。”— <a class="ae ky" href="https://developer.android.com/jetpack?hl=fr" rel="noopener ugc nofollow" target="_blank"> Android Jetpack </a></p></blockquote><p id="d6dc" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">JetPack库涵盖了主要功能，如用于分页的<a class="ae ky" href="https://medium.com/android-dev-hacks/exploring-paging3-part-1-653dc537a69a" rel="noopener"> paging3 </a>、用于本地数据库的<a class="ae ky" href="https://medium.com/better-programming/how-to-use-the-room-persistence-library-with-kotlin-flow-c73f461a0819" rel="noopener"> Room </a>、用于长期运行后台任务的<a class="ae ky" href="https://medium.com/swlh/workmanager-basics-how-to-use-workmanager-with-rxjava2-kotlin-coroutines-c2a317197038" rel="noopener"> WorkManager </a>、用于改进数据存储的<a class="ae ky" href="https://medium.com/better-programming/jetpack-datastore-improved-data-storage-system-adec129b6e48" rel="noopener"> DataStore </a>、用于DI的<a class="ae ky" href="https://medium.com/better-programming/hilt-a-new-dependency-injection-library-for-android-e6e00e719aeb" rel="noopener">handle</a>、用于在应用UI中导航的<a class="ae ky" href="https://medium.com/better-programming/jitpack-navigation-component-in-android-944165c35f54" rel="noopener">导航组件</a>、用于减少应用启动时间的<a class="ae ky" href="https://medium.com/better-programming/app-startup-new-architecture-component-d115b062a701" rel="noopener">应用启动</a>等等。</p><p id="39b0" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">所有这些库都是为了保持性能和易用性而构建的，以便用更少的代码实现复杂的任务。</p><p id="83d7" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读！</p></div></div>    
</body>
</html>