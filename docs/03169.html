<html>
<head>
<title>Create a WKWebView Programmatically in Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift 5中以编程方式创建WKWebView</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-wkwebview-programmatically-in-swift-5-fc08c8ad8708?source=collection_archive---------2-----------------------#2020-01-26">https://betterprogramming.pub/create-a-wkwebview-programmatically-in-swift-5-fc08c8ad8708?source=collection_archive---------2-----------------------#2020-01-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5dfc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用NSLayoutConstraint和自定义导航</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e4c33c4d60b19425f7d89c8b0e69bac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXakV4g_KwT6KPNb5m9YbQ.png"/></div></div></figure><p id="6e6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我将向您展示如何使用Swift 5在您的iOS应用程序中以编程方式实现一个<a class="ae lq" href="https://developer.apple.com/documentation/webkit/wkwebview" rel="noopener ugc nofollow" target="_blank"> WKWebView </a>。</p><p id="eefc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">GitHub 上的<a class="ae lq" href="https://github.com/zafarivaev/WKWebView-Demo" rel="noopener ugc nofollow" target="_blank">提供了最终实现的源代码。</a></p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="8216" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">我们开始吧</h1><p id="0e7c" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">首先，我们应该创建一个全新的Xcode项目，我们可以随意命名。让我们按照一些简单的步骤来设置项目:</p><ol class=""><li id="0245" class="mv mw it kw b kx ky la lb ld mx lh my ll mz lp na nb nc nd bi translated">连同<code class="fe ne nf ng nh b">SceneDelegate.swift</code>一起删除<code class="fe ne nf ng nh b">Main.storyboard</code>文件。</li><li id="d930" class="mv mw it kw b kx ni la nj ld nk lh nl ll nm lp na nb nc nd bi translated">删除<code class="fe ne nf ng nh b">AppDelegate.swift</code>中的<strong class="kw iu"/><strong class="kw iu"/>两种<code class="fe ne nf ng nh b">UISceneSession</code>生命周期方法:</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="9a71" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.在<code class="fe ne nf ng nh b">Info.plist</code>中，选择并删除<code class="fe ne nf ng nh b">Application Scene Manifest</code>、<code class="fe ne nf ng nh b">Main storyboard file base name</code>。结果将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/aa224bcea59943eafedb76c3173a6ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jh-s3vZEqoefboLWGlXlDA.png"/></div></div></figure><p id="2a9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们需要为<code class="fe ne nf ng nh b">AppDelegate.swift</code>文件中的<code class="fe ne nf ng nh b">window</code>设置<code class="fe ne nf ng nh b">rootViewController</code>。</p><p id="7fca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将把<code class="fe ne nf ng nh b">rootViewController</code>设置为一个<code class="fe ne nf ng nh b">ViewController</code>嵌入到一个<code class="fe ne nf ng nh b">UINavigationController</code>中，以便将来添加工具栏按钮项:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="ac44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们可以创建实际的<code class="fe ne nf ng nh b">WKWebView</code>:</p><h2 id="e3c7" class="nq lz it bd ma nr ns dn me nt nu dp mi ld nv nw mk lh nx ny mm ll nz oa mo ob bi translated">ViewController.swift</h2><p id="1f41" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">首先，导入<code class="fe ne nf ng nh b">WebKit</code>库并创建一个<code class="fe ne nf ng nh b">webView</code>属性。不要忘记将<code class="fe ne nf ng nh b">translatesAutoresizingMaskIntoConstraints</code>设置为<code class="fe ne nf ng nh b">false</code>，否则约束将不起作用:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="785a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，符合<code class="fe ne nf ng nh b">WKUIDelegate</code>协议:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="058c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，让我们通过实现<code class="fe ne nf ng nh b">setupUI()</code>方法并创建约束来将<code class="fe ne nf ng nh b">webView</code>定位在屏幕上:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="8173" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们终于可以展示我们的<code class="fe ne nf ng nh b">WKWebView</code>了！为了在<code class="fe ne nf ng nh b">webView</code>中显示实际的互联网资源，我们应该在<code class="fe ne nf ng nh b">viewDidLoad</code>方法中执行以下操作:</p><ol class=""><li id="89db" class="mv mw it kw b kx ky la lb ld mx lh my ll mz lp na nb nc nd bi translated">调用我们新创建的<code class="fe ne nf ng nh b">setupUI()</code>方法。</li><li id="da77" class="mv mw it kw b kx ni la nj ld nk lh nl ll nm lp na nb nc nd bi translated">创建一个<code class="fe ne nf ng nh b">URL</code>。</li><li id="4ad7" class="mv mw it kw b kx ni la nj ld nk lh nl ll nm lp na nb nc nd bi translated">配置一个<code class="fe ne nf ng nh b">URLRequest</code>。</li><li id="abdb" class="mv mw it kw b kx ni la nj ld nk lh nl ll nm lp na nb nc nd bi translated">在<code class="fe ne nf ng nh b">webView</code>上调用<code class="fe ne nf ng nh b">load(_ request: URLRequest)</code>方法。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="39ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，如果我们构建并运行该应用程序，我们将(在一段时间后)看到苹果网站的移动版本。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="1c06" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">配置导航</h1><p id="4ab6" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">让我们添加两个栏按钮项目，<code class="fe ne nf ng nh b">forwardBarItem</code>和<code class="fe ne nf ng nh b">backBarItem</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="2424" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为每个人创建操作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="bdf6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在相应地将它们设置为<code class="fe ne nf ng nh b">leftBarButtonItem</code>和<code class="fe ne nf ng nh b">rightBarButtonItem</code>。调用<code class="fe ne nf ng nh b">viewDidLoad</code>中的<code class="fe ne nf ng nh b">setupNavItem</code>方法和<code class="fe ne nf ng nh b">viewWillAppear</code>中的<code class="fe ne nf ng nh b">setupNavBar</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="4061" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们可以在页面之间来回导航了！</p><p id="219c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们在应用中实现了WKWebView:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/28e9ae97eff4710bc1f3134add8a01c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUfIMuyoCpQmkrSwcAmCNA.png"/></div></div></figure><p id="b101" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更多信息，请查看<a class="ae lq" href="https://developer.apple.com/documentation/webkit/wkwebview" rel="noopener ugc nofollow" target="_blank">苹果官方的WKWebView文档</a>。</p><p id="189a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>