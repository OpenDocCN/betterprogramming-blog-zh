<html>
<head>
<title>How to manage state in Flutter with Mobx</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Mobx管理Flutter中的状态</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-manage-state-in-flutter-with-mobx-cf5be8e8e50e?source=collection_archive---------3-----------------------#2021-11-23">https://betterprogramming.pub/how-to-manage-state-in-flutter-with-mobx-cf5be8e8e50e?source=collection_archive---------3-----------------------#2021-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0900" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个关于Flutter最受欢迎的州经理的三集系列</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8c19d7f2ab4778bc57cdc10293e13f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kXCjabftcquoxkIF"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="2efc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个由三部分组成的系列中，我将对Flutter使用最广泛的状态管理器进行并排比较。有很多工具，但是它们之间缺乏清晰的对比。这是一个遗憾，因为选择错误的状态管理器并不容易从你开始构建的地方撤销。</p><p id="8d67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我给你一个简短的指导手册。首次使用前请仔细阅读！在本系列的前两部分——下面的链接——我讨论了国家管理的两大支柱:<em class="ls">供应商</em>和<em class="ls"> Flutter集团。</em> <a class="ae kv" href="https://pub.dev/packages/mobx" rel="noopener ugc nofollow" target="_blank"> Mobx </a>可以看做大卫试图击败歌利亚。Mobx的尺寸要小得多，但借助强大的工具，它是其他同类产品的有力竞争者。Mobx到底是怎么回事？你应该在你的项目中实现它吗？</p><h1 id="1099" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">Mobx是什么？</h1><p id="74c4" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Mobx的基础由三个核心概念构成:</p><ul class=""><li id="2e46" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated"><em class="ls">可观测量</em>:状态在可观测量内存储和变异。</li><li id="ab19" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><em class="ls">动作</em>:动作导致可观察状态改变。</li><li id="9fb7" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><em class="ls">反应</em>:当相关的可观察状态发生变化时，反应被触发。这个触发器是你的应用中想要的副作用的开始，例如用户界面的改变。</li></ul><p id="78ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">整个流程敏锐地显示在下面的三角形中，与百慕大三角不同，它非常简单，你不会迷失在其中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/a4200b0beac8ae574190244619e3b42a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t35rHutdTskpsHqUdSC7cg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图像格式<a class="ae kv" href="https://pub.dev/packages/mobx" rel="noopener ugc nofollow" target="_blank"> Mobx文档</a></p></figure><h1 id="9358" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">臭名昭著的柜台</h1><p id="9fe7" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">那么实际上看起来如何呢？Mobx中臭名昭著的递增计数器如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4caf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的要点中，可观察对象和动作可以被它们的装饰者清楚地识别——以“@”为前缀。这些装饰者不仅仅是为了展示。它们作为一个名为“<a class="ae kv" href="https://github.com/mobxjs/mobx.dart/tree/master/mobx_codegen" rel="noopener ugc nofollow" target="_blank"> Mobx_codegen </a>”的包读取的指令，随后在一个相关文件<code class="fe nh ni nj nk b">counter.g.dart</code>中为您生成完整的功能代码。所以装饰者允许你的代码保持简单易读，而繁重的工作在后台为你完成</p><p id="e9ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对状态变化的反应有三种不同的方式，如下例所示。</p><ol class=""><li id="fb91" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr nl mw mx my bi translated">该反应内部的函数在初始化时自动运行。之后，它会在它所跟踪的可观察对象的每一次状态变化后运行。因此，在我们的例子中，计数器的初始值<code class="fe nh ni nj nk b">0</code>将与任何后续的增量一起打印出来。</li><li id="339e" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr nl mw mx my bi translated"><code class="fe nh ni nj nk b">Regular reaction</code>:这种类型的反应以两个函数作为自变量。第一个函数返回一个从要跟踪的可观察值导出的值。第二个函数是每当第一个值的返回值改变时需要运行的效果。所以在这个例子中，每当<code class="fe nh ni nj nk b">counter.value</code>改变时，就会打印出<code class="fe nh ni nj nk b">counterValue</code>。</li><li id="4069" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr nl mw mx my bi translated"><code class="fe nh ni nj nk b">Conditional reaction:</code>这个反应，顾名思义，只在满足一个条件时运行。条件在函数的第一个参数中提供，反应在第二个参数中提供。此外，该反应仅运行一次，并在之后自动处理。因此，当我们的计数器值达到“6”时，将打印一条一次性消息。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="f662" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了上述三种类型的反应，Mobx还提供了一个<code class="fe nh ni nj nk b">Observer</code>小部件。这个小部件跟踪一个可观察对象，并在它的值发生变化时重建UI:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="039f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用观察者小部件作为蛋糕上的糖衣，Mobx烤出了极好的反应糕点。用简单的技术对状态变化做出反应，而不牺牲灵活性。</p><h2 id="5c1d" class="nm lu iq bd lv nn no dn lz np nq dp md lf nr ns mf lj nt nu mh ln nv nw mj nx bi translated">该不该用Mobx？</h2><p id="939b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">事不宜迟，你应该在你的flutter项目中使用Mobx吗？</p><h2 id="6f8b" class="nm lu iq bd lv nn no dn lz np nq dp md lf nr ns mf lj nt nu mh ln nv nw mj nx bi translated"><strong class="ak">优点</strong></h2><ul class=""><li id="d91e" class="mq mr iq ky b kz ml lc mm lf ny lj nz ln oa lr mv mw mx my bi translated">Mobx擅长于<em class="ls">简单。</em>包易学易掌握。装饰者将样板文件最小化，对状态的反应在简洁的函数和小部件中完成。</li><li id="c653" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">该软件包被广泛使用。起源于Javascript状态管理器，后来加入了Flutter，文档和最佳实践已经就绪。</li></ul><h2 id="b974" class="nm lu iq bd lv nn no dn lz np nq dp md lf nr ns mf lj nt nu mh ln nv nw mj nx bi translated"><strong class="ak">缺点</strong></h2><ul class=""><li id="48ce" class="mq mr iq ky b kz ml lc mm lf ny lj nz ln oa lr mv mw mx my bi translated">Mobx缺乏基于事件的状态管理。这意味着您只知道状态变化，但不知道导致状态变化的确切事件。在更复杂的应用程序中，这种可追溯性的缺乏可能会造成问题，因为它使调试和管理状态变化变得更加模糊。</li><li id="83ab" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">Mobx生成器极大地提高了简单性，但同时也增加了另一个抽象层次。它们让人们更难真正看到和理解发生在引擎盖下的事情。</li></ul><p id="6e2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总之，我认为Mobx是所有不需要基于事件的状态管理的应用程序的明智选择。它独特的卖点是简单，Mobx在你的开发团队中的应用会非常顺利。正因如此，在我看来，Mobx优于其直接竞争对手<a class="ae kv" href="https://pub.dev/packages/provider" rel="noopener ugc nofollow" target="_blank">提供商</a>。对于基于事件的状态管理，<a class="ae kv" href="https://pub.dev/packages/flutter_bloc" rel="noopener ugc nofollow" target="_blank"> Flutter Bloc </a>仍然是一条路要走。</p><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-manage-state-in-flutter-with-provider-661ff322dd22"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">如何用提供者管理Flutter中的状态</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">关于Flutter最受欢迎的州经理的三集系列</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">better编程. pub</p></div></div><div class="on l"><div class="oo l op oq or on os kp oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/should-you-use-bloc-to-manage-state-in-flutter-4f504ebc8711"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">在Flutter中应该使用阻塞来管理状态吗？</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">关于Flutter最受欢迎的州经理的三集系列</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">better编程. pub</p></div></div><div class="on l"><div class="ot l op oq or on os kp oe"/></div></div></a></div><h1 id="727a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">参考</h1><ul class=""><li id="d9fe" class="mq mr iq ky b kz ml lc mm lf ny lj nz ln oa lr mv mw mx my bi translated">https://pub.dev/packages/mobx<a class="ae kv" href="https://pub.dev/packages/mobx" rel="noopener ugc nofollow" target="_blank">mobx</a></li><li id="a897" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">Mobx_codegen包:<a class="ae kv" href="https://github.com/mobxjs/mobx.dart/tree/master/mobx_codegen" rel="noopener ugc nofollow" target="_blank">https://github . com/mobxjs/mobx . dart/tree/master/mobx _ codegen</a></li><li id="0544" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">提供商包:<a class="ae kv" href="https://pub.dev/packages/provider" rel="noopener ugc nofollow" target="_blank">https://pub.dev/packages/provider</a></li><li id="72ed" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">颤振阻断包:<a class="ae kv" href="https://pub.dev/packages/flutter_bloc" rel="noopener ugc nofollow" target="_blank">https://pub.dev/packages/flutter_bloc</a></li></ul></div></div>    
</body>
</html>