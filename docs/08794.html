<html>
<head>
<title>How To ‘DevOps’ as a Software Developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为软件开发人员如何“开发”</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-devops-as-a-software-developer-8b396b9c6268?source=collection_archive---------10-----------------------#2021-06-11">https://betterprogramming.pub/how-to-devops-as-a-software-developer-8b396b9c6268?source=collection_archive---------10-----------------------#2021-06-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7636" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">安全性、负载平衡器、网络、内存分配、连接管理等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/62c70e7afd72ed1833e689f74da7741a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pXYqPKYTrWH_GQOK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Joshua Woroniecki 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1832" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">术语<em class="lv"> DevOps </em>已经席卷了IT行业。从建立<a class="ae ky" href="https://en.wikipedia.org/wiki/CI/CD" rel="noopener ugc nofollow" target="_blank"> CICD </a>管道到管理您的云和Kubernetes基础设施，DevOps的工程师一直站在完成这些任务的最前沿。但是DevOps到底是什么？</p><p id="68e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阐明DevOps是什么是我们理解软件和系统的核心。因此，让我们从强调这两个基本术语的含义开始:</p><ul class=""><li id="b1ab" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">软件——我们编写、构建和部署的代码</li><li id="7ac0" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">系统——有助于我们代码运行的一切，如基础设施、安全性、网络等。</li></ul><p id="b8ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的三年里，在我完全不知道的情况下，我从被称为<em class="lv">软件开发人员</em>变成了被业界称为<em class="lv"> DevOps工程师</em>、<em class="lv">云工程师</em>或<em class="lv">系统工程师</em>。但是当我回头看的时候，我从来没有真正做过任何软件工程师可以做的事情，我认为，应该做的事情。我只是简单地承担了一些任务，这些任务不仅有趣，而且对我自己的代码和软件的运行也是必不可少的。在这个过程中，我发现对我的代码和它运行的平台有了新的理解。这最终改进了组织的软件交付。</p><p id="1050" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是DevOps。</p><p id="0092" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不是一个新的角色或新的技能；它只需要工程师——在过道的两边，软件和系统——从整体上用系统的意识和复杂性来装备自己，而不是各自为政。</p><p id="e783" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是AWS对DevOps的定义的一个很好的摘录，与我的观点非常吻合。</p><blockquote class="mk ml mm"><p id="8b45" class="kz la lv lb b lc ld ju le lf lg jx lh mn lj lk ll mo ln lo lp mp lr ls lt lu im bi translated">“DevOps是文化理念、实践和工具的组合，它提高了组织高速交付应用程序和服务的能力:以比使用传统软件开发和基础架构管理流程的组织更快的速度发展和改进产品。”</p></blockquote><p id="297e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这本质上意味着工程师应该打破常规，从整体上理解软件和系统。这缓解了许多工程问题。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="cfed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，没有进一步的事情要做，这里有一些软件开发人员绝对应该知道的系统工程的核心概念。最终，他们会帮助你写出更好的代码。</p><h1 id="555c" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">1.了解你的操作系统</h1><p id="b503" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">你的软件或代码只有在与底层系统和谐工作时才是有效的。</p><p id="49be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建软件的非生产环境可能与生产机器的设置有很大不同。您的代码需要事先考虑这些。尽管Docker缓解了一些问题，但了解以下内容仍然至关重要:</p><h2 id="c89a" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">1.1磁盘I/O</h2><p id="9986" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">如果您的软件读写文件系统，请注意<a class="ae ky" href="https://en.wikipedia.org/wiki/File_system" rel="noopener ugc nofollow" target="_blank"> fs类型</a>及其底层磁盘I/O限制。例如，如果您的磁盘是NFS装载的，I/O操作将会相对较慢。</p><p id="c5f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个安全的规则，总是考虑I/O操作的批处理请求。</p><h2 id="693d" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">1.2内存分配</h2><p id="b03c" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">应用程序将使用多少操作系统的物理内存？根据您可用的用例和硬件资源，确定您是需要将它作为独立应用程序还是微服务来运行。</p><p id="9b6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将决定您可以在代码中同时执行多少操作。你的<code class="fe og oh oi oj b">thread count</code><em class="lv"/><code class="fe og oh oi oj b">I/O buffer size,</code><em class="lv"/><code class="fe og oh oi oj b">in-memory caching</code>都是靠这个。</p><h2 id="c505" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">1.3处理外部连接</h2><p id="c7d9" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">大多数现代应用程序通过公开HTTP APIs来工作。处理这个问题的web服务器需要对重要的参数进行限制，比如<code class="fe og oh oi oj b">incoming_payload_size</code>、<code class="fe og oh oi oj b">max_conncurrent_connections</code>和<code class="fe og oh oi oj b">connection-timeout</code>值。</p><p id="d0b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在更低的层次上，操作系统内核跟踪连接状态和逻辑流。例如，在Linux上，连接跟踪是由<code class="fe og oh oi oj b">conntrack</code>完成的，它定义了连接限制。在RHEL，你可以这样检查:</p><pre class="kj kk kl km gt ok oj ol om aw on bi"><span id="b944" class="nu my it oj b gy oo op l oq or">$  sysctl net.netfilter.nf_conntrack_count net.netfilter.nf_conntrack_maxnet.netfilter.nf_conntrack_count = 167012<br/>net.netfilter.nf_conntrack_max = 262144</span></pre><h2 id="a292" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">1.4操作系统信号</h2><p id="67d1" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">操作系统向正在运行的进程发出各种<a class="ae ky" href="https://en.wikipedia.org/wiki/Signal_(IPC)" rel="noopener ugc nofollow" target="_blank">类型的信号</a>，以维持整个系统的稳定性。</p><p id="734e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最重要的是<code class="fe og oh oi oj b">SIGNINT</code>、<code class="fe og oh oi oj b">SIGKILL</code>和<code class="fe og oh oi oj b">SIGHUP</code>，它们在出现任何故障时发出终止进程的信号。这些信号让您的代码有机会优雅地关闭并处理任何关键的正在进行的事务。</p><p id="19e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">未能处理这些信号通常是诸如陈旧文件句柄、幽灵进程、内存泄漏和数据损坏等问题的根本原因。</p><h1 id="3cd1" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">2.了解网络和安全的基础知识</h1><p id="4dc4" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">在将应用程序部署到集成环境中时，有多个因素将决定应用程序的连接性。</p><h2 id="1d23" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">2.1网络政策</h2><p id="bc68" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">理解IP子网、路由策略、防火墙和DNS规则等关键概念。这些决定了与应用程序之间的外部连接。</p><h2 id="2908" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">2.2 SSL证书</h2><p id="872c" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">您的应用程序可能需要在计算机上安装客户端证书来连接和信任远程HTTPS终结点。或者，如果您是服务器，您可能需要由您组织的根CA签名的服务器证书。</p><p id="b3bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些通常由您组织中的安全团队强制实施。意识到这些并预先评估你的软件可能需要什么。</p><p id="b6ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的应用程序运行在Docker上，那么这些证书必须被加载到您的容器中。</p><h1 id="da4f" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">3.构建和部署(CICD)</h1><p id="d810" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">软件的构建过程和部署涉及重复的任务，这些任务可以使用现代工具自动化，如<a class="ae ky" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank">詹金斯</a>和<a class="ae ky" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank">特拉维斯CI </a>。这些是开源的CICD(持续部署和持续集成)工具，它们通过创建管道来协调您的构建和部署事件。</p><p id="b267" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目标是能够检入您的代码更改，并让系统自动触发构建、运行测试，并无缝地部署到集成环境中。这大大降低了上市时间成本，并提高了组织的整体生产力。</p><h1 id="ed39" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">4.了解您的基础架构(或云)</h1><p id="7e82" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">你的代码在哪里运行？</p><p id="3a72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">了解应用运行的基础架构环境。这可以极大地改进你的软件代码和设计。</p><h2 id="987a" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">4.1数据中心/区域/VPC</h2><p id="042d" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">为了实现高可用性，现代应用程序部署通常分布在多个地理位置或地区。这意味着您需要设计软件来支持这样的体系结构，以便在数据中心之间以主动-主动方式运行。</p><h2 id="63d6" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">4.2无服务器架构</h2><p id="b5c3" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">无服务器架构允许您的应用程序代码作为功能在云中运行，而无需为其提供服务器和虚拟机。例如，你的用例可能更适合在AWS上运行Lamda函数(或者在GCP上运行云函数)，而不是一个新的微服务。</p><h2 id="d7f4" class="nu my it bd mz nv nw dn nd nx ny dp nh li nz oa nj lm ob oc nl lq od oe nn of bi translated">4.3负载平衡器</h2><p id="3514" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">LBs(负载平衡器)在决定外部流量如何路由到您的应用程序方面起着关键作用。它们通常位于所有API的前面，以便在应用程序实例之间分配负载。</p><p id="2196" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是为了有效地执行负载平衡，它们需要由您的应用程序公开一个健康检查端点(例如，<code class="fe og oh oi oj b">https://my-app-1:5601/health</code>)。这是为了评估实例是死的还是活的。请务必为您的应用程序提供快速有效的健康检查逻辑。</p><p id="6d99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两种最常见的负载平衡算法是:</p><ul class=""><li id="24e1" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">循环调度—通过将请求分散到所有工作负载来工作</li><li id="4607" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">最少连接数—通过将请求转发到具有较少打开连接的实例来工作。这样，如果您的应用程序实例负载过重，就不太可能收到新的请求。</li></ul></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="865b" class="mx my it bd mz na os nc nd ne ot ng nh jz ou ka nj kc ov kd nl kf ow kg nn no bi translated">DevOps让你成为更好的开发者</h1><p id="138f" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">如果有一件事我想让你从这一切中吸取教训，那就是DevOps不是一个新角色。这是你拓宽视野的一种方式，可以打破行业经常给我们设置的严格角色和责任的框框。</p><p id="72cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DevOps允许您超越代码，考虑生命周期中面临的操作挑战。这不仅提高了整体生产力，还改善了软件设计和代码质量，减少了故障。</p><p id="0fb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终结果是一个高度可用的容错软件。</p></div></div>    
</body>
</html>