<html>
<head>
<title>Create a Custom List in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中创建自定义列表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-custom-list-in-swiftui-f7fda59a9e0a?source=collection_archive---------5-----------------------#2020-10-07">https://betterprogramming.pub/create-a-custom-list-in-swiftui-f7fda59a9e0a?source=collection_archive---------5-----------------------#2020-10-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3d0a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">带有定制侧按钮的SwiftUI列表</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8e40152f80e785df604c27c47cc6f4ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*xYuPs8FOX02Xc85GAFCi9g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SwiftUI中的自定义列表(GIF由作者提供)</p></figure><p id="43b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本教程中，我们将创建一个带有两个操作按钮的自定义列表，当您向左滑动一行时，会出现这两个按钮。我们将从一侧按钮开始。这将是一个删除按钮。然后我们可以添加第二个按钮来展示如何向该行添加更多的按钮。</p><p id="b2f9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">开始一个新的iOS 14项目，然后跟着做。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a6b6" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">常量和变量</h1><p id="dee3" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">创建一个类型为<code class="fe my mz na nb b">View</code>的新结构，并声明以下变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><ul class=""><li id="e359" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt nj nk nl nm bi translated"><code class="fe my mz na nb b">Text</code>:存储我们行的内容。</li><li id="8488" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">index</code>:行的索引。用于删除/隐藏一行。</li><li id="539d" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">width</code>:所有侧边按钮的宽度。以前知道向左滑动多少。</li><li id="b2b9" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">indices</code>:存储删除/隐藏行索引的绑定数组变量。</li><li id="232d" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">offset</code>:当滑动动作发生时，用于向左移动一行的浮动变量。</li><li id="45c1" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">scale</code>:用于动画显示侧边按钮出现时的比例。</li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="b44d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">行内容</h1><p id="07a4" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在body变量中，使用<code class="fe my mz na nb b">GeometryReader</code>获取我们的行的宽度和高度。在一个<code class="fe my mz na nb b">VStack</code>中，插入你所在行的所有内容。在本教程中，我们有一个<code class="fe my mz na nb b">Text</code>视图，它接受我们的文本变量和将作为删除按钮的侧边按钮。</p><p id="753d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用SF符号名为“trash”的图像作为“删除”按钮。使用<code class="fe my mz na nb b">onTapGesture</code>而不是将图像放入<code class="fe my mz na nb b">Button()</code>中。在<code class="fe my mz na nb b">onTapGesture</code>内部，将删除/隐藏行的索引追加到<code class="fe my mz na nb b">indices</code>数组中。</p><p id="c37d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用<code class="fe my mz na nb b">HStack</code>上的背景修改器添加颜色。如果没有背景色，您将只能在<code class="fe my mz na nb b">Text</code>视图顶部开始滑动时滑动该行。我们希望能够从一行中的任何位置开始刷卡:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="2a4b" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">滑动动画</h1><p id="fd7a" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">将以下修改器添加到背景修改器下的<code class="fe my mz na nb b">HStack</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><ul class=""><li id="a359" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt nj nk nl nm bi translated"><code class="fe my mz na nb b">offset</code>:用于将行向左偏移，回到正确位置。偏移量的宽度值在零和减号中侧按钮的宽度之间交替。</li><li id="cd9d" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">animation</code>:动画显示行的移动和垃圾桶按钮的比例。</li><li id="bbb8" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated"><code class="fe my mz na nb b">gesture</code>:使用<code class="fe my mz na nb b">DragGesture()</code>通过检查手势的开始和结束平移宽度值来检测向左滑动。当检测到滑动时，我们可以偏移行并改变垃圾桶按钮的比例。</li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="ae65" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">内容视图</h1><p id="4956" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在我们的<code class="fe my mz na nb b">ContentView</code>中，我们将使用一个<code class="fe my mz na nb b">ScrollView</code>和一个<code class="fe my mz na nb b">LazyVStack</code>来代替列表。这是因为我们不想要我们的行之间的分隔线。</p><p id="e766" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建一个保存文本内容的数组，然后使用<code class="fe my mz na nb b">ForEach</code>遍历它。在使用<code class="fe my mz na nb b">RowContent</code>并向其传递<code class="fe my mz na nb b">text</code>、<code class="fe my mz na nb b">index</code>和<code class="fe my mz na nb b">indices</code>变量之前，我们需要检查<code class="fe my mz na nb b">index</code>是否在<code class="fe my mz na nb b">indices</code>数组中，该数组保存了我们删除/隐藏的行的索引。给我们的<code class="fe my mz na nb b">RowContent</code>一个帧修改器来调整每行的高度:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/9febc52751d500e79c2a44b6cb9af351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/1*4GqqrjIhQWO7_rpsvoImOw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自定义列表—删除行</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="8356" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">添加按钮</h1><p id="0bf0" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">为了展示如何在我们的行中添加更多的按钮，我们将添加一个带有重叠图像的图像。首先，删除宽度常量，并为每个按钮的宽度使用一个常量值，如60。将<code class="fe my mz na nb b">DragGesture()</code>内的偏移值调整为所有按钮的宽度总和。在这里，它将是120。</p><p id="bfba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我添加了一个<code class="fe my mz na nb b">offsetY</code>变量，它将被用来激活我们的新按钮。该按钮将由两个重叠的图像组成。当滑动发生时，第二个图像将在其y轴上偏移。给重叠图像添加一个偏移修改器，然后改变<code class="fe my mz na nb b">DragGesture</code>中的<code class="fe my mz na nb b">offsetY</code>值。该值将在-20和零之间变化。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/4102cb5f10e47c6b4ed2d4c74dafa7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/1*OoQbLMvmK_CA7Atu5_FX2w.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SwiftUI中的自定义列表</p></figure><p id="7a54" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">全部完成！感谢阅读。</p></div></div>    
</body>
</html>