<html>
<head>
<title>Swift UIButton Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift UIButton动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/swift-uibutton-animations-6ce016212c6e?source=collection_archive---------3-----------------------#2019-06-10">https://betterprogramming.pub/swift-uibutton-animations-6ce016212c6e?source=collection_archive---------3-----------------------#2019-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5d57" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习在Swift项目中为任何UIButton构建动画</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a95481eb85142f552b7c3407cbd21e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PSU_8cZGSxcKJjlpsJpS9A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@bhaguz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">巴格斯·赫纳万</a>在<a class="ae kv" href="https://unsplash.com/search/photos/iphone?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="c5a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的Swift应用程序中的动画可以真正赋予它生命。它可以将应用程序带到另一个层次，并允许用户享受他们的体验。我们将学习如何应用两个不同的动画，我们可以添加到我们的UIButtons。让我们马上开始制作动画吧！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/16214703cab577c13749d602c403b430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*czUlAgPxfD8HnIxCSr-8yA.png"/></div></div></figure><ol class=""><li id="4525" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">将两个UIButtons拖到项目的情节提要上。</li><li id="324b" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><code class="fe mh mi mj mk b">Control-Drag</code>将每个按钮放到ViewController文件中以创建IBActions。</li><li id="52cc" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">调用第一个函数<code class="fe mh mi mj mk b">pulseButtonPressed()</code>和第二个函数<code class="fe mh mi mj mk b">flashButtonPressed()</code>。不要忘记使UIButton成为发送者。</li><li id="b044" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">创建一个名为<code class="fe mh mi mj mk b">UIButtonExtensions</code>的新Swift文件，并在文件顶部导入UIKit。</li><li id="04b0" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">对UIButton进行扩展。(这是我们所有魔法的归宿。)</li><li id="6a2d" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">在扩展中创建一个函数，并将其命名为<code class="fe mh mi mj mk b">pulsate()</code>。创建第二个名为flash()的函数，并输入以下代码。</li></ol><pre class="kg kh ki kj gt ml mk mm mn aw mo bi"><span id="0e80" class="mp mq iq mk b gy mr ms l mt mu">func pulsate() {</span><span id="a7d1" class="mp mq iq mk b gy mv ms l mt mu">let pulse = CASpringAnimation(keyPath: "transform.scale")</span><span id="735d" class="mp mq iq mk b gy mv ms l mt mu">pulse.duration = 0.4</span><span id="25dd" class="mp mq iq mk b gy mv ms l mt mu">pulse.fromValue = 0.98</span><span id="aee7" class="mp mq iq mk b gy mv ms l mt mu">pulse.toValue = 1.0</span><span id="a10b" class="mp mq iq mk b gy mv ms l mt mu">pulse.autoreverses = true</span><span id="7f39" class="mp mq iq mk b gy mv ms l mt mu">pulse.repeatCount = .infinity</span><span id="34fc" class="mp mq iq mk b gy mv ms l mt mu">pulse.initialVelocity = 0.5</span><span id="dad2" class="mp mq iq mk b gy mv ms l mt mu">pulse.damping = 1.0</span><span id="707e" class="mp mq iq mk b gy mv ms l mt mu">layer.add(pulse, forKey: nil)</span><span id="4c1b" class="mp mq iq mk b gy mv ms l mt mu">}</span><span id="935d" class="mp mq iq mk b gy mv ms l mt mu">func flash() {</span><span id="34ab" class="mp mq iq mk b gy mv ms l mt mu">let flash = CABasicAnimation(keyPath: "opacity")</span><span id="6310" class="mp mq iq mk b gy mv ms l mt mu">flash.duration = 0.3</span><span id="4870" class="mp mq iq mk b gy mv ms l mt mu">flash.fromValue = 1</span><span id="d11a" class="mp mq iq mk b gy mv ms l mt mu">flash.toValue = 0.1</span><span id="9858" class="mp mq iq mk b gy mv ms l mt mu">flash.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeInEaseOut)</span><span id="9b7a" class="mp mq iq mk b gy mv ms l mt mu">flash.autoreverses = true</span><span id="21cd" class="mp mq iq mk b gy mv ms l mt mu">flash.repeatCount = 2</span><span id="4701" class="mp mq iq mk b gy mv ms l mt mu">layer.add(flash, forKey: nil)</span><span id="8909" class="mp mq iq mk b gy mv ms l mt mu">}</span></pre><p id="446a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">先说上面的代码。</p><p id="4f73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们做的第一件事是创建我们的<code class="fe mh mi mj mk b">CASpring</code>和<code class="fe mh mi mj mk b">CABasicAnimation</code>。我们希望脉冲动画更有弹性，所以我们想使用<code class="fe mh mi mj mk b">CASpringAnimation</code>。</p><ul class=""><li id="1f07" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr mw lz ma mb bi translated"><code class="fe mh mi mj mk b">keyPath</code>变换比例将帮助我们改变按钮的大小。</li><li id="d824" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mw lz ma mb bi translated">持续时间是动画将持续的时间。</li><li id="c6ec" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mw lz ma mb bi translated">“从”和“到”值是按钮从动画开始到结束的大小。</li><li id="236b" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mw lz ma mb bi translated">Autoreverses将使动画在完成后反转，我们将此设置为<code class="fe mh mi mj mk b">true</code>。</li><li id="1f46" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mw lz ma mb bi translated">您分配给<code class="fe mh mi mj mk b">repeatCount</code>的值将是您希望它重复的次数。如果你想让它一直持续下去，你也可以把它分配给<code class="fe mh mi mj mk b">.infinity</code>。</li><li id="e6ab" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mw lz ma mb bi translated"><code class="fe mh mi mj mk b">InitialVelocity</code>和<code class="fe mh mi mj mk b">damping</code>与<code class="fe mh mi mj mk b">CASpringAnimation</code>有关，这决定了你将对你的动画产生多大的弹性效果。</li><li id="f8d1" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mw lz ma mb bi translated">最后，我们将在函数的最后一行添加动画到UIButtons层。</li></ul><p id="da74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们继续把我们的新动画叫做“函数”。</p><p id="8fba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">8.在我们各自的IBAction函数中调用<code class="fe mh mi mj mk b">sender.pulsate()</code>和<code class="fe mh mi mj mk b">sender.flash()</code>。</p><pre class="kg kh ki kj gt ml mk mm mn aw mo bi"><span id="be6a" class="mp mq iq mk b gy mr ms l mt mu">@IBAction func pulseButtonPressed(_ sender: UIButton) {</span><span id="6a90" class="mp mq iq mk b gy mv ms l mt mu">sender.pulsate()</span><span id="388f" class="mp mq iq mk b gy mv ms l mt mu">}</span><span id="47bd" class="mp mq iq mk b gy mv ms l mt mu">@IBAction func flashButtonPressed(_ sender: UIButton) {</span><span id="eecd" class="mp mq iq mk b gy mv ms l mt mu">sender.flash()</span><span id="64df" class="mp mq iq mk b gy mv ms l mt mu">}</span></pre><p id="149f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您继续运行您的应用程序，当您按下ui按钮时，您应该能够看到每个动画。现在，您可以调整值来制作所需的动画。</p><p id="6c26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你也可以调用<code class="fe mh mi mj mk b">viewDidLoad()</code>中的动画，如果你想让它们不需要点击任何按钮就可以启动。享受创造你的动画！</p></div></div>    
</body>
</html>