<html>
<head>
<title>Keep a Remote Process Alive, Even After You Reboot SSH Using Screen</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">保持远程进程活动，即使在使用Screen重启SSH之后</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/keep-a-remote-process-alive-even-after-you-reboot-ssh-using-screen-620c3daee601?source=collection_archive---------17-----------------------#2020-04-02">https://betterprogramming.pub/keep-a-remote-process-alive-even-after-you-reboot-ssh-using-screen-620c3daee601?source=collection_archive---------17-----------------------#2020-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6a9d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">重新启动客户端计算机，并且仍然可以访问正在运行的进程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ef07156c04973e24ff4e8643dc13f689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pMA9L0VtLiG2fyaZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@_imkiran?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sai Kiran Anagani </a>拍摄的照片。</p></figure><p id="8c35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很有可能你现在正在家里工作。这意味着你的家用机器可能不够强大，无法完成某些任务。为了解决这个问题，你将不得不连接到你的办公机器，但是即使你在你的机器上开发你的项目，在2020年你将不可避免地需要使用云。无论是数据收集、模型训练还是部署，您都需要它。</p><p id="cdbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能会使用云的原因之一是，您想要运行的流程很长。有时，这个过程甚至会持续几天。你并不总是希望你的机器连续运行这么长时间。</p><p id="a338" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<a class="ae ky" href="https://github.com/tmux/tmux/wiki" rel="noopener ugc nofollow" target="_blank"> tmux </a>可以在关闭SSH连接后保持您的终端进程运行。这有时甚至比其他选择更好。</p><p id="6066" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是假设您想在重启客户端后让进程在远程计算机中保持活动，那么最好使用<a class="ae ky" href="https://www.gnu.org/software/screen/" rel="noopener ugc nofollow" target="_blank">屏幕</a>。</p><p id="d2b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将通过描述我所做的来解决我的问题，为整个过程提供一个教程。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="febf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">问题是</h1><p id="60d7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我正在创建一个数据集，这个过程的一部分需要将近33个小时来运行。我不想也不能用我的电脑来完成这项任务。但是我有一台远程电脑。如果我通过一个简单的SSH连接运行这个脚本，这个进程将会被SSH连接终止。</p><p id="ab4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我在想办法解决，结果用了Screen。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a285" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">解决方案</h1><p id="b780" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，您需要通过SSH连接到远程计算机:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7598" class="ne md it na b gy nf ng l nh ni">ssh user@remote.adresss</span></pre><p id="152e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后你必须安装屏幕:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="cf94" class="ne md it na b gy nf ng l nh ni">sudo apt install screen</span></pre><p id="ac89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过键入以下命令来启动会话:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="0eeb" class="ne md it na b gy nf ng l nh ni">screen -S session_name</span></pre><p id="ab15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以执行任何您想要的脚本，并启动您想要运行的进程。当一切运行时，您可以通过按CTRL + A + D来分离会话。</p><p id="1aab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个过程仍然在运行，你可以自由地退出SSH，做任何你想做的事情。</p><p id="c407" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以随时回来重新联系。当您重新连接时，您可以通过键入以下命令列出所有正在运行的会话并找到您想要重新连接的会话:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="959d" class="ne md it na b gy nf ng l nh ni">screen -ls</span></pre><p id="c2d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后重新连接到所需的会话:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b4ff" class="ne md it na b gy nf ng l nh ni">screen -r session_name</span></pre><p id="054b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您不再需要会话时，您可以键入:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e004" class="ne md it na b gy nf ng l nh ni">screen -XS session_name quit</span></pre><p id="6a14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">杀了它。</p><p id="cb7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我能够在33小时内访问运行过程的方式，而不用一直打开我的笔记本电脑。</p></div></div>    
</body>
</html>