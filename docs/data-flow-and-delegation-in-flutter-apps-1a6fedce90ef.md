# 了解 Flutter 应用程序中的数据流和事件委托

> 原文：<https://betterprogramming.pub/data-flow-and-delegation-in-flutter-apps-1a6fedce90ef>

## 让你的 Flutter 应用更加灵活的常用技巧

![](img/15b5db7a1032d02748a8ca87aff8c5f5.png)

肖恩·马丁在 [Unsplash](https://unsplash.com/photos/bMhTQ4jdJtg) 上拍摄的照片

当开发 Flutter 应用程序时，确保小部件尽可能可重用是很重要的。这意味着保持你的小部件精简，没有任何逻辑。在这篇文章中，我将介绍一些常用的技术，你可以用它们来使你的 Flutter 应用程序更加灵活，耦合度更低。

# 数据流

Flutter 应用程序中的一个常见场景是从网络下载数据，然后在屏幕上显示。一种方法是在小部件中执行网络请求，然后下载数据。这在下面实现:

上述方法的问题是我们有一个与来自阵列的数据紧密耦合的`CustomerList`。这意味着`CustomerList`不能从父节点获取数据并显示出来。它只能在`CustomerList`小部件中声明的数组上工作，不能用于其他场景。

处理这种情况的一个更好的方法是将数据从父窗口传递给`CustomerList`小部件，然后显示它。下面的代码说明了这一点:

代码看起来与我们之前的版本相似——有一个非常大的不同。这次我们将数据传递给`CustomerList`小部件。`CustomerList`小部件只是用来显示数据，仅此而已。

这意味着`CustomerList`不负责获取数据。它只负责展示它。`CustomerList`可以很容易地在其他页面中使用，这些页面可以将一组不同的客户数据传递给小部件。

当开发 Flutter 应用程序时，确保数据从父代传递到子代。

# 委托

小部件不仅用于显示数据，还可以引发事件。当事件在子部件中引起时，最好将事件委托给父部件，以便父部件可以采取行动。看看下面的代码，其中`CustomerList`小部件对`ListTile` `onTap`事件采取行动。

上述方法的问题是`CustomerList`小部件现在与`_navigateToCustomerDetailsScreen`动作紧密集成。更好的办法是让家长决定当小工具被点击时做什么。实现如下所示:

这是一个更好的方法，因为事件现在被委托给父节点，现在父节点可以决定做什么。这也使我们的`CustomerList`更加灵活，因为现在它可以适应不同父母的需求。

# 结构和命名

应用程序的结构取决于你或你的公司遵循的指导方针。在对其他开发人员的代码进行了大量的研究和阅读之后，我提出了这一套小小的指导原则。

*   Dart 文件名应该是蛇形的。例子:`customer_list.dart`。
*   `Page`将代表应用程序的屏幕，其中将包括部件。例如:`HomePage`、`CustomerListPage`等。
*   将项目中的每种类型的类组织在单独的文件夹中。示例:页面、小部件、服务等。

在本文中，我演示了 Flutter 应用程序中的数据流，包括使用委托模式的子-父通信。所有这些都将是我即将开始的颤振课程的一部分。

谢谢，祝编码愉快！