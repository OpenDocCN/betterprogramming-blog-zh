# 你应该多写些糟糕的代码

> 原文：<https://betterprogramming.pub/you-should-write-bad-code-more-often-388c6f1ba5a>

## 以及如何发现糟糕的编码建议

![](img/9e5ff51bcfcbaf6409322b32a32fea08.png)

木桥上的卡车，由[小野帕瓦](https://www.instagram.com/onopaiva/)

每周都会有一篇“不要这样做”的文章被张贴在某个地方。不要用继承，永远不要写 singleton，scrum 已经死了。但是我们真的要放弃这一切吗？if 语句真的有那么糟糕吗？我们如何判断哪些建议值得听？

没有完美的编程语言，也没有正确的编码方式。有指导方针(和已知的陷阱)。今天在互联网上浏览编程建议是很可怕的——每个人都告诉你停止做一些事情。很快我们就没有可用的命令了。一切都是 bug 的来源。

考虑一下这个类比:你不会把一辆卡车送下一座木桥，然后期待它到达桥的另一边。这并不意味着木桥已经死亡，也不意味着你应该停止使用卡车。

编程语言给了我们工具。由我们来决定何时、为何以及如何使用它们。不要因为砸到手指就扔掉锤子——提高你的瞄准能力。

# 如何发现不好的建议？

好的建议有三个部分。一是信息本身，二是其时的*，三是其*时的*。坏建议通常缺少第二和第三部分——它被描述成*总是*有效的东西。*

一个常见的主题是“不惜一切代价避免继承”如果没有 *when* 或 *when not to* 的话，你可能最终会盲目地跟随它，并失去 OO 最重要的工具之一。相反，请考虑以下内容:“继承是一个很好的工具。然而，深层次结构往往是有害的。”这一次很明显，问题在于深度。这种解释要精确得多，并提供了对此事的直接洞察，告诉我们浅层次结构是好的。

另一件需要注意的事情是语言。许多作家被训练成“大胆写作，从不请求原谅。”众所周知，这种语气在互联网上很流行，尤其是在媒体上。问题在于，为大胆而大胆是有害的。人们忘了补充一点，他们的建议并不适用于所有情况。为了避免听起来软弱无力，他们在不到时会忽略*。*

好的建议是友好的，而不是恐吓的。回忆一下这些年来你得到的所有真诚的帮助。有没有一点是愤怒地给予的？

# 经验法则

尤其是在编码方面，有两条经验法则适用:

## 1.语言的创建和维护成本很高。如果一个特性不断被添加到新的语言中，它仍然扮演着重要的角色。

这就是为什么全局范围仍然是一个东西，就像继承和 if 语句一样。任何声称应该完全避免这些功能的文章都忽略了这些功能的一个非常重要的方面。

一个很好的例子就是打字。Python 和 JavaScript 的无类型世界吸引了许多开发人员，他们后来会后悔用这种无结构的语言写了一万行。这些都不存在于 Java 和 C#的老式世界中(这也不意味着它们是天堂)。

难怪打字稿是一个东西。键入作为松散类型的语言已经回归——您只需键入足够多的内容，编译器就会填充剩下的内容。这个想法非常成功，它分别通过`var` 和`auto` 关键字进入了 C#和 C++世界。甚至 Python 现在也有了类型化特性。

在相反的方向，第二条经验法则是:

## 2.现代语言已经通过设计去掉了所有真正讨厌的东西

这就是为什么我们再也看不到宏或者`goto` 语句或者显式内存管理。过去，Java 的 GC 受到了相当多的负面报道，但是 GC 已经超越了 JVM，成为了几乎所有的现代语言。

最近移除的是空指针异常。像 Kotlin 和 Swift 这样的现代语言通过设计强制执行空检查。C# 8 也在遵循类似的路线。原始线程和异步回调也有自己的问题。现在，我们用方便的 async/await 结构编写异步任务。

所有这些使我们得出以下结论:

## 如果你想成为一名更好的程序员，学习编程语言历史

虽然大多数语言都是由对工具有很好感觉的个人创造出来的，但是它们的发展是由委员会领导的。每当添加新功能时，都会有大量的工作致力于讨论它们对社区的相关性和价值，以及完善其设计。改变和删除特征也是如此。Python 3 带来了许多难以忽视的突破性变化，但这一切都得到了回报。

# 更频繁地编写糟糕的代码

我们用的都是几十年创新和失败设计的产物。

只有钻研一些讨厌的 C/C++代码，你才能真正领会垃圾收集语言的妙处。在那之前，你所能做的就是想象过去有多痛苦。只有那些写了一个并面临许多相关问题(比如写测试)的人才能真正理解对单例的厌恶。

教科书样本和现实生活经验之间有着天壤之别。前者只不过是一种暗示；后者真正改变了你的编码方式。

我们中的大多数人，回到我们的初学者时代，没有 Git 或单元测试就编码。这些项目往往是错误的，而且，通常情况下，它们会停止工作。如果没有 Git，您将无法判断自己可能意外地更改了什么。如果没有测试，在你再次遇到它们之前，事情就会停止工作。*这种体验是我们每天使用这些工具的动力。*

*要真正理解如何写好代码，必须先写坏代码。*

有几种方法可以强迫自己写糟糕的代码(或者在你当前的代码片段中看到丑陋)。归结起来就是一件事:*尝试用其他方式编码*。这会让你知道你的解决方案有多好或者有多愚蠢(“曾经”是因为你会改变它，对吗？)

以下是你在业余时间可以做的事情:

1.  **学习母语:**举个例子，Kotlin 就是受 Scala 的启发。Swift 试图解决 Objective-C 问题。C#取代了 Java。学习母语教你多少“你现在所拥有的”在当时是不存在的(以及它解决了什么)。它会教你更加欣赏很多你可能认为是垃圾的东西。
2.  **学习一门“接班人”语言:**如果你是 C++开发人员，你应该试试 Rust。Java 人应该尝试一下。Python 用户可能会尝试 Julia 或 Nim。JavaScript 人员应该尝试 TypeScript 或者 Dart。与学习母语不同，这会让你知道你现在做的有多少是废话，以及如何更好地处理。
3.  学习 LISP:对许多人来说，这是一个奇怪的问题。LISP 没有变量。它是一种全功能编程语言(这比 Haskell 更容易)。你不需要精通它，但是试着写一些算法，比如 Fibonacci，快速排序，或者 Huffman 编码。如果你花时间去做，你会意识到变量在很多时候是不必要的。
4.  **用 Plain-C 编写一个文本处理器:**给定一个文本文件的路径，打开它，删除所有换行符，并在每个句点(`.`)字符后添加新的换行符。然后，打乱每个单词，保持第一个和最后一个字符不变。如果您并行处理每条生产线，将会加分。这将(快速)向您展示字符串处理是如何戏剧性地发展的。
5.  **寻找设计模式:**拿一个设计模式列表，[比如这个](https://sourcemaking.com/design_patterns)，打开你正在工作或者曾经工作过的一些项目。花点时间阅读每种模式，并尝试寻找可以从其中一种模式中受益的地方。对于你看到的每一个，试着想象一下如果你用过它会有多干净(如果你重构它会加分)。这是将设计模式整合到您的全部内容中的最佳方式。

从本质上讲，这些技巧都是试图让你以不同的方式编码，或者重新审视你已经做了什么。不管怎样，你会发现并不是所有的东西都像你曾经想象的那样闪亮。

此外，我不会告诉你什么是错的，什么是对的，也不会告诉你如何编码。相反，我邀请你…编码。用新语言编写代码。试着用两种不同的方法做同样的事情。编码是成为更好的编码者的途径。*不看网上一些乱七八糟的博文。*

欢迎评论或[联系我](https://www.linkedin.com/in/ygorreboucas/)。如果你刚接触媒体，我强烈推荐[订阅](https://ygorserpa.medium.com/membership)。对于数据和 IT 专业人员来说，中型文章是 StackOverflow 的完美组合，对于新手来说更是如此。注册时请考虑使用[我的会员链接。](https://ygorserpa.medium.com/membership)

感谢阅读:)