<html>
<head>
<title>Build a Snake Game Using Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Go构建一个贪吃蛇游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-snake-game-using-in-go-b4186e21d011?source=collection_archive---------6-----------------------#2022-09-28">https://betterprogramming.pub/build-a-snake-game-using-in-go-b4186e21d011?source=collection_archive---------6-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fbfa" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一步一步地学习围棋</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/405f4ac9cbc306ca4a98c4e965e5ceb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NZqKf6ClGmHh_aOO"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@carltraw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡尔·劳</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="2646" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将使用Go来构建经典的贪吃蛇游戏。这是我的第一个围棋项目，还有什么更好的机会与你分享我的学习经验，并希望能帮助你学习围棋？</p><p id="a307" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个项目的完整代码(分成几个部分)在这个<a class="ae kv" href="https://github.com/erap129/SnakeInGo" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a></p><p id="2c43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章的概要如下:</p><ul class=""><li id="6f14" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第1部分——何苦呢？</li><li id="aaf8" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第2部分—设置我们的环境</li><li id="ab15" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第3部分—在Go中实现蛇<br/>—第3.1部分—移动的斑点<br/>—第3.2部分—移动的蛇<br/>—第3.3部分—添加食物和点数</li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="1da9" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated"><strong class="ak">第1部分——何苦呢？</strong></h1><p id="b7de" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">为什么要学习一门新语言？为什么不遵循官方教程，然后就到此为止呢？</p><ul class=""><li id="64a6" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">学习一门新语言让我们成为更好的程序员。每种编程语言都有自己的优势和特性，对我们以前没有见过的语言开放可以让我们接触到新的想法和编程范例，还可以为我们的工具链添加另一种工具。</li><li id="4a50" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">还有什么比游戏更好的学习方式呢？我个人认为这比遵循说明书有趣多了。</li></ul><p id="3502" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那为什么要去呢？</p><p id="606a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Go是谷歌创造的一种语言，其1.0版本于2012年向公众发布。从那以后，Go得到了发展，并在开发者中获得了很大的影响力。Go以快速和易于学习而闻名，它非常注重高效的并发性(阅读关于<a class="ae kv" href="https://golangbot.com/goroutines/" rel="noopener ugc nofollow" target="_blank"> goroutines </a> [2】的更多信息)。我认为这样一种流行和流行的语言值得我关注，即使我不打算在不久的将来使用它做任何实际的事情，因此本教程诞生了！</p><h1 id="eaf6" class="mn mo iq bd mp mq nk ms mt mu nl mw mx jw nm jx mz jz nn ka nb kc no kd nd ne bi translated">第2部分—设置我们的环境</h1><p id="5e2e" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">安装部分只与Linux相关。请注意，它将安装一个旧版本的Go(在撰写本文时是1.13)，但对于我们的项目来说已经足够了。</p><p id="41a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">安装:</strong>使用以下命令安装Go:<code class="fe np nq nr ns b">sudo apt install golang-go</code>。完成安装后，通过运行<code class="fe np nq nr ns b">go version</code>检查您的系统是否安装了Go。您的输出应该是这样的:<code class="fe np nq nr ns b">go version go1.13.8 linux/amd64</code>(取决于您安装的版本)。完成后，我们可以创建我们的第一个项目！</p><p id="29a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">创建项目:</strong>我们将使用Visual Studio代码(vscode)作为我们的IDE(您仍然可以使用其他IDE)。为我们的项目创建一个名为Snake的新文件夹，并在该文件夹中打开IDE。如果使用vscode，您应该通过Extensions选项卡安装Go扩展。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/228a0ab6f7511d3e4bda54cde02ec93f.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*LeIVvFCosyiH88sD9BxBOg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">vscode — Go扩展</p></figure><p id="6024" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开终端(可以直接在VS代码中完成)，键入<code class="fe np nq nr ns b">go mod init Snake</code>，回车。</p><p id="aadf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在您的当前目录(Snake目录)中创建一个新文件<code class="fe np nq nr ns b">go.mod</code>。如果我们把这个项目作为一个模块发布，我们会用一个有效的URL替换<code class="fe np nq nr ns b">Snake</code>，比如我们的GitHub库，但是因为这只是一个玩具项目，我们不关心这个。</p><p id="3612" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们编写一个简单的“Hello World”项目，看看一切都正常运行。在Snake目录中创建一个名为<code class="fe np nq nr ns b">main.go</code>的新文件，并输入以下代码:</p><pre class="kg kh ki kj gt nu ns nv nw aw nx bi"><span id="cb23" class="ny mo iq ns b gy nz oa l ob oc">package main</span><span id="f1f9" class="ny mo iq ns b gy od oa l ob oc">import "fmt"</span><span id="f8f0" class="ny mo iq ns b gy od oa l ob oc">func main() {</span><span id="2d0b" class="ny mo iq ns b gy od oa l ob oc">    fmt.Println("Hello World!")</span><span id="bdac" class="ny mo iq ns b gy od oa l ob oc">}</span></pre><p id="039b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这段代码中，我们导入并使用了处理命令行输入和输出的标准<code class="fe np nq nr ns b">fmt</code>包。在终端运行<code class="fe np nq nr ns b">go run main.go</code>。你应该看到<code class="fe np nq nr ns b">Hello World!</code>打印在你的终端上，程序应该退出。如果这一步完成了，我们就可以进入下一步了——构建一个贪吃蛇游戏！</p><p id="2b6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你想运行一个由几个文件组成的项目时(就像在这个游戏中)，从包含你的代码的目录中运行<code class="fe np nq nr ns b"><strong class="ky ir">go run *.go</strong></code>。接下来将会发生的是，你的主函数将会在知道项目中其他文件的情况下运行(如果你只是运行<code class="fe np nq nr ns b">go run main.go</code>，它将会忽略所有其他文件，并且由于缺少依赖关系而中断)。</p><h1 id="91f5" class="mn mo iq bd mp mq nk ms mt mu nl mw mx jw nm jx mz jz nn ka nb kc no kd nd ne bi translated">第3部分—在Go中实现Snake</h1><p id="5c41" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这一实现受到了Josh Aletto创作的<a class="ae kv" href="https://earthly.dev/blog/pongo/" rel="noopener ugc nofollow" target="_blank"> Pong Go教程</a>【3】的启发并基于该教程。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h2 id="364b" class="ny mo iq bd mp oe of dn mt og oh dp mx lf oi oj mz lj ok ol nb ln om on nd oo bi translated"><strong class="ak">第3.1部分——移动的斑点</strong></h2><p id="cf53" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">在第一部分中，我们将在屏幕上创建一个键盘控制的blob。我们以此开始，因为这是一个相对简单的逻辑任务，它将允许我们专注于语言的基础和我们将使用的基于终端的GUI框架— <code class="fe np nq nr ns b"> <a class="ae kv" href="https://github.com/gdamore/tcell" rel="noopener ugc nofollow" target="_blank">tcell</a></code> [4]。</p><p id="d45d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一部分由三个文件组成—</p><ul class=""><li id="c338" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><code class="fe np nq nr ns b">main.go</code>将包含UI循环，它将监听用户输入并相应地更新相关的数据结构。它还将启动<code class="fe np nq nr ns b">game.go.</code>中的子程序</li><li id="38cb" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">处理主游戏循环——更新游戏中不同元素的状态，并将它们绘制在终端屏幕上。</li><li id="fa44" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><code class="fe np nq nr ns b">snake.go</code>处理蛇对象的内部状态(目前只是它的速度和位置)</li></ul><p id="db89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看这些文件:</p><p id="8c73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">main.go</code> —</p><ul class=""><li id="a0fe" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">在第11–18行中，我们从<code class="fe np nq nr ns b">tcell</code>获取<code class="fe np nq nr ns b">screen</code>对象，并在屏幕抓取失败时做一些错误处理。</li><li id="841c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在第23–33行，我们定义了两个对象<code class="fe np nq nr ns b">game</code>和<code class="fe np nq nr ns b">SnakeBody</code>，并用一些初始参数初始化它们。</li><li id="b2da" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在第34行，我们运行了一个<code class="fe np nq nr ns b">goroutine</code>，它在一个不同的线程中启动了<code class="fe np nq nr ns b">game</code>的主循环。我们稍后将查看游戏循环。</li><li id="63c7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在第35–53行，我们处理用户输入。要么用户按下<code class="fe np nq nr ns b">ctrl+c</code>，然后我们退出程序，要么用户按下其中一个箭头键，然后我们向<code class="fe np nq nr ns b">game.SnakeBody</code>对象发送相关信号，以改变运动方向。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="5306" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">game.go</code> —</p><ul class=""><li id="5359" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第21–27行定义了主游戏循环。在每一步开始时，我们清空屏幕，然后更新<code class="fe np nq nr ns b">snakeBody</code>位置并将其绘制在屏幕上。之后，我们执行<code class="fe np nq nr ns b">time.Sleep</code>来保持屏幕上的前一帧(否则移动速度太快，我们无法视觉感知)。最后，我们在屏幕上绘制新的框架。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="ef51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">snake.go</code> —</p><ul class=""><li id="d3e6" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">这个文件定义了我们的snake对象(目前只是一个blob ),并使用当前速度处理方向的改变和当前位置的更新。注意，如果蛇消失在屏幕的一边，我们希望它在另一边重新出现，这就是第16–23行的复杂性。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="2f3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这部分的游戏玩法应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/466d99da44ee9d4595c05a82907eef18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tLvO4hv3mkkOBR0PlUOVzg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">游戏性—第一部分</p></figure><h2 id="8ae0" class="ny mo iq bd mp oe of dn mt og oh dp mx lf oi oj mz lj ok ol nb ln om on nd oo bi translated"><strong class="ak">第3.3部分——一条移动的蛇</strong></h2><p id="2251" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">要实现一条移动的蛇，我们首先需要定义作为一条“蛇”意味着什么。在这个上下文中，它表示由几个部分组成的实体，其中每个部分都有自己的X和Y坐标。注意到蛇的移动可以用队列来建模，我们可以用一种简单而优雅的方式来实现它，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/1f26753098c153eda30e12406def3777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gx8FnZX0JZVxyjoZqT2gZA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">以队列形式实现蛇形移动</p></figure><p id="15fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的大部分更改将发生在文件<code class="fe np nq nr ns b">snake.go</code>中，在这里将实现队列逻辑(Go没有内置队列，所以我们将使用片来实现它们)。在<code class="fe np nq nr ns b">main.go</code>和<code class="fe np nq nr ns b">game.go</code>中也会发生一些小的变化，主要是为了支持前者的变化。</p><p id="897c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">main.go</code> —</p><ul class=""><li id="690d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">在第23–36行中，向构成蛇的初始构建块的<code class="fe np nq nr ns b">snakeParts</code>对象添加了一个初始化。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="20aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">game.go </code> —</p><ul class=""><li id="2f43" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">增加了<code class="fe np nq nr ns b">drawParts</code>功能，该功能将在游戏循环的每次迭代中将蛇的部分绘制到屏幕上。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="0d7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">snake.go</code> —</p><ul class=""><li id="a32a" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">增加了<code class="fe np nq nr ns b">Update</code>功能，实现了蛇的队列式移动。在这个函数的每次激活中，一个新的头部被加入队列(取决于蛇的方向),而尾部被出队。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="ee4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这部分的游戏玩法应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/5a71e5d048e75434f18b654377dcef9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Xz61T_y1iLMkbObe6q7VZg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">游戏性—第二部分</p></figure><h2 id="7ae6" class="ny mo iq bd mp oe of dn mt og oh dp mx lf oi oj mz lj ok ol nb ln om on nd oo bi translated"><strong class="ak">第3.3部分—添加食物和点数</strong></h2><p id="3a07" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">在这一部分，我们将为游戏添加重要的逻辑，包括:</p><ul class=""><li id="0e3c" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">收集食物和赚取积分的能力</li><li id="5d8d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如果蛇收集食物，就让它变长</li><li id="4a93" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">探测蛇头与蛇身的碰撞</li><li id="ccc1" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">一个“游戏结束”的屏幕，可以选择重播或退出</li></ul><p id="d860" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们讨论一下这三个文件中每个文件所需的更改:</p><p id="03bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">snake.go </code> —</p><ul class=""><li id="8702" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第21–23行:检查<code class="fe np nq nr ns b">longerSnake</code>参数是否作为true传递。如果是这样，不要在蛇的身体上执行出列，从而使它长一个图块。</li><li id="9209" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">为方便起见，增加了<code class="fe np nq nr ns b">ResetPos</code>函数(该函数将从<code class="fe np nq nr ns b">main.go</code>调用)</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="7bed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">game.go</code> —</p><ul class=""><li id="f379" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">增加了在屏幕上绘制文本的<code class="fe np nq nr ns b">drawText</code>功能。取自<a class="ae kv" href="https://github.com/liweiyi88/gosnakego" rel="noopener ugc nofollow" target="_blank">另一个使用单元格</a>【5】的snake实现。</li><li id="3d5e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">增加<code class="fe np nq nr ns b">checkCollision</code>功能，接收零件列表和另一个零件。对于零件列表中的每个零件，它会检查是否与其他零件冲突。我们用这个函数来检查1)蛇头是否与食物发生了碰撞，2)蛇头是否与蛇身发生了碰撞。</li><li id="63f5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在主循环中添加了逻辑(我将详细说明不太重要的添加内容):<br/> 1)第72–76行:检查与食物的碰撞，如果检测到碰撞，则更新分数。此外，在一个随机的位置重新绘制食物。第86–88行:屏幕上的游戏。请注意，在显示分数后，该子程序将终止(在<code class="fe np nq nr ns b">main.go</code>中，用户将选择用新游戏开始另一个goroutine)</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="048a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe np nq nr ns b">main.go</code> —</p><ul class=""><li id="bee3" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第43–47行:这些行处理游戏结束的情况。如果检测到游戏结束(使用<code class="fe np nq nr ns b">game</code>中的<code class="fe np nq nr ns b">GameOver</code>按钮)，用户可以选择按下<code class="fe np nq nr ns b">y</code>或<code class="fe np nq nr ns b">n</code>，游戏将相应地重启或终止。我们只需启动另一个goroutine即可重启游戏。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="fafa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这部分的游戏玩法应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/7dfa0466b5f499df62ee3a691d8620b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*p3yyUi8OQ3KX2i1F7Dtljg.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">游戏性—第三部分</p></figure><p id="84b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经完成了实现！您的贪吃蛇游戏已经开始运行，您可以邀请朋友参加锦标赛:)</p><h1 id="22e1" class="mn mo iq bd mp mq nk ms mt mu nl mw mx jw nm jx mz jz nn ka nb kc no kd nd ne bi translated">未来的想法</h1><p id="d545" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">我希望你喜欢在Go中实现Snake，我知道我喜欢。我认为goroutines是一个超级酷的特性，我不知道在其他语言中执行并行化是如此容易。虽然这个游戏相当简单，但我仍然喜欢将队列实现移动作为一个小的脑力练习。如果我不得不使用这种语言做任何实际的事情，这种经历也会缩短学习曲线，并且在我的腰带下有另一种工具总是好的。</p><p id="1ff7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我有更多的时间，我会延长这个游戏，给我的蛇添加一些很酷的能量，比如粒子射击能力，速度变化，以及其他好东西。我还会添加单元测试，以确保在添加这些功能后不会出现任何问题。</p><p id="2136" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读，下次见！</p><h1 id="cd08" class="mn mo iq bd mp mq nk ms mt mu nl mw mx jw nm jx mz jz nn ka nb kc no kd nd ne bi translated">参考</h1><p id="18c8" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">[1] —完整项目代码:<a class="ae kv" href="https://github.com/erap129/SnakeInGo" rel="noopener ugc nofollow" target="_blank">https://github.com/erap129/SnakeInGo</a></p><p id="354f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]—戈罗廷斯:<a class="ae kv" href="https://golangbot.com/goroutines/" rel="noopener ugc nofollow" target="_blank">https://golangbot.com/goroutines/</a></p><p id="47cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[3] — Pong围棋教程:<a class="ae kv" href="https://earthly.dev/blog/pongo/" rel="noopener ugc nofollow" target="_blank">https://earthly.dev/blog/pongo/</a></p><p id="71d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[4] — tcell Go包:<a class="ae kv" href="https://github.com/gdamore/tcell" rel="noopener ugc nofollow" target="_blank">https://github.com/gdamore/tcell</a></p><p id="e6be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[5] —使用【https://github.com/liweiyi88/gosnakego】的<code class="fe np nq nr ns b">tcell</code> : <a class="ae kv" href="https://github.com/liweiyi88/gosnakego" rel="noopener ugc nofollow" target="_blank">的另一个snake实现</a></p></div></div>    
</body>
</html>