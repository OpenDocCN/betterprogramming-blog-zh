# Python 中遍历列表的 10 种方法

> 原文：<https://betterprogramming.pub/10-ways-of-iterating-over-a-list-in-python-f068da25875f>

## 可以不使用`for`关键字循环吗？

![](img/9b40af75a01600ec9ddaf585e4e99742.png)

[Tine ivani](https://unsplash.com/es/@tine999?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

Python 是一种很棒的编程语言。这是一个简单而强大的工具，只需几行代码就可以完成复杂的任务。此外，Python 非常灵活，提供了无数标准和非标准的方法来实现相同的目标。

在本文中，我将向您展示 Python 中遍历列表的十种方法。

# 经典的 For-Each 循环

遍历列表的第一种也是最常见的方法是直接在列表上使用 Python 的`for`循环:

# 经典的射程弧线

这是另一种传统的循环方法，如此平庸以至于不需要演示:

# 非 Pythonic While 循环

现在我们开始研究一些不太常见的方法，比如在一个`while`循环中手动更新列表索引:

还是很无聊吧？现在是时候用下面的方法来预热派对了。

# 破解内置函数

黑客是一种通过非标准手段实现目标的艺术，例如，通过制作东西(软件、对象等)。)以不希望的方式行事。

所以，我们来黑一下`sorted()`内置函数。它通常接受一个 iterable 并返回它的排序副本。但是，您可以传递一个可选键来定义自己的排序标准。但是，如果您使用这个键函数对列表项执行操作，会怎么样呢？

像 SQL 注入这样的代码注入攻击不也是这样工作的吗？的确如此。

# 手动管理列表迭代器

这是一种更技术性的方法，涉及迭代器:允许遍历容器(通常是列表)的对象，不知道其内部结构。

这也是经典 for-each 循环的内部工作方式。

# 将列表视为非破坏性队列

这些方法都不是特别有性能，但是在每次迭代中弹出并随后重新指定列表项怎么样？

注意，即使我们在列表的长度范围内循环，我们也不会使用下标操作符`[]`。

# 解析列表的字符串表示

这种方法利用了列表的内置字符串表示。但是，请注意，这种算法只适用于基本类型，因为复杂对象被表示为它们的类型名和内存地址，如果不实现特定于类型的解析器，就很难将其转换为 Python 对象。

然而，既然我们使用了列表理解和 for-each 循环，这不是有点欺骗吗？如果你不能忍受循环，不要担心，下一个选项中没有`for` s。

# 使用递归迭代

使用一种更函数化的方法，我们可以递归地遍历一个列表，并对其元素应用一个谓词:

谁说循环和递归不能很好地结合在一起？

# 解析列表的字节表示

尽管原始字节和 Python 通常不能很好地协同工作，但您仍然可以将列表转换为字节数组，然后从原始字节中重建项目。注意，这个方法也不适用于复杂的对象，因为我们不能从它的原始字节重建一个对象。

不过，这很不雅观。让我们看看下面的方法是否能做得更好。不使用 Python，用 Python 迭代一个列表怎么样？

# 处理 C 中的迭代

对于这种方法，我们将编写一个 C 扩展来处理 Python 列表的迭代。为了保持文章简洁，我不打算详细解释为 Python 创建 C 扩展的整个过程。如果你有兴趣了解更多关于这个话题的信息，请查看[这个指南](/speed-up-your-python-codebases-with-c-extensions-94859875eb70)。

首先，让我们创建 C 代码。如果你不懂 C，你可能只看注释。

然后创建`setup.py`脚本来构建扩展:

最后，构建并安装 C 扩展:

```
python3 setup.py build
python3 setup.py install --user
```

现在，您可以轻松地在 Python 脚本中导入新的 C 模块，因为它是一个普通的库。代码如下:

事实上，你可以在不使用 Python 的情况下迭代一个列表。但是，您应该注意到，由于 C 是一种静态类型的编程语言，您不能将任何参数类型传递给用它编写的函数。

如果您想实现一个通用的`c_iter()`函数，它可以接受任何列表类型，那么您需要在 C 文件中不同地处理每个特定的类型，或者简单地为每个数据类型定义一个不同的 C 函数(`c_iter_int()`、`c_iter_float()`、 `c_iter_str()`等等)。).

# 结论

Python 中有无数种遍历列表的方法。有些是有意义的，并且被认为是最佳实践，比如使用 for-each 循环(与相比， [Python 循环)。其他的被认为是概念验证，不应该在任何生产代码库中使用。](/python-loops-performance-compared-the-fastest-is-b4638744a1ff)

我希望你喜欢这篇文章。如果你知道任何其他有趣的在 Python 中循环列表的方法，请在评论中分享。感谢阅读！

这是我探索用 Python 实现简单任务的各种有趣和过度设计的方法的系列文章的第二篇。如果你错过了，你可以在下面找到它:

[](/7-ways-of-reading-a-file-in-python-855340b002dc) [## Python 中读取文件的 7 种方式

### 你能在不打开文件的情况下读取它吗？

better 编程. pub](/7-ways-of-reading-a-file-in-python-855340b002dc)