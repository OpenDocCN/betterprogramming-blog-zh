<html>
<head>
<title>UserDefaults in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的用户默认值</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/userdefaults-in-swift-4-d1a278a0ec79?source=collection_archive---------5-----------------------#2018-01-27">https://betterprogramming.pub/userdefaults-in-swift-4-d1a278a0ec79?source=collection_archive---------5-----------------------#2018-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fe4c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从UserDefaults开始|如何使用UserDefaults？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85dd6a87be04810db4c980b82b766a81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Yqmb8XmBTvDDjWL6it7ww.jpeg"/></div></div></figure><p id="5ed3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在保存小数据的iOS应用中，我们使用的是<code class="fe ln lo lp lq b"><a class="ae lr" href="https://developer.apple.com/documentation/foundation/userdefaults" rel="noopener ugc nofollow" target="_blank">UserDefaults</a></code>。</p><p id="6904" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里的专业解决方案可以轻松处理这些事情。</p><h1 id="3dd8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">用户默认值</h1><p id="2ec8" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">为什么是<code class="fe ln lo lp lq b">UserDefaults</code>？因为有时我们需要在应用程序中保存少量数据，如设置、状态或记录，我们可以用它来代替核心数据。</p><p id="13ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可以支持<code class="fe ln lo lp lq b">Bool</code>、<code class="fe ln lo lp lq b">Dictionary</code>、<code class="fe ln lo lp lq b">Int</code>、<code class="fe ln lo lp lq b">String</code>、<code class="fe ln lo lp lq b">Data</code>、<code class="fe ln lo lp lq b">Array</code>等保存数据类型。</p><h2 id="8259" class="mp lt iq bd lu mq mr dn ly ms mt dp mc la mu mv me le mw mx mg li my mz mi na bi translated">保存字符串</h2><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="9847" class="mp lt iq lq b gy nf ng l nh ni"><strong class="lq ir">UserDefaults</strong>.standard.<strong class="lq ir">set</strong>("Anand", forKey: "name")</span></pre><h2 id="ae4b" class="mp lt iq bd lu mq mr dn ly ms mt dp mc la mu mv me le mw mx mg li my mz mi na bi translated">正在检索字符串</h2><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="e891" class="mp lt iq lq b gy nf ng l nh ni">let name = <strong class="lq ir">UserDefaults</strong>.standard.<strong class="lq ir">string</strong>(forKey: “name”) ?? “”</span></pre><p id="c5be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为什么我在这里用了<code class="fe ln lo lp lq b">name</code>？这是用于保存和检索数据的密钥。我们可以用唯一的<code class="fe ln lo lp lq b">key</code>存储每一条数据，否则，它会用新数据替换旧数据。</p><p id="44d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">再举一个<code class="fe ln lo lp lq b">Bool</code>的例子...</p><h2 id="5003" class="mp lt iq bd lu mq mr dn ly ms mt dp mc la mu mv me le mw mx mg li my mz mi na bi translated">保存布尔值</h2><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="9442" class="mp lt iq lq b gy nf ng l nh ni"><strong class="lq ir">UserDefaults</strong>.standard.<strong class="lq ir">set</strong>(true, forKey: “userlogin”)</span></pre><h2 id="ae88" class="mp lt iq bd lu mq mr dn ly ms mt dp mc la mu mv me le mw mx mg li my mz mi na bi translated">正在检索布尔值</h2><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="5380" class="mp lt iq lq b gy nf ng l nh ni">let status = <strong class="lq ir">UserDefaults</strong>.standard.<strong class="lq ir">bool</strong>(forKey: “userlogin”) ?? false</span></pre></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="aef2" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">一个管理用户详细信息的小会话的小例子</h1><p id="6444" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">在这个例子中，我们将介绍使用<code class="fe ln lo lp lq b">Dictionary</code>进行保存，以及通过<code class="fe ln lo lp lq b">Model</code>类检索用户数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div><p class="nx ny gj gh gi nz oa bd b be z dk translated">用户默认值示例(<a class="ae lr" href="https://gist.github.com/ANSCoder/d7faaa8d7211663ef797ce0207e11688" rel="noopener ugc nofollow" target="_blank">github.com</a>)</p></figure><h2 id="7d24" class="mp lt iq bd lu mq mr dn ly ms mt dp mc la mu mv me le mw mx mg li my mz mi na bi translated">如何使用它</h2><p id="9470" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">保存详细信息:</p><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="83dc" class="mp lt iq lq b gy nf ng l nh ni"><strong class="lq ir">Defaults</strong>.save("Anand", address: "Bengalore")</span></pre><p id="8f2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正在检索详细信息:</p><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="09fe" class="mp lt iq lq b gy nf ng l nh ni">let name = <strong class="lq ir">Defaults</strong>.getNameAndAddress.name</span></pre><p id="6eda" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">清楚细节:</p><pre class="kg kh ki kj gt nb lq nc nd aw ne bi"><span id="208b" class="mp lt iq lq b gy nf ng l nh ni"><strong class="lq ir">Defaults</strong>.clearUserData()</span></pre></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="eb73" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">结论</h1><p id="0e77" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">这是处理应用程序少量数据并存储在<code class="fe ln lo lp lq b">UserDefaults</code>中的最简单方法。它易于使用，并且几乎支持所有类型的值类型，如<code class="fe ln lo lp lq b">Dictionary</code>、<code class="fe ln lo lp lq b">Array</code>、<code class="fe ln lo lp lq b">Any</code>、<code class="fe ln lo lp lq b">String</code>、<code class="fe ln lo lp lq b">Int</code>、<code class="fe ln lo lp lq b">Float</code>、<code class="fe ln lo lp lq b">Double</code>、<code class="fe ln lo lp lq b">Bool</code>、<code class="fe ln lo lp lq b">URL</code>。</p><p id="b389" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ob">关于用户默认值还有一件重要的事情:</em></p><p id="2b33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">UserDefaults</code>类是线程安全的。</p><p id="c4a5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ob">遗产:</em></p><p id="6b4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">避免使用<code class="fe ln lo lp lq b">UserDefaults.standard.synchronize()</code></p><blockquote class="oc od oe"><p id="331a" class="kr ks ob kt b ku kv jr kw kx ky ju kz of lb lc ld og lf lg lh oh lj lk ll lm ij bi translated">你可以在这里查看如何通过<strong class="kt ir"> Propertywrapper </strong>使用UserDefaults。</p></blockquote><p id="0df9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ob">来源- </em> <a class="ae lr" href="https://developer.apple.com/documentation/foundation/userdefaults/1414005-synchronize" rel="noopener ugc nofollow" target="_blank"> <em class="ob">苹果文档。</em>T9】</a></p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="981a" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">感谢阅读！</h1></div></div>    
</body>
</html>