<html>
<head>
<title>Understanding the Sort Method of Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解数组的排序方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understanding-the-sort-method-of-arrays-a9f2d5f83230?source=collection_archive---------3-----------------------#2019-12-10">https://betterprogramming.pub/understanding-the-sort-method-of-arrays-a9f2d5f83230?source=collection_archive---------3-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f18b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用JavaScript的排序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1eb396e9a2667fcfdcba226d80b412e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aaERAmEm7CLrbj2xSWt-jQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">约瑟夫·霍查在<a class="ae kv" href="https://unsplash.com/s/photos/shop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><ul class=""><li id="aa04" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">JavaScript array sort()用于对数组元素进行排序。</li><li id="86a9" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">默认情况下，数组将按升序排序，但我们可以改变它。</li><li id="9de3" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">这个方法将<strong class="ky ir"> </strong>改变原来的数组。</li><li id="ea23" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">我们还可以提供我们的比较功能来实现自定义排序。</li></ul><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="1f24" class="ly lz iq lu b gy ma mb l mc md">var array = [1,2,3,1,2,3];</span><span id="25ca" class="ly lz iq lu b gy me mb l mc md">array.sort(); [1,1,2,2,3,3]</span></pre><p id="f2df" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">让我们试试另一个例子:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="d908" class="ly lz iq lu b gy ma mb l mc md">var array = [1,2,11];</span><span id="74f2" class="ly lz iq lu b gy me mb l mc md">array.sort(); // [1,11,2]</span></pre><p id="da17" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">对于上面的代码，预期的结果是<code class="fe ms mt mu lu b">[1,2,11]</code>，但是我们得到的是<code class="fe ms mt mu lu b">[1,11,2]</code>。原因是<code class="fe ms mt mu lu b">sort </code>方法将元素转换成字符串，然后比较它们的UTF-16代码单元值序列。</p><p id="08f7" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">于是<code class="fe ms mt mu lu b">11</code>转换成了<code class="fe ms mt mu lu b">“11”</code>。当我们比较两个字符串<code class="fe ms mt mu lu b">“11”</code>和<code class="fe ms mt mu lu b">“2”</code>时，比较的字符代码表示<code class="fe ms mt mu lu b">char code of 1 is 49</code>，而<code class="fe ms mt mu lu b">2</code>的字符代码是<code class="fe ms mt mu lu b">50</code>。因为49 &lt; 50，我们得到<code class="fe ms mt mu lu b">[1,11,2]</code>。</p><p id="a3e5" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">如果数组包含任何<code class="fe ms mt mu lu b">undefined</code>，那么所有的<code class="fe ms mt mu lu b">undefined</code>元素都被排序到数组的末尾。</p><p id="3340" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">我们可以使用默认的排序方法对字符串进行排序。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="1275" class="ly lz iq lu b gy ma mb l mc md">var names = ["John", "Abu", "Babu", "Balu", "Antony"]</span><span id="2998" class="ly lz iq lu b gy me mb l mc md">names.sort();</span><span id="defb" class="ly lz iq lu b gy me mb l mc md">console.log(names); // ["Abu", "Antony", "Babu", "Balu", "John"]</span></pre><p id="86a0" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">对于其他类型，我们需要将我们的<code class="fe ms mt mu lu b">compareFunction</code>作为参数传递给sort函数。</p><p id="bc0a" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">compare函数有两个参数。这两个参数取自索引<code class="fe ms mt mu lu b">[0,1] , [1,2] … [arrayLength-2, arrayLength-1]</code>上的数组，用于比较这一对元素。</p><p id="8788" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">元素的排序基于每对比较的返回值<code class="fe ms mt mu lu b">compareFunction</code>。</p><p id="72b3" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">如果函数返回…</p><ul class=""><li id="0fb3" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated"><code class="fe ms mt mu lu b">&gt;0</code>然后<code class="fe ms mt mu lu b">a</code>和<code class="fe ms mt mu lu b">b</code>的位置互换。</li><li id="d7c4" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><code class="fe ms mt mu lu b">&lt;=0</code>然后位置没有变化</li></ul><p id="cf46" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">让我们写一个比较函数来排序数字。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="10b5" class="ly lz iq lu b gy ma mb l mc md">function compare(a, b) {</span><span id="5d47" class="ly lz iq lu b gy me mb l mc md">  if (a &lt; b ) {<br/>    return -1;<br/>  }</span><span id="204e" class="ly lz iq lu b gy me mb l mc md">  if (a &gt; b ) {<br/>    return 1;<br/>  }</span><span id="2c2c" class="ly lz iq lu b gy me mb l mc md">  // otherwise a == b<br/>  return 0;</span><span id="ae5b" class="ly lz iq lu b gy me mb l mc md">}</span><span id="ff7e" class="ly lz iq lu b gy me mb l mc md">// Now if we execute<br/> <br/>var array = [2,1,11];<br/>array.sort(compare);</span><span id="3519" class="ly lz iq lu b gy me mb l mc md">log(array); [1,2,11];</span></pre><p id="7bad" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">上述比较函数可以简化为:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="5870" class="ly lz iq lu b gy ma mb l mc md">function compareNumbers(a, b) {</span><span id="8ba1" class="ly lz iq lu b gy me mb l mc md">  return a - b;</span><span id="48d9" class="ly lz iq lu b gy me mb l mc md">}</span></pre><p id="145b" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">因为，当我们做<code class="fe ms mt mu lu b">a-b</code>，如果<code class="fe ms mt mu lu b">a &gt; b</code>那么它返回数字<code class="fe ms mt mu lu b">&gt; 0</code>。如果<code class="fe ms mt mu lu b">a&lt;b</code>，那么它返回<code class="fe ms mt mu lu b">&lt; 0</code>。当<code class="fe ms mt mu lu b">a=b</code>时，则返回<code class="fe ms mt mu lu b">0</code>。</p><p id="29a3" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">要对<code class="fe ms mt mu lu b">Descending Order</code>中的数字进行排序，只需将<code class="fe ms mt mu lu b">a-b</code>改为<code class="fe ms mt mu lu b">b-a</code>。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="b32c" class="ly lz iq lu b gy ma mb l mc md">function Descending(a, b) {</span><span id="ad97" class="ly lz iq lu b gy me mb l mc md">    return b- a;<!-- --> </span><span id="bf7c" class="ly lz iq lu b gy me mb l mc md">}</span></pre></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="99dd" class="nc lz iq bd nd ne nf ng nh ni nj nk nl jw nm jx nn jz no ka np kc nq kd nr ns bi translated">排序对象数组</h1><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="1f0d" class="ly lz iq lu b gy ma mb l mc md">var users = [ {name: "John", age:20}, {name:"Antony" , age : 33}];</span><span id="b22d" class="ly lz iq lu b gy me mb l mc md">function sortByAge(obj1, obj2) {</span><span id="eea0" class="ly lz iq lu b gy me mb l mc md">    return obj1.age - obj2.age;</span><span id="6d6b" class="ly lz iq lu b gy me mb l mc md">}</span><span id="0af2" class="ly lz iq lu b gy me mb l mc md">function sortByName(obj1, obj2) {<br/>   return obj1.name.localeCompare(obj2.name);<br/>} </span><span id="6891" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">users.sort(sortByAge);</strong></span><span id="f842" class="ly lz iq lu b gy me mb l mc md">// output <br/>0: {name: "John", age: 20}<br/>1: {name: "Antony", age: 33}</span><span id="366d" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">users.sort(sortByName);</strong></span><span id="7605" class="ly lz iq lu b gy me mb l mc md">//output</span><span id="f219" class="ly lz iq lu b gy me mb l mc md">0: {name: "Antony", age: 33}<br/>1: {name: "John", age: 20}</span></pre><p id="78f3" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">在<code class="fe ms mt mu lu b">sortByName</code> compareFunction中使用的<code class="fe ms mt mu lu b"><strong class="ky ir">localeCompare()</strong></code>方法返回一个数字，指示一个引用字符串在排序顺序中是在给定字符串之前还是之后，或者是否与给定字符串相同。</p><p id="af67" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">如果CompareFunction返回<code class="fe ms mt mu lu b">undefined</code>、<code class="fe ms mt mu lu b">null</code>、<code class="fe ms mt mu lu b">NaN</code>、<code class="fe ms mt mu lu b">Infinity</code>，则数组不会对两个成员进行排序</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="f056" class="ly lz iq lu b gy ma mb l mc md">var array = [3,2,1, 110, 102 , 30];</span><span id="a2d8" class="ly lz iq lu b gy me mb l mc md">function customCompare(a, b){<br/>   if(a &gt; 10 || b &gt; 10) {<br/>      return Infinity;<br/>   }<br/>   else {<br/>      return a-b;<br/>   }<br/>}</span><span id="4323" class="ly lz iq lu b gy me mb l mc md">array.sort(customCompare);</span></pre><p id="90a8" class="pw-post-body-paragraph mf mg iq ky b kz la jr mh lb lc ju mi ld mj mk ml lf mm mn mo lh mp mq mr lj ij bi translated">在上面的例子中，我们已经定义了如果<code class="fe ms mt mu lu b">a</code>和<code class="fe ms mt mu lu b">b</code>小于<code class="fe ms mt mu lu b">10 </code>，它将按升序排序。否则，该函数将返回<code class="fe ms mt mu lu b">Infinity</code>，尽管是<code class="fe ms mt mu lu b">Infinity &gt; 0</code>。但是，它不会被交换。对于<code class="fe ms mt mu lu b">undefined</code>、<code class="fe ms mt mu lu b">null</code>、<code class="fe ms mt mu lu b">NaN</code>来说也是如此。</p><div class="nt nu gp gr nv nw"><a href="https://medium.com/better-programming/you-dont-need-loops-in-javascript-1dc8139eab4b" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">JavaScript中不需要循环</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">了解如何消除循环并使用高阶函数，如映射、减少和过滤</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://medium.com/better-programming/debug-like-a-lion-in-chrome-dev-tool-babe1019df3d" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">使用Chrome的DevTools像狮子一样调试</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">更有效地使用Chrome开发工具的技巧和诀窍</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>