<html>
<head>
<title>10 Handy Git-Stash Commands To Manage Your Code Efficiently</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10个方便的Git-Stash命令来有效地管理您的代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10-handy-git-stash-commands-to-manage-your-code-efficiently-39ddc3d6f324?source=collection_archive---------10-----------------------#2021-04-13">https://betterprogramming.pub/10-handy-git-stash-commands-to-manage-your-code-efficiently-39ddc3d6f324?source=collection_archive---------10-----------------------#2021-04-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="aad5" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">从基础到高级git-stash用例</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/beee9d1ebcdca3705f98b539e9094762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*buutNWTiiY-nMPd2"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Arnold Francisca 在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="52c8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> Git </a>无疑是使用最广泛的版本控制系统之一。</p><p id="6f10" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您曾经使用过Git，您可能使用过<code class="fe lw lx ly lz b"><a class="ae kz" href="https://git-scm.com/docs/git-stash" rel="noopener ugc nofollow" target="_blank">git-stash</a></code>命令。它将您的本地修改保存在一个未完成更改的堆栈中。你可以做些别的事情，然后轻松地重新应用这些变化。当您必须快速切换到另一个分支，但又不想丢失当前的所有工作时，这很有用。</p><p id="34c1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这个简短的教程中，我们将探索一些基本的和更高级的<code class="fe lw lx ly lz b">git-stash</code>用法，这些用法可以在管理代码时节省您的时间和精力。例如，列出stashes而不应用更改，仅取消stashes特定文件，等等。</p><p id="12ec" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们开始吧！</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="e372" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">用例</h1><h2 id="98ff" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">1.创建一个仓库</h2><p id="09d1" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">要将您的修改保存到存储区，请键入:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="817b" class="mz mi iu lz b gz nu nv l nw nx">$ git stash</span></pre><p id="8bbd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">新创建的(未跟踪的)文件呢？它们保留在工作树中。如果你也想把它们藏起来，添加<code class="fe lw lx ly lz b">— all</code>选项:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="9013" class="mz mi iu lz b gz nu nv l nw nx">$ git stash --all</span></pre><h2 id="1a93" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">2.列出所有藏匿处</h2><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="2180" class="mz mi iu lz b gz nu nv l nw nx">$ git stash list</span><span id="8a06" class="mz mi iu lz b gz ny nv l nw nx">stash@{0}: On master: demo_master2<br/>stash@{1}: On test: demo_test<br/>stash@{2}: On master: demo_master</span></pre><p id="2e29" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的例子中，我修改了名为<code class="fe lw lx ly lz b">test </code>和<code class="fe lw lx ly lz b">master</code>的两个分支中的文件。</p><h2 id="6d55" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">3.应用隐藏</h2><p id="5b08" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">应用最新的存储:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="85a0" class="mz mi iu lz b gz nu nv l nw nx">$ git stash apply</span></pre><p id="a870" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要应用特定的存储，您必须提供存储ID:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="35b6" class="mz mi iu lz b gz nu nv l nw nx">$ git stash apply stash@{0}</span></pre><p id="bc50" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这将把ID为<code class="fe lw lx ly lz b">0</code>的stash应用到工作树，而不会从stash列表中删除它。</p><h2 id="52e1" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">4.打开一个储藏室</h2><p id="9010" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">如果您想要应用更改并从存储列表中删除存储，请使用<code class="fe lw lx ly lz b">git-stash pop</code>:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="fbc8" class="mz mi iu lz b gz nu nv l nw nx">$ git stash pop stash@{0}</span></pre><p id="38f6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，如果不提供特定的stash ID，它将从列表中删除最上面的stash:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="2628" class="mz mi iu lz b gz nu nv l nw nx">$ git stash pop</span></pre><h2 id="c313" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">5.显示更改而不应用它们</h2><p id="245a" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">有时我们只想看看代码中有什么变化，而不需要重新应用它。<code class="fe lw lx ly lz b">show</code>命令为我们做了这件事。</p><p id="445e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要显示最后一次存储的更改:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="d9ba" class="mz mi iu lz b gz nu nv l nw nx">$ git stash show</span></pre><p id="0feb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">它会打印出这样的内容:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="54ab" class="mz mi iu lz b gz nu nv l nw nx">.../main/java/jpa/AddressJpaController.java<br/> | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-)</span></pre><p id="24f7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要查看最近存储的内容:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="222f" class="mz mi iu lz b gz nu nv l nw nx">$ git stash show -p</span></pre><p id="fb7d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">结果会是这样的:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><p id="efe5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，为了简洁起见，我缩短了输出。</p><p id="c694" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对我来说，更有用的是查看特定存储中的修改。我只需要提供想要的藏匿ID:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="424d" class="mz mi iu lz b gz nu nv l nw nx">$ git stash show -p stash@{1}</span></pre><p id="9fae" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">示例输出:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><p id="f8e0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您将能够在您的终端中修改更改。</p><h2 id="ad7c" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">6.从stash创建一个新分支</h2><p id="ea98" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">有时，当您试图应用一个存储时，您可能会遇到冲突，因为您运行存储的分支已经发生了显著的变化。<code class="fe lw lx ly lz b">git stash apply</code>操作将会失败。</p><p id="36d2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这种情况下，您可以通过创建一个包含所需存储更改的新分支来避免冲突。<code class="fe lw lx ly lz b">git stash branch</code>命令恢复原来隐藏的状态，没有冲突:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="5d71" class="mz mi iu lz b gz nu nv l nw nx">$ git stash branch new_branch stash@{2}</span></pre><p id="9026" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">注意，这个命令将从列表中删除存储，就像<code class="fe lw lx ly lz b">git stash pop</code>命令一样。</p><p id="d09f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您没有提供一个存储ID，它将应用存储列表中的最新ID。</p><h2 id="98dc" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">7.显示修改过的文件名</h2><p id="6322" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">要查看哪些文件已更改，请将<code class="fe lw lx ly lz b">— name-only</code>选项添加到<code class="fe lw lx ly lz b">git stash show</code>:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="706a" class="mz mi iu lz b gz nu nv l nw nx">$ git stash show --name-only</span><span id="a09d" class="mz mi iu lz b gz ny nv l nw nx">myproject/src/main/java/AddressJpaController.java</span></pre><h2 id="e632" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">8.应用特定文件中隐藏的更改</h2><p id="cecd" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">假设您已经对几个文件进行了更改并隐藏了它们。稍后，您希望重新应用更改，但只能从某个/某些文件中应用。</p><p id="0ec0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一种方法是应用所有的存储，提交所需的文件，并取消其他文件的存储。但是有一种更有效的方法。您可以使用<code class="fe lw lx ly lz b"><a class="ae kz" href="https://git-scm.com/docs/git-restore`" rel="noopener ugc nofollow" target="_blank">restore</a></code>命令(从Git 2.23+开始可用)并提供文件名:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="bbd2" class="mz mi iu lz b gz nu nv l nw nx">$ git restore -s stash@{0} -- &lt;filename&gt;</span></pre><p id="77e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您已经学习了如何获取修改过的文件的名称。所以，让我们来试试:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="b659" class="mz mi iu lz b gz nu nv l nw nx">$ git stash show --name-only stash@{1}</span><span id="db7b" class="mz mi iu lz b gz ny nv l nw nx">myproject/src/main/java/jpa/AgeController.java<br/>myproject/src/main/java/jpa/AddressJpaController.java<br/></span></pre><p id="83c4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">卸载特定文件:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="7723" class="mz mi iu lz b gz nu nv l nw nx">$ git restore -s stash@{1} -- src/main/java/jpa/AgeController.java</span></pre><h2 id="ada7" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">9.删除所有隐藏条目</h2><p id="045e" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">如果你想清理你的仓库，使用<code class="fe lw lx ly lz b">clear</code>命令。请注意，此操作可能无法恢复。</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="97f6" class="mz mi iu lz b gz nu nv l nw nx">$ git stash clear</span></pre><h2 id="7226" class="mz mi iu bd mj na nb dn mn nc nd dp mr lj ne nf mt ln ng nh mv lr ni nj mx nk bi translated">10.删除单个存储条目</h2><p id="43c9" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated"><code class="fe lw lx ly lz b">drop</code>命令从堆栈中删除最新的存储:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="fe8f" class="mz mi iu lz b gz nu nv l nw nx">$ git stash drop</span></pre><p id="7c2f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您还可以提供一个ID来删除特定的存储:</p><pre class="kk kl km kn gu nq lz nr ns aw nt bi"><span id="d06c" class="mz mi iu lz b gz nu nv l nw nx">$ git stash drop stash@{2}</span></pre><p id="f095" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">再次提醒，小心行事，因为可能无法找回藏匿的毒品。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="d830" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="6d96" class="pw-post-body-paragraph la lb iu lc b ld nl jv lf lg nm jy li lj nn ll lm ln no lp lq lr np lt lu lv in bi translated">我们已经看到,<code class="fe lw lx ly lz b">git-stash</code>命令是管理我们的代码和保持我们的提交历史干净的一种方便的方式。了解如何在各种情况下使用该命令以充分利用它是值得的。</p><p id="9cf6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望你今天学到了新的有用的东西。感谢您的阅读，下次再见！</p></div></div>    
</body>
</html>