<html>
<head>
<title>Easily Create a Form With React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React挂钩轻松创建表单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/easily-create-a-form-with-react-hooks-1cab17e2be0d?source=collection_archive---------6-----------------------#2020-01-15">https://betterprogramming.pub/easily-create-a-form-with-react-hooks-1cab17e2be0d?source=collection_archive---------6-----------------------#2020-01-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="74a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在React中创建表单变得简单多了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4158d53d50ee630fdbf8ff76105746a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*avlg0U4o26ozRD2Ft6DT9Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@lucabravo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卢卡·布拉沃</a>在<a class="ae ky" href="https://unsplash.com/s/photos/computer-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你好。如果你在这里，你可能和我一样:漫无目的地在互联网上闲逛，寻找合适的例子来帮助制作这个叫做Hooks click的新概念。你的搜索到此结束。</p><p id="9956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有一个与这篇文章配套的视频，因为只做一个或另一个(博客帖子或视频)感觉不太对。每个人学习的方式不同。</p><p id="eb27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我想理解一个复杂的话题时，我更喜欢阅读它，而不是听它，但我知道有人是听觉学习者，所以下面是视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">与Ryan反应</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="2eaa" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">目标</h1><p id="2597" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">创建一个简单的排行榜应用程序，它使用<code class="fe nb nc nd ne b">useState()</code>钩子从表单中获取信息，将其设置为状态，并输出到表格中。</p><h2 id="09f1" class="nf mf it bd mg ng nh dn mk ni nj dp mo li nk nl mq lm nm nn ms lq no np mu nq bi translated">目录:</h2><ul class=""><li id="df23" class="nr ns it lb b lc mw lf mx li nt lm nu lq nv lu nw nx ny nz bi translated"><a class="ae ky" href="#722b" rel="noopener ugc nofollow">环境设置</a></li><li id="1ddd" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="#5aba" rel="noopener ugc nofollow">应用程序设置</a></li><li id="6e61" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="#6201" rel="noopener ugc nofollow">表单组件</a></li><li id="e69d" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="#a2d2" rel="noopener ugc nofollow">挂钩</a></li><li id="f282" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="#36fe" rel="noopener ugc nofollow">输出排行榜组件</a></li><li id="637c" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><a class="ae ky" href="#58b5" rel="noopener ugc nofollow">回顾</a></li></ul><p id="62d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单，对吧？这就是我们将要创造的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/196e5b43d67b8349bf7c87982af21d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*JYWzxUK2LMVjNxIECavlRg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的最终产品</p></figure><p id="7fb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的例子，而且是有目的的。理解本文中的基础知识将为您提供在任何需要您在React中使用<code class="fe nb nc nd ne b">useState()</code>管理状态的应用程序中取得成功所需的工具。</p><p id="b19b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在任何时候迷路了，我会在底部贴一个这个项目的Github repo的链接，这样你就可以查看所有的代码。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="722b" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">环境设置</h1><p id="d7ca" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">下面是一些我认为您已经安装的工具:</p><ul class=""><li id="2fdb" class="nr ns it lb b lc ld lf lg li og lm oh lq oi lu nw nx ny nz bi translated">节点. js</li><li id="d03d" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">npm和create-react-app——如果你愿意，可以使用npx</li><li id="e820" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">VSCode —这是我选择的代码编辑器。你可以用任何你想要的东西。</li></ul><p id="ecba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您需要安装这些工具中的任何一个，我已经创建了另一篇文章，带您了解如何设置您的开发环境:<a class="ae ky" href="https://medium.com/better-programming/my-react-dev-environment-setup-ded7cedb87a" rel="noopener">我的React开发环境设置</a></p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="5aba" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">应用程序设置</h1><p id="1ec7" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">让我们开始吧。首先，我们将创建一个全新的React应用程序。如果你想直接跳到钩子上，我不会生气的:<a class="ae ky" href="https://medium.com/p/1cab17e2be0d/edit#a2d2" rel="noopener">带我去钩子上</a>。</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="4b38" class="nf mf it ne b gy on oo l op oq">npx create-react-app leaderboard-tutorial</span></pre><p id="b668" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们创建了它，我们将做一些清理和一些准备工作。</p><p id="98a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先删除src文件夹中的所有内容，除了<code class="fe nb nc nd ne b">App.js</code>和<code class="fe nb nc nd ne b">index.js</code>。您可以看到下面的目录结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/85fa9bdaa300238250ba622bfa4d7474.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*4S7559mv_uAaaGLwVfvvDg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">目录视图</p></figure><p id="36db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，清空您的<code class="fe nb nc nd ne b">App.js</code>和<code class="fe nb nc nd ne b">index.js</code>，这样我们刚刚删除的所有引用都不再存在。这里是<code class="fe nb nc nd ne b">App.js</code>:</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="1dac" class="nf mf it ne b gy on oo l op oq">import React from "react";</span><span id="2f15" class="nf mf it ne b gy os oo l op oq">function App() {<br/>  return &lt;div <strong class="ne iu">className="container mt-4"</strong>&gt;<br/>           <strong class="ne iu">Hello</strong><br/>         &lt;/div&gt;;<br/>}<br/>export default App;</span></pre><p id="ee87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和<code class="fe nb nc nd ne b">index.js</code>:</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="8b9a" class="nf mf it ne b gy on oo l op oq">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import App from "./App";</span><span id="c5be" class="nf mf it ne b gy os oo l op oq">ReactDOM.render(&lt;App /&gt;, document.getElementById("root"));</span></pre><p id="de92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们要安装reactstrap和bootstrap。我会在这里留下一个reactstrap页面的链接，这样您就可以查看他们提供的不同组件，但我也会在下面列出我们确切需要的内容。</p><div class="ot ou gp gr ov ow"><a href="https://reactstrap.github.io/" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">反应阱</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">通过NPM npm安装安装反应陷阱和对等依赖项—保存反应陷阱反应陷阱导入组件…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">reactstrap.github.io</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk ks ow"/></div></div></a></div><p id="00df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么我要使用reactstrap？这篇文章是关于学习如何使用<code class="fe nb nc nd ne b">useState()</code>钩子，<em class="pl">而不是</em>如何创建组件。这不是HTML/CSS/Bootstrap课程。Reactstrap允许我们花更多的时间关注钩子，而不是摆弄每个组件的样式。从长远来看，这会节省我们的时间，更不用说它看起来比普通的HTML要好得多——相信我！</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="40d1" class="nf mf it ne b gy on oo l op oq">npm i --save bootstrap reactstrap</span></pre><p id="5044" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，将这一行包含在您的<code class="fe nb nc nd ne b">src/index.js</code>文件中:</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="bdd1" class="nf mf it ne b gy on oo l op oq">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import App from "./App";<br/><strong class="ne iu">import 'bootstrap/dist/css/bootstrap.min.css';</strong></span><span id="c9ec" class="nf mf it ne b gy os oo l op oq">ReactDOM.render(&lt;App /&gt;, document.getElementById("root"));</span></pre><p id="6906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的——就准备工作和清理工作而言，这就是我们需要做的全部工作。您可以使用以下命令启动应用程序:</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="d7b7" class="nf mf it ne b gy on oo l op oq">npm start</span></pre><p id="560a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pl">检查点#1: </em>此时，如果一切安装正确，您应该会看到这个(左上角的Hello，用稍微好一点的字体写的，在一个容器中，因为bootstrap的缘故，上边距为4):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/b960278f010c3321bc62f007c01f1e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*G1jCDEJzuMwVXgx1fELBtg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查点# 1:NPM启动后</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="6201" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">表单组件</h1><p id="2a0c" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">现在我们需要布局我们的基本表单，为此我们将创建一个名为<code class="fe nb nc nd ne b">InputForm.js</code>的组件。我将留下下面的代码来创建您见过的最简单的表单。</p><p id="126c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是目录结构最终的样子。我们将只创建两个组件:一个通过输入表单接收用户数据，另一个输出数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/f5d32d21c036f91f633f7a45f69412ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*SaK2MSUK4Kjln2xQIKdIiQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">目录结构</p></figure><p id="638a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件名很容易理解，但如果不清楚的话:</p><ul class=""><li id="3a51" class="nr ns it lb b lc ld lf lg li og lm oh lq oi lu nw nx ny nz bi translated">Components/InputForm.js是我们刚刚创建的用于处理输入的表单。将作为子组件。</li><li id="3ac1" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">components/output leaderboard . js将成为我们输出用户/状态数据的表。将作为子组件。</li><li id="6c7b" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">App.js是我们的切入点，我们的顶级。我们也将在这里创造我们的最终状态。将作为父组件。</li></ul><p id="a4b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nb nc nd ne b">App.js</code>中，我们将尽可能保持简单，因此我们将有如下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="d107" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而在<code class="fe nb nc nd ne b">InputForm.js</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="f71d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我来解释一下上面的一些代码。</p><p id="c3cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将在顶部看到reactstrap导入的所有不同组件。这有助于我们快速启动和运行。然后使用引导CSS允许我们使用一些引导本地类，如“mt-4”。需要注意的重要部分是输入表单的“name”属性。这些将在我们开始使用钩子时发挥作用。</p><p id="9692" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">加上<code class="fe nb nc nd ne b">OutputLeaderboard.js</code>，你的<code class="fe nb nc nd ne b">App.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="1819" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以创建<code class="fe nb nc nd ne b">OutputLeaderboard.js</code>的框架，这样就不会有任何编译错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="34a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pl">检查点#2: </em>如果您一直密切关注，您的应用程序应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/a3b2792cbd79f75d8b0f7e1ca7890018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*yfIeE9ajut_7Odels6YU_w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查点#2:表单创建</p></figure><p id="fccc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，现在让我们进入钩子！</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h2 id="a2d2" class="nf mf it bd mg ng nh dn mk ni nj dp mo li nk nl mq lm nm nn ms lq no np mu nq bi translated">钩子！</h2><p id="6233" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">让我先解释一下什么是钩子。根据<a class="ae ky" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank"> facebook文档</a>，“一个H <strong class="lb iu"> ook </strong>是一个特殊的功能，让你‘挂钩’React状态和生命周期特性。”</p><p id="047a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这允许您在功能组件中管理您的状态。</p><p id="9cd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">什么是状态？<strong class="lb iu">状态</strong>是在重新渲染之间保留的信息。</p><p id="7655" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不再需要将功能组件转换成基于类的组件！这使得动态添加状态变得非常容易(特别是如果您最初没有打算这样做的话)。</p><p id="282c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用钩子时，有两条规则是我们绝对必须遵守的。如果你懒于遵守这些规则(就像我过去一样)，你将为此付出代价！所以请学习它们，请遵守它们。这会节省你很多时间。</p><ol class=""><li id="708c" class="nr ns it lb b lc ld lf lg li og lm oh lq oi lu pq nx ny nz bi translated"><strong class="lb iu">只调用顶层的钩子</strong></li></ol><p id="de91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">钩子的执行顺序必须始终相同。这意味着不能在循环、条件或嵌套函数中调用钩子。希望您理解为什么当您使用其中任何一个时，控制流会有所不同，以及为什么这对一致性不利。</p><p id="1720" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.<strong class="lb iu">仅从React函数调用钩子</strong></p><p id="d30c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您不能从Javascript函数中调用钩子。我们希望确保所有有状态逻辑在源代码中都是可见的。</p><p id="fa3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，让我们将第一个状态添加到应用程序中。</p><p id="ebbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先通过定义来创建我们的状态。这将是保存我们在每次输入时从用户那里收到的所有数据的状态。在<code class="fe nb nc nd ne b">InputForm.js</code>内部，就在我们组件的<code class="fe nb nc nd ne b">return()</code>部分的上方，添加下面一行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="8a6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，确保从React导入<code class="fe nb nc nd ne b">useState</code>。</p><p id="cdac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们来分析一下。这里的语法可能看起来有点奇怪——这是因为我们利用了ES6的“数组析构”<code class="fe nb nc nd ne b">useState</code>函数返回两个值——状态和用于修改状态的函数。</p><p id="4b17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们的两元素数组中的每个值都对应于来自<code class="fe nb nc nd ne b">useState()</code>的一个返回值。<code class="fe nb nc nd ne b">eachEntry</code>和<code class="fe nb nc nd ne b">setEachEntry</code>不是<em class="pl">React API的一部分。这些名称可以是任何名称。</em></p><p id="1972" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们必须给我们的状态一个初始值——这就是为什么你会看到空的花括号作为函数调用的参数。但是我们要改变它，让它有一个初始值。那个物体看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="69e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保你把它放在你的州声明之前。</p><p id="230d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给<code class="fe nb nc nd ne b">useState()</code>一个空对象<code class="fe nb nc nd ne b">{}</code>，本来是有效的。然而，在创建表单时，React会抱怨“受控与非受控”输入。通过赋予它一个值，我们现在正在“控制”状态。</p><p id="315b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要一种方法，当有人在我们的文本框中输入内容时更新我们的状态。这是在处理程序的帮助下完成的。将此添加到您的<code class="fe nb nc nd ne b">InputForm.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="0dc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将获取<code class="fe nb nc nd ne b">name</code> <strong class="lb iu"> </strong>并将其映射到传入事件的<code class="fe nb nc nd ne b">value</code> <strong class="lb iu"> </strong>(用户的简单击键)。</p><p id="1e87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会看到我还添加了一行，通过析构来隔离输入状态的每个字段。这将使名称到值的映射稍微容易一些。</p><p id="72ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这与我们的表单有什么联系？我们需要更新。</p><p id="13d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是将事件处理程序和值添加到我们的输入标签后，<strong class="lb iu"> </strong> <code class="fe nb nc nd ne b">InputForm.js</code> <strong class="lb iu"> </strong>中的语法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="f812" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以每次与表单的交互都会触发事件处理程序。它会将值映射到我们之前给它的名称，并将该条目存储在state中。理解这一点是关键，所以我建议你花几分钟时间摆弄它，直到你把它记下来。</p><p id="1924" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不熟悉的话，一个很好的形象化方法是在这个函数(<code class="fe nb nc nd ne b">handleInputChange</code>)外面放一个<code class="fe nb nc nd ne b">console.log()</code>，这样您就可以看到状态是如何随着用户按下的每个键而更新的。</p><pre class="kj kk kl km gt oj ne ok ol aw om bi"><span id="0db3" class="nf mf it ne b gy on oo l op oq">const handleInputChange = e =&gt; {<br/>  setEachEntry({ ...eachEntry, [e.target.name]: e.target.value });<br/>};<br/><strong class="ne iu">console.log(eachEntry);</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/5b89e4db9854f0720519ffe31a4207aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BvhsEFB_ebAAOd3Rd4TkeA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">每次按键时，状态都会更新</p></figure><p id="018d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(一旦你有了这个想法，你就可以把它拿出来——每次击一个键都有控制台输出有点烦人！)</p><p id="4a52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们连接提交按钮，这样我们就可以看到输入状态的最终版本。我们将在<code class="fe nb nc nd ne b">InputForm.js</code>中的另一个处理器的正下方添加一个处理器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="cf15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nb nc nd ne b">InputForm.js</code> <strong class="lb iu"> </strong>的底部，我们将给<code class="fe nb nc nd ne b">Button</code>标签中的<strong class="lb iu"> </strong>按钮一些交互性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="2712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pl"> CHECKPOINT #3: </em>添加这个事件处理程序将让您在表单中输入一些信息并单击submit时看到状态的最终版本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/2ba4f650493a03e463b9b8e99935a2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qmRuXzsUbI3y0Xs9Er3cAQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查点#3:单击提交后的控制台</p></figure><p id="610c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是乐趣的开始。我们将使这个状态对我们的顶级组件可见，这样我们就可以在其他地方使用它。</p><p id="30e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你看一下我们要创建的应用程序的截图，你会注意到一个排行榜形式的用户输入列表，而不是一个。从钩子的角度来看，这是一个状态数组，是对象的集合。</p><p id="f2ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何做到这一点？由<em class="pl">解除麟州</em>状态<strong class="lb iu">。</strong></p><p id="979b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">什么是提升状态？当您需要在其他组件中反映对您的状态所做的更改时。我们这样做的方法是将我们的状态提升到一个公共的更高层次的组件。</p><p id="bcef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在我们的例子中，当用户通过表单输入数据并点击提交按钮时，我们的状态正在改变。当这种情况发生时，我们需要在另一个子组件中反映这种变化——它最终将成为显示所有数据的<code class="fe nb nc nd ne b">OutputLeaderboard</code>组件。因此，我们将状态的变化向上发送给父母，这样它就可以向下传递给另一个孩子。</p><p id="3495" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这么办吧。我们将首先创建一个名为<code class="fe nb nc nd ne b">leaderboard</code>的新共享状态。每次点击<code class="fe nb nc nd ne b">Submit</code>时，<code class="fe nb nc nd ne b">eachEntry</code>将代表一个玩家得分对。<code class="fe nb nc nd ne b">eachEntry</code>将是<code class="fe nb nc nd ne b">leaderboard</code>状态数组中的不同元素。</p><p id="08d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在顶层创建一个处理程序，<code class="fe nb nc nd ne b">App.js</code>，并将该处理程序传递给它的子组件(<code class="fe nb nc nd ne b">InputForm</code>)。这将包含更新我们共享状态的代码。</p><p id="46d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以将该数据发送给<code class="fe nb nc nd ne b">App.js </code>中的所有其他子组件——在本例中是<code class="fe nb nc nd ne b">OutputLeaderboard</code>。</p><p id="8d08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nb nc nd ne b">App.js</code> <strong class="lb iu"> : </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="0b90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu"> InputForm.js中:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="3f7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将看到我们将处理程序作为道具，将其析构，然后在我们的<code class="fe nb nc nd ne b">handleFinalSubmit</code>函数中使用它来将<code class="fe nb nc nd ne b">eachEntry</code>传递到顶层的共享状态。</p><p id="1211" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pl">检查点#4: </em>提交多个条目后，您应该会在控制台中看到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/a47f7361a4216a36e907ac2922691363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ryHtBNWfcnGPghA5d4F-Cw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的排行榜阵列</p></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="36fe" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">输出排行榜组件</h1><p id="3ca3" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">现在是时候构建应用程序的输出部分了，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/67c372708d1d2977e6d010e5ec7b33d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*lnvSFueJP8Lu16uEduv2VQ.png"/></div></figure><p id="6df0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nb nc nd ne b">App.js</code>中，我们将发送我们的状态:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="a697" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe nb nc nd ne b">OutputLeaderboard.js</code>中，我们将制定餐桌的基本轮廓。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="bed8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，我们将最终状态对象作为道具传入。我们将遍历该对象，并将每个条目输出到表中的一行。你可以把那个组件(<code class="fe nb nc nd ne b">RenderTableData</code>)放在它自己单独的文件中，但是我现在把它放在同一个文件(<code class="fe nb nc nd ne b">OutputLeaderboard.js</code>)下面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po lw l"/></div></figure><p id="e067" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将很快解释我做了什么来让表格以我想要的方式显示。我第一次通过道具进入状态。然后我创建了一个新的数组，它将我们的最终状态数组存储为一个排序数组。我希望它按照分数降序排列，就像你对排行榜的期望一样。</p><p id="86b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我使用一个计数器作为键来映射每个值。计数器代表排行榜上的“排名”。我从对象的每个元素中提取球员和得分字段并显示它们。每个元素由该表的不同行表示。</p><p id="32e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pl">第五个检查点:</em>当所有的事情都完成后，你的最终产品应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/196e5b43d67b8349bf7c87982af21d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*JYWzxUK2LMVjNxIECavlRg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的最终产品</p></figure><p id="96e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这么简单！</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="58b5" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">回顾</h1><p id="eb97" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们刚刚到底做了什么？</p><ul class=""><li id="6632" class="nr ns it lb b lc ld lf lg li og lm oh lq oi lu nw nx ny nz bi translated">在一个子组件中接收来自最终用户的输入</li><li id="a31c" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">将数据存储在本地状态中</li><li id="6630" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">在顶层创建了共享状态</li><li id="880c" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">用本地状态的多个实例填充共享状态</li><li id="9dc3" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">将共享状态输出到不同的子组件</li></ul><p id="edec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在创建大型应用程序时，您将会多次使用这种模式。</p><p id="981b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会意识到，一旦你掌握了基本模式，抓住钩子就真的不太难了。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="67ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如承诺的那样，这里是到完整库的链接<a class="ae ky" href="https://github.com/ryangleason82/leaderboard-final" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8bb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你在这篇教程中学到了一些东西。如果你有任何问题，请留下评论。</p></div></div>    
</body>
</html>