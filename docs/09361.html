<html>
<head>
<title>Why You Should Be Using Go When Working With JSON</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么在使用JSON时应该使用Go</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-you-should-be-using-go-when-working-with-json-cfdfc5369e1?source=collection_archive---------3-----------------------#2021-08-14">https://betterprogramming.pub/why-you-should-be-using-go-when-working-with-json-cfdfc5369e1?source=collection_archive---------3-----------------------#2021-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="34fa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">停止使用Python与JSON交互，转而使用Go</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9f733d1bb35eb278f3ebf5f8368d97e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JM6yqu4M9bUp1MWg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@hope_house_press_leather_diary_studio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">希望之家出版社-皮革日记工作室</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="0a25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您曾经在另一种语言(如Python)中使用过JSON，您可能会习惯于看到以下变量:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0756" class="ma mb it lw b gy mc md l me mf">jsonData = res.son()<br/>value_i_need = jsonData["key"][0]["key"][4]</span></pre><p id="365c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码片段是一个小例子，展示了Python中的JSON操作可能会变得混乱，而且在那个<em class="mg">会变得很快。</em></p><p id="cf0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我知道每个人都喜欢Python，但是请听我说——Go是Google开发的一种编程语言，它的速度非常快。有很多很棒的教程告诉你如何用Go编程和最佳实践。</p><p id="57a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我想向您展示一个简单的例子，说明为什么您应该为JSON使用Go。</p><h1 id="1312" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用JSON时，Go应该是您事实上的选择</h1><p id="b983" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果您使用的API每次都为内容提供相同的结构，那么可以考虑实现Go结构，以便更容易地操作JSON。</p><p id="4c17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将JSON字典对象转换成Go结构。有一个很棒的在线<a class="ae ky" href="https://mholt.github.io/json-to-go/" rel="noopener ugc nofollow" target="_blank">开源工具</a>，它使用JSON并为JSON提供一个生成的Go结构。</p><p id="6592" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于Go结构的快速介绍或复习，你可以阅读<a class="ae ky" href="https://pythonprogramming.net/go/structs-go-language-programming-tutorial/" rel="noopener ugc nofollow" target="_blank">这篇</a>和<a class="ae ky" href="https://medium.com/r?url=https%3A%2F%2Fgobyexample.com%2Fstructs" rel="noopener">这篇</a>文章。</p><p id="53ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用Mozilla的<em class="mg"> </em> <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" rel="noopener ugc nofollow" target="_blank">文章中的JSON示例。</a></p><p id="ed19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用Mozilla文章中的JSON:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4e1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要访问<code class="fe nf ng nh lw b">members</code>列表中第一个<strong class="lb iu"> </strong>英雄的第二个<strong class="lb iu"> </strong>超能力，我们需要使用下面的代码:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d597" class="ma mb it lw b gy mc md l me mf">superHeroes['members'][0]['powers'][1]</span></pre><p id="a7e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这看起来有点乱，对吧？我认为括号、引号的组合，不知道你是在访问字典还是列表，会使它变得相当混乱。</p><p id="7533" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它让您不断回头看JSON本身，这可能会浪费很多时间。我们可以在Go中使用Struct，而不是直接将JSON解析为Python中的字典和列表，这类似于C中的结构或Python中的类。</p><p id="d799" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我们不需要手写JSON的所有模式，这就是乐趣所在。</p><p id="8df3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何将这个JSON转换成Go结构。将JSON更改为Go结构将使解析JSON更容易查看和理解您正在处理的数据类型。</p><p id="5729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用https://mholt.github.io/json-to-go/中的<a class="ae ky" href="https://mholt.github.io/json-to-go/" rel="noopener ugc nofollow" target="_blank">，我们将JSON粘贴到左侧文本字段中。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/06a05cce25c856492ebc8624a5e7515a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UtHVQX_M5wWC3UGpCn6Q7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">JSON正在被转换为Go结构定义</p></figure><p id="aab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在转换之后，我们使用的Go结构被定义为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Struct.go示例文件</p></figure><p id="e9b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，JSON-to-Go从JSON数据创建了一个Go结构，它还将JSON模式放在定义右侧的字段声明标记中。</p><p id="6f77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JSON模式在它的右边，您不需要回头参考JSON文件或者在控制台中不断地打印它来查看您当前正在处理的数据级别。</p><p id="44f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦JSON被解组(类似于Python中的<code class="fe nf ng nh lw b">json.loads()</code>)成Go结构，下面的代码将访问<code class="fe nf ng nh lw b">members</code>列表中列出的第一个英雄的第二个超能力:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1354" class="ma mb it lw b gy mc md l me mf">squad.Members[0].Powers[1]</span></pre><p id="183f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来更干净，对吧？我认为这使得遍历JSON更加简单。您不仅会丢失括号中的引用键，使用Go结构还可以让您的IDE帮助自动完成您可能正在寻找的字段。</p><p id="44ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这让你的眼睛更容易看，也可以节省你的时间，不用回头去查阅JSON来记住你是否需要一个字典键或者一个列表索引。</p><p id="07af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这只是一个简单的例子，但我希望它能将您转化为一个进行JSON操作和遍历的Go用户！</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="da0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Go中访问JSON的示例程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="99c4" class="mh mb it bd mi mj nq ml mm mn nr mp mq jz ns ka ms kc nt kd mu kf nu kg mw mx bi translated">资源</h1><ul class=""><li id="c070" class="nv nw it lb b lc my lf mz li nx lm ny lq nz lu oa ob oc od bi translated"><a class="ae ky" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank">围棋编程语言</a></li><li id="4b9a" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><a class="ae ky" href="https://mholt.github.io/json-to-go/" rel="noopener ugc nofollow" target="_blank"> JSON-to-Go </a></li></ul></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="bf5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！如果你喜欢这篇文章，请考虑在Twitter上关注我。</p></div></div>    
</body>
</html>