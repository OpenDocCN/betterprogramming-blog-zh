# NBA 统计和金州勇士队:第一部分

> 原文：<https://betterprogramming.pub/nba-statistics-and-the-golden-state-warriors-during-their-championship-runs-part-1-cafc5d8042a8>

## Python 中的数据资源和数据争论

![](img/5efefecd3df2625974d6cfaea56abd92.png)

马库斯·斯皮斯克在 [Unsplash](https://unsplash.com/search/photos/basketball?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

2018-2019 NBA 赛季于 6 月结束，NBA 历史上最多产的球队之一输给了一支从未获得过 NBA 总冠军的球队。多伦多猛龙队是一支从未获得过冠军的加拿大球队，他们击败了金州勇士队，这支球队被广泛认为是一个王朝，在过去的五次冠军中赢得了三次。即使最近失去了总冠军，勇士队也为现代篮球发展了一个典范，将自己树立为新篮球时代的缩影。

在过去的五个 NBA 赛季中，勇士队一直是一支主导力量，甚至在 2015-2016 赛季创下了 73 场胜利的赛季纪录。勇士队在 2014-2015 赛季席卷了联盟，新聘请的主教练史蒂夫·科尔实施了一个流动的进攻体系，即移动进攻。在主教练马克·杰克逊掌舵的前几个赛季，勇士队已经处于上升轨道，他在担任主教练的最后两个赛季中，一直宣扬防守心态，推动勇士队成为一支争夺季后赛的球队。

然而，马克·杰克逊的进攻有时停滞不前，进攻系统的变化展示了勇士队的整体潜力和天赋。在史蒂夫·科尔担任主教练期间，他保持了马克·杰克逊灌输的防守基础，同时也宣扬了新进攻体系的目标，即通过分享篮球来创造球和球员移动以获得高质量的投篮。

# 项目概述

我想探究 NBA 过去五个赛季的统计数据，以确定哪些数据对赛季表现有很大影响。特别是，由于勇士队已经连续五年在 NBA 总决赛中取得了如此多的成功，我想看看他们在统计数据方面的表现，并尝试了解他们的进攻体系的影响。

在这个项目中，我的目标是探索和分析任何 NBA 球迷都可以获得的基本球队统计数据。这些统计数据在每场 NBA 比赛中都有记录，并在整个赛季中汇总。我将利用 2014-2015 到 2018-2019 赛季的数据来确定哪些统计数据与胜利有显著的相关性(从而进入季后赛)，以及金州勇士队在相关统计数据中的排名如何。然后，我将使用与胜利相关的统计数据建立一个模型，看看它们能在多大程度上预测球队的常规赛表现，从而决定一支球队是否会争夺季后赛。

我将这个项目分成三个部分:数据资源、信息和数据争论；探索性数据分析；和模型预测。使用的编程工具是 Python 以及流行的库 [BeautifulSoup](https://pypi.org/project/beautifulsoup4/) 、 [Pandas](https://pandas.pydata.org/) 、 [NumPy](https://www.numpy.org/) 、 [Matplotlib Pyplot、](https://matplotlib.org/api/pyplot_api.html) [Seaborn](https://seaborn.pydata.org/) 和 [SciKit-Learn。](https://scikit-learn.org/stable/)

# 数据资源和数据争论

我从讨论数据资源和信息开始分析 NBA 数据和金州勇士队，并回顾我是如何争论这些数据的。

该项目的统计数据来自[www.basketball-reference.com](http://www.basketball-reference.com/)，其中有球队和球员的数据。篮球参考网站是其母网站[www.sports-reference.com](http://www.sports-reference.com/)的子网站，它是提供各种美国体育统计数据的重要来源，如棒球、(美国)足球、足球、曲棍球和一些大学体育。

NBA 中记录了各种各样的统计数据，如投篮命中率和罚球数(投篮次数、罚球次数、罚球命中率)、助攻数、失误数、抢断数和盖帽数，这些数据有助于统计得分，并被视为基本统计数据。然而，在过去的几年里，高级统计学在所有体育项目中都获得了大量的追随者。统计学家更深入地研究数据，以制定高级指标，为整体游戏提供额外的统计见解。

在这个项目中，我将探索基本的统计数据，可以发现记录在框分数，但也将增加两个统计数据。由于我对勇士队最近的成功以及勇士队的进攻体系如何影响球队的赛季表现感兴趣，我将包括助攻失误率和真实投篮命中率。

助攻失误比(AstTOVr)的公式是助攻/失误*。*这个比例被认为是衡量控球的。助攻是控球机会，导致球员将球传给队友得分，而失误是失去控球机会，导致将球交给对方球队。

以下真实投篮命中率的公式和定义来自篮球参考(【https://www.basketball-reference.com/about/glossary.html】T2)。真实投篮命中率(TS%)是使用真实投篮次数(TSA)计算的。TSA 的公式是投篮次数+ (0.44 *罚球次数)。TS%的公式是点数/ (2 * TSA)。真实投篮命中率是衡量投篮效率的指标，考虑了投篮命中率、三分球命中率和罚球命中率。

根据 basketball-reference 提供的数据和添加的两个额外的统计数据，我将探索哪些统计数据与胜利相关，以及金州勇士队在这些统计数据中的排名如何。然后，我将利用分析中发现的信息建立一个模型，预测常规赛的表现(以胜利衡量)，并衡量争夺季后赛的能力。

作为参考，NBA 总共有 30 支 NBA 球队，分东部和西部两个赛区。每个会议有 15 个团队。然而，每个联盟只有八支球队有资格进入季后赛。NBA 总共有 82 场常规赛来决定谁能进入季后赛。获得季后赛席位是基于单个球队在各自联盟中的获胜记录。每个大会的前八名球队将根据他们的记录进入季后赛。

我开始这个项目是为了寻找收集我想用于分析的数据的方法。我有几个选择。然而，我知道我想尽可能方便地收集多个季节的数据。Basketball-reference 在其网站上提供了数据表(CSV 格式)供下载，但所提供的数据表要么是每个赛季的，要么是每个球队的。对我来说，这可能有点麻烦，因为它需要下载多个文件，然后将它们合并在一起。此外，我快速搜索了一个 API，但是没有找到一个会根据我想要的信息定期更新的 API。所以我决定从篮球参考网站上搜集数据。

我开始导入以下库和模块:Pandas、BeautifulSoup、requests 和 time。根据 [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/) 文档，“BeautifulSoup 是一个 Python 库，用于从 HTML 和 XML 文件中提取数据”。[请求](https://2.python-requests.org/en/master/)库是一个 HTTP 库，用来简化 HTTP 请求。这个项目中的 [time](https://docs.python.org/3/library/time.html) 模块的目的是将 HTTP 请求分散到一定的时间内，而不是在短时间内使网站过载。

当我第一次查看该球队成立以来每支球队的汇总统计数据时，我注意到在 URL 中，我可以将球队的缩写改为我想要的下一支球队的数据(例如，[https://www . basketball-reference . com/teams/TOR/stats _ basic _ totals . html](https://www.basketball-reference.com/teams/TOR/stats_basic_totals.html))。现在我知道我可以做到这一点，我为所有 NBA 球队创建了一个缩写列表。然后，我使用 requests 的 library `.get`方法为每个团队收集数据，将返回的原始数据放入一个字典中，每个缩写的团队名称作为字典键。收集的原始数据是《篮球参考》提供的逐年(自球队成立以来)的基本球队数据。在抓取每个 URL 的过程中，我加入了`time.sleep`方法来延迟请求，这样 basketball-reference web 服务器的压力就会小一些。

现在有了字典中的原始数据，我必须解析 HTML 数据。使用 BeautifulSoup 的`html.parser`，我将 HTML 数据附加到一个列表中，这样我就可以进一步分离出我想要进行分析的数据。这里是我为我想要的数据创建列表的地方:标题、季节和统计值。我使用保存解析数据的 BeautifulSoup 对象的`.find_all`方法来搜索我想要的特定数据。为了获得标题(即 stat 名称)，我搜索了表头的第*个*标记。HTML 的 *tr* 标签表示它是一个表格行，这个表格行保存每个统计的数据(例如，季节、统计值)。现在为了获得每个季节，我在表行数据中搜索了表头的第*个*标记。为了获得整个赛季的每个 stat 值，我在表行数据中搜索了表数据 *td* 标记。

一旦我将解析后的 HTML 数据分成列表，我就必须从 HTML 中提取文本。对于这个任务，我使用了`.get_text()`方法，将文本值放入一个新的列表中。我快速检查了一下文本值列表是否符合我的要求，并注意到我必须清理列表，因为有空白值和多余的“‘Season’]”值是我不想要的。为了清理这些数据，我在列表上使用了 Python 过滤器和 lambda 函数。然后，我使用`.append()`和`.extend()`方法将赛季年份和统计值的过滤列表组合在一起，这样就有一个干净的列表来转换和存储数据。

现在我已经合并了过滤后的数据，我想把它保存成一种格式，比如 CSV 文件，这样所有的数据都被存储起来，我就可以把数据读入 Python。为了开始将数据转换成 CSV 文件，我首先使用我创建的列表创建了一个 Pandas 数据框。然后，我使用`.to_csv()`方法将这个初始数据帧转换成 CSV 文件。这个初始数据框架保存了每个特许经营自开始以来的统计数据。然而，我对进一步过滤该项目的数据框感兴趣。

在进一步过滤之前，我需要再次检查数据是否符合我的要求。我读入了新创建的 CSV 文件作为熊猫数据框，并注意到仍然有一些不需要的功能。为了删除这些特性，我使用 Pandas `.drop()`方法删除了不需要的列。现在这已经按照我喜欢的方式清理了，我为我感兴趣的 NBA 赛季(即 2014-15 到 2018-19)创建了新的数据框。一个数据框代表所有 30 支 NBA 球队，另一个数据框只代表勇士队。

然而，在最后检查这些数据框时，特别是每一列的数据类型(dtype ),我注意到需要对“Season”列进行调整，因为这一列目前是“object”dtype。因此，我调整了“季节”列的值，将日期格式从 2018–19 更改为 2019，表示季节的结束年份；为此，我使用了`.apply()`方法。但这还不是全部。我必须将这个新日期转换成一个数值；我在这个任务中使用了`pd.to_numeric()`函数。

最后，在清理和过滤数据之后，我将 Pandas 数据帧转换成 CSV 文件，用于存储和探索性分析。

查看我在 GitHub 上关于数据争论的[代码](https://github.com/ant-L/Portfolio_Projects/blob/master/NBA_stats_and_GSW_during_championship_run/Basketball_Ref_Data_Wrangle-v2.ipynb)。

在[第二部分](https://medium.com/@aliu415/nba-statistics-and-the-golden-state-warriors-during-their-championship-runs-part-2-bf7240ddbbd4)，我讨论探索性分析。