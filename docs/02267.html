<html>
<head>
<title>Let’s Build a Next-Level Weather App With React Hooks and Algorithms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用React钩子和算法构建一个下一级的天气应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-build-a-next-level-weather-app-with-react-hooks-and-algorithms-e7a7cec23af1?source=collection_archive---------8-----------------------#2019-11-18">https://betterprogramming.pub/lets-build-a-next-level-weather-app-with-react-hooks-and-algorithms-e7a7cec23af1?source=collection_archive---------8-----------------------#2019-11-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4d87" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">拓展天气应用的功能范围</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5a48ba434b14e610aecb2eee3d57619e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzmTNzLF459BcrOuKjlZlQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@nate_dumlao?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">内森·杜姆劳</a>在<a class="ae ky" href="https://unsplash.com/s/photos/sun?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><ul class=""><li id="0414" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><a class="ae ky" href="https://youtu.be/xfAA5jyW9q8" rel="noopener ugc nofollow" target="_blank">视频教程</a></li><li id="b0da" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated"><a class="ae ky" href="https://github.com/01Clarian/weather-algorithm-application" rel="noopener ugc nofollow" target="_blank">源代码</a></li></ul><p id="d1e5" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">下面的教程将从零开始概述和设计一个完整的React weather应用程序。所有的资源都是免费使用的，这个帖子对所有级别的人都很友好。</p><p id="ad54" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">与许多天气应用教程不同，我们将突破界限，更进一步，实现一个自定义的关键字算法，为您提供领先优势。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="f916" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated"><strong class="ak">应用体验</strong></h1><p id="8331" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">用户可以请求世界上任何一个城市的天气信息，并根据天气情况发回反映这些情况的图像。</p><p id="6c05" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">注意:这个应用程序是没有装饰的，这意味着它不会是一个任何方式的时髦狮子狗。然而，该指南是简化和直接的，以提供对功能和逐步编码过程的更深入的关注。你可以随意设计你认为合适的样式。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="c9c0" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated"><strong class="ak">应用概要</strong></h1><ul class=""><li id="a680" class="kz la it lb b lc ni le nj lg nn li no lk np lm ln lo lp lq bi translated">实现React挂钩。</li><li id="5002" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">动态架构。</li><li id="5219" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated"><a class="ae ky" href="https://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank"> OpenWeatherMap API </a>认证和文档。</li><li id="3db9" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">用户表单和输入。</li><li id="de3b" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">计算开尔文天气温度。</li><li id="5cbb" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">错误处理。</li><li id="a42f" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">API调用和数据分析。</li><li id="5f36" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">用迭代定制算法。</li><li id="fdb5" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">附加运动建议。</li></ul><p id="4ddd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">好吧。就是这样。所以，准备好你的咖啡，让我们开始吧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/097e65d39c798edaaa7031ac3b38c0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*rFoFCstrw5wMysYgqPGNtw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">内部交互式数据环境</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="db7f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">入门指南</h1><p id="14b6" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">首先，通过执行节点包创建一个React应用程序:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="25ee" class="nw mr it ns b gy nx ny l nz oa">npx create-react-app weather-hooks</span></pre><p id="6920" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">接下来，输入目录并运行开发服务器。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="181a" class="nw mr it ns b gy nx ny l nz oa">cd weather-hooks<br/>npm start</span></pre><p id="6ff2" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在文本编辑器中打开项目文件夹。删除不需要的文件:<code class="fe ob oc od ns b">App.test.js</code>和<code class="fe ob oc od ns b">Logo.svg</code>。现在，创建两个新的组件文件<code class="fe ob oc od ns b">Form.js</code>，构建我们的天气搜索器，以及<code class="fe ob oc od ns b">Weather.js</code>，为用户显示我们的结果。</p><p id="1917" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">进入<code class="fe ob oc od ns b">App.js</code>，替换不必要的代码并添加一个<code class="fe ob oc od ns b">&lt;h3&gt;</code>标签标题。</p><p id="f648" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在编辑器中，您的项目文件夹应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/f35e5b4fdc21954384efe965ff3e7b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKK37I6Y2ADPWVu112lTJw.png"/></div></div></figure><p id="b92e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在，您的本地主机服务器应该在您的浏览器上启动，并成功返回标题“天气应用程序”。</p><p id="4959" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">喝一口咖啡，让我们构建我们的组件。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9268" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">组件架构和设置</h1><p id="f215" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">在<code class="fe ob oc od ns b">Form.js</code>中，我们将创建一个名为<code class="fe ob oc od ns b">Form</code>的箭头函数，它将道具作为参数。Props将使我们能够从应用程序容器中传递API数据。这样，<code class="fe ob oc od ns b">Form</code>就出口到了我们的<code class="fe ob oc od ns b">App.js</code>。</p><p id="07bb" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">设置一个表单标签，创建两个输入和一个按钮。一个输入将搜索城市，另一个将搜索国家，按钮将两个查询都提交给API。</p><p id="2ea9" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">Form.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="8abd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">请注意，我们将我们的道具设置为<code class="fe ob oc od ns b">getWeather</code>，稍后它将被连接到我们的<code class="fe ob oc od ns b">App.js</code>中的<code class="fe ob oc od ns b">fetchData</code>函数。</p><p id="ac18" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">继续我们的组件设置过程，让我们进入<code class="fe ob oc od ns b">Weather.js</code>并设置一个<code class="fe ob oc od ns b">Weather</code>函数来接收数据和显示逻辑。</p><p id="80e1" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">考虑一下我们的应用程序将显示哪些基本内容，让我们基于这个前提来构建:如果用户输入一个城市和国家，然后点击搜索按钮来查找天气信息。</p><p id="c8e2" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">回到代码中，返回城市和国家信息，以便用户知道数据已经与温度和天气条件以及错误捕获消息正确匹配。</p><p id="cf93" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">为了设置这一点，我们还将为我们的<code class="fe ob oc od ns b">Weather</code>函数引入道具，并在这个实例中析构它们。</p><p id="a847" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">Weather.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="63ac" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在设置我们的显示之前写下我们的数据的名称，后跟<code class="fe ob oc od ns b">&amp;&amp;</code>是为了确保在返回数据之前<em class="oh"> API </em>已经被传递并且为真。</p><p id="d3bd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">&amp;&amp;</code> <strong class="lb iu"> </strong>操作符仅在它们为真时才继续，因此该方法在没有API <strong class="lb iu"> </strong>作为未定义错误的缓冲的情况下工作起来很方便。</p><p id="a3b1" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在我们的组件已经设置好了，它们在我们的应用程序容器中没有状态或可见性，仍然处于非活动状态。</p><p id="1bcb" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然而，在设置容器和状态之前，我们需要访问并设置天气API。为此，请前往https://home.openweathermap.org/users/sign_up的<a class="ae ky" href="https://home.openweathermap.org/users/sign_up" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="952c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">API密钥认证和文档</h1><p id="15b3" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">免费注册并创建一个带有电子邮件确认的帐户。登录<strong class="lb iu"> </strong>，你可以在下面找到你的API密匙，这里:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/f046f179819fee8fb0b91fbc44094fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bVRJDcPYsx6pCTv1RlJZHg.png"/></div></div></figure><p id="b319" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在页面底部找到城市申请的相关API:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/dd4cea4bc105b645db5f55478f9cdb17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3TRvZR2ip0Ut6jvM5G184g.png"/></div></div></figure><p id="7392" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">您可以在下面找到我们将使用的API调用，其中包括城市和国家:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/4ef19fb6f5f2db5442e431a598f70a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*KTGZ-dd1AkXvVCCHHQzdNA.png"/></div></figure><p id="ec8f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">注意:我们将在调用的末尾插入<code class="fe ob oc od ns b"><a class="ae ky" href="http://samples.openweathermap.org/data/2.5/forecast?id=524901&amp;appid=b1b15e88fa797225412429c1c50c122a1" rel="noopener ugc nofollow" target="_blank">&amp;APPID={APIKEY}</a></code>进行身份验证。</p><p id="9007" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">出色的工作。现在我们有了钥匙和电话，再喝点咖啡，让我们在<code class="fe ob oc od ns b">App.js</code>进行一些测试。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="b3d7" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">钩子、容器、状态和道具</h1><p id="4b18" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">回到<code class="fe ob oc od ns b">App.js</code>，我们将带着<code class="fe ob oc od ns b">useState</code>和我们的<code class="fe ob oc od ns b">Form</code>组件和<code class="fe ob oc od ns b">Weather</code>组件在React中设置钩子。</p><p id="e6d3" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，我们将我们的状态设置为一个名为<code class="fe ob oc od ns b">weather</code>的空数组，以设置来自API的天气数据。我们通过使用反斜杠而不是引号来输入我们的API键。</p><p id="cb06" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后我们将创建一个异步的<code class="fe ob oc od ns b">fetchData</code>函数来从Chrome DevTools中检索天气数据并显示日志。</p><p id="4da6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，应用程序容器将把fetch函数挂接到表单并返回结果。</p><p id="abec" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">App.js</code> <strong class="lb iu"> </strong>现在应该更新了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="1561" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">回到我们的本地主机，当触发事件按钮时，数据得到了安慰。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/6cfd75a6d6b1d65b24b866b7e9f04e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWpWhi0WyiYyBRU8SnRo1A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">通知名称包含城市名称，而sys属性包含国家名称。</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="d928" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">动态查询设置</h1><p id="eadd" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">虽然控制台显示的是城市天气信息，但是我们的API调用是硬编码到London的，因此即使我们更改了输入城市，表单输入也保持不活动。</p><p id="e223" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">为了解决这个问题并使状态更加动态，通过表单输入中的元素来定位城市和国家的值，并将它们实现到我们的API调用中。</p><p id="bcea" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，在我们的<code class="fe ob oc od ns b">setWeather</code>中访问要在<code class="fe ob oc od ns b">Weather</code>组件中显示的相关属性，比如温度、城市、国家和描述。</p><p id="eb88" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最后，在喝一些更美味的啤酒时，我们可以将数据设置到天气状态中，并向用户动态显示天气结果。</p><p id="cd25" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">App.js</code>(更新):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="4f07" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">非常好。如果我们保存并测试dev服务器，输入一个城市和国家，然后点击submit按钮，我们应该会得到如下成功结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/ac211346fb39c4b998cb3145dedfe665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boBOtD3ccPlUq-IaqWxxtw.png"/></div></div></figure><p id="39b8" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这里可能缺少的是风格，它用内容来弥补。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3a03" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">错误处理</h1><p id="bade" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">即使这样做是可行的，如果我们忘记输入城市和/或国家并点击提交，将会出现以下错误:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/770fa85d23c065e0b3f8cbc9eb09de56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RPS_cKF0smqJtFKcFZ6vsw.png"/></div></div></figure><p id="73d1" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">为了解决这个问题，让我们将相同的<code class="fe ob oc od ns b">&amp;&amp;</code>真条件应用到我们的<code class="fe ob oc od ns b">setWeather</code>钩子，在<em class="oh"> else </em>部分的<em class="oh"> error </em>下，我们可以包含一个用户通知。</p><p id="859b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">App.js</code>现在应该更新为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="8b32" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">如果在提交以下内容时没有将城市或国家添加到输入中，我们的错误处理应该会返回:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/45ab09bb724ae75be20c4d3d221233c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*1TGTlza7q7xPXFD72jdhmw.png"/></div></figure><p id="a42b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">好的。干得好。后退一步，欣赏风景(尽管是最少的<em class="oh">风格</em>)，再喝点咖啡。</p><p id="2eac" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">回顾过去，到目前为止，我们已经成功地设置了API调用，并在整个应用程序中动态地呈现它。而且，我们已经包括了错误处理，并且没有涉及任何基于类的组件。</p><p id="ce4f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这是React钩子令人敬畏的一瞥。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="bd09" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">温度转换和UX</h1><p id="73d2" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">在我们使用自定义关键字算法完成应用程序并结束本教程之前，让我们将下面的转换公式应用到我们的<code class="fe ob oc od ns b">setWeather</code>钩子中的temperature属性，将我们的温度从开尔文转换为华氏温度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/93bc28942762c7bb42e99e53cb72ca82.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*2La7xAKJi1ZVNDadGPPRtg.png"/></div></figure><p id="37a8" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">再次将<code class="fe ob oc od ns b">App.js</code> <strong class="lb iu"> </strong>更新为如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="7753" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">注意:<code class="fe ob oc od ns b">Math.round</code> <strong class="lb iu"> </strong>方法计算并舍入我们的转换公式，以减少用户在<code class="fe ob oc od ns b">Weather</code>显示中不必要的小数值。</p><p id="6fd6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">回到我们的<code class="fe ob oc od ns b">Weather.js</code>文件，我们可以通过指定天气描述和温度的属性来添加更多的UX修饰，在我们的返回中实现以下附加内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="137f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">如果我们现在在输入中键入Miami和United States，我们应该会收到以下编译结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/ad80bc03af0398d87b7ee625144c29d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*YV97MyxMYiPmkPIyoZEwEg.png"/></div></figure><p id="8c10" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">好多了。从用户体验的角度来看，温度更令人满意。在我们进入最后一步之前，这是一个放松和享受温暖和清新生活的最佳时机。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="fa2e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">最终算法实现</h1><p id="0ddb" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">既然应用程序正在为用户动态地发送和接收我们的API调用，它可以被认为是一个有用的工具。然而，这不是第一款天气应用，也不可能是最后一款……</p><p id="6985" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">那么，如何才能让这个脱颖而出呢？问题是:“我们怎样才能把这个基础和工作体系提升到一个新的水平？”</p><p id="48cd" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">诸如此类的问题是作为一名杰出的开发人员思考的关键。</p><p id="054a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">激发我们现在受咖啡启发的想象力，如果我们可以想出一种方法来描述我们的天气数据，并基于该回报，为用户提供某种媒体内容，会怎么样？</p><p id="8474" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">例如，只要天气API的描述是多云的，我们就可以返回云的图像。</p><p id="e1a6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">虽然这个过程表面上看起来很简单，但它展示了一种能力和好奇心，即在给定我们的工具集的情况下，从增加可能性的角度来思考。非常酷。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="e193" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">从概念到代码</h1><p id="2c54" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">为了将这个概念转换成可以在React中运行的JavaScript，让我们编写一个算法来搜索关键字，当找到匹配时返回一个图像。</p><p id="7480" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">通过遍历我们的天气描述字符串，并使用<code class="fe ob oc od ns b">includes</code> JavaScript方法在一个新的字符串关键字数组中检查匹配，这可以实现。</p><p id="fd1a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">因为我们搜索的是唯一的字符串而不是组合(单词)，所以我们还将使用<code class="fe ob oc od ns b">split</code>方法将天气字符串分割成一个唯一的字符串数组。</p><p id="b87b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">让我们对此进行编码，并为两个阵列设置控制台，以及为我们的比赛设置一个控制台。</p><p id="2e4d" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">Weather.js</code>文件现在应该更新如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="4717" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">现在，保存并测试结果。</p><p id="91a3" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">搜索以“云”或“多云”作为描述的城市。在您的控制台中，您应该会看到返回一个匹配项，同时显示您的关键字和天气描述数组:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/3ec8b2f88547eda8df4f0f04e3cb8a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpsRCIJasY3AG73aW91C4A.png"/></div></div></figure><p id="9987" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">非常好。这意味着它起作用了。</p><p id="d9ac" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最后，让我们继续将代码编写成一个函数，我们可以在天气应用程序中调用它。</p><p id="7776" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">然后，让我们用<strong class="lb iu"> </strong> <code class="fe ob oc od ns b">&lt;img src /&gt;</code>设置函数来返回HTTPS·JPG的云彩图像。<strong class="lb iu"> </strong>每当API数据包含云的匹配关键字时，该函数将渲染云的图像。</p><p id="3b4a" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated"><code class="fe ob oc od ns b">Weather.js</code>现在应该更新为以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="f9ca" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在我们的应用程序中，保存并再次搜索<em class="oh">描述中有云的城市</em>，这将产生以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/a949d1e77db13599c33d6f8c23f5f7d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwDb_L1hl8ThMGFHTuOYvA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自由云纹理</p></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="7e24" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="c294" class="pw-post-body-paragraph lw lx it lb b lc ni ju ly le nj jx lz lg nk mb mc li nl me mf lk nm mh mi lm im bi translated">这就是了。我们的应用程序不仅向世界上任何城市的用户发送更新的天气数据，还根据接收到的数据返回媒体内容。</p><p id="b8b7" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">通过这种方式，我们将功能与创造性体验联系起来，增强了整体独特的用户体验。</p><p id="b83b" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">但这仅仅是开始。例如，如果您想在描述阳光充足时呈现一幅阳光明媚的图片，请考虑如何修改和实现代码来实现这一点。这甚至可以成为你完成后的练习。</p><p id="2e6f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">这里的要点不仅仅是构建一个从地面开始的天气应用程序，而是通过结合技能和深思熟虑的愿景来实现一个人可以从地面爬多高的潜力。</p><p id="2710" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">最重要的是，能走到这一步做得很好。</p><p id="38db" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">就是这样。请在顶部找到完整视频教程和GitHub资源库的源链接，以获得更广泛的文档。</p><p id="e042" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">如果您还有任何问题，请查看下面的其他资源和/或随时给我留言或评论。</p><p id="d1ad" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">感谢您的阅读，我希望您能从中受益！</p><div class="ot ou gp gr ov ow"><a href="https://reactjs.org/docs/hooks-intro.html" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">介绍钩子-反应</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">钩子是React 16.8中的新增功能。它们允许您使用状态和其他React特性，而无需编写类。这个…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">reactjs.org</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk ks ow"/></div></div></a></div><div class="ot ou gp gr ov ow"><a href="https://openweathermap.org/api" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">天气API</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">我们将气象服务和卫星图像结合在一个简单快捷的农业API中。卫星图像…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">openweathermap.org</p></div></div></div></a></div></div></div>    
</body>
</html>