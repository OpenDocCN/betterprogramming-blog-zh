<html>
<head>
<title>Getting Started With Spring GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring GraphQL入门</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/getting-started-with-spring-graphql-8e53bb1acd2c?source=collection_archive---------14-----------------------#2022-05-27">https://betterprogramming.pub/getting-started-with-spring-graphql-8e53bb1acd2c?source=collection_archive---------14-----------------------#2022-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3895" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Spring遇见GraphQL</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f49671971747eb4b610b35e1018be8a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-MO-eUZiEzpsvEFOLNbWFQ.png"/></div></div></figure><p id="0a75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文是在Spring应用程序中使用GraphQL的第一步。</p><p id="3c35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但首先，让我们了解一下GraphQL。根据Red Hat的说法，GraphQL是一种查询语言和应用程序编程接口(API)的服务器端运行时，专注于只为客户端提供他们需要的信息。</p><p id="1d49" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">GraphQL的创建目标是使API快速、通用且对开发人员友好。它甚至可以在GraphiQL集成开发环境(IDE)中使用。GraphQL是REST的一个替代方案，它允许开发人员创建查询，在单个API调用中从各种来源提取数据。</p><p id="cea5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，GraphQL允许API管理员在不影响现有查询的情况下添加或删除字段。开发人员可以使用他们选择的任何技术来创建API，GraphQL定义将确保它们为客户一致地工作。</p><h1 id="d01b" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">项目理念</h1><p id="23ef" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们将构建的项目是一个简单的学校/学生find all endpoint——只是这次使用GraphQL，它允许我们更改和变异我们的响应数据结构。</p><p id="0bff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">学生将有一个id，姓名，电子邮件和学校，每个学校都有一个id和一个名称。</p><p id="357f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">学生实体</strong></p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="63af" class="mp lo iq ml b gy mq mr l ms mt">@Entity<br/>@Data<br/>@NoArgsConstructor<br/>public class Student {<br/><br/>    @Id<br/>    @GeneratedValue(strategy = GenerationType.SEQUENCE)<br/>    private Long id;<br/>    private String name;<br/>    private String email;<br/><br/>    // Lazy fetch to avoid having the infinite loop<br/>    @ManyToOne(fetch = FetchType.LAZY)<br/>    private School school;<br/><br/><br/>    public Student(String name, String email, School school) {<br/>        this.name = name;<br/>        this.email = email;<br/>        this.school = school;<br/>    }<br/>}</span></pre><p id="ff53" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">学生资源库</strong></p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="aa93" class="mp lo iq ml b gy mq mr l ms mt">@Repository<br/>public interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {}</span></pre><p id="3c83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">学校实体</strong></p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="cbf1" class="mp lo iq ml b gy mq mr l ms mt">@Entity<br/>@Data<br/>@NoArgsConstructor<br/>public class School {<br/><br/>    @Id<br/>    @GeneratedValue(strategy = GenerationType.SEQUENCE)<br/>    private Long id;<br/>    private String name;<br/>    @OneToMany<br/>    private List&lt;Student&gt; students;<br/><br/><br/>    public School(String name) {<br/>        this.name = name;<br/>    }<br/><br/>}</span></pre><p id="3bcc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">学校知识库</strong></p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="b181" class="mp lo iq ml b gy mq mr l ms mt">@Repository<br/>public interface SchoolRepository extends JpaRepository&lt;School, Long&gt; {}</span></pre><p id="fe2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们用一个简单的<code class="fe mu mv mw ml b">findAll</code>端点为学生和学校创建了控制器，从学生的:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="effd" class="mp lo iq ml b gy mq mr l ms mt">@Controller<br/>@AllArgsConstructor<br/>public class StudentController {</span><span id="12cf" class="mp lo iq ml b gy mx mr l ms mt">    StudentRepository studentRepository;<br/><br/>    @QueryMapping<br/>    List&lt;Student&gt; students(){<br/>        return studentRepository.findAll();<br/>    }<br/>    <br/>}</span></pre><p id="b2a9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">学校控制器将类似于学生的:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="35a1" class="mp lo iq ml b gy mq mr l ms mt">@Controller<br/>@AllArgsConstructor<br/>public class SchoolController {<br/><br/>    SchoolRepository schoolRepository;<br/><br/>    @QueryMapping<br/>    List&lt;School&gt; schools(){<br/>        return schoolRepository.findAll();<br/>    }<br/>}</span></pre><p id="6a5e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的主类中，我们保存了一组演示数据，我们接下来会看到:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="2873" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，我们需要设置我们的GraphQL模式，在<code class="fe mu mv mw ml b">resources</code>文件夹中我们创建了另一个名为<code class="fe mu mv mw ml b">graphql</code>的文件，其中包含一个名为<code class="fe mu mv mw ml b">schema.graphqls</code> <em class="na"> ( </em> <code class="fe mu mv mw ml b">resources&gt;graphql&gt;schema.graphqls</code> <em class="na">)的文件。</em></p><p id="15ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该模式应该如下所示:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="7124" class="mp lo iq ml b gy mq mr l ms mt">type Query {<br/>    students:[Student]<br/>    schools:[School]<br/>}<br/><br/>type Student {<br/>    id: ID!<br/>    name: String!<br/>    email: String!<br/>    school: School!<br/>}<br/><br/>type School{<br/>    id: ID!<br/>    name: String!<br/>}</span></pre><p id="aff4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">终于到结果了！可以使用<a class="ae nb" href="http://localhost:8080/graphiql" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/GraphiQL</a>上的graphi QL接口。</p><p id="5125" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们尝试检索只显示姓名的学生列表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/a1c867251b8234d2f6e234346f20e0e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aAyny-uXaIMA5wc-xYJzIg.png"/></div></div></figure><p id="fc54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们按id、姓名和电子邮件对他们进行分类:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/df169a5a0ab51c84c186a4802a00f72a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mbk283SqbBtx34AGsg9cBw.png"/></div></div></figure><p id="97e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们将他们的学校添加到结果中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/ef09fbf6dae027ef956b9c9f7424e435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AT1u-CMh-WHWELlZKmQrjQ.png"/></div></div></figure><p id="880b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我们可以检索学校:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/d378ac8567eb2fad6f9c988a21d2cd2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jm5PTFzcglJ4XHRLUffCtQ.png"/></div></div></figure><p id="d166" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，我们可以用相同的查询检索<code class="fe mu mv mw ml b">Students</code>和学校:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/680d10178a62b1c6dbe2a566693a681a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBgtqSN_jqtU0U187_ZBuQ.png"/></div></div></figure><h1 id="3dd8" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">最后</h1><p id="b7cf" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">由于其结果操作，GraphQL对任何项目都是一个显著的好处；这只是在Spring保护伞下使用GraphQL的第一步！</p><p id="27d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请在我的GitHub库<a class="ae nb" href="https://github.com/xrio/spring-graphql" rel="noopener ugc nofollow" target="_blank">这里</a>找到源代码。</p></div></div>    
</body>
</html>