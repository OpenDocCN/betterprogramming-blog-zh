<html>
<head>
<title>10 Python Tricks and Scripts for Strings Transformation and Decomposing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">字符串转换和分解的10个Python技巧和脚本</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10-python-tricks-and-scripts-for-strings-transformation-and-decomposing-e82ecac0a4d0?source=collection_archive---------7-----------------------#2020-03-03">https://betterprogramming.pub/10-python-tricks-and-scripts-for-strings-transformation-and-decomposing-e82ecac0a4d0?source=collection_archive---------7-----------------------#2020-03-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="052f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">像真正的Pythonista一样解析字符串</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/53d2ccaefe62c5c1084a973e42489bc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A0i0Il4bBbbpyHF7"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@peterneumann?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">彼得·诺伊曼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="28b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我上一篇关于数据结构和容器可接受的Python习惯用法的文章非常成功，所以我决定为字符串解析和标记化准备一个脚本汇编。</p><p id="f9a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有人能否认文本分析和字符串解析的重要性。它应用于几乎每个软件开发方向，从URL解析到自然语言分析。我不会涵盖这种方法的所有可能的应用——那远远超出了one piece的范围。但是我将介绍一些在Python程序中处理字符串和标记的基本技术(因为它是我最喜欢的语言之一)。</p><p id="ad03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些小脚本应该被视为更大的文本分析和数据预处理应用程序的构建块。基础知识对进一步发展非常重要。</p><p id="eb69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，我们去列表吧！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="eed4" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">1.翻译和替换</h2><p id="11f9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">第一种情况是从文本中替换或删除一些符号或一些子串。Python在<code class="fe na nb nc nd b">string</code>模块中有内置函数，这些函数执行期望的任务。</p><p id="6639" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">translate()</code>使用符号映射删除或更改特定符号:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="e13b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">replace()</code>正如它的名字所暗示的那样工作——通过将一个子串更改为想要的子串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="7564" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">2.字符串消毒</h2><p id="8525" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在，我们可以将前面语句中的知识应用于字符串净化。在数据清理期间，这是数据科学项目中要求最高的过程之一——一个很好的例子是带有空白符号和换行符的原始文本。这里有一个简单的脚本来清理这样的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="3469" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">3.以你想要的方式分裂</h2><p id="9e1d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">文本分析需要不同的指标，如字数、符号数、平均句子长度。为了计算这些值，我们需要准备好文本——清理和分割。幸运的是，Python有几个用于文本划分的内置函数:</p><ul class=""><li id="177f" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">空白符号的默认拆分:</li></ul><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="91d4" class="mc md it nd b gy nt nu l nv nw">test_string.split()</span><span id="438d" class="mc md it nd b gy nx nu l nv nw">Out[1]: ['The', 'quick', 'brown', 'fox', 'jumps', 'over', 'the', 'lazy', 'dog']</span></pre><ul class=""><li id="32c9" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">按确定的令牌数拆分:</li></ul><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="90e0" class="mc md it nd b gy nt nu l nv nw">test_string.split(' ', 2)</span><span id="bc31" class="mc md it nd b gy nx nu l nv nw">Out[2]: ['The', 'quick', 'brown fox jumps over the lazy dog']</span></pre><ul class=""><li id="7744" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">字符串的反向拆分:</li></ul><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="9c37" class="mc md it nd b gy nt nu l nv nw">test_string.rsplit(' ', 2)</span><span id="6a00" class="mc md it nd b gy nx nu l nv nw">Out[3]: ['The quick brown fox jumps over the', 'lazy', 'dog']</span></pre><ul class=""><li id="8670" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">按自定义符号拆分(当然，所有函数都支持此功能):</li></ul><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="bc43" class="mc md it nd b gy nt nu l nv nw">test_string.split('e')</span><span id="13fc" class="mc md it nd b gy nx nu l nv nw">Out[4]: ['Th', ' quick brown fox jumps ov', 'r the lazy dog']</span></pre><ul class=""><li id="8630" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">将字符串拆分成所需的标记，前后都有标记:</li></ul><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="d15d" class="mc md it nd b gy nt nu l nv nw">test_string.partition('fox')</span><span id="744a" class="mc md it nd b gy nx nu l nv nw">Out[5]: ('The quick brown ', 'fox', ' jumps over the lazy dog')</span></pre><h2 id="3951" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">4.剥离和填充</h2><p id="e8b7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">另一个重要的特性是能够从字符串中删除多余的前导和尾随符号。为此，我们有<code class="fe na nb nc nd b">strip()</code>功能系列:</p><ul class=""><li id="b57f" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">默认情况下，剪切空格。</li><li id="aa93" class="ng nh it lb b lc ny lf nz li oa lm ob lq oc lu nl nm nn no bi translated">从左侧或右侧剪切空格。</li><li id="7727" class="ng nh it lb b lc ny lf nz li oa lm ob lq oc lu nl nm nn no bi translated">剪切自定义符号。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="ea8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，还有一个用前导零填充数字的有用特性:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="6454" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">5.解构和再造</h2><p id="7c79" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">文本生成需要从单词字典中构造句子和短语。作为一个过程，这是字符串拆分的逆过程。Python允许我们使用内置的字符串方法<code class="fe na nb nc nd b">join()</code>，将单词连接回句子中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="5fea" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">6.删除标点符号</h2><p id="2632" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是文本清理工具集的另一个用例。Python的<code class="fe na nb nc nd b">string</code>模块<a class="ae ky" href="https://docs.python.org/3/library/string.html" rel="noopener ugc nofollow" target="_blank">有很多内置的常数</a>和一组独立的符号。<code class="fe na nb nc nd b">string.punctuation</code>是其中之一，所以我们将使用它进行字符串消毒。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="ad5c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">7.处理案例</h2><p id="914a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">文本格式化是每个数据科学家的痛苦。没有连续格的词和不同格式的句子，在数据清理时造成了很大的麻烦。但是，对于这些任务，还有其他Python函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="94d4" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">8.正则表达式的世界</h2><p id="7cc3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">有时文本清理不容易由确定的符号或短语来提供。我们需要使用一些模式来代替。它是正则表达式使用的完美字段，也是合适的Python模块。</p><p id="d088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不会讨论正则表达式的所有功能，但是我们将关注它的应用——例如，数据分割和替换。是的，上面描述了这些任务，但是这里有一个更强大的替代方法。</p><p id="978d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按模式分割:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="adf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替换为模式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="a954" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">9.对字符串进行标记</h2><p id="b306" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">是时候收集我们之前学到的所有技巧，并将其应用于真正的标记化了。但是，我们不会重复所有的代码。这里有一个使用<code class="fe na nb nc nd b">pandas</code>的很酷的替代例子。在我们的例子中，我们应该清除字符串中的额外符号，转换成单个大小写，并将其拆分成标记。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="d9ab" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">10.(奖励)找到子串</h2><p id="74c7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在任何清洁工作之前，我们必须确定我们是否真的需要清洁。在大多数情况下，问题会缩小到在文本中搜索某个符号或短语。Python为我们的目的提供了很多函数。</p><p id="4cdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尾随子字符串:</p><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="0b5e" class="mc md it nd b gy nt nu l nv nw">test_string.endswith('dog')</span><span id="c063" class="mc md it nd b gy nx nu l nv nw">Out[1]: True</span></pre><p id="8ed3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前导子字符串:</p><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="1326" class="mc md it nd b gy nt nu l nv nw">test_string.startswith('dog')</span><span id="165a" class="mc md it nd b gy nx nu l nv nw">Out[2]: False</span></pre><p id="3dc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">常规检查:</p><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="81f9" class="mc md it nd b gy nt nu l nv nw">'fox' <strong class="nd iu">in</strong> test_string</span><span id="4b74" class="mc md it nd b gy nx nu l nv nw">Out[3]: True</span></pre><p id="abfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">获取子字符串的索引:</p><pre class="kj kk kl km gt np nd nq nr aw ns bi"><span id="d650" class="mc md it nd b gy nt nu l nv nw">test_string.find('fox')</span><span id="a393" class="mc md it nd b gy nx nu l nv nw">Out[4]: 16</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a835" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，任何任务都可以用多种方式解决，尤其是当我们谈论Python的时候。但是，我认为我对字符串解析的理解会对你有用。</p><p id="e2a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在我的Github上找到带有工作代码的Jupyter笔记本:</p><div class="od oe gp gr of og"><a href="https://github.com/Midvel/medium_jupyter_notes/blob/master/string_manip/string-tokenization-parsing.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">中级/中等_jupyter_notes</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">permalink dissolve GitHub是4000多万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">github.com</p></div></div><div class="op l"><div class="oq l or os ot op ou ks og"/></div></div></a></div><p id="5b5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，请确保您没有错过我之前关于Python习惯用法的文章:</p><div class="od oe gp gr of og"><a href="https://medium.com/better-programming/10-tiny-python-idioms-for-collections-and-data-structures-2f0d2923832" rel="noopener follow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">集合和数据结构的10个小Python习惯用法</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">以最Pythonic化的方式使用容器</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">medium.com</p></div></div><div class="op l"><div class="ov l or os ot op ou ks og"/></div></div></a></div><p id="7679" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请分享你最喜欢的Python技术！</p></div></div>    
</body>
</html>