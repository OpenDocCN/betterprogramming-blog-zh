<html>
<head>
<title>Scraping Whiskey Review Data to Build a Recommendation System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抓取威士忌评论数据构建推荐系统</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/scraping-whiskey-review-data-to-build-a-recommendation-system-af6b82f31301?source=collection_archive---------13-----------------------#2019-08-23">https://betterprogramming.pub/scraping-whiskey-review-data-to-build-a-recommendation-system-af6b82f31301?source=collection_archive---------13-----------------------#2019-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a1a2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习网络抓取复杂性的有趣方式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e923ec7642e1a75eb78d963045a0ad3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mvSsJUTjiboLg18pevMkdw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">亚当·威尔森在<a class="ae ky" href="https://unsplash.com/search/photos/whiskey?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a228" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我解释了我和我的同学阿克谢(@akshay.sharma8426)、Fhel (@FhelDimaano)在纽约市熨斗学校期间建立的一个推荐系统。虽然我不会给出奇异值分解和协同过滤背后的数学细节，但我会向您展示我们构建系统的步骤。这个项目大约花了三天时间。</p><p id="9c8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章的底部有一个到我们威士忌推荐系统演示的链接。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ce4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据</h1><p id="a4b8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们从<a class="ae ky" href="https://www.whiskybase.com/" rel="noopener ugc nofollow" target="_blank">威士忌基地</a>收集数据，这是一个致力于威士忌爱好者的网站。该网站的用户可以对世界各地的威士忌进行评分，并与网站上的其他用户分享他们的评分和个人资料。</p><p id="708f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了收集数据，我们需要三个主要组件:</p><ul class=""><li id="5852" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">用户标识</li><li id="863e" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">用户评价的威士忌</li><li id="8b28" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">特定威士忌的等级</li></ul><p id="236f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">起初抓取数据似乎是一项简单的任务——只需使用<a class="ae ky" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup4 </a>从页面中提取特定的HTML标签来获取我们需要的内容。但是等等，不要这么快。当然，要找到我们需要的页面，会遇到比预期更多的障碍。我们意识到，为了让我们的脚本正常运行，我们需要能够登录到whiskeybase来访问网站上其他用户的个人资料。</p><p id="5ac4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个任务的完美解决方案是一个名为<a class="ae ky" href="https://www.seleniumhq.org/docs/" rel="noopener ugc nofollow" target="_blank"> Selenium </a>的包(我用过的最酷的包之一)。Selenium是一个web自动化工具，可以用来模拟人类与web页面的交互。因此，我们在脚本中添加了这一点，以允许自动登录功能。</p><p id="a70c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，随着Selenium的工作，我们能够成功地收集所需的数据。我们最终从世界上排名前1000的威士忌中收集用户评论数据，以及whiskeybase新发布的威士忌列表。</p><p id="47a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们的刮擦完成时，我们得到了来自:</p><ul class=""><li id="e839" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">1，223个独立用户</li><li id="809a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">1092种独特的威士忌</li><li id="1056" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">41，018总评分</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="08d3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">收视率分布</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6e6f4863774bc19e74b4f0fea30810f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/0*UAYkUNomOCoHtX4H.png"/></div></figure><p id="a946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如人们所猜测的，在我们的数据集中，不同威士忌的平均评分相当高。这主要是因为我们使用的威士忌来自前1000名以及一些新发布的威士忌。因为我们有大量的收视率(41K+)，这应该不是太大的问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3d69" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">评论的分布</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/d8a711075f9c269bc5c68980ad0c0ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/0*RmH3eZ1hHCQBkBVZ.png"/></div></figure><p id="0df5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对我们有利的是，网站上的用户相当活跃。你可以从上面的图表中看到，相当多的用户甚至在他们的个人资料上有超过100个评分，有一个评论者有400+。为了适应我们的模型，我们删除了所有评论少于五条的用户。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8282" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">建模</h1><p id="2022" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在决定最终使用哪个模型时，我们比较了<a class="ae ky" href="http://surpriselib.com/" rel="noopener ugc nofollow" target="_blank"> Surprise </a>库中不同模型的性能。这些包括奇异值分解，KNN基本，KNN基线。三个模型的结果非常接近，RMSE大约为2.378。总的来说，这是一个不错的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/f86fa8a1c8c9f6da5862acb1dd6a98d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rg34hraZKf19iyg6.png"/></div></div></figure><p id="1b02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们最初测试的SVD超参数是n_factors=100，n_epochs=20，reg_all=0.02。这产生了2.3796的误差度量RMSE。在GridSearch的多次迭代中调整超参数后，我们的最终模型是SVD，最终误差度量RMSE = 2.3076。我们找到的最佳参数是n_factors=40，reg_all=0.1，n_epochs=40。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ee34" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用户建议演示</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="b8ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上面的GIF所示，我们的推荐系统提示用户他们想要多少推荐，并询问他们的初始预算。之后，用户被要求从1到100给五种威士忌打分。一旦用户对五种威士忌进行了评级，模型就会根据他们的数据进行重新调整，我们会输出对新用户的推荐。向用户提供威士忌的名称、价格和可以买到它的URL。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ce79" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="c9e4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">总的来说，这个项目是一个学习网络抓取复杂性的好方法。每个网站都不一样，总有新的挑战需要克服。我们的最终结果非常好，我们对它们非常满意。我想说这是我在熨斗工作期间参与的最有趣的项目之一，我很高兴我们能够很好地合作以实现我们的目标。</p><p id="4310" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对进一步推进这个项目有什么建议吗？我很想收到你的来信！在<a class="ae ky" href="https://github.com/AustinKrause/Flatiron_Mod_4_Recommendation_System" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上查看源代码。</p><p id="80e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干杯。</p></div></div>    
</body>
</html>