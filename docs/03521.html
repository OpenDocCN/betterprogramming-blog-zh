<html>
<head>
<title>Understanding the Flow of a React + Redux Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解React + Redux应用程序的流程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understanding-the-flow-of-a-react-redux-application-4dc8c8da08c7?source=collection_archive---------2-----------------------#2020-02-15">https://betterprogramming.pub/understanding-the-flow-of-a-react-redux-application-4dc8c8da08c7?source=collection_archive---------2-----------------------#2020-02-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e91a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于组件、动作创建者、缩减者、存储、状态等等的推理</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7cd446561605801679e4375742929041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gF6YfHZ_w1ZB0_pd4UzJEg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@lurm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿德里安·匡威</a>在<a class="ae ky" href="https://unsplash.com/s/photos/flow?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="eaf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>是目前最流行的构建用户界面的JavaScript库，<a class="ae ky" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>(与<a class="ae ky" href="https://react-redux.js.org/" rel="noopener ugc nofollow" target="_blank"> React Redux </a>配合使用)是React应用最广泛使用的状态管理库。</p><p id="2d25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是一名使用React的前端工程师，理解这样的应用程序中的数据流是至关重要的。</p><p id="0f7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一起走过它！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1838" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">React + Redux应用程序的核心部分</h1><p id="e45e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">组成React + Redux应用程序的几个重要概念是理解这些概念所必需的:</p><h2 id="aaf0" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">Redux商店</h2><p id="948a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><em class="nl"> Redux store </em> <strong class="lb iu"> </strong>是保存应用程序状态的对象。存储是数据的真实来源，应用程序中通过<code class="fe nm nn no np b">connect</code>方法连接到它的任何组件都可以使用它。</p><h2 id="8099" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">成分</h2><p id="67c9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">组件<strong class="lb iu"> </strong>是组成UI的构建块。组件可以小到一个按钮或一个头像，也可以大到一个容器或一个页面(甚至是包含整个应用程序的顶级组件)。</p><p id="aa8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">连接到商店的组件能够读取应用程序的全局状态，还能触发动作创建器，我们将在接下来讨论。</p><h2 id="3ac4" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">动作创建者</h2><p id="0072" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">动作创建者是返回一个名为<code class="fe nm nn no np b">action</code>的普通对象的函数。动作创建器通常在用户与UI交互时(例如，当单击按钮时)或在组件生命周期的特定时刻(例如，当组件挂载时)被调用。</p><p id="bf28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，动作创建器是同步的，但是您也可以使用Redux中间件，如<a class="ae ky" href="https://github.com/reduxjs/redux-thunk" rel="noopener ugc nofollow" target="_blank"> Redux Thunk </a>或<a class="ae ky" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux Saga </a>来处理异步动作创建器。现在我们只关注同步代码。</p><h2 id="b4e2" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">行动</h2><p id="fc48" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如上所述，动作是简单的对象。动作有一个<code class="fe nm nn no np b">type</code>属性，它只是一个标识动作的字符串常量。</p><p id="efb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">动作也可以包含任何其他数据，因此您可以包含一个<code class="fe nm nn no np b">payload</code>属性或一个<code class="fe nm nn no np b">userId</code>属性或任何您喜欢的属性。</p><h2 id="064b" class="mz md it bd me na nb dn mi nc nd dp mm li ne nf mo lm ng nh mq lq ni nj ms nk bi translated">还原剂</h2><p id="2673" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Reducers是纯粹的函数，它接受先前的状态和动作，然后返回状态的更新副本。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b1b1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">React + Redux应用程序的流程</h1><p id="59ea" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在你已经知道了React + Redux应用程序的重要部分，一个图表有助于可视化React + Redux应用程序的流程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f91fd11f768d0e572284cce7ced9a7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*2Ga4iOJs58AbXBw9c43yjw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React+Redux应用流程</p></figure><p id="445c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，这里的流动是单向的:它只向一个方向流动。这对于思考你的应用程序是如何工作的，以及当你需要做一些故障排除来追踪一个讨厌的bug时，非常有帮助。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="403c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">示例工作流程</h1><p id="ccee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们看看典型的工作流是什么样子的。</p><p id="d656" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您有一个非常简单的计数器应用程序。页面上有一个按钮，您可以单击它来增加计数器，计数器的当前值也会显示在页面上。</p><p id="6f78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">工作流程如下所示:</p><ol class=""><li id="460b" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated">计数器值保存在<em class="nl">存储器</em>中。</li><li id="93d8" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">按钮<em class="nl">组件</em>连接到<em class="nl">存储</em>以便当用户点击按钮时，<code class="fe nm nn no np b">onClick</code>处理器可以触发<em class="nl">动作创建器</em>，这是一个简单的函数，我们将命名为<code class="fe nm nn no np b">incrementCounter</code>。</li><li id="3908" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">这个<code class="fe nm nn no np b">incrementCounter</code> <em class="nl">动作创建者</em>然后返回一个<em class="nl">动作</em>，是一个看起来像<code class="fe nm nn no np b">{ type: INCREMENT_COUNTER }</code>的普通对象。</li><li id="f105" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">然后<em class="nl">减速器</em>处理该动作。reducer知道，当它接收到类型为<code class="fe nm nn no np b">INCREMENT_COUNTER</code>的动作时，它需要将状态中的<code class="fe nm nn no np b">counter</code>属性的值加1。</li><li id="321f" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">然后更新<em class="nl">存储器</em>中的状态，并且计数器的值从<code class="fe nm nn no np b">0</code>变为<code class="fe nm nn no np b">1</code>。</li><li id="40dd" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">UI中的计数器显示连接到<em class="nl">存储</em>，因此当状态改变时，UI会更新以反映这些改变。因此，用户现在可以在屏幕上看到值<code class="fe nm nn no np b">1</code>。</li></ol><p id="7b7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果用户再次点击按钮，整个过程将会重复，将计数器值增加到<code class="fe nm nn no np b">2</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6967" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">演示代码</h1><p id="b50e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这个<a class="ae ky" href="https://github.com/thawkin3/redux-example" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中可以找到一个简单的React + Redux app的例子。你也可以在这里查看<a class="ae ky" href="http://tylerhawkins.info/redux-example/build/" rel="noopener ugc nofollow" target="_blank">现场演示</a>。</p><p id="299d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>