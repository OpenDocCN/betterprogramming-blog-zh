<html>
<head>
<title>How To Build a CI/CD Pipeline in AWS in 5 Minutes and 58 Seconds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在5分58秒内在AWS中构建CI/CD管道</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-a-ci-cd-pipeline-in-aws-in-5-minutes-and-58-seconds-4de156477042?source=collection_archive---------2-----------------------#2019-08-23">https://betterprogramming.pub/how-to-build-a-ci-cd-pipeline-in-aws-in-5-minutes-and-58-seconds-4de156477042?source=collection_archive---------2-----------------------#2019-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="161f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">是的，真的。我计时了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6a709a833990b95d645f1c74962a14c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GgoulMDXQJnufUl5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@bigmike48?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克·奥斯丁</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="defb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你和我一样，你不会再想把时间花在与DevOps程序的斗争上了。获得要构建和部署的代码是一个需要解决的问题，对吗？没错。</p><p id="5860" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS已经确定了CI/CD。为了清楚起见，<em class="lv"> CI/CD </em>代表<em class="lv">持续集成，持续交付</em>。简单地说，如果您有一个CI/CD管道，无论何时您将代码推送到您的存储库，它都会自动编译并在您的开发环境中安装您的软件。听起来不错吧？确实是。</p><p id="8703" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看如何在不到六分钟的时间内从头开始构建一个完全托管的管道。我说的是在这段时间内在云中建立和部署存储库和管道<strong class="lb iu">和</strong>。让我们开始吧。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ee06" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">先决条件</h1><p id="755f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">该管道使用SAM模板来构建和部署无服务器应用程序。在我们开始之前，您需要安装<a class="ae ky" href="https://aws.amazon.com/cli/" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a>和<a class="ae ky" href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html" rel="noopener ugc nofollow" target="_blank"> SAM CLI </a>，并为您的AWS用户帐户提供Git凭证。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7592" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">创建存储库</h1><p id="5238" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在这个解决方案中，我们将使用完整的AWS，因此对于我们的存储库管理，我们将使用<a class="ae ky" href="https://aws.amazon.com/codecommit/" rel="noopener ugc nofollow" target="_blank"> CodeCommit </a>。CodeCommit是一个基于Git的存储库管理服务。因此，第一步，登录您的AWS帐户，选择一个地区，并打开CodeCommit控制台。</p><p id="4a9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<code class="fe na nb nc nd b">Create Repository</code>按钮，给你的新回购命名。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/1e8b325ab8ef2ff28953d3550cfcfdad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P_6B9nIzHCWdY9whRH-nKA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="29c0" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">初始提交</h1><p id="54db" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在您的机器上，导航到您存储工作区的目录，并下拉您刚刚创建的空存储库。CodeCommit为Git提供了HTTPS和SSH选项，所以使用您喜欢的选项。</p><p id="1bd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要添加HelloWorld lambda函数。SAM模板可以帮助我们做到这一点:</p><pre class="kj kk kl km gt nf nd ng nh aw ni bi"><span id="b3ba" class="nj me it nd b gy nk nl l nm nn">sam init --name my-cicd-app --runtime nodejs10.x</span></pre><p id="fee4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将为我们生成一个基本的Hello World lambda函数，用NodeJS 10编写。然而，我们的管道缺少一样东西:buildspec.yml文件。对于我们的快速管道，我们将只使用一个最小的文件。您可以根据需要向该文件添加或多或少的内容。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="4f6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将该文件添加到项目的根目录，提交并推送到master。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="028d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">创建S3存储桶</h1><p id="ac33" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您的存储库将需要一个地方来存储构建工件。我们将使用亚马逊S3的存储服务。我们在<code class="fe na nb nc nd b">buildspec.yml</code>中使用的build命令将为我们自动删除这个桶中的所有工件。</p><p id="3b68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到S3控制台，点击<code class="fe na nb nc nd b">Create Bucket</code>。为您的存储桶命名，但是请注意，S3存储桶名称需要是全局唯一的。<em class="lv"> </em>这意味着世界上可能没有其他人有和你同名的桶。一般来说，我喜欢把我的桶命名为<code class="fe na nb nc nd b">(project name)-artifacts</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/9234c8237e3ac2c2acfeeca6c0339c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jOzOr_8qeKZnrM_7K4mEYA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="edf9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">创建管道角色</h1><p id="c67c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">AWS中的一切都是通过IAM服务由角色管理的。在我们建立管道之前，我们需要建立一个角色，它将允许我们的管道执行它所需要的一切。</p><p id="d65a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到IAM控制台，点击导航窗格上的<code class="fe na nb nc nd b">Roles</code>。点击<code class="fe na nb nc nd b">Create role</code>按钮，调出新的角色画面。</p><p id="f536" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为“可信实体的类型”选择<code class="fe na nb nc nd b">AWS Service</code> <strong class="lb iu"> </strong>，为“将使用角色<em class="lv">的服务”选择<code class="fe na nb nc nd b">CloudFormation</code></em> <strong class="lb iu"> <em class="lv"> </em> </strong>点击<code class="fe na nb nc nd b">Next: Permissions</code>继续。</p><p id="63d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于您的管道将创建任意数量的资源，并且需要在AWS的几乎每个领域执行任务，我们需要赋予这个角色<code class="fe na nb nc nd b">AdministratorAccess</code>。选择AdministratorAccess权限旁边的复选框，并点击<code class="fe na nb nc nd b">Next: Tags</code>。</p><p id="5987" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你愿意，你可以添加标签，但是我们的管道现在不需要它们，所以点击<code class="fe na nb nc nd b">Next: Review</code>。</p><p id="e472" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，给它一个对你有意义的名字。这个角色可以在所有管道中重用，所以我喜欢给它一个通用的名字，比如<code class="fe na nb nc nd b">CloudFormationAdminRole</code>。一旦你命名了你的角色，点击<code class="fe na nb nc nd b">Create Role</code>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2efc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">建造管道</h1><p id="0a63" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">基本的CI/CD管道由三部分组成:</p><ul class=""><li id="2c57" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated">源代码控制</li><li id="9fb7" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">建设</li><li id="b073" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">部署</li></ul><p id="30d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经用CodeCommit设置了源代码控制，但是我们仍然需要配置构建和部署部分。幸运的是，<a class="ae ky" href="https://aws.amazon.com/codepipeline/" rel="noopener ugc nofollow" target="_blank"> AWS CodePipeline </a>将带我们完成组装，并为我们连接它们。</p><p id="ebfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到AWS中的代码管道控制台并点击<code class="fe na nb nc nd b">Create Pipeline</code>。</p><p id="6cb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为您的管道命名。我喜欢使用我的存储库名称来方便地跟踪事物。请注意，角色名称字段将在您键入名称时填写。点击<code class="fe na nb nc nd b">Next</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/fd839c459161fd7268abed0820b49442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_U_MKb1o65vJ6rB_2ACEUg.png"/></div></div></figure><p id="a057" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您已经创建了存储库并完成了初始提交，因此下一个屏幕将很容易。</p><ul class=""><li id="3445" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><strong class="lb iu">源提供者:</strong> AWS代码提交</li><li id="7e6b" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">存储库名称:</strong>您的存储库名称(对于本教程为my-cicd-app)</li><li id="fee7" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">分行名称:</strong>主</li></ul><p id="1dea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将CloudWatch事件作为检测选项。每当对您的存储库进行推送时，它都会触发管道运行。另一个选项将不时地轮询以查看是否发生了变化。点击<code class="fe na nb nc nd b">Next</code>。</p><p id="58c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们需要为我们的项目建立一个构建。在构建提供者<em class="lv">中选择<code class="fe na nb nc nd b">AWS CodeBuild</code>。</em>下一步，点击<code class="fe na nb nc nd b">Create Project</code> <strong class="lb iu"> </strong>按钮。这将打开一个对话框，引导我们创建一个新的CodeBuild项目。</p><p id="105d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该对话框中有许多字段，所以我将只包括您需要配置的字段。</p><ul class=""><li id="3b13" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><strong class="lb iu">项目配置&gt;项目名称:</strong>您的构建的名称。我遵循命名惯例“(项目名)-构建”</li><li id="ac7d" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">环境&gt;操作系统:</strong>亚马逊Linux 2</li><li id="8d28" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">环境&gt;运行时:</strong>标准</li><li id="48d5" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">环境&gt;图片:</strong>AWS/codebuild/amazonlinux 2-x86 _ 64-标准:1.0</li><li id="e5a5" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">环境&gt;附加配置&gt;环境变量&gt;名称:</strong>构建_输出_存储桶</li><li id="d142" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">环境&gt;附加配置&gt;环境变量&gt;值:</strong>我们S3桶的名字。我们的例子是<code class="fe na nb nc nd b">my-cicd-app-artifacts</code></li></ul><p id="f7fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保留所有其他字段的默认值，然后点击<code class="fe na nb nc nd b">Continue to CodePipeline</code>。这将关闭对话窗口并返回到<em class="lv">添加构建阶段</em>屏幕。</p><p id="7fc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的构建现在应该被填充到<em class="lv">项目名称</em>字段中。点击<code class="fe na nb nc nd b">Next</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/229c84e8f1f74ee700a83c7092273007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fXD7tk4ATSuZChbL1KMEqw.png"/></div></div></figure><p id="c85a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将配置部署阶段。在<em class="lv">部署提供者</em>下拉菜单中选择<code class="fe na nb nc nd b">AWS CloudFormation</code>。按如下方式填写其他字段:</p><ul class=""><li id="912e" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><strong class="lb iu">动作模式:</strong>创建或更新堆栈</li><li id="df0e" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">栈名:</strong>使用项目名。我们的例子是<code class="fe na nb nc nd b">my-cicd-app</code></li><li id="ae78" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">工件名称:</strong> BuildArtifact</li><li id="c632" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">文件名:</strong> packaged.yaml(从我们的buildspec.yml生成)</li><li id="5bfd" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">功能:</strong>选择功能_IAM和功能_自动_扩展</li><li id="6012" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">角色名称:</strong>使用我们为管道创建的角色。我们的例子是CloudFormationAdminRole</li></ul><p id="777c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<code class="fe na nb nc nd b">Next</code>进入评论页面。点击<code class="fe na nb nc nd b">Create pipeline</code>来触发AWS构建所有的部分并将它们粘在一起。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="81c9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">更新生成权限</h1><p id="2bc3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如前所述，AWS中的一切都是由角色和权限驱动的。对于我们的管道，CodeBuild将需要权限来将我们的构建工件放入我们创建的S3桶中。因此，我们需要导航回IAM控制台。</p><p id="2279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建一个新的策略，该策略可以在以后的所有管道中重复使用。点击导航窗格中的<code class="fe na nb nc nd b">Policies</code> <strong class="lb iu"> </strong>并点击<code class="fe na nb nc nd b">Create Policy</code>。<strong class="lb iu"> </strong>填写以下值:</p><ul class=""><li id="4b2f" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated">服务: S3</li><li id="e5e9" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">动作&gt;写:</strong>放置对象</li><li id="49f0" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">资源:</strong>所有资源</li></ul><p id="1c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<code class="fe na nb nc nd b">Review policy</code>，将其命名为<code class="fe na nb nc nd b">AddArtifactsToS3</code> <strong class="lb iu">。</strong>打<strong class="lb iu"> </strong> <code class="fe na nb nc nd b">Create policy</code> <strong class="lb iu">。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/e517f3677fb8d3a6b33e9b96dafbd6e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ykg8i1WFfsqSbfXi4pUong.png"/></div></div></figure><p id="68aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在导航窗格中点击<code class="fe na nb nc nd b">Roles</code>并搜索我们的CodeBuild角色。应该命名为“codebuild-(项目名)-service-role。”单击角色进行编辑。</p><p id="a9f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要将新策略附加到CodeBuild角色，因此点击<code class="fe na nb nc nd b">Attach Policies</code> <strong class="lb iu"> </strong>并搜索<code class="fe na nb nc nd b">AddArtifactsToS3</code>。点击<code class="fe na nb nc nd b">Attach Policy</code> <strong class="lb iu"> </strong>继续。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7e32" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">运行管道</h1><p id="109b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">当我们为CodeBuild设置写入S3的权限时，管道可能会运行并失败。因此，现在我们希望触发管道再次运行，因为它拥有正确的权限。</p><p id="1415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导航到代码管道控制台，并从列表中选择您的管道。按下<strong class="lb iu">释放变化</strong>按钮，启动管道。</p><p id="96b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">整个过程现在应该运行无误。完成后，您应该已经部署了Hello World函数，并且可以访问它了！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0f0f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">尽情享受吧！</h1><p id="f7d2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">此时，您应该能够开始修改<code class="fe na nb nc nd b">buildspec</code>和模板文件来创建您自己的项目。每次推送时，资源都会自动为您部署。</p><p id="18c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以将注意力集中在真正重要的地方，即业务上。将您的时间花在创新和创造价值上，而不是与部署脚本和监控基础架构斗争。</p></div></div>    
</body>
</html>