<html>
<head>
<title>How to Build SimonSez With Notifications, SwiftUI, and Combine — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用通知、SwiftUI和Combine构建SimonSez第2部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-build-simonsez-with-notifications-swiftui-and-combine-part-2-de717b1c53d5?source=collection_archive---------25-----------------------#2020-03-30">https://betterprogramming.pub/how-to-build-simonsez-with-notifications-swiftui-and-combine-part-2-de717b1c53d5?source=collection_archive---------25-----------------------#2020-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f2d4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何构建一个简单的网络游戏的第2部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8757033536538d6b9282215119fbe364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LN_bVIJDBDK8Xf1U"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aleksdorohovich?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿列克斯·多罗霍维奇</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄。</p></figure><p id="95b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最讨厌的事情之一是阅读一篇基于iOS Y和Swift X的文章，但读到一半时却发现它已经过时了。所以预先警告:这是写在iOS 13和Swift 5上的。</p><p id="9f52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，如果你一直在关注，这就是:Swift UI的破折号。然而，在开始之前，我想感谢Majid Jabrayilov和Filip Sakel <strong class="lb iu"> </strong>帮助我编写SwiftUI代码。</p><p id="7132" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先导入SwiftUI，并组合和定义半打我们将使用的<code class="fe lv lw lx ly b">PassThroughSubjects</code>，以及表示我们在<a class="ae ky" href="https://medium.com/better-programming/how-to-build-simonsez-with-notifications-swiftui-and-combine-b143920261c3" rel="noopener">第1部分</a>中构建的类的对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="ff1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们定义一个结构实例，我们将使用它来保存我们在pickerView中显示的键值对，以及我将使用的一种字体:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="f142" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们有了主体。我知道这是很难调试，如果你打错字，所以我要小心。我们开始定义结构和我们将要使用的所有变量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="c622" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们定义应用程序的标题，以及一些<code class="fe lv lw lx ly b">PassThroughSubjects</code>和它们的动作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="561e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个定义包括当一方请求另一方玩游戏时发出的警告。接下来，我们有一个按钮，它将发布您的玩家代码并将其保存到云:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="8b62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一节中，我将定义并填充pickerView。此代码仅对其他玩家的初始选择可见:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="5c84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码定义了我们的第一个通知，并在途中发送它。接下来，我们有两个按钮，将根据轮到谁挑战或回答来切换开关:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="96a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这发布了我们的另外两个JSON对象。第一个发送需要复制的一系列按钮，而第二个发送命令来切换轮到谁领先。</p><p id="7d30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一节把我们带到这个观点的主体的结尾:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="fbce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们需要定义私有函数来激活切片，这将我们带到主体定义的末尾:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="5424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们有了<code class="fe lv lw lx ly b">Wedge</code>形状的定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="d253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">预览部分:</p><pre class="kj kk kl km gt mb ly mc md aw me bi"><span id="c0da" class="mf mg it ly b gy mh mi l mj mk">struct ContentView_Previews: PreviewProvider {<br/>static var previews: some View {<br/>ContentView()<br/>}<br/>}</span></pre></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="0eb8" class="ms mg it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="dd2c" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">这就是我们需要的:您需要安装的全部<code class="fe lv lw lx ly b">ContentView.swift</code>。此时，您肯定已经准备好尝试它了。</p></div></div>    
</body>
</html>