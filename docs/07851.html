<html>
<head>
<title>5 Reasons Why Test Automation Frameworks Tend To Fail</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试自动化框架容易失败的5个原因</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-automation-frameworks-tend-to-fail-9b282e170754?source=collection_archive---------8-----------------------#2021-02-25">https://betterprogramming.pub/why-automation-frameworks-tend-to-fail-9b282e170754?source=collection_archive---------8-----------------------#2021-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1056" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">探究测试自动化框架崩溃的最常见原因</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6a7cfb5bf81b3c8333eba897c7677f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MFsFXzYEMTnjjLDX"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">杰西·陈在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="dfcb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在过去的五年里，我有幸为许多公司维护和构建了许多自动化框架。每个框架都有自己独特的挑战和优势。有些兴旺，有些失败。</p><p id="db12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我从我的每一次自动化经历中学到了很多，无论是最佳实践还是理解要避免的模式(关于这些的更多信息，请看我关于<a class="ae kv" href="https://js.plainenglish.io/6-javascript-ui-testing-anti-patterns-you-need-to-avoid-f77f9902ef9e?sk=d51e845b0348a58c38a333e8008bbb42" rel="noopener ugc nofollow" target="_blank"> JavaScript反模式</a>的文章)。在整个过程中，我注意到了许多似乎预示着自动化失败的事件。</p><p id="f1e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是我认为工程部门在编写新的自动化框架时最常犯的错误。我已经花了时间来包括你能做什么来确保你的框架是以最好的方式构建的，以避免这些错误。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="04c2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">1.错误的东西</h1><p id="a022" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">自动化失败最常见的预测之一是无法用正确的知识或人才来服务框架。通常，缺乏技术知识与缺乏基本的框架知识相结合，会导致可维护性的彻底崩溃。</p><p id="90f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我为一家公司工作，该公司在没有正确研究如何使用框架或它能提供什么的情况下实现了自动化解决方案。该商店选择使用Cypress.io，但选择将其作为测试工具，而不是一体化自动化解决方案。他们没有使用内置的请求库，而是选择使用SDK。此外，他们写出了由<code class="fe mw mx my mz b">cy.task()</code>调用的复杂的Java风格的工作流，而不是使用Cypress命令。</p><p id="e052" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这并不是说他们的设计是错误的——对于Java和Selenium的组合来说，这个框架应该是合理的。问题是他们选择了JavaScript框架并实现了Java解决方案。</p><p id="d47f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我花了几个月的时间进行重构，试图让框架更接近Cypress本身。事实上，令人失望的是，我从未为这家公司编写过新的测试。我花了整个任期重构以前的工作，以便它接近及格。这个框架从一开始就被打破了——这都是因为没有能力对产品进行适当的研究和审查。</p><p id="f3d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要因为框架听起来有吸引力而选择它，而是研究产品提供。确保框架符合您的需求。查看它在GitHub上的存储库，并检查“问题”选项卡。如果提出的任何问题可能会影响您测试应用程序的方式，比如当您知道您的应用程序使用第三方集成时，Cypress不处理windows，那么这就是一个危险信号。</p><p id="7840" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最重要的是，做好你的尽职调查。目的是让这个框架成为你构建过程的基石。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6bd5" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">2.编写可测试的代码</h1><p id="939c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">构建一个成功的自动化框架的最关键的元素之一是拥有一个易于测试的应用程序。有很多工程公司没有考虑编程对测试的影响。引用《软件测试中的经验教训》一书<a class="ae kv" href="https://www.amazon.com/Lessons-Learned-Software-Testing-Context-Driven/dp/0471081124" rel="noopener ugc nofollow" target="_blank"><em class="na"/></a>中的一段话可以很好地总结这一点:</p><blockquote class="nb"><p id="03cf" class="nc nd iq bd ne nf ng nh ni nj nk lr dk translated">“他们并不是不关心测试或质量。他们可能只是不明白他们的行为对测试过程的影响。”</p></blockquote><p id="c011" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">简而言之，并不是所有的工程团队都将测试自动化的想法放在他们头脑的最前面。这样做会创建一个难以测试的应用程序(或者在某些情况下，难以测试)。这可能表现为依赖脆弱的选择器标准(非唯一的选择器，如class、ID和xPath)、不可靠的应用程序性能，以及缺乏注重质量的工具，如用于分解测试数据的API方法。</p><p id="1ec8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您发现您的团队在编程时没有考虑到测试自动化，寻求与开发人员合作，讨论为什么这是一个问题，以及您如何作为一个团队来解决它。通过引入独特的选择器标准(<code class="fe mw mx my mz b">data-id</code>、<code class="fe mw mx my mz b">data-testid</code>或<code class="fe mw mx my mz b">data-cy</code>)或支持QA的API方法等概念，慢慢地(但经过深思熟虑地)努力使您的代码在每一次迭代中都更具可测试性。</p><p id="bdeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在蓝图、计划和整理会议上大声说出来(如果你是基于Scrum的),并引起对一个特性如何难以测试的注意。试着从用户和机器的角度制定解决方案，使之变得更容易。</p><p id="9129" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为软件质量的仲裁者，我们必须确保我们提倡用自动化的思想来编写代码，以减少元素难以自动化的情况。这样做将创建一个易于人和机器测试的应用程序，从而使现在和未来的自动化努力取得成功。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="19cb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">3.在黑暗中摸索</h1><p id="13ee" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我想说清楚，我个人对在CI之外构建自动化框架感到内疚。事实上，我注意到在构建新的自动化框架时，这是相当普遍的。在CI之外构建框架的主要问题是失败的自动化运行缺乏反响。</p><p id="5abf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">失败的CI构建应该成为开发和QA采取行动的催化剂。当自动化在CI之外运行时，逃逸到试运行、验证或生产环境的可能性会成倍增加。这是因为在CI之外运行会限制可见性和监督。只有开始运行的工程师知道测试失败了。与此同时，团队的其他成员还蒙在鼓里。</p><p id="79c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么不让团队知道呢？</p><p id="9054" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在CI中，您有一个包含错误消息、日志和其他标准的报告，帮助工程师支持他们的案例，说明为什么必须解决故障。CI之外的失败运行没有这种奢侈。当然，您可以使用Allure之类的工具或Pytest-HTML之类的包来生成运行报告。然而，CI构建允许失败在整个团队中自动传播——最明显的是通过聊天应用程序，如Slack。</p><div class="nq nr gp gr ns nt"><a href="https://donthitsave.com/comic/2016/07/15/it-works-on-my-computer" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">不要点击保存-漫画:它在我的电脑上工作</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">昨晚我看了路易斯·CK的现场表演。相当不错的东西。那家伙应该认真考虑从事喜剧事业…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">donthitsave.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div><p id="0d03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，还有一个老问题“它在我的机器上工作”,如上面的漫画所示。</p><p id="a6e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本地运行自动化应该被认为与在本地构建应用程序是一样的。仅仅因为它在您的机器上通过，并不意味着它会在CI中通过。始终检查以确保您的跑步在两种情况下都通过。如果没有，那么您必须调查故障并确定后续步骤。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8aa0" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">4.狂热的自动化</h1><p id="880f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">你是否曾为一家寻求一切自动化的自动化工厂工作过？</p><p id="ea71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试自动化背后的想法是将一系列高度可重复的任务提供给计算机。任务，例如从20个过滤器中选择一个，清除该选择，然后选择下一个过滤器。手动执行，行为会变得单调和精神负担。这导致测试人员疲劳，从而导致逃逸。为了减少测试人员的疲劳，并确保我们不会被手工测试的重压压垮，我们自动化了一系列的任务。⁴</p><p id="bb49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，有些商店将这一点发挥到了极致。管理层雇佣了一个在自动化方面有经验的质量工程师，并且立即想要自动化每一个测试用例。不幸的是，100%自动化不是一个可行的目标。最主要的原因是自动化不是取代手工测试的手段。我们需要手工测试就像我们需要自动化一样——这两种测试方法在这个时候是不可分的。</p><p id="15bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么为什么这么多商店想这么做呢？对自动化能提供什么缺乏理解。</p><p id="d615" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对许多人来说，自动化的想法意味着手工测试脚本的终结。商店再也不用担心执行手动测试用例了——计算机现在可以做到。</p><p id="5453" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们应该深思熟虑地选择什么时候自动化，当我们不能时，手动测试，而不是寻求为所有事情编写自动化。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="fb39" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">5.语言很重要</h1><p id="690a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我曾经通过在Clojure中构建一个自动化框架，对质量和开发之间的语言同质性采取了一种狂热的方法。我们的开发人员用Clojure和Clojurescript编写，所以我觉得用Clojure编写对质量也有好处。</p><p id="92a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们找到了一个测试运行程序(Kaocha)和一个web驱动程序(Etaoin)并开始工作。该项目成功了几个星期，然后才发现故障点:web驱动程序和测试运行程序分别由一个开发人员维护。⁵应该任何一个开发人员从他们各自的项目中抽出时间，我们的框架将面临崩溃的风险。</p><p id="ea06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我学到了什么？</p><p id="c175" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在构建自动化框架时，编程语言的选择很重要——这是我在选择Clojure时没有考虑的。当时，我想尽可能密切地参与质量和开发。我没有想到Clojure的自动化社区会这么小，或者测试产品会这么少。我只是想把质量和发展结合起来，以便更容易地向左转。</p><p id="c1e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在另一家商店再次经历了这种情况，尽管我对语言选择采取了更仔细、更周到的方法。这家商店正在努力维护几年前开发的老化的Ruby框架。我的任务是审核框架并选择前进的道路，无论是重构还是重写。</p><p id="39b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在工程管理部门的支持下，更高级的质量工程师和我选择用Python重写，尽管他们明显希望使用Cypress。我们选择了Python，因为它在语法上与Ruby相似，并且对于我们的助理工程师来说更容易学习。</p><p id="7116" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，该公司几周后被收购，所以所有自动化(除了我的团队)都暂停了。我继续独自开发框架，持续了几个月，直到其他团队能够再次自动化。然而，到这个时候，团队已经决定他们宁愿使用JavaScript和Cypress，而不是Python。</p><p id="2772" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你选择的语言很重要。当构建一个自动化框架时，检查(并反复检查)您正在使用的语言是否被认可。不要使用一种可能很难招到人或者受欢迎程度正在下降的语言。⁶确实使用了一种能提供足够工具和机会的语言。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="fa75" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">摘要</h1><p id="19be" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">自动化测试可以为任何开发团队提供显著的生活质量和生产力提升。然而，构建自动化框架可能是一个困难的过程。在选择语言和架构时，请确保您是经过深思熟虑的。与您的开发人员协作，在编程时考虑自动化。</p><p id="9aa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最重要的是，对于测试自动化要有现实的期望。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="efa0" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">资源</h1><ol class=""><li id="8c8d" class="oi oj iq ky b kz mr lc ms lf ok lj ol ln om lr on oo op oq bi translated">Kaner，Cem等人<em class="na">在软件测试中吸取的经验教训:一种上下文驱动的方法</em>。Wiley，2002年，第10页。</li><li id="2169" class="oi oj iq ky b kz or lc os lf ot lj ou ln ov lr on oo op oq bi translated"><em class="na">敏捷测试:测试人员和敏捷团队实用指南</em>，作者Lisa Crispin和Janet Gregory，Addison-Wesley，2014年，第287-288页。</li><li id="7cc2" class="oi oj iq ky b kz or lc os lf ot lj ou ln ov lr on oo op oq bi translated">洛夫斯杰夫。“它在我的电脑上工作。”【donthitsave.com】不要打救，<a class="ae kv" href="http://donthitsave.com" rel="noopener ugc nofollow" target="_blank">2016</a>。</li><li id="c1ae" class="oi oj iq ky b kz or lc os lf ot lj ou ln ov lr on oo op oq bi translated">敏捷测试:测试人员和敏捷团队实用指南，第280页。</li><li id="1ec4" class="oi oj iq ky b kz or lc os lf ot lj ou ln ov lr on oo op oq bi translated">这在当时是真的。每个项目现在在GitHub上都有大量的贡献者，这使得他们更加可靠。</li><li id="1d5d" class="oi oj iq ky b kz or lc os lf ot lj ou ln ov lr on oo op oq bi translated"><em class="na">十字形的状态</em>，<a class="ae kv" href="http://octoverse.github.com/" rel="noopener ugc nofollow" target="_blank">octoverse.github.com/</a>。</li></ol></div></div>    
</body>
</html>