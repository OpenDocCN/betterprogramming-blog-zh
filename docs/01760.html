<html>
<head>
<title>Intro to React MapBox GL JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React地图框GL JS简介</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/intro-to-react-mapbox-gl-js-24a18255e7f5?source=collection_archive---------7-----------------------#2019-10-11">https://betterprogramming.pub/intro-to-react-mapbox-gl-js-24a18255e7f5?source=collection_archive---------7-----------------------#2019-10-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3c45" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">地理编码器入门</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b1e611fc9a73ecb3076677fc1c6d4c4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B5bmz6lbzEVAJOBq0x5ejQ.png"/></div></div></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="47d7" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">地理编码</h1><p id="e7db" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我们将介绍一个极其强大的工具。它和其他的一样容易上手，但是它的力量是惊人的。互联网告诉我们地理编码是这样的:</p><blockquote class="mp mq mr"><p id="55c5" class="lt lu ms lv b lw mt ju ly lz mu jx mb mv mw me mf mx my mi mj mz na mm mn mo im bi translated">“地理编码是将物理地址描述转换为地球表面位置的计算过程。另一方面，反向地理编码将地理坐标转换为位置描述，通常是地名或可寻址位置的名称。”— <a class="ae nb" href="https://en.wikipedia.org/wiki/Geocoding" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="a92e" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">如果你曾经使用过谷歌地图、必应地图或任何其他地图软件，你很可能参与过地理编码。本质上是，“这个地址的纬度和经度是多少？”因此，它提供了从位置参考(例如，1060 W Addison St，Chicago，IL 60613)到其纬度和经度(41.947672，-87.656004)的链接，正如我们所知，这是我们地图功能的一部分。</p><p id="362c" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">地理编码的重要性不可低估。你能想象必须记住每个地址的纬度和经度吗？</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="4bec" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">步伐</h1><p id="e14e" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">如果你目前还没有一个<a class="ae nb" href="https://docs.mapbox.com/mapbox-gl-js/api/" rel="noopener ugc nofollow" target="_blank"> MapBox </a>项目，那么按照<a class="ae nb" href="https://medium.com/better-programming/into-to-react-mapbox-gl-js-b7d827f7d7d6" rel="noopener">在这篇早期文章</a>中概述的步骤进行。</p><p id="a6e2" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">否则，转到您的项目目录并:</p><ol class=""><li id="d97a" class="nc nd it lv b lw mt lz mu mc ne mg nf mk ng mo nh ni nj nk bi translated"><code class="fe nl nm nn no b">npm install react-map-gl-geocoder</code></li><li id="967e" class="nc nd it lv b lw np lz nq mc nr mg ns mk nt mo nh ni nj nk bi translated"><code class="fe nl nm nn no b">npm start</code></li></ol><p id="ef08" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">这就是你需要做的。坐下来好好捞一把。</p><p id="50b2" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">开玩笑，我们实际上必须使用地理编码器组件。</p><p id="0b10" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">这是您使用地理编码器之前的地图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e96c133fbdc81a8b9df31a22c4451107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPdLcX_MwoghZkJ6PVu1aw.png"/></div></div></figure><p id="d18f" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">现在将它与我们的其他导入内容一起导入:</p><p id="6426" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated"><code class="fe nl nm nn no b">import Geocoder from “react-map-gl-geocoder”;</code></p><p id="73c2" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">并将<code class="fe nl nm nn no b">Geocoder</code>放入<code class="fe nl nm nn no b">ReactMapGL</code>组件中。</p><p id="f12b" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">现在我们的App.js应该是这样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/17ac6d9aedb93bdc11385ae4bc57bc7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*AVuzCATbm7tEWFmIOY0pqQ.png"/></div></figure><p id="7a7d" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">所以现在我们的地图看起来像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/9766efc1864bf93f65835d3efdc8bb48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KizLlhAK_4ZG0Nb_nE4c9w.png"/></div></div></figure><p id="a31b" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">这相当于三页纸的错误，我花了大量的搜索才弄清楚这里发生了什么(以及令人尴尬的文档疏忽)，以及ReactMapGL和Geocoder需要什么才能工作。有了NavigationControl和GeolocateControl，您不需要任何特殊的东西。</p><p id="5b8a" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">我会带你去找我的线人。说真的，看看这个。这家伙应该得到很多荣誉:</p><p id="5a2f" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated"><a class="ae nb" href="https://codesandbox.io/s/l7p179qr6m" rel="noopener ugc nofollow" target="_blank">地理编码器演示</a></p><p id="ae15" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated"><a class="ae nb" href="https://www.npmjs.com/package/react-map-gl-geocoder" rel="noopener ugc nofollow" target="_blank">文档</a></p><p id="67b2" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">如果您真的看了文档，您会注意到地理编码器组件所需的属性是<code class="fe nl nm nn no b">mapRef</code>和<code class="fe nl nm nn no b">mapboxApiAccessToken</code>。所以把这些加进去，你这个懒汉。</p><p id="b7ce" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">但是我们把<code class="fe nl nm nn no b">mapRef</code>设置成什么呢？</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="348e" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">做出反应。CreateRef</h1><p id="b80b" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">所以为了让Geocoder工作，Geocoder组件需要访问ReactMapGL组件。我们的方法是创建一个ref，并在ReactMapGL和Geocoder组件中使用它。而且这个概念被一个比我聪明的人解释得好得多。查看文章“<a class="ae nb" href="https://medium.com/@rossbulat/how-to-use-react-refs-4541a7501663" rel="noopener">如何使用React Refs </a>”以获得React Refs的更好解释。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="71e9" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">怎么做</h1><p id="4223" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">所以在我们的App.js类中，我们只需要像这样声明一个变量:</p><pre class="kj kk kl km gt nw no nx ny aw nz bi"><span id="d187" class="oa lc it no b gy ob oc l od oe">myMap = React.createRef()</span></pre><p id="e167" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">然后在我们的地理编码器组件的必需的<code class="fe nl nm nn no b">mapRef</code>字段中使用它。</p><p id="39a1" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">我们还需要在外部组件<code class="fe nl nm nn no b">ReactMapGL</code>上设置一个<code class="fe nl nm nn no b">ref</code>键。这就是创造信息流动路径的原因。</p><p id="11d0" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">现在我们的App.js组件看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/729cdd8297a97e970e2303be2c9fff34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyIQrF_d6g9BwB_zxb_IIw.png"/></div></div></figure><p id="b94b" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">我们的地图是这样的！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/27a05dc81fe05ad3c4ad7e999d58d3cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESWZ6H3iHEB4arUdSgggzA.png"/></div></div></figure><p id="1ef3" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">搜索栏！</p><p id="7730" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">但是它看起来像垃圾，所以让我们为<code class="fe nl nm nn no b">Geocoder </code>导入CSS并把它放在左上角。</p><p id="fd13" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">CSS: <code class="fe nl nm nn no b">import “react-map-gl-geocoder/dist/mapbox-gl-geocoder.css”;</code></p><p id="2d1d" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">要将它放在左上角，在地理编码器组件中添加:<code class="fe nl nm nn no b"><em class="ms">position</em>=”top-left”</code></p><p id="acb9" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">现在我们有了这个:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9257ddf69aa3662542f70874c25125cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKbRPmQkSEhH-cCDBZ_e9Q.png"/></div></div></figure><p id="9c7a" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">如果我们在搜索栏中输入，我们会有有史以来最漂亮的界面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/465b6d81c75a51e871d6b35645951438.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*uLwd0PvKR_E0PLEvFXVGzg.png"/></div></figure><p id="b8de" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">按回车键，它会自动重定位到那个位置。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="29ef" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">结论</h1><p id="8ac4" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">这是一个极其重要的功能，非常容易设置。我不能强调这是一个多么强大的工具，而且是免费的。太疯狂了。</p><p id="64a7" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">请务必通读地理编码器文档，了解更多定制选项。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="f559" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">大声喊出来</h1><p id="c211" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">我使用了以下资源来帮助我的项目，请务必查看它们。</p><p id="741a" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated">SamSamskies (我相信他构建/主要贡献了地理编码包，godly)。</p><p id="5a29" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated"><a class="ae nb" href="https://codesandbox.io/s/v0m14q5rly" rel="noopener ugc nofollow" target="_blank">地理编码器演示</a></p><p id="8923" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated"><a class="ae nb" href="https://www.npmjs.com/package/react-map-gl-geocoder" rel="noopener ugc nofollow" target="_blank">地理编码器文档</a></p><p id="6ea7" class="pw-post-body-paragraph lt lu it lv b lw mt ju ly lz mu jx mb mc mw me mf mg my mi mj mk na mm mn mo im bi translated"><a class="ae nb" href="https://medium.com/@rossbulat/how-to-use-react-refs-4541a7501663" rel="noopener"> React Refs文章</a></p><h1 id="092e" class="lb lc it bd ld le oi lg lh li oj lk ll jz ok ka ln kc ol kd lp kf om kg lr ls bi translated">参考</h1><p id="3c04" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">如果你对其他关于React <a class="ae nb" href="https://docs.mapbox.com/mapbox-gl-js/api/" rel="noopener ugc nofollow" target="_blank"> MapBox </a>和如何做事的文章感兴趣，请参阅</p><ul class=""><li id="08f0" class="nc nd it lv b lw mt lz mu mc ne mg nf mk ng mo on ni nj nk bi translated">"<a class="ae nb" href="https://medium.com/better-programming/react-mapbox-gl-js-getting-started-with-geolocatecontrol-18c08a5410d" rel="noopener">React MapBox GL JS简介GeolocateControl入门</a>"</li><li id="3d71" class="nc nd it lv b lw np lz nq mc nr mg ns mk nt mo on ni nj nk bi translated">"<a class="ae nb" href="https://medium.com/better-programming/getting-started-with-mapbox-gl-js-user-location-with-geolocation-f32c3e323526" rel="noopener">MapBox GL JS入门:带地理定位的用户位置</a>"</li><li id="4c29" class="nc nd it lv b lw np lz nq mc nr mg ns mk nt mo on ni nj nk bi translated">"【React和MapBox GL JS入门—使用弹出组件"</li><li id="129a" class="nc nd it lv b lw np lz nq mc nr mg ns mk nt mo on ni nj nk bi translated"><a class="ae nb" href="https://medium.com/better-programming/into-to-react-mapbox-gl-js-b7d827f7d7d6" rel="noopener">导航控制、缩放和指南针入门</a></li></ul></div></div>    
</body>
</html>