<html>
<head>
<title>How To Make HTTP Requests in Streamlit App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Streamlit App中进行HTTP请求</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-http-requests-in-streamlit-app-f22a77fd1ed7?source=collection_archive---------1-----------------------#2021-10-20">https://betterprogramming.pub/how-to-make-http-requests-in-streamlit-app-f22a77fd1ed7?source=collection_archive---------1-----------------------#2021-10-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b98e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用请求或aiohttp包</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0b861fb45e474034ee8b782ff3ac24cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FZPK7PcWmrue8OWQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@alexbemore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚历山大·沙托夫</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a307" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自问世以来，Streamlit在用Python构建数据应用程序的开发人员中获得了极大的欢迎。它于2021年10月5日发布了正式的1.0版本。仅供参考，Streamlit是—</p><blockquote class="lv lw lx"><p id="e1c9" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">“…一个开源的Python库，使创建和共享用于机器学习和数据科学的漂亮的自定义web应用程序变得容易。”</p><p id="2e4c" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">—简化文档</p></blockquote><p id="0155" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过利用Streamlit，您可以轻松地构建一个简单的前端界面来演示您的项目的功能。这非常有帮助，因为您不需要自己处理HTML、CSS和JavaScript。web接口直接用Python编码，更容易与任何ML和AI模型集成。</p><p id="cebb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">话虽如此，可能会出现这样的情况:您的应用程序必须向其他端点发出外部HTTP请求。这包括从远程服务器获取数据、通过中间端点处理内容等。</p><p id="7506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过阅读本文，您将学会根据您的用例，通过以下Python包在Streamlit应用程序中发出HTTP请求:</p><ul class=""><li id="5dd0" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated"><code class="fe ml mm mn mo b">requests</code> —用于正常应用</li><li id="51d5" class="mc md it lb b lc mp lf mq li mr lm ms lq mt lu mh mi mj mk bi translated"><code class="fe ml mm mn mo b">aiohttp</code> —用于需要异步执行的应用程序</li></ul><p id="db15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了保持简洁，应用程序的功能如下:</p><ul class=""><li id="2b15" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">表示图像ID的数字输入小部件</li><li id="a6f3" class="mc md it lb b lc mp lf mq li mr lm ms lq mt lu mh mi mj mk bi translated">一个submit button小部件，用于调用外部图像API并将输出解析为JSON</li><li id="44cd" class="mc md it lb b lc mp lf mq li mr lm ms lq mt lu mh mi mj mk bi translated">一个图像小部件，显示返回的图像URL和作者姓名</li></ul><p id="0c99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">外部图像API由Picsum提供，Picsum是<code class="fe ml mm mn mo b">The Lorem Ipsum for photos:</code></p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="5428" class="my mz it mo b gy na nb l nc nd">https://picsum.photos/id/{id}/info</span></pre><p id="db76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">id表示唯一的标识符，我们将该值限制在0到100之间。API输出如下所示:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="a0f3" class="my mz it mo b gy na nb l nc nd">{<br/>        "id": "0",<br/>        "author": "Alejandro Escamilla",<br/>        "width": 5616,<br/>        "height": 3744,<br/>        "url": "https://unsplash.com/...",<br/>        "download_url": "https://picsum.photos/..."<br/>}</span></pre><p id="9ece" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提交后，用户界面应如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/f25e8accb4e74dfb7a4ff5679a1ebac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OkfFzrTD5lsoCb89ZOZJ3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="e98a" class="nf mz it bd ng nh ni nj nk nl nm nn no jz np ka nq kc nr kd ns kf nt kg nu nv bi translated">设置</h1><p id="e1e4" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">强烈建议您在继续安装之前创建一个新的虚拟环境。</p><h2 id="7808" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">细流</h2><p id="0d87" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">激活它，并运行以下命令来安装Streamlit:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="638d" class="my mz it mo b gy na nb l nc nd">pip install streamlit</span></pre><h2 id="9931" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">要求</h2><p id="8246" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">您的环境中应该已经安装了请求包。如果不存在，请按照以下方式安装:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="7896" class="my mz it mo b gy na nb l nc nd">pip install requests</span></pre><h2 id="0bb5" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">aiohttp</h2><p id="15aa" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">对于异步请求，运行以下命令一次性安装所有依赖项:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="a084" class="my mz it mo b gy na nb l nc nd">pip install aiohttp[speedups]</span></pre><h1 id="8c91" class="nf mz it bd ng nh ni nj nk nl nm nn no jz np ka nq kc nr kd ns kf nt kg nu nv bi translated">带有请求的HTTP请求</h1><p id="a9c5" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">创建一个名为<code class="fe ml mm mn mo b">myapp.py</code>的新Python文件。</p><h2 id="95fa" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">导入</h2><p id="c432" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">在文件顶部添加以下导入语句:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="2ab6" class="my mz it mo b gy na nb l nc nd">import streamlit as st<br/>import requests</span></pre><h2 id="3a44" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">获取功能</h2><p id="bb4c" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">接下来，定义一个利用<code class="fe ml mm mn mo b">requests.session</code>调用外部URL并以JSON的形式返回响应的通用函数，如下所示:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="e356" class="my mz it mo b gy na nb l nc nd">def fetch(session, url):<br/>    try:<br/>        result = session.get(url)<br/>        return result.json()<br/>    except Exception:<br/>        return {}</span></pre><h2 id="7703" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">主要功能</h2><p id="dd8c" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">在下面创建一个新函数作为主函数。通过调用<code class="fe ml mm mn mo b">st.set_page_config</code>函数初始化web界面的配置:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="8507" class="my mz it mo b gy na nb l nc nd">st.set_page_config(page_title="Example App", page_icon="🤖")</span></pre><p id="2264" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，设置标题如下(指网页界面的H1标题):</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="bd2a" class="my mz it mo b gy na nb l nc nd">st.title("Get Image by Id")</span></pre><p id="d6d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们初始化一个会话来重用底层TCP连接，而不是为每个请求创建一个新的requests对象，如下所示:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="247c" class="my mz it mo b gy na nb l nc nd">session = requests.Session()</span></pre><p id="14fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当进行外部URL调用时，建议将其封装在一个<code class="fe ml mm mn mo b">st.form</code>小部件中。这主要是因为每次用户与您的应用程序交互时，Streamlit都会重新执行脚本，从而导致不必要的HTTP请求调用。<code class="fe ml mm mn mo b">st.form</code>有助于解决这个问题，因为它会将其中的所有小部件批处理在一起，并且在提交时只执行一次。</p><p id="b18d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建一个新的<code class="fe ml mm mn mo b">st.form</code>小部件，并用以下小部件填充它:</p><ul class=""><li id="aef0" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">st.number _输入</li><li id="1006" class="mc md it lb b lc mp lf mq li mr lm ms lq mt lu mh mi mj mk bi translated">表单提交按钮</li></ul><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="32df" class="my mz it mo b gy na nb l nc nd">with st.form("my_form"):<br/>    index = st.number_input("ID", min_value=0, max_value=100, key="index")</span><span id="88f0" class="my mz it mo b gy om nb l nc nd">    submitted = st.form_submit_button("Submit")</span></pre><p id="7c40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ml mm mn mo b">st.form_submit_button</code>返回一个布尔值，表明用户是否按下了提交按钮。添加以下条件语句，该语句调用<code class="fe ml mm mn mo b">fetch</code>函数，并在用户提交表单时生成一个<code class="fe ml mm mn mo b">st.image</code>小部件:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="5883" class="my mz it mo b gy na nb l nc nd">if submitted:<br/>    st.write("Result")<br/>    data = fetch(session, f"https://picsum.photos/id/{index}/info")<br/>    if data:<br/>        st.image(data['download_url'], caption=f"Author: {data['author']}")<br/>    else:<br/>        st.error("Error")</span></pre><p id="0c4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用以下代码为Python文件添加最后的润色:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="f681" class="my mz it mo b gy na nb l nc nd">if __name__ == '__main__':<br/>    main()</span></pre><p id="eeb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在以下<a class="ae ky" href="https://gist.github.com/wfng92/9dc26a12ded0359c31887052e11ef8ff" rel="noopener ugc nofollow" target="_blank">要点</a>中找到完整的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="4308" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">运行细流</h2><p id="eeba" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">保存文件并在终端中运行以下命令:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="fce1" class="my mz it mo b gy na nb l nc nd">streamlit run <!-- -->my<!-- -->app.py</span></pre><p id="f0ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在没有任何显示的远程服务器上运行它，您可以将<code class="fe ml mm mn mo b">server.headless</code>设置为true以防止任何警告日志:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="3538" class="my mz it mo b gy na nb l nc nd">streamlit run <!-- -->my<!-- -->app.py --server.headless true</span></pre><p id="4950" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，它将在端口8501上运行。您可以通过<code class="fe ml mm mn mo b">server.port</code>轻松更改端口，如下所示:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="ee77" class="my mz it mo b gy na nb l nc nd">streamlit run <!-- -->my<!-- -->app.py --server.port 8501</span></pre><p id="19f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请访问以下网址:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="5c53" class="my mz it mo b gy na nb l nc nd">http://localhost:8501/</span></pre><p id="2a3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到以下用户界面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/d854e876abeda703d3e003de5ab4af3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bOgoRg3GXQPF96Bh4uZXMQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="ac57" class="nf mz it bd ng nh ni nj nk nl nm nn no jz np ka nq kc nr kd ns kf nt kg nu nv bi translated">使用aiohttp的HTTP请求</h1><p id="8666" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">在本节中，您将学习使用<code class="fe ml mm mn mo b">aiohttp</code>而不是<code class="fe ml mm mn mo b">requests</code>来发出HTTP请求。除了一些差异，实现或多或少是相同的。</p><h2 id="0f97" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">导入</h2><p id="f246" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">修改导入语句，如下所示:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="21b3" class="my mz it mo b gy na nb l nc nd">import streamlit as st<br/>import aiohttp<br/>import asyncio</span></pre><h2 id="c94f" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">获取功能</h2><p id="6550" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">接下来，将<code class="fe ml mm mn mo b">fetch</code>函数更改为<code class="fe ml mm mn mo b">async</code>，并在发出HTTP请求时使用<code class="fe ml mm mn mo b">aiohttp.ClientSession</code>，如下所示:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="f62b" class="my mz it mo b gy na nb l nc nd">async def fetch(session, url):<br/>    try:<br/>        async with session.get(url) as response:<br/>            result = await response.json()<br/>            return result<br/>    except Exception:<br/>        return {}</span></pre><p id="e56b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，这个实现将对API进行一次调用，并等待响应。因此，与使用<code class="fe ml mm mn mo b">requests</code>包相比，在执行时间方面不会有任何差别。</p><p id="89a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，如果您的应用程序在每个被点击的按钮上进行多个API调用，您可以利用<code class="fe ml mm mn mo b">asyncio.gather</code>来同时获取所有的API。请阅读下面的文章了解更多信息:</p><ul class=""><li id="853b" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-make-parallel-async-http-requests-in-python-d0bd74780b8a">如何用Python发出并行异步请求</a></li></ul><h2 id="f00e" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">主要功能</h2><p id="20f4" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">同样，将主函数修改为<code class="fe ml mm mn mo b">async</code>，并将<code class="fe ml mm mn mo b">st.form</code>代码包装在<code class="fe ml mm mn mo b">aiohttp.ClientSession</code>上下文管理器中。此外，您还需要用关键字<code class="fe ml mm mn mo b">await</code>调用<code class="fe ml mm mn mo b">fetch</code>函数。代码如下:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="53a8" class="my mz it mo b gy na nb l nc nd">async def main():<br/>    st.set_page_config(page_title="Example App", page_icon="🤖")<br/>    st.title("Get Image by Id")<br/>    async with aiohttp.ClientSession() as session:<br/>        with st.form("my_form"):</span><span id="6bae" class="my mz it mo b gy om nb l nc nd">        ...</span><span id="bf4d" class="my mz it mo b gy om nb l nc nd">        data = await fetch(session, f"https://picsum.photos/id/{index}/info")</span></pre><p id="2eb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用以下代码替换对main函数的调用:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="164f" class="my mz it mo b gy na nb l nc nd">if __name__ == '__main__':<br/>    loop = asyncio.new_event_loop()<br/>    loop.run_until_complete(main())</span></pre><p id="4834" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于Python 3.7+，可以使用<code class="fe ml mm mn mo b">asyncio.run</code>函数作为顶级入口点:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="56db" class="my mz it mo b gy na nb l nc nd">if __name__ == '__main__':<br/>    asyncio.run(main())</span></pre><p id="66ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://gist.github.com/wfng92/0cc6673e9ce4e8b880e6a38c134ed0cf" rel="noopener ugc nofollow" target="_blank">完整代码</a>如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="aea6" class="my mz it bd ng ob oc dn nk od oe dp no li of og nq lm oh oi ns lq oj ok nu ol bi translated">运行细流</h2><p id="37e8" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">保存文件，并使用之前运行的相同命令运行它:</p><pre class="kj kk kl km gt mu mo mv mw aw mx bi"><span id="ffc4" class="my mz it mo b gy na nb l nc nd">streamlit run <!-- -->my<!-- -->app.py</span></pre><p id="fb8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到具有相同功能的相同web界面。</p><h1 id="2b1f" class="nf mz it bd ng nh ni nj nk nl nm nn no jz np ka nq kc nr kd ns kf nt kg nu nv bi translated">结论</h1><p id="3880" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">让我们回顾一下你今天所学的内容。</p><p id="8ae6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章从对Streamlit的简单介绍和在Streamlit应用程序中发出HTTP请求的问题陈述开始。</p><p id="7683" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，继续安装<code class="fe ml mm mn mo b">streamlit</code>、<code class="fe ml mm mn mo b">aiohttp</code>和<code class="fe ml mm mn mo b">requests</code> Python包。</p><p id="984b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程继续实现一个简单的应用程序，该应用程序基于ID获取图像。HTTP请求通过<code class="fe ml mm mn mo b">requests</code>包调用。</p><p id="8c19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随后，它介绍了如何使用<code class="fe ml mm mn mo b">aiohttp</code>而不是<code class="fe ml mm mn mo b">requests</code>来发出HTTP请求。</p><p id="3528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。祝你有美好的一天！</p><h1 id="6643" class="nf mz it bd ng nh ni nj nk nl nm nn no jz np ka nq kc nr kd ns kf nt kg nu nv bi translated">参考</h1><ol class=""><li id="9b26" class="mc md it lb b lc nw lf nx li oq lm or lq os lu ot mi mj mk bi translated"><a class="ae ky" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit —文档</a></li><li id="0874" class="mc md it lb b lc mp lf mq li mr lm ms lq mt lu ot mi mj mk bi translated">Medium — <a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-make-parallel-async-http-requests-in-python-d0bd74780b8a">如何用Python发出并行异步请求</a></li></ol></div></div>    
</body>
</html>