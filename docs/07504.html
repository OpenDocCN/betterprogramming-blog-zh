<html>
<head>
<title>Implementing In-App Purchases in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android中实现应用内购买</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-in-app-purchases-in-android-2bd52a3ab700?source=collection_archive---------4-----------------------#2021-01-21">https://betterprogramming.pub/implementing-in-app-purchases-in-android-2bd52a3ab700?source=collection_archive---------4-----------------------#2021-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="49d5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">提高你的免费增值应用的销量</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/750ef1e621c7d77fdb92bb7ff6798aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mM7TrCKx8bKNfXdl"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@mbaumi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米卡·鲍梅斯特</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="86f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在你的应用程序中实现应用内购买是非常惊人的。他们允许你让你的应用<a class="ae kv" href="https://www.investopedia.com/terms/f/freemium.asp" rel="noopener ugc nofollow" target="_blank">免费增值</a>，这已经被证明是让用户愿意为你的应用付费的最有效策略。</p><p id="b788" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，在Android中实现应用内购买需要大量的工作。和往常一样，文档也不是那么容易理解。这就是android-inapp-billing-v3 登场的地方。</p><p id="4177" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要阅读本文，您需要有一个开发者帐户，并能访问Google Play控制台。</p><blockquote class="ls lt lu"><p id="bc4c" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><strong class="ky ir">这个库使用的是Google Play计费库2.0.1版本。如果不更新此库，您将无法在2021年11月1日后使用它。要了解如何实现最新的库，您可以查看本教程</strong><a class="ae kv" href="https://medium.com/googleplaydev/working-with-google-play-billing-part-1-387677bd632b" rel="noopener"><strong class="ky ir"/></a><strong class="ky ir">。</strong></p></blockquote></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="8655" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">贮藏室ˌ仓库</h1><div class="my mz gp gr na nb"><a href="https://github.com/mattiaferigutti/In-App-Purchases-Usage-Sample" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">mattiaferigutti/应用内购买-使用-示例</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">通过在GitHub上创建一个帐户，为mattiaferigutti/In-App-Purchases-Usage-Sample开发做出贡献。</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">github.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kp nb"/></div></div></a></div></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="d57d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">Google Play向开发者收取的交易费用</h1><p id="1015" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">Google Play中所有购买(应用和应用内购买)的交易费是客户价格的30%。换句话说，开发者获得70%的支付，剩下的30%归发行伙伴和运营费。点击查看更多关于<a class="ae kv" href="https://support.google.com/paymentscenter/answer/7159343" rel="noopener ugc nofollow" target="_blank">交易费用的信息。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/3bbf82ac19f16c8394c59732ef29644f.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*1dlwZn7C1mN4CYN9zEiIOw.png"/></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="adf1" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">第一步。</h1><p id="916a" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">实现<code class="fe nw nx ny nz b">build.gradle</code>中的库(你可以在这里查看当前版本<a class="ae kv" href="https://github.com/anjlab/android-inapp-billing-v3" rel="noopener ugc nofollow" target="_blank">):</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="ac66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开您的清单并在顶部添加此权限:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="1e7c" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">第二步。</h1><p id="3181" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">现在是时候打开你的<em class="lv"> Google Play控制台</em>并加载应用程序了。在商店上加载应用程序之前，请确保您已经完成了第一步。这是因为您需要实现计费权限来解锁<em class="lv">应用内产品</em>部分。</p><p id="21f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，创建一个新的应用程序，并完成所有这些步骤:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/0d80d434198b03d88f0b24f7399e682b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_6u7mJSE-PZzCC863S8JiQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌Play商店开发者控制台截图</p></figure><p id="28da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二，一旦你完成了，你想发布你的应用。我建议你在<em class="lv">内部测试</em>部分这样做:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/4a44b1fd23fb7d34d09d4443ff219290.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*oNTjdpSyRdLplxs28ea0Ng.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">内部测试控制台截图</p></figure><p id="6f47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第三，如果您没有<strong class="ky ir"> </strong>商户账户，您需要通过点击<em class="lv">设置商户账户</em>-&gt;-<em class="lv">创建被管理产品、</em>并填写表格来进行设置(<a class="ae kv" href="https://support.google.com/paymentscenter/answer/7161426" rel="noopener ugc nofollow" target="_blank">关于填写表格的更多信息，请点击</a>)。</p><p id="180b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第四，一旦你上传了你的APK(或Android应用捆绑包)，你就可以在<em class="lv">应用内产品</em>中创建新产品。要找到它，向下滚动左侧边栏，直到找到<em class="lv">应用内产品。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/dd3b730d108abb8ee235100520eeca99.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*o_V0n3FiNteNRd0aKyj0DA.png"/></div></figure><p id="62f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，您可以通过点击<em class="lv">创建产品</em>按钮来创建新产品。请记住，一旦您被分配了产品ID，您就不能更改它。但是，您可以更改名称、描述和价格。创建并保存产品后，必须点击<em class="lv">激活</em>按钮。否则，该产品将无法购买。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/b1572818c894bf9c2f1cc8a447692cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ad4q_nuEtriH-RIxQ_QXgw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">实施示例——应用内购买</p></figure><p id="524e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记住产品ID。我们以后会用到它。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="c438" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">第三步。</h1><p id="ad42" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">让我们编写以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="e7c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们分析一下代码:</p><ul class=""><li id="4363" class="og oh iq ky b kz la lc ld lf oi lj oj ln ok lr ol om on oo bi translated">我们通过三个参数初始化<em class="lv"> BillingProcessor </em>对象。第一个参数是上下文，第二个是许可证密钥(我们很快就会看到如何找到它)，第三个用于在<code class="fe nw nx ny nz b">Activity</code>中注册<code class="fe nw nx ny nz b">IBillingHandler </code>接口的方法。</li><li id="c571" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated"><em class="lv"> initialize() </em>将启动服务并绑定播放服务。完成后，将调用<em class="lv">onbillinitialized()</em>。</li><li id="c953" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">要知道<em class="lv"> onProductPurchased() </em>只有在第一次购买产品的时候才会被调用。如果我们关闭应用程序并重新打开它，这个方法将不会被调用。我们将在后面看到如何验证购买。</li><li id="b5a8" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">确保您已经实现了<em class="lv"> onActivityResult()。</em>如果没有这个方法<em class="lv"> onProductPurchased() </em>，<em class="lv">onPurchaseHistoryRestored()</em>就不会被调用。</li></ul><h2 id="1ff2" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">哪里可以找到许可证密钥</h2><p id="5061" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">让我们回到我们的Google Play控制台，在侧边栏上找到如下所示的货币化设置。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/5d5242026d09ec931da07789edc8d7bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qnghKHquxzUZZW1zTv_NQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">货币化设置屏幕截图</p></figure><p id="4bbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的字符串不能有任何空格，所以如果有空格，请将其删除。</p><h2 id="7fd7" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">购买产品</h2><p id="3cff" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">使用下面的代码，我们可以添加购买产品的功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="12ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用之前，最好检查一下应用内付费服务的可用性。在一些旧设备或中国制造的设备中，Google Play市场可能无法使用。此外，它可能被否决，不支持应用内计费。这个<code class="fe nw nx ny nz b">isOneTimePurchaseSupported</code>变量起了作用。</p><h2 id="3b55" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">购买带有开发者有效负载的产品</h2><p id="7cae" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">使用如下代码，我们可以进行设置:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="44d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你也可以使用开发者有效载荷(<a class="ae kv" href="https://stackoverflow.com/questions/7891242/android-in-app-billing-what-is-the-developer-payload-and-how-the-buy-button/" rel="noopener ugc nofollow" target="_blank">更多信息在这里</a>)，但是你应该知道Google已经否决了它，声明如下:</p><blockquote class="ls lt lu"><p id="c5f5" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><a class="ae kv" href="https://developer.android.com/google/play/billing/developer-payload" rel="noopener ugc nofollow" target="_blank">“有了这种支持，从Google Play计费库的2.2版本开始，我们已经弃用了开发者有效负载。与开发人员负载关联的方法在2.2版中已被否决，在3.0版中已被移除。</a></p></blockquote><h2 id="ef4e" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">核实产品的购买</h2><p id="8870" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">使用下面的代码，我们可以实现这个特性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="8cc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想验证您的产品是否已经被购买，请调用此方法。我建议你在<em class="lv">onbillinitialized()</em>内部调用这个方法，以确保<em class="lv"> BillingProcessor </em>已经初始化。</p><h2 id="f717" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">恢复购买</h2><p id="78eb" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">使用下面的代码，我们也可以实现这个特性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="faff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调用此方法来恢复购买。</p><h2 id="c531" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">重置付款</h2><p id="7614" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">您可能希望在发布支付之前测试几次。问题是，一旦你支付了项目，你不能“删除”付款，但实际上有一种方法可以做到这一点。你可以“消费”你刚买的东西。当你想购买额外的物品时，这主要用于游戏。比如你可以买一些硬币或者一把强化剑。这对测试我们的应用程序也很有用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="c654" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，这很简单。我建议你在<em class="lv">onbillinitialized()</em>方法内部使用它。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="218f" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">第四步。</h1><h2 id="be6f" class="ou mh iq bd mi ov ow dn mm ox oy dp mq lf oz pa ms lj pb pc mu ln pd pe mw pf bi translated">测试应用内购买</h2><p id="d52c" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">如果您的应用程序未在Play Store中发布，则您不能使用应用程序内购买项目。要测试和使用它们，您必须将测试应用程序的帐户声明为测试帐户。为此，请进入Google Play控制台-&gt;所有应用-&gt;设置-&gt;许可证测试。记下您想要使用的账户，并在下拉菜单中选择<em class="lv">许可</em>。将您的帐户设置为测试者帐户，当您购买产品时将不会被收费。</p><p id="3165" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您不能使用与Google Play控制台相同的帐户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/80633bcaa9f9d8acc5b1d9cc765a8cc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tta-hJ1RtSdisOeqfe4kUg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://support.google.com/googleplay/android-developer/answer/6062777" rel="noopener ugc nofollow" target="_blank">更多信息请点击此处</a></p></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="acff" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">步骤5(如果您使用内部测试)。</h1><p id="33d8" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">为了在内部测试中测试应用内购买，你需要做一个额外的步骤。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/3838b4451a929a982e878040202bc388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I711O7LP9R-eIVEER6089Q.png"/></div></div></figure><ul class=""><li id="8c0b" class="og oh iq ky b kz la lc ld lf oi lj oj ln ok lr ol om on oo bi translated">首先，在<em class="lv">列表名称</em>中插入您想要测试的设备上的电子邮件(红色矩形)</li><li id="504c" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">其次，复制链接(蓝色矩形)</li><li id="5753" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">第三，接受邀请。如果您已经使用想要用来测试应用程序的帐户登录到play store，您可以从您的pc上执行此操作，或者只需将其复制到您的手机中，然后从那里打开play store。</li></ul></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="0908" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">处理问题</h1><p id="9f80" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">如果应用内购买不起作用，请尝试遵循以下步骤:</p><ul class=""><li id="536a" class="og oh iq ky b kz la lc ld lf oi lj oj ln ok lr ol om on oo bi translated">您正在运行的应用程序的<code class="fe nw nx ny nz b">versionCode</code> <em class="lv"> </em>必须与您在Google Play控制台中加载的APK相同</li><li id="9e90" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">您用于测试的帐户与您用于在Play store中发布应用的帐户不同</li><li id="bf03" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">您用于测试的帐户已被声明为测试帐户。如果没有，<a class="ae kv" href="https://support.google.com/googleplay/android-developer/answer/6062777" rel="noopener ugc nofollow" target="_blank">将您的帐户设置为测试者</a></li><li id="5b31" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">您的应用程序<strong class="ky ir">必须在Play Store中发布</strong>。如果您正在测试您的应用程序，您可能希望在内部测试部分发布它。如果您的应用程序正在<em class="lv">审查中</em>，则该应用程序尚未发布。因此，应用内购买不起作用</li><li id="f9de" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">如果您的应用刚刚发布，可能需要几个小时才能实现应用内购买</li><li id="d689" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">如果你刚刚创建了一个应用内产品，你可能需要等待几个小时才能真正运行</li></ul></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="9cf6" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">参考</h1><ul class=""><li id="05d4" class="og oh iq ky b kz nq lc nr lf pj lj pk ln pl lr ol om on oo bi translated"><a class="ae kv" href="https://github.com/anjlab/android-inapp-billing-v3" rel="noopener ugc nofollow" target="_blank">安卓应用内计费v3库</a></li><li id="bbfb" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated"><a class="ae kv" href="https://medium.com/better-programming/how-to-implement-in-app-purchases-in-your-android-app-7cc1f80148a4" rel="noopener">在您的Android应用中实现应用内购买</a></li><li id="e1ec" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated"><a class="ae kv" href="https://developer.android.com/google/play/billing" rel="noopener ugc nofollow" target="_blank">安卓开发者:应用内购买</a></li></ul></div></div>    
</body>
</html>