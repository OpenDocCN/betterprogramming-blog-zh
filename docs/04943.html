<html>
<head>
<title>How to Manage React State Without Redux by Using Context Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用上下文挂钩管理React状态而不使用Redux</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/manage-react-state-without-using-redux-and-using-context-hooks-8c4e7a2d7d1d?source=collection_archive---------8-----------------------#2020-05-25">https://betterprogramming.pub/manage-react-state-without-using-redux-and-using-context-hooks-8c4e7a2d7d1d?source=collection_archive---------8-----------------------#2020-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5056" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何从你的应用中删除Redux</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d56df2eb8cfbe36f7079a3cd7e916edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4suuyITaj37yU9bJ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@brookanderson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布鲁克·安德森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="c631" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本上，我们在应用程序中使用<a class="ae kv" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>进行状态管理。它帮助我们以更好的可视化来调试状态。但是，它会影响应用程序的性能，因为我们需要编写动作、reducers等。它增加了组件的渲染器。redux的主要缺点是它的文件大小，因为我们需要使用Redux、react-redux、redux-thunk等。</p><p id="3f1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从钩子部分开始。钩子是React上预定义的方法。它们速度快，重量轻，不需要使用额外的库。React钩子是在React 16.8中引入的，但是很多开发者还是不熟悉。</p><p id="e031" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:钩子只能在函数组件中使用。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2413" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">反应挂钩示例</h1><p id="e8c9" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们创建一个状态挂钩，我们将在其中管理单个状态:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="502c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的例子是简单的状态管理。要了解关于钩子生命周期的更多信息，请参见下面的文档:</p><div class="my mz gp gr na nb"><a href="https://reactjs.org/docs/hooks-effect.html" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">使用效果钩-反应</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">钩子是React 16.8中的新增功能。它们允许您使用状态和其他React特性，而无需编写类。的…</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">reactjs.org</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kp nb"/></div></div></a></div><p id="6c04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的例子不会解决在组件之间传递状态的问题。React使用上下文来解决这个问题，但是对于钩子，上下文不同于类组件。上下文可以使用使用props的类组件。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a826" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">带有状态挂钩的React上下文示例</h1><p id="ce08" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们创建一个上下文，并在挂钩中使用它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7319" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">已经为主题创建了上下文和挂钩。现在我们将在组件中使用这些:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="8a73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们可以在子组件中使用钩子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/c511465366f5a7f159ee769a777f2c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*aeIefhK-vpXwHXR56KAPQA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在这里，你可以看到开发工具中的主题挂钩。</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b92d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">带有Reducer挂钩的React上下文示例</h1><p id="f7ec" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在这个例子中，我们使用了使用React钩子的上下文。它非常简单并且易于维护，但是如果我们有大量的数据(例如，一个有许多键的对象)，将它存储在状态钩子中并不是一个好主意，因为如果你忘记一个键来设置状态，它可能会破坏你的应用程序。React有reducer钩子来维护钩子中的大量数据。</p><p id="ddf7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:不能同时使用state和reducer挂钩。</p><p id="094b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们创建一个用户上下文来存储用户详细信息、登录状态、令牌等。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c11f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的文件中，我们已经用一个reducer创建了用户上下文。让我们在组件中使用它。首先，我们需要在父组件中使用提供者:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="6223" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以在子组件中使用<code class="fe nr ns nt nu b">useUser</code> <em class="nv"> </em>钩子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b3016d5c3c67874f32c2128e11e93a34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*1Dl-8uBrnTibxl2RZ4AHeA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">现在，您可以在组件中看到用户和主题挂钩。</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="000c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="0c0b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我希望你理解这个例子。我在下面附上了GitHub回购链接。克隆它并在您的本地系统上运行它，这样您可以更好地理解它。</p><div class="my mz gp gr na nb"><a href="https://github.com/santanup/Manage-React-state-without-using-Redux-and-using-Context-hooks" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">Santa NUP/Manage-React-state-without-using-Redux-and-using-Context-hooks</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">github.com</p></div></div><div class="nk l"><div class="nw l nm nn no nk np kp nb"/></div></div></a></div></div></div>    
</body>
</html>