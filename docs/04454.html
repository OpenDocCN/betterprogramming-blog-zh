<html>
<head>
<title>Learning Flutter Animations for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者学习颤振动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/exploring-animations-in-flutter-for-beginners-147151a794?source=collection_archive---------10-----------------------#2020-04-14">https://betterprogramming.pub/exploring-animations-in-flutter-for-beginners-147151a794?source=collection_archive---------10-----------------------#2020-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b001" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建脱颖而出的应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bf7850c2eb7443959ba81183c6302f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9wtpl_OB3UAVMmgWEBQBGg.png"/></div></div></figure><p id="083d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们开始之前，您应该了解有状态和无状态小部件的基础，差不多就这些了！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="47f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">动画可以帮助你构建更具视觉吸引力的<a class="ae ls" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>应用程序。就像如何添加一些简单的动画来制作演示文稿一样:</p><ul class=""><li id="479f" class="lt lu it kw b kx ky la lb ld lv lh lw ll lx lp ly lz ma mb bi translated">视觉上吸引人。</li><li id="73cc" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated">在需要的时候，在正确的地方引起用户的注意。</li><li id="614b" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated">让它不那么无聊。</li></ul><p id="3042" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，我们可以利用动画来使我们的Flutter应用程序更加出色。</p><p id="a624" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">今天我们将从一些简单的动画开始，但是随着我们的进步，我们将学习和添加更复杂的动画。</p><p id="7c8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有示例代码都将在每个示例的末尾作为gists提供。</p><p id="2ec6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将是一个漫长而详尽的解释。请耐心点，对这个故事有点信心，你肯定会对Flutter动画充满信心。</p><p id="8555" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果很简单，每个人都会做。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="4362" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">1.简单滑动动画</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/b3d20e889e84d9ea33d95f55c2c54917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/1*SM7C_JwvKPTF3XkgYHW81Q.gif"/></div></figure><p id="48c5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于动画，您需要以下内容:</p><ul class=""><li id="658a" class="lt lu it kw b kx ky la lb ld lv lh lw ll lx lp ly lz ma mb bi translated"><code class="fe nh ni nj nk b">AnimationController</code> —定义何时开始动画并控制动画，因此称为<code class="fe nh ni nj nk b">AnimationController</code>。</li><li id="8bf7" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated">动画<strong class="kw iu"> </strong> —使用<code class="fe nh ni nj nk b">Curves</code>定义动画的风格，使用<code class="fe nh ni nj nk b">Intervals</code>定义动画的时长。我们将在下面的例子中探讨这两个问题。</li><li id="6269" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated">小部件——您想要制作包含在<code class="fe nh ni nj nk b">Transform</code>和<code class="fe nh ni nj nk b">AnimationBuilder</code>小部件中的动画。</li><li id="3bfc" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated">您想要制作动画的小部件应该是使用名为<code class="fe nh ni nj nk b">SingleTickerProviderStateMixin</code>的mixin的有状态小部件。</li></ul><p id="7ba0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你不知道<a class="ae ls" href="https://dart.dev/" rel="noopener ugc nofollow" target="_blank"> Dart </a>中的mixin:mixin指的是向你自己的类添加另一个类或多个类的能力，而不是从那些类继承。</p><p id="791e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，我们定义了<code class="fe nh ni nj nk b">Animation</code>和<code class="fe nh ni nj nk b">AnimationController</code>。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="df14" class="np mp it nk b gy nq nr l ns nt">Animation slidingAnimation;<br/>  AnimationController slidingBoxAnimationController;</span></pre><p id="a313" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们必须在<code class="fe nh ni nj nk b">initState()</code>函数中初始化它们，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu lr l"/></div></figure><p id="1d2c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，让我们在<code class="fe nh ni nj nk b">AnimatedBuilder()</code>和<code class="fe nh ni nj nk b">Transform()</code>的帮助下编写<code class="fe nh ni nj nk b">build()</code>函数来构建我们的小部件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu lr l"/></div></figure><p id="7f99" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们用一个<code class="fe nh ni nj nk b">Transform</code>和一个<code class="fe nh ni nj nk b">AnimatedBuilder</code>包装整个小部件。</p><p id="2b53" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">观看这段一分钟视频，了解更多关于<code class="fe nh ni nj nk b">AnimatedBuilder</code>的信息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv lr l"/></div></figure><ul class=""><li id="d9a5" class="lt lu it kw b kx ky la lb ld lv lh lw ll lx lp ly lz ma mb bi translated"><code class="fe nh ni nj nk b">AnimatedBuilder</code>需要传递一个动画，因此，我们将我们的<code class="fe nh ni nj nk b">slidingAnimation</code>传递给它。</li><li id="8c18" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated"><code class="fe nh ni nj nk b">Transform</code>使用一个<code class="fe nh ni nj nk b">Matrix</code>(我们中的一些人可能会从数学中记住它，但你真的不必成为使用它的专家，只需使用<code class="fe nh ni nj nk b">Matrix4</code>)。</li><li id="5b08" class="lt lu it kw b kx mc la md ld me lh mf ll mg lp ly lz ma mb bi translated">我们使用<code class="fe nh ni nj nk b">translationValues</code> <strong class="kw iu"> </strong>，它采用(x，y，z)值来指定您想要平移/移动到哪个坐标。我们只想水平移动，因此我们只定义x轴，将y和z设为0.0。</li></ul><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="7c73" class="np mp it nk b gy nq nr l ns nt">Matrix4.translationValues(x, y, z)</span><span id="5840" class="np mp it nk b gy nw nr l ns nt">Matrix4.translationValues(someValueOf, 0.0, 0.0)</span></pre><h2 id="8f7c" class="np mp it bd mq nx ny dn mu nz oa dp my ld ob oc na lh od oe nc ll of og ne oh bi translated">为了定义x值，让我们试着想想解决方案</h2><p id="7978" class="pw-post-body-paragraph ku kv it kw b kx oi ju kz la oj jx lc ld ok lf lg lh ol lj lk ll om ln lo lp im bi translated">这样，你将学会如何在将来为你自己的动画写尺寸。</p><p id="93ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们不在<code class="fe nh ni nj nk b">x,y,z</code>中定义任何翻译值，并将其保留为<code class="fe nh ni nj nk b">(0,0,0)</code>，我们的小部件将位于屏幕的中央。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/cb2e1353e852ae1b6e20b9a8965a5286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTvAj80rr4JR88NvL3OYog.png"/></div></div></figure><p id="14d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">试着自己改变x的值，看看会有什么变化，我正在为x尝试-100。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/b6bf511a34fe81d7c0e5eb80591b1f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZKzZz3i3BzqComP2qc5E3g.png"/></div></div></figure><p id="770b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，在动画开始的时候，我想把它完全从屏幕上隐藏起来。所以，我就改成<code class="fe nh ni nj nk b">(-widthOfScreen, 0.0, 0.0)</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/218ff00ea987a35e2a2505e88f33d27c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xWBM0TrZ7zS3dlY-pLWYQQ.png"/></div></div></figure><p id="43df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你还记得当我们用值<br/> <code class="fe nh ni nj nk b">(begin: -1.0, end: 0.0)</code>定义<code class="fe nh ni nj nk b">slidingAnimation</code>时，这意味着当动画开始时，<code class="fe nh ni nj nk b">animation.Value</code>将是<code class="fe nh ni nj nk b">-1.0</code>，当动画结束时，<code class="fe nh ni nj nk b">animation.value</code>将是<code class="fe nh ni nj nk b">0.0</code>。我们能利用这一点吗？太好了。</p><p id="1f6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，我们最后把值设置为<code class="fe nh ni nj nk b">(widthOfScreen * animtion.value, 0.0, 0.0)</code>。我们去掉了负号，因为<code class="fe nh ni nj nk b">animation.value</code>已经是负数了，因此最终乘积也将是负数。</p><p id="da22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望你能想象它将如何动画。</p><p id="1e9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">待办事项:</strong>记录<code class="fe nh ni nj nk b">animation.value</code>和(<code class="fe nh ni nj nk b">widthScreen</code> * <code class="fe nh ni nj nk b">animation.value</code>)的最终产品，查看更新后的x值。</p><p id="04bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后一个值将是0.0，这是<code class="fe nh ni nj nk b">width * 0 = 0</code>的位置。当小部件到达中心时，这就是期望的<code class="fe nh ni nj nk b">x</code>坐标。</p><p id="2c1b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们的动画开始时，我们的动画值将在0和1之间变化。</p><p id="6f33" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是这个例子的完整的注释代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu lr l"/></div></figure><p id="3e16" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">想出一个从屏幕底部中心到中心的动画方法。</p><p id="6ec7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我能理解这对你来说很难接受。花点时间自己尝试一下，从头开始编写整个代码。休息一下，你值得，以后再继续。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="381f" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">2.让我们更上一层楼</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/ef66aca9b3fe2982d2de997718edbc63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*RFyIvmkUAzlaXXMU.gif"/></div></div><p class="oq or gj gh gi os ot bd b be z dk translated">在这个故事的结尾，我们期望的输出</p></figure><p id="ec17" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以上是我们将要建立的。</p><p id="cf03" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们再添加两个<code class="fe nh ni nj nk b">Animation</code>对象和小部件的副本。这是你现在应该有的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/153378b9af6cb51bb01ba46d82fc342e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*yFFCfCNwakFSHb-T.gif"/></div></figure><p id="07f3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为我们必须添加一个时间差，所以我们使用<code class="fe nh ni nj nk b">interval</code>来完成。</p><p id="8f03" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们在定义<code class="fe nh ni nj nk b">Animation</code>时会在<code class="fe nh ni nj nk b">Curve</code>中增加一个<code class="fe nh ni nj nk b">interval</code>参数。</p><pre class="kj kk kl km gt nl nk nm nn aw no bi"><span id="40c0" class="np mp it nk b gy nq nr l ns nt"><strong class="nk iu">slidingAnimation</strong> = Tween(begin: -1.0, end: 0.0).animate(CurvedAnimation(<br/>    parent: slidingBoxAnimationController,<br/>    curve: Interval(0.0, 1.0, curve: Curves.<em class="ou">fastOutSlowIn</em>)));</span></pre><p id="04f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你还记得的话，我们的<code class="fe nh ni nj nk b">Animation</code>在1的范围内从-1到0，正如我们在<code class="fe nh ni nj nk b">begin</code>和<code class="fe nh ni nj nk b">end</code>中定义的那样。</p><p id="2658" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，在<code class="fe nh ni nj nk b">interval</code>中，我们也将幅度传递给<code class="fe nh ni nj nk b">begin</code>和<code class="fe nh ni nj nk b">end</code>。因此，对于<code class="fe nh ni nj nk b">slidingAnimation</code>，动画将在幅度0到1的整个持续时间或间隔内发生。</p><p id="5767" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的<code class="fe nh ni nj nk b">animation</code>值可能在幅度为1的<code class="fe nh ni nj nk b">-1 to 0</code>或<code class="fe nh ni nj nk b">0 to 1</code>之间变化，这就是我们的<code class="fe nh ni nj nk b">interval</code>值。</p><p id="5e6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们将<code class="fe nh ni nj nk b">interval</code>添加到这两个额外的动画中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu lr l"/></div></figure><p id="93eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，我们在这里传递的间隔范围是从<code class="fe nh ni nj nk b">0.23 to 1.0</code>到<code class="fe nh ni nj nk b">0.43 to 1.0</code>。</p><p id="df0f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，当我们调用<code class="fe nh ni nj nk b">aniamtionController.forward()</code> <strong class="kw iu"> </strong>时，随着动画的值从<code class="fe nh ni nj nk b">0.0 to 1.0</code>(数量级)增加，并且当它达到<code class="fe nh ni nj nk b">0.23</code>的值时，<code class="fe nh ni nj nk b">delayedSlidingAnimation</code> <strong class="kw iu"> </strong>将开始。</p><p id="8439" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当达到<code class="fe nh ni nj nk b">0.43</code>时，<strong class="kw iu"> </strong> <code class="fe nh ni nj nk b">furtherDelayedSlidingAnimation</code> <strong class="kw iu"> </strong>将开始，所有动画将继续，直到幅度值达到<code class="fe nh ni nj nk b">1.0</code>。</p><p id="6259" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为每个容器的<code class="fe nh ni nj nk b">AnimatedContainer</code>更新这个动画，并且不要忘记改变它们的颜色。</p><p id="52a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你应该能够制作这个动画:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/ef66aca9b3fe2982d2de997718edbc63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*RFyIvmkUAzlaXXMU.gif"/></div></div></figure><p id="3259" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">待办事项</strong>:尝试不同的音程计时，以获得不同的结果，并了解音程的不同行为。</p><p id="c03a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是第二个例子的完整代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu lr l"/></div></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="330d" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">结论</h1><p id="1231" class="pw-post-body-paragraph ku kv it kw b kx oi ju kz la oj jx lc ld ok lf lg lh ol lj lk ll om ln lo lp im bi translated">各位，今天就到这里吧！</p><p id="7538" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读！我希望这值得你花时间。如果你有任何建议或改进，请在评论中告诉我。</p></div></div>    
</body>
</html>