<html>
<head>
<title>Searching Files Is Easy With Python’s Glob Module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的Glob模块搜索文件很容易</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/searching-files-is-easy-with-pythons-glob-module-15ad170ba255?source=collection_archive---------22-----------------------#2022-07-11">https://betterprogramming.pub/searching-files-is-easy-with-pythons-glob-module-15ad170ba255?source=collection_archive---------22-----------------------#2022-07-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="563e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用最少的努力简化复杂的搜索</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1d98e95cb71a77c75dc53654bfe9be7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*968rZEHgjf4qHSKh"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@qwitka?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马克西姆·卡哈里茨基</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="3e81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数情况下，解析给定目录中的文件并对它们执行某些操作是一项简单的任务。</p><p id="56c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果您必须根据特定的标准来搜索文件，您将如何处理这种情况呢？最初的反应可能是添加额外的代码行来检查文件是否满足某些条件。</p><p id="f9f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这可能很麻烦，尤其是当搜索标准变得更加复杂时。</p><p id="2abd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Python的Glob模块使用户能够用最少的代码方便地搜索文件。</p><p id="7dd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们提供了Glob模块的快速概要，并展示了使其成为搜索文件的首选工具的特性。</p><h1 id="2b2c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么是Glob？</h1><p id="135c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">通常，当用户查找符合特定标准的文件时，他们必须添加一行代码来评估感兴趣的文件路径，并在路径符合标准时执行任务。</p><p id="4b79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，我们探索了一个名为“Birds”的文件夹，其中包含了图像和文本文件的集合。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/16b0e581ed5a9f89d7221ab53654b8d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vi_lsxcan1fXBX9URuyrlg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="8cd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们只想获得这个文件夹中的文本文件，我们可以使用下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/afe3cc8bec78cb2388f3ad8dfceac806.png" data-original-src="https://miro.medium.com/v2/resize:fit:230/format:webp/1*VnQ4UBDn8Z5xfaOe_eapoA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="3616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该方法需要使用一行来解析所有文件路径，使用另一行来检查文件是否满足特定条件。这是一种可行的方法，但是随着搜索条件的增加，这种方法变得不太理想。</p><p id="8473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您要搜索的文件路径必须满足多个条件，您会怎么做？使用上面的方法，您将不得不添加更多的if语句或延长当前的if语句，这只会使代码更不简洁，可读性更差。</p><p id="c8e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用最少的努力定义所有的搜索标准不是更好吗？这就是Glob的用武之地。</p><h1 id="23ed" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">一团</h1><p id="938e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Glob模块旨在允许用户查找符合特定标准的文件。</p><p id="5167" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它要求用户使用搜索模式来定义标准，这些搜索模式将用于匹配相关的文件路径。这些搜索模式可以包含特殊字符，这些字符提供了定制搜索操作以满足用户需求的方法。</p><p id="59aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Glob中定义搜索模式不应该是一个陌生的概念，因为模块中使用的搜索模式类似于正则表达式，后者通常用于搜索字符串，而不仅仅是文件路径。</p><p id="2653" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，即使您是定义搜索模式的新手，熟悉这个工具应该没有什么困难。</p><p id="079d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Glob中的搜索模式主要利用了特殊字符:<code class="fe mw mx my mz b">*</code>、<code class="fe mw mx my mz b">?</code>和<code class="fe mw mx my mz b">[]</code>。</p><p id="69a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要更深入地了解这些特殊字符的功能，请查看Glob模块的<a class="ae ky" href="https://docs.python.org/3/library/glob.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="1cb5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">个案研究</h1><p id="da83" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们用Glob执行一些操作，从“Birds”文件夹中获取文件路径。这些操作将利用一些特殊字符来定义适合感兴趣的任务的搜索模式。</p><h2 id="7ca8" class="na lw it bd lx nb nc dn mb nd ne dp mf li nf ng mh lm nh ni mj lq nj nk ml nl bi translated"><strong class="ak"> 1。列出所有文件路径</strong></h2><p id="a18b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">glob模块中的许多操作都可以用同名的<code class="fe mw mx my mz b">glob</code>方法来执行，该方法显示所有与用户在参数中定义的搜索模式相匹配的文件路径。</p><p id="8ef8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了找到文件夹中的所有路径，我们可以使用<code class="fe mw mx my mz b">*</code>字符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/d3e7972d04e03f9d37630674e03ef905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*02ihvnZLomFouMayHGNblw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><h2 id="8dcf" class="na lw it bd lx nb nc dn mb nd ne dp mf li nf ng mh lm nh ni mj lq nj nk ml nl bi translated"><strong class="ak"> 2。获取当前目录下的所有文本文件</strong></h2><p id="a794" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们可以调整之前的搜索模式，只选择文本文件，而不是搜索“Birds”文件夹中的所有文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b352f1d7348c45cbc4c9619667ef11e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:342/format:webp/1*C8UEFD5ckmttGUF3UftB8w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="282b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过将感兴趣的扩展名类型包含到glob方法的参数中，用户可以过滤掉不需要的文件类型，而无需添加任何额外的代码行。</p><p id="8f19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。获取所有以“e”或“s”开头的文件</strong></p><p id="1879" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们只希望获得以e或s开头的文件路径。</p><p id="0642" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以通过使用“[]”特殊字符来执行。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/9a1fd541206df82ba1ee9f9615114dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:354/format:webp/1*GV9kj2rY4hJoBSInmd2LPQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><h2 id="5e22" class="na lw it bd lx nb nc dn mb nd ne dp mf li nf ng mh lm nh ni mj lq nj nk ml nl bi translated"><strong class="ak"> 4。获取目录和所有子目录中的所有jpg文件。</strong></h2><p id="a385" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">最后，我们不仅希望选择当前文件夹中的jpg文件，还希望选择子目录中的jpg文件。当前的“Birds”文件夹还包含另一个名为“Not Birds”的文件夹，该文件夹可能也有jpg文件。</p><p id="ac50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得当前目录以及子目录中的jpg文件，用户可以将<code class="fe mw mx my mz b">**</code>字符合并到搜索模式中，执行递归读取。</p><p id="6dbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和前面的例子一样，<code class="fe mw mx my mz b">glob</code>方法能够执行这个任务。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="dae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法是可行的，但是对于较大的目录来说，它会导致较长的运行时间，并且是内存低效的，因为所有的文件路径都直接存储在内存中。</p><p id="ffce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个更好的选择是利用<code class="fe mw mx my mz b">iglob</code>方法。</p><p id="6d6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mw mx my mz b">iglob</code>方法与<code class="fe mw mx my mz b">glob</code>方法的不同之处在于，它返回一个迭代器对象，而不是一次收集所有值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/4f2a999d1a4cf40a15013d5f42e7f0aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*G1F9_HAcsHuxDl1UrTamXg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><p id="fff5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，目录和子目录中的文件可以以更节省内存的方式进行解析。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/a5effbc6a8bf56232886631c247c1e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*y1Z4IGSS9IVCPse0yjM0rA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码输出(由作者创建)</p></figure><h1 id="f58e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/a859b35b3cc0dccaaeb76e6ea5c5598d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wyVTSKMA5IfqulPW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@prateekkatyal?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Prateek Katyal </a>拍摄</p></figure><p id="e527" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Glob模块使用户能够以最少的代码使用更具体的标准来方便文件搜索，这要归功于它使用了搜索模式，搜索模式可以包含特殊字符。</p><p id="e22c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要更深入了解该模块及其其他功能，请随意查看其<a class="ae ky" href="https://docs.python.org/3/library/glob.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="d6eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>