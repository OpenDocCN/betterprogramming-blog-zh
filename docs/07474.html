<html>
<head>
<title>How To Create Aesthetically Pleasing Visualizations With Chart.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Chart.js创建美观的可视化效果</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-aesthetically-pleasing-visualizations-with-chart-js-4b3bb619c3ff?source=collection_archive---------3-----------------------#2021-01-19">https://betterprogramming.pub/how-to-create-aesthetically-pleasing-visualizations-with-chart-js-4b3bb619c3ff?source=collection_archive---------3-----------------------#2021-01-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="471a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用开源软件升级你的图表游戏</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c7e54d0b026c16f0ed12d0acdab81820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6wp6xn1GJfKE8uIuNbm7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@lukechesser?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">卢克·切瑟</a>在<a class="ae ky" href="https://unsplash.com/s/photos/charts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片(作者编辑)。</p></figure><p id="7284" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前端开发人员发现处理前端图表很困难，这是因为他们通常不处理<code class="fe lv lw lx ly b">canvas</code>或自定义<code class="fe lv lw lx ly b">svg</code>元素。由于所有的图表库都使用这两种方法，所以不难理解为什么不容易。</p><p id="36d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> Chart.js </a>是一个免费的开源库，可以取代购买Highcharts等库的昂贵许可证的需要。这些付费库通常非常强大，您不会在Chart.js中找到这么多功能，但是您仍然可以做很多事情——尤其是对于更简单的项目。</p><p id="1b14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现Chart.js图表的默认外观充其量也就一般，所以我将解释如何使用该库创建漂亮的图表。</p><p id="1a95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是默认折线图的样子，但我绝不会在实际生产环境中使用这样的东西，因为它会破坏仪表板的整体外观:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/c0e283fa694aa87a17be1069b71db5f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l-wUmJX2fwhXhepVfKF7tQ.png"/></div></div></figure><p id="4db9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了简单起见，我将选择一个我喜欢的图表，并解释如何为您的图表创建完全相同的外观。我喜欢bare metrics<a class="ae ky" href="https://demo.baremetrics.com" rel="noopener ugc nofollow" target="_blank">上的图表，所以我将使用不同的颜色复制这种外观。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ma"><img src="../Images/0dcd0e88fea302cfd992ef525a13d080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s55DqhTtEZ-d8duqqcUrsg.png"/></div></div></figure><p id="f456" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们从Chart.js中的一个基本折线图开始。</p><p id="a365" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mb">注意:你可以跟着代码练习。文章的最后给出了完整的代码。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="5421" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的折线图，只有最基本的设置，看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/c500631c43fe42c03f744da66340bd62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kr0t35rCYJAZ6MIM3hkJqg.png"/></div></div></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="3eaf" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">设计线条本身</h1><p id="2a9b" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">让我们看看如何设计这一行，使它看起来更像我们的例子。为了避免公然复制图表，我将在示例的其余部分使用蓝色(<em class="mb"> #3ABEFF </em> ) <em class="mb"> </em>):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="63ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们解释一下我们正在做的事情的基本情况。我们原来的线太细，没有合适的颜色。更重要的是，它显示了图表中每个点的点，并且在线和X轴之间有一个填充。最后，我们的原始图表太弯曲了，而我们正在使用的例子没有那么弯曲。</p><ul class=""><li id="e1d8" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">通过设置<code class="fe lv lw lx ly b">borderWidth</code>，我们使线条变得更粗。</li><li id="13a2" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">通过将<code class="fe lv lw lx ly b">fill</code>设置为<code class="fe lv lw lx ly b">false</code>，我们消除了图表和X轴之间的填充。</li><li id="b13a" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">属性为线条本身设置颜色。</li><li id="af6d" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">使用<code class="fe lv lw lx ly b">pointRadius</code>和<code class="fe lv lw lx ly b">pointHoverRadius</code>，我们确保显示的点(或点)在任何时候都是隐藏的，包括在悬停时。</li><li id="c6fe" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">使用<code class="fe lv lw lx ly b">lineTension</code>，我们降低了线条的弯曲度。</li></ul><p id="5657" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们现在的图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/c5bf0d355339c8bf9afdb933cafe919c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_uieRaAv3RUapIkznCJsw.png"/></div></div></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="c9f6" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">改善电网</h1><p id="0759" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">我们还有改进的空间，所以让我们隐藏网格线，使图表看起来更干净。</p><p id="aaec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要创建一个<code class="fe lv lw lx ly b">options</code>对象，并将其传递给我们的<code class="fe lv lw lx ly b">Chart</code>构造函数。如果您需要了解基本用法，请随意查阅Chart.js文档的<a class="ae ky" href="https://www.chartjs.org/docs/latest/getting-started/" rel="noopener ugc nofollow" target="_blank">入门</a>部分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="b7ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">制作<code class="fe lv lw lx ly b">display</code>和<code class="fe lv lw lx ly b">drawBorder</code> <code class="fe lv lw lx ly b">false</code>将确保隐藏所有网格线，包括X轴和Y轴的边界。您可能注意到了，<code class="fe lv lw lx ly b">xAxes</code>和<code class="fe lv lw lx ly b">yAxes</code>接受数组。这是针对有多个数据集的情况。我们这里只有一个，所以没什么可做的了。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="14c6" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">自定义刻度</h1><p id="8fb1" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">如果您不确定什么是刻度，它们是图表底部的小标签和图表左侧的值。我们也想定制它们，让它们看起来像我们想要的那样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="e6c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这里只显示了<code class="fe lv lw lx ly b">yAxes</code>，但是你也可以将<code class="fe lv lw lx ly b">fontColor</code>和<code class="fe lv lw lx ly b">fontSize</code>传递给<code class="fe lv lw lx ly b">xAxes</code>来改变颜色和字体大小。</p><p id="0f50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">callback</code>方法允许我们以任何想要的方式定制字符串。在这种情况下，我们在前面加上一个货币符号，但也使用正则表达式规则在大数中包含逗号(例如，1000显示为1，000)。</p><p id="0cdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看改进网格和刻度后我们有什么。看起来我们正在到达那里，不是吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/23a7a1259c9221b82210c1da10707b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0O81vss-MIXSUsFvm-xzJg.png"/></div></div></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="2b2b" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">创建自定义HTML工具提示</h1><p id="fa13" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">现在是最困难但也是最重要的事情:创建漂亮的定制HTML工具提示来替换Chart.js附带的通用工具提示。</p><p id="72ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建自定义HTML工具提示允许您完全自定义它们，并获得美观的结果。</p><p id="978e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何使用Chart.js来实现这一点。在<code class="fe lv lw lx ly b">options</code>中，您必须使用<code class="fe lv lw lx ly b">tooltips</code>配置:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="49f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一个接一个地看一下这些配置，这样您就能理解一切是如何工作的。</p><ul class=""><li id="84a9" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><code class="fe lv lw lx ly b">enabled</code>:表示是否应该启用默认的Chart.js工具提示。我们必须将其设置为<code class="fe lv lw lx ly b">false</code>来使用我们自己的自定义工具提示。</li><li id="6329" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><code class="fe lv lw lx ly b">custom</code>:每当工具提示必须显示时，我们可以设置一个自定义回调。在我们的例子中，我们将值设置为<code class="fe lv lw lx ly b">processTooltipModel</code>，我们将在后面创建它。</li><li id="dcd5" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><code class="fe lv lw lx ly b">intersect</code>:当<code class="fe lv lw lx ly b">intersect</code>设置为<code class="fe lv lw lx ly b">true</code>时，默认情况下，只有当用户的光标与线上的点相交时，工具提示才会出现。我发现当用户水平移动时显示工具提示比UX方式好得多，即使没有交叉。</li><li id="1409" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><code class="fe lv lw lx ly b">mode</code> : <strong class="lb iu"> </strong>使用<code class="fe lv lw lx ly b">index</code>模式，工具提示将出现在X方向最近的项目上。例如，如果我们使用<code class="fe lv lw lx ly b">nearest</code>，它会找到两个方向上最近的项目，而<code class="fe lv lw lx ly b">point</code>只会在我们与线上的实际点相交时显示工具提示。</li></ul><p id="eb50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们为工具提示创建HTML部分:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="6e30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要将图表包装在一个容器中，这样当我们定位工具提示时，它将相对于图表的容器。我们有两个空的部分:一个用于标签，另一个用于值，我们将在需要时动态更新。</p><p id="a35b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们创建<code class="fe lv lw lx ly b">processTooltipModel</code>函数来更新我们的工具提示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="be68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们来解释一下这是怎么回事。如果工具提示模型没有主体，这意味着我们没有什么可显示的，这就是为什么我们<code class="fe lv lw lx ly b">return</code>。否则，我们使用工具提示模型中的值来动态更新工具提示。</p><p id="b2f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mb">注意:如果你使用Vue、React或Angular，你可以将工具提示模型或其属性作为道具来动态定位工具提示组件。</em></p><p id="a51a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">caretX</code>和<code class="fe lv lw lx ly b">caretY</code>向我们显示了工具提示的X和Y位置，因此，我们使用它们来设置<code class="fe lv lw lx ly b">left</code>和<code class="fe lv lw lx ly b">top</code> CSS属性。我们还将<code class="fe lv lw lx ly b">display</code>设置为<code class="fe lv lw lx ly b">block</code>以显示工具提示元素。最后，我们用实际值替换值和标签部分。</p><p id="22ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:我们根据工具提示的高度从顶部位置减去一个额外的位，以在工具提示和行之间创建一些空白。</p><p id="6a08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了完成这个例子，下面是容器的CSS和使一切工作的工具提示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="d461" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而这就是结果！这个例子中的工具提示非常简单，但是你可以用CSS对它进行任意的定制，以得到你想要的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/cafbc1e70eec0a777a94907f0c4a0aa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/1*jutE_9egGcI0gpVjWNfMbg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者创作的演示GIF</p></figure><h2 id="f7fe" class="oa mn it bd mo ob oc dn ms od oe dp mw li of og my lm oh oi na lq oj ok nc ol bi translated"><em class="om">补充说明</em></h2><ul class=""><li id="5458" class="nj nk it lb b lc ne lf nf li on lm oo lq op lu no np nq nr bi translated">您在这条线上看到的点是通过在工具提示中添加一个<code class="fe lv lw lx ly b">after</code>伪元素来模拟的。由于工具提示总是与线条保持一定的像素距离，因此很容易对齐模拟点。</li><li id="6c86" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">示例图表显示了一条穿过该点并一直延伸到X轴的直线。这可以简单地用一个<code class="fe lv lw lx ly b">before</code>伪元素来完成。</li><li id="6a25" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">对于图表中更难的自定义元素，你必须学会如何在<code class="fe lv lw lx ly b">canvas</code>中渲染，这样你才能真正掌握这个库。但是默认的功能通常已经足够了。</li></ul></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="7690" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">结论</h1><p id="f73f" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">js是一个强大的图表库，适用于所有前端应用程序。如果你学会了我上面概述的基础知识，你就可以创建美观的图表。</p><p id="4a4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您应该能够定制您的线条、网格、记号，并创建定制的HTML工具提示。利用这些知识，您可以创建有用的图表，在您的应用程序中提供更多的可视化。</p><p id="6957" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在<a class="ae ky" href="https://gist.github.com/arisp8/4fac5b0eb30b4306c8b718778d43efab" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完整功能代码的要点。</p></div></div>    
</body>
</html>