<html>
<head>
<title>Build a Command-Line App in Node.js with Yargs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Yargs在Node.js中构建命令行应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-a-command-line-app-in-node-js-with-yargs-a6d06e61e9c4?source=collection_archive---------6-----------------------#2021-08-03">https://betterprogramming.pub/build-a-command-line-app-in-node-js-with-yargs-a6d06e61e9c4?source=collection_archive---------6-----------------------#2021-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9e17" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在Node.js中构建基于终端的应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/efcb7b1b05869a748aabebb5af8f924b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qPOLSm3Gt6xkN0fX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://unsplash.com/@amyhirschi" rel="noopener ugc nofollow" target="_blank"> Amy Hirschi </a>在<a class="ae ky" href="http://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="7acf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑使用Node.js构建终端项目的情况。解析参数的一种方法是使用<code class="fe lv lw lx ly b">process.argv</code>数组，如下所示:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="bae8" class="md me it ly b gy mf mg l mh mi">var myArgs = process.argv.slice(2);<br/>console.log("Your website name: ", myArgs[0]);<br/>console.log("Your favorite number", myArgs[1]);</span></pre><p id="84c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将是输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/1c69cdefb5cd64070d414566c7e706c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*D2VH7uGxbljkTtnG32gXnQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">上述代码的输出</p></figure><p id="883d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这可能行得通，但是代码中有一个小缺陷。通过数组索引引用你的参数不是很干净。如果客户端以错误的顺序传入参数会怎样？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/9d35a5e2bc7ec24837907303586b2d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*ULTQP1ja-Tb7y19ysO-lkg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">参数顺序不正确</p></figure><p id="2a49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是Yargs的用武之地。它允许开发人员毫无困难地构建交互式命令行工具。此外，该库还支持接受标志和构建帮助屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/705fafa0b8db759f7b9b9aa7190b8000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kErI0iDq9yQhC0fGT09wbQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Yargs能做什么</p></figure><p id="e398" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然已经谈了它的成果，那就开始吧！</p><p id="ce4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，您将构建一个程序，该程序将使用<a class="ae ky" href="https://github.com/mozilla/readability" rel="noopener ugc nofollow" target="_blank"> Mozilla的可读性API </a>从任何网站获取内容。该应用程序也将是全球性的；它可以从任何地方运行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/f2b9162716724ed5ed555855ffcf2578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*oaz3rUz2Isu5dPFvFukZIA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">本文的结果</p></figure><p id="32a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果用户传入<code class="fe lv lw lx ly b">-f</code>标志，它将下载所需页面的HTML。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/c11ce01bf9c664f1242890df501c2fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z9xvrL9F31TQr238EE_NAQ.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保存到文件</p></figure><p id="6bef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保存的HTML将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/43b1bdfa39844586fe3dadaf554873a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*BPyN3wViu-7AZEJpCS7FPQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保存的HTML</p></figure><h1 id="3a25" class="mo me it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">入门指南</h1><h2 id="3e6b" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">项目初始化</h2><p id="6265" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">要使用NPM搭建项目，请运行以下bash命令:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="84e9" class="md me it ly b gy mf mg l mh mi">mkdir reader <br/>cd reader<br/>touch index.js<br/>mkdir utils <br/>npm init -y</span></pre><h2 id="3ec4" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">模块安装</h2><p id="5e86" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">对于这个项目，我们需要以下包:</p><ul class=""><li id="8ece" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">@mozilla/readability</code>:这个包会从想要的页面中提取文本内容。</li><li id="9c22" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">chalk</code>:向终端输出彩色文本。</li><li id="17a4" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">got</code>:获取网站的HTML代码。</li><li id="0315" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">dompurify</code>和<code class="fe lv lw lx ly b">jsdom</code>:删除页面源代码中的恶意JavaScript。因此，这阻止了XSS的攻击。</li><li id="aa5a" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><code class="fe lv lw lx ly b">yargs</code>:读取命令行参数。</li></ul><p id="202a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获取这些依赖关系，请运行以下终端命令:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c9af" class="md me it ly b gy mf mg l mh mi">npm i @mozilla/readability chalk got dompurify jsdom yargs</span></pre><p id="e405" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，就该编写我们的应用程序了。</p><h1 id="1e3e" class="mo me it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">构建项目</h1><h2 id="3e16" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">显示帮助屏幕</h2><p id="1b44" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">如果用户输入了错误的参数或者使用了<code class="fe lv lw lx ly b">--help</code>参数，那么我们的程序应该向控制台输出可用的选项。</p><p id="cd6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，在<code class="fe lv lw lx ly b">index.js</code>中编写以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><ul class=""><li id="bb11" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">第2–4行:描述<code class="fe lv lw lx ly b">--site</code>选项。它将有一个别名<code class="fe lv lw lx ly b">-s</code>。</li><li id="fffd" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第6–8行:描述<code class="fe lv lw lx ly b">--file</code>参数。它的更短的选择将是<code class="fe lv lw lx ly b">-f</code>。</li><li id="369f" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第10行:告诉Yargs<code class="fe lv lw lx ly b">--site</code>选项将是强制性的。没有它，计划将无法进行。</li><li id="6bba" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第13行:出于调试目的，将客户端的参数输出到终端。</li></ul><p id="732e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将是代码的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/68afb8f7a2f878256949e2ba6ec26f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*P8S_rjF45nmhTId8YPzl2g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">守则的结果</p></figure><p id="3567" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！我们的代码有效。现在，让我们编码我们的效用函数。</p><h2 id="97f0" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">解析网站</h2><p id="34f9" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在你的<code class="fe lv lw lx ly b">utils</code>文件夹中，创建一个名为<code class="fe lv lw lx ly b">readerUtils.js</code>的文件。这里，从编写以下代码开始:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><ul class=""><li id="42d9" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">第7行:将我们的<code class="fe lv lw lx ly b">JSDOM</code>实例传递给<code class="fe lv lw lx ly b">DOMPurify</code>。我们将用它来净化传入的HTML代码。</li></ul><p id="96bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在该文件中添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="4033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一点一点地解构这段代码。</p><ul class=""><li id="b77e" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">第2行:从期望的页面获取HTML。</li><li id="ab10" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第3行:出于安全原因，净化这个响应。这将给我们一个干净的HTML。</li><li id="3464" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第5–13行:如果站点是可读的，将这个纯化的HTML传递给可读性API并返回结果。</li><li id="5a11" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第14–15行:否则，告诉客户端发生了错误。</li></ul><h2 id="c7e3" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">将HTML保存到磁盘</h2><p id="84bb" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">如果用户使用<code class="fe lv lw lx ly b">--file</code>选项，我们希望我们的应用程序下载页面的HTML。</p><p id="a0a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将以下代码添加到您的<code class="fe lv lw lx ly b">utils/readerUtils.js</code>文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><ul class=""><li id="6460" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">第1行:我们的函数将接受一个参数。这是页面的HTML。</li><li id="5e8b" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第2行:将源代码写入<code class="fe lv lw lx ly b">content.html</code>文件并保存。</li><li id="8bfe" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第3行:最后，通知用户文件已保存。</li></ul><h2 id="1170" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">发送解析的数据</h2><p id="974a" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">既然我们已经解析了数据，剩下的工作就是将它呈现给终端。</p><p id="6e88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，将这段代码追加到<code class="fe lv lw lx ly b">utils/readerUtils.js</code>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="6c5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这段代码中可以得出一些推论:</p><ul class=""><li id="c7ff" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">第2行:执行对象析构，从<code class="fe lv lw lx ly b">parseSite</code>函数中获取<code class="fe lv lw lx ly b">html</code>、<code class="fe lv lw lx ly b">title</code>、<code class="fe lv lw lx ly b">text</code>和<code class="fe lv lw lx ly b">error</code>属性。<br/>要了解更多关于对象析构的知识，<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/3-practical-uses-of-object-destructuring-in-javascript-a2c34ce3367b">请看这篇由</a> <a class="om on ep" href="https://medium.com/u/4d76f5fc17a8?source=post_page-----a6d06e61e9c4--------------------------------" rel="noopener" target="_blank"> Jim Rottinger </a>撰写的文章。</li><li id="7d30" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第4行:检查<code class="fe lv lw lx ly b">error</code>是否为<code class="fe lv lw lx ly b">undefined</code>。换句话说，看看我们的解析操作是否成功。</li><li id="93de" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第5行和第6行:向终端显示<code class="fe lv lw lx ly b">title</code>和<code class="fe lv lw lx ly b">text</code>属性。我们已经使用<code class="fe lv lw lx ly b">chalk</code>模块将<code class="fe lv lw lx ly b">title</code>渲染成蓝色。</li><li id="0e35" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第7行:如果<code class="fe lv lw lx ly b">save</code>布尔值为<code class="fe lv lw lx ly b">true</code>，调用<code class="fe lv lw lx ly b">saveToFile</code>方法并通知用户。</li><li id="631d" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第12行:如果出现错误，通知客户端。</li></ul><p id="8d05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们快完成了！在下一节中，我们将把我们的效用函数与我们的项目相结合。</p><h2 id="df04" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">将实用程序与我们的应用程序联系起来</h2><p id="17e7" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">回溯到您的<code class="fe lv lw lx ly b">index.js</code>文件并编写以下代码:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2de3" class="md me it ly b gy mf mg l mh mi">const sendData = require("./utils/readerUtils");<br/>//further code removed.. <br/>(async () =&gt; {<br/>await sendData(argv.site, argv.file);<br/>})();</span></pre><p id="463a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码意味着如果用户运行<code class="fe lv lw lx ly b">index.js</code>文件，那么<code class="fe lv lw lx ly b">sendData</code>方法将会运行。</p><p id="8dc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来测试一下！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/fa329bf219d83636ac75664f5dcac4e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YLVTU4K7-gq1E6kNTuQUQA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="2ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，检查<code class="fe lv lw lx ly b">content.html</code>是否包含您选择的网页的文本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/87e7c8d355698e64e1a7bcb7efe40607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*y62-FG-rUFRPlRDGDrwK-g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保存的HTML代码</p></figure><p id="c712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！我们的代码没有任何缺陷。在下一节中，我们将告诉Node.js通过<a class="ae ky" href="https://dev.to/laurieontech/symlinks-and-npm-3o3j" rel="noopener ugc nofollow" target="_blank">符号链接</a>使我们的应用程序全球化。</p><p id="e743" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lv lw lx ly b">index.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="6514" class="md me it bd mp nf ng dn mt nh ni dp mx li nj nk mz lm nl nm nb lq nn no nd np bi translated">创建符号链接</h2><p id="6eb7" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">第一步，转到您的<code class="fe lv lw lx ly b">package.json</code>文件，将<code class="fe lv lw lx ly b">name</code>字段更改为<code class="fe lv lw lx ly b">reader</code>。接下来，添加<code class="fe lv lw lx ly b">preferGlobal</code>和<code class="fe lv lw lx ly b">bin</code>文件夹，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><ul class=""><li id="afe9" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">第4行:告诉Node.js我们可以从任何地方运行这个程序。</li><li id="b481" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">第5行:<code class="fe lv lw lx ly b">bin</code>属性指定当用户运行<code class="fe lv lw lx ly b">reader</code>命令时，项目应该运行<code class="fe lv lw lx ly b">index.js</code>模块。</li></ul><p id="ecd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，剩下的就是创建一个像这样的符号链接。这将告诉NPM，我们的项目可以从任何位置运行。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="2722" class="md me it ly b gy mf mg l mh mi">npm link</span></pre><p id="760b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要检查我们的应用程序现在是否工作，请尝试运行<code class="fe lv lw lx ly b">reader</code>命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/0104a2f5210e942be93543316344c26a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBh17jvBS9jTchOPAQPnFA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">命令的输出</p></figure><p id="83db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们出错了。这是因为我们现在需要通知操作系统，这个程序将使用Node.js作为它的解释器。我们可以通过使用一个工具来解决这个问题。</p><p id="87eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">index.js</code>中，开头写下下面一行:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9f87" class="md me it ly b gy mf mg l mh mi">#!/usr/bin/env node</span></pre><p id="c3be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！运行代码。这将是结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/70df22c0217f87a77c4b027464f956ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7C3ddCaq7oOUqJ2At_48yw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="7e7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们完事了。</p><p id="f907" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lv lw lx ly b">index.js</code>应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h1 id="eaab" class="mo me it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">额外资源</h1><p id="c4b9" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><a class="ae ky" href="https://github.com/HussainArif12/reader-tutorial" rel="noopener ugc nofollow" target="_blank">GitHub上该项目的源代码</a></p><ul class=""><li id="41f7" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><a class="ae ky" href="https://www.youtube.com/watch?v=3Xx83JAktXk" rel="noopener ugc nofollow" target="_blank"> Node.js密码生成器— Traversy Media </a></li><li id="4e94" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><a class="ae ky" href="https://levelup.gitconnected.com/a-pirate-y-intro-to-node-cli-apps-and-yargs-4af9410f034d" rel="noopener ugc nofollow" target="_blank">Yargs的海盗式介绍！</a> — <a class="om on ep" href="https://medium.com/u/119e2121a688?source=post_page-----a6d06e61e9c4--------------------------------" rel="noopener" target="_blank">尼古拉斯·费特尔</a></li><li id="207e" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><a class="ae ky" href="https://developer.okta.com/blog/2019/06/18/command-line-app-with-nodejs" rel="noopener ugc nofollow" target="_blank">用Node.js — Okta Developer构建命令行应用</a></li></ul><h1 id="f022" class="mo me it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="dcdb" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">如果您想用Node.js构建强大的终端应用程序，那么只需看看Yargs就行了。它会让你相对容易和快速地完成工作。</p><p id="1b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢你坚持到最后！编码快乐！</p></div></div>    
</body>
</html>