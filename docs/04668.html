<html>
<head>
<title>How to Implement Face ID, Touch ID, and LocalAuthentication in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Swift中实施Face ID、触控ID和本地认证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/face-id-touch-id-and-localauthentication-df0e20f212b3?source=collection_archive---------14-----------------------#2020-04-28">https://betterprogramming.pub/face-id-touch-id-and-localauthentication-df0e20f212b3?source=collection_archive---------14-----------------------#2020-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="051b" class="pw-subtitle-paragraph jr is it bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">便利和安全</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/a2d9c4b8075237ee473fb6524111c656.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*haawvSDhDttdNeOl"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@vmxhu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Szabo Viktor </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="bfab" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">难度:初级|简单<strong class="lc iu"> </strong> | <strong class="lc iu">普通</strong> |挑战</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7176" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">先决条件</h1><ul class=""><li id="cb5f" class="mv mw it lc b ld mx lg my lj mz ln na lr nb lv nc nd ne nf bi translated">能够发出“你好，世界！”iOS应用程序(<a class="ae kz" href="https://medium.com/swlh/your-first-ios-application-using-xcode-9983cf6efb71" rel="noopener">指南</a>)</li></ul><p id="11b3" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这个项目(首先)使用了我的<a class="ae kz" href="https://medium.com/@stevenpcurtis.sc/my-basic-httpmanager-in-swift-db2be1e340c2" rel="noopener"> HTTPManager </a>和<a class="ae kz" href="https://medium.com/@stevenpcurtis.sc/secure-user-data-with-keychain-in-swift-337684d6488c" rel="noopener"> Keychain </a>以及我的<a class="ae kz" href="https://medium.com/@stevenpcurtis.sc/building-urls-in-swift-51f21240c537" rel="noopener">构建URL</a>的方法。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="173e" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">术语</h1><ul class=""><li id="396f" class="mv mw it lc b ld mx lg my lj mz ln na lr nb lv nc nd ne nf bi translated"><strong class="lc iu"> Face ID </strong>:在支持设备上使用原深感摄像头进行安全认证</li><li id="fd6c" class="mv mw it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated"><code class="fe nl nm nn no b">LocalAuthentication</code>:使用生物特征或密码对用户进行认证的框架</li><li id="b060" class="mv mw it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">触控ID :指纹身份传感器</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9e69" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">与触控ID/Face ID公司进行服务器呼叫(生物识别)</h1><p id="c1b6" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">这个项目是关于在必要的地方使用生物识别技术进行服务器调用(也就是说，它不是关于二级认证)。我们在这里假设稍后调用服务器时需要这个令牌，并且这个令牌需要存储在设备上。</p><p id="ec30" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当用户(第一次)登录应用程序时，可以在钥匙串中调用令牌。</p><p id="76c7" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当用户随后登录应用程序时，用户可以使用其设备上的生物特征功能来验证自己，并直接进入应用程序。因为我们有了令牌，所以稍后可以在用户会话中使用它。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f459" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">最初的项目</h1><p id="de06" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">最初的项目使用了我之前在<a class="ae kz" href="https://medium.com/@stevenpcurtis.sc/building-urls-in-swift-51f21240c537" rel="noopener">文档</a>中提到的构建URL的方法。它遵循一个使用<a class="ae kz" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank"> https://reqres.in </a>的注册和登录过程，你可以用<code class="fe nl nm nn no b">Postman</code>来测试这个过程(这里有一个关于如何做的教程)。</p><p id="34cc" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">除此之外，该项目只是为了找出你是否有一个令牌。</p><p id="1313" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">唯一注册并登录的用户是eve.holt@reqres.in，密码为“pistol”。</p><p id="d6d9" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这是一个简单的演示项目，所以我让所有多余的东西远离它！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2ee5" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">履行</h1><p id="309b" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">注意:这个项目中的很多文件需要<code class="fe nl nm nn no b">import LocalAuthentication</code> <strong class="lc iu"> </strong>才能允许使用iOS中的生物识别功能。</p><p id="76ec" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了测试的目的(所以我们不需要把所有东西都放在视图控制器中！)我创造了一个<code class="fe nl nm nn no b">BiometricsManager</code>。</p><p id="bb3f" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于<code class="fe nl nm nn no b">LAContext</code> <strong class="lc iu"> </strong>来说，这将符合新的协议(<code class="fe nl nm nn no b">LAContext</code>已经符合协议，但是需要以下扩展):</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="fbab" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于本协议:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="eca1" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这允许我们定义以下<code class="fe nl nm nn no b">BiometricsManager</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="0618" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后，我们从一个初始视图控制器调用它，该控制器要么将用户定向到一个登录页面(如果他们没有令牌)，要么检查他们是否是一个在设备上具有生物特征的注册用户。如果检查失败，他们将进入登录屏幕:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="b3b6" class="md me it bd mf mg nu mi mj mk nv mm mn ka nw kb mp kd nx ke mr kg ny kh mt mu bi translated">测试</h1><h2 id="d650" class="nz me it bd mf oa ob dn mj oc od dp mn lj oe of mp ln og oh mr lr oi oj mt ok bi translated">LAContextMock</h2><p id="a02c" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">我们为<code class="fe nl nm nn no b">LAContext</code>创建一个模拟:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="3d89" class="nz me it bd mf oa ob dn mj oc od dp mn lj oe of mp ln og oh mr lr oi oj mt ok bi translated">生物计量学管理测试</h2><p id="3be2" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">然后使用<code class="fe nl nm nn no b">LAContextMock</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="9852" class="md me it bd mf mg nu mi mj mk nv mm mn ka nw kb mp kd nx ke mr kg ny kh mt mu bi translated"><strong class="ak">注</strong></h1><p id="4539" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated"><code class="fe nl nm nn no b">LAError.passcodeNotSet</code>和<code class="fe nl nm nn no b">LAError.biometryNotEnrolled</code>由操作系统处理，并自己创建相关的警报。</p><p id="914a" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当触控ID或FaceID的身份验证返回时，它可能不在主线程上。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9d68" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="5bd7" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">这个项目不仅仅是Face ID的一个实现，而是一个登录系统的实现，这个系统(几乎)已经过全面测试。</p><p id="d0f1" class="pw-post-body-paragraph la lb it lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">生物识别的实际实现(对于感兴趣的人)包含在<code class="fe nl nm nn no b">BiometricsManagers</code>中。<code class="fe nl nm nn no b">BiometricsManagerTests</code>测试这些功能，也可以在您的特定应用中使用。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b40f" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">回购链接</h1><div class="ol om gp gr on oo"><a href="https://github.com/stevencurtis/FaceIt" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">史蒂夫·库尔提斯/费塞特</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">在GitHub上创建一个帐户，为stevencurtis/FaceIt开发做贡献。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kt oo"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7650" class="md me it bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">扩展你的知识</h1><p id="ee9b" class="pw-post-body-paragraph la lb it lc b ld mx jv lf lg my jy li lj np ll lm ln nq lp lq lr nr lt lu lv im bi translated">苹果已经为T11创建了<a class="ae kz" href="https://developer.apple.com/documentation/localauthentication" rel="noopener ugc nofollow" target="_blank">文档。</a></p></div></div>    
</body>
</html>