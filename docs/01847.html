<html>
<head>
<title>What Is ContentChildren in Angular?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是内容有棱角的孩子？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/understanding-contentchildren-with-an-example-e76ce78968db?source=collection_archive---------4-----------------------#2019-10-17">https://betterprogramming.pub/understanding-contentchildren-with-an-example-e76ce78968db?source=collection_archive---------4-----------------------#2019-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="39f8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">内容儿童举例说明</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b88aa5c30ba34a9c8d208aacd7b298d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gN4Tf4rHQOKDdKAsynnGg.jpeg"/></div></div></figure></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="04e2" class="ky kz iq bd la lb lc ld le lf lg lh li jw lj jx lk jz ll ka lm kc ln kd lo lp bi translated"><strong class="ak">什么是内容儿童？</strong></h1><p id="319a" class="pw-post-body-paragraph lq lr iq ls b lt lu jr lv lw lx ju ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated"><code class="fe mm mn mo mp b">ContentChildren</code>是一个参数装饰器，用于从内容DOM中获取元素或指令的<code class="fe mm mn mo mp b">QueryList</code>。每当添加或删除子元素/组件时，都会更新<code class="fe mm mn mo mp b">QueryList</code>。</p><p id="77f1" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">子元素引用设置在<code class="fe mm mn mo mp b">ngAfterContentInit</code> <strong class="ls ir"> </strong>生命周期钩子方法之前的<code class="fe mm mn mo mp b">QueryList</code>中。</p><p id="0b05" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">下面，我们使用<code class="fe mm mn mo mp b">ContentChildren</code>来获取包含子组件<code class="fe mm mn mo mp b">ChildComp</code> <strong class="ls ir">列表的<code class="fe mm mn mo mp b">QueryList</code>。</strong>列表存储在<code class="fe mm mn mo mp b">Parent</code>组件的<code class="fe mm mn mo mp b">contentChildren</code>变量中。</p><pre class="kg kh ki kj gt mv mp mw mx aw my bi"><span id="3b40" class="mz kz iq mp b gy na nb l nc nd">@<a class="ae ne" href="https://angular.io/api/core/ContentChildren" rel="noopener ugc nofollow" target="_blank">ContentChildren</a>(ChildComp) contentChildren : <a class="ae ne" href="https://angular.io/api/core/QueryList" rel="noopener ugc nofollow" target="_blank">QueryList</a>&lt;ChildComp&gt;;</span></pre><p id="fdb8" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">让我们看一个利用<code class="fe mm mn mo mp b">ContentChildren</code>能力的例子…</p><p id="cebd" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">我们正在创建一个子组件<code class="fe mm mn mo mp b">TabComponent</code> <strong class="ls ir"> </strong>，它有一个输入属性对象tab和一个打印tab对象的title属性的函数。模板只显示属性。</p><pre class="kg kh ki kj gt mv mp mw mx aw my bi"><span id="343a" class="mz kz iq mp b gy na nb l nc nd">import { Component, Input } from "@angular/core";<br/></span><span id="fb83" class="mz kz iq mp b gy nf nb l nc nd">@Component({</span><span id="7a89" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">selector</strong>: "app-tab",</span><span id="985f" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">template</strong>: `&lt;h4&gt;{{ tab.title }}&lt;/h4&gt;</span><span id="d98d" class="mz kz iq mp b gy nf nb l nc nd">          &lt;p&gt;{{ tab.content }}&lt;/p&gt;`</span><span id="c84e" class="mz kz iq mp b gy nf nb l nc nd">})</span><span id="2523" class="mz kz iq mp b gy nf nb l nc nd">export class <strong class="mp ir">TabComponent </strong>{</span><span id="1163" class="mz kz iq mp b gy nf nb l nc nd">@<strong class="mp ir">Input</strong>() tab: object;<br/></span><span id="5fa8" class="mz kz iq mp b gy nf nb l nc nd">printTitle() {</span><span id="6dcd" class="mz kz iq mp b gy nf nb l nc nd">console.log(this.tab.title);<br/>}<br/>}</span></pre><p id="c198" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated"><code class="fe mm mn mo mp b">TabListComponent</code> <strong class="ls ir"> </strong>是父组件，我们使用<code class="fe mm mn mo mp b">ContentChildren</code>装饰器从内容DOM中访问子组件<code class="fe mm mn mo mp b">TabComponent</code> <strong class="ls ir"> </strong>列表。</p><p id="48ea" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">由于子元素引用是在<code class="fe mm mn mo mp b">ngAfterContentInit</code>回调之前在<code class="fe mm mn mo mp b">QueryList</code>中设置的，我们正在访问<code class="fe mm mn mo mp b">ngAfterContentInit</code>生命周期钩子中的<code class="fe mm mn mo mp b">QueryList</code>。</p><p id="a9cd" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">在模板中，我们使用了<code class="fe mm mn mo mp b">ng-content</code>指令，它将<code class="fe mm mn mo mp b">&lt;app-tab-list&gt;&lt;app-tab-list&gt;</code> <strong class="ls ir"> </strong>标签之间的元素投影到组件的视图中。</p><p id="c950" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">在选择器元素之间添加的元素被称为内容投影元素，可以通过<code class="fe mm mn mo mp b">ContentChildren</code>访问。</p><p id="f9f5" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">如您所见，我们能够从父组件访问子组件方法(如<code class="fe mm mn mo mp b">ngAfterContentInit</code>方法所示)。</p><pre class="kg kh ki kj gt mv mp mw mx aw my bi"><span id="4eab" class="mz kz iq mp b gy na nb l nc nd">import {</span><span id="26d0" class="mz kz iq mp b gy nf nb l nc nd">ContentChildren,</span><span id="08fe" class="mz kz iq mp b gy nf nb l nc nd">QueryList,</span><span id="0c67" class="mz kz iq mp b gy nf nb l nc nd">Component,</span><span id="083b" class="mz kz iq mp b gy nf nb l nc nd">AfterContentInit</span><span id="1da9" class="mz kz iq mp b gy nf nb l nc nd">} from "@angular/core";</span><span id="cd77" class="mz kz iq mp b gy nf nb l nc nd">import { TabComponent } from "./tab.component";</span><span id="73ad" class="mz kz iq mp b gy nf nb l nc nd">@Component({</span><span id="f692" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">selector</strong>: "app-tab-list",</span><span id="760b" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">template</strong>: `&lt;ng-content&gt;&lt;/ng-content&gt;`</span><span id="68e4" class="mz kz iq mp b gy nf nb l nc nd">})</span><span id="b8f6" class="mz kz iq mp b gy nf nb l nc nd">export class <strong class="mp ir">TabListComponent </strong>implements <strong class="mp ir">AfterContentInit </strong>{</span><span id="9cdb" class="mz kz iq mp b gy nf nb l nc nd">@<strong class="mp ir">ContentChildren</strong>(<strong class="mp ir">TabComponent</strong>) tabList: <strong class="mp ir">QueryList</strong>&lt;<strong class="mp ir">TabComponent</strong>&gt;;</span><span id="e28e" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">ngAfterContentInit</strong>() {</span><span id="5b63" class="mz kz iq mp b gy nf nb l nc nd">this.tabList.toArray()[0].printTitle();</span><span id="96f5" class="mz kz iq mp b gy nf nb l nc nd">}</span><span id="bbca" class="mz kz iq mp b gy nf nb l nc nd">}</span></pre><p id="a338" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">最后，这是顶视图组件，其模板中有上述两个选择器。</p><pre class="kg kh ki kj gt mv mp mw mx aw my bi"><span id="a9be" class="mz kz iq mp b gy na nb l nc nd">import { Component, Input } from "@angular/core";<br/></span><span id="5ba5" class="mz kz iq mp b gy nf nb l nc nd">@Component({</span><span id="210f" class="mz kz iq mp b gy nf nb l nc nd">import { Component, OnInit } from "@angular/core";</span><span id="afad" class="mz kz iq mp b gy nf nb l nc nd">@Component({</span><span id="7cc8" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">selector</strong>: "app-root",</span><span id="5fc4" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">template</strong>: `</span><span id="fa18" class="mz kz iq mp b gy nf nb l nc nd">&lt;app-tab-list&gt;</span><span id="566c" class="mz kz iq mp b gy nf nb l nc nd">&lt;app-tab *ngFor="let tab of tabs" [tab]="tab"&gt;&lt;/app-tab&gt;</span><span id="043d" class="mz kz iq mp b gy nf nb l nc nd">&lt;/app-tab-list&gt;`})</span><span id="e2b2" class="mz kz iq mp b gy nf nb l nc nd">export class <strong class="mp ir">AppComponent </strong>implements <strong class="mp ir">OnInit </strong>{</span><span id="49ec" class="mz kz iq mp b gy nf nb l nc nd">tabs = [];</span><span id="990c" class="mz kz iq mp b gy nf nb l nc nd"><strong class="mp ir">ngOnInit</strong>() {</span><span id="dab1" class="mz kz iq mp b gy nf nb l nc nd">this.tabs = [</span><span id="c16f" class="mz kz iq mp b gy nf nb l nc nd">{ title: "First Tab title", content: "First Tab content" },</span><span id="d409" class="mz kz iq mp b gy nf nb l nc nd">{ title: "Second Tab title", content: "Second Tab content" },</span><span id="476e" class="mz kz iq mp b gy nf nb l nc nd">{ title: "Third Tab title", content: "Third Tab content" }</span><span id="f5cc" class="mz kz iq mp b gy nf nb l nc nd">];</span><span id="a239" class="mz kz iq mp b gy nf nb l nc nd">}}</span></pre><p id="4a8f" class="pw-post-body-paragraph lq lr iq ls b lt mq jr lv lw mr ju ly lz ms mb mc md mt mf mg mh mu mj mk ml ij bi translated">注意:如果我们有一个子内容元素，那么我们可以使用<code class="fe mm mn mo mp b">ContentChild</code>而不是<code class="fe mm mn mo mp b">ContentChildren</code>。</p></div></div>    
</body>
</html>