<html>
<head>
<title>How to Use Bitwise Operators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用按位运算符</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-bitwise-operators-90cd7a3a0fd7?source=collection_archive---------4-----------------------#2020-01-21">https://betterprogramming.pub/how-to-use-bitwise-operators-90cd7a3a0fd7?source=collection_archive---------4-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="86c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习位操作</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ed46893462509917983fef0c5c242e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*babmjsRea8J5andU"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="99f9" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">计算机是如何表示数据的？</h1><p id="3dec" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如果您以前曾经编程过，那么您几乎肯定使用过某种数值数据类型，比如整数。</p><p id="18a8" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是你有没有想过你的电脑实际上是怎么储存这些数字的？</p><p id="8a60" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">与我们通常使用10的幂来表示数字不同，计算机使用2的幂来存储值。</p><h2 id="e3ef" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">二进制表示法</h2><p id="bed6" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这意味着数字只能用0和1的字符串来表示，这是一个二进制系统。二进制串中的每个数字称为一位，每组八位是一个字节。</p><p id="acbd" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">通常，我们从右到左以2的幂递增的方式读取这些二进制字符串。这就像我们正常阅读数字一样，1的位置是最右边的数字，然后是左边的10的位置，依此类推。</p><p id="af94" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">所以，如果我们想用二进制来表示(<a class="ae ky" href="https://www.tutorialspoint.com/unsigned-and-signed-binary-numbers" rel="noopener ugc nofollow" target="_blank">无符号</a>)数10，那就是1010，因为1(2⁰) + 0(2 ) + 1(2 ) + 0(2 ) = 10。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="339e" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">我们能用二进制数据做什么？</h1><p id="870a" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">既然我们已经了解了这些数字是如何存储的，我们就可以利用这些知识，使用直接作用于数字的二进制表示的操作。</p><p id="4837" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">首先，想想你已经知道的运算——这可能包括加法(+)、减法(-)、乘法(*)和除法(/)。这些都是可以用在任何基数的数字上的运算符——所以我们认为数字是二进制的还是基数为10的并不重要。</p><p id="2846" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">然而，也有操作符专门作用于二进制形式的数字位，恰当地命名为<a class="ae ky" href="https://en.wikipedia.org/wiki/Bitwise_operation" rel="noopener ugc nofollow" target="_blank">位操作符</a>。</p><p id="e87b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在我解释为什么这些有用之前，让我们先来看一下主要的，并解释它们是如何工作的，它们看起来像什么。</p><h2 id="ae62" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">否定(~)</h2><p id="8362" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">求反运算符只是反转一个数中的所有位。所以，如果<code class="fe nl nm nn no b">x == 0101</code>，那么<code class="fe nl nm nn no b">~x == 1010</code>。</p><h2 id="1c3b" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">左移(&lt;</h2><p id="9626" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">The left shift operator moves all of the bits to the left by a specified number of bits. Any bits that go past the leftmost position are ignored. So, if  【T2】 , then  【T3】 .</p><h2 id="f52a" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">Right shift (&gt;&gt;)</h2><p id="ee5e" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">类似地，右移位运算符将所有位向右移动指定的位数。所以，如果<code class="fe nl nm nn no b">x == 101010</code>，那么<code class="fe nl nm nn no b">x &gt;&gt; 2 == 001010</code>。</p><h2 id="e133" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">和(&amp;)</h2><p id="3bb0" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">与两个二进制数一起使用的AND运算符返回一个新的二进制数，其中<em class="np">和</em>每隔一个位置都有1和0。</p><p id="6480" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">所以，如果<code class="fe nl nm nn no b">x == 1100</code>和<code class="fe nl nm nn no b">y == 1011</code>，那么<code class="fe nl nm nn no b">x &amp; y == 1000</code>，因为这两个数字的最左边都只有1。</p><h2 id="e3fd" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">或者(|)</h2><p id="2b17" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">与两个二进制数一起使用的OR运算符返回一个新的二进制数，其中任何一个<em class="np">或</em>的位置为1，其他位置为0。</p><p id="f8d5" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">所以，如果<code class="fe nl nm nn no b">x == 1100</code>和<code class="fe nl nm nn no b">y == 1011</code>，那么<code class="fe nl nm nn no b">x | y == 1111</code>，因为<em class="np">两个数字中至少有一个</em>在每个位置上都有1。</p><h2 id="0a64" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">异或(^)</h2><p id="6cf8" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">XOR(或exclusive OR)运算符用于两个二进制数，返回一个新的二进制数，其中两个数不一致的每个位置都是1，因此一个位置是1，另一个位置是0，其他位置是0。</p><p id="0ed7" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">因此，如果<code class="fe nl nm nn no b">x == 1100</code>和<code class="fe nl nm nn no b">y == 1011</code>，那么<code class="fe nl nm nn no b">x ^ y == 0111</code>，因为这两个数字除了最左边的位之外都不一致。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="dc1f" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">这为什么有用？</h1><p id="5219" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">如果你不明白为什么要使用这些操作符，你并不孤单。当我第一次了解它们时，它们似乎并不那么有用。</p><p id="8b63" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是，在许多领域，如嵌入式编程、系统编程和网络，它们可以在许多不同问题的解决方案中看到。</p><p id="eb33" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">现在，让我们回顾一下按位运算符的一些用例，希望你能开始对它们有更多的了解。</p><h2 id="2329" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">数据表示法</h2><p id="b6ca" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">在表示数据时，按位运算符是非常有效地利用空间的好方法。</p><p id="093e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">想象以下情况:</p><blockquote class="nq nr ns"><p id="1c86" class="ly lz np ma b mb mu ju md me mv jx mg nt mw mj mk nu mx mn mo nv my mr ms mt im bi translated">你是一个电脑游戏的游戏开发人员，你想在玩家玩游戏时定期存储他们的鼠标位置。为此，您每分钟都要将玩家的光标位置发送到游戏服务器。游戏在1000 x 1000大小的固定窗口中运行。</p></blockquote><p id="e6de" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">最简单的方法是为每个快照向服务器发送两个整数数据(一个用于x坐标，一个用于y坐标)。通常，整数是32位，所以这意味着发送回64位数据。</p><p id="7be2" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">然而，我们可以通过使用按位操作符来提高空间效率。</p><p id="4289" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">由于每个坐标最多是1000，这意味着我们只需要10位来存储每个数字，因为二进制1111111111是1023，大于1000。这意味着我们实际上总共只需要20位。</p><p id="44d8" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我们可以将这20位存储在一个32位整数中，最右边的10位表示x坐标，接下来的10位表示y坐标，剩下的12位为零。</p><p id="98f2" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">一旦数据到达后端服务器，我们就可以用正确的shift和OR操作符提取每个数字。</p><h2 id="0046" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">base-2的有用属性</h2><p id="f223" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">以2为基数有一些便利的属性，使得一些常见的问题很容易回答。</p><p id="94ac" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">例如，我们可以很容易地确定一个数是否是2的幂。</p><p id="b7a3" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">任何2的幂的数字只有最左边的位被设置为1，其他的位都是0。</p><p id="6d01" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我们可以通过检查<code class="fe nl nm nn no b">(x &amp; (x — 1)) == 0</code>来快速确定一个数字<code class="fe nl nm nn no b">x</code>是否遵循这个模式。这是因为如果<code class="fe nl nm nn no b">x</code>是2的幂，那么<code class="fe nl nm nn no b">x-1</code>将使除之外的每个位<em class="np">的最左边的位设置为1，所以当我们使用AND运算符时，它们在任何位置都没有一致的位。</em></p><h2 id="f273" class="mz lh it bd li na nb dn lm nc nd dp lq mh ne nf ls ml ng nh lu mp ni nj lw nk bi translated">算法/面试问题</h2><p id="9bfd" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">最后，在技术面试中可能遇到的算法问题中，可以零星地找到按位运算符。这些例子常常利用了<code class="fe nl nm nn no b">x ^ x == 0</code>这个事实。</p><p id="9f12" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><strong class="ma iu">交换两个没有临时变量的数字</strong></p><p id="09ea" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">为了交换两个整数<code class="fe nl nm nn no b">x</code>和<code class="fe nl nm nn no b">y</code>，而不使用第三个临时值，我们可以使用XOR三次。</p><p id="b2fc" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">如果追溯一下，下面的赋值将导致两个变量的值最终交换:<code class="fe nl nm nn no b">x = x ^ y</code>、<code class="fe nl nm nn no b">y = x ^ y</code>和<code class="fe nl nm nn no b">x = x ^ y</code>。</p><p id="02ed" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated"><a class="ae ky" href="https://leetcode.com/problems/single-number/" rel="noopener ugc nofollow" target="_blank"> <strong class="ma iu">查找数组中不出现两次的单个整数</strong> </a></p><p id="5502" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">我们对数组中的每个元素进行异或运算。由于一个数字与自身进行XOR运算的结果是0，所以当我们遍历整个数组时，该累计值将是一个不会出现两次的整数。</p></div></div>    
</body>
</html>