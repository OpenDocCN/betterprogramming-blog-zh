<html>
<head>
<title>How to Use Chrome DevTools to Debug Unit Test Cases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Chrome DevTools调试单元测试用例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-chrome-devtools-to-debug-unit-test-cases-db20ffabb33f?source=collection_archive---------5-----------------------#2020-03-25">https://betterprogramming.pub/how-to-use-chrome-devtools-to-debug-unit-test-cases-db20ffabb33f?source=collection_archive---------5-----------------------#2020-03-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f226" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Chrome DevTools进行更好的调试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e8d00416934702014a1b3fbe9fa7b7e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RLe0O5xSB63vLswJjKlB0Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@robynnexy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Robynne Hu </a>在<a class="ae ky" href="https://unsplash.com/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a9c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你如何调试单元测试用例？有两种流行的方法:</p><ul class=""><li id="62ec" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/better-programming/how-to-use-vs-code-to-debug-unit-test-cases-6aebfd7021bd" rel="noopener">使用Visual Studio代码(俗称VS代码)的内置功能</a></li><li id="9017" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">使用Chrome dev tools内置调试器</li></ul><p id="02bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将介绍第二种方法:使用Chrome DevTools来调试单元测试用例。</p><p id="8ccd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">什么是<a class="ae ky" href="https://nodejs.dev/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>？这是一个开源的跨平台JavaScript运行时环境。它可以互换地称为nodejs、NodeJS或node。它是Web开发的流行工具。Node.js在浏览器之外运行V8 JavaScript引擎，这是谷歌Chrome的核心。这允许我们使用Node.js和Chrome DevTools来调试单元测试用例。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8ea0" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">调试最初的Create React App单元测试用例</h1><p id="57ea" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">让我们以脸书著名的<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a>为例。代码库中有一个单元测试文件<code class="fe nn no np nq b">src/App.test.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="b647" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在<a class="ae ky" href="https://medium.com/better-programming/how-to-use-vs-code-to-debug-unit-test-cases-6aebfd7021bd" rel="noopener">使用Visual Studio代码调试单元测试用例</a>中所描述的，你可以运行这个命令:<code class="fe nn no np nq b">npm run test</code>。</p><pre class="kj kk kl km gt nt nq nu nv aw nw bi"><span id="5ecf" class="nx mr it nq b gy ny nz l oa ob"><strong class="nq iu">PASS </strong> src/<strong class="nq iu">App.test.js<br/></strong>✓ renders without crashing (3ms)<br/><strong class="nq iu">Test Suites: 1 passed</strong>, 1 total<br/><strong class="nq iu">Tests:       1 passed</strong>, 1 total<br/><strong class="nq iu">Snapshots:   </strong>0 total<br/><strong class="nq iu">Time:</strong>        0.056s, estimated 1s<br/>Ran all test suites related to changed files.</span></pre><p id="0d4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有测试都通过了。</p><p id="c646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我们希望有一种方法来调试单元测试用例。第二种方法是使用Chrome DevTools调试器。</p><p id="99b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给<code class="fe nn no np nq b">package.json</code>增加了一个<code class="fe nn no np nq b">test:debug</code>的剧本:</p><pre class="kj kk kl km gt nt nq nu nv aw nw bi"><span id="db73" class="nx mr it nq b gy ny nz l oa ob">"scripts": {<br/>  "start": "react-scripts start",<br/>  "build": "react-scripts build",<br/>  "test": "react-scripts test",<br/>  <strong class="nq iu">"test:debug": "react-scripts --inspect-brk test --runInBand --no-cache --watchAll=false",</strong><br/>  "eject": "react-scripts eject"<br/>}</span></pre><p id="718f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe nn no np nq b">"test"</code>脚本相比，<code class="fe nn no np nq b">"test:debug"</code>脚本有额外的选项。</p><ul class=""><li id="82d7" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe nn no np nq b">--inspect-brk</code>:开启inspector代理的<a class="ae ky" href="https://nodejs.dev/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>选项，监听默认地址和端口(127.0.0.1:9229，可以通过【host:port】配置)。与<code class="fe nn no np nq b">--inspect</code>相比，<code class="fe nn no np nq b">--inspect-brk</code>在用户代码开始前增加了一个断点。</li><li id="cf39" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe nn no np nq b">—-runInBand</code>:别名<code class="fe nn no np nq b">-i</code>。这是一个Jest选项，用于在当前流程中连续运行所有测试，而不是创建运行测试的子流程的工作池。这是用于调试环境的。</li><li id="be2d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe nn no np nq b">--no-cache</code>:禁用缓存。这是一个禁用缓存的Jest选项。平均来说，禁用缓存会使Jest至少慢两倍。</li><li id="99ec" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe nn no np nq b">--watchAll=false</code>:这是一个笑话，不运行一个监视文件来监视变化，而在某些事情发生变化时重新运行所有测试。</li></ul><p id="c034" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行此命令将为单元测试用例启动一个节点流程:</p><pre class="kj kk kl km gt nt nq nu nv aw nw bi"><span id="ef9e" class="nx mr it nq b gy ny nz l oa ob"><strong class="nq iu">$ </strong>npm run test:debug</span><span id="94d9" class="nx mr it nq b gy oc nz l oa ob">&gt; react-app@0.1.0 test:debug /Users/fuje/codeTemp/react-app<br/>&gt; react-scripts --inspect-brk test --runInBand --no-cache --watchAll=false</span><span id="267c" class="nx mr it nq b gy oc nz l oa ob">Debugger listening on ws://127.0.0.1:9229/d50dfe5e-d0b2-4032-a6d6-bf9dedf8fd85</span><span id="1891" class="nx mr it nq b gy oc nz l oa ob">For help, see: https://nodejs.org/en/docs/inspector</span></pre><p id="b1ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在基于Chromium的浏览器中打开<code class="fe nn no np nq b">chrome://inspect</code>(Edge中的<code class="fe nn no np nq b">edge://inspect</code>):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/a98ed87ed0790b340b1e0a39c4c5d74b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jD_tVkisq8E245meGXlO6w.png"/></div></div></figure><p id="d108" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击标有红色小框的配置按钮。这将显示目标发现设置。确保配置了默认地址和端口(<code class="fe nn no np nq b">127.0.0.1:9229</code>)或指定的【主机:端口】。这里的本地主机是<code class="fe nn no np nq b">127.0.0.1</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/7996bda79c0d7c4fed6e8d98c6625e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*oypVUDj5l10vD00EzqC9QA.png"/></div></figure><p id="1809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">npm run test:debug</code>运行时，较大的红色方框显示目标。您可以点击红色虚线上方的<code class="fe nn no np nq b">inspect</code>链接。或者您可以点击红色虚线上方的<code class="fe nn no np nq b">Open dedicated DevTools for Node</code>链接。它弹出调试窗口，在第一行代码处中断。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/99ad0f43fdfb87412748cdaa4be386e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*po0HKpQ1k6ZD2Azerb-_sA.png"/></div></div></figure><p id="a3f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击继续调试按钮，单元测试成功完成:</p><pre class="kj kk kl km gt nt nq nu nv aw nw bi"><span id="62da" class="nx mr it nq b gy ny nz l oa ob"><strong class="nq iu">$ </strong>npm run test:debug</span><span id="b531" class="nx mr it nq b gy oc nz l oa ob">&gt; react-app@0.1.0 test:debug /Users/fuje/codeTemp/react-app<br/>&gt; react-scripts --inspect-brk test --runInBand --no-cache --watchAll=false</span><span id="4ef4" class="nx mr it nq b gy oc nz l oa ob">Debugger listening on ws://127.0.0.1:9229/d50dfe5e-d0b2-4032-a6d6-bf9dedf8fd85<br/>For help, see: <a class="ae ky" href="https://nodejs.org/en/docs/inspector" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en/docs/inspector</a><br/>Debugger attached.<br/><strong class="nq iu">PASS </strong> src/<strong class="nq iu">App.test.js<br/></strong>✓ renders without crashing (19ms)<br/><strong class="nq iu">Test Suites: 1 passed</strong>, 1 total<br/><strong class="nq iu">Tests:       1 passed</strong>, 1 total<br/><strong class="nq iu">Snapshots:   </strong>0 total<br/><strong class="nq iu">Time:</strong>        4.711s<br/>Ran all test suites.Waiting for the debugger to disconnect...</span></pre><p id="f9c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是怎么调试呢？</p><p id="9fd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实证明，我们必须在测试用例中添加调试器语句来启用断点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/709af9cf2a0c34b9f39f8c07d02a827b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fSdGdSZOBED0whf7u6OGgg.png"/></div></div></figure><p id="71ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，记得关闭调试器。</p><p id="a374" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是关于如何使用Chrome DevTools调试单元测试用例的完整解决方案。</p><h2 id="bc6a" class="nx mr it bd ms og oh dn mw oi oj dp na li ok ol nc lm om on ne lq oo op ng oq bi translated">奖励步骤</h2><p id="dc63" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这种方法似乎需要很多手动步骤。我们如何使这个过程自动化？</p><p id="25e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b"><a class="ae ky" href="https://github.com/rcoedo/chrome-nodevtools" rel="noopener ugc nofollow" target="_blank">nodevtools</a></code>是帮手。这是一个小的AppleScript脚本，用于从命令行界面打开Chrome DevTools for node。由于<code class="fe nn no np nq b">nodevtools</code>是一个AppleScript脚本，它只适用于Mac OS X或OS X。此外，这个选项需要启用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/c7cfb9a982c574232d51e7a220c7d500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6hJGgW_1ZDMxkRkUfqJq_Q.png"/></div></div></figure><p id="5b3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装<code class="fe nn no np nq b"><a class="ae ky" href="https://github.com/rcoedo/chrome-nodevtools" rel="noopener ugc nofollow" target="_blank">nodevtools</a></code>的步骤如下:</p><pre class="kj kk kl km gt nt nq nu nv aw nw bi"><span id="4bc8" class="nx mr it nq b gy ny nz l oa ob">brew tap rcoedo/tap<br/>brew install nodevtools</span></pre><p id="85d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">启用AppleScript和安装<code class="fe nn no np nq b"><a class="ae ky" href="https://github.com/rcoedo/chrome-nodevtools" rel="noopener ugc nofollow" target="_blank">nodevtools</a></code>是一次性任务。下面是最后的<code class="fe nn no np nq b">package.json</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="2148" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第14行是使用Chrome DevTools调试单元测试用例的必选项。</p><p id="e540" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第15行<code class="fe nn no np nq b">—</code> 16和第34行<code class="fe nn no np nq b">—</code> 36是奖励步骤的实现。我们使用<code class="fe nn no np nq b"><a class="ae ky" href="https://www.npmjs.com/package/npm-run-all" rel="noopener ugc nofollow" target="_blank">npm-run-all</a></code>来并行运行多个NPM脚本。</p><p id="efea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这些，你就可以通过输入<code class="fe nn no np nq b">npm run test:debugAll</code>来启动一切。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="d824" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">调试重新连接的Create React App单元测试用例</h1><p id="c969" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">对于使用重新连接的Create React应用程序的项目(参见<a class="ae ky" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener">关于Create React应用程序的有趣事实# 5</a>)，我们遵循相同的步骤并使用以下<code class="fe nn no np nq b">package.json</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="e23e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第18行是使用Chrome DevTools调试单元测试用例的必选项。这里可执行的是<code class="fe nn no np nq b">react-app-rewired</code>。可以通过输入<code class="fe nn no np nq b">npm run test:debug</code>来调用。</p><p id="af9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第19行<code class="fe nn no np nq b">—</code> 20和第38行<code class="fe nn no np nq b">—</code> 40是奖励步骤的实现。下面是<code class="fe nn no np nq b">npm run test:debugAll</code>的截图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/623926a083964307b485b51d0cc9c5e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Th7qfxd--jW1LzBS1K-HbA.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="cd49" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">调试弹出的Create React App单元测试用例</h1><p id="92d5" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们使用弹出的Create React应用程序作为例子。这展示了如何调试常规的JavaScript单元测试用例。遵循相同的步骤。下面是<code class="fe nn no np nq b">package.json</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="2489" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第68行是使用Chrome DevTools调试单元测试用例的必选项。这里可执行文件是<code class="fe nn no np nq b">node</code>，它调用<code class="fe nn no np nq b">jest</code>。可以通过键入<code class="fe nn no np nq b">npm run test:debug</code>来调用它。</p><p id="ce64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第69行<code class="fe nn no np nq b">—</code> 70和第142行<code class="fe nn no np nq b">—</code> 144是奖励步骤的实现。下面是<code class="fe nn no np nq b">npm run test:debugAll</code>的截图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/4d2e1a6c8978a2c30596a810b1dd76bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2oar-uGxmDioJaDKHy3yQ.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="aefc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">单元测试用例的调试选项</h1><p id="d8a6" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">类似于使用VS代码调试单元测试用例，我们可以为Jest设置更多选项。让我们看看弹出的Create React应用程序代码库中修改后的App.test.js的几个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="73d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，<code class="fe nn no np nq b">npm run test:debugAll</code>运行所有的测试用例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/daf6e9e516ec2f05b5c7f6c04c23a375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggvXPXhVH0rmLK8GEIMs5Q.png"/></div></div></figure><p id="cee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用选项<code class="fe nn no np nq b">"--testNamePattern=&lt;regex&gt;"</code>来匹配单元测试名称。别名:<code class="fe nn no np nq b">-t &lt;regex&gt;</code>。它只运行名称与正则表达式匹配的测试。</p><p id="9c32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">"-t &lt;regex&gt;"</code>可以用来开始命名测试用例。</p><p id="25d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过不改变<code class="fe nn no np nq b">package.json</code>，我们可以将命令行参数传递给npm脚本:<code class="fe nn no np nq b">npm run test:debug —- -t 1\\+1</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/16e7c424f7c5a7a84c0bda9d56c36eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P258fmso29nkAhU1xbWnPQ.png"/></div></div></figure><p id="3631" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，<code class="fe nn no np nq b">test:debugAll</code>不能使用命令行参数，因为<code class="fe nn no np nq b">npm-run-all</code>不能将命令行参数传递给每个脚本。</p><p id="83db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须对<code class="fe nn no np nq b">package.json</code>做出改变:</p><pre class="kj kk kl km gt nt nq nu nv aw nw bi"><span id="28a0" class="nx mr it nq b gy ny nz l oa ob">“scripts”: {<br/>  <!-- -->"test:debug": "node --inspect-brk node_modules/.bin/jest --runInBand '-t 1\\+1'"<br/>}</span></pre><p id="7521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">npm run test:debug</code>作品:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/f1005c42019d796a1d1ce5a7309cbea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0adEkykRlVQ3A7wykC4s7Q.png"/></div></div></figure><p id="5f0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">npm run test:debugAll</code>作品也一样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/25c7c86eb117870445b8d230e5d47e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mE99EVjzSuteEYAJlc9ZQ.png"/></div></div></figure><p id="c9cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，文件名也可以匹配:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/4a204b91688f40e84f863266cdb4a9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-1JpygJ2owrWNynG1arkw.png"/></div></div></figure><p id="69c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目录名也可以匹配:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/7805c4807a2711e03fccba71f4801cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LyAJfMApTHOCIapBMYnB6Q.png"/></div></div></figure><p id="3e11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是不是很酷？</p><p id="7cf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想尝试更高级的Jest选项，请访问<a class="ae ky" href="https://jestjs.io/docs/en/cli.html" rel="noopener ugc nofollow" target="_blank">Jest官方网站</a>了解更多详情。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="33e3" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">警告</h1><p id="aec8" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">一般来说，Chrome DevTools调试器运行良好。<code class="fe nn no np nq b">npm run test:debug</code>比<code class="fe nn no np nq b">npm run test:debugAll</code>更稳定。偶尔，Ctrl-C一个正在进行的进程或忘记关闭一个已完成的调试器可能会导致一些问题。但是我们可以解决这些小问题:</p><ul class=""><li id="5520" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">如果<code class="fe nn no np nq b">chrome://inspect</code>未启动，在新的标签页/窗口中启动<code class="fe nn no np nq b">chrome://inspect</code>。</li><li id="2e8c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如果<code class="fe nn no np nq b">chrome://inspect</code>在没有调试器窗口的情况下启动，单击两个链接之一进行检查。</li><li id="d172" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">可能会有剩余的调试器窗口。只需关闭它们。</li><li id="f9c1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">可能有多个检查选项卡。简单地关闭它们(对于额外步骤)。</li><li id="f2ad" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">最后，重启运行<code class="fe nn no np nq b">npm run test:debugAll</code>的终端(作为奖励步骤)。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="043b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这有所帮助。如果你有任何问题，请随时回复。你可以在这里看到我的其他媒体出版物<a class="ae ky" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener"/>。</p></div></div>    
</body>
</html>