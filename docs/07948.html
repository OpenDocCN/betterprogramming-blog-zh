<html>
<head>
<title>5 Ways To Store User Data in Your iOS App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在iOS应用程序中存储用户数据的5种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-ways-to-store-user-data-in-your-ios-app-595d61c89667?source=collection_archive---------2-----------------------#2021-03-09">https://betterprogramming.pub/5-ways-to-store-user-data-in-your-ios-app-595d61c89667?source=collection_archive---------2-----------------------#2021-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9bec" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">根据您的需求选择合适的存储</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2730f240cac4ab3076952fd6db353d91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AptNL1wnEP_ziaJX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@alexcpl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张彦宏</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="9c2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在考虑跑步应用的功能时，我们会考虑的主要功能有:</p><ul class=""><li id="e989" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">开始跑步。</li><li id="c477" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">追踪用户的位置。</li><li id="aef3" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">显示跑步的实时统计数据。</li><li id="cf3d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">分享用户的表现。</li></ul><p id="d7e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些都是优秀运行应用的关键功能，它们属于<a class="ae ky" href="https://en.wikipedia.org/wiki/Functional_requirement" rel="noopener ugc nofollow" target="_blank">功能需求</a> <strong class="lb iu"> </strong>类别:</p><blockquote class="mj mk ml"><p id="84c6" class="kz la mm lb b lc ld ju le lf lg jx lh mn lj lk ll mo ln lo lp mp lr ls lt lu im bi translated">“在<a class="ae ky" href="https://en.wikipedia.org/wiki/Software_engineering" rel="noopener ugc nofollow" target="_blank">软件工程</a>和<a class="ae ky" href="https://en.wikipedia.org/wiki/Systems_engineering" rel="noopener ugc nofollow" target="_blank">系统工程</a>中，<strong class="lb iu">功能需求</strong>定义了<a class="ae ky" href="https://en.wikipedia.org/wiki/System" rel="noopener ugc nofollow" target="_blank">系统</a>或其组件的功能，其中功能被描述为输出和输入之间的行为规范。”— <a class="ae ky" href="https://en.wikipedia.org/wiki/Functional_requirement" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="efc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些需求依赖于其他功能才能正常工作。例如，要在他们喜欢的社交媒体上分享用户的表现或登录系统，应用程序需要执行网络调用。网络是一种较低层次的功能，它支持其他功能的开发。</p><p id="0b12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这些低级功能中，有在本地存储数据的功能。数据存储是应用程序开发中的一个关键决策。它允许我们:</p><ul class=""><li id="eac2" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">通过缓存数据减少加载时间。</li><li id="1d3f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">保留登录信息。</li><li id="6f6f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">使我们的应用程序能够脱机工作。</li><li id="e73b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">记住用户设置。</li></ul><p id="e9b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将介绍五种最常见的存储和检索数据的方法。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="da8f" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">1.用户默认值</h1><p id="0800" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">让我们从数据存储中最简单的开始，<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/userdefaults" rel="noopener ugc nofollow" target="_blank">UserDefaults</a></code>。</p><p id="5e74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是存储和检索信息的最常见和最舒适的方式。<code class="fe nu nv nw nx b">UserDefaults</code>作为键值存储，用<code class="fe nu nv nw nx b">Strings</code>作为键。检索大部分是打字的。有具体的方法来检索精确的数据类型(<code class="fe nu nv nw nx b">bool(forKey:)</code>、<code class="fe nu nv nw nx b">int(forKey:)</code>等)。)和一个更通用的<code class="fe nu nv nw nx b">object(forKey)</code>来检索<code class="fe nu nv nw nx b">Any</code>。然而，使用<code class="fe nu nv nw nx b">set(_ value: Any, for key: String)</code>，我们无法存储所有内容。</p><p id="acf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">来自<a class="ae ky" href="https://developer.apple.com/documentation/foundation/userdefaults/1414067-set" rel="noopener ugc nofollow" target="_blank">苹果开发者</a>:</p><blockquote class="mj mk ml"><p id="7971" class="kz la mm lb b lc ld ju le lf lg jx lh mn lj lk ll mo ln lo lp mp lr ls lt lu im bi translated">“<code class="fe nu nv nw nx b">value</code>参数只能是属性列表对象:<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/PropertyLists/OldStylePlists/OldStylePLists.html#//apple_ref/doc/uid/20001012-47169" rel="noopener ugc nofollow" target="_blank">NSData</a></code>、<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/nsstring" rel="noopener ugc nofollow" target="_blank">NSString</a></code>、<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/nsnumber" rel="noopener ugc nofollow" target="_blank">NSNumber</a></code>、<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/nsdate" rel="noopener ugc nofollow" target="_blank">NSDate</a></code>、<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/nsarray" rel="noopener ugc nofollow" target="_blank">NSArray</a></code>或<code class="fe nu nv nw nx b"><a class="ae ky" href="https://developer.apple.com/documentation/foundation/nsdictionary" rel="noopener ugc nofollow" target="_blank">NSDictionary</a></code>。对于<code class="fe nu nv nw nx b">NSArray</code>和<code class="fe nu nv nw nx b">NSDictionary</code>对象，它们的内容必须是属性列表对象。更多信息，请参见<a class="ae ky" href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html#//apple_ref/doc/uid/10000048i-CH3-54303" rel="noopener ugc nofollow" target="_blank">什么是属性列表？<a class="ae ky" href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048i" rel="noopener ugc nofollow" target="_blank">房产列表编程指南</a>中的</a></p></blockquote><p id="103a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，创建一个小的扩展来支持任何<code class="fe nu nv nw nx b">Codable</code>类型的存储和检索操作还是相当容易的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="0f95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mm">注意:我们不能用</em> <code class="fe nu nv nw nx b"><em class="mm">set</em></code> <em class="mm">作为</em> <code class="fe nu nv nw nx b"><em class="mm">setCodable</em></code> <em class="mm">方法的名称。如果我们这样做，第6行的</em> <code class="fe nu nv nw nx b"><em class="mm">self.set</em></code> <em class="mm">函数调用将无限递归地调用我们正在定义的方法，在你的应用程序中造成崩溃。记住</em> <code class="fe nu nv nw nx b"><em class="mm">Data</em></code> <em class="mm">就是</em> <code class="fe nu nv nw nx b"><em class="mm">Codable</em></code> <em class="mm">！</em></p><p id="4762" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nu nv nw nx b">UserDefaults</code>可以通过使用<code class="fe nu nv nw nx b">standard</code>静态属性来检索，这是一个单例属性，可以方便地访问这个存储设备。</p><h2 id="d319" class="oa my it bd mz ob oc dn nd od oe dp nh li of og nj lm oh oi nl lq oj ok nn ol bi translated">何时使用它</h2><p id="d0ed" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">顾名思义，我们要用<code class="fe nu nv nw nx b">UserDefaults</code>来存储用户的喜好。我们应该使用它来存储小块信息(例如，用户是喜欢亮模式还是暗模式，他们想在什么时候收到每日提醒，他们是否真的想收到通知，等等。).</p><p id="25ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据经验，如果你的应用程序中有一个设置屏幕，<code class="fe nu nv nw nx b">UserDefaults </code>是一个很好的选择。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="3502" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">2.钥匙链</h1><p id="9c1d" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">一些应用程序需要存储我们想要保护的私人信息或数据:密码、证书和类似的项目。</p><p id="4e5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个特定的用例，苹果提供了钥匙串和<a class="ae ky" href="https://developer.apple.com/documentation/security" rel="noopener ugc nofollow" target="_blank">安全框架</a>。钥匙串是磁盘上的一个特殊文件。它是硬件加密的，有一堆非常低级的API来访问它。</p><p id="c786" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用它，我们需要:</p><ul class=""><li id="bc55" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">定义查询字典。</li><li id="d700" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">从安全框架中调用一个全局函数(根据我们的需要，它可以<code class="fe nu nv nw nx b">SecItemCopyMatching</code>检索一些数据、<code class="fe nu nv nw nx b">SecItemAdd</code>添加一个新项、<code class="fe nu nv nw nx b">SecItemUpdate</code>更新或<code class="fe nu nv nw nx b">SecItemDelete</code>删除它)。</li><li id="0535" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">分析全局函数返回的<code class="fe nu nv nw nx b">OSStatus</code>代码。</li><li id="3868" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如果我们正在检索某个东西，我们需要将检索到的元素转换为<code class="fe nu nv nw nx b">Data</code>。</li></ul><p id="f8d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你真的需要在你的应用程序中使用钥匙串，搜索一个好的库，让它为你做脏活。这会节省你的时间和头痛。下面是GitHub上明星最多的三个钥匙扣库。选择你的毒药！</p><ul class=""><li id="94a5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/kishikawakatsumi/KeychainAccess" rel="noopener ugc nofollow" target="_blank">钥匙串访问</a> (6.2K星)</li><li id="544f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/square/Valet" rel="noopener ugc nofollow" target="_blank">代客</a>来自四方(3.6K星)</li><li id="c504" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/matthewpalmer/Locksmith" rel="noopener ugc nofollow" target="_blank">锁匠</a> (2.9K星星)</li></ul><h2 id="37f9" class="oa my it bd mz ob oc dn nd od oe dp nh li of og nj lm oh oi nl lq oj ok nn ol bi translated">何时使用它</h2><p id="062a" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">每当我们需要存储必须加密并保持安全的小块信息时(例如密码、凭据、令牌等)。).</p><p id="158e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到一切都必须存储为<code class="fe nu nv nw nx b">Data</code>。因此，我们只需要传递可以序列化为该类型的对象和值。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="d650" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">3.文件系统</h1><p id="137b" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">当您需要存储的内容不属于上述情况时，它必须转到<a class="ae ky" href="https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html" rel="noopener ugc nofollow" target="_blank">文件系统</a>。</p><p id="1173" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">iOS世界中的文件系统与笔记本电脑上的文件系统完全一样:它使用路径和URL来标识磁盘上的资源。但是，在iOS开发中，有一些所有开发人员都应该知道的首选文件夹:</p><ol class=""><li id="f724" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu om mb mc md bi translated"><code class="fe nu nv nw nx b">Documents</code>:这是主文件夹，可以存放用户生成的数据。</li><li id="50f5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu om mb mc md bi translated"><code class="fe nu nv nw nx b">Documents/Inbox</code>:这是每当另一个app要求我们的app打开文件时，系统都会创建的一个特殊文件夹。从应用程序的角度来看，此文件夹是只读的。例如，邮件程序会将与您的应用程序相关的电子邮件附件放在此目录中。</li><li id="2570" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu om mb mc md bi translated"><code class="fe nu nv nw nx b">Library</code>:这是一个文件夹，我们作为开发者，可以在里面存放app需要的文件。例如，我们可以存储一个二进制文件，该文件可以向应用程序提供数据。</li><li id="025d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu om mb mc md bi translated"><code class="fe nu nv nw nx b">Library/Caches</code>:这是一个特殊的文件夹。在这里，我们可以保存我们可能很快就需要的文件，但不在乎丢失。当我们停止使用这些文件时，系统会删除它们。我们为了更快地加载应用程序而下载的图像应该位于此文件夹中。</li><li id="38a8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu om mb mc md bi translated"><code class="fe nu nv nw nx b">tmp</code> : <strong class="lb iu"> </strong>另一个特殊文件夹。存储在此处的文件不会在应用程序启动时保持不变。该目录可能会被系统清除。</li></ol><p id="3fb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">应用程序中的文件系统是沙箱化的。您的应用程序(并且只有您的应用程序)可以在运行时访问文件系统。然而，有办法从备份中访问我们存储在磁盘中的文件。</p><p id="7286" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于需要加密但无法存储在钥匙串中的大文件，考虑在将它们写入文件时使用适当的<a class="ae ky" href="https://developer.apple.com/documentation/uikit/protecting_the_user_s_privacy/encrypting_your_app_s_files" rel="noopener ugc nofollow" target="_blank">加密选项</a>。在iOS中读写极其简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">读写文本和二进制文件的例子。</p></figure><h2 id="dc42" class="oa my it bd mz ob oc dn nd od oe dp nh li of og nj lm oh oi nl lq oj ok nn ol bi translated">何时使用它</h2><p id="d0c3" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">文件系统是存储我们从网上下载的图像的一个很好的选择，并希望保持方便以减少加载时间。在这种情况下，我们可以使用<code class="fe nu nv nw nx b">Library/Caches</code>文件夹。</p><p id="36b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在<code class="fe nu nv nw nx b">Library</code>文件夹中创建一个文件来存储我们app的状态，以免丢失用户的进度。</p><p id="e21b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果应用程序允许用户创建内容，那么<code class="fe nu nv nw nx b">Documents</code>文件夹是存储内容的一个很好的选择。例如，这是用户可以导出的CSV文件的位置。</p><p id="cfb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">允许用户编辑视频和照片的应用除外。在这种情况下，<code class="fe nu nv nw nx b">CameraRoll</code>是更好的选择。然而，与<code class="fe nu nv nw nx b">CameraRoll</code>合作更复杂，需要一篇独立的文章。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="8ced" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">4.Sqlite</h1><p id="dbb7" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">SQLite不仅仅是一个存储数据的地方，它还是内部数据库事实上的标准。</p><p id="5b5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SQL数据库要求我们在表中组织模型。然后，它会以最有效的方式在磁盘上存储和检索它们。</p><p id="488e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SQLite支持不是现成的。您可以利用不同的库来设置它并在您的应用程序中使用它。这里有几个建议:</p><ul class=""><li id="b19e" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/stephencelis/SQLite.swift" rel="noopener ugc nofollow" target="_blank"> SQLite </a> (7.4K星星)</li><li id="2382" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://github.com/groue/GRDB.swift" rel="noopener ugc nofollow" target="_blank"> GRDB </a> (3.7K明星)</li></ul><p id="57d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SQLite框架让我们在文件系统中传递文件路径。他们使用这个文件来创建SQLite数据库，然后打开一个到它的连接，以便应用程序与之交互。<code class="fe nu nv nw nx b">Library</code>文件夹通常是存储SQLite数据库的最佳位置。</p><h2 id="4410" class="oa my it bd mz ob oc dn nd od oe dp nh li of og nj lm oh oi nl lq oj ok nn ol bi translated"><strong class="ak">何时使用</strong></h2><p id="9da8" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">SQLite是一个数据库。它的最佳用例是当我们拥有大量结构良好的数据时。想象一下用户在使用计步应用程序时执行的所有步骤。</p><p id="0f42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了存储能力之外，拥有一个SQL数据库可以实现高效的检索，并且可以编写复杂的查询来提取有趣的见解。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="5ba7" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">5.核心数据</h1><p id="860d" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><a class="ae ky" href="https://developer.apple.com/documentation/coredata" rel="noopener ugc nofollow" target="_blank">核心数据</a>是iOS自带的<a class="ae ky" href="https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping" rel="noopener ugc nofollow" target="_blank">对象关系映射(ORM) </a> <strong class="lb iu"> </strong>框架。与SQLite一样，核心数据不是存储数据的位置，而是操纵数据的一种方式。你可以把它看作是SQLite的进化。</p><p id="2699" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个框架，我们可以利用Xcode从一个直观的GUI为我们的应用程序创建一个内聚的数据模型。该框架还负责执行数据迁移(或者至少帮助我们完成迁移)，以及将数据与磁盘和多线程同步。</p><p id="62fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用核心数据相当复杂。最好按照教程来掌握它:</p><ul class=""><li id="b280" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://www.raywenderlich.com/7569-getting-started-with-core-data-tutorial" rel="noopener ugc nofollow" target="_blank">雷·万德利希</a>(原文)</li><li id="2a24" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">雷·万德利希 (YouTube)</li></ul><p id="30f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在核心数据中，我们创建一个由<code class="fe nu nv nw nx b">Context</code>管理的<code class="fe nu nv nw nx b">DataModel</code>。然后，<code class="fe nu nv nw nx b">Context</code>与负责从磁盘存储和检索数据的<code class="fe nu nv nw nx b">StorePersistor</code>协调。</p><p id="04d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在引擎盖下，核心数据使用存储在<code class="fe nu nv nw nx b">Library/Application Support</code>文件夹中的SQLite数据库。但是，可以传递一个自定义URL来从默认位置移动数据库。</p><h2 id="9c64" class="oa my it bd mz ob oc dn nd od oe dp nh li of og nj lm oh oi nl lq oj ok nn ol bi translated">何时使用它</h2><p id="451e" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">当我们需要跟踪具有多个实体和关系的复杂对象模型时，核心数据大放异彩。它拥有对上下文和多线程的高级控制，这使得模块化数据访问变得很容易。</p><p id="fa04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在构建一个已经划分成模块的大型复杂应用程序，核心数据可能是您工具箱中的一个不错的补充。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="0384" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">结论</h1><p id="8253" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">在今天的文章中，我们探讨了在iOS中使用数据存储的一些替代方法。我们从基础的<code class="fe nu nv nw nx b">UserDefaults</code>开始，导航到相当复杂的概念，比如<code class="fe nu nv nw nx b">CoreData</code>。</p><p id="6473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这个简短的介绍可以指导你们中的一些人选择正确的位置和正确的技术来存储和检索iOS应用程序中的数据。</p></div></div>    
</body>
</html>