<html>
<head>
<title>JavaScript Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-best-practices-returns-scopes-and-ifs-5d321aa5a75a?source=collection_archive---------10-----------------------#2020-04-07">https://betterprogramming.pub/javascript-best-practices-returns-scopes-and-ifs-5d321aa5a75a?source=collection_archive---------10-----------------------#2020-04-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7703" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">返回、范围和if语句</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7de18b09503057c7869fd2bf6639589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_oHX24Pzh2nOCYt7"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@shauncolinbell?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">肖恩贝尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="c937" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="153c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将看看在某些回调中返回值，使用块范围的变量，清理<code class="fe lv lw lx ly b">if</code>语句，并清楚地返回。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e003" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">在传入数组方法的回调中返回值</h1><p id="ad23" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">很多JavaScript数组方法，像<code class="fe lv lw lx ly b">map</code>、<code class="fe lv lw lx ly b">from</code>、<code class="fe lv lw lx ly b">every</code>、<code class="fe lv lw lx ly b">some</code>、<code class="fe lv lw lx ly b">reduce</code>、<code class="fe lv lw lx ly b">find</code>、<code class="fe lv lw lx ly b">findIndex</code>、<code class="fe lv lw lx ly b">reduceRight</code>、<code class="fe lv lw lx ly b">filter</code>、<code class="fe lv lw lx ly b">sort</code>，都是采取回调的。</p><p id="2327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传入的回调应该返回一些值，以便这些方法可以返回一个正确的值，允许我们做其他事情。例如，下面的代码可能是无用的和错误的:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="6111" class="nh mh it ly b gy ni nj l nk nl">const arr = [1, 2, 3];<br/>const mapped = arr.map(() =&gt; {});</span></pre><p id="3e63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们看到<code class="fe lv lw lx ly b">mapped</code>的值是<code class="fe lv lw lx ly b">[undefined, undefined, undefined]</code>。很可能不是我们想要的。因此，我们应该确保这些数组方法接受的回调返回一个值，这样我们就不会得到意想不到的东西。</p><p id="a811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不应该有不返回任何值的回调，除非我们100%确定我们想这样做。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="51a5" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用块范围的变量</h1><p id="216e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果我们使用<code class="fe lv lw lx ly b">var</code>来声明变量，我们应该像对待块范围的变量一样对待它们，这样我们就不会给自己和其他开发人员造成混淆。</p><p id="76c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以这样写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="eb39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">foo</code>如我们所料记录了<code class="fe lv lw lx ly b">true</code>，但令人困惑的是我们在一个<code class="fe lv lw lx ly b">if</code>块中声明了<code class="fe lv lw lx ly b">var foo</code>两次。</p><p id="9811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该像对待块范围的变量一样对待<code class="fe lv lw lx ly b">var</code>以减少混淆，所以我们应该改为:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="42cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的是，我们应该对块范围的变量使用<code class="fe lv lw lx ly b">let</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="07bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">let</code>总是块范围的，所以我们不能像<code class="fe lv lw lx ly b">var</code>那样把变量放在任何我们想要的地方。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="2514" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">类方法应该引用这个</h1><p id="c3ed" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">实例方法应该引用JavaScript类中的<code class="fe lv lw lx ly b">this</code>。否则，它作为实例方法就没有意义了。如果我们不需要在一个类方法中引用<code class="fe lv lw lx ly b">this</code>，那么它应该是一个静态方法。</p><p id="0225" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="2a81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">bar</code>不应该是实例方法，因为它不引用<code class="fe lv lw lx ly b">this</code>。相反，我们应该使它成为静态方法，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8eff" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">通过一段代码限制线性独立的路径</h1><p id="b87e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们不应该在任何<code class="fe lv lw lx ly b">if</code>语句中有太多的<code class="fe lv lw lx ly b">else if</code>块来降低复杂度。为了使代码易于阅读，我们应该减少一条<code class="fe lv lw lx ly b">if</code>语句可以采用的路径数量。</p><p id="99ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="f9ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该考虑减少<code class="fe lv lw lx ly b">if</code>语句的情况。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/92fa1d6d4e4b3f9ad31625bb370b222b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f75NhhI_4m0FVDYJ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@rodlong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杆长</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">防溅板</a>上拍照。</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="040e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">Return语句应该指定一个值或不指定值</h1><p id="ca38" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在JavaScript中，<code class="fe lv lw lx ly b">return</code>语句可以以多种方式返回<code class="fe lv lw lx ly b">undefined</code>。<code class="fe lv lw lx ly b">return</code>返回<code class="fe lv lw lx ly b">undefined</code>后无任何内容。后面带有<code class="fe lv lw lx ly b">void</code>的<code class="fe lv lw lx ly b">return</code>和后面带有<code class="fe lv lw lx ly b">void</code>的表达式也返回<code class="fe lv lw lx ly b">undefined</code>。</p><p id="c8dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">return</code>同<code class="fe lv lw lx ly b">undefined</code>之后它也返回<code class="fe lv lw lx ly b">undefined</code>。</p><p id="c96d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该考虑什么都不返回，或者显式地返回<code class="fe lv lw lx ly b">undefined</code>或一个表达式，以明确我们试图返回或不返回什么。</p><p id="0c3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以我们要么写:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="eb8e" class="nh mh it ly b gy ni nj l nk nl">const bar = () =&gt; {<br/>  return;<br/>}</span></pre><p id="803a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="dfac" class="nh mh it ly b gy ni nj l nk nl">const bar = () =&gt; {<br/>  return 1;<br/>}</span></pre><p id="e4fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="21fd" class="nh mh it ly b gy ni nj l nk nl">const bar = () =&gt; {<br/>  return undefined;<br/>}</span></pre><p id="0d37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很少使用<code class="fe lv lw lx ly b">void</code>操作符，所以大多数开发人员不熟悉它。它的用途也是有限的。因此，不常使用。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="35e7" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="78af" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">许多数组方法接受一个应该返回值的回调。像<code class="fe lv lw lx ly b">map</code>、<code class="fe lv lw lx ly b">reduce</code>、<code class="fe lv lw lx ly b">filter</code>等实例方法。所有的回调都应该返回值。</p><p id="d63d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类实例方法应该引用<code class="fe lv lw lx ly b">this</code>。如果没有，那么它们应该是静态方法。</p><p id="b768" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">陈述不应该太复杂。保持最小的路径数量。</p><p id="dbb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe lv lw lx ly b">return</code>应该返回值或不返回值，而不是使用<code class="fe lv lw lx ly b">void</code>操作符。</p></div></div>    
</body>
</html>