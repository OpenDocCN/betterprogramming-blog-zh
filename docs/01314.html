<html>
<head>
<title>How To Use the Optional Chaining Operator in Your JavaScript App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在您的JavaScript应用程序中使用可选的链接操作符</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-the-optional-chaining-operator-in-your-javascript-app-a08f28db13e9?source=collection_archive---------3-----------------------#2019-08-31">https://betterprogramming.pub/how-to-use-the-optional-chaining-operator-in-your-javascript-app-a08f28db13e9?source=collection_archive---------3-----------------------#2019-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e2f1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Swift的可选处理是JavaScript</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7fa5f472870e047d1ab825db36ba6667.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E2a74aCpOuDmeTnxbWeURw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马修·惠勒在<a class="ae ky" href="https://unsplash.com/search/photos/chain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f4ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可选链接是一个被提议的特性，可能会被合并到JavaScript规范中。</p><p id="76a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">操作符允许你遍历一个嵌套的对象来获得变量的值，而不用担心这些变量是否会被定义。</p><p id="d580" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在没有可选链接的情况下，如果您有以下对象:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="af47" class="ma mb it lw b gy mc md l me mf">const person = {<br/>  name: 'Alice',<br/>  cat: {<br/>    name: 'Bob'<br/>  }<br/>};</span></pre><p id="7bd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想得到猫的名字，你必须使用下面的代码:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ce79" class="ma mb it lw b gy mc md l me mf">const catName = person.cat.name;</span></pre><p id="e82c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe mg mh mi lw b">person</code>中的<code class="fe mg mh mi lw b">cat</code>未定义或为空，JavaScript解释器将抛出错误。使用可选的链接操作符，您可以编写:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4e60" class="ma mb it lw b gy mc md l me mf">const catName = person?.cat?.name;</span></pre><p id="51e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe mg mh mi lw b">cat</code>未定义，则<code class="fe mg mh mi lw b">catName</code>将为<code class="fe mg mh mi lw b">null</code>。</p><p id="af72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它也适用于对象的关键点。代替<code class="fe mg mh mi lw b">const catName = person?.cat?.name;</code>，我们可以写:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0843" class="ma mb it lw b gy mc md l me mf">const catName = person?.['cat']?.['name'];</span></pre><p id="8cfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种语法也适用于函数。例如，您可以写:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f6d3" class="ma mb it lw b gy mc md l me mf">func?.('foo')</span></pre><p id="859b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用字符串调用函数<code class="fe mg mh mi lw b">func</code>，其中<code class="fe mg mh mi lw b">func</code>可能未定义或为空。如果该函数不存在，它将不会运行。</p><p id="c4ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了进一步说明这个例子，并向您展示如何在实际应用程序中使用它，我们将构建一个React应用程序，它使用<a class="ae ky" href="https://api.nasa.gov/index.html" rel="noopener ugc nofollow" target="_blank"> NASA API </a>来获取最新的小行星数据。</p><p id="9d5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用<a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a> CLI程序来构建应用程序。</p><p id="1d80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于可选链接只是一个提议的功能，CLI目前还不支持它，所以我们必须自己做一些工作，安装一些包并对应用程序的<a class="ae ky" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank"> Babel </a>配置进行一些更改，以启用可选链接。</p><p id="0430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们运行<code class="fe mg mh mi lw b">npx create-react-app nasa-app</code>来创建包含初始文件的项目文件夹。</p><p id="a38a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们安装<code class="fe mg mh mi lw b">npm i -D @babel/plugin-proposal-optional-chaining customize-cra react-app-rewired</code>开始定制Create React App，以支持可选的链接语法。</p><p id="2df3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们必须添加新的配置文件并编辑现有的文件，以让我们的应用程序运行并使用该语法进行构建。</p><p id="3569" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们添加一个名为<code class="fe mg mh mi lw b">config-overrides.js</code>的文件，并添加以下内容:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c602" class="ma mb it lw b gy mc md l me mf">const { useBabelRc, override, useEslintRc } = require("customize-cra");</span><span id="c936" class="ma mb it lw b gy mj md l me mf">module.exports = override(useBabelRc());</span></pre><p id="e0d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用<code class="fe mg mh mi lw b">.babelrc</code>配置文件。</p><p id="9513" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们在项目的根文件夹中创建<code class="fe mg mh mi lw b">.babelrc</code>文件，并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4892" class="ma mb it lw b gy mc md l me mf">{<br/>    "plugins": [<br/>        [<br/>            "<a class="ae ky" href="http://twitter.com/babel/plugin-proposal-optional-" rel="noopener ugc nofollow" target="_blank">@babel/plugin-proposal-optional-</a>chaining"<br/>        ],<br/>    ]<br/>}</span></pre><p id="8a81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在我们的项目中增加对可选链接语法的支持。</p><p id="a0df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们必须切换到使用<code class="fe mg mh mi lw b">react-app-rewired</code>而不是通常的<code class="fe mg mh mi lw b">react-script</code>程序来运行和构建我们的应用程序。</p><p id="782a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，在<code class="fe mg mh mi lw b">package.json</code>的<code class="fe mg mh mi lw b">scripts</code>部分，我们放置:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c650" class="ma mb it lw b gy mc md l me mf">"scripts": {<br/>    "start": "react-app-rewired start",<br/>    "build": "react-app-rewired build",<br/>    "test": "react-app-rewired test --env=jsdom",<br/>    "eject": "react-scripts eject"<br/>}</span></pre><p id="3196" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们用<code class="fe mg mh mi lw b">react-app-rewired</code>替换了使用<code class="fe mg mh mi lw b">react-script</code>运行和构建我们的应用程序的原始脚本。</p><p id="a10e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以使用可选的链接语法来构建我们的应用程序。</p><p id="155f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们必须安装一些软件包。</p><p id="0184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行<code class="fe mg mh mi lw b">npm i axios bootstrap react-bootstrap formik yup react-router-dom</code>安装<a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a> HTTP客户端，<a class="ae ky" href="https://react-bootstrap.github.io/" rel="noopener ugc nofollow" target="_blank"> React Bootstrap </a>用于样式化，<a class="ae ky" href="https://github.com/jaredpalmer/formik" rel="noopener ugc nofollow" target="_blank"> Formik </a>和<a class="ae ky" href="https://www.npmjs.com/package/yup" rel="noopener ugc nofollow" target="_blank"> Yup </a>用于构建表单和添加表单验证，<a class="ae ky" href="https://reacttraining.com/react-router/" rel="noopener ugc nofollow" target="_blank"> React Router </a>用于将URL路由到我们构建的页面。</p><p id="25eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以写一些代码了。在<code class="fe mg mh mi lw b">App.js</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="991d" class="ma mb it lw b gy mc md l me mf">import React from "react";<br/>import { Router, Route } from "react-router-dom";<br/>import HomePage from "./HomePage";<br/>import AsteroidsSearchPage from "./AsteroidsSearchPage";<br/>import { createBrowserHistory as createHistory } from "history";<br/>import "./App.css";<br/>import TopBar from "./TopBar";<br/>const history = createHistory();</span><span id="0568" class="ma mb it lw b gy mj md l me mf">function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Router history={history}&gt;<br/>        &lt;TopBar /&gt;<br/>        &lt;Route path="/" exact component={HomePage} /&gt;<br/>        &lt;Route path="/search" exact component={AsteroidsSearchPage} /&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="da86" class="ma mb it lw b gy mj md l me mf">export default App;</span></pre><p id="1a3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样我们就可以从客户端路由到我们的页面。在<code class="fe mg mh mi lw b">App.css</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e0e9" class="ma mb it lw b gy mc md l me mf">.center {<br/>  text-align: center;<br/>}</span></pre><p id="0ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们开始构建新页面。在<code class="fe mg mh mi lw b">src</code>文件夹中创建一个名为<code class="fe mg mh mi lw b">AsteroidSearchPage.js</code>的文件，并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c29e" class="ma mb it lw b gy mc md l me mf">import React, { useState, useEffect } from "react";<br/>import { Formik } from "formik";<br/>import Form from "react-bootstrap/Form";<br/>import Col from "react-bootstrap/Col";<br/>import Button from "react-bootstrap/Button";<br/>import * as yup from "yup";<br/>import Card from "react-bootstrap/Card";<br/>import "./AsteroidsSearchPage.css";<br/>import { searchFeed } from "./requests";</span><span id="a132" class="ma mb it lw b gy mj md l me mf">const schema = yup.object({<br/>  startDate: yup<br/>    .string()<br/>    .required("Start date is required")<br/>    .matches(<br/>      /([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/,<br/>      "Invalid start date"<br/>    ),<br/>  endDate: yup<br/>    .string()<br/>    .required("End date is required")<br/>    .matches(<br/>      /([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/,<br/>      "Invalid end date"<br/>    ),<br/>});</span><span id="07fe" class="ma mb it lw b gy mj md l me mf">function AsteroidsSearchPage() {<br/>  const [feed, setFeed] = useState({});<br/>  const [error, setError] = useState("");</span><span id="4634" class="ma mb it lw b gy mj md l me mf">const handleSubmit = async evt =&gt; {<br/>    const isValid = await schema.validate(evt);<br/>    if (!isValid) {<br/>      return;<br/>    }<br/>    try {<br/>      const response = await searchFeed(evt);<br/>      setFeed(response.data.near_earth_objects);<br/>    } catch (ex) {<br/>      alert(ex?.response?.data?.error_message);<br/>    }<br/>  };</span><span id="373a" class="ma mb it lw b gy mj md l me mf">return (<br/>    &lt;div className="AsteroidsSearchPage"&gt;<br/>      &lt;h1 className="center"&gt;Search Asteroids&lt;/h1&gt;<br/>      &lt;Formik validationSchema={schema} onSubmit={handleSubmit}&gt;<br/>        {({<br/>          handleSubmit,<br/>          handleChange,<br/>          handleBlur,<br/>          values,<br/>          touched,<br/>          isInvalid,<br/>          errors,<br/>        }) =&gt; (<br/>          &lt;Form noValidate onSubmit={handleSubmit}&gt;<br/>            &lt;Form.Row&gt;<br/>              &lt;Form.Group as={Col} md="12" controlId="startDate"&gt;<br/>                &lt;Form.Label&gt;Start Date&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="startDate"<br/>                  placeholder="YYYY-MM-DD"<br/>                  value={values.startDate || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.startDate &amp;&amp; errors.startDate}<br/>                /&gt;<br/>                &lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.startDate}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;<br/>              &lt;Form.Group as={Col} md="12" controlId="endDate"&gt;<br/>                &lt;Form.Label&gt;End Date&lt;/Form.Label&gt;<br/>                &lt;Form.Control<br/>                  type="text"<br/>                  name="endDate"<br/>                  placeholder="YYYY-MM-DD"<br/>                  value={values.endDate || ""}<br/>                  onChange={handleChange}<br/>                  isInvalid={touched.startDate &amp;&amp; errors.endDate}<br/>                /&gt;</span><span id="e9dd" class="ma mb it lw b gy mj md l me mf">&lt;Form.Control.Feedback type="invalid"&gt;<br/>                  {errors.endDate}<br/>                &lt;/Form.Control.Feedback&gt;<br/>              &lt;/Form.Group&gt;<br/>            &lt;/Form.Row&gt;<br/>            &lt;Button type="submit" style={{ marginRight: "10px" }}&gt;<br/>              Search<br/>            &lt;/Button&gt;<br/>          &lt;/Form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>      {Object.keys(feed)?.map(key =&gt; {<br/>        return (<br/>          &lt;Card style={{ width: "90vw", margin: "0 auto" }}&gt;<br/>            &lt;Card.Body&gt;<br/>              &lt;Card.Title&gt;{key}&lt;/Card.Title&gt;<br/>              {feed?.[key]?.length &gt; 0<br/>                ? feed?.[key]?.map(f =&gt; {<br/>                    return (<br/>                      &lt;div style={{ paddingBottom: "10px" }}&gt;<br/>                        {f?.close_approach_data?.length &gt; 0 ? (<br/>                          &lt;div&gt;<br/>                            &lt;b&gt;<br/>                              Close Approach Date:<br/>                              {f?.close_approach_data?.map(d =&gt; {<br/>                                return &lt;p&gt;{d?.close_approach_date_full}&lt;/p&gt;;<br/>                              })}<br/>                            &lt;/b&gt;<br/>                          &lt;/div&gt;<br/>                        ) : null}<br/>                        &lt;div&gt;<br/>                          Minimum Estimated Diameter:{" "}<br/>                          {<br/>                            f?.estimated_diameter?.kilometers<br/>                              ?.estimated_diameter_min<br/>                          }{" "}<br/>                          km<br/>                        &lt;/div&gt;<br/>                        &lt;div&gt;<br/>                          Maximum Estimated Diameter:{" "}<br/>                          {<br/>                            f?.estimated_diameter?.kilometers<br/>                              ?.estimated_diameter_max<br/>                          }{" "}<br/>                          km<br/>                          &lt;br /&gt;<br/>                        &lt;/div&gt;<br/>                      &lt;/div&gt;<br/>                    );<br/>                  })<br/>                : null}<br/>            &lt;/Card.Body&gt;<br/>          &lt;/Card&gt;<br/>        );<br/>      })}<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="0c62" class="ma mb it lw b gy mj md l me mf">export default AsteroidsSearchPage;</span></pre><p id="2ea9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里添加一个表单，通过日期范围从NASA API中搜索小行星数据。开始和结束日期字段都应该是YYYY-MM-DD格式，我们更改了表单验证以匹配<code class="fe mg mh mi lw b">schema</code>对象中的格式。</p><p id="3da0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦验证完成，通过调用<code class="fe mg mh mi lw b">schema.validate</code>函数，我们进行搜索。响应有许多嵌套的对象，所以我们在结果卡的任何地方都使用可选的链接语法。</p><p id="4e74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们循环遍历<code class="fe mg mh mi lw b">close_approach_data</code>数组，我们不假设它总是被定义或者长度大于零，对<code class="fe mg mh mi lw b">map</code>函数的调用也是如此。我们不假设<code class="fe mg mh mi lw b">map</code>函数总是被定义的。</p><p id="e59f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还为<code class="fe mg mh mi lw b">f?.estimated_diameter?.kilometers<br/> ?.estimated_diameter_min</code>和<code class="fe mg mh mi lw b">f?.estimated_diameter?.kilometers<br/> ?.estimated_diameter_max</code>使用可选的链接语法。</p><p id="c5e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嵌套层次越多，在没有可选链接语法的情况下成功遍历对象树的可能性就越小，因为嵌套对象未定义的可能性就越大。</p><p id="4e2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，请注意可选的链接语法适用于返回的结果，如<code class="fe mg mh mi lw b">Object.keys(feed)</code></p><p id="137d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们应该在<code class="fe mg mh mi lw b">src</code>文件夹中创建的<code class="fe mg mh mi lw b">AsteroidSearchPage.css</code>中，我们放入:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="39b2" class="ma mb it lw b gy mc md l me mf">.AsteroidsSearchPage{<br/>  margin: 0 auto;<br/>  width: 90vw;<br/>}</span></pre><p id="8cb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给页面添加一些页边距。</p><p id="ca2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们构建主页。在<code class="fe mg mh mi lw b">src</code>文件夹中创建一个名为<code class="fe mg mh mi lw b">HomePage.js</code>的文件，并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c598" class="ma mb it lw b gy mc md l me mf">import React, { useState, useEffect } from "react";<br/>import { browse } from "./requests";<br/>import Card from "react-bootstrap/Card";<br/>import "./HomePage.css";</span><span id="f185" class="ma mb it lw b gy mj md l me mf">function HomePage() {<br/>  const [initialized, setIntialized] = useState(false);<br/>  const [feed, setFeed] = useState([]);</span><span id="3038" class="ma mb it lw b gy mj md l me mf">const browserFeed = async () =&gt; {<br/>    const response = await browse();<br/>    setFeed(response.data.near_earth_objects);<br/>    setIntialized(true);<br/>  };</span><span id="50a6" class="ma mb it lw b gy mj md l me mf">useEffect(() =&gt; {<br/>    if (!initialized) {<br/>      browserFeed();<br/>    }<br/>  });<br/>  return (<br/>    &lt;div className="HomePage"&gt;<br/>      &lt;h1 className='center'&gt;Asteroids Close to Earth&lt;/h1&gt;<br/>      &lt;br /&gt;<br/>      {feed?.map(f =&gt; {<br/>        return (<br/>          &lt;Card style={{ width: "90vw", margin: "0 auto" }}&gt;<br/>            &lt;Card.Body&gt;<br/>              &lt;Card.Title&gt;{f?.name}&lt;/Card.Title&gt;<br/>              &lt;div&gt;<br/>                {f?.close_approach_data?.length &gt; 0 ? (<br/>                  &lt;div&gt;<br/>                    Close Approach Date:<br/>                    {f?.close_approach_data?.map(d =&gt; {<br/>                      return &lt;p&gt;{d?.close_approach_date_full}&lt;/p&gt;;<br/>                    })}<br/>                  &lt;/div&gt;<br/>                ) : null}<br/>                &lt;p&gt;<br/>                  Minimum Estimated Diameter:{" "}<br/>                  {f?.estimated_diameter?.kilometers?.estimated_diameter_min} km<br/>                &lt;/p&gt;<br/>                &lt;p&gt;<br/>                  Maximum Estimated Diameter:{" "}<br/>                  {f?.estimated_diameter?.kilometers?.estimated_diameter_max} km<br/>                &lt;/p&gt;<br/>              &lt;/div&gt;<br/>            &lt;/Card.Body&gt;<br/>          &lt;/Card&gt;<br/>        );<br/>      })}<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="c308" class="ma mb it lw b gy mj md l me mf">export default HomePage;</span></pre><p id="02c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个页面非常类似于使用可选链接语法的<code class="fe mg mh mi lw b">AsteroidSearchPage</code>组件。</p><p id="386a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，在<code class="fe mg mh mi lw b">src</code>文件夹中创建<code class="fe mg mh mi lw b">HomePage.css</code>并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="192a" class="ma mb it lw b gy mc md l me mf">.HomePage{<br/>  text-align: left;<br/>}</span></pre><p id="b410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">向左对齐文本。</p><p id="8d75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们在<code class="fe mg mh mi lw b">src</code>文件夹中创建<code class="fe mg mh mi lw b">requests.js</code>并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="48d6" class="ma mb it lw b gy mc md l me mf">const APIURL = "<a class="ae ky" href="https://api.nasa.gov/neo/rest/v1" rel="noopener ugc nofollow" target="_blank">https://api.nasa.gov/neo/rest/v1</a>";<br/>const axios = require("axios");</span><span id="46ff" class="ma mb it lw b gy mj md l me mf">export const searchFeed = data =&gt;<br/>  axios.get(<br/>    `${APIURL}/feed?start_date=${data.startDate}&amp;end_date=${data.endDate}&amp;api_key=${process.env.REACT_APP_APIKEY}`<br/>  );</span><span id="0ce8" class="ma mb it lw b gy mj md l me mf">export const browse = () =&gt;<br/>  axios.get(`${APIURL}/neo/browse?api_key=${process.env.REACT_APP_APIKEY}`);</span></pre><p id="16cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加向NASA API发出HTTP请求的函数，以获取小行星数据并搜索它们。</p><p id="2eed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您使用<code class="fe mg mh mi lw b">REACT_APP_APIKEY</code>作为键将API键添加到项目的<code class="fe mg mh mi lw b">.env</code>文件时，<code class="fe mg mh mi lw b">process.env.REACT_APP_APIKEY</code>具有API键。在NASA注册一个<a class="ae ky" href="https://api.nasa.gov/#apply-for-an-api-key" rel="noopener ugc nofollow" target="_blank"> API密匙</a>。</p><p id="9e79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将<code class="fe mg mh mi lw b">TopBar.js</code>添加到<code class="fe mg mh mi lw b">src</code>文件夹，并添加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2019" class="ma mb it lw b gy mc md l me mf">import React from "react";<br/>import Navbar from "react-bootstrap/Navbar";<br/>import Nav from "react-bootstrap/Nav";<br/>import { withRouter } from "react-router-dom";</span><span id="ff92" class="ma mb it lw b gy mj md l me mf">function TopBar({ location }) {<br/>  const { pathname } = location;<br/>  return (<br/>    &lt;Navbar bg="primary" expand="lg" variant="dark"&gt;<br/>      &lt;Navbar.Brand href="#home"&gt;NASA App&lt;/Navbar.Brand&gt;<br/>      &lt;Navbar.Toggle aria-controls="basic-navbar-nav" /&gt;<br/>      &lt;Navbar.Collapse id="basic-navbar-nav"&gt;<br/>        &lt;Nav className="mr-auto"&gt;<br/>          &lt;Nav.Link href="/" active={pathname == "/"}&gt;<br/>            Home<br/>          &lt;/Nav.Link&gt;<br/>          &lt;Nav.Link href="/search" active={pathname.includes("/search")}&gt;<br/>            Search<br/>          &lt;/Nav.Link&gt;<br/>        &lt;/Nav&gt;<br/>      &lt;/Navbar.Collapse&gt;<br/>    &lt;/Navbar&gt;<br/>  );<br/>}</span><span id="0a32" class="ma mb it lw b gy mj md l me mf">export default withRouter(TopBar);</span></pre><p id="b2cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们应用程序中每个页面顶部的导航栏。我们通过检查页面的当前URL来设置<code class="fe mg mh mi lw b">active</code>属性，这样我们就可以在链接中得到高亮显示。</p><p id="723f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成后，我们得到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/3a5ff657522cc725ad4bea50441797e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CgggLIAzosMPbVKc9ywKqg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/7e662981c705ffe25731ff207751c05d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WE2y4jxXaZ8RSk-UUrl11A.png"/></div></div></figure></div></div>    
</body>
</html>