<html>
<head>
<title>Sublime Text 3 TensorFlow GPU 1.13 Environment With RTX 2080 on Ubuntu 18.04 LTS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Sublime Text 3 TensorFlow GPU 1.13环境与Ubuntu 18.04 LTS上的RTX 2080</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/sublime-text-3-tensorflow-gpu-1-13-environment-with-rtx-2080-on-ubuntu-18-04-lts-a907f4b3cced?source=collection_archive---------8-----------------------#2019-08-08">https://betterprogramming.pub/sublime-text-3-tensorflow-gpu-1-13-environment-with-rtx-2080-on-ubuntu-18-04-lts-a907f4b3cced?source=collection_archive---------8-----------------------#2019-08-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3fa8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf"> CUDA 10.0，cuDNN v7.6.0，TensorFlow v1.13，Ubuntu 18.04 LTS </em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/9a100679fe03f16e2986876bf743195d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*msZA0h1-S7WBg-Bo"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated"><a class="ae kw" href="https://unsplash.com/@lucabravo" rel="noopener ugc nofollow" target="_blank">卢卡布拉沃</a>在<a class="ae kw" href="https://unsplash.com/photos/XJXWbfSo2f0" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="beef" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你刚刚得到一个新的<a class="ae kw" href="https://www.nvidia.com/en-gb/geforce/graphics-cards/rtx-2080/" rel="noopener ugc nofollow" target="_blank">英伟达RTX 2080 </a>并且想要使用<a class="ae kw" href="https://www.tensorflow.org/" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a> GPU来泵出一些ML算法吗？</p><p id="2062" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">本周早些时候，我也遇到了这种情况。不幸的是，我花了两天时间在网上搜索正确设置驱动程序。</p><p id="d608" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">本指南的目的是在Sublime Text 3中设置一个工作环境，以便您可以在<a class="ae kw" href="https://ubuntu.com/" rel="noopener ugc nofollow" target="_blank"> Ubuntu </a> 18.04 LTS上使用TensorFlow GPU和RTX 2080运行您的ML算法。</p><ol class=""><li id="de29" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">安装CUDA<a class="ae kw" href="https://developer.nvidia.com/cuda-zone" rel="noopener ugc nofollow" target="_blank">10.0和依赖项</a></li><li id="5f6c" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">安装<a class="ae kw" href="https://developer.nvidia.com/cudnn" rel="noopener ugc nofollow" target="_blank"> cuDNN </a> 7.6.0</li><li id="ee9e" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">安装<a class="ae kw" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank"> Anaconda3 </a></li><li id="6b50" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">安装TensorFlow GPU</li><li id="242e" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">创建<a class="ae kw" href="https://www.sublimetext.com/3" rel="noopener ugc nofollow" target="_blank">Sublime Text 3</a>tensor flow GPU环境</li></ol><p id="ff1f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我会推荐全新安装Ubuntu 18.04 LTS版。使用<a class="ae kw" href="https://rufus.ie/" rel="noopener ugc nofollow" target="_blank">拒绝</a>创建一个可引导的USB并重新安装Ubuntu。如果你想双启动Ubuntu，请遵循这个<a class="ae kw" href="https://medium.com/@jangid.hitesh2112/how-to-install-ubuntu-alongside-window-dual-boot-6be6be286f81" rel="noopener">指南</a>。</p><p id="e239" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一旦安装了Ubuntu 18.04 LTS，你可能会注意到显示器的分辨率被打乱了。这是因为Linux没有识别RTX 2080驱动程序，并且使用默认的<a class="ae kw" href="https://nouveau.freedesktop.org/" rel="noopener ugc nofollow" target="_blank">新驱动程序。</a></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="2472" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated"><strong class="ak">步骤1 </strong>:安装CUDA 10.0及依赖项</h1><p id="1285" class="pw-post-body-paragraph kx ky iq kz b la ng jr lc ld nh ju lf lg ni li lj lk nj lm ln lo nk lq lr ls ij bi translated">我们首先需要安装<a class="ae kw" href="https://gcc.gnu.org/" rel="noopener ugc nofollow" target="_blank"> GCC </a>和<a class="ae kw" href="https://packages.ubuntu.com/bionic/make" rel="noopener ugc nofollow" target="_blank"> make </a>，这是编译CUDA 10.0的包。</p><p id="8f42" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">打开终端(<code class="fe nl nm nn no b">CTRL + ALT+ T</code>)，输入:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="bfb2" class="nt mp iq no b gy nu nv l nw nx">$ sudo apt install gcc</span><span id="81de" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt install make</span><span id="84ee" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get install freeglut3 freeglut3-dev libxi-dev libxmu-dev</span></pre><p id="e149" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，更新所有软件包以确保一切都是最新的:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="1efe" class="nt mp iq no b gy nu nv l nw nx">$ sudo apt-get update</span><span id="1eac" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get upgrade -y</span><span id="df86" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get dist-upgrade -y</span></pre><p id="6e7a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，<code class="fe nl nm nn no b">reboot</code>系统。</p><p id="df48" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在安装CUDA 10.0和<a class="ae kw" href="https://www.nvidia.com/en-us/" rel="noopener ugc nofollow" target="_blank"> NVIDIA </a>驱动之前，我们需要禁用这个新驱动。</p><p id="2cc5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要将新手司机列入黑名单，我们需要用<code class="fe nl nm nn no b">CTRL+ALT+F2</code>退出GUI。输入您的用户名和密码，并在终端中创建以下<code class="fe nl nm nn no b">.conf</code>文件:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="c24b" class="nt mp iq no b gy nu nv l nw nx">$ nano /etc/modprobe.d/blacklist-nouveau.conf</span><span id="7dfc" class="nt mp iq no b gy ny nv l nw nx">blacklist nouveau</span><span id="728d" class="nt mp iq no b gy ny nv l nw nx">options nouveau modeset=0</span></pre><p id="9d39" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">用<code class="fe nl nm nn no b">CTRL+O</code>写修改，退出<code class="fe nl nm nn no b">CTRL+X</code>，然后应用到根文件系统。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="561e" class="nt mp iq no b gy nu nv l nw nx">$ sudo update-initramfs -u</span><span id="2ef5" class="nt mp iq no b gy ny nv l nw nx">$ sudo reboot</span></pre><p id="38a9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">注意:如果你的显示器分辨率之前没有出错，现在禁用新驱动程序后就会出错。不用担心，安装CUDA 10.0后会修复这个问题。</p><p id="a087" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在我们已经为安装CUDA 10.0做好了一切准备。下载deb(网络)版CUDA 10.0。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/b50910e67672951565540c3c6b2c195f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*tZDMbEFp6C5JNwsW2I-EJQ.png"/></div></figure><p id="f457" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">打开终端，导航到下载文件夹，安装CUDA 10.0。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="536b" class="nt mp iq no b gy nu nv l nw nx">$ cd Downloads/</span><span id="cc72" class="nt mp iq no b gy ny nv l nw nx">$ sudo dpkg -i cuda-repo-ubuntu1804_10.0.130-1_amd64.deb</span><span id="acc8" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub`</span><span id="663b" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get update</span><span id="7ebc" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get install cuda-10-0</span></pre><p id="b317" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">注意:确保您运行的是<code class="fe nl nm nn no b">sudo apt-get install cuda-10–0</code>，而不是<code class="fe nl nm nn no b">sudo apt-get install cuda</code>，否则可能会安装更高版本的CUDA。</p><p id="4539" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">将CUDA 10.0添加到您的路径中。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="6462" class="nt mp iq no b gy nu nv l nw nx">$ export PATH=/usr/local/cuda-10.0/bin${PATH:+:${PATH}}</span><span id="9bc4" class="nt mp iq no b gy ny nv l nw nx">$ export LD_LIBRARY_PATH=/usr/local/cuda-10.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</span><span id="a648" class="nt mp iq no b gy ny nv l nw nx">$ source ~/.bashrc</span></pre><p id="bc54" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，应该安装了CUDA 10.0。要检查NVIDIA和CUDA 10.0的安装，请运行:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="32fa" class="nt mp iq no b gy nu nv l nw nx">$ nvidia-smi</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f267882cea8b965c137b7bacb253adf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*JJI-qdkZaBXaLyott--fBQ.png"/></div></figure><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="82b6" class="nt mp iq no b gy nu nv l nw nx">$ nvcc -V</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/c8dffc0745cf86aeb1e3b90f11b5b37d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*ABRqtgmbgZ6l9r0Bkmt-6w.png"/></div></figure><p id="21cc" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为了测试目录运行是否顺畅，让我们试用一些示例。我们将创建一个测试目录，复制一些示例，并运行它们。</p><p id="363d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在终端中:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="9440" class="nt mp iq no b gy nu nv l nw nx">$ mkdir test</span><span id="d865" class="nt mp iq no b gy ny nv l nw nx">$ cd test/</span><span id="9923" class="nt mp iq no b gy ny nv l nw nx">$ cp -a /usr/local/cuda-10.0/samples samples-10.0</span><span id="706a" class="nt mp iq no b gy ny nv l nw nx">$ cd /samples-10.0/</span><span id="6744" class="nt mp iq no b gy ny nv l nw nx">$ make -j 4</span><span id="1ce3" class="nt mp iq no b gy ny nv l nw nx">$ cd bin/x86_64/linux/release$ ./nbody</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nz"><img src="../Images/4a8884ac2dd2bedea22060aff056a295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*APsEGHDblnbFCtMBkCYmTA.png"/></div></div></figure><p id="f8c2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果我们查看NVIDIA GUI ( <code class="fe nl nm nn no b">nvidia-settings</code>)，我们可以看到GPU利用率为52%，模拟正在运行，这证实了NVIDIA驱动程序和CUDA 10.0都已成功安装。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/fccb9e9d2a4aff6b02f1471f232123b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*PdFt3daZdOKDhpcso63YeQ.png"/></div></figure></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="afa2" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated"><strong class="ak">第二步:</strong>安装cuDNN 7.6.0</h1><p id="5aa7" class="pw-post-body-paragraph kx ky iq kz b la ng jr lc ld nh ju lf lg ni li lj lk nj lm ln lo nk lq lr ls ij bi translated">为CUDA 10.0下载cud nn v 7 . 6 . 0(2019年5月20日)。您需要创建一个帐户并完成一项调查才能下载。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/aa54f103b16096a09a24939830bf6d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*a9m9TJ3sdz0HkTqB3Bg4nw.png"/></div></figure><p id="7d15" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">下载完成后，导航到downloads文件夹，解包，将解包的内容复制到CUDA目录中，并授予所有用户读写权限:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="a5d4" class="nt mp iq no b gy nu nv l nw nx">$ cd Downloads/</span><span id="9f4a" class="nt mp iq no b gy ny nv l nw nx">$ tar -xzvf cudnn-10.0-linux-x64-v7.6.0.64.tgz</span><span id="346a" class="nt mp iq no b gy ny nv l nw nx">$ sudo cp cuda/include/cudnn.h /usr/local/cuda-10.0/include</span><span id="189e" class="nt mp iq no b gy ny nv l nw nx">$ sudo cp cuda/lib64/libcudnn* /usr/local/cuda-10.0/lib64</span><span id="1d72" class="nt mp iq no b gy ny nv l nw nx">$ sudo chmod a+r /usr/local/cuda-10.0/include/cudnn.h /usr/local/cuda-10.0/lib64/libcudnn*</span></pre><p id="0eb0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，cuDNN必须添加到<code class="fe nl nm nn no b">./bashrc</code>文件的末尾:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="a5d6" class="nt mp iq no b gy nu nv l nw nx">$ export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64"</span><span id="afd6" class="nt mp iq no b gy ny nv l nw nx">$ export CUDA_HOME=/usr/local/cuda</span><span id="4a84" class="nt mp iq no b gy ny nv l nw nx">$ export PATH=/usr/local/cuda-10.0/bin${PATH:+:${PATH}}</span><span id="5826" class="nt mp iq no b gy ny nv l nw nx">$ export LD_LIBRARY_PATH=/usr/local/cuda-10.0/lib64\${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</span><span id="e3ed" class="nt mp iq no b gy ny nv l nw nx">$ source ~/.bashrc</span><span id="9007" class="nt mp iq no b gy ny nv l nw nx">$ sudo ldconfig</span></pre><p id="fce5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当您运行<code class="fe nl nm nn no b">sudo ldconfig</code>命令时，您可能会得到错误消息<code class="fe nl nm nn no b">libcudnn.so.7 is not a symbolic link</code>。</p><p id="561d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我发现解决这个错误的方法是删除一些文件，创建一个符号链接(根据这个<a class="ae kw" href="https://askubuntu.com/questions/1025928/why-do-i-get-sbin-ldconfig-real-usr-local-cuda-lib64-libcudnn-so-7-is-not-a" rel="noopener ugc nofollow" target="_blank">链接</a>)。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="536c" class="nt mp iq no b gy nu nv l nw nx">$ cd /usr/local/cuda/lib64</span><span id="de6d" class="nt mp iq no b gy ny nv l nw nx">$ sudo rm libcudnn.so.7</span><span id="d487" class="nt mp iq no b gy ny nv l nw nx">$ sudo ln libcudnn.so.7.6.0 libcudnn.so.7</span><span id="78f6" class="nt mp iq no b gy ny nv l nw nx">$ sudo ln libcudnn.so.7 libcudnn.so</span><span id="5a18" class="nt mp iq no b gy ny nv l nw nx">$ sudo ldconfig</span></pre></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="4850" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated"><strong class="ak">第三步:</strong>安装Anaconda3</h1><p id="bd5f" class="pw-post-body-paragraph kx ky iq kz b la ng jr lc ld nh ju lf lg ni li lj lk nj lm ln lo nk lq lr ls ij bi translated"><a class="ae kw" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank"> Anaconda3 </a>是用于科学计算的<a class="ae kw" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python </a>和<a class="ae kw" href="https://www.r-project.org/about.html" rel="noopener ugc nofollow" target="_blank"> R </a>编程语言的开源发行版。这是获得Python所有关键包的一种非常简单的方法。</p><p id="7969" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要安装Anaconda3，<code class="fe nl nm nn no b">curl</code>最新版本。</p><p id="6635" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">注意:检查您是否拥有最新版本的Anaconda3，并用最新版本替换2019.07。如果你以前没用过<code class="fe nl nm nn no b">curl</code>，可以用<code class="fe nl nm nn no b">sudo apt install curl</code>安装。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="df78" class="nt mp iq no b gy nu nv l nw nx">$ cd /tmp</span><span id="07ef" class="nt mp iq no b gy ny nv l nw nx">$ curl -O https://repo.anaconda.com/archive/Anaconda3-2019.07-Linux-x86_64.sh</span><span id="d483" class="nt mp iq no b gy ny nv l nw nx">$ bash Anaconda3-2019.07-Linux-x86_64.sh</span></pre><p id="9a4c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">将出现许可协议。输入<code class="fe nl nm nn no b">yes</code>，点击<code class="fe nl nm nn no b">enter</code>，使用默认路径<code class="fe nl nm nn no b">/home/[USERNAME]/anaconda3</code>(【用户名】应该是你的用户名)。</p><p id="05f4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">安装完成后，会询问您是否要将Anaconda3添加到path中。输入<code class="fe nl nm nn no b">yes</code>，因为我们将使用<code class="fe nl nm nn no b">conda</code>命令来安装TensorFlow。</p><p id="0d45" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最后，使用以下命令激活安装:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="e47d" class="nt mp iq no b gy nu nv l nw nx">$ source ~/.bashrc</span></pre></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="f063" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated"><strong class="ak">第四步:</strong>安装TensorFlow GPU</h1><p id="3e0e" class="pw-post-body-paragraph kx ky iq kz b la ng jr lc ld nh ju lf lg ni li lj lk nj lm ln lo nk lq lr ls ij bi translated">使用Anaconda3安装，我们现在可以使用<code class="fe nl nm nn no b">conda</code>命令创建一个新环境并安装TensorFlow GPU。</p><p id="bd7d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">创建一个新环境，并使用以下命令激活它:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="7567" class="nt mp iq no b gy nu nv l nw nx">$ conda create --name tf_gpu</span><span id="584f" class="nt mp iq no b gy ny nv l nw nx">$ conda activate tf_gpu</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi od"><img src="../Images/61f2cd73cdb2ed9ce4ebe271f1137b00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*8Fr4pZwj3WG6hcz8CF9OWw.png"/></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">请注意，(base)已经更改为(tf_gpu)</p></figure><p id="e252" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，我们可以安装TensorFlow GPU:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="666e" class="nt mp iq no b gy nu nv l nw nx">$ conda install -c anaconda tensorflow-gpu</span></pre></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="1d30" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated"><strong class="ak">第五步:</strong>创建Sublime Text 3 TensorFlow GPU环境</h1><p id="3910" class="pw-post-body-paragraph kx ky iq kz b la ng jr lc ld nh ju lf lg ni li lj lk nj lm ln lo nk lq lr ls ij bi translated">Sublime Text 3是一个轻量级的IDE，可以用来编译许多不同的编程语言。</p><p id="085b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要安装Sublime，请在终端中输入以下内容:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="3b53" class="nt mp iq no b gy nu nv l nw nx">$ wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add –</span><span id="395f" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get install apt-transport-https</span><span id="1e1b" class="nt mp iq no b gy ny nv l nw nx">$ echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list</span><span id="283c" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get update</span><span id="e92c" class="nt mp iq no b gy ny nv l nw nx">$ sudo apt-get install sublime-text</span></pre><p id="fb2b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们现在需要做的就是为我们之前创建的<code class="fe nl nm nn no b">tf_gpu</code>环境添加路径。</p><p id="0b6e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">打开Sublime GUI，转到<code class="fe nl nm nn no b">Tools &gt; Build System &gt; New Build System…</code>，输入下面的代码，确保<code class="fe nl nm nn no b">tf_gpu</code>环境构建完成。</p><p id="9efe" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">注意:确保将用户名更改为您的用户名。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="e53d" class="nt mp iq no b gy nu nv l nw nx">{</span><span id="9ba6" class="nt mp iq no b gy ny nv l nw nx">"cmd": ["/home/username/anaconda3/envs/tf_gpu/bin/python3 ", "$file"],</span><span id="fbbd" class="nt mp iq no b gy ny nv l nw nx">"selector": "source.python",</span><span id="54bd" class="nt mp iq no b gy ny nv l nw nx">"file_regex": "^\\s*File \"(...*?)\", line ([0-9]*)"</span><span id="5102" class="nt mp iq no b gy ny nv l nw nx">}</span></pre><p id="bd4a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要测试TensorFlow GPU的安装是否有效，请在Sublime中创建一个新脚本并运行。</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="c09a" class="nt mp iq no b gy nu nv l nw nx">import tensorflow as tf</span><span id="537c" class="nt mp iq no b gy ny nv l nw nx">gpu = tf.Session(config=tf.ConfigProto(log_device_placement=True))</span><span id="38e8" class="nt mp iq no b gy ny nv l nw nx">print(gpu)</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/32de6d509d873f639cd42eae9bba1d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Hs3Meqf1O01ibZSGkEfrlA.png"/></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">GPU得到了TensorFlow的认可</p></figure><p id="1aab" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在这个阶段，一切正常，TensorFlow认可GPU。</p><p id="d53c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，我想我应该尝试一下我几个月前写的双向递归神经网络，用于文本摘要。</p><p id="8266" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我在Sublime中点击<code class="fe nl nm nn no b">CTRL+B</code>来构建脚本，然后，突然，它失败了，返回错误消息<code class="fe nl nm nn no b">Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR</code>。</p><p id="fe06" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我发现了一个<a class="ae kw" href="https://github.com/tensorflow/tensorflow/issues/24496" rel="noopener ugc nofollow" target="_blank"> GitHub </a>帖子，通过在Python脚本的开头添加以下内容解决了这个问题:</p><pre class="kh ki kj kk gt np no nq nr aw ns bi"><span id="6d61" class="nt mp iq no b gy nu nv l nw nx">import tensorflow as tf</span><span id="86d2" class="nt mp iq no b gy ny nv l nw nx">session_config = tf.ConfigProto(gpu_options=tf.GPUOptions(allow_growth=True))</span><span id="5f57" class="nt mp iq no b gy ny nv l nw nx">sess = tf.Session(config=session_config)</span></pre><p id="a48a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">全部完成！TensorFlow GPU应该和RTX 2080一起工作！</p><p id="6685" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>