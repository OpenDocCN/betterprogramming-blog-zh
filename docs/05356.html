<html>
<head>
<title>Feature Flags and How to Iterate Quickly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特征标志和如何快速迭代</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/feature-flags-and-how-to-iterate-quickly-7e3371b9986?source=collection_archive---------18-----------------------#2020-07-01">https://betterprogramming.pub/feature-flags-and-how-to-iterate-quickly-7e3371b9986?source=collection_archive---------18-----------------------#2020-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4bac" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么你的第一个大型功能公关应该是它的功能标志</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a6dd135b50d40d3a8dee0c502d787905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*icgYXVfrUs6Scx1L"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@yogesh_7?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yogesh Pedamkar </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">特性标志</em>(也称为<em class="lv">特性切换</em>或<em class="lv">特性翻转</em>)是一项正在开发的技术，它允许您在不部署任何代码的情况下启用或禁用一项特性。</p><p id="cf0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这背后的逻辑是部署一个条件特性，您一次只能为某些用户组激活该特性。如果标志为<code class="fe lw lx ly lz b">on</code>，则执行代码；如果<code class="fe lw lx ly lz b">off</code>，代码被跳过。</p><p id="db17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是开发运营中的一个很好的实践，它允许您在生产中直接测试您的特性。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="f273" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">它是如何工作的</h1><p id="f87f" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">这真的很简单:您有一个中央配置文件或系统来存储您的标志。</p><p id="675c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您在代码中部署一个新特性时，您向这个中央配置添加一个询问，以了解这个特定用户是否应该允许这个特性。如果是，标志为<code class="fe lw lx ly lz b">on</code>，用户可以看到该功能。如果<code class="fe lw lx ly lz b">off</code>，用户使用没有新功能的应用。</p><p id="b3e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有大量的框架和产品可以帮助你做到这一点。</p><p id="aa64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你永远不要忘记的一件事是，当你想让每个人都可以使用你的功能时，要去掉你的标志。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="5593" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">功能标志用例</h1><p id="6ee6" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">有几个使用特性标志的用例。我会试着给你一些建议来帮助你理解为什么这是一个很棒的练习。</p><h2 id="23bb" class="ne mi it bd mj nf ng dn mn nh ni dp mr li nj nk mt lm nl nm mv lq nn no mx np bi translated">快速合并您的代码，快速部署</h2><p id="4e41" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">是的，当您使用标志时，您可以更快地合并您的代码，因为您不必等到您的代码完全完善后再将其交付给生产。<br/>MVP可以被合并，因为这段代码将被跳过，直到你将你的标志设置为<code class="fe lw lx ly lz b">on</code>。</p><p id="61bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以你的发布周期会是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/276f988d5e081a760873d5615897e988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9--_4uwR2RV9Orja.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</p></figure><p id="16f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所看到的，您可以迭代您的功能以使其完善，并且您部署小的更改，这是更安全的。特性标志将特性生命周期管理从代码部署中分离出来，解放了工程团队，让他们可以从事其他任务。</p><h2 id="3f9a" class="ne mi it bd mj nf ng dn mn nh ni dp mr li nj nk mt lm nl nm mv lq nn no mx np bi translated">生产中的测试</h2><p id="6336" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">有时你没有所有的数据在你的非生产环境中测试<em class="lv">(即使你应该总是在非生产环境中测试)</em>。使用功能标志，您只需为您的QA团队(或您的产品经理)<em class="lv"> </em>激活您的标志，这样他们就可以用真实数据在您的生产中测试该功能。</p><p id="b98d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将风险降至最低，因为新特性只针对一小部分用户，所以它不会改变应用程序对其他用户的工作方式。</p><p id="e199" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一点是，你不需要成为一个工程师来启用/禁用一个特性，所以你的特性工作流不会被你的开发资源阻塞，可以被你的产品团队管理。</p><h2 id="1bdc" class="ne mi it bd mj nf ng dn mn nh ni dp mr li nj nk mt lm nl nm mv lq nn no mx np bi translated">A/B测试</h2><p id="052a" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">开发人员可以对一部分用户使用特性标志来实现<a class="ae ky" href="https://en.wikipedia.org/wiki/A/B_testing" rel="noopener ugc nofollow" target="_blank"> A/B测试</a>，让你看到两个版本之间的性能对比。</p><p id="165b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它允许你锁定特定的用户，并且只向这些用户提供这个特性。</p><h2 id="75f2" class="ne mi it bd mj nf ng dn mn nh ni dp mr li nj nk mt lm nl nm mv lq nn no mx np bi translated">渐进部署</h2><p id="db15" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">关于特性标志的另一个伟大的事情是<strong class="lb iu"> </strong>渐进部署，你可以向10%的用户推广你的特性，看看会发生什么。如果一切正常，您可以逐步增加数量，直到100%的用户都在使用新功能。</p><p id="9888" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次您增加使用百分比时，您都应该监控您的功能，并检查一切是否按预期运行。</p><h2 id="301d" class="ne mi it bd mj nf ng dn mn nh ni dp mr li nj nk mt lm nl nm mv lq nn no mx np bi translated">测试版</h2><p id="c7cb" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">有时候，客户可能会流失，因为你的产品缺少一些东西，但你已经在做了。</p><p id="3c4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，功能标志可以帮助您让他们提前访问您的功能，并帮助他们了解您正在满足他们的需求。</p><p id="569f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个很棒的事情是你会有早期反馈，我们都知道早期反馈比后期反馈花费少。</p><h2 id="7cab" class="ne mi it bd mj nf ng dn mn nh ni dp mr li nj nk mt lm nl nm mv lq nn no mx np bi translated">快速回滚</h2><p id="bdc8" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">使用特性标志启用或禁用一个特性就像切换它<code class="fe lw lx ly lz b">on</code>或<code class="fe lw lx ly lz b">off</code>一样简单，或者编辑一个配置文件，而不必重新部署和经历冗长的代码推送。</p><p id="11ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在你的特性中发现了一个bug，你只需要把你的标志放到<code class="fe lw lx ly lz b">off</code>中，代码就会立即失效。之后，你可以花时间来纠正你的bug <strong class="lb iu"> </strong>并部署补丁。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="7b53" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">结论</h1><p id="2bb8" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">正如我们所看到的，在很多用例中，特性标志是您最好的朋友。使用功能标志后，您会看到它允许您迭代您的功能并获得快速反馈，这允许您更有效率并专注于重要的事情。</p></div></div>    
</body>
</html>