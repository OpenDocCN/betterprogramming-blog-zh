<html>
<head>
<title>4 Vue 3 Composition API Tips You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的4个Vue 3合成API技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/4-vue3-composition-api-tips-you-should-know-70f68a4d626e?source=collection_archive---------9-----------------------#2020-01-20">https://betterprogramming.pub/4-vue3-composition-api-tips-you-should-know-70f68a4d626e?source=collection_archive---------9-----------------------#2020-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7094" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">随着Vue 3 Alpha的推出，许多开发人员正在尝试新的变化——最大的变化是组合API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a9cef525cde1979cac3c365d6b927b0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1YHIDWx2VzXIR_Th"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@kimberlyfarmer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">金伯利农民</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="93ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着Vue 3 Alpha的推出，许多开发者正在尝试新的变化——最大的变化是组合API。</p><p id="ce59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我花了一些时间研究新的复合API，并学习如何实现它。这里有一些事情需要一点时间来弄清楚。希望它能为您节省一些设置时间。</p><p id="c11e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到本文结束时，您应该对复合API以及如何在项目中实现它有了更多的了解。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cdd5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.正确使用它来保持有条理</h1><p id="7a78" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">组合API的主要好处是能够更有效地组织和重用代码。</p><p id="d3fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以前，在Options API中，单个特性的代码会跨不同的组件选项进行分离。现在，一切都在一个地方。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/17c5fab5d838bb28df0d0f6223b24d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AJCWoBMlq8YTyLoi"/></div></div></figure><p id="4cbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">建议的设计模式之一是在单独的函数中编写代码，返回您想要公开的属性，然后将它们包含在您的设置方法中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9ad2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这对于创建更具可读性的组件来说非常棒。此外，这意味着您甚至可以将功能提取到单独的文件中，并在任何需要的地方导入它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9768" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.何时使用参考或反应</h1><p id="0c4c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">因为Composition API直接公开了Vue的reactivity API，所以我们有两种不同的方式来创建reactive数据:<code class="fe nc nd ne nf b">ref</code>和<code class="fe nc nd ne nf b">reactive</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f57d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然<code class="fe nc nd ne nf b">reactive</code>用途更广，但这些物体一旦被破坏或扩散就会失去反应。为了解决这个问题，你可以使用<code class="fe nc nd ne nf b">toRefs</code>方法，将每个对象属性转换成它自己的反应<code class="fe nc nd ne nf b">ref</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f9b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想更深入地了解反应性何时丧失，那么<a class="ae ky" href="https://vue-composition-api-rfc.netlify.com/#ref-vs-reactive" rel="noopener ugc nofollow" target="_blank"> Composition API RFC </a>是一个很好的起点。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0d1b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.您可以在设置()中访问Props</h1><p id="b997" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在Vue 2中，我们可以使用<code class="fe nc nd ne nf b">this.<em class="ng">propName</em></code> <em class="ng">在组件的任何地方访问props。</em></p><p id="e5b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Options API和Composition API之间的一个巨大区别是我们使用了<code class="fe nc nd ne nf b">setup()</code>方法。安装程序对<code class="fe nc nd ne nf b">this</code>的访问权限不同于我们的选项API方法。</p><p id="dc35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这对于访问组件数据和方法来说不是问题，因为它们将在我们的setup方法中定义，但是当试图引用组件的props时，它确实会引起问题。</p><p id="296c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，我们的设置方法接受组件的props作为它的第一个参数。</p><pre class="kj kk kl km gt nh nf ni nj aw nk bi"><span id="1544" class="nl md it nf b gy nm nn l no np">export default {<br/>	setup (props) {<br/>		console.log(props)<br/>	}<br/>}</span></pre><p id="02ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这个语法，我们现在可以在setup方法中访问组件的props。这意味着我们的数据、方法、计算值等等可以使用对props的引用。</p><p id="e2c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要记住道具是只读的，永远不要改。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="86dd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">4.setup()也有一个上下文参数</h1><p id="dac4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">除了接受props作为参数之外，<code class="fe nc nd ne nf b">setup()</code>还有第二个可选参数:公开Vue实例的三个属性的上下文对象。</p><ol class=""><li id="36c3" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated"><code class="fe nc nd ne nf b">attrs</code> —组件的属性。</li><li id="826d" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe nc nd ne nf b">slots</code> —一个组件的插槽。</li><li id="4806" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated"><code class="fe nc nd ne nf b">emit</code> —允许我们从该组件发出一个事件。</li></ol><p id="2dbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以像这样访问这个上下文对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="2033" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，如果我们不需要整个上下文对象，我们可以析构它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9463" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="8282" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当Vue 3正式发布时，新的最佳实践、技术和设计模式肯定会在未来出现。但是现在，这些只是我希望在开始使用Composition API时就知道的一些事情。</p><p id="9955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望你学到了一些东西，对新的变化感觉更舒服。</p><p id="ad47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>