<html>
<head>
<title>Truly Reusable Design Systems in Practice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实践中真正可重用的设计系统</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/truly-reusable-design-systems-in-practice-b6a07d7e59e9?source=collection_archive---------18-----------------------#2020-01-02">https://betterprogramming.pub/truly-reusable-design-systems-in-practice-b6a07d7e59e9?source=collection_archive---------18-----------------------#2020-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c08f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">什么是伟大的设计系统——你如何为你的项目或公司创造你自己的系统？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e3b618783d440deb7d40d4c2ce49e377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lBoVOpn2Ems8ZUw_"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">阿尔瓦罗·雷耶斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8a2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Airbnb、苹果、优步和GitHub等公司已经改变了他们设计数字产品的方式，将他们的设计语言整合到一个系统中，这个系统可以供所有员工使用，甚至可以在公司外部使用。</p><p id="4b9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它很快在整个行业流行起来:只要谷歌一下公司的名字和旁边的“设计”这个词，你会惊讶地发现有多少公司有类似的东西。<a class="ae kv" href="https://airbnb.design/the-way-we-build/" rel="noopener ugc nofollow" target="_blank"> Airbnb设计</a>、<a class="ae kv" href="https://developer.apple.com/design/" rel="noopener ugc nofollow" target="_blank">苹果设计</a>、<a class="ae kv" href="https://baseweb.design/" rel="noopener ugc nofollow" target="_blank">优步基础网页</a>、<a class="ae kv" href="https://primer.style/" rel="noopener ugc nofollow" target="_blank">GitHub Primer</a>——这些都是好的设计系统的例子。</p><p id="2ea0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们今天不会讨论拥有一个全公司范围的设计系统背后的原因或随之而来的组织挑战(尽管稍后肯定会涉及到它，所以请保持关注)。相反，我们将关注技术选择和实现细节。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7313" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">一个好的设计系统的特征</h1><p id="134a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一个好的设计系统是可重用组件的集合——由清晰的标准指导——这些组件可以组合在一起构建任意数量的应用程序。让我们试着把这个定义分成我们希望从技术角度优先考虑和关注的可操作的特征。</p><h2 id="8cfd" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">可重用组件</h2><p id="aeba" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一般来说，设计系统是一组每个人都会使用的共享组件。</p><p id="e4ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想象一下，你在公司有几个独立的团队，其中一些使用香草JS。另一个小组使用React，甚至另一个小组正在试验Svelte。作为一个设计系统的创建者，你必须为这些框架构建组件，并考虑功能中的灵活性，这样你就不会将其他开发者锁定在特定的生态系统中。</p><h2 id="5578" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">大量文档</h2><p id="7e61" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了确保顺利采用您的设计系统，您必须提供经过深思熟虑、易于使用的文档，其中包含示例和最佳实践。</p><p id="69cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你是怎么做到的？首先，一个包含所有组件及其描述的网站会有所帮助。第二，如果您能直接在开发人员的ide中为您的组件提供关于可能的参数和用例的指导，那将是令人惊奇的。</p><h2 id="8091" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">面向绩效</h2><p id="8a12" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">因此，你将要求你的开发伙伴将这个设计系统作为一个依赖项添加进来，并可能替换一些已经工作的东西，确保依赖项的数量尽可能少，最好是零，这样你就不会膨胀所有项目的包大小。</p><p id="6b8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尝试依赖浏览器API或CSS，并更接近浏览器本机行为，因为更少的自定义JS代码意味着更快的组件。</p><h2 id="752a" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">保持最高质量</h2><p id="2e90" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">你还需要确保你的设计系统不会在新版本中崩溃。除了做代码审查和手工测试，我鼓励每个人都去看自动化测试。对于表示组件，考虑<a class="ae kv" href="https://storybook.js.org/docs/testing/automated-visual-testing/" rel="noopener ugc nofollow" target="_blank">截图测试</a>。对于有状态的测试，编写集成和端到端测试。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a319" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">StencilJS和Web组件拯救世界</h1><p id="36d2" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果您想知道如何在不花费一个月的时间建立架构的情况下涵盖上面列表中的所有内容，我有一些建议。</p><p id="2e55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">StencilJS 是一个工具链，用于创建基于Web组件的可重用、可扩展的设计系统。它提供了一套完整的工具，让您可以立即开始在设计系统上工作，并使使用Web组件变得更加容易。</p><p id="4218" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用Stencil创建的组件与浏览器标准完全兼容，可以在任何框架中运行，包括一个普通的HTML文件。您可以使用<a class="ae kv" href="https://stenciljs.com/docs/output-targets" rel="noopener ugc nofollow" target="_blank">输出目标</a>来添加一个展示您作品的自定义网站。它还具有<a class="ae kv" href="https://stenciljs.com/docs/screenshot-visual-diff" rel="noopener ugc nofollow" target="_blank">截图测试</a>(除了e2e和Jest集成)。</p><p id="2cf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们深入研究一下，看看构建一个简单但有状态的组件有多容易。</p><h2 id="1fc6" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">介绍获取按钮</h2><p id="64d5" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">任何设计系统的核心组件都是按钮。但是因为只有一个按钮太简单了，我们将使它足够强大，可以从属性中指定的任何端点获取数据，并通过浏览器事件返回数据。</p><p id="7e66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，运行模板生成器:<code class="fe ni nj nk nl b">npm init stencil</code>。它会让你选一个开胃菜。选择组件。这将生成一个包含简单测试组件的文件夹，这样您就可以开始使用它了(<code class="fe ni nj nk nl b">npm install &amp;&amp; npm start</code>)。</p><p id="ddb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ni nj nk nl b">src/components</code>文件夹中，你会找到<code class="fe ni nj nk nl b">my-component</code>文件夹。将其重命名为<code class="fe ni nj nk nl b">fetch-button</code>——以及其中的<code class="fe ni nj nk nl b">css</code>和<code class="fe ni nj nk nl b">tsx</code>文件。CSS文件负责我们按钮的样式，所以让我们添加一些样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c45a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在转到<code class="fe ni nj nk nl b">tsx</code>文件。这是我们需要构建的实际组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="ae97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在component类之前，我们需要添加一个decorator来指定标记名，即样式文件的路径。</p><p id="50c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后在类内部，我们需要定义一个名为<code class="fe ni nj nk nl b">url</code>的<code class="fe ni nj nk nl b">prop</code>。它将作为一个HTML属性工作，并允许我们将数据传递给组件。</p><p id="d1c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一行创建了一个状态变量:每次我们改变它，render函数都会重新运行。</p><p id="f8e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ni nj nk nl b">@Event</code>指令为我们注册了两个事件:<code class="fe ni nj nk nl b">onSuccess</code>和<code class="fe ni nj nk nl b">onError</code>。</p><p id="56fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ni nj nk nl b">@Listen</code>帮助我们监听点击事件并执行相应的功能。在我们的例子中，我们将调用本机fetch函数，并根据结果更新状态和触发事件。</p><p id="a5d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，<code class="fe ni nj nk nl b">render</code>函数定义了将要创建的DOM。<code class="fe ni nj nk nl b">&lt;slot /&gt;</code>标签将被<code class="fe ni nj nk nl b">&lt;fetch-button&gt;</code>子标签替换。</p><p id="3e46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。现在让我们看看如何使用它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6fa0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了原生HTML示例，我还添加了与React的集成。如您所见，这就像编写普通的<code class="fe ni nj nk nl b">div</code>元素一样简单。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6613" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">已知的复杂性</h1><p id="3f8f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在，是时候谈谈使用Web组件的缺点了。</p><p id="421c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最重要的一个是缺乏良好的框架支持。例如，在React中，您不能将事件侦听器附加到您的组件。</p><p id="2fc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一种变通方法，您可以使用<code class="fe ni nj nk nl b">ref</code>属性附加一个本地事件——这就是我在上面的例子中所做的。<a class="ae kv" href="https://custom-elements-everywhere.com/" rel="noopener ugc nofollow" target="_blank">Custom Elements Everywhere</a>网站展示了Web组件与流行框架的兼容性。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c594" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="3e1b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在开始设计系统之前，评估您想要关注的值。也许你根本不需要它，只要适当地组织共享组件就足够了。</p><p id="a501" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您已经决定整合系统，Web组件完美地解决了设计系统面临的挑战，并且是构建组件的好技术。</p><p id="193f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">StencilJS使得为不同的目标管理和交付组件变得容易。但是考虑到这一点，请注意并探索仍然存在的关于框架支持的问题。</p></div></div>    
</body>
</html>