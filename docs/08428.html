<html>
<head>
<title>An Overlooked Syntactic Sugar: For/Else in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个被忽视的语法糖:Python中的For/Else</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/an-overlooked-syntactic-sugar-for-else-in-python-d5c186647e99?source=collection_archive---------12-----------------------#2021-04-28">https://betterprogramming.pub/an-overlooked-syntactic-sugar-for-else-in-python-d5c186647e99?source=collection_archive---------12-----------------------#2021-04-28</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="ffc1" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">理解Python中的条件循环语句</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/905509d10c3152e8c479be694b8a287a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cet0k2MFc48YwwmJKWqw_Q.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Denis Gaík在<a class="ae kz" href="https://unsplash.com/photos/f8-NomI83MM" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="61ec" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">循环肯定是一些最常用的语句。Python附带了一个很少使用的语法糖，允许将<code class="fe lw lx ly lz b">else</code>子句与循环语句一起使用。</p><blockquote class="ma"><p id="1bb7" class="mb mc iu bd md me mf mg mh mi mj lv dk translated">"循环语句可能有一个<code class="fe lw lx ly lz b">else</code>子句."— <a class="ae kz" href="https://docs.python.org/3/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops" rel="noopener ugc nofollow" target="_blank"> Python文档</a></p></blockquote><p id="5eba" class="pw-post-body-paragraph la lb iu lc b ld mk jv lf lg ml jy li lj mm ll lm ln mn lp lq lr mo lt lu lv in bi translated">在本文中，我们将讨论循环语句拥有<code class="fe lw lx ly lz b">else</code>子句的能力。此外，我们将探索如何在通用编程结构中使用这种特殊的语法糖，并使我们的代码更具可读性，甚至更Pythonic化。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h1 id="00bd" class="mw mx iu bd my mz na nb nc nd ne nf ng ka nh kb ni kd nj ke nk kg nl kh nm nn bi translated">for/else是做什么的？</h1><p id="75f4" class="pw-post-body-paragraph la lb iu lc b ld no jv lf lg np jy li lj nq ll lm ln nr lp lq lr ns lt lu lv in bi translated">在<code class="fe lw lx ly lz b">for:else</code>语句中，<code class="fe lw lx ly lz b">else</code>子句在iterable用尽时执行(即迭代循环终止时)。如果在任何迭代中遇到<code class="fe lw lx ly lz b">break</code>语句，那么<code class="fe lw lx ly lz b">else</code>语句将被忽略。这意味着如果你的<code class="fe lw lx ly lz b">for</code>循环没有任何<code class="fe lw lx ly lz b">break</code>子句，那么<code class="fe lw lx ly lz b">else</code>子句将总是被执行。</p><p id="7eea" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">for/else</code>的符号如下:</p><pre class="kk kl km kn gu nt lz nu nv aw nw bi"><span id="143d" class="nx mx iu lz b gz ny nz l oa ob">for i in range(0, 2):<br/>    # ...<br/>else: <br/>    # ...</span></pre><p id="a666" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，为了理解<code class="fe lw lx ly lz b">for/else</code>是如何工作的，让我们考虑下面的例子:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oc od l"/></div></figure><p id="be84" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在上面的代码片段中，我们试图找出<code class="fe lw lx ly lz b">2</code>和<code class="fe lw lx ly lz b">14</code>之间的哪些数字是质数。回想一下，一个质数只能被它自己和一整除。</p><p id="1f1a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">外部循环将简单地遍历从<code class="fe lw lx ly lz b">2</code>到<code class="fe lw lx ly lz b">14</code>的每个数字。现在，内部循环将从<code class="fe lw lx ly lz b">2</code>开始迭代，直到数字本身，并检查<code class="fe lw lx ly lz b">n</code>是否能被任何余数为<code class="fe lw lx ly lz b">0</code>的数字整除。如果是这种情况，那么代码将执行一个<code class="fe lw lx ly lz b">print</code>语句，然后是<code class="fe lw lx ly lz b">break</code>，这意味着<code class="fe lw lx ly lz b">else</code>子句不会被执行。</p><p id="66d0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果数字确实是质数，则<code class="fe lw lx ly lz b">if</code>条件将永远不会满足，因此不会执行<code class="fe lw lx ly lz b">break</code>。在这种情况下，一旦内部for循环的迭代结束，就会执行<code class="fe lw lx ly lz b">else</code>子句。上面代码片段的输出如下所示:</p><pre class="kk kl km kn gu nt lz nu nv aw nw bi"><span id="fa4d" class="nx mx iu lz b gz ny nz l oa ob">2 is a prime<br/>3 is a prime<br/>4 is not a prime<br/>5 is a prime<br/>6 is not a prime<br/>7 is a prime<br/>8 is not a prime<br/>9 is not a prime<br/>10 is not a prime<br/>11 is a prime<br/>12 is not a prime<br/>13 is a prime<br/>14 is not a prime</span></pre><p id="6ea2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下一节中，我们将讨论一些适合使用<code class="fe lw lx ly lz b">for/else</code>子句的结构。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h1 id="22f2" class="mw mx iu bd my mz na nb nc nd ne nf ng ka nh kb ni kd nj ke nk kg nl kh nm nn bi translated">何时在循环语句中使用e <code class="fe lw lx ly lz b">lse</code>子句</h1><p id="8f32" class="pw-post-body-paragraph la lb iu lc b ld no jv lf lg np jy li lj nq ll lm ln nr lp lq lr ns lt lu lv in bi translated">既然我们展示了如何在Python中使用<code class="fe lw lx ly lz b">for/else</code>,那么是时候讨论一些可以适当使用这种语法糖的可能场景了。</p><p id="d064" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">编程中最常见的构造之一是迭代一个集合，以便搜索一个项，并根据是否找到该项来执行特定的操作。</p><p id="89b7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这种情况下，<code class="fe lw lx ly lz b">for/else</code>语句可能是一个很好的选择。我们在上一节中探索的代码是一个很好的例子，说明了这个子句是如何有用的，并导致更干净和更可读的代码。</p><p id="21d3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是请记住，拥有一个包含<code class="fe lw lx ly lz b">if</code>语句的<code class="fe lw lx ly lz b">for</code>循环可以很好地表明<code class="fe lw lx ly lz b">for/else</code>可能是一个选项，这取决于您到底想要实现什么。</p><p id="e7b4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一般来说，大多数开发人员将<code class="fe lw lx ly lz b">else</code>与<code class="fe lw lx ly lz b">if</code>子句联系起来，这是绝对正常的，因为大多数现代编程语言一般不支持循环语句甚至其他语句中的<code class="fe lw lx ly lz b">else</code>子句。然而，与<code class="fe lw lx ly lz b">if/else</code>子句相比，与<code class="fe lw lx ly lz b">for</code>循环一起使用的<code class="fe lw lx ly lz b">else</code>子句更类似于<code class="fe lw lx ly lz b">try/else</code>语句。在<code class="fe lw lx ly lz b">try</code>语句中，只有在没有异常发生的情况下，才会执行<code class="fe lw lx ly lz b">else</code>子句。同样，在<code class="fe lw lx ly lz b">for/else</code>语句中，<code class="fe lw lx ly lz b">else</code>子句只有在没有<code class="fe lw lx ly lz b">break</code>发生时才会被执行。</p></div><div class="ab cl mp mq hy mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="in io ip iq ir"><h1 id="4565" class="mw mx iu bd my mz na nb nc nd ne nf ng ka nh kb ni kd nj ke nk kg nl kh nm nn bi translated">最后一句话</h1><p id="45a9" class="pw-post-body-paragraph la lb iu lc b ld no jv lf lg np jy li lj nq ll lm ln nr lp lq lr ns lt lu lv in bi translated">在本文中，我们探讨了<code class="fe lw lx ly lz b">for/else</code>，这是Python中最不常用的语句之一。这种语法糖无疑是最有趣的之一，因为大多数现代编程语言不支持循环语句和<code class="fe lw lx ly lz b">else</code>子句的这种组合。</p><p id="31c1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">子句可以用在编程结构中，我们希望迭代集合并搜索特定的项目。只有在<code class="fe lw lx ly lz b">for</code>循环中没有<code class="fe lw lx ly lz b">break</code>出现时，才会执行<code class="fe lw lx ly lz b">else</code>子句，这相当于<code class="fe lw lx ly lz b">try/else</code>也是这样工作的。</p><p id="a5c4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，请注意，尽管我们讨论了在<code class="fe lw lx ly lz b">for</code>语句中使用<code class="fe lw lx ly lz b">else</code>子句，但是也可以在Python中的任何循环语句中使用这种符号，包括<code class="fe lw lx ly lz b">while</code>。</p></div></div>    
</body>
</html>