<html>
<head>
<title>Turn Off the Lights With Angular-Dark-Mode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度黑暗模式关闭灯光</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/turn-off-the-lights-with-angular-dark-mode-194241f491ae?source=collection_archive---------12-----------------------#2020-10-06">https://betterprogramming.pub/turn-off-the-lights-with-angular-dark-mode-194241f491ae?source=collection_archive---------12-----------------------#2020-10-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="aba3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">轻松将黑暗模式集成到您的应用程序中</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7a67623311f74a4bbcd5f4290bb61cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vm3TsY_vnPLrTIdiE_ohcQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="ff3a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最近，我推出了我的<a class="ae lr" href="https://talohana.com/" rel="noopener ugc nofollow" target="_blank">最小投资组合</a>。虽然很小，但我想加入黑暗和光明模式，因为这是我从未做过的事情。</p><p id="afb8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用React和Gatsby，我有大量的选项可以选择，但是我偶然发现了一个最小但功能强大的库，叫做<a class="ae lr" href="https://github.com/donavon/use-dark-mode" rel="noopener ugc nofollow" target="_blank"> use-dark-mode </a>。十分钟后，我已经将黑暗模式集成到我的文件夹中了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/f4f524d99f7846c8f9fb078cf0124405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*x18afvJ7FNNBziwscpaGpg.gif"/></div></div></figure><p id="80c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为一名Angular开发者，我认为在我们的生态系统中也有这样一个库会很好，所以我创建了<a class="ae lr" href="https://github.com/talohana/angular-dark-mode" rel="noopener ugc nofollow" target="_blank"> angular-dark-mode </a>！</p><p id="8dd5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lt">注:最终代码和演示可在</em> <a class="ae lr" href="https://stackblitz.com/edit/angular-dark-mode-blog-example?file=src%2Fapp%2Fapp.component.ts" rel="noopener ugc nofollow" target="_blank"> <em class="lt">本栈</em> </a> <em class="lt">获得。</em></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="67b3" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">设置</h1><p id="b951" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">首先，让我们快速创建一个angular项目，我们可以通过运行:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="668d" class="nd mc iq mz b gy ne nf l ng nh">npx @angular/cli new dark-mode-playground --minimal</span></pre><p id="6e31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，添加角度暗模式:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="cfec" class="nd mc iq mz b gy ne nf l ng nh">npm i angular-dark-mode </span></pre><p id="f3c4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者，如果你喜欢纱线:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="3b20" class="nd mc iq mz b gy ne nf l ng nh">yarn add angular-dark-mode</span></pre><p id="25c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，将<code class="fe ni nj nk mz b">angular-dark-mode.js</code>文件添加到<code class="fe ni nj nk mz b">angular.json</code>脚本部分:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="223d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更多关于<code class="fe ni nj nk mz b">angular-dark-mode.js</code>的信息，请看下文。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="93d1" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">给我看看代码</h1><p id="045c" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">angular-dark-mode附带一些可配置选项:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="5b2e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">给定默认选项，让我们添加一些样式来反映我们的黑暗和光明模式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="73ee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们希望根据上面的默认配置来设置样式，所以我们设置了暗模式和亮模式CSS类的样式。</p><p id="2aff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，我们希望模式之间有一个良好的转换，但希望跳过初始转换，所以我们在预加载阶段后设置它。</p><p id="128a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">移动到<code class="fe ni nj nk mz b">app.component.ts</code>，注入<code class="fe ni nj nk mz b">DarkModeService</code>，添加一些文本和一个切换按钮:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="0a1f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一切就绪！运行应用程序，根据您的操作系统主题，它会以暗模式或亮模式打开:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/31151564bc81042910b74ebc76f5b404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zM0yFpb4c-AMtsaa61SE2g.gif"/></div></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="26b5" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">angular-黑暗模式. js</h1><p id="8bba" class="pw-post-body-paragraph kv kw iq kx b ky mt jr la lb mu ju ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">该文件有几个用途:</p><ol class=""><li id="fe2b" class="no np iq kx b ky kz lb lc le nq li nr lm ns lq nt nu nv nw bi translated">持续——角度黑暗模式在<code class="fe ni nj nk mz b">localStorage</code>中保存您的偏好。当应用程序加载时，它会从<code class="fe ni nj nk mz b">localStorage</code>中检索最新的值，或者回到操作系统的偏好。</li><li id="cd3b" class="no np iq kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">预加载——正如我们看到的，当我们想要跳过初始转换时,<code class="fe ni nj nk mz b">preloadingClass</code>选项会非常方便，所以我们在这个文件中设置了<code class="fe ni nj nk mz b">preloadingClass</code>,并在初始化后将其删除。</li></ol><p id="3376" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lt">注意:库附带的</em> <code class="fe ni nj nk mz b"><em class="lt">angular-dark-mode.js</em></code> <em class="lt">文件假定您使用的是默认选项。如果您覆盖它们，请确保在本地复制</em> <code class="fe ni nj nk mz b"><em class="lt">angular-dark-mode.js</em></code> <em class="lt">，进行必要的更改，并在</em> <code class="fe ni nj nk mz b"><em class="lt">angular.json</em></code> <em class="lt">中加载本地文件，而不是库文件。</em></p><p id="7da8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>