<html>
<head>
<title>Exploring Real-Time Use Cases of Jetpack Navigation Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Jetpack导航组件的实时用例</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/exploring-real-time-use-cases-of-jetpack-navigation-component-e58dd8dfba5?source=collection_archive---------8-----------------------#2020-12-28">https://betterprogramming.pub/exploring-real-time-use-cases-of-jetpack-navigation-component-e58dd8dfba5?source=collection_archive---------8-----------------------#2020-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="00a7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对话目的地、深层链接和嵌套图形</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fc2a05947705e7c1f54dc95cf9c5ff00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nzXkAB99K9g8dRjq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@glenncarstenspeters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">格伦·卡斯滕斯-彼得斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄。</p></figure><p id="64cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Jetpack的导航组件是一个转换库，将对开发人员如何编写代码以在屏幕之间导航产生巨大影响。</p><p id="3f85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，我已经看到了很多专注于活动和片段的教程。但是Android不仅仅是一堆屏幕。它确实有吸引人的对话。此外，深层链接是导航的另一个核心方面。最后，随着产品的增长，我们无法将所有屏幕都放在一个图形中，因此我们需要学习如何将目的地分组到多个图形中。</p><p id="20d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在今天的文章中，我将重点介绍这三个概念。如果你不熟悉Jetpack导航组件，我建议你先阅读<a class="ae ky" href="https://medium.com/better-programming/jitpack-navigation-component-in-android-944165c35f54" rel="noopener">这篇文章</a>并学习基础知识。</p><p id="a8c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">话虽如此，我们还是开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="63d3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">对话目的地</h1><p id="125b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了解释对话目的地，我们将以<code class="fe mz na nb nc b">BottomSheetDialogFragment</code>为例。假设当你点击一部电影时，我们有一个电影列表。我们需要显示底部工作表对话框的细节。</p><p id="73dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将创建底部的sheen对话框片段，并解释使用导航组件触发它所需实现的代码，而不是创建整个应用程序并拖动本文。</p><p id="707c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有任何进一步的延迟，让我们创建一个名为<code class="fe mz na nb nc b">MovieDetailsDialog</code>的底部表单对话框片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="0abf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个简单的底部表单对话框，我们使用<code class="fe mz na nb nc b"><a class="ae ky" href="https://medium.com/better-programming/everything-you-should-know-about-viewbinding-in-android-52552af9e8ba" rel="noopener">viewBinding</a></code>来链接布局。下一步是在导航图中为这个对话框创建一个目的地。我们需要使用一个<code class="fe mz na nb nc b">dialog</code>标签，而不是在这里使用一个普通的片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="419f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们在导航图中有了对话片段和它的目的地。下一步是使用导航组件触发它。这类似于调用普通片段。看一看:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="83b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已。现在，您离将应用程序从传统的导航系统转移到全新的Jetpack导航组件又近了一步。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="37bf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">深层链接</h1><p id="4585" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们将讨论本文的第二个概念:深层链接。让我们从基础开始，而不是变得极客。</p><h2 id="46da" class="nf md it bd me ng nh dn mi ni nj dp mm li nk nl mo lm nm nn mq lq no np ms nq bi translated">什么是深度链接？</h2><p id="84b0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">深度链接类似于我们日常使用的链接或网址。每个链接或URL用于将用户导航到特定的目的地。例如，让我们看看下面的URL:</p><pre class="kj kk kl km gt nr nc ns nt aw nu bi"><span id="0a94" class="nf md it nc b gy nv nw l nx ny">https://www.examplemovies.com/avengers?part=3</span></pre><p id="07d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常在网络上，这个网址会加载<code class="fe mz na nb nc b">avengers part3</code>电影详情。在移动应用程序中也是如此。在Android中，我们使用<em class="nz">意图过滤器</em>的概念将特定的屏幕与特定的链接联系起来。要学习深层链接的基础知识，请阅读本文。</p><p id="a183" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们知道了什么是深层链接，让我们来探索如何在Jetpack导航组件中使用它们。我们举个同样的例子:<code class="fe mz na nb nc b">MovieDetailsDialog</code>。这里，我们将创建一个深度链接来触发一个电影细节对话框以及常规的导航动作。</p><p id="1ed8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用导航编辑器创建一个到目的地的深层链接。切换到设计选项卡，并点击工作室右侧的属性面板。然后，您将看到带有加号的深层链接选项，用于创建指向您选择的目的地的深层链接:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/95ea062a01072be96033ae34ffdd1362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aHRSulvHgpUfEQfhGW1Pcg.png"/></div></div></figure><p id="b0bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们创建了一个显式的深度链接，它使用一个<code class="fe mz na nb nc b">PendingIntent</code>将用户带到应用程序中的一个特定位置。在这种情况下，这是一个电影细节对话框。</p><p id="225f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以创建一个明确的深层链接，作为通知或应用程序快捷方式的一部分。一旦我们创建了深层链接，图中的对话目的地将如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="5f7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要导航到应用程序中的电影细节对话框，我们可以使用导航操作，但是当您需要从快捷方式、通知或某种外部资源导航时，深层链接会很方便。</p><p id="8837" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe mz na nb nc b">NavDeepLinkBuilder</code>来创建一个待定的意图，并使用它来导航:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2773" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">嵌套图</h1><p id="54ae" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在介绍本文的最后一个概念:嵌套图。如前所述，随着时间的推移，代码库会随着产品而增长。很难在单个图形中维护每个屏幕。</p><p id="6f47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分离目的地并保持清晰的导航图结构的一种方法是通过嵌套图。</p><blockquote class="ob oc od"><p id="5c98" class="kz la nz lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated">一系列的目的地可以被分组到被称为<em class="it">根图</em>的父导航图内的<em class="it">嵌套图</em>中。嵌套图形有助于组织和重用应用程序UI的各个部分，例如自包含的登录流程。”— <a class="ae ky" href="https://developer.android.com/guide/navigation/navigation-nested-graphs" rel="noopener ugc nofollow" target="_blank">安卓开发者</a></p></blockquote><p id="7808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以为应用程序中的每个模块创建单独的图表。例如，如果我们使用一个娱乐应用程序，我们可以为登录流、入职、电视节目、电影等创建单独的图表。基于图表的功能。</p><p id="ea8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管看起来很有用，但我们需要遵循一些规则来使用嵌套图。第一个也是最重要的规则是嵌套图应该封装在根图中。它们不能单独使用。</p><p id="6f15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二条规则是，任何导航图都应该有一个起始目的地。这也适用于嵌套图。导航组件只能通过其起始目的地进入任何嵌套图。</p><h2 id="0747" class="nf md it bd me ng nh dn mi ni nj dp mm li nk nl mo lm nm nn mq lq no np ms nq bi translated">将目的地分组到嵌套图形中</h2><ul class=""><li id="1104" class="oh oi it lb b lc mu lf mv li oj lm ok lq ol lu om on oo op bi translated">在导航编辑器中，您首先需要选择想要放入嵌套图中的所有目的地。我们可以通过按住Shift键并点击目的地来实现。</li><li id="368a" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated">然后我们需要右键单击并选择移动到嵌套图形&gt;新建图形。<strong class="lb iu"> </strong>这将创建一个嵌套图形并移动所选目的地。看一看:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/3b951e5ce73b72b41b3c11e7dae4242c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/0*nUXBPY8WAGJaTpUd.png"/></div></figure><ul class=""><li id="60c3" class="oh oi it lb b lc ld lf lg li ow lm ox lq oy lu om on oo op bi translated">双击嵌套图形以显示其目的地。</li><li id="b92c" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated">我们可以从根图中触发嵌套图目标，如下所示:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="06e6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">奖金</h1><p id="b991" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要了解有关Jetpack库的更多信息，请阅读以下文章:</p><ul class=""><li id="4e03" class="oh oi it lb b lc ld lf lg li ow lm ox lq oy lu om on oo op bi translated"><a class="ae ky" href="https://medium.com/swlh/workmanager-basics-how-to-use-workmanager-with-rxjava2-kotlin-coroutines-c2a317197038" rel="noopener">“工作管理器基础知识，如何将工作管理器与Rxjava2一起使用&amp; Kotlin协同程序”</a></li><li id="d0f0" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/android-room-persistence-library-kotlin-coroutines-26d53a09d384" rel="noopener">“安卓房间持久性库🔗科特林协程</a><strong class="lb iu"/></li><li id="8599" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/app-startup-new-architecture-component-d115b062a701" rel="noopener">“App启动—新架构组件”</a></li></ul><p id="93a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解有关Android高级开发的更多信息，请阅读以下文章:</p><ul class=""><li id="2705" class="oh oi it lb b lc ld lf lg li ow lm ox lq oy lu om on oo op bi translated"><a class="ae ky" href="https://levelup.gitconnected.com/vector-asserts-in-android-f0774ba8bf92" rel="noopener ugc nofollow" target="_blank">“了解如何在Android中创建矢量资源”</a></li><li id="8bad" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/android-product-flavors-eb526e35f9f1" rel="noopener">“安卓产品口味”</a></li><li id="d946" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://medium.com/@sgkantamani/how-to-create-and-publish-an-android-library-f37bf715932" rel="noopener">“如何创建和发布Android库”</a></li><li id="7fda" class="oh oi it lb b lc oq lf or li os lm ot lq ou lu om on oo op bi translated"><a class="ae ky" href="https://medium.com/android-dev-hacks/implementing-ads-in-your-android-application-28ac676024aa" rel="noopener">“在您的Android应用中实现广告”</a></li></ul><p id="c5ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前就这些。希望你学到了有用的东西。感谢阅读。</p></div></div>    
</body>
</html>