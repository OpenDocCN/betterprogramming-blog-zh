<html>
<head>
<title>Animate Your Gradient in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中制作渐变动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/animate-your-gradient-in-swift-52186b9b14d3?source=collection_archive---------6-----------------------#2021-04-23">https://betterprogramming.pub/animate-your-gradient-in-swift-52186b9b14d3?source=collection_archive---------6-----------------------#2021-04-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="72c7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在您的iOS应用程序中创建平滑的动画渐变</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7d04f5c5534b68852ac04b1f12d251b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4ulGsiiQj5sPZetA"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@danaragonmx?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹·阿拉贡</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="6643" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如今，渐变随处可见。这也难怪。通过适当的颜色组合，它们可以创造出非常流畅的视觉效果。</p><p id="57bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，我将向你展示如何创建你自己的渐变。更好的是，我将教你如何制作动画来进一步改善体验。</p><p id="269f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b8a6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">给我看看代码</h1><p id="d704" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您对实现细节不感兴趣，请随意将以下代码复制粘贴到您的视图控制器中，并运行应用程序来查看效果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f4b8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何在Swift中创建动画渐变</h1><p id="a3f2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于那些对实现细节感兴趣的人来说，您来对地方了。</p><p id="1e2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果使用得当，渐变会产生强大的效果。为了最大限度地利用它，请确保使用看起来很好的颜色和/或符合你的应用程序主题的颜色。</p><p id="b06b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nb">注意:除非你是设计配色方案的专业人士，否则你可能会发现</em><a class="ae ky" href="https://uigradients.com/" rel="noopener ugc nofollow" target="_blank"><em class="nb">ui gradients</em></a><em class="nb">中提供的渐变样本很有用。</em></p><p id="b4bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你选择了一组好看的颜色后，让我们开始编码。</p><p id="f23a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记得将所有代码放在视图控制器中。</p><h2 id="a340" class="nc md it bd me nd ne dn mi nf ng dp mm li nh ni mo lm nj nk mq lq nl nm ms nn bi translated">定义颜色</h2><p id="5ad8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，你需要定义你刚刚选择的渐变的颜色。我觉得这三种颜色非常酷。您也可以使用它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="c1a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意每种颜色是如何转换成<code class="fe no np nq nr b">cgColor</code>的。这是因为你不能在渐变中使用这些颜色，否则。</p><h2 id="2cad" class="nc md it bd me nd ne dn mi nf ng dp mm li nh ni mo lm nj nk mq lq nl nm ms nn bi translated">初始化渐变</h2><p id="6043" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们初始化一个空的渐变层和一个空的数组。这个数组稍后将包含渐变颜色。您还需要一个索引来跟踪颜色:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="6031" class="nc md it nr b gy nw nx l ny nz"><strong class="nr iu">let</strong> gradient: CAGradientLayer = CAGradientLayer()<br/><strong class="nr iu">var</strong> gradientColorSet: [[CGColor]] = []<br/><strong class="nr iu">var</strong> colorIndex: Int = 0</span></pre><p id="637e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，让我们定义简单地为视图设置渐变的<code class="fe no np nq nr b">setupGradient</code>函数。阅读代码注释，逐行理解该方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="0f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你在你的<code class="fe no np nq nr b">viewDidAppear</code>方法中调用<code class="fe no np nq nr b">setupGradient</code>。运行应用程序，您应该会看到一个静止梯度:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="b11e" class="nc md it nr b gy nw nx l ny nz"><strong class="nr iu">override</strong> <strong class="nr iu">func</strong> viewDidAppear(<strong class="nr iu">_</strong> animated: Bool) {<br/>    <strong class="nr iu">super</strong>.viewDidAppear(animated)<br/>    <br/>    setupGradient()<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/2f3c5eeb6fb8d42fed7b626d6197501f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmnFW-ucITiD4obcj7cOmQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">视图中会显示一个非动画渐变。</p></figure><p id="6424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个静止帧渐变从<code class="fe no np nq nr b">color1</code>到<code class="fe no np nq nr b">color2</code>(即<code class="fe no np nq nr b">gradientColorSet</code>中的第一个颜色对)。稍后，您将在创建动画时更新这些颜色。</p><p id="d0c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">酷毙了。你有一个好看的渐变，但是动画部分不见了。接下来让我们给它一些动作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1c04" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何制作渐变动画</h1><h2 id="bd9d" class="nc md it bd me nd ne dn mi nf ng dp mm li nh ni mo lm nj nk mq lq nl nm ms nn bi translated">组合渐变动画</h2><p id="5cec" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了制作流畅的渐变动画，您需要以这样的方式组合单独的渐变动画，即当一个动画停止时，下一个动画开始。</p><p id="a2f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了首先制作渐变动画，您需要赋予视图控制器处理渐变动画的能力。为此，确保视图控制器符合<code class="fe no np nq nr b">CAAnimationDelegate</code>协议:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="ad01" class="nc md it nr b gy nw nx l ny nz"><strong class="nr iu">class</strong> ViewController: UIViewController<strong class="nr iu">, CAAnimationDelegate</strong> { <br/>    ...<br/>}</span></pre><p id="9403" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后让我们创建一个名为<code class="fe no np nq nr b">animateGradient</code>的函数。这个函数负责创建一个渐变层的动画渐变。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="3aa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个视图控制器符合的<code class="fe no np nq nr b">CAAnimationDelegate</code>带有一个非常有用的内置方法<code class="fe no np nq nr b">animationDidStop</code>。每当一个动画结束时，都会触发此方法。该方法可用于<em class="nb">在前一个动画完成时创建新的动画</em>:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="3f81" class="nc md it nr b gy nw nx l ny nz"><strong class="nr iu">func</strong> animationDidStop(<strong class="nr iu">_</strong> anim: CAAnimation, finished flag: Bool) {<br/>    <strong class="nr iu">if</strong> flag {<br/>        animateGradient()<br/>    }<br/>}</span></pre><p id="f0f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您已经准备好了所有的代码，您可以在视图控制器的<code class="fe no np nq nr b">viewDidAppear</code>方法中调用它:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="d51e" class="nc md it nr b gy nw nx l ny nz"><strong class="nr iu">override</strong> <strong class="nr iu">func</strong> viewDidAppear(<strong class="nr iu">_</strong> animated: Bool) {<br/>    <strong class="nr iu">super</strong>.viewDidAppear(animated)</span><span id="73ef" class="nc md it nr b gy ob nx l ny nz">    setupGradient()<br/>    animateGradient()<br/>}</span></pre><p id="aa1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行应用程序，您应该会看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/9ffaaeea84d525c6cf6b7dfcbb5ab591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Il3mhqWhE42R46oEkLaD4w.gif"/></div></figure><p id="55e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就完成了渐变动画的配置。一旦你启动你的应用程序，你现在应该在你的视图中有一个平滑的动画渐变。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="00f1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">更改渐变的方向</h1><p id="7ab5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在梯度从底部到顶部。但是你可能想改变这一点。这很简单。只需改变 <code class="fe no np nq nr b"><em class="nb">setupGradient</em></code> <em class="nb">方法内渐变图层<em class="nb">的<code class="fe no np nq nr b">startPoint</code>和<code class="fe no np nq nr b">endPoint</code>属性即可。</em></em></p><p id="4e85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此之前，最好知道这些属性在默认情况下是这样配置的:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="3590" class="nc md it nr b gy nw nx l ny nz">gradient.startPoint = CGPoint(x: 0.5, y: 0.0)<br/>gradient.endPoint = CGPoint(x: 0.5, y: 1.0)</span></pre><p id="277b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您想要一个对角线渐变，您可以这样做:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="e2b2" class="nc md it nr b gy nw nx l ny nz">gradient.startPoint = CGPoint(x:0.0, y:0.0)<br/>gradient.endPoint = CGPoint(x:1.0, y:1.0)</span></pre><p id="560a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c551083048fb9344cc5c8178d283c001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*PtUJzJ69TieOQUBsDr_9tw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个漂亮的对角线对齐的渐变看起来很酷！</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="de1f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="1c4d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">恭喜你。现在你知道如何为你的应用程序设置一个简单的动画渐变。</p><p id="32aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望你觉得这很有用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aba7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><div class="od oe gp gr of og"><a href="https://developer.apple.com/documentation" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">Apple开发者文档</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">编辑描述</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">developer.apple.com</p></div></div></div></a></div></div></div>    
</body>
</html>