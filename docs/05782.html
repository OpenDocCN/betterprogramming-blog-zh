<html>
<head>
<title>Paged Scroll in SwiftUI — A Step Ahead</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的分页滚动—领先一步</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/paged-scroll-in-swiftui-a-step-ahead-c6a5f74f9924?source=collection_archive---------10-----------------------#2020-08-05">https://betterprogramming.pub/paged-scroll-in-swiftui-a-step-ahead-c6a5f74f9924?source=collection_archive---------10-----------------------#2020-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="af95" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">100%用SwiftUI代码编写的寻呼机:从垂直寻呼机和多页分页到传送带</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/541cd764d2d9ce91f73ddabf9e642069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJ170CH2zGlZQ6kAJKvyhg.jpeg"/></div></div></figure><h1 id="b179" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">介绍</h1><p id="c049" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">SwiftUI 2.0来了！继WWDC20之后，iOS 14中宣布了大量新的API和功能。在仅仅存在一年后，苹果已经押注于这个框架来支持其新的iOS版本的主要功能，如小部件和应用程序剪辑。这给了开发人员我们一直在寻找的机会:在我们的生产代码中开始实现SwiftUI视图的借口。</p><p id="7b42" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在iOS 14中，<code class="fe mn mo mp mq b">TabView</code>新增了一个新的修改器<code class="fe mn mo mp mq b">tabViewStyle</code>和一个<code class="fe mn mo mp mq b">PageTabViewStyle</code>。这是SwiftUI中最接近原生分页器的。分页是水平的、单页的，并且元素占据其容器框架的100%:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/c51264222fa85a09cf441a5589b55c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FWc_0RfH9bR6bM3i5oquEA.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/9bdb04117bc88863c273bb7645f69636" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/9 BDB 04117 BC 88863 c 273 bb 7645 f 69636</a></p></figure><p id="e056" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">这在某些情况下很好，但是对于更高级的行为呢？如果我们在第三页出现时执行某种操作呢？我们可以部分显示侧元素吗？有了<a class="ae mw" href="https://github.com/fermoya/SwiftUIPager" rel="noopener ugc nofollow" target="_blank"> SwiftUIPager </a>，所有这一切都成为可能。</p><p id="0f57" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在接下来的几节中，我将向您介绍<a class="ae mw" href="https://github.com/fermoya/SwiftUIPager" rel="noopener ugc nofollow" target="_blank"> SwiftUIPager </a>并利用它的一些潜力。我们将建立一个应用程序来帮助我选择一只猫。我已经创建了一个存储库来存储最终结果。此外，我将分享图片标题中的要点链接。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="d20a" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">基本页面:猫图片库</h1><p id="aeb6" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">让我们用SwiftUIPager创建一个简单的分页滚动。你只需要使用你最喜欢的软件包管理器，并按照安装说明。也支持手动安装。</p><div class="nj nk gp gr nl nm"><a href="https://github.com/fermoya/SwiftUIPager" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">fermoya/SwiftUIPager</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">SwiftUIPager提供了一个用SwiftUI本机组件构建的Pager组件。寻呼机是一个视图，它呈现一个可滚动的…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">github.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa ks nm"/></div></div></a></div><p id="6fb9" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> <em class="ob">注:</em> </strong> <em class="ob">虽然本教程是用Xcode 12b3编写的，但是SwiftUIPager支持iOS 13+。如果您的应用支持较低的iOS版本，请参见</em> <a class="ae mw" href="https://github.com/fermoya/SwiftUIPager/blob/master/Documentation/Legacy.md" rel="noopener ugc nofollow" target="_blank"> <em class="ob">旧版安装指南</em> </a> <em class="ob">。</em></p><p id="3116" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我正在使用<code class="fe mn mo mp mq b">Pager</code>包装一个<code class="fe mn mo mp mq b">AsynImage</code>集合，以显示来自<a class="ae mw" href="https://thecatapi.com/" rel="noopener ugc nofollow" target="_blank">cata pi</a>的猫图像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/faf1880ea4872f34c5f4620ee595e089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NQZaetISHo-R-l-5B_ScNw.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/68d5e4bb8889802fa16fd4a293f3f3e8" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/68 D5 E4 bb 8889802 fa 16 FD 4a 293 F3 F3 e 8</a></p></figure><p id="b130" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">就这样，我们成功地实现了与使用<code class="fe mn mo mp mq b">TabView</code>相同的行为。然而，SwiftUIPager提供了更多。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="2de4" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">定制<code class="fe mn mo mp mq b">Pager</code></h1><p id="8832" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">让我们稍微定制一下图库:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/4af00d44489e49077ff93a84f1bb3c7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6KSTVlKyysXqQUvvsgLiYQ.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/11d417209e5413b17fe505c67d426b08" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/11d 417209 e 5413 b 17 Fe 505 c 67d 426 b 08</a></p></figure><p id="4b5b" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">这里发生了什么事？：</p><ul class=""><li id="66af" class="oc od it lo b lp mi ls mj lv oe lz of md og mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">vertical</code>将<code class="fe mn mo mp mq b">Pager</code>改造成垂直寻呼机。</li><li id="61af" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">interactive</code>给没有聚焦的页面添加漂亮的缩放效果。</li><li id="f4f5" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">itemSpacing</code>在元素之间添加一些空间，<code class="fe mn mo mp mq b">itemAspectRatio</code>修改页面的大小。</li><li id="3d6d" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">padding</code>在不可滚动轴上插入内容。</li><li id="640f" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">alignment(.justified)</code>保持页面在可滚动区内居中。</li></ul></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="40f2" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">OnPageChanged</h1><p id="b1a3" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">你注意到这个图片库只有五页吗？这并不能帮助我下定决心，我不能仅仅通过看五张图片来选择合适的猫！这是因为CatAPI搜索端点是分页的，我的<code class="fe mn mo mp mq b">ViewModel</code>每页只请求五个元素。我们如何得到页面转换的通知？幸运的是，<code class="fe mn mo mp mq b">Pager</code>带有一个修饰符<code class="fe mn mo mp mq b">onPageChanged</code>，当一个新页面获得焦点时执行一个动作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/2f30440dde6ea4851be554887df1eb49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*X3BrFH4ErvpErRQpbW9WbA.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/abbca6a8b6fa08d58fd5fe049468d1c1" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/abb ca 6 A8 b 6 fa 08d 58 FD 5 Fe 049468 D1 C1</a></p></figure><p id="cc69" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我在这里使用<code class="fe mn mo mp mq b">onPageChanged</code>请求我的<code class="fe mn mo mp mq b">ViewModel</code>在最后一个项目被聚焦时获取更多的项目。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="73b1" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">CatsFilters:多重分页</h1><p id="914e" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">我的画廊展示了太多的猫，我似乎不能决定去哪一个。我需要能够以某种方式过滤它们。CatAPI提供了品种和类别查询参数来过滤结果，所以我将创建一个新的<code class="fe mn mo mp mq b">View</code>来过滤我的猫，首先是图片类别。正如您所料，SwiftUIPager在这里也会有很大的帮助。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/c08063b3ae62e83c7162a6fc99569c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*m3yFPydhpMicg3raY1SpKg.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/be3037208219ee997aea61ef961052f5" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/be 3037208219 ee 997 AEA 61 ef 961052 F5</a></p></figure><p id="280a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">太棒了。修改器类似于我们之前看到的，但是在这里我使用<code class="fe mn mo mp mq b">preferredItemSize</code>来设置页面的固定大小。我的新寻呼机显示很漂亮，但我发现了一些问题。让这么小的元素滚动很难，单分页看起来也不怎么样。此外，类别的数量非常有限，以缩略图的形式显示并不像人们预期的那样好。如果我们把<code class="fe mn mo mp mq b">Pager</code>变成一个旋转木马会怎么样？</p><p id="81c7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">这是我们要做的:</p><ul class=""><li id="2193" class="oc od it lo b lp mi ls mj lv oe lz of md og mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">multiplePagination</code>会让<code class="fe mn mo mp mq b">Pager</code>一次滚动多个元素。</li><li id="bb9f" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated"><code class="fe mn mo mp mq b">swipeInteractionArea(.allAvailable)</code>会让<code class="fe mn mo mp mq b">Pager</code>知道不仅仅是页面，整个可滚动区都是可点击的。</li><li id="e2f3" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated">将给我们带来我们正在寻找的旋转木马效果。在这里，我选择重复元素两次。这意味着<code class="fe mn mo mp mq b">Pager</code>将把第二批条目连接到初始化时传递的原始数组，从而允许进行分页。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/5acddb259d062f40d1a74f5f41d1e8e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nBT8Y8S954Z1zHU85LmTcA.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/2b41301da393d4e68e715b4320ce16e4" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/2b 41301 da 393 D4 e68 e 715 b 4320 ce 16 e 4</a></p></figure></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="aa10" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">过滤品种:旋转3D</h1><p id="f97b" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">最后，我想更具体地搜索正确的图像，所以我们将添加一个新的过滤器——品种。在这种情况下，我将介绍SwiftUIPager中的另一个内置动画:<code class="fe mn mo mp mq b">rotation3D</code>。使用类似的代码和这个修饰符，我们可以显示一个新的<code class="fe mn mo mp mq b">Pager</code>来包装可用的选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/917399bc0cc6a23aecee82069a51b026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WT_TY8eovh8MZ0Y3APskjg.gif"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated"><a class="ae mw" href="https://gist.github.com/fermoya/845ca38ad7cc276dd7c223a9d86469ff" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fermoya/845 ca 38 ad 7 cc 276 DD 7c 223 a9d 86469 ff</a></p></figure></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="8606" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">最终测试</h1><p id="b909" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">让我们在一个设备上运行这个程序，看看<code class="fe mn mo mp mq b">Pager</code>的运行情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/25f1067fcb80c52d45c9be9dd66182d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/1*iELC03tXo5ldtHI6CjTftA.gif"/></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">对设备的最终测试</p></figure></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="4cee" class="ku kv it bd kw kx ne kz la lb nf ld le jz ng ka lg kc nh kd li kf ni kg lk ll bi translated">结论</h1><p id="1e95" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><a class="ae mw" href="https://github.com/fermoya/SwiftUIPager" rel="noopener ugc nofollow" target="_blank"> SwiftUIPager </a>为SwiftUI提供了一个可靠的分页器，它附带了一些修饰符，使它更加吸引人。我们已经在本教程中介绍了其中的一些:</p><ul class=""><li id="78b0" class="oc od it lo b lp mi ls mj lv oe lz of md og mh oh oi oj ok bi translated">垂直寻呼机</li><li id="dc41" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated">按需请求更多项目</li><li id="031b" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated">互动元素</li><li id="7be1" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated">多重分页</li><li id="327a" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated">旋转木马</li><li id="051a" class="oc od it lo b lp ol ls om lv on lz oo md op mh oh oi oj ok bi translated">旋转3D效果</li></ul><p id="d4ae" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">但是还有很多。剩下的就看你的了。</p></div></div>    
</body>
</html>