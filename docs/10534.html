<html>
<head>
<title>How to Use Python getattr() Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python getattr()方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-python-getattr-method-6dd931d78c71?source=collection_archive---------6-----------------------#2022-01-13">https://betterprogramming.pub/how-to-use-python-getattr-method-6dd931d78c71?source=collection_archive---------6-----------------------#2022-01-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="93e5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">无论发生什么，都获取一个实例拥有的任何内容</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c242e015eab362a8f451b56edb0e4bd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QZajO7AXC8DRxLXb"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@cocoroto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃里克·维加</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f77e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">getattr()</code>是Python中最酷的内置函数之一。它需要三个参数:</p><ul class=""><li id="bc04" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">一个物体</li><li id="edc7" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">对象属性的名称，但采用字符串格式</li><li id="29ed" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">默认值<em class="mn">(这是可选的)</em></li></ul><p id="688f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回:</p><ul class=""><li id="2a56" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">属性的值</li></ul><p id="d672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们定义一个<code class="fe lv lw lx ly b">Book</code>类作为例子</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="664e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并创建一个实例:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="6671" class="mu mv it ly b gy mw mx l my mz">book = Book("Moby Dick", "Herman Melville", 1851)</span></pre><p id="3257" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以访问<code class="fe lv lw lx ly b">book</code>实例的属性。没有什么比使用点符号更自然的了。</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="d404" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; book.title<br/>'Moby Dick'</span></pre><p id="96b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">getattr()</code>功能做同样的事情:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="0863" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; <strong class="ly iu">getattr</strong>(book, 'title')<br/>'Moby Dick'</span></pre><p id="4fc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以<code class="fe lv lw lx ly b">book.title</code>和<code class="fe lv lw lx ly b">getattr(book, 'title')</code>完全是<strong class="lb iu">和</strong>一样的东西！它们是相同的，除了:</p><ul class=""><li id="8308" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">title</code>属性作为字符串(<code class="fe lv lw lx ly b">'title'</code>)传递给<code class="fe lv lw lx ly b">getattr()</code>函数。</li><li id="82a8" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">您可以将默认值作为参数传递。</li></ul><p id="8d28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="7d70" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; book.language</span></pre><p id="949d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">会引发一个错误，因为<code class="fe lv lw lx ly b">Book</code>类没有这样的属性。</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="c150" class="mu mv it ly b gy mw mx l my mz">Traceback (most recent call last):<br/>  File "&lt;input&gt;", line 1, in &lt;module&gt;<br/>AttributeError: 'Book' object has no attribute 'language'</span></pre><p id="307b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，我们可以做:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="19e7" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; <strong class="ly iu">getattr</strong>(book, 'language', 'English')<br/>'English'</span></pre><p id="baba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，如果没有默认值，也会引发错误。</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="75a8" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; <strong class="ly iu">getattr</strong>(book, 'language')</span></pre><p id="0cbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="0b2b" class="mu mv it ly b gy mw mx l my mz">Traceback (most recent call last):<br/>  File "&lt;input&gt;", line 1, in &lt;module&gt;<br/>AttributeError: 'Book' object has no attribute 'language'</span></pre><p id="ebd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为<code class="fe lv lw lx ly b">getattr()</code>和点符号是等价的如果你不传递默认值的话。</p><p id="c251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢冒险(像我一样)，你可能想知道是否也可以访问一个类的方法。让我们看看:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="ead8" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; <strong class="ly iu">getattr</strong>(book, 'describe')</span></pre><p id="84d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="8ddb" class="mu mv it ly b gy mw mx l my mz">&lt;bound method Book.describe of &lt;__main__.Book object at 0x103cd7a0&gt;&gt;</span></pre><p id="4302" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回<code class="fe lv lw lx ly b">describe()</code>方法而不调用它。记住函数也是对象，你可以把它们赋给变量。所以我们可以通过在末尾添加括号来直接调用它</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="b9f3" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; getattr(book, 'describe')<strong class="ly iu">()</strong><br/>Moby Dick (1851) was published by Herman Melville.</span></pre><p id="779e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者我们可以存储这个值，以后再调用它。</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="476e" class="mu mv it ly b gy mw mx l my mz">&gt;&gt;&gt; desc = getattr(book, 'describe')<br/>&gt;&gt;&gt; desc<strong class="ly iu">()</strong><br/>Moby Dick (1851) was published by Herman Melville.</span></pre><p id="8996" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止一切顺利！你可能会问:因为我们已经知道一个类的内容，所以访问一个属性不是很奇怪吗？</p><p id="a019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，如果您需要在程序已经运行时决定使用哪个属性，那么<code class="fe lv lw lx ly b">getattr()</code>就派上了用场。例如，在web应用程序中，您可能需要根据即将到来的请求动态地获取属性。或者从用户那里获得属性的名称。</p><p id="a818" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您编写了一个程序，该程序接收用户的输入并打印出所需属性<code class="fe lv lw lx ly b">book</code>的值。</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="d4aa" class="mu mv it ly b gy mw mx l my mz">attr = input()<br/>print(getattr(book, attr))</span></pre><p id="34a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设用户写下<code class="fe lv lw lx ly b">pub_year</code>作为输入。那么输出是:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="9420" class="mu mv it ly b gy mw mx l my mz">1851</span></pre><p id="91ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码相当于:</p><pre class="kj kk kl km gt mq ly mr ms aw mt bi"><span id="768e" class="mu mv it ly b gy mw mx l my mz">attr = input()</span><span id="2db9" class="mu mv it ly b gy na mx l my mz">if attr == 'title':<br/>    print(book.title)<br/>elif attr == 'author':<br/>    print(book.author)<br/>elif attr == 'pub_year':<br/>    print(book.pub_year)</span></pre><p id="320d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它确实缩短了我们的代码，对吗？</p><p id="ee3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看另一个例子。现在，您可以从API动态获得允许的HTTP方法，并根据允许的方法(POST或PUT)通过<a class="ae ky" href="https://docs.python-requests.org/en/latest/" rel="noopener ugc nofollow" target="_blank">请求库</a>发送适当的HTTP请求。当然，你需要使用<code class="fe lv lw lx ly b">getattr()</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="972d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这相当于:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="61a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，<code class="fe lv lw lx ly b">getattr()</code> <strong class="lb iu"> </strong>让我们的生活更轻松，减少代码重复。</p><p id="9f43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您处于类似的情况，并且您的对象有许多属性，使用该函数可以使您不必编写许多if-elif子句。</p><p id="5d70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你真的因为没有使用<code class="fe lv lw lx ly b">getattr()</code> <strong class="lb iu"> </strong>而打算写很长的代码行，并且你认为通过一次又一次的复制粘贴就成功了。嗯……我有坏消息要告诉你。大多数编程错误都是由复制粘贴操作引起的。所以这个函数也保护你免受复制粘贴的潜在错误。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><p id="078a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，如果你知道属性的名字，总是使用点符号。然而，当属性的名称作为程序流给出时，您应该使用<code class="fe lv lw lx ly b">getattr()</code>。</p><p id="1e3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您阅读我的文章。如果你喜欢你所读到的，看看下面这个故事:</p><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-using-or-to-check-multiple-conditions-in-python-404d31f2b569"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">在Python中停止使用“或”来检查多个条件</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">还有更精密的解决方案！</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">better编程. pub</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz ks nl"/></div></div></a></div></div></div>    
</body>
</html>