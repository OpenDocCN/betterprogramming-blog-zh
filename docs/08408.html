<html>
<head>
<title>How To Migrate an Open Source Android Library to Maven Central</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将开源Android库迁移到Maven Central</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-migrate-an-open-source-android-library-to-maven-central-432c37159bcd?source=collection_archive---------7-----------------------#2021-04-27">https://betterprogramming.pub/how-to-migrate-an-open-source-android-library-to-maven-central-432c37159bcd?source=collection_archive---------7-----------------------#2021-04-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6194" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将Android库发布到Maven Central</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/73672f7bff723a973770b217ddf116c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dEKyR8v18CY5liEc"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@modestasu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Modestas Urbonas </a>拍摄的照片</p></figure><p id="5319" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着最近关于JCenter/Bintray工件库即将被<a class="ae ky" href="https://developer.android.com/studio/build/jcenter-migration" rel="noopener ugc nofollow" target="_blank">弃用</a>的消息，探索其他库托管选项是很重要的。其中之一就是考虑将你的Android库发布到Maven Central。</p><p id="6df6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文将详细介绍在那里成功发布Android库所需的所有必要步骤。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1aab" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第一步。使用Sonatype创建票证</h1><p id="205b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，您需要用Sonatype创建一个标签，因为它为开源项目提供了一个存储库托管服务。为了做到这一点，你需要确保你在<a class="ae ky" href="https://issues.sonatype.org/secure/Signup!default.jspa" rel="noopener ugc nofollow" target="_blank"> Sonatype的吉拉</a>上注册了账户。如果您已经有一个帐户，那么您可以使用您的凭证登录并继续<a class="ae ky" href="https://issues.sonatype.org/secure/CreateIssue.jspa?issuetype=21&amp;pid=10134" rel="noopener ugc nofollow" target="_blank">创建一个新的项目票证</a>。在整个过程中，您将与Sonatype的人员合作，直到您的问题得到解决。</p><p id="bf41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>您也可以遵循<a class="ae ky" href="https://central.sonatype.org/publish/publish-guide/" rel="noopener ugc nofollow" target="_blank">中央存储库的官方指南</a>来注册或创建新的项目标签。</p><p id="6341" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">登录并继续创建新的项目票证后，您将进入以下屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/44bb3e2f64a35de0d9bb72839ea002d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oU1ZekZBuCGIgE6AQF9YjA.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d7cc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第二步。验证您的库</h1><p id="dccf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">点击“创建”后，您的信息将被审核，您将收到一条关于您的票证的自动评论，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/163966303deb67bb21e8a2fe05f38ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSjiXjA7Jr3YS4mew-Oqew.png"/></div></div></figure><p id="5ce3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，系统会根据您在票证描述中提到的组ID以及您的库询问您域名，例如，在我的例子中是pixel.io。</p><p id="6e9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面我的库的例子中，我不拥有pixel.io域，所以我不能使用它，但是如果你拥有一个域，你可以关注这个<a class="ae ky" href="https://proandroiddev.com/publishing-your-first-android-library-to-mavencentral-be2c51330b88" rel="noopener ugc nofollow" target="_blank">帖子</a>，它使用DNS引用。</p><p id="fbb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，我们将继续第二个选项，即使用我们自己的GitHub帐户。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3e1d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第三步。验证您的GitHub帐户</h1><p id="8326" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了验证您的GitHub帐户，即包含您的库的存储库的帐户，您需要使用您的票证ID在该帐户中创建新的临时公共存储库，然后在票证上留下评论。</p><p id="97c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，我的账户是https://github.com/mmobin789的<a class="ae ky" href="https://github.com/mmobin789" rel="noopener ugc nofollow" target="_blank"/>，我根据我的门票ID创建的存储库是https://github.com/mmobin789/OSSRH-65130的<a class="ae ky" href="https://github.com/mmobin789/OSSRH-65130" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="f2d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">存储库的名称将是票证ID。创建此存储库后，您需要再次在您已创建存储库的标签上添加注释。几乎立刻，你的GitHub帐户的所有权将被验证，另一个自动评论将被添加，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/36f2001915847e384dec1cbcf6ddea77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyaDfHbpgnRPED8PImpcfQ.png"/></div></div></figure><p id="19ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您现在使用您的JIRA用户名和密码登录到<a class="ae ky" href="https://s01.oss.sonatype.org/" rel="noopener ugc nofollow" target="_blank">https://s01.oss.sonatype.org</a>，您将会看到在您的库下还没有发布任何东西。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/31ce9134cabb6d32f5067bb1abb9c688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YG6Nax9J6WPTjcK5Rk75zA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是Nexus UI控制台，显示我的出版物忽略它</p></figure><p id="d522" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，使用你自己的GitHub账户将会带来一个代价。</p><p id="9ef3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是，根据Sonatype对我的<a class="ae ky" href="https://issues.sonatype.org/browse/OSSRH-65130" rel="noopener ugc nofollow" target="_blank">票</a>的另一个评论:</p><blockquote class="nc nd ne"><p id="8acb" class="kz la nf lb b lc ld ju le lf lg jx lh ng lj lk ll nh ln lo lp ni lr ls lt lu im bi translated">"如果您不拥有您的groupId所反映的域，您必须选择一个新的groupId。您可以使用一个反映您的项目托管的groupId，例如io.github.mmobin789，那么这个顶级groupId下的任何工件都可以像io . github . mmobin 789 . *<em class="it">"</em>一样使用</p></blockquote><p id="747d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，对于我的库，组ID可以是，现在是io.github.mmobin789.pixel。</p><p id="af46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着当我的库包含在任何Android项目中时，依赖关系也会改变。</p><p id="c4e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，下面是我的Android库在迁移后对包含语法的当前依赖。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="2ab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JCenter上同一库以前的组ID如下:</p><p id="361b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实现io . pixel . Android:pixel:0 . 0 . 3-alpha</p><p id="ea5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面可以明显看出，库的依赖关系现在已经改变，以匹配新的组ID。</p><p id="dd01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组ID确定后，您需要在票证详细信息的组ID字段中更新它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4a5e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">步骤4:配置Maven Central发布脚本</h1><p id="613c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了发布我们的库，我们将使用<a class="nl nm ep" href="https://medium.com/u/c9d576fec3d5?source=post_page-----432c37159bcd--------------------------------" rel="noopener" target="_blank"> Niklas Baudy </a>的gradle插件，因为它易于使用，并且可以更好地分离关注点。</p><p id="1e0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，</p><p id="8afc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.打开您的(项目级)<code class="fe nn no np nq b">build.gradle</code>文件。<br/> 2。在dependencies块中添加以下新行。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.打开您的库的<code class="fe nn no np nq b">build.gradle</code>文件，然后将这个新插件和发布任务添加到其中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="62c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.在您的库目录中，创建一个名为<code class="fe nn no np nq b">gradle.properties</code>的新文件，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="2b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述文件中的大多数术语都是不言自明的，但下面是需要注意的一些术语:</p><p id="64b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">GROUP</code>:你的群id <br/> <code class="fe nn no np nq b">POM_ARTIFACT_ID</code>:你的库id(大概是库的名字)<br/><code class="fe nn no np nq b">POM_URL</code>:GitHub上你的库的链接<br/> <code class="fe nn no np nq b">POM_SCM_URL</code>:同<code class="fe nn no np nq b">POM_URL</code><br/><code class="fe nn no np nq b">POM_SCM_CONNECTION</code>:SCM:git @ GitHub . com { GitHub _ username }/{ library _ name }。饭桶</p><p id="b468" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">POM_SCM_DEV_CONNECTION</code>:同<code class="fe nn no np nq b">POM_SCM_CONNECTION</code></p><p id="68a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将{github_username}替换为您的github用户名，将{library_name}替换为您的库名，如上图所示。</p><p id="7147" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>在上传过程中，您的媒体库信息将从此文件中提取。(考虑在不签署参数的情况下将该文件添加到Git。)</p><h2 id="53d7" class="nr md it bd me ns nt dn mi nu nv dp mm li nw nx mo lm ny nz mq lq oa ob ms oc bi translated"><strong class="ak">签约参数</strong></h2><p id="cb2d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这些参数用于认证和发布到Maven Central，它们将保持安全和私密。</p><p id="e368" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">signing.keyId</code>:由您的<code class="fe nn no np nq b">.rev</code>或<code class="fe nn no np nq b">.gpg</code>键的最后八位数字组成。您也可以在GPG钥匙串应用程序中查看此钥匙。</p><p id="1c88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">signing.password</code>:创建此密钥时创建的密码短语。</p><p id="b7dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">signing.secretKeyRingFile</code>:你的密匙文件的路径，例如<code class="fe nn no np nq b">/Users/user/keys/secring.gpg</code>，或者仅仅是<code class="fe nn no np nq b">secring.gpg</code>，密匙文件的名字，如果它被放在你的库的模块的根的话。</p><p id="6ed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">ossrhUsername</code>:与您的吉拉用户名相同，也是Nexus UI的用户名。您可以直接提供用户名，但是为了安全起见，如果您转到Nexus UI中的profile并使用它，您可以为它获取一个令牌。</p><p id="da8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nn no np nq b">ossrhPassword</code>:与您的吉拉密码相同，也是Nexus UI的密码。您可以直接提供密码，但为了安全起见，如果您转到Nexus UI中的配置文件并使用它，您可以为它获取一个令牌。</p><p id="5cbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入配置文件后，单击摘要的下拉列表并选择用户令牌。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/ab1616134e3b534775514dc83597c89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KuHUbOoPlm32R_NfJWK8Pw.png"/></div></div></figure><p id="24dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将让Android Studio访问我们的Sonatype OSS (Maven Central ),并与GPG签署我们的发布工件，这是发布到Maven Central时的一个要求。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c494" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第五步。通过Android Studio使用GPG的标志库</h1><p id="d7fc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">GPG密钥是一种加密的密钥格式，它将用于在Maven Central上签署我们的发布工件，以创建GPG密钥。</p><p id="2055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按顺序执行以下步骤。</p><ol class=""><li id="a5ad" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated">为您的操作系统下载最新的<a class="ae ky" href="https://www.gnupg.org/download/" rel="noopener ugc nofollow" target="_blank"> GPG命令行工具</a>以及GPG钥匙链应用程序，并为Windows安装它们:(<a class="ae ky" href="https://gpg4win.org/download.html" rel="noopener ugc nofollow" target="_blank"> CMD工具，钥匙链应用程序</a>)或Mac ( <a class="ae ky" href="https://gpgtools.org/" rel="noopener ugc nofollow" target="_blank"> CMD工具，钥匙链应用程序</a>)。</li><li id="85b7" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">打开Android Studio的终端。</li><li id="ce7e" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">键入“gpg”<em class="nf">—</em>全生成密钥。或者，您也可以创建和导出一个密钥(导出时勾选“包含密钥”和“保存方式”。gpg扩展”)从GPG钥匙串应用程序。单击“新建”并提供以下所需的相同信息。确认后，它还会选择性地询问您是否要将密钥上传到密钥服务器。)</li><li id="dee7" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">当询问您想要哪种密钥时，按Enter键选择默认的“RSA和RSA”</li><li id="b7b7" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">当询问密钥大小时，键入“4096”</li><li id="233b" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">当询问密钥的有效期时，按Enter键选择默认值，表示密钥不会过期。</li><li id="5546" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">当询问创建新用户ID的信息时，请提供您的姓名和电子邮件地址。</li><li id="f109" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">输入“O”表示没问题。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/416216838ba720e6b8fc49d8c2e4f66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mW6FZz2nFiAV0Xw4alOz6g.png"/></div></div></figure><p id="f979" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">9.出现提示时，创建一个密码来保护您的密钥。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/cf5654078b74443a70855418206f9e67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKnkqvxSxylmKluUa8SAXA.png"/></div></div></figure><p id="3a03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在Mac中以<code class="fe nn no np nq b">.rev</code>格式创建您的<code class="fe nn no np nq b">~/.gnupg/openpgp-revocs.d/</code>密钥。</p><p id="521b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">10.将密钥转换为。使用终端键入<br/><em class="nf">“</em>gpg—export-secret-keys-o secring . gpg<em class="nf">的gpg格式</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/8a6aa6e431026e5f871806ffc2442185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KOW2cM06JekPemIYIiUHYw.png"/></div></div></figure><p id="11ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:“secring”只是导出密钥的新名称。您可以在这里使用任何名称。</p><p id="387d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您执行此命令时。gpg密钥将被导出到你的项目的根目录。</p><p id="81ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">11.打开“GPG钥匙串”应用程序，将导出的密钥导入其中，并将其发送到公钥服务器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/0370cfcbd7b25ebd87ecf455a591fa79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-y5k8lh2_u5zhnGTqrWKIA.png"/></div></div></figure><p id="b28e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上一步中的上述操作的原因是，当我试图从Nexus UI中释放我的库而不上传我的时，我遇到了以下异常。密钥服务器的gpg密钥。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/29981c9600d9697dad8aca5e048e1c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*otui3Xpk7KVmyhUyNxFL5Q.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aa14" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第六步。从Android Studio上传库</h1><p id="3981" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您需要确保您已经在<code class="fe nn no np nq b">gradle.properties</code>文件中配置了签名参数，并在您的库的<code class="fe nn no np nq b">build.gradle</code>文件中添加了Maven发布认证任务，作为第4步中提到的一个单独的块。</p><p id="b81c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦这样做了，</p><ol class=""><li id="9e02" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated">从Android Studio打开终端。</li><li id="8934" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">类型”。/grad Lew upload archives-无后台程序-无并行。<em class="nf"/></li><li id="7b51" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">按回车键。</li></ol><p id="7e4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如果一切都配置正确，</strong>现在应该需要一段时间将你的库上传到https://s01.oss.sonatype.org/<a class="ae ky" href="https://s01.oss.sonatype.org/" rel="noopener ugc nofollow" target="_blank"/><a class="ae ky" href="https://s01.oss.sonatype.org/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8287" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的终端将显示状态构建成功。</p><p id="a0c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在剩下唯一要做的就是通过Sonatype OSS (Nexus UI)将库发布到Maven Central并发布。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="36e1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第七步。从Maven Central发布库</h1><p id="7b92" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了最终发布您的库，请登录Nexus UI并执行以下操作:</p><ol class=""><li id="bace" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated">在临时存储库下选择库存储库。</li><li id="7c1b" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">点击顶部菜单中的关闭<em class="nf"> </em>(此时不会被禁用)并确认对话框。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/9403d8da195b3f35d4ff672c9e85eaa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBSe-FfIMQE2bltbnDm0xw.png"/></div></div></figure><p id="2445" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这需要一段时间，您可以通过单击该控制面板底部“摘要”旁边的“活动”<strong class="lb iu"> y </strong>来查看活动。请注意，活动不会自己刷新，因此您需要刷新页面才能看到实际的活动。当您在摘要中看到活动状态为“上次操作成功完成”时，您会注意到顶部菜单中的“发布”操作已启用。</p><p id="e644" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.单击“释放”并确认对话框。</p><p id="b234" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.发布成功后，回到你的Sonatype标签，并根据他们的要求留下评论来激活与Maven Central的同步。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/4c67938241acd4631a4bda65e7f2c144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bqwMcnmc24u3Qe9wPENjHA.png"/></div></div></figure><p id="d6a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将最终使您的库在10到15分钟内可用。您可以尝试在任何项目中使用该库，方法是将其作为依赖项添加到您的应用程序的<code class="fe nn no np nq b">build.gradle</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3720" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Maven中央搜索需要大约两个小时来处理你的库并在搜索中显示出来，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/3df5391b24d5dd76c035065378adb850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-F1TY4C6rMlTAOBEHxE_9g.png"/></div></div></figure><p id="fa01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，如果您的票证尚未标记为已解决，请在您的票证上留下评论，通知团队将其标记为已解决。</p><p id="d39c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已。<strong class="lb iu">恭喜你！</strong></p><p id="52cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">过程本身的性质等同于一项成就，所以你至少可以庆祝一下。</p><p id="a73e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">示例库的源代码</strong></p><div class="ox oy gp gr oz pa"><a href="https://github.com/mmobin789/pixel" rel="noopener  ugc nofollow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd iu gy z fp pf fr fs pg fu fw is bi translated">mmobin 789/像素</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">一个轻量级的Android图像加载库，由Kotlin协同程序支持。最佳:Pixel使用…执行优化</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">github.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ks pa"/></div></div></a></div><p id="26e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢了。</p></div></div>    
</body>
</html>