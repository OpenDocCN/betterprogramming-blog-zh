<html>
<head>
<title>Create Your First Solidity Library and Publish It on NPM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建您的第一个Solidity库，并在NPM上发布</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-your-first-solidity-library-and-publish-it-on-npm-df5578cde8cb?source=collection_archive---------9-----------------------#2022-11-28">https://betterprogramming.pub/create-your-first-solidity-library-and-publish-it-on-npm-df5578cde8cb?source=collection_archive---------9-----------------------#2022-11-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="caee" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">与世界分享你的固体图书馆</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/689c6a431ff2397bc6ed057faaf2ba3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NkfOptzYzbC1Ofcx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@theshubhamdhage?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Shubham Dhage </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2948" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你写了Solidity代码，你很可能使用了一个现有的契约/库，很可能是来自<code class="fe lv lw lx ly b">openzeppelin</code>的东西。类似于:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="8418" class="md me it ly b be mf mg l mh mi">import "@openzeppelin/contracts/utils/Strings.sol";</span></pre><p id="3cff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天我们将介绍如何创建自己的Solidity库并将其发布到NPM上。</p><h1 id="6fe9" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">步骤1:初始化存储库</h1><p id="b0ea" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">在编写任何Solidity代码之前，让我们先创建我们的目录。我假设您使用的是Mac/Linux，那么我们可以通过以下方式创建我们的目录:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="cbe1" class="md me it ly b be mf mg l mh mi">mkdir YOUR_DIR_NAME</span></pre><p id="34a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您已经安装了<code class="fe lv lw lx ly b">npm</code>,我们现在可以通过以下方式在其中初始化一个npm目录:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="074b" class="md me it ly b be mf mg l mh mi">cd YOUR_DIR_NAME<br/>npm init -y</span></pre><h1 id="d71a" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">步骤2:编写可靠性代码</h1><p id="0a7d" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">一旦你有了回购，我们现在可以创建我们的第一个Solidity库。Solidity中的库需要<code class="fe lv lw lx ly b">library</code>关键字而不是<code class="fe lv lw lx ly b">contract</code> define。</p><p id="d479" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本教程，我们将创建一个只有一个函数的库。这个函数将两个字符串连接在一起。这是我想出的代码:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="d77e" class="md me it ly b be mf mg l mh mi">// SPDX-License-Identifier: MIT<br/>pragma solidity ^0.8.0;<br/><br/>library Concatenator {<br/>    function concatenate(string calldata _str, string calldata _str1)<br/>      public pure returns(string memory)<br/>    {<br/>        return string(abi.encodePacked(_str, _str1));<br/>    }<br/>}</span></pre><h1 id="8e9d" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">步骤3:发布和使用库</h1><p id="aae1" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">完成后，现在只需运行以下命令就可以发布这个库了:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="0653" class="md me it ly b be mf mg l mh mi">npm publish</span></pre><p id="3df8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有在终端中登录到<code class="fe lv lw lx ly b">npm</code>帐户，您可能需要通过以下方式登录:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="baf1" class="md me it ly b be mf mg l mh mi">npm adduser</span></pre><p id="24b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">搞定了。现在，您的图书馆可供全球数百万NPM用户使用！</p><h1 id="06ec" class="mj me it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">测试您的库</h1><p id="76fb" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">如果您想测试您的库，您可以通过编写一个基本契约来完成，例如:</p><pre class="kj kk kl km gt lz ly ma bn mb mc bi"><span id="83c8" class="md me it ly b be mf mg l mh mi">// SPDX-License-Identifier: MIT<br/>pragma solidity ^0.8.0;<br/><br/>import "YOUR_DIR_NAME/Concatenator.sol";<br/><br/>contract Tester {<br/>    using Concatenator for string;<br/>    function concatenate(string calldata _str, string calldata _str1) public pure returns(string memory) {<br/>        return _str.concatenate(_str1);<br/>    }<br/>}</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="03cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这个，你可能会喜欢Twitter上的更高频率的内容。我很期待看到你们想出了哪些很酷的库！</p><p id="5435" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>