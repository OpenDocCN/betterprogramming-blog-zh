# 函数式编程？别费心了，这是个愚蠢的玩具

> 原文：<https://betterprogramming.pub/fp-toy-7f52ea0a947e>

## 这会让你的生产力直线下降

也许你听说过所谓的“函数式”编程。也许你甚至想知道你是否应该尝试下一步。

简单的回答是绝对不行！

函数式编程漏洞百出，不适合现实项目，会让你的生产力一落千丈。为什么？请继续阅读，寻找答案！

# 函数式编程无法满足复杂的企业需求

![](img/38d175da273774b2b5bea4df82ab3e1e.png)

照片由[肖恩·波洛克](https://unsplash.com/@seanpollock?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/search/photos/enterprise?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄

现实世界中的企业软件需要一套复杂的、严格的、强制性的需求，这些需求与软件解决方案中嵌入的抽象的数量有关。换句话说，面向对象编程使程序员能够利用多种抽象机制来完全满足企业所要求的复杂需求。

这是一个口，但容忍我！一会儿事情就会变得非常清楚。

所谓的“函数式”编程没有适当的抽象机制，因为它是基于数学的(数学显然是低劣的，除了学术之外在现实世界中没有应用)。与 OOP 不同，函数式编程没有试图满足企业所要求的众多严格而复杂的需求。

下面的代码片段演示了函数式编程中普遍存在的问题:

如果这让你生气，你并不孤单！

函数式编程没有试图正确地抽象和封装功能，而这正是任何严肃的企业通常所要求的。

没有一个自尊的软件工程师会写出这样的东西！如果他们这样做了，那么任何大型企业都应该立即解雇他们，以防止进一步的损害。在下一节中，我们将看一看一个适当抽象的 OOP 程序。

# 功能软件解决方案不是面向未来的

![](img/1a900c3ce0f302ddf67dd7124a4ccbe2.png)

照片由 [Pexels](https://www.pexels.com/photo/male-statue-decor-931317/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的[卡拉塔拉](https://www.pexels.com/@karatara-278139?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)拍摄

众所周知，任何专业和自尊的软件工程师的首要职责是编写满足复杂业务需求的经得起未来考验的代码。

与上面灾难性的函数代码片段相比，让我们快速看一下一个适当抽象的 OOP 程序。它做同样的事情，但是以一种抽象的、面向未来的方式:

正如您所看到的，所有的核心功能都被恰当地抽象出来了。这个码*实*。

不要让简单欺骗了你！它完全满足了所有复杂的业务需求，这些需求通常是任何大型企业都需要的。

这个健壮的解决方案是完全面向未来的，并且恰当地利用了企业级依赖注入。

# 严肃的管理需要严肃的特征

![](img/505720fb3eb7c062bb76b939f2dafbae.png)

来自 [Pexels](https://www.pexels.com/photo/person-using-macbook-pro-while-holding-mug-1493370/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的【rawpixel.com】T2 的照片

希望到现在为止，开发团队已经满足了与企业提出的代码抽象相关的复杂业务需求。开发人员现在应该将注意力转移到实现项目经理定义的特性上。

任何现实世界的企业产品经理都知道，只有交付的新特性才具有真正的商业价值。他们不应该被允许在像单元测试和重构这样浪费时间的事情上浪费资源。

很明显，所谓的“函数式”编程是有缺陷的，它使得像重构和单元测试这样多余的事情变得不必要的容易。这反过来会分散开发团队的注意力——他们可能会不小心把时间浪费在那些无用的活动上，而不是交付新的特性。

这个例子清楚地展示了函数式编程的劣势——它让重构变得太容易了:

如果这样的重构让你对它的简单感到畏缩，那么你并不孤单！重构前有六行代码，重构后只有七行代码？你一定是在开玩笑！

让我们将其与面向对象代码的适当重构进行对比:

这才是真正的编程！前面九行代码，后面 22 行。重构需要更多的努力，这将使企业开发人员在从事像重构这样浪费资源的活动之前三思。

# 声明性代码的谬误

![](img/431d7c08183e2cc0ceb8e2378dd0bfac.png)

塞巴斯蒂安·赫尔曼在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

所谓的“函数式”程序员错误地以编写声明性代码为荣。这没什么值得骄傲的——这样的代码只是制造了一种生产力的假象。

任何开发人员的核心职责应该包括考虑适当的严格的面向对象抽象(这也是任何大型企业所要求的)。

让我们来看看正确抽象的 OOP 代码:

请注意第 20 行的命令循环。忽略次要的样板 OOP 代码，与手头的任务无关。为了使代码样本符合严肃企业提出的严格的抽象要求，必须包含它。

另一方面，声明性代码过于简洁，错误地让开发人员关注不太重要的东西，比如业务逻辑。将上述健壮的企业解决方案与劣质的“声明性”代码片段进行对比:

```
SELECT * FROM Users WHERE Country=’USA’;
```

SQL 每次都让我畏缩，因为它是声明性的。为什么是 SQL？为什么他们不能让开发人员利用适当的企业级抽象并编写普通的面向对象代码呢？尤其是当我们已经拥有这些工具的时候。太令人兴奋了。

# 真实世界建模

![](img/d45d45179183166bad57e2a6ad88ea86.png)

朱莉安娜·科佐斯基在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

面向对象编程是天才。与“函数式”编程不同，它用继承、多态和封装等高级技术完美地模拟了现实世界。

任何有自尊的软件开发人员都应该每天利用继承来实现代码的可重用性。正如我前面所说的，继承完美地模拟了现实世界。例如，猫总是从单一的抽象现实世界动物那里继承它们的属性和行为。几十亿年前，生命起源于海洋。因此所有的哺乳动物(包括猫)都继承了原始鱼的属性，比如`garfield.fishHead`，以及它们的方法，比如`garfield.swim` 和`garfield.layCaviar`。难怪猫这么喜欢洗澡和游泳！人类其实也是一样的，如果我们愿意，我们可以很容易地开始铺设鱼子酱！

我们的程序应该总是遵循类似的代码组织层次方法。函数式编程错误地让开发人员摆脱了这种受现实世界启发的惊人的代码共享结构。这具有深远的影响，尤其是在非常复杂的企业软件中。

# 函数应该总是绑定到对象

![](img/64f5bd29ee8addc8432e07ef46c5f51a.png)

由[paweczerwiński](https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

这只是常识，也是真实世界的完美模型。你在 Chapters 买的笔记本有一个内置的“书写方法”。每当你打算写东西的时候，都要调用这个方法。你可能没有意识到这一点，但是你也有类似`.eat(veggies)`、`doHomeWork`的方法。这只是常识，不然你妈妈怎么能让你吃蔬菜，让你完成作业？当然，她以前是直接调用那些方法的！

如果不雇佣一个专门的`Manager`来协调任务，现实世界中的任何工作都无法完成。年轻人可能需要一个经理来满足他们的基本需求，你知道，像“网飞-n-chill”这样的事情。毕竟，谁来协调整个过程呢？如果他们聪明的话，他们会雇佣多个经理，就像 OOP 建议的那样。

在现实世界中，创造新的和酷的东西也需要有一个专门的`Factory`。莱昂纳多拥有一辆`MonaLisaFactory`，川普建造了一个秘密`WallFactory`。俄国曾经有一个`CommunismFactory`，现在主要保留着它的`CorruptionFactory`，藏在克里姆林宫地下城的某个深处。

人们可以清楚地看到，这只是“功能”棺材上的另一颗钉子，因为它没有试图模拟真实世界。允许函数独立于对象存在，这显然是错误的。显然，函数式编程不适合任何严肃的真实世界的编码。

# 函数式编程没有提供增长的机会

![](img/be1fd257e2a43553f61636b31e9b8d5b.png)

图片由[以利亚·海尔](https://unsplash.com/@elijahhail?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄

首先，软件工程师应该专注于不断的改进和成长。为了真正掌握面向对象编程，软件工程师必须掌握大量的知识。

首先，他们必须学习高级的面向对象技术，比如继承、抽象、封装和多态。然后他们应该熟悉大量的设计模式(比如 Singleton)，并开始在他们的代码中使用它们。大约有 30 种基本的设计模式需要学习。理想情况下，在这一点上，开发人员应该开始在他们的代码中使用各种企业级的抽象技术。

下一步是熟悉像领域驱动设计这样的技术，并学会打破这种垄断。还建议学习适当的重构工具，比如 Resharper，因为 OOP 代码的重构并不简单。

至少需要 20-30 年才能熟悉 OOP。即便如此，大多数拥有 30 年 OOP 经验的人并没有真正掌握它。学习的道路是崎岖的，充满了不确定性。面向对象编程开发人员将终生学习，这有多令人兴奋？

那些可怜的函数式程序员呢？可惜没什么好学的。我亲自教过几个初级开发人员 JavaScript 函数式编程，他们在大约半年的时间里变得非常擅长。他们只需要理解一些基本概念，然后很快学会应用它们。终生学习的刺激在哪里？我不会羡慕他们。

# 成功是一个旅程，而不是目的地

![](img/652c13002c780075dc50682c32491c93.png)

阿纳斯塔塞·马拉戈斯在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

让我们承认，我们程序员的时间是有报酬的。就像过去两年在我家不远处挖坑的建筑工人一样(顺便说一句，他们正在修建一条̶w̶a̶l̶l 路)。

让我们定义一下程序员生产力。每个在大型企业工作过的人都知道成功的简单公式:

```
productivity = lines_of_code x bugs_fixed
```

## 修复了错误

人类的大脑真的不擅长处理状态，在给定的时间内，我们的工作记忆中只能容纳大约五个项目。编程中的状态通常指内存中的任何数据，例如 OOP 中的字段/变量。使用可变状态非常类似于杂耍。我不知道有多少人能同时玩三个球，更别说五个了。

OOP 很好的利用了这个弱点。在 OOP 中几乎一切都是可变的。感谢上帝，OOP 非常重视开发人员的生产力！在 OOP 中，所有的可变状态都是通过引用共享的！这意味着您不仅要考虑您当前正在处理的对象的可变状态，还要考虑与之交互的 10-50 个其他对象的可变状态！这类似于试图同时玩 50 个球，而且还有额外的好处，对我们的大脑肌肉来说是一个很好的锻炼。

虫子？是的，最终我们会丢掉一些一直在玩杂耍的球。我们可能会错过这 50 个物体相互作用的一些小细节。但是谁在乎呢，真的吗？客户应该在生产中报告错误，这是任何大型企业的工作方式。然后 bug 进入 JIRA 的 backlog(也是严肃的企业级软件)。几年后，这些漏洞将被修复。问题解决了！

天哪，我喜欢用我的手机银行应用程序。这是非常先进的，银行重视我的业务，他们重视我的隐私。bug 只是特性(有人告诉我)！

所谓的“函数式”编程错误地隔离了状态，并使状态不可变。不幸的是，这降低了复杂性，从而减少了 bug 的数量。代码库中的错误越少，意味着我们需要修复的错误就越少。承包商将无法继续向他们的客户收取这些漏洞修复费用。在任何大型企业中工作的开发人员在他们的经理眼里都会变得很糟糕，同时严重危及他们在组织中成功的机会。

## 代码行

我们还应该能够向我们的管理层展示持续的进步。最有效的展示进步的方式是什么？当然是几行代码！如果我们都转向函数式编程，我们会让管理层非常不安和怀疑。“声明性”代码会使我们的代码更加简洁，代码的行数会大大减少。要实现完全相同的目标，最多需要减少 3 到 5 倍的代码，这是不可接受的！

换句话说，在严肃的企业管理面前，我们的生产力会直线下降，我们的工作会再次处于危险之中。远离“函数式”编程最符合我们的利益。

同样的建议也适用于那些向客户收取工时费用的承包商。这里有一个简单的成功公式:

```
lines_of_code = time_to_write = $$$pure_profit$$$
```

当然，这个成功的公式也直接适用于那些通过代码行获得报酬的严肃的软件承包商:

```
if (1 == '1') {
  doStuff();
} else {
  // pure profit
}
```

## 意大利面条是我们的面包和黄油

与函数式编程不同，OOP 为我们提供了一种一致的方式来编写意大利面条式的代码——这对开发人员的生产力是一个真正的福音。意大利面条代码等同于更多的计费时间，这转化为严肃的 OOP 工程师的纯利润。意大利面不仅味道鲜美，它还是 OOP 程序员的面包和黄油！

面向对象对承包商和严肃企业的员工来说都是真正的福音。

# Bug 预防部门

![](img/ef0bc7ac0cf920cf9e6827feb0d144e7.png)

[Icons8 团队](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

你不应该害怕使用 OOP。再说一次，那些讨厌的虫子没什么好担心的！任何严肃的企业都有一个完整的 bug 预防部门(又名客户支持)，其主要工作是保护他们的开发人员资源不受愤怒的客户的影响。毕竟不能正常使用 app 是客户的错。

开发人员不应该为诸如错误报告这样无关紧要的事情而烦恼。这确保了不会浪费任何企业资源，并允许开发人员在利用适当的企业级面向对象抽象和复杂设计模式的同时，专注于实现新功能。

## 错误报告流程

为了保护企业资源，通常会实施一个精心设计的严格流程。一旦客户遇到错误，他们通常必须在线寻找客户支持电话号码。然后，客户会看到一个包含各种选项的高级交互式电话菜单。通常需要两到五分钟来听菜单并选择正确的选项。最不持久的客户通常会在这一步放弃。

然后，客户通常被告知，该公司正在经历“意想不到的大量呼叫”，以及“平均等待时间为 56 分钟”。他们通常会为造成的不便道歉，并提到他们有多重视客户的业务。大多数客户通常会决定不在这一步报告错误。为了让顾客开心，通常会播放鼓舞人心的音乐。他们还被告知去看看这个令人敬畏的新应用。客户首先遇到问题的应用程序。

56 分钟的等待结束后，电话被转到位于北美某处的呼叫中心。当地的美国雇员通常经过严格的训练，使他们能够带着浓重的印度或保加利亚口音说话。代理提到，有问题的应用程序不是他的责任，但他很乐意将客户转移到另一个部门。

又等了 42 分钟后，一名代理高兴地告诉客户，这个 bug 实际上是一个功能，并建议用户浏览应用程序的帮助部分。如果客户仍然坚持，代理可能会创建一个支持票证，客户甚至可能会收到回复！bug 无法重现。

我希望现在你已经确信，担心 bug 不是开发人员的工作。企业通常会采取严格的措施来保护他们的开发人员资源。

# 避免新人面试失误

![](img/a7b4ce3ce07bed1135079fb09471dfb3.png)

在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上由 [Austin Distel](https://unsplash.com/@austindistel?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 拍摄的照片

如果你正在积极地找工作，那就努力把简历中所有“功能性”的废话去掉，否则没人会认真对待你。在真实的企业世界中，没有人受过像“功能组合”、“纯度”、“单子”或“不变性”这样幼稚的东西的训练。你不想看起来像个局外人。谈论这样的事情会让你的面试官看起来很笨，而且会彻底毁掉你成功的机会。

企业技术招聘人员也经过强制性的严格培训，这使他们能够正确区分 Java 和 JavaScript 等严肃技术。

一定要在你的简历中洒上文字，展示你对各种严格的企业级抽象技术的广博知识，如类、继承、设计模式、依赖注入、固体、抽象工厂和单例。

当被要求在白板上实现经典的 FizzBuzz 求职面试问题时，确保你做好了充分的准备。这是你展示自己严谨的企业级系统设计能力的机会。您的第一步是充分设计解决方案，同时利用适当的 OOP 设计模式和严格的企业级抽象技术。[fizzbuzzenterprise edition](https://github.com/EnterpriseQualityCoding/FizzBuzzEnterpriseEdition)是一个很好的起点。许多人会犯菜鸟的错误，依赖劣质的设计技术，比如功能。难怪他们从未收到潜在雇主的回复。

# 函数式编程不可能用于构建严肃的软件解决方案

![](img/966a4411d46c9cc2b1c7840ed5ae2d4c.png)

由[马库斯·斯皮斯克](https://unsplash.com/@markusspiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄

在考虑了上述所有严肃而严格的论点之后，人们现在可以清楚地看到，这种所谓的“函数式”编程从来没有带来什么好处。很明显应该不惜一切代价避免。

所谓的“函数式”编程是最近几年的时尚。已经不在了就好！像脸书和微软这样的大公司早就意识到了函数式编程的局限性和面向对象的代码组织方法的明显优势。他们正在将资源转向新一代面向对象语言，即 [ReasonOL](https://reasonml.github.io/) 和 [BosqueOOP](https://www.microsoft.com/en-us/research/project/bosque-programming-language/) 。这种语言将状态可变性带到了一个全新的水平，幸运的是不支持无用的功能性东西，比如不可变的数据结构。

# 上帝的恩惠

![](img/50e9c700dd46bc73913f9e402e78a635.png)

图片由[提供欢迎光临，感谢您的光临！来自](https://pixabay.com/users/janeb13-725943/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1159966) [Pixabay](https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1159966) 的ツ

所以你可能会问，所谓的“函数式”编程的替代方案是什么？面向对象编程，傻！这是编程之神赐予我们的。OOP 是一股不可忽视的力量。它是提高开发人员生产力的终极工具，并且会一直让您和您的团队成员保持忙碌(和工作)。

愿*(面向对象)*力量与你同在。还有你的密码。我是原力的一员。和平。

> 关于更深入的解释，请查阅我的另一篇文章 [**《面向对象编程，上帝的恩惠**](https://medium.com/@ilyasz/object-oriented-programming-the-trillion-dollar-disaster-️-92a4b666c7c7) **。**

正如你们大多数人已经猜到的，这篇文章是一篇讽刺文章。对于所有的新开发人员——不要太认真，FP 很棒！投入一些时间学习函数式编程，你会领先于大多数同龄人。我希望你能像我喜欢写这篇文章一样喜欢读这篇文章！