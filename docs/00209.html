<html>
<head>
<title>Demystifying Vuex — The State Container for Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭开Vuex的神秘面纱Vue的状态容器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/demystifying-vuex-the-state-container-for-vue-fde82662ca8c?source=collection_archive---------1-----------------------#2018-10-15">https://betterprogramming.pub/demystifying-vuex-the-state-container-for-vue-fde82662ca8c?source=collection_archive---------1-----------------------#2018-10-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/60b1577dd22714a99563c14e2d314f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*kz9D-JB0Lrk4RfhInh_3fg.png"/></div></figure><p id="005c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><a class="ae kv" href="https://vuex.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vuex </a>是<a class="ae kv" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>的事实状态管理模式库。Vuex让我们编写干净的、可维护的和可伸缩的代码。如果你想了解Vuex背后的概念，请继续阅读。</p><p id="2dd1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Vuex、<a class="ae kv" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank"> Redux </a>和其他状态容器对于构建可扩展的应用程序至关重要。简而言之，状态容器迫使我们以特定的方式来写干净的代码。</p></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="e8e3" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">我如何知道我是否需要一个状态容器？</h1><blockquote class="mb"><p id="7210" class="mc md it bd me mf mg mh mi mj mk ku dk translated">通量库就像眼镜:当你需要它们的时候你会知道的Redux》的作者丹·阿布拉莫夫。</p></blockquote></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="979b" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">入门指南</h1><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mm"><img src="../Images/454cbf447bc7d2788d64cc9d969e2337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VXMvtu2Gp-xsY74711yonA.gif"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">简单的计数器——https://codesandbox.io/s/6ll5krx5rn<a class="ae kv" href="https://codesandbox.io/s/6ll5krx5rn" rel="noopener ugc nofollow" target="_blank">的</a></p></figure><p id="feee" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们有一个带有简单计数器的Vue项目。计数器由三部分组成:</p><ul class=""><li id="9c13" class="mz na it jz b ka kb ke kf ki nb km nc kq nd ku ne nf ng nh bi translated">当前总和的状态。</li><li id="a355" class="mz na it jz b ka ni ke nj ki nk km nl kq nm ku ne nf ng nh bi translated">减量按钮。</li><li id="7578" class="mz na it jz b ka ni ke nj ki nk km nl kq nm ku ne nf ng nh bi translated">增量按钮。</li></ul><p id="4d03" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">用Vuex术语来说:</p><ul class=""><li id="19b3" class="mz na it jz b ka kb ke kf ki nb km nc kq nd ku ne nf ng nh bi translated"><code class="fe nn no np nq b">sum</code>是状态。</li><li id="2976" class="mz na it jz b ka ni ke nj ki nk km nl kq nm ku ne nf ng nh bi translated"><code class="fe nn no np nq b">decrement</code>和<code class="fe nn no np nq b">increment</code>是改变状态的动作。</li></ul><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi nr"><img src="../Images/a11d7f11ca13e10ea4a47516894bebb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b-cBX3eQqg6Iu4qV46kXTw.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">经典Vue组件</p></figure><p id="0bcb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">让我们将Vue组件重构为Vuex组件。每个Vuex应用程序都有一个保存状态的存储:</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ns"><img src="../Images/662e364e62a2821744450249a1c23ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*14jGUGnBKtp6j3j36Axspg.gif"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">添加Vuex依赖项</p></figure><p id="82e1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们需要做的第一件事是创建一个Vuex商店。</p></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="dc3e" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">创建商店</h1><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi nt"><img src="../Images/35d87354bcdef4c671d7f165acef430b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQjoi4WUPxdw5nd9F4zfKw.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">创建Vuex操作</p></figure><p id="270a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">眼熟吗？动作和状态与Vue组件中的类似。</p><p id="131b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">商店是由四个对象组成的<code class="fe nn no np nq b">Vuex.store</code>对象的实例。这四个对象是<code class="fe nn no np nq b">state</code>、<code class="fe nn no np nq b">actions</code>、<code class="fe nn no np nq b">mutations</code>和<code class="fe nn no np nq b">getters</code>。他们都有一个关键的角色，一切都配合得很好。</p><p id="9183" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><code class="fe nn no np nq b">state</code>记录一切。<em class="nu"> </em> <code class="fe nn no np nq b">Actions</code>照顾所有的逻辑和条件，把最终结果传递给突变。<code class="fe nn no np nq b">Mutations</code>修改/写修改，最后，<code class="fe nn no np nq b">getters</code>意为从状态中读取。</p></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="7082" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">将Vuex存储传递给Vue实例</h1><p id="b990" class="pw-post-body-paragraph jx jy it jz b ka nv kc kd ke nw kg kh ki nx kk kl km ny ko kp kq nz ks kt ku im bi translated">每个Vue实例都有一个<code class="fe nn no np nq b">store</code>属性。让我们将我们的存储传递给Vue实例。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oa"><img src="../Images/7645feb9b638fb7bb584d375cbc0bd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSMPlKRJwkFAl2YqTL6L1g.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">将商店属性传递给Vue</p></figure><p id="0c7c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">实际上，我们可以通过只编写一次存储来简化这一点，因为它们的名称相同，而且<a class="ae kv" href="https://alligator.io/js/object-property-shorthand-es6/" rel="noopener ugc nofollow" target="_blank"> JavaScript足够聪明，可以简化这个</a>。只有当它们相同(区分大小写)时，才能这样做。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ob"><img src="../Images/449e8ae5670bfff9bb09edb1823b5bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OK0qAQllGhLu3X7iV3Ug5A.png"/></div></div></figure></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="f7fb" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">在Vue内部调用减量和增量操作</h1><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oc"><img src="../Images/e204092967bb24e0238a9136e60568f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRh6mvK98KPmFTmFDgeejg.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">在Vue组件中调用操作</p></figure><p id="de19" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><code class="fe nn no np nq b">$store</code>是一个全局对象，包含所有的<code class="fe nn no np nq b">actions</code>、<code class="fe nn no np nq b">states</code>、<code class="fe nn no np nq b">getters</code>、<code class="fe nn no np nq b">mutations</code>以及更多的功能。<code class="fe nn no np nq b">$store</code>对象被注入到每个Vue组件中——非常方便。</p></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="f3cf" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">使用Vuex总和状态而不是本地数据状态</h1><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div class="gh gi od"><img src="../Images/4e3d4a8e29c9283cc218260cfd05d692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*MbLAAgEe20pBySz9id5JXg.png"/></div></figure><p id="a5d8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">请注意我们是如何让Vuex而不是Vue跟踪我们的状态和动作的。Vue只呈现标记和样式。你要做的事情越少，结果越好。<strong class="jz iu"> </strong>一次做一件事，但要做得真正好。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mm"><img src="../Images/71c920a06ae24040b14e5f0a6551dcc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kVbHWVn1Fftauo8FPH-K2Q.gif"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">我们的应用程序的当前状态</p></figure><p id="2cb7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">当你点击计数器时，什么也没有发生——为什么？到目前为止，我们从Vuex读取状态，告诉Vuex下一个状态是什么，但我们实际上并没有“改变”状态。动作提交新的状态改变；突变改变了状态。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oe"><img src="../Images/0aacb8d5b0b66b4d4240ec372a285cb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1GGWtRVph8QgxMhY9MfNw.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">创造突变</p></figure><p id="b1be" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在我们得到了想要的结果。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mm"><img src="../Images/90276ae5b382e4241bcc8e8e402040c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cqak5fnZm3Y5zgInjOAhbA.gif"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">调用Vuex动作和改变Vuex状态</p></figure></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="eb04" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">用Getters读取状态</h1><p id="763f" class="pw-post-body-paragraph jx jy it jz b ka nv kc kd ke nw kg kh ki nx kk kl km ny ko kp kq nz ks kt ku im bi translated">想象一下，如果我们的状态更复杂一点——想象两个或三个物体的深度——这在表单中很常见。</p><p id="7254" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们可以获取计算出的状态并将其传递给模板，而不是在模板中编写<code class="fe nn no np nq b">$store.state.form.username.pet[2]</code>。这极大地清理了代码。Vue模板应该尽可能少地呈现标记和处理外部逻辑。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi of"><img src="../Images/2bfd83e85d7944738f8b740fc8be2d81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RofTESfOnSOvxMEcGZ0Jug.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">ES6(首选)，下面ES5。</p></figure><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi og"><img src="../Images/9ed833c61cf4316b6fb03b063394687e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IU4LRBkyvSFSoAqsAtrraQ.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">ES5</p></figure><p id="2cf4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">简单来说，我们将一个函数映射到一个键，并返回函数内部的期望状态。如果你来自React世界，就把getters想象成选择器。</p><p id="08b0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">回到我们的Vue组件，我们已经创建了一个computed属性，并将我们的Vuex getter映射到它。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oh"><img src="../Images/1ce19d459a50d4aaab1466a95d59e2f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1INKCKbpOgdQPPjs-cJdA.png"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">创建计算的getters</p></figure><p id="62bf" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">请注意，标记再次变得非常干净——这就是关键所在。</p><p id="6006" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">下面是借助于<code class="fe nn no np nq b">mapGetters</code>函数的计算getter的简写。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/9362f5f5abc545fc8dec179ce01217b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*DddHV_gTSF9Q5B0GPi-c9A.png"/></div><p class="mv mw gj gh gi mx my bd b be z dk translated">mapGetters辅助函数</p></figure><p id="1afa" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">任何状态容器的关键特性之一是惊人的状态检查工具。<a class="ae kv" href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=en" rel="noopener ugc nofollow" target="_blank"> Vue.js开发工具</a>有一个现成的Vuex检查器。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mm"><img src="../Images/f090f3da49d9dedfcca77a17d218e809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tJ8pF8ZXfc512x7OZtDdkg.gif"/></div></div><p class="mv mw gj gh gi mx my bd b be z dk translated">使用Vue开发工具检查Vuex状态</p></figure><p id="3d43" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">太神奇了！调试条件再好不过了！</p><p id="6deb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你喜欢使用Vue并想更深入地学习它，<a class="ae kv" href="https://amzn.to/2LQBPo3" rel="noopener ugc nofollow" target="_blank">这里有一本关于全栈Vue的好书</a>。</p></div><div class="ab cl kw kx hx ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="im in io ip iq"><h1 id="dee1" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">这是项目</h1><div class="oj ok gp gr ol om"><a href="https://codesandbox.io/embed/6ll5krx5rn" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">CodeSandbox</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">CodeSandbox是一个为web应用程序量身定制的在线编辑器。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">codesandbox.io</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa jv om"/></div></div></a></div><p id="6fbe" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这就对了，这是Vuex能做到的最简单的事情。这应该是在您的Vue应用中采用Vuex的良好起点。</p><p id="08a0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">感谢阅读！</p></div></div>    
</body>
</html>