<html>
<head>
<title>Analyzing the Performance of Your Angular Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析角度应用的性能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/analyzing-the-performance-of-your-angular-application-9a4c23818504?source=collection_archive---------3-----------------------#2020-09-11">https://betterprogramming.pub/analyzing-the-performance-of-your-angular-application-9a4c23818504?source=collection_archive---------3-----------------------#2020-09-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cc7a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">深入了解角度应用的性能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b806479196d7ceab7299c7486c6c1e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kv4IZtuWwk-M9qe2"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@nexgenfx?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢卡·坎皮奥尼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="3e1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您将Angular应用程序交付生产时，您希望它以最佳状态运行。高性能的应用程序带来高质量的用户体验。</p><p id="fa35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何测量Angular应用程序的性能。了解降低应用程序速度的瓶颈将有助于您做出明智的决策，从而优化您的应用程序。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="12b2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">管束检查</h1><p id="ba2b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">npm包<code class="fe mz na nb nc b">source-map-explorer</code>在检查由Angular产品构建输出生成的JavaScript包方面非常出色。</p><p id="1d93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装<code class="fe mz na nb nc b">source-map-explorer</code>，只需从项目的工作区目录的根目录运行以下命令:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="f6ea" class="nh md it nc b gy ni nj l nk nl">npm i source-map-explorer --save-dev</span></pre><p id="8ad3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装<code class="fe mz na nb nc b">source-map-explorer</code>之后，构建您的生产应用程序，并记住使用<code class="fe mz na nb nc b">--source-map</code>标志。这告诉Angular将源贴图作为构建的一部分:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="627b" class="nh md it nc b gy ni nj l nk nl">ng build --prod --source-map</span></pre><p id="29ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">典型的Angular产品构建主要由以下文件组成:主包文件、供应商文件、polyfills、运行时包、脚本、样式表等。</p><p id="0a37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用下面的命令通过<code class="fe mz na nb nc b">source-map-explorer</code>检查构建输出文件。<code class="fe mz na nb nc b">source-map-explorer</code>包将分析所有生成的源地图并显示所有依赖关系:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ae08" class="nh md it nc b gy ni nj l nk nl">$ source-map-explorer ./dist/project-name/*.js</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/2ec605a559ecc6f33798e1493349fea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Khj226evcxsCbDlx245lKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="25ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文件越大，你的网站在浏览器中加载的时间就越长。</p><p id="4f90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您注意到任何不必要的大的依赖项或库，请考虑对它们进行优化，或者更改将它们导入到项目中的方式。如果您注意到一些不再使用的库，请将其删除。</p><p id="d535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过在图形表示中单击各个库，您可以进一步深入和分析它们。</p><p id="872b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将我们带到下一部分:查看应用程序的网络活动。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bf09" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">网路性能</h1><p id="b938" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在这一节中，我将向您展示如何使用Chrome DevTools中的网络面板来分析应用程序的加载方式。您还可以使用网络面板来分析是否所有资源都按预期下载或上传。</p><p id="9941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请确保在浏览器中以匿名或隐私模式加载您的应用程序，这样您就不会缓存网站资源来获得网络活动的真实反映。您可以使用快捷键<code class="fe mz na nb nc b">Ctrl + Shift + N</code>在匿名模式下启动浏览器标签。</p><p id="a71e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行我的Angular应用程序并查看网络面板后，我得到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/25e98bc019a96536d7f2019d889cc729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AhF6agP0Bmlr0w1GgQASKw.png"/></div></div></figure><p id="17d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用红色突出显示了一些大文件。供应商文件大约5MB，如果你注意到，它们花了最多的时间来加载。</p><p id="cc7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">样式表文件也相对较大，需要一些时间来加载。这同样适用于脚本和聚合填充文件。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c525" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">现场审计</h1><p id="4319" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要真正提高网站的负载性能，进行审计是很重要的。审计将对影响应用程序负载性能的因素提出建议，并建议一些补救措施。</p><p id="82e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要审计你的网站，打开Chrome DevTools下的Lighthouse面板。在Lighthouse面板中，点击“生成报告”按钮来获得您的应用程序的审计报告。在生成报告之前，您可以选择自定义审计选项。</p><p id="84ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="no">注:在旧版Chrome中，灯塔面板名为Audit。</em></p><p id="95d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在匿名或私有模式下运行一个示例angle应用程序并生成审计报告会产生下面的输出。</p><p id="9783" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经注意到，该应用程序在可访问性、最佳实践和SEO方面得分很高。但是，它的表现相当惨。为什么？</p><p id="3e04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再往下，审计报告还显示了应用程序获得这些指标的确切原因:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/c08696e1c1b1a2469f1edadbf5be03be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NnI58rdZG6P604kj2QTWag.png"/></div></div></figure><p id="5ef0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，审计报告还提供了一些关于如何提高Angular应用程序性能的建议。以下是一些潜在的改进:</p><ul class=""><li id="20fb" class="nq nr it lb b lc ld lf lg li ns lm nt lq nu lu nv nw nx ny bi translated">缩小和丑化JavaScript。</li><li id="3782" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">对图像使用新一代格式，如JPEG 2000、JPEG XR和WebP，而不是JPEG或PNG等格式。</li><li id="23ae" class="nq nr it lb b lc nz lf oa li ob lm oc lq od lu nv nw nx ny bi translated">删除未使用的JavaScript和CSS代码或文件。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/7cefe6934be1144a753c3ad44e9a5e45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G8YzlPIvDwiF87lVmlb-oA.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dfba" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">网页测试</h1><p id="bf5d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最后但同样重要的是，您可以使用网站<a class="ae ky" href="https://www.webpagetest.org/" rel="noopener ugc nofollow" target="_blank"> WebPageTest </a>在全球多个地方使用非模拟浏览器和设备测试您的应用程序的速度。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2b05" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="0454" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本文中，我们研究了几种分析Angular应用程序性能的方法。这并不详尽，但绝对是一个好的起点。</p><p id="a3fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">了解是什么降低了应用程序的性能，是做出明智的性能改进决策的关键。</p></div></div>    
</body>
</html>