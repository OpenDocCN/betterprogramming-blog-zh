<html>
<head>
<title>Generating Thumbnails Dynamically on the Client</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在客户端动态生成缩略图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/generating-thumbnails-dynamically-on-the-client-12637cfe6a97?source=collection_archive---------4-----------------------#2019-08-10">https://betterprogramming.pub/generating-thumbnails-dynamically-on-the-client-12637cfe6a97?source=collection_archive---------4-----------------------#2019-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="03af" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当你无法控制后端和缩略图时，客户端缩略图生成可以提高你的UX</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/55446b20265440dc7247edde2414ccd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0hMnHBAP5OyUbe2U0-9vA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">客户端计算</p></figure><p id="f719" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将以一个免责声明开始:在服务器端生成缩略图几乎总是最好的。它速度很快，不会在多个客户端上重复计算。在大多数情况下，我可能会创建一个云函数来生成各种尺寸的缩略图，并将其设置为由存储事件触发(例如，将图像保存到AWS S3)。</p><p id="5a78" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，<strong class="la iu">我为客户端缩略图生成提供了一个案例，当</strong>:</p><ol class=""><li id="f05a" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">你不能控制你的应用程序的后端</li><li id="e91d" class="lu lv it la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">通过使用缩略图，你的用户体验会得到显著改善</li></ol><p id="e6ab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以我和我的合作伙伴正在开发的混合移动应用程序为例，它可以帮助皮肤科医生拍摄和管理病人的照片。后端由诊所的EHR提供，因此应用程序只能通过过时的网络API与之交互，因此没有内部控制。这是一个照片管理应用程序，所以缩略图很普遍，在用户体验中发挥着重要作用。然而，将全尺寸图像渲染为缩略图是计算密集型的(特别是在移动环境中)，我们注意到这造成了很多UI延迟。</p><p id="2d59" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，我们决定尝试动态的<em class="mi"> </em>客户端生成，我们对结果很满意。动态位意味着我们在加载照片时动态生成缩略图。我在下面提供了一个简化的要点，说明我们如何在浏览器环境中做到这一点(在我们的混合应用程序中是webview):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="6032" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对我的手的照片运行一些性能测试产生了以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/b82ff645c7ecce51e41a269a0ef60a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6oD4i3pm7iVV41Xt5yZ2JQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基准测试结果</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/4ffc2f8b78e2a1dd69aa0d063ee1c18c.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*js2S-o-Gsvs7rs3KSxhVeg.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的手(原版)</p></figure><p id="2229" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，动态缩略图生成平均来说相当快，肯定比我预期的要快。有些缩略图需要2-3毫秒，但平均需要1.07毫秒。也就是说，我鼓励你用上下文和你将使用的实际图像进行测试。那个手的图像很小，所以它会比高清的要快得多。</p><blockquote class="mn"><p id="807a" class="mo mp it bd mq mr ms mt mu mv mw lt dk translated">动态缩略图生成结果相当快…肯定比我预期的要快。</p></blockquote><p id="3541" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">动态生成缩略图并不是我们考虑的唯一选择。每当保存照片时，我们可以将缩略图和原始照片一起存储在EHR中。然而，这是有问题的，因为没有办法将它们标记为隐藏的，所以它们会塞满医生的桌面界面。此外，没有什么可以阻止无意中的删除(我们的情况类似于您的用户每天直接查看和编辑您的S3存储桶)。</p><p id="9a1b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者，我们可以在客户端或服务器端生成缩略图，并将它们存储在我们<em class="mi">控制的外部系统中。然而，由于负责存储医疗照片的安全和责任问题(更不用说将新的外部系统与EHR同步的额外麻烦)，这一点被排除在外。</em></p><blockquote class="mn"><p id="995f" class="mo mp it bd mq mr ms mt mu mv mw lt dk translated">在你无法控制后端的情况下，客户端缩略图生成是值得考虑的<em class="nc"> </em>，缩略图可以提高你的UX。</p></blockquote><p id="58ed" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">总之，动态缩略图生成(或一般的客户端生成)通常不是最好的方法。但是，如果你无法控制后台，缩略图可以改善你的UX，那么<em class="mi">是值得考虑的。</em></p></div></div>    
</body>
</html>