# 像我 5 岁一样解释:反应虚拟 DOM

> 原文：<https://betterprogramming.pub/explain-like-im-5-react-virtual-dom-297ed1b8f7b>

## React 的虚拟 DOM 到底是怎么工作的？

![](img/62e58d659fa71d27a97ff0f4d20cb0b6.png)

丹尼尔·麦卡洛在 [Unsplash](https://unsplash.com/s/photos/architect-blueprint?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍照。

如果你是个新手，那么*虚拟世界*的概念可能会让你晕头转向。您已经了解到 React 通过使用虚拟 DOM 解决了 DOM 操作的问题，虚拟 DOM 是 DOM 对象的轻量级表示。您已经了解到操作 DOM 很慢，而使用虚拟 DOM 很快。然而你仍然不明白这一切到底意味着什么。

在本文中，我将简化 React 虚拟 DOM，希望能在您的头脑中更好地表达这个概念！

# 问题是

DOM(或*文档对象模型*)是应用程序的树状表示。当一个元素在真实的 DOM 中更新时，就会创建一个新的 DOM。这个过程既慢又贵。

如果你把真正的大教堂想象成一个实体的房子。DOM 操纵就像需要翻新房子的一个房间，通过拆除房子来建造一个全新的房间。这当然是浪费和费力的。

![](img/00b78984c359c8f12e231d85a4f9e76a.png)

来源:W3Schools

# 修复

另一方面，虚拟 DOM 是 DOM 的轻量级表示。把虚拟 DOM 想象成你的房子在纸上的当前蓝图。你可以通过这个蓝图看到你房子的各个方面，但是仅仅在蓝图上画一个新房间不会神奇地修复真实的房间。同样，虚拟 DOM 是 DOM 的一个很好的表示，但是它不能直接改变你在屏幕上看到的东西。那么这是怎么做到的呢？

虚拟 DOM 发生的情况类似于:

*   你想翻新你家里的一个房间。
*   你可以看到房子的蓝图。
*   然后，制作蓝图的新副本，并对新版本进行修改。新蓝图现在具有新的房间表示。
*   现在你比较原始蓝图和新蓝图，看看需要做什么样的建设。
*   然后你走进真正的房子，独自进行与那个房间相关的改变，而不必重建整个房子。
*   既然旧的蓝图不再有用，你可以把它扔掉。现在你最近的蓝图是你唯一的蓝图，它代表了修复后你房子的最新版本。

在这个例子中，房子的原始蓝图是虚拟 DOM。您需要对房子进行修复，这类似于当一个元素需要更新时(由状态变化触发)。您根据需要的更改制定一个修改的蓝图类似于虚拟 DOM 的完全更新。将原始蓝图与更新后的蓝图进行比较类似于将更新前的虚拟 DOM 与更新后的虚拟 DOM 进行比较。在这个过程中，React 确定虚拟 DOM 的哪个方面发生了变化。这被称为*差*。最后，您进入房间进行所需的精确更改相当于 React 只更新实际 DOM 上需要更改的对象*。*

# 结论

希望这个类比能帮助你看到 React 中使用虚拟 DOM 背后的效率和轻松想法。要获得更多初学者友好的资源，请查看:

*   [反应:虚拟 DOM](https://www.codecademy.com/articles/react-virtual-dom)
*   [React 虚拟 DOM 用简单的英语解释](https://programmingwithmosh.com/react/react-virtual-dom-explained/)