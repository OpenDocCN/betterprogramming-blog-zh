<html>
<head>
<title>What’s New in SwiftUI TextField for iOS 16?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 16版SwiftUI TextField有什么新功能？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/whats-new-in-swiftui-textfield-for-ios-16-308264052ca3?source=collection_archive---------5-----------------------#2022-06-13">https://betterprogramming.pub/whats-new-in-swiftui-textfield-for-ios-16-308264052ca3?source=collection_archive---------5-----------------------#2022-06-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="adf1" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">多行文本字段、默认焦点、新的自动更正修饰符、警报中的文本字段和微调的滚动</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/c3c37c03e90abbf2f7b05f530f78ad22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nvZKpRrXk5zx4I95"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@syedmohdali121?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">赛义德·阿里</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3ae1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">TextField是用SwiftUI设计UI的核心控件之一。在WWDC 2020期间，为<code class="fe lw lx ly lz b">TextField</code>展示了相当多方便的增强功能。比如:</p><ul class=""><li id="74b5" class="ma mb iu lc b ld le lg lh lj mc ln md lr me lv mf mg mh mi bi translated">通过轴参数的多行文本字段</li></ul><p id="b9af" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在接下来的几节中，我们将逐一介绍它们:</p></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="af86" class="mq mr iu bd ms mt mu mv mw mx my mz na ka nb kb nc kd nd ke ne kg nf kh ng nh bi translated">多行文本字段</h1><p id="5bfa" class="pw-post-body-paragraph la lb iu lc b ld ni jv lf lg nj jy li lj nk ll lm ln nl lp lq lr nm lt lu lv in bi translated">在iOS 16之前，为了构建一个随着内容动态增长或收缩的<code class="fe lw lx ly lz b">TextField</code>——我们要么利用UIViewRepresentable，要么通过使用<code class="fe lw lx ly lz b">ZStack</code>来实现。</p><p id="ce48" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">很高兴，在iOS 16中，axis参数会自动为您处理这些事情。</p><pre class="kk kl km kn gu nn lz no np aw nq bi"><span id="f786" class="nr mr iu lz b gz ns nt l nu nv">TextField("Expandable", text: $text, axis: .vertical)</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/7a5e886c9b363ee71eb9cf8c18828bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NnXkoam3Q6jpD6XveebSiw.gif"/></div></div></figure><p id="9492" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以通过使用<code class="fe lw lx ly lz b">lineLimit</code>修改器来进一步定制和控制<code class="fe lw lx ly lz b">TextField</code>的动态高度。在<code class="fe lw lx ly lz b">lineLimit</code>中设置一个下限和上限让我们可以设置文本字段的最小高度和滚动开始的高度。如下图所示，文本字段的高度对应于6行。</p></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="7f9d" class="mq mr iu bd ms mt mu mv mw mx my mz na ka nb kb nc kd nd ke ne kg nf kh ng nh bi translated">通过默认焦点更好地处理焦点</h1><p id="7f11" class="pw-post-body-paragraph la lb iu lc b ld ni jv lf lg nj jy li lj nk ll lm ln nl lp lq lr nm lt lu lv in bi translated">之前，我们不得不求助于<code class="fe lw lx ly lz b">asyncAfter</code>来改变文本字段的焦点。我们现在可以做到这一点，没有任何延迟，如下所示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nx"><img src="../Images/030e74a0abe6cc716edfd7d1d18f06a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AIXriIiPm8bxYrySn_wfJQ.gif"/></div></div></figure><p id="f153" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">iOS 16还带来了一个方便的修饰符— <code class="fe lw lx ly lz b">defaultFocus(_:_:priority:)</code>以编程方式设置默认焦点:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ny nz l"/></div></figure></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="0a89" class="mq mr iu bd ms mt mu mv mw mx my mz na ka nb kb nc kd nd ke ne kg nf kh ng nh bi translated">一种新的自动修正修改器</h1><p id="7bc6" class="pw-post-body-paragraph la lb iu lc b ld ni jv lf lg nj jy li lj nk ll lm ln nl lp lq lr nm lt lu lv in bi translated">SwiftUI中默认启用<code class="fe lw lx ly lz b">TextFields</code>的自动校正。因此，在下面的修饰符中传递一个布尔值在早期没有什么意义:</p><pre class="kk kl km kn gu nn lz no np aw nq bi"><span id="4bc1" class="nr mr iu lz b gz ns nt l nu nv">//Prior to iOS 16</span><span id="c8da" class="nr mr iu lz b gz oa nt l nu nv">disableAutocorrection(true)</span></pre><p id="4b2d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在在iOS 16中，<code class="fe lw lx ly lz b">disableAutocorrection</code>被弃用，新的修饰符更容易插入和理解:</p><pre class="kk kl km kn gu nn lz no np aw nq bi"><span id="85ac" class="nr mr iu lz b gz ns nt l nu nv">.autocorrectionDisabled()</span></pre></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="fc05" class="mq mr iu bd ms mt mu mv mw mx my mz na ka nb kb nc kd nd ke ne kg nf kh ng nh bi translated">在提醒中使用文本字段</h1><p id="c6a2" class="pw-post-body-paragraph la lb iu lc b ld ni jv lf lg nj jy li lj nk ll lm ln nl lp lq lr nm lt lu lv in bi translated">现在，您可以在<code class="fe lw lx ly lz b">actions</code> <code class="fe lw lx ly lz b">ViewBuilder</code>参数中传递文本字段，以创建包含文本字段的警报。所以，和iOS 16的<code class="fe lw lx ly lz b">UIViewRepresentable</code>做事方式说再见吧。</p><p id="5e72" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下是如何实现TextField inside alerts:</p><pre class="kk kl km kn gu nn lz no np aw nq bi"><span id="64d1" class="nr mr iu lz b gz ns nt l nu nv">.alert("Title", isPresented:$displayAlert,actions: {</span><span id="39e8" class="nr mr iu lz b gz oa nt l nu nv">TextField("Email", text: .constant(""), axis: .vertical)<br/>Button ("Save") {}</span><span id="8179" class="nr mr iu lz b gz oa nt l nu nv">})</span></pre><p id="ac73" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢按钮<code class="fe lw lx ly lz b">roles</code>，我们不再需要依赖需要<code class="fe lw lx ly lz b">primaryButton</code>和<code class="fe lw lx ly lz b">secondaryButton</code>参数的旧警报<code class="fe lw lx ly lz b">initialiser</code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ny nz l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ob"><img src="../Images/c60f20d0ba10e21a26ecb6efea051c58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tdweHlIm-YJ_Il2Z5k3utQ.png"/></div></div></figure></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="0be1" class="mq mr iu bd ms mt mu mv mw mx my mz na ka nb kb nc kd nd ke ne kg nf kh ng nh bi translated">滚动时键盘不可用</h1><p id="4a5c" class="pw-post-body-paragraph la lb iu lc b ld ni jv lf lg nj jy li lj nk ll lm ln nl lp lq lr nm lt lu lv in bi translated">不完全是TextField特性，但是新的SwiftUI修饰符<code class="fe lw lx ly lz b">.scrollDismissesKeyboard(.immediately)</code>允许你在ScrollView上以不同的方式关闭键盘。例如，当拖动滚动条时，模式<code class="fe lw lx ly lz b">immediately</code>导致键盘立即消失。<code class="fe lw lx ly lz b">interactively</code>只有当用户向上滚动时才关闭。</p><p id="95cf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe lw lx ly lz b">scrollDismissesKeyboard</code>不仅适用于ScrollView，也适用于如下所示的<code class="fe lw lx ly lz b">List</code>和<code class="fe lw lx ly lz b">Form</code>:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oc"><img src="../Images/02689f37d5ac314d1ba9526083d54637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nrOrYct-9TdqcD2viYiQzA.gif"/></div></div></figure><p id="fe5e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在构建注册表单时，这是一个非常方便的修饰符。</p></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><p id="2efc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以上就是iOS 16版SwiftUI TextField的变化。感谢阅读。</p></div></div>    
</body>
</html>