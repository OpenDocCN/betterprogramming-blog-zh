<html>
<head>
<title>Is Rust the Best Choice for JavaScript Tooling?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rust是JavaScript工具的最佳选择吗？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/is-rust-the-best-choice-for-js-tooling-a35e26f2f24f?source=collection_archive---------5-----------------------#2022-01-01">https://betterprogramming.pub/is-rust-the-best-choice-for-js-tooling-a35e26f2f24f?source=collection_archive---------5-----------------------#2022-01-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="576d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">还是有更好的替代方案？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/12db8e16c69907397cba051b1490e0e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n2LkMaasLDk_ETtF"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谢尔盖·佐尔金在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="db12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然Rust是一门伟大的语言，但它和所有语言一样，适合某些用途，但不适合其他用途。</p><p id="792d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">专注于成为一种系统编程语言和比C/C++更安全的语言意味着Rust做出了权衡，使其成为系统编程任务的最佳选择。但是最近我注意到似乎有一些的<a class="ae kv" href="https://leerob.io/blog/rust" rel="noopener ugc nofollow" target="_blank">推动</a> <a class="ae kv" href="https://rome.tools/blog/2021/09/21/rome-will-be-rewritten-in-rust" rel="noopener ugc nofollow" target="_blank">使其成为编写JS工具的首选工具，而不是使用JS本身(通过NodeJS)。</a></p><p id="0e53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，当你处于为JS生态系统创建一个新工具的位置时，Rust真的是最好的选择吗？而且是除了Node之外唯一可行的选择吗？在本文中，我想提出一种替代方案，并论证考虑同时使用JS和Rust。</p><h1 id="5ba1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">大揭秘</h1><p id="e6ea" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">那么，我提议的替代方案是什么？嗯，发现是<a class="ae kv" href="https://dart.dev" rel="noopener ugc nofollow" target="_blank">镖</a>大概也不算什么惊喜吧。</p><p id="b9c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是为什么我认为Dart是在JS之上编写JS工具的一个很好的选择，更重要的是Rust？</p><p id="8f52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，让我们来看看人们使用或提议使用Rust而不是JS的一些原因…</p><h1 id="6aee" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">JS工具生锈</h1><p id="c183" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">以下是我看到的一些关于Rust为什么是JS工具的好选择的论点:</p><ul class=""><li id="b597" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">生产率</li><li id="36e7" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">更好的依赖性</li><li id="17b3" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">没有Garabage集合(GC)</li><li id="a3ff" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">高/广泛采用</li><li id="bac1" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">性能:编译代码小，执行速度快，启动时间快</li></ul><p id="61db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果我们更仔细地研究这些，上面的一些伴随着令人不安的警告。对于生产力，支持者认为JS开发人员跟上Rust的速度并不困难，但是我不得不严肃地质疑这一点。</p><p id="96a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就我个人而言，到目前为止，我发现我学习Rust的旅程很不容易，我不仅有JS方面的背景，还有几种GC、静态类型语言(Java、Kotlin、Dart)方面的背景，以及(最近)使用C和进行一些系统级编程的背景。Rust对于JS开发人员来说，无论是从语法上，还是更重要的是从语义上来说，都太大、太复杂，与一门语言完全不同。</p><p id="a68c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然其中一篇文章指出Rust比通常与NodeJS的集成更好，另一篇文章谈到Rust crates做出的权衡，但还不清楚Rust package生态系统给这个用例带来了什么好处。</p><p id="2fa1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与此同时，Rusts使用其独特的“所有权”内存管理系统相对于GC的优势确实非常值得怀疑，因为我们正在讨论的工具大部分是作为一次性进程而不是长期进程运行的，并且不像音频DSP工具或游戏这样的用例那样对时间和延迟敏感。</p><p id="355f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然上面使用的“单次”与长期进程确实突出了Rust在AOT编译为本机可执行文件方面带来的巨大好处，从而显著改善了冷启动时间和执行速度，而基于JIT的NodeJS可能会遇到困难，因为JIT没有足够的运行时间来优化正在运行的工具。</p><p id="9951" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，Rust能够为所有主要平台编译小的、<strong class="ky ir">独立的</strong>可执行文件的能力在这里大放异彩，尽管老实说，鉴于NodeJS安装得如此广泛和容易，还不清楚这对于<em class="nd"> JS </em>工具相对于其他领域的优势有多大。</p><p id="58c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，Rust的广泛使用和快速增长，这无疑使它成为了业界的主流语言——因此，在不确定的将来，它还会继续存在。</p><h1 id="5179" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">JS工具的省道</h1><p id="38d0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">那么与Rust和JS相比，Dart在这方面能提供什么呢？</p><p id="3c08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先:生产力。</p><p id="2962" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然与JS明显不同，但Dart的设计(现在仍在维护)非常注重让来自其他类似C语言、<em class="nd">尤其是</em> JS的开发人员更容易学习这种语言，因为它最初的目标是成为JS的浏览器内替代品。我可以非常自信地说，对于JS开发人员来说，Dart比Rust更容易学习。<a class="ae kv" href="https://docs.flutter.dev/get-started/flutter-for/react-native-devs#introduction-to-dart-for-javascript-developers" rel="noopener ugc nofollow" target="_blank"> Flutter文档甚至有一个专门的章节</a>专门针对这个主题！</p><p id="3c11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，由于其最初的(现在已经放弃的)目标是在浏览器中取代JS，Dart还拥有一个优秀的JS互操作以及两个Dart到JS的交叉编译器。鉴于此，Dart在浏览器中也有着重要的使用历史、社区和生态系统。</p><p id="50db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回顾我之前提到的JS工具需要针对短时间运行、快速启动和执行时间进行优化的观点，Dart能够(就像Rust一样)被AOT编译为适用于所有主流平台(x64和Arm架构)的“小型”静态链接的独立本机可执行文件，这与Rust非常匹配，尽管我必须承认，我还没有真正看到任何针对JS工具需要执行的编译/处理任务类型的执行吞吐量的比较基准。</p><p id="7dd3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就采用而言，虽然Dart在CLI工具中的使用并不显著，但SASS编译器项目对Dart的使用非常突出，这表明Dart在web开发相关工具方面的生产准备就绪。</p><p id="f257" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Dart是该工具和巨大成功的Flutter的基础，Dart的长期前景看起来非常乐观。</p><h1 id="918c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="80bd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">虽然Rust确实比使用JS作为JS工具有一些优势，但我仍然怀疑它给这个<strong class="ky ir">非常具体的用例</strong>带来了多少优势而不是代价。</p><p id="674f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我相信Dart带来了许多相同的好处，也许没有那么多的权衡，对于任何从头开始编写的JS工具或者决定将JS转移到另一种语言的JS工具，它绝对值得考虑使用。</p><p id="5278" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，以上所述绝不应该被看作是贬低铁锈在许多其他用途和领域中的重要性、高质量和有用性。我肯定还会花时间学习它，并在许多即将到来的项目中使用它，包括Flutter应用程序、嵌入式和微控制器项目。</p><p id="6772" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我还推荐阅读【Axel Rauschmayer博士关于用非JS语言编写JS工具这一新兴趋势的利弊的思考</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="838f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这对你有所帮助，如果有或者你有任何其他方便的技巧可以分享，请通过<a class="ae kv" href="https://twitter.com/mklin" rel="noopener ugc nofollow" target="_blank"> Twitter </a>让我知道。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="c42c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nd">最初发表于</em><a class="ae kv" href="https://manichord.com/blog/posts/why-dart-not-rust-for-js-tools.html" rel="noopener ugc nofollow" target="_blank"><em class="nd">https://manichord.com</em></a><em class="nd">。</em></p></div></div>    
</body>
</html>