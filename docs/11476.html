<html>
<head>
<title>What is Multi-Column Index, Anyway?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">到底什么是多列索引？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-multi-column-index-anyway-aeba67b86a02?source=collection_archive---------8-----------------------#2022-03-23">https://betterprogramming.pub/what-is-multi-column-index-anyway-aeba67b86a02?source=collection_archive---------8-----------------------#2022-03-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="506b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你不知道的关于数据库索引的一切</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7cf86d829a1919edbf2825ff28b828bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*amnUeKdTqTm0UqJXGlIU8w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/s/photos/bookmark?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@elisa_cb?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">伊莉莎·卡尔韦·b .</a>拍摄</p></figure><p id="e5d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据库索引是一个强大的概念，它通过增加存储空间来提高检索信息的速度。如果某个参数的数据需要频繁访问，那么就应该为该参数添加一个索引。如果你对索引是如何工作的感到好奇，我邀请你看看我的文章，我在那里很好地讨论了这个话题。</p><div class="lv lw gp gr lx ly"><a rel="noopener  ugc nofollow" target="_blank" href="/how-database-indexing-actually-works-ba6e19e75169"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">数据库索引的实际工作方式</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">一个强大概念的简要概述</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">better编程. pub</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="97bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将探索数据库中更高级的索引概念——多列索引。这是什么，什么时候用？</p><h1 id="b969" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">这个想法</h1><p id="35c4" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">多列索引的想法很简单。它使用几列的复合键来缓存数据。密钥变成N维的。它不一定只包含两列。我们可以根据需要让它变得复杂。</p><p id="fe15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用多列索引最常见的例子是包含一些位置数据的表。下表显示了待售房屋的地址、坐标和价格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/c4eafd7d360b66ae7e8135ac4fa73c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKdU6I_xUSlqF5UMkXmIOQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有房价的桌子</p></figure><p id="302c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的例子中，如果我们想要查询特定位置半径的条目，我们将需要考虑纬度和经度。查询将如下所示。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="935a" class="nq mo it nm b gy nr ns l nt nu">SELECT * FROM houses WHERE longitude &gt; 49.9 AND longitude &lt; 50.0<br/>                       AND latitude &gt; 36.0 AND latitude &lt; 36.3</span></pre><p id="12e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在很大程度上，这个查询会变慢。为了加速请求，位置坐标必须添加到索引中。但是它们在两个独立的列中。因此，我们必须将纬度和经度一起用作关键字。将多列索引引入该表将显著改善查询。</p><h1 id="a614" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">深刻的细节</h1><p id="62c8" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">一般来说，当条件在几个参数的特定范围内时，多列索引对于关系数据库中的查询是理想的。支持该技术的底层数据结构可以保持与简单索引相同(例如B树、块范围索引、搜索树)。一些数据库引擎利用一个专用的结构<a class="ae ky" href="https://en.wikipedia.org/wiki/R-tree" rel="noopener ugc nofollow" target="_blank"> R树</a>专门用于这个目的。</p><p id="8558" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">多列索引还有另一个用例。数据库中表的主要特征是表之间有关系。例如，包含公司部门的表引用包含雇员数据的表。每个部门可以有多名员工。这是一种“一对多”的关系。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="7494" class="nq mo it nm b gy nr ns l nt nu">SELECT * FROM departments WHERE employee_id = 10</span></pre><p id="a117" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们运行上面的查询，我们在开发环境中不会遇到任何问题。但是当我们在高负载的生产环境中执行它时，我们将面临性能降级。一个大公司可能有数千个部门和更多的员工，因此数据库中有大量的条目。如何应对这种局限？</p><p id="74e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方案是给源表中的外键添加一个索引。在我们的例子中，我们需要为列<code class="fe nv nw nx nm b">employee_id</code>添加一个索引，作为外键。这里的索引键是复合的，因为它由<code class="fe nv nw nx nm b">departments.id</code>和<code class="fe nv nw nx nm b">employee_id</code>组成。使用这种方法，加载互联数据将会更快。</p><p id="0e07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当存在来自相关表的条件时，对具有关系的表建立多列索引可以提高查询的性能。在级联删除或更新操作的情况下，性能也会提高。这样一个简单的技巧可以极大地改变应用程序的速度。</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><h1 id="e26a" class="mn mo it bd mp mq of ms mt mu og mw mx jz oh ka mz kc oi kd nb kf oj kg nd ne bi translated">外卖食品</h1><p id="f4f8" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">多列索引并不是一项新技术。简单索引已经有一段时间了。然而，它提高了所有现代数据库和应用程序的效率。它作为一个众所周知的电话簿，用名字和姓氏来检索号码。软件工程师能够成功地将这个概念应用到数据存储层。</p></div></div>    
</body>
</html>