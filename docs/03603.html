<html>
<head>
<title>How to Build a Counter Using Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Redux构建计数器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-make-a-counter-using-redux-3e6630871524?source=collection_archive---------11-----------------------#2020-02-20">https://betterprogramming.pub/how-to-make-a-counter-using-redux-3e6630871524?source=collection_archive---------11-----------------------#2020-02-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="31f1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过制作一个小小的计数app来学习Redux的基础知识</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d8d5b37119775d6007899776b5a177aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Fe5wIof7HAj-GMBrnD6oA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由克里斯·贾维斯在<a class="ae kv" href="https://unsplash.com/s/photos/counting?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f6b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个关于如何使用Redux实现递增/递减计数器的教程。</p><p id="ea52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于本教程，了解以下基本知识会有所帮助:</p><ul class=""><li id="0076" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">java描述语言</li><li id="9142" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">反应</li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="b1ff" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">Redux到底是什么？</h1><p id="710f" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">Redux是管理状态的各种代码库的状态容器。在这种情况下，我们将它与React一起使用。就是否在您的应用程序中实现它而言，这更像是一个选择的问题。我刚刚开始了解Redux，并考虑在我正在从事的一个项目中实现它。我花了很长时间才理解它(理解，我的意思是理解它的30%)。我想过开发一个小应用来帮助我掌握基础知识，因为练习是学习新东西的关键。</p><p id="a52b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我通过运行命令<code class="fe nk nl nm nn b">npm install -g create-react-app my-project-client</code>和安装两个Redux包<code class="fe nk nl nm nn b">npm i redux &amp;&amp; npm i react-redux</code>开始创建我的应用程序。完成所有这些后，运行<code class="fe nk nl nm nn b">npm i &amp;&amp; npm start</code>，它将安装所有其他必需的包并启动您的服务器。</p><p id="572d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你的应用框架已经构建好了，我们可以开始编码了！</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="dda7" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">建一个柜台</h1><p id="b146" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">我首先在我的<code class="fe nk nl nm nn b">src</code>文件夹中创建一个Redux文件夹，并创建了两个名为<code class="fe nk nl nm nn b">actions.js</code>和<code class="fe nk nl nm nn b">reducers.js</code>的文件。接下来，我将<code class="fe nk nl nm nn b">createStore()</code>函数导入到我的<code class="fe nk nl nm nn b">index.js</code>文件中。<code class="fe nk nl nm nn b">createStore()</code>是Redux给你的一个函数。当它被调用时，它返回Redux存储的一个<em class="no">实例</em>。</p><pre class="kg kh ki kj gt np nn nq nr aw ns bi"><span id="6340" class="nt mo iq nn b gy nu nv l nw nx">import { createStore } from 'redux'</span></pre><p id="a70b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">酷！现在<code class="fe nk nl nm nn b">index.js</code>知道了<code class="fe nk nl nm nn b">createStore()</code>，我们必须创建一个名为<code class="fe nk nl nm nn b">store</code>的变量，并将其设置为等于<code class="fe nk nl nm nn b">createStore()</code>函数。第一个参数<code class="fe nk nl nm nn b">createStore()</code>是一个reducer函数，所以在括号内，我们将传入一个我们还没有编写的函数，名为<code class="fe nk nl nm nn b">reducerFunc()</code>，我们也必须在页面顶部导入它。</p><p id="5993" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来我们要导入的是<code class="fe nk nl nm nn b">{ Provider } from 'react-redux</code>。<code class="fe nk nl nm nn b">Provider</code>用于将道具发送给包装在<code class="fe nk nl nm nn b">connect()</code>函数中的其他组件，我们稍后会讲到。我们将把store变量作为道具传递给我们的应用程序，因为大多数功能都将在那里发生。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="05da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经成功创建了商店，让我们创建一些操作。Redux中的一个<code class="fe nk nl nm nn b">action</code>对象描述了它将如何操纵状态。在本例中，我们制作了两个按钮，用于增加和减少页面上显示的数字(我们的计数器)。因此，将两个动作定义为增量和减量是有意义的，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="a1fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太棒了。现在我们已经设置好了我们的动作，我们可以编写我们的reducer函数了。reducer函数接受两个参数，前一个状态和动作。我们建立<code class="fe nk nl nm nn b">reducerFunc()</code>的方式是有条件的。我们将实现一个switch语句，因为switch语句有默认值，所以如果不满足任何条件，将总是返回一个默认值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="dac8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个语句是说“嘿，如果这个动作的类型键等于<code class="fe nk nl nm nn b">'INCREMENT'</code>，那么增加我的状态的值，如果是<code class="fe nk nl nm nn b">'DECREMENt'</code>，那么减少我的状态的值。如果这两个条件都不满足，就返回我现在的状态。”如果这很难理解，那也没关系。我将在下面加入一些链接，这些链接更深入地探讨了动作、减少器等概念的含义和用法。我们已经成功了一半！</p><p id="c6b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们转到我们的<code class="fe nk nl nm nn b">App.js</code>文件，并导入我们之前提到的<code class="fe nk nl nm nn b">connect()</code>函数。<code class="fe nk nl nm nn b">connect()</code>是由<code class="fe nk nl nm nn b">'react-redux'</code>提供的一个函数，它将您的状态连接到您正在导入<code class="fe nk nl nm nn b">connect()</code>的组件。我们还应该<code class="fe nk nl nm nn b">console.log(props)</code>看看目前我们的道具是什么。在创建这个应用程序的最开始，我们使用<code class="fe nk nl nm nn b">Provider</code>将<code class="fe nk nl nm nn b">store</code>作为道具发送给<code class="fe nk nl nm nn b">App.js</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="3249" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在浏览器中进入控制台(cmd + opt +j)，您应该会看到以下内容:</p><pre class="kg kh ki kj gt np nn nq nr aw ns bi"><span id="ed93" class="nt mo iq nn b gy nu nv l nw nx">{store: {…}, dispatch: ƒ}</span></pre><p id="c891" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">酷，所以我们的店在传承，我们的派单也在传承，但是我们的州在哪里？为了将我们的状态传递下去，我们需要实现一个函数，这个函数由<code class="fe nk nl nm nn b">connect</code>提供，名为<code class="fe nk nl nm nn b">mapStateToProps()</code>，也是<code class="fe nk nl nm nn b">connect()</code>接受的第一个参数。您可以给这个函数起任何名字，但是为了清楚起见，我坚持使用<code class="fe nk nl nm nn b">mapStateToProps()</code>。这个函数的主要目的是返回我们的状态。在我们写完函数后，我们把它传入<code class="fe nk nl nm nn b">connect()</code>，这样它就和<code class="fe nk nl nm nn b">App.js</code>连接了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="90f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们现在在控制台中检查我们的道具，我们的<code class="fe nk nl nm nn b">count</code>应该已经被添加了！我们现在可以在<code class="fe nk nl nm nn b">App.js</code>中访问我们的状态。因为我们在应用程序中使用了按钮功能，所以让我们将它们添加到我们的返回中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="c607" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">两个按钮都有一个<code class="fe nk nl nm nn b">onClick</code>事件，这两个事件都指向两个我们还没有写的不同函数，一个用于处理增量，一个用于减量。它们上面也有文字说明哪个按钮做什么。我们的函数应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="71c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于我们的应用程序是一个函数组件，我们必须将函数声明为变量。两者都有一个<code class="fe nk nl nm nn b">props.dispatch({})</code>功能。<code class="fe nk nl nm nn b">dispatch() </code>分派动作并从<code class="fe nk nl nm nn b">reducerFunc()</code>中触发状态的变化，所以这两个函数都触发对我们的计数器进行的不同的变化。您的成品应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi gj"><img src="../Images/8c7dac4546611229a4e13bb2116361c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QdqRo58iNliC12KH90fV_A.gif"/></div></div></figure><p id="d947" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你！您已经使用Redux成功构建了一个计数器。如果你愿意，可以查看一下GitHub repo 。</p><p id="5912" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码快乐！</p><div class="oa ob gp gr oc od"><a href="https://redux.js.org/introduction/getting-started" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">为JS应用程序还原一个可预测的状态容器</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Redux是JavaScript应用程序的可预测状态容器。它帮助您编写行为一致的应用程序…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">redux.js.org</p></div></div><div class="om l"><div class="on l oo op oq om or kp od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://www.sohamkamani.com/blog/2017/03/31/react-redux-connect-explained/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">React-redux“连接”解释🔗</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Redux是一个非常简单的状态管理库，它使得使用React对每个人来说都更容易管理…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">www.sohamkamani.com</p></div></div><div class="om l"><div class="os l oo op oq om or kp od"/></div></div></a></div></div></div>    
</body>
</html>