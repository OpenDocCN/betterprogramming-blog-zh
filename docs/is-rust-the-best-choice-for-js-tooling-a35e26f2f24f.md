# Rust 是 JavaScript 工具的最佳选择吗？

> 原文：<https://betterprogramming.pub/is-rust-the-best-choice-for-js-tooling-a35e26f2f24f>

## 还是有更好的替代方案？

![](img/12db8e16c69907397cba051b1490e0e4.png)

谢尔盖·佐尔金在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

虽然 Rust 是一门伟大的语言，但它和所有语言一样，适合某些用途，但不适合其他用途。

专注于成为一种系统编程语言和比 C/C++更安全的语言意味着 Rust 做出了权衡，使其成为系统编程任务的最佳选择。但是最近我注意到似乎有一些的[推动](https://leerob.io/blog/rust) [使其成为编写 JS 工具的首选工具，而不是使用 JS 本身(通过 NodeJS)。](https://rome.tools/blog/2021/09/21/rome-will-be-rewritten-in-rust)

但是，当你处于为 JS 生态系统创建一个新工具的位置时，Rust 真的是最好的选择吗？而且是除了 Node 之外唯一可行的选择吗？在本文中，我想提出一种替代方案，并论证考虑同时使用 JS 和 Rust。

# 大揭秘

那么，我提议的替代方案是什么？嗯，发现是[镖](https://dart.dev)大概也不算什么惊喜吧。

但是为什么我认为 Dart 是在 JS 之上编写 JS 工具的一个很好的选择，更重要的是 Rust？

好吧，让我们来看看人们使用或提议使用 Rust 而不是 JS 的一些原因…

# JS 工具生锈

以下是我看到的一些关于 Rust 为什么是 JS 工具的好选择的论点:

*   生产率
*   更好的依赖性
*   没有 Garabage 集合(GC)
*   高/广泛采用
*   性能:编译代码小，执行速度快，启动时间快

但是，如果我们更仔细地研究这些，上面的一些伴随着令人不安的警告。对于生产力，支持者认为 JS 开发人员跟上 Rust 的速度并不困难，但是我不得不严肃地质疑这一点。

就我个人而言，到目前为止，我发现我学习 Rust 的旅程很不容易，我不仅有 JS 方面的背景，还有几种 GC、静态类型语言(Java、Kotlin、Dart)方面的背景，以及(最近)使用 C 和进行一些系统级编程的背景。Rust 对于 JS 开发人员来说，无论是从语法上，还是更重要的是从语义上来说，都太大、太复杂，与一门语言完全不同。

虽然其中一篇文章指出 Rust 比通常与 NodeJS 的集成更好，另一篇文章谈到 Rust crates 做出的权衡，但还不清楚 Rust package 生态系统给这个用例带来了什么好处。

与此同时，Rusts 使用其独特的“所有权”内存管理系统相对于 GC 的优势确实非常值得怀疑，因为我们正在讨论的工具大部分是作为一次性进程而不是长期进程运行的，并且不像音频 DSP 工具或游戏这样的用例那样对时间和延迟敏感。

虽然上面使用的“单次”与长期进程确实突出了 Rust 在 AOT 编译为本机可执行文件方面带来的巨大好处，从而显著改善了冷启动时间和执行速度，而基于 JIT 的 NodeJS 可能会遇到困难，因为 JIT 没有足够的运行时间来优化正在运行的工具。

当然，Rust 能够为所有主要平台编译小的、**独立的**可执行文件的能力在这里大放异彩，尽管老实说，鉴于 NodeJS 安装得如此广泛和容易，还不清楚这对于 *JS* 工具相对于其他领域的优势有多大。

最后，Rust 的广泛使用和快速增长，这无疑使它成为了业界的主流语言——因此，在不确定的将来，它还会继续存在。

# JS 工具的省道

那么与 Rust 和 JS 相比，Dart 在这方面能提供什么呢？

首先:生产力。

虽然与 JS 明显不同，但 Dart 的设计(现在仍在维护)非常注重让来自其他类似 C 语言、*尤其是* JS 的开发人员更容易学习这种语言，因为它最初的目标是成为 JS 的浏览器内替代品。我可以非常自信地说，对于 JS 开发人员来说，Dart 比 Rust 更容易学习。 [Flutter 文档甚至有一个专门的章节](https://docs.flutter.dev/get-started/flutter-for/react-native-devs#introduction-to-dart-for-javascript-developers)专门针对这个主题！

同样，由于其最初的(现在已经放弃的)目标是在浏览器中取代 JS，Dart 还拥有一个优秀的 JS 互操作以及两个 Dart 到 JS 的交叉编译器。鉴于此，Dart 在浏览器中也有着重要的使用历史、社区和生态系统。

回顾我之前提到的 JS 工具需要针对短时间运行、快速启动和执行时间进行优化的观点，Dart 能够(就像 Rust 一样)被 AOT 编译为适用于所有主流平台(x64 和 Arm 架构)的“小型”静态链接的独立本机可执行文件，这与 Rust 非常匹配，尽管我必须承认，我还没有真正看到任何针对 JS 工具需要执行的编译/处理任务类型的执行吞吐量的比较基准。

就采用而言，虽然 Dart 在 CLI 工具中的使用并不显著，但 SASS 编译器项目对 Dart 的使用非常突出，这表明 Dart 在 web 开发相关工具方面的生产准备就绪。

Dart 是该工具和巨大成功的 Flutter 的基础，Dart 的长期前景看起来非常乐观。

# 结论

虽然 Rust 确实比使用 JS 作为 JS 工具有一些优势，但我仍然怀疑它给这个**非常具体的用例**带来了多少优势而不是代价。

在这种情况下，我相信 Dart 带来了许多相同的好处，也许没有那么多的权衡，对于任何从头开始编写的 JS 工具或者决定将 JS 转移到另一种语言的 JS 工具，它绝对值得考虑使用。

当然，以上所述绝不应该被看作是贬低铁锈在许多其他用途和领域中的重要性、高质量和有用性。我肯定还会花时间学习它，并在许多即将到来的项目中使用它，包括 Flutter 应用程序、嵌入式和微控制器项目。

最后，我还推荐阅读【Axel Rauschmayer 博士关于用非 JS 语言编写 JS 工具这一新兴趋势的利弊的思考

我希望这对你有所帮助，如果有或者你有任何其他方便的技巧可以分享，请通过 [Twitter](https://twitter.com/mklin) 让我知道。

*最初发表于*[*https://manichord.com*](https://manichord.com/blog/posts/why-dart-not-rust-for-js-tools.html)*。*