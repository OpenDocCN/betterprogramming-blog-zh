<html>
<head>
<title>Plan Your Holiday With Python and HERE Maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和此处的地图规划您的假期</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/plan-your-holiday-with-python-and-here-maps-aaeeaf9580c3?source=collection_archive---------8-----------------------#2021-07-05">https://betterprogramming.pub/plan-your-holiday-with-python-and-here-maps-aaeeaf9580c3?source=collection_archive---------8-----------------------#2021-07-05</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="8672" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何创建自己的地图来可视化您想去的地方</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/fecf46c539393e26d32e7e7157e075e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U6LAOXVc9zxbUtsh"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@dead____artist?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">捕捉人心。</a>开<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">退溅</a>。</p></figure><p id="8fa2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">夏天终于来了。你想去旅行吗？这篇文章可以帮助你进行规划。</p><p id="6871" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">网上有很多旅游指南，你可以从中找到一个城市的主要景点。你可以下载一张地图，按照建议去做。但是如果你有一个喜欢的话题，想去某些地方参观呢？</p><p id="2237" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本教程中，我们将看到如何创建自己的地图，并标记出我们想去的地方。这样，你就可以更容易地组织你的生活，因为你可以在地图上看到这些地方。例如，你可以把最好的啤酒厂、糖果店、艺术博物馆等聚集在一起。</p><p id="f594" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们开始吧！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="040f" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">准备项目</h1><h2 id="487a" class="mv me iu bd mf mw mx dn mj my mz dp mn lj na nb mp ln nc nd mr lr ne nf mt ng bi translated">收集一份有趣地方的清单</h2><p id="90d5" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">首先，我们来选择一个旅行目的地。在这个例子中，我随机选择了伦敦。酒吧将是我们感兴趣的话题，所以我收集了一份最佳酒吧的清单。</p><h2 id="ddbc" class="mv me iu bd mf mw mx dn mj my mz dp mn lj na nb mp ln nc nd mr lr ne nf mt ng bi translated">准备坐标</h2><p id="9184" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">现在，我们有一个酒吧名字的列表。我将使用<a class="ae kz" href="https://pypi.org/project/geopy/" rel="noopener ugc nofollow" target="_blank"> geopy </a> Python库来检测坐标。</p><p id="c191" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用<code class="fe nm nn no np b">pip</code>或<code class="fe nm nn no np b">pip3</code>安装库:</p><pre class="kk kl km kn gu nq np nr ns aw nt bi"><span id="f8dc" class="mv me iu np b gz nu nv l nw nx">pip install geopy</span></pre><p id="7359" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是如何获得指定位置的纬度和经度:</p><pre class="kk kl km kn gu nq np nr ns aw nt bi"><span id="28de" class="mv me iu np b gz nu nv l nw nx">geolocator = Nominatim(user_agent="your_app_name")<br/>location = geolocator.geocode("London")<br/>print((location.latitude, location.longitude))</span><span id="1e7f" class="mv me iu np b gz ny nv l nw nx"><strong class="np iv">(51.5073219, -0.1276474)</strong></span></pre><h2 id="8a13" class="mv me iu bd mf mw mx dn mj my mz dp mn lj na nb mp ln nc nd mr lr ne nf mt ng bi translated">在地图上标出位置</h2><p id="095e" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">现在我们有了坐标，想把它们钉在地图上。您可以使用<a class="ae kz" href="https://developers.google.com/maps" rel="noopener ugc nofollow" target="_blank"> Google Maps API </a>和<a class="ae kz" href="https://pypi.org/project/gmplot/" rel="noopener ugc nofollow" target="_blank"> gmplot </a> Python库来绘制地图。但是由于这个API不是免费的，所以我要给你看一个替代品:这里的<a class="ae kz" href="https://developer.here.com/" rel="noopener ugc nofollow" target="_blank">API</a>。</p><p id="c0bd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">HERE API是一个免费的增值工具，可以让您创建自定义地图、可视化位置数据集等等。你可以选择一个免费的计划，每天有多达25万笔交易，这对于业余爱好项目来说应该足够了。</p><p id="1a6d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您需要设置一个API密钥才能使用HERE定位服务。按照这些<a class="ae kz" href="https://developer.here.com/tutorials/getting-here-credentials/" rel="noopener ugc nofollow" target="_blank">指令</a>生成您的密钥。</p><p id="f8fd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将使用JavaScript的<a class="ae kz" href="https://developer.here.com/documentation/maps/3.1.25.0/dev_guide/index.html" rel="noopener ugc nofollow" target="_blank">HERE Maps API</a>来创建我们的地图。为了将接口与Python集成，我们将使用<a class="ae kz" href="https://pypi.org/project/Flask/" rel="noopener ugc nofollow" target="_blank"> Flask </a>。这是一个用于创建web项目的简单而强大的框架。</p><p id="e44a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">安装烧瓶:</p><pre class="kk kl km kn gu nq np nr ns aw nt bi"><span id="b69c" class="mv me iu np b gz nu nv l nw nx">pip install Flask</span></pre><p id="b91e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">创建一个新的Python文件来构建一个简单的烧瓶模板:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><ul class=""><li id="d148" class="ob oc iu lc b ld le lg lh lj od ln oe lr of lv og oh oi oj bi translated">我们已经导入了必要的Flask和geopy库。</li><li id="e8f5" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">我们已经定义了一个基本函数，它将基于一个<code class="fe nm nn no np b">map.html</code>文件呈现一个模板。我们将很快创建它。</li><li id="7a20" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">我们已经创建了一个酒吧位置列表，并在字典中提取了纬度和经度。请注意，我只使用了地名，但你也可以写下确切的地址。</li><li id="134a" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">我们已经从Python向JavaScript代码传递了<code class="fe nm nn no np b">city</code>和<code class="fe nm nn no np b">coordinates</code>变量。通过将它们放入<code class="fe nm nn no np b">{{}}</code>括号中，您可以在HTML或JavaScript代码中引用它们。</li></ul><p id="b38a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在让我们为浏览器中的地图渲染创建HTML文件。</p><p id="3968" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Flask需要一个名为<code class="fe nm nn no np b">templates</code>的文件夹。在文件夹中创建一个<code class="fe nm nn no np b">map.html</code>文件。</p><p id="8843" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">代码如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><ul class=""><li id="4a30" class="ob oc iu lc b ld le lg lh lj od ln oe lr of lv og oh oi oj bi translated">我们已经从<code class="fe nm nn no np b">js.api.here</code>导入了必要的脚本。</li><li id="f979" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">用你的替换<code class="fe nm nn no np b">apikey</code>。</li><li id="a98f" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">我们已经绘制了一张以伦敦为中心的地图。注意，我们通过调用<code class="fe nm nn no np b">{{ city.latitude}}, {{ city.longitude }}</code>来访问Python代码传递的坐标。</li><li id="4591" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">为了确保地图占据整个容器，我们添加了<code class="fe nm nn no np b">addAventListener('resize')</code>。</li><li id="0c3f" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">我们遍历<code class="fe nm nn no np b">{{ coordinates }}</code>值，从纬度和经度值创建一个新的<code class="fe nm nn no np b">H.map.Marker</code>对象。</li><li id="39f6" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">最后，我们将所有标记添加到地图上。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="5470" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">测试项目</h1><p id="fab8" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">是时候运行我们的项目了。通过运行Python代码启动程序:</p><pre class="kk kl km kn gu nq np nr ns aw nt bi"><span id="7d7b" class="mv me iu np b gz nu nv l nw nx">python3 map_runner.py</span></pre><p id="27e1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在<code class="fe nm nn no np b"><a class="ae kz" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/</a></code>上打开浏览器。你应该看到你的自定义地图。您可以点击标记进行放大，并使用触摸板进行放大/缩小。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj op"><img src="../Images/cb93b725affdc7c4c569547227438435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*zMAEJY9XsyPb3Cm82E0OOw.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">带标记的地图</p></figure><h2 id="3a91" class="mv me iu bd mf mw mx dn mj my mz dp mn lj na nb mp ln nc nd mr lr ne nf mt ng bi translated">升级地图</h2><p id="61bd" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">想让这更有趣吗？让我们给标记添加一些自定义图标。我找到了一个合适的免费图标，更新了这部分代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nz oa l"/></div></figure><p id="28c3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">美化后，我们的地图看起来是这样的:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oq"><img src="../Images/8e611e2da5c7ebd7e6e9b00013b63c19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*IVDm1FtC_fYeVnT9ugFWZw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">带有自定义图标的地图</p></figure><p id="92e4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太好了！现在我们有了计划。当然，您可以稍微修改代码以包含更多感兴趣的主题，并将所有内容可视化在一张地图上。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="a7c8" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">如何使地图便于携带</h1><p id="162b" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">以下是几个可以尝试的选项:</p><ul class=""><li id="f62c" class="ob oc iu lc b ld le lg lh lj od ln oe lr of lv og oh oi oj bi translated">图截图。</li><li id="49e7" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">将代码部署到您的服务器，并通过您的电话或笔记本电脑访问它。</li><li id="8cdf" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated">例如，通过使用AWS将代码部署到云中。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="6549" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="59bc" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">在本教程中，您学习了如何在自己的自定义地图上创建标记。您看到了使用geopy库获得坐标是多么容易。</p><p id="e62f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们只是触及了HERE Map API的皮毛。你可以用它实现更多。查看<a class="ae kz" href="https://developer.here.com/documentation/examples/maps-js" rel="noopener ugc nofollow" target="_blank">文档</a>获取更多示例。</p><p id="e0a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您还看到了如何使用Flask框架创建一个简单的web项目。你可以在这篇由<a class="or os ep" href="https://medium.com/u/c4e35395b2b7?source=post_page-----aaeeaf9580c3--------------------------------" rel="noopener" target="_blank">hemanthari 2000</a>撰写的<a class="ae kz" href="https://medium.com/featurepreneur/introduction-to-micro-web-framework-flask-78de9289270b" rel="noopener">文章</a>中了解更多的基础知识。</p><p id="70e8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">希望这篇文章能帮你规划下一个假期。欢迎在评论中分享你最想去的地方。</p><p id="1dca" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢您的阅读和快乐编码！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="5590" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">参考</h1><ul class=""><li id="c373" class="ob oc iu lc b ld nh lg ni lj ot ln ou lr ov lv og oh oi oj bi translated"><a class="ae kz" href="https://pypi.org/project/geopy/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/geopy/</a></li><li id="8987" class="ob oc iu lc b ld ok lg ol lj om ln on lr oo lv og oh oi oj bi translated"><a class="ae kz" href="https://developer.here.com/documentation/examples/maps-js/markers/markers-on-the-map" rel="noopener ugc nofollow" target="_blank">https://developer . here . com/documentation/examples/maps-js/markers/markers-on-the-map</a></li></ul></div></div>    
</body>
</html>