<html>
<head>
<title>Frontend development sounds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">前端开发声音</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/frontend-development-sounds-9fe7e5839ab9?source=collection_archive---------6-----------------------#2020-06-29">https://betterprogramming.pub/frontend-development-sounds-9fe7e5839ab9?source=collection_archive---------6-----------------------#2020-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="735b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">网络音频API、Tone.js和Angular trio </strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/74dfe27cb062ba81ac47fe974fe90c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OKRlisO2Fp3lZ0fq"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@htroupe?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">汉娜剧团</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="c5f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们非常习惯于用代码生成视觉效果，但当听说我们可以用同样的方式创作音乐时，我们常常会感到惊讶。哦，你不知道吗？你并不孤单。尽管音乐编程的概念肯定比我们所有人都要古老，但这个概念对许多开发者来说仍然相当陌生。让我们来看看web应用程序中的音乐编码。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d1c4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated"><strong class="ak">网络音频API </strong></h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/8b0148942908ab0511ab348c770c3d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-vKEyIPglrZQGrL5aQgyxQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">网络上音频可能性的演变(修改过的<a class="ae kv" href="https://devrant.com/rants/495927/web-sound-evolution" rel="noopener ugc nofollow" target="_blank">开发者</a>照片)。</p></figure><p id="adc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们看看网络上音频可能性的演变，它提醒我们在相当长的一段时间里我们有不同的处理音频的方式。如今，最复杂的方法是使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" rel="noopener ugc nofollow" target="_blank">网络音频API </a>。</p><blockquote class="ms mt mu"><p id="0aa6" class="kw kx mv ky b kz la jr lb lc ld ju le mw lg lh li mx lk ll lm my lo lp lq lr ij bi translated">“Web Audio API有光剑，肯定是这个API有什么特别的地方，但是是什么呢？”</p></blockquote><p id="e911" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Web Audio API不仅使我们能够播放、重放或停止音轨，还能创建、修改和分析我们自己的声音。简单来说，它使我们能够将浏览器用作合成器！</p><p id="2e6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它是如何工作的？对于每个web应用程序，我们需要创建一个<code class="fe mz na nb nc b">AudioContext</code>来存储音频状态。使用<code class="fe mz na nb nc b">AudioContext</code>，我们可以创建一个声源(如音轨、生成的振荡器、麦克风)并将其连接到输出声音的目的地。</p><blockquote class="ms mt mu"><p id="cec1" class="kw kx mv ky b kz la jr lb lc ld ju le mw lg lh li mx lk ll lm my lo lp lq lr ij bi translated">人们经常问我，“劳拉，我们怎么能仅仅从我们的浏览器控制台创造声音呢？”</p></blockquote><p id="6190" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧…从来没有人问过我这个问题，但我还是准备了一个答案:</p><ol class=""><li id="2ff7" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">创造一个新的<code class="fe mz na nb nc b">AudioContext</code>。</li><li id="057a" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">连接源和目标。</li><li id="9e31" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">让你的浏览器唱歌吧！</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/90bed0ca526e7999dc04992cef6d9382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wpy653wFBdviDWj7RO5dqg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从浏览器控制台创建正弦振荡器声音。</p></figure><p id="b1a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">播放哔哔声很容易，但使用普通Web音频API添加更多乐器和播放一些不同的旋律可能有点棘手。众所周知，前端开发人员喜欢库。因此，Web Audio API有助手库也就不足为奇了。其中一个是<a class="ae kv" href="https://tonejs.github.io/" rel="noopener ugc nofollow" target="_blank"> Tone.js </a>，推荐在Web Audio API的MDN文档中使用。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a80c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">Tone.js带棱角</h1><p id="008d" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">我们如何使用Tone.js在web上创建声音甚至复杂的音乐？我将使用Angular应用程序展示一个分步示例。今天我们要创造自己的乐器！</p><h2 id="444a" class="nx ma iq bd mb ny nz dn mf oa ob dp mj lf oc od ml lj oe of mn ln og oh mp oi bi translated">应用程序设置</h2><p id="23b9" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">使用<a class="ae kv" href="https://cli.angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular CLI </a>创建新的Angular应用程序:</p><pre class="kg kh ki kj gt oj nc ok ol aw om bi"><span id="53a5" class="nx ma iq nc b gy on oo l op oq">npm install -g @angular/cli<br/>ng new best-app-i-ever-created-in-my-life</span></pre><p id="6ece" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装Tone.js:</p><pre class="kg kh ki kj gt oj nc ok ol aw om bi"><span id="d4b3" class="nx ma iq nc b gy on oo l op oq">cd best-app-i-ever-created-in-my-life<br/>npm install tone</span></pre><p id="2b7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为您的乐器生成一个单独的组件:</p><pre class="kg kh ki kj gt oj nc ok ol aw om bi"><span id="d6a3" class="nx ma iq nc b gy on oo l op oq">ng generate component instrument</span></pre><p id="83d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将乐器组件嵌入到应用程序组件模板:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="7ee2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用以下方式构建和服务您的应用程序:</p><pre class="kg kh ki kj gt oj nc ok ol aw om bi"><span id="f8c5" class="nx ma iq nc b gy on oo l op oq">ng serve</span></pre><h2 id="3ce6" class="nx ma iq bd mb ny nz dn mf oa ob dp mj lf oc od ml lj oe of mn ln og oh mp oi bi translated"><strong class="ak">基础仪器</strong></h2><p id="a708" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">让我们从创建一个使用默认合成器声音的基本乐器开始。首先，在组件初始化期间，使用Tone.js中的<code class="fe mz na nb nc b">Synth</code>元素创建一个合成器，并将其连接到主输出。然后添加您的乐器能够演奏的音符列表。我用字母符号来描述音符:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="fcc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在是时候创建我们的仪器UI了。在乐器模板中，通过硬编码的音符列表添加迭代。每个按钮代表一个不同的音高音符，点击事件会触发长度为1/8的合成器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="a8dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊。用这几行代码，我们创造了一种能够演奏全方位声音的乐器。但我们不会就此止步！目前，我们使用默认的合成器声音。我们给它加点独特的味道吧。</p><h2 id="b710" class="nx ma iq bd mb ny nz dn mf oa ob dp mj lf oc od ml lj oe of mn ln og oh mp oi bi translated"><strong class="ak">卡蒂亚诺仪器</strong></h2><p id="2451" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">让我们使用Tone.js的另一个重要元素—采样器。它有助于创建基于音轨的乐器。对于采样器的初始化，我们需要提供一个音轨，并将其映射到正确的音高音符。经过一番彻底的研究，我发现了这个惊人的实验材料:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot os l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">声音云上的猫样本<a class="ae kv" href="https://soundcloud.com/laura-silvanavi/cat-sample" rel="noopener ugc nofollow" target="_blank">。</a></p></figure><p id="5481" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最难的部分来了。这只猫在唱(或说)什么音？我决定坚持G2的注意:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="5890" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仅此而已！老实说，我感到惊讶的是，我不需要修改原始样本，也不需要为每个笔记手动创建额外的样本。Tone.js根据我们在采样器初始化期间提供的映射调整了所有其他音符。我刚刚修改了我创建的采样器音量，因为原来的猫样本有点太大声了。现在我们可以把采样器和合成器结合起来。</p><p id="a87b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你对“生日快乐”这首歌在卡蒂亚诺听起来如何感兴趣吗？如果没有，对不起，但我还是要给你看:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot os l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">“<a class="ae kv" href="https://soundcloud.com/laura-silvanavi/happy-birthday-on-catiano-instrument" rel="noopener ugc nofollow" target="_blank">生日快乐</a>”卡蒂亚诺乐器上的歌声。</p></figure><p id="83e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你们中的一些人可能会想，“一种猫的声音乐器。很有用……不是。”但是不要过早的评价我，因为我做了额外的努力，在下一部分创造了一些不同的东西！</p><h2 id="daa1" class="nx ma iq bd mb ny nz dn mf oa ob dp mj lf oc od ml lj oe of mn ln og oh mp oi bi translated"><strong class="ak">多吉亚诺仪器</strong></h2><p id="f099" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">准备好——这将会让你大吃一惊。我们也可以有一个使用狗样本的仪器！玩笑归玩笑，Tone.js中还有许多其他元素可供我们使用，从带有附加参数的不同种类的合成器开始。这里，我使用基于<code class="fe mz na nb nc b">Square</code>振荡器的<code class="fe mz na nb nc b">Polysynth</code>元素:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="6fc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb nc b">Part</code>元素在开始时可能看起来有点复杂，但简而言之，它有助于用创建的乐器演奏预定义的旋律。例如，注册演奏相同<code class="fe mz na nb nc b">Part</code>旋律的吉他和钢琴可以作为一个单元开始、停止或循环。我创建了2个<code class="fe mz na nb nc b">Parts</code><em class="mv"/>——一个用于旋律，一个用于低音:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="99a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和弦音符从下面添加的<code class="fe mz na nb nc b">constants</code>文件导入。为了描述旋律，每个音符都应该与一个名为<code class="fe mz na nb nc b">Tone.Transport</code>的主计时器同步。它允许源、信号和事件沿着共享的时间线同步。时间可以用<a class="ae kv" href="https://github.com/Tonejs/Tone.js/wiki/Time" rel="noopener ugc nofollow" target="_blank">数字、符号、传输时间、频率、现在相对或刻度形式</a>编码。我用了最后一个选项。坦白地说，这很痛苦:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="f320" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb nc b">Noise</code>！这是另一个可以用作工具的元素。带有自动滤镜的粉红色噪波创建了海浪效果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="15b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回归基础。我们可以使用<code class="fe mz na nb nc b">Player</code> <em class="mv"> </em>元素来播放音轨。我准备了许多不同的随机播放的马里奥样本:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="48fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，可以用<code class="fe mz na nb nc b"><a class="ae kv" href="https://github.com/Tonejs/Tone.js/wiki/Transport" rel="noopener ugc nofollow" target="_blank">Transport</a></code>属性修改所有预定的旋律。这就是每分钟心跳加速的方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="592e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Dogiano乐器的外观和声音是什么样的？你可以在这里查看:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou os l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">伦敦NDC展出的多吉亚诺乐器。</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1a67" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="1b92" class="pw-post-body-paragraph kw kx iq ky b kz ns jr lb lc nt ju le lf nu lh li lj nv ll lm ln nw lp lq lr ij bi translated">总而言之，Tone.js中有很多不同的元素可以根据用户动作来使用。通常，当我们考虑前端开发时，我们的全部注意力都集中在可视化部分。有时，我们完全忘记了我们在网络上也有音频的可能性。请注意，正确的音频确实可以丰富我们的视觉效果，并有助于在网络上创造更高层次的用户体验。</p></div></div>    
</body>
</html>