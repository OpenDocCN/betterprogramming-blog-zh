<html>
<head>
<title>How to Run Linters Before Committing in Your React Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在提交React项目之前运行Linters</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-run-linters-before-committing-in-your-react-project-8c9713fb0d75?source=collection_archive---------17-----------------------#2020-04-28">https://betterprogramming.pub/how-to-run-linters-before-committing-in-your-react-project-8c9713fb0d75?source=collection_archive---------17-----------------------#2020-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de7a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Husky、lint-staged和ESLint</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/413863bfcfac32be039a9497fd833a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qoF2giYj3HyGPyEKXFr3rw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">斯坦尼斯拉夫·康德拉蒂耶夫在<a class="ae kv" href="https://unsplash.com/s/photos/fix?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="3a28" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">介绍</h1><p id="bc25" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">我们今天将使用几个软件包。让我们一个一个来看:</p><p id="c824" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated"><a class="ae kv" href="https://www.npmjs.com/package/husky" rel="noopener ugc nofollow" target="_blank"> Husky </a> <strong class="lx ir"> : </strong>它为我们提供了Git钩子(参见<a class="ae kv" href="https://git-scm.com/docs/githooks" rel="noopener ugc nofollow" target="_blank">支持钩子列表</a>)。</p><p id="09f7" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated"><a class="ae kv" href="https://www.npmjs.com/package/lint-staged" rel="noopener ugc nofollow" target="_blank"> lint-staged </a> <strong class="lx ir"> : </strong>使用代码质量工具，如<a class="ae kv" href="https://prettier.io/docs/en/comparison.html" rel="noopener ugc nofollow" target="_blank">beautiful</a>和<a class="ae kv" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>，对staged文件运行linters。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="4e81" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">项目设置</h1><p id="3907" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">为了让我们开始，我们将使用一个简单的<code class="fe mw mx my mz b">create-react-app</code>，我们将利用<code class="fe mw mx my mz b">npx</code>来安装<code class="fe mw mx my mz b">create-react-app</code>。成功创建应用程序后，我们将添加开发依赖项，如下所示:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="ba13" class="ne le iq mz b gy nf ng l nh ni">npm install lint-staged husky eslint --save-dev</span></pre><p id="e2bc" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">您需要创建一个<code class="fe mw mx my mz b">.eslintrc.json</code>文件来添加所有的配置。为此，请从目录中运行以下命令:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="9c0f" class="ne le iq mz b gy nf ng l nh ni">./node_modules/.bin/eslint --init</span></pre><p id="980f" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">它将是交互式的，会询问您设置配置的所有问题。如果你不确定选择什么选项，继续按回车键；它会完成任务的。它应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/ea4f89b7d37ce40491c0631abfccc765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iAlsZm8SHa6MZqxDQXYjTA.png"/></div></div></figure><p id="b279" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">现在我们已经安装了依赖项，让我们在<code class="fe mw mx my mz b">package.json</code>中做一些改变，使linters能够在预提交Git挂钩上运行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="0d56" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">下面是<code class="fe mw mx my mz b">.eslintrc.json</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="be5c" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">测试</h1><p id="9ef7" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">我引入了一个错误，看看它是否能捕捉到它。我在第10行犯了一个非常明显的错误:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="7df4" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">我准备了变更并尝试提交:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/cc7c2f11367d9c37c091c0d6f502931a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*phjZWduHQQwqraVhwDmA3A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">林挺档案</p></figure><p id="d231" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">即使在开发中，我也能看到棉绒在工作:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/9298f435088ed3b08e86bebce5c411f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZivPnau5zGdD3CmReCg5Ng.png"/></div></div></figure><p id="88b6" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">但是我试着这样做，结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/7915b16390f48a222539713e31ac6a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDOfihSuM2a9eRpnTEtHfQ.png"/></div></div></figure><p id="1e26" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">它修复了所有lint警告。</p><p id="2468" class="pw-post-body-paragraph lv lw iq lx b ly mr jr ma mb ms ju md me mt mg mh mi mu mk ml mm mv mo mp mq ij bi translated">如果你参与过不同的项目，你就知道其中的痛苦。遵循棉绒的所有规则真的很痛苦。您可以在代码中使用一些特殊的注释来告诉linters允许违反规则。我将把那件事留给你。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="8132" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">利益</h1><p id="d2d0" class="pw-post-body-paragraph lv lw iq lx b ly lz jr ma mb mc ju md me mf mg mh mi mj mk ml mm mn mo mp mq ij bi translated">这种设置使您能够开始编写更好的代码，这显然会使您成为更好的开发人员。我列出了一些支持这种设置的要点，但请随时纠正任何问题:</p><ul class=""><li id="cd42" class="no np iq lx b ly mr mb ms me nq mi nr mm ns mq nt nu nv nw bi translated">与不同背景的团队合作可以简化。</li><li id="d89e" class="no np iq lx b ly nx mb ny me nz mi oa mm ob mq nt nu nv nw bi translated">有更好的错误处理。</li><li id="ac2d" class="no np iq lx b ly nx mb ny me nz mi oa mm ob mq nt nu nv nw bi translated">如果你有CI/CD设置，尽早失败会有所帮助。</li></ul></div></div>    
</body>
</html>