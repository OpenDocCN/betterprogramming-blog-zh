<html>
<head>
<title>Create a Private PostgreSQL Database for Your Development Environment in Seconds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在几秒钟内为您的开发环境创建一个私有PostgreSQL数据库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-a-private-postgresql-database-for-your-development-environment-in-seconds-b781640ed01b?source=collection_archive---------13-----------------------#2020-11-12">https://betterprogramming.pub/create-a-private-postgresql-database-for-your-development-environment-in-seconds-b781640ed01b?source=collection_archive---------13-----------------------#2020-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8fbd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">定义一个PostgreSQL数据库<em class="kf">和监控工具</em>，您可以使用Docker Compose快速创建和销毁它</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/4484653f7b8e002bef6b5677a5247a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*msfDTPGlbTAD6DCs"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">照片由<a class="ae kw" href="https://unsplash.com/@roi_dimor?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Roi Dimor </a>在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="94e1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当开始一个新项目时，许多开发人员使用JSON、CSV或其他平面文件来模拟可能存在于数据库中的数据。开发人员在创建自己的数据库的麻烦和没有真正的数据库的限制之间左右为难。为什么不定义一个PostgreSQL数据库<em class="lt">和监控工具</em>，您可以使用Docker Compose在几秒钟内创建、销毁和重新创建它？</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi lu"><img src="../Images/6a5313fad4091d7425f0cbd13526ddb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DHWuzy6UNQ4T1_zl"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">图片来源:作者</p></figure><p id="a6cc" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">用正确的设置创建两个容器的Docker命令很长。有了Docker Compose，你只需要记住命令<code class="fe lv lw lx ly b">up</code>和<code class="fe lv lw lx ly b">down</code>！</p><p id="ea3d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><code class="fe lv lw lx ly b">Up</code>将创建指定版本的PostgreSQL数据库和基于GUI的管理工具。<code class="fe lv lw lx ly b">Down</code>将关闭并清除它们。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="534f" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">基于私有容器的数据库的好处</h1><ul class=""><li id="6b3a" class="my mz iq kz b la na ld nb lg nc lk nd lo ne ls nf ng nh ni bi translated">PostgreSQL的不同版本在行为和特性上存在差异，因此开发人员应该针对他们将长期支持的数据库版本进行开发。一个项目可能是9.6.12，另一个项目可能是12.4。</li><li id="afef" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated">大多数应用程序开发人员不是数据库管理员或SQL专家。一个图形工具可以直观地验证他们代码的效果，并手动修改数据。</li><li id="545d" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated">项目的不同阶段需要不同类型的存储。在项目的早期阶段，非持久性数据库最大限度地减少了麻烦。在项目的后期阶段，持久数据库提供了更真实的场景。</li></ul><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi no"><img src="../Images/a78fce4f9ee0ae64d8c619f9058db57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oFz9LrOPfZNQdhcw"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">用简单的命令创建和重新创建数据库</p></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="ac29" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">构建开发堆栈</h1><p id="fd96" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">下面的<code class="fe lv lw lx ly b">docker-compose.yml</code>文件定义了一个PostgreSQL容器，该容器运行特定版本的PostgreSQL和pg admin 4(Postgres最常用的管理工具)。这个文件的内容需要更深入的解释。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="7d1f" class="nu mh iq bd mi nv nw dn mm nx ny dp mq lg nz oa ms lk ob oc mu lo od oe mw of bi translated">Docker编写文件结构</h2><p id="9691" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">这个文件定义了要创建的两个“服务”:Postgres和pgAdmin。每项服务都包含一个从Docker Hub为您提取的容器。Postgres和pgAdmin将分别在端口5432和端口8080可用。将您编写的任何程序指向主机名<code class="fe lv lw lx ly b">localhost</code>并浏览到<a class="ae kw" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>来访问pgAdmin。</p><p id="6c14" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">请继续阅读如何将pgAdmin指向Postgres的说明。</p><h2 id="b54c" class="nu mh iq bd mi nv nw dn mm nx ny dp mq lg nz oa ms lk ob oc mu lo od oe mw of bi translated">PostgreSQL版本</h2><p id="b796" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">在定义Postgres容器的行中，您需要指定您需要的Postgres的确切版本。版本被表示为一个标签，其中<code class="fe lv lw lx ly b">9.6.12-alpine</code>是我们示例中的版本。检查此处的<a class="ae kw" href="https://hub.docker.com/_/postgres?tab=tags" rel="noopener ugc nofollow" target="_blank">以查看还有哪些版本可用</a>。</p><h2 id="7ce4" class="nu mh iq bd mi nv nw dn mm nx ny dp mq lg nz oa ms lk ob oc mu lo od oe mw of bi translated">Postgres的存储</h2><p id="21f4" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">上面的<code class="fe lv lw lx ly b">docker-compose.yml</code>文件为Postgres指定了两个卷映射。这两个映射将使Postgres可以访问您计算机上的目录。</p><ol class=""><li id="bc73" class="my mz iq kz b la lb ld le lg og lk oh lo oi ls oj ng nh ni bi translated">映射到<code class="fe lv lw lx ly b">/docker-entrypoint-initdb.d</code>的文件夹包含Postgres将用来初始化数据库的SQL文件。将您需要的SQL文件和shell脚本放在该目录中，它们将按字母顺序自动执行。</li><li id="d505" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls oj ng nh ni bi translated">映射到<code class="fe lv lw lx ly b">/var/lib/postgresql/data</code>的文件夹包含实际数据库的持久存储。</li></ol><p id="baf0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当Postgres启动时，它遵循下面的简单流程图。如果数据库中没有数据，那么它会执行您计算机上映射到<code class="fe lv lw lx ly b">/docker-entrypoint-initdb.d</code>目录的文件夹中的每个SQL文件和shell脚本(按字母顺序)。如果您计算机上的文件夹中有映射到<code class="fe lv lw lx ly b">/var/lib/postgresql/data</code>的数据，那么它会忽略这些文件。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ok"><img src="../Images/93e9cbee8516c7e3a620c64c377deed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nMQaPxUKmYq67hAa"/></div></div></figure><p id="656e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">您应该挂载这两个目录吗？看情况。下表描述了通过映射Postgres的两个卷中的每一个卷，您应该预期的行为。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ol"><img src="../Images/6541ef0ece960d1ae7f7126a8e2763db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsuTB2Ge04sCccMKLzW6ww.png"/></div></div></figure><p id="0b02" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我的建议是映射两个目录。如果不想再初始化DB，可以从init目录中删除文件。您还可以从您的计算机中删除数据目录，以删除任何可能存在的数据(Docker将在您下次运行<code class="fe lv lw lx ly b">docker-compose up</code>时在其位置重新创建一个空文件夹)。</p><p id="4724" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">专业提示</strong>:您可以在计算机的init文件夹中包含CSV文件，然后通过向init目录中的SQL文件添加适当的命令，用这些CSV文件中的数据填充表格。</p><pre class="kh ki kj kk gt om ly on oo aw op bi"><span id="de07" class="nu mh iq ly b gy oq or l os ot">CREATE TABLE Employee(id, first_name, last_name, salary);<br/>COPY Employee FROM '/docker-entrypoint-initdb.d/emp.csv'<br/>    WITH (FORMAT CSV, HEADER);</span></pre><h2 id="4ff5" class="nu mh iq bd mi nv nw dn mm nx ny dp mq lg nz oa ms lk ob oc mu lo od oe mw of bi translated">pgAdmin的存储</h2><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/60d942b88d1347802ef7246dad0aa021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*pXNa6oSZ72IOr6DCodBWsQ.png"/></div></figure><p id="5e88" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">尽管pgAdmin只是一个用于查看和配置数据库的工具，但是必须配置它与数据库的连接。这可以通过GUI中的“添加服务器”命令来完成。注意，主机名是来自我们的YML文件<code class="fe lv lw lx ly b">some-postgres</code>的<code class="fe lv lw lx ly b">container_name</code>参数。YML文件中也指定了密码:<code class="fe lv lw lx ly b">mysecret</code>。</p><p id="00ce" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">另一种方法是通过在JSON文件中指定这些设置(除了密码之外的所有设置)来节省大量的点击和输入。将JSON文件映射到容器上<code class="fe lv lw lx ly b">/pgadmin4/servers.json</code>(我们示例YML文件中的第22行),以避免手动配置pgAdmin到Postgres的连接。</p><p id="b2c5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">设置文件可以在pgAdmin和Postgres之间指定多个连接(以不同的用户身份连接或连接到不同的数据库)。以下示例只有一个连接。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="c4d0" class="nu mh iq bd mi nv nw dn mm nx ny dp mq lg nz oa ms lk ob oc mu lo od oe mw of bi translated">建立工作关系网</h2><p id="87cc" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated"><code class="fe lv lw lx ly b">container_name</code>参数只是一个名称，但是pgAdmin将使用这个名称来访问端口5432上的数据库。这个图说明了原因。这两个容器通过专用网络相互连接，因此可以通过它们的主机名(容器名)<code class="fe lv lw lx ly b">some-postgres</code>和<code class="fe lv lw lx ly b">some-pgadmin</code>相互访问。然而，主机(您的计算机和网络浏览器)只看到暴露的端口5432和8080，因此在<code class="fe lv lw lx ly b">localhost:5432</code>和<code class="fe lv lw lx ly b">localhost:8080</code>访问它们。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ov"><img src="../Images/aeeadee688838d3704095f1adaf840b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U5ZE2OtxU4JKmWTq"/></div></div></figure><p id="6d4b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">内部网络名称可以在compose文件中指定，但是命名一个代码从不引用其名称的网络是没有意义的。让码头工人来处理！如果你好奇，你可以随时查看你的私人和临时网络的名称。在下面的代码片段中，我从桌面运行Docker Compose，因此它将网络命名为<code class="fe lv lw lx ly b">desktop_default</code>。</p><pre class="kh ki kj kk gt om ly on oo aw op bi"><span id="0ef2" class="nu mh iq ly b gy oq or l os ot">$ docker network ls<br/>NETWORK ID          NAME                DRIVER              SCOPE<br/>23a6be9b8021        bridge              bridge              local<br/>49a120440f88        desktop_default     bridge              local<br/>44a949b56fa7        host                host                local<br/>3892b16dca2d        none                null                local</span></pre></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="2db0" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">Docker和docker-compose命令</h1><p id="3a76" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">在这里，我不得不承认我在介绍中过分简化了命令，但仅仅是一点点。</p><p id="cc9b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">要启动容器</strong>，使用<code class="fe lv lw lx ly b">docker-compose up -d</code>。<code class="fe lv lw lx ly b">-d</code>选项指定了“分离”模式，在这种模式下，容器在后台运行，您可以在命令提示符下执行其他命令。</p><pre class="kh ki kj kk gt om ly on oo aw op bi"><span id="b755" class="nu mh iq ly b gy oq or l os ot">$ docker-compose up -d        <br/>Creating network "desktop_default" with the default driver<br/>Creating some-postgres ... done<br/>Creating some-pgadmin  ... done<br/>$</span></pre><p id="02ff" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">要停止并移除容器</strong>，使用<code class="fe lv lw lx ly b">docker-compose down -v</code>。<code class="fe lv lw lx ly b">-v</code>选项删除容器运行时使用的卷。这个<em class="lt">不会</em>删除你计算机上映射到容器的目录。</p><pre class="kh ki kj kk gt om ly on oo aw op bi"><span id="3e47" class="nu mh iq ly b gy oq or l os ot">$ docker-compose down -v<br/>Stopping some-pgadmin  ... done<br/>Stopping some-postgres ... done<br/>Removing some-pgadmin  ... done<br/>Removing some-postgres ... done<br/>Removing network desktop_default</span></pre><p id="cc91" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果不使用<code class="fe lv lw lx ly b">-v</code>标志，随着时间的推移，您将积累不必要的卷。你可以用<code class="fe lv lw lx ly b">docker volume ls</code>来验证这一点。</p><p id="6215" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">要对不能正常启动的容器</strong>进行故障排除，使用<code class="fe lv lw lx ly b">docker logs [container_name]</code>。例如，由于init目录中的某个SQL文件出错，您的数据库可能无法正确初始化。在运行<code class="fe lv lw lx ly b">docker logs some-postgres</code>之后，我浏览了日志，在一个适当命名的SQL文件中发现了一个错误:</p><pre class="kh ki kj kk gt om ly on oo aw op bi"><span id="46ca" class="nu mh iq ly b gy oq or l os ot">/usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/broken.sql<br/>ERROR:  syntax error at end of input at character 34<br/>STATEMENT:  CREATE TABLE Songs(id, name, year<br/>psql:/docker-entrypoint-initdb.d/broken.sql:1: ERROR:  syntax error at end of input<br/>LINE 1: CREATE TABLE Song(id, name, year</span></pre><p id="ca8d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">日志告诉我在文件<code class="fe lv lw lx ly b">broken.sql</code>的第一行有一个错误。该命令缺少右括号和分号。我可以修复这个错误，并使用<code class="fe lv lw lx ly b">down</code>和<code class="fe lv lw lx ly b">up</code>来验证。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="5805" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">使用Python</h1><p id="e821" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">使用localhost作为主机名和YML文件中指定的密码，连接到数据库很容易。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="9c2d" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">使用pgAdmin</h1><p id="382b" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">只需连接到<a class="ae kw" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>来访问登录页面，并使用在<code class="fe lv lw lx ly b">docker-compose.yml</code>中指定的用户名和密码(在我们的例子中是<code class="fe lv lw lx ly b">user@domain.com</code>和<code class="fe lv lw lx ly b">admin</code>)。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ow"><img src="../Images/b5573f93d1d6e61fc3d1fd2bd5c3c30b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-OLNPQfPVcaVcm55_endYQ.png"/></div></div></figure><p id="88aa" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果您在本文前面讨论的<code class="fe lv lw lx ly b">servers.json</code>文件中指定了连接细节，那么当您尝试展开用户界面左侧的导航树时，将会提示您输入Postgres数据库的密码。那个密码是我们<code class="fe lv lw lx ly b">docker-compose.yml</code>里的<code class="fe lv lw lx ly b">mysecret</code>。如果您没有包含<code class="fe lv lw lx ly b">servers.json</code>文件或文件中有错误，您将不得不手动添加服务器。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ox"><img src="../Images/4f3dc9f9d0f13ee8ff6bae18cc890862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sMq0Cmnkvn35uUO3pImD4A.png"/></div></div></figure><p id="7e02" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，您应该能够查看和操作数据库了。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ow"><img src="../Images/418352f91e8732a7c6cb5f87a053cbf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DRpjQBkotrGn8QryDRjQ7w.png"/></div></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="2e35" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">进入PSQL</h1><p id="741a" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">有时候开发人员需要熟悉的命令行。Docker使得像超级用户一样访问PSQL和执行命令变得很容易。使用此处显示的命令输入PSQL命令行。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oy"><img src="../Images/7fa00b658f9b59cb294f864aeda94686.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yYxwukbBZY7poPVw"/></div></div></figure><p id="2962" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一旦连接上，您就可以访问所有的PSQL命令，比如<code class="fe lv lw lx ly b">\i</code>用于包含，或者<code class="fe lv lw lx ly b">\dt</code>和<code class="fe lv lw lx ly b">\df</code>用于描述表和函数。要退出，使用<code class="fe lv lw lx ly b">\q</code>命令。</p><pre class="kh ki kj kk gt om ly on oo aw op bi"><span id="1976" class="nu mh iq ly b gy oq or l os ot">$ docker exec -it some-postgres psql -U postgres</span><span id="5d66" class="nu mh iq ly b gy oz or l os ot">psql (9.6.12)<br/>Type "help" for help.</span><span id="0dbd" class="nu mh iq ly b gy oz or l os ot">postgres=# \dt<br/>List of relations<br/>Schema |     Name     | Type  |  Owner<br/>--------+--------------+-------+----------<br/>public | peak         | table | postgres<br/>public | climb        | table | postgres<br/>public | climber      | table | postgres</span></pre></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="2785" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">pgAdmin的替代方案</h1><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ow"><img src="../Images/90047212072431933d9957368ed5eba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5zp3RSC4VN9_0-IaeSjBg.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">Adminer是一个简单得多的界面</p></figure><p id="660f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">pgAdmin是PostgreSQL最常见的管理GUI，但还有其他GUI。Adminer使用起来要简单得多，您可能已经有了使用它的经验，因为它支持多种SQL风格。如果您刚刚开始使用PostgreSQL或者有非常简单的需求，这可能是一个更合适的工具。</p><p id="e0f0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在登录界面，使用<code class="fe lv lw lx ly b">some-postgres</code>作为主机，使用<code class="fe lv lw lx ly b">mysecret</code>作为密码。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/18e6f8efe37baf1fea25f94ca5aae895.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*iTf4Z6_ATNyE1VW3CTI5dg.png"/></div></figure><p id="8b20" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要在您的环境中用Adminer替换pgAdmin，请用下面几行替换<code class="fe lv lw lx ly b">docker-compose.yml</code>中的pgAdmin容器定义。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="66bb" class="mg mh iq bd mi mj pb ml mm mn pc mp mq jw pd jx ms jz pe ka mu kc pf kd mw mx bi translated">参考</h1><p id="deb0" class="pw-post-body-paragraph kx ky iq kz b la na jr lc ld nb ju lf lg np li lj lk nq lm ln lo nr lq lr ls ij bi translated">所有优秀的开发人员都依赖产品文档和其他人的经验。以下是我在创建工作流程和这篇文章时使用的资源。</p><ul class=""><li id="5858" class="my mz iq kz b la lb ld le lg og lk oh lo oi ls nf ng nh ni bi translated"><a class="ae kw" href="https://hub.docker.com/_/postgres" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/_/postgres</a></li><li id="7ae1" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated"><a class="ae kw" href="https://hub.docker.com/_/adminer" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/_/adminer</a></li><li id="c3c9" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated"><a class="ae kw" href="https://docs.docker.com/compose/compose-file/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/compose/compose-file/</a></li><li id="259b" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated"><a class="ae kw" href="https://www.pgadmin.org/docs/pgadmin4/latest/container_deployment.html" rel="noopener ugc nofollow" target="_blank">https://www . pgadmin . org/docs/pgadmin 4/latest/container _ deployment . html</a></li><li id="6e85" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated"><a class="ae kw" href="https://technology.amis.nl/2020/01/02/pgadmin-in-docker-provision-connections-and-passwords/" rel="noopener ugc nofollow" target="_blank">https://technology . amis . nl/2020/01/02/pgadmin-in-docker-provision-connections-and-passwords/</a></li><li id="4263" class="my mz iq kz b la nj ld nk lg nl lk nm lo nn ls nf ng nh ni bi translated"><a class="ae kw" href="https://stackoverflow.com/questions/42248198/how-to-mount-a-single-file-in-a-volume" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/42248198/how-to-mount-a-single-file-in-a-volume</a></li></ul></div></div>    
</body>
</html>