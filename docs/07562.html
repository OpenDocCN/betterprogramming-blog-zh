<html>
<head>
<title>Display Progress Bars Using tqdm in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中使用tqdm显示进度条</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/display-progress-bars-using-tqdm-in-python-c81484be9390?source=collection_archive---------8-----------------------#2021-01-27">https://betterprogramming.pub/display-progress-bars-using-tqdm-in-python-c81484be9390?source=collection_archive---------8-----------------------#2021-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="050e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用流行的Python包添加智能进度条</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5ff08b1dbbbe7033b5b7c0467b5cc1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l8BWVt1iMRGwGHj7"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保罗·卡罗洛在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ea91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有没有想过你正在运行的Python代码还剩多少时间？事实证明，有一种简单的方法可以找到答案。怎么会？通过使用<a class="ae ky" href="https://pypi.org/project/tqdm/" rel="noopener ugc nofollow" target="_blank">tqdm<strong class="lb iu"><em class="lv"/></strong>Python库</a>给你的Python代码添加一个进度条。</p><p id="d382" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将学习如何使用tqdm <strong class="lb iu"> <em class="lv"> </em> </strong>库在我们的代码运行时显示一个智能进度条(甚至在<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>中)。此外，我们将看到如何为<a class="ae ky" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>提供更具视觉吸引力的选项。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="b83e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">tqdm</h1><p id="9120" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果你熟悉阿拉伯语，那么你可能已经注意到,<em class="lv"> tqdm </em>的发音听起来像是表示进步的阿拉伯语单词，(<em class="lv"> taqadum </em>，تقدّم).因此，这绝对是一个适合这个进度条库的名字。</p><p id="73a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何使用tqdm来显示Python循环的进度条。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7f88" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">安装tqdm</h1><p id="c3e2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，我们需要安装tqdm。我们可以在命令提示符或终端中使用<code class="fe na nb nc nd b">pip install</code>,如下所示:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="aa48" class="ni me it nd b gy nj nk l nl nm">pip install tqdm</span></pre><p id="f744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您有Anaconda Python发行版，那么您可能已经安装了tqdm。如果没有，也可以使用<a class="ae ky" href="https://anaconda.org/conda-forge/tqdm" rel="noopener ugc nofollow" target="_blank">康达安装</a>。您可以使用<code class="fe na nb nc nd b">pip list</code>检查安装了哪些Python包。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a0ea" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">导入tqdm</h1><p id="c95d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">接下来，我们需要将tqdm库导入到代码中。具体来说，我们需要从tqdm库中导入<code class="fe na nb nc nd b">tqdm</code>函数，如下所示:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="bb37" class="ni me it nd b gy nj nk l nl nm">from tqdm import tqdm</span></pre><p id="fae1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以导入整个tqdm <strong class="lb iu"> </strong>库，然后像这样访问<code class="fe na nb nc nd b">tqdm</code> <strong class="lb iu"> </strong>函数:<code class="fe na nb nc nd b">tqdm.tqdm(iterable)</code>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2297" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">使用tqdm</h1><p id="a6ba" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了使用<code class="fe na nb nc nd b">tqdm</code>函数显示Python循环的进度条，我们只需用<code class="fe na nb nc nd b">tqdm(iterable)</code>包装任何iterable。让我们来看一个朱庇特笔记本中的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/1fd41bbbd57b7ff5077a258b8dd29e98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XqZ9BuECRJGe5Qub2Npjlw.png"/></div></div></figure><p id="5d30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们用<code class="fe na nb nc nd b">tqdm</code>函数包装了iterable，在这个例子中是range对象。在Jupyter笔记本单元格下方可以看到进度条。当<code class="fe na nb nc nd b">for</code>循环运行时，它显示{elapsed time} &lt; {remaining}时间，以及每秒的迭代次数。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/f75f90d5e74ab99e31695deeed7b235e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LxsIE2Cm8P-ov7Y68nkErQ.gif"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="a177" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">将tqdm与其他循环或函数一起使用</h1><p id="987b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们不仅可以将tqdm与<code class="fe na nb nc nd b">for</code>循环一起使用，还可以将它与其他迭代遍历iterable的函数一起使用。例如，我们可以将它与<code class="fe na nb nc nd b">map</code>、<code class="fe na nb nc nd b">filter</code>和<code class="fe na nb nc nd b">reduce</code>功能一起使用。</p><p id="ab59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们编写一个函数，它接受一个数字，并返回从0到使用<code class="fe na nb nc nd b">reduce</code>函数传入的数字之间的所有整数的和，我们可以包含一个进度条，如下所示:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="f39e" class="ni me it nd b gy nj nk l nl nm">def add(num):<br/>    return reduce(lambda x,y: x+y, <strong class="nd iu">tqdm(</strong>range(num+1))<strong class="nd iu">)</strong> if type(num) == int else 0</span></pre><p id="8363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过用<code class="fe na nb nc nd b">tqdm</code>函数包装我们的iterable对象，range对象来显示一个进度条。<code class="fe na nb nc nd b">if</code>语句是检查输入是否是整数；否则，该函数返回0。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/3efa310b57fb13e49d43edd3f028fe27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_68uaqw9Y88X9pQ23e6oA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="36d3" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Jupyter笔记本更好的选择</h1><p id="f006" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您在Jupyter Notebook中工作，您可以从tqdm.notebook子模块中导入<code class="fe na nb nc nd b">tqdm</code>函数，它提供了一个更具视觉吸引力的进度条，其中包括一些颜色提示(蓝色表示正常，绿色表示已完成，红色表示错误/中断，浅蓝色表示无预计到达时间)<strong class="lb iu"> : </strong></p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="a77f" class="ni me it nd b gy nj nk l nl nm">from tqdm.notebook import tqdm</span><span id="90b7" class="ni me it nd b gy nq nk l nl nm">def add(num):<br/>    return reduce(lambda x,y: x+y, tqdm(range(num+1))) if type(num) == int else 0</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/62b3d5200d70c5c6e01ceb1ea46da91b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*M2WQIbkaeNYsxpVUQE1eHg.gif"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="4471" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以在列表理解中使用tqdm <strong class="lb iu"> <em class="lv"> </em> </strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/f95a99315eb9832b773c872cc39a4080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIh7NB_ayXI0NKOuqts9BQ.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="04e6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">对熊猫使用tqdm</h1><p id="4256" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们甚至可以对熊猫使用tqdm！例如，我们可以用<code class="fe na nb nc nd b">dataframe .apply()</code>方法显示一个进度条。</p><p id="e636" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要启动<code class="fe na nb nc nd b">.pandas()</code>方法:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="59ed" class="ni me it nd b gy nj nk l nl nm">tqdm.pandas()</span></pre><p id="aaf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以把<code class="fe na nb nc nd b">.apply()</code>换成<code class="fe na nb nc nd b">.progress_apply()</code>，就这样！</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="3250" class="ni me it nd b gy nj nk l nl nm">df = pd.DataFrame(np.random.randint(0, 100, (100000, 600)))</span><span id="c112" class="ni me it nd b gy nq nk l nl nm">tqdm.pandas()</span><span id="5aae" class="ni me it nd b gy nq nk l nl nm"># Now we can use `progress_apply` instead of `apply`<br/># and `progress_map` instead of `map`</span><span id="c690" class="ni me it nd b gy nq nk l nl nm">df.progress_apply(lambda x: x**2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/8219523821baec29d7d70bca6bb3e851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p4D3WtNq7p-ORcg_9j4eFg.png"/></div></div></figure><p id="1fe3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更多关于使用tqdm <strong class="lb iu"> <em class="lv"> </em> </strong>处理熊猫的信息，请查看<a class="ae ky" href="https://pypi.org/project/tqdm/#pandas-integration" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="83cd" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">tqdm的好处</h1><p id="9d47" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">tqdm可以在任何平台上的任何控制台或GUI上工作，包括Linux、Windows、Mac等。正如我们在上面看到的，它适用于Jupyter笔记本。</p><p id="46e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，使用tqdm而不是不同的方法来显示进度条的一个巨大好处是，tqdm几乎没有开销，每次迭代大约60纳秒，这意味着它应该不会对性能产生太大影响，相比之下，progress bar每次迭代的开销为800纳秒。它通过使用复杂的算法来预测代码的剩余时间，跳过任何牺牲性能的不必要的迭代显示。</p><p id="9e4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，tqdm不需要任何依赖来工作。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="b5ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">如果你喜欢阅读这样的故事，并且想支持我成为一名作家，可以考虑注册成为一名媒体会员。每月5美元，你可以无限制地阅读媒体上的故事。如果你用我的</em> <a class="ae ky" href="https://lmatalka90.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="lv">链接</em> </strong> </a> <em class="lv">注册，我会赚一小笔佣金。</em></p><div class="nt nu gp gr nv nw"><a href="https://lmatalka90.medium.com/membership" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">通过我的推荐链接加入媒体——卢艾·马塔尔卡</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">阅读卢艾·马塔尔卡的每一个故事(以及媒体上成千上万的其他作家)。您的会员费直接支持…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">lmatalka90.medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7abe" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">摘要</h1><p id="18b4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本教程中，我们研究了一种跟踪Python代码剩余时间的方法。我们学习了如何使用tqdm库通过用<code class="fe na nb nc nd b">tqdm</code>函数包装iterable来显示代码中循环的智能进度条。此外，我们看到，如果我们在Jupyter Notebook中工作，tqdm.notebook子模块会提供一个更具视觉吸引力的进度条。最后，我们看到了如何使用tqdm在处理熊猫时显示进度条。</p><p id="69a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关tqdm的更多信息，请查看<a class="ae ky" href="https://pypi.org/project/tqdm/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div></div>    
</body>
</html>