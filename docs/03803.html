<html>
<head>
<title>Finding the Ultimate Swift Code-Style Guidelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">寻找最终的Swift代码风格指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/finding-the-ultimate-swift-code-style-guidelines-59025a7c163c?source=collection_archive---------6-----------------------#2020-03-05">https://betterprogramming.pub/finding-the-ultimate-swift-code-style-guidelines-59025a7c163c?source=collection_archive---------6-----------------------#2020-03-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4261" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">存在许多代码风格的指南。哪个适合你？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3428f911f55cd9500edcacc2c9a6403b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9EvRXeY1RXJlW-jriPdSnw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Clark Van Der Beken 在<a class="ae ky" href="https://unsplash.com/s/photos/patterns?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1ae7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">T4:我一直是一个注重细节的人。当我阅读别人的代码时，我总是注意到它的格式低效、不一致，有时甚至是丑陋的。</p><p id="12d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的代码风格的优点已经说过很多次了。简而言之，程序员读别人的代码比写自己的代码花的时间还多。这就是为什么它必须是可读的。</p><p id="3753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是<a class="ae ky" href="https://en.wikipedia.org/wiki/Bertrand_Meyer" rel="noopener ugc nofollow" target="_blank"> Bertrand Meyer </a>在他的<a class="ae ky" href="https://www.amazon.com/Object-Oriented-Software-Construction-Book-CD-ROM/dp/0136291554" rel="noopener ugc nofollow" target="_blank"> <em class="me">面向对象构造</em> </a>中写的:</p><blockquote class="mf mg mh"><p id="0a81" class="kz la me lb b lc ld ju le lf lg jx lh mi lj lk ll mj ln lo lp mk lr ls lt lu im bi translated">您应该从开始编写类的时候就应用样式规则。例如，你不应该写一个没有直接包含头文件注释的例程。这不会花很长时间，也不是浪费时间:事实上，这是为你或其他人在课堂上的所有未来工作节省的时间，无论是半小时后还是五年后。使用规则的缩进、注释和标识符的正确拼写、适当的词汇约定——在每个左括号前留一个空格而不是在其后，等等——并不会使您的任务比忽略这些规则更长，但是经过几个月的工作和大量软件的计算会产生巨大的差异。对这样的细节的关注，虽然不充分，但却是优质软件的必要条件。</p></blockquote><p id="184f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我有自己的<a class="ae ky" href="https://swift.org" rel="noopener ugc nofollow" target="_blank"> Swift </a>代码风格指南，自从我用Swift写了第一行代码以来，它一直在发展。当我转换项目时，它一直伴随着我，从未让我失望过。但首先，让我告诉你一个隐藏在这些准则背后的故事。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="0e95" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">起源</h1><p id="e7b2" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">自从我看到<a class="ae ky" href="https://www.oracle.com/technetwork/java/codeconventions-150003.pdf" rel="noopener ugc nofollow" target="_blank"> Java代码约定</a>以来，我一直在寻找完美的书面的，或者说是刻在石头上的Swift指南。我找不到合适的词来形容我有多感动！</p><p id="7b11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我越读越糊涂。如果Java开发者有这个指南，为什么会有这么多丑陋的<a class="ae ky" href="https://www.java.com/" rel="noopener ugc nofollow" target="_blank"> Java </a>代码存在？我仍然想知道这样的丑陋从何而来:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="dd60" class="nu mt it nq b gy nv nw l nx ny">// Don't.</span><span id="e264" class="nu mt it nq b gy nz nw l nx ny"><strong class="nq iu">void</strong> layoutScreen() {<br/>    layoutHeader()</span><span id="bb68" class="nu mt it nq b gy nz nw l nx ny">    layoutFooter()<br/>}</span></pre><p id="df5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="me">注:在本文中，当你在代码中看到一个</em> <code class="fe oa ob oc nq b"><em class="me">// Do</em></code> <em class="me">或一个</em> <code class="fe oa ob oc nq b"><em class="me">// Don’t</em></code> <em class="me">时，这些是我的建议。</em></p><p id="e181" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么我们在中间有那奇怪的令人困惑的空行？为什么不能是这样呢？</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="42f0" class="nu mt it nq b gy nv nw l nx ny">// Do.</span><span id="1693" class="nu mt it nq b gy nz nw l nx ny"><strong class="nq iu">void</strong> layoutScreen() {<br/>    layoutHeader()<br/>    layoutFooter()<br/>}</span></pre><p id="4e33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，Java代码约定有许多过时的代码风格建议，这些在当今被认为是糟糕的风格:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="ee09" class="nu mt it nq b gy nv nw l nx ny">// Don't.<br/>function(longExpression1, longExpression2, longExpression3,<br/>         longExpression4, longExpression5);</span></pre><p id="09e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是最终，这些约定对我来说是一个真正的进步，就像<a class="ae ky" href="https://en.wikipedia.org/wiki/Code_Complete" rel="noopener ugc nofollow" target="_blank">代码完成</a>。和巨大的灵感。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="c5b4" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">现有准则</h1><p id="ee48" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">有几个现有的Swift代码风格指南，但它们中的任何一个都足够可靠或详尽，足以涵盖我想要涵盖的所有内容。</p><p id="10a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先有官方的<a class="ae ky" href="https://swift.org/documentation/api-design-guidelines/" rel="noopener ugc nofollow" target="_blank"> API设计指南</a>。不要误解我，他们是完美的！但是你可以从它的名字中猜到，它主要关注于<a class="ae ky" href="https://en.wikipedia.org/wiki/Application_programming_interface" rel="noopener ugc nofollow" target="_blank"> API </a> s(命名、方法签名等等。)</p><h2 id="e065" class="nu mt it bd mu od oe dn my of og dp nc li oh oi ne lm oj ok ng lq ol om ni on bi translated"><a class="ae ky" href="https://google.github.io/swift/" rel="noopener ugc nofollow" target="_blank">谷歌的Swift风格指南</a></h2><p id="6b2f" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">另一方面，也有少数来自大公司的导游。我见过的最详尽的是谷歌的。不幸的是，我不能使用它，它有很多规则似乎是错误的！</p><p id="8ffa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，注释—尽管它们位于行首，但看起来仍然是隐藏的:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="d82f" class="nu mt it nq b gy nv nw l nx ny">// Don't.</span><span id="fd70" class="nu mt it nq b gy nz nw l nx ny">@testable <strong class="nq iu">import</strong> MyModuleUnderTest</span><span id="064a" class="nu mt it nq b gy nz nw l nx ny">@objc <strong class="nq iu">private</strong> <strong class="nq iu">func</strong> criticReviewWasTapped(_ sender: UIButton?) {<br/>    // ...<br/>}</span><span id="b5d2" class="nu mt it nq b gy nz nw l nx ny">// Do.</span><span id="8ab4" class="nu mt it nq b gy nz nw l nx ny">@testable<br/><strong class="nq iu">import</strong> MyModuleUnderTest</span><span id="bacf" class="nu mt it nq b gy nz nw l nx ny">@objc<br/><strong class="nq iu">private</strong> <strong class="nq iu">func</strong> criticReviewWasTapped(_ sender: UIButton?) {<br/>    // ...<br/>}</span></pre><p id="bff1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我总是希望看到注释分开。但是现在，当Swift拥有基于它们的丰富API(<a class="ae ky" href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html#ID617" rel="noopener ugc nofollow" target="_blank">属性包装器</a>)时，它就变得必要了。我不希望出现不一致的情况，当一个规则在一种情况下适用，而在另一种情况下不适用。</p><p id="b917" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个例子是控制流语句。一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Boolean_algebra" rel="noopener ugc nofollow" target="_blank">布尔</a>运算符在一行的末尾？加油！这已经被认为是坏的风格了，看看完整的代码！</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="4b7c" class="nu mt it nq b gy nv nw l nx ny">// Don't.<br/><strong class="nq iu">if</strong> aBooleanValueReturnedByAVeryLongOptionalThing() &amp;&amp;<br/>    aDifferentBooleanValueReturnedByAVeryLongOptionalThing() &amp;&amp;<br/>    yetAnotherBooleanValueThatContributesToTheWrapping() {<br/>    doSomething()<br/>}</span><span id="fa2f" class="nu mt it nq b gy nz nw l nx ny">// Do<br/><strong class="nq iu">if</strong> aBooleanValueReturnedByAVeryLongOptionalThing()<br/>    &amp;&amp; aDifferentBooleanValueReturnedByAVeryLongOptionalThing()<br/>    &amp;&amp; yetAnotherBooleanValueThatContributesToTheWrapping() {<br/>    doSomething()<br/>}</span></pre><p id="2a2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我对谷歌的工作感激不尽！我通读了他们的指南，他们提示了我很多必须强调的东西！</p><h2 id="09d0" class="nu mt it bd mu od oe dn my of og dp nc li oh oi ne lm oj ok ng lq ol om ni on bi translated"><a class="ae ky" href="https://github.com/raywenderlich/swift-style-guide" rel="noopener ugc nofollow" target="_blank">raywenderlich.com官方斯威夫特风格指南</a></h2><p id="23c6" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">这是一个非常受欢迎的，当我在寻找合适的使用指南时，我经常被它绊倒。</p><p id="7605" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">他们绝对没有试图做到面面俱到——这是第一件让我反感的事情。另一个原因是本指南是临时编写的。<a class="ae ky" href="https://www.raywenderlich.com" rel="noopener ugc nofollow" target="_blank"> Ray Wenderlich </a>是一个著名的学习平台，它的指导方针与之一致:两个空格缩进以节省更多空间，等等。</p><p id="0472" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个很容易把我吓跑的是前后矛盾。虽然指南建议使用类型推断，但它们也建议显式指定集合类型，并通过空文字初始化它(因此，不一致):</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="5e0e" class="nu mt it nq b gy nv nw l nx ny">// Don't.<br/><strong class="nq iu">var</strong> lookup: [String: Int] = [:]</span><span id="1a73" class="nu mt it nq b gy nz nw l nx ny">// Do.<br/><strong class="nq iu">var</strong> lookup = [String: Int]()</span></pre><h2 id="393a" class="nu mt it bd mu od oe dn my of og dp nc li oh oi ne lm oj ok ng lq ol om ni on bi translated">其余的</h2><p id="da0d" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">还有<a class="ae ky" href="https://github.com/linkedin/swift-style-guide" rel="noopener ugc nofollow" target="_blank"> LinkedIn的Swift风格指南</a>和<a class="ae ky" href="https://github.com/airbnb/swift" rel="noopener ugc nofollow" target="_blank"> Airbnb Swift风格指南</a>都有同样的缺陷。</p><p id="9c3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，这是一个关于我如何编写最终Swift代码指南的故事。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="1580" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">终极Swift代码风格指南</h1><p id="6284" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">它有一个很好的目录，让我们很容易地导航。在我看来，这些指导方针是详尽的。我包括了所有我认为应该在那里的主题，排除了所有不属于那里的主题。</p><p id="b644" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中一个主要原则是，你不能忽视任何规则，但你可以根据你的需要改变它。例如，如果您喜欢另一种大括号样式，那很好，只要坚持您的样式并替换相应的规则。</p><p id="1488" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，事不宜迟，<a class="ae ky" href="https://github.com/lazarevzubov/Ultimate-Swift-Code-Style-Guidelines" rel="noopener ugc nofollow" target="_blank">来了</a>！随便用，评论，叉！如果您有任何重要的建议，请使用拉式请求系统—让我们一起讨论！</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="276c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读我(和其他作者)在Medium上的博客，你可以<strong class="lb iu">成为正式的Medium成员</strong>(如果还没有)<a class="ae ky" href="https://lazarevzubov.medium.com/membership" rel="noopener"> <strong class="lb iu">这里</strong> </a>。这样做，你就支持了所有的媒体作者。🙏</p><p id="e918" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…或者你可以给我买杯咖啡！☕</p></div></div>    
</body>
</html>