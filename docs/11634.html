<html>
<head>
<title>Raspberry Pi GPIO Blinking LED in Golang and C</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Golang和C中的Raspberry Pi GPIO闪烁LED</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/raspberry-pi-gpio-blinking-led-in-golang-and-c-5382182fe570?source=collection_archive---------23-----------------------#2022-04-04">https://betterprogramming.pub/raspberry-pi-gpio-blinking-led-in-golang-and-c-5382182fe570?source=collection_archive---------23-----------------------#2022-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ec40" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用Golang、C和GPIO让LED闪烁</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dc08f79753e3c8b1735183e65d73f650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nW76kQtZIspxXULmU1_Exg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><h1 id="b85a" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">内容</h1><ul class=""><li id="6ba1" class="ln lo iq lp b lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">概观</li><li id="4bb2" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated">先决条件</li><li id="7e01" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated">C中闪烁的LED</li><li id="ba12" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated">会有帮助的信息</li><li id="77e2" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated">Go中闪烁的LED</li><li id="17fd" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated">摘要</li></ul><p id="84ab" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">这是探索在Raspberry Pi 3B+上进行GPIO编程的系列文章的第一篇。你可以在这里找到完整的系列<a class="ae mz" href="https://youngkin.github.io/categories/gpio/" rel="noopener ugc nofollow" target="_blank"/>。它是对<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/1.1.1_blinking_led_c.html" rel="noopener ugc nofollow" target="_blank"> Sunfounder闪烁LED项目</a>的补充。代码示例将放在Go和c中。</p><h1 id="64b0" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">概观</h1><p id="9099" class="pw-post-body-paragraph mk ml iq lp b lq lr jr mn ls lt ju mp lu na mr ms lw nb mu mv ly nc mx my ma ij bi translated">我最近对树莓Pi上的GPIO编程产生了兴趣。这是一种很好的方式来观察由软件控制的具体事物。这也是学习一点电子学的好方法。这是我打算撰写的记录我的GPIO编程之旅的系列文章的第一篇。</p><p id="c343" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">为了降低入门门槛，我决定购买一个GPIO/电子设备套件，并重新使用我的一个Raspberry Pis。我选择了<a class="ae mz" href="https://www.sunfounder.com/" rel="noopener ugc nofollow" target="_blank"> Sunfounder </a>，主要是因为他们似乎受到了好评，他们的工具包也得到了好评。我最终选择了sun founder Raspberry Pi Ultimate Starter Kit(又名Raphael ),因为它有很多有趣的电子组件和相关项目。</p><p id="e4a4" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">我马上注意到的一件事是，大多数GPIO文章都假设Python是编程语言。Sunfounder的工具包和相关文档支持多种语言，包括Python和C，但它们倾向于Python，Python中有更多的项目，而C中没有太多。我主要是一名Go开发人员，所以我也对在Go中实现GPIO项目感兴趣。</p><p id="ff6e" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">一些Sunfounder工具包评论提到，项目文档在解释事物如何工作方面有点稀疏和简短。我刚刚开始，我已经看到了一些，但第一个项目，<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/1.1.1_blinking_led_c.html" rel="noopener ugc nofollow" target="_blank"> Sunfounder闪烁LED项目</a>，是非常好的记录。我只是在几个地方挂了一下，没多久我就发现我做错了什么。第二个项目，<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/1.1.2_rgb_led_c.html" rel="noopener ugc nofollow" target="_blank"> RGB LED </a>有点不同。关于解释事物如何工作和为什么工作，这要复杂得多，也不太详细。如果你想做的只是按照食谱来实施这个项目，它就足够好了。但是，如果你想更详细地了解它是如何工作的，为什么会这样，这就很欠缺了。我花了很长时间在这个项目上，试图填补项目文档中缺失的信息。本系列的重点是从编码和电子学的角度填补这个空白。</p><p id="5751" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">本文的重点是<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/1.1.1_blinking_led_c.html" rel="noopener ugc nofollow" target="_blank"> Sunfounder闪烁LED项目</a>。这是针对终极初学者/Raphael工具包的一系列项目中的第一个项目。</p><h1 id="be79" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">先决条件</h1><p id="8580" class="pw-post-body-paragraph mk ml iq lp b lq lr jr mn ls lt ju mp lu na mr ms lw nb mu mv ly nc mx my ma ij bi translated">如果你没有，你需要一个树莓派。我在Raspbian OS的“拉伸”版本中使用了一个树莓派3B+。鉴于Sunfounder Ultimate Starter Kit被宣传为与Raspberry Pi 4一起工作，我希望4系列也能工作。我对其他Raspberry Pi版本不太确定，尤其是26对40 GPIO引脚的版本。</p><p id="fbd6" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">接下来，您需要:</p><ul class=""><li id="cb19" class="ln lo iq lp b lq mm ls mo lu nd lw ne ly nf ma mb mc md me bi translated">一个<a class="ae mz" href="https://www.amazon.com/dp/B082KBF7MM/ref=sspa_dk_detail_4?psc=1&amp;pd_rd_i=B082KBF7MM&amp;pd_rd_w=1tGTV&amp;pf_rd_p=887084a2-5c34-4113-a4f8-b7947847c308&amp;pd_rd_wg=fX8JB&amp;pf_rd_r=44DE0RS1E9FD42RBYC7R&amp;pd_rd_r=47cbdc7f-7834-455f-9429-ef74a438bd45&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUFVVkdZVUZRNUw3ODkmZW5jcnlwdGVkSWQ9QTA4MzI4MzYyU0VLNzBJM0cxRUVMJmVuY3J5cHRlZEFkSWQ9QTA0Mjk1NTMzSzNSWlNFUjU0NURBJndpZGdldE5hbWU9c3BfZGV0YWlsJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noopener ugc nofollow" target="_blank">试验板</a></li><li id="5bc9" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated"><a class="ae mz" href="https://www.amazon.com/dp/B08HZ26ZLF/ref=syn_sd_onsite_desktop_19?psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExRFpLWElCRjg1MUNMJmVuY3J5cHRlZElkPUEwMjMyMTE1M01aOFE3U1BQS09YSiZlbmNyeXB0ZWRBZElkPUEwODE5NTMxMktEMTlZRjEyQjBJNiZ3aWRnZXROYW1lPXNkX29uc2l0ZV9kZXNrdG9wJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noopener ugc nofollow" target="_blank">跳线</a></li><li id="9498" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated"><a class="ae mz" href="https://www.amazon.com/ELEGOO-Electronics-Component-resistors-Potentiometer/dp/B01ERPXFZK/ref=sr_1_7_sspa?crid=3EJQNCOWP00IF&amp;dchild=1&amp;keywords=resistors&amp;qid=1631478270&amp;s=industrial&amp;sprefix=resis%2Cindustrial%2C219&amp;sr=1-7-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEzTktVSzNYMkxMSDlKJmVuY3J5cHRlZElkPUEwMjAzMDY0NVRERkFLVjVRTUFWJmVuY3J5cHRlZEFkSWQ9QTA5MjM2NjUxUFZYQUlETVAzRDA3JndpZGdldE5hbWU9c3BfbXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noopener ugc nofollow" target="_blank">一个220欧姆的电阻</a></li><li id="1a38" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma mb mc md me bi translated"><a class="ae mz" href="https://www.amazon.com/ELEGOO-Electronics-Component-resistors-Potentiometer/dp/B01ERPXFZK/ref=sr_1_7_sspa?crid=3EJQNCOWP00IF&amp;dchild=1&amp;keywords=resistors&amp;qid=1631478270&amp;s=industrial&amp;sprefix=resis%2Cindustrial%2C219&amp;sr=1-7-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEzTktVSzNYMkxMSDlKJmVuY3J5cHRlZElkPUEwMjAzMDY0NVRERkFLVjVRTUFWJmVuY3J5cHRlZEFkSWQ9QTA5MjM2NjUxUFZYQUlETVAzRDA3JndpZGdldE5hbWU9c3BfbXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noopener ugc nofollow" target="_blank">安LED </a></li></ul><p id="7d4f" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">您还应该考虑使用一个带有T型适配器的<a class="ae mz" href="https://www.amazon.com/dp/B082PRVRYR/ref=sspa_dk_detail_2?psc=1&amp;pd_rd_i=B082PRVRYR&amp;pd_rd_w=8mKhr&amp;pf_rd_p=887084a2-5c34-4113-a4f8-b7947847c308&amp;pd_rd_wg=e9psa&amp;pf_rd_r=S09F37DF2G5FW8B8GX4B&amp;pd_rd_r=c065c120-e60b-45e9-b93b-f581f048cf46&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUFCMzhUQ09COFI2VlMmZW5jcnlwdGVkSWQ9QTA5NjU2ODUxRDkxNEYwSTYwV09KJmVuY3J5cHRlZEFkSWQ9QTAxOTg1MTUyRUhEUlc2VzQ2VDQ4JndpZGdldE5hbWU9c3BfZGV0YWlsJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noopener ugc nofollow" target="_blank"> 40引脚母对母，将GPIO输出连接到试验板上。您只能使用跳线，但电缆会使事情变得更容易，并有助于防止损坏Raspberry Pi上的GPIO引脚。如果您选择不购买带T型适配器的40针电缆，您需要购买</a><a class="ae mz" href="https://www.amazon.com/SinLoon-Breadboard-Arduino-Circuit-40-Pack/dp/B08M3QLL3Q/ref=pd_sbs_7/143-0445142-7950409?pd_rd_w=sVLrc&amp;pf_rd_p=8b76d7a7-ab83-4ddc-a92d-e3e33bfdbf03&amp;pf_rd_r=CDM5TGJT03VKF0ZFB577&amp;pd_rd_r=8e58fd82-8503-41cf-b8f2-c78eaeb78d25&amp;pd_rd_wg=tT1U0&amp;pd_rd_i=B08M3QLL3Q&amp;psc=1" rel="noopener ugc nofollow" target="_blank">公母跳线</a>。</p><p id="3230" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">然而，单独购买所有这些东西会比一套花费更多。<a class="ae mz" href="https://www.amazon.com/dp/B06WP7169Y/ref=sspa_dk_detail_5?psc=1&amp;pd_rd_i=B06WP7169Y&amp;pd_rd_w=OZVyf&amp;pf_rd_p=887084a2-5c34-4113-a4f8-b7947847c308&amp;pd_rd_wg=0V0IH&amp;pf_rd_r=623YJTBQ2CN2B2GYXQG5&amp;pd_rd_r=faa61f0f-3aec-4cf0-8e7e-d44eb1b3b92f&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEyUVlDQzMzVVZBMFYxJmVuY3J5cHRlZElkPUEwMzExNzk4MUhGSjFSS0VKTlBROCZlbmNyeXB0ZWRBZElkPUEwMzYwNjg2UUdMRU44N0YzNzIwJndpZGdldE5hbWU9c3BfZGV0YWlsJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noopener ugc nofollow" target="_blank">这里有一个简单的工具包，上面所有的</a>。如果你想了解这个系列，我推荐你购买<a class="ae mz" href="https://www.amazon.com/gp/product/B09BMVT4CB/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&amp;psc=1" rel="noopener ugc nofollow" target="_blank">sun founder Raspberry Pi Ultimate Starter Kit</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/620811adbbbdb21ec26cf7d8be17f64c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uYIgjshQqjJNq5P_xNJ8ow.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nh">sun founder Ultimate Starter/Raphael套件—图片来源:作者</em></p></figure><p id="312e" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">要编译和运行C程序，你需要WiringPi库。很容易得到:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="b33e" class="nn kw iq nj b gy no np l nq nr">sudo apt-get install wiringpi</span></pre><p id="914b" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">然后使用以下命令测试安装:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="8058" class="nn kw iq nj b gy no np l nq nr">pi@pi-node1:~/go/src/github.com/youngkin/gpio/rgbled $ gpio -v<br/>gpio version: 2.50<br/>Copyright (c) 2012-2018 Gordon Henderson<br/>This is free software with ABSOLUTELY NO WARRANTY.<br/>For details type: gpio -warranty</span><span id="e302" class="nn kw iq nj b gy ns np l nq nr">Raspberry Pi Details:<br/>  Type: Pi 3B+, Revision: 03, Memory: 1024MB, Maker: Sony<br/>  * Device tree is enabled.<br/>  *--&gt; Raspberry Pi 3 Model B Plus Rev 1.3<br/>  * This Raspberry Pi supports user-level GPIO access.</span></pre><p id="dd68" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">在上面你会注意到<code class="fe nt nu nv nj b">gpio version: 2.50</code>。如果您使用的是Rasberry Pi 4，请使用Sunfounder <a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/check_the_wiringpi_c.html" rel="noopener ugc nofollow" target="_blank">中给出的说明检查接线Pi </a>。</p><p id="1488" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">您还需要一些基本的C和Go编程知识，并且熟悉登录到Raspberry Pi终端，或者登录到一些操作系统版本附带的桌面GUI。根据您采用的方法，您可能需要将键盘和显示器连接到Raspberry Pi。我只是简单地进入Pi。您还需要熟悉如何使用像Vi或nano这样的编辑器。</p><p id="3dec" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">我选择不从Sunfounder网站下载代码，而是自己编写代码，即使我所做的只是直接从项目文档中复制。因此，我创建了自己的位置来创建代码。其实<a class="ae mz" href="https://github.com/youngkin/gpio" rel="noopener ugc nofollow" target="_blank">我的代码在Github </a>里。如果你喜欢下载代码，你可以选择从我的Github库下载、克隆或派生代码。另外，用Go编写的项目代码也位于那里。该项目的代码位于<a class="ae mz" href="https://github.com/youngkin/gpio/tree/main/ledblink" rel="noopener ugc nofollow" target="_blank"> gpio/ledblink </a>。</p><p id="1030" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">如果您对在Raspberry Pi上进行Go开发感兴趣，您需要将开发环境安装到Raspberry Pi上。<a class="ae mz" href="https://www.jeremymorgan.com/tutorials/raspberry-pi/install-go-raspberry-pi/" rel="noopener ugc nofollow" target="_blank">这里有一个简单的来源</a>解释了如何实现这一点。这个源代码有点过时了，但是唯一重要的问题是Go to install的版本。来源显示正在安装围棋1.14.4.linux-arm64.tar.gz和1.14.4.linuxarmv6l.tar.gz的<strong class="lp ir"><strong class="lp ir">。目前的版本是<strong class="lp ir">1.17.1.linux-arm64.tar.gz</strong>和<strong class="lp ir">1.17.1.linuxarmv6l.tar.gz</strong>。对于树莓派3B+正确的选择将是<strong class="lp ir">1.17.1.linuxarmv6l.tar.gz</strong>。另一个是为64位系统设计的，比如Raspberry Pi 4系列。</strong></strong></p><p id="c55a" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">最后，如果你想脱离Sunfounder文档的食谱风格，我假设你对Linux有基本的了解。例如，我不会解释什么是根特权。</p><h1 id="f6a8" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">C中闪烁的LED</h1><p id="3649" class="pw-post-body-paragraph mk ml iq lp b lq lr jr mn ls lt ju mp lu na mr ms lw nb mu mv ly nc mx my ma ij bi translated">如上所述，本文是关于<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/1.1.1_blinking_led_c.html" rel="noopener ugc nofollow" target="_blank">闪烁LED项目</a>。这个项目的Sunfounder文档非常好。您应该从<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/introduction.html" rel="noopener ugc nofollow" target="_blank">简介</a>开始，逐步完成以下章节，直至<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/play_with_c.html" rel="noopener ugc nofollow" target="_blank">与C一起玩</a>章节。您应该按照项目文档或下图中的描述设置试验板:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/794ea744f09e4c576a79b75baa9456c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bCr41y0djDkilkWYoCf0pg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nh"> Sunfounder闪烁LED试验板设置—图片来源:</em><a class="ae mz" href="http://_images/image49.png" rel="noopener ugc nofollow" target="_blank"><em class="nh">sun founder</em></a></p></figure><p id="25da" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">因为Sunfounder项目文档非常好，所以我只有几点意见。</p><h1 id="0655" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">会有帮助的信息</h1><p id="aa4c" class="pw-post-body-paragraph mk ml iq lp b lq lr jr mn ls lt ju mp lu na mr ms lw nb mu mv ly nc mx my ma ij bi translated">该项目的文件规定“<em class="nx">因此，要打开一个LED，我们需要使GPIO17低(0V)电平。</em>”。它没有解释的是为什么。原因是220欧姆电阻器的一端连接到3.3伏电源，另一端连接到LED阳极(正极端子)。GPIO17连接到LED的阴极(负端)。只有当电流从阳极流向阴极时，发光二极管才会发光。Raspberry Pi上的GPIO引脚(如GPIO17)通常默认为高电平(3.3伏)。将3.3伏电源连接到阳极，并将3.3伏GPIO17引脚连接到阴极侧，则没有电流流过电路。所以LED不会打开。将GPIO17设置为低电平0伏，允许电流流动，点亮LED。</p><p id="6a00" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">这是一个小问题，但是程序不需要以root (sudo)权限运行。简单的运行<code class="fe nt nu nv nj b">./BlinkingLed</code>，对比<code class="fe nt nu nv nj b">sudo ./BlinkingLed</code>，就可以了。对于GPIO程序来说，情况并非总是如此。当运行一个需要root权限的程序时，我会指出这一点。</p><h1 id="0f92" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">Go中闪烁的LED</h1><p id="c629" class="pw-post-body-paragraph mk ml iq lp b lq lr jr mn ls lt ju mp lu na mr ms lw nb mu mv ly nc mx my ma ij bi translated">这个版本的闪烁LED将与C版本的试验板设置一起工作。</p><p id="f41f" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">首先，我们需要一个Go库来驱动GPIO接口。我使用<a class="ae mz" href="https://github.com/stianeikeland/go-rpio" rel="noopener ugc nofollow" target="_blank"> go-rpio </a>有几个原因:</p><ol class=""><li id="94ba" class="ln lo iq lp b lq mm ls mo lu nd lw ne ly nf ma ny mc md me bi translated">它似乎被广泛使用</li><li id="b38b" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma ny mc md me bi translated">它看起来相当完整</li><li id="8d9e" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma ny mc md me bi translated">它相对活跃</li><li id="f35b" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma ny mc md me bi translated">它附带了示例代码和良好的文档</li><li id="5dc6" class="ln lo iq lp b lq mf ls mg lu mh lw mi ly mj ma ny mc md me bi translated">它的API类似于WiringPi</li></ol><p id="f467" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">另一个选项是<a class="ae mz" href="https://github.com/periph/host" rel="noopener ugc nofollow" target="_blank"> periph </a>(代码)与<a class="ae mz" href="https://periph.io/" rel="noopener ugc nofollow" target="_blank">文档</a>。它更活跃，文档也非常好，比go-rpio好。使用periph做这个项目是微不足道的。总体而言，对于我能够找到的LED示例，go-rpio更符合我的要求，特别是关于使用脉宽调制(PWM，在本系列的下一篇文章中有更多介绍)的<a class="ae mz" href="https://docs.sunfounder.com/projects/raphael-kit/en/latest/1.1.2_rgb_led_c.html" rel="noopener ugc nofollow" target="_blank"> RGB LED </a>。但是这是go-rpio的一个很好的替代，反之亦然。</p><p id="557c" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">你可以只使用<a class="ae mz" href="https://github.com/stianeikeland/go-rpio/blob/master/examples/blinker/blinker.go" rel="noopener ugc nofollow" target="_blank"> rpio-go blinker.go示例</a>。它使用<code class="fe nt nu nv nj b">rpio.Pin.Toggle()</code>。我创建了一个包含C和Go示例的<a class="ae mz" href="https://github.com/youngkin/gpio" rel="noopener ugc nofollow" target="_blank"> Github库</a>。我的Go版本的<code class="fe nt nu nv nj b">blinker</code>使用直接写入而不是<code class="fe nt nu nv nj b">rpio.Pin.Toggle</code>。我认为展示一种可选的方法会有所帮助，特别是因为后面的项目将使用直接写入。我的<a class="ae mz" href="https://github.com/youngkin/gpio" rel="noopener ugc nofollow" target="_blank"> gpio库</a>使用的是Go的模块系统，它会在构建时自动下载<code class="fe nt nu nv nj b">rpio-go</code>库。这是我对<code class="fe nt nu nv nj b">blinker</code>的看法。我不会解释Go sytax，因为我假设你熟悉Go。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="7049" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">第15行导入go-rpio库，该库提供与GPIO板交互所需的功能。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="4d87" class="nn kw iq nj b gy no np l nq nr">"github.com/stianeikeland/go-rpio/v4"</span></pre><p id="bed4" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">程序的其余部分通过嵌入的注释来解释。可以在命令提示符下键入<code class="fe nt nu nv nj b">go run blinkingled.go</code>并按回车键来运行该程序。</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="8e7e" class="pw-post-body-paragraph mk ml iq lp b lq mm jr mn ls mo ju mp lu mq mr ms lw mt mu mv ly mw mx my ma ij bi translated">本文展示了如何配置一个带有LED的试验板，它可以由用C和Go编写的程序来控制。请随意提出修改建议或问题。</p></div></div>    
</body>
</html>