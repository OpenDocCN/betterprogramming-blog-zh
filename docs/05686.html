<html>
<head>
<title>Launch Screens in Xcode: All the Options Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Xcode中的启动屏幕:解释了所有选项</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/launch-screens-in-xcode-all-the-options-explained-7a7a7992f535?source=collection_archive---------5-----------------------#2020-07-28">https://betterprogramming.pub/launch-screens-in-xcode-all-the-options-explained-7a7a7992f535?source=collection_archive---------5-----------------------#2020-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a75b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">没有故事板的启动屏幕非常适合SwiftUI</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7e613f7614a0a0e8bab52ab99618db51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UQVteaRb5hOWCt4L"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> SpaceX </a>拍摄的照片。</p></figure><p id="b39a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你的应用程序启动时，会出现启动屏幕，给用户一种你的应用程序速度快、响应快的印象。加载应用程序后，启动屏幕将替换为应用程序的第一个屏幕，用户可以开始使用应用程序。</p><p id="9120" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，Xcode会创建一个故事板，您可以使用它来设置加载屏幕。虽然这在大多数情况下都很好，但Xcode 12和iOS 14中还有令人兴奋的新选项。</p><p id="2a4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是在我们开始之前，让我们看看我们是如何开始实现这一点的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0dad" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">启动屏幕的历史</h1><p id="f820" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">启动屏幕有相当长的历史。在Xcode 6之前，我们唯一的选择是在资产目录中提供静态图像。这已经比以前更好了，因为我们曾经为那些要显示的图像设置特定的文件名。</p><p id="92b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Xcode 6自带的iOS 8允许我们用故事板文件替换静态图像。这已经简化并改进了我们定义加载屏幕的方式，但是选项仍然有限。启动屏幕被大量缓存，动态替换是不可能的。然而，使用标签、图像视图和其他界面元素消除了打开图像编辑应用程序来导出所有正确尺寸的图像的需求。</p><p id="d736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Xcode 12和iOS 14改进了本文中描述的启动屏幕。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f728" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何使用启动屏幕的指南</h1><p id="833d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们深入研究如何和何时之前，最好了解一下启动屏幕的目的。做错很难，做好很容易。</p><p id="fae0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当准备像启动屏幕这样的实现时，重温苹果的<a class="ae ky" href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/launch-screen/" rel="noopener ugc nofollow" target="_blank">人机界面指南</a>总是好的。这些指导方针为你给用户留下良好的第一印象提供了方向和正确的开端。</p><p id="f412" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在不引用指南中所有内容的情况下，我认为最重要的是理解几件事:</p><ul class=""><li id="096d" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">不鼓励使用文本，因为本地化不可用。</li><li id="07dc" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">任何使用的图像都应该适合不同的屏幕尺寸。</li><li id="2bb3" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">屏幕应该尽可能靠近应用程序的首页。</li></ul><p id="f166" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一点给出了方向。你的闪屏越靠近你的第一页，你的应用程序的第一印象就越平滑。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ab2d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">开发期间清除缓存</h1><p id="0a7c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我开始在这里分享可能的实现，我打赌你会遇到启动屏幕不更新的情况。iOS将您的加载视图缓存为图像，以提高性能。因此，我想给你一些关于如何清除缓存的提示，以确保你在花几个小时找出你的设置有什么问题之前看到一个更新的屏幕。</p><p id="abd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在iOS 14上测试的大多数情况下，我都看到屏幕正确更新。但是，如果没有，您可以尝试以下方法之一:</p><ul class=""><li id="e20a" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">使用<code class="fe nn no np nq b">Product ➞ Clean Build Folder</code>清理您的构建文件夹。</li><li id="3159" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">从模拟器中删除应用程序，然后重新安装。</li></ul><p id="0b07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为最后的手段，你可以重置模拟器。然而，这既费时又不会让你真正有效率。Gui兰博提供了另一个未记录在案的技巧，这个技巧没有在iOS 14+上测试过，但可能也能工作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="3718" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以从您的<code class="fe nn no np nq b">didFinishLaunchingWithOptions</code>方法中调用这个方法。但是，请确保您只在开发过程中启用这段代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a2d8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">添加睡眠以延迟应用程序的启动</h1><p id="434d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">是的，你没看错。在开发启动屏幕的过程中，添加一个延迟会很有用，这样你就可以花更长的时间来查看你实现的设计。如果你的应用程序启动速度很快，它的启动屏幕可能只会出现不到一秒钟。</p><p id="7808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在开发过程中使用了以下代码，所以我可以花两秒钟来验证我的实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8e90" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">实现启动屏幕的选项</h1><p id="3ba9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">既然您已经了解了关于启动屏幕的所有必需信息，那么是时候深入了解Xcode 12及更高版本中的可用选项了。有两种实现启动屏幕的方法:</p><ol class=""><li id="9fa7" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nt nf ng nh bi translated">使用故事板(默认)。</li><li id="921a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nt nf ng nh bi translated">使用一个<code class="fe nn no np nq b">plist</code>配置，你可以设置一个图像，启动图像是否应该考虑安全区域的插入，背景颜色，导航栏的可见性，标签栏的可见性，工具栏的可见性，以及每个URL方案的启动屏幕配置。</li></ol><p id="8c43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">配置选项列表<code class="fe nn no np nq b">plist</code>是Xcode 12中的新功能，它允许你在不使用故事板的情况下设置启动屏幕。这对于SwiftUI应用程序来说是很棒的，因为在swift ui应用程序中，仍然有一个故事板文件作为你的“启动页面”有点难看</p><h2 id="3e1c" class="nu md it bd me nv nw dn mi nx ny dp mm li nz oa mo lm ob oc mq lq od oe ms of bi translated">使用故事板文件</h2><p id="5411" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">从Xcode 6开始，这是默认的可用选项，与使用界面构建器构建视图非常相似。</p><p id="c5c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开在应用目标的“常规”选项卡中配置的<code class="fe nn no np nq b">LaunchScreen.storyboard</code>文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/0c00b1c41af6bdbb936696b7bede7b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8qh_IqG-J_hNDf0L.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Xcode中的启动屏幕故事板配置</p></figure><p id="ef23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您可以像使用界面构建器构建视图一样构建故事板:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/17d36e1f1d8c334bf5435c1dcbeaa550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QRTe5GUE7-6bJ9UG.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">界面生成器中配置的启动屏幕。</p></figure><h2 id="a088" class="nu md it bd me nv nw dn mi nx ny dp mm li nz oa mo lm ob oc mq lq od oe ms of bi translated">使用plist配置</h2><p id="f049" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">另一个选择是使用<code class="fe nn no np nq b">plist</code>配置，随着SwiftUI取代故事板(在这里扮演上帝)，这很可能是构建启动屏幕的未来。</p><p id="6602" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有在显示原始键的情况下，移除名为“启动屏幕界面文件基本名称”或<code class="fe nn no np nq b">UILaunchStoryboardName</code>的故事板键，此配置才会生效。</p><p id="2091" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你开始在你的<code class="fe nn no np nq b">Info.plist</code>文件中配置你的启动屏幕，你会发现发现选项很容易，因为它们会在添加新密钥时列出。首先添加一个名为“启动屏幕”的新键<code class="fe nn no np nq b">UILaunchScreen</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/8bab477220716e00388bdebde0130c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z7B8oHlPJeWRe2fY.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在info.plist文件中配置启动屏幕。</p></figure><p id="4fcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个字典中，您可以设置可用选项的组合。这意味着您可以设置背景颜色和图像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/52ff168eac80abe54ed42a40107b4812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*V53b-j7CR5MhN78-.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">组合图像和背景色。</p></figure><p id="cc9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">背景图像和颜色在资产目录中配置:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/b22b3151b74715df6fc24f4255f4a91b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uJ-Y5iigMgtK1D9S.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">背景颜色和图像的资产目录配置。</p></figure><p id="bbaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用的是<a class="ae ky" href="https://www.avanderlee.com/xcode/svg-image-assets/" rel="noopener ugc nofollow" target="_blank">单尺度SVG图像</a>，它可以自动调整不同的屏幕尺寸。</p><p id="29ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在同一个配置字典中，我们可以切换导航栏、选项卡栏和工具栏的可见性。这可能会导致以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/740bc78783c73f234cc908b129052db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/0*ft3_IaWlQgQWUyPb.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有导航栏和标签栏的启动屏幕示例。</p></figure><p id="0575" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我的应用程序的第一个屏幕同时显示标签栏和导航栏，这将是一个很好的加载屏幕。过渡将会是平稳和自然的！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e32d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">根据URL方案配置启动屏幕</h1><p id="1870" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Xcode 12附带的另一个新选项是可以为每个URL配置不同的加载屏幕。如果你的应用程序使用<a class="ae ky" href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app" rel="noopener ugc nofollow" target="_blank">自定义URL</a>来深度链接到你的应用程序，你可能会发现根据方案调整加载屏幕是很有用的，这样你的应用程序才能平稳过渡。</p><p id="9552" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以用<a class="ae ky" href="https://www.avanderlee.com/workflow/rocketsim-simulator-recording/" rel="noopener ugc nofollow" target="_blank"> RocketSim </a>测试你的深度链接和通用链接，快速迭代，提高生产力。</p><p id="91da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以配置以下选项:</p><ul class=""><li id="08d7" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">默认启动屏幕</li><li id="d793" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">根据URL方案启动要使用的屏幕</li></ul><p id="f7df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，只显示<code class="fe nn no np nq b">launchscreen://</code> URL方案的选项卡和导航栏:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/9d5618339ec081291437f17e0460a678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TAP2-eEiB6O-uvTQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">多个启动屏幕的配置示例</p></figure><p id="adbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个键叫做<code class="fe nn no np nq b">UILaunchScreens</code>,名为“启动屏幕”,要求你提供一个默认配置、启动屏幕定义和URL关联。</p><p id="81a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">URL关联在字典中定义，关键字设置为URL方案。像<code class="fe nn no np nq b">launchscreen://</code>这样的URL方案被定义为<code class="fe nn no np nq b">launchscreen</code>。该值应该与启动屏幕定义的标识符相匹配。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1016" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="56b0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">启动屏幕有改进的历史，Xcode 12为这个故事增添了新的篇章。为每个URL方案定义不同的启动屏幕，切换工具栏的可见性，并在您的<code class="fe nn no np nq b">info.plist</code>中定义一个配置，这样就不需要启动屏幕故事板了。</p><p id="7993" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>