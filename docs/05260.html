<html>
<head>
<title>Monitor your Kubernetes Resources With kubewatch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用kubewatch监控您的Kubernetes资源</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/monitor-your-kubernetes-resources-with-kubewatch-d40ecf420f28?source=collection_archive---------4-----------------------#2020-06-24">https://betterprogramming.pub/monitor-your-kubernetes-resources-with-kubewatch-d40ecf420f28?source=collection_archive---------4-----------------------#2020-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8263" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">观看Kubernetes活动，并向Slack发送通知</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/928147bb2c1050f82756d34e83a4ccee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYxPEIohx99eJA403WI4wQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wocintechchat?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜@ wocintechchat.com</a>在<a class="ae ky" href="/collections/10646975/wise-humanity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="245e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kubernetes是一个强大的容器编排器，它为您提供了许多管理应用程序工作负载的特性。Kubernetes的绝对灵活性进一步普及了容器，现在它是大多数设置的标准。</p><p id="8f6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管Kubernetes功能丰富，但它没有提供开箱即用的监控解决方案。您需要在集群上安装Prometheus或Datadog等监控工具。</p><p id="a5e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/bitnami-labs/kubewatch" rel="noopener ugc nofollow" target="_blank"> Kubewatch </a>是一款开源的Kubernetes watcher，用Go编写，由Bitnami Labs开发。它通过在Kubernetes集群和Slack通道之间提供一个简单易用的接口来补充监控解决方案。它监视指定的Kubernetes资源的变化，并将其报告给Slack通道。</p><p id="14c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然Prometheus和Datadog是全面的监控解决方案，为您提供了许多功能，但它们的安装和操作更加复杂。如果您希望获得Kubernetes配置更改的警报，kubewatch是一个很好的候选，它是对它们的补充。</p><p id="420b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kubewatch还支持其他协作平台，如HipChat、Mattermost和Flock。您还可以为您的定制集成触发通用webhooks，例如使用像ServiceNow这样的ITSM工具。</p><p id="221b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它很容易安装并作为Kubernetes部署运行。你可以安装它作为一个舵图或通过kubectl。让我们通过一个动手练习来更详细地了解kubewatch。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c875" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">先决条件</h1><p id="ffb1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您将需要以下内容:</p><ul class=""><li id="dc78" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">一个正在运行的Kubernetes集群，您需要拥有集群管理权限</li><li id="1a1a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">呆滞账户</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cc8d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">配置时差</h1><p id="5471" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们从配置Slack开始。我们需要创建一个Slack机器人，并邀请机器人到Slack通道，我们希望kubewatch在其中发布通知。Kubewatch使用webhooks来显示通知。</p><p id="462f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击<a class="ae ky" href="https://my.slack.com/services/new/bot" rel="noopener ugc nofollow" target="_blank">这个</a>链接创建一个Slack bot</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/79f7cc7f2a272f4252d203620668cba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ef7DbYqgNNfr7E5u4V9n-w.png"/></div></div></figure><p id="9fd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击“添加机器人集成”在下一页检索生成的bot令牌。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/5aea3fecd5017ed76f5b45fb52711aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1Tuc62nJewKdSYfLeGh4Q.png"/></div></div></figure><p id="804a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到您的Slack工作区，为Kubernetes通知创建一个新的通道(或者使用一个现有的通道来发布通知)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/208cf68940a694739d36fc8e2060f344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*Ehsr_ib8zaJDj2BjNCxitg.png"/></div></figure><p id="e751" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在空闲消息区输入<code class="fe nq nr ns nt b">/invite @name_of_your_bot</code>邀请机器人加入你的频道。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/78a51ca73a29b6cc51d84a510137cc30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RN6ISw0UVtWam3PnwRbQ9Q.png"/></div></div></figure><p id="cd89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的Slack频道现在可以接收来自kubewatch的通知了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1e1a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装kubewatch</h1><p id="a387" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Kubewatch使用一个配置映射来保存kubewatch配置。用Slack令牌和通道名创建一个kubewatch配置映射。您还可以修改标志来配置kubewatch，以通知特定类型的Kubernetes资源的更改。以下配置仅监控pod和服务。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="e859" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为kubewatch创建一个服务帐户，以便与Kubernetes资源进行交互，并通过一个<code class="fe nq nr ns nt b">ClusterRole</code>和一个<code class="fe nq nr ns nt b">ClusterRoleBinding</code>分配相关权限。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="b94d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在创建一个kubewatch部署</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="6b3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查pod是否正在运行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="76a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来查看kubewatch容器日志:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="0411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">观察松弛频道的通知:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/62b7efb2ddfac2c7968759db0901f705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tynVxgMmRlAuDZ5DtM5hKQ.png"/></div></div></figure><p id="1def" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！恭喜你！Kubewatch现在正在监视整个集群，并向您的Slack通道发送数据。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a3fe" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="1b71" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">感谢阅读！我希望你喜欢这篇文章。</p><p id="38f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">设置kubewatch非常简单，可以为您的团队提供关于Kubernetes集群状态和可能发生的任何变化的持续警报。这是在你的团队中开始建立监控和协作的一个很好的工具。</p></div></div>    
</body>
</html>