<html>
<head>
<title>3 Uncommon Bash Tricks That You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的3个不常见的Bash技巧</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-uncommon-bash-tricks-that-you-should-know-c0fc988065c7?source=collection_archive---------7-----------------------#2021-01-14">https://betterprogramming.pub/3-uncommon-bash-tricks-that-you-should-know-c0fc988065c7?source=collection_archive---------7-----------------------#2021-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0aad" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用这些未充分利用的Bash模式，在终端上输入更少的内容</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9b8c734ee157f363e38a0b97c471a7ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-UdH52A57htDgdu0.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片—意大利马泰拉</p></figure><p id="a1bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">优秀的开发人员打字更少</strong>——允许他们:</p><ul class=""><li id="0a8b" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">工作更快</li><li id="f7cc" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">工作更精确</li><li id="e33b" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">少犯错误</li><li id="38cb" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">减轻他们疲惫双手的压力</li></ul><p id="3694" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">减少输入的一个方法是正确使用shell(通常是Bash)。这就是这篇文章的内容——三个Bash技巧，让你少打字。</p><p id="15c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这篇文章中提到的三个Bash技巧是:</p><ol class=""><li id="bd19" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq mf lx ly lz bi translated"><strong class="kx ir">带<code class="fe mg mh mi mj b">{a,b}</code>的参数扩展</strong>——避免重新键入单个命令</li><li id="6455" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq mf lx ly lz bi translated"><strong class="kx ir">使用<code class="fe mg mh mi mj b">$_</code>访问最后一个参数</strong>——避免从最后一个命令重新输入</li><li id="16ab" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq mf lx ly lz bi translated"><strong class="kx ir">用<code class="fe mg mh mi mj b">^old^new</code>快速替换</strong>——快速改变最后一个命令的一部分</li></ol><p id="7d44" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所有这些技巧也都与zsh兼容。</p><p id="c646" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mk">这篇文章遵循了用</em> <code class="fe mg mh mi mj b">$</code>启动shell命令的惯例。<em class="mk">对于将被shell扩展的命令，我将在下面显示不带</em>T4的扩展命令。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="f32b" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">用<code class="fe mg mh mi mj b">{a,b}</code>进行参数扩展</h1><p id="5a37" class="pw-post-body-paragraph kv kw iq kx b ky nk jr la lb nl ju ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated">在编写单个命令时，重复自己是很常见的。</p><p id="dcab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以改变一个文件的后缀为例，我们可以使用<code class="fe mg mh mi mj b">mv</code>来完成:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="dd59" class="nt mt iq mj b gy nu nv l nw nx">$ mv README.txt README.md</span></pre><p id="cd88" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意我们如何写两次<code class="fe mg mh mi mj b">README</code>？</p><p id="696c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">参数扩展将避免这种重复——允许我们更改文件的后缀，而无需两次键入<code class="fe mg mh mi mj b">README</code>:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="8082" class="nt mt iq mj b gy nu nv l nw nx">$ mv README.{txt,md}<br/>mv README.txt README.md</span></pre><p id="2d03" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们使用的参数展开是<code class="fe mg mh mi mj b">{txt,md}</code>，展开成两个实参— <code class="fe mg mh mi mj b">txt md</code>(中间用空格隔开)。</p><p id="6146" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">参数扩展为花括号内的每个元素创建一个参数，用逗号分隔</strong>:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="a28a" class="nt mt iq mj b gy nu nv l nw nx">$ echo {1,2,3}<br/>1 2 3</span><span id="9e52" class="nt mt iq mj b gy ny nv l nw nx">$  echo pre{1,2,3}fix<br/>pre1fix pre2fix pre3fix</span></pre><p id="3946" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">空条目将创建一个没有替代内容的参数:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="10f4" class="nt mt iq mj b gy nu nv l nw nx">$ echo pre{,1,2}fix<br/>prefix pre1fix pre2fix</span></pre><p id="106d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一个例子——将<code class="fe mg mh mi mj b">models</code>文件夹重命名为<code class="fe mg mh mi mj b">data</code>文件夹中的<code class="fe mg mh mi mj b">ml</code>:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="839d" class="nt mt iq mj b gy nu nv l nw nx">$ mv data/models data/ml</span></pre><p id="e89a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以通过使用参数扩展来节省重新键入<code class="fe mg mh mi mj b">data/</code>:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="df6a" class="nt mt iq mj b gy nu nv l nw nx">$ mv data/{models,ml}<br/>mv data/models data/ml</span></pre><p id="3538" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以将参数扩展用于一系列数字，这对创建编号目录很有用:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="ae4a" class="nt mt iq mj b gy nu nv l nw nx">$ mkdir data{0..2}<br/>mkdir data0 data1 data2</span></pre><p id="c77a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">我们还可以在参数</strong>中进行参数扩展——例如，在路径中途更改文件夹:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="2876" class="nt mt iq mj b gy nu nv l nw nx">$ cat models/{baseline,final}/data.csv<br/>cat models/baseline/data.csv models/final/data.csv</span></pre><p id="5f03" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后一个例子，使用三个参数——将两个Python测试文件移动到“tests”文件夹中:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="83e7" class="nt mt iq mj b gy nu nv l nw nx">$ mv tests{_unit.py,_system.py,}<br/>mv tests_unit.py tests_system.py tests</span></pre><h2 id="6897" class="nt mt iq bd mu nz oa dn my ob oc dp nc le od oe ne li of og ng lm oh oi ni oj bi translated">摘要</h2><p id="dc13" class="pw-post-body-paragraph kv kw iq kx b ky nk jr la lb nl ju ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated">任何时候，当你在一个命令中多次重新输入某个内容时，参数扩展都有可能帮助你拯救疲惫的双手。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="457c" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">使用<code class="fe mg mh mi mj b">$_</code>访问最后一个参数</h1><p id="cc51" class="pw-post-body-paragraph kv kw iq kx b ky nk jr la lb nl ju ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated">终端由一系列命令操作——我们经常在多个命令中重用信息。</p><p id="569b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们之前的技巧，参数扩展，是关于在单个命令上输入更少的内容— <strong class="kx ir">这个技巧是关于在多个命令上输入更少的内容</strong>。</p><p id="4973" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">举一个简单的例子，制作一个文件夹并移入其中:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="7e3c" class="nt mt iq mj b gy nu nv l nw nx">$ mkdir temp<br/>$ cd temp</span></pre><p id="b4ae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意，我们在第二个命令中再次重用了参数<code class="fe mg mh mi mj b">temp</code>？</p><p id="0c5a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">我们可以保存重新输入的</strong> <code class="fe mg mh mi mj b">temp</code> <strong class="kx ir">，并使用</strong> <code class="fe mg mh mi mj b">$_</code>将其从之前的命令中提前:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="d422" class="nt mt iq mj b gy nu nv l nw nx">$ mkdir temp<br/>$ cd $_<br/>cd temp</span></pre><p id="8070" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面，我们使用<code class="fe mg mh mi mj b">$_</code>来访问前一个命令的最后一个参数，在本例中是<code class="fe mg mh mi mj b">temp</code>。</p><p id="98a5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">想要重用最后一个命令的最后一个参数(这里是<code class="fe mg mh mi mj b">temp</code>)的用例非常常见，以至于Bash将它存储在一个特殊的变量<code class="fe mg mh mi mj b">_</code>中，我们使用一个<code class="fe mg mh mi mj b">$</code>前缀来访问这个变量(与<code class="fe mg mh mi mj b">$PATH</code>或<code class="fe mg mh mi mj b">$HOME</code>相同)。</p><p id="6169" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<code class="fe mg mh mi mj b">$_</code>的另一个例子——使用<code class="fe mg mh mi mj b">cat</code>移动文件并打印到<code class="fe mg mh mi mj b">STDOUT</code>:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="833a" class="nt mt iq mj b gy nu nv l nw nx">$ mv main.py src/main.py <br/>$ cat src/main.py</span></pre><p id="906b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意我们再次重用了最后一个参数<code class="fe mg mh mi mj b">src/main.py</code>？</p><p id="163f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以使用<code class="fe mg mh mi mj b">$_</code>重写该命令，以自动将<code class="fe mg mh mi mj b">src/main.py</code>提前到您的第二个命令中:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="bb6a" class="nt mt iq mj b gy nu nv l nw nx">$ mv main.py src/main.py <br/>$ cat $_<br/>cat src/main.py</span></pre><p id="5fdd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用<code class="fe mg mh mi mj b">$_</code>意味着你不需要重写一个复杂的文件路径，让你没有机会不正确地重新键入它。</p><h2 id="e5e6" class="nt mt iq bd mu nz oa dn my ob oc dp nc le od oe ne li of og ng lm oh oi ni oj bi translated">摘要</h2><p id="371d" class="pw-post-body-paragraph kv kw iq kx b ky nk jr la lb nl ju ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated"><em class="mk">任何时候，当你通过多个命令多次重新输入某个东西时，使用</em> <code class="fe mg mh mi mj b">$_</code> <em class="mk">可能有助于减轻你疲惫双手的压力。</em></p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="278d" class="ms mt iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">用<code class="fe mg mh mi mj b">^old^new</code>快速替换</h1><p id="b392" class="pw-post-body-paragraph kv kw iq kx b ky nk jr la lb nl ju ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated">有时(通常在我们的例子中),我们在Shell中运行一个命令，然后很快意识到我们犯了一个错误。</p><p id="83cb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以使用<strong class="kx ir">快速替换，通过替换之前命令中的文本来修复错误，而不是再次重新键入命令。</strong></p><p id="4257" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">举个例子——你登录一个服务器，运行命令进行连接——却发现应该是<code class="fe mg mh mi mj b">user</code>而不是<code class="fe mg mh mi mj b">ubuntu</code>!</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="b681" class="nt mt iq mj b gy nu nv l nw nx">$ ssh <a class="ae ok" href="mailto:ubuntu@198.compute.com" rel="noopener ugc nofollow" target="_blank">ubuntu@198.compute.com</a></span></pre><p id="4d63" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不用重新输入整个命令，您可以使用快速替换来更改您想要的部分——这里将<code class="fe mg mh mi mj b">ubuntu</code>更改为<code class="fe mg mh mi mj b">user</code>:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="c040" class="nt mt iq mj b gy nu nv l nw nx">$ ^ubuntu^user<br/>ssh <a class="ae ok" href="mailto:user@198.compute.com" rel="noopener ugc nofollow" target="_blank">user@198.compute.com</a></span></pre><p id="2fc5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">快速替换中的模式是<code class="fe mg mh mi mj b">^old^new</code>。这相当于做:</p><pre class="kg kh ki kj gt np mj nq nr aw ns bi"><span id="fefc" class="nt mt iq mj b gy nu nv l nw nx">$ !!:s/old/new</span></pre><p id="6a1f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mg mh mi mj b">!!</code>得到最后一个命令，<code class="fe mg mh mi mj b">:s</code>得到一个替换的正则表达式。我想你会同意<code class="fe mg mh mi mj b">^old^new</code>更容易一点！</p><h2 id="d981" class="nt mt iq bd mu nz oa dn my ob oc dp nc le od oe ne li of og ng lm oh oi ni oj bi translated">摘要</h2><p id="0727" class="pw-post-body-paragraph kv kw iq kx b ky nk jr la lb nl ju ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated"><em class="mk">任何时候，当你通过多条命令多次重新输入某个东西时，使用</em> <code class="fe mg mh mi mj b">$_</code> <em class="mk">可能有助于减轻你疲惫双手的压力。</em></p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="3b5d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>