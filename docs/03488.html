<html>
<head>
<title>A Rundown of Data Attributes in HTML5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML5中数据属性的概述</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-rundown-dataset-attributes-in-html5-55872dad558b?source=collection_archive---------16-----------------------#2020-02-12">https://betterprogramming.pub/a-rundown-dataset-attributes-in-html5-55872dad558b?source=collection_archive---------16-----------------------#2020-02-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ac2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">改进客户端功能的工具—示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7bbfa6fc77cbcc4518c1b7ca46f1094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QIBXxOeVHSsfkKSE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="b23c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我第一次遇到HTML中的数据属性时，我有点迷惑。我知道如何很容易地设置它们，但没有真正理解它们的用途。</p><p id="dba6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实证明，我是想给它们增加根本不存在的重量。它们只是开发人员给HTML元素提供一些额外信息的有用工具。反过来，这些信息可以用来在客户端执行复杂的任务，提供一种与元素交互的不同方式，而不是通过它们的ID和/或类来操作它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4abf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我们什么时候使用数据属性？</h1><p id="004e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一个HTML元素可能拥有的属性已经太多了，比如<code class="fe mz na nb nc b">id</code>、<code class="fe mz na nb nc b">class</code>、<code class="fe mz na nb nc b">src</code>……不胜枚举。有时，我们可能希望以某种方式标记一个现有属性没有覆盖的元素。输入数据属性。</p><p id="a86f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据属性可以用于单个或多个HTML元素。最常见的是，它们被用在多个HTML元素中，表示它们共享某种质量(见下面的例子)。此时，您可能会想，“为什么不直接使用一个类呢？”这是一个完全有效的参数——在许多情况下，数据属性并不合适，应该使用类(或者更罕见的是id)来代替。然而，一门课只能涵盖这么多。</p><p id="fd59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类通常更多地用于风格方法，并且只能给出关于元素的这么多信息。另一方面，数据属性也可以用于样式化，但是它们真正的作用在于提供关于元素的额外细节。</p><p id="99dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个信息有点特殊，因为用户是否看到它并不重要。正如在<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes" rel="noopener ugc nofollow" target="_blank">文档</a>中看到的，你不希望把应该对用户可见的数据单独放在数据属性中。</p><p id="4d80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原因是它们不像在元素中的某个地方提供数据那样容易访问。也有这样的情况，数据属性可能包含我们不希望用户立即看到的信息，但是他们以后可能会访问这些信息(稍后将提供一个这样的例子)。</p><p id="df99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面，我提供了几个数据属性有用的例子。你可以在<a class="ae ky" href="https://github.com/TimeSmash/testing-dataset-attributes" rel="noopener ugc nofollow" target="_blank"> this GitHub repo </a>查看这些例子的代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d4ad" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">使用数据属性改变配方卡的可见性</strong></h1><p id="c591" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们的第一个例子中，我们正在开发一个处理食谱的应用程序。在这样的应用程序中，我们以包含菜谱图片及其名称的<code class="fe mz na nb nc b">div</code>形式链接到每个菜谱。我们可以把这个<code class="fe mz na nb nc b">div</code>称为食谱卡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/adb9e9b87db61bb55f7401dd25ad1cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:324/format:webp/1*nVsZwPFE-FBo1F9CT2Na2g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">食谱卡。它显示配方的名称和图片。</p></figure><p id="9259" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一份食谱有很多细节。这包括卡路里计数、饮食限制、潜在的过敏原等等。在食谱的显示页面上，你可能会显示这些信息，但是在卡片上提供这些信息会很快变得混乱。考虑到这个元素的大小，它会显得太杂乱，更不用说用户的信息过载了。</p><p id="e2e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是数据属性的大好机会。我们可以用它们来描述一个食谱的各个方面，而不用马上展示给用户。例如，您可能想要标记哪些食谱卡是素食的，以便稍后排序和/或美观。为了让我们的食谱卡片看起来简单，我们可以为有素食食谱的卡片建立一个数据饮食属性。</p><p id="a57d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们的食谱之一是米饭抓饭。这是一道简单的素菜，所以让我们使用<code class="fe mz na nb nc b">data-diet</code>的数据属性来标记它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">食谱卡代码示例。注意div中data属性的使用。</p></figure><p id="5864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单，对吧？我们只是在自定义属性名前面加上单词<em class="ng"> data </em>，并将其设置为一个字符串。这是创建数据属性时的一般规则:它们总是以单词<em class="ng"> data、</em>开头，后面的单词用破折号分隔。唯一的值数据属性可以设置为字符串(这意味着如果您想将它们指定为数字或数组，您必须首先将该数据设置为字符串，并从那里对其进行操作)</p><p id="8d13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了简单起见，我会制作另外两张食谱卡，<em class="ng"> Aglio y Olio </em>(意大利面加油)和<em class="ng">法国鸡肉</em>，前者有一个<code class="fe mz na nb nc b">vegan</code>的<code class="fe mz na nb nc b">data-diet</code>，后者有一个<code class="fe mz na nb nc b">omni</code>的<code class="fe mz na nb nc b">data-diet</code>(代表杂食)。</p><p id="e558" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设一个页面上显示了如此多的食谱，用户可能想要过滤这些结果，所以只显示素食者的结果。现在我们已经设置了<code class="fe mz na nb nc b">data-diet</code>属性，我们可以写出如下所示的解决方案:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">点击这个按钮将会看到食谱卡，任何不是素食者都看不见</p></figure><p id="14d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码将一个事件侦听器添加到一个预先建立的按钮上，然后该按钮查看页面上的所有食谱卡元素。它会查看它们的<code class="fe mz na nb nc b">data-diet</code>，如果不是<code class="fe mz na nb nc b">veggie</code>，它会将这些食谱卡的可见性设置为<code class="fe mz na nb nc b">hidden</code>，这意味着用户不会看到它们。单击按钮亲自尝试一下。</p><p id="4977" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个基本的示例，在现实生活中很可能会有所不同，但是想象一下应用程序——您可以根据需要添加任意多的数据属性，允许您之前已经指定到后端的大量客户端复杂性。根据所涉及的过程，您可能会以这种方式节省更多的时间，而不是为每一件小事都进行各种后端获取。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bd3f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">使用带键码的数据属性触发事件</strong></h1><p id="26d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我还想到了另一个例子，它在很大程度上受到了JavaScript30练习的启发，这是Wes Bos的一套免费课程，可以帮助您发展JavaScript技能。在这个例子中，我们将有显示home行键的字母的<code class="fe mz na nb nc b">div</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/ecd8a0ba74fb14a33b1c8db1d0e2cada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oPtIWATKm23qi72NzWbiow.png"/></div></div></figure><p id="caf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，如果我们按下那个键，应该会弹出一条消息说我们按下了它，我们可以通过再次按下它来恢复它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/af2891280955615c85e1cd4c2f078a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/1*G2by-u0JTnpJfZ2lYBTvHQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按键，得到一条信息。再次按键，删除信息。</p></figure><p id="8d38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据属性是如何影响这一点的？如果我们给每个字母一个与其键码相等的数据键属性，我们就可以很容易地控制字母的变化，如下所示:</p><p id="aadb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">信函示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="8d9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到每个字母只是一个<code class="fe mz na nb nc b">div</code>加上一个<code class="fe mz na nb nc b">h2</code>。每个<code class="fe mz na nb nc b">div</code>都有一个<code class="fe mz na nb nc b">letter</code>类，每个<code class="fe mz na nb nc b">h2</code>都有一个<code class="fe mz na nb nc b">single-letter</code>类。我们还看到每个<code class="fe mz na nb nc b">div</code>都分配了一个数据键，数字(作为一个字符串)是该字母的等价键码。</p><p id="7578" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提供切换能力的代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/77844d2dc7f7c678540798c8bd5d3b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-P8ZpZASYM-bzido8nHxWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">请注意:由于Medium显示gistss的方式，像这样的长gist在链接时不会正确显示。为便于阅读，请参见此处的链接<a class="ae ky" href="http://bit.ly/38lwjS7" rel="noopener ugc nofollow" target="_blank">。</a></p></figure><p id="72d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将所有的字母放在一个<code class="fe mz na nb nc b">NodeList</code>中，并将它们的<code class="fe mz na nb nc b">data-key</code>放入一个数组中。从那里，我们可以向窗口添加一个事件监听器，它将在任何时候按下一个键时激活。事件监听器将检查按键的键码是否是按键数组中的<code class="fe mz na nb nc b">data-key</code>之一。如果不是，没人关心，所以我们只是通过抛出一个返回来提前结束函数。</p><p id="33b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果被按下的键<em class="ng">的键码是包含在键数组中的</em>，我们就更进一步。在此步骤中，我们将变量<code class="fe mz na nb nc b">letterToChange</code>指定为字母，其<code class="fe mz na nb nc b">data-key</code>与按下的键的键码相同。</p><p id="5b0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们继续之前，让我们注意一下这一行中使用的语法。因为我们使用的是<code class="fe mz na nb nc b">querySelector</code>，我们必须确保我们使用的是括号中的字符串。我们还必须使用一种特殊的符号来表示我们正在寻找的<code class="fe mz na nb nc b">data-key</code>的值，通过使用括号和引号，伴随着模板文字的使用，这样<code class="fe mz na nb nc b">e.which</code>的值可以被适当地转置。</p><p id="7f28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果该元素的第一个子元素的<code class="fe mz na nb nc b">innerText</code>只有一个字符长，那么我们应该显示一条消息说这个键被按下了。如果该消息已经显示出来(它的长度比一个字符长得多)，那么将它还原为键。</p><p id="2572" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，我们还在卡内的<code class="fe mz na nb nc b">h2</code>元素上切换单字母类的添加/删除，以便我们的消息正确显示。(如果您注释掉这段代码的类切换方面，您将看到消息太大，无法正确显示。当我们从<code class="fe mz na nb nc b">h2</code>中移除单字母类时，它会正确显示，因为它没有单字母的风格化。)</p><p id="ccff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">据此，我们开发了一个应用程序，展示了利用数据属性的简单方法。</p><p id="cb03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管这些只是简单的例子，但它显示了键码是多么有用。你可以用这种逻辑让应用程序具有动态特性，只需按一下按钮就可以访问。你可以做一个游戏。使用数据属性可以给你的应用增加一层复杂性，同时保持它在前端的整洁和简约。</p><p id="599b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尝试重新编写一些代码来合并数据属性。这将有助于您熟悉它们，并可能优化应用程序中的一些功能。一如既往，享受乐趣，快乐编码！</p></div></div>    
</body>
</html>