<html>
<head>
<title>Let’s Make a React Radio That Will Pass A11Y— Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们制作一个能通过A11Y的React收音机—第1部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-make-a-react-radio-that-will-pass-a11y-part-1-of-2-dc971d1f4c6?source=collection_archive---------8-----------------------#2019-10-20">https://betterprogramming.pub/lets-make-a-react-radio-that-will-pass-a11y-part-1-of-2-dc971d1f4c6?source=collection_archive---------8-----------------------#2019-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d24e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用React、styled-components和Framer Motion创建一个单选按钮组</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/159aa80137915629dc8e24fd63b7d5f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PsyQX7pRf3QoP-ry-G_a7w.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@hrsahatchiev?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Hristo Sahatchiev </a>在<a class="ae kv" href="https://unsplash.com/s/photos/bulgaria?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2682" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章将集中讨论如何构建一个radio组，但是您仍然可以将下面显示的一些实践应用于其他组件。</p><p id="4fc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个系列的一部分，这里有<a class="ae kv" href="https://medium.com/better-programming/lets-make-a-react-radio-that-will-pass-a11y-part-2-932ac911a3e2" rel="noopener">第二部分</a>和<a class="ae kv" href="https://medium.com/@kristiyan.serafimov/c77105a94a9a" rel="noopener">第三部分</a>。</p><p id="cd4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择的工艺栈是<a class="ae kv" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应</a>、<a class="ae kv" href="https://www.styled-components.com/" rel="noopener ugc nofollow" target="_blank">样式组件</a>和<a class="ae kv" href="https://www.framer.com/motion/" rel="noopener ugc nofollow" target="_blank">框架运动</a>。虽然Framer Motion不如react-spring流行，但它带来了一个优秀的API。它非常容易理解和使用，功能丰富，并且不会调用不必要的重新渲染。</p><p id="62d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用3.6.3版在TypeScript中键入所有代码。</p><p id="46ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们将要创造的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/cc3b41f17640e1e30dd41b515fb9c5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*2eV0RUU-TyDQYgtbrCDk5g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">聚焦的</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/31167fcb11d8bbeca1e6fd66178d5dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*a-kigIz4qkIb1cucMWjzQA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">挑选</p></figure><p id="05d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，让我们开始吧！</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="5d70" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">1.A11Y规则</h1><p id="f9fd" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">我们要做的第一件事是看看w3.org无障碍规则。你可以在他们的网站上找到<a class="ae kv" href="https://www.w3.org/TR/wai-aria-practices-1.2/" rel="noopener ugc nofollow" target="_blank">示例组件和规则</a>的完整列表。对于我们的示例，我们可以查看他们的<a class="ae kv" href="https://www.w3.org/TR/wai-aria-practices-1.2/examples/radio/radio-2/radio-2.html" rel="noopener ugc nofollow" target="_blank">单选按钮组示例</a>。从该页面中，我们可以提取关于键盘导航、DOM结构、aria属性的信息，并查看一个工作示例。</p><p id="4565" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们列出需要展示的A11Y特性:</p><ul class=""><li id="bc46" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">处理<code class="fe ng nh ni nj b">:hover</code>和<code class="fe ng nh ni nj b">:focus</code>状态</li><li id="987f" class="mx my iq ky b kz nk lc nl lf nm lj nn ln no lr nc nd ne nf bi translated">手柄键盘导航:<code class="fe ng nh ni nj b">Tab</code>、<code class="fe ng nh ni nj b">Space</code>、<code class="fe ng nh ni nj b">Arrow</code>键</li><li id="a56d" class="mx my iq ky b kz nk lc nl lf nm lj nn ln no lr nc nd ne nf bi translated">传递所有需要的<code class="fe ng nh ni nj b">aria</code> <em class="np"> </em>和<code class="fe ng nh ni nj b">role</code>属性</li></ul></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="0a6e" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">2.编写组件的基本代码</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/730a50e5960ad0a481014f9e041d1d51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rU2ueF2eG_gSMkUPpgS1VQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/0be581e1f86cd2067244aa5ea081f720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcxpm2Bxktq2WjNTx9PILw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">现在看起来怎么样</p></figure><p id="8fd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它看起来不怎么样，用一些CSS可以更好看。让我们也插入圆形单选按钮，并将列表项提取到一个函数中。</p><p id="5981" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是一些在样式组件的帮助下完成的样式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/937f6bbe78469cdf7a70b6397746a411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FRnPDR0TDwMk24ZkuedeDA.png"/></div></div></figure><p id="f234" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们提取选项的渲染，并在此基础上添加圆形:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/7964f206078d096b8610e4cbbb8ea40a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXEpERmKnpSt50RJyVfE2Q.png"/></div></div></figure><p id="40ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的组件应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/0169d2006223639d86557c3e5bb12b6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*76BAmadrB4XxiWu-SgLN5w.png"/></div></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="8a7a" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">3.管理部分道具</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/54240212e2df8569fffaf718e3747610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YkbyZ2rxhxgH4jLoSGR6zQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/2bf488c19683bae771ff9d4d8bd68fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZiLkk0K6oZ3U8pPz617qg.png"/></div></div></figure><p id="2bda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们已经用组件的输入属性替换了一些变量，我们可以专注于一些逻辑了！</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="689b" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">4.A11Y逻辑</h1><p id="b5db" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">如果我们看看w3.org的例子，我们可以看到一些有趣的事情发生:</p><ul class=""><li id="4664" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">焦点仍然在容器上，但是选项改变了样式</li><li id="22e8" class="mx my iq ky b kz nk lc nl lf nm lj nn ln no lr nc nd ne nf bi translated">容器有一个名为<code class="fe ng nh ni nj b">aria-activedescendant</code> <em class="np">，</em>的属性，它指向焦点选项id。</li><li id="f266" class="mx my iq ky b kz nk lc nl lf nm lj nn ln no lr nc nd ne nf bi translated">每个选项都有一个<code class="fe ng nh ni nj b">aria-checked</code> <em class="np"> </em>属性，表示当前选项是否被选中。</li><li id="3b97" class="mx my iq ky b kz nk lc nl lf nm lj nn ln no lr nc nd ne nf bi translated">最初，组件“聚焦”第一个动作，但并不选择它。</li></ul><p id="4401" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的选项需要id，所以让我们首先为每个选项的id创建一个可选属性:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/f09445bcebdc63b4dd8be46c19b03511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9K3LEF-k7HNv8ThxinMj8g.png"/></div></div></figure><p id="305b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并生成一些选项id，如果它们不是从props中设置的话:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/40e42855688d2d43c86d312e68737f10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J3Lh9BjBCNKJDayr5a4rlg.png"/></div></div></figure><p id="ccc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很好，让我们为焦点和选定的id初始化一些状态:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/f7e12880056d3bd2f0db775e5612e73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XcAubcyCz8c5pve2NlittQ.png"/></div></div></figure><p id="aca2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们也在容器上设置<code class="fe ng nh ni nj b">aria-activedescendant </code>和<code class="fe ng nh ni nj b">onFocus</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/38830291afcdb244e3b7f938442fbf9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6glQfDY3pI3rZeahqSYThQ.png"/></div></div></figure><p id="996a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果未设置<code class="fe ng nh ni nj b">focusId</code>，则<code class="fe ng nh ni nj b">onFocus</code>应将<code class="fe ng nh ni nj b">focusId</code>设置为第一个元素的id:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/be2e87a857dcf9a84b073280823b643f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3lsbAsRnCeT_AhO0jp22w.png"/></div></div></figure><p id="4ab1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一点上，我们的逻辑应该是可行的，但是我们没有关于聚焦选项的可视指示器。所以让我们用样式化的组件做一个:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/929a8a43d66d70e9912f286a2b4ba8e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4OARyqhYfTGgNOEIsQYTKA.png"/></div></div></figure><p id="f171" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一开始可能看起来有点吓人，但是让我们来复习一下。当容器被聚焦时，我们将把Circle组件作为目标，它是元素的直接子元素，id与容器的活动后代属性相同。换句话说，我们选择了聚焦选项的圆，并在它上面应用了一个方框阴影。</p><p id="7917" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们的组件应该看起来很像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/6ce60533a4ed713c54b641c73ee3bacf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yT0NTUtznb6QGsr47AjvnA.png"/></div></div></figure><p id="284f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我留下了Firefox大纲来检查聚焦元素的实际位置。我们可以看到浏览器的焦点仍然在容器元素上，但是样式也应用到了焦点选项的圆圈上。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="5f2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第2部分中，我们将处理选中的状态和点击按键事件。</p><p id="bf7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我错过了什么，请让我知道。我会尽最大努力保持文章的更新。</p></div></div>    
</body>
</html>