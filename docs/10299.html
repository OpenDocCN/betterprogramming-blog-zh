<html>
<head>
<title>Write Your First Smart Contract in Solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Solidity中编写您的第一份智能合同</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-your-first-smart-contract-in-solidity-60563dfb21aa?source=collection_archive---------1-----------------------#2021-12-23">https://betterprogramming.pub/write-your-first-smart-contract-in-solidity-60563dfb21aa?source=collection_archive---------1-----------------------#2021-12-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5bbb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何在Solidity中编写您的第一个智能合同，并逐步将其部署到以太坊Goerli测试网。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3dca1749e490284bb25644b2df098c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RJxxJuS16qlzVU9Rwj5Kwg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">https://unsplash.com/photos/mJcQSltkdeM<a class="ae kv" href="https://unsplash.com/photos/mJcQSltkdeM" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="45a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">于</em><strong class="ky ir"><em class="ls">2022年11月12日</em> </strong> <em class="ls">，本文进行了更新，以反映以太坊合并带来的变化。所以这个教程是最新的！</em></p><h1 id="6a8c" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">你将建造什么</h1><p id="e08a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在本教程中，您将创建一个能够与之交互的智能合约！</p><p id="af2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将在<a class="ae kv" href="https://soliditylang.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Solidity </strong> </a>中编写智能合约，然后使用<a class="ae kv" href="https://hardhat.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Hardhat </strong> </a>编译并部署到使用<a class="ae kv" href="https://www.alchemy.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Alchemy </strong> </a>作为节点提供者的<a class="ae kv" href="https://goerli.net/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">Goerli</strong></a>testnet！</p><h2 id="1acd" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">本教程将经历的步骤:</h2><ol class=""><li id="7dfb" class="nc nd iq ky b kz ml lc mm lf ne lj nf ln ng lr nh ni nj nk bi translated">使用NPM设置项目</li><li id="894f" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">安装必要的依赖项</li><li id="d010" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">制作项目的文件夹结构</li><li id="397e" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">概述您将要撰写的智能合同</li><li id="7095" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">撰写智能合同</li><li id="5e71" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">编写将编译和部署智能合同的javascript函数</li><li id="5fb3" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">创建炼金术帐户和Metamask钱包</li><li id="0ed2" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">用alchemy配置hardhat.config.js</li><li id="d3ce" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">部署智能合同</li><li id="cddd" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">结论/总结</li></ol><h2 id="95f6" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">1.设置项目</h2><p id="098a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先创建一个目录，并在命令行中使用npm初始化项目:</p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="d493" class="nv lu iq nr b be nw nx l ny nz">mkdir my-first-smart-contract<br/>cd my-first-smart-contract<br/>npm init -y</span></pre><h2 id="faae" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">2.安装必要的依赖项</h2><p id="b645" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在，当您使用node设置好项目后，让我们安装编译和部署智能合约所需的依赖项！</p><p id="7622" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将使用的依赖项有:<strong class="ky ir"> hardhat，@nomiclabs/hardhat-ethers。</strong></p><p id="81d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">那么让我们来安装这些:</strong></p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="f7de" class="nv lu iq nr b be nw nx l ny nz">npm i --save-dev hardhat @nomiclabs/hardhat-ethers</span></pre><h2 id="339e" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">3.制作项目的文件夹结构</h2><p id="aa33" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">开发智能合约最常见的方式是拥有一个用来编写智能合约的合约文件夹，一个用来编写部署智能合约的javascript函数的脚本文件夹等等。</p><p id="fa9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们有一个名为<code class="fe oa ob oc nr b">hardhat.config.js</code>的文件，智能合约的部署设置将放在这个文件中！</p><p id="64f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">在命令行上运行:</strong></p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="10cb" class="nv lu iq nr b be nw nx l ny nz">mkdir contracts &amp;&amp; mkdir scripts &amp;&amp; touch hardhat.config.js</span></pre><p id="16c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将创建一个<code class="fe oa ob oc nr b">contracts</code>文件夹、一个<code class="fe oa ob oc nr b">scripts</code>文件夹和一个<code class="fe oa ob oc nr b">hardhat.config.js</code>文件</p><h2 id="0a5d" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated"><strong class="ak"> 4。</strong>概述您将要撰写的智能合同</h2><p id="c4e8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在到了有趣的部分耶！🎉</p><p id="4339" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将要编写的智能契约将能够接收问候并存储它已经接收了多少问候，以及通过调用契约中的函数返回它已经接收了多少问候。</p><p id="b007" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">把事情再简化一点:</strong>任何人都可以打招呼签约，打招呼的次数会增加一个。而且任何人都可以调用一个函数，返回契约收到的问候次数。</p><p id="a99f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我们来看看智能合同应该包括哪些内容:</strong></p><ol class=""><li id="894b" class="nc nd iq ky b kz la lc ld lf od lj oe ln of lr nh ni nj nk bi translated">有一个函数，您可以调用它来问候合同，该函数会将问候次数增加1。</li><li id="9488" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">有一个变量来存储问候的数量。</li><li id="80b8" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">有一个函数，您可以调用它来获取合同收到的问候次数。</li></ol><h2 id="4e4a" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">5.撰写智能合同</h2><p id="8f02" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在让我们将这三项要求付诸行动吧！</p><p id="8de6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，在<code class="fe oa ob oc nr b">contracts</code>文件夹中，创建名为<code class="fe oa ob oc nr b">greet.sol</code>的文件</p><p id="adce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe oa ob oc nr b">greet.sol</code>中的智能合约将会用Solidity编程语言进行编码，所以让我们逐一添加这三个特性。</p><ol class=""><li id="e27b" class="nc nd iq ky b kz la lc ld lf od lj oe ln of lr nh ni nj nk bi translated"><strong class="ky ir">让我们从添加三个特性开始，从存储合同将收到的问候数量的变量开始:</strong></li></ol><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="8d16" class="nv lu iq nr b be nw nx l ny nz">// SPDX-License-Identifier: UNLICENSED<br/><br/>pragma solidity ^0.8.9;<br/>import "hardhat/console.sol";<br/><br/>contract greet {<br/>    uint256 amountOfGreetings;<br/>}</span></pre><p id="8e5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，有一个类型为<code class="fe oa ob oc nr b">uint256</code>的<code class="fe oa ob oc nr b">amountOfGreetings</code>变量，这意味着它是一个<code class="fe oa ob oc nr b">256</code>位<code class="fe oa ob oc nr b">integer</code>，所以你现在不需要知道。</p><p id="b09c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个变量将存储智能合约收到的问候次数！</p><p id="d485" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2。让我们添加问候合同的功能，该功能将使问候次数增加一:</strong></p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="5de9" class="nv lu iq nr b be nw nx l ny nz">// SPDX-License-Identifier: UNLICENSED<br/><br/>pragma solidity ^0.8.9;<br/>import "hardhat/console.sol";<br/><br/>contract greet {<br/>   uint256 amountOfGreetings;<br/>    function greetings() public {<br/>        amountOfGreetings +=1;<br/>    }<br/>}<br/></span></pre><p id="e903" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，<code class="fe oa ob oc nr b">greetings</code>函数在被调用时将<code class="fe oa ob oc nr b">amountOfGreetings</code>加1。</p><p id="b0bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当这个函数被调用时，变量<code class="fe oa ob oc nr b">amountOfGreetings</code>加1！</p><p id="0d7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 3。让我们添加一个函数，它可以让您了解合同获得了多少问候:</strong></p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="6676" class="nv lu iq nr b be nw nx l ny nz">// SPDX-License-Identifier: UNLICENSED<br/><br/>pragma solidity ^0.8.9;<br/>import "hardhat/console.sol";<br/><br/>contract greet {<br/>    uint256 amountOfGreetings;<br/><br/><br/>    function greetings() public {<br/>        amountOfGreetings +=1;<br/>    }<br/><br/>    function getAmountOfGreetings() public view returns (uint256) {<br/>        return amountOfGreetings;<br/>    }<br/>}</span></pre><p id="7258" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，<code class="fe oa ob oc nr b">getAmountOfGreetings</code>函数返回了<code class="fe oa ob oc nr b">amountOfGreetings.</code></p><p id="a134" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调用该函数时，智能合约返回变量<code class="fe oa ob oc nr b">amountOfGreetings</code>！</p><p id="5e85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">以下是完整的智能合约代码:</strong></p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="66aa" class="nv lu iq nr b be nw nx l ny nz">// SPDX-License-Identifier: UNLICENSED<br/><br/>pragma solidity ^0.8.9;<br/>import "hardhat/console.sol";<br/><br/>contract greet {<br/>    uint256 amountOfGreetings;<br/><br/><br/>    function greetings() public {<br/>        amountOfGreetings +=1;<br/>    }<br/><br/>    function getAmountOfGreetings() public view returns (uint256) {<br/>        return amountOfGreetings;<br/>    }<br/>}</span></pre><h2 id="c9c1" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">6.编写将编译和部署智能合同的javascript函数</h2><p id="5373" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">祝贺您编写了第一份智能合同！</p><p id="fac8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，目前没有与智能合约交互的方法。</p><p id="2df6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要与智能合约交互，智能合约的代码必须出现在区块链上。为了做到这一点，我们必须先将其编译成字节码，然后再将其部署到区块链，在本例中是区块链的Goerli etheruem testnet。</p><p id="5bd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在<code class="fe oa ob oc nr b">scripts</code>文件夹中，创建一个<code class="fe oa ob oc nr b">deploy.js</code>文件，在这里您将编写一些javascript代码来编译您的智能合约并将其部署到区块链！</p><p id="2fd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe oa ob oc nr b">deploy.js</code>中添加这段代码:</p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="673b" class="nv lu iq nr b be nw nx l ny nz">async function main() {<br/>  const greetContractFactory = await ethers.getContractFactory("greet")<br/>  const greetContract = await greetContractFactory.deploy()<br/>  await greetContract.deployed()<br/>  console.log("Contract deployed to:", greetContract.address)<br/>}<br/><br/>main().catch((e) =&gt; console.log(e))</span></pre><p id="3756" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，这里的<strong class="ky ir">到底是什么<strong class="ky ir"/>呢？：</strong></p><p id="2bc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们调用一个名为<code class="fe oa ob oc nr b">main</code>的<code class="fe oa ob oc nr b">async</code>函数。</p><p id="5ace" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在函数<code class="fe oa ob oc nr b">main</code>中，我们使用<code class="fe oa ob oc nr b">ethers.getContractFactory</code>获取智能合约，并将其存储在<code class="fe oa ob oc nr b">greetContractFactory</code>变量中</p><p id="54cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后使用<code class="fe oa ob oc nr b">greetContractFactory.deploy()</code>在一行中编译和部署智能契约</p><p id="87c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，在使用<code class="fe oa ob oc nr b">greetContract.deploy()</code>等待它被部署之后，我们也记录它被部署的地址。</p><p id="63dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只剩下一件事要做了！您还需要一个地方来部署您的智能合同！</p><h2 id="d558" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">7.创建炼金术帐户和元面具钱包</h2><p id="59f0" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">由于您可能不想使用实际的以太网来部署和测试您的智能契约，我们将使用一个名为<strong class="ky ir"> Goerli </strong>的<strong class="ky ir"> testet </strong>，通过利用<strong class="ky ir"> Alchemy </strong>作为节点提供者！</p><p id="8f21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个测试网基本上是:</p><blockquote class="og"><p id="ce22" class="oh oi iq bd oj ok ol om on oo op lr dk translated">测试网是测试区块链网络，其行为和执行类似于它们所关联的主网络。由于他们在独立于主网的分类帐上操作，测试网上的硬币与主网上的交易和价值没有联系。这允许开发人员在一个正常运行的区块链上自由地部署、测试和执行他们的项目。— <a class="ae kv" href="https://www.alchemy.com/overviews/what-are-testnets" rel="noopener ugc nofollow" target="_blank">炼金术</a></p></blockquote><p id="e1d1" class="pw-post-body-paragraph kw kx iq ky b kz oq jr lb lc or ju le lf os lh li lj ot ll lm ln ou lp lq lr ij bi translated">但是我们如何利用测试网呢？这就是节点提供者的用武之地；我们使用第三方服务，如Alchemy，来轻松连接到testnet！</p><p id="2712" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，你必须先注册一个<a class="ae kv" href="https://www.alchemy.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">炼金术</strong> </a>账号。</p><p id="f84c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建帐户后，在Alchemy dashboard中使用以下详细信息创建一个新应用程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/cd325d0853e310276060078e882c9f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWP0CQz-KWR3fyM8YaoQ-g.jpeg"/></div></div></figure><p id="6a37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">部署智能合约后，您还需要一个帐户来签署交易，这就是Meta Mask的用武之地。如果您还没有帐户，请在Meta Mask创建一个帐户。</p><p id="06b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，发送一些歌利ETH到你的Meta Mask钱包中的歌利钱包地址，使用:【https://goerlifaucet.com/】T4</p><h2 id="238d" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">8.用Alchemy配置hardhat.config.js</h2><p id="56e4" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在部署合同之前，您需要配置智能合同的部署位置和部署人员。我们在<code class="fe oa ob oc nr b">hardhat.config.js.</code>中配置这个</p><p id="fdcb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">因此，要对此进行配置，请执行以下操作:</strong></p><p id="0769" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过在命令行中运行<code class="fe oa ob oc nr b">npm i dotenv --save</code>来安装<strong class="ky ir"> dotenv </strong>。<strong class="ky ir"> dotenv </strong>将用于能够安全地存储您的私钥。</p><p id="9784" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从您创建新应用程序的Alchemy dashboard获取您的Alchemy API密钥。</p><p id="5de6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从元掩码中获取您的私钥，并参考这些 说明来找出将它导出到哪里。</p><p id="bd80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在项目的根目录下创建一个<code class="fe oa ob oc nr b">.env</code>文件，并包含您的私钥，如下所示:</p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="355b" class="nv lu iq nr b be nw nx l ow nz">ALCHEMY_API_URL = "https://eth-goerli.alchemyapi.io/v2/your-api-key"<br/>PRIVATE_KEY = "your-metamask-private-key"</span></pre><p id="4e4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加密钥后，修改<code class="fe oa ob oc nr b">hardhat.config.js</code>文件，如下所示:</p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="bee3" class="nv lu iq nr b be nw nx l ny nz">require('dotenv').config();<br/>require("@nomiclabs/hardhat-ethers")<br/><br/>const { ALCHEMY_API_URL, PRIVATE_KEY } = process.env;<br/><br/>module.exports = {<br/>  solidity: "0.8.9",<br/>  networks: {<br/>    hardhat: {},<br/>    goerli: {<br/>      url: `https://eth-goerli.g.alchemy.com/v2/${ALCHEMY_API_URL}`,<br/>      accounts: [PRIVATE_KEY],<br/>    },<br/>  },<br/>}</span></pre><h2 id="2275" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">9.部署您的智能合同</h2><p id="f2d4" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">剩下要做的就是在命令行中键入以下内容:</p><pre class="kg kh ki kj gt nq nr ns bn nt nu bi"><span id="5246" class="nv lu iq nr b be nw nx l ny nz">npx hardhat run scripts/deploy.js --network goerli</span></pre><p id="c595" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后砰！智能合同刚刚部署到区块链！</p><p id="ab70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您已经有了命令行输出的契约地址，您可以使用该地址来搜索您在<a class="ae kv" href="https://goerli.etherscan.io" rel="noopener ugc nofollow" target="_blank">https://goer Li . ethers can . io</a>🥳部署的智能契约的事务</p><h2 id="d31f" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">10.结论/总结</h2><p id="5a76" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在本文中，我们在Solidity中创建了一个智能契约，使用Hardhat编译它，然后使用Alchemy将其部署到以太坊测试网！</p><p id="6223" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您遵循所有说明，您的智能合同应该在testnet上处于活动状态！</p><p id="5846" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是最终回购:<a class="ae kv" href="https://github.com/antondevv/your-first-smart-contract" rel="noopener ugc nofollow" target="_blank">https://github.com/antondevv/your-first-smart-contract</a></p><p id="3359" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">PS:我将写这篇文章的后续文章，向您展示如何使用ethers和alchemy与智能合约函数进行交互，允许您问候您的智能合约，并了解它收到了多少问候！</p></div></div>    
</body>
</html>