<html>
<head>
<title>A Brief History of the Curly Brace in Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编程中花括号的简史</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-brief-history-of-the-curly-brace-in-programming-5b3eacdc3f7a?source=collection_archive---------10-----------------------#2020-04-08">https://betterprogramming.pub/a-brief-history-of-the-curly-brace-in-programming-5b3eacdc3f7a?source=collection_archive---------10-----------------------#2020-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2111" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们每天都在使用它们，但是代码中的花括号是从哪里来的呢？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1e960d5513963fe48bb2040f703b7cba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6cCuIAL-7Mvxg25RO11LSA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@hishahadat?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">沙哈达特·拉赫曼</a>在<a class="ae ky" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="abaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">花括号，这个标记代码块开始和结束的熟悉符号，是什么时候成为编程的一部分的？也许更重要的是，代码块什么时候成为程序结构的一部分？</p><p id="4344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将回答这些问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/c149fe5a5eb38310ea92dcbe4c476479.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*q2tqVHr5e_6fkjbthTXphA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由codingwithchuck.com提供</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="393f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">首先，一个非块语言的例子</h1><p id="f87e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">所有熟悉C风格编程语法的程序员都熟悉编程块。C、C++、Java、JavaScript和其他语言中的所有主要编程结构都是块结构的。换句话说，这些构造的主体放在块中，这些块用左花括号和右花括号分隔。</p><p id="37b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可能有人会争辩说，严格来说这不是真的，因为仅举两个编程结构来说，如果语句和循环的主体只有一条语句那么长，那么它们可以不用块来构成。然而，在过去的几年中，编程风格专家建议将所有的构造体放在一个块中(参见Douglas Cockroft的“JavaScript: The Good Parts ”,其中有一个特别有说服力的论点，将所有的if和loop体放在块中)。</p><p id="cb1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，最初的高级编程语言没有块。</p><p id="4600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将用大约20世纪50年代末的FORTRAN语言来演示这一点。唐纳德·克努特(Donald Knuth)在其著作《计算机语言文选》中转载的关于早期高级编程语言的优秀综述文章《编程语言的早期发展》中，比较了几种早期编程语言的特点。他通过演示一个特定的计算机程序如何在不同的语言中实现来做到这一点。这个程序实现了一种叫做TPK算法的算法，在现代JavaScript中是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="a49a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要担心程序做什么。重要的一点是，这个程序实现了Knuth认为在现代编程语言中测试很重要的所有特性。</p><p id="3b49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我提到的，Knuth用这个算法比较了几种编程语言。他研究的最后一种语言现在通常被认为是第一种真正的高级编程语言。下面是Knuth编写的Fortran语言的TPK程序:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="db47" class="nl me it ne b gy nm nn l no np">C   THE TPK ALGORITHM, FORTRAN STYLE<br/>    FUNF(T) = SQRTF(ABSF(T))+5.0*T**3<br/>    DIMENSION A(11)<br/>1   FORMAT(6F12.4)<br/>    READ 1, A<br/>    DO 10 J = 1, 11<br/>    I = 11 – J<br/>    Y = FUNF(A(I+1))<br/>    IF (400.0-Y) 4, 8, 8<br/>4   PRINT 5, I<br/>5   FORMAT(I10, 10H TOO LARGE)<br/>    GO TO 10<br/>8   PRINT 9, I, Y<br/>9   FORMAT(I10, F12.7)<br/>10  CONTINUE<br/>    STOP 52525</span></pre><p id="b9ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不会深入Fortran语法的细节，但是您可以清楚地看到该语言不包含块。该函数在一行中定义，而不是作为代码块定义。<code class="fe nb nc nd ne b">DO</code>循环使用线标签来控制循环。当时的高级语言没有将复合语句分组为块的概念，这些语言仍然依赖于<code class="fe nb nc nd ne b">goto</code>来控制程序流。</p><p id="a831" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码是Knuth使用1957年版本的Fortran编写的。1957年至1960年间，一种新的语言ALGOL被开发出来，它弥补了Fortran和当时其他高级语言的许多缺陷。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="894a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Algol语言的积木</h1><p id="722c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Algol编程语言在1958年首次被描述，尽管该语言最流行的版本是Algol 60。Algol的一个特性是能够将语句分组为<em class="na">复合语句</em>，称为<em class="na">块</em>。每个Algol程序都被认为是一个块，因为一个程序通常包含一个或多个语句(因此是复合语句)。Algol的开发人员认识到，许多编程场景，如条件和循环，需要将语句视为一个单元。</p><p id="400f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Algol用关键字<code class="fe nb nc nd ne b">begin </code>和<code class="fe nb nc nd ne b">end</code>标记一个区块的开始和结束。一个块可以嵌套在另一个块中，外部块被认为是<em class="na">主</em>块，内部块被认为是<em class="na">从</em>块。例如，下面是一个嵌套块的Algol程序:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="6a8a" class="nl me it ne b gy nm nn l no np">begin real a;<br/>     a := 1;<br/>     begin real a;<br/>          a := 2;<br/>          print(a)<br/>     end;<br/>     print(a)<br/>end</span></pre><p id="89c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数字2和1按此顺序打印出来。</p><p id="8ff1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个在Algol的<code class="fe nb nc nd ne b">if</code>语句中如何使用块的例子:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="bc53" class="nl me it ne b gy nm nn l no np">if x &gt; -1 then<br/>     begin<br/>          if x ≠ 0 then<br/>          x := 1/x<br/>     end;</span></pre><p id="b7ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是Algol中一个<code class="fe nb nc nd ne b">for</code>循环块的例子:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="586a" class="nl me it ne b gy nm nn l no np">begin<br/>     real a0, a1, a2, a3, z, p;<br/>     integer n, i;<br/>     read(a0, a1, a2, a3);<br/>     read(n)<br/>     for i := 1 step 1 until n do<br/>          begin<br/>               read(z);<br/>               p := ((a3 × z + a2) × z + a1) × z + a0<br/>               print(p)<br/>          end i<br/>end</span></pre><p id="44ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看Algol语言的TPK程序，看看与Fortran语言版本相比，块结构如何帮助该程序:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="4b6e" class="nl me it ne b gy nm nn l no np">TPK begin integer i, real y; real a[0:10];<br/>     real procedure f(t); real  t; value t;<br/>     f := sqrt(abs(t)) + 5 × t ↑ 3;<br/>     for i := 0 step 1 until 10 do read(a[i]);<br/>     for i := 10 step -1 until 0 do<br/>          begin y := f(a[i]);<br/>               if y &gt; 400 then write(I, 'TOO LARGE')<br/>               else write(i, y);<br/>          end<br/>end TPK</span></pre><p id="e078" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你应该能看出Algol版本的块结构使它更像你我今天习惯阅读的代码。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4d8a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">继续前往BCPL</h1><p id="539f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">块结构语言句法的下一个变化是1967年左右由剑桥大学的Martin Richards开发的BCPL语言。在1960年到1967年Algol的最初开发期间，编译器和系统开发人员一直在寻找使用机器和汇编语言以外的语言开发系统应用程序(如操作系统)的方法。我之所以强调BCPL，是因为C语言是通过一种由Ken Thompson开发的叫做b的中间语言，作为BCPL语言的细化和改进而发展起来的</p><p id="a3cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Richards将BCPL开发成一种系统开发语言，它与汇编语言一样高效，但语法更高级，使编码更容易、更高效。这意味着像Algol这样的高级语言的许多特性需要包含在像BCPL这样的语言中，但要以一种更有效的方式。</p><p id="cbe2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实现这种效率的一种方法是将代码块的命名从单词(<code class="fe nb nc nd ne b">begin</code>和<code class="fe nb nc nd ne b">end</code>)简化为符号。对于复合语句和块，Richards选择符号<code class="fe nb nc nd ne b">$(</code>表示开始，选择符号<code class="fe nb nc nd ne b">)$</code>表示结束。这些符号被称为<em class="na">部分括号</em>。</p><p id="70a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在BCPL，如果<code class="fe nb nc nd ne b">$(</code>和<code class="fe nb nc nd ne b">)$</code>与<code class="fe nb nc nd ne b">if</code>语句或循环这样的结构一起使用，那么它们就是复合语句的定界符。如果<code class="fe nb nc nd ne b">$(</code>包含一些声明，那么它们是在分隔一个块。</p><p id="8134" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在BCPL，带有复合语句的<code class="fe nb nc nd ne b">if</code>语句是这样写的:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="6baa" class="nl me it ne b gy nm nn l no np">IF A &lt; B<br/>     $( LET T = A<br/>          A := B; B := T<br/>     $)</span></pre><p id="6f20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个BCPL街区的例子:</p><pre class="kj kk kl km gt nh ne ni nj aw nk bi"><span id="d2be" class="nl me it ne b gy nm nn l no np">GET "LIBHDR"<br/>LET START() BE<br/>     $( LET A, B, C, SUM = 1, 2, 3, 0<br/>          SUM := A + B + C<br/>          WRITES("Sum is ")<br/>          WRITEN(SUM)<br/>     $)</span></pre><p id="b724" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，开始部分的括号打开了一个块，因为括号后面紧跟着一个声明。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="1901" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">$(和$)在C中变成{和}</h1><p id="ced2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">大约在1968年或1969年，贝尔实验室的肯·汤普森和丹尼斯·里奇开始尝试使用系统编程语言开发操作系统。汤普森实际上是通过尝试使用Fortran来开始这一探索的，但当他意识到这是不可能的时，他很快就放弃了。他认为他需要修改BCPL，使系统编程语言更符合他的喜好，于是开发了b。</p><p id="3a29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">B虽然更接近Thompson和Ritchie想要的系统开发语言，但仍然不能完全满足他们的需求，所以Ritchie开始为新的B开发另一种语言，称为NB。NB并没有存在很长时间，最终被一种全新的语言所取代，他们自然称之为C。如果你对C是如何从BCPL、B和NB发展而来感兴趣，我鼓励你阅读Dennis Ritchie的C语言历史。</p><p id="434b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Thompson在B中修正的许多东西中的一个被带到了n B和C中，就是缩写运算符。这些是扩展语言适应当时计算机内存限制所必需的。例如，Thompson创造了复合赋值操作符(<code class="fe nb nc nd ne b">+=</code>)和增量(<code class="fe nb nc nd ne b">++</code>)和减量(<code class="fe nb nc nd ne b">—</code>)操作符，作为使语言更有效的方法。这一提高效率的举措导致来自BCPL的其他运营商被简化——例如，<code class="fe nb nc nd ne b">$(</code>和<code class="fe nb nc nd ne b">$)</code>被替换为<code class="fe nb nc nd ne b">{</code>和<code class="fe nb nc nd ne b">}</code>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="23e0" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">我们今天在哪里</h1><p id="729f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在许多编程语言中，花括号被认为是块的主要符号，尤其是那些最接近C风格的语言，包括C++、Java、C#和JavaScript。</p><p id="6274" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更有趣的是，新的语言已经开始使用花括号，包括Go和Rust。事实上，Go对每个条件或循环结构都需要花括号，这是遵循编程专家的观点，即即使语言不需要花括号，程序员也应该对每个可以使用花括号的结构使用花括号。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="e1ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您阅读这篇文章，请给我发电子邮件，告诉我您的意见和建议</p></div></div>    
</body>
</html>