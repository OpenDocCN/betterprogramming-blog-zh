# 我收到的最好的代码评审反馈

> 原文：<https://betterprogramming.pub/the-best-code-review-feedback-i-ever-received-43313a503517>

## 保持你的变化小

![](img/56778025453beab3c54234bce67631a0.png)

乔纳森·博尔巴在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

作为一名初级工程师，我在进行大规模、彻底的变革时变得多产。我会发现问题，然后正面解决它。

这通常意味着我会发出巨大的代码审查。我会在一次更改中接触从 UI 到数据库的所有内容。

我很自豪我能像那样把整个系统记在脑子里。我为“快速”工作而自豪。我为自己的无畏、勇敢和应对重大问题的能力感到自豪。

有一天，一位高级工程师把我拉到一边，给了我职业生涯中收到的最好的代码评审反馈。他告诉我把我庞大的代码审查分解成更小的、递增的变更。

我的第一反应是生气。我不明白他为什么要我把我的改动打散。我对自己的能力感到非常自豪！为什么他告诉我我的工作很糟糕？！计划渐进的步骤只会让我慢下来！

我还不明白小的、渐进的改变有多少好处。我很高兴我听了这位高级工程师的话。我很高兴我学会了做更小的、渐进的改变。

它现在是我的超能力。

# 进行渐进式变革的好处

进行渐进式改变有很多好处。

*   **较少合并冲突。**您更改的文件越多，其他人同时更改这些文件的子集的可能性就越大。通过进行小的更改并快速检入它们来避免合并冲突。
*   更快的代码审查。人类复习五档比 50+容易。审查可以快速解释的变更更容易——与需要 10 分钟的面对面交谈，然后才有人开始查看代码的变更相反。工程师可能很懒——如果他们看到大量的代码审查，他们会希望其他人代替他们做这项工作。你可能要花更长的时间才能找到审查你的大量代码变更的人。
*   **早先的航向修正。你的代码审查员可能不同意你的方向。他们可能会要求你重做一切。如果你只花了几个小时来改变，这没什么大不了的。当你浪费了两天或更多的时间来完善一个端到端的场景时，这要痛苦得多。**
*   **更快的测试。**如果您已经接触了从 UI 到数据库的所有东西，您可能需要重新测试整个产品。如果你做了小的改变，你可能只需要测试你正在修改的部分。如果您需要处理大量的代码评审反馈，或者如果您需要在签入之前合并大量的代码，这种好处会变得特别明显。重新测试一切可能会花费很长时间——特别是如果一些测试是手工的。
*   **更少的虫子。**小小的改变意味着你不必同时将整个世界都记在脑子里。你可以专注于你正在改进的小角落，并确保你做得很好。(我见过一位工程师，他被自己的巨大改变弄得不知所措，以至于养成了这样一种习惯:只抱最好的希望，在事后检查和修复错误。不要成为那样的人。即使没有客户注意到，你也会惹恼你的工程师同事。他们将不再相信你的代码。)
*   **更容易排除故障。**如果你最终真的打破了什么东西，如果你的改变很小，就更容易找到根本原因。
*   **增量部署。如果您想知道如何在不停机的情况下部署某些东西，小的、增量的变化可能是您的答案(但它们可能不是全部)。**
*   **恢复您的更改更容易。**bug 发生。您的更改越小，就越容易恢复。如果您签入了一个巨大的变更，然后几个人更改了一些相同的文件，那么您可能会陷入痛苦的境地，您必须在恢复许多变更或者签入快速修复(这可能实际上不起作用)之间做出选择。如果您的生产环境着火了，如果您可以简单地恢复最初的坏变化，那么对每个人来说压力都会小很多。
*   **更轻松的部署回滚。**如果一个单独的部署更新了一个 web 服务*并且*立即引入了一个依赖于服务更新的 UI 特性，那么在没有首先移除 UI 特性的情况下，您不能恢复服务变更。根据您的部署如何工作，在零宕机的情况下恢复这两种更改可能并不简单。最好是自己签入和部署 web 服务变更。
*   **降低风险。**这确实是以上所有情况的后果。

# 向前支付

那天我从高级工程师那里得到的代码审查反馈被证明是我整个职业生涯中迄今为止收到的最好的工程反馈。

几年后，我遇到了另一位工程师，他一直在进行大规模、彻底的变革。我和他分享了同样的反馈。他似乎生我的气，我能理解为什么。在我看到他的工作有任何改进之前，我就离开了那份工作。我希望他最终能体验到小变化给自己带来的好处。

他会成为一名更好的工程师。