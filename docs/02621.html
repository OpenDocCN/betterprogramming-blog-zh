<html>
<head>
<title>Functional Programming and the Pipe Function in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的函数式编程和管道函数</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/functional-programming-and-the-pipe-function-in-javascript-c92833052057?source=collection_archive---------1-----------------------#2019-12-13">https://betterprogramming.pub/functional-programming-and-the-pipe-function-in-javascript-c92833052057?source=collection_archive---------1-----------------------#2019-12-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a883" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是管道，我们如何使用它？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/486056de52bf3df7f4b4c9da4b98514e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GnxnSAmeFvztGb2J"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">约翰·汤纳在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="713e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你想做一件事，但是在一个函数中很复杂，你怎么解决这个问题？如果你想把功能分成很多块，但又想做得更优雅，该怎么办？</p><p id="8080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/tc39/proposal-pipeline-operator" rel="noopener ugc nofollow" target="_blank"> TC39 GitHub上有一个有趣的提议——</a><a class="ae ky" href="https://github.com/tc39/proposal-pipeline-operator" rel="noopener ugc nofollow" target="_blank">提议——管道——运营商</a> <a class="ae ky" href="https://github.com/tc39/proposal-pipeline-operator" rel="noopener ugc nofollow" target="_blank">第一阶段</a>。虽然它仍然是悬而未决的，因为它提到的，建议的想法是很有趣的看看。</p><p id="2dc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将谈论管道和管道，这对于函数式编程是很重要的，以及如何编写它们。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3b5a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">阅读前</h1><p id="9a58" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这篇文章的前提是你了解JavaScript基础知识和<code class="fe mz na nb nc b">Array.prototype</code>中的一些内置方法。</p><p id="25ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不熟悉这些，我建议您阅读关于它们的文档。而且，我制作管道函数的方式可能与JavaScript世界中的其他管道不同。但核心概念不会如此不同。</p><ul class=""><li id="abe2" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank">在MDN中减少</a>。</li><li id="9eea" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank">MDN</a>中的箭头功能。</li></ul><p id="06f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，我将向不了解它的人解释<code class="fe mz na nb nc b">pipe</code>以及如何一步一步地创建它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2009" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">JavaScript中管道的定义</h1><p id="2204" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">所以，首先，让我们谈谈JavaScript中的管道是什么。听到“烟斗”你会想到什么？是的，你说得对。天花板上的一堆管道用来输气什么的，或者地下的水管。</p><p id="3fa1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些管道的作用是作为资源从A到b的通道。除了作为资源通过的空间之外，它对资源没有任何作用。</p><p id="9559" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript中管道函数的想法来自于现实世界中的管道。<a class="ae ky" href="https://whatis.techtarget.com/definition/pipe" rel="noopener ugc nofollow" target="_blank">什么是</a>解释什么是管道如下:</p><blockquote class="nr"><p id="23b3" class="ns nt it bd nu nv nw nx ny nz oa lu dk translated">“管道只是单向通信。基本上，管道将一个参数(如一个进程的输出)传递给另一个进程，后者接受它作为输入。</p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a534" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">纯函数</h1><p id="a011" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于pipe来说，这是一个非常重要的概念。什么是纯函数？纯函数是做以下事情的函数。</p><ol class=""><li id="4a68" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ob nj nk nl bi translated">使用相同的输入返回相同的输出。</li><li id="ec55" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ob nj nk nl bi translated">不改变其功能范围之外的任何值。</li></ol><p id="92eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是为什么纯函数对pipe很重要呢？正如我在上面解释的，管道将一个给定的值传递给下一个管道。但是如果函数可以返回不同的值，那么管道中的下一个函数就不能保证稳定的结果。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="11c3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">不带管道</h1><p id="60f4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">好的。让我们看一个简单的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="d634" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有两个函数，<code class="fe mz na nb nc b">addFour</code>和<code class="fe mz na nb nc b">minusFive</code>。我们可以很容易地从每个函数中得到一个回报。当我们想同时加减数字时，我们可以这样做:</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="8c77" class="oi md it nc b gy oj ok l ol om">addFour(minusFive(0)); // -1</span></pre><p id="e3ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，乘以10。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="1be3" class="oi md it nc b gy oj ok l ol om">multiplyByTen(addFour(minusFive(0))); // -10</span></pre><p id="a09c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是因为我们不喜欢负数，所以我们想把它改成正数。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="ce04" class="oi md it nc b gy oj ok l ol om">Math.abs(multiplyByTen(addFour(minusFive(0)))); 10</span></pre><p id="1ac7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你怎么看待这个过程？这看起来不是很乱吗？尤其是在语句的末尾有如此多的右括号。</p><p id="de4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，它不会导致任何编程错误或问题。但是这可能会降低代码的可读性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b5f6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何写管道</h1><p id="0037" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要让管道工作，您应该让函数连续运行。在<code class="fe mz na nb nc b">Array</code>类中，有一个非常有用的方法，<code class="fe mz na nb nc b">Array.prototype.reduce</code>。<code class="fe mz na nb nc b">reduce</code>所做的是循环遍历一个数组，并产生一个紧凑的结果。</p><p id="5364" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果你想得到所有学生的总分，你可以这样写你的函数，如下所示:</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="b482" class="oi md it nc b gy oj ok l ol om">const scores = [90, 100, 40, 50, 10];<br/>let total = 0;</span><span id="ecbd" class="oi md it nc b gy on ok l ol om">scores.forEach(score =&gt; total += score); <br/>console.log(total); // 290</span></pre><p id="5eac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个例子使用了<code class="fe mz na nb nc b">forEach</code>，因为<code class="fe mz na nb nc b">map</code>或<code class="fe mz na nb nc b">filter</code>产生了一个新的数组。但是这个例子有一个问题，因为<code class="fe mz na nb nc b">total</code>必须用<code class="fe mz na nb nc b">let</code>声明，因为<code class="fe mz na nb nc b">total</code>已经在<code class="fe mz na nb nc b">forEach</code>的循环中被改变了。</p><p id="95b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，相比之下，<code class="fe mz na nb nc b">reduce</code>返回一个通过循环计算的值。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="4d2e" class="oi md it nc b gy oj ok l ol om">const scores = [90, 100, 40, 50, 10];<br/>const total = scores.reduce((acc, cur) =&gt; acc + cur, 0);<br/>console.log(total); // 290</span></pre><p id="7fb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你没有得到这个区别，请查看<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="576b" class="oi md it bd me oo op dn mi oq or dp mm li os ot mo lm ou ov mq lq ow ox ms oy bi translated">第一步。将所有我们想要入队的函数放入reduce中</h2><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="5a7b" class="oi md it nc b gy oj ok l ol om">const pipe = (funcs) =&gt; {<br/>  return funcs.reduce((acc, cur) =&gt; {<br/>    ...<br/>  });<br/>}</span></pre><p id="b3b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，现在怎么办？<code class="fe mz na nb nc b">func.reduce</code>的每个参数必须返回下一个函数需要的值。</p><p id="6827" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从下一个函数的角度来看，应该传入它的参数应该来自于前面对<code class="fe mz na nb nc b">reduce</code>的调用。在<code class="fe mz na nb nc b">reduce</code>中，<code class="fe mz na nb nc b">acc</code>是返回值，<code class="fe mz na nb nc b">cur</code>是数组的当前值。</p><p id="e11a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很好。然后，为了更好的可读性，让我们更改参数的名称。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="e963" class="oi md it nc b gy oj ok l ol om">funcs.reduce((<strong class="nc iu">res, func</strong>) =&gt; {<br/>  ...<br/>});</span></pre><h2 id="ac3d" class="oi md it bd me oo op dn mi oq or dp mm li os ot mo lm ou ov mq lq ow ox ms oy bi translated">第二步。填充身体部位</h2><p id="672f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在你知道每个返回值都将是下一个函数的参数。为了实现这一点，我们应该运行带有参数<code class="fe mz na nb nc b">res</code>的函数。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="8501" class="oi md it nc b gy oj ok l ol om">funcs.reduce((res, func) =&gt; {<br/>  <strong class="nc iu">return func(res);</strong><br/>});</span></pre><p id="30e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，这还是挺奇怪的。为什么？即使这些函数可以使用它们需要的参数正确执行，如果第一个函数也想要使用参数呢？</p><p id="7c18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，由于<code class="fe mz na nb nc b">reduce</code>的<code class="fe mz na nb nc b">initialValue</code>不存在，数组的第一个元素将被用作<code class="fe mz na nb nc b">initialValue</code>，这将是一个函数，它将从执行中被省略。</p><p id="f722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，数组的第二个元素将被用作循环的第一个<code class="fe mz na nb nc b">cur</code>。</p><p id="b0c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，你需要为数组中的第一个函数设置<code class="fe mz na nb nc b">initialValue</code>，但是作为什么呢？您没有将任何值放入<code class="fe mz na nb nc b">pipe</code>。</p><h2 id="9f9d" class="oi md it bd me oo op dn mi oq or dp mm li os ot mo lm ou ov mq lq ow ox ms oy bi translated">第三步。设置<code class="fe mz na nb nc b">InitialValue</code></h2><p id="bccd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们将取该函数的值。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="bca2" class="oi md it nc b gy oj ok l ol om">const pipe = (funcs, <strong class="nc iu">v</strong>) =&gt; {<br/>  return funcs.reduce((res, func) =&gt; {<br/>    return func(res);<br/>  }, <strong class="nc iu">v</strong>);<br/>};</span></pre><p id="17e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们试着运行这个函数，看看它是否像预期的那样工作。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="01af" class="oi md it nc b gy oj ok l ol om">const addFive = v =&gt; v + 5;<br/>const identity = v =&gt; v;</span><span id="2e4c" class="oi md it nc b gy on ok l ol om">console.log(pipe([<br/>  addFive,<br/>  identity<br/>], 5)); <br/>// 10</span></pre><p id="4443" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有用！但是，实际上有一个问题，因为<code class="fe mz na nb nc b">pipe</code>只接受一个数组。所以，你不能像下面这样运行<code class="fe mz na nb nc b">pipe</code>函数:</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="a702" class="oi md it nc b gy oj ok l ol om">pipe(addFive, 5);<br/>//   ~~~<br/>// Uncaught TypeEror: funcs.reduce is not a function</span></pre><h2 id="22c3" class="oi md it bd me oo op dn mi oq or dp mm li os ot mo lm ou ov mq lq ow ox ms oy bi translated">第四步。一般化</h2><p id="a233" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">看起来如果<code class="fe mz na nb nc b">pipe</code>也能有一个单一的功能就更好了。此时，我将使用rest参数。</p><p id="257b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">rest参数的作用是允许函数将任何参数作为数组。点击此处查看<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters" rel="noopener ugc nofollow" target="_blank">其余参数</a>。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="1cd9" class="oi md it nc b gy oj ok l ol om">// Rest parameter must be last formal parameter !!<br/>const pipe = (v, <strong class="nc iu">...funcs</strong>) =&gt; {<br/>  return funcs.reduce((res, func) =&gt; {<br/>    return func(res);<br/>  }, <strong class="nc iu">v</strong>);<br/>};</span></pre><p id="03d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们看看它是否有效。</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="f360" class="oi md it nc b gy oj ok l ol om">const subtract = v =&gt; v - 5;</span><span id="131e" class="oi md it nc b gy on ok l ol om">console.log(pipe(10, subtract)); // 5</span></pre><p id="e0d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它工作了，但是现在为第一个调用的第一个参数传递到<code class="fe mz na nb nc b">pipe</code>中的值应该是第一个参数。因为根据rest参数的规则，我们改变了参数的顺序。</p><p id="25e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不喜欢这样。那么，我们该如何解决这个问题呢？</p><p id="968e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用闭包。闭包是一个函数，它返回对已经执行完的外部函数的引用。如果你不熟悉closure，你可能想看看我以前的帖子。</p><div class="oz pa gp gr pb pc"><a href="https://medium.com/better-programming/execution-context-lexical-environment-and-closures-in-javascript-b57c979341a5" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">JavaScript中的执行上下文、词汇环境和闭包</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">你应该知道的高级JavaScript概念</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq ks pc"/></div></div></a></div><p id="255a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，最后，<code class="fe mz na nb nc b">pipe</code>可以这样修改:</p><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="33f0" class="oi md it nc b gy oj ok l ol om">const pipe = (<strong class="nc iu">...</strong>funcs) =&gt; <strong class="nc iu">v </strong>=&gt; {<br/>  return funcs.reduce((res, func) =&gt; {<br/>    return func(res);<br/>  }, <strong class="nc iu">v</strong>);<br/>};</span><span id="1458" class="oi md it nc b gy on ok l ol om">pipe(add)(5) // 10</span></pre><p id="0f65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，<code class="fe mz na nb nc b">pipe</code>返回另一个采用<code class="fe mz na nb nc b">v</code>的函数。直到返回函数取<code class="fe mz na nb nc b">v</code>，它才完成<code class="fe mz na nb nc b">reduce</code>。作为最后一步，让我们确认它是否正常工作。</p><h2 id="af7a" class="oi md it bd me oo op dn mi oq or dp mm li os ot mo lm ou ov mq lq ow ox ms oy bi translated">最后一步:测试</h2><pre class="kj kk kl km gt oe nc of og aw oh bi"><span id="273b" class="oi md it nc b gy oj ok l ol om">const minusFive = v =&gt; v - 5;<br/>const addFour = v =&gt; v + 4;<br/>const multiplyByTen = v =&gt; v * 10;<br/>const identity = v =&gt; v;</span><span id="7950" class="oi md it nc b gy on ok l ol om">const res = pipe(<br/>  minusFive,<br/>  addFour,<br/>  multiplyByTen,<br/>  Math.abs,<br/>  identity<br/>)(0);</span><span id="d1f4" class="oi md it nc b gy on ok l ol om">console.log(res); // 10. it works !</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a3e5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="c52c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe mz na nb nc b">pipe</code>是函数式编程中非常有用的函数之一。它降低了阅读代码的复杂性，相反，增加了可读性。</p><p id="ad0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要记住的重要一点是，将与<code class="fe mz na nb nc b">pipe</code>一起使用的每个函数都应该是一个纯函数。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="85c2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><ul class=""><li id="2c56" class="nd ne it lb b lc mu lf mv li pr lm ps lq pt lu ni nj nk nl bi translated"><a class="ae ky" href="https://github.com/tc39/proposal-pipeline-operator" rel="noopener ugc nofollow" target="_blank"> TC39管道GitHub上的操作员</a></li><li id="ac7a" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><a class="ae ky" href="https://whatis.techtarget.com/definition/pipe" rel="noopener ugc nofollow" target="_blank">编程中的管道—什么是</a></li><li id="f40b" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters" rel="noopener ugc nofollow" target="_blank">MDN中的其余参数</a></li></ul></div></div>    
</body>
</html>