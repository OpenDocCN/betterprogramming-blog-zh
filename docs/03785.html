<html>
<head>
<title>2 Ways to Resolve Duplication in JavaScript Arrays and Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解决JavaScript数组和对象重复的两种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/2-ways-to-resolve-duplication-in-javascript-arrays-and-objects-e377e1bdc5e1?source=collection_archive---------8-----------------------#2020-03-04">https://betterprogramming.pub/2-ways-to-resolve-duplication-in-javascript-arrays-and-objects-e377e1bdc5e1?source=collection_archive---------8-----------------------#2020-03-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="fa84" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">你知道如何处理重复吗？</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/256fbb50f48481068feb0860d1c23cf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DZg0829DQKwA3fxP"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@jaanus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jaanus jagomgi</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="c65e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本文中，我想向您展示消除重复数据是多么简单。有几个地方可能会因为某种原因出现重复数据。</p><p id="8a8f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">没有什么比JavaScript中的重复数据更烦人的了。因此，让我们来实际演练一下如何与之对抗。</p><p id="f9ff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我强烈建议不要简单地复制和粘贴我的代码。当然可以——但是请按照我的解释去理解它是如何工作的。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="b57c" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">1.具有重复字符串或数字的数组</h1><pre class="kk kl km kn gu mv mw mx my aw mz bi"><span id="4a13" class="na me iu mw b gz nb nc l nd ne">const dupStrings = ['Angular', 'React', 'VueJS', 'Svelte', 'React']<br/>const dupNumbers = [1,2,3,4,5,6,2,4,6,7,8,9,0]</span></pre><p id="10ba" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第一个数组中有一些重复的字符串，另一个数组中有重复的数字。</p><p id="27a2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了去掉重复的数据，我们将使用<code class="fe nf ng nh mw b">Set</code>。<code class="fe nf ng nh mw b">Set</code>只接受唯一值。</p><blockquote class="ni nj nk"><p id="28d2" class="la lb nl lc b ld le jv lf lg lh jy li nm lk ll lm nn lo lp lq no ls lt lu lv in bi translated"><code class="fe nf ng nh mw b">Set</code>对象是值的集合。您可以按插入顺序循环访问集合中的元素。<code class="fe nf ng nh mw b">Set</code> <strong class="lc iv">中的一个值只能出现一次</strong>；这在<code class="fe nf ng nh mw b">Set</code>的收藏中是独一无二的。”— <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></p></blockquote><pre class="kk kl km kn gu mv mw mx my aw mz bi"><span id="f23b" class="na me iu mw b gz nb nc l nd ne">console.log(new Set(dupStrings))</span><span id="3cfe" class="na me iu mw b gz np nc l nd ne">// Set(5) {"Angular", "React", "VueJS", "Svelte", ""}</span><span id="5331" class="na me iu mw b gz np nc l nd ne">console.log(new Set(dupNumbers))</span><span id="cada" class="na me iu mw b gz np nc l nd ne">// Set(10) {1, 2, 3, 4, 5, 6, 7, 8, 9, 0}</span></pre><p id="b455" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当我们将数组放入<code class="fe nf ng nh mw b">Set</code>并将其输出到控制台时，您会看到重复的值被从数组中移除。</p><p id="4450" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下面的CodeSandbox中，你可以看到它是如何工作的。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nq nr l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">查看<a class="ae kz" href="https://codesandbox.io/s/array-with-duplicated-strings-ornumbers-fu3d2" rel="noopener ugc nofollow" target="_blank">代码沙箱</a></p></figure><p id="3d7d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是现在，我们把它变成了一个<code class="fe nf ng nh mw b">Set</code>，我们需要清理后的数组，这样我们就可以进一步施展我们的JavaScript魔法了。</p><p id="a026" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最简单的方法是在数组括号<code class="fe nf ng nh mw b">[...]</code>中使用<code class="fe nf ng nh mw b">...</code> <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank">展开语法</a>。让我们把它放到一个函数中，这样我们就可以在应用程序的任何地方重用它。</p><h2 id="1f75" class="na me iu bd mf ns nt dn mj nu nv dp mn lj nw nx mp ln ny nz mr lr oa ob mt oc bi translated">创建一个函数</h2><p id="e7e5" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">现在我们需要从它创建一个函数，这样我们就可以在其他地方重用它。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi nr l"/></div></figure><h2 id="60ef" class="na me iu bd mf ns nt dn mj nu nv dp mn lj nw nx mp ln ny nz mr lr oa ob mt oc bi translated">该功能是如何工作的？</h2><p id="4a10" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">在我们的函数中，我们定义了一个参数<code class="fe nf ng nh mw b">array</code>，我们期望它是一个数组。我们在<code class="fe nf ng nh mw b">if</code>语句中检查这一点。</p><ul class=""><li id="db2a" class="oj ok iu lc b ld le lg lh lj ol ln om lr on lv oo op oq or bi translated"><code class="fe nf ng nh mw b">!array</code>:我们简单的检查数组是<code class="fe nf ng nh mw b">null</code>还是<code class="fe nf ng nh mw b">undefined</code></li><li id="2c0c" class="oj ok iu lc b ld os lg ot lj ou ln ov lr ow lv oo op oq or bi translated"><code class="fe nf ng nh mw b">!Array.isArray(array)</code>:我们使用array helper方法来检查<code class="fe nf ng nh mw b">array</code>的值是否确实是一个数组。如果你把<code class="fe nf ng nh mw b">!</code>放在它前面，我们检查输出是否是<code class="fe nf ng nh mw b">false</code>。</li><li id="3bbd" class="oj ok iu lc b ld os lg ot lj ou ln ov lr ow lv oo op oq or bi translated"><code class="fe nf ng nh mw b">array.length === 0</code>:我们用它来检查数组的长度是否为<code class="fe nf ng nh mw b">0 </code>——这表示一个空数组</li></ul><p id="2367" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果满足其中一个条件，我们让函数返回函数中给定的数组。</p><p id="00c4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果条件不满足，它会把数组放到<code class="fe nf ng nh mw b">new Set()</code>中，我们使用<code class="fe nf ng nh mw b">...</code> spread语法把它变成一个数组。</p><p id="a0c4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们需要调用函数。</p><pre class="kk kl km kn gu mv mw mx my aw mz bi"><span id="3b37" class="na me iu mw b gz nb nc l nd ne">unDuplicateArraySingleValues(array)</span></pre><h2 id="489a" class="na me iu bd mf ns nt dn mj nu nv dp mn lj nw nx mp ln ny nz mr lr oa ob mt oc bi translated">测试功能</h2><p id="505e" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">检查下面的例子是否一切正常。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nq nr l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">检查<a class="ae kz" href="https://codesandbox.io/s/array-with-duplicated-strings-ornumbers-with-function-jwrj9" rel="noopener ugc nofollow" target="_blank">代码沙箱</a></p></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="4a45" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">2.具有重复对象的数组</h1><p id="3e30" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">让我们定义一个包含重复信息的示例对象数组</p><pre class="kk kl km kn gu mv mw mx my aw mz bi"><span id="8911" class="na me iu mw b gz nb nc l nd ne">const dupObjects = [<br/>   { id: 1, name: "a", value: "c" },<br/>   { id: 2, name: "b", value: "d" },<br/>   { id: 2, name: "c", value: "e" },<br/>   { id: 3, name: "d", value: "c" }<br/>];</span></pre><p id="abf3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以看到有几个重复的属性值。</p><p id="cb96" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我认为这听起来很明显，你不想在你的对象数组中有任何重复的信息。</p><h2 id="b44e" class="na me iu bd mf ns nt dn mj nu nv dp mn lj nw nx mp ln ny nz mr lr oa ob mt oc bi translated">创建一个函数</h2><p id="117c" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">因此，我们需要一个函数来检查我们的数组，并根据给定的属性，检查是否有其他对象具有相同信息的属性。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oi nr l"/></div></figure><p id="0b1f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此<code class="fe nf ng nh mw b">function</code>的启动与上一示例相同。因此，为此制作一个新的<code class="fe nf ng nh mw b">function</code>是个好主意。在这个例子中，我们保持不变。</p><h2 id="d420" class="na me iu bd mf ns nt dn mj nu nv dp mn lj nw nx mp ln ny nz mr lr oa ob mt oc bi translated">该功能是如何工作的？</h2><p id="68ea" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">在我们的<code class="fe nf ng nh mw b">function</code>中，我们定义了一个参数<code class="fe nf ng nh mw b">array,</code>，我们期望它是一个数组。我们在<code class="fe nf ng nh mw b">if</code>语句中检查这一点。</p><ul class=""><li id="a9d4" class="oj ok iu lc b ld le lg lh lj ol ln om lr on lv oo op oq or bi translated"><code class="fe nf ng nh mw b">!array</code>:我们简单的检查数组是<code class="fe nf ng nh mw b">null</code>还是<code class="fe nf ng nh mw b">undefined</code></li><li id="1873" class="oj ok iu lc b ld os lg ot lj ou ln ov lr ow lv oo op oq or bi translated"><code class="fe nf ng nh mw b">!Array.isArray(array)</code>:我们使用array helper方法来检查<code class="fe nf ng nh mw b">array</code>的值是否确实是一个数组。如果你把<code class="fe nf ng nh mw b">!</code>放在它前面，我们检查输出是否是<code class="fe nf ng nh mw b">false</code>。</li><li id="c5c7" class="oj ok iu lc b ld os lg ot lj ou ln ov lr ow lv oo op oq or bi translated"><code class="fe nf ng nh mw b">array.length === 0</code>:我们用这个来检查数组的长度是否为<code class="fe nf ng nh mw b">0 </code>——这表示一个空数组。</li><li id="527f" class="oj ok iu lc b ld os lg ot lj ou ln ov lr ow lv oo op oq or bi translated"><code class="fe nf ng nh mw b">!property</code>:通过这个，我们检查属性值是否为<code class="fe nf ng nh mw b">false</code>——这意味着我们检查<code class="fe nf ng nh mw b">null</code>、<code class="fe nf ng nh mw b">undefined</code>或<code class="fe nf ng nh mw b">0</code>。因为如果是这种情况，我们就不能检查对象中的重复信息。</li></ul><p id="81b3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后我们创建一个变量<code class="fe nf ng nh mw b">objectArrayKeys,</code>，在这个变量中我们存储了在<code class="fe nf ng nh mw b">propertyName</code>参数中给定的属性值数组。</p><p id="90d7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在<code class="fe nf ng nh mw b">uniqueKeys</code>中，我们删除重复的值。但是我们利用了之前的函数。这个函数返回一个只有唯一值的新数组。</p><p id="4124" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们基于<code class="fe nf ng nh mw b">uniqueKeys</code>数组返回一个只包含唯一对象的数组。</p><p id="2f10" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我们需要调用函数。</p><pre class="kk kl km kn gu mv mw mx my aw mz bi"><span id="dee9" class="na me iu mw b gz nb nc l nd ne">unDuplicateArrayObjects(dupObjects, "id")</span></pre><h2 id="f6c4" class="na me iu bd mf ns nt dn mj nu nv dp mn lj nw nx mp ln ny nz mr lr oa ob mt oc bi translated">测试功能</h2><p id="2280" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">在下面的例子中，检查更改函数中的属性名，这样我们就可以验证一切工作正常。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nq nr l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">查看<a class="ae kz" href="https://codesandbox.io/s/array-with-duplicated-objects-with-function-44pdz" rel="noopener ugc nofollow" target="_blank">代码沙箱</a></p></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="f5db" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="b52b" class="pw-post-body-paragraph la lb iu lc b ld od jv lf lg oe jy li lj of ll lm ln og lp lq lr oh lt lu lv in bi translated">我希望您已经学会了如何消除单值数组或对象数组中的重复数据。</p><p id="337c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个问题我个人已经googled了上千次了。这就是我为你写这篇教程的原因。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ox"><img src="../Images/a72eb48c81bbe92d2070b77f9724eb94.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*0fLVc6GjamTuPR79Cqce4Q.png"/></div></figure><p id="6147" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">大家好，我是来自荷兰🇳🇱的JavaScript开发人员<strong class="lc iv"> Ray </strong>，我喜欢分享我从2009年开始做开发人员以来所获得的知识。我写关于JavaScript、TypeScript、Angular和任何与开发人员生活相关的东西的故事。</p><p id="ac9c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">你可以在<a class="ae kz" href="https://twitter.com/devbyrayray" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae kz" href="https://www.instagram.com/devbyrayray/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>或<a class="ae kz" href="https://buttondown.email/devbyrayray" rel="noopener ugc nofollow" target="_blank">上关注我，订阅我发布新故事时发送的简讯</a>。</p><p id="173c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="nl">快乐编码🚀</em></p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="da03" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">从我这里读更多</h1><div class="oy oz gq gs pa pb"><a href="https://medium.com/better-programming/build-fast-json-powered-forms-on-angular-with-ngx-formly-b7a00733e66e" rel="noopener follow" target="_blank"><div class="pc ab fp"><div class="pd ab pe cl cj pf"><h2 class="bd iv gz z fq pg fs ft ph fv fx it bi translated">使用NGX Formly在Angular上构建快速的、基于JSON的表单</h2><div class="pi l"><h3 class="bd b gz z fq pg fs ft ph fv fx dk translated">表格可能是一场噩梦——让我们把它们变得更好</h3></div><div class="pj l"><p class="bd b dl z fq pg fs ft ph fv fx dk translated">medium.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp kt pb"/></div></div></a></div><div class="oy oz gq gs pa pb"><a href="https://medium.com/better-programming/you-dont-need-a-javascript-framework-df2a36c2dd0a" rel="noopener follow" target="_blank"><div class="pc ab fp"><div class="pd ab pe cl cj pf"><h2 class="bd iv gz z fq pg fs ft ph fv fx it bi translated">你不需要JavaScript框架</h2><div class="pi l"><h3 class="bd b gz z fq pg fs ft ph fv fx dk translated">有时反应，角，或Vue.js可能太多了</h3></div><div class="pj l"><p class="bd b dl z fq pg fs ft ph fv fx dk translated">medium.com</p></div></div><div class="pk l"><div class="pq l pm pn po pk pp kt pb"/></div></div></a></div><div class="oy oz gq gs pa pb"><a href="https://medium.com/better-programming/2-ways-to-resolve-duplication-in-javascript-arrays-and-objects-e377e1bdc5e1" rel="noopener follow" target="_blank"><div class="pc ab fp"><div class="pd ab pe cl cj pf"><h2 class="bd iv gz z fq pg fs ft ph fv fx it bi translated">解决JavaScript数组和对象重复的两种方法</h2><div class="pi l"><h3 class="bd b gz z fq pg fs ft ph fv fx dk translated">你知道如何处理重复吗？</h3></div><div class="pj l"><p class="bd b dl z fq pg fs ft ph fv fx dk translated">medium.com</p></div></div><div class="pk l"><div class="pr l pm pn po pk pp kt pb"/></div></div></a></div><div class="oy oz gq gs pa pb"><a href="https://medium.com/better-programming/7-steps-to-dockerize-your-angular-9-app-with-nginx-915f0f5acac" rel="noopener follow" target="_blank"><div class="pc ab fp"><div class="pd ab pe cl cj pf"><h2 class="bd iv gz z fq pg fs ft ph fv fx it bi translated">使用Nginx对Angular 9应用程序进行分类的7个步骤</h2><div class="pi l"><h3 class="bd b gz z fq pg fs ft ph fv fx dk translated">在Docker环境中设置Angular 9应用程序，并立即进行部署</h3></div><div class="pj l"><p class="bd b dl z fq pg fs ft ph fv fx dk translated">medium.com</p></div></div><div class="pk l"><div class="ps l pm pn po pk pp kt pb"/></div></div></a></div></div></div>    
</body>
</html>