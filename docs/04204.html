<html>
<head>
<title>Use Module Path Import instead of Relative Path Import for typescript projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对于typescript项目，使用模块路径导入而不是相对路径导入</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/best-practice-use-module-path-import-instead-of-relative-path-import-4baaf1b3b4db?source=collection_archive---------5-----------------------#2020-03-30">https://betterprogramming.pub/best-practice-use-module-path-import-instead-of-relative-path-import-4baaf1b3b4db?source=collection_archive---------5-----------------------#2020-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5db7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">TypeScript最佳实践</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a3d1a0af30d427b353103fec9931853a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlvTs6q5T5p4LtUcyhS2YA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="26dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个关于在TypeScript中使用模块路径导入而不是相对路径导入的非常简单的教程。我们还将介绍如何消除“../../../”放在文件的顶部。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="41b1" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">问题</strong></h1><p id="de63" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">如果您是一名TypeScript或JavaScript开发人员，您肯定见过这些点斜线(“../../../)放在您的文件上面。当您导入两个或三个以上的组件时，一眼就能看出哪些组件属于哪个模块就成了一场噩梦。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/e292b497f04f92bd0d8d1a176926cbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKQHPSecHdEko9WpYXG-vQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">相对路径导入。</p></figure><p id="eeab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一些解决方案，但是每一个对项目结构都有缺点和副作用。例如，使用babel/typescript <em class="mz"> </em>会导致输出中的*.d.ts文件丢失。使用webpack，设置将花费大量时间。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="2c7e" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">解决方案</strong></h1><p id="b427" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">默认情况下，TypeScript支持模块导入。与那些难看的点斜线不同，您可以在<code class="fe na nb nc nd b">tsconfig.json</code>中配置模块路径，然后将它们用于导入。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/8acc2fb9979939e69d66a8ccfadec007.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*6QRkWHViu_gbUbNNrrnRKQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">tsconfig.json。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/f70243d0144831ef7cd5c65b8ee09ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kGAP8Jj5O_uCSh8bUT5-bQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用模块路径加载。</p></figure><p id="bf3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这样做有一个问题:将TypeScript代码编译成JavaScript会使它不能被JavaScript使用。JavaScript不理解那些模块路径。同样，像ts-node或ts-jest <strong class="la iu"> </strong>这样的工具不理解这些模块路径导入。</p><p id="b612" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一个npm包(<a class="ae ng" href="https://www.npmjs.com/package/tsconfig-paths" rel="noopener ugc nofollow" target="_blank"> tsconfig-path </a>)在运行时解析这些模块导入，并帮助JavaScript运行编译后的代码。这也有助于ts-node和ts-jest理解这些组件。</p><h2 id="f6ec" class="nh mc it bd md ni nj dn mh nk nl dp ml lh nm nn mn ll no np mp lp nq nr mr ns bi translated"><strong class="ak">做什么</strong></h2><ul class=""><li id="9f94" class="nt nu it la b lb mt le mu lh nv ll nw lp nx lt ny nz oa ob bi translated">用正确的路径配置更新<code class="fe na nb nc nd b">tsconfig.json</code>。我用src/* <strong class="la iu"> </strong>作为单项，但你可以用倍数。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/bed4bfcb3205c3f24267fc70304802d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*4y9h26NmlSrYUyFP7wnExQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">tsconfig.json</p></figure><ul class=""><li id="7747" class="nt nu it la b lb lc le lf lh od ll oe lp of lt ny nz oa ob bi translated">安装<a class="ae ng" href="https://www.npmjs.com/package/tsconfig-paths" rel="noopener ugc nofollow" target="_blank">ts config-path</a>T21模块:</li></ul><pre class="kj kk kl km gt og nd oh oi aw oj bi"><span id="8f07" class="nh mc it nd b gy ok ol l om on">npm install --save-dev tsconfig-paths</span></pre><p id="8bf6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意:<strong class="la iu"> </strong>使用该模块加载位置在<code class="fe na nb nc nd b">tsconfig.json</code>的<code class="fe na nb nc nd b">paths</code>部分指定的模块。支持运行时加载和通过API加载。</p><ul class=""><li id="5e10" class="nt nu it la b lb lc le lf lh od ll oe lp of lt ny nz oa ob bi translated">然后简单的给<code class="fe na nb nc nd b">package.json</code>添加两个脚本进行开发和制作:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/3d5ebe15f7d6410a6009599044daf55e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_nN_GjGULeKh-y5ErJXbw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">package.json配置。</p></figure><p id="b572" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下命令帮助ts节点<strong class="la iu"> </strong>理解模块导入:</p><pre class="kj kk kl km gt og nd oh oi aw oj bi"><span id="01f6" class="nh mc it nd b gy ok ol l om on">ts-node -r tsconfig-paths/register src/index.ts</span></pre><p id="2a9e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面的命令帮助Node/JavaScript理解模块导入并能够运行代码:</p><pre class="kj kk kl km gt og nd oh oi aw oj bi"><span id="c6ad" class="nh mc it nd b gy ok ol l om on">node -r ts-node/register/transpile-only -r tsconfig-paths/register dist/index.js</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="36fa" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">结论</strong></h1><p id="c17e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">就是这样！你所需要做的就是用正确的配置更新你的<code class="fe na nb nc nd b">tsconfig.json</code>，包括路径，然后安装<a class="ae ng" href="https://www.npmjs.com/package/tsconfig-paths" rel="noopener ugc nofollow" target="_blank">ts config-path</a><strong class="la iu">T5】并用正确的脚本更新你的<code class="fe na nb nc nd b">package.json</code> <strong class="la iu"> </strong>文件。</strong></p></div></div>    
</body>
</html>