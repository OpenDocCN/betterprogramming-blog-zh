# 独石第一！

> 原文：<https://betterprogramming.pub/monolith-first-270613e6396e>

## 整体架构已经过时了，但在开始时，它可能就足够了

![](img/d00f4c64bbc8f9ce0cbdbe6e817983e0.png)

休伯特·纽菲尔德在 [Unsplash](https://unsplash.com/s/photos/iceberg?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

单片系统有几个缺点，但这种架构也有好的一面。使用分布式系统有几个好处，但这是有代价的。

在一个项目的最开始，当它的最终功能集和范围不确定时，它可能只是矫枉过正。

让我们讨论一下为什么从单一方法开始会有好处的一些原因。

# 1.设定错误的界限可能代价高昂

最终产品总是和我们想象的不一样。发现客户需求和期望的道路是非常坎坷的。我们的系统倾向于在早期阶段朝着没有人预料到的方向快速进化。

一些部分可以完全改变它们的职责，一些部分可以合并到其他部分。我们经常在创建软件的时候学习领域。创新产品尤其如此。

如果没有足够的领域专家，而我们想尽快得到客户的反馈，我们就不应该冒险。定义服务的边界本质上是一项非常棘手的工作。

犯一个错误是非常容易的，这个错误可能会变得代价高昂。在整体系统的情况下，调整它们相对容易和便宜。我们需要重构应用程序的一部分。

在分布式系统的情况下，我们将处理重构多个服务和修改它们的 API，这些 API 被其他人使用。如果我们在一个单一的系统中改变边界，会更便宜和容易。

# 2.最大限度地降低进入壁垒

巨石柱更容易上手。我们不需要复杂的基础设施，建立开发环境也很容易。我们可以在本地机器上运行整个应用程序并快速开始。

每个开发人员都有使用这种架构的经验，然而并不是每个人都有使用微服务的经验。

在处理单个应用程序时，设置 CI 和 CD 基础架构也远没有那么复杂。进入的障碍随着我们架构的复杂性而增长。

如果我们没有具有适当经验和技能的人，使用复杂的架构很容易适得其反。

当使用 monolith 时，有很多事情我们不必担心，比如最终的一致性，处理分布式事务，或者服务之间的通信。对于大型成熟的系统来说，这样的事情应该是一个挑战。

独石也更容易测试。我们不必担心多重依赖或模仿其他服务接口。一切都可以在本地环境中测试。

# 3.最小化项目成本

建立、开发和托管分布式系统的成本更高。在一个新项目的开始，工作软件和满足功能需求是核心驱动因素。我们总是在有限的预算下工作，应该把预算用在符合我们主要项目目标的事情上。

重要的架构决策应该尽可能推迟。如果我们不确定我们的软件应该朝哪个方向发展，我们应该选择将来最容易修改的解决方案。

随着时间的推移，Monolith 越来越难维护。但是当我们达到这一点时，我们对我们的客户和软件的需求有了更多的了解。

如果我们在一个模块化的整体中创建了适当的边界，我们就可以在必要时一片一片地分割它，并将错误做法的风险降至最低。

# 4.选择问题的解决方案

并不是每个应用程序都会服务于数百万甚至数千用户。有些人故意永远不需要这样做，因为他们从来没有被迫这样做。

分布式系统提升了可伸缩性、弹性和使用广泛技术堆栈的可能性等特性。如果这些不是我们系统的核心架构驱动因素，我们不应该高估它们的重要性。有一种现象叫“微服务羡慕”。我们只是想与酷和时尚的技术合作，即使这些技术不一定是正确的。这可能有利于自我发展，但绝对不利于项目。

如果我们的系统开始扩展，把它放在适当的负载平衡器后面就足够了。在许多情况下，水平缩放一个整体是一个很好的选择。

# 结论

选择正确的架构没有单一的补救方法。

我们已经探索了独石的一些好处，但我们也必须记住，这些远远不是完美的。用这种方法开始并不总是最好的，但是在引导一个新项目时，这绝对是一个值得考虑的选择。

# 资源

*   [构建微服务—萨姆·纽曼](https://www.amazon.com/Building-Microservices-Designing-Fine-Grained-Systems/dp/1491950358)
*   [清洁建筑——罗伯特·马丁](https://www.amazon.com/Clean-Architecture-Craftsmans-Software-Structure/dp/0134494164)
*   [独石第一——马丁·福勒](https://www.martinfowler.com/bliki/MonolithFirst.html)
*   [不要从一整块开始——斯蒂芬·蒂尔科夫](https://martinfowler.com/articles/dont-start-monolith.html)
*   [模块化独石——西蒙·布朗](https://www.youtube.com/watch?v=5OjqD-ow8GE)
*   [微服务 Envy — ThoughtWorks](https://www.thoughtworks.com/radar/techniques/microservice-envy)