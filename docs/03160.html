<html>
<head>
<title>JavaScript Best Practices — Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—变量</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-best-practices-variables-6b258da9186c?source=collection_archive---------3-----------------------#2020-01-24">https://betterprogramming.pub/javascript-best-practices-variables-6b258da9186c?source=collection_archive---------3-----------------------#2020-01-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="be95" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们看看如何以一种易读的方式声明变量</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b75caf085fb4bae36ea00bb5c8fb9f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YfXur4zxgfsu6heD"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@rayhennessy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">雷·轩尼诗</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="51de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像任何其他编程语言一样，JavaScript有自己的最佳实践列表，使程序更容易阅读和维护。JavaScript有很多棘手的部分，所以有很多东西要避免。</p><p id="631b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以遵循一些最佳实践来使我们的JavaScript代码易于阅读。</p><p id="2aa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们看看如何以一种易读的方式声明变量。此外，我们还研究了避免声明全局变量和对外部隐藏私有变量的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="91f9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">避免全局变量</h1><p id="e88b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">出于各种原因，我们应该尽可能避免使用全局变量。</p><p id="8558" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个是它们很容易在不同的地方被覆盖，因为它们在任何地方都是可用的。它们也可以覆盖<code class="fe mz na nb nc b">window</code>对象中的内容，因为全局变量是<code class="fe mz na nb nc b">window</code>对象的属性。</p><p id="5c91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两个是使我们的代码难以遵循的真实问题。因此，我们应该尽可能多地定义局部变量。我们可以通过使用<code class="fe mz na nb nc b">var</code>、<code class="fe mz na nb nc b">let</code>或<code class="fe mz na nb nc b">const</code>关键字来定义局部变量。</p><p id="b17e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe mz na nb nc b">var</code>定义的变量在定义时可用，在定义前可用。例如，如果我们写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="8e16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到第一个<code class="fe mz na nb nc b">console.log</code>的<code class="fe mz na nb nc b">undefined</code>和第二个日志的一个。</p><p id="83f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这和写作是一样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9763" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe mz na nb nc b">let</code>声明的变量只有在定义后才可用，所以如果我们给:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4a6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到错误:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="6e80" class="nj md it nc b gy nk nl l nm nn">Uncaught ReferenceError: Cannot access ‘x’ before initialization</span></pre><p id="a912" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe mz na nb nc b">const</code>关键字，我们定义了只能赋值一次且不能再赋值的常量。也是声明后才可用，不像<code class="fe mz na nb nc b">var</code>。</p><p id="5971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以写:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="8197" class="nj md it nc b gy nk nl l nm nn">const log = () =&gt; {<br/>  console.log(x);<br/>}</span><span id="521f" class="nj md it nc b gy no nl l nm nn">const x = 1;<br/>log();</span></pre><p id="d2f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mz na nb nc b">const x = 1</code>之前调用<code class="fe mz na nb nc b">log</code>也会使我们:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="4192" class="nj md it nc b gy nk nl l nm nn">Uncaught ReferenceError: Cannot access ‘x’ before initialization</span></pre><p id="dcc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们希望变量在程序的不同部分都可用，我们应该使用JavaScript模块，然后在发布代码时将模块构建到一个或几个大文件中。这是从ES6开始提供的。</p><p id="c3b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在其他模块中<code class="fe mz na nb nc b">export</code>我们的变量和<code class="fe mz na nb nc b">import</code>它。还有<code class="fe mz na nb nc b">export default</code>可以导出整个模块。这样，我们只导出应该在模块外部可用的东西，其他的都是私有的。</p><p id="a55e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以使用闭包将变量保存在函数内部，这样就不能在外部访问它们。简单闭包的一个例子是:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="63ef" class="nj md it nc b gy nk nl l nm nn">const multiply = () =&gt; {<br/>  const x = 3;<br/>  return () =&gt; x * 2;<br/>}</span></pre><p id="d46c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将<code class="fe mz na nb nc b">x</code>放在<code class="fe mz na nb nc b">multiply</code>函数中，这样它就不能被外部访问，并返回一个函数来处理它。</p><p id="7951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们把它写成:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="c89c" class="nj md it nc b gy nk nl l nm nn">console.log(multiply()());</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="610a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">总是声明局部变量</h1><p id="479a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">作为推论，我们应该总是声明局部变量。我们应该总是用<code class="fe mz na nb nc b">var</code>、<code class="fe mz na nb nc b">let</code>或<code class="fe mz na nb nc b">const</code>来声明局部变量和常量。</p><p id="17f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，它将被声明为一个全局变量，作为<code class="fe mz na nb nc b">window</code>的属性，这是我们绝对不想要的。</p><p id="5aee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们不应该写:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="986f" class="nj md it nc b gy nk nl l nm nn">x = 1;</span></pre><p id="3372" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，我们应该写:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="dca9" class="nj md it nc b gy nk nl l nm nn">let x = 1;</span></pre><p id="bc94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，JavaScript严格模式不允许未声明的变量，所以我们不能意外地创建全局变量。</p><p id="b315" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，JavaScript模块默认启用了严格模式，所以我们也不能在那里意外地定义全局变量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/717160786224a604bb6012e15319f091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XDF6_FrkR3Js4-Cw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弗朗西斯科·德·托马索在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c767" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将变量和常量声明放在最上面</h1><p id="35cd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">将变量和常量声明放在顶部使我们的代码更整洁，因为一切都在顶部。它还防止我们在定义之前意外引用用<code class="fe mz na nb nc b">let</code>或<code class="fe mz na nb nc b">const</code>声明的东西。</p><p id="aed9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果关闭了严格模式，我们也避免定义全局变量。我们也避免了意外的变量重声明。重声明应该被许多文本编辑器捕捉到，但它仍然是一种可能性。</p><p id="826b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过用逗号分隔变量名，我们可以在一行中声明多个变量。例如，我们可以写:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="3b66" class="nj md it nc b gy nk nl l nm nn">let x, y;<br/>x = 1;<br/>y = 1;<br/>console.log(x, y);</span></pre><p id="ab27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="dce7" class="nj md it nc b gy nk nl l nm nn">1 1 </span></pre><p id="e3c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<code class="fe mz na nb nc b">console.log</code>开始。</p><p id="0e27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以对循环做同样的事情:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="dae5" class="nj md it nc b gy nk nl l nm nn">let i;</span><span id="faa7" class="nj md it nc b gy no nl l nm nn">for (i = 0; i &lt; 10; i++) {<br/>  console.log(i);<br/>}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="28f4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">声明变量时初始化变量</h1><p id="a8c7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在声明变量或常量时，用值初始化它们是一个好主意。它可以防止未定义的值错误，我们可以在一行中声明变量或常量，并为其设置初始值。</p><p id="8834" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，我们用一行声明变量或常量，另一行设置它的值。</p><p id="afe8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以写:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="dd80" class="nj md it nc b gy nk nl l nm nn">let x = 1,<br/>  y = 1;</span></pre><p id="b7c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同时声明<code class="fe mz na nb nc b">x</code>和<code class="fe mz na nb nc b">y</code>。</p><p id="e752" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这比写作要短得多:</p><pre class="kj kk kl km gt nf nc ng nh aw ni bi"><span id="509c" class="nj md it nc b gy nk nl l nm nn">let x;<br/>let y;<br/>x = 1;<br/>y = 1;</span></pre><p id="00fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过用逗号分隔每个声明和赋值来声明和初始化多个变量。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b25e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="eb85" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">以下是声明和初始化变量的一些基本最佳实践。</p><p id="d614" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们研究了如何干净地声明变量，以及如何避免声明全局变量。编写干净的JavaScript程序还有很多内容，请继续关注。</p></div></div>    
</body>
</html>