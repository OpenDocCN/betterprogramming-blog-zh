<html>
<head>
<title>Ruby Has Its Own 2020 New Year’s Resolution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby有自己的2020年新年决心</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/ruby-has-its-own-2020-new-years-resolution-77b801dfaacc?source=collection_archive---------5-----------------------#2019-12-10">https://betterprogramming.pub/ruby-has-its-own-2020-new-years-resolution-77b801dfaacc?source=collection_archive---------5-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="898e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">剧透:它想快3倍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5855b73503b652c9eea3ed6f1ce00476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y80zO_QsOHnysMgaDuBqnw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@davealmine?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">达维德·扎维亚</a>在<a class="ae kv" href="https://unsplash.com/s/photos/rails-snow?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="28fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">称赞Ruby是创业公司、原型和MVP的伟大语言是我们在软件工程领域最近的历史中经常遇到的事情。Ruby on Rails是Ruby的首选框架，通常被称为<em class="ls">启动技术</em>。它是为了保证快速发布而创建的，也是同类框架中的第一个<strong class="ky ir">。许多其他玩家，如PHP和Python，在他们的框架中复制了RoR原则。</strong></p><p id="b3d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，当谈到建设大型项目时，许多人会认为RoR是一个不错的选择。缺乏灵活性、执行时间和可伸缩性是目前这项技术正在解决的一些问题。</p><p id="202a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好消息是，即将发布的新的Ruby 3.0版本将是一个巨大的游戏改变者。<strong class="ky ir"> </strong> Ruby创始人已经承诺，从2020年开始，Ruby将会快三倍！</p><p id="ba6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于Ruby如何死去的谣言这次可能会被平息。让我们直奔主题，看看这个红宝石新年决心会给我们带来什么。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="0cea" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">Ruby版本与性能相关的亮点</h1><h2 id="9607" class="ms mb iq bd mc mt mu dn mg mv mw dp mk lf mx my mm lj mz na mo ln nb nc mq nd bi translated">内存性能</h2><p id="ec81" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">Ruby内存使用的一个遗留问题是，随着对象的创建和清除，它们会使堆碎片化。这意味着我们会出现内存漏洞，因为使用的堆页比需要的多。</p><p id="c2de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个Ruby 3x3版本附带的新垃圾压缩器(GP)将处理这个问题。方法是固定一些对象，其余的可以移到堆中。另外值得注意的是，在这个版本中，将完全支持自动压缩。在Ruby 2.7中，<a class="ae kv" href="http://engineering.appfolio.com/appfolio-engineering/2019/3/22/ruby-27-and-the-compacting-garbage-collector" rel="noopener ugc nofollow" target="_blank">压缩可以手动触发</a>。</p><h2 id="9ec0" class="ms mb iq bd mc mt mu dn mg mv mw dp mk lf mx my mm lj mz na mo ln nb nc mq nd bi translated">CPU性能</h2><p id="b3e2" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">一个叫马卡罗夫的家伙，在Ruby 2.4版本中对散列进行了性能改进，现在又面临性能挑战。这一次他承担了一个叫做<a class="ae kv" href="https://github.com/vnmakarov/ruby/tree/rtl_mjit_branch#readme" rel="noopener ugc nofollow" target="_blank"> RLT MJIT </a>的大项目。</p><p id="b1c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个雄心勃勃的项目应该会带来显著的性能提升。现有的YARV指令被新的RLT指令集完全取代。新的轻量级MJIT将从RTL指令中产生C代码，然后用现有的编译器编译成本机代码。</p><p id="4f26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这种全新的寄存器传输语言(RTL)需要对Ruby的内部进行重大重写。可能需要几年时间才能让所有东西都足够稳定，可以合并到Ruby中。我们只需要等待，看看他们是否会发布新的Ruby 3.0和那些主要的改变。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="917c" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">我们如何衡量它？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/2ced8297cdc93dd8307c504431a08d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*svJ936-WrWBNWlwh"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@siora18?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Siora摄影</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="d876" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说到人类，我们大多数人都倾向于减肥和增肌。几个月后，很容易检查我们的新年决心是成功的还是又一次虚假宣传。然而，当我们需要确认一种编程语言的改进时，事情就有点不同了。我们需要比刻度尺或卷尺稍微复杂一点的工具。</p><p id="fcbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/mame/optcarrot#readme" rel="noopener ugc nofollow" target="_blank">opt胡萝卜</a> <strong class="ky ir"> </strong>就是你要找的东西。它是Ruby 3x3发布的官方基准。这个项目是一个用纯Ruby编写的任天堂模拟器。项目描述中提到的目标如下:</p><blockquote class="nk nl nm"><p id="87da" class="kw kx ls ky b kz la jr lb lc ld ju le nn lg lh li no lk ll lm np lo lp lq lr ij bi translated">“具体目标是一个NES(任天堂娱乐系统)模拟器，在Ruby 2.0中以<em class="iq"> 20 fps </em>工作。一个原始的NES以60帧/秒的速度工作。如果Ruby3x3成功了，我们就可以和Ruby一起享受一场NES游戏了！”</p></blockquote><p id="e6b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不管我们喜不喜欢任天堂游戏，我很确定我们希望看到Ruby在实际操作中加速。仔细看看<a class="ae kv" href="https://github.com/noahgibbs/rails_ruby_bench" rel="noopener ugc nofollow" target="_blank"> Rails Ruby Bench </a>项目。这是一个基于使用大型、高度并发的Rails应用程序检查Ruby性能的基准测试。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="12b5" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">还有什么？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/cadda6920de41a02ae84b6a314601a69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPlRlKxHdUlr7kEJtrUTPA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">亚历克斯·莫尔古诺夫在<a class="ae kv" href="https://sloboda-studio.com/" rel="noopener ugc nofollow" target="_blank">斯洛博达工作室</a>拍摄的图片</p></figure><p id="5c6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了性能之外，新的Ruby 3.0版本还打算提供其他一些很棒的东西。在这个新的3x3时代，许多不完美的地方应该被修复。并发性、静态分析和转换问题是目前正在解决的一些主要问题。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="a20a" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">包裹</h1><p id="fbc5" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">请记住，关于Ruby 3.0的发布日期以及它将为我们带来什么，还没有任何官方声明。谣言足够强大，让我们相信它应该在2020年1月甚至更早看到光明。我们可以等待并为最好的结果欢呼。</p><p id="bbbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我将引用Matz关于3.0 Ruby版本热门话题的一些直白的话。给你！</p><p id="bd68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">表现:</strong>“任何语言都不够快。”—马茨</p><p id="0b01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">并发:</strong>“我后悔加了线程。”—马茨</p><p id="2d37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">静态分析:</strong>“我讨厌测试。”—马茨</p></div></div>    
</body>
</html>