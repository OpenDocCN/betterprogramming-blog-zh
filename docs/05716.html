<html>
<head>
<title>How to Add Color to SVG Icons and Elements With CurrentColor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用CurrentColor给SVG图标和元素添加颜色</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-color-to-svg-icons-and-elements-with-currentcolor-6187febe702d?source=collection_archive---------5-----------------------#2020-07-30">https://betterprogramming.pub/how-to-add-color-to-svg-icons-and-elements-with-currentcolor-6187febe702d?source=collection_archive---------5-----------------------#2020-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d85a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">CSS中的currentColor是什么？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/101e701f82dc2e407f261cbefd0c9fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYfKsbZ3x7DPsCJn42Pixg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用当前颜色为图标和按钮设置主题</p></figure><p id="88db" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">使用</em><code class="fe ls lt lu lv b"><em class="lr">currentColor</em></code><em class="lr">——一个CSS模块3变量，现在可以为组件制作可重用的SVG图标和一致的颜色主题，同时保持样式表简短。但是</em> <code class="fe ls lt lu lv b"><em class="lr">currentColor</em></code> <em class="lr">到底是什么？我们如何实现颜色的一致性并使用它创建可重用的SVG图标？</em> <em class="lr">我们来了解一下。</em></p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="7e77" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">什么是<code class="fe ls lt lu lv b">currentColor</code>？</h1><p id="af35" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated"><code class="fe ls lt lu lv b">currentColor</code>是一个CSS变量，包含元素上使用的最接近的<code class="fe ls lt lu lv b">color</code>属性的<strong class="kx ir">计算值</strong>。</p><blockquote class="na nb nc"><p id="8116" class="kv kw lr kx b ky kz jr la lb lc ju ld nd lf lg lh ne lj lk ll nf ln lo lp lq ij bi translated">简而言之，<code class="fe ls lt lu lv b">currentColor</code>的值=壁橱<code class="fe ls lt lu lv b">color</code>属性的值。</p></blockquote><p id="63cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe ls lt lu lv b">currentColor</code>是不是<strong class="kx ir">不是</strong>自定义变量，其值是<strong class="kx ir">只读</strong>；因此，我们不能覆盖它或给它赋值。</p><p id="36e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，给<code class="fe ls lt lu lv b">currentColor</code>一个<code class="fe ls lt lu lv b">blue</code>值:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="23c9" class="nk me iq lv b gy nl nm l nn no">/* Invalid syntax */<br/>h1 {<br/> currentColor: blue;<br/>}<br/><br/>/* Correct syntax */<br/>h1 {<br/> color: blue;<br/>}</span></pre><p id="6d0d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以将<code class="fe ls lt lu lv b">currentColor</code>的值映射到任何可以接收颜色的属性。让我们看下面的例子:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="c191" class="nk me iq lv b gy nl nm l nn no">&lt;div class="textbox"&gt;<br/> &lt;h1&gt;My box shadow should be blue&lt;/h1&gt;<br/>&lt;/div&gt;</span></pre><p id="4148" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设我们已经将<code class="fe ls lt lu lv b">h1</code>的<code class="fe ls lt lu lv b">color</code>设置为<code class="fe ls lt lu lv b">blue</code>。我们可以将<code class="fe ls lt lu lv b">border</code>的颜色值赋给<code class="fe ls lt lu lv b">currentColor</code>，如下图所示:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="952e" class="nk me iq lv b gy nl nm l nn no">.blue-border {<br/> border: 1px solid currentColor;<br/>}</span></pre><p id="8454" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们将<code class="fe ls lt lu lv b">blue-border</code>添加到<code class="fe ls lt lu lv b">h1</code>元素时:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="76e0" class="nk me iq lv b gy nl nm l nn no">&lt;h1 class="blue-border"&gt;<br/>  My border should be blue<br/>&lt;/h1&gt;</span></pre><p id="8f3e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">结果将是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/2b724cf377defbace12a239473b9884c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/0*2yql929IohOoLoHp.png"/></div></figure><p id="823f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，边框采用与文本相同的颜色。就这么简单。</p><p id="bd58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一个问题—如果我们没有为<code class="fe ls lt lu lv b">h1</code>设置任何文本颜色，那么<code class="fe ls lt lu lv b">currentColor</code>如何选择正确的颜色呢？</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="68a3" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">使用<code class="fe ls lt lu lv b">currentColor</code>关键字的颜色继承</h1><p id="2325" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">像其他CSS变量一样，它遵循级联规则，这意味着如果元素的CSS规则集中没有<code class="fe ls lt lu lv b">color</code>属性，它将从组件的最近祖先继承<code class="fe ls lt lu lv b">color</code>属性。如果任何祖先中没有<code class="fe ls lt lu lv b">color</code>，<code class="fe ls lt lu lv b">currentColor</code>会自动接收浏览器定义的fallback值，很可能是黑色。</p><p id="5ba2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下面的DOM树结构为例:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="0bb9" class="nk me iq lv b gy nl nm l nn no">&lt;html&gt;<br/>    &lt;head&gt;&lt;!-- header code --&gt;&lt;/head&gt;<br/>    &lt;body&gt;<br/>    &lt;div class="section purple" id="section"&gt;<br/>      &lt;div class="box-wrapper green" id="box-wrapper"&gt;<br/>          &lt;div class="box-1 box blue" id="box-1"&gt;&lt;/div&gt;<br/>          &lt;div class="box-2 box" id="box-2"&gt;&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="1865" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">元素<code class="fe ls lt lu lv b">div#section</code>使用<code class="fe ls lt lu lv b">purple</code>类将颜色设置为紫色，元素<code class="fe ls lt lu lv b">div#box-wrapper</code>具有<code class="fe ls lt lu lv b">green</code>类，我们的目标元素<code class="fe ls lt lu lv b">div#box-1</code>具有用于颜色的<code class="fe ls lt lu lv b">blue</code>类。为了进行试验，我们将下面的代码添加到任何带有类<code class="fe ls lt lu lv b">box</code>的元素中(包括我们的目标元素)。</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="cb25" class="nk me iq lv b gy nl nm l nn no">background: currentColor;</span></pre><p id="8369" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面根据上面的结构描述颜色继承如何为<code class="fe ls lt lu lv b">div#box-1</code>元素和<code class="fe ls lt lu lv b">div#box-2</code>的<code class="fe ls lt lu lv b">currentColor</code>工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/bf7320160f07e85c3802f74c881a8517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WdW0p4DeNYJasUgS.gif"/></div></div></figure><p id="0e47" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更详细的解释图如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/9b9a2a52e5ae5c7a19ec120581d1ca04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/0*HTxEe9Urrx5qO09r.png"/></div></figure><p id="1595" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是并不是所有的属性都需要访问<code class="fe ls lt lu lv b">currentColor</code>。虽然有些属性可以继承<code class="fe ls lt lu lv b">color</code>的值，但其他一些属性需要帮助才能获得正确的颜色。对于这样的属性，<code class="fe ls lt lu lv b">currentColor</code>是极有帮助的。</p><p id="75b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那么哪个物业不需要<code class="fe ls lt lu lv b">currentColor</code>的帮助，哪个需要呢？</p><h2 id="f3a4" class="nk me iq bd mf ns nt dn mj nu nv dp mn le nw nx mp li ny nz mr lm oa ob mt oc bi translated">CSS中的颜色继承</h2><p id="0647" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">默认情况下，许多CSS属性都启用了颜色继承，包括:</p><ul class=""><li id="88e7" class="od oe iq kx b ky kz lb lc le of li og lm oh lq oi oj ok ol bi translated"><code class="fe ls lt lu lv b">border-color</code></li><li id="a20a" class="od oe iq kx b ky om lb on le oo li op lm oq lq oi oj ok ol bi translated"><code class="fe ls lt lu lv b">border</code></li><li id="e470" class="od oe iq kx b ky om lb on le oo li op lm oq lq oi oj ok ol bi translated">文本元素的<code class="fe ls lt lu lv b">outline</code>和<code class="fe ls lt lu lv b">outline-color</code></li><li id="2956" class="od oe iq kx b ky om lb on le oo li op lm oq lq oi oj ok ol bi translated"><code class="fe ls lt lu lv b">color</code></li><li id="c0f7" class="od oe iq kx b ky om lb on le oo li op lm oq lq oi oj ok ol bi translated"><code class="fe ls lt lu lv b">box-shadow</code></li></ul><p id="0c1d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，所有文本元素，包括图像的<code class="fe ls lt lu lv b">alt</code>文本，都将继承颜色值，除非有一个不同的颜色明确分配给它们。</p><p id="bc7e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下面的例子为例:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="7db4" class="nk me iq lv b gy nl nm l nn no">&lt;div class="list-wrapper"&gt;<br/>    &lt;ul class="list-container"&gt;<br/>        &lt;li&gt;List item 1&lt;/li&gt;<br/>        &lt;li&gt;List item 2&lt;/li&gt;<br/>        &lt;li&gt;List item 3&lt;/li&gt;<br/>  &lt;/ul&gt;<br/>&lt;/div&gt;</span></pre><p id="11f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦父<code class="fe ls lt lu lv b">div</code>的颜色改变，所有相关属性和文本元素的颜色也会改变。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/1df7f36979bc8c335679b35bb0d2cb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_GWWuMrea6Q35ens.png"/></div></div></figure><p id="9fd4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于以上场景，不需要使用<code class="fe ls lt lu lv b">currentColor</code>。否则，<code class="fe ls lt lu lv b">currentColor</code>对于支持元素之间的颜色继承是必不可少的，比如主题化和构建一致的SVG图标。</p><p id="71e1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们来看看这些用例，好吗？</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="f296" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">用SVG和currentColor构建可重用的图标组件</h1><p id="300a" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">对于图标来说，使用SVG是一种推荐的做法，因为有很多好的理由。创建可重用的SVG图标组件有很多方法。一个简单的方法是用<code class="fe ls lt lu lv b">use</code>和<code class="fe ls lt lu lv b">symbol</code>元素创建SVG sprite。</p><h2 id="15ea" class="nk me iq bd mf ns nt dn mj nu nv dp mn le nw nx mp li ny nz mr lm oa ob mt oc bi translated">用<code class="fe ls lt lu lv b">use</code>创建SVG精灵</h2><p id="cba3" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">最直接的方法是使用<code class="fe ls lt lu lv b">&lt;svg&gt;</code>元素作为精灵来创建一个图标容器。我们用<code class="fe ls lt lu lv b">&lt;symbol&gt;</code>包装每个图标，用<code class="fe ls lt lu lv b">use</code>重用它。<code class="fe ls lt lu lv b">&lt;symbol&gt;</code>是SVG的一个嵌套元素，允许我们定义一个图标，而无需在屏幕上显示。只有在引用了那个图标的时候才使用<code class="fe ls lt lu lv b">&lt;use&gt;</code>元素。例如，考虑下面的SVG图标sprite容器:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="8b4d" class="nk me iq lv b gy nl nm l nn no">&lt;body&gt;<br/>    &lt;svg style="display: none"&gt;<br/>        &lt;symbol viewBox="0 0 32 32" id="heart-icon"&gt;<br/>        &lt;/symbol&gt;<br/>    &lt;/svg&gt;<br/>&lt;/body&gt;</span></pre><p id="6573" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们给图标符号分配一个<code class="fe ls lt lu lv b">id</code>，然后通过用<code class="fe ls lt lu lv b">&lt;use&gt;</code>引用它的<code class="fe ls lt lu lv b">id</code>，在页面的任何地方重用这个心形图标，比如在一个文本按钮中:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="c4b7" class="nk me iq lv b gy nl nm l nn no">&lt;button class="favorite-btn"&gt;<br/>  &lt;svg width="24px" height="24px"&gt;<br/>    &lt;use xlink:href="#heart-icon"&gt;&lt;/use&gt;<br/>  &lt;/svg&gt;<br/>    Favorite me!<br/>&lt;/button&gt;</span></pre><p id="9322" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">和一点CSS来使按钮的内容对齐。</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="545a" class="nk me iq lv b gy nl nm l nn no">.favorite-btn {<br/>  display: flex;<br/>  align-items: center;<br/>}</span></pre><p id="e1fc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样。该按钮将如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/884b42cf8fc003baa37184d5e55ddcab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/0*tBkLw0n8YX8b_zLO.png"/></div></figure><p id="7a00" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们希望这个按钮以白色文本和紫色背景呈现呢？</p><h2 id="ffe6" class="nk me iq bd mf ns nt dn mj nu nv dp mn le nw nx mp li ny nz mr lm oa ob mt oc bi translated">添加颜色</h2><p id="6723" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">对于按钮的背景和文本颜色，我们可以根据其类别<code class="fe ls lt lu lv b">favorite-btn</code>将CSS样式添加到<code class="fe ls lt lu lv b">button</code>中，如下所示:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="e043" class="nk me iq lv b gy nl nm l nn no">.favorite-btn {<br/>    /*...*/<br/>  background: #3d1472;<br/>  color: white;<br/>}</span></pre><p id="ebb1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该按钮看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/fb11c1b0a307528907e1eaa64fd88b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/0*Mhumz0NNhZhaOdEk.png"/></div></div></figure><p id="f8a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不幸的是，图标颜色与按钮文本不同步。要改变它的颜色，我们可以使用带有适当值的<code class="fe ls lt lu lv b">fill</code>属性:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="bfaa" class="nk me iq lv b gy nl nm l nn no">.favorite-btn svg {<br/>  fill: white;<br/>}</span></pre><p id="5f8c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们得到了正确呈现的按钮:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/dafd6f2651c885646cda57a0bd1598ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/0*8RUasuCrq_Dcb2l-.png"/></div></figure><p id="4e71" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想在悬停时将按钮的文本颜色改为<code class="fe ls lt lu lv b">grey</code>并相应地匹配图标颜色，我们将需要在CSS文件中添加两个额外的规则集:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="0d04" class="nk me iq lv b gy nl nm l nn no">.favorite-btn:hover {<br/>  color: grey; // color for button text<br/>}<br/><br/>.favorite-btn:hover svg {<br/>    fill: grey; // color for icon<br/>}</span></pre><p id="b214" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这种解决方案并不是最佳的，特别是当你有更多的文本按钮和不同颜色的图标时。).它需要为每个按钮编写至少两个CSS规则集，并且为每个按钮状态编写两个额外的规则集，因此使得我们的CSS文件很长并且难以维护。</p><p id="953f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有更好的解决方案吗？使用<code class="fe ls lt lu lv b">currentColor</code>！</p><p id="2d18" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于任何<code class="fe ls lt lu lv b">svg</code>元素，只需将<code class="fe ls lt lu lv b">fill</code>的值设置为<code class="fe ls lt lu lv b">currentColor</code>:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="5570" class="nk me iq lv b gy nl nm l nn no">svg {<br/>    fill: currentColor;<br/>}</span></pre><p id="da05" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们不再需要CSS样式的<code class="fe ls lt lu lv b">favorite-btn svg</code>选择器。所以我们现在的CSS代码是:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="a4cc" class="nk me iq lv b gy nl nm l nn no">.favorite-btn {<br/>  background: #3d1472;<br/>  color: white;<br/>}<br/><br/>.favorite-btn:hover {<br/>    color: grey;<br/>}<br/><br/>svg {<br/>  fill: currentColor<br/>}</span></pre><p id="3d20" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的图标颜色将自动匹配按钮的文本颜色。此外，更改按钮的文本颜色只需要修改按钮容器的CSS样式。代码更少，CSS文件更短，错误更少。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/e7c618fa66902d13a244fe04f4b6fd5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/0*D1UYlwXaqGYKJhzT.gif"/></div></figure><p id="48fe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很简单，对吧？在这里您可以随意尝试代码演示。</p><p id="b13a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一个用例怎么样——用<code class="fe ls lt lu lv b">currentColor</code>进行主题化？</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="36cc" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">使用<code class="fe ls lt lu lv b">currentColor</code>和CSS自定义变量进行主题化</h1><p id="631b" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">我之前展示并写了一篇关于<a class="ae os" href="http://mayashavin.com/articles/dynamic-theme-css-variables" rel="noopener ugc nofollow" target="_blank">如何用CSS自定义变量</a>动态定制暗/亮模式主题的文章。那么<code class="fe ls lt lu lv b">currentColor</code>还能给主题化带来什么好处呢？</p><p id="e2e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设我们有一个用于输入范围的滑动组件，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/0c35f774f520cfd50486847d038f4d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/0*cVQfbrctjrdu4O_8.png"/></div></figure><p id="b87b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们希望根据以下主题为暗/亮模式提供一致的外观和感觉:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/1165e48197ebe20ddd0c8a7ba9405247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/0*UTS_Ha05c-fJxAv8.png"/></div></figure><p id="6fc8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在CSS自定义变量的帮助下，我们可以为应用程序定义如下原色:</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="7214" class="nk me iq lv b gy nl nm l nn no">:root {<br/>    --page-bg-dark-mode: #808080;<br/>    --page-color-dark-mode: #69bac9;<br/>  --page-color-light-mode: #0b4491;<br/>}<br/><br/>.dark-mode {<br/>  background: var(--page-bg-dark-mode);<br/>  color: var(--page-color-dark-mode);<br/>}<br/><br/>.light-mode {<br/>  color: var(--page-color-light-mode);<br/>}</span></pre><p id="34ad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于切换，我们使用<code class="fe ls lt lu lv b">currentColor</code>作为输入范围的背景来自动继承主题颜色。</p><pre class="kg kh ki kj gt ng lv nh ni aw nj bi"><span id="968a" class="nk me iq lv b gy nl nm l nn no">.input-range {<br/>  /* ... */<br/>  background-color: currentColor;<br/>  color: inherit; /* make sure input text color is consistent with the theme */<br/>}</span></pre><p id="233a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">tada，我们得到一个对主题改变有反应的组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/9b82e5358b5e2a5b28a6db1bfc57037f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/0*tDqoRV3OkwB_51vA.gif"/></div></figure><p id="316f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">太棒了。您可以<a class="ae os" href="https://codesandbox.io/s/currentcolor-demo-2r1fz?fontsize=14&amp;hidenavigation=1&amp;theme=dark" rel="noopener ugc nofollow" target="_blank">在这里试验完整的代码</a>并轻松添加更多组件，如滑块、复选框等。创造你自己的设计系统。毕竟，为什么不呢？</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="bcb8" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">摘要</h1><p id="5401" class="pw-post-body-paragraph kv kw iq kx b ky mv jr la lb mw ju ld le mx lg lh li my lk ll lm mz lo lp lq ij bi translated">大的CSS文件会导致更长的TTFB(到达第一个字节的时间)和首次绘制，损害网站的整体性能。此外，从长远来看，阅读和维护它们更加困难。有了<code class="fe ls lt lu lv b">currentColor</code>，我们终于可以在保持CSS简洁的同时，结合定制变量等其他工具来实现主题化自动化。此外，我们终于可以亲吻CSS样式表的规则，并使它们干燥(不要重复自己)。那么你还在等什么？</p><p id="5e4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有一些与<code class="fe ls lt lu lv b">currentColor</code>的新展柜？<a class="ae os" href="https://twitter.com/MayaShavin" rel="noopener ugc nofollow" target="_blank">打我一下</a>。</p></div></div>    
</body>
</html>