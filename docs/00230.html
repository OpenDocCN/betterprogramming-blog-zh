<html>
<head>
<title>How to Draw a Custom TabBar Shape in iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在iOS中绘制自定义TabBar形状</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/draw-a-custom-ios-tabbar-shape-27d298a7f4fa?source=collection_archive---------0-----------------------#2018-11-17">https://betterprogramming.pub/draw-a-custom-ios-tabbar-shape-27d298a7f4fa?source=collection_archive---------0-----------------------#2018-11-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e279" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让你的TabBar更有趣一点</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2a8f72be382d15fc41347a947ad16564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQOAhgZztlc4rOmUdUkKgQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:作者</p></figure><p id="7ad5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在阅读了一篇关于如何创建一个自定义的Android底部条形状的文章后，我问自己如何在iOS上存档相同的形状。以上是我想建立的布局图像。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="edb4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们需要创建一个自定义的<code class="fe ly lz ma mb b">IBDesignable</code> <code class="fe ly lz ma mb b">UITabBar</code>类，并覆盖draw方法。这里我们需要在视图层中插入一个子层。在创建的图层中，我们定义内部颜色、描边颜色和我们想要绘制的路径。此外，我创建了一个开关来替换已经存在的层。这样，布局也支持方向更改。</p><p id="601c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于绘制路径需要更多的代码，我将其提取到一个单独的方法中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mc"><img src="../Images/4d2a16102dea36f780008ac0de4e70c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YjK3JDWP9oKqC55nNyRWEA.png"/></div></div></figure><p id="de6e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">自定义<code class="fe ly lz ma mb b">TabBar </code>的实际绘制在<code class="fe ly lz ma mb b">createPath </code>方法中实现。在<code class="fe ly lz ma mb b"><a class="ae md" href="https://developer.apple.com/documentation/uikit/uibezierpath" rel="noopener ugc nofollow" target="_blank">UIBezierPath</a></code>的帮助下，我们从左上角到缩进的开始处画一条线。这里变得有点棘手(至少对我来说)。我通过反复试验得到了正确的<a class="ae md" href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve" rel="noopener ugc nofollow" target="_blank">贝塞尔曲线</a>和<a class="ae md" href="https://www.desmos.com/calculator/cahqdxeshd" rel="noopener ugc nofollow" target="_blank">这个漂亮的工具</a>。</p><p id="2799" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完成曲线后，我们只需要连接<code class="fe ly lz ma mb b">UIBezierPath</code>的缺角。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi me"><img src="../Images/c8f1ce13ff998a55583a68f32f0ec05a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bH4mRFB-IFTCLlhu9673OA.png"/></div></div></figure><p id="1b68" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们在界面构建器中将<code class="fe ly lz ma mb b">TabBar </code>的类设置为自定义<code class="fe ly lz ma mb b">TabBar</code>时，我们已经可以看到新布局的预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mf"><img src="../Images/d81f7cf827ae4111f1b6ab7905722707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzpiL6FgyLM2lu8cg0tIZg.png"/></div></div></figure><p id="3e9d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了向缩进添加一个按钮，我简单地在两个<code class="fe ly lz ma mb b">ViewController</code>中创建了一个大小为70 x 70的按钮。对于布局，我使用了约束，在视图中将按钮水平居中，并将其垂直中心添加到<code class="fe ly lz ma mb b">TabBar</code>的底部。为了给按钮加圆角，我使用了<code class="fe ly lz ma mb b">layer.cornerRadius</code>键路径，并将其设置为25。另外，不要忘记启用“剪裁到边界”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/27b941374e1134ce0c40d6ed34217c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*-I1gCbiIsVKjS6AIV2VKvA.png"/></div></figure><p id="144c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可能会注意到图标相对于缩进并没有真正居中。我发现没有比给<code class="fe ly lz ma mb b">UITabBarItem</code>设置<code class="fe ly lz ma mb b">titlePositionAdjustment</code>的关键路径更好的解决方案了。左边的项目移动-20，右边的项目移动20。</p><p id="754b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过执行这个项目，您将得到一个看起来与所请求的布局一模一样的UI，但是缺少一样东西:按钮的点击区域。<br/>为了避免<code class="fe ly lz ma mb b">TabBar</code>通过点击下方区域的按钮接收触摸事件，我们需要覆盖<code class="fe ly lz ma mb b">TabBar </code>的point-inside方法，并在按钮被点击时返回<code class="fe ly lz ma mb b">false</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mh"><img src="../Images/370648b36af82a51c6e0dba5214e3484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lAWhEVWuGA8XM3QYd_A4gw.png"/></div></div></figure><p id="b4ec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就是这样！</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="282d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你不喜欢贝塞尔曲线，你也可以选择圆形:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fecdc134191aad26be07a8a93d36b37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IygdfNWJvNIjxUlzCRzYJg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mi"><img src="../Images/74260ca3486054d97d4ff1318aa2ae09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LT7ej2ehFWgLOhsbIki8nw.png"/></div></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="875d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以在GitHub上找到一个例子项目:【https://github.com/Monntay/CustomTabBarShape<a class="ae md" href="https://github.com/Monntay/CustomTabBarShape" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>