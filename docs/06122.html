<html>
<head>
<title>Improve Page Load Performance With These Different Script Loading Techniques</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这些不同的脚本加载技术提高页面加载性能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/improve-page-load-performance-with-these-different-script-loading-techniques-b0d912eae7b1?source=collection_archive---------5-----------------------#2020-09-03">https://betterprogramming.pub/improve-page-load-performance-with-these-different-script-loading-techniques-b0d912eae7b1?source=collection_archive---------5-----------------------#2020-09-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6c6b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将JavaScript加载到HTML页面的不同方式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/528be264694db7a96a7a6928ad6aafc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LzBwGppiQNSO5jXHRMHjng.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将JavaScript加载到你的HTML页面中(图片由作者提供)</p></figure><p id="690c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您考虑提高页面加载性能时，您会尝试优化后端代码、数据库连接等等。但是提高页面加载速度的最简单的方法之一是对如何在HTML页面中使用<code class="fe lu lv lw lx b">script</code>标签加载JavaScript进行一些小的调整。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="404f" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">加载JavaScript的正常方式有问题</h1><p id="85f5" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">当您将JavaScript加载到HTML页面时，您在web页面的head部分添加了<code class="fe lu lv lw lx b">script</code>标记。这里有一个问题，但是为了更好地理解它，您需要理解网页是如何呈现的。</p><p id="bed1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当浏览器打开一个网页时，它开始一个标签一个标签地呈现页面，并开始构造DOM。每当解析器看到要加载图像和样式表的标签时，这些请求都会与呈现并行处理。</p><p id="32fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是当解析器遇到一个<code class="fe lu lv lw lx b">script</code>标签时，HTML呈现过程就会停止，等待所有的脚本被获取并执行。然后继续呈现HTML页面的其余部分。通过查看下面的代码和可视化效果，您可以更好地理解这个过程。</p><h2 id="92bc" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated"><strong class="ak">页面头部的脚本标签示例</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="f61d" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">当脚本标签在页面的头部时呈现流</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/6bc1ab9d69639df6f1b8b8d1122b37a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0rjk33RA63FRu2UxKcuz5Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">当脚本在页面的开头时(作者提供的照片)</p></figure><p id="a7a6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这会影响页面加载时间，因为脚本可能很大，这会影响执行它们所需的时间。并且在大多数情况下，HTML页面本身的实际内容可能很大。因此，所有这些加载和解析时间都会影响用户在等待时间方面的体验。</p><p id="7157" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，您将看到三种不同的方法，通过以更有效的方式在web页面上加载JavaScript来提高页面的加载性能。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="02df" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">1.将脚本标签放在页面底部</h1><p id="a635" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">当你把<code class="fe lu lv lw lx b">script</code>标签放在页面底部主要内容之后，会有一些性能提升。页面的内容将被加载和解析，因为不存在呈现HTML的阻塞行为，因为您将脚本放在了最后。只有当页面内容的所有呈现完成时，下载和执行才会发生。</p><h2 id="5b46" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">页面底部的脚本标签示例</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="1937" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">当脚本标签位于页面底部时呈现流程</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/c74232373dd07a0cb4f185464271f15c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3mCzu2cPapu2z5ty-VLt8w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">当脚本位于页面末尾时(作者提供照片)</p></figure><p id="081d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与将<code class="fe lu lv lw lx b">script</code>标签放在页面的head部分相比，这种技术在性能上有所提高。在这里，您还需要等待一段时间，因为在页面内容呈现出来之前，脚本的下载不会开始。这种方法解决了内容加载问题，但是仍然需要等待脚本被下载和执行。HTML解析完成，然后下载并执行脚本，最后触发<code class="fe lu lv lw lx b">document ready</code>事件。</p><p id="f91a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们仍然可以根据用户需求，通过使用其他两种技术来提高页面的性能。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="592a" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated"><strong class="ak"> 2。在脚本标签中添加异步属性</strong></h1><p id="e698" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">当解析器遇到带有<code class="fe lu lv lw lx b">async</code>属性的<code class="fe lu lv lw lx b">script</code>标签时，脚本的下载与HTML页面的解析并行进行。<strong class="la iu"> </strong>下载完成后，立即执行脚本，暂停HTML解析。一旦脚本执行完成，解析就会继续。</p><h2 id="65ad" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">具有异步属性的脚本标记示例</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="5b87" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">具有异步属性的脚本标记的呈现流</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/ebf0efae456f68e775646d0300f1894e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xL7LCCMlKvQ49U2aiMZKNg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">加载带有异步属性的脚本(作者提供照片)</p></figure><p id="fbeb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于脚本可能有不同的大小，而且<code class="fe lu lv lw lx b">async</code>会在获取脚本后立即执行，所以无法保证它们会按照编写的顺序执行。因此，如果脚本之间存在任何依赖关系，并且一个脚本需要依次执行，那么您应该避免使用这个属性。在这种情况下，您不会清楚解析何时完成，或者何时触发<code class="fe lu lv lw lx b">document ready</code>事件。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="5f7b" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">3 <strong class="ak">。在脚本标签中添加延迟属性</strong></h1><p id="91e6" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">当解析器遇到带有<code class="fe lu lv lw lx b">defer</code>属性的<code class="fe lu lv lw lx b">script</code>标签时，脚本的下载与HTML页面的解析并行发生。只有当HTML解析完成时，脚本才会执行。</p><h2 id="c525" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">具有defer属性的脚本标签示例</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="ea40" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">具有延迟属性的脚本标记的呈现流程</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/5d1c3194b7a4fb17993c614b04b3576d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wDBf-wnWv9VQwLGoqckefw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">加载具有延迟属性的脚本(作者提供照片)</p></figure><p id="ec18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们使用一个<code class="fe lu lv lw lx b">defer</code>属性时，执行的顺序是基于页面上的顺序来保存的。在触发<code class="fe lu lv lw lx b">document ready</code>事件之前，该属性在所有HTML解析完成之后执行脚本。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="5241" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">结论</h1><p id="e0e6" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">让我们总结一下你在这篇文章中学到了什么:</p><ol class=""><li id="f7b5" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated">将<code class="fe lu lv lw lx b">script</code>标签放在页面底部以停止页面呈现的阻塞行为，然后加载脚本并在HTML内容解析完成后执行。</li><li id="6415" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated">使用<code class="fe lu lv lw lx b">script</code>标记中的<code class="fe lu lv lw lx b">async</code>属性下载脚本，与HTML元素的呈现并行，并在脚本可用时立即执行。</li><li id="9045" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated">使用<code class="fe lu lv lw lx b">script</code>标记中的<code class="fe lu lv lw lx b">defer</code>属性下载脚本，与HTML元素的呈现并行，并且仅当整个HTML页面呈现完成时才执行脚本。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/5043b9157087a222b764ac18ac9160a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rmKM_J97BaWyrTMuBJIW3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">各种装载技术的区别(作者摄影)</p></figure></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="363a" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">资源</h1><ul class=""><li id="222c" class="nr ns it la b lb mx le my lh og ll oh lp oi lt oj nx ny nz bi translated">移除<a class="ae ok" href="https://developers.google.com/speed/docs/insights/BlockingJS" rel="noopener ugc nofollow" target="_blank"> Chrome DevTools文档</a>中的渲染阻塞JS</li><li id="a81c" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt oj nx ny nz bi translated"><a class="ae ok" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" rel="noopener ugc nofollow" target="_blank"> MDN webdocs </a>中的异步和延迟</li><li id="dcaa" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt oj nx ny nz bi translated"><a class="ae ok" href="https://javascript.info/script-async-defer" rel="noopener ugc nofollow" target="_blank"> JavaScript.info </a>中的异步和延迟</li></ul><p id="edee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢️reading和快乐学习！</p><h2 id="f16c" class="nc mg it bd mh nd ne dn ml nf ng dp mp lh nh ni mr ll nj nk mt lp nl nm mv nn bi translated">喜欢这篇文章吗？这里还有一些你可能会喜欢的文章</h2><div class="ol om gp gr on oo"><a href="https://javascript.plainenglish.io/3-ways-to-write-cleaner-javascript-code-using-the-character-ce034386dfbb" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">使用？性格；角色；字母</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">无效合并、可选链接和三元运算符</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://javascript.plainenglish.io/5-useful-things-you-can-do-with-template-literals-in-javascript-cae8e6df836f" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">JavaScript中使用模板文字可以做的5件有用的事情</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">javascript中模板文字的不同用法</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc ks oo"/></div></div></a></div></div></div>    
</body>
</html>