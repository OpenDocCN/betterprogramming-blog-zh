<html>
<head>
<title>Scheduling Jobs With Crontab on macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在macOS上使用Crontab调度作业</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/https-medium-com-ratik96-scheduling-jobs-with-crontab-on-macos-add5a8b26c30?source=collection_archive---------3-----------------------#2018-01-12">https://betterprogramming.pub/https-medium-com-ratik96-scheduling-jobs-with-crontab-on-macos-add5a8b26c30?source=collection_archive---------3-----------------------#2018-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7c97" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在你的电脑上运行脚本是很棒的。自动运行它们甚至更好</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/19c37592c3204d73f51f57e13f0e01c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnwXAuuAW51WPFRmxYxUOg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">$ man crontab</p></figure><p id="a621" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过创建cron作业可以在macOS(和Linux)上实现自动运行！让我们做一个例子。</p><p id="e797" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设您想运行一个名为<code class="fe lu lv lw lx b">work.sh</code>的脚本，它会为您做一些工作——不管是什么工作。你想每小时每十五分钟，每天都做这项“工作”。</p><p id="c07d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我会这样做来实现这个目标。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="a07a" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">第一步</h1><p id="798d" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">确保<code class="fe lu lv lw lx b">work.sh</code>正常工作，并且在你保存助手脚本的地方。对我来说，他们通常在<code class="fe lu lv lw lx b">~/.scripts</code>。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="a71c" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">第二步</h1><p id="26ab" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">接下来，启动终端并运行<code class="fe lu lv lw lx b">crontab -e</code>。这将为您在<code class="fe lu lv lw lx b">vim</code>打开一个文件。这个文件实质上是您可以列出cron作业的地方——每个作业占一行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/7fbb3c87df02b0545fc068a78a8ab8d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*GFuNDB1di6m6ddBabA740A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">crontab -e的结果。</p></figure><p id="0ab8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">设置cron作业需要特定的格式。</p><pre class="kj kk kl km gt nd lx ne nf aw ng bi"><span id="c643" class="nh mg it lx b gy ni nj l nk nl">* * * * * command</span><span id="3c22" class="nh mg it lx b gy nm nj l nk nl">* - minute (0-59)<br/>* - hour (0-23)<br/>* - day of the month (1-31)<br/>* - month (1-12)<br/>* - day of the week (0-6, 0 is Sunday)<br/>command - command to execute</span><span id="2bc5" class="nh mg it lx b gy nm nj l nk nl">(from left-to-right)</span></pre><p id="777e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你也可以使用像<a class="ae nn" href="https://crontab.guru/" rel="noopener ugc nofollow" target="_blank"> Crontab.guru </a>这样的网站来生成cron表达式。</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="ebd0" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">第三步</h1><p id="8926" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">一旦你进入<code class="fe lu lv lw lx b">vim</code>屏幕，点击<code class="fe lu lv lw lx b">i</code>将编辑器置于<code class="fe lu lv lw lx b">INSERT</code>模式，然后将<code class="fe lu lv lw lx b">0,15,30,45 * * * * cd ~/.scripts &amp;&amp; ./work.sh</code>放在第一行。这个表达式评估我们想要的工作。</p><p id="1636" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">抓住你了…</p><ul class=""><li id="b270" class="no np it la b lb lc le lf lh nq ll nr lp ns lt nt nu nv nw bi translated">确保<code class="fe lu lv lw lx b">work.sh</code>可执行。</li></ul></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="b212" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">第四步</h1><p id="0fbb" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">键入cron表达式后，点击<code class="fe lu lv lw lx b">esc</code>，然后键入<code class="fe lu lv lw lx b">:wq</code>保存并退出<code class="fe lu lv lw lx b">vim</code>。</p><p id="aeb3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你做了所有正确的事情，你应该看到终端告诉你它安装了一个新的<code class="fe lu lv lw lx b">crontab</code>。如果它告诉您安装失败，请仔细检查您的cron表达式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/83d16d327919528512e9ed7638f43be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_VmWHjHfZw_VnCh9JOcJw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">成功！</p></figure></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="27fe" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">第五步</h1><p id="6dcd" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">就是这样！全部完成！</p></div><div class="ab cl ly lz hx ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="im in io ip iq"><h1 id="cc6a" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">奖金</h1><ol class=""><li id="62f1" class="no np it la b lb mx le my lh nx ll ny lp nz lt oa nu nv nw bi translated">要查看您的活动cron作业，您可以使用<code class="fe lu lv lw lx b">crontab -l</code>命令。</li><li id="8d39" class="no np it la b lb oc le od lh oe ll of lp og lt oa nu nv nw bi translated">例如，如果你想使用cron作业<em class="ob">，</em>运行Python脚本，你将不得不处理一些额外的复杂性。您应该通过两个脚本来进行设置，即Python脚本和运行Python脚本的可执行shell脚本。这样，您可以保持cron表达式简短，甚至可以增加一些模块化。</li><li id="e03a" class="no np it la b lb oc le od lh oe ll of lp og lt oa nu nv nw bi translated">在上面提到的场景中，在执行Python脚本的调用中，确保您指向的是Python可执行文件在shell脚本中的位置，而不是Python别名。所以，应该是类似<code class="fe lu lv lw lx b">usr/bin/python script.py</code>的东西，而不是<code class="fe lu lv lw lx b">python script.py</code>。</li><li id="7982" class="no np it la b lb oc le od lh oe ll of lp og lt oa nu nv nw bi translated">您可以通过运行<code class="fe lu lv lw lx b">which python</code>找到您的Python可执行文件的位置。</li></ol><p id="72c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">希望这篇帖子有所帮助！祝你好运，继续黑客！</p></div></div>    
</body>
</html>