<html>
<head>
<title>Building GraphQL Server Using Schema-first Approach in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的模式优先方法构建GraphQL服务器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-graphql-server-using-schema-first-approach-in-python-68aeee38bcc3?source=collection_archive---------13-----------------------#2022-06-29">https://betterprogramming.pub/building-graphql-server-using-schema-first-approach-in-python-68aeee38bcc3?source=collection_archive---------13-----------------------#2022-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="572c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">轻松处理CRUD操作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7f62a0ef65eb88ad999072345300b350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zxtYsdi6yyFXI-Qj"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">道格拉斯·洛佩斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7384" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模式优先的方法什么也不是，但是我们首先为我们的GraphQL服务定义模式，然后我们通过匹配我们定义的模式中的定义来实现代码。</p><p id="fccb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此我们将使用<code class="fe ls lt lu lv b">Ariadne</code>库。</p><blockquote class="lw lx ly"><p id="7ece" class="kw kx lz ky b kz la jr lb lc ld ju le ma lg lh li mb lk ll lm mc lo lp lq lr ij bi translated">Ariadne是一个Python库，使用模式优先的方法实现GraphQL服务器。— <a class="ae kv" href="https://ariadnegraphql.org/" rel="noopener ugc nofollow" target="_blank">阿里阿德涅</a></p></blockquote><h1 id="3d0f" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">项目概述</h1><p id="fb72" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">我们将构建GraphQL服务器来处理书店中图书的CRUD操作。</p><p id="7d6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单地说，我们将把这本书的信息存储在我们的数据库中。为了使这个项目更简单，我没有使用任何类型的数据库，只是使用了内存存储，更侧重于GraphQL部分。</p><h2 id="66b6" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">服务器操作</h2><ul class=""><li id="4827" class="nm nn iq ky b kz mv lc mw lf no lj np ln nq lr nr ns nt nu bi translated">添加书籍</li><li id="bd2b" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">按ID获取图书</li><li id="1441" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">按流派列出书籍</li><li id="8ba0" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">列出所有的书</li><li id="f000" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">更新图书</li><li id="55b4" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">删除这本书</li></ul><h1 id="6eac" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">构建GraphQL服务器</h1><h2 id="5ff6" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">库安装</h2><p id="ec3e" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">我们高度依赖于<code class="fe ls lt lu lv b">Ariadne</code> <strong class="ky ir"> </strong>库，所以我们必须安装它。</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="7297" class="na me iq lv b gy oe of l og oh">pip install ariadne</span></pre><p id="2131" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们必须让我们的GraphQL服务器成为HTTP服务器，接收HTTP请求，执行GraphQL查询，并返回响应。</p><p id="f848" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们可以使用ASGI ( <em class="lz">异步服务器网关接口</em>)服务器，如<a class="ae kv" href="http://www.uvicorn.org/" rel="noopener ugc nofollow" target="_blank">uvicon</a>。</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="1f3f" class="na me iq lv b gy oe of l og oh">pip install uvicorn</span></pre><h1 id="65d7" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">定义我们的模式</h1><blockquote class="lw lx ly"><p id="11d5" class="kw kx lz ky b kz la jr lb lc ld ju le ma lg lh li mb lk ll lm mc lo lp lq lr ij bi translated">我邀请您按照自己的方式和要求来定义模式和实现代码。这里我们将看到我定义模式的方式。</p></blockquote><p id="3786" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我计划用一些GraphQL对象类型来保存关于我们的书<code class="fe ls lt lu lv b">store</code>中的<code class="fe ls lt lu lv b">Books</code>的一些信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="0a54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我有2个对象类型和1个枚举类型来描述一本书。</p><p id="ec39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b"><strong class="ky ir">Book</strong></code> <strong class="ky ir"> </strong>类型有如下字段:</p><ul class=""><li id="189e" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">title</code> —字符串类型，不可空</li><li id="0753" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">book_id</code> — ID类型</li><li id="8207" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">genre</code> —枚举类型</li><li id="6dc9" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">author</code>—<code class="fe ls lt lu lv b">Author</code>类型的数组，不可空</li></ul><p id="b580" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">Author</code>类型:</p><ul class=""><li id="e3fc" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated">名称—字符串类型，不可为空</li><li id="c9fb" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">邮件-字符串类型</li></ul><p id="751c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b"><strong class="ky ir">BookGenre</strong></code> <strong class="ky ir"> </strong>枚举类型:</p><ul class=""><li id="d950" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated">有两个值(<code class="fe ls lt lu lv b">FICTION</code>、<code class="fe ls lt lu lv b">NONFICTION</code>)</li></ul><p id="ff6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上类型是处理<code class="fe ls lt lu lv b">Books</code>信息的基本类型。</p><p id="f1a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们继续定义GraphQL服务的入口点。</p><h2 id="999e" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">查询类型</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="7210" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有上面的查询类型，有3个字段。</p><ul class=""><li id="09e0" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">book</code> —通过在参数中提供<code class="fe ls lt lu lv b">book_id</code>来获取图书详情</li><li id="aa4c" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">books</code> —获取可用书籍列表</li><li id="2765" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">getbooks</code> —获取所请求流派的书籍列表。<code class="fe ls lt lu lv b">getgenre</code>参数是可选的，默认值为<code class="fe ls lt lu lv b">FICTION</code>。</li></ul><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="ced3" class="na me iq lv b gy oe of l og oh">type <strong class="lv ir">GetBookResult</strong>{<br/>    <strong class="lv ir"><em class="lz">isexists</em></strong>: Boolean!<br/>    <strong class="lv ir"><em class="lz">book</em></strong>: Book<br/>}</span></pre><p id="f7c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b"><strong class="ky ir">GetBookResult</strong></code> <strong class="ky ir"> </strong>类型有2个字段:</p><ul class=""><li id="a3f0" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">isexists</code> — Boolean类型，不可空，表示给定<code class="fe ls lt lu lv b">book_id</code>的图书信息是否存在</li><li id="bcae" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">书籍<code class="fe ls lt lu lv b"> </code> —书籍类型</li></ul><h2 id="83d3" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">突变类型</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="94ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">突变类型有3个字段</p><ul class=""><li id="d6ee" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">add_book</code> —通过提供输入在我们的书店中创建图书资源，响应是请求的状态。</li><li id="01af" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">update_book</code> —更新现有图书信息，响应是该请求的状态。</li><li id="efeb" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe ls lt lu lv b">delete_book</code> —删除具有给定图书id的图书，并返回操作状态。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="8ec2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上类型用于突变类型的<code class="fe ls lt lu lv b"><strong class="ky ir">add_book</strong></code> <strong class="ky ir"> </strong>字段。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="05b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">UpdateInput</code>和<code class="fe ls lt lu lv b">PutStatus</code>类型用于<code class="fe ls lt lu lv b">Mutation</code>类型的<code class="fe ls lt lu lv b"><strong class="ky ir">update_book</strong></code> <strong class="ky ir"> </strong>字段。</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="49d8" class="na me iq lv b gy oe of l og oh">type <strong class="lv ir">DeleteStatus</strong>{<br/>    <strong class="lv ir"><em class="lz">iserror</em></strong>: Boolean!<br/>    <strong class="lv ir"><em class="lz">description</em></strong>: String<br/>}</span></pre><p id="8dce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">DeleteStatus</code>类型用于<code class="fe ls lt lu lv b">Mutation</code>类型的<code class="fe ls lt lu lv b">delete_book</code>字段。</p><p id="73a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们到达了模式定义的末尾。开始实现代码。</p><h1 id="dc34" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">GraphQL服务器实现</h1><h2 id="1557" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">内存存储</h2><p id="46ed" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">正如我前面提到的，我将使用内存中的数据存储(只是一个变量)来存储书的信息。</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="bfcd" class="na me iq lv b gy oe of l og oh"><strong class="lv ir">BOOK_STORE </strong>= [<br/>    {<br/>        "title": "Book 1", "book_id": 1, "genre": "FICTION",<br/>        "authors": [{"name": "Logesh", "mail": "logesh@domain.com"}]<br/>    },<br/>]</span></pre><p id="def1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我有一个初始模拟数据。</p><h2 id="107b" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">样板代码</h2><p id="4223" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">我们可以用两种方式加载我们的模式:</p><ul class=""><li id="6bd7" class="nm nn iq ky b kz la lc ld lf ok lj ol ln om lr nr ns nt nu bi translated">通过在变量中定义我们的模式</li><li id="7097" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">通过在单独的<code class="fe ls lt lu lv b">.graphql</code>文件中定义我们的模式</li></ul><p id="c212" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，在第一种情况下:</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="17ad" class="na me iq lv b gy oe of l og oh">from ariadne import QueryType, gql, make_executable_schema, MutationType</span><span id="867a" class="na me iq lv b gy on of l og oh">from ariadne.asgi import GraphQL</span><span id="0b02" class="na me iq lv b gy on of l og oh">type_defs = <strong class="lv ir">gql</strong>("""<br/>        type Query {<br/>            book(book_id : ID!): GetBookResult<br/>            books: [Book]<br/>        }<br/>    """)</span><span id="2e96" class="na me iq lv b gy on of l og oh">query = QueryType()<br/>mutation = MutationType()</span><span id="d7b1" class="na me iq lv b gy on of l og oh">schema = make_executable_schema(type_defs, query, mutation)<br/>app = GraphQL(schema, debug=True)</span></pre><p id="95c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于第二种情况:</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="dd26" class="na me iq lv b gy oe of l og oh">from ariadne import QueryType, make_executable_schema, MutationType, load_schema_from_path</span><span id="1028" class="na me iq lv b gy on of l og oh">from ariadne.asgi import GraphQL</span><span id="9784" class="na me iq lv b gy on of l og oh">query = QueryType()<br/>mutation = MutationType()</span><span id="fff5" class="na me iq lv b gy on of l og oh">book_type_defs = load_schema_from_path("<strong class="lv ir">book_schema.graphql</strong>")<br/>schema = make_executable_schema(book_type_defs, query, mutation)<br/>app = GraphQL(schema, debug=True)</span></pre><p id="0580" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们可以看到我已经从外部文件加载了我们的模式。</p><h2 id="c1c8" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">助手功能</h2><p id="45ec" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">我写了一些帮助函数，比如从<code class="fe ls lt lu lv b">BOOK_STORE</code>中获取图书信息:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="3253" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的函数用于从<code class="fe ls lt lu lv b">BOOK_STORE</code>变量(我们的数据库)中获取给定ID的图书</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="0b6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该函数用于检查给定ID的图书是否存在。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="343e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个简单的函数用于创建一个惟一的id，这是在创建一本新书时需要的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="40a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过提供图书ID从<code class="fe ls lt lu lv b">BOOK_STORE</code>变量中删除图书。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="24e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个函数用于获取给定流派的书籍列表。</p><h2 id="422b" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">下决心者</h2><p id="decb" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">现在我们已经准备好实现我们的GraphQL服务器解析器了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="f2f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于查询类型的<code class="fe ls lt lu lv b"><strong class="ky ir">book</strong></code> <strong class="ky ir"> </strong>字段，我们使用上面的函数来解析查询，并返回带有我们在模式中的请求响应类型中提到的键(字段)的字典。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="fa11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上解析器函数用于解析查询字段— <code class="fe ls lt lu lv b">books</code>和<code class="fe ls lt lu lv b">getbooks</code>。</p><p id="2509" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在转向突变型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="ee1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上函数用于在我们的<code class="fe ls lt lu lv b">Book</code>商店中创建一本新书。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="88a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">resolve_update_book</code> <strong class="ky ir"> </strong>功能用于更新已有的图书。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="f15e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此功能用于通过提供图书id来删除图书。</p><p id="0b4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经解决了我们的问题，转而为客户服务。</p><h1 id="6751" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">为客户服务</h1><p id="f466" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">通过使用<code class="fe ls lt lu lv b">uvicorn</code>，我们将使我们的GraphQL服务器通过HTTP提供服务。</p><p id="17f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行下面的命令来启动服务器。</p><pre class="kg kh ki kj gt oa lv ob oc aw od bi"><span id="0d86" class="na me iq lv b gy oe of l og oh">uvicorn main:app<br/># uvicorn &lt;filename&gt;:&lt;GraphQL object&gt;</span></pre><p id="cf77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行在http://127.0.0.1:8000上的Uvicorn</p><h2 id="90aa" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">查询书</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/e6f9d1c8b366c2f6c18338570cea4872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQcdBYhCcNfDDWpGV-Xj9A.png"/></div></div></figure><h2 id="e375" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">突变add_book</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/61e3057fe4aa225501c16a03cd7ccac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7gWRz41HnTY7rFL5lxdnA.png"/></div></div></figure><h2 id="f53d" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">查询书籍</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/e4e0f01d03c29823e99bd2ce1283fe58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eG53oazhWYOez49HXrvPfw.png"/></div></div></figure><h2 id="5fbf" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">突变更新_本书</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/6b1ff54378a8a8379a4424bfb862943f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MPAvH1Wbnk7l5soHoKny6A.png"/></div></div></figure><h2 id="be16" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">查询书</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/47cb59e1fe2581e2f67e49cf175cd322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dkXvYH3ken6v7uq2FUKEfw.png"/></div></div></figure><h2 id="3f2b" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">查询getbooks</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/2abeed5e5887c519931da3a4fe61a557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0w4b31qEcy68wuKMeylGg.png"/></div></div></figure><h2 id="f1cb" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">突变删除_图书</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/4fb71534132842c9b5822721f3a77d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3-n-9CM3CR9KqxCiy9alwA.png"/></div></div></figure><h2 id="92c4" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">查询书</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/389dad17f2ae8077e20caaba03ca2a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MvE6FFsChA6yrooWG9_8Cw.png"/></div></div></figure><p id="c539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还可以使用Postman作为GraphQL客户端。</p><p id="b6fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们看到了如何用Python构建我们自己的GraphQL服务器(模式优先方法)。</p><p id="671d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在我的<a class="ae kv" href="https://github.com/LogeshVel/GraphQL_basics_using_ariadne" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到这个项目。感谢阅读。</p></div></div>    
</body>
</html>