<html>
<head>
<title>Boost Your iOS Development Time by Leveraging SwiftUI Previews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用SwiftUI预览加快iOS开发时间</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/boost-your-ios-development-time-by-leveraging-swiftui-previews-c6b4e0d2d57c?source=collection_archive---------9-----------------------#2022-04-15">https://betterprogramming.pub/boost-your-ios-development-time-by-leveraging-swiftui-previews-c6b4e0d2d57c?source=collection_archive---------9-----------------------#2022-04-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a697" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用SwiftUI预览预览UIViewController</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/41e5af8df969fc5682d7750a8742ed28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zK_pb4mlymKX3zHF"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="babd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SwiftUI是游戏规则的改变者，自从它发布以来已经给我们带来了很多好处。</p><p id="71cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，关于SwiftUI是否足够稳定以用于生产代码的问题仍然存在。对此，我的回答是，是的。它比几年前发布的任何时候都更稳定。</p><p id="0d0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个问题可能是您的现有代码仅利用UIKit，并且没有迁移到SwiftUI的策略——因此您无法在项目中看到SwiftUI的优势。我的意思是，让我们从小处着手，了解SwiftUI Preview的存在以及它如何改变您编写代码的方式。</p><p id="89e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，您将了解到使用SwiftUI Preview的一个额外好处，无论您的代码风格如何。</p><h1 id="02f5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">常见问题</h1><p id="0797" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">构建和运行一个应用程序只是为了查看您所做的UI更改，这很麻烦。更糟糕的是，有时构建需要很长时间，或者有时你在模拟器上停留在一个空白屏幕上，你将不得不退出模拟器并重建一切。</p><p id="9f4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最坏的情况是:清理构建并删除派生数据，然后重新构建所有内容，这又需要30分钟。</p><p id="ff0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅仅为了看到最小的UI变化，这个过程本身就很耗时。</p><h1 id="22f0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">SwiftUI预览版解决方案</h1><p id="ef51" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">无论你是用编程的方式还是通过XIB/故事板来编写你的UI，这都会让你受益匪浅，节省你很多时间，因为你真正需要看到的只是你所做的小小的UI修改。你可以在<code class="fe ms mt mu mv b">UIView</code>或<code class="fe ms mt mu mv b">UIViewController</code>上这样做，因为几乎所有的东西都在它们下面，你基本上可以在任何东西上使用它。</p><p id="578b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SwiftUI Preview的另一个优点是，它允许您在可以触发操作的预览本身上进行交互。例如，单击一个按钮会出现一个弹出窗口或导航到不同的屏幕。</p><h1 id="f681" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">带有SwiftUI预览的UIViewController</h1><p id="3ba7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们创建一些代码来为<code class="fe ms mt mu mv b">UIViewController</code>启用SwiftUI预览。为此，请使用以下代码创建一个新文件。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="0761" class="na lw it mv b gy nb nc l nd ne">import SwiftUI</span><span id="84dc" class="na lw it mv b gy nf nc l nd ne">@available(iOS 13, *)<br/>// 1<br/>public struct ViewControllerPreview&lt;ViewController: UIViewController&gt;: UIViewControllerRepresentable {<br/>    let viewController: ViewController</span><span id="3743" class="na lw it mv b gy nf nc l nd ne">    // 2<br/>    public init(_ builder: @escaping () -&gt; ViewController) {<br/>        viewController = builder()<br/>    }<br/>    <br/>    // 3<br/>    public func makeUIViewController(context: Context) -&gt; ViewController {<br/>        viewController<br/>    }<br/>   <br/>    // 4<br/>    public func updateUIViewController(_ uiViewController: ViewController, context: Context) {}<br/>}</span></pre><ol class=""><li id="3ba3" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">苹果创建了<code class="fe ms mt mu mv b">UIViewControllerRepresentable</code>协议来管理SwiftUI界面中的UIKit <code class="fe ms mt mu mv b">ViewController</code>。</li><li id="cd8b" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">初始化<code class="fe ms mt mu mv b">ViewController</code>。</li><li id="244d" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">用它的初始状态创建<code class="fe ms mt mu mv b">ViewController</code>对象。</li><li id="b35b" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">用SwiftUI中的信息更新<code class="fe ms mt mu mv b">ViewController</code>。这是必需的，并故意留为空白，因为我们只关注创作。</li></ol><h1 id="36df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用SwiftUI预览进行预览</h1><p id="eda7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在您已经设置了上面的代码，现在您可以在您的<code class="fe ms mt mu mv b">UIViewController</code>上使用它了。</p><p id="167d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码可以放在<code class="fe ms mt mu mv b">ViewController</code>的底部。</p><p id="b9df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需将<code class="fe ms mt mu mv b">ViewController()</code>替换为您想要预览的文件的名称。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="22e5" class="na lw it mv b gy nb nc l nd ne">import SwiftUI</span><span id="ce91" class="na lw it mv b gy nf nc l nd ne">struct ViewControllerExamplePreview: PreviewProvider {<br/>    static var previews: some View {<br/>        ViewControllerPreview {<br/>            ViewController()   <br/>        }<br/>    }<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/ffe47661a7f8b62dd592835082013a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*9l6BkTUzTkqzCWilQhQaEA.png"/></div></figure><p id="6465" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将不再需要构建和运行应用程序来查看您所做的UI更改。这无疑会让你的开发时间节省很多。</p><h1 id="3239" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">预览多个设备</h1><p id="5eac" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">另一个你可能使用的用例是在无凹槽和凹槽手机上看到变化。例如，iPhone 8、iPhone SE、iPhone 8 Plus没有安全区域，而iPhone X、iPhone 11、iPhone 12有安全区域。如果约束设置不正确，UI有时看起来会有点不同。</p><p id="7566" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">预览这两种类型的iPhones，将节省您大量的时间来构建和运行一次又一次。只需一行代码，您就可以在SwiftUI Preview上轻松做到这一点。</p><p id="c7e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据你需要的iPhone类型，你可以只写它的名字(iPhone X)或者型号类型(iPad8，1)。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="1616" class="na lw it mv b gy nb nc l nd ne">import SwiftUI</span><span id="2db2" class="na lw it mv b gy nf nc l nd ne">struct ViewControllerExamplePreview: PreviewProvider {<br/>    static var previews: some View {<br/>        ViewControllerPreview {<br/>            ViewController()<br/>        }<br/>        .previewDevice("iPhone 13")<br/>        <br/>        ViewControllerPreview {<br/>            ViewController()<br/>        }<br/>        .previewDevice("iPhone 8")<br/>    }<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/6f4d4535b246e13cb003efa2d99ccea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*TmNjiEJeZhtyTohvTFEFqA.png"/></div></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="692a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，如果按钮底部约束扩展到iPhone 13的安全区域会更好。在这里，你会立刻发现什么是缺失的部分。这绝对是一个节省时间的方法。</p></div></div>    
</body>
</html>