<html>
<head>
<title>Send Custom Mac System Notifications Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python发送自定义Mac系统通知</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/custom-system-notifications-from-python-mac-5ff42e71214?source=collection_archive---------6-----------------------#2022-04-07">https://betterprogramming.pub/custom-system-notifications-from-python-mac-5ff42e71214?source=collection_archive---------6-----------------------#2022-04-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eb62" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从正在运行的脚本添加状态通知警报和语音听写</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c23d5469c0dff85a605fdfffb205d482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GlQwFAAjMr8HLHdf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e797" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在编码时，我们可能希望向用户提供进度或脚本终止的更新，这是很常见的。</p><p id="5d47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于在后台运行的程序来说尤其如此，这些程序在运行过程中可能会被遗忘。我</p><p id="7587" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们讨论了向用户提供更新的三种方法:</p><ul class=""><li id="9ef8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">弹出式系统通知/警报</li><li id="630a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">系统发出嘟嘟声或声音</li><li id="b5cd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">指定文本字符串的语音听写</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="fa9e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">苹果脚本提醒</h1><p id="5bac" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在终端中，我们能够使用<code class="fe nn no np nq b">osascript -e</code>标志执行苹果脚本命令。这允许我们生成一个与应用程序相关联的弹出窗口，并附带一条消息。我们告诉终端仿真器显示“脚本完成”的示例可以由以下内容提供:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="0bac" class="nv mr it nq b gy nw nx l ny nz">tell application "Terminal" to display alert "script done!"</span></pre><p id="0818" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将这些放在一起意味着完整的命令变成:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="a23c" class="nv mr it nq b gy nw nx l ny nz">osascript -e 'tell application "Terminal" to display alert "script done!"'</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/10c70a3a9d569966219d73dd0f006915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*MofDYrPjFGghfUMfhFuQQw.png"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="e5ee" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">播放系统声音</h1><p id="2565" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">接下来，我们可以播放系统声音，以防用户分心(或离开桌面)。可用的声音可以通过<code class="fe nn no np nq b">ls /System/Library/Sounds/</code>找到，下面列出了一些常见的声音:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="2d09" class="nv mr it nq b gy nw nx l ny nz">ls /System/Library/Sounds/</span><span id="86c9" class="nv mr it nq b gy ob nx l ny nz">Basso.aiff <br/>Frog.aiff<br/>Hero.aiff <br/>Pop.aiff<br/>Submarine.aiff<br/>Blow.aiff<br/>Funk.aiff<br/>Morse.aiff <br/>Purr.aiff <br/>Tink.aiff<br/>Bottle.aiff <br/>Glass.aiff <br/>Ping.aiff <br/>Sosumi.aiff</span></pre><p id="b4c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们选择了一个声音(如潜艇)，我们可以使用<code class="fe nn no np nq b">afplay</code>播放它:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="a53c" class="nv mr it nq b gy nw nx l ny nz">afplay /System/Library/Sounds/Submarine.aiff</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ec0f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">口述信息</h1><p id="1b84" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">苹果电脑也有一个非常简单的语音听写工具，可以从终端使用。例如，在这里，如果我们想要宣布“脚本已经成功执行”，我们可以如下使用<code class="fe nn no np nq b">say</code>命令:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="1b6c" class="nv mr it nq b gy nw nx l ny nz">say “The script has been executed successfully”</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="b554" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">用Python把它们放在一起</h1><p id="b01f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">最后，我们构建了一个简单的Python*脚本，能够在系统调用时执行上述命令。</p><p id="835c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了确保我们不中断脚本，我们要么需要使用非阻塞系统调用，要么运行苹果脚本，并在后台使用<code class="fe nn no np nq b">&amp;</code>符号说出命令。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="3fad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，为了方便起见，我们将所有的函数包装成一个带有“end”属性的Alerts类，允许在程序的最后调用中使用无括号的方法(因为这很可能是最常见的用法)</p><p id="097c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">*注意，这可以通过任何编程语言来完成，但是在撰写本文时，我最需要的是Python </em></p><h2 id="3b95" class="nv mr it bd ms of og dn mw oh oi dp na li oj ok nc lm ol om ne lq on oo ng op bi translated">使用</h2><p id="3d3f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">如何使用该类的示例可以在“usage_example”函数中看到。本质上，我们保存上面的代码，并从导入Alerts类开始</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="50dc" class="nv mr it nq b gy nw nx l ny nz">from mac_notify import Alerts</span></pre><p id="cfe7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们初始化该类，并使用所需的函数:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="aa3f" class="nv mr it nq b gy nw nx l ny nz">info = Alerts()</span><span id="eba3" class="nv mr it nq b gy ob nx l ny nz">info.notify('This is a notification')</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="16a6" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="9eda" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们探索了三种方法来通知用户程序中的检查点(如果他们使用mac的话)。接下来，我们创建了一个python脚本，可以替换到我们的脚本中。</p><p id="c82e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们的用户使用的是Linux机器，那么我们可以查看<code class="fe nn no np nq b">libnotify</code>和<code class="fe nn no np nq b">notify-send</code>来获取通知，查看<code class="fe nn no np nq b">gTTS</code>来获取语音听写。</p></div></div>    
</body>
</html>