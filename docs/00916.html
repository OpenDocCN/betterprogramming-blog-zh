<html>
<head>
<title>Working With Xcode Configuration Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Xcode配置文件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/working-with-xcode-configuration-files-398cfbe02b64?source=collection_archive---------1-----------------------#2019-07-28">https://betterprogramming.pub/working-with-xcode-configuration-files-398cfbe02b64?source=collection_archive---------1-----------------------#2019-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9486" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">out with # if DEBUG in and in with xc config</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/40350d76f8513dcf41f68ec48ab33a1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RZzMRaaL7Lv1-aiRG71cxg.jpeg"/></div></div></figure><h1 id="41b1" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated"><strong class="ak">老好人</strong> <code class="fe lm ln lo lp b"><strong class="ak">#if DEBUG</strong></code> <strong class="ak">花样</strong></h1><p id="3e3d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们都知道这种模式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/13aa31afad8a7fd4aa438134fce93e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*6ZlqXXrCCC_81-BJ0lgBJg.png"/></div></figure><p id="7dd1" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">实际上，这很简单，效果也很好。但是它确实有缺陷——它不安全，因为它在你的存储库中包含了密码和密钥等秘密数据。当你需要区分不同的环境时，这就有点混乱了。此外，它不支持其他类型的值，如应用程序名称或图标。</p><p id="10c4" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">幸运的是，我们有一个称为XCConfig的文件类型形式的优雅解决方案。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="560a" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">xc config是什么？</strong></h1><p id="d8c1" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">尽管名不副实，XCConfig (Xcode配置文件)只是一个包含键和值对的文本文件。当将配置文件附加到生成配置时，它可以重写或修改生成中的某些变量，甚至可以添加新的变量。因此，这为在不同环境中配置应用程序提供了灵活性。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="2e05" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">方案和配置</strong></h1><p id="1a89" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在我们深入XCConfig之前，让我们澄清一下什么是方案和配置，以及它们如何与配置文件相关联。</p><p id="03c9" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">默认情况下，为项目的每个目标创建方案，其中目标可以是可执行的，也可以是框架。</p><p id="c343" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">对于每个方案，您可以定义运行、存档或测试的配置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/3b9dd05a857c5699e61044caf6bc1fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Ho6ZsvasYEL3XENcLzwLw.png"/></div></div></figure><h2 id="2cd2" class="nf kv it bd kw ng nh dn la ni nj dp le lz nk nl lg md nm nn li mh no np lk nq bi translated">那么什么是配置呢？</h2><p id="253f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">配置是附加到方案和操作的一组值。例如，您可以为不同的端点服务器定义不同的配置，并配置您的应用程序，使您的生产方案将您的项目归档到生产服务器，但测试将与开发服务器一起工作(这当然只是一个示例)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/715a511029ecc0fa4d75b013b59f478e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2HOpyiBCBzYT9AAS6I4G5A.png"/></div></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="f3da" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">创建XCConfig文件并将其附加到配置中</strong></h1><p id="f88a" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在添加配置文件之前，我们需要为您的项目正确定义配置。通常，最佳实践是为开发过程中的每个阶段创建一个配置。例如-&gt;开发、试运行、测试和生产。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/f35741a3bb011e1029f30bb2fc20c42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DhrATv145HuVudyYuoTJgg.png"/></div></div></figure><p id="2276" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">要创建一个新的配置，转到您的项目(不是您的主目标),在<code class="fe lm ln lo lp b">Info</code>选项卡中，您会看到<code class="fe lm ln lo lp b">Configurations</code>部分。默认情况下，您有<code class="fe lm ln lo lp b">Debug</code>和<code class="fe lm ln lo lp b">Release</code>配置，但是您可以编辑/删除/重命名它并创建您自己的配置。</p><p id="b82b" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">现在您需要添加XCConfig文件。添加新的配置文件非常容易。只需添加一个新文件，然后选择<code class="fe lm ln lo lp b">Configuration Settings File</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/c98a0e394935fcb8c64411d277fba3b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBLIx9xqv2MLxwO0xSWnYw.png"/></div></div></figure><p id="167f" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">回到<code class="fe lm ln lo lp b">Configurations</code>部分——现在您可以为您定义的每个配置，甚至每个目标附加一个配置文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/336c3561156434661ec128aa28e8af10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dntxBVO820dbyGc267pV5Q.png"/></div></div></figure><p id="b4d9" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="nv">注意:如果您使用Cocoapods，您必须删除您的工作区和您的Podfile.lock文件，并再次运行Poddfile install。</em></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="6912" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">向XCConfig文件添加值</strong></h1><p id="2ebf" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">正如我之前提到的，使用XCConfig文件非常容易。XCConfig文件只是一个包含键值行的文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/a74cfdfe9a118817c20faf41fefe5d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4_i4YUq_VxMSMbdNPpD34A.png"/></div></div></figure><p id="993f" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">关于它的几点说明:</p><ul class=""><li id="2dbe" class="nx ny it ls b lt mn lw mo lz nz md oa mh ob ml oc od oe of bi translated">Xcode将“//”视为注释，即使它是URL的一部分，因此请考虑这一点。您可以通过用另一个符号代替“//”来解决这个问题，然后在代码中替换它。</li><li id="f9db" class="nx ny it ls b lt og lw oh lz oi md oj mh ok ml oc od oe of bi translated">配置文件中的每个值后来都被转换成一个字符串，所以不需要用引号括起来。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="7fd8" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">继承</strong></h1><p id="9f21" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">有时你想让不同的文件有一个缺省值，从一个基本文件(就像类一样)继承它们是一个解决方案。</p><p id="e987" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">好吧，你可以用#include到其他XCConfig文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/47e0d78e1fbdd282bbe5d11cf00a1c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEdiLNgG2_uCX4wlRYwpig.png"/></div></div></figure><p id="93a6" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">例如，您可以为您的应用程序定义一个名称，除非另行定义，否则该名称将在您的所有配置中使用。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="1334" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">从代码</strong>中访问数值</h1><p id="631d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">但是我们如何使用我们在配置文件中设置的值呢？最好的方法是设置<code class="fe lm ln lo lp b">info.plist</code>中的值。从那里到代码的路径非常短。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/8790d3a135b2208200062d5581cbffa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XHhhLGvst2TD0HbHeOIrFw.png"/></div></div></figure><p id="97d1" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">变量格式为<code class="fe lm ln lo lp b">$(&lt;Variable name&gt;)</code>。</p><p id="dcb2" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">如果您想从代码中读取它，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/525b61e93b2930483491e5089c679e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P1gIwW2iIRv1Lb6DMDpWxw.png"/></div></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="d03b" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">提高安全性的机会</strong></h1><p id="634f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">再看看你的<code class="fe lm ln lo lp b">info.plist</code>。看看你的代码。你有没有看到什么秘密的钥匙在四处飘荡？</p><p id="d8c5" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">这是因为这些值位于一个专用文件中，您可以将其放在一个不同的、私有的、更安全的存储库中。</p><p id="033f" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">使用构建配置不仅方便，而且有机会使您的代码更加安全。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="dc66" class="ku kv it bd kw kx mz kz la lb na ld le jz nb ka lg kc nc kd li kf nd kg lk ll bi translated"><strong class="ak">总结</strong></h1><p id="7d31" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">不再需要手动更改环境值，不再需要#if调试，也不再需要在代码中传递密钥。XCConfig是解决任何配置问题的一种非常容易和简单的方法。</p></div></div>    
</body>
</html>