<html>
<head>
<title>React Global Component With Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用钩子反应全局组件</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/react-global-component-with-hooks-d1471488cf73?source=collection_archive---------7-----------------------#2019-10-29">https://betterprogramming.pub/react-global-component-with-hooks-d1471488cf73?source=collection_archive---------7-----------------------#2019-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3598" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您需要创建一个全局组件，useContext是正确的选择</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0eed4f04edb656e7c15cbcd15bcf58f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4KtJyfl_lAHZP5holFcO9g.png"/></div></div></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="a89b" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">什么时候应该使用useContext？</h1><p id="65d0" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated"><code class="fe mp mq mr ms b">Context</code>或<code class="fe mp mq mr ms b">useContext</code>主要用于某些数据需要被不同嵌套层次的<em class="mt">多个</em>组件访问时。例如，如果你想管理一个在你的层次结构中使用的状态，而不需要显式地传递prop，<code class="fe mp mq mr ms b">useContext</code>将会很棒。</p><p id="d3db" class="pw-post-body-paragraph lt lu it lv b lw mu ju ly lz mv jx mb mc mw me mf mg mx mi mj mk my mm mn mo im bi translated">例如，您的在线或离线状态的状态管理器；许多组件需要访问这些信息来显示后备UI或管理集中式通知或消息系统。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="3041" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">如何使用useContext？</h1><p id="cb0a" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">你必须使用两种不同的钩子。第一个是<code class="fe mp mq mr ms b">createContext</code>在变量内部构建上下文，在我们的例子中是<code class="fe mp mq mr ms b">AppStateContext</code>。</p><p id="7f77" class="pw-post-body-paragraph lt lu it lv b lw mu ju ly lz mv jx mb mc mw me mf mg mx mi mj mk my mm mn mo im bi translated">之后，您将能够使用与内部功能相关的功能和状态来声明您的<code class="fe mp mq mr ms b">AppStateProvider</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="90bb" class="pw-post-body-paragraph lt lu it lv b lw mu ju ly lz mv jx mb mc mw me mf mg mx mi mj mk my mm mn mo im bi translated">在渲染中，您将包装<code class="fe mp mq mr ms b">AppStateContext.Provider</code>，将在<code class="fe mp mq mr ms b">AppStateProvider</code>中创建的变量传递给它。</p></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="d42f" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">如何将上下文添加到应用程序中？</h1><p id="44dd" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">你只需要将组件包装在<code class="fe mp mq mr ms b">AppStateProvider</code>中，就可以在<code class="fe mp mq mr ms b">AppStateProvider</code>的所有子节点上使用<code class="fe mp mq mr ms b">Context</code>。</p><p id="57d4" class="pw-post-body-paragraph lt lu it lv b lw mu ju ly lz mv jx mb mc mw me mf mg mx mi mj mk my mm mn mo im bi translated">这与<a class="ae nb" href="https://www.apollographql.com/docs/react/api/react-apollo/" rel="noopener ugc nofollow" target="_blank"> Apollo </a>客户端提供者的行为相同，你可以在<a class="ae nb" href="https://medium.com/better-programming/use-graphql-query-hooks-with-react-d440c6dcb57d" rel="noopener">这篇文章</a>中尝试一下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="9e18" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">如何访问上下文？</h1><p id="435d" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">在所有需要使用<code class="fe mp mq mr ms b">Context</code>的组件内部，您必须使用另一个最重要的钩子<code class="fe mp mq mr ms b">useContext</code>！将它传递给<code class="fe mp mq mr ms b">AppStateContext</code>。</p><p id="b564" class="pw-post-body-paragraph lt lu it lv b lw mu ju ly lz mv jx mb mc mw me mf mg mx mi mj mk my mm mn mo im bi translated">之后，您将能够访问传递给上下文的值。在这种情况下，我们有函数<code class="fe mp mq mr ms b">SetMessage</code>和<code class="fe mp mq mr ms b">SetError</code>来集中管理我们应用程序的所有通知。</p><p id="ef54" class="pw-post-body-paragraph lt lu it lv b lw mu ju ly lz mv jx mb mc mw me mf mg mx mi mj mk my mm mn mo im bi translated">您也可以从<code class="fe mp mq mr ms b">Context</code>中仅导入您需要的值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h1 id="0f08" class="lb lc it bd ld le lf lg lh li lj lk ll jz lm ka ln kc lo kd lp kf lq kg lr ls bi translated">完成本教程的CodeSandbox</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc na l"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><a class="ae nb" href="https://codesandbox.io/s/react-simple-usecontext-s4mdf" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/react-simple-usecontext-s4mdf</a></p></figure></div><div class="ab cl ku kv hx kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="im in io ip iq"><h2 id="6f58" class="nh lc it bd ld ni nj dn lh nk nl dp ll mc nm nn ln mg no np lp mk nq nr lr ns bi translated">如果你想了解更多关于钩子的知识</h2><p id="f4ff" class="pw-post-body-paragraph lt lu it lv b lw lx ju ly lz ma jx mb mc md me mf mg mh mi mj mk ml mm mn mo im bi translated">当我开始使用钩子时，我亲自阅读了《学会反应钩子》<strong class="lv iu"/>,它帮助我理解了它们如何使用工具，如<strong class="lv iu">使用上下文</strong>:<a class="ae nb" href="https://amzn.to/2Y8hoX9" rel="noopener ugc nofollow" target="_blank">https://amzn.to/2Y8hoX9</a></p><h1 id="df39" class="lb lc it bd ld le nt lg lh li nu lk ll jz nv ka ln kc nw kd lp kf nx kg lr ls bi translated">参考资料和资源</h1><ul class=""><li id="df30" class="ny nz it lv b lw lx lz ma mc oa mg ob mk oc mo od oe of og bi translated"><a class="ae nb" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/context.html</a></li><li id="5a17" class="ny nz it lv b lw oh lz oi mc oj mg ok mk ol mo od oe of og bi translated"><a class="ae nb" href="https://codesandbox.io/s/react-simple-usecontext-s4mdf" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/react-simple-usecontext-s4mdf</a></li><li id="b949" class="ny nz it lv b lw oh lz oi mc oj mg ok mk ol mo od oe of og bi translated"><a class="ae nb" href="https://amzn.to/2Y8hoX9" rel="noopener ugc nofollow" target="_blank">https://amzn.to/2Y8hoX9</a></li></ul></div></div>    
</body>
</html>