<html>
<head>
<title>5 Pitfalls To Avoid as a DevOps Engineer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为DevOps工程师要避免的5个陷阱</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-pitfalls-to-avoid-as-a-devops-engineer-db62243daef7?source=collection_archive---------9-----------------------#2021-06-30">https://betterprogramming.pub/5-pitfalls-to-avoid-as-a-devops-engineer-db62243daef7?source=collection_archive---------9-----------------------#2021-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e271" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在这些错误阻碍你的成长之前，避免它们</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3a1565094f21548570943d5283dc63aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mb2ajXL7Zc4CA9Ne"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">瓦列里·费多托夫在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="887a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">DevOps实践的实现为组织带来了许多好处，例如向客户快速交付软件的能力和更好的协作。</p><p id="c885" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有一个组织是相同的；因此，要成功实施DevOps实践，没有一个标准的蓝图可以遵循。</p><p id="b557" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑到这一点，工程师在引入DevOps流程和工具时会面临许多挑战。我想和你分享五个最常见的错误以及如何避免它们。</p><h1 id="be6e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.过于复杂的自动化</h1><h2 id="0114" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">问题</strong></h2><p id="22eb" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">正如我们所知，自动化对于创建一个可靠、快速、高效的软件交付过程是不可或缺的。</p><p id="016e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">经常被忽视的东西？</p><p id="e627" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">保持简单。</p><p id="19f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果你不看几页文档就不能理解软件交付管道正在做什么任务，那么很有可能它已经被过度工程化了。</p><p id="cf54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着工程师可以利用的工具和服务套件不断变化，构建、基础架构、配置和部署自动化通常很容易变得复杂。</p><h2 id="7110" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">解决方案</strong></h2><p id="99a7" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">设计可靠且可扩展的解决方案需要大量的创造力和创新。但是，设计简单的解决方案需要纪律。</p><p id="264a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一切都始于理解你想要达到的目标。</p><p id="3bd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我打算将新技术集成到软件交付管道或基础设施中时，我通常会问自己以下问题:</p><ul class=""><li id="c0ee" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">我计划使用的工具/服务能为公司提供价值吗？</li><li id="26ba" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">这个工具/服务在解决什么问题？</li><li id="0310" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">我可以用我们已经在使用的工具/服务来解决这个问题吗？</li></ul><p id="d109" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在全身心投入一项新技术之前，做好研究是至关重要的。可能会有公司使用你公司没有的技术；重要的是，你的决定不能被最新的DevOps趋势所左右。</p><p id="0ddc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，Kubernetes引起了巨大的反响。</p><p id="4c8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Kubernetes是一个出色的编排系统，用于在一个主机集群上管理和部署容器化的应用程序。如果我在两个AWS EC2服务器上托管一个网站，这两个服务器位于一个负载均衡器之后，我是否应该切换到Kubernetes以确保高可用性？我认为，在不增加基础设施复杂性的情况下，还有更好的选择。</p><p id="8234" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的管道中，您有多少构建脚本？您使用多少配置管理工具？您有几个部署阶段？降低复杂性，简化解决方案。</p><h1 id="0bb5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.安全性是事后才想到的</h1><h2 id="9915" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">问题</strong></h2><p id="57fc" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">许多传统的软件开发生命周期都将安全测试作为发布到生产环境之前的最后一步，通常由专门的安全QA团队执行。</p><p id="0e2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能是敏捷和DevOps世界中不必要的瓶颈的原因，因为目标是缩短软件发布的周期。因此，在每个周期结束时等待安全性测试并不理想。</p><p id="36ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，如果在开发新功能的早期没有优先考虑安全测试，则可能会错过特定的测试用例，这可能会导致在生产中发现安全问题。不好！</p><h2 id="8da0" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">解决方案</strong></h2><p id="73ed" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">明智的做法是在软件开发生命周期的早期优先进行安全测试，以避免软件开发和交付管道的停滞。</p><p id="0bdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能听说过DevSecOps这个术语。</p><p id="4b37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">DevSecOps的核心价值是将安全性和符合性测试引入到软件开发生命周期的每个阶段，而不是在最后阶段执行。这导致了“左移”安全性的实践，从开发生命周期的开始，一直到发布到生产，都有适当的措施。</p><p id="bfe1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是如何实现的？</p><p id="4f1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名工程师，重点将是自动化尽可能多的安全性和合规性需求，并确保在新代码的开发过程中持续执行测试(即持续集成管道)。</p><p id="2157" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，这种自动化并不能解决所有的问题，只能让一个组织到此为止。组织必须投入时间和资源来确保开发和运营团队遵循必要的安全协议。</p><p id="a6d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们不再交付“更快的软件”，而是交付“更快、更安全的软件”</p><h1 id="bfdf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.基础设施中的单点故障</h1><h2 id="9fc4" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">问题</strong></h2><p id="7a27" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">您的云提供商的一个可用性区域/数据中心完全中断。电缆断了，着火了，不管是什么，它倒了。</p><p id="e62a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我相信您的公司不会有问题，因为您不会将整个生产环境放在一个区域中。</p><p id="ecba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哦，真的吗？是时候在别处尝试重新创建您的生产环境了！</p><p id="c05d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是设计基础设施时面临的最大挑战之一，您不希望您的服务因某个组件的故障而中断。如果您的服务没有任何冗余，那么您就有了单点故障。</p><h2 id="b8be" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">解决方案</strong></h2><p id="560c" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">您的基础架构堆栈的每一层都必须为出现问题时的冗余做好准备。还需要有一个故障检测系统来识别组件何时不再可用，以便调用冗余操作。这就是所谓的高可用性。</p><p id="e527" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们以web服务器为例。</p><p id="af05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有两台完全相同的web服务器，为我的应用程序提供完全相同的版本。他们坐在一个负载均衡器后面，这个负载均衡器将流量平均地路由到我的web服务器。我的一个网络服务器坏了。负载平衡器识别出服务器处于离线状态，并将所有流量定向到在线的web服务器。服务没有中断。</p><p id="5a3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的基础架构具有高可用性，因为:</p><ul class=""><li id="b21d" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">我准备了一个冗余组件，以防出现问题(两台web服务器)</li><li id="bdd0" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">我的负载平衡器具有故障检测功能，因为它可以识别web服务器何时离线</li></ul><p id="d5dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我可能应该更进一步，将我的web服务器放在单独的数据中心，以避免我上面极端(但现实)的问题场景。实现高可用性是使您的基础设施可靠并确保问题不会导致服务中断的重要部分。</p><h1 id="0870" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.缺少公制度量</h1><h2 id="a051" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">问题</strong></h2><p id="1fcf" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">DevOps实现中最常被忽视的方面是选择度量标准来有效地度量变更的成功。如果没有合适的指标，您可能会:</p><ul class=""><li id="b12b" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">难以向组织内的利益相关者提供开发运维进展的证据</li><li id="7f80" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">软件开发生命周期中未被发现的瓶颈</li><li id="49bc" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">较差变革的实施</li></ul><h2 id="a9ef" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">解决方案</strong></h2><p id="7c46" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">有许多度量标准可以用来衡量软件开发生命周期的性能。</p><p id="71da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是我认为非常有用的四个衡量标准:</p><p id="a4ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">平均恢复时间</strong>——生产中的应用程序从故障中恢复所需的时间。<br/> <strong class="ky ir">变更交付周期</strong>——一个特性被构建、测试并部署到生产中所花费的端到端时间。<br/> <strong class="ky ir">部署速度</strong>——一个应用程序部署到一个环境所需要的时间。<br/> <strong class="ky ir">部署频率</strong>——您多久向测试、试运行、预生产和生产环境部署一次新的候选版本</p><p id="f32e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您决定要使用什么指标时，您需要收集每个指标的数据，这样您就可以了解您是如何衡量它的。有了这些数据，你就可以设定你想要改进的高级目标。不断回顾你目前的状况，并设定新的目标。持续改进是关键。</p><p id="8cc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在组织中的团队之间共享目标、指标和进展是很重要的，因为这将鼓励每个人更好地合作，共同努力改进。</p><h1 id="538a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.在持续集成中忽略QA</h1><h2 id="e033" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">问题</strong></h2><p id="e428" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">QAs通常得不到充分测试软件所需的时间。随着时间的推移，这最终会导致产品质量的下降。</p><p id="5e34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在开发生命周期的早期阶段，忽视QA的重要性有时是由于过于关注自动化部署、配置和基础设施。</p><p id="fd8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在早期阶段排除QA的更常见的原因是公司觉得它减慢了他们的开发反馈循环(CI)。这个决定可能代价高昂。</p><p id="6cfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在开发生命周期的后期(或者更糟，在产品中)发现新特性的缺陷和问题比缓慢的反馈循环更难处理，对吗？</p><h2 id="1aa3" class="mk lt iq bd lu ml mm dn ly mn mo dp mc lf mp mq me lj mr ms mg ln mt mu mi mv bi translated"><strong class="ak">解决方案</strong></h2><p id="9c97" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">尽管自动化所有的测试需求极具挑战性，但努力实现自动化的QA框架并确保大多数自动化测试在持续集成管道的每一次运行中都被触发是至关重要的。</p><p id="79ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无论是单元测试、代码分析还是回归测试，都应该在反馈循环中运行。如果一个测试失败了，开发人员必须确保一个适当的修正已经到位，并且在他们的特性进展到生命周期的下一个阶段之前，一个成功的测试已经运行。</p><p id="ea71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这有一个例外。</p><p id="4468" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您确实有更长的、运行时间更长的测试，需要花费大量的时间来完成，请将它们从持续集成反馈周期中去掉，因为您不想让开发停止。对于这些测试用例，更好的做法是稍后针对一个发布候选来运行它们。</p><p id="6cab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在充分的早期测试和导致开发瓶颈之间找到正确的平衡是关键。</p></div></div>    
</body>
</html>