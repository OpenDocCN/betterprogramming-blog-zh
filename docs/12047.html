<html>
<head>
<title>Designing a Backup and Disaster Recovery Plan</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计备份和灾难恢复计划</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/designing-a-backup-and-disaster-recovery-plan-3fb045a47c62?source=collection_archive---------2-----------------------#2022-05-08">https://betterprogramming.pub/designing-a-backup-and-disaster-recovery-plan-3fb045a47c62?source=collection_archive---------2-----------------------#2022-05-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8d8b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">全面的灾难恢复指南需要时间、规划和自动化</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bbe85512d096c2c84b9586ba51148074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BCwJ0xRAGu2WgSJ3"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">经<a class="ae kv" href="http://kcgreendotcom.com/index.html" rel="noopener ugc nofollow" target="_blank">许可<em class="kw"> KC绿色</em>T3】</a></p></figure><p id="196d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">深入探讨备份和灾难恢复规划，作为对:<a class="ae kv" href="https://medium.com/@elliotgraebert/devops-the-many-facets-of-infrastructure-5664e433934e" rel="noopener"> <strong class="kz ir">基础设施的诸多方面</strong> </a>的后续文章</p><p id="0edb" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">全面的备份计划比每夜备份要复杂得多。有许多不同的场景需要考虑，对于您组织的当前状态来说，涵盖所有这些场景是不现实的。一个好的备份和灾难恢复计划的关键部分是清楚地了解您要覆盖的内容、您的风险是什么，并确保所有决策者对这些风险感到放心。</p><p id="1ba5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">就本文而言，我是从一个主要云提供商的应用程序负责人的角度来写的，使用AWS作为具体的例子。如果您正在为本地系统设计灾难恢复程序，则需要考虑不同的复杂性。</p><p id="cc14" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">首先，我们将围绕3种不同类型的灾难场景进行规划:</p><ul class=""><li id="b915" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">硬件/网络灾难冗余</strong> →根据故障的范围和持续时间，您的基础设施恢复计划是什么？这涵盖了从简单的硬件故障到生态灾难的一切。</li><li id="70aa" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">从应用程序引发的灾难中恢复</strong> →如果应用程序本身导致删除(软件错误、配置错误或用户错误)，您如何从中恢复？</li><li id="3e5c" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">针对内部威胁的可恢复性</strong> →您的最高级别管理员能够超越所有安全控制吗？还是每个人都被一个技术控束缚？</li></ul><p id="b5b3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，我们将了解反映健康备份的一些品质:</p><ul class=""><li id="ff01" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">完整性</strong> →您如何知道您的备份是否完好无损、没有损坏和不可变？</li><li id="3066" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">可用性</strong> →如果您真的尝试从备份中恢复，会成功吗？</li><li id="9586" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">安全性</strong> →您的备份是如何加密的，谁可以访问它们？</li><li id="dd69" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">如果你不知道如何使用备份，备份还有什么意义？</li></ul><p id="0ddf" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，我们将查看一些通常被忽略的非技术主题:</p><ul class=""><li id="8e75" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">人员冗余</strong> —当然，您的基础架构托管在两个区域，但是您的团队呢？</li><li id="f9ea" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">跨系统依赖性和复合SLA</strong>—为了恢复您的服务，哪些服务需要在线，发生事件导致两者都中断的可能性有多大？</li></ul><p id="6e86" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最后，我们将讨论一下<strong class="kz ir">日常灾难恢复测试。</strong>忽略这是多个合规计划所要求的事实，这是每个团队都应该遵循的健康习惯。</p><p id="8917" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果我不包括一些<a class="ae kv" href="https://docs.google.com/document/d/1pKkFrJuIY1q-4Wd1fEFsQEigGHpCxUIWFnUC4aP7Rt0/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">模板</a>或<a class="ae kv" href="https://docs.google.com/spreadsheets/d/1GD8QfshimtdsIsl2h1VV6yrBRcUaZIz8OGGdSjNKi9M/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank"> excel电子表格</a>也不会是我，对吗？</p><div class="mh mi gp gr mj mk"><a href="https://docs.google.com/spreadsheets/d/1GD8QfshimtdsIsl2h1VV6yrBRcUaZIz8OGGdSjNKi9M/edit?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd ir gy z fp mp fr fs mq fu fw ip bi translated">(模板)灾难恢复电子表格</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">介绍介绍本练习的目标是通过检查我们的所有服务来降低业务风险…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">docs.google.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my kp mk"/></div></div></a></div><h2 id="227a" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">我应该如何阅读/使用这份文件？</h2><p id="a7f3" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated"><strong class="kz ir">阅读、评估、改进、重复</strong></p><p id="a672" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这篇文章涵盖了应急计划的许多方面，并且<strong class="kz ir">你并不是要把每个刻度盘调到最大</strong>。应急计划围绕风险规避、风险缓解和风险接受。我的建议是你阅读这些材料，评估你的团队在哪里，并提出渐进的改进。如果成功了，那么重新阅读，重新评估，并逐步提高。</p><p id="f833" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果你读了这篇文章，并试图建议对极其罕见的错误情况进行大规模、昂贵的修改，你将会遇到干草叉。相反，如果你略读这一点，并认为我建议每个人都应该建立一个多云、多区域主动-主动复制策略，将冷备份运送到<a class="ae kv" href="https://www.ironmountain.com/" rel="noopener ugc nofollow" target="_blank"> Iron Mountain </a>，那么你就错过了要点:<strong class="kz ir">识别和接受风险是健康生态系统的一部分</strong>。</p><blockquote class="nx ny nz"><p id="d8fb" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated">为了创建一致的叙述，假设您的工作是为AWS RDS数据库建立一个灾难恢复计划。数据库对您的业务至关重要，但它的规模和复杂性并不过分庞大。您的公司并不过度担心这个用例的成本。</p></blockquote><h1 id="f827" class="oe na iq bd nb of og oh ne oi oj ok nh jw ol jx nk jz om ka nn kc on kd nq oo bi translated">要考虑的灾难场景</h1><h2 id="cd41" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">硬件/网络灾难冗余</h2><p id="b691" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">一些DevOps新手可能会认为环境灾难只是指世界末日事件。然而，由于糟糕的代码更改或意外的负载，云提供商遇到了<a class="ae kv" href="https://www.infoq.com/news/2021/12/aws-outage-postmortem/" rel="noopener ugc nofollow" target="_blank">区域性的中断</a>。从DevOps的角度来看，您仍然有责任让您的服务恢复运行。</p><h2 id="3331" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">故障范围:</h2><ol class=""><li id="66c7" class="lt lu iq kz b la ns ld nt lg op lk oq lo or ls os lz ma mb bi translated"><strong class="kz ir">单一服务器故障:</strong>单一服务器或容器意外死亡</li><li id="3507" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls os lz ma mb bi translated"><strong class="kz ir">单站点故障:</strong>单个数据中心受到影响</li><li id="03cb" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls os lz ma mb bi translated"><strong class="kz ir">区域故障:</strong>一个区域内的所有数据中心都受到影响</li><li id="0204" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls os lz ma mb bi translated"><strong class="kz ir">多区域云服务故障:</strong>云提供商提供的服务在全球范围内中断</li></ol><p id="6b59" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我没有考虑的唯一情况是多地区多提供商失败，因为这意味着世界每个地区的每个主要云提供商同时被摧毁。在这一点上，我会开始堵塞我的前门，为不可避免的社会崩溃做准备，而我的工作将是我头脑中的最后一件事。</p><blockquote class="nx ny nz"><p id="64ab" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong>，您的最低要求是在<a class="ae kv" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html" rel="noopener ugc nofollow" target="_blank">多az架构</a>中运行AWS RDS。为了覆盖区域故障，您需要使用<a class="ae kv" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ReadRepl.XRgn.html" rel="noopener ugc nofollow" target="_blank">多区域架构</a>或者使用类似<a class="ae kv" href="https://docs.aws.amazon.com/aws-backup/latest/devguide/cross-region-backup.html" rel="noopener ugc nofollow" target="_blank"> AWS Backup </a>的工具将数据复制到另一个区域。为了在事件4的情况下格外小心，您设置了一个<a class="ae kv" href="https://docs.aws.amazon.com/amazonswf/latest/developerguide/swf-welcome.html" rel="noopener ugc nofollow" target="_blank"> Amazon SWF </a>来转储DB并将其复制到<a class="ae kv" href="https://azure.microsoft.com/en-us/services/storage/blobs/" rel="noopener ugc nofollow" target="_blank"> Azure Blob Store </a>。</p></blockquote><h2 id="bf82" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">故障持续时间:</h2><ul class=""><li id="1d0f" class="lt lu iq kz b la ns ld nt lg op lk oq lo or ls ly lz ma mb bi translated"><strong class="kz ir">短期:</strong> &lt; 15分钟</li><li id="d158" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">中期:</strong> &lt; 2小时</li><li id="496a" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">长期:</strong> &lt; 24小时</li><li id="84dd" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">未知:</strong> &gt;二十四小时</li><li id="e80c" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">永久:</strong>没有恢复</li></ul><p id="48ff" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">考虑故障持续时间的原因是，一些灾难恢复计划仅在特定条件下才会被激活。例如，为短期中断更改DNS条目可能弊大于利。对你的组织来说，根据你的情况改变这些项目符号/数字:这些不是硬性规定。基于故障持续时间记录计划的策略是组织信息的一种非常有用的方法。</p><p id="6f2a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我个人认为，从心理学的角度来看，未知的停机比永久性停机更糟糕。如果您已经经历了一天多的停机，并且不知道什么时候结束，那么在您认为停机情况是永久性的之前，您会经历多少天？例如:纽约市已经停电48小时，联邦应急管理局被召来。今天会恢复供电吗？明天吗？下周？在采取激烈行动之前，你会等多久？</p><blockquote class="nx ny nz"><p id="8453" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong>，因为您在<a class="ae kv" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html" rel="noopener ugc nofollow" target="_blank">多az架构</a>中托管它，所以无论持续时间长短，您的单服务器/站点故障策略都是相同的:故障转移到另一个AWS AZ中的读取副本。对于中短期的区域性故障，您依赖于您在<a class="ae kv" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ReadRepl.XRgn.html" rel="noopener ugc nofollow" target="_blank">多区域架构</a>中设置的读取副本，并让服务处于降级状态。如果持续时间超过中期，那么您就要花时间将该区域读取副本提升为新的主实例。如果存在持续&gt; 24小时的AWS(或RDS)中断，您会做最坏的打算，并开始基于最近的数据转储设计一个基于Azure的架构。</p></blockquote><h2 id="36a9" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">从应用驱动的灾难中恢复</h2><p id="558f" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">我所说的应用程序驱动是指用户/管理员/攻击者通过应用程序驱动数据损坏/删除操作。例如，用户意外删除了一个重要表格的内容。普通的数据库复制策略在这里不起作用，因为意外的删除仍然会传播到所有副本。</p><p id="1f60" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一种策略是使用<strong class="kz ir">冷备份</strong>。这里的想法是，您正在捕获某个时间点的数据状态，然后在该时间点回滚(或启动新主机)。这不适用于在两个快照之间创建并删除的数据。这就是您的<a class="ae kv" href="https://www.f5.com/services/resources/glossary/recovery-point-objective-rpo#:~:text=Recovery%20point%20objective%20(RPO)%20is,as%20an%20amount%20of%20time." rel="noopener ugc nofollow" target="_blank">恢复点目标</a>发挥作用的地方。您尝试计算的是快照的成本与丢失数据的业务风险。</p><blockquote class="nx ny nz"><p id="fb8d" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong>，您确定最大限度地减少数据丢失至关重要。开发团队负担不起构建这一功能的周期。您选择通过<a class="ae kv" href="https://docs.aws.amazon.com/aws-backup/latest/devguide/point-in-time-recovery.html" rel="noopener ugc nofollow" target="_blank"> AWS备份</a>使用连续备份，以获得1秒的折叠备份粒度。</p></blockquote><p id="050c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">冷备份的替代策略是<strong class="kz ir">延迟删除</strong>。这可以在应用层或底层数据存储上实现(如果兼容)。其思想是，系统保留状态的两个副本，并在一段时间后清除旧副本，而不是删除或修改数据(例如，AWS S3的<a class="ae kv" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html" rel="noopener ugc nofollow" target="_blank">对象版本控制</a>)。</p><p id="853d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在应用层实现延迟删除对于创建一个无缝的用户恢复故事非常有用(例如，在应用程序中有一个撤销按钮)。在基础设施端实现延迟删除要简单得多。我个人会根据工作流的频率或重要性做出产品决策。</p><h2 id="7189" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">从内部威胁中恢复</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/d9219fa2e61e5bd3d1afd94739066d5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*t5yuIWrdojEyxzJX"/></div></figure><p id="d1a7" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">好吧，你们这些有安全意识的人</strong>，这是给你们的。如果你的一个管理员决定他们对你公司的政治感到不安，并做了相当于烧毁大楼的软件。我接触过的大多数公司都接受这样的事实:如果他们的CISO或云运营主管不听话，他们可以终止公司。我讨厌这种放弃的态度:我们应该努力确保一个人不可能终结你的整个事业。值得注意的是，这并不一定是恶意的，人们可以只犯<a class="ae kv" href="https://aws.amazon.com/message/41926/" rel="noopener ugc nofollow" target="_blank">错误</a>。</p><p id="a7ac" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">黄金标准应该是使您的备份对于一群怀有恶意的管理员来说都是不可改变的。每个云提供商都有旨在防止意外删除的安全设置(例如<a class="ae kv" href="https://aws.amazon.com/premiumsupport/knowledge-center/accidental-termination/" rel="noopener ugc nofollow" target="_blank"> AWS EC2终止保护</a>或<a class="ae kv" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/MultiFactorAuthenticationDelete.html" rel="noopener ugc nofollow" target="_blank"> AWS S3 mfa-delete </a>)，但具有root访问权限的管理员可以轻松覆盖所有这些设置。您正在寻找的是一种不能被覆盖的备份机制(例如<a class="ae kv" href="https://docs.aws.amazon.com/aws-backup/latest/devguide/vault-lock.html" rel="noopener ugc nofollow" target="_blank"> AWS备份库锁</a>)。</p><blockquote class="nx ny nz"><p id="f569" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong>，您设置了一个AWS备份存储库来每小时拍摄一次快照，并使用一个<a class="ae kv" href="https://docs.aws.amazon.com/aws-backup/latest/devguide/cross-region-backup.html" rel="noopener ugc nofollow" target="_blank">存储库锁</a>来防止在7天的保留窗口内对备份进行任何修改。</p></blockquote><p id="b190" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">准备好让事情变得更糟了吗？抓住那顶锡纸帽。如果云提供商方面的流氓管理员决定解雇你(是的，这是一个真正的<a class="ae kv" href="https://en.wikipedia.org/wiki/Edward_Snowden" rel="noopener ugc nofollow" target="_blank">风险</a>)该怎么办。不管AWS告诉你什么，我还是不会相信他们(无意冒犯)。你要问自己的问题是:我愿意让我的公司因为一个人的行为而倒闭吗？当你是3个人的创业公司时，那是一个很好的方式。如果你是一家资产1亿美元的公司，这似乎是不负责任的。</p></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><h1 id="2ab6" class="oe na iq bd nb of pb oh ne oi pc ok nh jw pd jx nk jz pe ka nn kc pf kd nq oo bi translated">健康备份流程的品质</h1><p id="17cc" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">本节的目标是介绍健康备份流程的几个关键属性:完整性、可用性、安全性和文档记录。还有其他的品质，但这些是最普遍的品质。如果你认为我错过了什么，让我知道，我可以在未来的帖子中更新。</p><h2 id="d55a" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">完整</h2><p id="14d2" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">这里似乎是谈论备份完整性的最佳场所。无论这是出于合规性还是安全性原因，这里的问题是您如何知道您的备份是否保持了完整性。</p><ol class=""><li id="eb57" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls os lz ma mb bi translated">备份是完整且可用的—无法拍摄数据快照、上传期间出错(尤其是在大文件上传期间)等</li><li id="7832" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls os lz ma mb bi translated">备份不会被篡改—对备份的修改要么被完全阻止，要么至少是可检测的</li></ol><p id="ce1d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这方面的一个很好的真实例子是以前的一个项目，我们设置了一个脚本来将备份复制到S3。对于大型文件传输，您应该使用<a class="ae kv" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/mpuoverview.html" rel="noopener ugc nofollow" target="_blank"> AWS S3多部分上传</a>来处理正常的网络中断，但我们没有使用它，因为我们的备份大小非常小。这在3到4年内都没问题，直到系统大小增长了100倍，上传一个文件需要大约12个小时。随着备份大小的增加，错误率也在增加，很快大多数备份都是部分上传。当时，我们没有监控备份的完整性，这在我们的灾难恢复测试过程中被发现之前，几个月都没有被发现。</p><p id="9593" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果你已经使用像<a class="ae kv" href="https://docs.aws.amazon.com/aws-backup/latest/devguide/vault-lock.html" rel="noopener ugc nofollow" target="_blank"> AWS备份库锁</a>这样的工具实现了备份保护，那么你就不需要担心你的备份被修改。如果您无法实施强大的技术控制，您仍然可以做一些事情来防止修改备份，在大多数云提供商中，通过查看创建或修改日期，这可以免费(或几乎免费)获得。</p><blockquote class="nx ny nz"><p id="8a2a" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong> : AWS RDS快照一旦创建就不能修改(只能删除)。理论上，有人可以删除备份并创建一个同名的新备份，但AWS仍会显示新的创建日期。</p></blockquote><h2 id="95a4" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">可用性</h2><p id="7e4c" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">仅仅因为你有备份，并不意味着在正常操作下使用它是可行的。以下是一些例子:</p><ul class=""><li id="b7e7" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">从EBS快照创建EBS卷时，会立即创建驱动器，但数据会随着时间的推移而恢复。如果磁盘性能很关键，你需要预热驱动器，这可能需要几个小时才能恢复(或者查看<a class="ae kv" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-fast-snapshot-restore.html" rel="noopener ugc nofollow" target="_blank"> EBS FSR </a>)。</li><li id="c265" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">对于某些备份，恢复的持续时间取决于项目的数量，而不是大小。在10k对象上运行良好的备份在100mm对象上可能完全不可用，即使它的总大小很小。</li><li id="cdd9" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">尽管这种情况很少发生(并且是可怕的工程决策)，但有些备份可能会被编码成不容易传输到新主机的数据，如证书、主机名、DNS名称、数据库名称等。</li></ul><p id="a5cf" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这里重要的一点是，您已经全面测试了您的备份例程，并且您大概知道它们是如何扩展的。备份的定期测试(至少每年一次，或根据风险更频繁)成为一项重要的验证。您甚至可以考虑设置警报来监控数据是否达到一定的规模，这将需要您重新测试。</p><blockquote class="nx ny nz"><p id="3993" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong> : AWS使用后台作业将数据从快照恢复到卷，但对正在读取的数据进行优先级排序。当从快照恢复时，您记录一个命令来读取所有表数据，以强制AWS对数据加载进行优先级排序。只有在此完成之后，您才能将新的RDS数据库投入生产。</p></blockquote><h2 id="6983" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">安全性</h2><p id="4c14" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">适用于您正在运行的应用程序的所有隐私、权限、加密和安全性很可能也适用于您的备份。安全工程师通常很快就会发现这一点，但是开发人员在职业生涯的早期很容易忽略这一点。</p><ul class=""><li id="3fb6" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">未经授权的访问</strong> —有权访问您的备份的任何人都应该遵守与实时数据相似的标准</li><li id="b90c" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">加密</strong> —对应用程序和备份应用相同的加密标准</li></ul><p id="241f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">经验提醒:可用性和安全性需要协同工作。我们的团队过于以安全为中心，以至于我们不小心让运营团队无法使用备份，在紧急停机期间，运营团队浪费了宝贵的时间来调试为什么他们的恢复快照工作流在升级之前无法工作。在实施您的安全策略后，重新全面检查您的恢复过程，以确保没有任何遗漏。</p><blockquote class="nx ny nz"><p id="7f82" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong>:该数据库使用KMS对其实时数据进行加密，并且使用相同的密钥对快照进行加密，以确保权限的一致性。为了防止泄露，KMS密钥策略被设置为只允许来自特定用户和AWS RDS的解密。</p></blockquote><h2 id="b19e" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">证明文件</h2><p id="98ac" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">每个工程师最不喜欢的话题:文档。</p><p id="b8ad" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果没有说明如何以及何时使用备份的文档，任何备份过程都是不完整的。运营商在用尽其他选项之前不会立即从备份恢复，因此他们的出发点将是服务的操作指南。这是应该记录备份和恢复过程的地方。</p><p id="1a49" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">以下是一些帮助您开始的示例想法:</p><p id="0409" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">在每个服务层上，有一个包含以下内容的文档:</strong></p><ul class=""><li id="d7a5" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">显示不同冗余层的体系结构图</li><li id="8490" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">SLA，恢复点目标，恢复时间目标</li><li id="08b3" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">不同备份和恢复过程的描述</li><li id="f80a" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">什么监控捕获备份失败？</li><li id="2365" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">在什么情况下应该使用备份？</li><li id="35df" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">谁是紧急事件的系统专家？</li><li id="ab3d" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">内部服务专家、企业支持联系人、上报流程</li><li id="f732" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">每个跨系统依赖项的列表、联系信息、硬与软依赖项、每个跨系统依赖项的复合SLA</li></ul><p id="45a2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">在基础设施层面</strong></p><ul class=""><li id="70ba" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">显示关键组件、流量、入口/出口点等的架构图</li><li id="374b" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">包含每个应急计划文档链接的服务列表</li><li id="5df1" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">围绕年度测试、批准的备份实用程序等的组织政策。</li><li id="2a79" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">组织范围的停机管理政策，包括通信、作战室、回顾、升级阈值等标准</li></ul></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><h1 id="1cf7" class="oe na iq bd nb of pb oh ne oi pc ok nh jw pd jx nk jz pe ka nn kc pf kd nq oo bi translated">通常被忽视的话题</h1><p id="22bd" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">现在我们已经讨论了核心技术部分，让我们深入到创建灾难恢复计划时经常被忽略的两个主题:<strong class="kz ir">人员冗余和跨系统依赖。</strong>这里的心态是从仅仅恢复服务的原始机制后退一步，想想同时可能会发生什么。</p><p id="4cc6" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">比如纽约的一场生态灾难，把你公司的主要产品及其企业服务(auth、vpn等)都拿出来了。您正在远程工作，不受影响。在处理主要产品之前，需要首先恢复哪些企业服务？你的团队中有多少人在纽约，现在无法帮助你？</p><p id="9766" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这些类型的问题是整体灾难恢复计划的重要组成部分。</p><h2 id="a707" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">人员冗余</h2><p id="4b9d" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">坏事发生的最糟糕的时候是坏事已经发生的时候。</p><p id="a785" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当异地的一顿糟糕的墨西哥卷饼晚餐可能会毁掉整个团队时，在多区域、多云战略上花费如此多的时间和金钱有什么意义呢？对于任何一家价值不菲的公司来说，确保在多个地区都有训练有素的员工是最起码的要求。</p><ul class=""><li id="00b4" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">人员冗余:每个关键系统都有多个专家</li><li id="83f3" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">地区分布:</strong>系统专家分布在各个地区，以防特定地区的事件发生</li></ul><p id="7b87" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">不管是COVID、飞机失事还是异地食物中毒，一个好的工程领导都会像考虑基础设施一样考虑他们的员工。我并不是建议你做一些极端的事情，比如永远不要在异地工作，或者强迫人们搬迁，但至少你需要考虑你每天都会遇到的风险，以及你在公司异地聚会等活动中会遇到的风险。如果你的旅游巴士在镇上的阴暗处迷路了，确保公司的其他部门没有你也能正常运转。</p><h2 id="e4eb" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">跨系统依赖性和复合SLA</h2><p id="09f5" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">这是我最喜欢的被忽视的话题，因为它是如此明显却又如此容易被忽视。您制定了所有这些计划，以使您的基础架构不受区域限制，并确保您的团队成员保持地理上的分离，但是您忘记了在发生足够大的灾难时，您用于记录文档的SaaS也可能会中断。现在，您无法在没有任何文档的情况下恢复备份。让我们希望每个人都有一个伟大的记忆。</p><p id="a45f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">以下是人们经常忘记的一些常见依赖:</p><ul class=""><li id="9531" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">证明</li><li id="d773" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">域名服务器(Domain Name Server)</li><li id="e454" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">证明文件</li><li id="2512" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">托管提供商控制台访问</li><li id="5465" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">秘密管理</li><li id="a9dc" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">源代码控制/ CI /内部构件/第三方构件</li><li id="b5f1" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">虚拟专用网络</li></ul><p id="a034" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">如果您还没有从灾难恢复的角度进行跨系统依赖分析，那么您应该将此作为重中之重。</strong></p><p id="170a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">假设你很不幸，对上面提到的所有服务都有很强的依赖性。恢复服务的SLA现在是一个<a class="ae kv" href="https://docs.microsoft.com/en-us/answers/questions/122986/composite-slas.html" rel="noopener ugc nofollow" target="_blank">复合SLA </a>。您修复服务的时间将首先阻止所有其他服务首先恢复。如果这些服务也以线性方式恢复，那么你最好做好等待的准备。</p><p id="bdd0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，您通常可以采取一些措施来消除这些跨系统的依赖性。这里有一些让你的大脑动起来的例子:</p><ul class=""><li id="7b3c" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">认证、文档和秘密管理</strong> —创建一个本地管理员用户，打印出秘密及其相应的灾难恢复计划，并将其放入防火保险箱。</li><li id="3417" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">源代码控制/内部构件/第三方构件</strong> —将您的所有服务依赖关系烘焙成一个映像，您可以在多个地区/云提供商之间复制该映像。</li><li id="7a97" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir"> CI </strong> —确保您的恢复计划包括如何手动执行这些步骤。</li></ul><blockquote class="nx ny nz"><p id="d905" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated"><strong class="kz ir">对于您的RDS数据库</strong>，您确定您的灾难恢复计划依赖于对AWS或Azure控制台以及数据库主密码的访问。您在AWS/Azure中打印出一个不受限制的admin用户的副本、数据库主密码和灾难恢复文档，并将其放在一个保险箱中。你对秘密使用Shamir的秘密共享协议，并在你的团队和安全团队成员之间分配。</p></blockquote><p id="a0ff" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我知道这听起来像很多开销，但是这就是标准和团队实践发挥作用的地方。第一次，得到一个防火的保险箱，学习如何隐藏秘密，弄清楚你的打印文档的系统是一件痛苦的事情。但在那之后，它就成了一种模式的一部分，很容易被效仿。</p><p id="3e63" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">考虑一下:如果你的公司已经将地震工具包或应急电源设备作为一种标准，那么这个提议并不是一个大的飞跃。</p></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><h1 id="3b2b" class="oe na iq bd nb of pb oh ne oi pc ok nh jw pd jx nk jz pe ka nn kc pf kd nq oo bi translated">灾难恢复测试</h1><p id="bf01" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">如果您已经在本文中读到这里，那么您要么认为我疯了(应该停止阅读)，要么认为备份和灾难恢复是一个复杂的话题。尤其是当涉及到跨系统依赖时，对您的计划有信心的唯一方法就是测试它。本节介绍了构建灾难恢复计划的一种方法，从法规遵从性要求作为基础开始。</p><h2 id="71a2" class="mz na iq bd nb nc nd dn ne nf ng dp nh lg ni nj nk lk nl nm nn lo no np nq nr bi translated">灾难恢复测试的合规性要求</h2><p id="b07e" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">多项法规遵从性计划和审核特别要求有记录的灾难恢复计划和测试:</p><ul class=""><li id="72bd" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">通过<a class="ae kv" href="https://csrc.nist.gov/projects/risk-management/sp800-53-controls/release-search#/control?version=5.1&amp;number=CP-4" rel="noopener ugc nofollow" target="_blank">NIST 800–53 CP-4</a>进行FedRAMP“至少每年一次”</li><li id="8f91" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">SOX via <a class="ae kv" href="https://www.sarbanes-oxley-101.com/SOX-404.htm#:~:text=%E2%98%91%20Sarbanes%20Oxley&amp;text=All%20annual%20financial%20reports%20must,controls%20must%20also%20be%20reported." rel="noopener ugc nofollow" target="_blank"> Section 404 </a> —“每份年度报告”</li><li id="a639" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">HIPPA via<a class="ae kv" href="https://www.hhs.gov/sites/default/files/ocr/privacy/hipaa/administrative/combined/hipaa-simplification-201303.pdf" rel="noopener ugc nofollow" target="_blank">HIPPA 164.308 pt 7 pt D</a>—“周期测试”</li></ul><p id="fd0e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在工程师中，遵从是相当普遍不喜欢的，但在我看来，绝大多数遵从只是要求你做你已经知道应该做的事情。我很想写一整篇文章，谈谈有害的合规性如何在一家公司中演变，但重要的是:如果您的灾难恢复计划是全面的，并且降低了风险，那么合规性带来的额外工作就不是问题。</p><p id="e1fe" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">即使您的公司不需要为法规遵从性计划进行灾难恢复测试，我们也要谈谈法规遵从性要求通常是什么样的:</p><ul class=""><li id="d32b" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">冗余</strong> —数据应该在多个站点可用</li><li id="f02a" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">可恢复性</strong> —应该存在数据的冷备份</li><li id="6469" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">完整性</strong> —证明备份不会在事后被修改</li><li id="a305" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">安全性</strong> —备份不会扩大访问范围，并且经过适当加密</li><li id="d621" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">文档</strong> —计划被记录、审查和更新</li><li id="4d21" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">培训</strong>——人们实际上知道计划</li><li id="0772" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">测试</strong>——(至少)每年进行一次测试，并记录后续行动</li></ul><p id="c378" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">以上都是合理的要求</strong>。不要把合规说成是问题。在你的组织中尽早实施这些步骤，你就不会在第一次审计的前一周试图半途而废。</p><h1 id="6f56" class="oe na iq bd nb of og oh ne oi oj ok nh jw ol jx nk jz om ka nn kc on kd nq oo bi translated">年度灾难恢复测试</h1><p id="00fb" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">我们现在拥有所有组件:</p><ul class=""><li id="d667" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated"><strong class="kz ir">冗余</strong> —“硬件/网络灾难冗余”中有所涉及</li><li id="a3f5" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">可恢复性</strong> —涵盖在“从应用程序驱动的灾难中恢复”和“从内部威胁灾难中恢复”中</li><li id="3dbc" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz ir">完整性、安全性和文档</strong>——“健康备份的品质”中有所介绍</li></ul><p id="a908" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们现在需要的是<strong class="kz ir">培训</strong>和<strong class="kz ir">测试</strong>，还有什么比通过你的测试来进行培训更好的方式呢！您的灾难恢复练习应包括(至少):</p><p id="28a9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">对于每项服务</p><ul class=""><li id="1f9a" class="lt lu iq kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">执行AZ、区域或云故障切换测试，验证多站点恢复案例</li><li id="2248" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">验证您的冷备份(或等效备份):存在性、完整性和可用性</li><li id="6328" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">更新文档，即使只是更新时间戳/签收表</li><li id="b600" class="lt lu iq kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">更新灾难恢复测试电子表格，包括结果、跟进、执行测试的人员以及执行测试的时间。</li></ul><p id="9be3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">让团队领导或部门领导签署集体结果。</p><blockquote class="nx ny nz"><p id="c561" class="kx ky oa kz b la lb jr lc ld le ju lf ob lh li lj oc ll lm ln od lp lq lr ls ij bi translated">专业提示:一些审计员特别希望得到关于灾难恢复工作所涵盖的内容、谁负责、谁是测试人员以及所有事情的日期的明确指示。帮你自己一个忙，花5分钟必要的时间记录下来。</p></blockquote><p id="5b10" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kv" href="https://docs.google.com/document/d/1pKkFrJuIY1q-4Wd1fEFsQEigGHpCxUIWFnUC4aP7Rt0/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">示例灾难恢复模板1 </a> —这个灾难恢复模板是在Google Doc中制作的，它试图将工作分成一个汇总表和一个跟踪表。它为记笔记、额外链接、额外叙述等提供了更多的空间。这种格式适用于某些人，不适用于其他人。抄你喜欢的，改你不喜欢的。</p><p id="30fe" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kv" href="https://docs.google.com/spreadsheets/d/1GD8QfshimtdsIsl2h1VV6yrBRcUaZIz8OGGdSjNKi9M/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">示例灾难恢复模板2 </a> —这个灾难恢复模板是由Google Sheets制作的，它更侧重于最小化工程师必须键入的文档数量。更像是一种“点击盒子”然后继续输入的方法。如果您认为上面的格式太冗长，这可能更适合您。</p><div class="mh mi gp gr mj mk"><a href="https://docs.google.com/spreadsheets/d/1GD8QfshimtdsIsl2h1VV6yrBRcUaZIz8OGGdSjNKi9M/edit?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd ir gy z fp mp fr fs mq fu fw ip bi translated">(模板)灾难恢复电子表格</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">介绍介绍本练习的目标是通过检查我们的所有服务来降低业务风险…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">docs.google.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my kp mk"/></div></div></a></div><h1 id="3291" class="oe na iq bd nb of og oh ne oi oj ok nh jw ol jx nk jz om ka nn kc on kd nq oo bi translated">总结</h1><p id="d313" class="pw-post-body-paragraph kx ky iq kz b la ns jr lc ld nt ju lf lg nu li lj lk nv lm ln lo nw lq lr ls ij bi translated">如果你在文章中写到这里，我会印象深刻。对于大多数DevOps工程师来说，这是迄今为止最令人沮丧的工作之一，但是对于任何经历过灾难性停机的人来说，你知道这有多重要。</p><p id="1d63" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果你有一个方法，那就是:一个全面的灾难恢复指南需要时间、计划和自动化。每年，你都应该不断进步。</p><p id="7025" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我对听到我提出的思维模式或示例模板中的差距非常感兴趣，所以请联系我。</p><p id="4c1f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">再次感谢我的编辑团队:<a class="ae kv" href="https://www.linkedin.com/in/andrew-chang-a9b5b33a/" rel="noopener ugc nofollow" target="_blank">安德鲁</a>、<a class="ae kv" href="https://www.linkedin.com/in/nickrnorton/" rel="noopener ugc nofollow" target="_blank">尼克</a>和<a class="ae kv" href="https://www.linkedin.com/in/emilygraebert/" rel="noopener ugc nofollow" target="_blank">艾米丽</a></p></div></div>    
</body>
</html>