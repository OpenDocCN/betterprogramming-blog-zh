<html>
<head>
<title>How to Convert Redux to Use React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何转换Redux来使用React钩子</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/convert-redux-to-hooks-d74d79b04f?source=collection_archive---------5-----------------------#2020-03-01">https://betterprogramming.pub/convert-redux-to-hooks-d74d79b04f?source=collection_archive---------5-----------------------#2020-03-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cf96" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从传统React组件升级</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e27c0d3a2a838d1e9b230147ed45347b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6JMvfQLi70NDvruo7hZUg.jpeg"/></div></div></figure><p id="2481" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，我将尝试解释如何使用<a class="ae lq" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>和<a class="ae lq" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> React Hooks </a>。</p><p id="7e52" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">React Redux在2019年6月11日发布的<a class="ae lq" href="https://github.com/reduxjs/react-redux/releases/tag/v7.1.0" rel="noopener ugc nofollow" target="_blank">7.1版本</a>中给予了钩子的支持。这意味着你可以在你的功能组件中使用带有钩子的Redux，而不是使用<code class="fe lr ls lt lu b">connect</code> <a class="ae lq" href="https://reactjs.org/docs/higher-order-components.html" rel="noopener ugc nofollow" target="_blank">高阶组件</a> (HOC)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6c03" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是钩子？</h1><p id="8cc0" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated">只是为了刷新一下钩子，钩子是在React版本16.8中引入的，它们允许您访问功能组件中的状态和生命周期方法。</p><p id="db01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们看一个例子。</p><p id="fef9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">像这样的React类组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5b51" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">可以像这样用钩子写成一个函数组件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b82b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想更深入地了解钩子，我建议你浏览一下关于钩子的详细的<a class="ae lq" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d2dd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">回到正题</h1><p id="8af1" class="pw-post-body-paragraph ku kv it kw b kx mu ju kz la mv jx lc ld mw lf lg lh mx lj lk ll my ln lo lp im bi translated">这篇文章的最初目的是解释我们如何使用Redux和钩子。</p><p id="5102" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">React Redux现在提供了<code class="fe lr ls lt lu b">useSelector</code>和<code class="fe lr ls lt lu b">useDispatch</code>挂钩，可以用来代替<code class="fe lr ls lt lu b">connect</code>。</p><p id="b1c7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">useSelector</code>是<code class="fe lr ls lt lu b">connect</code>的<code class="fe lr ls lt lu b">mapStateToProps</code>的替代品。您传递给它一个函数，该函数接受Redux存储状态并返回您需要的状态。</p><p id="c43b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lr ls lt lu b">useDispatch</code>取代<code class="fe lr ls lt lu b">connect</code>的<code class="fe lr ls lt lu b">mapDispatchToProps</code>。它所做的只是返回你的商店的<code class="fe lr ls lt lu b">dispatch</code>方法，这样你就可以手动分派动作。</p><p id="11f5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">够理论？好了，让我们看一个实时例子，在这个例子中，我们将把一个使用<code class="fe lr ls lt lu b">connect</code>的React组件转换成一个使用钩子的组件。</p><p id="2260" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe lr ls lt lu b">connect</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5cc4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，用新的React Redux钩子代替<code class="fe lr ls lt lu b">connect</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="eb69" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正如你所看到的，代码是精确的，更少的行意味着更好的性能，更容易阅读，更容易理解，当然，更容易测试。</p><p id="202f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不使用高阶组件的另一个好处是，您不再得到这种“虚拟DOM链”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/2194354edf73aaeb502b75a8ea7cbe46.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/0*0cTPqt-odqnd9r0_.png"/></div></figure><p id="efbb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在你已经有了钩子的基本知识以及如何在Redux中使用它们，是时候接触一下详细的<a class="ae lq" href="https://react-redux.js.org/api/hooks" rel="noopener ugc nofollow" target="_blank">文档</a>了。</p><p id="fc4c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你今天学到新东西了吗？评论和反馈总是让作者开心！</p></div></div>    
</body>
</html>