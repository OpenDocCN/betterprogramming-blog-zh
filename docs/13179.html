<html>
<head>
<title>How To Burn an NFT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何烧NFT</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-burn-an-nft-c306c9cb6df?source=collection_archive---------2-----------------------#2022-08-04">https://betterprogramming.pub/how-to-burn-an-nft-c306c9cb6df?source=collection_archive---------2-----------------------#2022-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6a6a" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/@donpablooooo/list/nft-series-34dea60327e7" rel="noopener"> NFT系列</a></h2><div class=""/><div class=""><h2 id="4449" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">ERC721可靠性合同</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a031d98971ea0f7c1f480a100c38501e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VbfI8XDgWf-l4KQv"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@yaoqiqiqilai?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">姚期</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="1470" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">什么是NFT </strong></h1><p id="a2c7" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">不可替换令牌(NFT)是存储在区块链中的唯一可识别的数字资产。与可替代的加密货币不同，NFT是独一无二的。</p><p id="cabb" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">NFT的所有权在区块链注册，所有者可以转让，从而可以出售和交换非森林产品。</p><p id="09a7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">NFT通常指的是数字文件(图像、视频或其他)，NFT的市场价值与其所指的数字文件相关联。</p><p id="50f0" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">那么，如果NFT是有价值的数字资产，我为什么要烧掉它们呢？</p><h1 id="2e05" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">为什么要烧NFT </strong></h1><p id="e98a" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">一个原因可能是希望通过让某个特定收藏的NFT变得更稀有来提高其价值。例如，拥有一个足球运动员雕像的所有十个NFT的人可能决定销毁除一个之外的所有NFT，以增加剩余一个的价值。</p><p id="2660" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">但是，更常见的是，公司:</p><ul class=""><li id="b684" class="nb nc it mc b md mw mg mx mj nd mn ne mr nf mv ng nh ni nj bi translated">向所有者提供烧掉他们的NFT的机会，以换取实物产品或NFT的“升级”版本</li><li id="2c96" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">通过宣布他们将在特定日期后销毁所有未售出的非食品药品，敦促人们迅速购买一滴非食品药品</li><li id="8444" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">消除未售出或有问题的NFT</li></ul><h1 id="e08f" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated"><strong class="ak">如何刻录</strong></h1><p id="b38a" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">奇怪的是，<a class="ae lh" href="https://eips.ethereum.org/EIPS/eip-721" rel="noopener ugc nofollow" target="_blank"> EIP-721 </a>声明:</p><blockquote class="np nq nr"><p id="0d8d" class="ma mb ns mc b md mw kd mf mg mx kg mi nt my ml mm nu mz mp mq nv na mt mu mv im bi translated">“NFTs的销毁(“焚烧”)不包括在本规范中。您的合同可以通过其他方式实现这些。”</p></blockquote><p id="851a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">好了，我们来讨论一下燃烧特性！</p><p id="d30e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们需要从ERC-721的实施开始。OpenZeppelin <a class="ae lh" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/ERC721.sol" rel="noopener ugc nofollow" target="_blank"> ERC721 </a>是使用最广泛的实现之一。</p><p id="d3d7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">这是合同代码的一个片段:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="33f8" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">正如我们所看到的，这个实现已经提供了一个内部的<code class="fe ny nz oa ob b">_burn</code>函数。该函数接受令牌id作为输入，并执行以下操作:</p><ul class=""><li id="52b7" class="nb nc it mc b md mw mg mx mj nd mn ne mr nf mv ng nh ni nj bi translated">获取NFT的所有者</li><li id="1d86" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">调用<code class="fe ny nz oa ob b">_beforeTokenTransfer</code>钩子函数(钩子是什么稍后会更清楚)</li><li id="e727" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">清除令牌的所有批准</li><li id="41ef" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">减少所有者余额</li><li id="347f" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">发出传输事件</li><li id="a24a" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">调用<code class="fe ny nz oa ob b">_afterTokenTransfer</code>钩子函数</li></ul><p id="9f8a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">那么，任务完成了？</p><p id="ba5e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">等等，有东西不见了！</p><p id="f193" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">该函数不检查发送者是否被授权对令牌进行操作。我们自己做吧！</p><p id="bafb" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">为此，我们可以使用<code class="fe ny nz oa ob b">_beforeTokenTransfer</code>钩子函数。</p><p id="f204" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如<a class="ae lh" href="https://docs.openzeppelin.com/contracts/3.x/extending-contracts#using-hooks" rel="noopener ugc nofollow" target="_blank"> OpenZeppelin文档</a>所述:</p><blockquote class="np nq nr"><p id="1890" class="ma mb ns mc b md mw kd mf mg mx kg mi nt my ml mm nu mz mp mq nv na mt mu mv im bi translated">“钩子只是在某个动作发生之前或之后被调用的函数。它们提供了一个集中点来挂钩和扩展原始行为。”</p></blockquote><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="1655" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><code class="fe ny nz oa ob b">_beforeTokenTransfer</code>钩子是一个内部虚函数，在任何令牌传输(包括铸造和烧录)之前调用，条件如下:</p><ul class=""><li id="64fd" class="nb nc it mc b md mw mg mx mj nd mn ne mr nf mv ng nh ni nj bi translated">当“from”和“to”都不为零时，我们就处于令牌传输的情况下</li><li id="9f1b" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">当“from”是零地址时，我们处于铸造情况</li><li id="8ce4" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">当“到”为零时，<code class="fe ny nz oa ob b">tokenId</code>即将被烧毁</li><li id="c1a4" class="nb nc it mc b md nk mg nl mj nm mn nn mr no mv ng nh ni nj bi translated">“从”和“到”永远不会都是零</li></ul><p id="397f" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">遵循挂钩的OpenZeppelin <a class="ae lh" href="https://docs.openzeppelin.com/contracts/3.x/extending-contracts#rules_of_hooks" rel="noopener ugc nofollow" target="_blank">规则，遵循<code class="fe ny nz oa ob b">BurnableNFT</code>实现。</a></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="b305" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在第33行，我们检查我们是否处于烧录或传输场景(“from”不是零地址)。</p><p id="ded0" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">那么，允许转移或烧录NFT的唯一地址必须是它的所有者，因此，在第34行，我们得到了<code class="fe ny nz oa ob b">tokenId</code>的所有者，并且“要求”它必须等于事务的发送者(<code class="fe ny nz oa ob b">msg.sender</code>)。</p><p id="90a2" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">然后，唯一要做的就是添加一个调用父契约<code class="fe ny nz oa ob b">_burn</code>函数的公共<code class="fe ny nz oa ob b">burn</code>函数。</p><p id="10cd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">所有的固体代码和测试可以在:<a class="ae lh" href="https://github.com/donpabblo/burnable-nft" rel="noopener ugc nofollow" target="_blank">https://github.com/donpabblo/burnable-nft</a>找到</p><p id="30e6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果你在这里，谢谢你的阅读。我真诚地希望这个解释对你有用。</p><p id="0736" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">更多阅读来自<a class="ae lh" href="https://medium.com/@donpablooooo/list/nft-series-34dea60327e7" rel="noopener"> <strong class="mc jd"> NFT系列</strong> </a>。</p></div></div>    
</body>
</html>