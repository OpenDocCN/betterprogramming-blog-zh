<html>
<head>
<title>How To Use NVM To Manage Node.js 19 and NPM 9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用NVM管理Node.js 19和NPM 9</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-use-nvm-to-manage-node-js-19-and-npm-9-bc5656d52d5f?source=collection_archive---------4-----------------------#2022-10-26">https://betterprogramming.pub/how-to-use-nvm-to-manage-node-js-19-and-npm-9-bc5656d52d5f?source=collection_archive---------4-----------------------#2022-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="908d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">NVM实用指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c5f79d49bb4eaf1b2eb2cb7f1a65a528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PuZ_CdXDT-ZbVdYP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">布莱克·康纳利在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b0e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://nodejs.org/en/blog/release/v19.0.0/" rel="noopener ugc nofollow" target="_blank"> Node.js 19 </a>发布于2022年10月18日。它配有<a class="ae ky" href="https://medium.com/p/bea4631a96d6" rel="noopener"> npm 9 </a>和许多新功能。你准备好尝试了吗？</p><p id="c173" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-nvm-to-manage-node-js-17-and-npm-8-2da8bf3ca5e9">上一篇文章</a>中所说，<a class="ae ky" href="https://github.com/nvm-sh/nvm" rel="noopener ugc nofollow" target="_blank"> NVM(节点版本管理器)</a>是升级node.js和npm版本的最佳方式。它可以帮助我们降低风险。</p><p id="a38b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是用新版本的<code class="fe lv lw lx ly b">nvm</code>、node.js和npm重写的。</p><h1 id="e6ef" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">安装NVM</h1><p id="961c" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">nvm</code>管理node.js和npm版本。它被设计为每个用户安装，每个shell调用。<code class="fe lv lw lx ly b">nvm</code>可以在任何POSIX兼容的shell (sh、dash、ksh、zsh、bash)上工作，特别是在Unix、macOS和windows WSL上。</p><p id="1457" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">nvm</code>的最新版本是<code class="fe lv lw lx ly b">0.39.2</code>，可以通过curl或者<code class="fe lv lw lx ly b">wget</code>命令安装:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c72b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">脚本<code class="fe lv lw lx ly b">install.sh</code>将nvm存储库克隆到<code class="fe lv lw lx ly b">~/.nvm</code>，并尝试将下面代码片段中的源代码行添加到正确的概要文件(<code class="fe lv lw lx ly b">~/.bash_profile</code>、<code class="fe lv lw lx ly b">~/.zshrc</code>、<code class="fe lv lw lx ly b">~/.profile</code>或<code class="fe lv lw lx ly b">~/.bashrc</code>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ca38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在概要文件中，如<code class="fe lv lw lx ly b">~/.zshrc</code>，我们看到上面的行被添加。</p><h1 id="52b4" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">使用NVM</h1><p id="fbc6" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">安装nvm后，我们可以使用下面的命令来安装node.js的最新版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4446" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的输出(第7行)表明npm <code class="fe lv lw lx ly b">8.19.2</code>与node.js <code class="fe lv lw lx ly b">19.0.0</code>一起使用。这可以通过以下内容来验证:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以指定要安装的确切版本。语义版本格式由<a class="ae ky" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">sever</a>定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="d48a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果已经安装了特定版本，则不会重新安装:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2522" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">npm升级到版本9需要什么？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5906" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以列出所有已安装的版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0615" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面输出中的箭头显示node.js的当前版本是<code class="fe lv lw lx ly b">19.0.0</code>(第11行)。它还显示了<code class="fe lv lw lx ly b">default</code> ( <code class="fe lv lw lx ly b">14.17.6</code>第13行)、<code class="fe lv lw lx ly b">node</code> ( <code class="fe lv lw lx ly b">19.0.0</code>第16行)和<code class="fe lv lw lx ly b">stable</code> ( <code class="fe lv lw lx ly b">19.0.0</code>第17行)的值。</p><p id="159e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">nvm use</code>修改当前版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3874" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能想知道<code class="fe lv lw lx ly b">v10.14.0</code>如何使用比<code class="fe lv lw lx ly b">v14.20.1</code>(第6行)更高版本的npm(第2行)。以下命令可以实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="03a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所知，npm 8放弃了对node.js 10的支持。版本<code class="fe lv lw lx ly b">10.14.0</code>无法安装npm <code class="fe lv lw lx ly b">8.0.0</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3dcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下命令将获取当前节点版本上支持的最新npm版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="f5fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于node.js <code class="fe lv lw lx ly b">19.0.0</code>，npm的最新工作版本是<code class="fe lv lw lx ly b">8.19.2</code>。</p><p id="d162" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">nvm use</code>为当前外壳设置特定版本。如果启动新的shell，新设置的node.js版本将会丢失。</p><p id="3c03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如何才能让一个特定的节点版本持久化？</p><p id="a962" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认版本适用于所有shells。<code class="fe lv lw lx ly b">nvm alias</code>可以设置默认版本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4e41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了方便，可以创建一个<code class="fe lv lw lx ly b">.nvmrc</code>文件，它采用SemVer格式，或者<code class="fe lv lw lx ly b">node</code>，或者<code class="fe lv lw lx ly b">default</code>。之后，<code class="fe lv lw lx ly b">nvm use</code>、<code class="fe lv lw lx ly b">nvm install</code>、<code class="fe lv lw lx ly b">nvm exec</code>、<code class="fe lv lw lx ly b">nvm run</code>和<code class="fe lv lw lx ly b">nvm which</code>将使用<code class="fe lv lw lx ly b">.nvmrc</code>文件中指定的版本，如果命令行上没有提供版本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="62f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用以下命令检查当前版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="38de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列出了所有可用的版本，但是要准备好一个很长的列表。</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="71b9" class="nc ma it ly b gy nd ne l nf ng">% nvm ls-remote</span></pre><p id="7979" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更具体地说，提供部分版本可以缩小可用列表的范围。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e686" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">nvm which</code>显示可执行文件的安装路径。我们已经安装了<code class="fe lv lw lx ly b">10.14.0</code><code class="fe lv lw lx ly b">12.22.7</code><code class="fe lv lw lx ly b">14.17.6</code><code class="fe lv lw lx ly b">17.1.0</code><code class="fe lv lw lx ly b">18.0.0</code><code class="fe lv lw lx ly b">19.0.0</code>的node.js。以下是<code class="fe lv lw lx ly b">nvm which </code>的结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="1bce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特定的节点版本可以直接用于运行应用程序:</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="8aea" class="nc ma it ly b gy nd ne l nf ng">% nvm run 14.17.6 app.js</span></pre><p id="1b95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，下面的命令运行<code class="fe lv lw lx ly b">node app.js</code>，路径指向节点<code class="fe lv lw lx ly b">14.17.6</code>。</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="cf65" class="nc ma it ly b gy nd ne l nf ng">% nvm exec 14.17.6 node app.js</span></pre><p id="6d11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想找到更多的<code class="fe lv lw lx ly b">nvm</code>命令，运行帮助命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="b0ed" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">升级NVM</h1><p id="b7ee" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">我们可以用<code class="fe lv lw lx ly b">nvm</code>升级node.js和npm。我们如何升级<code class="fe lv lw lx ly b">nvm</code>本身？</p><p id="8c4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们试试。</p><p id="cea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">升级之前，我们有<code class="fe lv lw lx ly b">nvm</code> <code class="fe lv lw lx ly b">0.39.0</code>。</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="9046" class="nc ma it ly b gy nd ne l nf ng">% nvm --version<br/>0.39.0</span></pre><p id="130e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将其升级到版本<code class="fe lv lw lx ly b">0.39.2</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e7e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如输出(第10行)所述，我们需要关闭并重新打开终端以使用新版本:</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="897d" class="nc ma it ly b gy nd ne l nf ng">% nvm --version<br/>0.39.2</span></pre><h1 id="fcf8" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">结论</h1><p id="b5de" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b">nvm</code>方便管理node.js和npm版本。我们可以升级到<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/6-major-features-of-node-js-19-b98e28b9670c"> node.js 19 </a>和npm 9，以及之前的任何版本，如下所列:</p><ul class=""><li id="396c" class="nh ni it lb b lc ld lf lg li nj lm nk lq nl lu nm nn no np bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/5-major-features-of-node-js-18-5f4a164cc9fc">node . js 18的5大特色</a></li><li id="3491" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/3-major-features-of-node-js-17-4bee7135df02">node . js 17的3大特色</a></li><li id="b384" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/a-quick-look-at-the-node-js-16-features-d616e8b2f29">快速浏览Node.js 16特性</a></li><li id="a19d" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" href="https://medium.com/better-programming/whats-new-in-node-js-15-fc24e87e2590" rel="noopener">node . js 15的新功能</a></li><li id="e411" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" href="https://medium.com/p/bea4631a96d6" rel="noopener">探索npm 9中的新功能</a></li><li id="40e5" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/what-might-be-coming-in-npm-9-6985cf2678a6">快速浏览npm 8特性和对npm 9的预测</a></li><li id="73b4" class="nh ni it lb b lc nq lf nr li ns lm nt lq nu lu nm nn no np bi translated"><a class="ae ky" href="https://medium.com/better-programming/the-step-by-step-guide-to-understanding-and-adopting-npm-7-914504f7090f" rel="noopener">理解和采用npm 7的分步指南</a></li></ul><p id="42eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p><pre class="kj kk kl km gt my ly mz na aw nb bi"><span id="3310" class="nc ma it ly b gy nd ne l nf ng"><strong class="ly iu">Want to Connect?</strong></span><span id="0c21" class="nc ma it ly b gy nv ne l nf ng">If you are interested, check out <a class="ae ky" href="https://jenniferfubook.medium.com/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener">my directory of web development articles</a>.</span></pre></div></div>    
</body>
</html>