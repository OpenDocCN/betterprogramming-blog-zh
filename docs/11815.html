<html>
<head>
<title>Introducing Jaeger Quick Start — Deploying on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jaeger快速入门介绍——在AWS上部署</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/introducing-jaeger-quick-start-deploying-on-aws-f0ee5d398e8a?source=collection_archive---------11-----------------------#2022-04-19">https://betterprogramming.pub/introducing-jaeger-quick-start-deploying-on-aws-f0ee5d398e8a?source=collection_archive---------11-----------------------#2022-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="2bc2" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/@dmitrykolomiets/list/musings-on-tracing-3d7bd0d2093c" rel="noopener">寻人的思考</a></h2><div class=""/><div class=""><h2 id="ffd2" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">端到端分布式跟踪平台的研究</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e73bcf939961d578433af7636c8c8c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lhiVr8bUKGc8lklrOKcEw.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@rubaitulazad?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">鲁拜图·阿扎德</a>在<a class="ae le" href="https://unsplash.com/@rubaitulazad?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="0a5c" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">OpenTelemetry和X射线的问题</h1><p id="3336" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/trace-context-propagation-with-opentelemetry-b8816f2f065e?source=friends_link&amp;sk=dbed25d85d4fc29d770fe677349c9e66">在之前的文章</a>中，我们看了AWS发行版的OpenTelemetry (ADOT)以及如何使用它在事件驱动的架构中产生轨迹。默认情况下，ADOT将轨迹导出到AWS X射线，但有一些限制:</p><ul class=""><li id="54be" class="mt mu iq lz b ma mv md mw mg mx mk my mo mz ms na nb nc nd bi translated">x射线不支持<a class="ae le" href="https://opentelemetry.io/docs/concepts/data-sources/#logs" rel="noopener ugc nofollow" target="_blank">open telemetry events</a>——这是一个非常有用的概念，在许多情况下可能会取代更传统的日志</li><li id="9cab" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">x射线不支持<a class="ae le" href="https://opentelemetry.io/docs/reference/specification/overview/#links-between-spans" rel="noopener ugc nofollow" target="_blank"> OpenTelemetry链接</a>——我们之前已经看到，链接对于表达跨度之间的因果关系非常有帮助</li><li id="c8bb" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">X射线对跨度种类有<a class="ae le" href="https://aws-otel.github.io/docs/getting-started/python-sdk/trace-manual-instr#creating-custom-spans" rel="noopener ugc nofollow" target="_blank">限制</a>——只有种类<code class="fe nj nk nl nm b">Server</code>的跨度被转换成X射线段</li></ul><p id="7e55" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">正如OpenTelemetry world中常见的情况，可以更改默认配置并将<a class="ae le" href="https://opentelemetry.io/docs/collector/configuration/#exporters" rel="noopener ugc nofollow" target="_blank">跟踪导出到<em class="nq">不同的</em>跟踪后端。但是用哪个呢？</a></p><h1 id="a7e1" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">贼鸥</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nr"><img src="../Images/f9c7f12521f684a08b7d299f13611071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z6KVikFIVj_sjhX43VKR_Q.png"/></div></div></figure><p id="a9a7" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">您可能想为您的跟踪平台考虑许多跟踪后端——包括商业的和开源的。在这篇文章中，我想让大家关注一下<a class="ae le" href="https://www.jaegertracing.io/" rel="noopener ugc nofollow" target="_blank">Jaeger</a>——一个来自<a class="ae le" href="https://www.cncf.io/" rel="noopener ugc nofollow" target="_blank">云原生计算基金会</a> (CNCF)的<a class="ae le" href="https://www.cncf.io/projects/jaeger/" rel="noopener ugc nofollow" target="_blank">毕业项目</a>。考虑到其他CNCF毕业的项目，这是一个值得尊敬的认可。仅举几个:<a class="ae le" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank">库伯内特斯</a>、<a class="ae le" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank">赫尔姆</a>、<a class="ae le" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank">普罗米修斯</a>、<a class="ae le" href="https://www.fluentd.org/" rel="noopener ugc nofollow" target="_blank">弗鲁恩特</a>。</p><p id="ea0a" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">Jaeger是一个开源的端到端分布式追踪平台。在真正的云原生方式中，Jaeger可以以多种方式部署，例如:</p><ul class=""><li id="e2a4" class="mt mu iq lz b ma mv md mw mg mx mk my mo mz ms na nb nc nd bi translated"><a class="ae le" href="https://www.jaegertracing.io/docs/1.33/deployment/" rel="noopener ugc nofollow" target="_blank"> Docker图像</a></li><li id="3b38" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated"><a class="ae le" href="https://github.com/jaegertracing/jaeger-operator#getting-started" rel="noopener ugc nofollow" target="_blank"> Kubernetes操作员</a></li><li id="8583" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated"><a class="ae le" href="https://github.com/jaegertracing/helm-charts" rel="noopener ugc nofollow" target="_blank">舵图</a></li><li id="45fe" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated"><a class="ae le" href="https://www.jaegertracing.io/docs/next-release/windows/" rel="noopener ugc nofollow" target="_blank">视窗服务</a></li></ul><p id="6f32" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">Jaeger团队创建了一个详细的<a class="ae le" href="https://www.jaegertracing.io/docs/next-release/deployment/" rel="noopener ugc nofollow" target="_blank">部署指南</a>，它回答了许多关于不同Jaeger组件(<a class="ae le" href="https://www.jaegertracing.io/docs/1.33/architecture/#agent" rel="noopener ugc nofollow" target="_blank">代理</a>、<a class="ae le" href="https://www.jaegertracing.io/docs/1.33/architecture/#collector" rel="noopener ugc nofollow" target="_blank">收集器</a>和<a class="ae le" href="https://www.jaegertracing.io/docs/1.33/architecture/#query" rel="noopener ugc nofollow" target="_blank">查询</a>服务)的角色、与其他服务的集成点(Elasticsearch、Cassandra)以及伸缩性考虑的问题。然而，即使有这种水平的技术文档，部署一个生产就绪的Jaeger平台也不是一个小壮举。</p><p id="3aeb" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">对于大规模部署，尤其是在AWS环境中，我们对<a class="ae le" href="https://aws.amazon.com/architecture/well-architected/" rel="noopener ugc nofollow" target="_blank">架构良好的</a>解决方案有很多期望，尤其是:</p><ul class=""><li id="e0e9" class="mt mu iq lz b ma mv md mw mg mx mk my mo mz ms na nb nc nd bi translated">跳回</li><li id="edc9" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">弹性</li><li id="10e8" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">可观察性</li><li id="4909" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">与其他AWS服务的本机集成</li><li id="694b" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">可重复的全自动IaC部署</li></ul><p id="8eed" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">Jaeger Kubernetes operator 有助于实现这些特征，但话说回来，你需要一个Kubernetes集群作为起点。如果你没有呢？旋转起来(并保持！)托管跟踪平台的新集群可能非常困难和昂贵(无论是成本还是经验方面)。</p><p id="17ba" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">这篇文章的主要问题是——Jaeger的“快速启动”在AWS上是什么样子的？</p><h1 id="80f8" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">AWS快速入门— 101</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/ced78fe2456759a2b7394157f3e49f4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*HImzOvJnfoN8HOR0"/></div></figure><p id="96f9" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">我在上面使用“快速启动”是有原因的——<a class="ae le" href="https://aws.amazon.com/quickstart/" rel="noopener ugc nofollow" target="_blank">AWS快速启动</a>是“<em class="nq">自动化参考部署……【它们】帮助你根据AWS最佳实践</em>在AWS上部署流行的技术”。这正是我和Jaeger在AWS上的目标。</p><p id="f217" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">AWS甚至提供了<a class="ae le" href="https://aws-quickstart.github.io/" rel="noopener ugc nofollow" target="_blank">快速入门投稿指南</a>来帮助创作新的快速入门。在不深入细节的情况下，让我说一个<em class="nq">快速入门是一组CloudFormation模板</em>。</p><p id="a1dd" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">而且我必须承认，这些模板必须<strong class="lz ja">坚固</strong>。引用文档，快速入门的<a class="ae le" href="https://aws-quickstart.github.io/reqs.html#min" rel="noopener ugc nofollow" target="_blank">最低架构要求</a>如下:</p><ul class=""><li id="9a60" class="mt mu iq lz b ma mv md mw mg mx mk my mo mz ms na nb nc nd bi translated">多AZ架构(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#ha" rel="noopener ugc nofollow" target="_blank">细节</a>)</li><li id="19d5" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">支持大多数AWS地区(<a class="ae le" href="https://aws-quickstart.github.io/design.html#region-support" rel="noopener ugc nofollow" target="_blank">详情</a>)</li><li id="dfa1" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">新VPC和现有VPC部署选项(<a class="ae le" href="https://aws-quickstart.github.io/design.html#deployment-options" rel="noopener ugc nofollow" target="_blank">详情</a>)</li><li id="d86a" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">私有子网中的产品实例(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#security" rel="noopener ugc nofollow" target="_blank">详细信息</a></li><li id="e689" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">用于私有子网出站互联网访问的NAT网关(<a class="ae le" href="https://aws-quickstart.github.io/templates-examples.html" rel="noopener ugc nofollow" target="_blank">详情</a></li><li id="f254" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">尽可能使用市场AMIs没有预烘焙的ami(<a class="ae le" href="https://aws-quickstart.github.io/use-amis.html" rel="noopener ugc nofollow" target="_blank">细节</a>)</li><li id="3180" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">AMI映射；没有硬编码的ami(<a class="ae le" href="https://aws-quickstart.github.io/use-amis.html" rel="noopener ugc nofollow" target="_blank">细节</a>)</li><li id="d876" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">用户友好的参数标签和组(<a class="ae le" href="https://aws-quickstart.github.io/naming-parms.html" rel="noopener ugc nofollow" target="_blank">详情</a>)</li><li id="414e" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">CIDR封锁外部管理员访问(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#security" rel="noopener ugc nofollow" target="_blank">细节</a></li><li id="665a" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">具有最小特权原则的安全组(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#security" rel="noopener ugc nofollow" target="_blank">详情</a>)</li><li id="a95f" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">没有部署的软件位(<a class="ae le" href="https://aws-quickstart.github.io/design.html#handling-downloads" rel="noopener ugc nofollow" target="_blank">细节</a>)</li><li id="8418" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">无硬编码密码(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#security" rel="noopener ugc nofollow" target="_blank">详情</a>)</li><li id="468a" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">EC2实例用户数据或其他明文中没有敏感数据(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#security" rel="noopener ugc nofollow" target="_blank">详细信息</a>)</li><li id="1e89" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">开放式远程管理访问不使用0 . 0 . 0 . 0/0(<a class="ae le" href="https://aws-quickstart.github.io/best-practices.html#security" rel="noopener ugc nofollow" target="_blank">详情</a>)</li><li id="ba44" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">堆栈外没有自动创建的资源(<a class="ae le" href="https://aws-quickstart.github.io/design.html#error-handling" rel="noopener ugc nofollow" target="_blank">详细信息</a>)</li></ul><p id="6125" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">确实是一份令人印象深刻的名单。如果你使用<em class="nq"> any </em> Quick Start来部署你的基础设施，你可以肯定模板是相当不错的。</p><p id="426d" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">我特别喜欢快速启动生态系统的另一点是<a class="ae le" href="https://aws-quickstart.github.io/design.html#modularity" rel="noopener ugc nofollow" target="_blank">模块化</a>。如果有一个快速入门工具部署了您想要在您的架构中使用的基础设施的一部分(例如<a class="ae le" href="https://github.com/aws-quickstart/quickstart-aws-vpc" rel="noopener ugc nofollow" target="_blank"> VPC快速入门</a>或<a class="ae le" href="https://github.com/aws-quickstart/quickstart-amazon-aurora-postgresql" rel="noopener ugc nofollow" target="_blank"> Aurora PostgreSQL快速入门</a>)，您可以<em class="nq">参考</em>一个现有的实现。这就像在Python或NodeJS中引用一个库，只针对你的CloudFormation模板。这个特性本身就具有突破性，足以改变您使用CloudFormation处理IaC的方式。</p><p id="feea" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">老实说，您创建过多少次模板来配置VPC、子网、路由表、互联网网关、NAT网关、端点等等？不要告诉我你没有梦想过现成的实现，你可以重复使用，而不用重新发明这个轮子？现在你可以了。</p><p id="1c90" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">关于快速起步的最后一点(承诺)。快速入门架构可能非常复杂，尤其是如果您考虑到我们上面提到的模块化方面。在没有可靠的自动化测试框架的情况下，为大型快速启动开发和维护CloudFormation模板可能是一项严肃的任务。AWS快速启动团队认识到了这一挑战，并引入了<a class="ae le" href="https://github.com/aws-ia/taskcat" rel="noopener ugc nofollow" target="_blank"> TaskCat </a>:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/4fc04e8a57df80476e471e119216e40a.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*Ux-e0B3rWkQ1Pv-T.png"/></div></figure><p id="989e" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated"><code class="fe nj nk nl nm b">TaskCat</code>跨多个AWS区域自动执行云信息模板的林挺和部署。这意味着您可以确保您的模板，无论它们有多复杂，都可以成功地部署在目标区域(并被删除——这一点在云形成开发过程中经常被忽略)</p><p id="f98a" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">使用<code class="fe nj nk nl nm b">TaskCat</code>可以定义“测试”，在部署时为云形成提供不同的参数。该工具还可以生成一个通过/失败报告，该报告可以集成到您的CI/CD工具中，因此您可以将测试作为PR验证流程的一部分来运行。</p><blockquote class="nu nv nw"><p id="cee4" class="lx ly nq lz b ma mv ka mc md mw kd mf nx nn mi mj ny no mm mn nz np mq mr ms ij bi translated">即使你不打算为你的IaC使用AWS快速入门，我也推荐将<a class="ae le" href="https://github.com/aws-ia/taskcat" rel="noopener ugc nofollow" target="_blank"> TaskCat </a>整合到你的工作流程中，以自动化测试你的CloudFormation模板。</p></blockquote><h1 id="38dd" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">耶格快速入门</h1><blockquote class="nu nv nw"><p id="9c96" class="lx ly nq lz b ma mv ka mc md mw kd mf nx nn mi mj ny no mm mn nz np mq mr ms ij bi translated">注:这不是官方的<a class="ae le" href="https://aws.amazon.com/quickstart/" rel="noopener ugc nofollow" target="_blank"> AWS快速入门</a>。该项目是根据<a class="ae le" href="https://aws-quickstart.github.io/" rel="noopener ugc nofollow" target="_blank">快速启动贡献者指南</a>构建的，但尚未获得AWS和Jaeger团队的批准。</p></blockquote><p id="1f64" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">现在，一旦我们定义了什么是AWS快速入门，让我最后介绍一下<a class="ae le" href="https://github.com/kolomiets/quickstart-jaeger" rel="noopener ugc nofollow" target="_blank"> Jaeger快速入门</a>！</p><p id="355c" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">Jaeger Quick Start帮助您在亚马逊网络服务(AWS)云上部署一个<a class="ae le" href="https://docs.aws.amazon.com/whitepapers/latest/real-time-communication-on-aws/high-availability-and-scalability-on-aws.html" rel="noopener ugc nofollow" target="_blank">高度可用的</a>Jaeger——开源的端到端分布式追踪平台。</p><p id="3418" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">您可以使用快速入门中包含的AWS CloudFormation模板，在大约10-30分钟内将Jaeger部署到您的AWS帐户中。</p><p id="7bb3" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">该快速入门适用于希望使用<a class="ae le" href="https://aws.amazon.com/cloudformation/" rel="noopener ugc nofollow" target="_blank"> AWS CloudFormation </a>为Jaeger进行可重复、可定制的参考部署的用户。您也可以使用提供的AWS CloudFormation模板作为您自己实现的起点。</p><p id="de25" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">这是快速入门的高级架构图:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oa"><img src="../Images/c2646ed705ee8d67e5681c01d8e90d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HvxrPI6X6l1QEBiRdhsTZw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Jaeger无服务器架构(带弹性搜索后端)</p></figure><p id="f750" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">主要亮点:</p><ul class=""><li id="be39" class="mt mu iq lz b ma mv md mw mg mx mk my mo mz ms na nb nc nd bi translated">快速入门使用<a class="ae le" href="https://aws.amazon.com/fargate/" rel="noopener ugc nofollow" target="_blank">AWS Fargate</a>——无服务器计算引擎，而不是在Kubernetes集群中运行Jaeger容器(伴随着相关的操作复杂性)</li><li id="0a41" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速启动部署所有必需的Jaeger组件(<a class="ae le" href="https://www.jaegertracing.io/docs/1.33/architecture/#collector" rel="noopener ugc nofollow" target="_blank">收集器</a>、<a class="ae le" href="https://www.jaegertracing.io/docs/1.33/architecture/#query" rel="noopener ugc nofollow" target="_blank">查询</a>、<a class="ae le" href="https://github.com/jaegertracing/spark-dependencies" rel="noopener ugc nofollow" target="_blank">依赖火花作业</a>，并对它们进行适当的配置</li><li id="3dde" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速入门支持两种不同的存储后端，即适用于大规模生产部署的<a class="ae le" href="https://aws.amazon.com/opensearch-service/" rel="noopener ugc nofollow" target="_blank"> Amazon OpenSearch </a>集群和适用于实验和概念验证工作负载的内存存储</li><li id="76c6" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速入门在公共VPC子网中部署<a class="ae le" href="https://aws.amazon.com/elasticloadbalancing/network-load-balancer/" rel="noopener ugc nofollow" target="_blank">网络负载平衡器</a>来分配流量并暴露必要的Jaeger端口。负载平衡器可以是面向互联网的，也可以是内部的，只有VPC客户端可以访问</li><li id="73ec" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速入门提供了为Jaeger实例分配DNS名称的选项。支持公共和私有的<a class="ae le" href="https://aws.amazon.com/route53/" rel="noopener ugc nofollow" target="_blank"> Amazon Route 53 </a>托管区域。</li><li id="0b6d" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速入门与<a class="ae le" href="https://aws.amazon.com/certificate-manager/" rel="noopener ugc nofollow" target="_blank"> AWS证书管理器</a>集成，将TLS添加到网络负载平衡器</li><li id="1edc" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速入门支持与亚马逊普罗米修斯托管服务的集成</li><li id="92b1" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated">快速入门添加了一个与<a class="ae le" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ContainerInsights.html" rel="noopener ugc nofollow" target="_blank">cloud watch Container Insights</a>的可选集成，以监控Fargate上运行的Jaeger容器的指标</li></ul><p id="a824" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">在<a class="ae le" href="https://kolomiets.github.io/quickstart-jaeger/" rel="noopener ugc nofollow" target="_blank"> Jaeger快速启动部署指南</a>中可以找到关于特性、架构决策和完整参数参考的详细解释。</p><h1 id="c4b0" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">下一步是什么？</h1><p id="a912" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">Jaeger Quick Start是一个新项目——在最初的版本中，我专注于支持两个存储后端(OpenSearch和in-memory ),因此，架构略有不同。我已经整理了<a class="ae le" href="https://github.com/users/kolomiets/projects/1/views/1" rel="noopener ugc nofollow" target="_blank"> Jaeger快速启动路线图</a>并提出了一些<a class="ae le" href="https://github.com/kolomiets/quickstart-jaeger/issues" rel="noopener ugc nofollow" target="_blank"> GitHub问题</a>来指明我下一步要去哪里。我下一个里程碑的重点是性能评估、默认参数的微调和文档改进。最终，我计划添加对另一个流行的Jaeger存储后端的支持——Cassandra，或者在AWS的托管服务世界中,<a class="ae le" href="https://aws.amazon.com/keyspaces/" rel="noopener ugc nofollow" target="_blank"> Amazon Keyspaces </a>。</p><p id="ab7a" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">如果您有在AWS上部署和运行Jaeger的经验，或者想以任何方式做出贡献，请联系我们。特别欢迎你遇到的趣闻轶事和任何痛点！</p><p id="6b84" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">在我结束这篇文章之前，让我把Jaeger Quick Start放在本系列<a class="ae le" href="https://medium.com/@dmitrykolomiets/list/musings-on-tracing-3d7bd0d2093c" rel="noopener">的更广泛的背景中，即它如何对我们的事件驱动架构的OpenTelemetry之旅有用？</a></p><p id="e6a8" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">通过一种简单的方法将Jaeger部署到AWS环境中，您可以<em class="nq">补充</em>(甚至<em class="nq">替换</em> ) AWS X-Ray作为您的目标遥测后端，用于应用程序跟踪。事实上，你可以一起使用Jaeger和AWS X-Ray，并排运行它们——事实上，我非常推荐这种方法来实际查看两个平台的运行情况，并做出明智的决定，确定哪一个最适合你的需求。</p><p id="5d81" class="pw-post-body-paragraph lx ly iq lz b ma mv ka mc md mw kd mf mg nn mi mj mk no mm mn mo np mq mr ms ij bi translated">这正是我们将在下一篇文章中涉及的内容——并排运行两个平台，讨论支持Jaeger所需的ADOT配置更改，比较结果跟踪，并概述两个平台之间的主要差异。</p><h1 id="d358" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">资源</h1><ul class=""><li id="6229" class="mt mu iq lz b ma mb md me mg ob mk oc mo od ms na nb nc nd bi translated"><strong class="lz ja">我们上面讨论的Jaeger快速入门</strong>项目在<a class="ae le" href="https://github.com/kolomiets/quickstart-jaeger" rel="noopener ugc nofollow" target="_blank"><strong class="lz ja">kolomiets/Quick Start-Jaeger</strong></a>GitHub资源库中</li><li id="e7f2" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated"><a class="ae le" href="https://kolomiets.github.io/quickstart-jaeger/" rel="noopener ugc nofollow" target="_blank"> Jager快速启动部署指南</a></li><li id="a499" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated"><a class="ae le" href="https://aws.amazon.com/quickstart/?solutions-all.sort-by=item.additionalFields.sortDate&amp;solutions-all.sort-order=desc&amp;awsf.filter-content-type=*all&amp;awsf.filter-tech-category=*all&amp;awsf.filter-industry=*all" rel="noopener ugc nofollow" target="_blank">官方AWS快速入门</a>注册表，即您可以使用的构建模块</li><li id="87cd" class="mt mu iq lz b ma ne md nf mg ng mk nh mo ni ms na nb nc nd bi translated"><a class="ae le" href="https://aws-quickstart.github.io/" rel="noopener ugc nofollow" target="_blank">快速启动投稿人指南</a> —关于如何创建新的快速启动的文档</li></ul></div></div>    
</body>
</html>