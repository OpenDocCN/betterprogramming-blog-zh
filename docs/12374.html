<html>
<head>
<title>Build a Folding Scroll With PageView Builder in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中使用页面视图构建器构建折叠卷轴</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/custom-horizontal-scroll-with-pageview-builder-10604dad3b30?source=collection_archive---------3-----------------------#2022-06-01">https://betterprogramming.pub/custom-horizontal-scroll-with-pageview-builder-10604dad3b30?source=collection_archive---------3-----------------------#2022-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="75c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">类似路易威登的UI</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/07e5d5c2d3524ce62ae44714f8d0911c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6SorIHZUM47CE9BU"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@taypaigey?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰勒·威尔科克斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="eed2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将创建一个类似于路易威登手机应用程序的水平滚动列表视图。</p><p id="76a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终的应用程序如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/c727c5dabfcad2f7db34b77bfd792cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/1*3PYLUbGIgGSIlttUDz5snw.gif"/></div></figure><h2 id="5c88" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">视频教程</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">折叠滚动视图</p></figure><p id="acd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在深入研究编码之前，让我们讨论一下这个应用程序中将要使用的小部件。</p><h1 id="c289" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">页面视图</h1><p id="5fd3" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated"><code class="fe ne nf ng nh b">PageView</code>是一个小部件，它生成可滚动的屏幕页面。页面可以是由构建器功能构建的固定页面或重复页面。</p><p id="3b45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">PageView</code>的行为类似于<code class="fe ne nf ng nh b">ListView</code>构造元素。<code class="fe ne nf ng nh b">PageView</code>还允许用户在Flutter应用程序的不同屏幕之间切换。</p><h2 id="68ec" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated"><strong class="ak">页面视图类的构造函数</strong></h2><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="4f71" class="lt lu iq nh b gy nm nn l no np">PageView({Key key, <br/>Axis scrollDirection, <br/>bool reverse, <br/>PageController controller, <br/>ScrollPhysics physics, <br/>bool pageSnapping, <br/>void Function(int) onPageChanged, <br/>List&lt;Widget&gt; children, <br/>DragStartBehavior dragStartBehavior, <br/>bool allowImplicitScrolling})</span></pre><p id="ac16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">浏览量控件属性:</strong></p><ul class=""><li id="0e37" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">scrollDirection</code>:定义页面在哪个轴上滚动，即垂直还是水平</li><li id="b29f" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">reverse</code>:定义滚动方向。默认情况下，它被设置为false。</li><li id="d3eb" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">controller</code>:它让我们操纵哪个页面在<code class="fe ne nf ng nh b">PageView</code>中可见。</li><li id="b2e4" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">physics</code>:它定义了当页面不能被拖动时，如何在页面端点动画化。</li><li id="5fbe" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">pageSnapping</code>:对自定义滚动行为很有用。它接受布尔值。</li><li id="1fe5" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">onPageChanged</code>:页面发生变化时触发的功能。</li><li id="cb16" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">children</code>:保存小部件列表。</li><li id="8561" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">dragStartBehaviour</code>:该属性保存<code class="fe ne nf ng nh b">DragStartBehavior</code> enum (final)作为对象。它控制拖动行为开始注册的方式。</li><li id="010a" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">allowImplicitScrolling</code>:该属性接受一个<em class="oe">布尔值</em>作为对象。它控制是否将隐式滚动分配给小部件的页面。</li></ul><h1 id="f344" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">PageView.builder</h1><p id="7ffb" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">PageView.builder创建一个可滚动列表，使用按需创建的小部件逐页工作。</p><p id="258a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此构造函数适用于具有大量(或无限)子级的页面视图，因为只为那些实际可见的子级调用构建器。</p><p id="13df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提供一个非空的<code class="fe ne nf ng nh b">itemCount</code>让<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/PageView-class.html" rel="noopener ugc nofollow" target="_blank">页面视图</a>计算最大滚动范围。</p><h2 id="eda5" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated"><strong class="ak">pageview . builder小工具的属性</strong></h2><p id="0250" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">它拥有浏览量的所有属性，也有自己的一些属性。</p><ul class=""><li id="1e9a" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">itemBuilder</code>:只有大于等于零且小于<code class="fe ne nf ng nh b">itemcount</code>的指标才会被调用。</li><li id="8223" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">restoralionID</code>:<code class="fe ne nf ng nh b">restorationID</code>接受一个字符串作为对象。它用于保存滚动位置并在以后恢复它。</li><li id="8ca0" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">clipBehaviour</code>:根据该选项内容将被裁剪(或不被裁剪)。</li><li id="96a8" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><code class="fe ne nf ng nh b">padEnds</code>:列表两端是否加填充。</li></ul><h1 id="fd14" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">堆</h1><p id="3e2f" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">Stack是Flutter SDK的一个内置小部件，它允许用户将小部件放置在彼此之上，从而形成小部件层。第一个小部件是<code class="fe ne nf ng nh b">bottommost</code>项，<code class="fe ne nf ng nh b">lastwidget</code>是<code class="fe ne nf ng nh b">topmost</code>项。</p><p id="cca9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">堆栈小部件的一些要点是:</p><ul class=""><li id="5b77" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated">堆栈中的子级可以是定位的，也可以是非定位的。</li><li id="a99c" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">定位的子元素是那些包装在至少有一个非空属性的<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/Positioned-class.html" rel="noopener ugc nofollow" target="_blank">定位的</a>小部件中的元素。</li><li id="75ed" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">堆栈调整自身大小以包含所有未定位的子元素，这些子元素根据<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/Stack/alignment.html" rel="noopener ugc nofollow" target="_blank">对齐方式</a>进行定位(在从左到右的环境中默认为左上角，在从右到左的环境中默认为右上角)。</li><li id="34e3" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">然后，根据它们的top、right、bottom和left属性，相对于堆栈放置定位的子元素。</li><li id="81fe" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">alignment属性可用于更改小部件的对齐方式。</li></ul><h1 id="15da" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">让我们开始吃吧</h1><p id="4b4c" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">首先，我们创建将在我们的应用程序中使用的数据。</p><p id="acf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ne nf ng nh b">lib</code> <strong class="ky ir"> <em class="oe"> </em> </strong>文件夹内创建<code class="fe ne nf ng nh b">dummy_data.dart</code> <strong class="ky ir"> <em class="oe"> </em> </strong>。在这里，我们放置项目的数组。</p><p id="bbcb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">dummy_data.dart</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of mn l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">哑_数据.镖</p></figure><p id="9311" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据已经准备好了，现在让我们创建将成为页面视图项目的小部件。在<code class="fe ne nf ng nh b">lib</code> <strong class="ky ir"> <em class="oe"> </em> </strong>文件夹内创建<code class="fe ne nf ng nh b">page_view_item.dart</code> <strong class="ky ir"> <em class="oe"> </em> </strong>。</p><p id="2642" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">page_view_item.dart</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of mn l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">page_view_item .镖</p></figure><p id="fb48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">继续前进我们创建我们的<code class="fe ne nf ng nh b"><strong class="ky ir">homepage.dart</strong></code> <strong class="ky ir"> <em class="oe"> </em> </strong>文件:</p><p id="6108" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们配置我们的页面视图，并创建提供<code class="fe ne nf ng nh b">viewportFraction</code>的<code class="fe ne nf ng nh b">PageController</code>。</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="7a98" class="lt lu iq nh b gy nm nn l no np">final _controller = PageController(    viewportFraction: 0.5,  );</span></pre><h2 id="28a9" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated"><strong class="ak"> ViewPortFraction </strong></h2><p id="1cf8" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">它定义了每个页面应该占据的视窗部分。默认为1.0，这意味着每页在滚动方向上填充视口。</p><p id="66af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们的控制器设置好了，我们就可以计算页面视图的单个项目的宽度。</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="4f08" class="lt lu iq nh b gy nm nn l no np">late final _itemWidth =MediaQuery.of(context).size.width * _controller.viewportFraction;</span></pre><p id="f7eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们初始化<code class="fe ne nf ng nh b">initState</code>内部的控制器。</p><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="d8fc" class="lt lu iq nh b gy nm nn l no np">@override  void initState() {    <br/>super.initState();<br/>_controller.addListener(() =&gt; setState(() {          <br/>_page = _controller.page!;        <br/>}));  }</span></pre><p id="20af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我们的<code class="fe ne nf ng nh b">homepage.dart</code>文件的样子。</p><p id="f2fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">homepage.dart</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of mn l"/></div></figure><h1 id="1359" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">让我们连接起来</h1><p id="6b3b" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">我们可以成为朋友。在<a class="ae kv" href="https://www.facebook.com/nabin.dhakal.714/" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae kv" href="https://www.linkedin.com/in/nabindhakal/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>、<a class="ae kv" href="https://github.com/nbnD" rel="noopener ugc nofollow" target="_blank"> Github </a>、<a class="ae kv" href="https://www.youtube.com/channel/UCW6oYt_3QSl7J2HSHNqwXWw" rel="noopener ugc nofollow" target="_blank"> Youtube </a>、<a class="ae kv" href="https://www.buymeacoffee.com/nabindhakal" rel="noopener ugc nofollow" target="_blank"> BuyMeACoffee </a>和<a class="ae kv" href="https://www.instagram.com/nbn_d_/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上查找。</p><p id="64cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">访问:<a class="ae kv" href="https://flutterjunction.com/" rel="noopener ugc nofollow" target="_blank">颤振连接</a></p><p id="cfe1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">投稿:</strong> <a class="ae kv" href="https://www.buymeacoffee.com/nabindhakal" rel="noopener ugc nofollow" target="_blank"> BuyMeACoffee </a></p><h1 id="f85d" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">结论</h1><p id="163e" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">希望这篇文章对你有所帮助，让你学到新的东西。我在这篇文章中使用了一些对你们中的一些人来说可能是新的东西。</p><div class="og oh gp gr oi oj"><a href="https://github.com/nbnD/lvscroll" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">GitHub - nbnD/lvscroll</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">github.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kp oj"/></div></div></a></div><pre class="kg kh ki kj gt ni nh nj nk aw nl bi"><span id="2152" class="lt lu iq nh b gy nm nn l no np"><strong class="nh ir">Want to Connect?</strong></span><span id="b21e" class="lt lu iq nh b gy oy nn l no np">Find me on <a class="ae kv" href="https://www.facebook.com/nabin.dhakal.714/" rel="noopener ugc nofollow" target="_blank">Facebook</a>, <a class="ae kv" href="https://www.linkedin.com/in/nabindhakal/" rel="noopener ugc nofollow" target="_blank">Linkedin</a>, <a class="ae kv" href="https://github.com/nbnD" rel="noopener ugc nofollow" target="_blank">Github</a>, <a class="ae kv" href="https://www.instagram.com/nbn_d_/" rel="noopener ugc nofollow" target="_blank">Instagram</a>.</span></pre></div></div>    
</body>
</html>