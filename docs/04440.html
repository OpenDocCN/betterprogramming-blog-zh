<html>
<head>
<title>How to Take UI Debugging to the Next Level With LLDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用LLDB将UI调试提升到一个新的水平</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-take-ui-debugging-to-the-next-level-with-lldb-aaeaa76eb910?source=collection_archive---------19-----------------------#2020-04-13">https://betterprogramming.pub/how-to-take-ui-debugging-to-the-next-level-with-lldb-aaeaa76eb910?source=collection_archive---------19-----------------------#2020-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a5cd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">评估语句、查找内存地址等等</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0f45e2d256e985d3140284ec1d198b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnFN7fiFBvjUvccy0eOZIQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者照片。</p></figure><p id="1233" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您还不熟悉的话，<a class="ae lr" href="https://lldb.llvm.org/" rel="noopener ugc nofollow" target="_blank"> LLDB </a>是LLVM中使用的调试器工具。如果你做过iOS或Mac开发，你会知道它是控制台中的调试工具。</p><p id="f55e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我刚开始iOS开发时，我的技术主管演示了如何<em class="ls"> po </em>一个对象。换句话说，就是打印变量<em class="ls">的值。</em>很长一段时间，这就是我用它的全部目的，也是我认为它能做的全部事情。然而，我最近发现它比我想象的要强大得多。</p><p id="f35c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您是否遇到过约束冲突，无法确定哪个屏幕或UIView受到了影响？你曾经想要在运行时调试一个可视化组件的属性，但是你不能吗？你并不孤单。我经常发现自己想要研究视图、层或动画属性的自定义属性，但由于Xcode的视图层次调试器的有限功能而无法实现。好吧，如果你想知道你能调试这些，继续读下去。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="d56e" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">用LLDB编写基本表达式</h1><p id="b362" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">在深入之前，我将快速介绍如何使用LLDB在Swift中编写表达式。首先，您希望通过使用Xcode中的暂停按钮、单击查看调试层次结构或点击断点来暂停代码执行。通过使用<code class="fe mx my mz na b">expression</code>或<code class="fe mx my mz na b">e</code>关键字后跟<code class="fe mx my mz na b">--</code>来编写命令，可以开始编写表达式。由于本教程将使用Swift，我们将使用可选的<code class="fe mx my mz na b">-l</code>标志将语言设置为Swift，如下所示:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="cb7b" class="nf mb iq na b gy ng nh l ni nj">(lldb) expression -l Swift -- print("Hello world")</span><span id="c5af" class="nf mb iq na b gy nk nh l ni nj">// Or for shorthand abbreviate `expression` to `e`.</span><span id="d768" class="nf mb iq na b gy nk nh l ni nj">(lldb) e -l Swift -- print("Hello world")</span></pre><p id="b1b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">需要注意的是，Foundation是运行时唯一导入的库，所以如果我们想使用另一个库(例如<code class="fe mx my mz na b">UIKit</code>，我们稍后会用到它)，那么我们需要导入:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="8759" class="nf mb iq na b gy ng nh l ni nj">(lldb) e -l Swift -- import UIKit</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="8c73" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">如何找到UI组件的内存地址</h1><p id="163a" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">因为我们使用的是命令行调试器，所以我们必须首先获得我们想要检查的UI组件的内存地址。这可能是一个中断的约束，或者是一个已经在控制台中打印了内存地址的视图，如下所示。或者，您可能希望从视图层次结构调试器或手动打印的语句中获得它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/ae28fbd42e4bfa5a7b7a8c33752e5ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xZtNV_YdEgEqka86g7jywQ.png"/></div></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="9aed" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">在运行时改变和检查用户界面</h1><p id="0155" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">在Swift中，有一个功能叫做<code class="fe mx my mz na b"><a class="ae lr" href="https://developer.apple.com/documentation/swift/1641250-unsafebitcast" rel="noopener ugc nofollow" target="_blank">unsafeBitCast(_:to:)</a></code>。当给定内存地址和类类型时，它可以返回对象。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1642" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们有了对对象的引用，我们可以从对象中进行以下任何基本的读或写操作。请注意，如果您改变了UI，您必须恢复执行，以便主线程可以进行适当的更改。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="5b3b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还可以使用它来查看和修改约束，以帮助在运行时修复冲突:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="8b4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者通过导入应用程序的主要目标与您自己的视图进行交互:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="afb0" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">摘要</h1><p id="ca61" class="pw-post-body-paragraph kv kw iq kx b ky ms jr la lb mt ju ld le mu lg lh li mv lk ll lm mw lo lp lq ij bi translated">这是一个非常强大的工具，可以让你做任何你通常会做的事情，但是是在运行时。我发现这在与需要大量导航开销的视图控制器一起使用时影响最大(例如，在注册流程的末尾)。通过理解能够改变和验证更改的运行时状态，您可以最小化重新编译和导航回屏幕以验证更改的开销。</p><p id="0d24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">希望这有助于让你的UI调试更容易！</p></div></div>    
</body>
</html>