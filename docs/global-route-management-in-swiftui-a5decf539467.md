# SwiftUI 中的全球路线管理

> 原文：<https://betterprogramming.pub/global-route-management-in-swiftui-a5decf539467>

## 使得在不同状态的屏幕之间导航更加容易

![](img/13bfe840e068f8e634fa1587551b1480.png)

在社交网站上为[蒂亚戈·阿吉亚尔](https://unsplash.com/@tiagoaguiar)大声喊出来，或者复制下面的文字进行归因。

当使用 React.js 或 Flutter 应用程序时，开发人员可以在一个中心位置配置他们的路线。这就创建了一个单点更改，可以在这里更新现有路由并添加新路由。

不幸的是，SwiftUI 不提供全球路线管理系统。在 SwiftUI 应用中，路线分散在每个视图中，这使得它们更难重用，也是维护的噩梦。

在本文中，我将演示如何为 SwiftUI 应用程序实现一个简单的全局路线管理系统。希望我们能在未来的版本中看到 Swift 团队推出更全面的系统。

# 理解问题

在深入研究全球航线管理系统的实现细节之前，让我们先来理解这个问题。考虑一个简单的主从视图场景。主视图显示一个国家列表，当选择一个特定的国家时，用户将被带到详细信息屏幕。该场景的实现如下所示:

每个列表项都嵌入在一个`NavigationLink`组件中，这使得它可以导航到`DetailView`。

这一切都像预期的那样工作，但是当我们想要从不同的视图执行相同的导航时，问题就出现了。我们将被迫复制`NavigationLink`代码，并将其放置在新视图中。这也意味着如果导航目的地改变，我们必须更新两个视图。

现在您已经理解了问题，让我们看看如何为 SwiftUI 应用程序实现路由系统。

# 航海家

走向全球路线统治的第一步是创建一个`Navigator`类，它将作为整个应用程序的导航系统。`Navigator`将配置与项目相关的所有路线。路线由`Route`枚举定义，如下图所示:

接下来，每当视图需要访问不同的屏幕时，`Navigator`类执行`navigate`函数。`navigate`功能检查所选择的路线，并采取适当的行动使用`NavigationLink`进行导航。这显示在下面的实现中:

`navigate`函数有两个参数。第一个参数是目的地路线，第二个参数是显示给用户的内容。在`navigate`函数中，我们调用`NavigationLink`，并向其传递适当的视图和任何参数。最后，我们还使用由调用者传递的内容闭包参数来提供`NavigationLink`标签。

最后，调用者可以使用`Navigator`来执行导航，如下面的代码所示:

相同的导航可以通过点击按钮而不是从列表中选择项目来执行。

`Navigator`类允许我们重用导航代码，而无需复制它。这个小的`Navigator`类可以帮助未来的更新，并可以作为 SwiftUI 应用程序中的全局路由系统。

完整的代码如下所示:

# 结论

在本文中，您了解了如何开始为 SwiftUI 应用程序构建一个简单的全局路由系统。大多数现代声明性框架中都有全局路由，包括 React 和 Flutter，希望有一天它会被添加到 SwiftUI 中。