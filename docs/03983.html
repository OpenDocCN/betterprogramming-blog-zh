<html>
<head>
<title>How to Debug a React Context API App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何调试React上下文API应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-debug-a-react-context-api-app-547b75818754?source=collection_archive---------4-----------------------#2020-03-17">https://betterprogramming.pub/how-to-debug-a-react-context-api-app-547b75818754?source=collection_archive---------4-----------------------#2020-03-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d461" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Redux DevTools扩展</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7c16ff0b3bf4ac02b4aae40e4c6c8a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fOZCyvfBcdHuXOQk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@barnimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">谷仓图像</a>拍摄的照片。</p></figure><p id="d589" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前段时间，我分享了当我创建一个React应用程序时，我是如何为上下文API 放弃Redux的。这篇文章得到了一些很好的反馈，但也有人说与<a class="ae ky" href="https://github.com/reduxjs/redux-devtools" rel="noopener ugc nofollow" target="_blank"> Redux DevTools </a>相比，它很难调试，并问我是否有一种简单的方法来做这件事。</p><p id="2e3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">答案是肯定的。实际上，如果Redux有什么了不起的，那就是DevTools。最棒的是，我们可以用我们的Redux-free应用程序轻松地将它们与我们喜欢的一切联系起来，真的。</p><p id="d7b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看它是如何工作的！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="edfd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Redux开发工具API</h1><p id="8a8b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当我们安装了Redux DevTools后，扩展会自动在窗口中注入一个特殊的对象(<code class="fe mz na nb nc b">__REDUX_DEVTOOLS_EXTENSION__</code>)。这当然是一个奇怪的名字，但是它防止了与现有代码的任何冲突。</p><p id="5641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是一切开始的地方:这个对象给了我们需要的一切— <code class="fe mz na nb nc b">connect</code>和<code class="fe mz na nb nc b">disconnect</code>方法，它们将我们的代码与Redux DevTools链接起来。</p><p id="b84c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果您只是尝试运行这些函数，您仍然会在DevTools中看不到任何内容，因为我们首先需要启动会话。</p><p id="127d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们利用返回<code class="fe mz na nb nc b">connect</code>方法的对象。它拥有启动DevTools会话的init方法。</p><p id="8955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，它看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">简单的Redux DevTools连接。</p></figure><p id="f368" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使这样做了，您仍然在DevTools中看不到任何东西，因为会话在我们创建时就被关闭了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="29e1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">DevTools提供者</h1><p id="d351" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了在开发应用程序时使会话永久化，您需要一个<code class="fe mz na nb nc b">Provider</code>，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个基本的Redux DevTools提供程序。</p></figure><p id="cbe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您将这段代码添加到应用程序的最顶层，您将在Redux DevTools中看到启动会话，您可以用弹出的<code class="fe mz na nb nc b">@@INIT</code>事件来识别它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/b156ecd1cec639e107e0c6e9ea81f835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1_Ee-Cxvnmx1bAgstmX3jA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弹出的INIT事件。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5b4e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">向DevTools发送事件</h1><p id="6c0e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">既然我们已经能够启动一个会话，下一步就是向DevTools发送一个事件，这和我们想象的一样简单:我们已经创建的<code class="fe mz na nb nc b">devTools</code>对象也提供了一个<code class="fe mz na nb nc b">send</code>方法，它接受一个名称和一些数据来说明变化。</p><p id="e5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，它看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带有发送事件的简单Redux DevTools连接。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4cfa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">把所有东西放在一起</h1><p id="9fc6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们现在拥有一切让它运转起来的东西。我们将在我们的<code class="fe mz na nb nc b">Provider</code>中添加一些东西来使它真正可用:</p><ul class=""><li id="c4c7" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">一个钩子，允许简单的事件发送到DevTools会话。</li><li id="6bf9" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">一个上下文API，因此DevTools可以在整个项目中使用。</li><li id="b2f4" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">使用默认名称值的简单发送方法。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="67a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在在应用程序中使用非常简单。我们需要调用我们在<code class="fe mz na nb nc b">Provider</code>文件中创建的<code class="fe mz na nb nc b">useReduxDevtools</code>钩子，将初始方法包装成一个处理调试会话的高阶函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">看看第10行是如何调用useReduxDevtools的。</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/7ba72f35b2b89d40796e980c72aed0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZRD7PZ36M_dTOFaRBU6aRQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">瞧，Redux DevTools中的上下文API！</p></figure><p id="cc0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当我们调用<code class="fe mz na nb nc b">setTheme</code>方法时，它会在DevTools中弹出，这样您就可以检查正在发生什么了！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b477" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="1880" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">将任何应用程序连接到Redux DevTools非常容易，并且您现在就可以开始调试任何没有Redux的应用程序。</p><p id="edb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，让我们重温一下我在上一篇文章中说过的关于上下文API的一些内容:这是一个易于使用的API，在许多情况下可以取代Redux，但请记住，Redux比上下文API大得多。如果你需要做出改变，明智地选择。</p></div></div>    
</body>
</html>