<html>
<head>
<title>How to Create an Esoteric Programming Language From the Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从头开始创建一门深奥的编程语言</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-an-esoteric-programming-language-from-the-scratch-b93433a3e798?source=collection_archive---------10-----------------------#2022-01-04">https://betterprogramming.pub/how-to-create-an-esoteric-programming-language-from-the-scratch-b93433a3e798?source=collection_archive---------10-----------------------#2022-01-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0db5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们从定义语言的基础开始</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4b8df612e336faed8e0af2cc80c1be81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H7qENXYVGxTBjT5Y"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mourimoto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">穆里扎尔·扎蒂瓦</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="717e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们都熟悉编程语言，但是深奥的编程语言和普通的编程语言有什么区别呢？<a class="ae ky" href="https://en.wiktionary.org/wiki/esoteric" rel="noopener ugc nofollow" target="_blank">深奥</a>意思是某件事理论性很强，没有任何明显的实际应用。这就是深奥的编程语言的情况，也称为esolangs，它主要是作为概念证明或笑话而设计的，并不打算用于工业软件。</p><p id="01a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最著名的esolangs之一是<a class="ae ky" href="https://en.wikipedia.org/wiki/Brainfuck" rel="noopener ugc nofollow" target="_blank"> Brainfuck </a>，这是一个极其简单的8个命令、一个数据指针和一个指令指针的集合。尽管它有明显的可用性限制，但它仍然是<a class="ae ky" href="https://en.wikipedia.org/wiki/Turing_completeness" rel="noopener ugc nofollow" target="_blank">图灵完备的</a>，这意味着它可以被用来寻找任何问题的解决方案，只要它可以通过算法来解决。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/51708fedbe2ed9fcf64c0bd90da5ce99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZRc-X9oBf0TsNWejZeyZQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自维基百科的脑残例子。</p></figure><p id="7af1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将从头开始创建一个新的esolang。在下面的文章中，我将展示如何通过为它编写解释器来用代码实现它。</p><h2 id="c048" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">如何创建一门深奥的编程语言</h2><p id="3db9" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">在跳到键盘上开始编程语言实现之前，您必须首先定义它应该是什么样子。创建编程语言有三个主要步骤:</p><ul class=""><li id="dc22" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">定义语法和句法规则，或者如何在句子中使用标识符、运算符和其他<a class="ae ky" href="https://en.wikipedia.org/wiki/Lexeme" rel="noopener ugc nofollow" target="_blank">词汇</a>。</li><li id="5fc6" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">通过赋予诸如<code class="fe ni nj nk nl b">if</code>、<code class="fe ni nj nk nl b">while</code>之类的单词或诸如<code class="fe ni nj nk nl b">+</code>和<code class="fe ni nj nk nl b">-</code>之类的算术运算符特殊的含义来构建语言词典。</li><li id="f7cc" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">定义语言的行为方式。你可能也听说过<a class="ae ky" href="https://en.wikipedia.org/wiki/Undefined_behavior" rel="noopener ugc nofollow" target="_blank">未定义行为</a>，意思是<a class="ae ky" href="https://en.wikipedia.org/wiki/Programming_language_specification" rel="noopener ugc nofollow" target="_blank">语言规范</a>没有说明操作的结果会是什么。</li></ul><p id="d1d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经记住了这三点，是时候开始创造我们新的esolang了。首先，我们来写一个编程语言中最标志性的语句的草图:变量声明和定义。</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="99a7" class="lw lx it nl b gy nq nr l ns nt">;39 = number<br/>;"hello world" = string</span><span id="31c5" class="lw lx it nl b gy nu nr l ns nt">\\ In general, &lt;value&gt; = &lt;identifier&gt;<br/>\\ This is a comment in reverse, btw</span></pre><p id="0d71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能认识到这种模式是您在大多数编程语言中会发现的，但是反过来了。我个人喜欢它，所以我们将坚持在每个语句的开头使用分号。为了简单起见，我还会保持它的动态类型。</p><h2 id="b48b" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">算术和逻辑</h2><p id="34d9" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">每种编程语言都必须包含一些执行计算的方法。我是这样想的:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="f9d1" class="lw lx it nl b gy nq nr l ns nt">;a b +<br/>;a b -<br/>;a b *<br/>;a b /<br/>;a b %<br/>;a ++<br/>;b --</span></pre><p id="a0ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是布尔逻辑陈述:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="99e8" class="lw lx it nl b gy nq nr l ns nt">;a b &amp;&amp;<br/>;a b ||<br/>;a !</span></pre><p id="8c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比较运算符遵循相同的模式:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="ac0a" class="lw lx it nl b gy nq nr l ns nt">;a b &lt;<br/>;a b &gt;<br/>;a b ==<br/>;a b !=<br/>;a b &lt;=<br/>;a b &gt;=</span></pre><p id="fc0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一般来说，算术运算符、逻辑运算符和比较运算符的操作数在左边，而赋值运算符则交换操作数。</p><h2 id="46af" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">函数定义和调用</h2><p id="d0fa" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">函数是编程的主要部分，为什么不把它们加入我们的语言中呢？既然一切都已经乱了套，让我们来点更奇怪的:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="d16e" class="lw lx it nl b gy nq nr l ns nt">{<br/>  ;return result<br/>  ;a b + c + = sum<br/>  ;sum 3 / = result<br/>} (a, b, c) average</span></pre><p id="5022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数开头的Return语句，太棒了！还有一个函数调用的例子:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="59bc" class="lw lx it nl b gy nq nr l ns nt">;(4, 5, 6)average    \\ Returns 5</span></pre><h2 id="8e33" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">控制流</h2><p id="fa0a" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">为了让一门语言有任何用处，有必要能够根据情况改变程序的行为。这就是控制流操作符派上用场的地方。与算术和逻辑运算符一样，控制流运算符的参数也在左边:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="6e1d" class="lw lx it nl b gy nq nr l ns nt">{<br/>  \\ Code in the if body<br/>} &lt;condition&gt; if<br/>{<br/>  \\ Code in the else body<br/>} else</span></pre><p id="513f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了完整起见，我们还包括while循环，但不包括for循环:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="f2d6" class="lw lx it nl b gy nq nr l ns nt">{<br/>  \\ Code in the while body<br/>} &lt;condition&gt; while</span></pre><h2 id="6217" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">原始数据类型</h2><p id="a529" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">语言必须包括分类它们名字的方法。原始数据类型正是为此服务的。对于这个esolang，我决定只提供一些基本类型:数字、字符串、布尔值、数组和null。</p><p id="e376" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数字、字符串和null不需要表示，因为它们和其他编程语言一样。数组会从2开始，而不是从0开始。为什么？它不应该有逻辑上的原因。</p><p id="263a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至于布尔值，为了增加一点变化，字面量<code class="fe ni nj nk nl b">true</code>计算为<code class="fe ni nj nk nl b">0</code>,<code class="fe ni nj nk nl b">false</code>计算为<code class="fe ni nj nk nl b">1</code>。</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="1373" class="lw lx it nl b gy nq nr l ns nt">;0 = number</span><span id="577b" class="lw lx it nl b gy nu nr l ns nt">;"hello world!" = string</span><span id="4543" class="lw lx it nl b gy nu nr l ns nt">;[0, 1, 2, "hello"] = array<br/>;array 2 [] \\ Access array element at index 2 (really 0)</span><span id="7f08" class="lw lx it nl b gy nu nr l ns nt">;true = booleanTrue<br/>;false = booleanFalse</span><span id="87c7" class="lw lx it nl b gy nu nr l ns nt">;null = nullVariable</span></pre><h2 id="4a27" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">运算符优先级</h2><p id="d374" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">这是编程语言的一个关键方面。它意味着给某些操作比其他操作更高的优先级，就像乘法在加法之前执行一样。</p><p id="7db5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为这种语言已经相当混乱了，所以我将使用这种直观的类似C的优先级方案，首先计算优先级最高的操作符。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/55034e6120f020f63bc06be89dfa8689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cd5-6bzOCKzf0vTPB4d-vQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">运算符优先级方案。</p></figure><h2 id="2a99" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">领域</h2><p id="a546" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">大多数现代编程语言都有一个作用域系统。一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Scope_(computer_science)" rel="noopener ugc nofollow" target="_blank">作用域</a>是程序的一部分，其中一个名字，比如一个变量或者一个函数，是有效的并且可以被访问。</p><p id="252c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个esolang，我想借用函数式编程中的非全局范围系统。这里有一个简单的例子:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="4229" class="lw lx it nl b gy nq nr l ns nt">;3 = var<br/>\\ "var" is valid in the global scope</span><span id="2d2c" class="lw lx it nl b gy nu nr l ns nt">{<br/>  \\ "var" is not valid anymore in this local scope<br/>  <br/>  \\ this "var" is the local variable<br/>  ;2 = var<br/>} () function</span><span id="7d84" class="lw lx it nl b gy nu nr l ns nt">\\ "var" is still 3 in the global scope</span></pre><p id="5570" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数范围由花括号分隔。请注意，控制流操作符不会将新的范围推送到堆栈，因此下面的代码完全有效:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="27e5" class="lw lx it nl b gy nq nr l ns nt">;0 = var<br/>{<br/>  ;1 += var<br/>} var 0 == if</span></pre><p id="8d74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，花括号内声明的变量可以从if语句体外部访问，这与Python非常相似。</p><h2 id="aaa4" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">内置的</h2><p id="6e2b" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">语言给使用者创造词汇和赋予词汇意义的自由。随着新东西的发明，新名字不断被创造出来。不过，你应该注意，不要覆盖语言内置词，如冠词和介词。</p><p id="e20a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这同样适用于编程语言，除了它们被称为保留关键字和操作符。一些例子是<code class="fe ni nj nk nl b">if</code>和<code class="fe ni nj nk nl b">while</code>，但也有算术运算符，如<code class="fe ni nj nk nl b">+</code>和<code class="fe ni nj nk nl b">-</code>。</p><p id="c2e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，语言规范还可以定义内置函数来与操作系统交互或执行常见操作，包括打印到控制台或类型转换。</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="e137" class="lw lx it nl b gy nq nr l ns nt">\\ Print the value to the console.<br/>;("hello ")print<br/>;("world")println</span><span id="0cdc" class="lw lx it nl b gy nu nr l ns nt">\\ Convert a string to a number, if possible.<br/>;("673")toNumber</span><span id="61ea" class="lw lx it nl b gy nu nr l ns nt">\\ Convert a value to a string, if possible.<br/>;(673)toString</span><span id="e431" class="lw lx it nl b gy nu nr l ns nt">\\ Convert a value to a boolean, if possible.<br/>;(1)toBoolean \\ returns false<br/>;(0)toBoolean \\ returns true</span><span id="94e5" class="lw lx it nl b gy nu nr l ns nt">\\ Get the user input from the console as a string.<br/>;()getInput</span><span id="7bb5" class="lw lx it nl b gy nu nr l ns nt">\\ Get a random floating point number between 0 and 1.<br/>;()getRandom</span><span id="e6dc" class="lw lx it nl b gy nu nr l ns nt">\\ Terminate the program with the specified status code.<br/>;(0)exit</span><span id="8e16" class="lw lx it nl b gy nu nr l ns nt">\\ Get the length of the given data structure, if possible.<br/>;("hello world")getLength \\ Length is 11<br/>;([5, 6, 3, 4])getLength \\ Length is 4</span><span id="254d" class="lw lx it nl b gy nu nr l ns nt">\\ Sleep for the specified amount of seconds.<br/>;(10.5)sleep</span><span id="ff3c" class="lw lx it nl b gy nu nr l ns nt">\\ Get the current time in seconds since the epoch.<br/>;()getTime</span><span id="3d21" class="lw lx it nl b gy nu nr l ns nt">\\ Get the type of the given data structure, if possible.<br/>;("Hello")getType \\ STRING<br/>;(123)getType \\ NUMBER</span></pre><p id="5d02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有关内置函数的完整文档，请查看这里的<a class="ae ky" href="https://github.com/nic-obert/reverse-language#language-built-in-functions" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="08f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是递归斐波那契函数的一个例子:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="e6f0" class="lw lx it nl b gy nq nr l ns nt">{<br/>  ;return number<br/>  {<br/>    ;(self, number 1 -)self (self, number 2 -)self + = number<br/>  } number 1 &gt; if<br/>} (self, number) fib</span></pre><p id="fd0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">遍历一个姓名数组，并为每个姓名及其数组索引向控制台打印一条问候语:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="1536" class="lw lx it nl b gy nq nr l ns nt">{<br/>  ;return null<br/>  ;2 = i<br/>  ;(array)getLength 2 + = stop<br/>  {<br/>    ;(i)toString ": Hello " + array i [] + = string<br/>    ;(string)println<br/>    ;i ++<br/>  } i stop &lt; while<br/>} (array) greetNames</span></pre><h2 id="ab72" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">结论</h2><p id="7cbe" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">总结一下，我们已经定义了语法和句法规则，以及保留的关键字、操作符和一些基本行为。下一步是用代码实际实现它。在下一篇文章中，我将介绍解释器是如何工作的，因为这是执行用这种语言编写的程序的最简单的方法。</p><p id="7efa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有人感兴趣，你可以在这里找到这个项目的<a class="ae ky" href="https://github.com/nic-obert/reverse-language" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>以及源代码和文档。</p><p id="0ea3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">感谢阅读！</strong></p></div></div>    
</body>
</html>