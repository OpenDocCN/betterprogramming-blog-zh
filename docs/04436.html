<html>
<head>
<title>Take Your Create React App Debugging Workflow to the Next Level</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让您的Create React应用程序调试工作流程更上一层楼</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/take-your-create-react-app-debugging-workflow-to-the-next-level-9c40cd1904bd?source=collection_archive---------15-----------------------#2020-04-13">https://betterprogramming.pub/take-your-create-react-app-debugging-workflow-to-the-next-level-9c40cd1904bd?source=collection_archive---------15-----------------------#2020-04-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="743e" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">像专家一样调试VS代码</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/2f1b5cdd7562950b4e208559aa966126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PPt5941jv6eIdhcRzvUmQQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片来源:作者</p></figure></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="d56e" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">介绍</h1><p id="aae4" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">当然，您可以使用web浏览器提供的工具调试React应用程序。但是您知道您还可以使用文本编辑器调试React应用程序吗？如果您的文本编辑器是Visual Studio代码，则可以。</p><p id="8ca2" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在本教程中，我将向您展示如何超越<a class="ae mz" href="https://create-react-app.dev/docs/setting-up-your-editor#visual-studio-code" rel="noopener ugc nofollow" target="_blank">文档</a>或<a class="ae mz" href="https://code.visualstudio.com/docs/nodejs/reactjs-tutorial#_debugging-react" rel="noopener ugc nofollow" target="_blank">其他教程</a>中介绍的基本Visual Studio代码调试配置，为使用Create React App生成的项目在Visual Studio代码中创建灵活的调试工作流。调试工作流将在您开始调试会话时启动React应用程序并启动web浏览器，并在您结束调试会话时停止应用程序。当应用程序运行时，只要编辑器中的文件发生更改，它就会自动在浏览器中重新加载，并且编辑器中的调试器断点会自动重新建立。</p></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="2e2b" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">创建React应用</h1><p id="1ebf" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated"><a class="ae mz" href="https://create-react-app.dev" rel="noopener ugc nofollow" target="_blank"> Create React App </a>项目令人惊叹。它允许你快速建立自己的基于<a class="ae mz" href="https://reactjs.org" rel="noopener ugc nofollow" target="_blank"> React </a>的项目，包括所有的附加功能:林挺、编译、捆绑和测试。该项目对前端web开发产生了巨大的影响。Create React App为狂野的JavaScript生态系统带来秩序，为你选择一套工具，配置它们协同工作，并负责保持它们在更新中都能工作。</p><p id="acc2" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">Create React App我最喜欢的一个特性是，它生成的项目包括一个开发服务器，该服务器支持每当磁盘上的文件发生变化时自动重新加载所服务的站点——自动站点重新加载。</p><p id="cfc5" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">调试web应用程序的一种流行方式是使用<a class="ae mz" href="https://www.google.com/chrome/" rel="noopener ugc nofollow" target="_blank"> Chrome </a>和<a class="ae mz" href="https://developers.google.com/web/tools/chrome-devtools" rel="noopener ugc nofollow" target="_blank"> Chrome DevTools </a>，它们是Chrome web浏览器的一部分，包括一个交互式调试器和控制台，用于加载和运行应用程序。DevTools很棒，但是如果你想在调试时修改代码——这是一个通过自动站点重载实现的工作流——你最终会在DevTools调试器和编辑器之间切换。</p></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="42b1" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">Visual Studio代码</h1><p id="69ec" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated"><a class="ae mz" href="https://code.visualstudio.com" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>包括内置的<a class="ae mz" href="https://code.visualstudio.com/docs/editor/debugging" rel="noopener ugc nofollow" target="_blank">调试器</a>，安装了Chrome 扩展的<a class="ae mz" href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome" rel="noopener ugc nofollow" target="_blank">调试器，可以连接Chrome，远程调试浏览器中运行的JavaScript代码。这允许您在Visual Studio代码中设置断点、查看变量和运行控制台命令。</a></p><p id="1fe5" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在本教程中，您将使用Chrome，但该工作流程也适用于<a class="ae mz" href="https://www.microsoft.com/edge" rel="noopener ugc nofollow" target="_blank"> Microsoft Edge </a>和用于Microsoft Edge 扩展的<a class="ae mz" href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-edge" rel="noopener ugc nofollow" target="_blank">调试器。</a></p></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="6ee0" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">辅导的</h1><p id="3ebc" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">现在你知道你在做什么，为什么要做，让我们开始吧。</p><h2 id="dd24" class="na lh iu bd li nb nc dn lm nd ne dp lq mh nf ng ls ml nh ni lu mp nj nk lw nl bi translated">1.生成新项目</h2><p id="2956" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">通过运行以下命令生成一个新项目:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="52b1" class="na lh iu nn b gz nr ns l nt nu">PROJECT=$(npx project-name-generator -o dashed)<br/>npx create-react-app $PROJECT<br/>cd $PROJECT</span></pre><p id="649c" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">这将生成一个具有随机名称的项目。如果您已经有一个由Create React App生成的项目，您可以使用该项目。</p><h2 id="49bb" class="na lh iu bd li nb nc dn lm nd ne dp lq mh nf ng ls ml nh ni lu mp nj nk lw nl bi translated"><strong class="ak"> 2。在Visual Studio代码中安装Chrome调试器扩展</strong></h2><p id="3fab" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">您可以通过从Visual Studio代码中搜索来安装扩展，或者通过单击<a class="ae mz" href="https://marketplace.visualstudio.com/vscode" rel="noopener ugc nofollow" target="_blank">Visual Studio market place</a>的链接之一来安装。</p><p id="183d" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated"><strong class="ma iv">亲提示！</strong>如果尚未安装，确保为您安装的调试器扩展安装相应的web浏览器。</p><p id="4e75" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在安装了扩展(和浏览器，如果需要的话)之后，您仍然需要告诉Visual Studio代码如何调试您的代码。首先，您将定义调试会话开始和结束时Visual Studio代码要运行的任务。然后，您将定义调试配置。在该配置中，您将连接您创建的任务，并且您将定义调试器将忽略的文件位置，以便您可以专注于调试您自己的代码而不是其他人的代码。</p><h2 id="9a56" class="na lh iu bd li nb nc dn lm nd ne dp lq mh nf ng ls ml nh ni lu mp nj nk lw nl bi translated">3.创建或更新<code class="fe nv nw nx nn b">.vscode/tasks.json</code></h2><p id="2f67" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">使用以下代码创建或更新<code class="fe nv nw nx nn b">.vscode/tasks.json</code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ny nz l"/></div></figure><p id="0a00" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated"><strong class="ma iv">亲提示！如果您的工作区中还没有<code class="fe nv nw nx nn b">.vscode</code>目录，您需要创建一个。</strong></p><p id="2a1a" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">第一个任务<code class="fe nv nw nx nn b">debug-start"</code>被配置为在后台运行<code class="fe nv nw nx nn b">npm start</code>，但是等待进入后台，直到它看到开发服务器打印出“您现在可以查看…”消息。问题匹配器被配置为不匹配任何消息，假设您已经以不同的方式将林挺集成到Visual Studio代码中。如果您确实想在Visual Studio代码的问题查看器中看到来自开发服务器的lint消息，那么这个项目可能会帮助您开始。</p><p id="95a1" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">第二个任务，<code class="fe nv nw nx nn b">debug-stop</code>，被配置为将<code class="fe nv nw nx nn b">terminate</code>输入回显到void中，这本身似乎不是很有用。这是一些Visual Studio代码魔术，因为<code class="fe nv nw nx nn b">terminate</code>输入正在做真正的工作。</p><p id="cb46" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在对<code class="fe nv nw nx nn b">terminate</code>输入求值时，它会运行以<code class="fe nv nw nx nn b">debug-start</code>为参数的<code class="fe nv nw nx nn b">workbench.action.tasks.terminate</code>命令，这(正如您可能猜到的那样)会导致您上面定义的<code class="fe nv nw nx nn b">debug-start</code>任务终止。您实际上并不关心回显运行命令的结果，您只需要命令运行，由于您不能在Visual Studio代码中直接将带有参数的命令作为任务运行，所以您求助于这种诡计。别担心，我不会把你的秘密告诉任何人。</p><h2 id="133a" class="na lh iu bd li nb nc dn lm nd ne dp lq mh nf ng ls ml nh ni lu mp nj nk lw nl bi translated">4.创建或更新<code class="fe nv nw nx nn b">.vscode/launch.json</code></h2><p id="9af7" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">用以下内容创建或更新<code class="fe nv nw nx nn b">.vscode/launch.json</code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ny nz l"/></div></figure><p id="6a2b" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated"><strong class="ma iv">亲提示！</strong>如果您使用Edge而不是Chrome，将配置的名称和类型从<code class="fe nv nw nx nn b">chrome</code>更改为<code class="fe nv nw nx nn b">edge</code>。</p><p id="475e" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在该配置中，<code class="fe nv nw nx nn b">debug-start</code>和<code class="fe nv nw nx nn b">debug-stop</code>任务分别被配置为<code class="fe nv nw nx nn b">preLaunchTask</code>和<code class="fe nv nw nx nn b">postDebugTask</code>。<code class="fe nv nw nx nn b">url</code>已经被设置为开发服务器的默认URL。最后，已经设置了<code class="fe nv nw nx nn b">skipFiles</code>，以便调试器忽略Node.js本身的代码、由<code class="fe nv nw nx nn b">node_modules</code>中的依赖项提供的代码以及由开发服务器生成的代码(<code class="fe nv nw nx nn b">bootstrap</code>)。仍然可以在跳过的库代码中设置断点，但是这种设置将防止调试器意外地进入其他人的项目内部。</p><p id="da2d" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">最后，因为您正在配置Visual Studio代码来启动浏览器，所以您将希望防止<code class="fe nv nw nx nn b">npm start</code>在浏览器启动时也自动启动浏览器。</p><h2 id="fcae" class="na lh iu bd li nb nc dn lm nd ne dp lq mh nf ng ls ml nh ni lu mp nj nk lw nl bi translated">5.创建或更新。环境文件</h2><p id="54cc" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">用以下内容创建或更新<code class="fe nv nw nx nn b">.env</code>文件:</p><pre class="kk kl km kn gu nm nn no np aw nq bi"><span id="7fc3" class="na lh iu nn b gz nr ns l nt nu">BROWSER=none</span></pre><p id="2acb" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">这只是Create React App支持的众多<a class="ae mz" href="https://create-react-app.dev/docs/advanced-configuration" rel="noopener ugc nofollow" target="_blank">高级配置</a>设置之一。</p></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="feae" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">游戏攻略</h1><p id="6f20" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">您现在可以调试您的应用程序了。如果您在教程开始时生成了一个新项目，那么您可以按照本演练进行操作。</p><p id="19f8" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在第6行的<code class="fe nv nw nx nn b">src/App.js</code>中设置一个断点，方法是点击行号左侧的空白处:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oa"><img src="../Images/d78f591c72a61c5da89bd199308ed6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eykIaVIwhP8DskMjnexZCg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Visual Studio代码中第6行设置的断点</p></figure><p id="a0f8" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">现在从运行菜单中选择开始调试。开发服务器启动，浏览器启动，执行在断点处停止:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oa"><img src="../Images/31c0e691dfc179318af172cc7351605f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9YOHqsKgqMXQ2EmFPDqvQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在显示Chrome的Visual Studio代码中，执行在第6行暂停</p></figure><p id="7eed" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">单击“继续”按钮，查看站点渲染:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oa"><img src="../Images/fa43f79e4b8fd095c80c3dd7e191adc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_Rn2n8LSQCnWhCgYJXdNA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">显示渲染应用程序的Chrome</p></figure><p id="5db6" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">最后，通过替换文本来编辑<code class="fe nv nw nx nn b">src/App.js</code>:</p><p id="87c4" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated"><code class="fe nv nw nx nn b">Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.</code></p><p id="9e75" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">配文:</p><p id="a918" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated"><code class="fe nv nw nx nn b">I love React debugging!</code></p><p id="2319" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">保存文件，并看到页面在Chrome中自动重新加载，在Visual Studio代码中再次在断点处停止执行。再次单击Continue按钮，可以看到您的组件已经呈现了新的内容:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oa"><img src="../Images/095e2c1f27b5e2dc7daae08cec4cb5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZDbn83Y6Tc1jPLy4Ht8AMQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Chrome显示更新的应用程序</p></figure><p id="28ea" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">这就完成了教程。通过按Stop按钮或关闭浏览器窗口来停止调试会话，注意开发服务器也会自动停止。</p></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="2f64" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">结论</h1><p id="4393" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">在本教程中，您学习了如何为Create React App生成的项目启用高级调试工作流。我希望你玩得开心。编码快乐！</p></div><div class="ab cl kz la hy lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="in io ip iq ir"><h1 id="ad38" class="lg lh iu bd li lj lk ll lm ln lo lp lq ka lr kb ls kd lt ke lu kg lv kh lw lx bi translated">奖金配置文件</h1><p id="4708" class="pw-post-body-paragraph ly lz iu ma b mb mc jv md me mf jy mg mh mi mj mk ml mm mn mo mp mq mr ms mt in bi translated">这里有一个<code class="fe nv nw nx nn b">launch.json</code>文件，显示了Edge、Chrome和Jest的调试配置:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ny nz l"/></div></figure><p id="90ee" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated"><strong class="ma iv">亲提示！</strong>这个配置依赖于本教程前面描述的<code class="fe nv nw nx nn b">tasks.json</code>文件。</p><p id="bdf8" class="pw-post-body-paragraph ly lz iu ma b mb mu jv md me mv jy mg mh mw mj mk ml mx mn mo mp my mr ms mt in bi translated">在这个文件中，<code class="fe nv nw nx nn b">edge</code>和<code class="fe nv nw nx nn b">chrome</code>配置是相同的，除了它们的名称和类型。<code class="fe nv nw nx nn b">vscode-jest-tests</code>配置类似于Create React App的默认配置，复制自<a class="ae mz" href="https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest" rel="noopener ugc nofollow" target="_blank"> Jest </a>扩展，增加了与其他配置相同的<code class="fe nv nw nx nn b">skipFiles</code>。</p></div></div>    
</body>
</html>