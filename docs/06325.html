<html>
<head>
<title>My Journey From React to React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从React到React Native的旅程</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/my-journey-from-react-to-react-native-e876c31a46a4?source=collection_archive---------13-----------------------#2020-09-21">https://betterprogramming.pub/my-journey-from-react-to-react-native-e876c31a46a4?source=collection_archive---------13-----------------------#2020-09-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3f1d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当我从web应用程序切换到本地应用程序时，发生了哪些变化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/88349f86ec971d0f031fde7b533295f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LU6uhsVVbB9jS_o5"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@mukukostudio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Mukuko工作室</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="b7cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近开始开发一个Android应用程序，作为一名React开发人员，我很容易选择使用和测试React Native，因为它帮助我呆在自己的舒适区，也让我有机会在某一天探索iOS。</p><p id="1be4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使是同一个框架，在本地应用中使用React与在web上使用React还是有一点不同。</p><p id="d3fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我写这篇文章是为了分享我发现的这两个平台之间的主要差异，以及我必须找出的一些技巧，以获得期望的最终行为。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0024" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">视图或文本—没有div</h1><p id="f81c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在开发web应用程序时，我们通常会将<code class="fe mz na nb nc b">div</code>和<code class="fe mz na nb nc b">span</code>标签用于多种用途。既然我们不在网上，这就不再可能了。</p><p id="8803" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，内容是由<code class="fe mz na nb nc b">View</code>和<code class="fe mz na nb nc b">Text</code>组成的，我们可以将它们与上面的两个标签相关联，但是它们有一些额外的约束。</p><h2 id="65cb" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">视图元素</h2><p id="e1b4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用<code class="fe mz na nb nc b">View</code>元素，除了组件，你不能在里面添加任何东西。这意味着它不能包含文本，而这正是<code class="fe mz na nb nc b">Text</code>组件的用途。不幸的是，它在你的应用程序中有一个更大的树，但是它有助于将布局和文本分开。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React Native中的Hello world组件</p></figure><p id="bd3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于前一点，您可以很容易地发现您不能将文本相关的样式应用到一个<code class="fe mz na nb nc b">View</code>组件。像<code class="fe mz na nb nc b">color</code>或<code class="fe mz na nb nc b">fontSize</code>这样的文本样式需要应用到<code class="fe mz na nb nc b">Text</code>组件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">视图上的布局样式，文本上的文本样式</p></figure><p id="6155" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">View</code>也是一个<em class="nr"> flexbox </em>容器，只能支持两个显示值:<code class="fe mz na nb nc b">none</code>或<code class="fe mz na nb nc b">flex</code>。如果您对模型没有信心，它可以改变许多事情，但是它比DOM上默认使用的经典块模型更强大。</p><p id="9f2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在<a class="ae ky" href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" rel="noopener ugc nofollow" target="_blank"> CSS-Tricks </a>上了解更多关于这个布局系统的信息。React Native支持所有flex属性，从<code class="fe mz na nb nc b">align-items</code>到<code class="fe mz na nb nc b">flex-grow</code>。</p><p id="4552" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，网页版和本地版之间有一个主要的区别:默认值<code class="fe mz na nb nc b">flex-direction</code>。如果我们在web上有<code class="fe mz na nb nc b">row</code>，它在React Native中被设置为<code class="fe mz na nb nc b">column</code>。基本上，这意味着默认情况下元素是从上到下放置的，而不是从左到右。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React Native上的Flexbox用法</p></figure><p id="150f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe mz na nb nc b">View</code>不可点击。如果你需要一个点击行为，你必须把它包装成一个<code class="fe mz na nb nc b">Touchable*</code>组件:</p><ul class=""><li id="3f2d" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><code class="fe mz na nb nc b">TouchableHighlight</code>点击添加背景色。</li><li id="fffc" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><code class="fe mz na nb nc b">TouchableOpacity</code>减少点击时的不透明度。</li><li id="d5fd" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><code class="fe mz na nb nc b">TouchableWithoutFeedback</code>对click没有反馈，出于用户体验的原因我不推荐。</li><li id="8ce0" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><code class="fe mz na nb nc b">TouchableNativeFeedback</code>(仅在Android上)在按钮上产生涟漪效应。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TouchableHighlight用法示例</p></figure><h2 id="f393" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">文本元素</h2><p id="cac4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我们可以很容易地将<code class="fe mz na nb nc b">Text</code>元素与web上的<code class="fe mz na nb nc b">span</code>标签进行比较，这种差异就像视图一样明显。</p><p id="30a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">Text</code>元素——顾名思义——的存在只是为了呈现文本内容。我们不能将它用于任何我们可能需要的与布局相关的东西。因此，<code class="fe mz na nb nc b">display: "flex"</code>将没有任何作用。<code class="fe mz na nb nc b">position</code>也不会。</p><p id="4d74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，<code class="fe mz na nb nc b">Text</code>像在web上一样从父<code class="fe mz na nb nc b">Text</code>组件继承样式。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">文本组件样式继承</p></figure><p id="5bdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像<code class="fe mz na nb nc b">View</code>一样，<code class="fe mz na nb nc b">Text</code>组件是不可点击的。如果这是您需要的行为，您将不得不包装成一个<code class="fe mz na nb nc b">Touchable*</code>组件。</p><p id="0dcd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，<code class="fe mz na nb nc b">Text</code>仅仅意味着包含文本和其他<code class="fe mz na nb nc b">Text</code>组件。您不应该包含布局相关的组件，如<code class="fe mz na nb nc b">View</code>、<code class="fe mz na nb nc b">ScrollView</code>或<code class="fe mz na nb nc b">FlatList</code>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b72d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用TextInput替换输入</h1><p id="bd00" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">由于原生API不是DOM，我们也没有<code class="fe mz na nb nc b">input</code>元素，但是React为我们需要表单的时候提供了一个组件。</p><p id="1e49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">组件<code class="fe mz na nb nc b">InputField</code>的工作方式与<code class="fe mz na nb nc b">input</code>相同，但是它也有一个<code class="fe mz na nb nc b">onChangeText</code>属性，该属性接受一个以值作为参数的回调。不再需要<code class="fe mz na nb nc b">event.target.value</code>！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TextInput和onChangeText回调</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b9e8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">CSS的用法</h1><p id="2546" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我在开发web应用程序时使用了<a class="ae ky" href="https://github.com/css-modules/css-modules" rel="noopener ugc nofollow" target="_blank"> CSS模块</a>，那么在native上就有点不同了，在native上CSS的使用更像是CSS-in-JS的方式。样式表是用React Native提供的<code class="fe mz na nb nc b">StyleSheet.create</code>方法创建的，它是组件的类/样式的键/值对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用StyleSheet.create()设置样式</p></figure><p id="9952" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果CSS中有单位，那么React Native中没有——或者更准确地说，单位总是在<code class="fe mz na nb nc b">dp</code>中设置，因此即使手机没有相同的像素比率，渲染也是正确的。这使得CSS的使用有点不同，但如果你想让事情更简单，就把它们看作像素。</p><p id="b2a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们以前在CSS中有快捷方式，那么在React Native中就不一样:<code class="fe mz na nb nc b">padding</code>必须是一个数字，而不是字符串中的值列表，<code class="fe mz na nb nc b">backgroundColor</code>用于颜色，等等。</p><p id="da8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明这个规则，假设CSS <code class="fe mz na nb nc b">padding: "8 16"</code>无效，那么<code class="fe mz na nb nc b">background: "#333333"</code>也无效。</p><p id="29a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使这些输入起来有点长，我发现它比我们习惯的快捷方式更明确。另外，对于初学者来说，理解它们总是很复杂。</p><p id="5283" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">几个小时后，我已经完全采用了这种编写CSS的新方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">dp单位和快捷方式</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6ba5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可缩放矢量图形</h1><p id="73dc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果SVG在web上被大量使用，那么它在React Native中是不受支持的。我们需要用一个外挂包:<code class="fe mz na nb nc b">react-native-svg</code>。</p><p id="3815" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这个包的使用方式和网页上的完全一样，只是有一点不同:第一个大写字符。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">React Native中的简单SVG</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5f52" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">泛滥</h1><p id="eec8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你想要一个可滚动的<code class="fe mz na nb nc b">View</code>，你需要切换到<code class="fe mz na nb nc b">ScrollView</code>组件。它的行为是一样的，但有一个内置的滚动条。</p><p id="41c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于组件默认有一个垂直滚动，您可以使用<code class="fe mz na nb nc b">horizontal</code>属性使其在<em class="nr"> x </em>轴上滚动。</p><p id="182e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于性能原因，您也可以使用<code class="fe mz na nb nc b">FlatList</code>组件，它使用起来有点复杂，但是它会让您的长列表快速滚动。如果是你需要的东西，我鼓励你去<a class="ae ky" href="https://reactnative.dev/docs/flatlist" rel="noopener ugc nofollow" target="_blank">看看官方文档</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4aa0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">提示和技巧</h1><h2 id="1a20" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">可触摸组件应用于单个元素</h2><p id="3043" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果您得到错误<code class="fe mz na nb nc b">Error: React.Children.only expected to receive a single React element child</code>，那么您只需要将您的元素包装在一个新的<code class="fe mz na nb nc b">View</code>组件中。</p><p id="ab0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">做什么似乎很明显，但是当来自web时可能会有点麻烦:当使用<code class="fe mz na nb nc b">Touchable*</code>组件时，您需要有一个布局项目。</p><h2 id="33ce" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated"><code class="fe mz na nb nc b">Text</code>的断线</h2><p id="7c0f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在web上，新行是用<code class="fe mz na nb nc b">&lt;br /&gt;</code>做的，但是由于native不是DOM，你可以简单地在你的<code class="fe mz na nb nc b">Text</code>组件中使用<code class="fe mz na nb nc b">{"\n"}</code>或者直接在一个字符串中使用<code class="fe mz na nb nc b">{"\n"}</code>(例如<code class="fe mz na nb nc b">&lt;Text&gt;{"Hello\nworld!"}&lt;/Text&gt;</code>)。</p><h2 id="4c30" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">文本中的视图</h2><p id="a483" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在<code class="fe mz na nb nc b">Text</code>元素中不能有<code class="fe mz na nb nc b">View</code>元素。这将抛出以下错误:<code class="fe mz na nb nc b">Cannot add a child that doesn't have a YogaNode to a parent without a measure function!</code>。</p><p id="81c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于一些代码重复，这可能会使您的树变得更加复杂，但是您应该总是找到避免这种消息的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="302e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="a516" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽管React Native是基于React的，但还是有很多不同之处。一方面，我们在web上使用React并使用DOM API。另一方面，我们使用Android、iOS和其他系统的原生布局。但是还是很容易进入的。不要犹豫，试试吧！</p></div></div>    
</body>
</html>