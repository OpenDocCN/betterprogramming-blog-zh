# 新开发人员经常向我提出 10 多个关于 React 的问题

> 原文：<https://betterprogramming.pub/10-questions-about-react-i-often-get-from-new-developers-b84c4c4e1fe8>

## 状态管理、钩子、项目结构等等

![](img/b7fa424df228ff3295ff51bc1049e904.png)

由 [Domenico Loia](https://unsplash.com/@domenicoloia?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

这看起来很简单——只要问一下谷歌就能得到答案。但事实是这样吗？事实是，我们可以从不同的来源获得许多结果，但我们必须选择最适合我们的一个。我们如何做到这一点？

如果你是一个已经尝试了很多不同的库、工具和流行特性的前端开发人员，这就容易多了。你对全局状态管理、表单、reducers 等等有自己的看法，但是如果你不是呢？这可能相当困难。

四年前，我是一个刚开始学习 [React](https://reactjs.org/) 的人，那是 [React 16.8](https://reactjs.org/blog/2019/02/06/react-v16.8.0.html) 发布的前一年，我有很多疑问。很多！我听说了 React 和 [Redux](https://redux.js.org/) ，这是在 React 中做事情的完美组合，但我不知道我是否完全需要 Redux。

那个时候钩子还不存在，所以我不知道什么`[useReducer](https://reactjs.org/docs/hooks-reference.html#usereducer)`、`[useContext](https://reactjs.org/docs/hooks-reference.html#usecontext)`，或者其他什么花里胡哨的东西。我生活在一个有类组件和 Redux 的世界，但是一切都是自发地改变的。

现在，我们无法想象没有功能组件、自定义挂钩和 React 提供的其他优秀特性的新项目。我们可以使用许多不同的库来提高生产率，产生更好更快的代码，但是很难知道如何去做，如何选择最佳选项，以及最重要的何时使用它。

我经常在工作中收到关于 React 的问题，所以我想看看最受欢迎的问题，并根据我的经验给出答案。

# 当我们有钩子的时候还需要类组件吗？

在[反应 16.8](https://reactjs.org/blog/2019/02/06/react-v16.8.0.html) 之前，只有[级组件](https://reactjs.org/docs/components-and-props.html#function-and-class-components)能够带状态操作。它们是为管理状态而设计的，但功能仅用于显示从 props 获得的数据。2019 年 React hooks 发布的时候，功能组件变成了有状态的，这让我们可以用功能组件代替类组件。此外，钩子让我们有机会重用有状态逻辑，并使它可以被其他钩子和功能组件访问。

[如果你看一下官方文档](https://reactjs.org/docs/hooks-faq.html#do-i-need-to-rewrite-all-my-class-components)，你会发现如果我们在谈论创建新的功能组件，那么最好使用功能组件。但这并不意味着你应该重写所有的代码。我正在使用来自 [FluentUI](https://developer.microsoft.com/en-us/fluentui#/) 的组件，我看到微软也在慢慢重写组件，最好是功能性的。现在这是一种常见的做法，但我强烈建议学习这两种类型。

在我看来，为了乐趣而学习 React，为自己创建实验项目，以及研究它以成为一名更好的前端开发人员，并希望在真实的公司中工作，每天使用 React，这两者之间有着巨大的差异。在 React 版本发布之前，有很多公司都在使用 React，并且他们仍然可能有包含类组件的项目。

所以，如果一个人想成为一名专业人员，他们必须至少理解功能组件和类组件之间的区别，并且能够在需要时使用类组件。

# 我们还能使用类组件吗？功能组件更好吗？

是的，我们可以。我之前提到过，你不需要急着重写你的`Class`组件，以后要用 functional。说`Class`组件比功能差是不公平的。他们是不同的，但没有更糟。只有钩子和功能组件可以使用钩子，这给了我们更多的灵活性。这就是为什么使用这些组件可能是更有效的解决方案。

我需要使用`Class`组件吗？

老实说，我更喜欢使用功能组件，但当我选择`Class`组件时，会出现一种情况。我说的是误差边界。我通常有一个非常小而简单的组件，它可以防止用户在产品中看到白屏。我认为现在有基于 React hook 的解决方案，但是我不介意在我的项目中有一个类组件。你可以在下面看到我的例子:

# 为什么有这么多类组件的例子？

一定要看出版日期。如果帖子是在 2019 年之前发布的，那么总会有一个`Class`组件被提及，因为那时功能组件还不够“聪明”。如果你看到一个类组件的例子，并不意味着这是正确的方法。也许这个人只是爱他们，习惯他们，或者他们没有别的选择。

如果你查看 React 官方文档，你仍然可以找到许多使用`Class`组件的例子，但是它们的数量比几年前少了很多。

# React 项目中我们还需要 Redux 吗？

在我看来，不可能有一个正确的答案。这取决于你的项目，它的复杂性和需求，以及你的偏好。我认为没有必要在你的项目中默认加入 Redux。重要的是要明白，你可能根本不需要一个全局状态管理库，但是如果你需要，你现在有很多选择，比如[反冲](https://recoiljs.org/)、 [Redux 工具包](https://redux-toolkit.js.org/)、 [Mobix](https://mobx.js.org/README.html) 、[Provider+u](https://reactjs.org/docs/context.html)sec context 等等。

在安装 Redux 之前，您应该阅读所有可能的变体，然后再做出选择。

当我看到 2019 年之前创建的 React 项目时，我总是看到相同的:`Class`用于管理状态的组件和 Redux。为什么？`Class` components 因为没有其他选择，而 Redux 因为是当时最好的选择。大家都用了 Redux。你必须知道 Redux，因为这两个词总是一起出现。

是的，你可以在 React 中找到很多使用 Redux 进行全局状态管理的例子，但是，还是要看发布日期。这并不意味着你不应该使用 Redux。不，你可能需要，但也可能不需要。

您必须分析您的项目，并考虑您使用全局状态的密集程度。如果您经常从全局状态调用方法并更新它，您应该考虑使用这个库来帮助状态管理，并且不会降低应用程序的性能。通常，提供商+ `useReducer`将是一个好的决定。

# 表格用什么？

有多种选择:Formik、Redux Form 和 Final Forms，但我更喜欢 React-hook-form，因为我喜欢这个库的编写方式。它基于钩子，基于`useRef`，这有助于提高性能，因为你的表单很少被重新呈现。例如，如果使用 Formik，它不会在每次击键时都呈现出来。

我正在使用 React-hook-form，并建议我的同事也使用它。但是值得一提的是，这个库和我上面提到的其他库一样，可以帮助您管理和验证表单。但是你必须明白在这个包装下发生了什么。

我强烈建议新的 React 开发人员尝试编写他们的代码——一个更新状态和管理错误消息的简单函数，不要太复杂。但是，在我看来，理解 React 如何工作、组件重新呈现的频率以及为什么会发生这种情况是很重要的。

有很多很棒的库可以简化我们的工作，但是我们不应该忘记基础知识。我们必须了解受控组件和非受控组件之间的区别，并知道何时使用`useRef`。

不幸的是，我经常看到新的程序员如何使用别人编写的自定义钩子，或者他们使用很棒的库来优化工作，但他们不明白在引擎盖下发生了什么。更糟糕的是，有时候，他们不想理解。这就是为什么我试图向我的同事展示最基本的例子，例如我们如何在没有花哨工具的情况下做一件事，然后建议他们使用现成的解决方案来优化和改进他们的工作。

# 表单验证选什么？

我更喜欢[是的](https://www.npmjs.com/package/yup)，因为它很容易使用。您可以将 yup 与流行的表单管理库结合使用，也可以单独使用它。这是学习验证表单的一种非常简单有效的方法。

# 如何以及何时使用 useEffect？

我喜欢一个关于 React 的博客。是丹·阿布拉莫夫写的。我总是建议去看看，因为有很多有用的信息和很棒的例子。在我看来，他的[效果使用完全指南](https://overreacted.io/a-complete-guide-to-useeffect/)仍然是关于`useEffect`最好的帖子，因为它涵盖了所有情况。

# 什么时候使用 useReducer？

哦，你会感觉到的。我知道这是一个非常奇怪的答案，但事实就是如此。我经常收到这个问题，因为有时候程序员有点害怕使用`useReducer`。他们认为这很难，应该在非常特殊的情况下使用。

我们如何管理组件的状态？我们有两个选择:`useState`和`useReducer`。两者都是为了一个目的——保持状态并提供一个函数来改变状态。如果我们不谈用`useReducer`和`useContext`来传递道具给子组件。这有助于您找到一种方法来最小化无用的重新呈现器的数量，然后`useReducer`是一种管理本地状态的好方法。我爱`useReducer`，也经常用。此外，我有一个通用的列表缩减器。

我推荐从`useState`开始，当你觉得通过多个`setState`函数管理状态变得不舒服的时候，那么你一定要试试`useReducer`。但是重要的是尝试两种变体并感受它们的不同。

应该一直用`useReducer`吗？不，有时候可能太多了。如果用户有一个非常简单的状态或者在状态中使用多个变量，但是它们没有连接，那么继续使用`useState`是可以的。使用`useReducer`最常见的情况是数据获取。

# 完美的项目结构是什么？

哦，让我们看看官方文件。我们看到了吗？ [React 对如何做到这一点没有意见](https://reactjs.org/docs/faq-structure.html)，但是据说过一段时间后，你会弄清楚什么样的结构最适合你。但是要想弄清楚，你必须尝试不同的技术。是的，我完全同意。

几年前，我在寻找最佳的项目结构，尝试不同的方式，将组件分成容器和组件，将文件移动到一个文件夹，然后移动到另一个文件夹，突然，我找到了最适合我的组合。

有时我看到人们在评论中争论谁的结构更好，为什么，但是，在我看来，这是个人的，取决于团队及其规则。

# 我总是在 React 项目中使用什么？

有一些我经常使用的库和 VS 代码扩展:

1.  更漂亮的和 [Eslint](https://eslint.org/) 用于代码格式化和检查
2.  [柏树](https://www.cypress.io/)形成端到端的测试
3.  用于创建新组件的自定义模板
4.  [故事书](https://storybook.js.org/)，喜欢在图书馆用

你可以在下面找到更多关于我最喜欢的 VS 代码扩展的信息。

[](/vc-code-extensions-for-javascript-and-react-developers-in-2022-f0828b9ea00) [## 10+ React VS 代码扩展，在 2022 年提高生产力

### 我最喜欢的 VS 代码扩展享受编码

better 编程. pub](/vc-code-extensions-for-javascript-and-react-developers-in-2022-f0828b9ea00) 

# React 的内容是什么，在哪里可以找到答案？

总是从[官方文件](https://reactjs.org/)开始。我的经验表明，在大多数情况下，正确的答案总是存在的。你只是不知道在哪一部分找到它。有大量关于所有 React 方面、示例和建议的信息。

# 我推荐读什么？

首先，你可以在 Medium 上找到很多很棒的文章，但是你已经知道了，所以我会提到我最喜欢的关于 React 的博客、文章和 YouTube 频道。此外，我强烈推荐 React 新开发者订阅 YouTube 频道，在那里作者们谈论 VS 代码中不同的技巧和窍门，React 中的新特性，以及用 Jest 和 Cypress 进行测试。这些知识会很有用，你会定期获得一些新的信息。

1.  [React 文档](https://reactjs.org/)
2.  丹·阿布拉莫夫反应过度
3.  杰森·瓦特莫尔的博客
4.  肯特·c·多兹

这就是我从同事那里得到的关于 React 的最受欢迎的问题。希望我的回答有用。