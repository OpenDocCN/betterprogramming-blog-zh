<html>
<head>
<title>Storybook: Component Development the Right Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">故事书:组件开发的正确方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/storybook-doing-component-development-the-right-way-d2dc5ef43c76?source=collection_archive---------15-----------------------#2020-03-02">https://betterprogramming.pub/storybook-doing-component-development-the-right-way-d2dc5ef43c76?source=collection_archive---------15-----------------------#2020-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="47d2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">因为每个应用都需要一个设计系统</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3383401fb71e287bdab62852e25a9123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*No5KhHgs-OE4H2EzZai8aA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/painter06-3732158/" rel="noopener ugc nofollow" target="_blank">弗朗西斯·雷</a>在<a class="ae ky" href="https://pixabay.com/illustrations/lego-building-game-toy-drawing-3388163/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="976f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如今，如果你曾经试图构建一个用户界面，你可能会遇到很多问题。构建这些接口组件是一项非常昂贵和费力的任务。我们有设计师、产品经理和许多开发人员在一个项目上工作。</p><p id="6bda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现代用户界面由成千上万的UI组件构建而成，这些组件在不同的屏幕、不同的用户界面之间重用，有时在同一公司的不同产品之间重用，以使设计看起来一致。现在，通常在这些场景中，有适当的设计系统，在一个地方有所有可重用组件的目录。这有助于提高30-40%的开发人员的生产力。现代UI界面是由成千上万个可重用的UI组件构建而成的</p><p id="7367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，design systems包含可重用的组件，这些组件可以在不同的应用程序中使用，以构建复杂、持久且可访问的用户界面。设计师和开发人员都对设计系统有贡献，所以它是真实的单一来源。这样，团队中的每个人都可以在不同的场景中测试他们构建的组件设计。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d848" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我们什么时候需要设计系统？</h1><p id="3a54" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽管设计系统有很多宣传和优点，但它并不适合所有人。如果你只做一个项目，没有设计系统你会更好。这只会增加应用程序的复杂性。</p><p id="e86c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果您在不同的项目中共享您的组件，那么构建一个设计系统对您来说是有意义的(而不是另一种选择:将组件从一个地方复制并粘贴到另一个地方)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6c67" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">那么故事书到底是做什么的呢？</h1><p id="d03f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">开发人员使用Storybook的原因如下</p><ol class=""><li id="2385" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">独立构建UI组件</li><li id="a373" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">防止用户界面错误</li><li id="1e6d" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">跨不同项目标准化样式</li><li id="10cb" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在不同的项目中分发UI组件</li></ol></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cd0e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">故事书对我有什么帮助？</h1><h2 id="0515" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated"><strong class="ak"> UI/UX设计师</strong></h2><p id="599f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用户界面/UX设计可以进入故事书，让你看到组件在不同场景下的外观和感觉。您还可以看到组件的所有状态，以及它们在不同状态变化期间的行为。它会给你提供有价值的反馈。</p><h2 id="5c79" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated"><strong class="ak">开发者</strong></h2><p id="5978" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">开发人员可以轻松地在不同的项目之间共享这些组件，并查看它们的确切使用情况、这些组件的属性以及如何扩展它们。</p><p id="28d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这加快了开发过程，因为现在您只需构建一次组件，然后就可以导入并在其他地方使用它。代码共享变得更加容易，副作用可以在一个地方轻松处理。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ff9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">React故事书入门</h1><p id="4c5a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在Storybook可以用于几乎所有可能的前端框架，而且有很多这样的框架。为什么我们不能只坚持一种，并使之成为标准呢？</p><p id="151f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，框架咆哮到此为止。先说React。你可以在这里找到其他框架<a class="ae ky" href="https://www.learnstorybook.com/intro-to-storybook/" rel="noopener ugc nofollow" target="_blank">的文档。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fa01" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装React故事书</h1><p id="530c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，由于Storybook是JavaScript生态系统的一部分，您可以使用您最喜欢的包管理器来安装它。对于这个介绍，我将使用yarn，但是npm也以同样的方式工作。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="a800" class="nn md it oa b gy oe of l og oh">yarn global add @storybook/cli</span></pre><p id="27db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它会在你的系统上全局安装故事书命令行界面。如果不想永久安装Storybook CLI，也可以使用npx。点击阅读更多关于那个<a class="ae ky" href="https://github.com/storybookjs/storybook/tree/master/lib/cli" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="5a35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们只需要React应用程序。我们将使用create-react-app来创建它。通过在您的系统上运行以下命令来安装Create React App。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="c556" class="nn md it oa b gy oe of l og oh">yarn create react-app storybook-intro --typescript<br/>cd storybook-intro</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/d2b9f844a22eaff8489550ca08440ad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*Wl1jvzJGcQcCVEV3PWCloA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">文件夹结构已生成</p></figure><p id="a989" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里阅读更多关于Create React App <a class="ae ky" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">的内容。让我们从添加故事书到我们的项目开始。</a></p><p id="0c0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行以下命令将Storybook添加到您的项目中:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="19a0" class="nn md it oa b gy oe of l og oh">getstorybook</span></pre><p id="dc84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您注意到有一些额外的文件夹，请将它们添加到项目中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/bf9def32e96e6a10a2974900e6aeef4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*Nk2Vc3xNuy63uuS7_rPLqA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">运行“getstorybook”后的文件夹结构</p></figure><p id="41e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ok ol om oa b">.storybook</code>用于配置故事书。我们以后再做。</p><p id="ccc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="3c61" class="nn md it oa b gy oe of l og oh">yarn storybook</span></pre><p id="b4f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你去<code class="fe ok ol om oa b"><a class="ae ky" href="http://localhost:9009/" rel="noopener ugc nofollow" target="_blank">http://localhost:9009/</a></code> <a class="ae ky" href="http://localhost:9009/" rel="noopener ugc nofollow" target="_blank">，</a>你会看到下面的页面。每当您更改任何配置或添加任何新软件包时，请确保重新启动您的服务器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/13c1a8d04e7e5b0bb3a02edb2f9cfd52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wM2b0Hd9MVZe_Q10uz4WsQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://localhost:9009/" rel="noopener ugc nofollow" target="_blank"> http://localhost:9009/ </a></p></figure><p id="3fa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们开始构建一些组件。然后，我们将看看如何配置Storybook，使它更强大，并充分利用它。</p><p id="9f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个基本组件。让我们从一个按钮开始。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="c686" class="nn md it oa b gy oe of l og oh">import React from "react";</span><span id="3110" class="nn md it oa b gy oo of l og oh">import "./index.css";</span><span id="1edf" class="nn md it oa b gy oo of l og oh">interface IButtonProps {}<br/>const Button: React.FC&lt;IButtonProps&gt; = () =&gt; {<br/>return (<br/>&lt;&gt;<br/>&lt;button className="button"&gt;Primary Button&lt;/button&gt;<br/>&lt;/&gt;<br/>);</span><span id="b870" class="nn md it oa b gy oo of l og oh">};</span><span id="447f" class="nn md it oa b gy oo of l og oh">export default Button;<br/>export { Button };</span></pre><p id="33c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加以下CSS:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="dbfa" class="nn md it oa b gy oe of l og oh">.button {</span><span id="9306" class="nn md it oa b gy oo of l og oh">background-color: #4caf50; /* Green */</span><span id="efd5" class="nn md it oa b gy oo of l og oh">border: none;</span><span id="ae37" class="nn md it oa b gy oo of l og oh">color: white;</span><span id="d894" class="nn md it oa b gy oo of l og oh">padding: 15px 32px;</span><span id="1bc6" class="nn md it oa b gy oo of l og oh">text-align: center;</span><span id="cb7c" class="nn md it oa b gy oo of l og oh">text-decoration: none;</span><span id="e5c2" class="nn md it oa b gy oo of l og oh">display: inline-block;</span><span id="a827" class="nn md it oa b gy oo of l og oh">font-size: 16px;</span><span id="eb91" class="nn md it oa b gy oo of l og oh">margin: 4px 2px;</span><span id="7fff" class="nn md it oa b gy oo of l og oh">cursor: pointer;</span><span id="57f9" class="nn md it oa b gy oo of l og oh">}<br/>.primary {<br/>background-color: #008cba;<br/>}</span><span id="09f5" class="nn md it oa b gy oo of l og oh">.danger {</span><span id="e0a0" class="nn md it oa b gy oo of l og oh">background-color: #f44336;</span><span id="e550" class="nn md it oa b gy oo of l og oh">}</span></pre><p id="14f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们为这个组件添加一个故事。顺便说一下，你可以删除<code class="fe ok ol om oa b">stories</code>文件夹——反正我们也不需要。现在，在按钮组件旁边创建一个新文件<code class="fe ok ol om oa b">button.stories.TSX</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/f97b19439c43168464ef6b800e32e634.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*LrROvr5uOFlf1ykobLVH3Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新文件夹结构</p></figure><p id="e1be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在<code class="fe ok ol om oa b">button.stories.tsx</code>里面创造我们的第一个故事。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="e92d" class="nn md it oa b gy oe of l og oh">import React from "react";</span><span id="c72b" class="nn md it oa b gy oo of l og oh">import { Button } from "./index";</span><span id="17ac" class="nn md it oa b gy oo of l og oh">export default {</span><span id="8f07" class="nn md it oa b gy oo of l og oh">title: "Button",</span><span id="5447" class="nn md it oa b gy oo of l og oh">component: Button</span><span id="cd14" class="nn md it oa b gy oo of l og oh">};</span><span id="5453" class="nn md it oa b gy oo of l og oh">export const Primary = () =&gt; &lt;Button&gt;Hello Button&lt;/Button&gt;;</span></pre><p id="89c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们再次启动故事书服务器，看看我们的故事是什么样子的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/cbee1f4d4bdb22eeda7644e7b6132905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8cQaG0btufisny5LKvjphw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">删除stories文件夹后的Storybook</p></figure><p id="80be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，我们没有看到我们新添加的故事。这是为什么呢？如果我们转到<code class="fe ok ol om oa b">.storybook/config.js file</code>，我们会看到Storybook是为JavaScript配置的，而不是TypeScript。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/251faef3b3d1fe3d2d5952e9578afa79.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*8H1hAqf4vUNL_faZuIZXzw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">配置文件</p></figure><p id="606b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们为TypeScript配置它。这很容易通过在<code class="fe ok ol om oa b">stories</code>中添加正确的正则表达式来完成。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="53d8" class="nn md it oa b gy oe of l og oh">../src/**/*.stories.(ts|tsx|js|jsx)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/f07f98333e8a11d4e63ad10d013ffb87.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*hpj_5DKn7cqOfaU8yQYWqA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新配置. js</p></figure><p id="bbb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将选择项目中所有的JSX/TSX/JS/TS文件。现在，如果你去<code class="fe ok ol om oa b">localhost:9009</code>，我们会看到我们的故事。请确保重新启动Storybook服务器，因为这是一个配置更改。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/319cf673c745a6437ea4d139e1309194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57KGxEVMI_r7elE9Lgdlxw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最后，我们看到了我们的故事</p></figure><p id="e40d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使我们的组件更标准一点，这样我们就可以期待一些道具并做出改变。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="7f97" class="nn md it oa b gy oe of l og oh">import React from "react";</span><span id="1dbc" class="nn md it oa b gy oo of l og oh">import "./index.css";</span><span id="d6dc" class="nn md it oa b gy oo of l og oh">interface IButtonProps {</span><span id="4b1a" class="nn md it oa b gy oo of l og oh">buttonText: string;</span><span id="6514" class="nn md it oa b gy oo of l og oh">primary?: boolean;</span><span id="757b" class="nn md it oa b gy oo of l og oh">danger?: boolean;</span><span id="6e36" class="nn md it oa b gy oo of l og oh">}</span><span id="413e" class="nn md it oa b gy oo of l og oh">const Button: React.FC&lt;IButtonProps&gt; = props =&gt; {<br/>const { buttonText, primary, danger } = props;<br/>let styles;<br/>primary ? (styles = "primary") : danger ? (styles = "danger") : (styles = "");</span><span id="7ff7" class="nn md it oa b gy oo of l og oh">return (<br/>&lt;&gt;<br/>&lt;button className={"button" + " " + styles}&gt;{buttonText}&lt;/button&gt;<br/>&lt;/&gt;</span><span id="7ad2" class="nn md it oa b gy oo of l og oh">);</span><span id="5981" class="nn md it oa b gy oo of l og oh">};</span><span id="63bd" class="nn md it oa b gy oo of l og oh">export default Button;<br/>export { Button };</span></pre><p id="a198" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们更新了内容，所以我们也需要更新故事书组件来发送我们刚刚添加到组件中的道具。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="2c5f" class="nn md it oa b gy oe of l og oh">import React from "react";</span><span id="b8bf" class="nn md it oa b gy oo of l og oh">import { Button } from "./index";</span><span id="60c2" class="nn md it oa b gy oo of l og oh">export default {</span><span id="0d41" class="nn md it oa b gy oo of l og oh">title: "Button",</span><span id="154c" class="nn md it oa b gy oo of l og oh">component: Button</span><span id="35a8" class="nn md it oa b gy oo of l og oh">};</span><span id="bf26" class="nn md it oa b gy oo of l og oh">export const Primary = () =&gt; (</span><span id="e0b9" class="nn md it oa b gy oo of l og oh">&lt;Button buttonText="Primary Button" primary={true} /&gt;</span><span id="e3f5" class="nn md it oa b gy oo of l og oh">);</span><span id="1ae2" class="nn md it oa b gy oo of l og oh">export const DangerButton = () =&gt; (</span><span id="4533" class="nn md it oa b gy oo of l og oh">&lt;Button buttonText="Danger Button" danger={true} /&gt;</span><span id="8536" class="nn md it oa b gy oo of l og oh">);</span></pre><p id="0943" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们回到我们的故事书，我们会看到两个故事——一个是主要按钮，另一个是危险按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/a32ca34320b7fedae42ebcd6d43f43b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZkD8zNtfIWsJp86qU9cvng.png"/></div></div></figure><p id="ee4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只是开发的隔离部分。我们独立开发了一个故事书组件，但是我们如何告诉其他开发人员我们期待所有这些道具(比如带有主要、危险等的按钮文本)。)，而且他们可以通过改变这些来改变按钮的外观？</p><p id="25d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是故事书附件发挥作用的地方。这些使得Storybook在构建公共组件库方面非常强大。</p><p id="554f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Storybook有几个推荐的附加组件:</p><ul class=""><li id="34ff" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ou nf ng nh bi translated"><code class="fe ok ol om oa b"><a class="ae ky" href="https://github.com/storybooks/storybook/blob/master/addons/a11y" rel="noopener ugc nofollow" target="_blank">a11y</a></code> —测试故事书中用户可访问性的组件</li><li id="172f" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ou nf ng nh bi translated"><code class="fe ok ol om oa b"><a class="ae ky" href="https://github.com/storybooks/storybook/blob/master/addons/actions" rel="noopener ugc nofollow" target="_blank">actions</a> </code>—记录用户在故事书用户界面中与组件交互的动作</li><li id="7b63" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ou nf ng nh bi translated"><code class="fe ok ol om oa b"><a class="ae ky" href="https://github.com/storybooks/storybook/blob/master/addons/knobs" rel="noopener ugc nofollow" target="_blank">knobs</a></code> —在故事书UI中交互编辑组件的输入数据</li><li id="173b" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ou nf ng nh bi translated"><code class="fe ok ol om oa b"><a class="ae ky" href="https://github.com/storybookjs/storybook/tree/master/addons/storysource" rel="noopener ugc nofollow" target="_blank">source</a></code> —在故事书用户界面中查看故事的代码</li><li id="88f1" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ou nf ng nh bi translated"><code class="fe ok ol om oa b"><a class="ae ky" href="https://github.com/storybooks/storybook/blob/master/addons/viewport" rel="noopener ugc nofollow" target="_blank">viewport</a></code> —使用故事书更改响应式组件的显示大小和布局(这可以帮助您构建响应式布局)</li></ul><p id="640f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里看到所有的附加组件<a class="ae ky" href="https://storybook.js.org/addons/" rel="noopener ugc nofollow" target="_blank"/>。除此之外，如果您愿意，还可以创建自己的附加组件。点击了解更多关于<a class="ae ky" href="https://www.learnstorybook.com/intro-to-storybook/react/en/creating-addons/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="ffcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们给我们的小项目添加一些附加组件。让我们从<code class="fe ok ol om oa b">knobs</code>附加组件开始，这样我们就可以与我们的组件进行交互。</p><h2 id="67cd" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated"><strong class="ak">安装</strong></h2><p id="27bd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要将附加组件安装到我们的项目中。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1fc2" class="nn md it oa b gy oe of l og oh">yarn add @storybook/addon-knobs <!-- -->@types/storybook__addon-knobs</span></pre><p id="5e1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在你的<code class="fe ok ol om oa b">.storybook/main.js</code>文件中注册<code class="fe ok ol om oa b">knob</code>。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="31fd" class="nn md it oa b gy oe of l og oh">// .storybook/main.js</span><span id="c801" class="nn md it oa b gy oo of l og oh">module.exports = {<br/>stories: ["../src/**/*.stories.(ts|tsx|js|jsx)"],</span><span id="2192" class="nn md it oa b gy oo of l og oh">addons: [</span><span id="8d04" class="nn md it oa b gy oo of l og oh">"@storybook/preset-create-react-app",</span><span id="51e1" class="nn md it oa b gy oo of l og oh">"@storybook/addon-actions",<br/>"@storybook/addon-links",<br/>"@storybook/addon-knobs<!-- -->"<br/>]<br/>};</span></pre><p id="2c4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们把新加的<code class="fe ok ol om oa b">knob</code>加在那里吧。进入<code class="fe ok ol om oa b">.storybook</code>文件夹，新建一个名为<code class="fe ok ol om oa b">config.js</code>的文件。在那里添加新添加的附加组件。</p><p id="98d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像这样添加一个附加组件会将它添加到所有的故事中。如果你只是想给一个故事添加附加内容，也可以这样做。你可以在这里阅读相关内容。但是如果你正在构建一个库，你不会一个接一个地给每个文件添加插件。所以让我们从创建一个<code class="fe ok ol om oa b">config.js</code>文件开始。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="8f0b" class="nn md it oa b gy oe of l og oh">// .storybook/config.js</span><span id="66da" class="nn md it oa b gy oo of l og oh">import { withKnobs } from "@storybook/addon-knobs";<br/>import { addDecorator } from "@storybook/react";</span><span id="0b1a" class="nn md it oa b gy oo of l og oh">addDecorator(withKnobs);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/86b1b140f2cb08ad3b512318b394bfdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*YYGFCkMQZar01EXGGOzlQA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加配置文件后的文件夹结构</p></figure><p id="1c46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们看到故事书的任何变化之前，我们需要在我们的故事中使用<code class="fe ok ol om oa b">knob</code>。</p><p id="eb54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe ok ol om oa b">button.stories.tsx</code>，使用<code class="fe ok ol om oa b">knob</code>。<code class="fe ok ol om oa b">knob</code>为我们提供了很多<code class="fe ok ol om oa b">knob</code>，比如<code class="fe ok ol om oa b">text</code>、<code class="fe ok ol om oa b">boolean</code>和<code class="fe ok ol om oa b">object </code>，这取决于你的数据类型。</p><p id="8efe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，我们只需要<code class="fe ok ol om oa b">text</code>和<code class="fe ok ol om oa b">boolean</code>，因为这是我们在按钮组件中支持的唯一类型。从<code class="fe ok ol om oa b">@storybook/addon-knobs</code>中导入合适的<code class="fe ok ol om oa b">knob</code>。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1bbb" class="nn md it oa b gy oe of l og oh">// Button/button.stories.tsx</span><span id="a4a9" class="nn md it oa b gy oo of l og oh">import { text, boolean } from "@storybook/addon-knobs";</span></pre><p id="42e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在转到组件故事，如下使用<code class="fe ok ol om oa b">knob</code>:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="c903" class="nn md it oa b gy oe of l og oh">// PrimaryButton inside Button/button.stories.tsx<br/>&lt;Button</span><span id="51ad" class="nn md it oa b gy oo of l og oh">buttonText={text("Button Text", "Primary Button")}</span><span id="a501" class="nn md it oa b gy oo of l og oh">primary={boolean("Primary button", true)}</span><span id="bfeb" class="nn md it oa b gy oo of l og oh">/&gt;</span><span id="421f" class="nn md it oa b gy oo of l og oh">// DangerButton inside Button/button.stories.tsx</span><span id="f871" class="nn md it oa b gy oo of l og oh">&lt;Button</span><span id="c45e" class="nn md it oa b gy oo of l og oh">buttonText={text("Button Text", "Danger Button")}</span><span id="cce6" class="nn md it oa b gy oo of l og oh">danger={boolean("Danger Button", true)}</span><span id="c8f3" class="nn md it oa b gy oo of l og oh">/&gt;</span></pre><p id="8ee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你回到<code class="fe ok ol om oa b">localhost:9009/</code>，你会看到你新添加的<code class="fe ok ol om oa b">knob</code>在起作用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/c0cb1b7c849da445efc241f9a6dce7cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1bEeazUpL93igFpBRa2EQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">旋钮动作</p></figure><p id="3aec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以更改按钮的文本，并使用布尔值来设置按钮的状态，并查看按钮在其状态改变时的行为。</p><p id="6e0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个非常有用的插件是<code class="fe ok ol om oa b">info</code>。当您安装它时，库中的每个文章都会有一个文档页面。这些可以用于记录您的组件，以便其他开发人员了解如何以及为什么可以使用它。</p><p id="22fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要添加此加载项，只需安装该加载项:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="6bd2" class="nn md it oa b gy oe of l og oh">yarn add @storybook/addon-info @types/storybook__addon-info</span></pre><p id="b686" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们首先将它注册到我们的附加组件的<code class="fe ok ol om oa b">main.js</code>文件中。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="9213" class="nn md it oa b gy oe of l og oh">// .storybook/main.js<br/>module.exports = {</span><span id="6cd0" class="nn md it oa b gy oo of l og oh">stories: ["../src/**/*.stories.(ts|tsx|js|jsx)"],</span><span id="69d2" class="nn md it oa b gy oo of l og oh">addons: [</span><span id="733b" class="nn md it oa b gy oo of l og oh">"@storybook/preset-create-react-app",</span><span id="4ae0" class="nn md it oa b gy oo of l og oh">"@storybook/addon-actions",</span><span id="cf7a" class="nn md it oa b gy oo of l og oh">"@storybook/addon-links",</span><span id="9ee6" class="nn md it oa b gy oo of l og oh">"@storybook/addon-knobs",</span><span id="aaec" class="nn md it oa b gy oo of l og oh">"@storybook/addon-info"</span><span id="e181" class="nn md it oa b gy oo of l og oh">]</span><span id="6659" class="nn md it oa b gy oo of l og oh">};</span></pre><p id="3c21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这之后，我们还需要配置这个附加组件来与我们的故事书一起工作。去<code class="fe ok ol om oa b">config.js</code>，注册这个新的插件。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="5dbd" class="nn md it oa b gy oe of l og oh">// .storybook/config.js</span><span id="4d8b" class="nn md it oa b gy oo of l og oh">import { withKnobs } from "@storybook/addon-knobs";</span><span id="0ba9" class="nn md it oa b gy oo of l og oh">import { addDecorator, addParameters } from "@storybook/react";</span><span id="97c9" class="nn md it oa b gy oo of l og oh">import { withInfo } from "@storybook/addon-info";</span><span id="ae0b" class="nn md it oa b gy oo of l og oh">addDecorator(withInfo);</span><span id="3afa" class="nn md it oa b gy oo of l og oh">addDecorator(withKnobs);</span></pre><p id="0022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到你的按钮故事，并配置这个附加组件。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="8350" class="nn md it oa b gy oe of l og oh">import PropTypes from "prop-types";</span><span id="1ff2" class="nn md it oa b gy oo of l og oh">import { Button } from "./index";</span><span id="2cee" class="nn md it oa b gy oo of l og oh">export default {</span><span id="74a0" class="nn md it oa b gy oo of l og oh">title: "Button",</span><span id="8df4" class="nn md it oa b gy oo of l og oh">component: Button,</span><span id="4e0b" class="nn md it oa b gy oo of l og oh">parameters: {</span><span id="b32f" class="nn md it oa b gy oo of l og oh">info: { inline: false }</span><span id="1b7f" class="nn md it oa b gy oo of l og oh">}</span><span id="6eab" class="nn md it oa b gy oo of l og oh">};</span><span id="dbfd" class="nn md it oa b gy oo of l og oh">Button.propTypes = {</span><span id="6e69" class="nn md it oa b gy oo of l og oh">buttonText: PropTypes.string.isRequired,</span><span id="639c" class="nn md it oa b gy oo of l og oh">primary: PropTypes.bool,</span><span id="610e" class="nn md it oa b gy oo of l og oh">danger: PropTypes.bool</span><span id="68a8" class="nn md it oa b gy oo of l og oh">};</span></pre><p id="1aee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只需要使用<code class="fe ok ol om oa b">info</code>参数向您的故事传递某些选项或特定的文档文本(并添加道具类型以显示按钮组件信息接收的道具)。</p><p id="785e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以完全禁用附加组件。根据您想要禁用附加组件的范围，只需通过<code class="fe ok ol om oa b">info:{disable:true}</code>。现在，如果我们在重启服务器后回到<code class="fe ok ol om oa b">localhost:9009/</code>，我们会在右上角看到一个名为Show Info的新区域。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/c621b47218c3596171a6b3b1d52e9274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aMArrvhq6-cw6plNuHukpA.png"/></div></div></figure><p id="f618" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们转到docs，我们看不到任何有趣的东西—只有组件及其使用方式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/1bbdfcc33c25c87fe902e0f641079b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35ujuTJbeQMFtrAVZX4RQw.png"/></div></div></figure><p id="469e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们添加一些文档来更好地阐述这个组件，它做什么，以及应该如何使用它。我们可以将另一个键传递给<code class="fe ok ol om oa b">info </code>——被调用的文本描述了组件做什么以及如何使用它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/75a776fc4ca20cc698bf9cc879636040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*pGKxcB2XxXIpZ8ok8_8GbQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的按钮组件的描述</p></figure><p id="ca68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在添加了<code class="fe ok ol om oa b">text</code>之后，如果我们返回到<code class="fe ok ol om oa b">localhost:9009/</code>并点击show info，我们会看到我们的组件文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/e9a07695eed116e77b432df5ced9edf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2n9E9uOe-Jq0inMPIUR73A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示操作中的信息旋钮</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4d09" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="5614" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如您在本文中所看到的，Storybook易于使用，并且有许多附加组件，使得代码可以很容易地在不同的项目之间共享。它也有适当的文档，我们可以独立地构建我们所有的组件，这样所有的团队成员都可以看到已经构建了哪些组件，以及他们如何使用这些组件。</p><p id="ffa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而如果有新人加入，他们就不用担心组件是否已经构建好，或者如何使用组件。这大大减少了开发时间，并有助于增强您的界面，使它们在不同的项目中保持一致。</p><p id="f84a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文的所有代码都可以在我的GitHub 上获得<a class="ae ky" href="https://github.com/thakursachin467/storybook-intro" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="4a32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>