<html>
<head>
<title>5 Ways to Refactor If/Else Statements in JavaScript Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript函数中重构If/Else语句的5种方法</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-ways-to-refactor-if-else-statements-in-javascript-functions-2865a4bbfe29?source=collection_archive---------6-----------------------#2020-12-09">https://betterprogramming.pub/5-ways-to-refactor-if-else-statements-in-javascript-functions-2865a4bbfe29?source=collection_archive---------6-----------------------#2020-12-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="57a2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让你的代码运行得更快，看起来更整洁</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6cb536f82de8fe2207bb5c209846fbe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ajwWlyRE2dRZfnvg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@timchowstudio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Tim Chow </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄。</p></figure><p id="a7a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将介绍五种通过去除不必要的<code class="fe lv lw lx ly b">if-else</code>语句来整理代码的方法。我将讨论默认参数、OR ( <code class="fe lv lw lx ly b">||</code>)操作符、无效合并、可选链接、<code class="fe lv lw lx ly b">no-else-returns</code>和保护子句。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="3b7d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">1.默认参数</h1><p id="f7d5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">你知道当你使用一个不一致的API并且你的代码因为一些值是<code class="fe lv lw lx ly b">undefined</code>而中断时的感觉吗？</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="d5cf" class="nh mh it ly b gy ni nj l nk nl">let sumFunctionThatMayBreak = (a, b, inconsistentParameter) =&gt; a+b+inconsistentParameter</span><span id="7910" class="nh mh it ly b gy nm nj l nk nl">sumFunctionThatMayBreak(1,39,2) // =&gt; 42<br/>sumFunctionThatMayBreak(2,40, undefined) // =&gt; NaN</span></pre><p id="d385" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于许多人来说，解决这个问题的本能方法是添加一个<code class="fe lv lw lx ly b">if/else</code>声明:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="a9f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，您可以通过实现<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters" rel="noopener ugc nofollow" target="_blank">默认参数</a>来简化上述功能并取消<code class="fe lv lw lx ly b">if/else</code>逻辑:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="20dc" class="nh mh it ly b gy ni nj l nk nl">let simplifiedSumFunction = (a, b, inconsistentParameter = 0) =&gt; a+b+inconsistentParameter</span><span id="7f5f" class="nh mh it ly b gy nm nj l nk nl">simplifiedSumFunction(1, 39, 2) // =&gt; 42<br/>simplifiedSumFunction(2, 40, undefined) // =&gt; 42</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="10b4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">2.OR运算符</h1><p id="89c1" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">使用默认参数并不总能解决上述问题。有时，您可能会遇到需要使用<code class="fe lv lw lx ly b">if-else</code>逻辑的情况——尤其是在尝试构建条件呈现特性时。在这种情况下，问题通常以这种方式解决:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="addf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="1d2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，您可以使用<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">或(</a> <code class="fe lv lw lx ly b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">||</a></code> <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">)操作符</a>来简化它。<code class="fe lv lw lx ly b">||</code>操作器的工作方式如下:</p><ul class=""><li id="e429" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">当左边是一个<code class="fe lv lw lx ly b">falsey</code>值时，它返回右边。</li><li id="2e23" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">如果是<code class="fe lv lw lx ly b">truthy</code>，则返回左侧。</li></ul><p id="e5b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决方案可能是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a593" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">3.无效合并</h1><p id="7779" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">然而，有时你确实想保留<code class="fe lv lw lx ly b">0</code>或<code class="fe lv lw lx ly b">''</code>作为有效的参数，但你不能用<code class="fe lv lw lx ly b">||</code>操作符做到这一点(如上面的例子所示)。幸运的是，从今年开始，JavaScript允许我们使用<code class="fe lv lw lx ly b">??</code> ( <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">无效合并</a>)操作符，该操作符仅在左侧为<code class="fe lv lw lx ly b">null</code>或<code class="fe lv lw lx ly b">undefined</code>时返回右侧。这意味着如果你的参数是<code class="fe lv lw lx ly b">0</code>或<code class="fe lv lw lx ly b">''</code>，它将被如此对待。让我们来看看实际情况:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="aedd" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">4.可选链接</h1><p id="4309" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">最后，在处理不一致的数据结构时，很难相信每个对象都有相同的键。看这里:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="bb0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">发生这种情况是因为<code class="fe lv lw lx ly b">object.name</code>是<code class="fe lv lw lx ly b">undefined</code>，所以我们不能在上面调用<code class="fe lv lw lx ly b">firstName</code>。</p><p id="8a15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">许多人以下列方式处理这种情况:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="a87f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，您可以使用新的JS特性——可选链接——来简化上述操作。可选链接在每一步检查返回值是否是<code class="fe lv lw lx ly b">undefined</code>，如果是，它就返回这个值，而不是抛出一个错误:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6824" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">5.无其他退货和保护条款</h1><p id="2d44" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">对于笨拙的<code class="fe lv lw lx ly b">if/else</code>语句，尤其是那些嵌套的语句，最后的解决方案是<code class="fe lv lw lx ly b"><a class="ae ky" href="https://eslint.org/docs/rules/no-else-return" rel="noopener ugc nofollow" target="_blank">no-else-return</a></code> <a class="ae ky" href="https://eslint.org/docs/rules/no-else-return" rel="noopener ugc nofollow" target="_blank">语句</a>和<a class="ae ky" href="https://anthonygharvey.com/ruby/guard_clauses_vs_nested_if_statements" rel="noopener ugc nofollow" target="_blank">守护子句</a>。假设我们有这个函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="5363" class="nh mh it bd mi od oe dn mm of og dp mq li oh oi ms lm oj ok mu lq ol om mw on bi translated">无-否则-返回</h2><p id="0ac1" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在，我们可以用<code class="fe lv lw lx ly b">no-else-return</code>语句简化这个函数，因为无论如何我们返回的都是<code class="fe lv lw lx ly b">null</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f618" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">no-else-return</code>语句的好处是，如果条件不满足，函数将结束<code class="fe lv lw lx ly b">if-else</code>的执行，并跳转到下一行。你甚至可以没有最后一行(<code class="fe lv lw lx ly b">return null</code>)，然后返回将是<code class="fe lv lw lx ly b">undefined</code>。</p><p id="1fde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">注:我在前面的例子中实际上使用了一个</em> <code class="fe lv lw lx ly b"><em class="oo">no-else-return</em></code> <em class="oo">函数。</em></p><h2 id="56e7" class="nh mh it bd mi od oe dn mm of og dp mq li oh oi ms lm oj ok mu lq ol om mw on bi translated">保护条款</h2><p id="5dc9" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">现在我们可以更进一步，设置保护措施，更早地结束代码执行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="702e" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="7d40" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">你用什么技巧来避免笨拙的陈述？请在评论中告诉我。</p></div></div>    
</body>
</html>