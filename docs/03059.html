<html>
<head>
<title>Write Your Own Wrapper Over HTTP in Angular 2+ With Interceptor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Angular 2+和Interceptor编写自己的HTTP包装器</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/write-your-own-wrapper-over-http-in-angular2-with-interceptor-912c22aa3291?source=collection_archive---------8-----------------------#2020-01-17">https://betterprogramming.pub/write-your-own-wrapper-over-http-in-angular2-with-interceptor-912c22aa3291?source=collection_archive---------8-----------------------#2020-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7721" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在您的应用程序中创建自己的HTTP服务</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/79c8c2446d00deb2ad864f14a857b6b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yCz5L0WL7BHWGv4ei0aKJw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安妮·斯普拉特在<a class="ae ky" href="https://unsplash.com/s/photos/storage?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="8595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将创建我们自己的HTTP服务，这将是非常容易的，可重用的，你需要在你的应用程序中编写更少的代码。</p><p id="5d4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样在本文中，我们将创建我们自己的本地存储服务，它将用于我们自己的HTTP服务。该服务将拦截我们的请求，并将数据(令牌)保存在本地存储中。</p><p id="df07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，让我们开始…</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b837" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建本地存储服务</h1><p id="e36f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们需要首先创建一个本地存储服务，为此，在您的<code class="fe mz na nb nc b">app/src</code>目录中创建一个名为<code class="fe mz na nb nc b">services</code>的文件夹。因此，您的目录将是:<code class="fe mz na nb nc b">app/src/services</code>。</p><p id="de02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在服务目录中，创建一个名为<code class="fe mz na nb nc b">localStorage.service.ts</code>的文件，并粘贴以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ef14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们创建了我们自己的本地存储服务，它有类似于<code class="fe mz na nb nc b">get()</code>、<code class="fe mz na nb nc b">set()</code>、<code class="fe mz na nb nc b">clear()</code>和<code class="fe mz na nb nc b">remove()</code>的方法，这些方法将在任何组件中使用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f0c8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在我们的应用中注册本地存储服务</h1><p id="4c7f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们在我们的<code class="fe mz na nb nc b">app.module.ts</code>文件中注册这个服务。</p><p id="a6b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">app.module.ts</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8178" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建HTTP服务</h1><p id="7910" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，让我们创建我们的HTTP服务。在这个服务中，我们将使用我们的<code class="fe mz na nb nc b">LocalStorage</code>服务。为此，在目录<code class="fe mz na nb nc b">src/app/services</code>中创建一个文件<code class="fe mz na nb nc b">http.service.ts</code>并粘贴以下代码:</p><p id="d036" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mz na nb nc b">http.service.ts</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="f514" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们创建了自己的HTTP服务。我们还创建了一个拦截器，用于每个HTTP请求/响应。</p><p id="2be4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们创建了自己的方法(GET、POST、PUT、DELETE ),就像HTTP方法一样。现在我们将在组件中调用我们自己的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b57e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在app.module.ts中注册HttpService</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="77a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在文件<code class="fe mz na nb nc b">app.module.ts</code>中，我们已经创建了一个方法<code class="fe mz na nb nc b">httpFactory()</code>，它使用了上面的<code class="fe mz na nb nc b">providers[]</code>数组。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a8dc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用更少的代码使用我们自己的HTTP服务</h1><p id="2ca8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们在现有组件中使用该服务:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="a000" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成了，我们已经创建了自己的HTTP服务，只需导入我们的组件就可以使用它。</p><p id="9d5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。</p></div></div>    
</body>
</html>