<html>
<head>
<title>Functional Programming: Currying vs. Partial Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式编程:Currying与部分应用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/functional-programming-currying-vs-partial-application-53b8b05c73e3?source=collection_archive---------5-----------------------#2019-12-15">https://betterprogramming.pub/functional-programming-currying-vs-partial-application-53b8b05c73e3?source=collection_archive---------5-----------------------#2019-12-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="accc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">它们是什么，我们如何使用它们？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bf0e92b7cd04f8bace5f2d46c1ae22a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m9Stv2240n5QGgJo"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@florianklauer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Florian Klauer </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e702" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在学习函数式编程时，许多初学者对函数式编程的一些概念感到困惑。刚接触FP的时候，对<em class="lv">curry</em>和<em class="lv"> partial application很迷茫。</em></p><p id="fbdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本帖中，我将举例说明它们。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="0734" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">什么是Currying？</h1><p id="7fd9" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">嗯，大多数情况下，如果人们对此感到困惑，那么很可能是因为术语<em class="lv">咖喱</em>，它与印度的食物名称相同。</p><p id="1281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在计算机科学中，currying是一种技术的术语。它起源于一个数学函数。</p><p id="6b8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设有一个JavaScript函数，<code class="fe na nb nc nd b">add</code>。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="8907" class="ni me it nd b gy nj nk l nl nm">const add = (x, y) =&gt; x + y;</span></pre><p id="2f0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，<code class="fe na nb nc nd b">add</code>接受两个参数— <code class="fe na nb nc nd b">x</code>和<code class="fe na nb nc nd b">y</code>，并返回一个合计值。这个函数<code class="fe na nb nc nd b">add</code>，可以用数学方式表示如下:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="394f" class="ni me it nd b gy nj nk l nl nm">f(x,y) = x + y</span></pre><p id="0c13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，函数<code class="fe na nb nc nd b">f(x,y)</code>可以这样表示:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="7812" class="ni me it nd b gy nj nk l nl nm">f(x,y) = h(x)(y) = x + y</span></pre><p id="868c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">h</code>是一个采用单个参数的翻译函数，输出一个采用单个参数的函数。有了<code class="fe na nb nc nd b">x = 2</code>，那么函数<code class="fe na nb nc nd b">f</code>就会是这样的，如下图:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="4b3a" class="ni me it nd b gy nj nk l nl nm">f(2,y) = 2 + y</span></pre><p id="7efa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">f(2,y)</code>仍然需要让<code class="fe na nb nc nd b">y</code>返回一个合计值。然后，可以表示为另一个取<code class="fe na nb nc nd b">y</code>的函数，这个等于这个。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="ae1e" class="ni me it nd b gy nj nk l nl nm">f(2,y) = h(2)(y) = 2 + y</span></pre><p id="7007" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe na nb nc nd b">h(2)(y)</code>也指等待<code class="fe na nb nc nd b">y</code>的函数，因为它已经知道<code class="fe na nb nc nd b">x</code>指的是什么。</p><p id="7d9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们回到JavaScript中的<code class="fe na nb nc nd b">add</code>函数。</p><p id="06a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe na nb nc nd b">add</code>是带两个参数的<code class="fe na nb nc nd b">f(x,y)</code>，那么如何用<code class="fe na nb nc nd b">add</code>来表示<code class="fe na nb nc nd b">h(x)(y)</code>？就像<code class="fe na nb nc nd b">h(2)(y)</code>最终返回另一个需要<code class="fe na nb nc nd b">y</code>的函数一样，<code class="fe na nb nc nd b">add</code>也应该返回一个函数，就像这样:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="a3dd" class="ni me it nd b gy nj nk l nl nm">// Arrow function<br/>const add = x =&gt; y =&gt; x + y;</span><span id="6fb8" class="ni me it nd b gy nn nk l nl nm">// Normal function<br/>function add(x) {<br/>  return function(y) {<br/>    return x + y;<br/>  }<br/>}</span></pre><p id="e2ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以这样实现这个函数:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="b690" class="ni me it nd b gy nj nk l nl nm">const addFive = add(5);</span><span id="fb35" class="ni me it nd b gy nn nk l nl nm">addFive(7); // 12</span></pre><p id="de65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，currying函数是一个返回另一个函数的函数，这个函数一次只接受一个参数，就像<code class="fe na nb nc nd b">add</code>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ea8a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">什么是局部应用？</h1><p id="2f7c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">那么，什么是局部应用函数呢？</p><p id="700f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就一秒钟，让我们再来看看currying。我们处理了带两个参数的函数<code class="fe na nb nc nd b">add</code>。你觉得有了三个参数应该是什么样子？</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="98c1" class="ni me it nd b gy nj nk l nl nm">const add = (x, y, z) =&gt; x + y + z;</span></pre><p id="0b44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我解释过currying是一个函数，它返回另一个函数，一次接受一个参数。</p><p id="f3f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，这一次，<code class="fe na nb nc nd b">add</code>取三个参数，它应该被分解成三个不同的取一个参数的函数。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="a59b" class="ni me it nd b gy nj nk l nl nm">const add = x =&gt; (y, z) =&gt; x + y + z;</span></pre><p id="ac1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将返回一个函数，但它仍然同时接受两个参数。然后，必须再次更改返回的函数。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="6729" class="ni me it nd b gy nj nk l nl nm">// Arrow function<br/>const add = x =&gt; y =&gt; z =&gt; x + y + z;</span><span id="4900" class="ni me it nd b gy nn nk l nl nm">// Normal function<br/>function add(x) {<br/>  return function(y) {<br/>    return function(z) {<br/>      return x + y + z;<br/>    }<br/>  }<br/>}</span><span id="f5cb" class="ni me it nd b gy nn nk l nl nm">const addFive = add(5);<br/>const addFourAgain = addFive(4);<br/>const nineTeen = addFourAgain(10);<br/>nineTeen === 19 // true</span></pre><p id="1a5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的，我以为我们要讨论部分应用，但是为什么我们又要讨论奉承呢？因为他们彼此非常非常相似。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="467d" class="ni me it nd b gy nj nk l nl nm">const add = x =&gt; (y, z) =&gt; x + y + z;</span></pre><p id="21e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，这不是一个奉承函数，因为<code class="fe na nb nc nd b">add</code>返回了一个带两个参数的函数，而不是一个。但这是部分应用功能。</p><p id="f940" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…什么？</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="c520" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">共同点和不同点</h1><p id="c100" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">所以，这就是它们之间的区别。</p><p id="55f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Currying:返回另一个函数的函数可能会返回另一个函数，但每个返回的函数一次只能接受一个参数。</p><p id="9d98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">部分应用:一个函数返回另一个函数，这个函数可能返回另一个函数，但是每个返回的函数可以有几个参数。</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="54d0" class="ni me it nd b gy nj nk l nl nm">// Currying function<br/>const add = x =&gt; y =&gt; z =&gt; x + y + z;</span><span id="86e3" class="ni me it nd b gy nn nk l nl nm">// Partial Application function<br/>const add = x =&gt; (y, z) =&gt; x + y + z;</span></pre><p id="1b43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">共同点:<strong class="lb iu"/>currying和partial application功能都是<em class="lv">而不是</em>和原来一样的功能。它们是新返回的函数，参数较少。</p><p id="4547" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不同之处:Currying只有一个参数，不像partial application可以有多个参数。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5c65" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">我为什么需要它们？</h1><p id="9f8f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">两者都允许你利用<em class="lv">懒评</em>。这里有一个简单的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="868d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，每当我们点击<code class="fe na nb nc nd b">#myDiv</code>，它的背景颜色将被设置为不同十六进制的蓝色。我们甚至不必在每次需要的时候都将整个字符串放入代码中。</p><p id="4bfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像上面的例子一样，currying或局部应用使得<em class="lv">惰性评估</em>在需要的地方更加有效。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f813" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="094f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Currying和partial application可能会让开发人员对它们的名字感到困惑，因为他们无法真正猜测它们的名字是用来做什么的。</p><p id="0db5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但实际上，它们都是关于一次接受多少个参数，更重要的是要记住，你可以有效地利用<em class="lv">懒惰评估</em>。</p><p id="61ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能想读我的另一篇文章，讨论函数式编程中的<code class="fe na nb nc nd b">pipe</code>，你也会理解这个流程。感谢您的阅读！</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="d14a" class="ni me it nd b gy nj nk l nl nm">const add = x =&gt; y =&gt; x + y;<br/>const minus = x =&gt; y =&gt; x - y;</span><span id="b384" class="ni me it nd b gy nn nk l nl nm">pipe(<br/> add(5),<br/> minus(10)<br/>)(10); // -5</span></pre><div class="nq nr gp gr ns nt"><a href="https://medium.com/better-programming/functional-programming-and-the-pipe-function-in-javascript-c92833052057" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">JavaScript中的函数式编程和管道函数</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">什么是管道，我们如何使用它？</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">medium.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ks nt"/></div></div></a></div></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5bbf" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">资源</h1><ul class=""><li id="76a1" class="oi oj it lb b lc mv lf mw li ok lm ol lq om lu on oo op oq bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Currying" rel="noopener ugc nofollow" target="_blank">维基中的阿谀奉承</a></li><li id="3a81" class="oi oj it lb b lc or lf os li ot lm ou lq ov lu on oo op oq bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Partial_application" rel="noopener ugc nofollow" target="_blank">维基中的部分应用</a></li><li id="5c22" class="oi oj it lb b lc or lf os li ot lm ou lq ov lu on oo op oq bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/23095637/how-do-you-get-random-rgb-in-javascript" rel="noopener ugc nofollow" target="_blank">在JavaScript中获取随机RGB堆栈溢出</a></li></ul></div></div>    
</body>
</html>