<html>
<head>
<title>Visualize Your iOS App’s Dependency Graph</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可视化您的iOS应用程序的依赖关系图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/visualizing-dependency-graph-in-project-71210a5de269?source=collection_archive---------4-----------------------#2020-04-26">https://betterprogramming.pub/visualizing-dependency-graph-in-project-71210a5de269?source=collection_archive---------4-----------------------#2020-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6952" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解你的代码库的形状</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/baacab26e4788ee74732fa676cca80bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuT7AYte_mD6uhTgs6E9ZQ.png"/></div></div></figure><p id="b267" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我之前的<a class="ae ln" href="https://medium.com/@ashwinshres/cleaning-up-the-resources-in-ios-project-1dad7e50bec1" rel="noopener">文章</a>中，我写了我们如何使用不同的工具来删除未使用的<code class="fe lo lp lq lr b">resources</code>、<code class="fe lo lp lq lr b">classes</code>、<code class="fe lo lp lq lr b">functions</code>和<code class="fe lo lp lq lr b">localized strings</code>。希望你们喜欢。</p><p id="081d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我将讨论另一个我通常用来深入分析我的代码库的工具。这里，我们正在讨论我们项目中的<em class="ls">依赖图</em>。那么什么是依赖图呢？</p><blockquote class="lt lu lv"><p id="5757" class="kr ks ls kt b ku kv jr kw kx ky ju kz lw lb lc ld lx lf lg lh ly lj lk ll lm ij bi translated">用数学术语来说，依赖图是一个<a class="ae ln" href="https://en.wikipedia.org/wiki/Directed_graph" rel="noopener ugc nofollow" target="_blank">有向图，</a>其中有向边连接节点并表示一个方向依赖——<a class="ae ln" href="https://blog.ndepend.com/without-dependency-graph-flying-blind/" rel="noopener ugc nofollow" target="_blank">埃里克·迪特里希</a></p></blockquote><p id="3cc6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我想更多地谈论依赖图，但也许下次在一篇单独的文章中。我要解释的工具是我已经使用了一段时间的一个工具，用来了解我的项目中的类和结构的概况——它们有多大，它们如何相互链接，以及哪些类依赖于哪些类。让我们先深入实际用法，然后再来解释。</p><p id="4138" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该工具是<a class="ae ln" href="https://github.com/PaulTaykalo/objc-dependency-visualizer" rel="noopener ugc nofollow" target="_blank"> Objective-C和Swift依赖可视化工具</a>，使用<code class="fe lo lp lq lr b">.o(object)</code>文件生成依赖图。</p><p id="2dd2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要使用此工具，请首先在终端中输入以下命令:</p><pre class="kg kh ki kj gt lz lr ma mb aw mc bi"><span id="f645" class="md me iq lr b gy mf mg l mh mi">git clone <a class="ae ln" href="https://github.com/PaulTaykalo/objc-dependency-visualizer.git" rel="noopener ugc nofollow" target="_blank">https://github.com/PaulTaykalo/objc-dependency-visualizer.git</a> ;<br/>cd objc-dependency-visualizer ;</span></pre><p id="ba19" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，在Xcode中构建您的iOS项目，然后输入命令:</p><pre class="kg kh ki kj gt lz lr ma mb aw mc bi"><span id="609b" class="md me iq lr b gy mf mg l mh mi">./generate-objc-dependencies-to-json.rb -w -s "" &gt; origin.js ;</span></pre><p id="e2b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面这个命令的作用是，在输入上面的命令之前，它从您刚刚构建的派生数据中取出您的项目，然后准备您的类的有向图。现在输入:</p><pre class="kg kh ki kj gt lz lr ma mb aw mc bi"><span id="97dd" class="md me iq lr b gy mf mg l mh mi">open index.html</span></pre><p id="7b1a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的命令打开您的默认浏览器并显示图表。</p><p id="cf17" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>这可能无法在Safari中运行，所以请使用Chrome或Firefox打开那个<code class="fe lo lp lq lr b">index.html</code>文件。</p><p id="b152" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">出于演示的目的，我用我现有的项目准备了下面的图表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/baacab26e4788ee74732fa676cca80bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuT7AYte_mD6uhTgs6E9ZQ.png"/></div></div></figure><p id="e353" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我知道它看起来模糊，但我不得不缩小显示所有的类。仔细看看下面的图表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mj"><img src="../Images/4e9ad473282be60ed4a5216bdcd04001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3bd_opavnjQi5P_ZQ8PaUw.png"/></div></div></figure><p id="6ab2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有这些橙色的圆圈是视图控制器，棕色的是常量和结构，等等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/f8a6337dac3e0450bd7fe2ebd1d64870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4HL39ycccTmsOn7WGymZyA.png"/></div></div></figure><p id="b7bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击一个圆圈，它与它所依赖的所有其他类或者与它有依赖关系的类一起高亮显示，如上图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/fb6744ad2c7f85f3f83868bc47b3fa97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zopB7NyK6851_RuZNDZuBw.png"/></div></div></figure><p id="8e13" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你仔细观察依赖图，你会注意到有一些圆圈远离主集群——这些被称为<em class="ls">岛</em>。它们是独立的代码片段，不依赖于主代码库，可能会也可能不会服务于项目的目的。</p><p id="4091" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">岛不一定是坏的，但是从依赖图视图中，我们可以看到我们肯定可以删除整个岛，因为它没有任何用途。</p><p id="28f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以这一切的要点是使用依赖图查看器，我们可以看到我们项目中代码库的分布。它给出了代码库的动态分析。这也有助于我们看到类之间的<em class="ls">循环依赖</em>。当两个或多个抽象相互之间有直接或间接的依赖关系时，就形成了循环依赖关系。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="e446" class="mt me iq bd mu mv mw mx my mz na nb nc jw nd jx ne jz nf ka ng kc nh kd ni nj bi translated">结论</h1><p id="4160" class="pw-post-body-paragraph kr ks iq kt b ku nk jr kw kx nl ju kz la nm lc ld le nn lg lh li no lk ll lm ij bi translated">感谢阅读。编码快乐！</p></div></div>    
</body>
</html>