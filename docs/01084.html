<html>
<head>
<title>Building a React Components Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建React组件库</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-a-react-components-library-f5a390d5973d?source=collection_archive---------0-----------------------#2019-08-13">https://betterprogramming.pub/building-a-react-components-library-f5a390d5973d?source=collection_archive---------0-----------------------#2019-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5ffe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第1部分—库本身和本地开发设置</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2d11d0c234a65a30ada9fbc376cb38b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEt3AnraTExw1DlwJGH_qw.jpeg"/></div></div></figure><p id="9ecf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">分享是关怀。在软件中，共享也会导致…解耦！</p><ul class=""><li id="6a73" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">你的代码库有没有被如此多的组件淹没，以至于它们基本上都在尖叫着要被提取出来？</li><li id="62eb" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">你有一个很酷的UI库的想法，或者想要在多个项目中共享你的组件吗？</li><li id="6467" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">或者你只是想学习如何创建组件库并将它们发布到<a class="ae me" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>？</li></ul><p id="42f3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有这些情况都包含在本教程中。这将是一个由四部分组成的系列，每一部分都涵盖了流程的不同部分。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="637c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated"><strong class="ak">教程部分</strong></h1><ul class=""><li id="f13b" class="lq lr it kw b kx ne la nf ld ng lh nh ll ni lp lv lw lx ly bi translated">第一部分----建立地方发展项目</li><li id="2683" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated"><a class="ae me" href="https://medium.com/better-programming/building-a-react-components-library-6a05c2bca538" rel="noopener">第二部分-测试</a></li><li id="7c24" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated"><a class="ae me" href="https://medium.com/better-programming/lets-build-react-components-library-part-3-b2e7aec478a2" rel="noopener">第三部分——配置模块捆绑器并将我们库的第一个版本发布给npm </a></li><li id="b366" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">第四部分-自动将配置项添加到部署文档中</li></ul><p id="afa8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注<strong class="kw iu"> : </strong>敬请期待下一篇。他们一出来，列表就会更新相应的链接。</p><p id="10c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将从零开始，从最基本的东西开始建造它。这远比听起来容易！</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="507e" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">技术栈</h1><p id="b640" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">让我们看一下我们将在项目中使用的技术的完整列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/dd0e8f436f044113762f3ab9faf37e8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjDYqzgXcuAowgfOvbkMKw.jpeg"/></div></div></figure><ul class=""><li id="9cb8" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">React用于创建组件，而<a class="ae me" href="https://emotion.sh/docs/introduction" rel="noopener ugc nofollow" target="_blank"> Emotion </a>用于设计它们</li><li id="2fa8" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">用于实时开发和生成文档</li><li id="44eb" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated"><a class="ae me" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>与<a class="ae me" href="https://github.com/testing-library/react-testing-library" rel="noopener ugc nofollow" target="_blank"> React测试库</a>进行测试</li><li id="8377" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated"><a class="ae me" href="https://rollupjs.org/" rel="noopener ugc nofollow" target="_blank"> Rollup </a>和<a class="ae me" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank"> Babel </a>用于捆绑库以发布到npm</li><li id="6f33" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated"><a class="ae me" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> Travis CI </a>用于将文档自动部署到GitHub页面</li></ul></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="ef76" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">准备项目</h1><p id="ad58" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我们从最基本的开始，所以让我们设置一些基础来为项目创建一个框架。</p><h2 id="4e4f" class="nn mn it bd mo no np dn ms nq nr dp mw ld ns nt my lh nu nv na ll nw nx nc ny bi translated">package.json</h2><p id="463b" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">首先，为库创建一个目录。进入内部并初始化npm包:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="7520" class="nn mn it oa b gy oe of l og oh">mkdir react-sample-components-library<br/>cd react-sample-components-library<br/>npm init -y</span></pre><p id="11ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">耶，<code class="fe oi oj ok oa b">npm init</code>。</p><p id="366d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我告诉过你我们是从零开始建造的！通过运行带有<code class="fe oi oj ok oa b">-y</code>标志的<code class="fe oi oj ok oa b">npm init</code>，无需回答所有那些无聊的设置问题就可以创建<code class="fe oi oj ok oa b">package.json</code>。包名将默认为目录名。</p><h2 id="c816" class="nn mn it bd mo no np dn ms nq nr dp mw ld ns nt my lh nu nv na ll nw nx nc ny bi translated">核心依赖:反应和情感</h2><p id="2edd" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我们将在我们的库中使用React和Emotion，所以让我们安装并添加它们为<code class="fe oi oj ok oa b">peerDependencies</code>。</p><p id="2013" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么是<code class="fe oi oj ok oa b">peer</code>？它告诉<code class="fe oi oj ok oa b">npm/yarn</code>我们的依赖项的<a class="ae me" href="https://docs.npmjs.com/files/package.json#peerdependencies" rel="noopener ugc nofollow" target="_blank">兼容性，也帮助我们以后防止它们被捆绑到最终的包中。相信我，将整个<code class="fe oi oj ok oa b">React</code>捆绑到你的库中是一个非常糟糕的主意。</a></p><p id="3ed1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们运行以下命令来安装核心依赖项:</p><p id="f840" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe oi oj ok oa b">npm install --save-dev react react-dom @emotion/core @emotion/styled</code></p><p id="277a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">稍后，手动更新<code class="fe oi oj ok oa b">peerDependencies</code>，替换库的版本以匹配<a class="ae me" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">主版本</a>。我们的<code class="fe oi oj ok oa b">package.json</code>现在应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated">package.json</p></figure><h2 id="3332" class="nn mn it bd mo no np dn ms nq nr dp mw ld ns nt my lh nu nv na ll nw nx nc ny bi translated">使用Styleguidist进行实时开发</h2><p id="7f78" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">让我们添加Styleguidist，因为我们将使用它进行组件的实时重新加载和预览开发:</p><p id="204a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe oi oj ok oa b">npm install --save-dev react-styleguidist webpack</code></p><p id="904a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了让Styleguidist工作，我们需要安装带有一些预置的Babel，并为Babel和Styleguidist创建配置文件。</p><p id="af74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要安装所有Babel必需的软件包，请运行:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1f10" class="nn mn it oa b gy oe of l og oh">npm install --save-dev \<br/>            babel-loader \<br/>            @babel/core \<br/>            @babel/preset-env \<br/>            @babel/preset-react</span></pre><p id="1450" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们需要在项目的根目录下创建Babel配置文件<code class="fe oi oj ok oa b">.babelrc</code>。让我们在那里添加已安装的预设:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated">。巴伯尔克</p></figure><p id="86af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后一步是设置Styleguidist的内部<code class="fe oi oj ok oa b">webpack</code>实例，以使用我们的<code class="fe oi oj ok oa b">Babel</code>配置来正确加载组件。</p><p id="c676" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们用以下内容创建<code class="fe oi oj ok oa b">styleguide.config.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated"><code class="fe oi oj ok oa b">styleguide.config.js</code></p></figure><p id="9b9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在已经准备好启动live development服务器了！</p><p id="a2e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将<code class="fe oi oj ok oa b">”start”: “styleguidist server”</code>脚本添加到您的<code class="fe oi oj ok oa b">package.json</code>并运行<code class="fe oi oj ok oa b">npm start</code>。</p><p id="32ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">输入<code class="fe oi oj ok oa b"><a class="ae me" href="http://localhost:6060/" rel="noopener ugc nofollow" target="_blank">http://localhost:6060</a></code>，您应该会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/441c0acb9fb5ed06e909699066e6d155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MnuFzA-wcpZOJbxCCWa80w.png"/></div></div></figure><p id="a013" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它在跑！但是等等，是空的…</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="ae5c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">创建组件</h1><p id="7e4f" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我们已经完全建立了项目和开发环境的框架，现在可以创建一些组件了。</p><p id="adcf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">组件的源代码将被放置在<code class="fe oi oj ok oa b">src/components</code>目录中。非常简单。</p><p id="90a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们在项目中创建以下结构:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1a29" class="nn mn it oa b gy oe of l og oh">src/<br/>└── components/<br/>    └── Button.js</span></pre><p id="0a24" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将从制作一个非常简单的按钮开始。</p><p id="00ac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将以下代码复制到<code class="fe oi oj ok oa b">src/components/Button.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated"><code class="fe oi oj ok oa b">src/components/Button.js</code></p></figure><p id="998d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">再次输入<code class="fe oi oj ok oa b"><a class="ae me" href="http://localhost:6060" rel="noopener ugc nofollow" target="_blank">http://localhost:6060</a></code>……<em class="os">鼓声</em>……我们看到按钮已经找到了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/d1a16feead4676f54feb25b0187b2d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9JVI97DLOyZamnGSmdJyA.png"/></div></div></figure><p id="4b21" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它还没有显示任何东西，但是Styleguidist <a class="ae me" href="https://react-styleguidist.js.org/docs/documenting.html" rel="noopener ugc nofollow" target="_blank">使预览和描述组件</a>变得很容易。</p><p id="970c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们在<code class="fe oi oj ok oa b">Button.js</code>旁边添加<code class="fe oi oj ok oa b">Button.md</code> markdown文件，并在里面键入:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated"><code class="fe oi oj ok oa b">src/components/Button.md</code></p></figure><p id="895d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以在这里将Markdown与JavaScript/React代码混合使用，以便于展示示例和描述。</p><p id="48f2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加完<code class="fe oi oj ok oa b">Button.md</code>后，让我们重启Styleguidist <code class="fe oi oj ok oa b">(npm start)</code>并刷新文档(仅在添加<code class="fe oi oj ok oa b">.md</code>文件时需要，否则会热重新加载)，我们现在应该看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/8d5856cd43e15b931609c42306a8457f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-JT41JxUULK9ykyQVGY0WQ.png"/></div></div></figure><p id="ce49" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们已经创建了我们的第一个组件，拥有一个带有实时预览的开发环境，同时还拥有可以导出的文档。</p><p id="c98e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">#组件-库-目标。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="fa1d" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">让我们添加一些风格</h1><p id="9947" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我们的按钮很普通，也很无聊。用纯CSS写不方便；让我们使用Emotion拥有一些CSS-in-JS功能来轻松编写样式。</p><p id="357f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="os">注意:如果要使用</em> <a class="ae me" href="https://emotion.sh/docs/styled#targeting-another-emotion-component" rel="noopener ugc nofollow" target="_blank"> <em class="os">组件选择器</em> </a> <em class="os">，需要安装一个</em> <code class="fe oi oj ok oa b"><em class="os">Babel</em></code> <em class="os">插件来处理</em> <code class="fe oi oj ok oa b"><em class="os">Emotion</em></code> <em class="os">样式的预处理。</em></p><p id="406f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为此，运行<code class="fe oi oj ok oa b">npm install --save-dev babel-plugin-emotion</code>并将插件添加到<code class="fe oi oj ok oa b">.babelrc</code> : <code class="fe oi oj ok oa b">“plugins”: [“emotion”]</code>。</p><p id="a58d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在让我们在按钮上撒一些CSS:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated"><code class="fe oi oj ok oa b">src/components/Button.js</code></p></figure><p id="d676" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我叫巴顿，巴顿。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/bdbd741e451d7e255c58544412d02e45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFQitAeyJtvWM4IjW4XHyw.png"/></div></div></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="6634" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">添加更多组件和实用程序</h1><p id="11fa" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">当库增长时，最好在组件之间共享公共部分。</p><p id="5bc1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从<code class="fe oi oj ok oa b">Button</code>组件中提取一些样式，放入一个单独的文件:<code class="fe oi oj ok oa b">src/config/styles.js</code>。</p><p id="7fc0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了创建可以跨组件共享的CSS，我们将使用Emotion的<code class="fe oi oj ok oa b">css</code>函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated"><code class="fe oi oj ok oa b">src/config/styles.js</code></p></figure><p id="86eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在可以将样式导入并添加到按钮中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated">src/components/Button.js</p></figure><p id="ff4f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们改进了一件事，但现在另一件变坏了…</p><p id="6688" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看到那个<code class="fe oi oj ok oa b">from '../config/styles'</code>了吗？想象一下有更多层次的嵌套…</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="d44f" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">绝对进口</h1><p id="5dfd" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">让我们把相对进口改为绝对进口。</p><p id="b9bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe oi oj ok oa b">Babel</code>模块解析器插件再次拯救了我们。</p><p id="6385" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们用<code class="fe oi oj ok oa b">npm install babel-plugin-module-resolver</code>安装它，然后像这样把它添加到<code class="fe oi oj ok oa b">.babelrc</code>的插件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated">。巴伯尔克</p></figure><p id="e6c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对我的朋友FatFisz ( <a class="ae me" href="https://github.com/fatfisz" rel="noopener ugc nofollow" target="_blank"> @GitHub </a>)为那个插件贡献良多大声喊出来！</p><p id="356e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe oi oj ok oa b">root</code>选项告诉<code class="fe oi oj ok oa b">Babel</code>在哪里寻找模块。</p><p id="70c9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就像指定一个额外的<code class="fe oi oj ok oa b">node_modules</code>目录。现在，我们可以从<code class="fe oi oj ok oa b">src</code>导入东西。<code class="fe oi oj ok oa b">Button</code>中的丑<code class="fe oi oj ok oa b">'../config/styles'</code>变成了:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="on oo gj gh gi op oq bd b be z dk translated">src/组件/按钮。</p></figure><p id="d217" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，我们可以直接从其他组件导入组件。</p><p id="2c8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，如果我们想在不同的组件中导入<code class="fe oi oj ok oa b">Button</code>，我们会这样做(因为<code class="fe oi oj ok oa b">components</code>目录是<code class="fe oi oj ok oa b">src</code>的直接子目录):</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="a40e" class="nn mn it oa b gy oe of l og oh">import Button from 'components/Button';</span></pre></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="070d" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">摘要</h1><p id="b2d0" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我们已经从头开始创建了React组件库！</p><p id="cede" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们添加了Styleguidist来设置开发环境，并添加了Babel来适当地转换我们的React代码。然后我们创建了我们的第一个组件，用情感设计了它，并提取了一些共享的CSS。</p><p id="115d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们通过启用绝对导入提高了代码的可读性。</p><p id="46e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们做得很好！这部分到此为止。</p><p id="d11b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完整的代码可以在<a class="ae me" href="https://github.com/tfiechowski/react-sample-components-library" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中找到。您可以查看<code class="fe oi oj ok oa b">part1</code>标签(<code class="fe oi oj ok oa b">git checkout part1</code>)来查看该零件的完整示例。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="c3fd" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">下一个</h1><p id="76e4" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">在下一篇文章中，我们将关注测试。</p></div></div>    
</body>
</html>