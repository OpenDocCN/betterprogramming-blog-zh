<html>
<head>
<title>Skip the Lambda Function, Connect Directly to Your AWS Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跳过Lambda函数，直接连接到您的AWS服务</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/skip-the-lambda-function-connect-directly-to-your-aws-services-5f10798f2d5a?source=collection_archive---------2-----------------------#2022-10-06">https://betterprogramming.pub/skip-the-lambda-function-connect-directly-to-your-aws-services-5f10798f2d5a?source=collection_archive---------2-----------------------#2022-10-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5e42" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">您知道API Gateway可以直接集成100多种服务吗？了解如何跳过Lambda，以及在跳过时需要注意什么</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d50a66ecf6315b3c5eda1e37bab1fe9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WV19Bm3V6WTM00HfaJu5wA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自Freepik上的<a class="ae ky" href="https://www.freepik.com/free-vector/enthusiastic-concept-illustration_10255231.htm#query=excited&amp;position=11&amp;from_view=search&amp;track=sph" rel="noopener ugc nofollow" target="_blank">故事集</a></p></figure><p id="55ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无服务器是一个<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/quick-optimizations-you-should-make-to-your-serverless-applications-9cc73ec464b9">不断改进</a>的永无止境的过程。</p><p id="bb68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">改进设计。减少延迟。为开发者体验优化API。最小化成本。你明白了。</p><p id="bda4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最喜欢的增强无服务器系统的方法之一是减少支持它们的基础设施的数量。</p><p id="6a3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">早在2021年初，我在Nimbella(现在的<a class="ae ky" href="https://www.digitalocean.com/" rel="noopener ugc nofollow" target="_blank">数字海洋</a>)会议上做了一个关于<a class="ae ky" href="https://www.readysetcloud.io/talks/power-tuning-your-serverless-api" rel="noopener ugc nofollow" target="_blank">为快乐的客户对你的无服务器API进行功率调优</a>的演讲。这里有几个优化点，但我希望人们记住的关键点是API Gateway直接连接到AWS服务。</p><p id="5cfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当执行像<code class="fe lv lw lx ly b">DynamoDB GetItem</code>、<code class="fe lv lw lx ly b">SQS SendMessage</code>或<code class="fe lv lw lx ly b">Step Functions StartSyncExecution</code>这样的单一操作时，不需要Lambda函数。默认情况下，我们中的许多人会添加一个Lambda函数来执行简单的操作。</p><p id="4e57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是你不需要。</p><p id="593c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">增加的Lambda函数增加了应用程序的成本和复杂性。也是不必要的代码。詹姆斯·贝斯维克说得好，“代码是一种负担。”</p><p id="b8b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至此，让我们来讨论如何开始将API网关直接连接到下游服务，以跳过“Lambda glue”并减少延迟时间。</p><h1 id="104e" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">可用服务</h1><p id="a2df" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">当我对API Gateway支持的服务进行初步研究时，我期待着“六大”:Lambda、DynamoDB、SNS、SQS、EventBridge和Step函数。</p><p id="6eb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是事实证明，<a class="ae ky" href="https://gist.github.com/allenheltondev/de6c777bb00171b29714c9d89f593573" rel="noopener ugc nofollow" target="_blank">有104个服务</a>可以直接集成。这是一个令人印象深刻的数字，它为数量惊人的用例打开了大门。</p><p id="9845" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使这篇文章可读性更好，篇幅不超过300页，我们不会涉及与每个服务集成的细节，但是我们将浏览一个服务，看看组件以及如何将其扩展到您希望集成的任何服务。</p><p id="b33b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该示例是一个通用集成，应该适用于上面列表中的大多数服务。</p><h1 id="94ff" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">构建集成</h1><p id="430a" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">我是API优先开发(T2)的倡导者。成功的关键是通过像<a class="ae ky" href="https://www.openapis.org/" rel="noopener ugc nofollow" target="_blank">开放API规范</a>这样的规范文档来定义你的API。记住这一点，我们所有的集成都可以在规范中定义。</p><p id="f280" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">API Gateway有一个<a class="ae ky" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions-integration.html" rel="noopener ugc nofollow" target="_blank">开放API扩展</a>，它接受您的定义并将其翻译成AWS资源。作为路径定义的一部分，它正好符合我们的规范，我们将使用它来配置直接集成。</p><p id="e092" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过API gateway直接连接服务主要关注于将请求有效负载转换为SDK格式，并将响应格式化为用户友好的有效负载。Alex Debrie 在他的<a class="ae ky" href="https://www.alexdebrie.com/posts/api-gateway-elements/#step-2-transforming-the-request-with-the-integration-request" rel="noopener ugc nofollow" target="_blank">API网关元素概述</a>中详细介绍了这个阶段。</p><p id="48d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具体来说，通过这些直接集成，我们的重点是重新创建服务支持的REST API调用。这意味着我们必须找出头部并请求主体提供服务。</p><p id="9926" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们举一个真实世界的例子。</p><p id="6d2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想构建一个端点，它接受英语文本字符串，并将其翻译成西班牙语返回。为此，我可以调用<a class="ae ky" href="https://docs.aws.amazon.com/translate/latest/dg/what-is.html" rel="noopener ugc nofollow" target="_blank"> Amazon Translate </a>服务中的<code class="fe lv lw lx ly b">TranslateText</code> API。</p><p id="4800" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的API规范中，这种集成最终会是这样的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="1c0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个代码片段有很多东西需要解开。</p><p id="5309" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将谈论URI。这告诉API gateway它将调用哪个服务和动作。<a class="ae ky" href="https://docs.aws.amazon.com/apigateway/latest/api/API_Integration.html#apigw-Type-Integration-uri" rel="noopener ugc nofollow" target="_blank"> API网关文档</a>将该属性描述为:</p><blockquote class="my mz na"><p id="e506" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated"><em class="it">URI的形式为</em> <code class="fe lv lw lx ly b"><em class="it">arn:aws:apigateway:{region}:{service}:path|action/{service_api}</em></code> <em class="it">。这里，</em> <code class="fe lv lw lx ly b"><em class="it">{Region}</em></code> <em class="it">是API网关区域(如us-east-1)；</em> <code class="fe lv lw lx ly b"><em class="it">{service}</em></code> <em class="it">是集成AWS服务的名称(如s3)。动作可以用于一个AWS服务的基于动作的API，使用一个</em> <code class="fe lv lw lx ly b"><em class="it">Action={name}&amp;{p1}={v1}&amp;p2={v2}</em></code> <em class="it">。随之而来的</em> <code class="fe lv lw lx ly b"><em class="it">{service_api}</em></code> <em class="it">是指一个被支持的动作</em> <code class="fe lv lw lx ly b"><em class="it">{name}</em></code> <em class="it">加上任何需要的输入参数。</em></p><p id="7cfe" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated"><em class="it">或者，path可用于基于AWS服务路径的API。</em></p></blockquote><p id="c441" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建URI首先需要的是服务名。你可以从这个要点中得到服务的名称<a class="ae ky" href="https://gist.github.com/shortjared/4c1e3fe52bdfa47522cfe5b41e5d6f22" rel="noopener ugc nofollow" target="_blank">。只是确保不包括<code class="fe lv lw lx ly b">.amazonaws.com</code>部分。你只需要名字。在我们的例子中，我们使用translate作为服务名。</a></p><p id="5946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">URI的下一部分是决定我们是否需要<code class="fe lv lw lx ly b">path</code>或<code class="fe lv lw lx ly b">action</code>。不幸的是，每种服务都是不同的，支持也因集成的服务而异。</p><p id="8b77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我发现如果你不知道使用哪一个，你可以像我上面用<code class="fe lv lw lx ly b">path/${AWS::AccountId}</code>那样建模，并在<code class="fe lv lw lx ly b">X-Amz-Target</code>头中提供动作的识别信息。这是一个通用的实现，适用于许多服务。</p><p id="a049" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们主要关心两个标题:</p><ul class=""><li id="9cea" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><code class="fe lv lw lx ly b">Content-Type</code>的应用<code class="fe lv lw lx ly b">/x-amz-json-1.1</code></li><li id="042e" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><code class="fe lv lw lx ly b">X-Amz-Target</code></li></ul><p id="3036" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会问为什么<code class="fe lv lw lx ly b">Content-Type</code>头必须是这个特殊值而不是application/JSON？不幸的是，它没有被官方记录，但是一个<a class="ae ky" href="https://stackoverflow.com/questions/65118844/what-is-application-x-amz-json-and-how-is-it-different-from-application-json" rel="noopener ugc nofollow" target="_blank">可靠的推测</a>相信它是一个告诉AWS服务额外行为的扩展。</p><p id="4089" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">X-Amz-Target</code>头告诉服务您想要运行哪个操作。该值根据您正在集成的服务而变化，并不总是容易找到。</p><p id="8d4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现定位<code class="fe lv lw lx ly b">X-Amz-Target</code>值的最好方法是从<a class="ae ky" href="https://repost.aws/questions/QUbRw_C7KISoOrFN5ShYNuFQ/http-resolver-x-amz-target" rel="noopener ugc nofollow" target="_blank">AWS支持票</a>中找到，建议查看服务的<a class="ae ky" href="https://github.com/aws/aws-sdk-js/tree/master/apis" rel="noopener ugc nofollow" target="_blank"> SDK文档</a>并定位元数据中的<code class="fe lv lw lx ly b">targetPrefix</code>字段。</p><p id="3112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们上面的例子中，亚马逊翻译的<code class="fe lv lw lx ly b"><a class="ae ky" href="https://github.com/aws/aws-sdk-js/blob/master/apis/translate-2017-07-01.normal.json#L12" rel="noopener ugc nofollow" target="_blank">targetPrefix</a></code>T11是<code class="fe lv lw lx ly b">AWSShineFrontendService_20170701</code>。因此，我们将它与我们想要运行的操作<a class="ae ky" href="https://github.com/aws/aws-sdk-js/blob/master/apis/translate-2017-07-01.normal.json#L444" rel="noopener ugc nofollow" target="_blank"> TranslateText </a>结合起来，构建我们的最终头值<code class="fe lv lw lx ly b">AWSShineFrontendService_20170701.TranslateText</code>。</p><p id="081f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的<code class="fe lv lw lx ly b">requestTemplates</code>属性是一个转换，它接受请求负载并以正确的格式将其传递给服务。</p><p id="4a44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">服务运行后，responses属性将响应转换为您希望返回给调用者的格式。</p><p id="3f2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这些的更多细节，<a class="ae ky" href="https://twitter.com/andmoredev" rel="noopener ugc nofollow" target="_blank"> Andres Moreno </a>在他的关于<a class="ae ky" href="https://www.andmore.dev/blog/build-serverless-api-with-no-lambda/" rel="noopener ugc nofollow" target="_blank">如何在AWS中不使用单一Lambda函数</a>构建无服务器API的帖子中做了漂亮的描述。</p><p id="a5e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构建直接集成的最后一部分是IAM角色。您必须构建一个允许API Gateway执行您正在集成的操作的角色。端点的角色可能如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a0d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以看到承担这个角色的主体的作用域是API Gateway。遵循<a class="ae ky" href="https://aws.amazon.com/blogs/security/techniques-for-writing-least-privilege-iam-policies/" rel="noopener ugc nofollow" target="_blank">最小特权</a>原则，我们只允许它执行<code class="fe lv lw lx ly b">TranslateText</code>操作。</p><p id="331a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个角色在扩展的credentials属性中的API规范中被引用。</p><pre class="kj kk kl km gt nt ly nu nv aw nw bi"><span id="9a93" class="nx ma it ly b gy ny nz l oa ob">x-amazon-apigateway-integration: <br/>  credentials: <br/>    Fn::Sub: ${TranslateTextRole.Arn}</span></pre><p id="57f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个，我们就有了将我们的集成部署到云中的所有组件！请<a class="ae ky" href="https://gist.github.com/allenheltondev/4337bfc2165c4ef0bc31517159fede90" rel="noopener ugc nofollow" target="_blank">参考本要点</a>获取完整的集成副本。</p><p id="0461" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们部署并到达终点后。成功！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/b78f76f2267b068590cf914d0638f16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vkWKz0RsgPrBS3oU.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="od">与亚马逊翻译成功整合</em></p></figure><p id="678c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它不仅可以工作，而且你可以看到它的速度非常快。做翻译的往返才194ms！</p><h1 id="d3a3" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">直接整合的危险</h1><p id="795e" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">从理论上讲，去掉Lambda函数是一个好主意。你需要维护的资源少了一个；这是“配置胜于代码”，总的来说，这是少了一个可能出错的部分。</p><p id="fb16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是也有一些缺点。</p><p id="c545" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过API Gateway直接与服务集成，您将失去<a class="ae ky" href="https://www.techtarget.com/searchsoftwarequality/definition/unit-testing" rel="noopener ugc nofollow" target="_blank">单元测试</a>的能力。由于没有代码运行，这些低级测试并不真正适用。</p><p id="e524" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有些人会说你不需要对调用第三方服务进行单元测试。在这种情况下，您唯一可以测试的是传递给AWS操作的数据的形状。验证您的开发人员为正确的字段提供了正确的数据，这是一个值得的测试吗？</p><p id="9c46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代替单元测试，在你的代码被部署后，你必须进一步依赖于<a class="ae ky" href="https://www.guru99.com/integration-testing.html" rel="noopener ugc nofollow" target="_blank">集成测试</a>的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/are-you-really-ready-for-ci-cd-9a8bf6d01b8a"> CI过程</a>来捕捉任何错误。</p><p id="a12d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个重要的考虑因素是数据完整性。如果您从API规范直接将数据插入DynamoDB，您可能会绕过一些重要的验证、丰富或其他代码正在执行的模式检查。</p><p id="bee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你的实体不可避免地改变时，在多个地方定义你的实体的形状(像一个共享的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-build-both-kinds-of-aws-lambda-layers-yes-there-are-two-edb945979f17"> Lambda层</a>和你的开放API规范集成)增加了出错的可能性。开发人员可能只更新一个地方，而不更新另一个地方，导致数据格式陈旧。</p><p id="516f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导致开发人员回避直接集成的一个原因是使用了<a class="ae ky" href="https://velocity.apache.org/engine/devel/vtl-reference.html" rel="noopener ugc nofollow" target="_blank"> VTL </a>和<a class="ae ky" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html" rel="noopener ugc nofollow" target="_blank"> API网关映射模板</a>。当你决定是否要将它融入你的应用程序时，这是需要考虑的事情。你的开发人员和任何维护你的应用程序的人都需要学习VTL。</p><p id="be4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于提升你的团队技能，有一些事情要说，但是有些情况可能更适合坚持你所知道的。尤其是当涉及到VTL的复杂性质时。</p><h1 id="1fed" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">摘要</h1><p id="0859" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">将API端点直接集成到AWS服务是减少延迟和最小化应用程序活动部分的好方法。简单的单操作端点非常适合这种类型的集成。</p><p id="541b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，没有单一一致的方法来构建它们。他们有时觉得有点像是徒劳无功。但是您使用它们越多，您就越熟悉如何为给定的集成找到正确的信息。</p><p id="f08b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你愿意承担风险，比如依赖集成测试而不是单元测试，在使用数据持久性集成时严格控制数据结构，以及学习VTL，直接集成可能会很棒。</p><p id="3294" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">直接服务电话的简单和优雅令人惊叹。您将负责IAM角色和映射模板。就是这样！</p><p id="9e06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用直接集成已经有一段时间了，但主要是用DynamoDB、SQS和阶跃函数。我的团队现在对VTL和与映射模板相关的调试问题相对比较满意。对我们来说，这个决定很容易。当我们可以直接整合时，我们会的。</p><p id="9826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成本降低了，性能提高了，由于代码减少了，bug也减少了。</p><p id="baf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这并不适合所有人，但是适合那些选择直接集成更多服务的人——祝你们好运！</p><p id="cf44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div></div>    
</body>
</html>