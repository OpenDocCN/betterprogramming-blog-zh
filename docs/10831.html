<html>
<head>
<title>Learning Flutter by Building a Discord Client</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过建立一个不和谐的客户学习颤振</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learning-flutter-by-building-a-discord-client-part-1-getting-started-1fb56df83ae2?source=collection_archive---------4-----------------------#2022-01-29">https://betterprogramming.pub/learning-flutter-by-building-a-discord-client-part-1-getting-started-1fb56df83ae2?source=collection_archive---------4-----------------------#2022-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3d96" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第1部分:入门</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d4c354c0cb4958188fdec00a04644538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5SlUutpJ1oAIgS1r"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@alexbemore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚历山大·沙托夫</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="4ebc" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="69d9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><a class="ae kv" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> Flutter </a>是一项热门的新技术，有望为高性能和漂亮的跨平台应用提供动力。在这个博客系列中，我希望通过用这个堆栈构建一个<a class="ae kv" href="https://discord.com/" rel="noopener ugc nofollow" target="_blank"> Discord客户端</a>来测试这一点。</p><p id="4479" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我特别感兴趣的是，Flutter是否有可能取代桌面上普遍不受欢迎的电子设备，这就是为什么我将主要在多平台桌面应用的背景下评估它。我们走吧。</p><h1 id="988a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">入门指南</h1><p id="4102" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">入门体验(对于<a class="ae kv" href="https://docs.flutter.dev/get-started/install/macos" rel="noopener ugc nofollow" target="_blank"> macOS至少是</a>)相当流畅。我的环境已经包含了必要的特定于平台的依赖项，这意味着我的Flutter安装很快就完成了。</p><p id="476d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">就编辑而言，我非常喜欢在<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>中工作，所以我很高兴看到第一方支持提供了<a class="ae kv" href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.dart-code" rel="noopener ugc nofollow" target="_blank"> Dart </a>和<a class="ae kv" href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter" rel="noopener ugc nofollow" target="_blank"> Flutter </a>扩展:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/b4f0dda164d4b4db47c94eb3c7885bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mCLZHA1o6yWchm0HVpiW7g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谈到Flutter开发，Visual Studio代码是一等公民。</p></figure><p id="8271" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在几个小时内，我调整了一些设置，使集成工作，并根据我的喜好进行了调整:</p><ul class=""><li id="f14a" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated">如果你不喜欢摆弄全局环境变量(<code class="fe mz na nb nc b">FLUTTER_ROOT</code>)或者不想污染你的路径，你将需要在你的Flutter安装中指出这一点。</li><li id="e71f" class="mq mr iq lq b lr nd lu ne lx nf mb ng mf nh mj mv mw mx my bi translated"><code class="fe mz na nb nc b">dart.openDevTools=flutter</code>:当Flutter调试会话开始时，自动打开开发者工具。这对于调整渲染选项和探索应用程序的小部件层次结构非常有帮助。</li><li id="b060" class="mq mr iq lq b lr nd lu ne lx nf mb ng mf nh mj mv mw mx my bi translated"><code class="fe mz na nb nc b">dart.closingLabels=false</code> : Dart扩展自动显示多行代码结构的结束标签，这(在我看来)使得代码可读性较差。对于使用许多构造函数的构建(UI呈现)代码来说尤其如此。</li></ul><p id="0084" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当你生成一个新项目时，你会得到一个使用<a class="ae kv" href="https://material.io/design" rel="noopener ugc nofollow" target="_blank">材料设计</a>准则的简单“计数器”应用程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/0a1607bf7b2e39052db0e33468185f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sv7PWvXGSanMCKk5geehkA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由Flutter CLI生成的起始材质app。</p></figure><p id="880c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">生成的应用程序演示了一些基本的概念和代码布局，这对新手来说非常好。它还附带了<code class="fe mz na nb nc b">.gitignore</code>，这意味着你可以<a class="ae kv" href="https://github.com/EricHripko/distter" rel="noopener ugc nofollow" target="_blank">将搭建好的代码直接推上</a>。</p><p id="4e0a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你可能会注意到，这款应用看起来并不完全像一款原生的macOS(或iOS，就此而言)应用。虽然Flutter确实配备了<a class="ae kv" href="https://docs.flutter.dev/development/ui/widgets/cupertino" rel="noopener ugc nofollow" target="_blank"> Cupertino (iOS风格)小工具</a>，但我很可能会坚持使用物质小工具。材料设计似乎是一个更普遍的选择，即使它不是真正的本土外观。这确实突出了你的Flutter应用程序只能在Android和iOS上看起来像本地的，而且只有当你把你的UI编码两次的时候。</p><p id="b695" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">就调试体验而言，MacOS构建需要明显较长的时间，我假设如果你在Android或iOS上使用Flutter，体验是相似的。也就是说，<a class="ae kv" href="https://docs.flutter.dev/development/tools/hot-reload" rel="noopener ugc nofollow" target="_blank"> hot reload </a>是这里的可取之处——您可以进行更改，并看到它们立即反映出来，而无需重建/重启。</p><h1 id="7d76" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">我的第一页</h1><p id="27f2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">与<a class="ae kv" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>不同，Flutter似乎区分了无状态和有状态小部件。我们将创建一个非常基本的第一页，所以我们可以选择<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/StatelessWidget-class.html" rel="noopener ugc nofollow" target="_blank"> StatelessWidget </a> base。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3340" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://api.flutter.dev/flutter/widgets/StatelessWidget-class.html" rel="noopener ugc nofollow" target="_blank"> StatelessWidget </a>是一个抽象类，我们需要提供一个<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/StatelessWidget/build.html" rel="noopener ugc nofollow" target="_blank">构建方法</a>，它实际上是<em class="nl">构建</em>我们的UI。如果你熟悉React基于类的组件，你会认为这是一个<a class="ae kv" href="https://reactjs.org/docs/react-component.html#render" rel="noopener ugc nofollow" target="_blank">渲染方法</a>。与React不同，您不能从组件中返回字符串，但是您可以使用<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/Text-class.html" rel="noopener ugc nofollow" target="_blank">文本</a>类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="70d2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这将生成一个简单的应用程序，看起来类似于下图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/3d4cbd1d5affe8954c1fb182b235e2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zRfoSmAUDppbLn_2isy_8g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">准系统飘动页面。</p></figure><p id="f302" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">Flutter还会抱怨文本构造函数应该<a class="ae kv" href="https://dart-lang.github.io/linter/lints/prefer_const_constructors.html" rel="noopener ugc nofollow" target="_blank">变成const </a>。这揭示了dart 的一个非常酷的<a class="ae kv" href="https://stackoverflow.com/questions/21744677/how-does-the-const-constructor-actually-work" rel="noopener ugc nofollow" target="_blank">特性，因为const值似乎只被实例化一次。这非常好，因为它可以帮助避免一次又一次地重新创建相同的对象。</a></p><p id="ea66" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">Flutter会抱怨的另一件事是<a class="ae kv" href="https://dart-lang.github.io/linter/lints/use_key_in_widget_constructors.html" rel="noopener ugc nofollow" target="_blank">缺少接受<a class="ae kv" href="https://api.flutter.dev/flutter/foundation/Key-class.html" rel="noopener ugc nofollow" target="_blank">键</a>的构造函数</a>。在浏览了这些文档之后，似乎并没有立即需要它，它更像是一个好的实践。然而，我们可以把它加进去让棉绒高兴。我们最小窗口小部件的代码现在看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="ef8d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们在屏幕上添加一些小部件来欢迎我们的用户，并指导他们做什么:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="484c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们使用<code class="fe mz na nb nc b"><a class="ae kv" href="https://docs.flutter.dev/cookbook/design/themes" rel="noopener ugc nofollow" target="_blank">Theme.of</a></code>方法来找到附加到小部件的材质主题。</p><p id="5c01" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是通过遍历窗口小部件树来完成的，似乎类似于<a class="ae kv" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank"> React context </a>功能。</p><p id="d220" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然后，我们可以使用发现的主题根据应用程序范围的外观设置来设计小部件的样式。</p><p id="2732" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">小部件使用<code class="fe mz na nb nc b"><a class="ae kv" href="https://docs.flutter.dev/development/ui/layout#lay-out-multiple-widgets-vertically-and-horizontally" rel="noopener ugc nofollow" target="_blank">Column</a></code>进行布局，因为我们希望它们垂直流动。</p><p id="481e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们还添加了一些<a class="ae kv" href="https://api.flutter.dev/flutter/widgets/Padding-class.html" rel="noopener ugc nofollow" target="_blank">填充</a>，这样当窗口太小时，我们的小部件就不会“拥抱”屏幕的两侧。这会产生如下所示的页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/d4909020149e7730bf62f419d9fbaf00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nTqAPvdx9mSJb4AVfeEeRg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">欢迎用户的页面的基本布局。</p></figure><h1 id="616d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">打扮一下</h1><p id="c268" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">让我们用一个英雄形象来装饰一下。我们将在这里使用<a class="ae kv" href="https://undraw.co/illustrations" rel="noopener ugc nofollow" target="_blank"> unDraw </a>，这是一个免费的精彩插图库。</p><p id="6ad5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">调整主题并生成SVG后，我们将把它作为<a class="ae kv" href="https://docs.flutter.dev/development/ui/assets-and-images" rel="noopener ugc nofollow" target="_blank">资产</a>添加到我们的应用程序中。</p><p id="6d5a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">理论上，现在应该像给我们的树添加一个<a class="ae kv" href="https://api.flutter.dev/flutter/painting/AssetImage-class.html" rel="noopener ugc nofollow" target="_blank">评估值</a>一样简单。不幸的是，Flutter说“没有这么快”:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/87d74ea8808fd75cc7a217a3c3ae505c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9vtZkguUrfWO-ByNDQ7ubQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">尝试使用现成的Flutter工具渲染SVG会失败。</p></figure><p id="100a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这似乎是故意的，因为SVG被认为对于运行Flutter的设备来说<a class="ae kv" href="https://github.com/flutter/flutter/issues/1831" rel="noopener ugc nofollow" target="_blank">太贵了</a>(维护者正在寻找设计一种定制的矢量格式)。</p><p id="8299" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们在桌面上，所以希望能够处理简单SVG的渲染，幸运的是，有一个社区<a class="ae kv" href="https://pub.dev/packages/flutter_svg" rel="noopener ugc nofollow" target="_blank"> flutter_svg </a>包支持这个功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="ba3c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">加载并显示资产后，我们的欢迎页面现在看起来很完整:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/44fac07f7ea57b63fb83ba75c8c69154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABTyAW-I5oMfhLqCNBZv2Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们现在准备欢迎我们的用户。</p></figure><h1 id="c234" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">外卖食品</h1><p id="cd6c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">以下是我在和Flutter相处了几个小时后的想法:</p><ul class=""><li id="c0a5" class="mq mr iq lq b lr mk lu ml lx ms mb mt mf mu mj mv mw mx my bi translated"><strong class="lq ir"> Dart基本就是</strong> <a class="ae kv" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">打字稿</strong> </a>如果你眯眼够狠的话。这种语言似乎是Java和JavaScript的混合，所以到目前为止我能够凭直觉找到自己的路。这确实引出了一个问题，为什么谷歌不一开始就使用类似TypeScript的东西。</li><li id="2adc" class="mq mr iq lq b lr nd lu ne lx nf mb ng mf nh mj mv mw mx my bi translated"><strong class="lq ir">材料主题不太适合桌面</strong>，因为移动优先的设计决策看起来很不合适(例如，浮动动作按钮上的阴影和大字母间距)。幸运的是，小部件看起来足够可定制，它们可以更适合桌面。</li><li id="41f3" class="mq mr iq lq b lr nd lu ne lx nf mb ng mf nh mj mv mw mx my bi translated"><strong class="lq ir">颤振似乎比反应</strong>更受限制，可能是因为不熟悉。我来自React世界，有点怀念熟悉的布局技巧和定义UI的类似XML的语法。然而，我想如果我来自移动应用世界，我的观点可能会完全不同。</li></ul><p id="4a3e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你喜欢这篇文章，看看关于测试和CI系列的下一篇文章<a class="ae kv" href="https://eric.hripko.com/learning-flutter-by-building-a-discord-client-part-2-testing-and-ci-c26f818f3e0a" rel="noopener ugc nofollow" target="_blank">！</a></p><p id="5b69" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你对Flutter有什么想法？</p></div></div>    
</body>
</html>