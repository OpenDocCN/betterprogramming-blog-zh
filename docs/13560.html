<html>
<head>
<title>How to Call Any API From a Solidity Smart Contract, Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Solidity智能契约中调用任何API，第一部分</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-call-any-api-from-a-solidity-smart-contract-part-i-d1d2f34461b6?source=collection_archive---------4-----------------------#2022-09-07">https://betterprogramming.pub/how-to-call-any-api-from-a-solidity-smart-contract-part-i-d1d2f34461b6?source=collection_archive---------4-----------------------#2022-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fc1b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">部署Airnode以获取智能合约中的链外数据</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3ba88f0563df351a92c2bc65fb58f982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2d5gcBSZlu3F6ICJ"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@deepmind?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> DeepMind </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="646d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">众所周知，智能合约不可能直接访问区块链之外的外部API。对于许多dApps来说，在使用智能合约时与外链数据交互是一个真正的问题。</p><blockquote class="ls lt lu"><p id="790c" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">以太坊区块链被设计成完全确定性的，而互联网不是。直接调用API听起来很容易，但是在区块链上，这需要所有节点同时调用同一个端点，并期望获得相同的数据，以便达成共识。此外，区块链的核心概念是其安全性，这源自独立验证器的分散网络，这些验证器有目的地限制它们与外部世界的连接。</p></blockquote><p id="598b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，使用<a class="ae kv" href="https://api3.org/" rel="noopener ugc nofollow" target="_blank"> API3 </a>，您可以拥有由API提供者直接操作的第一方oracles，称为<a class="ae kv" href="https://docs.api3.org/airnode" rel="noopener ugc nofollow" target="_blank"> Airnodes </a>，它向任何链上dApp <em class="lv">提供数据。</em>因此，您可以轻松地让任何REST API访问智能合约。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="1b40" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">向ChainAPI问好</h1><p id="e775" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><a class="ae kv" href="https://bit.ly/Va-Part1-Polygon-ChainAPI" rel="noopener ugc nofollow" target="_blank"> ChainAPI </a>是一个平台，使您能够使用其逐步集成和部署工具来集成和部署开源Airnode。</p><p id="e3bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要开始，请转到<a class="ae kv" href="https://bit.ly/Va-Part1-Polygon-ChainAPI" rel="noopener ugc nofollow" target="_blank"> ChainAPI </a>并通过连接元掩码登录。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/a3ae24a29a628ed1f5479c21cc081b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*135nPlhwqamY3-zY"/></div></div></figure><p id="d40f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">系统将提示您通过元掩码扩展确认并签署交易。</p><p id="3c3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保你使用的是一个新的元掩码钱包，带有新的助记符。您的助记符稍后将用于部署Airnode。您需要非常安全地保存它，因为它将作为您部署的Airnode的“私钥”。</p><p id="02bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lv">每次返回ChainAPI时，您将使用元掩码再次连接，通过为同一帐户签署消息来识别您的身份。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/1bc83a245dd75b393002b99f649dcdfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-v8l867Nje8Fgb9wgcIHzw.png"/></div></div></figure><p id="ca5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成注册过程并命名您的工作空间。</p><p id="6bf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lv"> Workspaces为您提供了邀请其他用户帮助或协作集成和部署的方式。这使得将您的Airnodes作为一个团队进行管理或外包过程变得容易，同时仍然保持对您的集成和部署的控制。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/f5b39f47df750bd792cabbf1d23c9353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D9FbnKKEeM3U82vb"/></div></div></figure><p id="9734" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lv">要在将来更改工作区的名称，请点击仪表板左上角的名称</em></p><p id="bd6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在ChainAPI中，您将能够通过导航到左侧导航面板上的“integrations”或“Deploy”仪表板来创建和管理您的集成或Airnode部署。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/b45b538aa309b1a89817079a848a2e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xEsNLFmPTUO7ULPQ"/></div></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="197a" class="nh mh iq bd mi ni nj dn mm nk nl dp mq lf nm nn ms lj no np mu ln nq nr mw ns bi translated">集成您的Airnode</h2><p id="10b3" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">对于本教程，我将使用<a class="ae kv" href="https://bit.ly/3TwKnQI" rel="noopener ugc nofollow" target="_blank"> dxFeed的公共REST API </a>端点来检索股票数据。</p><p id="f37e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要开始，选择仪表板右上角的“集成API”选项。</p><p id="93ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输入关于要集成的API的详细信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/258aebce82f6e2dbc3fda68091a5f752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UUoWo8dgZX4UdjWj"/></div></div></figure><p id="1881" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您需要输入API的基本URL以及您想要集成的所有端点。如果您的API需要任何安全模式(API Key，基本HTTP Auth ),您也可以选择添加。</p><p id="fafc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为它是一个公共API，所以它没有任何安全方案。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/6964e44580c220ce02e91d5097eab2e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/0*GrYQa8tGB8PisfDM"/></div></figure><p id="a500" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您可以开始添加所有端点。</p><p id="c815" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，dxFeed REST API有一个带有一些查询参数的端点<code class="fe nv nw nx ny b">/events.json</code>。您可以添加API需要的所有参数。</p><p id="22bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">dxFeed的API需要的参数有:</p><ul class=""><li id="726e" class="nz oa iq ky b kz la lc ld lf ob lj oc ln od lr oe of og oh bi translated"><code class="fe nv nw nx ny b">events</code> —查询参数—计入市场事件。它将由用户定义。</li><li id="4a64" class="nz oa iq ky b kz oi lc oj lf ok lj ol ln om lr oe of og oh bi translated"><code class="fe nv nw nx ny b">symbols</code> —查询参数—取股票代码。它将由用户定义。</li></ul><p id="a756" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于dxFeed的API及其工作原理的更多信息，<a class="ae kv" href="https://tools.dxfeed.com/webservice/rest-demo.jsp" rel="noopener ugc nofollow" target="_blank">点击这里</a>测试他们的API。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/c9f3594d43c3cb6cab6655cc8fb60be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PnjLKrxFdcerKRlIzPFY_g.png"/></div></div></figure><p id="27ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您需要添加所有参数并定义它们的位置(查询/头/路径/cookie)。您还可以决定是否要固定它们的值。</p><p id="1b86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，dxFeed REST API有一个带有一些查询参数的GET端点<code class="fe nv nw nx ny b">/events.json</code>。您可以添加API需要的所有参数。</p><p id="fdc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://bit.ly/3Touiwp" rel="noopener ugc nofollow" target="_blank">保留参数</a>定义响应的哪一部分在实现前被选择和编码。它可以由请求者定义，但我们也可以在Airnode配置中硬编码它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/55b93b6b1ada40c7a789761bef838f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ax-C3u0OzPQSgOs8"/></div></div></figure><p id="9aa0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还可以为Airnode添加<a class="ae kv" href="https://docs.api3.org/ois/v1.4/processing.html" rel="noopener ugc nofollow" target="_blank">预处理和后处理片段</a>。尽管我们不会在这个集成中使用这个特性。</p><ul class=""><li id="d22e" class="nz oa iq ky b kz la lc ld lf ob lj oc ln od lr oe of og oh bi translated"><a class="ae kv" href="https://docs.api3.org/ois/v1.4/ois.html#_5-9-preprocessingspecifications" rel="noopener ugc nofollow" target="_blank">预处理</a>在向Airnode发出请求之前执行代码片段。</li><li id="8509" class="nz oa iq ky b kz oi lc oj lf ok lj ol ln om lr oe of og oh bi translated"><a class="ae kv" href="https://docs.api3.org/ois/v1.4/ois.html#_5-10-postprocessingspecifications" rel="noopener ugc nofollow" target="_blank">后处理</a>片段在收到Airnode的响应后执行。</li></ul><p id="35db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加完所有必需的端点后，现在可以按finish，准备部署Airnode了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/9855dab32624170609e6694be7eeffef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9AF-rwD_ud2kAf75"/></div></div></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="c2c6" class="nh mh iq bd mi ni nj dn mm nk nl dp mq lf nm nn ms lj no np mu ln nq nr mw ns bi translated">部署Airnode</h2><p id="df18" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">要部署Airnode，请转到菜单上的deploy部分。命名您的部署，并选择您想要使用的集成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/bb92667d85afdbc694b6bbe02a8229fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZgK_WRkE_XQRtgGJ"/></div></div></figure><p id="ec83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择您希望部署Airnode的云提供商。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/37d45b414aae4bd452e5ffbaf1f39736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sr-ngqDgK2wxN9B_JaLoxQ.png"/></div></div></figure><p id="625c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在为您的部署选择链。如果您希望在多个链上使用，也可以选择多个网络和提供商。</p><p id="e618" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们将把我们的Airnode放在多边形孟买测试网上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/68c8d3729760167351b62ef12eda5c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFdzGEys6RIw6AZAp2JYqQ.png"/></div></div></figure><p id="fa5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://docs.api3.org/airnode/v0.10/concepts/authorizers.html" rel="noopener ugc nofollow" target="_blank">授权者</a>契约允许您指定哪些智能契约可以向您的Airnode端点发出请求。对于本教程，我们将把它设置为Public。</p><p id="39bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当Airnode收到请求时，它可以使用链上授权者契约来验证是否需要响应。这允许Airnode实现各种各样的策略，并授权请求者约定对其底层API的访问。</p><ul class=""><li id="4c6a" class="nz oa iq ky b kz la lc ld lf ob lj oc ln od lr oe of og oh bi translated">公共授权者将允许任何智能合约向您的Airnode发出请求。</li><li id="6b98" class="nz oa iq ky b kz oi lc oj lf ok lj ol ln om lr oe of og oh bi translated">受限授权者将只允许已被授权访问的智能合同地址向您的Airnode发出请求。</li></ul><p id="48e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://docs.api3.org/airnode/v0.10/concepts/authorizations.html" rel="noopener ugc nofollow" target="_blank">点击此处了解更多关于授权的信息</a>。</p><p id="10b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后一次检查您的配置。如果一切正常，单击下一步。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/4832abcbd1e27b9a7356d9ae4d795296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YYS4QaLfdWI8RuyJ"/></div></div></figure><p id="a223" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下载所有的Airnode配置文件并解压。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/350c5d9b2b9cd9db0d77c3a1f5a11fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/0*GDIIGLavatCbh33I"/></div></div></figure><p id="f7ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的Airnode配置目录应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/651c79e8310824c4ec84fe91b59b006f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/0*SqysW0CmYa_8azbB"/></div></figure><p id="0bf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx ny b">config</code> <em class="lv"> </em>包含<code class="fe nv nw nx ny b">config.json</code>和<code class="fe nv nw nx ny b">secrets.env</code>。</p><ul class=""><li id="03c7" class="nz oa iq ky b kz la lc ld lf ob lj oc ln od lr oe of og oh bi translated">在Airnode的部署/重新部署期间，使用<code class="fe nv nw nx ny b">config.json</code>文件来配置其行为并提供API操作的映射。</li><li id="c34d" class="nz oa iq ky b kz oi lc oj lf ok lj ol ln om lr oe of og oh bi translated"><code class="fe nv nw nx ny b">secrets.env</code>文件保存了config.json的值，这些值必须保密。</li></ul><p id="c8b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出目录将会有在您成功部署airnode之后生成的<code class="fe nv nw nx ny b">receipt.json</code>。</p><p id="2c44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx ny b">aws.env</code>文件保存了针对AWS的部署的AWS凭证。</p><p id="2b39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lv">由于我们使用AWS作为我们的云提供商，我们需要使用管理员访问策略添加我们的AWS IAM访问密钥。如果不确定如何获取，可以参考这个</em> <a class="ae kv" href="https://www.youtube.com/watch?v=KngM5bfpttA" rel="noopener ugc nofollow" target="_blank"> <em class="lv">视频</em> </a> <em class="lv">。</em></p><p id="b0ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nv nw nx ny b">README.md</code>包含了部署以markdown格式提供的airnode的所有步骤。</p><p id="f5d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe nv nw nx ny b">aws.env</code>，添加你刚刚创建的<code class="fe nv nw nx ny b">AWS_ACCESS_KEY_ID</code>和<code class="fe nv nw nx ny b">AWS_SECRET_ACCESS_KEY</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/5ecb7d44f6925003eab8a14c34f1a8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*4KWNLu2t-JEvJugQcTb4Mw.png"/></div></figure><p id="3ffa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe nv nw nx ny b">config/secrets.env</code> <em class="lv"> </em>，添加钱包助记符。请确保它非常安全，因为这将作为您部署的Airnode的“私钥”。根据助记短语，Airnode能够将钱包地址分配给Airnode实例及其用户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/5c208f673dd85bc4b91f1fd22de1c2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StjSe291ojNheWeotTBfPg.png"/></div></div></figure><p id="7eb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还需要添加您的区块链提供商URL。在这里，我们将使用Alchemy获得一个免费的多边形Mumbai Testnet提供者URL。您可以使用任何支持您网络的区块链提供商。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/a9df67927da0a2816de27ba98466f16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LwibimEzWAdfwAWz5lUY5A.png"/></div></div></figure><p id="6461" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您也可以设置您的<a class="ae kv" href="https://bit.ly/3Tvamrv" rel="noopener ugc nofollow" target="_blank"><em class="lv">http gateway</em></a><em class="lv"/>凭证。这是一个可选的服务，允许经过身份验证的用户向您部署的Airnode实例发出HTTP请求以进行测试。ChainAPI已经为您生成了这些密钥，但是您可以根据需要更改它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/3c4552d989eab7b5d074cefe0b1bf9dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wJNFvs_UmCfd1vfL1wpL3A.png"/></div></div></figure><p id="2684" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">部署Airnode之前的最后一步是在<em class="lv"> config.json </em>文件中设置<a class="ae kv" href="https://bit.ly/3D1knXC" rel="noopener ugc nofollow" target="_blank">授权者</a>。</p><p id="3201" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lv">当Airnode收到请求时，它可以使用链上授权者合同来验证是否需要响应。这允许Airnode实现各种各样的策略，并授权请求者约定对其底层API的访问。</em></p><p id="ed4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于本教程的范围，我们可以在<em class="lv"> config.json </em>中将授权者数组设置为空，这样任何请求者契约都可以访问Airnode。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/a6f0026bc71fd0cfa47ee61354d8d020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*a9kG6ZyESgSdbqw5uyZaJg.png"/></div></figure><p id="62bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您已经准备好部署Airnode了。确保你的系统上安装了<a class="ae kv" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。</p><p id="b95b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将下面的命令复制并粘贴到您的终端部署包的根目录下。</p><p id="688d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Windows操作系统</p><pre class="kg kh ki kj gt pb ny pc bn pd pe bi"><span id="4526" class="pf mh iq ny b be pg ph l pi pj">docker run -it --rm ^<br/>      --env-file aws.env ^<br/>      -v "%cd%/config:/app/config" ^<br/>      -v "%cd%/output:/app/output" ^<br/>      api3/airnode-deployer:0.7.3 deploy</span></pre><p id="fdcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">OSX</p><pre class="kg kh ki kj gt pb ny pc bn pd pe bi"><span id="19c8" class="pf mh iq ny b be pg ph l pi pj">docker run -it --rm \<br/>      --env-file aws.env \<br/>      -e USER_ID=$(id -u) -e GROUP_ID=$(id -g) \<br/>      -v "$(pwd)/config:/app/config" \<br/>      -v "$(pwd)/output:/app/output" \<br/>      api3/airnode-deployer:0.7.3 deploy</span></pre><p id="688a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Linux操作系统</p><pre class="kg kh ki kj gt pb ny pc bn pd pe bi"><span id="9117" class="pf mh iq ny b be pg ph l pi pj">docker run -it --rm \<br/>      --env-file aws.env \<br/>      -e USER_ID=$(id -u) -e GROUP_ID=$(id -g) \<br/>      -v "$(pwd)/config:/app/config" \<br/>      -v "$(pwd)/output:/app/output" \<br/>      api3/airnode-deployer:0.7.3 deploy</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/8acbe03200e1c1909f746f0ed33a1d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/0*KZ8A_iw2ws-5Duig"/></div></figure><p id="e602" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的Airnode现在应该已经部署好了。您可以在部署部分检查其状态。</p><p id="36af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击查看本指南<a class="ae kv" href="https://github.com/vanshwassan/AirnodeTutorials/" rel="noopener ugc nofollow" target="_blank">的GitHub Repo。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/6ddf41130f21af87772bae94cc9ab03a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KtPyklodLfrFv-IW"/></div></div></figure><p id="1d79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第2部分中，我们将向您展示如何编写请求者契约来调用和读取来自Airnode的数据。</p></div></div>    
</body>
</html>