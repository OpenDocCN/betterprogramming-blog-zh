<html>
<head>
<title>Array Methods and Point-Free and Curried Functions Improve Your JavaScript Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数组方法和无指针的Curried函数改善了JavaScript代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/array-methods-point-free-style-and-curried-functions-make-your-js-code-better-b5516c513b37?source=collection_archive---------7-----------------------#2019-07-24">https://betterprogramming.pub/array-methods-point-free-style-and-curried-functions-make-your-js-code-better-b5516c513b37?source=collection_archive---------7-----------------------#2019-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a897" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写更简洁的代码</h2></div><p id="d06a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最近写了<a class="ae le" href="https://medium.com/@cqpro/rewrite-your-own-array-methods-foreach-map-filter-find-reduce-1718e1138c3e" rel="noopener">这个</a>。</p><p id="53a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">许多初级开发人员和刚接触JavaScript的人经常会问，“为什么我们需要把事情分成许多方法，比如<code class="fe lf lg lh li b">map</code>、<code class="fe lf lg lh li b">filter</code>、<code class="fe lf lg lh li b">find</code>和<code class="fe lf lg lh li b">reduce</code>？为什么我们不用一个<code class="fe lf lg lh li b">for</code>环呢？它可以处理那些数组方法提供的各种逻辑。”</p><p id="ef51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">答案很简单:使用这些方法，我们可以写出更干净、更好、更易读的代码。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/ceaccf30529ac594650bb1d3a34334cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C-Kk-CkbhXCc0hr300Bv4w.png"/></div></div></figure><p id="0c14" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在解释原因之前，我想向您介绍一些新概念。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="efef" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">无点风格</h1><p id="6ec3" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">无点样式是一种通过消除不必要的参数来提高可读性的技术。</p><p id="868e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们来看看这段代码:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="df67" class="nd md it li b gy ne nf l ng nh">const scores = [3,1,5,7,9]<br/>const goodScores = scores.filter(function(score){ <br/>  return score &gt;= 7<br/>})</span></pre><p id="a282" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，很容易理解；这个功能帮助我们筛选出分数≥ 7的。我们可以做得更好:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="9b69" class="nd md it li b gy ne nf l ng nh">const scores = [3,1,5,7,9]<br/>const isGoodScore = score =&gt; score &gt;= 7<br/>const goodScores = scores.filter(score =&gt; isGoodScore(score))</span></pre><p id="ae7c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是啊，把函数命名为<code class="fe lf lg lh li b">isGoodScore</code>更好一点。但是我们可以用无点风格做得更好。</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="878e" class="nd md it li b gy ne nf l ng nh">const scores = [3,1,5,7,9]<br/>const isGoodScore = score =&gt; score &gt;= 7<br/>const goodScores = scores.filter(isGoodScore)</span></pre><p id="4cdd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看，我们可以删减论点，变成这样。代码</p><p id="b222" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe lf lg lh li b">const goodScores = scores.filter(isGoodScore)</code></p><p id="1397" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更像人类的语言，更简单易懂。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="af1d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">简化的功能</h1><p id="7782" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">curried函数是一个一次接受多个参数的函数。</p><p id="d2ce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个正常的功能:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="672d" class="nd md it li b gy ne nf l ng nh">const add = (a, b, c) =&gt; a + b + c<br/>add(1,2,3) // This will return 6</span></pre><p id="37bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个咖喱函数:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="bb38" class="nd md it li b gy ne nf l ng nh">const add = a =&gt; b =&gt; c =&gt; a + b + c<br/>add(1)(2)(3) // This will also return</span></pre><p id="c55a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么，为什么我们需要curried函数，它们如何帮助我们更好地编写代码呢？</p><p id="6bc6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，这些问题我已经想了好几年了，我就通过这个例子来解释一下:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="83a6" class="nd md it li b gy ne nf l ng nh">const scores = [3,1,5,7,9]<br/>const isGoodScore = score =&gt; score &gt;= 7<br/>const goodScores = scores.filter(isGoodScore)</span></pre><p id="0c13" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就拿前面的例子来说吧。如果我们想分别过滤出等于1，2 …一直到10的分数呢？定义十个函数<code class="fe lf lg lh li b">isEqual1</code> … <code class="fe lf lg lh li b"> isEqual10</code>是可以的，但是对于curried函数，我们可以通过只有一个名为<code class="fe lf lg lh li b">isEqual</code>的函数来改进它。代码将如下所示:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="d3e9" class="nd md it li b gy ne nf l ng nh">const scores = [3,1,5,7,9,1,5]<br/>const isEqual = compareValue =&gt; score =&gt; score === compareValue<br/>const scoresEqual1 = scores.filter(isEqual(1))</span></pre><p id="64d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太棒了。:D不再需要写十个不同的函数了。</p><p id="c6e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">万一你不熟悉胖箭头函数，上面的curried函数可以改写成这样:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="46e4" class="nd md it li b gy ne nf l ng nh">const isEqual = function(compareValue){<br/>  return function(score){ <br/>    return score === compareValue<br/>  }<br/>}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a374" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，我想你现在理解了无点风格和curried函数。让我们使用一个<code class="fe lf lg lh li b">for</code>循环来创建一个函数<code class="fe lf lg lh li b">addToCart</code>。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ni"><img src="../Images/6e6ad1542597dcc82f47fef53347b5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKam2BS_pVRDAEEwvEOWkQ.png"/></div></div></figure><p id="9384" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看，我们使用一个<code class="fe lf lg lh li b">for</code>循环在<code class="fe lf lg lh li b">products</code>数组和<code class="fe lf lg lh li b">shoppingCart</code>数组中寻找一个产品。然后我们检查该产品是否已经在<code class="fe lf lg lh li b">shoppingCart</code>中。如果是这样，我们增加数量；如果没有，我们将该产品添加到<code class="fe lf lg lh li b">shoppingCart</code>。</p><p id="e231" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们用一个<code class="fe lf lg lh li b">find</code>的方法，无点风格和curried函数来重新制作它。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nj"><img src="../Images/44c6dd54ca2d1c75c63978cff1772fa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sKffITUJMhqZCgcHoQD1NA.png"/></div></div></figure><p id="0886" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看，现在我们只需要14行<code class="fe lf lg lh li b">find</code>和无指针风格的代码，而不是25行<code class="fe lf lg lh li b">for</code>循环。当然，这个函数在很多方面更好，比如可读性和干净性。功能<code class="fe lf lg lh li b">productById</code>也可以在很多其他地方重用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2e34" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">更大的</h1><p id="14ee" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">使用数组方法和无指针风格，我们可以编写更简洁的代码，如下所示:</p><pre class="lk ll lm ln gt mz li na nb aw nc bi"><span id="db06" class="nd md it li b gy ne nf l ng nh">const products = [....] //An array of product object<br/>const toProductView = product =&gt; (<br/>  {<br/>    title: product.name + ' ' + product.brand, <br/>    price: product.newPrice<br/>  }</span><span id="96e9" class="nd md it li b gy nk nf l ng nh">const isValid = product =&gt; product.price &gt; 0<br/>const displayProducts = products.filter(isValid).map(toProductView)</span></pre><p id="cd42" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望你能理解如何使用无指针的数组方法。可以通过打开当前项目，用数组方法替换<code class="fe lf lg lh li b">for</code>循环，用无点风格替换回调函数来练习。</p><p id="b5df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读。</p></div></div>    
</body>
</html>