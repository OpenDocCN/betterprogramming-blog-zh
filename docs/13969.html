<html>
<head>
<title>Implementing Multilanguage Without Any Library in Svelte</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Svelte中实现没有任何库的多语言</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/implementing-multilanguage-without-any-library-in-svelte-6b80b46521f0?source=collection_archive---------9-----------------------#2022-10-20">https://betterprogramming.pub/implementing-multilanguage-without-any-library-in-svelte-6b80b46521f0?source=collection_archive---------9-----------------------#2022-10-20</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="9159" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">这一卓越功能的简要指南</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/a265f0bfa5c2f31f2f396430e14506e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5jF-lTqPesgEQlny"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@towfiqu999999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Towfiqu barbhuiya </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2dff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我继续记录我的加密和解密短信的应用程序(<a class="ae kz" href="https://docrypt.org/" rel="noopener ugc nofollow" target="_blank">DoCrypt.org</a>)。我决定使用两种语言:意大利语和英语。但我打算在未来增加更多的语言。我选择创建一个特定的组件来管理不同的语言。我认为这是一个建立多语言应用程序的简单方法。在本文中，我将讨论用Svelte创建一个多语言组件。</p><p id="084a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我用<a class="ae kz" href="https://svelte.dev/" rel="noopener ugc nofollow" target="_blank">苗条</a>是因为简单。它还可以实时翻译应用程序的所有组件。</p><p id="9ae9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">想法很简单:我创建一个组件，用特定的语言显示文本。为了决定使用哪种语言，我使用了一个<a class="ae kz" href="https://svelte.dev/docs#run-time-svelte-store" rel="noopener ugc nofollow" target="_blank">存储库</a>，一个我可以从任何其他组件访问的通用变量。这样，如果我更改语言，所有显示文本的组件都会自动更新。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="0bdb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这样，我可以在应用程序的任何地方更改语言，只需使用<code class="fe ly lz ma mb b">lang.set("it")</code>或<code class="fe ly lz ma mb b">lang.set("en")</code>。</p><p id="8303" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">第二步是创建字典。我可以使用各种技术，但是对于一个小项目，一个对象就足够了。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="04dd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在第一层，我输入显示页面的名称(例如，<code class="fe ly lz ma mb b">Home</code>)，在第二层输入一个字符串，标识我想要显示的文本(例如，<code class="fe ly lz ma mb b">Encrypt</code>)，在第三层输入由语言标识的翻译(例如，<code class="fe ly lz ma mb b">en</code>)。</p><p id="f641" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，我可以使用<code class="fe ly lz ma mb b">languages.Home.Encrypt.en</code>或<code class="fe ly lz ma mb b">languages.Home.Encrypt.it</code>来访问特定页面上的字符串翻译。</p><p id="bea6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我需要一个组件，它唯一的工作是读取字符串值并将其插入到另一个组件中:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="a06f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我可以用<code class="fe ly lz ma mb b">{@html languages[p][w][$lang]}</code>代替<code class="fe ly lz ma mb b">{languages[p][w][$lang]}</code>在字符串中使用HTML标签。我认为翻译一些带有格式或链接的文本是个好主意。但是对于简单的文本，如按钮标签，这是不必要的。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mc"><img src="../Images/c361800178b61e346e2cbe51e3c88c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6AhNU5PSJNw9HPAA.gif"/></div></div></figure><p id="2bd9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要使用这个组件，我可以使用如下代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><h1 id="0bf8" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">保存设置</h1><p id="8fe7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">问题是用户每次访问网站时都必须手动重置语言。为了解决这个问题，我可以在浏览器中保存用户的首选语言。当用户访问网站时，他使用他喜欢的语言。</p><p id="8d89" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为此，我可以使用<a class="ae kz" href="https://github.com/jakearchibald" rel="noopener ugc nofollow" target="_blank">杰克·阿奇博尔德</a>的<a class="ae kz" href="https://www.npmjs.com/package/idb-keyval" rel="noopener ugc nofollow" target="_blank"> IDB-Keyval </a>库。该库允许您保存和读取本地数据库中的值。</p><p id="fba5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我将库添加到我的项目中:</p><pre class="kk kl km kn gu na mb nb nc aw nd bi"><span id="e2c2" class="ne me iu mb b gz nf ng l nh ni">npm install idb-keyval</span></pre><p id="b1b3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以，我创建了一个新文件，如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="a999" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我使用<code class="fe ly lz ma mb b">setLang</code>函数来设置默认语言。我还使用<code class="fe ly lz ma mb b">getLang</code>从浏览器内存中读取首选语言。如果用户从未设置语言，<code class="fe ly lz ma mb b">getLang</code>功能将返回浏览器语言。</p><p id="67e9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后，我修改Svelte store，将任何更改应用到本地数据库:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="a3e0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后，我将应用程序的主页改为在启动时阅读首选语言。看起来是这样的:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="2333" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">好了，暂时就这些了。如果你想看完整的代码，可以在<a class="ae kz" href="https://github.com/el3um4s/docrypt" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。该应用可在<a class="ae kz" href="https://docrypt.org/" rel="noopener ugc nofollow" target="_blank">docrypt.org</a>上获得。</p><p id="dc04" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl nj nk hy nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="in io ip iq ir"><p id="9ef0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="nq">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae kz" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="lc iv"> <em class="nq">中邮件列表</em> </strong> </a></p><div class="nr ns gq gs nt nu"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd iv gz z fq nz fs ft oa fv fx it bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">el3um4s.medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kt nu"/></div></div></a></div></div><div class="ab cl nj nk hy nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="in io ip iq ir"><p id="5958" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">【https://blog.stranianelli.com】原载于2022年10月18日<a class="ae kz" href="https://blog.stranianelli.com/implementing-multi-language-without-any-library-in-svelte/" rel="noopener ugc nofollow" target="_blank"><em class="nq"/></a><em class="nq">。</em></p></div></div>    
</body>
</html>