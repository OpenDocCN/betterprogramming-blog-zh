<html>
<head>
<title>How To Solve Problems With UI Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何解决UI测试的问题</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/having-troubles-with-ui-testing-heres-how-to-nail-it-cee2a90e5ce5?source=collection_archive---------10-----------------------#2019-07-23">https://betterprogramming.pub/having-troubles-with-ui-testing-heres-how-to-nail-it-cee2a90e5ce5?source=collection_archive---------10-----------------------#2019-07-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="76c0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用页面对象模型模仿API和维护测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/03839e809f1b628e620fbaa1769c904b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKq4vAt00bTmxtV-szwexg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">亚当·威尔森在<a class="ae ky" href="https://unsplash.com/search/photos/testing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="8628" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">UI测试的重要性</h1><p id="aff1" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">单元测试很重要。他们确保我们的函数正常工作，我们没有破坏任何东西，并捕捉边缘情况。</p><p id="51c3" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">然而，从用户的角度来看，如果按下确认按钮没有将他们带到预期的屏幕，这并不重要。所以，UI测试并没有取代测试套件中的单元测试，它只是完成了单元测试。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="788a" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">用户界面测试的问题</h1><p id="95c6" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">我不知道随着时间的推移，有多少开发人员维护单元测试，但我知道UI测试在开发人员中仍然非常少见。实际上，是有原因的。</p><p id="fdb2" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">由于以下原因，很难设置UI测试来防止随着时间的推移而中断:</p><ul class=""><li id="07b7" class="mz na it ma b mb mu me mv mh nb ml nc mp nd mt ne nf ng nh bi translated">我们的应用程序使用后端服务器，因此测试变得非常不一致:网络问题或服务器问题。我们无法控制从服务器返回的请求。</li><li id="e6ca" class="mz na it ma b mb ni me nj mh nk ml nl mp nm mt ne nf ng nh bi translated">编写UI测试脚本需要很多时间。为单个测试定位按钮或处理屏幕间的导航。然后，当我们想要创建一个新的测试用例时，我们必须复制代码。</li><li id="40d0" class="mz na it ma b mb ni me nj mh nk ml nl mp nm mt ne nf ng nh bi translated">这些测试不仅写起来很长，而且可读性也不好。试着在它们被创造两天后去理解它们，你就会明白我的意思。</li><li id="de16" class="mz na it ma b mb ni me nj mh nk ml nl mp nm mt ne nf ng nh bi translated">用户界面一直在变化。我们添加和删除按钮、屏幕、滚动条等等。每当我们想做一些小的改变时，更新测试就成了一场噩梦。</li></ul></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="1ee3" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">模拟你的后端</h1><p id="aab1" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">大多数移动应用程序都使用后端服务器，对于UI测试来说，这可能是一个挑战。</p><p id="d01b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">任何自动测试的第一条规则是，如果你运行测试1000次，你应该期望每次都有相同的结果。因此，服务器和网络问题使你的测试不可靠。</p><p id="17ba" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是，如果您遵循SoC(关注点分离)，您可以通过创建一个<em class="nn">模拟服务器</em>来模拟您的后端服务器，在您的网络层实现它，并使您的测试完全可靠和可预测。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/c65fc33a178b6bd4d439f1ac67185753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TczGfWceX0E5i131iIQ7TA.png"/></div></div></figure><p id="408c" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">许多工具可以帮助您模拟您的服务器，但原则总是相同的——用一个本地组件替换您的服务器，该组件对您的网络请求返回可预测和可靠的响应对象。</p><p id="d5ab" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">在各种情况下(登录、注销、数据同步等)测试您的应用。)，您可以将您的“请求-&gt;响应”模拟数据保存到不同的<a class="ae ky" href="https://www.json.org/" rel="noopener ugc nofollow" target="_blank"> JSON </a>文件中，其中每个文件代表不同的场景(登录、注册)。</p><p id="b642" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">您使用启动选项用首选文件加载您的测试，因此您不仅解决了可靠性问题，还可以用不同的情况测试您的应用程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">模拟服务器的协议。</p></figure><p id="b70e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">但是建立所有的嘲讽数据是需要时间的！</p><p id="b5df" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">你是开发商，施展你的魔法吧！运行一次应用程序时“记录”请求和响应。你可以用查尔斯代理服务器或者写一些代码将所有的网络数据保存到一个文件中。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b94a" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">模仿其他API</h1><p id="4d61" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这个方法不一定要以仅仅模仿你的服务器来结束。您也可以模仿其他API。</p><p id="1ab5" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">例如，假设您有一个管理地址簿联系人的应用程序，它会与设备的地址簿同步。</p><p id="83e8" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">同样，如果您将地址簿连接器与应用程序的其余部分分离，并遵循面向协议的设计模式，您可以用模拟地址簿替换您的连接器，并返回不同联系人的对象，无论设备当前拥有什么地址簿。</p><p id="286e" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">日历、提醒和其他系统API也是如此。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="58c4" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">用页面对象模型维护测试</h1><p id="f6fa" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">编写UI测试脚本需要时间和精力，但真正的问题是如何长期维护它。</p><p id="ada3" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">解决这个问题最简单的方法是创建一个叫做<em class="nn">页面对象模型</em>的东西。</p><p id="06ff" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">页面对象模型是附加到屏幕上的对象。它有一个对<a class="ae ky" href="https://developer.apple.com/documentation/xctest/xcuiapplication" rel="noopener ugc nofollow" target="_blank"> XCUIApplication </a>的引用，它的职责是在页面上采取行动，定位元素并在需要时返回下一个页面对象。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/4e2847fda3f1d61902897b1b1f2bfc2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nk4x034e9cIX4y-87LNMwA.png"/></div></div></figure><p id="9a8b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">请注意，我不打算向您展示如何编写UI测试脚本，而是想向您展示如何解决为您的应用程序建立良好的测试基础设施时出现的日常问题。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">页面对象的示例。</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用页面对象的UI测试示例。</p></figure><p id="f069" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">页面对象的原则是我们将测试脚本从处理布局中分离出来。</p><p id="fc2d" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">这让我们可以快速编写非常小的、可读的UI测试，同时，通过为每个屏幕构建一个专用的对象来重用辛苦的工作。</p><p id="a86b" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">此外，当您的UI发生变化时，您所要做的就是修改页面对象中的相关方法，而无需接触实际的测试用例。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="688f" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">结论</h1><p id="bbf8" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">这是一篇关于如何克服UI测试问题的简短介绍。</p><p id="9d0d" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">正如我所说的，还有额外的和更复杂的工具，比如设置你的本地服务器来模仿，<a class="ae ky" href="https://serenity-js.org/design/screenplay-pattern.html" rel="noopener ugc nofollow" target="_blank">剧本模式</a>，或者<a class="ae ky" href="https://developer.apple.com/xcode/" rel="noopener ugc nofollow" target="_blank"> Xcode </a>的配置文件。我将在以后的文章中尝试深入探讨这些问题。</p><p id="06ea" class="pw-post-body-paragraph ly lz it ma b mb mu ju md me mv jx mg mh mw mj mk ml mx mn mo mp my mr ms mt im bi translated">最重要的是，你需要建立一个稳定的、可读的、可重用的UI测试基础设施，不要再浪费宝贵的时间让Xcode为你做健康检查了。</p></div></div>    
</body>
</html>