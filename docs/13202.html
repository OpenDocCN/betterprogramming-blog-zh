<html>
<head>
<title>Need an Alternative for Atom Editor? Auto Format JavaScript Code on Neovim With Prettier and ESLint</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">需要Atom编辑器的替代品吗？用appellister和ESLint自动格式化Neovim上的JavaScript代码</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/auto-formatting-javascript-source-code-on-neovim-with-prettier-and-elint-4795457c71e8?source=collection_archive---------2-----------------------#2022-08-07">https://betterprogramming.pub/auto-formatting-javascript-source-code-on-neovim-with-prettier-and-elint-4795457c71e8?source=collection_archive---------2-----------------------#2022-08-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="23e0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Neovim上自动格式化和lint JavaScript代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1b2c1bd8b5264e2b2f4bef01952eaea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9c3p4KpOQNhD9is3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰里米·贝赞格在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e662" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不得不承认，我太懒了，没有换掉我的<a class="ae ky" href="https://atom.io/" rel="noopener ugc nofollow" target="_blank"> Atom编辑器</a>，而是推迟到几周前。我主要使用JavaScript(外加用于类型检查的Typescript ), Atom是一个很好的编辑器，可以满足我的需求。</p><p id="923e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是现在它是一个<a class="ae ky" href="https://github.blog/2022-06-08-sunsetting-atom/" rel="noopener ugc nofollow" target="_blank">存档的项目</a>:</p><blockquote class="lv lw lx"><p id="3ba8" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">我们正在为2022年12月15日的正式日落归档Atom和Atom组织下的所有项目。</p></blockquote><p id="0ec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道<a class="ae ky" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS Code </a>是移植的自然编辑器，但是我想借此机会更好地学习VI editor，并将其作为我的主要IDE。</p><blockquote class="lv lw lx"><p id="8981" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">Vim占用空间小，延迟低，启动速度快，允许更多的屏幕空间，可定制，最重要的是，一旦肌肉记忆根深蒂固，几乎不可能切换到其他东西。<br/> <a class="ae ky" href="https://stackoverflow.blog/2020/11/09/modern-ide-vs-vim-emacs/#:~:text=Vim%20has%20a%20small%20footprint,to%20switch%20to%20something%20else." rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">约翰·比格斯和瑞安·多诺万</strong> </a></p></blockquote><p id="9942" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在试用了几个VI发行版和预配置的插件集合后，我选择了<a class="ae ky" href="https://www.lunarvim.org/#opinionated" rel="noopener ugc nofollow" target="_blank"> LunarVim </a>(基于<a class="ae ky" href="https://neovim.io/" rel="noopener ugc nofollow" target="_blank"> Neovim </a>)并且我对它非常满意。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/ef004b84781b57cbfb29614f90d8531f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NFxc01OILXGk172ld6Edvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://github.com/LunarVim/LunarVim" rel="noopener ugc nofollow" target="_blank"> LunarVim截图</a></p></figure><p id="d0a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唯一缺少的是用<a class="ae ky" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">更漂亮的</a>加上<a class="ae ky" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>修复来格式化我的JS代码的直接方法。就像我在Atom上做的一样。</p><blockquote class="lv lw lx"><p id="61db" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated"><code class="fe md me mf mg b"><a class="ae ky" href="http://eslint.org/" rel="noopener ugc nofollow" target="_blank">eslint</a></code>的<code class="fe md me mf mg b"><a class="ae ky" href="http://eslint.org/docs/user-guide/command-line-interface#fix" rel="noopener ugc nofollow" target="_blank">fix</a></code>特性非常棒，可以根据ESLint配置自动格式化/修复大部分代码。<code class="fe md me mf mg b"><a class="ae ky" href="https://github.com/jlongster/prettier" rel="noopener ugc nofollow" target="_blank">prettier</a></code>是一个更强大的自动格式化程序。漂亮的好处之一是它很固执己见。不幸的是，它不够固执己见和/或有些观点与我的不同。所以在更漂亮地格式化代码后，我开始得到林挺错误。<br/> <a class="ae ky" href="https://github.com/prettier/prettier-eslint/commit/6548bce967eb20aa3122ae71bbbc321493b2dfab" rel="noopener ugc nofollow" target="_blank">肯特·c·多兹</a></p></blockquote><p id="6b20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多方法可以集成prettle和ESLint ( <a class="ae ky" href="https://prettier.io/docs/en/integrating-with-linters.html" rel="noopener ugc nofollow" target="_blank">参见prettle的介绍</a>)，我更喜欢用prettle格式化，然后应用ESLint-fix进行进一步格式化。</p><p id="bfbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Atom上，我有一个更漂亮的Atom插件，支持ESlint集成来实现它。所以每次我格式化代码时，都会应用Prettier，然后“eslint -fix”来进一步重构代码，以遵循我想要的规则。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/dea000c7d886ac1ed721c2f0fc9da4b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXMXEmE9qklTkt6-ZCqsog.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">更漂亮的Atom与ELint集成</p></figure><p id="a0e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了在Neovim上有相同的行为，我使用了"<a class="ae ky" href="https://github.com/jose-elias-alvarez/null-ls.nvim" rel="noopener ugc nofollow" target="_blank"> null-ls </a> " Lua插件(实际上已经包含在LunarVim中，但您可以在vanilla Neovim中单独使用它，请阅读<a class="ae ky" href="https://github.com/nanotee/nvim-lua-guide" rel="noopener ugc nofollow" target="_blank"> null-ls安装说明</a>)并为JavaScript配置了一个新的“自定义格式化程序”，如下所示。</p><h1 id="a872" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">1.漂亮的埃斯林特cli</h1><p id="cd49" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">作为第一步，安装<a class="ae ky" href="https://github.com/prettier/prettier-eslint-cli" rel="noopener ugc nofollow" target="_blank">beautiful-eslint-CLI</a>并确保它可从您的路径调用:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="603a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是Neovim将调用来格式化代码的可执行文件(这只是一个将<a class="ae ky" href="https://github.com/prettier/prettier-eslint" rel="noopener ugc nofollow" target="_blank">beautiful-eslint</a>应用到输入文件的CLI。CLI选项与标准漂亮CLI兼容)。</p><h1 id="7d9a" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">2.LUA配置</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/5ab5e3e991b42168b546757f59090826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hyQEmK3BlkjZ3rv1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@michael75?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><blockquote class="lv lw lx"><p id="00de" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">"<a class="ae ky" href="https://www.lua.org/about.html" rel="noopener ugc nofollow" target="_blank"> Lua </a>(读作<strong class="lb iu"> LOO-ah </strong>)在葡萄牙语中是“月亮”的意思。</p></blockquote><p id="73e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后在<code class="fe md me mf mg b">.config/lvim/config.lua</code>中配置null-ls(如果你使用的是vanilla Neovim，如果你不熟悉Lua ，你可以在这里阅读<a class="ae ky" href="https://github.com/nanotee/nvim-lua-guide" rel="noopener ugc nofollow" target="_blank">)。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="9f53" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">3.项目开发包</h1><p id="d08b" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">下一步(对Atom来说也是必要的)是向项目中添加一些ESLint插件(全局添加它们是不可能的):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加所需的配置/插件</p></figure><h1 id="0451" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">4.规则</h1><p id="d837" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">最后一步，不要忘记在项目中添加你想要的更漂亮和ESlint规则(来触发自动格式化和lint阶段)。</p><p id="5b3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，如果漂亮和优雅的规则自相矛盾，那就不好了。</p><p id="b66e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个很好的起点是扩展ESLint "<a class="ae ky" href="https://github.com/standard/eslint-config-standard" rel="noopener ugc nofollow" target="_blank">standard</a>" config，然后是"<a class="ae ky" href="https://github.com/prettier/eslint-config-prettier" rel="noopener ugc nofollow" target="_blank">prettle</a>" config(最后一个删除了与prettle不兼容的规则)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/78ba1031f9706136effdac87ac32a74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*ehXXLMLON4ktKXAxnRS_sw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://standardjs.com/" rel="noopener ugc nofollow" target="_blank">标准JS标志</a></p></figure><p id="6509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用. eslintrc.json和. prettierrc.json将定义添加到package.json中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Sample .prettierrc.json</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Sample .eslintrc.json</p></figure><h1 id="e28f" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">结论</h1><p id="9dab" class="pw-post-body-paragraph kz la it lb b lc na ju le lf nb jx lh li nc lk ll lm nd lo lp lq ne ls lt lu im bi translated">有了这个配置，我就可以在Neovim上自动格式化和lint我的JS代码，就像我在Atom上使用带有ESLint集成的漂亮插件所做的那样。</p><p id="ade5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该解决方案运行良好，但如果实现一个守护进程，而不是为每种格式运行一个独立的进程，可能会快得多。</p><p id="70cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现这一点，分叉和定制<a class="ae ky" href="https://github.com/fsouza/prettierd" rel="noopener ugc nofollow" target="_blank">修饰</a>以使用<code class="fe md me mf mg b">prettier-eslint</code>可能是解决方案，也许是下一次。</p></div></div>    
</body>
</html>