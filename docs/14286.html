<html>
<head>
<title>Hello, Robyn: A Python Web Framework With Rust Runtime</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你好，Robyn:带Rust运行时的Python Web框架</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/robyn-a-web-framework-for-python-built-it-on-top-of-rust-28bd795b9e31?source=collection_archive---------3-----------------------#2022-11-24">https://betterprogramming.pub/robyn-a-web-framework-for-python-built-it-on-top-of-rust-28bd795b9e31?source=collection_archive---------3-----------------------#2022-11-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c48f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Robyn web框架构建一个简单的服务器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/725a74e53e454608f9021b322e5f9efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OU9cMz3LBvmrTAeO"/></div></div></figure><blockquote class="kr ks kt"><p id="68cf" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">“Robyn是一个快速、高性能的Python web框架，具有Rust运行时。它被设计为提供接近本地Rust的吞吐量，同时受益于用Python编写的代码。Robyn可与Flask、FastAPI、Django等其他产品相媲美，也是一种web服务器选择。Robyn的主要优势之一是，它不需要外部web服务器来进行生产，从而使其更加高效和简化。”</p><p id="9825" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更多关于罗宾的信息，请点击这里。</p></blockquote><h1 id="a0f6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">特征</h1><ul class=""><li id="8db1" class="mk ml iq kx b ky mm lb mn mo mp mq mr ms mt lq mu mv mw mx bi translated">正在积极开发中！</li><li id="3c80" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">写在Rust，btw xD</li><li id="53f2" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">多线程运行时</li><li id="11a9" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">可扩张的</li><li id="0342" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">一个简单的API</li><li id="88fc" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">同步和异步功能支持</li><li id="8ad4" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">动态URL路由</li><li id="afa9" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">多核扩展</li><li id="8f23" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">WebSockets！</li><li id="3216" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">中间件</li><li id="b7d2" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">热重装</li><li id="808d" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">社区第一，真正的自由/开源软件！</li></ul><h1 id="c3e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置</h1><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="0124" class="ni lt iq ne b be nj nk l nl nm">py -m venv venv cd venv/Scripts activate</span></pre><h1 id="9654" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">装置</h1><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="f9e6" class="ni lt iq ne b be nj nk l nl nm">pip install robyn</span></pre><h1 id="ab16" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">你好世界</h1><p id="e88d" class="pw-post-body-paragraph ku kv iq kx b ky mm jr la lb mn ju ld mo nn lg lh mq no lk ll ms np lo lp lq ij bi translated">让我们编写一个返回“Hello World”的简单端点我们创建一个名为<code class="fe nq nr ns ne b"><a class="ae lr" href="http://app.py" rel="noopener ugc nofollow" target="_blank">app.py</a></code>的文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="e751" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">我们导入Robyn并创建一个Robyn实例。在这种情况下，<code class="fe nq nr ns ne b">app</code>变量。</p><p id="561e" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">然后，我们定义一个路径操作装饰器。当一个请求通过一个<code class="fe nq nr ns ne b">get</code>操作到达路径<code class="fe nq nr ns ne b">/</code>时，<code class="fe nq nr ns ne b">hello</code>函数将处理这个请求，并以“Hello，World！”。</p><p id="92ba" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">为了运行服务器，我们在终端中编写:</p><h1 id="030e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">提供静态文件</h1><p id="32f0" class="pw-post-body-paragraph ku kv iq kx b ky mm jr la lb mn ju ld mo nn lg lh mq no lk ll ms np lo lp lq ij bi translated"><code class="fe nq nr ns ne b">index.html</code></p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="4ce7" class="ni lt iq ne b be nj nk l nl nm">&lt;h1&gt;Hello, World!&lt;h1&gt;</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="1164" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">这里，我们导入了<code class="fe nq nr ns ne b">static file</code>对象，在处理程序内部，我们传递了我们想要提供的HTML文件的路径。</p><h1 id="b024" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">CRUD API</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="f1eb" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">这个处理程序以JSON的形式返回<code class="fe nq nr ns ne b">fake_fruit_database</code>列表。</p><h2 id="6cfd" class="nv lt iq bd lu nw nx dn ly ny nz dp mc mo oa ob me mq oc od mg ms oe of mi og bi translated">通过ID处理程序获取</h2><p id="39ff" class="pw-post-body-paragraph ku kv iq kx b ky mm jr la lb mn ju ld mo nn lg lh mq no lk ll ms np lo lp lq ij bi translated"><code class="fe nq nr ns ne b">helper.py</code>包含一个函数，帮助我们在一个列表中查找并返回带有相应<code class="fe nq nr ns ne b">id</code>的字典。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="3903" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">在<code class="fe nq nr ns ne b">fruit/:id</code>处理程序中，我们添加了路径参数<code class="fe nq nr ns ne b">id</code>，以检索传递了<code class="fe nq nr ns ne b">id</code>的水果。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="2988" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">请求对象具有以下形式:</p><ul class=""><li id="4138" class="mk ml iq kx b ky kz lb lc mo oh mq oi ms oj lq mu mv mw mx bi translated">为了提取<code class="fe nq nr ns ne b">id</code>的值，我们首先传递键<code class="fe nq nr ns ne b">params</code>，然后传递键<code class="fe nq nr ns ne b">id</code>。</li><li id="0ecb" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">如果没有匹配的<code class="fe nq nr ns ne b">id</code>，处理器返回消息“没有找到水果”否则，它返回一个JSON响应。</li></ul><h2 id="9335" class="nv lt iq bd lu nw nx dn ly ny nz dp mc mo oa ob me mq oc od mg ms oe of mi og bi translated">后期处理程序</h2><p id="98ab" class="pw-post-body-paragraph ku kv iq kx b ky mm jr la lb mn ju ld mo nn lg lh mq no lk ll ms np lo lp lq ij bi translated">在下面的处理程序中，我们从请求对象中提取主体并解码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="9611" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">然后，我们使用<code class="fe nq nr ns ne b">json.loads()</code>方法将主体反序列化并转换为python字典。</p><p id="cd26" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">我们为添加的水果生成一个<code class="fe nq nr ns ne b">id</code>。我们创建一个新的字典，并将其添加到水果列表中。并返回状态代码<code class="fe nq nr ns ne b">201</code>和一个JSON作为主体响应。</p><h2 id="d7e2" class="nv lt iq bd lu nw nx dn ly ny nz dp mc mo oa ob me mq oc od mg ms oe of mi og bi translated">放置处理程序</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="d7aa" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">我们需要提取这个处理程序的<code class="fe nq nr ns ne b">id</code>参数和主体。</p><p id="46f1" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">然后，我们搜索传递了<code class="fe nq nr ns ne b">id</code>的水果，并用请求体中的值替换水果值。</p><h2 id="67ee" class="nv lt iq bd lu nw nx dn ly ny nz dp mc mo oa ob me mq oc od mg ms oe of mi og bi translated">删除处理程序</h2><p id="e78e" class="pw-post-body-paragraph ku kv iq kx b ky mm jr la lb mn ju ld mo nn lg lh mq no lk ll ms np lo lp lq ij bi translated">这里，我们从水果列表中删除带有作为参数传递的<code class="fe nq nr ns ne b">id</code>的字典。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="a5c2" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">默认的<code class="fe nq nr ns ne b">PORT</code>和<code class="fe nq nr ns ne b">URL</code>分别是<code class="fe nq nr ns ne b">5000</code>和<code class="fe nq nr ns ne b">127.0.0.1</code>。</p><p id="9e09" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">如果我们想在不同的端口和URL上启动服务器，我们必须将值传递给<code class="fe nq nr ns ne b">app.start()</code>。</p><pre class="kg kh ki kj gt nd ne nf bn ng nh bi"><span id="2421" class="ni lt iq ne b be nj nk l nl nm">app.start(port=8000, url="0.0.0.0")</span></pre><h1 id="4b22" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">一锤定音</h1><p id="0bc1" class="pw-post-body-paragraph ku kv iq kx b ky mm jr la lb mn ju ld mo nn lg lh mq no lk ll ms np lo lp lq ij bi translated">我学习Rust已经有几个月了，我认为使用Rust来构建一个Python web框架并利用Rust的力量是很有趣的。我热衷于使用Robyn并撰写相关文章。我很兴奋地关注着它的发展。如果您对其他软件包、架构等有任何建议，请告诉我。</p><p id="afcc" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated">源代码可在<a class="ae lr" href="https://github.com/carlosm27/robyn_demo" rel="noopener ugc nofollow" target="_blank">这里</a>获得。感谢阅读。</p><h1 id="08bb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">参考</h1><ul class=""><li id="3d04" class="mk ml iq kx b ky mm lb mn mo mp mq mr ms mt lq mu mv mw mx bi translated"><a class="ae lr" href="https://github.com/sansyrox/robyn" rel="noopener ugc nofollow" target="_blank">罗宾的GitHub页面</a></li><li id="e65c" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://sansyrox.github.io/robyn/#/" rel="noopener ugc nofollow" target="_blank">罗宾文档</a></li><li id="9739" class="mk ml iq kx b ky my lb mz mo na mq nb ms nc lq mu mv mw mx bi translated">你好，罗宾！</li></ul></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><p id="6a84" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld mo lf lg lh mq lj lk ll ms ln lo lp lq ij bi translated"><em class="kw">原载于</em><a class="ae lr" href="https://carlosmv.hashnode.dev/robyn-a-web-framework-for-python-built-it-on-top-of-rust" rel="noopener ugc nofollow" target="_blank"><em class="kw">https://Carlos mv . hash node . dev</em></a><em class="kw">。</em></p></div></div>    
</body>
</html>