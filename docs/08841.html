<html>
<head>
<title>How To Handle Cache-Related Errors in Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何处理Spring Boot中与缓存相关的错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-handle-cache-related-errors-in-spring-boot-679333e1beb7?source=collection_archive---------5-----------------------#2021-06-17">https://betterprogramming.pub/how-to-handle-cache-related-errors-in-spring-boot-679333e1beb7?source=collection_archive---------5-----------------------#2021-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0603" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">保护您的Spring Boot应用程序免受缓存故障的影响</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/818668d3eb5d74643226955db38a41c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ynH04RTEjHze_zdBvgimiA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">布莱克·康纳利在<a class="ae ky" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="6c0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的几个月里，我一直在Spring Boot处理缓存问题，并在许多项目中积极使用它。这给了我深入研究<a class="ae ky" href="https://docs.spring.io/spring-framework/docs/5.0.0.M5/spring-framework-reference/html/cache.html" rel="noopener ugc nofollow" target="_blank"> Spring Cache抽象</a>的机会，理解它的优点和缺点。</p><p id="56ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，您的应用程序不太可能严重依赖缓存。事实上，您可能只是将缓存作为一种提高性能的方法。在这种情况下，即使出现与缓存相关的错误，您的应用程序也可能会顺利运行。因此，您可能甚至没有意识到缓存系统中的故障，这使得它们很难被发现。这就是为什么实现一个系统来正确处理与缓存相关的错误是至关重要的。</p><p id="8c87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何在Java和Kotlin中实现这一点。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2c15" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">处理与缓存相关的错误</h1><p id="ce52" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了处理缓存故障，Spring Boot提供了<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html" rel="noopener ugc nofollow" target="_blank">CacheErrorHandler</a></code> <a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html" rel="noopener ugc nofollow" target="_blank"> </a>接口。通过实现它，您可以定义您想要的错误处理逻辑。然后，您只需将您的自定义实现注册为默认的错误处理程序。让我们来看看如何完成这两件事。</p><h2 id="1f6c" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">定义自定义错误处理逻辑</h2><p id="a9bb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html" rel="noopener ugc nofollow" target="_blank">CacheErrorHandler</a></code>接口提供了以下四种方法:<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html#handleCacheGetError-java.lang.RuntimeException-org.springframework.cache.Cache-java.lang.Object-" rel="noopener ugc nofollow" target="_blank">handleCacheGetError</a></code>、<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html#handleCachePutError-java.lang.RuntimeException-org.springframework.cache.Cache-java.lang.Object-java.lang.Object-" rel="noopener ugc nofollow" target="_blank">handleCachePutError</a></code>、<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html#handleCacheEvictError-java.lang.RuntimeException-org.springframework.cache.Cache-java.lang.Object-" rel="noopener ugc nofollow" target="_blank">handleCacheEvictError</a></code>、<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html#handleCacheClearError-java.lang.RuntimeException-org.springframework.cache.Cache-" rel="noopener ugc nofollow" target="_blank">handleCacheClearError</a></code>。每一个都旨在帮助您处理用<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/annotation/Cacheable.html" rel="noopener ugc nofollow" target="_blank">@Cachable</a></code>、<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/annotation/CachePut.html" rel="noopener ugc nofollow" target="_blank">@CachePut</a></code>或<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/annotation/CacheEvict.html" rel="noopener ugc nofollow" target="_blank">@CacheEvict</a></code>注释的方法中出现的错误，这些注释是最重要的Spring Boot缓存相关注释。</p><p id="f9c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您需要做的只是实现<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/CacheErrorHandler.html" rel="noopener ugc nofollow" target="_blank">CacheErrorHandler</a></code>接口，在上述四种方法中提供错误处理逻辑。</p><p id="25fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="cbf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">科特林:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="8534" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，您可以记录与缓存相关的错误，不再忽略它们，或者在出现致命异常时将它们发送回客户端。</p><h2 id="4ecb" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">注册您的自定义CacheErrorHandler实现</h2><p id="ceff" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，您必须定义一个继承自<code class="fe mz na nb nc b"><a class="ae ky" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/annotation/CachingConfigurerSupport.html" rel="noopener ugc nofollow" target="_blank">CachingConfigurerSupport</a></code>的<code class="fe mz na nb nc b">CustomachingConfiguration</code>类。覆盖它的<code class="fe mz na nb nc b">errorHandler</code>方法，并确保返回上面定义的<code class="fe mz na nb nc b">CustomCacheErrorHandler</code>类的一个实例。</p><p id="50cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="247d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">科特林:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="6331" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊！您的应用程序现在受到保护，不会出现与缓存相关的故障。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1f25" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">奖金</h1><p id="fdec" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">处理缓存可能会带来一些只有彻底清理才能解决的问题。这就是为什么你应该通过添加一些管理工具来保护自己，正如这里<a class="ae ky" href="https://levelup.gitconnected.com/building-an-api-to-clear-all-the-caches-of-your-spring-boot-application-2d0dfdfe71b3" rel="noopener ugc nofollow" target="_blank">所解释的</a>。</p><div class="nr ns gp gr nt nu"><a href="https://levelup.gitconnected.com/building-an-api-to-clear-all-the-caches-of-your-spring-boot-application-2d0dfdfe71b3" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">构建一个API来清除Spring Boot应用程序的所有缓存</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">通过按需清除所有缓存数据来避免一致性问题</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div><p id="2567" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您不应该让您的缓存增长太多。这就是为什么<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-add-compression-to-caching-in-spring-boot-d4d21533167c">向Spring Boot缓存添加压缩</a>可能变得不可避免。</p><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-add-compression-to-caching-in-spring-boot-d4d21533167c"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">如何在Spring Boot的缓存中添加压缩</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">释放您的缓存</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">better编程. pub</p></div></div><div class="od l"><div class="oj l of og oh od oi ks nu"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="866f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="78f8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">处理缓存是一件棘手的事情，您甚至可能意识不到错误的发生或者无法复制它们。这就是为什么您应该采用一种方法来优雅地处理与缓存相关的错误。正如我们刚刚看到的，在您的Spring Boot应用程序中向缓存系统添加错误处理逻辑并不复杂，它可以让您避免将来的麻烦。</p><p id="a76b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！我希望这篇文章对你有所帮助。如果有任何问题、意见或建议，请随时联系我。</p></div></div>    
</body>
</html>