<html>
<head>
<title>How To Deploy ML Models on AWS With Elastic Beanstalk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用弹性Beanstalk在AWS上部署ML模型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deploy-ml-models-into-aws-with-elastic-beanstalk-f1364e8d1238?source=collection_archive---------8-----------------------#2021-02-03">https://betterprogramming.pub/how-to-deploy-ml-models-into-aws-with-elastic-beanstalk-f1364e8d1238?source=collection_archive---------8-----------------------#2021-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d10a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在AWS Elastic Beanstalk上构建和部署Python Flask API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d8b31cf20e229dd75d068b6c6d7282a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3tJnED0uovl1L131.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts-worker.html" rel="noopener ugc nofollow" target="_blank"> AWS </a>。</p></figure><p id="414f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在之前的文章中，我们提供了<a class="ae ky" href="https://predictivehacks.com/python-rest-api-example/" rel="noopener ugc nofollow" target="_blank">如何构建Flask Rest API </a>、<a class="ae ky" href="https://predictivehacks.com/practical-guide-build-and-deploy-a-machine-learning-web-app/" rel="noopener ugc nofollow" target="_blank">如何构建和部署机器学习web app </a>，以及<a class="ae ky" href="https://predictivehacks.com/how-to-deploy-a-flask-api-the-easiest-fastest-and-cheapest-way/" rel="noopener ugc nofollow" target="_blank">如何用</a><a class="ae ky" href="https://www.digitalocean.com/?refcode=2c0731159639&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=CopyPaste" rel="noopener ugc nofollow" target="_blank">数字海洋</a>部署Flask API 的例子。今天，我们将提供一个实际操作的例子，说明如何使用<a class="ae ky" href="https://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank"> Elastic Beanstalk </a>在AWS上部署机器学习模型的Flask应用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dd2f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用例</h1><p id="b124" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">让我们假设你是一名数据科学家，你建立了一个机器学习模型，并希望与其他人分享。共享模型最常见的方式是使用Flask Restful API，但是您需要一个服务器。你可以用弹性豆茎:</p><blockquote class="mz na nb"><p id="f9db" class="kz la nc lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated">“Elastic Beanstalk是在AWS上部署应用程序的最快、最简单的方式。您只需使用AWS管理控制台、Git存储库或集成开发环境(IDE)如Eclipse或Visual Studio来上传您的应用程序，而Elastic Beanstalk会自动处理容量供应、负载平衡、自动伸缩和应用程序健康监控的部署细节。几分钟之内，您的应用程序就可以投入使用，无需您进行任何基础架构或资源配置工作。”— <a class="ae ky" href="https://www.amazonaws.cn/en/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank"> AWS弹性豆茎</a></p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="35b1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">构建Flask API</h1><p id="dd79" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在之前的一篇文章中，我们提供了一个<a class="ae ky" href="https://predictivehacks.com/how-to-run-sentiment-analysis-in-python-using-vader/" rel="noopener ugc nofollow" target="_blank">如何在Python </a>中运行情感分析的例子。假设我们被要求构建一个API，该API将文本作为输入，并返回情感是<code class="fe ng nh ni nj b">Positive</code>、<code class="fe ng nh ni nj b">Negative</code>还是<code class="fe ng nh ni nj b">Neutral</code>。对于这个任务，您应该<a class="ae ky" href="https://predictivehacks.com/working-with-anaconda-environments/" rel="noopener ugc nofollow" target="_blank">创建一个新环境</a>，然后通过创建<code class="fe ng nh ni nj b">requirements.txt</code>文件来冻结它。</p><p id="2fe1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ng nh ni nj b">application.py</code>文件是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="9d66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，让我们看看我们的API在本地是否如预期的那样工作。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8a3b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用Postman测试POST请求</h1><p id="1ff5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们给出“太棒了！这真是太酷了！”作为输入，得到“正”作为输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/6952335cff1325a51a014344c2465e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/0*iZ9KPYtcpM7E-6oy.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="902f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用Postman测试GET请求</h1><p id="40cf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们给“可怕！“非常糟糕的一天”作为输入，而“消极”作为输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/454e6b797c9a5860ceccba2124ecefbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BdQ8_3RLkFdOf78b.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="073b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">要求</h1><p id="8105" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">既然我们确认了API可以工作，我们就准备好部署它了。我们需要做的最后一件事是在我们的环境中创建与命令相关的<code class="fe ng nh ni nj b">requirements.txt</code>文件:</p><pre class="kj kk kl km gt no nj np nq aw nr bi"><span id="249a" class="ns md it nj b gy nt nu l nv nw">pip freeze &gt; requirements.txt</span></pre><p id="d40d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> </strong> <code class="fe ng nh ni nj b">requirements.txt</code>文件看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="4084" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们需要创建一个包含<code class="fe ng nh ni nj b">application.py</code>和<code class="fe ng nh ni nj b">requirements.txt</code>文件的zip文件，并将它上传到Beanstalk。</p><p id="769d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nc">注意:zip文件中不应该有任何其他子文件夹，因为Beanstalk将无法找到这些文件。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4490" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在弹性豆茎上展开</h1><p id="729d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们将需要登录到AWS控制台并转到Elastic Beanstalk。单击橙色的“创建应用程序”按钮。对于应用程序名称，我们可以键入<code class="fe ng nh ni nj b">my_sentiment_api</code>。对于平台，选择Python。对于应用程序代码，上传您在上面创建的<code class="fe ng nh ni nj b">.zip</code>文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/bba1aaad0dcc4a1547b97f3680c4460e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g1h19W2-s177XST8.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/6d8a588dcec60b7f92687c506b3b3f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/0*h22wtQpStPNiIe5p.png"/></div></figure><p id="8488" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击“创建应用程序”,等待大约五分钟。然后，API将运行，我们将获得API URL:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/af5d8b5233cac735dadd57ac091616eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U5DcflO2xDKkMqBJ.png"/></div></div></figure><p id="5ec7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看是否可以使用URL发送请求。我们将和邮递员一起测试它。让我们试试这段文字:“完美！我们部署了第一个API。太神奇了。”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/20bcd4cca584192c74027658f69f2119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/0*4zEu3BUvwnDBiBv9.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3e53" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用Python调用Flask API</h1><p id="19c7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">因为我们已经部署了一个API，这意味着每个人都可以使用它。让我们看看如何用Python调用API(例如POST请求)。</p><p id="e4ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们会得到以下三句话的感悟:</p><ul class=""><li id="9ea7" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">“这太酷了。”</li><li id="b435" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">“这太可怕了。”</li><li id="de38" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">“这是我的博客。”</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="afba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt no nj np nq aw nr bi"><span id="b26d" class="ns md it nj b gy nt nu l nv nw">Positive<br/>Negative <br/>Neutral</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c3b6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">删除您的弹性豆茎环境</h1><p id="bbf8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">你也知道，AWS弹性豆茎不是免费的。因此，为了避免任何额外的费用，您需要删除环境:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/1858605573c584684675e8029eeae8a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YGe-qgzY6hKdM2CO.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3d0b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">外卖</h1><p id="b102" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Elastic Beanstalk提供了一种简单的方法来部署快速而肮脏的Flask APIs。您可以在<a class="ae ky" href="https://aws.amazon.com/getting-started/hands-on/launch-an-app/" rel="noopener ugc nofollow" target="_blank">入门</a>指南中找到我们上面描述的步骤。查看<a class="ae ky" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/Welcome.html" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多信息。</p><p id="8ae6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">【https://predictivehacks.com】最初发表于<a class="ae ky" href="https://predictivehacks.com/how-to-deploy-ml-models-into-aws-with-elastic-beanstalk/" rel="noopener ugc nofollow" target="_blank"><em class="nc"/></a><em class="nc">。</em></p></div></div>    
</body>
</html>