<html>
<head>
<title>Postman: Skills that every developer should know for Fast and Agile Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Postman:每个开发人员都应该知道的快速敏捷开发技能</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/advanced-features-for-fast-and-agile-development-using-postman-6fd782585067?source=collection_archive---------9-----------------------#2020-05-07">https://betterprogramming.pub/advanced-features-for-fast-and-agile-development-using-postman-6fd782585067?source=collection_archive---------9-----------------------#2020-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4b3b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更彻底地测试你的API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a22c8cee54539d04c9569c8df90a4a81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*12I5mLs6drkFVqdIzqorAA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wildlittlethingsphoto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">海伦娜·洛佩斯</a>在<a class="ae ky" href="https://unsplash.com/collections/3577927/computing-and-it?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="d5e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">多年来，我们一直使用Postman作为我们的API客户端来测试API，从而加快了开发速度。</p><p id="83f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">对于新手到Postman: </strong> Postman是一个流行的API客户端，可以让开发者轻松地创建、共享、测试和记录API。这是通过允许用户创建和保存简单和复杂的HTTP/s请求，以及读取它们的响应来实现的。结果是:工作效率更高，不那么乏味。</p><p id="a8e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们中的许多人都忽略了它可以提供的开箱即用的功能和能力，这些功能和能力最终会带来更快、更敏捷的开发。让我们深入探讨一下每个人都应该使用的一些高级功能，以充分利用Postman。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ad8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">环境</strong></h1><p id="be9e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Postman中的环境基本上是一组<code class="fe mz na nb nc b">key-value</code>对，它们可以在向服务器发出HTTP/HTTPS请求时用作变量。</p><h2 id="2aa0" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated"><strong class="ak">举例理解</strong></h2><p id="ad39" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最简单的用例是在不同的开发环境中测试相同的API例如，本地/QA/生产环境。</p><p id="62e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，服务器的URL发生了变化，其他一切保持不变。如何处理这种情况？</p><p id="bd0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">正常方法<br/> </strong>在Postman中用不同的主机多次保存同一个请求。使用需要的那个。</p><p id="3c89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">与邮差环境<br/> </strong>定义两个环境，比如说<code class="fe mz na nb nc b">Production</code>和<code class="fe mz na nb nc b">Local</code>。在两个环境中创建一个名为<code class="fe mz na nb nc b">host</code>的变量，并将值设置为每个环境的主机。</p><h2 id="60e1" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated"><strong class="ak">步骤:</strong></h2><ol class=""><li id="722f" class="np nq it lb b lc mu lf mv li nr lm ns lq nt lu nu nv nw nx bi translated">点击邮差app右上方的齿轮图标(管理环境)<strong class="lb iu"> </strong>进入以下页面。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/aa9c4fa4ff7e7e092267ab346e41a44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EELvUHMhwDyY0Wcqjjd0bQ.png"/></div></div></figure><p id="592f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.点击Add按钮添加一个环境，添加两个环境<code class="fe mz na nb nc b">local</code>和<code class="fe mz na nb nc b">production</code>，变量<code class="fe mz na nb nc b">host</code>相同，对应值<code class="fe mz na nb nc b">localhost</code>和<code class="fe mz na nb nc b">production url</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/652ed9ddabb5a6d133aa4b5891960b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHtvbL64-fac0O-CmfY5eQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">局部环境</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/52de90528d3bcbad7413782c3fc363a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gx3ZJ94AwKUi1oJ0yzlWjg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">生产环境</p></figure><p id="1e98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.现在使用<code class="fe mz na nb nc b">host</code>变量发出与URL无关的请求。切换环境以更改其值。</p><p id="ced9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要切换环境，使用环境下拉菜单，该菜单当前显示<code class="fe mz na nb nc b">local</code>被选中。</p><p id="7e04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将鼠标悬停在<code class="fe mz na nb nc b">{{host}}</code>上—您将看到它的值，当发出实际请求时，它将被替换。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/a5e3051128f23cddcf42a4f0100b46ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Are7UxrGknUwf7u41BZAeg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用环境变量</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="22c5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">请求前脚本</strong></h1><p id="83f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这些脚本是用JavaScript编写的，在发送请求之前运行。</p><h2 id="4874" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated"><strong class="ak">何时使用</strong></h2><p id="591a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在请求运行之前，您可以在Postman中使用预请求脚本来执行JavaScript。通过在请求、集合或文件夹的“请求前脚本”选项卡中包含代码，您可以执行预处理，如设置变量值、参数、标题和正文数据。您还可以使用预请求脚本来调试代码，例如，通过将输出记录到控制台。</p><h2 id="8aae" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">通过示例理解</h2><p id="0fe1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">假设您想要测试一个post API，它需要一个字段进行<code class="fe mz na nb nc b">base64</code>编码(否则服务器将抛出一个验证失败错误)。</p><p id="0340" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">正常方法<br/> </strong>使用一个在线工具对请求变量进行编码，然后在每次改变要编码的对象内部的任何值时，将它放入Postman的请求中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/25a3d2c4ad15dfe6087260176aa181a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QaxF5gtZV6Ay-a2ThW6KWg.png"/></div></div></figure><p id="da67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用预请求脚本的步骤</strong></p><ol class=""><li id="64af" class="np nq it lb b lc ld lf lg li od lm oe lq of lu nu nv nw nx bi translated">创建两个名为<code class="fe mz na nb nc b">encoded</code>和<code class="fe mz na nb nc b">decoded</code>的环境变量。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/18ce8c625d15ca1184e2af5ff381ebdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mjs5feugEYu2v3-3ufTPtg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">当前环境中的“解码”和“编码”变量</p></figure><p id="1da8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.在预请求脚本中编写以下代码，从<code class="fe mz na nb nc b">decoded</code>变量中获取数据，对其进行编码，并将编码值保存到<code class="fe mz na nb nc b">encodeded </code>变量中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/77a4007918b17d97bcf965220ca8d371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3_5qun9KXd9FxJWFUlpKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://gist.github.com/anuragsidana/df82faf65816e58cc0071c0039676475" rel="noopener ugc nofollow" target="_blank">点击此链接复制代码</a></p></figure><p id="ee0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.使用<code class="fe mz na nb nc b">"{{encoded}}"</code>作为请求体中需要使用编码值的地方的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/53465603a13372333726c60720ef2833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ZVw2_d9eoIEsnFoU8ELzg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">请求中使用的编码值</p></figure><p id="dba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.每次您想要更改需要编码的数据时，只需更新<code class="fe mz na nb nc b">decoded</code>变量，一切都将迎刃而解。</p><p id="18f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次点击Send按钮，预请求脚本就会执行，从<code class="fe mz na nb nc b">decoded</code>变量获取值，对其进行编码，并将其推送到<code class="fe mz na nb nc b">encoded </code>变量。然后请求bode通过名为<code class="fe mz na nb nc b">encoded</code>的环境变量获取相同的内容。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e313" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">试验</h1><p id="8143" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这些脚本是用JavaScript编写的，在每个请求完成后运行。</p><h2 id="b502" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated"><strong class="ak">何时使用</strong></h2><p id="e7d0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您可以用JavaScript为您的Postman API请求编写测试脚本。允许您确保您的API按预期工作，确定服务之间的集成运行可靠，并验证新的开发没有破坏任何现有的功能。</p><p id="3812" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当API项目出现问题时，您还可以使用测试代码来帮助调试过程。</p><h2 id="a130" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">通过示例理解</h2><p id="7c59" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">假设有一个更新的依赖于版本的API，每次更新请求时，版本都会更新。版本是服务器设置的时间戳字段，需要在下一次更新调用中传递。</p><p id="b7c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">响应看起来像这样</strong></p><pre class="kj kk kl km gt oi nc oj ok aw ol bi"><span id="6594" class="nd md it nc b gy om on l oo op">{<br/>  "id": "id1",<br/>  "name": "ABC",<br/>  "encoded": "ewoJCSJrZXkxIjoidmFsdWUxIiwKCQkia2V5MiI6InZhbHVlMiIKCX0=",<br/>  "updatedVersion": "2020-04-28T16:27:10.728"<br/>}</span></pre><p id="c743" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">正常途径<br/> </strong>每次调用<code class="fe mz na nb nc b">update</code> API，服务器都会返回上面的响应。复制<code class="fe mz na nb nc b">updatedVersion</code>字段，并在下一次更新调用中使用它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/2eb6030ac32d513ab1612f160335da25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_EBavAchncrejcwIwDDZOw.png"/></div></div></figure><p id="358b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">带测试脚本</strong></p><ol class=""><li id="87ca" class="np nq it lb b lc ld lf lg li od lm oe lq of lu nu nv nw nx bi translated">在当前环境中创建一个名为<code class="fe mz na nb nc b">version</code>的环境变量。</li><li id="f9c7" class="np nq it lb b lc or lf os li ot lm ou lq ov lu nu nv nw nx bi translated">编写下面的测试脚本，从响应中获取<code class="fe mz na nb nc b">updatedVersion</code>变量，并将其存储在<code class="fe mz na nb nc b">version</code>变量中。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/f0d4b0be95f6f1513903ecd31ddaf5f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxZwmTEvrWf4oO_NDItruQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://gist.github.com/anuragsidana/08e3750239ad866e1f50fdb320a1633d" rel="noopener ugc nofollow" target="_blank">点击此链接复制代码</a></p></figure><p id="5efd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.使用<code class="fe mz na nb nc b">"{{version}}"</code>作为<code class="fe mz na nb nc b">version</code>键的值，从环境变量中访问它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/2302c13103482b37dbd66a2cec7958ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOzkWe-m1UI9ydV0zkawdQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从环境变量中访问值</p></figure><p id="bdc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次点击发送按钮，我们都会从服务器得到一个响应，表明我们的<code class="fe mz na nb nc b">Test</code>脚本已经被执行了。这将从响应体中获取<code class="fe mz na nb nc b">updatedVersion</code>，并将其复制到名为<code class="fe mz na nb nc b">version</code>的环境变量中。<br/>在发出请求时，它使用<code class="fe mz na nb nc b">version</code>环境变量来设置版本字段的值。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1cd1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="4617" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这些是一些基本的特征，可以使我们的生活更容易，可以帮助我们实现全面更快的发展。以下是我们讨论的内容的摘要:</p><ul class=""><li id="b2c9" class="np nq it lb b lc ld lf lg li od lm oe lq of lu ox nv nw nx bi translated">使用Postman环境变量在不同的环境中使用相同的<code class="fe mz na nb nc b">APIS</code>。</li><li id="8797" class="np nq it lb b lc or lf os li ot lm ou lq ov lu ox nv nw nx bi translated">使用在请求发送到服务器之前自动运行的请求前脚本。这可以在各个方面帮助您，比如请求处理、在发送请求之前更改变量等等。</li><li id="6b8c" class="np nq it lb b lc or lf os li ot lm ou lq ov lu ox nv nw nx bi translated">使用在我们从服务器得到响应后运行的测试脚本。我们可以使用它们来处理响应和调用其他API，在请求完成后丰富环境变量。</li></ul><p id="2bf4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢<a class="oy oz ep" href="https://medium.com/u/eca81dc58b9e?source=post_page-----6fd782585067--------------------------------" rel="noopener" target="_blank"> Jashan Preet Singh </a>对本文的贡献。<br/>感谢阅读。编码快乐！</p></div></div>    
</body>
</html>