<html>
<head>
<title>Continuous Integration (CI) and How It Can Help You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">持续集成(CI)及其对您的帮助</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/continuous-integration-ci-and-how-it-can-help-you-ad53ce42618f?source=collection_archive---------16-----------------------#2022-02-18">https://betterprogramming.pub/continuous-integration-ci-and-how-it-can-help-you-ad53ce42618f?source=collection_archive---------16-----------------------#2022-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e991" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">CI到底是什么？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c9772c1e3906177393ab0244ff73ed67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvQis0lqbYkpDMvGLOGG7A.jpeg"/></div></div></figure><p id="87d6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">持续集成(CI)是一个过程，通过这个过程，我们在代码库中发生每一个变化时都验证我们的项目。整合到底是什么？这取决于您如何配置该过程:它可以像安装依赖项和编译项目一样简单，也可以像运行许多不同的脚本来确定代码库是否处于可接受的状态一样复杂。</p><h1 id="fb41" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">勤奋的同事</h1><p id="d86d" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">你可以把CI想象成一个勤勤恳恳的同事，他总是在那里，等着在将你的变更合并到主分支之前仔细检查它们。当CI就位时，在您的工作流中包含合并请求是一个好主意，即使您单独处理项目。你的改变将由机器<em class="mn">审查</em>，将它们留在一个单独的分支上允许你在合并到主分支之前修复任何问题。</p><p id="bc3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">没有CI，每个开发人员都要负责验证他们自己的所有变更。当然，有时有人会忘记——也许最初的提交是没问题的，但是如果在重定基础或合并之后出现了问题呢？没有CI，你让你最不细心的同事推着推着，忘记了他们的改变，其他人被迫在他们之后收拾残局。</p><h1 id="1435" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">竞争情报是如何构建的</h1><p id="3f08" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">持续集成检查您的提交。对于每一次代码更改，CI通常会按照定义的顺序运行一些不同的任务。您可以将一个作业的输出作为另一个作业的输入；例如，您可以一步构建一个应用程序，然后使用生成的包进行测试。通常，您使用存储库中的配置文件来管理CI——因此，您的CI可以与您的代码库一起发展。</p><p id="9399" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果所有的任务都通过了，那么提交就是<em class="mn">通过</em>；如果其中任何一个失败，那么提交就是<em class="mn">失败</em>。在理想情况下，提交内容单独决定CI结果:它不依赖于外部服务，并且没有任何随机因素会导致它失败。</p><p id="c867" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于每个分支，CI显示了最顶层提交的结果。主枝应该几乎总是通过；它的任何问题都会影响到团队中的每个人，所以如果出现一些倒退，修复它应该是优先考虑的事情。对于一个功能分支，您应该仅在它通过CI时合并它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/c3b04d5ab9b3b2cd1dc0122dd91f8f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yePng78bwG7DcLaX"/></div></div></figure><h1 id="71db" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">您可以委托给您的配置项的任务</h1><p id="0c0f" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">您可以在CI上设置在本地环境中运行的任何脚本。在大型项目中，这个列表可能会很长，但是让我们来看看在任何规模的项目中，您可以预期的CI任务。</p><h1 id="c6d7" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">建筑物</h1><p id="f2ae" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">你可以对你的代码库进行最基本的检查:它能编译吗？这一步将捕捉任何已安装但未保存的依赖项，任何潜入提交的typescript类型不匹配。当开发人员在执行任务时，这些都是简单的修复方法，但是如果与他人分享，这些错误会变得令人困惑或讨厌。</p><h1 id="e5de" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">静态分析</h1><p id="7417" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">静态分析包括在不运行代码的情况下检查代码。在前端项目中，您经常可以看到这样的工具:</p><p id="7e9a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些程序在与代码编辑器集成时最有帮助。在配置项上运行它们是一种额外的检查，可以从两个方面帮助您:</p><ul class=""><li id="89ea" class="mp mq it kw b kx ky la lb ld mr lh ms ll mt lp mu mv mw mx bi translated">它将识别任何忘记在本地运行它们的开发人员——这样他们就可以在弄乱大量代码之前被要求这么做</li><li id="9654" class="mp mq it kw b kx my la mz ld na lh nb ll nc lp mu mv mw mx bi translated">它将识别不同开发环境之间可能出现的任何版本或配置不匹配</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/fe06dc995c8fae6bdfc3ec360e6f5b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HBdUXEdg5HGNsnen"/></div></div></figure><h1 id="ad68" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">运行测试</h1><p id="e4bf" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">如果您非常重视应用程序中的自动化测试，那么拥有一个配置项并在其上运行测试是必不可少的。自动化测试的全部意义在于经常运行它们——当一些代码变更即将公开时，还有比这更好的时机吗？如果不这样做，就会导致以下情况:</p><ul class=""><li id="2040" class="mp mq it kw b kx ky la lb ld mr lh ms ll mt lp mu mv mw mx bi translated">一名开发人员将回归引入代码库</li><li id="6607" class="mp mq it kw b kx my la mz ld na lh nb ll nc lp mu mv mw mx bi translated">其他人在上面添加不相关的变化</li><li id="48f4" class="mp mq it kw b kx my la mz ld na lh nb ll nc lp mu mv mw mx bi translated">有人最终运行了捕捉原始回归的测试</li><li id="5bb9" class="mp mq it kw b kx my la mz ld na lh nb ll nc lp mu mv mw mx bi translated">他们浪费时间来排除不是他们造成的问题，这些问题与他们可能没有意识到的变化有关</li></ul><p id="2ecf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，主要问题是当您进行故障诊断时，您甚至不知道问题是何时出现的；可能是上一次作案，或者是一周前。您可以通过<code class="fe nd ne nf ng b">git blame</code>或<code class="fe nd ne nf ng b">git bisect</code>来摆脱它，但是简单地知道测试停止工作的点更容易。</p><p id="7e7b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我强调另一件事:编写测试是对质量保证的投资。这是日复一日的努力。如果您正在投入这种日常工作，那么花时间设置CI以从您开发的测试中获得最大收益是有意义的，哪怕只有一次。</p><h1 id="7b1b" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">部署</h1><p id="d4e9" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">您经常会将CI与连续部署(CD)放在一起，缩写为CI/CD。这是因为当您编译和验证代码时，您已经为部署做好了一切准备——至少是部署到测试服务器上。一个真正的CD会要求你交付到产品中，但是这可能更具挑战性，特别是当它将项目的用户暴露在潜在的倒退中。</p><h1 id="5db0" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">下降趋势</h1><p id="069d" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">CI的缺点是什么？</p><h1 id="90a4" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">复杂的设置</h1><p id="797e" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">设置可能很耗时，尤其是如果你以前从未做过。即使是最简单的配置更改也可能需要相当长的时间来验证，因为您需要在您无法直接访问的外部服务器上运行它。</p><h1 id="fd56" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">对外部供应商的依赖</h1><p id="01b7" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">如果您将配置项集成到您的工作流中，您将依赖于您的配置项提供商。如果他们倒下了，你就不能融合——至少不能与你所习惯的所有安全网融合。这可能会令人沮丧，尤其是如果它经常发生。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/27c2121713a9df7d3a903c299cd2c0d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TPSq9CKNd_bB7Pz6"/></div></div></figure><h1 id="0048" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">费用</h1><p id="d398" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">许多CI供应商有一个免费的计划，对于简单的练习或演示项目来说应该绰绰有余。对于一个人们全职工作的项目，几乎可以肯定的是，你需要一个付费的计划，外加额外的时间让CI机器运行你的脚本。即使您假设CI每天只为团队中的每个开发人员节省几分钟时间，成本也可能是值得的。</p><h1 id="fa36" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">你呢？</h1><p id="fc99" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">您是否有兴趣了解有关设置CI的更多信息？我正在考虑写一些关于CI工具设置的更详细的帖子。通过了解您最感兴趣的工具，我可以创建符合您期望的内容。所以，请在下面的<a class="ae nh" href="https://strawpoll.com/co8pv72pr" rel="noopener ugc nofollow" target="_blank">投票中投票吧！你的意见对我很重要。谢谢！</a></p><h1 id="8dca" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">下一步是什么？</h1><p id="db02" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">为了从您的CI中获得更多价值，您对它运行端到端测试(E2E)。在CI上设置E2E是一个挑战，我将在另一篇文章中介绍它。同时，你可以看看如何从E2E 开始<a class="ae nh" href="https://how-to.dev/how-to-add-end-to-end-tests-to-a-project" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="303f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="mn">最初发布于</em><a class="ae nh" href="https://how-to.dev/continuous-integration-ci-and-how-it-can-help-you" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://how-to . dev</em></a><em class="mn">。</em></p></div></div>    
</body>
</html>