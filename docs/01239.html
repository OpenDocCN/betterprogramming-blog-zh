<html>
<head>
<title>Free Serverless Blogging via AWS Amplify and Hexo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过AWS Amplify和Hexo的免费无服务器博客</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/free-serverless-blogging-via-aws-amplify-and-hexo-32ada39f7af3?source=collection_archive---------9-----------------------#2019-08-25">https://betterprogramming.pub/free-serverless-blogging-via-aws-amplify-and-hexo-32ada39f7af3?source=collection_archive---------9-----------------------#2019-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9351" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个几乎免费托管的著名node.js包</h2></div><p id="5074" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我将展示如何基于一个著名的免费(几乎免费)托管的node.js包快速创建一个新博客。听起来好得难以置信？不是的！请继续阅读…</p><p id="e8b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行一个关于AWS的博客意味着，根据假设规则，我应该在AWS(【https://www.awsadvocate.com】T2)上运行那个博客<em class="lb">。有什么比无服务器运行博客更好的方式呢？有了12个月的免费AWS帐户，我可以获得一年的100%免费托管。根据我的估计，即使过了这段时间，我每个月也只需要花0.5美元就可以拥有我的博客。相比之下，托管大多数其他博客，如Wix、Wordpress.com或Webflow，平均需要10-20美元。此外，当我在AWS上托管时，我还获得了以下好处:</em></p><ul class=""><li id="1d55" class="ld le iq kh b ki kj kl km ko lf ks lg kw lh la li lj lk ll bi translated">通过AWS CloudFront的全球CDN实现疯狂的页面响应速度</li><li id="1de7" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">通过一个很棒的node.js博客框架(Hexo)100%控制我的内容和主题</li><li id="1d79" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">使用AWS CodeCommit轻松访问私有git进行源代码控制</li><li id="8b6d" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">AWS证书管理器提供的免费SSL/HTTPS证书(每年价值100美元)</li><li id="50d5" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">真是<em class="lb">路</em>更好玩！</li></ul><p id="95af" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hexo是一个伟大的开源博客框架，它基于node.js，是从头开始写博客的完美方式。查看我的<a class="ae lc" href="https://d3mvqf4qoyno5o.cloudfront.net/2019/08/23/hello-world/" rel="noopener ugc nofollow" target="_blank"> Hello World </a>帖子，了解更多关于Hexo的细节和其他一些有用的链接！</p><p id="160d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们建立和运行博客的基本步骤如下:</p><ol class=""><li id="9971" class="ld le iq kh b ki kj kl km ko lf ks lg kw lh la lr lj lk ll bi translated">安装Hexo</li><li id="1df6" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la lr lj lk ll bi translated">为AWS发布安装AWS放大器</li><li id="2932" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la lr lj lk ll bi translated">发布到AWS</li><li id="70f9" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la lr lj lk ll bi translated">解决index.html路由问题</li></ol></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d3cd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">安装Hexo博客框架</h1><p id="4cf4" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">建立我们博客的第一步是安装我们的博客框架Hexo。运行下面的node.js命令来安装Hexo(如果您还没有安装node，请先安装它)。</p><blockquote class="mw mx my"><p id="86cf" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$ npm安装hexo-cli -g</p></blockquote><p id="5ab5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装Hexo CLI后，您接下来想要创建一个新站点:</p><blockquote class="mw mx my"><p id="6e7d" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$ hexo init <folder> <br/> $ cd &lt;文件夹&gt; <br/> $ npm安装</folder></p></blockquote><p id="f4e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">生成站点后，您可以使用以下命令运行站点:</p><blockquote class="mw mx my"><p id="b136" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$ hexo服务器</p></blockquote><p id="f31b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的站点应该是这样的，运行在<a class="ae lc" href="http://localhost:4000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4000 </a>上:</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nc"><img src="../Images/888d0c0312c3ebf6e2152adc60d886b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2NYMKpOVMnJnDL0S.png"/></div></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ae5e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">添加AWS Amplify，以便轻松部署到云</h1><p id="d732" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">显然，在你的博客反映出你独特的人物和风格之前，还有很多事情要做(比如选择和安装一个主题)，但是现在，让我们把我们的博客发布到AWS吧。</p><p id="1411" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AWS Amplify是AWS中的一个新框架，帮助开发人员快速轻松地部署他们的项目。您只需安装CLI，用您的凭证和一些其他设置初始化它，然后从CLI发布——所有复杂的AWS配置都由框架为您完成！</p><p id="2702" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，安装AWS Amplify CLI(如果您尚未安装):</p><blockquote class="mw mx my"><p id="f613" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$ NPM install @ AWS-amplify/API @ AWS-amplify/pubsub</p></blockquote><p id="a045" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装AWS Amplify CLI后，您需要在项目的根目录下对其进行初始化:</p><blockquote class="mw mx my"><p id="c4c0" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$放大初始化</p></blockquote><p id="f620" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该初始化将提示您进行几项设置。你可以在下面找到我的选择。</p><blockquote class="mw mx my"><p id="860a" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated"><em class="iq">“Source”和“public”是支持Hexo的源目录和分发目录路径所必需的</em></p></blockquote><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi no"><img src="../Images/54bdc23cb3cae07960d14953024651c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2VnDNkeZB0FsCfpv.png"/></div></div></figure><p id="45ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">合乎逻辑的下一步是发布，但首先，我们需要添加一些额外的主机配置和后端依赖。运行以下命令开始，并在下面记录我的设置:</p><blockquote class="mw mx my"><p id="99d0" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$ amplify添加主机</p></blockquote><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi np"><img src="../Images/ceb3b75fc206ac68dffb028e5c2a4d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*co7bAHGn0GSTCOO9.png"/></div></div></figure><p id="d53f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出版前的最后一步——我保证这是最后一步。我们需要做一些配置更改来支持一些Hexo特性。将以下内容添加到项目根目录下的package.json文件中:</p><blockquote class="mw mx my"><p id="36a1" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">"脚本":{ <br/>"开始":" hexo服务器"，<br/>"构建":" hexo清理&amp; &amp; hexo部署"<br/> }</p></blockquote><p id="c193" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些配置告知Amplify部署如何启动和构建我们的Hexo包。</p><p id="f440" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这最后一步，你现在可以使用标准的“npm start”在本地运行你的博客——相当于“hexo服务器”。我们现在也准备出版:</p><blockquote class="mw mx my"><p id="bac3" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated">$ amplify publish -c</p><p id="1c89" class="kf kg lb kh b ki kj jr kk kl km ju kn mz kp kq kr na kt ku kv nb kx ky kz la ij bi translated"><em class="iq">关键是“-c”。由于AWS CloudFront(CDN)缓存文件，所以有必要使用-c来清除该缓存，否则您的发布将不会生效，直到该缓存失效。显然，对于我们的第一次出版，这是没有必要的。</em></p></blockquote><p id="63a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">发布完成后，您应该可以立即查看您的网站。请注意全球托管在AWS CloudFront CDN上的URL:</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nq"><img src="../Images/1df24a6a2726a0f4828a30c0fb8d8f20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vo0Xw_OuWa9OHTPD.png"/></div></div></figure><p id="2044" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请随意查看我的<a class="ae lc" href="https://d15hlzxp6f1r12.cloudfront.net/" rel="noopener ugc nofollow" target="_blank">开箱即用的无服务器Hexo部署</a>，然而，正如您所猜测的，<a class="ae lc" href="https://www.awsadvocate.com" rel="noopener ugc nofollow" target="_blank">https://www.awsadvocate.com</a>本质上是一样的:)</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="fb19" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">解决CloudFront Index.HTML子文件夹问题</h1><p id="740e" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">您可能会注意到，只有您的root假定使用index.html。所有其他页面和博客文章都不会，而是将您重定向到根目录/主目录。要解决这个问题:</p><ol class=""><li id="1029" class="ld le iq kh b ki kj kl km ko lf ks lg kw lh la lr lj lk ll bi translated">编辑CloudFront发行版、常规设置，并从默认根对象中删除“index.html”值</li><li id="f145" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la lr lj lk ll bi translated">在“Origins and Origins Groups”选项卡上，单击由Amplify创建的origin，并将路径更改为托管您的网站的S3存储桶的全球可访问URL(您可以获得如下截图所示的URL)。</li></ol><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nr"><img src="../Images/43c0e30ca53d69acbdf7bde21b234115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z8sxxORwEFRlx7PG.png"/></div></div></figure><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi ns"><img src="../Images/1acf28a9d82ea6cd3c0927ec69cd913e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ssrzq3fmVVNp_H5P.png"/></div></div></figure><h1 id="8236" class="lz ma iq bd mb mc nt me mf mg nu mi mj jw nv jx ml jz nw ka mn kc nx kd mp mq bi translated">后续步骤</h1><p id="d5ac" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">那不是很容易吗？这一切都要归功于AWS Amplify，它让无服务器S3应用部署变得轻而易举。然而，你的努力站起来你的博客才刚刚开始。您接下来的一些步骤可能如下:</p><ul class=""><li id="f7cc" class="ld le iq kh b ki kj kl km ko lf ks lg kw lh la li lj lk ll bi translated">将您的代码提交到源代码控制(我使用的是AWS code commit)——但这可能是您的第一步，对吗？</li><li id="2ece" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">使用AWS证书管理器创建一个免费的SSL/HTTPS证书，以获得安全托管和SEO好处</li><li id="f5f8" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">配置AWS CloudFront以使用您的自定义域</li><li id="18e4" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">如果你不喜欢开箱即用的主题，安装一个Hexo主题</li><li id="2889" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">定制您的网站！</li><li id="351c" class="ld le iq kh b ki lm kl ln ko lo ks lp kw lq la li lj lk ll bi translated">写你的第一篇博文！</li></ul><p id="0bc9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谢谢！</p><p id="92ad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">~菲尔</p></div></div>    
</body>
</html>