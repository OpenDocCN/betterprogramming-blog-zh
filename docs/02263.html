<html>
<head>
<title>JavaScript: Sets vs. Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript:集合与数组</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/javascript-sets-vs-arrays-25337bea7939?source=collection_archive---------4-----------------------#2019-11-18">https://betterprogramming.pub/javascript-sets-vs-arrays-25337bea7939?source=collection_archive---------4-----------------------#2019-11-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="becb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">介绍集合，您不知道自己需要的ES6数据类型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c4a56fe2175498b501953b703550f2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W5H_V_NT3oo5HJFH"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mvdheuvel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马腾·范登·霍维尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e14e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Set</code>对象类型是在2015 ECMAScript规范中引入的，并准备好在<a class="ae ky" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>和大多数浏览器中使用。</p><p id="ea60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">集合很像数组，但又有点不同。本文探讨了这些差异，并解释了什么时候应该使用其中一个而不是另一个。让我们来看看。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="a138" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">Sets，街区的新成员</h1><p id="0db0" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">集合是ES6中可用的特殊对象类型。您可以像这样创建一个空集:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="42d6" class="nh mh it ly b gy ni nj l nk nl">const characters = new Set()</span></pre><p id="5eb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，您可以将一个<em class="nm"> iterable </em>传递给集合的构造函数来填充它。iterable只是可以循环的东西，比如数组或字符串。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="4b81" class="nh mh it ly b gy ni nj l nk nl">const characters = new Set(['Rod', 'Todd', 'Sherri', 'Terri'])</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f13c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">阵列，可靠的主力</h1><p id="65df" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">数组是大多数JavaScript应用程序的主要构件，不管是旧的还是新的。如果你以前写过JavaScript，你可能已经很熟悉它们了。您可以像这样创建一个数组:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="4ba6" class="nh mh it ly b gy ni nj l nk nl">const characters = ['Rod', 'Todd', 'Sherri', 'Terri']</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="668a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">那么这有什么意义呢？</h1><p id="38bc" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这两种数据类型相似，但做的事情略有不同。一个<code class="fe lv lw lx ly b">set</code>被设计用来表示一个<em class="nm">唯一的</em>项的集合，而一个数组则更通用一些。</p><p id="304a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以用<code class="fe lv lw lx ly b">Set</code>来表示的一个很好的例子是一个大学生在一个学期中所学的课程。他们可以选修一门或多门课程，但一学期内同一门课程不能选修超过一次。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="4eb0" class="nh mh it ly b gy ni nj l nk nl">const courses = new Set(['English', 'Science', 'Lego Robotics'])</span></pre><p id="3449" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，口袋妖怪卡片的集合对于<code class="fe lv lw lx ly b">Set</code>来说不是一个好的用例，因为它可能包含重复的卡片。在这种情况下，数组是表示数据的更好方式。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="8c66" class="nh mh it ly b gy ni nj l nk nl">const cards = [<br/>  'Machop',<br/>  'Diglett',<br/>  'Charmeleon',<br/>  'Machop',<br/>  'Squirtle'<br/>]</span></pre><p id="05b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">副本可以被传递到一个<code class="fe lv lw lx ly b">Set</code>，但是它们不会被保留。将以下代码复制到您的浏览器控制台中，亲自查看:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="bb37" class="nh mh it ly b gy ni nj l nk nl">new Set([<br/>  'Machop',<br/>  'Diglett',<br/>  'Charmeleon',<br/>  'Machop',<br/>  'Squirtle'<br/>])</span><span id="6eb9" class="nh mh it ly b gy nn nj l nk nl">// Set(4) {"Machop", "Diglett", "Charmeleon", "Squirtle"}</span></pre><p id="7829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传入集合的数组包含两个Machops，但集合只保留一个副本。这种行为很微妙，但是非常有用。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b646" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">这个怎么用？</h1><p id="fbbb" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">假设您正在开发一个博客，并希望创建一个允许访问者搜索与一个或多个类别相匹配的帖子的功能。每个类别只能应用一次。</p><p id="6330" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您使用数组来表示活动类别的列表，您需要注意避免重复。这可以通过检查列表是否已经包含正在添加的类别来完成。</p><p id="cb92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用<code class="fe lv lw lx ly b">indexOf</code>或<code class="fe lv lw lx ly b">includes</code>方法来做到这一点:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="4b87" class="nh mh it ly b gy ni nj l nk nl">// If our list does not include the category<br/>if (!list.includes(category)) {<br/>  // Then add the new category to the list<br/>  list.push(category)<br/>}</span></pre><p id="30fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我曾经发现自己一直在编写这种代码，但是可以使用Sets来自动处理这个问题。您可以简单地使用<code class="fe lv lw lx ly b">add</code>方法，该集合将始终保持唯一。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="5397" class="nh mh it ly b gy ni nj l nk nl">// Just add the category to the list<br/>// No need to perform any checks in advance!<br/>list.add(category)</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="d40a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">将集合转换回数组</h1><p id="48d8" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们已经看到，通过将数组传递给集合的构造函数，可以将数组转换为集合，但是如何将集合转换为数组呢？</p><p id="54ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一种选择是静态调用数组<code class="fe lv lw lx ly b">from</code>方法:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="a6d4" class="nh mh it ly b gy ni nj l nk nl">const set = new Set(['Casablanca', 'The Wizard of Oz', 'Jaws'])<br/>const arr = Array.from(set)<br/>console.log(arr)</span><span id="fe1e" class="nh mh it ly b gy nn nj l nk nl">// (3) ["Casablanca", "The Wizard of Oz", "Jaws"]</span></pre><p id="662e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ES6扩展运算符是另一个选项:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="d677" class="nh mh it ly b gy ni nj l nk nl">const set = new Set(['Casablanca', 'The Wizard of Oz', 'Jaws'])<br/>const arr = [...set]<br/>console.log(arr)</span><span id="e3da" class="nh mh it ly b gy nn nj l nk nl">// (3) ["Casablanca", "The Wizard of Oz", "Jaws"]</span></pre><p id="aa0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">集合不支持函数式编程方法，如map、filter和reduce，因此通常将它们转换为数组进行处理会很方便。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="669c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用集合从数组中删除重复项</h1><p id="548e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">即使您更喜欢将数据保存在数组中，集合仍然很有帮助。从数组中删除重复项的一个简便方法是将其转换为集合，然后再转换回来。</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="5c07" class="nh mh it ly b gy ni nj l nk nl">const cards = [<br/>  'Machop',<br/>  'Diglett',<br/>  'Charmeleon',<br/>  'Machop',<br/>  'Squirtle'<br/>]<br/>const uniqueCards = [...new Set(cards)]<br/>console.log(uniqueCards)</span><span id="e399" class="nh mh it ly b gy nn nj l nk nl">// (4) ["Machop", "Diglett", "Charmeleon", "Squirtle"]</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="130c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">集合如何知道哪些值是唯一的？</h1><p id="b67d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">到目前为止，我们已经看到了集合如何只保存唯一的值，但是唯一的值是如何确定的呢？让我们试一试，找出答案。</p><p id="ced5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们把值<code class="fe lv lw lx ly b">3</code>加到一个集合中两次:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="e8c0" class="nh mh it ly b gy ni nj l nk nl">new Set([1, 2, 3, 4, 3])</span><span id="c3ba" class="nh mh it ly b gy nn nj l nk nl">// Set(4) {1, 2, 3, 4}</span></pre><p id="fca1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个3消失了。这与我们目前所学的一致，但是如果最后的3作为一个字符串添加呢？</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="0991" class="nh mh it ly b gy ni nj l nk nl">new Set([1, 2, 3, 4, '3'])</span><span id="6bf7" class="nh mh it ly b gy nn nj l nk nl">// Set(5) {1, 2, 3, 4, "3"}</span></pre><p id="2fed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有意思。布景师认为<code class="fe lv lw lx ly b">3</code>与<code class="fe lv lw lx ly b">'3'</code>不同。如果我们给一个集合添加匹配的数组会怎么样？</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="3e61" class="nh mh it ly b gy ni nj l nk nl">new Set([['Jesse Pinkman'], ['Jesse Pinkman']])</span><span id="0255" class="nh mh it ly b gy nn nj l nk nl">// Set(4) {['Jesse Pinkman'], ['Jesse Pinkman']}</span></pre><p id="a804" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，集合保留了两个具有相同内容的数组…那么对象呢？</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="ba98" class="nh mh it ly b gy ni nj l nk nl">new Set([{name: 'Ron Burgundy'}, {name: 'Ron Burgundy'}])</span><span id="e912" class="nh mh it ly b gy nn nj l nk nl">// Set(2) {{name: 'Ron Burgundy'}, {name: 'Ron Burgundy'}}</span></pre><p id="5d29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">具有匹配键和值的对象文字也被认为是不同的…</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b008" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">这一切怎么解释？</h1><p id="1114" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">集合使用<em class="nm">严格相等</em> ( <code class="fe lv lw lx ly b">===</code>)来确定哪些值是唯一的。这解释了为什么集合同时维护了<code class="fe lv lw lx ly b">3</code>(数字)和<code class="fe lv lw lx ly b">'3'</code>(字符串)的副本。</p><p id="7d47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还解释了为什么具有相同内容的数组和对象文字被认为是唯一的。JavaScript通过引用而不是内容来比较对象，数组只是一种特殊的对象。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="7acf" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">摘要</h1><p id="9bc2" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">集合为JavaScript开发人员提供了一种新的表示数据的方式。虽然数组<strong class="lb iu"> </strong>仍然是JavaScript应用程序的通用工具，但是集合<strong class="lb iu"> </strong>旨在表示唯一的<strong class="lb iu"> </strong>值集合。</p><p id="c536" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">集合和数组之间的转换很容易。您可以使用集合来确保您的数据保持唯一，然后将其转换为数组，以利用函数方法，如map、filter和reduce。</p><p id="0408" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">集合使用<em class="nm">严格相等</em> <strong class="lb iu"> </strong>来比较值并确定什么是唯一的。因为JavaScript通过引用来比较对象，所以数组和对象文字可以被认为是唯一的，即使它们包含相同的内容。</p><p id="a795" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文主要关注集合的概念方面。您现在应该很清楚什么时候应该使用集合，什么时候最好使用数组。</p><p id="6632" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解如何将set付诸行动的更多信息，请查看MDN的文档。</p></div></div>    
</body>
</html>