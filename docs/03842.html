<html>
<head>
<title>Learn About Generics in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解TypeScript中的泛型</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learn-about-generics-in-typescript-29a02de882c4?source=collection_archive---------3-----------------------#2020-03-08">https://betterprogramming.pub/learn-about-generics-in-typescript-29a02de882c4?source=collection_archive---------3-----------------------#2020-03-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e58d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通用代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5a74525094e8f58f9dc8dbcfeb3e3e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bn4-RRgAxSFLfV68SqM8hg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="ky">照片由</em> <a class="ae kz" href="https://unsplash.com/@lorenzoherrera" rel="noopener ugc nofollow" target="_blank"> <em class="ky">洛伦佐·埃雷拉</em> </a> <em class="ky">上</em> <a class="ae kz" href="https://unsplash.com/photos/p0j-mE6mGo4" rel="noopener ugc nofollow" target="_blank"> <em class="ky">下</em> </a></p></figure><p id="0497" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你学习JavaScript已经有一段时间了，并且你从未有过使用<a class="ae kz" href="https://typescriptlang.org" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>的实践经验，我强烈建议你尽快开始使用TypeScript，看看你是否想开始使用它来开发你的应用程序。将TypeScript集成到您的开发流程中会带来很大的好处，比如编写更好的代码，并在错误发生之前避免它们的发生。</p><p id="f76d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您已经使用过TypeScript，您可能会发现泛型是一个令人困惑的概念，尤其是如果您是TypeScript的新手。然而，在对它们有了更多的了解之后，你会发现它们其实并没有那么难理解。</p><p id="5b1b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">本文旨在回顾TypeScript中的泛型，并讨论它们是什么，它们是如何工作的，以及我们为什么需要它们。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="5759" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">无商标消费品</h1><p id="7f2a" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">我个人认为，在TypeScript中实现和使用泛型既有挑战性又很有趣。</p><p id="35b3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">它们在编写时很容易让人觉得非常复杂，但当它们在代码中正确实现并增强程序的类型安全性时，它使您能够更轻松地做一些事情，如果没有TypeScript来确保代码的安全性，您通常不会这样做。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="e159" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">它们是什么？</h1><p id="c2bb" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">现代应用程序中最强有力的概念之一是软件中可重用组件的概念。这些组件通常用于部分用户界面的上下文中，但是人们也可以互换使用这个术语来表示其他东西，比如页面上的功能或模块。</p><p id="8071" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当某样东西可以被重复使用时，意思是它们可以被用于不止一个目的或多种情况。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="69e7" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">为什么？</h1><p id="6a30" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">如果你不使用泛型，它们可能完全没有用。但是当它们被使用时，它们不仅仅确保类型安全——它们还可以让你做出更好的决定，并且可以给你更多关于如何使用类型函数的想法。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="d5fd" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">它们是如何工作的？</h1><p id="fb4a" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">那么它们如何帮助我们，为什么它们与可重用性有任何关系呢？</p><p id="6486" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设您正在构建一个函数，当它被调用时，会对参数调用<code class="fe nb nc nd ne b">typeof</code>并返回参数。这完全没用，但这不是重点。</p><p id="1cb6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们看看用TypeScript编写时会是什么样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="1278" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">尽管这个函数没什么用，我们可以看到它在参数上加了一种类型的<code class="fe nb nc nd ne b">string</code>。现在，在使用TypeScript时，您可以选择对该函数使用任何类型的字符串:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="2e53" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果我们要让它支持另一种数据类型，我们必须修改代码，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d96e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在实践中，当我们开发应用程序并使用这个函数时，我们只能通过<code class="fe nb nc nd ne b">null</code>来使用它。</p><p id="5b99" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这意味着该函数不可重用。因此，让我们使这个函数更加可重用——我们有几个选项可以做到这一点。</p><p id="1e4a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">第一种选择是使用我们第一次学习TypeScript时都喜欢使用的<code class="fe nb nc nd ne b">any</code>类型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="3b13" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用<code class="fe nb nc nd ne b">any</code>类型给了我们处理任何数据类型的能力，这帮助我们实现了我们的目标。这种方法的警告是我们实际上<em class="lw">失去了</em>类型安全的好处。这意味着，即使我们传入像error实例这样奇怪的值，编译器仍然认为这是可以的，因为TypeScript会为您处理这一责任。</p><p id="05a9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有一种更强大的方法来对函数进行强类型化，使得它们是类型安全的，并且更加可重用。您可以声明一个新的泛型类型并使用它，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="273b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">语法可能看起来有点奇怪和吓人，但实际上非常容易理解。在JavaScript中，您可以声明变量并在以后使用它们，就像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="95f4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在我们的类型声明例子中，这个概念实际上是完全相同的。我们通过将泛型类型<code class="fe nb nc nd ne b">T</code>括在箭头中来声明它，位于第一对括号的正前面:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/84d938c2cf0edaeaa08ea622070f2fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/0*3qxOGN1gt1V9sby0.jpg"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/0e2174ca34594b684b847ea815f9a3bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/0*n2xrds6gm61PgTai.png"/></div></figure><p id="90e0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在，当使用该函数时，您可以看到我们获得了一种更好的方法来重用该函数，同时受到TypeScript linter的保护以防止任何错误行为。</p><p id="d543" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">此外，值得注意的是，就像普通的JavaScript函数一样，您可以声明任意多的类型(就像JavaScript函数的参数一样)，因此您不仅限于一种类型声明:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b746" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您的TypeScript编译器将推断您传递给<code class="fe nb nc nd ne b">arg2</code>的任何类型也将是返回类型所设置的类型:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/149d94fa9b4cf768b6edcdd276e4cd36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/0*ndkqTey_XopJ3OxF.png"/></div></figure><p id="54e9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">所以不用像这样显式声明直接类型…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4dd7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">…您只能使用它来处理字符串:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/fad9b974370640d04209edd94d42c249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jsXi8P8iYIoZ4C9c.png"/></div></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="b13c" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">重用函数，同时让TypeScript控制您</h1><p id="6f90" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">更通用的方法在重用函数方面更好，因为您可以捕获传递给它的类型，并让TypeScript在以后使用它们时始终保持检查状态<em class="lw">，</em>这取决于您赋予函数的工作内容。</p><p id="02fc" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这就是泛型真正变得更加有用的地方。你可能听过人们谈论TypeScript，以及它如何帮助你“在错误发生之前避免制造错误”这是真的，使用泛型是很好地证明这一点的方法之一:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="c2ec" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设我们想使用这个函数。我们看到它声明了类型<code class="fe nb nc nd ne b">T</code>和类型<code class="fe nb nc nd ne b">K</code>，这是类型<em class="lw"> </em> <code class="fe nb nc nd ne b"><em class="lw">T</em></code>的一个键。我们将类型<code class="fe nb nc nd ne b">T</code>分配给<code class="fe nb nc nd ne b">arg1</code>，将类型<code class="fe nb nc nd ne b">K</code>分配给<code class="fe nb nc nd ne b">arg2</code>。</p><p id="0984" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们现在知道，当我们使用这个函数时，第一个参数很可能是某种类型，可以通过某种索引或属性来访问，而第二个参数可能是某种类型的字符串或数字。我们知道这一点是因为<code class="fe nb nc nd ne b">K extends keyof T</code>意味着<code class="fe nb nc nd ne b">K</code>是<code class="fe nb nc nd ne b">T</code>的属性/索引/键。</p><p id="4130" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以像这样使用这个函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="fb81" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">因为<code class="fe nb nc nd ne b">goodwill</code>是传递给第一个参数的对象的属性，所以它是完全有效的。我们给了它一个像<code class="fe nb nc nd ne b">{ goodwill: string }</code>这样的强类型对象。</p><p id="e67f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果我们试图错误地使用TypeScript，它可以让我们保持警惕:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/5375a27c4aae8042dd455f7ac46b61b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GPkO8bOgj9LdZ7lY.png"/></div></div></figure><p id="0817" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这是非常强大的，因为它在错误出现之前就阻止了它们。</p><p id="a84f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了证明我们可以在保持类型安全的同时以多种方式重用该函数，下面是更多的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="ce6f" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">带类的泛型</h1><p id="b25b" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">泛型类型可以应用于函数，但也可以用类来实现——这非常有用，尤其是对代码的消费者而言。</p><p id="4b13" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你可以声明类型，比如类型<code class="fe nb nc nd ne b">&lt;T&gt;</code>，就像我们声明函数一样。然而，由于语法不同，它看起来有点不同:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="a209" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当您在初始化实例后使用<code class="fe nb nc nd ne b">button</code>时，TypeScript将始终记住<code class="fe nb nc nd ne b">element</code>属性是一个<code class="fe nb nc nd ne b">button</code>元素，从而帮助您保持安全；因此，它应该只限于一个<code class="fe nb nc nd ne b">button</code>的属性、方法、特性等。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="b1ce" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">结论</h1><p id="37bb" class="pw-post-body-paragraph la lb it lc b ld mw ju lf lg mx jx li lj my ll lm ln mz lp lq lr na lt lu lv im bi translated">这篇文章到此结束！我希望你发现这是有价值的，并期待在未来更多。</p></div></div>    
</body>
</html>