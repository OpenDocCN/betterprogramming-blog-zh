<html>
<head>
<title>A Beginner’s Guide to Using CDNs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用cdn的初学者指南</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/a-beginner-s-guide-to-using-cdns-3193cb8bd12e?source=collection_archive---------3-----------------------#2019-05-15">https://betterprogramming.pub/a-beginner-s-guide-to-using-cdns-3193cb8bd12e?source=collection_archive---------3-----------------------#2019-05-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b8713a1c0ce3fd5b2bc4a4d681d9b3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wtmLbUow_4piutRlvrJVg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com/search/photos/speed?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jg" href="https://unsplash.com/@chuttersnap?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>拍摄</p></figure><div class=""/><div class=""><h2 id="68b0" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">用这个简单的工具提高你网站的速度</h2></div><p id="1258" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在过去的几年里，网站变得越来越大，越来越复杂，用户希望网站能够即时加载，即使是在移动设备上。最小的性能下降都会产生重大影响；页面加载时间仅仅减少<a class="ae jg" href="https://www.akamai.com/uk/en/about/news/press/2017-press/akamai-releases-spring-2017-state-of-online-retail-performance-report.jsp" rel="noopener ugc nofollow" target="_blank">100毫秒，转化率就会下降7% </a>。竞争对手只需点击一下鼠标，希望吸引和留住客户的组织需要将web性能放在首位。一种相对简单的方法是使用内容交付网络(cdn)。</p><p id="efc2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我们将解释cdn如何帮助<a class="ae jg" href="https://www.pingdom.com/solutions/web-performance-optimization-solution/" rel="noopener ugc nofollow" target="_blank">提高web性能</a>。我们将解释它们是什么，它们是如何工作的，以及如何在你的网站中实现它们。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="1deb" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">什么是CDN？</h1><p id="425b" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">CDN是一种分布式网络和存储服务，在全球不同的地理区域托管web内容。这些内容可以包括HTML页面、脚本、样式表、多媒体文件等等。这使您可以从CDN而不是自己的服务器提供内容，从而减少服务器处理的流量。</p><p id="8e08" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">cdn还可以充当您和您的用户之间的代理，提供负载平衡、防火墙、自动HTTPS等服务，甚至在您的源服务器离线时提供冗余(例如<a class="ae jg" href="https://www.cloudflare.com/always-online/" rel="noopener ugc nofollow" target="_blank"> Cloudflare Always Online </a>)。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="bd53" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">我为什么要使用CDN？</h1><p id="50ea" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">cdn从您的服务器卸载流量，降低您的总体负载。它们还针对速度进行了优化，在许多情况下提供更快的性能，这可以提高你的SEO排名。由于cdn在位于世界各地的中心托管数据，它们实际上将您的内容移动到离您的用户更近的地方。这可以大大减少一些用户的延迟，并避免因数据中心中断或路线中断而导致的<a class="ae jg" href="https://www.pingdom.com/topics/website-downtime-monitoring/" rel="noopener ugc nofollow" target="_blank">停机</a>。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="6dd5" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">cdn是如何工作的？</h1><p id="9e02" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">CDN由遍布全球的多个数据中心组成，称为存在点(pop)。每个PoP都能够为用户托管和提供内容。cdn根据许多因素将用户路由到特定的PoP，这些因素包括距离、PoP可用性和连接速度。</p><p id="c448" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">PoP充当用户和原始服务器之间的代理。当用户从您的网站请求资源(如图像或脚本)时，他们会被定向到PoP。如果PoP缓存了资源，那么它将把资源交付给用户。</p><p id="8dfd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，如何将内容发送到您的PoP呢？使用两种方法中的一种:推或拉。推送需要你事先把你的内容发送到CDN。这让你可以更好地控制CDN提供的内容，但如果用户请求你尚未推送的内容，他们可能会遇到错误。</p><p id="a99d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">拉取是一种自动化程度更高的方法，CDN会自动检索尚未缓存的内容。当用户请求尚未缓存的内容时，CDN会从您的原始服务器获取最新版本的内容。一段时间后，缓存的内容过期，CDN会在下次请求时从原始位置刷新它。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="f0fa" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">我如何选择一个CDN？</h1><p id="d7d0" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">虽然cdn的工作方式基本相同，但它们在许多因素上有所不同，包括:</p><h2 id="b29f" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">价格</h2><p id="118c" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">大多数cdn根据使用的带宽量收费。有些还可能根据缓存命中(缓存提供的文件)、缓存未命中(从原点检索)和刷新的次数来收费。其他公司收取固定费用，并在一段时间内允许一定量的带宽。在比较cdn时，您应该估计您的带宽需求和预期增长，以找到最佳交易。</p><h2 id="8903" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">可用性和可靠性</h2><p id="ca6d" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">cdn努力实现100%的正常运行时间，但完美的正常运行时间是无法保证的。考虑您的可用性需求以及每个CDN如何支持这些需求。此外，根据其PoP正常运行时间而非总体正常运行时间来比较cdn，尤其是在您希望服务的地区。如果可能的话，验证你的CDN是否提供了回退选项，比如绕过关闭的pop。</p><h2 id="147d" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">PoP位置(服务区域)</h2><p id="cda1" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">根据您的用户所在的位置，某些pop可以更有效地为您的用户服务。选择一个管理用户附近的pop的CDN，否则你将错过CDN提供的许多性能优势。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="50cb" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">如何将CDN添加到我的网站？</h1><p id="b647" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">向您的网站添加CDN的过程取决于您的网站托管的位置和方式。我们将在下面介绍一些更常见的方法。</p><h2 id="e390" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">虚拟主机提供商</h2><p id="010a" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">如果您的网站由inMotion Hosting、HostGator或1&amp;1等提供商托管，您的提供商可能会提供CDN作为内置或额外的服务。例如，<a class="ae jg" href="https://my.bluehost.com/hosting/help/cloudflare" rel="noopener ugc nofollow" target="_blank"> Bluehost </a>免费提供Cloudflare，并默认为所有计划启用。如果您的主机不明确支持CDN，您仍然可以使用它，但它可能属于以下过程之一。</p><h2 id="24f1" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">内容管理系统</h2><p id="70a7" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">像WordPress和Squarespace这样的内容管理系统(CMS)通常通过使用插件来支持cdn。对于WordPress，<a class="ae jg" href="https://jetpack.com/" rel="noopener ugc nofollow" target="_blank"> Jetpack </a>自动提供对自己CDN的支持。其他如<a class="ae jg" href="https://blog.cloudflare.com/w3-total-cache-w3tc-total-cloudflare-integrat/" rel="noopener ugc nofollow" target="_blank"> W3TC </a>、<a class="ae jg" href="https://wordpress.org/plugins/wp-super-cache/" rel="noopener ugc nofollow" target="_blank"> WP超级缓存</a>、<a class="ae jg" href="https://wordpress.org/plugins/wp-fastest-cache/" rel="noopener ugc nofollow" target="_blank"> WP最快缓存</a>让你选择将用户定向到哪个CDN。</p><h2 id="5288" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">自托管</h2><p id="fb70" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">你自己托管的网站在选择CDN方面提供了最大的灵活性。然而，它们也需要更多的设置。举个例子，让我们为一个托管在谷歌云平台(GCP)上的网站启用谷歌云CDN。</p><p id="5f43" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此示例假设您拥有一个GCP帐户、一个在注册服务商处注册的域名，以及一个托管在Compute Engine、App Engine或其他GCP服务中的网站。如果你还没有GCP账户，<a class="ae jg" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">创建一个</a>并登录<a class="ae jg" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>。</p><p id="09cd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">步骤1:配置您的DNS记录</p><p id="159d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">传统上，将用户路由到CDN的方法是将网站中的资源URL更改为指向CDN提供的URL。大多数现代cdn通过管理你的DNs记录来避免这种情况，让你重定向用户而不需要改变你的网站。</p><p id="eb62" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要配置云DNS，请查看<a class="ae jg" href="https://cloud.google.com/dns/docs/quickstart" rel="noopener ugc nofollow" target="_blank">云DNS快速入门文档</a>，并按照<a class="ae jg" href="https://cloud.google.com/dns/docs/quickstart#create_a_managed_public_zone" rel="noopener ugc nofollow" target="_blank">创建托管公共区域</a>的说明进行操作。还不要创建新记录或CNAME记录，因为我们还没有DNS记录指向的IP地址。在下面的截图中，我们为域<em class="nk">subdomain.mydomain.com</em>创建了一个名为<em class="nk"> mydomain的新区域，例如</em>。</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/1332130965a319656e0f0eec2b2fb391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*rM-sQlp97_EgCcIZWOUUdQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><em class="nq">在云DNS中创建DNS区域。2019谷歌有限责任公司。保留所有权利。</em></p></figure><p id="ad04" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建区域后，更新您的注册商的域设置以指向云DNS名称服务器。这将让您通过云DNS管理您的域名记录，而不是通过您的注册商。有关更多信息，请访问<a class="ae jg" href="https://cloud.google.com/dns/docs/update-name-servers" rel="noopener ugc nofollow" target="_blank">上的云DNS文档页面更新您的域名服务器</a>或参考您的注册服务商的文档。</p><p id="81ed" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二步:启用云CDN</p><p id="8d08" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">配置好DNS后，我们现在需要启用CDN本身。对于云CDN，必须选择一个负载均衡器作为源。如果你还没有负载均衡器，你可以按照这些<a class="ae jg" href="https://cloud.google.com/load-balancing/docs/how-to" rel="noopener ugc nofollow" target="_blank">指南</a>来创建一个。对于标准的HTTP/S网站，<a class="ae jg" href="https://cloud.google.com/load-balancing/docs/https/setting-up-https" rel="noopener ugc nofollow" target="_blank">请遵循本指南</a>获取具体说明。</p><p id="54d0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建好负载平衡器后，按照这些说明<a class="ae jg" href="https://cloud.google.com/cdn/docs/using-cdn#enable_existing" rel="noopener ugc nofollow" target="_blank">为现有后端服务启用云CDN。创建新原点后，从原点列表中选择它。您将需要显示在<strong class="la jk">前端</strong>表中的IP地址来配置云DNS，因此请确保您复制它或保持此窗口打开。下面的屏幕截图显示了一个示例云CDN源:</a></p><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/9d77be15eb69336920ac79a22e31c823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*mLYfHj4gbk5z0jfJS5bEpg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><em class="nq">查看云CDN中的原点详情。2019谷歌有限责任公司。保留所有权利。</em></p></figure><p id="0431" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">检索您的前端IP地址后，返回到云DNS并选择您的区域。创建一个新的A记录，将域指向您的原始IP地址。您可以在云DNS快速入门文档页面上的<a class="ae jg" href="https://cloud.google.com/dns/docs/quickstart#create_a_new_record" rel="noopener ugc nofollow" target="_blank">创建新记录</a>下找到说明。这在下面的截图中显示。或者，您还可以创建一个CNAME记录来重定向来自子域的用户，例如<a class="ae jg" href="http://www.yourdomain.com." rel="noopener ugc nofollow" target="_blank"><em class="nk">www.yourdomain.com</em>。</a></p><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/9ae784ccb064ac669190aab4e5a7ddd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*L8mplPCAz1L4vp-McE32DA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><em class="nq">在云DNS中创建新的DNS记录集。2019谷歌有限责任公司。保留所有权利。</em></p></figure><p id="16bf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">步骤3:配置您的web服务器</p><p id="54fa" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了确保您的内容被正确缓存，请确保您的web服务器使用正确的HTTP头来响应请求。云CDN只缓存<a class="ae jg" href="https://cloud.google.com/cdn/docs/caching" rel="noopener ugc nofollow" target="_blank">满足某些需求</a>的响应，其中一些是云CDN特有的。您将需要查看您的web服务器的文档，以了解如何设置这些头。<a class="ae jg" href="https://cloud.google.com/cdn/docs/caching" rel="noopener ugc nofollow" target="_blank"> Apache </a>和<a class="ae jg" href="https://www.nginx.com/blog/nginx-caching-guide/https:/www.nginx.com/blog/nginx-caching-guide/" rel="noopener ugc nofollow" target="_blank"> Nginx </a>提供了配置缓存的最佳实践指南。</p><p id="52a2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">步骤4:将内容上传到CDN</p><p id="39bd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于大多数网站运营商来说，你不需要做任何事情来上传内容。这是因为当人们访问你的网站时，CDN会自动从你的服务器缓存资源。这也被称为“拉动方法”或者，谷歌确实允许你通过手动上传来推送你想要托管的特定内容。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9f09" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">CDN如何影响性能？</h1><p id="590e" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">为了展示CDNs的性能优势，我们在Google云平台上的一个网站上运行了一个性能测试。该网站是一个静态的单页网站，由<a class="ae jg" href="https://startbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> Bootstrap </a>和<a class="ae jg" href="https://startbootstrap.com/template-overviews/full-width-pics/" rel="noopener ugc nofollow" target="_blank">全幅图片</a>模板创建，由<a class="ae jg" href="https://www.jpl.nasa.gov/spaceimages/" rel="noopener ugc nofollow" target="_blank"> NASA/JPL加州理工</a>提供的七幅高分辨率图片组成。服务器是一个Google计算引擎实例，位于us-east1-b地区，运行Nginx 1.10.3。</p><p id="e4b2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将实例配置为允许直接传入HTTP流量。我们还为该实例设置了Google Cloud CDN。您可以使用瀑布图在下面看到该网站的网页和联网时间的截图。</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/80a4066836c6c02d1096b968cc142d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nc3OOBSvut4QUALlkzymqg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><em class="nq">使用Chrome DevTools的测试站点的瀑布图。2019谷歌有限责任公司。保留所有权利。</em></p></figure><p id="f03b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们使用网络安全管理软件产品Pingdom运行了一个性能测试。Pingdom提供了一个<a class="ae jg" href="https://www.pingdom.com/product/page-speed/" rel="noopener ugc nofollow" target="_blank">页面速度测试</a>,用于测量获取和呈现web页面的每个元素所需的时间。我们创建了两个独立的检查来分别测试原始服务器和CDN，然后比较结果，看哪种方法更快。为了最大化延迟，我们从Pingdom Eastern Asia位置运行了这两个检查。</p><h2 id="ac46" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">原始结果</h2><p id="6cd7" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在原始服务器上运行速度测试的结果是页面加载时间为3.68秒。从服务器下载第一个字节的时间(显示为蓝线)是318毫秒，这意味着用户在他们的设备开始接收内容之前必须等待三分之一秒。渲染页面(用橙色线表示)需要额外的679毫秒，这意味着用户必须等待几乎整整一秒才能看到屏幕上的任何内容。当页面完成呈现(绿线)时，用户已经等待了超过3.5秒。</p><p id="7726" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种延迟主要是由于下载高分辨率图像，但是连接到服务器并等待内容开始传输花费了大量时间。</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/bf1dc6801fc60c3b9feb6b4ae6b96358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wp9QghfjolIDebXYWWyJ5A.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">连接到我们的测试源服务器时的页面加载时间线。</p></figure><h2 id="9858" class="my mc jj bd md mz na dn mh nb nc dp ml lh nd ne mn ll nf ng mp lp nh ni mr nj bi translated">CDN结果</h2><p id="36a6" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">有了CDN，我们立即看到了加载时间的显著改善。整个页面的加载只需1.04秒，比原始服务器快了两秒多。最显著的变化是第一个字节(蓝线)的时间，它下降到只有7毫秒。这意味着我们的用户在连接到CDN后几乎立即开始接收内容。</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/bac18eeb20a894503cd0895e4696a61d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UM53ZeBQYhe-OLmic13NQQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><em class="nq">连接谷歌云CDN时页面加载时间线。</em></p></figure><p id="baca" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然DOM内容加载时间(橙色线)没有显著改善，但是连接和等待时间显著下降。我们还看到，在页面加载0.5秒后，内容就开始出现在页面上。我们可以通过查看电影片段来确认这一点，电影片段显示了页面在加载过程中各个点的截图。相比之下，源服务器开始呈现内容需要1.5秒。</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/9cf1c57f0295c107e7be78ba54495c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YV71RzKW1DSNU8K5NfmvUw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><em class="nq">比较有CDN(下图)和没有CDN(下图)的页面渲染时间。</em></p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="40c8" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">结论</h1><p id="3fef" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">cdn提供了显著的性能提升，而无需组织付出太多努力。最大的挑战是找到选择哪家CDN提供商。如果你不确定哪家提供商对你最有利，<a class="ae jg" href="https://royal.pingdom.com/benchmarking-cdns-cloudfront-cloudflare-fastly-and-google-cloud/" rel="noopener ugc nofollow" target="_blank">我们对四家最受欢迎的提供商进行了基准测试</a> (Cloudflare、Fastly、AWS CloudFront和Google CDN)。虽然性能在每个提供商的生存能力中起着重要作用，但我们也鼓励您考虑CDN提供的额外功能、安全性和集成。</p><p id="cd03" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">设置好CDN后，您可以使用网络安全管理软件产品Pingdom检查性能差异。除了运行一次性测试，您还可以使用Pingdom安排定期检查，以确保您的网站始终以最佳状态运行。此外，您可以使用Pingdom持续监控网站的可用性和易用性。</p></div></div>    
</body>
</html>