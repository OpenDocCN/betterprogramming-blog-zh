<html>
<head>
<title>How to Use Custom Fonts With Dynamic Type in iOS apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在iOS应用程序中使用动态字体的自定义字体</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-custom-font-with-dynamic-type-in-ios-apps-aeda0b314b12?source=collection_archive---------7-----------------------#2020-10-12">https://betterprogramming.pub/use-custom-font-with-dynamic-type-in-ios-apps-aeda0b314b12?source=collection_archive---------7-----------------------#2020-10-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2b3e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">立即为您的iOS应用添加新字体</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7ecbc2e7fd2d5d4b875eb344822b362b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CAf-Csma4R1Rzsua"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="6015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不久前，我们用系统字体研究了动态类型。这一次，我们将了解如何在我们的iOS应用程序中使用动态字体和自定义字体。苹果提供了很棒的API来使我们的应用程序易于访问——即使我们使用自定义字体。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="63cf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">向应用程序添加自定义字体</h1><p id="5deb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要将自定义字体添加到项目中。这涉及到几个步骤，所以让我们复习一下。</p><p id="6005" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要向Xcode应用程序项目添加一个字体文件。目前，True Type字体(。ttf)和开放式字体(。otf)文件。只需在XCode项目中拖放文件。请小心选择要在其中使用该字体的目标:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/6a6bf6561f60a418a305048c31f11f0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*93M1v-1WOL8rUN5L.gif"/></div></div></figure><p id="1c91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您忘记将字体添加到Xcode项目中的特定目标成员中，则在找不到字体文件时会遇到问题:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/2eaefbc6e7ce19493ba6f940fd155b94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QWxNyyInRzREPK1U.png"/></div></div></figure><p id="ea06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要解决这个问题，只需选中复选框并将其添加到您的指定目标:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/5538c1a387049cd714393a6beb3cf1df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3AAy00wsS6lg2gbk.png"/></div></div></figure><p id="cbc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成之后，转到<code class="fe nc nd ne nf b">Info.plist</code>文件，用键<code class="fe nc nd ne nf b">Fonts provided by application</code>添加一个新条目。在那里，我们需要提供一个数组，其中包含我们添加到项目中的所有字体文件。</p><p id="b73d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查字体文件是否已经添加，我们是否可以使用这段代码来打印所有可用的字体系列和名称:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="ba72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要将这段代码粘贴到你的<code class="fe nc nd ne nf b">AppDelegate</code> <code class="fe nc nd ne nf b">didFinishLaunchingWithOptions</code>中，当你运行app时，它就会在控制台中打印字体家族和名称。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b2c1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">对动态类型使用自定义字体</h1><p id="e3d6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要使用自定义字体的动态类型，我们需要使用<code class="fe nc nd ne nf b">UIFontMetrics</code>。它是一个实用程序对象，有助于获得根据文本大小和辅助功能设置进行缩放的自定义字体。换句话说，这个类帮助我们显示考虑了用户字体和可访问性设置的自定义字体。</p><p id="6f85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们需要用具体的大小初始化一个自定义字体的实例。为了确定具体的大小，我们可以使用苹果文档中的动态类型大小<a class="ae ky" href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/typography/" rel="noopener ugc nofollow" target="_blank">表。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/61343c1d2c9fbeaff7c20608aa539118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WvKbSMZyXeSgIkeT.png"/></div></div></figure><p id="1cc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们添加了一个具有大标题行为的标签。这意味着我们需要使用34号字体。然后我们使用<code class="fe nc nd ne nf b">UIFontMetrics</code>并为特定的文本样式初始化一个实例。最后，我们使用<code class="fe nc nd ne nf b">scaledFont</code>函数设置标签的字体，并提供我们的自定义字体:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c7d9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">文本大小改变时更新</h1><p id="725e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了测试一切是如何工作的，我们可以在Xcode的环境覆盖中启用文本大小:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/ee075c11d34c8aaeb1bfa3be91c8bf7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TAhGz0Q0rozuuhsx.png"/></div></div></figure><p id="e882" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你改变它，你可以注意到我们的应用程序没有任何变化。要启用自动变更，我们需要设置<code class="fe nc nd ne nf b">adjustsFontForContentSizeCategory</code>。它表示当设备类别改变时，对象应该自动更新其字体。</p><pre class="kj kk kl km gt nk nf nl nm aw nn bi"><span id="490b" class="no md it nf b gy np nq l nr ns">label.adjustsFontForContentSizeCategory = true</span></pre><p id="dbdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以进行全面测试，应该会看到我们的标签字体根据文本大小和可访问性设置进行了调整。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="04f1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="11ab" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用自定义字体支持动态类型听起来可能是一项棘手的任务，但事实并非如此。通过使用<code class="fe nc nd ne nf b">UIFontMetrics</code>实用程序对象，我们可以根据用户在文本大小或可访问性设置中指定的内容来缩放我们的自定义字体。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="09d1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">资源</h1><ul class=""><li id="3fda" class="nt nu it lb b lc mu lf mv li nv lm nw lq nx lu ny nz oa ob bi translated"><a class="ae ky" href="https://github.com/fassko/custom-font-dynamic-type" rel="noopener ugc nofollow" target="_blank">示例app </a></li><li id="ccb6" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://developer.apple.com/videos/play/wwdc2017/245/" rel="noopener ugc nofollow" target="_blank">用动态类型构建应用</a></li><li id="e5b1" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://www.hackingwithswift.com/example-code/uikit/how-to-resize-a-custom-font-using-uifontmetrics" rel="noopener ugc nofollow" target="_blank">如何使用UIFontMetrics调整自定义字体的大小</a></li><li id="d124" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://useyourloaf.com/blog/using-a-custom-font-with-dynamic-type/" rel="noopener ugc nofollow" target="_blank">使用动态类型的自定义字体</a></li><li id="b3e3" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://learnui.design/blog/ios-font-size-guidelines.html" rel="noopener ugc nofollow" target="_blank">iOS字体大小指南</a></li><li id="4dce" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://developer.apple.com/documentation/uikit/text_display_and_fonts/adding_a_custom_font_to_your_app" rel="noopener ugc nofollow" target="_blank">向您的应用添加自定义字体</a></li><li id="181d" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/typography/" rel="noopener ugc nofollow" target="_blank">排版——人机界面指南</a></li></ul></div></div>    
</body>
</html>