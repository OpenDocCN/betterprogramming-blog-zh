<html>
<head>
<title>Let’s Build a Tic-Tac-Toe Game Using React With TypeScript and Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用React和TypeScript和钩子来构建一个井字游戏</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-build-a-tic-tac-toe-game-using-react-with-typescript-and-hooks-321f78d8d1e0?source=collection_archive---------1-----------------------#2021-05-05">https://betterprogramming.pub/lets-build-a-tic-tac-toe-game-using-react-with-typescript-and-hooks-321f78d8d1e0?source=collection_archive---------1-----------------------#2021-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a07e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在不到10分钟的时间内创建一个小游戏</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/625821e0d53e63c0e34f937b9ec1a1f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vzTejX_WfEMH9ZOe"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">米歇尔·亨德森在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="a185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我一直认为，学习一件事情的最好方法是通过建立一个项目来付诸实践。虽然我已经熟悉了React和2019年推出的钩子的辉煌概念，但自2018年以来，我大部分时间都在与Vue合作。我已经有一段时间没用React和Hooks做过什么了。</p><p id="2c3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了检查我是否还能使用React构建一些东西，我决定尝试构建一个井字游戏。虽然这看起来像是一个非常基础的项目，但是这是一个练习React和钩子概念的绝佳机会。</p><p id="c17a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对React、Hooks和TypeScript一无所知，阅读下面的两篇文章会是一个好主意:</p><ul class=""><li id="517a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/javascript-scene/the-missing-introduction-to-react-62837cb2fd76" rel="noopener">反应过来的失踪介绍</a></li><li id="195d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/free-code-camp/learn-typescript-in-5-minutes-13eda868daeb" rel="noopener">5分钟学会打字稿</a></li></ul><p id="4dfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说了这么多，让我们动手开始构建我们的应用程序吧。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9025" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">基本布局</h1><p id="4bc8" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们将首先使用create-react-app或<a class="ae ky" href="https://vitejs.dev/" rel="noopener ugc nofollow" target="_blank"> Vite </a>搭建一个新的React应用。</p><p id="23fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你还不知道Vite，它是由<a class="nn no ep" href="https://medium.com/u/4f198f5f1f12?source=post_page-----321f78d8d1e0--------------------------------" rel="noopener" target="_blank">尤雨溪</a> (Vue的创建者)创建的一个很棒的工具，它有一个比create-react-app快得多的开发服务器。</p><p id="af43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保您安装了Node(如果没有，下载并安装最新版本的<a class="ae ky" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"/>)并使用您的终端:</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="cc6d" class="nu mr it nq b gy nv nw l nx ny"># if you prefer to use create-react-app<br/>npx create-react-app tic-tac-toe <!-- -->--template typescript<br/># if you prefer vite<br/>npx init @vitejs/app tic-tac-toe --template react-ts<!-- --> </span></pre><p id="966e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你不想使用任何本地资源，一个好主意是使用<a class="ae ky" href="https://codesandbox.io/" rel="noopener ugc nofollow" target="_blank"> CodeSandbox </a>。他们有一个非常好的类似VS代码的在线编辑器和一个带热重载的开发服务器。</p><p id="549d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你选择了方法并且它完成了依赖项的安装之后(在create-react-app和Vite的情况下)，在你最喜欢的编辑器中打开井字游戏(我建议VS代码)。</p><p id="1da0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先创建一个包含三个文件的<code class="fe nz oa ob nq b">pages</code>文件夹:<code class="fe nz oa ob nq b">Start.tsx</code>、<code class="fe nz oa ob nq b">Game.tsx</code>和<code class="fe nz oa ob nq b">Finished.tsx</code>。我将使用这些名称，因为它们对我有意义，但是您可以选择任何您想要的名称。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="a5ef" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">起始页</h1><p id="287a" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">让我们从创建起始页开始。我们将有一个标题，一个允许用户输入两个玩家名字的表单，以及一个只有在两个输入都被填充时才会被激活的开始按钮。</p><p id="1714" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我前面说过的，我们将在这个项目中使用TypeScript，所以为了从父组件接收道具，我们需要声明我们的接口。TypeScript接口是组件和父组件之间的基本契约，它描述了哪些属性可用以及每个属性的类型。在我们的例子中，我们将得到的唯一道具是<code class="fe nz oa ob nq b">handleStart</code>方法。</p><p id="b4ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我将把需要的接口放在同一个组件文件中，但是在更大的项目中，一个更好的想法是将每个接口放在一个<code class="fe nz oa ob nq b">src/types</code>文件夹中的单独文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="034c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你知道React是如何工作的，这是非常标准的。我们有一个带有两个输入的表单:<code class="fe nz oa ob nq b">useState</code>用于控制它们的值(通过在每个输入上使用value和<code class="fe nz oa ob nq b">onInput</code>属性)和一个开始按钮。只有当两个输入都被填充时，按钮才被激活，当它满足这个条件时，props接收的一个名为<code class="fe nz oa ob nq b">handleStart</code>的方法被调用，传递一个带有两个输入值的数组。我们将在后面的<code class="fe nz oa ob nq b">App</code>组件中负责构造这个函数。</p><p id="d677" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在启用/禁用按钮的函数中使用了<code class="fe nz oa ob nq b">useMemo</code>，以避免在<code class="fe nz oa ob nq b">users</code>数组不变的情况下重新创建按钮。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="1029" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">完成的一页</h1><p id="fbd5" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这个页面会非常简单。它只会显示获胜玩家的名字或平局信息(以防没有方块和没有人获胜)以及重新开始游戏的按钮。</p><p id="3dd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须定义负责告诉父母道具可用的接口。在这种情况下，我们将接收获胜者的名字(如果还没有人获胜，可以是字符串或<code class="fe nz oa ob nq b">null</code>)和重启方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3e5e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">游戏页面</h1><p id="dd10" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">这将是主页面，将提出董事会，并让玩家点击标记X或o的方块。</p><p id="3e7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经猜到，这个页面将负责绘制组成它的九个<code class="fe nz oa ob nq b">Square</code>组件。每个<code class="fe nz oa ob nq b">Square</code>组件将负责在板上画出相应的位置并监听点击事件。</p><p id="a004" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们构建我们的<code class="fe nz oa ob nq b">Square</code>组件。创建一个包含<code class="fe nz oa ob nq b">Square.tsx</code>文件的<code class="fe nz oa ob nq b">src/components</code>文件夹。</p><p id="4e1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该组件将有三个在接口中定义的属性:定义棋盘上位置的数字(索引)、值(X或O)和click事件处理程序。click事件将接收方块索引，以便控制棋盘的函数知道哪个棋子被点击了。我们将使用一些样式，使按钮的宽度和高度为100像素，字体大小为46像素。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="5d91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一个是<code class="fe nz oa ob nq b">Square</code>家长，游戏页面。该页面将从父页面接收具有九个字符串位置(空、X或O)的棋盘数组和<code class="fe nz oa ob nq b">clickHandler</code>(将传递给九个方格中的每一个)。然后它将使用<code class="fe nz oa ob nq b">map</code>为每个棋盘元素渲染一个正方形。</p><p id="7035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使它看起来像一个井字游戏棋盘，我们将使用CSS Grid自动使布局为三列x三行。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="7699" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">应用程序组件</h1><p id="d752" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在<code class="fe nz oa ob nq b">App</code>组件中，我们必须有某种逻辑来知道游戏的确切位置(开始、游戏或获胜页面)以及游戏的业务逻辑。</p><p id="dd0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们有钩子，我们可以将游戏的业务逻辑委托给一个钩子(<code class="fe nz oa ob nq b">useTicTacToe</code>是一个好名字)，让组件只负责绘制所需页面的逻辑。</p><p id="4215" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们尚未创建的<code class="fe nz oa ob nq b">useTicTacToe</code>钩子必须返回一些信息:</p><ul class=""><li id="11d0" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">游戏的状态(例如，创建、开始和结束)</li><li id="4f51" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">棋盘本身，这样它就可以呈现在屏幕上</li><li id="068f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">获胜玩家的名字</li><li id="0a27" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">重启功能(清空棋盘、玩家和赢家)</li><li id="737e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">开始功能(将设置玩家的名字)</li><li id="6f5c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">click事件处理函数</li></ul><p id="6119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，它需要有一个状态来告诉玩家是否已经开始游戏。通过“开始”游戏，我的意思是他们已经填写了他们的名字并点击了开始。</p><p id="d871" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经得到了我们需要的一切，让我们开始编码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="a684" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，这相当简单，因为我们将所有的业务逻辑委托给我们接下来要构建的<code class="fe nz oa ob nq b">useTicTacToe</code>钩子。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="229e" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">钩子</h1><p id="bdad" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我决定使用一个钩子来收集使游戏正常运行所涉及的所有业务逻辑，这是保持关注点分离的好方法。作为一个额外的奖励，它可以用在其他项目中，这些项目选择用一种不同的(也更漂亮的)方式来渲染游戏。</p><p id="6221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们前面所说的，这个钩子必须返回关于游戏状态、棋盘、赢家(如果游戏有)的信息，以及重启、启动(注册玩家)和处理点击事件的方法。</p><p id="2078" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我认为如果我们有三个状态(棋盘、赢家和状态)，我们前面提到的三个函数，以及一个<code class="fe nz oa ob nq b">useEffect</code>钩子来检查当棋盘改变时某人是否已经赢了，那就很好了。为了使获胜检查简单，我们将有一个获胜位置的数组，然后该函数将检查这些位置中是否有任何位置填充了相同的值。最后，如果棋盘改变了，没有人赢，所有的位置都有人了，我们就平手了(状态改变为完成，但赢家仍然是<code class="fe nz oa ob nq b">null</code>)。当你看到代码时，你会更好地理解它。</p><p id="b4db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至于组件，我们必须定义一个接口来告诉任何使用钩子的组件它们需要什么样的属性来与钩子交互。在我们的例子中，我们的接口将有棋盘(字符串数组)、状态(字符串)、获胜者的名字(字符串或<code class="fe nz oa ob nq b">null</code>，如果还没有人获胜)，以及三个方法(<code class="fe nz oa ob nq b">handleClick</code>、<code class="fe nz oa ob nq b">handleRestart</code>和<code class="fe nz oa ob nq b">handleStart</code>)。</p><p id="477e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此创建一个<code class="fe nz oa ob nq b">src/hooks</code>文件夹，并在其中创建一个<code class="fe nz oa ob nq b">useTicTacToe.ts</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="f87c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单，对吧？只需一些基本的JavaScript，我们就可以将井字游戏业务逻辑封装在一个小的可重用钩子中。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="7cf8" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="315a" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">原来如此。我们用React、TypeScript和Hooks构建了这个小小的井字游戏。</p><p id="2245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想玩已经构建好的应用程序(也许通过添加一些CSS让它不那么难看)，我在CodeSandbox上留下了一个工作应用程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe od l"/></div></figure><p id="b439" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的<a class="ae ky" href="https://github.com/n0n3br/react-tic-tac-toe" rel="noopener ugc nofollow" target="_blank"> GitHub </a>账户上也有结果代码。</p><p id="8b58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你坚持到了最后，我希望你学到了有用的东西。下一篇文章再见。</p></div></div>    
</body>
</html>