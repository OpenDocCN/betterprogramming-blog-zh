<html>
<head>
<title>Your Web Application May Have Bugs Due to Race Conditions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">由于竞争条件，您的Web应用程序可能会有错误</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/fix-race-conditions-in-react-187afc87d9e?source=collection_archive---------6-----------------------#2022-05-25">https://betterprogramming.pub/fix-race-conditions-in-react-187afc87d9e?source=collection_archive---------6-----------------------#2022-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="09c8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这六个序列图可以帮助你找出原因</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d18aea43db0f63288e313a0e6bc5f56a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SyfYzoFIn-rMdCY3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">迪伦·亨特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="8abe" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">普通的Web应用程序</h1><p id="9f38" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们知道一个普通的web服务模型是这样的:</p><ol class=""><li id="bb25" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated">用户在客户端执行操作并发送HTTP请求。</li><li id="ef63" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">服务器返回一个HTTP响应。</li><li id="324f" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">客户端基于该数据呈现网页。</li><li id="772f" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">重复这些过程。</li></ol><p id="3ff5" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">如果用序列图来表示，它看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/bdb6d28af58d4bf70c441a136ac9e390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eynu32Lvp7BqqOV-obzXxQ.png"/></div></div></figure><p id="c8fb" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">一切正常。</p><h1 id="652e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">竞赛条件</h1><p id="9927" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">但是，总有一个“但是”</p><p id="6abb" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在上面的模型中，我们假设<code class="fe nh ni nj nk b">ResponseA</code>总是在<code class="fe nh ni nj nk b">ResponseB</code>之前返回给客户端。但是真实的场景是复杂的，总会出现各种各样的问题。可能是由于用户网络波动或服务器堵塞，<code class="fe nh ni nj nk b">ResponseA</code>可能会比<code class="fe nh ni nj nk b">ResponseB</code>晚返回给客户端。</p><p id="9d8f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这可能会导致以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/aa5feef4942972beb14fd712ab56b415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oTOIIk22d_053dIhZTHkBw.png"/></div></div></figure><p id="df8c" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这个结果有什么问题？对于用户来说，他们点击的最后一个按钮是<code class="fe nh ni nj nk b">B</code>，但是页面最终呈现的是与按钮<code class="fe nh ni nj nk b">A</code>相关的数据。也就是说页面显示的信息与用户的行为不一致！</p><p id="99b7" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这是一个bug。</p><p id="64ed" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">如果对数据的请求略有不同，应用程序会根据哪个请求先完成而显示不同的结果，那么这就是竞争条件。</p><h1 id="4105" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">真实的案例</h1><p id="9095" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">前面的内容是理论分析。现在，我们来看一个实际案例。</p><p id="d00b" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们正在使用React编写一个显示文章数据的简单项目。</p><ul class=""><li id="12b6" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm nm mv mw mx bi translated">当我们单击按钮1时，项目将请求并显示与帖子1相关的信息。</li><li id="bc8c" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm nm mv mw mx bi translated">当我们单击按钮2时，它将请求并显示与帖子2相关的信息。</li></ul><p id="66a3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">并且我使用<code class="fe nh ni nj nk b">jsonplaceholder</code>作为伪API服务器。如果您感兴趣，这里有更多关于JSONPlaceholder的信息:</p><div class="nn no gp gr np nq"><a href="https://jsonplaceholder.typicode.com" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">JSONPlaceholder</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">JSON}占位符由JSON Server + LowDB提供支持。用XV测试。截至2021年10月，每个服务约17亿个请求…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">jsonplaceholder.typicode.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe ks nq"/></div></div></a></div><h2 id="16f9" class="of la it bd lb og oh dn lf oi oj dp lj ma ok ol ll me om on ln mi oo op lp oq bi translated">示例应用程序</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="4e15" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这是一个非常普通的React应用程序。我们可以通过页面上的两个按钮控制<code class="fe nh ni nj nk b">postID</code>的值，<code class="fe nh ni nj nk b">Post</code>组件会根据<code class="fe nh ni nj nk b">postID</code>请求并渲染相应的帖子。</p><p id="3eec" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在<code class="fe nh ni nj nk b">Post</code>组件中，我们使用<code class="fe nh ni nj nk b">useEffect</code>来监控<code class="fe nh ni nj nk b">postID</code>的变化，并通过获取API请求数据。</p><p id="7752" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">如果您不熟悉这些基础知识，可以查看与React相关的教程。</p><p id="df84" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">当我们点击按钮<code class="fe nh ni nj nk b">post 1</code>时，它会渲染post 1。当我们点击<code class="fe nh ni nj nk b">post 2</code>按钮时，它将呈现帖子2。挺好的。</p><p id="65a1" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">接下来，我们稍微修改一下这段代码来模拟真实的场景。</p><p id="779e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们将这段代码添加到<code class="fe nh ni nj nk b">Post</code>组件的<code class="fe nh ni nj nk b">useEffect</code>中，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/4ea4909badea463e5ef73055c8d2283b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33PQyRPh3InvhUq6cGsczQ.png"/></div></div></figure><p id="25e9" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这个代码模拟网络波动。当用户请求post 1的数据时，响应会比正常情况慢两秒。</p><p id="31ad" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这是一个嵌入式演示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="4fe8" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">现在，让我们模拟一下用户做了什么。</p><p id="563e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">首先，我们点击<code class="fe nh ni nj nk b">post1</code>按钮。很快我们发现页面不返回与post1相关的数据。这时，我们变得焦虑，继续点击<code class="fe nh ni nj nk b">post2</code>按钮，希望页面显示post2相关数据。然后会发生以下情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/2c0c39a39a3ad9ae4c8241ef732b48bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*w9yWphRNsGZ1eSBh7q9G0w.gif"/></div></div></figure><p id="9ca3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们最后点击的按钮是<code class="fe nh ni nj nk b">post2</code>，但是页面最后显示的是<code class="fe nh ni nj nk b">post1</code>。用户的行为与页面的内容不一致，这是一个bug。</p><p id="e9d8" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">出现这种现象是因为当我们第一次将<code class="fe nh ni nj nk b">postID</code>设置为1时，一个<code class="fe nh ni nj nk b">useEffect</code>被触发，当我们再次点击按钮将<code class="fe nh ni nj nk b">postID</code>设置为2时，另一个<code class="fe nh ni nj nk b">useEffect</code>被触发。两个<code class="fe nh ni nj nk b">useEffects</code>都会修改数据的值，数据的最终值取决于哪一个更慢。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/e4d1cead53145d97aa7621eb76f10463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vUu_XlUzrISLHQxLv8ibQQ.png"/></div></div></figure><p id="b4f0" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">最终帖子ID为<code class="fe nh ni nj nk b">2</code>，但最终帖子数据为<code class="fe nh ni nj nk b">post1</code>。</p><h1 id="8d1d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">解决办法</h1><p id="340d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">那么，如何解决这个问题呢？事实上，从上面的序列图中，我们可以清楚地看到，我们只需要取消最后三个步骤。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/9ed9dc7df70f1549b9ad621de5e76d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d5XYOnvyvU8IcdzNT13GTw.png"/></div></div></figure><p id="d6f9" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">该页面将显示<code class="fe nh ni nj nk b">post2</code>相关数据，用户行为和页面数据一致。</p><p id="050e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">那么，如何取消这三步呢？</p><p id="edb1" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">首先我们可以发现这三个步骤都发生在第一个<code class="fe nh ni nj nk b">useEffect</code>。如果在我们的页面上触发了第二个<code class="fe nh ni nj nk b">useEffect</code>，那么我们应该取消前面的<code class="fe nh ni nj nk b">useEffect</code>的后续步骤。</p><p id="a6c3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在React Hooks中，有一个函数完美解决了这个问题，那就是<code class="fe nh ni nj nk b">useEffect</code>的返回函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox os l"/></div></figure><p id="3e54" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">从<a class="ae ky" href="https://reactjs.org/docs/hooks-reference.html#cleaning-up-an-effect" rel="noopener ugc nofollow" target="_blank">官方文档</a>，<code class="fe nh ni nj nk b">useEffect</code>可以返回一个清理功能。</p><blockquote class="oy oz pa"><p id="75ce" class="lr ls pb lt b lu mp ju lw lx mq jx lz pc nd mc md pd ne mg mh pe nf mk ml mm im bi translated">此外，如果一个组件渲染多次(通常如此)，则在执行下一个效果之前，会清除上一个效果。</p></blockquote><p id="a3c0" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">所以我们可以在清理中写相关的逻辑。</p><p id="22a4" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">具体有两种解决方案:一种是使用布尔标志，另一种是使用<code class="fe nh ni nj nk b">AbortController</code>。</p><h2 id="793b" class="of la it bd lb og oh dn lf oi oj dp lj ma ok ol ll me om on ln mi oo op lp oq bi translated">布尔标志</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/c96cb4d28d6274fa2b7679e215d4e6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Kj98M9l-HWehgC_3bCKaQ.png"/></div></div></figure><p id="c0d6" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">我们给<code class="fe nh ni nj nk b">useEffect</code>添加了一面名为<code class="fe nh ni nj nk b">shouldRender</code>的旗帜。默认值为true。HTTP请求完成后，数据应该呈现到页面上。</p><p id="6a36" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在前一个请求完成之前，一旦另一个<code class="fe nh ni nj nk b">useEffect</code>被触发，第二个<code class="fe nh ni nj nk b">useEffect</code>将触发第一个<code class="fe nh ni nj nk b">useEffect</code>的清除功能。它会将<code class="fe nh ni nj nk b">shouldRender</code>的值设置为假。这样，即使将来完成了第一个<code class="fe nh ni nj nk b">useEffect</code>请求，也不会修改数据的值。</p><p id="34b3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这是一个在线演示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="d8e9" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">下面是表示该过程的图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/eeeff68098d39efa936854315aa65986.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fs0Ecpl-DSn6-L_hV8qchg.png"/></div></div></figure><h2 id="b75f" class="of la it bd lb og oh dn lf oi oj dp lj ma ok ol ll me om on ln mi oo op lp oq bi translated">堕胎控制员</h2><p id="3385" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">上面的写法可以解决问题，但是有一个问题。也就是第二个<code class="fe nh ni nj nk b">useEffect</code>被触发后，第一个<code class="fe nh ni nj nk b">useEffect</code>发起的HTTP请求会继续，即使我们不再关心HTTP请求的结果。</p><p id="757b" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">考虑到性能优化，我们可以在<code class="fe nh ni nj nk b">useEffect</code>的清理函数中直接取消这个HTTP请求。</p><p id="b982" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">与取消HTTP请求相关的API是<code class="fe nh ni nj nk b">AbortController</code>。这是一个WebAPI。如果您不熟悉这个API，可以参考MDN文档。</p><div class="nn no gp gr np nq"><a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">abort controller-Web API | MDN</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">注意:在AbortSignal参考中有额外的例子。在下面的片段中，我们的目标是下载一个视频…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.mozilla.org</p></div></div><div class="nz l"><div class="ph l ob oc od nz oe ks nq"/></div></div></a></div><p id="0480" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">以下是更多代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/724b1ab67cbe8679016d1aa2dd438f21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivumDXCTDVXhd6OLfjybfg.png"/></div></div></figure><p id="54f1" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">欣赏在线演示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="24e3" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">下面是表示该过程的图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/21a57f96776c851d78bb1a0c35d6f285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqYp1_Rxlzld41Sy2IBdtw.png"/></div></div></figure><p id="c045" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">使用网站，我可以使用，我们可以检查<code class="fe nh ni nj nk b">AbortController</code>是否兼容。结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/763bd249ed8856fda75397fc31fa6286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T1J0The3kaQvqs0l2EiSJA.png"/></div></div></figure><h1 id="2bad" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="e98a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">竞态条件是一个不明显但经常重复出现的错误。如果你的网站有几百万用户，总会有一些用户在网络不稳定的情况下使用你的网站，他们很可能会遇到这个问题。</p><p id="3919" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">作为有抱负的前端开发者，我们应该尽力解决这样的问题。好吧，你之前的项目有这个问题吗？</p><p id="c4ec" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">感谢阅读。</p></div></div>    
</body>
</html>