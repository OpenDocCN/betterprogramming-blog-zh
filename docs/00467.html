<html>
<head>
<title>How to Store and Fetch From DynamoDB With AWS Lambda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用AWS Lambda从DynamoDB存储和获取数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/store-fetch-from-dynamodb-with-aws-lambda-342d1785a5d0?source=collection_archive---------0-----------------------#2019-05-27">https://betterprogramming.pub/store-fetch-from-dynamodb-with-aws-lambda-342d1785a5d0?source=collection_archive---------0-----------------------#2019-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d6d2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将数据库存储添加到无服务器设置中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e63172d42d95a48c0623b28b2de18343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJRMyA5xA49hOcUsqQhHyw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="2b93" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>的最大好处之一是它可以很容易地与其他AWS技术集成。在本文中，我将给出一个快速指南，介绍如何创建一个<a class="ae lu" href="https://aws.amazon.com/dynamodb/" rel="noopener ugc nofollow" target="_blank"> DynamoDB </a>表，并部署允许我们从表中存储和获取记录的函数。对于本演练，我们将使用<a class="ae lu" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>框架构建一个待办事项API。</p><p id="2531" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果这是您第一次使用无服务器框架，您可以快速按照我在上一篇文章中概述的步骤进行设置。它应该只需要你几分钟。</p><p id="318a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你喜欢这篇文章，请在这里给我买杯咖啡<a class="ae lu" href="https://www.buymeacoffee.com/lukemwila" rel="noopener ugc nofollow" target="_blank">☕️😃。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a8c1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">创建新的SLS项目</strong></h1><p id="4387" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">第一步是在选定的文件夹中初始化一个新的无服务器项目。您可以使用以下命令来完成此操作:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="3c5d" class="ne md it na b gy nf ng l nh ni">sls create --template aws-nodejs-typescript --path aws-lambda-with-dynamodb</span></pre><p id="cf8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将用一些样板代码建立我们的应用程序结构，包括一个基本的<code class="fe nj nk nl na b">lambda</code>函数。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e149" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">安装依赖项并更新清单文件</strong></h1><p id="162d" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">您可以通过运行<code class="fe nj nk nl na b">npm i</code>来安装任何缺失的依赖项。我们将使用的其他包有<a class="ae lu" href="https://www.npmjs.com/package/uuid" rel="noopener ugc nofollow" target="_blank"> uuid </a>(为数据库表中的记录生成唯一的id)和<a class="ae lu" href="https://www.npmjs.com/package/serverless-offline" rel="noopener ugc nofollow" target="_blank">无服务器离线</a>插件(这样我们可以在本地模拟AWS Lambda和API Gateway)。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4b1f" class="ne md it na b gy nf ng l nh ni">npm i —-save aws-lambda uuid<br/>npm i -D @types/uuid serverless-offline</span></pre><p id="81ea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦安装了这些依赖项，您就可以向您的<code class="fe nj nk nl na b">package.json</code>文件添加一个脚本，以触发<code class="fe nj nk nl na b">start lifecycle</code>事件来运行一个命令，该命令在一个特定的端口(在我的例子中是4000)上启动无服务器离线仿真器。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ffbc" class="ne md it na b gy nf ng l nh ni">"scripts": {<br/>  "start": "sls offline start --port 4000",<br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="33d3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">资源配置</strong></h1><p id="c30b" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">在你的无服务器应用目录中，创建一个名为<code class="fe nj nk nl na b">Resources</code>的文件夹。在这个文件夹中，我们将添加一个名为<code class="fe nj nk nl na b">dynamo-db.yml</code>的<a class="ae lu" href="https://yaml.org/" rel="noopener ugc nofollow" target="_blank"> YAML </a>文件。在这里，我们将添加创建DynamoDB表的<a class="ae lu" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-dynamodb-table.html" rel="noopener ugc nofollow" target="_blank"> AWS::DynamoDB::Table </a>资源。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="3dff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个文件中定义的属性是什么？</p><ol class=""><li id="07a9" class="no np it la b lb lc le lf lh nq ll nr lp ns lt nt nu nv nw bi translated">我们为将要创建的DynamoDB表资源设置一个描述(<code class="fe nj nk nl na b">ToDoListTable</code>)。</li><li id="4e81" class="no np it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">我们将DynamoDB表的实际名称(<code class="fe nj nk nl na b">TableName</code>)定义为<code class="fe nj nk nl na b">to-do-list</code>。</li><li id="7357" class="no np it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">我们为描述键模式和索引的表设置了<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_AttributeDefinition.html" rel="noopener ugc nofollow" target="_blank">AttributeDefinitions</a></code>。我们的表有一个<code class="fe nj nk nl na b">id</code>的<code class="fe nj nk nl na b">AttributeName</code>和一个<code class="fe nj nk nl na b">AttributeType</code>的字符串。</li><li id="274d" class="no np it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">我们定义了<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-dynamodb-keyschema.html" rel="noopener ugc nofollow" target="_blank">KeySchema</a></code>，它指定了构成表主键的属性。在这种情况下，它将是<code class="fe nj nk nl na b">id</code>。<code class="fe nj nk nl na b">KeySchema</code>属性中的属性也必须在<code class="fe nj nk nl na b">AttributeDefinitions</code>属性中定义。</li><li id="f8b4" class="no np it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">最后，我们使用<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-dynamodb-provisionedthroughput.html" rel="noopener ugc nofollow" target="_blank">ProvisionedThroughput</a></code>属性为我们的<code class="fe nj nk nl na b">to-do-list</code>表提供读写容量。<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-dynamodb-provisionedthroughput.html" rel="noopener ugc nofollow" target="_blank">ReadCapacityUnits</a></code>和<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-dynamodb-provisionedthroughput.html" rel="noopener ugc nofollow" target="_blank">WriteCapacityUnits</a></code>定义了在DynamoDB抛出<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Programming.Errors.html" rel="noopener ugc nofollow" target="_blank">ThrottlingException</a></code>之前，每秒消耗的最大强一致性读取和最大写入。你可以在亚马逊网络服务<a class="ae lu" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/AutoScaling.html" rel="noopener ugc nofollow" target="_blank">上阅读更多关于这些属性及其设置的含义。</a></li></ol></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f17a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">服务配置</strong></h1><p id="e01a" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">让我们把注意力转向<code class="fe nj nk nl na b">serverless.yml</code>文件。我首先将区域设置为<code class="fe nj nk nl na b">eu-west-1</code>，但是您可以继续选择最适合您的不同<a class="ae lu" href="https://docs.aws.amazon.com/general/latest/gr/rande.html" rel="noopener ugc nofollow" target="_blank">区域</a>。</p><p id="4050" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了加速本地开发，我们将配置我们之前安装的<code class="fe nj nk nl na b">serverless-offline</code>插件，它将模拟AWS Lambda和API Gateway，如下所示:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="d965" class="ne md it na b gy nf ng l nh ni">plugins:<br/>  - serverless-webpack<br/>  - serverless-offline</span></pre><p id="45d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，让我们像这样引用我们刚刚添加的<code class="fe nj nk nl na b">DynamoDB</code>资源:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4297" class="ne md it na b gy nf ng l nh ni">resources:<br/>  # DynamoDB<br/>  - ${file(resources/dynamodb-table.yml)}</span></pre><p id="3331" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们想给lambda函数与DynamoDB表交互的权限。这些权限是通过AWS IAM角色设置的，我们可以通过<code class="fe nj nk nl na b"><a class="ae lu" href="https://serverless.com/framework/docs/providers/aws/guide/iam/" rel="noopener ugc nofollow" target="_blank">provider.iamRoleStatements</a></code>属性在这个角色中设置权限策略语句。需要注意的是，使用这种配置，我们在该服务中部署的每个功能都将共享这些权限。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="617f" class="ne md it na b gy nf ng l nh ni">iamRoleStatements:<br/>  - Effect: Allow<br/>    Action:<br/>      - dynamodb:DescribeTable<br/>      - dynamodb:Query<br/>      - dynamodb:Scan<br/>      - dynamodb:GetItem<br/>      - dynamodb:PutItem</span></pre><p id="2183" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">出于安全目的，我们希望将lambda服务的访问权限限制在to-do-list表资源，因此我们可以在<code class="fe nj nk nl na b">Resource</code>属性中定义它，方法是使用ARN (Amazon资源名称)指定资源，如下所示:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9f12" class="ne md it na b gy nf ng l nh ni">Resource: "arn:aws:dynamodb:eu-west-1:<strong class="na iu">accountId</strong>:table/to-do-list"</span></pre><p id="719d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确保在<code class="fe nj nk nl na b">Resource</code>属性字段中包含您的<a class="ae lu" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/console_account-alias.html" rel="noopener ugc nofollow" target="_blank"> AWS帐户ID </a>来代替文本<code class="fe nj nk nl na b">accountId</code>。</p><p id="8b0b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们还在<code class="fe nj nk nl na b">serverless.yml</code>时，我将继续配置lambda函数，这些函数将用于生成API端点，我们将查询这些端点以在表中保存新记录，以及检索它们。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="92e6" class="ne md it na b gy nf ng l nh ni">functions:<br/>  saveToDoItem:<br/>    handler: handler.saveToDoItem<br/>    events:<br/>      - http:<br/>          method: post<br/>          path: save-to-do-item<br/>          cors: true<br/>  getToDoItem:<br/>    handler: handler.getToDoItem<br/>    events:<br/>      - http:<br/>          method: get<br/>          path: to-do-items/{id}<br/>          cors: true</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3628" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">创建处理函数</strong></h1><p id="a21c" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">在我们的<code class="fe nj nk nl na b">handler.ts</code>文件中，我将创建一个名为<code class="fe nj nk nl na b">respond</code>的函数，包装发送回客户端的响应。这个函数有两个参数:</p><ol class=""><li id="cd4b" class="no np it la b lb lc le lf lh nq ll nr lp ns lt nt nu nv nw bi translated">我们作为回应发送的数据。</li><li id="1b37" class="no np it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">HTTP响应<a class="ae lu" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" rel="noopener ugc nofollow" target="_blank">状态码</a>。</li></ol><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9376" class="ne md it na b gy nf ng l nh ni">export const respond = (fulfillmentText: any, statusCode: number): any =&gt; {<br/>  return {<br/>    statusCode,<br/>    body: JSON.stringify(fulfillmentText),<br/>    headers: {<br/>      "Access-Control-Allow-Credentials": true,<br/>      "Access-Control-Allow-Origin": "*",<br/>      "Content-Type": "application/json"<br/>    }<br/>  };<br/>};</span></pre><p id="ba60" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我将创建两个我在<code class="fe nj nk nl na b">serverless.yml</code>文件中定义为函数的处理程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="83aa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这两个函数调用了还不存在的其他函数，所以让我们继续创建它们。在你的app目录下，你可以创建另一个名为<code class="fe nj nk nl na b">dynamodb-actions</code>的文件夹，并在那里创建一个<strong class="la iu"> </strong> <code class="fe nj nk nl na b">index.ts</code>文件。在我们的<code class="fe nj nk nl na b">index.ts</code>文件中，我们将从<a class="ae lu" href="https://aws.amazon.com/sdk-for-node-js/" rel="noopener ugc nofollow" target="_blank"> JavaScript AWS SDK </a>实例化<code class="fe nj nk nl na b"><a class="ae lu" href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/dynamodb-example-document-client.html" rel="noopener ugc nofollow" target="_blank">DynamoDB DocumentClient</a></code>对象。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7e8b" class="ne md it na b gy nf ng l nh ni">const dynamoDB = new AWS.DynamoDB.DocumentClient();</span></pre><p id="745b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该不需要在项目级别安装它，因为Lambda环境附带了它。但是，我建议您在本地机器上全局安装AWS SDK，以便进行本地开发。</p><p id="dc32" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将创建的第一个函数是<code class="fe nj nk nl na b">saveItemInDB</code>，它将接受在我们的<code class="fe nj nk nl na b">to-do-list</code>表中创建一个条目所需的两个相关参数。然后，我们为DocumentClient的<code class="fe nj nk nl na b">put</code>函数创建参数(<code class="fe nj nk nl na b">params</code>)，方法是指定表名和我们希望存储在表中的项。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="af98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们要创建的第二个函数是<code class="fe nj nk nl na b">getItemFromDB</code>。我们将使用这个函数从<code class="fe nj nk nl na b">to-do-list</code>表中检索一个条目，方法是在DocumentClient的<code class="fe nj nk nl na b">get</code>函数的参数(<code class="fe nj nk nl na b">params</code>)中指定表名和条目ID作为关键字。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4e92" class="ne md it na b gy nf ng l nh ni">/** get a to-do item from the db table */<br/>export function getItemFromDB(id: string) {<br/>  const params = {<br/>    TableName: "to-do-list",<br/>    Key: {<br/>      id<br/>    }<br/>  };</span><span id="3c6e" class="ne md it na b gy oc ng l nh ni">return dynamoDB<br/>    .get(params)<br/>    .promise()<br/>    .then(res =&gt; res.Item)<br/>    .catch(err =&gt; err);<br/>}</span></pre><p id="c5d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以将这两个函数导入到<code class="fe nj nk nl na b">handler.ts</code>文件中，以解决之前因为它们不存在而导致的任何错误。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7577" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">测试AWS Lambda功能</strong></h1><p id="2e4d" class="pw-post-body-paragraph ky kz it la b lb mu ju ld le mv jx lg lh mw lj lk ll mx ln lo lp my lr ls lt im bi translated">最后，我们开始测试我们的lambda函数。为此，我们可以使用类似于<a class="ae lu" href="https://insomnia.rest/" rel="noopener ugc nofollow" target="_blank">失眠</a>或<a class="ae lu" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>的API测试工具。我将使用后者。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/25a5d0ae36a2a6691c7bcf3999793abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjrTAF5suiIkEeJiez9sMQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Postman API开发环境。</p></figure><p id="c7ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你决定了一个API测试工具，你可以通过在终端运行<code class="fe nj nk nl na b">npm start</code>来启动你的无服务器离线模拟器。</p><p id="f352" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了测试我的<code class="fe nj nk nl na b">handler.saveToDoItem</code>，我向<a class="ae lu" href="http://localhost:4000/save-to-do-item" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/save-to-do-item</a>发出一个POST请求，并得到如下响应:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="9119" class="ne md it na b gy nf ng l nh ni">{<br/>    "created": {<br/>        "item": "Write new post",<br/>        "complete": false<br/>    }<br/>}</span></pre><p id="e1d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要获取项目的ID，您可以修改代码使其包含在响应中，或者您可以转到<a class="ae lu" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>并从<code class="fe nj nk nl na b">to-do-list</code>表中检索记录ID。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/b3a24f66617a3027df398d86d8a81d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AI8JPDAkwKwUM3ybbIwIyw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS控制台中的DynamoDB表。</p></figure><p id="f642" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以使用新创建记录的ID来测试我们的<code class="fe nj nk nl na b">handler.getToDoItem</code>是否正常工作。为此，我们向<a class="ae lu" href="http://localhost:4000/to-do-items/%7Bid%7D" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/to-do-items/{ id }</a>发出一个GET请求，应该会得到如下响应:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b290" class="ne md it na b gy nf ng l nh ni">{<br/>    "id": "e843eafa-3468-4d84-b87e-2629c276543e",<br/>    "complete": false,<br/>    "item": "Have a glass of water"<br/>}</span></pre><p id="e9b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果一切正常(应该如此)，您可以使用以下命令部署您的服务(如果您之前没有这样做):</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="8ff6" class="ne md it na b gy nf ng l nh ni">sls deploy --aws-profile devProfile</span></pre><p id="cf72" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你完成了这些，给自己一个小小的挑战，编写和部署允许你从<code class="fe nj nk nl na b">to-do-list</code>表中更新和删除记录的函数。</p><p id="98e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在GitHub 上找到这篇文章<a class="ae lu" href="https://github.com/LukeMwila/aws-lambda-with-dynamo-db" rel="noopener ugc nofollow" target="_blank">的代码。</a></p></div></div>    
</body>
</html>