# 超越 Ruby on Rails——3 个值得一试的替代 Web 框架

> 原文：<https://betterprogramming.pub/get-over-ruby-on-rails-3-alternative-web-frameworks-worth-checking-out-2551e674f5db>

## Ruby 不仅仅是 Rails

![](img/2b248c1ce12a8be9c22652e61b0cde6d.png)

瑞安·斯通在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片。

Ruby 随着 Ruby on Rails 框架的兴起而出名。它仍然是 web 框架领域最大的玩家之一——即使你将它与其他语言的框架相比较。所以 Rails 的兴起对 Ruby(这门语言)帮助很大。但是这也有不好的一面:现在，Ruby 主要和 Rails 联系在一起，其他什么都没有。

还有其他选择吗？

*免责声明:在关于 Basecamp 的大争议发生之前，我就开始写这篇文章了。我不想在文章中对此提出任何观点。不管 DHH 和其他人在不同的话题上说了什么，Ruby on Rails 仍然是一个伟大的软件，并将继续如此。但是我也想强调一些很好的选择。*

# 西纳特拉

Sinatra 是 Ruby 最古老的 web 框架之一。它最初于 2007 年发布(Rails 于 2004 年发布)。Sinatra 是一个微框架，它启发了许多其他小框架，就像 Rails 启发了全栈框架一样。例如，著名的 [Express.js](https://expressjs.com/) 框架就受到了 Sinatra 以及 [Laravel](https://laravel.com/) 的某些部分的启发。

Sinatra 本身只带有一个 DSL，你可以用它将你的应用程序路由到你的业务对象。它不需要一种方法来确定文件应该放在哪里，它甚至不关心 ORM。这让开发人员可以为工作选择最好的工具，但也要求我们考虑很多东西，如果我们坚持使用全栈框架，我们就不必考虑这些东西。

Sinatra 被 BBC、Heroku、Stripe、Runtastic 等公司用于制作。

与其他替代方案相比，Sinatra 目前的速度相当慢。洛达和 Hanami 每秒可以处理更多的请求，同时需要更少的内存。

# 洛达

[洛达](http://roda.jeremyevans.net/index.html)是一个受辛纳屈启发的微框架。因此，它没有 ORM，但洛达是由与 Sequel 相同的开发人员开发的，并且有一个插件，可以很容易地将 Sequel 设置为你选择的 ORM。

洛达和辛纳屈的主要区别在于底层架构。洛达使用路由树来实现这种高性能，而 Sinatra 使用顺序搜索来寻找匹配的路由。此外，洛达有很多性能优化的代码。维护者杰雷米·埃文斯在这方面真的很棒。

*旁注:如果你想向他学习，我强烈推荐* [*看这个视频*](https://www.youtube.com/watch?v=RuGZCcEL2F8) *。*

洛达的另一大优势是文档。由于洛达是一个微框架，与 Rails 相比，它有很多不能做的事情。但是它能做什么是有据可查的，有足够的资源解释如何与洛达合作。

# 花见

Hanami 是一个全栈网络框架。它目前正处于一个过渡阶段，因为版本 2 的“重写”正在进行中。

Hanami 以前叫 Lotus，但是因为和 IBM 的一些版权问题，改名为 Hanami。主要开发者[卢卡·圭迪](https://twitter.com/jodosha)在一年多前宣布了与 [dry-rb](https://dry-rb.org/) 和 [rom-rb](https://rom-rb.org/) 团队的大合作。现在，来自这些项目的团队正在致力于改进这个框架。如果你想了解他们的进展，我推荐你在推特上关注蒂姆·赖利和彼得·索尔尼卡。蒂姆每月发布一次博客，写下他取得的进步。

那么，新的 Hanami 2 框架有什么特点/优势呢？Rails 最大的不同之一是，Hanami 2 在所谓的切片的帮助下，可以轻松地在应用程序中创建边界。切片是项目子部分的容器。它包含该子部分的业务逻辑以及视图和数据库。

这方面有什么例子？假设你正在开发一个售票系统。这种系统中的一个片可以处理所有与票据相关的逻辑(即票据的工作流、状态等等)。另一个部分将处理您的票证所关联的项目。这样，对于这两个概念，您就有了一个清晰的责任划分，并且可以定义一个清晰的界面来工作。因此，这两个系统是解耦的，只要接口保持不变，您就可以自由地重构其中一个而不会干扰另一个。

Hanami 的开发人员也付出了相当大的努力来使编写测试变得容易。为此，他们增加了一个名为“自动注射混合”的功能。通过这种方式，可以将依赖关系包含到您的对象中——可以是控制器或业务对象，也可以是您使用的任何其他对象。在开发和生产过程中，这将加载真正的依赖关系，但是当您运行测试并给实例一些模拟对象时，它就在使用这个对象。另一个好处是，这使得很容易看出什么取决于什么。

另一个很大的区别是数据库层。作为一个完整的堆栈框架，Hanami 附带了一个数据库抽象层(rom-rb)。rom-rb 的核心概念与活动记录使用的概念有很大不同。Rom-rb 实现了一个存储库模式。这样，您就有了一个类，可以在其中创建查询并从域对象中获取实例。当然，rom 实现的存储库模式比这个更复杂！如果您想了解更多信息，我强烈建议您查看[文档](https://rom-rb.org/learn/introduction/core-concepts/)。

由于与 dry-rb 项目的合作，Hanami 也从该项目中获得了不少好处。它使用干式验证 DSL 来验证控制器参数以及其他需要验证的参数。此外，它使用干视图宝石。有了这一点，很容易创建隔离的和可重用的视图。事实上，与 Rails 相比，该视图是最大的改进之一。

Hanami 中的视图有一个处理视图依赖关系的对象，还向模板公开动态数据以供使用。如果需要，您还可以创建一个视图部件类，负责将视图特定行为附加到域对象。

编辑:最新的 Hanami alpha 2 在这篇文章发表后几个小时就发布了。如果你想了解更多的细节[这里](https://hanamirb.org/blog/2021/05/04/announcing-hanami-200alpha2/)是博客文章，强调了一些特点，也显示了如何让你的手湿与花见。如果您想了解更多关于 Hanami 及其构建的库，请看 [Hanami 精通](https://hanamimastery.com/t/hanami)。

如果你知道长生不老药框架 Phoenix，那么 Hanami 的许多概念听起来对你来说都很熟悉。这是因为这两个项目都受到了 SOLID 原则的启发，并把很多注意力放在了一个不断发展的项目的可维护性上。

# 结论

正如我们所看到的，有一些有趣的选项可以在不同的 web 框架中使用 Ruby。本文中提到的所有框架都已经在生产中使用。以 Hanami 为例，已经有一些版本 2 的生产应用程序开始运行了。如果你对这些框架有一些经验，我很乐意在评论中读到它们。

在以后的文章中，如果您想将 Ruby 用于 web 开发之外的领域，我将重点介绍一些非常好的宝石。