<html>
<head>
<title>Python’s Core Syntax and the Magic Behind It!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python的核心语法及其背后的魔力！</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/python-core-syntax-and-the-magic-behind-them-3c912985b87c?source=collection_archive---------12-----------------------#2022-04-26">https://betterprogramming.pub/python-core-syntax-and-the-magic-behind-them-3c912985b87c?source=collection_archive---------12-----------------------#2022-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="822b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你有没有想过如何在Python中运行两个数字或字符串相加( <code class="fe kf kg kh ki b"><strong class="ak">+</strong></code> <strong class="ak">)这样的操作，并得到合理的结果？</strong>在这篇文章中，我们将进一步了解答案。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/986916c474b8d180f211f0649780430b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rUB_KKG4g4NJs-sT"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Sergi Viladesau 在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="7d48" class="la lb iq bd lc ld le lf lg lh li lj lk jw ll jx lm jz ln ka lo kc lp kd lq lr bi translated">Python核心语法</h1><p id="2a3c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">在Python中，我们可以运行类似于<code class="fe kf kg kh ki b">1+2</code>或<code class="fe kf kg kh ki b">'a' + 'b'</code>的操作，分别得到<code class="fe kf kg kh ki b">3</code>和<code class="fe kf kg kh ki b">ab</code>的结果。或者我们可以在不同的数据结构(List、Dictionary、Tuple和Set)上调用类似<code class="fe kf kg kh ki b">len()</code>的函数，并获得元素总数，如下面的代码块所示。</p><pre class="kk kl km kn gt mo ki mp mq aw mr bi"><span id="0a6b" class="ms lb iq ki b gy mt mu l mv mw"># creating objects of different data types for demo<br/>l1 = [1, 2, 5]</span><span id="4d8d" class="ms lb iq ki b gy mx mu l mv mw">d1 = {"one": 1, "two":2}</span><span id="958c" class="ms lb iq ki b gy mx mu l mv mw">t1 = (1, 2, 3)</span><span id="1e48" class="ms lb iq ki b gy mx mu l mv mw">s1 = {1, "two"}</span><span id="a390" class="ms lb iq ki b gy mx mu l mv mw">​</span><span id="557d" class="ms lb iq ki b gy mx mu l mv mw">[len(i) for i in [l1, d1, t1, s1]]</span><span id="2c77" class="ms lb iq ki b gy mx mu l mv mw">&gt;&gt; [3, 2, 3, 2]</span></pre><p id="cb5b" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">这些是Python核心语法的一些例子。其他一些常见的Python核心语法类型有:</p><ul class=""><li id="0980" class="nd ne iq lu b lv my ly mz mb nf mf ng mj nh mn ni nj nk nl bi translated">常见的代数表达式如<code class="fe kf kg kh ki b">+</code>、<code class="fe kf kg kh ki b">-</code>、<code class="fe kf kg kh ki b">*</code>。</li><li id="e1d9" class="nd ne iq lu b lv nm ly nn mb no mf np mj nq mn ni nj nk nl bi translated">用于比较的常用运算符，例如<code class="fe kf kg kh ki b">==</code>、<code class="fe kf kg kh ki b">&lt;</code>、<code class="fe kf kg kh ki b">in</code>。</li><li id="38f8" class="nd ne iq lu b lv nm ly nn mb no mf np mj nq mn ni nj nk nl bi translated">内置功能，例如<code class="fe kf kg kh ki b">len()</code>、<code class="fe kf kg kh ki b">str()</code>。</li><li id="b7a3" class="nd ne iq lu b lv nm ly nn mb no mf np mj nq mn ni nj nk nl bi translated">反射，例如<code class="fe kf kg kh ki b">type()</code>、<code class="fe kf kg kh ki b">isinstance()</code>等。</li></ul><h1 id="4e60" class="la lb iq bd lc ld le lf lg lh li lj lk jw ll jx lm jz ln ka lo kc lp kd lq lr bi translated">神奇的方法</h1><blockquote class="nr ns nt"><p id="8578" class="ls lt nu lu b lv my jr lx ly mz ju ma nv na md me nw nb mh mi nx nc ml mm mn ij bi translated">Python能够理解这些核心语法的原因是，每当Python接收到一个核心语法时，它就能够将它与负责该特定语法的特定方法联系起来。</p></blockquote><p id="adaf" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">例如，当我们调用类似于<code class="fe kf kg kh ki b">1+2</code>的东西时，在幕后，Python调用一个叫做<code class="fe kf kg kh ki b">__add__()</code>的方法或者当我们调用<code class="fe kf kg kh ki b">len()</code>时，Python调用<code class="fe kf kg kh ki b">__len__()</code>方法。这种方法被称为<em class="nu">魔法方法</em>或特殊用途方法。查看下面的代码块进行演示。</p><pre class="kk kl km kn gt mo ki mp mq aw mr bi"><span id="79d4" class="ms lb iq ki b gy mt mu l mv mw">result1 = 'a' + 'b'</span><span id="4d3d" class="ms lb iq ki b gy mx mu l mv mw">print(f"Summing up a, b with `+` = {result1}")</span><span id="9327" class="ms lb iq ki b gy mx mu l mv mw">result2 = 'a'.__add__('b')</span><span id="a961" class="ms lb iq ki b gy mx mu l mv mw">print(f"Summing up a, b with `__add__()` = {result2}")</span><span id="a5c5" class="ms lb iq ki b gy mx mu l mv mw">&gt;&gt; Summing up a, b with `+` = ab<br/>&gt;&gt; Summing up a, b with `__add__()` = ab</span></pre><p id="c218" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">注意，我们是如何使用点符号来使用神奇的函数<code class="fe kf kg kh ki b">__add__()</code>的。这是因为<code class="fe kf kg kh ki b">__add__()</code>是一个私有方法，它已经在<code class="fe kf kg kh ki b">string</code>类中实现了，而【】类是我们对象的类类型:<code class="fe kf kg kh ki b">a</code>。我们还可以在<code class="fe kf kg kh ki b">a</code>上应用<code class="fe kf kg kh ki b">dir()</code>函数来检查其他已经实现的方法。</p><pre class="kk kl km kn gt mo ki mp mq aw mr bi"><span id="eedc" class="ms lb iq ki b gy mt mu l mv mw">print(f"Class of `a` is = {'a'.__class__}")</span><span id="7019" class="ms lb iq ki b gy mx mu l mv mw">print("\nAll the methods available in `a`: ")</span><span id="6b2e" class="ms lb iq ki b gy mx mu l mv mw">print(dir('a'.__class__))</span><span id="70fb" class="ms lb iq ki b gy mx mu l mv mw">&gt;&gt; Class of `a` is = &lt;class 'str'&gt;</span><span id="0dd5" class="ms lb iq ki b gy mx mu l mv mw">&gt;&gt; All the methods available in `a`: <br/>['__add__', '__class__', '__contains__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'capitalize', 'casefold', 'center', 'count', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'format_map', 'index', 'isalnum', 'isalpha', 'isascii', 'isdecimal', 'isdigit', 'isidentifier', 'islower', 'isnumeric', 'isprintable', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'maketrans', 'partition', 'removeprefix', 'removesuffix', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']</span></pre><h1 id="35d5" class="la lb iq bd lc ld le lf lg lh li lj lk jw ll jx lm jz ln ka lo kc lp kd lq lr bi translated">在自定义类中实现神奇的方法</h1><p id="2d9b" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">上面的演示展示了Python如何在核心语法上正常工作，魔术方法需要由操作中涉及的对象的类来交付。这也为我们在自定义类中实现神奇的方法提供了机会。</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="3a22" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">⚠️:如果你需要快速复习Python类，可以看看我写的关于Python类的文章:</p><div class="of og gp gr oh oi"><a href="https://towardsdatascience.com/oop-in-python-understanding-a-class-bcc088e595c6" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">Python中的OOP理解一个类</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">理解Python类的基本组件。</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">towardsdatascience.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow kt oi"/></div></div></a></div></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="e209" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">例如，假设我们为一家运输汽车的卡车公司工作。为了快速检查他们上车的总重量，我们将实现<code class="fe kf kg kh ki b">__add__()</code>方法。当然，这有点矫枉过正，但是将简单的事情复杂化是学习基础知识的好方法！</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ox oy l"/></div></figure><pre class="kk kl km kn gt mo ki mp mq aw mr bi"><span id="7524" class="ms lb iq ki b gy mt mu l mv mw">&gt;&gt; Total weight of mustang and prius: 6542</span></pre><p id="1719" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">🛑注意，核心语法只在同一对象类型的范围内工作——这意味着你可以运行<code class="fe kf kg kh ki b">'a' + 'b'</code>并得到一个结果，但是调用<code class="fe kf kg kh ki b">'a' + 5</code>会导致一个错误。它们的操作类似，但是有一个内置的检查来确保用相同的数据类型调用操作。检查下面的代码块:</p><pre class="kk kl km kn gt mo ki mp mq aw mr bi"><span id="304b" class="ms lb iq ki b gy mt mu l mv mw">try: 'a' + 5</span><span id="2659" class="ms lb iq ki b gy mx mu l mv mw">except Exception as e:</span><span id="fe4b" class="ms lb iq ki b gy mx mu l mv mw">    print(e)</span><span id="ff9d" class="ms lb iq ki b gy mx mu l mv mw">try: mustang + 10</span><span id="cda7" class="ms lb iq ki b gy mx mu l mv mw">except Exception as e:</span><span id="65b6" class="ms lb iq ki b gy mx mu l mv mw">    print(e)</span><span id="e391" class="ms lb iq ki b gy mx mu l mv mw">&gt;&gt; can only concatenate str (not "int") to str<br/>&gt;&gt; 'int' object has no attribute 'weight'</span></pre><p id="1ac2" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">此外，请注意在运行相同的方法时，我们的自定义类实例与string对象产生的错误差异。这告诉我们，在实现这样的特殊方法时，我们还应该实现一个检查，以确保传递的对象的数据类型是预期的类型，否则会引发异常。</p><h1 id="0b1e" class="la lb iq bd lc ld le lf lg lh li lj lk jw ll jx lm jz ln ka lo kc lp kd lq lr bi translated">其他方法</h1><p id="22cc" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">我们已经看到了如何通过使用<code class="fe kf kg kh ki b">dir()</code>函数来查看一个类的实现方法。我们还可以使用<code class="fe kf kg kh ki b">help()</code>函数来查看方法的实现，前提是该类的文档可用。例如，要查看一个字符串对象的内置方法，我们可以运行这个:<code class="fe kf kg kh ki b">help('a'.__class__)</code>。</p><p id="ee3a" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">运行这个命令会打印出所有的方法，占用很多空间，所以我添加了一个只有几个方法的截图。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oz"><img src="../Images/9b3792508c507f2c7220dc3dd2cbd309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hAIi4b2NEAfzC5P2Q37uqA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来源:作者</p></figure><p id="a171" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">在本文中，我们了解了python的核心语法。我们讨论了一些常见的核心语法，并讨论了它们相应的神奇方法。但是Python中已经实现了更多神奇的方法。查看来自Python.org的特殊方法参考页面,获取特殊方法的详细列表</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="7eb8" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">感谢阅读这篇文章。希望你觉得有用。</p><p id="0c52" class="pw-post-body-paragraph ls lt iq lu b lv my jr lx ly mz ju ma mb na md me mf nb mh mi mj nc ml mm mn ij bi translated">如果您选择Python作为工具，那么您可能会喜欢我的另一篇关于理解Python异常的文章:</p><div class="of og gp gr oh oi"><a href="https://towardsdatascience.com/python-exceptions-what-why-and-how-44661cad3cd4" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">Python异常——什么、为什么和如何？</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">理解Python中异常的工作方式以及如何正确使用它们。</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">towardsdatascience.com</p></div></div><div class="or l"><div class="pa l ot ou ov or ow kt oi"/></div></div></a></div></div></div>    
</body>
</html>