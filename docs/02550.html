<html>
<head>
<title>Understanding Data Flow and Event Delegation in Flutter Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Flutter应用程序中的数据流和事件委托</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/data-flow-and-delegation-in-flutter-apps-1a6fedce90ef?source=collection_archive---------6-----------------------#2019-12-08">https://betterprogramming.pub/data-flow-and-delegation-in-flutter-apps-1a6fedce90ef?source=collection_archive---------6-----------------------#2019-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1574" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让你的Flutter应用更加灵活的常用技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/15b5db7a1032d02748a8ca87aff8c5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KEjKj_z6UXcr9aJiFSgwbg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">肖恩·马丁在<a class="ae ky" href="https://unsplash.com/photos/bMhTQ4jdJtg" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="fac3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当开发Flutter应用程序时，确保小部件尽可能可重用是很重要的。这意味着保持你的小部件精简，没有任何逻辑。在这篇文章中，我将介绍一些常用的技术，你可以用它们来使你的Flutter应用程序更加灵活，耦合度更低。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1ba9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据流</h1><p id="9e23" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Flutter应用程序中的一个常见场景是从网络下载数据，然后在屏幕上显示。一种方法是在小部件中执行网络请求，然后下载数据。这在下面实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2e3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述方法的问题是我们有一个与来自阵列的数据紧密耦合的<code class="fe nb nc nd ne b">CustomerList</code>。这意味着<code class="fe nb nc nd ne b">CustomerList</code>不能从父节点获取数据并显示出来。它只能在<code class="fe nb nc nd ne b">CustomerList</code>小部件中声明的数组上工作，不能用于其他场景。</p><p id="3549" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">处理这种情况的一个更好的方法是将数据从父窗口传递给<code class="fe nb nc nd ne b">CustomerList</code>小部件，然后显示它。下面的代码说明了这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="ffb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码看起来与我们之前的版本相似——有一个非常大的不同。这次我们将数据传递给<code class="fe nb nc nd ne b">CustomerList</code>小部件。<code class="fe nb nc nd ne b">CustomerList</code>小部件只是用来显示数据，仅此而已。</p><p id="0289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着<code class="fe nb nc nd ne b">CustomerList</code>不负责获取数据。它只负责展示它。<code class="fe nb nc nd ne b">CustomerList</code>可以很容易地在其他页面中使用，这些页面可以将一组不同的客户数据传递给小部件。</p><p id="d721" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当开发Flutter应用程序时，确保数据从父代传递到子代。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0945" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">委托</h1><p id="0609" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">小部件不仅用于显示数据，还可以引发事件。当事件在子部件中引起时，最好将事件委托给父部件，以便父部件可以采取行动。看看下面的代码，其中<code class="fe nb nc nd ne b">CustomerList</code>小部件对<code class="fe nb nc nd ne b">ListTile</code> <code class="fe nb nc nd ne b">onTap</code>事件采取行动。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="c557" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述方法的问题是<code class="fe nb nc nd ne b">CustomerList</code>小部件现在与<code class="fe nb nc nd ne b">_navigateToCustomerDetailsScreen</code>动作紧密集成。更好的办法是让家长决定当小工具被点击时做什么。实现如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="023b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个更好的方法，因为事件现在被委托给父节点，现在父节点可以决定做什么。这也使我们的<code class="fe nb nc nd ne b">CustomerList</code>更加灵活，因为现在它可以适应不同父母的需求。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c8fd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结构和命名</h1><p id="4f66" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">应用程序的结构取决于你或你的公司遵循的指导方针。在对其他开发人员的代码进行了大量的研究和阅读之后，我提出了这一套小小的指导原则。</p><ul class=""><li id="4572" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">Dart文件名应该是蛇形的。例子:<code class="fe nb nc nd ne b">customer_list.dart</code>。</li><li id="8c5b" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><code class="fe nb nc nd ne b">Page</code>将代表应用程序的屏幕，其中将包括部件。例如:<code class="fe nb nc nd ne b">HomePage</code>、<code class="fe nb nc nd ne b">CustomerListPage</code>等。</li><li id="52c8" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">将项目中的每种类型的类组织在单独的文件夹中。示例:页面、小部件、服务等。</li></ul><p id="dca4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我演示了Flutter应用程序中的数据流，包括使用委托模式的子-父通信。所有这些都将是我即将开始的颤振课程的一部分。</p><p id="14ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢，祝编码愉快！</p></div></div>    
</body>
</html>