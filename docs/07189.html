<html>
<head>
<title>Handy Log File Management Tools to View and Monitor Your Logs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">方便的日志文件管理工具来查看和监控您的日志</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/handy-log-file-management-tools-to-view-and-monitor-your-logs-75416d0c0fa4?source=collection_archive---------6-----------------------#2020-12-15">https://betterprogramming.pub/handy-log-file-management-tools-to-view-and-monitor-your-logs-75416d0c0fa4?source=collection_archive---------6-----------------------#2020-12-15</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="4800" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">简单而强大的日志文件管理工具简介</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/94339b62d48ca4728bb3a793895a2369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*97_yxM99isZUuLey"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@templatemonster?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">模板怪兽</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="c0fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">日志文件在识别应用程序中的问题时起着至关重要的作用。有时我们不得不处理大型日志文件来查找相关信息。</p><p id="d407" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有很多现代的解决方案，比如Kibana但是，您可能不希望在较小的项目中使用复杂的软件。或者由于某些限制，您无法利用此类应用程序监控工具。</p><p id="893e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本教程中，我想让您注意两个工具— <a class="ae kz" href="https://github.com/ToddAtkins/swatchdog" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv"> swatchdog </strong> </a>和<a class="ae kz" href="https://glogg.bonnefon.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv"> glogg </strong> </a>。它们易于上手，并免费提供强大的功能。我们将通过一些简单的例子来探索它们最常见的用法。</p><p id="3e80" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们开始吧！</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="bbc5" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">Swatchdog</h1><p id="657b" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated"><em class="na"> Swatchdog </em>代表“简单的看门狗”顾名思义，它用于监控系统活动。它需要一个带有要搜索的模式的配置文件。</p><h2 id="8ca2" class="nb me iu bd mf nc nd dn mj ne nf dp mn lj ng nh mp ln ni nj mr lr nk nl mt nm bi translated">为什么有用？</h2><p id="f8cb" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">假设您正在运行一个第三方应用程序，该应用程序在其进程完成时不会发送电子邮件。您可以通过创建一个自定义脚本来监控该文件，而不是手动检查其日志文件。这就是swatchdog派上用场的地方——它使用起来简单多了。</p><p id="565e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，如果您希望在应用程序中出现错误消息时得到通知，这个工具会很有用。</p><h2 id="35fe" class="nb me iu bd mf nc nd dn mj ne nf dp mn lj ng nh mp ln ni nj mr lr nk nl mt nm bi translated">示例配置</h2><p id="0169" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">首先，让我们安装swatchdog。</p><ul class=""><li id="af72" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">对于Ubuntu/Debian发行版:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="4e41" class="nb me iu nx b gz ob oc l od oe">$ sudo apt install swatch</span></pre><ul class=""><li id="93bd" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">对于Fedora发行版:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="1fc6" class="nb me iu nx b gz ob oc l od oe">$ sudo dnf install swatch</span></pre><ul class=""><li id="37e5" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">对于CentOS发行版:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="5c3b" class="nb me iu nx b gz ob oc l od oe">$ sudo yum install epel-release &amp;&amp; sudo yum install swatch</span></pre><ul class=""><li id="4d1a" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">Swatchdog需要一个名为<code class="fe of og oh nx b">.swatchrc</code>的配置文件。让我们创建它:</li></ul><p id="5a5f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe of og oh nx b">$ touch /home/user/.swatchrc</code></p><p id="0666" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">假设您想在程序日志中发现单词<em class="na">完成</em>时得到通知:</p><ul class=""><li id="e559" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">您可以有这样的配置:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="8a19" class="nb me iu nx b gz ob oc l od oe">watchfor /Finished/<br/>          echo green<br/> mail=user, subject="Pattern found"</span></pre><p id="ece1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们告诉swatchdog将<code class="fe of og oh nx b">Finished</code>作为一个固定的字符串。你也可以使用<a class="ae kz" href="https://en.wikipedia.org/wiki/Regular_expression" rel="noopener ugc nofollow" target="_blank">正则表达式</a>来获得更多的灵活性。</p><p id="1f3d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当它找到模式时，它会用绿色突出显示终端中的文本。您可以为各种消息指定不同的颜色。</p><p id="6059" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">默认情况下，Swatchdog监视<code class="fe of og oh nx b">/var/log/syslog</code>文件，所以如果我们想监视我们的自定义日志，我们必须修改这个设置。</p><ul class=""><li id="3c37" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">为了提供不同的配置，让我们在名为<code class="fe of og oh nx b">swatch</code>的新目录中创建一个<code class="fe of og oh nx b">secure.conf</code>文件:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="d467" class="nb me iu nx b gz ob oc l od oe">watchfor /Finished/<br/>echo green<br/>exec echo "execute some script here..."<br/>mail=user, subject="Script done"</span></pre><p id="ff81" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，您可以在这里提供多种搜索模式。您还可以配置不同的电子邮件主题和收件人。</p><ul class=""><li id="1418" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated"><code class="fe of og oh nx b">mail</code>用于向指定的收件人发送电子邮件。</li><li id="7bde" class="nn no iu lc b ld oi lg oj lj ok ln ol lr om lv ns nt nu nv bi translated"><code class="fe of og oh nx b">exec</code>当找到给定的模式时，可以执行指定的命令或脚本。</li></ul><p id="defc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我们的配置已经准备好了，让我们看看它是如何工作的。</p><ul class=""><li id="7f49" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">执行以下命令并调整日志文件的位置。我的叫<code class="fe of og oh nx b">dummy.log</code>:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="5fed" class="nb me iu nx b gz ob oc l od oe">$ swatchdog -c ~/swatch/secure.conf -t ~/swatch/dummy.log</span><span id="cc86" class="nb me iu nx b gz on oc l od oe">*** swatchdog version 3.2.4 (pid:21064) started at 2020. dec. 11., Friday, 15:26:41 CET</span></pre><p id="02d6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了覆盖默认的配置文件，我们使用了<code class="fe of og oh nx b">-c </code>选项。</p><p id="83be" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe of og oh nx b">-t </code>标志是指定日志文件的结尾。就像<code class="fe of og oh nx b">tail -f</code>命令一样。</p><h2 id="906f" class="nb me iu bd mf nc nd dn mj ne nf dp mn lj ng nh mp ln ni nj mr lr nk nl mt nm bi translated">演示</h2><p id="5361" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我为这个演示准备了一个非常简单的Bash脚本来模拟一些工作。它叫做<code class="fe of og oh nx b">script.sh</code>，看起来像这样:</p><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="8e84" class="nb me iu nx b gz ob oc l od oe">#!/bin/bash<br/>for i in {1..100}<br/>do<br/>   echo "Doing something $i" &gt;&gt; dummy.log<br/>         done<br/>   echo "Finished script" &gt;&gt; dummy.log</span></pre><ul class=""><li id="fb3d" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">让我们在另一个终端窗口中执行脚本:</li></ul><p id="b562" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe of og oh nx b">$ bash script.sh</code></p><ul class=""><li id="57d6" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">回到swatchdog的窗口。您应该会看到这样的输出，该模式将以绿色突出显示:</li></ul><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="1057" class="nb me iu nx b gz ob oc l od oe">  Finished script</span></pre><ul class=""><li id="7b88" class="nn no iu lc b ld le lg lh lj np ln nq lr nr lv ns nt nu nv bi translated">现在检查您用户的电子邮件:</li></ul><p id="21f5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe of og oh nx b">$ less /var/mail/user</code></p><p id="66d6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者，如果您安装了<code class="fe of og oh nx b">mail</code>实用程序，请键入<code class="fe of og oh nx b">mail</code>:</p><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="1517" class="nb me iu nx b gz ob oc l od oe">$ mail<br/>"/var/mail/user": 1 message 1 new<br/>&gt;N   1 user             p dec 11 15:26    12/445   Script done</span></pre><h2 id="69cd" class="nb me iu bd mf nc nd dn mj ne nf dp mn lj ng nh mp ln ni nj mr lr nk nl mt nm bi translated">要记住的事情</h2><p id="d8da" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">请注意，swatchdog在前台运行，因此如果您关闭终端，该过程将会结束。您可以在后台运行它，以防止它在您结束会话时停止。为此，使用<code class="fe of og oh nx b">— daemon</code>选项。这样，如果需要，您将能够监视多个日志文件。</p><p id="cbff" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">另一个很酷的特性是你可以指定一个时间窗口来执行一个动作。只需提供<code class="fe of og oh nx b">when</code>选项:</p><p id="d228" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe of og oh nx b">mail=user@domain.com,when=1–6:8–17</code></p><p id="be3f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请注意，对配置文件的更改会在重新启动swatchdog后生效。</p><p id="3354" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">查看<a class="ae kz" href="https://manpages.debian.org/testing/swatch/swatchdog.1p.en.html" rel="noopener ugc nofollow" target="_blank">手册</a>页面了解更多选项。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0bb4" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">格拉格</h1><p id="8019" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">有时，您必须搜索复杂而冗长的日志文件。可视化日志并搜索正则表达式模式可能更有效。</p><p id="eb34" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Glogg是一个多平台GUI工具，可以打开大型日志文件并搜索给定的模式。官方文档描述得最好:<em class="na">“glogg</em>可以看作是<em class="na"> grep </em>和<em class="na"> less </em>的图形化交互组合。”</p><h2 id="928c" class="nb me iu bd mf nc nd dn mj ne nf dp mn lj ng nh mp ln ni nj mr lr nk nl mt nm bi translated">主要优势</h2><ul class=""><li id="15c2" class="nn no iu lc b ld mv lg mw lj oo ln op lr oq lv ns nt nu nv bi translated">它打开大文件的速度很快。</li><li id="7c3f" class="nn no iu lc b ld oi lg oj lj ok ln ol lr om lv ns nt nu nv bi translated">它会保存您的搜索过滤器，这样您下次就不必重新键入它们。</li><li id="d903" class="nn no iu lc b ld oi lg oj lj ok ln ol lr om lv ns nt nu nv bi translated">您可以标记可疑的行，以便以后查看。</li><li id="c474" class="nn no iu lc b ld oi lg oj lj ok ln ol lr om lv ns nt nu nv bi translated">您可以实时监控您的日志文件，就像使用<code class="fe of og oh nx b">tail -f</code>命令一样。</li><li id="46ff" class="nn no iu lc b ld oi lg oj lj ok ln ol lr om lv ns nt nu nv bi translated">它支持搜索模式中的正则表达式、固定字符串和通配符。</li></ul><h2 id="323f" class="nb me iu bd mf nc nd dn mj ne nf dp mn lj ng nh mp ln ni nj mr lr nk nl mt nm bi translated">演示</h2><p id="a84e" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">首先，让我们安装glogg。它在Windows和Unix操作系统上都可用。根据您的要求遵循<a class="ae kz" href="https://glogg.bonnefon.org/download.html" rel="noopener ugc nofollow" target="_blank">安装指南</a>。</p><p id="7e6b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我正在Ubuntu上使用它:</p><pre class="kk kl km kn gu nw nx ny nz aw oa bi"><span id="6c4d" class="nb me iu nx b gz ob oc l od oe">$ apt-get install glogg</span></pre><p id="96bd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以通过在终端中键入<code class="fe of og oh nx b">glogg</code>来直接调用它。默认情况下，它将打开GUI，您可以选择打开哪个文件。</p><p id="7b41" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您也可以提供日志文件的路径作为直接打开它的参数:</p><p id="e196" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe of og oh nx b">$ glogg ~/projects/app.log</code></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj or"><img src="../Images/ed2ca9a1e5d7f25c65df038591db9cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EonJWrANio9tOXXh2_WF9A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">我的电脑截图显示了在glogg中打开的日志的样子</p></figure><p id="7678" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过单击Tools -&gt; Filters，您可以定义要查找的模式。</p><p id="aaba" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，我为单词<em class="na"> api </em>和任何以<em class="na">异常</em>开头的东西创建了过滤器。单击“应用”后，匹配的线条立即以定义的颜色突出显示:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj os"><img src="../Images/f7dc135c64f1d92e0dce1c3a5bdb902e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fb7XPxDBIRNUlQnoqSMnPA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">显示自定义过滤器的我的电脑屏幕截图</p></figure><p id="56ce" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">更多用法请参考<a class="ae kz" href="https://glogg.bonnefon.org/documentation.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="6ad6" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="a7c7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我们已经探索了swatchdog和glogg的一些主要特性。虽然现代日志监控工具可能会提供更多的功能，但它们需要更多的时间来掌握它们的功能。如果你想快速入门，了解这些简单的工具是值得的。</p><p id="f3f4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我希望你今天学到了一些新东西。感谢您的阅读，祝您编码愉快！</p></div></div>    
</body>
</html>