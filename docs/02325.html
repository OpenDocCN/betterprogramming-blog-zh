<html>
<head>
<title>Formatting Dates With the DateTimeFormat Object</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用DateTimeFormat对象设置日期格式</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/formatting-dates-with-the-datetimeformat-object-9c808dc58604?source=collection_archive---------8-----------------------#2019-11-22">https://betterprogramming.pub/formatting-dates-with-the-datetimeformat-object-9c808dc58604?source=collection_archive---------8-----------------------#2019-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3f3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看如何用Intl格式化日期。DateTimeFormat构造函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fc6b3cf949eafffc4dce8f429e33898a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BqHfmwpCFI0jp9kQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">朱莉安娜·科佐斯基在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="8fa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">世界上不同的地方有不同的日期格式。为了处理这个问题，JavaScript有一个<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数，让我们根据不同的地区将日期格式化成不同的格式。</p><p id="9741" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着我们可以为不同的地方设置日期格式，而无需自己操作日期字符串，这让我们的生活变得更加轻松。<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数接受一个地区字符串作为参数。</p><p id="9e9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了用构造函数构造的<code class="fe lv lw lx ly b">DateTimeFormat</code>，我们可以使用<code class="fe lv lw lx ly b">format</code>实例方法，该方法接受一个<code class="fe lv lw lx ly b">Date</code>对象返回一个日期字符串，该日期字符串的日期格式符合您在<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数中指定的地区。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="35f3" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">构造函数和格式化方法</h1><p id="7c6b" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">要使用<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数，我们可以像下面的例子一样使用它:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="23b3" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>console.log(new Intl.DateTimeFormat('en-US').format(date));<br/>console.log(new Intl.DateTimeFormat('fr-ca').format(date));<br/>console.log(new Intl.DateTimeFormat(['ban', 'de']).format(date));</span></pre><p id="5224" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们创建了<code class="fe lv lw lx ly b">Date</code>对象，然后我们使用了<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数，将一个或多个地区作为字符串传入。</p><p id="a105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们通过传入<code class="fe lv lw lx ly b">Date</code>对象来调用<code class="fe lv lw lx ly b">format</code>。第一个例子是log <code class="fe lv lw lx ly b">1/1/2019</code>，因为美国使用MM/DD/YYYY日期格式。</p><p id="d0fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个示例将记录<code class="fe lv lw lx ly b">2019–01–01</code>，因为法裔加拿大人的日期是YYYY-MM-DD格式。第三个示例采用了一个数组，其中有多个区域设置，最右边的区域设置是左边区域设置的备用区域设置。</p><p id="e743" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，由于数组的第一个条目中有一个无效的区域设置字符串<code class="fe lv lw lx ly b">ban</code>，我们使用德国的日期格式<code class="fe lv lw lx ly b">de</code>来格式化<code class="fe lv lw lx ly b">Date</code>对象，所以我们得到<code class="fe lv lw lx ly b">1.1.2019</code>，因为德国使用DD。年月日日期格式。</p><p id="500d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的例子中我们可以看到，<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数接受一个区域设置字符串或一个区域设置字符串数组。它还接受地区字符串的Unicode扩展键，这样我们就可以将它们附加到我们的语言标签中。</p><p id="0d28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">支持设置编号系统的扩展键<code class="fe lv lw lx ly b">nu</code>、设置日期格式的日历的<code class="fe lv lw lx ly b">ca</code>、小时循环的<code class="fe lv lw lx ly b">hc</code>。</p><p id="6c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">nu</code>的可能值可以是<code class="fe lv lw lx ly b">arab</code>、<code class="fe lv lw lx ly b">arabext</code>、<code class="fe lv lw lx ly b">bali</code>、<code class="fe lv lw lx ly b">beng</code>、<code class="fe lv lw lx ly b">deva</code>、<code class="fe lv lw lx ly b">fullwide</code>、<code class="fe lv lw lx ly b">gujr</code>、<code class="fe lv lw lx ly b">guru</code>、<code class="fe lv lw lx ly b">hanidec</code>、<code class="fe lv lw lx ly b">khmr</code>、<code class="fe lv lw lx ly b">knda</code>、<code class="fe lv lw lx ly b">laoo</code>、<code class="fe lv lw lx ly b">latn</code>、<code class="fe lv lw lx ly b">limb</code>、<code class="fe lv lw lx ly b">mlym</code>、<code class="fe lv lw lx ly b">mong</code>、<code class="fe lv lw lx ly b">mymr</code>、<code class="fe lv lw lx ly b">orya</code>、<code class="fe lv lw lx ly b">tamldec</code>、<code class="fe lv lw lx ly b">telu</code>、<code class="fe lv lw lx ly b">thai</code>、<code class="fe lv lw lx ly b">tibt</code>。</p><p id="0e1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">ca</code>的可能值包括<code class="fe lv lw lx ly b">buddhist</code>、<code class="fe lv lw lx ly b">chinese</code>、<code class="fe lv lw lx ly b">coptic</code>、<code class="fe lv lw lx ly b">ethiopia</code>、<code class="fe lv lw lx ly b">ethiopic</code>、<code class="fe lv lw lx ly b">gregory</code>、<code class="fe lv lw lx ly b">hebrew</code>、<code class="fe lv lw lx ly b">indian</code>、<code class="fe lv lw lx ly b">islamic</code>、<code class="fe lv lw lx ly b">iso8601</code>、<code class="fe lv lw lx ly b">japanese</code>、<code class="fe lv lw lx ly b">persian</code>、<code class="fe lv lw lx ly b">roc</code>。</p><p id="a247" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">hc</code>的可能值包括<code class="fe lv lw lx ly b">h11</code>、<code class="fe lv lw lx ly b">h12</code>、<code class="fe lv lw lx ly b">h23</code>、<code class="fe lv lw lx ly b">h24</code>。例如，要根据佛教日历格式化日期，我们可以写:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="ea49" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>console.log(new Intl.DateTimeFormat('en-US-u-ca-buddhist').format(date));</span></pre><p id="73bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们在<code class="fe lv lw lx ly b">console.log</code>中得到<code class="fe lv lw lx ly b">1/1/2562</code>，因为佛教日历的年份是公元前545年。</p><p id="5440" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二个参数接受一个对象，该对象允许我们在其属性中设置各种选项来格式化日期。</p><p id="0265" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">localeMatcher</code>选项指定要使用的区域匹配算法。可能的值有<code class="fe lv lw lx ly b">lookup</code>和<code class="fe lv lw lx ly b">best fit</code>。查找算法搜索区域设置，直到找到适合正在比较的字符串字符集的区域设置。</p><p id="a533" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">best fit</code>找到至少比<code class="fe lv lw lx ly b">lookup</code>算法更适合的语言环境。<code class="fe lv lw lx ly b">timeZone</code>选项让我们设置格式化日期的时区。</p><p id="61a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最基本的实现只识别UTC，但其他实现可能识别IANA时区数据库中的IANA时区名称，如<code class="fe lv lw lx ly b">Asia/Shanghai</code>、<code class="fe lv lw lx ly b">Asia/Kolkata</code>、<code class="fe lv lw lx ly b">America/New_York</code>。</p><p id="d8f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">hour12</code>选项指定格式是12小时制还是24小时制。默认值取决于区域设置。它覆盖了第一个参数中的<code class="fe lv lw lx ly b">hc</code>语言标签。</p><p id="4148" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个<code class="fe lv lw lx ly b">true</code>或<code class="fe lv lw lx ly b">false</code>值，其中<code class="fe lv lw lx ly b">true</code>表示将日期时间格式化为12小时制。<code class="fe lv lw lx ly b">hourCycle</code>选项有可能的值<code class="fe lv lw lx ly b">h11</code>、<code class="fe lv lw lx ly b">h12</code>、<code class="fe lv lw lx ly b">h23</code>、<code class="fe lv lw lx ly b">h24</code>，并覆盖<code class="fe lv lw lx ly b">hc</code>语言标签。<code class="fe lv lw lx ly b">hour12</code>如果指定，优先于该选项。</p><p id="ece2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">formatMatcher</code>属性指定要使用的匹配算法。可能的值是<code class="fe lv lw lx ly b">basic</code>和<code class="fe lv lw lx ly b">best fit</code>。<code class="fe lv lw lx ly b">best fit</code>是默认值。</p><p id="9c8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将日期对象匹配到正确的格式，需要以下日期时间子集:</p><ul class=""><li id="831f" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">weekday</code>、<code class="fe lv lw lx ly b">year</code>、<code class="fe lv lw lx ly b">month</code>、<code class="fe lv lw lx ly b">day</code>、<code class="fe lv lw lx ly b">hour</code>、<code class="fe lv lw lx ly b">minute</code>、<code class="fe lv lw lx ly b">second</code></li><li id="4e58" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">weekday</code>、<code class="fe lv lw lx ly b">year</code>、<code class="fe lv lw lx ly b">month</code>、<code class="fe lv lw lx ly b">day</code></li><li id="73cd" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">year</code>、<code class="fe lv lw lx ly b">month</code>、<code class="fe lv lw lx ly b">day</code></li><li id="5352" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">year</code>，<code class="fe lv lw lx ly b">month</code></li><li id="b7a9" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">month</code>，<code class="fe lv lw lx ly b">day</code></li><li id="aa19" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">hour</code>、<code class="fe lv lw lx ly b">minute</code>、<code class="fe lv lw lx ly b">second</code></li><li id="742b" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">hour</code>，<code class="fe lv lw lx ly b">minute</code></li></ul><p id="a085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">weekday</code>代表工作日值，可能的值有:</p><ul class=""><li id="9958" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">long</code>(例如<code class="fe lv lw lx ly b">Friday</code>)</li><li id="ba0e" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">short</code>(如<code class="fe lv lw lx ly b">Fri</code>)</li><li id="5475" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">“narrow</code>(如<code class="fe lv lw lx ly b">T</code>)。请注意，对于某些地区，两个工作日可能具有相同的窄样式。比如<code class="fe lv lw lx ly b">Tuesday</code>的窄式也是<code class="fe lv lw lx ly b">T</code>。</li></ul><p id="a21b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">era</code>代表时代，可能的值有:</p><ul class=""><li id="92bb" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">long</code>(例如<code class="fe lv lw lx ly b">Anno Domini</code>)</li><li id="786d" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">short</code>(例如<code class="fe lv lw lx ly b">AD</code>)</li><li id="1701" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">narrow</code>(例如<code class="fe lv lw lx ly b">A</code>)</li></ul><p id="fa0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">year</code>代表年份。可能的值有:</p><ul class=""><li id="de07" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">numeric</code>(例如<code class="fe lv lw lx ly b">2019</code>)</li><li id="f847" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">2-digit</code>(例如<code class="fe lv lw lx ly b">19</code>)</li></ul><p id="f4fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">month</code>是月份的表示。可能的值有:</p><ul class=""><li id="ab05" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">numeric</code>(如<code class="fe lv lw lx ly b">2</code>)</li><li id="9e75" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">2-digit</code>(如<code class="fe lv lw lx ly b">02</code>)</li><li id="1cef" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">long</code>(如<code class="fe lv lw lx ly b">February</code>)</li><li id="aa0a" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">short</code>(如<code class="fe lv lw lx ly b">Feb</code>)</li><li id="6419" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">narrow</code>(如<code class="fe lv lw lx ly b">M</code>)。请注意，对于某些地区，两个月可能具有相同的窄样式(例如，<code class="fe lv lw lx ly b">May</code>的窄样式也是<code class="fe lv lw lx ly b">M</code>)。</li></ul><p id="3ef8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">day</code>代表日子。可能的值有:</p><ul class=""><li id="336a" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">numeric</code>(如<code class="fe lv lw lx ly b">2</code>)</li><li id="d006" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">2-digit</code>(如<code class="fe lv lw lx ly b">02</code>)</li></ul><p id="d4b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">hour</code>是小时的表示。可能的值有<code class="fe lv lw lx ly b">numeric</code>、<code class="fe lv lw lx ly b">2-digit</code>。</p><p id="f843" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">minute</code>是分钟的表示。可能的值有<code class="fe lv lw lx ly b">numeric</code>、<code class="fe lv lw lx ly b">2-digit</code>。</p><p id="ccd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">second</code>是第二种的表征。可能的值有<code class="fe lv lw lx ly b">numeric</code>、<code class="fe lv lw lx ly b">2-digit</code>。</p><p id="ff6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">timeZoneName</code>是时区名称的表示。可能的值有:</p><ul class=""><li id="e986" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">long</code>(如<code class="fe lv lw lx ly b">Pacific Standard Time</code>)</li><li id="55a3" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe lv lw lx ly b">short</code>(例如<code class="fe lv lw lx ly b">GMT-8</code>)</li></ul><p id="7de2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面每个组件属性的默认值是<code class="fe lv lw lx ly b">undefined</code>，但是如果所有组件都是<code class="fe lv lw lx ly b">undefined</code>，那么<code class="fe lv lw lx ly b">year</code>、<code class="fe lv lw lx ly b">month</code>和<code class="fe lv lw lx ly b">day</code>都被假定为<code class="fe lv lw lx ly b">numeric</code>。</p><p id="d018" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是使用这些选项的示例:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="f01c" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric'<br/>};<br/>console.log(new Intl.DateTimeFormat('en-ca', options).format(date));</span></pre><p id="bdee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们将区域设置为加拿大英语，在<code class="fe lv lw lx ly b">options</code>对象中，我们将<code class="fe lv lw lx ly b">weekday</code>设置为<code class="fe lv lw lx ly b">long</code>、<code class="fe lv lw lx ly b">year</code>设置为<code class="fe lv lw lx ly b">numeric</code>、<code class="fe lv lw lx ly b">month</code>设置为<code class="fe lv lw lx ly b">long</code>、<code class="fe lv lw lx ly b">day</code>设置为<code class="fe lv lw lx ly b">numeric</code>，这样我们就可以获得英文的完整工作日名称、数字形式的年份、全名形式的月份以及数字形式的<code class="fe lv lw lx ly b">day</code>。</p><p id="7bb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">console.log</code>将记录“2019年1月1日，星期二”。上面的示例可以添加一个时区，如下例所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="fd11" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric',<br/>  timeZone: 'America/Vancouver',<br/>  timeZoneName: 'long'<br/>};<br/>console.log(new Intl.DateTimeFormat('en-ca', options).format(date));</span></pre><p id="8143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的示例中，我们添加了<code class="fe lv lw lx ly b">timeZone</code>和<code class="fe lv lw lx ly b">timeZoneLong</code>，以便显示时区，从而得到“太平洋标准时间2019年1月1日，星期二”。</p><p id="de28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数同样可以很好地处理非英语格式。例如，如果我们想要将日期格式化为中文，我们可以更改区域设置并保持选项与上面的相同，如下面的代码所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="9725" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric',<br/>  timeZone: 'America/Vancouver',<br/>  timeZoneName: 'long'<br/>};<br/>console.log(new Intl.DateTimeFormat('zh-Hant', options).format(date));</span></pre><p id="5c8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">Then, we get “2019年1月1日 星期二 太平洋標準時間”, which is the same as “Tuesday, January 1, 2019, Pacific Standard Time” in traditional Chinese.</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8af7" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">其他实例方法</h1><p id="d47e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">除了<code class="fe lv lw lx ly b">format()</code>方法之外，<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数对象的实例也有一些实例方法。</p><p id="2e2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它还有<code class="fe lv lw lx ly b">formatToParts()</code>方法来返回表示日期字符串不同部分的对象数组。<code class="fe lv lw lx ly b">resolvedOptions()</code>方法返回一个新对象，它的属性反映了我们在对象初始化过程中计算的区域设置和格式选项。</p><p id="1342" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">formatRange()</code>方法接受两个<code class="fe lv lw lx ly b">Date</code>对象作为参数，并根据我们实例化<code class="fe lv lw lx ly b">DateTimeFormat</code>对象时提供的语言环境和选项，以最简洁的方式格式化日期范围。</p><p id="6429" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，它有一个<code class="fe lv lw lx ly b">formatRangeToParts()</code>方法，该方法接受两个<code class="fe lv lw lx ly b">Date</code>对象作为参数，并根据我们实例化<code class="fe lv lw lx ly b">DateTimeFormat</code>对象时提供的区域设置和选项，以最简洁的方式格式化日期范围，并返回对象数组中的日期时间部分。</p><p id="7a17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有以下调用<code class="fe lv lw lx ly b">formatRangeToParts()</code>方法的代码:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="9a45" class="nh mh it ly b gy ni nj l nk nl">const startDate = new Date(2019, 0, 1, 0, 0, 0);<br/>const endDate = new Date(2019, 0, 2, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric',<br/>  timeZone: 'America/Vancouver',<br/>  timeZoneName: 'long'<br/>};<br/>const dateRange = new Intl.DateTimeFormat('zh-Hant', options).formatRangeToParts(startDate, endDate)<br/>console.log(dateRange);</span></pre><p id="238c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们记录了以下日期和时间部分:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="f88a" class="nh mh it ly b gy ni nj l nk nl">[<br/>  {<br/>    "type": "year",<br/>    "value": "2019",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": "年",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "month",<br/>    "value": "1",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": "月",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "day",<br/>    "value": "1",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": "日 ",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "weekday",<br/>    "value": "星期二",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": " ",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "timeZoneName",<br/>    "value": "太平洋標準時間",<br/>    "source": "startRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": " – ",<br/>    "source": "shared"<br/>  },<br/>  {<br/>    "type": "year",<br/>    "value": "2019",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": "年",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "month",<br/>    "value": "1",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": "月",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "day",<br/>    "value": "2",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": "日 ",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "weekday",<br/>    "value": "星期三",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": " ",<br/>    "source": "endRange"<br/>  },<br/>  {<br/>    "type": "timeZoneName",<br/>    "value": "太平洋標準時間",<br/>    "source": "endRange"<br/>  }<br/>]</span></pre><p id="f969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们从上面的控制台输出中看到的，我们在数组的每个条目中获得了日期和时间部分，其中<code class="fe lv lw lx ly b">startDate</code>部分在前，<code class="fe lv lw lx ly b">endDate</code>部分在数组的后面。</p><p id="8588" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们调用<code class="fe lv lw lx ly b">formatRange()</code>方法，如下面的代码所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="3215" class="nh mh it ly b gy ni nj l nk nl">const startDate = new Date(2019, 0, 1, 0, 0, 0);<br/>const endDate = new Date(2019, 0, 2, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric',<br/>  timeZone: 'America/Vancouver',<br/>  timeZoneName: 'long'<br/>};<br/>const dateRange = new Intl.DateTimeFormat('en', options).formatRange(startDate, endDate)<br/>console.log(dateRange);</span></pre><p id="2686" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="b502" class="nh mh it ly b gy ni nj l nk nl">"Tuesday, January 1, 2019, Pacific Standard Time – Wednesday, January 2, 2019, Pacific Standard Time"</span></pre><p id="d6be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<code class="fe lv lw lx ly b">console.log</code>开始。</p><p id="5a89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了调用<code class="fe lv lw lx ly b">resolvedOptions</code>方法，我们可以编写下面的代码:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="0231" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric',<br/>  timeZone: 'America/Vancouver',<br/>  timeZoneName: 'long'<br/>};<br/>const resolvedOptions = new Intl.DateTimeFormat('en', options).resolvedOptions(date)<br/>console.log(resolvedOptions);</span></pre><p id="ed20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们得到我们传入的选项来格式化日期:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="f0ab" class="nh mh it ly b gy ni nj l nk nl">{<br/>  "locale": "en",<br/>  "calendar": "gregory",<br/>  "numberingSystem": "latn",<br/>  "timeZone": "America/Vancouver",<br/>  "weekday": "long",<br/>  "year": "numeric",<br/>  "month": "long",<br/>  "day": "numeric",<br/>  "timeZoneName": "long"<br/>}</span></pre><p id="1851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">console.log</code>中。</p><p id="c2d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用<code class="fe lv lw lx ly b">formatToParts()</code>方法，我们可以像使用<code class="fe lv lw lx ly b">format()</code>方法一样使用它，如以下代码所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="1379" class="nh mh it ly b gy ni nj l nk nl">const date = new Date(2019, 0, 1, 0, 0, 0);<br/>const options = {<br/>  weekday: 'long',<br/>  year: 'numeric',<br/>  month: 'long',<br/>  day: 'numeric',<br/>  timeZone: 'America/Vancouver',<br/>  timeZoneName: 'long'<br/>};<br/>const dateParts = new Intl.DateTimeFormat('en', options).formatToParts(date)<br/>console.log(dateParts);</span></pre><p id="7829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们在<code class="fe lv lw lx ly b">console.log</code>中得到格式化日期的部分，如下图所示:</p><pre class="kj kk kl km gt nd ly ne nf aw ng bi"><span id="c93f" class="nh mh it ly b gy ni nj l nk nl">[<br/>  {<br/>    "type": "weekday",<br/>    "value": "Tuesday"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": ", "<br/>  },<br/>  {<br/>    "type": "month",<br/>    "value": "January"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": " "<br/>  },<br/>  {<br/>    "type": "day",<br/>    "value": "1"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": ", "<br/>  },<br/>  {<br/>    "type": "year",<br/>    "value": "2019"<br/>  },<br/>  {<br/>    "type": "literal",<br/>    "value": ", "<br/>  },<br/>  {<br/>    "type": "timeZoneName",<br/>    "value": "Pacific Standard Time"<br/>  }<br/>]</span></pre><p id="56f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所见，<code class="fe lv lw lx ly b">Intl.DateTimeFormat</code>构造函数对于格式化不同地区的日期非常有用。它消除了格式化日期时的许多麻烦。</p><p id="39c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">构造函数将一个或多个区域设置作为第一个参数，将各种选项作为第二个参数。</p><p id="4b8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它可以将日期格式化成一个字符串，也可以将它们格式化并分解成多个部分。这在格式化不同地区的日期时节省了很多麻烦，因为我们不必做任何日期字符串操作。</p></div></div>    
</body>
</html>