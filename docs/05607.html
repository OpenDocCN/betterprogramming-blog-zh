<html>
<head>
<title>What Is the ReplaySubject in RxSwift?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RxSwift中的ReplaySubject是什么？</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/what-is-the-replaysubject-in-rxswift-57b0f32d3660?source=collection_archive---------19-----------------------#2020-07-21">https://betterprogramming.pub/what-is-the-replaysubject-in-rxswift-57b0f32d3660?source=collection_archive---------19-----------------------#2020-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e0e7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及如何缓存您的数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/839eebf2dccb6c64688e7f7d1ac45086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*19QXdQ49LtfQqlb7cXl8aA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者照片。</p></figure><p id="6f6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将了解到<a class="ae lu" href="https://github.com/ReactiveX/RxSwift" rel="noopener ugc nofollow" target="_blank"> RxSwift </a>的便捷<code class="fe lv lw lx ly b">ReplaySubject</code>。</p><p id="efff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">简而言之，它允许我们向未来的观察者重放发射的元素。我们可以定义一个<code class="fe lv lw lx ly b">bufferSize</code>来指定要重放的元素的最大数量。</p><p id="d4fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您希望存储接收到的数据并将其提供给所有未来的订阅者时，它会很有用。这正是我们在这篇文章中要达到的目的。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="f567" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">我们开始吧</h1><p id="6bff" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">首先，用1的指定<code class="fe lv lw lx ly b">bufferSize</code>初始化<code class="fe lv lw lx ly b">ReplaySubject</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c29a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们创建一个方法，从Unsplash中检索一个随机图像，并将<code class="fe lv lw lx ly b">Data</code>发送到<code class="fe lv lw lx ly b">randomPhotoSubject</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6368" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，我们也在<code class="fe lv lw lx ly b">viewDidLoad()</code>方法内部调用它。</p><p id="d3ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在最有趣的部分来了:为这个主题订阅两个观察者。让我们在触发<code class="fe lv lw lx ly b">getRandomPhoto()</code>方法后立即添加第一个订阅，十秒钟后添加另一个订阅:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="3f24" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果正是我们想要的:即使请求已经完成，第二个观察者也会收到与第一个观察者相同的数据:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/39c1375d136d49c6a6ee1da8db0b5e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*awD9LI7yQx83hck6DS6IJA.png"/></div></div></figure><p id="90cf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我们所见，<code class="fe lv lw lx ly b">ReplaySubject</code>使得缓冲数据变得容易。它还消除了创建侧属性来获取以前发出的数据的需要，这使得我们的代码对读者来说更加简洁明了。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="3d37" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">包扎</h1><p id="23d2" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">对更多RxSwift文章感兴趣？那么你可能会发现这些很有帮助:</p><ul class=""><li id="b4a3" class="ng nh it la b lb lc le lf lh ni ll nj lp nk lt nl nm nn no bi translated"><a class="ae lu" href="https://medium.com/better-programming/replace-delegation-with-rxswift-32ad18d75140" rel="noopener">用RxSwift替换委托</a></li><li id="472b" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated"><a class="ae lu" href="https://medium.com/better-programming/how-to-implement-uitableview-and-uicollectionview-with-rxdatasources-1afcd68729bf" rel="noopener">如何用RxDataSources实现UITableView和UICollectionView】</a></li><li id="35f3" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated"><a class="ae lu" href="https://medium.com/better-programming/mvvm-in-swift-infinite-scrolling-and-image-loading-d47780b06e23" rel="noopener">在Swift 5中实施反应式MVVM架构</a></li><li id="9d4b" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated"><a class="ae lu" href="https://medium.com/better-programming/how-to-create-a-timer-in-rxswift-578bf8712678" rel="noopener">如何在RxSwift中创建定时器</a></li><li id="ede7" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated"><a class="ae lu" href="https://medium.com/better-programming/rxswift-unit-testing-explained-in-3-minutes-c024b7a26d" rel="noopener"> RxSwift单元测试在2分钟内说明</a></li></ul><p id="a35e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p></div></div>    
</body>
</html>