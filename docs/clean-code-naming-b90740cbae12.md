# 干净代码:命名

> 原文：<https://betterprogramming.pub/clean-code-naming-b90740cbae12>

## 命名变量、函数、类等的最佳实践

![](img/f3945fadc53c7c273d132b77e69116f0.png)

照片由 [Florian Olivo](https://unsplash.com/@florianolv?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 在 [Unsplash](https://unsplash.com/s/photos/coding?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄

欢迎阅读干净代码系列的第一部分。这个系列将受到罗伯特·c·马丁(鲍勃叔叔)的《干净代码》一书的高度启发，有时还会令人尴尬地抄袭该书。我强烈推荐阅读这本书。这个系列与原著相去甚远。

书中有很多代码示例，大部分都是 Java 提供的。我不会遍历所有的代码示例，但如果我确实使用了一些，我会使用 Python 来翻译或制作示例。

# 什么是干净代码？

干净的代码应该具有:

*   全面测试覆盖
*   完整的错误处理
*   没有重复
*   高表现力
*   最小数量的实体，如类、函数、方法和…
*   性能接近最佳
*   对第三方的依赖性最小

# 有意义的名字

名字是代码的最小组成部分。名字无处不在:函数、类、文件、组件和容器都有名字。名字也是干净代码的基本组成部分。一个好名字有一些硬性规定。

## 使用透露意图的名字

一个好名字应该只回答三个问题。

我知道这听起来很简单，但是要取一个好名字需要很多时间。但是，从长远来看，它会节省更多的钱。

一个名字不应该有注释来表达它的意图。看看这个例子:

```
# Dirty Code d = 100 # elapsed time in days # Clean Code elapsed_time_in_days = 100
```

在第一种情况下，您需要浏览注释。这一次没关系。但是无论何时使用变量`d`，你都必须进行初始化，以获得变量的意图。但是第二种情况，`elapsed_time_in_days`，本身就很有表现力。

不要给你的变量取一个单字母的名字。一个字母的名字从来没有表达。他们没有透露他们的意图。也有一些例外，比如`for`循环中的字母 *i* 、 *j* 和 *k* 。但是，千万不要使用小写字母 *l* (el)、大写字母 *I* (eye)或大写字母 *O* (oh)作为名称，因为程序员容易将它们分别与 1 和 0 混淆。

## 避免虚假信息

避免特定于平台的名字，比如`htop` 和`hp`。

不要用`dataset_generator_for_cat_with_user_mobile_1`、`dataset_generator_for_cat_with_user_mobile_2`之类变化不大的名字。在这种情况下，直到最后一个字母，你才会得到差异，而且大多数时候，你会忽略这种差异。

## 进行有意义的区分

变量命名应该有足够的区别。如果作用域中有一个同名的变量，不要只追加一个数字:`a1`，`a2`是 intent-revising 的反义词。

不要用意思相近的名字。比如，`product_data`和`product_info`就没有恰当的区分。光看名字，不能假设这两个变量的意图。这些被称为*噪声字*。其他一些干扰词有`a`、`an`和`the`。

不要在变量名后面附加变量类型。使变量名具有很强的表达力，这样你就可以通过变量名来理解变量的类型。例如，`account_name`永远不能是浮点数。它必须并且应该是一个字符串。也有一些例外，像`id`，可以是字符串，也可以是数字。但是在整个项目中应该遵循这个惯例，这样从事该项目的程序员就会知道`id`是一个数字、一个字符串还是其他什么。

## 使用易发音的名字

如果你不会发音，你就不能像个白痴一样讨论这个问题。

有时候一个简短的例子比一大堆文字更好:

```
# Poor Name gen_ymdhms = "1591442356268" # Generation year, month, date, hour, min, sec # Good Name
genration_timestamp = "1591442356268"
```

## 使用可搜索的名称

尽可能避免使用单字母名称。如果需要使用单字母名称，请仅在局部范围内使用，而不要在全局范围内使用。

避免使用像`sum`、`temp`或`flag`这样的常用词，因为它们似乎被许多方法和类使用，因此不是便于搜索的名称。

## 避免编码

避免使用像匈牙利符号或成员前缀这样的编码。以前 IDE 不像现在这么智能的时候就用过。当前的 ide 足够聪明，可以给我们关于类的类型或成员变量的建议。我们不想让更多的信息塞满我们的大脑。

另一方面，应该在整个项目中维护特定于语言的编码，例如 Python 中的 [snake_case](https://en.wikipedia.org/wiki/Snake_case) 和 JavaScript 中的 [camel case](https://en.wikipedia.org/wiki/Camel_case) 。

## 避免心理映射

程序员确实很聪明。但是代码不是炫耀你聪明的地方。显然，您可以记住`r`是去掉了主机和方案的 URL 的变量名。但是阅读你的代码的人不知道这种心理映射。使用正确表达变量意图的名称。

## 类别名

类名应该是名词或名词短语。按照设计，类是相同类型的方法和变量的封装，因此它们应该有一个共同的名字。无论如何，类都不应该是动词。

## 函数/方法名

函数应该是动词或动词短语。根据设计，一个功能应该只有一个职责。如果名字不是动词，那么要么是你命名错了，要么是架构有问题。

## 为每个概念选择一个词

避免使用不同但相似的词来定义相同的概念。例如，不要在同一个项目中使用`fetch`、`get`和`retrieve`来承担相同的责任。

## 不要用同一个词表达不同的概念

避免用同一个词表达完全不同的概念。当你打算遵循前面的规则时，你会得到很多同名的变量。也许在整个项目中使用`add`来添加或连接两个现有的值。但是如果我们用它来给一个现有的变量追加一个新值，这将会令人困惑。`append`似乎是这种方法更合理的名称。

## 使用解决方案域名

你的代码会被程序员阅读和维护，所以用解决方案域名没问题。例如，在机器学习上下文中，`data_generator`是一个很好的名称。看到这个名字的人会知道它是一个数据生成器，是一个迭代器。

## 使用有问题的域名

如果没有可用的解决方案域名，则使用特定于域的名称。在这种情况下，程序员可以向领域专家询问其含义。

## 添加有意义的上下文

作为程序员，我们的首要职责是选择尽可能有表现力的名字。但是有时不可能用变量名给出上下文。在这种情况下，首先尝试将变量包含在一个有意义的类或函数中。例如，`name`、`city`和`district`应该用类名`Address`括起来。如果这根本不可能，就用上下文的名称作为变量的前缀。但是记住，那是万不得已，所以要经过缜密的思考后再用。

我知道对于一件简单的事情来说，有很多该做的和不该做的。但是相信我，这是我在小小的软件工程生涯中遇到的最棘手的问题。