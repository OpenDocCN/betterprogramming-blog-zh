<html>
<head>
<title>How to Improve Your Code Reviews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何改进你的代码审查</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-improve-your-code-reviews-f5e9d5a6536c?source=collection_archive---------8-----------------------#2020-07-02">https://betterprogramming.pub/how-to-improve-your-code-reviews-f5e9d5a6536c?source=collection_archive---------8-----------------------#2020-07-02</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="3aaa" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">反馈可能很难。这里有一个满足你的拉动式需求的方法</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/55790a7e5e28631c9b31db2607fb0ecb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQVbk8hY0ZZeixDIUJWdOQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">GitHub上的Pull请求评论(图片由作者提供)</p></figure><p id="a0ed" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">大约二十年前，我开始在一家使用代码评审的公司做开发人员。那时，我从未做过代码审查，我的代码也从未被审查过。</p><p id="cffb" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">对于我的第一个项目，我必须使用<a class="ae lv" href="https://docs.microsoft.com/en-us/cpp/atl/active-template-library-atl-concepts?view=vs-2019" rel="noopener ugc nofollow" target="_blank"> ATL框架</a>用C++创建一个COM组件。ATL使用引用计数来管理对象的生存期。引用计数意味着当你使用完对象时，你必须调用<code class="fe lw lx ly lz b">Release()</code>。如果您忘记调用它，就会导致内存泄漏。</p><p id="ab7b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我记得我第一次代码评审的结果，就好像是昨天一样。太戏剧化了。</p><p id="266e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我不记得确切的数字，但我肯定有100多条评论。评论者提到的每一个<code class="fe lw lx ly lz b">Release()</code>我都忘了。评论的语气很严厉。我挣扎着。</p><p id="990e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我是一个如此糟糕的开发者吗？</p><p id="408a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">目前，我已经做了十多年的代码评审工作。执行代码评审是提高代码库质量并创造学习和尊重文化的最好方法。</p><p id="1938" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">然而，成功的代码评审有一个特定的方法。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="8962" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">为什么代码审查很重要？</h1><p id="d5f1" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">打开上一本关于编程或其他技术主题的书，在书的开头找一个标题为“致谢”的段落。</p><p id="d41f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">我敢肯定，在这一段，作者感谢他的编辑帮助创造了一个更好的版本。编辑和评论是写书的标准程序。</p><p id="25a6" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">为什么软件开发不一样呢？</p><p id="4862" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在代码审查期间，另一个开发人员检查您的工作是否有错误。开发人员会指出改进之处，例如:</p><ul class=""><li id="bfd4" class="ne nf iu lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">难以理解的代码</li><li id="3a20" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">不清楚的名字</li><li id="75c8" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">注释代码</li><li id="03b2" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">未经测试的代码</li></ul><p id="221f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">除了寻求改进，评审者还从解决方案中学习。您应该将代码审查视为成长的机会，以及安全网——而不是批评的机会。</p><p id="9a23" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">众所周知，代码审查也可以防止错误。IBM所做的研究发现，每一个小时的检查妨碍了大约100个小时的相关工作(测试和缺陷纠正)。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="47f9" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">自动化可以自动化的东西</h1><p id="dd4b" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">在我们继续看我的成功代码评审的秘诀之前，我们必须谈谈自动化。</p><p id="2cbb" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">不要在检查风格错误的代码评审中浪费时间。相反，在风格指南上达成一致，并使用linter或静态分析工具来验证该风格。</p><p id="9bea" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">此外，确保可以运行一个完整的构建来验证一切仍然正确构建，并且所有单元测试都成功。</p><p id="e484" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">自动化所有这些任务将使评审者的贡献更有价值。评审者可以更多地关注其他方面，比如功能错误和可读性。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="0a0f" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">代码审查的方法</h1><p id="0945" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">我的成功代码审查的方法包括两组成分，一组是给修改的作者，另一组是给审查者。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/5bc9b6c37f3fa2145700fa2f905b0d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gOv0IaRk2P7EMypC"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae lv" href="https://unsplash.com/@open_photo_js?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jasmin Sessler </a>制作的食谱的配料</p></figure></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="3b9c" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">作者的成分</h1><p id="04ff" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">作为变更的作者，您有责任让评审者容易理解您的代码评审。</p><h2 id="c941" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">变更集的大小应该很小</h2><p id="e227" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">没有人喜欢做包含数千行代码变更的代码评审。这将需要很长时间，并且由于大量的更改，很有可能需要重新审查。研究表明，变更集的大小会影响注释的有用性。随着变更集变得越来越大，有用的注释数量会减少。</p><p id="0c5b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">因此，请确保变更集的大小较小，比如少于250行。审查的质量会更高。</p><h2 id="320f" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">校对你的差异</h2><p id="172f" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">我无法告诉你我通过校对我的拉取请求发现了多少次简单的错误。大多数工具，如GitHub、Bitbucket或Azure DevOps，都包含在发送pull请求之前校对diff的工具。</p><p id="50cc" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">作为一名作者，您应该经常校对您的代码更改，以找到常见的错误，以便审阅者可以关注其他点。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="590c" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">评论者的成分</h1><h2 id="eda7" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">以改进为目标，而不是追求完美</h2><p id="2d14" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">尝试将代码提高一个档次，而不是使其完美。这有助于我从分数的角度来考虑这个问题。当我收到一个以D开头的pull请求时，我会帮助作者把它变成C——虽然不完美，但比原来好了。</p><p id="b715" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这样不会把整个代码库降级为C吗？我不这么认为。我发现当我帮助一个开发人员从D到C时，他们发送的下一个拉请求将从C开始，在几个拉请求中，他们发送给我的评审以Bs开始，在评审结束时变成as。</p><h2 id="118a" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">尊重审查的范围</h2><p id="bf29" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">简单地说，只审查被改变的代码。如果看到修改后的代码附近有你觉得应该修复的地方，可以好心的请作者修复。但是请记住，这不在审查范围之内。</p><p id="3dcd" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果拉请求没有改变一行，那么它就超出了范围。</p><h2 id="c116" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">评论的语气</h2><p id="f8aa" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">我发现评审的基调是代码评审最重要的方面之一。总是试着问开放式的问题，而不是发表固执己见的声明。提供其他选择或可能的解决方法。但是不要坚持那些替代方案或变通方法。</p><p id="ac9e" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果你有不明白的地方，假设你作为一个评审者，遗漏了什么，请求澄清。试着用<em class="of">这个词来考虑</em>。比如:“你考虑过把这个重构成一个单一的方法吗？”或者“考虑重命名此方法以提高可读性。”</p><h2 id="b77f" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">及时审查</h2><p id="9460" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">尝试尽快查看拉取请求。如果你首先必须完成你的任务，让作者知道你什么时候开始评论。</p><h2 id="f694" class="nt mi iu bd mj nu nv dn mn nw nx dp mr li ny nz mt lm oa ob mv lq oc od mx oe bi translated">使用审查清单</h2><p id="3eb3" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">您应该尝试创建一个清单，在执行代码评审时作为参考。看看下面的几个类别，你会从中获得一些灵感，并把它们放在你的清单上:</p><ul class=""><li id="29eb" class="ne nf iu lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">稳健性</li><li id="4984" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">正确性</li><li id="924f" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">设计</li><li id="2217" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">可维护性</li><li id="4d40" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">REST API设计</li><li id="c00f" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">全球化</li><li id="9426" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">表演</li><li id="e349" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">安全性</li><li id="606f" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">可量测性</li><li id="a9fd" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">易测性</li></ul><p id="9b65" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">另一个灵感来源是ISO 25010，一个定义软件系统质量特征的标准。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h1 id="6e40" class="mh mi iu bd mj mk ml mm mn mo mp mq mr ka ms kb mt kd mu ke mv kg mw kh mx my bi translated">结论</h1><p id="87df" class="pw-post-body-paragraph kz la iu lb b lc mz jv le lf na jy lh li nb lk ll lm nc lo lp lq nd ls lt lu in bi translated">我确信代码审查，如果做得正确，可以改进你的代码库，并创造一种学习和尊重的文化。</p><p id="e952" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这篇文章描述了我对好的代码评审的定义。我为作者和评论者列出了几个要素，以确保你有一个良好的开端。</p><p id="3f2f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">要获得更多信息，我建议阅读其他人和组织关于他们的代码评审最佳实践的文章。</p><ul class=""><li id="8aa9" class="ne nf iu lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">来自<a class="ae lv" href="https://google.github.io/eng-practices/review/reviewer/" rel="noopener ugc nofollow" target="_blank">谷歌工程</a>的代码审查</li><li id="ff72" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><a class="ae lv" href="https://stackoverflow.blog/author/gorosz/" rel="noopener ugc nofollow" target="_blank">如何让好的代码评审变得更好</a></li><li id="75f4" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">Philipp Hauer的《人类代码评审指南》</li><li id="9ce9" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">来自SmartBear的<a class="ae lv" href="https://smartbear.com/learn/code-review/guide-to-code-review-process/" rel="noopener ugc nofollow" target="_blank">更好的代码审查流程开发人员指南</a></li><li id="0123" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">迈克尔·林奇的《如何像人一样进行代码评审》</li><li id="aca2" class="ne nf iu lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">卡尔·e·威格斯<a class="ae lv" href="https://www.processimpact.com/articles/humanizing_reviews.pdf" rel="noopener ugc nofollow" target="_blank">人性化同行评议</a></li></ul><p id="c8f8" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">感谢阅读！</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="7d1d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">[1]:阿房书博苏。(2015年5月)。有用的代码评审的特征:<a class="ae lv" href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/bosu2015useful.pdf" rel="noopener ugc nofollow" target="_blank">微软的一项实证研究</a></p><p id="93ce" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">[2]:荷兰，迪克。(1999年12月)。“作为变革代理的文档检查”，软件质量专家，第2卷，第1期，第22-33页。</p></div></div>    
</body>
</html>