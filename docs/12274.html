<html>
<head>
<title>Against the Grain: Over-complicating the Development Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反其道而行之:开发架构过于复杂</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/against-the-grain-over-complicating-the-development-architecture-a7ec2a37e4bd?source=collection_archive---------6-----------------------#2022-05-24">https://betterprogramming.pub/against-the-grain-over-complicating-the-development-architecture-a7ec2a37e4bd?source=collection_archive---------6-----------------------#2022-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7bf1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更简单的解决方案可能是好的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9d6bce9e676e5f9adf431373fe5c0d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*orTXWrEbimF9mSAO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">米歇尔·玛特隆在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b9e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我<a class="ae ky" href="https://raduzaharia.medium.com/better-software-architectures-using-the-operating-system-do-you-need-a-database-d667443cbccb" rel="noopener">上一次写了</a>一篇文章，在文章中我提供了一些关于如何通过操作系统提供的简单工具来解决问题的想法。我们看到了如何轻松解决通常与复杂平台和库相关的任务。这篇文章的重点是让我们想到，我们可以使用更简单的工具解决一个场景，甚至可能是由操作系统提供的，但选择使用默认的架构解决方案只是因为它们是规范。</p><p id="8bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一次，我们将讨论其他例子，在这些例子中，建筑阻碍了发展，而不是帮助发展，同样，不是要摧毁现有的和久经考验的范例，而是要帮助质疑默认情况，也许要把事情放在一个新的角度。第一个例子将再次描述我在以前的一份工作中遇到的情况。</p><h1 id="2a09" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">保护琐碎数据的高度登录安全性</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/7d8a122cc8bf4475a89baa3f5ba436b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SYzEpCFJHOeHRgFh"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@dizzydizz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Muhammad Zaqy Al Fattah </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e7b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在讨论我们的web应用程序登录的重新实现，并且正在集思广益。首先，登录工作正常，没有任何问题。这是一个简单的登录，安全，有用户名和密码，加密是按照最新的趋势:一切都好。但是团队的架构师并不满意。他刚刚了解到不记名令牌和刷新令牌登录，并希望将公司中的所有登录迁移到该站点，因为原因。</p><p id="ed28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不是问题。用一个简单的登录系统换一个更好的登录方案应该是值得的。讨论很快退化到寻找越来越安全的方法来处理令牌被盗的情况。会议召开了，测试人员带来了更多的边缘案例，一个比一个更边缘，Redis缓存被涉及，Redis漏洞被讨论，这真的变得难以控制。最后，在花了很多时间讨论保护用户登录的最荒谬的方法后，我问了一个问题:我们在这里试图保护什么？</p><p id="b21c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在处理复杂的解决方案时，我总是喜欢时不时地后退一步，回顾一下问题陈述。我们还在实现我们最初想要的吗？我们还在实现我们需要的吗？当然，我为建筑师的反复无常做了些事情。但是，当讨论的解决方案变得越来越荒谬时，是时候重温最初的故事了。我们在这里想做什么？我们要保护哪些数据？银行数据？医学数据？因为如果不是这样，投资政府级数据安全就是浪费开发时间。很好的练习，但仅此而已。但这种情况并不是一次就发生的，这就引出了下一点。</p><h1 id="5198" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">不合理的可扩展性架构</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/71391d8abc56b9120fbc2e9c1c29e952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Sq7rlzmopt4jXJht"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Artem Labunsky 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c11d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很多次，当我思考某个应用程序时，我会开始思考遥远的未来，当这个应用程序拥有一百万用户时，服务器会被淹没，我需要跳到Azure仪表盘上试图控制危机。许多公司从一开始就考虑负载平衡，即使他们总共有几十万用户，更不用说在给定时刻只有几百个用户在线。</p><p id="1f50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使用户数量增加了，在找出整体性能缓慢的原因之前，匆忙发展基础设施应该是一个临时的解决方案。为什么性能缓慢开始成为一个被遗忘的问题，有些甚至被禁止。我们不再问这个问题，我们只是增加服务器数量。服务器是云中的牛，所以我们不在乎。那是非常浪费的想法。不考虑你的服务器是好的，但是仅仅因为你可以而浪费资源是不好的。</p><p id="2d56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但那只是关于资源，架构呢？当你故意做出你的小项目不需要的软件开发选择，仅仅是因为在你的梦里你正准备有一个30个开发人员的团队，每个人都在代码的相同部分工作？这在实践中如何转化？我还有另外一个例子。</p><h1 id="065c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为了依赖而依赖注入</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/19847e933c91b62d7a42c48c38ad1bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QMQRn48HTd_z8u-2"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@thomascouillard?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">托马斯·库亚尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="dad0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，这只是一个例子，我不想让它看起来像我们不需要好的架构。我参与的所有项目都从依赖注入的许多特性中受益匪浅。我只是举个例子，因为显然我喜欢用最糟糕的方式激怒你。但是从这里推断，你可以想到很多次你应用一个模式仅仅是因为你到处使用它，而不是因为它给项目增加了一些东西。</p><p id="ef0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前段时间是个小项目，连公司都不记得了。它有一个小的用户界面，你可以上传一些东西，还有一个处理器集成了几种类型的文件。没什么大不了的，但它完全有资格作为一个例子。我们确切地知道有多少类型的文件，我们确切地知道在正常情况下它永远不会改变。但是“正常情况”这部分让我们感到不安。我们想要一个适用于所有文件的解决方案。这导致了衰败。</p><p id="9fd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将处理器拆分到他们自己的项目中，实现依赖注入，配置容器，服务诞生，我们甚至添加了一个数据库层<em class="mq">以防万一</em>，即使我们正在处理文件。我们在为增长、变化，包括一切准备架构。我们忘记了开发人员和开发工作。应用程序变得如此之大，以至于了解它实际上在做什么是很滑稽的。</p><p id="0418" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">依赖注入是蛋糕上的樱桃。这完全没用。它什么也不做，什么也不帮，我们总是确切地知道我们需要什么样的实例，我们甚至不做单元测试。所以这里有个陷阱:是的，但是也许有一天我们<em class="mq">会</em>创建单元测试。这是一个疯狂的陷阱，因为作为开发人员，你知道这是事实。世事无常，总是如此。你怎么能不为每一个可能的变化做准备呢？虽然诱人的解决方案也可能是该项目的失败。在你的项目中使用灵活性之前，先思考一下。也许你现在真的不需要它，也许五年后当你需要它时，应用程序无论如何都需要重写。</p><h1 id="038a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">微服务应该很酷</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/208792452a8d53f490585fb9f921065d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*njAopTtlnt84EQyC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mcgroom?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Chase McBride </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ff9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将以最后一个趋势来结束。但是除了微服务，你可以说任何趋势架构。你甚至可以说任何趋势技术:反应，生锈，任何东西。作为一名架构师，你不能因为一个解决方案是新的就马上采用它。你这样做不是因为它很酷很时尚。你权衡它对你的项目的有用性。</p><p id="02f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一个例子，我仍然可以使用上一篇文章中的方法，其中每个处理器都是一个服务。我们的web服务器看起来像一棵圣诞树，所有的处理器都是REST服务。项目的数量、部署目标、部署步骤、代码行，所有的一切都是爆炸式的，只是因为最初没有决定简单地拥有一个。NET解决方案，在一个文件夹中有一个控制台项目和一些服务，我们采用了成熟的公司级业务架构。本质上是一个文件上传工具。只是因为我们想报道最新的趋势和不可能的增长和变化。</p><p id="a359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">微服务或任何一种架构都应该伸出援手，它应该减轻开发者的复杂性。如果它造成了复杂性，那么这个架构就是错误的。还有更多。今天，许多软件都是用。比如网络。嗯，我们也可以添加Node.js。但是如果当你开发软件时，你开始对抗平台、编程语言、架构和库，那肯定是你选错了。如果你所有的软件都是用一种编程语言编写的，这表明你在用一种工具做所有的事情。迟早你会为此而挣扎。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="4567" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望我的例子不仅仅是对我可笑的职业道路的一个指示，而且它们也给任何新老开发人员一点启示，告诉他们看起来好的和适当的技术决策是如何导致一个项目不合时宜地消亡的。我希望这些例子能让你思考和挑战那些经过实践检验的真实的架构决策，并让你不要害怕使用更简单的解决方案。</p><p id="9f17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更简单的解决方案可能给人一种开发者对软件开发知之甚少的印象。但是老实说，如果我回头看，我看到很多次一个更简单的解决方案可以提供更好的开发和用户体验。不要担心未来的架构文章，我通常不会谈论这个主题，但我想分享一些好的例子。下次见！</p></div></div>    
</body>
</html>