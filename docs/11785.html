<html>
<head>
<title>Design Dribbble-like Floating Buttons for Your UITabBar in iOS Using Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Swift 5在iOS中为你的UITabBar设计类似Dribbble的浮动按钮</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/design-dribbble-like-floating-buttons-for-your-uitabbar-for-ios-using-swift-5-8bf5eb71f79a?source=collection_archive---------3-----------------------#2022-04-16">https://betterprogramming.pub/design-dribbble-like-floating-buttons-for-your-uitabbar-for-ios-using-swift-5-8bf5eb71f79a?source=collection_archive---------3-----------------------#2022-04-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="54d2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在iOS上为UITabBar创建漂亮的UIs第3部分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4ea0ddfebd2fb4c7298f9e0f783a15b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fOvUAiXOfXkGlauRzPT-PA.gif"/></div></div></figure><p id="9dae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">嘿嘿嘿！看起来有人已经完成了本教程的最后一部分！恭喜你，你成功通过了所有的数学障碍和编码挑战！</p><p id="7cf6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望之前的数学课没有杀了你，因为，你猜怎么着？教程的最后一部分将会有更多的数学内容！别担心，这次我不会太深入细节。但还是数学。糟透了。所以无论如何都要准备好，这只是最后一次努力！</p><p id="8674" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">是不是打算先查查之前的教程？点击这里观看<a class="ae lq" href="https://medium.com/p/f9d2d5450909" rel="noopener">第一部</a>和<a class="ae lq" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-nice-uitabbar-for-your-ios-app-using-swift-5-pt-2-9285466846c8">第二部</a>！</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="ae53" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">步骤6:创建浮动按钮</h1><p id="cbcc" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">让我们从定义按钮名称、图标和序列开始。我将使用虚拟名称和图标:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="7d84" class="na lz it mw b gy nb nc l nd ne">var <strong class="mw iu">index</strong> = Int()<br/>var <strong class="mw iu">optionButtons</strong>: [UIButton] = []<br/>var <strong class="mw iu">options</strong> = [<br/>   option(name: "A", image: UIImage(systemName: "a") ?? UIImage(), segue: "a"),<br/>   option(name: "B", image: UIImage(systemName: "a") ?? UIImage(), segue: "b"),<br/>   option(name: "C", image: UIImage(systemName: "a") ?? UIImage(), segue: "c")<br/>]</span><span id="ee54" class="na lz it mw b gy nf nc l nd ne">struct <strong class="mw iu">option</strong> {<br/>   var name = String()<br/>   var image = UIImage()<br/>   var segue = String()<br/>}</span></pre><p id="5565" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将需要一个函数来完成以下任务:</p><ul class=""><li id="a7d2" class="ng nh it kw b kx ky la lb ld ni lh nj ll nk lp nl nm nn no bi translated">创建具有指定外观的按钮；</li><li id="a9b1" class="ng nh it kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">指定按钮的约束；</li><li id="d99f" class="ng nh it kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">创建时执行动画。</li></ul><p id="083e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为此，我创建了函数<code class="fe nu nv nw mw b">createButton(size:)</code>，它看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="e855" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe nu nv nw mw b">CGAffineTransform</code>，我将创建一个小的“pop”动画，将按钮缩放到1.1，然后快速返回到1，这样它会变大，然后缩小到原始大小。我还将按钮图像视图的色调设置为在动画过程中清除，以确保只有当按钮在视图中时图像才可见。</p><p id="03ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们调用这个函数并实际创建按钮之前，我们需要确保一旦它们在视图中，用户只能禁用它们或者选择其中一个。跳过这一步会导致按钮滞留，即使用户决定移动到不同的视图控制器。</p><p id="2d1b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了避免这种情况，我将简单地创建一个屏幕大小的透明背景按钮，并将其放在选项按钮的后面。稍后我们会给它一个动作来触发中间的按钮并禁用三个选项按钮。这样，即使当按钮在视图中时，用户试图选择其他东西，按钮也会先消失。</p><p id="7873" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数将如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="26fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在最好的部分是:将我们的三个按钮添加到视图中，并设置它们的约束！谁准备好再上几节数学课了？</p><blockquote class="nz"><p id="68c2" class="oa ob it bd oc od oe of og oh oi lp dk translated">无聊的部分…</p></blockquote><p id="9f6c" class="pw-post-body-paragraph ku kv it kw b kx oj ju kz la ok jx lc ld ol lf lg lh om lj lk ll on ln lo lp im bi translated">今天的课是关于三角学的！对于那些已经有所了解的人，我建议你直接跳到下一部分。如果你不知道我在说什么，我会试着让它变得简单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/c6a3b40f1ae3a0367c8b4e786de8a65d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9WuST145Pt8UK00B17xeGw.png"/></div></div></figure><p id="ce33" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">基本上，在一个直角三角形中，你可以计算你的三角形的边长，只要你至少有:<br/> -一个角的度数(在我们的例子中，我用黄色突出显示的那个)，<br/> -和三条边中的一条边的大小(在我们的例子中，蓝色虚线)。<br/>从图中可以看出，这个逻辑可以应用到我们中间按钮周围的一个看不见的圆圈上，通过用图中的公式计算x和y值来定义三个按钮(绿色)的位置。</p><p id="ef98" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们确实粗略地知道这些按钮应该离我们中间的按钮有多远；这将是我们的蓝色虚线(h)的大小。我们还知道，我们希望它与中间按钮的水平中心成45度角(黄色)。那已经是很多信息了！然而，没有办法告诉我们的Swift函数:我们需要在x和y轴上设置一个距离来放置按钮。为了让它们到达我们的绿点，我们需要进行以下计算:</p><ul class=""><li id="50d7" class="ng nh it kw b kx ky la lb ld ni lh nj ll nk lp nl nm nn no bi translated">首先，我们需要将度数乘以π /180来转换成弧度，如下:<code class="fe nu nv nw mw b">45 * .pi/180</code></li><li id="dd16" class="ng nh it kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">其次，我们将需要把这个值放在<code class="fe nu nv nw mw b">cos()</code>或<code class="fe nu nv nw mw b">sin()</code>中，然后乘以我们的斜边，也就是我们设置的按钮到中间按钮的距离。</li></ul><p id="e858" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用图中的公式作为指导。</p><blockquote class="nz"><p id="573a" class="oa ob it bd oc od oe of og oh oi lp dk translated">…最酷的部分！</p></blockquote><p id="456d" class="pw-post-body-paragraph ku kv it kw b kx oj ju kz la ok jx lc ld ol lf lg lh om lj lk ll on ln lo lp im bi translated">从理论到代码，这是我们的公式:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="4998" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，在运行项目之前，您所要做的就是返回到您的<code class="fe nu nv nw mw b">buttonHandler(sender:)</code>函数，并取消对第24行的限制:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="29b3" class="na lz it mw b gy nb nc l nd ne">self.setUpButtons(count: self.options.count, center: self.middleButton, radius: 80)</span></pre><p id="5ac9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">点击“运行”,见证奇迹！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/802bf5eed7ec968479c6154c6066598c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1uMWNgRqhS4nM41wY_5tVA.gif"/></div></div></figure><p id="ebe6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">显然，您可以将按钮的图像设置得更好。或者随便挑一个。他们还是会比三A好看。</p><p id="ff9d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是等等，不要这么快！我们仍然没有定义移除按钮的公式。他们将如何离去？如果你现在一直按这个按钮，它只会在你每按一次的时候增加越来越多的按钮。幸运的是，在添加我们的按钮(包括背景按钮)时，我们将每个按钮都添加到一个按钮数组中，这样我们就可以通过一个简单的函数快速访问和删除它们，用户每隔一秒钟点击中央按钮，我们就可以调用这个函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="b87a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在运行您的项目，并…见证奇迹！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4ea0ddfebd2fb4c7298f9e0f783a15b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fOvUAiXOfXkGlauRzPT-PA.gif"/></div></div></figure><p id="ccf6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你应该为能走到这一步而自豪。你经历了数学，几何，三角学，所有这些来设计这个2秒钟的动画。用户永远不会知道你经历了什么，但我知道。干得好！</p><p id="10d9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你喜欢这个教程吗？它和你的项目合作得好吗？</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="4373" class="na lz it mw b gy nb nc l nd ne"><strong class="mw iu">Want to Connect?</strong></span><span id="c3f6" class="na lz it mw b gy nf nc l nd ne">Follow me on…<br/>❤️ <a class="ae lq" href="https://www.youtube.com/channel/UC5hqYiHxie458KSO1PAnA8Q" rel="noopener ugc nofollow" target="_blank">YouTube</a><br/>💖 <a class="ae lq" href="https://dribbble.com/margelss" rel="noopener ugc nofollow" target="_blank">Dribbble</a><br/>💜 <a class="ae lq" href="https://www.instagram.com/itsmargels/" rel="noopener ugc nofollow" target="_blank">Instagram</a><br/>💙 <a class="ae lq" href="https://ko-fi.com/margelss" rel="noopener ugc nofollow" target="_blank">Ko-Fi</a><br/>🖤 <a class="ae lq" href="https://github.com/Margels" rel="noopener ugc nofollow" target="_blank">GitHub</a></span></pre></div></div>    
</body>
</html>