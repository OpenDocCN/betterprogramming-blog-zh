<html>
<head>
<title>The MySQL Cheatsheet We All Need</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们都需要的MySQL备忘单</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/the-mysql-cheatsheet-we-all-need-d1af0377bdc6?source=collection_archive---------7-----------------------#2020-08-28">https://betterprogramming.pub/the-mysql-cheatsheet-we-all-need-d1af0377bdc6?source=collection_archive---------7-----------------------#2020-08-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="84d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你总是忘记的所有重要的MySQL命令</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2b1e58a4c8a5f8838c32c10cefae4043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6bdmRFNJ0_VEgcEx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">萨法尔·萨法罗夫</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b94c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管我对数据科学充满热情，但我热爱数据库。我第一次接触他们是在我大学三年级的一门课上，我们学习了用MySQL创建和管理数据库。我学到了很多，这些知识在过去的几年里对我非常有用。然而，SQL语法很容易忘记。为了避免花更多的时间在谷歌上搜索如何做这个或那个，而不是实际去做，我宁愿做一个小抄，今天我想和你分享。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="130d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">连接到MySQL服务器</h1><p id="1033" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">开始使用MySQL数据库的第一步是连接到它。在终端窗口中，键入:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="5422" class="ne md it na b gy nf ng l nh ni">mysql [-h machine] -u &lt;user&gt; -p [db_name]</span></pre><p id="29cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果服务器和客户机运行在同一台机器上，就不需要<code class="fe nj nk nl na b">-h</code>标志。<code class="fe nj nk nl na b">db_name</code>也是可选的，因为正如我们现在看到的，您可以用一个命令创建或更改当前数据库。</p><p id="4c81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦连接到服务器，我们可以随时从shell中运行一些有趣的命令:</p><ul class=""><li id="d249" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">\T</code>:将所有输出打印到文本文件中</li><li id="68ba" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">\s</code>:打印一些关于MySQL服务器的信息</li><li id="6016" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">\c</code>:删除当前句子</li><li id="68c8" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">\.somefile.sql</code>:运行存储在文件中的所有SQL语句</li><li id="16e8" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">help</code>:显示手册页</li><li id="fae9" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">help</code> <code class="fe nj nk nl na b">create table</code>:显示<code class="fe nj nk nl na b"> “CREATE TABLE”</code>命令的手册页</li><li id="6ebb" class="nm nn it lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nj nk nl na b">\q</code>完成与MySQL服务器的连接</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0df0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建用户和数据库</h1><p id="4894" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">MySQL有一个默认的根用户，但是它应该只用于管理数据库，而不是用于数据操作。这就是为什么我们应该创建一个标准用户。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="00a6" class="ne md it na b gy nf ng l nh ni"><strong class="na iu">CREATE USER</strong> 'mike' <strong class="na iu">IDENTIFIED BY</strong> 'difficultpassword'</span><span id="5d0e" class="ne md it na b gy oa ng l nh ni"><strong class="na iu">CREATE USER</strong> 'mike'@'localhost' <strong class="na iu">IDENTIFED BY</strong> 'difficultpassword'</span></pre><p id="018b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个代码片段中，我们没有创建两个用户，而是创建了一个无论客户端在服务器内部还是外部都可以使用的用户。</p><p id="9855" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们将了解如何创建一个数据库，并为不同的用户分配不同的权限，包括我们刚刚创建的用户。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d45d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建表格</h1><p id="2122" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">表是MySQL等关系数据库的核心概念。在下面的代码片段中，我们将学习创建一个基本表，然后学习如何使用主键、限制、外键和默认值来创建表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6207" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">插入一行</h1><p id="e23b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在我们创建了表之后，下一步将是用一些数据填充它们。以下示例显示如何插入一行，然后同时插入多行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4e08" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">进行查询</h1><p id="bc60" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用<code class="fe nj nk nl na b">SELECT</code>命令进行查询，这允许我们从数据库中检索数据。MySQL允许我们进行复杂的查询，从几个表中检索信息，或者从不同查询的结果中进行逻辑运算。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1cee" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建视图</h1><p id="60a7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">视图允许我们将一个<code class="fe nj nk nl na b">SELECT</code>语句包装成一个类似表格的视图。然后，我们可以为该视图的用户分配特殊权限。但是，如果被包装的<code class="fe nj nk nl na b">SELECT</code>语句引用聚合函数(如<code class="fe nj nk nl na b">SUM</code>、<code class="fe nj nk nl na b">MIN</code>等)或使用<code class="fe nj nk nl na b"> GROUP BY</code>、<code class="fe nj nk nl na b">DISTINCT</code>等。，不能在视图上执行<code class="fe nj nk nl na b">INSERT</code>、<code class="fe nj nk nl na b"> UPDATE</code>或<code class="fe nj nk nl na b">DELETE</code>操作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6508" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">进行交易</h1><p id="dc9a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">事务是一系列原子操作，即整组句子成功或整体失败。如果一个事务的一句话失败了，MySQL引擎会撤销该事务之前的句子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e7ed" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建存储过程</h1><p id="f1bb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">存储过程是一系列SQL语句，可以随时从控制台或<code class="fe nj nk nl na b">.sql</code>文件中调用。这类似于标准编程语言中的函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8a0a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">玩弄变数</h1><p id="f54b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">变量是临时存储查询结果或行中某一列的值以便以后使用的一种有用方式。MySQL中有两种主要类型的变量:本地变量和用户自定义变量(也称为会话变量)。前几个必须在使用前声明，并且它们的作用域被限制在定义它们的存储过程中。第二个不需要预先声明，它们的值可以随时访问，但是只能在客户端创建的会话中访问。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cd5c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">玩光标</h1><p id="0e46" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">游标是一种工具，用于逐个元组地迭代查询的所有结果。这在开发需要将每一行转换成某个类的对象的客户端应用程序时非常有用。在MySQL中声明一个游标并遍历它非常容易:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="86da" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">流控制</h1><p id="3d24" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在存储过程中，我们可以像在任何其他编程语言中一样进行流控制:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0d26" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建触发器</h1><p id="1d8e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">触发器是在特定事件发生之前或之后运行的过程，如表或视图中的插入、更新或删除。我们必须小心触发器，因为它们会消耗我们服务器的大量资源。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ab84" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建预定事件</h1><p id="c4b7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">预定事件是在特定时刻触发的程序。有计划在某一天和某一小时运行的一次性事件，也有在某一天之后直到(可选)结束日期每分钟、每小时、每天等运行的定期事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="277a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MySQL是一个非常复杂的DMBS，所以正如你所想象的，有太多的主题我无法在这里涵盖，因为这篇文章会变得太长。然而，有了这里提到的要点，对大多数用户来说应该足够了，如果你还需要别的东西，<a class="ae ky" href="https://dev.mysql.com/doc/refman/8.0/en/" rel="noopener ugc nofollow" target="_blank">官方文档</a>可能会有你问题的答案。</p></div></div>    
</body>
</html>