<html>
<head>
<title>5 Tools I Used To Build a Component Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我用来构建组件库的5个工具</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/5-tools-i-used-to-build-a-component-library-93632c7f8a56?source=collection_archive---------6-----------------------#2022-11-09">https://betterprogramming.pub/5-tools-i-used-to-build-a-component-library-93632c7f8a56?source=collection_archive---------6-----------------------#2022-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8238" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你的设计师可能会因此而喜欢你</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6783fdadcc7ca3ac6fe93a7d060dcfd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nMFfsU0nxoi6UKuc"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@trnavskauni" rel="noopener ugc nofollow" target="_blank">特尔纳瓦大学</a>在<a class="ae kv" href="https://unsplash.com/photos/BEEyeib-am8" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="325c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着公司的成长，新的应用程序不断涌现并不罕见。开发人员的快乐和应用程序之间的一致性是我最看重的。我希望一个组件的风格和行为在所有应用程序中都是一样的。设计一次，构建组件，导入组件，然后继续您的一天。我想解决的另一个问题是组件文档。所有这些都让我创建了一个组件库。</p><h1 id="b5c3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">通过故事书的组件文档</h1><p id="e23d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如上所述，组件文档是我想要解决的问题之一。基本上，当新工程师开始工作时，我想向他们展示如何独立使用我们的组件。我最后用故事书来做这个。</p><blockquote class="mp mq mr"><p id="398f" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">“Storybook是一个前端工作室，用于独立构建UI组件和页面。成千上万的团队使用它进行UI开发、测试和文档编制。它是开源和免费的。”— <a class="ae kv" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a></p></blockquote><p id="3123" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我职业生涯的这个阶段之前，我从来没有制作过故事书，而且制作和运行起来非常简单。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/0617fa8caf89e3a41104c89f6287a2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*igv9qJYY2MSwTvx84Jd6AQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://storybook.js.org/docs/react/why-storybook" rel="noopener ugc nofollow" target="_blank">https://storybook.js.org/docs/react/why-storybook</a></p></figure><h1 id="02d9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">样式组件</h1><blockquote class="mp mq mr"><p id="a24f" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">Styled-components是一个React特定的CSS-in-JS样式化解决方案，它为开发人员创建了一个平台，可以编写实际的CSS代码来样式化React组件以及React Native— <a class="ae kv" href="https://www.copycat.dev/blog/styled-components-react" rel="noopener ugc nofollow" target="_blank">模仿开发</a></p></blockquote><p id="ec34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">老实说，一开始我并不太喜欢<code class="fe mx my mz na b">styled-components</code>，但是它让我越来越喜欢。我喜欢你可以通过将你的样式提取到一个<code class="fe mx my mz na b">styled-component</code>中来清理你的实际组件。在下面的例子中，它们都封装在一个组件中，但是您可以很容易地将它们提取到一个单独的文件夹中并导入它们！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="d743" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以用<code class="fe mx my mz na b">styled-components</code>做一些非常棒的事情，比如主题化，这样你所有的组件看起来感觉都一样。你甚至可以传递道具，这在下面的例子中已经发生了，但是我们只是从道具中析构主题。准备一些伪代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="6217" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您决定这样做，也可以用JavaScript对象符号编写样式化的组件。</p><pre class="kg kh ki kj gt nd na ne nf aw ng bi"><span id="2696" class="nh lt iq na b gy ni nj l nk nl">import styled from 'styled-components';</span><span id="e778" class="nh lt iq na b gy nm nj l nk nl">const <em class="ms">StyledButton </em>= <em class="ms">styled</em>(<em class="ms">Button</em>).attrs((props) =&gt; ({<br/>  color: props.theme.colors.primary,<br/>}))``;</span></pre><h1 id="4cba" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">组件库—定制或现成的</h1><p id="b826" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">是自己构建所有组件，还是获取自己覆盖的组件库(如reactstrap ),这一决定各不相同。有大量的变量需要考虑，包括:</p><ul class=""><li id="7c67" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr ns nt nu nv bi translated">你有多少时间</li><li id="b177" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr ns nt nu nv bi translated">分配了多少开发人员</li><li id="7b10" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr ns nt nu nv bi translated">你认为你的定制组件会比现成的更好吗</li><li id="cc1c" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr ns nt nu nv bi translated">你讨厌自己吗(lol！)?我当然是在开玩笑，但这些是你需要考虑的一些事情</li></ul><p id="23b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的例子中，我选择从货架上抓取一个库并覆盖样式以满足我们公司的需求。这并不是说从货架上抓取更好，但它确实节省时间。这个决定的好处是，现在你有大量的组件准备好了。当然，也有缺点，现在您已经向该库添加了一个依赖项，所以要明智地选择。不要选择一个决定他们想要改变一切工作方式的库。</p><h1 id="e18c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">福米克</h1><p id="99e9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于任何人来说，在任何应用程序中都会有表单，这并不奇怪。表单带来了验证，因为您不希望最终用户输入他们想要的任何内容。你想要好的数据！您还需要能够跟踪提交的值。</p><p id="3348" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你还说需要向用户呈现错误消息吗？如你所见，名单越来越长了。你可以用手卷起所有这些东西，但是Formik给你所有这些开箱即用的东西。其他开发人员不需要知道幕后到底发生了什么。他们需要遵循合同来使用组件。准备一个简短的架构分解！</p><p id="25fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">库中有一个组件；姑且称之为<code class="fe mx my mz na b">&lt;FormHolder /&gt;</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="87df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mx my mz na b">FormHolder</code>裹<code class="fe mx my mz na b">Formik</code>。<code class="fe mx my mz na b">Formik</code>然后通过道具获取<code class="fe mx my mz na b">Formik</code>工作所需的东西。它还以<code class="fe mx my mz na b">Formik</code>的形式包装并返回子元素。<code class="fe mx my mz na b">Formik</code>接受<code class="fe mx my mz na b">Formik Form.Inputs</code>。这变得很棘手，因为Formik的表单输入有自己的风格，但是您希望它使用您的组件库，对吗？您可以在这里编写这样的包装器。这样，Formik就明白你的组件是什么了。此外，您将从您的组件库和<code class="fe mx my mz na b">Formik</code>中获得您的样式/功能！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="509d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终结果类似于下面的代码。这个例子没有展示它，但是我也喜欢创建一个组件来包装包含业务逻辑的<code class="fe mx my mz na b">StyledFormInput</code>和<code class="fe mx my mz na b">&lt;StyledErrorMessage /&gt;</code>。因此，你可以创建如下所示的<code class="fe mx my mz na b">FormHolder</code>，但是不引用<code class="fe mx my mz na b">&lt;StyledFormInput /&gt;</code>和<code class="fe mx my mz na b">&lt;StyledErrorMessage /&gt;</code>，而是使用组件，我们称之为<code class="fe mx my mz na b">FormField</code>。</p><p id="3109" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在<code class="fe mx my mz na b">FormField</code>确切地知道该做什么，如何行动，并封装了错误处理。很可爱，是吧？如果您注意到这里对<code class="fe mx my mz na b">yup</code>的使用，它与Formik在验证方面配合得非常好，所以我们选择用它来处理它们。</p><pre class="kg kh ki kj gt nd na ne nf aw ng bi"><span id="e213" class="nh lt iq na b gy ni nj l nk nl">const TestSchema = yup.object({<br/>  email: yup.string().email().required().label('Email'),<br/>}</span><span id="7c95" class="nh lt iq na b gy nm nj l nk nl">&lt;FormHolder validationSchema={TestSchema} initialValues={{email: ''}}&gt;<br/>  &lt;StyledFormInput name="email" label="Email" placeholder="Enter email" /&gt;<br/>  &lt;StyledErrorMessage name={<em class="ms">name</em>} component='div' /&gt;;<br/>&lt;/FormHolder&gt;</span></pre><h1 id="52e0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Rollup.js</h1><p id="1870" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">哦，伙计，这是多么痛苦啊。我花了很多时间在谷歌上搜索错误，并弄清楚如何配置rollup来满足我们的需求。对于那些不知道的人，</p><blockquote class="mp mq mr"><p id="63db" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">Rollup是JavaScript的一个模块捆绑器，它将小段代码编译成更大、更复杂的代码，如库或应用程序— <a class="ae kv" href="https://rollupjs.org/guide/en/#overview" rel="noopener ugc nofollow" target="_blank">汇总</a></p></blockquote><p id="2b5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您需要找出最适合您需求的配置，因此我不会分享配置，但我会分享用于创建配置的包:</p><pre class="kg kh ki kj gt nd na ne nf aw ng bi"><span id="aff6" class="nh lt iq na b gy ni nj l nk nl">import { babel } from "@rollup/plugin-babel";<br/>import external from "rollup-plugin-peer-deps-external";<br/>import resolve from "@rollup/plugin-node-resolve";<br/>import scss from "rollup-plugin-scss";<br/>import { terser } from "rollup-plugin-terser";<br/>import commonjs from "@rollup/plugin-commonjs";<br/>import generatePackageJson from "rollup-plugin-generate-package-json";</span></pre><p id="d170" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不知道你在做什么，像我一样，从一个简单的配置开始，不断调整，直到它捆绑。您可以全局安装rollup，然后将运行rollup -c的构建脚本添加到您的根级别<code class="fe mx my mz na b">package.json</code>。</p><p id="2767" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你捆绑了你的代码，并且需要私下发布它，就像我的情况，我强烈建议阅读这篇文章。</p><div class="ob oc gp gr od oe"><a href="https://www.wearecogworks.com/blog/how-to-publish-npm-packages-with-github/" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">如何用GitHub | Cogworks博客发布Npm包</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">GitHub引入了一个很棒的新功能，可以让你管理存储库中的包，叫做这是一个很棒的…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">www.wearecogworks.com</p></div></div><div class="on l"><div class="oo l op oq or on os kp oe"/></div></div></a></div><h1 id="ee54" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">外卖食品</h1><p id="0613" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">由于之前从未创建过图书馆，这是一项艰巨的任务。有一次，我认为我不能创造它，因为我没有这方面的知识。老实说，我认为关键是聪明的谷歌搜索和毅力。</p><p id="fc57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我一直在调整，直到它全部合二为一，开始工作。你可能遇到的一些陷阱是故事书想要一样东西，但是你的图书馆的消费者想要不同的东西。在我的例子中，这只是一个简单的文件名改变，解决了这两个问题。</p><p id="a5f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终，拥有一个结构良好、一致的UI库将提高开发人员的满意度和速度，同时保持所有应用程序的一致性。</p><p id="c006" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这是有点深刻的，我感谢你花时间阅读这一点。</p><pre class="kg kh ki kj gt nd na ne nf aw ng bi"><span id="5cce" class="nh lt iq na b gy ni nj l nk nl"><strong class="na ir">Want to Connect?</strong></span><span id="15e7" class="nh lt iq na b gy nm nj l nk nl">For more, check out my <a class="ae kv" href="https://www.youtube.com/channel/UC_jotKMpT2DtczWY-ILVgoA" rel="noopener ugc nofollow" target="_blank">YouTube channel</a>.</span></pre></div></div>    
</body>
</html>