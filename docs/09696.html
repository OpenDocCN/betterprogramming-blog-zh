<html>
<head>
<title>3 How-To Python Code Snippets for Data Analysts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3面向数据分析师的如何使用Python代码片段</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/3-how-to-python-code-snippets-for-data-analysts-6a9b850c254d?source=collection_archive---------7-----------------------#2021-09-28">https://betterprogramming.pub/3-how-to-python-code-snippets-for-data-analysts-6a9b850c254d?source=collection_archive---------7-----------------------#2021-09-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3040" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用Python简化和加速数据分析项目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8f6aa84d7f03d4aa04a9f7b84649fa78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrXbKAWKbBVMuilksetR_w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kellysikkema?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">凯利·西克玛</a>在<a class="ae ky" href="https://unsplash.com/s/photos/idea?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片|由作者编辑</p></figure><p id="3c70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现成的代码片段在数据科学项目中非常方便。在接下来的三分钟里，您将学习使用Python的三个代码片段。</p><p id="ec8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以简单地将这些代码块复制并粘贴到您的项目中，以保持简单并提高分析速度。这样，您可以利用宝贵的时间来解释分析结果。我们开始吧！</p><h1 id="e11f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何使用Seaborn可视化数据</h1><p id="fb54" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">使用这个代码片段可以毫不费力地将数据可视化。只需复制并粘贴到您的项目中，并享受富有洞察力的可视化。</p><p id="634a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了榜样一切都好。因此，我将使用来自<a class="ae ky" href="https://data.world/makeovermonday/2021w37" rel="noopener ugc nofollow" target="_blank"> 20家最大太阳能发电厂</a>的数据。为了处理这些例子，我修改了数据。从我的<a class="ae ky" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/20-Solar-PowerPlats.xlsx" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>下载数据。</p><p id="47d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从将数据导入熊猫数据帧<code class="fe ms mt mu mv b">df</code>开始。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="091a" class="na lw it mv b gy nb nc l nd ne"># Import the required libraries<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>%matplotlib inline</span><span id="eb68" class="na lw it mv b gy nf nc l nd ne"># Read the data in Pandas DataFrame<br/>df = pd.read_excel("20-Solar-PowerPlats.xlsx")<br/>df.head()</span></pre><p id="a66d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/d8fe4c7579ad29c44b4df01dcfd36a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-VY_CfgYbBjNwnuKyaNh3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">前五行熊猫数据框|作者图片</p></figure><p id="cb20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是您正在寻找的代码片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="142d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/3970c468fd6cd0097d23a115b684922f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwiwxQ4ebjAafaJQthLDyw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Seaborn的条形图|图片由作者提供</p></figure><p id="c03c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需将该代码片段复制并粘贴到您的代码中，然后添加您想要绘制的数据。你永远不需要考虑调色板、字体、字体大小和图形大小。</p><p id="beaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，这个代码片段很容易<em class="nk">扩展</em>。实现最基本的语法可以让你灵活地随时改变字体大小、支线剧情的数量、图形大小和可视化类型。</p><p id="ea3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">寻找标准的Python文档？给你:</p><ol class=""><li id="36c7" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><a class="ae ky" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html?highlight=matplotlib%20pyplot%20subplots#matplotlib.pyplot.subplots" rel="noopener ugc nofollow" target="_blank">设置Matplotlib图</a></li><li id="4e30" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><a class="ae ky" href="https://seaborn.pydata.org/examples/index.html" rel="noopener ugc nofollow" target="_blank">Seaborn中的所有数据可视化</a></li></ol><h1 id="6f54" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何将带有数值的字符串转换成数字</h1><p id="e0a8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个Python代码片段将带有数值的字符串转换为数字。根据您的项目需求，它可以转换为float或int。</p><p id="f566" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您注意到上例中DataFrame的最后一列<code class="fe ms mt mu mv b">Peak_capacity</code>时，它包含数字值，后跟字母字符<code class="fe ms mt mu mv b">MWp</code>。这使得整个值成为一个字符串或对象。</p><p id="0cf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这个代码片段，去掉额外的字符并提取数值以增强您的分析。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="f174" class="na lw it mv b gy nb nc l nd ne">for row in range(len(df)):<br/>    if 'MWp' in df.loc[row, 'Peak_capacity']:<br/>        df.loc[row,"New_Col"] = float(df.loc[row, 'Peak_capacity']<br/>                                      .split('MWp')[0])<br/>    else:<br/>        df.loc[row,"New_Col"] = float(df.loc[row, 'Peak_capacity'])</span></pre><p id="13cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在现有的<code class="fe ms mt mu mv b">DataFrame</code>中增加了<code class="fe ms mt mu mv b">New_Col</code>作为另一个栏目。在下图中，你可以看到该列中的值是从列<code class="fe ms mt mu mv b">Peak_capacity</code>中提取的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/c9b6d26b7c19d1d170fdbce081202209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VEIyyaxMjG2jO-7Xwx4wEw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://towardsdatascience.com/five-must-know-string-methods-in-python-e97925d12eec" rel="noopener" target="_blank">将带有数值的字符串转换为数字</a> |图片作者</p></figure><p id="f119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我只是在Python中使用了字符串操作方法来消除字符串中不需要的字符。根据字符串中不需要的字符，可以使用不同的方法提取数值。</p><h1 id="61b9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如何从Pandas DataFrame的Datetime列中提取日、月、年</h1><p id="61c5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">处理时间戳数据是另一项有趣但有时复杂的任务。</p><p id="d78c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这个代码片段，您可以提高您的分析。当你读取熊猫数据框中的数据时，你所需要做的就是复制并粘贴这段代码。</p><p id="d5be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我目前正在做一个销售活动项目，这里的<a class="ae ky" href="https://github.com/17rsuraj/data-curious/blob/master/TowardsDataScience/Sales_Data.xlsx" rel="noopener ugc nofollow" target="_blank">是数据。</a></p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="602d" class="na lw it mv b gy nb nc l nd ne">import pandas as pd</span><span id="480b" class="na lw it mv b gy nf nc l nd ne">df =pd.read_excel("Sales_Data.xlsx")<br/>df.head()</span></pre><p id="1411" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每行代表每个销售经理在每个日期售出的汽车数量和得分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/4b82fb383efed8caedada5ffe2bfcdff.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*O9iH0RB3tgxsN-6ZvQacqw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">销售活动数据|按作者分类的图片</p></figure><p id="ccac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用下面的代码片段从列Date中提取日、月、年、日名称和月名称。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="bd72" class="na lw it mv b gy nb nc l nd ne">df["Day"] = df["Date"].dt.day<br/>df["Month"] = df["Date"].dt.month<br/>df["Year"] = df["Date"].dt.year<br/>df["Day_of_week"] = df["Date"].dt.day_name()<br/>df["Month_of_year"] = df["Date"].dt.month_name()<br/>df.head()</span></pre><p id="89b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单！我使用访问器<code class="fe ms mt mu mv b">dt</code>来访问列<code class="fe ms mt mu mv b">Date</code>中值的日期时间属性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/35d47fca3d5c74efb67e7628485ba300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7yQwdkylDjRP9BLSNPPLEQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从熊猫数据框列中提取日、月、年|作者图片</p></figure><p id="222d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫数据帧中包含日期时间数据的列必须是数据类型<code class="fe ms mt mu mv b">datetime64[ns]</code>。这是使用访问器<code class="fe ms mt mu mv b">dt</code>的唯一标准。</p><p id="3901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您有字符串形式的日期时间值吗？？别担心。<a class="ae ky" href="https://towardsdatascience.com/change-column-data-type-in-pandas-954d7acdef1d" rel="noopener" target="_blank">这里有一个快速修复</a>来改变Pandas中的列数据类型。</p><p id="f0c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还可以探索<a class="ae ky" href="https://towardsdatascience.com/3-time-saving-python-tricks-a017f4215aeb" rel="noopener" target="_blank"> <strong class="lb iu"> <em class="nk">省时的Python窍门。</em> </strong> </a></p></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="b98f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读和宝贵时间！</p></div></div>    
</body>
</html>