<html>
<head>
<title>Leverage Swift’s UserDefaults the Right Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以正确的方式利用Swift的用户默认值</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/leverage-swifts-userdefaults-the-right-way-827ddc5c0085?source=collection_archive---------20-----------------------#2020-01-27">https://betterprogramming.pub/leverage-swifts-userdefaults-the-right-way-827ddc5c0085?source=collection_archive---------20-----------------------#2020-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fd37" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过避免直接处理字符串，使代码不容易出错</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/088157c915110d0b1af42814b369c79b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gQjNYStvCDbWDmrtawxFdA.png"/></div></div></figure><p id="7eee" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可能已经多次看到过这种实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="358c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里会出什么问题呢？因为我们使用字符串来获取/设置特定键的值(字符串)(也是字符串！)，我们正在使我们的代码容易出现可能的错别字。</p><p id="740e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇短文中，我们将以<code class="fe ls lt lu lv b">AuthCredentials</code>为例，学习如何以非常安全的方式使用<code class="fe ls lt lu lv b">UserDefaults</code>，T1负责跟踪用户之前是否启动过应用程序，存储认证令牌，以及处理其他非敏感的补充信息。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="393f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">认证证书</h1><p id="80f0" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">我们是这样做的。</p><p id="0e17" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们创建一个名为<code class="fe ls lt lu lv b">defaults</code>的属性，在自定义的getters和setters中重用它。然后，我们为<code class="fe ls lt lu lv b">hasLaunchedBefore</code>、<code class="fe ls lt lu lv b">token</code>和<code class="fe ls lt lu lv b">isNewSeller</code>定义字符串键。</p><p id="a1ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">剩下的工作就是实现这些实际的getters和setters。下面是实现过程:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="bf9e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在最有趣的部分——我们如何使用我们的<code class="fe ls lt lu lv b">UserDefaults</code>？</p><p id="d6f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">很简单——这就是我们如何检查假定的卖家是否是新卖家:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="0bd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe ls lt lu lv b">isNewSeller</code>状态的分配也非常简单:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="c17a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我们在幕后实现了一个<code class="fe ls lt lu lv b">UserDefaults</code>存储，我们所要关心的只是基本的获取/设置操作。</p><p id="7353" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>