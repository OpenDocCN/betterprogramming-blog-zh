# 编写更简洁 Python 代码的 5 个技巧

> 原文：<https://betterprogramming.pub/5-tricks-to-write-more-concise-python-code-f075f66336b6>

## 提高 Python 的可读性

![](img/7cb30f0b49b22b4d1e98c3322d1cb711.png)

由[拍摄的萨曼莎·加德斯](https://unsplash.com/@srosinger3997?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

很多人刚开始学编程的时候都会选择 Python。Python 确实是初学者友好的。当你按照它的[官网](https://www.python.org/downloads/)上的下载安装说明，用不了太久，你就能写出你的“Hello World”程序了。

当你对 Python 了解更多的时候，你可能会被它用不同的方法实现相同功能的灵活性所吸引。然而，迟早你会发现有些解决方案比其他的更简洁。更重要的是，从长远来看，更简洁的代码更容易阅读和维护。

当然，有很多方法可以用 Python 编写简洁的代码。在本文中，我想分享我发现在日常 Python 项目中特别有用的五个技巧。为了演示为什么这些技巧提供了更简洁的解决方案，我将在每一节中包括替代的、通常更长的解决方案，以便进行比较。

# 1.列表、字典和集合理解

列表理解是许多 Python 程序员最喜欢的特性之一。这是从 iterable 创建 list 对象的一种非常简洁的方法。基本语法是`[expression for x in iterable]`。让我们看一些例子来理解它的用法。

列表理解

正如你所看到的，在没有使用列表理解的情况下，我们必须创建一个空列表，并通过运行一个`for`循环来添加每个数字的平方，这需要三行代码。相比之下，我们只用一行代码就可以用列表理解来构建相同的方块列表。是不是很酷？

除了列表理解，还有字典和集合理解。词典理解有以下基本句法`{key_expr: value_expr for x in iterable}`，集合理解的基本句法是`{expression for x in iterable}`。下面我们来看一些琐碎的例子。与列表理解示例类似，如果不使用理解技术，构建所需的字典和集合将需要多行代码。

字典和集合理解

# 2.作为数据结构的命名元组

我们知道元组对于存储一些相关数据很有用。然而，使用它们不是很方便，特别是在访问特定元素时，因为我们必须记住顺序并使用特定元素的正确索引。

虽然如果我们不想使用元组，我们可以构建一个自定义类来管理相关数据，但是`namedtuple`数据类型可以是一个非常有用的轻量级数据结构。通过集合模块，`namedtuple`数据类型采用以下基本语法:`namedtuple(Typename, field_names)`。语法不太简单，但实际上从概念上很容易理解。

让我们看一些相关的例子。理想的特性是创建一个可以存储学生信息的数据结构，包括姓名、性别和学号。

类与命名元组

可以看出，通过使用`namedtuple`，我们可以用更简洁的代码编写轻量级的数据结构。当然，应该注意的是，定制类为您提供了更多您可以操作的功能。但是，如果您的目的只是创建一个用于数据存储和检索的数据结构，您肯定可以考虑使用`namedtuple`。

# 3.使用 enumerate()和 zip()进行迭代

编码的一个关键原则是 DRY，代表不要重复自己。当我们处理一个数据序列时，比如一个数字列表，我们需要对列表中的每个数字进行相同的操作，这是一个常见的任务。为了避免重复相同的代码，我们可以使用一个`for`循环来运行整个列表的迭代。

当我们迭代一个列表或任何序列时，有时我们也需要知道项目在序列中的位置。有几种方法可以做到这一点。让我们看看它们是什么。

枚举迭代()

可以看到，通过使用内置函数`enumerate()`，我们可以很容易地访问一个序列中的索引和元素，这比第一次迭代更简洁。更重要的是，它可以为计数设置一个起始数。在上面的例子中，我们将其设置为 1。

除了`enumerate()`函数之外，`zip()`函数在迭代中也很有用。该函数能够从多个可迭代对象中创建元组，而无需显式创建这些可迭代对象的复合可迭代对象。这听起来有点混乱，但我们可以通过下面的例子来了解它的用法。

使用 zip()的迭代

基本上，`zip()`函数所做的是从 iterables 中获取每个元素，在每次迭代中按顺序形成一个元组。代码比冗长的方式更简洁，可读性更好，不是吗？

# 4.用 f 字符串格式化字符串

字符串是一种非常基本的数据类型，我们几乎在任何地方都要用到它。字符串的一个重要应用是以特定的格式使用它们。有几种方法可以格式化字符串，我将介绍 *f-strings* 作为一种简洁的方法。

简而言之，F 字符串是使用字母 *f* (或 *F* )作为字符串前缀的插值字符串。出于编写简洁代码的目的，我将只向您展示两个应该首选 f 字符串的用例。

*   **显示变量。**最基本的用途是显示一些变量的值，用于开发过程中的调试。如果我们使用常规的`format()`方法，时间会稍微长一点。

带变量的 f 字符串

*   **连接变量/连接字符串**。f 字符串不使用+符号和字符串的`join()`方法，而是非常直接地用于字符串连接，并且它们具有最好的可读性。实际用途包括构造文件路径，如下例所示。

用于字符串连接的 f 字符串

# 5.λ函数

Lambda 函数是 Python 中的匿名函数，通常用在需要小操作的地方。一个 lambda 函数可以有一个到多个参数，有一个表达式，它有下面的语法`lambda parameters: expression`。

我将使用内置的`sorted()`函数来演示 lambda 函数的用法。具体来说，`sorted()`函数通过使用 key 函数对 iterable 进行排序，key 函数由`key`参数指定。我将向您展示我们可以为`key`参数使用 lambda 函数，而不是使用`def`关键字声明常规函数。

用于排序的类与 Lambda

如上所示，使用 lambda 函数允许我们编写一个更简洁的对`sorted()`函数的调用。使用常规函数，我们必须先声明函数，然后才能使用`sorted()`函数，这肯定比直接使用 lambda 函数更繁琐。

# 结论

在本文中，我们回顾了五个有用的技巧，它们让我们能够编写更简洁的 Python 代码。通过编写更少的代码，可读性和可维护性实际上得到了提高——几乎总是这样。

然而，请记住，简洁的代码不应该导致任何可能的歧义或混乱。你必须在简洁和可读性之间找到一个好的平衡。如果它们冲突，我们应该首先考虑可读性，即使有时这需要更多的代码。

感谢阅读。