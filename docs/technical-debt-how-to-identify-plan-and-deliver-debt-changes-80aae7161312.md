# 技术债务:如何识别、计划和交付债务变更

> 原文：<https://betterprogramming.pub/technical-debt-how-to-identify-plan-and-deliver-debt-changes-80aae7161312>

## 所有的项目都有一些技术债务，但是管理起来并不一定是一场噩梦

![](img/c10a703b2461e60dceb5a0e8d0564312.png)

在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上由 [Kostiantyn Li](https://unsplash.com/@leekos?utm_source=medium&utm_medium=referral) 拍摄

在过去几年中，任何在主流软件工程领域工作的人无疑都会遇到“技术债务”这个术语。似乎很难找到这个词的定义，因此，每个人对这个词的含义似乎都有不同的理解。

在某些情况下，这导致技术债务被完全忽略(不是一个好主意)，而在其他情况下，它被用作迫使不受欢迎的改变进入生产的借口(也不是一个好主意)。但是事情不一定是这样的——技术债务在你的解决方案的开发中可能是一个非常有用的工具。

术语“技术债务”可以追溯到 20 世纪 90 年代早期，随着敏捷越来越受欢迎，这个术语得到了发展和加强。

基本思想是，当构建一个解决方案时，会产生不太理想的代码。为了让解决方案为生产做好准备，这被认为是“足够好”，同时承认这个决定*可能*使未来的开发更加昂贵(在时间或精力方面)。因此，通过在短期内做出加快发展的决定，你正在欠下一笔“债务”，除非债务本身被还清，否则你将在未来为这笔债务支付“利息”。

# 技术债务的一个例子

一个例子可能是描述这一点的最佳方式。

假设你有一个应用程序，其中有一个页面列出了一些东西，这个列表允许用户进行搜索、排序等等。很棒，你也很开心。一旦这个功能已经建立和交付，现在需要在另一个页面上添加第二个列表。您查看代码，发现如果不进行相当大的重构，就无法重用第一页中的任何内容。您估计通过复制逻辑来构建新页面需要 2 天时间。然而，要重构第一个页面以便可以共享逻辑，并使用它构建新页面，需要 5 天时间。

如果您选择复制逻辑，您可以在最短的时间内构建并发布新页面。如果这是当时最重要的事情，那绝对没问题。但是这样做，你已经欠下了一笔债——每当你处理这些列表时，你现在有两个地方需要考虑。比方说，在将来，你在你的列表逻辑中发现了一个 bug 你现在必须在两个不同的地方更新和测试这个 bug，这将比没有复制逻辑的代价更高。

现在，决定何时偿还这笔债务取决于你认为你的应用程序将走向何方。如果您知道您永远不会添加另一个带有列表的页面，那么您可能会认为这是一个可以接受的债务，不值得将逻辑重构到一个地方。但是，如果您知道将来会添加更多这样的页面，您可能希望考虑尽早进行这种重构(并偿还债务)，以便将来页面的开发可以更快，而不是通过引入更多债务来使问题复杂化。

# 技术债务和糟糕代码的区别

上例中的关键问题是技术债务是作为一个有意识的决策引入的。

你看到你有一个如何建造某物的选项，你选择了最快/最容易的选项，并承认你不会去做理想的解决方案，那会花费更长的时间。

这绝对没问题。

事实上，能够做出这样的决定可以让你和你的团队优化你的工作效率。

技术债务可能被误用的地方是当它被用作糟糕代码的借口时。技术债务应该总是一个有意的决定，并且可以(并且应该)遵循一个良好的过程来定义和跟踪。

如果您发现您的应用程序中有些地方不能正常工作，经过调查，您发现这是因为代码写得不好——这不是技术债务。那是一个错误。它需要像这样被饲养和处理。您可能想要回顾您的质量过程，以找出代码是如何通过代码分析或代码评审阶段的。但是技术债务并不是所有代码错误的总称。它专门讨论了以特定方式编写的东西如何可能成为未来开发或维护的障碍。

技术债务的成本是一种内部的、以发展为重点的成本。任何外部可见的东西(比如用户能做什么，运行速度有多快，或者如何工作)都属于产品管理的范畴，不管它是功能性的还是非功能性的。是的，这两个问题可以紧密联系在一起(比如一个特性因为技术债务成本而没有完全交付)，但是重要的是要明白什么是什么是*不是*技术债务，因为你可能想要不同的过程来处理每种类型的问题。

# 主动和被动技术债务

有两种方法可以识别技术债务。主动或被动。

主动技术债务是在开发完成之前筹集的债务，并且是作为关于如何构建某物的技术决策的结果而有意筹集的。如果开发人员遇到一个会影响功能可交付性的问题，那么它可以在计划、技术改进甚至是构建中期提出。理想情况下，这个决定是由开发团队(他们提出选项并提供时间表和工作量的估计)和产品团队(他们需要决定受影响的可交付成果的优先级)共同做出的。最简单的形式是，开发团队将为产品团队提供一系列可用的选项，同时提供一份预期技术债务的摘要。

例如，假设正在计划一项功能，在开发团队对其进行优化之后，他们发现有 3 种方法可以采用:

*   选项 1 将需要 1 天的时间来构建，但它会使该领域未来的开发速度慢 50%
*   选项 2 需要 4 天来构建，并且会使未来的开发慢 10%
*   选项 3 是理想的解决方案，不会产生债务，但需要 8 天时间

然后，产品团队需要对工作进行优先级排序，并根据当前的工作量和其他优先级，确定哪个选项最合适。

这就是开发和产品团队之间良好的沟通和协作如此重要的原因。两个团队都在努力寻找最佳解决方案。开发人员倾向于更好地了解解决方案的内部质量，产品团队倾向于更好地了解解决方案每个部分的业务案例和优先级。产品团队应该接受开发团队的关注，同样，开发团队必须愿意灵活地使用他们的解决方案，以符合业务计划、成本和时间表。

一旦开发团队提出的一个选项被选择并达成一致，就知道将要发生的债务是什么。至此，债务可以有据可查。

像这样筹集和跟踪技术债务的一个好方法是在你用来管理特性和缺陷的任何跟踪软件中创建单独的项目。因此，假设您正在使用 Azure DevOps，您可以为此创建一个新的工作项，并将其放入 backlog 中。您可以重用现有的工作项类型(例如产品待定项)并将其标记/分类为技术债务，或者您可以专门为技术债务项创建专用的工作项类型。事实上，通过创建一个新的类型，您可以定制工作项类型字段，使其特定于技术债务，这样您就只记录了与债务相关的信息。一旦提出，最好将其与引发债务的原始项目联系起来，这样你就可以追溯其历史。记录当时所有可用的选项，以及选择该选项的理由也很有帮助，这样将来你就可以绝对确定为什么要做出特定的决定。

另一种技术债务，即反应性技术债务，是在开发完成后*确定并筹集的债务。当试图修复一个 bug 时，或者在解决方案的定期评审期间，或者在一个新特性的改进会议期间，可能会发现这个问题。它不会立即影响你正在做的工作，但是你可以看到它会在将来的某个时候引起问题。*

在长期运行的开发项目中，反应性技术债务几乎是不可避免的，尤其是如果同一个代码库是在几年内开发的。在项目的前几个月做出的一些决定在那个时候看起来是绝对合适的，但是 6 年后，像语言、模式和工具已经进步，更不用说开发团队的一般经验，那些决定可能看起来不那么好。

同样，这也没什么不对。事实上，这是完全自然的，很多时候都是意料之中的。

随着开发团队越来越擅长他们的工作，他们将能够设计出更有用、更高效、更清晰的解决方案。我知道我肯定可以回顾我 10 年前从事的项目，并对我当时做出的决定感到畏缩——这并不是说它们在当时不是好主意(有些是，有些肯定不是)，但是随着我作为开发人员的成长，我现在更加了解一些决定的含义，而我当时并不欣赏这些决定。

所以，当你在你的代码库中发现一些地方使你将来的开发变得更加困难时，试着不要对此感到太沮丧，但是要认识到这仍然是开发生命周期的一部分，并且确保你有一个体面的程序来处理它。

类似于主动技术债务可以作为新项目筹集，被动技术债务也可以。你要提供的细节大部分都是一样的，但是你会忽略债务产生的原因。不过，在这个过程的最后，你仍然会把债务记录在案，并以一种可以追踪的形式存在。

关于反应性技术债务的唯一警告是让你清楚地识别问题，并准确地指出需要改变什么来修复它。你可能会看到一个你不熟悉的特定模式，并认为这将花费你很长时间来处理，因此提出一个债务项目来重写它到你知道的东西。这样做的风险是，该模式可能被用于您不熟悉的特定原因，并且可能正在解决您尚未注意到的问题。因此，通过绝对清楚债务导致了什么问题，以及一个特定的解决方案将如何解决这个问题(没有倒退到任何其他问题)，你将避免做出只会让你今后做更多工作的改变。

确保被动技术债务确定的解决方案客观上优于当前的解决方案也是一个好主意。有时候，可以为一种模式筹集资金，只是因为它被认为“太老了”，或者有更新的方式来做某事。小心地将这类事情认定为债务，除非你确定它会减缓未来的发展。接受被动技术债务的门槛应该高于主动技术债务，因为你需要进一步证明*为什么*债务会导致问题，以及为什么提议的解决方案更好。有时，像这样的债务可能最终只是开发团队想要进行的变更的愿望清单，但是如果它没有可量化的理由(例如，*某个特定的债务如何*减慢开发)，它将使发现真正影响生产力的真正技术债务变得更加困难。像这样的项目应该属于技术或架构路线图，这样它们可以被相应地计划。

# 处理技术债务

一旦技术债务被确定并在某个地方被提出，下一个问题总是“我什么时候处理它？”。

有时候，这个问题的答案仅仅是“以后”。

这很好。

一旦筹集，技术债务不会自动成为最高优先级。这并不是说它可以被完全忽略，但是有一个中间地带，解决技术债务的价值可以与其他可交付成果的价值进行比较，并做出客观的决策。

最终，技术债务是为了您的利益，以及整个解决方案的利益，而不是为了拖累您和您的团队。

记住，债务的增加是因为你发现了阻碍未来发展的东西。在某些时候，你需要决定什么时候是处理债务的最佳时机，这是开发团队和产品团队可以合作的事情。

这可能有助于建立定期的审查会议，以检查技术债务，并查看在可能即将出现的其他未来工作之前处理某些东西是否有优势。或者，您可能计划实现一些功能，但发现只需稍加努力，您就可以重构某些东西，同时解决一些债务，因此您同意将这两者捆绑在一起。

另一种方法是将一定比例的开发时间用于解决技术债务项目(比如，sprint 的 5%)。如果你发现技术债务的数量在慢慢增加，而你又没有机会处理它们，这可能是个好主意。可能没有一项债务会给你带来问题，但总的来说，这些债务会拖慢整个解决方案的进度，所以你可以试着利用这段时间慢慢减少债务，直到它回到一个合理的水平。

# 这是短期可交付性和长期可持续性之间的平衡。

如果你从来没有处理过任何技术债务，你最终会得到一个很难处理的解决方案，任何新的开发都需要越来越长的时间来完成。同时，如果你的目标是没有任何技术债务，这可能会让企业付出太多的代价，并且他们可能看不到他们需要的可交付成果的价值。

通过确保整个团队理解您的技术债务，您可以对您的解决方案的未来发展做出明智的决策。

请记住，有技术债务并不是失败或不良实践的标志。这是务实地回顾您的技术决策的结果，并且在那个时刻为了您的团队和更广泛的业务做出最合适的决策。

# 技术债是一个健康有经验的团队的标志。

每当遇到自称没有技术债的团队，我都有点怀疑。在现实世界中，没有什么是完美的，通常情况下，“没有技术债务”实际上意味着“没有*承认*技术债务”，这意味着债务是存在的，但没有人真正知道它是什么，并且可能不会承认任何事情是一个问题。没有对内部需要改变的可见性，就不可能对需要的改变进行优先级排序和时间安排，并且很难量化和证明任何非功能性的内部开发工作对更广泛的业务的合理性。

当然，每个人都想要一个设计完美、易于使用的解决方案。如果你有时间和资源，那就去做吧。我们应该一直尽力做到最好。然而，也要谨慎地认识到，一些决策有相关的成本，有时明智的做法是在某些领域做出妥协，以支持其他目标或为更广泛的业务提供更多价值。通过有一个识别、筹集和解决技术债务的良好流程，您能够让业务的其他部分看到这些挑战，并且您将更容易将这些变化进行优先排序。