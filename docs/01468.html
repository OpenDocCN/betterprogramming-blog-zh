<html>
<head>
<title>Build a Sticky Navigation with Headroom.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Headroom.js构建粘性导航</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/lets-build-a-sticky-navigation-b20be4dd77f?source=collection_archive---------1-----------------------#2019-09-14">https://betterprogramming.pub/lets-build-a-sticky-navigation-b20be4dd77f?source=collection_archive---------1-----------------------#2019-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f9cd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">屏幕不动产是有价值的；我们应该优化每个像素</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7331059aca57dc9c2317c5f0f0ce44c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*49uTbOciJNPxIiwvcOpUCw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://codesandbox.io/s/github/indreklasn/headspace-header-example/tree/master/" rel="noopener ugc nofollow" target="_blank">粘性导航示例</a></p></figure><p id="a960" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个像素都很重要。我们对像素空间的优化越多，我们的最终用户就越高兴。快乐的用户会在我们的应用上花更多的时间，甚至会打开钱包以示感谢。</p><p id="f2b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">优化应用程序的一个简单而有效的方法是当用户向下滚动时隐藏标题。这给了用户更多的自由来探索内容，因为我们有更多的空间来显示内容。如果用户向上滚动，我们希望显示标题。我们如何实现这样的头球？对于这个任务，我选择了<a class="ae ky" href="http://wicky.nillia.ms/headroom.js/" rel="noopener ugc nofollow" target="_blank"> Headroom.js </a>库，因为它很简单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/1c985e01a9ac5762ce1639023a706853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OlCFkQUvQ8xGQnS4hPBHng.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">headroom . js—<a class="ae ky" href="https://github.com/WickyNilliams/headroom.js" rel="noopener ugc nofollow" target="_blank">https://github.com/WickyNilliams/headroom.js</a></p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="2f92" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Headroom.js</h1><p id="63db" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Headroom.js是一个轻量级、高性能的js小部件(没有依赖性！)允许您对用户的滚动做出反应。这个网站的标题就是一个活生生的例子，向下滚动时它会滑出视图，向上滚动时又会滑回来。</p><h2 id="6305" class="na me it bd mf nb nc dn mj nd ne dp mn li nf ng mp lm nh ni mr lq nj nk mt nl bi translated">为什么要用？</h2><p id="14a0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">固定标题是将主导航保持在用户附近的一种流行方法。这可以减少用户快速浏览网站所需的工作量，但也不是没有问题。</p><p id="99ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大屏幕通常是横向的，这意味着垂直空间比水平空间少。因此，固定标题会占据内容区域的很大一部分。小屏幕通常用于纵向。虽然这导致更多的垂直空间，但由于屏幕的整体高度，一个有意义大小的标题仍然会很有气势。</p><p id="af3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Headroom.js允许您在适当的时候将元素放入视图中，并在其余时间将焦点放在您的内容上。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="33fa" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">安装</h1><p id="bbec" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">假设你已经建立了你的项目，用<code class="fe nm nn no np b"><a class="ae ky" href="https://yarnpkg.com/lang/en/" rel="noopener ugc nofollow" target="_blank">yarn</a></code>安装Headroom。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="6886" class="na me it np b gy nu nv l nw nx">yarn install headroom.js</span></pre><p id="e593" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者在CDN中包含headroom.js库:</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="2375" class="na me it np b gy nu nv l nw nx">&lt;script    src="<a class="ae ky" href="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.10.2/headroom.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/headroom/0.10.2/headroom.min.js</a>"&gt;&lt;/script&gt;</span></pre><p id="0ff8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要一个用于样式的文件，一个JavaScript文件，最后是<code class="fe nm nn no np b">index.html</code>文件。继续创建这三个文件。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="99ef" class="na me it np b gy nu nv l nw nx">touch style.css index.html index.js</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6ca8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">超文本标记语言</h1><p id="92b7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">下面是我们的<code class="fe nm nn no np b">index.html</code>将会是什么样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="99c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我们有一个带有类<code class="fe nm nn no np b">headroom headroom-pinned headroom-unpinned</code>的头——这些类被有条件地应用，这取决于用户的操作。例如，如果用户向上滚动，我们应用<code class="fe nm nn no np b">headroom-pinned</code>类，如果用户向下滚动，我们应用<code class="fe nm nn no np b">headroom-unpinned</code>类。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="56b4" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">Java Script语言</h1><p id="2729" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">接下来，打开<code class="fe nm nn no np b">index.js</code> JavaScript文件并初始化headroom.js库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9716" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">超级简单。这是我们正在做的；</p><ul class=""><li id="77f2" class="oa ob it lb b lc ld lf lg li oc lm od lq oe lu of og oh oi bi translated">导入CSS样式，这样我们就可以设计我们的标题和应用程序。</li><li id="1406" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated">导入净空库。</li><li id="b575" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated">在我们的DOM中选择<code class="fe nm nn no np b">header</code>元素。</li><li id="1d5b" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated">使用<code class="fe nm nn no np b">header</code>元素调用Headroom构造函数，并将选项传递给构造函数。</li><li id="7fe1" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated">正在初始化<code class="fe nm nn no np b">headroom</code>对象。通过调用<code class="fe nm nn no np b">init</code>方法，我们附加了事件监听器来通知我们用户的动作。用户动作可以是向上滚动，或者在这种情况下是向下滚动。</li></ul><p id="1c4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您打开应用程序并开始滚动，您应该看到header元素根据用户操作改变类。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/11b23fa19c3274f4713431c261b04512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/1*V8OqCaB88gim0agusifVXg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">根据滚动操作换出的标题类</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="f4bb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">风格</h1><p id="5671" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">瞧，现在我们需要做的就是根据类来应用样式。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="1a20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就对了。这就是我们所需要的。如果用户向下滚动，我们就将标题动画化。如果用户向上滚动，我们从上向下滑动标题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7331059aca57dc9c2317c5f0f0ce44c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*49uTbOciJNPxIiwvcOpUCw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可滚动标题</p></figure><p id="3dda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里玩<a class="ae ky" href="https://codesandbox.io/s/github/indreklasn/headspace-header-example/tree/master/" rel="noopener ugc nofollow" target="_blank">演示</a>。<a class="ae ky" href="https://github.com/indreklasn/headspace-header-example" rel="noopener ugc nofollow" target="_blank">这里是Github上托管的源代码</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">粘性标题交互式演示</p></figure><p id="f1eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你是JavaScript新手，想学习这门语言，我建议你从阅读书籍和构建东西开始。从“<a class="ae ky" href="https://amzn.to/2LOkzjj" rel="noopener ugc nofollow" target="_blank"> <em class="oq">学习JavaScript的更聪明的方法</em> </a>”这本书和<a class="ae ky" href="https://medium.com/better-programming/the-secret-to-being-a-top-developer-is-building-things-heres-a-list-of-fun-apps-to-build-aac61ac0736c" rel="noopener">这里有一个要构建的有趣应用的列表</a>。</p><p id="ac6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。快乐编码，保持牛逼！</p></div></div>    
</body>
</html>