<html>
<head>
<title>Micro-Frontends and Their Benefits</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微前端及其优势</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/micro-frontends-and-their-benefits-674cce350ecc?source=collection_archive---------13-----------------------#2022-05-16">https://betterprogramming.pub/micro-frontends-and-their-benefits-674cce350ecc?source=collection_archive---------13-----------------------#2022-05-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d892" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让前端应用变得可管理和独立</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85e0019e874a24b06d0f1106b008eec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t8oIOrIONR68uyctJ7t5CA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自<a class="ae kv" href="https://unsplash.com/photos/wxWulfjN-G0" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的背景图片。由作者使用来自<a class="ae kv" href="https://www.manypixels.co/gallery" rel="noopener ugc nofollow" target="_blank">多像素</a>的免费图片编辑</p></figure><h1 id="6762" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">动机</h1><p id="bb7a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你关注前端社区有一段时间了，你会注意到很多人关注术语<strong class="lq ir">、【微前端】</strong>。越来越多的解决方案试图支持这种架构方法。它是将一个前端应用程序分割成独立的“微前端应用程序”，这些应用程序可以协同工作。</p><p id="fa13" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为什么这么做？</p><p id="9d29" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因为这可以帮助您使大型项目更易于管理，并且在从遗留软件解决方案过渡时有所帮助。<br/>在本文中，我想更详细地向您解释什么是微前端，以及它们如何为您带来益处。</p><h1 id="f8b2" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">什么是微前端？</h1><p id="8bea" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">微前端架构是前端软件开发中一种新的架构设计方法。在这种方法中，整个前端应用程序被分割成单独的微前端应用程序，它们一起工作。顾名思义，这个概念的灵感来源于微服务的架构概念。</p><p id="e245" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">据<a class="ae kv" href="https://micro-frontends.org/" rel="noopener ugc nofollow" target="_blank">Micro-Frontend.org</a>:</p><blockquote class="mq mr ms"><p id="1696" class="lo lp mp lq b lr mk jr lt lu ml ju lw mt mm lz ma mu mn md me mv mo mh mi mj ij bi translated">“微前端背后的想法是将一个网站或网络应用程序视为由独立团队拥有的功能组合。每个团队都有自己关心和擅长的<strong class="lq ir">不同的业务领域</strong>或<strong class="lq ir">任务</strong>。一个团队是<strong class="lq ir">跨职能</strong>并开发其功能<strong class="lq ir">端到端</strong>，从数据库到用户界面。</p></blockquote><p id="bd75" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一些好处是:</p><ul class=""><li id="0830" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj nb nc nd ne bi translated">架构可能变得更容易管理。</li><li id="8b02" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">开发团队可以在一个前端上协作和独立工作。</li><li id="c968" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">这种方法有助于从旧的应用程序迁移到新的应用程序。</li><li id="1795" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">独立部署是可能的。</li><li id="9780" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">明确合同。</li><li id="8cf5" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">更容易添加、更改或删除任何代码。</li><li id="6810" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">更容易测试。</li></ul><p id="e472" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">目前，还没有一种明确的方法来实现这种方法。此外，没有框架或库作为首选策略。因此，根据您的需求和限制，有多种方法可以实现它。</p><h2 id="e555" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">简洁的外观</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/b20e63a9442f272c25d46d09c30a11cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iw9UcGqdtCQFOgstYrTJpA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用<a class="ae kv" href="https://chalk.ist/" rel="noopener ugc nofollow" target="_blank">https://chalk.ist/</a>生成</p></figure><p id="0480" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里你可以看到一个使用HTML标记的例子，展示了这些微前端是如何集成的。布局可以根据您的要求而有所不同。无论它们是被用作导航标题，并排使用，还是像本例中那样，简单地一个放在另一个上面。微前端是框架中用于表示示例实现的定制组件。</p><p id="db49" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">微前端组件是做什么的？它只是呈现一个iframe。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/6fb6ef310298a6295c9e6d331bffd4d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zWZRJbXBWfKlT2R32rvi4g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用<a class="ae kv" href="https://chalk.ist/" rel="noopener ugc nofollow" target="_blank">https://chalk.ist/</a>生成</p></figure><h1 id="3d3a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">微前端的iframe集成</h1><p id="b41a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">iframe HTML元素在微前端的上下文中非常有用，因为它们提供了非常可靠的沙箱行为。<br/>然而，也有一些问题需要考虑:</p><ul class=""><li id="5716" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj nb nc nd ne bi translated">CSS在iframe中是完全独立的。</li><li id="4138" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">浏览器的后退按钮在保留内部iframes的导航状态方面不起作用。</li><li id="bb64" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">对于iframes之间的通信，必须查看CORS设置，可能需要使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" rel="noopener ugc nofollow" target="_blank"> postMessage </a>。</li><li id="fa6e" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">需要管理跨子域、iframes的整个认证。</li><li id="8e95" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">iframes将需要加载它们各自的脚本等。SSR可能会满足这个速度限制。</li></ul><h2 id="7467" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">无iframes嵌入</h2><p id="083f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在，当谈到包含没有iframes的微前端时，也有两种方法:</p><ul class=""><li id="342b" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj nb nc nd ne bi translated">通过标签将它们直接内联到页面的HTML中。</li><li id="4242" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated">把他们放在暗影王国。</li></ul><p id="0ce9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">内联和影子DOM方法在CSS方面有很大的不同。CSS将完全封装在影子DOM中。在内联的情况下，所有CSS将在整个页面中共享。</p><p id="a28a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><em class="mp">注意</em>——使用Angular、React或Vue等框架构建的应用程序可能很难完全存在于一个文档中，或者只存在于影子DOM中。对于这些，我们可能希望坚持使用iframes。</p><p id="0b43" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">微前端服务器将服务于整个HTML页面。这下麻烦了！我们不能将<code class="fe nx ny nz oa b">html</code>、<code class="fe nx ny nz oa b">head</code>或<code class="fe nx ny nz oa b">body</code> <em class="mp"> </em>标签插入到应用程序中而不破坏东西。</p><p id="1db2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这可以通过使用<em class="mp">模板</em>标签作为包装器来解决，其中微前端内容由服务器提供。现代浏览器可以解析一个模板标签，而不需要执行它。<br/>在这样做的时候，它们删除了无效的内容，比如<code class="fe nx ny nz oa b">&lt;html&gt;</code>、<code class="fe nx ny nz oa b">&lt;head&gt;</code>和<code class="fe nx ny nz oa b">&lt;body&gt;</code>标签，同时保留了它们的内部内容。所以<code class="fe nx ny nz oa b">&lt;head&gt;</code>中的<code class="fe nx ny nz oa b">&lt;script&gt;</code>和<code class="fe nx ny nz oa b">&lt;link&gt;</code>标签以及<code class="fe nx ny nz oa b">&lt;body&gt;</code>的内容都被保留了下来。这正是插入应用程序所需要的。</p><h1 id="9432" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">如何实现微前端</h1><p id="6f69" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">微前端架构有不同的方式，但以下是主要步骤:</p><ol class=""><li id="dec4" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj ob nc nd ne bi translated"><strong class="lq ir">在您的应用中定义</strong>微前端应用。</li><li id="22be" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><strong class="lq ir">微前端的组成</strong>。</li><li id="7df6" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><strong class="lq ir">路由</strong>前端。</li><li id="d0a3" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><strong class="lq ir">前端之间的通信</strong></li></ol><h2 id="c980" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">1.定义微前端</h2><p id="bbab" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如何定义你的微前端很重要。你的应用基于逻辑或业务的划分是关键。<br/>您可以使用逻辑责任，如一个团队开发的产品的产品简介或建议视图。在业务方面，您可以基于整个领域逻辑来划分职责。例如市场或新闻页面。</p><h2 id="f606" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">2.<strong class="ak">微前端的组成</strong></h2><p id="b564" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">有几种方法可以组成微前端:</p><ul class=""><li id="2d54" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj nb nc nd ne bi translated"><strong class="lq ir"> 1。在客户机</strong>上:所有的应用程序在初始构建时被组合和捆绑。</li><li id="69cd" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated"><strong class="lq ir"> 2。在服务器</strong>上:加载一个前端容器，所有微前端根据服务器的请求加载。</li><li id="033b" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj nb nc nd ne bi translated"><strong class="lq ir"> 3。在边缘</strong>:CDN集合视图。CDN提供商允许您使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Edge_Side_Includes" rel="noopener ugc nofollow" target="_blank"> Edge Side Includes </a> (ESI)。</li></ul><h2 id="4d93" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">3.微前端的路由</h2><p id="ed0f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">路由将取决于您选择的组合类型。<br/>使用服务器端组合，路由通过服务器发生。<br/>使用边缘端组合，CDN通过定义的包含来组装前端。在客户端组合中，微前端是根据应用程序内部的状态加载的。</p><h2 id="90fe" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">4.微前端之间的通信</h2><p id="4ed7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">就像路由一样，微前端之间的通信层高度依赖于您选择的组合类型。<br/>目标是向其他微前端发送有关用户交互的消息。<br/>为了确保不同的团队是松散耦合的，并从独立部署中获益，通信需要在前端不知道彼此的层上进行。</p><ol class=""><li id="c149" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj ob nc nd ne bi translated"><strong class="lq ir">事件总线和事件发射器</strong> —一种方法是使用带有事件总线的共享组件，并将其注入所有微前端。<br/>另一种方法是使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events" rel="noopener ugc nofollow" target="_blank">定制事件</a>。<br/>这非常灵活，因为有效负载包括事件的标识符和自定义对象。因为这些事件是通过一个公共窗口发送的，所以我们所有的微前端都可以访问它。</li><li id="e255" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><strong class="lq ir">使用web存储</strong> —如果我们所有的微前端都在同一个子域内，我们可以通过cookies、会话和本地存储来存储和访问数据。</li><li id="7d07" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><strong class="lq ir">查询字符串</strong> —作为URL一部分的查询字符串可用于在微前端中传递和访问数据。这个效率很低。</li></ol><h2 id="73d6" class="nk kx iq bd ky nl nm dn lc nn no dp lg lx np nq li mb nr ns lk mf nt nu lm nv bi translated">流行的框架</h2><p id="b077" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">下面是一些创建微前端的流行框架:</p><ol class=""><li id="9998" class="mw mx iq lq b lr mk lu ml lx my mb mz mf na mj ob nc nd ne bi translated"><a class="ae kv" href="https://single-spa.js.org/" rel="noopener ugc nofollow" target="_blank">单温泉</a></li><li id="94af" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><a class="ae kv" href="https://frint.js.org/" rel="noopener ugc nofollow" target="_blank"> FrintJS </a></li><li id="d132" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><a class="ae kv" href="https://webpack.js.org/concepts/module-federation/" rel="noopener ugc nofollow" target="_blank">模块联盟</a></li><li id="817c" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><a class="ae kv" href="https://bit.dev/" rel="noopener ugc nofollow" target="_blank">位</a></li><li id="224f" class="mw mx iq lq b lr nf lu ng lx nh mb ni mf nj mj ob nc nd ne bi translated"><a class="ae kv" href="https://github.com/smapiot/piral" rel="noopener ugc nofollow" target="_blank">皮拉尔</a></li></ol><h1 id="555a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">摘要</h1><p id="34f7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本文中，我试图向您展示什么是微前端，以及实现这种架构方法的好处。<br/>然而，微服务也适用同样的规则。</p><p id="9ed3" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">检查您的需求和限制，以及组织的含义是否会对您有益。那么微前端可以是独立和个体前端的有益方法。</p></div></div>    
</body>
</html>