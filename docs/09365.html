<html>
<head>
<title>10 Awesome JavaScript One-Liners Utilities for Daily Usage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10个非常棒的日常使用的JavaScript一行程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/10-awesome-javascript-one-liners-utilities-for-daily-usage-ffd6a31e89d6?source=collection_archive---------1-----------------------#2021-08-16">https://betterprogramming.pub/10-awesome-javascript-one-liners-utilities-for-daily-usage-ffd6a31e89d6?source=collection_archive---------1-----------------------#2021-08-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="54d9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更新cookie值，检测悬停效果，等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/15febf5be9f94764291b4e0408f85e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7PmJ_r46wt2pDfM53bGT_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者创作的封面</p></figure><p id="27a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为JavaScript是最流行的语言之一，所以有大量的库。这并不意味着我们应该沉迷于不断地向我们的代码库添加更多的东西。我们可能只需要这个我们可以自己构建的工具。</p><p id="4a26" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">大约五年前，流行的npm模块<code class="fe lu lv lw lx b">left-pad</code>的删除给互联网带来了短暂的混乱。这是一个可以用一行代码轻松构建的实用程序。事实上，它在<code class="fe lu lv lw lx b">ES7</code>规格中可用。</p><p id="e007" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们如何防止这种情况发生？我们应该不断地重新发明轮子吗？</p><p id="bcae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不，我们需要明智而整洁地对待我们的npm依赖关系。我们需要评估只为一个实用程序添加一个库是否值得。我们自己编码将会给我们更多的控制和对正在执行的内容的更好的理解。</p><p id="cc53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将看到十个强大的JavaScript一行程序工具的例子，它们易于构建和测试。</p><h1 id="6737" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">1.生成随机布尔值</h1><p id="df1c" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们知道<code class="fe lu lv lw lx b">Math.random</code>返回一个在<code class="fe lu lv lw lx b">0</code>和<code class="fe lu lv lw lx b">1</code>之间的值。我们可以利用这些知识来创建一个非常简单的布尔生成器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="5a2d" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">2.生成一个随机数</h1><p id="f882" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们将再次利用<code class="fe lu lv lw lx b">Math.random</code> API。将结果乘以最大值并四舍五入。然后我们将获得一个在<code class="fe lu lv lw lx b">0</code>和<code class="fe lu lv lw lx b">max</code>之间的数字。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="bab6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很容易将这种方法进一步扩展到接受最小和最大范围。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="0a9f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们在上面的代码中所做的是生成一个区间数的区间差。之后，我们添加最小值。这将在我们给定的范围内产生一个数字。</p><h1 id="a6a0" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">3.生成随机ID</h1><p id="bb2f" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">为了生成这个实用程序，我们将依赖于<code class="fe lu lv lw lx b">toString</code>方法。它将让我们把随机数转换成字符串。</p><pre class="kj kk kl km gt mx lx my mz aw na bi"><span id="6b29" class="nb lz it lx b gy nc nd l ne nf"><em class="ng">num</em>.toString(radix)</span></pre><p id="f3a1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，该方法采用了一个可选参数<code class="fe lu lv lw lx b">radix</code>，该参数应该在2到36之间。</p><p id="84a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于这种方法，我们将使用最大可接受基值<code class="fe lu lv lw lx b">36</code>，原因如下:</p><blockquote class="nh ni nj"><p id="a27a" class="ky kz ng la b lb lc ju ld le lf jx lg nk li lj lk nl lm ln lo nm lq lr ls lt im bi translated"><strong class="la iu"> "Base36 </strong>是一种二进制到文本的编码方案，它通过将二进制数据转换成radix-36表示来表示ASCII字符串格式的二进制数据。选择36是很方便的，因为这些数字可以用阿拉伯数字0-9和拉丁字母A-Z[1]”来表示</p></blockquote><p id="c20e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将跳过前两个字符，因为它们最有可能是<code class="fe lu lv lw lx b">0.</code>。让我们用一个例子来看看我们的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1f01" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">⚠️ <code class="fe lu lv lw lx b">Math.random</code>结果不包括<code class="fe lu lv lw lx b">1</code>，包括<code class="fe lu lv lw lx b">0</code>。这意味着我们的<code class="fe lu lv lw lx b">randomId</code>结果是<code class="fe lu lv lw lx b">""</code>的可能性很小。这是因为我们依赖于序列的开始是<code class="fe lu lv lw lx b">0.</code>。</p><p id="9370" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以简单地为该场景返回<code class="fe lu lv lw lx b">0</code>,或者您认为合适的任何其他默认字符串id:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="e285" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的<code class="fe lu lv lw lx b">randomId</code>方法现在是健壮的。它将返回一个字母数字随机id。</p><h1 id="01a2" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">4.生成一个随机的十六进制数</h1><p id="8e97" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们可以应用上面看到的相同原理来创建一个随机的十六进制数函数。对于下一个方法，我们将使用<code class="fe lu lv lw lx b">ES7</code>字符串填充函数:<code class="fe lu lv lw lx b">padEnd</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9f2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们不想依赖<code class="fe lu lv lw lx b">ES7</code>，我们可以简单地用一种更有效的方式来做:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1a6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">两种解决方案都很棒。您的选择将取决于您是否希望牺牲一点性能来换取可读性。</p><h1 id="e606" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">5.初始化数组</h1><p id="6173" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们不断地操纵数组。谢天谢地，有了所有新的ECMAScript规范，我们有了更多的数组工具。我们可以用它来创建很棒的一行程序。</p><p id="c483" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lu lv lw lx b">Array(x)</code>是初始化长度为<code class="fe lu lv lw lx b">x</code>的数组的好方法。让我们用它来创建一个有序的数字数组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="8029" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以很容易地创建一个布尔数组:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="131e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认情况下，它将为false，但是我们可以通过向函数传递第二个参数来覆盖它。</p><h1 id="97cf" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">6.从数组中删除重复项</h1><p id="196f" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">移除数组的副本很容易做到。我们可以为此使用<code class="fe lu lv lw lx b">Set</code>对象，然后转换回一个数组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="ba21" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">7.打乱数组</h1><p id="324a" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">起初，打乱一个数组可能听起来有点困难。我们可以使用<code class="fe lu lv lw lx b">sort</code>方法。</p><p id="6e60" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">⚠️注意到<code class="fe lu lv lw lx b">sort</code>方法会使目标数组变异。我们必须首先为我们的数组创建一个副本，然后对其进行排序。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1f5a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lu lv lw lx b">sort</code>方法API采用两项参数进行相互比较。我们将忽略这些，因为我们随机决定一个项目是否大于订单。</p><h1 id="e172" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">8.检测悬停效果特征</h1><p id="320b" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">由于UX的原因，知道用户是否拥有具有悬停效果功能的设备是很方便的。我们可能希望根据这个标准来调整我们的布局。</p><p id="2ccb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">API将授权我们为此创建一个实用程序:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="e9d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过查询<code class="fe lu lv lw lx b">matchMedia</code>，我们可以检查浏览器是否有过多的功能。</p><h1 id="17ff" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">9.获取Cookie值</h1><p id="0653" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">有时我们依赖第三方库，如<code class="fe lu lv lw lx b">cookie-manager</code>或<code class="fe lu lv lw lx b">js-cookies</code>来处理所有的cookies交互。如果我们只需要几个cookie工具，我们可以自己实现它们。</p><p id="1c1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从JavaScript访问客户端cookies很容易:</p><blockquote class="nh ni nj"><p id="05ee" class="ky kz ng la b lb lc ju ld le lf jx lg nk li lj lk nl lm ln lo nm lq lr ls lt im bi translated">“<code class="fe lu lv lw lx b">Document</code>属性<code class="fe lu lv lw lx b">cookie</code>允许您读写与文档相关的cookies。它充当cookies实际值的获取器和设置器。— MDN</p></blockquote><p id="dab8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">总之，浏览器cookies是关于处理包含所有信息的<code class="fe lu lv lw lx b">document.cookie</code>字符串的。</p><p id="a764" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们创建一个实用程序，通过名称获取某个cookie的值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9a97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，我们将依靠正则表达式来找出值。我们将通过使用括号来使用正则表达式组。我们将使用可选操作符<code class="fe lu lv lw lx b">?</code>来防止任何未定义的错误。</p><p id="5ce0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">⚠️如前所述，你将无法从JavaScript端访问<code class="fe lu lv lw lx b">Http Only</code>cookie。</p><h1 id="42cd" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">10.更新Cookie值</h1><p id="452e" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">更新cookie值可能看起来是一项微不足道的任务。然而，浏览器的安全性让这变得很难。</p><p id="eb20" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lu lv lw lx b">document.cookie</code> API只是公开了cookie的值。它省略了任何关于cookie的<code class="fe lu lv lw lx b">domain</code>或<code class="fe lu lv lw lx b">path</code>信息。要更新cookie，您需要这两条信息。否则，您可能会创建新的cookie，而不是更新现有的cookie。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="aca2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意<code class="fe lu lv lw lx b">document.cookie</code>既是cookie API的读写接口。</p><h1 id="f0d6" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">最后的想法</h1><p id="b2e2" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们已经看到为我们的JavaScript代码库创建实用程序是多么容易和有趣。通过构建我们自己的函数，我们将获得对我们的应用程序中正在运行的东西的控制。另一个好处是，我们将学习更多关于网络和浏览器的见解，而不是依赖库来为我们做工作。</p><p id="7418" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随着每个EMAScript版本的发布，普通JavaScript变得越来越强大。这意味着我们将需要更少的图书馆。我们将有更好的工具来建造更多的设施。</p><p id="c3db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与任何代码一样，我们只需关注transpilers和polyfills，这样我们的应用程序就可以在任何浏览器中运行。</p><p id="b481" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">干杯。</p><h1 id="59b6" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">有关系的</h1><div class="nn no gp gr np nq"><a rel="noopener  ugc nofollow" target="_blank" href="/javascript-es2021-a-look-at-the-new-features-7d5770288648"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">JavaScript ES2021:看看新特性</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">新ES12规格概述</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">better编程. pub</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe ks nq"/></div></div></a></div><div class="nn no gp gr np nq"><a rel="noopener  ugc nofollow" target="_blank" href="/7-tips-to-write-efficient-and-performant-javascript-code-bccbdb9662ae"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd iu gy z fp nv fr fs nw fu fw is bi translated">编写高效高性能JavaScript代码的7个技巧</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">提升您的JavaScript应用程序的性能</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">better编程. pub</p></div></div><div class="nz l"><div class="of l ob oc od nz oe ks nq"/></div></div></a></div></div></div>    
</body>
</html>