<html>
<head>
<title>Awesome Logging in Go With Logrus</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">棒极了的日志记录</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/awesome-logging-in-go-with-logrus-70606a49f285?source=collection_archive---------3-----------------------#2022-03-29">https://betterprogramming.pub/awesome-logging-in-go-with-logrus-70606a49f285?source=collection_archive---------3-----------------------#2022-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3f39" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">到目前为止，我很喜欢在几个项目中使用它</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/402cd9707d91d2155798f6c4ef90f42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3oGQ2qQEUy2ALcXH0njKqA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://unsplash.com/@afgprogrammer" rel="noopener ugc nofollow" target="_blank">穆罕默德·拉赫马尼</a>通过<a class="ae kv" href="https://unsplash.com/photos/Y5yxdx2a4PI" rel="noopener ugc nofollow" target="_blank"> unsplash </a></p></figure><p id="602f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Github上有很多Go的日志库。不过我真的很喜欢用<a class="ae kv" href="https://github.com/sirupsen/logrus" rel="noopener ugc nofollow" target="_blank"> logrus </a>。</p><p id="7005" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个日志库，提供了我需要的所有功能，并提供了有用的功能，如彩色输出，完整或简短的时间戳打印和记录额外字段的功能。</p><p id="01c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然它目前处于维护模式(以避免在未来版本中出现破坏性的变化)，但安全补丁和错误修复仍然适用。查看GitHub repo，您可以看到在这方面投入了大量的精力(例如在提交方面)。让我们深入了解一些配置和使用示例。</p><h1 id="aa3f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">日志级别</h1><p id="913f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Logrus提供不同的日志级别，即“紧急”、“致命”、“错误”、“警告”、“信息”、“调试”、“跟踪”。通常，这些级别是有序的，如果级别设置为info，则不会记录对更低级别(如trace)的调用。可以通过<code class="fe mp mq mr ms b">SetLevel</code>设置等级。我最喜欢的导入logrus的方式是将其命名为<code class="fe mp mq mr ms b">log</code> <em class="mt">，</em>，这样日志更方便<em class="mt">。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="8211" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">格式化</h1><p id="67a8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Logrus提供了不同的格式化程序，比如:<code class="fe mp mq mr ms b">TextFormatter</code>和<code class="fe mp mq mr ms b">JSONFormatter</code>。这些打印机打印不同的输出，可以用一组选项进行配置。我最喜欢的配置是使用<code class="fe mp mq mr ms b">TextFormatter</code>，启用颜色和完整的时间戳支持。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="ad32" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">记录</h1><p id="5d9c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在logrus中，每个日志级别由两个独立的函数实现，对于级别信息，它们被称为<code class="fe mp mq mr ms b">Info</code>和<code class="fe mp mq mr ms b">Infof</code>。</p><p id="245d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个用于记录一个简单的字符串，第二个接受一个包含格式的字符串，后跟一个可变的接口参数列表。</p><p id="8897" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，<code class="fe mp mq mr ms b">logrus</code>提供了一个<code class="fe mp mq mr ms b">WithField</code>函数来添加字段到一个记录器中，这可以用来生成一个带有上下文的记录器</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="5440" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管有很多竞争，用于登录Go的logrus库在几个项目中为我提供了很好的服务，并且知道技巧和配置，它确实提供了很好的登录体验。</p><p id="dfab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我肯定会把它推荐给任何在Go中寻找日志库的人。</p></div></div>    
</body>
</html>