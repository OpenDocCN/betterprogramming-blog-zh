# 代码的 5 个规则

> 原文：<https://betterprogramming.pub/5-rules-of-code-6970a55a444b>

## 作为一名现代开发人员，维护代码和理智的规则

![](img/4edb7aafff71e78f896b0f406ba29a1e.png)

埃菲社在 [Unsplash](https://unsplash.com/s/photos/abstract?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

在过去的一段时间里，我编制了一份“戒律”清单:作为一名现代开发人员，你必须做和不可以做的事情。让我们浏览其中的五个，并讨论为什么你应该为你自己和你的团队采用它们。

# 1.Monorepos:就是不要

如果你不熟悉 monorepo 的概念(我很羡慕你),那么让我来解释一下:monorepo 的概念不是让你的应用程序有多个源代码库，而是把所有东西放在一个库中。

这可以让参与多个项目变得更容易，但是这是有代价的:你*必须*使用 subversion，你*不能*使用 [Git](https://git-scm.com/) 。尽管 Git 有很多优点，但它不支持像 subversion 这样的稀疏签出。

稀疏签出允许您签出一个更大的树的单个目录，而不是像 Git 那样签出整个树。这意味着您可以让多个人或团队在一棵树的各个部分上工作，而不会有重叠。

使用 Git 无法做到这一点，因此在使用 Git 作为源代码控制时，应该为离散的应用程序使用单独的存储库。

# 2.先有问题，再有解决方案。

每个人都有自己喜欢用的常用工具: [Redis](https://redis.io/) 、 [MySQL](https://www.mysql.com/) 等。没关系，有偏好是健康和正常的。

但是当这些偏好变成需求时，我们就遇到了麻烦；透过它，每个问题都不可偏离。让我们不要被欺骗了，这不仅仅是个人的恶行，整个组织都有责任。

许多公司强制使用特定的技术、库或工具，通常很少考虑或输入来自实际使用或实现这些技术的开发人员和操作工程师的意见。

这是我长期以来对企业架构团队的不满的一部分，以及他们对实际编写代码的凡人的神一样的力量。

通常，是架构团队决定公司将使用某项技术或产品——如 [Kubernetes](https://kubernetes.io/) 、 [OpenShift](https://www.openshift.com/) 、 [AWS](https://aws.amazon.com/) 等。—没有充分了解组织内部的问题以及这些技术旨在解决什么问题。

我在 Capital One 的时候亲眼目睹了这一点，当时我们的架构团队决定我们将成为一家 Kubernetes 公司，但对于我们这些必须实际开发和实现围绕它的系统和工具或运行在它上面的应用程序的人来说，这意味着什么，我没有任何真正的感觉。

而且通常是架构(或者他们营养不良的同父异母兄弟，企业安全)导致了很多阻碍他们得到他们想要的东西的障碍。

如果他们——无论是架构还是安全——在决定使用什么工具之前先理解了需要解决的问题，那么事情可能会有很大的不同，而且很可能会顺利得多。

# 3.提问

听起来很容易。如此简单。太幼稚了。然而，如此艰难。不明白什么？提问。想知道为什么事情是这样的吗？提问。想知道项目的走向吗？提问。

仅仅因为你问了并不意味着你会得到你想要的答案，或者任何答案，但是如果你不问问题，你就永远不会知道答案。

来到一个新团队或开始一份新工作后，最好的事情之一就是问所有的问题。拉 FNG 牌就像第一次有了一张“别装傻”的牌。

以“嘿，我对这一切都不熟悉，所以让我问一个可能很愚蠢的问题……”开头的问题是一个很棒的方法，可以找出你想知道的事情，同时也可以挑战现状。

你会惊讶地发现有多少组织“因为原因”而以某种方式做事。通常，这是因为有人不久前就这样设置了，没有人费心回去修复它。

通过提问、挑战假设和挖掘信息，我们让我们的团队、我们的小组、我们自己以及我们的生活变得更好。我已经能够通过问这样的问题从基础设施中去掉整个层。

谁知道你能修剪出什么。

# 4.方木钉插不进圆孔

就像许多美好的事物一样——做爱、团队合作、精密螺纹的机器螺丝——好的时候感觉毫不费力。我们的生活充满了反馈，不管是明确的还是不明确的。

当你打字时键盘在手指下的感觉，当你按下一个扁平的假想按钮时手机发出的轻微震动，每当我决定吃冰淇淋是 100%值得的时候，我那不能忍受乳糖的胃就会反胃；这些都是反馈的形式。

他们让我们知道什么时候事情进展得很好，正常，或者非常非常糟糕，这对于几乎所有事情都是一样的。我们以前都有过这样的经历，在一个项目中工作，那种不安的感觉一直在告诉我们，我们应该改变数据库，以更好地支持我们的数据模型。

如果你只是使用一个关系数据库和一个表单，而不是写很多脆弱的数据转换代码，你可以在数据库中做很多。或者，在发现自己在一个新的团队或一份新的工作中，你只是因为某些原因无法与同事相处。

不是你不喜欢他们或者他们不喜欢你，只是有些性格在一起比其他人更好。不要勉强。找到更好的解决方案，然后去做。

与您的经理讨论更换团队的事宜。找到一个 ORM 然后开始工作。停下你正在做的事情，做那些会让你毫不费力的事情。[把方钉/圆孔的问题留给 NASA 的书呆子](https://gizmodo.com/this-is-the-actual-hack-that-saved-the-astronauts-of-th-1598385593)。

# 5.使用最好的工具(除非是 Java)

我这么说可能会遭到很多人的憎恨，但是我看不出在今天的行业中使用 Java 的理由。

我不否认，Java 确实有一些竞争优势，但是这些优势并不真正适用于今天的工程环境。以下是使用 Java 的一些优点:

*   它可以在任何地方运行。
*   自动内存管理(带垃圾收集器)。
*   JVM 堆栈的广泛社区和框架/库/插件。

让我们谈一分钟现实:你看到多少使用 Java 的软件商店编写一个单一的代码库，目的是在多种架构、操作系统等上运行它。？至少不是大多数人。

今天，Java 在内存管理领域也不是独一无二的。 [Go](https://golang.org/) 和 [Rust](https://www.rust-lang.org/) 都有某种垃圾收集， [Python](https://www.python.org/) 使用引用计数，许多其他语言也是如此。

到目前为止，Java 并不是唯一拥有大量活跃社区的语言。Rust 和 Python 有非常活跃和有用的社区，Go 的社区每天都在增加。

但是你用 Java 做的其他权衡，至少在我看来，不值得。因为 Java 依赖于 JVM，所以每个 Java 应用程序都会自动产生大小成本。

当谈到具有千兆字节空闲空间的服务器时，这可能不是一个很大的考虑因素——几百 MB 并不多——但是在一个高度容器化的世界中，几百 MB 是天文数字。(注意 Python 也有这个缺点。)

使用像 Go 和 Rust(以及其他)这样的编译、静态链接的语言，您可以拥有非常小、非常精简的容器，其中通常只有一个二进制文件，大小只有 4 MB。

这对于网络吞吐量非常重要的大型组织来说尤其重要，下载 400 MB 或 5 MB 的新容器是一个容易的选择。

此外，因为 JVM 和 Java 是 JIT 编译的，所以运行 Java 代码是有性能成本的。

对于低延迟、高吞吐量的应用程序，或者对服务器进行二进制打包非常重要的场景，将性能损失在将字节码转换成系统调用的开销上是不值得的。

所有这些都说明了为手头的工作使用合适的工具是多么重要。

你不会想用 BASIC 让某人登陆月球，也不会想用 Java 进行高性能计算——找到与你要解决的问题相匹配的解决方案。

# 结论

知道我错过了什么吗？对更多规则有想法吗？请在下面的评论中告诉我！我喜欢看到您的反馈，并参与每个人对文章的想法。