<html>
<head>
<title>How To Show Notifications in a Web Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Web应用程序中显示通知</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-show-notifications-in-a-web-application-72a1e76dabc2?source=collection_archive---------2-----------------------#2022-10-19">https://betterprogramming.pub/how-to-show-notifications-in-a-web-application-72a1e76dabc2?source=collection_archive---------2-----------------------#2022-10-19</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="53ec" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">这一有用功能的简要指南</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/79b78e202e843b4370e1255dcabbecaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EdA_h1RZL9NKu8w8"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="8a54" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上个月，我做了一个兼职项目，一个允许你加密和解密短信的网络应用程序(<a class="ae kz" href="https://docrypt.org/" rel="noopener ugc nofollow" target="_blank">DoCrypt.org</a>)。这仍然是一项正在进行的工作，但我已经实现了一些我想分享的功能。我认为这是一个有趣的项目，我打算为此写几篇文章。我想把重点放在我最近实现的一个特性上:通知。</p><h1 id="136c" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">问题</h1><p id="0d50" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">我想从视觉上确认一些操作的成功。特别是加密文本的“复制到设备剪贴板”。这是我实现的一个特性，允许用户将密文复制到外部应用程序，比如文本消息。出于这个原因，我决定实现一个通知，确认复制到设备剪贴板。</p><p id="9063" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">视觉上，这是我想要达到的结果:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mt"><img src="../Images/e3583fd040745233b61106817cfb5588.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/0*2eh3ZKVxqkXVXFQ1.gif"/></div></figure><p id="32b4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如您所见，通知是一个出现在右上角的小条。该栏为绿色，包含一条文本消息。该条在短时间内保持可见，然后消失。有趣的是，我可以使用相同的方法来显示不同颜色和不同消息的不同通知。</p><h1 id="b9f9" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">我创建一个通知存储</h1><p id="bb32" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">为了解决这个问题，我使用了一个细长的组件。背后的想法不是我的。这个<a class="ae kz" href="https://twitter.com/kevmodrome" rel="noopener ugc nofollow" target="_blank">@ kevmodrome</a><a class="ae kz" href="https://svelte.dev/repl/2254c3b9b9ba4eeda05d81d2816f6276" rel="noopener ugc nofollow" target="_blank">repl</a>给了我灵感。我根据自己的需求定制了一切。</p><p id="7ead" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我需要两样东西:在屏幕上显示通知的HTML元素和跟踪通知本身及其生命周期的东西。我从这方面开始。为了解决这个问题，我使用了一个<a class="ae kz" href="https://svelte.dev/docs#run-time-svelte-store" rel="noopener ugc nofollow" target="_blank">存储库</a>。</p><p id="061c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我创建了<code class="fe mu mv mw mx b">Notification.ts</code>文件，并从设置一些接口和创建一个简单的存储开始:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="0038" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如您所见，我已经创建了一个表示通知的<code class="fe mu mv mw mx b">Msg</code>界面。通知的类型可以是<code class="fe mu mv mw mx b">default</code>、<code class="fe mu mv mw mx b">danger</code>、<code class="fe mu mv mw mx b">warning</code>、<code class="fe mu mv mw mx b">info</code>或<code class="fe mu mv mw mx b">success</code>。通知的类型决定了条形的颜色。消息是显示在栏中的文本。最后，超时是通知保持可见的时间。如果未指定，默认值为3000毫秒。</p><p id="b8d9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于每个通知，我分配一个ID；我需要一个唯一的标识符，以便稍后与通知本身进行交互。我不能使用基于数组长度的计数器，因为我可以取消一个通知，然后计数器将不再有效。出于这个原因，我使用<code class="fe mu mv mw mx b">idGenerator()</code>函数来生成一个惟一的ID。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="1a36" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，我需要一种方法来向存储添加通知:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="7212" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我使用商店的<code class="fe mu mv mw mx b">update()</code>方法向数组添加一个新的通知。<code class="fe mu mv mw mx b">update()</code>方法接受一个函数，该函数接收存储的当前状态并返回更新后的状态。在本例中，我向数组添加了一个新的通知。</p><p id="e286" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我对显式传递id感兴趣，因为在某些情况下，我可能对从组件外部访问通知感兴趣。如果我选择不传递id，我会在内部生成它。</p><p id="9eaa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在，我需要一种方法来从存储中删除通知:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="d06a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我使用<code class="fe mu mv mw mx b">update()</code>方法，结合<code class="fe mu mv mw mx b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank">filter()</a></code>方法从数组中移除通知。</p><p id="7b8a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了管理消失的通知，我需要一个计时器或类似的东西。我使用<code class="fe mu mv mw mx b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout" rel="noopener ugc nofollow" target="_blank">SetTimeout()</a></code>方法:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="4477" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">综合所有这些，我得到了完整的<code class="fe mu mv mw mx b">Notification.ts</code>文件，如下所示:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="02c6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">完成商店部分后，我继续进行<code class="fe mu mv mw mx b">component</code>部分。</p><h1 id="2152" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">我创建了一个显示通知的组件</h1><p id="7488" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">我创建了<code class="fe mu mv mw mx b">Notification.svelte</code>文件，并开始用以下代码导入商店:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="9014" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要访问存储值，我可以使用<a class="ae kz" href="https://svelte.dev/docs#component-format-script-4-prefix-stores-with-%24-to-access-their-values" rel="noopener ugc nofollow" target="_blank">反应</a> <code class="fe mu mv mw mx b"><a class="ae kz" href="https://svelte.dev/docs#component-format-script-4-prefix-stores-with-%24-to-access-their-values" rel="noopener ugc nofollow" target="_blank">$store</a></code> <a class="ae kz" href="https://svelte.dev/docs#component-format-script-4-prefix-stores-with-%24-to-access-their-values" rel="noopener ugc nofollow" target="_blank">语法</a>。此外，为了显示存储中包含的所有值，我使用了<code class="fe mu mv mw mx b"><a class="ae kz" href="https://svelte.dev/docs#template-syntax-each" rel="noopener ugc nofollow" target="_blank">{#each...}</a></code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="4113" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如您所见，我使用了<code class="fe mu mv mw mx b">each</code>方法来迭代所有的存储值。对于每个值，我用通知文本创建一个div。</p><p id="a5f7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">组件是完整的，但我感兴趣的是添加一些风格，使它更多汁。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="9564" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这样，我在屏幕的右上角显示通知，一个在另一个上面。</p><p id="b0e7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我如何根据类型用不同的颜色显示通知呢？为此，我根据通知类型和用作颜色引用的对象向<code class="fe mu mv mw mx b">toast</code> div添加了一个类:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="1c85" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我可以通过添加一个动画来突出通知的出现和消失，让它变得更漂亮。为此，我使用了<a class="ae kz" href="https://svelte.dev/docs#run-time-svelte-transition" rel="noopener ugc nofollow" target="_blank">细长/过渡</a>和<a class="ae kz" href="https://svelte.dev/docs#run-time-svelte-animate" rel="noopener ugc nofollow" target="_blank">细长/动画</a>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="0398" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">综合所有这些，我最终得到了我的<code class="fe mu mv mw mx b">Notification.svelte</code>组件:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="360d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在剩下的就是在我们的应用程序中使用它。</p><h1 id="8ca7" class="lw lx iu bd ly lz ma mb mc md me mf mg ka mh kb mi kd mj ke mk kg ml kh mm mn bi translated">我将组件添加到页面中</h1><p id="35ad" class="pw-post-body-paragraph la lb iu lc b ld mo jv lf lg mp jy li lj mq ll lm ln mr lp lq lr ms lt lu lv in bi translated">为了将组件添加到页面中，我需要将其导入到<code class="fe mu mv mw mx b">App.svelte</code>文件中。下面是如何做到这一点:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="09bd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我只需要导入一次，在应用的主页面上。这样，我可以从任何应用程序页面开始显示通知。</p><p id="6e51" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，为了在我复制密文时显示通知，我向组件添加了以下代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj na"><img src="../Images/d2d61b8dfc4fd7f716c195e03e62305e.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/0*Rw6frnjtBOw0svW3.gif"/></div></figure><p id="efa0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者，如果我想显示不同颜色的通知，我只需更改消息的<code class="fe mu mv mw mx b">type</code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="my mz l"/></div></figure><p id="05c2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">好吧，我想说现在就这些了。如果你想看完整的代码，可以在<a class="ae kz" href="https://github.com/el3um4s/docrypt" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。该应用可在<a class="ae kz" href="https://docrypt.org/" rel="noopener ugc nofollow" target="_blank">docrypt.org</a>上获得。</p><p id="e434" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><p id="9ef0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="ni">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae kz" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="lc iv"> <em class="ni">中邮箱列表</em> </strong> </a></p><div class="nj nk gq gs nl nm"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="nn ab fp"><div class="no ab np cl cj nq"><h2 class="bd iv gz z fq nr fs ft ns fv fx it bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="nt l"><h3 class="bd b gz z fq nr fs ft ns fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="nu l"><p class="bd b dl z fq nr fs ft ns fv fx dk translated">el3um4s.medium.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kt nm"/></div></div></a></div></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><p id="b065" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="ni">原载于2022年10月15日https://blog.stranianelli.com</em><a class="ae kz" href="https://blog.stranianelli.com/how-to-show-notifications-in-web-application/" rel="noopener ugc nofollow" target="_blank"><em class="ni"/></a><em class="ni">。</em></p></div></div>    
</body>
</html>