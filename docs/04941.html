<html>
<head>
<title>Alerts in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的警报</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/alerts-in-swiftui-a714a19a547e?source=collection_archive---------6-----------------------#2020-05-25">https://betterprogramming.pub/alerts-in-swiftui-a714a19a547e?source=collection_archive---------6-----------------------#2020-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fd59" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在SwiftUI中高效呈现警报</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9373855d1deda1b51623833598acaae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-8JeCwX_7pvdxWMy"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@scalabis?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">路易斯·佩尔迪戈</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="81b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近在app store上发布了我的第一个用SwiftUI编写的应用。在开发过程中，发现如何创建一个单一的警报是非常容易的，有大量的在线资源。然而，当我的应用程序规模扩大时，我发现当显示警报的情况增加时，这种通用方法是不可靠的。</p><p id="f5fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这促使我写了这篇文章来介绍我使用过的不同方法，从非常简单的警报到处理不同警报类型、连续警报和呈现警报的子视图的更有效的方法。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="186a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">创建简单的警报</h1><p id="924a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在SwiftUI中创建警报可以通过一个布尔类型的单个<em class="mw"> @State </em>变量和。<em class="mw"> alert(isPresented) </em>修改器。每当这个变量被设置为true时，视图将被重新加载并显示警报。一旦警报解除，Swift会将变量设置回false。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h2 id="68ad" class="mz ma iq bd mb na nb dn mf nc nd dp mj lf ne nf ml lj ng nh mn ln ni nj mp nk bi translated"><strong class="ak">定制警报器</strong></h2><p id="85f1" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">警报的内容结束必须是类型<code class="fe nl nm nn no b">alert</code>。这些在复杂性上可以有所不同。默认情况下，提醒有一个标题和一个解除按钮，但可以定制为有一条消息和最多两个按钮，可以绑定到任何功能。</p><p id="9de5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是一些例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用自定义消息和消除按钮进行提醒。</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用自定义消息和主次按钮进行提醒。</p></figure><h2 id="deda" class="mz ma iq bd mb na nb dn mf nc nd dp mj lf ne nf ml lj ng nh mn ln ni nj mp nk bi translated">为什么这种方法不可扩展</h2><p id="0faa" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">上面的方法工作得很好，但是在实践中，一个视图可能需要根据用户的动作显示不同的警告。在SwiftUI中，一个视图只能附加一个<code class="fe nl nm nn no b">.alert</code>修改器。</p><p id="cb15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个可能的解决方案是对每个单独的视图元素应用一个alert修饰符，但是这带来了重复代码和多个<code class="fe nl nm nn no b">@State </code>变量的低效，这变得很难跟踪——特别是如果子视图也存在警报的话。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0e95" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">AlertItem简介</h1><p id="4457" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一个更好的解决方案是使用<code class="fe nl nm nn no b">.alert(item)</code>修饰符，它绑定到一个可识别的对象，每当可识别的项目不为0或者被更新时就会出现。</p><p id="490c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我喜欢使用自定义结构，它类似于SwiftUI alert结构，并且符合<code class="fe nl nm nn no b">Identifiable</code>协议。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="5060" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这允许在需要时动态创建不同复杂性的警报，并且不需要多个<code class="fe nl nm nn no b">.alert</code>修饰符或<code class="fe nl nm nn no b">@State</code>变量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="184d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，如果您的子视图也显示警告，您可以将<code class="fe nl nm nn no b">AlertItem</code>作为绑定进行传递，并确信行为应该没有什么不同。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5d8a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">在警报中显示警报</h1><p id="e13d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果你想在另一个<code class="fe nl nm nn no b">AlertItem</code>的动作中改变一个<code class="fe nl nm nn no b">AlertItem</code>的值，希望它会消除第一个警告并显示第二个警告…它不会。</p><p id="17df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这似乎是一个需要解决的小问题；但是，在应用程序中，可能会出现以下形式的警报:</p><p id="ed77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mw">你确定要&lt;一些动作&gt;？</em></p><p id="bd01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果用户随后进行确认，但操作失败，即失去网络连接，那么显示另一个警告来说明发生了错误将会很有帮助。</p><p id="b412" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">解决方案是异步更新<code class="fe nl nm nn no b">AlertItem</code>的值。一旦第一个警报的操作完成，UI将被更新。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="209a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何问题，请在下面发表评论，如果你想在我下次写文章时得到通知，请加入我的时事通讯！👇</p><div class="np nq gp gr nr ns"><a href="https://swiftlythinking.substack.com" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">SwiftlyThinking的简讯</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">来自一位对SwiftUI和更多东西充满热情的iOS开发人员的博客帖子。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">swiftlythinking.substack.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div></div></div>    
</body>
</html>