<html>
<head>
<title>How To Perfect Your Pull Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何完善你的拉动式需求</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-perfect-your-pull-requests-9d575ce4b9ff?source=collection_archive---------5-----------------------#2021-03-03">https://betterprogramming.pub/how-to-perfect-your-pull-requests-9d575ce4b9ff?source=collection_archive---------5-----------------------#2021-03-03</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="279b" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">为您自己和评审者简化代码评审过程</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/2d378aec21e8a8175fe1058be79f99fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Savyc0dHRj_yYkb"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">罗曼·辛克维奇在<a class="ae la" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="0a6a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你正坐在那里看着拉式请求(PR)创建页面，你已经尽你所能使PR成功了吗？</p><p id="2494" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你在这个阶段所做的任何改变本身都不会有什么特别之处。如果你在这一点上做了很大的改变，那么在这个过程的早期一定出了问题。</p><p id="2a64" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">然而，这些最后的步骤很重要——为了代码库的健康，也为了你的同事对你的看法。我把这一步想象成擦车；大部分工作是在洗车时完成的，但真正让它闪闪发光的是最后的抛光。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="7e92" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">自我审核PR</h1><p id="6ba6" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">当你创建你的PR时，大多数平台会给你一个diff，我总是用它来做最后一次代码扫描。</p><p id="633c" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">审查你自己的代码是非常宝贵的。它让你对自己的工作有一个整体的看法，看看是否可以进一步改进。这也是发现诸如打字错误或剩余调试代码等错误的绝佳机会。</p><p id="171c" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我得说80%的时候，我会发现一些需要改进的地方。通常它们都是小事情——可能是一个特定测试用例的更好的命名，一个更新文档的调整，或者代码中一些小的可读性改进。</p><p id="2082" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这也是一个很好的机会来检查你是否满足了你正在写的故事的接受标准。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="4e2e" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">拉取请求大小</h1><p id="208a" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">在你提升你的PR之前，先看看改了多少行。如果你提出一份包含数百行修改的公关——或者更糟的是超过1000行——至少会发生以下两种情况之一:</p><ol class=""><li id="ed9e" class="nb nc iv ld b le lf lh li lk nd lo ne ls nf lw ng nh ni nj bi translated">没有人会以任何形式及时审查公关，你不得不反复催促同事这样做，因为审查大型公关是一项相当艰巨的任务。</li><li id="b422" class="nb nc iv ld b le nk lh nl lk nm lo nn ls no lw ng nh ni nj bi translated">你的同事会快速浏览，然后批准PR——要么是因为他们没有时间审查这么大的PR，要么是因为它太大了，他们根本无法理解PR中的所有内容。</li></ol><p id="a02d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这对你这个公关负责人来说是令人沮丧的，因为你已经等了一段时间等待审查，而且你的代码可能还没有被适当地审查——你已经错过了一个学习的机会。这也让评审人员感到沮丧，因为他们不能充分地确保代码是高质量的，或者它满足故事中的需求。</p><p id="80bd" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">幸运的是，这很容易解决，把你的公关分成小块，便于管理。</p><p id="ad96" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你是否重构了代码，然后添加了一个新特性？首先为重构提交一个PR，然后提交一个PR来添加新特性。您是否添加了一个新模块，扩展了一个现有模块，和/或集成了它？首先为新模块创建一个PR，然后将它集成到第二个PR中。</p><p id="c72c" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">需要记住一些例外情况。例如，如果您添加了少量的代码，并且PR很大的唯一原因是因为您已经记录了一些HTTP交互作为测试的一部分，那么将其分解是不合理的，并且审查人员可能不需要审查那些特定的文件。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="4e3c" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">你是否正确地测试了你的代码？</h1><p id="5fc2" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">编写自动化测试很重要。它们让工程师们现在和将来都可以确信对代码的修改没有破坏任何功能。它们也为其他工程师理解你写的代码提供了很好的文档。</p><p id="8091" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当回顾我为公关写的测试时，我会问自己几个问题:</p><ul class=""><li id="f781" class="nb nc iv ld b le lf lh li lk nd lo ne ls nf lw np nh ni nj bi translated">有没有需要更新的现有测试？</li><li id="bcfc" class="nb nc iv ld b le nk lh nl lk nm lo nn ls no lw np nh ni nj bi translated">你为你的公关写了正确的测试吗？有许多不同类型的测试，使用哪一种取决于你写的代码——我推荐阅读马丁·福勒关于“<a class="ae la" href="https://martinfowler.com/articles/practical-test-pyramid.html" rel="noopener ugc nofollow" target="_blank">实用测试金字塔</a>的文章，以了解给定代码段应该写什么类型的测试。</li><li id="15e2" class="nb nc iv ld b le nk lh nl lk nm lo nn ls no lw np nh ni nj bi translated">测试是否涵盖了工作的验收标准？</li></ul></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="7a5f" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">写好描述</h1><p id="61da" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">现在代码已经非常干净了，是时候用详细的描述来结束它了。</p><p id="6384" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">描述是设置上下文的地方，花几分钟时间为审阅者设置上下文是很重要的。以下是一份好的公关描述应该包括的内容:</p><ul class=""><li id="59fc" class="nb nc iv ld b le lf lh li lk nd lo ne ls nf lw np nh ni nj bi translated">公关带来了什么价值？通常，这是业务环境，是将释放业务价值的变更的快速总结。</li><li id="8b64" class="nb nc iv ld b le nk lh nl lk nm lo nn ls no lw np nh ni nj bi translated">您选择了什么实现？总结你采取的方法，并列出原因。例如，如果你使用了一个设计模式，解释为什么这个模式是一个好的选择。如果PR是一个重构，确保你解释了为什么需要重构。</li><li id="149e" class="nb nc iv ld b le nk lh nl lk nm lo nn ls no lw np nh ni nj bi translated">任何额外的背景，例如这个PR是否完成了整个故事，或者是否有更多的PR跟随。这也是一个很好的时机来指出公关的任何缺点，这样他们就可以被讨论了。</li></ul><p id="84b6" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">没有必要写一部小说，对大多数公关来说，一两句话就足够了。你可以把这个故事链接到你的项目管理软件上，让任何人都可以阅读完整的细节。</p><p id="351f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我从不建议只从外部链接到故事细节。您将无法设置所有的上下文(即，您所做的实现选择)，但是，更重要的是，不能保证信息总是在那里。组织经常从一个软件供应商换到另一个，在这种情况下，将来任何人看PR都无法得到任何背景信息。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><h1 id="5b61" class="me mf iv bd mg mh mi mj mk ml mm mn mo kb mp kc mq ke mr kf ms kh mt ki mu mv bi translated">摘要</h1><p id="180b" class="pw-post-body-paragraph lb lc iv ld b le mw jw lg lh mx jz lj lk my lm ln lo mz lq lr ls na lu lv lw io bi translated">在提出我的拉取请求之前，我已经成功地使用了这些技术，无论是在审查它们的速度方面，还是在我生成的代码的质量方面。</p><p id="994e" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果你觉得它们有用，我建议将它们添加到你的<a class="ae la" href="https://docs.github.com/en/github/building-a-strong-community/creating-a-pull-request-template-for-your-repository" rel="noopener ugc nofollow" target="_blank">拉式请求模板</a>中，并鼓励你的同事也使用它们。</p><p id="ebff" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果你有兴趣了解如何改进你如何审查别人的代码，我写了一篇关于这个的文章<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/5-code-review-tips-that-you-can-use-right-away-5e553d608a0d">在这里</a>。</p></div><div class="ab cl lx ly hz lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="io ip iq ir is"><blockquote class="nq nr ns"><p id="80ca" class="lb lc nt ld b le lf jw lg lh li jz lj nu ll lm ln nv lp lq lr nw lt lu lv lw io bi translated">希望扩展您的技术知识，但不确定阅读什么？我办了一份免费的时事通讯，提供两周一次的技术书籍推荐，包括我从书中获得的关键信息。感兴趣吗？<a class="ae la" href="https://subscribe.technicalbookclub.com/?utm_source=medium&amp;utm_medium=article&amp;utm_campaign=perfectpullrequests" rel="noopener ugc nofollow" target="_blank">在这里报名吧！</a></p></blockquote></div></div>    
</body>
</html>