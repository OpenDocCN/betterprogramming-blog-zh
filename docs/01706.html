<html>
<head>
<title>Instant Search With Vue.js and Axios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue.js和Axios进行即时搜索</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/instant-search-with-vue-js-and-axios-5b78a3a59f01?source=collection_archive---------5-----------------------#2019-10-07">https://betterprogramming.pub/instant-search-with-vue-js-and-axios-5b78a3a59f01?source=collection_archive---------5-----------------------#2019-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0390" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从Web API获取数据，并添加具有计算属性的动态过滤器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f5bae5f14a3f2e849267b60d53b89fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AkYmT10DjpQNjO_KeWvpAg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@olloweb?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">通讯社follow EB</a>在<a class="ae kv" href="https://unsplash.com/s/photos/magnifying-glass?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片(添加了Vue.js标识)</p></figure><p id="c47d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>是一个很有潜力的框架。就字节而言，它简单易学、快速、轻便。我从如何构建你的第一个Vue.js应用开始了我的Vue.js之旅。现在，我将继续这篇关于如何制作一个即时搜索输入框来过滤来自Web API的数据的文章。</p><p id="7ab3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将在<a class="ae kv" href="https://github.com/FrancescoBonizzi/VueJs-Experiments/tree/master/Instant%20search" rel="noopener ugc nofollow" target="_blank">我的存储库</a>中找到最终结果。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7c36" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">佐料</h1><ul class=""><li id="1a42" class="mr ms iq ky b kz mt lc mu lf mv lj mw ln mx lr my mz na nb bi translated">Vue.js库:我们的Javascript框架</li><li id="0e76" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">Axios 库:基于Promise的HTTP客户端，我们将使用它来调用Lorem Picsum Web API</li><li id="7a29" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">公共<a class="ae kv" href="https://picsum.photos/v2/list?page=2&amp;limit=10" rel="noopener ugc nofollow" target="_blank"> Lorem Picsum API url </a> : <code class="fe nh ni nj nk b">https://picsum.photos/v2/list?page=2&amp;limit=10</code></li><li id="d67e" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">将组成我们的应用程序的文件:<code class="fe nh ni nj nk b">index.html</code>文件、<code class="fe nh ni nj nk b">app.js</code>、<code class="fe nh ni nj nk b">style.css</code></li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3eb1" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">第一步</h1><p id="290f" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">首先我们来看看<a class="ae kv" href="https://picsum.photos/v2/list?page=2&amp;limit=2" rel="noopener ugc nofollow" target="_blank"> Lorem Picsum Web API </a>的输出是什么:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="396a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Web API返回一个JSON数组，该数组表示带有URL、作者和ID的图像列表。这些属性将定义我们的应用程序模型。</p><p id="2aad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，开发简单的应用程序框架，包括标题、输入文本框、图像列表和作者姓名。起初，它看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/0548c79171fdb8b3b7dd3bce554e17e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Me0vR3KkQGQneBwM8RYRUg.png"/></div></div></figure><p id="c0db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个网页的主体非常简单:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="9643" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用一个非常简单的CSS工作，图片列表的样式是:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="6e88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和输入框的样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f87c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">Vue.js集成</h1><p id="bb86" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">是时候给我们的小应用程序添加动态性了:</p><ul class=""><li id="a845" class="mr ms iq ky b kz la lc ld lf nr lj ns ln nt lr my mz na nb bi translated">导入Vue.js: <code class="fe nh ni nj nk b">&lt;script src=”<a class="ae kv" href="https://unpkg.com/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/vue/dist/vue.js</a>"&gt; &lt;/script&gt;</code></li><li id="3285" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">导入Axios: <code class="fe nh ni nj nk b">&lt;script src=”<a class="ae kv" href="https://unpkg.com/axios/dist/axios.min.js" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/axios/dist/axios.min.js</a>"&gt;&lt;/script&gt;</code></li></ul><p id="e7fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">定义新的Vue应用程序:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="c02d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，我们将应用程序绑定到元素<code class="fe nh ni nj nk b">#app-instasearch</code>，并定义了两个属性:</p><ul class=""><li id="5e6b" class="mr ms iq ky b kz la lc ld lf nr lj ns ln nt lr my mz na nb bi translated"><code class="fe nh ni nj nk b">authorNameSearchString</code>:它将包含绑定到我们的输入框的搜索字符串</li><li id="be13" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe nh ni nj nk b">photoFeed</code>:下载后会包含图片数组</li></ul><p id="b948" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们之前阅读的JSON中，我们了解了代表模型的属性。因此，下一步是将所有Vue绑定添加到我们的HTML文件中。</p><p id="b446" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输入框绑定到我们的<code class="fe nh ni nj nk b">authorNameSearchString</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="89fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">主列表绑定:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><ul class=""><li id="8021" class="mr ms iq ky b kz la lc ld lf nr lj ns ln nt lr my mz na nb bi translated"><code class="fe nh ni nj nk b">v-for=”photo in filteredPhotoFeed”</code>:使Vue能够对<code class="fe nh ni nj nk b">filteredPhotoFeed</code>数组中的每个元素重复一次<code class="fe nh ni nj nk b">li</code></li><li id="3ba1" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe nh ni nj nk b">v-bind:key=”photo.id”</code>:选择一个键来唯一地表示一个图像，以便能够动态显示列表，这一点很重要</li><li id="ad99" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe nh ni nj nk b">v-bind:src=”photo.download_url”</code>:没有这个，我们看不到图像</li><li id="977d" class="mr ms iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><code class="fe nh ni nj nk b">{{ photo.author }}</code>:在每张照片附近打印作者姓名</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4b24" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">安装的功能</h1><p id="ae6b" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">在Vue.js中，您可以添加挂载的函数，这些函数只是钩子，在Vue实例被加载并绑定到接口后将被调用。在这种情况下，我们需要从Web API获取数据，这是正确的位置。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="d945" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我们使用<code class="fe nh ni nj nk b">Axios</code>进行HTTP调用并管理其回调。特别是，我们将使用应用程序<code class="fe nh ni nj nk b">photoFeed</code>数组的<code class="fe nh ni nj nk b">JSON</code>响应数据，并将最终错误写入输出控制台。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="bd68" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">计算属性</h1><p id="4bf8" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">计算的属性是缓存的Vue应用程序属性，它们只在被动依赖关系改变时重新计算<strong class="ky ir">。注意，如果某个依赖关系超出了实例的范围(即非反应性的)，则<strong class="ky ir">计算属性</strong>将不会被更新。</strong></p><p id="6285" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我们将使用它们来应用<strong class="ky ir">即时搜索过滤器</strong>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="a6dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们通过不考虑null或空字符串来检查没有输入。然后，我们需要用搜索字符串返回一组经过<strong class="ky ir">过滤的</strong>照片。为此，我们使用<code class="fe nh ni nj nk b">filter</code>方法和<code class="fe nh ni nj nk b">indexOf</code>函数作为谓词，只选择作者包含在搜索字符串中的照片。</p><p id="1ddd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每次输入字符串改变时，这个属性都会被重新计算，接口也会更新。</p><p id="9db7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是最终结果的一个小演示，添加了一些动画到列表中，使它更有趣。<a class="ae kv" href="https://github.com/FrancescoBonizzi/VueJs-Experiments/tree/master/Instant%20search" rel="noopener ugc nofollow" target="_blank">你可以在这里找到全部代码</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/db9847467a5adca94392626e19f06999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ATQcHVAkS_Jd9bIX7n1ByA.gif"/></div></div></figure></div></div>    
</body>
</html>