<html>
<head>
<title>How to Add Authentication to a Vue.js App Using Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Firebase向Vue.js应用程序添加身份验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-authentication-to-a-vue-app-using-firebase-dc045d719521?source=collection_archive---------6-----------------------#2020-12-28">https://betterprogramming.pub/how-to-add-authentication-to-a-vue-app-using-firebase-dc045d719521?source=collection_archive---------6-----------------------#2020-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0f16" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将Firebase auth添加到您的Vue应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2420065c8677d8df06a480966200fae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zPahR_9e795a1Vpp"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@imattsmart?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> iMattSmart </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片。</p></figure><p id="5877" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Firebase为您的Vue.js应用程序添加身份验证提供了一种非常简单快捷的方式。在本文中，我将向您展示允许用户使用他们的电子邮件和密码注册您的应用程序是多么容易。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5364" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我们将创造什么</h1><p id="81c4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们将使用Vue CLI创建一个非常简单的Vue应用程序。我们将修改默认的scaffolded应用程序，以便它提供一个注册为新用户的表单、一个登录页面和一个只显示给登录用户的仪表板页面。</p><p id="f4d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户将能够使用Firebase中的电子邮件和密码认证系统向应用程序注册。一旦他们注册并登录，就会看到仪表板页面。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e7bc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建我们的项目</h1><p id="4e5b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我将使用Vue CLI为我们搭建一个项目。为此，您需要在系统上安装Vue CLI。如果尚未安装，可以使用以下命令进行全局安装:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2548" class="ne md it na b gy nf ng l nh ni">npm install -g @vue/cli</span></pre><p id="e314" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以使用Vue CLI来创建我们的项目。使用以下命令创建一个新项目:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="369d" class="ne md it na b gy nf ng l nh ni">vue create vue-firebase-auth-tutorial</span></pre><p id="9037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将被要求选择一个预设。选取“手动选择功能”，然后选择“babel”、“Router”和“Linter / Formatter”</p><p id="4c2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">系统会询问您是否要对“路由器”使用历史模式选择“是”(这应该是默认值)。</p><p id="8636" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以选择任何你想要的棉绒，但是对于本教程，我将选择“Eslint +更漂亮。”</p><p id="6481" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Vue CLI完成后，它将为您提供切换到刚刚创建的新目录的命令以及启动服务器的命令。遵循这些指示。一旦服务器启动，您就可以打开浏览器进入<code class="fe nj nk nl na b">localhost:8080</code>。您应该看到这个:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/bbdbaa86781b0e5c11b8ae6824d9b631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FimZQaPAXf6wFsQ0"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d5cf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">重火力点</h1><p id="1c2b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于本教程，我假设您已经创建了一个Firebase帐户。如果没有，您需要在继续之前这样做。</p><p id="80e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在应用程序中使用Firebase SDK来提供身份验证功能。您可以使用以下命令在应用程序中安装Firebase:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ac24" class="ne md it na b gy nf ng l nh ni">npm install firebase</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3b76" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在Firebase中创建项目</h1><p id="9c62" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">下一步是在Firebase控制台中添加一个项目。登录你的Firebase控制台。单击按钮添加新项目:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/04a4c1f6194e3ffc576d7522fdbd551a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/0*InmtTmQE0meZeqDH"/></div></figure><p id="5897" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将Google Analytics添加到您的项目中，但我不会在本教程中添加它。单击“创建项目”按钮。</p><p id="3c15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦Firebase创建了您的新项目，您需要将Firebase添加到您的应用程序中。点击网络图标:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/40c5e6579da36fcabb668d0bc3395e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uzJssqC7ii-ZboOW"/></div></div></figure><p id="2349" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将被要求输入应用程序的昵称。我已经输入了昵称“Vue Firebase认证教程”输入您的昵称后，点击“注册应用程序”按钮:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/fd365737371a76b958c4e47e0b96d998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*syxy2W5OwFjTI6_u"/></div></div></figure><p id="4424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于步骤2，将有关于将Firebase SDK添加到您的应用程序的说明。我们只需要复制<code class="fe nj nk nl na b">firebaseConfig</code>和行就可以初始化app了。</p><p id="1664" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开你的<code class="fe nj nk nl na b">main.js</code>文件。我们将在Vue应用程序中初始化Firebase。在已有的导入行下面，粘贴<code class="fe nj nk nl na b">firebaseConfig</code>和行来初始化app。您需要为Firebase添加一个导入。您的<code class="fe nj nk nl na b">main.js</code>文件应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="84eb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设置验证方法</h1><p id="0685" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在浏览器中打开Firebase控制台。从控制台中，找到您刚刚创建的项目并单击它。</p><p id="3efe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在左上角，点击“认证”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/4331e8a72237e741d454b170cfea06ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/0*kYC_j73ZH7guuLxQ"/></div></figure><p id="b6bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击“开始”按钮。</p><p id="b0f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从“身份验证”菜单中，单击“登录方法”选项卡:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/90fcad81279652c411120d1add1b80b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eFqUqK5d8_jt6O_v"/></div></div></figure><p id="7f51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将鼠标悬停在第一个条目“电子邮件/密码”上点击铅笔图标打开一个对话框。选择“启用”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/d0b96d7e2a6f6ee08d8db4676878e439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3z3Aj1_Sut_C5WHg"/></div></div></figure><p id="b325" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击“保存”按钮。现在，您已经添加了使用用户的电子邮件地址和密码来创建和验证用户的功能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="17bd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">添加新组件</h1><p id="ecf3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当我们用Vue Router创建我们的应用程序时，它自动为我们的应用程序创建了两条路由:Home和About。我们将使用Home作为应用程序的登录名。我们将使用About作为页面，为我们的应用程序注册一个新用户。</p><p id="0b96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当注册用户登录到我们的应用程序时，我们希望向他们显示仪表板页面。我们还想为用户提供一种方法来注销我们的应用程序。目前，这两个选项在我们的应用程序中都不可用，所以让我们现在添加它们。</p><p id="b2cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe nj nk nl na b">App.vue</code>文件。目前，<code class="fe nj nk nl na b">nav</code>有两个条目，分别是“家”和“关于”。我们将更改关于注册，并为仪表板和注销添加两个新条目。更新您的导航，使其看起来像这样:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="dc10" class="ne md it na b gy nf ng l nh ni">&lt;div id="nav"&gt;<br/>  &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |<br/>  &lt;router-link to="/register"&gt;Register&lt;/router-link&gt; |<br/>  &lt;router-link to="/dashboard"&gt;Dashboard&lt;/router-link&gt; |<br/>  &lt;button <a class="ae ky" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="logout"&gt;Logout&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="451f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您单击logout按钮时，它会调用<code class="fe nj nk nl na b">logout</code>方法。我们稍后将对此进行定义。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0393" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建我们的登录组件</h1><p id="9f70" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">打开视图文件夹中的<code class="fe nj nk nl na b">Home.vue</code>文件。删除模板部分的所有HTML代码。用这段代码替换它，它提供了一个非常基本的登录表单。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="fc9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果您查看我们的应用程序，您会在主页上看到这样的登录表单:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/968c33922c1894889e874956a84fa6ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WZxgr8K-wj5VSgpg"/></div></div></figure><p id="7a68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的表单有点拥挤，输入字段和按钮相互接触。我们可以通过添加一些CSS样式来改变这一点。我们可以在<code class="fe nj nk nl na b">Home.vue</code>文件中添加CSS样式。因为我们将使用相同的表单注册用户，所以我们需要在该组件中复制相同的CSS样式。相反，我们可以将样式放在<code class="fe nj nk nl na b">App.vue</code>文件中，它将样式化我们的登录和注册表单。</p><p id="088b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe nj nk nl na b">App.vue</code>文件。在样式中，添加以下内容:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f6a3" class="ne md it na b gy nf ng l nh ni">input { <br/>  margin-right: 20px; <br/>}</span></pre><p id="ba7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们的登录表单看起来更好了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/93e532e5beddbe1f8d9b856f220902f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bM6cZIRgjfNfrvqd"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e0a2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建我们的注册表</h1><p id="fb27" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">打开视图文件夹中的<code class="fe nj nk nl na b">About.vue</code>文件。您可以从<code class="fe nj nk nl na b">Home.vue</code>文件中复制HTML代码并粘贴到这个文件中。将<code class="fe nj nk nl na b">Login</code>的所有引用改为<code class="fe nj nk nl na b">Register</code>。您的<code class="fe nj nk nl na b">About.vue</code>文件应该是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9389" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">更新我们的路线</h1><p id="b8c6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">目前，显示我们注册页面的URL是<code class="fe nj nk nl na b">/about</code>。那就改成<code class="fe nj nk nl na b">/register</code>吧。打开路由器文件夹中的<code class="fe nj nk nl na b">index.js</code>文件。将<code class="fe nj nk nl na b">/about</code>的第二条路线改为<code class="fe nj nk nl na b">/register</code>。您的<code class="fe nj nk nl na b">routes</code>数组应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="da62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们在这个文件中时，让我们继续添加一个条目来显示我们的仪表板组件。添加第三条路线以显示<code class="fe nj nk nl na b">/dashboard</code>。您的<code class="fe nj nk nl na b">routes</code>数组现在应该看起来像这样:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="31c1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建仪表板组件</h1><p id="7689" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在views文件夹中创建一个名为<code class="fe nj nk nl na b">Dashboard.vue</code>的新文件。这个页面应该只对已经登录到我们的应用程序的用户可见。</p><p id="95ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在模板部分，添加以下HTML代码:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b981" class="ne md it na b gy nf ng l nh ni">&lt;div&gt;<br/>  &lt;h2&gt;Dashboard&lt;/h2&gt;<br/>  &lt;p&gt;This page is only visible to users that are currently logged in&lt;/p&gt;<br/>&lt;/div&gt;</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="36a0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">注册用户</h1><p id="7942" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">早先当我们更新<code class="fe nj nk nl na b">About.vue</code>文件来注册用户时，我们调用了一个名为<code class="fe nj nk nl na b">Register</code>的方法。我们需要添加注册新用户的功能。</p><p id="0ee1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们看看关于如何创建一个基于密码的账户的<a class="ae ky" href="https://firebase.google.com/docs/auth/web/password-auth" rel="noopener ugc nofollow" target="_blank"> Firebase文档</a>。Firebase Auth有一个方法叫做<code class="fe nj nk nl na b">createuserWithEmailAndPassword</code>。您需要传递用户的电子邮件和密码。这个方法要么注册用户并返回一个用户对象，要么返回一个错误消息。现在让我们实现这个方法。</p><p id="8e6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe nj nk nl na b">About.vue</code>文件。我们需要将<code class="fe nj nk nl na b">email</code>和<code class="fe nj nk nl na b">password</code>添加到我们的数据对象中。在脚本部分，添加以下数据对象:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="5506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，用一个叫做<code class="fe nj nk nl na b">register</code>的方法添加一个<code class="fe nj nk nl na b">methods</code>对象。我们可以从Firebase文档中复制这个方法的例子。我们需要对文档中的代码进行以下更改:</p><ul class=""><li id="7c91" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated">我们将不使用<code class="fe nj nk nl na b">user</code>对象。</li><li id="3f6f" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">登录失败时显示警告。</li><li id="755b" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">如果用户已注册，将他们重定向到登录页面。</li></ul><p id="2a30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是<code class="fe nj nk nl na b">register</code>方法的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="afb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们测试为我们的应用程序注册第一个用户。点击导航中的“注册”。输入电子邮件地址和密码，然后单击“注册”按钮。</p><p id="c0e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果用户成功注册，您应该会收到一个警告，并被重定向到登录页面。</p><p id="c57c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果注册失败，您应该会收到一条带有错误消息的警报。</p><p id="29d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要检查用户是否注册成功，请转到Firebase控制台并单击您的项目。在左侧导航栏中，点击<br/>“认证”然后点击“用户”选项卡。您将看到您的用户列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/8ffc70181d1f065b80189209418391f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zBdB2l8pNamJpc-h"/></div></div></figure><p id="06a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经成功地实现了为我们的应用程序注册新用户，我们需要实现用户登录的能力。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="56a7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">登录用户</h1><p id="a0dd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们使用Firebase提供的代码注册了一个新用户。<a class="ae ky" href="https://firebase.google.com/docs/auth/web/password-auth" rel="noopener ugc nofollow" target="_blank"> Firebase文档</a>提供了使用电子邮件地址和密码登录用户的示例代码。我们将使用的Firebase auth方法是<code class="fe nj nk nl na b">signInWithEmailAndPassword</code>。</p><p id="3603" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe nj nk nl na b">Register</code>一样，我们将对示例代码进行同样的修改。如果用户成功登录，我们会提醒他们，并将他们重定向到仪表板页面。</p><p id="a3b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果登录失败，我们会显示一条带有错误消息的警报。</p><p id="e3a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是您应该在<code class="fe nj nk nl na b">Home.vue</code>文件中拥有的<code class="fe nj nk nl na b">login</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0b3b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">创建路线守卫</h1><p id="604a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们不希望用户能够导航到<code class="fe nj nk nl na b">/dashboard</code>，除非他们已经登录。我们可以通过为<code class="fe nj nk nl na b">/dashboard</code>增加一个路由保护来实现。</p><p id="2aff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开路由器文件夹中的<code class="fe nj nk nl na b">index.js</code>文件。我们将向<code class="fe nj nk nl na b">/register</code>路由添加一个元密钥，表明需要认证。以下是更新后的路线:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="f2f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Vue路由器在处理路由之前，有一个叫<code class="fe nj nk nl na b">beforeEach</code>的方法。我们可以通过检查元值来查看路由是否需要认证。</p><p id="658c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果需要身份验证，我们需要能够检查用户是否登录。幸运的是，Firebase auth中有一个<code class="fe nj nk nl na b">currentUser</code>对象。我们将使用它来检查用户是否登录。</p><p id="26a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果他们当前已登录，我们将显示控制面板页面。</p><p id="cdc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果没有，我们将显示一个警告，告诉用户他们必须登录，并重定向到主页让他们登录。</p><p id="8f97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="9858" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">注销</h1><p id="238e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们需要添加到应用程序中的最后一件事是<code class="fe nj nk nl na b">logout</code>方法。Firebase auth提供了一个我们将使用的<code class="fe nj nk nl na b">signOut</code>方法。</p><p id="6eb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开<code class="fe nj nk nl na b">App.vue</code>文件。我们将注销用户。如果成功，他们将收到警报并被重定向到主页。</p><p id="5d0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果注销失败，我们会显示一个带有错误消息的警报，并将他们重定向到主页。</p><p id="04a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为<code class="fe nj nk nl na b">logout</code>方法添加以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="56d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们使用了Firebase，但是在我们的<code class="fe nj nk nl na b">index.js</code>文件中没有对它的任何引用。我们需要加上这一点。向上滚动到现有导入行所在的文件顶部。添加这一行:</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="b42b" class="ne md it na b gy nf ng l nh ni">import firebase from 'firebase';</span></pre><p id="9327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加后，您可以练习注册新用户。然后以该用户身份登录，并验证您是否被重定向到仪表板页面。然后注销并确认您被重定向到主页。</p><p id="6bfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">祝贺您，您已经成功地将Firebase身份验证添加到您的Vue应用程序中！</p><p id="e306" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的代码可以在GitHub 网站<a class="ae ky" href="https://github.com/ratracegrad/Vue-Firebase-Auth-Tutorial" rel="noopener ugc nofollow" target="_blank">上找到。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2587" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用其他身份验证方法</h1><p id="8e69" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我写过几篇后续文章，介绍如何使用其他身份验证方法向Vue应用程序添加身份验证。</p><p id="5c97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想要使用Auth0进行身份验证吗？<a class="ae ky" href="https://ratracegrad.medium.com/how-to-add-authentication-to-a-vue-app-using-auth0-4a2fa32df05c" rel="noopener">阅读本文</a>。</p><p id="0b64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想用AWS Amplify做认证？<a class="ae ky" href="https://medium.com/better-programming/how-to-add-authentication-to-a-vue-app-using-aws-amplify-f10fbeef04d0" rel="noopener">阅读本文</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4b90" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="6945" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Firebase提供了一种非常有效的方法来为您的Vue应用程序添加身份验证。它允许您添加身份验证，而不必编写自己的后端服务并自己实现身份验证。</p><p id="3581" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你喜欢这篇文章。感谢阅读。</p></div></div>    
</body>
</html>