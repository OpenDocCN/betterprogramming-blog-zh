# 彻底解决反对编写代码注释的争论

> 原文：<https://betterprogramming.pub/settling-the-argument-against-writing-code-comments-once-and-for-all-4ffe45180228>

## 让我们讨论一下这个问题

![](img/e311cb91e9443b3ad05fafb1bd884f58.png)

以色列宫在 [Unsplash](https://unsplash.com/collections/8644096/clash?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片。

每个人似乎要么支持要么反对评论——就像它是某个实体值得两极分化的意见。

有些人支持有完整描述支持的注释代码的必要性。其他人，比如我自己，呼吁整体迁移到自文档化代码。但是，就目前的情况来看，似乎只能是一种观点。不幸的是，我们几乎没有听到任何人提高对理性中间立场的认识。

评论看起来相当无害。它们不会给代码带来功能上的差异。它们允许开发人员在他们的代码后面编写全面、深入的描述。它们也可以作为有用的提醒，供开发人员检查。

那么为什么这么多开发者反对写评论呢？这是一件奇怪的事情，但它与代码的整洁和组织有很大关系。从这个意义上说，如果你不小心，注释在构建你的代码库时弊大于利。更好的是，评论可以作为一个故事告诉你，你可能需要做一些不同的事情。

迷茫？我不怪你。别担心，我会解释清楚的。

# 为什么我们被教导要写编码老师的评论

在学校，我记得如果我提交了一个没有评论的项目，某些老师会给我打几分。

你想想，他们让你这么做是有道理的。毕竟，你只是在学习如何编码。

你不知道如何写干净的代码。你不完全明白你在做什么。作为一名学生，你交作业的目标仅仅是交付一些按预期工作和发挥作用的东西。

老师让你写评论是他们教你思考你在发展什么的一种策略。

通过解释你自己，你表明你确实理解这个特定的代码片段在做什么。你让他们更容易辨别你写的代码背后的意图是否有意义。

他们并不是说注释是必要的，你必须总是写注释。相反，这只是帮助你学习和帮助他们评分的一种方式——尤其是当你觉得没有必要专注于编写漂亮的代码的时候。

在现实生活中，如果你知道如何把你的代码编在一起，就像一个美丽的故事，可以很容易地阅读和理解，那么注释就不是那么必要了。

# 注释代码的故事

现在你一定在想，“这个故事的目的是什么？”作为一个程序员新手，我把你带回年轻时代有什么意义吗？

当你觉得不得不写一条评论时，你应该把它当作一个明显的信号，表明你应该重新评估你刚刚写的东西。

就像在你的新手时代，需要写一个注释来解释你的代码背后的意图，这传达了你的代码一开始就很容易被误解的可能性。换句话说，你的代码可能非常混乱，因此需要一个明确的解释。

了解这种情况的最好方法是问自己以下问题:“如果另一个开发人员看到这些代码，他们会怎么想？”

*   他们是仅仅通过看代码就能理解代码，还是需要进一步调查？
*   如果他们阅读你的注释来了解代码在做什么，他们能很快理解你的函数中的代码在做什么，以便进行可能的修改吗？或者，即使附加了注释，他们也不得不破译你混乱的代码吗？

如果你对这些问题的回答不令人满意，并且你发现你是唯一能够真正理解你的代码的人，那么你的代码无疑是糟糕的。

正如 Brian W. Kernighan 在*中所写的:*

> "不要评论糟糕的代码——重写它."

以任何人都能理解的方式重构你的代码，除了评论。以下是实现这一目标的几种好方法:

*   目的明确的小功能(鲍勃·格斯纳叔叔建议五行，但最多 15-20 行)
*   描述性类名、函数名和变量名
*   空格
*   一个有组织的类，在类的顶部有较高级别的函数，在底部有较低级别的函数

如果您仍然认为，由于代码的复杂性，您的代码的功能性目的需要进一步的解释，在您重构并使您的代码尽可能干净、模块化和具体之后，只有到那时，您才应该考虑编写一个非常清晰的注释来描述您的代码中难以直观理解的点。通常情况下，情况并非如此。

# 已经删了吧

所以现在你开始重构了。太好了！我很高兴你朝着更干净的代码迈出了这一步。

然而，这里还有一个问题需要解决。

我在许多开发人员中看到的一个共性是，当他们让位于旧的，让位于新的时，他们留下了一个非常明显的烂摊子。他们不是删除他们的旧工作和旧注释，而是注释掉他们所有的旧代码！

他们只是把它留在那里变成化石。他们认为，“也许这个旧代码将来会对我有益。也许我还有用武之地！”

我明白了——你花了很多时间在那些你巧妙地拼凑起来的旧代码片段上。你当然不想把它扔在废纸篓里，让它变成废物。因此，您只需将它全部注释掉，就像放在代码库中一样。除了占用空间什么都不做。

你可能想知道这样做到底有什么害处。回到我之前说过的，编写干净代码的很大一部分就是让你的代码清晰易读，让任何人看了都容易理解。

因此，当一个类中充斥着除了占用空间之外毫无用处的注释时，就会暴露出一个非常简单而明显的问题:注释代码会使类及其函数更难阅读。

我相信你宁愿要一个干净的房间，也不要一个杂乱无章的房间。

这里的解决方案非常非常简单:删除你的评论。

除非你的评论服务于一个非常清晰、合理、可操作的目的，否则它们没有存在的必要。让他们走吧。我保证你会因此变得更好。

# 用这些东西疯狂吧

这并不是说所有的评论都是不好的。事实上，注释在几种情况下非常有用。如果使用正确，注释可以为开发人员和查看您代码的其他开发人员带来清晰明了的感觉。

例如，临时待办事项语句或伪代码是记录你的目标和你需要做什么的好方法。只要确保在它们完成任务后删除它们。

代码顶部的签名表示您是创建或修改该类的人，这为未来的开发人员提供了一种洞察力，当需要询问有关代码的问题时，他们应该询问谁。

此外，当您编写的代码即使写得很干净也不能直观地推理出来时，一个好的、简短的、描述性的注释可以提供有价值的见解，让您了解在查看代码时应该记住什么。

请记住，不要用注释来交换糟糕的代码，并确保清理干净，以保持一个非常有组织和清晰的类结构。

总的来说，评论并不坏。糟糕的只是它们经常被使用的方式。