# 清单驱动开发

> 原文：<https://betterprogramming.pub/heres-a-checklist-driven-development-5932541b2c5a>

## 设计更好的思维方式

![](img/0a70a6eabe1f3dba7402a62b502a52e3.png)

[pix abay 拍摄的照片](https://www.pexels.com/photo/person-marking-check-on-opened-book-416322/)

你们中有多少人使用待办事项列表？我想你们大多数人都是这样，以某种形式。但是清单呢？它们远比你想象的有用。

# 清单宣言

如果你不使用清单，你基本上是依靠你的[工作记忆](https://en.wikipedia.org/wiki/Working_memory)来检查事情。对于简单的事情来说，这可能没问题，但它很容易给你带来麻烦。例如，假设你要和朋友出去。你需要记住一些小事:你的钥匙，你的钱包，可能还要用一些除臭剂。关于三个要素，你的工作记忆可以处理，没问题。但是如果再加两个元素会怎么样呢？这有点棘手。

例如，在你去见你的朋友的路上，你还需要拿一个包裹，不仅如此，你的一个朋友还要求拿回他们的书，所以你也需要记得带着它。

现在，我们有麻烦了。我们的工作记忆现在在杂耍五种不同的元素，它不是一个非常好的杂耍者。它的极限是[左右的四项](https://en.wikipedia.org/wiki/Working_memory#:~:text=Nonetheless%2C%20Cowan%20proposed%20that%20working,span%E2%80%94up%20to%2080%20digits.)。这个数字可能会有所不同，但在大多数情况下似乎是正确的，我可以肯定地证明这一点。当我需要一次记住很多事情时，我往往会忘记其中至少一件。

在上面的例子中，我可能会忘记带书。忘记这样的事情没什么大不了的，我下次会带过来的。但是当我们处理更严重的情况时会发生什么呢？如果你在治疗病人，或者，对我的读者来说，更可能的是，编写生产代码(这可能服务于医疗行业)，你不能忘记事情，因为你忘记的这些事情可能在关键路径上。

清单帮助你避免代价高昂的错误。这当然很重要，但远不止于此。以至于就这个主题写了一整本书。然而，这并不是一整篇关于清单的文章，这篇文章是关于编写更好的代码，所以让我们开始吧。

# 设计更好的思维过程

如果你已经在软件行业工作了一段时间，你应该已经写了很多设计文档。如果你还没有——那可能是时候找份新工作了。并不是说设计文档都很好，有时它们会是一种折磨。但是，如果你有一个好的设计模板，它可以帮助你避免认知偏差，从而成为更好的思维过程的不可思议的推动者。

人类的思维[极度偏颇](https://en.wikipedia.org/wiki/List_of_cognitive_biases)。这不一定是件坏事。偏见是我们为了节省时间和精力而选择的捷径。通常情况下，它们甚至非常有用。我们不能过多考虑生活中的每一件小事。然而，关于偏见的棘手之处在于，要完全意识到它是相当困难的。

举个例子，我们来看看选择性感知偏差。

您正在构建一个新的 UI 组件，它有一个非常简单的后端，只有一个 API。这不是你第一次处理这样的任务，所以你没有花太多时间计划。你确切地知道你要做什么——构建一个优秀的 UI 和一个简单明了的 API。您设法在创纪录的时间内完成了任务，因此您表扬了自己，并将其部署到生产中。

几个月过去了，这个组件开始获得大量的流量。您开始看到 API 的平均响应时间出现峰值。用户肯定会很快开始抱怨。你疯狂地看着你的代码，有什么可能是错的？

看起来您的 API 执行的简单 DB 查询现在慢了 10 倍。以前是靠一个不太复杂的小 DB 表。那张桌子现在已经膨胀到原来的 x100 大小，甚至还多了几列。

如果我们起草了一份好的设计文件，这个可怕的问题本来是可以很容易避免的。然后我们会发现，由于我们处理的是 UI 组件，所以响应对时间非常敏感。在这种情况下，缓存公共响应通常是个好主意。我们还会考虑为我们筛选的一个列添加一个索引，以确保查询的性能不会随着数据库的扩展而下降。

这里的主要思想是设计文档是非常有益的。
它们不应该被视为琐事，而应该被视为帮助你走向正确方向的工具。如果你公司的设计文件使用了一个好的模板，它将有助于设计一个更好的思维过程。这不是一件容易的事情，因为大多数设计文档模板都有太多的部分，这往往会让人不知所措。当事情势不可挡时，人们往往会避开它们，这基本上使它们变得毫无用处。

为了有效地使用设计文档，我们需要使它们简单。让它们更简单的一个方法是包括一个简单而全面的清单。这份清单应该抵消所有主要的偏见，并促使用户以更好的方式思考。这意味着考虑所有可能的突发事件、边缘情况、可能出错的事情、使用最佳实践等。

# 内部清单

除了使用实际的设计文档，我们还应该有内部清单。这些内部清单应该根据我们的个人偏见量身定制。例如，你可能倾向于略读代码，而不是通读。这很容易让您错过微妙的实现细节，而这些细节对于理解您正在处理的代码(或 bug)至关重要。我最近和 Flutter 一起工作时就遇到过这种情况。

我的测试失败了，因为一些奇怪的问题，似乎与我正在使用的库有关。我试图修复它，但它仍然存在。所以我假设这个库有一个真正的 bug([，这种情况](/it-aint-voodoo-debugging-code-that-doesn-t-make-sense-36bf2e86ab50)几乎不会发生)。尽管如此，我还是提交了一个 bug，问题被指出来了。我很快意识到我浏览了库代码，错过了它的实现中的一个微妙的细节。因此，为了抵消将来略读代码的倾向，你可以在你的内部清单中添加以下项目:“我已经通读了代码。”

只有检查完该项目后，您才能允许自己批准该 PR，或者报告似乎是一个 bug。

建立一个内部清单并不意味着它应该留在你的脑海里。相反，如果你能把它写在一张纸上，或者使用你最喜欢的在线笔记应用程序，那是最好的。主要的想法是，你将有一个个人的清单，与你可能在工作中用于更复杂项目的正式设计模板分开。这份内部清单应该适用于你的每一项任务，无论大小，也适用于你的个人生活。

# 底线

清单非常有益。它们帮助我们抵消有限的工作记忆容量。如果它们特别好，它们可以帮助我们把思维过程引向正确的方向。

在软件中，使用一个简单而全面的好的设计模板，对促进更好的思维过程有很大的帮助，最终会产生更好的代码。它的简单性至关重要，因为它极大地增加了此类文件首先被起草的可能性。

你也应该建立自己的内部清单，以抵消你独特的偏见。这个清单应该适用于每一项任务，而不仅仅是需要完整设计文档的任务。