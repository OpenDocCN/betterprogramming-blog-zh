<html>
<head>
<title>Simple React Scroll Animations With Zero Dependencies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">零依赖性的简单反应滚动动画</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/simple-react-scroll-animations-with-zero-dependencies-b496c1e1c7bd?source=collection_archive---------3-----------------------#2022-09-13">https://betterprogramming.pub/simple-react-scroll-animations-with-zero-dependencies-b496c1e1c7bd?source=collection_archive---------3-----------------------#2022-09-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="df46" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">React钩子、CSS和交叉点观察器API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/44a146310ea8eccca9aa8afa6e084cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPM1443ovctut3cYv9Tewg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@timschmidbauer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">蒂姆·施密德鲍尔</a>在<a class="ae ky" href="https://unsplash.com/s/photos/scroll-laptop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a4ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">小册子网站中最常见的效果之一是元素进入用户屏幕后不久，在滚动过程中出现淡入或浮入动画。</p><p id="2226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现这些效果，开发人员通常会使用动画库。但是对于大多数网站来说，不需要这种额外的开销！</p><p id="fe0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用CSS和本地交叉点观察器API，我们可以创建一个简单且高效的方法，用于在用户向下滚动页面时动画化元素。在本文中，我们将看到如何用React实现这一点。本文中的示例也使用了TypeScript。</p><h1 id="720e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤1:检测元素何时出现在屏幕上</h1><p id="d88f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">每当我们的一个React组件被安装时，我们可以创建一个新的<code class="fe ms mt mu mv b">IntersectionObserver</code>来观察它何时与浏览器视口相交。</p><p id="adf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在React中引用元素的首选方式是通过refs，所以我们将使用ref作为第一个参数。第二个参数允许我们设置偏移量，以便动画触发到窗口边缘的固定距离——而<code class="fe ms mt mu mv b">"0px"</code>正好在边缘上。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="88b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保在返回的清理函数中运行<code class="fe ms mt mu mv b">unobserve</code>,这样一旦组件被卸载，我们就不会继续观察它。</p><h1 id="c9d6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤2:创建容器组件</h1><p id="43cb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">对于一个简单的淡入淡出效果，我们可以简单地根据元素是否在屏幕上来改变<code class="fe ms mt mu mv b">opacity</code>和<code class="fe ms mt mu mv b">translate</code> CSS属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="31b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，在我们的代码中，我们可以简单地调用:</p><pre class="kj kk kl km gt my mv mz na aw nb bi"><span id="91c8" class="nc lw it mv b gy nd ne l nf ng">&lt;<!-- -->AnimateIn&gt;<br/>  &lt;h1&gt;Hello World&lt;/h1&gt;<br/>&lt;/<!-- -->AnimateIn<!-- -->&gt;</span></pre><p id="e03b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以就此打住，但是通过一些额外的调整，我们可以将这种模式变成更加可定制和可重用的东西。</p><h1 id="0cc8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤3:创建动画库</h1><p id="2044" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果我们想要扩展可能的动画范围，我们需要使我们的组件更通用一点，允许开发人员为<code class="fe ms mt mu mv b">from</code>和<code class="fe ms mt mu mv b">to</code>状态传递他们自己的CSS。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0053" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们想创建一个简单的动画库，我们可以使用我们的<code class="fe ms mt mu mv b">AnimateIn</code>组件轻松地构建它。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ecf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为个人偏好，我喜欢将这些组件分组为一个<code class="fe ms mt mu mv b">Animate</code>对象的一部分，然后导出:</p><pre class="kj kk kl km gt my mv mz na aw nb bi"><span id="8881" class="nc lw it mv b gy nd ne l nf ng">export const Animate = {<br/>  FadeIn,<br/>  FadeUp,<br/>  ScaleIn,<br/>};</span></pre><p id="45b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以这样称呼一个动画:</p><pre class="kj kk kl km gt my mv mz na aw nb bi"><span id="e3d9" class="nc lw it mv b gy nd ne l nf ng">&lt;Animate.ScaleIn&gt;<br/>  &lt;h1&gt;Hello World&lt;/h1&gt;<br/>&lt;/Animate.ScaleIn&gt;</span></pre><p id="62f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以访问与大多数小册子网站相当的动画，而不需要额外的依赖！</p><p id="94b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于一个工作示例，请查看下面的代码笔:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh mx l"/></div></figure><p id="dcb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">感谢阅读！敬请关注更多内容。</em></p></div></div>    
</body>
</html>