<html>
<head>
<title>Form Validation With HTML5 and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用HTML5和JavaScript进行表单验证</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/form-validation-with-html5-and-javascript-7afe4f94c69d?source=collection_archive---------13-----------------------#2020-01-21">https://betterprogramming.pub/form-validation-with-html5-and-javascript-7afe4f94c69d?source=collection_archive---------13-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="de67" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">验证，做得更好</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9d0f516aad2319eb20b114bdbc2db5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TWCwK8VS-m6QjMjA"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@r3dmax?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jonatan Pie </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3c83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">表单验证是浏览器端HTML和JavaScript的一部分。在将数据发送到服务器之前，我们可以用它来验证表单输入。然而，我们应该信任正在发送的内容，所以最终的验证应该仍然在服务器上。</p><p id="769f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在HTML5中，表单验证是一个内置特性。HTML5有各种验证属性。</p><p id="1764" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当表单输入有效时，<code class="fe lv lw lx ly b">:valid</code> CSS伪类被应用于元素。如果无效，那么<code class="fe lv lw lx ly b">:invalid</code> CSS伪类被应用到元素。</p><p id="6e24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当表单有无效输入时，浏览器将阻止提交表单并显示一条错误消息。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="7879" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">表单验证属性</h1><h2 id="e288" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">模式</h2><p id="f16e" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b">pattern</code>属性适用于类型为<code class="fe lv lw lx ly b">text</code>、<code class="fe lv lw lx ly b">search</code>、<code class="fe lv lw lx ly b">url</code>、<code class="fe lv lw lx ly b">tel</code>、<code class="fe lv lw lx ly b">email</code>和<code class="fe lv lw lx ly b">password</code>的输入元素。</p><ul class=""><li id="de0d" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">它让我们设置一个正则表达式作为值，浏览器将根据它进行验证。</li></ul><h2 id="0586" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">福建话</h2><p id="4531" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">该属性适用于<code class="fe lv lw lx ly b">range</code>、<code class="fe lv lw lx ly b">number</code>、<code class="fe lv lw lx ly b">date</code>、<code class="fe lv lw lx ly b">month</code>、<code class="fe lv lw lx ly b">week</code>、<code class="fe lv lw lx ly b">datetime</code>、<code class="fe lv lw lx ly b">datetime-local</code>和<code class="fe lv lw lx ly b">time</code>输入。</p><ul class=""><li id="7b35" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">当应用于<code class="fe lv lw lx ly b">range</code>或<code class="fe lv lw lx ly b">number</code>输入时，它将检查输入的数字是否为<code class="fe lv lw lx ly b">min</code>属性的值或更高。</li><li id="ce7f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">当它应用于<code class="fe lv lw lx ly b">date</code>、<code class="fe lv lw lx ly b">month</code>或<code class="fe lv lw lx ly b">week</code>元素时，它将检查日期是否大于或等于该属性的值中给定的日期。</li><li id="e0ab" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">对于<code class="fe lv lw lx ly b">datetime</code>、<code class="fe lv lw lx ly b">datetime-local</code>、<code class="fe lv lw lx ly b">time</code>类型的输入，检查日期和时间是否大于或等于<code class="fe lv lw lx ly b">min</code>属性的值。</li></ul><h2 id="e333" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">最大</h2><p id="e558" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b">max</code>属性与<code class="fe lv lw lx ly b">min</code>属性相反。它检查输入的值是否小于或等于该属性的值。</p><ul class=""><li id="ead7" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">当应用于<code class="fe lv lw lx ly b">range</code>或<code class="fe lv lw lx ly b">number</code>输入时，它会检查输入的数字是否等于或小于<code class="fe lv lw lx ly b">min</code>属性的值。</li><li id="109b" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">当它应用于<code class="fe lv lw lx ly b">date</code>、<code class="fe lv lw lx ly b">month</code>或<code class="fe lv lw lx ly b">week</code>元素时，它将检查日期是否小于或等于该属性的值中给定的日期。</li><li id="5c76" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">对于<code class="fe lv lw lx ly b">datetime</code>、<code class="fe lv lw lx ly b">datetime-local</code>、<code class="fe lv lw lx ly b">time</code>类型的输入，检查日期和时间是否小于或等于<code class="fe lv lw lx ly b">min</code>属性的值。</li></ul><h2 id="9751" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">需要</h2><p id="754d" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b">required</code>属性检查输入值是否由用户输入。</p><ul class=""><li id="4240" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">可用于<code class="fe lv lw lx ly b">text</code>、<code class="fe lv lw lx ly b">search</code>、<code class="fe lv lw lx ly b">url</code>、<code class="fe lv lw lx ly b">tel</code>、<code class="fe lv lw lx ly b">email</code>、<code class="fe lv lw lx ly b">password</code>、<code class="fe lv lw lx ly b">date</code>、<code class="fe lv lw lx ly b">datetime</code>、<code class="fe lv lw lx ly b">datetime-local</code>、<code class="fe lv lw lx ly b">month</code>、<code class="fe lv lw lx ly b">week</code>、<code class="fe lv lw lx ly b">time</code>、<code class="fe lv lw lx ly b">number</code>、<code class="fe lv lw lx ly b">checkbox</code>、<code class="fe lv lw lx ly b">radio</code>、<code class="fe lv lw lx ly b">file</code>以及<code class="fe lv lw lx ly b">&lt;select&gt;</code>和<code class="fe lv lw lx ly b">&lt;textarea&gt;</code>元素。</li></ul><h2 id="807a" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">步骤</h2><p id="5628" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b">step</code>属性检查输入是否为整数。</p><ul class=""><li id="2109" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">如果它应用于类型为<code class="fe lv lw lx ly b">date</code>的输入元素，那么它检查整数天。</li><li id="d32f" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">如果它应用于类型为<code class="fe lv lw lx ly b">month</code>的输入元素，那么它检查整数个月。</li><li id="b5a1" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">如果它应用于类型为<code class="fe lv lw lx ly b">week</code>的输入元素，那么它检查整数周数。</li><li id="05ca" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">如果它应用于类型为<code class="fe lv lw lx ly b">datetime</code>、<code class="fe lv lw lx ly b">datetime-local</code>、<code class="fe lv lw lx ly b">time</code>的输入元素，那么它检查整数秒。</li><li id="ae82" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">如果它应用于类型为<code class="fe lv lw lx ly b">range</code>、<code class="fe lv lw lx ly b">number</code>的输入元素，那么它会检查一个整数。</li></ul><h2 id="828f" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">最小长度</h2><p id="6583" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b">minlength</code>属性适用于<code class="fe lv lw lx ly b">text</code>、<code class="fe lv lw lx ly b">search</code>、<code class="fe lv lw lx ly b">url</code>、<code class="fe lv lw lx ly b">tel</code>、<code class="fe lv lw lx ly b">email</code>、<code class="fe lv lw lx ly b">password</code>类型的输入。在<code class="fe lv lw lx ly b">textarea</code>元素上也有。</p><ul class=""><li id="3d2f" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">它检查是否大于或等于用户输入的文本字符数。</li></ul><h2 id="96b4" class="my mh it bd mi mz na dn mm nb nc dp mq li nd ne ms lm nf ng mu lq nh ni mw nj bi translated">Maxlength</h2><p id="5fbb" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b">maxlength</code>属性适用于<code class="fe lv lw lx ly b">text</code>、<code class="fe lv lw lx ly b">search</code>、<code class="fe lv lw lx ly b">url</code>、<code class="fe lv lw lx ly b">tel</code>、<code class="fe lv lw lx ly b">email</code>、<code class="fe lv lw lx ly b">password</code>类型的输入。它也可以在<code class="fe lv lw lx ly b">textarea</code>元素上使用。</p><ul class=""><li id="95f9" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">它检查小于或等于用户输入的文本字符数。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/2d3918ff3e587635654ed2aa44909fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G1GhTbWcHQFVGlBI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@baptiststandaert?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">浸礼会会员</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e4a8" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">使用表单验证属性</h1><p id="76e3" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我们可以通过将表单验证属性添加到元素中来使用它们。例如，我们可以编写一个接受电子邮件地址作为输入的表单。</p><p id="2fd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们编写如下的HTML:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="a8b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们有带有<code class="fe lv lw lx ly b">required</code>属性的<code class="fe lv lw lx ly b">input</code>元素，它根据需要设置输入。</p><p id="a7f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还添加了<code class="fe lv lw lx ly b">pattern</code>属性，用电子邮件地址的正则表达式作为值。它检查at符号和句点前后的字符。</p><p id="4ea0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们添加CSS，用于在输入有效或无效时更改<code class="fe lv lw lx ly b">input</code>元素的边框，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="ed87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用了本文开头提到的伪类来完成这项工作。</p><p id="0cc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们添加JavaScript代码，通过调用<code class="fe lv lw lx ly b">preventDefault</code>来阻止表单提交:</p><pre class="kj kk kl km gt og ly oh oi aw oj bi"><span id="ee17" class="my mh it ly b gy ok ol l om on">const form = document.querySelector('#form');<br/>form.onsubmit = (e) =&gt; {<br/>  e.preventDefault();<br/>}</span></pre><p id="077b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个例子是检查我们的输入和范围的长度。例如，我们可以编写以下HTML来获取用户的姓名和年龄:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="1343" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的输入元素分别具有名称和年龄的长度和范围属性。此外，我们有输入消息，当输入以消息中描述的方式无效时，我们可以看到它们。</p><p id="cdaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，当输入有效或无效时，我们使用与第一个示例相同的CSS来更改输入框的边框:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="0a62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们有在输入无效时显示验证消息的JavaScript:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="de36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们将<code class="fe lv lw lx ly b">oninput</code>事件处理程序设置为一个事件处理程序函数，以便在输入内容时检查输入的有效性。</p><p id="ed6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在每个函数中，我们首先隐藏所有的消息，这样我们就看不到过时的消息，然后检查名称输入的<code class="fe lv lw lx ly b">tooShort</code>或<code class="fe lv lw lx ly b">tooLong</code>，因为我们指定了最小和最大长度。</p><p id="114b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果出现任何错误，我们在HTML中取消隐藏相应的消息元素。</p><p id="f6c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，我们检查年龄输入的<code class="fe lv lw lx ly b">rangeOverflow</code>或<code class="fe lv lw lx ly b">rangeUnderflow</code>，因为我们指定了最小和最大长度。如果出现任何错误，我们在HTML中取消隐藏相应的消息元素。</p><p id="b50f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用HTML5和JavaScript，我们可以检查各种输入值的有效性。我们不必使用任何库来做到这一点。</p><p id="f795" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以检查一些内容，包括长度、范围、任何带有正则表达式的模式等等。然而，我们还应该在保存之前检查服务器端，因为用户仍然可以入侵浏览器端的应用程序来跳过验证。</p></div></div>    
</body>
</html>