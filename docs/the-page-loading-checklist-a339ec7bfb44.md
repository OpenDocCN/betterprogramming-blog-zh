# 页面加载清单

> 原文：<https://betterprogramming.pub/the-page-loading-checklist-a339ec7bfb44>

## 提高用户对你的应用的速度感知

![](img/a6e1bada94371974e79a8dab3c67c96a.png)

格伦·卡斯滕斯-彼得斯在 [Unsplash](https://unsplash.com/search/photos/checklist?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

就用户体验而言，用户进入你网站的第一秒是非常关键的。如果你的网站被认为很慢，用户可能会在加载完成前离开页面。

最初的几秒钟已经给人留下了你的应用程序运行良好的印象。

开发人员必须始终考虑使用一个好的工具来分析页面加载时会发生什么。我用的是 [YSlow](http://yslow.org/) 。

一个很好的练习是评估在加载的最初几秒钟内哪些资源是关键的，哪些不是。

本文基于[凯尔](https://medium.com/u/5dccb9bb4625?source=post_page-----a339ec7bfb44--------------------------------)的一门课程。

# 改进页面加载时间的性能优化清单

## **1。减少页面加载期间对资源的请求数量**

对于你在开始展示的内容来说，每一条不重要的数据都应该在以后加载。

## **2。优化图像尺寸**

一个好主意是在不损失质量的情况下缩小图像的尺寸。有几个工具可以做到这一点。

此外，另一种可能性是使用图像精灵，但在我看来，这使得处理图像的代码过于复杂。

## **3。避免重定向**

这将告诉用户的浏览器在不同的位置再次请求页面，不必要地发出两次请求，而不是一次。

## **4。将 CDN(内容交付网络)用于静态资源**

cdn**在世界范围内提供了更多的存在点，最有可能靠近发出请求的地方，因此用户下载静态资源更快。**

## ****5。对于非关键资源，将资源加载推迟到将来某个时间****

**又叫*懒装*。**

**例如，避免在第一秒加载非关键的 CSS，稍后再加载。**

**这个特性通常会使应用程序的代码更加复杂。有时，这对于用户很少使用的功能是有意义的，只在需要时才下载它们。**

**这可能很棘手，你必须小心，避免将这种技术应用于频繁使用的功能，你冒着用户在加载非常快的首页后体验非常慢的网站的风险。**

**惰性加载对于图像尤其重要。我们已经讨论过让它们尽可能的小，但是避免在你不显示它们的时候加载它们会更好。**

**事实上，这是如此重要的事情，以至于从 Chrome 76 开始，他们就本机支持它。他们为延迟加载引入了一个新的属性`[loading](https://web.dev/native-lazy-loading)`。当这被其他浏览器广泛实现时，就不需要花哨的 JS 库来实现了。**

## ****6。使用 Gzip、** [**Brotli**](https://github.com/google/brotli) **，或者其他压缩器****

**这有助于减小文件的大小。这是需要在服务器中配置的。**

## ****7。使用过期/缓存控制头****

**利用浏览器缓存资源的事实。**

**请注意，很多时候，指定资源应该过期的正确时间并不容易，因此，用户可能会看到过期的内容。**

## ****8。将 CSS 引用放在顶部，脚本放在底部****

**给用户一个页面速度很快的印象的好习惯是将 CSS 引用放在顶部，脚本放在底部。**

**将 CSS 文件放在顶部的原因是，浏览器通常会阻止内容的呈现，直到它了解所有的样式表。最好的选择是浏览器尽快找到它。**

## ****9。避免使用 CSS 表达式来计算页面上的位置****

**这个在浏览器里比较慢，避免用就好。**

## ****10。总是将 CSS 和 JavaScript 文件外部化****

**所以浏览器可以帮助缓存。**

## ****11。缩小 CSS 和 JavaScript 文件****

**这是一种减小文件大小、删除冗余数据而不影响逻辑的技术。**

## ****12。减少网站使用的字体数量****

## ****13。使用 ETags HTTP 头****

**这是十六进制代码，它唯一地表示资源的指纹，这意味着，如果文件改变，这个十六进制代码也改变。**

**这有助于条件加载。如果一个资源的 ETag 改变了，这意味着它被更新了，然后它必须重新下载这个资源。**

**作为优化站点性能策略的一部分，您需要在服务器中配置此功能。**

## **14。尝试进行更少的 DNS 查找**

**如果您开始引用太多的域，这将增加新的 DNS 查找延迟。浏览器通过[预缓存](https://developer.mozilla.org/en-US/docs/Learn/Performance/dns-prefetch)一些 DNS 查找来帮助。**

## ****15。优化您的 JSON 响应****

**重要的是，JSON 响应只包含所需的数据，以减少下载时间。**

# **提高 Web 性能需要考虑的其他事项**

## **[**服务器端渲染**](https://btholt.github.io/complete-intro-to-react-v4/server-side-rendering)**

**这种技术有助于避免将许多资源下载到客户端，响应是完全呈现的 HTML 文件。**

**一个必须这样做的例子是，页面是从速度非常有限的移动电话上使用的。**

## ****喜欢 CSS 动画胜过 JavaScript 动画****

**最好将所有可能的 JavaScript 动画都移到 CSS 引擎中。**

**JavaScript 对时间并不精确，如果你的代码依赖于`setTimeout`或`setInterval`就会有问题。一般来说，有缺陷的动画被认为是一个实现糟糕的网站。**

**感谢阅读！如果你有任何建议或想法，请告诉我。**

# **资源**

**[1] [凯尔](https://medium.com/u/5dccb9bb4625?source=post_page-----a339ec7bfb44--------------------------------)辛普森[网站表现](https://frontendmasters.com/courses/website-performance/)(2013 年 3 月 29 日)。**