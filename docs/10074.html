<html>
<head>
<title>Create Your Unique Newsletter With Pipedream</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Pipedream创建您独特的时事通讯</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/create-your-unique-newsletter-with-pipedream-f0bc2de1a067?source=collection_archive---------4-----------------------#2021-11-23">https://betterprogramming.pub/create-your-unique-newsletter-with-pipedream-f0bc2de1a067?source=collection_archive---------4-----------------------#2021-11-23</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7e89" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何浏览网站并安排一份包含摘要内容的时事通讯</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/de446fd2d1846fde12e9c3c9bdac69e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UXcKSi3gY-jh0iQ2"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">泰勒·尼克斯在Unsplash<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><p id="4961" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在本教程中，我将向你展示如何在<a class="ae kz" href="https://pipedream.com/" rel="noopener ugc nofollow" target="_blank"> Pipedream </a>中创建一个管道来撰写并发送一份时事通讯给你自己。</p><p id="1a5e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这封邮件有什么独特之处？我们将根据关键字从我们喜欢的网站中提取信息。我们决定我们想要收到多少文章以及多久收到一次。有时，内容可能太长而无法阅读，我们只需要理解要点。为了解决这个问题，我们将用几句话来总结全文。<br/>当您关注特定主题并希望获得快速更新时，例如加密货币、Covid新闻等，这可能会很有用。</p><p id="c19e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在之前的<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/pipedream-api-integration-made-easy-f098de654cd1?source=your_stories_page-------------------------------------">帖子</a>中，我已经介绍了Pipedream的特性。简而言之，它是一个低代码平台，只需点击几下鼠标就可以集成各种API。</p><p id="f289" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您将在以下步骤中获得经验:</p><ul class=""><li id="ebd1" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">Pipedream支持原生NodeJS代码的执行。我们将使用<a class="ae kz" href="https://www.npmjs.com/package/cheerio" rel="noopener ugc nofollow" target="_blank"> cheerio </a> npm包从各种文章中收集信息。</li><li id="d305" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">新闻API将帮助我们从新闻来源和博客中找到文章。</li><li id="f8fb" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">为了节省阅读长篇文章的时间，我们将使用<a class="ae kz" href="https://www.npmjs.com/package/@trashhalo/node-summarizer" rel="noopener ugc nofollow" target="_blank"> node-summarizer </a>库对提取的文本进行总结。</li><li id="b94c" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">Pipedream有一个内置的日程安排功能，允许我们在指定的时间定期给自己发送电子邮件。</li></ul><p id="5c4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们开始吧！</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="b700" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">准备工作流程</h1><ol class=""><li id="aba5" class="lw lx iu lc b ld nj lg nk lj nl ln nm lr nn lv no mc md me bi translated">创建一个Pipedream账户，并转到<strong class="lc iv">工作流程</strong>选项卡。</li><li id="a756" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv no mc md me bi translated">点击<strong class="lc iv">新建+ </strong>按钮创建一个新的工作流程，并选择<strong class="lc iv">计划</strong>触发器:</li></ol><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/fe5cd7c2c9dbec5df50430a1fef40329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvHAC9DDMTv344RTiEVipQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用计划触发器创建新的工作流</p></figure><p id="7571" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面是一个在周一、周三和周五欧洲中部时间下午18:00发送简讯的示例表达式:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nu"><img src="../Images/6b62b99404c314247a92d056f8f5c838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*Wsl9f3UC5-Z0i-_W1MSfeg.png"/></div></figure><p id="05c0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要立即测试工作流程，单击<strong class="lc iv">立即运行</strong>按钮。但是由于我们还没有创建任何步骤，我们稍后将测试它。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="3782" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">准备新闻来源</h1><p id="1435" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">NewsAPI是一个免费的网络新闻搜索API。要将它与Pipedream集成，必须先注册。</p><ol class=""><li id="bf91" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv no mc md me bi translated">添加一个新步骤来连接NewsAPI:</li></ol><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ny"><img src="../Images/aa36c8894bd2dbfdf7c21ee165bad51c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*HiTBSAM-g4lxN7ZMb6fIJQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">添加NewsAPI步骤</p></figure><p id="fde6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">2.连接您刚刚创建的NewsAPI帐户。命名步骤<code class="fe nq nr ns nt b">steps.newsapi</code>:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nz"><img src="../Images/8f82157167ac5cfd7d5bc7a8beaa67b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*jKb-i853sZFmV-yCmcb3bA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">NewsAPI步骤</p></figure><p id="19d2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如您所见，代码是自动生成的。现在，我们只需要调整它来满足我们的需求。检查<a class="ae kz" href="https://newsapi.org/docs" rel="noopener ugc nofollow" target="_blank">文件</a>中的端点和参数。在这个例子中，我使用带有以下参数的<code class="fe nq nr ns nt b">/everything</code>端点:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">NewsAPI步骤</p></figure><ul class=""><li id="cde8" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated"><code class="fe nq nr ns nt b">qInTitle</code>只搜索标题中的关键词或短语。话题可以涉及政治、金融新闻、健康等。</li><li id="8b46" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><code class="fe nq nr ns nt b">domains</code>包含一个逗号分隔的列表，列出了您想要抓取的网站域名。注意，有些网站会屏蔽抓取。在这个例子中，<em class="oc">cnbc.com</em>是一个不错的选择，因为它允许你提取信息。</li><li id="b8c5" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">我使用<code class="fe nq nr ns nt b">language</code>参数将结果限制在英文网站。</li><li id="c9c1" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><code class="fe nq nr ns nt b">pageSize</code>定义了我们想要返回的物品的最大数量。</li><li id="33a6" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">我使用了<code class="fe nq nr ns nt b">sortBy: `relevancy`</code>参数来接收与我的查询更接近的文章。</li></ul><p id="f84d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">查看文档以了解更多选项。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="43e2" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">创建时事通讯</h1><ol class=""><li id="a385" class="lw lx iu lc b ld nj lg nk lj nl ln nm lr nn lv no mc md me bi translated">为NodeJS代码添加一个新步骤，并将其命名为<code class="fe nq nr ns nt b">step.scrape_summarize</code>。</li><li id="217c" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv no mc md me bi translated">插入以下代码:</li></ol><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">刮和总结步骤</p></figure><ul class=""><li id="3522" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">我们使用<code class="fe nq nr ns nt b"><a class="ae kz" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank">axios</a></code>库通过浏览器发出一个HTTP请求。</li><li id="a1f5" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><code class="fe nq nr ns nt b">cheerio</code>库将抓取网站的内容。</li><li id="6960" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">创建文本摘要需要<code class="fe nq nr ns nt b">node-summarizer</code>库。</li><li id="f501" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><code class="fe nq nr ns nt b">fetchHTML()</code>函数加载页面的HTML以便我们可以搜索元素。</li><li id="d187" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">我们通过调用<code class="fe nq nr ns nt b">steps.newsapi.$return_value.articles</code>遍历上一步返回的文章。</li><li id="fad0" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><code class="fe nq nr ns nt b">div.ArticleBody-articleBody</code>包含我们将用于摘要的文章正文。如何找出这些信息？打开文章的URL并启用开发者工具。单击inspect element并开始搜索包含文章正文的元素。在本例中，您应该会看到类似这样的内容:</li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj od"><img src="../Images/990b5246570110e27265ed047054192c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*ss_o8RBWRPs85YBU-H9njg.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">查找文章正文的div标签</p></figure><p id="1064" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当然，每个网站都有自己的结构，所以网页抓取是一项非常具有挑战性的任务。我注意到大多数关于cnbc.com的文章都使用了这种结构。但是请确保根据您的需要更改该值。</p><p id="49ae" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您想从更多的页面中提取数据，可以向NewsAPI步骤添加一个新的域。然后，您可以添加条件来检查域名，并相应地搜索不同的HTML元素。</p><ul class=""><li id="676c" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated"><code class="fe nq nr ns nt b">summary</code>将包含8个句子。随意修改文章长度。</li><li id="1b18" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><code class="fe nq nr ns nt b">contents</code>对象包含标题、摘要、URL和发布日期。我们将很快使用它来撰写电子邮件。</li></ul></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="fd46" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">创建电子邮件</h1><ol class=""><li id="9eb0" class="lw lx iu lc b ld nj lg nk lj nl ln nm lr nn lv no mc md me bi translated">添加新步骤<strong class="lc iv">给自己发邮件</strong>:</li></ol><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oe"><img src="../Images/5dbd7878693332fe1c7b5428a5016df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*Vd1QmE0tpVjsUPK_UCWj3w.png"/></div></figure><p id="177e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">2.粘贴以下代码:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="oa ob l"/></div></figure><ul class=""><li id="f82b" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">我们循环浏览<code class="fe nq nr ns nt b">scrape_summarize</code>步骤中的每一篇文章，将必要的数据添加到电子邮件中。</li><li id="15d3" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">不幸的是，有些文章可能没有正文，例如，如果scraper找不到必要的标签。这就是为什么我们通过勾选<code class="fe nq nr ns nt b">body.length</code>将他们排除在邮件之外。</li><li id="c88e" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">Pipedream允许我们对消息使用HTML格式，因此我们使用它来使内容更具可读性。</li></ul></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="a5b1" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">测试管道</h1><p id="ca57" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">最后，我们完成了API的粘合。正如我前面提到的，您可以通过在<code class="fe nq nr ns nt b">trigger</code>步骤中按下<strong class="lc iv"> Run Now </strong>来立即运行代码。</p><p id="5074" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">系统会向您注册时使用的地址发送电子邮件。</strong></p><p id="8fda" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在导航到您的电子邮件。您应该会看到这样的消息正文:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj od"><img src="../Images/138113866bbf00e663a0249dfda73e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fxdpPr5fzzBDUaob71KVQQ.gif"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">来自Pipedream的电子邮件</p></figure><p id="8868" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太好了！现在，我们已经根据自己的兴趣撰写了一份独特的时事通讯。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h1 id="665b" class="mr ms iu bd mt mu mv mw mx my mz na nb ka nc kb nd kd ne ke nf kg ng kh nh ni bi translated">最后的想法</h1><p id="5bd7" class="pw-post-body-paragraph la lb iu lc b ld nj jv lf lg nk jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">在本文中，您了解了如何在Pipedream中使用npm库抓取网页和总结文本。</p><p id="1140" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请记住，对于金融文章，文本摘要结果可能不那么准确。有时候，总结者在解释数字上有问题。目前，Pipedream支持NodeJS本地代码，但Python支持正在进行中。以我的经验，它有更强大的文本分析库，所以我很期待。</p><p id="718e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">获得更好汇总结果的另一种方法是用Python编写这部分代码。您可以将代码托管在您的服务器或云中。Pipedream允许您对URL执行HTTP请求，因此您可以调用您的端点并将文章的正文作为参数传递。</p><p id="0adb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你想了解更多关于Pipedream的知识，可以看看我的另一篇相关文章:</p><div class="of og gq gs oh oi"><a rel="noopener  ugc nofollow" target="_blank" href="/pipedream-api-integration-made-easy-f098de654cd1"><div class="oj ab fp"><div class="ok ab ol cl cj om"><h2 class="bd iv gz z fq on fs ft oo fv fx it bi translated">Pipedream: API集成变得简单</h2><div class="op l"><h3 class="bd b gz z fq on fs ft oo fv fx dk translated">了解如何使用Pipedream通过几次点击来连接API</h3></div><div class="oq l"><p class="bd b dl z fq on fs ft oo fv fx dk translated">better编程. pub</p></div></div><div class="or l"><div class="os l ot ou ov or ow kt oi"/></div></div></a></div><p id="afc4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢您的阅读。还有快乐编码！</p></div></div>    
</body>
</html>