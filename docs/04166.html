<html>
<head>
<title>How to Set Up a Database With Firebase Firestore to Use With Android Architecture Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Firebase Firestore设置数据库，以便与Android架构组件一起使用</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-set-up-a-database-with-firebase-firestore-to-use-with-android-architecture-components-992ab5df8223?source=collection_archive---------2-----------------------#2020-03-27">https://betterprogramming.pub/how-to-set-up-a-database-with-firebase-firestore-to-use-with-android-architecture-components-992ab5df8223?source=collection_archive---------2-----------------------#2020-03-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="65f2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为您的Android应用添加数据库功能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/77887e978a1eba5054776d2e708d688c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KPkPsit7tOGp3HEK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="d820" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://medium.com/better-programming/create-an-app-that-uses-livedata-and-viewmodel-in-java-f8086ca94229" rel="noopener">之前的一篇文章</a>中，我们讨论了如何使用Android架构组件中最重要的两个构建模块:LiveData和ViewModel来创建Android应用程序。这是该教程的后续。</p><p id="dd82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们有了一个具有干净架构的应用程序，我们将为Android架构组件配置Firebase Firestore，以实时更新数据，并充分利用Android中的LiveData和ViewModel。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7aa3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">启动</h1><p id="fb7f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们将从为上一个教程构建的应用程序“我的购物清单”开始本教程。从<a class="ae ky" href="http://www.evanamargain.com/blog/wp-content/uploads/2020/05/MyShoppingList-Firestore-Start.zip" rel="noopener ugc nofollow" target="_blank">我的网站</a>下载启动项目。</p><p id="17a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Android Studio中打开应用程序，让Gradle同步完成。运行应用程序，您应该会看到一个带有购物清单的应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/43014d0b02acdc4af7b24843517a064b.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/0*caLTJJQKr2QboDgS"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图1:我的购物清单应用。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8b10" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在Firebase控制台中创建项目</h1><p id="edf0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">第一步是创建一个Firebase控制台项目。进入<a class="ae ky" href="https://console.firebase.google.com/u/0/?pli=1" rel="noopener ugc nofollow" target="_blank"> Firebase控制台主页</a>。在此屏幕上，您将看到两种布局之一:</p><ol class=""><li id="d139" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">如果您以前从未使用过Firebase控制台，系统会提示您一条欢迎消息，并邀请您创建一个项目。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/b7e720623995d6804268f12645bed95e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kWfr-FUUtveYcO8i"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图2:没有项目的Firebase控制台欢迎屏幕。</p></figure><p id="7018" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.如果您有其他项目，您将看到它们的列表和一个用于添加项目的白色卡片。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/7dceef051a9789b9b0df9400a10238f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G7Fnv2-lsN8yW6g7"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图3: Firebase控制台欢迎屏幕和其他项目。</p></figure><p id="6576" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据您拥有的选项，单击按钮创建一个项目，您将开始创建项目的流程。第一个屏幕将提示您输入项目的名称。在这种情况下，您将使用与您的Android应用程序相同的名称，即MyShoppingList。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/d0c04dec0d2c78e0dabdb9f7230957d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gSaK98fJTqHKQ0_I"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4:命名Firebase项目。</p></figure><p id="b436" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击继续，下一步将询问您是否要启用谷歌分析。这对于Firestore来说不是必需的，但出于其他原因，您可能希望启用它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/5d56a048574784470bdedf2dbf01703b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nUzg667NP0eM_-gp"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图5:在Firebase项目中启用Google Analytics。</p></figure><p id="fd32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击Create project，您将看到一个加载屏幕(图6)。这需要一点时间，所以不要担心。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/b64264ad7168230013de01b8a8b3aaa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*32JefQH91GCoJj2_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图6:创建Firebase项目加载器。</p></figure><p id="d8b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">流程完成后，加载器将变成三个橙色圆点，并显示确认文本和继续按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/436a21e3fb0c44c4b04f69a38bd818ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7flk2Cy8bVBcqxaX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图7: Firebase项目创建正确。</p></figure><p id="6501" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击Continue按钮，您将被带到MyShoppingList项目的主屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/8e6799caac4aa4467a0aa3e201722f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Zht7_vwI69iiBG2"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图MyShoppingList项目的主屏幕。</p></figure><p id="fe93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要的是要明白这个项目将适用于许多平台——不仅仅是Android。如果你打算将Firestore集成到一个iOS应用程序或一个web项目中，你将使用同一个项目，这也将使你能够跨平台共享数据库。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6112" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">向Android应用程序添加Firebase</h1><p id="6da0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">从这部分开始，配置是安卓特有的。在您项目的主屏幕上，单击白色的Android小图标开始集成流程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/dc82a9b0caf96c9a51199d5fdeea9c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OhGulZHyPIQo6wUj"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图9:开始集成流程。</p></figure><p id="d5db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为第一步，Firebase将请求您的应用程序的数据。添加以下内容:</p><ol class=""><li id="ac8c" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">包名:<code class="fe nl nm nn no b">com.evanamargain.android.myshoppinglist</code>。这必须与您应用程序中的包名相同。如果你不确定并且没有使用演示项目，请访问app&gt;manifests&gt;androidmanifest . XML。该包位于文件的前几行。</li><li id="1fbe" class="na nb it lb b lc np lf nq li nr lm ns lq nt lu nf ng nh ni bi translated">昵称:我的购物清单。这可以是任何有助于你记住应用程序名称的昵称。也许你会想加个后缀“Android”来区别于另一个app。</li><li id="dac4" class="na nb it lb b lc np lf nq li nr lm ns lq nt lu nf ng nh ni bi translated">SHA-1证书:这可以是空的，因为在本教程中不会用到它。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/07d874c8196319d75c79ae29bc52f3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yQtDG0WkqzH0qMML"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图10。添加所需数据的第一步。</p></figure><p id="0f7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入数据后，会得到一个名为<code class="fe nl nm nn no b">google-services.json</code>的JSON文件。屏幕上有将其集成到应用程序中的说明，但我会在下面解释，以防不清楚。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/c29d9ca30bfac5a20c302dd891638edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bqGuUcYiZb0d6JPQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图11:Android中Firebase的JSON配置文件。</p></figure><p id="49a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到Android Studio，在那里打开项目，并在左侧面板中切换视图。您的项目可能处于“Android”模式，您将获得一个下拉列表，其中包含类似于下图12的视图选项:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/01d0c05865f49ae5af949771d452c06e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LMqLOND2KWpaVyMa"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图12:Android Studio中的Android项目视图。</p></figure><p id="9c83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进入项目视图后，您将看到如下图所示的文件树。将文件从Firebase控制台下载到计算机的任何位置，然后拖放到MyShoppingList &gt; app。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/dbcbd73fa45fb17fe5a808a1a25242e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Eem5ItNbIHgrOoy9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图13: Android项目结构。</p></figure><p id="5309" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后切换回左侧面板中的Android视图。大多数情况下，您将在这个视图中使用Android项目，因为它是编码时最容易导航的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/b4c0db3e351c97c5aef772b483917f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HdwR8iS83t1JZfmI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图14:Android Studio中的Android视图。</p></figure><p id="6096" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你进入Android视图，打开<code class="fe nl nm nn no b">build.gradle (Project: MyShoppingList)</code>。添加此代码:</p><pre class="kj kk kl km gt nv no nw nx aw ny bi"><span id="cfff" class="nz md it no b gy oa ob l oc od">classpath 'com.google.gms:google-services:4.3.3'</span></pre><p id="104f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在同一个文件夹中，<code class="fe nl nm nn no b">open Build.gradle (Module: app)</code>并添加以下代码:</p><pre class="kj kk kl km gt nv no nw nx aw ny bi"><span id="64e6" class="nz md it no b gy oa ob l oc od">apply plugin: 'com.google.gms.google-services' <br/>... </span><span id="9315" class="nz md it no b gy oe ob l oc od">dependencies { <br/>  ...</span><span id="6597" class="nz md it no b gy oe ob l oc od">  // In case you activated Google Analytics</span><span id="eee7" class="nz md it no b gy oe ob l oc od">  // Add the Firebase SDK for Google Analytics</span><span id="23aa" class="nz md it no b gy oe ob l oc od">  implementation 'com.google.firebase:firebase-analytics:17.2.2'</span><span id="66cb" class="nz md it no b gy oe ob l oc od">  // Add Firestore dependency</span><span id="410d" class="nz md it no b gy oe ob l oc od">  implementation 'com.google.firebase:firebase-firestore:21.</span><span id="47d4" class="nz md it no b gy oe ob l oc od">}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/dae3e05a8438204497c129166704ac35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n3si_ZYudX4e3IK-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图15: Android Studio请求Gradle同步。</p></figure><p id="ebaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对同步是否成功有任何疑问，请查看底部面板。它应该看起来像下面的图16:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/c0c6704fd3708af8e8ab6ad4948fac60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xuPeVsWmQVs2zosm"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图16: Gradle在Android Studio中构建成功。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="28a9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">完成Firebase控制台配置</h1><p id="b10c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">然后返回Firebase控制台，单击Next确认您已经将JSON文件和依赖项添加到项目中。屏幕底部会有一个提示，表明Firebase正在验证您的应用程序和控制台之间的连接。构建并运行应用程序。它的运行和外观应该与教程开始时一样。这样做之后，Firebase应该会确认连接，并给你一个继续控制台按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/43ed9e254e2998fe87d4a93073d1985a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2ECJhBgVwqz_n5jz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图17:应用程序和Firebase控制台之间的连接已确认。</p></figure><p id="a8e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果上面的步骤失败了，回到说明，确保你做的一切都是正确的。否则，在项目的主屏幕上，你会看到一个紫色的图标，上面有紫色的Android标志，这意味着你的项目连接到了应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/7263c52f8cccb3513985c9d8900aa8b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ABuTt3U76y99p4qR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图18:添加到Firebase控制台项目的Android应用程序。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a1f4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在Firebase控制台中配置Firestore</h1><p id="3d77" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一旦您在Firebase控制台中有了一个项目，并将您的应用程序连接到该项目，就该在控制台中配置您的Firestore数据库了。在主项目屏幕下方找到一个大的橙色磁贴，如下图19所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/784d1fb09bbb60b967e685d540cd9600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Valc-hRFVk9-2Um1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图19:云Firestore访问磁贴。</p></figure><p id="7be8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将访问该项目的Firestore页面，并在一个大横幅中获得创建数据库的提示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/7299f0af3d1582b1540c665a16ead2f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gIQdOSKMKcrHW6kL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图20: Firestore创建第一个数据库。</p></figure><p id="ae2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击创建数据库按钮，将出现一个模式屏幕。它会首先询问你关于数据库安全性的问题。对于开发和本教程，您将把它设置为“测试模式”，但是考虑到对于生产应用程序，启用“生产模式”是很重要的，因为您希望您的用户数据是安全的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/e4dfe53f702a2e752ce9d28d0b65d555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k5cpRgVIkpzRzuET"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图21: Firestore数据库模式。</p></figure><p id="ecd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击下一步，系统会询问您服务器的位置。通常，建议选择离您或您的用户最近的位置，因为这将减少加载时间。我认为Firebase控制台会自动建议离你最近的一个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/0c2550149dad1335b67420f775d46540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FQ3mV0IaqC97XKiP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图22: Firestore数据库位置。</p></figure><p id="333a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击“完成”后，会显示一个配置云Firestore微调器(图23)。我曾经在一次谷歌云会议上被告知，如果服务过于饱和，这种供应可能需要三分钟，但通常需要的时间不到三分钟。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/a86318924bcd62ff13c184edf5ab1dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IF4J5MlmfEz6ICGf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图23: Firestore供应微调器。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="89fc" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">配置数据库</h1><p id="5ecd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">配置过程完成后，您将看到您的数据库，如下图所示。数据库是空的，正在等待您开始处理它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/76de36b94bb4163c1db069f0da850fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UXxEHbVSO3KCKs2j"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图24: Firestore数据库为空。</p></figure><p id="ac75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单击“+开始收藏”文本创建您的第一个收藏。该数据库具有基于集合&gt;文档&gt;字段的多栏结构。根据演示应用程序，我们希望我们的集合被称为我的杂货，因为这将包含我们所有的杂货。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/7117d2baabff09bc5bee942ebea02e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z5Snpy-t0pr1SUc3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图25: Firestore添加产品系列。</p></figure><p id="bead" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，对于该文档，还会提示您输入名称。如果你想在你的应用程序中有几个列表，它可以是“今天杂货”或日期(例如“3月30日–2020”)。</p><p id="be9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加带有示例数据的字段:</p><ol class=""><li id="5683" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">Item1 =字符串—香蕉</li><li id="e200" class="na nb it lb b lc np lf nq li nr lm ns lq nt lu nf ng nh ni bi translated">Item2 = string —花生酱</li><li id="6d18" class="na nb it lb b lc np lf nq li nr lm ns lq nt lu nf ng nh ni bi translated">Item3 = string —面包</li><li id="a971" class="na nb it lb b lc np lf nq li nr lm ns lq nt lu nf ng nh ni bi">…</li></ol><p id="968c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加尽可能多的你想要的或只是复制我们的应用程序中的样本数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/990150269e31908f61a78d880fe314f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JwPnhnQ4Be_oISnK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图26: Firestore添加文档。</p></figure><p id="d8b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加完所有字段后，您的数据库应该如下面的图27所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/d7f85f6f2cd3adb4b3d1b52dd95e2063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2rkzxiP6lkrmOKsg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图27:带有演示数据的Firestore数据库。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ed7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="dccd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">就是这样！我们现在有Firebase控制台和Android应用程序，配置为使用Firestore，其中有一个数据库。在下一部分，我们将把这个数据库集成到Android架构组件中。如果你想看看项目最后应该如何运作，可以在<a class="ae ky" href="http://www.evanamargain.com/blog/wp-content/uploads/2020/05/MyShoppingList-Firestore-End.zip" rel="noopener ugc nofollow" target="_blank">我的网站</a>下载完成的项目。</p><p id="cd3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有任何疑问，不要犹豫留下评论，我会尽快回复。</p><p id="73b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下次见！</p></div></div>    
</body>
</html>