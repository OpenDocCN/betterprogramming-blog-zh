<html>
<head>
<title>Angular: Shared Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度:共享模块</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/angular-4-shared-modules-18ac50f24852?source=collection_archive---------4-----------------------#2017-10-03">https://betterprogramming.pub/angular-4-shared-modules-18ac50f24852?source=collection_archive---------4-----------------------#2017-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0316" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们如何创建共享模块？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/87ccc284e046afbb31aa0a960cb90f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*nbJ41jD1-r2Oe6FsLjKaOg.png"/></div></figure><p id="3365" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">您需要创建一个将在应用程序的不同模块上使用的组件，这种情况很常见。如果你试图将组件添加到多个模块中，Angular会抛出一个错误:</p><pre class="kg kh ki kj gt lj lk ll lm aw ln bi"><span id="a5a3" class="lo lp iq lk b gy lq lr l ls lt">Type xxxComponent is part of the declarations of 2 modules: xxxModule and yyyModule</span></pre><p id="0486" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">正是在这种情况下，共享模块才有意义。它们将允许您在多个模块中使用组件，共享服务实例，并且还应该是创建应用程序的公共管道和指令的地方。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="eb51" class="mb lp iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">我们如何创建共享模块？</h1><p id="189a" class="pw-post-body-paragraph kn ko iq kp b kq ms jr ks kt mt ju kv kw mu ky kz la mv lc ld le mw lg lh li ij bi translated">当然，首先您需要创建一个模块。它不需要在任何地方包含单词<em class="mx"> shared </em>，它可以是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/b25fb33faa74128cca5240a51e61f552.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*dPrlZTTUUBADe3CsDNkaLg.png"/></div></figure><p id="2148" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这个模块将包含与应用程序日期相关的所有内容(日期选择器、格式化器等等)。</p><p id="e604" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在，让我们将一个组件添加到本模块中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/4e04c5d4d47c65f0fb830988c19bd9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*FOEtzYk_0x3MuLOB8utW1Q.png"/></div></figure><p id="67a8" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">到目前为止，一切就像你在创建一个常规模块一样，但这还不够，你需要让使用这个模块的其他模块可以访问<code class="fe na nb nc lk b">DatePickerComponent</code>。</p><p id="1939" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为此，您需要将日期选择器组件添加到模块导出数组中:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/97e3d5bb9d2121a8ad58d6920d476310.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*-iIOHD-ZjIIhYzrTTJcQ8w.png"/></div></figure><p id="1440" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在，您允许导入<code class="fe na nb nc lk b">DateModule</code>的其他模块访问<code class="fe na nb nc lk b">DatePickerComponent</code>。</p><p id="e1ea" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">使用同样的方法，您可以导出管道和指令，但是不能使用它来导出服务。</p><p id="48a8" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">对于服务，您需要将函数<code class="fe na nb nc lk b">forRoot()</code>添加到共享模块中。你最终会得到这样的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/f886be582f3e68de9f4789ee6ff83d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*2F1gtpLLKr89ZbYkUcHthg.png"/></div></figure><p id="c68e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">按照惯例，<code class="fe na nb nc lk b">forRoot</code>静态方法同时提供和配置服务。</p><p id="ce60" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在这种共享模块(公开服务)的情况下，您需要添加它们并调用根模块中的<code class="fe na nb nc lk b">forRoot</code>(通常是<code class="fe na nb nc lk b">AppModule</code>)来确保拥有公开服务的全局实例。</p><p id="e211" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">您还可以将参数传递给<code class="fe na nb nc lk b">forRoot</code>方法来配置服务初始化。如果你需要参数，你的代码将会像这样结束:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c527f092fc87f9fc23e41901cb14479c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*TiYW0mkVo_oidVPPcjxK1g.png"/></div></figure><p id="6c2a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在您的服务中，您在构造函数上接收这些值:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/cbd22300fff7b5d5e69af0cb571581c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*CPCvBTWhBKycBV9cOMjwDQ.png"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="ffe6" class="mb lp iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">结论</h1><p id="330b" class="pw-post-body-paragraph kn ko iq kp b kq ms jr ks kt mt ju kv kw mu ky kz la mv lc ld le mw lg lh li ij bi translated">在Angular中创建共享模块非常简单，你迟早需要在你的应用中创建一个。</p><p id="dd64" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">即使一开始听起来有点可怕，你也会对和他们一起工作以及他们的优点感到舒服。</p></div></div>    
</body>
</html>