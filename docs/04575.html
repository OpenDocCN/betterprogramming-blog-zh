<html>
<head>
<title>Why You Should Use Enumerations in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么应该在JavaScript中使用枚举</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/why-you-should-use-enumerations-in-javascript-3cbb0d03b8de?source=collection_archive---------10-----------------------#2020-04-22">https://betterprogramming.pub/why-you-should-use-enumerations-in-javascript-3cbb0d03b8de?source=collection_archive---------10-----------------------#2020-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2255" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">枚举有许多经常被忽略的好处</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f748dc2448302fb79cd5f42d9ca46032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hkOvn1xEV7aP9gCA"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@bcampbell?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Brooke Campbell </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="1d00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript中的枚举有很多好处。它们有助于减少字符串的拼写错误，同时也为一些数值提供了英文名称。这些值也被认为是常量，在运行时不会发生变化——所有这些都使得代码更容易重构，因为这些值只有一个真实的来源。不喜欢什么？</p><p id="2d63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看一些例子以及如何实现枚举。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="752d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">定义我们的枚举</h1><p id="6701" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">尽管JavaScript没有枚举的本机类型，但我们总是可以使用对象创建自己的类型。在定义枚举时，有几个常用的约定——尽管您不必坚持它们。</p><ul class=""><li id="b12e" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">枚举名称是大写字母。</li><li id="15be" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">避免使用缩写，除非它们是常用的。</li><li id="ecc7" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">属性是大写的。</li><li id="5253" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">属性用下划线分隔。</li></ul><p id="3691" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑到以上内容，我们来看看以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="deb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们这里有一个枚举，用于一些我们可能在代码库中经常使用的时间值。我们在枚举中定义了一个永远不会改变的常数，而不是让原始数字到处浮动，我们可能会不小心给它加一个0。</p><p id="8785" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里使用枚举的好处是:</p><ul class=""><li id="beee" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">IDE/编辑器中的自动完成</li><li id="80b9" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">真理的单一来源</li><li id="eeb0" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">一致性</li><li id="c565" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">突出显示错误——我们可能会遗漏值的0，但不会遗漏拼写错误的常量名称</li><li id="2dc7" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">可按名称搜索</li></ul><p id="d425" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:一个经常被忽视的好处是，在枚举中给这个值一个特定的名字将允许我们在代码中搜索这个值的所有使用。数字7可能会出现一千次，但<code class="fe nm nn no np b">DAYS_PER_WEEK</code>出现的次数会少得多。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="daa8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">幻数被高估了</h1><p id="b024" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在代码中遇到幻数从来都不好玩。这个看似武断的2是什么意思？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="b58b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果这是一个枚举，那么该值可能已经被赋予了一个揭示意图的名称。</p><p id="73eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在枚举中给这个值一个合适的名称后，我们可以立即看到这个值的用途。在代码中准确地命名是很重要的。它使一切更容易阅读、推理和理解。</p><p id="5b2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也就是说，在我们的代码中有原始数字并不总是难以理解的。一些数字如此常见，以至于我们不需要用名字来突出它们的意图，只要代码是不言自明的。请考虑以下情况:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="c1d5" class="nu ma iq np b gy nv nw l nx ny">const dailyPay = hourlyRate * 8</span></pre><p id="b98e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以清楚地看到，数字8代表一天工作的小时数。这个值不一定要放在枚举中。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ff32" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">确保它是冷冻的</h1><p id="be79" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">创建枚举时要考虑的事情是确保对象是冻结的。调用native <code class="fe nm nn no np b">Object.freeze(value)</code>将防止我们定义的常量发生突变。我们不希望这些值在运行时被改变。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="58a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们调用这个函数时，我们需要传入我们的新枚举，它的当前状态将被冻结并返回。对象的原型也被冻结。现在不能修改、添加或删除任何属性。</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="2d5c" class="nu ma iq np b gy nv nw l nx ny">Choices.ROCK = 'paper' // Returns 'paper'</span><span id="bf7c" class="nu ma iq np b gy nz nw l nx ny">console.log(Choices.ROCK) // Logs 'rock'</span></pre><p id="b9ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们现在试图改变对象，我们试图分配的值将被返回，但是对象的状态不会被改变。当我们尝试注销enum属性时，我们可以看到这一点。如我们所料，<code class="fe nm nn no np b">ROCK</code>属性保留了它的初始值<code class="fe nm nn no np b">rock</code>。</p><p id="cc15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:冻结只适用于顶层属性。嵌套对象仍然是可变的。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5f64" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">注意使用的值</h1><p id="e818" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">值得注意的是，有时我们可能会遇到一个微妙的问题。我们应该警惕在枚举中使用JavaScript falsy值作为值。它们会引起不必要的头痛。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="97d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的问题是我们的枚举使用0作为一月的值。在JavaScript中这是一个错误的值，意味着我们的条件将计算为<code class="fe nm nn no np b">true</code>。所有falsy值都将导致上述记录。这也是因为<code class="fe nm nn no np b">==</code>的宽松对比<code class="fe nm nn no np b">===</code>的严格对比，这本身就是另一个话题。</p><p id="9353" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，尽量避免在枚举中分配虚假的值。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/332a9539ca216d70d31091ac4df815d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k274DfHHpDfKOyG7"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">西蒙·马特辛格在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="5df4" class="lz ma iq bd mb mc ob me mf mg oc mi mj jw od jx ml jz oe ka mn kc of kd mp mq bi translated">最后一个结论！</h1><p id="52e7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在JavaScript中使用枚举的概念有很多好处，但缺点很少。虽然它可能不适合每一个用例，但它肯定会影响大多数用例。那么为什么不利用它们呢？</p><p id="0511" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一些参考资料可能会引起你的兴趣，如果你想了解更多或者开始在你自己的代码库中实现枚举，如果你还没有这样做的话。</p><p id="827c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze" rel="noopener ugc nofollow" target="_blank">MDN object . freeze()</a><br/><a class="ae kv" href="https://www.tutorialspoint.com/what-is-the-syntax-to-define-enums-in-javascript" rel="noopener ugc nofollow" target="_blank">Tutorialspoint枚举</a> <br/> <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank"> JavaScript Falsy值</a></p><p id="02c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。我希望你喜欢这篇文章，并学到了一些东西。如果你碰巧有任何反馈、批评或贡献，请随意写在下面的评论区。</p><p id="f02e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再见了。</p></div></div>    
</body>
</html>