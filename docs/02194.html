<html>
<head>
<title>Vegetarian-Friendly State for React — Easy-Peasy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">素食主义者友好的国家反应——容易</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/vegetarian-friendly-state-for-react-easy-peasy-e4b4604a6ecc?source=collection_archive---------18-----------------------#2019-11-12">https://betterprogramming.pub/vegetarian-friendly-state-for-react-easy-peasy-e4b4604a6ecc?source=collection_archive---------18-----------------------#2019-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8aeb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Easy Peasy为您提供了一个直观的API来快速方便地管理React应用程序的状态</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3d8784a97e0f513b6f66acd6a978c02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bUugv0Y55gK3ts4QGq6c8w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://github.com/ctrlplusb/easy-peasy" rel="noopener ugc nofollow" target="_blank">https://github.com/ctrlplusb/easy-peasy</a></p></figure><h1 id="8f4d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么这么简单？</h1><p id="ca77" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://github.com/ctrlplusb/easy-peasy" rel="noopener ugc nofollow" target="_blank"> Easy Peasy </a>为您提供了一个直观的API来快速方便地管理React应用程序的状态。与Redux等其他工具相比，它使用的代码更少，复杂度更低。</p><p id="6245" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不需要额外的配置来支持派生状态、API调用和性能优化。更重要的是，它完全支持<strong class="lt iu"> Redux </strong>开发者工具。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="12b9" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">主要特征</h1><ul class=""><li id="0f1d" class="ne nf it lt b lu lv lx ly ma ng me nh mi ni mm nj nk nl nm bi translated">零配置，无样板文件</li><li id="b121" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated">React基于钩子的API</li><li id="d78f" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated">数据提取/副作用</li><li id="a325" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated">将状态保存到会话/本地存储</li><li id="a3cb" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated">广泛的类型脚本支持</li><li id="8685" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated">全局、共享或组件级存储</li><li id="3d69" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><strong class="lt iu">反应原生</strong>支持</li><li id="a698" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><strong class="lt iu">支持Redux开发工具</strong></li><li id="ca4b" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><strong class="lt iu">支持热重装</strong></li></ul><p id="f244" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在开发你的原生应用或浏览器web应用时，能够支持最后三件事对你特别有帮助。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="4754" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">装置</h1><p id="a658" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">安装Easy-Peasy只需要一个简单的命令。如果您使用NPM:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="fde9" class="nx la it nt b gy ny nz l oa ob">npm install <!-- -->easy-peasy</span></pre><p id="b2ed" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">或者，如果你正在使用<a class="ae ky" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">纱线</a>:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="8dbe" class="nx la it nt b gy ny nz l oa ob">yarn add <!-- -->easy-peasy</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="f8fc" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">基本用法</h1><ol class=""><li id="712b" class="ne nf it lt b lu lv lx ly ma ng me nh mi ni mm oc nk nl nm bi translated">定义一个包含商店和对这些对象的各种操作的模型。</li><li id="4d13" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm oc nk nl nm bi translated">我们只需要导入动作来定义自定义动作，每个组件都会调用这些动作。开始时，您将每个可公开访问的变量放在store部分。</li></ol></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="4f0b" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">商店</h1><p id="ceb0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在下面的例子中，我们将构建一个简单的点餐系统，在这里你可以<strong class="lt iu">添加</strong>、<strong class="lt iu">删除</strong>或<strong class="lt iu">完成</strong>自己餐馆的任何订单！</p><p id="a49e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们首先用各种函数和订单列表来定义模型:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="a8a2" class="nx la it nt b gy ny nz l oa ob">import { action, thunk } from "easy-peasy";<br/>import uuid from "uuid";<br/><br/>const model = {<br/>  // Store<br/>  foods: [],<br/>  // Subroutines to load from API<br/>  fetchFoods: thunk(async actions =&gt; {<br/>    const res = await fetch(<br/>      "https://jsonplaceholder.typicode.com/todos?_limit=4"<br/>    );<br/>    const foodsFromAPI = await res.json();<br/>    actions.setFoods(foodsFromAPI);<br/>  }),<br/>  // Actions<br/>  setFoods: action((state, foods) =&gt; {<br/>    state.foods = foods;<br/>  }),<br/>  add: action((state, food) =&gt; {<br/>    food.id = uuid.v4();<br/>    state.foods = [...state.foods, food];<br/>  }),<br/>  toggle: action((state, id) =&gt; {<br/>    state.foods.map(food =&gt; {<br/>      if (food.id === id) {<br/>        food.completed = !food.completed;<br/>      }<br/>      return food;<br/>    });<br/>  }),<br/>  remove: action((state, id) =&gt; {<br/>    state.foods = state.foods.filter(food =&gt; food.id !== id);<br/>  })<br/>};<br/><br/>export default model;</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="67db" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">定义商店提供商</h1><p id="4cd6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这里，您将使用这两个挂钩来构建一个存储，并为其余的React组件提供其操作和对象。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="1310" class="nx la it nt b gy ny nz l oa ob">import React from "react";<br/>import model from "./model";<br/>import { StoreProvider, createStore } from "easy-peasy";<br/>import Orders from "./components/Orders";<br/>import AddFood from "./components/AddFood";<br/>import "./App.css";<br/><br/>const store = createStore(model);<br/><br/>function App() {<br/>  return (<br/>    &lt;StoreProvider store={store}&gt;<br/>      &lt;div className="container"&gt;<br/>        &lt;Orders /&gt;<br/>        &lt;AddFood /&gt;<br/>        &lt;br /&gt;<br/>        &lt;img<br/>          src="https://easy-peasy.now.sh/assets/img/happy-peas.dc3eb36b.png"<br/>          alt=""<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    &lt;/StoreProvider&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="5e24" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">最后，使用行动和商店！</h1><p id="47f6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将构建两个组件，一个包含所有订单的完整列表，它还将要求商店从API初始化值。</p><p id="b27b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">订单:</strong>你要用两个最漂亮的钩子:</p><ul class=""><li id="cb2c" class="ne nf it lt b lu mn lx mo ma od me oe mi of mm nj nk nl nm bi translated"><code class="fe og oh oi nt b">useStore</code>从存储器中加载特定状态</li><li id="6ead" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><code class="fe og oh oi nt b">useActions</code>从商店调用一个特定动作，如<code class="fe og oh oi nt b">fetchFoods</code></li></ul><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="0efc" class="nx la it nt b gy ny nz l oa ob">import React, { Fragment, useEffect } from "react";<br/>import { useStore, useActions } from "easy-peasy";<br/>import FoodItem from "./FoodItem";<br/><br/>const Orders = () =&gt; {<br/>  const foods = useStore(state =&gt; state.foods);<br/>  const fetchFoods = useActions(actions =&gt; actions.fetchFoods);<br/><br/>  useEffect(() =&gt; {<br/>    fetchFoods();<br/>    // eslint-disable-next-line<br/>  }, []);<br/><br/>  function foodList() {<br/>    return foods.map(food =&gt; &lt;FoodItem todo={food} key={food.id} /&gt;);<br/>  }<br/><br/>  return (<br/>    &lt;Fragment&gt;<br/>      &lt;h1&gt;easy-peasy&lt;/h1&gt;<br/>      &lt;h2&gt;Food Order System&lt;/h2&gt;<br/>      &lt;p&gt;<br/>        Click an order to complete it!<br/>        &lt;span role="img" aria-label=""&gt;<br/>          🥦<br/>        &lt;/span&gt;<br/>      &lt;/p&gt;<br/>      &lt;hr /&gt;<br/>      {foodList()}<br/>    &lt;/Fragment&gt;<br/>  );<br/>};<br/><br/>export default Orders;</span></pre><p id="1df8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe og oh oi nt b">AddFood</code>:第二个类似组件将是向列表添加新订单的表单；总是使用不同函数的<code class="fe og oh oi nt b">useActions</code>钩子——在本例中是add函数，它追加一个新订单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="14d9" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">完整的Codesandbox</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol ok l"/></div></figure><p id="3790" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">【https://codesandbox.io/s/easy-peasy-food-orders-g9yxc】code sandbox链接:<a class="ae ky" href="https://codesandbox.io/s/easy-peasy-food-orders-g9yxc" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="1dbd" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">如果你想了解更多关于钩子的知识</h1><p id="ee54" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当我开始使用钩子时，我亲自阅读了<strong class="lt iu">"</strong><a class="ae ky" href="https://amzn.to/2Y8hoX9" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">Learn React Hooks</strong></a><strong class="lt iu">"</strong>，它帮助我理解它们如何使用工具，例如<strong class="lt iu">use actions</strong>:<a class="ae ky" href="https://amzn.to/2Y8hoX9" rel="noopener ugc nofollow" target="_blank">https://amzn.to/2Y8hoX9</a></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="2d87" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">参考资料和资源</h1><ul class=""><li id="7a9c" class="ne nf it lt b lu lv lx ly ma ng me nh mi ni mm nj nk nl nm bi translated"><a class="ae ky" href="https://easy-peasy.now.sh/" rel="noopener ugc nofollow" target="_blank">https://easy-peasy.now.sh/</a></li><li id="9437" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><a class="ae ky" href="https://github.com/ctrlplusb/easy-peasy" rel="noopener ugc nofollow" target="_blank">https://github.com/ctrlplusb/easy-peasy</a></li><li id="9d10" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><a class="ae ky" href="https://codesandbox.io/s/easy-peasy-food-orders-g9yxc" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/easy-peasy-food-orders-g9yxc</a></li></ul></div></div>    
</body>
</html>