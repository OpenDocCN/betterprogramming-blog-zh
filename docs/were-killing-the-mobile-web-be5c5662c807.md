# 我们正在扼杀移动网络

> 原文：<https://betterprogramming.pub/were-killing-the-mobile-web-be5c5662c807>

## 但是我们也可以拯救它

![](img/9d486c19a8deabc25a32d054842e9235.png)

阿里·阿卜杜勒·拉赫曼在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

你遇到过这种情况吗？

你正在手机或平板电脑上浏览网页，一个横幅出现在屏幕上方，敦促你安装该网站的原生应用。这是您第一次访问该网站，因此您决定不安装该应用程序。

但是当你多访问几次网站，横幅就一直出现，过了一段时间，你决定试试他们的原生应用。

你去商店下载。你打开应用程序，开始使用。但是你注意到这个应用程序提供的东西和你在网站上得到的并没有太大的不同。

但是用户体验*更好*。当你从一页到另一页时，没有白屏，当你打开应用程序时，它会立即启动。

所以你决定使用他们的原生应用程序而不是他们的网站，即使它占用了你移动设备上数十兆的存储空间，并且你经常被无休止的更新所困扰。

事实上，[速度和更好的用户体验是人们更喜欢本地应用而不是移动网站的主要原因](https://econsultancy.com/85-of-consumers-favour-apps-over-mobile-websites/)。

事实上，用户愿意经历安装原生应用程序和放弃设备上的存储空间的麻烦，只是为了原生应用程序提供的便利和良好的用户体验。

这是一个遗憾，因为移动网络在易用性、大小和可发现性方面有很大优势，但当移动网站提供糟糕的用户体验时，这就没有价值了。

# 网络可以做得更好

许多本地应用可以很容易地被一个精心制作的移动网站取代，并为用户提供完全相同甚至更好的用户体验。

但相反，当我们赶走他们并告诉他们安装原生应用程序时，我们提供了糟糕的用户体验或根本没有体验。

这就是为什么[用户更喜欢原生应用而不是移动网站](https://econsultancy.com/85-of-consumers-favour-apps-over-mobile-websites/)的两个主要原因是*用户体验*和*速度*。如果我们想让网络与移动相关，这些是我们的移动网站需要改进的地方。因为现在，移动网络根本无关紧要。

人们花在移动设备上的时间有高达 90%花在应用程序上，只有 10%花在移动网站上。这与桌面形成了鲜明的对比，在桌面上，基于网络的应用取得了巨大的成功。

为什么我们不能在手机上取得同样的成功？以下是一些原因:

# 我们正在积极地赶走用户

我们放在手机网站上敦促人们下载我们的原生应用的烦人横幅正在伤害手机网络。他们传达的信息是，这个网站不够好，无法在您的移动设备上查看，我们甚至没有费心去改善它。

相反，我们想在你的手机上再占用大约 100MB 的存储空间，给你和我们在手机网站上一样的体验，但我们没有。

![](img/64e0b6219bfcd68dd765b1161359d15b.png)

这里怎么了？

我无意特别挑 Stripe 的毛病，但与他们的网站相比，他们的原生应用并没有为*提供任何*附加值。然而，从微小的登录屏幕开始，该网站在移动设备上几乎无法使用。

这个网站的原生 app 也是如此，Medium。

在移动媒体网站上，您会看到一个横幅，告诉您安装原生应用程序。在点击了几个月后，我终于决定尝试一下原生应用。

这是一个 58MB 的应用程序，基本上可以给你与移动网站相同的体验。它带来的唯一附加价值是，它使你能够写一个故事，这是移动设备上的网站所无法做到的。

出于某种原因，无法回复来自原生应用的评论。例如，当一个故事的鼓掌次数为 1，256 次时，它将简单地显示为 1.2K，并且没有查看确切数字的选项。

最重要的是，在你安装了原生应用后，手机网站上显示的横幅不会消失。

更糟糕的是，现在一个*的第二个*横幅出现了，敦促你*打开*原生应用。

![](img/515305bf60db54c3b6d375423578ff3c.png)

真的，中等？

# 响应式设计首先应该是移动的

在浏览器开发工具的响应视图中查看你的网站并把它塞进移动设备的小屏幕是不够的。这基本上把它变成了一个简化版的桌面网站。

我们需要摆脱“桌面优先”的思维模式，首先开始为移动设备开发。我们的用户越来越多地使用移动设备，许多人只使用移动设备*。*

*“移动优先”的设计将确保我们在移动设备上设计完整的用户体验，然后可以扩展到桌面。我们不应该首先为桌面设计，然后去掉一些功能来适应移动设备。*

*这是一个微妙而又至关重要的差别。*

*但是确保你的网站在一个小设备上看起来不错也是不够的。你需要在移动设备上实际体验你的网络应用，这意味着在真实的条件下在真实的设备上测试你的应用。*

*在您的高级开发笔记本电脑上运行流畅的东西，在 3G 连接的廉价 Android 手机上可能就不那么流畅了。不是每个人都有最新的 iPhone 或三星手机(事实上，大多数人都没有)。*

*移动优先意味着您的用户可以在真实条件下，在真实的移动设备上获得最佳的用户体验。*

# *JavaScript 太多*

*这也意味着我们真的需要减少发送给用户的 JavaScript 代码量。在过去的十年里，[我们发送的 JavaScript 数量增加了 636%](https://httparchive.org/reports/state-of-javascript#bytesJs) ，达到 385KB gzipped 的中位数。*

*现在，385KB 可能看起来不是很大，但请记住，这解压缩到大约 2.5MB 的 JavaScript，也需要解析和执行。这发生在主线程上，这意味着它是渲染阻塞的。*

*在普通的 3G 网络上，用普通的 Android 手机向用户发送那么多的 JavaScript 代码是不够的。你的网站可能需要几十秒甚至一分钟的时间来达到交互，这基本上使得它在那些设备上不可用。*

*你可以[亲眼看看你的网站在真实网络条件下在移动设备上的表现](https://webpagetest.org/easy)。*

# *我们误解了“线下优先”*

*为“离线优先”设计你的 web 应用并不意味着你的应用应该在用户离线时提供完全相同的用户体验。*

*这意味着您的用户越来越多地使用移动设备，移动设备的连接速度缓慢且时断时续。本地应用程序将启动并显示一个默认屏幕，其中包含一些(陈旧的)内容，一旦连接恢复，这些内容将立即更新。*

*大多数网络应用会让用户长时间看着白屏，或者干脆失败。这是用户更喜欢原生应用而不是 web 应用的两个最重要的原因之一:web 应用的用户体验根本不够好。*

*原生应用的优势在于，在你使用它们之前，它们不需要下载它们的 UI 或脚本。一切都已经安装好了，他们唯一需要的就是数据。*

*Web 应用程序现在可以通过使用服务人员来完成同样的事情。当用户第一次访问您的网站时，服务人员会确保所有资源(如 HTML、CSS、JavaScript 和图像)都已下载并存储在用户的设备上。因此，在随后的访问中，启动它所需的一切都已经存在。除非发生了变化，否则没有理由在每次访问时再次下载这些资产。*

*这样，即使用户离线或连接不良，您的 web 应用程序也可以提供最佳的用户体验。*

# *我们没有充分利用网络功能*

*我在网上搜索了很多次，想找到附近某个商店的开门时间或者它最近的位置。大多数时候，我必须输入我的位置或邮政编码，这样网站才能确定我当前的位置。*

*能通过 GPS 确定我准确位置的[地理定位 API](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API) 从 IE9(！)，但还是被网站少用。这些网站也可以使用现代智能手机的摄像头、麦克风和所有传感器，但他们很少利用这些。*

*另一方面，本地应用确实利用了这些功能，似乎人们甚至开发者都认为网站不能做到这一点。*

# *我们如何拯救移动网络*

*对于许多网站来说，现在大部分流量来自移动设备，然而人们花在移动设备上的时间只有 10%花在移动网络上。*

*本地应用显然是赢家，在线零售商通过本地应用赚了最多的钱。本地应用的下载量也在稳步上升，但这也有一个重要的负面影响。*

*虽然每年都有更多的应用程序被下载，[大多数人每月下载的新应用程序为零](https://www.vox.com/2016/9/16/12933780/average-app-downloads-per-month-comscore)。只有少数应用程序赚了大部分的钱，而[大多数应用程序没有被下载](https://techcrunch.com/2019/11/21/the-top-1-of-app-store-publishers-drive-80-of-new-downloads/)，根本没有赚到钱。*

*对于网络应用来说，这是一个巨大的机会。*

*Web 应用程序可以提供与本地应用程序几乎相同的用户体验，只使用 web 技术，而成本只是本地应用程序的一小部分。任何移动网站都可以变成渐进式 Web 应用程序，这意味着它可以像原生应用程序一样工作，包括离线工作和安装在主屏幕上。*

*只有一个代码库，你就能提供一个移动网站和一个应用程序，可以安装在你的移动设备的主屏幕上*和桌面上的*。*

*而且不止于此。*

*这些渐进式网络应用程序可以通过访问网站来安装。这里不涉及应用商店或谷歌 Play 商店，你的应用可以通过谷歌简单地被发现。共享您的应用程序就像向某人发送 URL 一样简单。*

*安装的应用程序将只占普通原生应用程序的一小部分，并且会自动更新。每当有新版本的应用程序，它将被部署到网络服务器，所有安装的应用程序将在下次访问时更新。*

*我们今天可以做这件事。*

*但现在，人们愿意经历必须安装原生应用程序和放弃宝贵存储空间的不便，只是因为移动网络没有给他们想要的用户体验。*

*网络的未来是移动的，我们需要确保为我们的用户提供尽可能最好的用户体验。*

# *一个更好的移动网络从美国开发者开始*

*我们开发人员通常有一些花哨、功能强大的设备来测试我们构建的东西。我们需要意识到这并不能反映现实，因为大多数用户不会在这样的设备上使用我们的应用。*

*大多数人甚至买不起最新的 MacBook 或 iPhone。我们需要确保我们的应用程序即使在大多数人使用的普通设备上也能提供最佳的用户体验。*

*在真实的网络条件下，在真实的设备上测试您的应用。如果你没有物理设备，你可以使用[webpagetest.org](https://webpagetest.org/easy)来查看你的应用在一系列设备上的表现。*

*在 Chrome 开发工具的响应视图中查看你的网站是不够的。一个只根据浏览设备调整布局的网站是不够的*。**

**我们需要真正调整我们的应用程序，以便我们的用户在所有设备上和任何情况下都能获得最佳的用户体验。您可以使用[网络信息 API](https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API) 获取用户网络环境的信息，并根据需要调整您的应用程序。**

**通过缓存不需要在每次访问时下载的静态资产，确保您的应用程序在离线和糟糕的网络上工作。你可以通过添加一个[服务人员](https://developers.google.com/web/fundamentals/primers/service-workers)到你的网站[来做到这一点，所有现代浏览器都支持](https://caniuse.com/#search=service%20worker)。**

**网络已经在桌面上取得了胜利，现在，是时候接管移动领域了。**