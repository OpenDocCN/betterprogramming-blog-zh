<html>
<head>
<title>Use TypeScript to Reduce Your Unit Tests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript来减少单元测试</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/use-typescript-to-reduce-your-unit-tests-834897e16d7b?source=collection_archive---------15-----------------------#2022-04-25">https://betterprogramming.pub/use-typescript-to-reduce-your-unit-tests-834897e16d7b?source=collection_archive---------15-----------------------#2022-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c8e3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过减少测试时间来加快开发时间</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/002cb586fc5462d61a38803c21e69b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S0DBgj644Wtr_1RR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lucian_alexe?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢西恩·阿利克夏</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="9d7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从那些没有采用TypeScript的人那里听到的最常见的论点之一是“如果事情在JavaScript中工作，为什么我要用TypeScript编写它？”。当他们看到他们必须编写的额外代码时，他们的兴趣水平进一步下降。</p><p id="44b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我将向您展示一个小例子，说明TypeScript如何在保持项目质量的同时帮助减少测试用例的数量。</p><p id="94c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有一个<code class="fe lv lw lx ly b">util</code>函数，它接受字符串或数字，但不接受数组:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="0bd4" class="md me it ly b gy mf mg l mh mi">const util = (val) =&gt; {<br/>    if (Array.isArray(val)) {<br/>        throw new Error("Array is not accept.");<br/>    }<br/>    return val<br/>}</span></pre><p id="0dc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将编写的最小测试是:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8918" class="md me it ly b gy mf mg l mh mi">describe("util", () =&gt; {<br/>    it("Should return a string", () =&gt; {<br/>        expect(util("abc")).toBeTypeof("string");<br/>    });<br/>    it("Should return a number", () =&gt; {<br/>        expect(util(123)).toBeTypeof("number");<br/>    });<br/>    it("Should error", () =&gt; {<br/>        expect(() =&gt; util([])).toThrow();<br/>    });<br/>});</span></pre><p id="2a29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们在TypeScript中这样做:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="6f4c" class="md me it ly b gy mf mg l mh mi">const util = &lt;T&gt;(val: T extends any[] ? "array is not accepted" : T) =&gt; {<br/>    return val;<br/>}</span><span id="7552" class="md me it ly b gy mj mg l mh mi">util('hello');<br/>util(123)<br/>util([1,2,3]) //error<br/>util([]) //error</span></pre><p id="2d92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面先睹为快<a class="ae ky" href="https://www.typescriptlang.org/play?jsx=0&amp;ts=4.5.5#code/MYewdgzgLgBArlAlgGxgXhgHgCoD4AUAbgIbIBcM2MApgB5TVgAmEMxYAngNoC6MA-DABExAE6jiHGIlZgQsYsGDUADgyZCYFbAEp0uGAG8AUDDMxR1KHFFgYJZAG5jAX2PGEKfAHIAFtWRkEG8dZ09kfABGACYAZh0PJAiuSIAaaNTYnj0AehzqcRBRRK9eXPzC0SA" rel="noopener ugc nofollow" target="_blank">演示</a>。它将在运行时检查期间抛出错误，您可以安全地删除您的测试！</p><p id="6969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下复合优势:</p><ol class=""><li id="e35d" class="mk ml it lb b lc ld lf lg li mm lm mn lq mo lu mp mq mr ms bi translated">您将获得错误的即时反馈。</li><li id="a290" class="mk ml it lb b lc mt lf mu li mv lm mw lq mx lu mp mq mr ms bi translated">您将编写更少的测试用例，因此维护这些测试需要更少的时间。</li><li id="6a93" class="mk ml it lb b lc mt lf mu li mv lm mw lq mx lu mp mq mr ms bi translated">在推送代码之前，您节省了在本地运行较少测试的时间。</li><li id="97b9" class="mk ml it lb b lc mt lf mu li mv lm mw lq mx lu mp mq mr ms bi translated">ci管道中的测试更少，这意味着构建时间更快。</li></ol><p id="ce6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，乘以你团队中开发人员的数量。</p><p id="8844" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">TypeScript不错！</p></div></div>    
</body>
</html>