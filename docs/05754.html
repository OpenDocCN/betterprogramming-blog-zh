<html>
<head>
<title>How to Deal With NULL Values in SQL the Right Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何正确处理SQL中的空值</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-deal-with-null-values-in-sql-the-right-way-69861f2debbf?source=collection_archive---------0-----------------------#2020-08-04">https://betterprogramming.pub/how-to-deal-with-null-values-in-sql-the-right-way-69861f2debbf?source=collection_archive---------0-----------------------#2020-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc46" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在T-SQL中处理空值的提示和技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ec87b5b672470aeb259004c12b802786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O9Uy6_GRlwt0wpZa"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰里米·珀金斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="439f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">前言</h1><p id="48f5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一个最近刚开始学SQL的朋友问我关于空值的问题，以及如何处理。如果您是SQL新手，本指南将让您深入了解一个令初学者感到困惑的主题。</p><h1 id="3dfe" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是NULL？</h1><p id="c7de" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">NULL在SQL中用于表示数据库中不存在某个值。<br/>不要与空字符串或零值混淆。</p><p id="66fe" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">NULL表示没有值，空字符串和零都表示实际值。打个比方，就像没有答案不一定代表答案是“没有”，没有值也不代表是零。</p><p id="2ab0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">误解NULL在SQL中的工作方式可能会导致意外的错误和输出，所以不再多说，让我们看看如何解决它。</p><p id="243a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本练习中，我们将使用<code class="fe ms mt mu mv b">tblSouthPark</code>表。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="b10a" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT</strong> *<br/><strong class="mv iu">FROM</strong> tblSouthPark</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="6ef1" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">1.IS NULL和IS NOT NULL运算符</h1><p id="6cd9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们不能使用比较运算符<code class="fe ms mt mu mv b">=,&lt;,&gt;,&lt;&gt;</code>来测试空值。相反，我们必须使用<code class="fe ms mt mu mv b">IS NULL</code>和不为空的<strong class="lt iu"> </strong> <a class="ae ky" href="https://docs.microsoft.com/en-us/sql/t-sql/queries/predicates?view=sql-server-ver15" rel="noopener ugc nofollow" target="_blank">谓词</a>。</p><ul class=""><li id="d456" class="nt nu it lt b lu mn lx mo ma nv me nw mi nx mm ny nz oa ob bi translated"><code class="fe ms mt mu mv b">IS NULL</code> <strong class="lt iu"> : </strong>返回包含空值的行</li></ul><blockquote class="oc od oe"><p id="5897" class="lr ls of lt b lu mn ju lw lx mo jx lz og mp mc md oh mq mg mh oi mr mk ml mm im bi translated"><strong class="lt iu">语法:</strong>表达式为空</p></blockquote><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="7c33" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT <br/>    </strong>ID, <br/>    Student,<br/>    Email1,<br/>    Email2<br/><strong class="mv iu">FROM </strong>tblSouthPark<br/><strong class="mv iu">WHERE</strong> Email1 <strong class="mv iu">IS NULL </strong>AND<strong class="mv iu"> </strong>Email2<strong class="mv iu"> IS NULL<br/>ORDER BY</strong> ID</span></pre><p id="309d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面的查询产生了Email1和Email2列都为空的所有记录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><ul class=""><li id="4280" class="nt nu it lt b lu mn lx mo ma nv me nw mi nx mm ny nz oa ob bi translated"><strong class="lt iu"> IS NOT NULL: </strong>顾名思义，它是IS NULL的逆。</li></ul><blockquote class="oc od oe"><p id="2413" class="lr ls of lt b lu mn ju lw lx mo jx lz og mp mc md oh mq mg mh oi mr mk ml mm im bi translated"><strong class="lt iu">语法:</strong>表达式不为空</p></blockquote><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="92a3" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT <br/>    </strong>ID, <br/>    Student,<br/>    Email1,<br/>    Email2<br/><strong class="mv iu">FROM </strong>tblSouthPark<strong class="mv iu"><br/>WHERE</strong> Email1 <strong class="mv iu">IS NOT NULL </strong>AND<strong class="mv iu"> </strong>Email2<strong class="mv iu"> IS NOT NULL<br/>ORDER BY</strong> ID</span></pre><p id="3fb1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面的查询产生了Email1和Email2列都不为空的所有记录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="9e14" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">2.ISNULL()函数</h1><p id="35cb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果给定的表达式为空，函数<code class="fe ms mt mu mv b">ISNULL</code>返回指定的值。否则，如果表达式不为空，则返回表达式本身。</p><p id="1a5a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">语法:</strong> ISNULL(表达式，值)</p><p id="e7ba" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们通过在我们的<code class="fe ms mt mu mv b">SouthPark</code>表上运行一个简单的查询来理解这一点。</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="e9b7" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT <br/>    </strong>ID, <br/>    Student,<br/>    <strong class="mv iu">ISNULL</strong>(Father,'Missing') <strong class="mv iu">AS</strong> Father<br/><strong class="mv iu">FROM</strong> tblSouthPark<br/><strong class="mv iu">ORDER BY</strong> ID</span></pre><p id="6d12" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该查询产生以下结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="2ff9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于Eric Cartman示例中的表达式计算结果为NULL，因此<code class="fe ms mt mu mv b">ISNULL</code>函数返回值<code class="fe ms mt mu mv b">Missing</code>。对于其他学生，表达式不为空，所以它返回表达式本身。</p><h1 id="ca3b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">3.COALESCE()函数</h1><p id="1518" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe ms mt mu mv b">COALESCE</code>函数返回给定列表中的第一个非空值。与<code class="fe ms mt mu mv b">ISNULL</code>函数不同，它可以接受多个表达式。</p><p id="b00c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">语法: COALESCE(表达式[1…..n])</p><p id="ddf5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，<code class="fe ms mt mu mv b"><strong class="lt iu">SELECT</strong> <strong class="lt iu">COALESCE</strong>(NULL, NULL, 'red', 'blue', NULL)</code>返回<code class="fe ms mt mu mv b">red</code>，因为它是第一个非空值。如果所有的值都是NULL，那么<code class="fe ms mt mu mv b">COALESCE</code>函数将返回NULL。</p><p id="7d5c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们使用<code class="fe ms mt mu mv b">SouthPark</code>表上的<code class="fe ms mt mu mv b">COALESCE</code>功能:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="22d6" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT <br/>    </strong>ID, <br/>    Student,<br/>    <strong class="mv iu">COALESCE</strong>(Email1, Email2, 'N/A') <strong class="mv iu">AS</strong> Primary_Email<br/><strong class="mv iu">FROM</strong> tblSouthPark<br/><strong class="mv iu">ORDER BY</strong> ID</span></pre><p id="f1fa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上述查询产生以下结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="46de" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">正如所料，由于在Kenny的例子中Email1和Email2都是null，所以<code class="fe ms mt mu mv b">COALESCE</code>函数返回<code class="fe ms mt mu mv b">N/A</code>作为<code class="fe ms mt mu mv b">Primary_Email</code>。对于Stan，Email2作为<code class="fe ms mt mu mv b">Primary_Email</code>返回，因为它是<code class="fe ms mt mu mv b">COALESCE</code>函数中的第一个非空值。对于其他人，Email1作为<code class="fe ms mt mu mv b">Primary_Email</code>返回。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="1468" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">4.格表达式</h1><p id="3e6b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们也可以使用传统的<code class="fe ms mt mu mv b">CASE</code>表达式来替换空值。</p><p id="a7ca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以下是<code class="fe ms mt mu mv b">CASE</code>表达式的一般语法:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="435b" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">CASE</strong><br/>    <strong class="mv iu">WHEN</strong> expression_1 <strong class="mv iu">THEN</strong> result_1<br/>    <strong class="mv iu">WHEN</strong> expression_2 <strong class="mv iu">THEN</strong> result_2<br/>    .<br/>    .<br/>    .<br/>    <strong class="mv iu">WHEN</strong> expression_n <strong class="mv iu">THEN</strong> result_n<br/>    <strong class="mv iu">ELSE</strong> else_expression<br/><strong class="mv iu">END</strong></span></pre><p id="003a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以通过使用<code class="fe ms mt mu mv b">CASE</code>生成与使用上面的<code class="fe ms mt mu mv b">COALESCE</code>相同的输出。</p><p id="4e6c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该查询将如下所示:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="d58e" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT <br/>      </strong>ID,<br/>      Student,<strong class="mv iu"><br/>      CASE</strong><br/>          <strong class="mv iu">WHEN</strong> Email1 IS NOT NULL <strong class="mv iu">THEN</strong> Email1<br/>          <strong class="mv iu">WHEN</strong> Email2 IS NOT NULL <strong class="mv iu">THEN</strong> Email2<br/>          <strong class="mv iu">ELSE</strong> 'N/A'<br/>      <strong class="mv iu">END AS </strong>Primary_Email<br/><strong class="mv iu">FROM</strong> tblSouthPark<br/><strong class="mv iu">ORDER BY</strong> ID</span></pre><p id="f768" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该查询产生相同的输出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d139" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="of">注意:</em> <code class="fe ms mt mu mv b"><em class="of">CASE</em></code> <em class="of">表达式在语法上类似于</em> <code class="fe ms mt mu mv b"><em class="of">COALESCE</em></code> <em class="of">函数。其实</em> <code class="fe ms mt mu mv b"><em class="of">COALESCE</em></code> <em class="of">就像是</em> <code class="fe ms mt mu mv b"><em class="of">CASE</em></code> <em class="of">的简称。前者简短明了，但后者更清晰易懂。</em></p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="3fbd" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">5.NULLIF()函数</h1><p id="68db" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><code class="fe ms mt mu mv b">NULLIF</code>函数接受两个表达式，如果表达式相等，则返回NULL，否则返回第一个表达式。</p><p id="f37d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">语法:</strong> NULLIF(表达式1，表达式2)</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="fb4a" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">NULLIF</strong>('Red','Orange') -- Returns Red<br/><strong class="mv iu">NULLIF</strong>(0,NULL) -- Returns 0<br/><strong class="mv iu">NULLIF</strong>(0,0) -- Returns NULL</span></pre><p id="deb5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果数据在一列中包含null和空字符串，那么<code class="fe ms mt mu mv b">NULLIF</code>就派上了用场。我们用一个例子来理解这个。</p><p id="3df0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们看到表中的<code class="fe ms mt mu mv b">Phone</code>列包含NULL和空字符串。</p><p id="c80d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可以通过使用<code class="fe ms mt mu mv b">NULLIF</code>将空字符串改为NULL来对此进行标准化:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="4ffd" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">SELECT <br/>    </strong>ID, <br/>    Student,<br/>    <strong class="mv iu">NULLIF</strong>(Phone,'') <strong class="mv iu">AS </strong>Phone<br/><strong class="mv iu">FROM</strong> tblSouthPark<br/><strong class="mv iu">ORDER BY</strong> ID</span></pre><p id="2e5b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面的查询产生:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="ddb4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe ms mt mu mv b">NULLIF</code>的另一个好的用例是防止“被零除”的错误:</p><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="655b" class="na la it mv b gy nb nc l nd ne">var1 = 1<br/>var2 = 0</span><span id="a5dd" class="na la it mv b gy oj nc l nd ne">var1/var2 --This will generate a "division by zero" error</span><span id="c2f9" class="na la it mv b gy oj nc l nd ne">var1/<strong class="mv iu">NULLIF</strong>(var2,0)--This doesn't trigger a "division by zero" error</span></pre><p id="f928" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在第二种情况下，我们没有得到“被零除”的错误，因为在分母中返回NULL来代替0。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="267b" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">额外提示</h1><ul class=""><li id="ba9c" class="nt nu it lt b lu lv lx ly ma ok me ol mi om mm ny nz oa ob bi translated"><code class="fe ms mt mu mv b">COALESCE</code>功能是标准ANSI，而<code class="fe ms mt mu mv b">ISNULL</code>和<code class="fe ms mt mu mv b">NULLIF</code>不是。这使得<code class="fe ms mt mu mv b">COALESCE</code>比<code class="fe ms mt mu mv b">ISNULL</code>和<code class="fe ms mt mu mv b">NULLIF</code>更加通用和可移植(跨不同的SQL风格和RDBMS)。</li><li id="d4a1" class="nt nu it lt b lu on lx oo ma op me oq mi or mm ny nz oa ob bi translated">NULL是排序顺序中的最小值。如果我们按包含空值的列排序，那么缺省情况下，包含空值的行将在顶部排序。使用<code class="fe ms mt mu mv b">DESC</code>排序顺序反向排序。</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="5d40" class="na la it mv b gy nb nc l nd ne"><strong class="mv iu">Tip:</strong> To sort in alphabetical order (ASC) with NULL values at the end, you can use a CASE expression in the ORDER BY clause:</span><span id="2fc8" class="na la it mv b gy oj nc l nd ne"><strong class="mv iu">ORDER BY<br/>CASE</strong> <strong class="mv iu">WHEN</strong> column_name <strong class="mv iu">IS NULL</strong> <strong class="mv iu">THEN</strong> 1 <strong class="mv iu">ELSE</strong> 0 <strong class="mv iu">END,<br/></strong>column_name;</span></pre><ul class=""><li id="088c" class="nt nu it lt b lu mn lx mo ma nv me nw mi nx mm ny nz oa ob bi translated">SQL中的聚合函数(<code class="fe ms mt mu mv b">SUM</code>、<code class="fe ms mt mu mv b">COUNT</code>、<code class="fe ms mt mu mv b">AVG</code>、<code class="fe ms mt mu mv b">MAX</code>、<code class="fe ms mt mu mv b">MIN</code>)不处理空值，并在执行任何计算之前消除它们。唯一的例外是<code class="fe ms mt mu mv b">COUNT(*)</code>函数——它返回所有行的计数，包括所有字段都为空的那些行。</li><li id="14d5" class="nt nu it lt b lu on lx oo ma op me oq mi or mm ny nz oa ob bi translated">在<code class="fe ms mt mu mv b">GROUP BY</code>子句的情况下，如果一列包含具有空值的行，那么这些行将被分组到一个组中。</li><li id="7d2b" class="nt nu it lt b lu on lx oo ma op me oq mi or mm ny nz oa ob bi translated">如果一个列同时包含NULL和空字符串，并且您需要创建一个合并列，那么您可以将<code class="fe ms mt mu mv b">COALESCE</code>和<code class="fe ms mt mu mv b">NULLIF</code>函数链接起来。例如:</li></ul><pre class="kj kk kl km gt mw mv mx my aw mz bi"><span id="9410" class="na la it mv b gy nb nc l nd ne">INPUT TABLE: Sample<br/>+==============+==============+<br/>|     Work     |     Cell     |<br/>+==============+==============+<br/>|              | 717-735-6382 |<br/>+--------------+--------------+<br/>| 546-373-9363 | 493-353-3638 |<br/>+--------------+--------------+<br/>| NULL         | 657-428-3639 |<br/>+--------------+--------------+</span><span id="0d74" class="na la it mv b gy oj nc l nd ne">QUERY<br/><strong class="mv iu">SELECT</strong> <strong class="mv iu">COALESCE</strong>(<strong class="mv iu">NULLIF</strong>(Work,''),Cell) <strong class="mv iu">AS</strong> Primary <strong class="mv iu">FROM</strong> Sample</span><span id="6a17" class="na la it mv b gy oj nc l nd ne">OUTPUT<br/>+==============+<br/>|   Primary    |<br/>+==============+<br/>| 717-735-6382 |<br/>+--------------+<br/>| 546-373-9363 |<br/>+--------------+<br/>| 657-428-3639 | <br/>+--------------+</span><span id="425f" class="na la it mv b gy oj nc l nd ne">We can also use a quick-and-dirty <strong class="mv iu">CASE</strong> expression to do the same:</span><span id="42ea" class="na la it mv b gy oj nc l nd ne"><strong class="mv iu">CASE</strong> <strong class="mv iu">WHEN</strong> Work &lt;&gt; '' <strong class="mv iu">THEN</strong> Work <strong class="mv iu">ELSE</strong> Cell <strong class="mv iu">END</strong></span></pre></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="da52" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">包扎</h1><p id="20c3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，您应该已经拥有了成功处理SQL中的空值所需的一切。当然，我们并没有在这里涵盖所有的边缘情况，但是对于初学者来说，这应该是一个很好的起点。如果你卡住了，<a class="ae ky" href="https://stackoverflow.com/questions/tagged/sql" rel="noopener ugc nofollow" target="_blank">栈溢出</a>就是你的朋友。一如既往，实践是关键！</p></div></div>    
</body>
</html>