<html>
<head>
<title>Run Serverless Deno With Vercel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vercel运行无服务器Deno</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/run-serverless-deno-with-vercel-6456e588f62f?source=collection_archive---------13-----------------------#2020-06-24">https://betterprogramming.pub/run-serverless-deno-with-vercel-6456e588f62f?source=collection_archive---------13-----------------------#2020-06-24</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="6f95" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">通过自动SSL轻松部署</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/b7129d356135adb24d52da1ca762ecad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dLuBaKCrFrCYhCfz"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@danielkcheung?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张家瑜</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="6429" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://deno.land" rel="noopener ugc nofollow" target="_blank"> Deno </a>是一个简单、现代、安全的JavaScript和类型脚本运行时，它使用<a class="ae kz" href="https://v8.dev/" rel="noopener ugc nofollow" target="_blank"> V8 </a>并内置于<a class="ae kz" href="https://www.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> Rust </a>中。1.0版本是<a class="ae kz" href="https://deno.land/v1" rel="noopener ugc nofollow" target="_blank">最近推出的</a>。</p><p id="228b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Vercel 是一家无服务器功能和静态网站的托管提供商。它支持带有自动SSL和DNS管理的零配置部署。它很容易使用，并且有一个慷慨的免费层。</p><p id="211a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Vercel新的<code class="fe lw lx ly lz b"><a class="ae kz" href="https://github.com/TooTallNate/vercel-deno" rel="noopener ugc nofollow" target="_blank">vercel-deno</a></code>运行时使得部署使用Deno实现的无服务器功能变得非常容易。让我告诉你怎么做。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><ul class=""><li id="e14b" class="mh mi iu lc b ld le lg lh lj mj ln mk lr ml lv mm mn mo mp bi translated"><a class="ae kz" href="https://deno.land/#installation" rel="noopener ugc nofollow" target="_blank">安装Deno </a>。</li><li id="a260" class="mh mi iu lc b ld mq lg mr lj ms ln mt lr mu lv mm mn mo mp bi translated"><a class="ae kz" href="https://vercel.com/download" rel="noopener ugc nofollow" target="_blank">安装Vercel </a>和<a class="ae kz" href="https://vercel.com/signup" rel="noopener ugc nofollow" target="_blank">报名</a>。</li><li id="b52f" class="mh mi iu lc b ld mq lg mr lj ms ln mt lr mu lv mm mn mo mp bi translated">运行<code class="fe lw lx ly lz b">vercel login</code>并遵循屏幕上的指示。</li><li id="8bf7" class="mh mi iu lc b ld mq lg mr lj ms ln mt lr mu lv mm mn mo mp bi translated">为您的项目创建一个新目录，并使其成为您终端的当前目录。</li><li id="c5de" class="mh mi iu lc b ld mq lg mr lj ms ln mt lr mu lv mm mn mo mp bi translated">创造<code class="fe lw lx ly lz b">api/hello.ts</code>:</li></ul><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mv mw l"/></div></figure><p id="dad6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该无服务器功能可从部署的<code class="fe lw lx ly lz b">/api/hello</code>路线访问。该函数用包含友好消息和Deno版本号的明文正文来回复所有请求。</p><ul class=""><li id="2b9a" class="mh mi iu lc b ld le lg lh lj mj ln mk lr ml lv mm mn mo mp bi translated">创造<code class="fe lw lx ly lz b">public/index.html</code>:</li></ul><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mv mw l"/></div></figure><p id="2702" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">该页面可从部署的<code class="fe lw lx ly lz b">/</code>路线访问。该页面包含一个简单的脚本，它在页面加载时获取<code class="fe lw lx ly lz b">/api/hello</code>路由，然后将<code class="fe lw lx ly lz b">&lt;span&gt;</code>元素的内容设置为响应。</p><p id="c795" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">注意</strong>:此文件用于演示目的。虽然您不会在自己的项目中使用这个特殊的<code class="fe lw lx ly lz b">index.html</code>文件，但是在部署到Vercel之前，您确实需要在<code class="fe lw lx ly lz b">public</code>目录中包含一些内容，否则将会提供项目的根目录。</p><ul class=""><li id="7207" class="mh mi iu lc b ld le lg lh lj mj ln mk lr ml lv mm mn mo mp bi translated">创造<code class="fe lw lx ly lz b">vercel.json</code>:</li></ul><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mv mw l"/></div></figure><p id="2dd7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个文件配置Vercel使用<code class="fe lw lx ly lz b">vercel-deno</code>运行时来构建它在<code class="fe lw lx ly lz b">api</code>目录中找到的所有JavaScript和TypeScript文件。</p><p id="bc52" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">注</strong>:在发布时<code class="fe lw lx ly lz b">vercel-deno</code>的版本为0.3.0。您可能想要查看运行时的<a class="ae kz" href="https://github.com/TooTallNate/vercel-deno/releases" rel="noopener ugc nofollow" target="_blank">最新发布版本</a>是什么，并使用它来代替。</p><ul class=""><li id="e155" class="mh mi iu lc b ld le lg lh lj mj ln mk lr ml lv mm mn mo mp bi translated">创建<code class="fe lw lx ly lz b">.vercelignore</code>:</li></ul><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mv mw l"/></div></figure><p id="2478" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个文件将Vercel配置为只部署<code class="fe lw lx ly lz b">api</code>和<code class="fe lw lx ly lz b">public</code>目录以及<code class="fe lw lx ly lz b">vercel.json</code>文件的内容。其他文件不会上传到Vercel。</p><ul class=""><li id="9799" class="mh mi iu lc b ld le lg lh lj mj ln mk lr ml lv mm mn mo mp bi translated">通过运行<code class="fe lw lx ly lz b">vercel dev</code>在本地测试项目。</li></ul><p id="094f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">访问屏幕上打印的URL以验证一切正常。无服务器函数将在第一次访问其端点时按需编译。键入“Control-C”退出。</p><ul class=""><li id="1283" class="mh mi iu lc b ld le lg lh lj mj ln mk lr ml lv mm mn mo mp bi translated">通过运行<code class="fe lw lx ly lz b">vercel deploy</code>并接受所有缺省值来部署项目。</li><li id="79c6" class="mh mi iu lc b ld mq lg mr lj ms ln mt lr mu lv mm mn mo mp bi translated">访问屏幕上显示的检查URL，查看部署进度。</li><li id="d077" class="mh mi iu lc b ld mq lg mr lj ms ln mt lr mu lv mm mn mo mp bi translated">访问屏幕上打印的生产URL以查看部署的站点。</li></ul><p id="28e2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">就是这样！您的无服务器Deno功能已部署到生产中。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="4722" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您可以在这里看到这个项目的<a class="ae kz" href="https://volatile-rain.vercel.app/" rel="noopener ugc nofollow" target="_blank">示例。这里可以看到</a><a class="ae kz" href="https://vercel.com/bacongravy/volatile-rain/14zigqw2a/source" rel="noopener ugc nofollow" target="_blank">源代码</a>。(请注意，我有意公开了这个部署；请放心，默认情况下，Vercel不会公开您项目的日志和源代码。)</p></div></div>    
</body>
</html>