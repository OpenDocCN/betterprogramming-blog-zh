<html>
<head>
<title>Create Interactive Story-telling Technical Diagrams With Draw.io</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Draw.io创建交互式讲述故事的技术图表</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/creating-story-telling-interactive-diagrams-with-draw-io-f7e57ae32621?source=collection_archive---------3-----------------------#2021-12-13">https://betterprogramming.pub/creating-story-telling-interactive-diagrams-with-draw-io-f7e57ae32621?source=collection_archive---------3-----------------------#2021-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d05a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">写更多吸引人的技术文章</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f513771c06bda24c40f54f68d70fbf88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LNjaSajK1Rt4BXYg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">约翰·施诺布里奇在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8156" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">故事和图片是简单而强大的工具，可以帮助人类大脑更全面地吸收新知识，并记忆更久。在技术写作的上下文中，利用这两种工具来创建深刻的解释性图表，以传达软件架构和业务逻辑的复杂技术方面，不是很好吗？</p><p id="0764" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最受欢迎的图形工具之一——<a class="ae kv" href="https://drawio-app.com/" rel="noopener ugc nofollow" target="_blank">draw . io</a>——提供了创建交互式图表的功能，允许你讲述关于软件架构的故事，而不会用过多的信息使它们超载。</p><h1 id="03a5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">从文章中可以期待什么？</h1><p id="58c5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在本文中，我们将考虑一个假设的处理用户简档的微服务— <em class="mp">简档服务</em>。</p><p id="c6df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在服务实现的所有场景(故事)中，我们将涵盖三个基本场景，即:</p><ol class=""><li id="7de0" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">当用户在网站上创建简档时，将简档保存到数据库；</li><li id="5b51" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">在搜索和分析引擎中索引简档；</li><li id="fc27" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">按特定标准搜索个人资料(使用上述搜索和分析引擎)。</li></ol><p id="106d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管前缀为“-micro”，但该服务包含几个模块，这些模块的交互使其性能得以实现。这些组成部分是:</p><ul class=""><li id="63e0" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated">配置文件服务API(以下简称<em class="mp"> API </em>)</li><li id="03bc" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">配置文件服务索引器(以下简称<em class="mp">索引器</em></li><li id="4237" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">简介服务接待员(以下简称<em class="mp">接待员</em></li></ul><p id="2db2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于该服务，我们将创建一个交互式模式，在其业务目的(其实现的场景)的上下文中解释其架构(其组件之间的关系)。为此，我们将使用<a class="ae kv" href="https://drawio-app.com/" rel="noopener ugc nofollow" target="_blank"> draw.io </a>及其<a class="ae kv" href="https://drawio-app.com/draw-io-training-exercise-7-create-a-diagram-with-layers-and-images/" rel="noopener ugc nofollow" target="_blank">分层功能</a>。</p><p id="3e50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，如果这听起来像是你想参与的事情，让我们开始吧。</p><h1 id="7676" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置背景</h1><p id="2b93" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">交互式图表是一个分层的图表——在同一个图表上，有几个视图(层),每个视图将逻辑上相关的组件分组。</p><p id="5a9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">背景层是核心层，应该描绘那些将成为其他层一部分的元素。无论其他图层是否打开，背景图层都会一直显示。</p><p id="f041" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">配置文件服务方案的背景图层将表示服务的内部组织。它将只包含配置文件服务的组件(模块),它们之间没有任何关系:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/7cb5cbe91793566a23f9a45b8b4958ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EkDLeqPbzoLEjN6FApelTA.png"/></div></div></figure><p id="8e3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管该服务与其他软件交互——用户创建个人资料的网站、搜索和分析引擎、数据库等。—我们故意不在背景层显示它们。它们将出现在相应的场景层中，因为它们是逻辑的一部分，而不是Profile Service的内部组织。</p><p id="a0ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模式的控制面板也应该放在背景层上。控制面板由显示和隐藏场景的按钮组成。按钮中的彩色箭头有助于区分方案中的故事。此外，您可以添加一个区域来显示场景描述:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/e4ae72bed1a3119373a3bff3f14c9523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CUFUxOM71AAxLD3L0lLJLQ.png"/></div></div></figure><p id="782d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在此阶段，图表如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/14d1bdfdc16b1fea4ab89087a8a91775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0WGK9VFlIXOVKM5r7Na1w.png"/></div></div></figure><h2 id="52aa" class="ni lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated"><strong class="ak">重要提示</strong></h2><ul class=""><li id="f5f8" class="mq mr iq ky b kz mk lc ml lf nu lj nv ln nw lr ne mw mx my bi translated">配置文件服务的组件现在显示为灰色。通过这种方式，我们强调他们现在是不活跃的。稍后，当它们出现在特定的场景中时，我们会适当地改变它们的颜色。</li><li id="9bf7" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">描述区将包含场景的算法，这样当读者打开其中一个时，他们可以立即阅读相应的故事。但是，有一个限制—该区域中只能显示一个场景。我们将在<em class="mp">添加交互性</em>一节中回到这个限制。</li></ul></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="7ab6" class="ls lt iq bd lu lv oe lx ly lz of mb mc jw og jx me jz oh ka mg kc oi kd mi mj bi translated">场景1。将配置文件保存到数据库</h1><p id="b5d5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了创建<em class="mp">将概要文件保存到数据库</em>的层，我们需要从技术角度理解场景中发生了什么。</p><h2 id="261c" class="ni lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated"><strong class="ak">工作原理</strong></h2><p id="63c1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">用户在网站上提交个人资料后:</p><ol class=""><li id="66f0" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">网站向相应的<a class="ae kv" href="https://www.cloudamqp.com/blog/what-is-message-queuing.html#:~:text=A%20message%20queue%20is%20a,are%20waiting%20to%20be%20processed.&amp;text=Another%20application%2C%20called%20a%20consumer,until%20the%20consumer%20retrieves%20them." rel="noopener ugc nofollow" target="_blank">消息队列</a>发送带有该简档的消息。消息队列存储概要文件的数据，直到负责的软件(消费者)有足够的资源来处理它。</li><li id="b828" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><em class="mp">接待员</em> —配置文件存储端队列的消费者—“监听”消息队列。当它有足够的容量时，它从队列中取出带有配置文件的消息。</li><li id="6909" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">然后，接待员根据一组特定的规则验证该配置文件，并将该配置文件保存到数据库中。</li><li id="8fca" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">接待员还将带有配置文件ID的消息发送到另一个消息队列，该队列存储要索引的配置文件的ID。</li></ol><p id="cb45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在图中，我们将在名为'<em class="mp"> S1的单独层上描述这个逻辑。将</em> <em class="mp">配置文件保存到数据库</em>。因此，在添加任何新元素之前，我们</p><ol class=""><li id="800f" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">在<em class="mp">图层</em>面板中添加相应名称的新图层；</li><li id="090a" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">锁定背景层(通过点击锁定标志，使其变成深灰色)，这样新元素就不会出现在它们不属于的地方；</li><li id="b0e3" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">通过单击将焦点切换到新创建的级别:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/b3a67f99af142c957b3699695c5a6138.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*_Jkzq6beDBPznvoBoEvzaw.png"/></div></figure><p id="a493" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看要添加到该层的组件:</p><ul class=""><li id="86fa" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated">新元素—网站、数据库、两个消息队列</li><li id="a6e6" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">涉及的个人资料服务模块—接待员</li></ul><p id="c0a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们准备描绘“它是如何工作的”一节中描述的流程:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/b34cc1bcc0137b12b1bd885e302229e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rH8TfeyisPvoEXkjd0whSQ.png"/></div></div></figure><p id="e02b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">重要提示</strong></p><ul class=""><li id="dd1f" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated">不属于配置文件存储但与逻辑相关的元素为深灰色。</li><li id="d978" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">在这种情况下，接待员是配置文件存储的唯一活动模块；因此我们把它的颜色从灰色改成了蓝色。</li><li id="43f8" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">在描述区，我们把算法放在场景中，这样读者就可以把图片上的箭头和它们的含义匹配起来。</li><li id="072d" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">控制面板上的按钮<code class="fe ol om on oo b">Saving a profile</code>在该层为蓝色，表示该场景当前被选中显示。我们不能改变属于另一层(背景)的元素的颜色。我们需要从元素最初所属的层复制元素，将其粘贴到当前层，更改其颜色(样式)，并将其移动到原始按钮的顶部:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/b11a4e45eb7af30351d90dc3f3cb7358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XagE9DJbXvQwN-rdf6Dycg.png"/></div></div></figure><ul class=""><li id="f8b0" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated">通常，一个微服务模块不能执行两个不同的活动——这与<a class="ae kv" href="https://en.wikipedia.org/wiki/Single-responsibility_principle" rel="noopener ugc nofollow" target="_blank">单一责任原则</a>相矛盾。在我们的例子中，接待员不从队列中获取消息，而是将数据保存到数据库中。对于第二个操作，它使用其他类别的配置文件服务。如果您需要一个更详细的图表，您可以在模式上描述所有的配置文件服务的类。但是对于我们的例子，我们将省略这些细节。</li><li id="1647" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">另一个技术场景隐藏在单词“<em class="mp">网站发送</em>”的后面。在这个场景中，至少有两个站点组件——客户端(前端)和API(后端)——参与其中。但我们将这些元素合并成一个实体——“网站”——因为它们与业务逻辑或Profile Service的架构没有直接关系。</li></ul><p id="ee41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个阶段，为图表添加交互性还为时过早。首先，我们需要创建所有的层。然后我们可以在它们之间切换。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="e6c0" class="ls lt iq bd lu lv oe lx ly lz of mb mc jw og jx me jz oh ka mg kc oi kd mi mj bi translated">场景2。索引配置文件</h1><p id="26e2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">应用我们在第一个场景中使用的方法，我们将为第二个场景创建一个层—在搜索&amp;分析引擎中<em class="mp">索引配置文件。</em></p><p id="5f51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您对这个概念不熟悉，那么数据索引是一种将数据存储在一个特殊位置的方法(<em class="mp">索引</em>),以便根据需要快速查找和检索。您可以将索引想象成具有复杂搜索机制的数据库。<a class="ae kv" href="https://www.elastic.co/blog/what-is-an-elasticsearch-index" rel="noopener ugc nofollow" target="_blank"> ElasticSearch </a>是一个<em class="mp">搜索&amp;分析引擎</em>，通常用于创建广泛的数据指数。</p><h2 id="b5fe" class="ni lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated"><strong class="ak">轮廓索引的工作原理</strong></h2><ol class=""><li id="199b" class="mq mr iq ky b kz mk lc ml lf nu lj nv ln nw lr mv mw mx my bi translated"><em class="mp">索引器</em> —配置文件服务的模块，负责配置文件的索引—从索引队列中获取带有配置文件ID的消息。</li><li id="acb8" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">然后索引器向<em class="mp"> API </em>发送一个请求，通过配置文件ID获取配置文件数据。</li><li id="57cb" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">API从数据库中获取必要的数据。<br/>同样，API使用其他Profile Service的类来实现，但我们不在这个规范级别。</li><li id="a6cf" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">API将配置文件数据返回给索引器。</li><li id="6c92" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">Indexer将配置文件数据转换为适合索引的格式(例如JSON ),并将格式化的配置文件保存到搜索和分析引擎(SAE)中的相应索引中。</li></ol><p id="4084" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在图上，我们将在一个名为'<em class="mp"> S2 '的单独层上描述这个逻辑。索引轮廓</em>。因此，在添加任何新元素之前，我们</p><ol class=""><li id="89e7" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">在<em class="mp">图层</em>面板中添加相应名称的新图层；</li><li id="2a37" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">锁定背景和S1。将 <em class="mp">剖面保存到数据库的</em>层(点击锁状标志，使其变成深灰色)；</li><li id="dec9" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">通过单击将焦点切换到新创建的级别:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/6fc6ffb0b921ab34777d8e6ef07dce87.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*zEKAyXOWkjpfmVfQNyGqYw.png"/></div></figure><p id="300e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在该层上，我们有:</p><ul class=""><li id="7808" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated"><strong class="ky ir">新元素</strong>—SAE中的配置文件索引</li><li id="b95c" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated"><strong class="ky ir">现有元素</strong> —数据库，索引消息队列</li><li id="f7d0" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated"><strong class="ky ir">配置文件服务涉及的模块</strong> — API、索引器</li></ul><p id="d8d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把“概要文件的索引是如何工作的”一节中描述的流程放在图表上:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/335ce08c7920742111c7228296f15d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FmNe5aX9Vtw21kSK9E_-kQ.png"/></div></div></figure></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="e43a" class="ls lt iq bd lu lv oe lx ly lz of mb mc jw og jx me jz oh ka mg kc oi kd mi mj bi translated">场景3。搜索配置文件</h1><p id="d2c4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于剩下的场景，我们不会详细描述整个过程。方法是相同的，所以解释一下<strong class="ky ir">它是如何工作的</strong>并展示图表层的最终视图就足够了。</p><h2 id="67c1" class="ni lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated"><strong class="ak">如何搜索个人资料</strong></h2><p id="0bdf" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">搜索简档意味着用户只想得到那些满足特定标准的简档。为此，他们在网站上指定过滤器，并点击按钮<strong class="ky ir">搜索档案</strong>。然后</p><ol class=""><li id="5663" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">网站向<em class="mp"> API </em>发送请求，以根据指定的标准获取个人资料。</li><li id="9ba3" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">API从SAE中的概要文件索引中获取合适的概要文件。</li><li id="5c63" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">对于检索到的概要文件，API从数据库中获取附加数据。<br/>如果配置文件索引存储了每个配置文件所需的所有参数，则可以省略该步骤。但是，例如，如果用户手动添加到概要文件中的技能信息没有存储在索引中，那么在这一步将从数据库中检索这些信息。</li><li id="9cce" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">API向网站(向用户)返回结果配置文件集以及所有需要的信息。</li></ol><p id="76b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在图表中，场景3如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/365eb95d7bf33117527214339bb82bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsZxvB4Cv2hGW2uiCP4kcg.png"/></div></div></figure><h2 id="f2a0" class="ni lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated"><strong class="ak">重要提示</strong></h2><ol class=""><li id="46a1" class="mq mr iq ky b kz mk lc ml lf nu lj nv ln nw lr mv mw mx my bi translated">可选步骤用虚线箭头表示。</li></ol></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="73e3" class="ls lt iq bd lu lv oe lx ly lz of mb mc jw og jx me jz oh ka mg kc oi kd mi mj bi translated">添加交互性</h1><p id="f0b6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">至此，我们已经为模式创建了所有的层，读者已经可以使用层面板在它们之间切换了。那么，我们真的需要添加任何交互性吗？</p><p id="3990" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一个图表被嵌入到一个CMS平台(例如Confluence)的页面中，那么在这个模式的顶部隐藏菜单中找到图层面板是非常棘手的。使用交互式按钮来显示和隐藏某些场景似乎更加用户友好。此外，当它可点击时，一切都变得更好。</p><p id="f275" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">背景层是读者看到的第一层。因此，背景层的控制面板中的按钮应该响应点击并显示相应的场景。让我们为<code class="fe ol om on oo b">Saving a profile</code> <strong class="ky ir"> </strong>按钮添加交互性。</p><ol class=""><li id="384b" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">在图层面板中，点击<em class="mp"> S1。将配置文件保存到数据库</em>层；</li><li id="4ebb" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">在图层面板的底部菜单中，点击钢笔图标打开图层进行编辑；</li><li id="e7f8" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">复制层的ID:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/60b04aea5790eb7f8ce488bb3856290a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ApNZThpeZ76Y3XEB2mwPWA.png"/></div></div></figure><p id="b745" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.切换到图表的背景层:</p><ul class=""><li id="faf6" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated">锁定并隐藏所有其他图层(<em class="mp"> S1 </em>、<em class="mp"> S2 </em>、<em class="mp">S3</em>)；</li><li id="9643" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">显示和解锁背景层；</li><li id="280c" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">将焦点设置在背景层上。</li></ul><p id="747e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5.右击<code class="fe ol om on oo b">Saving a profile</code> <strong class="ky ir"> </strong>按钮，在弹出菜单中选择<strong class="ky ir">编辑链接… </strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/67dde70159fbdfc10d93dad375262621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8N8TA_NL1Mzg41pZwTerlw.png"/></div></div></figure><p id="9c80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">6.在第一个文本区域中，粘贴以下代码:</p><pre class="kg kh ki kj gt ov oo ow ox aw oy bi"><span id="da78" class="ni lt iq oo b gy oz pa l pb pc">data:action/json,{“actions”:[{“toggle”: {“cells”: [“{layer_ID}”]}}]}</span></pre><ul class=""><li id="e92d" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated"><code class="fe ol om on oo b">{layer_ID}</code>就是<em class="mp"> S1。将配置文件保存到步骤3中复制的数据库</em>层的ID。</li></ul><p id="efc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">7.点击按钮<strong class="ky ir">应用</strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/019e1f1e975454d32fde27882faad31c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xie0lNJK7Jx_tiutifvNWw.png"/></div></div></figure><p id="a805" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段代码将显示读者点击背景层上的<code class="fe ol om on oo b">Saving a profile</code> <strong class="ky ir"> </strong>按钮时的场景。</p><p id="0b36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们对其余场景使用相同的方法。将<strong class="ky ir">切换</strong>动作添加到所有三个场景按钮后，我们得到以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/ed74c5f0ccf89cc36a9de312b71fc115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5kDb347iVCordpJYCYzEiA.gif"/></div></div></figure><p id="ee0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">重要提示</strong></p><ol class=""><li id="f17a" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">正如我们之前所说的，描述区域一次只能容纳一个场景。因此，将只显示所选算法中顶层的算法。</li></ol><p id="5c70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，读者可以打开特定的图层，但他们不能关闭图层。为了使读者能够隐藏场景，我们将在相应的按钮上添加隐藏动作。与在背景层添加的显示动作不同，隐藏动作应该在场景层添加。</p><p id="9c6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们来看一下<code class="fe ol om on oo b">Saving a profile</code> <strong class="ky ir"> </strong>按钮。为了隐藏相应的场景，我们</p><ol class=""><li id="4a14" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">切换到<em class="mp"> S1。将概要文件保存到图表的数据库</em>层:</li></ol><ul class=""><li id="7c4c" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated">锁定并隐藏除背景和<em class="mp"> S1以外的所有图层。将配置文件保存到数据库</em>；</li><li id="411a" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">显示并锁定背景层；</li><li id="9617" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">展示并解锁<em class="mp"> S1。将配置文件保存到数据库</em>层；</li><li id="1ebd" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated">将焦点设置在背景层上:</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/7bfd30ae1df8890fe1b90aabe5986590.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*9q4gOsfTdK0vkO4ziE_WmA.png"/></div></figure><p id="a49a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.右击<code class="fe ol om on oo b">Saving a profile</code> <strong class="ky ir"> </strong>按钮，在弹出菜单中选择<strong class="ky ir">编辑链接… </strong>。</p><p id="e855" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.在第一个文本区域中，粘贴以下代码:</p><pre class="kg kh ki kj gt ov oo ow ox aw oy bi"><span id="2ed5" class="ni lt iq oo b gy oz pa l pb pc">data:action/json,{“actions”:[{“hide”: {“cells”: [“{layer_ID}”]}}]}</span></pre><ul class=""><li id="4a8b" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated"><code class="fe ol om on oo b">{layer_ID}</code>是S1的<em class="mp">。将配置文件保存到数据库</em>层的ID。</li></ul><p id="b334" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.点击<strong class="ky ir">按钮应用</strong>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/a629ea19cbe18f697d53e4ca0e165648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-SHyXJGQUlWc2noWWob9Q.png"/></div></div></figure><p id="6899" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段代码将隐藏读者点击<em class="mp"> S1上的<code class="fe ol om on oo b">Saving a profile</code> <strong class="ky ir"> </strong>按钮时的场景。将配置文件保存到数据库</em>层。</p><p id="6cfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们对其余场景使用相同的方法。将<code class="fe ol om on oo b">hide</code> <strong class="ky ir"> </strong>动作添加到所有三个场景按钮后，我们得到以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/6c0f0cc911030fe743ca80f7463b7e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9cSRg6LNm30IRjHCjVJgHQ.gif"/></div></div></figure><p id="2d04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在唯一的静态按钮是<code class="fe ol om on oo b">Show/hide all scenarios</code>按钮。</p><p id="8bef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了给这个按钮添加交互性，我们</p><ol class=""><li id="dcf8" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">切换到背景层；</li><li id="7a4d" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">复制<code class="fe ol om on oo b">Show/hide all scenarios</code> <strong class="ky ir"> </strong>按钮，将副本粘贴到原按钮附近。更改复制的按钮的颜色和字体，使其看起来像被单击过一样。</li><li id="c451" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">右键点击复制按钮，在弹出菜单中选择<strong class="ky ir">编辑数据… </strong>，复制按钮ID:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/3e7cd9c2653fcf3b3348d57cf50fd8ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54P9nMfW7MJ_sRULBDktXw.png"/></div></div></figure><p id="fc4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.转到原始按钮，并向其添加以下切换操作:</p><pre class="kg kh ki kj gt ov oo ow ox aw oy bi"><span id="3d72" class="ni lt iq oo b gy oz pa l pb pc">data:action/json,{“actions”:[{“toggle”: <br/>{“cells”: [“{layer1_ID}”, “{layer2_ID}”, “layer3_ID”, “copiedButton_ID”]}}]}</span></pre><ul class=""><li id="287c" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr ne mw mx my bi translated"><code class="fe ol om on oo b">layer1_ID</code><em class="mp"/>—<em class="mp">S1的ID。将配置文件保存到数据库</em>层</li><li id="0e56" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated"><code class="fe ol om on oo b">layer2_ID</code>—<em class="mp">S2的ID。索引轮廓</em>层</li><li id="3189" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated"><code class="fe ol om on oo b">layer3_ID</code><em class="mp"/>—<em class="mp">S3的ID。搜索轮廓</em>层</li><li id="e42e" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated"><code class="fe ol om on oo b">copiedButton_ID</code> —步骤3中复制的按钮的ID。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/88ed7c05343f25e19b6808803a04e128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*319yHqqsJLXewWCNSoSUBg.png"/></div></div></figure><p id="bed7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5.将相同的动作添加到复制的按钮中(<strong class="ky ir">切换</strong>动作根据元素的当前状态显示和隐藏元素——如果它们被显示，它将隐藏它们，反之亦然)。</p><p id="4f1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">6.将复制的按钮移动到原始按钮之上。</p><p id="d33f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们完成了——交互图准备好了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/6017fb425bd4d440d023b282f2e4ce3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7wsEgwhyEzho0WtJ2jfgCw.gif"/></div></div></figure></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="d9e7" class="ls lt iq bd lu lv oe lx ly lz of mb mc jw og jx me jz oh ka mg kc oi kd mi mj bi translated">最终建议</h1><p id="dc8c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">作为一个结论，我想补充一些建议，当你创建你自己的图时，这些建议可能会有所帮助。</p><ol class=""><li id="2eaf" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated"><strong class="ky ir">仅描述模式上的基本场景</strong>——为了向读者介绍新服务，选择那些覆盖服务主要组件并揭示服务主要目的的场景。如果您想描述更多的场景或者更深入地了解技术实现，您可以创建一个直升机视图模式和具有更深刻规范的附加图表。</li><li id="ec7b" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">在箭头上标上<strong class="ky ir">数字——箭头上的</strong>数字有助于读者理解你想要讲述的故事。他们不会混淆找到一个场景的起点和终点。</li></ol><h2 id="e408" class="ni lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated"><strong class="ak">有用的资源</strong></h2><ul class=""><li id="8422" class="mq mr iq ky b kz mk lc ml lf nu lj nv ln nw lr ne mw mx my bi translated"><a class="ae kv" href="https://drawio-app.com/interactive-diagrams-with-custom-links-and-actions/" rel="noopener ugc nofollow" target="_blank">带有自定义链接和动作的交互图</a></li><li id="bccc" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr ne mw mx my bi translated"><a class="ae kv" href="https://drawio.freshdesk.com/support/solutions/articles/16000080137-work-with-custom-links" rel="noopener ugc nofollow" target="_blank">使用自定义链接</a></li></ul><p id="8378" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个<a class="ae kv" href="https://gist.github.com/rinagreen0902/8af72021ec48efc247b00c2f8daad856" rel="noopener ugc nofollow" target="_blank">要点</a>中可以找到<code class="fe ol om on oo b">ProfileService</code>文件的XML代码。</p></div></div>    
</body>
</html>