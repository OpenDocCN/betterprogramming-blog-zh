<html>
<head>
<title>How to Create and Publish Your Own Ruby Gem From Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从头开始创建和发布自己的Ruby Gem</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-create-and-publish-your-own-ruby-gem-from-scratch-92ec8419c104?source=collection_archive---------9-----------------------#2019-09-24">https://betterprogramming.pub/how-to-create-and-publish-your-own-ruby-gem-from-scratch-92ec8419c104?source=collection_archive---------9-----------------------#2019-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aeff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">建造一个能产生随机文本的宝石</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b149945e13928135347e5137ad7a6fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZgXExMvcrs2YQ6xZ8lUf0Q.jpeg"/></div></div></figure><p id="e388" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">今天，我将向您展示如何创建和发布您自己的Ruby gem。</p><p id="004a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将构建一个gem，生成一个随机的问候文本和用户名(例如“Bonjour，John”)。</p><p id="84fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以在Rails应用程序的任何地方使用它。</p><p id="0233" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">gem的功能非常简单。这只是一个指南；一步一步的过程，如果你愿意的话。一旦你完成了这个过程，你就可以创造任何你喜欢的东西了！</p><p id="736a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们开始吧。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="fcf4" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">设置文件</h1><p id="2569" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated"><em class="mu">本教程假设您的系统上已经安装了</em> <a class="ae mv" href="https://github.com/bundler/bundler" rel="noopener ugc nofollow" target="_blank"> <em class="mu">捆绑器</em> </a> <em class="mu">。如果不请</em> <a class="ae mv" href="https://github.com/bundler/bundler" rel="noopener ugc nofollow" target="_blank"> <em class="mu">安装好</em> </a> <em class="mu">再继续。</em></p><p id="c567" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">导航到要在其中创建gem的本地目录。</p><p id="2245" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在终端中运行以下命令，创建创建gem所需的所有文件:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="7d8c" class="nb ly it mx b gy nc nd l ne nf">bundle gem random_greeting_generator</span></pre><p id="ad00" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我选择了<code class="fe ng nh ni mx b">random_greeting_generator</code>作为我的宝石的名字，但是你可以(也应该)给它起任何你喜欢的名字。一个好的经验法则是确保名称是唯一的，否则在发布gem时会有冲突。</p><p id="bf40" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以去RubyGems.org的<a class="ae mv" href="https://rubygems.org" rel="noopener ugc nofollow" target="_blank"/>查看名字的可用性，确保没有同名的宝石存在:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/0e7cec73147852fa2f0f4ad33521a059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xm7gu8sefz_k_suRHDix2Q.png"/></div></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">搜索“随机问候生成器”没有结果</p></figure><p id="d380" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，运行bundle命令为我们开始构建gem创建必要的文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/f4a23d5de7d378f0f1616d1eba611612.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*Urbb6c3Vze-xCX2is-bDlw.png"/></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">运行“捆绑gem随机_问候_生成器”后生成的文件</p></figure><h1 id="65a8" class="lx ly it bd lz ma np mc md me nq mg mh jz nr ka mj kc ns kd ml kf nt kg mn mo bi translated">让我们开始建设吧！</h1><p id="b009" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">让我们导航到生成目录的根目录并打开<code class="fe ng nh ni mx b">random_greeting_generator.gemspec</code>文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/953924c537d6200284b297c4eb3ca989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qubErsRrjWYhq965ltJm6g.png"/></div></div></figure><p id="42d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">gem生成器已经为您预先配置了许多设置，但是正如屏幕截图中突出显示的，您需要完成一些待办事项才能正确编译。</p><p id="c49b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些非常简单明了:</p><ul class=""><li id="ef11" class="nv nw it kw b kx ky la lb ld nx lh ny ll nz lp oa ob oc od bi translated">摘要</li><li id="e3d1" class="nv nw it kw b kx oe la of ld og lh oh ll oi lp oa ob oc od bi translated">描述</li><li id="ee7f" class="nv nw it kw b kx oe la of ld og lh oh ll oi lp oa ob oc od bi translated">主页</li></ul><p id="0f22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，导航到<code class="fe ng nh ni mx b">lib/random_greeting_generator</code> <strong class="kw iu"> </strong>目录并创建一个<code class="fe ng nh ni mx b">generator.rb</code>文件。这个文件将包含我们的gem的逻辑:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="b736" class="nb ly it mx b gy nc nd l ne nf">module RandomGreetingGenerator<br/>  class Generator<br/>    def self.random_greeting name <br/>      greetings = ["Hello","Bonjour","Hola","Guten tag",<br/>        "Hej","Salve","Nǐ Hǎo","Xin chào","Hei","Ahoj"<br/>      ]<br/>      # Creates a random greeting string<br/>      "#{greetings.sample}, #{name}"<br/>    end<br/>  end<br/>end</span></pre><p id="a53f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将此代码添加到<code class="fe ng nh ni mx b">lib/random_greeting_generator/generator.rb</code>。</p><p id="6bd9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们将这个模块导入到<code class="fe ng nh ni mx b">lib</code>目录下的<code class="fe ng nh ni mx b">random_greeting_generator.rb</code> <strong class="kw iu"> </strong>文件中:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="efcb" class="nb ly it mx b gy nc nd l ne nf">require "random_greeting_generator/version"<br/>require "random_greeting_generator/generator"<br/><br/>module RandomGreetingGenerator<br/>  <br/>end</span></pre><p id="9447" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，您需要编辑<code class="fe ng nh ni mx b">.gitignore</code> <strong class="kw iu"> </strong>文件，并添加所有应该忽略的带有<code class="fe ng nh ni mx b">.gem</code>扩展名的文件。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="f441" class="nb ly it mx b gy nc nd l ne nf">/.bundle/<br/>/.yardoc<br/>/_yardoc/<br/>/coverage/<br/>/doc/<br/>/pkg/<br/>/spec/reports/<br/>/tmp/<br/><br/># Ignore all files with the .gem extension<br/>*.gem</span></pre><p id="68b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更新您的<code class="fe ng nh ni mx b">README.md</code> <strong class="kw iu"> </strong>，并添加适当的描述和使用说明。</p><p id="b152" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，在<a class="ae mv" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Github </a>上创建一个存储库，并远程推送您的本地回购。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="d2fe" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">生成宝石！</h1><p id="1e95" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">最后，让我们运行生成宝石的命令！</p><p id="7dd7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">导航到您的根目录，并在终端中运行以下命令:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="5318" class="nb ly it mx b gy nc nd l ne nf">gem build random_greeting_generator.gemspec</span></pre><p id="a537" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果一切顺利，您将在终端上看到打印出来的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/829d53aeb28447b1a620194d5fb91aac.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*hpJxUeGQVINb-aG3xg_UIA.png"/></div></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="91bb" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">向RubyGems.org发布我们的宝石！</h1><p id="d37b" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">前往<a class="ae mv" href="https://rubygems.org/" rel="noopener ugc nofollow" target="_blank">RubyGems.org</a>创建您的账户。登录后，转到<a class="ae mv" href="https://rubygems.org/profile/edit" rel="noopener ugc nofollow" target="_blank">编辑配置文件</a>页面，您将在API访问部分找到curl命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/ac1dbc4846b76f60daac31e4d4252c12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4YEjRVfqp8uO4mwazeI8eQ.png"/></div></div></figure><p id="91d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">复制curl命令并在终端中运行它，以获得发布gem所需的所有有用命令。如果系统提示您输入密码，请输入。</p><p id="b0ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">安装完成后，导航到gem的根目录并运行以下命令:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="d9d9" class="nb ly it mx b gy nc nd l ne nf">bundle exec rake release</span></pre><p id="706f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果没有安装rake，可能会出现错误:<strong class="kw iu"> <br/> </strong> <code class="fe ng nh ni mx b">Could not find gem ‘rake (~&gt; 10.0)’ in any of the gem sources listed in your Gemfile.</code></p><p id="a3c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，按照提示运行<code class="fe ng nh ni mx b">bundle install</code> <strong class="kw iu"> </strong>，然后重新运行上述命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/f1beb986ce67df0cf3f78976cb205405.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*-ScZVABnFiNAWZSErqymqQ.png"/></div><p class="nk nl gj gh gi nm nn bd b be z dk translated">成功创建Gem并推向RubyGems.org</p></figure><p id="fd65" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果一切顺利，您将会看到上面截图中的成功消息。</p><p id="aadd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">前往你的<a class="ae mv" href="https://rubygems.org" rel="noopener ugc nofollow" target="_blank">RubyGems.org</a>个人资料页面，你会看到你新创建的宝石文件！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/9bf365ac600b72da0d0e215c37bcd9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RpHvOlDpeOEXXGsZeT1X0A.png"/></div></div></figure><p id="6baa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">恭喜你！现在，您已经发布了您的新宝石，供全世界观看和使用。如果你有任何错误，请评论这篇文章，我会尽力帮你改正。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="0462" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">资源</h1><p id="3c03" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">在此处找到本指南<a class="ae mv" href="https://github.com/KaushikShivam/random_greeting_generator" rel="noopener ugc nofollow" target="_blank">的回购。</a></p></div></div>    
</body>
</html>