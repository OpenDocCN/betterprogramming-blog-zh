<html>
<head>
<title>How I Deal With Security Vulnerabilities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何处理安全漏洞</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-i-deal-with-security-vulnerabilities-40322ac5c038?source=collection_archive---------7-----------------------#2020-11-17">https://betterprogramming.pub/how-i-deal-with-security-vulnerabilities-40322ac5c038?source=collection_archive---------7-----------------------#2020-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="32d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">依赖救援</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a1b38f71ce2556450bf6af7664ab9aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I3WpnUaWbuKhXpU6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安妮·斯普拉特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片。</p></figure><p id="c8f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将是一篇短文，向你展示我是如何处理安全漏洞的。</p><p id="1d5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您过去一直在与导致安全漏洞的更新依赖作斗争，或者您只是想看看我的方法，那么这篇文章就是为您准备的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/696cb350484fbed9ffa7a311e0ff6d47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UuN7ljC9c8msHB-mk-gAVA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安全漏洞通知</p></figure><p id="1004" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">据我所知，没有人喜欢处理像上面这样的警报。相反，我们想写一些新的特性或用测试覆盖更多的代码，但这项工作仍然要做。</p><p id="544e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，不说了。让我们开始吧。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="d752" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated"><strong class="ak">目标</strong></h1><p id="b6dd" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们的目标应该是解决所有的安全漏洞，或者至少是那些最严重的安全漏洞。我们可以识别四种严重程度:</p><ul class=""><li id="fcf2" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">批评的</li><li id="ed64" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">高的</li><li id="163c" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">温和的</li><li id="8ec3" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">低的</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/2e1c434060b05d9eeaf12d4470ea1d78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5jGgWeDDGdCYcw59RvukYw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从属机器人警报页面</p></figure><p id="d4d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以根据严重程度对它们进行分类。基本上，一个好的方法是偶尔查看一下Dependabot警报，以避免出现上图所示的情况(48个潜在漏洞)。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8743" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">从属机器人</h1><p id="7805" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，如果你有可能从GitHub marketplace添加<code class="fe np nq nr ns b">Dependabot Preview</code>，那么就去做吧。完全免费。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/e044eaf48d31c7c2e236b6b76a01e5b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*NqLLDdOepSmcdGtb3AG7tA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从属机器人</p></figure><p id="d770" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“自动处理安全建议”选项对您的情况特别有帮助。为了实现这一点，Dependabot创建了带有依赖性更新的pull请求。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/4030c45ff1546afae4180deb35762468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/0*cVIi1ctA4vvX0HoE"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从属机器人创建的拉请求</p></figure><p id="5887" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您配置了dependent bot，您可以转到pull requests页面，尝试合并由dependent bot创建的PRs，这通常可以解决安全漏洞问题。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="5aa5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">工作流程</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/04bb6a7750ef441c4c7685089660af50.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*VpJf6F672KOuNqB6hEMWpQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">工作流程方案</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="9e6c" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">研究</h1><p id="c5e4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您不能用dependent bot解决所有问题，或者您根本没有配置dependent bot，您可以切换到终端，尝试用<code class="fe np nq nr ns b">audit</code>命令列出所有安全漏洞:</p><pre class="kj kk kl km gt nw ns nx ny aw nz bi"><span id="7d84" class="oa me it ns b gy ob oc l od oe">yarn audit </span><span id="a01c" class="oa me it ns b gy of oc l od oe">npm audit</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/a3394e9df2777e583a2af9c7bbaee1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGKBhQgYJMx7hBc6xY47aA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">审计命令输出</p></figure><p id="0c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe np nq nr ns b">audit</code>命令的输出包含:</p><ul class=""><li id="99a5" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">严重程度</li><li id="1e6b" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">可疑依赖项的名称</li><li id="306b" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">您应该使用的版本</li><li id="0214" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">包含该依赖项的包的名称(我称之为<em class="oh">根依赖项</em></li><li id="c513" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><code class="fe np nq nr ns b">*.lock</code>文件中依赖项的路径</li><li id="c8cb" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">更多信息</li></ul></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="67cc" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">固定</h1><h2 id="14d0" class="oa me it bd mf oi oj dn mj ok ol dp mn li om on mp lm oo op mr lq oq or mt os bi translated"><strong class="ak"> package.json </strong></h2><p id="01bc" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">第一种方法是看看我们是否在应用程序中使用了<em class="oh">根依赖</em>。这听起来很荒谬，但事实是应用程序经常包含一些未使用的剩余包。如果是这种情况，我们可以从<code class="fe np nq nr ns b">package.json</code>文件中删除依赖关系，这样就完成了。要删除未使用的依赖项，可以使用以下命令:</p><pre class="kj kk kl km gt nw ns nx ny aw nz bi"><span id="0592" class="oa me it ns b gy ob oc l od oe">yarn remove dependency-name </span><span id="54c8" class="oa me it ns b gy of oc l od oe">npm uninstall dependency-name</span></pre><p id="1dbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">否则，您可以尝试找出是否有新版本的<em class="oh">根依赖</em>可用。如果是这样的话，你应该看一下新的包版本，以便根据<a class="ae ky" href="https://docs.npmjs.com/about-semantic-versioning" rel="noopener ugc nofollow" target="_blank">语义版本</a>知道更新有多严重。</p><h2 id="e192" class="oa me it bd mf oi oj dn mj ok ol dp mn li om on mp lm oo op mr lq oq or mt os bi translated">升级命令</h2><p id="2507" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">另一种方法是使用<code class="fe np nq nr ns b">upgrade</code>命令:</p><pre class="kj kk kl km gt nw ns nx ny aw nz bi"><span id="2dff" class="oa me it ns b gy ob oc l od oe">yarn upgrade-interactive</span></pre><p id="cb27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">npm本身不支持<code class="fe np nq nr ns b">upgrade</code>工具，所以当你使用npm时，你需要安装全局依赖<a class="ae ky" href="https://www.npmjs.com/package/npm-check" rel="noopener ugc nofollow" target="_blank"> npm-check </a>:</p><pre class="kj kk kl km gt nw ns nx ny aw nz bi"><span id="5315" class="oa me it ns b gy ob oc l od oe">npm install -g npm-check </span><span id="9b71" class="oa me it ns b gy of oc l od oe">npm-check -u</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/79bd5f249d49937c013d055e0e9b45ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hGKf5t2MONOoedTPFC7CZw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">纱线升级-交互式输出</p></figure><p id="a799" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接口遵循语义版本化(看看上图中的<code class="fe np nq nr ns b">color legend</code>)。</p><p id="5782" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用键盘箭头浏览升级界面，通过按空格键选择要更新的包，然后按enter键接受所有更改。</p><p id="6318" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将<code class="fe np nq nr ns b">--latest</code>与<code class="fe np nq nr ns b">yarn upgrade-interactive</code>选项一起使用，以便显示所有可能的升级，即使它们与<code class="fe np nq nr ns b">package.json</code>中的版本不匹配。那些是红色的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/e4775184c94a949312a5bd32a5b6716c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sh1uLTEo505iPcneEEU0rQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">纱线升级-互动-最新输出</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="ff67" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">试验</h1><p id="213e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">对于每种更新类型，我测试一切是否都正常的方法是不同的。</p><ul class=""><li id="ece6" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">补丁:试运行。</li><li id="5232" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">辅修:测试运行，运行一个应用程序，点击左右。</li><li id="a6c6" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">Major:测试运行，运行一个应用程序，点击左右，进入changelog，阅读新版本中增加了什么以及改变了什么。然后，您可以导航到某个特定的变更并阅读更多相关信息。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/27c1acd626f86ad09864d94410844c19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9lC00Pl_3dbsApKr0-2AWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">变更日志示例</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="321b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结束语</h1><p id="fc8d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">您应该重复这个调查-修复-测试的循环，直到您修复了所有的安全漏洞——或者至少是主要的安全漏洞。</p><p id="97ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我更新安全漏洞的工作流程。请分享您的想法，看看它是否也适合您，或者您是否发现了一些改进的空间。</p><blockquote class="ow ox oy"><p id="61a0" class="kz la oh lb b lc ld ju le lf lg jx lh oz lj lk ll pa ln lo lp pb lr ls lt lu im bi translated">推特:<a class="ae ky" href="https://twitter.com/home?lang=pl" rel="noopener ugc nofollow" target="_blank"> k_wdowik </a></p></blockquote></div></div>    
</body>
</html>