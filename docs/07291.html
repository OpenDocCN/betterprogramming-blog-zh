<html>
<head>
<title>Build Your First Dapp With Web3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Web3.js构建您的第一个Dapp</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/build-your-first-dapp-with-web3-js-9a7306d16a61?source=collection_archive---------0-----------------------#2020-12-30">https://betterprogramming.pub/build-your-first-dapp-with-web3-js-9a7306d16a61?source=collection_archive---------0-----------------------#2020-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cfcd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">web3.js实用介绍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4ca003653b03584794f6d7a25d703ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*biLs0r8qLhaaorteiG6Dxg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">内森·达·希尔瓦在<a class="ae kv" href="https://unsplash.com/s/photos/web-developer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</p></figure><p id="5fa4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">欢迎来到学习可靠性系列的另一部分。在<a class="ae kv" href="https://medium.com/better-programming/learn-solidity-the-factory-pattern-75d11c3e7d29" rel="noopener">的上一篇文章</a>中，我们看到了如何实现工厂模式。如果您从本系列的开始就一直在关注，那么您已经掌握了基本知识，可以开始编写自己的智能合同了。</p><p id="340c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，今天我将向您展示构建去中心化应用程序的全貌，并向您介绍<a class="ae kv" href="https://web3js.readthedocs.io/en/v1.3.0/" rel="noopener ugc nofollow" target="_blank">web 3 . js</a>——开始构建您自己的dapps所缺少的部分。</p><p id="983f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在深入讨论web3.js是什么以及它是如何工作的细节之前，我想先介绍一下背景，然后回答一个简单的问题:为什么选择web3.js？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/b792529d5c4f24f1e30a6b05c7ccbf42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*ronMtzhop4EL70l8lItDGA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://github.com/ethereumbook/ethereumbook/issues/376" rel="noopener ugc nofollow" target="_blank">GitHub上的以太坊书籍</a></p></figure><p id="d0a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">分散式应用程序有三个主要组件:</p><ul class=""><li id="5d8e" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">前端:接受来自用户的输入，并构建要发送到智能合同的请求。</li><li id="7045" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">钱包:签署交易并将其发送到网络。</li><li id="e827" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">智能合同:<strong class="ky ir"> </strong>这里的<strong class="ky ir"> </strong>是您编写dapp的业务逻辑的地方。</li></ul><p id="3720" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在的问题是如何只使用JavaScript从前端与智能合约交互。</p><p id="9fd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在web3.js出现之前，我们可以与智能合约交互的唯一方式是通过充当json-rpc服务器的以太坊节点提供的<a class="ae kv" href="https://eth.wiki/json-rpc/API" rel="noopener ugc nofollow" target="_blank"> json-rpc API </a>。这不是一项容易的任务。</p><p id="340b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是多亏了web3.js，您不必再担心json-rpc调用的底层细节，因为它提供了以太坊JSON-RPC接口的抽象。因此，您可以开始使用普通JavaScript与以太坊节点进行交互。简单来说，web3.js将JSON-RPC API公开为JavaScript APIs。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="6390" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">web3.js如何工作</h1><p id="7b12" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">正如我们之前所说，为了与以太坊网络进行交互，我们需要向一个以太坊节点发送json-rpc调用，这就是web3.js在幕后所做的事情。那么它是怎么做到的呢？</p><p id="ff2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了将JavaScript代码翻译成json-rpc请求，web3.js使用了我们所说的<em class="nl">提供者</em>，这是一个符合<a class="ae kv" href="https://eips.ethereum.org/EIPS/eip-1193" rel="noopener ugc nofollow" target="_blank"> EIP 1193 </a>规范的JavaScript对象，并实现了负责进行以太坊rpc方法调用的<code class="fe nm nn no np b">request</code>方法。Web3.js有自己的上述规范的实现，并在<code class="fe nm nn no np b">web3.providers</code>下提供，在这里您可以访问<a class="ae kv" href="https://web3js.readthedocs.io/en/v1.2.0/web3.html#providers" rel="noopener ugc nofollow" target="_blank">文档</a>中提到的以下三个提供者:<code class="fe nm nn no np b">HttpProvider</code>、<code class="fe nm nn no np b">WebsocketProvider</code>和<code class="fe nm nn no np b">IpcProvider</code>。</p><p id="8068" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于这些供应商的更多信息可在文档中找到<a class="ae kv" href="http://IpcProvider" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="072f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其他项目也实现了这个规范，比如<a class="ae kv" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"> MetaMask </a>，在<code class="fe nm nn no np b">window.ethereum</code>下的浏览器中注入provider对象。旧版本的Metamask用来在<code class="fe nm nn no np b">window.web3</code>下注入web3的一个实例。</p><p id="e69d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了提供者，我们就可以使用<code class="fe nm nn no np b">new</code>关键字获得web3的实例:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="5f90" class="nu mp iq np b gy nv nw l nx ny">let web3 = new Web3(Web3.givenProvider || 'ws://some.local-or-remote.node:8546');</span></pre><p id="be48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里您应该记住的是，web3.js需要一个provider对象，该对象配置有wallet的信息，该信息将对交易进行签名并将其发送到网络。如果你在前端使用web3，这个提供者将被注入到浏览器中，或者你将使用<code class="fe nm nn no np b">websocketprovider</code>或<code class="fe nm nn no np b">IpcProvider</code>自己构建一个对象。</p><p id="08eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nl">注意:MetaMask使用</em><a class="ae kv" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"><em class="nl">in fura</em></a><em class="nl">作为节点提供者。这就是为什么你不需要在电脑上安装以太坊客户端就可以与以太坊网络互动。</em></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="e733" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">快速浏览API</h1><p id="8d49" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">web3.js不仅允许与以太坊节点通信，还允许与Whisper和Swarm节点通信。它有五个主要包:</p><ul class=""><li id="d9b0" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated"><code class="fe nm nn no np b">web3.eth</code>:允许与以太坊区块链和以太坊智能合约交互。</li><li id="570a" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><code class="fe nm nn no np b">web3.bzz</code>:允许与Swarm交互，这是一个分散的文件存储库。</li><li id="fcb6" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><code class="fe nm nn no np b">web3.shh</code>:允许与广播的耳语协议交互。</li><li id="297f" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">为以太坊dapps提供实用函数，比如将字符串转换为十六进制，将以太值转换为Wei。</li><li id="dadf" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><code class="fe nm nn no np b">web3.*.net</code>:允许与以太坊节点的网络属性交互，如网络ID或对等点计数。</li></ul></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="f31d" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">用web3.js构建您的第一个Dapp</h1><p id="0cdb" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">现在我们已经有了理论，让我们动手做我们的第一个dapp。在这个例子中，我们将构建一个问候dapp，它存储一个默认的问候字符串并允许用户更新它。对于钱包，我们将使用元掩码。你可以点击<a class="ae kv" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">他们网站</a>首页的下载链接来添加扩展。</p><h2 id="67c7" class="nu mp iq bd mq nz oa dn mu ob oc dp my lf od oe na lj of og nc ln oh oi ne oj bi translated">1.构建合同并将其部署到网络中</h2><p id="1670" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">首先在您的工作空间中创建一个名为<code class="fe nm nn no np b">greeting</code>的空项目，并使用<code class="fe nm nn no np b">truffle init</code>初始化它:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="6539" class="nu mp iq np b gy nv nw l nx ny">&gt; mkdir greeting<br/>&gt; cd greeting<br/>&gt; truffle init</span></pre><p id="bc47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想你已经安装了松露。如果还没有，您可以使用下面的命令获得它:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="1a06" class="nu mp iq np b gy nv nw l nx ny">npm install -g truffle</span></pre><p id="b5dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用您最喜欢的代码编辑器打开项目(我使用的是VS代码)。接下来，编辑<code class="fe nm nn no np b">truffle-config.js</code>文件，用以太坊网络的IP和端口更新网络(你可以用Ganache来完成)。您还需要配置编译器版本，以使用您已经安装的版本。<br/>如果您还没有Solidity编译器，您可以使用以下命令安装它:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="7599" class="nu mp iq np b gy nv nw l nx ny">&gt; npm install -g solc</span><span id="1bbd" class="nu mp iq np b gy ok nw l nx ny">// check the installed version<br/>&gt; solc --version</span></pre><p id="5454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，是时候在您的项目目录中创建<code class="fe nm nn no np b">greeting</code>契约了。键入以下命令:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="f1ec" class="nu mp iq np b gy nv nw l nx ny">&gt; truffle create contract Greeting</span></pre><p id="ceca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">复制粘贴以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="a85e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们差不多准备好了。我们只需要在<code class="fe nm nn no np b">migrations</code>文件夹下添加一个<code class="fe nm nn no np b">2_deploy_greeting.js</code>迁移文件:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="d8dd" class="nu mp iq np b gy nv nw l nx ny">const Greeting = artifacts.require("Greeting");</span><span id="ba94" class="nu mp iq np b gy ok nw l nx ny">module.exports = function (deployer) {<br/>      deployer.deploy(Greeting);<br/>};</span></pre><p id="11f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您可以使用以下工具编译您的智能合约并将其部署到网络中:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="ea80" class="nu mp iq np b gy nv nw l nx ny">&gt; truffle compile<br/>&gt; truffle migrate</span></pre><h2 id="3300" class="nu mp iq bd mq nz oa dn mu ob oc dp my lf od oe na lj of og nc ln oh oi ne oj bi translated">2.用智能合同连接前端</h2><ul class=""><li id="938f" class="lt lu iq ky b kz ng lc nh lf on lj oo ln op lr ly lz ma mb bi translated">设置前端</li></ul><p id="8bcb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<code class="fe nm nn no np b">package.json</code>和<code class="fe nm nn no np b">index.html</code>文件在项目中创建一个名为<code class="fe nm nn no np b">client</code>的新文件夹:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="0e6d" class="nu mp iq np b gy nv nw l nx ny">&gt; mkdir client<br/>&gt; cd client<br/>&gt; npm init -y<br/>&gt; touch index.html</span></pre><p id="08fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装web3.js和lite-server依赖项:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="40aa" class="nu mp iq np b gy nv nw l nx ny">&gt; npm i web3 --save<br/>&gt; npm i lite-server --save-dev //for running a development server</span></pre><p id="f720" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个名为<code class="fe nm nn no np b">src</code>的新文件夹，添加两个脚本:<code class="fe nm nn no np b">index.js</code>和<code class="fe nm nn no np b">utils.js</code>。您还需要使用<code class="fe nm nn no np b">script</code>标签和web3脚本在HTML文件中添加两个脚本:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="670a" class="nu mp iq np b gy nv nw l nx ny">&lt;script type="text/javascript" src="node_modules/web3/dist/web3.min.js"&gt;&lt;/script&gt;</span><span id="971c" class="nu mp iq np b gy ok nw l nx ny">&lt;script type="text/javascript" src="src/utils.js"&gt;&lt;/script&gt;</span><span id="ee85" class="nu mp iq np b gy ok nw l nx ny">&lt;script type="text/javascript" src="src/index.js"&gt;&lt;/script&gt;</span></pre><ul class=""><li id="7168" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">获取web3实例</li></ul><p id="00b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦项目中有了web3.js作为依赖项，您需要做的就是使用提供者的实例实例化web3对象，以便享受web3提供的所有功能。</p><p id="b3f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用浏览器中注入的<code class="fe nm nn no np b">window.ethereum</code>元掩码提供程序，并请求用户允许使用<code class="fe nm nn no np b">window.ethereum.request</code>访问他们的帐户，如<a class="ae kv" href="https://docs.metamask.io/guide/rpc-api.html#permissions" rel="noopener ugc nofollow" target="_blank">元掩码文档</a>中所述。</p><p id="ba9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe nm nn no np b">utils.js</code>文件，添加此功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><ul class=""><li id="05ed" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">创建合同实例</li></ul><p id="3285" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如文档中的<a class="ae kv" href="https://web3js.readthedocs.io/en/v1.3.0/web3-eth-contract.html" rel="noopener ugc nofollow" target="_blank">所述，为了创建合同实例，我们需要合同ABI及其地址。如果您查看一下构建目录中的工件，您会发现一个名为<code class="fe nm nn no np b">Greeting.json</code>的文件。如果你打开它，你会发现很多关于合同的信息，包括合同名称、ABI等。如果您滚动到文件的末尾，您会发现一个network字段，其中包含部署了契约的网络的ID以及相应的地址，我们将使用该地址用web3实例化契约实例。</a></p><p id="4696" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe nm nn no np b">client</code>文件夹下新建一个名为<code class="fe nm nn no np b">contracts</code>的文件夹，复制粘贴<code class="fe nm nn no np b">Greeting.json</code>文件。您还需要安装jQuery来读取JSON文件的内容:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="58b9" class="nu mp iq np b gy nv nw l nx ny">&gt; npm i jquery</span></pre><p id="2ca8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要使用<code class="fe nm nn no np b">web3.eth.net.getId()</code>获得元掩码所连接的网络的ID。</p><p id="5fe4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nl">注意:我假设您已经将元掩码配置为使用Ganache。如果你不确定如何去做，你可以遵循</em> <a class="ae kv" href="https://www.trufflesuite.com/docs/truffle/getting-started/truffle-with-metamask" rel="noopener ugc nofollow" target="_blank"> <em class="nl">这个指南</em> </a> <em class="nl">。</em></p><p id="5a33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将使用返回的ID从<code class="fe nm nn no np b">Greeting.json</code>文件中获取契约的地址，这也将为我们提供契约ABI，并使用<code class="fe nm nn no np b">web3.eth.Contract</code>创建一个契约实例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><h2 id="61e5" class="nu mp iq bd mq nz oa dn mu ob oc dp my lf od oe na lj of og nc ln oh oi ne oj bi translated">3.与智能合同互动</h2><p id="5d86" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">一旦我们创建了契约的实例，我们就可以开始使用<code class="fe nm nn no np b">myContract.methods.myMethod([arguments])</code>调用它的方法，如文档中的<a class="ae kv" href="https://web3js.readthedocs.io/en/v1.3.0/web3-eth-contract.html#id26" rel="noopener ugc nofollow" target="_blank">所述。</a></p><p id="183a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果要调用的函数是纯函数或只读函数，您需要使用:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="0c19" class="nu mp iq np b gy nv nw l nx ny">myContract.methods.myMethod([arguments]).call()</span></pre><p id="0f10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果要调用的函数要修改状态(即事务)，您将需要使用:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="2511" class="nu mp iq np b gy nv nw l nx ny">myContract.methods.myMethod([arguments]).send()</span></pre><p id="f804" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多细节可在文档中找到<a class="ae kv" href="https://web3js.readthedocs.io/en/v1.3.0/web3-eth-contract.html#methods-mymethod-call" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="c5c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在GitHub 上找到完整的代码<a class="ae kv" href="https://github.com/wissalHaji/DappTuto" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="86c6" class="mo mp iq bd mq mr ms mt mu mv mw mx my jw mz jx na jz nb ka nc kc nd kd ne nf bi translated">结论</h1><p id="48b7" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">我希望你喜欢这个教程。如果你有，那就留下来，因为接下来还有很多。</p></div></div>    
</body>
</html>