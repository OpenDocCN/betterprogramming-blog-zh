<html>
<head>
<title>Recreate GitHub’s Contribution Graph Using Flask and Google Sheets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Flask和Google Sheets重新创建GitHub的贡献图</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/recreating-githubs-contribution-graph-using-python-flask-and-google-sheets-73ce9c096784?source=collection_archive---------16-----------------------#2020-04-02">https://betterprogramming.pub/recreating-githubs-contribution-graph-using-python-flask-and-google-sheets-73ce9c096784?source=collection_archive---------16-----------------------#2020-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="36cb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一致性孕育一致性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ed6256afd75844fb0aee24c6bc75bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xrVcailxD9lfjXcseQXMQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">GitHub的贡献图克隆</p></figure><p id="bedd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我是一个效率狂。我曾经每天用纸和笔来监控我的任务。然后，随着任务变得越来越复杂，我开始将它们记录在电子表格中。这种方法在四周内都很有效，但后来我失去了动力。我需要有人督促我按部就班。这就是贡献图出现的地方。</p><p id="9cf3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你使用<a class="ae lu" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>，你会在你的个人资料中看到热图，显示你一年中每天的贡献(提交、拉取请求等)——如上图所示。我每天都在做一个项目，以保持我的GitHub连胜——一直讨厌我个人资料中的灰色方块！我在Node.js找到了<a class="ae lu" href="https://levelup.gitconnected.com/how-to-create-a-tracker-like-the-github-contribution-graph-with-node-js-and-google-sheets-5e915c668c1" rel="noopener ugc nofollow" target="_blank">这个教程</a>，但是我喜欢Python，所以我自己用<a class="ae lu" href="https://flask.palletsprojects.com/" rel="noopener ugc nofollow" target="_blank"> Flask </a>和Google Sheets API做了一个。</p><p id="68bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本教程中，我将介绍从创建应用程序到在Heroku上部署它的每个步骤。我也将分享我发现的错误，以及它们的解决方案。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="30ca" class="mc md it bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">设置您的项目环境</h2><p id="3bdd" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">让我们从创建一个项目工作环境开始。我假设您已经在系统中安装了Python(最好是Python 3)和pip否则，请在这里下载Python <a class="ae lu" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">并按照说明进行操作。Pip是Python的包管理器，有助于安装应用程序所需的附加库和依赖项。在命令提示符下使用以下命令检查是否安装了pip:<code class="fe na nb nc nd b">pip --version</code>。</a></p><ol class=""><li id="ee18" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt nj nk nl nm bi translated">您希望为您的应用程序及其依赖项提供一个隔离的环境，所以从设置一个<a class="ae lu" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank">虚拟环境</a>开始。导航到您想要设置项目的新目录，打开命令提示符并使用命令<code class="fe na nb nc nd b">pip install virtualenv</code>安装<a class="ae lu" href="https://pypi.org/project/virtualenv/" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>。</li><li id="5433" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">通过键入<code class="fe na nb nc nd b">pip install virtualenvwrapper-win</code>安装<a class="ae lu" href="https://virtualenvwrapper.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> virtualenvwrapper </a>，这是virtualenv的一组扩展(注意:此命令仅适用于Windows。对于基于Unix的环境，请遵循<a class="ae lu" href="https://medium.com/@gitudaniel/installing-virtualenvwrapper-for-python3-ad3dfea7c717" rel="noopener">本</a>教程。</li><li id="b68f" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">输入<code class="fe na nb nc nd b">mkvirtualenv your-env-name</code>创建一个虚拟环境。</li><li id="1e17" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">您可以使用<code class="fe na nb nc nd b">workon your-env-name</code>激活虚拟环境，并使用<code class="fe na nb nc nd b">deactivate</code>命令将其停用。</li><li id="07d3" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">虚拟环境启动并运行后，通过输入<code class="fe na nb nc nd b">pip install flask</code>安装flask。</li></ol></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="611b" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">创建您的投稿电子表格</h1><p id="e67e" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">现在，继续创建作为数据库的电子表格。你可以在这里看看我的表<a class="ae lu" href="https://docs.google.com/spreadsheets/d/13E-axJ2W2t__bU-Y79rUgHKFbScNiyeIUXOx3xWqJs4/edit#gid=0" rel="noopener ugc nofollow" target="_blank">。它有四个字段:</a></p><ul class=""><li id="0a6f" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated"><code class="fe na nb nc nd b">Date</code>，我把这个字段格式化成类似GitHub的格式。你可以随意设置格式。</li><li id="75f2" class="ne nf it la b lb nn le no lh np ll nq lp nr lt od nk nl nm bi translated"><code class="fe na nb nc nd b">Task</code>、<em class="oe">、</em>包含每个任务的名称及其描述(可选)。</li><li id="1717" class="ne nf it la b lb nn le no lh np ll nq lp nr lt od nk nl nm bi translated"><code class="fe na nb nc nd b">Number of Tasks</code> <em class="oe">，</em>，<em class="oe"> </em>包含了任务的计数。</li><li id="d42b" class="ne nf it la b lb nn le no lh np ll nq lp nr lt od nk nl nm bi translated"><code class="fe na nb nc nd b">Level</code> <em class="oe">，</em>其中使用公式<code class="fe na nb nc nd b">=IF(C2=0,"0",if(C2&lt;=2,"1",if(C2&lt;=4,"2","3")))</code>计算等级，基于任务数的计数。整个列都用这个公式填充。</li></ul><p id="5482" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以随意定制这些字段，但必须有一个类似的字段级别，因为它用于确定图形中每个方块填充的颜色。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8ce6" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">获取API以使用您的电子表格</h1><p id="f007" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这一步至关重要，因为它允许我们的应用程序与Google Sheets连接:</p><ul class=""><li id="b8a8" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">转到<a class="ae lu" href="https://console.developers.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌开发者控制台</a>，用你的谷歌账户登录。</li><li id="1563" class="ne nf it la b lb nn le no lh np ll nq lp nr lt od nk nl nm bi translated">创建一个新项目，然后单击enable API。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/eec1bea76bef71cb6a257e527301a6cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*-XlrJ8oo-FunNrHmgf_n8g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">启用API按钮</p></figure><ul class=""><li id="aabb" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">寻找Google Drive API，点击“启用”。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/1ae0335c3011f261af32f488b95e3993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*DfcLiGdB4tqSfwXGLXGcuw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google Drive API</p></figure><ul class=""><li id="d4c8" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">启用API后，单击“创建凭据”。将会打开一个凭据向导。如下所示填写每个字段。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/2ae811bd7a7fbe778133e1f7c9239bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*Z2OBhzfwChkamV_F5m32Tg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google开发者控制台中的凭证向导</p></figure><ul class=""><li id="ef82" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">在第二步中，命名您的服务帐户并选择“角色”&gt;“项目”&gt;“编辑器”。单击“继续”,它会生成一个. json文件，如下所示。改名为<code class="fe na nb nc nd b">Client_Secret.json</code>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/6ed09386d8d625d1ffa74523ea70e70b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tFi5HjtoNjn4f5xk0kFDtQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">客户端_秘密. json</p></figure><ul class=""><li id="af88" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">如果你现在尝试访问你的电子表格，你会得到<code class="fe na nb nc nd b">Insufficient Permission</code>错误。</li><li id="f410" class="ne nf it la b lb nn le no lh np ll nq lp nr lt od nk nl nm bi translated">除了Google Drive API，您还必须启用Google Sheets API。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/ad08b38d5f2bef07dc8fcf2c4c56bb07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*Nef6G39b-ZmHc0exqPsoOQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">谷歌工作表API</p></figure><ul class=""><li id="d098" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">启用API后，转到要从中提取数据的工作表，然后单击“share”按钮。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/76e788061b547eec6130fa43c3886216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vWNa7OabhPapBTxZG7B_cg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">共享您的工作表</p></figure><ul class=""><li id="61e0" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt od nk nl nm bi translated">在<code class="fe na nb nc nd b">Client_Secret.json</code>里会有一个<code class="fe na nb nc nd b">client_email</code>。复制电子邮件并粘贴到弹出窗口中，然后点击“发送”。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/3b51939234d212d3a830bd1e0b18953c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*vNVcU7rd-emm12kb_ODjIA.png"/></div></div></figure><p id="1db8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就是这样！现在让我们从电子表格中提取数据，并显示在我们的应用程序中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8b4b" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">构建您的烧瓶应用程序:</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">项目结构</p></figure><p id="7b52" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不要担心，我会解释每个文件的用途以及它的作用。这只是让你对我们的文件夹结构有一个大概的了解。你可以去<a class="ae lu" href="https://exploreflask.com/en/latest/organizing.html" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多关于构建Flask应用的信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4f9a" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">访问Google Sheets数据</h1><p id="acd2" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">现在让我们看看是否可以从工作表中访问数据。有一个叫做<code class="fe na nb nc nd b"><a class="ae lu" href="https://gspread.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">gspread</a></code>的流行Python API，它使得从Google Sheets和Oauth中读取和写入变得容易，并使您的应用程序能够代表服务帐户调用Google API。使用pip、<code class="fe na nb nc nd b">pip install gspread oauth2</code>安装<code class="fe na nb nc nd b">gspread</code>和<code class="fe na nb nc nd b">oauth2</code>。</p><p id="0f83" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">JSON文件嵌套在<code class="fe na nb nc nd b">static</code>(所有不变的静态文件，像CSS、JS都存储在这里)文件夹下，所以使用<em class="oe"> os模块</em> <code class="fe na nb nc nd b">os.path.realpath(os.path.dirname(__file__))</code>从根目录访问它。然后创建一个包含驱动器中提要链接的<code class="fe na nb nc nd b">scope</code>变量和一个使用服务帐户凭证访问JSON文件的<code class="fe na nb nc nd b">creds</code>变量。创建一个<code class="fe na nb nc nd b">client</code>变量来授权<code class="fe na nb nc nd b">gspread</code>使用凭证。</p><p id="d2cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，您可以使用<code class="fe na nb nc nd b">client.open('Daily Contribution').sheet1</code>访问工作表，其中<code class="fe na nb nc nd b">Daily Contribution</code>是文件的名称，<code class="fe na nb nc nd b">sheet1</code>是第一个工作表的名称。我们将把每一列的值存储在一个变量中，并创建一个公共变量<code class="fe na nb nc nd b">data</code>，它保存所有的值，并将其赋给函数<code class="fe na nb nc nd b">getData()</code>的返回值，如下面的代码所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">电子表格. py</p></figure><p id="d342" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要检查这是否正常工作，您可以在命令提示符下用<code class="fe na nb nc nd b">python spreadsheet.py</code>打印<code class="fe na nb nc nd b">data</code>。</p><p id="5290" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们应用程序的数据已经准备好了。现在让我们把它变漂亮！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a833" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">应用程序样式</h1><p id="34ff" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">创建一个<code class="fe na nb nc nd b">index.html</code>文件，并将其嵌套在模板文件夹下。Flask通常在这个文件夹中查找Html文件，因为它使用<a class="ae lu" href="https://jinja.palletsprojects.com/en/2.11.x/templates/" rel="noopener ugc nofollow" target="_blank"> Jinja </a>模板库来呈现模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">index.html</p></figure><p id="1e91" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于CSS，我发现Ire Aderinokun的这个有趣的教程可以重建图表。它节省了我的时间，但是您可以按照自己的意愿来实现它。</p><p id="5b12" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还创建了一个图例，包括工具提示，并将正方形颜色改为粉红色。这是一个游乐场，想有多有创意就有多有创意！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3ade" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">将数据与模板连接起来</h1><p id="8bdf" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">创建一个向HTML文件发送数据的中间文件，我称之为<code class="fe na nb nc nd b">app.py</code>。导入<code class="fe na nb nc nd b">spreadsheet.py</code>并将<code class="fe na nb nc nd b">getData()</code>函数返回的值赋给一个变量。将变量和HTML一起传递给<code class="fe na nb nc nd b">render_template()</code>函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="dae4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每次做出更改时，<code class="fe na nb nc nd b">if block</code>中的代码会自动重新加载应用程序的内容。</p><p id="6be9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在使用命令<code class="fe na nb nc nd b">python app.py</code>从命令行运行应用程序(确保您已经激活了虚拟环境)。如果一切顺利，你的应用应该已经在本地主机<code class="fe na nb nc nd b"><a class="ae lu" href="http://127.0.0.1:5000" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000</a>/</code>上运行了，我相信它看起来很漂亮！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f98f" class="ns md it bd me nt nu nv mh nw nx ny mk jz nz ka mn kc oa kd mq kf ob kg mt oc bi translated">使用Heroku部署应用程序</h1><p id="c300" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">使用Heroku需要安装Git:</p><ol class=""><li id="594a" class="ne nf it la b lb lc le lf lh ng ll nh lp ni lt nj nk nl nm bi translated">从<a class="ae lu" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">这里</a>下载Heroku CLI，并遵循安装步骤。</li><li id="eec6" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">打开您的命令提示符(建议使用Git Bash)并使用<code class="fe na nb nc nd b">Heroku --version</code>检查Heroku是否已安装。</li><li id="1898" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">在Heroku网站<a class="ae lu" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">这里</a>创建一个免费账户。</li><li id="c687" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">一旦你设置了你的账户，通过输入<code class="fe na nb nc nd b">Heroku login -i</code>使用shell登录并输入你的凭证。</li><li id="b1eb" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">我们将使用<code class="fe na nb nc nd b"><a class="ae lu" href="https://gunicorn.org/" rel="noopener ugc nofollow" target="_blank">gunicorn</a></code>来部署我们的应用程序，因为它相对较快，可以同时处理多个请求。使用命令<code class="fe na nb nc nd b">pip install gunicorn</code>安装它。</li><li id="b6ba" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">通过键入<code class="fe na nb nc nd b">pip freeze &gt; requirements.txt</code>，创建一个<code class="fe na nb nc nd b">requirements.txt</code>文件，该文件通知Heroku我们的应用程序的依赖关系。</li><li id="514c" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">由于我的愚蠢，我面对了如此多的错误。我冻结了需求文件，没有激活虚拟环境。<em class="oe">始终</em>确保虚拟环境启用时你正在工作。</li><li id="9f91" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">在根目录下创建一个新文件并输入<code class="fe na nb nc nd b">web: gunicorn --bind 0.0.0.0:$PORT app:app</code>。命名为<code class="fe na nb nc nd b">Procfile</code>(注意:不要使用任何扩展)。一个<code class="fe na nb nc nd b">Procfile</code>通知Heroku应用程序在启动时将运行什么命令。</li><li id="20ee" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">在<code class="fe na nb nc nd b">app:app</code>中，第一个<code class="fe na nb nc nd b">app</code>是指文件名(例如:<code class="fe na nb nc nd b">app.py</code>)，第二个<code class="fe na nb nc nd b">app</code>是指<code class="fe na nb nc nd b">app = Flask(__name__)</code>。要了解后一个应用程序的更多信息，请查看此处的<a class="ae lu" href="https://teamtreehouse.com/community/can-someone-help-me-understand-flaskname-a-little-better" rel="noopener ugc nofollow" target="_blank"/>(我搞砸了这个应用程序，因为我不知道其中的区别)。</li><li id="2851" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">我有一个<code class="fe na nb nc nd b">H14 error: no web processes running</code>，但是我通过运行这个命令去掉了它:<code class="fe na nb nc nd b">heroku ps:scale web=1</code>。这通知Heroku我们没有运行任何web dynos。如果你没有得到这个，很好——继续。</li><li id="dc84" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">现在使用<code class="fe na nb nc nd b">git init</code>在工作目录中启动一个空的git存储库。</li><li id="e3a4" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">现在添加所有文件<code class="fe na nb nc nd b">git add .</code>并提交<code class="fe na nb nc nd b">git commit -m "Initial Commit"</code>。</li><li id="e669" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">使用<code class="fe na nb nc nd b">heroku create</code>在Heroku上创建一个新的应用程序，它会为您的应用程序和远程回购URL生成一个链接，然后键入<code class="fe na nb nc nd b">heroku open</code>在您的浏览器中打开该应用程序。</li><li id="29a9" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">使用<code class="fe na nb nc nd b">git remote add heroku 'repo-link-generated-on-heroku-create'</code>添加您的远程回购。</li><li id="d356" class="ne nf it la b lb nn le no lh np ll nq lp nr lt nj nk nl nm bi translated">现在推动你的改变，<code class="fe na nb nc nd b">git push heroku master</code></li></ol><p id="d6e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您的应用程序现在正在web上运行！</p><p id="3458" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://obscure-scrubland-21146.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">这个</a>是链接到矿上的。</p><p id="b462" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在我的GitHub repo上查看我的最终文件。</p><p id="2d80" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢你一路阅读到这里。如果你有任何问题、反馈或批评，请在评论区告诉我。祝你今天开心！玩的开心！</p></div></div>    
</body>
</html>