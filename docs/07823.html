<html>
<head>
<title>Building a Google Clone — Part 3: The Search Results Page</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建谷歌克隆—第3部分:搜索结果页面</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/building-a-google-clone-part-3-the-search-results-page-a40e25564cd8?source=collection_archive---------7-----------------------#2021-02-23">https://betterprogramming.pub/building-a-google-clone-part-3-the-search-results-page-a40e25564cd8?source=collection_archive---------7-----------------------#2021-02-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5b43" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建一个自定义挂钩，设置Google搜索API，并使用React创建搜索结果标题</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9e0c3bb1778455672b53438d65a20576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HNz9KIUuwj4FMREcxLF_YA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@nathanareboucas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Nathana rebou as</a>在<a class="ae ky" href="https://unsplash.com/s/photos/google?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</p></figure><p id="73d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你是想让你的开发者技能更上一层楼，还是想给你未来的雇主留下深刻印象？然后构建这个<a class="ae ky" href="https://clone-5ebs.web.app/" rel="noopener ugc nofollow" target="_blank">谷歌克隆</a>！</p><p id="f431" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你卡住了，不要担心！我将在每一节的结尾为您提供完整的代码。此外，在本教程的最后一期中，我将让您访问我的GitHub上的完整源代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ae35" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">第三部分</h1><p id="a35e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在本系列的<a class="ae ky" href="https://medium.com/better-programming/building-a-google-clone-part-2-the-search-component-945e705d3b87" rel="noopener">第2部分</a>中，我们构建了<code class="fe mz na nb nc b">&lt;Search/&gt;</code>组件的UI，添加了搜索功能，完成了主页，使<code class="fe mz na nb nc b">&lt;Search/&gt;</code>组件可重用，并使用React钩子和上下文API实现了全局状态管理。</p><p id="7a34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一部分，我们将设置<a class="ae ky" href="https://developers.google.com/custom-search/v1/introduction" rel="noopener ugc nofollow" target="_blank"> Google自定义API </a>并开始构建搜索结果页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/29ac8ddefcc326da3646680a44e81bf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvDCXJq38NgH6sb4YVnjcw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">搜索结果页面</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4e1b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">1.设置搜索结果页面</h1><ul class=""><li id="f333" class="ne nf it lb b lc mu lf mv li ng lm nh lq ni lu nj nk nl nm bi translated">在<strong class="lb iu"> </strong> <code class="fe mz na nb nc b">pages</code> <strong class="lb iu"> </strong>文件夹中，创建一个名为<code class="fe mz na nb nc b">SearchPage.js</code>的文件。</li><li id="1957" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">一旦你在文件中，输入<code class="fe mz na nb nc b">rfce</code>来使用ES7片段<em class="ns">中的<strong class="lb iu"> </strong>片段。</em></li><li id="6394" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">仍然在<code class="fe mz na nb nc b">pages</code>文件夹中，创建一个<code class="fe mz na nb nc b">SearchPage.css</code>文件，并将其导入到您的<code class="fe mz na nb nc b">SearchPage.js</code>组件中。</li><li id="6784" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">搜索结果页面将由两个不同的元素组成:标题和结果列表。用<code class="fe mz na nb nc b">searchPage__header</code>和<code class="fe mz na nb nc b">searchPage__results</code>的<code class="fe mz na nb nc b">className</code>制造两个<code class="fe mz na nb nc b">&lt;div&gt;</code>。</li><li id="1acf" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">为了检查我们是否可以访问来自数据层的数据，让我们呈现一个包含我们在数据层中推送的术语的<code class="fe mz na nb nc b">&lt;h1&gt;</code>。</li><li id="d7ac" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">至此，您的<code class="fe mz na nb nc b">SearchPage.js</code>文件应该如下所示:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><ul class=""><li id="8eaa" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">回到<code class="fe mz na nb nc b">App.js</code>文件，导入并渲染<code class="fe mz na nb nc b">SearchPage</code>组件。</li><li id="b072" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">为了测试这一点，试着在搜索栏中键入任何术语，然后按回车键。这会将您重定向到搜索页面，该术语将出现在屏幕上。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2400370a2d437835f8f96b214d8d8cc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*-djw3xp9T1g4krVuGytTJA.gif"/></div></figure><p id="131a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在完成搜索结果页面之前，我们必须设置<a class="ae ky" href="https://developers.google.com/custom-search/v1/overview" rel="noopener ugc nofollow" target="_blank"> Google搜索API </a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0745" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">2.设置Google搜索API</h1><ul class=""><li id="6a93" class="ne nf it lb b lc mu lf mv li ng lm nh lq ni lu nj nk nl nm bi translated">导航到<a class="ae ky" href="https://developers.google.com/custom-search/v1/overview" rel="noopener ugc nofollow" target="_blank">自定义搜索JSON API </a>。</li><li id="63d1" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">寻找“API密钥”，点击<em class="ns"> </em>“获取密钥”</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/aa406f2ba36fb42157d01d1a92202155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZIpA1G2gD07KnpFWj9HkVw.png"/></div></div></figure><ul class=""><li id="3af0" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">创建一个新项目并同意使用条款。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/05f1b1aa4747553fe27c017cfc048c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NREImQ1uHbv-lFEFn366Yg.png"/></div></div></figure><ul class=""><li id="a5bc" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">创建一个名为<code class="fe mz na nb nc b">keys.js</code>的文件，将您的API密匙存储在名为<code class="fe mz na nb nc b">API_KEY</code>的<code class="fe mz na nb nc b">const</code>中，然后导出它。</li><li id="6957" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">您的<code class="fe mz na nb nc b">keys.js</code>文件应该是这样的:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><ul class=""><li id="78ab" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">现在，导航到<a class="ae ky" href="https://cse.google.com/cse/create/new" rel="noopener ugc nofollow" target="_blank">谷歌的可编程搜索</a>。</li><li id="cf1d" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">输入“www.google.com”并点击“创建”</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/ca1275f6af9cf8ecdf46799d31d4b280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_aj7E6JZy3fvbQmi-byXg.png"/></div></div></figure><ul class=""><li id="83ce" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">在左侧栏中，点击“编辑搜索引擎”，然后点击“设置”</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/63a97f349a25251470ad78f64f920edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aoRUof-PTC0bmquk9bA82w.png"/></div></div></figure><ul class=""><li id="162a" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">最后，点击<strong class="lb iu">“</strong>全网搜索”，复制搜索引擎ID。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/9b7e3db70ab562db4673b778e11024a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yiNKJQee5lJul-egGvgI1w.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/305736e8c6333cfce771b08757658c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVE0FpiJT2BpNjRStg5kOQ.png"/></div></div></figure><ul class=""><li id="a5df" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">创建一个名为<code class="fe mz na nb nc b">useGoogleSearch.js</code>的文件，并粘贴以下代码:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><ul class=""><li id="eb72" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">用您之前获得的搜索ID替换字符串<code class="fe mz na nb nc b">“search engine ID”</code>。</li></ul><p id="41b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个自定义挂钩，将允许您从谷歌获得搜索结果数据。</p><ul class=""><li id="9896" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">为了测试这一点，返回到<code class="fe mz na nb nc b">SearchPage.js</code>文件，导入<code class="fe mz na nb nc b">useGoogleSearch</code>，并将这行代码添加到<code class="fe mz na nb nc b">SearchPage</code>函数中:</li></ul><pre class="kj kk kl km gt of nc og oh aw oi bi"><span id="d6b3" class="oj md it nc b gy ok ol l om on">const {data} = useGoogleSearch(term);<br/>console.log(data);</span></pre><ul class=""><li id="5926" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">在搜索栏中键入任何术语，然后按回车键。这将把您重定向到搜索页面，并在控制台上打印一个响应。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/760d562ccf8440ca79060e89bbad1c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jwt_tI2fw1dohivUjAL00A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Google自定义搜索API响应</p></figure><p id="b721" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当用户在搜索栏中键入一些内容并点击enter时，搜索词被推入数据层，由<code class="fe mz na nb nc b">useStateValue</code>钩子拉出，并在<code class="fe mz na nb nc b">useGoogleSearch</code>定制钩子中传递。这会调用Google自定义搜索API，并将数据作为对象返回。该对象是打印在控制台上的响应。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8d66" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">3.完成搜索结果标题</h1><ul class=""><li id="1eca" class="ne nf it lb b lc mu lf mv li ng lm nh lq ni lu nj nk nl nm bi translated">回到<code class="fe mz na nb nc b">SearchPage.js</code>文件。在带有<code class="fe mz na nb nc b">SearchPage__header</code>的<code class="fe mz na nb nc b">className</code>的<code class="fe mz na nb nc b">&lt;div&gt;</code>中，增加一个<code class="fe mz na nb nc b">&lt;Link&gt;</code>组件。然后在里面加上谷歌标志。</li><li id="df4d" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">在<code class="fe mz na nb nc b">&lt;Link&gt;</code>组件之后，用<code class="fe mz na nb nc b">SearchPage__headerBody</code>的<code class="fe mz na nb nc b">className</code>创建另一个<code class="fe mz na nb nc b">&lt;div&gt;</code>。这将包含带有<code class="fe mz na nb nc b">hideButtons</code>支柱的<code class="fe mz na nb nc b">&lt;Search/&gt;</code>组件<strong class="lb iu"> </strong>。</li><li id="e05e" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">要显示搜索栏下的项目，请从Material-UI导入并渲染以下图标:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><ul class=""><li id="f1e4" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">至此，您的<code class="fe mz na nb nc b">SearchPage.js</code>文件应该如下所示:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><ul class=""><li id="e783" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu nj nk nl nm bi translated">现在，转到<code class="fe mz na nb nc b">SearchPage.css</code>文件并添加以下样式:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="abae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干得好。搜索结果标题已完成！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/3d6abd847dc8288b2ed9d4bc37332c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fI8ufMHTdreYV5MPMdwqhQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">搜索结果标题</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/0df489a943c24a2e8b52bedd17f26a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*BotAIpotlmG2qqgE6wWfUQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">眼睛盯着奖品:这将是最终结果。</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d572" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="e0f3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这部分到此为止。让我们总结一下到目前为止我们所做的工作:</p><ol class=""><li id="a4b9" class="ne nf it lb b lc ld lf lg li nv lm nw lq nx lu oq nk nl nm bi translated">设置搜索结果页面。</li><li id="7f81" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oq nk nl nm bi translated">设置Google搜索API并创建了<code class="fe mz na nb nc b">useGoogleSearch</code>自定义钩子。</li><li id="23a8" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu oq nk nl nm bi translated">已完成搜索结果标题。</li></ol><p id="3f9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一篇也是最后一篇文章中，我们将完成<strong class="lb iu"> </strong>搜索结果页面<strong class="lb iu"> </strong>并使用<strong class="lb iu"> </strong> Firebase部署我们的应用程序。<strong class="lb iu"> </strong>敬请期待！</p></div></div>    
</body>
</html>