<html>
<head>
<title>Search and Filter Data in React Using Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用钩子在React中搜索和过滤数据</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/search-and-filter-data-in-react-using-hooks-de9238e54423?source=collection_archive---------2-----------------------#2021-10-29">https://betterprogramming.pub/search-and-filter-data-in-react-using-hooks-de9238e54423?source=collection_archive---------2-----------------------#2021-10-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0b54" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用React钩子来搜索和过滤数据</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e0f7f7cf38ad81231101ca01952af324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PZUzIxORBwTDF2nY"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图德·巴休在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1902" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">搜索和过滤数据是所有应用程序中的一个常见功能。用户应该能够在使用应用程序时搜索特定的东西。</p><p id="3316" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就我而言，最近我不得不在一个简单的React应用程序中实现这个特性，我想与您分享我的解决方案。</p><h1 id="78ca" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">语境</h1><p id="03a8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在继续之前，我想提供一些背景。让我们假设您有一个简单的电话簿，其中存储了人们及其电话号码。</p><p id="cb58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的对象数组代表电话簿:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="1a5b" class="mu lt iq mq b gy mv mw l mx my">const people = [<br/>  { name: 'Alan Turing', number: '040-123456', id: 1 },<br/>  { name: 'Ada Lovelace', number: '39-44-5323523', id: 2 },<br/>  { name: 'Barbara Liskov', number: '12-43-234345', id: 3 },<br/>  { name: 'Mary Poppendieck', number: '39-23-6423122', id: 4 }<br/>]</span></pre><p id="400e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，用户应该能够通过他们的名字来搜索和筛选人。弄清楚这一点后，让我们开始构建解决方案吧！</p><h1 id="4b68" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">搜索和过滤数据</h1><p id="32b9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于本文，您可以使用以下命令创建一个标准的React应用程序:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="86c4" class="mu lt iq mq b gy mv mw l mx my">npx create-react-app phonebook</span></pre><p id="4322" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你只需要<code class="fe mz na nb mq b">App.js</code>和<code class="fe mz na nb mq b">index.js</code>，那么你就可以移除CSS和测试文件等其他文件。</p><h1 id="6955" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">应用程序框架</h1><p id="5cad" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">让我们从创建应用程序的框架开始。打开<code class="fe mz na nb mq b">App.js</code>文件，编写以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="4c45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此时，应用程序将在页面上显示三件事情:</p><ul class=""><li id="f6f6" class="ne nf iq ky b kz la lc ld lf ng lj nh ln ni lr nj nk nl nm bi translated">标题“电话簿”</li><li id="2ea3" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">输入字段</li><li id="5866" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">标题“数字”</li></ul><p id="76b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管输入字段已经存在，但它还没有做任何事情。</p><h1 id="ff05" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">添加状态</h1><p id="d419" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下一步是向应用程序添加状态。我们通过使用状态挂钩— <code class="fe mz na nb mq b">useState</code>向React应用程序添加状态。</p><p id="1c7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mz na nb mq b">App.js</code>文件中编写以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d03f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">增加了两项内容:</p><ol class=""><li id="1b80" class="ne nf iq ky b kz la lc ld lf ng lj nh ln ni lr ns nk nl nm bi translated">您在组件顶部导入了人员数组。对于这个应用程序，您将数据作为数组存储在组件本身中，因为它是一个简单的应用程序。</li><li id="7b07" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr ns nk nl nm bi translated"><code class="fe mz na nb mq b">search</code>变量被赋予一个空字符串作为初始状态。您将使用函数<code class="fe mz na nb mq b">setNewSearch</code>来修改变量<code class="fe mz na nb mq b">search</code>的状态。</li></ol><p id="e596" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是处理搜索功能。</p><h1 id="8f28" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">处理搜索</h1><p id="4a61" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当用户在输入字段中输入内容时，<code class="fe mz na nb mq b">search</code>常量的状态也应该被更新。</p><p id="8a16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果用户在输入字段中键入“Alan”，那么<code class="fe mz na nb mq b">search</code>状态也应该是“Alan”。</p><p id="6220" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在声明状态变量后，编写以下函数:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3b71" class="mu lt iq mq b gy mv mw l mx my">const handleSearchChange = (e) =&gt; {<br/>    setNewSearch(e.target.value);<br/>};</span></pre><p id="1071" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个<code class="fe mz na nb mq b">handleSearchChange</code>函数在每次输入字段改变时被调用，它将来自输入字段的数据设置为<code class="fe mz na nb mq b">search</code>状态。</p><p id="4c63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，更新input元素，如下所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b6b0" class="mu lt iq mq b gy mv mw l mx my">&lt;input type="text" value={search} onChange={handleSearchChange} /&gt;</span></pre><p id="595b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您向输入的<code class="fe mz na nb mq b">onchange</code>属性注册了一个事件处理程序。一旦输入值改变，函数<code class="fe mz na nb mq b">handleSearchChange</code>就会触发。代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="fc6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是使用<code class="fe mz na nb mq b">search</code>来过滤人员数组，只显示与搜索数据匹配的人员。</p><h1 id="df5e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">过滤数据</h1><p id="43d9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">过滤的逻辑如下:</p><ul class=""><li id="e92b" class="ne nf iq ky b kz la lc ld lf ng lj nh ln ni lr nj nk nl nm bi translated">如果用户没有搜索任何内容，则显示所有人</li><li id="2bd2" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">如果用户输入了数据，则只返回那些姓名包含输入数据的人</li></ul><p id="1bfe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mz na nb mq b">handleSearchChange</code>函数后编写以下代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7d56" class="mu lt iq mq b gy mv mw l mx my">const filtered = !search<br/>    ? people<br/>    : people.filter((person) =&gt;<br/>        person.name.toLowerCase().includes(search.toLowerCase())<br/>      );</span></pre><p id="a2f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，您使用条件三元运算符来决定返回什么。<code class="fe mz na nb mq b">!search</code>如果输入字段为空，返回“真”，否则返回“假”。</p><p id="e2f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果用户没有在搜索框中键入任何内容，该函数将返回所有人。另一方面，如果用户搜索一个人，该函数只返回其姓名包含搜索词的人。</p><p id="f5d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果您在搜索框中键入“lac”，函数<code class="fe mz na nb mq b">filtered</code>只返回“阿达·洛芙莱斯”，因为这是唯一一个姓名包含搜索词“lac”的人</p><p id="ae24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb mq b">filter</code>方法创建一个新的数组，其中包含所有通过测试的元素。在这种情况下，测试是<code class="fe mz na nb mq b">person.name.toLowerCase().includes(search.toLowerCase())</code>。</p><p id="874a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止的代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="fbff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步也是最后一步是在网页上显示数据。</p><h1 id="74ae" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">显示数据</h1><p id="c098" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了在网页上显示数据，您将映射到<code class="fe mz na nb mq b">filtered</code>数组并显示适当的人员列表。</p><p id="75b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“数字”标题后编写以下代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7c5f" class="mu lt iq mq b gy mv mw l mx my">{filtered.map((person) =&gt; {<br/>    return (<br/>        &lt;p key={person.id}&gt;<br/>            {person.name} - {person.number}<br/>        &lt;/p&gt;<br/>    );<br/>})}</span></pre><p id="656f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb mq b">App.js</code>文件的完整代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b7d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你完了！如果您运行该应用程序，您应该能够在电话簿中搜索特定的人。</p><p id="d103" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该应用程序位于以下URL : <a class="ae kv" href="https://omq93.csb.app/" rel="noopener ugc nofollow" target="_blank">电话簿搜索和过滤</a>。</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="4424" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oa">本文原载</em> <a class="ae kv" href="https://catalins.tech/search-and-filter-data-in-react-using-hooks" rel="noopener ugc nofollow" target="_blank"> <em class="oa">此处</em> </a> <em class="oa">。</em></p></div></div>    
</body>
</html>