<html>
<head>
<title>Learning JavaScript: Arrow Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习JavaScript:箭头函数</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/learning-javascript-arrow-functions-36cce13351c2?source=collection_archive---------18-----------------------#2019-11-18">https://betterprogramming.pub/learning-javascript-arrow-functions-36cce13351c2?source=collection_archive---------18-----------------------#2019-11-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a23" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用粗箭头函数浓缩你的函数定义</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c8e5e84a12de4608b5f3ad5716b6913b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yOMBeQmTAq3tBGFvauIEQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@bdchu614?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">布伦丹·丘奇</a>在<a class="ae ky" href="https://unsplash.com/s/photos/arrow?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="df30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你涉足JavaScript已经有一段时间了，你可能会在一些代码中遇到粗箭头符号<code class="fe lv lw lx ly b">=&gt;</code>,并想知道它是什么意思。</p><p id="00ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仔细看一些例子，不难发现有输入、语句和输出。考虑到它被称为箭头<em class="lz">函数</em>，你可以进行逻辑跳跃。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="cdc5" class="me mf it ly b gy mg mh l mi mj">const convertString = (s) =&gt; {<br/>   return s.replace(" ","_").toLowerCase();<br/>}</span><span id="9a77" class="me mf it ly b gy mk mh l mi mj">console.log(convertString("Hello World"));<br/>// prints hello_world</span><span id="49f4" class="me mf it ly b gy mk mh l mi mj">// convertString is the name<br/>// (s)is the parameter list<br/>// the curly braces define the body of the function</span></pre><p id="160d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是箭头函数实际上是如何工作的呢？它们是如何产生的？为什么要改变正常的函数定义？最重要的是，我如何开始使用它们？</p><p id="fd9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了回答这些问题，让我们不要像对JavaScript一无所知一样谈论它们，而是像我们已经有了想要转换成最新最好的ES6的代码一样。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="67f3" class="ms mf it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">什么是箭头函数？</h1><p id="dc45" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">箭头函数是匿名函数的精简表示，匿名函数是没有独立声明的函数。</p><p id="0988" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经养成了定义函数的习惯，但是如果您像我一样，并且您不是日常工作中的开发人员，您可能不会意识到在编写有组织且简洁的代码的同时还有效率可言。</p><p id="8818" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我们一起来学习吧！我们的下一步是理解匿名函数是如何工作的，然后我们将着手把我们的传统函数转换成匿名函数，最后转换成箭头符号。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="bf61" class="ms mf it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">匿名函数是如何工作的？</h1><p id="4ff3" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">当一个方法接受一个函数作为参数，并且该函数不打算重复使用时，匿名函数是最常用的。</p><p id="d2be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，最有效和最易读的方法是内联定义函数，并且不命名，因为它可以在其后被丢弃。在接受函数作为参数的方法中，这种情况经常发生。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="f2f5" class="me mf it ly b gy mg mh l mi mj">// the map method performs a function on each element in the array</span><span id="81a8" class="me mf it ly b gy mk mh l mi mj">const numbers = [1,2,3,4]<br/>const squares = numbers.map((n) =&gt; {<br/>   return n ** 2;<br/>});</span><span id="23f6" class="me mf it ly b gy mk mh l mi mj">console.log(squares); // 1,4,9,16</span></pre><p id="41d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果此代码导致眯眼、重复或抓头，以下是传统定义函数的相同示例:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="deaf" class="me mf it ly b gy mg mh l mi mj">function calcSquare(n) {<br/>   return n ** 2;<br/>}</span><span id="c8fc" class="me mf it ly b gy mk mh l mi mj">// the map method performs a function on each element in the array</span><span id="026b" class="me mf it ly b gy mk mh l mi mj">const numbers = [1,2,3,4]<br/>const squares = numbers.map(calcSquare);</span><span id="4e6d" class="me mf it ly b gy mk mh l mi mj">console.log(squares); // 1,4,9,16</span></pre><p id="f0b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，如果传统功能仍然有效，为什么要改变呢？</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="d4b7" class="ms mf it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">箭头函数语法更简洁</h1><p id="ab36" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">用这种语法编写函数需要更少的开销(键入文字字符),并且适应了JS中的函数不再整齐地写在每个脚本的顶部并在下面调用的现实。</p><p id="0c77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了不赞成使用<code class="fe lv lw lx ly b">function</code>关键字之外，arrow函数还有其他语法效率，这些效率一开始可能会令人困惑，但一旦解释清楚，就会变得非常酷。</p><p id="6ce9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是语法变化的列表，供您参考:</p><h2 id="ab58" class="me mf it bd mt no np dn mx nq nr dp nb li ns nt nd lm nu nv nf lq nw nx nh ny bi translated"><strong class="ak">无功能关键字</strong></h2><p id="a904" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">如果你的代码块有输入、语句和(大概)输出，那么它听起来很像一个函数。</p><p id="c000" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有必要进一步说明发生了什么。上述情况出现的唯一其他时间是在类方法中，但那是在一个类中，所以有明显的区别。</p><h2 id="39ec" class="me mf it bd mt no np dn mx nq nr dp nb li ns nt nd lm nu nv nf lq nw nx nh ny bi translated"><strong class="ak">没有函数名，除非你想要它</strong></h2><p id="81c5" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">匿名函数和命名函数有什么区别？嗯，就是这个名字。</p><p id="3b73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将传统函数吸收到arrow语法中，减少必要的编码约定，而不是将arrow语法和传统语法混为一谈。只需将匿名函数分配给一个变量，该变量的名称将用于调用该函数。</p><h2 id="af4d" class="me mf it bd mt no np dn mx nq nr dp nb li ns nt nd lm nu nv nf lq nw nx nh ny bi translated"><strong class="ak">跳过单个参数的括号</strong></h2><p id="bd85" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">如果你的函数只有一个参数，那么你可以选择跳过括号。这进一步压缩了代码，可能使新手阅读起来更困难，但是一旦理解了就更容易编写和浏览。</p><h2 id="dea6" class="me mf it bd mt no np dn mx nq nr dp nb li ns nt nd lm nu nv nf lq nw nx nh ny bi translated"><strong class="ak">跳过花括号，返回一条语句</strong></h2><p id="ece1" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">如果函数体只有一条语句，那么你可以跳过花括号，甚至是返回语句。</p><p id="affc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像省略单个参数的圆括号一样，这一开始可能会令人难以置信地精简，但是一旦精通，就很难进行语法输入和阅读了。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="c6a8" class="ms mf it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">如何开始使用箭头功能？</h1><p id="e977" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">如果你是一个全新的JavaScript初学者，那么你只需使用箭头符号来定义函数。落入这个阵营，如果你正在挣扎，那么你需要问的真正问题是:“什么是功能，我如何使用它们？”</p><p id="7546" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你以前写过JS，并试图转换你的代码实践，那么这就是一个新旧转换的问题。</p><p id="755d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过使用之前的<code class="fe lv lw lx ly b">calcSquare()</code>函数并通过箭头符号对其进行优化来演示这种转换。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="3edc" class="me mf it ly b gy mg mh l mi mj">function calcSquare(n) {<br/>   let result = n ** 2;<br/>   return result;<br/>}</span><span id="ae55" class="me mf it ly b gy mk mh l mi mj">let numbers = [1,2,3,4];<br/>console.log(numbers.map(calcSquare));</span></pre><p id="78ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我们的函数只使用了一次来计算数组中每个值的平方。我们将移除独立定义，并在<code class="fe lv lw lx ly b">.map()</code>方法中创建一个匿名函数。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="d410" class="me mf it ly b gy mg mh l mi mj">let numbers = [1,2,3,4];<br/>console.log(numbers.map((n) =&gt; {<br/>   let result = n ** 2;<br/>   return result;<br/>}));</span></pre><p id="ad90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果有两个数据集，意味着函数必须多次使用，该怎么办呢？我们将从<code class="fe lv lw lx ly b">.map()</code>方法中取出函数；然而，这一次，它将用箭头符号来定义。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="1db7" class="me mf it ly b gy mg mh l mi mj">const calcSquares = (n) =&gt; {<br/>   result = n ** 2;<br/>   return result;<br/>};</span><span id="44bf" class="me mf it ly b gy mk mh l mi mj">let numbers = [1,2,3,4];<br/>console.log(numbers.map(calcSquares));</span><span id="9482" class="me mf it ly b gy mk mh l mi mj">let numbers2 = [5,6,7,8];<br/>console.log(numbers2.map(calcSquares));</span></pre><p id="56d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这一点上，我们已经完全升级到了箭头符号，但是还没有到结束的时候。我们可以去掉括号，因为我们的函数只有一个参数。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="1bdd" class="me mf it ly b gy mg mh l mi mj">const calcSquares = n =&gt; {<br/>   result = n ** 2;<br/>   return result;<br/>}</span></pre><p id="9b30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，由于我们可以通过直接返回求值结果将主体压缩成一条语句，因此我们可以去掉花括号和<code class="fe lv lw lx ly b">return</code>关键字。</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="5911" class="me mf it ly b gy mg mh l mi mj">const calcSquares = n =&gt; n ** 2;</span></pre><p id="3f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">暂停一下，看看我们压缩了多少函数。哇…</p><p id="3756" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经将一个现有的函数转换为箭头符号，记住样板文件，以此作为所有未来函数的起点:</p><pre class="kj kk kl km gt ma ly mb mc aw md bi"><span id="4ebf" class="me mf it ly b gy mg mh l mi mj">const functionName = () =&gt; {};</span></pre><ul class=""><li id="a2b2" class="nz oa it lb b lc ld lf lg li ob lm oc lq od lu oe of og oh bi translated">如果你的函数是匿名的，跳过变量赋值。</li><li id="4a0d" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated">如果您的函数只有一个参数，请删除括号。</li><li id="446d" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated">如果你的函数体中只有一条语句，去掉花括号，不要用<code class="fe lv lw lx ly b">return</code>关键字。</li></ul></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="ea69" class="ms mf it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="253e" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">最终，我认为作为一个全新的学习者，箭头函数可能更容易学习，但是对于我们这些在思想上改写了以前的编码惯例的人来说，请记住箭头符号是一种简化的、精简的、优化的JavaScript函数定义方法。</p></div></div>    
</body>
</html>