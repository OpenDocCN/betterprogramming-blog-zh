<html>
<head>
<title>Advanced Sorting in Python Using Lambdas and Custom Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中使用Lambdas和自定义函数的高级排序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/advanced-sorting-in-python-using-lambdas-and-custom-functions-410b5780fb07?source=collection_archive---------5-----------------------#2020-02-24">https://betterprogramming.pub/advanced-sorting-in-python-using-lambdas-and-custom-functions-410b5780fb07?source=collection_archive---------5-----------------------#2020-02-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="73ec" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对非基本数据类型(如int、str)的元素列表进行排序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bf80c4bfbfc1d49d8d56e3617bde0c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e1vpS7NWNA9nCwDIYIzG_w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马丁·桑切斯在<a class="ae ky" href="https://unsplash.com/s/photos/small-to-big?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="7e8f" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">基本排序</h1><p id="918f" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">说到排序，使用最多的Python函数是<code class="fe mu mv mw mx b">sorted()</code>和<code class="fe mu mv mw mx b">sort()</code>。</p><p id="3937" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">尽管在用法、内存使用和操作速度上有一些不同，正如在以前的<a class="ae ky" href="https://blog.usejournal.com/list-sort-vs-sorted-list-aab92c00e17" rel="noopener ugc nofollow" target="_blank">媒体文章</a>中所讨论的，这两个函数都可以用来对<code class="fe mu mv mw mx b">list</code>进行排序。下面是一个简单的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基本排序示例</p></figure><p id="979b" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">在上面的例子中，对于那些不太熟悉<code class="fe mu mv mw mx b">sorted()</code>和<code class="fe mu mv mw mx b">sort()</code>功能的人来说，有一些事情需要强调。</p><ul class=""><li id="db02" class="nf ng it ma b mb my me mz mh nh ml ni mp nj mt nk nl nm nn bi translated"><code class="fe mu mv mw mx b">sort()</code>函数实际上是<code class="fe mu mv mw mx b">list</code>数据类型的实例方法，所以用法是<code class="fe mu mv mw mx b">list.sort()</code>。</li><li id="9964" class="nf ng it ma b mb no me np mh nq ml nr mp ns mt nk nl nm nn bi translated"><code class="fe mu mv mw mx b">sort()</code>的分类操作到位并返回<code class="fe mu mv mw mx b">None</code>。因此，如果您通过运行<code class="fe mu mv mw mx b">type(numbers.sort())</code>来检查类型，输出将是<code class="fe mu mv mw mx b">NoneType</code>。</li><li id="156e" class="nf ng it ma b mb no me np mh nq ml nr mp ns mt nk nl nm nn bi translated">与<code class="fe mu mv mw mx b">sort()</code>函数不同，<code class="fe mu mv mw mx b">sorted()</code>函数具有更好的灵活性，因为它允许参数是一个<code class="fe mu mv mw mx b">list</code>或任何其他<code class="fe mu mv mw mx b">iterable</code>对象，就像示例中所示的<code class="fe mu mv mw mx b">tuple</code>。</li><li id="814e" class="nf ng it ma b mb no me np mh nq ml nr mp ns mt nk nl nm nn bi translated">对于<code class="fe mu mv mw mx b">sorted()</code>函数，返回值是一个<code class="fe mu mv mw mx b">list</code>，即使我们传入一个像<code class="fe mu mv mw mx b">tuple</code>这样的非列表数据。</li><li id="ac7d" class="nf ng it ma b mb no me np mh nq ml nr mp ns mt nk nl nm nn bi translated">默认的排序顺序是升序。如果我们指定<code class="fe mu mv mw mx b">reverse=True</code>，排序顺序将是降序。</li></ul><p id="c931" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">从本质上来说，<code class="fe mu mv mw mx b">sorted()</code>和<code class="fe mu mv mw mx b">sort()</code>函数在列表排序时是可以比较的，其中<code class="fe mu mv mw mx b">sorted()</code>函数具有更好的灵活性。因此，在下面的演示中，我们将只使用<code class="fe mu mv mw mx b">sorted()</code>函数。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b095" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">按关键字排序</h1><p id="50bd" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">除了对<code class="fe mu mv mw mx b">int</code>和<code class="fe mu mv mw mx b">str</code>的基本排序操作之外，如果我们想要对字典的<code class="fe mu mv mw mx b">list</code>进行排序，比如下面的<code class="fe mu mv mw mx b">activities</code>，我们还能做什么呢？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">词典列表</p></figure><p id="eebd" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">如果我们对变量<code class="fe mu mv mw mx b">activities</code>进行排序，将会出现以下错误，因为解释器不知道如何比较<code class="fe mu mv mw mx b">dict</code>的实例。那我们该怎么办？</p><pre class="kj kk kl km gt nt mx nu nv aw nw bi"><span id="f471" class="nx lh it mx b gy ny nz l oa ob">TypeError: ‘&lt;’ not supported between instances of ‘dict’ and ‘dict’</span></pre><p id="7e4a" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">兰姆达斯来救援了！回想一下，Python中的lambda只是一个匿名函数，它有一个或多个参数，但只有一个表达式。</p><p id="8c87" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">在下面的例子中，我们创建了一个lambda并将其赋给变量<code class="fe mu mv mw mx b">add_ten</code>。由于lambda是一个函数，赋值变量<code class="fe mu mv mw mx b">add_ten</code>也是一个函数，因此，我们用括号将其称为常规函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9fff" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">我们对lambda如何工作有了一些基本的概念，现在我们可以看看如何使用它来对字典进行排序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对词典列表进行排序</p></figure><p id="1d33" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">如上例所示，我们创建了一个lambda，并将其作为<code class="fe mu mv mw mx b">key</code>参数传递。现在，解释器不抱怨<code class="fe mu mv mw mx b">dict</code> s的<code class="fe mu mv mw mx b">list</code>不能排序了。万岁！</p><p id="5844" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">实际上，如果我们想让<code class="fe mu mv mw mx b">activities</code>按多个键排序，我们可以写一个稍微复杂一点的lambda。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按日期和活动排序</p></figure><p id="40ce" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">如上图所示，列表现在按<code class="fe mu mv mw mx b">day</code>和<code class="fe mu mv mw mx b">activity</code>排序。使用如下所示的<code class="fe mu mv mw mx b">itemgetter()</code>功能可以达到相同的效果。</p><p id="6f6f" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">实际上，<code class="fe mu mv mw mx b">operator</code>模块有额外的操作，比如<code class="fe mu mv mw mx b">attrgetter()</code>，在排序自定义对象时很方便。</p><pre class="kj kk kl km gt nt mx nu nv aw nw bi"><span id="cdd9" class="nx lh it mx b gy ny nz l oa ob">from operator import itemgetter</span><span id="1794" class="nx lh it mx b gy oc nz l oa ob">sorted_activities = sorted(activities, key=itemgetter('day', 'activity'), reverse=True)</span></pre><p id="60b9" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">从上面的例子中，您可能已经注意到，对于<code class="fe mu mv mw mx b">key</code>参数，我们可以简单地传入一个函数，这为我们定制排序提供了更多的灵活性。这里有一个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按自定义函数排序</p></figure><p id="582e" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">我们有一个名为<code class="fe mu mv mw mx b">activity_sorting</code>的函数，它被用作<code class="fe mu mv mw mx b">sorted()</code>函数的<code class="fe mu mv mw mx b">key</code>。从输出中，您可以看出<code class="fe mu mv mw mx b">activities</code>变量现在被<code class="fe mu mv mw mx b">activity</code>排序了。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="4623" class="lg lh it bd li lj lk ll lm ln lo lp lq jz lr ka ls kc lt kd lu kf lv kg lw lx bi translated">结论</h1><p id="0bd7" class="pw-post-body-paragraph ly lz it ma b mb mc ju md me mf jx mg mh mi mj mk ml mm mn mo mp mq mr ms mt im bi translated">本教程介绍了如何使用lambdas和自定义函数对Python中的字典列表进行排序。这些方法也可以应用于自定义对象列表。</p><p id="e53f" class="pw-post-body-paragraph ly lz it ma b mb my ju md me mz jx mg mh na mj mk ml nb mn mo mp nc mr ms mt im bi translated">如果排序<code class="fe mu mv mw mx b">key</code>只涉及一个表达式，你可能想考虑使用lambdas，而不用在<code class="fe mu mv mw mx b">sorted()</code>或<code class="fe mu mv mw mx b">sort()</code>函数之外编写一个完整的函数。</p></div></div>    
</body>
</html>