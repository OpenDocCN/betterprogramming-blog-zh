<html>
<head>
<title>How To Add Webviews to a Visual Studio Code Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向Visual Studio代码扩展添加Webviews</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/how-to-add-webviews-to-a-visual-studio-code-extension-69884706f056?source=collection_archive---------7-----------------------#2021-02-05">https://betterprogramming.pub/how-to-add-webviews-to-a-visual-studio-code-extension-69884706f056?source=collection_archive---------7-----------------------#2021-02-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5468" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在VS代码中显示定制的HTML、CSS和JS</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ed6d669559fa2bc927f9f13d5a11c76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2yekvip0YxnrkVrr3b0eGQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@divinetechygirl" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜·莫里洛</a>在<a class="ae ky" href="https://www.pexels.com/photo/person-looking-at-phone-and-at-macbook-pro-1181244/" rel="noopener ugc nofollow" target="_blank"> Pexels </a>上拍摄。</p></figure><p id="d27f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">奇怪的是网上没有足够的关于构建VS代码扩展的教程。我是一个总是依赖堆栈溢出和YouTube教程的人，所以我花了相当多的时间来弄清楚如何构建一个VS代码扩展来保存代码片段。</p><p id="2a14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我真正遇到的一件事是添加一个webview。用户希望看到他们保存在VS代码中的片段。我想树景会是最合适的。文档让你不敢使用<a class="ae ky" href="https://code.visualstudio.com/api/extension-guides/webview" rel="noopener ugc nofollow" target="_blank"> webview API </a>，警告它会降低应用程序的速度。但是树形视图效果不好。</p><p id="243d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我注意到一个朋友的VS代码扩展有webview，运行非常流畅(<a class="ae ky" href="https://marketplace.visualstudio.com/items?itemName=MetacodeInc.metacode" rel="noopener ugc nofollow" target="_blank">元代码</a>，有兴趣的话)。所以我冒了一次险，在我的扩展中添加了一个webview它运行得非常好。没有抱怨(还没有！)关于它让任何人的电脑变慢。它看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/ab70dc5f06cf7491284ce1b59413e773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dwZpGxAUQqQu88R6.png"/></div></div></figure><p id="64f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，事不宜迟，下面介绍如何将webview添加到VS代码扩展中。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="637e" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.注册命令以激活Webview</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="03da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您的<code class="fe mx my mz na b">package.json</code>文件中，添加一个命令来激活<code class="fe mx my mz na b">webview</code>功能。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="aaf0" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">2.添加代码以激活Webview</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb mw l"/></div></figure><p id="6948" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在您的<code class="fe mx my mz na b">extension.ts</code>(或<code class="fe mx my mz na b">extension.js</code>)文件中，添加以下代码和函数来打开一个webview。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="56cb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">3.打开网络视图</h1><p id="f696" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">这很简单。通过在命令面板中键入命令来打开webview。在本例中，这意味着键入并选择“打开webview”</p><p id="9e65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧，你的网络视图应该打开了！您也可以使用<code class="fe mx my mz na b">keybindings</code>功能将该命令绑定到键盘快捷键。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="62cb" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">4.将内部CSS和JavaScript文件链接到Webview(可选)</h1><p id="7d65" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">如果您想将内部CSS样式表或JavaScript文件链接到webview，您需要从扩展的上下文中获取这些文件的URI。</p><p id="c7d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe mx my mz na b">webview</code>命令中添加以下代码行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh mw l"/></div></figure><p id="40ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后像这样将它传递到<code class="fe mx my mz na b">getWebviewContent()</code>函数的HTML中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni mw l"/></div></figure><p id="05a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这是有帮助的！</p><p id="a370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看VS代码市场上的<a class="ae ky" href="https://marketplace.visualstudio.com/items?itemName=thiscodeworks.savecode" rel="noopener ugc nofollow" target="_blank">保存代码扩展</a>。</p><p id="e8d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nj">最初发表于</em><a class="ae ky" href="https://mishka.codes/webviews-in-vscode" rel="noopener ugc nofollow" target="_blank"><em class="nj">https://mishka . codes</em></a><em class="nj">。</em></p></div></div>    
</body>
</html>