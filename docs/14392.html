<html>
<head>
<title>Developing a QR Code Generator App in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python开发二维码生成器应用程序</h1>
<blockquote>原文：<a href="https://betterprogramming.pub/programming-a-qr-code-generator-app-in-python-91fa248bfe86?source=collection_archive---------0-----------------------#2022-12-08">https://betterprogramming.pub/programming-a-qr-code-generator-app-in-python-91fa248bfe86?source=collection_archive---------0-----------------------#2022-12-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ed7e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">带有自定义Tkinter和OpenCV</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/78a5b5d72b23fc1236ede55d40c97657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWtp24UTPtLeV0-eDNDBGg.png"/></div></div></figure><p id="abb7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我在第二年学习计算机工程时，我真的迷上了应用程序开发(特别是web应用程序),我尝试了不同语言的不同框架等等。</p><p id="a399" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在练习我的前端技能时，我用Tkinter开发了python中的QR码生成器/解码器应用程序，后来我用自定义Tkinter对其进行了改进，这是一个基于Tkinter的模块，用于开发Python应用程序的GUI。</p><p id="231a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像往常一样，第一步是导入我们将用来开发应用程序的库。</p><p id="64a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这个项目，我使用OpenCV (cv2)和QRcode作为条形码，使用<code class="fe ln lo lp lq b">tkinter</code>和custom <code class="fe ln lo lp lq b">tkinter</code>作为GUI，使用os模块来定位用户的下载文件夹。所使用的模块可通过以下线路安装:</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="9d01" class="lv lw iq lq b be lx ly l lz ma">pip install opencv-python<br/>pip install qrcode<br/>pip install tkinter<br/>pip install customtkinter</span></pre><p id="92b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦我们安装了它们，我们现在可以导入它们。从Tkinter我们将只导入图标的<code class="fe ln lo lp lq b">PhotoImage</code>和解码二维码时打开文件对话窗口的<code class="fe ln lo lp lq b">filedialog</code>。我们为GUI、T4和二维码导入自定义Tkinter，以处理和生成二维码:</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="16c7" class="lv lw iq lq b be lx ly l lz ma">from tkinter import PhotoImage, filedialog<br/>import customtkinter<br/>import qrcode<br/>import cv2<br/>import os</span></pre><p id="dab5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们已经有了自己的库，我们在任何项目(包括前端)中想要做的第一件事就是在屏幕上显示一个空白窗口。所以首先我们使用<code class="fe ln lo lp lq b">customtkinter.CTk</code>作为基类来定义我们的<code class="fe ln lo lp lq b">App</code>类。<code class="fe ln lo lp lq b">CTk</code>是自定义的<code class="fe ln lo lp lq b">tkinter</code>等价于<code class="fe ln lo lp lq b">Tk</code>，它是我们应用程序主体(窗口)的类，将成为我们应用程序的根窗口。</p><p id="40a5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，为了添加标题，我们使用self的<code class="fe ln lo lp lq b">title</code>属性(我们应用程序的根)。</p><p id="803f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的应用程序中添加一个标题后，为了去掉图标(这部分是可选的，你不想麻烦它)，我们首先使用<code class="fe ln lo lp lq b">PhotoImage</code>加载图像，然后使用<code class="fe ln lo lp lq b">iconbitmap</code>属性为我们的应用程序设置一个图标(你可以使用任何你喜欢的带有“ico”文件扩展名的图标)。</p><p id="737a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，为了设置应用程序窗口的尺寸，我们使用<code class="fe ln lo lp lq b">geometry</code>属性来设置它们。您以字符串<code class="fe ln lo lp lq b">(300x300)</code>的形式设置尺寸。</p><p id="336f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这个应用程序，我使用了300乘300的尺寸，因为它们似乎是合适的尺寸。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="40d0" class="lv lw iq lq b be lx ly l lz ma">class App(customtkinter.CTk):<br/>    def __init__(self):<br/>        super().__init__()<br/><br/>        self.title("QR Code Generator")<br/>        icon = PhotoImage("icon.ico")<br/>        self.iconbitmap(icon)<br/><br/>        height = 300<br/>        width = 300<br/>        self.geometry(f"{width}x{height}")<br/><br/>if __name__ == "__main__":<br/>  app = App()<br/>  app.mainloop()</span></pre><p id="122a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">运行代码后，我们应该会看到一个300 x 300的空窗口，类似于下面的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/1d243f1a953bcb2722b516ebf3a7e185.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*4WCYKEbMZkyzC1kZmBP48g.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">空白应用程序窗口</p></figure><p id="9d14" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们可以在屏幕上显示一个空白窗口，我们现在可以开始向它添加元素。首先，我们将添加一个框架，它实际上是父根窗口(父容器)中的一个容器。</p><p id="5fa9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将调用<code class="fe ln lo lp lq b">CTkFrame</code>来将帧添加到我们的应用程序中。我们将把<code class="fe ln lo lp lq b">self</code>(在我们的例子中是根)设置为它的<code class="fe ln lo lp lq b">master</code>(父容器)，然后我们将使用<code class="fe ln lo lp lq b">pack</code>属性让它显示在我们的屏幕上。然而，在我们最终完成之前，我们将在所有四个侧面增加20个单位的衬垫，使用<code class="fe ln lo lp lq b">padx</code>和<code class="fe ln lo lp lq b">pady</code>使它看起来不那么拥挤，我们将让它填充“两个”方向并扩展。我们的类和应用程序应该如下所示。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="6da4" class="lv lw iq lq b be lx ly l lz ma">class App(customtkinter.CTk):<br/>    def __init__(self):<br/>        super().__init__()<br/>        <br/>        self.title("QR Code Generator")<br/>        icon = PhotoImage("icon.ico")<br/>        self.iconbitmap(icon)<br/><br/>        height = 300<br/>        width = 300<br/>        self.geometry(f"{width}x{height}")<br/><br/>        frame = customtkinter.CTkFrame(master=self)<br/>        frame.pack(pady=20,padx=20, fill="both", expand=True)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/b558691a4a02cd76afd75ae05d01a639.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*W_FRFdMr6z1Xt9rHAhT_Iw.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">带框架的应用程序窗口</p></figure><p id="8ba0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们有了一个容器，我们将使用<code class="fe ln lo lp lq b">CTkLabel</code>添加一个标签(文本元素)。它将显示一个文本说<code class="fe ln lo lp lq b">“QR Code\nGenerator &amp; Decoder” </code> (\n是一个新的一行)，它将使用“柏林无FB”字体，字体大小为18。</p><p id="09a9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在调用它之后，我们将再次使用<code class="fe ln lo lp lq b">pack</code>属性让它显示在我们的应用程序上。同样，我们将使用<code class="fe ln lo lp lq b">padx</code>和<code class="fe ln lo lp lq b">pady</code>给它10个单位的水平和垂直填充。我们的应用程序现在应该看起来像这样。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="4c45" class="lv lw iq lq b be lx ly l lz ma">class App(customtkinter.CTk):<br/>    def __init__(self):<br/>        super().__init__()<br/><br/>        self.title("QR Code Generator")<br/>        icon = PhotoImage("icon.ico")<br/>        self.iconbitmap(icon)<br/><br/>        height = 300<br/>        width = 300<br/>        self.geometry(f"{width}x{height}")<br/><br/>        frame = customtkinter.CTkFrame(master=self)<br/>        frame.pack(pady=20,padx=20, fill="both", expand=True)<br/><br/>        label = customtkinter.CTkLabel(master=frame, text="QR Code\nGenerator &amp; Decoder", font=("Berlin Sans FB", 18))<br/>        label.pack(pady=10, padx=10)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/8421d748964781821674d33ffcbf6c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*7Auz7hwDgzs_qrjAeiNF7w.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">添加标签后的应用程序窗口</p></figure><p id="85b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>在custom Tkinter或<code class="fe ln lo lp lq b">tkinter</code>中，您应该可以使用安装在您电脑上的任何字体。对于windows，如果你想知道你的电脑上安装了什么样的字体，你可以去你的windows搜索栏输入“font ”,然后从字体设置中查看。</p><p id="c943" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们知道了如何添加一个小部件，我们想做的第一件事是使用<code class="fe ln lo lp lq b">CTkEntry</code>添加一个入口小部件，然后使用<code class="fe ln lo lp lq b">CTkButton</code>添加两个按钮，一个用于生成二维码，一个用于解码二维码。</p><p id="2140" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于我们的条目字段，我们将把<code class="fe ln lo lp lq b">frame</code>定义为它的父字段(主字段),它的<code class="fe ln lo lp lq b">width</code>将为200。将会有占位符文本显示<code class="fe ln lo lp lq b">“Enter Text Here”</code>，为了使文本在输入字段内居中，我们将使用<code class="fe ln lo lp lq b">justify="center"</code>。</p><p id="42fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们希望它使用字体大小为16的“Consolas”字体。然而，在我们显示它之前，我们将使用<code class="fe ln lo lp lq b">ipadx</code>和<code class="fe ln lo lp lq b">ipady</code>在每个方向添加5个单位的顶部和底部填充以及5个单位的内部填充。</p><p id="32eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于我们的按钮，我们将使用<code class="fe ln lo lp lq b">CTkButton</code>。对于第一个，它的父容器将再次是<code class="fe ln lo lp lq b">frame</code>，它将显示文本<code class="fe ln lo lp lq b">“Generate Code”</code>，并使用字体大小为16的“Berlin Sans FB”字体。我们将<code class="fe ln lo lp lq b">pack</code>它的x和y填充为10，所有方向的内部填充为5。</p><p id="a01d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于第二个按钮，我们将复制并粘贴第一个按钮，使用不同的变量名和文本“<code class="fe ln lo lp lq b">Decode QR Code”</code>”。至此，我们的代码和应用程序应该看起来有点像这样。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="f9e8" class="lv lw iq lq b be lx ly l lz ma">class App(customtkinter.CTk):<br/>    def __init__(self):<br/>        super().__init__()<br/><br/>        #Previous code<br/><br/>        frame = customtkinter.CTkFrame(master=self)<br/>        frame.pack(pady=20,padx=20, fill="both", expand=True)<br/><br/>        label = customtkinter.CTkLabel(master=frame, text="QR Code\nGenerator &amp; Decoder", font=("Berlin Sans FB", 18))<br/>        label.pack(pady=10, padx=10)<br/><br/>        url_input = customtkinter.CTkEntry(master=frame, placeholder_text="Enter Text Here",justify="center",width=200, font=("Consolas", 16))<br/>        url_input.pack(ipady=5,ipadx=5,pady=5)<br/><br/>        btn_gen = customtkinter.CTkButton(master=frame, text="Generate Code", font=("Berlin Sans FB", 16))<br/>        btn_gen.pack(ipady=5,ipadx=5,pady=10,padx=10)<br/>        <br/>        btn_dec = customtkinter.CTkButton(master=frame, text="Decode QR Code", font=("Berlin Sans FB", 16))<br/>        btn_dec.pack(ipady=5,ipadx=5,pady=10,padx=10)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mi"><img src="../Images/0de48533db61ffd5b1e32e0a3036fcef.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*KMKgbEoFOfmlnHvowZLs_A.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">添加输入字段和按钮后的应用程序窗口</p></figure><p id="3212" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们已经完成了主应用程序窗口，我们现在可以工作的功能。但在此之前，我们将创建一个弹出窗口，稍后在添加功能时会用到它。</p><p id="41c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们首先定义一个名为pop_up的函数，它有一个字符串参数msg，这是将显示在弹出窗口上的消息。</p><p id="e742" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在函数内部，我们首先将使用<code class="fe ln lo lp lq b">CTkTopLevel</code>为弹出窗口定义一个根。我们给它加上标题<code class="fe ln lo lp lq b">“For you!”</code>(因为这是给用户的消息，我认为它适合:D)，将其大小锁定为300乘180。在添加图标之前，我们通过设置一个<code class="fe ln lo lp lq b">minsize</code>和<code class="fe ln lo lp lq b">maxsize</code>使其相等，就像在主应用程序窗口中一样(使用<code class="fe ln lo lp lq b">iconbitmap</code>)。代码应该是这样的。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="b0d5" class="lv lw iq lq b be lx ly l lz ma">def pop_up(msg:str):<br/>        win = customtkinter.CTkToplevel()<br/>        win.wm_title("For you!")<br/>        win.maxsize(300,180)<br/>        win.minsize(300,180)<br/>        icon = PhotoImage("code.ico")<br/>        win.iconbitmap(icon)</span></pre><p id="5a28" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了测试弹出窗口，我们可以调用它作为我们的一个按钮的<code class="fe ln lo lp lq b">command</code>,如下所示。请注意，当调用这个函数时，我们需要使用<code class="fe ln lo lp lq b">lambda</code>，因为我们需要给这个函数传递一个参数。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="bdfc" class="lv lw iq lq b be lx ly l lz ma">btn_gen = customtkinter.CTkButton(master=frame, text="Generate Code", font=("Berlin Sans FB", 16), command=lambda:pop_up("dummy string that won't be displayed"))<br/>btn_gen.pack(ipady=5,ipadx=5,pady=10,padx=10)</span></pre><p id="fb04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">单击该按钮后，应该会出现以下弹出窗口。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/8daaff4fbc041c33023cd3fe19856ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*XpMby2xNMjFUNo4GfbQxvw.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">空白弹出窗口</p></figure><p id="ca82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们可以显示弹出窗口，我们可以开始向它添加元素。</p><p id="2d68" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们将添加一个在每个方向上有20个填充单位的框架，一个将显示输入参数的标签，该输入参数使用“Berlin Sans FB”作为其字体，字体大小为16，在每个方向上有10个填充单位，最后一个按钮将在按下后关闭弹出窗口。我们通过调用<code class="fe ln lo lp lq b">win.destroy</code>来实现，它将关闭(摧毁)它曾经调用过的自我。</p><p id="257e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，给我们的按钮每个方向5个内部填充，每个方向10个外部填充，一个显示文本<code class="fe ln lo lp lq b">“OK”</code>，字体选择“Berlin Sans FB ”,字体大小为16。一旦我们做了所有的事情，代码和弹出窗口应该如下所示。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="3808" class="lv lw iq lq b be lx ly l lz ma">def pop_up(msg:str):<br/>        win = customtkinter.CTkToplevel()<br/>        win.wm_title("For you!")<br/>        win.maxsize(300,180)<br/>        win.minsize(300,180)<br/>        icon = PhotoImage("code.ico")<br/>        win.iconbitmap(icon)<br/><br/>        frame = customtkinter.CTkFrame(master=win)<br/>        frame.pack(pady=20, padx=20,fill="both", expand=True)<br/><br/>        label = customtkinter.CTkLabel(master=frame, text=msg, font=("Berlin Sans FB", 16))<br/>        label.pack(pady=10, padx=10)<br/><br/>        btn = customtkinter.CTkButton(master=frame, text="OK", font=("Berlin Sans FB", 16),command=win.destroy)<br/>        btn.pack(ipady=5,ipadx=5,pady=10,padx=10)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/17d6f160a04c64bc84c21b86f766e6ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*oMImCeIZ-nnfsovKZaCgfw.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">添加了元素的弹出窗口。</p></figure><p id="9d2c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>对于正在显示的字符串来说，窗口宽度可能有点太小，所以请不要犹豫将它变大。</p><p id="e3dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们已经完成了所有与GUI相关的部分，现在我们可以开始实现应用程序的功能了，这可能会让人感到惊讶，但却是应用程序中最简单的部分。</p><p id="a999" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于二维码生成，我们将从定义一个名为<code class="fe ln lo lp lq b">generate_code</code>的函数开始。它将有一个名为<code class="fe ln lo lp lq b">url</code>的字符串类型的参数。使用<code class="fe ln lo lp lq b">qrcode.make</code>我们将把它变成一个二维码。在我们保存它之前，我们首先需要使用<code class="fe ln lo lp lq b">os.getenv(‘USERPROFILE’)</code>定位用户下载(这部分是可选的，但是在下载中保存它更有意义)并在它的末尾添加<code class="fe ln lo lp lq b">“\\Downloads”</code>。</p><p id="b4d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之后，我们使用<code class="fe ln lo lp lq b">code.save</code>保存代码。一旦一切完成，弹出窗口将会显示“代码在<code class="fe ln lo lp lq b">C://user/downloads/folder</code>”。代码应该如下所示。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="7de3" class="lv lw iq lq b be lx ly l lz ma">def generate_code(url:str):<br/>    code = qrcode.make(url)<br/>    downloads = f"{os.getenv('USERPROFILE')}\\Downloads"<br/>    code.save(downloads + '/code.png')<br/>    pop_up("The QR code is at &gt;&gt;\n" + downloads)</span></pre><p id="9905" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，在我们使用它之前，我们需要将按钮的命令从<code class="fe ln lo lp lq b">pop_up</code>改为<code class="fe ln lo lp lq b">generate_code</code>，并从输入框中获取字符串。要从输入框中获取字符串，我们可以使用<code class="fe ln lo lp lq b">entry.get</code>，它返回输入框中的字符串，并将其作为参数传递给我们的函数。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="a9b3" class="lv lw iq lq b be lx ly l lz ma">btn_gen = customtkinter.CTkButton(master=frame, text="Generate Code", font=("Berlin Sans FB", 16), command=lambda:generate_code(url_input.get()))<br/>btn_gen.pack(ipady=5,ipadx=5,pady=10,padx=10)</span></pre><p id="28de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦一切都做好了，下面应该就是结果了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/be2a67dc894203bbce1f5b73d85019b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VR6LJPsju7r5taNq3Z3Rbg.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">弹出生成的二维码</p></figure><p id="90e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们已经完成了所有其他工作，我们需要做的最后一件事是向我们的应用程序添加解码功能。</p><p id="168e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要能够选择一个包含二维码的文件进行解码。为此，我们将使用来自<code class="fe ln lo lp lq b">tkinter</code>的<code class="fe ln lo lp lq b">filedialog</code>和<code class="fe ln lo lp lq b">((“image”, “.jpg”), (“image”, “.jpeg”), (“image”, “.png”))</code>的文件类型。一旦我们能够选择要解码的文件，我们将使用<code class="fe ln lo lp lq b">cv2.QRCodeDetector</code>来解码它。但是，在此之前，我们需要使用<code class="fe ln lo lp lq b">cv2.imread</code>将其作为图像加载到我们的检测器。一旦一切完成，一个弹出窗口将显示代码中的文本。</p><pre class="kg kh ki kj gt lr lq ls bn lt lu bi"><span id="aeea" class="lv lw iq lq b be lx ly l lz ma">def decode():<br/>    qr_code = filedialog.askopenfilename(initialdir="/", title="Select File", filetypes=(("image", ".jpg"), ("image", ".jpeg"), ("image", ".png")))<br/>    code_detector = cv2.QRCodeDetector()<br/>    code_str, _, _ = code_detector.detectAndDecode(cv2.imread(qr_code))<br/>    pop_up(code_str)</span></pre><p id="a363" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在添加了这个功能作为我们解码按钮的命令后，我们的app现在可以解码二维码了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mm"><img src="../Images/a5e82eca3f63a21591820335fef5dc66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s8Fkki3b-U9iafr6FOBN5w.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">用于解码的文件对话框</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/fd2f4a94da264ccc5984126c6bb0e708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*DHOXxyygtoJisKBiSqmY7w.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">弹出解码信息</p></figure><p id="535b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们有了一个功能齐全的应用程序。如果您希望获得完整的代码，可以在以下位置找到:</p><div class="mo mp gp gr mq mr"><a href="https://github.com/dekaottoman/QR-code-generator-decoder" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">GitHub-dekaotoman/QR-code-generator-decoder:一个我编程的QR码生成器和解码器…</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">一个二维码发生器和解码器，我用二维码，cv2和Tkinter模块编程。- GitHub …</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">github.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf kp mr"/></div></div></a></div></div></div>    
</body>
</html>